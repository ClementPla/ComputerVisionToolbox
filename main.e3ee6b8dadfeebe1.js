"use strict";(self.webpackChunkcv_toolbox=self.webpackChunkcv_toolbox||[]).push([[179],{118:(Ut,rt,z)=>{function le(e){return"function"==typeof e}function Se(e){const t=e(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const ce=Se(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function _e(e,n){if(e){const t=e.indexOf(n);0<=t&&e.splice(t,1)}}class ye{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(le(r))try{r()}catch(o){n=o instanceof ce?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{de(o)}catch(d){n=n??[],d instanceof ce?n=[...n,...d.errors]:n.push(d)}}if(n)throw new ce(n)}}add(n){var t;if(n&&n!==this)if(this.closed)de(n);else{if(n instanceof ye){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(n)}}_hasParent(n){const{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){const{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&_e(t,n)}remove(n){const{_finalizers:t}=this;t&&_e(t,n),n instanceof ye&&n._removeParent(this)}}ye.EMPTY=(()=>{const e=new ye;return e.closed=!0,e})();const be=ye.EMPTY;function we(e){return e instanceof ye||e&&"closed"in e&&le(e.remove)&&le(e.add)&&le(e.unsubscribe)}function de(e){le(e)?e():e.unsubscribe()}const j={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},$={setTimeout(e,n,...t){const{delegate:r}=$;return r?.setTimeout?r.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){const{delegate:n}=$;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function G(e){$.setTimeout(()=>{const{onUnhandledError:n}=j;if(!n)throw e;n(e)})}function Z(){}const te=J("C",void 0,void 0);function J(e,n,t){return{kind:e,value:n,error:t}}let b=null;function Y(e){if(j.useDeprecatedSynchronousErrorHandling){const n=!b;if(n&&(b={errorThrown:!1,error:null}),e(),n){const{errorThrown:t,error:r}=b;if(b=null,t)throw r}}else e()}class H extends ye{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,we(n)&&n.add(this)):this.destination=P}static create(n,t,r){return new K(n,t,r)}next(n){this.isStopped?D(function Q(e){return J("N",e,void 0)}(n),this):this._next(n)}error(n){this.isStopped?D(function ee(e){return J("E",void 0,e)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?D(te,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const re=Function.prototype.bind;function W(e,n){return re.call(e,n)}class X{constructor(n){this.partialObserver=n}next(n){const{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(r){B(r)}}error(n){const{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(r){B(r)}else B(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){B(t)}}}class K extends H{constructor(n,t,r){let i;if(super(),le(n)||!n)i={next:n??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&j.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=()=>this.unsubscribe(),i={next:n.next&&W(n.next,o),error:n.error&&W(n.error,o),complete:n.complete&&W(n.complete,o)}):i=n}this.destination=new X(i)}}function B(e){j.useDeprecatedSynchronousErrorHandling?function q(e){j.useDeprecatedSynchronousErrorHandling&&b&&(b.errorThrown=!0,b.error=e)}(e):G(e)}function D(e,n){const{onStoppedNotification:t}=j;t&&$.setTimeout(()=>t(e,n))}const P={closed:!0,next:Z,error:function O(e){throw e},complete:Z},I="function"==typeof Symbol&&Symbol.observable||"@@observable";function T(e){return e}function L(e){return 0===e.length?T:1===e.length?e[0]:function(t){return e.reduce((r,i)=>i(r),t)}}let N=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new e;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function ae(e){return e&&e instanceof H||function oe(e){return e&&le(e.next)&&le(e.error)&&le(e.complete)}(e)&&we(e)}(t)?t:new K(t,r,i);return Y(()=>{const{operator:d,source:f}=this;o.add(d?d.call(o,f):f?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=ie(r))((i,o)=>{const d=new K({next:f=>{try{t(f)}catch(g){o(g),d.unsubscribe()}},error:o,complete:i});this.subscribe(d)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[I](){return this}pipe(...t){return L(t)(this)}toPromise(t){return new(t=ie(t))((r,i)=>{let o;this.subscribe(d=>o=d,d=>i(d),()=>r(o))})}}return e.create=n=>new e(n),e})();function ie(e){var n;return null!==(n=e??j.Promise)&&void 0!==n?n:Promise}const he=Se(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let se=(()=>{class e extends N{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new xe(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new he}next(t){Y(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Y(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Y(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?be:(this.currentObservers=null,o.push(t),new ye(()=>{this.currentObservers=null,_e(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new N;return t.source=this,t}}return e.create=(n,t)=>new xe(n,t),e})();class xe extends se{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,n)}error(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,n)}complete(){var n,t;null===(t=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===t||t.call(n)}_subscribe(n){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(n))&&void 0!==r?r:be}}function fe(e){return le(e?.lift)}function ge(e){return n=>{if(fe(n))return n.lift(function(t){try{return e(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ce(e,n,t,r,i){return new Te(e,n,t,r,i)}class Te extends H{constructor(n,t,r,i,o,d){super(n),this.onFinalize=o,this.shouldUnsubscribe=d,this._next=t?function(f){try{t(f)}catch(g){n.error(g)}}:super._next,this._error=i?function(f){try{i(f)}catch(g){n.error(g)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(f){n.error(f)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function Ie(e,n){return ge((t,r)=>{let i=0;t.subscribe(Ce(r,o=>{r.next(e.call(n,o,i++))}))})}function Nn(e){return this instanceof Nn?(this.v=e,this):new Nn(e)}function jn(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(e,n||[]),o=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",function d(V){return function(ne){return Promise.resolve(ne).then(V,S)}}),i[Symbol.asyncIterator]=function(){return this},i;function f(V,ne){r[V]&&(i[V]=function(pe){return new Promise(function(De,Re){o.push([V,pe,De,Re])>1||g(V,pe)})},ne&&(i[V]=ne(i[V])))}function g(V,ne){try{!function _(V){V.value instanceof Nn?Promise.resolve(V.value.v).then(w,S):k(o[0][2],V)}(r[V](ne))}catch(pe){k(o[0][3],pe)}}function w(V){g("next",V)}function S(V){g("throw",V)}function k(V,ne){V(ne),o.shift(),o.length&&g(o[0][0],o[0][1])}}function gr(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function pr(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=e[o]&&function(d){return new Promise(function(f,g){!function i(o,d,f,g){Promise.resolve(g).then(function(_){o({value:_,done:f})},d)}(f,g,(d=e[o](d)).done,d.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Zt=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function vn(e){return le(e?.then)}function mn(e){return le(e[I])}function Rn(e){return Symbol.asyncIterator&&le(e?.[Symbol.asyncIterator])}function ur(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Li=function Zi(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function qa(e){return le(e?.[Li])}function ea(e){return jn(this,arguments,function*(){const t=e.getReader();try{for(;;){const{value:r,done:i}=yield Nn(t.read());if(i)return yield Nn(void 0);yield yield Nn(r)}}finally{t.releaseLock()}})}function co(e){return le(e?.getReader)}function Ea(e){if(e instanceof N)return e;if(null!=e){if(mn(e))return function Iv(e){return new N(n=>{const t=e[I]();if(le(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Zt(e))return function Bu(e){return new N(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}(e);if(vn(e))return function Vu(e){return new N(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,G)})}(e);if(Rn(e))return Gl(e);if(qa(e))return function Pv(e){return new N(n=>{for(const t of e)if(n.next(t),n.closed)return;n.complete()})}(e);if(co(e))return function t0(e){return Gl(ea(e))}(e)}throw ur(e)}function Gl(e){return new N(n=>{(function Kf(e,n){var t,r,i,o;return function fn(e,n,t,r){return new(t||(t=Promise))(function(o,d){function f(w){try{_(r.next(w))}catch(S){d(S)}}function g(w){try{_(r.throw(w))}catch(S){d(S)}}function _(w){w.done?o(w.value):function i(o){return o instanceof t?o:new t(function(d){d(o)})}(w.value).then(f,g)}_((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function*(){try{for(t=gr(e);!(r=yield t.next()).done;)if(n.next(r.value),n.closed)return}catch(d){i={error:d}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}n.complete()})})(e,n).catch(t=>n.error(t))})}function Ms(e,n,t,r=0,i=!1){const o=n.schedule(function(){t(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function Fa(e,n,t=1/0){return le(n)?Fa((r,i)=>Ie((o,d)=>n(r,o,i,d))(Ea(e(r,i))),t):("number"==typeof n&&(t=n),ge((r,i)=>function Xs(e,n,t,r,i,o,d,f){const g=[];let _=0,w=0,S=!1;const k=()=>{S&&!g.length&&!_&&n.complete()},V=pe=>_<r?ne(pe):g.push(pe),ne=pe=>{o&&n.next(pe),_++;let De=!1;Ea(t(pe,w++)).subscribe(Ce(n,Re=>{i?.(Re),o?V(Re):n.next(Re)},()=>{De=!0},void 0,()=>{if(De)try{for(_--;g.length&&_<r;){const Re=g.shift();d?Ms(n,d,()=>ne(Re)):ne(Re)}k()}catch(Re){n.error(Re)}}))};return e.subscribe(Ce(n,V,()=>{S=!0,k()})),()=>{f?.()}}(r,i,e,t)))}function $s(e=1/0){return Fa(T,e)}const Aa=new N(e=>e.complete());function sh(e){return e&&le(e.schedule)}function Qf(e){return e[e.length-1]}function Wl(e){return le(Qf(e))?e.pop():void 0}function zu(e){return sh(Qf(e))?e.pop():void 0}function cu(e,n=0){return ge((t,r)=>{t.subscribe(Ce(r,i=>Ms(r,e,()=>r.next(i),n),()=>Ms(r,e,()=>r.complete(),n),i=>Ms(r,e,()=>r.error(i),n)))})}function qf(e,n=0){return ge((t,r)=>{r.add(e.schedule(()=>t.subscribe(r),n))})}function Rt(e,n){if(!e)throw new Error("Iterable cannot be null");return new N(t=>{Ms(t,n,()=>{const r=e[Symbol.asyncIterator]();Ms(t,n,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function dr(e,n){return n?function zi(e,n){if(null!=e){if(mn(e))return function Hu(e,n){return Ea(e).pipe(qf(n),cu(n))}(e,n);if(Zt(e))return function Ov(e,n){return new N(t=>{let r=0;return n.schedule(function(){r===e.length?t.complete():(t.next(e[r++]),t.closed||this.schedule())})})}(e,n);if(vn(e))return function Lv(e,n){return Ea(e).pipe(qf(n),cu(n))}(e,n);if(Rn(e))return Rt(e,n);if(qa(e))return function kv(e,n){return new N(t=>{let r;return Ms(t,n,()=>{r=e[Li](),Ms(t,n,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(d){return void t.error(d)}o?t.complete():t.next(i)},0,!0)}),()=>le(r?.return)&&r.return()})}(e,n);if(co(e))return function ta(e,n){return Rt(ea(e),n)}(e,n)}throw ur(e)}(e,n):Ea(e)}function Vn(...e){const n=zu(e),t=function Rv(e,n){return"number"==typeof Qf(e)?e.pop():n}(e,1/0),r=e;return r.length?1===r.length?Ea(r[0]):$s(t)(dr(r,n)):Aa}function Jf(e={}){const{connector:n=(()=>new se),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return o=>{let d,f,g,_=0,w=!1,S=!1;const k=()=>{f?.unsubscribe(),f=void 0},V=()=>{k(),d=g=void 0,w=S=!1},ne=()=>{const pe=d;V(),pe?.unsubscribe()};return ge((pe,De)=>{_++,!S&&!w&&k();const Re=g=g??n();De.add(()=>{_--,0===_&&!S&&!w&&(f=ep(ne,i))}),Re.subscribe(De),!d&&_>0&&(d=new K({next:Fe=>Re.next(Fe),error:Fe=>{S=!0,k(),f=ep(V,t,Fe),Re.error(Fe)},complete:()=>{w=!0,k(),f=ep(V,r),Re.complete()}}),Ea(pe).subscribe(d))})(o)}}function ep(e,n,...t){if(!0===n)return void e();if(!1===n)return;const r=new K({next:()=>{r.unsubscribe(),e()}});return n(...t).subscribe(r)}function on(e){for(let n in e)if(e[n]===on)return n;throw Error("Could not find renamed property on target object.")}function Un(e,n){for(const t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function Fn(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Fn).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const t=n.indexOf("\n");return-1===t?n:n.substring(0,t)}function bn(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const Nv=on({__forward_ref__:on});function kr(e){return e.__forward_ref__=kr,e.toString=function(){return Fn(this())},e}function wr(e){return Bn(e)?e():e}function Bn(e){return"function"==typeof e&&e.hasOwnProperty(Nv)&&e.__forward_ref__===kr}class an extends Error{constructor(n,t){super(function Ks(e,n){return`NG0${Math.abs(e)}${n?": "+n.trim():""}`}(n,t)),this.code=n}}function Sr(e){return"string"==typeof e?e:null==e?"":String(e)}function Ts(e,n){throw new an(-201,!1)}function Vo(e,n){null==e&&function Di(e,n,t,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${t} ${r} ${n} <=Actual]`))}(n,e,null,"!=")}function Jt(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}const hs=Jt;function ft(e){return{providers:e.providers||[],imports:e.imports||[]}}function Ba(e){return Rc(e,Uu)||Rc(e,ch)}function Rc(e,n){return e.hasOwnProperty(n)?e[n]:null}function rp(e){return e&&(e.hasOwnProperty(Gu)||e.hasOwnProperty(Vv))?e[Gu]:null}const Uu=on({\u0275prov:on}),Gu=on({\u0275inj:on}),ch=on({ngInjectableDef:on}),Vv=on({ngInjectorDef:on});var ar=(()=>((ar=ar||{})[ar.Default=0]="Default",ar[ar.Host=1]="Host",ar[ar.Self=2]="Self",ar[ar.SkipSelf=4]="SkipSelf",ar[ar.Optional=8]="Optional",ar))();let uh;function zo(e){const n=uh;return uh=e,n}function Wu(e,n,t){const r=Ba(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&ar.Optional?null:void 0!==n?n:void Ts(Fn(e))}function Qs(e){return{toString:e}.toString()}var Ho=(()=>((Ho=Ho||{})[Ho.OnPush=0]="OnPush",Ho[Ho.Default=1]="Default",Ho))(),Ja=(()=>{return(e=Ja||(Ja={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",Ja;var e})();const Oi=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),qs={},ti=[],Zu=on({\u0275cmp:on}),dh=on({\u0275dir:on}),To=on({\u0275pipe:on}),ip=on({\u0275mod:on}),uo=on({\u0275fac:on}),jl=on({__NG_ELEMENT_ID__:on});let hh=0;function qn(e){return Qs(()=>{const t=!0===e.standalone,r={},i={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===Ho.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&e.dependencies||null,getStandaloneInjector:null,selectors:e.selectors||ti,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||Ja.Emulated,id:"c"+hh++,styles:e.styles||ti,_:null,setInput:null,schemas:e.schemas||null,tView:null},o=e.dependencies,d=e.features;return i.inputs=fu(e.inputs,r),i.outputs=fu(e.outputs),d&&d.forEach(f=>f(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(hu).filter(Eo):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(da).filter(Eo):null,i})}function hu(e){return hi(e)||Va(e)}function Eo(e){return null!==e}function vr(e){return Qs(()=>({type:e.type,bootstrap:e.bootstrap||ti,declarations:e.declarations||ti,imports:e.imports||ti,exports:e.exports||ti,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function fu(e,n){if(null==e)return qs;const t={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),t[i]=r,n&&(n[i]=o)}return t}const Sn=qn;function hi(e){return e[Zu]||null}function Va(e){return e[dh]||null}function da(e){return e[To]||null}function Ao(e,n){const t=e[ip]||null;if(!t&&!0===n)throw new Error(`Type ${Fn(e)} does not have '\u0275mod' property.`);return t}function zt(e){return Array.isArray(e)&&"object"==typeof e[1]}function Pt(e){return Array.isArray(e)&&!0===e[1]}function tn(e){return 0!=(8&e.flags)}function xn(e){return 2==(2&e.flags)}function ut(e){return 1==(1&e.flags)}function Dt(e){return null!==e.template}function bt(e){return 0!=(256&e[2])}function Yu(e,n){return e.hasOwnProperty(uo)?e[uo]:null}class EP{constructor(n,t,r){this.previousValue=n,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function ba(){return jC}function jC(e){return e.type.prototype.ngOnChanges&&(e.setInput=IP),AP}function AP(){const e=xa(this),n=e?.current;if(n){const t=e.previous;if(t===qs)e.previous=n;else for(let r in n)t[r]=n[r];e.current=null,this.ngOnChanges(n)}}function IP(e,n,t,r){const i=xa(e)||function PP(e,n){return e[Ra]=n}(e,{previous:qs,current:null}),o=i.current||(i.current={}),d=i.previous,f=this.declaredInputs[t],g=d[f];o[f]=new EP(g&&g.currentValue,n,d===qs),e[r]=n}ba.ngInherit=!0;const Ra="__ngSimpleChanges__";function xa(e){return e[Ra]||null}function Ha(e){for(;Array.isArray(e);)e=e[0];return e}function jv(e,n){return Ha(n[e])}function Po(e,n){return Ha(n[e.index])}function wa(e,n){return e.data[n]}function Hr(e,n){const t=n[e];return zt(t)?t:t[0]}function mh(e){return 64==(64&e[2])}function gu(e,n){return null==n?null:e[n]}function QC(e){e[18]=0}function Is(e,n){e[5]+=n;let t=e,r=e[3];for(;null!==r&&(1===n&&1===t[5]||-1===n&&0===t[5]);)r[5]+=n,t=r,r=r[3]}const Br={lFrame:bh(null),bindingsEnabled:!0};function cp(){return Br.bindingsEnabled}function pn(){return Br.lFrame.lView}function yi(){return Br.lFrame.tView}function Ur(e){return Br.lFrame.contextLView=e,e[8]}function Gr(e){return Br.lFrame.contextLView=null,e}function to(){let e=rS();for(;null!==e&&64===e.type;)e=e.parent;return e}function rS(){return Br.lFrame.currentTNode}function ki(e,n){const t=Br.lFrame;t.currentTNode=e,t.isParent=n}function Kl(){return Br.lFrame.isParent}function Bc(){Br.lFrame.isParent=!1}function Uo(){const e=Br.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function Ql(){return Br.lFrame.bindingIndex}function yh(){return Br.lFrame.bindingIndex++}function Vc(e){const n=Br.lFrame,t=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,t}function kP(e,n){const t=Br.lFrame;t.bindingIndex=t.bindingRootIndex=e,h0(n)}function h0(e){Br.lFrame.currentDirectiveIndex=e}function f0(e){const n=Br.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}function iS(){return Br.lFrame.currentQueryIndex}function up(e){Br.lFrame.currentQueryIndex=e}function FP(e){const n=e[1];return 2===n.type?n.declTNode:1===n.type?e[6]:null}function Zv(e,n,t){if(t&ar.SkipSelf){let i=n,o=e;for(;!(i=i.parent,null!==i||t&ar.Host||(i=FP(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;n=i,e=o}const r=Br.lFrame=Yv();return r.currentTNode=n,r.lView=e,!0}function p0(e){const n=Yv(),t=e[1];Br.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function Yv(){const e=Br.lFrame,n=null===e?null:e.child;return null===n?bh(e):n}function bh(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function g0(){const e=Br.lFrame;return Br.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const aS=g0;function zc(){const e=g0();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Go(){return Br.lFrame.selectedIndex}function vu(e){Br.lFrame.selectedIndex=e}function Ca(){const e=Br.lFrame;return wa(e.tView,e.selectedIndex)}function xh(){Br.lFrame.currentNamespace="svg"}function dp(e,n){for(let t=n.directiveStart,r=n.directiveEnd;t<r;t++){const o=e.data[t].type.prototype,{ngAfterContentInit:d,ngAfterContentChecked:f,ngAfterViewInit:g,ngAfterViewChecked:_,ngOnDestroy:w}=o;d&&(e.contentHooks||(e.contentHooks=[])).push(-t,d),f&&((e.contentHooks||(e.contentHooks=[])).push(t,f),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(t,f)),g&&(e.viewHooks||(e.viewHooks=[])).push(-t,g),_&&((e.viewHooks||(e.viewHooks=[])).push(t,_),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(t,_)),null!=w&&(e.destroyHooks||(e.destroyHooks=[])).push(t,w)}}function hp(e,n,t){y0(e,n,3,t)}function Xv(e,n,t,r){(3&e[2])===t&&y0(e,n,t,r)}function _0(e,n){let t=e[2];(3&t)===n&&(t&=2047,t+=1,e[2]=t)}function y0(e,n,t,r){const o=r??-1,d=n.length-1;let f=0;for(let g=void 0!==r?65535&e[18]:0;g<d;g++)if("number"==typeof n[g+1]){if(f=n[g],null!=r&&f>=r)break}else n[g]<0&&(e[18]+=65536),(f<o||-1==o)&&(sS(e,t,n,g),e[18]=(4294901760&e[18])+g+2),g++}function sS(e,n,t,r){const i=t[r]<0,o=t[r+1],f=e[i?-t[r]:t[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===n){e[2]+=2048;try{o.call(f)}finally{}}}else try{o.call(f)}finally{}}class Wo{constructor(n,t,r){this.factory=n,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function $v(e,n,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],d=t[r++],f=t[r++];e.setAttribute(n,d,f,o)}else{const o=i,d=t[++r];w0(o)?e.setProperty(n,o,d):e.setAttribute(n,o,d),r++}}return r}function wh(e){return 3===e||4===e||6===e}function w0(e){return 64===e.charCodeAt(0)}function Kv(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let t=-1;for(let r=0;r<n.length;r++){const i=n[r];"number"==typeof i?t=i:0===t||lS(e,t,i,null,-1===t||2===t?n[++r]:null)}}return e}function lS(e,n,t,r,i){let o=0,d=e.length;if(-1===n)d=-1;else for(;o<e.length;){const f=e[o++];if("number"==typeof f){if(f===n){d=-1;break}if(f>n){d=o-1;break}}}for(;o<e.length;){const f=e[o];if("number"==typeof f)break;if(f===t){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==d&&(e.splice(d,0,n),o=d+1),e.splice(o++,0,t),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}function cS(e){return-1!==e}function Ch(e){return 32767&e}function Sh(e,n){let t=function WP(e){return e>>16}(e),r=n;for(;t>0;)r=r[15],t--;return r}let C0=!0;function Qv(e){const n=C0;return C0=e,n}let qv=0;const wl={};function pp(e,n){const t=gp(e,n);if(-1!==t)return t;const r=n[1];r.firstCreatePass&&(e.injectorIndex=n.length,Jv(r.data,e),Jv(n,null),Jv(r.blueprint,null));const i=em(e,n),o=e.injectorIndex;if(cS(i)){const d=Ch(i),f=Sh(i,n),g=f[1].data;for(let _=0;_<8;_++)n[o+_]=f[d+_]|g[d+_]}return n[o+8]=i,o}function Jv(e,n){e.push(0,0,0,0,0,0,0,0,n)}function gp(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function em(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let t=0,r=null,i=n;for(;null!==i;){if(r=fS(i),null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function Dh(e,n,t){!function jP(e,n,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(jl)&&(r=t[jl]),null==r&&(r=t[jl]=qv++);const i=255&r;n.data[e+(i>>5)]|=1<<i}(e,n,t)}function vp(e,n,t){if(t&ar.Optional||void 0!==e)return e;Ts()}function Mh(e,n,t,r){if(t&ar.Optional&&void 0===r&&(r=null),0==(t&(ar.Self|ar.Host))){const i=e[9],o=zo(void 0);try{return i?i.get(n,r,t&ar.Optional):Wu(n,r,t&ar.Optional)}finally{zo(o)}}return vp(r,0,t)}function tm(e,n,t,r=ar.Default,i){if(null!==e){if(1024&n[2]){const d=function hS(e,n,t,r,i){let o=e,d=n;for(;null!==o&&null!==d&&1024&d[2]&&!(256&d[2]);){const f=nm(o,d,t,r|ar.Self,wl);if(f!==wl)return f;let g=o.parent;if(!g){const _=d[21];if(_){const w=_.get(t,wl,r);if(w!==wl)return w}g=fS(d),d=d[15]}o=g}return i}(e,n,t,r,wl);if(d!==wl)return d}const o=nm(e,n,t,r,wl);if(o!==wl)return o}return Mh(n,t,r,i)}function nm(e,n,t,r,i){const o=function rm(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(jl)?e[jl]:void 0;return"number"==typeof n?n>=0?255&n:im:n}(t);if("function"==typeof o){if(!Zv(n,e,r))return r&ar.Host?vp(i,0,r):Mh(n,t,r,i);try{const d=o(r);if(null!=d||r&ar.Optional)return d;Ts()}finally{aS()}}else if("number"==typeof o){let d=null,f=gp(e,n),g=-1,_=r&ar.Host?n[16][6]:null;for((-1===f||r&ar.SkipSelf)&&(g=-1===f?em(e,n):n[f+8],-1!==g&&D0(r,!1)?(d=n[1],f=Ch(g),n=Sh(g,n)):f=-1);-1!==f;){const w=n[1];if(dS(o,f,w.data)){const S=ZP(f,n,t,d,r,_);if(S!==wl)return S}g=n[f+8],-1!==g&&D0(r,n[1].data[f+8]===_)&&dS(o,f,n)?(d=w,f=Ch(g),n=Sh(g,n)):f=-1}}return i}function ZP(e,n,t,r,i,o){const d=n[1],f=d.data[e+8],w=Xu(f,d,t,null==r?xn(f)&&C0:r!=d&&0!=(3&f.type),i&ar.Host&&o===f);return null!==w?mp(n,d,w,f):wl}function Xu(e,n,t,r,i){const o=e.providerIndexes,d=n.data,f=1048575&o,g=e.directiveStart,w=o>>20,k=i?f+w:e.directiveEnd;for(let V=r?f:f+w;V<k;V++){const ne=d[V];if(V<g&&t===ne||V>=g&&ne.type===t)return V}if(i){const V=d[g];if(V&&Dt(V)&&V.type===t)return g}return null}function mp(e,n,t,r){let i=e[t];const o=n.data;if(function HP(e){return e instanceof Wo}(i)){const d=i;d.resolving&&function Fv(e,n){const t=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new an(-200,`Circular dependency in DI detected for ${e}${t}`)}(function Si(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Sr(e)}(o[t]));const f=Qv(d.canSeeViewProviders);d.resolving=!0;const g=d.injectImpl?zo(d.injectImpl):null;Zv(e,r,ar.Default);try{i=e[t]=d.factory(void 0,o,e,r),n.firstCreatePass&&t>=r.directiveStart&&function zP(e,n,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=n.type.prototype;if(r){const d=jC(n);(t.preOrderHooks||(t.preOrderHooks=[])).push(e,d),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e,d)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-e,i),o&&((t.preOrderHooks||(t.preOrderHooks=[])).push(e,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e,o))}(t,o[t],n)}finally{null!==g&&zo(g),Qv(f),d.resolving=!1,aS()}}return i}function dS(e,n,t){return!!(t[n+(e>>5)]&1<<e)}function D0(e,n){return!(e&ar.Self||e&ar.Host&&n)}class _u{constructor(n,t){this._tNode=n,this._lView=t}get(n,t,r){return tm(this._tNode,this._lView,n,r,t)}}function im(){return new _u(to(),pn())}function Ni(e){return Qs(()=>{const n=e.prototype.constructor,t=n[uo]||Th(n),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const o=i[uo]||Th(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Th(e){return Bn(e)?()=>{const n=Th(wr(e));return n&&n()}:Yu(e)}function fS(e){const n=e[1],t=n.type;return 2===t?n.declTNode:1===t?e[6]:null}function ms(e){return function uS(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const t=e.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const o=t[i];if(wh(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(o===n)return t[i+1];i+=2}}}return null}(to(),e)}const Ku="__parameters__";function Eh(e,n,t){return Qs(()=>{const r=function rs(e){return function(...t){if(e){const r=e(...t);for(const i in r)this[i]=r[i]}}}(n);function i(...o){if(this instanceof i)return r.apply(this,o),this;const d=new i(...o);return f.annotation=d,f;function f(g,_,w){const S=g.hasOwnProperty(Ku)?g[Ku]:Object.defineProperty(g,Ku,{value:[]})[Ku];for(;S.length<=w;)S.push(null);return(S[w]=S[w]||[]).push(d),g}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class dn{constructor(n,t){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Jt({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Rs(e,n){void 0===n&&(n=e);for(let t=0;t<e.length;t++){let r=e[t];Array.isArray(r)?(n===e&&(n=e.slice(0,t)),Rs(r,n)):n!==e&&n.push(r)}return n}function Cl(e,n){e.forEach(t=>Array.isArray(t)?Cl(t,n):n(t))}function A0(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function Jl(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function Sl(e,n){const t=[];for(let r=0;r<e;r++)t.push(n);return t}function Ls(e,n,t){let r=Ah(e,n);return r>=0?e[1|r]=t:(r=~r,function qP(e,n,t,r){let i=e.length;if(i==n)e.push(t,r);else if(1===i)e.push(r,e[0]),e[0]=t;else{for(i--,e.push(e[i-1],e[i]);i>n;)e[i]=e[i-2],i--;e[n]=t,e[n+1]=r}}(e,r,n,t)),r}function I0(e,n){const t=Ah(e,n);if(t>=0)return e[1|t]}function Ah(e,n){return function ec(e,n,t){let r=0,i=e.length>>t;for(;i!==r;){const o=r+(i-r>>1),d=e[o<<t];if(n===d)return o<<t;d>n?i=o:r=o+1}return~(i<<t)}(e,n,1)}const bp={},lm="__NG_DI_FLAG__",xp="ngTempTokenPath",_S=/\n/gm,R0="__source";let Ih;function Ph(e){const n=Ih;return Ih=e,n}function rR(e,n=ar.Default){if(void 0===Ih)throw new an(-203,!1);return null===Ih?Wu(e,void 0,n):Ih.get(e,n&ar.Optional?null:void 0,n)}function Nt(e,n=ar.Default){return(function du(){return uh}()||rR)(wr(e),n)}function Ji(e,n=ar.Default){return"number"!=typeof n&&(n=0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)),Nt(e,n)}function L0(e){const n=[];for(let t=0;t<e.length;t++){const r=wr(e[t]);if(Array.isArray(r)){if(0===r.length)throw new an(900,!1);let i,o=ar.Default;for(let d=0;d<r.length;d++){const f=r[d],g=xS(f);"number"==typeof g?-1===g?i=f.token:o|=g:i=f}n.push(Nt(i,o))}else n.push(Nt(r))}return n}function wp(e,n){return e[lm]=n,e.prototype[lm]=n,e}function xS(e){return e[lm]}const Dl=wp(Eh("Optional"),8),tc=wp(Eh("SkipSelf"),4);let N0,kh;function Nh(e){return function F0(){if(void 0===kh&&(kh=null,Oi.trustedTypes))try{kh=Oi.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return kh}()?.createHTML(e)||e}class yu{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class RS extends yu{getTypeName(){return"HTML"}}class LS extends yu{getTypeName(){return"Style"}}class H0 extends yu{getTypeName(){return"Script"}}class fR extends yu{getTypeName(){return"URL"}}class OS extends yu{getTypeName(){return"ResourceURL"}}function Os(e){return e instanceof yu?e.changingThisBreaksApplicationSecurity:e}function nc(e,n){const t=function pR(e){return e instanceof yu&&e.getTypeName()||null}(e);if(null!=t&&t!==n){if("ResourceURL"===t&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===n}class gR{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const t=(new window.DOMParser).parseFromString(Nh(n),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(n):(t.removeChild(t.firstChild),t)}catch{return null}}}class vR{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const r=this.inertDocument.createElement("body");t.appendChild(r)}}getInertBodyElement(n){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Nh(n),t;const r=this.inertDocument.createElement("body");return r.innerHTML=Nh(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(n){const t=n.attributes;for(let i=t.length-1;0<i;i--){const d=t.item(i).name;("xmlns:ns1"===d||0===d.indexOf("ns1:"))&&n.removeAttribute(d)}let r=n.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const mR=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function gm(e){return(e=String(e)).match(mR)?e:"unsafe:"+e}function Hc(e){const n={};for(const t of e.split(","))n[t]=!0;return n}function Tp(...e){const n={};for(const t of e)for(const r in t)t.hasOwnProperty(r)&&(n[r]=!0);return n}const FS=Hc("area,br,col,hr,img,wbr"),W0=Hc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),BS=Hc("rp,rt"),vm=Tp(FS,Tp(W0,Hc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Tp(BS,Hc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Tp(BS,W0)),j0=Hc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),zS=Tp(j0,Hc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Hc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),HS=Hc("script,style,template");class Z0{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let t=n.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(n){const t=n.nodeName.toLowerCase();if(!vm.hasOwnProperty(t))return this.sanitizedSomething=!0,!HS.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=n.attributes;for(let i=0;i<r.length;i++){const o=r.item(i),d=o.name,f=d.toLowerCase();if(!zS.hasOwnProperty(f)){this.sanitizedSomething=!0;continue}let g=o.value;j0[f]&&(g=gm(g)),this.buf.push(" ",d,'="',US(g),'"')}return this.buf.push(">"),!0}endElement(n){const t=n.nodeName.toLowerCase();vm.hasOwnProperty(t)&&!FS.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(n){this.buf.push(US(n))}checkClobberedElement(n,t){if(t&&(n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return t}}const yR=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,bR=/([^\#-~ |!])/g;function US(e){return e.replace(/&/g,"&amp;").replace(yR,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(bR,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let mm;function GS(e,n){let t=null;try{mm=mm||function NS(e){const n=new vR(e);return function Mp(){try{return!!(new window.DOMParser).parseFromString(Nh(""),"text/html")}catch{return!1}}()?new gR(n):n}(e);let r=n?String(n):"";t=mm.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=mm.getInertBodyElement(r)}while(r!==o);return Nh((new Z0).sanitizeChildren(Y0(t)||t))}finally{if(t){const r=Y0(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function Y0(e){return"content"in e&&function WS(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Ai=(()=>((Ai=Ai||{})[Ai.NONE=0]="NONE",Ai[Ai.HTML=1]="HTML",Ai[Ai.STYLE=2]="STYLE",Ai[Ai.SCRIPT=3]="SCRIPT",Ai[Ai.URL=4]="URL",Ai[Ai.RESOURCE_URL=5]="RESOURCE_URL",Ai))();function Ep(e){const n=function Uc(){const e=pn();return e&&e[12]}();return n?n.sanitize(Ai.URL,e)||"":nc(e,"URL")?Os(e):gm(Sr(e))}const K0=new dn("ENVIRONMENT_INITIALIZER"),XS=new dn("INJECTOR",-1),$S=new dn("INJECTOR_DEF_TYPES");class Fh{get(n,t=bp){if(t===bp){const r=new Error(`NullInjectorError: No provider for ${Fn(n)}!`);throw r.name="NullInjectorError",r}return t}}function SR(...e){return{\u0275providers:Ap(0,e)}}function Ap(e,...n){const t=[],r=new Set;let i;return Cl(n,o=>{const d=o;Q0(d,t,[],r)&&(i||(i=[]),i.push(d))}),void 0!==i&&_m(i,t),t}function _m(e,n){for(let t=0;t<e.length;t++){const{providers:i}=e[t];Cl(i,o=>{n.push(o)})}}function Q0(e,n,t,r){if(!(e=wr(e)))return!1;let i=null,o=rp(e);const d=!o&&hi(e);if(o||d){if(d&&!d.standalone)return!1;i=e}else{const g=e.ngModule;if(o=rp(g),!o)return!1;i=g}const f=r.has(i);if(d){if(f)return!1;if(r.add(i),d.dependencies){const g="function"==typeof d.dependencies?d.dependencies():d.dependencies;for(const _ of g)Q0(_,n,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!f){let _;r.add(i);try{Cl(o.imports,w=>{Q0(w,n,t,r)&&(_||(_=[]),_.push(w))})}finally{}void 0!==_&&_m(_,n)}if(!f){const _=Yu(i)||(()=>new i);n.push({provide:i,useFactory:_,deps:ti},{provide:$S,useValue:i,multi:!0},{provide:K0,useValue:()=>Nt(i),multi:!0})}const g=o.providers;null==g||f||Cl(g,w=>{n.push(w)})}}return i!==e&&void 0!==e.providers}const q0=on({provide:String,useValue:on});function Bh(e){return null!==e&&"object"==typeof e&&q0 in e}function Ml(e){return"function"==typeof e}const Ip=new dn("Set Injector scope."),zh={},KS={};let eb;function id(){return void 0===eb&&(eb=new Fh),eb}class sa{}class QS extends sa{constructor(n,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,rb(n,d=>this.processProvider(d)),this.records.set(XS,ad(void 0,this)),i.has("environment")&&this.records.set(sa,ad(void 0,this));const o=this.records.get(Ip);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get($S.multi,ti,ar.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();for(const n of this._onDestroyHooks)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(n){this._onDestroyHooks.push(n)}runInContext(n){this.assertNotDestroyed();const t=Ph(this),r=zo(void 0);try{return n()}finally{Ph(t),zo(r)}}get(n,t=bp,r=ar.Default){this.assertNotDestroyed();const i=Ph(this),o=zo(void 0);try{if(!(r&ar.SkipSelf)){let f=this.records.get(n);if(void 0===f){const g=function TR(e){return"function"==typeof e||"object"==typeof e&&e instanceof dn}(n)&&Ba(n);f=g&&this.injectableDefInScope(g)?ad(ym(n),zh):null,this.records.set(n,f)}if(null!=f)return this.hydrate(n,f)}return(r&ar.Self?id():this.parent).get(n,t=r&ar.Optional&&t===bp?null:t)}catch(d){if("NullInjectorError"===d.name){if((d[xp]=d[xp]||[]).unshift(Fn(n)),i)throw d;return function iR(e,n,t,r){const i=e[xp];throw n[R0]&&i.unshift(n[R0]),e.message=function wS(e,n,t,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=Fn(n);if(Array.isArray(n))i=n.map(Fn).join(" -> ");else if("object"==typeof n){let o=[];for(let d in n)if(n.hasOwnProperty(d)){let f=n[d];o.push(d+":"+("string"==typeof f?JSON.stringify(f):Fn(f)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${e.replace(_S,"\n  ")}`}("\n"+e.message,i,t,r),e.ngTokenPath=i,e[xp]=null,e}(d,n,"R3InjectorError",this.source)}throw d}finally{zo(o),Ph(i)}}resolveInjectorInitializers(){const n=Ph(this),t=zo(void 0);try{const r=this.get(K0.multi,ti,ar.Self);for(const i of r)i()}finally{Ph(n),zo(t)}}toString(){const n=[],t=this.records;for(const r of t.keys())n.push(Fn(r));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new an(205,!1)}processProvider(n){let t=Ml(n=wr(n))?n:wr(n&&n.provide);const r=function qS(e){return Bh(e)?ad(void 0,e.useValue):ad(JS(e),zh)}(n);if(Ml(n)||!0!==n.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=ad(void 0,zh,!0),i.factory=()=>L0(i.multi),this.records.set(t,i)),t=n,i.multi.push(n)}this.records.set(t,r)}hydrate(n,t){return t.value===zh&&(t.value=KS,t.value=t.factory()),"object"==typeof t.value&&t.value&&function tb(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(n){if(!n.providedIn)return!1;const t=wr(n.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function ym(e){const n=Ba(e),t=null!==n?n.factory:Yu(e);if(null!==t)return t;if(e instanceof dn)throw new an(204,!1);if(e instanceof Function)return function DR(e){const n=e.length;if(n>0)throw Sl(n,"?"),new an(204,!1);const t=function bl(e){const n=e&&(e[Uu]||e[ch]);if(n){const t=function Ia(e){if(e.hasOwnProperty("name"))return e.name;const n=(""+e).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),n}return null}(e);return null!==t?()=>t.factory(e):()=>new e}(e);throw new an(204,!1)}function JS(e,n,t){let r;if(Ml(e)){const i=wr(e);return Yu(i)||ym(i)}if(Bh(e))r=()=>wr(e.useValue);else if(function Vh(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...L0(e.deps||[]));else if(function J0(e){return!(!e||!e.useExisting)}(e))r=()=>Nt(wr(e.useExisting));else{const i=wr(e&&(e.useClass||e.provide));if(!function MR(e){return!!e.deps}(e))return Yu(i)||ym(i);r=()=>new i(...L0(e.deps))}return r}function ad(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function nb(e){return!!e.\u0275providers}function rb(e,n){for(const t of e)Array.isArray(t)?rb(t,n):nb(t)?rb(t.\u0275providers,n):n(t)}class Rp{}class AR{resolveComponentFactory(n){throw function eD(e){const n=Error(`No component factory found for ${Fn(e)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=e,n}(n)}}let od=(()=>{class e{}return e.NULL=new AR,e})();function IR(){return Hh(to(),pn())}function Hh(e,n){return new Or(Po(e,n))}let Or=(()=>{class e{constructor(t){this.nativeElement=t}}return e.__NG_ELEMENT_ID__=IR,e})();function PR(e){return e instanceof Or?e.nativeElement:e}class Lp{}let Gc=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>function RR(){const e=pn(),t=Hr(to().index,e);return(zt(t)?t:e)[11]}(),e})(),tD=(()=>{class e{}return e.\u0275prov=Jt({token:e,providedIn:"root",factory:()=>null}),e})();class sd{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const LR=new sd("14.2.4"),xm={};function cb(e){return e.ngOriginalError}class ks{constructor(){this._console=console}handleError(n){const t=this._findOriginalError(n);this._console.error("ERROR",n),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(n){let t=n&&cb(n);for(;t&&cb(t);)t=cb(t);return t||null}}const db=new Map;let zR=0;const pb="__ngContext__";function ho(e,n){zt(n)?(e[pb]=n[20],function UR(e){db.set(e[20],e)}(n)):e[pb]=n}function Em(e){return e.ownerDocument.defaultView}function Tl(e){return e instanceof Function?e():e}var ys=(()=>((ys=ys||{})[ys.Important=1]="Important",ys[ys.DashCase=2]="DashCase",ys))();function bb(e,n){return undefined(e,n)}function Fp(e){const n=e[3];return Pt(n)?n[3]:n}function wb(e){return vD(e[13])}function Cb(e){return vD(e[4])}function vD(e){for(;null!==e&&!Pt(e);)e=e[4];return e}function jh(e,n,t,r,i){if(null!=r){let o,d=!1;Pt(r)?o=r:zt(r)&&(d=!0,r=r[0]);const f=Ha(r);0===e&&null!==t?null==i?wD(n,t,f):ld(n,t,f,i||null,!0):1===e&&null!==t?ld(n,t,f,i||null,!0):2===e?function AD(e,n,t){const r=Yh(e,n);r&&function CD(e,n,t,r){e.removeChild(n,t,r)}(e,r,n,t)}(n,f,d):3===e&&n.destroyNode(f),null!=o&&function Pb(e,n,t,r,i){const o=t[7];o!==Ha(t)&&jh(n,e,r,o,i);for(let f=10;f<t.length;f++){const g=t[f];Bp(g[1],g,e,n,r,o)}}(n,e,o,t,i)}}function Sb(e,n,t){return e.createElement(n,t)}function _D(e,n){const t=e[9],r=t.indexOf(n),i=n[3];512&n[2]&&(n[2]&=-513,Is(i,-1)),t.splice(r,1)}function Db(e,n){if(e.length<=10)return;const t=10+n,r=e[t];if(r){const i=r[17];null!==i&&i!==e&&_D(i,r),n>0&&(e[t-1][4]=r[4]);const o=Jl(e,10+n);!function JR(e,n){Bp(e,n,n[11],2,null,null),n[0]=null,n[6]=null}(r[1],r);const d=o[19];null!==d&&d.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function yD(e,n){if(!(128&n[2])){const t=n[11];t.destroyNode&&Bp(e,n,t,3,null,null),function nL(e){let n=e[13];if(!n)return Mb(e[1],e);for(;n;){let t=null;if(zt(n))t=n[13];else{const r=n[10];r&&(t=r)}if(!t){for(;n&&!n[4]&&n!==e;)zt(n)&&Mb(n[1],n),n=n[3];null===n&&(n=e),zt(n)&&Mb(n[1],n),t=n&&n[4]}n=t}}(n)}}function Mb(e,n){if(!(128&n[2])){n[2]&=-65,n[2]|=128,function oL(e,n){let t;if(null!=e&&null!=(t=e.destroyHooks))for(let r=0;r<t.length;r+=2){const i=n[t[r]];if(!(i instanceof Wo)){const o=t[r+1];if(Array.isArray(o))for(let d=0;d<o.length;d+=2){const f=i[o[d]],g=o[d+1];try{g.call(f)}finally{}}else try{o.call(i)}finally{}}}}(e,n),function aL(e,n){const t=e.cleanup,r=n[7];let i=-1;if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const d=t[o+1],f="function"==typeof d?d(n):Ha(n[d]),g=r[i=t[o+2]],_=t[o+3];"boolean"==typeof _?f.removeEventListener(t[o],g,_):_>=0?r[i=_]():r[i=-_].unsubscribe(),o+=2}else{const d=r[i=t[o+1]];t[o].call(d)}if(null!==r){for(let o=i+1;o<r.length;o++)(0,r[o])();n[7]=null}}(e,n),1===n[1].type&&n[11].destroy();const t=n[17];if(null!==t&&Pt(n[3])){t!==n[3]&&_D(t,n);const r=n[19];null!==r&&r.detachView(e)}!function fb(e){db.delete(e[20])}(n)}}function bD(e,n,t){return function xD(e,n,t){let r=n;for(;null!==r&&40&r.type;)r=(n=r).parent;if(null===r)return t[0];if(2&r.flags){const i=e.data[r.directiveStart].encapsulation;if(i===Ja.None||i===Ja.Emulated)return null}return Po(r,t)}(e,n.parent,t)}function ld(e,n,t,r,i){e.insertBefore(n,t,r,i)}function wD(e,n,t){e.appendChild(n,t)}function Tb(e,n,t,r,i){null!==r?ld(e,n,t,r,i):wD(e,n,t)}function Yh(e,n){return e.parentNode(n)}function SD(e,n,t){return MD(e,n,t)}let MD=function DD(e,n,t){return 40&e.type?Po(e,t):null};function Im(e,n,t,r){const i=bD(e,r,n),o=n[11],f=SD(r.parent||n[6],r,n);if(null!=i)if(Array.isArray(t))for(let g=0;g<t.length;g++)Tb(o,i,t[g],f,!1);else Tb(o,i,t,f,!1)}function Pm(e,n){if(null!==n){const t=n.type;if(3&t)return Po(n,e);if(4&t)return Ab(-1,e[n.index]);if(8&t){const r=n.child;if(null!==r)return Pm(e,r);{const i=e[n.index];return Pt(i)?Ab(-1,i):Ha(i)}}if(32&t)return bb(n,e)()||Ha(e[n.index]);{const r=ED(e,n);return null!==r?Array.isArray(r)?r[0]:Pm(Fp(e[16]),r):Pm(e,n.next)}}return null}function ED(e,n){return null!==n?e[16][6].projection[n.projection]:null}function Ab(e,n){const t=10+e+1;if(t<n.length){const r=n[t],i=r[1].firstChild;if(null!==i)return Pm(r,i)}return n[7]}function Ib(e,n,t,r,i,o,d){for(;null!=t;){const f=r[t.index],g=t.type;if(d&&0===n&&(f&&ho(Ha(f),r),t.flags|=4),64!=(64&t.flags))if(8&g)Ib(e,n,t.child,r,i,o,!1),jh(n,e,i,f,o);else if(32&g){const _=bb(t,r);let w;for(;w=_();)jh(n,e,i,w,o);jh(n,e,i,f,o)}else 16&g?ID(e,n,r,t,i,o):jh(n,e,i,f,o);t=d?t.projectionNext:t.next}}function Bp(e,n,t,r,i,o){Ib(t,r,e.firstChild,n,i,o,!1)}function ID(e,n,t,r,i,o){const d=t[16],g=d[6].projection[r.projection];if(Array.isArray(g))for(let _=0;_<g.length;_++)jh(n,e,i,g[_],o);else Ib(e,n,g,d[3],i,o,!0)}function PD(e,n,t){e.setAttribute(n,"style",t)}function Rb(e,n,t){""===t?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}function RD(e,n,t){let r=e.length;for(;;){const i=e.indexOf(n,t);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const o=n.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}t=i+1}}const xu="ng-template";function Lb(e,n,t){let r=0;for(;r<e.length;){let i=e[r++];if(t&&"class"===i){if(i=e[r],-1!==RD(i.toLowerCase(),n,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===n)return!0;return!1}}return!1}function cd(e){return 4===e.type&&e.value!==xu}function Ob(e,n,t){return n===(4!==e.type||t?e.value:xu)}function LD(e,n,t){let r=4;const i=e.attrs||[],o=function dL(e){for(let n=0;n<e.length;n++)if(wh(e[n]))return n;return e.length}(i);let d=!1;for(let f=0;f<n.length;f++){const g=n[f];if("number"!=typeof g){if(!d)if(4&r){if(r=2|1&r,""!==g&&!Ob(e,g,t)||""===g&&1===n.length){if(tl(r))return!1;d=!0}}else{const _=8&r?g:n[++f];if(8&r&&null!==e.attrs){if(!Lb(e.attrs,_,t)){if(tl(r))return!1;d=!0}continue}const S=OD(8&r?"class":g,i,cd(e),t);if(-1===S){if(tl(r))return!1;d=!0;continue}if(""!==_){let k;k=S>o?"":i[S+1].toLowerCase();const V=8&r?k:null;if(V&&-1!==RD(V,_,0)||2&r&&_!==k){if(tl(r))return!1;d=!0}}}}else{if(!d&&!tl(r)&&!tl(g))return!1;if(d&&tl(g))continue;d=!1,r=g|1&r}}return tl(r)||d}function tl(e){return 0==(1&e)}function OD(e,n,t,r){if(null===n)return-1;let i=0;if(r||!t){let o=!1;for(;i<n.length;){const d=n[i];if(d===e)return i;if(3===d||6===d)o=!0;else{if(1===d||2===d){let f=n[++i];for(;"string"==typeof f;)f=n[++i];continue}if(4===d)break;if(0===d){i+=4;continue}}i+=o?1:2}return-1}return function hL(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){const r=e[t];if("number"==typeof r)return-1;if(r===n)return t;t++}return-1}(n,e)}function kD(e,n,t=!1){for(let r=0;r<n.length;r++)if(LD(e,n[r],t))return!0;return!1}function Rm(e,n){e:for(let t=0;t<n.length;t++){const r=n[t];if(e.length===r.length){for(let i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function FD(e,n){return e?":not("+n.trim()+")":n}function fL(e){let n=e[0],t=1,r=2,i="",o=!1;for(;t<e.length;){let d=e[t];if("string"==typeof d)if(2&r){const f=e[++t];i+="["+d+(f.length>0?'="'+f+'"':"")+"]"}else 8&r?i+="."+d:4&r&&(i+=" "+d);else""!==i&&!tl(d)&&(n+=FD(o,i),i=""),r=d,o=o||!tl(r);t++}return""!==i&&(n+=FD(o,i)),n}const Wr={};function xt(e){kb(yi(),pn(),Go()+e,!1)}function kb(e,n,t,r){if(!r)if(3==(3&n[2])){const o=e.preOrderCheckHooks;null!==o&&hp(n,o,t)}else{const o=e.preOrderHooks;null!==o&&Xv(n,o,0,t)}vu(t)}function VD(e,n=null,t=null,r){const i=zD(e,n,t,r);return i.resolveInjectorInitializers(),i}function zD(e,n=null,t=null,r,i=new Set){const o=[t||ti,SR(e)];return r=r||("object"==typeof e?void 0:Fn(e)),new QS(o,n||id(),r||null,i)}let Ga=(()=>{class e{static create(t,r){if(Array.isArray(t))return VD({name:""},r,t,"");{const i=t.name??"";return VD({name:i},t.parent,t.providers,i)}}}return e.THROW_IF_NOT_FOUND=bp,e.NULL=new Fh,e.\u0275prov=Jt({token:e,providedIn:"any",factory:()=>Nt(XS)}),e.__NG_ELEMENT_ID__=-1,e})();function qe(e,n=ar.Default){const t=pn();return null===t?Nt(e,n):tm(to(),t,wr(e),n)}function El(){throw new Error("invalid")}function Up(e,n){return e<<17|n<<2}function Al(e){return e>>17&32767}function Wp(e){return 2|e}function rc(e){return(131068&e)>>2}function Nm(e,n){return-131069&e|n<<2}function jp(e){return 1|e}function aM(e,n){const t=e.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],o=t[r+1];if(-1!==o){const d=e.data[o];up(i),d.contentQueries(2,n[o],o)}}}function Zp(e,n,t,r,i,o,d,f,g,_,w){const S=n.blueprint.slice();return S[0]=i,S[2]=76|r,(null!==w||e&&1024&e[2])&&(S[2]|=1024),QC(S),S[3]=S[15]=e,S[8]=t,S[10]=d||e&&e[10],S[11]=f||e&&e[11],S[12]=g||e&&e[12]||null,S[9]=_||e&&e[9]||null,S[6]=o,S[20]=function HR(){return zR++}(),S[21]=w,S[16]=2==n.type?e[16]:S,S}function Xh(e,n,t,r,i){let o=e.data[n];if(null===o)o=function ex(e,n,t,r,i){const o=rS(),d=Kl(),g=e.data[n]=function ax(e,n,t,r,i,o){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,d?o:o&&o.parent,t,n,r,i);return null===e.firstChild&&(e.firstChild=g),null!==o&&(d?null==o.child&&null!==g.parent&&(o.child=g):null===o.next&&(o.next=g)),g}(e,n,t,r,i),function OP(){return Br.lFrame.inI18n}()&&(o.flags|=64);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const d=function no(){const e=Br.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();o.injectorIndex=null===d?-1:d.injectorIndex}return ki(o,!0),o}function $h(e,n,t,r){if(0===t)return-1;const i=n.length;for(let o=0;o<t;o++)n.push(r),e.blueprint.push(r),e.data.push(null);return i}function tx(e,n,t){p0(n);try{const r=e.viewQuery;null!==r&&dx(1,r,t);const i=e.template;null!==i&&nx(e,n,i,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&aM(e,n),e.staticViewQueries&&dx(2,e.viewQuery,t);const o=e.components;null!==o&&function oM(e,n){for(let t=0;t<n.length;t++)KL(e,n[t])}(n,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{n[2]&=-5,zc()}}function Yp(e,n,t,r){const i=n[2];if(128!=(128&i)){p0(n);try{QC(n),function d0(e){return Br.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==t&&nx(e,n,t,2,r);const d=3==(3&i);if(d){const _=e.preOrderCheckHooks;null!==_&&hp(n,_,null)}else{const _=e.preOrderHooks;null!==_&&Xv(n,_,0,null),_0(n,0)}if(function XL(e){for(let n=wb(e);null!==n;n=Cb(n)){if(!n[2])continue;const t=n[9];for(let r=0;r<t.length;r++){const i=t[r],o=i[3];0==(512&i[2])&&Is(o,1),i[2]|=512}}}(n),function YL(e){for(let n=wb(e);null!==n;n=Cb(n))for(let t=10;t<n.length;t++){const r=n[t],i=r[1];mh(r)&&Yp(i,r,i.template,r[8])}}(n),null!==e.contentQueries&&aM(e,n),d){const _=e.contentCheckHooks;null!==_&&hp(n,_)}else{const _=e.contentHooks;null!==_&&Xv(n,_,1),_0(n,1)}!function kL(e,n){const t=e.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)vu(~i);else{const o=i,d=t[++r],f=t[++r];kP(d,o),f(2,n[o])}}}finally{vu(-1)}}(e,n);const f=e.components;null!==f&&function Jb(e,n){for(let t=0;t<n.length;t++)$L(e,n[t])}(n,f);const g=e.viewQuery;if(null!==g&&dx(2,g,r),d){const _=e.viewCheckHooks;null!==_&&hp(n,_)}else{const _=e.viewHooks;null!==_&&Xv(n,_,2),_0(n,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[2]&=-41,512&n[2]&&(n[2]&=-513,Is(n[3],-1))}finally{zc()}}}function nx(e,n,t,r,i){const o=Go(),d=2&r;try{vu(-1),d&&n.length>22&&kb(e,n,22,!1),t(r,i)}finally{vu(o)}}function sM(e,n,t){if(tn(n)){const i=n.directiveEnd;for(let o=n.directiveStart;o<i;o++){const d=e.data[o];d.contentQueries&&d.contentQueries(1,t[o],o)}}}function rx(e,n,t){!cp()||(function ox(e,n,t,r){const i=t.directiveStart,o=t.directiveEnd;e.firstCreatePass||pp(t,n),ho(r,n);const d=t.initialInputs;for(let f=i;f<o;f++){const g=e.data[f],_=Dt(g);_&&WL(n,t,g);const w=mp(n,e,f,t);ho(w,n),null!==d&&jL(0,f-i,w,g,0,d),_&&(Hr(t.index,n)[8]=w)}}(e,n,t,Po(t,n)),128==(128&t.flags)&&function gM(e,n,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,d=function NP(){return Br.lFrame.currentDirectiveIndex}();try{vu(o);for(let f=r;f<i;f++){const g=e.data[f],_=n[f];h0(f),(null!==g.hostBindings||0!==g.hostVars||null!==g.hostAttrs)&&zm(g,_)}}finally{vu(-1),h0(d)}}(e,n,t))}function hd(e,n,t=Po){const r=n.localNames;if(null!==r){let i=n.index+1;for(let o=0;o<r.length;o+=2){const d=r[o+1],f=-1===d?t(n,e):e[d];e[i++]=f}}}function lM(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=ix(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):n}function ix(e,n,t,r,i,o,d,f,g,_){const w=22+r,S=w+i,k=function NL(e,n){const t=[];for(let r=0;r<n;r++)t.push(r<e?null:Wr);return t}(w,S),V="function"==typeof _?_():_;return k[1]={type:e,blueprint:k,template:t,queries:null,viewQuery:f,declTNode:n,data:k.slice().fill(null,w),bindingStartIndex:w,expandoStartIndex:S,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof d?d():d,firstChild:null,schemas:g,consts:V,incompleteFirstPass:!1}}function la(e,n,t,r){const i=hx(n);null===t?i.push(r):(i.push(t),e.firstCreatePass&&_M(e).push(r,i.length-1))}function cM(e,n,t){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(n,i):t[r]=[n,i]}return t}function uM(e,n){const r=n.directiveEnd,i=e.data,o=n.attrs,d=[];let f=null,g=null;for(let _=n.directiveStart;_<r;_++){const w=i[_],S=w.inputs,k=null===o||cd(n)?null:ZL(S,o);d.push(k),f=cM(S,_,f),g=cM(w.outputs,_,g)}null!==f&&(f.hasOwnProperty("class")&&(n.flags|=16),f.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=d,n.inputs=f,n.outputs=g}function Ns(e,n,t,r,i,o,d,f){const g=Po(n,t);let w,_=n.inputs;!f&&null!=_&&(w=_[r])?(px(e,t,w,r,i),xn(n)&&dM(t,n.index)):3&n.type&&(r=function BL(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=d?d(i,n.value||"",r):i,o.setProperty(g,r,i))}function dM(e,n){const t=Hr(n,e);16&t[2]||(t[2]|=32)}function Xp(e,n,t,r){let i=!1;if(cp()){const o=function HL(e,n,t){const r=e.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const d=r[o];kD(t,d.selectors,!1)&&(i||(i=[]),Dh(pp(t,n),e,d.type),Dt(d)?(sx(e,t),i.unshift(d)):i.push(d))}return i}(e,n,t),d=null===r?null:{"":-1};if(null!==o){i=!0,vM(t,e.data.length,o.length);for(let w=0;w<o.length;w++){const S=o[w];S.providersResolver&&S.providersResolver(S)}let f=!1,g=!1,_=$h(e,n,o.length,null);for(let w=0;w<o.length;w++){const S=o[w];t.mergedAttrs=Kv(t.mergedAttrs,S.hostAttrs),mM(e,t,n,_,S),GL(_,S,d),null!==S.contentQueries&&(t.flags|=8),(null!==S.hostBindings||null!==S.hostAttrs||0!==S.hostVars)&&(t.flags|=128);const k=S.type.prototype;!f&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(t.index),f=!0),!g&&(k.ngOnChanges||k.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t.index),g=!0),_++}uM(e,t)}d&&function UL(e,n,t){if(n){const r=e.localNames=[];for(let i=0;i<n.length;i+=2){const o=t[n[i+1]];if(null==o)throw new an(-301,!1);r.push(n[i],o)}}}(t,r,d)}return t.mergedAttrs=Kv(t.mergedAttrs,t.attrs),i}function pM(e,n,t,r,i,o){const d=o.hostBindings;if(d){let f=e.hostBindingOpCodes;null===f&&(f=e.hostBindingOpCodes=[]);const g=~n.index;(function zL(e){let n=e.length;for(;n>0;){const t=e[--n];if("number"==typeof t&&t<0)return t}return 0})(f)!=g&&f.push(g),f.push(r,i,d)}}function zm(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function sx(e,n){n.flags|=2,(e.components||(e.components=[])).push(n.index)}function GL(e,n,t){if(t){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)t[n.exportAs[r]]=e;Dt(n)&&(t[""]=e)}}function vM(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}function mM(e,n,t,r,i){e.data[r]=i;const o=i.factory||(i.factory=Yu(i.type)),d=new Wo(o,Dt(i),qe);e.blueprint[r]=d,t[r]=d,pM(e,n,0,r,$h(e,t,i.hostVars,Wr),i)}function WL(e,n,t){const r=Po(n,e),i=lM(t),o=e[10],d=Um(e,Zp(e,i,null,t.onPush?32:16,r,n,o,o.createRenderer(r,t),null,null,null));e[n.index]=d}function oc(e,n,t,r,i,o){const d=Po(e,n);!function lx(e,n,t,r,i,o,d){if(null==o)e.removeAttribute(n,i,t);else{const f=null==d?Sr(o):d(o,r||"",i);e.setAttribute(n,i,f,t)}}(n[11],d,o,e.value,t,r,i)}function jL(e,n,t,r,i,o){const d=o[n];if(null!==d){const f=r.setInput;for(let g=0;g<d.length;){const _=d[g++],w=d[g++],S=d[g++];null!==f?r.setInput(t,S,_,w):t[w]=S}}}function ZL(e,n){let t=null,r=0;for(;r<n.length;){const i=n[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===t&&(t=[]),t.push(i,e[i],n[r+1])),r+=2}else r+=2;else r+=4}return t}function cx(e,n,t,r){return new Array(e,!0,!1,n,null,0,r,t,null,null)}function $L(e,n){const t=Hr(n,e);if(mh(t)){const r=t[1];48&t[2]?Yp(r,t,r.template,t[8]):t[5]>0&&Hm(t)}}function Hm(e){for(let r=wb(e);null!==r;r=Cb(r))for(let i=10;i<r.length;i++){const o=r[i];if(mh(o))if(512&o[2]){const d=o[1];Yp(d,o,d.template,o[8])}else o[5]>0&&Hm(o)}const t=e[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=Hr(t[r],e);mh(i)&&i[5]>0&&Hm(i)}}function KL(e,n){const t=Hr(n,e),r=t[1];(function QL(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])})(r,t),tx(r,t,t[8])}function Um(e,n){return e[13]?e[14][4]=n:e[13]=n,e[14]=n,n}function ux(e){for(;e;){e[2]|=32;const n=Fp(e);if(bt(e)&&!n)return e;e=n}return null}function Gm(e,n,t,r=!0){const i=n[10];i.begin&&i.begin();try{Yp(e,n,e.template,t)}catch(d){throw r&&yM(n,d),d}finally{i.end&&i.end()}}function dx(e,n,t){up(0),n(e,t)}function hx(e){return e[7]||(e[7]=[])}function _M(e){return e.cleanup||(e.cleanup=[])}function fx(e,n,t){return(null===e||Dt(e))&&(t=function XC(e){for(;Array.isArray(e);){if("object"==typeof e[1])return e;e=e[0]}return null}(t[n.index])),t[11]}function yM(e,n){const t=e[9],r=t?t.get(ks,null):null;r&&r.handleError(n)}function px(e,n,t,r,i){for(let o=0;o<t.length;){const d=t[o++],f=t[o++],g=n[d],_=e.data[d];null!==_.setInput?_.setInput(g,i,r,f):g[f]=i}}function sc(e,n,t){const r=jv(n,e);!function mD(e,n,t){e.setValue(n,t)}(e[11],r,t)}function Wm(e,n,t){let r=t?e.styles:null,i=t?e.classes:null,o=0;if(null!==n)for(let d=0;d<n.length;d++){const f=n[d];"number"==typeof f?o=f:1==o?i=bn(i,f):2==o&&(r=bn(r,f+": "+n[++d]+";"))}t?e.styles=r:e.stylesWithoutHost=r,t?e.classes=i:e.classesWithoutHost=i}function jm(e,n,t,r,i=!1){for(;null!==t;){const o=n[t.index];if(null!==o&&r.push(Ha(o)),Pt(o))for(let f=10;f<o.length;f++){const g=o[f],_=g[1].firstChild;null!==_&&jm(g[1],g,_,r)}const d=t.type;if(8&d)jm(e,n,t.child,r);else if(32&d){const f=bb(t,n);let g;for(;g=f();)r.push(g)}else if(16&d){const f=ED(n,t);if(Array.isArray(f))r.push(...f);else{const g=Fp(n[16]);jm(g[1],g,f,r,!0)}}t=i?t.projectionNext:t.next}return r}class $p{constructor(n,t){this._lView=n,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,t=n[1];return jm(t,n,t.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(Pt(n)){const t=n[8],r=t?t.indexOf(this):-1;r>-1&&(Db(n,r),Jl(t,r))}this._attachedToViewContainer=!1}yD(this._lView[1],this._lView)}onDestroy(n){la(this._lView[1],this._lView,null,n)}markForCheck(){ux(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Gm(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new an(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function tL(e,n){Bp(e,n,n[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new an(902,!1);this._appRef=n}}class qL extends $p{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;Gm(n[1],n,n[8],!1)}checkNoChanges(){}get context(){return null}}class gx extends od{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const t=hi(n);return new Kp(t,this.ngModule)}}function bM(e){const n=[];for(let t in e)e.hasOwnProperty(t)&&n.push({propName:e[t],templateName:t});return n}class JL{constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,r){const i=this.injector.get(n,xm,r);return i!==xm||t===xm?i:this.parentInjector.get(n,t,r)}}class Kp extends Rp{constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=function pL(e){return e.map(fL).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return bM(this.componentDef.inputs)}get outputs(){return bM(this.componentDef.outputs)}create(n,t,r,i){let o=(i=i||this.ngModule)instanceof sa?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const d=o?new JL(n,o):n,f=d.get(Lp,null);if(null===f)throw new an(407,!1);const g=d.get(tD,null),_=f.createRenderer(null,this.componentDef),w=this.componentDef.selectors[0][0]||"div",S=r?function FL(e,n,t){return e.selectRootElement(n,t===Ja.ShadowDom)}(_,r,this.componentDef.encapsulation):Sb(f.createRenderer(null,this.componentDef),w,function xM(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(w)),k=this.componentDef.onPush?288:272,V=ix(0,null,null,1,0,null,null,null,null,null),ne=Zp(null,V,null,k,null,null,f,_,g,d,null);let pe,De;p0(ne);try{const Re=function tO(e,n,t,r,i,o){const d=t[1];t[22]=e;const g=Xh(d,22,2,"#host",null),_=g.mergedAttrs=n.hostAttrs;null!==_&&(Wm(g,_,!0),null!==e&&($v(i,e,_),null!==g.classes&&Rb(i,e,g.classes),null!==g.styles&&PD(i,e,g.styles)));const w=r.createRenderer(e,n),S=Zp(t,lM(n),null,n.onPush?32:16,t[22],g,r,w,o||null,null,null);return d.firstCreatePass&&(Dh(pp(g,t),d,n.type),sx(d,g),vM(g,t.length,1)),Um(t,S),t[22]=S}(S,this.componentDef,ne,f,_);if(S)if(r)$v(_,S,["ng-version",LR.full]);else{const{attrs:Fe,classes:ke}=function gL(e){const n=[],t=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&n.push(o,e[++r]):8===i&&t.push(o);else{if(!tl(i))break;i=o}r++}return{attrs:n,classes:t}}(this.componentDef.selectors[0]);Fe&&$v(_,S,Fe),ke&&ke.length>0&&Rb(_,S,ke.join(" "))}if(De=wa(V,22),void 0!==t){const Fe=De.projection=[];for(let ke=0;ke<this.ngContentSelectors.length;ke++){const Be=t[ke];Fe.push(null!=Be?Array.from(Be):null)}}pe=function Zm(e,n,t,r){const i=t[1],o=function fM(e,n,t){const r=to();e.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),mM(e,r,n,$h(e,n,1,null),t),uM(e,r));const i=mp(n,e,r.directiveStart,r);ho(i,n);const o=Po(r,n);return o&&ho(o,n),i}(i,t,n);if(e[8]=t[8]=o,null!==r)for(const f of r)f(o,n);if(n.contentQueries){const f=to();n.contentQueries(1,o,f.directiveStart)}const d=to();return!i.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(vu(d.index),pM(t[1],d,0,d.directiveStart,d.directiveEnd,n),zm(n,o)),o}(Re,this.componentDef,ne,[nO]),tx(V,ne,null)}finally{zc()}return new wM(this.componentType,pe,Hh(De,ne),ne,De)}}class wM extends class Pp{}{constructor(n,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new qL(i),this.componentType=n}setInput(n,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[n])){const o=this._rootLView;px(o[1],o,i,n,t),dM(o,this._tNode.index)}}get injector(){return new _u(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function nO(){const e=to();dp(pn()[1],e)}function Gn(e){let n=function CM(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),t=!0;const r=[e];for(;n;){let i;if(Dt(e))i=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new an(903,!1);i=n.\u0275dir}if(i){if(t){r.push(i);const d=e;d.inputs=vx(e.inputs),d.declaredInputs=vx(e.declaredInputs),d.outputs=vx(e.outputs);const f=i.hostBindings;f&&oO(e,f);const g=i.viewQuery,_=i.contentQueries;if(g&&iO(e,g),_&&aO(e,_),Un(e.inputs,i.inputs),Un(e.declaredInputs,i.declaredInputs),Un(e.outputs,i.outputs),Dt(i)&&i.data.animation){const w=e.data;w.animation=(w.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let d=0;d<o.length;d++){const f=o[d];f&&f.ngInherit&&f(e),f===Gn&&(t=!1)}}n=Object.getPrototypeOf(n)}!function rO(e){let n=0,t=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=n+=i.hostVars,i.hostAttrs=Kv(i.hostAttrs,t=Kv(t,i.hostAttrs))}}(r)}function vx(e){return e===qs?{}:e===ti?[]:e}function iO(e,n){const t=e.viewQuery;e.viewQuery=t?(r,i)=>{n(r,i),t(r,i)}:n}function aO(e,n){const t=e.contentQueries;e.contentQueries=t?(r,i,o)=>{n(r,i,o),t(r,i,o)}:n}function oO(e,n){const t=e.hostBindings;e.hostBindings=t?(r,i)=>{n(r,i),t(r,i)}:n}let Ym=null;function fd(){if(!Ym){const e=Oi.Symbol;if(e&&e.iterator)Ym=e.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<n.length;++t){const r=n[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Ym=r)}}}return Ym}function Qp(e){return!!_x(e)&&(Array.isArray(e)||!(e instanceof Map)&&fd()in e)}function _x(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function lc(e,n,t){return e[n]=t}function jo(e,n,t){return!Object.is(e[n],t)&&(e[n]=t,!0)}function gd(e,n,t,r){const i=jo(e,n,t);return jo(e,n+1,r)||i}function Pr(e,n,t,r){const i=pn();return jo(i,yh(),n)&&(yi(),oc(Ca(),i,e,n,t,r)),Pr}function md(e,n,t,r){return jo(e,yh(),t)?n+Sr(t)+r:Wr}function yd(e,n,t,r,i,o,d,f){const _=function Xm(e,n,t,r,i){const o=gd(e,n,t,r);return jo(e,n+2,i)||o}(e,Ql(),t,i,d);return Vc(3),_?n+Sr(t)+r+Sr(i)+o+Sr(d)+f:Wr}function ir(e,n,t,r,i,o,d,f){const g=pn(),_=yi(),w=e+22,S=_.firstCreatePass?function uO(e,n,t,r,i,o,d,f,g){const _=n.consts,w=Xh(n,e,4,d||null,gu(_,f));Xp(n,t,w,gu(_,g)),dp(n,w);const S=w.tViews=ix(2,w,r,i,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,_);return null!==n.queries&&(n.queries.template(n,w),S.queries=n.queries.embeddedTView(w)),w}(w,_,g,n,t,r,i,o,d):_.data[w];ki(S,!1);const k=g[11].createComment("");Im(_,g,k,S),ho(k,g),Um(g,g[w]=cx(k,g,k,S)),ut(S)&&rx(_,g,S),null!=d&&hd(g,S,f)}function li(e){return function vh(e,n){return e[n]}(function LP(){return Br.lFrame.contextLView}(),22+e)}function _t(e,n,t){const r=pn();return jo(r,yh(),n)&&Ns(yi(),Ca(),r,e,n,r[11],t,!1),_t}function Sx(e,n,t,r,i){const d=i?"class":"style";px(e,t,n.inputs[d],d,r)}function je(e,n,t,r){const i=pn(),o=yi(),d=22+e,f=i[11],g=i[d]=Sb(f,n,function x5(){return Br.lFrame.currentNamespace}()),_=o.firstCreatePass?function PM(e,n,t,r,i,o,d){const f=n.consts,_=Xh(n,e,2,i,gu(f,o));return Xp(n,t,_,gu(f,d)),null!==_.attrs&&Wm(_,_.attrs,!1),null!==_.mergedAttrs&&Wm(_,_.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,_),_}(d,o,i,0,n,t,r):o.data[d];ki(_,!0);const w=_.mergedAttrs;null!==w&&$v(f,g,w);const S=_.classes;null!==S&&Rb(f,g,S);const k=_.styles;return null!==k&&PD(f,g,k),64!=(64&_.flags)&&Im(o,i,g,_),0===function eS(){return Br.lFrame.elementDepthCount}()&&ho(g,i),function tS(){Br.lFrame.elementDepthCount++}(),ut(_)&&(rx(o,i,_),sM(o,_,i)),null!==r&&hd(i,_),je}function Ke(){let e=to();Kl()?Bc():(e=e.parent,ki(e,!1));const n=e;!function _h(){Br.lFrame.elementDepthCount--}();const t=yi();return t.firstCreatePass&&(dp(t,e),tn(e)&&t.queries.elementEnd(e)),null!=n.classesWithoutHost&&function GP(e){return 0!=(16&e.flags)}(n)&&Sx(t,n,pn(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function fp(e){return 0!=(32&e.flags)}(n)&&Sx(t,n,pn(),n.stylesWithoutHost,!1),Ke}function yn(e,n,t,r){return je(e,n,t,r),Ke(),yn}function ci(e,n,t){const r=pn(),i=yi(),o=e+22,d=i.firstCreatePass?function dO(e,n,t,r,i){const o=n.consts,d=gu(o,r),f=Xh(n,e,8,"ng-container",d);return null!==d&&Wm(f,d,!0),Xp(n,t,f,gu(o,i)),null!==n.queries&&n.queries.elementStart(n,f),f}(o,i,r,n,t):i.data[o];ki(d,!0);const f=r[o]=r[11].createComment("");return Im(i,r,f,d),ho(f,r),ut(d)&&(rx(i,r,d),sM(i,d,r)),null!=t&&hd(r,d),ci}function ui(){let e=to();const n=yi();return Kl()?Bc():(e=e.parent,ki(e,!1)),n.firstCreatePass&&(dp(n,e),tn(e)&&n.queries.elementEnd(e)),ui}function Fi(){return pn()}function Jh(e){return!!e&&"function"==typeof e.then}const Mx=function RM(e){return!!e&&"function"==typeof e.subscribe};function It(e,n,t,r){const i=pn(),o=yi(),d=to();return Tx(o,i,i[11],d,e,n,0,r),It}function Km(e,n){const t=to(),r=pn(),i=yi();return Tx(i,r,fx(f0(i.data),t,r),t,e,n),Km}function Tx(e,n,t,r,i,o,d,f){const g=ut(r),w=e.firstCreatePass&&_M(e),S=n[8],k=hx(n);let V=!0;if(3&r.type||f){const De=Po(r,n),Re=f?f(De):De,Fe=k.length,ke=f?at=>f(Ha(at[r.index])):r.index;let Be=null;if(!f&&g&&(Be=function hO(e,n,t,r){const i=e.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const d=i[o];if(d===t&&i[o+1]===r){const f=n[7],g=i[o+2];return f.length>g?f[g]:null}"string"==typeof d&&(o+=2)}return null}(e,n,i,r.index)),null!==Be)(Be.__ngLastListenerFn__||Be).__ngNextListenerFn__=o,Be.__ngLastListenerFn__=o,V=!1;else{o=Ex(r,n,S,o,!1);const at=t.listen(Re,i,o);k.push(o,at),w&&w.push(i,ke,Fe,Fe+1)}}else o=Ex(r,n,S,o,!1);const ne=r.outputs;let pe;if(V&&null!==ne&&(pe=ne[i])){const De=pe.length;if(De)for(let Re=0;Re<De;Re+=2){const ot=n[pe[Re]][pe[Re+1]].subscribe(o),St=k.length;k.push(o,ot),w&&w.push(i,r.index,St,-(St+1))}}}function LM(e,n,t,r){try{return!1!==t(r)}catch(i){return yM(e,i),!1}}function Ex(e,n,t,r,i){return function o(d){if(d===Function)return r;ux(2&e.flags?Hr(e.index,n):n);let g=LM(n,0,r,d),_=o.__ngNextListenerFn__;for(;_;)g=LM(n,0,_,d)&&g,_=_.__ngNextListenerFn__;return i&&!1===g&&(d.preventDefault(),d.returnValue=!1),g}}function Wn(e=1){return function v0(e){return(Br.lFrame.contextLView=function oS(e,n){for(;e>0;)n=n[15],e--;return n}(e,Br.lFrame.contextLView))[8]}(e)}function OM(e,n){let t=null;const r=function ND(e){const n=e.attrs;if(null!=n){const t=n.indexOf(5);if(0==(1&t))return n[t+1]}return null}(e);for(let i=0;i<n.length;i++){const o=n[i];if("*"!==o){if(null===r?kD(e,o,!0):Rm(r,o))return i}else t=i}return t}function La(e){const n=pn()[16][6];if(!n.projection){const r=n.projection=Sl(e?e.length:1,null),i=r.slice();let o=n.child;for(;null!==o;){const d=e?OM(o,e):0;null!==d&&(i[d]?i[d].projectionNext=o:r[d]=o,i[d]=o),o=o.next}}}function Yr(e,n=0,t){const r=pn(),i=yi(),o=Xh(i,22+e,16,null,t||null);null===o.projection&&(o.projection=n),Bc(),64!=(64&o.flags)&&function cL(e,n,t){ID(n[11],0,n,t,bD(e,t,n),SD(t.parent||n[6],t,n))}(i,r,o)}function GM(e,n,t,r,i){const o=e[t+1],d=null===n;let f=r?Al(o):rc(o),g=!1;for(;0!==f&&(!1===g||d);){const w=e[f+1];gO(e[f],n)&&(g=!0,e[f+1]=r?jp(w):Wp(w)),f=r?Al(w):rc(w)}g&&(e[t+1]=r?Wp(o):jp(o))}function gO(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&Ah(e,n)>=0}const fo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ax(e){return e.substring(fo.key,fo.keyEnd)}function Ix(e,n){const t=fo.textEnd;return t===n?-1:(n=fo.keyEnd=function XM(e,n,t){for(;n<t&&e.charCodeAt(n)>32;)n++;return n}(e,fo.key=n,t),Cd(e,n,t))}function Cd(e,n,t){for(;n<t&&e.charCodeAt(n)<=32;)n++;return n}function fa(e,n,t){return Il(e,n,t,!1),fa}function ii(e,n){return Il(e,n,null,!0),ii}function uc(e,n){for(let t=function jM(e){return function YM(e){fo.key=0,fo.keyEnd=0,fo.value=0,fo.valueEnd=0,fo.textEnd=e.length}(e),Ix(e,Cd(e,0,fo.textEnd))}(n);t>=0;t=Ix(n,t))Ls(e,Ax(n),!0)}function Il(e,n,t,r){const i=pn(),o=yi(),d=Vc(2);o.firstUpdatePass&&yO(o,e,d,r),n!==Wr&&jo(i,d,n)&&eT(o,o.data[Go()],i,i[11],e,i[d+1]=function jc(e,n){return null==e||("string"==typeof n?e+=n:"object"==typeof e&&(e=Fn(Os(e)))),e}(n,t),r,d)}function KM(e,n){return n>=e.expandoStartIndex}function yO(e,n,t,r){const i=e.data;if(null===i[t+1]){const o=i[Go()],d=KM(e,t);Zc(o,r)&&null===n&&!d&&(n=!1),n=function bO(e,n,t,r){const i=f0(e);let o=r?n.residualClasses:n.residualStyles;if(null===i)0===(r?n.classBindings:n.styleBindings)&&(t=qp(t=Px(null,e,n,t,r),n.attrs,r),o=null);else{const d=n.directiveStylingLast;if(-1===d||e[d]!==i)if(t=Px(i,e,n,t,r),null===o){let g=function QM(e,n,t){const r=t?n.classBindings:n.styleBindings;if(0!==rc(r))return e[Al(r)]}(e,n,r);void 0!==g&&Array.isArray(g)&&(g=Px(null,e,n,g[1],r),g=qp(g,n.attrs,r),function qM(e,n,t,r){e[Al(t?n.classBindings:n.styleBindings)]=r}(e,n,r,g))}else o=function xO(e,n,t){let r;const i=n.directiveEnd;for(let o=1+n.directiveStylingLast;o<i;o++)r=qp(r,e[o].hostAttrs,t);return qp(r,n.attrs,t)}(e,n,r)}return void 0!==o&&(r?n.residualClasses=o:n.residualStyles=o),t}(i,o,n,r),function fO(e,n,t,r,i,o){let d=o?n.classBindings:n.styleBindings,f=Al(d),g=rc(d);e[r]=t;let w,_=!1;if(Array.isArray(t)){const S=t;w=S[1],(null===w||Ah(S,w)>0)&&(_=!0)}else w=t;if(i)if(0!==g){const k=Al(e[f+1]);e[r+1]=Up(k,f),0!==k&&(e[k+1]=Nm(e[k+1],r)),e[f+1]=function KD(e,n){return 131071&e|n<<17}(e[f+1],r)}else e[r+1]=Up(f,0),0!==f&&(e[f+1]=Nm(e[f+1],r)),f=r;else e[r+1]=Up(g,0),0===f?f=r:e[g+1]=Nm(e[g+1],r),g=r;_&&(e[r+1]=Wp(e[r+1])),GM(e,w,r,!0),GM(e,w,r,!1),function pO(e,n,t,r,i){const o=i?e.residualClasses:e.residualStyles;null!=o&&"string"==typeof n&&Ah(o,n)>=0&&(t[r+1]=jp(t[r+1]))}(n,w,e,r,o),d=Up(f,g),o?n.classBindings=d:n.styleBindings=d}(i,o,n,t,d,r)}}function Px(e,n,t,r,i){let o=null;const d=t.directiveEnd;let f=t.directiveStylingLast;for(-1===f?f=t.directiveStart:f++;f<d&&(o=n[f],r=qp(r,o.hostAttrs,i),o!==e);)f++;return null!==e&&(t.directiveStylingLast=f),r}function qp(e,n,t){const r=t?1:2;let i=-1;if(null!==n)for(let o=0;o<n.length;o++){const d=n[o];"number"==typeof d?i=d:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Ls(e,d,!!t||n[++o]))}return void 0===e?null:e}function eT(e,n,t,r,i,o,d,f){if(!(3&n.type))return;const g=e.data,_=g[f+1];Md(function Zb(e){return 1==(1&e)}(_)?Rx(g,n,t,i,rc(_),d):void 0)||(Md(o)||function Gp(e){return 2==(2&e)}(_)&&(o=Rx(g,null,t,i,f,d)),function uL(e,n,t,r,i){if(n)i?e.addClass(t,r):e.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:ys.DashCase;null==i?e.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ys.Important),e.setStyle(t,r,i,o))}}(r,d,jv(Go(),t),i,o))}function Rx(e,n,t,r,i,o){const d=null===n;let f;for(;i>0;){const g=e[i],_=Array.isArray(g),w=_?g[1]:g,S=null===w;let k=t[i+1];k===Wr&&(k=S?ti:void 0);let V=S?I0(k,r):w===r?k:void 0;if(_&&!Md(V)&&(V=I0(g,r)),Md(V)&&(f=V,d))return f;const ne=e[i+1];i=d?Al(ne):rc(ne)}if(null!==n){let g=o?n.residualClasses:n.residualStyles;null!=g&&(f=I0(g,r))}return f}function Md(e){return void 0!==e}function Zc(e,n){return 0!=(e.flags&(n?16:32))}function Mt(e,n=""){const t=pn(),r=yi(),i=e+22,o=r.firstCreatePass?Xh(r,i,1,n,null):r.data[i],d=t[i]=function Zh(e,n){return e.createText(n)}(t[11],n);Im(r,t,d,o),ki(o,!1)}function Lo(e){return ro("",e,""),Lo}function ro(e,n,t){const r=pn(),i=md(r,e,n,t);return i!==Wr&&sc(r,Go(),i),ro}function Jp(e,n,t,r,i){const o=pn(),d=function _d(e,n,t,r,i,o){const f=gd(e,Ql(),t,i);return Vc(2),f?n+Sr(t)+r+Sr(i)+o:Wr}(o,e,n,t,r,i);return d!==Wr&&sc(o,Go(),d),Jp}function eg(e,n,t,r,i,o,d){const f=pn(),g=yd(f,e,n,t,r,i,o,d);return g!==Wr&&sc(f,Go(),g),eg}function iT(e,n,t){!function Wa(e,n,t,r){const i=yi(),o=Vc(2);i.firstUpdatePass&&yO(i,null,o,r);const d=pn();if(t!==Wr&&jo(d,o,t)){const f=i.data[Go()];if(Zc(f,r)&&!KM(i,o)){let g=r?f.classesWithoutHost:f.stylesWithoutHost;null!==g&&(t=bn(g,t||"")),Sx(i,f,d,t,r)}else!function JM(e,n,t,r,i,o,d,f){i===Wr&&(i=ti);let g=0,_=0,w=0<i.length?i[0]:null,S=0<o.length?o[0]:null;for(;null!==w||null!==S;){const k=g<i.length?i[g+1]:void 0,V=_<o.length?o[_+1]:void 0;let pe,ne=null;w===S?(g+=2,_+=2,k!==V&&(ne=S,pe=V)):null===S||null!==w&&w<S?(g+=2,ne=w):(_+=2,ne=S,pe=V),null!==ne&&eT(e,n,t,r,ne,pe,d,f),w=g<i.length?i[g]:null,S=_<o.length?o[_]:null}}(i,f,d,d[11],d[o+1],d[o+1]=function wO(e,n,t){if(null==t||""===t)return ti;const r=[],i=Os(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)e(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&e(r,o,i[o]);else"string"==typeof i&&n(r,i);return r}(e,n,t),r,o)}}(Ls,uc,md(pn(),e,n,t),!0)}function Zo(e,n,t){const r=pn();return jo(r,yh(),n)&&Ns(yi(),Ca(),r,e,n,r[11],t,!0),Zo}function ef(e,n,t){const r=pn();if(jo(r,yh(),n)){const o=yi(),d=Ca();Ns(o,d,r,e,n,fx(f0(o.data),d,r),t,!0)}return ef}const wu="en-US";let Ux=wu;function l_(e,n,t,r,i){if(e=wr(e),Array.isArray(e))for(let o=0;o<e.length;o++)l_(e[o],n,t,r,i);else{const o=yi(),d=pn();let f=Ml(e)?e:wr(e.provide),g=JS(e);const _=to(),w=1048575&_.providerIndexes,S=_.directiveStart,k=_.providerIndexes>>20;if(Ml(e)||!e.multi){const V=new Wo(g,i,qe),ne=Kx(f,n,i?w:w+k,S);-1===ne?(Dh(pp(_,d),o,f),sg(o,e,n.length),n.push(f),_.directiveStart++,_.directiveEnd++,i&&(_.providerIndexes+=1048576),t.push(V),d.push(V)):(t[ne]=V,d[ne]=V)}else{const V=Kx(f,n,w+k,S),ne=Kx(f,n,w,w+k),pe=V>=0&&t[V],De=ne>=0&&t[ne];if(i&&!De||!i&&!pe){Dh(pp(_,d),o,f);const Re=function hk(e,n,t,r,i){const o=new Wo(e,t,qe);return o.multi=[],o.index=n,o.componentProviders=0,YT(o,i,r&&!t),o}(i?dk:XT,t.length,i,r,g);!i&&De&&(t[ne].providerFactory=Re),sg(o,e,n.length,0),n.push(f),_.directiveStart++,_.directiveEnd++,i&&(_.providerIndexes+=1048576),t.push(Re),d.push(Re)}else sg(o,e,V>-1?V:ne,YT(t[i?ne:V],g,!i&&r));!i&&r&&De&&t[ne].componentProviders++}}}function sg(e,n,t,r){const i=Ml(n),o=function rd(e){return!!e.useClass}(n);if(i||o){const g=(o?wr(n.useClass):n).prototype.ngOnDestroy;if(g){const _=e.destroyHooks||(e.destroyHooks=[]);if(!i&&n.multi){const w=_.indexOf(t);-1===w?_.push(t,[r,g]):_[w+1].push(r,g)}else _.push(t,g)}}}function YT(e,n,t){return t&&e.componentProviders++,e.multi.push(n)-1}function Kx(e,n,t,r){for(let i=t;i<r;i++)if(n[i]===e)return i;return-1}function XT(e,n,t,r){return c_(this.multi,[])}function dk(e,n,t,r){const i=this.multi;let o;if(this.providerFactory){const d=this.providerFactory.componentProviders,f=mp(t,t[1],this.providerFactory.index,r);o=f.slice(0,d),c_(i,o);for(let g=d;g<f.length;g++)o.push(f[g])}else o=[],c_(i,o);return o}function c_(e,n){for(let t=0;t<e.length;t++)n.push((0,e[t])());return n}function Vr(e,n=[]){return t=>{t.providersResolver=(r,i)=>function uk(e,n,t){const r=yi();if(r.firstCreatePass){const i=Dt(e);l_(t,r.data,r.blueprint,i,!0),l_(n,r.data,r.blueprint,i,!1)}}(r,i?i(e):e,n)}}class Ad{}class $T{}class QT extends Ad{constructor(n,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new gx(this);const r=Ao(n);this._bootstrapComponents=Tl(r.bootstrap),this._r3Injector=zD(n,t,[{provide:Ad,useValue:this},{provide:od,useValue:this.componentFactoryResolver}],Fn(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Qx extends $T{constructor(n){super(),this.moduleType=n}create(n){return new QT(this.moduleType,n)}}class u_ extends Ad{constructor(n,t,r){super(),this.componentFactoryResolver=new gx(this),this.instance=null;const i=new QS([...n,{provide:Ad,useValue:this},{provide:od,useValue:this.componentFactoryResolver}],t||id(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function rf(e,n,t=null){return new u_(e,n,t).injector}let fk=(()=>{class e{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=Ap(0,t.type),i=r.length>0?rf([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,i)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return e.\u0275prov=Jt({token:e,providedIn:"environment",factory:()=>new e(Nt(sa))}),e})();function qT(e){e.getStandaloneInjector=n=>n.get(fk).getOrCreateStandaloneInjector(e)}function Id(e,n,t){const r=Uo()+e,i=pn();return i[r]===Wr?lc(i,r,t?n.call(t):n()):function pd(e,n){return e[n]}(i,r)}function hc(e,n,t,r){return function aE(e,n,t,r,i,o){const d=n+t;return jo(e,d,i)?lc(e,d+1,o?r.call(o,i):r(i)):cg(e,d+1)}(pn(),Uo(),e,n,t,r)}function lg(e,n,t,r,i){return function a1(e,n,t,r,i,o,d){const f=n+t;return gd(e,f,i,o)?lc(e,f+2,d?r.call(d,i,o):r(i,o)):cg(e,f+2)}(pn(),Uo(),e,n,t,r,i)}function cg(e,n){const t=e[n];return t===Wr?void 0:t}function s1(e){return n=>{setTimeout(e,void 0,n)}}const En=class Ck extends se{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,t,r){let i=n,o=t||(()=>null),d=r;if(n&&"object"==typeof n){const g=n;i=g.next?.bind(g),o=g.error?.bind(g),d=g.complete?.bind(g)}this.__isAsync&&(o=s1(o),i&&(i=s1(i)),d&&(d=s1(d)));const f=super.subscribe({next:i,error:o,complete:d});return n instanceof ye&&n.add(f),f}};function Sk(){return this._results[fd()]()}class Pd{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=fd(),r=Pd.prototype;r[t]||(r[t]=Sk)}get changes(){return this._changes||(this._changes=new En)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,t){return this._results.reduce(n,t)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,t){const r=this;r.dirty=!1;const i=Rs(n);(this._changesDetected=!function KP(e,n,t){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=n[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let il=(()=>{class e{}return e.__NG_ELEMENT_ID__=Dk,e})();const af=il,uE=class extends af{constructor(n,t,r){super(),this._declarationLView=n,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(n,t){const r=this._declarationTContainer.tViews,i=Zp(this._declarationLView,r,n,16,null,r.declTNode,null,null,null,null,t||null);i[17]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[19];return null!==d&&(i[19]=d.createEmbeddedView(r)),tx(r,i,n),new $p(i)}};function Dk(){return f_(to(),pn())}function f_(e,n){return 4&e.type?new uE(n,e,Hh(e,n)):null}let as=(()=>{class e{}return e.__NG_ELEMENT_ID__=Mk,e})();function Mk(){return hE(to(),pn())}const Tk=as,dE=class extends Tk{constructor(n,t,r){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=r}get element(){return Hh(this._hostTNode,this._hostLView)}get injector(){return new _u(this._hostTNode,this._hostLView)}get parentInjector(){const n=em(this._hostTNode,this._hostLView);if(cS(n)){const t=Sh(n,this._hostLView),r=Ch(n);return new _u(t[1].data[r+8],t)}return new _u(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const t=l1(this._lContainer);return null!==t&&t[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const d=n.createEmbeddedView(t||{},o);return this.insert(d,i),d}createComponent(n,t,r,i,o){const d=n&&!function yp(e){return"function"==typeof e}(n);let f;if(d)f=t;else{const S=t||{};f=S.index,r=S.injector,i=S.projectableNodes,o=S.environmentInjector||S.ngModuleRef}const g=d?n:new Kp(hi(n)),_=r||this.parentInjector;if(!o&&null==g.ngModule){const k=(d?_:this.parentInjector).get(sa,null);k&&(o=k)}const w=g.create(_,i,void 0,o);return this.insert(w.hostView,f),w}insert(n,t){const r=n._lView,i=r[1];if(function KC(e){return Pt(e[3])}(r)){const w=this.indexOf(n);if(-1!==w)this.detach(w);else{const S=r[3],k=new dE(S,S[6],S[3]);k.detach(k.indexOf(n))}}const o=this._adjustIndex(t),d=this._lContainer;!function rL(e,n,t,r){const i=10+r,o=t.length;r>0&&(t[i-1][4]=n),r<o-10?(n[4]=t[i],A0(t,10+r,n)):(t.push(n),n[4]=null),n[3]=t;const d=n[17];null!==d&&t!==d&&function iL(e,n){const t=e[9];n[16]!==n[3][3][16]&&(e[2]=!0),null===t?e[9]=[n]:t.push(n)}(d,n);const f=n[19];null!==f&&f.insertView(e),n[2]|=64}(i,r,d,o);const f=Ab(o,d),g=r[11],_=Yh(g,d[7]);return null!==_&&function eL(e,n,t,r,i,o){r[0]=i,r[6]=n,Bp(e,r,t,1,i,o)}(i,d[6],g,r,_,f),n.attachToViewContainerRef(),A0(hg(d),o,n),n}move(n,t){return this.insert(n,t)}indexOf(n){const t=l1(this._lContainer);return null!==t?t.indexOf(n):-1}remove(n){const t=this._adjustIndex(n,-1),r=Db(this._lContainer,t);r&&(Jl(hg(this._lContainer),t),yD(r[1],r))}detach(n){const t=this._adjustIndex(n,-1),r=Db(this._lContainer,t);return r&&null!=Jl(hg(this._lContainer),t)?new $p(r):null}_adjustIndex(n,t=0){return n??this.length+t}};function l1(e){return e[8]}function hg(e){return e[8]||(e[8]=[])}function hE(e,n){let t;const r=n[e.index];if(Pt(r))t=r;else{let i;if(8&e.type)i=Ha(r);else{const o=n[11];i=o.createComment("");const d=Po(e,n);ld(o,Yh(o,d),i,function lL(e,n){return e.nextSibling(n)}(o,d),!1)}n[e.index]=t=cx(r,n,i,e),Um(n,t)}return new dE(t,e,n)}class p_{constructor(n){this.queryList=n,this.matches=null}clone(){return new p_(this.queryList)}setDirty(){this.queryList.setDirty()}}class c1{constructor(n=[]){this.queries=n}createEmbeddedView(n){const t=n.queries;if(null!==t){const r=null!==n.contentQueries?n.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){const d=t.getByIndex(o);i.push(this.queries[d.indexInDeclarationView].clone())}return new c1(i)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let t=0;t<this.queries.length;t++)null!==_E(n,t).matches&&this.queries[t].setDirty()}}class pE{constructor(n,t,r=null){this.predicate=n,this.flags=t,this.read=r}}class u1{constructor(n=[]){this.queries=n}elementStart(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,t)}elementEnd(n){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(n)}embeddedTView(n){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,o=this.getByIndex(r).embeddedTView(n,i);o&&(o.indexInDeclarationView=r,null!==t?t.push(o):t=[o])}return null!==t?new u1(t):null}template(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,t)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class g_{constructor(n,t=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(n,t){this.isApplyingToNode(t)&&this.matchTNode(n,t)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,t){this.elementStart(n,t)}embeddedTView(n,t){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,t),new g_(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=n.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(n,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(n,t,Ek(t,o)),this.matchTNodeWithReadOption(n,t,Xu(t,n,o,!1,!1))}else r===il?4&t.type&&this.matchTNodeWithReadOption(n,t,-1):this.matchTNodeWithReadOption(n,t,Xu(t,n,r,!1,!1))}matchTNodeWithReadOption(n,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Or||i===as||i===il&&4&t.type)this.addMatch(t.index,-2);else{const o=Xu(t,n,i,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(n,t){null===this.matches?this.matches=[n,t]:this.matches.push(n,t)}}function Ek(e,n){const t=e.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===n)return t[r+1];return null}function Ik(e,n,t,r){return-1===t?function Ak(e,n){return 11&e.type?Hh(e,n):4&e.type?f_(e,n):null}(n,e):-2===t?function Pk(e,n,t){return t===Or?Hh(n,e):t===il?f_(n,e):t===as?hE(n,e):void 0}(e,n,r):mp(e,e[1],t,n)}function gE(e,n,t,r){const i=n[19].queries[r];if(null===i.matches){const o=e.data,d=t.matches,f=[];for(let g=0;g<d.length;g+=2){const _=d[g];f.push(_<0?null:Ik(n,o[_],d[g+1],t.metadata.read))}i.matches=f}return i.matches}function v_(e,n,t,r){const i=e.queries.getByIndex(t),o=i.matches;if(null!==o){const d=gE(e,n,i,t);for(let f=0;f<o.length;f+=2){const g=o[f];if(g>0)r.push(d[f/2]);else{const _=o[f+1],w=n[-g];for(let S=10;S<w.length;S++){const k=w[S];k[17]===k[3]&&v_(k[1],k,_,r)}if(null!==w[9]){const S=w[9];for(let k=0;k<S.length;k++){const V=S[k];v_(V[1],V,_,r)}}}}}return r}function Qn(e){const n=pn(),t=yi(),r=iS();up(r+1);const i=_E(t,r);if(e.dirty&&function lr(e){return 4==(4&e[2])}(n)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const o=i.crossesNgTemplate?v_(t,n,r,[]):gE(t,n,i,r);e.reset(o,PR),e.notifyOnChanges()}return!0}return!1}function Qr(e,n,t){const r=yi();r.firstCreatePass&&(pg(r,new pE(e,n,t),-1),2==(2&n)&&(r.staticViewQueries=!0)),mE(r,pn(),n)}function Bi(e,n,t,r){const i=yi();if(i.firstCreatePass){const o=to();pg(i,new pE(n,t,r),o.index),function sf(e,n){const t=e.contentQueries||(e.contentQueries=[]);n!==(t.length?t[t.length-1]:-1)&&t.push(e.queries.length-1,n)}(i,e),2==(2&t)&&(i.staticContentQueries=!0)}mE(i,pn(),t)}function $n(){return function vE(e,n){return e[19].queries[n].queryList}(pn(),iS())}function mE(e,n,t){const r=new Pd(4==(4&t));la(e,n,r,r.destroy),null===n[19]&&(n[19]=new c1),n[19].queries.push(new p_(r))}function pg(e,n,t){null===e.queries&&(e.queries=new u1),e.queries.track(new g_(n,t))}function _E(e,n){return e.queries.getByIndex(n)}function yE(e,n){return f_(e,n)}function S_(...e){}const vg=new dn("Application Initializer");let D_=(()=>{class e{constructor(t){this.appInits=t,this.resolve=S_,this.reject=S_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(Jh(o))t.push(o);else if(Mx(o)){const d=new Promise((f,g)=>{o.subscribe({complete:f,error:g})});t.push(d)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(Nt(vg,8))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const mg=new dn("AppId",{providedIn:"root",factory:function zE(){return`${M_()}${M_()}${M_()}`}});function M_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const y1=new dn("Platform Initializer"),b1=new dn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),HE=new dn("appBootstrapListener"),Xo=new dn("AnimationModuleType");let Uk=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const Pl=new dn("LocaleId",{providedIn:"root",factory:()=>Ji(Pl,ar.Optional|ar.SkipSelf)||function _g(){return typeof $localize<"u"&&$localize.locale||wu}()});class jk{constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}}let x1=(()=>{class e{compileModuleSync(t){return new Qx(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=Tl(Ao(t).declarations).reduce((d,f)=>{const g=hi(f);return g&&d.push(new Kp(g)),d},[]);return new jk(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const w1=(()=>Promise.resolve(0))();function E_(e){typeof Zone>"u"?w1.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Cr{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new En(!1),this.onMicrotaskEmpty=new En(!1),this.onStable=new En(!1),this.onError=new En(!1),typeof Zone>"u")throw new an(908,!1);Zone.assertZonePatched();const i=this;if(i._nesting=0,i._outer=i._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const o=Zone.AsyncStackTaggingZoneSpec;i._inner=i._inner.fork(new o("Angular"))}Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function $k(){let e=Oi.requestAnimationFrame,n=Oi.cancelAnimationFrame;if(typeof Zone<"u"&&e&&n){const t=e[Zone.__symbol__("OriginalDelegate")];t&&(e=t);const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function WE(e){const n=()=>{!function GE(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Oi,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Od(e),e.isCheckStableRunning=!0,C1(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Od(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,d,f)=>{try{return Kk(e),t.invokeTask(i,o,d,f)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&n(),S1(e)}},onInvoke:(t,r,i,o,d,f,g)=>{try{return Kk(e),t.invoke(i,o,d,f,g)}finally{e.shouldCoalesceRunChangeDetection&&n(),S1(e)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,Od(e),C1(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Cr.isInAngularZone())throw new an(909,!1)}static assertNotInAngularZone(){if(Cr.isInAngularZone())throw new an(909,!1)}run(n,t,r){return this._inner.run(n,t,r)}runTask(n,t,r,i){const o=this._inner,d=o.scheduleEventTask("NgZoneEvent: "+i,n,yg,S_,S_);try{return o.runTask(d,t,r)}finally{o.cancelTask(d)}}runGuarded(n,t,r){return this._inner.runGuarded(n,t,r)}runOutsideAngular(n){return this._outer.run(n)}}const yg={};function C1(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Od(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Kk(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function S1(e){e._nesting--,C1(e)}class D1{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new En,this.onMicrotaskEmpty=new En,this.onStable=new En,this.onError=new En}run(n,t,r){return n.apply(t,r)}runGuarded(n,t,r){return n.apply(t,r)}runOutsideAngular(n){return n()}runTask(n,t,r,i){return n.apply(t,r)}}const A_=new dn(""),bg=new dn("");let I_,M1=(()=>{class e{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,I_||(function Qk(e){I_=e}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Cr.assertNotInAngularZone(),E_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())E_(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(d=>d.timeoutId!==o),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return e.\u0275fac=function(t){return new(t||e)(Nt(Cr),Nt(T1),Nt(bg))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac}),e})(),T1=(()=>{class e{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return I_?.findTestabilityInTree(this,t,r)??null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),Cu=null;const jE=new dn("AllowMultipleToken"),P_=new dn("PlatformDestroyListeners");class E1{constructor(n,t){this.name=n,this.token=t}}function YE(e,n,t=[]){const r=`Platform: ${n}`,i=new dn(r);return(o=[])=>{let d=A1();if(!d||d.injector.get(jE,!1)){const f=[...t,...o,{provide:i,useValue:!0}];e?e(f):function eN(e){if(Cu&&!Cu.get(jE,!1))throw new an(400,!1);Cu=e;const n=e.get(I1);(function ZE(e){const n=e.get(y1,null);n&&n.forEach(t=>t())})(e)}(function XE(e=[],n){return Ga.create({name:n,providers:[{provide:Ip,useValue:"platform"},{provide:P_,useValue:new Set([()=>Cu=null])},...e]})}(f,r))}return function nN(e){const n=A1();if(!n)throw new an(401,!1);return n}()}}function A1(){return Cu?.get(I1)??null}let I1=(()=>{class e{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function $E(e,n){let t;return t="noop"===e?new D1:("zone.js"===e?void 0:e)||new Cr(n),t}(r?.ngZone,function P1(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(r)),o=[{provide:Cr,useValue:i}];return i.run(()=>{const d=Ga.create({providers:o,parent:this.injector,name:t.moduleType.name}),f=t.create(d),g=f.injector.get(ks,null);if(!g)throw new an(402,!1);return i.runOutsideAngular(()=>{const _=i.onError.subscribe({next:w=>{g.handleError(w)}});f.onDestroy(()=>{R_(this._modules,f),_.unsubscribe()})}),function KE(e,n,t){try{const r=t();return Jh(r)?r.catch(i=>{throw n.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw n.runOutsideAngular(()=>e.handleError(r)),r}}(g,i,()=>{const _=f.injector.get(D_);return _.runInitializers(),_.donePromise.then(()=>(function yT(e){Vo(e,"Expected localeId to be defined"),"string"==typeof e&&(Ux=e.toLowerCase().replace(/_/g,"-"))}(f.injector.get(Pl,wu)||wu),this._moduleDoBootstrap(f),f))})})}bootstrapModule(t,r=[]){const i=QE({},r);return function qk(e,n,t){const r=new Qx(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(t){const r=t.injector.get(cf);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new an(403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new an(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(P_,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(Nt(Ga))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function QE(e,n){return Array.isArray(n)?n.reduce(QE,e):{...e,...n}}let cf=(()=>{class e{constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new N(f=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{f.next(this._stable),f.complete()})}),d=new N(f=>{let g;this._zone.runOutsideAngular(()=>{g=this._zone.onStable.subscribe(()=>{Cr.assertNotInAngularZone(),E_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,f.next(!0))})})});const _=this._zone.onUnstable.subscribe(()=>{Cr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{f.next(!1)}))});return()=>{g.unsubscribe(),_.unsubscribe()}});this.isStable=Vn(o,d.pipe(Jf()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof Rp;if(!this._injector.get(D_).done)throw!i&&function Js(e){const n=hi(e)||Va(e)||da(e);return null!==n&&n.standalone}(t),new an(405,false);let d;d=i?t:this._injector.get(od).resolveComponentFactory(t),this.componentTypes.push(d.componentType);const f=function Jk(e){return e.isBoundToModule}(d)?void 0:this._injector.get(Ad),_=d.create(Ga.NULL,[],r||d.selector,f),w=_.location.nativeElement,S=_.injector.get(A_,null);return S?.registerApplication(w),_.onDestroy(()=>{this.detachView(_.hostView),R_(this.components,_),S?.unregisterApplication(w)}),this._loadComponent(_),_}tick(){if(this._runningTick)throw new an(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;R_(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(HE,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>R_(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new an(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(t){return new(t||e)(Nt(Cr),Nt(sa),Nt(ks))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function R_(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}let L_=!0,Pi=(()=>{class e{}return e.__NG_ELEMENT_ID__=aN,e})();function aN(e){return function oN(e,n,t){if(xn(e)&&!t){const r=Hr(e.index,n);return new $p(r,r)}return 47&e.type?new $p(n[16],n):null}(to(),pn(),16==(16&e))}class k1{constructor(){}supports(n){return Qp(n)}create(n){return new F1(n)}}const N1=(e,n)=>n;class F1{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||N1}forEachItem(n){let t;for(t=this._itHead;null!==t;t=t._next)n(t)}forEachOperation(n){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){const d=!r||t&&t.currentIndex<tA(r,i,o)?t:r,f=tA(d,i,o),g=d.currentIndex;if(d===r)i--,r=r._nextRemoved;else if(t=t._next,null==d.previousIndex)i++;else{o||(o=[]);const _=f-i,w=g-i;if(_!=w){for(let k=0;k<_;k++){const V=k<o.length?o[k]:o[k]=0,ne=V+k;w<=ne&&ne<_&&(o[k]=V+1)}o[d.previousIndex]=w-_}}f!==g&&n(d,f,g)}}forEachPreviousItem(n){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachMovedItem(n){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}forEachIdentityChange(n){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)n(t)}diff(n){if(null==n&&(n=[]),!Qp(n))throw new an(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i,o,d,t=this._itHead,r=!1;if(Array.isArray(n)){this.length=n.length;for(let f=0;f<this.length;f++)o=n[f],d=this._trackByFn(f,o),null!==t&&Object.is(t.trackById,d)?(r&&(t=this._verifyReinsertion(t,o,d,f)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,d,f),r=!0),t=t._next}else i=0,function mx(e,n){if(Array.isArray(e))for(let t=0;t<e.length;t++)n(e[t]);else{const t=e[fd()]();let r;for(;!(r=t.next()).done;)n(r.value)}}(n,f=>{d=this._trackByFn(i,f),null!==t&&Object.is(t.trackById,d)?(r&&(t=this._verifyReinsertion(t,f,d,i)),Object.is(t.item,f)||this._addIdentityChange(t,f)):(t=this._mismatch(t,f,d,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,t,r,i){let o;return null===n?o=this._itTail:(o=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._reinsertAfter(n,o,i)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._moveAfter(n,o,i)):n=this._addAfter(new uN(t,r),o,i),n}_verifyReinsertion(n,t,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?n=this._reinsertAfter(o,n._prev,i):n.currentIndex!=i&&(n.currentIndex=i,this._addToMoves(n,i)),n}_truncate(n){for(;null!==n;){const t=n._next;this._addToRemovals(this._unlink(n)),n=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const i=n._prevRemoved,o=n._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(n,t,r),this._addToMoves(n,r),n}_moveAfter(n,t,r){return this._unlink(n),this._insertAfter(n,t,r),this._addToMoves(n,r),n}_addAfter(n,t,r){return this._insertAfter(n,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,t,r){const i=null===t?this._itHead:t._next;return n._next=i,n._prev=t,null===i?this._itTail=n:i._prev=n,null===t?this._itHead=n:t._next=n,null===this._linkedRecords&&(this._linkedRecords=new V1),this._linkedRecords.put(n),n.currentIndex=r,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const t=n._prev,r=n._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,n}_addToMoves(n,t){return n.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new V1),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,t){return n.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class uN{constructor(n,t){this.item=n,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class B1{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,n))return r;return null}remove(n){const t=n._prevDup,r=n._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class V1{constructor(){this.map=new Map}put(n){const t=n.trackById;let r=this.map.get(t);r||(r=new B1,this.map.set(t,r)),r.add(n)}get(n,t){const i=this.map.get(n);return i?i.get(n,t):null}remove(n){const t=n.trackById;return this.map.get(t).remove(n)&&this.map.delete(t),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function tA(e,n,t){const r=e.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+n+i}class nA{constructor(){}supports(n){return n instanceof Map||_x(n)}create(){return new dN}}class dN{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let t;for(t=this._mapHead;null!==t;t=t._next)n(t)}forEachPreviousItem(n){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)n(t)}forEachChangedItem(n){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}diff(n){if(n){if(!(n instanceof Map||_x(n)))throw new an(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(n,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,t){if(n){const r=n._prev;return t._next=n,t._prev=r,n._prev=t,r&&(r._next=t),n===this._mapHead&&(this._mapHead=t),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(n,t){if(this._records.has(n)){const i=this._records.get(n);this._maybeAddToChanges(i,t);const o=i._prev,d=i._next;return o&&(o._next=d),d&&(d._prev=o),i._next=null,i._prev=null,i}const r=new hN(n);return this._records.set(n,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,t){Object.is(t,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=t,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,t){n instanceof Map?n.forEach(t):Object.keys(n).forEach(r=>t(n[r],r))}}class hN{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function rA(){return new N_([new k1])}let N_=(()=>{class e{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||rA()),deps:[[e,new tc,new Dl]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new an(901,!1)}}return e.\u0275prov=Jt({token:e,providedIn:"root",factory:rA}),e})();function iA(){return new Du([new nA])}let Du=(()=>{class e{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||iA()),deps:[[e,new tc,new Dl]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new an(901,!1)}}return e.\u0275prov=Jt({token:e,providedIn:"root",factory:iA}),e})();const pN=YE(null,"core",[]);let gN=(()=>{class e{constructor(t){}}return e.\u0275fac=function(t){return new(t||e)(Nt(cf))},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({}),e})();function qc(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}let F_=null;function pc(){return F_}const Rr=new dn("DocumentToken");let ff=(()=>{class e{historyGo(t){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Jt({token:e,factory:function(){return function _N(){return Nt(lA)}()},providedIn:"platform"}),e})();const yN=new dn("Location Initialized");let lA=(()=>{class e extends ff{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return pc().getBaseHref(this._doc)}onPopState(t){const r=pc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=pc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){W1()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){W1()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(Nt(Rr))},e.\u0275prov=Jt({token:e,factory:function(){return function cA(){return new lA(Nt(Rr))}()},providedIn:"platform"}),e})();function W1(){return!!window.history.pushState}function Cg(e,n){if(0==e.length)return n;if(0==n.length)return e;let t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,2==t?e+n.substring(1):1==t?e+n:e+"/"+n}function B_(e){const n=e.match(/#|\?|$/),t=n&&n.index||e.length;return e.slice(0,t-("/"===e[t-1]?1:0))+e.slice(t)}function gc(e){return e&&"?"!==e[0]?"?"+e:e}let Fd=(()=>{class e{historyGo(t){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Jt({token:e,factory:function(){return Ji(uA)},providedIn:"root"}),e})();const pf=new dn("appBaseHref");let uA=(()=>{class e extends Fd{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Ji(Rr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Cg(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+gc(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const d=this.prepareExternalUrl(i+gc(o));this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,o){const d=this.prepareExternalUrl(i+gc(o));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return e.\u0275fac=function(t){return new(t||e)(Nt(ff),Nt(pf,8))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),dA=(()=>{class e extends Fd{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Cg(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let d=this.prepareExternalUrl(i+gc(o));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,o){let d=this.prepareExternalUrl(i+gc(o));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return e.\u0275fac=function(t){return new(t||e)(Nt(ff),Nt(pf,8))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac}),e})(),Sg=(()=>{class e{constructor(t){this._subject=new En,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=B_(j1(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+gc(r))}normalize(t){return e.stripTrailingSlash(function bN(e,n){return e&&n.startsWith(e)?n.substring(e.length):n}(this._baseHref,j1(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+gc(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+gc(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return e.normalizeQueryParams=gc,e.joinWithSlash=Cg,e.stripTrailingSlash=B_,e.\u0275fac=function(t){return new(t||e)(Nt(Fd))},e.\u0275prov=Jt({token:e,factory:function(){return function hA(){return new Sg(Nt(Fd))}()},providedIn:"root"}),e})();function j1(e){return e.replace(/\/index.html$/,"")}let Vd=(()=>{class e{constructor(t,r,i,o){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Qp(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Fn(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return e.\u0275fac=function(t){return new(t||e)(qe(N_),qe(Du),qe(Or),qe(Gc))},e.\u0275dir=Sn({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),e})();class GN{constructor(n,t,r,i){this.$implicit=n,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let mc=(()=>{class e{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,d)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new GN(i.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===o?void 0:o);else if(null!==o){const f=r.get(o);r.move(f,d),IA(f,i)}});for(let i=0,o=r.length;i<o;i++){const f=r.get(i).context;f.index=i,f.count=o,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{IA(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return e.\u0275fac=function(t){return new(t||e)(qe(as),qe(il),qe(N_))},e.\u0275dir=Sn({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function IA(e,n){e.context.$implicit=n.item}let xs=(()=>{class e{constructor(t,r){this._viewContainer=t,this._context=new jN,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){tw("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){tw("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return e.\u0275fac=function(t){return new(t||e)(qe(as),qe(il))},e.\u0275dir=Sn({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class jN{constructor(){this.$implicit=null,this.ngIf=null}}function tw(e,n){if(n&&!n.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${Fn(n)}'.`)}class nw{constructor(n,t){this._viewContainerRef=n,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(n){n&&!this._created?this.create():!n&&this._created&&this.destroy()}}let vf=(()=>{class e{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Sn({type:e,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),e})(),ey=(()=>{class e{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new nw(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return e.\u0275fac=function(t){return new(t||e)(qe(as),qe(il),qe(vf,9))},e.\u0275dir=Sn({type:e,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),e})(),PA=(()=>{class e{constructor(t,r,i){i._addDefault(new nw(t,r))}}return e.\u0275fac=function(t){return new(t||e)(qe(as),qe(il),qe(vf,9))},e.\u0275dir=Sn({type:e,selectors:[["","ngSwitchDefault",""]],standalone:!0}),e})(),Ig=(()=>{class e{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,o]=t.split("."),d=-1===i.indexOf("-")?void 0:ys.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,d):this._renderer.removeStyle(this._ngEl.nativeElement,i,d)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return e.\u0275fac=function(t){return new(t||e)(qe(Or),qe(Du),qe(Gc))},e.\u0275dir=Sn({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),e})(),Rl=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({}),e})();const BA="browser";let HA=(()=>{class e{}return e.\u0275prov=Jt({token:e,providedIn:"root",factory:()=>new ty(Nt(Rr),window)}),e})();class ty{constructor(n,t){this.document=n,this.window=t,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const t=function UA(e,n){const t=e.getElementById(n)||e.getElementsByName(n)[0];if(t)return t;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const d=o.getElementById(n)||o.querySelector(`[name="${n}"]`);if(d)return d}i=r.nextNode()}}return null}(this.document,n);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=n)}}scrollToElement(n){const t=n.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=bf(this.window.history)||bf(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function bf(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class ue extends class U extends class hf{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function G1(e){F_||(F_=e)}(new ue)}onAndCancel(n,t,r){return n.addEventListener(t,r,!1),()=>{n.removeEventListener(t,r,!1)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,t){return(t=t||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return"window"===t?window:"document"===t?n:"body"===t?n.body:null}getBaseHref(n){const t=function ve(){return me=me||document.querySelector("base"),me?me.getAttribute("href"):null}();return null==t?null:function Ae(e){Me=Me||document.createElement("a"),Me.setAttribute("href",e);const n=Me.pathname;return"/"===n.charAt(0)?n:`/${n}`}(t)}resetBaseElement(){me=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function HN(e,n){n=encodeURIComponent(n);for(const t of e.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===n)return decodeURIComponent(o)}return null}(document.cookie,n)}}let Me,me=null;const Pe=new dn("TRANSITION_ID"),He=[{provide:vg,useFactory:function Ne(e,n,t){return()=>{t.get(D_).donePromise.then(()=>{const r=pc(),i=n.querySelectorAll(`style[ng-transition="${e}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[Pe,Rr,Ga],multi:!0}];let Qe=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Jt({token:e,factory:e.\u0275fac}),e})();const it=new dn("EventManagerPlugins");let ct=(()=>{class e{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const d=i[o];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return e.\u0275fac=function(t){return new(t||e)(Nt(it),Nt(Cr))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac}),e})();class ht{constructor(n){this._doc=n}addGlobalEventListener(n,t,r){const i=pc().getGlobalEventTarget(this._doc,n);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let vt=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Jt({token:e,factory:e.\u0275fac}),e})(),gt=(()=>{class e extends vt{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(o=>{const d=this._doc.createElement("style");d.textContent=o,i.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ot),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ot))}}return e.\u0275fac=function(t){return new(t||e)(Nt(Rr))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac}),e})();function Ot(e){pc().remove(e)}const Gt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ft=/%COMP%/g;function jr(e,n,t){for(let r=0;r<n.length;r++){let i=n[r];Array.isArray(i)?jr(e,i,t):(i=i.replace(Ft,e),t.push(i))}return t}function pi(e){return n=>{if("__ngUnwrap__"===n)return e;!1===e(n)&&(n.preventDefault(),n.returnValue=!1)}}let or=(()=>{class e{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new gi(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case Ja.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new po(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case Ja.ShadowDom:return new aa(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=jr(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(Nt(ct),Nt(gt),Nt(mg))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac}),e})();class gi{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,t){return t?document.createElementNS(Gt[t]||t,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,t){(Ya(n)?n.content:n).appendChild(t)}insertBefore(n,t,r){n&&(Ya(n)?n.content:n).insertBefore(t,r)}removeChild(n,t){n&&n.removeChild(t)}selectRootElement(n,t){let r="string"==typeof n?document.querySelector(n):n;if(!r)throw new Error(`The selector "${n}" did not match any elements`);return t||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,r,i){if(i){t=i+":"+t;const o=Gt[i];o?n.setAttributeNS(o,t,r):n.setAttribute(t,r)}else n.setAttribute(t,r)}removeAttribute(n,t,r){if(r){const i=Gt[r];i?n.removeAttributeNS(i,t):n.removeAttribute(`${r}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,r,i){i&(ys.DashCase|ys.Important)?n.style.setProperty(t,r,i&ys.Important?"important":""):n.style[t]=r}removeStyle(n,t,r){r&ys.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,r){n[t]=r}setValue(n,t){n.nodeValue=t}listen(n,t,r){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,t,pi(r)):this.eventManager.addEventListener(n,t,pi(r))}}function Ya(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class po extends gi{constructor(n,t,r,i){super(n),this.component=r;const o=jr(i+"-"+r.id,r.styles,[]);t.addStyles(o),this.contentAttr=function _r(e){return"_ngcontent-%COMP%".replace(Ft,e)}(i+"-"+r.id),this.hostAttr=function hr(e){return"_nghost-%COMP%".replace(Ft,e)}(i+"-"+r.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,t){const r=super.createElement(n,t);return super.setAttribute(r,this.contentAttr,""),r}}class aa extends gi{constructor(n,t,r,i){super(n),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=jr(i.id,i.styles,[]);for(let d=0;d<o.length;d++){const f=document.createElement("style");f.textContent=o[d],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,r){return super.insertBefore(this.nodeOrShadowRoot(n),t,r)}removeChild(n,t){return super.removeChild(this.nodeOrShadowRoot(n),t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let Xa=(()=>{class e extends ht{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return e.\u0275fac=function(t){return new(t||e)(Nt(Rr))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac}),e})();const Sa=["alt","control","meta","shift"],Ko={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},eu={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let ws=(()=>{class e extends ht{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,r,i){const o=e.parseEventName(r),d=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>pc().onAndCancel(t,o.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=e._normalizeKey(r.pop());let d="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),d="code."),Sa.forEach(_=>{const w=r.indexOf(_);w>-1&&(r.splice(w,1),d+=_+".")}),d+=o,0!=r.length||0===o.length)return null;const g={};return g.domEventName=i,g.fullKey=d,g}static matchEventFullKeyCode(t,r){let i=Ko[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Sa.forEach(d=>{d!==i&&(0,eu[d])(t)&&(o+=d+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{e.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return e.\u0275fac=function(t){return new(t||e)(Nt(Rr))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac}),e})();const bz=[{provide:b1,useValue:BA},{provide:y1,useValue:function oZ(){ue.makeCurrent()},multi:!0},{provide:Rr,useFactory:function lZ(){return function dR(e){N0=e}(document),document},deps:[]}],cZ=YE(pN,"browser",bz),xz=new dn(""),wz=[{provide:bg,useClass:class Ye{addToWindow(n){Oi.getAngularTestability=(r,i=!0)=>{const o=n.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},Oi.getAllAngularTestabilities=()=>n.getAllTestabilities(),Oi.getAllAngularRootElements=()=>n.getAllRootElements(),Oi.frameworkStabilizers||(Oi.frameworkStabilizers=[]),Oi.frameworkStabilizers.push(r=>{const i=Oi.getAllAngularTestabilities();let o=i.length,d=!1;const f=function(g){d=d||g,o--,0==o&&r(d)};i.forEach(function(g){g.whenStable(f)})})}findTestabilityInTree(n,t,r){return null==t?null:n.getTestability(t)??(r?pc().isShadowRoot(t)?this.findTestabilityInTree(n,t.host,!0):this.findTestabilityInTree(n,t.parentElement,!0):null)}},deps:[]},{provide:A_,useClass:M1,deps:[Cr,T1,bg]},{provide:M1,useClass:M1,deps:[Cr,T1,bg]}],Cz=[{provide:Ip,useValue:"root"},{provide:ks,useFactory:function sZ(){return new ks},deps:[]},{provide:it,useClass:Xa,multi:!0,deps:[Rr,Cr,b1]},{provide:it,useClass:ws,multi:!0,deps:[Rr]},{provide:or,useClass:or,deps:[ct,gt,mg]},{provide:Lp,useExisting:or},{provide:vt,useExisting:gt},{provide:gt,useClass:gt,deps:[Rr]},{provide:ct,useClass:ct,deps:[it,Cr]},{provide:class lw{},useClass:Qe,deps:[]},[]];let Sz=(()=>{class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:mg,useValue:t.appId},{provide:Pe,useExisting:mg},He]}}}return e.\u0275fac=function(t){return new(t||e)(Nt(xz,12))},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({providers:[...Cz,...wz],imports:[Rl,gN]}),e})(),Dz=(()=>{class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return e.\u0275fac=function(t){return new(t||e)(Nt(Rr))},e.\u0275prov=Jt({token:e,factory:function(t){let r=null;return r=t?new t:function dZ(){return new Dz(Nt(Rr))}(),r},providedIn:"root"}),e})();typeof window<"u"&&window;let yF=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Jt({token:e,factory:function(t){let r=null;return r=t?new(t||e):Nt(Ez),r},providedIn:"root"}),e})(),Ez=(()=>{class e extends yF{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case Ai.NONE:return r;case Ai.HTML:return nc(r,"HTML")?Os(r):GS(this._doc,String(r)).toString();case Ai.STYLE:return nc(r,"Style")?Os(r):r;case Ai.SCRIPT:if(nc(r,"Script"))return Os(r);throw new Error("unsafe value used in a script context");case Ai.URL:return nc(r,"URL")?Os(r):gm(String(r));case Ai.RESOURCE_URL:if(nc(r,"ResourceURL"))return Os(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function U0(e){return new RS(e)}(t)}bypassSecurityTrustStyle(t){return function Dp(e){return new LS(e)}(t)}bypassSecurityTrustScript(t){return function kS(e){return new H0(e)}(t)}bypassSecurityTrustUrl(t){return function G0(e){return new fR(e)}(t)}bypassSecurityTrustResourceUrl(t){return function pm(e){return new OS(e)}(t)}}return e.\u0275fac=function(t){return new(t||e)(Nt(Rr))},e.\u0275prov=Jt({token:e,factory:function(t){let r=null;return r=t?new t:function _Z(e){return new Ez(e.get(Rr))}(Nt(Ga)),r},providedIn:"root"}),e})();function Az(e,n,t,r,i,o,d){try{var f=e[o](d),g=f.value}catch(_){return void t(_)}f.done?n(g):Promise.resolve(g).then(r,i)}function qA(e){return function(){var n=this,t=arguments;return new Promise(function(r,i){var o=e.apply(n,t);function d(g){Az(o,r,i,d,f,"next",g)}function f(g){Az(o,r,i,d,f,"throw",g)}d(void 0)})}}function er(...e){return dr(e,zu(e))}class yZ extends ye{constructor(n,t){super()}schedule(n,t=0){return this}}const JA={setInterval(e,n,...t){const{delegate:r}=JA;return r?.setInterval?r.setInterval(e,n,...t):setInterval(e,n,...t)},clearInterval(e){const{delegate:n}=JA;return(n?.clearInterval||clearInterval)(e)},delegate:void 0};class bF extends yZ{constructor(n,t){super(n,t),this.scheduler=n,this.work=t,this.pending=!1}schedule(n,t=0){var r;if(this.closed)return this;this.state=n;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(n,t,r=0){return JA.setInterval(n.flush.bind(n,this),r)}recycleAsyncId(n,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&JA.clearInterval(t)}execute(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(n,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,t){let i,r=!1;try{this.work(n)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:n,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,_e(r,this),null!=n&&(this.id=this.recycleAsyncId(t,n,null)),this.delay=null,super.unsubscribe()}}}const Iz={now:()=>(Iz.delegate||Date).now(),delegate:void 0};class dw{constructor(n,t=dw.now){this.schedulerActionCtor=n,this.now=t}schedule(n,t=0,r){return new this.schedulerActionCtor(this,n).schedule(r,t)}}dw.now=Iz.now;class xF extends dw{constructor(n,t=dw.now){super(n,t),this.actions=[],this._active=!1}flush(n){const{actions:t}=this;if(this._active)return void t.push(n);let r;this._active=!0;do{if(r=n.execute(n.state,n.delay))break}while(n=t.shift());if(this._active=!1,r){for(;n=t.shift();)n.unsubscribe();throw r}}}const hw=new xF(bF),bZ=hw,Pz={leading:!0,trailing:!1};function Rz(e=0,n,t=bZ){let r=-1;return null!=n&&(sh(n)?t=n:r=n),new N(i=>{let o=function wZ(e){return e instanceof Date&&!isNaN(e)}(e)?+e-t.now():e;o<0&&(o=0);let d=0;return t.schedule(function(){i.closed||(i.next(d++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function ul(e,n){return ge((t,r)=>{let i=null,o=0,d=!1;const f=()=>d&&!i&&r.complete();t.subscribe(Ce(r,g=>{i?.unsubscribe();let _=0;const w=o++;Ea(e(g,w)).subscribe(i=Ce(r,S=>r.next(n?n(g,S,w,_++):S),()=>{i=null,f()}))},()=>{d=!0,f()}))})}class wF{constructor(n){this.changes=n}static of(n){return new wF(n)}notEmpty(n){if(this.changes[n]){const t=this.changes[n].currentValue;if(null!=t)return er(t)}return Aa}has(n){return this.changes[n]?er(this.changes[n].currentValue):Aa}notFirst(n){return this.changes[n]&&!this.changes[n].isFirstChange()?er(this.changes[n].currentValue):Aa}notFirstAndEmpty(n){if(this.changes[n]&&!this.changes[n].isFirstChange()){const t=this.changes[n].currentValue;if(null!=t)return er(t)}return Aa}}const Lz=new dn("NGX_ECHARTS_CONFIG");let Og=(()=>{class e{constructor(t,r,i){this.el=r,this.ngZone=i,this.autoResize=!0,this.loadingType="default",this.chartInit=new En,this.optionsError=new En,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartPieSelectChanged=this.createLazyEvent("pieselectchanged"),this.chartPieSelected=this.createLazyEvent("pieselected"),this.chartPieUnselected=this.createLazyEvent("pieunselected"),this.chartMapSelectChanged=this.createLazyEvent("mapselectchanged"),this.chartMapSelected=this.createLazyEvent("mapselected"),this.chartMapUnselected=this.createLazyEvent("mapunselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartFocusNodeAdjacency=this.createLazyEvent("focusnodeadjacency"),this.chartUnfocusNodeAdjacency=this.createLazyEvent("unfocusnodeadjacency"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.animationFrameID=null,this.resize$=new se,this.echarts=t.echarts}ngOnChanges(t){const r=wF.of(t);r.notFirstAndEmpty("options").subscribe(i=>this.onOptionsChange(i)),r.notFirstAndEmpty("merge").subscribe(i=>this.setOption(i)),r.has("loading").subscribe(i=>this.toggleLoading(!!i)),r.notFirst("theme").subscribe(()=>this.refreshChart())}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe(function CZ(e,n=hw,t=Pz){const r=Rz(e,n);return function xZ(e,n=Pz){return ge((t,r)=>{const{leading:i,trailing:o}=n;let d=!1,f=null,g=null,_=!1;const w=()=>{g?.unsubscribe(),g=null,o&&(V(),_&&r.complete())},S=()=>{g=null,_&&r.complete()},k=ne=>g=Ea(e(ne)).subscribe(Ce(r,w,S)),V=()=>{if(d){d=!1;const ne=f;f=null,r.next(ne),!_&&k(ne)}};t.subscribe(Ce(r,ne=>{d=!0,f=ne,(!g||g.closed)&&(i?V():k(ne))},()=>{_=!0,(!(o&&d&&g)||g.closed)&&r.complete()}))})}(()=>r,t)}(100,hw,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(()=>{this.animationFrameID=window.requestAnimationFrame(()=>this.resize$.next())})),this.resizeOb.observe(this.el.nativeElement))}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(t){this.chart&&(t?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading())}setOption(t,r){if(this.chart)try{this.chart.setOption(t,r)}catch(i){console.error(i),this.optionsError.emit(i)}}refreshChart(){var t=this;return qA(function*(){t.dispose(),yield t.initChart()})()}createChart(){const t=this.el.nativeElement;if(window&&window.getComputedStyle){const r=window.getComputedStyle(t,null).getPropertyValue("height");(!r||"0px"===r)&&(!t.style.height||"0px"===t.style.height)&&(t.style.height="400px")}return this.ngZone.runOutsideAngular(()=>("function"==typeof this.echarts?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:i})=>i(t,this.theme,this.initOpts)))}initChart(){var t=this;return qA(function*(){yield t.onOptionsChange(t.options),t.merge&&t.chart&&t.setOption(t.merge)})()}onOptionsChange(t){var r=this;return qA(function*(){!t||(r.chart||(r.chart=yield r.createChart(),r.chartInit.emit(r.chart)),r.setOption(r.options,!0))})()}createLazyEvent(t){return this.chartInit.pipe(ul(r=>new N(i=>(r.on(t,o=>this.ngZone.run(()=>i.next(o))),()=>{this.chart&&(this.chart.isDisposed()||r.off(t))}))))}}return e.\u0275fac=function(t){return new(t||e)(qe(Lz),qe(Or),qe(Cr))},e.\u0275dir=Sn({type:e,selectors:[["echarts"],["","echarts",""]],inputs:{options:"options",theme:"theme",loading:"loading",initOpts:"initOpts",merge:"merge",autoResize:"autoResize",loadingType:"loadingType",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartPieSelectChanged:"chartPieSelectChanged",chartPieSelected:"chartPieSelected",chartPieUnselected:"chartPieUnselected",chartMapSelectChanged:"chartMapSelectChanged",chartMapSelected:"chartMapSelected",chartMapUnselected:"chartMapUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartFocusNodeAdjacency:"chartFocusNodeAdjacency",chartUnfocusNodeAdjacency:"chartUnfocusNodeAdjacency",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],features:[ba]}),e})(),SZ=(()=>{class e{static forRoot(t){return{ngModule:e,providers:[{provide:Lz,useValue:t}]}}static forChild(){return{ngModule:e}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({}),e})();const{isArray:DZ}=Array,{getPrototypeOf:MZ,prototype:TZ,keys:EZ}=Object;function Oz(e){if(1===e.length){const n=e[0];if(DZ(n))return{args:n,keys:null};if(function AZ(e){return e&&"object"==typeof e&&MZ(e)===TZ}(n)){const t=EZ(n);return{args:t.map(r=>n[r]),keys:t}}}return{args:e,keys:null}}const{isArray:IZ}=Array;function CF(e){return Ie(n=>function PZ(e,n){return IZ(n)?e(...n):e(n)}(e,n))}function kz(e,n){return e.reduce((t,r,i)=>(t[r]=n[i],t),{})}function Nz(...e){const n=Wl(e),{args:t,keys:r}=Oz(e),i=new N(o=>{const{length:d}=t;if(!d)return void o.complete();const f=new Array(d);let g=d,_=d;for(let w=0;w<d;w++){let S=!1;Ea(t[w]).subscribe(Ce(o,k=>{S||(S=!0,_--),f[w]=k},()=>g--,void 0,()=>{(!g||!S)&&(_||o.next(r?kz(r,f):f),o.complete())}))}});return n?i.pipe(CF(n)):i}let Fz=(()=>{class e{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return e.\u0275fac=function(t){return new(t||e)(qe(Gc),qe(Or))},e.\u0275dir=Sn({type:e}),e})(),kg=(()=>{class e extends Fz{}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Ni(e)))(r||e)}}(),e.\u0275dir=Sn({type:e,features:[Gn]}),e})();const Qo=new dn("NgValueAccessor"),LZ={provide:Qo,useExisting:kr(()=>fw),multi:!0},kZ=new dn("CompositionEventMode");let fw=(()=>{class e extends Fz{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function OZ(){const e=pc()?pc().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return e.\u0275fac=function(t){return new(t||e)(qe(Gc),qe(Or),qe(kZ,8))},e.\u0275dir=Sn({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&It("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[Vr([LZ]),Gn]}),e})();function Df(e){return null==e||("string"==typeof e||Array.isArray(e))&&0===e.length}function Vz(e){return null!=e&&"number"==typeof e.length}const go=new dn("NgValidators"),Mf=new dn("NgAsyncValidators"),FZ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Tu{static min(n){return zz(n)}static max(n){return Hz(n)}static required(n){return function Uz(e){return Df(e.value)?{required:!0}:null}(n)}static requiredTrue(n){return function Gz(e){return!0===e.value?null:{required:!0}}(n)}static email(n){return function Wz(e){return Df(e.value)||FZ.test(e.value)?null:{email:!0}}(n)}static minLength(n){return function jz(e){return n=>Df(n.value)||!Vz(n.value)?null:n.value.length<e?{minlength:{requiredLength:e,actualLength:n.value.length}}:null}(n)}static maxLength(n){return function Zz(e){return n=>Vz(n.value)&&n.value.length>e?{maxlength:{requiredLength:e,actualLength:n.value.length}}:null}(n)}static pattern(n){return function Yz(e){if(!e)return eI;let n,t;return"string"==typeof e?(t="","^"!==e.charAt(0)&&(t+="^"),t+=e,"$"!==e.charAt(e.length-1)&&(t+="$"),n=new RegExp(t)):(t=e.toString(),n=e),r=>{if(Df(r.value))return null;const i=r.value;return n.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(n)}static nullValidator(n){return null}static compose(n){return Jz(n)}static composeAsync(n){return eH(n)}}function zz(e){return n=>{if(Df(n.value)||Df(e))return null;const t=parseFloat(n.value);return!isNaN(t)&&t<e?{min:{min:e,actual:n.value}}:null}}function Hz(e){return n=>{if(Df(n.value)||Df(e))return null;const t=parseFloat(n.value);return!isNaN(t)&&t>e?{max:{max:e,actual:n.value}}:null}}function eI(e){return null}function Xz(e){return null!=e}function $z(e){return Jh(e)?dr(e):e}function Kz(e){let n={};return e.forEach(t=>{n=null!=t?{...n,...t}:n}),0===Object.keys(n).length?null:n}function Qz(e,n){return n.map(t=>t(e))}function qz(e){return e.map(n=>function BZ(e){return!e.validate}(n)?n:t=>n.validate(t))}function Jz(e){if(!e)return null;const n=e.filter(Xz);return 0==n.length?null:function(t){return Kz(Qz(t,n))}}function SF(e){return null!=e?Jz(qz(e)):null}function eH(e){if(!e)return null;const n=e.filter(Xz);return 0==n.length?null:function(t){return Nz(Qz(t,n).map($z)).pipe(Ie(Kz))}}function DF(e){return null!=e?eH(qz(e)):null}function tH(e,n){return null===e?[n]:Array.isArray(e)?[...e,n]:[e,n]}function nH(e){return e._rawValidators}function rH(e){return e._rawAsyncValidators}function MF(e){return e?Array.isArray(e)?e:[e]:[]}function tI(e,n){return Array.isArray(e)?e.includes(n):e===n}function iH(e,n){const t=MF(n);return MF(e).forEach(i=>{tI(t,i)||t.push(i)}),t}function aH(e,n){return MF(n).filter(t=>!tI(e,t))}class oH{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=SF(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=DF(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,t){return!!this.control&&this.control.hasError(n,t)}getError(n,t){return this.control?this.control.getError(n,t):null}}class zs extends oH{get formDirective(){return null}get path(){return null}}class Eu extends oH{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class sH{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Au=(()=>{class e extends sH{constructor(t){super(t)}}return e.\u0275fac=function(t){return new(t||e)(qe(Eu,2))},e.\u0275dir=Sn({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&ii("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Gn]}),e})(),lH=(()=>{class e extends sH{constructor(t){super(t)}}return e.\u0275fac=function(t){return new(t||e)(qe(zs,10))},e.\u0275dir=Sn({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&ii("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Gn]}),e})();const pw="VALID",rI="INVALID",iy="PENDING",gw="DISABLED";function IF(e){return(iI(e)?e.validators:e)||null}function uH(e){return Array.isArray(e)?SF(e):e||null}function PF(e,n){return(iI(n)?n.asyncValidators:e)||null}function dH(e){return Array.isArray(e)?DF(e):e||null}function iI(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function hH(e,n,t){const r=e.controls;if(!(n?Object.keys(r):r).length)throw new an(1e3,"");if(!r[t])throw new an(1001,"")}function fH(e,n,t){e._forEachChild((r,i)=>{if(void 0===t[i])throw new an(1002,"")})}class aI{constructor(n,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=t,this._composedValidatorFn=uH(this._rawValidators),this._composedAsyncValidatorFn=dH(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===pw}get invalid(){return this.status===rI}get pending(){return this.status==iy}get disabled(){return this.status===gw}get enabled(){return this.status!==gw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=uH(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=dH(n)}addValidators(n){this.setValidators(iH(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(iH(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(aH(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(aH(n,this._rawAsyncValidators))}hasValidator(n){return tI(this._rawValidators,n)}hasAsyncValidator(n){return tI(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=iy,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=gw,this.errors=null,this._forEachChild(r=>{r.disable({...n,onlySelf:!0})}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=pw,this._forEachChild(r=>{r.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pw||this.status===iy)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?gw:pw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=iy,this._hasOwnPendingAsyncValidator=!0;const t=$z(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,t={}){this.errors=n,this._updateControlsErrors(!1!==t.emitEvent)}get(n){let t=n;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(n,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[n]:null}hasError(n,t){return!!this.getError(n,t)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new En,this.statusChanges=new En}_calculateStatus(){return this._allControlsDisabled()?gw:this.errors?rI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(iy)?iy:this._anyControlsHaveStatus(rI)?rI:pw}_anyControlsHaveStatus(n){return this._anyControls(t=>t.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){iI(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}}class ay extends aI{constructor(n,t,r){super(IF(t),PF(r,t)),this.controls=n,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,t){return this.controls[n]?this.controls[n]:(this.controls[n]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(n,t,r={}){this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(n,t={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(n,t,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],t&&this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,t={}){fH(this,0,n),Object.keys(n).forEach(r=>{hH(this,!0,r),this.controls[r].setValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(n,t={}){null!=n&&(Object.keys(n).forEach(r=>{const i=this.controls[r];i&&i.patchValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(n={},t={}){this._forEachChild((r,i)=>{r.reset(n[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(n,t,r)=>(n[r]=t.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&n(r,t)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&n(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(n,t){let r=n;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}class pH extends ay{}function oI(e,n){return[...n.path,e]}function vw(e,n){RF(e,n),n.valueAccessor.writeValue(e.value),e.disabled&&n.valueAccessor.setDisabledState?.(!0),function ZZ(e,n){n.valueAccessor.registerOnChange(t=>{e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&gH(e,n)})}(e,n),function XZ(e,n){const t=(r,i)=>{n.valueAccessor.writeValue(r),i&&n.viewToModelUpdate(r)};e.registerOnChange(t),n._registerOnDestroy(()=>{e._unregisterOnChange(t)})}(e,n),function YZ(e,n){n.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&gH(e,n),"submit"!==e.updateOn&&e.markAsTouched()})}(e,n),function jZ(e,n){if(n.valueAccessor.setDisabledState){const t=r=>{n.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(t),n._registerOnDestroy(()=>{e._unregisterOnDisabledChange(t)})}}(e,n)}function sI(e,n,t=!0){const r=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(r),n.valueAccessor.registerOnTouched(r)),cI(e,n),e&&(n._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function lI(e,n){e.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(n)})}function RF(e,n){const t=nH(e);null!==n.validator?e.setValidators(tH(t,n.validator)):"function"==typeof t&&e.setValidators([t]);const r=rH(e);null!==n.asyncValidator?e.setAsyncValidators(tH(r,n.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();lI(n._rawValidators,i),lI(n._rawAsyncValidators,i)}function cI(e,n){let t=!1;if(null!==e){if(null!==n.validator){const i=nH(e);if(Array.isArray(i)&&i.length>0){const o=i.filter(d=>d!==n.validator);o.length!==i.length&&(t=!0,e.setValidators(o))}}if(null!==n.asyncValidator){const i=rH(e);if(Array.isArray(i)&&i.length>0){const o=i.filter(d=>d!==n.asyncValidator);o.length!==i.length&&(t=!0,e.setAsyncValidators(o))}}}const r=()=>{};return lI(n._rawValidators,r),lI(n._rawAsyncValidators,r),t}function gH(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function vH(e,n){RF(e,n)}function LF(e,n){if(!e.hasOwnProperty("model"))return!1;const t=e.model;return!!t.isFirstChange()||!Object.is(n,t.currentValue)}function _H(e,n){e._syncPendingControls(),n.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function OF(e,n){if(!n)return null;let t,r,i;return Array.isArray(n),n.forEach(o=>{o.constructor===fw?t=o:function QZ(e){return Object.getPrototypeOf(e.constructor)===kg}(o)?r=o:i=o}),i||r||t||null}const JZ={provide:zs,useExisting:kr(()=>_w)},mw=(()=>Promise.resolve())();let _w=(()=>{class e extends zs{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new En,this.form=new ay({},SF(t),DF(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){mw.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),vw(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){mw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){mw.then(()=>{const r=this._findContainer(t.path),i=new ay({});vH(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){mw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){mw.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,_H(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return e.\u0275fac=function(t){return new(t||e)(qe(go,10),qe(Mf,10))},e.\u0275dir=Sn({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&It("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Vr([JZ]),Gn]}),e})();function yH(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}function bH(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const tu=class extends aI{constructor(n=null,t,r){super(IF(t),PF(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),iI(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=bH(n)?n.value:n)}setValue(n,t={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(n,t={}){this.setValue(n,t)}reset(n=this.defaultValue,t={}){this._applyFormState(n),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){yH(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){yH(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){bH(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},n7={provide:Eu,useExisting:kr(()=>Iu)},CH=(()=>Promise.resolve())();let Iu=(()=>{class e extends Eu{constructor(t,r,i,o,d){super(),this._changeDetectorRef=d,this.control=new tu,this._registered=!1,this.update=new En,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=OF(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),LF(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){vw(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){CH.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&qc(r);CH.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?oI(t,this._parent):[t]}}return e.\u0275fac=function(t){return new(t||e)(qe(zs,9),qe(go,10),qe(Mf,10),qe(Qo,10),qe(Pi,8))},e.\u0275dir=Sn({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Vr([n7]),Gn,ba]}),e})(),SH=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Sn({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})();const r7={provide:Qo,useExisting:kr(()=>kF),multi:!0};let kF=(()=>{class e extends kg{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Ni(e)))(r||e)}}(),e.\u0275dir=Sn({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&It("input",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},features:[Vr([r7]),Gn]}),e})(),DH=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({}),e})();const NF=new dn("NgModelWithFormControlWarning"),s7={provide:Eu,useExisting:kr(()=>FF)};let FF=(()=>{class e extends Eu{constructor(t,r,i,o){super(),this._ngModelWarningConfig=o,this.update=new En,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=OF(0,i)}set isDisabled(t){}ngOnChanges(t){if(this._isControlChanged(t)){const r=t.form.previousValue;r&&sI(r,this,!1),vw(this.form,this),this.form.updateValueAndValidity({emitEvent:!1})}LF(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&sI(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return e._ngModelWarningSentOnce=!1,e.\u0275fac=function(t){return new(t||e)(qe(go,10),qe(Mf,10),qe(Qo,10),qe(NF,8))},e.\u0275dir=Sn({type:e,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Vr([s7]),Gn,ba]}),e})();const l7={provide:zs,useExisting:kr(()=>oy)};let oy=(()=>{class e extends zs{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new En,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(cI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return vw(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){sI(t.control||null,t,!1),function qZ(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,_H(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(sI(r||null,t),(e=>e instanceof tu)(i)&&(vw(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);vH(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function $Z(e,n){return cI(e,n)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){RF(this.form,this),this._oldForm&&cI(this._oldForm,this)}_checkFormPresent(){}}return e.\u0275fac=function(t){return new(t||e)(qe(go,10),qe(Mf,10))},e.\u0275dir=Sn({type:e,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&It("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Vr([l7]),Gn,ba]}),e})();const d7={provide:Eu,useExisting:kr(()=>zF)};let zF=(()=>{class e extends Eu{constructor(t,r,i,o,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new En,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=OF(0,o)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),LF(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return oI(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return e._ngModelWarningSentOnce=!1,e.\u0275fac=function(t){return new(t||e)(qe(zs,13),qe(go,10),qe(Mf,10),qe(Qo,10),qe(NF,8))},e.\u0275dir=Sn({type:e,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Vr([d7]),Gn,ba]}),e})();function RH(e){return"number"==typeof e?e:parseFloat(e)}let Ng=(()=>{class e{constructor(){this._validator=eI}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):eI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Sn({type:e,features:[ba]}),e})();const _7={provide:go,useExisting:kr(()=>GF),multi:!0};let GF=(()=>{class e extends Ng{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>RH(t),this.createValidator=t=>Hz(t)}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Ni(e)))(r||e)}}(),e.\u0275dir=Sn({type:e,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&Pr("max",r._enabled?r.max:null)},inputs:{max:"max"},features:[Vr([_7]),Gn]}),e})();const y7={provide:go,useExisting:kr(()=>WF),multi:!0};let WF=(()=>{class e extends Ng{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>RH(t),this.createValidator=t=>zz(t)}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Ni(e)))(r||e)}}(),e.\u0275dir=Sn({type:e,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&Pr("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[Vr([y7]),Gn]}),e})(),FH=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[DH]}),e})(),BH=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[FH]}),e})(),ZF=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:NF,useValue:t.warnOnNgModelWithFormControl}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[FH]}),e})();class VH extends aI{constructor(n,t,r){super(IF(t),PF(r,t)),this.controls=n,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[this._adjustIndex(n)]}push(n,t={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(n,t,r={}){this.controls.splice(n,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(n,t={}){let r=this._adjustIndex(n);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(n,t,r={}){let i=this._adjustIndex(n);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,t={}){fH(this,0,n),n.forEach((r,i)=>{hH(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(n,t={}){null!=n&&(n.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(n=[],t={}){this._forEachChild((r,i)=>{r.reset(n[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(n=>n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_adjustIndex(n){return n<0?n+this.length:n}_syncPendingControls(){let n=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){this.controls.forEach((t,r)=>{n(t,r)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(t=>t.enabled&&n(t))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}_find(n){return this.at(n)??null}}function zH(e){return!!e&&(void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn)}let M7=(()=>{class e{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new e;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let o={};return zH(r)?o=r:null!==r&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new ay(i,o)}record(t,r=null){const i=this._reduceControls(t);return new pH(i,r)}control(t,r,i){let o={};return this.useNonNullable?(zH(r)?o=r:(o.validators=r,o.asyncValidators=i),new tu(t,{...o,nonNullable:!0})):new tu(t,r,i)}array(t,r,i){const o=t.map(d=>this._createControl(d));return new VH(o,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof tu||t instanceof aI?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:ZF}),e})();class Ll extends se{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){const{hasError:n,thrownError:t,_value:r}=this;if(n)throw t;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}}const dI=Se(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function YF(...e){const n=zu(e),t=Wl(e),{args:r,keys:i}=Oz(e);if(0===r.length)return dr([],n);const o=new N(function T7(e,n,t=T){return r=>{HH(n,()=>{const{length:i}=e,o=new Array(i);let d=i,f=i;for(let g=0;g<i;g++)HH(n,()=>{const _=dr(e[g],n);let w=!1;_.subscribe(Ce(r,S=>{o[g]=S,w||(w=!0,f--),f||r.next(t(o.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,n,i?d=>kz(i,d):T));return t?o.pipe(CF(t)):o}function HH(e,n,t){e?Ms(t,e,n):n()}function hI(...e){return function E7(){return $s(1)}()(dr(e,zu(e)))}function yw(e){return new N(n=>{Ea(e()).subscribe(n)})}function sy(e,n){const t=le(e)?e:()=>e,r=i=>i.error(t());return new N(n?i=>n.schedule(r,0,i):r)}function XF(){return ge((e,n)=>{let t=null;e._refCount++;const r=Ce(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(t=null);const i=e._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),n.unsubscribe()});e.subscribe(r),r.closed||(t=e.connect())})}class UH extends N{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,fe(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new ye;const t=this.getSubject();n.add(this.source.subscribe(Ce(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=ye.EMPTY)}return n}refCount(){return XF()(this)}}function vo(e){return e<=0?()=>Aa:ge((n,t)=>{let r=0;n.subscribe(Ce(t,i=>{++r<=e&&(t.next(i),e<=r&&t.complete())}))})}function Hs(...e){const n=zu(e);return ge((t,r)=>{(n?hI(e,t,n):hI(e,t)).subscribe(r)})}function Ki(e,n){return ge((t,r)=>{let i=0;t.subscribe(Ce(r,o=>e.call(n,o,i++)&&r.next(o)))})}function fI(e){return ge((n,t)=>{let r=!1;n.subscribe(Ce(t,i=>{r=!0,t.next(i)},()=>{r||t.next(e),t.complete()}))})}function GH(e=A7){return ge((n,t)=>{let r=!1;n.subscribe(Ce(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(e())))})}function A7(){return new dI}function Tf(e,n){const t=arguments.length>=2;return r=>r.pipe(e?Ki((i,o)=>e(i,o,r)):T,vo(1),t?fI(n):GH(()=>new dI))}function Ef(e,n){return le(n)?Fa(e,n,1):Fa(e,1)}function mo(e,n,t){const r=le(e)||n||t?{next:e,error:n,complete:t}:e;return r?ge((i,o)=>{var d;null===(d=r.subscribe)||void 0===d||d.call(r);let f=!0;i.subscribe(Ce(o,g=>{var _;null===(_=r.next)||void 0===_||_.call(r,g),o.next(g)},()=>{var g;f=!1,null===(g=r.complete)||void 0===g||g.call(r),o.complete()},g=>{var _;f=!1,null===(_=r.error)||void 0===_||_.call(r,g),o.error(g)},()=>{var g,_;f&&(null===(g=r.unsubscribe)||void 0===g||g.call(r)),null===(_=r.finalize)||void 0===_||_.call(r)}))}):T}function Hd(e){return ge((n,t)=>{let o,r=null,i=!1;r=n.subscribe(Ce(t,void 0,void 0,d=>{o=Ea(e(d,Hd(e)(n))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function I7(e,n,t,r,i){return(o,d)=>{let f=t,g=n,_=0;o.subscribe(Ce(d,w=>{const S=_++;g=f?e(g,w,S):(f=!0,w),r&&d.next(g)},i&&(()=>{f&&d.next(g),d.complete()})))}}function WH(e,n){return ge(I7(e,n,arguments.length>=2,!0))}function $F(e){return e<=0?()=>Aa:ge((n,t)=>{let r=[];n.subscribe(Ce(t,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function jH(e,n){const t=arguments.length>=2;return r=>r.pipe(e?Ki((i,o)=>e(i,o,r)):T,$F(1),t?fI(n):GH(()=>new dI))}function ZH(e,n=!1){return ge((t,r)=>{let i=0;t.subscribe(Ce(r,o=>{const d=e(o,i++);(d||n)&&r.next(o),!d&&r.complete()}))})}function KF(e){return Ie(()=>e)}function pI(e){return ge((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}const vi="primary",bw=Symbol("RouteTitle");class P7{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ly(e){return new P7(e)}function R7(e,n,t){const r=t.path.split("/");if(r.length>e.length||"full"===t.pathMatch&&(n.hasChildren()||r.length<e.length))return null;const i={};for(let o=0;o<r.length;o++){const d=r[o],f=e[o];if(d.startsWith(":"))i[d.substring(1)]=f;else if(d!==f.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function Pu(e,n){const t=e?Object.keys(e):void 0,r=n?Object.keys(n):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!YH(e[i],n[i]))return!1;return!0}function YH(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;const t=[...e].sort(),r=[...n].sort();return t.every((i,o)=>r[o]===i)}return e===n}function XH(e){return Array.prototype.concat.apply([],e)}function $H(e){return e.length>0?e[e.length-1]:null}function ss(e,n){for(const t in e)e.hasOwnProperty(t)&&n(e[t],t)}function Af(e){return Mx(e)?e:Jh(e)?dr(Promise.resolve(e)):er(e)}const k7={exact:function qH(e,n,t){if(!Bg(e.segments,n.segments)||!gI(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children)if(!e.children[r]||!qH(e.children[r],n.children[r],t))return!1;return!0},subset:JH},KH={exact:function N7(e,n){return Pu(e,n)},subset:function F7(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>YH(e[t],n[t]))},ignored:()=>!0};function QH(e,n,t){return k7[t.paths](e.root,n.root,t.matrixParams)&&KH[t.queryParams](e.queryParams,n.queryParams)&&!("exact"===t.fragment&&e.fragment!==n.fragment)}function JH(e,n,t){return eU(e,n,n.segments,t)}function eU(e,n,t,r){if(e.segments.length>t.length){const i=e.segments.slice(0,t.length);return!(!Bg(i,t)||n.hasChildren()||!gI(i,t,r))}if(e.segments.length===t.length){if(!Bg(e.segments,t)||!gI(e.segments,t,r))return!1;for(const i in n.children)if(!e.children[i]||!JH(e.children[i],n.children[i],r))return!1;return!0}{const i=t.slice(0,e.segments.length),o=t.slice(e.segments.length);return!!(Bg(e.segments,i)&&gI(e.segments,i,r)&&e.children[vi])&&eU(e.children[vi],n,o,r)}}function gI(e,n,t){return n.every((r,i)=>KH[t](e[i].parameters,r.parameters))}class Fg{constructor(n,t,r){this.root=n,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ly(this.queryParams)),this._queryParamMap}toString(){return z7.serialize(this)}}class xi{constructor(n,t){this.segments=n,this.children=t,this.parent=null,ss(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vI(this)}}class xw{constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ly(this.parameters)),this._parameterMap}toString(){return iU(this)}}function Bg(e,n){return e.length===n.length&&e.every((t,r)=>t.path===n[r].path)}let tU=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Jt({token:e,factory:function(){return new qF},providedIn:"root"}),e})();class qF{parse(n){const t=new $7(n);return new Fg(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){const t=`/${ww(n.root,!0)}`,r=function G7(e){const n=Object.keys(e).map(t=>{const r=e[t];return Array.isArray(r)?r.map(i=>`${mI(t)}=${mI(i)}`).join("&"):`${mI(t)}=${mI(r)}`}).filter(t=>!!t);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${t}${r}${"string"==typeof n.fragment?`#${function H7(e){return encodeURI(e)}(n.fragment)}`:""}`}}const z7=new qF;function vI(e){return e.segments.map(n=>iU(n)).join("/")}function ww(e,n){if(!e.hasChildren())return vI(e);if(n){const t=e.children[vi]?ww(e.children[vi],!1):"",r=[];return ss(e.children,(i,o)=>{o!==vi&&r.push(`${o}:${ww(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function V7(e,n){let t=[];return ss(e.children,(r,i)=>{i===vi&&(t=t.concat(n(r,i)))}),ss(e.children,(r,i)=>{i!==vi&&(t=t.concat(n(r,i)))}),t}(e,(r,i)=>i===vi?[ww(e.children[vi],!1)]:[`${i}:${ww(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[vi]?`${vI(e)}/${t[0]}`:`${vI(e)}/(${t.join("//")})`}}function nU(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mI(e){return nU(e).replace(/%3B/gi,";")}function JF(e){return nU(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _I(e){return decodeURIComponent(e)}function rU(e){return _I(e.replace(/\+/g,"%20"))}function iU(e){return`${JF(e.path)}${function U7(e){return Object.keys(e).map(n=>`;${JF(n)}=${JF(e[n])}`).join("")}(e.parameters)}`}const W7=/^[^\/()?;=#]+/;function yI(e){const n=e.match(W7);return n?n[0]:""}const j7=/^[^=?&#]+/,Y7=/^[^&#]+/;class $7{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xi([],{}):new xi([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(r[vi]=new xi(n,t)),r}parseSegment(){const n=yI(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new an(4009,!1);return this.capture(n),new xw(_I(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const t=yI(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=yI(this.remaining);i&&(r=i,this.capture(r))}n[_I(t)]=_I(r)}parseQueryParam(n){const t=function Z7(e){const n=e.match(j7);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function X7(e){const n=e.match(Y7);return n?n[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const i=rU(t),o=rU(r);if(n.hasOwnProperty(i)){let d=n[i];Array.isArray(d)||(d=[d],n[i]=d),d.push(o)}else n[i]=o}parseParens(n){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=yI(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new an(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=vi);const d=this.parseChildren();t[o]=1===Object.keys(d).length?d[vi]:new xi([],d),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new an(4011,!1)}}function e3(e){return e.segments.length>0?new xi([],{[vi]:e}):e}function bI(e){const n={};for(const r of Object.keys(e.children)){const o=bI(e.children[r]);(o.segments.length>0||o.hasChildren())&&(n[r]=o)}return function K7(e){if(1===e.numberOfChildren&&e.children[vi]){const n=e.children[vi];return new xi(e.segments.concat(n.segments),n.children)}return e}(new xi(e.segments,n))}function Vg(e){return e instanceof Fg}function J7(e,n,t,r,i){if(0===t.length)return cy(n.root,n.root,n.root,r,i);const o=function sU(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new oU(!0,0,e);let n=0,t=!1;const r=e.reduce((i,o,d)=>{if("object"==typeof o&&null!=o){if(o.outlets){const f={};return ss(o.outlets,(g,_)=>{f[_]="string"==typeof g?g.split("/"):g}),[...i,{outlets:f}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===d?(o.split("/").forEach((f,g)=>{0==g&&"."===f||(0==g&&""===f?t=!0:".."===f?n++:""!=f&&i.push(f))}),i):[...i,o]},[]);return new oU(t,n,r)}(t);return o.toRoot()?cy(n.root,n.root,new xi([],{}),r,i):function d(g){const _=function tY(e,n,t,r){if(e.isAbsolute)return new uy(n.root,!0,0);if(-1===r)return new uy(t,t===n.root,0);return function lU(e,n,t){let r=e,i=n,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new an(4005,!1);i=r.segments.length}return new uy(r,!1,i-o)}(t,r+(Cw(e.commands[0])?0:1),e.numberOfDoubleDots)}(o,n,e.snapshot?._urlSegment,g),w=_.processChildren?Dw(_.segmentGroup,_.index,o.commands):n3(_.segmentGroup,_.index,o.commands);return cy(n.root,_.segmentGroup,w,r,i)}(e.snapshot?._lastPathIndex)}function Cw(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Sw(e){return"object"==typeof e&&null!=e&&e.outlets}function cy(e,n,t,r,i){let d,o={};r&&ss(r,(g,_)=>{o[_]=Array.isArray(g)?g.map(w=>`${w}`):`${g}`}),d=e===n?t:aU(e,n,t);const f=e3(bI(d));return new Fg(f,o,i)}function aU(e,n,t){const r={};return ss(e.children,(i,o)=>{r[o]=i===n?t:aU(i,n,t)}),new xi(e.segments,r)}class oU{constructor(n,t,r){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=r,n&&r.length>0&&Cw(r[0]))throw new an(4003,!1);const i=r.find(Sw);if(i&&i!==$H(r))throw new an(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class uy{constructor(n,t,r){this.segmentGroup=n,this.processChildren=t,this.index=r}}function n3(e,n,t){if(e||(e=new xi([],{})),0===e.segments.length&&e.hasChildren())return Dw(e,n,t);const r=function rY(e,n,t){let r=0,i=n;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=t.length)return o;const d=e.segments[i],f=t[r];if(Sw(f))break;const g=`${f}`,_=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&_&&"object"==typeof _&&void 0===_.outlets){if(!uU(g,_,d))return o;r+=2}else{if(!uU(g,{},d))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,n,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const o=new xi(e.segments.slice(0,r.pathIndex),{});return o.children[vi]=new xi(e.segments.slice(r.pathIndex),e.children),Dw(o,0,i)}return r.match&&0===i.length?new xi(e.segments,{}):r.match&&!e.hasChildren()?r3(e,n,t):r.match?Dw(e,0,i):r3(e,n,t)}function Dw(e,n,t){if(0===t.length)return new xi(e.segments,{});{const r=function nY(e){return Sw(e[0])?e[0].outlets:{[vi]:e}}(t),i={};return ss(r,(o,d)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[d]=n3(e.children[d],n,o))}),ss(e.children,(o,d)=>{void 0===r[d]&&(i[d]=o)}),new xi(e.segments,i)}}function r3(e,n,t){const r=e.segments.slice(0,n);let i=0;for(;i<t.length;){const o=t[i];if(Sw(o)){const g=iY(o.outlets);return new xi(r,g)}if(0===i&&Cw(t[0])){r.push(new xw(e.segments[n].path,cU(t[0]))),i++;continue}const d=Sw(o)?o.outlets[vi]:`${o}`,f=i<t.length-1?t[i+1]:null;d&&f&&Cw(f)?(r.push(new xw(d,cU(f))),i+=2):(r.push(new xw(d,{})),i++)}return new xi(r,{})}function iY(e){const n={};return ss(e,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(n[r]=r3(new xi([],{}),0,t))}),n}function cU(e){const n={};return ss(e,(t,r)=>n[r]=`${t}`),n}function uU(e,n,t){return e==t.path&&Pu(n,t.parameters)}class Ud{constructor(n,t){this.id=n,this.url=t}}class a3 extends Ud{constructor(n,t,r="imperative",i=null){super(n,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class zg extends Ud{constructor(n,t,r){super(n,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class xI extends Ud{constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class dU extends Ud{constructor(n,t,r,i){super(n,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class aY extends Ud{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oY extends Ud{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sY extends Ud{constructor(n,t,r,i,o){super(n,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class lY extends Ud{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cY extends Ud{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uY{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class dY{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class hY{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fY{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pY{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gY{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hU{constructor(n,t,r){this.routerEvent=n,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class fU{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){const t=o3(n,this._root);return t?t.children.map(r=>r.value):[]}firstChild(n){const t=o3(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){const t=s3(n,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return s3(n,this._root).map(t=>t.value)}}function o3(e,n){if(e===n.value)return n;for(const t of n.children){const r=o3(e,t);if(r)return r}return null}function s3(e,n){if(e===n.value)return[n];for(const t of n.children){const r=s3(e,t);if(r.length)return r.unshift(n),r}return[]}class Gd{constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}}function dy(e){const n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}class pU extends fU{constructor(n,t){super(n),this.snapshot=t,l3(this,n)}toString(){return this.snapshot.toString()}}function gU(e,n){const t=function mY(e,n){const d=new wI([],{},{},"",{},vi,n,null,e.root,-1,{});return new mU("",new Gd(d,[]))}(e,n),r=new Ll([new xw("",{})]),i=new Ll({}),o=new Ll({}),d=new Ll({}),f=new Ll(""),g=new Hg(r,i,d,f,o,vi,n,t.root);return g.snapshot=t.root,new pU(new Gd(g,[]),t)}class Hg{constructor(n,t,r,i,o,d,f,g){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=d,this.component=f,this.title=this.data?.pipe(Ie(_=>_[bw]))??er(void 0),this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ie(n=>ly(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ie(n=>ly(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function vU(e,n="emptyOnly"){const t=e.pathFromRoot;let r=0;if("always"!==n)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function _Y(e){return e.reduce((n,t)=>({params:{...n.params,...t.params},data:{...n.data,...t.data},resolve:{...t.data,...n.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class wI{constructor(n,t,r,i,o,d,f,g,_,w,S,k){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=d,this.component=f,this.title=this.data?.[bw],this.routeConfig=g,this._urlSegment=_,this._lastPathIndex=w,this._correctedLastPathIndex=k??w,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ly(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ly(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class mU extends fU{constructor(n,t){super(t),this.url=n,l3(this,t)}toString(){return _U(this._root)}}function l3(e,n){n.value._routerState=e,n.children.forEach(t=>l3(e,t))}function _U(e){const n=e.children.length>0?` { ${e.children.map(_U).join(", ")} } `:"";return`${e.value}${n}`}function c3(e){if(e.snapshot){const n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,Pu(n.queryParams,t.queryParams)||e.queryParams.next(t.queryParams),n.fragment!==t.fragment&&e.fragment.next(t.fragment),Pu(n.params,t.params)||e.params.next(t.params),function L7(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!Pu(e[t],n[t]))return!1;return!0}(n.url,t.url)||e.url.next(t.url),Pu(n.data,t.data)||e.data.next(t.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function u3(e,n){const t=Pu(e.params,n.params)&&function B7(e,n){return Bg(e,n)&&e.every((t,r)=>Pu(t.parameters,n[r].parameters))}(e.url,n.url);return t&&!(!e.parent!=!n.parent)&&(!e.parent||u3(e.parent,n.parent))}function Mw(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=n.value;const i=function bY(e,n,t){return n.children.map(r=>{for(const i of t.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return Mw(e,r,i);return Mw(e,r)})}(e,n,t);return new Gd(r,i)}{if(e.shouldAttach(n.value)){const o=e.retrieve(n.value);if(null!==o){const d=o.route;return d.value._futureSnapshot=n.value,d.children=n.children.map(f=>Mw(e,f)),d}}const r=function xY(e){return new Hg(new Ll(e.url),new Ll(e.params),new Ll(e.queryParams),new Ll(e.fragment),new Ll(e.data),e.outlet,e.component,e)}(n.value),i=n.children.map(o=>Mw(e,o));return new Gd(r,i)}}const d3="ngNavigationCancelingError";function yU(e,n){const{redirectTo:t,navigationBehaviorOptions:r}=Vg(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,i=bU(!1,0,n);return i.url=t,i.navigationBehaviorOptions=r,i}function bU(e,n,t){const r=new Error("NavigationCancelingError: "+(e||""));return r[d3]=!0,r.cancellationCode=n,t&&(r.url=t),r}function xU(e){return wU(e)&&Vg(e.url)}function wU(e){return e&&e[d3]}class wY{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Tw,this.attachRef=null}}let Tw=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new wY,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const CI=!1;let h3=(()=>{class e{constructor(t,r,i,o,d){this.parentContexts=t,this.location=r,this.changeDetector=o,this.environmentInjector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new En,this.deactivateEvents=new En,this.attachEvents=new En,this.detachEvents=new En,this.name=i||vi,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new an(4012,CI);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new an(4012,CI);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new an(4012,CI);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new an(4013,CI);this._activatedRoute=t;const i=this.location,d=t._futureSnapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,g=new CY(t,f,i.injector);if(r&&function SY(e){return!!e.resolveComponentFactory}(r)){const _=r.resolveComponentFactory(d);this.activated=i.createComponent(_,i.length,g)}else this.activated=i.createComponent(d,{index:i.length,injector:g,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(qe(Tw),qe(as),ms("name"),qe(Pi),qe(sa))},e.\u0275dir=Sn({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),e})();class CY{constructor(n,t,r){this.route=n,this.childContexts=t,this.parent=r}get(n,t){return n===Hg?this.route:n===Tw?this.childContexts:this.parent.get(n,t)}}let f3=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=qn({type:e,selectors:[["ng-component"]],standalone:!0,features:[qT],decls:1,vars:0,template:function(t,r){1&t&&yn(0,"router-outlet")},dependencies:[h3],encapsulation:2}),e})();function CU(e,n){return e.providers&&!e._injector&&(e._injector=rf(e.providers,n,`Route: ${e.path}`)),e._injector??n}function g3(e){const n=e.children&&e.children.map(g3),t=n?{...e,children:n}:{...e};return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==vi&&(t.component=f3),t}function yc(e){return e.outlet||vi}function SU(e,n){const t=e.filter(r=>yc(r)===n);return t.push(...e.filter(r=>yc(r)!==n)),t}function Ew(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){const t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class AY{constructor(n,t,r,i){this.routeReuseStrategy=n,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(n){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,n),c3(this.futureState.root),this.activateChildRoutes(t,r,n)}deactivateChildRoutes(n,t,r){const i=dy(t);n.children.forEach(o=>{const d=o.value.outlet;this.deactivateRoutes(o,i[d],r),delete i[d]}),ss(i,(o,d)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(n,t,r){const i=n.value,o=t?t.value:null;if(i===o)if(i.component){const d=r.getContext(i.outlet);d&&this.deactivateChildRoutes(n,t,d.children)}else this.deactivateChildRoutes(n,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){const r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=dy(n);for(const d of Object.keys(o))this.deactivateRouteAndItsChildren(o[d],i);if(r&&r.outlet){const d=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:d,route:n,contexts:f})}}deactivateRouteAndOutlet(n,t){const r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=dy(n);for(const d of Object.keys(o))this.deactivateRouteAndItsChildren(o[d],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(n,t,r){const i=dy(t);n.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new gY(o.value.snapshot))}),n.children.length&&this.forwardEvent(new fY(n.value.snapshot))}activateRoutes(n,t,r){const i=n.value,o=t?t.value:null;if(c3(i),i===o)if(i.component){const d=r.getOrCreateContext(i.outlet);this.activateChildRoutes(n,t,d.children)}else this.activateChildRoutes(n,t,r);else if(i.component){const d=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),d.children.onOutletReAttached(f.contexts),d.attachRef=f.componentRef,d.route=f.route.value,d.outlet&&d.outlet.attach(f.componentRef,f.route.value),c3(f.route.value),this.activateChildRoutes(n,null,d.children)}else{const f=Ew(i.snapshot),g=f?.get(od)??null;d.attachRef=null,d.route=i,d.resolver=g,d.injector=f,d.outlet&&d.outlet.activateWith(i,d.injector),this.activateChildRoutes(n,null,d.children)}}else this.activateChildRoutes(n,null,r)}}class DU{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class SI{constructor(n,t){this.component=n,this.route=t}}function IY(e,n,t){const r=e._root;return Aw(r,n?n._root:null,t,[r.value])}function hy(e,n){const t=Symbol(),r=n.get(e,t);return r===t?"function"!=typeof e||function lh(e){return null!==Ba(e)}(e)?n.get(e):e:r}function Aw(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=dy(n);return e.children.forEach(d=>{(function RY(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,d=n?n.value:null,f=t?t.getContext(e.value.outlet):null;if(d&&o.routeConfig===d.routeConfig){const g=function LY(e,n,t){if("function"==typeof t)return t(e,n);switch(t){case"pathParamsChange":return!Bg(e.url,n.url);case"pathParamsOrQueryParamsChange":return!Bg(e.url,n.url)||!Pu(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!u3(e,n)||!Pu(e.queryParams,n.queryParams);default:return!u3(e,n)}}(d,o,o.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new DU(r)):(o.data=d.data,o._resolvedData=d._resolvedData),Aw(e,n,o.component?f?f.children:null:t,r,i),g&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new SI(f.outlet.component,d))}else d&&Iw(n,f,i),i.canActivateChecks.push(new DU(r)),Aw(e,null,o.component?f?f.children:null:t,r,i)})(d,o[d.value.outlet],t,r.concat([d.value]),i),delete o[d.value.outlet]}),ss(o,(d,f)=>Iw(d,t.getContext(f),i)),i}function Iw(e,n,t){const r=dy(e),i=e.value;ss(r,(o,d)=>{Iw(o,i.component?n?n.children.getContext(d):null:n,t)}),t.canDeactivateChecks.push(new SI(i.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,i))}function Pw(e){return"function"==typeof e}function v3(e){return e instanceof dI||"EmptyError"===e?.name}const DI=Symbol("INITIAL_VALUE");function fy(){return ul(e=>YF(e.map(n=>n.pipe(vo(1),Hs(DI)))).pipe(Ie(n=>{for(const t of n)if(!0!==t){if(t===DI)return DI;if(!1===t||t instanceof Fg)return t}return!0}),Ki(n=>n!==DI),vo(1)))}function MU(e){return function A(...e){return L(e)}(mo(n=>{if(Vg(n))throw yU(0,n)}),Ie(n=>!0===n))}const m3={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function TU(e,n,t,r,i){const o=_3(e,n,t);return o.matched?function KY(e,n,t,r){const i=n.canMatch;return i&&0!==i.length?er(i.map(d=>{const f=hy(d,e);return Af(function VY(e){return e&&Pw(e.canMatch)}(f)?f.canMatch(n,t):e.runInContext(()=>f(n,t)))})).pipe(fy(),MU()):er(!0)}(r=CU(n,r),n,t).pipe(Ie(d=>!0===d?o:{...m3})):er(o)}function _3(e,n,t){if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||t.length>0)?{...m3}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(n.matcher||R7)(t,e,n);if(!i)return{...m3};const o={};ss(i.posParams,(f,g)=>{o[g]=f.path});const d=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:d,positionalParamSegments:i.posParams??{}}}function MI(e,n,t,r,i="corrected"){if(t.length>0&&function JY(e,n,t){return t.some(r=>TI(e,n,r)&&yc(r)!==vi)}(e,t,r)){const d=new xi(n,function qY(e,n,t,r){const i={};i[vi]=r,r._sourceSegment=e,r._segmentIndexShift=n.length;for(const o of t)if(""===o.path&&yc(o)!==vi){const d=new xi([],{});d._sourceSegment=e,d._segmentIndexShift=n.length,i[yc(o)]=d}return i}(e,n,r,new xi(t,e.children)));return d._sourceSegment=e,d._segmentIndexShift=n.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function eX(e,n,t){return t.some(r=>TI(e,n,r))}(e,t,r)){const d=new xi(e.segments,function QY(e,n,t,r,i,o){const d={};for(const f of r)if(TI(e,t,f)&&!i[yc(f)]){const g=new xi([],{});g._sourceSegment=e,g._segmentIndexShift="legacy"===o?e.segments.length:n.length,d[yc(f)]=g}return{...i,...d}}(e,n,t,r,e.children,i));return d._sourceSegment=e,d._segmentIndexShift=n.length,{segmentGroup:d,slicedSegments:t}}const o=new xi(e.segments,e.children);return o._sourceSegment=e,o._segmentIndexShift=n.length,{segmentGroup:o,slicedSegments:t}}function TI(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path}function EU(e,n,t,r){return!!(yc(e)===r||r!==vi&&TI(n,t,e))&&("**"===e.path||_3(n,e,t).matched)}function AU(e,n,t){return 0===n.length&&!e.children[t]}const EI=!1;class AI{constructor(n){this.segmentGroup=n||null}}class IU{constructor(n){this.urlTree=n}}function Rw(e){return sy(new AI(e))}function PU(e){return sy(new IU(e))}class iX{constructor(n,t,r,i,o){this.injector=n,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const n=MI(this.urlTree.root,[],[],this.config).segmentGroup,t=new xi(n.segments,n.children);return this.expandSegmentGroup(this.injector,this.config,t,vi).pipe(Ie(o=>this.createUrlTree(bI(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Hd(o=>{if(o instanceof IU)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof AI?this.noMatchError(o):o}))}match(n){return this.expandSegmentGroup(this.injector,this.config,n.root,vi).pipe(Ie(i=>this.createUrlTree(bI(i),n.queryParams,n.fragment))).pipe(Hd(i=>{throw i instanceof AI?this.noMatchError(i):i}))}noMatchError(n){return new an(4002,EI)}createUrlTree(n,t,r){const i=e3(n);return new Fg(i,t,r)}expandSegmentGroup(n,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(n,t,r).pipe(Ie(o=>new xi([],o))):this.expandSegment(n,r,t,r.segments,i,!0)}expandChildren(n,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return dr(i).pipe(Ef(o=>{const d=r.children[o],f=SU(t,o);return this.expandSegmentGroup(n,f,d,o).pipe(Ie(g=>({segment:g,outlet:o})))}),WH((o,d)=>(o[d.outlet]=d.segment,o),{}),jH())}expandSegment(n,t,r,i,o,d){return dr(r).pipe(Ef(f=>this.expandSegmentAgainstRoute(n,t,r,f,i,o,d).pipe(Hd(_=>{if(_ instanceof AI)return er(null);throw _}))),Tf(f=>!!f),Hd((f,g)=>{if(v3(f))return AU(t,i,o)?er(new xi([],{})):Rw(t);throw f}))}expandSegmentAgainstRoute(n,t,r,i,o,d,f){return EU(i,t,o,d)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(n,t,i,o,d):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,t,r,i,o,d):Rw(t):Rw(t)}expandSegmentAgainstRouteUsingRedirect(n,t,r,i,o,d){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,r,i,d):this.expandRegularSegmentAgainstRouteUsingRedirect(n,t,r,i,o,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?PU(o):this.lineralizeSegments(r,o).pipe(Fa(d=>{const f=new xi(d,{});return this.expandSegment(n,f,t,d,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,t,r,i,o,d){const{matched:f,consumedSegments:g,remainingSegments:_,positionalParamSegments:w}=_3(t,i,o);if(!f)return Rw(t);const S=this.applyRedirectCommands(g,i.redirectTo,w);return i.redirectTo.startsWith("/")?PU(S):this.lineralizeSegments(i,S).pipe(Fa(k=>this.expandSegment(n,t,r,k.concat(_),d,!1)))}matchSegmentAgainstRoute(n,t,r,i,o){return"**"===r.path?(n=CU(r,n),r.loadChildren?(r._loadedRoutes?er({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(n,r)).pipe(Ie(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new xi(i,{})))):er(new xi(i,{}))):TU(t,r,i,n).pipe(ul(({matched:d,consumedSegments:f,remainingSegments:g})=>d?this.getChildConfig(n=r._injector??n,r,i).pipe(Fa(w=>{const S=w.injector??n,k=w.routes,{segmentGroup:V,slicedSegments:ne}=MI(t,f,g,k),pe=new xi(V.segments,V.children);if(0===ne.length&&pe.hasChildren())return this.expandChildren(S,k,pe).pipe(Ie(ke=>new xi(f,ke)));if(0===k.length&&0===ne.length)return er(new xi(f,{}));const De=yc(r)===o;return this.expandSegment(S,pe,k,ne,De?vi:o,!0).pipe(Ie(Fe=>new xi(f.concat(Fe.segments),Fe.children)))})):Rw(t)))}getChildConfig(n,t,r){return t.children?er({routes:t.children,injector:n}):t.loadChildren?void 0!==t._loadedRoutes?er({routes:t._loadedRoutes,injector:t._loadedInjector}):function $Y(e,n,t,r){const i=n.canLoad;return void 0===i||0===i.length?er(!0):er(i.map(d=>{const f=hy(d,e);return Af(function kY(e){return e&&Pw(e.canLoad)}(f)?f.canLoad(n,t):e.runInContext(()=>f(n,t)))})).pipe(fy(),MU())}(n,t,r).pipe(Fa(i=>i?this.configLoader.loadChildren(n,t).pipe(mo(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function nX(e){return sy(bU(EI,3))}())):er({routes:[],injector:n})}lineralizeSegments(n,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return er(r);if(i.numberOfChildren>1||!i.children[vi])return sy(new an(4e3,EI));i=i.children[vi]}}applyRedirectCommands(n,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,r)}applyRedirectCreateUrlTree(n,t,r,i){const o=this.createSegmentGroup(n,t.root,r,i);return new Fg(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){const r={};return ss(n,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[o]=t[f]}else r[o]=i}),r}createSegmentGroup(n,t,r,i){const o=this.createSegments(n,t.segments,r,i);let d={};return ss(t.children,(f,g)=>{d[g]=this.createSegmentGroup(n,f,r,i)}),new xi(o,d)}createSegments(n,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(n,o,i):this.findOrReturn(o,r))}findPosParam(n,t,r){const i=r[t.path.substring(1)];if(!i)throw new an(4001,EI);return i}findOrReturn(n,t){let r=0;for(const i of t){if(i.path===n.path)return t.splice(r),i;r++}return n}}class oX{}class cX{constructor(n,t,r,i,o,d,f,g){this.injector=n,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=f,this.urlSerializer=g}recognize(){const n=MI(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,vi).pipe(Ie(t=>{if(null===t)return null;const r=new wI([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},vi,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Gd(r,t),o=new mU(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(n){const t=n.value,r=vU(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),n.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(n,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,t,r):this.processSegment(n,t,r,r.segments,i)}processChildren(n,t,r){return dr(Object.keys(r.children)).pipe(Ef(i=>{const o=r.children[i],d=SU(t,i);return this.processSegmentGroup(n,d,o,i)}),WH((i,o)=>i&&o?(i.push(...o),i):null),ZH(i=>null!==i),fI(null),jH(),Ie(i=>{if(null===i)return null;const o=RU(i);return function uX(e){e.sort((n,t)=>n.value.outlet===vi?-1:t.value.outlet===vi?1:n.value.outlet.localeCompare(t.value.outlet))}(o),o}))}processSegment(n,t,r,i,o){return dr(t).pipe(Ef(d=>this.processSegmentAgainstRoute(d._injector??n,d,r,i,o)),Tf(d=>!!d),Hd(d=>{if(v3(d))return AU(r,i,o)?er([]):er(null);throw d}))}processSegmentAgainstRoute(n,t,r,i,o){if(t.redirectTo||!EU(t,r,i,o))return er(null);let d;if("**"===t.path){const f=i.length>0?$H(i).parameters:{},g=OU(r)+i.length;d=er({snapshot:new wI(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,NU(t),yc(t),t.component??t._loadedComponent??null,t,LU(r),g,FU(t),g),consumedSegments:[],remainingSegments:[]})}else d=TU(r,t,i,n).pipe(Ie(({matched:f,consumedSegments:g,remainingSegments:_,parameters:w})=>{if(!f)return null;const S=OU(r)+g.length;return{snapshot:new wI(g,w,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,NU(t),yc(t),t.component??t._loadedComponent??null,t,LU(r),S,FU(t),S),consumedSegments:g,remainingSegments:_}}));return d.pipe(ul(f=>{if(null===f)return er(null);const{snapshot:g,consumedSegments:_,remainingSegments:w}=f;n=t._injector??n;const S=t._loadedInjector??n,k=function dX(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(t),{segmentGroup:V,slicedSegments:ne}=MI(r,_,w,k.filter(De=>void 0===De.redirectTo),this.relativeLinkResolution);if(0===ne.length&&V.hasChildren())return this.processChildren(S,k,V).pipe(Ie(De=>null===De?null:[new Gd(g,De)]));if(0===k.length&&0===ne.length)return er([new Gd(g,[])]);const pe=yc(t)===o;return this.processSegment(S,k,V,ne,pe?vi:o).pipe(Ie(De=>null===De?null:[new Gd(g,De)]))}))}}function hX(e){const n=e.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function RU(e){const n=[],t=new Set;for(const r of e){if(!hX(r)){n.push(r);continue}const i=n.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):n.push(r)}for(const r of t){const i=RU(r.children);n.push(new Gd(r.value,i))}return n.filter(r=>!t.has(r))}function LU(e){let n=e;for(;n._sourceSegment;)n=n._sourceSegment;return n}function OU(e){let n=e,t=n._segmentIndexShift??0;for(;n._sourceSegment;)n=n._sourceSegment,t+=n._segmentIndexShift??0;return t-1}function NU(e){return e.data||{}}function FU(e){return e.resolve||{}}function BU(e){return"string"==typeof e.title||null===e.title}function y3(e){return ul(n=>{const t=e(n);return t?dr(t).pipe(Ie(()=>n)):er(n)})}let VU=(()=>{class e{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===vi);return r}getResolvedTitleForRoute(t){return t.data[bw]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Jt({token:e,factory:function(){return Ji(zU)},providedIn:"root"}),e})(),zU=(()=>{class e extends VU{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return e.\u0275fac=function(t){return new(t||e)(Nt(Dz))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class bX{}class wX extends class xX{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}}{}const PI=new dn("",{providedIn:"root",factory:()=>({})}),b3=new dn("ROUTES");let x3=(()=>{class e{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return er(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Af(t.loadComponent()).pipe(mo(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),pI(()=>{this.componentLoaders.delete(t)})),i=new UH(r,()=>new se).pipe(XF());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return er({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(Ie(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let g,_,w=!1;Array.isArray(f)?_=f:(g=f.create(t).injector,_=XH(g.get(b3,[],ar.Self|ar.Optional)));return{routes:_.map(g3),injector:g}}),pI(()=>{this.childrenLoaders.delete(r)})),d=new UH(o,()=>new se).pipe(XF());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return Af(t()).pipe(Fa(r=>r instanceof $T||Array.isArray(r)?er(r):dr(this.compiler.compileModuleAsync(r))))}}return e.\u0275fac=function(t){return new(t||e)(Nt(Ga),Nt(x1))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class SX{}class DX{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,t){return n}}function MX(e){throw e}function TX(e,n,t){return n.parse("/")}const EX={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},AX={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function UU(){const e=Ji(tU),n=Ji(Tw),t=Ji(Sg),r=Ji(Ga),i=Ji(x1),o=Ji(b3,{optional:!0})??[],d=Ji(PI,{optional:!0})??{},f=Ji(zU),g=Ji(VU,{optional:!0}),_=Ji(SX,{optional:!0}),w=Ji(bX,{optional:!0}),S=new ls(null,e,n,t,r,i,XH(o));return _&&(S.urlHandlingStrategy=_),w&&(S.routeReuseStrategy=w),S.titleStrategy=g??f,function IX(e,n){e.errorHandler&&(n.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(n.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(n.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(n.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(n.urlUpdateStrategy=e.urlUpdateStrategy),e.canceledNavigationResolution&&(n.canceledNavigationResolution=e.canceledNavigationResolution)}(d,S),S}let ls=(()=>{class e{constructor(t,r,i,o,d,f,g){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new se,this.errorHandler=MX,this.malformedUriErrorHandler=TX,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>er(void 0),this.urlHandlingStrategy=new DX,this.routeReuseStrategy=new wX,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=d.get(x3),this.configLoader.onLoadEndListener=k=>this.triggerEvent(new dY(k)),this.configLoader.onLoadStartListener=k=>this.triggerEvent(new uY(k)),this.ngModule=d.get(Ad),this.console=d.get(Uk);const S=d.get(Cr);this.isNgZoneEnabled=S instanceof Cr&&Cr.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=function O7(){return new Fg(new xi([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=gU(this.currentUrlTree,this.rootComponentType),this.transitions=new Ll({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ki(i=>0!==i.id),Ie(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),ul(i=>{let o=!1,d=!1;return er(i).pipe(mo(f=>{this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ul(f=>{const g=this.browserUrlTree.toString(),_=!this.navigated||f.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||_)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return GU(f.source)&&(this.browserUrlTree=f.extractedUrl),er(f).pipe(ul(S=>{const k=this.transitions.getValue();return r.next(new a3(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),k!==this.transitions.getValue()?Aa:Promise.resolve(S)}),function aX(e,n,t,r){return ul(i=>function rX(e,n,t,r,i){return new iX(e,n,t,r,i).apply()}(e,n,t,i.extractedUrl,r).pipe(Ie(o=>({...i,urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),mo(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},i.urlAfterRedirects=S.urlAfterRedirects}),function pX(e,n,t,r,i,o){return Fa(d=>function lX(e,n,t,r,i,o,d="emptyOnly",f="legacy"){return new cX(e,n,t,r,i,d,f,o).recognize().pipe(ul(g=>null===g?function sX(e){return new N(n=>n.error(e))}(new oX):er(g)))}(e,n,t,d.urlAfterRedirects,r.serialize(d.urlAfterRedirects),r,i,o).pipe(Ie(f=>({...d,targetSnapshot:f}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),mo(S=>{if(i.targetSnapshot=S.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(V,S)}this.browserUrlTree=S.urlAfterRedirects}const k=new aY(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(k)}));if(_&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:k,extractedUrl:V,source:ne,restoredState:pe,extras:De}=f,Re=new a3(k,this.serializeUrl(V),ne,pe);r.next(Re);const Fe=gU(V,this.rootComponentType).snapshot;return er(i={...f,targetSnapshot:Fe,urlAfterRedirects:V,extras:{...De,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=f.rawUrl,f.resolve(null),Aa}),mo(f=>{const g=new oY(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(g)}),Ie(f=>i={...f,guards:IY(f.targetSnapshot,f.currentSnapshot,this.rootContexts)}),function HY(e,n){return Fa(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:d}}=t;return 0===d.length&&0===o.length?er({...t,guardsResult:!0}):function UY(e,n,t,r){return dr(e).pipe(Fa(i=>function XY(e,n,t,r,i){const o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return o&&0!==o.length?er(o.map(f=>{const g=Ew(n)??i,_=hy(f,g);return Af(function BY(e){return e&&Pw(e.canDeactivate)}(_)?_.canDeactivate(e,n,t,r):g.runInContext(()=>_(e,n,t,r))).pipe(Tf())})).pipe(fy()):er(!0)}(i.component,i.route,t,n,r)),Tf(i=>!0!==i,!0))}(d,r,i,e).pipe(Fa(f=>f&&function OY(e){return"boolean"==typeof e}(f)?function GY(e,n,t,r){return dr(n).pipe(Ef(i=>hI(function jY(e,n){return null!==e&&n&&n(new hY(e)),er(!0)}(i.route.parent,r),function WY(e,n){return null!==e&&n&&n(new pY(e)),er(!0)}(i.route,r),function YY(e,n,t){const r=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(d=>function PY(e){const n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null}(d)).filter(d=>null!==d).map(d=>yw(()=>er(d.guards.map(g=>{const _=Ew(d.node)??t,w=hy(g,_);return Af(function FY(e){return e&&Pw(e.canActivateChild)}(w)?w.canActivateChild(r,e):_.runInContext(()=>w(r,e))).pipe(Tf())})).pipe(fy())));return er(o).pipe(fy())}(e,i.path,t),function ZY(e,n,t){const r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||0===r.length)return er(!0);const i=r.map(o=>yw(()=>{const d=Ew(n)??t,f=hy(o,d);return Af(function NY(e){return e&&Pw(e.canActivate)}(f)?f.canActivate(n,e):d.runInContext(()=>f(n,e))).pipe(Tf())}));return er(i).pipe(fy())}(e,i.route,t))),Tf(i=>!0!==i,!0))}(r,o,e,n):er(f)),Ie(f=>({...t,guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),mo(f=>{if(i.guardsResult=f.guardsResult,Vg(f.guardsResult))throw yU(0,f.guardsResult);const g=new sY(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(g)}),Ki(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,"",3),!1)),y3(f=>{if(f.guards.canActivateChecks.length)return er(f).pipe(mo(g=>{const _=new lY(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(_)}),ul(g=>{let _=!1;return er(g).pipe(function gX(e,n){return Fa(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return er(t);let o=0;return dr(i).pipe(Ef(d=>function vX(e,n,t,r){const i=e.routeConfig,o=e._resolve;return void 0!==i?.title&&!BU(i)&&(o[bw]=i.title),function mX(e,n,t,r){const i=function _X(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===i.length)return er({});const o={};return dr(i).pipe(Fa(d=>function yX(e,n,t,r){const i=Ew(n)??r,o=hy(e,i);return Af(o.resolve?o.resolve(n,t):i.runInContext(()=>o(n,t)))}(e[d],n,t,r).pipe(Tf(),mo(f=>{o[d]=f}))),$F(1),KF(o),Hd(d=>v3(d)?Aa:sy(d)))}(o,e,n,r).pipe(Ie(d=>(e._resolvedData=d,e.data=vU(e,t).resolve,i&&BU(i)&&(e.data[bw]=i.title),null)))}(d.route,r,e,n)),mo(()=>o++),$F(1),Fa(d=>o===i.length?er(t):Aa))})}(this.paramsInheritanceStrategy,this.ngModule.injector),mo({next:()=>_=!0,complete:()=>{_||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),mo(g=>{const _=new cY(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(_)}))}),y3(f=>{const g=_=>{const w=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(_.routeConfig).pipe(mo(S=>{_.component=S}),Ie(()=>{})));for(const S of _.children)w.push(...g(S));return w};return YF(g(f.targetSnapshot.root)).pipe(fI(),vo(1))}),y3(()=>this.afterPreactivation()),Ie(f=>{const g=function yY(e,n,t){const r=Mw(e,n._root,t?t._root:void 0);return new pU(r,n)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return i={...f,targetRouterState:g}}),mo(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((e,n,t)=>Ie(r=>(new AY(n,r.targetRouterState,r.currentRouterState,t).activate(e),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),mo({next(){o=!0},complete(){o=!0}}),pI(()=>{o||d||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Hd(f=>{if(d=!0,wU(f)){xU(f)||(this.navigated=!0,this.restoreHistory(i,!0));const g=new xI(i.id,this.serializeUrl(i.extractedUrl),f.message,f.cancellationCode);if(r.next(g),xU(f)){const _=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),w={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||GU(i.source)};this.scheduleNavigation(_,"imperative",null,w,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const g=new dU(i.id,this.serializeUrl(i.extractedUrl),f,i.targetSnapshot??void 0);r.next(g);try{i.resolve(this.errorHandler(f))}catch(_){i.reject(_)}}return Aa}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},o=t.state?.navigationId?t.state:null;if(o){const f={...o};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(i.state=f)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,o,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(g3),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:d,queryParamsHandling:f,preserveFragment:g}=r,_=i||this.routerState.root,w=g?this.currentUrlTree.fragment:d;let S=null;switch(f){case"merge":S={...this.currentUrlTree.queryParams,...o};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=o||null}return null!==S&&(S=this.removeEmptyProps(S)),J7(_,this.currentUrlTree,t,S,w??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Vg(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function PX(e){for(let n=0;n<e.length;n++){if(null==e[n])throw new an(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...EX}:!1===r?{...AX}:r,Vg(t))return QH(this.currentUrlTree,t,i);const o=this.parseUrl(t);return QH(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new zg(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,o,d){if(this.disposed)return Promise.resolve(!1);let f,g,_;d?(f=d.resolve,g=d.reject,_=d.promise):_=new Promise((k,V)=>{f=k,g=V});const w=++this.navigationId;let S;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),S=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):S=0,this.setTransition({id:w,targetPageId:S,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:o,resolve:f,reject:g,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(k=>Promise.reject(k))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const o=new xI(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return e.\u0275fac=function(t){El()},e.\u0275prov=Jt({token:e,factory:function(){return UU()},providedIn:"root"}),e})();function GU(e){return"imperative"!==e}let Ug=(()=>{class e{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new se,this.subscription=t.events.subscribe(o=>{o instanceof zg&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=qc(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=qc(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=qc(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,o,d){return!!(0!==t||r||i||o||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return e.\u0275fac=function(t){return new(t||e)(qe(ls),qe(Hg),qe(Fd))},e.\u0275dir=Sn({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&It("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&t&&Pr("target",r.target)("href",r.href,Ep)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[ba]}),e})();class WU{}let OX=(()=>{class e{constructor(t,r,i,o,d){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(Ki(t=>t instanceof zg),Ef(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=rf(o.providers,t,`Route: ${o.path}`));const d=o._injector??t,f=o._loadedInjector??d;o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent?i.push(this.preloadConfig(d,o)):(o.children||o._loadedRoutes)&&i.push(this.processRoutes(f,o.children??o._loadedRoutes))}return dr(i).pipe($s())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):er(null);const o=i.pipe(Fa(d=>null===d?er(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));return r.loadComponent&&!r._loadedComponent?dr([o,this.loader.loadComponent(r)]).pipe($s()):o})}}return e.\u0275fac=function(t){return new(t||e)(Nt(ls),Nt(x1),Nt(sa),Nt(WU),Nt(x3))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const C3=new dn("");let jU=(()=>{class e{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof a3?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof zg&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof hU&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new hU(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){El()},e.\u0275prov=Jt({token:e,factory:e.\u0275fac}),e})();function py(e,n){return{\u0275kind:e,\u0275providers:n}}function S3(e){return[{provide:b3,multi:!0,useValue:e}]}function YU(){const e=Ji(Ga);return n=>{const t=e.get(cf);if(n!==t.components[0])return;const r=e.get(ls),i=e.get(XU);1===e.get(D3)&&r.initialNavigation(),e.get($U,null,ar.Optional)?.setUpPreloading(),e.get(C3,null,ar.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const XU=new dn("",{factory:()=>new se}),D3=new dn("",{providedIn:"root",factory:()=>1});const $U=new dn("");function BX(e){return py(0,[{provide:$U,useExisting:OX},{provide:WU,useExisting:e}])}const KU=new dn("ROUTER_FORROOT_GUARD"),VX=[Sg,{provide:tU,useClass:qF},{provide:ls,useFactory:UU},Tw,{provide:Hg,useFactory:function ZU(e){return e.routerState.root},deps:[ls]},x3];function zX(){return new E1("Router",ls)}let QU=(()=>{class e{constructor(t){}static forRoot(t,r){return{ngModule:e,providers:[VX,[],S3(t),{provide:KU,useFactory:WX,deps:[[ls,new Dl,new tc]]},{provide:PI,useValue:r||{}},r?.useHash?{provide:Fd,useClass:dA}:{provide:Fd,useClass:uA},{provide:C3,useFactory:()=>{const e=Ji(ls),n=Ji(HA),t=Ji(PI);return t.scrollOffset&&n.setOffset(t.scrollOffset),new jU(e,n,t)}},r?.preloadingStrategy?BX(r.preloadingStrategy).\u0275providers:[],{provide:E1,multi:!0,useFactory:zX},r?.initialNavigation?jX(r):[],[{provide:qU,useFactory:YU},{provide:HE,multi:!0,useExisting:qU}]]}}static forChild(t){return{ngModule:e,providers:[S3(t)]}}}return e.\u0275fac=function(t){return new(t||e)(Nt(KU,8))},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[f3]}),e})();function WX(e){return"guarded"}function jX(e){return["disabled"===e.initialNavigation?py(3,[{provide:vg,multi:!0,useFactory:()=>{const n=Ji(ls);return()=>{n.setUpLocationChangeListener()}}},{provide:D3,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?py(2,[{provide:D3,useValue:0},{provide:vg,multi:!0,deps:[Ga],useFactory:n=>{const t=n.get(yN,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(o=>{const d=n.get(ls),f=n.get(XU);(function i(o){n.get(ls).events.pipe(Ki(f=>f instanceof zg||f instanceof xI||f instanceof dU),Ie(f=>f instanceof zg||f instanceof xI&&(0===f.code||1===f.code)&&null),Ki(f=>null!==f),vo(1)).subscribe(()=>{o()})})(()=>{o(!0),r=!0}),d.afterPreactivation=()=>(o(!0),r||f.closed?er(void 0):f),d.initialNavigation()}))}}]).\u0275providers:[]]}const qU=new dn(""),YX=function(e){return{"background-image":e}},XX=["*"];let $X=(()=>{class e{constructor(){this.title="",this.imgURL=""}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=qn({type:e,selectors:[["app-home-card"]],inputs:{title:"title",imgURL:"imgURL"},ngContentSelectors:XX,decls:6,vars:4,consts:[[1,"card",3,"ngStyle"],[1,"card-content"],[1,"title"],[1,"content"]],template:function(t,r){1&t&&(La(),je(0,"div",0)(1,"div",1)(2,"h2",2),Mt(3),Ke(),je(4,"div",3),Yr(5),Ke()()()),2&t&&(_t("ngStyle",hc(2,YX,"url("+r.imgURL+")")),xt(3),ro(" ",r.title," "))},dependencies:[Ig],styles:['.card[_ngcontent-%COMP%]{--transition-duration: .25s;--transform-transition: transform var(--transition-duration) ease;color:var(--clr-neutral-100);background-size:cover;width:var(--card-width);aspect-ratio:1;border-radius:.25rem;padding:1rem 0 0;overflow:hidden;position:relative;transition:var(--transform-transition);box-shadow:#00000030 0 10px 20px,#0000003b 0 6px 6px}.card[_ngcontent-%COMP%]:before{content:"";position:absolute;background:rgb(0,0,0);opacity:.5;pointer-events:none;width:var(--card-width);aspect-ratio:1;border-radius:.25rem;padding:1rem 0 0;top:0}.card-content[_ngcontent-%COMP%]{--padding: 1.1rem;height:100%;padding:var(--padding);padding-top:3rem;background:linear-gradient(hsla(0deg,0%,0%,0),hsla(0deg,0%,0%,.75) 50%,hsl(0deg,0%,0%))}.title[_ngcontent-%COMP%]{position:relative;width:max-content;font-size:1rem}.title[_ngcontent-%COMP%]:after{content:"";position:absolute;height:4px;width:calc(100% + var(--padding));left:calc(var(--padding) * -1);bottom:0;background-color:var(--clr-accent-400)}@media (hover){.title[_ngcontent-%COMP%]:after{transform-origin:left;transform:scaleX(0);transition:var(--transform-transition)}.card-content[_ngcontent-%COMP%]{transform:translateY(55%);transition:var(--transform-transition)}.card[_ngcontent-%COMP%]:hover, .card[_ngcontent-%COMP%]:focus-within{transform:scale(1.025)}.card[_ngcontent-%COMP%]:hover:before{opacity:0}.card[_ngcontent-%COMP%]:hover   .title[_ngcontent-%COMP%]:after, .card[_ngcontent-%COMP%]:focus-within   .title[_ngcontent-%COMP%]:after{transform:scaleX(1);transition-delay:var(--transition-duration)}.card[_ngcontent-%COMP%]:hover   .card-content[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]:focus-within   .card-content[_ngcontent-%COMP%]{transform:translateY(0)}}@media (prefers-reduced-motion: reduce){*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important;scroll-behavior:auto!important;transition-delay:0ms!important}}']}),e})(),KX=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=qn({type:e,selectors:[["app-home"]],decls:36,vars:0,consts:[[1,"translate-animation"],[1,"home-container","horizontal-flex"],["routerLink","/sampling"],["title","Sampling","imgURL","assets/images/home-cards/sampling.png"],["href","https://clementpla.github.io/SegmentationMetricTutorial/main/classification"],["imgURL","assets/images/home-cards/metric.jpg","title","Classification Metrics"],["routerLink","/PSNR"],["title","Image Quality and Noise","imgURL","assets/image_presets/phantom.png"],["routerLink","/fourierTransform"],["title","Fourier Transform 2D","imgURL","assets/images/home-cards/fourierTransform.jpg"],["routerLink","/spatialFiltering"],["title","Spatial Filtering","imgURL","assets/images/home-cards/spatial_filtering.jpg"],["routerLink","/spectralFiltering"],["title","Spectral Filtering","imgURL","assets/image_presets/CTandstripes.jpeg"],["routerLink","/colorspaces"],["title","Colorspaces","imgURL","assets/images/home-cards/colorspace.jpg"],["routerLink","/morphology"],["title","Morphology","imgURL","assets/images/home-cards/morphology.jpg"],["routerLink","/histogram"],["title","Image Histogram","imgURL","assets/images/home-cards/histogram.jpg"],["href","https://clementpla.github.io/SegmentationMetricTutorial/main/segmentation"],["imgURL","assets/images/home-cards/segmentation_metrics.jpg","title","Segmentation Metrics"],["routerLink","/weightLoss"],["title","Learning & Loss","imgURL","assets/images/home-cards/weight_loss.png"],["routerLink","/optimizer"],["title","Gradient Descent & Optimizers","imgURL","assets/images/home-cards/gradient_descent.png"],["routerLink","/gradientDescent"],["title","Fully Connected Networks","imgURL","assets/images/home-cards/gradient_descent.png"]],template:function(t,r){1&t&&(je(0,"div",0)(1,"h2"),Mt(2,"1D"),Ke(),je(3,"div",1)(4,"a",2),yn(5,"app-home-card",3),Ke(),je(6,"a",4),yn(7,"app-home-card",5),Ke()(),je(8,"h2"),Mt(9,"2D"),Ke(),je(10,"div",1)(11,"a",6),yn(12,"app-home-card",7),Ke(),je(13,"a",8),yn(14,"app-home-card",9),Ke(),je(15,"a",10),yn(16,"app-home-card",11),Ke(),je(17,"a",12),yn(18,"app-home-card",13),Ke(),je(19,"a",14),yn(20,"app-home-card",15),Ke(),je(21,"a",16),yn(22,"app-home-card",17),Ke(),je(23,"a",18),yn(24,"app-home-card",19),Ke(),je(25,"a",20),yn(26,"app-home-card",21),Ke()(),je(27,"h2"),Mt(28,"Machine Learning"),Ke(),je(29,"div",1)(30,"a",22),yn(31,"app-home-card",23),Ke(),je(32,"a",24),yn(33,"app-home-card",25),Ke(),je(34,"a",26),yn(35,"app-home-card",27),Ke()()())},dependencies:[Ug,$X],styles:["a[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit}.home-container[_ngcontent-%COMP%]{gap:1em;margin:1em 5em}@keyframes rotate{0%{transform:rotateY(90deg);opacity:.1}to{transform:rotateY(0);opacity:1}}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(n){animation-name:rotate;animation-duration:.2s;animation-direction:normal;animation-fill-mode:both;animation-timing-function:ease-out}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(1n){animation-delay:.1s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(2n){animation-delay:.2s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(3n){animation-delay:.3s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(4n){animation-delay:.4s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(5n){animation-delay:.5s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(6n){animation-delay:.6s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(7n){animation-delay:.7s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(8n){animation-delay:.8s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(9n){animation-delay:.9s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(10n){animation-delay:1s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(11n){animation-delay:1.1s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(12n){animation-delay:1.2s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(13n){animation-delay:1.3s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(14n){animation-delay:1.4s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(15n){animation-delay:1.5s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(16n){animation-delay:1.6s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(17n){animation-delay:1.7s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(18n){animation-delay:1.8s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(19n){animation-delay:1.9s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(20n){animation-delay:2s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(21n){animation-delay:2.1s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(22n){animation-delay:2.2s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(23n){animation-delay:2.3s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(24n){animation-delay:2.4s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(25n){animation-delay:2.5s}h2[_ngcontent-%COMP%]{border:solid white 2px;width:fit-content;margin:1em;padding:0 1em;border-radius:2em}@media (max-width: 768px){.home-container[_ngcontent-%COMP%]{gap:1em;margin:0 1em}}"]}),e})();class M3{attach(n){return this._attachedHost=n,n.attach(this)}detach(){let n=this._attachedHost;null!=n&&(this._attachedHost=null,n.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(n){this._attachedHost=n}}class kI extends M3{constructor(n,t,r,i){super(),this.component=n,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class NI extends M3{constructor(n,t,r,i){super(),this.templateRef=n,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(n,t=this.context){return this.context=t,super.attach(n)}detach(){return this.context=void 0,super.detach()}}class QX extends M3{constructor(n){super(),this.element=n instanceof Or?n.nativeElement:n}}class T3{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(n){return n instanceof kI?(this._attachedPortal=n,this.attachComponentPortal(n)):n instanceof NI?(this._attachedPortal=n,this.attachTemplatePortal(n)):this.attachDomPortal&&n instanceof QX?(this._attachedPortal=n,this.attachDomPortal(n)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(n){this._disposeFn=n}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class qX extends T3{constructor(n,t,r,i,o){super(),this.outletElement=n,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=d=>{const f=d.element,g=this._document.createComment("dom-portal");f.parentNode.insertBefore(g,f),this.outletElement.appendChild(f),this._attachedPortal=d,super.setDisposeFn(()=>{g.parentNode&&g.parentNode.replaceChild(f,g)})},this._document=o}attachComponentPortal(n){const r=(n.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(n.component);let i;return n.viewContainerRef?(i=n.viewContainerRef.createComponent(r,n.viewContainerRef.length,n.injector||n.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(n.injector||this._defaultInjector||Ga.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=n,i}attachTemplatePortal(n){let t=n.viewContainerRef,r=t.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=n,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(n){return n.hostView.rootNodes[0]}}let E3,FI=(()=>{class e extends T3{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new En,this.attachDomPortal=o=>{const d=o.element,f=this._document.createComment("dom-portal");o.setAttachedHost(this),d.parentNode.insertBefore(f,d),this._getRootNode().appendChild(d),this._attachedPortal=o,super.setDisposeFn(()=>{f.parentNode&&f.parentNode.replaceChild(d,f)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),d=r.createComponent(o,r.length,t.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(d.hostView.rootNodes[0]),super.setDisposeFn(()=>d.destroy()),this._attachedPortal=t,this._attachedRef=d,this.attached.emit(d),d}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return e.\u0275fac=function(t){return new(t||e)(qe(od),qe(as),qe(Rr))},e.\u0275dir=Sn({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Gn]}),e})(),gy=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({}),e})();try{E3=typeof Intl<"u"&&Intl.v8BreakIterator}catch{E3=!1}let vy,cs=(()=>{class e{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function aF(e){return e===BA}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!E3)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return e.\u0275fac=function(t){return new(t||e)(Nt(b1))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const JU=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function eG(){if(vy)return vy;if("object"!=typeof document||!document)return vy=new Set(JU),vy;let e=document.createElement("input");return vy=new Set(JU.filter(n=>(e.setAttribute("type",n),e.type===n))),vy}let Lw,BI,Gg,A3;function Ow(e){return function JX(){if(null==Lw&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Lw=!0}))}finally{Lw=Lw||!1}return Lw}()?e:!!e.capture}function tG(){if(null==Gg){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Gg=!1,Gg;if("scrollBehavior"in document.documentElement.style)Gg=!0;else{const e=Element.prototype.scrollTo;Gg=!!e&&!/\{\s*\[native code\]\s*\}/.test(e.toString())}}return Gg}function kw(){if("object"!=typeof document||!document)return 0;if(null==BI){const e=document.createElement("div"),n=e.style;e.dir="rtl",n.width="1px",n.overflow="auto",n.visibility="hidden",n.pointerEvents="none",n.position="absolute";const t=document.createElement("div"),r=t.style;r.width="2px",r.height="1px",e.appendChild(t),document.body.appendChild(e),BI=0,0===e.scrollLeft&&(e.scrollLeft=1,BI=0===e.scrollLeft?1:2),e.remove()}return BI}function nG(e){if(function e$(){if(null==A3){const e=typeof document<"u"?document.head:null;A3=!(!e||!e.createShadowRoot&&!e.attachShadow)}return A3}()){const n=e.getRootNode?e.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}function I3(){let e=typeof document<"u"&&document?document.activeElement:null;for(;e&&e.shadowRoot;){const n=e.shadowRoot.activeElement;if(n===e)break;e=n}return e}function Wg(e){return e.composedPath?e.composedPath()[0]:e.target}function P3(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function bc(e,...n){return n.length?n.some(t=>e[t]):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}function _y(e,n=hw){return ge((t,r)=>{let i=null,o=null,d=null;const f=()=>{if(i){i.unsubscribe(),i=null;const _=o;o=null,r.next(_)}};function g(){const _=d+e,w=n.now();if(w<_)return i=this.schedule(void 0,_-w),void r.add(i);f()}t.subscribe(Ce(r,_=>{o=_,d=n.now(),i||(i=n.schedule(g,e),r.add(i))},()=>{f(),r.complete()},void 0,()=>{o=i=null}))})}function aG(e){return Ki((n,t)=>e<=t)}function Vw(e,n=T){return e=e??h$,ge((t,r)=>{let i,o=!0;t.subscribe(Ce(r,d=>{const f=n(d);(o||!e(i,f))&&(o=!1,i=f,r.next(d))}))})}function h$(e,n){return e===n}function Vi(e){return ge((n,t)=>{Ea(e).subscribe(Ce(t,()=>t.complete(),Z)),!t.closed&&n.subscribe(t)})}function yr(e){return null!=e&&"false"!=`${e}`}function xc(e,n=0){return function f$(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}(e)?Number(e):n}function VI(e){return Array.isArray(e)?e:[e]}function _o(e){return null==e?"":"string"==typeof e?e:`${e}px`}function Wd(e){return e instanceof Or?e.nativeElement:e}let oG=(()=>{class e{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),p$=(()=>{class e{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=Wd(t);return new N(i=>{const d=this._observeElement(r).subscribe(i);return()=>{d.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new se,i=this._mutationObserverFactory.create(o=>r.next(o));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return e.\u0275fac=function(t){return new(t||e)(Nt(oG))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),k3=(()=>{class e{constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new En,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=yr(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=xc(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(_y(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(qe(p$),qe(Or),qe(Cr))},e.\u0275dir=Sn({type:e,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),e})(),zI=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({providers:[oG]}),e})();const sG=new Set;let yy,g$=(()=>{class e{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):m$}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function v$(e){if(!sG.has(e))try{yy||(yy=document.createElement("style"),yy.setAttribute("type","text/css"),document.head.appendChild(yy)),yy.sheet&&(yy.sheet.insertRule(`@media ${e} {body{ }}`,0),sG.add(e))}catch(n){console.error(n)}}(t),this._matchMedia(t)}}return e.\u0275fac=function(t){return new(t||e)(Nt(cs))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function m$(e){return{matches:"all"===e||""===e,media:e,addListener:()=>{},removeListener:()=>{}}}let _$=(()=>{class e{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new se}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return lG(VI(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let o=YF(lG(VI(t)).map(d=>this._registerQuery(d).observable));return o=hI(o.pipe(vo(1)),o.pipe(aG(1),_y(0))),o.pipe(Ie(d=>{const f={matches:!1,breakpoints:{}};return d.forEach(({matches:g,query:_})=>{f.matches=f.matches||g,f.breakpoints[_]=g}),f}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),o={observable:new N(d=>{const f=g=>this._zone.run(()=>d.next(g));return r.addListener(f),()=>{r.removeListener(f)}}).pipe(Hs(r),Ie(({matches:d})=>({query:t,matches:d})),Vi(this._destroySubject)),mql:r};return this._queries.set(t,o),o}}return e.\u0275fac=function(t){return new(t||e)(Nt(g$),Nt(Cr))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function lG(e){return e.map(n=>n.split(",")).reduce((n,t)=>n.concat(t)).map(n=>n.trim())}class dG{constructor(n){this._items=n,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new se,this._typeaheadSubscription=ye.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new se,this.change=new se,n instanceof Pd&&n.changes.subscribe(t=>{if(this._activeItem){const i=t.toArray().indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}})}skipPredicate(n){return this._skipPredicateFn=n,this}withWrap(n=!0){return this._wrap=n,this}withVerticalOrientation(n=!0){return this._vertical=n,this}withHorizontalOrientation(n){return this._horizontal=n,this}withAllowedModifierKeys(n){return this._allowedModifierKeys=n,this}withTypeAhead(n=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(mo(t=>this._pressedLetters.push(t)),_y(n),Ki(()=>this._pressedLetters.length>0),Ie(()=>this._pressedLetters.join(""))).subscribe(t=>{const r=this._getItemsArray();for(let i=1;i<r.length+1;i++){const o=(this._activeItemIndex+i)%r.length,d=r[o];if(!this._skipPredicateFn(d)&&0===d.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(o);break}}this._pressedLetters=[]}),this}withHomeAndEnd(n=!0){return this._homeAndEnd=n,this}setActiveItem(n){const t=this._activeItem;this.updateActiveItem(n),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(n){const t=n.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!n[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;default:return void((i||bc(n,"shiftKey"))&&(n.key&&1===n.key.length?this._letterKeyStream.next(n.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],n.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(n){const t=this._getItemsArray(),r="number"==typeof n?n:t.indexOf(n);this._activeItem=t[r]??null,this._activeItemIndex=r}_setActiveItemByDelta(n){this._wrap?this._setActiveInWrapMode(n):this._setActiveInDefaultMode(n)}_setActiveInWrapMode(n){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const i=(this._activeItemIndex+n*r+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(n){this._setActiveItemByIndex(this._activeItemIndex+n,n)}_setActiveItemByIndex(n,t){const r=this._getItemsArray();if(r[n]){for(;this._skipPredicateFn(r[n]);)if(!r[n+=t])return;this.setActiveItem(n)}}_getItemsArray(){return this._items instanceof Pd?this._items.toArray():this._items}}class x$ extends dG{setActiveItem(n){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(n),this.activeItem&&this.activeItem.setActiveStyles()}}class hG extends dG{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(n){return this._origin=n,this}setActiveItem(n){super.setActiveItem(n),this.activeItem&&this.activeItem.focus(this._origin)}}let zw=(()=>{class e{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function C$(e){return!!(e.offsetWidth||e.offsetHeight||"function"==typeof e.getClientRects&&e.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function w$(e){try{return e.frameElement}catch{return null}}(function P$(e){return e.ownerDocument&&e.ownerDocument.defaultView||window}(t));if(r&&(-1===pG(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),o=pG(t);return t.hasAttribute("contenteditable")?-1!==o:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function A$(e){let n=e.nodeName.toLowerCase(),t="input"===n&&e.type;return"text"===t||"password"===t||"select"===n||"textarea"===n}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==o:"video"===i?-1!==o&&(null!==o||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function I$(e){return!function D$(e){return function T$(e){return"input"==e.nodeName.toLowerCase()}(e)&&"hidden"==e.type}(e)&&(function S$(e){let n=e.nodeName.toLowerCase();return"input"===n||"select"===n||"button"===n||"textarea"===n}(e)||function M$(e){return function E$(e){return"a"==e.nodeName.toLowerCase()}(e)&&e.hasAttribute("href")}(e)||e.hasAttribute("contenteditable")||fG(e))}(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}}return e.\u0275fac=function(t){return new(t||e)(Nt(cs))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function fG(e){if(!e.hasAttribute("tabindex")||void 0===e.tabIndex)return!1;let n=e.getAttribute("tabindex");return!(!n||isNaN(parseInt(n,10)))}function pG(e){if(!fG(e))return null;const n=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(n)?-1:n}class R${constructor(n,t,r,i,o=!1){this._element=n,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}get enabled(){return this._enabled}set enabled(n){this._enabled=n,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}destroy(){const n=this._startAnchor,t=this._endAnchor;n&&(n.removeEventListener("focus",this.startAnchorListener),n.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(n){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(n)))})}focusFirstTabbableElementWhenReady(n){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(n)))})}focusLastTabbableElementWhenReady(n){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(n)))})}_getRegionBoundary(n){const t=this._element.querySelectorAll(`[cdk-focus-region-${n}], [cdkFocusRegion${n}], [cdk-focus-${n}]`);return"start"==n?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(n){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return r?.focus(n),!!r}return t.focus(n),!0}return this.focusFirstTabbableElement(n)}focusFirstTabbableElement(n){const t=this._getRegionBoundary("start");return t&&t.focus(n),!!t}focusLastTabbableElement(n){const t=this._getRegionBoundary("end");return t&&t.focus(n),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const t=n.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const t=n.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const n=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,n),n.classList.add("cdk-visually-hidden"),n.classList.add("cdk-focus-trap-anchor"),n.setAttribute("aria-hidden","true"),n}_toggleAnchorTabIndex(n,t){n?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(n){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_executeOnStable(n){this._ngZone.isStable?n():this._ngZone.onStable.pipe(vo(1)).subscribe(n)}}let HI=(()=>{class e{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new R$(t,this._checker,this._ngZone,this._document,r)}}return e.\u0275fac=function(t){return new(t||e)(Nt(zw),Nt(Cr),Nt(Rr))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function gG(e){return 0===e.buttons||0===e.offsetX&&0===e.offsetY}function vG(e){const n=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!(!n||-1!==n.identifier||null!=n.radiusX&&1!==n.radiusX||null!=n.radiusY&&1!==n.radiusY)}const L$=new dn("cdk-input-modality-detector-options"),O$={ignoreKeys:[18,17,224,91,16]},by=Ow({passive:!0,capture:!0});let k$=(()=>{class e{constructor(t,r,i,o){this._platform=t,this._mostRecentTarget=null,this._modality=new Ll(null),this._lastTouchMs=0,this._onKeydown=d=>{this._options?.ignoreKeys?.some(f=>f===d.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Wg(d))},this._onMousedown=d=>{Date.now()-this._lastTouchMs<650||(this._modality.next(gG(d)?"keyboard":"mouse"),this._mostRecentTarget=Wg(d))},this._onTouchstart=d=>{vG(d)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Wg(d))},this._options={...O$,...o},this.modalityDetected=this._modality.pipe(aG(1)),this.modalityChanged=this.modalityDetected.pipe(Vw()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,by),i.addEventListener("mousedown",this._onMousedown,by),i.addEventListener("touchstart",this._onTouchstart,by)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,by),document.removeEventListener("mousedown",this._onMousedown,by),document.removeEventListener("touchstart",this._onTouchstart,by))}}return e.\u0275fac=function(t){return new(t||e)(Nt(cs),Nt(Cr),Nt(Rr),Nt(L$,8))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const N$=new dn("liveAnnouncerElement",{providedIn:"root",factory:function F$(){return null}}),B$=new dn("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let V$=(()=>{class e{constructor(t,r,i,o){this._ngZone=r,this._defaultOptions=o,this._document=i,this._liveElement=t||this._createLiveElement()}announce(t,...r){const i=this._defaultOptions;let o,d;return 1===r.length&&"number"==typeof r[0]?d=r[0]:[o,d]=r,this.clear(),clearTimeout(this._previousTimeout),o||(o=i&&i.politeness?i.politeness:"polite"),null==d&&i&&(d=i.duration),this._liveElement.setAttribute("aria-live",o),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(f=>this._currentResolve=f)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof d&&(this._previousTimeout=setTimeout(()=>this.clear(),d)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",r=this._document.getElementsByClassName(t),i=this._document.createElement("div");for(let o=0;o<r.length;o++)r[o].remove();return i.classList.add(t),i.classList.add("cdk-visually-hidden"),i.setAttribute("aria-atomic","true"),i.setAttribute("aria-live","polite"),this._document.body.appendChild(i),i}}return e.\u0275fac=function(t){return new(t||e)(Nt(N$,8),Nt(Cr),Nt(Rr),Nt(B$,8))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const z$=new dn("cdk-focus-monitor-default-options"),UI=Ow({passive:!0,capture:!0});let wc=(()=>{class e{constructor(t,r,i,o,d){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new se,this._rootNodeFocusAndBlurListener=f=>{for(let _=Wg(f);_;_=_.parentElement)"focus"===f.type?this._onFocus(f,_):this._onBlur(f,_)},this._document=o,this._detectionMode=d?.detectionMode||0}monitor(t,r=!1){const i=Wd(t);if(!this._platform.isBrowser||1!==i.nodeType)return er(null);const o=nG(i)||this._getDocument(),d=this._elementInfo.get(i);if(d)return r&&(d.checkChildren=!0),d.subject;const f={checkChildren:r,subject:new se,rootNode:o};return this._elementInfo.set(i,f),this._registerGlobalListeners(f),f.subject}stopMonitoring(t){const r=Wd(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const o=Wd(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([f,g])=>this._originChanged(f,r,g)):(this._setOrigin(r),"function"==typeof o.focus&&o.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),o=Wg(t);!i||!i.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,UI),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,UI)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Vi(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,UI),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,UI),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,o)=>{(o===t||i.checkChildren&&o.contains(t))&&r.push([o,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const o=t.labels;if(o)for(let d=0;d<o.length;d++)if(o[d].contains(r))return!0;return!1}}return e.\u0275fac=function(t){return new(t||e)(Nt(Cr),Nt(cs),Nt(k$),Nt(Rr,8),Nt(z$,8))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const _G="cdk-high-contrast-black-on-white",yG="cdk-high-contrast-white-on-black",N3="cdk-high-contrast-active";let bG=(()=>{class e{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=Ji(_$).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(N3,_G,yG),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(N3,_G):2===r&&t.add(N3,yG)}}}return e.\u0275fac=function(t){return new(t||e)(Nt(cs),Nt(Rr))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),H$=(()=>{class e{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return e.\u0275fac=function(t){return new(t||e)(Nt(bG))},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[zI]}),e})();const U$=new dn("cdk-dir-doc",{providedIn:"root",factory:function G$(){return Ji(Rr)}}),W$=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Ru=(()=>{class e{constructor(t){if(this.value="ltr",this.change=new En,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function j$(e){const n=e?.toLowerCase()||"";return"auto"===n&&typeof navigator<"u"&&navigator?.language?W$.test(navigator.language)?"rtl":"ltr":"rtl"===n?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return e.\u0275fac=function(t){return new(t||e)(Nt(U$,8))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Hw=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({}),e})();function Z$(e,n){if(1&e&&yn(0,"mat-pseudo-checkbox",4),2&e){const t=Wn();_t("state",t.selected?"checked":"unchecked")("disabled",t.disabled)}}function Y$(e,n){if(1&e&&(je(0,"span",5),Mt(1),Ke()),2&e){const t=Wn();xt(1),ro("(",t.group.label,")")}}const X$=["*"],K$=new dn("mat-sanity-checks",{providedIn:"root",factory:function $$(){return!0}});let ri=(()=>{class e{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!P3()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return e.\u0275fac=function(t){return new(t||e)(Nt(bG),Nt(K$,8),Nt(Rr))},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[Hw,Hw]}),e})();function Uw(e){return class extends e{constructor(...n){super(...n),this._disabled=!1}get disabled(){return this._disabled}set disabled(n){this._disabled=yr(n)}}}function jd(e,n){return class extends e{constructor(...t){super(...t),this.defaultColor=n,this.color=n}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function If(e){return class extends e{constructor(...n){super(...n),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(n){this._disableRipple=yr(n)}}}function xy(e,n=0){return class extends e{constructor(...t){super(...t),this._tabIndex=n,this.defaultTabIndex=n}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?xc(t):this.defaultTabIndex}}}function CG(e){return class extends e{constructor(...n){super(...n),this.errorState=!1}updateErrorState(){const n=this.errorState,o=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);o!==n&&(this.errorState=o,this.stateChanges.next())}}}let F3=(()=>{class e{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),GI=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[ri,ri]}),e})();class eK{constructor(n,t,r,i=!1){this._renderer=n,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const DG={enterDuration:225,exitDuration:150},B3=Ow({passive:!0}),MG=["mousedown","touchstart"],TG=["mouseup","mouseleave","touchend","touchcancel"];class nK{constructor(n,t,r,i){this._target=n,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Wd(r))}fadeInRipple(n,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...DG,...r.animation};r.centered&&(n=i.left+i.width/2,t=i.top+i.height/2);const d=r.radius||function rK(e,n,t){const r=Math.max(Math.abs(e-t.left),Math.abs(e-t.right)),i=Math.max(Math.abs(n-t.top),Math.abs(n-t.bottom));return Math.sqrt(r*r+i*i)}(n,t,i),f=n-i.left,g=t-i.top,_=o.enterDuration,w=document.createElement("div");w.classList.add("mat-ripple-element"),w.style.left=f-d+"px",w.style.top=g-d+"px",w.style.height=2*d+"px",w.style.width=2*d+"px",null!=r.color&&(w.style.backgroundColor=r.color),w.style.transitionDuration=`${_}ms`,this._containerElement.appendChild(w);const S=window.getComputedStyle(w),V=S.transitionDuration,ne="none"===S.transitionProperty||"0s"===V||"0s, 0s"===V,pe=new eK(this,w,r,ne);w.style.transform="scale3d(1, 1, 1)",pe.state=0,r.persistent||(this._mostRecentTransientRipple=pe);let De=null;return!ne&&(_||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Re=()=>this._finishRippleTransition(pe),Fe=()=>this._destroyRipple(pe);w.addEventListener("transitionend",Re),w.addEventListener("transitioncancel",Fe),De={onTransitionEnd:Re,onTransitionCancel:Fe}}),this._activeRipples.set(pe,De),(ne||!_)&&this._finishRippleTransition(pe),pe}fadeOutRipple(n){if(2===n.state||3===n.state)return;const t=n.element,r={...DG,...n.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",n.state=2,(n._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(n)}fadeOutAll(){this._getActiveRipples().forEach(n=>n.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(n=>{n.config.persistent||n.fadeOut()})}setupTriggerEvents(n){const t=Wd(n);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(MG))}handleEvent(n){"mousedown"===n.type?this._onMousedown(n):"touchstart"===n.type?this._onTouchStart(n):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(TG),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(n){0===n.state?this._startFadeOutTransition(n):2===n.state&&this._destroyRipple(n)}_startFadeOutTransition(n){const t=n===this._mostRecentTransientRipple,{persistent:r}=n.config;n.state=1,!r&&(!t||!this._isPointerDown)&&n.fadeOut()}_destroyRipple(n){const t=this._activeRipples.get(n)??null;this._activeRipples.delete(n),this._activeRipples.size||(this._containerRect=null),n===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),n.state=3,null!==t&&(n.element.removeEventListener("transitionend",t.onTransitionEnd),n.element.removeEventListener("transitioncancel",t.onTransitionCancel)),n.element.remove()}_onMousedown(n){const t=gG(n),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(n.clientX,n.clientY,this._target.rippleConfig))}_onTouchStart(n){if(!this._target.rippleDisabled&&!vG(n)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=n.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(n=>{!n.config.persistent&&(1===n.state||n.config.terminateOnPointerUp&&0===n.state)&&n.fadeOut()}))}_registerEvents(n){this._ngZone.runOutsideAngular(()=>{n.forEach(t=>{this._triggerElement.addEventListener(t,this,B3)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(MG.forEach(n=>{this._triggerElement.removeEventListener(n,this,B3)}),this._pointerUpEventsRegistered&&TG.forEach(n=>{this._triggerElement.removeEventListener(n,this,B3)}))}}const iK=new dn("mat-ripple-global-options");let Zd=(()=>{class e{constructor(t,r,i,o,d){this._elementRef=t,this._animationMode=d,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new nK(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return e.\u0275fac=function(t){return new(t||e)(qe(Or),qe(Cr),qe(cs),qe(iK,8),qe(Xo,8))},e.\u0275dir=Sn({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&ii("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),e})(),Zg=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[ri,ri]}),e})(),EG=(()=>{class e{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1}}return e.\u0275fac=function(t){return new(t||e)(qe(Xo,8))},e.\u0275cmp=qn({type:e,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(t,r){2&t&&ii("mat-pseudo-checkbox-indeterminate","indeterminate"===r.state)("mat-pseudo-checkbox-checked","checked"===r.state)("mat-pseudo-checkbox-disabled",r.disabled)("_mat-animation-noopable","NoopAnimations"===r._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(t,r){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}'],encapsulation:2,changeDetection:0}),e})(),V3=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[ri]}),e})();const AG=new dn("MAT_OPTION_PARENT_COMPONENT"),IG=new dn("MatOptgroup");let aK=0;class oK{constructor(n,t=!1){this.source=n,this.isUserInput=t}}let sK=(()=>{class e{constructor(t,r,i,o){this._element=t,this._changeDetectorRef=r,this._parent=i,this.group=o,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+aK++,this.onSelectionChange=new En,this._stateChanges=new se}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=yr(t)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(t,r){const i=this._getHostElement();"function"==typeof i.focus&&i.focus(r)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!bc(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue=t,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new oK(this,t))}}return e.\u0275fac=function(t){El()},e.\u0275dir=Sn({type:e,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),e})(),z3=(()=>{class e extends sK{constructor(t,r,i,o){super(t,r,i,o)}}return e.\u0275fac=function(t){return new(t||e)(qe(Or),qe(Pi),qe(AG,8),qe(IG,8))},e.\u0275cmp=qn({type:e,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(t,r){1&t&&It("click",function(){return r._selectViaInteraction()})("keydown",function(o){return r._handleKeydown(o)}),2&t&&(Zo("id",r.id),Pr("tabindex",r._getTabIndex())("aria-selected",r._getAriaSelected())("aria-disabled",r.disabled.toString()),ii("mat-selected",r.selected)("mat-option-multiple",r.multiple)("mat-active",r.active)("mat-option-disabled",r.disabled))},exportAs:["matOption"],features:[Gn],ngContentSelectors:X$,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(t,r){1&t&&(La(),ir(0,Z$,1,2,"mat-pseudo-checkbox",0),je(1,"span",1),Yr(2),Ke(),ir(3,Y$,2,1,"span",2),yn(4,"div",3)),2&t&&(_t("ngIf",r.multiple),xt(3),_t("ngIf",r.group&&r.group._inert),xt(1),_t("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},dependencies:[Zd,xs,EG],styles:['.mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.mat-option.mat-active::before{content:""}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{right:auto;left:16px}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}'],encapsulation:2,changeDetection:0}),e})();function PG(e,n,t){if(t.length){let r=n.toArray(),i=t.toArray(),o=0;for(let d=0;d<e+1;d++)r[d].group&&r[d].group===i[o]&&o++;return o}return 0}let RG=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[Zg,Rl,ri,V3]}),e})();const cK=["mat-button",""],uK=["*"],hK=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],fK=jd(Uw(If(class{constructor(e){this._elementRef=e}})));let Cs=(()=>{class e extends fK{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const o of hK)this._hasHostAttributes(o)&&this._getHostElement().classList.add(o);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return e.\u0275fac=function(t){return new(t||e)(qe(Or),qe(wc),qe(Xo,8))},e.\u0275cmp=qn({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&Qr(Zd,5),2&t){let i;Qn(i=$n())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(Pr("disabled",r.disabled||null),ii("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Gn],attrs:cK,ngContentSelectors:uK,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(La(),je(0,"span",0),Yr(1),Ke(),yn(2,"span",1)(3,"span",2)),2&t&&(xt(2),ii("mat-button-ripple-round",r.isRoundButton||r.isIconButton),_t("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},dependencies:[Zd],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),e})(),LG=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[Zg,ri,ri]}),e})(),OG=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[ri,ri]}),e})();const pK=["addListener","removeListener"],gK=["addEventListener","removeEventListener"],vK=["on","off"];function Ol(e,n,t,r){if(le(t)&&(r=t,t=void 0),r)return Ol(e,n,t).pipe(CF(r));const[i,o]=function yK(e){return le(e.addEventListener)&&le(e.removeEventListener)}(e)?gK.map(d=>f=>e[d](n,f,t)):function mK(e){return le(e.addListener)&&le(e.removeListener)}(e)?pK.map(kG(e,n)):function _K(e){return le(e.on)&&le(e.off)}(e)?vK.map(kG(e,n)):[];if(!i&&Zt(e))return Fa(d=>Ol(d,n,t))(Ea(e));if(!i)throw new TypeError("Invalid event target");return new N(d=>{const f=(...g)=>d.next(1<g.length?g:g[0]);return i(f),()=>o(f)})}function kG(e,n){return t=>r=>e[t](n,r)}const Ww={schedule(e){let n=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Ww;r&&(n=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=n(o=>{t=void 0,e(o)});return new ye(()=>t?.(i))},requestAnimationFrame(...e){const{delegate:n}=Ww;return(n?.requestAnimationFrame||requestAnimationFrame)(...e)},cancelAnimationFrame(...e){const{delegate:n}=Ww;return(n?.cancelAnimationFrame||cancelAnimationFrame)(...e)},delegate:void 0};new class xK extends xF{flush(n){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;n=n||r.shift();do{if(i=n.execute(n.state,n.delay))break}while((n=r[0])&&n.id===t&&r.shift());if(this._active=!1,i){for(;(n=r[0])&&n.id===t&&r.shift();)n.unsubscribe();throw i}}}(class bK extends bF{constructor(n,t){super(n,t),this.scheduler=n,this.work=t}requestAsyncId(n,t,r=0){return null!==r&&r>0?super.requestAsyncId(n,t,r):(n.actions.push(this),n._scheduled||(n._scheduled=Ww.requestAnimationFrame(()=>n.flush(void 0))))}recycleAsyncId(n,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(n,t,r);const{actions:o}=n;null!=t&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==t&&(Ww.cancelAnimationFrame(t),n._scheduled=void 0)}});let H3,CK=1;const WI={};function NG(e){return e in WI&&(delete WI[e],!0)}const SK={setImmediate(e){const n=CK++;return WI[n]=!0,H3||(H3=Promise.resolve()),H3.then(()=>NG(n)&&e()),n},clearImmediate(e){NG(e)}},{setImmediate:DK,clearImmediate:MK}=SK,jI={setImmediate(...e){const{delegate:n}=jI;return(n?.setImmediate||DK)(...e)},clearImmediate(e){const{delegate:n}=jI;return(n?.clearImmediate||MK)(e)},delegate:void 0};new class EK extends xF{flush(n){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;n=n||r.shift();do{if(i=n.execute(n.state,n.delay))break}while((n=r[0])&&n.id===t&&r.shift());if(this._active=!1,i){for(;(n=r[0])&&n.id===t&&r.shift();)n.unsubscribe();throw i}}}(class TK extends bF{constructor(n,t){super(n,t),this.scheduler=n,this.work=t}requestAsyncId(n,t,r=0){return null!==r&&r>0?super.requestAsyncId(n,t,r):(n.actions.push(this),n._scheduled||(n._scheduled=jI.setImmediate(n.flush.bind(n,void 0))))}recycleAsyncId(n,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(n,t,r);const{actions:o}=n;null!=t&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==t&&(jI.clearImmediate(t),n._scheduled=void 0)}});function FG(e,n=hw){return function IK(e){return ge((n,t)=>{let r=!1,i=null,o=null,d=!1;const f=()=>{if(o?.unsubscribe(),o=null,r){r=!1;const _=i;i=null,t.next(_)}d&&t.complete()},g=()=>{o=null,d&&t.complete()};n.subscribe(Ce(t,_=>{r=!0,i=_,o||Ea(e(_)).subscribe(o=Ce(t,f,g))},()=>{d=!0,(!r||!o||o.closed)&&t.complete()}))})}(()=>Rz(e,n))}let U3=(()=>{class e{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new se,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new N(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(FG(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):er()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Ki(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,t)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=Wd(r),o=t.getElementRef().nativeElement;do{if(i==o)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Ol(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return e.\u0275fac=function(t){return new(t||e)(Nt(Cr),Nt(cs),Nt(Rr,8))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),G3=(()=>{class e{constructor(t,r,i,o){this.elementRef=t,this.scrollDispatcher=r,this.ngZone=i,this.dir=o,this._destroyed=new se,this._elementScrolled=new N(d=>this.ngZone.runOutsideAngular(()=>Ol(this.elementRef.nativeElement,"scroll").pipe(Vi(this._destroyed)).subscribe(d)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const r=this.elementRef.nativeElement,i=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=i?t.end:t.start),null==t.right&&(t.right=i?t.start:t.end),null!=t.bottom&&(t.top=r.scrollHeight-r.clientHeight-t.bottom),i&&0!=kw()?(null!=t.left&&(t.right=r.scrollWidth-r.clientWidth-t.left),2==kw()?t.left=t.right:1==kw()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=r.scrollWidth-r.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const r=this.elementRef.nativeElement;tG()?r.scrollTo(t):(null!=t.top&&(r.scrollTop=t.top),null!=t.left&&(r.scrollLeft=t.left))}measureScrollOffset(t){const r="left",i="right",o=this.elementRef.nativeElement;if("top"==t)return o.scrollTop;if("bottom"==t)return o.scrollHeight-o.clientHeight-o.scrollTop;const d=this.dir&&"rtl"==this.dir.value;return"start"==t?t=d?i:r:"end"==t&&(t=d?r:i),d&&2==kw()?t==r?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:d&&1==kw()?t==r?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:t==r?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}}return e.\u0275fac=function(t){return new(t||e)(qe(Or),qe(U3),qe(Cr),qe(Ru,8))},e.\u0275dir=Sn({type:e,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),e})(),jw=(()=>{class e{constructor(t,r,i){this._platform=t,this._change=new se,this._changeListener=o=>{this._change.next(o)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,o=i.getBoundingClientRect();return{top:-o.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-o.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(FG(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return e.\u0275fac=function(t){return new(t||e)(Nt(cs),Nt(Cr),Nt(Rr,8))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Zw=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({}),e})(),BG=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[Hw,Zw,Hw,Zw]}),e})();const VG=tG();class LK{constructor(n,t){this._viewportRuler=n,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const n=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=n.style.left||"",this._previousHTMLStyles.top=n.style.top||"",n.style.left=_o(-this._previousScrollPosition.left),n.style.top=_o(-this._previousScrollPosition.top),n.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const n=this._document.documentElement,r=n.style,i=this._document.body.style,o=r.scrollBehavior||"",d=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,n.classList.remove("cdk-global-scrollblock"),VG&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),VG&&(r.scrollBehavior=o,i.scrollBehavior=d)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class OK{constructor(n,t,r,i){this._scrollDispatcher=n,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(n){this._overlayRef=n}enable(){if(this._scrollSubscription)return;const n=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=n.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=n.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class zG{enable(){}disable(){}attach(){}}function W3(e,n){return n.some(t=>e.bottom<t.top||e.top>t.bottom||e.right<t.left||e.left>t.right)}function HG(e,n){return n.some(t=>e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right)}class kK{constructor(n,t,r,i){this._scrollDispatcher=n,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(n){this._overlayRef=n}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();W3(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let NK=(()=>{class e{constructor(t,r,i,o){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new zG,this.close=d=>new OK(this._scrollDispatcher,this._ngZone,this._viewportRuler,d),this.block=()=>new LK(this._viewportRuler,this._document),this.reposition=d=>new kK(this._scrollDispatcher,this._viewportRuler,this._ngZone,d),this._document=o}}return e.\u0275fac=function(t){return new(t||e)(Nt(U3),Nt(jw),Nt(Cr),Nt(Rr))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class ZI{constructor(n){if(this.scrollStrategy=new zG,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,n){const t=Object.keys(n);for(const r of t)void 0!==n[r]&&(this[r]=n[r])}}}class FK{constructor(n,t){this.connectionPair=n,this.scrollableViewProperties=t}}let UG=(()=>{class e{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return e.\u0275fac=function(t){return new(t||e)(Nt(Rr))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),BK=(()=>{class e extends UG{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const o=this._attachedOverlays;for(let d=o.length-1;d>-1;d--)if(o[d]._keydownEvents.observers.length>0){const f=o[d]._keydownEvents;this._ngZone?this._ngZone.run(()=>f.next(i)):f.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return e.\u0275fac=function(t){return new(t||e)(Nt(Rr),Nt(Cr,8))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),VK=(()=>{class e extends UG{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=Wg(o)},this._clickListener=o=>{const d=Wg(o),f="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:d;this._pointerDownEventTarget=null;const g=this._attachedOverlays.slice();for(let _=g.length-1;_>-1;_--){const w=g[_];if(w._outsidePointerEvents.observers.length<1||!w.hasAttached())continue;if(w.overlayElement.contains(d)||w.overlayElement.contains(f))break;const S=w._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>S.next(o)):S.next(o)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return e.\u0275fac=function(t){return new(t||e)(Nt(Rr),Nt(cs),Nt(Cr,8))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),YI=(()=>{class e{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||P3()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<i.length;o++)i[o].remove()}const r=this._document.createElement("div");r.classList.add(t),P3()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return e.\u0275fac=function(t){return new(t||e)(Nt(Rr),Nt(cs))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class Yw{constructor(n,t,r,i,o,d,f,g,_,w=!1){this._portalOutlet=n,this._host=t,this._pane=r,this._config=i,this._ngZone=o,this._keyboardDispatcher=d,this._document=f,this._location=g,this._outsideClickDispatcher=_,this._animationsDisabled=w,this._backdropElement=null,this._backdropClick=new se,this._attachments=new se,this._detachments=new se,this._locationChanges=ye.EMPTY,this._backdropClickHandler=S=>this._backdropClick.next(S),this._backdropTransitionendHandler=S=>{this._disposeBackdrop(S.target)},this._keydownEvents=new se,this._outsidePointerEvents=new se,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(n){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(n);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(vo(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const n=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),n}dispose(){const n=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,n&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(n){n!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=n,this.hasAttached()&&(n.attach(this),this.updatePosition()))}updateSize(n){this._config={...this._config,...n},this._updateElementSize()}setDirection(n){this._config={...this._config,direction:n},this._updateElementDirection()}addPanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!0)}removePanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!1)}getDirection(){const n=this._config.direction;return n?"string"==typeof n?n:n.value:"ltr"}updateScrollStrategy(n){n!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=n,this.hasAttached()&&(n.attach(this),n.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const n=this._pane.style;n.width=_o(this._config.width),n.height=_o(this._config.height),n.minWidth=_o(this._config.minWidth),n.minHeight=_o(this._config.minHeight),n.maxWidth=_o(this._config.maxWidth),n.maxHeight=_o(this._config.maxHeight)}_togglePointerEvents(n){this._pane.style.pointerEvents=n?"":"none"}_attachBackdrop(){const n="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(n)})}):this._backdropElement.classList.add(n)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const n=this._backdropElement;if(n){if(this._animationsDisabled)return void this._disposeBackdrop(n);n.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{n.addEventListener("transitionend",this._backdropTransitionendHandler)}),n.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(n)},500))}}_toggleClasses(n,t,r){const i=VI(t||[]).filter(o=>!!o);i.length&&(r?n.classList.add(...i):n.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const n=this._ngZone.onStable.pipe(Vi(Vn(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),n.unsubscribe())})})}_disposeScrollStrategy(){const n=this._scrollStrategy;n&&(n.disable(),n.detach&&n.detach())}_disposeBackdrop(n){n&&(n.removeEventListener("click",this._backdropClickHandler),n.removeEventListener("transitionend",this._backdropTransitionendHandler),n.remove(),this._backdropElement===n&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const GG="cdk-overlay-connected-position-bounding-box",zK=/([A-Za-z%]+)$/;class HK{constructor(n,t,r,i,o){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new se,this._resizeSubscription=ye.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(n)}get positions(){return this._preferredPositions}attach(n){this._validatePositions(),n.hostElement.classList.add(GG),this._overlayRef=n,this._boundingBox=n.hostElement,this._pane=n.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const n=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,o=[];let d;for(let f of this._preferredPositions){let g=this._getOriginPoint(n,i,f),_=this._getOverlayPoint(g,t,f),w=this._getOverlayFit(_,t,r,f);if(w.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(f,g);this._canFitWithFlexibleDimensions(w,_,r)?o.push({position:f,origin:g,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(g,f)}):(!d||d.overlayFit.visibleArea<w.visibleArea)&&(d={overlayFit:w,overlayPoint:_,originPoint:g,position:f,overlayRect:t})}if(o.length){let f=null,g=-1;for(const _ of o){const w=_.boundingBoxRect.width*_.boundingBoxRect.height*(_.position.weight||1);w>g&&(g=w,f=_)}return this._isPushed=!1,void this._applyPosition(f.position,f.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(d.position,d.originPoint);this._applyPosition(d.position,d.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Yg(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(GG),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const n=this._lastPosition;if(n){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,n);this._applyPosition(n,t)}else this.apply()}withScrollableContainers(n){return this._scrollables=n,this}withPositions(n){return this._preferredPositions=n,-1===n.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(n){return this._viewportMargin=n,this}withFlexibleDimensions(n=!0){return this._hasFlexibleDimensions=n,this}withGrowAfterOpen(n=!0){return this._growAfterOpen=n,this}withPush(n=!0){return this._canPush=n,this}withLockedPosition(n=!0){return this._positionLocked=n,this}setOrigin(n){return this._origin=n,this}withDefaultOffsetX(n){return this._offsetX=n,this}withDefaultOffsetY(n){return this._offsetY=n,this}withTransformOriginOn(n){return this._transformOriginSelector=n,this}_getOriginPoint(n,t,r){let i,o;if("center"==r.originX)i=n.left+n.width/2;else{const d=this._isRtl()?n.right:n.left,f=this._isRtl()?n.left:n.right;i="start"==r.originX?d:f}return t.left<0&&(i-=t.left),o="center"==r.originY?n.top+n.height/2:"top"==r.originY?n.top:n.bottom,t.top<0&&(o-=t.top),{x:i,y:o}}_getOverlayPoint(n,t,r){let i,o;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,o="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:n.x+i,y:n.y+o}}_getOverlayFit(n,t,r,i){const o=jG(t);let{x:d,y:f}=n,g=this._getOffset(i,"x"),_=this._getOffset(i,"y");g&&(d+=g),_&&(f+=_);let k=0-f,V=f+o.height-r.height,ne=this._subtractOverflows(o.width,0-d,d+o.width-r.width),pe=this._subtractOverflows(o.height,k,V),De=ne*pe;return{visibleArea:De,isCompletelyWithinViewport:o.width*o.height===De,fitsInViewportVertically:pe===o.height,fitsInViewportHorizontally:ne==o.width}}_canFitWithFlexibleDimensions(n,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,o=r.right-t.x,d=WG(this._overlayRef.getConfig().minHeight),f=WG(this._overlayRef.getConfig().minWidth),_=n.fitsInViewportHorizontally||null!=f&&f<=o;return(n.fitsInViewportVertically||null!=d&&d<=i)&&_}return!1}_pushOverlayOnScreen(n,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:n.x+this._previousPushAmount.x,y:n.y+this._previousPushAmount.y};const i=jG(t),o=this._viewportRect,d=Math.max(n.x+i.width-o.width,0),f=Math.max(n.y+i.height-o.height,0),g=Math.max(o.top-r.top-n.y,0),_=Math.max(o.left-r.left-n.x,0);let w=0,S=0;return w=i.width<=o.width?_||-d:n.x<this._viewportMargin?o.left-r.left-n.x:0,S=i.height<=o.height?g||-f:n.y<this._viewportMargin?o.top-r.top-n.y:0,this._previousPushAmount={x:w,y:S},{x:n.x+w,y:n.y+S}}_applyPosition(n,t){if(this._setTransformOrigin(n),this._setOverlayElementStyles(t,n),this._setBoundingBoxStyles(t,n),n.panelClass&&this._addPanelClasses(n.panelClass),this._lastPosition=n,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new FK(n,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(n){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=n.overlayY;r="center"===n.overlayX?"center":this._isRtl()?"start"===n.overlayX?"right":"left":"start"===n.overlayX?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(n,t){const r=this._viewportRect,i=this._isRtl();let o,d,f,w,S,k;if("top"===t.overlayY)d=n.y,o=r.height-d+this._viewportMargin;else if("bottom"===t.overlayY)f=r.height-n.y+2*this._viewportMargin,o=r.height-f+this._viewportMargin;else{const V=Math.min(r.bottom-n.y+r.top,n.y),ne=this._lastBoundingBoxSize.height;o=2*V,d=n.y-V,o>ne&&!this._isInitialRender&&!this._growAfterOpen&&(d=n.y-ne/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)k=r.width-n.x+this._viewportMargin,w=n.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)S=n.x,w=r.right-n.x;else{const V=Math.min(r.right-n.x+r.left,n.x),ne=this._lastBoundingBoxSize.width;w=2*V,S=n.x-V,w>ne&&!this._isInitialRender&&!this._growAfterOpen&&(S=n.x-ne/2)}return{top:d,left:S,bottom:f,right:k,width:w,height:o}}_setBoundingBoxStyles(n,t){const r=this._calculateBoundingBoxRect(n,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,d=this._overlayRef.getConfig().maxWidth;i.height=_o(r.height),i.top=_o(r.top),i.bottom=_o(r.bottom),i.width=_o(r.width),i.left=_o(r.left),i.right=_o(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",o&&(i.maxHeight=_o(o)),d&&(i.maxWidth=_o(d))}this._lastBoundingBoxSize=r,Yg(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Yg(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Yg(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(n,t){const r={},i=this._hasExactPosition(),o=this._hasFlexibleDimensions,d=this._overlayRef.getConfig();if(i){const w=this._viewportRuler.getViewportScrollPosition();Yg(r,this._getExactOverlayY(t,n,w)),Yg(r,this._getExactOverlayX(t,n,w))}else r.position="static";let f="",g=this._getOffset(t,"x"),_=this._getOffset(t,"y");g&&(f+=`translateX(${g}px) `),_&&(f+=`translateY(${_}px)`),r.transform=f.trim(),d.maxHeight&&(i?r.maxHeight=_o(d.maxHeight):o&&(r.maxHeight="")),d.maxWidth&&(i?r.maxWidth=_o(d.maxWidth):o&&(r.maxWidth="")),Yg(this._pane.style,r)}_getExactOverlayY(n,t,r){let i={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,n);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),"bottom"===n.overlayY?i.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":i.top=_o(o.y),i}_getExactOverlayX(n,t,r){let d,i={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,n);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),d=this._isRtl()?"end"===n.overlayX?"left":"right":"end"===n.overlayX?"right":"left","right"===d?i.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":i.left=_o(o.x),i}_getScrollVisibility(){const n=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:HG(n,r),isOriginOutsideView:W3(n,r),isOverlayClipped:HG(t,r),isOverlayOutsideView:W3(t,r)}}_subtractOverflows(n,...t){return t.reduce((r,i)=>r-Math.max(i,0),n)}_getNarrowedViewportRect(){const n=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+n-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:n-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(n,t){return"x"===t?n.offsetX??this._offsetX:n.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(n){this._pane&&VI(n).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(n=>{this._pane.classList.remove(n)}),this._appliedPanelClasses=[])}_getOriginRect(){const n=this._origin;if(n instanceof Or)return n.nativeElement.getBoundingClientRect();if(n instanceof Element)return n.getBoundingClientRect();const t=n.width||0,r=n.height||0;return{top:n.y,bottom:n.y+r,left:n.x,right:n.x+t,height:r,width:t}}}function Yg(e,n){for(let t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}function WG(e){if("number"!=typeof e&&null!=e){const[n,t]=e.split(zK);return t&&"px"!==t?null:parseFloat(n)}return e||null}function jG(e){return{top:Math.floor(e.top),right:Math.floor(e.right),bottom:Math.floor(e.bottom),left:Math.floor(e.left),width:Math.floor(e.width),height:Math.floor(e.height)}}const ZG="cdk-global-overlay-wrapper";class UK{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(n){const t=n.getConfig();this._overlayRef=n,this._width&&!t.width&&n.updateSize({width:this._width}),this._height&&!t.height&&n.updateSize({height:this._height}),n.hostElement.classList.add(ZG),this._isDisposed=!1}top(n=""){return this._bottomOffset="",this._topOffset=n,this._alignItems="flex-start",this}left(n=""){return this._xOffset=n,this._xPosition="left",this}bottom(n=""){return this._topOffset="",this._bottomOffset=n,this._alignItems="flex-end",this}right(n=""){return this._xOffset=n,this._xPosition="right",this}start(n=""){return this._xOffset=n,this._xPosition="start",this}end(n=""){return this._xOffset=n,this._xPosition="end",this}width(n=""){return this._overlayRef?this._overlayRef.updateSize({width:n}):this._width=n,this}height(n=""){return this._overlayRef?this._overlayRef.updateSize({height:n}):this._height=n,this}centerHorizontally(n=""){return this.left(n),this._xPosition="center",this}centerVertically(n=""){return this.top(n),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const n=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:o,maxWidth:d,maxHeight:f}=r,g=!("100%"!==i&&"100vw"!==i||d&&"100%"!==d&&"100vw"!==d),_=!("100%"!==o&&"100vh"!==o||f&&"100%"!==f&&"100vh"!==f),w=this._xPosition,S=this._xOffset,k="rtl"===this._overlayRef.getConfig().direction;let V="",ne="",pe="";g?pe="flex-start":"center"===w?(pe="center",k?ne=S:V=S):k?"left"===w||"end"===w?(pe="flex-end",V=S):("right"===w||"start"===w)&&(pe="flex-start",ne=S):"left"===w||"start"===w?(pe="flex-start",V=S):("right"===w||"end"===w)&&(pe="flex-end",ne=S),n.position=this._cssPosition,n.marginLeft=g?"0":V,n.marginTop=_?"0":this._topOffset,n.marginBottom=this._bottomOffset,n.marginRight=g?"0":ne,t.justifyContent=pe,t.alignItems=_?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const n=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(ZG),r.justifyContent=r.alignItems=n.marginTop=n.marginBottom=n.marginLeft=n.marginRight=n.position="",this._overlayRef=null,this._isDisposed=!0}}let GK=(()=>{class e{constructor(t,r,i,o){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=o}global(){return new UK}flexibleConnectedTo(t){return new HK(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return e.\u0275fac=function(t){return new(t||e)(Nt(jw),Nt(Rr),Nt(cs),Nt(YI))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),WK=0,nu=(()=>{class e{constructor(t,r,i,o,d,f,g,_,w,S,k,V){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=o,this._keyboardDispatcher=d,this._injector=f,this._ngZone=g,this._document=_,this._directionality=w,this._location=S,this._outsideClickDispatcher=k,this._animationsModuleType=V}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),o=this._createPortalOutlet(i),d=new ZI(t);return d.direction=d.direction||this._directionality.value,new Yw(o,r,i,d,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+WK++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(cf)),new qX(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return e.\u0275fac=function(t){return new(t||e)(Nt(NK),Nt(YI),Nt(od),Nt(GK),Nt(BK),Nt(Ga),Nt(Cr),Nt(Rr),Nt(Ru),Nt(Sg),Nt(VK),Nt(Xo,8))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac}),e})();const jK=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],YG=new dn("cdk-connected-overlay-scroll-strategy");let XG=(()=>{class e{constructor(t){this.elementRef=t}}return e.\u0275fac=function(t){return new(t||e)(qe(Or))},e.\u0275dir=Sn({type:e,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),e})(),$G=(()=>{class e{constructor(t,r,i,o,d){this._overlay=t,this._dir=d,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=ye.EMPTY,this._attachSubscription=ye.EMPTY,this._detachSubscription=ye.EMPTY,this._positionSubscription=ye.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new En,this.positionChange=new En,this.attach=new En,this.detach=new En,this.overlayKeydown=new En,this.overlayOutsideClick=new En,this._templatePortal=new NI(r,i),this._scrollStrategyFactory=o,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=yr(t)}get lockPosition(){return this._lockPosition}set lockPosition(t){this._lockPosition=yr(t)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(t){this._flexibleDimensions=yr(t)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(t){this._growAfterOpen=yr(t)}get push(){return this._push}set push(t){this._push=yr(t)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=jK);const t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(r=>{this.overlayKeydown.next(r),27===r.keyCode&&!this.disableClose&&!bc(r)&&(r.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(r=>{this.overlayOutsideClick.next(r)})}_buildConfig(){const t=this._position=this.positionStrategy||this._createPositionStrategy(),r=new ZI({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(r.width=this.width),(this.height||0===this.height)&&(r.height=this.height),(this.minWidth||0===this.minWidth)&&(r.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(r.minHeight=this.minHeight),this.backdropClass&&(r.backdropClass=this.backdropClass),this.panelClass&&(r.panelClass=this.panelClass),r}_updatePositionStrategy(t){const r=this.positions.map(i=>({originX:i.originX,originY:i.originY,overlayX:i.overlayX,overlayY:i.overlayY,offsetX:i.offsetX||this.offsetX,offsetY:i.offsetY||this.offsetY,panelClass:i.panelClass||void 0}));return t.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(r).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const t=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(t),t}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof XG?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(ZH(()=>this.positionChange.observers.length>0)).subscribe(t=>{this.positionChange.emit(t),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(qe(nu),qe(il),qe(as),qe(YG),qe(Ru,8))},e.\u0275dir=Sn({type:e,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[ba]}),e})();const YK={provide:YG,deps:[nu],useFactory:function ZK(e){return()=>e.scrollStrategies.reposition()}};let j3=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({providers:[nu,YK],imports:[Hw,gy,BG,BG]}),e})();function XK(e,n){}class XI{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let KG=(()=>{class e extends T3{constructor(t,r,i,o,d,f,g,_){super(),this._elementRef=t,this._focusTrapFactory=r,this._config=o,this._interactivityChecker=d,this._ngZone=f,this._overlayRef=g,this._focusMonitor=_,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=w=>{this._portalOutlet.hasAttached();const S=this._portalOutlet.attachDomPortal(w);return this._contentAttached(),S},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=i}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),r}attachTemplatePortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let r=null;if("string"==typeof t?r=this._document.querySelector(t):"boolean"==typeof t?r=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(r=t),this._config.restoreFocus&&r&&"function"==typeof r.focus){const i=I3(),o=this._elementRef.nativeElement;(!i||i===this._document.body||i===o||o.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=I3();return t===r||t.contains(r)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=I3())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return e.\u0275fac=function(t){return new(t||e)(qe(Or),qe(HI),qe(Rr,8),qe(XI),qe(zw),qe(Cr),qe(Yw),qe(wc))},e.\u0275cmp=qn({type:e,selectors:[["cdk-dialog-container"]],viewQuery:function(t,r){if(1&t&&Qr(FI,7),2&t){let i;Qn(i=$n())&&(r._portalOutlet=i.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,r){2&t&&Pr("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[Gn],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,r){1&t&&ir(0,XK,0,0,"ng-template",0)},dependencies:[FI],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),e})();class Z3{constructor(n,t){this.overlayRef=n,this.config=t,this.closed=new se,this.disableClose=t.disableClose,this.backdropClick=n.backdropClick(),this.keydownEvents=n.keydownEvents(),this.outsidePointerEvents=n.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(r=>{27===r.keyCode&&!this.disableClose&&!bc(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(n,t){if(this.containerInstance){const r=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this.overlayRef.dispose(),r.next(n),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(n="",t=""){return this.overlayRef.updateSize({width:n,height:t}),this}addPanelClass(n){return this.overlayRef.addPanelClass(n),this}removePanelClass(n){return this.overlayRef.removePanelClass(n),this}}const QG=new dn("DialogScrollStrategy"),$K=new dn("DialogData"),KK=new dn("DefaultDialogConfig"),qK={provide:QG,deps:[nu],useFactory:function QK(e){return()=>e.scrollStrategies.block()}};let JK=0,qG=(()=>{class e{constructor(t,r,i,o,d,f){this._overlay=t,this._injector=r,this._defaultOptions=i,this._parentDialog=o,this._overlayContainer=d,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new se,this._afterOpenedAtThisLevel=new se,this._ariaHiddenElements=new Map,this.afterAllClosed=yw(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Hs(void 0))),this._scrollStrategy=f}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(t,r){(r={...this._defaultOptions||new XI,...r}).id=r.id||"cdk-dialog-"+JK++,r.id&&this.getDialogById(r.id);const o=this._getOverlayConfig(r),d=this._overlay.create(o),f=new Z3(d,r),g=this._attachContainer(d,f,r);return f.containerInstance=g,this._attachDialogContent(t,f,g,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(f),f.closed.subscribe(()=>this._removeOpenDialog(f,!0)),this.afterOpened.next(f),f}closeAll(){Y3(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){Y3(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),Y3(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const r=new ZI({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachContainer(t,r,i){const o=i.injector||i.viewContainerRef?.injector,d=[{provide:XI,useValue:i},{provide:Z3,useValue:r},{provide:Yw,useValue:t}];let f;i.container?"function"==typeof i.container?f=i.container:(f=i.container.type,d.push(...i.container.providers(i))):f=KG;const g=new kI(f,i.viewContainerRef,Ga.create({parent:o||this._injector,providers:d}),i.componentFactoryResolver);return t.attach(g).instance}_attachDialogContent(t,r,i,o){if(t instanceof il){const d=this._createInjector(o,r,i,void 0);let f={$implicit:o.data,dialogRef:r};o.templateContext&&(f={...f,..."function"==typeof o.templateContext?o.templateContext():o.templateContext}),i.attachTemplatePortal(new NI(t,null,f,d))}else{const d=this._createInjector(o,r,i,this._injector),f=i.attachComponentPortal(new kI(t,o.viewContainerRef,d,o.componentFactoryResolver));r.componentInstance=f.instance}}_createInjector(t,r,i,o){const d=t.injector||t.viewContainerRef?.injector,f=[{provide:$K,useValue:t.data},{provide:Z3,useValue:r}];return t.providers&&("function"==typeof t.providers?f.push(...t.providers(r,t,i)):f.push(...t.providers)),t.direction&&(!d||!d.get(Ru,null,ar.Optional))&&f.push({provide:Ru,useValue:{value:t.direction,change:er()}}),Ga.create({parent:d||o,providers:f})}_removeOpenDialog(t,r){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,d)=>{o?d.setAttribute("aria-hidden",o):d.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let i=r.length-1;i>-1;i--){const o=r[i];o!==t&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return e.\u0275fac=function(t){return new(t||e)(Nt(nu),Nt(Ga),Nt(KK,8),Nt(e,12),Nt(YI),Nt(QG))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac}),e})();function Y3(e,n){let t=e.length;for(;t--;)n(e[t])}let eQ=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({providers:[qG,qK],imports:[j3,gy,H$,gy]}),e})();class JG{}const Yd="*";function Xd(e,n){return{type:7,name:e,definitions:n,options:{}}}function kl(e,n=null){return{type:4,styles:n,timings:e}}function e8(e,n=null){return{type:3,steps:e,options:n}}function t8(e,n=null){return{type:2,steps:e,options:n}}function va(e){return{type:6,styles:e,offset:null}}function dl(e,n,t){return{type:0,name:e,styles:n,options:t}}function n8(e){return{type:5,steps:e}}function hl(e,n,t=null){return{type:1,expr:e,animation:n,options:t}}function X3(e=null){return{type:9,options:e}}function $3(e,n,t=null){return{type:11,selector:e,animation:n,options:t}}function r8(e){Promise.resolve().then(e)}class Xw{constructor(n=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=n+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){r8(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const t="start"==n?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class i8{constructor(n){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=n;let t=0,r=0,i=0;const o=this.players.length;0==o?r8(()=>this._onFinish()):this.players.forEach(d=>{d.onDone(()=>{++t==o&&this._onFinish()}),d.onDestroy(()=>{++r==o&&this._onDestroy()}),d.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((d,f)=>Math.max(d,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const t=n*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const n=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const t="start"==n?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function nQ(e,n){}const wy={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},rQ={dialogContainer:Xd("dialogContainer",[dl("void, exit",va({opacity:0,transform:"scale(0.7)"})),dl("enter",va({transform:"none"})),hl("* => enter",e8([kl("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",va({transform:"none",opacity:1})),$3("@*",X3(),{optional:!0})]),wy),hl("* => void, * => exit",e8([kl("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",va({opacity:0})),$3("@*",X3(),{optional:!0})]),wy)])};class $I{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=wy.params.enterAnimationDuration,this.exitAnimationDuration=wy.params.exitAnimationDuration}}let iQ=(()=>{class e extends KG{constructor(t,r,i,o,d,f,g,_){super(t,r,i,o,d,f,g,_),this._animationStateChanged=new En}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}}return e.\u0275fac=function(t){return new(t||e)(qe(Or),qe(HI),qe(Rr,8),qe($I),qe(zw),qe(Cr),qe(Yw),qe(wc))},e.\u0275cmp=qn({type:e,selectors:[["ng-component"]],features:[Gn],decls:0,vars:0,template:function(t,r){},encapsulation:2}),e})(),aQ=(()=>{class e extends iQ{constructor(t,r,i,o,d,f,g,_,w){super(t,r,i,o,d,f,g,w),this._changeDetectorRef=_,this._state="enter"}_onAnimationDone({toState:t,totalTime:r}){"enter"===t?this._openAnimationDone(r):"exit"===t&&this._animationStateChanged.next({state:"closed",totalTime:r})}_onAnimationStart({toState:t,totalTime:r}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:r}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:r})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||wy.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||wy.params.exitAnimationDuration}}}}return e.\u0275fac=function(t){return new(t||e)(qe(Or),qe(HI),qe(Rr,8),qe($I),qe(zw),qe(Cr),qe(Yw),qe(Pi),qe(wc))},e.\u0275cmp=qn({type:e,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(t,r){1&t&&Km("@dialogContainer.start",function(o){return r._onAnimationStart(o)})("@dialogContainer.done",function(o){return r._onAnimationDone(o)}),2&t&&(Zo("id",r._config.id),Pr("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),ef("@dialogContainer",r._getAnimationState()))},features:[Gn],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,r){1&t&&ir(0,nQ,0,0,"ng-template",0)},dependencies:[FI],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[rQ.dialogContainer]}}),e})();class oQ{constructor(n,t,r){this._ref=n,this._containerInstance=r,this._afterOpened=new se,this._beforeClosed=new se,this._state=0,this.disableClose=t.disableClose,this.id=n.id,r._animationStateChanged.pipe(Ki(i=>"opened"===i.state),vo(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),r._animationStateChanged.pipe(Ki(i=>"closed"===i.state),vo(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),n.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Vn(this.backdropClick(),this.keydownEvents().pipe(Ki(i=>27===i.keyCode&&!this.disableClose&&!bc(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),function sQ(e,n,t){e._closeInteractionType=n,e.close(t)}(this,"keydown"===i.type?"keyboard":"mouse"))})}close(n){this._result=n,this._containerInstance._animationStateChanged.pipe(Ki(t=>"closing"===t.state),vo(1)).subscribe(t=>{this._beforeClosed.next(n),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(n){let t=this._ref.config.positionStrategy;return n&&(n.left||n.right)?n.left?t.left(n.left):t.right(n.right):t.centerHorizontally(),n&&(n.top||n.bottom)?n.top?t.top(n.top):t.bottom(n.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(n="",t=""){return this._ref.updateSize(n,t),this}addPanelClass(n){return this._ref.addPanelClass(n),this}removePanelClass(n){return this._ref.removePanelClass(n),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const lQ=new dn("MatDialogData"),cQ=new dn("mat-dialog-default-options"),a8=new dn("mat-dialog-scroll-strategy"),dQ={provide:a8,deps:[nu],useFactory:function uQ(e){return()=>e.scrollStrategies.block()}};let hQ=0,fQ=(()=>{class e{constructor(t,r,i,o,d,f,g,_,w,S){this._overlay=t,this._defaultOptions=i,this._parentDialog=o,this._dialogRefConstructor=g,this._dialogContainerType=_,this._dialogDataToken=w,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new se,this._afterOpenedAtThisLevel=new se,this._idPrefix="mat-dialog-",this.afterAllClosed=yw(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Hs(void 0))),this._scrollStrategy=f,this._dialog=r.get(qG)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,r){let i;(r={...this._defaultOptions||new $I,...r}).id=r.id||`${this._idPrefix}${hQ++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();const o=this._dialog.open(t,{...r,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:$I,useValue:r},{provide:XI,useValue:r}]},templateContext:()=>({dialogRef:i}),providers:(d,f,g)=>(i=new this._dialogRefConstructor(d,r,g),i.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:g},{provide:this._dialogDataToken,useValue:f.data},{provide:this._dialogRefConstructor,useValue:i}])});return i.componentInstance=o.componentInstance,this.openDialogs.push(i),this.afterOpened.next(i),i.afterClosed().subscribe(()=>{const d=this.openDialogs.indexOf(i);d>-1&&(this.openDialogs.splice(d,1),this.openDialogs.length||this._getAfterAllClosed().next())}),i}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}}return e.\u0275fac=function(t){El()},e.\u0275prov=Jt({token:e,factory:e.\u0275fac}),e})(),o8=(()=>{class e extends fQ{constructor(t,r,i,o,d,f,g,_){super(t,r,o,f,g,d,oQ,aQ,lQ,_)}}return e.\u0275fac=function(t){return new(t||e)(Nt(nu),Nt(Ga),Nt(Sg,8),Nt(cQ,8),Nt(a8),Nt(e,12),Nt(YI),Nt(Xo,8))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac}),e})(),pQ=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({providers:[o8,dQ],imports:[eQ,j3,gy,ri,ri]}),e})();class gQ{}class Rf{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?this.lazyInit="string"==typeof n?()=>{this.headers=new Map,n.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=i.toLowerCase(),d=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(d):this.headers.set(o,[d])}})}:()=>{this.headers=new Map,Object.keys(n).forEach(t=>{let r=n[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const t=this.headers.get(n.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,t){return this.clone({name:n,value:t,op:"a"})}set(n,t){return this.clone({name:n,value:t,op:"s"})}delete(n,t){return this.clone({name:n,value:t,op:"d"})}maybeSetNormalizedName(n,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,n)}init(){this.lazyInit&&(this.lazyInit instanceof Rf?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(t=>{this.headers.set(t,n.headers.get(t)),this.normalizedNames.set(t,n.normalizedNames.get(t))})}clone(n){const t=new Rf;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Rf?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([n]),t}applyUpdate(n){const t=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(n.name,t);const i=("a"===n.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=n.value;if(o){let d=this.headers.get(t);if(!d)return;d=d.filter(f=>-1===o.indexOf(f)),0===d.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,d)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>n(this.normalizedNames.get(t),this.headers.get(t)))}}class vQ{encodeKey(n){return s8(n)}encodeValue(n){return s8(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const _Q=/%(\d[a-f0-9])/gi,yQ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function s8(e){return encodeURIComponent(e).replace(_Q,(n,t)=>yQ[t]??n)}function KI(e){return`${e}`}class Lf{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new vQ,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function mQ(e,n){const t=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[d,f]=-1==o?[n.decodeKey(i),""]:[n.decodeKey(i.slice(0,o)),n.decodeValue(i.slice(o+1))],g=t.get(d)||[];g.push(f),t.set(d,g)}),t}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(t=>{const r=n.fromObject[t],i=Array.isArray(r)?r.map(KI):[KI(r)];this.map.set(t,i)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const t=this.map.get(n);return t?t[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,t){return this.clone({param:n,value:t,op:"a"})}appendAll(n){const t=[];return Object.keys(n).forEach(r=>{const i=n[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(n,t){return this.clone({param:n,value:t,op:"s"})}delete(n,t){return this.clone({param:n,value:t,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const t=this.encoder.encodeKey(n);return this.map.get(n).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const t=new Lf({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(n),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const t=("a"===n.op?this.map.get(n.param):void 0)||[];t.push(KI(n.value)),this.map.set(n.param,t);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let r=this.map.get(n.param)||[];const i=r.indexOf(KI(n.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class bQ{constructor(){this.map=new Map}set(n,t){return this.map.set(n,t),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function l8(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function c8(e){return typeof Blob<"u"&&e instanceof Blob}function u8(e){return typeof FormData<"u"&&e instanceof FormData}class $w{constructor(n,t,r,i){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function xQ(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Rf),this.context||(this.context=new bQ),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+d}}else this.params=new Lf,this.urlWithParams=t}serializeBody(){return null===this.body?null:l8(this.body)||c8(this.body)||u8(this.body)||function wQ(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Lf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||u8(this.body)?null:c8(this.body)?this.body.type||null:l8(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Lf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const t=n.method||this.method,r=n.url||this.url,i=n.responseType||this.responseType,o=void 0!==n.body?n.body:this.body,d=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,f=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let g=n.headers||this.headers,_=n.params||this.params;const w=n.context??this.context;return void 0!==n.setHeaders&&(g=Object.keys(n.setHeaders).reduce((S,k)=>S.set(k,n.setHeaders[k]),g)),n.setParams&&(_=Object.keys(n.setParams).reduce((S,k)=>S.set(k,n.setParams[k]),_)),new $w(t,r,o,{params:_,headers:g,context:w,reportProgress:f,responseType:i,withCredentials:d})}}var us=(()=>((us=us||{})[us.Sent=0]="Sent",us[us.UploadProgress=1]="UploadProgress",us[us.ResponseHeader=2]="ResponseHeader",us[us.DownloadProgress=3]="DownloadProgress",us[us.Response=4]="Response",us[us.User=5]="User",us))();class Q3 extends class CQ{constructor(n,t=200,r="OK"){this.headers=n.headers||new Rf,this.status=void 0!==n.status?n.status:t,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(n={}){super(n),this.type=us.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new Q3({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}function q3(e,n){return{body:n,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let h8=(()=>{class e{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof $w)o=t;else{let g,_;g=i.headers instanceof Rf?i.headers:new Rf(i.headers),i.params&&(_=i.params instanceof Lf?i.params:new Lf({fromObject:i.params})),o=new $w(t,r,void 0!==i.body?i.body:null,{headers:g,context:i.context,params:_,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const d=er(o).pipe(Ef(g=>this.handler.handle(g)));if(t instanceof $w||"events"===i.observe)return d;const f=d.pipe(Ki(g=>g instanceof Q3));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return f.pipe(Ie(g=>{if(null!==g.body&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return f.pipe(Ie(g=>{if(null!==g.body&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return f.pipe(Ie(g=>{if(null!==g.body&&"string"!=typeof g.body)throw new Error("Response is not a string.");return g.body}));default:return f.pipe(Ie(g=>g.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Lf).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,q3(i,r))}post(t,r,i={}){return this.request("POST",t,q3(i,r))}put(t,r,i={}){return this.request("PUT",t,q3(i,r))}}return e.\u0275fac=function(t){return new(t||e)(Nt(gQ))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac}),e})();const DQ=["*"];let QI;function Kw(e){return function MQ(){if(void 0===QI&&(QI=null,typeof window<"u")){const e=window;void 0!==e.trustedTypes&&(QI=e.trustedTypes.createPolicy("angular#components",{createHTML:n=>n}))}return QI}()?.createHTML(e)||e}function f8(e){return Error(`Unable to find icon with the name "${e}"`)}function p8(e){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${e}".`)}function g8(e){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${e}".`)}class Xg{constructor(n,t,r){this.url=n,this.svgText=t,this.options=r}}let qI=(()=>{class e{constructor(t,r,i,o){this._httpClient=t,this._sanitizer=r,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,o){return this._addSvgIconConfig(t,r,new Xg(i,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,o){const d=this._sanitizer.sanitize(Ai.HTML,i);if(!d)throw g8(i);const f=Kw(d);return this._addSvgIconConfig(t,r,new Xg("",f,o))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new Xg(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const o=this._sanitizer.sanitize(Ai.HTML,r);if(!o)throw g8(r);const d=Kw(o);return this._addSvgIconSetConfig(t,new Xg("",d,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(Ai.RESOURCE_URL,t);if(!r)throw p8(t);const i=this._cachedIconsByUrl.get(r);return i?er(JI(i)):this._loadSvgIconFromConfig(new Xg(t,null)).pipe(mo(o=>this._cachedIconsByUrl.set(r,o)),Ie(o=>JI(o)))}getNamedSvgIcon(t,r=""){const i=v8(r,t);let o=this._svgIconConfigs.get(i);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,t),o)return this._svgIconConfigs.set(i,o),this._getSvgFromConfig(o);const d=this._iconSetConfigs.get(r);return d?this._getSvgFromIconSetConfigs(t,d):sy(f8(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?er(JI(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Ie(r=>JI(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?er(i):Nz(r.filter(d=>!d.svgText).map(d=>this._loadSvgIconSetFromConfig(d).pipe(Hd(f=>{const _=`Loading icon set URL: ${this._sanitizer.sanitize(Ai.RESOURCE_URL,d.url)} failed: ${f.message}`;return this._errorHandler.handleError(new Error(_)),er(null)})))).pipe(Ie(()=>{const d=this._extractIconWithNameFromAnySet(t,r);if(!d)throw f8(t);return d}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const o=r[i];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){const d=this._svgElementFromConfig(o),f=this._extractSvgIconFromSet(d,t,o.options);if(f)return f}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(mo(r=>t.svgText=r),Ie(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?er(null):this._fetchIcon(t).pipe(mo(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const o=t.querySelector(`[id="${r}"]`);if(!o)return null;const d=o.cloneNode(!0);if(d.removeAttribute("id"),"svg"===d.nodeName.toLowerCase())return this._setSvgAttributes(d,i);if("symbol"===d.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(d),i);const f=this._svgElementFromString(Kw("<svg></svg>"));return f.appendChild(d),this._setSvgAttributes(f,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(Kw("<svg></svg>")),i=t.attributes;for(let o=0;o<i.length;o++){const{name:d,value:f}=i[o];"id"!==d&&r.setAttribute(d,f)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:i}=t,o=i?.withCredentials??!1;if(!this._httpClient)throw function TQ(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const d=this._sanitizer.sanitize(Ai.RESOURCE_URL,r);if(!d)throw p8(r);const f=this._inProgressUrlFetches.get(d);if(f)return f;const g=this._httpClient.get(d,{responseType:"text",withCredentials:o}).pipe(Ie(_=>Kw(_)),pI(()=>this._inProgressUrlFetches.delete(d)),Jf());return this._inProgressUrlFetches.set(d,g),g}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(v8(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const o=this._resolvers[i](r,t);if(o)return AQ(o)?new Xg(o.url,null,o.options):new Xg(o,null)}}}return e.\u0275fac=function(t){return new(t||e)(Nt(h8,8),Nt(yF),Nt(Rr,8),Nt(ks))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function JI(e){return e.cloneNode(!0)}function v8(e,n){return e+":"+n}function AQ(e){return!(!e.url||!e.options)}const IQ=jd(class{constructor(e){this._elementRef=e}}),PQ=new dn("MAT_ICON_DEFAULT_OPTIONS"),RQ=new dn("mat-icon-location",{providedIn:"root",factory:function LQ(){const e=Ji(Rr),n=e?e.location:null;return{getPathname:()=>n?n.pathname+n.search:""}}}),m8=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],OQ=m8.map(e=>`[${e}]`).join(", "),kQ=/^url\(['"]?#(.*?)['"]?\)$/;let $d=(()=>{class e extends IQ{constructor(t,r,i,o,d,f){super(t),this._iconRegistry=r,this._location=o,this._errorHandler=d,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=ye.EMPTY,f&&(f.color&&(this.color=this.defaultColor=f.color),f.fontSet&&(this.fontSet=f.fontSet)),i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=yr(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,o)=>{i.forEach(d=>{o.setAttribute(d.name,`url('${t}#${d.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(OQ),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)m8.forEach(d=>{const f=r[o],g=f.getAttribute(d),_=g?g.match(kQ):null;if(_){let w=i.get(f);w||(w=[],i.set(f,w)),w.push({name:d,value:_[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(vo(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${o.message}`))})}}}return e.\u0275fac=function(t){return new(t||e)(qe(Or),qe(qI),ms("aria-hidden"),qe(RQ),qe(ks),qe(PQ,8))},e.\u0275cmp=qn({type:e,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(Pr("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),ii("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Gn],ngContentSelectors:DQ,decls:1,vars:0,template:function(t,r){1&t&&(La(),Yr(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),e})(),_8=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[ri,ri]}),e})();const y8=Ow({passive:!0});let NQ=(()=>{class e{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Aa;const r=Wd(t),i=this._monitoredElements.get(r);if(i)return i.subject;const o=new se,d="cdk-text-field-autofilled",f=g=>{"cdk-text-field-autofill-start"!==g.animationName||r.classList.contains(d)?"cdk-text-field-autofill-end"===g.animationName&&r.classList.contains(d)&&(r.classList.remove(d),this._ngZone.run(()=>o.next({target:g.target,isAutofilled:!1}))):(r.classList.add(d),this._ngZone.run(()=>o.next({target:g.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",f,y8),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:o,unlisten:()=>{r.removeEventListener("animationstart",f,y8)}}),o}stopMonitoring(t){const r=Wd(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}}return e.\u0275fac=function(t){return new(t||e)(Nt(cs),Nt(Cr))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),b8=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({}),e})();const FQ=["connectionContainer"],BQ=["inputContainer"],VQ=["label"];function zQ(e,n){1&e&&(ci(0),je(1,"div",14),yn(2,"div",15)(3,"div",16)(4,"div",17),Ke(),je(5,"div",18),yn(6,"div",15)(7,"div",16)(8,"div",17),Ke(),ui())}function HQ(e,n){if(1&e){const t=Fi();je(0,"div",19),It("cdkObserveContent",function(){return Ur(t),Gr(Wn().updateOutlineGap())}),Yr(1,1),Ke()}2&e&&_t("cdkObserveContentDisabled","outline"!=Wn().appearance)}function UQ(e,n){if(1&e&&(ci(0),Yr(1,2),je(2,"span"),Mt(3),Ke(),ui()),2&e){const t=Wn(2);xt(3),Lo(t._control.placeholder)}}function GQ(e,n){1&e&&Yr(0,3,["*ngSwitchCase","true"])}function WQ(e,n){1&e&&(je(0,"span",23),Mt(1," *"),Ke())}function jQ(e,n){if(1&e){const t=Fi();je(0,"label",20,21),It("cdkObserveContent",function(){return Ur(t),Gr(Wn().updateOutlineGap())}),ir(2,UQ,4,1,"ng-container",12),ir(3,GQ,1,0,"ng-content",12),ir(4,WQ,2,0,"span",22),Ke()}if(2&e){const t=Wn();ii("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),_t("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),Pr("for",t._control.id)("aria-owns",t._control.id),xt(2),_t("ngSwitchCase",!1),xt(1),_t("ngSwitchCase",!0),xt(1),_t("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function ZQ(e,n){1&e&&(je(0,"div",24),Yr(1,4),Ke())}function YQ(e,n){if(1&e&&(je(0,"div",25),yn(1,"span",26),Ke()),2&e){const t=Wn();xt(1),ii("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function XQ(e,n){1&e&&(je(0,"div"),Yr(1,5),Ke()),2&e&&_t("@transitionMessages",Wn()._subscriptAnimationState)}function $Q(e,n){if(1&e&&(je(0,"div",30),Mt(1),Ke()),2&e){const t=Wn(2);_t("id",t._hintLabelId),xt(1),Lo(t.hintLabel)}}function KQ(e,n){if(1&e&&(je(0,"div",27),ir(1,$Q,2,2,"div",28),Yr(2,6),yn(3,"div",29),Yr(4,7),Ke()),2&e){const t=Wn();_t("@transitionMessages",t._subscriptAnimationState),xt(1),_t("ngIf",t.hintLabel)}}const QQ=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],qQ=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],JQ=new dn("MatError"),eq={transitionMessages:Xd("transitionMessages",[dl("enter",va({opacity:1,transform:"translateY(0%)"})),hl("void => enter",[va({opacity:0,transform:"translateY(-5px)"}),kl("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let e2=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Sn({type:e}),e})();const tq=new dn("MatHint");let $g=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Sn({type:e,selectors:[["mat-label"]]}),e})(),nq=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Sn({type:e,selectors:[["mat-placeholder"]]}),e})();const x8=new dn("MatPrefix");let rq=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Sn({type:e,selectors:[["","matPrefix",""]],features:[Vr([{provide:x8,useExisting:e}])]}),e})();const w8=new dn("MatSuffix");let iq=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Sn({type:e,selectors:[["","matSuffix",""]],features:[Vr([{provide:w8,useExisting:e}])]}),e})(),C8=0;const oq=jd(class{constructor(e){this._elementRef=e}},"primary"),sq=new dn("MAT_FORM_FIELD_DEFAULT_OPTIONS"),t2=new dn("MatFormField");let Qw=(()=>{class e extends oq{constructor(t,r,i,o,d,f,g){super(t),this._changeDetectorRef=r,this._dir=i,this._defaults=o,this._platform=d,this._ngZone=f,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new se,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+C8++,this._labelId="mat-form-field-label-"+C8++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==g,this.appearance=o?.appearance||"legacy",o&&(this._hideRequiredMarker=Boolean(o.hideRequiredMarker),o.color&&(this.color=this.defaultColor=o.color))}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults?.appearance||"legacy","outline"===this._appearance&&r!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=yr(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(Hs(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Vi(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Vi(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),Vn(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Hs(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Hs(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Vi(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Ol(this._label.nativeElement,"transitionend").pipe(vo(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(o=>"start"===o.align):null,i=this._hintChildren?this._hintChildren.find(o=>"end"===o.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,r=this._connectionContainerRef.nativeElement,i=".mat-form-field-outline-start",o=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const w=r.querySelectorAll(`${i}, ${o}`);for(let S=0;S<w.length;S++)w[S].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let d=0,f=0;const g=r.querySelectorAll(i),_=r.querySelectorAll(o);if(this._label&&this._label.nativeElement.children.length){const w=r.getBoundingClientRect();if(0===w.width&&0===w.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const S=this._getStartEnd(w),k=t.children,V=this._getStartEnd(k[0].getBoundingClientRect());let ne=0;for(let pe=0;pe<k.length;pe++)ne+=k[pe].offsetWidth;d=Math.abs(V-S)-5,f=ne>0?.75*ne+10:0}for(let w=0;w<g.length;w++)g[w].style.width=`${d}px`;for(let w=0;w<_.length;w++)_[w].style.width=`${f}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}}return e.\u0275fac=function(t){return new(t||e)(qe(Or),qe(Pi),qe(Ru,8),qe(sq,8),qe(cs),qe(Cr),qe(Xo,8))},e.\u0275cmp=qn({type:e,selectors:[["mat-form-field"]],contentQueries:function(t,r,i){if(1&t&&(Bi(i,e2,5),Bi(i,e2,7),Bi(i,$g,5),Bi(i,$g,7),Bi(i,nq,5),Bi(i,JQ,5),Bi(i,tq,5),Bi(i,x8,5),Bi(i,w8,5)),2&t){let o;Qn(o=$n())&&(r._controlNonStatic=o.first),Qn(o=$n())&&(r._controlStatic=o.first),Qn(o=$n())&&(r._labelChildNonStatic=o.first),Qn(o=$n())&&(r._labelChildStatic=o.first),Qn(o=$n())&&(r._placeholderChild=o.first),Qn(o=$n())&&(r._errorChildren=o),Qn(o=$n())&&(r._hintChildren=o),Qn(o=$n())&&(r._prefixChildren=o),Qn(o=$n())&&(r._suffixChildren=o)}},viewQuery:function(t,r){if(1&t&&(Qr(FQ,7),Qr(BQ,5),Qr(VQ,5)),2&t){let i;Qn(i=$n())&&(r._connectionContainerRef=i.first),Qn(i=$n())&&(r._inputContainerRef=i.first),Qn(i=$n())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,r){2&t&&ii("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[Vr([{provide:t2,useExisting:e}]),Gn],ngContentSelectors:qQ,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,r){1&t&&(La(QQ),je(0,"div",0)(1,"div",1,2),It("click",function(o){return r._control.onContainerClick&&r._control.onContainerClick(o)}),ir(3,zQ,9,0,"ng-container",3),ir(4,HQ,2,1,"div",4),je(5,"div",5,6),Yr(7),je(8,"span",7),ir(9,jQ,5,16,"label",8),Ke()(),ir(10,ZQ,2,0,"div",9),Ke(),ir(11,YQ,2,4,"div",10),je(12,"div",11),ir(13,XQ,2,1,"div",12),ir(14,KQ,5,2,"div",13),Ke()()),2&t&&(xt(3),_t("ngIf","outline"==r.appearance),xt(1),_t("ngIf",r._prefixChildren.length),xt(5),_t("ngIf",r._hasFloatingLabel()),xt(1),_t("ngIf",r._suffixChildren.length),xt(1),_t("ngIf","outline"!=r.appearance),xt(1),_t("ngSwitch",r._getDisplayedMessages()),xt(1),_t("ngSwitchCase","error"),xt(1),_t("ngSwitchCase","hint"))},dependencies:[xs,vf,ey,k3],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[eq.transitionMessages]},changeDetection:0}),e})(),n2=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[Rl,ri,zI,ri]}),e})();const J3=new dn("MAT_INPUT_VALUE_ACCESSOR"),lq=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let cq=0;const uq=CG(class{constructor(e,n,t,r){this._defaultErrorStateMatcher=e,this._parentForm=n,this._parentFormGroup=t,this.ngControl=r,this.stateChanges=new se}});let eB=(()=>{class e extends uq{constructor(t,r,i,o,d,f,g,_,w,S){super(f,o,d,i),this._elementRef=t,this._platform=r,this._autofillMonitor=_,this._formField=S,this._uid="mat-input-"+cq++,this.focused=!1,this.stateChanges=new se,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(ne=>eG().has(ne)),this._iOSKeyupListener=ne=>{const pe=ne.target;!pe.value&&0===pe.selectionStart&&0===pe.selectionEnd&&(pe.setSelectionRange(1,1),pe.setSelectionRange(0,0))};const k=this._elementRef.nativeElement,V=k.nodeName.toLowerCase();this._inputValueAccessor=g||k,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&w.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===V,this._isTextarea="textarea"===V,this._isInFormField=!!S,this._isNativeSelect&&(this.controlType=k.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=yr(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Tu.required)??!1}set required(t){this._required=yr(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&eG().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=yr(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const t=this._formField,r=t&&"legacy"===t.appearance&&!t._hasLabel?.()?null:this.placeholder;if(r!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=r,r?i.setAttribute("placeholder",r):i.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){lq.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return e.\u0275fac=function(t){return new(t||e)(qe(Or),qe(cs),qe(Eu,10),qe(_w,8),qe(oy,8),qe(F3),qe(J3,10),qe(NQ),qe(Cr),qe(t2,8))},e.\u0275dir=Sn({type:e,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,r){1&t&&It("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&t&&(Zo("disabled",r.disabled)("required",r.required),Pr("id",r.id)("data-placeholder",r.placeholder)("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required),ii("mat-input-server",r._isServer)("mat-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[Vr([{provide:e2,useExisting:e}]),Gn,ba]}),e})(),D8=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({providers:[F3],imports:[b8,n2,ri,b8,n2]}),e})();class r2{constructor(n=!1,t,r=!0,i){this._multiple=n,this._emitChanges=r,this.compareWith=i,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new se,t&&t.length&&(n?t.forEach(o=>this._markSelected(o)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...n){this._verifyValueAssignment(n),n.forEach(r=>this._markSelected(r));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...n){this._verifyValueAssignment(n),n.forEach(r=>this._unmarkSelected(r));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...n){this._verifyValueAssignment(n);const t=this.selected,r=new Set(n);n.forEach(o=>this._markSelected(o)),t.filter(o=>!r.has(o)).forEach(o=>this._unmarkSelected(o));const i=this._hasQueuedChanges();return this._emitChangeEvent(),i}toggle(n){return this.isSelected(n)?this.deselect(n):this.select(n)}clear(n=!0){this._unmarkAll();const t=this._hasQueuedChanges();return n&&this._emitChangeEvent(),t}isSelected(n){if(this.compareWith){for(const t of this._selection)if(this.compareWith(t,n))return!0;return!1}return this._selection.has(n)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(n){this._multiple&&this.selected&&this._selected.sort(n)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(n){this.isSelected(n)||(this._multiple||this._unmarkAll(),this.isSelected(n)||this._selection.add(n),this._emitChanges&&this._selectedToEmit.push(n))}_unmarkSelected(n){this.isSelected(n)&&(this._selection.delete(n),this._emitChanges&&this._deselectedToEmit.push(n))}_unmarkAll(){this.isEmpty()||this._selection.forEach(n=>this._unmarkSelected(n))}_verifyValueAssignment(n){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}let tB=(()=>{class e{constructor(){this._listeners=[]}notify(t,r){for(let i of this._listeners)i(t,r)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(r=>t!==r)}}ngOnDestroy(){this._listeners=[]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Cq=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[Zg,ri,ri]}),e})();const P8={transformPanel:Xd("transformPanel",[hl("void => enter-dropdown",kl("120ms cubic-bezier(0, 0, 0.2, 1)",n8([va({opacity:0,transform:"scale(1, 0.8)"}),va({opacity:1,transform:"scale(1, 1)"})]))),hl("void => enter-dialog",kl("150ms cubic-bezier(0, 0, 0.2, 1)",n8([va({opacity:0,transform:"scale(0.7)"}),va({transform:"none",opacity:1})]))),hl("* => void",kl("100ms linear",va({opacity:0})))]),fadeInCalendar:Xd("fadeInCalendar",[dl("void",va({opacity:0})),dl("enter",va({opacity:1})),hl("void => *",kl("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])},L8=function(e){return{active:e}};function Vq(e,n){if(1&e){const t=Fi();je(0,"button",2),It("click",function(){const o=Ur(t).$implicit;return Gr(Wn().select(o))}),Ke()}if(2&e){const t=n.$implicit,r=Wn();fa("background-color",t),_t("ngClass",hc(3,L8,r.selectedColor===t))}}function zq(e,n){if(1&e){const t=Fi();je(0,"button",2),It("click",function(){const o=Ur(t).$implicit;return Gr(Wn().select(o))}),Ke()}if(2&e){const t=n.$implicit,r=Wn();fa("background-color",t),_t("ngClass",hc(3,L8,r.selectedColor===t))}}const Hq=["button"],Uq=/^\s+/,Gq=/\s+$/,Sy=Math.round,Wq=(Math,Math,Math,/[^0-9]/g),O8=["#ffffff","#ffff00","#ff00ff","#ff0000","#c0c0c0","#808080","#808000","#800080","#800000","#00ffff","#00ff00","#008080","#008000","#0000ff","#000080","#000000"];function k8(e,n,t){const r=e.getImageData(n,t,1,1).data;return{r:r[0],g:r[1],b:r[2]}}function Kg(e){return 1==e.length?"0"+e:""+e}function Zq(e){return Math.round(255*parseFloat(e)).toString(16)}function N8(e){return Nl(e)/255}function Nl(e){return parseInt(e,16)}function F8(e,n,t,r){var i=[Kg(Sy(e).toString(16)),Kg(Sy(n).toString(16)),Kg(Sy(t).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}const Of="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",nB="[\\s|\\(]+("+Of+")[,|\\s]+("+Of+")[,|\\s]+("+Of+")\\s*\\)?",rB="[\\s|\\(]+("+Of+")[,|\\s]+("+Of+")[,|\\s]+("+Of+")[,|\\s]+("+Of+")\\s*\\)?",Qg={CSS_UNIT:new RegExp(Of),rgb:new RegExp("rgb"+nB),rgba:new RegExp("rgba"+rB),hsl:new RegExp("hsl"+nB),hsla:new RegExp("hsla"+rB),hsv:new RegExp("hsv"+nB),hsva:new RegExp("hsva"+rB),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function iB(e){let n;return e=e.replace(Uq,"").replace(Gq,"").toLowerCase(),(n=Qg.rgb.exec(e))?{r:n[1],g:n[2],b:n[3],a:1}:(n=Qg.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Qg.hex8.exec(e))?{r:Nl(n[1]),g:Nl(n[2]),b:Nl(n[3]),a:N8(n[4])}:(n=Qg.hex6.exec(e))?{r:Nl(n[1]),g:Nl(n[2]),b:Nl(n[3]),a:1}:(n=Qg.hex4.exec(e))?{r:Nl(n[1]+""+n[1]),g:Nl(n[2]+""+n[2]),b:Nl(n[3]+""+n[3]),a:N8(n[4]+""+n[4])}:(n=Qg.hex3.exec(e))?{r:Nl(n[1]+""+n[1]),g:Nl(n[2]+""+n[2]),b:Nl(n[3]+""+n[3]),a:1}:null}class qg{constructor(n,t,r,i){this.r=n>255?255:n,this.g=t>255?255:t,this.b=r>255?255:r,this.a=null!=i?i>1?1:i:1,this.roundA=Math.round(this.a),this.hex=F8(this.r,this.g,this.b),this.rgba=this.toRgba()}toHex(n){return F8(this.r,this.g,this.b,n)}toRgba(){return`rgba(${this.r},${this.g},${this.b},${this.a})`}toHexString(n){return"#"+this.toHex(n)}toRgbString(){return 1===this.a?"rgb("+Math.round(this.r)+", "+Math.round(this.g)+", "+Math.round(this.b)+")":"rgba("+Math.round(this.r)+", "+Math.round(this.g)+", "+Math.round(this.b)+", "+this.roundA+")"}toHex8(n){return function jq(e,n,t,r,i){var o=[Kg(Sy(e).toString(16)),Kg(Sy(n).toString(16)),Kg(Sy(t).toString(16)),Kg(Zq(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this.r,this.g,this.b,this.a,n)}toHex8String(n){return"#"+this.toHex8(n)}toString(n){let r;return n||!(this.a<1&&this.a>=0)||"hex"!==n&&"hex6"!==n&&"hex3"!==n&&"hex4"!==n&&"hex8"!==n?("rgb"===n&&(r=this.toRgbString()),("hex"===n||"hex6"===n)&&(r=this.toHexString()),"hex3"===n&&(r=this.toHexString(!0)),"hex4"===n&&(r=this.toHex8String(!0)),"hex8"===n&&(r=this.toHex8String()),r||this.toHexString()):this.toRgbString()}}let B8=(()=>{class e{constructor(t,r){this.zone=t,this.colorChanged=new En,this.x=0,this.y=0,this.drag=!1,this._destroyed=new se,this.elementId=r}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}ngAfterViewInit(){this.canvas=document.getElementById(this.elementId),this.ctx=this.canvas.getContext("2d"),this.width=this.canvas.width,this.height=this.canvas.height,this.draw()}draw(){this.ctx.clearRect(0,0,this.width,this.height),this.ctx.rect(0,0,this.width,this.height),this.fillGradient(),0!=this.y&&this.redrawIndicator(this.x,this.y)}onMousedown(t){this.drag=!0,this.changeColor(t),this.zone.runOutsideAngular(()=>{this.canvas.addEventListener("mousemove",this.onMousemove.bind(this))})}onMousemove(t){this.drag&&this.zone.run(()=>{this.changeColor(t)})}onMouseup(t){this.drag=!1,this.canvas.removeEventListener("mousemove",this.onMousemove)}emitChange(t){this.colorChanged.emit(t)}}return e.\u0275fac=function(t){El()},e.\u0275dir=Sn({type:e,inputs:{color:"color"},outputs:{colorChanged:"colorChanged"}}),e})(),$q=(()=>{class e extends B8{constructor(t){super(t,"color-strip"),this.zone=t}ngOnInit(){}ngAfterViewInit(){super.ngAfterViewInit()}fillGradient(){const t=this.ctx.createLinearGradient(0,0,0,this.height);t.addColorStop(0,"rgba(255, 0, 0, 1)"),t.addColorStop(.17,"rgba(255, 255, 0, 1)"),t.addColorStop(.34,"rgba(0, 255, 0, 1)"),t.addColorStop(.51,"rgba(0, 255, 255, 1)"),t.addColorStop(.68,"rgba(0, 0, 255, 1)"),t.addColorStop(.85,"rgba(255, 0, 255, 1)"),t.addColorStop(1,"rgba(255, 0, 0, 1)"),this.ctx.fillStyle=t,this.ctx.fill()}redrawIndicator(t,r){this.ctx.beginPath(),this.ctx.strokeStyle="white",this.ctx.lineWidth=2,this.ctx.arc(7.5,r,7.5,0,2*Math.PI,!1),this.ctx.stroke(),this.ctx.closePath()}changeColor(t){this.x=t.offsetX,this.y=t.offsetY,this.draw();const{r,g:i,b:o}=k8(this.ctx,t.offsetX,t.offsetY);this.emitChange(new qg(r,i,o))}}return e.\u0275fac=function(t){return new(t||e)(qe(Cr))},e.\u0275cmp=qn({type:e,selectors:[["ngx-mat-color-slider"]],features:[Gn],decls:1,vars:0,consts:[["id","color-strip","width","15","height","200",1,"zone-strip",3,"mousedown","mouseup"]],template:function(t,r){1&t&&(je(0,"canvas",0),It("mousedown",function(o){return r.onMousedown(o)})("mouseup",function(o){return r.onMouseup(o)}),Ke())}}),e})(),Kq=(()=>{class e{constructor(){}onInput(t){this._formatInput(t.target)}_formatInput(t){let r=Number(t.value.replace(Wq,""));r=isNaN(r)?0:r,t.value=r}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Sn({type:e,selectors:[["","ngxMatNumericColorInput",""]],hostBindings:function(t,r){1&t&&It("input",function(o){return r.onInput(o)})}}),e})(),qq=(()=>{class e extends B8{constructor(t){super(t,"color-block"),this.zone=t,this._resetBaseColor=!0,this.formGroup=new ay({r:new tu(null,[Tu.required]),g:new tu(null,[Tu.required]),b:new tu(null,[Tu.required]),a:new tu(null,[Tu.required]),hex:new tu(null,[Tu.required,Tu.pattern(Qg.hex6)])})}get rCtrl(){return this.formGroup.get("r")}get gCtrl(){return this.formGroup.get("g")}get bCtrl(){return this.formGroup.get("b")}get aCtrl(){return this.formGroup.get("a")}get hexCtrl(){return this.formGroup.get("hex")}ngOnInit(){Vn(this.rCtrl.valueChanges,this.gCtrl.valueChanges,this.bCtrl.valueChanges,this.aCtrl.valueChanges).pipe(Vi(this._destroyed),_y(400)).subscribe(i=>{const o=new qg(Number(this.rCtrl.value),Number(this.gCtrl.value),Number(this.bCtrl.value),Number(this.aCtrl.value));this.emitChange(o)}),this.hexCtrl.valueChanges.pipe(Vi(this._destroyed),_y(400),Vw()).subscribe(i=>{const o=iB(i);if(null!=o){const d=new qg(o.r,o.g,o.b,o.a);this.emitChange(d)}})}ngOnChanges(t){t.color&&t.color.currentValue&&(this.updateForm(t.color.currentValue),this._resetBaseColor&&(this._baseColor=t.color.currentValue),this._resetBaseColor=!0,t.color.firstChange||this.draw())}updateForm(t){const r={emitEvent:!1};this.rCtrl.setValue(t.r,r),this.gCtrl.setValue(t.g,r),this.bCtrl.setValue(t.b,r),this.aCtrl.setValue(t.a,r),this.hexCtrl.setValue(t.hex,r)}redrawIndicator(t,r){this.ctx.beginPath(),this.ctx.strokeStyle="white",this.ctx.arc(t,r,5,0,2*Math.PI,!1),this.ctx.stroke(),this.ctx.closePath()}fillGradient(){this.ctx.fillStyle=this._baseColor?this._baseColor.rgba:"rgba(255,255,255,1)",this.ctx.fillRect(0,0,this.width,this.height);const t=this.ctx.createLinearGradient(0,0,this.width,0);t.addColorStop(0,"rgba(255,255,255,1)"),t.addColorStop(1,"rgba(255,255,255,0)"),this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.width,this.height);const r=this.ctx.createLinearGradient(0,0,0,this.height);r.addColorStop(0,"rgba(0,0,0,0)"),r.addColorStop(1,"rgba(0,0,0,1)"),this.ctx.fillStyle=r,this.ctx.fillRect(0,0,this.width,this.height)}onSliderColorChanged(t){this._baseColor=t,this.color=t,this.fillGradient(),this.emitChange(t)}changeColor(t){this.x=t.offsetX,this.y=t.offsetY,this._resetBaseColor=!1,this.draw();const{r,g:i,b:o}=k8(this.ctx,t.offsetX,t.offsetY);this.emitChange(new qg(r,i,o))}}return e.\u0275fac=function(t){return new(t||e)(qe(Cr))},e.\u0275cmp=qn({type:e,selectors:[["ngx-mat-color-canvas"]],hostAttrs:[1,"ngx-mat-color-canvas"],features:[Gn,ba],decls:30,vars:3,consts:[[3,"formGroup"],[1,"color-canvas-row"],[1,"zone-canvas"],["id","color-block","width","200","height","200",1,"zone-block",3,"mousedown","mouseup"],[3,"colorChanged"],[1,"zone-inputs"],["matInput","","formControlName","r","ngxMatNumericColorInput","","autocomplete","off"],["matInput","","formControlName","g","ngxMatNumericColorInput","","autocomplete","off"],["matInput","","formControlName","b","ngxMatNumericColorInput","","autocomplete","off"],["mat-mini-fab","",1,"preview"],["matPrefix","",1,"symbol"],["matInput","","formControlName","hex","autocomplete","off"],["matInput","","formControlName","a","type","number","min","0","max","1","step","0.1","autocomplete","off"]],template:function(t,r){1&t&&(je(0,"form",0)(1,"div",1)(2,"div",2)(3,"canvas",3),It("mousedown",function(o){return r.onMousedown(o)})("mouseup",function(o){return r.onMouseup(o)}),Ke(),je(4,"ngx-mat-color-slider",4),It("colorChanged",function(o){return r.onSliderColorChanged(o)}),Ke()(),je(5,"div",5)(6,"mat-form-field")(7,"mat-label"),Mt(8,"R"),Ke(),yn(9,"input",6),Ke(),je(10,"mat-form-field")(11,"mat-label"),Mt(12,"G"),Ke(),yn(13,"input",7),Ke(),je(14,"mat-form-field")(15,"mat-label"),Mt(16,"B"),Ke(),yn(17,"input",8),Ke()()(),je(18,"div",1),yn(19,"button",9),je(20,"mat-form-field")(21,"mat-label"),Mt(22,"HEX6"),Ke(),je(23,"mat-label",10),Mt(24,"#\xa0"),Ke(),yn(25,"input",11),Ke(),je(26,"mat-form-field")(27,"mat-label"),Mt(28,"A"),Ke(),yn(29,"input",12),Ke()()()),2&t&&(_t("formGroup",r.formGroup),xt(19),fa("background-color",(null==r.color?null:r.color.rgba)||"transparent"))},dependencies:[Qw,$g,rq,eB,Cs,SH,fw,kF,Au,lH,WF,GF,oy,zF,$q,Kq],styles:[".ngx-mat-color-canvas .color-canvas-row{display:flex}.ngx-mat-color-canvas .color-canvas-row:first-of-type{height:200px;margin-bottom:12px}.ngx-mat-color-canvas .color-canvas-row:first-of-type .card{height:180px}.ngx-mat-color-canvas .color-canvas-row canvas:hover{cursor:crosshair}.ngx-mat-color-canvas .color-canvas-row .zone{display:flex}.ngx-mat-color-canvas .color-canvas-row .zone-canvas{height:200px}.ngx-mat-color-canvas .color-canvas-row .zone-canvas .zone-block{border:1px solid rgba(0,0,0,.12)}.ngx-mat-color-canvas .color-canvas-row .zone-strip{flex-basis:auto;margin-left:10px}.ngx-mat-color-canvas .color-canvas-row .zone-inputs{display:flex;width:40px;height:200px;flex-direction:column;margin-left:16px;margin-top:12px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2){display:flex}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .preview{min-width:40px;min-height:40px;height:40px;width:40px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-form-field{margin-left:16px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-form-field:first-of-type{width:170px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-form-field:first-of-type .symbol{font-weight:bold;color:#0000008a}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-form-field:last-of-type{width:40px}.ngx-mat-color-canvas .mat-form-field-label{font-weight:bold}\n"],encapsulation:2}),e})(),Jq=(()=>{class e{constructor(){this.colorChanged=new En,this.colors1=O8.slice(0,8),this.colors2=O8.slice(8,16)}set color(t){t&&(this.selectedColor=t.toHexString())}ngOnInit(){}select(t){this.selectedColor=t;const{r,g:i,b:o,a:d}=iB(t);this.colorChanged.emit(new qg(r,i,o,d))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=qn({type:e,selectors:[["ngx-mat-color-collection"]],hostAttrs:[1,"ngx-mat-color-collection"],inputs:{color:"color"},outputs:{colorChanged:"colorChanged"},decls:4,vars:2,consts:[[1,"color-collection-row"],["mat-mini-fab","","class","btn-color",3,"background-color","ngClass","click",4,"ngFor","ngForOf"],["mat-mini-fab","",1,"btn-color",3,"ngClass","click"]],template:function(t,r){1&t&&(je(0,"div",0),ir(1,Vq,1,5,"button",1),Ke(),je(2,"div",0),ir(3,zq,1,5,"button",1),Ke()),2&t&&(xt(1),_t("ngForOf",r.colors1),xt(2),_t("ngForOf",r.colors2))},dependencies:[Vd,mc,Cs],styles:[".ngx-mat-color-collection .btn-color{height:20px;width:20px;margin-right:11px;box-shadow:none;opacity:.3}.ngx-mat-color-collection .btn-color.active{box-shadow:0 3px 5px -1px #0003,0 6px 10px #00000024,0 1px 18px #0000001f;opacity:1}\n"],encapsulation:2}),e})(),V8=(()=>{class e{constructor(){this.colorChanged=new En}ngOnInit(){}handleColorChanged(t){this.colorChanged.emit(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=qn({type:e,selectors:[["ngx-mat-color-palette"]],hostAttrs:[1,"ngx-mat-color-palette"],inputs:{color:"color"},outputs:{colorChanged:"colorChanged"},decls:2,vars:2,consts:[[3,"color","colorChanged"]],template:function(t,r){1&t&&(je(0,"ngx-mat-color-canvas",0),It("colorChanged",function(o){return r.handleColorChanged(o)}),Ke(),je(1,"ngx-mat-color-collection",0),It("colorChanged",function(o){return r.handleColorChanged(o)}),Ke()),2&t&&(_t("color",r.color),xt(1),_t("color",r.color))},dependencies:[qq,Jq],styles:[".ngx-mat-color-palette .actions{margin-top:10px;display:flex}.ngx-mat-color-palette .actions .left{display:flex;flex-direction:column;margin-right:15px}.ngx-mat-color-palette .actions .left .preview{flex:2 1 auto;margin-bottom:10px}.ngx-mat-color-palette .actions .right{display:flex;width:40px;flex-direction:column}\n"],encapsulation:2}),e})(),aB=(()=>{class e{constructor(){}sameColor(t,r){return null==t&&null==r||null!=t&&null!=r&&t.rgba===r.rgba}format(t,r){return t.toString(r)}parse(t){const r=iB(t);return r?new qg(r.r,r.g,r.b,r.a):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Jt({token:e,factory:e.\u0275fac}),e})();const eJ={display:{colorInput:"hex"}},z8=new dn("mat-color-formats"),H8=new dn("ngx-mat-colorpicker-scroll-strategy"),nJ={provide:H8,deps:[nu],useFactory:function tJ(e){return()=>e.scrollStrategies.reposition()}},rJ=jd(class{constructor(e){this._elementRef=e}});let U8=(()=>{class e extends rJ{constructor(t){super(t)}}return e.\u0275fac=function(t){return new(t||e)(qe(Or))},e.\u0275cmp=qn({type:e,selectors:[["ngx-mat-color-picker-content"]],viewQuery:function(t,r){if(1&t&&Qr(V8,5),2&t){let i;Qn(i=$n())&&(r._palette=i.first)}},hostAttrs:[1,"ngx-mat-colorpicker-content"],hostVars:3,hostBindings:function(t,r){2&t&&(ef("@transformPanel","enter"),ii("ngx-mat-colorpicker-content-touch",r.picker.touchUi))},inputs:{color:"color"},exportAs:["ngxMatColorPickerContent"],features:[Gn],decls:1,vars:1,consts:[[3,"color","colorChanged"]],template:function(t,r){1&t&&(je(0,"ngx-mat-color-palette",0),It("colorChanged",function(o){return r.picker.select(o)}),Ke()),2&t&&_t("color",r.picker._selected)},dependencies:[V8],styles:[".ngx-mat-colorpicker-content{display:block;border-radius:4px;box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f;background-color:#fff;color:#000000de;padding:16px}.ngx-mat-colorpicker-content .ngx-mat-color-palette{width:296px;height:354px}.ngx-mat-colorpicker-content-touch{display:block;max-height:80vh;overflow:auto}.ngx-mat-colorpicker-content-touch .ngx-mat-color-palette{min-width:250px;min-height:312px;max-width:750px;max-height:788px}@media all and (orientation: landscape){.mat-colorpicker-content-touch .ngx-mat-color-palette{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-colorpicker-content-touch .ngx-mat-color-palette{width:80vw;height:100vw}}\n"],encapsulation:2,data:{animation:[P8.transformPanel,P8.fadeInCalendar]},changeDetection:0}),e})(),iJ=(()=>{class e{constructor(t,r,i,o,d,f,g,_){this._dialog=t,this._overlay=r,this._zone=i,this._adapter=o,this._dir=d,this._document=g,this._viewContainerRef=_,this.openedStream=new En,this.closedStream=new En,this._touchUi=!1,this._opened=!1,this._defaultColor="primary",this._validSelected=null,this._disabledChange=new se,this._focusedElementBeforeOpen=null,this._inputSubscription=ye.EMPTY,this._selectedChanged=new se,this._scrollStrategy=f}get disabled(){return void 0===this._disabled&&this._pickerInput?this._pickerInput.disabled:!!this._disabled}set disabled(t){const r=yr(t);r!==this._disabled&&(this._disabled=r,this._disabledChange.next(r))}get touchUi(){return this._touchUi}set touchUi(t){this._touchUi=yr(t)}get opened(){return this._opened}set opened(t){t?this.open():this.close()}get defaultColor(){return this._defaultColor}set defaultColor(t){this._defaultColor=t}get color(){return this._color||(this._pickerInput?this._pickerInput.getThemePalette():void 0)}set color(t){this._color=t}get _selected(){return this._validSelected}set _selected(t){this._validSelected=t}ngOnInit(){}ngOnDestroy(){this.close(),this._inputSubscription.unsubscribe(),this._disabledChange.complete(),this._popupRef&&(this._popupRef.dispose(),this._popupComponentRef=null)}select(t){let r=this._selected;this._selected=t,this._adapter.sameColor(r,this._selected)||this._selectedChanged.next(t)}registerInput(t){if(this._pickerInput)throw Error("A ColorPicker can only be associated with a single input.");this._pickerInput=t,this._inputSubscription=this._pickerInput._valueChange.subscribe(r=>this._selected=r)}open(){if(!this._opened&&!this.disabled){if(!this._pickerInput)throw Error("Attempted to open an ColorPicker with no associated input.");this._document&&(this._focusedElementBeforeOpen=this._document.activeElement),this.touchUi?this._openAsDialog():this._openAsPopup(),this._opened=!0,this.openedStream.emit()}}_openAsDialog(){this._dialogRef&&this._dialogRef.close(),this._dialogRef=this._dialog.open(U8,{direction:this._dir?this._dir.value:"ltr",viewContainerRef:this._viewContainerRef,panelClass:"ngx-mat-colorpicker-dialog"}),this._dialogRef.afterClosed().subscribe(()=>this.close()),this._dialogRef.componentInstance.picker=this,this._setColor()}_openAsPopup(){this._portal||(this._portal=new kI(U8,this._viewContainerRef)),this._popupRef||this._createPopup(),this._popupRef.hasAttached()||(this._popupComponentRef=this._popupRef.attach(this._portal),this._popupComponentRef.instance.picker=this,this._setColor(),this._zone.onStable.asObservable().pipe(vo(1)).subscribe(()=>{this._popupRef.updatePosition()}))}_createPopup(){const t=new ZI({positionStrategy:this._createPopupPositionStrategy(),hasBackdrop:!0,backdropClass:"mat-overlay-transparent-backdrop",direction:this._dir,scrollStrategy:this._scrollStrategy(),panelClass:"mat-colorpicker-popup"});this._popupRef=this._overlay.create(t),this._popupRef.overlayElement.setAttribute("role","dialog"),Vn(this._popupRef.backdropClick(),this._popupRef.detachments(),this._popupRef.keydownEvents().pipe(Ki(r=>27===r.keyCode||this._pickerInput&&r.altKey&&38===r.keyCode))).subscribe(r=>{r&&r.preventDefault(),this.close()})}close(){if(!this._opened)return;this._popupRef&&this._popupRef.hasAttached()&&this._popupRef.detach(),this._dialogRef&&(this._dialogRef.close(),this._dialogRef=null),this._portal&&this._portal.isAttached&&this._portal.detach();const t=()=>{this._opened&&(this._opened=!1,this.closedStream.emit(),this._focusedElementBeforeOpen=null)};this._focusedElementBeforeOpen&&"function"==typeof this._focusedElementBeforeOpen.focus?(this._focusedElementBeforeOpen.focus(),setTimeout(t)):t()}_setColor(){const t=this.color;this._popupComponentRef&&(this._popupComponentRef.instance.color=t),this._dialogRef&&(this._dialogRef.componentInstance.color=t)}_createPopupPositionStrategy(){return this._overlay.position().flexibleConnectedTo(this._pickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".ngx-mat-colorpicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition().withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}])}}return e.\u0275fac=function(t){return new(t||e)(qe(o8),qe(nu),qe(Cr),qe(aB),qe(Ru,8),qe(H8),qe(Rr,8),qe(as))},e.\u0275cmp=qn({type:e,selectors:[["ngx-mat-color-picker"]],inputs:{disabled:"disabled",touchUi:"touchUi",opened:"opened",defaultColor:"defaultColor",color:"color"},outputs:{openedStream:"opened",closedStream:"closed"},exportAs:["ngxMatColorPicker"],decls:0,vars:0,template:function(t,r){},encapsulation:2,changeDetection:0}),e})();class l2{constructor(n,t){this.target=n,this.targetElement=t,this.value=this.target.value}}const aJ={provide:Qo,useExisting:kr(()=>oB),multi:!0},oJ={provide:go,useExisting:kr(()=>oB),multi:!0};let oB=(()=>{class e{constructor(t,r,i,o){if(this._elementRef=t,this._formField=r,this._colorFormats=i,this._adapter=o,this.colorChange=new En,this.colorInput=new En,this._disabledChange=new En,this._valueChange=new En,this._onTouched=()=>{},this._cvaOnChange=()=>{},this._validatorOnChange=()=>{},this._pickerSubscription=ye.EMPTY,this._validator=Tu.compose([]),this._lastValueValid=!1,!this._colorFormats)throw function Xq(e){return Error(`NgxMatColorPicker: No provider found for ${e}. You must define MAT_COLOR_FORMATS in your module`)}("MAT_COLOR_FORMATS")}set ngxMatColorPicker(t){!t||(this._picker=t,this._picker.registerInput(this),this._pickerSubscription.unsubscribe(),this._pickerSubscription=this._picker._selectedChanged.subscribe(r=>{this.value=r,this._cvaOnChange(r),this._onTouched(),this.colorInput.emit(new l2(this,this._elementRef.nativeElement)),this.colorChange.emit(new l2(this,this._elementRef.nativeElement))}))}get disabled(){return!!this._disabled}set disabled(t){const r=yr(t),i=this._elementRef.nativeElement;this._disabled!==r&&(this._disabled=r,this._disabledChange.emit(r)),r&&i.blur&&i.blur()}get value(){return this._value}set value(t){const r=this.value;this._value=t,this._formatValue(t),this._adapter.sameColor(r,t)||this._valueChange.emit(t)}getThemePalette(){return this._formField?this._formField.color:void 0}registerOnValidatorChange(t){this._validatorOnChange=t}validate(t){return this._validator?this._validator(t):null}getPopupConnectionElementRef(){return this.getConnectedOverlayOrigin()}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}ngOnInit(){}ngOnDestroy(){this._pickerSubscription.unsubscribe(),this._valueChange.complete(),this._disabledChange.complete()}writeValue(t){this.value=t}registerOnChange(t){this._cvaOnChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_onChange(){this.colorChange.emit(new l2(this,this._elementRef.nativeElement))}_onKeydown(t){this._picker&&t.altKey&&40===t.keyCode&&!this._elementRef.nativeElement.readOnly&&(this._picker.open(),t.preventDefault())}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(t){this._elementRef.nativeElement.value=t?this._adapter.format(t,this._colorFormats.display.colorInput):""}_onInput(t){const r=this._lastValueValid,i=this._adapter.parse(t);this._adapter.sameColor(i,this._value)?r!==this._lastValueValid&&this._validatorOnChange():(this._value=i,this._cvaOnChange(i),this._valueChange.emit(i),this.colorInput.emit(new l2(this,this._elementRef.nativeElement)))}}return e.\u0275fac=function(t){return new(t||e)(qe(Or),qe(Qw,8),qe(z8,8),qe(aB))},e.\u0275dir=Sn({type:e,selectors:[["input","ngxMatColorPicker",""]],hostVars:3,hostBindings:function(t,r){1&t&&It("input",function(o){return r._onInput(o.target.value)})("change",function(){return r._onChange()})("blur",function(){return r._onBlur()})("keydown",function(o){return r._onKeydown(o)}),2&t&&(Zo("disabled",r.disabled),Pr("aria-haspopup",r._picker?"dialog":null)("aria-owns",(null==r._picker?null:r._picker.opened)&&r._picker.id||null))},inputs:{ngxMatColorPicker:"ngxMatColorPicker",disabled:"disabled",value:"value"},outputs:{colorChange:"colorChange",colorInput:"colorInput"},exportAs:["ngxMatColorPickerInput"],features:[Vr([aJ,oJ,{provide:J3,useExisting:e}])]}),e})(),sJ=(()=>{class e{constructor(t){this._cd=t,this._stateChanges=ye.EMPTY}get disabled(){if(null==this._disabled&&this.picker)return this.picker.disabled}set disabled(t){this._disabled=t}ngOnInit(){}ngOnChanges(t){t.picker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}open(t){this.picker&&!this.disabled&&(this.picker.open(),t.stopPropagation())}_watchStateChanges(){const t=this.picker?this.picker._disabledChange:er(),r=this.picker&&this.picker._pickerInput?this.picker._pickerInput._disabledChange:er(),i=this.picker?Vn(this.picker.openedStream,this.picker.closedStream):er();this._stateChanges.unsubscribe(),this._stateChanges=Vn(t,r,i).subscribe(()=>this._cd.markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(qe(Pi))},e.\u0275cmp=qn({type:e,selectors:[["ngx-mat-color-toggle"]],viewQuery:function(t,r){if(1&t&&Qr(Hq,5),2&t){let i;Qn(i=$n())&&(r._button=i.first)}},hostAttrs:[1,"ngx-mat-color-toggle"],hostVars:7,hostBindings:function(t,r){1&t&&It("focus",function(){return r._button.focus()}),2&t&&(Pr("tabindex",-1),ii("ngx-mat-color-toggle-active",r.picker&&r.picker.opened)("mat-accent",r.picker&&"accent"===r.picker.color)("mat-warn",r.picker&&"warn"===r.picker.color))},inputs:{picker:["for","picker"],tabIndex:"tabIndex",disabled:"disabled"},exportAs:["ngxMatColorPickerToggle"],features:[ba],decls:4,vars:5,consts:[["mat-icon-button","","type","button",3,"disabled","click"],["button",""]],template:function(t,r){1&t&&(je(0,"button",0,1),It("click",function(o){return r.open(o)}),je(2,"mat-icon"),Mt(3,"palette"),Ke()()),2&t&&(_t("disabled",r.disabled),Pr("aria-haspopup",r.picker?"dialog":null)("tabindex",r.disabled?-1:r.tabIndex),xt(2),fa("color",null==r.picker||null==r.picker._selected?null:r.picker._selected.rgba))},dependencies:[Cs,$d],styles:[".mat-form-field-appearance-legacy .mat-form-field-prefix .ngx-mat-color-toggle-default-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .ngx-mat-color-toggle-default-icon{width:1em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .ngx-mat-color-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .ngx-mat-color-toggle-default-icon{display:block;width:1.5em;height:1.5em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .ngx-mat-color-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .ngx-mat-color-toggle-default-icon{margin:auto}\n"],encapsulation:2}),e})(),lJ=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({providers:[aB,nJ],imports:[Rl,D8,LG,OG,Cq,BH,ZF,pQ,gy,_8]}),e})(),sB=(()=>{class e{constructor(){this.leftDrawer=!0,this.rightDrawer=!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Sn({type:e,inputs:{leftDrawer:"leftDrawer",rightDrawer:"rightDrawer"}}),e})();const lB=new dn("Angular OpenCV Configuration Object");class ru{constructor(n){this.src=null,this.dstC1=null,this.dstC3=null,this.dstC4=null,this.isReady=new Ll({ready:!1,error:!1,loading:!0}),this.isReady$=this.isReady.asObservable(),this.OPENCV_URL="opencv.js",this.DEFAULT_OPTIONS={scriptUrl:"assets/opencv/asm/3.4/opencv.js",wasmBinaryFile:"wasm/3.4/opencv_js.wasm",usingWasm:!1,locateFile:this.locateFile.bind(this),onRuntimeInitialized:()=>{}},this.setScriptUrl(n.scriptUrl);const t=Object.assign({},this.DEFAULT_OPTIONS,{options:n});this.loadOpenCv(t)}locateFile(n,t){return"opencv_js.wasm"===n?t+"/wasm/"+n:t+n}setScriptUrl(n){this.OPENCV_URL=n}loadOpenCv(n){this.isReady.next({ready:!1,error:!1,loading:!0}),window.Module=Object.assign({},n);const t=document.createElement("script");t.setAttribute("async",""),t.setAttribute("type","text/javascript"),t.addEventListener("load",()=>{cv.onRuntimeInitialized=()=>{n.onRuntimeInitialized&&n.onRuntimeInitialized(),this.isReady.next({ready:!0,error:!1,loading:!1})}}),t.addEventListener("error",()=>{const i=this.printError("Failed to load "+this.OPENCV_URL);this.isReady.next({ready:!1,error:!0,loading:!1}),this.isReady.error(i)}),t.src=this.OPENCV_URL;const r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(t,r):document.head.appendChild(t)}createFileFromUrl(n,t){const r=new XMLHttpRequest;return r.open("GET",t,!0),r.responseType="arraybuffer",new N(i=>{r.onload=o=>{if(4===r.readyState)if(200===r.status){const d=new Uint8Array(r.response);cv.FS_createDataFile("/",n,d,!0,!1,!1),i.next(),i.complete()}else this.printError("Failed to load "+t+" status: "+r.status),i.error()},r.send()})}loadImageToCanvas(n,t){return N.create(r=>{const i=document.getElementById(t),o=i.getContext("2d"),d=new Image;d.crossOrigin="anonymous",d.onload=()=>{i.width=d.width,i.height=d.height,o.drawImage(d,0,0,d.width,d.height),r.next(),r.complete()},d.src=n})}loadImageToHTMLCanvas(n,t){return N.create(r=>{const i=t.getContext("2d"),o=new Image;o.crossOrigin="anonymous",o.onload=()=>{t.width=o.width,t.height=o.height,i.drawImage(o,0,0,o.width,o.height),r.next(),r.complete()},o.src=n})}clearError(){this.errorOutput.innerHTML=""}printError(n){if(typeof n>"u")n="";else if("number"==typeof n)isNaN(n)||typeof cv<"u"&&(n="Exception: "+cv.exceptionFromPtr(n).msg);else if("string"==typeof n){const t=Number(n.split(" ")[0]);isNaN(t)||typeof cv<"u"&&(n="Exception: "+cv.exceptionFromPtr(t).msg)}else n instanceof Error&&(n=n.stack.replace(/\n/g,"<br>"));throw new Error(n)}loadCode(n,t){const r=document.getElementById(n),i=document.getElementById(t);if("text/code-snippet"!==r.type)throw Error("Unknown code snippet type");i.value=r.text.replace(/^\n/,"")}addFileInputHandler(n,t){document.getElementById(n).addEventListener("change",i=>{const o=i.target.files;if(o.length>0){const d=URL.createObjectURL(o[0]);this.loadImageToCanvas(d,t)}},!1)}onVideoCanPlay(){this.onCameraStartedCallback&&this.onCameraStartedCallback(this.stream,this.video)}startCamera(n,t,r){let o=document.getElementById(r);o||(o=document.createElement("video"));let d={qvga:{width:{exact:320},height:{exact:240}},vga:{width:{exact:640},height:{exact:480}}}[n];d||(d=!0),navigator.mediaDevices.getUserMedia({video:d,audio:!1}).then(f=>{o.srcObject=f,o.play(),this.video=o,this.stream=f,this.onCameraStartedCallback=t,o.addEventListener("canplay",this.onVideoCanPlay.bind(this),!1)}).catch(f=>{this.printError("Camera Error: "+f.name+" "+f.message)})}stopCamera(){this.video&&(this.video.pause(),this.video.srcObject=null,this.video.removeEventListener("canplay",this.onVideoCanPlay.bind(this))),this.stream&&this.stream.getVideoTracks()[0].stop()}getContours(n,t,r){cv.cvtColor(n,this.dstC1,cv.COLOR_RGBA2GRAY),cv.threshold(this.dstC1,this.dstC4,120,200,cv.THRESH_BINARY);const i=new cv.MatVector,o=new cv.Mat;cv.findContours(this.dstC4,i,o,cv.RETR_CCOMP,cv.CHAIN_APPROX_SIMPLE,{x:0,y:0}),this.dstC3.delete(),this.dstC3=cv.Mat.ones(r,t,cv.CV_8UC3);for(let d=0;d<i.size();++d){const f=new cv.Scalar(0,255,0);cv.drawContours(this.dstC3,i,d,f,1,cv.LINE_8,o)}return i.delete(),o.delete(),this.dstC3}}ru.\u0275fac=function(n){return new(n||ru)(Nt(lB))},ru.\u0275prov=Jt({token:ru,factory:ru.\u0275fac,providedIn:"root"}),ru.ngInjectableDef=hs({factory:function(){return new ru(Ji(lB))},token:ru,providedIn:"root"});let cJ=(()=>{class e{static forRoot(t){return{ngModule:e,providers:[{provide:lB,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({providers:[ru]}),e})(),c2=(()=>{class e{constructor(){this.showImagePreset=!1}toggleImagePreset(){this.showImagePreset=!this.showImagePreset}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Jt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const G8=["outputCanvas"],W8=["inputCanvas"];let Jg=(()=>{class e extends sB{constructor(t,r,i){super(),this.ngxOpenCv=t,this.uiservice=r,this.cdr=i,this.sideMenuContext=!0}ngAfterViewInit(){this.ngxOpenCv.isReady$.subscribe(t=>{this.cvState=t}),this.cdr.detectChanges()}loadSelectedFileFromPath(t){const r=new Image;r.onerror=i=>{console.log("Loading failed")},r.src=t,r.onload=()=>{this.drawCanvas?this.drawCanvas.drawImage(r):this.drawCanvasContained&&this.drawCanvasContained.drawImage(r)}}loadSelectedFile(t){var r=new FileReader;r.onload=i=>{const o=new Image;o.onerror=d=>{console.log("Loading failed")},o.src=i.target.result,o.onload=()=>{this.drawCanvasContained.drawImage(o)}},r.readAsDataURL(t)}clearCanvas(){this.drawCanvasContained.clearCanvas()}updateProfile(){const t=this.outputCanvas.getProfile();this.profileOptions={legend:{data:["Profile"],align:"left"},tooltip:{},xAxis:{data:Array.from(Array(t.length).keys()),silent:!1,splitLine:{show:!1}},yAxis:[{type:"value",min:0,max:275}],series:[{symbol:"none",name:"profile",type:"line",areaStyle:{},data:t}],animationEasing:"elasticOut",animationDelayUpdate:r=>5*r}}toggleImagePresets(){this.sideMenuContext=!this.sideMenuContext}}return e.\u0275fac=function(t){return new(t||e)(qe(ru),qe(c2),qe(Pi))},e.\u0275dir=Sn({type:e,contentQueries:function(t,r,i){if(1&t&&(Bi(i,G8,5),Bi(i,W8,5)),2&t){let o;Qn(o=$n())&&(r.outputCanvasContained=o.first),Qn(o=$n())&&(r.drawCanvasContained=o.first)}},viewQuery:function(t,r){if(1&t&&(Qr(G8,5),Qr(W8,5)),2&t){let i;Qn(i=$n())&&(r.outputCanvas=i.first),Qn(i=$n())&&(r.drawCanvas=i.first)}},features:[Gn]}),e})();const uJ=["trigger"],dJ=["panel"];function hJ(e,n){if(1&e&&(je(0,"span",8),Mt(1),Ke()),2&e){const t=Wn();xt(1),Lo(t.placeholder)}}function fJ(e,n){if(1&e&&(je(0,"span",12),Mt(1),Ke()),2&e){const t=Wn(2);xt(1),Lo(t.triggerValue)}}function pJ(e,n){1&e&&Yr(0,0,["*ngSwitchCase","true"])}function gJ(e,n){1&e&&(je(0,"span",9),ir(1,fJ,2,1,"span",10),ir(2,pJ,1,0,"ng-content",11),Ke()),2&e&&(_t("ngSwitch",!!Wn().customTrigger),xt(2),_t("ngSwitchCase",!0))}function vJ(e,n){if(1&e){const t=Fi();je(0,"div",13)(1,"div",14,15),It("@transformPanel.done",function(i){return Ur(t),Gr(Wn()._panelDoneAnimatingStream.next(i.toState))})("keydown",function(i){return Ur(t),Gr(Wn()._handleKeydown(i))}),Yr(3,1),Ke()()}if(2&e){const t=Wn();_t("@transformPanelWrap",void 0),xt(1),iT("mat-select-panel ",t._getPanelTheme(),""),fa("transform-origin",t._transformOrigin)("font-size",t._triggerFontSize,"px"),_t("ngClass",t.panelClass)("@transformPanel",t.multiple?"showing-multiple":"showing"),Pr("id",t.id+"-panel")("aria-multiselectable",t.multiple)("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby())}}const mJ=[[["mat-select-trigger"]],"*"],_J=["mat-select-trigger","*"],j8={transformPanelWrap:Xd("transformPanelWrap",[hl("* => void",$3("@transformPanel",[X3()],{optional:!0}))]),transformPanel:Xd("transformPanel",[dl("void",va({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),dl("showing",va({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),dl("showing-multiple",va({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),hl("void => *",kl("120ms cubic-bezier(0, 0, 0.2, 1)")),hl("* => void",kl("100ms 25ms linear",va({opacity:0})))])};let Z8=0;const X8=new dn("mat-select-scroll-strategy"),wJ=new dn("MAT_SELECT_CONFIG"),CJ={provide:X8,deps:[nu],useFactory:function xJ(e){return()=>e.scrollStrategies.reposition()}};class SJ{constructor(n,t){this.source=n,this.value=t}}const DJ=If(xy(Uw(CG(class{constructor(e,n,t,r,i){this._elementRef=e,this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=r,this.ngControl=i,this.stateChanges=new se}})))),MJ=new dn("MatSelectTrigger");let TJ=(()=>{class e extends DJ{constructor(t,r,i,o,d,f,g,_,w,S,k,V,ne,pe){super(d,o,g,_,S),this._viewportRuler=t,this._changeDetectorRef=r,this._ngZone=i,this._dir=f,this._parentFormField=w,this._liveAnnouncer=ne,this._defaultOptions=pe,this._panelOpen=!1,this._compareWith=(De,Re)=>De===Re,this._uid="mat-select-"+Z8++,this._triggerAriaLabelledBy=null,this._destroy=new se,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+Z8++,this._panelDoneAnimatingStream=new se,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=yw(()=>{const De=this.options;return De?De.changes.pipe(Hs(De),ul(()=>Vn(...De.map(Re=>Re.onSelectionChange)))):this._ngZone.onStable.pipe(vo(1),ul(()=>this.optionSelectionChanges))}),this.openedChange=new En,this._openedStream=this.openedChange.pipe(Ki(De=>De),Ie(()=>{})),this._closedStream=this.openedChange.pipe(Ki(De=>!De),Ie(()=>{})),this.selectionChange=new En,this.valueChange=new En,this.ngControl&&(this.ngControl.valueAccessor=this),null!=pe?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=pe.typeaheadDebounceInterval),this._scrollStrategyFactory=V,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(k)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(Tu.required)??!1}set required(t){this._required=yr(t),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(t){this._multiple=yr(t)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(t){this._disableOptionCentering=yr(t)}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this._assignValue(t)&&this._onChange(t)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(t){this._typeaheadDebounceInterval=xc(t)}get id(){return this._id}set id(t){this._id=t||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new r2(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(Vw(),Vi(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(Vi(this._destroy)).subscribe(t=>{t.added.forEach(r=>r.select()),t.removed.forEach(r=>r.deselect())}),this.options.changes.pipe(Hs(null),Vi(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const t=this._getTriggerAriaLabelledby(),r=this.ngControl;if(t!==this._triggerAriaLabelledBy){const i=this._elementRef.nativeElement;this._triggerAriaLabelledBy=t,t?i.setAttribute("aria-labelledby",t):i.removeAttribute("aria-labelledby")}r&&(this._previousControl!==r.control&&(void 0!==this._previousControl&&null!==r.disabled&&r.disabled!==this.disabled&&(this.disabled=r.disabled),this._previousControl=r.control),this.updateErrorState())}ngOnChanges(t){(t.disabled||t.userAriaDescribedBy)&&this.stateChanges.next(),t.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(t){this._assignValue(t)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const t=this._selectionModel.selected.map(r=>r.viewValue);return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))}_handleClosedKeydown(t){const r=t.keyCode,i=40===r||38===r||37===r||39===r,o=13===r||32===r,d=this._keyManager;if(!d.isTyping()&&o&&!bc(t)||(this.multiple||t.altKey)&&i)t.preventDefault(),this.open();else if(!this.multiple){const f=this.selected;d.onKeydown(t);const g=this.selected;g&&f!==g&&this._liveAnnouncer.announce(g.viewValue,1e4)}}_handleOpenKeydown(t){const r=this._keyManager,i=t.keyCode,o=40===i||38===i,d=r.isTyping();if(o&&t.altKey)t.preventDefault(),this.close();else if(d||13!==i&&32!==i||!r.activeItem||bc(t))if(!d&&this._multiple&&65===i&&t.ctrlKey){t.preventDefault();const f=this.options.some(g=>!g.disabled&&!g.selected);this.options.forEach(g=>{g.disabled||(f?g.select():g.deselect())})}else{const f=r.activeItemIndex;r.onKeydown(t),this._multiple&&o&&t.shiftKey&&r.activeItem&&r.activeItemIndex!==f&&r.activeItem._selectViaInteraction()}else t.preventDefault(),r.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(vo(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(t){if(this._selectionModel.selected.forEach(r=>r.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&t)Array.isArray(t),t.forEach(r=>this._selectOptionByValue(r)),this._sortValues();else{const r=this._selectOptionByValue(t);r?this._keyManager.updateActiveItem(r):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(t){const r=this.options.find(i=>{if(this._selectionModel.isSelected(i))return!1;try{return null!=i.value&&this._compareWith(i.value,t)}catch{return!1}});return r&&this._selectionModel.select(r),r}_assignValue(t){return!!(t!==this._value||this._multiple&&Array.isArray(t))&&(this.options&&this._setSelectionByValue(t),this._value=t,!0)}_initKeyManager(){this._keyManager=new x$(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(Vi(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(Vi(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const t=Vn(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Vi(t)).subscribe(r=>{this._onSelect(r.source,r.isUserInput),r.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),Vn(...this.options.map(r=>r._stateChanges)).pipe(Vi(t)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(t,r){const i=this._selectionModel.isSelected(t);null!=t.value||this._multiple?(i!==t.selected&&(t.selected?this._selectionModel.select(t):this._selectionModel.deselect(t)),r&&this._keyManager.setActiveItem(t),this.multiple&&(this._sortValues(),r&&this.focus())):(t.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(t.value)),i!==this._selectionModel.isSelected(t)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const t=this.options.toArray();this._selectionModel.sort((r,i)=>this.sortComparator?this.sortComparator(r,i,t):t.indexOf(r)-t.indexOf(i)),this.stateChanges.next()}}_propagateChanges(t){let r=null;r=this.multiple?this.selected.map(i=>i.value):this.selected?this.selected.value:t,this._value=r,this.valueChange.emit(r),this._onChange(r),this.selectionChange.emit(this._getChangeEvent(r)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(t){this._elementRef.nativeElement.focus(t)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const t=this._parentFormField?.getLabelId();return this.ariaLabelledby?(t?t+" ":"")+this.ariaLabelledby:t}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const t=this._parentFormField?.getLabelId();let r=(t?t+" ":"")+this._valueId;return this.ariaLabelledby&&(r+=" "+this.ariaLabelledby),r}_panelDoneAnimating(t){this.openedChange.emit(t)}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return e.\u0275fac=function(t){return new(t||e)(qe(jw),qe(Pi),qe(Cr),qe(F3),qe(Or),qe(Ru,8),qe(_w,8),qe(oy,8),qe(t2,8),qe(Eu,10),ms("tabindex"),qe(X8),qe(V$),qe(wJ,8))},e.\u0275dir=Sn({type:e,viewQuery:function(t,r){if(1&t&&(Qr(uJ,5),Qr(dJ,5),Qr($G,5)),2&t){let i;Qn(i=$n())&&(r.trigger=i.first),Qn(i=$n())&&(r.panel=i.first),Qn(i=$n())&&(r._overlayDir=i.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[Gn,ba]}),e})(),$8=(()=>{class e extends TJ{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(t,r,i){const o=this._getItemHeight();return Math.min(Math.max(0,o*t-r+o/2),i)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(Vi(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(vo(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(t){const r=PG(t,this.options,this.optionGroups),i=this._getItemHeight();this.panel.nativeElement.scrollTop=0===t&&1===r?0:function lK(e,n,t,r){return e<t?e:e+n>t+r?Math.max(0,e-r+n):t}((t+r)*i,i,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(t){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(t)}_getChangeEvent(t){return new SJ(this,t)}_calculateOverlayOffsetX(){const t=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),r=this._viewportRuler.getViewportSize(),i=this._isRtl(),o=this.multiple?56:32;let d;if(this.multiple)d=40;else if(this.disableOptionCentering)d=16;else{let _=this._selectionModel.selected[0]||this.options.first;d=_&&_.group?32:16}i||(d*=-1);const f=0-(t.left+d-(i?o:0)),g=t.right+d-r.width+(i?0:o);f>0?d+=f+8:g>0&&(d-=g+8),this._overlayDir.offsetX=Math.round(d),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(t,r,i){const o=this._getItemHeight(),d=(o-this._triggerRect.height)/2,f=Math.floor(256/o);let g;return this.disableOptionCentering?0:(g=0===this._scrollTop?t*o:this._scrollTop===i?(t-(this._getItemCount()-f))*o+(o-(this._getItemCount()*o-256)%o):r-o/2,Math.round(-1*g-d))}_checkOverlayWithinViewport(t){const r=this._getItemHeight(),i=this._viewportRuler.getViewportSize(),o=this._triggerRect.top-8,d=i.height-this._triggerRect.bottom-8,f=Math.abs(this._offsetY),_=Math.min(this._getItemCount()*r,256)-f-this._triggerRect.height;_>d?this._adjustPanelUp(_,d):f>o?this._adjustPanelDown(f,o,t):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(t,r){const i=Math.round(t-r);this._scrollTop-=i,this._offsetY-=i,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(t,r,i){const o=Math.round(t-r);if(this._scrollTop+=o,this._offsetY+=o,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=i)return this._scrollTop=i,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const t=this._getItemHeight(),r=this._getItemCount(),i=Math.min(r*t,256),d=r*t-i;let f;f=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),f+=PG(f,this.options,this.optionGroups);const g=i/2;this._scrollTop=this._calculateOverlayScroll(f,g,d),this._offsetY=this._calculateOverlayOffsetY(f,g,d),this._checkOverlayWithinViewport(d)}_getOriginBasedOnOption(){const t=this._getItemHeight(),r=(t-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-r+t/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Ni(e)))(r||e)}}(),e.\u0275cmp=qn({type:e,selectors:[["mat-select"]],contentQueries:function(t,r,i){if(1&t&&(Bi(i,MJ,5),Bi(i,z3,5),Bi(i,IG,5)),2&t){let o;Qn(o=$n())&&(r.customTrigger=o.first),Qn(o=$n())&&(r.options=o),Qn(o=$n())&&(r.optionGroups=o)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:19,hostBindings:function(t,r){1&t&&It("keydown",function(o){return r._handleKeydown(o)})("focus",function(){return r._onFocus()})("blur",function(){return r._onBlur()}),2&t&&(Pr("id",r.id)("tabindex",r.tabIndex)("aria-controls",r.panelOpen?r.id+"-panel":null)("aria-expanded",r.panelOpen)("aria-label",r.ariaLabel||null)("aria-required",r.required.toString())("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-activedescendant",r._getAriaActiveDescendant()),ii("mat-select-disabled",r.disabled)("mat-select-invalid",r.errorState)("mat-select-required",r.required)("mat-select-empty",r.empty)("mat-select-multiple",r.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[Vr([{provide:e2,useExisting:e},{provide:AG,useExisting:e}]),Gn],ngContentSelectors:_J,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(t,r){if(1&t&&(La(mJ),je(0,"div",0,1),It("click",function(){return r.toggle()}),je(3,"div",2),ir(4,hJ,2,1,"span",3),ir(5,gJ,3,2,"span",4),Ke(),je(6,"div",5),yn(7,"div",6),Ke()(),ir(8,vJ,4,14,"ng-template",7),It("backdropClick",function(){return r.close()})("attach",function(){return r._onAttached()})("detach",function(){return r.close()})),2&t){const i=li(1);Pr("aria-owns",r.panelOpen?r.id+"-panel":null),xt(3),_t("ngSwitch",r.empty),Pr("id",r._valueId),xt(1),_t("ngSwitchCase",!0),xt(1),_t("ngSwitchCase",!1),xt(3),_t("cdkConnectedOverlayPanelClass",r._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",r._scrollStrategy)("cdkConnectedOverlayOrigin",i)("cdkConnectedOverlayOpen",r.panelOpen)("cdkConnectedOverlayPositions",r._positions)("cdkConnectedOverlayMinWidth",null==r._triggerRect?null:r._triggerRect.width)("cdkConnectedOverlayOffsetY",r._offsetY)}},dependencies:[Vd,vf,ey,PA,$G,XG],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[j8.transformPanelWrap,j8.transformPanel]},changeDetection:0}),e})(),EJ=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({providers:[CJ],imports:[Rl,j3,RG,ri,Zw,n2,RG,ri]}),e})();function K8(e,n,t,r,i){var o=t-e,d=r-n,f=1;o<0&&(f=-1,o=-o);var g=2*o-d,_=e;for(let w=n;w<r;w++)i.push({x:_,y:w}),g>0?(_+=f,g+=2*(o-d)):g+=2*o}function Q8(e,n,t,r,i){var o=t-e,d=r-n,f=1;d<0&&(f=-1,d=-d);var g=2*d-o,_=n;for(let w=e;w<t;w++)i.push({x:w,y:_}),g>0?(_+=f,g+=2*(d-o)):g+=2*d}const PJ=["input"],RJ=function(e){return{enterDuration:e}},LJ=["*"],OJ=new dn("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let kJ=0;const NJ={provide:Qo,useExisting:kr(()=>cB),multi:!0};class FJ{constructor(n,t){this.source=n,this.checked=t}}const BJ=xy(jd(If(Uw(class{constructor(e){this._elementRef=e}}))));let VJ=(()=>{class e extends BJ{constructor(t,r,i,o,d,f,g){super(t),this._focusMonitor=r,this._changeDetectorRef=i,this.defaults=d,this._onChange=_=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new En,this.toggleChange=new En,this.tabIndex=parseInt(o)||0,this.color=this.defaultColor=d.color||"accent",this._noopAnimations="NoopAnimations"===f,this.id=this._uniqueId=`${g}${++kJ}`}get required(){return this._required}set required(t){this._required=yr(t)}get checked(){return this._checked}set checked(t){this._checked=yr(t),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?this._focused=!0:t||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return e.\u0275fac=function(t){El()},e.\u0275dir=Sn({type:e,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[Gn]}),e})(),cB=(()=>{class e extends VJ{constructor(t,r,i,o,d,f){super(t,r,i,o,d,f,"mat-slide-toggle-")}_createChangeEvent(t){return new FJ(this,t)}_onChangeEvent(t){t.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(t){t.stopPropagation()}focus(t,r){r?this._focusMonitor.focusVia(this._inputElement,r,t):this._inputElement.nativeElement.focus(t)}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(qe(Or),qe(wc),qe(Pi),ms("tabindex"),qe(OJ),qe(Xo,8))},e.\u0275cmp=qn({type:e,selectors:[["mat-slide-toggle"]],viewQuery:function(t,r){if(1&t&&Qr(PJ,5),2&t){let i;Qn(i=$n())&&(r._inputElement=i.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:13,hostBindings:function(t,r){2&t&&(Zo("id",r.id),Pr("tabindex",null)("aria-label",null)("aria-labelledby",null)("name",null),ii("mat-checked",r.checked)("mat-disabled",r.disabled)("mat-slide-toggle-label-before","before"==r.labelPosition)("_mat-animation-noopable",r._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[Vr([NJ]),Gn],ngContentSelectors:LJ,decls:14,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(t,r){if(1&t&&(La(),je(0,"label",0,1)(2,"span",2)(3,"input",3,4),It("change",function(o){return r._onChangeEvent(o)})("click",function(o){return r._onInputClick(o)}),Ke(),je(5,"span",5),yn(6,"span",6),je(7,"span",7),yn(8,"span",8),Ke()()(),je(9,"span",9,10),It("cdkObserveContent",function(){return r._onLabelTextChange()}),je(11,"span",11),Mt(12,"\xa0"),Ke(),Yr(13),Ke()()),2&t){const i=li(1),o=li(10);Pr("for",r.inputId),xt(2),ii("mat-slide-toggle-bar-no-side-margin",!o.textContent||!o.textContent.trim()),xt(1),_t("id",r.inputId)("required",r.required)("tabIndex",r.tabIndex)("checked",r.checked)("disabled",r.disabled),Pr("name",r.name)("aria-checked",r.checked)("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby)("aria-describedby",r.ariaDescribedby),xt(4),_t("matRippleTrigger",i)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",hc(18,RJ,r._noopAnimations?0:150))}},dependencies:[Zd,k3],styles:['.mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%;display:block}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.mat-slide-toggle-input:focus~.mat-slide-toggle-thumb-container .mat-focus-indicator::before{content:""}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}'],encapsulation:2,changeDetection:0}),e})(),q8=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({}),e})(),UJ=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[q8,Zg,ri,zI,q8,ri]}),e})();const GJ=function(e,n){return{cornerHandle:e,"anchorHandle animate-pulse":n}},WJ=function(e){return{hidden:e}};let J8=(()=>{class e{constructor(){this.handleDrag=!1,this.handleSize=16,this.handlePos={x:256,y:-50},this.handleColor="#7dafff",this.scale=1,this.showCoordinates=!0,this.isAnchor=!1}startHandleDrag(t,r){this.handleDrag=!0}stopHandleDrag(){this.handleDrag=!1}moveTo(t,r,i,o){t=Math.min(Math.max(t,this.handleSize/2),i-this.handleSize/2),r=Math.min(Math.max(r,this.handleSize/2),o-this.handleSize/2),this.handlePos={x:t,y:r}}getLabelCoordinates(){const r=this.handlePos.y*this.scale;return{x:(this.handlePos.x*this.scale).toFixed(0),y:r.toFixed(0)}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=qn({type:e,selectors:[["app-handle"]],inputs:{handleSize:"handleSize",handlePos:"handlePos",handleColor:"handleColor",scale:"scale",showCoordinates:"showCoordinates",isAnchor:"isAnchor"},decls:3,vars:17,consts:[[1,"handle",3,"ngClass","mousedown","touchstart","touchstop","mouseup"],[1,"select-none","pointer-events-none",3,"ngClass"]],template:function(t,r){1&t&&(je(0,"div",0),It("mousedown",function(o){return r.startHandleDrag(o,1)})("touchstart",function(o){return r.startHandleDrag(o,1)})("touchstop",function(){return r.stopHandleDrag()})("mouseup",function(){return r.stopHandleDrag()}),je(1,"p",1),Mt(2),Ke()()),2&t&&(fa("top",r.handlePos.y,"px")("left",r.handlePos.x,"px")("--width",r.handleSize,"px")("--color",r.handleColor),_t("ngClass",lg(12,GJ,!r.isAnchor,r.isAnchor)),xt(1),_t("ngClass",hc(15,WJ,!r.showCoordinates)),xt(1),Jp("(",r.getLabelCoordinates().x,",",r.getLabelCoordinates().y,")"))},dependencies:[Vd],styles:[".handle[_ngcontent-%COMP%]{width:var(--width);aspect-ratio:1;position:absolute;cursor:move;border:solid rgba(255,255,255,.25) 1px;transform:translate(-50%,-50%);font-size:smaller;transform-origin:top left;z-index:99;display:flex;justify-content:center;text-align:center;border-radius:100%}.cornerHandle[_ngcontent-%COMP%]{background:radial-gradient(circle at calc(var(--width) / 2) calc(var(--width) / 2),var(--color),#000);box-shadow:#0000004d 0 19px 38px,#00000038 0 15px 12px}.anchorHandle[_ngcontent-%COMP%]{border:solid rgba(255,255,255,.75) 1px;background:rgba(191,191,191,.5);z-index:128}.handle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:relative;top:-24px}.handle[_ngcontent-%COMP%]:hover{border:dashed white 1px}"]}),e})();const jJ=["handle1"],ZJ=["handle2"],YJ=["midHandle"];let XJ=(()=>{class e{constructor(t){this.cdr=t,this.point1={x:0,y:0},this.point2={x:0,y:0},this.scale=1,this.labelPos={x:0,y:0},this.midPoint={x:0,y:0}}ngOnInit(){}ngAfterViewInit(){this.update(),this.cdr.detectChanges()}getRectangleCoordinates(){return{x1:this.point1.x,y1:this.point1.y,x2:this.point2.x,y2:this.point2.y}}getHandles(){return[this.handle1,this.handle2]}getMidHandle(){return this.midHandle}update(){this.point1=this.handle1.handlePos,this.point2=this.handle2.handlePos,this.midPoint={x:(this.point1.x+this.point2.x)/2,y:(this.point1.y+this.point2.y)/2},this.updateNamePosition()}updateNamePosition(){const t=Math.min(this.handle1.handlePos.y,this.handle2.handlePos.y);this.labelPos={y:t,x:(this.handle1.handlePos.x+this.handle2.handlePos.x)/2}}}return e.\u0275fac=function(t){return new(t||e)(qe(Pi))},e.\u0275cmp=qn({type:e,selectors:[["app-roi"]],viewQuery:function(t,r){if(1&t&&(Qr(jJ,5),Qr(ZJ,5),Qr(YJ,5)),2&t){let i;Qn(i=$n())&&(r.handle1=i.first),Qn(i=$n())&&(r.handle2=i.first),Qn(i=$n())&&(r.midHandle=i.first)}},inputs:{point1:"point1",point2:"point2",scale:"scale",property:"property"},decls:8,vars:17,consts:[[3,"handlePos","scale","handleColor"],["handle1",""],["handle2",""],[3,"handlePos","scale","handleColor","handleSize","showCoordinates","isAnchor"],["midHandle",""],[1,"absolute","label","text-sm","select-none","pointer-events-none"]],template:function(t,r){1&t&&(yn(0,"app-handle",0,1)(2,"app-handle",0,2)(4,"app-handle",3,4),je(6,"p",5),Mt(7),Ke()),2&t&&(_t("handlePos",r.point1)("scale",r.scale)("handleColor",r.property.color),xt(2),_t("handlePos",r.point2)("scale",r.scale)("handleColor",r.property.color),xt(2),_t("handlePos",r.midPoint)("scale",r.scale)("handleColor","white")("handleSize",12)("showCoordinates",!1)("isAnchor",!0),xt(2),fa("top",r.labelPos.y,"px")("left",r.labelPos.x,"px"),xt(1),Lo(r.property.name))},dependencies:[J8],styles:[".label[_ngcontent-%COMP%]{transform:translate(-50%,-100%);transform-origin:top left;z-index:50}"]}),e})();const $J=["canvas"],KJ=["canvasUI"],QJ=["handleProfile"],qJ=["ROI"];function JJ(e,n){if(1&e&&(je(0,"p",13),Mt(1),Ke()),2&e){const t=Wn();xt(1),Lo(t.title)}}function eee(e,n){if(1&e){const t=Fi();je(0,"span",14)(1,"mat-slide-toggle",15),It("ngModelChange",function(i){return Ur(t),Gr(Wn().isBWChecked=i)})("change",function(){return Ur(t),Gr(Wn().BWToggle())}),Mt(2,"B&W"),Ke()()}if(2&e){const t=Wn();xt(1),_t("ngModel",t.isBWChecked)}}function tee(e,n){if(1&e){const t=Fi();je(0,"span",16)(1,"mat-slide-toggle",15),It("ngModelChange",function(i){return Ur(t),Gr(Wn().profile=i)})("change",function(){return Ur(t),Gr(Wn().updateCanvasUI())}),Mt(2,"profile"),Ke()()}if(2&e){const t=Wn();xt(1),_t("ngModel",t.profile)}}function nee(e,n){if(1&e&&(je(0,"div",17,18),yn(2,"div",19),je(3,"mat-icon"),Mt(4,"brush"),Ke()()),2&e){const t=Wn();fa("top",t.cursorPosition.y,"px")("left",t.cursorPosition.x,"px")("width",t.getCursorTransform(),"px"),xt(2),fa("border-color",t.drawColor)}}function ree(e,n){if(1&e&&yn(0,"app-roi",20,21),2&e){const t=n.$implicit,r=Wn();_t("point1",t.initial1)("point2",t.initial2)("scale",r.getScreenToCanvasScale())("property",t)}}const iee=function(e){return{BWFilter:e}},aee=function(e){return{hidden:e}},oee=function(){return{x:50,y:100}},see=function(){return{x:250,y:100}};let ev=(()=>{class e{constructor(){this.drawingEnded=new En,this.width=256,this.height=this.width,this.UIwidth=1024,this.roi=[],this.brushRadius=10,this.drawColor="white",this.drawable=!0,this.title="",this.BWOption=!1,this.OnlyBW=!1,this.profileOption=!1,this.BWSet=new En,this.profileChanged=new En,this.roiChanged=new En,this.profile=!1,this.isBWChecked=!1,this.cursorPosition={x:0,y:0},this.startDrawing=!1}ngOnInit(){const t=this.canvas.nativeElement;this.ctx=t.getContext("2d",{alpha:!1}),this.ctx.imageSmoothingEnabled=!1,this.height=this.width,t.width=this.width,t.height=this.height,this.ctx.canvas.width=this.width,this.ctx.canvas.height=this.height;const r=this.canvasUI.nativeElement;this.ctxUI=r.getContext("2d",{alpha:!0}),r.width=this.UIwidth,r.height=this.UIwidth,this.drawable&&this.captureEvents(t),this.ctx.fillRect(0,0,this.width,this.height)}BWToggle(){this.BWSet.emit()}ngAfterViewInit(){this.updateCanvasUI()}setCanvasDimensions(t,r){this.height=r,this.width=t,this.ctx.canvas.width=t,this.ctx.canvas.height=r}getArray(){return this.ctx.getImageData(0,0,this.width,this.height).data}getCanvas(){return this.ctx.canvas}getCtx(){return this.ctx}clearCanvas(){this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.width,this.height),this.drawingEnded.emit()}drawImage(t){this.ctx.drawImage(t,0,0,this.width,this.height),this.updateCanvasUI(),this.drawingEnded.emit()}drawMat(t){cv.imshow(this.getCanvas(),t),this.updateCanvasUI()}drawMatWithoutEvent(t){cv.imshow(this.getCanvas(),t)}drawArray(t,r=this.width,i=this.height,o=0,d=0){var f=new ImageData(t,r,i);this.ctx.putImageData(f,o,d),this.updateCanvasUI(),this.drawingEnded.emit()}drawCroppedArray(t,r=this.width,i=this.height,o=0,d=0,f=0,g=0,_=r,w=i){var S=new ImageData(t,r,i);this.ctx.putImageData(S,o,d,f,g,_,w),this.updateCanvasUI(),this.drawingEnded.emit()}draw(t,r=null){this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y),r?this.ctx.lineTo(r.x,r.y):this.ctx.lineTo(t.x,t.y),this.ctx.lineWidth=this.brushRadius,this.ctx.strokeStyle=this.drawColor,this.ctx.lineCap="round",this.ctx.stroke()}draw_callback(){this.drawingEnded.emit(!0)}captureEvents(t){const r=Ol(t,"touchstart"),i=Ol(t,"mousedown"),o=Ol(t,"mousemove"),d=Vn(r,i),g=Vn(Ol(t,"touchmove"),o),_=Ol(t,"touchend"),w=Ol(t,"mouseup"),k=Vn(_,Ol(t,"mouseleave"),w);let V=!1;g.subscribe({next:ne=>{const pe=t.getBoundingClientRect();var De=this.getClientPosition(ne);this.cursorPosition.x=De.clientX-pe.left,this.cursorPosition.y=De.clientY-pe.top}}),d.pipe(ul(ne=>{const pe=t.getBoundingClientRect(),De=this.getCoord(ne,pe);return V=!0,this.initialPos=De,this.startDrawing=!0,this.draw(De),this.draw_callback(),g.pipe(Vi(k),function AJ(){return ge((e,n)=>{let t,r=!1;e.subscribe(Ce(n,i=>{const o=t;t=i,r&&n.next([o,i]),r=!0}))})}())})).subscribe({next:ne=>{const pe=t.getBoundingClientRect();var De=this.getCoord(ne[0],pe);const Re=this.getCoord(ne[1],pe);this.startDrawing&&(this.startDrawing=!1,De=this.initialPos),this.draw(De,Re),this.draw_callback()}}),k.subscribe(ne=>{V&&(this.updateCanvasUI(),this.draw_callback()),V=!1})}getClientPosition(t){return t.preventDefault(),"touches"in t?{clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}:{clientX:t.clientX,clientY:t.clientY}}getCoord(t,r){var i=this.getClientPosition(t);return{x:this.width/r.width*(i.clientX-r.left),y:this.height/r.height*(i.clientY-r.top)}}getCursorTransform(){return this.canvas.nativeElement.getBoundingClientRect().width/this.width*this.brushRadius}updateHandleDragPos(t){const i=this.ctxUI.canvas.getBoundingClientRect();var o=this.getClientPosition(t);let d=this.handles.toArray(),f=this.ROIs.toArray();const g=o.clientX-i.left,_=o.clientY-i.top;let w=!1;const S=g>=i.width||g<=0||_>=i.height||_<=0;d.forEach(k=>{k.handleDrag=!S&&k.handleDrag,k.handleDrag&&(k.moveTo(g,_,i.width,i.height),w=!0)}),f.forEach(k=>{let V=k.getHandles();V.forEach(pe=>{pe.handleDrag=!S&&pe.handleDrag,pe.handleDrag&&(pe.moveTo(g,_,i.width,i.height),k.update(),w=!0)});let ne=k.getMidHandle();if(ne.handleDrag=!S&&ne.handleDrag,ne.handleDrag){let pe=g-ne.handlePos.x,De=_-ne.handlePos.y;V.forEach(Re=>{Re.moveTo(Re.handlePos.x+pe,Re.handlePos.y+De,i.width,i.height),k.update(),w=!0})}}),this.updateCanvasUI()}updateCanvasUI(){this.ctxUI.clearRect(0,0,this.UIwidth,this.UIwidth),requestAnimationFrame(()=>{this.ROIs.length>0&&this.updateROI(),this.profile&&this.updateProfile()})}transformCoordinatesFromScreenToUISpace(t){const i=this.ctxUI.canvas.getBoundingClientRect();return{x:t.x*(this.UIwidth/i.width),y:t.y*(this.UIwidth/i.height)}}transformCoordinatesFromScreenToCanvas(t){const i=this.ctx.canvas.getBoundingClientRect();return{x:t.x*(this.width/i.width),y:t.y*(this.height/i.height)}}getScreenToCanvasScale(){const i=this.ctx.canvas.getBoundingClientRect().width;return this.width/i}getProfile(){return this.profileArray}updateProfile(){this.ctxUI.beginPath();let t=this.handles.toArray();const r=this.transformCoordinatesFromScreenToCanvas(t[0].handlePos),i=this.transformCoordinatesFromScreenToCanvas(t[1].handlePos),o=this.transformCoordinatesFromScreenToUISpace(t[0].handlePos),d=this.transformCoordinatesFromScreenToUISpace(t[1].handlePos);this.ctxUI.moveTo(o.x,o.y),this.ctxUI.lineTo(d.x,d.y),this.ctxUI.lineWidth=3,this.ctxUI.strokeStyle="blue",this.ctxUI.setLineDash([10,20]),this.ctxUI.stroke(),this.recomputeProfile(r,i)}updateROI(){let t=this.ROIs.toArray();this.ctxUI.setLineDash([5,5]),this.ctxUI.lineWidth=2,t.forEach(r=>{const i=r.getHandles(),o=this.transformCoordinatesFromScreenToUISpace(i[0].handlePos),d=this.transformCoordinatesFromScreenToUISpace(i[1].handlePos);this.ctxUI.beginPath(),this.ctxUI.strokeStyle=r.property.color,this.ctxUI.fillStyle=r.property.color,this.ctxUI.strokeRect(o.x,o.y,d.x-o.x,d.y-o.y),this.ctxUI.globalAlpha=.3,this.ctxUI.fillRect(o.x,o.y,d.x-o.x,d.y-o.y),this.ctxUI.fill(),this.ctxUI.globalAlpha=1,this.ctxUI.stroke(),this.recomputeROI(r)})}recomputeProfile(t,r){let i=function IJ(e,n){let t=new Array;var r=Math.round(e.x),i=Math.round(e.y),o=Math.round(n.x),d=Math.round(n.y);return Math.abs(d-i)<Math.abs(o-r)?r>o?Q8(o,d,r,i,t):Q8(r,i,o,d,t):i>d?K8(o,d,r,i,t):K8(r,i,o,d,t),t}(t,r);this.profileArray=new Array;let o=this.getArray();i.forEach(d=>{this.profileArray.push(o[4*(this.width*d.y+d.x)])}),this.profileChanged.emit()}recomputeROI(t){let r=t.getHandles(),i=this.transformCoordinatesFromScreenToCanvas(r[0].handlePos),o=this.transformCoordinatesFromScreenToCanvas(r[1].handlePos),d=Math.min(i.x,o.x),f=Math.min(i.y,o.y),g=Math.abs(i.x-o.x),_=Math.abs(i.y-o.y),w=this.ctx.getImageData(d,f,g,_);t.property.data=w,this.roiChanged.emit(t.property)}isBW(){return this.isBWChecked}getValueAtSquare(t,r,i,o){return this.ctx.getImageData(t,r,i,o).data}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=qn({type:e,selectors:[["app-draw-canvas"]],viewQuery:function(t,r){if(1&t&&(Qr($J,7),Qr(KJ,7),Qr(QJ,5),Qr(qJ,5)),2&t){let i;Qn(i=$n())&&(r.canvas=i.first),Qn(i=$n())&&(r.canvasUI=i.first),Qn(i=$n())&&(r.handles=i),Qn(i=$n())&&(r.ROIs=i)}},hostBindings:function(t,r){1&t&&It("resize",function(o){return r.updateCanvasUI(o)},0,Em)},inputs:{width:"width",roi:"roi",brushRadius:"brushRadius",drawColor:"drawColor",drawable:"drawable",title:"title",BWOption:"BWOption",OnlyBW:"OnlyBW",profileOption:"profileOption"},outputs:{drawingEnded:"drawingEnded",BWSet:"BWSet",profileChanged:"profileChanged",roiChanged:"roiChanged"},decls:15,vars:20,consts:[[1,"canvas-container",3,"mousemove"],["class","title select-none",4,"ngIf"],["class","BW-toggle toggle",4,"ngIf"],["class","Profile-toggle toggle",4,"ngIf"],["class","cursor",3,"top","left","width",4,"ngIf"],["id","canvasVisu",3,"ngClass"],["canvas",""],["id","canvasUI",1,"pointer-events-none",3,"width"],["canvasUI",""],[3,"ngClass"],[1,"handle",3,"handlePos","scale"],["handleProfile",""],[3,"point1","point2","scale","property",4,"ngFor","ngForOf"],[1,"title","select-none"],[1,"BW-toggle","toggle"],["color","primary",3,"ngModel","ngModelChange","change"],[1,"Profile-toggle","toggle"],[1,"cursor"],["cursor",""],[1,"cursor-radius"],[3,"point1","point2","scale","property"],["ROI",""]],template:function(t,r){1&t&&(je(0,"div",0),It("mousemove",function(o){return r.updateHandleDragPos(o)}),ir(1,JJ,2,1,"p",1),ir(2,eee,3,1,"span",2),ir(3,tee,3,1,"span",3),ir(4,nee,5,8,"div",4),yn(5,"canvas",5,6)(7,"canvas",7,8),je(9,"div",9),yn(10,"app-handle",10,11)(12,"app-handle",10,11),Ke(),ir(14,ree,2,4,"app-roi",12),Ke()),2&t&&(fa("cursor",r.drawable?"none":"default"),xt(1),_t("ngIf",r.title),xt(1),_t("ngIf",r.BWOption),xt(1),_t("ngIf",r.profileOption),xt(1),_t("ngIf",r.drawable),xt(1),_t("ngClass",hc(14,iee,r.isBWChecked||r.OnlyBW)),xt(2),_t("width",r.UIwidth),xt(2),_t("ngClass",hc(16,aee,!r.profile)),xt(1),_t("handlePos",Id(18,oee))("scale",r.getScreenToCanvasScale()),xt(2),_t("handlePos",Id(19,see))("scale",r.getScreenToCanvasScale()),xt(2),_t("ngForOf",r.roi))},dependencies:[Vd,mc,xs,Au,Iu,cB,$d,J8,XJ],styles:[".canvas-container[_ngcontent-%COMP%]{overflow:hidden;position:relative;width:100%;aspect-ratio:1;cursor:none;box-shadow:#0000003d 0 3px 8px}.toggle[_ngcontent-%COMP%]{position:absolute;color:#fff;z-index:10;background-color:#7f7f7f80;border-radius:3px;margin:5px;padding:0 5px}.BW-toggle[_ngcontent-%COMP%]{top:0;right:0}.Profile-toggle[_ngcontent-%COMP%]{bottom:0;right:0}.title[_ngcontent-%COMP%]{position:absolute;top:0;left:0;z-index:10;pointer-events:none;margin:5px;background-color:#7f7f7f80;color:#fff;padding:0 5px;border-radius:3px}.canvas-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{width:100%;aspect-ratio:1}.canvas-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:absolute;height:inherit}.cursor[_ngcontent-%COMP%]{z-index:5;position:absolute;aspect-ratio:1;transform:translate(-50%,-50%);pointer-events:none;transform-origin:top left}.cursor[_ngcontent-%COMP%] > .cursor-radius[_ngcontent-%COMP%]{position:relative;width:inherit;aspect-ratio:1;border-radius:50%;border-style:dashed;border-width:1px;pointer-events:none;transform-origin:center;animation:rotation 20s infinite linear;background:radial-gradient(circle,white 0%,white 5%,rgba(100,100,100,.5) 3%,rgba(100,100,100,.5) 100%)}.cursor[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translateY(-75%)}@keyframes rotation{0%{transform:rotate(0)}to{transform:rotate(359deg)}}.BWFilter[_ngcontent-%COMP%]{filter:grayscale(1)}"]}),e})();const lee=["sliderWrapper"],Cc=Ow({passive:!1}),fee={provide:Qo,useExisting:kr(()=>uB),multi:!0};class pee{}const gee=xy(jd(Uw(class{constructor(e){this._elementRef=e}}),"accent"));let uB=(()=>{class e extends gee{constructor(t,r,i,o,d,f,g,_){super(t),this._focusMonitor=r,this._changeDetectorRef=i,this._dir=o,this._ngZone=f,this._animationMode=_,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new En,this.input=new En,this.valueChange=new En,this.onTouched=()=>{},this._percent=0,this._isSliding=null,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=()=>{},this._dirChangeSubscription=ye.EMPTY,this._pointerDown=w=>{this.disabled||this._isSliding||!Jw(w)&&0!==w.button||this._ngZone.run(()=>{this._touchId=Jw(w)?function vee(e,n){for(let t=0;t<e.touches.length;t++){const r=e.touches[t].target;if(n===r||n.contains(r))return e.touches[t].identifier}}(w,this._elementRef.nativeElement):void 0;const S=t6(w,this._touchId);if(S){const k=this.value;this._isSliding="pointer",this._lastPointerEvent=w,this._focusHostElement(),this._onMouseenter(),this._bindGlobalEvents(w),this._focusHostElement(),this._updateValueFromPosition(S),this._valueOnSlideStart=k,w.cancelable&&w.preventDefault(),k!=this.value&&this._emitInputEvent()}})},this._pointerMove=w=>{if("pointer"===this._isSliding){const S=t6(w,this._touchId);if(S){w.cancelable&&w.preventDefault();const k=this.value;this._lastPointerEvent=w,this._updateValueFromPosition(S),k!=this.value&&this._emitInputEvent()}}},this._pointerUp=w=>{"pointer"===this._isSliding&&(!Jw(w)||"number"!=typeof this._touchId||dB(w.changedTouches,this._touchId))&&(w.cancelable&&w.preventDefault(),this._removeGlobalEvents(),this._isSliding=null,this._touchId=void 0,this._valueOnSlideStart!=this.value&&!this.disabled&&this._emitChangeEvent(),this._valueOnSlideStart=this._lastPointerEvent=null)},this._windowBlur=()=>{this._lastPointerEvent&&this._pointerUp(this._lastPointerEvent)},this._document=g,this.tabIndex=parseInt(d)||0,f.runOutsideAngular(()=>{const w=t.nativeElement;w.addEventListener("mousedown",this._pointerDown,Cc),w.addEventListener("touchstart",this._pointerDown,Cc)})}get invert(){return this._invert}set invert(t){this._invert=yr(t)}get max(){return this._max}set max(t){this._max=xc(t,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(t){this._min=xc(t,this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(t){this._step=xc(t,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(t){this._thumbLabel=yr(t)}get tickInterval(){return this._tickInterval}set tickInterval(t){this._tickInterval="auto"===t?"auto":"number"==typeof t||"string"==typeof t?xc(t,this._tickInterval):0}get value(){return null===this._value&&(this.value=this._min),this._value}set value(t){if(t!==this._value){let r=xc(t,0);this._roundToDecimal&&r!==this.min&&r!==this.max&&(r=parseFloat(r.toFixed(this._roundToDecimal))),this._value=r,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(t){this._vertical=yr(t)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(t){this._focusHostElement(t)}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}_shouldInvertAxis(){return this.vertical?!this.invert:this.invert}_isMinValue(){return 0===this.percent}_getThumbGap(){return this.disabled?7:this._isMinValue()&&!this.thumbLabel?this._isActive?10:7:0}_getTrackBackgroundStyles(){const r=this.vertical?`1, ${1-this.percent}, 1`:1-this.percent+", 1, 1";return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"-":""}${this._getThumbGap()}px) scale3d(${r})`}}_getTrackFillStyles(){const t=this.percent,i=this.vertical?`1, ${t}, 1`:`${t}, 1, 1`;return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"":"-"}${this._getThumbGap()}px) scale3d(${i})`,display:0===t?"none":""}}_getTicksContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"-":""}${this._tickIntervalPercent/2*100}%)`}}_getTicksStyles(){let t=100*this._tickIntervalPercent,f={backgroundSize:this.vertical?`2px ${t}%`:`${t}% 2px`,transform:`translateZ(0) translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"":"-"}${t/2}%)${this.vertical||"rtl"!=this._getDirection()?"":" rotate(180deg)"}`};if(this._isMinValue()&&this._getThumbGap()){const g=this._shouldInvertAxis();let _;_=this.vertical?g?"Bottom":"Top":g?"Right":"Left",f[`padding${_}`]=`${this._getThumbGap()}px`}return f}_getThumbContainerStyles(){const t=this._shouldInvertAxis();return{transform:`translate${this.vertical?"Y":"X"}(-${100*(("rtl"!=this._getDirection()||this.vertical?t:!t)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){const t=this._shouldInvertAxis();return"rtl"!=this._getDirection()||this.vertical?t:!t}_getDirection(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{this._isActive=!!t&&"keyboard"!==t,this._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){const t=this._elementRef.nativeElement;t.removeEventListener("mousedown",this._pointerDown,Cc),t.removeEventListener("touchstart",this._pointerDown,Cc),this._lastPointerEvent=null,this._removeGlobalEvents(),this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(t){if(this.disabled||bc(t)||this._isSliding&&"keyboard"!==this._isSliding)return;const r=this.value;switch(t.keyCode){case 33:this._increment(10);break;case 34:this._increment(-10);break;case 35:this.value=this.max;break;case 36:this.value=this.min;break;case 37:this._increment("rtl"==this._getDirection()?1:-1);break;case 38:this._increment(1);break;case 39:this._increment("rtl"==this._getDirection()?-1:1);break;case 40:this._increment(-1);break;default:return}r!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding="keyboard",t.preventDefault()}_onKeyup(){"keyboard"===this._isSliding&&(this._isSliding=null)}_getWindow(){return this._document.defaultView||window}_bindGlobalEvents(t){const r=this._document,i=Jw(t),d=i?"touchend":"mouseup";r.addEventListener(i?"touchmove":"mousemove",this._pointerMove,Cc),r.addEventListener(d,this._pointerUp,Cc),i&&r.addEventListener("touchcancel",this._pointerUp,Cc);const f=this._getWindow();typeof f<"u"&&f&&f.addEventListener("blur",this._windowBlur)}_removeGlobalEvents(){const t=this._document;t.removeEventListener("mousemove",this._pointerMove,Cc),t.removeEventListener("mouseup",this._pointerUp,Cc),t.removeEventListener("touchmove",this._pointerMove,Cc),t.removeEventListener("touchend",this._pointerUp,Cc),t.removeEventListener("touchcancel",this._pointerUp,Cc);const r=this._getWindow();typeof r<"u"&&r&&r.removeEventListener("blur",this._windowBlur)}_increment(t){const r=this._clamp(this.value||0,this.min,this.max);this.value=this._clamp(r+this.step*t,this.min,this.max)}_updateValueFromPosition(t){if(!this._sliderDimensions)return;let d=this._clamp(((this.vertical?t.y:t.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(d=1-d),0===d)this.value=this.min;else if(1===d)this.value=this.max;else{const f=this._calculateValue(d),g=Math.round((f-this.min)/this.step)*this.step+this.min;this.value=this._clamp(g,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(!this.tickInterval||!this._sliderDimensions)return;let t;if("auto"==this.tickInterval){let r=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width;t=Math.ceil(30/(r*this.step/(this.max-this.min)))*this.step/r}else t=this.tickInterval*this.step/(this.max-this.min);this._tickIntervalPercent=e6(t)?t:0}_createChangeEvent(t=this.value){let r=new pee;return r.source=this,r.value=t,r}_calculatePercentage(t){const r=((t||0)-this.min)/(this.max-this.min);return e6(r)?r:0}_calculateValue(t){return this.min+t*(this.max-this.min)}_clamp(t,r=0,i=1){return Math.max(r,Math.min(t,i))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(t){this._elementRef.nativeElement.focus(t)}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(t){this.value=t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}}return e.\u0275fac=function(t){return new(t||e)(qe(Or),qe(wc),qe(Pi),qe(Ru,8),ms("tabindex"),qe(Cr),qe(Rr),qe(Xo,8))},e.\u0275cmp=qn({type:e,selectors:[["mat-slider"]],viewQuery:function(t,r){if(1&t&&Qr(lee,5),2&t){let i;Qn(i=$n())&&(r._sliderWrapper=i.first)}},hostAttrs:["role","slider",1,"mat-slider","mat-focus-indicator"],hostVars:29,hostBindings:function(t,r){1&t&&It("focus",function(){return r._onFocus()})("blur",function(){return r._onBlur()})("keydown",function(o){return r._onKeydown(o)})("keyup",function(){return r._onKeyup()})("mouseenter",function(){return r._onMouseenter()})("selectstart",function(o){return o.preventDefault()}),2&t&&(Zo("tabIndex",r.tabIndex),Pr("aria-disabled",r.disabled)("aria-valuemax",r.max)("aria-valuemin",r.min)("aria-valuenow",r.value)("aria-valuetext",r.valueText??r.displayValue)("aria-orientation",r.vertical?"vertical":"horizontal"),ii("mat-slider-disabled",r.disabled)("mat-slider-has-ticks",r.tickInterval)("mat-slider-horizontal",!r.vertical)("mat-slider-axis-inverted",r._shouldInvertAxis())("mat-slider-invert-mouse-coords",r._shouldInvertMouseCoords())("mat-slider-sliding",r._isSliding)("mat-slider-thumb-label-showing",r.thumbLabel)("mat-slider-vertical",r.vertical)("mat-slider-min-value",r._isMinValue())("mat-slider-hide-last-tick",r.disabled||r._isMinValue()&&r._getThumbGap()&&r._shouldInvertAxis())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{disabled:"disabled",color:"color",tabIndex:"tabIndex",invert:"invert",max:"max",min:"min",step:"step",thumbLabel:"thumbLabel",tickInterval:"tickInterval",value:"value",displayWith:"displayWith",valueText:"valueText",vertical:"vertical"},outputs:{change:"change",input:"input",valueChange:"valueChange"},exportAs:["matSlider"],features:[Vr([fee]),Gn],decls:13,vars:6,consts:[[1,"mat-slider-wrapper"],["sliderWrapper",""],[1,"mat-slider-track-wrapper"],[1,"mat-slider-track-background",3,"ngStyle"],[1,"mat-slider-track-fill",3,"ngStyle"],[1,"mat-slider-ticks-container",3,"ngStyle"],[1,"mat-slider-ticks",3,"ngStyle"],[1,"mat-slider-thumb-container",3,"ngStyle"],[1,"mat-slider-focus-ring"],[1,"mat-slider-thumb"],[1,"mat-slider-thumb-label"],[1,"mat-slider-thumb-label-text"]],template:function(t,r){1&t&&(je(0,"div",0,1)(2,"div",2),yn(3,"div",3)(4,"div",4),Ke(),je(5,"div",5),yn(6,"div",6),Ke(),je(7,"div",7),yn(8,"div",8)(9,"div",9),je(10,"div",10)(11,"span",11),Mt(12),Ke()()()()),2&t&&(xt(3),_t("ngStyle",r._getTrackBackgroundStyles()),xt(1),_t("ngStyle",r._getTrackFillStyles()),xt(1),_t("ngStyle",r._getTicksContainerStyles()),xt(1),_t("ngStyle",r._getTicksStyles()),xt(1),_t("ngStyle",r._getThumbContainerStyles()),xt(5),Lo(r.displayValue))},dependencies:[Ig],styles:['.mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:none;vertical-align:middle}.mat-slider:not(.mat-slider-disabled):active,.mat-slider.mat-slider-sliding:not(.mat-slider-disabled){cursor:grabbing}.mat-slider-wrapper{-webkit-print-color-adjust:exact;color-adjust:exact;position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{-webkit-background-clip:content-box;background-clip:content-box;background-repeat:repeat;box-sizing:border-box;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb{cursor:grab}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid rgba(0,0,0,0);border-radius:50%;transform:scale(0.7);transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-radius 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.cdk-high-contrast-active .mat-slider-thumb-label{outline:solid 1px}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-sliding .mat-slider-track-fill,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-thumb-container{transition-duration:0ms}.mat-slider-has-ticks .mat-slider-wrapper::after{content:"";position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(0.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.cdk-high-contrast-active .mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(0.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.cdk-high-contrast-active .mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(0.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-track-fill,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after{transition:none}'],encapsulation:2,changeDetection:0}),e})();function e6(e){return!isNaN(e)&&isFinite(e)}function Jw(e){return"t"===e.type[0]}function t6(e,n){let t;return t=Jw(e)?"number"==typeof n?dB(e.touches,n)||dB(e.changedTouches,n):e.touches[0]||e.changedTouches[0]:e,t?{x:t.clientX,y:t.clientY}:void 0}function dB(e,n){for(let t=0;t<e.length;t++)if(e[t].identifier===n)return e[t]}let mee=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[Rl,ri,ri]}),e})(),iu=(()=>{class e{constructor(t){this.cdr=t,this.min=1,this.max=100,this.step=1,this.value=15,this.title="",this.change=new En,this.input=new En,this.valueChange=new En}ngOnInit(){}ngAfterContentInit(){this.cdr.detectChanges()}ngAfterViewInit(){this.cdr.detectChanges()}onChange(t){null!=t.value&&this.valueChange.emit(t.value)}onInput(t){this.input.emit(t)}}return e.\u0275fac=function(t){return new(t||e)(qe(Pi))},e.\u0275cmp=qn({type:e,selectors:[["app-labelled-sliders"]],inputs:{min:"min",max:"max",step:"step",value:"value",title:"title"},outputs:{change:"change",input:"input",valueChange:"valueChange"},decls:7,vars:6,consts:[[1,"vertical-flex"],["appearance","fill"],["matInput","","type","text","readonly","true",3,"value"],["thumbLabel","","tickInterval","auto",3,"min","max","step","value","valueChange","change","input"],["slider",""]],template:function(t,r){if(1&t&&(je(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),Mt(3),Ke(),yn(4,"input",2),Ke(),je(5,"mat-slider",3,4),It("valueChange",function(o){return r.value=o})("change",function(o){return r.onChange(o)})("input",function(o){return r.onInput(o)}),Ke()()),2&t){const i=li(6);xt(3),Lo(r.title),xt(1),_t("value",i.value),xt(1),_t("min",r.min)("max",r.max)("step",r.step)("value",r.value)}},dependencies:[Qw,$g,eB,uB]}),e})();const n6=["*"],_ee=["content"];function yee(e,n){if(1&e){const t=Fi();je(0,"div",2),It("click",function(){return Ur(t),Gr(Wn()._onBackdropClicked())}),Ke()}2&e&&ii("mat-drawer-shown",Wn()._isShowingBackdrop())}function bee(e,n){1&e&&(je(0,"mat-drawer-content"),Yr(1,2),Ke())}const xee=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],wee=["mat-drawer","mat-drawer-content","*"],Cee={transformDrawer:Xd("transform",[dl("open, open-instant",va({transform:"none",visibility:"visible"})),dl("void",va({"box-shadow":"none",visibility:"hidden"})),hl("void => open-instant",kl("0ms")),hl("void <=> open, open-instant => void",kl("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},See=new dn("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function Dee(){return!1}}),r6=new dn("MAT_DRAWER_CONTAINER");let hB=(()=>{class e extends G3{constructor(t,r,i,o,d){super(i,o,d),this._changeDetectorRef=t,this._container=r}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return e.\u0275fac=function(t){return new(t||e)(qe(Pi),qe(kr(()=>pB)),qe(Or),qe(U3),qe(Cr))},e.\u0275cmp=qn({type:e,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,r){2&t&&fa("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px")},features:[Vr([{provide:G3,useExisting:e}]),Gn],ngContentSelectors:n6,decls:1,vars:0,template:function(t,r){1&t&&(La(),Yr(0))},encapsulation:2,changeDetection:0}),e})(),fB=(()=>{class e{constructor(t,r,i,o,d,f,g,_){this._elementRef=t,this._focusTrapFactory=r,this._focusMonitor=i,this._platform=o,this._ngZone=d,this._interactivityChecker=f,this._doc=g,this._container=_,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new se,this._animationEnd=new se,this._animationState="void",this.openedChange=new En(!0),this._openedStream=this.openedChange.pipe(Ki(w=>w),Ie(()=>{})),this.openedStart=this._animationStarted.pipe(Ki(w=>w.fromState!==w.toState&&0===w.toState.indexOf("open")),KF(void 0)),this._closedStream=this.openedChange.pipe(Ki(w=>!w),Ie(()=>{})),this.closedStart=this._animationStarted.pipe(Ki(w=>w.fromState!==w.toState&&"void"===w.toState),KF(void 0)),this._destroyed=new se,this.onPositionChanged=new En,this._modeChanged=new se,this.openedChange.subscribe(w=>{w?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{Ol(this._elementRef.nativeElement,"keydown").pipe(Ki(w=>27===w.keyCode&&!this.disableClose&&!bc(w)),Vi(this._destroyed)).subscribe(w=>this._ngZone.run(()=>{this.close(),w.stopPropagation(),w.preventDefault()}))}),this._animationEnd.pipe(Vw((w,S)=>w.fromState===S.fromState&&w.toState===S.toState)).subscribe(w=>{const{fromState:S,toState:k}=w;(0===k.indexOf("open")&&"void"===S||"void"===k&&0===S.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=yr(t)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(t){("true"===t||"false"===t||null==t)&&(t=yr(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle(yr(t))}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_takeFocus(){if(!this._focusTrap)return;const t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{!r&&"function"==typeof this._elementRef.nativeElement.focus&&t.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(t){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,r){t&&r&&(this._openedVia=r);const i=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),i}_setOpen(t,r,i){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",r&&this._restoreFocus(i)),this._updateFocusTrapState(),new Promise(o=>{this.openedChange.pipe(vo(1)).subscribe(d=>o(d?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(t){const r=this._elementRef.nativeElement,i=r.parentNode;"end"===t?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),i.insertBefore(this._anchor,r)),i.appendChild(r)):this._anchor&&this._anchor.parentNode.insertBefore(r,this._anchor)}}return e.\u0275fac=function(t){return new(t||e)(qe(Or),qe(HI),qe(wc),qe(cs),qe(Cr),qe(zw),qe(Rr,8),qe(r6,8))},e.\u0275cmp=qn({type:e,selectors:[["mat-drawer"]],viewQuery:function(t,r){if(1&t&&Qr(_ee,5),2&t){let i;Qn(i=$n())&&(r._content=i.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,r){1&t&&Km("@transform.start",function(o){return r._animationStarted.next(o)})("@transform.done",function(o){return r._animationEnd.next(o)}),2&t&&(Pr("align",null),ef("@transform",r._animationState),ii("mat-drawer-end","end"===r.position)("mat-drawer-over","over"===r.mode)("mat-drawer-push","push"===r.mode)("mat-drawer-side","side"===r.mode)("mat-drawer-opened",r.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:n6,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,r){1&t&&(La(),je(0,"div",0,1),Yr(2),Ke())},dependencies:[G3],encapsulation:2,data:{animation:[Cee.transformDrawer]},changeDetection:0}),e})(),pB=(()=>{class e{constructor(t,r,i,o,d,f=!1,g){this._dir=t,this._element=r,this._ngZone=i,this._changeDetectorRef=o,this._animationMode=g,this._drawers=new Pd,this.backdropClick=new En,this._destroyed=new se,this._doCheckSubject=new se,this._contentMargins={left:null,right:null},this._contentMarginChanges=new se,t&&t.change.pipe(Vi(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),d.change().pipe(Vi(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=f}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=yr(t)}get hasBackdrop(){return this._backdropOverride??(!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode)}set hasBackdrop(t){this._backdropOverride=null==t?null:yr(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(Hs(this._allDrawers),Vi(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(r=>!r._container||r._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Hs(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(_y(10),Vi(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,r=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const i=this._left._getWidth();t+=i,r-=i}if(this._right&&this._right.opened)if("side"==this._right.mode)r+=this._right._getWidth();else if("push"==this._right.mode){const i=this._right._getWidth();r+=i,t-=i}t=t||null,r=r||null,(t!==this._contentMargins.left||r!==this._contentMargins.right)&&(this._contentMargins={left:t,right:r},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(Ki(r=>r.fromState!==r.toState),Vi(this._drawers.changes)).subscribe(r=>{"open-instant"!==r.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(Vi(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){!t||t.onPositionChanged.pipe(Vi(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(vo(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(Vi(Vn(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const r=this._element.nativeElement.classList,i="mat-drawer-container-has-open";t?r.add(i):r.remove(i)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return e.\u0275fac=function(t){return new(t||e)(qe(Ru,8),qe(Or),qe(Cr),qe(Pi),qe(jw),qe(See),qe(Xo,8))},e.\u0275cmp=qn({type:e,selectors:[["mat-drawer-container"]],contentQueries:function(t,r,i){if(1&t&&(Bi(i,hB,5),Bi(i,fB,5)),2&t){let o;Qn(o=$n())&&(r._content=o.first),Qn(o=$n())&&(r._allDrawers=o)}},viewQuery:function(t,r){if(1&t&&Qr(hB,5),2&t){let i;Qn(i=$n())&&(r._userContent=i.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,r){2&t&&ii("mat-drawer-container-explicit-backdrop",r._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[Vr([{provide:r6,useExisting:e}])],ngContentSelectors:wee,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,r){1&t&&(La(xee),ir(0,yee,1,2,"div",0),Yr(1),Yr(2,1),ir(3,bee,2,0,"mat-drawer-content",1)),2&t&&(_t("ngIf",r.hasBackdrop),xt(3),_t("ngIf",!r._content))},dependencies:[xs,hB],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),e})(),Mee=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[Rl,ri,Zw,Zw,ri]}),e})();const Tee=["*",[["mat-toolbar-row"]]],Eee=["*","mat-toolbar-row"],Aee=jd(class{constructor(e){this._elementRef=e}});let gB=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Sn({type:e,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),e})(),vB=(()=>{class e extends Aee{constructor(t,r,i){super(t),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return e.\u0275fac=function(t){return new(t||e)(qe(Or),qe(cs),qe(Rr))},e.\u0275cmp=qn({type:e,selectors:[["mat-toolbar"]],contentQueries:function(t,r,i){if(1&t&&Bi(i,gB,5),2&t){let o;Qn(o=$n())&&(r._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&ii("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[Gn],ngContentSelectors:Eee,decls:2,vars:0,template:function(t,r){1&t&&(La(Tee),Yr(0),Yr(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),e})(),Iee=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[ri,ri]}),e})();function Pee(e,n){if(1&e){const t=Fi();je(0,"button",10),It("click",function(){return Ur(t),Wn(),Gr(li(12).toggle())}),je(1,"mat-icon"),Mt(2,"menu"),Ke()()}}function Ree(e,n){if(1&e){const t=Fi();je(0,"button",10),It("click",function(){return Ur(t),Wn(),Gr(li(16).toggle())}),je(1,"mat-icon"),Mt(2,"menu"),Ke()()}}const Lee=["*",[["","drawerLeft",""]],[["","drawerRight",""]],[["","centerContent",""]]],Oee=["*","[drawerLeft]","[drawerRight]","[centerContent]"];let eC=(()=>{class e{constructor(){this.leftDrawer=!0,this.rightDrawer=!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=qn({type:e,selectors:[["app-tutorial-template"]],inputs:{leftDrawer:"leftDrawer",rightDrawer:"rightDrawer"},ngContentSelectors:Oee,decls:21,vars:4,consts:[["color","primary"],["mat-icon-button","","class","example-icon",3,"click",4,"ngIf"],["routerLink","/home",1,"show-smallscreen"],["mat-icon-button","",1,"example-icon"],["mode","side",3,"opened"],["drawerLeft",""],[1,"vertical-flex","drawer"],["mode","side","position","end",3,"opened"],["drawerRight",""],[1,"horizontal-flex","drawer-container"],["mat-icon-button","",1,"example-icon",3,"click"]],template:function(t,r){1&t&&(La(Lee),je(0,"mat-toolbar",0)(1,"mat-toolbar-row"),ir(2,Pee,3,0,"button",1),je(3,"a",2)(4,"button",3)(5,"mat-icon"),Mt(6,"home"),Ke()()(),je(7,"span"),Yr(8),Ke(),ir(9,Ree,3,0,"button",1),Ke()(),je(10,"mat-drawer-container")(11,"mat-drawer",4,5)(13,"div",6),Yr(14,1),Ke()(),je(15,"mat-drawer",7,8),yn(17,"div",6),Yr(18,2),Ke(),je(19,"div",9),Yr(20,3),Ke()()),2&t&&(xt(2),_t("ngIf",r.leftDrawer),xt(7),_t("ngIf",r.rightDrawer),xt(2),_t("opened",r.leftDrawer),xt(4),_t("opened",r.rightDrawer))},dependencies:[xs,fB,pB,Cs,vB,gB,$d,Ug],styles:["mat-drawer[_ngcontent-%COMP%]{max-width:50vw}mat-toolbar-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100%;text-align:center}.loading[_ngcontent-%COMP%]{position:fixed;z-index:100;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#000c;width:100vw;height:100vh;justify-content:center;align-items:center;display:flex}.drawer[_ngcontent-%COMP%]{padding:1em .25em;align-items:center}.drawer-container[_ngcontent-%COMP%]{gap:1em;justify-content:center;align-items:center;margin-top:1em}[_nghost-%COMP%]     h2{text-align:center;margin:1ch}"]}),e})();function kee(e,n){if(1&e&&(xh(),yn(0,"circle",4)),2&e){const t=Wn(),r=li(1);fa("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(r)),Pr("r",t._getCircleRadius())}}function Nee(e,n){if(1&e&&(xh(),yn(0,"circle",4)),2&e){const t=Wn(),r=li(1);fa("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(r)),Pr("r",t._getCircleRadius())}}const Bee=jd(class{constructor(e){this._elementRef=e}},"primary"),Vee=new dn("mat-progress-spinner-default-options",{providedIn:"root",factory:function zee(){return{diameter:100}}});class Kd extends Bee{constructor(n,t,r,i,o,d,f,g){super(n),this._document=r,this._diameter=100,this._value=0,this._resizeSubscription=ye.EMPTY,this.mode="determinate";const _=Kd._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),_.has(r.head)||_.set(r.head,new Set([100])),this._noopAnimations="NoopAnimations"===i&&!!o&&!o._forceAnimations,"mat-spinner"===n.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),o&&(o.color&&(this.color=this.defaultColor=o.color),o.diameter&&(this.diameter=o.diameter),o.strokeWidth&&(this.strokeWidth=o.strokeWidth)),t.isBrowser&&t.SAFARI&&f&&d&&g&&(this._resizeSubscription=f.change(150).subscribe(()=>{"indeterminate"===this.mode&&g.run(()=>d.markForCheck())}))}get diameter(){return this._diameter}set diameter(n){this._diameter=xc(n),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(n){this._strokeWidth=xc(n)}get value(){return"determinate"===this.mode?this._value:0}set value(n){this._value=Math.max(0,Math.min(100,xc(n)))}ngOnInit(){const n=this._elementRef.nativeElement;this._styleRoot=nG(n)||this._document.head,this._attachStyleNode(),n.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const n=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${n} ${n}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(n){const t=50*(n.currentScale??1);return`${t}% ${t}%`}_attachStyleNode(){const n=this._styleRoot,t=this._diameter,r=Kd._diameters;let i=r.get(n);if(!i||!i.has(t)){const o=this._document.createElement("style");o.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),o.textContent=this._getAnimationText(),n.appendChild(o),i||(i=new Set,r.set(n,i)),i.add(t)}}_getAnimationText(){const n=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*n).replace(/END_VALUE/g,""+.2*n).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Kd._diameters=new WeakMap,Kd.\u0275fac=function(n){return new(n||Kd)(qe(Or),qe(cs),qe(Rr,8),qe(Xo,8),qe(Vee),qe(Pi),qe(jw),qe(Cr))},Kd.\u0275cmp=qn({type:Kd,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(n,t){2&n&&(Pr("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),fa("width",t.diameter,"px")("height",t.diameter,"px"),ii("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[Gn],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(n,t){1&n&&(xh(),je(0,"svg",0,1),ir(2,kee,1,11,"circle",2),ir(3,Nee,1,9,"circle",3),Ke()),2&n&&(fa("width",t.diameter,"px")("height",t.diameter,"px"),_t("ngSwitch","indeterminate"===t.mode),Pr("viewBox",t._getViewBox()),xt(2),_t("ngSwitchCase",!0),xt(1),_t("ngSwitchCase",!1))},dependencies:[vf,ey],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let Uee=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[ri,Rl,ri]}),e})(),Gee=(()=>{class e{constructor(t){this.uiservice=t,this.loadingEvent=new En,this.showPresetEvent=new En}ngOnInit(){}loading(t){t.target.files&&t.target.files[0]&&this.loadingEvent.emit(t.target.files[0])}toggleShowImagePreset(){this.uiservice.toggleImagePreset()}}return e.\u0275fac=function(t){return new(t||e)(qe(c2))},e.\u0275cmp=qn({type:e,selectors:[["app-loading-buttons"]],outputs:{loadingEvent:"loadingEvent",showPresetEvent:"showPresetEvent"},decls:6,vars:0,consts:[["type","button","mat-raised-button","","color","primary",3,"click"],["hidden","","type","file","accept","images/*",3,"change"],["fileInput",""]],template:function(t,r){if(1&t){const i=Fi();je(0,"button",0),It("click",function(){return r.toggleShowImagePreset()}),Mt(1,"Show preset"),Ke(),je(2,"button",0),It("click",function(){return Ur(i),Gr(li(5).click())}),Mt(3," Load image\n"),Ke(),je(4,"input",1,2),It("change",function(d){return r.loading(d)}),Ke()}},dependencies:[Cs]}),e})();const Wee=JSON.parse('[{"name":"Fourier Transform","content":[{"name":"House","url":"assets/image_presets/House.jpeg"},{"name":"Moon","url":"assets/image_presets/Moon.jpeg"},{"name":"CT Scan","url":"assets/image_presets/CTandstripes.jpeg"},{"name":"X Ray","url":"assets/image_presets/XrayBar.jpeg"}]},{"name":"Morphological Operations","content":[{"name":"Hello","url":"assets/image_presets/Hello.jpeg"},{"name":"Tree","url":"assets/image_presets/arbre_binaire.jpeg"},{"name":"Little Guy","url":"assets/image_presets/bonhomme_morpho.jpeg"}]},{"name":"Miscellaneous","content":[{"name":"Phantom","url":"assets/image_presets/phantom.png"}]},{"name":"Color images","content":[{"name":"Peppers","url":"assets/image_presets/poivron.jpeg"},{"name":"Butterfly","url":"assets/image_presets/papillon.jpg"},{"name":"Homomorphic Flower","url":"assets/image_presets/hibiscus_homomorphic.jpg"}]}]');function jee(e,n){if(1&e){const t=Fi();je(0,"div",3)(1,"button",4),It("click",function(){const o=Ur(t).$implicit;return Gr(Wn(2).loadSelectedImage(o.url))}),Mt(2),Ke(),yn(3,"div",5)(4,"img",6),Ke()}if(2&e){const t=n.$implicit;xt(2),ro(" ",t.name," "),xt(2),_t("src",t.url,Ep)}}function Zee(e,n){if(1&e&&(je(0,"div")(1,"p"),Mt(2),Ke(),ir(3,jee,5,2,"div",2),Ke()),2&e){const t=n.$implicit;xt(2),Lo(t.name),xt(1),_t("ngForOf",t.content)}}let Yee=(()=>{class e{constructor(t){this.uiservice=t,this.presetEvent=new En,this.images_presets=Wee}ngOnInit(){}loadSelectedImage(t){this.uiservice.toggleImagePreset(),this.presetEvent.emit(t)}}return e.\u0275fac=function(t){return new(t||e)(qe(c2))},e.\u0275cmp=qn({type:e,selectors:[["app-image-presets"]],outputs:{presetEvent:"presetEvent"},decls:5,vars:1,consts:[["mat-button","","color","primary",3,"click"],[4,"ngFor","ngForOf"],["class","horizontal-align",4,"ngFor","ngForOf"],[1,"horizontal-align"],["mat-button","",3,"click"],[1,"filler"],["alt","image.name","width","32px","height","32px",1,"rounded",3,"src"]],template:function(t,r){1&t&&(je(0,"button",0),It("click",function(){return r.uiservice.toggleImagePreset()}),Mt(1,"\nClose "),je(2,"mat-icon"),Mt(3,"close"),Ke()(),ir(4,Zee,4,2,"div",1)),2&t&&(xt(4),_t("ngForOf",r.images_presets))},dependencies:[mc,Cs,$d],styles:[".horizontal-align[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:row}.horizontal-align[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:first-child{align-self:flex-start}.filler[_ngcontent-%COMP%]{flex-grow:1}.horizontal-align[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:last-child{align-self:flex-end}.rounded[_ngcontent-%COMP%]{border-radius:50%}"]}),e})();const Xee=["inputCanvas"];function $ee(e,n){1&e&&(je(0,"div",12),yn(1,"mat-spinner",13),Ke()),2&e&&(xt(1),_t("diameter",300))}function Kee(e,n){if(1&e){const t=Fi();je(0,"button",14),It("click",function(){return Ur(t),Wn(),Gr(li(13).toggle())}),je(1,"mat-icon"),Mt(2,"menu"),Ke()()}}function Qee(e,n){if(1&e){const t=Fi();je(0,"button",14),It("click",function(){return Ur(t),Wn(),Gr(li(18).toggle())}),je(1,"mat-icon"),Mt(2,"menu"),Ke()()}}function qee(e,n){if(1&e){const t=Fi();ci(0),je(1,"app-loading-buttons",15),It("loadingEvent",function(i){return Ur(t),Gr(Wn().loadSelectedFile(i))}),Ke(),yn(2,"hr"),je(3,"button",16),It("click",function(){return Ur(t),Gr(Wn().drawCanvasContained.clearCanvas())}),Mt(4," Clear "),Ke(),yn(5,"hr"),Yr(6,3),ui()}}function Jee(e,n){if(1&e){const t=Fi();ci(0),je(1,"app-image-presets",17),It("presetEvent",function(i){return Ur(t),Gr(Wn().loadSelectedFileFromPath(i))}),Ke(),ui()}}const ete=["*",[["","drawerRight",""]],[["","centerContent",""]],[["","drawerLeft",""]]],tte=["*","[drawerRight]","[centerContent]","[drawerLeft]"];let tv=(()=>{class e extends eC{constructor(t,r,i){super(),this.ngxOpenCv=t,this.uiservice=r,this.cdr=i,this.sideMenuContext=!0}ngAfterViewInit(){this.ngxOpenCv.isReady$.subscribe(t=>{console.log("OpenCV.js is ready",t),this.cvState=t.toString()}),this.cdr.detectChanges()}loadSelectedFileFromPath(t){const r=new Image;r.onerror=i=>{console.log("Loading failed")},r.src=t,r.onload=()=>{this.drawCanvasContained&&this.drawCanvasContained.drawImage(r)}}loadSelectedFile(t){var r=new FileReader;r.onload=i=>{const o=new Image;o.onerror=d=>{console.log("Loading failed")},o.src=i.target.result,o.onload=()=>{this.drawCanvasContained.drawImage(o)}},r.readAsDataURL(t)}toggleImagePresets(){this.sideMenuContext=!this.sideMenuContext}}return e.\u0275fac=function(t){return new(t||e)(qe(ru),qe(c2),qe(Pi))},e.\u0275cmp=qn({type:e,selectors:[["app-tutorial-template-images"]],contentQueries:function(t,r,i){if(1&t&&Bi(i,Xee,5),2&t){let o;Qn(o=$n())&&(r.drawCanvasContained=o.first)}},features:[Gn],ngContentSelectors:tte,decls:23,vars:7,consts:[["class","loading",4,"ngIf"],["color","primary"],["mat-icon-button","","class","example-icon",3,"click",4,"ngIf"],["routerLink","/home",1,"show-smallscreen"],["mat-icon-button","",1,"example-icon"],["mode","side",3,"opened"],["drawerLeft",""],[1,"vertical-flex","drawer"],[4,"ngIf"],["mode","side","position","end",3,"opened"],["drawerRight",""],[1,"horizontal-flex","drawer-container"],[1,"loading"],["color","primary",3,"diameter"],["mat-icon-button","",1,"example-icon",3,"click"],[3,"loadingEvent"],["mat-raised-button","","color","warn",1,"fillWidth",3,"click"],[3,"presetEvent"]],template:function(t,r){1&t&&(La(ete),ir(0,$ee,2,1,"div",0),je(1,"mat-toolbar",1)(2,"mat-toolbar-row"),ir(3,Kee,3,0,"button",2),je(4,"a",3)(5,"button",4)(6,"mat-icon"),Mt(7,"home"),Ke()()(),je(8,"span"),Yr(9),Ke(),ir(10,Qee,3,0,"button",2),Ke()(),je(11,"mat-drawer-container")(12,"mat-drawer",5,6)(14,"div",7),ir(15,qee,7,0,"ng-container",8),ir(16,Jee,2,0,"ng-container",8),Ke()(),je(17,"mat-drawer",9,10),yn(19,"div",7),Yr(20,1),Ke(),je(21,"div",11),Yr(22,2),Ke()()),2&t&&(_t("ngIf","loading"==r.cvState),xt(3),_t("ngIf",r.leftDrawer),xt(7),_t("ngIf",r.rightDrawer),xt(2),_t("opened",r.leftDrawer),xt(3),_t("ngIf",!r.uiservice.showImagePreset),xt(1),_t("ngIf",r.uiservice.showImagePreset),xt(1),_t("opened",r.rightDrawer))},dependencies:[Kd,xs,fB,pB,Cs,vB,gB,$d,Ug,Gee,Yee],styles:["mat-drawer[_ngcontent-%COMP%]{max-width:50vw}mat-toolbar-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100%;text-align:center}.loading[_ngcontent-%COMP%]{position:fixed;z-index:100;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#000c;width:100vw;height:100vh;justify-content:center;align-items:center;display:flex}.drawer[_ngcontent-%COMP%]{padding:1em .25em;align-items:center}.drawer-container[_ngcontent-%COMP%]{gap:1em;justify-content:center;align-items:center;margin-top:1em}[_nghost-%COMP%]     h2{text-align:center;margin:1ch}"]}),e})();const nte=["canvas1"],rte=["canvas2"],ite=["canvas3"],ate=["picker"];let ote=(()=>{class e extends Jg{constructor(){super(...arguments),this.color="warn",this.colorCtr=new tu(null),this.colorspace="RGB"}ngAfterViewInit(){this.pickerInput.select(new qg(255,255,255)),this.updateColorSpace()}updateInput(){let t=cv.imread(this.canvas1.getCanvas(),cv.IMREAD_GRAYSCALE),r=cv.imread(this.canvas2.getCanvas(),cv.IMREAD_GRAYSCALE),i=cv.imread(this.canvas3.getCanvas(),cv.IMREAD_GRAYSCALE);cv.cvtColor(t,t,cv.COLOR_RGB2GRAY),cv.cvtColor(r,r,cv.COLOR_RGB2GRAY),cv.cvtColor(i,i,cv.COLOR_RGB2GRAY);let o=new cv.MatVector,d=new cv.Mat;switch(this.colorspace){case"RGB":o.push_back(t),o.push_back(r),o.push_back(i),cv.merge(o,d);break;case"YCrCb":o.push_back(t),o.push_back(r),o.push_back(i),cv.merge(o,d),cv.cvtColor(d,d,cv.COLOR_YCrCb2RGB);break;case"LAB":o.push_back(t),o.push_back(r),o.push_back(i),cv.merge(o,d),cv.cvtColor(d,d,cv.COLOR_Lab2RGB);break;case"HSV":t.convertTo(t,cv.CV_32FC1),cv.convertScaleAbs(t,t,179/255,0),o.push_back(t),o.push_back(r),o.push_back(i),cv.merge(o,d),cv.cvtColor(d,d,cv.COLOR_HSV2RGB)}cv.imshow(this.drawCanvas.getCanvas(),d),t.delete(),r.delete(),i.delete(),d.delete(),o.delete(),this.updateColorSpace()}updateColorSpace(){let t=cv.imread(this.drawCanvas.getCanvas()),r=new cv.MatVector;switch(this.colorspace){case"RGB":this.canvas1.title="R",this.canvas2.title="G",this.canvas3.title="B";break;case"LAB":this.canvas1.title="L",this.canvas2.title="A",this.canvas3.title="B",cv.cvtColor(t,t,cv.COLOR_RGB2Lab);break;case"HSV":this.canvas1.title="H",this.canvas2.title="S",this.canvas3.title="V",cv.cvtColor(t,t,cv.COLOR_RGB2HSV);break;case"YCrCb":this.canvas1.title="Y",this.canvas2.title="Cr",this.canvas3.title="Cb",cv.cvtColor(t,t,cv.COLOR_RGB2YCrCb)}cv.split(t,r),"HSV"==this.colorspace&&cv.convertScaleAbs(r.get(0),r.get(0),1.42),cv.imshow(this.canvas1.getCanvas(),r.get(0)),cv.imshow(this.canvas2.getCanvas(),r.get(1)),cv.imshow(this.canvas3.getCanvas(),r.get(2)),t.delete(),r.delete()}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Ni(e)))(r||e)}}(),e.\u0275cmp=qn({type:e,selectors:[["app-color-spaces"]],viewQuery:function(t,r){if(1&t&&(Qr(nte,5),Qr(rte,5),Qr(ite,5),Qr(ate,5)),2&t){let i;Qn(i=$n())&&(r.canvas1=i.first),Qn(i=$n())&&(r.canvas2=i.first),Qn(i=$n())&&(r.canvas3=i.first),Qn(i=$n())&&(r.pickerInput=i.first)}},features:[Gn],decls:38,vars:23,consts:[[3,"rightDrawer"],["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],["title","Brush Size"],["brushSizeSlider",""],[1,"fillWidth"],["matInput","",3,"ngxMatColorPicker","formControl"],["matSuffix","",3,"for"],[3,"color"],["picker",""],["appearance","standard",1,"fillWidth"],[3,"ngModel","ngModelChange","selectionChange"],["value","RGB"],["value","HSV"],["value","LAB"],["value","YCrCb"],["ngProjectAs","[centerContent]",5,["","centerContent",""]],["title","Canvas",1,"main-canvas",3,"width","drawColor","drawable","brushRadius","BWOption","drawingEnded"],["inputCanvas",""],[1,"horizontal-flex","canvas-grid"],["title","Red",1,"grid-item",3,"width","drawColor","drawable","brushRadius","drawingEnded"],["canvas1",""],["title","Green",1,"grid-item",3,"width","drawColor","drawable","brushRadius","drawingEnded"],["canvas2",""],["title","Blue",1,"grid-item",3,"width","drawColor","drawable","brushRadius","drawingEnded"],["canvas3",""]],template:function(t,r){if(1&t&&(je(0,"app-tutorial-template-images",0),Mt(1," Colorspaces "),ci(2,1),yn(3,"app-labelled-sliders",2,3)(5,"hr"),je(6,"h2"),Mt(7,"Brush color"),Ke(),je(8,"mat-form-field",4),yn(9,"input",5)(10,"ngx-mat-color-toggle",6)(11,"ngx-mat-color-picker",7,8),Ke(),yn(13,"hr"),je(14,"h2"),Mt(15,"Colorspace"),Ke(),je(16,"mat-form-field",9)(17,"mat-label"),Mt(18,"Choose a colorspace"),Ke(),je(19,"mat-select",10),It("ngModelChange",function(o){return r.colorspace=o})("selectionChange",function(){return r.updateColorSpace()}),je(20,"mat-option",11),Mt(21,"RGB"),Ke(),je(22,"mat-option",12),Mt(23,"HSV"),Ke(),je(24,"mat-option",13),Mt(25,"LAB"),Ke(),je(26,"mat-option",14),Mt(27,"YCrCb"),Ke()()(),ui(),ci(28,15),je(29,"app-draw-canvas",16,17),It("drawingEnded",function(){return r.updateColorSpace()}),Ke(),je(31,"div",18)(32,"app-draw-canvas",19,20),It("drawingEnded",function(){return r.updateInput()}),Ke(),je(34,"app-draw-canvas",21,22),It("drawingEnded",function(){return r.updateInput()}),Ke(),je(36,"app-draw-canvas",23,24),It("drawingEnded",function(){return r.updateInput()}),Ke()(),ui(),Ke()),2&t){const i=li(4),o=li(12);_t("rightDrawer",!1),xt(9),_t("ngxMatColorPicker",o)("formControl",r.colorCtr),xt(1),_t("for",o),xt(1),_t("color",r.color),xt(8),_t("ngModel",r.colorspace),xt(10),_t("width",256)("drawColor",null==r.colorCtr.value?null:r.colorCtr.value.rgba)("drawable",!0)("brushRadius",i.value)("BWOption",!0),xt(3),_t("width",256)("drawColor",null==r.colorCtr.value?null:r.colorCtr.value.rgba)("drawable",!0)("brushRadius",i.value),xt(2),_t("width",256)("drawColor",null==r.colorCtr.value?null:r.colorCtr.value.rgba)("drawable",!0)("brushRadius",i.value),xt(2),_t("width",256)("drawColor",null==r.colorCtr.value?null:r.colorCtr.value.rgba)("drawable",!0)("brushRadius",i.value)}},dependencies:[Qw,$g,iq,$8,z3,fw,Au,FF,Iu,sJ,oB,iJ,eB,ev,iu,tv],styles:[".options-bar[_ngcontent-%COMP%]{gap:2em;align-items:center;padding:0 2em}.options-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:80%}.brush-slider[_ngcontent-%COMP%]{font-size:small}.main-canvas[_ngcontent-%COMP%]{border:solid 1px white;margin:1em;border-radius:.25em;overflow:hidden;aspect-ratio:1;min-width:256px;width:33%;box-shadow:#00000040 0 54px 55px,#0000001f 0 -12px 30px,#0000001f 0 4px 6px,#0000002b 0 12px 13px,#00000017 0 -3px 5px}.grid-item[_ngcontent-%COMP%]{margin:auto;min-width:256px;box-shadow:#26394d 0 20px 30px -10px}.canvas-grid[_ngcontent-%COMP%]{gap:.5em;flex-direction:row;flex-wrap:wrap}"]}),e})();const ste=["button"],lte=["*"],a6=new dn("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),o6=new dn("MatButtonToggleGroup"),cte={provide:Qo,useExisting:kr(()=>nv),multi:!0};let s6=0;class l6{constructor(n,t){this.source=n,this.value=t}}let nv=(()=>{class e{constructor(t,r){this._changeDetector=t,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+s6++,this.valueChange=new En,this.change=new En,this.appearance=r&&r.appearance?r.appearance:"standard"}get name(){return this._name}set name(t){this._name=t,this._markButtonsForCheck()}get vertical(){return this._vertical}set vertical(t){this._vertical=yr(t)}get value(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t.map(r=>r.value):t[0]?t[0].value:void 0}set value(t){this._setSelectionByValue(t),this.valueChange.emit(this.value)}get selected(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t:t[0]||null}get multiple(){return this._multiple}set multiple(t){this._multiple=yr(t),this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(t){this._disabled=yr(t),this._markButtonsForCheck()}ngOnInit(){this._selectionModel=new r2(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(t=>t.checked))}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_emitChangeEvent(t){const r=new l6(t,this.value);this._controlValueAccessorChangeFn(r.value),this.change.emit(r)}_syncButtonToggle(t,r,i=!1,o=!1){!this.multiple&&this.selected&&!t.checked&&(this.selected.checked=!1),this._selectionModel?r?this._selectionModel.select(t):this._selectionModel.deselect(t):o=!0,o?Promise.resolve().then(()=>this._updateModelValue(t,i)):this._updateModelValue(t,i)}_isSelected(t){return this._selectionModel&&this._selectionModel.isSelected(t)}_isPrechecked(t){return!(typeof this._rawValue>"u")&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(r=>null!=t.value&&r===t.value):t.value===this._rawValue)}_setSelectionByValue(t){this._rawValue=t,this._buttonToggles&&(this.multiple&&t?(Array.isArray(t),this._clearSelection(),t.forEach(r=>this._selectValue(r))):(this._clearSelection(),this._selectValue(t)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(t=>t.checked=!1)}_selectValue(t){const r=this._buttonToggles.find(i=>null!=i.value&&i.value===t);r&&(r.checked=!0,this._selectionModel.select(r))}_updateModelValue(t,r){r&&this._emitChangeEvent(t),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(t=>t._markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(qe(Pi),qe(a6,8))},e.\u0275dir=Sn({type:e,selectors:[["mat-button-toggle-group"]],contentQueries:function(t,r,i){if(1&t&&Bi(i,rv,5),2&t){let o;Qn(o=$n())&&(r._buttonToggles=o)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(t,r){2&t&&(Pr("aria-disabled",r.disabled),ii("mat-button-toggle-vertical",r.vertical)("mat-button-toggle-group-appearance-standard","standard"===r.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[Vr([cte,{provide:o6,useExisting:e}])]}),e})();const ute=If(class{});let rv=(()=>{class e extends ute{constructor(t,r,i,o,d,f){super(),this._changeDetectorRef=r,this._elementRef=i,this._focusMonitor=o,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new En;const g=Number(d);this.tabIndex=g||0===g?g:null,this.buttonToggleGroup=t,this.appearance=f&&f.appearance?f.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(t){this._appearance=t}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(t){const r=yr(t);r!==this._checked&&(this._checked=r,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(t){this._disabled=yr(t)}ngOnInit(){const t=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+s6++,t&&(t._isPrechecked(this)?this.checked=!0:t._isSelected(this)!==this._checked&&t._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const t=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),t&&t._isSelected(this)&&t._syncButtonToggle(this,!1,!1,!0)}focus(t){this._buttonElement.nativeElement.focus(t)}_onButtonClick(){const t=!!this._isSingleSelector()||!this._checked;t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new l6(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}}return e.\u0275fac=function(t){return new(t||e)(qe(o6,8),qe(Pi),qe(Or),qe(wc),ms("tabindex"),qe(a6,8))},e.\u0275cmp=qn({type:e,selectors:[["mat-button-toggle"]],viewQuery:function(t,r){if(1&t&&Qr(ste,5),2&t){let i;Qn(i=$n())&&(r._buttonElement=i.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(t,r){1&t&&It("focus",function(){return r.focus()}),2&t&&(Pr("aria-label",null)("aria-labelledby",null)("id",r.id)("name",null),ii("mat-button-toggle-standalone",!r.buttonToggleGroup)("mat-button-toggle-checked",r.checked)("mat-button-toggle-disabled",r.disabled)("mat-button-toggle-appearance-standard","standard"===r.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[Gn],ngContentSelectors:lte,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(t,r){if(1&t&&(La(),je(0,"button",0,1),It("click",function(){return r._onButtonClick()}),je(2,"span",2),Yr(3),Ke()(),yn(4,"span",3)(5,"span",4)),2&t){const i=li(1);_t("id",r.buttonId)("disabled",r.disabled||null),Pr("tabindex",r.disabled?-1:r.tabIndex)("aria-pressed",r.checked)("name",r._getButtonName())("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby),xt(5),_t("matRippleTrigger",i)("matRippleDisabled",r.disableRipple||r.disabled)}},dependencies:[Zd],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),e})(),dte=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[ri,Zg,ri]}),e})();function hte(e,n){if(1&e){const t=Fi();ci(0),je(1,"app-labelled-sliders",21),It("valueChange",function(i){return Ur(t),Gr(Wn().gaussStdX=i)})("valueChange",function(){return Ur(t),Gr(Wn().drawGaussian())}),Ke(),je(2,"app-labelled-sliders",22),It("valueChange",function(i){return Ur(t),Gr(Wn().gaussStdY=i)})("valueChange",function(){return Ur(t),Gr(Wn().drawGaussian())}),Ke(),ui()}if(2&e){const t=Wn();xt(1),_t("min",.5)("max",128)("step",.5)("value",t.gaussStdX),xt(1),_t("min",.5)("max",128)("step",.5)("value",t.gaussStdY)}}function fte(e,n){if(1&e){const t=Fi();je(0,"app-labelled-sliders",23),It("valueChange",function(i){return Ur(t),Gr(Wn().gaussStdY=i)})("valueChange",function(i){return Ur(t),Gr(Wn().gaussStdX=i)})("valueChange",function(){return Ur(t),Gr(Wn().drawGaussian())}),Ke()}if(2&e){const t=Wn();_t("min",.5)("max",128)("step",.5)("value",t.gaussStdY)("value",t.gaussStdX)}}let pte=(()=>{class e extends Jg{constructor(){super(...arguments),this.angle=0,this.frequency=25,this.magLog=!0,this.brushSize=10,this.gaussStdX=10,this.gaussStdY=10,this.repsentationNorm="logAmplitudeOne"}drawGaussian(){var t=this.drawCanvas.width,r=this.drawCanvas.height,i=new Uint8ClampedArray(t*r*4);for(let o=0;o<r;o++)for(let d=0;d<t;d++){const f=4*(o*t+d);let g=255*Math.exp(-Math.pow((d-r/2)/(Math.sqrt(2)*this.gaussStdY),2)-Math.pow((o-t/2)/(Math.sqrt(2)*this.gaussStdX),2));i[f]=g,i[f+1]=g,i[f+2]=g,i[f+3]=255}this.drawCanvas.drawArray(i)}drawSin(){var t=this.drawCanvas.width,r=this.drawCanvas.height,i=new Uint8ClampedArray(t*r*4);for(let o=0;o<r;o++)for(let d=0;d<t;d++){const f=4*(o*t+d),g=Math.PI*this.angle/180,_=o*Math.cos(g)*this.frequency/r+d*Math.sin(g)*this.frequency/t,w=Math.round(127*(1+Math.sin(2*Math.PI*_)));i[f]=w,i[f+1]=w,i[f+2]=w,i[f+3]=255}this.drawCanvas.drawArray(i)}updateFFT(){let t=cv.imread(this.drawCanvas.getCanvas());cv.cvtColor(t,t,cv.COLOR_RGBA2GRAY,0);let r=cv.getOptimalDFTSize(t.rows),i=cv.getOptimalDFTSize(t.cols),o=cv.Scalar.all(0),d=new cv.Mat;cv.copyMakeBorder(t,d,0,r-t.rows,0,i-t.cols,cv.BORDER_CONSTANT,o);let f=new cv.Mat;d.convertTo(f,cv.CV_32F);let g=new cv.MatVector,_=new cv.Mat,w=new cv.Mat.zeros(d.rows,d.cols,cv.CV_32F);g.push_back(f),g.push_back(w),cv.merge(g,_),cv.dft(_,_,cv.DFT_SCALE),cv.split(_,g),cv.magnitude(g.get(0),g.get(1),g.get(0));let S=g.get(0),k=new cv.Mat.ones(S.rows,S.cols,S.type());switch(this.repsentationNorm){case"logAmplitudeOne":cv.add(S,k,S),cv.log(S,S);break;case"logAmplitude":cv.log(S,S)}let V=new cv.Rect(0,0,-2&S.cols,-2&S.rows);S=S.roi(V);let ne=S.cols/2,pe=S.rows/2,De=new cv.Mat,Re=new cv.Rect(0,0,ne,pe),Fe=new cv.Rect(ne,0,ne,pe),ke=new cv.Rect(0,pe,ne,pe),Be=new cv.Rect(ne,pe,ne,pe),at=S.roi(Re),ot=S.roi(Fe),St=S.roi(ke),yt=S.roi(Be);at.copyTo(De),yt.copyTo(at),De.copyTo(yt),ot.copyTo(De),St.copyTo(ot),De.copyTo(St),cv.normalize(S,S,0,1,cv.NORM_MINMAX),this.outputCanvas.drawMat(S),t.delete(),d.delete(),g.delete(),_.delete(),k.delete(),De.delete()}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Ni(e)))(r||e)}}(),e.\u0275cmp=qn({type:e,selectors:[["app-fast-fourier-transform"]],features:[Gn],decls:36,vars:18,consts:[["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],["name","representationNorm",3,"ngModel","ngModelChange","change"],["value","amplitude"],["value","logAmplitude"],["value","logAmplitudeOne"],["title","Brush Size"],["brushSizeSlider",""],["mat-raised-button","","color","primary",1,"fillWidth",3,"click"],["color","primary","labelPosition","before",1,"example-margin"],["toggleAxis",""],[4,"ngIf","ngIfElse"],["singleGaussAxis",""],["title","Angle","thumbLabel","","tickInterval","auto",3,"min","max","step","value","valueChange"],["title","Frequency","thumbLabel","","tickInterval","auto",3,"min","max","step","value","valueChange"],["ngProjectAs","[drawerRight]",5,["","drawerRight",""]],["echarts","",1,"profile-graph",3,"options"],["ngProjectAs","[centerContent]",5,["","centerContent",""]],["title","Canvas",1,"canvas",3,"width","drawable","OnlyBW","brushRadius","drawingEnded"],["inputCanvas",""],["title","Fourier Transform",1,"canvas",3,"drawable","profileOption","profileChanged"],["outputCanvas",""],["title","Gaussian STD X","thumbLabel","","tickInterval","auto",3,"min","max","step","value","valueChange"],["title","Gaussian STD Y","thumbLabel","","tickInterval","auto",3,"min","max","step","value","valueChange"],["title","Gaussian STD","thumbLabel","","tickInterval","auto",3,"min","max","step","value","valueChange"]],template:function(t,r){if(1&t&&(je(0,"app-tutorial-template-images"),Mt(1," Fourier Transform "),ci(2,0),je(3,"mat-button-toggle-group",1),It("ngModelChange",function(o){return r.repsentationNorm=o})("change",function(){return r.updateFFT()}),je(4,"mat-button-toggle",2),Mt(5,"A"),Ke(),je(6,"mat-button-toggle",3),Mt(7,"log(A)"),Ke(),je(8,"mat-button-toggle",4),Mt(9,"log(1+A)"),Ke()(),yn(10,"hr")(11,"app-labelled-sliders",5,6)(13,"hr"),je(14,"button",7),It("click",function(){return r.drawGaussian()}),Mt(15," Draw Gaussian "),Ke(),je(16,"mat-slide-toggle",8,9),Mt(18," Independant axis "),Ke(),ir(19,hte,3,8,"ng-container",10),ir(20,fte,1,5,"ng-template",null,11,yE),yn(22,"hr"),je(23,"button",7),It("click",function(){return r.drawSin()}),Mt(24," Draw sin(x) "),Ke(),je(25,"app-labelled-sliders",12),It("valueChange",function(o){return r.angle=o})("valueChange",function(){return r.drawSin()}),Ke(),je(26,"app-labelled-sliders",13),It("valueChange",function(o){return r.frequency=o})("valueChange",function(){return r.drawSin()}),Ke(),ui(),ci(27,14),je(28,"h2"),Mt(29,"Profile"),Ke(),yn(30,"div",15),ui(),ci(31,16),je(32,"app-draw-canvas",17,18),It("drawingEnded",function(){return r.updateFFT()}),Ke(),je(34,"app-draw-canvas",19,20),It("profileChanged",function(){return r.updateProfile()}),Ke(),ui(),Ke()),2&t){const i=li(12),o=li(17),d=li(21);xt(3),_t("ngModel",r.repsentationNorm),xt(16),_t("ngIf",o.checked)("ngIfElse",d),xt(6),_t("min",0)("max",180)("step",2.5)("value",r.angle),xt(1),_t("min",0)("max",256)("step",1)("value",r.frequency),xt(4),_t("options",r.profileOptions),xt(2),_t("width",256)("drawable",!0)("OnlyBW",!0)("brushRadius",i.value),xt(2),_t("drawable",!1)("profileOption",!0)}},dependencies:[Og,nv,rv,xs,Au,Iu,cB,Cs,ev,iu,tv],styles:[".drawer-content[_ngcontent-%COMP%]{margin:1em auto;gap:1em}.canvas[_ngcontent-%COMP%]{width:45%;min-width:256px}.profile-graph[_ngcontent-%COMP%]{width:256px}"]}),e})();var d2=z(2834);let gte=(()=>{class e extends Jg{constructor(){super(...arguments),this.tileGridSize=8,this.clipLimit=20,this.colorspace="LAB"}updateHistogram(){let t=cv.imread(this.drawCanvas.getCanvas());if(this.outputCanvas.isBWChecked=this.drawCanvas.isBW(),this.drawCanvas.isBW()){cv.cvtColor(t,t,cv.COLOR_RGBA2GRAY);var r=this.getHistogramFromGrayMat(t)}else r=this.getHistogramFromColorMat(t);this.inputHistoOptions=this.updateHistoChart(r),t.delete();let i=cv.imread(this.outputCanvas.getCanvas());this.outputCanvas.isBW()?(cv.cvtColor(i,i,cv.COLOR_RGBA2GRAY),r=this.getHistogramFromGrayMat(i)):r=this.getHistogramFromColorMat(i),this.outputHistoOptions=this.updateHistoChart(r),i.delete()}updateHistoChart(t){let r={legend:{data:["Histogram"],align:"left",textStyle:{color:"white"}},tooltip:{},xAxis:{data:Array.from(Array(t[0].length).keys()),silent:!1,splitLine:{show:!1}},yAxis:{},animationEasing:"exponentialIn",animationDuration:500};return 1==t.length?r.series=[{name:"Histogram",type:"line",symbol:"none",areaStyle:{color:new d2.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(220, 220, 220)"},{offset:1,color:"rgb(150, 150, 150)"}])},data:t[0],dimensions:["R"],itemStyle:{color:"rgb(220, 220, 220)"}}]:(r.legend={data:["R","G","B"],align:"left",textStyle:{color:"white"}},r.series=[{name:"R",type:"line",symbol:"none",itemStyle:{color:"rgb(220, 100, 100)"},areaStyle:{color:new d2.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(255, 68, 100)"},{offset:1,color:"rgb(180, 68, 100)"}])},data:t[0]},{name:"G",type:"line",symbol:"none",itemStyle:{color:"rgb(100, 220, 100)"},areaStyle:{color:new d2.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(68, 255, 100)"},{offset:1,color:"rgb(68, 180, 100)"}])},data:t[1]},{name:"B",type:"line",symbol:"none",itemStyle:{color:"rgb(100, 100, 220)"},areaStyle:{color:new d2.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(68, 100, 255)"},{offset:1,color:"rgb(68, 100, 180)"}])},data:t[2]}]),r}getHistogramFromColorMat(t){let r=new Array,i=new cv.MatVector;cv.split(t,i);let o=new cv.Mat,d=new cv.Mat,f=new cv.Mat,g=[256],_=[0,255],w=new cv.Mat;cv.calcHist(i,[0],w,o,g,_,!1),cv.calcHist(i,[1],w,d,g,_,!1),cv.calcHist(i,[2],w,f,g,_,!1),r.push(o.data32F),r.push(d.data32F),r.push(f.data32F);for(let S=0;S<3;S++)for(let k=0;k<256;k++){let V=r[S];V[k]/=t.rows*t.cols,r[S]=Array.from(V)}return w.delete(),i.delete(),o.delete(),d.delete(),f.delete(),r}getHistogramFromGrayMat(t){let r=new Array,i=new cv.MatVector;i.push_back(t);let o=new cv.Mat,g=new cv.Mat;cv.calcHist(i,[0],g,o,[256],[0,255],!1),r.push(o.data32F);for(let _=0;_<256;_++){let w=r[0];w[_]/=t.rows*t.cols,r[0]=Array.from(w)}return g.delete(),i.delete(),o.delete(),r}equalizeHistogram(){let t=cv.imread(this.drawCanvas.getCanvas());if(this.drawCanvas.isBW())cv.cvtColor(t,t,cv.COLOR_RGB2GRAY),cv.equalizeHist(t,t);else switch(this.colorspace){case"RGB":{let r=new cv.MatVector;cv.split(t,r),cv.equalizeHist(r.get(0),r.get(0)),cv.equalizeHist(r.get(1),r.get(1)),cv.equalizeHist(r.get(2),r.get(2)),cv.merge(r,t),r.delete();break}case"LAB":{cv.cvtColor(t,t,cv.COLOR_RGB2Lab);let r=new cv.MatVector;cv.split(t,r),cv.equalizeHist(r.get(0),r.get(0)),cv.merge(r,t),cv.cvtColor(t,t,cv.COLOR_Lab2RGB),r.delete();break}case"HSV":{cv.cvtColor(t,t,cv.COLOR_RGB2HSV);let r=new cv.MatVector;cv.split(t,r),cv.equalizeHist(r.get(2),r.get(2)),cv.merge(r,t),cv.cvtColor(t,t,cv.COLOR_HSV2RGB),r.delete();break}}this.outputCanvas.drawMat(t),this.updateHistogram(),t.delete()}CLAHE(){let t=cv.imread(this.drawCanvas.getCanvas()),r=new cv.Size(this.tileGridSize,this.tileGridSize),i=new cv.CLAHE(this.clipLimit,r);if(this.drawCanvas.isBW())cv.cvtColor(t,t,cv.COLOR_RGB2GRAY),i.apply(t,t);else switch(this.colorspace){case"RGB":{let o=new cv.MatVector;cv.split(t,o),i.apply(o.get(0),o.get(0)),i.apply(o.get(1),o.get(1)),i.apply(o.get(2),o.get(2)),cv.merge(o,t),o.delete();break}case"LAB":{cv.cvtColor(t,t,cv.COLOR_RGB2Lab);let o=new cv.MatVector;cv.split(t,o),i.apply(o.get(0),o.get(0)),cv.merge(o,t),cv.cvtColor(t,t,cv.COLOR_Lab2RGB),o.delete();break}case"HSV":{cv.cvtColor(t,t,cv.COLOR_RGB2HSV);let o=new cv.MatVector;cv.split(t,o),i.apply(o.get(2),o.get(2)),cv.merge(o,t),cv.cvtColor(t,t,cv.COLOR_HSV2RGB),o.delete();break}}this.outputCanvas.drawMat(t),this.updateHistogram(),t.delete(),i.delete()}ngAfterViewInit(){super.ngAfterViewInit(),this.ngxOpenCv.isReady$.subscribe(t=>{this.cvState=t,t.ready&&this.updateHistogram()})}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Ni(e)))(r||e)}}(),e.\u0275cmp=qn({type:e,selectors:[["app-image-histogram"]],features:[Gn],decls:41,vars:19,consts:[["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],["name","Colorspace","aria-label","Color space",3,"ngModel","ngModelChange"],["value","RGB"],["value","LAB"],["value","HSV"],["mat-raised-button","","color","primary",1,"fillWidth",3,"click"],[3,"min","max","step","title","value","valueChange"],["ngProjectAs","[drawerRight]",5,["","drawerRight",""]],["echarts","",1,"histo-graph",3,"options"],["ngProjectAs","[centerContent]",5,["","centerContent",""]],["title","Image",1,"canvas",3,"width","drawable","BWOption","drawingEnded","BWSet"],["inputCanvas",""],["title","Result",1,"canvas",3,"width","drawable","BWOption","BWSet"],["outputCanvas",""]],template:function(t,r){1&t&&(je(0,"app-tutorial-template-images"),Mt(1," Histogram and equalization "),ci(2,0),je(3,"h3"),Mt(4,"Colorspace"),Ke(),je(5,"mat-button-toggle-group",1),It("ngModelChange",function(o){return r.colorspace=o}),je(6,"mat-button-toggle",2)(7,"b"),Mt(8,"RGB"),Ke()(),je(9,"mat-button-toggle",3)(10,"b"),Mt(11,"L"),Ke(),Mt(12,"AB"),Ke(),je(13,"mat-button-toggle",4),Mt(14,"HS"),je(15,"b"),Mt(16,"V"),Ke()()(),yn(17,"hr"),je(18,"button",5),It("click",function(){return r.equalizeHistogram()}),Mt(19," Histogram equalization "),Ke(),yn(20,"hr"),je(21,"h3"),Mt(22," Contrast Limited "),yn(23,"br"),Mt(24," Adaptive Histogram "),yn(25,"br"),Mt(26," Equalization "),Ke(),je(27,"app-labelled-sliders",6),It("valueChange",function(o){return r.tileGridSize=o})("valueChange",function(){return r.CLAHE()}),Ke(),je(28,"app-labelled-sliders",6),It("valueChange",function(o){return r.clipLimit=o})("valueChange",function(){return r.CLAHE()}),Ke(),je(29,"button",5),It("click",function(){return r.CLAHE()}),Mt(30," CLAHE "),Ke(),ui(),ci(31,7),yn(32,"div",8),je(33,"h2"),Mt(34,"Result canvas"),Ke(),yn(35,"div",8),ui(),ci(36,9),je(37,"app-draw-canvas",10,11),It("drawingEnded",function(){return r.updateHistogram()})("BWSet",function(){return r.updateHistogram()}),Ke(),je(39,"app-draw-canvas",12,13),It("BWSet",function(){return r.updateHistogram()}),Ke(),ui(),Ke()),2&t&&(xt(5),_t("ngModel",r.colorspace),xt(22),_t("min",4)("max",48)("step",2)("title","Tile Grid size")("value",r.tileGridSize),xt(1),_t("min",4)("max",48)("step",2)("title","Clip Limit")("value",r.clipLimit),xt(4),_t("options",r.inputHistoOptions),xt(3),_t("options",r.outputHistoOptions),xt(2),_t("width",1024)("drawable",!1)("BWOption",!0),xt(2),_t("width",1024)("drawable",!1)("BWOption",!0))},dependencies:[Og,nv,rv,Au,Iu,Cs,ev,iu,tv],styles:[".canvas[_ngcontent-%COMP%]{width:45%;min-width:256px}.histo-graph[_ngcontent-%COMP%]{min-width:350px;aspect-ratio:1}"]}),e})();function _B(e=0,n=1){let t=1-Math.random(),r=Math.random();return Math.sqrt(-2*Math.log(t))*Math.cos(2*Math.PI*r)*n+e}function h2(e,n={x:0,y:0},t={x:1,y:1}){let r=new Array(e);for(let i=0;i<e;i++)r[i]={x:_B(n.x,t.x),y:_B(n.y,t.y)};return r}function c6(e,n,t){let r=new Array(t),i=(n-e)/(t-1);for(let o=0;o<t;o++)r[o]=e+i*o;return r}var Ct=z(3113),u6=z(7151),mte=(z(5985),z(5309)),_te=z(559),yte=z(1296);function d6(e,n,t){"object"==typeof n&&(t=n,n=null);var i,r=this;if(!(e instanceof Function))for(var o in i=[],e)e.hasOwnProperty(o)&&i.push(o);var d=function(g){if(r.apply(this,arguments),e instanceof Function?h6(this,e.call(this,g)):bte(this,e,i),this.constructor===d)for(var _=d.__initializers__,w=0;w<_.length;w++)_[w].apply(this,arguments)};d.__super__=r,d.__initializers__=r.__initializers__?r.__initializers__.slice():[],n&&d.__initializers__.push(n);var f=function(){};return f.prototype=r.prototype,d.prototype=new f,d.prototype.constructor=d,h6(d.prototype,t),d.extend=r.extend,d.derive=r.extend,d}function h6(e,n){if(n)for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])}function bte(e,n,t){for(var r=0;r<t.length;r++){var i=t[r];e[i]=n[i]}}(0,u6.D)([mte.N,_te.N]),(0,u6.D)(yte.T);const xte={extend:d6,derive:d6};function wte(e,n){this.action=e,this.context=n}var Cte={trigger:function(e){if(this.hasOwnProperty("__handlers__")&&this.__handlers__.hasOwnProperty(e)){var n=this.__handlers__[e],t=n.length,r=-1,i=arguments;switch(i.length){case 1:for(;++r<t;)n[r].action.call(n[r].context);return;case 2:for(;++r<t;)n[r].action.call(n[r].context,i[1]);return;case 3:for(;++r<t;)n[r].action.call(n[r].context,i[1],i[2]);return;case 4:for(;++r<t;)n[r].action.call(n[r].context,i[1],i[2],i[3]);return;case 5:for(;++r<t;)n[r].action.call(n[r].context,i[1],i[2],i[3],i[4]);return;default:for(;++r<t;)n[r].action.apply(n[r].context,Array.prototype.slice.call(i,1));return}}},on:function(e,n,t){if(e&&n){var r=this.__handlers__||(this.__handlers__={});if(r[e]){if(this.has(e,n))return}else r[e]=[];var i=new wte(n,t||this);return r[e].push(i),this}},once:function(e,n,t){if(e&&n){var r=this;return this.on(e,function i(){r.off(e,i),n.apply(this,arguments)},t)}},before:function(e,n,t){if(e&&n)return this.on(e="before"+e,n,t)},after:function(e,n,t){if(e&&n)return this.on(e="after"+e,n,t)},success:function(e,n){return this.once("success",e,n)},error:function(e,n){return this.once("error",e,n)},off:function(e,n){var t=this.__handlers__||(this.__handlers__={});if(n){if(t[e]){for(var r=t[e],i=[],o=0;o<r.length;o++)n&&r[o].action!==n&&i.push(r[o]);t[e]=i}return this}t[e]=[]},has:function(e,n){var t=this.__handlers__;if(!t||!t[e])return!1;for(var r=t[e],i=0;i<r.length;i++)if(r[i].action===n)return!0}};const yB=Cte;var Ste=0,Mte=Array.prototype.forEach,tC={genGUID:function(){return++Ste},relative2absolute:function(e,n){if(!n||e.match(/^\//))return e;for(var t=e.split("/"),r=n.split("/"),i=t[0];"."===i||".."===i;)".."===i&&r.pop(),t.shift(),i=t[0];return r.join("/")+"/"+t.join("/")},extend:function(e,n){if(n)for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e},defaults:function(e,n){if(n)for(var t in n)void 0===e[t]&&(e[t]=n[t]);return e},extendWithPropList:function(e,n,t){if(n)for(var r=0;r<t.length;r++){var i=t[r];e[i]=n[i]}return e},defaultsWithPropList:function(e,n,t){if(n)for(var r=0;r<t.length;r++){var i=t[r];null==e[i]&&(e[i]=n[i])}return e},each:function(e,n,t){if(e&&n)if(e.forEach&&e.forEach===Mte)e.forEach(n,t);else if(e.length===+e.length)for(var r=0,i=e.length;r<i;r++)n.call(t,e[r],r,e);else for(var o in e)e.hasOwnProperty(o)&&n.call(t,e[o],o,e)},isObject:function(e){return e===Object(e)},isArray:function(e){return Array.isArray(e)},isArrayLike:function(e){return!!e&&e.length===+e.length},clone:function(e){if(tC.isObject(e)){if(tC.isArray(e))return e.slice();if(tC.isArrayLike(e)){for(var n=new e.constructor(e.length),t=0;t<e.length;t++)n[t]=e[t];return n}return tC.extend({},e)}return e}};const qo=tC;var f2=function(){this.__uid__=qo.genGUID()};f2.__initializers__=[function(e){qo.extend(this,e)}],qo.extend(f2,xte),qo.extend(f2.prototype,yB);const Us=f2;var f6=["OES_texture_float","OES_texture_half_float","OES_texture_float_linear","OES_texture_half_float_linear","OES_standard_derivatives","OES_vertex_array_object","OES_element_index_uint","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","EXT_texture_filter_anisotropic","EXT_shader_texture_lod","WEBGL_draw_buffers","EXT_frag_depth","EXT_sRGB","ANGLE_instanced_arrays"],p6=["MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE"];const Ete=function Tte(e){for(var n={},t={},r=0;r<f6.length;r++)d(f6[r]);for(r=0;r<p6.length;r++){var o=p6[r];t[o]=e.getParameter(e[o])}function d(f){if(e.getExtension){var g=e.getExtension(f);g||(g=e.getExtension("MOZ_"+f)),g||(g=e.getExtension("WEBKIT_"+f)),n[f]=g}}this.getExtension=function(f){return f in n||d(f),n[f]},this.getParameter=function(f){return t[f]}},Ite={get:function Ate(e){var n=new XMLHttpRequest;n.open("get",e.url),n.responseType=e.responseType||"text",e.onprogress&&(n.onprogress=function(t){t.lengthComputable?e.onprogress(t.loaded/t.total,t.loaded,t.total):e.onprogress(null)}),n.onload=function(t){n.status>=400?e.onerror&&e.onerror():e.onload&&e.onload(n.response)},e.onerror&&(n.onerror=e.onerror),n.send(null)}};var bB,Gs={supportWebGL:function(){if(null==bB)try{var e=document.createElement("canvas");if(!e.getContext("webgl")&&!e.getContext("experimental-webgl"))throw new Error}catch{bB=!1}return bB}};Gs.Int8Array=typeof Int8Array>"u"?Array:Int8Array,Gs.Uint8Array=typeof Uint8Array>"u"?Array:Uint8Array,Gs.Uint16Array=typeof Uint16Array>"u"?Array:Uint16Array,Gs.Uint32Array=typeof Uint32Array>"u"?Array:Uint32Array,Gs.Int16Array=typeof Int16Array>"u"?Array:Int16Array,Gs.Float32Array=typeof Float32Array>"u"?Array:Float32Array,Gs.Float64Array=typeof Float64Array>"u"?Array:Float64Array;var iv={};typeof window<"u"?iv=window:typeof global<"u"&&(iv=global),Gs.requestAnimationFrame=iv.requestAnimationFrame||iv.msRequestAnimationFrame||iv.mozRequestAnimationFrame||iv.webkitRequestAnimationFrame||function(e){setTimeout(e,16)},Gs.createCanvas=function(){return document.createElement("canvas")},Gs.createImage=function(){return new iv.Image},Gs.request={get:Ite.get},Gs.addEventListener=function(e,n,t,r){e.addEventListener(n,t,r)},Gs.removeEventListener=function(e,n,t){e.removeEventListener(n,t)};const oo=Gs;var ko=function(){this.head=null,this.tail=null,this._length=0};ko.prototype.insert=function(e){var n=new ko.Entry(e);return this.insertEntry(n),n},ko.prototype.insertAt=function(e,n){if(!(e<0)){for(var t=this.head,r=0;t&&r!=e;)t=t.next,r++;if(t){var i=new ko.Entry(n),o=t.prev;o?(o.next=i,i.prev=o):this.head=i,i.next=t,t.prev=i}else this.insert(n)}},ko.prototype.insertBeforeEntry=function(e,n){var t=new ko.Entry(e),r=n.prev;r?(r.next=t,t.prev=r):this.head=t,t.next=n,n.prev=t,this._length++},ko.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,this.tail=e):this.head=this.tail=e,this._length++},ko.prototype.remove=function(e){var n=e.prev,t=e.next;n?n.next=t:this.head=t,t?t.prev=n:this.tail=n,e.next=e.prev=null,this._length--},ko.prototype.removeAt=function(e){if(!(e<0)){for(var n=this.head,t=0;n&&t!=e;)n=n.next,t++;if(n)return this.remove(n),n.value}},ko.prototype.getHead=function(){if(this.head)return this.head.value},ko.prototype.getTail=function(){if(this.tail)return this.tail.value},ko.prototype.getAt=function(e){if(!(e<0)){for(var n=this.head,t=0;n&&t!=e;)n=n.next,t++;return n.value}},ko.prototype.indexOf=function(e){for(var n=this.head,t=0;n;){if(n.value===e)return t;n=n.next,t++}},ko.prototype.length=function(){return this._length},ko.prototype.isEmpty=function(){return 0===this._length},ko.prototype.forEach=function(e,n){for(var t=this.head,r=0,i=typeof n<"u";t;)i?e.call(n,t.value,r):e(t.value,r),t=t.next,r++},ko.prototype.clear=function(){this.tail=this.head=null,this._length=0},ko.Entry=function(e){this.value=e,this.next=null,this.prev=null};const Pte=ko;var Ty=function(e){this._list=new Pte,this._map={},this._maxSize=e||10};Ty.prototype.setMaxSize=function(e){this._maxSize=e},Ty.prototype.put=function(e,n){if(!this._map.hasOwnProperty(e)){var t=this._list.length();if(t>=this._maxSize&&t>0){var r=this._list.head;this._list.remove(r),delete this._map[r.key]}var i=this._list.insert(n);i.key=e,this._map[e]=i}},Ty.prototype.get=function(e){var n=this._map[e];if(this._map.hasOwnProperty(e))return n!==this._list.tail&&(this._list.remove(n),this._list.insertEntry(n)),n.value},Ty.prototype.remove=function(e){var n=this._map[e];typeof n<"u"&&(delete this._map[e],this._list.remove(n))},Ty.prototype.clear=function(){this._list.clear(),this._map={}};const g6=Ty;var ma={},v6={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function au(e){return(e=Math.round(e))<0?0:e>255?255:e}function nC(e){return e<0?0:e>1?1:e}function xB(e){return e.length&&"%"===e.charAt(e.length-1)?au(parseFloat(e)/100*255):au(parseInt(e,10))}function Ey(e){return e.length&&"%"===e.charAt(e.length-1)?nC(parseFloat(e)/100):nC(parseFloat(e))}function wB(e,n,t){return t<0?t+=1:t>1&&(t-=1),6*t<1?e+(n-e)*t*6:2*t<1?n:3*t<2?e+(n-e)*(2/3-t)*6:e}function kf(e,n,t){return e+(n-e)*t}function ou(e,n,t,r,i){return e[0]=n,e[1]=t,e[2]=r,e[3]=i,e}function CB(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e}var m6=new g6(20),p2=null;function Ay(e,n){p2&&CB(p2,n),p2=m6.put(e,p2||n.slice())}function SB(e,n){var t=(parseFloat(e[0])%360+360)%360/360,r=Ey(e[1]),i=Ey(e[2]),o=i<=.5?i*(r+1):i+r-i*r,d=2*i-o;return ou(n=n||[],au(255*wB(d,o,t+1/3)),au(255*wB(d,o,t)),au(255*wB(d,o,t-1/3)),1),4===e.length&&(n[3]=e[3]),n}ma.parse=function(e,n){if(e){n=n||[];var t=m6.get(e);if(t)return CB(n,t);var i,r=(e+="").replace(/ /g,"").toLowerCase();if(r in v6)return CB(n,v6[r]),Ay(e,n),n;if("#"===r.charAt(0))return 4===r.length?(i=parseInt(r.substr(1),16))>=0&&i<=4095?(ou(n,(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1),Ay(e,n),n):void ou(n,0,0,0,1):7===r.length?(i=parseInt(r.substr(1),16))>=0&&i<=16777215?(ou(n,(16711680&i)>>16,(65280&i)>>8,255&i,1),Ay(e,n),n):void ou(n,0,0,0,1):void 0;var o=r.indexOf("("),d=r.indexOf(")");if(-1!==o&&d+1===r.length){var f=r.substr(0,o),g=r.substr(o+1,d-(o+1)).split(","),_=1;switch(f){case"rgba":if(4!==g.length)return void ou(n,0,0,0,1);_=Ey(g.pop());case"rgb":return 3!==g.length?void ou(n,0,0,0,1):(ou(n,xB(g[0]),xB(g[1]),xB(g[2]),_),Ay(e,n),n);case"hsla":return 4!==g.length?void ou(n,0,0,0,1):(g[3]=Ey(g[3]),SB(g,n),Ay(e,n),n);case"hsl":return 3!==g.length?void ou(n,0,0,0,1):(SB(g,n),Ay(e,n),n);default:return}}ou(n,0,0,0,1)}},ma.parseToFloat=function(e,n){if(n=ma.parse(e,n))return n[0]/=255,n[1]/=255,n[2]/=255,n},ma.lift=function(e,n){var t=ma.parse(e);if(t){for(var r=0;r<3;r++)t[r]=n<0?t[r]*(1-n)|0:(255-t[r])*n+t[r]|0;return ma.stringify(t,4===t.length?"rgba":"rgb")}},ma.toHex=function(e){var n=ma.parse(e);if(n)return((1<<24)+(n[0]<<16)+(n[1]<<8)+ +n[2]).toString(16).slice(1)},ma.fastLerp=function(e,n,t){if(n&&n.length&&e>=0&&e<=1){t=t||[];var r=e*(n.length-1),i=Math.floor(r),o=Math.ceil(r),d=n[i],f=n[o],g=r-i;return t[0]=au(kf(d[0],f[0],g)),t[1]=au(kf(d[1],f[1],g)),t[2]=au(kf(d[2],f[2],g)),t[3]=nC(kf(d[3],f[3],g)),t}},ma.fastMapToColor=ma.fastLerp,ma.lerp=function(e,n,t){if(n&&n.length&&e>=0&&e<=1){var r=e*(n.length-1),i=Math.floor(r),o=Math.ceil(r),d=ma.parse(n[i]),f=ma.parse(n[o]),g=r-i,_=ma.stringify([au(kf(d[0],f[0],g)),au(kf(d[1],f[1],g)),au(kf(d[2],f[2],g)),nC(kf(d[3],f[3],g))],"rgba");return t?{color:_,leftIndex:i,rightIndex:o,value:r}:_}},ma.mapToColor=ma.lerp,ma.modifyHSL=function(e,n,t,r){if(e=ma.parse(e))return e=function Lte(e){if(e){var g,_,n=e[0]/255,t=e[1]/255,r=e[2]/255,i=Math.min(n,t,r),o=Math.max(n,t,r),d=o-i,f=(o+i)/2;if(0===d)g=0,_=0;else{_=f<.5?d/(o+i):d/(2-o-i);var w=((o-n)/6+d/2)/d,S=((o-t)/6+d/2)/d,k=((o-r)/6+d/2)/d;n===o?g=k-S:t===o?g=1/3+w-k:r===o&&(g=2/3+S-w),g<0&&(g+=1),g>1&&(g-=1)}var V=[360*g,_,f];return null!=e[3]&&V.push(e[3]),V}}(e),null!=n&&(e[0]=function Rte(e){return(e=Math.round(e))<0?0:e>360?360:e}(n)),null!=t&&(e[1]=Ey(t)),null!=r&&(e[2]=Ey(r)),ma.stringify(SB(e),"rgba")},ma.modifyAlpha=function(e,n){if((e=ma.parse(e))&&null!=n)return e[3]=nC(n),ma.stringify(e,"rgba")},ma.stringify=function(e,n){if(e&&e.length){var t=e[0]+","+e[1]+","+e[2];return("rgba"===n||"hsva"===n||"hsla"===n)&&(t+=","+e[3]),n+"("+t+")"}};var Ote=ma.parseToFloat,DB={};function _6(e){var n=Object.keys(e);n.sort();for(var t=[],r=0;r<n.length;r++){var i=n[r],o=e[i];t.push(null===o?i:i+" "+o.toString())}return t.join("\n")}var Nte=Us.extend(function(){return{name:"",depthTest:!0,depthMask:!0,transparent:!1,blend:null,autoUpdateTextureStatus:!0,uniforms:{},vertexDefines:{},fragmentDefines:{},_textureStatus:{},_enabledUniforms:null}},function(){this.name||(this.name="MATERIAL_"+this.__uid__),this.shader&&this.attachShader(this.shader,!0)},{precision:"highp",setUniform:function(e,n){void 0===n&&console.warn('Uniform value "'+e+'" is undefined');var t=this.uniforms[e];t&&("string"==typeof n&&(n=Ote(n)||n),t.value=n,this.autoUpdateTextureStatus&&"t"===t.type&&(n?this.enableTexture(e):this.disableTexture(e)))},setUniforms:function(e){for(var n in e)this.setUniform(n,e[n])},isUniformEnabled:function(e){return this._enabledUniforms.indexOf(e)>=0},getEnabledUniforms:function(){return this._enabledUniforms},getTextureUniforms:function(){return this._textureUniforms},set:function(e,n){if("object"==typeof e)for(var t in e)this.setUniform(t,e[t]);else this.setUniform(e,n)},get:function(e){var n=this.uniforms[e];if(n)return n.value},attachShader:function(e,n){var t=this.uniforms;this.uniforms=e.createUniforms(),this.shader=e;var r=this.uniforms;this._enabledUniforms=Object.keys(r),this._enabledUniforms.sort(),this._textureUniforms=this._enabledUniforms.filter(function(_){var w=this.uniforms[_].type;return"t"===w||"tv"===w},this);var i=this.vertexDefines,o=this.fragmentDefines;if(this.vertexDefines=qo.clone(e.vertexDefines),this.fragmentDefines=qo.clone(e.fragmentDefines),n){for(var d in t)r[d]&&(r[d].value=t[d].value);qo.defaults(this.vertexDefines,i),qo.defaults(this.fragmentDefines,o)}var f={};for(var g in e.textures)f[g]={shaderType:e.textures[g].shaderType,type:e.textures[g].type,enabled:!(!n||!this._textureStatus[g])&&this._textureStatus[g].enabled};this._textureStatus=f,this._programKey=""},clone:function(){var e=new this.constructor({name:this.name,shader:this.shader});for(var n in this.uniforms)e.uniforms[n].value=this.uniforms[n].value;return e.depthTest=this.depthTest,e.depthMask=this.depthMask,e.transparent=this.transparent,e.blend=this.blend,e.vertexDefines=qo.clone(this.vertexDefines),e.fragmentDefines=qo.clone(this.fragmentDefines),e.enableTexture(this.getEnabledTextures()),e.precision=this.precision,e},define:function(e,n,t){var r=this.vertexDefines,i=this.fragmentDefines;"vertex"!==e&&"fragment"!==e&&"both"!==e&&arguments.length<3&&(t=n,n=e,e="both"),t=t??null,("vertex"===e||"both"===e)&&r[n]!==t&&(r[n]=t,this._programKey=""),("fragment"===e||"both"===e)&&i[n]!==t&&(i[n]=t,"both"!==e&&(this._programKey=""))},undefine:function(e,n){"vertex"!==e&&"fragment"!==e&&"both"!==e&&arguments.length<2&&(n=e,e="both"),("vertex"===e||"both"===e)&&this.isDefined("vertex",n)&&(delete this.vertexDefines[n],this._programKey=""),("fragment"===e||"both"===e)&&this.isDefined("fragment",n)&&(delete this.fragmentDefines[n],"both"!==e&&(this._programKey=""))},isDefined:function(e,n){switch(e){case"vertex":return void 0!==this.vertexDefines[n];case"fragment":return void 0!==this.fragmentDefines[n]}},getDefine:function(e,n){switch(e){case"vertex":return this.vertexDefines[n];case"fragment":return this.fragmentDefines[n]}},enableTexture:function(e){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.enableTexture(e[n]);else{var t=this._textureStatus[e];t&&(t.enabled||(t.enabled=!0,this._programKey=""))}},enableTexturesAll:function(){var e=this._textureStatus;for(var n in e)e[n].enabled=!0;this._programKey=""},disableTexture:function(e){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.disableTexture(e[n]);else{var t=this._textureStatus[e];t&&(!t.enabled||(t.enabled=!1,this._programKey=""))}},disableTexturesAll:function(){var e=this._textureStatus;for(var n in e)e[n].enabled=!1;this._programKey=""},isTextureEnabled:function(e){var n=this._textureStatus;return!!n[e]&&n[e].enabled},getEnabledTextures:function(){var e=[],n=this._textureStatus;for(var t in n)n[t].enabled&&e.push(t);return e},dirtyDefines:function(){this._programKey=""},getProgramKey:function(){return this._programKey||(this._programKey=function kte(e,n,t){t.sort();for(var r=[],i=0;i<t.length;i++)r.push(t[i]);var d=_6(e)+"\n"+_6(n)+"\n"+r.join("\n");if(DB[d])return DB[d];var f=qo.genGUID();return DB[d]=f,f}(this.vertexDefines,this.fragmentDefines,this.getEnabledTextures())),this._programKey}});const Sc=Nte;var e,g2=1e-6,Jo=Array,Iy=Math.random,Xr={create:function(){var e=new Jo(2);return e[0]=0,e[1]=0,e},clone:function(e){var n=new Jo(2);return n[0]=e[0],n[1]=e[1],n},fromValues:function(e,n){var t=new Jo(2);return t[0]=e,t[1]=n,t},copy:function(e,n){return e[0]=n[0],e[1]=n[1],e},set:function(e,n,t){return e[0]=n,e[1]=t,e},add:function(e,n,t){return e[0]=n[0]+t[0],e[1]=n[1]+t[1],e},subtract:function(e,n,t){return e[0]=n[0]-t[0],e[1]=n[1]-t[1],e}};Xr.sub=Xr.subtract,Xr.multiply=function(e,n,t){return e[0]=n[0]*t[0],e[1]=n[1]*t[1],e},Xr.mul=Xr.multiply,Xr.divide=function(e,n,t){return e[0]=n[0]/t[0],e[1]=n[1]/t[1],e},Xr.div=Xr.divide,Xr.min=function(e,n,t){return e[0]=Math.min(n[0],t[0]),e[1]=Math.min(n[1],t[1]),e},Xr.max=function(e,n,t){return e[0]=Math.max(n[0],t[0]),e[1]=Math.max(n[1],t[1]),e},Xr.scale=function(e,n,t){return e[0]=n[0]*t,e[1]=n[1]*t,e},Xr.scaleAndAdd=function(e,n,t,r){return e[0]=n[0]+t[0]*r,e[1]=n[1]+t[1]*r,e},Xr.distance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1];return Math.sqrt(t*t+r*r)},Xr.dist=Xr.distance,Xr.squaredDistance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1];return t*t+r*r},Xr.sqrDist=Xr.squaredDistance,Xr.length=function(e){var n=e[0],t=e[1];return Math.sqrt(n*n+t*t)},Xr.len=Xr.length,Xr.squaredLength=function(e){var n=e[0],t=e[1];return n*n+t*t},Xr.sqrLen=Xr.squaredLength,Xr.negate=function(e,n){return e[0]=-n[0],e[1]=-n[1],e},Xr.inverse=function(e,n){return e[0]=1/n[0],e[1]=1/n[1],e},Xr.normalize=function(e,n){var t=n[0],r=n[1],i=t*t+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=n[0]*i,e[1]=n[1]*i),e},Xr.dot=function(e,n){return e[0]*n[0]+e[1]*n[1]},Xr.cross=function(e,n,t){var r=n[0]*t[1]-n[1]*t[0];return e[0]=e[1]=0,e[2]=r,e},Xr.lerp=function(e,n,t,r){var i=n[0],o=n[1];return e[0]=i+r*(t[0]-i),e[1]=o+r*(t[1]-o),e},Xr.random=function(e,n){n=n||1;var t=2*GLMAT_RANDOM()*Math.PI;return e[0]=Math.cos(t)*n,e[1]=Math.sin(t)*n,e},Xr.transformMat2=function(e,n,t){var r=n[0],i=n[1];return e[0]=t[0]*r+t[2]*i,e[1]=t[1]*r+t[3]*i,e},Xr.transformMat2d=function(e,n,t){var r=n[0],i=n[1];return e[0]=t[0]*r+t[2]*i+t[4],e[1]=t[1]*r+t[3]*i+t[5],e},Xr.transformMat3=function(e,n,t){var r=n[0],i=n[1];return e[0]=t[0]*r+t[3]*i+t[6],e[1]=t[1]*r+t[4]*i+t[7],e},Xr.transformMat4=function(e,n,t){var r=n[0],i=n[1];return e[0]=t[0]*r+t[4]*i+t[12],e[1]=t[1]*r+t[5]*i+t[13],e},Xr.forEach=(e=Xr.create(),function(n,t,r,i,o,d){var f,g;for(t||(t=2),r||(r=0),g=i?Math.min(i*t+r,n.length):n.length,f=r;f<g;f+=t)e[0]=n[f],e[1]=n[f+1],o(e,e,d),n[f]=e[0],n[f+1]=e[1];return n});const br=Xr;var ai=function(e,n){this.array=br.fromValues(e=e||0,n=n||0),this._dirty=!0};if(ai.prototype={constructor:ai,add:function(e){return br.add(this.array,this.array,e.array),this._dirty=!0,this},set:function(e,n){return this.array[0]=e,this.array[1]=n,this._dirty=!0,this},setArray:function(e){return this.array[0]=e[0],this.array[1]=e[1],this._dirty=!0,this},clone:function(){return new ai(this.x,this.y)},copy:function(e){return br.copy(this.array,e.array),this._dirty=!0,this},cross:function(e,n){return br.cross(e.array,this.array,n.array),e._dirty=!0,this},dist:function(e){return br.dist(this.array,e.array)},distance:function(e){return br.distance(this.array,e.array)},div:function(e){return br.div(this.array,this.array,e.array),this._dirty=!0,this},divide:function(e){return br.divide(this.array,this.array,e.array),this._dirty=!0,this},dot:function(e){return br.dot(this.array,e.array)},len:function(){return br.len(this.array)},length:function(){return br.length(this.array)},lerp:function(e,n,t){return br.lerp(this.array,e.array,n.array,t),this._dirty=!0,this},min:function(e){return br.min(this.array,this.array,e.array),this._dirty=!0,this},max:function(e){return br.max(this.array,this.array,e.array),this._dirty=!0,this},mul:function(e){return br.mul(this.array,this.array,e.array),this._dirty=!0,this},multiply:function(e){return br.multiply(this.array,this.array,e.array),this._dirty=!0,this},negate:function(){return br.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return br.normalize(this.array,this.array),this._dirty=!0,this},random:function(e){return br.random(this.array,e),this._dirty=!0,this},scale:function(e){return br.scale(this.array,this.array,e),this._dirty=!0,this},scaleAndAdd:function(e,n){return br.scaleAndAdd(this.array,this.array,e.array,n),this._dirty=!0,this},sqrDist:function(e){return br.sqrDist(this.array,e.array)},squaredDistance:function(e){return br.squaredDistance(this.array,e.array)},sqrLen:function(){return br.sqrLen(this.array)},squaredLength:function(){return br.squaredLength(this.array)},sub:function(e){return br.sub(this.array,this.array,e.array),this._dirty=!0,this},subtract:function(e){return br.subtract(this.array,this.array,e.array),this._dirty=!0,this},transformMat2:function(e){return br.transformMat2(this.array,this.array,e.array),this._dirty=!0,this},transformMat2d:function(e){return br.transformMat2d(this.array,this.array,e.array),this._dirty=!0,this},transformMat3:function(e){return br.transformMat3(this.array,this.array,e.array),this._dirty=!0,this},transformMat4:function(e){return br.transformMat4(this.array,this.array,e.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Object.defineProperty){var y6=ai.prototype;Object.defineProperty(y6,"x",{get:function(){return this.array[0]},set:function(e){this.array[0]=e,this._dirty=!0}}),Object.defineProperty(y6,"y",{get:function(){return this.array[1]},set:function(e){this.array[1]=e,this._dirty=!0}})}ai.add=function(e,n,t){return br.add(e.array,n.array,t.array),e._dirty=!0,e},ai.set=function(e,n,t){return br.set(e.array,n,t),e._dirty=!0,e},ai.copy=function(e,n){return br.copy(e.array,n.array),e._dirty=!0,e},ai.cross=function(e,n,t){return br.cross(e.array,n.array,t.array),e._dirty=!0,e},ai.distance=ai.dist=function(e,n){return br.distance(e.array,n.array)},ai.divide=ai.div=function(e,n,t){return br.divide(e.array,n.array,t.array),e._dirty=!0,e},ai.dot=function(e,n){return br.dot(e.array,n.array)},ai.len=function(e){return br.length(e.array)},ai.lerp=function(e,n,t,r){return br.lerp(e.array,n.array,t.array,r),e._dirty=!0,e},ai.min=function(e,n,t){return br.min(e.array,n.array,t.array),e._dirty=!0,e},ai.max=function(e,n,t){return br.max(e.array,n.array,t.array),e._dirty=!0,e},ai.multiply=ai.mul=function(e,n,t){return br.multiply(e.array,n.array,t.array),e._dirty=!0,e},ai.negate=function(e,n){return br.negate(e.array,n.array),e._dirty=!0,e},ai.normalize=function(e,n){return br.normalize(e.array,n.array),e._dirty=!0,e},ai.random=function(e,n){return br.random(e.array,n),e._dirty=!0,e},ai.scale=function(e,n,t){return br.scale(e.array,n.array,t),e._dirty=!0,e},ai.scaleAndAdd=function(e,n,t,r){return br.scaleAndAdd(e.array,n.array,t.array,r),e._dirty=!0,e},ai.squaredDistance=ai.sqrDist=function(e,n){return br.sqrDist(e.array,n.array)},ai.squaredLength=ai.sqrLen=function(e){return br.sqrLen(e.array)},ai.subtract=ai.sub=function(e,n,t){return br.subtract(e.array,n.array,t.array),e._dirty=!0,e},ai.transformMat2=function(e,n,t){return br.transformMat2(e.array,n.array,t.array),e._dirty=!0,e},ai.transformMat2d=function(e,n,t){return br.transformMat2d(e.array,n.array,t.array),e._dirty=!0,e},ai.transformMat3=function(e,n,t){return br.transformMat3(e.array,n.array,t.array),e._dirty=!0,e},ai.transformMat4=function(e,n,t){return br.transformMat4(e.array,n.array,t.array),e._dirty=!0,e};const Fl=ai;var w6={};function Fte(e){for(var n=e.split("\n"),t=0,r=n.length;t<r;t++)n[t]=t+1+": "+n[t];return n.join("\n")}function C6(e,n,t){if(!e.getShaderParameter(n,e.COMPILE_STATUS))return[e.getShaderInfoLog(n),Fte(t)].join("\n")}var S6=new oo.Float32Array(16),Bte=Us.extend({uniformSemantics:{},attributes:{}},function(){this._locations={},this._textureSlot=0,this._program=null},{bind:function(e){this._textureSlot=0,e.gl.useProgram(this._program)},hasUniform:function(e){return null!=this._locations[e]},useTextureSlot:function(e,n,t){n&&(e.gl.activeTexture(e.gl.TEXTURE0+t),n.isRenderable()?n.bind(e):n.unbind(e))},currentTextureSlot:function(){return this._textureSlot},resetTextureSlot:function(e){this._textureSlot=e||0},takeCurrentTextureSlot:function(e,n){var t=this._textureSlot;return this.useTextureSlot(e,n,t),this._textureSlot++,t},setUniform:function(e,n,t,r){var o=this._locations[t];if(null==o)return!1;switch(n){case"m4":if(!(r instanceof Float32Array)){for(var d=0;d<r.length;d++)S6[d]=r[d];r=S6}e.uniformMatrix4fv(o,!1,r);break;case"2i":e.uniform2i(o,r[0],r[1]);break;case"2f":e.uniform2f(o,r[0],r[1]);break;case"3i":e.uniform3i(o,r[0],r[1],r[2]);break;case"3f":e.uniform3f(o,r[0],r[1],r[2]);break;case"4i":e.uniform4i(o,r[0],r[1],r[2],r[3]);break;case"4f":e.uniform4f(o,r[0],r[1],r[2],r[3]);break;case"1i":e.uniform1i(o,r);break;case"1f":e.uniform1f(o,r);break;case"1fv":e.uniform1fv(o,r);break;case"1iv":e.uniform1iv(o,r);break;case"2iv":e.uniform2iv(o,r);break;case"2fv":e.uniform2fv(o,r);break;case"3iv":e.uniform3iv(o,r);break;case"3fv":e.uniform3fv(o,r);break;case"4iv":e.uniform4iv(o,r);break;case"4fv":e.uniform4fv(o,r);break;case"m2":case"m2v":e.uniformMatrix2fv(o,!1,r);break;case"m3":case"m3v":e.uniformMatrix3fv(o,!1,r);break;case"m4v":if(Array.isArray(r)&&Array.isArray(r[0])){var f=new oo.Float32Array(16*r.length),g=0;for(d=0;d<r.length;d++)for(var _=r[d],w=0;w<16;w++)f[g++]=_[w];e.uniformMatrix4fv(o,!1,f)}else e.uniformMatrix4fv(o,!1,r)}return!0},setUniformOfSemantic:function(e,n,t){var r=this.uniformSemantics[n];return!!r&&this.setUniform(e,r.type,r.symbol,t)},enableAttributes:function(e,n,t){var d,r=e.gl,i=this._program,o=this._locations;(d=t?t.__enabledAttributeList:w6[e.__uid__])||(d=t?t.__enabledAttributeList=[]:w6[e.__uid__]=[]);for(var f=[],g=0;g<n.length;g++){var _=n[g];if(this.attributes[_]){var w=o[_];if(null==w){if(-1===(w=r.getAttribLocation(i,_))){f[g]=-1;continue}o[_]=w}f[g]=w,d[w]=d[w]?2:1}else f[g]=-1}for(g=0;g<d.length;g++)switch(d[g]){case 1:r.enableVertexAttribArray(g),d[g]=3;break;case 2:d[g]=3;break;case 3:r.disableVertexAttribArray(g),d[g]=0}return f},getAttribLocation:function(e,n){var t=this._locations,r=t[n];return null==r&&(r=e.getAttribLocation(this._program,n),t[n]=r),r},buildProgram:function(e,n,t,r){var i=e.createShader(e.VERTEX_SHADER),o=e.createProgram();e.shaderSource(i,t),e.compileShader(i);var d=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(d,r),e.compileShader(d);var f=C6(e,i,t);if(f||(f=C6(e,d,r)))return f;if(e.attachShader(o,i),e.attachShader(o,d),n.attributeSemantics.POSITION)e.bindAttribLocation(o,0,n.attributeSemantics.POSITION.symbol);else{var g=Object.keys(this.attributes);e.bindAttribLocation(o,0,g[0])}if(e.linkProgram(o),e.deleteShader(i),e.deleteShader(d),this._program=o,this.vertexCode=t,this.fragmentCode=r,!e.getProgramParameter(o,e.LINK_STATUS))return"Could not link program\n"+e.getProgramInfoLog(o);for(var _=0;_<n.uniforms.length;_++){var w=n.uniforms[_];this._locations[w]=e.getUniformLocation(o,w)}}});const Vte=Bte;var zte=/for\s*?\(int\s*?_idx_\s*\=\s*([\w-]+)\;\s*_idx_\s*<\s*([\w-]+);\s*_idx_\s*\+\+\s*\)\s*\{\{([\s\S]+?)(?=\}\})\}\}/g;function D6(e,n,t){var i={};for(var o in t)i[o+"_COUNT"]=t[o];return e.replace(zte,function r(d,f,g,_){var w="";isNaN(f)&&(f=f in n?n[f]:i[f]),isNaN(g)&&(g=g in n?n[g]:i[g]);for(var S=parseInt(f);S<parseInt(g);S++)w+="{"+_.replace(/float\s*\(\s*_idx_\s*\)/g,S.toFixed(1)).replace(/_idx_/g,S)+"}";return w})}function TB(e,n,t){var r=[];if(n)for(var i in n){var o=n[i];o>0&&r.push("#define "+i.toUpperCase()+"_COUNT "+o)}if(t)for(var d=0;d<t.length;d++)r.push("#define "+(f=t[d]).toUpperCase()+"_ENABLED");for(var f in e){var g=e[f];r.push(null===g?"#define "+f:"#define "+f+" "+g.toString())}return r.join("\n")}function M6(e){this._renderer=e,this._cache={}}M6.prototype.getProgram=function(e,n,t){var r=this._cache,i=e.isSkinnedMesh&&e.isSkinnedMesh(),o=e.isInstancedMesh&&e.isInstancedMesh(),d="s"+n.shader.shaderID+"m"+n.getProgramKey();if(t&&(d+="se"+t.getProgramKey(e.lightGroup)),i&&(d+=",sk"+e.joints.length),o&&(d+=",is"),Be=r[d])return Be;var f=t?t.getLightsNumbers(e.lightGroup):{},g=this._renderer,_=g.gl,w=n.getEnabledTextures(),S="";if(i){var k={SKINNING:null,JOINT_COUNT:e.joints.length};e.joints.length>g.getMaxJointNumber()&&(k.USE_SKIN_MATRICES_TEXTURE=null),S+="\n"+TB(k)+"\n"}o&&(S+="\n#define INSTANCING\n");var V=S+TB(n.vertexDefines,f,w),ne=S+TB(n.fragmentDefines,f,w),pe=V+"\n"+n.shader.vertex,De=["OES_standard_derivatives","EXT_shader_texture_lod"].filter(function(ot){return null!=g.getGLExtension(ot)});De.indexOf("EXT_shader_texture_lod")>=0&&(ne+="\n#define SUPPORT_TEXTURE_LOD"),De.indexOf("OES_standard_derivatives")>=0&&(ne+="\n#define SUPPORT_STANDARD_DERIVATIVES");var Be,Re=function Hte(e){for(var n=[],t=0;t<e.length;t++)n.push("#extension GL_"+e[t]+" : enable");return n.join("\n")}(De)+"\n"+function Ute(e){return["precision",e,"float"].join(" ")+";\n"+["precision",e,"int"].join(" ")+";\n"+["precision",e,"sampler2D"].join(" ")+";\n"}(n.precision)+"\n"+ne+"\n"+n.shader.fragment,Fe=D6(pe,n.vertexDefines,f),ke=D6(Re,n.fragmentDefines,f);(Be=new Vte).uniformSemantics=n.shader.uniformSemantics,Be.attributes=n.shader.attributes;var at=Be.buildProgram(_,n.shader,Fe,ke);return Be.__error=at,r[d]=Be,Be};const Gte=M6;var T6=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g,Wte=/attribute\s+(float|int|vec2|vec3|vec4)\s+([\s\S]*?);/g,E6=/#define\s+(\w+)?(\s+[\d-.]+)?\s*;?\s*\n/g,jte={bool:"1i",int:"1i",sampler2D:"t",samplerCube:"t",float:"1f",vec2:"2f",vec3:"3f",vec4:"4f",ivec2:"2i",ivec3:"3i",ivec4:"4i",mat2:"m2",mat3:"m3",mat4:"m4"};function Qd(e){for(var n=[],t=0;t<e;t++)n[t]=0;return n}var A6={bool:function(){return!0},int:function(){return 0},float:function(){return 0},sampler2D:function(){return null},samplerCube:function(){return null},vec2:function(){return Qd(2)},vec3:function(){return Qd(3)},vec4:function(){return Qd(4)},ivec2:function(){return Qd(2)},ivec3:function(){return Qd(3)},ivec4:function(){return Qd(4)},mat2:function(){return Qd(4)},mat3:function(){return Qd(9)},mat4:function(){return Qd(16)},array:function(){return[]}},EB=["POSITION","NORMAL","BINORMAL","TANGENT","TEXCOORD","TEXCOORD_0","TEXCOORD_1","COLOR","JOINT","WEIGHT"],I6=["SKIN_MATRIX","VIEWPORT_SIZE","VIEWPORT","DEVICEPIXELRATIO","WINDOW_SIZE","NEAR","FAR","TIME"],P6=["WORLD","VIEW","PROJECTION","WORLDVIEW","VIEWPROJECTION","WORLDVIEWPROJECTION","WORLDINVERSE","VIEWINVERSE","PROJECTIONINVERSE","WORLDVIEWINVERSE","VIEWPROJECTIONINVERSE","WORLDVIEWPROJECTIONINVERSE","WORLDTRANSPOSE","VIEWTRANSPOSE","PROJECTIONTRANSPOSE","WORLDVIEWTRANSPOSE","VIEWPROJECTIONTRANSPOSE","WORLDVIEWPROJECTIONTRANSPOSE","WORLDINVERSETRANSPOSE","VIEWINVERSETRANSPOSE","PROJECTIONINVERSETRANSPOSE","WORLDVIEWINVERSETRANSPOSE","VIEWPROJECTIONINVERSETRANSPOSE","WORLDVIEWPROJECTIONINVERSETRANSPOSE"],Zte={vec4:4,vec3:3,vec2:2,float:1},AB={},R6={};function L6(e){return e.replace(/[ \t]*\/\/.*\n/g,"").replace(/[ \t]*\/\*[\s\S]*?\*\//g,"")}function Py(){console.error("Wrong uniform/attributes syntax")}function O6(e,n){for(var t=/[,=\(\):]/,r=n.replace(/:\s*\[\s*(.*)\s*\]/g,"="+e+"($1)").replace(/\s+/g,"").split(/(?=[,=\(\):])/g),i=[],o=0;o<r.length;o++)r[o].match(t)?i.push(r[o].charAt(0),r[o].slice(1)):i.push(r[o]);var pe,k=0,V={},ne=null;function De(ke){ke||Py();var Be=ke.match(/\[(.*?)\]/);pe=ke.replace(/\[(.*?)\]/,""),V[pe]={},Be&&(V[pe].isArray=!0,V[pe].arraySize=Be[1])}for(De((r=i)[0]),o=1;o<r.length;o++){var Re=r[o];if(Re){if("="===Re){if(0!==k&&3!==k){Py();break}k=1;continue}if(":"===Re){k=4;continue}if(","===Re){if(2===k){if(!(ne instanceof Array)){Py();break}ne.push(+r[++o])}else k=5;continue}if(")"===Re){V[pe].value=new oo.Float32Array(ne),ne=null,k=5;continue}if("("===Re){if(2!==k){Py();break}if(!(ne instanceof Array)){Py();break}ne.push(+r[++o]);continue}if(Re.indexOf("vec")>=0){if(1!==k&&4!==k){Py();break}k=2,ne=[];continue}if(1===k){V[pe].value="bool"===e?"true"===Re:parseFloat(Re),ne=null;continue}if(4===k){var Fe=Re;EB.indexOf(Fe)>=0||I6.indexOf(Fe)>=0||P6.indexOf(Fe)>=0?V[pe].semantic=Fe:"ignore"===Fe||"unconfigurable"===Fe?V[pe].ignore=!0:V[pe].value="bool"===e?"true"===Fe:parseFloat(Fe);continue}De(Re),k=0}}return V}function yo(e,n){"object"==typeof e&&(n=e.fragment,e=e.vertex),e=L6(e),n=L6(n),this._shaderID=function Yte(e,n){var t="vertex:"+e+"fragment:"+n;if(AB[t])return AB[t];var r=qo.genGUID();return AB[t]=r,R6[r]={vertex:e,fragment:n},r}(e,n),this._vertexCode=yo.parseImport(e),this._fragmentCode=yo.parseImport(n),this.attributeSemantics={},this.matrixSemantics={},this.uniformSemantics={},this.matrixSemanticKeys=[],this.uniformTemplates={},this.attributes={},this.textures={},this.vertexDefines={},this.fragmentDefines={},this._parseAttributes(),this._parseUniforms(),this._parseDefines()}yo.prototype={constructor:yo,createUniforms:function(){var e={};for(var n in this.uniformTemplates){var t=this.uniformTemplates[n];e[n]={type:t.type,value:t.value()}}return e},_parseImport:function(){this._vertexCode=yo.parseImport(this.vertex),this._fragmentCode=yo.parseImport(this.fragment)},_addSemanticUniform:function(e,n,t){if(EB.indexOf(t)>=0)this.attributeSemantics[t]={symbol:e,type:n};else if(P6.indexOf(t)>=0){var r=!1,i=t;t.match(/TRANSPOSE$/)&&(r=!0,i=t.slice(0,-9)),this.matrixSemantics[t]={symbol:e,type:n,isTranspose:r,semanticNoTranspose:i}}else I6.indexOf(t)>=0&&(this.uniformSemantics[t]={symbol:e,type:n})},_addMaterialUniform:function(e,n,t,r,i,o){o[e]={type:t,value:i?A6.array:r||A6[n],semantic:null}},_parseUniforms:function(){var e={},n=this;function r(o){return null!=o?function(){return o}:null}function i(o,d,f){var g=O6(d,f),_=[];for(var w in g){var S=g[w],k=S.semantic,V=w,ne=jte[d],pe=r(g[w].value);g[w].isArray&&(V+="["+g[w].arraySize+"]",ne+="v"),_.push(V),n._uniformList.push(w),S.ignore||(("sampler2D"===d||"samplerCube"===d)&&(n.textures[w]={shaderType:"fragment",type:d}),k?n._addSemanticUniform(w,ne,k):n._addMaterialUniform(w,d,ne,pe,g[w].isArray,e))}return _.length>0?"uniform "+d+" "+_.join(",")+";\n":""}this._uniformList=[],this._vertexCode=this._vertexCode.replace(T6,i),this._fragmentCode=this._fragmentCode.replace(T6,i),n.matrixSemanticKeys=Object.keys(this.matrixSemantics),this.uniformTemplates=e},_parseAttributes:function(){var e={},n=this;this._vertexCode=this._vertexCode.replace(Wte,function t(r,i,o){var d=O6(i,o),f=Zte[i]||1,g=[];for(var _ in d){var w=d[_].semantic;if(e[_]={type:"float",size:f,semantic:w||null},w){if(EB.indexOf(w)<0)throw new Error('Unkown semantic "'+w+'"');n.attributeSemantics[w]={symbol:_,type:i}}g.push(_)}return"attribute "+i+" "+g.join(",")+";\n"}),this.attributes=e},_parseDefines:function(){var e=this;function t(r,i,o){var d=e.fragmentDefines;return d[i]||(d[i]="false"!==o&&("true"===o||(o?isNaN(parseFloat(o))?o.trim():parseFloat(o):null))),""}this._vertexCode=this._vertexCode.replace(E6,t),this._fragmentCode=this._fragmentCode.replace(E6,t)},clone:function(){var e=R6[this._shaderID];return new yo(e.vertex,e.fragment)}},Object.defineProperty&&(Object.defineProperty(yo.prototype,"shaderID",{get:function(){return this._shaderID}}),Object.defineProperty(yo.prototype,"vertex",{get:function(){return this._vertexCode}}),Object.defineProperty(yo.prototype,"fragment",{get:function(){return this._fragmentCode}}),Object.defineProperty(yo.prototype,"uniforms",{get:function(){return this._uniformList}}));var Xte=/(@import)\s*([0-9a-zA-Z_\-\.]*)/g;yo.parseImport=function(e){return e.replace(Xte,function(i,t,r){return(i=yo.source(r))?yo.parseImport(i):(console.error('Shader chunk "'+r+'" not existed in library'),"")})};var $te=/(@export)\s*([0-9a-zA-Z_\-\.]*)\s*\n([\s\S]*?)@end/g;yo.import=function(e){e.replace($te,function(n,t,r,o){if(o=o.replace(/(^[\s\t\xa0\u3000]+)|([\u3000\xa0\s\t]+\x24)/g,"")){for(var _,d=r.split("."),f=yo.codes,g=0;g<d.length-1;)f[_=d[g++]]||(f[_]={}),f=f[_];f[_=d[g]]=o}return o})},yo.codes={},yo.source=function(e){for(var n=e.split("."),t=yo.codes,r=0;t&&r<n.length;)t=t[n[r++]];return"string"!=typeof t?(console.error('Shader "'+e+'" not existed in library'),""):t};const Yn=yo,k6="@export clay.prez.vertex\nuniform mat4 WVP : WORLDVIEWPROJECTION;\nattribute vec3 pos : POSITION;\nattribute vec2 uv : TEXCOORD_0;\nuniform vec2 uvRepeat : [1.0, 1.0];\nuniform vec2 uvOffset : [0.0, 0.0];\n@import clay.chunk.skinning_header\n@import clay.chunk.instancing_header\nvarying vec2 v_Texcoord;\nvoid main()\n{\n vec4 P = vec4(pos, 1.0);\n#ifdef SKINNING\n @import clay.chunk.skin_matrix\n P = skinMatrixWS * P;\n#endif\n#ifdef INSTANCING\n @import clay.chunk.instancing_matrix\n P = instanceMat * P;\n#endif\n gl_Position = WVP * P;\n v_Texcoord = uv * uvRepeat + uvOffset;\n}\n@end\n@export clay.prez.fragment\nuniform sampler2D alphaMap;\nuniform float alphaCutoff: 0.0;\nvarying vec2 v_Texcoord;\nvoid main()\n{\n if (alphaCutoff > 0.0) {\n if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {\n discard;\n }\n }\n gl_FragColor = vec4(0.0,0.0,0.0,1.0);\n}\n@end";var Qi={create:function(){var e=new Jo(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},clone:function(e){var n=new Jo(16);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n},copy:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},transpose:function(e,n){if(e===n){var t=n[1],r=n[2],i=n[3],o=n[6],d=n[7],f=n[11];e[1]=n[4],e[2]=n[8],e[3]=n[12],e[4]=t,e[6]=n[9],e[7]=n[13],e[8]=r,e[9]=o,e[11]=n[14],e[12]=i,e[13]=d,e[14]=f}else e[0]=n[0],e[1]=n[4],e[2]=n[8],e[3]=n[12],e[4]=n[1],e[5]=n[5],e[6]=n[9],e[7]=n[13],e[8]=n[2],e[9]=n[6],e[10]=n[10],e[11]=n[14],e[12]=n[3],e[13]=n[7],e[14]=n[11],e[15]=n[15];return e},invert:function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],d=n[4],f=n[5],g=n[6],_=n[7],w=n[8],S=n[9],k=n[10],V=n[11],ne=n[12],pe=n[13],De=n[14],Re=n[15],Fe=t*f-r*d,ke=t*g-i*d,Be=t*_-o*d,at=r*g-i*f,ot=r*_-o*f,St=i*_-o*g,yt=w*pe-S*ne,Ht=w*De-k*ne,rn=w*Re-V*ne,Kt=S*De-k*pe,gn=S*Re-V*pe,_n=k*Re-V*De,ln=Fe*_n-ke*gn+Be*Kt+at*rn-ot*Ht+St*yt;return ln?(e[0]=(f*_n-g*gn+_*Kt)*(ln=1/ln),e[1]=(i*gn-r*_n-o*Kt)*ln,e[2]=(pe*St-De*ot+Re*at)*ln,e[3]=(k*ot-S*St-V*at)*ln,e[4]=(g*rn-d*_n-_*Ht)*ln,e[5]=(t*_n-i*rn+o*Ht)*ln,e[6]=(De*Be-ne*St-Re*ke)*ln,e[7]=(w*St-k*Be+V*ke)*ln,e[8]=(d*gn-f*rn+_*yt)*ln,e[9]=(r*rn-t*gn-o*yt)*ln,e[10]=(ne*ot-pe*Be+Re*Fe)*ln,e[11]=(S*Be-w*ot-V*Fe)*ln,e[12]=(f*Ht-d*Kt-g*yt)*ln,e[13]=(t*Kt-r*Ht+i*yt)*ln,e[14]=(pe*ke-ne*at-De*Fe)*ln,e[15]=(w*at-S*ke+k*Fe)*ln,e):null},adjoint:function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],d=n[4],f=n[5],g=n[6],_=n[7],w=n[8],S=n[9],k=n[10],V=n[11],ne=n[12],pe=n[13],De=n[14],Re=n[15];return e[0]=f*(k*Re-V*De)-S*(g*Re-_*De)+pe*(g*V-_*k),e[1]=-(r*(k*Re-V*De)-S*(i*Re-o*De)+pe*(i*V-o*k)),e[2]=r*(g*Re-_*De)-f*(i*Re-o*De)+pe*(i*_-o*g),e[3]=-(r*(g*V-_*k)-f*(i*V-o*k)+S*(i*_-o*g)),e[4]=-(d*(k*Re-V*De)-w*(g*Re-_*De)+ne*(g*V-_*k)),e[5]=t*(k*Re-V*De)-w*(i*Re-o*De)+ne*(i*V-o*k),e[6]=-(t*(g*Re-_*De)-d*(i*Re-o*De)+ne*(i*_-o*g)),e[7]=t*(g*V-_*k)-d*(i*V-o*k)+w*(i*_-o*g),e[8]=d*(S*Re-V*pe)-w*(f*Re-_*pe)+ne*(f*V-_*S),e[9]=-(t*(S*Re-V*pe)-w*(r*Re-o*pe)+ne*(r*V-o*S)),e[10]=t*(f*Re-_*pe)-d*(r*Re-o*pe)+ne*(r*_-o*f),e[11]=-(t*(f*V-_*S)-d*(r*V-o*S)+w*(r*_-o*f)),e[12]=-(d*(S*De-k*pe)-w*(f*De-g*pe)+ne*(f*k-g*S)),e[13]=t*(S*De-k*pe)-w*(r*De-i*pe)+ne*(r*k-i*S),e[14]=-(t*(f*De-g*pe)-d*(r*De-i*pe)+ne*(r*g-i*f)),e[15]=t*(f*k-g*S)-d*(r*k-i*S)+w*(r*g-i*f),e},determinant:function(e){var n=e[0],t=e[1],r=e[2],i=e[3],o=e[4],d=e[5],f=e[6],g=e[7],_=e[8],w=e[9],S=e[10],k=e[11],V=e[12],ne=e[13],pe=e[14],De=e[15];return(n*d-t*o)*(S*De-k*pe)-(n*f-r*o)*(w*De-k*ne)+(n*g-i*o)*(w*pe-S*ne)+(t*f-r*d)*(_*De-k*V)-(t*g-i*d)*(_*pe-S*V)+(r*g-i*f)*(_*ne-w*V)},multiply:function(e,n,t){var r=n[0],i=n[1],o=n[2],d=n[3],f=n[4],g=n[5],_=n[6],w=n[7],S=n[8],k=n[9],V=n[10],ne=n[11],pe=n[12],De=n[13],Re=n[14],Fe=n[15],ke=t[0],Be=t[1],at=t[2],ot=t[3];return e[0]=ke*r+Be*f+at*S+ot*pe,e[1]=ke*i+Be*g+at*k+ot*De,e[2]=ke*o+Be*_+at*V+ot*Re,e[3]=ke*d+Be*w+at*ne+ot*Fe,e[4]=(ke=t[4])*r+(Be=t[5])*f+(at=t[6])*S+(ot=t[7])*pe,e[5]=ke*i+Be*g+at*k+ot*De,e[6]=ke*o+Be*_+at*V+ot*Re,e[7]=ke*d+Be*w+at*ne+ot*Fe,e[8]=(ke=t[8])*r+(Be=t[9])*f+(at=t[10])*S+(ot=t[11])*pe,e[9]=ke*i+Be*g+at*k+ot*De,e[10]=ke*o+Be*_+at*V+ot*Re,e[11]=ke*d+Be*w+at*ne+ot*Fe,e[12]=(ke=t[12])*r+(Be=t[13])*f+(at=t[14])*S+(ot=t[15])*pe,e[13]=ke*i+Be*g+at*k+ot*De,e[14]=ke*o+Be*_+at*V+ot*Re,e[15]=ke*d+Be*w+at*ne+ot*Fe,e},multiplyAffine:function(e,n,t){var r=n[0],i=n[1],o=n[2],d=n[4],f=n[5],g=n[6],_=n[8],w=n[9],S=n[10],k=n[12],V=n[13],ne=n[14],pe=t[0],De=t[1],Re=t[2];return e[0]=pe*r+De*d+Re*_,e[1]=pe*i+De*f+Re*w,e[2]=pe*o+De*g+Re*S,e[4]=(pe=t[4])*r+(De=t[5])*d+(Re=t[6])*_,e[5]=pe*i+De*f+Re*w,e[6]=pe*o+De*g+Re*S,e[8]=(pe=t[8])*r+(De=t[9])*d+(Re=t[10])*_,e[9]=pe*i+De*f+Re*w,e[10]=pe*o+De*g+Re*S,e[12]=(pe=t[12])*r+(De=t[13])*d+(Re=t[14])*_+k,e[13]=pe*i+De*f+Re*w+V,e[14]=pe*o+De*g+Re*S+ne,e}};Qi.mul=Qi.multiply,Qi.mulAffine=Qi.multiplyAffine,Qi.translate=function(e,n,t){var d,f,g,_,w,S,k,V,ne,pe,De,Re,r=t[0],i=t[1],o=t[2];return n===e?(e[12]=n[0]*r+n[4]*i+n[8]*o+n[12],e[13]=n[1]*r+n[5]*i+n[9]*o+n[13],e[14]=n[2]*r+n[6]*i+n[10]*o+n[14],e[15]=n[3]*r+n[7]*i+n[11]*o+n[15]):(f=n[1],g=n[2],_=n[3],w=n[4],S=n[5],k=n[6],V=n[7],ne=n[8],pe=n[9],De=n[10],Re=n[11],e[0]=d=n[0],e[1]=f,e[2]=g,e[3]=_,e[4]=w,e[5]=S,e[6]=k,e[7]=V,e[8]=ne,e[9]=pe,e[10]=De,e[11]=Re,e[12]=d*r+w*i+ne*o+n[12],e[13]=f*r+S*i+pe*o+n[13],e[14]=g*r+k*i+De*o+n[14],e[15]=_*r+V*i+Re*o+n[15]),e},Qi.scale=function(e,n,t){var r=t[0],i=t[1],o=t[2];return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=n[3]*r,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=n[7]*i,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=n[11]*o,e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e},Qi.rotate=function(e,n,t,r){var g,_,w,S,k,V,ne,pe,De,Re,Fe,ke,Be,at,ot,St,yt,Ht,rn,Kt,gn,_n,ln,Dn,i=r[0],o=r[1],d=r[2],f=Math.sqrt(i*i+o*o+d*d);return Math.abs(f)<g2?null:(i*=f=1/f,o*=f,d*=f,g=Math.sin(t),_=Math.cos(t),k=n[1],V=n[2],ne=n[3],De=n[5],Re=n[6],Fe=n[7],Be=n[9],at=n[10],ot=n[11],rn=i*o*(w=1-_)-d*g,Kt=o*o*w+_,gn=d*o*w+i*g,_n=i*d*w+o*g,ln=o*d*w-i*g,Dn=d*d*w+_,e[0]=(S=n[0])*(St=i*i*w+_)+(pe=n[4])*(yt=o*i*w+d*g)+(ke=n[8])*(Ht=d*i*w-o*g),e[1]=k*St+De*yt+Be*Ht,e[2]=V*St+Re*yt+at*Ht,e[3]=ne*St+Fe*yt+ot*Ht,e[4]=S*rn+pe*Kt+ke*gn,e[5]=k*rn+De*Kt+Be*gn,e[6]=V*rn+Re*Kt+at*gn,e[7]=ne*rn+Fe*Kt+ot*gn,e[8]=S*_n+pe*ln+ke*Dn,e[9]=k*_n+De*ln+Be*Dn,e[10]=V*_n+Re*ln+at*Dn,e[11]=ne*_n+Fe*ln+ot*Dn,n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e)},Qi.rotateX=function(e,n,t){var r=Math.sin(t),i=Math.cos(t),o=n[4],d=n[5],f=n[6],g=n[7],_=n[8],w=n[9],S=n[10],k=n[11];return n!==e&&(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[4]=o*i+_*r,e[5]=d*i+w*r,e[6]=f*i+S*r,e[7]=g*i+k*r,e[8]=_*i-o*r,e[9]=w*i-d*r,e[10]=S*i-f*r,e[11]=k*i-g*r,e},Qi.rotateY=function(e,n,t){var r=Math.sin(t),i=Math.cos(t),o=n[0],d=n[1],f=n[2],g=n[3],_=n[8],w=n[9],S=n[10],k=n[11];return n!==e&&(e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[0]=o*i-_*r,e[1]=d*i-w*r,e[2]=f*i-S*r,e[3]=g*i-k*r,e[8]=o*r+_*i,e[9]=d*r+w*i,e[10]=f*r+S*i,e[11]=g*r+k*i,e},Qi.rotateZ=function(e,n,t){var r=Math.sin(t),i=Math.cos(t),o=n[0],d=n[1],f=n[2],g=n[3],_=n[4],w=n[5],S=n[6],k=n[7];return n!==e&&(e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[0]=o*i+_*r,e[1]=d*i+w*r,e[2]=f*i+S*r,e[3]=g*i+k*r,e[4]=_*i-o*r,e[5]=w*i-d*r,e[6]=S*i-f*r,e[7]=k*i-g*r,e},Qi.fromRotationTranslation=function(e,n,t){var r=n[0],i=n[1],o=n[2],d=n[3],f=r+r,g=i+i,_=o+o,w=r*f,S=r*g,k=r*_,V=i*g,ne=i*_,pe=o*_,De=d*f,Re=d*g,Fe=d*_;return e[0]=1-(V+pe),e[1]=S+Fe,e[2]=k-Re,e[3]=0,e[4]=S-Fe,e[5]=1-(w+pe),e[6]=ne+De,e[7]=0,e[8]=k+Re,e[9]=ne-De,e[10]=1-(w+V),e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},Qi.fromQuat=function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],d=t+t,f=r+r,g=i+i,_=t*d,w=r*d,S=r*f,k=i*d,V=i*f,ne=i*g,pe=o*d,De=o*f,Re=o*g;return e[0]=1-S-ne,e[1]=w+Re,e[2]=k-De,e[3]=0,e[4]=w-Re,e[5]=1-_-ne,e[6]=V+pe,e[7]=0,e[8]=k+De,e[9]=V-pe,e[10]=1-_-S,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},Qi.frustum=function(e,n,t,r,i,o,d){var f=1/(t-n),g=1/(i-r),_=1/(o-d);return e[0]=2*o*f,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*g,e[6]=0,e[7]=0,e[8]=(t+n)*f,e[9]=(i+r)*g,e[10]=(d+o)*_,e[11]=-1,e[12]=0,e[13]=0,e[14]=d*o*2*_,e[15]=0,e},Qi.perspective=function(e,n,t,r,i){var o=1/Math.tan(n/2),d=1/(r-i);return e[0]=o/t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*d,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*d,e[15]=0,e},Qi.ortho=function(e,n,t,r,i,o,d){var f=1/(n-t),g=1/(r-i),_=1/(o-d);return e[0]=-2*f,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*g,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*_,e[11]=0,e[12]=(n+t)*f,e[13]=(i+r)*g,e[14]=(d+o)*_,e[15]=1,e},Qi.lookAt=function(e,n,t,r){var i,o,d,f,g,_,w,S,k,V,ne=n[0],pe=n[1],De=n[2],Re=r[0],Fe=r[1],ke=r[2],Be=t[0],at=t[1],ot=t[2];return Math.abs(ne-Be)<g2&&Math.abs(pe-at)<g2&&Math.abs(De-ot)<g2?Qi.identity(e):(w=ne-Be,S=pe-at,k=De-ot,i=Fe*(k*=V=1/Math.sqrt(w*w+S*S+k*k))-ke*(S*=V),o=ke*(w*=V)-Re*k,d=Re*S-Fe*w,(V=Math.sqrt(i*i+o*o+d*d))?(i*=V=1/V,o*=V,d*=V):(i=0,o=0,d=0),f=S*d-k*o,g=k*i-w*d,_=w*o-S*i,(V=Math.sqrt(f*f+g*g+_*_))?(f*=V=1/V,g*=V,_*=V):(f=0,g=0,_=0),e[0]=i,e[1]=f,e[2]=w,e[3]=0,e[4]=o,e[5]=g,e[6]=S,e[7]=0,e[8]=d,e[9]=_,e[10]=k,e[11]=0,e[12]=-(i*ne+o*pe+d*De),e[13]=-(f*ne+g*pe+_*De),e[14]=-(w*ne+S*pe+k*De),e[15]=1,e)},Qi.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))};const In=Qi;var Mr={create:function(){var e=new Jo(3);return e[0]=0,e[1]=0,e[2]=0,e},clone:function(e){var n=new Jo(3);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n},fromValues:function(e,n,t){var r=new Jo(3);return r[0]=e,r[1]=n,r[2]=t,r},copy:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e},set:function(e,n,t,r){return e[0]=n,e[1]=t,e[2]=r,e},add:function(e,n,t){return e[0]=n[0]+t[0],e[1]=n[1]+t[1],e[2]=n[2]+t[2],e},subtract:function(e,n,t){return e[0]=n[0]-t[0],e[1]=n[1]-t[1],e[2]=n[2]-t[2],e}};Mr.sub=Mr.subtract,Mr.multiply=function(e,n,t){return e[0]=n[0]*t[0],e[1]=n[1]*t[1],e[2]=n[2]*t[2],e},Mr.mul=Mr.multiply,Mr.divide=function(e,n,t){return e[0]=n[0]/t[0],e[1]=n[1]/t[1],e[2]=n[2]/t[2],e},Mr.div=Mr.divide,Mr.min=function(e,n,t){return e[0]=Math.min(n[0],t[0]),e[1]=Math.min(n[1],t[1]),e[2]=Math.min(n[2],t[2]),e},Mr.max=function(e,n,t){return e[0]=Math.max(n[0],t[0]),e[1]=Math.max(n[1],t[1]),e[2]=Math.max(n[2],t[2]),e},Mr.scale=function(e,n,t){return e[0]=n[0]*t,e[1]=n[1]*t,e[2]=n[2]*t,e},Mr.scaleAndAdd=function(e,n,t,r){return e[0]=n[0]+t[0]*r,e[1]=n[1]+t[1]*r,e[2]=n[2]+t[2]*r,e},Mr.distance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1],i=n[2]-e[2];return Math.sqrt(t*t+r*r+i*i)},Mr.dist=Mr.distance,Mr.squaredDistance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1],i=n[2]-e[2];return t*t+r*r+i*i},Mr.sqrDist=Mr.squaredDistance,Mr.length=function(e){var n=e[0],t=e[1],r=e[2];return Math.sqrt(n*n+t*t+r*r)},Mr.len=Mr.length,Mr.squaredLength=function(e){var n=e[0],t=e[1],r=e[2];return n*n+t*t+r*r},Mr.sqrLen=Mr.squaredLength,Mr.negate=function(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e},Mr.inverse=function(e,n){return e[0]=1/n[0],e[1]=1/n[1],e[2]=1/n[2],e},Mr.normalize=function(e,n){var t=n[0],r=n[1],i=n[2],o=t*t+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=n[0]*o,e[1]=n[1]*o,e[2]=n[2]*o),e},Mr.dot=function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]},Mr.cross=function(e,n,t){var r=n[0],i=n[1],o=n[2],d=t[0],f=t[1],g=t[2];return e[0]=i*g-o*f,e[1]=o*d-r*g,e[2]=r*f-i*d,e},Mr.lerp=function(e,n,t,r){var i=n[0],o=n[1],d=n[2];return e[0]=i+r*(t[0]-i),e[1]=o+r*(t[1]-o),e[2]=d+r*(t[2]-d),e},Mr.random=function(e,n){n=n||1;var t=2*Iy()*Math.PI,r=2*Iy()-1,i=Math.sqrt(1-r*r)*n;return e[0]=Math.cos(t)*i,e[1]=Math.sin(t)*i,e[2]=r*n,e},Mr.transformMat4=function(e,n,t){var r=n[0],i=n[1],o=n[2],d=t[3]*r+t[7]*i+t[11]*o+t[15];return e[0]=(t[0]*r+t[4]*i+t[8]*o+t[12])/(d=d||1),e[1]=(t[1]*r+t[5]*i+t[9]*o+t[13])/d,e[2]=(t[2]*r+t[6]*i+t[10]*o+t[14])/d,e},Mr.transformMat3=function(e,n,t){var r=n[0],i=n[1],o=n[2];return e[0]=r*t[0]+i*t[3]+o*t[6],e[1]=r*t[1]+i*t[4]+o*t[7],e[2]=r*t[2]+i*t[5]+o*t[8],e},Mr.transformQuat=function(e,n,t){var r=n[0],i=n[1],o=n[2],d=t[0],f=t[1],g=t[2],_=t[3],w=_*r+f*o-g*i,S=_*i+g*r-d*o,k=_*o+d*i-f*r,V=-d*r-f*i-g*o;return e[0]=w*_+V*-d+S*-g-k*-f,e[1]=S*_+V*-f+k*-d-w*-g,e[2]=k*_+V*-g+w*-f-S*-d,e},Mr.rotateX=function(e,n,t,r){var i=[],o=[];return i[0]=n[0]-t[0],i[1]=n[1]-t[1],i[2]=n[2]-t[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=o[0]+t[0],e[1]=o[1]+t[1],e[2]=o[2]+t[2],e},Mr.rotateY=function(e,n,t,r){var i=[],o=[];return i[0]=n[0]-t[0],i[1]=n[1]-t[1],i[2]=n[2]-t[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=o[0]+t[0],e[1]=o[1]+t[1],e[2]=o[2]+t[2],e},Mr.rotateZ=function(e,n,t,r){var i=[],o=[];return i[0]=n[0]-t[0],i[1]=n[1]-t[1],i[2]=n[2]-t[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],e[0]=o[0]+t[0],e[1]=o[1]+t[1],e[2]=o[2]+t[2],e},Mr.forEach=function(){var e=Mr.create();return function(n,t,r,i,o,d){var f,g;for(t||(t=3),r||(r=0),g=i?Math.min(i*t+r,n.length):n.length,f=r;f<g;f+=t)e[0]=n[f],e[1]=n[f+1],e[2]=n[f+2],o(e,e,d),n[f]=e[0],n[f+1]=e[1],n[f+2]=e[2];return n}}(),Mr.angle=function(e,n){var t=Mr.fromValues(e[0],e[1],e[2]),r=Mr.fromValues(n[0],n[1],n[2]);Mr.normalize(t,t),Mr.normalize(r,r);var i=Mr.dot(t,r);return i>1?0:Math.acos(i)};const Et=Mr;Yn.import(k6);var ca=In.create,N6={};function F6(e){return e.material}function Kte(e,n,t){return n.uniforms[t].value}function Qte(e,n,t,r){return t!==r}function qte(e){return!0}function B6(){}var V6={float:5126,byte:5120,ubyte:5121,short:5122,ushort:5123};function Jte(e,n,t){this.availableAttributes=e,this.availableAttributeSymbols=n,this.indicesBuffer=t,this.vao=null}function ene(e){var n,t;this.bind=function(r){n||((n=oo.createCanvas()).width=n.height=1,n.getContext("2d"));var i=r.gl,o=!t;o&&(t=i.createTexture()),i.bindTexture(i.TEXTURE_2D,t),o&&i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n)},this.unbind=function(r){r.gl.bindTexture(r.gl.TEXTURE_2D,null)},this.isRenderable=function(){return!0}}var Nf=Us.extend(function(){return{canvas:null,_width:100,_height:100,devicePixelRatio:typeof window<"u"&&window.devicePixelRatio||1,clearColor:[0,0,0,0],clearBit:17664,alpha:!0,depth:!0,stencil:!1,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!1,throwError:!0,gl:null,viewport:{},maxJointNumber:20,__currentFrameBuffer:null,_viewportStack:[],_clearStack:[],_sceneRendering:null}},function(){this.canvas||(this.canvas=oo.createCanvas());var e=this.canvas;try{var n={alpha:this.alpha,depth:this.depth,stencil:this.stencil,antialias:this.antialias,premultipliedAlpha:this.premultipliedAlpha,preserveDrawingBuffer:this.preserveDrawingBuffer};if(this.gl=e.getContext("webgl",n)||e.getContext("experimental-webgl",n),!this.gl)throw new Error;this._glinfo=new Ete(this.gl),this.gl.targetRenderer&&console.error("Already created a renderer"),this.gl.targetRenderer=this,this.resize()}catch(t){throw"Error creating WebGL Context "+t}this._programMgr=new Gte(this),this._placeholderTexture=new ene(this)},{resize:function(e,n){var t=this.canvas,r=this.devicePixelRatio;null!=e?(t.style&&(t.style.width=e+"px",t.style.height=n+"px"),t.width=e*r,t.height=n*r,this._width=e,this._height=n):(this._width=t.width/r,this._height=t.height/r),this.setViewport(0,0,this._width,this._height)},getWidth:function(){return this._width},getHeight:function(){return this._height},getViewportAspect:function(){var e=this.viewport;return e.width/e.height},setDevicePixelRatio:function(e){this.devicePixelRatio=e,this.resize(this._width,this._height)},getDevicePixelRatio:function(){return this.devicePixelRatio},getGLExtension:function(e){return this._glinfo.getExtension(e)},getGLParameter:function(e){return this._glinfo.getParameter(e)},setViewport:function(e,n,t,r,i){if("object"==typeof e){var o=e;e=o.x,n=o.y,t=o.width,r=o.height,i=o.devicePixelRatio}this.gl.viewport(e*(i=i||this.devicePixelRatio),n*i,t*i,r*i),this.viewport={x:e,y:n,width:t,height:r,devicePixelRatio:i}},saveViewport:function(){this._viewportStack.push(this.viewport)},restoreViewport:function(){this._viewportStack.length>0&&this.setViewport(this._viewportStack.pop())},saveClear:function(){this._clearStack.push({clearBit:this.clearBit,clearColor:this.clearColor})},restoreClear:function(){if(this._clearStack.length>0){var e=this._clearStack.pop();this.clearColor=e.clearColor,this.clearBit=e.clearBit}},bindSceneRendering:function(e){this._sceneRendering=e},render:function(e,n,t,r){var i=this.gl,o=this.clearColor;if(this.clearBit){i.colorMask(!0,!0,!0,!0),i.depthMask(!0);var d=this.viewport,f=!1,g=d.devicePixelRatio;(d.width!==this._width||d.height!==this._height||g&&g!==this.devicePixelRatio||d.x||d.y)&&(f=!0,i.enable(i.SCISSOR_TEST),i.scissor(d.x*g,d.y*g,d.width*g,d.height*g)),i.clearColor(o[0],o[1],o[2],o[3]),i.clear(this.clearBit),f&&i.disable(i.SCISSOR_TEST)}if(t||e.update(!1),e.updateLights(),n=n||e.getMainCamera()){n.update();var _=e.updateRenderList(n,!0);this._sceneRendering=e;var w=_.opaque,S=_.transparent,k=e.material;e.trigger("beforerender",this,e,n,_),r?(this.renderPreZ(w,e,n),i.depthFunc(i.LEQUAL)):i.depthFunc(i.LESS);for(var V=ca(),ne=Et.create(),pe=0;pe<S.length;pe++){var De=S[pe];In.multiplyAffine(V,n.viewMatrix.array,De.worldTransform.array),Et.transformMat4(ne,De.position.array,V),De.__depth=ne[2]}this.renderPass(w,n,{getMaterial:function(Re){return k||Re.material},sortCompare:this.opaqueSortCompare}),this.renderPass(S,n,{getMaterial:function(Re){return k||Re.material},sortCompare:this.transparentSortCompare}),e.trigger("afterrender",this,e,n,_),this._sceneRendering=null}else console.error("Can't find camera in the scene.")},getProgram:function(e,n,t){return this._programMgr.getProgram(e,n=n||e.material,t)},validateProgram:function(e){if(e.__error){var n=e.__error;if(N6[e.__uid__])return;if(N6[e.__uid__]=!0,this.throwError)throw new Error(n);this.trigger("error",n)}},updatePrograms:function(e,n,t){var r=t&&t.getMaterial||F6;n=n||null;for(var i=0;i<e.length;i++){var o=e[i],d=r.call(this,o);if(i>0){var f=e[i-1];if((o.joints?o.joints.length:0)===(f.joints?f.joints.length:0)&&o.material===f.material&&o.lightGroup===f.lightGroup){o.__program=f.__program;continue}}var w=this._programMgr.getProgram(o,d,n);this.validateProgram(w),o.__program=w}},renderPass:function(e,n,t){this.trigger("beforerenderpass",this,e,n,t),(t=t||{}).getMaterial=t.getMaterial||F6,t.getUniform=t.getUniform||Kte,t.isMaterialChanged=t.isMaterialChanged||Qte,t.beforeRender=t.beforeRender||B6,t.afterRender=t.afterRender||B6;var r=t.ifRender||qte;this.updatePrograms(e,this._sceneRendering,t),t.sortCompare&&e.sort(t.sortCompare);var i=this.viewport,o=i.devicePixelRatio,d=[i.x*o,i.y*o,i.width*o,i.height*o],f=this.devicePixelRatio,g=this.__currentFrameBuffer?[this.__currentFrameBuffer.getTextureWidth(),this.__currentFrameBuffer.getTextureHeight()]:[this._width*f,this._height*f],_=[d[2],d[3]],w=Date.now();n?(In.copy(ua.VIEW,n.viewMatrix.array),In.copy(ua.PROJECTION,n.projectionMatrix.array),In.copy(ua.VIEWINVERSE,n.worldTransform.array)):(In.identity(ua.VIEW),In.identity(ua.PROJECTION),In.identity(ua.VIEWINVERSE)),In.multiply(ua.VIEWPROJECTION,ua.PROJECTION,ua.VIEW),In.invert(ua.PROJECTIONINVERSE,ua.PROJECTION),In.invert(ua.VIEWPROJECTIONINVERSE,ua.VIEWPROJECTION);for(var V,ne,pe,De,Re,Fe,ke,Be,at,ot,St,yt,S=this.gl,k=this._sceneRendering,rn=0;rn<e.length;rn++){var _n,Kt=e[rn],gn=null!=Kt.worldTransform;if(r(Kt)){gn&&(_n=Kt.isSkinnedMesh&&Kt.isSkinnedMesh()?Kt.offsetMatrix?Kt.offsetMatrix.array:ua.IDENTITY:Kt.worldTransform.array);var ln=Kt.geometry,Dn=t.getMaterial.call(this,Kt),jt=Kt.__program,cn=Dn.shader,Yt=ln.__uid__+"-"+jt.__uid__,Jn=Yt!==ot;ot=Yt,gn&&(In.copy(ua.WORLD,_n),In.multiply(ua.WORLDVIEWPROJECTION,ua.VIEWPROJECTION,_n),In.multiplyAffine(ua.WORLDVIEW,ua.VIEW,_n),(cn.matrixSemantics.WORLDINVERSE||cn.matrixSemantics.WORLDINVERSETRANSPOSE)&&In.invert(ua.WORLDINVERSE,_n),(cn.matrixSemantics.WORLDVIEWINVERSE||cn.matrixSemantics.WORLDVIEWINVERSETRANSPOSE)&&In.invert(ua.WORLDVIEWINVERSE,ua.WORLDVIEW),(cn.matrixSemantics.WORLDVIEWPROJECTIONINVERSE||cn.matrixSemantics.WORLDVIEWPROJECTIONINVERSETRANSPOSE)&&In.invert(ua.WORLDVIEWPROJECTIONINVERSE,ua.WORLDVIEWPROJECTION)),Kt.beforeRender&&Kt.beforeRender(this),t.beforeRender.call(this,Kt,Dn,V);var Ln=jt!==ne;Ln?(jt.bind(this),jt.setUniformOfSemantic(S,"VIEWPORT",d),jt.setUniformOfSemantic(S,"WINDOW_SIZE",g),n&&(jt.setUniformOfSemantic(S,"NEAR",n.near),jt.setUniformOfSemantic(S,"FAR",n.far)),jt.setUniformOfSemantic(S,"DEVICEPIXELRATIO",o),jt.setUniformOfSemantic(S,"TIME",w),jt.setUniformOfSemantic(S,"VIEWPORT_SIZE",_),k&&k.setLightUniforms(jt,Kt.lightGroup,this)):jt=ne,(Ln||t.isMaterialChanged(Kt,pe,Dn,V))&&(Dn.depthTest!==De&&(Dn.depthTest?S.enable(S.DEPTH_TEST):S.disable(S.DEPTH_TEST),De=Dn.depthTest),Dn.depthMask!==Re&&(S.depthMask(Dn.depthMask),Re=Dn.depthMask),Dn.transparent!==at&&(Dn.transparent?S.enable(S.BLEND):S.disable(S.BLEND),at=Dn.transparent),Dn.transparent&&(Dn.blend?Dn.blend(S):(S.blendEquationSeparate(S.FUNC_ADD,S.FUNC_ADD),S.blendFuncSeparate(S.SRC_ALPHA,S.ONE_MINUS_SRC_ALPHA,S.ONE,S.ONE_MINUS_SRC_ALPHA))),yt=this._bindMaterial(Kt,Dn,jt,pe||null,V||null,ne||null,t.getUniform),V=Dn);var oi=cn.matrixSemanticKeys;if(gn)for(var Nr=0;Nr<oi.length;Nr++){var Mi=oi[Nr],Ir=cn.matrixSemantics[Mi],ei=ua[Mi];Ir.isTranspose&&In.transpose(ei,ua[Ir.semanticNoTranspose]),jt.setUniform(S,Ir.type,Ir.symbol,ei)}Kt.cullFace!==ke&&S.cullFace(ke=Kt.cullFace),Kt.frontFace!==Be&&S.frontFace(Be=Kt.frontFace),Kt.culling!==Fe&&((Fe=Kt.culling)?S.enable(S.CULL_FACE):S.disable(S.CULL_FACE)),this._updateSkeleton(Kt,jt,yt),Jn&&(St=this._bindVAO(null,cn,ln,jt)),this._renderObject(Kt,St,jt),t.afterRender(this,Kt),Kt.afterRender&&Kt.afterRender(this),ne=jt,pe=Kt}}this.trigger("afterrenderpass",this,e,n,t)},getMaxJointNumber:function(){return this.maxJointNumber},_updateSkeleton:function(e,n,t){var r=this.gl,i=e.skeleton;if(i)if(i.update(),e.joints.length>this.getMaxJointNumber()){var o=i.getSubSkinMatricesTexture(e.__uid__,e.joints);n.useTextureSlot(this,o,t),n.setUniform(r,"1i","skinMatricesTexture",t),n.setUniform(r,"1f","skinMatricesTextureSize",o.width)}else{var d=i.getSubSkinMatrices(e.__uid__,e.joints);n.setUniformOfSemantic(r,"SKIN_MATRIX",d)}},_renderObject:function(e,n,t){var r=this.gl,i=e.geometry,o=e.mode;null==o&&(o=4);var d=null,f=e.isInstancedMesh&&e.isInstancedMesh();if(!f||(d=this.getGLExtension("ANGLE_instanced_arrays"))){var g;if(f&&(g=this._bindInstancedAttributes(e,t,d)),n.indicesBuffer){var S=this.getGLExtension("OES_element_index_uint")&&i.indices instanceof Uint32Array?r.UNSIGNED_INT:r.UNSIGNED_SHORT;f?d.drawElementsInstancedANGLE(o,n.indicesBuffer.count,S,0,e.getInstanceCount()):r.drawElements(o,n.indicesBuffer.count,S,0)}else f?d.drawArraysInstancedANGLE(o,0,i.vertexCount,e.getInstanceCount()):r.drawArrays(o,0,i.vertexCount);if(f)for(var k=0;k<g.length;k++)r.disableVertexAttribArray(g[k])}else console.warn("Device not support ANGLE_instanced_arrays extension")},_bindInstancedAttributes:function(e,n,t){for(var r=this.gl,i=e.getInstancedAttributesBuffers(this),o=[],d=0;d<i.length;d++){var f=i[d],g=n.getAttribLocation(r,f.symbol);if(!(g<0)){var _=V6[f.type]||r.FLOAT;r.enableVertexAttribArray(g),r.bindBuffer(r.ARRAY_BUFFER,f.buffer),r.vertexAttribPointer(g,f.size,_,!1,0,0),t.vertexAttribDivisorANGLE(g,f.divisor),o.push(g)}}return o},_bindMaterial:function(e,n,t,r,i,o,d){for(var f=this.gl,g=o===t,_=t.currentTextureSlot(),w=n.getEnabledUniforms(),S=n.getTextureUniforms(),k=this._placeholderTexture,V=0;V<S.length;V++){var pe=d(e,n,ne=S[V]);if("t"===(De=n.uniforms[ne].type)&&pe)pe.__slot=-1;else if("tv"===De)for(var Re=0;Re<pe.length;Re++)pe[Re]&&(pe[Re].__slot=-1)}for(k.__slot=-1,V=0;V<w.length;V++){var ne,De,Fe=n.uniforms[ne=w[V]],ke=(pe=d(e,n,ne),"t"===(De=Fe.type));if(ke&&(!pe||!pe.isRenderable())&&(pe=k),i&&g){var Be=d(r,i,ne);if(ke&&(!Be||!Be.isRenderable())&&(Be=k),Be===pe){if(ke)t.takeCurrentTextureSlot(this,null);else if("tv"===De&&pe)for(Re=0;Re<pe.length;Re++)t.takeCurrentTextureSlot(this,null);continue}}if(null!=pe)if(ke)if(pe.__slot<0){var at=t.currentTextureSlot();t.setUniform(f,"1i",ne,at)&&(t.takeCurrentTextureSlot(this,pe),pe.__slot=at)}else t.setUniform(f,"1i",ne,pe.__slot);else if(Array.isArray(pe)){if(0===pe.length)continue;if("tv"===De){if(!t.hasUniform(ne))continue;var St=[];for(Re=0;Re<pe.length;Re++){var yt=pe[Re];yt.__slot<0?(at=t.currentTextureSlot(),St.push(at),t.takeCurrentTextureSlot(this,yt),yt.__slot=at):St.push(yt.__slot)}t.setUniform(f,"1iv",ne,St)}else t.setUniform(f,Fe.type,ne,pe)}else t.setUniform(f,Fe.type,ne,pe)}var Ht=t.currentTextureSlot();return t.resetTextureSlot(_),Ht},_bindVAO:function(e,n,t,r){var i=!t.dynamic,o=this.gl,d=this.__uid__+"-"+r.__uid__,f=t.__vaoCache[d];if(!f){var g=t.getBufferChunks(this);if(!g||!g.length)return;for(var _=g[0],w=_.attributeBuffers,Be=_.indicesBuffer,ke=[],S=[],k=0;k<w.length;k++){var De,pe=(V=w[k]).semantic;if(pe){var Re=n.attributeSemantics[pe];De=Re&&Re.symbol}else De=V.name;De&&r.attributes[De]&&(ke.push(V),S.push(De))}f=new Jte(ke,S,Be),i&&(t.__vaoCache[d]=f)}var Fe=!0;if(e&&i&&(null==f.vao?f.vao=e.createVertexArrayOES():Fe=!1,e.bindVertexArrayOES(f.vao)),ke=f.availableAttributes,Be=f.indicesBuffer,Fe){var at=r.enableAttributes(this,f.availableAttributeSymbols,e&&i&&f);for(k=0;k<ke.length;k++){var ot=at[k];if(-1!==ot){var V,yt=(V=ke[k]).size,Ht=V6[V.type]||o.FLOAT;o.bindBuffer(o.ARRAY_BUFFER,V.buffer),o.vertexAttribPointer(ot,yt,Ht,!1,0,0)}}t.isUseIndices()&&o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,Be.buffer)}return f},renderPreZ:function(e,n,t){var r=this.gl,i=this._prezMaterial||new Sc({shader:new Yn(Yn.source("clay.prez.vertex"),Yn.source("clay.prez.fragment"))});this._prezMaterial=i,r.colorMask(!1,!1,!1,!1),r.depthMask(!0),this.renderPass(e,t,{ifRender:function(o){return!o.ignorePreZ},isMaterialChanged:function(o,d){var f=o.material,g=d.material;return f.get("diffuseMap")!==g.get("diffuseMap")||(f.get("alphaCutoff")||0)!==(g.get("alphaCutoff")||0)},getUniform:function(o,d,f){return"alphaMap"===f?o.material.get("diffuseMap"):"alphaCutoff"===f?o.material.isDefined("fragment","ALPHA_TEST")&&o.material.get("diffuseMap")&&o.material.get("alphaCutoff")||0:"uvRepeat"===f?o.material.get("uvRepeat"):"uvOffset"===f?o.material.get("uvOffset"):d.get(f)},getMaterial:function(){return i},sort:this.opaqueSortCompare}),r.colorMask(!0,!0,!0,!0),r.depthMask(!0)},disposeScene:function(e){this.disposeNode(e,!0,!0),e.dispose()},disposeNode:function(e,n,t){e.getParent()&&e.getParent().remove(e);var r={};e.traverse(function(i){var o=i.material;if(i.geometry&&n&&i.geometry.dispose(this),t&&o&&!r[o.__uid__]){for(var d=o.getTextureUniforms(),f=0;f<d.length;f++){var g=d[f],_=o.uniforms[g].value,w=o.uniforms[g].type;if(_)if("t"===w)_.dispose&&_.dispose(this);else if("tv"===w)for(var S=0;S<_.length;S++)_[S]&&_[S].dispose&&_[S].dispose(this)}r[o.__uid__]=!0}i.dispose&&i.dispose(this)},this)},disposeGeometry:function(e){e.dispose(this)},disposeTexture:function(e){e.dispose(this)},disposeFrameBuffer:function(e){e.dispose(this)},dispose:function(){},screenToNDC:function(e,n,t){t||(t=new Fl),n=this._height-n;var r=this.viewport,i=t.array;return i[0]=(e-r.x)/r.width,i[0]=2*i[0]-1,i[1]=(n-r.y)/r.height,i[1]=2*i[1]-1,t}});Nf.opaqueSortCompare=Nf.prototype.opaqueSortCompare=function(e,n){return e.renderOrder===n.renderOrder?e.__program===n.__program?e.material===n.material?e.geometry.__uid__-n.geometry.__uid__:e.material.__uid__-n.material.__uid__:e.__program&&n.__program?e.__program.__uid__-n.__program.__uid__:0:e.renderOrder-n.renderOrder},Nf.transparentSortCompare=Nf.prototype.transparentSortCompare=function(e,n){return e.renderOrder===n.renderOrder?e.__depth===n.__depth?e.__program===n.__program?e.material===n.material?e.geometry.__uid__-n.geometry.__uid__:e.material.__uid__-n.material.__uid__:e.__program&&n.__program?e.__program.__uid__-n.__program.__uid__:0:e.__depth-n.__depth:e.renderOrder-n.renderOrder};var ua={IDENTITY:ca(),WORLD:ca(),VIEW:ca(),PROJECTION:ca(),WORLDVIEW:ca(),VIEWPROJECTION:ca(),WORLDVIEWPROJECTION:ca(),WORLDINVERSE:ca(),VIEWINVERSE:ca(),PROJECTIONINVERSE:ca(),WORLDVIEWINVERSE:ca(),VIEWPROJECTIONINVERSE:ca(),WORLDVIEWPROJECTIONINVERSE:ca(),WORLDTRANSPOSE:ca(),VIEWTRANSPOSE:ca(),PROJECTIONTRANSPOSE:ca(),WORLDVIEWTRANSPOSE:ca(),VIEWPROJECTIONTRANSPOSE:ca(),WORLDVIEWPROJECTIONTRANSPOSE:ca(),WORLDINVERSETRANSPOSE:ca(),VIEWINVERSETRANSPOSE:ca(),PROJECTIONINVERSETRANSPOSE:ca(),WORLDVIEWINVERSETRANSPOSE:ca(),VIEWPROJECTIONINVERSETRANSPOSE:ca(),WORLDVIEWPROJECTIONINVERSETRANSPOSE:ca()};Nf.COLOR_BUFFER_BIT=16384,Nf.DEPTH_BUFFER_BIT=256,Nf.STENCIL_BUFFER_BIT=1024;const rC=Nf;var Tr=function(e,n,t){this.array=Et.fromValues(e=e||0,n=n||0,t=t||0),this._dirty=!0};Tr.prototype={constructor:Tr,add:function(e){return Et.add(this.array,this.array,e.array),this._dirty=!0,this},set:function(e,n,t){return this.array[0]=e,this.array[1]=n,this.array[2]=t,this._dirty=!0,this},setArray:function(e){return this.array[0]=e[0],this.array[1]=e[1],this.array[2]=e[2],this._dirty=!0,this},clone:function(){return new Tr(this.x,this.y,this.z)},copy:function(e){return Et.copy(this.array,e.array),this._dirty=!0,this},cross:function(e,n){return Et.cross(this.array,e.array,n.array),this._dirty=!0,this},dist:function(e){return Et.dist(this.array,e.array)},distance:function(e){return Et.distance(this.array,e.array)},div:function(e){return Et.div(this.array,this.array,e.array),this._dirty=!0,this},divide:function(e){return Et.divide(this.array,this.array,e.array),this._dirty=!0,this},dot:function(e){return Et.dot(this.array,e.array)},len:function(){return Et.len(this.array)},length:function(){return Et.length(this.array)},lerp:function(e,n,t){return Et.lerp(this.array,e.array,n.array,t),this._dirty=!0,this},min:function(e){return Et.min(this.array,this.array,e.array),this._dirty=!0,this},max:function(e){return Et.max(this.array,this.array,e.array),this._dirty=!0,this},mul:function(e){return Et.mul(this.array,this.array,e.array),this._dirty=!0,this},multiply:function(e){return Et.multiply(this.array,this.array,e.array),this._dirty=!0,this},negate:function(){return Et.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return Et.normalize(this.array,this.array),this._dirty=!0,this},random:function(e){return Et.random(this.array,e),this._dirty=!0,this},scale:function(e){return Et.scale(this.array,this.array,e),this._dirty=!0,this},scaleAndAdd:function(e,n){return Et.scaleAndAdd(this.array,this.array,e.array,n),this._dirty=!0,this},sqrDist:function(e){return Et.sqrDist(this.array,e.array)},squaredDistance:function(e){return Et.squaredDistance(this.array,e.array)},sqrLen:function(){return Et.sqrLen(this.array)},squaredLength:function(){return Et.squaredLength(this.array)},sub:function(e){return Et.sub(this.array,this.array,e.array),this._dirty=!0,this},subtract:function(e){return Et.subtract(this.array,this.array,e.array),this._dirty=!0,this},transformMat3:function(e){return Et.transformMat3(this.array,this.array,e.array),this._dirty=!0,this},transformMat4:function(e){return Et.transformMat4(this.array,this.array,e.array),this._dirty=!0,this},transformQuat:function(e){return Et.transformQuat(this.array,this.array,e.array),this._dirty=!0,this},applyProjection:function(e){var n=this.array;if(0===(e=e.array)[15]){var t=-1/n[2];n[0]=e[0]*n[0]*t,n[1]=e[5]*n[1]*t,n[2]=(e[10]*n[2]+e[14])*t}else n[0]=e[0]*n[0]+e[12],n[1]=e[5]*n[1]+e[13],n[2]=e[10]*n[2]+e[14];return this._dirty=!0,this},eulerFromQuat:function(e,n){Tr.eulerFromQuat(this,e,n)},eulerFromMat3:function(e,n){Tr.eulerFromMat3(this,e,n)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var v2=Object.defineProperty;if(v2){var IB=Tr.prototype;v2(IB,"x",{get:function(){return this.array[0]},set:function(e){this.array[0]=e,this._dirty=!0}}),v2(IB,"y",{get:function(){return this.array[1]},set:function(e){this.array[1]=e,this._dirty=!0}}),v2(IB,"z",{get:function(){return this.array[2]},set:function(e){this.array[2]=e,this._dirty=!0}})}function Dc(e,n,t){return e<n?n:e>t?t:e}Tr.add=function(e,n,t){return Et.add(e.array,n.array,t.array),e._dirty=!0,e},Tr.set=function(e,n,t,r){Et.set(e.array,n,t,r),e._dirty=!0},Tr.copy=function(e,n){return Et.copy(e.array,n.array),e._dirty=!0,e},Tr.cross=function(e,n,t){return Et.cross(e.array,n.array,t.array),e._dirty=!0,e},Tr.distance=Tr.dist=function(e,n){return Et.distance(e.array,n.array)},Tr.divide=Tr.div=function(e,n,t){return Et.divide(e.array,n.array,t.array),e._dirty=!0,e},Tr.dot=function(e,n){return Et.dot(e.array,n.array)},Tr.len=function(e){return Et.length(e.array)},Tr.lerp=function(e,n,t,r){return Et.lerp(e.array,n.array,t.array,r),e._dirty=!0,e},Tr.min=function(e,n,t){return Et.min(e.array,n.array,t.array),e._dirty=!0,e},Tr.max=function(e,n,t){return Et.max(e.array,n.array,t.array),e._dirty=!0,e},Tr.multiply=Tr.mul=function(e,n,t){return Et.multiply(e.array,n.array,t.array),e._dirty=!0,e},Tr.negate=function(e,n){return Et.negate(e.array,n.array),e._dirty=!0,e},Tr.normalize=function(e,n){return Et.normalize(e.array,n.array),e._dirty=!0,e},Tr.random=function(e,n){return Et.random(e.array,n),e._dirty=!0,e},Tr.scale=function(e,n,t){return Et.scale(e.array,n.array,t),e._dirty=!0,e},Tr.scaleAndAdd=function(e,n,t,r){return Et.scaleAndAdd(e.array,n.array,t.array,r),e._dirty=!0,e},Tr.squaredDistance=Tr.sqrDist=function(e,n){return Et.sqrDist(e.array,n.array)},Tr.squaredLength=Tr.sqrLen=function(e){return Et.sqrLen(e.array)},Tr.subtract=Tr.sub=function(e,n,t){return Et.subtract(e.array,n.array,t.array),e._dirty=!0,e},Tr.transformMat3=function(e,n,t){return Et.transformMat3(e.array,n.array,t.array),e._dirty=!0,e},Tr.transformMat4=function(e,n,t){return Et.transformMat4(e.array,n.array,t.array),e._dirty=!0,e},Tr.transformQuat=function(e,n,t){return Et.transformQuat(e.array,n.array,t.array),e._dirty=!0,e};var Gi=Math.atan2,Mc=Math.asin,Ry=Math.abs;Tr.eulerFromQuat=function(e,n,k){e._dirty=!0;var r=e.array,i=(n=n.array)[0],o=n[1],d=n[2],f=n[3],g=i*i,_=o*o,w=d*d,S=f*f;switch(k=(k||"XYZ").toUpperCase()){case"XYZ":r[0]=Gi(2*(i*f-o*d),S-g-_+w),r[1]=Mc(Dc(2*(i*d+o*f),-1,1)),r[2]=Gi(2*(d*f-i*o),S+g-_-w);break;case"YXZ":r[0]=Mc(Dc(2*(i*f-o*d),-1,1)),r[1]=Gi(2*(i*d+o*f),S-g-_+w),r[2]=Gi(2*(i*o+d*f),S-g+_-w);break;case"ZXY":r[0]=Mc(Dc(2*(i*f+o*d),-1,1)),r[1]=Gi(2*(o*f-d*i),S-g-_+w),r[2]=Gi(2*(d*f-i*o),S-g+_-w);break;case"ZYX":r[0]=Gi(2*(i*f+d*o),S-g-_+w),r[1]=Mc(Dc(2*(o*f-i*d),-1,1)),r[2]=Gi(2*(i*o+d*f),S+g-_-w);break;case"YZX":r[0]=Gi(2*(i*f-d*o),S-g+_-w),r[1]=Gi(2*(o*f-i*d),S+g-_-w),r[2]=Mc(Dc(2*(i*o+d*f),-1,1));break;case"XZY":r[0]=Gi(2*(i*f+o*d),S-g+_-w),r[1]=Gi(2*(i*d+o*f),S+g-_-w),r[2]=Mc(Dc(2*(d*f-i*o),-1,1));break;default:console.warn("Unkown order: "+k)}return e},Tr.eulerFromMat3=function(e,n,ne){var r=n.array,i=r[0],o=r[3],d=r[6],f=r[1],g=r[4],_=r[7],w=r[2],S=r[5],k=r[8],V=e.array;switch(ne=(ne||"XYZ").toUpperCase()){case"XYZ":V[1]=Mc(Dc(d,-1,1)),Ry(d)<.99999?(V[0]=Gi(-_,k),V[2]=Gi(-o,i)):(V[0]=Gi(S,g),V[2]=0);break;case"YXZ":V[0]=Mc(-Dc(_,-1,1)),Ry(_)<.99999?(V[1]=Gi(d,k),V[2]=Gi(f,g)):(V[1]=Gi(-w,i),V[2]=0);break;case"ZXY":V[0]=Mc(Dc(S,-1,1)),Ry(S)<.99999?(V[1]=Gi(-w,k),V[2]=Gi(-o,g)):(V[1]=0,V[2]=Gi(f,i));break;case"ZYX":V[1]=Mc(-Dc(w,-1,1)),Ry(w)<.99999?(V[0]=Gi(S,k),V[2]=Gi(f,i)):(V[0]=0,V[2]=Gi(-o,g));break;case"YZX":V[2]=Mc(Dc(f,-1,1)),Ry(f)<.99999?(V[0]=Gi(-_,g),V[1]=Gi(-w,i)):(V[0]=0,V[1]=Gi(d,k));break;case"XZY":V[2]=Mc(-Dc(o,-1,1)),Ry(o)<.99999?(V[0]=Gi(S,g),V[1]=Gi(d,i)):(V[0]=Gi(-_,k),V[1]=0);break;default:console.warn("Unkown order: "+ne)}return e._dirty=!0,e},Object.defineProperties(Tr,{POSITIVE_X:{get:function(){return new Tr(1,0,0)}},NEGATIVE_X:{get:function(){return new Tr(-1,0,0)}},POSITIVE_Y:{get:function(){return new Tr(0,1,0)}},NEGATIVE_Y:{get:function(){return new Tr(0,-1,0)}},POSITIVE_Z:{get:function(){return new Tr(0,0,1)}},NEGATIVE_Z:{get:function(){return new Tr(0,0,-1)}},UP:{get:function(){return new Tr(0,1,0)}},ZERO:{get:function(){return new Tr}}});const On=Tr;var PB=1e-5,m2=function(e,n){this.origin=e||new On,this.direction=n||new On};m2.prototype={constructor:m2,intersectPlane:function(e,n){var t=e.normal.array,r=e.distance,i=this.origin.array,o=this.direction.array,d=Et.dot(t,o);if(0===d)return null;n||(n=new On);var f=(Et.dot(t,i)-r)/d;return Et.scaleAndAdd(n.array,i,o,-f),n._dirty=!0,n},mirrorAgainstPlane:function(e){var n=Et.dot(e.normal.array,this.direction.array);Et.scaleAndAdd(this.direction.array,this.direction.array,e.normal.array,2*-n),this.direction._dirty=!0},distanceToPoint:function(){var e=Et.create();return function(n){Et.sub(e,n,this.origin.array);var t=Et.dot(e,this.direction.array);if(t<0)return Et.distance(this.origin.array,n);var r=Et.lenSquared(e);return Math.sqrt(r-t*t)}}(),intersectSphere:function(){var e=Et.create();return function(n,t,r){var i=this.origin.array,o=this.direction.array;Et.sub(e,n=n.array,i);var d=Et.dot(e,o),g=Et.squaredLength(e)-d*d,_=t*t;if(!(g>_)){var w=Math.sqrt(_-g),S=d-w,k=d+w;return r||(r=new On),S<0?k<0?null:(Et.scaleAndAdd(r.array,i,o,k),r):(Et.scaleAndAdd(r.array,i,o,S),r)}}}(),intersectBoundingBox:function(e,n){var _,w,S,k,V,ne,t=this.direction.array,r=this.origin.array,i=e.min.array,o=e.max.array,d=1/t[0],f=1/t[1],g=1/t[2];if(d>=0?(_=(i[0]-r[0])*d,w=(o[0]-r[0])*d):(w=(i[0]-r[0])*d,_=(o[0]-r[0])*d),f>=0?(S=(i[1]-r[1])*f,k=(o[1]-r[1])*f):(k=(i[1]-r[1])*f,S=(o[1]-r[1])*f),_>k||S>w||((S>_||_!=_)&&(_=S),(k<w||w!=w)&&(w=k),g>=0?(V=(i[2]-r[2])*g,ne=(o[2]-r[2])*g):(ne=(i[2]-r[2])*g,V=(o[2]-r[2])*g),_>ne||V>w)||((V>_||_!=_)&&(_=V),(ne<w||w!=w)&&(w=ne),w<0))return null;var pe=_>=0?_:w;return n||(n=new On),Et.scaleAndAdd(n.array,r,t,pe),n},intersectTriangle:function(){var e=Et.create(),n=Et.create(),t=Et.create(),r=Et.create();return function(i,o,d,f,g,_){var w=this.direction.array,S=this.origin.array;d=d.array,Et.sub(e,o=o.array,i=i.array),Et.sub(n,d,i),Et.cross(r,n,w);var k=Et.dot(e,r);if(f){if(k>-PB)return null}else if(k>-PB&&k<PB)return null;Et.sub(t,S,i);var V=Et.dot(r,t)/k;if(V<0||V>1)return null;Et.cross(r,e,t);var ne=Et.dot(w,r)/k;if(ne<0||ne>1||V+ne>1)return null;Et.cross(r,e,n);var pe=-Et.dot(t,r)/k;return pe<0?null:(g||(g=new On),_&&On.set(_,1-V-ne,V,ne),Et.scaleAndAdd(g.array,S,w,pe),g)}}(),applyTransform:function(e){On.add(this.direction,this.direction,this.origin),On.transformMat4(this.origin,this.origin,e),On.transformMat4(this.direction,this.direction,e),On.sub(this.direction,this.direction,this.origin),On.normalize(this.direction,this.direction)},copy:function(e){On.copy(this.origin,e.origin),On.copy(this.direction,e.direction)},clone:function(){var e=new m2;return e.copy(this),e}};const _2=m2;var $r={create:function(){var e=new Jo(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},clone:function(e){var n=new Jo(4);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n},fromValues:function(e,n,t,r){var i=new Jo(4);return i[0]=e,i[1]=n,i[2]=t,i[3]=r,i},copy:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e},set:function(e,n,t,r,i){return e[0]=n,e[1]=t,e[2]=r,e[3]=i,e},add:function(e,n,t){return e[0]=n[0]+t[0],e[1]=n[1]+t[1],e[2]=n[2]+t[2],e[3]=n[3]+t[3],e},subtract:function(e,n,t){return e[0]=n[0]-t[0],e[1]=n[1]-t[1],e[2]=n[2]-t[2],e[3]=n[3]-t[3],e}};$r.sub=$r.subtract,$r.multiply=function(e,n,t){return e[0]=n[0]*t[0],e[1]=n[1]*t[1],e[2]=n[2]*t[2],e[3]=n[3]*t[3],e},$r.mul=$r.multiply,$r.divide=function(e,n,t){return e[0]=n[0]/t[0],e[1]=n[1]/t[1],e[2]=n[2]/t[2],e[3]=n[3]/t[3],e},$r.div=$r.divide,$r.min=function(e,n,t){return e[0]=Math.min(n[0],t[0]),e[1]=Math.min(n[1],t[1]),e[2]=Math.min(n[2],t[2]),e[3]=Math.min(n[3],t[3]),e},$r.max=function(e,n,t){return e[0]=Math.max(n[0],t[0]),e[1]=Math.max(n[1],t[1]),e[2]=Math.max(n[2],t[2]),e[3]=Math.max(n[3],t[3]),e},$r.scale=function(e,n,t){return e[0]=n[0]*t,e[1]=n[1]*t,e[2]=n[2]*t,e[3]=n[3]*t,e},$r.scaleAndAdd=function(e,n,t,r){return e[0]=n[0]+t[0]*r,e[1]=n[1]+t[1]*r,e[2]=n[2]+t[2]*r,e[3]=n[3]+t[3]*r,e},$r.distance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1],i=n[2]-e[2],o=n[3]-e[3];return Math.sqrt(t*t+r*r+i*i+o*o)},$r.dist=$r.distance,$r.squaredDistance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1],i=n[2]-e[2],o=n[3]-e[3];return t*t+r*r+i*i+o*o},$r.sqrDist=$r.squaredDistance,$r.length=function(e){var n=e[0],t=e[1],r=e[2],i=e[3];return Math.sqrt(n*n+t*t+r*r+i*i)},$r.len=$r.length,$r.squaredLength=function(e){var n=e[0],t=e[1],r=e[2],i=e[3];return n*n+t*t+r*r+i*i},$r.sqrLen=$r.squaredLength,$r.negate=function(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e[3]=-n[3],e},$r.inverse=function(e,n){return e[0]=1/n[0],e[1]=1/n[1],e[2]=1/n[2],e[3]=1/n[3],e},$r.normalize=function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],d=t*t+r*r+i*i+o*o;return d>0&&(d=1/Math.sqrt(d),e[0]=n[0]*d,e[1]=n[1]*d,e[2]=n[2]*d,e[3]=n[3]*d),e},$r.dot=function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]+e[3]*n[3]},$r.lerp=function(e,n,t,r){var i=n[0],o=n[1],d=n[2],f=n[3];return e[0]=i+r*(t[0]-i),e[1]=o+r*(t[1]-o),e[2]=d+r*(t[2]-d),e[3]=f+r*(t[3]-f),e},$r.random=function(e,n){return n=n||1,e[0]=Iy(),e[1]=Iy(),e[2]=Iy(),e[3]=Iy(),$r.normalize(e,e),$r.scale(e,e,n),e},$r.transformMat4=function(e,n,t){var r=n[0],i=n[1],o=n[2],d=n[3];return e[0]=t[0]*r+t[4]*i+t[8]*o+t[12]*d,e[1]=t[1]*r+t[5]*i+t[9]*o+t[13]*d,e[2]=t[2]*r+t[6]*i+t[10]*o+t[14]*d,e[3]=t[3]*r+t[7]*i+t[11]*o+t[15]*d,e},$r.transformQuat=function(e,n,t){var r=n[0],i=n[1],o=n[2],d=t[0],f=t[1],g=t[2],_=t[3],w=_*r+f*o-g*i,S=_*i+g*r-d*o,k=_*o+d*i-f*r,V=-d*r-f*i-g*o;return e[0]=w*_+V*-d+S*-g-k*-f,e[1]=S*_+V*-f+k*-d-w*-g,e[2]=k*_+V*-g+w*-f-S*-d,e},$r.forEach=function(){var e=$r.create();return function(n,t,r,i,o,d){var f,g;for(t||(t=4),r||(r=0),g=i?Math.min(i*t+r,n.length):n.length,f=r;f<g;f+=t)e[0]=n[f],e[1]=n[f+1],e[2]=n[f+2],e[3]=n[f+3],o(e,e,d),n[f]=e[0],n[f+1]=e[1],n[f+2]=e[2],n[f+3]=e[3];return n}}();const Kn=$r;var bo={create:function(){var e=new Jo(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromMat4:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[4],e[4]=n[5],e[5]=n[6],e[6]=n[8],e[7]=n[9],e[8]=n[10],e},clone:function(e){var n=new Jo(9);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n},copy:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},transpose:function(e,n){if(e===n){var t=n[1],r=n[2],i=n[5];e[1]=n[3],e[2]=n[6],e[3]=t,e[5]=n[7],e[6]=r,e[7]=i}else e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8];return e},invert:function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],d=n[4],f=n[5],g=n[6],_=n[7],w=n[8],S=w*d-f*_,k=-w*o+f*g,V=_*o-d*g,ne=t*S+r*k+i*V;return ne?(e[0]=S*(ne=1/ne),e[1]=(-w*r+i*_)*ne,e[2]=(f*r-i*d)*ne,e[3]=k*ne,e[4]=(w*t-i*g)*ne,e[5]=(-f*t+i*o)*ne,e[6]=V*ne,e[7]=(-_*t+r*g)*ne,e[8]=(d*t-r*o)*ne,e):null},adjoint:function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],d=n[4],f=n[5],g=n[6],_=n[7],w=n[8];return e[0]=d*w-f*_,e[1]=i*_-r*w,e[2]=r*f-i*d,e[3]=f*g-o*w,e[4]=t*w-i*g,e[5]=i*o-t*f,e[6]=o*_-d*g,e[7]=r*g-t*_,e[8]=t*d-r*o,e},determinant:function(e){var i=e[3],o=e[4],d=e[5],f=e[6],g=e[7],_=e[8];return e[0]*(_*o-d*g)+e[1]*(-_*i+d*f)+e[2]*(g*i-o*f)},multiply:function(e,n,t){var r=n[0],i=n[1],o=n[2],d=n[3],f=n[4],g=n[5],_=n[6],w=n[7],S=n[8],k=t[0],V=t[1],ne=t[2],pe=t[3],De=t[4],Re=t[5],Fe=t[6],ke=t[7],Be=t[8];return e[0]=k*r+V*d+ne*_,e[1]=k*i+V*f+ne*w,e[2]=k*o+V*g+ne*S,e[3]=pe*r+De*d+Re*_,e[4]=pe*i+De*f+Re*w,e[5]=pe*o+De*g+Re*S,e[6]=Fe*r+ke*d+Be*_,e[7]=Fe*i+ke*f+Be*w,e[8]=Fe*o+ke*g+Be*S,e}};bo.mul=bo.multiply,bo.translate=function(e,n,t){var r=n[0],i=n[1],o=n[2],d=n[3],f=n[4],g=n[5],_=n[6],w=n[7],S=n[8],k=t[0],V=t[1];return e[0]=r,e[1]=i,e[2]=o,e[3]=d,e[4]=f,e[5]=g,e[6]=k*r+V*d+_,e[7]=k*i+V*f+w,e[8]=k*o+V*g+S,e},bo.rotate=function(e,n,t){var r=n[0],i=n[1],o=n[2],d=n[3],f=n[4],g=n[5],_=n[6],w=n[7],S=n[8],k=Math.sin(t),V=Math.cos(t);return e[0]=V*r+k*d,e[1]=V*i+k*f,e[2]=V*o+k*g,e[3]=V*d-k*r,e[4]=V*f-k*i,e[5]=V*g-k*o,e[6]=_,e[7]=w,e[8]=S,e},bo.scale=function(e,n,t){var r=t[0],i=t[1];return e[0]=r*n[0],e[1]=r*n[1],e[2]=r*n[2],e[3]=i*n[3],e[4]=i*n[4],e[5]=i*n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e},bo.fromMat2d=function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=0,e[3]=n[2],e[4]=n[3],e[5]=0,e[6]=n[4],e[7]=n[5],e[8]=1,e},bo.fromQuat=function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],d=t+t,f=r+r,g=i+i,_=t*d,w=r*d,S=r*f,k=i*d,V=i*f,ne=i*g,pe=o*d,De=o*f,Re=o*g;return e[0]=1-S-ne,e[3]=w-Re,e[6]=k+De,e[1]=w+Re,e[4]=1-_-ne,e[7]=V-pe,e[2]=k-De,e[5]=V+pe,e[8]=1-_-S,e},bo.normalFromMat4=function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],d=n[4],f=n[5],g=n[6],_=n[7],w=n[8],S=n[9],k=n[10],V=n[11],ne=n[12],pe=n[13],De=n[14],Re=n[15],Fe=t*f-r*d,ke=t*g-i*d,Be=t*_-o*d,at=r*g-i*f,ot=r*_-o*f,St=i*_-o*g,yt=w*pe-S*ne,Ht=w*De-k*ne,rn=w*Re-V*ne,Kt=S*De-k*pe,gn=S*Re-V*pe,_n=k*Re-V*De,ln=Fe*_n-ke*gn+Be*Kt+at*rn-ot*Ht+St*yt;return ln?(e[0]=(f*_n-g*gn+_*Kt)*(ln=1/ln),e[1]=(g*rn-d*_n-_*Ht)*ln,e[2]=(d*gn-f*rn+_*yt)*ln,e[3]=(i*gn-r*_n-o*Kt)*ln,e[4]=(t*_n-i*rn+o*Ht)*ln,e[5]=(r*rn-t*gn-o*yt)*ln,e[6]=(pe*St-De*ot+Re*at)*ln,e[7]=(De*Be-ne*St-Re*ke)*ln,e[8]=(ne*ot-pe*Be+Re*Fe)*ln,e):null},bo.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))};const mi=bo;var Ti={create:function(){var e=new Jo(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}};Ti.rotationTo=function(){var e=Et.create(),n=Et.fromValues(1,0,0),t=Et.fromValues(0,1,0);return function(r,i,o){var d=Et.dot(i,o);return d<-.999999?(Et.cross(e,n,i),Et.length(e)<1e-6&&Et.cross(e,t,i),Et.normalize(e,e),Ti.setAxisAngle(r,e,Math.PI),r):d>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(Et.cross(e,i,o),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+d,Ti.normalize(r,r))}}(),Ti.setAxes=function(){var e=mi.create();return function(n,t,r,i){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-t[0],e[5]=-t[1],e[8]=-t[2],Ti.normalize(n,Ti.fromMat3(n,e))}}(),Ti.clone=Kn.clone,Ti.fromValues=Kn.fromValues,Ti.copy=Kn.copy,Ti.set=Kn.set,Ti.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},Ti.setAxisAngle=function(e,n,t){t*=.5;var r=Math.sin(t);return e[0]=r*n[0],e[1]=r*n[1],e[2]=r*n[2],e[3]=Math.cos(t),e},Ti.add=Kn.add,Ti.multiply=function(e,n,t){var r=n[0],i=n[1],o=n[2],d=n[3],f=t[0],g=t[1],_=t[2],w=t[3];return e[0]=r*w+d*f+i*_-o*g,e[1]=i*w+d*g+o*f-r*_,e[2]=o*w+d*_+r*g-i*f,e[3]=d*w-r*f-i*g-o*_,e},Ti.mul=Ti.multiply,Ti.scale=Kn.scale,Ti.rotateX=function(e,n,t){t*=.5;var r=n[0],i=n[1],o=n[2],d=n[3],f=Math.sin(t),g=Math.cos(t);return e[0]=r*g+d*f,e[1]=i*g+o*f,e[2]=o*g-i*f,e[3]=d*g-r*f,e},Ti.rotateY=function(e,n,t){t*=.5;var r=n[0],i=n[1],o=n[2],d=n[3],f=Math.sin(t),g=Math.cos(t);return e[0]=r*g-o*f,e[1]=i*g+d*f,e[2]=o*g+r*f,e[3]=d*g-i*f,e},Ti.rotateZ=function(e,n,t){t*=.5;var r=n[0],i=n[1],o=n[2],d=n[3],f=Math.sin(t),g=Math.cos(t);return e[0]=r*g+i*f,e[1]=i*g-r*f,e[2]=o*g+d*f,e[3]=d*g-o*f,e},Ti.calculateW=function(e,n){var t=n[0],r=n[1],i=n[2];return e[0]=t,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-t*t-r*r-i*i)),e},Ti.dot=Kn.dot,Ti.lerp=Kn.lerp,Ti.slerp=function(e,n,t,r){var k,V,ne,pe,De,i=n[0],o=n[1],d=n[2],f=n[3],g=t[0],_=t[1],w=t[2],S=t[3];return(V=i*g+o*_+d*w+f*S)<0&&(V=-V,g=-g,_=-_,w=-w,S=-S),1-V>1e-6?(k=Math.acos(V),ne=Math.sin(k),pe=Math.sin((1-r)*k)/ne,De=Math.sin(r*k)/ne):(pe=1-r,De=r),e[0]=pe*i+De*g,e[1]=pe*o+De*_,e[2]=pe*d+De*w,e[3]=pe*f+De*S,e},Ti.invert=function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],d=t*t+r*r+i*i+o*o,f=d?1/d:0;return e[0]=-t*f,e[1]=-r*f,e[2]=-i*f,e[3]=o*f,e},Ti.conjugate=function(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e[3]=n[3],e},Ti.length=Kn.length,Ti.len=Ti.length,Ti.squaredLength=Kn.squaredLength,Ti.sqrLen=Ti.squaredLength,Ti.normalize=Kn.normalize,Ti.fromMat3=function(e,n){var r,t=n[0]+n[4]+n[8];if(t>0)r=Math.sqrt(t+1),e[3]=.5*r,e[0]=(n[5]-n[7])*(r=.5/r),e[1]=(n[6]-n[2])*r,e[2]=(n[1]-n[3])*r;else{var i=0;n[4]>n[0]&&(i=1),n[8]>n[3*i+i]&&(i=2);var o=(i+1)%3,d=(i+2)%3;r=Math.sqrt(n[3*i+i]-n[3*o+o]-n[3*d+d]+1),e[i]=.5*r,e[3]=(n[3*o+d]-n[3*d+o])*(r=.5/r),e[o]=(n[3*o+i]+n[3*i+o])*r,e[d]=(n[3*d+i]+n[3*i+d])*r}return e};const Lr=Ti;var oa=function(){this._axisX=new On,this._axisY=new On,this._axisZ=new On,this.array=In.create(),this._dirty=!0};oa.prototype={constructor:oa,setArray:function(e){for(var n=0;n<this.array.length;n++)this.array[n]=e[n];return this._dirty=!0,this},adjoint:function(){return In.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return(new oa).copy(this)},copy:function(e){return In.copy(this.array,e.array),this._dirty=!0,this},determinant:function(){return In.determinant(this.array)},fromQuat:function(e){return In.fromQuat(this.array,e.array),this._dirty=!0,this},fromRotationTranslation:function(e,n){return In.fromRotationTranslation(this.array,e.array,n.array),this._dirty=!0,this},fromMat2d:function(e){return oa.fromMat2d(this,e),this},frustum:function(e,n,t,r,i,o){return In.frustum(this.array,e,n,t,r,i,o),this._dirty=!0,this},identity:function(){return In.identity(this.array),this._dirty=!0,this},invert:function(){return In.invert(this.array,this.array),this._dirty=!0,this},lookAt:function(e,n,t){return In.lookAt(this.array,e.array,n.array,t.array),this._dirty=!0,this},mul:function(e){return In.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return In.mul(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return In.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return In.multiply(this.array,e.array,this.array),this._dirty=!0,this},ortho:function(e,n,t,r,i,o){return In.ortho(this.array,e,n,t,r,i,o),this._dirty=!0,this},perspective:function(e,n,t,r){return In.perspective(this.array,e,n,t,r),this._dirty=!0,this},rotate:function(e,n){return In.rotate(this.array,this.array,e,n.array),this._dirty=!0,this},rotateX:function(e){return In.rotateX(this.array,this.array,e),this._dirty=!0,this},rotateY:function(e){return In.rotateY(this.array,this.array,e),this._dirty=!0,this},rotateZ:function(e){return In.rotateZ(this.array,this.array,e),this._dirty=!0,this},scale:function(e){return In.scale(this.array,this.array,e.array),this._dirty=!0,this},translate:function(e){return In.translate(this.array,this.array,e.array),this._dirty=!0,this},transpose:function(){return In.transpose(this.array,this.array),this._dirty=!0,this},decomposeMatrix:function(){var e=Et.create(),n=Et.create(),t=Et.create(),r=mi.create();return function(i,o,d){var f=this.array;Et.set(e,f[0],f[1],f[2]),Et.set(n,f[4],f[5],f[6]),Et.set(t,f[8],f[9],f[10]);var g=Et.length(e),_=Et.length(n),w=Et.length(t);this.determinant()<0&&(g=-g),i&&i.set(g,_,w),d.set(f[12],f[13],f[14]),mi.fromMat4(r,f),r[0]/=g,r[1]/=g,r[2]/=g,r[3]/=_,r[4]/=_,r[5]/=_,r[6]/=w,r[7]/=w,r[8]/=w,Lr.fromMat3(o.array,r),Lr.normalize(o.array,o.array),o._dirty=!0,d._dirty=!0}}(),toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var y2=Object.defineProperty;if(y2){var RB=oa.prototype;y2(RB,"z",{get:function(){var e=this.array;return this._axisZ.set(e[8],e[9],e[10]),this._axisZ},set:function(e){var n=this.array;n[8]=(e=e.array)[0],n[9]=e[1],n[10]=e[2],this._dirty=!0}}),y2(RB,"y",{get:function(){var e=this.array;return this._axisY.set(e[4],e[5],e[6]),this._axisY},set:function(e){var n=this.array;n[4]=(e=e.array)[0],n[5]=e[1],n[6]=e[2],this._dirty=!0}}),y2(RB,"x",{get:function(){var e=this.array;return this._axisX.set(e[0],e[1],e[2]),this._axisX},set:function(e){var n=this.array;n[0]=(e=e.array)[0],n[1]=e[1],n[2]=e[2],this._dirty=!0}})}oa.adjoint=function(e,n){return In.adjoint(e.array,n.array),e._dirty=!0,e},oa.copy=function(e,n){return In.copy(e.array,n.array),e._dirty=!0,e},oa.determinant=function(e){return In.determinant(e.array)},oa.identity=function(e){return In.identity(e.array),e._dirty=!0,e},oa.ortho=function(e,n,t,r,i,o,d){return In.ortho(e.array,n,t,r,i,o,d),e._dirty=!0,e},oa.perspective=function(e,n,t,r,i){return In.perspective(e.array,n,t,r,i),e._dirty=!0,e},oa.lookAt=function(e,n,t,r){return In.lookAt(e.array,n.array,t.array,r.array),e._dirty=!0,e},oa.invert=function(e,n){return In.invert(e.array,n.array),e._dirty=!0,e},oa.multiply=oa.mul=function(e,n,t){return In.mul(e.array,n.array,t.array),e._dirty=!0,e},oa.fromQuat=function(e,n){return In.fromQuat(e.array,n.array),e._dirty=!0,e},oa.fromRotationTranslation=function(e,n,t){return In.fromRotationTranslation(e.array,n.array,t.array),e._dirty=!0,e},oa.fromMat2d=function(r,t){return r._dirty=!0,(r=r.array)[0]=(t=t.array)[0],r[4]=t[2],r[12]=t[4],r[1]=t[1],r[5]=t[3],r[13]=t[5],r},oa.rotate=function(e,n,t,r){return In.rotate(e.array,n.array,t,r.array),e._dirty=!0,e},oa.rotateX=function(e,n,t){return In.rotateX(e.array,n.array,t),e._dirty=!0,e},oa.rotateY=function(e,n,t){return In.rotateY(e.array,n.array,t),e._dirty=!0,e},oa.rotateZ=function(e,n,t){return In.rotateZ(e.array,n.array,t),e._dirty=!0,e},oa.scale=function(e,n,t){return In.scale(e.array,n.array,t.array),e._dirty=!0,e},oa.transpose=function(e,n){return In.transpose(e.array,n.array),e._dirty=!0,e},oa.translate=function(e,n,t){return In.translate(e.array,n.array,t.array),e._dirty=!0,e};const cr=oa;var Ri=function(e,n,t,r){this.array=Lr.fromValues(e=e||0,n=n||0,t=t||0,r=void 0===r?1:r),this._dirty=!0};Ri.prototype={constructor:Ri,add:function(e){return Lr.add(this.array,this.array,e.array),this._dirty=!0,this},calculateW:function(){return Lr.calculateW(this.array,this.array),this._dirty=!0,this},set:function(e,n,t,r){return this.array[0]=e,this.array[1]=n,this.array[2]=t,this.array[3]=r,this._dirty=!0,this},setArray:function(e){return this.array[0]=e[0],this.array[1]=e[1],this.array[2]=e[2],this.array[3]=e[3],this._dirty=!0,this},clone:function(){return new Ri(this.x,this.y,this.z,this.w)},conjugate:function(){return Lr.conjugate(this.array,this.array),this._dirty=!0,this},copy:function(e){return Lr.copy(this.array,e.array),this._dirty=!0,this},dot:function(e){return Lr.dot(this.array,e.array)},fromMat3:function(e){return Lr.fromMat3(this.array,e.array),this._dirty=!0,this},fromMat4:function(){var e=mi.create();return function(n){return mi.fromMat4(e,n.array),mi.transpose(e,e),Lr.fromMat3(this.array,e),this._dirty=!0,this}}(),identity:function(){return Lr.identity(this.array),this._dirty=!0,this},invert:function(){return Lr.invert(this.array,this.array),this._dirty=!0,this},len:function(){return Lr.len(this.array)},length:function(){return Lr.length(this.array)},lerp:function(e,n,t){return Lr.lerp(this.array,e.array,n.array,t),this._dirty=!0,this},mul:function(e){return Lr.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return Lr.multiply(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return Lr.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return Lr.multiply(this.array,e.array,this.array),this._dirty=!0,this},normalize:function(){return Lr.normalize(this.array,this.array),this._dirty=!0,this},rotateX:function(e){return Lr.rotateX(this.array,this.array,e),this._dirty=!0,this},rotateY:function(e){return Lr.rotateY(this.array,this.array,e),this._dirty=!0,this},rotateZ:function(e){return Lr.rotateZ(this.array,this.array,e),this._dirty=!0,this},rotationTo:function(e,n){return Lr.rotationTo(this.array,e.array,n.array),this._dirty=!0,this},setAxes:function(e,n,t){return Lr.setAxes(this.array,e.array,n.array,t.array),this._dirty=!0,this},setAxisAngle:function(e,n){return Lr.setAxisAngle(this.array,e.array,n),this._dirty=!0,this},slerp:function(e,n,t){return Lr.slerp(this.array,e.array,n.array,t),this._dirty=!0,this},sqrLen:function(){return Lr.sqrLen(this.array)},squaredLength:function(){return Lr.squaredLength(this.array)},fromEuler:function(e,n){return Ri.fromEuler(this,e,n)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var iC=Object.defineProperty;if(iC){var b2=Ri.prototype;iC(b2,"x",{get:function(){return this.array[0]},set:function(e){this.array[0]=e,this._dirty=!0}}),iC(b2,"y",{get:function(){return this.array[1]},set:function(e){this.array[1]=e,this._dirty=!0}}),iC(b2,"z",{get:function(){return this.array[2]},set:function(e){this.array[2]=e,this._dirty=!0}}),iC(b2,"w",{get:function(){return this.array[3]},set:function(e){this.array[3]=e,this._dirty=!0}})}Ri.add=function(e,n,t){return Lr.add(e.array,n.array,t.array),e._dirty=!0,e},Ri.set=function(e,n,t,r,i){Lr.set(e.array,n,t,r,i),e._dirty=!0},Ri.copy=function(e,n){return Lr.copy(e.array,n.array),e._dirty=!0,e},Ri.calculateW=function(e,n){return Lr.calculateW(e.array,n.array),e._dirty=!0,e},Ri.conjugate=function(e,n){return Lr.conjugate(e.array,n.array),e._dirty=!0,e},Ri.identity=function(e){return Lr.identity(e.array),e._dirty=!0,e},Ri.invert=function(e,n){return Lr.invert(e.array,n.array),e._dirty=!0,e},Ri.dot=function(e,n){return Lr.dot(e.array,n.array)},Ri.len=function(e){return Lr.length(e.array)},Ri.lerp=function(e,n,t,r){return Lr.lerp(e.array,n.array,t.array,r),e._dirty=!0,e},Ri.slerp=function(e,n,t,r){return Lr.slerp(e.array,n.array,t.array,r),e._dirty=!0,e},Ri.multiply=Ri.mul=function(e,n,t){return Lr.multiply(e.array,n.array,t.array),e._dirty=!0,e},Ri.rotateX=function(e,n,t){return Lr.rotateX(e.array,n.array,t),e._dirty=!0,e},Ri.rotateY=function(e,n,t){return Lr.rotateY(e.array,n.array,t),e._dirty=!0,e},Ri.rotateZ=function(e,n,t){return Lr.rotateZ(e.array,n.array,t),e._dirty=!0,e},Ri.setAxisAngle=function(e,n,t){return Lr.setAxisAngle(e.array,n.array,t),e._dirty=!0,e},Ri.normalize=function(e,n){return Lr.normalize(e.array,n.array),e._dirty=!0,e},Ri.squaredLength=Ri.sqrLen=function(e){return Lr.sqrLen(e.array)},Ri.fromMat3=function(e,n){return Lr.fromMat3(e.array,n.array),e._dirty=!0,e},Ri.setAxes=function(e,n,t,r){return Lr.setAxes(e.array,n.array,t.array,r.array),e._dirty=!0,e},Ri.rotationTo=function(e,n,t){return Lr.rotationTo(e.array,n.array,t.array),e._dirty=!0,e},Ri.fromEuler=function(e,n,w){e._dirty=!0,n=n.array;var r=e.array,i=Math.cos(n[0]/2),o=Math.cos(n[1]/2),d=Math.cos(n[2]/2),f=Math.sin(n[0]/2),g=Math.sin(n[1]/2),_=Math.sin(n[2]/2);switch(w=(w||"XYZ").toUpperCase()){case"XYZ":r[0]=f*o*d+i*g*_,r[1]=i*g*d-f*o*_,r[2]=i*o*_+f*g*d,r[3]=i*o*d-f*g*_;break;case"YXZ":r[0]=f*o*d+i*g*_,r[1]=i*g*d-f*o*_,r[2]=i*o*_-f*g*d,r[3]=i*o*d+f*g*_;break;case"ZXY":r[0]=f*o*d-i*g*_,r[1]=i*g*d+f*o*_,r[2]=i*o*_+f*g*d,r[3]=i*o*d-f*g*_;break;case"ZYX":r[0]=f*o*d-i*g*_,r[1]=i*g*d+f*o*_,r[2]=i*o*_-f*g*d,r[3]=i*o*d+f*g*_;break;case"YZX":r[0]=f*o*d+i*g*_,r[1]=i*g*d+f*o*_,r[2]=i*o*_-f*g*d,r[3]=i*o*d-f*g*_;break;case"XZY":r[0]=f*o*d-i*g*_,r[1]=i*g*d-f*o*_,r[2]=i*o*_+f*g*d,r[3]=i*o*d+f*g*_}};const z6=Ri;var Ff=Et.set,x2=Et.copy,w2=function(e,n){this.min=e||new On(1/0,1/0,1/0),this.max=n||new On(-1/0,-1/0,-1/0),this.vertices=null};w2.prototype={constructor:w2,updateFromVertices:function(e){if(e.length>0){var n=this.min,t=this.max,r=n.array,i=t.array;x2(r,e[0]),x2(i,e[0]);for(var o=1;o<e.length;o++){var d=e[o];d[0]<r[0]&&(r[0]=d[0]),d[1]<r[1]&&(r[1]=d[1]),d[2]<r[2]&&(r[2]=d[2]),d[0]>i[0]&&(i[0]=d[0]),d[1]>i[1]&&(i[1]=d[1]),d[2]>i[2]&&(i[2]=d[2])}n._dirty=!0,t._dirty=!0}},union:function(e){var n=this.min,t=this.max;return Et.min(n.array,n.array,e.min.array),Et.max(t.array,t.array,e.max.array),n._dirty=!0,t._dirty=!0,this},intersection:function(e){var n=this.min,t=this.max;return Et.max(n.array,n.array,e.min.array),Et.min(t.array,t.array,e.max.array),n._dirty=!0,t._dirty=!0,this},intersectBoundingBox:function(e){var n=this.min.array,t=this.max.array,r=e.min.array,i=e.max.array;return!(n[0]>i[0]||n[1]>i[1]||n[2]>i[2]||t[0]<r[0]||t[1]<r[1]||t[2]<r[2])},containBoundingBox:function(e){var n=this.min.array,t=this.max.array,r=e.min.array,i=e.max.array;return n[0]<=r[0]&&n[1]<=r[1]&&n[2]<=r[2]&&t[0]>=i[0]&&t[1]>=i[1]&&t[2]>=i[2]},containPoint:function(e){var n=this.min.array,t=this.max.array,r=e.array;return n[0]<=r[0]&&n[1]<=r[1]&&n[2]<=r[2]&&t[0]>=r[0]&&t[1]>=r[1]&&t[2]>=r[2]},isFinite:function(){var e=this.min.array,n=this.max.array;return isFinite(e[0])&&isFinite(e[1])&&isFinite(e[2])&&isFinite(n[0])&&isFinite(n[1])&&isFinite(n[2])},applyTransform:function(e){this.transformFrom(this,e)},transformFrom:function(){var e=Et.create(),n=Et.create(),t=Et.create(),r=Et.create(),i=Et.create(),o=Et.create();return function(d,f){var g=d.min.array,_=d.max.array,w=f.array;return e[0]=w[0]*g[0],e[1]=w[1]*g[0],e[2]=w[2]*g[0],n[0]=w[0]*_[0],n[1]=w[1]*_[0],n[2]=w[2]*_[0],t[0]=w[4]*g[1],t[1]=w[5]*g[1],t[2]=w[6]*g[1],r[0]=w[4]*_[1],r[1]=w[5]*_[1],r[2]=w[6]*_[1],i[0]=w[8]*g[2],i[1]=w[9]*g[2],i[2]=w[10]*g[2],o[0]=w[8]*_[2],o[1]=w[9]*_[2],o[2]=w[10]*_[2],_=this.max.array,(g=this.min.array)[0]=Math.min(e[0],n[0])+Math.min(t[0],r[0])+Math.min(i[0],o[0])+w[12],g[1]=Math.min(e[1],n[1])+Math.min(t[1],r[1])+Math.min(i[1],o[1])+w[13],g[2]=Math.min(e[2],n[2])+Math.min(t[2],r[2])+Math.min(i[2],o[2])+w[14],_[0]=Math.max(e[0],n[0])+Math.max(t[0],r[0])+Math.max(i[0],o[0])+w[12],_[1]=Math.max(e[1],n[1])+Math.max(t[1],r[1])+Math.max(i[1],o[1])+w[13],_[2]=Math.max(e[2],n[2])+Math.max(t[2],r[2])+Math.max(i[2],o[2])+w[14],this.min._dirty=!0,this.max._dirty=!0,this}}(),applyProjection:function(e){var n=this.min.array,t=this.max.array,r=e.array,i=n[0],o=n[1],d=n[2],f=t[0],g=t[1],_=n[2],w=t[0],S=t[1],k=t[2];if(1===r[15])n[0]=r[0]*i+r[12],n[1]=r[5]*o+r[13],t[2]=r[10]*d+r[14],t[0]=r[0]*w+r[12],t[1]=r[5]*S+r[13],n[2]=r[10]*k+r[14];else{var V=-1/d;n[0]=r[0]*i*V,n[1]=r[5]*o*V,t[2]=(r[10]*d+r[14])*V,t[0]=r[0]*f*(V=-1/_),t[1]=r[5]*g*V,n[2]=(r[10]*k+r[14])*(V=-1/k)}return this.min._dirty=!0,this.max._dirty=!0,this},updateVertices:function(){var e=this.vertices;if(!e){e=[];for(var n=0;n<8;n++)e[n]=Et.fromValues(0,0,0);this.vertices=e}var t=this.min.array,r=this.max.array;return Ff(e[0],t[0],t[1],t[2]),Ff(e[1],t[0],r[1],t[2]),Ff(e[2],r[0],t[1],t[2]),Ff(e[3],r[0],r[1],t[2]),Ff(e[4],t[0],t[1],r[2]),Ff(e[5],t[0],r[1],r[2]),Ff(e[6],r[0],t[1],r[2]),Ff(e[7],r[0],r[1],r[2]),this},copy:function(e){var n=this.min,t=this.max;return x2(n.array,e.min.array),x2(t.array,e.max.array),n._dirty=!0,t._dirty=!0,this},clone:function(){var e=new w2;return e.copy(this),e}};const Ws=w2;var tne=0,nne=Us.extend({name:"",position:null,rotation:null,scale:null,worldTransform:null,localTransform:null,autoUpdateLocalTransform:!0,_parent:null,_scene:null,_needsUpdateWorldTransform:!0,_inIterating:!1,__depth:0},function(){this.name||(this.name=(this.type||"NODE")+"_"+tne++),this.position||(this.position=new On),this.rotation||(this.rotation=new z6),this.scale||(this.scale=new On(1,1,1)),this.worldTransform=new cr,this.localTransform=new cr,this._children=[]},{target:null,invisible:!1,isSkinnedMesh:function(){return!1},isRenderable:function(){return!1},setName:function(e){var n=this._scene;if(n){var t=n._nodeRepository;delete t[this.name],t[e]=this}this.name=e},add:function(e){var n=e._parent;if(n!==this){n&&n.remove(e),e._parent=this,this._children.push(e);var t=this._scene;t&&t!==e.scene&&e.traverse(this._addSelfToScene,this),e._needsUpdateWorldTransform=!0}},remove:function(e){var n=this._children,t=n.indexOf(e);t<0||(n.splice(t,1),e._parent=null,this._scene&&e.traverse(this._removeSelfFromScene,this))},removeAll:function(){for(var e=this._children,n=0;n<e.length;n++)e[n]._parent=null,this._scene&&e[n].traverse(this._removeSelfFromScene,this);this._children=[]},getScene:function(){return this._scene},getParent:function(){return this._parent},_removeSelfFromScene:function(e){e._scene.removeFromScene(e),e._scene=null},_addSelfToScene:function(e){this._scene.addToScene(e),e._scene=this._scene},isAncestor:function(e){for(var n=e._parent;n;){if(n===this)return!0;n=n._parent}return!1},children:function(){return this._children.slice()},childAt:function(e){return this._children[e]},getChildByName:function(e){for(var n=this._children,t=0;t<n.length;t++)if(n[t].name===e)return n[t]},getDescendantByName:function(e){for(var n=this._children,t=0;t<n.length;t++){var r=n[t];if(r.name===e)return r;var i=r.getDescendantByName(e);if(i)return i}},queryNode:function(e){if(e){for(var n=e.split("/"),t=this,r=0;r<n.length;r++){var i=n[r];if(i){for(var o=!1,d=t._children,f=0;f<d.length;f++){var g=d[f];if(g.name===i){t=g,o=!0;break}}if(!o)return}}return t}},getPath:function(e){if(!this._parent)return"/";for(var n=this._parent,t=this.name;n._parent&&(t=n.name+"/"+t,n._parent!=e);)n=n._parent;return!n._parent&&e?null:t},traverse:function(e,n){e.call(n,this);for(var t=this._children,r=0,i=t.length;r<i;r++)t[r].traverse(e,n)},eachChild:function(e,n){for(var t=this._children,r=0,i=t.length;r<i;r++)e.call(n,t[r],r)},setLocalTransform:function(e){In.copy(this.localTransform.array,e.array),this.decomposeLocalTransform()},decomposeLocalTransform:function(e){this.localTransform.decomposeMatrix(e?null:this.scale,this.rotation,this.position)},setWorldTransform:function(e){In.copy(this.worldTransform.array,e.array),this.decomposeWorldTransform()},decomposeWorldTransform:function(){var e=In.create();return function(n){var t=this.localTransform,r=this.worldTransform;this._parent?(In.invert(e,this._parent.worldTransform.array),In.multiply(t.array,e,r.array)):In.copy(t.array,r.array),t.decomposeMatrix(n?null:this.scale,this.rotation,this.position)}}(),transformNeedsUpdate:function(){return this.position._dirty||this.rotation._dirty||this.scale._dirty},updateLocalTransform:function(){var e=this.position,n=this.rotation,t=this.scale;if(this.transformNeedsUpdate()){var r=this.localTransform.array;In.fromRotationTranslation(r,n.array,e.array),In.scale(r,r,t.array),n._dirty=!1,t._dirty=!1,e._dirty=!1,this._needsUpdateWorldTransform=!0}},_updateWorldTransformTopDown:function(){var e=this.localTransform.array,n=this.worldTransform.array;this._parent?In.multiplyAffine(n,this._parent.worldTransform.array,e):In.copy(n,e)},updateWorldTransform:function(){for(var e=this;e&&e.getParent()&&e.getParent().transformNeedsUpdate();)e=e.getParent();e.update()},update:function(e){this.autoUpdateLocalTransform?this.updateLocalTransform():e=!0,(e||this._needsUpdateWorldTransform)&&(this._updateWorldTransformTopDown(),e=!0,this._needsUpdateWorldTransform=!1);for(var n=this._children,t=0,r=n.length;t<r;t++)n[t].update(e)},getBoundingBox:function(){function e(i){return!i.invisible&&i.geometry}var n=new Ws,t=new cr,r=new cr;return function(i,o){return o=o||new Ws,i=i||e,this._parent?cr.invert(r,this._parent.worldTransform):cr.identity(r),this.traverse(function(d){d.geometry&&d.geometry.boundingBox&&(n.copy(d.geometry.boundingBox),cr.multiply(t,r,d.worldTransform),n.applyTransform(t),o.union(n))},this,e),o}}(),getWorldPosition:function(e){this.transformNeedsUpdate()&&this.updateWorldTransform();var n=this.worldTransform.array;if(e){var t=e.array;return t[0]=n[12],t[1]=n[13],t[2]=n[14],e}return new On(n[12],n[13],n[14])},clone:function(){var e=new this.constructor,n=this._children;e.setName(this.name),e.position.copy(this.position),e.rotation.copy(this.rotation),e.scale.copy(this.scale);for(var t=0;t<n.length;t++)e.add(n[t].clone());return e},rotateAround:function(){var e=new On,n=new cr;return function(t,r,i){e.copy(this.position).subtract(t);var o=this.localTransform;o.identity(),o.translate(t),o.rotate(i,r),n.fromRotationTranslation(this.rotation,e),o.multiply(n),o.scale(this.scale),this.decomposeLocalTransform(),this._needsUpdateWorldTransform=!0}}(),lookAt:function(){var e=new cr;return function(n,t){e.lookAt(this.position,n,t||this.localTransform.y).invert(),this.setLocalTransform(e),this.target=n}}()});const Lu=nne;var Bl=Lu.extend({material:null,geometry:null,mode:4,_renderInfo:null},{__program:null,lightGroup:0,renderOrder:0,culling:!0,cullFace:1029,frontFace:2305,frustumCulling:!0,receiveShadow:!0,castShadow:!0,ignorePicking:!1,ignorePreZ:!1,ignoreGBuffer:!1,isRenderable:function(){return this.geometry&&this.material&&this.material.shader&&!this.invisible&&this.geometry.vertexCount>0},beforeRender:function(e){},afterRender:function(e,n){},getBoundingBox:function(e,n){return n=Lu.prototype.getBoundingBox.call(this,e,n),this.geometry&&this.geometry.boundingBox&&n.union(this.geometry.boundingBox),n},clone:function(){var e=["castShadow","receiveShadow","mode","culling","cullFace","frontFace","frustumCulling","renderOrder","lineWidth","ignorePicking","ignorePreZ","ignoreGBuffer"];return function(){var n=Lu.prototype.clone.call(this);n.geometry=this.geometry,n.material=this.material;for(var t=0;t<e.length;t++){var r=e[t];n[r]!==this[r]&&(n[r]=this[r])}return n}}()});Bl.POINTS=0,Bl.LINES=1,Bl.LINE_LOOP=2,Bl.LINE_STRIP=3,Bl.TRIANGLES=4,Bl.TRIANGLE_STRIP=5,Bl.TRIANGLE_FAN=6,Bl.BACK=1029,Bl.FRONT=1028,Bl.FRONT_AND_BACK=1032,Bl.CW=2304,Bl.CCW=2305;const LB=Bl;var OB=Us.extend({scene:null,camera:null,renderer:null},function(){this._ray=new _2,this._ndc=new Fl},{pick:function(e,n,t){return this.pickAll(e,n,[],t)[0]||null},pickAll:function(e,n,t,r){return this.renderer.screenToNDC(e,n,this._ndc),this.camera.castRay(this._ndc,this._ray),this._intersectNode(this.scene,t=t||[],r||!1),t.sort(this._intersectionCompareFunc),t},_intersectNode:function(e,n,t){e instanceof LB&&e.isRenderable()&&(!e.ignorePicking||t)&&(4===e.mode&&e.geometry.isUseIndices()||e.geometry.pickByRay||e.geometry.pick)&&this._intersectRenderable(e,n);for(var r=0;r<e._children.length;r++)this._intersectNode(e._children[r],n,t)},_intersectRenderable:function(){var e=new On,n=new On,t=new On,r=new _2,i=new cr;return function(o,d){var f=o.isSkinnedMesh();r.copy(this._ray),cr.invert(i,o.worldTransform),f||r.applyTransform(i);var g=o.geometry,_=f?o.skeleton.boundingBox:g.boundingBox;if(!_||r.intersectBoundingBox(_)){if(g.pick)return void g.pick(this._ndc.x,this._ndc.y,this.renderer,this.camera,o,d);if(g.pickByRay)return void g.pickByRay(r,o,d);var S,De,w=1029===o.cullFace&&2305===o.frontFace||1028===o.cullFace&&2304===o.frontFace,k=g.indices,V=g.attributes.position,ne=g.attributes.weight,pe=g.attributes.joint,Re=[];if(V&&V.value&&k){if(f){De=o.skeleton.getSubSkinMatrices(o.__uid__,o.joints);for(var Fe=0;Fe<o.joints.length;Fe++){Re[Fe]=Re[Fe]||[];for(var ke=0;ke<16;ke++)Re[Fe][ke]=De[16*Fe+ke]}var Be=[],at=[],ot=[],St=[],yt=[],Ht=g.attributes.skinnedPosition;for((!Ht||!Ht.value)&&(g.createAttribute("skinnedPosition","f",3),(Ht=g.attributes.skinnedPosition).init(g.vertexCount)),Fe=0;Fe<g.vertexCount;Fe++){for(V.get(Fe,Be),ne.get(Fe,at),pe.get(Fe,ot),at[3]=1-at[0]-at[1]-at[2],Et.set(St,0,0,0),ke=0;ke<4;ke++)ot[ke]>=0&&at[ke]>1e-4&&(Et.transformMat4(yt,Be,Re[ot[ke]]),Et.scaleAndAdd(St,St,yt,at[ke]));Ht.set(Fe,St)}}for(Fe=0;Fe<k.length;Fe+=3){var rn=k[Fe],Kt=k[Fe+1],gn=k[Fe+2],_n=f?g.attributes.skinnedPosition:V;if(_n.get(rn,e.array),_n.get(Kt,n.array),_n.get(gn,t.array),S=w?r.intersectTriangle(e,n,t,o.culling):r.intersectTriangle(e,t,n,o.culling)){var ln=new On;f?On.copy(ln,S):On.transformMat4(ln,S,o.worldTransform),d.push(new OB.Intersection(S,ln,o,[rn,Kt,gn],Fe/3,On.dist(ln,this._ray.origin)))}}}}}}(),_intersectionCompareFunc:function(e,n){return e.distance-n.distance}});OB.Intersection=function(e,n,t,r,i,o){this.point=e,this.pointWorld=n,this.target=t,this.triangle=r,this.triangleIndex=i,this.distance=o};const rne=OB;var aC="__dt__",C2=function(){this._contextId=0,this._caches=[],this._context={}};(C2.prototype={use:function(e,n){var t=this._caches;t[e]||(t[e]={},n&&(t[e]=n())),this._contextId=e,this._context=t[e]},put:function(e,n){this._context[e]=n},get:function(e){return this._context[e]},dirty:function(e){this.put(aC+(e=e||""),!0)},dirtyAll:function(e){for(var n=aC+(e=e||""),t=this._caches,r=0;r<t.length;r++)t[r]&&(t[r][n]=!0)},fresh:function(e){this.put(aC+(e=e||""),!1)},freshAll:function(e){for(var n=aC+(e=e||""),t=this._caches,r=0;r<t.length;r++)t[r]&&(t[r][n]=!1)},isDirty:function(e){var n=aC+(e=e||""),t=this._context;return!t.hasOwnProperty(n)||!0===t[n]},deleteContext:function(e){delete this._caches[e],this._context={}},delete:function(e){delete this._context[e]},clearAll:function(){this._caches={}},getContext:function(){return this._context},eachContext:function(e,n){Object.keys(this._caches).forEach(function(r){e&&e.call(n,r)})},miss:function(e){return!this._context.hasOwnProperty(e)}}).constructor=C2;const kB=C2;var wi=Us.extend({width:512,height:512,type:5121,format:6408,wrapS:10497,wrapT:10497,minFilter:9987,magFilter:9729,useMipmap:!0,anisotropic:1,flipY:!0,sRGB:!0,unpackAlignment:4,premultiplyAlpha:!1,dynamic:!1,NPOT:!1,__used:0},function(){this._cache=new kB},{getWebGLTexture:function(e){var n=e.gl,t=this._cache;return t.use(e.__uid__),t.miss("webgl_texture")&&t.put("webgl_texture",n.createTexture()),this.dynamic?this.update(e):t.isDirty()&&(this.update(e),t.fresh()),t.get("webgl_texture")},bind:function(){},unbind:function(){},dirty:function(){this._cache&&this._cache.dirtyAll()},update:function(e){},updateCommon:function(e){var n=e.gl;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,this.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,this.unpackAlignment),6402===this.format&&(this.useMipmap=!1);var t=e.getGLExtension("EXT_sRGB");this.format===wi.SRGB&&!t&&(this.format=wi.RGB),this.format===wi.SRGB_ALPHA&&!t&&(this.format=wi.RGBA),this.NPOT=!this.isPowerOfTwo()},getAvailableWrapS:function(){return this.NPOT?33071:this.wrapS},getAvailableWrapT:function(){return this.NPOT?33071:this.wrapT},getAvailableMinFilter:function(){var e=this.minFilter;return this.NPOT||!this.useMipmap?9984===e||9986===e?9728:9987===e||9985===e?9729:e:e},getAvailableMagFilter:function(){return this.magFilter},nextHighestPowerOfTwo:function(e){--e;for(var n=1;n<32;n<<=1)e|=e>>n;return e+1},dispose:function(e){var n=this._cache;n.use(e.__uid__);var t=n.get("webgl_texture");t&&e.gl.deleteTexture(t),n.deleteContext(e.__uid__)},isRenderable:function(){},isPowerOfTwo:function(){}});Object.defineProperty(wi.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e}}),Object.defineProperty(wi.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e}}),wi.BYTE=5120,wi.UNSIGNED_BYTE=5121,wi.SHORT=5122,wi.UNSIGNED_SHORT=5123,wi.INT=5124,wi.UNSIGNED_INT=5125,wi.FLOAT=5126,wi.HALF_FLOAT=36193,wi.UNSIGNED_INT_24_8_WEBGL=34042,wi.DEPTH_COMPONENT=6402,wi.DEPTH_STENCIL=34041,wi.ALPHA=6406,wi.RGB=6407,wi.RGBA=6408,wi.LUMINANCE=6409,wi.LUMINANCE_ALPHA=6410,wi.SRGB=35904,wi.SRGB_ALPHA=35906,wi.COMPRESSED_RGB_S3TC_DXT1_EXT=33776,wi.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777,wi.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778,wi.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779,wi.NEAREST=9728,wi.LINEAR=9729,wi.NEAREST_MIPMAP_NEAREST=9984,wi.LINEAR_MIPMAP_NEAREST=9985,wi.NEAREST_MIPMAP_LINEAR=9986,wi.LINEAR_MIPMAP_LINEAR=9987,wi.REPEAT=10497,wi.CLAMP_TO_EDGE=33071,wi.MIRRORED_REPEAT=33648;const fr=wi;var Vl=LB.extend({skeleton:null,joints:null},function(){this.joints||(this.joints=[])},{offsetMatrix:null,isInstancedMesh:function(){return!1},isSkinnedMesh:function(){return!!(this.skeleton&&this.joints&&this.joints.length>0)},clone:function(){var e=LB.prototype.clone.call(this);return e.skeleton=this.skeleton,this.joints&&(e.joints=this.joints.slice()),e}});Vl.POINTS=0,Vl.LINES=1,Vl.LINE_LOOP=2,Vl.LINE_STRIP=3,Vl.TRIANGLES=4,Vl.TRIANGLE_STRIP=5,Vl.TRIANGLE_FAN=6,Vl.BACK=1029,Vl.FRONT=1028,Vl.FRONT_AND_BACK=1032,Vl.CW=2304,Vl.CCW=2305;const av=Vl;var S2={isPowerOfTwo:function(e){return 0==(e&e-1)},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))}};const H6=S2;var U6=H6.isPowerOfTwo;function G6(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))}var NB=fr.extend(function(){return{image:null,pixels:null,mipmaps:[],convertToPOT:!1}},{textureType:"texture2D",update:function(e){var n=e.gl;n.bindTexture(n.TEXTURE_2D,this._cache.get("webgl_texture")),this.updateCommon(e);var t=this.format,r=this.type,i=!(!this.convertToPOT||this.mipmaps.length||!this.image||this.wrapS!==fr.REPEAT&&this.wrapT!==fr.REPEAT||!this.NPOT);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,i?this.wrapS:this.getAvailableWrapS()),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,i?this.wrapT:this.getAvailableWrapT()),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,i?this.magFilter:this.getAvailableMagFilter()),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,i?this.minFilter:this.getAvailableMinFilter());var o=e.getGLExtension("EXT_texture_filter_anisotropic");if(o&&this.anisotropic>1&&n.texParameterf(n.TEXTURE_2D,o.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),36193===r&&(e.getGLExtension("OES_texture_half_float")||(r=5126)),this.mipmaps.length)for(var f=this.width,g=this.height,_=0;_<this.mipmaps.length;_++)this._updateTextureData(n,this.mipmaps[_],_,f,g,t,r,!1),f/=2,g/=2;else this._updateTextureData(n,this,0,this.width,this.height,t,r,i),this.useMipmap&&(!this.NPOT||i)&&n.generateMipmap(n.TEXTURE_2D);n.bindTexture(n.TEXTURE_2D,null)},_updateTextureData:function(e,n,t,r,i,o,d,f){if(n.image){var g=n.image;f&&(this._potCanvas=function ine(e,n){var t=G6(e.width),r=G6(e.height);return(n=n||document.createElement("canvas")).width=t,n.height=r,n.getContext("2d").drawImage(e.image,0,0,t,r),n}(this,this._potCanvas),g=this._potCanvas),e.texImage2D(e.TEXTURE_2D,t,o,o,d,g)}else o<=fr.COMPRESSED_RGBA_S3TC_DXT5_EXT&&o>=fr.COMPRESSED_RGB_S3TC_DXT1_EXT?e.compressedTexImage2D(e.TEXTURE_2D,t,o,r,i,0,n.pixels):e.texImage2D(e.TEXTURE_2D,t,o,r,i,0,o,d,n.pixels)},generateMipmap:function(e){var n=e.gl;this.useMipmap&&!this.NPOT&&(n.bindTexture(n.TEXTURE_2D,this._cache.get("webgl_texture")),n.generateMipmap(n.TEXTURE_2D))},isPowerOfTwo:function(){return U6(this.width)&&U6(this.height)},isRenderable:function(){return this.image?this.image.width>0&&this.image.height>0:!(!this.width||!this.height)},bind:function(e){e.gl.bindTexture(e.gl.TEXTURE_2D,this.getWebGLTexture(e))},unbind:function(e){e.gl.bindTexture(e.gl.TEXTURE_2D,null)},load:function(e,n){var t=oo.createImage();n&&(t.crossOrigin=n);var r=this;return t.onload=function(){r.dirty(),r.trigger("success",r)},t.onerror=function(){r.trigger("error",r)},t.src=e,this.image=t,this}});Object.defineProperty(NB.prototype,"width",{get:function(){return this.image?this.image.width:this._width},set:function(e){this.image?console.warn("Texture from image can't set width"):(this._width!==e&&this.dirty(),this._width=e)}}),Object.defineProperty(NB.prototype,"height",{get:function(){return this.image?this.image.height:this._height},set:function(e){this.image?console.warn("Texture from image can't set height"):(this._height!==e&&this.dirty(),this._height=e)}});const Kr=NB;function W6(e){return{byte:oo.Int8Array,ubyte:oo.Uint8Array,short:oo.Int16Array,ushort:oo.Uint16Array}[e]||oo.Float32Array}function FB(e){return"attr_"+e}function Ly(e,n,t,r){switch(this.name=e,this.type=n,this.size=t,this.semantic=r||"",this.value=null,t){case 1:this.get=function(i){return this.value[i]},this.set=function(i,o){this.value[i]=o},this.copy=function(i,o){this.value[i]=this.value[i]};break;case 2:this.get=function(i,o){var d=this.value;return o[0]=d[2*i],o[1]=d[2*i+1],o},this.set=function(i,o){var d=this.value;d[2*i]=o[0],d[2*i+1]=o[1]},this.copy=function(i,o){var d=this.value;d[i*=2]=d[o*=2],d[i+1]=d[o+1]};break;case 3:this.get=function(i,o){var d=3*i,f=this.value;return o[0]=f[d],o[1]=f[d+1],o[2]=f[d+2],o},this.set=function(i,o){var d=3*i,f=this.value;f[d]=o[0],f[d+1]=o[1],f[d+2]=o[2]},this.copy=function(i,o){var d=this.value;d[i*=3]=d[o*=3],d[i+1]=d[o+1],d[i+2]=d[o+2]};break;case 4:this.get=function(i,o){var d=this.value,f=4*i;return o[0]=d[f],o[1]=d[f+1],o[2]=d[f+2],o[3]=d[f+3],o},this.set=function(i,o){var d=this.value,f=4*i;d[f]=o[0],d[f+1]=o[1],d[f+2]=o[2],d[f+3]=o[3]},this.copy=function(i,o){var d=this.value;d[i*=4]=d[o*=4],d[i+1]=d[o+1],d[i+2]=d[o+2],d[i+3]=d[o+3]}}}function j6(e,n,t,r,i){this.name=e,this.type=n,this.buffer=t,this.size=r,this.semantic=i,this.symbol="",this.needsRemove=!1}function Z6(e){this.buffer=e,this.count=0}Ly.prototype.init=function(e){if(!this.value||this.value.length!==e*this.size){var n=W6(this.type);this.value=new n(e*this.size)}},Ly.prototype.fromArray=function(e){var t,n=W6(this.type);if(e[0]&&e[0].length){var r=0,i=this.size;t=new n(e.length*i);for(var o=0;o<e.length;o++)for(var d=0;d<i;d++)t[r++]=e[o][d]}else t=new n(e);this.value=t},Ly.prototype.clone=function(e){var n=new Ly(this.name,this.type,this.size,this.semantic);return e&&console.warn("todo"),n};var qd=Us.extend(function(){return{attributes:{},indices:null,dynamic:!0,_enabledAttributes:null,__used:0}},function(){this._cache=new kB,this._attributeList=Object.keys(this.attributes),this.__vaoCache={}},{mainAttribute:"",pick:null,pickByRay:null,dirty:function(){for(var e=this.getEnabledAttributes(),n=0;n<e.length;n++)this.dirtyAttribute(e[n]);this.dirtyIndices(),this._enabledAttributes=null,this._cache.dirty("any")},dirtyIndices:function(){this._cache.dirtyAll("indices")},dirtyAttribute:function(e){this._cache.dirtyAll(FB(e)),this._cache.dirtyAll("attributes")},getTriangleIndices:function(e,n){if(e<this.triangleCount&&e>=0){n||(n=[]);var t=this.indices;return n[0]=t[3*e],n[1]=t[3*e+1],n[2]=t[3*e+2],n}},setTriangleIndices:function(e,n){var t=this.indices;t[3*e]=n[0],t[3*e+1]=n[1],t[3*e+2]=n[2]},isUseIndices:function(){return!!this.indices},initIndicesFromArray:function(e){var n,t=this.vertexCount>65535?oo.Uint32Array:oo.Uint16Array;if(e[0]&&e[0].length){var r=0;n=new t(3*e.length);for(var o=0;o<e.length;o++)for(var d=0;d<3;d++)n[r++]=e[o][d]}else n=new t(e);this.indices=n},createAttribute:function(e,n,t,r){var i=new Ly(e,n,t,r);return this.attributes[e]&&this.removeAttribute(e),this.attributes[e]=i,this._attributeList.push(e),i},removeAttribute:function(e){var n=this._attributeList,t=n.indexOf(e);return t>=0&&(n.splice(t,1),delete this.attributes[e],!0)},getAttribute:function(e){return this.attributes[e]},getEnabledAttributes:function(){var e=this._enabledAttributes,n=this._attributeList;if(e)return e;for(var t=[],r=this.vertexCount,i=0;i<n.length;i++){var o=n[i],d=this.attributes[o];d.value&&d.value.length===r*d.size&&t.push(o)}return this._enabledAttributes=t,t},getBufferChunks:function(e){var n=this._cache;n.use(e.__uid__);var t=n.isDirty("attributes"),r=n.isDirty("indices");if(t||r){this._updateBuffer(e.gl,t,r);for(var i=this.getEnabledAttributes(),o=0;o<i.length;o++)n.fresh(FB(i[o]));n.fresh("attributes"),n.fresh("indices")}return n.fresh("any"),n.get("chunks")},_updateBuffer:function(e,n,t){var r=this._cache,i=r.get("chunks"),o=!1;i||((i=[])[0]={attributeBuffers:[],indicesBuffer:null},r.put("chunks",i),o=!0);var d=i[0],f=d.attributeBuffers,g=d.indicesBuffer;if(n||o){var _=this.getEnabledAttributes(),w={};if(!o)for(var S=0;S<f.length;S++)w[f[S].name]=f[S];for(var k=0;k<_.length;k++){var pe,De,V=_[k],ne=this.attributes[V];o||(pe=w[V]),De=pe?pe.buffer:e.createBuffer(),r.isDirty(FB(V))&&(e.bindBuffer(e.ARRAY_BUFFER,De),e.bufferData(e.ARRAY_BUFFER,ne.value,this.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW)),f[k]=new j6(V,ne.type,De,ne.size,ne.semantic)}for(S=k;S<f.length;S++)e.deleteBuffer(f[S].buffer);f.length=k}this.isUseIndices()&&(t||o)&&(g||(g=new Z6(e.createBuffer()),d.indicesBuffer=g),g.count=this.indices.length,e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,g.buffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,this.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW))},dispose:function(e){var n=this._cache;n.use(e.__uid__);var t=n.get("chunks");if(t)for(var r=0;r<t.length;r++){for(var i=t[r],o=0;o<i.attributeBuffers.length;o++)e.gl.deleteBuffer(i.attributeBuffers[o].buffer);i.indicesBuffer&&e.gl.deleteBuffer(i.indicesBuffer.buffer)}if(this.__vaoCache){var f=e.getGLExtension("OES_vertex_array_object");for(var g in this.__vaoCache){var _=this.__vaoCache[g].vao;_&&f.deleteVertexArrayOES(_)}}this.__vaoCache={},n.deleteContext(e.__uid__)}});Object.defineProperty&&(Object.defineProperty(qd.prototype,"vertexCount",{enumerable:!1,get:function(){var e=this.attributes[this.mainAttribute];return e||(e=this.attributes[this._attributeList[0]]),e&&e.value?e.value.length/e.size:0}}),Object.defineProperty(qd.prototype,"triangleCount",{enumerable:!1,get:function(){var e=this.indices;return e?e.length/3:0}})),qd.STATIC_DRAW=35044,qd.DYNAMIC_DRAW=35048,qd.STREAM_DRAW=35040,qd.AttributeBuffer=j6,qd.IndicesBuffer=Z6,qd.Attribute=Ly;const ov=qd;var js=Et.create,Oy=Et.add,sv=Et.set,Ou=ov.Attribute,lv=ov.extend(function(){return{attributes:{position:new Ou("position","float",3,"POSITION"),texcoord0:new Ou("texcoord0","float",2,"TEXCOORD_0"),texcoord1:new Ou("texcoord1","float",2,"TEXCOORD_1"),normal:new Ou("normal","float",3,"NORMAL"),tangent:new Ou("tangent","float",4,"TANGENT"),color:new Ou("color","float",4,"COLOR"),weight:new Ou("weight","float",3,"WEIGHT"),joint:new Ou("joint","float",4,"JOINT"),barycentric:new Ou("barycentric","float",3,null)},boundingBox:null}},{mainAttribute:"position",updateBoundingBox:function(){var e=this.boundingBox;e||(e=this.boundingBox=new Ws);var n=this.attributes.position.value;if(n&&n.length){var t=e.min,r=e.max,i=t.array,o=r.array;Et.set(i,n[0],n[1],n[2]),Et.set(o,n[0],n[1],n[2]);for(var d=3;d<n.length;){var f=n[d++],g=n[d++],_=n[d++];f<i[0]&&(i[0]=f),g<i[1]&&(i[1]=g),_<i[2]&&(i[2]=_),f>o[0]&&(o[0]=f),g>o[1]&&(o[1]=g),_>o[2]&&(o[2]=_)}t._dirty=!0,r._dirty=!0}},generateVertexNormals:function(){if(this.vertexCount){var e=this.indices,n=this.attributes,t=n.position.value,r=n.normal.value;if(r&&r.length===t.length)for(var i=0;i<r.length;i++)r[i]=0;else r=n.normal.value=new oo.Float32Array(t.length);for(var k,V,ne,o=js(),d=js(),f=js(),g=js(),_=js(),w=js(),S=e?e.length:this.vertexCount,pe=0;pe<S;)for(e?(k=e[pe++],V=e[pe++],ne=e[pe++]):(k=pe++,V=pe++,ne=pe++),sv(o,t[3*k],t[3*k+1],t[3*k+2]),sv(d,t[3*V],t[3*V+1],t[3*V+2]),sv(f,t[3*ne],t[3*ne+1],t[3*ne+2]),Et.sub(g,o,d),Et.sub(_,d,f),Et.cross(w,g,_),i=0;i<3;i++)r[3*k+i]=r[3*k+i]+w[i],r[3*V+i]=r[3*V+i]+w[i],r[3*ne+i]=r[3*ne+i]+w[i];for(i=0;i<r.length;)sv(w,r[i],r[i+1],r[i+2]),Et.normalize(w,w),r[i++]=w[0],r[i++]=w[1],r[i++]=w[2];this.dirty()}},generateFaceNormals:function(){if(this.vertexCount){this.isUniqueVertex()||this.generateUniqueVertex();var e=this.indices,n=this.attributes,t=n.position.value,r=n.normal.value,i=js(),o=js(),d=js(),f=js(),g=js(),_=js();r||(r=n.normal.value=new Float32Array(t.length));for(var S,k,V,w=e?e.length:this.vertexCount,ne=0;ne<w;){e?(S=e[ne++],k=e[ne++],V=e[ne++]):(S=ne++,k=ne++,V=ne++),sv(i,t[3*S],t[3*S+1],t[3*S+2]),sv(o,t[3*k],t[3*k+1],t[3*k+2]),sv(d,t[3*V],t[3*V+1],t[3*V+2]),Et.sub(f,i,o),Et.sub(g,o,d),Et.cross(_,f,g),Et.normalize(_,_);for(var pe=0;pe<3;pe++)r[3*S+pe]=_[pe],r[3*k+pe]=_[pe],r[3*V+pe]=_[pe]}this.dirty()}},generateTangents:function(){if(this.vertexCount){var e=this.vertexCount,n=this.attributes;n.tangent.value||(n.tangent.value=new Float32Array(4*e));var t=n.texcoord0.value,r=n.position.value,i=n.tangent.value,o=n.normal.value;if(!t)return void console.warn("Geometry without texcoords can't generate tangents.");for(var d=[],f=[],g=0;g<e;g++)d[g]=[0,0,0],f[g]=[0,0,0];var V,ne,pe,_=[0,0,0],w=[0,0,0],S=this.indices,k=S?S.length:this.vertexCount;for(g=0;g<k;){S?(V=S[g++],ne=S[g++],pe=S[g++]):(V=g++,ne=g++,pe=g++);var De=t[2*V],ke=t[2*V+1],ot=r[3*V],Ht=r[3*V+1],gn=r[3*V+2],Dn=r[3*ne]-ot,jt=r[3*pe]-ot,cn=r[3*ne+1]-Ht,Yt=r[3*pe+1]-Ht,Jn=r[3*ne+2]-gn,Ln=r[3*pe+2]-gn,oi=t[2*ne]-De,Nr=t[2*pe]-De,Mi=t[2*ne+1]-ke,Ir=t[2*pe+1]-ke,ei=1/(oi*Ir-Mi*Nr);_[0]=(Ir*Dn-Mi*jt)*ei,_[1]=(Ir*cn-Mi*Yt)*ei,_[2]=(Ir*Jn-Mi*Ln)*ei,w[0]=(oi*jt-Nr*Dn)*ei,w[1]=(oi*Yt-Nr*cn)*ei,w[2]=(oi*Ln-Nr*Jn)*ei,Oy(d[V],d[V],_),Oy(d[ne],d[ne],_),Oy(d[pe],d[pe],_),Oy(f[V],f[V],w),Oy(f[ne],f[ne],w),Oy(f[pe],f[pe],w)}var Qa=js(),si=js(),Wi=js();for(g=0;g<e;g++){Wi[0]=o[3*g],Wi[1]=o[3*g+1],Wi[2]=o[3*g+2];var ji=d[g];Et.scale(Qa,Wi,Et.dot(Wi,ji)),Et.sub(Qa,ji,Qa),Et.normalize(Qa,Qa),Et.cross(si,Wi,ji),i[4*g]=Qa[0],i[4*g+1]=Qa[1],i[4*g+2]=Qa[2],i[4*g+3]=Et.dot(si,f[g])<0?-1:1}this.dirty()}},isUniqueVertex:function(){return!this.isUseIndices()||this.vertexCount===this.indices.length},generateUniqueVertex:function(){if(this.vertexCount&&this.indices){this.indices.length>65535&&(this.indices=new oo.Uint32Array(this.indices));for(var e=this.attributes,n=this.indices,t=this.getEnabledAttributes(),r={},i=0;i<t.length;i++)r[o=t[i]]=e[o].value,e[o].init(this.indices.length);for(var d=0,f=0;f<n.length;f++){var g=n[f];for(i=0;i<t.length;i++)for(var o,_=e[o=t[i]].value,w=e[o].size,S=0;S<w;S++)_[d*w+S]=r[o][g*w+S];n[f]=d,d++}this.dirty()}},generateBarycentric:function(){if(this.vertexCount){this.isUniqueVertex()||this.generateUniqueVertex();var e=this.attributes,n=e.barycentric.value,t=this.indices;if(!n||n.length!==3*t.length){n=e.barycentric.value=new Float32Array(3*t.length);for(var r=0;r<(t?t.length:this.vertexCount/3);)for(var i=0;i<3;i++)n[3*(t?t[r++]:3*r+i)+i]=1;this.dirty()}}},applyTransform:function(e){var n=this.attributes,t=n.position.value,r=n.normal.value,i=n.tangent.value;e=e.array;var o=In.create();In.invert(o,e),In.transpose(o,o);var d=Et.transformMat4,f=Et.forEach;f(t,3,0,null,d,e),r&&f(r,3,0,null,d,o),i&&f(i,4,0,null,d,o),this.boundingBox&&this.updateBoundingBox()},dispose:function(e){var n=this._cache;n.use(e.__uid__);var t=n.get("chunks");if(t)for(var r=0;r<t.length;r++){for(var i=t[r],o=0;o<i.attributeBuffers.length;o++)e.gl.deleteBuffer(i.attributeBuffers[o].buffer);i.indicesBuffer&&e.gl.deleteBuffer(i.indicesBuffer.buffer)}if(this.__vaoCache){var f=e.getGLExtension("OES_vertex_array_object");for(var g in this.__vaoCache){var _=this.__vaoCache[g].vao;_&&f.deleteVertexArrayOES(_)}}this.__vaoCache={},n.deleteContext(e.__uid__)}});lv.STATIC_DRAW=ov.STATIC_DRAW,lv.DYNAMIC_DRAW=ov.DYNAMIC_DRAW,lv.STREAM_DRAW=ov.STREAM_DRAW,lv.AttributeBuffer=ov.AttributeBuffer,lv.IndicesBuffer=ov.IndicesBuffer,lv.Attribute=Ou;const Ei=lv;var su="uniform vec3 ",oC="uniform float ",ky="@export clay.header.",Ny="@end",es=":unconfigurable;";const one=[ky+"directional_light",su+"directionalLightDirection[DIRECTIONAL_LIGHT_COUNT]"+es,su+"directionalLightColor[DIRECTIONAL_LIGHT_COUNT]"+es,Ny,ky+"ambient_light",su+"ambientLightColor[AMBIENT_LIGHT_COUNT]"+es,Ny,ky+"ambient_sh_light",su+"ambientSHLightColor[AMBIENT_SH_LIGHT_COUNT]"+es,su+"ambientSHLightCoefficients[AMBIENT_SH_LIGHT_COUNT * 9]"+es,"vec3 calcAmbientSHLight(int idx, vec3 N) {\n int offset = 9 * idx;\n return ambientSHLightCoefficients[0]\n + ambientSHLightCoefficients[1] * N.x\n + ambientSHLightCoefficients[2] * N.y\n + ambientSHLightCoefficients[3] * N.z\n + ambientSHLightCoefficients[4] * N.x * N.z\n + ambientSHLightCoefficients[5] * N.z * N.y\n + ambientSHLightCoefficients[6] * N.y * N.x\n + ambientSHLightCoefficients[7] * (3.0 * N.z * N.z - 1.0)\n + ambientSHLightCoefficients[8] * (N.x * N.x - N.y * N.y);\n}",Ny,ky+"ambient_cubemap_light",su+"ambientCubemapLightColor[AMBIENT_CUBEMAP_LIGHT_COUNT]"+es,"uniform samplerCube ambientCubemapLightCubemap[AMBIENT_CUBEMAP_LIGHT_COUNT]"+es,"uniform sampler2D ambientCubemapLightBRDFLookup[AMBIENT_CUBEMAP_LIGHT_COUNT]"+es,Ny,ky+"point_light",su+"pointLightPosition[POINT_LIGHT_COUNT]"+es,oC+"pointLightRange[POINT_LIGHT_COUNT]"+es,su+"pointLightColor[POINT_LIGHT_COUNT]"+es,Ny,ky+"spot_light",su+"spotLightPosition[SPOT_LIGHT_COUNT]"+es,su+"spotLightDirection[SPOT_LIGHT_COUNT]"+es,oC+"spotLightRange[SPOT_LIGHT_COUNT]"+es,oC+"spotLightUmbraAngleCosine[SPOT_LIGHT_COUNT]"+es,oC+"spotLightPenumbraAngleCosine[SPOT_LIGHT_COUNT]"+es,oC+"spotLightFalloffFactor[SPOT_LIGHT_COUNT]"+es,su+"spotLightColor[SPOT_LIGHT_COUNT]"+es,Ny].join("\n");Yn.import(one);var sne=Lu.extend(function(){return{color:[1,1,1],intensity:1,castShadow:!0,shadowResolution:512,group:0}},{type:"",clone:function(){var e=Lu.prototype.clone.call(this);return e.color=Array.prototype.slice.call(this.color),e.intensity=this.intensity,e.castShadow=this.castShadow,e.shadowResolution=this.shadowResolution,e}});const lu=sne;var D2=function(e,n){this.normal=e||new On(0,1,0),this.distance=n||0};D2.prototype={constructor:D2,distanceToPoint:function(e){return Et.dot(e.array,this.normal.array)-this.distance},projectPoint:function(e,n){n||(n=new On);var t=this.distanceToPoint(e);return Et.scaleAndAdd(n.array,e.array,this.normal.array,-t),n._dirty=!0,n},normalize:function(){var e=1/Et.len(this.normal.array);Et.scale(this.normal.array,e),this.distance*=e},intersectFrustum:function(e){for(var n=e.vertices,t=this.normal.array,r=Et.dot(n[0].array,t)>this.distance,i=1;i<8;i++)if(Et.dot(n[i].array,t)>this.distance!=r)return!0},intersectLine:function(){var e=Et.create();return function(n,t,r){var i=this.distanceToPoint(n),o=this.distanceToPoint(t);if(i>0&&o>0||i<0&&o<0)return null;var d=this.normal.array,f=this.distance,g=n.array;Et.sub(e,t.array,n.array),Et.normalize(e,e);var _=Et.dot(d,e);if(0===_)return null;r||(r=new On);var w=(Et.dot(d,g)-f)/_;return Et.scaleAndAdd(r.array,g,e,-w),r._dirty=!0,r}}(),applyTransform:function(){var e=In.create(),n=Kn.create(),t=Kn.create();return t[3]=1,function(r){r=r.array,Et.scale(t,this.normal.array,this.distance),Kn.transformMat4(t,t,r),this.distance=Et.dot(t,this.normal.array),In.invert(e,r),In.transpose(e,e),n[3]=0,Et.copy(n,this.normal.array),Kn.transformMat4(n,n,e),Et.copy(this.normal.array,n)}}(),copy:function(e){Et.copy(this.normal.array,e.normal.array),this.normal._dirty=!0,this.distance=e.distance},clone:function(){var e=new D2;return e.copy(this),e}};const Y6=D2;var $a=Et.set,X6=Et.copy,$6=Et.transformMat4,BB=Math.min,VB=Math.max,K6=function(){this.planes=[];for(var e=0;e<6;e++)this.planes.push(new Y6);for(this.boundingBox=new Ws,this.vertices=[],e=0;e<8;e++)this.vertices[e]=Et.fromValues(0,0,0)};K6.prototype={setFromProjection:function(e){var n=this.planes,t=e.array,r=t[0],i=t[1],o=t[2],d=t[3],f=t[4],g=t[5],_=t[6],w=t[7],S=t[8],k=t[9],V=t[10],ne=t[11],pe=t[12],De=t[13],Re=t[14],Fe=t[15];$a(n[0].normal.array,d-r,w-f,ne-S),n[0].distance=-(Fe-pe),n[0].normalize(),$a(n[1].normal.array,d+r,w+f,ne+S),n[1].distance=-(Fe+pe),n[1].normalize(),$a(n[2].normal.array,d+i,w+g,ne+k),n[2].distance=-(Fe+De),n[2].normalize(),$a(n[3].normal.array,d-i,w-g,ne-k),n[3].distance=-(Fe-De),n[3].normalize(),$a(n[4].normal.array,d-o,w-_,ne-V),n[4].distance=-(Fe-Re),n[4].normalize(),$a(n[5].normal.array,d+o,w+_,ne+V),n[5].distance=-(Fe+Re),n[5].normalize();var ke=this.boundingBox,Be=this.vertices;if(0===Fe){var at=g/r,ot=-Re/(V-1),St=-Re/(V+1),yt=-St/g,Ht=-ot/g;ke.min.set(-yt*at,-yt,St),ke.max.set(yt*at,yt,ot),$a(Be[0],-yt*at,-yt,St),$a(Be[1],-yt*at,yt,St),$a(Be[2],yt*at,-yt,St),$a(Be[3],yt*at,yt,St),$a(Be[4],-Ht*at,-Ht,ot),$a(Be[5],-Ht*at,Ht,ot),$a(Be[6],Ht*at,-Ht,ot),$a(Be[7],Ht*at,Ht,ot)}else{var rn=(-1-pe)/r,Kt=(1-pe)/r,gn=(1-De)/g,_n=(-1-De)/g,ln=(-1-Re)/V,Dn=(1-Re)/V;ke.min.set(Math.min(rn,Kt),Math.min(_n,gn),Math.min(Dn,ln)),ke.max.set(Math.max(Kt,rn),Math.max(gn,_n),Math.max(ln,Dn));var jt=ke.min.array,cn=ke.max.array;$a(Be[0],jt[0],jt[1],jt[2]),$a(Be[1],jt[0],cn[1],jt[2]),$a(Be[2],cn[0],jt[1],jt[2]),$a(Be[3],cn[0],cn[1],jt[2]),$a(Be[4],jt[0],jt[1],cn[2]),$a(Be[5],jt[0],cn[1],cn[2]),$a(Be[6],cn[0],jt[1],cn[2]),$a(Be[7],cn[0],cn[1],cn[2])}},getTransformedBoundingBox:function(){var e=Et.create();return function(n,t){var r=this.vertices,i=t.array,o=n.min,d=n.max,f=o.array,g=d.array,_=r[0];$6(e,_,i),X6(f,e),X6(g,e);for(var w=1;w<8;w++)$6(e,_=r[w],i),f[0]=BB(e[0],f[0]),f[1]=BB(e[1],f[1]),f[2]=BB(e[2],f[2]),g[0]=VB(e[0],g[0]),g[1]=VB(e[1],g[1]),g[2]=VB(e[2],g[2]);return o._dirty=!0,d._dirty=!0,n}}()};const zB=K6;var lne=Lu.extend(function(){return{projectionMatrix:new cr,invProjectionMatrix:new cr,viewMatrix:new cr,frustum:new zB}},function(){this.update(!0)},{update:function(e){Lu.prototype.update.call(this,e),cr.invert(this.viewMatrix,this.worldTransform),this.updateProjectionMatrix(),cr.invert(this.invProjectionMatrix,this.projectionMatrix),this.frustum.setFromProjection(this.projectionMatrix)},setViewMatrix:function(e){cr.copy(this.viewMatrix,e),cr.invert(this.worldTransform,e),this.decomposeWorldTransform()},decomposeProjectionMatrix:function(){},setProjectionMatrix:function(e){cr.copy(this.projectionMatrix,e),cr.invert(this.invProjectionMatrix,e),this.decomposeProjectionMatrix()},updateProjectionMatrix:function(){},castRay:function(){var e=Kn.create();return function(n,t){var r=void 0!==t?t:new _2,i=n.array[0],o=n.array[1];return Kn.set(e,i,o,-1,1),Kn.transformMat4(e,e,this.invProjectionMatrix.array),Kn.transformMat4(e,e,this.worldTransform.array),Et.scale(r.origin.array,e,1/e[3]),Kn.set(e,i,o,1,1),Kn.transformMat4(e,e,this.invProjectionMatrix.array),Kn.transformMat4(e,e,this.worldTransform.array),Et.scale(e,e,1/e[3]),Et.sub(r.direction.array,e,r.origin.array),Et.normalize(r.direction.array,r.direction.array),r.direction._dirty=!0,r.origin._dirty=!0,r}}()});const Fy=lne;var cne=In.create(),Q6=In.create(),HB={};function une(e){var n=[],t=Object.keys(e);t.sort();for(var r=0;r<t.length;r++){var i=t[r];n.push(i+" "+e[i])}var o=n.join("\n");if(HB[o])return HB[o];var d=qo.genGUID();return HB[o]=d,d}function M2(){this.opaque=[],this.transparent=[],this._opaqueCount=0,this._transparentCount=0}M2.prototype.startCount=function(){this._opaqueCount=0,this._transparentCount=0},M2.prototype.add=function(e,n){n?this.transparent[this._transparentCount++]=e:this.opaque[this._opaqueCount++]=e},M2.prototype.endCount=function(){this.transparent.length=this._transparentCount,this.opaque.length=this._opaqueCount};var dne=Lu.extend(function(){return{material:null,lights:[],viewBoundingBoxLastFrame:new Ws,shadowUniforms:{},_cameraList:[],_lightUniforms:{},_previousLightNumber:{},_lightNumber:{},_lightProgramKeys:{},_nodeRepository:{},_renderLists:new g6(20)}},function(){this._scene=this},{addToScene:function(e){e instanceof Fy?(this._cameraList.length>0&&console.warn("Found multiple camera in one scene. Use the fist one."),this._cameraList.push(e)):e instanceof lu&&this.lights.push(e),e.name&&(this._nodeRepository[e.name]=e)},removeFromScene:function(e){var n;e instanceof Fy?(n=this._cameraList.indexOf(e))>=0&&this._cameraList.splice(n,1):e instanceof lu&&(n=this.lights.indexOf(e))>=0&&this.lights.splice(n,1),e.name&&delete this._nodeRepository[e.name]},getNode:function(e){return this._nodeRepository[e]},setMainCamera:function(e){var n=this._cameraList.indexOf(e);n>=0&&this._cameraList.splice(n,1),this._cameraList.unshift(e)},getMainCamera:function(){return this._cameraList[0]},getLights:function(){return this.lights},updateLights:function(){var e=this.lights;this._previousLightNumber=this._lightNumber;for(var n={},t=0;t<e.length;t++){var r=e[t];if(!r.invisible){var i=r.group;n[i]||(n[i]={}),n[i][r.type]=n[i][r.type]||0,n[i][r.type]++}}for(var o in this._lightNumber=n,n)this._lightProgramKeys[o]=une(n[o]);this._updateLightUniforms()},cloneNode:function(e){var n=e.clone(),t={};return function r(i,o){t[i.__uid__]=o;for(var d=0;d<i._children.length;d++)r(i._children[d],o._children[d])}(e,n),n.traverse(function(i){i.skeleton&&(i.skeleton=i.skeleton.clone(t)),i.material&&(i.material=i.material.clone())}),n},updateRenderList:function(e,n){var t=e.__uid__,r=this._renderLists.get(t);return r||(r=new M2,this._renderLists.put(t,r)),r.startCount(),n&&(this.viewBoundingBoxLastFrame.min.set(1/0,1/0,1/0),this.viewBoundingBoxLastFrame.max.set(-1/0,-1/0,-1/0)),this._doUpdateRenderList(this,e,this.material&&this.material.transparent||!1,r,n),r.endCount(),r},getRenderList:function(e){return this._renderLists.get(e.__uid__)},_doUpdateRenderList:function(e,n,t,r,i){if(!e.invisible)for(var o=0;o<e._children.length;o++){var d=e._children[o];if(d.isRenderable()){var f=d.isSkinnedMesh()?cne:d.worldTransform.array,g=d.geometry;In.multiplyAffine(Q6,n.viewMatrix.array,f),(i&&!g.boundingBox||!this.isFrustumCulled(d,n,Q6))&&r.add(d,d.material.transparent||t)}d._children.length>0&&this._doUpdateRenderList(d,n,t,r,i)}},isFrustumCulled:function(){var e=new Ws,n=new cr;return function(t,r,i){var o=t.boundingBox;if(o||(o=t.skeleton&&t.skeleton.boundingBox?t.skeleton.boundingBox:t.geometry.boundingBox),!o)return!1;if(n.array=i,e.transformFrom(o,n),t.castShadow&&this.viewBoundingBoxLastFrame.union(e),t.frustumCulling){if(!e.intersectBoundingBox(r.frustum.boundingBox))return!0;n.array=r.projectionMatrix.array,e.max.array[2]>0&&e.min.array[2]<0&&(e.max.array[2]=-1e-20),e.applyProjection(n);var d=e.min.array,f=e.max.array;if(f[0]<-1||d[0]>1||f[1]<-1||d[1]>1||f[2]<-1||d[2]>1)return!0}return!1}}(),_updateLightUniforms:function(){var e=this.lights;e.sort(hne);var n=this._lightUniforms;for(var t in n)for(var r in n[t])n[t][r].value.length=0;for(var i=0;i<e.length;i++){var o=e[i];if(!o.invisible)for(var r in t=o.group,o.uniformTemplates){var d=o.uniformTemplates[r],f=d.value(o);if(null!=f){n[t]||(n[t]={}),n[t][r]||(n[t][r]={type:"",value:[]});var g=n[t][r];switch(g.type=d.type+"v",d.type){case"1i":case"1f":case"t":g.value.push(f);break;case"2f":case"3f":case"4f":for(var _=0;_<f.length;_++)g.value.push(f[_]);break;default:console.error("Unkown light uniform type "+d.type)}}}}},getLightGroups:function(){var e=[];for(var n in this._lightNumber)e.push(n);return e},getNumberChangedLightGroups:function(){var e=[];for(var n in this._lightNumber)this.isLightNumberChanged(n)&&e.push(n);return e},isLightNumberChanged:function(e){var n=this._previousLightNumber,t=this._lightNumber;for(var r in t[e])if(!n[e]||t[e][r]!==n[e][r])return!0;for(var r in n[e])if(!t[e]||t[e][r]!==n[e][r])return!0;return!1},getLightsNumbers:function(e){return this._lightNumber[e]},getProgramKey:function(e){return this._lightProgramKeys[e]},setLightUniforms:function(){function e(n,t,r){for(var i in n){var o=n[i];if("tv"===o.type){if(!t.hasUniform(i))continue;for(var d=[],f=0;f<o.value.length;f++){var _=t.takeCurrentTextureSlot(r,o.value[f]);d.push(_)}t.setUniform(r.gl,"1iv",i,d)}else t.setUniform(r.gl,o.type,i,o.value)}}return function(n,t,r){e(this._lightUniforms[t],n,r),e(this.shadowUniforms,n,r)}}(),dispose:function(){this.material=null,this._opaqueList=[],this._transparentList=[],this.lights=[],this._lightUniforms={},this._lightNumber={},this._nodeRepository={}}});function hne(e,n){if(n.castShadow&&!e.castShadow)return!0}const Bf=dne;var fne=z(9040),T2=H6.isPowerOfTwo,pne=["px","nx","py","ny","pz","nz"],UB=fr.extend(function(){return{image:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},pixels:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},mipmaps:[]}},{textureType:"textureCube",update:function(e){var n=e.gl;n.bindTexture(n.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),this.updateCommon(e);var t=this.format,r=this.type;n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_WRAP_S,this.getAvailableWrapS()),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_WRAP_T,this.getAvailableWrapT()),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_MAG_FILTER,this.getAvailableMagFilter()),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_MIN_FILTER,this.getAvailableMinFilter());var i=e.getGLExtension("EXT_texture_filter_anisotropic");if(i&&this.anisotropic>1&&n.texParameterf(n.TEXTURE_CUBE_MAP,i.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),36193===r&&(e.getGLExtension("OES_texture_half_float")||(r=5126)),this.mipmaps.length)for(var d=this.width,f=this.height,g=0;g<this.mipmaps.length;g++)this._updateTextureData(n,this.mipmaps[g],g,d,f,t,r),d/=2,f/=2;else this._updateTextureData(n,this,0,this.width,this.height,t,r),!this.NPOT&&this.useMipmap&&n.generateMipmap(n.TEXTURE_CUBE_MAP);n.bindTexture(n.TEXTURE_CUBE_MAP,null)},_updateTextureData:function(e,n,t,r,i,o,d){for(var f=0;f<6;f++){var g=pne[f],_=n.image&&n.image[g];_?e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+f,t,o,o,d,_):e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+f,t,o,r,i,0,o,d,n.pixels&&n.pixels[g])}},generateMipmap:function(e){var n=e.gl;this.useMipmap&&!this.NPOT&&(n.bindTexture(n.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),n.generateMipmap(n.TEXTURE_CUBE_MAP))},bind:function(e){e.gl.bindTexture(e.gl.TEXTURE_CUBE_MAP,this.getWebGLTexture(e))},unbind:function(e){e.gl.bindTexture(e.gl.TEXTURE_CUBE_MAP,null)},isPowerOfTwo:function(){return this.image.px?T2(this.image.px.width)&&T2(this.image.px.height):T2(this.width)&&T2(this.height)},isRenderable:function(){return this.image.px?By(this.image.px)&&By(this.image.nx)&&By(this.image.py)&&By(this.image.ny)&&By(this.image.pz)&&By(this.image.nz):!(!this.width||!this.height)},load:function(e,n){var t=0,r=this;return qo.each(e,function(i,o){var d=oo.createImage();n&&(d.crossOrigin=n),d.onload=function(){0==--t&&(r.dirty(),r.trigger("success",r))},d.onerror=function(){t--},t++,d.src=i,r.image[o]=d}),this}});function By(e){return e.width>0&&e.height>0}Object.defineProperty(UB.prototype,"width",{get:function(){return this.image&&this.image.px?this.image.px.width:this._width},set:function(e){this.image&&this.image.px?console.warn("Texture from image can't set width"):(this._width!==e&&this.dirty(),this._width=e)}}),Object.defineProperty(UB.prototype,"height",{get:function(){return this.image&&this.image.px?this.image.px.height:this._height},set:function(e){this.image&&this.image.px?console.warn("Texture from image can't set height"):(this._height!==e&&this.dirty(),this._height=e)}});const sC=UB;var gne=Fy.extend({fov:50,aspect:1,near:.1,far:2e3},{updateProjectionMatrix:function(){var e=this.fov/180*Math.PI;this.projectionMatrix.perspective(e,this.aspect,this.near,this.far)},decomposeProjectionMatrix:function(){var e=this.projectionMatrix.array,n=2*Math.atan(1/e[5]);this.fov=n/Math.PI*180,this.aspect=e[5]/e[0],this.near=e[14]/(e[10]-1),this.far=e[14]/(e[10]+1)},clone:function(){var e=Fy.prototype.clone.call(this);return e.fov=this.fov,e.aspect=this.aspect,e.near=this.near,e.far=this.far,e}});const No=gne;var E2="framebuffer",Jd="renderbuffer",q6=Jd+"_width",J6=Jd+"_height",GB=Jd+"_attached",WB="depthtexture_attached",uv=36160,lC=36161,cC=36096,uC=Us.extend({depthBuffer:!0,viewport:null,_width:0,_height:0,_textures:null,_boundRenderer:null},function(){this._cache=new kB,this._textures={}},{getTextureWidth:function(){return this._width},getTextureHeight:function(){return this._height},bind:function(e){if(e.__currentFrameBuffer){if(e.__currentFrameBuffer===this)return;console.warn("Renderer already bound with another framebuffer. Unbind it first")}e.__currentFrameBuffer=this;var n=e.gl;n.bindFramebuffer(uv,this._getFrameBufferGL(e)),this._boundRenderer=e;var t=this._cache;t.put("viewport",e.viewport);var i,o,r=!1;for(var d in this._textures){r=!0;var f=this._textures[d];f&&(i=f.texture.width,o=f.texture.height,this._doAttach(e,f.texture,d,f.target))}this._width=i,this._height=o,!r&&this.depthBuffer&&console.error("Must attach texture before bind, or renderbuffer may have incorrect width and height."),this.viewport?e.setViewport(this.viewport):e.setViewport(0,0,i,o,1);var g=t.get("attached_textures");if(g)for(var d in g)this._textures[d]||this._doDetach(n,d,g[d]);if(!t.get(WB)&&this.depthBuffer){t.miss(Jd)&&t.put(Jd,n.createRenderbuffer());var w=t.get(Jd);(i!==t.get(q6)||o!==t.get(J6))&&(n.bindRenderbuffer(lC,w),n.renderbufferStorage(lC,n.DEPTH_COMPONENT16,i,o),t.put(q6,i),t.put(J6,o),n.bindRenderbuffer(lC,null)),t.get(GB)||(n.framebufferRenderbuffer(uv,cC,lC,w),t.put(GB,!0))}},unbind:function(e){e.__currentFrameBuffer=null,e.gl.bindFramebuffer(uv,null),this._boundRenderer=null,this._cache.use(e.__uid__);var t=this._cache.get("viewport");t&&e.setViewport(t),this.updateMipmap(e)},updateMipmap:function(e){var n=e.gl;for(var t in this._textures){var r=this._textures[t];if(r){var i=r.texture;if(!i.NPOT&&i.useMipmap&&i.minFilter===fr.LINEAR_MIPMAP_LINEAR){var o="textureCube"===i.textureType?34067:3553;n.bindTexture(o,i.getWebGLTexture(e)),n.generateMipmap(o),n.bindTexture(o,null)}}}},checkStatus:function(e){return e.checkFramebufferStatus(uv)},_getFrameBufferGL:function(e){var n=this._cache;return n.use(e.__uid__),n.miss(E2)&&n.put(E2,e.gl.createFramebuffer()),n.get(E2)},attach:function(e,n,t){if(!e.width)throw new Error("The texture attached to color buffer is not a valid.");n=n||36064,t=t||3553;var o,r=this._boundRenderer;if(r&&r.gl){var d=this._cache;d.use(r.__uid__),o=d.get("attached_textures")}var f=this._textures[n];if(!f||f.target!==t||f.texture!==e||!o||null==o[n]){var g=!0;r&&(g=this._doAttach(r,e,n,t),this.viewport||r.setViewport(0,0,e.width,e.height,1)),g&&(this._textures[n]=this._textures[n]||{},this._textures[n].texture=e,this._textures[n].target=t)}},_doAttach:function(e,n,t,r){var i=e.gl,o=n.getWebGLTexture(e),d=this._cache.get("attached_textures");if(d&&d[t]){var f=d[t];if(f.texture===n&&f.target===r)return}var g=!0;if(((t=+t)===cC||33306===t)&&(e.getGLExtension("WEBGL_depth_texture")||(console.error("Depth texture is not supported by the browser"),g=!1),6402!==n.format&&34041!==n.format&&(console.error("The texture attached to depth buffer is not a valid."),g=!1),g)){var w=this._cache.get(Jd);w&&(i.framebufferRenderbuffer(uv,cC,lC,null),i.deleteRenderbuffer(w),this._cache.put(Jd,!1)),this._cache.put(GB,!1),this._cache.put(WB,!0)}return i.framebufferTexture2D(uv,t,r,o,0),d||this._cache.put("attached_textures",d={}),d[t]=d[t]||{},d[t].texture=n,d[t].target=r,g},_doDetach:function(e,n,t){e.framebufferTexture2D(uv,n,t,null,0);var r=this._cache.get("attached_textures");r&&r[n]&&(r[n]=null),(n===cC||33306===n)&&this._cache.put(WB,!1)},detach:function(e,n){this._textures[e]=null,this._boundRenderer&&(this._cache.use(this._boundRenderer.__uid__),this._doDetach(this._boundRenderer.gl,e,n))},dispose:function(e){var n=e.gl,t=this._cache;t.use(e.__uid__);var r=t.get(Jd);r&&n.deleteRenderbuffer(r);var i=t.get(E2);i&&n.deleteFramebuffer(i),t.deleteContext(e.__uid__),this._textures={}}});uC.DEPTH_ATTACHMENT=cC,uC.COLOR_ATTACHMENT0=36064,uC.STENCIL_ATTACHMENT=36128,uC.DEPTH_STENCIL_ATTACHMENT=33306;const ts=uC;var vne=["px","nx","py","ny","pz","nz"],mne=Us.extend(function(){var e={position:new On,far:1e3,near:.1,texture:null,shadowMapPass:null},n=e._cameras={px:new No({fov:90}),nx:new No({fov:90}),py:new No({fov:90}),ny:new No({fov:90}),pz:new No({fov:90}),nz:new No({fov:90})};return n.px.lookAt(On.POSITIVE_X,On.NEGATIVE_Y),n.nx.lookAt(On.NEGATIVE_X,On.NEGATIVE_Y),n.py.lookAt(On.POSITIVE_Y,On.POSITIVE_Z),n.ny.lookAt(On.NEGATIVE_Y,On.NEGATIVE_Z),n.pz.lookAt(On.POSITIVE_Z,On.NEGATIVE_Y),n.nz.lookAt(On.NEGATIVE_Z,On.NEGATIVE_Y),e._frameBuffer=new ts,e},{getCamera:function(e){return this._cameras[e]},render:function(e,n,t){var r=e.gl;t||n.update();for(var i=this.texture.width,o=2*Math.atan(i/(i-.5))/Math.PI*180,d=0;d<6;d++){var g=this._cameras[vne[d]];if(On.copy(g.position,this.position),g.far=this.far,g.near=this.near,g.fov=o,this.shadowMapPass){g.update();var _=n.getBoundingBox();_.applyTransform(g.viewMatrix),n.viewBoundingBoxLastFrame.copy(_),this.shadowMapPass.render(e,n,g,!0)}this._frameBuffer.attach(this.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+d),this._frameBuffer.bind(e),e.render(n,g,!0),this._frameBuffer.unbind(e)}},dispose:function(e){this._frameBuffer.dispose(e)}});const jB=mne;var _ne=Ei.extend({dynamic:!1,widthSegments:1,heightSegments:1},function(){this.build()},{build:function(){for(var e=this.heightSegments,n=this.widthSegments,t=this.attributes,r=[],i=[],o=[],d=[],f=0;f<=e;f++)for(var g=f/e,_=0;_<=n;_++){var w=_/n;if(r.push([2*w-1,2*g-1,0]),i&&i.push([w,g]),o&&o.push([0,0,1]),_<n&&f<e){var S=_+f*(n+1);d.push([S,S+1,S+n+1]),d.push([S+n+1,S+1,S+n+2])}}t.position.fromArray(r),t.texcoord0.fromArray(i),t.normal.fromArray(o),this.initIndicesFromArray(d),this.boundingBox=new Ws,this.boundingBox.min.set(-1,-1,0),this.boundingBox.max.set(1,1,0)}});const A2=_ne;var Da=new cr,yne=Ei.extend({dynamic:!1,widthSegments:1,heightSegments:1,depthSegments:1,inside:!1},function(){this.build()},{build:function(){var e={px:Vy("px",this.depthSegments,this.heightSegments),nx:Vy("nx",this.depthSegments,this.heightSegments),py:Vy("py",this.widthSegments,this.depthSegments),ny:Vy("ny",this.widthSegments,this.depthSegments),pz:Vy("pz",this.widthSegments,this.heightSegments),nz:Vy("nz",this.widthSegments,this.heightSegments)},n=["position","texcoord0","normal"],t=0,r=0;for(var i in e)t+=e[i].vertexCount,r+=e[i].indices.length;for(var o=0;o<n.length;o++)this.attributes[n[o]].init(t);this.indices=new oo.Uint16Array(r);var d=0,f=0;for(var i in e){var g=e[i];for(o=0;o<n.length;o++)for(var _=n[o],w=g.attributes[_].value,S=g.attributes[_].size,k="normal"===_,V=0;V<w.length;V++){var ne=w[V];this.inside&&k&&(ne=-ne),this.attributes[_].value[V+S*f]=ne}var pe=g.indices.length;for(V=0;V<g.indices.length;V++)this.indices[V+d]=f+g.indices[this.inside?pe-V-1:V];d+=g.indices.length,f+=g.vertexCount}this.boundingBox=new Ws,this.boundingBox.max.set(1,1,1),this.boundingBox.min.set(-1,-1,-1)}});function Vy(e,n,t){Da.identity();var r=new A2({widthSegments:n,heightSegments:t});switch(e){case"px":cr.translate(Da,Da,On.POSITIVE_X),cr.rotateY(Da,Da,Math.PI/2);break;case"nx":cr.translate(Da,Da,On.NEGATIVE_X),cr.rotateY(Da,Da,-Math.PI/2);break;case"py":cr.translate(Da,Da,On.POSITIVE_Y),cr.rotateX(Da,Da,-Math.PI/2);break;case"ny":cr.translate(Da,Da,On.NEGATIVE_Y),cr.rotateX(Da,Da,Math.PI/2);break;case"pz":cr.translate(Da,Da,On.POSITIVE_Z);break;case"nz":cr.translate(Da,Da,On.NEGATIVE_Z),cr.rotateY(Da,Da,Math.PI)}return r.applyTransform(Da),r}const tW=yne;Yn.import("@export clay.skybox.vertex\n#define SHADER_NAME skybox\nuniform mat4 world : WORLD;\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nattribute vec3 position : POSITION;\nvarying vec3 v_WorldPosition;\nvoid main()\n{\n v_WorldPosition = (world * vec4(position, 1.0)).xyz;\n gl_Position = worldViewProjection * vec4(position, 1.0);\n}\n@end\n@export clay.skybox.fragment\n#define PI 3.1415926\nuniform mat4 viewInverse : VIEWINVERSE;\n#ifdef EQUIRECTANGULAR\nuniform sampler2D environmentMap;\n#else\nuniform samplerCube environmentMap;\n#endif\nuniform float lod: 0.0;\nvarying vec3 v_WorldPosition;\n@import clay.util.rgbm\n@import clay.util.srgb\n@import clay.util.ACES\nvoid main()\n{\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(v_WorldPosition - eyePos);\n#ifdef EQUIRECTANGULAR\n float phi = acos(V.y);\n float theta = atan(-V.x, V.z) + PI * 0.5;\n vec2 uv = vec2(theta / 2.0 / PI, phi / PI);\n vec4 texel = decodeHDR(texture2D(environmentMap, fract(uv)));\n#else\n #if defined(LOD) || defined(SUPPORT_TEXTURE_LOD)\n vec4 texel = decodeHDR(textureCubeLodEXT(environmentMap, V, lod));\n #else\n vec4 texel = decodeHDR(textureCube(environmentMap, V));\n #endif\n#endif\n#ifdef SRGB_DECODE\n texel = sRGBToLinear(texel);\n#endif\n#ifdef TONEMAPPING\n texel.rgb = ACESToneMapping(texel.rgb);\n#endif\n#ifdef SRGB_ENCODE\n texel = linearTosRGB(texel);\n#endif\n gl_FragColor = encodeHDR(vec4(texel.rgb, 1.0));\n}\n@end");var xne=av.extend(function(){var e=new Yn({vertex:Yn.source("clay.skybox.vertex"),fragment:Yn.source("clay.skybox.fragment")}),n=new Sc({shader:e,depthMask:!1});return{scene:null,geometry:new tW,material:n,environmentMap:null,culling:!1,_dummyCamera:new No}},function(){var e=this.scene;e&&this.attachScene(e),this.environmentMap&&this.setEnvironmentMap(this.environmentMap)},{attachScene:function(e){this.scene&&this.detachScene(),e.skybox=this,this.scene=e,e.on("beforerender",this._beforeRenderScene,this)},detachScene:function(){this.scene&&(this.scene.off("beforerender",this._beforeRenderScene),this.scene.skybox=null),this.scene=null},dispose:function(e){this.detachScene(),this.geometry.dispose(e)},setEnvironmentMap:function(e){"texture2D"===e.textureType?(this.material.define("EQUIRECTANGULAR"),e.minFilter=fr.LINEAR):this.material.undefine("EQUIRECTANGULAR"),this.material.set("environmentMap",e)},getEnvironmentMap:function(){return this.material.get("environmentMap")},_beforeRenderScene:function(e,n,t){this.renderSkybox(e,t)},renderSkybox:function(e,n){var t=this._dummyCamera;t.aspect=e.getViewportAspect(),t.fov=n.fov||50,t.updateProjectionMatrix(),cr.invert(t.invProjectionMatrix,t.projectionMatrix),t.worldTransform.copy(n.worldTransform),t.viewMatrix.copy(n.viewMatrix),this.position.copy(n.getWorldPosition()),this.update(),e.gl.disable(e.gl.BLEND),this.material.get("lod")>0?this.material.define("fragment","LOD"):this.material.undefine("fragment","LOD"),e.renderPass([this],t)}});const I2=xne,nW=I2;function ZB(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}var Tne=ZB("DXT1"),Ene=ZB("DXT3"),Ane=ZB("DXT5"),Vne={parse:function(e,n){var t=new Int32Array(e,0,31);if(542327876!==t[0]||4&!t(20))return null;var g,_,r=t(21),i=t[4],o=t[3],d=512&t[28],f=131072&t[2];switch(r){case Tne:g=8,_=fr.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case Ene:g=16,_=fr.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case Ane:g=16,_=fr.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return null}var w=t[1]+4,S=d?6:1,k=1;f&&(k=Math.max(1,t[7]));for(var V=[],ne=0;ne<S;ne++){var pe=i,De=o;V[ne]=new Kr({width:pe,height:De,format:_});for(var Re=[],Fe=0;Fe<k;Fe++){var ke=Math.max(4,pe)/4*Math.max(4,De)/4*g,Be=new Uint8Array(e,w,ke);w+=ke,pe*=.5,De*=.5,Re[Fe]=Be}V[ne].pixels=Re[0],f&&(V[ne].mipmaps=Re)}if(!n)return V[0];n.width=V[0].width,n.height=V[0].height,n.format=V[0].format,n.pixels=V[0].pixels,n.mipmaps=V[0].mipmaps}};const zne=Vne;var P2=String.fromCharCode;function Gne(e,n,t,r){if(e[3]>0){var i=Math.pow(2,e[3]-128-8+r);n[t+0]=e[0]*i,n[t+1]=e[1]*i,n[t+2]=e[2]*i}else n[t+0]=0,n[t+1]=0,n[t+2]=0;return n[t+3]=1,n}function jne(e,n){n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3]}function rW(e,n,t,r){for(var i=0,o=0,d=r;d>0;)if(e[o][0]=n[t++],e[o][1]=n[t++],e[o][2]=n[t++],e[o][3]=n[t++],1===e[o][0]&&1===e[o][1]&&1===e[o][2]){for(var f=e[o][3]<<i>>>0;f>0;f--)jne(e[o-1],e[o]),o++,d--;i+=8}else o++,d--,i=0;return t}function Zne(e,n,t,r){if(r<8|r>32767)return rW(e,n,t,r);if(2!=(i=n[t++]))return rW(e,n,t-1,r);if(e[0][1]=n[t++],e[0][2]=n[t++],i=n[t++],(e[0][2]<<8>>>0|i)>>>0!==r)return null;for(var i=0;i<4;i++)for(var o=0;o<r;){var d=n[t++];if(d>128){d=(127&d)>>>0;for(var f=n[t++];d--;)e[o++][i]=f}else for(;d--;)e[o++][i]=n[t++]}return t}var Yne={parseRGBE:function(e,n,t){null==t&&(t=0);var r=new Uint8Array(e),i=r.length;if("#?"===function Wne(e,n,t){for(var r="",i=n;i<t;i++)r+=P2(e[i]);return r}(r,0,2)){for(var o=2;o<i&&("\n"!==P2(r[o])||"\n"!==P2(r[o+1]));o++);if(!(o>=i)){o+=2;for(var d="";o<i;o++){var f=P2(r[o]);if("\n"===f)break;d+=f}var g=d.split(" "),_=parseInt(g[1]),w=parseInt(g[3]);if(w&&_){for(var S=o+1,k=[],V=0;V<w;V++){k[V]=[];for(var ne=0;ne<4;ne++)k[V][ne]=0}for(var pe=new Float32Array(w*_*4),De=0,Re=0;Re<_;Re++){if(!(S=Zne(k,r,S,w)))return null;for(V=0;V<w;V++)Gne(k[V],pe,De,t),De+=4}return n||(n=new Kr),n.width=w,n.height=_,n.pixels=pe,n.type=fr.FLOAT,n}}}},parseRGBEFromPNG:function(e){}};const Xne=Yne;var R2={loadTexture:function(e,n,t,r){var i;if("function"==typeof n?(r=t=n,n={}):n=n||{},"string"==typeof e){if(e.match(/.hdr$/)||"hdr"===n.fileType)return i=new Kr({width:0,height:0,sRGB:!1}),R2._fetchTexture(e,function(o){Xne.parseRGBE(o,i,n.exposure),i.dirty(),t&&t(i)},r),i;e.match(/.dds$/)||"dds"===n.fileType?(i=new Kr({width:0,height:0}),R2._fetchTexture(e,function(o){zne.parse(o,i),i.dirty(),t&&t(i)},r)):((i=new Kr).load(e),i.success(t),i.error(r))}else"object"==typeof e&&typeof e.px<"u"&&((i=new sC).load(e),i.success(t),i.error(r));return i},loadPanorama:function(e,n,t,r,i,o){var d=this;"function"==typeof r?(o=i=r,r={}):r=r||{},R2.loadTexture(n,r,function(f){f.flipY=r.flipY||!1,d.panoramaToCubeMap(e,f,t,r),f.dispose(e),i&&i(t)},o)},panoramaToCubeMap:function(e,n,t,r){var i=new jB,o=new nW({scene:new Bf});return o.setEnvironmentMap(n),(r=r||{}).encodeRGBM&&o.material.define("fragment","RGBM_ENCODE"),t.sRGB=n.sRGB,i.texture=t,i.render(e,o.scene),i.texture=null,i.dispose(e),t},heightToNormal:function(e,n){var t=document.createElement("canvas"),r=t.width=e.width,i=t.height=e.height,o=t.getContext("2d");o.drawImage(e,0,0,r,i),n=n||!1;for(var d=o.getImageData(0,0,r,i),f=o.createImageData(r,i),g=0;g<d.data.length;g+=4){if(n){var w=d.data[g+1],S=d.data[g+2];if(Math.abs(d.data[g]-w)+Math.abs(w-S)>20)return console.warn("Given image is not a height map"),e}var V,ne,pe,De;g%(4*r)==0?(V=d.data[g],pe=d.data[g+4]):g%(4*r)==4*(r-1)?(V=d.data[g-4],pe=d.data[g]):(V=d.data[g-4],pe=d.data[g+4]),g<4*r?(ne=d.data[g],De=d.data[g+4*r]):g>r*(i-1)*4?(ne=d.data[g-4*r],De=d.data[g]):(ne=d.data[g-4*r],De=d.data[g+4*r]),f.data[g]=V-pe+127,f.data[g+1]=ne-De+127,f.data[g+2]=255,f.data[g+3]=255}return o.putImageData(f,0,0),t},isHeightImage:function(e,n,t){if(!e||!e.width||!e.height)return!1;var r=document.createElement("canvas"),i=r.getContext("2d"),o=n||32;t=t||20,r.width=r.height=o,i.drawImage(e,0,0,o,o);for(var d=i.getImageData(0,0,o,o),f=0;f<d.data.length;f+=4){var _=d.data[f+1],w=d.data[f+2];if(Math.abs(d.data[f]-_)+Math.abs(_-w)>t)return!1}return!0},_fetchTexture:function(e,n,t){oo.request.get({url:e,responseType:"arraybuffer",onload:n,onerror:t})},createChessboard:function(e,n,t,r){e=e||512,n=n||64,t=t||"black",r=r||"white";var i=Math.ceil(e/n),o=document.createElement("canvas");o.width=e,o.height=e;var d=o.getContext("2d");d.fillStyle=r,d.fillRect(0,0,e,e),d.fillStyle=t;for(var f=0;f<i;f++)for(var g=0;g<i;g++)(g%2?f%2:f%2-1)&&d.fillRect(f*n,g*n,n,n);return new Kr({image:o,anisotropic:8})},createBlank:function(e){var n=document.createElement("canvas");n.width=1,n.height=1;var t=n.getContext("2d");return t.fillStyle=e,t.fillRect(0,0,1,1),new Kr({image:n})}};const dv=R2;var YB=["mousedown","mouseup","mousemove","mouseover","mouseout","click","dblclick","contextmenu"];function XB(e){return"_on"+e}var $B=function(e){var n=this;this._texture=new Kr({anisotropic:32,flipY:!1,surface:this,dispose:function(t){n.dispose(),Kr.prototype.dispose.call(this,t)}}),YB.forEach(function(t){this[XB(t)]=function(r){!r.triangle||this._meshes.forEach(function(i){this.dispatchEvent(t,i,r.triangle,r.point)},this)}},this),this._meshes=[],e&&this.setECharts(e),this.onupdate=null};$B.prototype={constructor:$B,getTexture:function(){return this._texture},setECharts:function(e){this._chart=e;var n=e.getDom();if(n instanceof HTMLCanvasElement){var t=this,r=e.getZr(),i=r.__oldRefreshImmediately||r.refreshImmediately;r.refreshImmediately=function(){i.call(this),t._texture.dirty(),t.onupdate&&t.onupdate()},r.__oldRefreshImmediately=i}else console.error("ECharts must init on canvas if it is used as texture."),n=document.createElement("canvas");this._texture.image=n,this._texture.dirty(),this.onupdate&&this.onupdate()},dispatchEvent:function(){var e=new On,n=new On,t=new On,r=new Fl,i=new Fl,o=new Fl,d=new Fl,f=new On;return function(g,_,w,S){var k=_.geometry,V=k.attributes.position,ne=k.attributes.texcoord0,pe=On.dot,De=On.cross;V.get(w[0],e.array),V.get(w[1],n.array),V.get(w[2],t.array),ne.get(w[0],r.array),ne.get(w[1],i.array),ne.get(w[2],o.array),De(f,n,t);var Re=pe(e,f),Fe=pe(S,f)/Re;De(f,t,e);var ke=pe(S,f)/Re;De(f,e,n);var Be=pe(S,f)/Re;Fl.scale(d,r,Fe),Fl.scaleAndAdd(d,d,i,ke),Fl.scaleAndAdd(d,d,o,Be);var at=d.x*this._chart.getWidth(),ot=d.y*this._chart.getHeight();this._chart.getZr().handler.dispatch(g,{zrX:at,zrY:ot})}}(),attachToMesh:function(e){this._meshes.indexOf(e)>=0||(YB.forEach(function(n){e.on(n,this[XB(n)],this)},this),this._meshes.push(e))},detachFromMesh:function(e){var n=this._meshes.indexOf(e);n>=0&&this._meshes.splice(n,1),YB.forEach(function(t){e.off(t,this[XB(t)])},this)},dispose:function(){this._meshes.forEach(function(e){this.detachFromMesh(e)},this)}};const $ne=$B;var Kne=Fy.extend({left:-1,right:1,near:-1,far:1,top:1,bottom:-1},{updateProjectionMatrix:function(){this.projectionMatrix.ortho(this.left,this.right,this.bottom,this.top,this.near,this.far)},decomposeProjectionMatrix:function(){var e=this.projectionMatrix.array;this.left=(-1-e[12])/e[0],this.right=(1-e[12])/e[0],this.top=(1-e[13])/e[5],this.bottom=(-1-e[13])/e[5],this.near=-(-1-e[14])/e[10],this.far=-(1-e[14])/e[10]},clone:function(){var e=Fy.prototype.clone.call(this);return e.left=this.left,e.right=this.right,e.near=this.near,e.far=this.far,e.top=this.top,e.bottom=this.bottom,e}});const zy=Kne;Yn.import("\n@export clay.compositor.vertex\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nattribute vec3 position : POSITION;\nattribute vec2 texcoord : TEXCOORD_0;\nvarying vec2 v_Texcoord;\nvoid main()\n{\n v_Texcoord = texcoord;\n gl_Position = worldViewProjection * vec4(position, 1.0);\n}\n@end");var qne=new A2,iW=new av({geometry:qne,frustumCulling:!1}),Jne=new zy,ere=Us.extend(function(){return{fragment:"",outputs:null,material:null,blendWithPrevious:!1,clearColor:!1,clearDepth:!0}},function(){var e=new Yn(Yn.source("clay.compositor.vertex"),this.fragment),n=new Sc({shader:e});n.enableTexturesAll(),this.material=n},{setUniform:function(e,n){this.material.setUniform(e,n)},getUniform:function(e){var n=this.material.uniforms[e];if(n)return n.value},attachOutput:function(e,n){this.outputs||(this.outputs={}),this.outputs[n=n||36064]=e},detachOutput:function(e){for(var n in this.outputs)this.outputs[n]===e&&(this.outputs[n]=null)},bind:function(e,n){if(this.outputs)for(var t in this.outputs){var r=this.outputs[t];r&&n.attach(r,t)}n&&n.bind(e)},unbind:function(e,n){n.unbind(e)},render:function(e,n){var t=e.gl;if(n){this.bind(e,n);var r=e.getGLExtension("EXT_draw_buffers");if(r&&this.outputs){var i=[];for(var o in this.outputs)(o=+o)>=t.COLOR_ATTACHMENT0&&o<=t.COLOR_ATTACHMENT0+8&&i.push(o);r.drawBuffersEXT(i)}}this.trigger("beforerender",this,e);var d=this.clearDepth?t.DEPTH_BUFFER_BIT:0;if(t.depthMask(!0),this.clearColor){d|=t.COLOR_BUFFER_BIT,t.colorMask(!0,!0,!0,!0);var f=this.clearColor;Array.isArray(f)&&t.clearColor(f[0],f[1],f[2],f[3])}t.clear(d),this.blendWithPrevious?(t.enable(t.BLEND),this.material.transparent=!0):(t.disable(t.BLEND),this.material.transparent=!1),this.renderQuad(e),this.trigger("afterrender",this,e),n&&this.unbind(e,n)},renderQuad:function(e){iW.material=this.material,e.renderPass([iW],Jne)},dispose:function(e){}});const so=ere;var hv={},KB=["px","nx","py","ny","pz","nz"];hv.prefilterEnvironmentMap=function(e,n,t,r,i){(!i||!r)&&(r=hv.generateNormalDistribution(),i=hv.integrateBRDF(e,r));var o=(t=t||{}).width||64,d=t.height||64,f=t.type||n.type,g=new sC({width:o,height:d,type:f,flipY:!1,mipmaps:[]});g.isPowerOfTwo()||console.warn("Width and height must be power of two to enable mipmap.");var _=Math.min(o,d),w=Math.log(_)/Math.log(2)+1,S=new Sc({shader:new Yn({vertex:Yn.source("clay.skybox.vertex"),fragment:"#define SHADER_NAME prefilter\n#define SAMPLE_NUMBER 1024\n#define PI 3.14159265358979\nuniform mat4 viewInverse : VIEWINVERSE;\nuniform samplerCube environmentMap;\nuniform sampler2D normalDistribution;\nuniform float roughness : 0.5;\nvarying vec2 v_Texcoord;\nvarying vec3 v_WorldPosition;\n@import clay.util.rgbm\nvec3 importanceSampleNormal(float i, float roughness, vec3 N) {\n vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;\n vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);\n vec3 tangentX = normalize(cross(N, upVector));\n vec3 tangentZ = cross(N, tangentX);\n return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);\n}\nvoid main() {\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(v_WorldPosition - eyePos);\n vec3 N = V;\n vec3 prefilteredColor = vec3(0.0);\n float totalWeight = 0.0;\n float fMaxSampleNumber = float(SAMPLE_NUMBER);\n for (int i = 0; i < SAMPLE_NUMBER; i++) {\n vec3 H = importanceSampleNormal(float(i) / fMaxSampleNumber, roughness, N);\n vec3 L = reflect(-V, H);\n float NoL = clamp(dot(N, L), 0.0, 1.0);\n if (NoL > 0.0) {\n prefilteredColor += decodeHDR(textureCube(environmentMap, L)).rgb * NoL;\n totalWeight += NoL;\n }\n }\n gl_FragColor = encodeHDR(vec4(prefilteredColor / totalWeight, 1.0));\n}\n"})});S.set("normalDistribution",r),t.encodeRGBM&&S.define("fragment","RGBM_ENCODE"),t.decodeRGBM&&S.define("fragment","RGBM_DECODE");var V,k=new Bf;if("texture2D"===n.textureType){var ne=new sC({width:o,height:d,type:f===fr.FLOAT?fr.HALF_FLOAT:f});dv.panoramaToCubeMap(e,n,ne,{encodeRGBM:t.decodeRGBM}),n=ne}(V=new I2({scene:k,material:S})).material.set("environmentMap",n);var pe=new jB({texture:g});t.encodeRGBM&&(f=g.type=fr.UNSIGNED_BYTE);for(var De=new Kr({width:o,height:d,type:f}),Re=new ts({depthBuffer:!1}),Fe=oo[f===fr.UNSIGNED_BYTE?"Uint8Array":"Float32Array"],ke=0;ke<w;ke++){g.mipmaps[ke]={pixels:{}},V.material.set("roughness",ke/(w-1));for(var Be=De.width,at=2*Math.atan(Be/(Be-.5))/Math.PI*180,ot=0;ot<KB.length;ot++){var St=new Fe(De.width*De.height*4);Re.attach(De),Re.bind(e);var yt=pe.getCamera(KB[ot]);yt.fov=at,e.render(k,yt),e.gl.readPixels(0,0,De.width,De.height,fr.RGBA,f,St),Re.unbind(e),g.mipmaps[ke].pixels[KB[ot]]=St}De.width/=2,De.height/=2,De.dirty()}return Re.dispose(e),De.dispose(e),V.dispose(e),r.dispose(e),{environmentMap:g,brdfLookup:i,normalDistribution:r,maxMipmapLevel:w}},hv.integrateBRDF=function(e,n){n=n||hv.generateNormalDistribution();var t=new ts({depthBuffer:!1}),r=new so({fragment:"#define SAMPLE_NUMBER 1024\n#define PI 3.14159265358979\nuniform sampler2D normalDistribution;\nuniform vec2 viewportSize : [512, 256];\nconst vec3 N = vec3(0.0, 0.0, 1.0);\nconst float fSampleNumber = float(SAMPLE_NUMBER);\nvec3 importanceSampleNormal(float i, float roughness, vec3 N) {\n vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;\n vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);\n vec3 tangentX = normalize(cross(N, upVector));\n vec3 tangentZ = cross(N, tangentX);\n return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);\n}\nfloat G_Smith(float roughness, float NoV, float NoL) {\n float k = roughness * roughness / 2.0;\n float G1V = NoV / (NoV * (1.0 - k) + k);\n float G1L = NoL / (NoL * (1.0 - k) + k);\n return G1L * G1V;\n}\nvoid main() {\n vec2 uv = gl_FragCoord.xy / viewportSize;\n float NoV = uv.x;\n float roughness = uv.y;\n vec3 V;\n V.x = sqrt(1.0 - NoV * NoV);\n V.y = 0.0;\n V.z = NoV;\n float A = 0.0;\n float B = 0.0;\n for (int i = 0; i < SAMPLE_NUMBER; i++) {\n vec3 H = importanceSampleNormal(float(i) / fSampleNumber, roughness, N);\n vec3 L = reflect(-V, H);\n float NoL = clamp(L.z, 0.0, 1.0);\n float NoH = clamp(H.z, 0.0, 1.0);\n float VoH = clamp(dot(V, H), 0.0, 1.0);\n if (NoL > 0.0) {\n float G = G_Smith(roughness, NoV, NoL);\n float G_Vis = G * VoH / (NoH * NoV);\n float Fc = pow(1.0 - VoH, 5.0);\n A += (1.0 - Fc) * G_Vis;\n B += Fc * G_Vis;\n }\n }\n gl_FragColor = vec4(vec2(A, B) / fSampleNumber, 0.0, 1.0);\n}\n"}),i=new Kr({width:512,height:256,type:fr.HALF_FLOAT,wrapS:fr.CLAMP_TO_EDGE,wrapT:fr.CLAMP_TO_EDGE,minFilter:fr.NEAREST,magFilter:fr.NEAREST,useMipmap:!1});return r.setUniform("normalDistribution",n),r.setUniform("viewportSize",[512,256]),r.attachOutput(i),r.render(e,t),t.dispose(e),i},hv.generateNormalDistribution=function(t,r){for(var i=new Kr({width:t=t||256,height:r=r||1024,type:fr.FLOAT,minFilter:fr.NEAREST,magFilter:fr.NEAREST,wrapS:fr.CLAMP_TO_EDGE,wrapT:fr.CLAMP_TO_EDGE,useMipmap:!1}),o=new Float32Array(r*t*4),d=[],f=0;f<t;f++){for(var g=f/t,_=g*g,w=0;w<r;w++){var S=(w<<16|w>>>16)>>>0;S=(((16711935&(S=((252645135&(S=((858993459&(S=((1431655765&S)<<1|(2863311530&S)>>>1)>>>0))<<2|(3435973836&S)>>>2)>>>0))<<4|(4042322160&S)>>>4)>>>0))<<8|(4278255360&S)>>>8)>>>0)/4294967296;var k=Math.sqrt((1-S)/(1+(_*_-1)*S));d[w]=k}for(w=0;w<r;w++){var V=4*(w*t+f),ne=(k=d[w],Math.sqrt(1-k*k)),De=2*Math.PI*(w/r);o[V]=ne*Math.cos(De),o[V+1]=k,o[V+2]=ne*Math.sin(De),o[V+3]=1}}return i.pixels=o,i};const L2=hv;var rre=lu.extend({cubemap:null,castShadow:!1,_normalDistribution:null,_brdfLookup:null},{type:"AMBIENT_CUBEMAP_LIGHT",prefilter:function(e,n){if(e.getGLExtension("EXT_shader_texture_lod")){this._brdfLookup||(this._normalDistribution=L2.generateNormalDistribution(),this._brdfLookup=L2.integrateBRDF(e,this._normalDistribution));var t=this.cubemap;if(!t.__prefiltered){var r=L2.prefilterEnvironmentMap(e,t,{encodeRGBM:!0,width:n,height:n},this._normalDistribution,this._brdfLookup);this.cubemap=r.environmentMap,this.cubemap.__prefiltered=!0,t.dispose(e)}}else console.warn("Device not support textureCubeLodEXT")},getBRDFLookup:function(){return this._brdfLookup},uniformTemplates:{ambientCubemapLightColor:{type:"3f",value:function(e){var n=e.color,t=e.intensity;return[n[0]*t,n[1]*t,n[2]*t]}},ambientCubemapLightCubemap:{type:"t",value:function(e){return e.cubemap}},ambientCubemapLightBRDFLookup:{type:"t",value:function(e){return e._brdfLookup}}}});const ire=rre;var are=lu.extend({castShadow:!1,coefficients:[]},function(){this._coefficientsTmpArr=new oo.Float32Array(27)},{type:"AMBIENT_SH_LIGHT",uniformTemplates:{ambientSHLightColor:{type:"3f",value:function(e){var n=e.color,t=e.intensity;return[n[0]*t,n[1]*t,n[2]*t]}},ambientSHLightCoefficients:{type:"3f",value:function(e){for(var n=e._coefficientsTmpArr,t=0;t<e.coefficients.length;t++)n[t]=e.coefficients[t];return n}}}});const ore=are;var aW={},fv=["px","nx","py","ny","pz","nz"];function sre(e,n){var t=e[0],r=e[1],i=e[2];return 0===n?1:1===n?t:2===n?r:3===n?i:4===n?t*i:5===n?r*i:6===n?t*r:7===n?3*i*i-1:t*t-r*r}var lre={px:[2,1,0,-1,-1,1],nx:[2,1,0,1,-1,-1],py:[0,2,1,1,-1,-1],ny:[0,2,1,1,1,1],pz:[0,1,2,-1,-1,-1],nz:[0,1,2,1,-1,1]};aW.projectEnvironmentMap=function(e,n,t){(t=t||{}).lod=t.lod||0;var r,i=new Bf,o=64;"texture2D"===n.textureType?r=new nW({scene:i,environmentMap:n}):(o=n.image&&n.image.px?n.image.px.width:n.width,r=new I2({scene:i,environmentMap:n}));var d=Math.ceil(o/Math.pow(2,t.lod)),f=Math.ceil(o/Math.pow(2,t.lod)),g=new Kr({width:d,height:f}),_=new ts;r.material.define("fragment","RGBM_ENCODE"),t.decodeRGBM&&r.material.define("fragment","RGBM_DECODE"),r.material.set("lod",t.lod);for(var w=new jB({texture:g}),S={},k=0;k<fv.length;k++){S[fv[k]]=new Uint8Array(d*f*4);var V=w.getCamera(fv[k]);V.fov=90,_.attach(g),_.bind(e),e.render(i,V),e.gl.readPixels(0,0,d,f,fr.RGBA,fr.UNSIGNED_BYTE,S[fv[k]]),_.unbind(e)}return r.dispose(e),_.dispose(e),g.dispose(e),function cre(e,n,t,r){for(var i=new oo.Float32Array(27),o=Et.create(),d=Et.create(),f=Et.create(),g=0;g<9;g++){for(var _=Et.create(),w=0;w<fv.length;w++){for(var S=n[fv[w]],k=Et.create(),V=0,ne=0,pe=lre[fv[w]],De=0;De<r;De++)for(var Re=0;Re<t;Re++){o[0]=Re/(t-1)*2-1,o[1]=De/(r-1)*2-1,o[2]=-1,Et.normalize(o,o),f[0]=o[pe[0]]*pe[3],f[1]=o[pe[1]]*pe[4],f[2]=o[pe[2]]*pe[5],d[0]=S[ne++]/255,d[1]=S[ne++]/255,d[2]=S[ne++]/255;var Fe=S[ne++]/255*8.12;d[0]*=Fe,d[1]*=Fe,d[2]*=Fe,Et.scaleAndAdd(k,k,d,sre(f,g)*-o[2]),V+=-o[2]}Et.scaleAndAdd(_,_,k,1/V)}i[3*g]=_[0]/6,i[3*g+1]=_[1]/6,i[3*g+2]=_[2]/6}return i}(0,S,d,f)};const ure=aW;var dre={firstNotNull:function(){for(var e=0,n=arguments.length;e<n;e++)if(null!=arguments[e])return arguments[e]},queryDataIndex:function(e,n){return null!=n.dataIndexInside?n.dataIndexInside:null!=n.dataIndex?Ct.D5.isArray(n.dataIndex)?Ct.D5.map(n.dataIndex,function(t){return e.indexOfRawIndex(t)}):e.indexOfRawIndex(n.dataIndex):null!=n.name?Ct.D5.isArray(n.name)?Ct.D5.map(n.name,function(t){return e.indexOfName(t)}):e.indexOfName(n.name):void 0}};const Jr=dre;var hre=Ei.extend({dynamic:!1,widthSegments:40,heightSegments:20,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI,radius:1},function(){this.build()},{build:function(){var e=this.heightSegments,n=this.widthSegments,t=this.attributes.position,r=this.attributes.texcoord0,i=this.attributes.normal,o=(n+1)*(e+1);t.init(o),r.init(o),i.init(o);var g,_,w,S,k,V,ne,ke,d=o>65535?Uint32Array:Uint16Array,f=this.indices=new d(n*e*6),pe=this.phiStart,De=this.phiLength,Re=this.thetaStart,Fe=this.thetaLength,Be=[],at=[],ot=0,St=1/(ke=this.radius);for(ne=0;ne<=e;ne++)for(V=0;V<=n;V++)S=V/n,k=ne/e,g=-ke*Math.cos(pe+S*De)*Math.sin(Re+k*Fe),_=ke*Math.cos(Re+k*Fe),w=ke*Math.sin(pe+S*De)*Math.sin(Re+k*Fe),Be[0]=g,Be[1]=_,Be[2]=w,at[0]=S,at[1]=k,t.set(ot,Be),r.set(ot,at),Be[0]*=St,Be[1]*=St,Be[2]*=St,i.set(ot,Be),ot++;var Ht,rn,Kt,gn=n+1,_n=0;for(ne=0;ne<e;ne++)for(V=0;V<n;V++)Ht=ne*gn+V,Kt=(ne+1)*gn+V+1,rn=(ne+1)*gn+V,f[_n++]=ne*gn+V+1,f[_n++]=Ht,f[_n++]=Kt,f[_n++]=Ht,f[_n++]=rn,f[_n++]=Kt;this.boundingBox=new Ws,this.boundingBox.max.set(ke,ke,ke),this.boundingBox.min.set(-ke,-ke,-ke)}});const fre=hre;var pre=lu.extend({castShadow:!1},{type:"AMBIENT_LIGHT",uniformTemplates:{ambientLightColor:{type:"3f",value:function(e){var n=e.color,t=e.intensity;return[n[0]*t,n[1]*t,n[2]*t]}}}});const gre=pre;var vre=lu.extend({shadowBias:.001,shadowSlopeScale:2,shadowCascade:1,cascadeSplitLogFactor:.2},{type:"DIRECTIONAL_LIGHT",uniformTemplates:{directionalLightDirection:{type:"3f",value:function(e){return e.__dir=e.__dir||new On,e.__dir.copy(e.worldTransform.z).normalize().negate().array}},directionalLightColor:{type:"3f",value:function(e){var n=e.color,t=e.intensity;return[n[0]*t,n[1]*t,n[2]*t]}}},clone:function(){var e=lu.prototype.clone.call(this);return e.shadowBias=this.shadowBias,e.shadowSlopeScale=this.shadowSlopeScale,e}});const mre=vre;var _re=lu.extend({range:100,castShadow:!1},{type:"POINT_LIGHT",uniformTemplates:{pointLightPosition:{type:"3f",value:function(e){return e.getWorldPosition().array}},pointLightRange:{type:"1f",value:function(e){return e.range}},pointLightColor:{type:"3f",value:function(e){var n=e.color,t=e.intensity;return[n[0]*t,n[1]*t,n[2]*t]}}},clone:function(){var e=lu.prototype.clone.call(this);return e.range=this.range,e}});const yre=_re;var bre=lu.extend({range:20,umbraAngle:30,penumbraAngle:45,falloffFactor:2,shadowBias:.001,shadowSlopeScale:2},{type:"SPOT_LIGHT",uniformTemplates:{spotLightPosition:{type:"3f",value:function(e){return e.getWorldPosition().array}},spotLightRange:{type:"1f",value:function(e){return e.range}},spotLightUmbraAngleCosine:{type:"1f",value:function(e){return Math.cos(e.umbraAngle*Math.PI/180)}},spotLightPenumbraAngleCosine:{type:"1f",value:function(e){return Math.cos(e.penumbraAngle*Math.PI/180)}},spotLightFalloffFactor:{type:"1f",value:function(e){return e.falloffFactor}},spotLightDirection:{type:"3f",value:function(e){return e.__dir=e.__dir||new On,e.__dir.copy(e.worldTransform.z).negate().array}},spotLightColor:{type:"3f",value:function(e){var n=e.color,t=e.intensity;return[n[0]*t,n[1]*t,n[2]*t]}}},clone:function(){var e=lu.prototype.clone.call(this);return e.range=this.range,e.umbraAngle=this.umbraAngle,e.penumbraAngle=this.penumbraAngle,e.falloffFactor=this.falloffFactor,e.shadowBias=this.shadowBias,e.shadowSlopeScale=this.shadowSlopeScale,e}});const xre=bre;var Ci=function(e,n,t,r){this.array=Kn.fromValues(e=e||0,n=n||0,t=t||0,r=r||0),this._dirty=!0};Ci.prototype={constructor:Ci,add:function(e){return Kn.add(this.array,this.array,e.array),this._dirty=!0,this},set:function(e,n,t,r){return this.array[0]=e,this.array[1]=n,this.array[2]=t,this.array[3]=r,this._dirty=!0,this},setArray:function(e){return this.array[0]=e[0],this.array[1]=e[1],this.array[2]=e[2],this.array[3]=e[3],this._dirty=!0,this},clone:function(){return new Ci(this.x,this.y,this.z,this.w)},copy:function(e){return Kn.copy(this.array,e.array),this._dirty=!0,this},dist:function(e){return Kn.dist(this.array,e.array)},distance:function(e){return Kn.distance(this.array,e.array)},div:function(e){return Kn.div(this.array,this.array,e.array),this._dirty=!0,this},divide:function(e){return Kn.divide(this.array,this.array,e.array),this._dirty=!0,this},dot:function(e){return Kn.dot(this.array,e.array)},len:function(){return Kn.len(this.array)},length:function(){return Kn.length(this.array)},lerp:function(e,n,t){return Kn.lerp(this.array,e.array,n.array,t),this._dirty=!0,this},min:function(e){return Kn.min(this.array,this.array,e.array),this._dirty=!0,this},max:function(e){return Kn.max(this.array,this.array,e.array),this._dirty=!0,this},mul:function(e){return Kn.mul(this.array,this.array,e.array),this._dirty=!0,this},multiply:function(e){return Kn.multiply(this.array,this.array,e.array),this._dirty=!0,this},negate:function(){return Kn.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return Kn.normalize(this.array,this.array),this._dirty=!0,this},random:function(e){return Kn.random(this.array,e),this._dirty=!0,this},scale:function(e){return Kn.scale(this.array,this.array,e),this._dirty=!0,this},scaleAndAdd:function(e,n){return Kn.scaleAndAdd(this.array,this.array,e.array,n),this._dirty=!0,this},sqrDist:function(e){return Kn.sqrDist(this.array,e.array)},squaredDistance:function(e){return Kn.squaredDistance(this.array,e.array)},sqrLen:function(){return Kn.sqrLen(this.array)},squaredLength:function(){return Kn.squaredLength(this.array)},sub:function(e){return Kn.sub(this.array,this.array,e.array),this._dirty=!0,this},subtract:function(e){return Kn.subtract(this.array,this.array,e.array),this._dirty=!0,this},transformMat4:function(e){return Kn.transformMat4(this.array,this.array,e.array),this._dirty=!0,this},transformQuat:function(e){return Kn.transformQuat(this.array,this.array,e.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var dC=Object.defineProperty;if(dC){var O2=Ci.prototype;dC(O2,"x",{get:function(){return this.array[0]},set:function(e){this.array[0]=e,this._dirty=!0}}),dC(O2,"y",{get:function(){return this.array[1]},set:function(e){this.array[1]=e,this._dirty=!0}}),dC(O2,"z",{get:function(){return this.array[2]},set:function(e){this.array[2]=e,this._dirty=!0}}),dC(O2,"w",{get:function(){return this.array[3]},set:function(e){this.array[3]=e,this._dirty=!0}})}Ci.add=function(e,n,t){return Kn.add(e.array,n.array,t.array),e._dirty=!0,e},Ci.set=function(e,n,t,r,i){Kn.set(e.array,n,t,r,i),e._dirty=!0},Ci.copy=function(e,n){return Kn.copy(e.array,n.array),e._dirty=!0,e},Ci.distance=Ci.dist=function(e,n){return Kn.distance(e.array,n.array)},Ci.divide=Ci.div=function(e,n,t){return Kn.divide(e.array,n.array,t.array),e._dirty=!0,e},Ci.dot=function(e,n){return Kn.dot(e.array,n.array)},Ci.len=function(e){return Kn.length(e.array)},Ci.lerp=function(e,n,t,r){return Kn.lerp(e.array,n.array,t.array,r),e._dirty=!0,e},Ci.min=function(e,n,t){return Kn.min(e.array,n.array,t.array),e._dirty=!0,e},Ci.max=function(e,n,t){return Kn.max(e.array,n.array,t.array),e._dirty=!0,e},Ci.multiply=Ci.mul=function(e,n,t){return Kn.multiply(e.array,n.array,t.array),e._dirty=!0,e},Ci.negate=function(e,n){return Kn.negate(e.array,n.array),e._dirty=!0,e},Ci.normalize=function(e,n){return Kn.normalize(e.array,n.array),e._dirty=!0,e},Ci.random=function(e,n){return Kn.random(e.array,n),e._dirty=!0,e},Ci.scale=function(e,n,t){return Kn.scale(e.array,n.array,t),e._dirty=!0,e},Ci.scaleAndAdd=function(e,n,t,r){return Kn.scaleAndAdd(e.array,n.array,t.array,r),e._dirty=!0,e},Ci.squaredDistance=Ci.sqrDist=function(e,n){return Kn.sqrDist(e.array,n.array)},Ci.squaredLength=Ci.sqrLen=function(e){return Kn.sqrLen(e.array)},Ci.subtract=Ci.sub=function(e,n,t){return Kn.subtract(e.array,n.array,t.array),e._dirty=!0,e},Ci.transformMat4=function(e,n,t){return Kn.transformMat4(e.array,n.array,t.array),e._dirty=!0,e},Ci.transformQuat=function(e,n,t){return Kn.transformQuat(e.array,n.array,t.array),e._dirty=!0,e};const wre=Ci;var Ss={create:function(){var e=new Jo(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},clone:function(e){var n=new Jo(4);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n},copy:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},transpose:function(e,n){if(e===n){var t=n[1];e[1]=n[2],e[2]=t}else e[0]=n[0],e[1]=n[2],e[2]=n[1],e[3]=n[3];return e},invert:function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],d=t*o-i*r;return d?(e[0]=o*(d=1/d),e[1]=-r*d,e[2]=-i*d,e[3]=t*d,e):null},adjoint:function(e,n){var t=n[0];return e[0]=n[3],e[1]=-n[1],e[2]=-n[2],e[3]=t,e},determinant:function(e){return e[0]*e[3]-e[2]*e[1]},multiply:function(e,n,t){var r=n[0],i=n[1],o=n[2],d=n[3],f=t[0],g=t[1],_=t[2],w=t[3];return e[0]=r*f+o*g,e[1]=i*f+d*g,e[2]=r*_+o*w,e[3]=i*_+d*w,e}};Ss.mul=Ss.multiply,Ss.rotate=function(e,n,t){var r=n[0],i=n[1],o=n[2],d=n[3],f=Math.sin(t),g=Math.cos(t);return e[0]=r*g+o*f,e[1]=i*g+d*f,e[2]=r*-f+o*g,e[3]=i*-f+d*g,e},Ss.scale=function(e,n,t){var i=n[1],o=n[2],d=n[3],f=t[0],g=t[1];return e[0]=n[0]*f,e[1]=i*f,e[2]=o*g,e[3]=d*g,e},Ss.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},Ss.LDU=function(e,n,t,r){return e[2]=r[2]/r[0],t[0]=r[0],t[1]=r[1],t[3]=r[3]-e[2]*t[1],[e,n,t]};const ka=Ss;var Zs=function(){this.array=ka.create(),this._dirty=!0};Zs.prototype={constructor:Zs,setArray:function(e){for(var n=0;n<this.array.length;n++)this.array[n]=e[n];return this._dirty=!0,this},clone:function(){return(new Zs).copy(this)},copy:function(e){return ka.copy(this.array,e.array),this._dirty=!0,this},adjoint:function(){return ka.adjoint(this.array,this.array),this._dirty=!0,this},determinant:function(){return ka.determinant(this.array)},identity:function(){return ka.identity(this.array),this._dirty=!0,this},invert:function(){return ka.invert(this.array,this.array),this._dirty=!0,this},mul:function(e){return ka.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return ka.mul(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return ka.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return ka.multiply(this.array,e.array,this.array),this._dirty=!0,this},rotate:function(e){return ka.rotate(this.array,this.array,e),this._dirty=!0,this},scale:function(e){return ka.scale(this.array,this.array,e.array),this._dirty=!0,this},transpose:function(){return ka.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Zs.adjoint=function(e,n){return ka.adjoint(e.array,n.array),e._dirty=!0,e},Zs.copy=function(e,n){return ka.copy(e.array,n.array),e._dirty=!0,e},Zs.determinant=function(e){return ka.determinant(e.array)},Zs.identity=function(e){return ka.identity(e.array),e._dirty=!0,e},Zs.invert=function(e,n){return ka.invert(e.array,n.array),e._dirty=!0,e},Zs.multiply=Zs.mul=function(e,n,t){return ka.mul(e.array,n.array,t.array),e._dirty=!0,e},Zs.rotate=function(e,n,t){return ka.rotate(e.array,n.array,t),e._dirty=!0,e},Zs.scale=function(e,n,t){return ka.scale(e.array,n.array,t.array),e._dirty=!0,e},Zs.transpose=function(e,n){return ka.transpose(e.array,n.array),e._dirty=!0,e};const Cre=Zs;var fl={create:function(){var e=new Jo(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},clone:function(e){var n=new Jo(6);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n},copy:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},invert:function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],d=n[4],f=n[5],g=t*o-r*i;return g?(e[0]=o*(g=1/g),e[1]=-r*g,e[2]=-i*g,e[3]=t*g,e[4]=(i*f-o*d)*g,e[5]=(r*d-t*f)*g,e):null},determinant:function(e){return e[0]*e[3]-e[1]*e[2]},multiply:function(e,n,t){var r=n[0],i=n[1],o=n[2],d=n[3],f=n[4],g=n[5],_=t[0],w=t[1],S=t[2],k=t[3],V=t[4],ne=t[5];return e[0]=r*_+o*w,e[1]=i*_+d*w,e[2]=r*S+o*k,e[3]=i*S+d*k,e[4]=r*V+o*ne+f,e[5]=i*V+d*ne+g,e}};fl.mul=fl.multiply,fl.rotate=function(e,n,t){var r=n[0],i=n[1],o=n[2],d=n[3],f=n[4],g=n[5],_=Math.sin(t),w=Math.cos(t);return e[0]=r*w+o*_,e[1]=i*w+d*_,e[2]=r*-_+o*w,e[3]=i*-_+d*w,e[4]=f,e[5]=g,e},fl.scale=function(e,n,t){var i=n[1],o=n[2],d=n[3],f=n[4],g=n[5],_=t[0],w=t[1];return e[0]=n[0]*_,e[1]=i*_,e[2]=o*w,e[3]=d*w,e[4]=f,e[5]=g,e},fl.translate=function(e,n,t){var r=n[0],i=n[1],o=n[2],d=n[3],f=n[4],g=n[5],_=t[0],w=t[1];return e[0]=r,e[1]=i,e[2]=o,e[3]=d,e[4]=r*_+o*w+f,e[5]=i*_+d*w+g,e},fl.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)};const lo=fl;var pl=function(){this.array=lo.create(),this._dirty=!0};pl.prototype={constructor:pl,setArray:function(e){for(var n=0;n<this.array.length;n++)this.array[n]=e[n];return this._dirty=!0,this},clone:function(){return(new pl).copy(this)},copy:function(e){return lo.copy(this.array,e.array),this._dirty=!0,this},determinant:function(){return lo.determinant(this.array)},identity:function(){return lo.identity(this.array),this._dirty=!0,this},invert:function(){return lo.invert(this.array,this.array),this._dirty=!0,this},mul:function(e){return lo.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return lo.mul(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return lo.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return lo.multiply(this.array,e.array,this.array),this._dirty=!0,this},rotate:function(e){return lo.rotate(this.array,this.array,e),this._dirty=!0,this},scale:function(e){return lo.scale(this.array,this.array,e.array),this._dirty=!0,this},translate:function(e){return lo.translate(this.array,this.array,e.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},pl.copy=function(e,n){return lo.copy(e.array,n.array),e._dirty=!0,e},pl.determinant=function(e){return lo.determinant(e.array)},pl.identity=function(e){return lo.identity(e.array),e._dirty=!0,e},pl.invert=function(e,n){return lo.invert(e.array,n.array),e._dirty=!0,e},pl.multiply=pl.mul=function(e,n,t){return lo.mul(e.array,n.array,t.array),e._dirty=!0,e},pl.rotate=function(e,n,t){return lo.rotate(e.array,n.array,t),e._dirty=!0,e},pl.scale=function(e,n,t){return lo.scale(e.array,n.array,t.array),e._dirty=!0,e},pl.translate=function(e,n,t){return lo.translate(e.array,n.array,t.array),e._dirty=!0,e};const Sre=pl;var xo=function(){this.array=mi.create(),this._dirty=!0};xo.prototype={constructor:xo,setArray:function(e){for(var n=0;n<this.array.length;n++)this.array[n]=e[n];return this._dirty=!0,this},adjoint:function(){return mi.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return(new xo).copy(this)},copy:function(e){return mi.copy(this.array,e.array),this._dirty=!0,this},determinant:function(){return mi.determinant(this.array)},fromMat2d:function(e){return mi.fromMat2d(this.array,e.array),this._dirty=!0,this},fromMat4:function(e){return mi.fromMat4(this.array,e.array),this._dirty=!0,this},fromQuat:function(e){return mi.fromQuat(this.array,e.array),this._dirty=!0,this},identity:function(){return mi.identity(this.array),this._dirty=!0,this},invert:function(){return mi.invert(this.array,this.array),this._dirty=!0,this},mul:function(e){return mi.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return mi.mul(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return mi.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return mi.multiply(this.array,e.array,this.array),this._dirty=!0,this},rotate:function(e){return mi.rotate(this.array,this.array,e),this._dirty=!0,this},scale:function(e){return mi.scale(this.array,this.array,e.array),this._dirty=!0,this},translate:function(e){return mi.translate(this.array,this.array,e.array),this._dirty=!0,this},normalFromMat4:function(e){return mi.normalFromMat4(this.array,e.array),this._dirty=!0,this},transpose:function(){return mi.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},xo.adjoint=function(e,n){return mi.adjoint(e.array,n.array),e._dirty=!0,e},xo.copy=function(e,n){return mi.copy(e.array,n.array),e._dirty=!0,e},xo.determinant=function(e){return mi.determinant(e.array)},xo.identity=function(e){return mi.identity(e.array),e._dirty=!0,e},xo.invert=function(e,n){return mi.invert(e.array,n.array),e},xo.multiply=xo.mul=function(e,n,t){return mi.mul(e.array,n.array,t.array),e._dirty=!0,e},xo.fromMat2d=function(e,n){return mi.fromMat2d(e.array,n.array),e._dirty=!0,e},xo.fromMat4=function(e,n){return mi.fromMat4(e.array,n.array),e._dirty=!0,e},xo.fromQuat=function(e,n){return mi.fromQuat(e.array,n.array),e._dirty=!0,e},xo.normalFromMat4=function(e,n){return mi.normalFromMat4(e.array,n.array),e._dirty=!0,e},xo.rotate=function(e,n,t){return mi.rotate(e.array,n.array,t),e._dirty=!0,e},xo.scale=function(e,n,t){return mi.scale(e.array,n.array,t.array),e._dirty=!0,e},xo.transpose=function(e,n){return mi.transpose(e.array,n.array),e._dirty=!0,e},xo.translate=function(e,n,t){return mi.translate(e.array,n.array,t.array),e._dirty=!0,e};const Dre=xo;var Mre=z(3945),Tre={_animators:null,getAnimators:function(){return this._animators=this._animators||[],this._animators},animate:function(e,n){var r;if(this._animators=this._animators||[],e){for(var i=e.split("."),o=this,d=0,f=i.length;d<f;d++)!o||(o=o[i[d]]);o&&(r=o)}else r=this;if(null==r)throw new Error("Target "+e+" not exists");var g=this._animators,_=new Mre.Z(r,n),w=this;return _.during(function(){w.__zr&&w.__zr.refresh()}).done(function(){var S=g.indexOf(_);S>=0&&g.splice(S,1)}),g.push(_),this.__zr&&this.__zr.animation.addAnimator(_),_},stopAnimation:function(e){this._animators=this._animators||[];for(var n=this._animators,t=n.length,r=0;r<t;r++)n[r].stop(e);return n.length=0,this},addAnimatorsToZr:function(e){if(this._animators)for(var n=0;n<this._animators.length;n++)e.animation.addAnimator(this._animators[n])},removeAnimatorsFromZr:function(e){if(this._animators)for(var n=0;n<this._animators.length;n++)e.animation.removeAnimator(this._animators[n])}};const oW="\n@export clay.util.rand\nhighp float rand(vec2 uv) {\n const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n highp float dt = dot(uv.xy, vec2(a,b)), sn = mod(dt, 3.141592653589793);\n return fract(sin(sn) * c);\n}\n@end\n@export clay.util.calculate_attenuation\nuniform float attenuationFactor : 5.0;\nfloat lightAttenuation(float dist, float range)\n{\n float attenuation = 1.0;\n attenuation = dist*dist/(range*range+1.0);\n float att_s = attenuationFactor;\n attenuation = 1.0/(attenuation*att_s+1.0);\n att_s = 1.0/(att_s+1.0);\n attenuation = attenuation - att_s;\n attenuation /= 1.0 - att_s;\n return clamp(attenuation, 0.0, 1.0);\n}\n@end\n@export clay.util.edge_factor\n#ifdef SUPPORT_STANDARD_DERIVATIVES\nfloat edgeFactor(float width)\n{\n vec3 d = fwidth(v_Barycentric);\n vec3 a3 = smoothstep(vec3(0.0), d * width, v_Barycentric);\n return min(min(a3.x, a3.y), a3.z);\n}\n#else\nfloat edgeFactor(float width)\n{\n return 1.0;\n}\n#endif\n@end\n@export clay.util.encode_float\nvec4 encodeFloat(const in float depth)\n{\n const vec4 bitShifts = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n const vec4 bit_mask = vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n vec4 res = fract(depth * bitShifts);\n res -= res.xxyz * bit_mask;\n return res;\n}\n@end\n@export clay.util.decode_float\nfloat decodeFloat(const in vec4 color)\n{\n const vec4 bitShifts = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n return dot(color, bitShifts);\n}\n@end\n@export clay.util.float\n@import clay.util.encode_float\n@import clay.util.decode_float\n@end\n@export clay.util.rgbm_decode\nvec3 RGBMDecode(vec4 rgbm, float range) {\n return range * rgbm.rgb * rgbm.a;\n}\n@end\n@export clay.util.rgbm_encode\nvec4 RGBMEncode(vec3 color, float range) {\n if (dot(color, color) == 0.0) {\n return vec4(0.0);\n }\n vec4 rgbm;\n color /= range;\n rgbm.a = clamp(max(max(color.r, color.g), max(color.b, 1e-6)), 0.0, 1.0);\n rgbm.a = ceil(rgbm.a * 255.0) / 255.0;\n rgbm.rgb = color / rgbm.a;\n return rgbm;\n}\n@end\n@export clay.util.rgbm\n@import clay.util.rgbm_decode\n@import clay.util.rgbm_encode\nvec4 decodeHDR(vec4 color)\n{\n#if defined(RGBM_DECODE) || defined(RGBM)\n return vec4(RGBMDecode(color, 8.12), 1.0);\n#else\n return color;\n#endif\n}\nvec4 encodeHDR(vec4 color)\n{\n#if defined(RGBM_ENCODE) || defined(RGBM)\n return RGBMEncode(color.xyz, 8.12);\n#else\n return color;\n#endif\n}\n@end\n@export clay.util.srgb\nvec4 sRGBToLinear(in vec4 value) {\n return vec4(mix(pow(value.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), value.rgb * 0.0773993808, vec3(lessThanEqual(value.rgb, vec3(0.04045)))), value.w);\n}\nvec4 linearTosRGB(in vec4 value) {\n return vec4(mix(pow(value.rgb, vec3(0.41666)) * 1.055 - vec3(0.055), value.rgb * 12.92, vec3(lessThanEqual(value.rgb, vec3(0.0031308)))), value.w);\n}\n@end\n@export clay.chunk.skinning_header\n#ifdef SKINNING\nattribute vec3 weight : WEIGHT;\nattribute vec4 joint : JOINT;\n#ifdef USE_SKIN_MATRICES_TEXTURE\nuniform sampler2D skinMatricesTexture : ignore;\nuniform float skinMatricesTextureSize: ignore;\nmat4 getSkinMatrix(sampler2D tex, float idx) {\n float j = idx * 4.0;\n float x = mod(j, skinMatricesTextureSize);\n float y = floor(j / skinMatricesTextureSize) + 0.5;\n vec2 scale = vec2(skinMatricesTextureSize);\n return mat4(\n texture2D(tex, vec2(x + 0.5, y) / scale),\n texture2D(tex, vec2(x + 1.5, y) / scale),\n texture2D(tex, vec2(x + 2.5, y) / scale),\n texture2D(tex, vec2(x + 3.5, y) / scale)\n );\n}\nmat4 getSkinMatrix(float idx) {\n return getSkinMatrix(skinMatricesTexture, idx);\n}\n#else\nuniform mat4 skinMatrix[JOINT_COUNT] : SKIN_MATRIX;\nmat4 getSkinMatrix(float idx) {\n return skinMatrix[int(idx)];\n}\n#endif\n#endif\n@end\n@export clay.chunk.skin_matrix\nmat4 skinMatrixWS = getSkinMatrix(joint.x) * weight.x;\nif (weight.y > 1e-4)\n{\n skinMatrixWS += getSkinMatrix(joint.y) * weight.y;\n}\nif (weight.z > 1e-4)\n{\n skinMatrixWS += getSkinMatrix(joint.z) * weight.z;\n}\nfloat weightW = 1.0-weight.x-weight.y-weight.z;\nif (weightW > 1e-4)\n{\n skinMatrixWS += getSkinMatrix(joint.w) * weightW;\n}\n@end\n@export clay.chunk.instancing_header\n#ifdef INSTANCING\nattribute vec4 instanceMat1;\nattribute vec4 instanceMat2;\nattribute vec4 instanceMat3;\n#endif\n@end\n@export clay.chunk.instancing_matrix\nmat4 instanceMat = mat4(\n vec4(instanceMat1.xyz, 0.0),\n vec4(instanceMat2.xyz, 0.0),\n vec4(instanceMat3.xyz, 0.0),\n vec4(instanceMat1.w, instanceMat2.w, instanceMat3.w, 1.0)\n);\n@end\n@export clay.util.parallax_correct\nvec3 parallaxCorrect(in vec3 dir, in vec3 pos, in vec3 boxMin, in vec3 boxMax) {\n vec3 first = (boxMax - pos) / dir;\n vec3 second = (boxMin - pos) / dir;\n vec3 further = max(first, second);\n float dist = min(further.x, min(further.y, further.z));\n vec3 fixedPos = pos + dir * dist;\n vec3 boxCenter = (boxMax + boxMin) * 0.5;\n return normalize(fixedPos - boxCenter);\n}\n@end\n@export clay.util.clamp_sample\nvec4 clampSample(const in sampler2D texture, const in vec2 coord)\n{\n#ifdef STEREO\n float eye = step(0.5, coord.x) * 0.5;\n vec2 coordClamped = clamp(coord, vec2(eye, 0.0), vec2(0.5 + eye, 1.0));\n#else\n vec2 coordClamped = clamp(coord, vec2(0.0), vec2(1.0));\n#endif\n return texture2D(texture, coordClamped);\n}\n@end\n@export clay.util.ACES\nvec3 ACESToneMapping(vec3 color)\n{\n const float A = 2.51;\n const float B = 0.03;\n const float C = 2.43;\n const float D = 0.59;\n const float E = 0.14;\n return (color * (A * color + B)) / (color * (C * color + D) + E);\n}\n@end";function sW(e){return e instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof Image}Object.assign(Lu.prototype,Tre),Yn.import(oW),Yn.import(k6),Yn.import("\n@export ecgl.common.transformUniforms\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;\nuniform mat4 world : WORLD;\n@end\n\n@export ecgl.common.attributes\nattribute vec3 position : POSITION;\nattribute vec2 texcoord : TEXCOORD_0;\nattribute vec3 normal : NORMAL;\n@end\n\n@export ecgl.common.uv.header\nuniform vec2 uvRepeat : [1.0, 1.0];\nuniform vec2 uvOffset : [0.0, 0.0];\nuniform vec2 detailUvRepeat : [1.0, 1.0];\nuniform vec2 detailUvOffset : [0.0, 0.0];\n\nvarying vec2 v_Texcoord;\nvarying vec2 v_DetailTexcoord;\n@end\n\n@export ecgl.common.uv.main\nv_Texcoord = texcoord * uvRepeat + uvOffset;\nv_DetailTexcoord = texcoord * detailUvRepeat + detailUvOffset;\n@end\n\n@export ecgl.common.uv.fragmentHeader\nvarying vec2 v_Texcoord;\nvarying vec2 v_DetailTexcoord;\n@end\n\n\n@export ecgl.common.albedo.main\n\n vec4 albedoTexel = vec4(1.0);\n#ifdef DIFFUSEMAP_ENABLED\n albedoTexel = texture2D(diffuseMap, v_Texcoord);\n #ifdef SRGB_DECODE\n albedoTexel = sRGBToLinear(albedoTexel);\n #endif\n#endif\n\n#ifdef DETAILMAP_ENABLED\n vec4 detailTexel = texture2D(detailMap, v_DetailTexcoord);\n #ifdef SRGB_DECODE\n detailTexel = sRGBToLinear(detailTexel);\n #endif\n albedoTexel.rgb = mix(albedoTexel.rgb, detailTexel.rgb, detailTexel.a);\n albedoTexel.a = detailTexel.a + (1.0 - detailTexel.a) * albedoTexel.a;\n#endif\n\n@end\n\n@export ecgl.common.wireframe.vertexHeader\n\n#ifdef WIREFRAME_QUAD\nattribute vec4 barycentric;\nvarying vec4 v_Barycentric;\n#elif defined(WIREFRAME_TRIANGLE)\nattribute vec3 barycentric;\nvarying vec3 v_Barycentric;\n#endif\n\n@end\n\n@export ecgl.common.wireframe.vertexMain\n\n#if defined(WIREFRAME_QUAD) || defined(WIREFRAME_TRIANGLE)\n v_Barycentric = barycentric;\n#endif\n\n@end\n\n\n@export ecgl.common.wireframe.fragmentHeader\n\nuniform float wireframeLineWidth : 1;\nuniform vec4 wireframeLineColor: [0, 0, 0, 0.5];\n\n#ifdef WIREFRAME_QUAD\nvarying vec4 v_Barycentric;\nfloat edgeFactor () {\n vec4 d = fwidth(v_Barycentric);\n vec4 a4 = smoothstep(vec4(0.0), d * wireframeLineWidth, v_Barycentric);\n return min(min(min(a4.x, a4.y), a4.z), a4.w);\n}\n#elif defined(WIREFRAME_TRIANGLE)\nvarying vec3 v_Barycentric;\nfloat edgeFactor () {\n vec3 d = fwidth(v_Barycentric);\n vec3 a3 = smoothstep(vec3(0.0), d * wireframeLineWidth, v_Barycentric);\n return min(min(a3.x, a3.y), a3.z);\n}\n#endif\n\n@end\n\n\n@export ecgl.common.wireframe.fragmentMain\n\n#if defined(WIREFRAME_QUAD) || defined(WIREFRAME_TRIANGLE)\n if (wireframeLineWidth > 0.) {\n vec4 lineColor = wireframeLineColor;\n#ifdef SRGB_DECODE\n lineColor = sRGBToLinear(lineColor);\n#endif\n\n gl_FragColor.rgb = mix(gl_FragColor.rgb, lineColor.rgb, (1.0 - edgeFactor()) * lineColor.a);\n }\n#endif\n@end\n\n\n\n\n@export ecgl.common.bumpMap.header\n\n#ifdef BUMPMAP_ENABLED\nuniform sampler2D bumpMap;\nuniform float bumpScale : 1.0;\n\n\nvec3 bumpNormal(vec3 surfPos, vec3 surfNormal, vec3 baseNormal)\n{\n vec2 dSTdx = dFdx(v_Texcoord);\n vec2 dSTdy = dFdy(v_Texcoord);\n\n float Hll = bumpScale * texture2D(bumpMap, v_Texcoord).x;\n float dHx = bumpScale * texture2D(bumpMap, v_Texcoord + dSTdx).x - Hll;\n float dHy = bumpScale * texture2D(bumpMap, v_Texcoord + dSTdy).x - Hll;\n\n vec3 vSigmaX = dFdx(surfPos);\n vec3 vSigmaY = dFdy(surfPos);\n vec3 vN = surfNormal;\n\n vec3 R1 = cross(vSigmaY, vN);\n vec3 R2 = cross(vN, vSigmaX);\n\n float fDet = dot(vSigmaX, R1);\n\n vec3 vGrad = sign(fDet) * (dHx * R1 + dHy * R2);\n return normalize(abs(fDet) * baseNormal - vGrad);\n\n}\n#endif\n\n@end\n\n@export ecgl.common.normalMap.vertexHeader\n\n#ifdef NORMALMAP_ENABLED\nattribute vec4 tangent : TANGENT;\nvarying vec3 v_Tangent;\nvarying vec3 v_Bitangent;\n#endif\n\n@end\n\n@export ecgl.common.normalMap.vertexMain\n\n#ifdef NORMALMAP_ENABLED\n if (dot(tangent, tangent) > 0.0) {\n v_Tangent = normalize((worldInverseTranspose * vec4(tangent.xyz, 0.0)).xyz);\n v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);\n }\n#endif\n\n@end\n\n\n@export ecgl.common.normalMap.fragmentHeader\n\n#ifdef NORMALMAP_ENABLED\nuniform sampler2D normalMap;\nvarying vec3 v_Tangent;\nvarying vec3 v_Bitangent;\n#endif\n\n@end\n\n@export ecgl.common.normalMap.fragmentMain\n#ifdef NORMALMAP_ENABLED\n if (dot(v_Tangent, v_Tangent) > 0.0) {\n vec3 normalTexel = texture2D(normalMap, v_DetailTexcoord).xyz;\n if (dot(normalTexel, normalTexel) > 0.0) { N = normalTexel * 2.0 - 1.0;\n mat3 tbn = mat3(v_Tangent, v_Bitangent, v_Normal);\n N = normalize(tbn * N);\n }\n }\n#endif\n@end\n\n\n\n@export ecgl.common.vertexAnimation.header\n\n#ifdef VERTEX_ANIMATION\nattribute vec3 prevPosition;\nattribute vec3 prevNormal;\nuniform float percent;\n#endif\n\n@end\n\n@export ecgl.common.vertexAnimation.main\n\n#ifdef VERTEX_ANIMATION\n vec3 pos = mix(prevPosition, position, percent);\n vec3 norm = mix(prevNormal, normal, percent);\n#else\n vec3 pos = position;\n vec3 norm = normal;\n#endif\n\n@end\n\n\n@export ecgl.common.ssaoMap.header\n#ifdef SSAOMAP_ENABLED\nuniform sampler2D ssaoMap;\nuniform vec4 viewport : VIEWPORT;\n#endif\n@end\n\n@export ecgl.common.ssaoMap.main\n float ao = 1.0;\n#ifdef SSAOMAP_ENABLED\n ao = texture2D(ssaoMap, (gl_FragCoord.xy - viewport.xy) / viewport.zw).r;\n#endif\n@end\n\n\n\n\n@export ecgl.common.diffuseLayer.header\n\n#if (LAYER_DIFFUSEMAP_COUNT > 0)\nuniform float layerDiffuseIntensity[LAYER_DIFFUSEMAP_COUNT];\nuniform sampler2D layerDiffuseMap[LAYER_DIFFUSEMAP_COUNT];\n#endif\n\n@end\n\n@export ecgl.common.emissiveLayer.header\n\n#if (LAYER_EMISSIVEMAP_COUNT > 0)\nuniform float layerEmissionIntensity[LAYER_EMISSIVEMAP_COUNT];\nuniform sampler2D layerEmissiveMap[LAYER_EMISSIVEMAP_COUNT];\n#endif\n\n@end\n\n@export ecgl.common.layers.header\n@import ecgl.common.diffuseLayer.header\n@import ecgl.common.emissiveLayer.header\n@end\n\n@export ecgl.common.diffuseLayer.main\n\n#if (LAYER_DIFFUSEMAP_COUNT > 0)\n for (int _idx_ = 0; _idx_ < LAYER_DIFFUSEMAP_COUNT; _idx_++) {{\n float intensity = layerDiffuseIntensity[_idx_];\n vec4 texel2 = texture2D(layerDiffuseMap[_idx_], v_Texcoord);\n #ifdef SRGB_DECODE\n texel2 = sRGBToLinear(texel2);\n #endif\n albedoTexel.rgb = mix(albedoTexel.rgb, texel2.rgb * intensity, texel2.a);\n albedoTexel.a = texel2.a + (1.0 - texel2.a) * albedoTexel.a;\n }}\n#endif\n\n@end\n\n@export ecgl.common.emissiveLayer.main\n\n#if (LAYER_EMISSIVEMAP_COUNT > 0)\n for (int _idx_ = 0; _idx_ < LAYER_EMISSIVEMAP_COUNT; _idx_++)\n {{\n vec4 texel2 = texture2D(layerEmissiveMap[_idx_], v_Texcoord) * layerEmissionIntensity[_idx_];\n #ifdef SRGB_DECODE\n texel2 = sRGBToLinear(texel2);\n #endif\n float intensity = layerEmissionIntensity[_idx_];\n gl_FragColor.rgb += texel2.rgb * texel2.a * intensity;\n }}\n#endif\n\n@end\n"),Yn.import("@export ecgl.color.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\n@import ecgl.common.uv.header\n\nattribute vec2 texcoord : TEXCOORD_0;\nattribute vec3 position: POSITION;\n\n@import ecgl.common.wireframe.vertexHeader\n\n#ifdef VERTEX_COLOR\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n#endif\n\n#ifdef VERTEX_ANIMATION\nattribute vec3 prevPosition;\nuniform float percent : 1.0;\n#endif\n\n#ifdef ATMOSPHERE_ENABLED\nattribute vec3 normal: NORMAL;\nuniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;\nvarying vec3 v_Normal;\n#endif\n\nvoid main()\n{\n#ifdef VERTEX_ANIMATION\n vec3 pos = mix(prevPosition, position, percent);\n#else\n vec3 pos = position;\n#endif\n\n gl_Position = worldViewProjection * vec4(pos, 1.0);\n\n @import ecgl.common.uv.main\n\n#ifdef VERTEX_COLOR\n v_Color = a_Color;\n#endif\n\n#ifdef ATMOSPHERE_ENABLED\n v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);\n#endif\n\n @import ecgl.common.wireframe.vertexMain\n\n}\n\n@end\n\n@export ecgl.color.fragment\n\n#define LAYER_DIFFUSEMAP_COUNT 0\n#define LAYER_EMISSIVEMAP_COUNT 0\n\nuniform sampler2D diffuseMap;\nuniform sampler2D detailMap;\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\n#ifdef ATMOSPHERE_ENABLED\nuniform mat4 viewTranspose: VIEWTRANSPOSE;\nuniform vec3 glowColor;\nuniform float glowPower;\nvarying vec3 v_Normal;\n#endif\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\n\n@import ecgl.common.layers.header\n\n@import ecgl.common.uv.fragmentHeader\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.util.srgb\n\nvoid main()\n{\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(color);\n#else\n gl_FragColor = color;\n#endif\n\n#ifdef VERTEX_COLOR\n gl_FragColor *= v_Color;\n#endif\n\n @import ecgl.common.albedo.main\n\n @import ecgl.common.diffuseLayer.main\n\n gl_FragColor *= albedoTexel;\n\n#ifdef ATMOSPHERE_ENABLED\n float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);\n gl_FragColor.rgb += glowColor * atmoIntensity;\n#endif\n\n @import ecgl.common.emissiveLayer.main\n\n @import ecgl.common.wireframe.fragmentMain\n\n}\n@end"),Yn.import("/**\n * http: */\n\n@export ecgl.lambert.vertex\n\n@import ecgl.common.transformUniforms\n\n@import ecgl.common.uv.header\n\n\n@import ecgl.common.attributes\n\n@import ecgl.common.wireframe.vertexHeader\n\n#ifdef VERTEX_COLOR\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n#endif\n\n\n@import ecgl.common.vertexAnimation.header\n\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nvoid main()\n{\n @import ecgl.common.uv.main\n\n @import ecgl.common.vertexAnimation.main\n\n\n gl_Position = worldViewProjection * vec4(pos, 1.0);\n\n v_Normal = normalize((worldInverseTranspose * vec4(norm, 0.0)).xyz);\n v_WorldPosition = (world * vec4(pos, 1.0)).xyz;\n\n#ifdef VERTEX_COLOR\n v_Color = a_Color;\n#endif\n\n @import ecgl.common.wireframe.vertexMain\n}\n\n@end\n\n\n@export ecgl.lambert.fragment\n\n#define LAYER_DIFFUSEMAP_COUNT 0\n#define LAYER_EMISSIVEMAP_COUNT 0\n\n#define NORMAL_UP_AXIS 1\n#define NORMAL_FRONT_AXIS 2\n\n@import ecgl.common.uv.fragmentHeader\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nuniform sampler2D diffuseMap;\nuniform sampler2D detailMap;\n\n@import ecgl.common.layers.header\n\nuniform float emissionIntensity: 1.0;\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nuniform mat4 viewInverse : VIEWINVERSE;\n\n#ifdef ATMOSPHERE_ENABLED\nuniform mat4 viewTranspose: VIEWTRANSPOSE;\nuniform vec3 glowColor;\nuniform float glowPower;\n#endif\n\n#ifdef AMBIENT_LIGHT_COUNT\n@import clay.header.ambient_light\n#endif\n#ifdef AMBIENT_SH_LIGHT_COUNT\n@import clay.header.ambient_sh_light\n#endif\n\n#ifdef DIRECTIONAL_LIGHT_COUNT\n@import clay.header.directional_light\n#endif\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\n\n\n@import ecgl.common.ssaoMap.header\n\n@import ecgl.common.bumpMap.header\n\n@import clay.util.srgb\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.plugin.compute_shadow_map\n\nvoid main()\n{\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(color);\n#else\n gl_FragColor = color;\n#endif\n\n#ifdef VERTEX_COLOR\n #ifdef SRGB_DECODE\n gl_FragColor *= sRGBToLinear(v_Color);\n #else\n gl_FragColor *= v_Color;\n #endif\n#endif\n\n @import ecgl.common.albedo.main\n\n @import ecgl.common.diffuseLayer.main\n\n gl_FragColor *= albedoTexel;\n\n vec3 N = v_Normal;\n#ifdef DOUBLE_SIDED\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(eyePos - v_WorldPosition);\n\n if (dot(N, V) < 0.0) {\n N = -N;\n }\n#endif\n\n float ambientFactor = 1.0;\n\n#ifdef BUMPMAP_ENABLED\n N = bumpNormal(v_WorldPosition, v_Normal, N);\n ambientFactor = dot(v_Normal, N);\n#endif\n\n vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);\n\n vec3 diffuseColor = vec3(0.0, 0.0, 0.0);\n\n @import ecgl.common.ssaoMap.main\n\n#ifdef AMBIENT_LIGHT_COUNT\n for(int i = 0; i < AMBIENT_LIGHT_COUNT; i++)\n {\n diffuseColor += ambientLightColor[i] * ambientFactor * ao;\n }\n#endif\n#ifdef AMBIENT_SH_LIGHT_COUNT\n for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)\n {{\n diffuseColor += calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_] * ao;\n }}\n#endif\n#ifdef DIRECTIONAL_LIGHT_COUNT\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];\n if(shadowEnabled)\n {\n computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);\n }\n#endif\n for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)\n {\n vec3 lightDirection = -directionalLightDirection[i];\n vec3 lightColor = directionalLightColor[i];\n\n float shadowContrib = 1.0;\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n if (shadowEnabled)\n {\n shadowContrib = shadowContribsDir[i];\n }\n#endif\n\n float ndl = dot(N, normalize(lightDirection)) * shadowContrib;\n\n diffuseColor += lightColor * clamp(ndl, 0.0, 1.0);\n }\n#endif\n\n gl_FragColor.rgb *= diffuseColor;\n\n#ifdef ATMOSPHERE_ENABLED\n float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);\n gl_FragColor.rgb += glowColor * atmoIntensity;\n#endif\n\n @import ecgl.common.emissiveLayer.main\n\n @import ecgl.common.wireframe.fragmentMain\n}\n\n@end"),Yn.import("@export ecgl.realistic.vertex\n\n@import ecgl.common.transformUniforms\n\n@import ecgl.common.uv.header\n\n@import ecgl.common.attributes\n\n\n@import ecgl.common.wireframe.vertexHeader\n\n#ifdef VERTEX_COLOR\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n#endif\n\n#ifdef NORMALMAP_ENABLED\nattribute vec4 tangent : TANGENT;\nvarying vec3 v_Tangent;\nvarying vec3 v_Bitangent;\n#endif\n\n@import ecgl.common.vertexAnimation.header\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nvoid main()\n{\n\n @import ecgl.common.uv.main\n\n @import ecgl.common.vertexAnimation.main\n\n gl_Position = worldViewProjection * vec4(pos, 1.0);\n\n v_Normal = normalize((worldInverseTranspose * vec4(norm, 0.0)).xyz);\n v_WorldPosition = (world * vec4(pos, 1.0)).xyz;\n\n#ifdef VERTEX_COLOR\n v_Color = a_Color;\n#endif\n\n#ifdef NORMALMAP_ENABLED\n v_Tangent = normalize((worldInverseTranspose * vec4(tangent.xyz, 0.0)).xyz);\n v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);\n#endif\n\n @import ecgl.common.wireframe.vertexMain\n\n}\n\n@end\n\n\n\n@export ecgl.realistic.fragment\n\n#define LAYER_DIFFUSEMAP_COUNT 0\n#define LAYER_EMISSIVEMAP_COUNT 0\n#define PI 3.14159265358979\n#define ROUGHNESS_CHANEL 0\n#define METALNESS_CHANEL 1\n\n#define NORMAL_UP_AXIS 1\n#define NORMAL_FRONT_AXIS 2\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\n\n@import ecgl.common.uv.fragmentHeader\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nuniform sampler2D diffuseMap;\n\nuniform sampler2D detailMap;\nuniform sampler2D metalnessMap;\nuniform sampler2D roughnessMap;\n\n@import ecgl.common.layers.header\n\nuniform float emissionIntensity: 1.0;\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nuniform float metalness : 0.0;\nuniform float roughness : 0.5;\n\nuniform mat4 viewInverse : VIEWINVERSE;\n\n#ifdef ATMOSPHERE_ENABLED\nuniform mat4 viewTranspose: VIEWTRANSPOSE;\nuniform vec3 glowColor;\nuniform float glowPower;\n#endif\n\n#ifdef AMBIENT_LIGHT_COUNT\n@import clay.header.ambient_light\n#endif\n\n#ifdef AMBIENT_SH_LIGHT_COUNT\n@import clay.header.ambient_sh_light\n#endif\n\n#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT\n@import clay.header.ambient_cubemap_light\n#endif\n\n#ifdef DIRECTIONAL_LIGHT_COUNT\n@import clay.header.directional_light\n#endif\n\n@import ecgl.common.normalMap.fragmentHeader\n\n@import ecgl.common.ssaoMap.header\n\n@import ecgl.common.bumpMap.header\n\n@import clay.util.srgb\n\n@import clay.util.rgbm\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.plugin.compute_shadow_map\n\nvec3 F_Schlick(float ndv, vec3 spec) {\n return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);\n}\n\nfloat D_Phong(float g, float ndh) {\n float a = pow(8192.0, g);\n return (a + 2.0) / 8.0 * pow(ndh, a);\n}\n\nvoid main()\n{\n vec4 albedoColor = color;\n\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(eyePos - v_WorldPosition);\n#ifdef VERTEX_COLOR\n #ifdef SRGB_DECODE\n albedoColor *= sRGBToLinear(v_Color);\n #else\n albedoColor *= v_Color;\n #endif\n#endif\n\n @import ecgl.common.albedo.main\n\n @import ecgl.common.diffuseLayer.main\n\n albedoColor *= albedoTexel;\n\n float m = metalness;\n\n#ifdef METALNESSMAP_ENABLED\n float m2 = texture2D(metalnessMap, v_DetailTexcoord)[METALNESS_CHANEL];\n m = clamp(m2 + (m - 0.5) * 2.0, 0.0, 1.0);\n#endif\n\n vec3 baseColor = albedoColor.rgb;\n albedoColor.rgb = baseColor * (1.0 - m);\n vec3 specFactor = mix(vec3(0.04), baseColor, m);\n\n float g = 1.0 - roughness;\n\n#ifdef ROUGHNESSMAP_ENABLED\n float g2 = 1.0 - texture2D(roughnessMap, v_DetailTexcoord)[ROUGHNESS_CHANEL];\n g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);\n#endif\n\n vec3 N = v_Normal;\n\n#ifdef DOUBLE_SIDED\n if (dot(N, V) < 0.0) {\n N = -N;\n }\n#endif\n\n float ambientFactor = 1.0;\n\n#ifdef BUMPMAP_ENABLED\n N = bumpNormal(v_WorldPosition, v_Normal, N);\n ambientFactor = dot(v_Normal, N);\n#endif\n\n@import ecgl.common.normalMap.fragmentMain\n\n vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);\n\n vec3 diffuseTerm = vec3(0.0);\n vec3 specularTerm = vec3(0.0);\n\n float ndv = clamp(dot(N, V), 0.0, 1.0);\n vec3 fresnelTerm = F_Schlick(ndv, specFactor);\n\n @import ecgl.common.ssaoMap.main\n\n#ifdef AMBIENT_LIGHT_COUNT\n for(int _idx_ = 0; _idx_ < AMBIENT_LIGHT_COUNT; _idx_++)\n {{\n diffuseTerm += ambientLightColor[_idx_] * ambientFactor * ao;\n }}\n#endif\n\n#ifdef AMBIENT_SH_LIGHT_COUNT\n for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)\n {{\n diffuseTerm += calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_] * ao;\n }}\n#endif\n\n#ifdef DIRECTIONAL_LIGHT_COUNT\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];\n if(shadowEnabled)\n {\n computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);\n }\n#endif\n for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++)\n {{\n vec3 L = -directionalLightDirection[_idx_];\n vec3 lc = directionalLightColor[_idx_];\n\n vec3 H = normalize(L + V);\n float ndl = clamp(dot(N, normalize(L)), 0.0, 1.0);\n float ndh = clamp(dot(N, H), 0.0, 1.0);\n\n float shadowContrib = 1.0;\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n if (shadowEnabled)\n {\n shadowContrib = shadowContribsDir[_idx_];\n }\n#endif\n\n vec3 li = lc * ndl * shadowContrib;\n\n diffuseTerm += li;\n specularTerm += li * fresnelTerm * D_Phong(g, ndh);\n }}\n#endif\n\n\n#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT\n vec3 L = reflect(-V, N);\n L = vec3(L.x, L[NORMAL_UP_AXIS], L[NORMAL_FRONT_AXIS]);\n float rough2 = clamp(1.0 - g, 0.0, 1.0);\n float bias2 = rough2 * 5.0;\n vec2 brdfParam2 = texture2D(ambientCubemapLightBRDFLookup[0], vec2(rough2, ndv)).xy;\n vec3 envWeight2 = specFactor * brdfParam2.x + brdfParam2.y;\n vec3 envTexel2;\n for(int _idx_ = 0; _idx_ < AMBIENT_CUBEMAP_LIGHT_COUNT; _idx_++)\n {{\n envTexel2 = RGBMDecode(textureCubeLodEXT(ambientCubemapLightCubemap[_idx_], L, bias2), 8.12);\n specularTerm += ambientCubemapLightColor[_idx_] * envTexel2 * envWeight2 * ao;\n }}\n#endif\n\n gl_FragColor.rgb = albedoColor.rgb * diffuseTerm + specularTerm;\n gl_FragColor.a = albedoColor.a;\n\n#ifdef ATMOSPHERE_ENABLED\n float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);\n gl_FragColor.rgb += glowColor * atmoIntensity;\n#endif\n\n#ifdef SRGB_ENCODE\n gl_FragColor = linearTosRGB(gl_FragColor);\n#endif\n\n @import ecgl.common.emissiveLayer.main\n\n @import ecgl.common.wireframe.fragmentMain\n}\n\n@end"),Yn.import("@export ecgl.hatching.vertex\n\n@import ecgl.realistic.vertex\n\n@end\n\n\n@export ecgl.hatching.fragment\n\n#define NORMAL_UP_AXIS 1\n#define NORMAL_FRONT_AXIS 2\n\n@import ecgl.common.uv.fragmentHeader\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nuniform vec4 color : [0.0, 0.0, 0.0, 1.0];\nuniform vec4 paperColor : [1.0, 1.0, 1.0, 1.0];\n\nuniform mat4 viewInverse : VIEWINVERSE;\n\n#ifdef AMBIENT_LIGHT_COUNT\n@import clay.header.ambient_light\n#endif\n#ifdef AMBIENT_SH_LIGHT_COUNT\n@import clay.header.ambient_sh_light\n#endif\n\n#ifdef DIRECTIONAL_LIGHT_COUNT\n@import clay.header.directional_light\n#endif\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\n\n\n@import ecgl.common.ssaoMap.header\n\n@import ecgl.common.bumpMap.header\n\n@import clay.util.srgb\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.plugin.compute_shadow_map\n\nuniform sampler2D hatch1;\nuniform sampler2D hatch2;\nuniform sampler2D hatch3;\nuniform sampler2D hatch4;\nuniform sampler2D hatch5;\nuniform sampler2D hatch6;\n\nfloat shade(in float tone) {\n vec4 c = vec4(1. ,1., 1., 1.);\n float step = 1. / 6.;\n vec2 uv = v_DetailTexcoord;\n if (tone <= step / 2.0) {\n c = mix(vec4(0.), texture2D(hatch6, uv), 12. * tone);\n }\n else if (tone <= step) {\n c = mix(texture2D(hatch6, uv), texture2D(hatch5, uv), 6. * tone);\n }\n if(tone > step && tone <= 2. * step){\n c = mix(texture2D(hatch5, uv), texture2D(hatch4, uv) , 6. * (tone - step));\n }\n if(tone > 2. * step && tone <= 3. * step){\n c = mix(texture2D(hatch4, uv), texture2D(hatch3, uv), 6. * (tone - 2. * step));\n }\n if(tone > 3. * step && tone <= 4. * step){\n c = mix(texture2D(hatch3, uv), texture2D(hatch2, uv), 6. * (tone - 3. * step));\n }\n if(tone > 4. * step && tone <= 5. * step){\n c = mix(texture2D(hatch2, uv), texture2D(hatch1, uv), 6. * (tone - 4. * step));\n }\n if(tone > 5. * step){\n c = mix(texture2D(hatch1, uv), vec4(1.), 6. * (tone - 5. * step));\n }\n\n return c.r;\n}\n\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main()\n{\n#ifdef SRGB_DECODE\n vec4 inkColor = sRGBToLinear(color);\n#else\n vec4 inkColor = color;\n#endif\n\n#ifdef VERTEX_COLOR\n #ifdef SRGB_DECODE\n inkColor *= sRGBToLinear(v_Color);\n #else\n inkColor *= v_Color;\n #endif\n#endif\n\n vec3 N = v_Normal;\n#ifdef DOUBLE_SIDED\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(eyePos - v_WorldPosition);\n\n if (dot(N, V) < 0.0) {\n N = -N;\n }\n#endif\n\n float tone = 0.0;\n\n float ambientFactor = 1.0;\n\n#ifdef BUMPMAP_ENABLED\n N = bumpNormal(v_WorldPosition, v_Normal, N);\n ambientFactor = dot(v_Normal, N);\n#endif\n\n vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);\n\n @import ecgl.common.ssaoMap.main\n\n#ifdef AMBIENT_LIGHT_COUNT\n for(int i = 0; i < AMBIENT_LIGHT_COUNT; i++)\n {\n tone += dot(ambientLightColor[i], w) * ambientFactor * ao;\n }\n#endif\n#ifdef AMBIENT_SH_LIGHT_COUNT\n for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)\n {{\n tone += dot(calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_], w) * ao;\n }}\n#endif\n#ifdef DIRECTIONAL_LIGHT_COUNT\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];\n if(shadowEnabled)\n {\n computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);\n }\n#endif\n for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)\n {\n vec3 lightDirection = -directionalLightDirection[i];\n float lightTone = dot(directionalLightColor[i], w);\n\n float shadowContrib = 1.0;\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n if (shadowEnabled)\n {\n shadowContrib = shadowContribsDir[i];\n }\n#endif\n\n float ndl = dot(N, normalize(lightDirection)) * shadowContrib;\n\n tone += lightTone * clamp(ndl, 0.0, 1.0);\n }\n#endif\n\n gl_FragColor = mix(inkColor, paperColor, shade(clamp(tone, 0.0, 1.0)));\n }\n@end\n"),Yn.import("@export ecgl.sm.depth.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nattribute vec3 position : POSITION;\nattribute vec2 texcoord : TEXCOORD_0;\n\n#ifdef VERTEX_ANIMATION\nattribute vec3 prevPosition;\nuniform float percent : 1.0;\n#endif\n\nvarying vec4 v_ViewPosition;\nvarying vec2 v_Texcoord;\n\nvoid main(){\n\n#ifdef VERTEX_ANIMATION\n vec3 pos = mix(prevPosition, position, percent);\n#else\n vec3 pos = position;\n#endif\n\n v_ViewPosition = worldViewProjection * vec4(pos, 1.0);\n gl_Position = v_ViewPosition;\n\n v_Texcoord = texcoord;\n\n}\n@end\n\n\n\n@export ecgl.sm.depth.fragment\n\n@import clay.sm.depth.fragment\n\n@end");var Fre=Bf.prototype.addToScene,Bre=Bf.prototype.removeFromScene;Bf.prototype.addToScene=function(e){if(Fre.call(this,e),this.__zr){var n=this.__zr;e.traverse(function(t){t.__zr=n,t.addAnimatorsToZr&&t.addAnimatorsToZr(n)})}},Bf.prototype.removeFromScene=function(e){Bre.call(this,e),e.traverse(function(n){var t=n.__zr;n.__zr=null,t&&n.removeAnimatorsFromZr&&n.removeAnimatorsFromZr(t)})},Sc.prototype.setTextureImage=function(e,n,t,r){if(this.shader){var d,i=t.getZr(),o=this;return o.autoUpdateTextureStatus=!1,o.disableTexture(e),function kre(e){return!e||"none"===e}(n)||(d=Ar.loadTexture(n,t,r,function(f){o.enableTexture(e),i&&i.refresh()}),o.set(e,d)),d}};var Ar={};Ar.Renderer=rC,Ar.Node=Lu,Ar.Mesh=av,Ar.Shader=Yn,Ar.Material=Sc,Ar.Texture=fr,Ar.Texture2D=Kr,Ar.Geometry=Ei,Ar.SphereGeometry=fre,Ar.PlaneGeometry=A2,Ar.CubeGeometry=tW,Ar.AmbientLight=gre,Ar.DirectionalLight=mre,Ar.PointLight=yre,Ar.SpotLight=xre,Ar.PerspectiveCamera=No,Ar.OrthographicCamera=zy,Ar.Vector2=Fl,Ar.Vector3=On,Ar.Vector4=wre,Ar.Quaternion=z6,Ar.Matrix2=Cre,Ar.Matrix2d=Sre,Ar.Matrix3=Dre,Ar.Matrix4=cr,Ar.Plane=Y6,Ar.Ray=_2,Ar.BoundingBox=Ws,Ar.Frustum=zB;var k2=null;function lW(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))}function cW(e){if((e.wrapS===fr.REPEAT||e.wrapT===fr.REPEAT)&&e.image){var n=lW(e.width),t=lW(e.height);if(n!==e.width||t!==e.height){var r=document.createElement("canvas");r.width=n,r.height=t,r.getContext("2d").drawImage(e.image,0,0,n,t),e.image=r}}}Ar.loadTexture=function(e,n,t,r){"function"==typeof t&&(r=t,t={}),t=t||{};for(var i=Object.keys(t).sort(),o="",d=0;d<i.length;d++)o+=i[d]+"_"+t[i[d]]+"_";var f=n.__textureCache=n.__textureCache||new fne.ZP(20);if(function Nre(e){return e.getZr&&e.setOption}(e)){if(_=f.get(o+(g=e.__textureid__)))_.texture.surface.setECharts(e),r&&r(_.texture);else{var w=new $ne(e);for(w.onupdate=function(){n.getZr().refresh()},_={texture:w.getTexture()},d=0;d<i.length;d++)_.texture[i[d]]=t[i[d]];e.__textureid__=g=e.__textureid__||"__ecgl_ec__"+_.texture.__uid__,f.put(o+g,_),r&&r(_.texture)}return _.texture}if(sW(e)){var g,_;if(!(_=f.get(o+(g=e.__textureid__)))){for(_={texture:new Ar.Texture2D({image:e})},d=0;d<i.length;d++)_.texture[i[d]]=t[i[d]];e.__textureid__=g=e.__textureid__||"__ecgl_image__"+_.texture.__uid__,f.put(o+g,_),cW(_.texture),r&&r(_.texture)}return _.texture}if(_=f.get(o+e))_.callbacks?_.callbacks.push(r):r&&r(_.texture);else if(e.match(/.hdr$|^data:application\/octet-stream/)){_={callbacks:[r]};var S=dv.loadTexture(e,{exposure:t.exposure,fileType:"hdr"},function(){S.dirty(),_.callbacks.forEach(function(ne){ne&&ne(S)}),_.callbacks=null});_.texture=S,f.put(o+e,_)}else{for(S=new Ar.Texture2D({image:new Image}),d=0;d<i.length;d++)S[i[d]]=t[i[d]];_={texture:S,callbacks:[r]};var k=S.image;k.onload=function(){S.image=k,cW(S),S.dirty(),_.callbacks.forEach(function(pe){pe&&pe(S)}),_.callbacks=null},k.crossOrigin="Anonymous",k.src=e,S.image=function Vre(){return null!==k2||(k2=dv.createBlank("rgba(255,255,255,0)").image),k2}(),f.put(o+e,_)}return _.texture},Ar.createAmbientCubemap=function(e,n,t,r){var i=(e=e||{}).texture,o=Jr.firstNotNull(e.exposure,1),d=new ire({intensity:Jr.firstNotNull(e.specularIntensity,1)}),f=new ore({intensity:Jr.firstNotNull(e.diffuseIntensity,1),coefficients:[.844,.712,.691,-.037,.083,.167,.343,.288,.299,-.041,-.021,-.009,-.003,-.041,-.064,-.011,-.007,-.004,-.031,.034,.081,-.06,-.049,-.06,.046,.056,.05]});return d.cubemap=Ar.loadTexture(i,t,{exposure:o},function(){d.cubemap.flipY=!1,d.prefilter(n,32),f.coefficients=ure.projectEnvironmentMap(n,d.cubemap,{lod:1}),r&&r()}),{specular:d,diffuse:f}},Ar.createBlankTexture=dv.createBlank,Ar.isImage=sW,Ar.additiveBlend=function(e){e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)},Ar.parseColor=function(e,n){return e instanceof Array?(n||(n=[]),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e.length>3?e[3]:1,n):((n=Ct.$_.parse(e||"#000",n)||[0,0,0,0])[0]/=255,n[1]/=255,n[2]/=255,n)},Ar.directionFromAlphaBeta=function(e,n){var t=e/180*Math.PI+Math.PI/2,r=-n/180*Math.PI+Math.PI/2,i=[],o=Math.sin(t);return i[0]=o*Math.cos(r),i[1]=-Math.cos(t),i[2]=o*Math.sin(r),i},Ar.getShadowResolution=function(e){var n=1024;switch(e){case"low":n=512;break;case"medium":break;case"high":n=2048;break;case"ultra":n=4096}return n},Ar.COMMON_SHADERS=["lambert","color","realistic","hatching","shadow"],Ar.createShader=function(e){"ecgl.shadow"===e&&(e="ecgl.displayShadow");var n=Yn.source(e+".vertex"),t=Yn.source(e+".fragment");n||console.error("Vertex shader of '%s' not exits",e),t||console.error("Fragment shader of '%s' not exits",e);var r=new Yn(n,t);return r.name=e,r},Ar.createMaterial=function(e,n){n instanceof Array||(n=[n]);var t=Ar.createShader(e),r=new Sc({shader:t});return n.forEach(function(i){"string"==typeof i&&r.define(i)}),r},Ar.setMaterialFromModel=function(e,n,t,r){n.autoUpdateTextureStatus=!1;var i=t.getModel(e+"Material"),o=i.get("detailTexture"),d=Jr.firstNotNull(i.get("textureTiling"),1),f=Jr.firstNotNull(i.get("textureOffset"),0);"number"==typeof d&&(d=[d,d]),"number"==typeof f&&(f=[f,f]);var g=d[0]>1||d[1]>1?Ar.Texture.REPEAT:Ar.Texture.CLAMP_TO_EDGE,_={anisotropic:8,wrapS:g,wrapT:g};if("realistic"===e){var w=i.get("roughness"),S=i.get("metalness");null!=S?isNaN(S)&&(n.setTextureImage("metalnessMap",S,r,_),S=Jr.firstNotNull(i.get("metalnessAdjust"),.5)):S=0,null!=w?isNaN(w)&&(n.setTextureImage("roughnessMap",w,r,_),w=Jr.firstNotNull(i.get("roughnessAdjust"),.5)):w=.5;var k=i.get("normalTexture");n.setTextureImage("detailMap",o,r,_),n.setTextureImage("normalMap",k,r,_),n.set({roughness:w,metalness:S,detailUvRepeat:d,detailUvOffset:f})}else if("lambert"===e)n.setTextureImage("detailMap",o,r,_),n.set({detailUvRepeat:d,detailUvOffset:f});else if("color"===e)n.setTextureImage("detailMap",o,r,_),n.set({detailUvRepeat:d,detailUvOffset:f});else if("hatching"===e){for(var V=i.get("hatchingTextures")||[],ne=0;ne<6;ne++)n.setTextureImage("hatch"+(ne+1),V[ne],r,{anisotropic:8,wrapS:Ar.Texture.REPEAT,wrapT:Ar.Texture.REPEAT});n.set({detailUvRepeat:d,detailUvOffset:f})}},Ar.updateVertexAnimation=function(e,n,t,r){var i=r.get("animation"),o=r.get("animationDurationUpdate"),d=r.get("animationEasingUpdate"),f=t.shadowDepthMaterial;if(i&&n&&o>0&&n.geometry.vertexCount===t.geometry.vertexCount){t.material.define("vertex","VERTEX_ANIMATION"),t.ignorePreZ=!0,f&&f.define("vertex","VERTEX_ANIMATION");for(var g=0;g<e.length;g++)t.geometry.attributes[e[g][0]].value=n.geometry.attributes[e[g][1]].value;t.geometry.dirty(),t.__percent=0,t.material.set("percent",0),t.stopAnimation(),t.animate().when(o,{__percent:1}).during(function(){t.material.set("percent",t.__percent),f&&f.set("percent",t.__percent)}).done(function(){t.ignorePreZ=!1,t.material.undefine("vertex","VERTEX_ANIMATION"),f&&f.undefine("vertex","VERTEX_ANIMATION")}).start(d)}else t.material.undefine("vertex","VERTEX_ANIMATION"),f&&f.undefine("vertex","VERTEX_ANIMATION")};const lt=Ar;var QB=z(2415),qi=function(e,n){this.id=e,this.zr=n;try{this.renderer=new rC({clearBit:0,devicePixelRatio:n.painter.dpr,preserveDrawingBuffer:!0,premultipliedAlpha:!0}),this.renderer.resize(n.painter.getWidth(),n.painter.getHeight())}catch(r){return this.renderer=null,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute; left: 0; top: 0; right: 0; bottom: 0;",this.dom.className="ecgl-nowebgl",this.dom.innerHTML="Sorry, your browser does not support WebGL",void console.error(r)}this.onglobalout=this.onglobalout.bind(this),n.on("globalout",this.onglobalout),this.dom=this.renderer.canvas;var t=this.dom.style;t.position="absolute",t.left="0",t.top="0",this.views=[],this._picking=new rne({renderer:this.renderer}),this._viewsToDispose=[],this._accumulatingId=0,this._zrEventProxy=new Ct.Q.Rect({shape:{x:-1,y:-1,width:2,height:2},__isGLToZRProxy:!0}),this._backgroundColor=null,this._disposed=!1};function uW(e){var n=e.__zr;e.__zr=null,n&&e.removeAnimatorsFromZr&&e.removeAnimatorsFromZr(n)}qi.prototype.setUnpainted=function(){},qi.prototype.addView=function(e){if(e.layer!==this){var n=this._viewsToDispose.indexOf(e);n>=0&&this._viewsToDispose.splice(n,1),this.views.push(e),e.layer=this;var t=this.zr;e.scene.traverse(function(r){r.__zr=t,r.addAnimatorsToZr&&r.addAnimatorsToZr(t)})}},qi.prototype.removeView=function(e){if(e.layer===this){var n=this.views.indexOf(e);n>=0&&(this.views.splice(n,1),e.scene.traverse(uW,this),e.layer=null,this._viewsToDispose.push(e))}},qi.prototype.removeViewsAll=function(){this.views.forEach(function(e){e.scene.traverse(uW,this),e.layer=null,this._viewsToDispose.push(e)},this),this.views.length=0},qi.prototype.resize=function(e,n){this.renderer.resize(e,n)},qi.prototype.clear=function(){var e=this.renderer.gl,n=this._backgroundColor||[0,0,0,0];e.clearColor(n[0],n[1],n[2],n[3]),e.depthMask(!0),e.colorMask(!0,!0,!0,!0),e.clear(e.DEPTH_BUFFER_BIT|e.COLOR_BUFFER_BIT)},qi.prototype.clearDepth=function(){var e=this.renderer.gl;e.clear(e.DEPTH_BUFFER_BIT)},qi.prototype.clearColor=function(){var e=this.renderer.gl;e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},qi.prototype.needsRefresh=function(){this.zr.refresh()},qi.prototype.refresh=function(e){this._backgroundColor=e?lt.parseColor(e):[0,0,0,0],this.renderer.clearColor=this._backgroundColor;for(var n=0;n<this.views.length;n++)this.views[n].prepareRender(this.renderer);for(this._doRender(!1),this._trackAndClean(),n=0;n<this._viewsToDispose.length;n++)this._viewsToDispose[n].dispose(this.renderer);this._viewsToDispose.length=0,this._startAccumulating()},qi.prototype.renderToCanvas=function(e){this._startAccumulating(!0),e.drawImage(this.dom,0,0,e.canvas.width,e.canvas.height)},qi.prototype._doRender=function(e){this.clear(),this.renderer.saveViewport();for(var n=0;n<this.views.length;n++)this.views[n].render(this.renderer,e);this.renderer.restoreViewport()},qi.prototype._stopAccumulating=function(){this._accumulatingId=0,clearTimeout(this._accumulatingTimeout)};var zre=1;function N2(e){for(var n=0;n<e.length;n++)e[n].__used__=0}function F2(e,n){for(var t=0;t<n.length;t++)n[t].__used__||n[t].dispose(e)}function B2(e,n){e.__used__=e.__used__||0,e.__used__++,1===e.__used__&&n.push(e)}function Hre(e,n,t){var r,i;e.traverse(function(d){if(d.isRenderable()){var f=d.geometry,g=d.material;if(g!==r)for(var _=g.getTextureUniforms(),w=0;w<_.length;w++){var k=g.uniforms[_[w]].value;if(k)if(k instanceof fr)B2(k,n);else if(k instanceof Array)for(var V=0;V<k.length;V++)k[V]instanceof fr&&B2(k[V],n)}f!==i&&B2(f,t),r=g,i=f}});for(var o=0;o<e.lights.length;o++)e.lights[o].cubemap&&B2(e.lights[o].cubemap,n)}qi.prototype._startAccumulating=function(e){var n=this;this._stopAccumulating();for(var t=!1,r=0;r<this.views.length;r++)t=this.views[r].needsAccumulate()||t;function i(o){if(n._accumulatingId&&o===n._accumulatingId){for(var d=!0,f=0;f<n.views.length;f++)d=n.views[f].isAccumulateFinished()&&t;d||(n._doRender(!0),e?i(o):(0,QB.Z)(function(){i(o)}))}}t&&(this._accumulatingId=zre++,e?i(n._accumulatingId):this._accumulatingTimeout=setTimeout(function(){i(n._accumulatingId)},50))},qi.prototype._trackAndClean=function(){var e=[],n=[];this._textureList&&(N2(this._textureList),N2(this._geometriesList));for(var t=0;t<this.views.length;t++)Hre(this.views[t].scene,e,n);this._textureList&&(F2(this.renderer,this._textureList),F2(this.renderer,this._geometriesList)),this._textureList=e,this._geometriesList=n},qi.prototype.dispose=function(){this._disposed||(this._stopAccumulating(),this._textureList&&(N2(this._textureList),N2(this._geometriesList),F2(this.renderer,this._textureList),F2(this.renderer,this._geometriesList)),this.zr.off("globalout",this.onglobalout),this._disposed=!0)},qi.prototype.onmousedown=function(e){if(!e.target||!e.target.__isGLToZRProxy){var n=this.pickObject((e=e.event).offsetX,e.offsetY);n&&(this._dispatchEvent("mousedown",e,n),this._dispatchDataEvent("mousedown",e,n)),this._downX=e.offsetX,this._downY=e.offsetY}},qi.prototype.onmousemove=function(e){if(!e.target||!e.target.__isGLToZRProxy){var n=this.pickObject((e=e.event).offsetX,e.offsetY),t=n&&n.target,r=this._hovered;this._hovered=n,r&&t!==r.target&&(r.relatedTarget=t,this._dispatchEvent("mouseout",e,r),this.zr.setCursorStyle("default")),this._dispatchEvent("mousemove",e,n),n&&(this.zr.setCursorStyle("pointer"),(!r||t!==r.target)&&this._dispatchEvent("mouseover",e,n)),this._dispatchDataEvent("mousemove",e,n)}},qi.prototype.onmouseup=function(e){if(!e.target||!e.target.__isGLToZRProxy){var n=this.pickObject((e=e.event).offsetX,e.offsetY);n&&(this._dispatchEvent("mouseup",e,n),this._dispatchDataEvent("mouseup",e,n)),this._upX=e.offsetX,this._upY=e.offsetY}},qi.prototype.onclick=qi.prototype.dblclick=function(e){if(!e.target||!e.target.__isGLToZRProxy){var n=this._upX-this._downX,t=this._upY-this._downY;if(!(Math.sqrt(n*n+t*t)>20)){var r=this.pickObject((e=e.event).offsetX,e.offsetY);r&&(this._dispatchEvent(e.type,e,r),this._dispatchDataEvent(e.type,e,r));var i=this._clickToSetFocusPoint(e);i&&i.view.setDOFFocusOnPoint(i.distance)&&this.zr.refresh()}}},qi.prototype._clickToSetFocusPoint=function(e){for(var n=this.renderer,t=n.viewport,r=this.views.length-1;r>=0;r--){var i=this.views[r];if(i.hasDOF()&&i.containPoint(e.offsetX,e.offsetY)){this._picking.scene=i.scene,this._picking.camera=i.camera,n.viewport=i.viewport;var o=this._picking.pick(e.offsetX,e.offsetY,!0);if(o)return o.view=i,o}}n.viewport=t},qi.prototype.onglobalout=function(e){var n=this._hovered;n&&this._dispatchEvent("mouseout",e,{target:n.target})},qi.prototype.pickObject=function(e,n){for(var t=[],r=this.renderer,i=r.viewport,o=0;o<this.views.length;o++){var d=this.views[o];d.containPoint(e,n)&&(this._picking.scene=d.scene,this._picking.camera=d.camera,r.viewport=d.viewport,this._picking.pickAll(e,n,t))}return r.viewport=i,t.sort(function(f,g){return f.distance-g.distance}),t[0]},qi.prototype._dispatchEvent=function(e,n,t){t||(t={});var r=t.target;for(t.cancelBubble=!1,t.event=n,t.type=e,t.offsetX=n.offsetX,t.offsetY=n.offsetY;r&&(r.trigger(e,t),r=r.getParent(),!t.cancelBubble););this._dispatchToView(e,t)},qi.prototype._dispatchDataEvent=function(e,n,t){var r=t&&t.target,i=r&&r.dataIndex,o=r&&r.seriesIndex,d=r&&r.eventData,f=!1,g=this._zrEventProxy;g.x=n.offsetX,g.y=n.offsetY,g.update();var _={target:g};const w=Ct._y.getECData(g);"mousemove"===e&&(null!=i?i!==this._lastDataIndex&&(parseInt(this._lastDataIndex,10)>=0&&(w.dataIndex=this._lastDataIndex,w.seriesIndex=this._lastSeriesIndex,this.zr.handler.dispatchToElement(_,"mouseout",n)),f=!0):null!=d&&d!==this._lastEventData&&(null!=this._lastEventData&&(w.eventData=this._lastEventData,this.zr.handler.dispatchToElement(_,"mouseout",n)),f=!0),this._lastEventData=d,this._lastDataIndex=i,this._lastSeriesIndex=o),w.eventData=d,w.dataIndex=i,w.seriesIndex=o,(null!=d||parseInt(i,10)>=0&&parseInt(o,10)>=0)&&(this.zr.handler.dispatchToElement(_,e,n),f&&this.zr.handler.dispatchToElement(_,"mouseover",n))},qi.prototype._dispatchToView=function(e,n){for(var t=0;t<this.views.length;t++)this.views[t].containPoint(n.offsetX,n.offsetY)&&this.views[t].trigger(e,n)},Object.assign(qi.prototype,yB);const dW=qi;var Ure=["bar3D","line3D","map3D","scatter3D","surface","lines3D","scatterGL","scatter3D"];function hC(e,n){if(e&&e[n]&&(e[n].normal||e[n].emphasis)){var t=e[n].normal,r=e[n].emphasis;t&&(e[n]=t),r&&(e.emphasis=e.emphasis||{},e.emphasis[n]=r)}}function V2(e){!e||(e instanceof Array||(e=[e]),Ct.D5.each(e,function(n){if(n.axisLabel){var t=n.axisLabel;Object.assign(t,t.textStyle),t.textStyle=null}}))}function hW(e){this._layers={},this._zr=e}hW.prototype.update=function(e,n){var t=this,r=n.getZr();if(r.getWidth()&&r.getHeight()){for(var d in this._layers)this._layers[d].removeViewsAll();e.eachComponent(function(f,g){if("series"!==f){var _=n.getViewOfComponentModel(g),w=g.coordinateSystem;if(_.__ecgl__){if(w){if(!w.viewGL)return void console.error("Can't find viewGL in coordinateSystem of component "+g.id);S=w.viewGL}else{if(!g.viewGL)return void console.error("Can't find viewGL of component "+g.id);S=w.viewGL}var S=w.viewGL,k=i(g);k.addView(S),_.afterRender&&_.afterRender(g,e,n,k),o(_.groupGL,g.get("silent"))}}}),e.eachSeries(function(f){var g=n.getViewOfSeriesModel(f),_=f.coordinateSystem;if(g.__ecgl__){if(_&&!_.viewGL&&!g.viewGL)return void console.error("Can't find viewGL of series "+g.id);var w=_&&_.viewGL||g.viewGL,S=i(f);S.addView(w),g.afterRender&&g.afterRender(f,e,n,S),o(g.groupGL,f.get("silent"))}})}else console.warn("Dom has no width or height");function i(f){var g;r.setSleepAfterStill(0),g=f.get("zlevel");var _=t._layers,w=_[g];if(!w){if(w=_[g]=new dW("gl-"+g,r),r.painter.isSingleCanvas()){w.virtual=!0;var S=new Ct.Q.Image({z:1e4,style:{image:w.renderer.canvas},silent:!0});w.__hostImage=S,r.add(S)}r.painter.insertLayer(g,w)}return w.__hostImage&&w.__hostImage.setStyle({width:w.renderer.getWidth(),height:w.renderer.getHeight()}),w}function o(f,g){f&&f.traverse(function(_){_.isRenderable&&_.isRenderable()&&(_.ignorePicking=null!=_.$ignorePicking?_.$ignorePicking:g)})}},Ct.sq(function(e){var n=e.getZr(),t=n.painter.dispose;n.painter.dispose=function(){"function"==typeof this.eachOtherLayer&&this.eachOtherLayer(function(r){r instanceof dW&&r.dispose()}),t.call(this)},n.painter.getRenderedCanvas=function(r){if(r=r||{},this._singleCanvas)return this._layers[0].dom;var i=document.createElement("canvas"),o=r.pixelRatio||this.dpr;i.width=this.getWidth()*o,i.height=this.getHeight()*o;var d=i.getContext("2d");d.dpr=o,d.clearRect(0,0,i.width,i.height),r.backgroundColor&&(d.fillStyle=r.backgroundColor,d.fillRect(0,0,i.width,i.height));var _,f=this.storage.getDisplayList(!0),g={},w=this;function S(pe,De){var Re=w._zlevelList;null==pe&&(pe=-1/0);for(var Fe,ke=0;ke<Re.length;ke++){var Be=Re[ke],at=w._layers[Be];if(!at.__builtin__&&Be>pe&&Be<De){Fe=at;break}}Fe&&Fe.renderToCanvas&&(d.save(),Fe.renderToCanvas(d),d.restore())}for(var k={ctx:d},V=0;V<f.length;V++){var ne=f[V];ne.zlevel!==_&&(S(_,ne.zlevel),_=ne.zlevel),this._doPaintEl(ne,k,!0,null,g)}return S(_,1/0),i}}),Ct.Br(function(e,n){var t=n.getZr();(t.__egl=t.__egl||new hW(t)).update(e,n)}),Ct.ds(function Wre(e){Ct.D5.each(e.series,function(n){Ct.D5.indexOf(Ure,n.type)>=0&&(function Gre(e){hC(e,"itemStyle"),hC(e,"lineStyle"),hC(e,"areaStyle"),hC(e,"label")}(n),"mapbox"===n.coordinateSystem&&(n.coordinateSystem="mapbox3D",e.mapbox3D=e.mapbox))}),V2(e.xAxis3D),V2(e.yAxis3D),V2(e.zAxis3D),V2(e.grid3D),hC(e.geo3D)});const z2={defaultOption:{viewControl:{projection:"perspective",autoRotate:!1,autoRotateDirection:"cw",autoRotateSpeed:10,autoRotateAfterStill:3,damping:.8,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,panMouseButton:"middle",rotateMouseButton:"left",distance:150,minDistance:40,maxDistance:400,orthographicSize:150,maxOrthographicSize:400,minOrthographicSize:20,center:[0,0,0],alpha:0,beta:0,minAlpha:-90,maxAlpha:90}},setView:function(e){e=e||{},this.option.viewControl=this.option.viewControl||{},null!=e.alpha&&(this.option.viewControl.alpha=e.alpha),null!=e.beta&&(this.option.viewControl.beta=e.beta),null!=e.distance&&(this.option.viewControl.distance=e.distance),null!=e.center&&(this.option.viewControl.center=e.center)}},Hy={defaultOption:{postEffect:{enable:!1,bloom:{enable:!0,intensity:.1},depthOfField:{enable:!1,focalRange:20,focalDistance:50,blurRadius:10,fstop:2.8,quality:"medium"},screenSpaceAmbientOcclusion:{enable:!1,radius:2,quality:"medium",intensity:1},screenSpaceReflection:{enable:!1,quality:"medium",maxRoughness:.8},colorCorrection:{enable:!0,exposure:0,brightness:0,contrast:1,saturation:1,lookupTexture:""},edge:{enable:!1},FXAA:{enable:!1}},temporalSuperSampling:{enable:"auto"}}},Uy={defaultOption:{light:{main:{shadow:!1,shadowQuality:"high",color:"#fff",intensity:1,alpha:0,beta:0},ambient:{color:"#fff",intensity:.2},ambientCubemap:{texture:null,exposure:1,diffuseIntensity:.5,specularIntensity:.5}}}};var H2=Ct.tF.extend({type:"grid3D",dependencies:["xAxis3D","yAxis3D","zAxis3D"],defaultOption:{show:!0,zlevel:-10,left:0,top:0,width:"100%",height:"100%",environment:"auto",boxWidth:100,boxHeight:100,boxDepth:100,axisPointer:{show:!0,lineStyle:{color:"rgba(0, 0, 0, 0.8)",width:1},label:{show:!0,formatter:null,margin:8,textStyle:{fontSize:14,color:"#fff",backgroundColor:"rgba(0,0,0,0.5)",padding:3,borderRadius:3}}},axisLine:{show:!0,lineStyle:{color:"#333",width:2,type:"solid"}},axisTick:{show:!0,inside:!1,length:3,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,margin:8,textStyle:{fontSize:12}},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}},light:{main:{alpha:30,beta:40},ambient:{intensity:.4}},viewControl:{alpha:20,beta:40,autoRotate:!1,distance:200,minDistance:40,maxDistance:400}}});Ct.D5.merge(H2.prototype,z2),Ct.D5.merge(H2.prototype,Hy),Ct.D5.merge(H2.prototype,Uy);const jre=H2;var U2=z(2681),fC=Jr.firstNotNull,fW={left:0,middle:1,right:2};function pW(e){return e instanceof Array||(e=[e,e]),e}var gW=Us.extend(function(){return{zr:null,viewGL:null,_center:new On,minDistance:.5,maxDistance:1.5,maxOrthographicSize:300,minOrthographicSize:30,minAlpha:-90,maxAlpha:90,minBeta:-1/0,maxBeta:1/0,autoRotateAfterStill:0,autoRotateDirection:"cw",autoRotateSpeed:60,damping:.8,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,panMouseButton:"middle",rotateMouseButton:"left",_mode:"rotate",_camera:null,_needsUpdate:!1,_rotating:!1,_phi:0,_theta:0,_mouseX:0,_mouseY:0,_rotateVelocity:new Fl,_panVelocity:new Fl,_distance:500,_zoomSpeed:0,_stillTimeout:0,_animators:[]}},function(){["_mouseDownHandler","_mouseWheelHandler","_mouseMoveHandler","_mouseUpHandler","_pinchHandler","_contextMenuHandler","_update"].forEach(function(e){this[e]=this[e].bind(this)},this)},{init:function(){var e=this.zr;e&&(e.on("mousedown",this._mouseDownHandler),e.on("globalout",this._mouseUpHandler),e.on("mousewheel",this._mouseWheelHandler),e.on("pinch",this._pinchHandler),e.animation.on("frame",this._update),e.dom.addEventListener("contextmenu",this._contextMenuHandler))},dispose:function(){var e=this.zr;e&&(e.off("mousedown",this._mouseDownHandler),e.off("mousemove",this._mouseMoveHandler),e.off("mouseup",this._mouseUpHandler),e.off("mousewheel",this._mouseWheelHandler),e.off("pinch",this._pinchHandler),e.off("globalout",this._mouseUpHandler),e.dom.removeEventListener("contextmenu",this._contextMenuHandler),e.animation.off("frame",this._update)),this.stopAllAnimation()},getDistance:function(){return this._distance},setDistance:function(e){this._distance=e,this._needsUpdate=!0},getOrthographicSize:function(){return this._orthoSize},setOrthographicSize:function(e){this._orthoSize=e,this._needsUpdate=!0},getAlpha:function(){return this._theta/Math.PI*180},getBeta:function(){return-this._phi/Math.PI*180},getCenter:function(){return this._center.toArray()},setAlpha:function(e){e=Math.max(Math.min(this.maxAlpha,e),this.minAlpha),this._theta=e/180*Math.PI,this._needsUpdate=!0},setBeta:function(e){e=Math.max(Math.min(this.maxBeta,e),this.minBeta),this._phi=-e/180*Math.PI,this._needsUpdate=!0},setCenter:function(e){this._center.setArray(e)},setViewGL:function(e){this.viewGL=e},getCamera:function(){return this.viewGL.camera},setFromViewControlModel:function(e,n){var t=(n=n||{}).baseDistance||0,r=n.baseOrthoSize||1,i=e.get("projection");"perspective"!==i&&"orthographic"!==i&&"isometric"!==i&&(i="perspective"),this._projection=i,this.viewGL.setProjection(i);var o=e.get("distance")+t,d=e.get("orthographicSize")+r;[["damping",.8],["autoRotate",!1],["autoRotateAfterStill",3],["autoRotateDirection","cw"],["autoRotateSpeed",10],["minDistance",30],["maxDistance",400],["minOrthographicSize",30],["maxOrthographicSize",300],["minAlpha",-90],["maxAlpha",90],["minBeta",-1/0],["maxBeta",1/0],["rotateSensitivity",1],["zoomSensitivity",1],["panSensitivity",1],["panMouseButton","left"],["rotateMouseButton","middle"]].forEach(function(k){this[k[0]]=fC(e.get(k[0]),k[1])},this),this.minDistance+=t,this.maxDistance+=t,this.minOrthographicSize+=r,this.maxOrthographicSize+=r;var f=e.ecModel,g={};["animation","animationDurationUpdate","animationEasingUpdate"].forEach(function(k){g[k]=fC(e.get(k),f&&f.get(k))});var _=fC(n.alpha,e.get("alpha"))||0,w=fC(n.beta,e.get("beta"))||0,S=fC(n.center,e.get("center"))||[0,0,0];g.animation&&g.animationDurationUpdate>0&&this._notFirst?this.animateTo({alpha:_,beta:w,center:S,distance:o,orthographicSize:d,easing:g.animationEasingUpdate,duration:g.animationDurationUpdate}):(this.setDistance(o),this.setAlpha(_),this.setBeta(w),this.setCenter(S),this.setOrthographicSize(d)),this._notFirst=!0,this._validateProperties()},_validateProperties:function(){},animateTo:function(e){var n=this.zr,t=this,r={},i={};return null!=e.distance&&(r.distance=this.getDistance(),i.distance=e.distance),null!=e.orthographicSize&&(r.orthographicSize=this.getOrthographicSize(),i.orthographicSize=e.orthographicSize),null!=e.alpha&&(r.alpha=this.getAlpha(),i.alpha=e.alpha),null!=e.beta&&(r.beta=this.getBeta(),i.beta=e.beta),null!=e.center&&(r.center=this.getCenter(),i.center=e.center),this._addAnimator(n.animation.animate(r).when(e.duration||1e3,i).during(function(){null!=r.alpha&&t.setAlpha(r.alpha),null!=r.beta&&t.setBeta(r.beta),null!=r.distance&&t.setDistance(r.distance),null!=r.center&&t.setCenter(r.center),null!=r.orthographicSize&&t.setOrthographicSize(r.orthographicSize),t._needsUpdate=!0})).start(e.easing||"linear")},stopAllAnimation:function(){for(var e=0;e<this._animators.length;e++)this._animators[e].stop();this._animators.length=0},update:function(){this._needsUpdate=!0,this._update(20)},_isAnimating:function(){return this._animators.length>0},_update:function(e){if(this._rotating){var n=("cw"===this.autoRotateDirection?1:-1)*this.autoRotateSpeed/180*Math.PI;this._phi-=n*e/1e3,this._needsUpdate=!0}else this._rotateVelocity.len()>0&&(this._needsUpdate=!0);(Math.abs(this._zoomSpeed)>.1||this._panVelocity.len()>0)&&(this._needsUpdate=!0),this._needsUpdate&&(e=Math.min(e,50),this._updateDistanceOrSize(e),this._updatePan(e),this._updateRotate(e),this._updateTransform(),this.getCamera().update(),this.zr&&this.zr.refresh(),this.trigger("update"),this._needsUpdate=!1)},_updateRotate:function(e){var n=this._rotateVelocity;this._phi=n.y*e/20+this._phi,this._theta=n.x*e/20+this._theta,this.setAlpha(this.getAlpha()),this.setBeta(this.getBeta()),this._vectorDamping(n,Math.pow(this.damping,e/16))},_updateDistanceOrSize:function(e){"perspective"===this._projection?this._setDistance(this._distance+this._zoomSpeed*e/20):this._setOrthoSize(this._orthoSize+this._zoomSpeed*e/20),this._zoomSpeed*=Math.pow(this.damping,e/16)},_setDistance:function(e){this._distance=Math.max(Math.min(e,this.maxDistance),this.minDistance)},_setOrthoSize:function(e){this._orthoSize=Math.max(Math.min(e,this.maxOrthographicSize),this.minOrthographicSize);var n=this.getCamera(),t=this._orthoSize,r=t/this.viewGL.viewport.height*this.viewGL.viewport.width;n.left=-r/2,n.right=r/2,n.top=t/2,n.bottom=-t/2},_updatePan:function(e){var n=this._panVelocity,t=this._distance,r=this.getCamera(),i=r.worldTransform.y;this._center.scaleAndAdd(r.worldTransform.x,-n.x*t/200).scaleAndAdd(i,-n.y*t/200),this._vectorDamping(n,0)},_updateTransform:function(){var e=this.getCamera(),n=new On,t=this._theta+Math.PI/2,r=this._phi+Math.PI/2,i=Math.sin(t);n.x=i*Math.cos(r),n.y=-Math.cos(t),n.z=i*Math.sin(r),e.position.copy(this._center).scaleAndAdd(n,this._distance),e.rotation.identity().rotateY(-this._phi).rotateX(-this._theta)},_startCountingStill:function(){clearTimeout(this._stillTimeout);var e=this.autoRotateAfterStill,n=this;!isNaN(e)&&e>0&&(this._stillTimeout=setTimeout(function(){n._rotating=!0},1e3*e))},_vectorDamping:function(e,n){var t=e.len();(t*=n)<1e-4&&(t=0),e.normalize().scale(t)},_decomposeTransform:function(){if(this.getCamera()){this.getCamera().updateWorldTransform();var e=this.getCamera().worldTransform.z,n=Math.asin(e.y),t=Math.atan2(e.x,e.z);this._theta=n,this._phi=-t,this.setBeta(this.getBeta()),this.setAlpha(this.getAlpha()),this.getCamera().aspect?this._setDistance(this.getCamera().position.dist(this._center)):this._setOrthoSize(this.getCamera().top-this.getCamera().bottom)}},_mouseDownHandler:function(e){e.target||this._isAnimating()||this.viewGL&&!this.viewGL.containPoint(e.offsetX,e.offsetY)||(this.zr.on("mousemove",this._mouseMoveHandler),this.zr.on("mouseup",this._mouseUpHandler),e.event.targetTouches?1===e.event.targetTouches.length&&(this._mode="rotate"):this._mode=e.event.button===fW[this.rotateMouseButton]?"rotate":e.event.button===fW[this.panMouseButton]?"pan":"",this._rotateVelocity.set(0,0),this._rotating=!1,this.autoRotate&&this._startCountingStill(),this._mouseX=e.offsetX,this._mouseY=e.offsetY)},_mouseMoveHandler:function(e){if(!(e.target&&e.target.__isGLToZRProxy||this._isAnimating())){var n=pW(this.panSensitivity),t=pW(this.rotateSensitivity);"rotate"===this._mode?(this._rotateVelocity.y=(e.offsetX-this._mouseX)/this.zr.getHeight()*2*t[0],this._rotateVelocity.x=(e.offsetY-this._mouseY)/this.zr.getWidth()*2*t[1]):"pan"===this._mode&&(this._panVelocity.x=(e.offsetX-this._mouseX)/this.zr.getWidth()*n[0]*400,this._panVelocity.y=(-e.offsetY+this._mouseY)/this.zr.getHeight()*n[1]*400),this._mouseX=e.offsetX,this._mouseY=e.offsetY,e.event.preventDefault()}},_mouseWheelHandler:function(e){this._isAnimating()||this._zoomHandler(e,e.event.wheelDelta||-e.event.detail)},_pinchHandler:function(e){this._isAnimating()||(this._zoomHandler(e,e.pinchScale>1?1:-1),this._mode="")},_zoomHandler:function(e,n){var i;0!==n&&(this.viewGL&&!this.viewGL.containPoint(e.offsetX,e.offsetY)||(i="perspective"===this._projection?Math.max(Math.max(Math.min(this._distance-this.minDistance,this.maxDistance-this._distance))/20,.5):Math.max(Math.max(Math.min(this._orthoSize-this.minOrthographicSize,this.maxOrthographicSize-this._orthoSize))/20,.5),this._zoomSpeed=(n>0?-1:1)*i*this.zoomSensitivity,this._rotating=!1,this.autoRotate&&"rotate"===this._mode&&this._startCountingStill(),e.event.preventDefault()))},_mouseUpHandler:function(){this.zr.off("mousemove",this._mouseMoveHandler),this.zr.off("mouseup",this._mouseUpHandler)},_isRightMouseButtonUsed:function(){return"right"===this.rotateMouseButton||"right"===this.panMouseButton},_contextMenuHandler:function(e){this._isRightMouseButtonUsed()&&e.preventDefault()},_addAnimator:function(e){var n=this._animators;return n.push(e),e.done(function(){var t=n.indexOf(e);t>=0&&n.splice(t,1)}),e}});Object.defineProperty(gW.prototype,"autoRotate",{get:function(e){return this._autoRotate},set:function(e){this._autoRotate=e,this._rotating=e}});const G2=gW,pC={convertToDynamicArray:function(e){e&&this.resetOffset();var n=this.attributes;for(var t in n)n[t].value=e||!n[t].value?[]:Array.prototype.slice.call(n[t].value);this.indices=e||!this.indices?[]:Array.prototype.slice.call(this.indices)},convertToTypedArray:function(){var e=this.attributes;for(var n in e)e[n].value=e[n].value&&e[n].value.length>0?new Float32Array(e[n].value):null;this.indices&&this.indices.length>0&&(this.indices=this.vertexCount>65535?new Uint32Array(this.indices):new Uint16Array(this.indices)),this.dirty()}},Ka={vec2:br,vec3:Et,vec4:Kn,mat2:ka,mat2d:lo,mat3:mi,mat4:In,quat:Lr};var qB=Ka.vec3,vW=[[0,0],[1,1]],mW=Ei.extend(function(){return{segmentScale:1,dynamic:!0,useNativeLine:!0,attributes:{position:new Ei.Attribute("position","float",3,"POSITION"),positionPrev:new Ei.Attribute("positionPrev","float",3),positionNext:new Ei.Attribute("positionNext","float",3),prevPositionPrev:new Ei.Attribute("prevPositionPrev","float",3),prevPosition:new Ei.Attribute("prevPosition","float",3),prevPositionNext:new Ei.Attribute("prevPositionNext","float",3),offset:new Ei.Attribute("offset","float",1),color:new Ei.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._triangleOffset=0,this._itemVertexOffsets=[]},setVertexCount:function(e){var n=this.attributes;this.vertexCount!==e&&(n.position.init(e),n.color.init(e),this.useNativeLine||(n.positionPrev.init(e),n.positionNext.init(e),n.offset.init(e)),e>65535?this.indices instanceof Uint16Array&&(this.indices=new Uint32Array(this.indices)):this.indices instanceof Uint32Array&&(this.indices=new Uint16Array(this.indices)))},setTriangleCount:function(e){this.triangleCount!==e&&(this.indices=0===e?null:this.vertexCount>65535?new Uint32Array(3*e):new Uint16Array(3*e))},_getCubicCurveApproxStep:function(e,n,t,r){return 1/(qB.dist(e,n)+qB.dist(t,n)+qB.dist(r,t)+1)*this.segmentScale},getCubicCurveVertexCount:function(e,n,t,r){var i=this._getCubicCurveApproxStep(e,n,t,r),o=Math.ceil(1/i);return this.useNativeLine?2*o:2*o+2},getCubicCurveTriangleCount:function(e,n,t,r){var i=this._getCubicCurveApproxStep(e,n,t,r),o=Math.ceil(1/i);return this.useNativeLine?0:2*o},getLineVertexCount:function(){return this.getPolylineVertexCount(vW)},getLineTriangleCount:function(){return this.getPolylineTriangleCount(vW)},getPolylineVertexCount:function(e){var n;return n="number"==typeof e?e:"number"!=typeof e[0]?e.length:e.length/3,this.useNativeLine?2*(n-1):2*(n-1)+2},getPolylineTriangleCount:function(e){var n;return n="number"==typeof e?e:"number"!=typeof e[0]?e.length:e.length/3,this.useNativeLine?0:2*Math.max(n-1,0)},addCubicCurve:function(e,n,t,r,i,o){null==o&&(o=1);var d=e[0],f=e[1],g=e[2],_=n[0],w=n[1],S=n[2],k=t[0],V=t[1],ne=t[2],pe=r[0],De=r[1],Re=r[2],Fe=this._getCubicCurveApproxStep(e,n,t,r),ke=Fe*Fe,Be=ke*Fe,at=3*Fe,ot=3*ke,St=6*ke,yt=6*Be,Ht=d-2*_+k,rn=f-2*w+V,Kt=g-2*S+ne,gn=3*(_-k)-d+pe,_n=3*(w-V)-f+De,ln=3*(S-ne)-g+Re,Dn=d,jt=f,cn=g,Yt=(_-d)*at+Ht*ot+gn*Be,Jn=(w-f)*at+rn*ot+_n*Be,Ln=(S-g)*at+Kt*ot+ln*Be,oi=Ht*St+gn*yt,Nr=rn*St+_n*yt,Mi=Kt*St+ln*yt,Ir=gn*yt,ei=_n*yt,Qa=ln*yt,si=0,Wi=0,ji=Math.ceil(1/Fe),Ta=new Float32Array(3*(ji+1)),Na=(Ta=[],0);for(Wi=0;Wi<ji+1;Wi++)Ta[Na++]=Dn,Ta[Na++]=jt,Ta[Na++]=cn,Dn+=Yt,jt+=Jn,cn+=Ln,Yt+=oi,Jn+=Nr,Ln+=Mi,oi+=Ir,Nr+=ei,Mi+=Qa,(si+=Fe)>1&&(Dn=Yt>0?Math.min(Dn,pe):Math.max(Dn,pe),jt=Jn>0?Math.min(jt,De):Math.max(jt,De),cn=Ln>0?Math.min(cn,Re):Math.max(cn,Re));return this.addPolyline(Ta,i,o)},addLine:function(e,n,t,r){return this.addPolyline([e,n],t,r)},addPolyline:function(e,n,t,r,i){if(e.length){var o="number"!=typeof e[0];if(null==i&&(i=o?e.length:e.length/3),!(i<2)){null==r&&(r=0),null==t&&(t=1),this._itemVertexOffsets.push(this._vertexOffset);var ne,pe,d=(o="number"!=typeof e[0])?"number"!=typeof n[0]:n.length/4===i,f=this.attributes.position,g=this.attributes.positionPrev,_=this.attributes.positionNext,w=this.attributes.color,S=this.attributes.offset,k=this.indices,V=this._vertexOffset;t=Math.max(t,.01);for(var De=r;De<i;De++){if(o)ne=e[De],pe=d?n[De]:n;else{var Re=3*De;if((ne=ne||[])[0]=e[Re],ne[1]=e[Re+1],ne[2]=e[Re+2],d){var Fe=4*De;(pe=pe||[])[0]=n[Fe],pe[1]=n[Fe+1],pe[2]=n[Fe+2],pe[3]=n[Fe+3]}else pe=n}if(this.useNativeLine?De>1&&(f.copy(V,V-1),w.copy(V,V-1),V++):(De<i-1&&(g.set(V+2,ne),g.set(V+3,ne)),De>0&&(_.set(V-2,ne),_.set(V-1,ne)),f.set(V,ne),f.set(V+1,ne),w.set(V,pe),w.set(V+1,pe),S.set(V,t/2),S.set(V+1,-t/2),V+=2),this.useNativeLine)w.set(V,pe),f.set(V,ne),V++;else if(De>0){var ke=3*this._triangleOffset;(k=this.indices)[ke]=V-4,k[ke+1]=V-3,k[ke+2]=V-2,k[ke+3]=V-3,k[ke+4]=V-1,k[ke+5]=V-2,this._triangleOffset+=2}}if(!this.useNativeLine){var Be=this._vertexOffset,at=this._vertexOffset+2*i;g.copy(Be,Be+2),g.copy(Be+1,Be+3),_.copy(at-1,at-3),_.copy(at-2,at-4)}return this._vertexOffset=V,this._vertexOffset}}},setItemColor:function(e,n){for(var r=e<this._itemVertexOffsets.length-1?this._itemVertexOffsets[e+1]:this._vertexOffset,i=this._itemVertexOffsets[e];i<r;i++)this.attributes.color.set(i,n);this.dirty("color")},currentTriangleOffset:function(){return this._triangleOffset},currentVertexOffset:function(){return this._vertexOffset}});Ct.D5.defaults(mW.prototype,pC);const pv=mW;function W2(e,n,t,r,i,o,d){this._zr=e,this._x=0,this._y=0,this._rowHeight=0,this.width=r,this.height=i,this.offsetX=n,this.offsetY=t,this.dpr=d,this.gap=o}function _W(e){(e=e||{}).width=e.width||512,e.height=e.height||512,e.devicePixelRatio=e.devicePixelRatio||1,e.gap=e.gap??2;var n=document.createElement("canvas");n.width=e.width*e.devicePixelRatio,n.height=e.height*e.devicePixelRatio,this._canvas=n,this._texture=new Kr({image:n,flipY:!1});var t=this;this._zr=Ct.x_.init(n);var r=this._zr.refreshImmediately;this._zr.refreshImmediately=function(){r.call(this),t._texture.dirty(),t.onupdate&&t.onupdate()},this._dpr=e.devicePixelRatio,this._coords={},this.onupdate=e.onupdate,this._gap=e.gap,this._textureAtlasNodes=[new W2(this._zr,0,0,e.width,e.height,this._gap,this._dpr)],this._nodeWidth=e.width,this._nodeHeight=e.height,this._currentNodeIdx=0}W2.prototype={constructor:W2,clear:function(){this._x=0,this._y=0,this._rowHeight=0},add:function(e,n,t){var r=e.getBoundingRect();null==n&&(n=r.width),null==t&&(t=r.height),this._fitElement(e,n*=this.dpr,t*=this.dpr);var i=this._x,o=this._y,d=this.width*this.dpr,f=this.height*this.dpr,g=this.gap;if(i+n+g>d&&(i=this._x=0,this._y=o+=this._rowHeight+g,this._rowHeight=0),this._x+=n+g,this._rowHeight=Math.max(this._rowHeight,t),o+t+g>f)return null;e.x+=this.offsetX*this.dpr+i,e.y+=this.offsetY*this.dpr+o,this._zr.add(e);var _=[this.offsetX/this.width,this.offsetY/this.height];return[[i/d+_[0],o/f+_[1]],[(i+n)/d+_[0],(o+t)/f+_[1]]]},_fitElement:function(e,n,t){var r=e.getBoundingRect(),i=n/r.width,o=t/r.height;e.x=-r.x*i,e.y=-r.y*o,e.scaleX=i,e.scaleY=o,e.update()}},_W.prototype={clear:function(){for(var e=0;e<this._textureAtlasNodes.length;e++)this._textureAtlasNodes[e].clear();this._currentNodeIdx=0,this._zr.clear(),this._coords={}},getWidth:function(){return this._width},getHeight:function(){return this._height},getTexture:function(){return this._texture},getDevicePixelRatio:function(){return this._dpr},getZr:function(){return this._zr},_getCurrentNode:function(){return this._textureAtlasNodes[this._currentNodeIdx]},_expand:function(){if(this._currentNodeIdx++,this._textureAtlasNodes[this._currentNodeIdx])return this._textureAtlasNodes[this._currentNodeIdx];var e=4096/this._dpr,t=this._textureAtlasNodes.length,r=t*this._nodeWidth%e,i=Math.floor(t*this._nodeWidth/e)*this._nodeHeight;if(!(i>=e)){var o=(r+this._nodeWidth)*this._dpr,d=(i+this._nodeHeight)*this._dpr;try{this._zr.resize({width:o,height:d})}catch{this._canvas.width=o,this._canvas.height=d}var f=new W2(this._zr,r,i,this._nodeWidth,this._nodeHeight,this._gap,this._dpr);return this._textureAtlasNodes.push(f),f}},add:function(e,n,t){if(this._coords[e.id])return this._coords[e.id];var r=this._getCurrentNode().add(e,n,t);if(!r){var i=this._expand();if(!i)return;r=i.add(e,n,t)}return this._coords[e.id]=r,r},getCoordsScale:function(){var e=this._dpr;return[this._nodeWidth/this._canvas.width*e,this._nodeHeight/this._canvas.height*e]},getCoords:function(e){return this._coords[e]},dispose:function(){this._zr.dispose()}};const JB=_W;function eV(){}eV.prototype={constructor:eV,setScene:function(e){this._scene=e,this._skybox&&this._skybox.attachScene(this._scene)},initLight:function(e){this._lightRoot=e,this.mainLight=new lt.DirectionalLight({shadowBias:.005}),this.ambientLight=new lt.AmbientLight,e.add(this.mainLight),e.add(this.ambientLight)},dispose:function(){this._lightRoot&&(this._lightRoot.remove(this.mainLight),this._lightRoot.remove(this.ambientLight))},updateLight:function(e){var n=this.mainLight,t=this.ambientLight,r=e.getModel("light"),i=r.getModel("main"),o=r.getModel("ambient");n.intensity=i.get("intensity"),t.intensity=o.get("intensity"),n.color=lt.parseColor(i.get("color")).slice(0,3),t.color=lt.parseColor(o.get("color")).slice(0,3);var d=i.get("alpha")||0,f=i.get("beta")||0;n.position.setArray(lt.directionFromAlphaBeta(d,f)),n.lookAt(lt.Vector3.ZERO),n.castShadow=i.get("shadow"),n.shadowResolution=lt.getShadowResolution(i.get("shadowQuality"))},updateAmbientCubemap:function(e,n,t){var r=n.getModel("light.ambientCubemap"),i=r.get("texture");if(i){this._cubemapLightsCache=this._cubemapLightsCache||{};var o=this._cubemapLightsCache[i];if(!o){var d=this;o=this._cubemapLightsCache[i]=lt.createAmbientCubemap(r.option,e,t,function(){d._isSkyboxFromAmbientCubemap&&d._skybox.setEnvironmentMap(o.specular.cubemap),t.getZr().refresh()})}this._lightRoot.add(o.diffuse),this._lightRoot.add(o.specular),this._currentCubemapLights=o}else this._currentCubemapLights&&(this._lightRoot.remove(this._currentCubemapLights.diffuse),this._lightRoot.remove(this._currentCubemapLights.specular),this._currentCubemapLights=null)},updateSkybox:function(e,n,t){var r=n.get("environment"),i=this,d=function o(){return i._skybox=i._skybox||new I2,i._skybox}();if(r&&"none"!==r)if("auto"===r)this._isSkyboxFromAmbientCubemap=!0,this._currentCubemapLights?(d.setEnvironmentMap(this._currentCubemapLights.specular.cubemap),this._scene&&d.attachScene(this._scene),d.material.set("lod",3)):this._skybox&&this._skybox.detachScene();else if("object"==typeof r&&r.colorStops||"string"==typeof r&&Ct.$_.parse(r)){this._isSkyboxFromAmbientCubemap=!1;var g=new lt.Texture2D({anisotropic:8,flipY:!1});d.setEnvironmentMap(g);var _=g.image=document.createElement("canvas");_.width=_.height=16;var w=_.getContext("2d"),S=new Ct.Q.Rect({shape:{x:0,y:0,width:16,height:16},style:{fill:r}});Ct.z$(w,S),d.attachScene(this._scene)}else this._isSkyboxFromAmbientCubemap=!1,g=lt.loadTexture(r,t,{anisotropic:8,flipY:!1}),d.setEnvironmentMap(g),d.attachScene(this._scene);else this._skybox&&this._skybox.detachScene(this._scene),this._skybox=null;var k=n.coordinateSystem;if(this._skybox)if(!k||!k.viewGL||"auto"===r||r.match&&r.match(/.hdr$/))this._skybox.material.undefine("fragment","SRGB_DECODE");else{var V=k.viewGL.isLinearSpace()?"define":"undefine";this._skybox.material[V]("fragment","SRGB_DECODE")}}};const Gy=eV;var gv=Ka.vec3,yW=Ei.extend(function(){return{segmentScale:1,useNativeLine:!0,attributes:{position:new Ei.Attribute("position","float",3,"POSITION"),normal:new Ei.Attribute("normal","float",3,"NORMAL"),color:new Ei.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setQuadCount:function(e){var n=this.attributes,t=this.getQuadVertexCount()*e,r=this.getQuadTriangleCount()*e;this.vertexCount!==t&&(n.position.init(t),n.normal.init(t),n.color.init(t)),this.triangleCount!==r&&(this.indices=t>65535?new Uint32Array(3*r):new Uint16Array(3*r))},getQuadVertexCount:function(){return 4},getQuadTriangleCount:function(){return 2},addQuad:function(){var e=gv.create(),n=gv.create(),t=gv.create(),r=[0,3,1,3,2,1];return function(i,o){var d=this.attributes.position,f=this.attributes.normal,g=this.attributes.color;gv.sub(e,i[1],i[0]),gv.sub(n,i[2],i[1]),gv.cross(t,e,n),gv.normalize(t,t);for(var _=0;_<4;_++)d.set(this._vertexOffset+_,i[_]),g.set(this._vertexOffset+_,o),f.set(this._vertexOffset+_,t);var w=3*this._faceOffset;for(_=0;_<6;_++)this.indices[w+_]=r[_]+this._vertexOffset;this._vertexOffset+=4,this._faceOffset+=2}}()});Ct.D5.defaults(yW.prototype,pC);const Zre=yW;var tV=Jr.firstNotNull,Yre={x:0,y:2,z:1};function j2(e,n,t){this.rootNode=new lt.Node;var r=new lt.Mesh({geometry:new pv({useNativeLine:!1}),material:n,castShadow:!1,ignorePicking:!0,$ignorePicking:!0,renderOrder:1}),i=new lt.Mesh({geometry:new Zre,material:t,castShadow:!1,culling:!1,ignorePicking:!0,$ignorePicking:!0,renderOrder:0});this.rootNode.add(i),this.rootNode.add(r),this.faceInfo=e,this.plane=new lt.Plane,this.linesMesh=r,this.quadsMesh=i}j2.prototype.update=function(e,n,t){var r=e.coordinateSystem,i=[r.getAxis(this.faceInfo[0]),r.getAxis(this.faceInfo[1])],o=this.linesMesh.geometry,d=this.quadsMesh.geometry;o.convertToDynamicArray(!0),d.convertToDynamicArray(!0),this._updateSplitLines(o,i,e,t),this._udpateSplitAreas(d,i,e,t),o.convertToTypedArray(),d.convertToTypedArray();var f=r.getAxis(this.faceInfo[2]);!function Xre(e,n,t,r){var i=[0,0,0],o=r<0?t.getExtentMin():t.getExtentMax();i[Yre[t.dim]]=o,e.position.setArray(i),e.rotation.identity(),n.distance=-Math.abs(o),n.normal.set(0,0,0),"x"===t.dim?(e.rotation.rotateY(r*Math.PI/2),n.normal.x=-r):"z"===t.dim?(e.rotation.rotateX(-r*Math.PI/2),n.normal.y=-r):(r>0&&e.rotation.rotateY(Math.PI),n.normal.z=-r)}(this.rootNode,this.plane,f,this.faceInfo[3])},j2.prototype._updateSplitLines=function(e,n,t,r){var i=r.getDevicePixelRatio();n.forEach(function(o,d){var f=o.model,g=n[1-d].getExtent();if(!o.scale.isBlank()){var _=f.getModel("splitLine",t.getModel("splitLine"));if(_.get("show")){var w=_.getModel("lineStyle"),S=w.get("color"),k=tV(w.get("opacity"),1),V=tV(w.get("width"),1);S=Ct.D5.isArray(S)?S:[S];for(var ne=o.getTicksCoords({tickModel:_}),pe=0,De=0;De<ne.length;De++){var Re=ne[De].coord,Fe=lt.parseColor(S[pe%S.length]);Fe[3]*=k;var ke=[0,0,0],Be=[0,0,0];ke[d]=Be[d]=Re,ke[1-d]=g[0],Be[1-d]=g[1],e.addLine(ke,Be,Fe,V*i),pe++}}}})},j2.prototype._udpateSplitAreas=function(e,n,t,r){n.forEach(function(i,o){var d=i.model,f=n[1-o].getExtent();if(!i.scale.isBlank()){var g=d.getModel("splitArea",t.getModel("splitArea"));if(g.get("show")){var _=g.getModel("areaStyle"),w=_.get("color"),S=tV(_.get("opacity"),1);w=Ct.D5.isArray(w)?w:[w];for(var k=i.getTicksCoords({tickModel:g,clamp:!0}),V=0,ne=[0,0,0],pe=[0,0,0],De=0;De<k.length;De++){var Fe=[0,0,0],ke=[0,0,0];if(Fe[o]=ke[o]=k[De].coord,Fe[1-o]=f[0],ke[1-o]=f[1],0!==De){var Be=lt.parseColor(w[V%w.length]);Be[3]*=S,e.addQuad([ne,Fe,ke,pe],Be),ne=Fe,pe=ke,V++}else ne=Fe,pe=ke}}}})};const $re=j2;var bW=[0,1,2,0,2,3],xW=Ei.extend(function(){return{attributes:{position:new Ei.Attribute("position","float",3,"POSITION"),texcoord:new Ei.Attribute("texcoord","float",2,"TEXCOORD_0"),offset:new Ei.Attribute("offset","float",2),color:new Ei.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setSpriteCount:function(e){this._spriteCount=e;var n=4*e,t=2*e;this.vertexCount!==n&&(this.attributes.position.init(n),this.attributes.offset.init(n),this.attributes.color.init(n)),this.triangleCount!==t&&(this.indices=n>65535?new Uint32Array(3*t):new Uint16Array(3*t))},setSpriteAlign:function(e,n,t,r,i){var o,d,f,g;switch(null==t&&(t="left"),null==r&&(r="top"),i=i||0,t){case"left":o=i,f=n[0]+i;break;case"center":case"middle":o=-n[0]/2,f=n[0]/2;break;case"right":o=-n[0]-i,f=-i}switch(r){case"bottom":d=i,g=n[1]+i;break;case"middle":d=-n[1]/2,g=n[1]/2;break;case"top":d=-n[1]-i,g=-i}var _=4*e,w=this.attributes.offset;w.set(_,[o,g]),w.set(_+1,[f,g]),w.set(_+2,[f,d]),w.set(_+3,[o,d])},addSprite:function(e,n,t,r,i,o){var d=this._vertexOffset;this.setSprite(this._vertexOffset/4,e,n,t,r,i,o);for(var f=0;f<bW.length;f++)this.indices[3*this._faceOffset+f]=bW[f]+d;return this._faceOffset+=2,this._vertexOffset+=4,d/4},setSprite:function(e,n,t,r,i,o,d){for(var f=4*e,g=this.attributes,_=0;_<4;_++)g.position.set(f+_,n);var w=g.texcoord;w.set(f,[r[0][0],r[0][1]]),w.set(f+1,[r[1][0],r[0][1]]),w.set(f+2,[r[1][0],r[1][1]]),w.set(f+3,[r[0][0],r[1][1]]),this.setSpriteAlign(e,t,i,o,d)}});Ct.D5.defaults(xW.prototype,pC);const Kre=xW;lt.Shader.import("@export ecgl.labels.vertex\n\nattribute vec3 position: POSITION;\nattribute vec2 texcoord: TEXCOORD_0;\nattribute vec2 offset;\n#ifdef VERTEX_COLOR\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n#endif\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform vec4 viewport : VIEWPORT;\n\nvarying vec2 v_Texcoord;\n\nvoid main()\n{\n vec4 proj = worldViewProjection * vec4(position, 1.0);\n\n vec2 screen = (proj.xy / abs(proj.w) + 1.0) * 0.5 * viewport.zw;\n\n screen += offset;\n\n proj.xy = (screen / viewport.zw - 0.5) * 2.0 * abs(proj.w);\n gl_Position = proj;\n#ifdef VERTEX_COLOR\n v_Color = a_Color;\n#endif\n v_Texcoord = texcoord;\n}\n@end\n\n\n@export ecgl.labels.fragment\n\nuniform vec3 color : [1.0, 1.0, 1.0];\nuniform float alpha : 1.0;\nuniform sampler2D textureAtlas;\nuniform vec2 uvScale: [1.0, 1.0];\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\nvarying float v_Miter;\n\nvarying vec2 v_Texcoord;\n\nvoid main()\n{\n gl_FragColor = vec4(color, alpha) * texture2D(textureAtlas, v_Texcoord * uvScale);\n#ifdef VERTEX_COLOR\n gl_FragColor *= v_Color;\n#endif\n}\n\n@end");const nV=lt.Mesh.extend(function(){return{geometry:new Kre({dynamic:!0}),material:new lt.Material({shader:lt.createShader("ecgl.labels"),transparent:!0,depthMask:!1}),culling:!1,castShadow:!1,ignorePicking:!0}});var vv=Jr.firstNotNull,mv={x:0,y:2,z:1};function rV(e,n){var t=new lt.Mesh({geometry:new pv({useNativeLine:!1}),material:n,castShadow:!1,ignorePicking:!0,renderOrder:2}),r=new nV;r.material.depthMask=!1;var i=new lt.Node;i.add(t),i.add(r),this.rootNode=i,this.dim=e,this.linesMesh=t,this.labelsMesh=r,this.axisLineCoords=null,this.labelElements=[]}var iV={x:"y",y:"x",z:"y"};rV.prototype.update=function(e,n,t){var i=e.coordinateSystem.getAxis(this.dim),o=this.linesMesh.geometry,d=this.labelsMesh.geometry;o.convertToDynamicArray(!0),d.convertToDynamicArray(!0);var f=i.model,g=i.getExtent(),Kt=t.getDevicePixelRatio(),_=f.getModel("axisLine",e.getModel("axisLine")),w=f.getModel("axisTick",e.getModel("axisTick")),S=f.getModel("axisLabel",e.getModel("axisLabel")),k=_.get("lineStyle.color");if(_.get("show")){var V=_.getModel("lineStyle"),pe=[0,0,0];(ne=[0,0,0])[De=mv[i.dim]]=g[0],pe[De]=g[1],this.axisLineCoords=[ne,pe];var Re=lt.parseColor(k),Fe=vv(V.get("width"),1),ke=vv(V.get("opacity"),1);Re[3]*=ke,o.addLine(ne,pe,Re,Fe*Kt)}if(w.get("show")){var Be=w.getModel("lineStyle"),at=lt.parseColor(vv(Be.get("color"),k));Fe=vv(Be.get("width"),1),at[3]*=vv(Be.get("opacity"),1);for(var ot=i.getTicksCoords(),St=w.get("length"),yt=0;yt<ot.length;yt++){var ne,rn=mv[iV[i.dim]];(ne=[0,0,0])[De=mv[i.dim]]=(pe=[0,0,0])[De]=Ht=ot[yt].coord,pe[rn]=St,o.addLine(ne,pe,at,Fe*Kt)}}if(this.labelElements=[],Kt=t.getDevicePixelRatio(),S.get("show")){ot=i.getTicksCoords();var gn=f.get("data"),_n=S.get("margin"),ln=i.getViewLabels();for(yt=0;yt<ln.length;yt++){var Dn=ln[yt].tickValue,jt=ln[yt].formattedLabel,cn=ln[yt].rawLabel,Ht=i.dataToCoord(Dn);rn=mv[iV[i.dim]],(Yt=[0,0,0])[De=mv[i.dim]]=Yt[De]=Ht,Yt[rn]=_n;var Jn=S;gn&&gn[Dn]&&gn[Dn].textStyle&&(Jn=new Ct.Hn(gn[Dn].textStyle,S,f.ecModel));var Ln=vv(Jn.get("color"),k),oi=new Ct.Q.Text({style:(0,U2.Lr)(Jn,{text:jt,fill:"function"==typeof Ln?Ln("category"===i.type?cn:"value"===i.type?Dn+"":Dn,yt):Ln,verticalAlign:"top",align:"left"})}),Nr=n.add(oi),Mi=oi.getBoundingRect();d.addSprite(Yt,[Mi.width*Kt,Mi.height*Kt],Nr),this.labelElements.push(oi)}}if(f.get("name")){var Ir=f.getModel("nameTextStyle"),Yt=[0,0,0],De=mv[i.dim],ei=(rn=mv[iV[i.dim]],vv(Ir.get("color"),k)),Qa=Ir.get("borderColor");Fe=Ir.get("borderWidth"),Yt[De]=Yt[De]=(g[0]+g[1])/2,Yt[rn]=f.get("nameGap"),oi=new Ct.Q.Text({style:(0,U2.Lr)(Ir,{text:f.get("name"),fill:ei,stroke:Qa,lineWidth:Fe})}),Nr=n.add(oi),Mi=oi.getBoundingRect(),d.addSprite(Yt,[Mi.width*Kt,Mi.height*Kt],Nr),oi.__idx=this.labelElements.length,this.nameLabelElement=oi}this.labelsMesh.material.set("textureAtlas",n.getTexture()),this.labelsMesh.material.set("uvScale",n.getCoordsScale()),o.convertToTypedArray(),d.convertToTypedArray()},rV.prototype.setSpriteAlign=function(e,n,t){for(var r=t.getDevicePixelRatio(),i=this.labelsMesh.geometry,o=0;o<this.labelElements.length;o++){var f=this.labelElements[o].getBoundingRect();i.setSpriteAlign(o,[f.width*r,f.height*r],e,n)}var g=this.nameLabelElement;g&&(f=g.getBoundingRect(),i.setSpriteAlign(g.__idx,[f.width*r,f.height*r],e,n),i.dirty()),this.textAlign=e,this.textVerticalAlign=n};const qre=rV,Z2="@export ecgl.lines3D.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nattribute vec3 position: POSITION;\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n\nvoid main()\n{\n gl_Position = worldViewProjection * vec4(position, 1.0);\n v_Color = a_Color;\n}\n\n@end\n\n@export ecgl.lines3D.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nvarying vec4 v_Color;\n\n@import clay.util.srgb\n\nvoid main()\n{\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(color * v_Color);\n#else\n gl_FragColor = color * v_Color;\n#endif\n}\n@end\n\n\n\n@export ecgl.lines3D.clipNear\n\nvec4 clipNear(vec4 p1, vec4 p2) {\n float n = (p1.w - near) / (p1.w - p2.w);\n return vec4(mix(p1.xy, p2.xy, n), -near, near);\n}\n\n@end\n\n@export ecgl.lines3D.expandLine\n#ifdef VERTEX_ANIMATION\n vec4 prevProj = worldViewProjection * vec4(mix(prevPositionPrev, positionPrev, percent), 1.0);\n vec4 currProj = worldViewProjection * vec4(mix(prevPosition, position, percent), 1.0);\n vec4 nextProj = worldViewProjection * vec4(mix(prevPositionNext, positionNext, percent), 1.0);\n#else\n vec4 prevProj = worldViewProjection * vec4(positionPrev, 1.0);\n vec4 currProj = worldViewProjection * vec4(position, 1.0);\n vec4 nextProj = worldViewProjection * vec4(positionNext, 1.0);\n#endif\n\n if (currProj.w < 0.0) {\n if (nextProj.w > 0.0) {\n currProj = clipNear(currProj, nextProj);\n }\n else if (prevProj.w > 0.0) {\n currProj = clipNear(currProj, prevProj);\n }\n }\n\n vec2 prevScreen = (prevProj.xy / abs(prevProj.w) + 1.0) * 0.5 * viewport.zw;\n vec2 currScreen = (currProj.xy / abs(currProj.w) + 1.0) * 0.5 * viewport.zw;\n vec2 nextScreen = (nextProj.xy / abs(nextProj.w) + 1.0) * 0.5 * viewport.zw;\n\n vec2 dir;\n float len = offset;\n if (position == positionPrev) {\n dir = normalize(nextScreen - currScreen);\n }\n else if (position == positionNext) {\n dir = normalize(currScreen - prevScreen);\n }\n else {\n vec2 dirA = normalize(currScreen - prevScreen);\n vec2 dirB = normalize(nextScreen - currScreen);\n\n vec2 tanget = normalize(dirA + dirB);\n\n float miter = 1.0 / max(dot(tanget, dirA), 0.5);\n len *= miter;\n dir = tanget;\n }\n\n dir = vec2(-dir.y, dir.x) * len;\n currScreen += dir;\n\n currProj.xy = (currScreen / viewport.zw - 0.5) * 2.0 * abs(currProj.w);\n@end\n\n\n@export ecgl.meshLines3D.vertex\n\nattribute vec3 position: POSITION;\nattribute vec3 positionPrev;\nattribute vec3 positionNext;\nattribute float offset;\nattribute vec4 a_Color : COLOR;\n\n#ifdef VERTEX_ANIMATION\nattribute vec3 prevPosition;\nattribute vec3 prevPositionPrev;\nattribute vec3 prevPositionNext;\nuniform float percent : 1.0;\n#endif\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform vec4 viewport : VIEWPORT;\nuniform float near : NEAR;\n\nvarying vec4 v_Color;\n\n@import ecgl.common.wireframe.vertexHeader\n\n@import ecgl.lines3D.clipNear\n\nvoid main()\n{\n @import ecgl.lines3D.expandLine\n\n gl_Position = currProj;\n\n v_Color = a_Color;\n\n @import ecgl.common.wireframe.vertexMain\n}\n@end\n\n\n@export ecgl.meshLines3D.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nvarying vec4 v_Color;\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.util.srgb\n\nvoid main()\n{\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(color * v_Color);\n#else\n gl_FragColor = color * v_Color;\n#endif\n\n @import ecgl.common.wireframe.fragmentMain\n}\n\n@end";var wW=Jr.firstNotNull;lt.Shader.import(Z2);var _v={x:0,y:2,z:1};const Jre=Ct.Ir.extend({type:"grid3D",__ecgl__:!0,init:function(e,n){var i=new lt.Material({shader:lt.createShader("ecgl.color"),depthMask:!1,transparent:!0}),o=new lt.Material({shader:lt.createShader("ecgl.meshLines3D"),depthMask:!1,transparent:!0});i.define("fragment","DOUBLE_SIDED"),i.define("both","VERTEX_COLOR"),this.groupGL=new lt.Node,this._control=new G2({zr:n.getZr()}),this._control.init(),this._faces=[["y","z","x",-1,"left"],["y","z","x",1,"right"],["x","y","z",-1,"bottom"],["x","y","z",1,"top"],["x","z","y",-1,"far"],["x","z","y",1,"near"]].map(function(f){var g=new $re(f,o,i);return this.groupGL.add(g.rootNode),g},this),this._axes=["x","y","z"].map(function(f){var g=new qre(f,o);return this.groupGL.add(g.rootNode),g},this);var d=n.getDevicePixelRatio();this._axisLabelSurface=new JB({width:256,height:256,devicePixelRatio:d}),this._axisLabelSurface.onupdate=function(){n.getZr().refresh()},this._axisPointerLineMesh=new lt.Mesh({geometry:new pv({useNativeLine:!1}),material:o,castShadow:!1,ignorePicking:!0,renderOrder:3}),this.groupGL.add(this._axisPointerLineMesh),this._axisPointerLabelsSurface=new JB({width:128,height:128,devicePixelRatio:d}),this._axisPointerLabelsMesh=new nV({ignorePicking:!0,renderOrder:4,castShadow:!1}),this._axisPointerLabelsMesh.material.set("textureAtlas",this._axisPointerLabelsSurface.getTexture()),this.groupGL.add(this._axisPointerLabelsMesh),this._lightRoot=new lt.Node,this._sceneHelper=new Gy,this._sceneHelper.initLight(this._lightRoot)},render:function(e,n,t){this._model=e,this._api=t;var r=e.coordinateSystem;r.viewGL.add(this._lightRoot),e.get("show")?r.viewGL.add(this.groupGL):r.viewGL.remove(this.groupGL);var i=this._control;i.setViewGL(r.viewGL);var o=e.getModel("viewControl");i.setFromViewControlModel(o,0),this._axisLabelSurface.clear(),i.off("update"),e.get("show")&&(this._faces.forEach(function(d){d.update(e,n,t)},this),this._axes.forEach(function(d){d.update(e,this._axisLabelSurface,t)},this)),i.on("update",this._onCameraChange.bind(this,e,t),this),this._sceneHelper.setScene(r.viewGL.scene),this._sceneHelper.updateLight(e),r.viewGL.setPostEffect(e.getModel("postEffect"),t),r.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling")),this._initMouseHandler(e)},afterRender:function(e,n,t,r){var i=r.renderer;this._sceneHelper.updateAmbientCubemap(i,e,t),this._sceneHelper.updateSkybox(i,e,t)},showAxisPointer:function(e,n,t,r){this._doShowAxisPointer(),this._updateAxisPointer(r.value)},hideAxisPointer:function(e,n,t,r){this._doHideAxisPointer()},_initMouseHandler:function(e){var t=e.coordinateSystem.viewGL;e.get("show")&&e.get("axisPointer.show")?t.on("mousemove",this._updateAxisPointerOnMousePosition,this):t.off("mousemove",this._updateAxisPointerOnMousePosition)},_updateAxisPointerOnMousePosition:function(e){if(!e.target){for(var o,t=this._model.coordinateSystem,r=t.viewGL,i=r.castRay(e.offsetX,e.offsetY,new lt.Ray),d=0;d<this._faces.length;d++){var f=this._faces[d];if(!f.rootNode.invisible){f.plane.normal.dot(r.camera.worldTransform.z)<0&&f.plane.normal.negate();var g=i.intersectPlane(f.plane);if(g){var _=t.getAxis(f.faceInfo[0]),w=t.getAxis(f.faceInfo[1]),k=_v[f.faceInfo[1]];_.contain(g.array[_v[f.faceInfo[0]]])&&w.contain(g.array[k])&&(o=g)}}}if(o){var V=t.pointToData(o.array,[],!0);this._updateAxisPointer(V),this._doShowAxisPointer()}else this._doHideAxisPointer()}},_onCameraChange:function(e,n){e.get("show")&&(this._updateFaceVisibility(),this._updateAxisLinePosition());var t=this._control;n.dispatchAction({type:"grid3DChangeCamera",alpha:t.getAlpha(),beta:t.getBeta(),distance:t.getDistance(),center:t.getCenter(),from:this.uid,grid3DId:e.id})},_updateFaceVisibility:function(){var e=this._control.getCamera(),n=new lt.Vector3;e.update();for(var t=0;t<this._faces.length/2;t++){for(var r=[],i=0;i<2;i++)this._faces[2*t+i].rootNode.getWorldPosition(n),n.transformMat4(e.viewMatrix),r[i]=n.z;var d=r[0]>r[1]?0:1,g=this._faces[2*t+1-d];this._faces[2*t+d].rootNode.invisible=!0,g.rootNode.invisible=!1}},_updateAxisLinePosition:function(){var e=this._model.coordinateSystem,n=e.getAxis("x"),t=e.getAxis("y"),r=e.getAxis("z"),i=r.getExtentMax(),o=r.getExtentMin(),d=n.getExtentMin(),f=n.getExtentMax(),g=t.getExtentMax(),_=t.getExtentMin(),w=this._axes[0].rootNode,S=this._axes[1].rootNode,k=this._axes[2].rootNode,V=this._faces,ne=V[4].rootNode.invisible?_:g,pe=V[2].rootNode.invisible?i:o,De=V[0].rootNode.invisible?d:f,Re=V[2].rootNode.invisible?i:o,Fe=V[0].rootNode.invisible?f:d,ke=V[4].rootNode.invisible?_:g;w.rotation.identity(),S.rotation.identity(),k.rotation.identity(),V[4].rootNode.invisible&&(this._axes[0].flipped=!0,w.rotation.rotateX(Math.PI)),V[0].rootNode.invisible&&(this._axes[1].flipped=!0,S.rotation.rotateZ(Math.PI)),V[4].rootNode.invisible&&(this._axes[2].flipped=!0,k.rotation.rotateY(Math.PI)),w.position.set(0,pe,ne),S.position.set(De,Re,0),k.position.set(Fe,0,ke),w.update(),S.update(),k.update(),this._updateAxisLabelAlign()},_updateAxisLabelAlign:function(){var e=this._control.getCamera(),n=[new lt.Vector4,new lt.Vector4],t=new lt.Vector4;this.groupGL.getWorldPosition(t),t.w=1,t.transformMat4(e.viewMatrix).transformMat4(e.projectionMatrix),t.x/=t.w,t.y/=t.w,this._axes.forEach(function(r){for(var i=r.axisLineCoords,d=0;d<n.length;d++)n[d].setArray(i[d]),n[d].w=1,n[d].transformMat4(r.rootNode.worldTransform).transformMat4(e.viewMatrix).transformMat4(e.projectionMatrix),n[d].x/=n[d].w,n[d].y/=n[d].w;var S,k,_=(n[1].x+n[0].x)/2,w=(n[1].y+n[0].y)/2;Math.abs((n[1].y-n[0].y)/(n[1].x-n[0].x))<.5?(S="center",k=w>t.y?"bottom":"top"):(k="middle",S=_>t.x?"left":"right"),r.setSpriteAlign(S,k,this._api)},this)},_doShowAxisPointer:function(){!this._axisPointerLineMesh.invisible||(this._axisPointerLineMesh.invisible=!1,this._axisPointerLabelsMesh.invisible=!1,this._api.getZr().refresh())},_doHideAxisPointer:function(){this._axisPointerLineMesh.invisible||(this._axisPointerLineMesh.invisible=!0,this._axisPointerLabelsMesh.invisible=!0,this._api.getZr().refresh())},_updateAxisPointer:function(e){var n=this._model.coordinateSystem,t=n.dataToPoint(e),i=this._axisPointerLineMesh.geometry,o=this._model.getModel("axisPointer"),d=this._api.getDevicePixelRatio();function f(yt){return Jr.firstNotNull(yt.model.get("axisPointer.show"),o.get("show"))}function g(yt){var rn=yt.model.getModel("axisPointer",o).getModel("lineStyle"),Kt=lt.parseColor(rn.get("color")),gn=wW(rn.get("width"),1),_n=wW(rn.get("opacity"),1);return Kt[3]*=_n,{color:Kt,lineWidth:gn}}i.convertToDynamicArray(!0);for(var _=0;_<this._faces.length;_++){var w=this._faces[_];if(!w.rootNode.invisible){for(var S=w.faceInfo,k=S[3]<0?n.getAxis(S[2]).getExtentMin():n.getAxis(S[2]).getExtentMax(),V=_v[S[2]],ne=0;ne<2;ne++){var pe=S[ne],De=S[1-ne],Re=n.getAxis(pe),Fe=n.getAxis(De);if(f(Re)){var at=_v[pe],ot=_v[De];(ke=[0,0,0])[at]=(Be=[0,0,0])[at]=t[at],ke[V]=Be[V]=k,ke[ot]=Fe.getExtentMin(),Be[ot]=Fe.getExtentMax();var St=g(Re);i.addLine(ke,Be,St.color,St.lineWidth*d)}}if(f(n.getAxis(S[2]))){var Be,ke=t.slice();(Be=t.slice())[V]=k,St=g(n.getAxis(S[2])),i.addLine(ke,Be,St.color,St.lineWidth*d)}}}i.convertToTypedArray(),this._updateAxisPointerLabelsMesh(e),this._api.getZr().refresh()},_updateAxisPointerLabelsMesh:function(e){var n=this._model,t=this._axisPointerLabelsMesh,r=this._axisPointerLabelsSurface,i=n.coordinateSystem,o=n.getModel("axisPointer");t.geometry.convertToDynamicArray(!0),r.clear();var d={x:"y",y:"x",z:"y"};this._axes.forEach(function(f,g){var _=i.getAxis(f.dim),S=_.model.getModel("axisPointer",o),k=S.getModel("label"),V=S.get("lineStyle.color");if(k.get("show")&&S.get("show")){var ne=e[g],pe=k.get("formatter"),De=_.scale.getLabel({value:ne});if(null!=pe)De=pe(De,e);else if("interval"===_.scale.type||"log"===_.scale.type){var Re=Ct.Rx.getPrecisionSafe(_.scale.getTicks()[0]);De=ne.toFixed(Re+2)}var Fe=k.get("color"),ke=new Ct.Q.Text({style:(0,U2.Lr)(k,{text:De,fill:Fe||V,align:"left",verticalAlign:"top"})}),Be=r.add(ke),at=ke.getBoundingRect(),ot=this._api.getDevicePixelRatio(),St=f.rootNode.position.toArray();St[_v[d[f.dim]]]+=(f.flipped?-1:1)*k.get("margin"),St[_v[f.dim]]=_.dataToCoord(e[g]),t.geometry.addSprite(St,[at.width*ot,at.height*ot],Be,f.textAlign,f.textVerticalAlign)}},this),r.getZr().refreshImmediately(),t.material.set("uvScale",r.getCoordsScale()),t.geometry.convertToTypedArray()},dispose:function(){this.groupGL.removeAll(),this._control.dispose(),this._axisLabelSurface.dispose(),this._axisPointerLabelsSurface.dispose()}});var CW=z(3352);function Y2(e){CW.Z.call(this,e),this.type="cartesian3D",this.dimensions=["x","y","z"],this.size=[0,0,0]}Y2.prototype={constructor:Y2,model:null,containPoint:function(e){return this.getAxis("x").contain(e[0])&&this.getAxis("y").contain(e[2])&&this.getAxis("z").contain(e[1])},containData:function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])&&this.getAxis("z").containData(e[2])},dataToPoint:function(e,n,t){return(n=n||[])[0]=this.getAxis("x").dataToCoord(e[0],t),n[2]=this.getAxis("y").dataToCoord(e[1],t),n[1]=this.getAxis("z").dataToCoord(e[2],t),n},pointToData:function(e,n,t){return(n=n||[])[0]=this.getAxis("x").coordToData(e[0],t),n[1]=this.getAxis("y").coordToData(e[2],t),n[2]=this.getAxis("z").coordToData(e[1],t),n}},Ct.D5.inherits(Y2,CW.Z);const SW=Y2;function X2(e,n,t){Ct.RD.call(this,e,n,t)}X2.prototype={constructor:X2,getExtentMin:function(){var e=this._extent;return Math.min(e[0],e[1])},getExtentMax:function(){var e=this._extent;return Math.max(e[0],e[1])},calculateCategoryInterval:function(){return Math.floor(this.scale.count()/8)}},Ct.D5.inherits(X2,Ct.RD);const eie=X2;var $2=z(8585),aV=function(){this._pool={},this._allocatedTextures=[]};aV.prototype={constructor:aV,get:function(e){var n=MW(e);this._pool.hasOwnProperty(n)||(this._pool[n]=[]);var t=this._pool[n];if(!t.length){var r=new Kr(e);return this._allocatedTextures.push(r),r}return t.pop()},put:function(e){var n=MW(e);this._pool.hasOwnProperty(n)||(this._pool[n]=[]),this._pool[n].push(e)},clear:function(e){for(var n=0;n<this._allocatedTextures.length;n++)this._allocatedTextures[n].dispose(e);this._pool={},this._allocatedTextures=[]}};var DW={width:512,height:512,type:5121,format:6408,wrapS:33071,wrapT:33071,minFilter:9987,magFilter:9729,useMipmap:!0,anisotropic:1,flipY:!0,unpackAlignment:4,premultiplyAlpha:!1},oV=Object.keys(DW);function MW(e){qo.defaultsWithPropList(e,DW,oV),function tie(e){var n=function nie(e,n){return 0==(e&e-1)&&0==(n&n-1)}(e.width,e.height);6402===e.format&&(e.useMipmap=!1),(!n||!e.useMipmap)&&(9984==e.minFilter||9986==e.minFilter?e.minFilter=9728:(9987==e.minFilter||9985==e.minFilter)&&(e.minFilter=9729)),n||(e.wrapS=33071,e.wrapT=33071)}(e);for(var n="",t=0;t<oV.length;t++)n+=e[oV[t]].toString();return n}const TW=aV;var Vf=["px","nx","py","ny","pz","nz"];function sV(e,n,t){return"alphaMap"===t?e.material.get("diffuseMap"):"alphaCutoff"===t?e.material.isDefined("fragment","ALPHA_TEST")&&e.material.get("diffuseMap")&&e.material.get("alphaCutoff")||0:"uvRepeat"===t?e.material.get("uvRepeat"):"uvOffset"===t?e.material.get("uvOffset"):n.get(t)}function EW(e,n){var t=e.material,r=n.material;return t.get("diffuseMap")!==r.get("diffuseMap")||(t.get("alphaCutoff")||0)!==(r.get("alphaCutoff")||0)}Yn.import("@export clay.sm.depth.vertex\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nattribute vec3 position : POSITION;\nattribute vec2 texcoord : TEXCOORD_0;\nuniform vec2 uvRepeat = vec2(1.0, 1.0);\nuniform vec2 uvOffset = vec2(0.0, 0.0);\n@import clay.chunk.skinning_header\n@import clay.chunk.instancing_header\nvarying vec4 v_ViewPosition;\nvarying vec2 v_Texcoord;\nvoid main(){\n vec4 P = vec4(position, 1.0);\n#ifdef SKINNING\n @import clay.chunk.skin_matrix\n P = skinMatrixWS * P;\n#endif\n#ifdef INSTANCING\n @import clay.chunk.instancing_matrix\n P = instanceMat * P;\n#endif\n v_ViewPosition = worldViewProjection * P;\n gl_Position = v_ViewPosition;\n v_Texcoord = texcoord * uvRepeat + uvOffset;\n}\n@end\n@export clay.sm.depth.fragment\nvarying vec4 v_ViewPosition;\nvarying vec2 v_Texcoord;\nuniform float bias : 0.001;\nuniform float slopeScale : 1.0;\nuniform sampler2D alphaMap;\nuniform float alphaCutoff: 0.0;\n@import clay.util.encode_float\nvoid main(){\n float depth = v_ViewPosition.z / v_ViewPosition.w;\n if (alphaCutoff > 0.0) {\n if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {\n discard;\n }\n }\n#ifdef USE_VSM\n depth = depth * 0.5 + 0.5;\n float moment1 = depth;\n float moment2 = depth * depth;\n #ifdef SUPPORT_STANDARD_DERIVATIVES\n float dx = dFdx(depth);\n float dy = dFdy(depth);\n moment2 += 0.25*(dx*dx+dy*dy);\n #endif\n gl_FragColor = vec4(moment1, moment2, 0.0, 1.0);\n#else\n #ifdef SUPPORT_STANDARD_DERIVATIVES\n float dx = dFdx(depth);\n float dy = dFdy(depth);\n depth += sqrt(dx*dx + dy*dy) * slopeScale + bias;\n #else\n depth += bias;\n #endif\n gl_FragColor = encodeFloat(depth * 0.5 + 0.5);\n#endif\n}\n@end\n@export clay.sm.debug_depth\nuniform sampler2D depthMap;\nvarying vec2 v_Texcoord;\n@import clay.util.decode_float\nvoid main() {\n vec4 tex = texture2D(depthMap, v_Texcoord);\n#ifdef USE_VSM\n gl_FragColor = vec4(tex.rgb, 1.0);\n#else\n float depth = decodeFloat(tex);\n gl_FragColor = vec4(depth, depth, depth, 1.0);\n#endif\n}\n@end\n@export clay.sm.distance.vertex\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform mat4 world : WORLD;\nattribute vec3 position : POSITION;\n@import clay.chunk.skinning_header\nvarying vec3 v_WorldPosition;\nvoid main (){\n vec4 P = vec4(position, 1.0);\n#ifdef SKINNING\n @import clay.chunk.skin_matrix\n P = skinMatrixWS * P;\n#endif\n#ifdef INSTANCING\n @import clay.chunk.instancing_matrix\n P = instanceMat * P;\n#endif\n gl_Position = worldViewProjection * P;\n v_WorldPosition = (world * P).xyz;\n}\n@end\n@export clay.sm.distance.fragment\nuniform vec3 lightPosition;\nuniform float range : 100;\nvarying vec3 v_WorldPosition;\n@import clay.util.encode_float\nvoid main(){\n float dist = distance(lightPosition, v_WorldPosition);\n#ifdef USE_VSM\n gl_FragColor = vec4(dist, dist * dist, 0.0, 0.0);\n#else\n dist = dist / range;\n gl_FragColor = encodeFloat(dist);\n#endif\n}\n@end\n@export clay.plugin.shadow_map_common\n@import clay.util.decode_float\nfloat tapShadowMap(sampler2D map, vec2 uv, float z){\n vec4 tex = texture2D(map, uv);\n return step(z, decodeFloat(tex) * 2.0 - 1.0);\n}\nfloat pcf(sampler2D map, vec2 uv, float z, float textureSize, vec2 scale) {\n float shadowContrib = tapShadowMap(map, uv, z);\n vec2 offset = vec2(1.0 / textureSize) * scale;\n#ifdef PCF_KERNEL_SIZE\n for (int _idx_ = 0; _idx_ < PCF_KERNEL_SIZE; _idx_++) {{\n shadowContrib += tapShadowMap(map, uv + offset * pcfKernel[_idx_], z);\n }}\n return shadowContrib / float(PCF_KERNEL_SIZE + 1);\n#else\n shadowContrib += tapShadowMap(map, uv+vec2(offset.x, 0.0), z);\n shadowContrib += tapShadowMap(map, uv+vec2(offset.x, offset.y), z);\n shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, offset.y), z);\n shadowContrib += tapShadowMap(map, uv+vec2(0.0, offset.y), z);\n shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, 0.0), z);\n shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, -offset.y), z);\n shadowContrib += tapShadowMap(map, uv+vec2(offset.x, -offset.y), z);\n shadowContrib += tapShadowMap(map, uv+vec2(0.0, -offset.y), z);\n return shadowContrib / 9.0;\n#endif\n}\nfloat pcf(sampler2D map, vec2 uv, float z, float textureSize) {\n return pcf(map, uv, z, textureSize, vec2(1.0));\n}\nfloat chebyshevUpperBound(vec2 moments, float z){\n float p = 0.0;\n z = z * 0.5 + 0.5;\n if (z <= moments.x) {\n p = 1.0;\n }\n float variance = moments.y - moments.x * moments.x;\n variance = max(variance, 0.0000001);\n float mD = moments.x - z;\n float pMax = variance / (variance + mD * mD);\n pMax = clamp((pMax-0.4)/(1.0-0.4), 0.0, 1.0);\n return max(p, pMax);\n}\nfloat computeShadowContrib(\n sampler2D map, mat4 lightVPM, vec3 position, float textureSize, vec2 scale, vec2 offset\n) {\n vec4 posInLightSpace = lightVPM * vec4(position, 1.0);\n posInLightSpace.xyz /= posInLightSpace.w;\n float z = posInLightSpace.z;\n if(all(greaterThan(posInLightSpace.xyz, vec3(-0.99, -0.99, -1.0))) &&\n all(lessThan(posInLightSpace.xyz, vec3(0.99, 0.99, 1.0)))){\n vec2 uv = (posInLightSpace.xy+1.0) / 2.0;\n #ifdef USE_VSM\n vec2 moments = texture2D(map, uv * scale + offset).xy;\n return chebyshevUpperBound(moments, z);\n #else\n return pcf(map, uv * scale + offset, z, textureSize, scale);\n #endif\n }\n return 1.0;\n}\nfloat computeShadowContrib(sampler2D map, mat4 lightVPM, vec3 position, float textureSize) {\n return computeShadowContrib(map, lightVPM, position, textureSize, vec2(1.0), vec2(0.0));\n}\nfloat computeShadowContribOmni(samplerCube map, vec3 direction, float range)\n{\n float dist = length(direction);\n vec4 shadowTex = textureCube(map, direction);\n#ifdef USE_VSM\n vec2 moments = shadowTex.xy;\n float variance = moments.y - moments.x * moments.x;\n float mD = moments.x - dist;\n float p = variance / (variance + mD * mD);\n if(moments.x + 0.001 < dist){\n return clamp(p, 0.0, 1.0);\n }else{\n return 1.0;\n }\n#else\n return step(dist, (decodeFloat(shadowTex) + 0.0002) * range);\n#endif\n}\n@end\n@export clay.plugin.compute_shadow_map\n#if defined(SPOT_LIGHT_SHADOWMAP_COUNT) || defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT) || defined(POINT_LIGHT_SHADOWMAP_COUNT)\n#ifdef SPOT_LIGHT_SHADOWMAP_COUNT\nuniform sampler2D spotLightShadowMaps[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\nuniform mat4 spotLightMatrices[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\nuniform float spotLightShadowMapSizes[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\n#endif\n#ifdef DIRECTIONAL_LIGHT_SHADOWMAP_COUNT\n#if defined(SHADOW_CASCADE)\nuniform sampler2D directionalLightShadowMaps[1]:unconfigurable;\nuniform mat4 directionalLightMatrices[SHADOW_CASCADE]:unconfigurable;\nuniform float directionalLightShadowMapSizes[1]:unconfigurable;\nuniform float shadowCascadeClipsNear[SHADOW_CASCADE]:unconfigurable;\nuniform float shadowCascadeClipsFar[SHADOW_CASCADE]:unconfigurable;\n#else\nuniform sampler2D directionalLightShadowMaps[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\nuniform mat4 directionalLightMatrices[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\nuniform float directionalLightShadowMapSizes[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\n#endif\n#endif\n#ifdef POINT_LIGHT_SHADOWMAP_COUNT\nuniform samplerCube pointLightShadowMaps[POINT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\n#endif\nuniform bool shadowEnabled : true;\n#ifdef PCF_KERNEL_SIZE\nuniform vec2 pcfKernel[PCF_KERNEL_SIZE];\n#endif\n@import clay.plugin.shadow_map_common\n#if defined(SPOT_LIGHT_SHADOWMAP_COUNT)\nvoid computeShadowOfSpotLights(vec3 position, inout float shadowContribs[SPOT_LIGHT_COUNT] ) {\n float shadowContrib;\n for(int _idx_ = 0; _idx_ < SPOT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{\n shadowContrib = computeShadowContrib(\n spotLightShadowMaps[_idx_], spotLightMatrices[_idx_], position,\n spotLightShadowMapSizes[_idx_]\n );\n shadowContribs[_idx_] = shadowContrib;\n }}\n for(int _idx_ = SPOT_LIGHT_SHADOWMAP_COUNT; _idx_ < SPOT_LIGHT_COUNT; _idx_++){{\n shadowContribs[_idx_] = 1.0;\n }}\n}\n#endif\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n#ifdef SHADOW_CASCADE\nvoid computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){\n float depth = (2.0 * gl_FragCoord.z - gl_DepthRange.near - gl_DepthRange.far)\n / (gl_DepthRange.far - gl_DepthRange.near);\n float shadowContrib;\n shadowContribs[0] = 1.0;\n for (int _idx_ = 0; _idx_ < SHADOW_CASCADE; _idx_++) {{\n if (\n depth >= shadowCascadeClipsNear[_idx_] &&\n depth <= shadowCascadeClipsFar[_idx_]\n ) {\n shadowContrib = computeShadowContrib(\n directionalLightShadowMaps[0], directionalLightMatrices[_idx_], position,\n directionalLightShadowMapSizes[0],\n vec2(1.0 / float(SHADOW_CASCADE), 1.0),\n vec2(float(_idx_) / float(SHADOW_CASCADE), 0.0)\n );\n shadowContribs[0] = shadowContrib;\n }\n }}\n for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{\n shadowContribs[_idx_] = 1.0;\n }}\n}\n#else\nvoid computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){\n float shadowContrib;\n for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_++) {{\n shadowContrib = computeShadowContrib(\n directionalLightShadowMaps[_idx_], directionalLightMatrices[_idx_], position,\n directionalLightShadowMapSizes[_idx_]\n );\n shadowContribs[_idx_] = shadowContrib;\n }}\n for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{\n shadowContribs[_idx_] = 1.0;\n }}\n}\n#endif\n#endif\n#if defined(POINT_LIGHT_SHADOWMAP_COUNT)\nvoid computeShadowOfPointLights(vec3 position, inout float shadowContribs[POINT_LIGHT_COUNT] ){\n vec3 lightPosition;\n vec3 direction;\n for(int _idx_ = 0; _idx_ < POINT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{\n lightPosition = pointLightPosition[_idx_];\n direction = position - lightPosition;\n shadowContribs[_idx_] = computeShadowContribOmni(pointLightShadowMaps[_idx_], direction, pointLightRange[_idx_]);\n }}\n for(int _idx_ = POINT_LIGHT_SHADOWMAP_COUNT; _idx_ < POINT_LIGHT_COUNT; _idx_++) {{\n shadowContribs[_idx_] = 1.0;\n }}\n}\n#endif\n#endif\n@end");var ku=Us.extend(function(){return{softShadow:ku.PCF,shadowBlur:1,lightFrustumBias:"auto",kernelPCF:new Float32Array([1,0,1,1,-1,1,0,1,-1,0,-1,-1,1,-1,0,-1]),precision:"highp",_lastRenderNotCastShadow:!1,_frameBuffer:new ts,_textures:{},_shadowMapNumber:{POINT_LIGHT:0,DIRECTIONAL_LIGHT:0,SPOT_LIGHT:0},_depthMaterials:{},_distanceMaterials:{},_receivers:[],_lightsCastShadow:[],_lightCameras:{},_lightMaterials:{},_texturePool:new TW}},function(){this._gaussianPassH=new so({fragment:Yn.source("clay.compositor.gaussian_blur")}),this._gaussianPassV=new so({fragment:Yn.source("clay.compositor.gaussian_blur")}),this._gaussianPassH.setUniform("blurSize",this.shadowBlur),this._gaussianPassH.setUniform("blurDir",0),this._gaussianPassV.setUniform("blurSize",this.shadowBlur),this._gaussianPassV.setUniform("blurDir",1),this._outputDepthPass=new so({fragment:Yn.source("clay.sm.debug_depth")})},{render:function(e,n,t,r){t||(t=n.getMainCamera()),this.trigger("beforerender",this,e,n,t),this._renderShadowPass(e,n,t,r),this.trigger("afterrender",this,e,n,t)},renderDebug:function(e,n){e.saveClear();var t=e.viewport,r=0,o=n||t.width/4,d=o;for(var f in this.softShadow===ku.VSM?this._outputDepthPass.material.define("fragment","USE_VSM"):this._outputDepthPass.material.undefine("fragment","USE_VSM"),this._textures){var g=this._textures[f];e.setViewport(r,0,o*g.width/g.height,d),this._outputDepthPass.setUniform("depthMap",g),this._outputDepthPass.render(e),r+=o*g.width/g.height}e.setViewport(t),e.restoreClear()},_updateReceivers:function(e,n){if(n.receiveShadow?(this._receivers.push(n),n.material.set("shadowEnabled",1),n.material.set("pcfKernel",this.kernelPCF)):n.material.set("shadowEnabled",0),this.softShadow===ku.VSM)n.material.define("fragment","USE_VSM"),n.material.undefine("fragment","PCF_KERNEL_SIZE");else{n.material.undefine("fragment","USE_VSM");var t=this.kernelPCF;t&&t.length?n.material.define("fragment","PCF_KERNEL_SIZE",t.length/2):n.material.undefine("fragment","PCF_KERNEL_SIZE")}},_update:function(e,n){var t=this;n.traverse(function(o){o.isRenderable()&&t._updateReceivers(e,o)});for(var r=0;r<n.lights.length;r++){var i=n.lights[r];i.castShadow&&!i.invisible&&this._lightsCastShadow.push(i)}},_renderShadowPass:function(e,n,t,r){for(var i in this._shadowMapNumber)this._shadowMapNumber[i]=0;this._lightsCastShadow.length=0,this._receivers.length=0;var o=e.gl;if(r||n.update(),t&&t.update(),n.updateLights(),this._update(e,n),this._lightsCastShadow.length||!this._lastRenderNotCastShadow){this._lastRenderNotCastShadow=0===this._lightsCastShadow,o.enable(o.DEPTH_TEST),o.depthMask(!0),o.disable(o.BLEND),o.clearColor(1,1,1,1);for(var k,d=[],f=[],g=[],_=[],w=[],S=[],V=0;V<this._lightsCastShadow.length;V++){var ne=this._lightsCastShadow[V];if("DIRECTIONAL_LIGHT"===ne.type){if(k){console.warn("Only one direectional light supported with shadow cascade");continue}if(ne.shadowCascade>4){console.warn("Support at most 4 cascade");continue}ne.shadowCascade>1&&(k=ne),this.renderDirectionalLightShadow(e,n,t,ne,w,_,g)}else"SPOT_LIGHT"===ne.type?this.renderSpotLightShadow(e,n,ne,f,d):"POINT_LIGHT"===ne.type&&this.renderPointLightShadow(e,n,ne,S);this._shadowMapNumber[ne.type]++}for(var pe in this._shadowMapNumber){var De=this._shadowMapNumber[pe],Re=pe+"_SHADOWMAP_COUNT";for(V=0;V<this._receivers.length;V++)(ke=this._receivers[V].material).fragmentDefines[Re]!==De&&(De>0?ke.define("fragment",Re,De):ke.isDefined("fragment",Re)&&ke.undefine("fragment",Re))}for(V=0;V<this._receivers.length;V++){var ke=this._receivers[V].material;k?ke.define("fragment","SHADOW_CASCADE",k.shadowCascade):ke.undefine("fragment","SHADOW_CASCADE")}var Be=n.shadowUniforms;if(g.length>0){var ot=g.map(at);if(Be.directionalLightShadowMaps={value:g,type:"tv"},Be.directionalLightMatrices={value:_,type:"m4v"},Be.directionalLightShadowMapSizes={value:ot,type:"1fv"},k){var St=w.slice(),yt=w.slice();St.pop(),yt.shift(),St.reverse(),yt.reverse(),_.reverse(),Be.shadowCascadeClipsNear={value:St,type:"1fv"},Be.shadowCascadeClipsFar={value:yt,type:"1fv"}}}if(d.length>0){var Ht=d.map(at);(Be=n.shadowUniforms).spotLightShadowMaps={value:d,type:"tv"},Be.spotLightMatrices={value:f,type:"m4v"},Be.spotLightShadowMapSizes={value:Ht,type:"1fv"}}S.length>0&&(Be.pointLightShadowMaps={value:S,type:"tv"})}function at(rn){return rn.height}},renderDirectionalLightShadow:function(){var e=new zB,n=new cr,t=new Ws,r=new cr,i=new cr,o=new cr,d=new cr;return function(f,g,_,w,S,k,V){var ne=this._getDepthMaterial(w),pe={getMaterial:function(Mi){return Mi.shadowDepthMaterial||ne},isMaterialChanged:EW,getUniform:sV,ifRender:function(Mi){return Mi.castShadow},sortCompare:rC.opaqueSortCompare};if(!g.viewBoundingBoxLastFrame.isFinite()){var De=g.getBoundingBox();g.viewBoundingBoxLastFrame.copy(De).applyTransform(_.viewMatrix)}var Re=Math.min(-g.viewBoundingBoxLastFrame.min.z,_.far),Fe=Math.max(-g.viewBoundingBoxLastFrame.max.z,_.near),ke=this._getDirectionalLightCamera(w,g,_),Be=o.array;d.copy(ke.projectionMatrix),In.invert(i.array,ke.worldTransform.array),In.multiply(i.array,i.array,_.worldTransform.array),In.multiply(Be,d.array,i.array);for(var at=[],ot=_ instanceof No,St=(_.near+_.far)/(_.near-_.far),yt=2*_.near*_.far/(_.near-_.far),Ht=0;Ht<=w.shadowCascade;Ht++){var gn=Fe*Math.pow(Re/Fe,Ht/w.shadowCascade)*w.cascadeSplitLogFactor+(Fe+(Re-Fe)*Ht/w.shadowCascade)*(1-w.cascadeSplitLogFactor);at.push(gn),S.push(-(-gn*St+yt)/-gn)}var _n=this._getTexture(w,w.shadowCascade);V.push(_n);var ln=f.viewport,Dn=f.gl;for(this._frameBuffer.attach(_n),this._frameBuffer.bind(f),Dn.clear(Dn.COLOR_BUFFER_BIT|Dn.DEPTH_BUFFER_BIT),Ht=0;Ht<w.shadowCascade;Ht++){var jt=at[Ht],cn=at[Ht+1];ot?In.perspective(n.array,_.fov/180*Math.PI,_.aspect,jt,cn):In.ortho(n.array,_.left,_.right,_.bottom,_.top,jt,cn),e.setFromProjection(n),e.getTransformedBoundingBox(t,i),t.applyProjection(d);var Yt=t.min.array,Jn=t.max.array;Yt[0]=Math.max(Yt[0],-1),Yt[1]=Math.max(Yt[1],-1),Jn[0]=Math.min(Jn[0],1),Jn[1]=Math.min(Jn[1],1),r.ortho(Yt[0],Jn[0],Yt[1],Jn[1],1,-1),ke.projectionMatrix.multiplyLeft(r);var Ln=w.shadowResolution||512;f.setViewport((w.shadowCascade-Ht-1)*Ln,0,Ln,Ln,1);var oi=g.updateRenderList(ke);f.renderPass(oi.opaque,ke,pe),this.softShadow===ku.VSM&&this._gaussianFilter(f,_n,_n.width);var Nr=new cr;Nr.copy(ke.viewMatrix).multiplyLeft(ke.projectionMatrix),k.push(Nr.array),ke.projectionMatrix.copy(d)}this._frameBuffer.unbind(f),f.setViewport(ln)}}(),renderSpotLightShadow:function(e,n,t,r,i){var o=this._getTexture(t),d=this._getSpotLightCamera(t),f=e.gl;this._frameBuffer.attach(o),this._frameBuffer.bind(e),f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT);var g=this._getDepthMaterial(t),_={getMaterial:function(k){return k.shadowDepthMaterial||g},isMaterialChanged:EW,getUniform:sV,ifRender:function(k){return k.castShadow},sortCompare:rC.opaqueSortCompare},w=n.updateRenderList(d);e.renderPass(w.opaque,d,_),this._frameBuffer.unbind(e),this.softShadow===ku.VSM&&this._gaussianFilter(e,o,o.width);var S=new cr;S.copy(d.worldTransform).invert().multiplyLeft(d.projectionMatrix),i.push(o),r.push(S.array)},renderPointLightShadow:function(e,n,t,r){var i=this._getTexture(t),o=e.gl;r.push(i);var d=this._getDepthMaterial(t),f={getMaterial:function(Fe){return Fe.shadowDepthMaterial||d},getUniform:sV,sortCompare:rC.opaqueSortCompare},g={px:[],py:[],pz:[],nx:[],ny:[],nz:[]},_=new Ws,w=t.getWorldPosition().array,S=new Ws,k=t.range;S.min.setArray(w),S.max.setArray(w);var V=new On(k,k,k);S.max.add(V),S.min.sub(V);var ne={px:!1,py:!1,pz:!1,nx:!1,ny:!1,nz:!1};n.traverse(function(Fe){if(Fe.isRenderable()&&Fe.castShadow){var ke=Fe.geometry;if(!ke.boundingBox){for(var Be=0;Be<Vf.length;Be++)g[Vf[Be]].push(Fe);return}if(_.transformFrom(ke.boundingBox,Fe.worldTransform),!_.intersectBoundingBox(S))return;for(_.updateVertices(),Be=0;Be<Vf.length;Be++)ne[Vf[Be]]=!1;for(Be=0;Be<8;Be++){var at=_.vertices[Be],ot=at[0]-w[0],St=at[1]-w[1],yt=at[2]-w[2],Ht=Math.abs(ot),rn=Math.abs(St),Kt=Math.abs(yt);Ht>rn?Ht>Kt?ne[ot>0?"px":"nx"]=!0:ne[yt>0?"pz":"nz"]=!0:rn>Kt?ne[St>0?"py":"ny"]=!0:ne[yt>0?"pz":"nz"]=!0}for(Be=0;Be<Vf.length;Be++)ne[Vf[Be]]&&g[Vf[Be]].push(Fe)}});for(var pe=0;pe<6;pe++){var De=Vf[pe],Re=this._getPointLightCamera(t,De);this._frameBuffer.attach(i,o.COLOR_ATTACHMENT0,o.TEXTURE_CUBE_MAP_POSITIVE_X+pe),this._frameBuffer.bind(e),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),e.renderPass(g[De],Re,f)}this._frameBuffer.unbind(e)},_getDepthMaterial:function(e){var n=this._lightMaterials[e.__uid__],t="POINT_LIGHT"===e.type;if(!n){var r=t?"clay.sm.distance.":"clay.sm.depth.";n=new Sc({precision:this.precision,shader:new Yn(Yn.source(r+"vertex"),Yn.source(r+"fragment"))}),this._lightMaterials[e.__uid__]=n}return null!=e.shadowSlopeScale&&n.setUniform("slopeScale",e.shadowSlopeScale),null!=e.shadowBias&&n.setUniform("bias",e.shadowBias),this.softShadow===ku.VSM?n.define("fragment","USE_VSM"):n.undefine("fragment","USE_VSM"),t&&(n.set("lightPosition",e.getWorldPosition().array),n.set("range",e.range)),n},_gaussianFilter:function(e,n,t){var i=this._texturePool.get({width:t,height:t,type:fr.FLOAT});this._frameBuffer.attach(i),this._frameBuffer.bind(e),this._gaussianPassH.setUniform("texture",n),this._gaussianPassH.setUniform("textureWidth",t),this._gaussianPassH.render(e),this._frameBuffer.attach(n),this._gaussianPassV.setUniform("texture",i),this._gaussianPassV.setUniform("textureHeight",t),this._gaussianPassV.render(e),this._frameBuffer.unbind(e),this._texturePool.put(i)},_getTexture:function(e,n){var t=e.__uid__,r=this._textures[t],i=e.shadowResolution||512;return n=n||1,r||((r="POINT_LIGHT"===e.type?new sC:new Kr).width=i*n,r.height=i,this.softShadow===ku.VSM?(r.type=fr.FLOAT,r.anisotropic=4):(r.minFilter=9728,r.magFilter=9728,r.useMipmap=!1),this._textures[t]=r),r},_getPointLightCamera:function(e,n){this._lightCameras.point||(this._lightCameras.point={px:new No,nx:new No,py:new No,ny:new No,pz:new No,nz:new No});var t=this._lightCameras.point[n];switch(t.far=e.range,t.fov=90,t.position.set(0,0,0),n){case"px":t.lookAt(On.POSITIVE_X,On.NEGATIVE_Y);break;case"nx":t.lookAt(On.NEGATIVE_X,On.NEGATIVE_Y);break;case"py":t.lookAt(On.POSITIVE_Y,On.POSITIVE_Z);break;case"ny":t.lookAt(On.NEGATIVE_Y,On.NEGATIVE_Z);break;case"pz":t.lookAt(On.POSITIVE_Z,On.NEGATIVE_Y);break;case"nz":t.lookAt(On.NEGATIVE_Z,On.NEGATIVE_Y)}return e.getWorldPosition(t.position),t.update(),t},_getDirectionalLightCamera:function(){var e=new cr,n=new Ws,t=new Ws;return function(r,i,o){this._lightCameras.directional||(this._lightCameras.directional=new zy);var d=this._lightCameras.directional;n.copy(i.viewBoundingBoxLastFrame),n.intersection(o.frustum.boundingBox),d.position.copy(n.min).add(n.max).scale(.5).transformMat4(o.worldTransform),d.rotation.copy(r.rotation),d.scale.copy(r.scale),d.updateWorldTransform(),cr.invert(e,d.worldTransform),cr.multiply(e,e,o.worldTransform),t.copy(n).applyTransform(e);var f=t.min.array,g=t.max.array;return d.position.set((f[0]+g[0])/2,(f[1]+g[1])/2,g[2]).transformMat4(d.worldTransform),d.near=0,d.far=-f[2]+g[2],isNaN(this.lightFrustumBias)?d.far*=4:d.far+=this.lightFrustumBias,d.left=f[0],d.right=g[0],d.top=g[1],d.bottom=f[1],d.update(!0),d}}(),_getSpotLightCamera:function(e){this._lightCameras.spot||(this._lightCameras.spot=new No);var n=this._lightCameras.spot;return n.fov=2*e.penumbraAngle,n.far=e.range,n.worldTransform.copy(e.worldTransform),n.updateProjectionMatrix(),In.invert(n.viewMatrix.array,n.worldTransform.array),n},dispose:function(e){var n=e.gl||e;for(var t in this._frameBuffer&&this._frameBuffer.dispose(n),this._textures)this._textures[t].dispose(n);this._texturePool.clear(e.gl),this._depthMaterials={},this._distanceMaterials={},this._textures={},this._lightCameras={},this._shadowMapNumber={POINT_LIGHT:0,DIRECTIONAL_LIGHT:0,SPOT_LIGHT:0},this._meshMaterials={};for(var r=0;r<this._receivers.length;r++){var i=this._receivers[r];if(i.material){var o=i.material;o.undefine("fragment","POINT_LIGHT_SHADOW_COUNT"),o.undefine("fragment","DIRECTIONAL_LIGHT_SHADOW_COUNT"),o.undefine("fragment","AMBIENT_LIGHT_SHADOW_COUNT"),o.set("shadowEnabled",0)}}this._receivers=[],this._lightsCastShadow=[]}});ku.VSM=1,ku.PCF=2;const iie=ku;var aie=Us.extend(function(){return{name:"",inputLinks:{},outputLinks:{},_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}},{updateParameter:function(e,n){var d,f,t=this.outputs[e],r=t.parameters,i=t._parametersCopy;if(i||(i=t._parametersCopy={}),r)for(var o in r)"width"!==o&&"height"!==o&&(i[o]=r[o]);return d=r.width instanceof Function?r.width.call(this,n):r.width,f=r.height instanceof Function?r.height.call(this,n):r.height,(i.width!==d||i.height!==f)&&this._outputTextures[e]&&this._outputTextures[e].dispose(n.gl),i.width=d,i.height=f,i},setParameter:function(e,n){},getParameter:function(e){},setParameters:function(e){for(var n in e)this.setParameter(n,e[n])},render:function(){},getOutput:function(e,n){if(null==n)return this._outputTextures[n=e];var t=this.outputs[n];return t?this._rendered?t.outputLastFrame?this._prevOutputTextures[n]:this._outputTextures[n]:this._rendering?(this._prevOutputTextures[n]||(this._prevOutputTextures[n]=this._compositor.allocateTexture(t.parameters||{})),this._prevOutputTextures[n]):(this.render(e),this._outputTextures[n]):void 0},removeReference:function(e){this._outputReferences[e]--,0===this._outputReferences[e]&&(this.outputs[e].keepLastFrame?(this._prevOutputTextures[e]&&this._compositor.releaseTexture(this._prevOutputTextures[e]),this._prevOutputTextures[e]=this._outputTextures[e]):this._compositor.releaseTexture(this._outputTextures[e]))},link:function(e,n,t){this.inputLinks[e]={node:n,pin:t},n.outputLinks[t]||(n.outputLinks[t]=[]),n.outputLinks[t].push({node:this,pin:e}),this.pass.material.enableTexture(e)},clear:function(){this.inputLinks={},this.outputLinks={}},updateReference:function(e){if(!this._rendering){for(var n in this._rendering=!0,this.inputLinks){var t=this.inputLinks[n];t.node.updateReference(t.pin)}this._rendering=!1}e&&this._outputReferences[e]++},beforeFrame:function(){for(var e in this._rendered=!1,this.outputLinks)this._outputReferences[e]=0},afterFrame:function(){for(var e in this.outputLinks)this._outputReferences[e]>0&&(this.outputs[e].keepLastFrame?(this._prevOutputTextures[e]&&this._compositor.releaseTexture(this._prevOutputTextures[e]),this._prevOutputTextures[e]=this._outputTextures[e]):this._compositor.releaseTexture(this._outputTextures[e]))}});const gC=aie;var oie=Us.extend(function(){return{nodes:[]}},{dirty:function(){this._dirty=!0},addNode:function(e){this.nodes.indexOf(e)>=0||(this.nodes.push(e),this._dirty=!0)},removeNode:function(e){"string"==typeof e&&(e=this.getNodeByName(e));var n=this.nodes.indexOf(e);n>=0&&(this.nodes.splice(n,1),this._dirty=!0)},getNodeByName:function(e){for(var n=0;n<this.nodes.length;n++)if(this.nodes[n].name===e)return this.nodes[n]},update:function(){for(var e=0;e<this.nodes.length;e++)this.nodes[e].clear();for(e=0;e<this.nodes.length;e++){var n=this.nodes[e];if(n.inputs)for(var t in n.inputs)if(n.inputs[t]){if(n.pass&&!n.pass.material.isUniformEnabled(t)){console.warn("Pin "+n.name+"."+t+" not used.");continue}var r=n.inputs[t],i=this.findPin(r);i?n.link(t,i.node,i.pin):console.warn("string"==typeof r?"Node "+r+" not exist":"Pin of "+r.node+"."+r.pin+" not exist")}}},findPin:function(e){var n;if(("string"==typeof e||e instanceof gC)&&(e={node:e}),"string"==typeof e.node)for(var t=0;t<this.nodes.length;t++){var r=this.nodes[t];r.name===e.node&&(n=r)}else n=e.node;if(n){var i=e.pin;if(i||n.outputs&&(i=Object.keys(n.outputs)[0]),n.outputs[i])return{node:n,pin:i}}}});const AW=oie;var sie=AW.extend(function(){return{_outputs:[],_texturePool:new TW,_frameBuffer:new ts({depthBuffer:!1})}},{addNode:function(e){AW.prototype.addNode.call(this,e),e._compositor=this},render:function(e,n){if(this._dirty){this.update(),this._dirty=!1,this._outputs.length=0;for(var t=0;t<this.nodes.length;t++)this.nodes[t].outputs||this._outputs.push(this.nodes[t])}for(t=0;t<this.nodes.length;t++)this.nodes[t].beforeFrame();for(t=0;t<this._outputs.length;t++)this._outputs[t].updateReference();for(t=0;t<this._outputs.length;t++)this._outputs[t].render(e,n);for(t=0;t<this.nodes.length;t++)this.nodes[t].afterFrame()},allocateTexture:function(e){return this._texturePool.get(e)},releaseTexture:function(e){this._texturePool.put(e)},getFrameBuffer:function(){return this._frameBuffer},dispose:function(e){this._texturePool.clear(e)}});const lie=sie;var cie=gC.extend({name:"scene",scene:null,camera:null,autoUpdateScene:!0,preZ:!1},function(){this.frameBuffer=new ts},{render:function(e){this._rendering=!0;var t,n=e.gl;if(this.trigger("beforerender"),this.outputs){var r=this.frameBuffer;for(var i in this.outputs){var o=this.updateParameter(i,e),d=this.outputs[i],f=this._compositor.allocateTexture(o);this._outputTextures[i]=f,"string"==typeof(g=d.attachment||n.COLOR_ATTACHMENT0)&&(g=n[g]),r.attach(f,g)}r.bind(e);var _=e.getGLExtension("EXT_draw_buffers");if(_){var w=[];for(var g in this.outputs)(g=parseInt(g))>=n.COLOR_ATTACHMENT0&&g<=n.COLOR_ATTACHMENT0+8&&w.push(g);_.drawBuffersEXT(w)}e.saveClear(),e.clearBit=16640,t=e.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ),e.restoreClear(),r.unbind(e)}else t=e.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ);this.trigger("afterrender",t),this._rendering=!1,this._rendered=!0}});const uie=cie,hie=gC.extend(function(){return{texture:null,outputs:{color:{}}}},function(){},{getOutput:function(e,n){return this.texture},beforeFrame:function(){},afterFrame:function(){}});var fie=gC.extend(function(){return{name:"",inputs:{},outputs:null,shader:"",inputLinks:{},outputLinks:{},pass:null,_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}},function(){var e=new so({fragment:this.shader});this.pass=e},{render:function(e,n){this.trigger("beforerender",e),this._rendering=!0;var t=e.gl;for(var r in this.inputLinks){var o=(i=this.inputLinks[r]).node.getOutput(e,i.pin);this.pass.setUniform(r,o)}if(this.outputs){this.pass.outputs={};var d={};for(var f in this.outputs){var g=this.updateParameter(f,e);isNaN(g.width)&&this.updateParameter(f,e);var _=this.outputs[f],w=this._compositor.allocateTexture(g);this._outputTextures[f]=w,"string"==typeof(S=_.attachment||t.COLOR_ATTACHMENT0)&&(S=t[S]),d[S]=w}for(var S in this._compositor.getFrameBuffer().bind(e),d)this._compositor.getFrameBuffer().attach(d[S],S);this.pass.render(e),this._compositor.getFrameBuffer().updateMipmap(e)}else this.pass.outputs=null,this._compositor.getFrameBuffer().unbind(e),this.pass.render(e,n);for(var r in this.inputLinks){var i;(i=this.inputLinks[r]).node.removeReference(i.pin)}this._rendering=!1,this._rendered=!0,this.trigger("afterrender",e)},updateParameter:function(e,n){var d,f,t=this.outputs[e],r=t.parameters,i=t._parametersCopy;if(i||(i=t._parametersCopy={}),r)for(var o in r)"width"!==o&&"height"!==o&&(i[o]=r[o]);return d="function"==typeof r.width?r.width.call(this,n):r.width,f="function"==typeof r.height?r.height.call(this,n):r.height,d=Math.ceil(d),f=Math.ceil(f),(i.width!==d||i.height!==f)&&this._outputTextures[e]&&this._outputTextures[e].dispose(n),i.width=d,i.height=f,i},setParameter:function(e,n){this.pass.setUniform(e,n)},getParameter:function(e){return this.pass.getUniform(e)},setParameters:function(e){for(var n in e)this.setParameter(n,e[n])},define:function(e,n){this.pass.material.define("fragment",e,n)},undefine:function(e){this.pass.material.undefine("fragment",e)},removeReference:function(e){this._outputReferences[e]--,0===this._outputReferences[e]&&(this.outputs[e].keepLastFrame?(this._prevOutputTextures[e]&&this._compositor.releaseTexture(this._prevOutputTextures[e]),this._prevOutputTextures[e]=this._outputTextures[e]):this._compositor.releaseTexture(this._outputTextures[e]))},clear:function(){gC.prototype.clear.call(this),this.pass.material.disableTexturesAll()}});const pie=fie,IW="@export clay.compositor.kernel.gaussian_9\nfloat gaussianKernel[9];\ngaussianKernel[0] = 0.07;\ngaussianKernel[1] = 0.09;\ngaussianKernel[2] = 0.12;\ngaussianKernel[3] = 0.14;\ngaussianKernel[4] = 0.16;\ngaussianKernel[5] = 0.14;\ngaussianKernel[6] = 0.12;\ngaussianKernel[7] = 0.09;\ngaussianKernel[8] = 0.07;\n@end\n@export clay.compositor.kernel.gaussian_13\nfloat gaussianKernel[13];\ngaussianKernel[0] = 0.02;\ngaussianKernel[1] = 0.03;\ngaussianKernel[2] = 0.06;\ngaussianKernel[3] = 0.08;\ngaussianKernel[4] = 0.11;\ngaussianKernel[5] = 0.13;\ngaussianKernel[6] = 0.14;\ngaussianKernel[7] = 0.13;\ngaussianKernel[8] = 0.11;\ngaussianKernel[9] = 0.08;\ngaussianKernel[10] = 0.06;\ngaussianKernel[11] = 0.03;\ngaussianKernel[12] = 0.02;\n@end\n@export clay.compositor.gaussian_blur\n#define SHADER_NAME gaussian_blur\nuniform sampler2D texture;varying vec2 v_Texcoord;\nuniform float blurSize : 2.0;\nuniform vec2 textureSize : [512.0, 512.0];\nuniform float blurDir : 0.0;\n@import clay.util.rgbm\n@import clay.util.clamp_sample\nvoid main (void)\n{\n @import clay.compositor.kernel.gaussian_9\n vec2 off = blurSize / textureSize;\n off *= vec2(1.0 - blurDir, blurDir);\n vec4 sum = vec4(0.0);\n float weightAll = 0.0;\n for (int i = 0; i < 9; i++) {\n float w = gaussianKernel[i];\n vec4 texel = decodeHDR(clampSample(texture, v_Texcoord + float(i - 4) * off));\n sum += texel * w;\n weightAll += w;\n }\n gl_FragColor = encodeHDR(sum / max(weightAll, 0.01));\n}\n@end\n",PW="\n@export clay.compositor.lut\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform sampler2D lookup;\nvoid main()\n{\n vec4 tex = texture2D(texture, v_Texcoord);\n float blueColor = tex.b * 63.0;\n vec2 quad1;\n quad1.y = floor(floor(blueColor) / 8.0);\n quad1.x = floor(blueColor) - (quad1.y * 8.0);\n vec2 quad2;\n quad2.y = floor(ceil(blueColor) / 8.0);\n quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n vec2 texPos1;\n texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);\n texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);\n vec2 texPos2;\n texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);\n texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);\n vec4 newColor1 = texture2D(lookup, texPos1);\n vec4 newColor2 = texture2D(lookup, texPos2);\n vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n gl_FragColor = vec4(newColor.rgb, tex.w);\n}\n@end",RW="@export clay.compositor.output\n#define OUTPUT_ALPHA\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\n@import clay.util.rgbm\nvoid main()\n{\n vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));\n gl_FragColor.rgb = tex.rgb;\n#ifdef OUTPUT_ALPHA\n gl_FragColor.a = tex.a;\n#else\n gl_FragColor.a = 1.0;\n#endif\n gl_FragColor = encodeHDR(gl_FragColor);\n#ifdef PREMULTIPLY_ALPHA\n gl_FragColor.rgb *= gl_FragColor.a;\n#endif\n}\n@end",LW="@export clay.compositor.bright\nuniform sampler2D texture;\nuniform float threshold : 1;\nuniform float scale : 1.0;\nuniform vec2 textureSize: [512, 512];\nvarying vec2 v_Texcoord;\nconst vec3 lumWeight = vec3(0.2125, 0.7154, 0.0721);\n@import clay.util.rgbm\nvec4 median(vec4 a, vec4 b, vec4 c)\n{\n return a + b + c - min(min(a, b), c) - max(max(a, b), c);\n}\nvoid main()\n{\n vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));\n#ifdef ANTI_FLICKER\n vec3 d = 1.0 / textureSize.xyx * vec3(1.0, 1.0, 0.0);\n vec4 s1 = decodeHDR(texture2D(texture, v_Texcoord - d.xz));\n vec4 s2 = decodeHDR(texture2D(texture, v_Texcoord + d.xz));\n vec4 s3 = decodeHDR(texture2D(texture, v_Texcoord - d.zy));\n vec4 s4 = decodeHDR(texture2D(texture, v_Texcoord + d.zy));\n texel = median(median(texel, s1, s2), s3, s4);\n#endif\n float lum = dot(texel.rgb , lumWeight);\n vec4 color;\n if (lum > threshold && texel.a > 0.0)\n {\n color = vec4(texel.rgb * scale, texel.a * scale);\n }\n else\n {\n color = vec4(0.0);\n }\n gl_FragColor = encodeHDR(color);\n}\n@end\n",OW="@export clay.compositor.downsample\nuniform sampler2D texture;\nuniform vec2 textureSize : [512, 512];\nvarying vec2 v_Texcoord;\n@import clay.util.rgbm\nfloat brightness(vec3 c)\n{\n return max(max(c.r, c.g), c.b);\n}\n@import clay.util.clamp_sample\nvoid main()\n{\n vec4 d = vec4(-1.0, -1.0, 1.0, 1.0) / textureSize.xyxy;\n#ifdef ANTI_FLICKER\n vec3 s1 = decodeHDR(clampSample(texture, v_Texcoord + d.xy)).rgb;\n vec3 s2 = decodeHDR(clampSample(texture, v_Texcoord + d.zy)).rgb;\n vec3 s3 = decodeHDR(clampSample(texture, v_Texcoord + d.xw)).rgb;\n vec3 s4 = decodeHDR(clampSample(texture, v_Texcoord + d.zw)).rgb;\n float s1w = 1.0 / (brightness(s1) + 1.0);\n float s2w = 1.0 / (brightness(s2) + 1.0);\n float s3w = 1.0 / (brightness(s3) + 1.0);\n float s4w = 1.0 / (brightness(s4) + 1.0);\n float oneDivideSum = 1.0 / (s1w + s2w + s3w + s4w);\n vec4 color = vec4(\n (s1 * s1w + s2 * s2w + s3 * s3w + s4 * s4w) * oneDivideSum,\n 1.0\n );\n#else\n vec4 color = decodeHDR(clampSample(texture, v_Texcoord + d.xy));\n color += decodeHDR(clampSample(texture, v_Texcoord + d.zy));\n color += decodeHDR(clampSample(texture, v_Texcoord + d.xw));\n color += decodeHDR(clampSample(texture, v_Texcoord + d.zw));\n color *= 0.25;\n#endif\n gl_FragColor = encodeHDR(color);\n}\n@end",kW="\n@export clay.compositor.upsample\n#define HIGH_QUALITY\nuniform sampler2D texture;\nuniform vec2 textureSize : [512, 512];\nuniform float sampleScale: 0.5;\nvarying vec2 v_Texcoord;\n@import clay.util.rgbm\n@import clay.util.clamp_sample\nvoid main()\n{\n#ifdef HIGH_QUALITY\n vec4 d = vec4(1.0, 1.0, -1.0, 0.0) / textureSize.xyxy * sampleScale;\n vec4 s;\n s = decodeHDR(clampSample(texture, v_Texcoord - d.xy));\n s += decodeHDR(clampSample(texture, v_Texcoord - d.wy)) * 2.0;\n s += decodeHDR(clampSample(texture, v_Texcoord - d.zy));\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zw)) * 2.0;\n s += decodeHDR(clampSample(texture, v_Texcoord )) * 4.0;\n s += decodeHDR(clampSample(texture, v_Texcoord + d.xw)) * 2.0;\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));\n s += decodeHDR(clampSample(texture, v_Texcoord + d.wy)) * 2.0;\n s += decodeHDR(clampSample(texture, v_Texcoord + d.xy));\n gl_FragColor = encodeHDR(s / 16.0);\n#else\n vec4 d = vec4(-1.0, -1.0, +1.0, +1.0) / textureSize.xyxy;\n vec4 s;\n s = decodeHDR(clampSample(texture, v_Texcoord + d.xy));\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));\n s += decodeHDR(clampSample(texture, v_Texcoord + d.xw));\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zw));\n gl_FragColor = encodeHDR(s / 4.0);\n#endif\n}\n@end",NW="@export clay.compositor.hdr.composite\n#define TONEMAPPING\nuniform sampler2D texture;\n#ifdef BLOOM_ENABLED\nuniform sampler2D bloom;\n#endif\n#ifdef LENSFLARE_ENABLED\nuniform sampler2D lensflare;\nuniform sampler2D lensdirt;\n#endif\n#ifdef LUM_ENABLED\nuniform sampler2D lum;\n#endif\n#ifdef LUT_ENABLED\nuniform sampler2D lut;\n#endif\n#ifdef COLOR_CORRECTION\nuniform float brightness : 0.0;\nuniform float contrast : 1.0;\nuniform float saturation : 1.0;\n#endif\n#ifdef VIGNETTE\nuniform float vignetteDarkness: 1.0;\nuniform float vignetteOffset: 1.0;\n#endif\nuniform float exposure : 1.0;\nuniform float bloomIntensity : 0.25;\nuniform float lensflareIntensity : 1;\nvarying vec2 v_Texcoord;\n@import clay.util.srgb\nvec3 ACESToneMapping(vec3 color)\n{\n const float A = 2.51;\n const float B = 0.03;\n const float C = 2.43;\n const float D = 0.59;\n const float E = 0.14;\n return (color * (A * color + B)) / (color * (C * color + D) + E);\n}\nfloat eyeAdaption(float fLum)\n{\n return mix(0.2, fLum, 0.5);\n}\n#ifdef LUT_ENABLED\nvec3 lutTransform(vec3 color) {\n float blueColor = color.b * 63.0;\n vec2 quad1;\n quad1.y = floor(floor(blueColor) / 8.0);\n quad1.x = floor(blueColor) - (quad1.y * 8.0);\n vec2 quad2;\n quad2.y = floor(ceil(blueColor) / 8.0);\n quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n vec2 texPos1;\n texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);\n texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);\n vec2 texPos2;\n texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);\n texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);\n vec4 newColor1 = texture2D(lut, texPos1);\n vec4 newColor2 = texture2D(lut, texPos2);\n vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n return newColor.rgb;\n}\n#endif\n@import clay.util.rgbm\nvoid main()\n{\n vec4 texel = vec4(0.0);\n vec4 originalTexel = vec4(0.0);\n#ifdef TEXTURE_ENABLED\n texel = decodeHDR(texture2D(texture, v_Texcoord));\n originalTexel = texel;\n#endif\n#ifdef BLOOM_ENABLED\n vec4 bloomTexel = decodeHDR(texture2D(bloom, v_Texcoord));\n texel.rgb += bloomTexel.rgb * bloomIntensity;\n texel.a += bloomTexel.a * bloomIntensity;\n#endif\n#ifdef LENSFLARE_ENABLED\n texel += decodeHDR(texture2D(lensflare, v_Texcoord)) * texture2D(lensdirt, v_Texcoord) * lensflareIntensity;\n#endif\n texel.a = min(texel.a, 1.0);\n#ifdef LUM_ENABLED\n float fLum = texture2D(lum, vec2(0.5, 0.5)).r;\n float adaptedLumDest = 3.0 / (max(0.1, 1.0 + 10.0*eyeAdaption(fLum)));\n float exposureBias = adaptedLumDest * exposure;\n#else\n float exposureBias = exposure;\n#endif\n#ifdef TONEMAPPING\n texel.rgb *= exposureBias;\n texel.rgb = ACESToneMapping(texel.rgb);\n#endif\n texel = linearTosRGB(texel);\n#ifdef LUT_ENABLED\n texel.rgb = lutTransform(clamp(texel.rgb,vec3(0.0),vec3(1.0)));\n#endif\n#ifdef COLOR_CORRECTION\n texel.rgb = clamp(texel.rgb + vec3(brightness), 0.0, 1.0);\n texel.rgb = clamp((texel.rgb - vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);\n float lum = dot(texel.rgb, vec3(0.2125, 0.7154, 0.0721));\n texel.rgb = mix(vec3(lum), texel.rgb, saturation);\n#endif\n#ifdef VIGNETTE\n vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(vignetteOffset);\n texel.rgb = mix(texel.rgb, vec3(1.0 - vignetteDarkness), dot(uv, uv));\n#endif\n gl_FragColor = encodeHDR(texel);\n#ifdef DEBUG\n #if DEBUG == 1\n gl_FragColor = encodeHDR(decodeHDR(texture2D(texture, v_Texcoord)));\n #elif DEBUG == 2\n gl_FragColor = encodeHDR(decodeHDR(texture2D(bloom, v_Texcoord)) * bloomIntensity);\n #elif DEBUG == 3\n gl_FragColor = encodeHDR(decodeHDR(texture2D(lensflare, v_Texcoord) * lensflareIntensity));\n #endif\n#endif\n if (originalTexel.a <= 0.01 && gl_FragColor.a > 1e-5) {\n gl_FragColor.a = dot(gl_FragColor.rgb, vec3(0.2125, 0.7154, 0.0721));\n }\n#ifdef PREMULTIPLY_ALPHA\n gl_FragColor.rgb *= gl_FragColor.a;\n#endif\n}\n@end",FW="@export clay.compositor.blend\n#define SHADER_NAME blend\n#ifdef TEXTURE1_ENABLED\nuniform sampler2D texture1;\nuniform float weight1 : 1.0;\n#endif\n#ifdef TEXTURE2_ENABLED\nuniform sampler2D texture2;\nuniform float weight2 : 1.0;\n#endif\n#ifdef TEXTURE3_ENABLED\nuniform sampler2D texture3;\nuniform float weight3 : 1.0;\n#endif\n#ifdef TEXTURE4_ENABLED\nuniform sampler2D texture4;\nuniform float weight4 : 1.0;\n#endif\n#ifdef TEXTURE5_ENABLED\nuniform sampler2D texture5;\nuniform float weight5 : 1.0;\n#endif\n#ifdef TEXTURE6_ENABLED\nuniform sampler2D texture6;\nuniform float weight6 : 1.0;\n#endif\nvarying vec2 v_Texcoord;\n@import clay.util.rgbm\nvoid main()\n{\n vec4 tex = vec4(0.0);\n#ifdef TEXTURE1_ENABLED\n tex += decodeHDR(texture2D(texture1, v_Texcoord)) * weight1;\n#endif\n#ifdef TEXTURE2_ENABLED\n tex += decodeHDR(texture2D(texture2, v_Texcoord)) * weight2;\n#endif\n#ifdef TEXTURE3_ENABLED\n tex += decodeHDR(texture2D(texture3, v_Texcoord)) * weight3;\n#endif\n#ifdef TEXTURE4_ENABLED\n tex += decodeHDR(texture2D(texture4, v_Texcoord)) * weight4;\n#endif\n#ifdef TEXTURE5_ENABLED\n tex += decodeHDR(texture2D(texture5, v_Texcoord)) * weight5;\n#endif\n#ifdef TEXTURE6_ENABLED\n tex += decodeHDR(texture2D(texture6, v_Texcoord)) * weight6;\n#endif\n gl_FragColor = encodeHDR(tex);\n}\n@end",BW="@export clay.compositor.fxaa\nuniform sampler2D texture;\nuniform vec4 viewport : VIEWPORT;\nvarying vec2 v_Texcoord;\n#define FXAA_REDUCE_MIN (1.0/128.0)\n#define FXAA_REDUCE_MUL (1.0/8.0)\n#define FXAA_SPAN_MAX 8.0\n@import clay.util.rgbm\nvoid main()\n{\n vec2 resolution = 1.0 / viewport.zw;\n vec3 rgbNW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ) ).xyz;\n vec3 rgbNE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ) ).xyz;\n vec3 rgbSW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ) ).xyz;\n vec3 rgbSE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ) ).xyz;\n vec4 rgbaM = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution ) );\n vec3 rgbM = rgbaM.xyz;\n float opacity = rgbaM.w;\n vec3 luma = vec3( 0.299, 0.587, 0.114 );\n float lumaNW = dot( rgbNW, luma );\n float lumaNE = dot( rgbNE, luma );\n float lumaSW = dot( rgbSW, luma );\n float lumaSE = dot( rgbSE, luma );\n float lumaM = dot( rgbM, luma );\n float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );\n float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );\n vec2 dir;\n dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n dir.y = ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );\n float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );\n dir = min( vec2( FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n dir * rcpDirMin)) * resolution;\n vec3 rgbA = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 1.0 / 3.0 - 0.5 ) ) ).xyz;\n rgbA += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 2.0 / 3.0 - 0.5 ) ) ).xyz;\n rgbA *= 0.5;\n vec3 rgbB = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * -0.5 ) ).xyz;\n rgbB += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * 0.5 ) ).xyz;\n rgbB *= 0.25;\n rgbB += rgbA * 0.5;\n float lumaB = dot( rgbB, luma );\n if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) )\n {\n gl_FragColor = vec4( rgbA, opacity );\n }\n else {\n gl_FragColor = vec4( rgbB, opacity );\n }\n}\n@end";!function yie(e){e.import("@export clay.compositor.coloradjust\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float brightness : 0.0;\nuniform float contrast : 1.0;\nuniform float exposure : 0.0;\nuniform float gamma : 1.0;\nuniform float saturation : 1.0;\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\nvoid main()\n{\n vec4 tex = texture2D( texture, v_Texcoord);\n vec3 color = clamp(tex.rgb + vec3(brightness), 0.0, 1.0);\n color = clamp( (color-vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);\n color = clamp( color * pow(2.0, exposure), 0.0, 1.0);\n color = clamp( pow(color, vec3(gamma)), 0.0, 1.0);\n float luminance = dot( color, w );\n color = mix(vec3(luminance), color, saturation);\n gl_FragColor = vec4(color, tex.a);\n}\n@end\n@export clay.compositor.brightness\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float brightness : 0.0;\nvoid main()\n{\n vec4 tex = texture2D( texture, v_Texcoord);\n vec3 color = tex.rgb + vec3(brightness);\n gl_FragColor = vec4(color, tex.a);\n}\n@end\n@export clay.compositor.contrast\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float contrast : 1.0;\nvoid main()\n{\n vec4 tex = texture2D( texture, v_Texcoord);\n vec3 color = (tex.rgb-vec3(0.5))*contrast+vec3(0.5);\n gl_FragColor = vec4(color, tex.a);\n}\n@end\n@export clay.compositor.exposure\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float exposure : 0.0;\nvoid main()\n{\n vec4 tex = texture2D(texture, v_Texcoord);\n vec3 color = tex.rgb * pow(2.0, exposure);\n gl_FragColor = vec4(color, tex.a);\n}\n@end\n@export clay.compositor.gamma\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float gamma : 1.0;\nvoid main()\n{\n vec4 tex = texture2D(texture, v_Texcoord);\n vec3 color = pow(tex.rgb, vec3(gamma));\n gl_FragColor = vec4(color, tex.a);\n}\n@end\n@export clay.compositor.saturation\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float saturation : 1.0;\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\nvoid main()\n{\n vec4 tex = texture2D(texture, v_Texcoord);\n vec3 color = tex.rgb;\n float luminance = dot(color, w);\n color = mix(vec3(luminance), color, saturation);\n gl_FragColor = vec4(color, tex.a);\n}\n@end"),e.import(IW),e.import("@export clay.compositor.hdr.log_lum\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\n@import clay.util.rgbm\nvoid main()\n{\n vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));\n float luminance = dot(tex.rgb, w);\n luminance = log(luminance + 0.001);\n gl_FragColor = encodeHDR(vec4(vec3(luminance), 1.0));\n}\n@end\n@export clay.compositor.hdr.lum_adaption\nvarying vec2 v_Texcoord;\nuniform sampler2D adaptedLum;\nuniform sampler2D currentLum;\nuniform float frameTime : 0.02;\n@import clay.util.rgbm\nvoid main()\n{\n float fAdaptedLum = decodeHDR(texture2D(adaptedLum, vec2(0.5, 0.5))).r;\n float fCurrentLum = exp(encodeHDR(texture2D(currentLum, vec2(0.5, 0.5))).r);\n fAdaptedLum += (fCurrentLum - fAdaptedLum) * (1.0 - pow(0.98, 30.0 * frameTime));\n gl_FragColor = encodeHDR(vec4(vec3(fAdaptedLum), 1.0));\n}\n@end\n@export clay.compositor.lum\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\nvoid main()\n{\n vec4 tex = texture2D( texture, v_Texcoord );\n float luminance = dot(tex.rgb, w);\n gl_FragColor = vec4(vec3(luminance), 1.0);\n}\n@end"),e.import(PW),e.import("@export clay.compositor.vignette\n#define OUTPUT_ALPHA\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float darkness: 1;\nuniform float offset: 1;\n@import clay.util.rgbm\nvoid main()\n{\n vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));\n gl_FragColor.rgb = texel.rgb;\n vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(offset);\n gl_FragColor = encodeHDR(vec4(mix(texel.rgb, vec3(1.0 - darkness), dot(uv, uv)), texel.a));\n}\n@end"),e.import(RW),e.import(LW),e.import(OW),e.import(kW),e.import(NW),e.import("@export clay.compositor.lensflare\n#define SAMPLE_NUMBER 8\nuniform sampler2D texture;\nuniform sampler2D lenscolor;\nuniform vec2 textureSize : [512, 512];\nuniform float dispersal : 0.3;\nuniform float haloWidth : 0.4;\nuniform float distortion : 1.0;\nvarying vec2 v_Texcoord;\n@import clay.util.rgbm\nvec4 textureDistorted(\n in vec2 texcoord,\n in vec2 direction,\n in vec3 distortion\n) {\n return vec4(\n decodeHDR(texture2D(texture, texcoord + direction * distortion.r)).r,\n decodeHDR(texture2D(texture, texcoord + direction * distortion.g)).g,\n decodeHDR(texture2D(texture, texcoord + direction * distortion.b)).b,\n 1.0\n );\n}\nvoid main()\n{\n vec2 texcoord = -v_Texcoord + vec2(1.0); vec2 textureOffset = 1.0 / textureSize;\n vec2 ghostVec = (vec2(0.5) - texcoord) * dispersal;\n vec2 haloVec = normalize(ghostVec) * haloWidth;\n vec3 distortion = vec3(-textureOffset.x * distortion, 0.0, textureOffset.x * distortion);\n vec4 result = vec4(0.0);\n for (int i = 0; i < SAMPLE_NUMBER; i++)\n {\n vec2 offset = fract(texcoord + ghostVec * float(i));\n float weight = length(vec2(0.5) - offset) / length(vec2(0.5));\n weight = pow(1.0 - weight, 10.0);\n result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;\n }\n result *= texture2D(lenscolor, vec2(length(vec2(0.5) - texcoord)) / length(vec2(0.5)));\n float weight = length(vec2(0.5) - fract(texcoord + haloVec)) / length(vec2(0.5));\n weight = pow(1.0 - weight, 10.0);\n vec2 offset = fract(texcoord + haloVec);\n result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;\n gl_FragColor = result;\n}\n@end"),e.import(FW),e.import(BW)}(Yn);var bie=/^#source\((.*?)\)/;function wie(e,n,t){var i,o,d,S,r=e.type||"filter";if("filter"===r){var f=e.shader.trim(),g=bie.exec(f);if(g?i=Yn.source(g[1].trim()):"#"===f.charAt(0)&&(i=n.shaders[f.substr(1)]),i||(i=f),!i)return}if(e.inputs)for(var _ in o={},e.inputs)o[_]="string"==typeof e.inputs[_]?e.inputs[_]:{node:e.inputs[_].node,pin:e.inputs[_].pin};if(e.outputs)for(var _ in d={},e.outputs){var w=e.outputs[_];d[_]={},null!=w.attachment&&(d[_].attachment=w.attachment),null!=w.keepLastFrame&&(d[_].keepLastFrame=w.keepLastFrame),null!=w.outputLastFrame&&(d[_].outputLastFrame=w.outputLastFrame),w.parameters&&(d[_].parameters=lV(w.parameters))}if(S="scene"===r?new uie({name:e.name,scene:t.scene,camera:t.camera,outputs:d}):"texture"===r?new hie({name:e.name,outputs:d}):new pie({name:e.name,shader:i,inputs:o,outputs:d})){if(e.parameters)for(var _ in e.parameters)"string"==typeof(k=e.parameters[_])?"#"===(k=k.trim()).charAt(0)?k=n.textures[k.substr(1)]:S.on("beforerender",Mie(_,VW(k))):"function"==typeof k&&S.on("beforerender",k),S.setParameter(_,k);if(e.defines&&S.pass)for(var _ in e.defines){var k;S.pass.material.define("fragment",_,k=e.defines[_])}}return S}function Cie(e,n){return e}function Sie(e,n){return n}function lV(e){var n={};if(!e)return n;["type","minFilter","magFilter","wrapS","wrapT","flipY","useMipmap"].forEach(function(r){var i=e[r];null!=i&&("string"==typeof i&&(i=fr[i]),n[r]=i)});var t=e.scale||1;return["width","height"].forEach(function(r){if(null!=e[r]){var i=e[r];"string"==typeof i?(i=i.trim(),n[r]=function Tie(e,n,t){return t=t||1,function(r){var i=r.getDevicePixelRatio(),o=r.getWidth()*t,d=r.getHeight()*t;return n(o,d,i)}}(0,VW(i),t)):n[r]=i}}),n.width||(n.width=Cie),n.height||(n.height=Sie),null!=e.useMipmap&&(n.useMipmap=e.useMipmap),n}function Mie(e,n){return function(t){var r=t.getDevicePixelRatio(),i=t.getWidth(),o=t.getHeight(),d=n(i,o,r);this.setParameter(e,d)}}function VW(e){var n=/^expr\((.*)\)$/.exec(e);if(n)try{var t=new Function("width","height","dpr","return "+n[1]);return t(1,1),t}catch{throw new Error("Invalid expression.")}}const Wy=function Aie(e,n){for(var t=0,r=1/n,i=e;i>0;)t+=r*(i%n),i=Math.floor(i/n),r/=n;return t};function zW(e){for(var n=new Uint8Array(e*e*4),t=0,r=new On,i=0;i<e;i++)for(var o=0;o<e;o++)r.set(2*Math.random()-1,2*Math.random()-1,0).normalize(),n[t++]=255*(.5*r.x+.5),n[t++]=255*(.5*r.y+.5),n[t++]=0,n[t++]=255;return n}function HW(e){return new Kr({pixels:zW(e),wrapS:fr.REPEAT,wrapT:fr.REPEAT,width:e,height:e})}function Pie(e,n,t){var r=new Float32Array(3*e);n=n||0;for(var i=0;i<e;i++){var o=Wy(i+n,2)*(t?1:2)*Math.PI,d=Wy(i+n,3)*Math.PI,f=Math.random(),g=Math.cos(o)*Math.sin(d)*f,_=Math.cos(d)*f,w=Math.sin(o)*Math.sin(d)*f;r[3*i]=g,r[3*i+1]=_,r[3*i+2]=w}return r}function eh(e){e=e||{},this._ssaoPass=new so({fragment:Yn.source("ecgl.ssao.estimate")}),this._blurPass=new so({fragment:Yn.source("ecgl.ssao.blur")}),this._framebuffer=new ts({depthBuffer:!1}),this._ssaoTexture=new Kr,this._blurTexture=new Kr,this._blurTexture2=new Kr,this._depthTex=e.depthTexture,this._normalTex=e.normalTexture,this.setNoiseSize(4),this.setKernelSize(e.kernelSize||12),null!=e.radius&&this.setParameter("radius",e.radius),null!=e.power&&this.setParameter("power",e.power),this._normalTex||(this._ssaoPass.material.disableTexture("normalTex"),this._blurPass.material.disableTexture("normalTex")),this._depthTex||this._blurPass.material.disableTexture("depthTex"),this._blurPass.material.setUniform("normalTex",this._normalTex),this._blurPass.material.setUniform("depthTex",this._depthTex)}Yn.import("@export ecgl.ssao.estimate\n\nuniform sampler2D depthTex;\n\nuniform sampler2D normalTex;\n\nuniform sampler2D noiseTex;\n\nuniform vec2 depthTexSize;\n\nuniform vec2 noiseTexSize;\n\nuniform mat4 projection;\n\nuniform mat4 projectionInv;\n\nuniform mat4 viewInverseTranspose;\n\nuniform vec3 kernel[KERNEL_SIZE];\n\nuniform float radius : 1;\n\nuniform float power : 1;\n\nuniform float bias: 1e-2;\n\nuniform float intensity: 1.0;\n\nvarying vec2 v_Texcoord;\n\nfloat ssaoEstimator(in vec3 originPos, in mat3 kernelBasis) {\n float occlusion = 0.0;\n\n for (int i = 0; i < KERNEL_SIZE; i++) {\n vec3 samplePos = kernel[i];\n#ifdef NORMALTEX_ENABLED\n samplePos = kernelBasis * samplePos;\n#endif\n samplePos = samplePos * radius + originPos;\n\n vec4 texCoord = projection * vec4(samplePos, 1.0);\n texCoord.xy /= texCoord.w;\n\n vec4 depthTexel = texture2D(depthTex, texCoord.xy * 0.5 + 0.5);\n\n float sampleDepth = depthTexel.r * 2.0 - 1.0;\n if (projection[3][3] == 0.0) {\n sampleDepth = projection[3][2] / (sampleDepth * projection[2][3] - projection[2][2]);\n }\n else {\n sampleDepth = (sampleDepth - projection[3][2]) / projection[2][2];\n }\n \n float rangeCheck = smoothstep(0.0, 1.0, radius / abs(originPos.z - sampleDepth));\n occlusion += rangeCheck * step(samplePos.z, sampleDepth - bias);\n }\n#ifdef NORMALTEX_ENABLED\n occlusion = 1.0 - occlusion / float(KERNEL_SIZE);\n#else\n occlusion = 1.0 - clamp((occlusion / float(KERNEL_SIZE) - 0.6) * 2.5, 0.0, 1.0);\n#endif\n return pow(occlusion, power);\n}\n\nvoid main()\n{\n\n vec4 depthTexel = texture2D(depthTex, v_Texcoord);\n\n#ifdef NORMALTEX_ENABLED\n vec4 tex = texture2D(normalTex, v_Texcoord);\n if (dot(tex.rgb, tex.rgb) == 0.0) {\n gl_FragColor = vec4(1.0);\n return;\n }\n vec3 N = tex.rgb * 2.0 - 1.0;\n N = (viewInverseTranspose * vec4(N, 0.0)).xyz;\n\n vec2 noiseTexCoord = depthTexSize / vec2(noiseTexSize) * v_Texcoord;\n vec3 rvec = texture2D(noiseTex, noiseTexCoord).rgb * 2.0 - 1.0;\n vec3 T = normalize(rvec - N * dot(rvec, N));\n vec3 BT = normalize(cross(N, T));\n mat3 kernelBasis = mat3(T, BT, N);\n#else\n if (depthTexel.r > 0.99999) {\n gl_FragColor = vec4(1.0);\n return;\n }\n mat3 kernelBasis;\n#endif\n\n float z = depthTexel.r * 2.0 - 1.0;\n\n vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, z, 1.0);\n vec4 p4 = projectionInv * projectedPos;\n\n vec3 position = p4.xyz / p4.w;\n\n float ao = ssaoEstimator(position, kernelBasis);\n ao = clamp(1.0 - (1.0 - ao) * intensity, 0.0, 1.0);\n gl_FragColor = vec4(vec3(ao), 1.0);\n}\n\n@end\n\n\n@export ecgl.ssao.blur\n#define SHADER_NAME SSAO_BLUR\n\nuniform sampler2D ssaoTexture;\n\n#ifdef NORMALTEX_ENABLED\nuniform sampler2D normalTex;\n#endif\n\nvarying vec2 v_Texcoord;\n\nuniform vec2 textureSize;\nuniform float blurSize : 1.0;\n\nuniform int direction: 0.0;\n\n#ifdef DEPTHTEX_ENABLED\nuniform sampler2D depthTex;\nuniform mat4 projection;\nuniform float depthRange : 0.5;\n\nfloat getLinearDepth(vec2 coord)\n{\n float depth = texture2D(depthTex, coord).r * 2.0 - 1.0;\n return projection[3][2] / (depth * projection[2][3] - projection[2][2]);\n}\n#endif\n\nvoid main()\n{\n float kernel[5];\n kernel[0] = 0.122581;\n kernel[1] = 0.233062;\n kernel[2] = 0.288713;\n kernel[3] = 0.233062;\n kernel[4] = 0.122581;\n\n vec2 off = vec2(0.0);\n if (direction == 0) {\n off[0] = blurSize / textureSize.x;\n }\n else {\n off[1] = blurSize / textureSize.y;\n }\n\n vec2 coord = v_Texcoord;\n\n float sum = 0.0;\n float weightAll = 0.0;\n\n#ifdef NORMALTEX_ENABLED\n vec3 centerNormal = texture2D(normalTex, v_Texcoord).rgb * 2.0 - 1.0;\n#endif\n#if defined(DEPTHTEX_ENABLED)\n float centerDepth = getLinearDepth(v_Texcoord);\n#endif\n\n for (int i = 0; i < 5; i++) {\n vec2 coord = clamp(v_Texcoord + vec2(float(i) - 2.0) * off, vec2(0.0), vec2(1.0));\n\n float w = kernel[i];\n#ifdef NORMALTEX_ENABLED\n vec3 normal = texture2D(normalTex, coord).rgb * 2.0 - 1.0;\n w *= clamp(dot(normal, centerNormal), 0.0, 1.0);\n#endif\n#ifdef DEPTHTEX_ENABLED\n float d = getLinearDepth(coord);\n w *= (1.0 - smoothstep(abs(centerDepth - d) / depthRange, 0.0, 1.0));\n#endif\n\n weightAll += w;\n sum += texture2D(ssaoTexture, coord).r * w;\n }\n\n gl_FragColor = vec4(vec3(sum / weightAll), 1.0);\n}\n\n@end\n"),eh.prototype.setDepthTexture=function(e){this._depthTex=e},eh.prototype.setNormalTexture=function(e){this._normalTex=e,this._ssaoPass.material[e?"enableTexture":"disableTexture"]("normalTex"),this.setKernelSize(this._kernelSize)},eh.prototype.update=function(e,n,t){var r=e.getWidth(),i=e.getHeight(),o=this._ssaoPass,d=this._blurPass;o.setUniform("kernel",this._kernels[t%this._kernels.length]),o.setUniform("depthTex",this._depthTex),null!=this._normalTex&&o.setUniform("normalTex",this._normalTex),o.setUniform("depthTexSize",[this._depthTex.width,this._depthTex.height]);var f=new cr;cr.transpose(f,n.worldTransform),o.setUniform("projection",n.projectionMatrix.array),o.setUniform("projectionInv",n.invProjectionMatrix.array),o.setUniform("viewInverseTranspose",f.array);var g=this._ssaoTexture,_=this._blurTexture,w=this._blurTexture2;g.width=r/2,g.height=i/2,_.width=r,_.height=i,w.width=r,w.height=i,this._framebuffer.attach(g),this._framebuffer.bind(e),e.gl.clearColor(1,1,1,1),e.gl.clear(e.gl.COLOR_BUFFER_BIT),o.render(e),d.setUniform("textureSize",[r/2,i/2]),d.setUniform("projection",n.projectionMatrix.array),this._framebuffer.attach(_),d.setUniform("direction",0),d.setUniform("ssaoTexture",g),d.render(e),this._framebuffer.attach(w),d.setUniform("textureSize",[r,i]),d.setUniform("direction",1),d.setUniform("ssaoTexture",_),d.render(e),this._framebuffer.unbind(e);var S=e.clearColor;e.gl.clearColor(S[0],S[1],S[2],S[3])},eh.prototype.getTargetTexture=function(){return this._blurTexture2},eh.prototype.setParameter=function(e,n){"noiseTexSize"===e?this.setNoiseSize(n):"kernelSize"===e?this.setKernelSize(n):"intensity"===e?this._ssaoPass.material.set("intensity",n):this._ssaoPass.setUniform(e,n)},eh.prototype.setKernelSize=function(e){this._kernelSize=e,this._ssaoPass.material.define("fragment","KERNEL_SIZE",e),this._kernels=this._kernels||[];for(var n=0;n<30;n++)this._kernels[n]=Pie(e,n*e,!!this._normalTex)},eh.prototype.setNoiseSize=function(e){var n=this._ssaoPass.getUniform("noiseTex");n?(n.data=zW(e),n.width=n.height=e,n.dirty()):(n=HW(e),this._ssaoPass.setUniform("noiseTex",HW(e))),this._ssaoPass.setUniform("noiseTexSize",[e,e])},eh.prototype.dispose=function(e){this._blurTexture.dispose(e),this._ssaoTexture.dispose(e),this._blurTexture2.dispose(e)};const Rie=eh;function th(e){e=e||{},this._ssrPass=new so({fragment:Yn.source("ecgl.ssr.main"),clearColor:[0,0,0,0]}),this._blurPass1=new so({fragment:Yn.source("ecgl.ssr.blur"),clearColor:[0,0,0,0]}),this._blurPass2=new so({fragment:Yn.source("ecgl.ssr.blur"),clearColor:[0,0,0,0]}),this._blendPass=new so({fragment:Yn.source("clay.compositor.blend")}),this._blendPass.material.disableTexturesAll(),this._blendPass.material.enableTexture(["texture1","texture2"]),this._ssrPass.setUniform("gBufferTexture1",e.normalTexture),this._ssrPass.setUniform("gBufferTexture2",e.depthTexture),this._blurPass1.setUniform("gBufferTexture1",e.normalTexture),this._blurPass1.setUniform("gBufferTexture2",e.depthTexture),this._blurPass2.setUniform("gBufferTexture1",e.normalTexture),this._blurPass2.setUniform("gBufferTexture2",e.depthTexture),this._blurPass2.material.define("fragment","VERTICAL"),this._blurPass2.material.define("fragment","BLEND"),this._ssrTexture=new Kr({type:fr.HALF_FLOAT}),this._texture2=new Kr({type:fr.HALF_FLOAT}),this._texture3=new Kr({type:fr.HALF_FLOAT}),this._prevTexture=new Kr({type:fr.HALF_FLOAT}),this._currentTexture=new Kr({type:fr.HALF_FLOAT}),this._frameBuffer=new ts({depthBuffer:!1}),this._normalDistribution=null,this._totalSamples=256,this._samplePerFrame=4,this._ssrPass.material.define("fragment","SAMPLE_PER_FRAME",this._samplePerFrame),this._ssrPass.material.define("fragment","TOTAL_SAMPLES",this._totalSamples),this._downScale=1}Yn.import("@export ecgl.ssr.main\n\n#define SHADER_NAME SSR\n#define MAX_ITERATION 20;\n#define SAMPLE_PER_FRAME 5;\n#define TOTAL_SAMPLES 128;\n\nuniform sampler2D sourceTexture;\nuniform sampler2D gBufferTexture1;\nuniform sampler2D gBufferTexture2;\nuniform sampler2D gBufferTexture3;\nuniform samplerCube specularCubemap;\nuniform float specularIntensity: 1;\n\nuniform mat4 projection;\nuniform mat4 projectionInv;\nuniform mat4 toViewSpace;\nuniform mat4 toWorldSpace;\n\nuniform float maxRayDistance: 200;\n\nuniform float pixelStride: 16;\nuniform float pixelStrideZCutoff: 50; \nuniform float screenEdgeFadeStart: 0.9; \nuniform float eyeFadeStart : 0.2; uniform float eyeFadeEnd: 0.8; \nuniform float minGlossiness: 0.2; uniform float zThicknessThreshold: 1;\n\nuniform float nearZ;\nuniform vec2 viewportSize : VIEWPORT_SIZE;\n\nuniform float jitterOffset: 0;\n\nvarying vec2 v_Texcoord;\n\n#ifdef DEPTH_DECODE\n@import clay.util.decode_float\n#endif\n\n#ifdef PHYSICALLY_CORRECT\nuniform sampler2D normalDistribution;\nuniform float sampleOffset: 0;\nuniform vec2 normalDistributionSize;\n\nvec3 transformNormal(vec3 H, vec3 N) {\n vec3 upVector = N.y > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);\n vec3 tangentX = normalize(cross(N, upVector));\n vec3 tangentZ = cross(N, tangentX);\n return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);\n}\nvec3 importanceSampleNormalGGX(float i, float roughness, vec3 N) {\n float p = fract((i + sampleOffset) / float(TOTAL_SAMPLES));\n vec3 H = texture2D(normalDistribution,vec2(roughness, p)).rgb;\n return transformNormal(H, N);\n}\nfloat G_Smith(float g, float ndv, float ndl) {\n float roughness = 1.0 - g;\n float k = roughness * roughness / 2.0;\n float G1V = ndv / (ndv * (1.0 - k) + k);\n float G1L = ndl / (ndl * (1.0 - k) + k);\n return G1L * G1V;\n}\nvec3 F_Schlick(float ndv, vec3 spec) {\n return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);\n}\n#endif\n\nfloat fetchDepth(sampler2D depthTexture, vec2 uv)\n{\n vec4 depthTexel = texture2D(depthTexture, uv);\n return depthTexel.r * 2.0 - 1.0;\n}\n\nfloat linearDepth(float depth)\n{\n if (projection[3][3] == 0.0) {\n return projection[3][2] / (depth * projection[2][3] - projection[2][2]);\n }\n else {\n return (depth - projection[3][2]) / projection[2][2];\n }\n}\n\nbool rayIntersectDepth(float rayZNear, float rayZFar, vec2 hitPixel)\n{\n if (rayZFar > rayZNear)\n {\n float t = rayZFar; rayZFar = rayZNear; rayZNear = t;\n }\n float cameraZ = linearDepth(fetchDepth(gBufferTexture2, hitPixel));\n return rayZFar <= cameraZ && rayZNear >= cameraZ - zThicknessThreshold;\n}\n\n\nbool traceScreenSpaceRay(\n vec3 rayOrigin, vec3 rayDir, float jitter,\n out vec2 hitPixel, out vec3 hitPoint, out float iterationCount\n)\n{\n float rayLength = ((rayOrigin.z + rayDir.z * maxRayDistance) > -nearZ)\n ? (-nearZ - rayOrigin.z) / rayDir.z : maxRayDistance;\n\n vec3 rayEnd = rayOrigin + rayDir * rayLength;\n\n vec4 H0 = projection * vec4(rayOrigin, 1.0);\n vec4 H1 = projection * vec4(rayEnd, 1.0);\n\n float k0 = 1.0 / H0.w, k1 = 1.0 / H1.w;\n\n vec3 Q0 = rayOrigin * k0, Q1 = rayEnd * k1;\n\n vec2 P0 = (H0.xy * k0 * 0.5 + 0.5) * viewportSize;\n vec2 P1 = (H1.xy * k1 * 0.5 + 0.5) * viewportSize;\n\n P1 += dot(P1 - P0, P1 - P0) < 0.0001 ? 0.01 : 0.0;\n vec2 delta = P1 - P0;\n\n bool permute = false;\n if (abs(delta.x) < abs(delta.y)) {\n permute = true;\n delta = delta.yx;\n P0 = P0.yx;\n P1 = P1.yx;\n }\n float stepDir = sign(delta.x);\n float invdx = stepDir / delta.x;\n\n vec3 dQ = (Q1 - Q0) * invdx;\n float dk = (k1 - k0) * invdx;\n\n vec2 dP = vec2(stepDir, delta.y * invdx);\n\n float strideScaler = 1.0 - min(1.0, -rayOrigin.z / pixelStrideZCutoff);\n float pixStride = 1.0 + strideScaler * pixelStride;\n\n dP *= pixStride; dQ *= pixStride; dk *= pixStride;\n\n vec4 pqk = vec4(P0, Q0.z, k0);\n vec4 dPQK = vec4(dP, dQ.z, dk);\n\n pqk += dPQK * jitter;\n float rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);\n float rayZNear;\n\n bool intersect = false;\n\n vec2 texelSize = 1.0 / viewportSize;\n\n iterationCount = 0.0;\n\n for (int i = 0; i < MAX_ITERATION; i++)\n {\n pqk += dPQK;\n\n rayZNear = rayZFar;\n rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);\n\n hitPixel = permute ? pqk.yx : pqk.xy;\n hitPixel *= texelSize;\n\n intersect = rayIntersectDepth(rayZNear, rayZFar, hitPixel);\n\n iterationCount += 1.0;\n\n dPQK *= 1.2;\n\n if (intersect) {\n break;\n }\n }\n\n Q0.xy += dQ.xy * iterationCount;\n Q0.z = pqk.z;\n hitPoint = Q0 / pqk.w;\n\n return intersect;\n}\n\nfloat calculateAlpha(\n float iterationCount, float reflectivity,\n vec2 hitPixel, vec3 hitPoint, float dist, vec3 rayDir\n)\n{\n float alpha = clamp(reflectivity, 0.0, 1.0);\n alpha *= 1.0 - (iterationCount / float(MAX_ITERATION));\n vec2 hitPixelNDC = hitPixel * 2.0 - 1.0;\n float maxDimension = min(1.0, max(abs(hitPixelNDC.x), abs(hitPixelNDC.y)));\n alpha *= 1.0 - max(0.0, maxDimension - screenEdgeFadeStart) / (1.0 - screenEdgeFadeStart);\n\n float _eyeFadeStart = eyeFadeStart;\n float _eyeFadeEnd = eyeFadeEnd;\n if (_eyeFadeStart > _eyeFadeEnd) {\n float tmp = _eyeFadeEnd;\n _eyeFadeEnd = _eyeFadeStart;\n _eyeFadeStart = tmp;\n }\n\n float eyeDir = clamp(rayDir.z, _eyeFadeStart, _eyeFadeEnd);\n alpha *= 1.0 - (eyeDir - _eyeFadeStart) / (_eyeFadeEnd - _eyeFadeStart);\n\n alpha *= 1.0 - clamp(dist / maxRayDistance, 0.0, 1.0);\n\n return alpha;\n}\n\n@import clay.util.rand\n\n@import clay.util.rgbm\n\nvoid main()\n{\n vec4 normalAndGloss = texture2D(gBufferTexture1, v_Texcoord);\n\n if (dot(normalAndGloss.rgb, vec3(1.0)) == 0.0) {\n discard;\n }\n\n float g = normalAndGloss.a;\n#if !defined(PHYSICALLY_CORRECT)\n if (g <= minGlossiness) {\n discard;\n }\n#endif\n\n float reflectivity = (g - minGlossiness) / (1.0 - minGlossiness);\n\n vec3 N = normalize(normalAndGloss.rgb * 2.0 - 1.0);\n N = normalize((toViewSpace * vec4(N, 0.0)).xyz);\n\n vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, fetchDepth(gBufferTexture2, v_Texcoord), 1.0);\n vec4 pos = projectionInv * projectedPos;\n vec3 rayOrigin = pos.xyz / pos.w;\n vec3 V = -normalize(rayOrigin);\n\n float ndv = clamp(dot(N, V), 0.0, 1.0);\n float iterationCount;\n float jitter = rand(fract(v_Texcoord + jitterOffset));\n\n#ifdef PHYSICALLY_CORRECT\n vec4 color = vec4(vec3(0.0), 1.0);\n vec4 albedoMetalness = texture2D(gBufferTexture3, v_Texcoord);\n vec3 albedo = albedoMetalness.rgb;\n float m = albedoMetalness.a;\n vec3 diffuseColor = albedo * (1.0 - m);\n vec3 spec = mix(vec3(0.04), albedo, m);\n\n float jitter2 = rand(fract(v_Texcoord)) * float(TOTAL_SAMPLES);\n\n for (int i = 0; i < SAMPLE_PER_FRAME; i++) {\n vec3 H = importanceSampleNormalGGX(float(i) + jitter2, 1.0 - g, N);\n vec3 rayDir = normalize(reflect(-V, H));\n#else\n vec3 rayDir = normalize(reflect(-V, N));\n#endif\n vec2 hitPixel;\n vec3 hitPoint;\n\n bool intersect = traceScreenSpaceRay(rayOrigin, rayDir, jitter, hitPixel, hitPoint, iterationCount);\n\n float dist = distance(rayOrigin, hitPoint);\n\n vec3 hitNormal = texture2D(gBufferTexture1, hitPixel).rgb * 2.0 - 1.0;\n hitNormal = normalize((toViewSpace * vec4(hitNormal, 0.0)).xyz);\n#ifdef PHYSICALLY_CORRECT\n float ndl = clamp(dot(N, rayDir), 0.0, 1.0);\n float vdh = clamp(dot(V, H), 0.0, 1.0);\n float ndh = clamp(dot(N, H), 0.0, 1.0);\n vec3 litTexel = vec3(0.0);\n if (dot(hitNormal, rayDir) < 0.0 && intersect) {\n litTexel = texture2D(sourceTexture, hitPixel).rgb;\n litTexel *= pow(clamp(1.0 - dist / 200.0, 0.0, 1.0), 3.0);\n\n }\n else {\n #ifdef SPECULARCUBEMAP_ENABLED\n vec3 rayDirW = normalize(toWorldSpace * vec4(rayDir, 0.0)).rgb;\n litTexel = RGBMDecode(textureCubeLodEXT(specularCubemap, rayDirW, 0.0), 8.12).rgb * specularIntensity;\n#endif\n }\n color.rgb += ndl * litTexel * (\n F_Schlick(ndl, spec) * G_Smith(g, ndv, ndl) * vdh / (ndh * ndv + 0.001)\n );\n }\n color.rgb /= float(SAMPLE_PER_FRAME);\n#else\n #if !defined(SPECULARCUBEMAP_ENABLED)\n if (dot(hitNormal, rayDir) >= 0.0) {\n discard;\n }\n if (!intersect) {\n discard;\n }\n#endif\n float alpha = clamp(calculateAlpha(iterationCount, reflectivity, hitPixel, hitPoint, dist, rayDir), 0.0, 1.0);\n vec4 color = texture2D(sourceTexture, hitPixel);\n color.rgb *= alpha;\n\n#ifdef SPECULARCUBEMAP_ENABLED\n vec3 rayDirW = normalize(toWorldSpace * vec4(rayDir, 0.0)).rgb;\n alpha = alpha * (intersect ? 1.0 : 0.0);\n float bias = (1.0 -g) * 5.0;\n color.rgb += (1.0 - alpha)\n * RGBMDecode(textureCubeLodEXT(specularCubemap, rayDirW, bias), 8.12).rgb\n * specularIntensity;\n#endif\n\n#endif\n\n gl_FragColor = encodeHDR(color);\n}\n@end\n\n@export ecgl.ssr.blur\n\nuniform sampler2D texture;\nuniform sampler2D gBufferTexture1;\nuniform sampler2D gBufferTexture2;\nuniform mat4 projection;\nuniform float depthRange : 0.05;\n\nvarying vec2 v_Texcoord;\n\nuniform vec2 textureSize;\nuniform float blurSize : 1.0;\n\n#ifdef BLEND\n #ifdef SSAOTEX_ENABLED\nuniform sampler2D ssaoTex;\n #endif\nuniform sampler2D sourceTexture;\n#endif\n\nfloat getLinearDepth(vec2 coord)\n{\n float depth = texture2D(gBufferTexture2, coord).r * 2.0 - 1.0;\n return projection[3][2] / (depth * projection[2][3] - projection[2][2]);\n}\n\n@import clay.util.rgbm\n\n\nvoid main()\n{\n @import clay.compositor.kernel.gaussian_9\n\n vec4 centerNTexel = texture2D(gBufferTexture1, v_Texcoord);\n float g = centerNTexel.a;\n float maxBlurSize = clamp(1.0 - g, 0.0, 1.0) * blurSize;\n#ifdef VERTICAL\n vec2 off = vec2(0.0, maxBlurSize / textureSize.y);\n#else\n vec2 off = vec2(maxBlurSize / textureSize.x, 0.0);\n#endif\n\n vec2 coord = v_Texcoord;\n\n vec4 sum = vec4(0.0);\n float weightAll = 0.0;\n\n vec3 cN = centerNTexel.rgb * 2.0 - 1.0;\n float cD = getLinearDepth(v_Texcoord);\n for (int i = 0; i < 9; i++) {\n vec2 coord = clamp((float(i) - 4.0) * off + v_Texcoord, vec2(0.0), vec2(1.0));\n float w = gaussianKernel[i]\n * clamp(dot(cN, texture2D(gBufferTexture1, coord).rgb * 2.0 - 1.0), 0.0, 1.0);\n float d = getLinearDepth(coord);\n w *= (1.0 - smoothstep(abs(cD - d) / depthRange, 0.0, 1.0));\n\n weightAll += w;\n sum += decodeHDR(texture2D(texture, coord)) * w;\n }\n\n#ifdef BLEND\n float aoFactor = 1.0;\n #ifdef SSAOTEX_ENABLED\n aoFactor = texture2D(ssaoTex, v_Texcoord).r;\n #endif\n gl_FragColor = encodeHDR(\n sum / weightAll * aoFactor + decodeHDR(texture2D(sourceTexture, v_Texcoord))\n );\n#else\n gl_FragColor = encodeHDR(sum / weightAll);\n#endif\n}\n\n@end"),th.prototype.setAmbientCubemap=function(e,n){this._ssrPass.material.set("specularCubemap",e),this._ssrPass.material.set("specularIntensity",n),this._ssrPass.material[e&&n?"enableTexture":"disableTexture"]("specularCubemap")},th.prototype.update=function(e,n,t,r){var i=e.getWidth(),o=e.getHeight(),d=this._ssrTexture,f=this._texture2,g=this._texture3;d.width=this._prevTexture.width=this._currentTexture.width=i/this._downScale,d.height=this._prevTexture.height=this._currentTexture.height=o/this._downScale,f.width=g.width=i,f.height=g.height=o;var _=this._frameBuffer,w=this._ssrPass,S=this._blurPass1,k=this._blurPass2,V=this._blendPass,ne=new cr,pe=new cr;if(cr.transpose(ne,n.worldTransform),cr.transpose(pe,n.viewMatrix),w.setUniform("sourceTexture",t),w.setUniform("projection",n.projectionMatrix.array),w.setUniform("projectionInv",n.invProjectionMatrix.array),w.setUniform("toViewSpace",ne.array),w.setUniform("toWorldSpace",pe.array),w.setUniform("nearZ",n.near),w.setUniform("jitterOffset",r/this._totalSamples*this._samplePerFrame),w.setUniform("sampleOffset",r*this._samplePerFrame),S.setUniform("textureSize",[d.width,d.height]),k.setUniform("textureSize",[i,o]),k.setUniform("sourceTexture",t),S.setUniform("projection",n.projectionMatrix.array),k.setUniform("projection",n.projectionMatrix.array),_.attach(d),_.bind(e),w.render(e),this._physicallyCorrect&&(_.attach(this._currentTexture),V.setUniform("texture1",this._prevTexture),V.setUniform("texture2",d),V.material.set({weight1:r>=1?.95:0,weight2:r>=1?.05:1}),V.render(e)),_.attach(f),S.setUniform("texture",this._physicallyCorrect?this._currentTexture:d),S.render(e),_.attach(g),k.setUniform("texture",f),k.render(e),_.unbind(e),this._physicallyCorrect){var Re=this._prevTexture;this._prevTexture=this._currentTexture,this._currentTexture=Re}},th.prototype.getTargetTexture=function(){return this._texture3},th.prototype.setParameter=function(e,n){"maxIteration"===e?this._ssrPass.material.define("fragment","MAX_ITERATION",n):this._ssrPass.setUniform(e,n)},th.prototype.setPhysicallyCorrect=function(e){e?(this._normalDistribution||(this._normalDistribution=L2.generateNormalDistribution(64,this._totalSamples)),this._ssrPass.material.define("fragment","PHYSICALLY_CORRECT"),this._ssrPass.material.set("normalDistribution",this._normalDistribution),this._ssrPass.material.set("normalDistributionSize",[64,this._totalSamples])):this._ssrPass.material.undefine("fragment","PHYSICALLY_CORRECT"),this._physicallyCorrect=e},th.prototype.setSSAOTexture=function(e){var n=this._blurPass2;e?(n.material.enableTexture("ssaoTex"),n.material.set("ssaoTex",e)):n.material.disableTexture("ssaoTex")},th.prototype.isFinished=function(e){return!this._physicallyCorrect||e>this._totalSamples/this._samplePerFrame},th.prototype.dispose=function(e){this._ssrTexture.dispose(e),this._texture2.dispose(e),this._texture3.dispose(e),this._prevTexture.dispose(e),this._currentTexture.dispose(e),this._frameBuffer.dispose(e)};const Oie=th,UW=[0,0,-.321585265978,-.154972575841,.458126042375,.188473391593,.842080129861,.527766490688,.147304551086,-.659453822776,-.331943915203,-.940619700594,.0479226680259,.54812163202,.701581552186,-.709825561388,-.295436780218,.940589268233,-.901489676764,.237713156085,.973570876096,-.109899459384,-.866792314779,-.451805525005,.330975007087,.800048655954,-.344275183665,.381779221166,-.386139432542,-.437418421534,-.576478634965,-.0148463392551,.385798197415,-.262426961053,-.666302061145,.682427250835,-.628010632582,-.732836215494,.10163141741,-.987658134403,.711995289051,-.320024291314,.0296005138058,.950296523438,.0130612307608,-.351024443122,-.879596633704,-.10478487883,.435712737232,.504254490347,.779203817497,.206477676721,.388264289969,-.896736162545,-.153106280781,-.629203242522,-.245517550697,.657969239148,.126830499058,.26862328493,-.634888119007,-.302301223431,.617074219636,.779817204925];function cV(e,n,t,r,i){var o=e.gl;n.setUniform(o,"1i",t,i),o.activeTexture(o.TEXTURE0+i),r.isRenderable()?r.bind(e):r.unbind(e)}function Nie(e,n,t,r,i){var o,d,f,g,_=e.gl;return function(w,S,k){if(!g||g.material!==w.material){var V=w.material,ne=w.__program,pe=V.get("roughness");null==pe&&(pe=1);var De=V.get("normalMap")||n,Re=V.get("roughnessMap"),Fe=V.get("bumpMap"),ke=V.get("uvRepeat"),Be=V.get("uvOffset"),at=V.get("detailUvRepeat"),ot=V.get("detailUvOffset"),St=!!Fe&&V.isTextureEnabled("bumpMap"),yt=!!Re&&V.isTextureEnabled("roughnessMap"),Ht=V.isDefined("fragment","DOUBLE_SIDED");Fe=Fe||t,Re=Re||r,k!==S?(S.set("normalMap",De),S.set("bumpMap",Fe),S.set("roughnessMap",Re),S.set("useBumpMap",St),S.set("useRoughnessMap",yt),S.set("doubleSide",Ht),null!=ke&&S.set("uvRepeat",ke),null!=Be&&S.set("uvOffset",Be),null!=at&&S.set("detailUvRepeat",at),null!=ot&&S.set("detailUvOffset",ot),S.set("roughness",pe)):(ne.setUniform(_,"1f","roughness",pe),o!==De&&cV(e,ne,"normalMap",De,0),d!==Fe&&Fe&&cV(e,ne,"bumpMap",Fe,1),f!==Re&&Re&&cV(e,ne,"roughnessMap",Re,2),null!=ke&&ne.setUniform(_,"2f","uvRepeat",ke),null!=Be&&ne.setUniform(_,"2f","uvOffset",Be),null!=at&&ne.setUniform(_,"2f","detailUvRepeat",at),null!=ot&&ne.setUniform(_,"2f","detailUvOffset",ot),ne.setUniform(_,"1i","useBumpMap",+St),ne.setUniform(_,"1i","useRoughnessMap",+yt),ne.setUniform(_,"1i","doubleSide",+Ht)),o=De,d=Fe,f=Re,g=w}}}function jy(e){e=e||{},this._depthTex=new Kr({format:fr.DEPTH_COMPONENT,type:fr.UNSIGNED_INT}),this._normalTex=new Kr({type:fr.HALF_FLOAT}),this._framebuffer=new ts,this._framebuffer.attach(this._normalTex),this._framebuffer.attach(this._depthTex,ts.DEPTH_ATTACHMENT),this._normalMaterial=new Sc({shader:new Yn(Yn.source("ecgl.normal.vertex"),Yn.source("ecgl.normal.fragment"))}),this._normalMaterial.enableTexture(["normalMap","bumpMap","roughnessMap"]),this._defaultNormalMap=dv.createBlank("#000"),this._defaultBumpMap=dv.createBlank("#000"),this._defaultRoughessMap=dv.createBlank("#000"),this._debugPass=new so({fragment:Yn.source("clay.compositor.output")}),this._debugPass.setUniform("texture",this._normalTex),this._debugPass.material.undefine("fragment","OUTPUT_ALPHA")}Yn.import("@export ecgl.normal.vertex\n\n@import ecgl.common.transformUniforms\n\n@import ecgl.common.uv.header\n\n@import ecgl.common.attributes\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\n@import ecgl.common.normalMap.vertexHeader\n\n@import ecgl.common.vertexAnimation.header\n\nvoid main()\n{\n\n @import ecgl.common.vertexAnimation.main\n\n @import ecgl.common.uv.main\n\n v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);\n v_WorldPosition = (world * vec4(pos, 1.0)).xyz;\n\n @import ecgl.common.normalMap.vertexMain\n\n gl_Position = worldViewProjection * vec4(pos, 1.0);\n\n}\n\n\n@end\n\n\n@export ecgl.normal.fragment\n\n#define ROUGHNESS_CHANEL 0\n\nuniform bool useBumpMap;\nuniform bool useRoughnessMap;\nuniform bool doubleSide;\nuniform float roughness;\n\n@import ecgl.common.uv.fragmentHeader\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nuniform mat4 viewInverse : VIEWINVERSE;\n\n@import ecgl.common.normalMap.fragmentHeader\n@import ecgl.common.bumpMap.header\n\nuniform sampler2D roughnessMap;\n\nvoid main()\n{\n vec3 N = v_Normal;\n \n bool flipNormal = false;\n if (doubleSide) {\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(eyePos - v_WorldPosition);\n\n if (dot(N, V) < 0.0) {\n flipNormal = true;\n }\n }\n\n @import ecgl.common.normalMap.fragmentMain\n\n if (useBumpMap) {\n N = bumpNormal(v_WorldPosition, v_Normal, N);\n }\n\n float g = 1.0 - roughness;\n\n if (useRoughnessMap) {\n float g2 = 1.0 - texture2D(roughnessMap, v_DetailTexcoord)[ROUGHNESS_CHANEL];\n g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);\n }\n\n if (flipNormal) {\n N = -N;\n }\n\n gl_FragColor.rgb = (N.xyz + 1.0) * 0.5;\n gl_FragColor.a = g;\n}\n@end"),jy.prototype.getDepthTexture=function(){return this._depthTex},jy.prototype.getNormalTexture=function(){return this._normalTex},jy.prototype.update=function(e,n,t){var r=e.getWidth(),i=e.getHeight(),o=this._depthTex,d=this._normalTex,f=this._normalMaterial;o.width=r,o.height=i,d.width=r,d.height=i;var g=n.getRenderList(t).opaque;this._framebuffer.bind(e),e.gl.clearColor(0,0,0,0),e.gl.clear(e.gl.COLOR_BUFFER_BIT|e.gl.DEPTH_BUFFER_BIT),e.gl.disable(e.gl.BLEND),e.renderPass(g,t,{getMaterial:function(){return f},ifRender:function(_){return _.renderNormal},beforeRender:Nie(e,this._defaultNormalMap,this._defaultBumpMap,this._defaultRoughessMap),sort:e.opaqueSortCompare}),this._framebuffer.unbind(e)},jy.prototype.renderDebug=function(e){this._debugPass.render(e)},jy.prototype.dispose=function(e){this._depthTex.dispose(e),this._normalTex.dispose(e)};const Fie=jy;function vC(e){e=e||{},this._edgePass=new so({fragment:Yn.source("ecgl.edge")}),this._edgePass.setUniform("normalTexture",e.normalTexture),this._edgePass.setUniform("depthTexture",e.depthTexture),this._targetTexture=new Kr({type:fr.HALF_FLOAT}),this._frameBuffer=new ts,this._frameBuffer.attach(this._targetTexture)}vC.prototype.update=function(e,n,t,r){var i=e.getWidth(),o=e.getHeight(),d=this._targetTexture;d.width=i,d.height=o;var f=this._frameBuffer;f.bind(e),this._edgePass.setUniform("projectionInv",n.invProjectionMatrix.array),this._edgePass.setUniform("textureSize",[i,o]),this._edgePass.setUniform("texture",t),this._edgePass.render(e),f.unbind(e)},vC.prototype.getTargetTexture=function(){return this._targetTexture},vC.prototype.setParameter=function(e,n){this._edgePass.setUniform(e,n)},vC.prototype.dispose=function(e){this._targetTexture.dispose(e),this._frameBuffer.dispose(e)};const Bie=vC,Vie={type:"compositor",nodes:[{name:"source",type:"texture",outputs:{color:{}}},{name:"source_half",shader:"#source(clay.compositor.downsample)",inputs:{texture:"source"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"bright",shader:"#source(clay.compositor.bright)",inputs:{texture:"source_half"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{threshold:2,scale:4,textureSize:"expr([width * 1.0 / 2, height / 2])"}},{name:"bright_downsample_4",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 2, height / 2] )"}},{name:"bright_downsample_8",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_4"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 4, height / 4] )"}},{name:"bright_downsample_16",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_8"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 8, height / 8] )"}},{name:"bright_downsample_32",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_16"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 32)",height:"expr(height * 1.0 / 32)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 16, height / 16] )"}},{name:"bright_upsample_16_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_32"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 32, height / 32] )"}},{name:"bright_upsample_16_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_16_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 16, height * 1.0 / 16] )"}},{name:"bright_upsample_8_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_16"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 16, height * 1.0 / 16] )"}},{name:"bright_upsample_8_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_8_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 8, height * 1.0 / 8] )"}},{name:"bright_upsample_8_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_8_blur_v",texture2:"bright_upsample_16_blur_v"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_4_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_8"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 8, height * 1.0 / 8] )"}},{name:"bright_upsample_4_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_4_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 4, height * 1.0 / 4] )"}},{name:"bright_upsample_4_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_4_blur_v",texture2:"bright_upsample_8_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_2_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_4"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 4, height * 1.0 / 4] )"}},{name:"bright_upsample_2_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_2_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 2, height * 1.0 / 2] )"}},{name:"bright_upsample_2_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_2_blur_v",texture2:"bright_upsample_4_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_full_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 2, height * 1.0 / 2] )"}},{name:"bright_upsample_full_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_full_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"bloom_composite",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_full_blur_v",texture2:"bright_upsample_2_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"coc",shader:"#source(ecgl.dof.coc)",outputs:{color:{parameters:{minFilter:"NEAREST",magFilter:"NEAREST",width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},parameters:{focalDist:50,focalRange:30}},{name:"dof_far_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"source",coc:"coc"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"dof_near_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"source",coc:"coc"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"},defines:{BLUR_NEARFIELD:null}},{name:"dof_coc_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"coc"},outputs:{color:{parameters:{minFilter:"NEAREST",magFilter:"NEAREST",width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"},defines:{BLUR_COC:null}},{name:"dof_composite",shader:"#source(ecgl.dof.composite)",inputs:{original:"source",blurred:"dof_far_blur",nearfield:"dof_near_blur",coc:"coc",nearcoc:"dof_coc_blur"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}}},{name:"composite",shader:"#source(clay.compositor.hdr.composite)",inputs:{texture:"source",bloom:"bloom_composite"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},defines:{}},{name:"FXAA",shader:"#source(clay.compositor.fxaa)",inputs:{texture:"composite"}}]};function GW(e,n){return{color:{parameters:{width:e,height:n}}}}Yn.import(IW),Yn.import(PW),Yn.import(RW),Yn.import(LW),Yn.import(OW),Yn.import(kW),Yn.import(NW),Yn.import(FW),Yn.import(BW),Yn.import("@export ecgl.dof.coc\n\nuniform sampler2D depth;\n\nuniform float zNear: 0.1;\nuniform float zFar: 2000;\n\nuniform float focalDistance: 3;\nuniform float focalRange: 1;\nuniform float focalLength: 30;\nuniform float fstop: 2.8;\n\nvarying vec2 v_Texcoord;\n\n@import clay.util.encode_float\n\nvoid main()\n{\n float z = texture2D(depth, v_Texcoord).r * 2.0 - 1.0;\n\n float dist = 2.0 * zNear * zFar / (zFar + zNear - z * (zFar - zNear));\n\n float aperture = focalLength / fstop;\n\n float coc;\n\n float uppper = focalDistance + focalRange;\n float lower = focalDistance - focalRange;\n if (dist <= uppper && dist >= lower) {\n coc = 0.5;\n }\n else {\n float focalAdjusted = dist > uppper ? uppper : lower;\n\n coc = abs(aperture * (focalLength * (dist - focalAdjusted)) / (dist * (focalAdjusted - focalLength)));\n coc = clamp(coc, 0.0, 2.0) / 2.00001;\n\n if (dist < lower) {\n coc = -coc;\n }\n coc = coc * 0.5 + 0.5;\n }\n\n gl_FragColor = encodeFloat(coc);\n}\n@end\n\n\n@export ecgl.dof.composite\n\n#define DEBUG 0\n\nuniform sampler2D original;\nuniform sampler2D blurred;\nuniform sampler2D nearfield;\nuniform sampler2D coc;\nuniform sampler2D nearcoc;\nvarying vec2 v_Texcoord;\n\n@import clay.util.rgbm\n@import clay.util.float\n\nvoid main()\n{\n vec4 blurredColor = texture2D(blurred, v_Texcoord);\n vec4 originalColor = texture2D(original, v_Texcoord);\n\n float fCoc = decodeFloat(texture2D(coc, v_Texcoord));\n\n fCoc = abs(fCoc * 2.0 - 1.0);\n\n float weight = smoothstep(0.0, 1.0, fCoc);\n \n#ifdef NEARFIELD_ENABLED\n vec4 nearfieldColor = texture2D(nearfield, v_Texcoord);\n float fNearCoc = decodeFloat(texture2D(nearcoc, v_Texcoord));\n fNearCoc = abs(fNearCoc * 2.0 - 1.0);\n\n gl_FragColor = encodeHDR(\n mix(\n nearfieldColor, mix(originalColor, blurredColor, weight),\n pow(1.0 - fNearCoc, 4.0)\n )\n );\n#else\n gl_FragColor = encodeHDR(mix(originalColor, blurredColor, weight));\n#endif\n\n}\n\n@end\n\n\n\n@export ecgl.dof.diskBlur\n\n#define POISSON_KERNEL_SIZE 16;\n\nuniform sampler2D texture;\nuniform sampler2D coc;\nvarying vec2 v_Texcoord;\n\nuniform float blurRadius : 10.0;\nuniform vec2 textureSize : [512.0, 512.0];\n\nuniform vec2 poissonKernel[POISSON_KERNEL_SIZE];\n\nuniform float percent;\n\nfloat nrand(const in vec2 n) {\n return fract(sin(dot(n.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\n@import clay.util.rgbm\n@import clay.util.float\n\n\nvoid main()\n{\n vec2 offset = blurRadius / textureSize;\n\n float rnd = 6.28318 * nrand(v_Texcoord + 0.07 * percent );\n float cosa = cos(rnd);\n float sina = sin(rnd);\n vec4 basis = vec4(cosa, -sina, sina, cosa);\n\n#if !defined(BLUR_NEARFIELD) && !defined(BLUR_COC)\n offset *= abs(decodeFloat(texture2D(coc, v_Texcoord)) * 2.0 - 1.0);\n#endif\n\n#ifdef BLUR_COC\n float cocSum = 0.0;\n#else\n vec4 color = vec4(0.0);\n#endif\n\n\n float weightSum = 0.0;\n\n for (int i = 0; i < POISSON_KERNEL_SIZE; i++) {\n vec2 ofs = poissonKernel[i];\n\n ofs = vec2(dot(ofs, basis.xy), dot(ofs, basis.zw));\n\n vec2 uv = v_Texcoord + ofs * offset;\n vec4 texel = texture2D(texture, uv);\n\n float w = 1.0;\n#ifdef BLUR_COC\n float fCoc = decodeFloat(texel) * 2.0 - 1.0;\n cocSum += clamp(fCoc, -1.0, 0.0) * w;\n#else\n texel = texel;\n #if !defined(BLUR_NEARFIELD)\n float fCoc = decodeFloat(texture2D(coc, uv)) * 2.0 - 1.0;\n w *= abs(fCoc);\n #endif\n texel.rgb *= texel.a;\n color += texel * w;\n#endif\n\n weightSum += w;\n }\n\n#ifdef BLUR_COC\n gl_FragColor = encodeFloat(clamp(cocSum / weightSum, -1.0, 0.0) * 0.5 + 0.5);\n#else\n color /= weightSum;\n color.rgb /= (color.a + 0.0001);\n gl_FragColor = color;\n#endif\n}\n\n@end"),Yn.import("@export ecgl.edge\n\nuniform sampler2D texture;\n\nuniform sampler2D normalTexture;\nuniform sampler2D depthTexture;\n\nuniform mat4 projectionInv;\n\nuniform vec2 textureSize;\n\nuniform vec4 edgeColor: [0,0,0,0.8];\n\nvarying vec2 v_Texcoord;\n\nvec3 packColor(vec2 coord) {\n float z = texture2D(depthTexture, coord).r * 2.0 - 1.0;\n vec4 p = vec4(v_Texcoord * 2.0 - 1.0, z, 1.0);\n vec4 p4 = projectionInv * p;\n\n return vec3(\n texture2D(normalTexture, coord).rg,\n -p4.z / p4.w / 5.0\n );\n}\n\nvoid main() {\n vec2 cc = v_Texcoord;\n vec3 center = packColor(cc);\n\n float size = clamp(1.0 - (center.z - 10.0) / 100.0, 0.0, 1.0) * 0.5;\n float dx = size / textureSize.x;\n float dy = size / textureSize.y;\n\n vec2 coord;\n vec3 topLeft = packColor(cc+vec2(-dx, -dy));\n vec3 top = packColor(cc+vec2(0.0, -dy));\n vec3 topRight = packColor(cc+vec2(dx, -dy));\n vec3 left = packColor(cc+vec2(-dx, 0.0));\n vec3 right = packColor(cc+vec2(dx, 0.0));\n vec3 bottomLeft = packColor(cc+vec2(-dx, dy));\n vec3 bottom = packColor(cc+vec2(0.0, dy));\n vec3 bottomRight = packColor(cc+vec2(dx, dy));\n\n vec3 v = -topLeft-2.0*top-topRight+bottomLeft+2.0*bottom+bottomRight;\n vec3 h = -bottomLeft-2.0*left-topLeft+bottomRight+2.0*right+topRight;\n\n float edge = sqrt(dot(h, h) + dot(v, v));\n\n edge = smoothstep(0.8, 1.0, edge);\n\n gl_FragColor = mix(texture2D(texture, v_Texcoord), vec4(edgeColor.rgb, 1.0), edgeColor.a * edge);\n}\n@end");var uV=["composite","FXAA"];function di(){this._sourceTexture=new Kr({type:fr.HALF_FLOAT}),this._depthTexture=new Kr({format:fr.DEPTH_COMPONENT,type:fr.UNSIGNED_INT}),this._framebuffer=new ts,this._framebuffer.attach(this._sourceTexture),this._framebuffer.attach(this._depthTexture,ts.DEPTH_ATTACHMENT),this._normalPass=new Fie,this._compositor=function xie(e,n){var t=new lie;n=n||{};var r={textures:{},parameters:{}};for(var o in e.parameters)r.parameters[o]=lV(e.parameters[o]);return function Die(e,n,t,r){if(e.textures){var i={},o=0,d=!1,f=t.textureRootPath;qo.each(e.textures,function(g,_){var w,S=g.path,k=lV(g.parameters);if(Array.isArray(S)&&6===S.length)f&&(S=S.map(function(V){return qo.relative2absolute(V,f)})),w=new sC(k);else{if("string"!=typeof S)return;f&&(S=qo.relative2absolute(S,f)),w=new Kr(k)}w.load(S),o++,w.once("success",function(){i[_]=w,0==--o&&(r(i),d=!0)})}),0===o&&!d&&r(i)}else r({})}(e,0,n,function(f){r.textures=f,function(f,g){for(var _=0;_<e.nodes.length;_++){var S=wie(e.nodes[_],r,n);S&&t.addNode(S)}}()}),t}(Vie);var e=this._compositor.getNodeByName("source");e.texture=this._sourceTexture;var n=this._compositor.getNodeByName("coc");this._sourceNode=e,this._cocNode=n,this._compositeNode=this._compositor.getNodeByName("composite"),this._fxaaNode=this._compositor.getNodeByName("FXAA"),this._dofBlurNodes=["dof_far_blur","dof_near_blur","dof_coc_blur"].map(function(r){return this._compositor.getNodeByName(r)},this),this._dofBlurKernel=0,this._dofBlurKernelSize=new Float32Array(0),this._finalNodesChain=uV.map(function(r){return this._compositor.getNodeByName(r)},this);var t={normalTexture:this._normalPass.getNormalTexture(),depthTexture:this._normalPass.getDepthTexture()};this._ssaoPass=new Rie(t),this._ssrPass=new Oie(t),this._edgePass=new Bie(t)}di.prototype.resize=function(r,i,t){i*=t=t||1;var o=this._sourceTexture,d=this._depthTexture;o.width=r*=t,o.height=i,d.width=r,d.height=i;var f={getWidth:function(){return r},getHeight:function(){return i},getDevicePixelRatio:function(){return t}};function g(_,w){if("function"==typeof _[w]){var S=_[w].__original||_[w];_[w]=function(k){return S.call(this,f)},_[w].__original=S}}this._compositor.nodes.forEach(function(_){for(var w in _.outputs){var S=_.outputs[w].parameters;S&&(g(S,"width"),g(S,"height"))}for(var k in _.parameters)g(_.parameters,k)}),this._width=r,this._height=i,this._dpr=t},di.prototype.getWidth=function(){return this._width},di.prototype.getHeight=function(){return this._height},di.prototype._ifRenderNormalPass=function(){return this._enableSSAO||this._enableEdge||this._enableSSR},di.prototype._getPrevNode=function(e){for(var n=uV.indexOf(e.name)-1,t=this._finalNodesChain[n];t&&!this._compositor.getNodeByName(t.name);)t=this._finalNodesChain[n-=1];return t},di.prototype._getNextNode=function(e){for(var n=uV.indexOf(e.name)+1,t=this._finalNodesChain[n];t&&!this._compositor.getNodeByName(t.name);)t=this._finalNodesChain[n+=1];return t},di.prototype._addChainNode=function(e){var n=this._getPrevNode(e),t=this._getNextNode(e);!n||(e.inputs.texture=n.name,t?(e.outputs=GW(this.getWidth.bind(this),this.getHeight.bind(this)),t.inputs.texture=e.name):e.outputs=null,this._compositor.addNode(e))},di.prototype._removeChainNode=function(e){var n=this._getPrevNode(e),t=this._getNextNode(e);!n||(t?(n.outputs=GW(this.getWidth.bind(this),this.getHeight.bind(this)),t.inputs.texture=n.name):n.outputs=null,this._compositor.removeNode(e))},di.prototype.updateNormal=function(e,n,t,r){this._ifRenderNormalPass()&&this._normalPass.update(e,n,t)},di.prototype.updateSSAO=function(e,n,t,r){this._ssaoPass.update(e,t,r)},di.prototype.enableSSAO=function(){this._enableSSAO=!0},di.prototype.disableSSAO=function(){this._enableSSAO=!1},di.prototype.enableSSR=function(){this._enableSSR=!0},di.prototype.disableSSR=function(){this._enableSSR=!1},di.prototype.getSSAOTexture=function(){return this._ssaoPass.getTargetTexture()},di.prototype.getSourceFrameBuffer=function(){return this._framebuffer},di.prototype.getSourceTexture=function(){return this._sourceTexture},di.prototype.disableFXAA=function(){this._removeChainNode(this._fxaaNode)},di.prototype.enableFXAA=function(){this._addChainNode(this._fxaaNode)},di.prototype.enableBloom=function(){this._compositeNode.inputs.bloom="bloom_composite",this._compositor.dirty()},di.prototype.disableBloom=function(){this._compositeNode.inputs.bloom=null,this._compositor.dirty()},di.prototype.enableDOF=function(){this._compositeNode.inputs.texture="dof_composite",this._compositor.dirty()},di.prototype.disableDOF=function(){this._compositeNode.inputs.texture="source",this._compositor.dirty()},di.prototype.enableColorCorrection=function(){this._compositeNode.define("COLOR_CORRECTION"),this._enableColorCorrection=!0},di.prototype.disableColorCorrection=function(){this._compositeNode.undefine("COLOR_CORRECTION"),this._enableColorCorrection=!1},di.prototype.enableEdge=function(){this._enableEdge=!0},di.prototype.disableEdge=function(){this._enableEdge=!1},di.prototype.setBloomIntensity=function(e){this._compositeNode.setParameter("bloomIntensity",e)},di.prototype.setSSAOParameter=function(e,n){switch(e){case"quality":this._ssaoPass.setParameter("kernelSize",{low:6,medium:12,high:32,ultra:62}[n]||12);break;case"radius":this._ssaoPass.setParameter(e,n),this._ssaoPass.setParameter("bias",n/200);break;case"intensity":this._ssaoPass.setParameter(e,n)}},di.prototype.setDOFParameter=function(e,n){switch(e){case"focalDistance":case"focalRange":case"fstop":this._cocNode.setParameter(e,n);break;case"blurRadius":for(var t=0;t<this._dofBlurNodes.length;t++)this._dofBlurNodes[t].setParameter("blurRadius",n);break;case"quality":var r={low:4,medium:8,high:16,ultra:32}[n]||8;for(this._dofBlurKernelSize=r,t=0;t<this._dofBlurNodes.length;t++)this._dofBlurNodes[t].pass.material.define("POISSON_KERNEL_SIZE",r);this._dofBlurKernel=new Float32Array(2*r)}},di.prototype.setSSRParameter=function(e,n){if(null!=n)switch(e){case"quality":var r={low:32,medium:16,high:8,ultra:4}[n]||16;this._ssrPass.setParameter("maxIteration",{low:10,medium:15,high:30,ultra:80}[n]||20),this._ssrPass.setParameter("pixelStride",r);break;case"maxRoughness":this._ssrPass.setParameter("minGlossiness",Math.max(Math.min(1-n,1),0));break;case"physical":this.setPhysicallyCorrectSSR(n);break;default:console.warn("Unkown SSR parameter "+e)}},di.prototype.setPhysicallyCorrectSSR=function(e){this._ssrPass.setPhysicallyCorrect(e)},di.prototype.setEdgeColor=function(e){var n=lt.parseColor(e);this._edgePass.setParameter("edgeColor",n)},di.prototype.setExposure=function(e){this._compositeNode.setParameter("exposure",Math.pow(2,e))},di.prototype.setColorLookupTexture=function(e,n){this._compositeNode.pass.material.setTextureImage("lut",this._enableColorCorrection?e:"none",n,{minFilter:lt.Texture.NEAREST,magFilter:lt.Texture.NEAREST,flipY:!1})},di.prototype.setColorCorrection=function(e,n){this._compositeNode.setParameter(e,n)},di.prototype.isSSREnabled=function(){return this._enableSSR},di.prototype.composite=function(e,n,t,r,i){var o=this._sourceTexture,d=o;this._enableEdge&&(this._edgePass.update(e,t,o,i),o=d=this._edgePass.getTargetTexture()),this._enableSSR&&(this._ssrPass.update(e,t,o,i),d=this._ssrPass.getTargetTexture(),this._ssrPass.setSSAOTexture(this._enableSSAO?this._ssaoPass.getTargetTexture():null)),this._sourceNode.texture=d,this._cocNode.setParameter("depth",this._depthTexture);for(var f=this._dofBlurKernel,g=this._dofBlurKernelSize,w=i%Math.floor(UW.length/2/g),S=0;S<2*g;S++)f[S]=UW[S+w*g*2];for(S=0;S<this._dofBlurNodes.length;S++)this._dofBlurNodes[S].setParameter("percent",i/30),this._dofBlurNodes[S].setParameter("poissonKernel",f);this._cocNode.setParameter("zNear",t.near),this._cocNode.setParameter("zFar",t.far),this._compositor.render(e,r)},di.prototype.dispose=function(e){this._sourceTexture.dispose(e),this._depthTexture.dispose(e),this._framebuffer.dispose(e),this._compositor.dispose(e),this._normalPass.dispose(e),this._ssaoPass.dispose(e)};const Uie=di;function dV(e){for(var n=[],t=0;t<30;t++)n.push([Wy(t,2),Wy(t,3)]);this._haltonSequence=n,this._frame=0,this._sourceTex=new Kr,this._sourceFb=new ts,this._sourceFb.attach(this._sourceTex),this._prevFrameTex=new Kr,this._outputTex=new Kr;var r=this._blendPass=new so({fragment:Yn.source("clay.compositor.blend")});r.material.disableTexturesAll(),r.material.enableTexture(["texture1","texture2"]),this._blendFb=new ts({depthBuffer:!1}),this._outputPass=new so({fragment:Yn.source("clay.compositor.output"),blendWithPrevious:!0}),this._outputPass.material.define("fragment","OUTPUT_ALPHA"),this._outputPass.material.blend=function(i){i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD),i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA)}}dV.prototype={constructor:dV,jitterProjection:function(e,n){var t=e.viewport,r=t.devicePixelRatio||e.getDevicePixelRatio(),i=t.width*r,o=t.height*r,d=this._haltonSequence[this._frame%this._haltonSequence.length],f=new cr;f.array[12]=(2*d[0]-1)/i,f.array[13]=(2*d[1]-1)/o,cr.mul(n.projectionMatrix,f,n.projectionMatrix),cr.invert(n.invProjectionMatrix,n.projectionMatrix)},resetFrame:function(){this._frame=0},getFrame:function(){return this._frame},getSourceFrameBuffer:function(){return this._sourceFb},getOutputTexture:function(){return this._outputTex},resize:function(e,n){this._prevFrameTex.width=e,this._prevFrameTex.height=n,this._outputTex.width=e,this._outputTex.height=n,this._sourceTex.width=e,this._sourceTex.height=n,this._prevFrameTex.dirty(),this._outputTex.dirty(),this._sourceTex.dirty()},isFinished:function(){return this._frame>=this._haltonSequence.length},render:function(e,n,t){var r=this._blendPass;0===this._frame?(r.setUniform("weight1",0),r.setUniform("weight2",1)):(r.setUniform("weight1",.9),r.setUniform("weight2",.1)),r.setUniform("texture1",this._prevFrameTex),r.setUniform("texture2",n||this._sourceTex),this._blendFb.attach(this._outputTex),this._blendFb.bind(e),r.render(e),this._blendFb.unbind(e),t||(this._outputPass.setUniform("texture",this._outputTex),this._outputPass.render(e));var i=this._prevFrameTex;this._prevFrameTex=this._outputTex,this._outputTex=i,this._frame++},dispose:function(e){this._sourceFb.dispose(e),this._blendFb.dispose(e),this._prevFrameTex.dispose(e),this._outputTex.dispose(e),this._sourceTex.dispose(e),this._outputPass.dispose(e),this._blendPass.dispose(e)}};const Gie=dV;function _a(e){e=e||"perspective",this.layer=null,this.scene=new Bf,this.rootNode=this.scene,this.viewport={x:0,y:0,width:0,height:0},this.setProjection(e),this._compositor=new Uie,this._temporalSS=new Gie,this._shadowMapPass=new iie;for(var n=[],t=0,r=0;r<30;r++){for(var i=[],o=0;o<6;o++)i.push(4*Wy(t,2)-2),i.push(4*Wy(t,3)-2),t++;n.push(i)}this._pcfKernels=n,this.scene.on("beforerender",function(d,f,g){this.needsTemporalSS()&&this._temporalSS.jitterProjection(d,g)},this)}_a.prototype.setProjection=function(e){var n=this.camera;n&&n.update(),"perspective"===e?this.camera instanceof No||(this.camera=new No,n&&this.camera.setLocalTransform(n.localTransform)):this.camera instanceof zy||(this.camera=new zy,n&&this.camera.setLocalTransform(n.localTransform)),this.camera.near=.1,this.camera.far=2e3},_a.prototype.setViewport=function(e,n,t,r,i){this.camera instanceof No&&(this.camera.aspect=t/r),i=i||1,this.viewport.x=e,this.viewport.y=n,this.viewport.width=t,this.viewport.height=r,this.viewport.devicePixelRatio=i,this._compositor.resize(t*i,r*i),this._temporalSS.resize(t*i,r*i)},_a.prototype.containPoint=function(e,n){var t=this.viewport;return n=this.layer.renderer.getHeight()-n,e>=t.x&&n>=t.y&&e<=t.x+t.width&&n<=t.y+t.height};var WW=new Fl;_a.prototype.castRay=function(e,n,t){var r=this.layer.renderer,i=r.viewport;return r.viewport=this.viewport,r.screenToNDC(e,n,WW),this.camera.castRay(WW,t),r.viewport=i,t},_a.prototype.prepareRender=function(){this.scene.update(),this.camera.update(),this.scene.updateLights();var e=this.scene.updateRenderList(this.camera);this._needsSortProgressively=!1;for(var n=0;n<e.transparent.length;n++){var r=e.transparent[n].geometry;r.needsSortVerticesProgressively&&r.needsSortVerticesProgressively()&&(this._needsSortProgressively=!0),r.needsSortTrianglesProgressively&&r.needsSortTrianglesProgressively()&&(this._needsSortProgressively=!0)}this._frame=0,this._temporalSS.resetFrame()},_a.prototype.render=function(e,n){this._doRender(e,n,this._frame),this._frame++},_a.prototype.needsAccumulate=function(){return this.needsTemporalSS()||this._needsSortProgressively},_a.prototype.needsTemporalSS=function(){var e=this._enableTemporalSS;return"auto"===e&&(e=this._enablePostEffect),e},_a.prototype.hasDOF=function(){return this._enableDOF},_a.prototype.isAccumulateFinished=function(){return this.needsTemporalSS()?this._temporalSS.isFinished():this._frame>30},_a.prototype._doRender=function(e,n,t){var r=this.scene,i=this.camera;this._updateTransparent(e,r,i,t=t||0),n||(this._shadowMapPass.kernelPCF=this._pcfKernels[0],this._shadowMapPass.render(e,r,i,!0)),this._updateShadowPCFKernel(t);var o=e.clearColor;if(e.gl.clearColor(o[0],o[1],o[2],o[3]),this._enablePostEffect&&(this.needsTemporalSS()&&this._temporalSS.jitterProjection(e,i),this._compositor.updateNormal(e,r,i,this._temporalSS.getFrame())),this._updateSSAO(e,r,i,this._temporalSS.getFrame()),this._enablePostEffect)(d=this._compositor.getSourceFrameBuffer()).bind(e),e.gl.clear(e.gl.DEPTH_BUFFER_BIT|e.gl.COLOR_BUFFER_BIT),e.render(r,i,!0,!0),d.unbind(e),this.needsTemporalSS()&&n?(this._compositor.composite(e,r,i,this._temporalSS.getSourceFrameBuffer(),this._temporalSS.getFrame()),e.setViewport(this.viewport),this._temporalSS.render(e)):(e.setViewport(this.viewport),this._compositor.composite(e,r,i,null,0));else if(this.needsTemporalSS()&&n){var d;(d=this._temporalSS.getSourceFrameBuffer()).bind(e),e.saveClear(),e.clearBit=e.gl.DEPTH_BUFFER_BIT|e.gl.COLOR_BUFFER_BIT,e.render(r,i,!0,!0),e.restoreClear(),d.unbind(e),e.setViewport(this.viewport),this._temporalSS.render(e)}else e.setViewport(this.viewport),e.render(r,i,!0,!0)},_a.prototype._updateTransparent=function(e,n,t,r){for(var i=new On,o=new cr,d=t.getWorldPosition(),f=n.getRenderList(t).transparent,g=0;g<f.length;g++){var _=f[g],w=_.geometry;cr.invert(o,_.worldTransform),On.transformMat4(i,d,o),w.needsSortTriangles&&w.needsSortTriangles()&&w.doSortTriangles(i,r),w.needsSortVertices&&w.needsSortVertices()&&w.doSortVertices(i,r)}},_a.prototype._updateSSAO=function(e,n,t){var r=this._enableSSAO&&this._enablePostEffect;r&&this._compositor.updateSSAO(e,n,t,this._temporalSS.getFrame());for(var i=n.getRenderList(t),o=0;o<i.opaque.length;o++){var d=i.opaque[o];d.renderNormal&&d.material[r?"enableTexture":"disableTexture"]("ssaoMap"),r&&d.material.set("ssaoMap",this._compositor.getSSAOTexture())}},_a.prototype._updateShadowPCFKernel=function(e){for(var n=this._pcfKernels[e%this._pcfKernels.length],r=this.scene.getRenderList(this.camera).opaque,i=0;i<r.length;i++)r[i].receiveShadow&&(r[i].material.set("pcfKernel",n),r[i].material.define("fragment","PCF_KERNEL_SIZE",n.length/2))},_a.prototype.dispose=function(e){this._compositor.dispose(e.gl),this._temporalSS.dispose(e.gl),this._shadowMapPass.dispose(e)},_a.prototype.setPostEffect=function(e,n){var t=this._compositor;this._enablePostEffect=e.get("enable");var r=e.getModel("bloom"),i=e.getModel("edge"),o=e.getModel("DOF",e.getModel("depthOfField")),d=e.getModel("SSAO",e.getModel("screenSpaceAmbientOcclusion")),f=e.getModel("SSR",e.getModel("screenSpaceReflection")),g=e.getModel("FXAA"),_=e.getModel("colorCorrection");r.get("enable")?t.enableBloom():t.disableBloom(),o.get("enable")?t.enableDOF():t.disableDOF(),f.get("enable")?t.enableSSR():t.disableSSR(),_.get("enable")?t.enableColorCorrection():t.disableColorCorrection(),i.get("enable")?t.enableEdge():t.disableEdge(),g.get("enable")?t.enableFXAA():t.disableFXAA(),this._enableDOF=o.get("enable"),this._enableSSAO=d.get("enable"),this._enableSSAO?t.enableSSAO():t.disableSSAO(),t.setBloomIntensity(r.get("intensity")),t.setEdgeColor(i.get("color")),t.setColorLookupTexture(_.get("lookupTexture"),n),t.setExposure(_.get("exposure")),["radius","quality","intensity"].forEach(function(w){t.setSSAOParameter(w,d.get(w))}),["quality","maxRoughness","physical"].forEach(function(w){t.setSSRParameter(w,f.get(w))}),["quality","focalDistance","focalRange","blurRadius","fstop"].forEach(function(w){t.setDOFParameter(w,o.get(w))}),["brightness","contrast","saturation"].forEach(function(w){t.setColorCorrection(w,_.get(w))})},_a.prototype.setDOFFocusOnPoint=function(e){if(this._enablePostEffect)return e>this.camera.far||e<this.camera.near?void 0:(this._compositor.setDOFParameter("focalDistance",e),!0)},_a.prototype.setTemporalSuperSampling=function(e){this._enableTemporalSS=e.get("enable")},_a.prototype.isLinearSpace=function(){return this._enablePostEffect},_a.prototype.setRootNode=function(e){if(this.rootNode!==e){for(var n=this.rootNode.children(),t=0;t<n.length;t++)e.add(n[t]);e!==this.scene&&this.scene.add(e),this.rootNode=e}},_a.prototype.add=function(e){this.rootNode.add(e)},_a.prototype.remove=function(e){this.rootNode.remove(e)},_a.prototype.removeAll=function(e){this.rootNode.removeAll(e)},Object.assign(_a.prototype,yB);const zf=_a;function Wie(e,n){var t=e.getBoxLayoutParams(),r=(0,$2.ME)(t,{width:n.getWidth(),height:n.getHeight()});r.y=n.getHeight()-r.y-r.height,this.viewGL.setViewport(r.x,r.y,r.width,r.height,n.getDevicePixelRatio());var i=e.get("boxWidth"),o=e.get("boxHeight"),d=e.get("boxDepth");this.getAxis("x").setExtent(-i/2,i/2),this.getAxis("y").setExtent(d/2,-d/2),this.getAxis("z").setExtent(-o/2,o/2),this.size=[i,o,d]}function jie(e,n){var t={};e.eachSeries(function(i){if(i.coordinateSystem===this){var o=i.getData();["x","y","z"].forEach(function(d){o.mapDimensionsAll(d,!0).forEach(function(f){!function r(i,o){t[i]=t[i]||[1/0,-1/0],t[i][0]=Math.min(o[0],t[i][0]),t[i][1]=Math.max(o[1],t[i][1])}(d,o.getDataExtent(f,!0))})})}},this),["xAxis3D","yAxis3D","zAxis3D"].forEach(function(i){e.eachComponent(i,function(o){var d=i.charAt(0),f=o.getReferringComponents("grid3D").models[0],g=f.coordinateSystem;if(g===this){var _=g.getAxis(d);if(!_){var w=Ct._y.createScale(t[d]||[1/0,-1/0],o);(_=new eie(d,w)).type=o.get("type"),_.onBand="category"===_.type&&o.get("boundaryGap"),_.inverse=o.get("inverse"),o.axis=_,_.model=o,_.getLabelModel=function(){return o.getModel("axisLabel",f.getModel("axisLabel"))},_.getTickModel=function(){return o.getModel("axisTick",f.getModel("axisTick"))},g.addAxis(_)}}},this)},this),this.resize(this.model,n)}var Zie={dimensions:SW.prototype.dimensions,create:function(e,n){var t=[];e.eachComponent("grid3D",function(o){o.__viewGL=o.__viewGL||new zf;var d=new SW;d.model=o,d.viewGL=o.__viewGL,o.coordinateSystem=d,t.push(d),d.resize=Wie,d.update=jie});var r=["xAxis3D","yAxis3D","zAxis3D"];return e.eachSeries(function(o){if("cartesian3D"===o.get("coordinateSystem")){if(null==(d=o.getReferringComponents("grid3D").models[0])){var f=function i(o,d){return r.map(function(f){var g=o.getReferringComponents(f).models[0];return null==g&&(g=d.getComponent(f)),g})}(o,e),d=f[0].getCoordSysModel();f.forEach(function(w){w.getCoordSysModel()})}o.coordinateSystem=d.coordinateSystem}}),t}};const Yie=Zie;var jW=Ct.tF.extend({type:"cartesian3DAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid3D",index:this.option.gridIndex,id:this.option.gridId})[0]}});Ct._y.mixinAxisModelCommonMethods(jW);const Xie=jW;var ZW={show:!0,grid3DIndex:0,inverse:!1,name:"",nameLocation:"middle",nameTextStyle:{fontSize:16},nameGap:20,axisPointer:{},axisLine:{},axisTick:{},axisLabel:{},splitArea:{}},$ie=Ct.D5.merge({boundaryGap:!0,axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"},axisPointer:{label:{show:!1}}},ZW),hV=Ct.D5.merge({boundaryGap:[0,0],splitNumber:5,axisPointer:{label:{}}},ZW),Kie=Ct.D5.defaults({scale:!0,min:"dataMin",max:"dataMax"},hV),YW=Ct.D5.defaults({logBase:10},hV);YW.scale=!0;const Qie={categoryAxis3D:$ie,valueAxis3D:hV,timeAxis3D:Kie,logAxis3D:YW};var qie=z(6681),Jie=["value","category","time","log"];function tae(e,n){return n.type||(n.data?"category":"value")}(0,Ct.D$)(function nae(e){e.registerComponentModel(jre),e.registerComponentView(Jre),e.registerCoordinateSystem("grid3D",Yie),["x","y","z"].forEach(function(n){!function eae(e,n,t,r,i){Jie.forEach(function(o){var d=t.extend({type:n+"Axis3D."+o,__ordinalMeta:null,mergeDefaultAndTheme:function(f,g){var _=g.getTheme();Ct.D5.merge(f,_.get(o+"Axis3D")),Ct.D5.merge(f,this.getDefaultOption()),f.type=r(n,f)},optionUpdated:function(){"category"===this.option.type&&(this.__ordinalMeta=qie.Z.createByAxisModel(this))},getCategories:function(){if("category"===this.option.type)return this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:Ct.D5.merge(Ct.D5.clone(Qie[o+"Axis3D"]),i||{},!0)});e.registerComponentModel(d)}),e.registerSubTypeDefaulter(n+"Axis3D",Ct.D5.curry(r,n))}(e,n,Xie,tae,{name:n.toUpperCase()});const t=e.ComponentView.extend({type:n+"Axis3D"});e.registerComponentView(t)}),e.registerAction({type:"grid3DChangeCamera",event:"grid3dcamerachanged",update:"series:updateCamera"},function(n,t){t.eachComponent({mainType:"grid3D",query:n},function(r){r.setView(n)})}),e.registerAction({type:"grid3DShowAxisPointer",event:"grid3dshowaxispointer",update:"grid3D:showAxisPointer"},function(n,t){}),e.registerAction({type:"grid3DHideAxisPointer",event:"grid3dhideaxispointer",update:"grid3D:hideAxisPointer"},function(n,t){})});const Zy={defaultOption:{shading:null,realisticMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},lambertMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},colorMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},hatchingMaterial:{textureTiling:1,textureOffset:0,paperColor:"#fff"}}},XW={getFilledRegions:function(e,n){var r,t=(e||[]).slice();if("string"==typeof n?r=(n=Ct.FU(n))&&n.geoJson:n&&n.features&&(r=n),!r)return[];for(var i={},o=r.features,d=0;d<t.length;d++)i[t[d].name]=t[d];for(d=0;d<o.length;d++){var f=o[d].properties.name;i[f]||t.push({name:f})}return t},defaultOption:{show:!0,zlevel:-10,map:"",left:0,top:0,width:"100%",height:"100%",boxWidth:100,boxHeight:10,boxDepth:"auto",regionHeight:3,environment:"auto",groundPlane:{show:!1,color:"#aaa"},shading:"lambert",light:{main:{alpha:40,beta:30}},viewControl:{alpha:40,beta:0,distance:100,orthographicSize:60,minAlpha:5,minBeta:-80,maxBeta:80},label:{show:!1,distance:2,textStyle:{fontSize:20,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:4}},itemStyle:{color:"#fff",borderWidth:0,borderColor:"#333"},emphasis:{itemStyle:{color:"#639fc0"},label:{show:!0}}}};var Yy=Ct.tF.extend({type:"geo3D",layoutMode:"box",coordinateSystem:null,optionUpdated:function(){var e=this.option;e.regions=this.getFilledRegions(e.regions,e.map);var n=Ct._y.createDimensions(e.data||[],{coordDimensions:["value"],encodeDefine:this.get("encode"),dimensionsDefine:this.get("dimensions")}),t=new Ct.aV(n,this);t.initData(e.regions);var r={};t.each(function(i){var o=t.getName(i),d=t.getItemModel(i);r[o]=d}),this._regionModelMap=r,this._data=t},getData:function(){return this._data},getRegionModel:function(e){var n=this.getData().getName(e);return this._regionModelMap[n]||new Ct.Hn(null,this)},getRegionPolygonCoords:function(e){var n=this.getData().getName(e),t=this.coordinateSystem.getRegion(n);return t?t.geometries:[]},getFormattedLabel:function(e,n){var t=this._data.getName(e),r=this.getRegionModel(e),i=r.get("normal"===n?["label","formatter"]:["emphasis","label","formatter"]);null==i&&(i=r.get(["label","formatter"]));var o={name:t};return"function"==typeof i?(o.status=n,i(o)):"string"==typeof i?i.replace("{a}",o.seriesName??""):t},defaultOption:{regions:[]}});Ct.D5.merge(Yy.prototype,XW),Ct.D5.merge(Yy.prototype,z2),Ct.D5.merge(Yy.prototype,Hy),Ct.D5.merge(Yy.prototype,Uy),Ct.D5.merge(Yy.prototype,Zy);const rae=Yy,iae=$W;function $W(e,n,t){t=t||2;var f,g,_,w,S,k,V,r=n&&n.length,i=r?n[0]*t:e.length,o=KW(e,0,i,t,!0),d=[];if(!o)return d;if(r&&(o=function cae(e,n,t,r){var o,d,_,i=[];for(o=0,d=n.length;o<d;o++)(_=KW(e,n[o]*r,o<d-1?n[o+1]*r:e.length,r,!1))===_.next&&(_.steiner=!0),i.push(gae(_));for(i.sort(uae),o=0;o<i.length;o++)dae(i[o],t),t=mC(t,t.next);return t}(e,n,o,t)),e.length>80*t){f=_=e[0],g=w=e[1];for(var ne=t;ne<i;ne+=t)(S=e[ne])<f&&(f=S),(k=e[ne+1])<g&&(g=k),S>_&&(_=S),k>w&&(w=k);V=Math.max(_-f,w-g)}return _C(o,d,t,f,g,V),d}function KW(e,n,t,r,i){var o,d;if(i===gV(e,n,t,r)>0)for(o=n;o<t;o+=r)d=JW(o,e[o],e[o+1],d);else for(o=t-r;o>=n;o-=r)d=JW(o,e[o],e[o+1],d);return d&&yv(d,d.next)&&(bC(d),d=d.next),d}function mC(e,n){if(!e)return e;n||(n=e);var r,t=e;do{if(r=!1,t.steiner||!yv(t,t.next)&&0!==Ys(t.prev,t,t.next))t=t.next;else{if(bC(t),(t=n=t.prev)===t.next)return null;r=!0}}while(r||t!==n);return n}function _C(e,n,t,r,i,o,d){if(e){!d&&o&&function fae(e,n,t,r){var i=e;do{null===i.z&&(i.z=fV(i.x,i.y,n,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function pae(e){var n,t,r,i,o,d,f,g,_=1;do{for(t=e,e=null,o=null,d=0;t;){for(d++,r=t,f=0,n=0;n<_&&(f++,r=r.nextZ);n++);for(g=_;f>0||g>0&&r;)0!==f&&(0===g||!r||t.z<=r.z)?(i=t,t=t.nextZ,f--):(i=r,r=r.nextZ,g--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;t=r}o.nextZ=null,_*=2}while(d>1)}(i)}(e,r,i,o);for(var g,_,f=e;e.prev!==e.next;)if(g=e.prev,_=e.next,o?oae(e,r,i,o):aae(e))n.push(g.i/t),n.push(e.i/t),n.push(_.i/t),bC(e),e=_.next,f=_.next;else if((e=_)===f){d?1===d?_C(e=sae(e,n,t),n,t,r,i,o,2):2===d&&lae(e,n,t,r,i,o):_C(mC(e),n,t,r,i,o,1);break}}}function aae(e){var n=e.prev,t=e,r=e.next;if(Ys(n,t,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(K2(n.x,n.y,t.x,t.y,r.x,r.y,i.x,i.y)&&Ys(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function oae(e,n,t,r){var i=e.prev,o=e,d=e.next;if(Ys(i,o,d)>=0)return!1;for(var _=i.x>o.x?i.x>d.x?i.x:d.x:o.x>d.x?o.x:d.x,w=i.y>o.y?i.y>d.y?i.y:d.y:o.y>d.y?o.y:d.y,S=fV(i.x<o.x?i.x<d.x?i.x:d.x:o.x<d.x?o.x:d.x,i.y<o.y?i.y<d.y?i.y:d.y:o.y<d.y?o.y:d.y,n,t,r),k=fV(_,w,n,t,r),V=e.nextZ;V&&V.z<=k;){if(V!==e.prev&&V!==e.next&&K2(i.x,i.y,o.x,o.y,d.x,d.y,V.x,V.y)&&Ys(V.prev,V,V.next)>=0)return!1;V=V.nextZ}for(V=e.prevZ;V&&V.z>=S;){if(V!==e.prev&&V!==e.next&&K2(i.x,i.y,o.x,o.y,d.x,d.y,V.x,V.y)&&Ys(V.prev,V,V.next)>=0)return!1;V=V.prevZ}return!0}function sae(e,n,t){var r=e;do{var i=r.prev,o=r.next.next;!yv(i,o)&&QW(i,r,r.next,o)&&yC(i,o)&&yC(o,i)&&(n.push(i.i/t),n.push(r.i/t),n.push(o.i/t),bC(r),bC(r.next),r=e=o),r=r.next}while(r!==e);return r}function lae(e,n,t,r,i,o){var d=e;do{for(var f=d.next.next;f!==d.prev;){if(d.i!==f.i&&vae(d,f)){var g=qW(d,f);return d=mC(d,d.next),g=mC(g,g.next),_C(d,n,t,r,i,o),void _C(g,n,t,r,i,o)}f=f.next}d=d.next}while(d!==e)}function uae(e,n){return e.x-n.x}function dae(e,n){if(n=function hae(e,n){var d,t=n,r=e.x,i=e.y,o=-1/0;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){var f=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=r&&f>o){if(o=f,f===r){if(i===t.y)return t;if(i===t.next.y)return t.next}d=t.x<t.next.x?t:t.next}}t=t.next}while(t!==n);if(!d)return null;if(r===o)return d.prev;var k,g=d,_=d.x,w=d.y,S=1/0;for(t=d.next;t!==g;)r>=t.x&&t.x>=_&&r!==t.x&&K2(i<w?r:o,i,_,w,i<w?o:r,i,t.x,t.y)&&((k=Math.abs(i-t.y)/(r-t.x))<S||k===S&&t.x>d.x)&&yC(t,e)&&(d=t,S=k),t=t.next;return d}(e,n),n){var t=qW(n,e);mC(t,t.next)}}function fV(e,n,t,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-t)/i)|e<<8))|e<<4))|e<<2))|e<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-r)/i)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function gae(e){var n=e,t=e;do{n.x<t.x&&(t=n),n=n.next}while(n!==e);return t}function K2(e,n,t,r,i,o,d,f){return(i-d)*(n-f)-(e-d)*(o-f)>=0&&(e-d)*(r-f)-(t-d)*(n-f)>=0&&(t-d)*(o-f)-(i-d)*(r-f)>=0}function vae(e,n){return e.next.i!==n.i&&e.prev.i!==n.i&&!function mae(e,n){var t=e;do{if(t.i!==e.i&&t.next.i!==e.i&&t.i!==n.i&&t.next.i!==n.i&&QW(t,t.next,e,n))return!0;t=t.next}while(t!==e);return!1}(e,n)&&yC(e,n)&&yC(n,e)&&function _ae(e,n){var t=e,r=!1,i=(e.x+n.x)/2,o=(e.y+n.y)/2;do{t.y>o!=t.next.y>o&&t.next.y!==t.y&&i<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next}while(t!==e);return r}(e,n)}function Ys(e,n,t){return(n.y-e.y)*(t.x-n.x)-(n.x-e.x)*(t.y-n.y)}function yv(e,n){return e.x===n.x&&e.y===n.y}function QW(e,n,t,r){return!!(yv(e,n)&&yv(t,r)||yv(e,r)&&yv(t,n))||Ys(e,n,t)>0!=Ys(e,n,r)>0&&Ys(t,r,e)>0!=Ys(t,r,n)>0}function yC(e,n){return Ys(e.prev,e,e.next)<0?Ys(e,n,e.next)>=0&&Ys(e,e.prev,n)>=0:Ys(e,n,e.prev)<0||Ys(e,e.next,n)<0}function qW(e,n){var t=new pV(e.i,e.x,e.y),r=new pV(n.i,n.x,n.y),i=e.next,o=n.prev;return e.next=n,n.prev=e,t.next=i,i.prev=t,r.next=t,t.prev=r,o.next=r,r.prev=o,r}function JW(e,n,t,r){var i=new pV(e,n,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function bC(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function pV(e,n,t){this.i=e,this.x=n,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function gV(e,n,t,r){for(var i=0,o=n,d=t-r;o<t;o+=r)i+=(e[d]-e[o])*(e[o+1]+e[d+1]),d=o;return i}function vV(e,n,t){var r=e[n];e[n]=e[t],e[t]=r}function ej(e,n,t,r,i){var o=t,d=e[n];vV(e,n,r);for(var f=t;f<r;f++)i(e[f],d)<0&&(vV(e,f,o),o++);return vV(e,r,o),o}function Q2(e,n,t,r){if(t<r){var o=ej(e,Math.floor((t+r)/2),t,r,n);Q2(e,n,t,o-1),Q2(e,n,o+1,r)}}function mV(){this._parts=[]}$W.deviation=function(e,n,t,r){var i=n&&n.length,d=Math.abs(gV(e,0,i?n[0]*t:e.length,t));if(i)for(var f=0,g=n.length;f<g;f++)d-=Math.abs(gV(e,n[f]*t,f<g-1?n[f+1]*t:e.length,t));var S=0;for(f=0;f<r.length;f+=3){var k=r[f]*t,V=r[f+1]*t,ne=r[f+2]*t;S+=Math.abs((e[k]-e[ne])*(e[V+1]-e[k+1])-(e[k]-e[V])*(e[ne+1]-e[k+1]))}return 0===d&&0===S?0:Math.abs((S-d)/d)},mV.prototype.step=function(e,n,t){var r=e.length;if(0===t){this._parts=[],this._sorted=!1;var i=Math.floor(r/2);this._parts.push({pivot:i,left:0,right:r-1}),this._currentSortPartIdx=0}if(!this._sorted){var o=this._parts;if(0===o.length)return this._sorted=!0,!0;if(o.length<512){for(var d=0;d<o.length;d++)o[d].pivot=ej(e,o[d].pivot,o[d].left,o[d].right,n);var f=[];for(d=0;d<o.length;d++){var g,_;(_=o[d].pivot-1)>(g=o[d].left)&&f.push({pivot:Math.floor((_+g)/2),left:g,right:_}),(_=o[d].right)>(g=o[d].pivot+1)&&f.push({pivot:Math.floor((_+g)/2),left:g,right:_})}o=this._parts=f}else for(d=0;d<Math.floor(o.length/10);d++){var w=o.length-1-this._currentSortPartIdx;if(Q2(e,n,o[w].left,o[w].right),this._currentSortPartIdx++,this._currentSortPartIdx===o.length)return this._sorted=!0,!0}return!1}},mV.sort=Q2;const q2=mV;var Xy=Ka.vec3,tj=Xy.create(),nj=Xy.create(),rj=Xy.create();const _V={needsSortTriangles:function(){return this.indices&&this.sortTriangles},needsSortTrianglesProgressively:function(){return this.needsSortTriangles()&&this.triangleCount>=2e4},doSortTriangles:function(e,n){var t=this.indices;if(0===n){var r=this.attributes.position;e=e.array,(!this._triangleZList||this._triangleZList.length!==this.triangleCount)&&(this._triangleZList=new Float32Array(this.triangleCount),this._sortedTriangleIndices=new Uint32Array(this.triangleCount),this._indicesTmp=new t.constructor(t.length),this._triangleZListTmp=new Float32Array(this.triangleCount));for(var o,i=0,d=0;d<t.length;){r.get(t[d++],tj),r.get(t[d++],nj),r.get(t[d++],rj);var f=Xy.sqrDist(tj,e),g=Xy.sqrDist(nj,e),_=Xy.sqrDist(rj,e),w=Math.min(f,g);w=Math.min(w,_),3===d?(o=w,w=0):w-=o,this._triangleZList[i++]=w}}var S=this._sortedTriangleIndices;for(d=0;d<S.length;d++)S[d]=d;if(this.triangleCount<2e4)0===n&&this._simpleSort(!0);else for(d=0;d<3;d++)this._progressiveQuickSort(3*n+d);var k=this._indicesTmp,V=this._triangleZListTmp,ne=this._triangleZList;for(d=0;d<this.triangleCount;d++){var pe=3*S[d],De=3*d;k[De++]=t[pe++],k[De++]=t[pe++],k[De]=t[pe],V[d]=ne[S[d]]}var Re=this._indicesTmp;this._indicesTmp=this.indices,this.indices=Re,Re=this._triangleZListTmp,this._triangleZListTmp=this._triangleZList,this._triangleZList=Re,this.dirtyIndices()},_simpleSort:function(e){var n=this._triangleZList,t=this._sortedTriangleIndices;function r(i,o){return n[o]-n[i]}e?Array.prototype.sort.call(t,r):q2.sort(t,r,0,t.length-1)},_progressiveQuickSort:function(e){var n=this._triangleZList,t=this._sortedTriangleIndices;this._quickSort=this._quickSort||new q2,this._quickSort.step(t,function(r,i){return n[i]-n[r]},e)}};function Fo(e,n){const t=e.getItemVisual(n,"style");if(t)return t[e.getVisual("drawType")]}function Bo(e,n){const t=e.getItemVisual(n,"style");return t&&t.opacity}function bv(e,n,t){this._labelsMesh=new nV,this._labelTextureSurface=new JB({width:512,height:512,devicePixelRatio:t.getDevicePixelRatio(),onupdate:function(){t.getZr().refresh()}}),this._api=t,this._labelsMesh.material.set("textureAtlas",this._labelTextureSurface.getTexture())}bv.prototype.getLabelPosition=function(e,n,t){return[0,0,0]},bv.prototype.getLabelDistance=function(e,n,t){return 0},bv.prototype.getMesh=function(){return this._labelsMesh},bv.prototype.updateData=function(e,n,t){null==n&&(n=0),null==t&&(t=e.count()),(!this._labelsVisibilitiesBits||this._labelsVisibilitiesBits.length!==t-n)&&(this._labelsVisibilitiesBits=new Uint8Array(t-n));for(var r=["label","show"],i=["emphasis","label","show"],o=n;o<t;o++){var d=e.getItemModel(o),f=d.get(r),g=d.get(i);null==g&&(g=f),this._labelsVisibilitiesBits[o-n]=(f?1:0)|(g?2:0)}this._start=n,this._end=t,this._data=e},bv.prototype.updateLabels=function(e){if(this._data){for(var n=(e=e||[]).length>0,t={},r=0;r<e.length;r++)t[e[r]]=!0;this._labelsMesh.geometry.convertToDynamicArray(!0),this._labelTextureSurface.clear();for(var i=["label"],o=["emphasis","label"],d=this._data.hostModel,f=this._data,g=d.getModel(i),_=d.getModel(o,g),w={left:"right",right:"left",top:"center",bottom:"center"},S={left:"middle",right:"middle",top:"bottom",bottom:"top"},k=this._start;k<this._end;k++){var V=!1;if(n&&t[k]&&(V=!0),this._labelsVisibilitiesBits[k-this._start]&(V?2:1)){var De=f.getItemModel(k).getModel(V?o:i,V?_:g),Re=De.get("distance")||0,Fe=De.get("position"),ke=this._api.getDevicePixelRatio(),Be=d.getFormattedLabel(k,V?"emphasis":"normal");if(null==Be||""===Be)return;var at=new Ct.Q.Text({style:(0,U2.Lr)(De,{text:Be,fill:De.get("color")||Fo(f,k)||"#000",align:"left",verticalAlign:"top",opacity:Jr.firstNotNull(De.get("opacity"),Bo(f,k),1)})}),ot=at.getBoundingRect();ot.height*=1.2;var yt=this._labelTextureSurface.add(at),Ht=w[Fe]||"center",rn=S[Fe]||"bottom";this._labelsMesh.geometry.addSprite(this.getLabelPosition(k,Fe,Re),[ot.width*ke,ot.height*ke],yt,Ht,rn,this.getLabelDistance(k,Fe,Re)*ke)}}this._labelsMesh.material.set("uvScale",this._labelTextureSurface.getCoordsScale()),this._labelTextureSurface.getZr().refreshImmediately(),this._labelsMesh.geometry.convertToTypedArray(),this._labelsMesh.geometry.dirty()}},bv.prototype.dispose=function(){this._labelTextureSurface.dispose()};const yV=bv;var gl=Ka.vec3;function bV(e){this.rootNode=new lt.Node,this._triangulationResults={},this._shadersMap=lt.COMMON_SHADERS.filter(function(t){return"shadow"!==t}).reduce(function(t,r){return t[r]=lt.createShader("ecgl."+r),t},{}),this._linesShader=lt.createShader("ecgl.meshLines3D");var n={};lt.COMMON_SHADERS.forEach(function(t){n[t]=new lt.Material({shader:lt.createShader("ecgl."+t)})}),this._groundMaterials=n,this._groundMesh=new lt.Mesh({geometry:new lt.PlaneGeometry({dynamic:!0}),castShadow:!1,renderNormal:!0,$ignorePicking:!0}),this._groundMesh.rotation.rotateX(-Math.PI/2),this._labelsBuilder=new yV(512,512,e),this._labelsBuilder.getMesh().renderOrder=100,this._labelsBuilder.getMesh().material.depthTest=!1,this.rootNode.add(this._labelsBuilder.getMesh()),this._initMeshes(),this._api=e}lt.Shader.import(Z2),bV.prototype={constructor:bV,extrudeY:!0,update:function(e,n,t,r,i){var o=e.getData();null==r&&(r=0),null==i&&(i=o.count()),this._startIndex=r,this._endIndex=i-1,this._triangulation(e,r,i);var d=this._getShader(e.get("shading"));this._prepareMesh(e,d,t,r,i),this.rootNode.updateWorldTransform(),this._updateRegionMesh(e,t,r,i);var f=e.coordinateSystem;"geo3D"===f.type&&this._updateGroundPlane(e,f,t);var g=this;this._labelsBuilder.updateData(o,r,i),this._labelsBuilder.getLabelPosition=function(_,w,S){var k=o.getName(_),ne=S;if("geo3D"===f.type){var pe=f.getRegion(k);return pe?(V=pe.getCenter(),f.dataToPoint([V[0],V[1],ne])):[NaN,NaN,NaN]}var Re=g._triangulationResults[_-g._startIndex],V=g.extrudeY?[(Re.max[0]+Re.min[0])/2,Re.max[1]+ne,(Re.max[2]+Re.min[2])/2]:[(Re.max[0]+Re.min[0])/2,(Re.max[1]+Re.min[1])/2,Re.max[2]+ne]},this._data=o,this._labelsBuilder.updateLabels(),this._updateDebugWireframe(e),this._lastHoverDataIndex=0},_initMeshes:function(){var e=this,t=function n(){var i=new lt.Mesh({name:"Polygon",material:new lt.Material({shader:e._shadersMap.lambert}),geometry:new lt.Geometry({sortTriangles:!0,dynamic:!0}),culling:!1,ignorePicking:!0,renderNormal:!0});return Object.assign(i.geometry,_V),i}(),r=new lt.Mesh({material:new lt.Material({shader:this._linesShader}),castShadow:!1,ignorePicking:!0,$ignorePicking:!0,geometry:new pv({useNativeLine:!1})});this.rootNode.add(t),this.rootNode.add(r),t.material.define("both","VERTEX_COLOR"),t.material.define("fragment","DOUBLE_SIDED"),this._polygonMesh=t,this._linesMesh=r,this.rootNode.add(this._groundMesh)},_getShader:function(e){var n=this._shadersMap[e];return n||(n=this._shadersMap.lambert),n.__shading=e,n},_prepareMesh:function(e,n,t,r,i){for(var o=0,d=0,f=0,g=0,_=r;_<i;_++){var w=this._getRegionPolygonInfo(_),S=this._getRegionLinesInfo(_,e,this._linesMesh.geometry);o+=w.vertexCount,d+=w.triangleCount,f+=S.vertexCount,g+=S.triangleCount}var k=this._polygonMesh,V=k.geometry;["position","normal","texcoord0","color"].forEach(function(ne){V.attributes[ne].init(o)}),V.indices=o>65535?new Uint32Array(3*d):new Uint16Array(3*d),k.material.shader!==n&&k.material.attachShader(n,!0),lt.setMaterialFromModel(n.__shading,k.material,e,t),f>0&&(this._linesMesh.geometry.resetOffset(),this._linesMesh.geometry.setVertexCount(f),this._linesMesh.geometry.setTriangleCount(g)),this._dataIndexOfVertex=new Uint32Array(o),this._vertexRangeOfDataIndex=new Uint32Array(2*(i-r))},_updateRegionMesh:function(e,n,t,r){for(var i=e.getData(),o=0,d=0,f=!1,ot=this._polygonMesh,g=this._linesMesh,_=t;_<r;_++){var w=e.getRegionModel(_),S=w.getModel("itemStyle"),k=Jr.firstNotNull(Fo(i,_),S.get("color"),"#fff"),V=Jr.firstNotNull(Bo(i,_),S.get("opacity"),1),ne=lt.parseColor(k),pe=lt.parseColor(S.get("borderColor"));ne[3]*=V,pe[3]*=V;var De=ne[3]<.99;ot.material.set("color",[1,1,1,1]),f=f||De;for(var Re=Jr.firstNotNull(w.get("height",!0),e.get("regionHeight")),Fe=this._updatePolygonGeometry(e,ot.geometry,_,Re,o,d,ne),ke=o;ke<Fe.vertexOffset;ke++)this._dataIndexOfVertex[ke]=_;this._vertexRangeOfDataIndex[2*(_-t)]=o,this._vertexRangeOfDataIndex[2*(_-t)+1]=Fe.vertexOffset,o=Fe.vertexOffset,d=Fe.triangleOffset;var Be=S.get("borderWidth"),at=Be>0;at&&(Be*=n.getDevicePixelRatio(),this._updateLinesGeometry(g.geometry,e,_,Re,Be,e.coordinateSystem.transform)),g.invisible=!at,g.material.set({color:pe})}(ot=this._polygonMesh).material.transparent=f,ot.material.depthMask=!f,ot.geometry.updateBoundingBox(),ot.frontFace=this.extrudeY?lt.Mesh.CCW:lt.Mesh.CW,ot.material.get("normalMap")&&ot.geometry.generateTangents(),ot.seriesIndex=e.seriesIndex,ot.on("mousemove",this._onmousemove,this),ot.on("mouseout",this._onmouseout,this)},_updateDebugWireframe:function(e){var n=e.getModel("debug.wireframe");if(n.get("show")){var t=lt.parseColor(n.get("lineStyle.color")||"rgba(0,0,0,0.5)"),r=Jr.firstNotNull(n.get("lineStyle.width"),1),i=this._polygonMesh;i.geometry.generateBarycentric(),i.material.define("both","WIREFRAME_TRIANGLE"),i.material.set("wireframeLineColor",t),i.material.set("wireframeLineWidth",r)}},_onmousemove:function(e){var n=this._dataIndexOfVertex[e.triangle[0]];null==n&&(n=-1),n!==this._lastHoverDataIndex&&(this.downplay(this._lastHoverDataIndex),this.highlight(n),this._labelsBuilder.updateLabels([n])),this._lastHoverDataIndex=n,this._polygonMesh.dataIndex=n},_onmouseout:function(e){e.target&&(this.downplay(this._lastHoverDataIndex),this._lastHoverDataIndex=-1,this._polygonMesh.dataIndex=-1),this._labelsBuilder.updateLabels([])},_updateGroundPlane:function(e,n,t){var r=e.getModel("groundPlane",e);if(this._groundMesh.invisible=!r.get("show",!0),!this._groundMesh.invisible){var i=e.get("shading"),o=this._groundMaterials[i];o||(o=this._groundMaterials.lambert),lt.setMaterialFromModel(i,o,r,t),o.get("normalMap")&&this._groundMesh.geometry.generateTangents(),this._groundMesh.material=o,this._groundMesh.material.set("color",lt.parseColor(r.get("color"))),this._groundMesh.scale.set(n.size[0],n.size[2],1)}},_triangulation:function(e,n,t){this._triangulationResults=[];for(var r=[1/0,1/0,1/0],i=[-1/0,-1/0,-1/0],o=e.coordinateSystem,d=n;d<t;d++){for(var f=[],g=e.getRegionPolygonCoords(d),_=0;_<g.length;_++){var w=g[_].exterior,S=g[_].interiors,k=[],V=[];if(!(w.length<3)){for(var ne=0,pe=0;pe<w.length;pe++)k[ne++]=(De=w[pe])[0],k[ne++]=De[1];for(pe=0;pe<S.length;pe++)if(!(S[pe].length<3)){for(var Re=k.length/2,Fe=0;Fe<S[pe].length;Fe++){var De;k.push((De=S[pe][Fe])[0]),k.push(De[1])}V.push(Re)}var ke=iae(k,V),Be=new Float64Array(k.length/2*3),at=[],ot=[1/0,1/0,1/0],St=[-1/0,-1/0,-1/0],yt=0;for(pe=0;pe<k.length;)gl.set(at,k[pe++],0,k[pe++]),o&&o.transform&&gl.transformMat4(at,at,o.transform),gl.min(ot,ot,at),gl.max(St,St,at),Be[yt++]=at[0],Be[yt++]=at[1],Be[yt++]=at[2];gl.min(r,r,ot),gl.max(i,i,St),f.push({points:Be,indices:ke,min:ot,max:St})}}this._triangulationResults.push(f)}this._geoBoundingBox=[r,i]},_getRegionPolygonInfo:function(e){for(var n=this._triangulationResults[e-this._startIndex],t=0,r=0,i=0;i<n.length;i++)t+=n[i].points.length/3,r+=n[i].indices.length/3;return{vertexCount:2*t+4*t,triangleCount:2*r+2*t}},_updatePolygonGeometry:function(e,n,t,r,i,o,d){var f=e.get("projectUVOnGround"),g=n.attributes.position,_=n.attributes.normal,w=n.attributes.texcoord0,S=n.attributes.color,k=this._triangulationResults[t-this._startIndex],V=S.value&&d,ne=n.indices,pe=this.extrudeY?1:2,De=this.extrudeY?2:1,Re=[this.rootNode.worldTransform.x.len(),this.rootNode.worldTransform.y.len(),this.rootNode.worldTransform.z.len()],Fe=gl.mul([],this._geoBoundingBox[0],Re),ke=gl.mul([],this._geoBoundingBox[1],Re),Be=Math.max(ke[0]-Fe[0],ke[2]-Fe[2]);function ot(Wi,ji,Ta){var Na=i;!function at(Wi,ji,Ta){for(var Na=Wi.points,BC=Na.length,So=[],Fu=[],Ds=0;Ds<BC;Ds+=3)So[0]=Na[Ds],So[pe]=ji,So[De]=Na[Ds+2],Fu[0]=(Na[Ds]*Re[0]-Fe[0])/Be,Fu[1]=(Na[Ds+2]*Re[De]-Fe[2])/Be,g.set(i,So),V&&S.set(i,d),w.set(i++,Fu)}(Wi,ji);for(var BC=Wi.indices.length,So=0;So<BC;So++)ne[3*o+So]=Wi.indices[So]+Na;o+=Wi.indices.length/3}for(var St=this.extrudeY?[0,1,0]:[0,0,1],yt=gl.negate([],St),Ht=0;Ht<k.length;Ht++){var rn=i,Kt=k[Ht];ot(Kt,0),ot(Kt,r);for(var gn=Kt.points.length/3,_n=0;_n<gn;_n++)_.set(rn+_n,yt),_.set(rn+_n+gn,St);var ln=[0,3,1,1,3,2],Dn=[[],[],[],[]],jt=[],cn=[],Yt=[],Jn=[],Ln=0;for(_n=0;_n<gn;_n++){for(var oi=(_n+1)%gn,Nr=(Kt.points[3*oi]-Kt.points[3*_n])*Re[0],Mi=(Kt.points[3*oi+2]-Kt.points[3*_n+2])*Re[De],Ir=Math.sqrt(Nr*Nr+Mi*Mi),ei=0;ei<4;ei++){var Qa=0===ei||3===ei,si=3*(Qa?_n:oi);Dn[ei][0]=Kt.points[si],Dn[ei][pe]=ei>1?r:0,Dn[ei][De]=Kt.points[si+2],g.set(i+ei,Dn[ei]),f?(Jn[0]=(Kt.points[si]*Re[0]-Fe[0])/Be,Jn[1]=(Kt.points[si+2]*Re[De]-Fe[De])/Be):(Jn[0]=(Qa?Ln:Ln+Ir)/Be,Jn[1]=(Dn[ei][pe]*Re[pe]-Fe[pe])/Be),w.set(i+ei,Jn)}for(gl.sub(jt,Dn[1],Dn[0]),gl.sub(cn,Dn[3],Dn[0]),gl.cross(Yt,jt,cn),gl.normalize(Yt,Yt),ei=0;ei<4;ei++)_.set(i+ei,Yt),V&&S.set(i+ei,d);for(ei=0;ei<6;ei++)ne[3*o+ei]=ln[ei]+i;i+=4,o+=2,Ln+=Ir}}return n.dirty(),{vertexOffset:i,triangleOffset:o}},_getRegionLinesInfo:function(e,n,t){var r=0,i=0;return n.getRegionModel(e).getModel("itemStyle").get("borderWidth")>0&&n.getRegionPolygonCoords(e).forEach(function(_){var w=_.exterior,S=_.interiors;r+=t.getPolylineVertexCount(w),i+=t.getPolylineTriangleCount(w);for(var k=0;k<S.length;k++)r+=t.getPolylineVertexCount(S[k]),i+=t.getPolylineTriangleCount(S[k])},this),{vertexCount:r,triangleCount:i}},_updateLinesGeometry:function(e,n,t,r,i,o){function d(_){for(var w=new Float64Array(3*_.length),S=0,k=[],V=0;V<_.length;V++)k[0]=_[V][0],k[1]=r+.1,k[2]=_[V][1],o&&gl.transformMat4(k,k,o),w[S++]=k[0],w[S++]=k[1],w[S++]=k[2];return w}var f=[1,1,1,1];n.getRegionPolygonCoords(t).forEach(function(_){var S=_.interiors;e.addPolyline(d(_.exterior),f,i);for(var k=0;k<S.length;k++)e.addPolyline(d(S[k]),f,i)})},highlight:function(e){var n=this._data;if(n){var r=n.getItemModel(e).getModel(["emphasis","itemStyle"]),i=r.get("color"),o=Jr.firstNotNull(r.get("opacity"),Bo(n,e),1);if(null==i){var d=Fo(n,e);i=Ct.$_.lift(d,-.4)}null==o&&(o=Bo(n,e));var f=lt.parseColor(i);f[3]*=o,this._setColorOfDataIndex(n,e,f)}},downplay:function(e){var n=this._data;if(n){var t=n.getItemModel(e),r=Jr.firstNotNull(Fo(n,e),t.get(["itemStyle","color"]),"#fff"),i=Jr.firstNotNull(Bo(n,e),t.get(["itemStyle","opacity"]),1),o=lt.parseColor(r);o[3]*=i,this._setColorOfDataIndex(n,e,o)}},dispose:function(){this._labelsBuilder.dispose()},_setColorOfDataIndex:function(e,n,t){if(!(n<this._startIndex&&n>this._endIndex)){for(var r=this._vertexRangeOfDataIndex[2*(n-=this._startIndex)];r<this._vertexRangeOfDataIndex[2*n+1];r++)this._polygonMesh.geometry.attributes.color.set(r,t);this._polygonMesh.geometry.dirty(),this._api.getZr().refresh()}}};const J2=bV,xae=Ct.Ir.extend({type:"geo3D",__ecgl__:!0,init:function(e,n){this._geo3DBuilder=new J2(n),this.groupGL=new lt.Node,this._lightRoot=new lt.Node,this._sceneHelper=new Gy(this._lightRoot),this._sceneHelper.initLight(this._lightRoot),this._control=new G2({zr:n.getZr()}),this._control.init()},render:function(e,n,t){this.groupGL.add(this._geo3DBuilder.rootNode);var r=e.coordinateSystem;if(r&&r.viewGL){r.viewGL.add(this._lightRoot),e.get("show")?r.viewGL.add(this.groupGL):r.viewGL.remove(this.groupGL);var i=this._control;i.setViewGL(r.viewGL);var o=e.getModel("viewControl");i.setFromViewControlModel(o,0),this._sceneHelper.setScene(r.viewGL.scene),this._sceneHelper.updateLight(e),r.viewGL.setPostEffect(e.getModel("postEffect"),t),r.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling")),this._geo3DBuilder.update(e,n,t,0,e.getData().count());var d=r.viewGL.isLinearSpace()?"define":"undefine";this._geo3DBuilder.rootNode.traverse(function(f){f.material&&f.material[d]("fragment","SRGB_DECODE")}),i.off("update"),i.on("update",function(){t.dispatchAction({type:"geo3DChangeCamera",alpha:i.getAlpha(),beta:i.getBeta(),distance:i.getDistance(),center:i.getCenter(),from:this.uid,geo3DId:e.id})}),i.update()}},afterRender:function(e,n,t,r){var i=r.renderer;this._sceneHelper.updateAmbientCubemap(i,e,t),this._sceneHelper.updateSkybox(i,e,t)},dispose:function(){this._control.dispose(),this._geo3DBuilder.dispose()}});var wae=z(9874),Cae={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]},Dae=Ka.vec3,$y=Ka.mat4,Mae=[wae.Z,function Sae(e,n){if("world"===e){var t=Cae[n.name];t&&n.setCenter([t[0],t[1]])}}];function xV(e,n,t,r,i){this.name=e,this.map=n,this.regionHeight=0,this.regions=[],this._nameCoordMap={},this.loadGeoJson(t,r,i),this.transform=$y.identity(new Float64Array(16)),this.invTransform=$y.identity(new Float64Array(16)),this.extrudeY=!0}xV.prototype={constructor:xV,type:"geo3D",dimensions:["lng","lat","alt"],containPoint:function(){},loadGeoJson:function(e,n,t){var r=Ct.Nu||Ct.pQ;try{this.regions=e?r(e):[]}catch(_){throw"Invalid geoJson format\n"+_}n=n||{},t=t||{};for(var i=this.regions,o={},d=0;d<i.length;d++){var f=i[d].name;i[d].name=f=t[f]||f,o[f]=i[d],this.addGeoCoord(f,i[d].getCenter());var g=n[f];g&&i[d].transformTo(g.left,g.top,g.width,g.height)}this._regionsMap=o,this._geoRect=null,Mae.forEach(function(_){_(this)},this)},getGeoBoundingRect:function(){if(this._geoRect)return this._geoRect;for(var e,n=this.regions,t=0;t<n.length;t++){var r=n[t].getBoundingRect();(e=e||r.clone()).union(r)}return this._geoRect=e||new Ct.Q.BoundingRect(0,0,0,0)},addGeoCoord:function(e,n){this._nameCoordMap[e]=n},getRegion:function(e){return this._regionsMap[e]},getRegionByCoord:function(e){for(var n=this.regions,t=0;t<n.length;t++)if(n[t].contain(e))return n[t]},setSize:function(e,n,t){this.size=[e,n,t];var r=this.getGeoBoundingRect(),i=e/r.width,o=-t/r.height,d=-e/2-r.x*i,f=t/2-r.y*o,g=this.extrudeY?[d,0,f]:[d,f,0],_=this.extrudeY?[i,1,o]:[i,o,1],w=this.transform;$y.identity(w),$y.translate(w,w,g),$y.scale(w,w,_),$y.invert(this.invTransform,w)},dataToPoint:function(e,n){n=n||[];var t=this.extrudeY?1:2,r=this.extrudeY?2:1,i=e[2];return isNaN(i)&&(i=0),n[0]=e[0],n[r]=e[1],n[t]=this.altitudeAxis?this.altitudeAxis.dataToCoord(i):0,n[t]+=this.regionHeight,Dae.transformMat4(n,n,this.transform),n},pointToData:function(e,n){}};const oj=xV;function Tae(e,n){var t=e.getBoxLayoutParams(),r=(0,$2.ME)(t,{width:n.getWidth(),height:n.getHeight()});r.y=n.getHeight()-r.y-r.height,this.viewGL.setViewport(r.x,r.y,r.width,r.height,n.getDevicePixelRatio());var i=this.getGeoBoundingRect(),o=i.width/i.height*(e.get("aspectScale")||.75),d=e.get("boxWidth"),f=e.get("boxDepth"),g=e.get("boxHeight");null==g&&(g=5),isNaN(d)&&isNaN(f)&&(d=100),isNaN(f)?f=d/o:isNaN(d)&&(d=f/o),this.setSize(d,g,f),this.regionHeight=e.get("regionHeight"),this.altitudeAxis&&this.altitudeAxis.setExtent(0,Math.max(g-this.regionHeight,0))}function Eae(e,n){var t=[1/0,-1/0];if(e.eachSeries(function(i){if(i.coordinateSystem===this&&"series.map3D"!==i.type){var o=i.getData(),d=i.coordDimToDataDim("alt"),f=d&&d[0];if(f){var g=o.getDataExtent(f,!0);t[0]=Math.min(t[0],g[0]),t[1]=Math.max(t[1],g[1])}}},this),t&&isFinite(t[1]-t[0])){var r=Ct._y.createScale(t,{type:"value",min:"dataMin",max:"dataMax"});this.altitudeAxis=new Ct.RD("altitude",r),this.resize(this.model,n)}}var sj=0,lj={dimensions:oj.prototype.dimensions,create:function(e,n){var t=[];if(!Ct.FU)throw new Error("geo3D component depends on geo component");function r(i,o){var d=lj.createGeo3D(i);i.__viewGL=i.__viewGL||new zf,d.viewGL=i.__viewGL,i.coordinateSystem=d,d.model=i,t.push(d),d.resize=Tae,d.resize(i,n),d.update=Eae}return e.eachComponent("geo3D",function(i,o){r(i)}),e.eachSeriesByType("map3D",function(i,o){var d=i.get("coordinateSystem");null==d&&(d="geo3D"),"geo3D"===d&&r(i)}),e.eachSeries(function(i){if("geo3D"===i.get("coordinateSystem")){if("series.map3D"===i.type)return;var o=i.getReferringComponents("geo3D").models[0];if(o||(o=e.getComponent("geo3D")),!o)throw new Error('geo "'+Jr.firstNotNull(i.get("geo3DIndex"),i.get("geo3DId"),0)+'" not found');i.coordinateSystem=o.coordinateSystem}}),t},createGeo3D:function(e){var t,n=e.get("map");return"string"==typeof n?(t=n,n=Ct.FU(n)):n&&n.features&&(n={geoJson:n}),null==t&&(t="GEO_ANONYMOUS_"+sj++),new oj(t+sj++,t,n&&n.geoJson,n&&n.specialAreas,e.get("nameMap"))}};const cj=lj;function uj(e){e.registerComponentModel(rae),e.registerComponentView(xae),e.registerAction({type:"geo3DChangeCamera",event:"geo3dcamerachanged",update:"series:updateCamera"},function(n,t){t.eachComponent({mainType:"geo3D",query:n},function(r){r.setView(n)})}),e.registerCoordinateSystem("geo3D",cj)}function dj(e,n){e.id=e.id||e.name||n+""}(0,Ct.D$)(uj);var xv=Ct.tF.extend({type:"globe",layoutMode:"box",coordinateSystem:null,init:function(){xv.superApply(this,"init",arguments),Ct.D5.each(this.option.layers,function(e,n){Ct.D5.merge(e,this.defaultLayerOption),dj(e,n)},this)},mergeOption:function(e){var n=this.option.layers;function t(d){return Ct.D5.reduce(d,function(f,g,_){return dj(g,_),f[g.id]=g,f},{})}if(this.option.layers=null,xv.superApply(this,"mergeOption",arguments),n&&n.length){var r=t(e.layers),i=t(n);for(var o in r)i[o]?Ct.D5.merge(i[o],r[o],!0):n.push(e.layers[o]);this.option.layers=n}Ct.D5.each(this.option.layers,function(d){Ct.D5.merge(d,this.defaultLayerOption)},this)},optionUpdated:function(){this.updateDisplacementHash()},defaultLayerOption:{show:!0,type:"overlay"},defaultOption:{show:!0,zlevel:-10,left:0,top:0,width:"100%",height:"100%",environment:"auto",baseColor:"#fff",baseTexture:"",heightTexture:"",displacementTexture:"",displacementScale:0,displacementQuality:"medium",globeRadius:100,globeOuterRadius:150,shading:"lambert",light:{main:{time:""}},atmosphere:{show:!1,offset:5,color:"#ffffff",glowPower:6,innerGlowPower:2},viewControl:{autoRotate:!0,panSensitivity:0,targetCoord:null},layers:[]},setDisplacementData:function(e,n,t){this.displacementData=e,this.displacementWidth=n,this.displacementHeight=t},getDisplacementTexture:function(){return this.get("displacementTexture")||this.get("heightTexture")},getDisplacemenScale:function(){var e=this.getDisplacementTexture(),n=this.get("displacementScale");return(!e||"none"===e)&&(n=0),n},hasDisplacement:function(){return this.getDisplacemenScale()>0},_displacementChanged:!0,_displacementScale:0,updateDisplacementHash:function(){var e=this.getDisplacementTexture(),n=this.getDisplacemenScale();this._displacementChanged=this._displacementTexture!==e||this._displacementScale!==n,this._displacementTexture=e,this._displacementScale=n},isDisplacementChanged:function(){return this._displacementChanged}});Ct.D5.merge(xv.prototype,z2),Ct.D5.merge(xv.prototype,Hy),Ct.D5.merge(xv.prototype,Uy),Ct.D5.merge(xv.prototype,Zy);const Aae=xv;var hj=Math.PI,Tc=Math.sin,nh=Math.cos,fj=Math.tan,pj=Math.asin,gj=Math.atan2,wv=hj/180,eP=23.4397*wv;function kae(e,n){return gj(Tc(e)*nh(eP)-fj(n)*Tc(eP),nh(e))}function Nae(e,n){return pj(Tc(n)*nh(eP)+nh(n)*Tc(eP)*Tc(e))}function Fae(e,n,t){return gj(Tc(e),nh(e)*Tc(n)-fj(t)*nh(n))}function Bae(e,n,t){return pj(Tc(n)*Tc(t)+nh(n)*nh(t)*nh(e))}var vj={};vj.getPosition=function(e,n,t){var r=wv*-t,i=wv*n,o=function Oae(e){return function Lae(e){return e.valueOf()/864e5-.5+2440588}(e)-2451545}(e),d=function Uae(e){var n=function zae(e){return wv*(357.5291+.98560028*e)}(e),t=function Hae(e){return e+wv*(1.9148*Tc(e)+.02*Tc(2*e)+3e-4*Tc(3*e))+102.9372*wv+hj}(n);return{dec:Nae(t,0),ra:kae(t,0)}}(o),f=function Vae(e,n){return wv*(280.16+360.9856235*e)-n}(o,r)-d.ra;return{azimuth:Fae(f,i,d.dec),altitude:Bae(f,i,d.dec)}};const Gae=vj;lt.Shader.import(oW),lt.Shader.import("@export ecgl.atmosphere.vertex\nattribute vec3 position: POSITION;\nattribute vec3 normal : NORMAL;\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform mat4 normalMatrix : WORLDINVERSETRANSPOSE;\n\nvarying vec3 v_Normal;\n\nvoid main() {\n v_Normal = normalize((normalMatrix * vec4(normal, 0.0)).xyz);\n gl_Position = worldViewProjection * vec4(position, 1.0);\n}\n@end\n\n\n@export ecgl.atmosphere.fragment\nuniform mat4 viewTranspose: VIEWTRANSPOSE;\nuniform float glowPower;\nuniform vec3 glowColor;\n\nvarying vec3 v_Normal;\n\nvoid main() {\n float intensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);\n gl_FragColor = vec4(glowColor, intensity * intensity);\n}\n@end");const jae=Ct.Ir.extend({type:"globe",__ecgl__:!0,_displacementScale:0,init:function(e,n){this.groupGL=new lt.Node,this._sphereGeometry=new lt.SphereGeometry({widthSegments:200,heightSegments:100,dynamic:!0}),this._overlayGeometry=new lt.SphereGeometry({widthSegments:80,heightSegments:40}),this._planeGeometry=new lt.PlaneGeometry,this._earthMesh=new lt.Mesh({renderNormal:!0}),this._atmosphereMesh=new lt.Mesh,this._atmosphereGeometry=new lt.SphereGeometry({widthSegments:80,heightSegments:40}),this._atmosphereMaterial=new lt.Material({shader:new lt.Shader(lt.Shader.source("ecgl.atmosphere.vertex"),lt.Shader.source("ecgl.atmosphere.fragment")),transparent:!0}),this._atmosphereMesh.geometry=this._atmosphereGeometry,this._atmosphereMesh.material=this._atmosphereMaterial,this._atmosphereMesh.frontFace=lt.Mesh.CW,this._lightRoot=new lt.Node,this._sceneHelper=new Gy,this._sceneHelper.initLight(this._lightRoot),this.groupGL.add(this._atmosphereMesh),this.groupGL.add(this._earthMesh),this._control=new G2({zr:n.getZr()}),this._control.init(),this._layerMeshes={}},render:function(e,n,t){var r=e.coordinateSystem,i=e.get("shading");r.viewGL.add(this._lightRoot),e.get("show")?r.viewGL.add(this.groupGL):r.viewGL.remove(this.groupGL),this._sceneHelper.setScene(r.viewGL.scene),r.viewGL.setPostEffect(e.getModel("postEffect"),t),r.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling"));var o=this._earthMesh;o.geometry=this._sphereGeometry;var d="ecgl."+i;(!o.material||o.material.shader.name!==d)&&(o.material=lt.createMaterial(d)),lt.setMaterialFromModel(i,o.material,e,t),["roughnessMap","metalnessMap","detailMap","normalMap"].forEach(function(S){var k=o.material.get(S);k&&(k.flipY=!1)}),o.material.set("color",lt.parseColor(e.get("baseColor")));var f=.99*r.radius;if(o.scale.set(f,f,f),e.get("atmosphere.show")){o.material.define("both","ATMOSPHERE_ENABLED"),this._atmosphereMesh.invisible=!1,this._atmosphereMaterial.setUniforms({glowPower:e.get("atmosphere.glowPower")||6,glowColor:e.get("atmosphere.color")||"#ffffff"}),o.material.setUniforms({glowPower:e.get("atmosphere.innerGlowPower")||2,glowColor:e.get("atmosphere.color")||"#ffffff"});var g=e.get("atmosphere.offset")||5;this._atmosphereMesh.scale.set(f+g,f+g,f+g)}else o.material.undefine("both","ATMOSPHERE_ENABLED"),this._atmosphereMesh.invisible=!0;var _=o.material.setTextureImage("diffuseMap",e.get("baseTexture"),t,{flipY:!1,anisotropic:8});_&&_.surface&&_.surface.attachToMesh(o);var w=o.material.setTextureImage("bumpMap",e.get("heightTexture"),t,{flipY:!1,anisotropic:8});w&&w.surface&&w.surface.attachToMesh(o),o.material[e.get("postEffect.enable")?"define":"undefine"]("fragment","SRGB_DECODE"),this._updateLight(e,t),this._displaceVertices(e,t),this._updateViewControl(e,t),this._updateLayers(e,t)},afterRender:function(e,n,t,r){var i=r.renderer;this._sceneHelper.updateAmbientCubemap(i,e,t),this._sceneHelper.updateSkybox(i,e,t)},_updateLayers:function(e,n){var t=e.coordinateSystem,r=e.get("layers"),i=t.radius,o=[],d=[],f=[],g=[];Ct.D5.each(r,function(V){var ne=new Ct.Hn(V),pe=ne.get("type"),De=lt.loadTexture(ne.get("texture"),n,{flipY:!1,anisotropic:8});if(De.surface&&De.surface.attachToMesh(this._earthMesh),"blend"===pe){var Re=ne.get("blendTo"),Fe=Jr.firstNotNull(ne.get("intensity"),1);"emission"===Re?(f.push(De),g.push(Fe)):(o.push(De),d.push(Fe))}else{var ke=ne.get("id"),Be=this._layerMeshes[ke];Be||(Be=this._layerMeshes[ke]=new lt.Mesh({geometry:this._overlayGeometry,castShadow:!1,ignorePicking:!0})),"lambert"===ne.get("shading")?(Be.material=Be.__lambertMaterial||new lt.Material({autoUpdateTextureStatus:!1,shader:lt.createShader("ecgl.lambert"),transparent:!0,depthMask:!1}),Be.__lambertMaterial=Be.material):(Be.material=Be.__colorMaterial||new lt.Material({autoUpdateTextureStatus:!1,shader:lt.createShader("ecgl.color"),transparent:!0,depthMask:!1}),Be.__colorMaterial=Be.material),Be.material.enableTexture("diffuseMap");var ot=ne.get("distance"),St=i+(ot??t.radius/100);Be.scale.set(St,St,St),i=St;var yt=this._blankTexture||(this._blankTexture=lt.createBlankTexture("rgba(255, 255, 255, 0)"));Be.material.set("diffuseMap",yt),lt.loadTexture(ne.get("texture"),n,{flipY:!1,anisotropic:8},function(Ht){Ht.surface&&Ht.surface.attachToMesh(Be),Be.material.set("diffuseMap",Ht),n.getZr().refresh()}),ne.get("show")?this.groupGL.add(Be):this.groupGL.remove(Be)}},this);var _=this._earthMesh.material;_.define("fragment","LAYER_DIFFUSEMAP_COUNT",o.length),_.define("fragment","LAYER_EMISSIVEMAP_COUNT",f.length),_.set("layerDiffuseMap",o),_.set("layerDiffuseIntensity",d),_.set("layerEmissiveMap",f),_.set("layerEmissionIntensity",g);var w=e.getModel("debug.wireframe");if(w.get("show")){_.define("both","WIREFRAME_TRIANGLE");var S=lt.parseColor(w.get("lineStyle.color")||"rgba(0,0,0,0.5)"),k=Jr.firstNotNull(w.get("lineStyle.width"),1);_.set("wireframeLineWidth",k),_.set("wireframeLineColor",S)}else _.undefine("both","WIREFRAME_TRIANGLE")},_updateViewControl:function(e,n){var t=e.coordinateSystem,r=e.getModel("viewControl"),o=this,f=this._control;f.setViewGL(t.viewGL);var _,w,g=r.get("targetCoord");null!=g&&(w=g[0]+90,_=g[1]),f.setFromViewControlModel(r,{baseDistance:t.radius,alpha:_,beta:w}),f.off("update"),f.on("update",function(){n.dispatchAction(function d(){return{type:"globeChangeCamera",alpha:f.getAlpha(),beta:f.getBeta(),distance:f.getDistance()-t.radius,center:f.getCenter(),from:o.uid,globeId:e.id}}())})},_displaceVertices:function(e,n){var t=e.get("displacementQuality"),r=e.get("debug.wireframe.show"),i=e.coordinateSystem;if(e.isDisplacementChanged()||t!==this._displacementQuality||r!==this._showDebugWireframe){this._displacementQuality=t,this._showDebugWireframe=r;var o=this._sphereGeometry,d={low:100,medium:200,high:400,ultra:800}[t]||200,f=d/2;(o.widthSegments!==d||r)&&(o.widthSegments=d,o.heightSegments=f,o.build()),this._doDisplaceVertices(o,i),r&&o.generateBarycentric()}},_doDisplaceVertices:function(e,n){var t=e.attributes.position.value,r=e.attributes.texcoord0.value,i=e.__originalPosition;(!i||i.length!==t.length)&&((i=new Float32Array(t.length)).set(t),e.__originalPosition=i);for(var o=n.displacementWidth,d=n.displacementHeight,f=n.displacementData,g=0;g<e.vertexCount;g++){var _=3*g,w=2*g,S=i[_+1],k=i[_+2],V=i[_+3],ne=r[w++],pe=r[w++],De=Math.round(ne*(o-1)),Re=Math.round(pe*(d-1)),ke=f?f[Re*o+De]:0;t[_+1]=S+S*ke,t[_+2]=k+k*ke,t[_+3]=V+V*ke}e.generateVertexNormals(),e.dirty(),e.updateBoundingBox()},_updateLight:function(e,n){var t=this._earthMesh;this._sceneHelper.updateLight(e);var r=this._sceneHelper.mainLight,i=e.get("light.main.time")||new Date,o=Gae.getPosition(Ct.Rx.parseDate(i),0,0),d=Math.cos(o.altitude);r.position.y=-d*Math.cos(o.azimuth),r.position.x=Math.sin(o.altitude),r.position.z=d*Math.sin(o.azimuth),r.lookAt(t.getWorldPosition())},dispose:function(e,n){this.groupGL.removeAll(),this._control.dispose()}});var Zae=Ka.vec3;function wV(e){this.radius=e,this.viewGL=null,this.displacementData=null}wV.prototype={constructor:wV,dimensions:["lng","lat","alt"],type:"globe",containPoint:function(){},setDisplacementData:function(e,n,t){this.displacementData=e,this.displacementWidth=n,this.displacementHeight=t},_getDisplacementScale:function(e,n){var r=(90-n)/180*(this.displacementHeight-1),i=Math.round((e+180)/360*(this.displacementWidth-1))+Math.round(r)*this.displacementWidth;return this.displacementData[i]},dataToPoint:function(e,n){var t=e[0],r=e[1],i=e[2]||0,o=this.radius;this.displacementData&&(o*=1+this._getDisplacementScale(t,r)),this.altitudeAxis&&(o+=this.altitudeAxis.dataToCoord(i)),t=t*Math.PI/180,r=r*Math.PI/180;var d=Math.cos(r)*o;return(n=n||[])[0]=-d*Math.cos(t+Math.PI),n[1]=Math.sin(r)*o,n[2]=d*Math.sin(t+Math.PI),n},pointToData:function(e,n){var t=e[0],r=e[1],i=e[2],o=Zae.len(e);t/=o,i/=o;var d=Math.asin(r/=o),f=Math.atan2(i,-t);f<0&&(f=2*Math.PI+f);var g=180*d/Math.PI,_=180*f/Math.PI-180;return(n=n||[])[0]=_,n[1]=g,n[2]=o-this.radius,this.altitudeAxis&&(n[2]=this.altitudeAxis.coordToData(n[2])),n}};const mj=wV;function Xae(e,n){var t=e.getBoxLayoutParams(),r=(0,$2.ME)(t,{width:n.getWidth(),height:n.getHeight()});r.y=n.getHeight()-r.y-r.height,this.viewGL.setViewport(r.x,r.y,r.width,r.height,n.getDevicePixelRatio()),this.radius=e.get("globeRadius");var i=e.get("globeOuterRadius");this.altitudeAxis&&this.altitudeAxis.setExtent(0,i-this.radius)}function $ae(e,n){var t=[1/0,-1/0];if(e.eachSeries(function(i){if(i.coordinateSystem===this){var o=i.getData(),d=i.coordDimToDataDim("alt"),f=d&&d[0];if(f){var g=o.getDataExtent(f,!0);t[0]=Math.min(t[0],g[0]),t[1]=Math.max(t[1],g[1])}}},this),t&&isFinite(t[1]-t[0])){var r=Ct._y.createScale(t,{type:"value",min:"dataMin",max:"dataMax"});this.altitudeAxis=new Ct.RD("altitude",r),this.resize(this.model,n)}}var Kae={dimensions:mj.prototype.dimensions,create:function(e,n){var t=[];return e.eachComponent("globe",function(r){r.__viewGL=r.__viewGL||new zf;var i=new mj;i.viewGL=r.__viewGL,r.coordinateSystem=i,i.model=r,t.push(i),i.resize=Xae,i.resize(r,n),i.update=$ae}),e.eachSeries(function(r){if("globe"===r.get("coordinateSystem")){var i=r.getReferringComponents("globe").models[0];if(i||(i=e.getComponent("globe")),!i)throw new Error('globe "'+Jr.firstNotNull(r.get("globe3DIndex"),r.get("globe3DId"),0)+'" not found');r.coordinateSystem=i.coordinateSystem}}),e.eachComponent("globe",function(r,i){var o=r.coordinateSystem,d=r.getDisplacementTexture(),f=r.getDisplacemenScale();if(r.isDisplacementChanged()){if(r.hasDisplacement()){var g=!0;lt.loadTexture(d,n,function(_){var S=function Yae(e,n){var t=document.createElement("canvas"),r=t.getContext("2d"),i=e.width,o=e.height;t.width=i,t.height=o,r.drawImage(e,0,0,i,o);for(var d=r.getImageData(0,0,i,o).data,f=new Float32Array(d.length/4),g=0;g<d.length/4;g++)f[g]=d[4*g]/255*n;return{data:f,width:i,height:o}}(_.image,f);r.setDisplacementData(S.data,S.width,S.height),g||n.dispatchAction({type:"globeUpdateDisplacment"})}),g=!1}else o.setDisplacementData(null,0,0);o.setDisplacementData(r.displacementData,r.displacementWidth,r.displacementHeight)}}),t}};const Qae=Kae;(0,Ct.D$)(function qae(e){e.registerComponentModel(Aae),e.registerComponentView(jae),e.registerCoordinateSystem("globe",Qae),e.registerAction({type:"globeChangeCamera",event:"globecamerachanged",update:"series:updateCamera"},function(n,t){t.eachComponent({mainType:"globe",query:n},function(r){r.setView(n)})}),e.registerAction({type:"globeUpdateDisplacment",event:"globedisplacementupdated",update:"update"},function(n,t){})});var _j=["zoom","center","pitch","bearing"],CV=Ct.tF.extend({type:"mapbox3D",layoutMode:"box",coordinateSystem:null,defaultOption:{zlevel:-10,style:"mapbox://styles/mapbox/light-v9",center:[0,0],zoom:0,pitch:0,bearing:0,light:{main:{alpha:20,beta:30}},altitudeScale:1,boxHeight:"auto"},getMapboxCameraOption:function(){var e=this;return _j.reduce(function(n,t){return n[t]=e.get(t),n},{})},setMapboxCameraOption:function(e){null!=e&&_j.forEach(function(n){null!=e[n]&&(this.option[n]=e[n])},this)},getMapbox:function(){return this._mapbox},setMapbox:function(e){this._mapbox=e}});Ct.D5.merge(CV.prototype,Hy),Ct.D5.merge(CV.prototype,Uy);const Jae=CV;function Hf(e,n){if(this.id=e,this.zr=n,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;",!mapboxgl)throw new Error("Mapbox GL library must be included. See https://www.mapbox.com/mapbox-gl-js/api/");this._mapbox=new mapboxgl.Map({container:this.dom}),this._initEvents()}Hf.prototype.setUnpainted=function(){},Hf.prototype.resize=function(){this._mapbox.resize()},Hf.prototype.getMapbox=function(){return this._mapbox},Hf.prototype.clear=function(){},Hf.prototype.refresh=function(){this._mapbox.resize()};var yj=["mousedown","mouseup","click","dblclick","mousemove","mousewheel","wheel","touchstart","touchend","touchmove","touchcancel"];Hf.prototype._initEvents=function(){var e=this._mapbox.getCanvasContainer();this._handlers=this._handlers||{contextmenu:function(n){return n.preventDefault(),!1}},yj.forEach(function(n){this._handlers[n]=function(t){var r={};for(var i in t)r[i]=t[i];r.bubbles=!1;var o=new t.constructor(t.type,r);e.dispatchEvent(o)},this.zr.dom.addEventListener(n,this._handlers[n])},this),this.zr.dom.addEventListener("contextmenu",this._handlers.contextmenu)},Hf.prototype.dispose=function(){yj.forEach(function(e){this.zr.dom.removeEventListener(e,this._handlers[e])},this)};const eoe=Hf,bj="\n@export ecgl.displayShadow.vertex\n\n@import ecgl.common.transformUniforms\n\n@import ecgl.common.uv.header\n\n@import ecgl.common.attributes\n\nvarying vec3 v_WorldPosition;\n\nvarying vec3 v_Normal;\n\nvoid main()\n{\n @import ecgl.common.uv.main\n v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);\n\n v_WorldPosition = (world * vec4(position, 1.0)).xyz;\n gl_Position = worldViewProjection * vec4(position, 1.0);\n}\n\n@end\n\n\n@export ecgl.displayShadow.fragment\n\n@import ecgl.common.uv.fragmentHeader\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nuniform float roughness: 0.2;\n\n#ifdef DIRECTIONAL_LIGHT_COUNT\n@import clay.header.directional_light\n#endif\n\n@import ecgl.common.ssaoMap.header\n\n@import clay.plugin.compute_shadow_map\n\nvoid main()\n{\n float shadow = 1.0;\n\n @import ecgl.common.ssaoMap.main\n\n#if defined(DIRECTIONAL_LIGHT_COUNT) && defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];\n if(shadowEnabled)\n {\n computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);\n }\n for (int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++) {\n shadow = min(shadow, shadowContribsDir[i] * 0.5 + 0.5);\n }\n#endif\n\n shadow *= 0.5 + ao * 0.5;\n shadow = clamp(shadow, 0.0, 1.0);\n\n gl_FragColor = vec4(vec3(0.0), 1.0 - shadow);\n}\n\n@end";lt.Shader.import(bj);const toe=Ct.Ir.extend({type:"mapbox3D",__ecgl__:!0,init:function(e,n){var t=n.getZr();this._zrLayer=new eoe("mapbox3D",t),t.painter.insertLayer(-1e3,this._zrLayer),this._lightRoot=new lt.Node,this._sceneHelper=new Gy(this._lightRoot),this._sceneHelper.initLight(this._lightRoot);var r=this._zrLayer.getMapbox(),i=this._dispatchInteractAction.bind(this,n,r);["zoom","rotate","drag","pitch","rotate","move"].forEach(function(o){r.on(o,i)}),this._groundMesh=new lt.Mesh({geometry:new lt.PlaneGeometry,material:new lt.Material({shader:new lt.Shader({vertex:lt.Shader.source("ecgl.displayShadow.vertex"),fragment:lt.Shader.source("ecgl.displayShadow.fragment")}),depthMask:!1}),renderOrder:-100,culling:!1,castShadow:!1,$ignorePicking:!0,renderNormal:!0})},render:function(e,n,t){var r=this._zrLayer.getMapbox(),i=e.get("style"),o=JSON.stringify(i);o!==this._oldStyleStr&&i&&r.setStyle(i),this._oldStyleStr=o,r.setCenter(e.get("center")),r.setZoom(e.get("zoom")),r.setPitch(e.get("pitch")),r.setBearing(e.get("bearing")),e.setMapbox(r);var d=e.coordinateSystem;d.viewGL.scene.add(this._lightRoot),d.viewGL.add(this._groundMesh),this._updateGroundMesh(),this._sceneHelper.setScene(d.viewGL.scene),this._sceneHelper.updateLight(e),d.viewGL.setPostEffect(e.getModel("postEffect"),t),d.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling")),this._mapbox3DModel=e},afterRender:function(e,n,t,r){var i=r.renderer;this._sceneHelper.updateAmbientCubemap(i,e,t),this._sceneHelper.updateSkybox(i,e,t),e.coordinateSystem.viewGL.scene.traverse(function(o){o.material&&(o.material.define("fragment","NORMAL_UP_AXIS",2),o.material.define("fragment","NORMAL_FRONT_AXIS",1))})},updateCamera:function(e,n,t,r){e.coordinateSystem.setCameraOption(r),this._updateGroundMesh(),t.getZr().refresh()},_dispatchInteractAction:function(e,n,t){e.dispatchAction({type:"mapbox3DChangeCamera",pitch:n.getPitch(),zoom:n.getZoom(),center:n.getCenter().toArray(),bearing:n.getBearing(),mapbox3DId:this._mapbox3DModel&&this._mapbox3DModel.id})},_updateGroundMesh:function(){if(this._mapbox3DModel){var e=this._mapbox3DModel.coordinateSystem,n=e.dataToPoint(e.center);this._groundMesh.position.set(n[0],n[1],-.001);var t=new lt.Plane(new lt.Vector3(0,0,1),0),r=e.viewGL.camera.castRay(new lt.Vector2(-1,-1)),i=e.viewGL.camera.castRay(new lt.Vector2(1,1)),o=r.intersectPlane(t),d=i.intersectPlane(t),f=o.dist(d)/e.viewGL.rootNode.scale.x;this._groundMesh.scale.set(f,f,1)}},dispose:function(e,n){this._zrLayer&&this._zrLayer.dispose(),n.getZr().painter.delLayer(-1e3)}});var Uf=Ka.mat4,SV=.6435011087932844,vl=Math.PI;function DV(){this.width=0,this.height=0,this.altitudeScale=1,this.boxHeight="auto",this.bearing=0,this.pitch=0,this.center=[0,0],this.zoom=0,this.maxPitch=60,this.zoomOffset=0}DV.prototype={constructor:DV,dimensions:["lng","lat","alt"],containPoint:function(){},setCameraOption:function(e){this.bearing=e.bearing,this.pitch=e.pitch,this.center=e.center,this.zoom=e.zoom,this._origin||(this._origin=this.projectOnTileWithScale(this.center,512)),null==this._initialZoom&&(this._initialZoom=this.zoom),this.updateTransform()},updateTransform:function(){if(this.height){var e=.5/Math.tan(SV/2)*this.height*.1,n=Math.max(Math.min(this.pitch,this.maxPitch),0)/180*Math.PI,t=SV/2,r=Math.PI/2+n,i=Math.sin(t)*e/Math.sin(Math.PI-r-t),d=1.1*(Math.cos(Math.PI/2-n)*i+e);this.pitch>50&&(d=1e3),Uf.perspective(f=[],SV,this.width/this.height,1,d),this.viewGL.camera.projectionMatrix.setArray(f),this.viewGL.camera.decomposeProjectionMatrix();var f=Uf.identity([]),g=this.dataToPoint(this.center);Uf.scale(f,f,[1,-1,1]),Uf.translate(f,f,[0,0,-e]),Uf.rotateX(f,f,n),Uf.rotateZ(f,f,-this.bearing/180*Math.PI),Uf.translate(f,f,[-g[0]*this.getScale()*.1,-g[1]*this.getScale()*.1,0]),this.viewGL.camera.viewMatrix.array=f;var _=[];Uf.invert(_,f),this.viewGL.camera.worldTransform.array=_,this.viewGL.camera.decomposeWorldTransform();var S,w=512*this.getScale();S=this.altitudeExtent&&!isNaN(this.boxHeight)?this.boxHeight/(this.altitudeExtent[1]-this.altitudeExtent[0])*this.getScale()/Math.pow(2,this._initialZoom-this.zoomOffset):w/(2*Math.PI*6378e3*Math.abs(Math.cos(this.center[1]*(Math.PI/180))))*this.altitudeScale*.1,this.viewGL.rootNode.scale.set(.1*this.getScale(),.1*this.getScale(),S)}},getScale:function(){return Math.pow(2,this.zoom-this.zoomOffset)},projectOnTile:function(e,n){return this.projectOnTileWithScale(e,512*this.getScale(),n)},projectOnTileWithScale:function(e,n,t){var f=n*(e[0]*vl/180+vl)/(2*vl),g=n*(vl-Math.log(Math.tan(vl/4+e[1]*vl/180*.5)))/(2*vl);return(t=t||[])[0]=f,t[1]=g,t},unprojectFromTile:function(e,n){return this.unprojectOnTileWithScale(e,512*this.getScale(),n)},unprojectOnTileWithScale:function(e,n,t){var o=e[0]/n*(2*vl)-vl,d=2*(Math.atan(Math.exp(vl-e[1]/n*(2*vl)))-vl/4);return(t=t||[])[0]=180*o/vl,t[1]=180*d/vl,t},dataToPoint:function(e,n){return(n=this.projectOnTileWithScale(e,512,n))[0]-=this._origin[0],n[1]-=this._origin[1],n[2]=isNaN(e[2])?0:e[2],isNaN(e[2])||(n[2]=e[2],this.altitudeExtent&&(n[2]-=this.altitudeExtent[0])),n}};const tP=DV;function wC(){tP.apply(this,arguments)}function xj(e,n,t){function r(o,d){var f=d.getWidth(),g=d.getHeight(),_=d.getDevicePixelRatio();this.viewGL.setViewport(0,0,f,g,_),this.width=f,this.height=g,this.altitudeScale=o.get("altitudeScale"),this.boxHeight=o.get("boxHeight")}function i(o,d){if("auto"!==this.model.get("boxHeight")){var f=[1/0,-1/0];o.eachSeries(function(g){if(g.coordinateSystem===this){var _=g.getData(),w=g.coordDimToDataDim("alt")[0];if(w){var S=_.getDataExtent(w,!0);f[0]=Math.min(f[0],S[0]),f[1]=Math.max(f[1],S[1])}}},this),f&&isFinite(f[1]-f[0])&&(this.altitudeExtent=f)}}return{dimensions:n.prototype.dimensions,create:function(o,d){var f=[];return o.eachComponent(e,function(g){var _=g.__viewGL;_||(_=g.__viewGL=new zf).setRootNode(new lt.Node);var w=new n;w.viewGL=g.__viewGL,w.resize=r,w.resize(g,d),f.push(w),g.coordinateSystem=w,w.model=g,w.update=i}),o.eachSeries(function(g){if(g.get("coordinateSystem")===e){var _=g.getReferringComponents(e).models[0];if(_||(_=o.getComponent(e)),!_)throw new Error(e+' "'+Jr.firstNotNull(g.get(e+"Index"),g.get(e+"Id"),0)+'" not found');g.coordinateSystem=_.coordinateSystem}}),t&&t(f,o,d),f}}}(wC.prototype=new tP).constructor=wC,wC.prototype.type="mapbox3D";var roe=xj("mapbox3D",wC,function(e){e.forEach(function(n){n.setCameraOption(n.model.getMapboxCameraOption())})});const ioe=roe;(0,Ct.D$)(function aoe(e){e.registerComponentModel(Jae),e.registerComponentView(toe),e.registerCoordinateSystem("mapbox3D",ioe),e.registerAction({type:"mapbox3DChangeCamera",event:"mapbox3dcamerachanged",update:"mapbox3D:updateCamera"},function(n,t){t.eachComponent({mainType:"mapbox3D",query:n},function(r){r.setMapboxCameraOption(n)})})});var wj=["zoom","center","pitch","bearing"],MV=Ct.tF.extend({type:"maptalks3D",layoutMode:"box",coordinateSystem:null,defaultOption:{zlevel:-10,urlTemplate:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/">CARTO</a>',center:[0,0],zoom:0,pitch:0,bearing:0,light:{main:{alpha:20,beta:30}},altitudeScale:1,boxHeight:"auto"},getMaptalksCameraOption:function(){var e=this;return wj.reduce(function(n,t){return n[t]=e.get(t),n},{})},setMaptalksCameraOption:function(e){null!=e&&wj.forEach(function(n){null!=e[n]&&(this.option[n]=e[n])},this)},getMaptalks:function(){return this._maptalks},setMaptalks:function(e){this._maptalks=e}});Ct.D5.merge(MV.prototype,Hy),Ct.D5.merge(MV.prototype,Uy);const ooe=MV;function Gf(e,n,t,r){if(this.id=e,this.zr=n,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;",!maptalks)throw new Error("Maptalks library must be included. See https://maptalks.org");this._maptalks=new maptalks.Map(this.dom,{center:t,zoom:r,doubleClickZoom:!1,fog:!1}),this._initEvents()}Gf.prototype.setUnpainted=function(){},Gf.prototype.resize=function(){this._maptalks.checkSize()},Gf.prototype.getMaptalks=function(){return this._maptalks},Gf.prototype.clear=function(){},Gf.prototype.refresh=function(){this._maptalks.checkSize()};var Cj=["mousedown","mouseup","click","dblclick","mousemove","mousewheel","DOMMouseScroll","touchstart","touchend","touchmove","touchcancel"];Gf.prototype._initEvents=function(){var e=this.dom;this._handlers=this._handlers||{contextmenu:function(n){return n.preventDefault(),!1}},Cj.forEach(function(n){this._handlers[n]=function(t){var r={};for(var i in t)r[i]=t[i];r.bubbles=!1;var o=new t.constructor(t.type,r);"mousewheel"===n||"DOMMouseScroll"===n?e.dispatchEvent(o):e.firstElementChild.dispatchEvent(o)},this.zr.dom.addEventListener(n,this._handlers[n])},this),this.zr.dom.addEventListener("contextmenu",this._handlers.contextmenu)},Gf.prototype.dispose=function(){Cj.forEach(function(e){this.zr.dom.removeEventListener(e,this._handlers[e])},this),this._maptalks.remove()};const soe=Gf;lt.Shader.import(bj);const loe=Ct.Ir.extend({type:"maptalks3D",__ecgl__:!0,init:function(e,n){this._groundMesh=new lt.Mesh({geometry:new lt.PlaneGeometry,material:new lt.Material({shader:new lt.Shader({vertex:lt.Shader.source("ecgl.displayShadow.vertex"),fragment:lt.Shader.source("ecgl.displayShadow.fragment")}),depthMask:!1}),renderOrder:-100,culling:!1,castShadow:!1,$ignorePicking:!0,renderNormal:!0})},_initMaptalksLayer:function(e,n){var t=n.getZr();this._zrLayer=new soe("maptalks3D",t,e.get("center"),e.get("zoom")),t.painter.insertLayer(-1e3,this._zrLayer),this._lightRoot=new lt.Node,this._sceneHelper=new Gy(this._lightRoot),this._sceneHelper.initLight(this._lightRoot);var r=this._zrLayer.getMaptalks(),i=this._dispatchInteractAction.bind(this,n,r);["zoomend","zooming","zoomstart","dragrotating","pitch","pitchend","movestart","moving","moveend","resize","touchstart","touchmove","touchend","animating"].forEach(function(o){r.on(o,i)})},render:function(e,n,t){this._zrLayer||this._initMaptalksLayer(e,t);var r=this._zrLayer.getMaptalks(),i=e.get("urlTemplate"),o=r.getBaseLayer();i!==this._oldUrlTemplate&&(o?o.setOptions({urlTemplate:i,attribution:e.get("attribution")}):(o=new maptalks.TileLayer("maptalks-echarts-gl-baselayer",{urlTemplate:i,subdomains:["a","b","c"],attribution:e.get("attribution")}),r.setBaseLayer(o))),this._oldUrlTemplate=i,r.setCenter(e.get("center")),r.setZoom(e.get("zoom"),{animation:!1}),r.setPitch(e.get("pitch")),r.setBearing(e.get("bearing")),e.setMaptalks(r);var d=e.coordinateSystem;d.viewGL.scene.add(this._lightRoot),d.viewGL.add(this._groundMesh),this._updateGroundMesh(),this._sceneHelper.setScene(d.viewGL.scene),this._sceneHelper.updateLight(e),d.viewGL.setPostEffect(e.getModel("postEffect"),t),d.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling")),this._maptalks3DModel=e},afterRender:function(e,n,t,r){var i=r.renderer;this._sceneHelper.updateAmbientCubemap(i,e,t),this._sceneHelper.updateSkybox(i,e,t),e.coordinateSystem.viewGL.scene.traverse(function(o){o.material&&(o.material.define("fragment","NORMAL_UP_AXIS",2),o.material.define("fragment","NORMAL_FRONT_AXIS",1))})},updateCamera:function(e,n,t,r){e.coordinateSystem.setCameraOption(r),this._updateGroundMesh(),t.getZr().refresh()},_dispatchInteractAction:function(e,n,t){e.dispatchAction({type:"maptalks3DChangeCamera",pitch:n.getPitch(),zoom:uoe(n.getResolution())+1,center:n.getCenter().toArray(),bearing:n.getBearing(),maptalks3DId:this._maptalks3DModel&&this._maptalks3DModel.id})},_updateGroundMesh:function(){if(this._maptalks3DModel){var e=this._maptalks3DModel.coordinateSystem,n=e.dataToPoint(e.center);this._groundMesh.position.set(n[0],n[1],-.001);var t=new lt.Plane(new lt.Vector3(0,0,1),0),r=e.viewGL.camera.castRay(new lt.Vector2(-1,-1)),i=e.viewGL.camera.castRay(new lt.Vector2(1,1)),o=r.intersectPlane(t),d=i.intersectPlane(t),f=o.dist(d)/e.viewGL.rootNode.scale.x;this._groundMesh.scale.set(f,f,1)}},dispose:function(e,n){this._zrLayer&&this._zrLayer.dispose(),n.getZr().painter.delLayer(-1e3)}}),coe=12756274*Math.PI/(256*Math.pow(2,20));function uoe(e){return 19-Math.log(e/coe)/Math.LN2}function CC(){tP.apply(this,arguments),this.maxPitch=85,this.zoomOffset=1}(CC.prototype=new tP).constructor=CC,CC.prototype.type="maptalks3D";var doe=xj("maptalks3D",CC,function(e){e.forEach(function(n){n.setCameraOption(n.model.getMaptalksCameraOption())})});const hoe=doe;(0,Ct.D$)(function foe(e){e.registerComponentModel(ooe),e.registerComponentView(loe),e.registerCoordinateSystem("maptalks3D",hoe),e.registerAction({type:"maptalks3DChangeCamera",event:"maptalks3dcamerachanged",update:"maptalks3D:updateCamera"},function(n,t){t.eachComponent({mainType:"maptalks3D",query:n},function(r){r.setMaptalksCameraOption(n)})})});var poe=Ka.vec3,goe=Ct._y.dataStack.isDimensionStacked;function TV(e,n,t){for(var r=e.getDataExtent(n),i=e.getDataExtent(t),o=r[1]-r[0]||r[0],d=i[1]-i[0]||i[0],g=new Uint8Array(2500),_=0;_<e.count();_++){var w=e.get(n,_),S=e.get(t,_),k=Math.floor((w-r[0])/o*49),ne=50*Math.floor((S-i[0])/d*49)+k;g[ne]=g[ne]||1}var pe=0;for(_=0;_<g.length;_++)g[_]&&pe++;return pe/g.length}var Sj=Ka.vec3,yoe=Ct._y.dataStack.isDimensionStacked;function EV(e,n){var t=yoe(e,n[2]);return{dimension:t?e.getCalculationInfo("stackResultDimension"):n[2],isStacked:t}}function Coe(e){e.registerLayout(function(n,t){n.eachSeriesByType("bar3D",function(r){var i=r.coordinateSystem,o=i&&i.type;"globe"===o?function boe(e,n){var t=e.getData(),r=e.get("minHeight")||0,i=e.get("barSize"),o=["lng","lat","alt"].map(function(_){return e.coordDimToDataDim(_)[0]});if(null==i){var d=n.radius*Math.PI,f=TV(t,o[0],o[1]);i=[d/Math.sqrt(t.count()/f),d/Math.sqrt(t.count()/f)]}else Ct.D5.isArray(i)||(i=[i,i]);var g=EV(t,o);t.each(o,function(_,w,S,k){var V=t.get(g.dimension,k),ne=g.isStacked?V-S:n.altitudeAxis.scale.getExtent()[0],pe=Math.max(n.altitudeAxis.dataToCoord(S),r),De=n.dataToPoint([_,w,ne]),Re=n.dataToPoint([_,w,V]),Fe=Sj.sub([],Re,De);Sj.normalize(Fe,Fe),t.setItemLayout(k,[De,Fe,[i[0],pe,i[1]]])}),t.setLayout("orient",On.UP.array)}(r,i):"cartesian3D"===o?function moe(e,n){var t=e.getData(),r=e.get("barSize");if(null==r){var o,d,i=n.size,f=n.getAxis("x"),g=n.getAxis("y");o="category"===f.type?.7*f.getBandWidth():.6*Math.round(i[0]/Math.sqrt(t.count())),d="category"===g.type?.7*g.getBandWidth():.6*Math.round(i[1]/Math.sqrt(t.count())),r=[o,d]}else Ct.D5.isArray(r)||(r=[r,r]);var _=n.getAxis("z").scale.getExtent(),w=function voe(e){var n=e[0],t=e[1];return!(n>0&&t>0||n<0&&t<0)}(_),S=["x","y","z"].map(function(ne){return e.coordDimToDataDim(ne)[0]}),k=goe(t,S[2]),V=k?t.getCalculationInfo("stackResultDimension"):S[2];t.each(S,function(ne,pe,De,Re){var Fe=t.get(V,Re),Be=n.dataToPoint([ne,pe,k?Fe-De:w?0:_[0]]),at=n.dataToPoint([ne,pe,Fe]),ot=poe.dist(Be,at),St=[0,at[1]<Be[1]?-1:1,0];0===Math.abs(ot)&&(ot=.1),t.setItemLayout(Re,[Be,St,[r[0],ot,r[1]]])}),t.setLayout("orient",[1,0,0])}(r,i):"geo3D"===o?function xoe(e,n){var t=e.getData(),r=e.get("barSize"),i=e.get("minHeight")||0,o=["lng","lat","alt"].map(function(w){return e.coordDimToDataDim(w)[0]});if(null==r){var d=Math.min(n.size[0],n.size[2]),f=TV(t,o[0],o[1]);r=[d/Math.sqrt(t.count()/f),d/Math.sqrt(t.count()/f)]}else Ct.D5.isArray(r)||(r=[r,r]);var g=[0,1,0],_=EV(t,o);t.each(o,function(w,S,k,V){var ne=t.get(_.dimension,V),pe=_.isStacked?ne-k:n.altitudeAxis.scale.getExtent()[0],De=Math.max(n.altitudeAxis.dataToCoord(k),i),Re=n.dataToPoint([w,S,pe]);t.setItemLayout(V,[Re,g,[r[0],De,r[1]]])}),t.setLayout("orient",[1,0,0])}(r,i):("mapbox3D"===o||"maptalks3D"===o)&&function woe(e,n){var t=e.getData(),r=e.coordDimToDataDim("lng")[0],i=e.coordDimToDataDim("lat")[0],o=e.coordDimToDataDim("alt")[0],d=e.get("barSize"),f=e.get("minHeight")||0;if(null==d){var g=t.getDataExtent(r),_=t.getDataExtent(i),w=n.dataToPoint([g[0],_[0]]),S=n.dataToPoint([g[1],_[1]]),k=Math.min(Math.abs(w[0]-S[0]),Math.abs(w[1]-S[1]))||1,V=TV(t,r,i);d=[k/Math.sqrt(t.count()/V),k/Math.sqrt(t.count()/V)]}else Ct.D5.isArray(d)||(d=[d,d]),d[0]/=n.getScale()/16,d[1]/=n.getScale()/16;var ne=[0,0,1],pe=[r,i,o],De=EV(t,pe);t.each(pe,function(Re,Fe,ke,Be){var at=t.get(De.dimension,Be),St=n.dataToPoint([Re,Fe,De.isStacked?at-ke:0]),yt=n.dataToPoint([Re,Fe,at]),Ht=Math.max(yt[2]-St[2],f);t.setItemLayout(Be,[St,ne,[d[0],Ht,d[1]]])}),t.setLayout("orient",[1,0,0])}(r,i)})})}var AV={getFormattedLabel:function(e,n,t,r,i){t=t||"normal";var d=e.getData(r).getItemModel(n),f=e.getDataParams(n,r);null!=i&&f.value instanceof Array&&(f.value=f.value[i]);var _,g=d.get("normal"===t?["label","formatter"]:["emphasis","label","formatter"]);return null==g&&(g=d.get(["label","formatter"])),"function"==typeof g?(f.status=t,_=g(f)):"string"==typeof g&&(_=Ct.WU.formatTpl(g,f)),_},normalizeToArray:function(e){return e instanceof Array?e:null==e?[]:[e]}};const Qy=AV;function SC(e,n,t){var i=e.getData(),o=e.getRawValue(n),d=Ct.D5.isArray(o)?function r(S){var V=[],ne=function Soe(e,n){var t=[];return Ct.D5.each(e.dimensions,function(r){var i=e.getDimensionInfo(r),d=i.otherDims[n];null!=d&&!1!==d&&(t[d]=i.name)}),t}(i,"tooltip");function pe(De,Re){var Fe=i.getDimensionInfo(Re);if(Fe&&!1!==Fe.otherDims.tooltip){var ke=Fe.type,Be="- "+(Fe.tooltipName||Fe.name)+": "+("ordinal"===ke?De+"":"time"===ke?t?"":Ct.WU.formatTime("yyyy/MM/dd hh:mm:ss",De):Ct.WU.addCommas(De));Be&&V.push(Ct.WU.encodeHTML(Be))}}return ne.length?Ct.D5.each(ne,function(De){pe(i.get(De,n),De)}):Ct.D5.each(S,pe),"<br/>"+V.join("<br/>")}(o):Ct.WU.encodeHTML(Ct.WU.addCommas(o)),f=i.getName(n),g=Fo(i,n);Ct.D5.isObject(g)&&g.colorStops&&(g=(g.colorStops[0]||{}).color);var _=Ct.WU.getTooltipMarker(g=g||"transparent"),w=e.name;return"\0-"===w&&(w=""),w=w?Ct.WU.encodeHTML(w)+(t?": ":"<br/>"):"",t?_+w+d:w+_+(f?Ct.WU.encodeHTML(f)+": "+d:d)}function nP(e,n,t){t=t||e.getSource();var r=n||Ct.wL(e.get("coordinateSystem"))||["x","y","z"],i=Ct._y.createDimensions(t,{dimensionsDefine:t.dimensionsDefine||e.get("dimensions"),encodeDefine:t.encodeDefine||e.get("encode"),coordDimensions:r.map(function(f){var g=e.getReferringComponents(f+"Axis3D").models[0];return{type:g&&"category"===g.get("type")?"ordinal":"float",name:f}})});"cartesian3D"===e.get("coordinateSystem")&&i.forEach(function(f){if(r.indexOf(f.coordDim)>=0){var g=e.getReferringComponents(f.coordDim+"Axis3D").models[0];g&&"category"===g.get("type")&&(f.ordinalMeta=g.getOrdinalMeta())}});var o=Ct._y.dataStack.enableDataStack(e,i,{byIndex:!0,stackedCoordDimension:"z"}),d=new Ct.aV(i,e);return d.setCalculationInfo(o),d.initData(t),d}var Dj=Ct.wJ.extend({type:"series.bar3D",dependencies:["globe"],visualStyleAccessPathvisu:"itemStyle",getInitialData:function(e,n){return nP(this)},getFormattedLabel:function(e,n,t,r){var i=Qy.getFormattedLabel(this,e,n,t,r);return null==i&&(i=this.getData().get("z",e)),i},formatTooltip:function(e){return SC(this,e)},defaultOption:{coordinateSystem:"cartesian3D",globeIndex:0,grid3DIndex:0,zlevel:-10,bevelSize:0,bevelSmoothness:2,onGridPlane:"xy",shading:"color",minHeight:0,itemStyle:{opacity:1},label:{show:!1,distance:2,textStyle:{fontSize:14,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:3}},emphasis:{label:{show:!0}},animationDurationUpdate:500}});Ct.D5.merge(Dj.prototype,Zy);const Doe=Dj;var Ma=Ka.vec3,Moe=Ka.mat3,IV=Ei.extend(function(){return{attributes:{position:new Ei.Attribute("position","float",3,"POSITION"),normal:new Ei.Attribute("normal","float",3,"NORMAL"),color:new Ei.Attribute("color","float",4,"COLOR"),prevPosition:new Ei.Attribute("prevPosition","float",3),prevNormal:new Ei.Attribute("prevNormal","float",3)},dynamic:!0,enableNormal:!1,bevelSize:1,bevelSegments:0,_dataIndices:null,_vertexOffset:0,_triangleOffset:0}},{resetOffset:function(){this._vertexOffset=0,this._triangleOffset=0},setBarCount:function(e){var n=this.enableNormal,t=this.getBarVertexCount()*e,r=this.getBarTriangleCount()*e;this.vertexCount!==t&&(this.attributes.position.init(t),n?this.attributes.normal.init(t):this.attributes.normal.value=null,this.attributes.color.init(t)),this.triangleCount!==r&&(this.indices=t>65535?new Uint32Array(3*r):new Uint16Array(3*r),this._dataIndices=new Uint32Array(t))},getBarVertexCount:function(){var e=this.bevelSize>0?this.bevelSegments:0;return e>0?this._getBevelBarVertexCount(e):this.enableNormal?24:8},getBarTriangleCount:function(){var e=this.bevelSize>0?this.bevelSegments:0;return e>0?this._getBevelBarTriangleCount(e):12},_getBevelBarVertexCount:function(e){return 4*(e+1)*(e+1)*2},_getBevelBarTriangleCount:function(e){return(4*e+3+1)*(2*e+1)*2+4},setColor:function(e,n){for(var t=this.getBarVertexCount(),i=t*(e+1),o=t*e;o<i;o++)this.attributes.color.set(o,n);this.dirtyAttribute("color")},getDataIndexOfVertex:function(e){return this._dataIndices?this._dataIndices[e]:null},addBar:function(){for(var e=Ma.create,n=Ma.scaleAndAdd,t=e(),r=e(),i=e(),o=e(),d=e(),f=e(),g=e(),_=[],w=[],S=0;S<8;S++)_[S]=e();var k=[[0,1,5,4],[2,3,7,6],[4,5,6,7],[3,2,1,0],[0,4,7,3],[1,2,6,5]],V=[0,1,2,0,2,3],ne=[];for(S=0;S<k.length;S++)for(var pe=k[S],De=0;De<2;De++){for(var Re=[],Fe=0;Fe<3;Fe++)Re.push(pe[V[3*De+Fe]]);ne.push(Re)}return function(ke,Be,at,ot,St,yt){var Ht=this._vertexOffset;if(this.bevelSize>0&&this.bevelSegments>0)this._addBevelBar(ke,Be,at,ot,this.bevelSize,this.bevelSegments,St);else{Ma.copy(i,Be),Ma.normalize(i,i),Ma.cross(o,at,i),Ma.normalize(o,o),Ma.cross(r,i,o),Ma.normalize(o,o),Ma.negate(d,r),Ma.negate(f,i),Ma.negate(g,o),n(_[0],ke,r,ot[0]/2),n(_[0],_[0],o,ot[2]/2),n(_[1],ke,r,ot[0]/2),n(_[1],_[1],g,ot[2]/2),n(_[2],ke,d,ot[0]/2),n(_[2],_[2],g,ot[2]/2),n(_[3],ke,d,ot[0]/2),n(_[3],_[3],o,ot[2]/2),n(t,ke,i,ot[1]),n(_[4],t,r,ot[0]/2),n(_[4],_[4],o,ot[2]/2),n(_[5],t,r,ot[0]/2),n(_[5],_[5],g,ot[2]/2),n(_[6],t,d,ot[0]/2),n(_[6],_[6],g,ot[2]/2),n(_[7],t,d,ot[0]/2),n(_[7],_[7],o,ot[2]/2);var rn=this.attributes;if(this.enableNormal){w[0]=r,w[1]=d,w[2]=i,w[3]=f,w[4]=o,w[5]=g;for(var Kt=this._vertexOffset,gn=0;gn<k.length;gn++){for(var _n=3*this._triangleOffset,ln=0;ln<6;ln++)this.indices[_n++]=Kt+V[ln];Kt+=4,this._triangleOffset+=2}for(gn=0;gn<k.length;gn++){var Dn=w[gn];for(ln=0;ln<4;ln++)rn.position.set(this._vertexOffset,_[k[gn][ln]]),rn.normal.set(this._vertexOffset,Dn),rn.color.set(this._vertexOffset++,St)}}else{for(gn=0;gn<ne.length;gn++){for(_n=3*this._triangleOffset,ln=0;ln<3;ln++)this.indices[_n+ln]=ne[gn][ln]+this._vertexOffset;this._triangleOffset++}for(gn=0;gn<_.length;gn++)rn.position.set(this._vertexOffset,_[gn]),rn.color.set(this._vertexOffset++,St)}}var cn=this._vertexOffset;for(gn=Ht;gn<cn;gn++)this._dataIndices[gn]=yt}}(),_addBevelBar:function(){var e=Ma.create(),n=Ma.create(),t=Ma.create(),r=Moe.create(),i=[],o=[1,-1,-1,1],d=[1,1,-1,-1],f=[2,0];return function(g,_,w,S,k,V,ne){Ma.copy(n,_),Ma.normalize(n,n),Ma.cross(t,w,n),Ma.normalize(t,t),Ma.cross(e,n,t),Ma.normalize(t,t),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=n[0],r[4]=n[1],r[5]=n[2],r[6]=t[0],r[7]=t[1],r[8]=t[2],k=Math.min(S[0],S[2])/2*k;for(var pe=0;pe<3;pe++)i[pe]=Math.max(S[pe]-2*k,0);var De=(S[0]-i[0])/2,Re=(S[1]-i[1])/2,Fe=(S[2]-i[2])/2,ke=[],Be=[],at=this._vertexOffset,ot=[];for(pe=0;pe<2;pe++){ot[pe]=ot[pe]=[];for(var St=0;St<=V;St++)for(var yt=0;yt<4;yt++){(0===St&&0===pe||1===pe&&St===V)&&ot[pe].push(at);for(var Ht=0;Ht<=V;Ht++){var rn=Ht/V*Math.PI/2+Math.PI/2*yt,Kt=St/V*Math.PI/2+Math.PI/2*pe;Be[0]=De*Math.cos(rn)*Math.sin(Kt),Be[1]=Re*Math.cos(Kt),Be[2]=Fe*Math.sin(rn)*Math.sin(Kt),ke[0]=Be[0]+o[yt]*i[0]/2,ke[1]=Be[1]+Re+f[pe]*i[1]/2,ke[2]=Be[2]+d[yt]*i[2]/2,Math.abs(De-Re)<1e-6&&Math.abs(Re-Fe)<1e-6||(Be[0]/=De*De,Be[1]/=Re*Re,Be[2]/=Fe*Fe),Ma.normalize(Be,Be),Ma.transformMat3(ke,ke,r),Ma.transformMat3(Be,Be,r),Ma.add(ke,ke,g),this.attributes.position.set(at,ke),this.enableNormal&&this.attributes.normal.set(at,Be),this.attributes.color.set(at,ne),at++}}}var gn=4*V+3,_n=2*V+1,ln=gn+1;for(yt=0;yt<_n;yt++)for(pe=0;pe<=gn;pe++){var Dn=yt*ln+pe+this._vertexOffset,jt=yt*ln+(pe+1)%ln+this._vertexOffset,cn=(yt+1)*ln+(pe+1)%ln+this._vertexOffset,Yt=(yt+1)*ln+pe+this._vertexOffset;this.setTriangleIndices(this._triangleOffset++,[cn,Dn,jt]),this.setTriangleIndices(this._triangleOffset++,[cn,Yt,Dn])}this.setTriangleIndices(this._triangleOffset++,[ot[0][0],ot[0][2],ot[0][1]]),this.setTriangleIndices(this._triangleOffset++,[ot[0][0],ot[0][3],ot[0][2]]),this.setTriangleIndices(this._triangleOffset++,[ot[1][0],ot[1][1],ot[1][2]]),this.setTriangleIndices(this._triangleOffset++,[ot[1][0],ot[1][2],ot[1][3]]),this._vertexOffset=at}}()});Ct.D5.defaults(IV.prototype,pC),Ct.D5.defaults(IV.prototype,_V);const Toe=IV;var Eoe=Ka.vec3;const Aoe=Ct.TA.extend({type:"bar3D",__ecgl__:!0,init:function(e,n){this.groupGL=new lt.Node,this._api=n,this._labelsBuilder=new yV(256,256,n);var t=this;this._labelsBuilder.getLabelPosition=function(r,i,o){if(t._data){var d=t._data.getItemLayout(r);return Eoe.scaleAndAdd([],d[0],d[1],o+d[2][1])}return[0,0]},this._labelsBuilder.getMesh().renderOrder=100},render:function(e,n,t){var r=this._prevBarMesh;this._prevBarMesh=this._barMesh,this._barMesh=r,this._barMesh||(this._barMesh=new lt.Mesh({geometry:new Toe,shadowDepthMaterial:new lt.Material({shader:new lt.Shader(lt.Shader.source("ecgl.sm.depth.vertex"),lt.Shader.source("ecgl.sm.depth.fragment"))}),culling:"cartesian3D"===e.coordinateSystem.type,renderOrder:10,renderNormal:!0})),this.groupGL.remove(this._prevBarMesh),this.groupGL.add(this._barMesh),this.groupGL.add(this._labelsBuilder.getMesh());var i=e.coordinateSystem;if(this._doRender(e,t),i&&i.viewGL){i.viewGL.add(this.groupGL);var o=i.viewGL.isLinearSpace()?"define":"undefine";this._barMesh.material[o]("fragment","SRGB_DECODE")}this._data=e.getData(),this._labelsBuilder.updateData(this._data),this._labelsBuilder.updateLabels(),this._updateAnimation(e)},_updateAnimation:function(e){lt.updateVertexAnimation([["prevPosition","position"],["prevNormal","normal"]],this._prevBarMesh,this._barMesh,e)},_doRender:function(e,n){var t=e.getData(),r=e.get("shading"),i="color"!==r,o=this,d=this._barMesh,f="ecgl."+r;(!d.material||d.material.shader.name!==f)&&(d.material=lt.createMaterial(f,["VERTEX_COLOR"])),lt.setMaterialFromModel(r,d.material,e,n),d.geometry.enableNormal=i,d.geometry.resetOffset();var g=e.get("bevelSize"),_=e.get("bevelSmoothness");d.geometry.bevelSegments=_,d.geometry.bevelSize=g;var w=[],S=new Float32Array(4*t.count()),k=0,De=0,V=!1;t.each(function(Fe){if(t.hasValue(Fe)){var ke=Fo(t,Fe),Be=Bo(t,Fe);null==Be&&(Be=1),lt.parseColor(ke,w),w[3]*=Be,S[k++]=w[0],S[k++]=w[1],S[k++]=w[2],S[k++]=w[3],w[3]>0&&(De++,w[3]<.99&&(V=!0))}}),d.geometry.setBarCount(De);var ne=t.getLayout("orient"),pe=this._barIndexOfData=new Int32Array(t.count());De=0,t.each(function(Fe){if(t.hasValue(Fe)){var ke=t.getItemLayout(Fe),Be=ke[0],at=ke[1],ot=ke[2],St=4*Fe;w[0]=S[St++],w[1]=S[St++],w[2]=S[St++],w[3]=S[St++],w[3]>0&&(o._barMesh.geometry.addBar(Be,at,ne,ot,w,Fe),pe[Fe]=De++)}else pe[Fe]=-1}),d.geometry.dirty(),d.geometry.updateBoundingBox();var Re=d.material;Re.transparent=V,Re.depthMask=!V,d.geometry.sortTriangles=V,this._initHandler(e,n)},_initHandler:function(e,n){var t=e.getData(),r=this._barMesh,i="cartesian3D"===e.coordinateSystem.type;r.seriesIndex=e.seriesIndex;var o=-1;r.off("mousemove"),r.off("mouseout"),r.on("mousemove",function(d){var f=r.geometry.getDataIndexOfVertex(d.triangle[0]);f!==o&&(this._downplay(o),this._highlight(f),this._labelsBuilder.updateLabels([f]),i&&n.dispatchAction({type:"grid3DShowAxisPointer",value:[t.get("x",f),t.get("y",f),t.get("z",f,!0)]})),o=f,r.dataIndex=f},this),r.on("mouseout",function(d){this._downplay(o),this._labelsBuilder.updateLabels(),o=-1,r.dataIndex=-1,i&&n.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_highlight:function(e){var n=this._data;if(n){var t=this._barIndexOfData[e];if(!(t<0)){var i=n.getItemModel(e).getModel("emphasis.itemStyle"),o=i.get("color"),d=i.get("opacity");if(null==o){var f=Fo(n,e);o=Ct.$_.lift(f,-.4)}null==d&&(d=Bo(n,e));var g=lt.parseColor(o);g[3]*=d,this._barMesh.geometry.setColor(t,g),this._api.getZr().refresh()}}},_downplay:function(e){var n=this._data;if(n){var t=this._barIndexOfData[e];if(!(t<0)){var r=Fo(n,e),i=Bo(n,e),o=lt.parseColor(r);o[3]*=i,this._barMesh.geometry.setColor(t,o),this._api.getZr().refresh()}}},highlight:function(e,n,t,r){this._toggleStatus("highlight",e,n,t,r)},downplay:function(e,n,t,r){this._toggleStatus("downplay",e,n,t,r)},_toggleStatus:function(e,n,t,r,i){var o=n.getData(),d=Jr.queryDataIndex(o,i),f=this;null!=d?Ct.D5.each(Qy.normalizeToArray(d),function(g){"highlight"===e?this._highlight(g):this._downplay(g)},this):o.each(function(g){"highlight"===e?f._highlight(g):f._downplay(g)})},remove:function(){this.groupGL.removeAll()},dispose:function(){this._labelsBuilder.dispose(),this.groupGL.removeAll()}});(0,Ct.D$)(function Ioe(e){e.registerChartView(Aoe),e.registerSeriesModel(Doe),Coe(e),e.registerProcessor(function(n,t){n.eachSeriesByType("bar3d",function(r){var i=r.getData();i.filterSelf(function(o){return i.hasValue(o)})})})});var Poe=Ct.wJ.extend({type:"series.line3D",dependencies:["grid3D"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",getInitialData:function(e,n){return nP(this)},formatTooltip:function(e){return SC(this,e)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,grid3DIndex:0,lineStyle:{width:2},animationDurationUpdate:500}});const Roe=Poe;var Loe=z(7739),Ooe=Ka.vec3;lt.Shader.import(Z2);const koe=Ct.TA.extend({type:"line3D",__ecgl__:!0,init:function(e,n){this.groupGL=new lt.Node,this._api=n},render:function(e,n,t){var r=this._prevLine3DMesh;this._prevLine3DMesh=this._line3DMesh,this._line3DMesh=r,this._line3DMesh||(this._line3DMesh=new lt.Mesh({geometry:new pv({useNativeLine:!1,sortTriangles:!0}),material:new lt.Material({shader:lt.createShader("ecgl.meshLines3D")}),renderOrder:10}),this._line3DMesh.geometry.pick=this._pick.bind(this)),this.groupGL.remove(this._prevLine3DMesh),this.groupGL.add(this._line3DMesh);var i=e.coordinateSystem;if(i&&i.viewGL){i.viewGL.add(this.groupGL);var o=i.viewGL.isLinearSpace()?"define":"undefine";this._line3DMesh.material[o]("fragment","SRGB_DECODE")}this._doRender(e,t),this._data=e.getData(),this._camera=i.viewGL.camera,this.updateCamera(),this._updateAnimation(e)},updateCamera:function(){this._updateNDCPosition()},_doRender:function(e,n){var t=e.getData(),r=this._line3DMesh;r.geometry.resetOffset();var i=t.getLayout("points"),o=[],d=new Float32Array(i.length/3*4),f=0,g=!1;t.each(function(S){var k=Fo(t,S),V=Bo(t,S);null==V&&(V=1),lt.parseColor(k,o),o[3]*=V,d[f++]=o[0],d[f++]=o[1],d[f++]=o[2],d[f++]=o[3],o[3]<.99&&(g=!0)}),r.geometry.setVertexCount(r.geometry.getPolylineVertexCount(i)),r.geometry.setTriangleCount(r.geometry.getPolylineTriangleCount(i)),r.geometry.addPolyline(i,d,Jr.firstNotNull(e.get("lineStyle.width"),1)),r.geometry.dirty(),r.geometry.updateBoundingBox();var _=r.material;_.transparent=g,_.depthMask=!g;var w=e.getModel("debug.wireframe");w.get("show")?(r.geometry.createAttribute("barycentric","float",3),r.geometry.generateBarycentric(),r.material.set("both","WIREFRAME_TRIANGLE"),r.material.set("wireframeLineColor",lt.parseColor(w.get("lineStyle.color")||"rgba(0,0,0,0.5)")),r.material.set("wireframeLineWidth",Jr.firstNotNull(w.get("lineStyle.width"),1))):r.material.set("both","WIREFRAME_TRIANGLE"),this._points=i,this._initHandler(e,n)},_updateAnimation:function(e){lt.updateVertexAnimation([["prevPosition","position"],["prevPositionPrev","positionPrev"],["prevPositionNext","positionNext"]],this._prevLine3DMesh,this._line3DMesh,e)},_initHandler:function(e,n){var t=e.getData(),r=e.coordinateSystem,i=this._line3DMesh,o=-1;i.seriesIndex=e.seriesIndex,i.off("mousemove"),i.off("mouseout"),i.on("mousemove",function(d){var f=r.pointToData(d.point.array),g=t.indicesOfNearest("x",f[0])[0];g!==o&&(n.dispatchAction({type:"grid3DShowAxisPointer",value:[t.get("x",g),t.get("y",g),t.get("z",g)]}),i.dataIndex=g),o=g},this),i.on("mouseout",function(d){o=-1,i.dataIndex=-1,n.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_updateNDCPosition:function(){var e=new cr,n=this._camera;cr.multiply(e,n.projectionMatrix,n.viewMatrix);var t=this._positionNDC,r=this._points,i=r.length/3;(!t||t.length/2!==i)&&(t=this._positionNDC=new Float32Array(2*i));for(var o=[],d=0;d<i;d++){var f=3*d,g=2*d;o[0]=r[f],o[1]=r[f+1],o[2]=r[f+2],o[3]=1,Ooe.transformMat4(o,o,e.array),t[g]=o[0]/o[3],t[g+1]=o[1]/o[3]}},_pick:function(e,n,t,r,i,o){var d=this._positionNDC,g=this._data.hostModel.get("lineStyle.width"),_=-1,k=.5*t.viewport.width,V=.5*t.viewport.height;e=(e+1)*k,n=(n+1)*V;for(var ne=1;ne<d.length/2;ne++){var pe=(d[2*(ne-1)]+1)*k,De=(d[2*(ne-1)+1]+1)*V,Re=(d[2*ne]+1)*k,Fe=(d[2*ne+1]+1)*V;Loe.m(pe,De,Re,Fe,g,e,n)&&(_=(pe-e)*(pe-e)+(De-n)*(De-n)<(Re-e)*(Re-e)+(Fe-n)*(Fe-n)?ne-1:ne)}if(_>=0){var at=3*_,ot=new On(this._points[at],this._points[at+1],this._points[at+2]);o.push({dataIndex:_,point:ot,pointWorld:ot.clone(),target:this._line3DMesh,distance:this._camera.getWorldPosition().dist(ot)})}},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}});(0,Ct.D$)(function Noe(e){e.registerChartView(koe),e.registerSeriesModel(Roe),e.registerLayout(function(n,t){n.eachSeriesByType("line3D",function(r){var i=r.getData(),o=r.coordinateSystem;if(o){if("cartesian3D"!==o.type)return;var d=new Float32Array(3*i.count()),f=[],g=[],w=o.dimensions.map(function(S){return r.coordDimToDataDim(S)[0]});o&&i.each(w,function(S,k,V,ne){f[0]=S,f[1]=k,f[2]=V,o.dataToPoint(f,g),d[3*ne]=g[0],d[3*ne+1]=g[1],d[3*ne+2]=g[2]}),i.setLayout("points",d)}})})});const Foe=Ct.wJ.extend({type:"series.scatter3D",dependencies:["globe","grid3D","geo3D"],visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,getInitialData:function(e,n){return nP(this)},getFormattedLabel:function(e,n,t,r){var i=Qy.getFormattedLabel(this,e,n,t,r);if(null==i){var o=this.getData();i=o.get(o.dimensions[o.dimensions.length-1],e)}return i},formatTooltip:function(e){return SC(this,e)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,progressive:1e5,progressiveThreshold:1e5,grid3DIndex:0,globeIndex:0,symbol:"circle",symbolSize:10,blendMode:"source-over",label:{show:!1,position:"right",distance:5,textStyle:{fontSize:14,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:3}},itemStyle:{opacity:.8},emphasis:{label:{show:!0}},animationDurationUpdate:500}});function PV(e,r,t){(r=r||document.createElement("canvas")).width=e,r.height=e;var i=r.getContext("2d");return t&&t(i),r}var RV={getMarginByStyle:function(e){var n=e.minMargin||0,t=0;e.stroke&&"none"!==e.stroke&&(t=e.lineWidth??1);var r=e.shadowBlur||0,i=e.shadowOffsetX||0,o=e.shadowOffsetY||0,d={};return d.left=Math.max(t/2,-i+r,n),d.right=Math.max(t/2,i+r,n),d.top=Math.max(t/2,-o+r,n),d.bottom=Math.max(t/2,o+r,n),d},createSymbolSprite:function(e,n,t,r){var i=function Boe(e,n,t,r){Ct.D5.isArray(n)||(n=[n,n]);var i=RV.getMarginByStyle(t,r),o=n[0]+i.left+i.right,d=n[1]+i.top+i.bottom,f=Ct._y.createSymbol(e,0,0,n[0],n[1]),g=Math.max(o,d);f.x=i.left,f.y=i.top,o>d?f.y+=(g-d)/2:f.x+=(g-o)/2;var _=f.getBoundingRect();return f.x-=_.x,f.y-=_.y,f.setStyle(t),f.update(),f.__size=g,f}(e,n,t),o=RV.getMarginByStyle(t);return{image:PV(i.__size,r,function(d){Ct.z$(d,i)}),margin:o}},createSDFFromCanvas:function(e,n,t,r){return PV(n,r,function(i){var d=e.getContext("2d").getImageData(0,0,e.width,e.height);i.putImageData(function Voe(e,n,t){var r=n.width,i=n.height,o=e.canvas.width,d=e.canvas.height,f=r/o,g=i/d;function _(Re){return Re<128?1:-1}function w(Re,Fe){var ke=1/0;Re=Math.floor(Re*f),Fe=Math.floor(Fe*g);for(var ot=_(n.data[4*(Fe*r+Re)]),St=Math.max(Fe-t,0);St<Math.min(Fe+t,i);St++)for(var yt=Math.max(Re-t,0);yt<Math.min(Re+t,r);yt++){var Kt=yt-Re,gn=St-Fe;if(ot!==_(n.data[4*(St*r+yt)])){var _n=Kt*Kt+gn*gn;_n<ke&&(ke=_n)}}return ot*Math.sqrt(ke)}for(var S=e.createImageData(o,d),k=0;k<d;k++)for(var V=0;V<o;V++){var pe=w(V,k)/t*.5+.5,De=4*(k*o+V);S.data[De++]=255*(1-pe),S.data[De++]=255*(1-pe),S.data[De++]=255*(1-pe),S.data[De++]=255}return S}(i,d,t),0,0)})},createSimpleSprite:function(e,n){return PV(e,n,function(t){var r=e/2;t.beginPath(),t.arc(r,r,60,0,2*Math.PI,!1),t.closePath();var i=t.createRadialGradient(r,r,0,r,r,r);i.addColorStop(0,"rgba(255, 255, 255, 1)"),i.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),i.addColorStop(1,"rgba(255, 255, 255, 0)"),t.fillStyle=i,t.fill()})}};const Mj=RV;var Tj=Ka.vec3;const zoe={needsSortVertices:function(){return this.sortVertices},needsSortVerticesProgressively:function(){return this.needsSortVertices()&&this.vertexCount>=2e4},doSortVertices:function(e,n){var t=this.indices,r=Tj.create();if(!t){t=this.indices=this.vertexCount>65535?new Uint32Array(this.vertexCount):new Uint16Array(this.vertexCount);for(var i=0;i<t.length;i++)t[i]=i}if(0===n){var f,o=this.attributes.position,d=(e=e.array,0);for((!this._zList||this._zList.length!==this.vertexCount)&&(this._zList=new Float32Array(this.vertexCount)),i=0;i<this.vertexCount;i++){o.get(i,r);var g=Tj.sqrDist(r,e);isNaN(g)&&(g=1e7,d++),0===i?(f=g,g=0):g-=f,this._zList[i]=g}this._noneCount=d}if(this.vertexCount<2e4)0===n&&this._simpleSort(this._noneCount/this.vertexCount>.05);else for(i=0;i<3;i++)this._progressiveQuickSort(3*n+i);this.dirtyIndices()},_simpleSort:function(e){var n=this._zList,t=this.indices;function r(i,o){return n[o]-n[i]}e?Array.prototype.sort.call(t,r):q2.sort(t,r,0,t.length-1)},_progressiveQuickSort:function(e){var n=this._zList,t=this.indices;this._quickSort=this._quickSort||new q2,this._quickSort.step(t,function(r,i){return n[i]-n[r]},e)}};var LV=Ka.vec4;lt.Shader.import("@export ecgl.sdfSprite.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform float elapsedTime : 0;\n\nattribute vec3 position : POSITION;\n\n#ifdef VERTEX_SIZE\nattribute float size;\n#else\nuniform float u_Size;\n#endif\n\n#ifdef VERTEX_COLOR\nattribute vec4 a_FillColor: COLOR;\nvarying vec4 v_Color;\n#endif\n\n#ifdef VERTEX_ANIMATION\nattribute vec3 prevPosition;\nattribute float prevSize;\nuniform float percent : 1.0;\n#endif\n\n\n#ifdef POSITIONTEXTURE_ENABLED\nuniform sampler2D positionTexture;\n#endif\n\nvarying float v_Size;\n\nvoid main()\n{\n\n#ifdef POSITIONTEXTURE_ENABLED\n gl_Position = worldViewProjection * vec4(texture2D(positionTexture, position.xy).xy, -10.0, 1.0);\n#else\n\n #ifdef VERTEX_ANIMATION\n vec3 pos = mix(prevPosition, position, percent);\n #else\n vec3 pos = position;\n #endif\n gl_Position = worldViewProjection * vec4(pos, 1.0);\n#endif\n\n#ifdef VERTEX_SIZE\n#ifdef VERTEX_ANIMATION\n v_Size = mix(prevSize, size, percent);\n#else\n v_Size = size;\n#endif\n#else\n v_Size = u_Size;\n#endif\n\n#ifdef VERTEX_COLOR\n v_Color = a_FillColor;\n #endif\n\n gl_PointSize = v_Size;\n}\n\n@end\n\n@export ecgl.sdfSprite.fragment\n\nuniform vec4 color: [1, 1, 1, 1];\nuniform vec4 strokeColor: [1, 1, 1, 1];\nuniform float smoothing: 0.07;\n\nuniform float lineWidth: 0.0;\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\n\nvarying float v_Size;\n\nuniform sampler2D sprite;\n\n@import clay.util.srgb\n\nvoid main()\n{\n gl_FragColor = color;\n\n vec4 _strokeColor = strokeColor;\n\n#ifdef VERTEX_COLOR\n gl_FragColor *= v_Color;\n #endif\n\n#ifdef SPRITE_ENABLED\n float d = texture2D(sprite, gl_PointCoord).r;\n gl_FragColor.a *= smoothstep(0.5 - smoothing, 0.5 + smoothing, d);\n\n if (lineWidth > 0.0) {\n float sLineWidth = lineWidth / 2.0;\n\n float outlineMaxValue0 = 0.5 + sLineWidth;\n float outlineMaxValue1 = 0.5 + sLineWidth + smoothing;\n float outlineMinValue0 = 0.5 - sLineWidth - smoothing;\n float outlineMinValue1 = 0.5 - sLineWidth;\n\n if (d <= outlineMaxValue1 && d >= outlineMinValue0) {\n float a = _strokeColor.a;\n if (d <= outlineMinValue1) {\n a = a * smoothstep(outlineMinValue0, outlineMinValue1, d);\n }\n else {\n a = a * smoothstep(outlineMaxValue1, outlineMaxValue0, d);\n }\n gl_FragColor.rgb = mix(gl_FragColor.rgb * gl_FragColor.a, _strokeColor.rgb, a);\n gl_FragColor.a = gl_FragColor.a * (1.0 - a) + a;\n }\n }\n#endif\n\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(gl_FragColor);\n#endif\n}\n@end");var Uoe=lt.Mesh.extend(function(){var e=new lt.Geometry({dynamic:!0,attributes:{color:new lt.Geometry.Attribute("color","float",4,"COLOR"),position:new lt.Geometry.Attribute("position","float",3,"POSITION"),size:new lt.Geometry.Attribute("size","float",1),prevPosition:new lt.Geometry.Attribute("prevPosition","float",3),prevSize:new lt.Geometry.Attribute("prevSize","float",1)}});Object.assign(e,zoe);var n=new lt.Material({shader:lt.createShader("ecgl.sdfSprite"),transparent:!0,depthMask:!1});n.enableTexture("sprite"),n.define("both","VERTEX_COLOR"),n.define("both","VERTEX_SIZE");var t=new lt.Texture2D({image:document.createElement("canvas"),flipY:!1});return n.set("sprite",t),e.pick=this._pick.bind(this),{geometry:e,material:n,mode:lt.Mesh.POINTS,sizeScale:1}},{_pick:function(e,n,t,r,i,o){var d=this._positionNDC;if(d)for(var f=t.viewport,g=2/f.width,_=2/f.height,w=this.geometry.vertexCount-1;w>=0;w--){var S,k=d[2*(S=this.geometry.indices?this.geometry.indices[w]:w)],V=d[2*S+1],pe=this.geometry.attributes.size.get(S)/this.sizeScale/2;if(e>k-pe*g&&e<k+pe*g&&n>V-pe*_&&n<V+pe*_){var De=new lt.Vector3,Re=new lt.Vector3;this.geometry.attributes.position.get(S,De.array),lt.Vector3.transformMat4(Re,De,this.worldTransform),o.push({vertexIndex:S,point:De,pointWorld:Re,target:this,distance:Re.distance(r.getWorldPosition())})}}},updateNDCPosition:function(e,n,t){var r=this._positionNDC,i=this.geometry;(!r||r.length/2!==i.vertexCount)&&(r=this._positionNDC=new Float32Array(2*i.vertexCount));for(var o=LV.create(),d=0;d<i.vertexCount;d++)i.attributes.position.get(d,o),o[3]=1,LV.transformMat4(o,o,e.array),LV.scale(o,o,1/o[3]),r[2*d]=o[0],r[2*d+1]=o[1]}});const Goe=Uoe;function OV(e,n){this.rootNode=new lt.Node,this.is2D=e,this._labelsBuilder=new yV(256,256,n),this._labelsBuilder.getMesh().renderOrder=100,this.rootNode.add(this._labelsBuilder.getMesh()),this._api=n,this._spriteImageCanvas=document.createElement("canvas"),this._startDataIndex=0,this._endDataIndex=0,this._sizeScale=1}OV.prototype={constructor:OV,highlightOnMouseover:!0,update:function(e,n,t,r,i){var o=this._prevMesh;this._prevMesh=this._mesh,this._mesh=o;var d=e.getData();if(null==r&&(r=0),null==i&&(i=d.count()),this._startDataIndex=r,this._endDataIndex=i-1,!this._mesh){var f=this._prevMesh&&this._prevMesh.material;this._mesh=new Goe({renderOrder:10,frustumCulling:!1}),f&&(this._mesh.material=f)}f=this._mesh.material;var g=this._mesh.geometry,_=g.attributes;this.rootNode.remove(this._prevMesh),this.rootNode.add(this._mesh),this._setPositionTextureToMesh(this._mesh,this._positionTexture);var w=this._getSymbolInfo(e,r,i),S=t.getDevicePixelRatio(),k=e.getModel("itemStyle").getItemStyle(),V=e.get("large"),ne=1;w.maxSize>2?(ne=this._updateSymbolSprite(e,k,w,S),f.enableTexture("sprite")):f.disableTexture("sprite"),_.position.init(i-r);var pe=[];if(V){f.undefine("VERTEX_SIZE"),f.undefine("VERTEX_COLOR");var De=function yae(e){const n=e.getVisual("style");if(n)return n[e.getVisual("drawType")]}(d),Re=function bae(e){return e.getVisual("style").opacity}(d);lt.parseColor(De,pe),pe[3]*=Re,f.set({color:pe,u_Size:w.maxSize*this._sizeScale})}else f.set({color:[1,1,1,1]}),f.define("VERTEX_SIZE"),f.define("VERTEX_COLOR"),_.size.init(i-r),_.color.init(i-r),this._originalOpacity=new Float32Array(i-r);for(var Fe=d.getLayout("points"),ke=_.position.value,at=0;at<i-r;at++){var ot=3*at,St=2*at;if(this.is2D?(ke[ot]=Fe[St],ke[ot+1]=Fe[St+1],ke[ot+2]=-10):(ke[ot]=Fe[ot],ke[ot+1]=Fe[ot+1],ke[ot+2]=Fe[ot+2]),!V){De=Fo(d,at),Re=Bo(d,at),lt.parseColor(De,pe),pe[3]*=Re,_.color.set(at,pe);var yt=d.getItemVisual(at,"symbolSize");yt=yt instanceof Array?Math.max(yt[0],yt[1]):yt,isNaN(yt)&&(yt=0),_.size.value[at]=yt*ne*this._sizeScale,this._originalOpacity[at]=pe[3]}}this._mesh.sizeScale=ne,g.updateBoundingBox(),g.dirty(),this._updateMaterial(e,k);var Ht=e.coordinateSystem;Ht&&Ht.viewGL&&f[Ht.viewGL.isLinearSpace()?"define":"undefine"]("fragment","SRGB_DECODE"),V||this._updateLabelBuilder(e,r,i),this._updateHandler(e,n,t),this._updateAnimation(e),this._api=t},getPointsMesh:function(){return this._mesh},updateLabels:function(e){this._labelsBuilder.updateLabels(e)},hideLabels:function(){this.rootNode.remove(this._labelsBuilder.getMesh())},showLabels:function(){this.rootNode.add(this._labelsBuilder.getMesh())},dispose:function(){this._labelsBuilder.dispose()},_updateSymbolSprite:function(e,n,t,r){t.maxSize=Math.min(2*t.maxSize,200);var i=[];return t.aspect>1?(i[0]=t.maxSize,i[1]=t.maxSize/t.aspect):(i[1]=t.maxSize,i[0]=t.maxSize*t.aspect),i[0]=i[0]||1,i[1]=i[1]||1,(this._symbolType!==t.type||!function Woe(e,n){return e&&n&&e[0]===n[0]&&e[1]===n[1]}(this._symbolSize,i)||this._lineWidth!==n.lineWidth)&&(Mj.createSymbolSprite(t.type,i,{fill:"#fff",lineWidth:n.lineWidth,stroke:"transparent",shadowColor:"transparent",minMargin:Math.min(i[0]/2,10)},this._spriteImageCanvas),Mj.createSDFFromCanvas(this._spriteImageCanvas,Math.min(this._spriteImageCanvas.width,32),20,this._mesh.material.get("sprite").image),this._symbolType=t.type,this._symbolSize=i,this._lineWidth=n.lineWidth),this._spriteImageCanvas.width/t.maxSize*r},_updateMaterial:function(e,n){var t="lighter"===e.get("blendMode")?lt.additiveBlend:null,r=this._mesh.material;r.blend=t,r.set("lineWidth",n.lineWidth/20);var i=lt.parseColor(n.stroke);r.set("strokeColor",i),r.transparent=!0,r.depthMask=!1,r.depthTest=!this.is2D,r.sortVertices=!this.is2D},_updateLabelBuilder:function(e,d,t){var r=e.getData(),i=this._mesh.geometry,o=i.attributes.position.value,f=this._mesh.sizeScale;this._labelsBuilder.updateData(r,d=this._startDataIndex,t),this._labelsBuilder.getLabelPosition=function(g,_,w){var S=3*(g-d);return[o[S],o[S+1],o[S+2]]},this._labelsBuilder.getLabelDistance=function(g,_,w){return i.attributes.size.get(g-d)/f/2+w},this._labelsBuilder.updateLabels()},_updateAnimation:function(e){lt.updateVertexAnimation([["prevPosition","position"],["prevSize","size"]],this._prevMesh,this._mesh,e)},_updateHandler:function(e,n,t){var g,r=e.getData(),i=this._mesh,o=this,d=-1,f=e.coordinateSystem&&"cartesian3D"===e.coordinateSystem.type;f&&(g=e.coordinateSystem.model),i.seriesIndex=e.seriesIndex,i.off("mousemove"),i.off("mouseout"),i.on("mousemove",function(_){var w=_.vertexIndex+o._startDataIndex;w!==d&&(this.highlightOnMouseover&&(this.downplay(r,d),this.highlight(r,w),this._labelsBuilder.updateLabels([w])),f&&t.dispatchAction({type:"grid3DShowAxisPointer",value:[r.get(e.coordDimToDataDim("x")[0],w),r.get(e.coordDimToDataDim("y")[0],w),r.get(e.coordDimToDataDim("z")[0],w)],grid3DIndex:g.componentIndex})),i.dataIndex=w,d=w},this),i.on("mouseout",function(_){this.highlightOnMouseover&&(this.downplay(r,_.vertexIndex+o._startDataIndex),this._labelsBuilder.updateLabels()),d=-1,i.dataIndex=-1,f&&t.dispatchAction({type:"grid3DHideAxisPointer",grid3DIndex:g.componentIndex})},this)},updateLayout:function(e,n,t){var r=e.getData();if(this._mesh){var i=this._mesh.geometry.attributes.position.value,o=r.getLayout("points");if(this.is2D)for(var d=0;d<o.length/2;d++){var f=3*d,g=2*d;i[f]=o[g],i[f+1]=o[g+1],i[f+2]=-10}else for(d=0;d<o.length;d++)i[d]=o[d];this._mesh.geometry.dirty(),t.getZr().refresh()}},updateView:function(e){if(this._mesh){var n=new cr;cr.mul(n,e.viewMatrix,this._mesh.worldTransform),cr.mul(n,e.projectionMatrix,n),this._mesh.updateNDCPosition(n,this.is2D,this._api)}},highlight:function(e,n){if(!(n>this._endDataIndex||n<this._startDataIndex)){var r=e.getItemModel(n).getModel("emphasis.itemStyle"),i=r.get("color"),o=r.get("opacity");if(null==i){var d=Fo(e,n);i=Ct.$_.lift(d,-.4)}null==o&&(o=Bo(e,n));var f=lt.parseColor(i);f[3]*=o,this._mesh.geometry.attributes.color.set(n-this._startDataIndex,f),this._mesh.geometry.dirtyAttribute("color"),this._api.getZr().refresh()}},downplay:function(e,n){if(!(n>this._endDataIndex||n<this._startDataIndex)){var t=Fo(e,n),r=Bo(e,n),i=lt.parseColor(t);i[3]*=r,this._mesh.geometry.attributes.color.set(n-this._startDataIndex,i),this._mesh.geometry.dirtyAttribute("color"),this._api.getZr().refresh()}},fadeOutAll:function(e){if(this._originalOpacity){for(var n=this._mesh.geometry,t=0;t<n.vertexCount;t++)n.attributes.color.value[4*t+3]=this._originalOpacity[t]*e;n.dirtyAttribute("color"),this._api.getZr().refresh()}},fadeInAll:function(){this.fadeOutAll(1)},setPositionTexture:function(e){this._mesh&&this._setPositionTextureToMesh(this._mesh,e),this._positionTexture=e},removePositionTexture:function(){this._positionTexture=null,this._mesh&&this._setPositionTextureToMesh(this._mesh,null)},setSizeScale:function(e){if(e!==this._sizeScale){if(this._mesh){var n=this._mesh.material.get("u_Size");this._mesh.material.set("u_Size",n/this._sizeScale*e);var t=this._mesh.geometry.attributes;if(t.size.value)for(var r=0;r<t.size.value.length;r++)t.size.value[r]=t.size.value[r]/this._sizeScale*e}this._sizeScale=e}},_setPositionTextureToMesh:function(e,n){n&&e.material.set("positionTexture",n),e.material[n?"enableTexture":"disableTexture"]("positionTexture")},_getSymbolInfo:function(e,n,t){if(e.get("large"))return(r=Jr.firstNotNull(e.get("symbolSize"),1))instanceof Array?(_=Math.max(r[0],r[1]),o=r[0]/r[1]):(_=r,o=1),{maxSize:r,type:e.get("symbol"),aspect:o};for(var o,i=e.getData(),f=i.getItemVisual(0,"symbol")||"circle",_=0,w=n;w<t;w++){var k,r=i.getItemVisual(w,"symbolSize"),S=i.getItemVisual(w,"symbol");if(r instanceof Array)k=r[0]/r[1],_=Math.max(Math.max(r[0],r[1]),_);else{if(isNaN(r))continue;k=1,_=Math.max(r,_)}f=S,o=k}return{maxSize:_,type:f,aspect:o}}};const DC=OV,joe=Ct.TA.extend({type:"scatter3D",hasSymbolVisual:!0,__ecgl__:!0,init:function(e,n){this.groupGL=new lt.Node,this._pointsBuilderList=[],this._currentStep=0},render:function(e,n,t){if(this.groupGL.removeAll(),e.getData().count()){var r=e.coordinateSystem;if(r&&r.viewGL){r.viewGL.add(this.groupGL),this._camera=r.viewGL.camera;var i=this._pointsBuilderList[0];i||(i=this._pointsBuilderList[0]=new DC(!1,t)),this._pointsBuilderList.length=1,this.groupGL.add(i.rootNode),i.update(e,n,t),i.updateView(r.viewGL.camera)}}},incrementalPrepareRender:function(e,n,t){var r=e.coordinateSystem;r&&r.viewGL&&(r.viewGL.add(this.groupGL),this._camera=r.viewGL.camera),this.groupGL.removeAll(),this._currentStep=0},incrementalRender:function(e,n,t,r){if(!(e.end<=e.start)){var i=this._pointsBuilderList[this._currentStep];i||(i=new DC(!1,r),this._pointsBuilderList[this._currentStep]=i),this.groupGL.add(i.rootNode),i.update(n,t,r,e.start,e.end),i.updateView(n.coordinateSystem.viewGL.camera),this._currentStep++}},updateCamera:function(){this._pointsBuilderList.forEach(function(e){e.updateView(this._camera)},this)},highlight:function(e,n,t,r){this._toggleStatus("highlight",e,n,t,r)},downplay:function(e,n,t,r){this._toggleStatus("downplay",e,n,t,r)},_toggleStatus:function(e,n,t,r,i){var o=n.getData(),d=Jr.queryDataIndex(o,i),f="highlight"===e;null!=d?Ct.D5.each(Qy.normalizeToArray(d),function(g){for(var _=0;_<this._pointsBuilderList.length;_++){var w=this._pointsBuilderList[_];f?w.highlight(o,g):w.downplay(o,g)}},this):o.each(function(g){for(var _=0;_<this._pointsBuilderList.length;_++){var w=this._pointsBuilderList[_];f?w.highlight(o,g):w.downplay(o,g)}})},dispose:function(){this._pointsBuilderList.forEach(function(e){e.dispose()}),this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});(0,Ct.D$)(function Zoe(e){e.registerChartView(joe),e.registerSeriesModel(Foe),e.registerLayout({seriesType:"scatter3D",reset:function(n){var t=n.coordinateSystem;if(t){var r=t.dimensions;if(r.length<3)return;var i=r.map(function(f){return n.coordDimToDataDim(f)[0]}),o=[],d=[];return{progress:function(f,g){for(var _=new Float32Array(3*(f.end-f.start)),w=f.start;w<f.end;w++){var S=3*(w-f.start);o[0]=g.get(i[0],w),o[1]=g.get(i[1],w),o[2]=g.get(i[2],w),t.dataToPoint(o,d),_[S]=d[0],_[S+1]=d[1],_[S+2]=d[2]}g.setLayout("points",_)}}}}})});var wo=Ka.vec3,Ij=Ka.vec2,rh=wo.normalize,rP=wo.cross,Pj=wo.sub,kV=wo.add,Wf=wo.create,jf=Wf(),Ec=Wf(),Zf=Wf(),MC=Wf(),Rj=[],Lj=[];function Yoe(e,n){Ij.copy(Rj,e[0]),Ij.copy(Lj,e[1]);var t=[],r=t[0]=Wf(),i=t[1]=Wf(),o=t[2]=Wf(),d=t[3]=Wf();n.dataToPoint(Rj,r),n.dataToPoint(Lj,d),rh(jf,r),Pj(Ec,d,r),rh(Ec,Ec),rP(Zf,Ec,jf),rh(Zf,Zf),rP(Ec,jf,Zf),kV(i,jf,Ec),rh(i,i),rh(jf,d),Pj(Ec,r,d),rh(Ec,Ec),rP(Zf,Ec,jf),rh(Zf,Zf),rP(Ec,jf,Zf),kV(o,jf,Ec),rh(o,o),kV(MC,r,d),rh(MC,MC);var f=wo.dot(r,MC),g=wo.dot(MC,i),_=(Math.max(wo.len(r),wo.len(d))-f)/g*2;return wo.scaleAndAdd(i,r,i,_),wo.scaleAndAdd(o,d,o,_),t}function Oj(e,n){for(var t=new Float32Array(3*e.length),r=0,i=[],o=0;o<e.length;o++)n.dataToPoint(e[o],i),t[r++]=i[0],t[r++]=i[1],t[r++]=i[2];return t}function kj(e){var n=[];return e.each(function(t){var r=e.getItemModel(t),i=r.option instanceof Array?r.option:r.getShallow("coords",!0);n.push(i)}),{coordsList:n}}function Nj(e,n,t){var r=e.getData(),i=e.get("polyline"),o=kj(r);r.setLayout("lineType",i?"polyline":"cubicBezier"),r.each(function(d){var f=o.coordsList[d],g=i?Oj(f,n):function Xoe(e,n,t){var r=[],i=r[0]=wo.create(),o=r[1]=wo.create(),d=r[2]=wo.create(),f=r[3]=wo.create();n.dataToPoint(e[0],i),n.dataToPoint(e[1],f);var g=wo.dist(i,f);return wo.lerp(o,i,f,.3),wo.lerp(d,i,f,.3),wo.scaleAndAdd(o,o,t,Math.min(.1*g,10)),wo.scaleAndAdd(d,d,t,Math.min(.1*g,10)),r}(f,n,t);r.setItemLayout(d,g)})}function Koe(e,n){e.eachSeriesByType("lines3D",function(t){var r=t.coordinateSystem;"globe"===r.type?function $oe(e,n){var t=e.getData(),r=e.get("polyline");t.setLayout("lineType",r?"polyline":"cubicBezier");var i=kj(t);t.each(function(o){t.setItemLayout(o,(r?Oj:Yoe)(i.coordsList[o],n))})}(t,r):"geo3D"===r.type?Nj(t,r,[0,1,0]):("mapbox3D"===r.type||"maptalks3D"===r.type)&&Nj(t,r,[0,0,1])})}const Qoe=Ct.wJ.extend({type:"series.lines3D",dependencies:["globe"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",getInitialData:function(e,n){var t=new Ct.aV(["value"],this);return t.hasItemOption=!1,t.initData(e.data,[],function(r,i,o,d){if(r instanceof Array)return NaN;t.hasItemOption=!0;var f=r.value;return null!=f?f instanceof Array?f[d]:f:void 0}),t},defaultOption:{coordinateSystem:"globe",globeIndex:0,geo3DIndex:0,zlevel:-10,polyline:!1,effect:{show:!1,period:4,trailWidth:4,trailLength:.2,spotIntensity:6},silent:!0,blendMode:"source-over",lineStyle:{width:1,opacity:.5}}});var Fj=Ka.vec3;function Joe(e){return e>0?1:-1}lt.Shader.import("@export ecgl.trail2.vertex\nattribute vec3 position: POSITION;\nattribute vec3 positionPrev;\nattribute vec3 positionNext;\nattribute float offset;\nattribute float dist;\nattribute float distAll;\nattribute float start;\n\nattribute vec4 a_Color : COLOR;\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform vec4 viewport : VIEWPORT;\nuniform float near : NEAR;\n\nuniform float speed : 0;\nuniform float trailLength: 0.3;\nuniform float time;\nuniform float period: 1000;\n\nuniform float spotSize: 1;\n\nvarying vec4 v_Color;\nvarying float v_Percent;\nvarying float v_SpotPercent;\n\n@import ecgl.common.wireframe.vertexHeader\n\n@import ecgl.lines3D.clipNear\n\nvoid main()\n{\n @import ecgl.lines3D.expandLine\n\n gl_Position = currProj;\n\n v_Color = a_Color;\n\n @import ecgl.common.wireframe.vertexMain\n\n#ifdef CONSTANT_SPEED\n float t = mod((speed * time + start) / distAll, 1. + trailLength) - trailLength;\n#else\n float t = mod((time + start) / period, 1. + trailLength) - trailLength;\n#endif\n\n float trailLen = distAll * trailLength;\n\n v_Percent = (dist - t * distAll) / trailLen;\n\n v_SpotPercent = spotSize / distAll;\n\n }\n@end\n\n\n@export ecgl.trail2.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\nuniform float spotIntensity: 5;\n\nvarying vec4 v_Color;\nvarying float v_Percent;\nvarying float v_SpotPercent;\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.util.srgb\n\nvoid main()\n{\n if (v_Percent > 1.0 || v_Percent < 0.0) {\n discard;\n }\n\n float fade = v_Percent;\n\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(color * v_Color);\n#else\n gl_FragColor = color * v_Color;\n#endif\n\n @import ecgl.common.wireframe.fragmentMain\n\n if (v_Percent > (1.0 - v_SpotPercent)) {\n gl_FragColor.rgb *= spotIntensity;\n }\n\n gl_FragColor.a *= fade;\n}\n\n@end");const ese=lt.Mesh.extend(function(){var e=new lt.Material({shader:new lt.Shader(lt.Shader.source("ecgl.trail2.vertex"),lt.Shader.source("ecgl.trail2.fragment")),transparent:!0,depthMask:!1}),n=new pv({dynamic:!0});return n.createAttribute("dist","float",1),n.createAttribute("distAll","float",1),n.createAttribute("start","float",1),{geometry:n,material:e,culling:!1,$ignorePicking:!0}},{updateData:function(e,n,t){var r=e.hostModel,i=this.geometry,o=r.getModel("effect"),d=o.get("trailWidth")*n.getDevicePixelRatio(),f=o.get("trailLength"),g=r.get("effect.constantSpeed"),_=1e3*r.get("effect.period"),w=null!=g;w?this.material.set("speed",g/1e3):this.material.set("period",_),this.material[w?"define":"undefine"]("vertex","CONSTANT_SPEED");var S=r.get("polyline");i.trailLength=f,this.material.set("trailLength",f),i.resetOffset(),["position","positionPrev","positionNext"].forEach(function(St){i.attributes[St].value=t.attributes[St].value}),["dist","distAll","start","offset","color"].forEach(function(St){i.attributes[St].init(i.vertexCount)}),i.indices=t.indices;var V=[],ne=o.get("trailColor"),pe=o.get("trailOpacity"),De=null!=ne,Re=null!=pe;this.updateWorldTransform();var Fe=this.worldTransform.x.len(),ke=this.worldTransform.y.len(),Be=this.worldTransform.z.len(),at=0,ot=0;e.each(function(St){var yt=e.getItemLayout(St),Ht=Re?pe:Bo(e,St),rn=Fo(e,St);null==Ht&&(Ht=1),(V=lt.parseColor(De?ne:rn,V))[3]*=Ht;for(var Kt=S?t.getPolylineVertexCount(yt):t.getCubicCurveVertexCount(yt[0],yt[1],yt[2],yt[3]),gn=0,_n=[],ln=[],Dn=at;Dn<at+Kt;Dn++)i.attributes.position.get(Dn,_n),_n[0]*=Fe,_n[1]*=ke,_n[2]*=Be,Dn>at&&(gn+=Fj.dist(_n,ln)),i.attributes.dist.set(Dn,gn),Fj.copy(ln,_n);ot=Math.max(ot,gn);var jt=Math.random()*(w?gn:_);for(Dn=at;Dn<at+Kt;Dn++)i.attributes.distAll.set(Dn,gn),i.attributes.start.set(Dn,jt),i.attributes.offset.set(Dn,Joe(t.attributes.offset.get(Dn))*d/2),i.attributes.color.set(Dn,V);at+=Kt}),this.material.set("spotSize",.1*ot*f),this.material.set("spotIntensity",o.get("spotIntensity")),i.dirty()},setAnimationTime:function(e){this.material.set("time",e)}});lt.Shader.import(Z2);const nse=Ct.TA.extend({type:"lines3D",__ecgl__:!0,init:function(e,n){this.groupGL=new lt.Node,this._meshLinesMaterial=new lt.Material({shader:lt.createShader("ecgl.meshLines3D"),transparent:!0,depthMask:!1}),this._linesMesh=new lt.Mesh({geometry:new pv,material:this._meshLinesMaterial,$ignorePicking:!0}),this._trailMesh=new ese},render:function(e,n,t){this.groupGL.add(this._linesMesh);var r=e.coordinateSystem,i=e.getData();if(r&&r.viewGL){r.viewGL.add(this.groupGL),this._updateLines(e,n,t);var d=r.viewGL.isLinearSpace()?"define":"undefine";this._linesMesh.material[d]("fragment","SRGB_DECODE"),this._trailMesh.material[d]("fragment","SRGB_DECODE")}var f=this._trailMesh;if(f.stopAnimation(),e.get("effect.show")){this.groupGL.add(f),f.updateData(i,t,this._linesMesh.geometry),f.__time=f.__time||0;var g=36e5;this._curveEffectsAnimator=f.animate("",{loop:!0}).when(g,{__time:g}).during(function(){f.setAnimationTime(f.__time)}).start()}else this.groupGL.remove(f),this._curveEffectsAnimator=null;this._linesMesh.material.blend=this._trailMesh.material.blend="lighter"===e.get("blendMode")?lt.additiveBlend:null},pauseEffect:function(){this._curveEffectsAnimator&&this._curveEffectsAnimator.pause()},resumeEffect:function(){this._curveEffectsAnimator&&this._curveEffectsAnimator.resume()},toggleEffect:function(){var e=this._curveEffectsAnimator;e&&(e.isPaused()?e.resume():e.pause())},_updateLines:function(e,n,t){var r=e.getData(),i=e.coordinateSystem,o=this._linesMesh.geometry,d=e.get("polyline");o.expandLine=!0;var f=function tse(e){return null!=e.radius?e.radius:null!=e.size?Math.max(e.size[0],e.size[1],e.size[2]):100}(i);o.segmentScale=f/20;var g="lineStyle.width".split("."),_=t.getDevicePixelRatio(),w=0;r.each(function(ne){var De=r.getItemModel(ne).get(g);null==De&&(De=1),r.setItemVisual(ne,"lineWidth",De),w=Math.max(De,w)}),o.useNativeLine=!1;var S=0,k=0;r.each(function(ne){var pe=r.getItemLayout(ne);d?(S+=o.getPolylineVertexCount(pe),k+=o.getPolylineTriangleCount(pe)):(S+=o.getCubicCurveVertexCount(pe[0],pe[1],pe[2],pe[3]),k+=o.getCubicCurveTriangleCount(pe[0],pe[1],pe[2],pe[3]))}),o.setVertexCount(S),o.setTriangleCount(k),o.resetOffset();var V=[];r.each(function(ne){var pe=r.getItemLayout(ne),De=Fo(r,ne),Re=Bo(r,ne),Fe=r.getItemVisual(ne,"lineWidth")*_;null==Re&&(Re=1),(V=lt.parseColor(De,V))[3]*=Re,d?o.addPolyline(pe,V,Fe):o.addCubicCurve(pe[0],pe[1],pe[2],pe[3],V,Fe)}),o.dirty()},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}});function Bj(e,n){for(var t=[],r=0;r<n.length;r++)t.push(e.dataToPoint(n[r]));return t}(0,Ct.D$)(function rse(e){e.registerChartView(nse),e.registerSeriesModel(Qoe),e.registerLayout(Koe),e.registerAction({type:"lines3DPauseEffect",event:"lines3deffectpaused",update:"series.lines3D:pauseEffect"},function(){}),e.registerAction({type:"lines3DResumeEffect",event:"lines3deffectresumed",update:"series.lines3D:resumeEffect"},function(){}),e.registerAction({type:"lines3DToggleEffect",event:"lines3deffectchanged",update:"series.lines3D:toggleEffect"},function(){})});var Vj=Ct.wJ.extend({type:"series.polygons3D",getRegionModel:function(e){return this.getData().getItemModel(e)},getRegionPolygonCoords:function(e){var n=this.coordinateSystem,t=this.getData().getItemModel(e),r=t.option instanceof Array?t.option:t.getShallow("coords");t.get("multiPolygon")||(r=[r]);for(var i=[],o=0;o<r.length;o++){for(var d=[],f=1;f<r[o].length;f++)d.push(Bj(n,r[o][f]));i.push({exterior:Bj(n,r[o][0]),interiors:d})}return i},getInitialData:function(e){var n=new Ct.aV(["value"],this);return n.hasItemOption=!1,n.initData(e.data,[],function(t,r,i,o){if(t instanceof Array)return NaN;n.hasItemOption=!0;var d=t.value;return null!=d?d instanceof Array?d[o]:d:void 0}),n},defaultOption:{show:!0,data:null,multiPolygon:!1,progressiveThreshold:1e3,progressive:1e3,zlevel:-10,label:{show:!1,distance:2,textStyle:{fontSize:20,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:4}},itemStyle:{color:"#fff",borderWidth:0,borderColor:"#333"},emphasis:{itemStyle:{color:"#639fc0"},label:{show:!0}}}});Ct.D5.merge(Vj.prototype,Zy);const ise=Vj,ase=Ct.TA.extend({type:"polygons3D",__ecgl__:!0,init:function(e,n){this.groupGL=new lt.Node,this._geo3DBuilderList=[],this._currentStep=0},render:function(e,n,t){this.groupGL.removeAll();var r=e.coordinateSystem;r&&r.viewGL&&r.viewGL.add(this.groupGL);var i=this._geo3DBuilderList[0];i||((i=new J2(t)).extrudeY="mapbox3D"!==r.type&&"maptalks3D"!==r.type,this._geo3DBuilderList[0]=i),this._updateShaderDefines(r,i),i.update(e,n,t),this._geo3DBuilderList.length=1,this.groupGL.add(i.rootNode)},incrementalPrepareRender:function(e,n,t){this.groupGL.removeAll();var r=e.coordinateSystem;r&&r.viewGL&&r.viewGL.add(this.groupGL),this._currentStep=0},incrementalRender:function(e,n,t,r){var i=this._geo3DBuilderList[this._currentStep],o=n.coordinateSystem;i||((i=new J2(r)).extrudeY="mapbox3D"!==o.type&&"maptalks3D"!==o.type,this._geo3DBuilderList[this._currentStep]=i),i.update(n,t,r,e.start,e.end),this.groupGL.add(i.rootNode),this._updateShaderDefines(o,i),this._currentStep++},_updateShaderDefines:function(e,n){var t=e.viewGL.isLinearSpace()?"define":"undefine";n.rootNode.traverse(function(r){r.material&&(r.material[t]("fragment","SRGB_DECODE"),("mapbox3D"===e.type||"maptalks3D"===e.type)&&(r.material.define("fragment","NORMAL_UP_AXIS",2),r.material.define("fragment","NORMAL_FRONT_AXIS",1)))})},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll(),this._geo3DBuilderList.forEach(function(e){e.dispose()})}});(0,Ct.D$)(function ose(e){e.registerChartView(ase),e.registerSeriesModel(ise)});var zj=Ct.wJ.extend({type:"series.surface",dependencies:["globe","grid3D","geo3D"],visualStyleAccessPath:"itemStyle",formatTooltip:function(e){return SC(this,e)},getInitialData:function(e,n){var t=e.data;function r(cn){return!(isNaN(cn.min)||isNaN(cn.max)||isNaN(cn.step))}function i(cn){var Yt=Ct.Rx.getPrecisionSafe;return Math.max(Yt(cn.min),Yt(cn.max),Yt(cn.step))+1}if(!t)if(e.parametric){var Be=e.parametricEquation||{},at=Be.u||{},ot=Be.v||{};["u","v"].forEach(function(Yt){r(Be[Yt])}),["x","y","z"].forEach(function(Yt){});var St=Math.floor((at.max+at.step-at.min)/at.step),yt=Math.floor((ot.max+ot.step-ot.min)/ot.step);t=new Float32Array(St*yt*5);for(var Ht=i(at),rn=i(ot),k=0,V=0;V<yt;V++)for(var ne=0;ne<St;ne++){var gn=V*ot.step+ot.min,_n=Ct.Rx.round(Math.min(ne*at.step+at.min,at.max),Ht),ln=Ct.Rx.round(Math.min(gn,ot.max),rn),pe=Be.x(_n,ln),De=Be.y(_n,ln),ke=Be.z(_n,ln);t[k++]=pe,t[k++]=De,t[k++]=ke,t[k++]=_n,t[k++]=ln}}else{var o=e.equation||{},d=o.x||{},f=o.y||{};if(["x","y"].forEach(function(cn){r(o[cn])}),"function"!=typeof o.z)return;var g=Math.floor((d.max+d.step-d.min)/d.step),_=Math.floor((f.max+f.step-f.min)/f.step);t=new Float32Array(g*_*3);var w=i(d),S=i(f);for(k=0,V=0;V<_;V++)for(ne=0;ne<g;ne++){pe=ne*d.step+d.min,De=V*f.step+f.min;var Re=Ct.Rx.round(Math.min(pe,d.max),w),Fe=Ct.Rx.round(Math.min(De,f.max),S);ke=o.z(Re,Fe),t[k++]=Re,t[k++]=Fe,t[k++]=ke}}var Dn=["x","y","z"];return e.parametric&&Dn.push("u","v"),nP(this,Dn,t)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,grid3DIndex:0,shading:"lambert",parametric:!1,wireframe:{show:!0,lineStyle:{color:"rgba(0,0,0,0.5)",width:1}},equation:{x:{min:-1,max:1,step:.1},y:{min:-1,max:1,step:.1},z:null},parametricEquation:{u:{min:-1,max:1,step:.1},v:{min:-1,max:1,step:.1},x:null,y:null,z:null},dataShape:null,itemStyle:{},animationDurationUpdate:500}});Ct.D5.merge(zj.prototype,Zy);const sse=zj;var Cv=Ka.vec3;function lse(e){return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])}const cse=Ct.TA.extend({type:"surface",__ecgl__:!0,init:function(e,n){this.groupGL=new lt.Node},render:function(e,n,t){var r=this._prevSurfaceMesh;this._prevSurfaceMesh=this._surfaceMesh,this._surfaceMesh=r,this._surfaceMesh||(this._surfaceMesh=this._createSurfaceMesh()),this.groupGL.remove(this._prevSurfaceMesh),this.groupGL.add(this._surfaceMesh);var i=e.coordinateSystem,o=e.get("shading"),d=e.getData(),f="ecgl."+o;if((!this._surfaceMesh.material||this._surfaceMesh.material.shader.name!==f)&&(this._surfaceMesh.material=lt.createMaterial(f,["VERTEX_COLOR","DOUBLE_SIDED"])),lt.setMaterialFromModel(o,this._surfaceMesh.material,e,t),i&&i.viewGL){i.viewGL.add(this.groupGL);var g=i.viewGL.isLinearSpace()?"define":"undefine";this._surfaceMesh.material[g]("fragment","SRGB_DECODE")}var _=e.get("parametric"),w=e.get("dataShape");w||(w=this._getDataShape(d,_));var S=e.getModel("wireframe"),k=S.get("lineStyle.width"),V=S.get("show")&&k>0;this._updateSurfaceMesh(this._surfaceMesh,e,w,V);var ne=this._surfaceMesh.material;V?(ne.define("WIREFRAME_QUAD"),ne.set("wireframeLineWidth",k),ne.set("wireframeLineColor",lt.parseColor(S.get("lineStyle.color")))):ne.undefine("WIREFRAME_QUAD"),this._initHandler(e,t),this._updateAnimation(e)},_updateAnimation:function(e){lt.updateVertexAnimation([["prevPosition","position"],["prevNormal","normal"]],this._prevSurfaceMesh,this._surfaceMesh,e)},_createSurfaceMesh:function(){var e=new lt.Mesh({geometry:new lt.Geometry({dynamic:!0,sortTriangles:!0}),shadowDepthMaterial:new lt.Material({shader:new lt.Shader(lt.Shader.source("ecgl.sm.depth.vertex"),lt.Shader.source("ecgl.sm.depth.fragment"))}),culling:!1,renderOrder:10,renderNormal:!0});return e.geometry.createAttribute("barycentric","float",4),e.geometry.createAttribute("prevPosition","float",3),e.geometry.createAttribute("prevNormal","float",3),Object.assign(e.geometry,_V),e},_initHandler:function(e,n){var t=e.getData(),r=this._surfaceMesh,i=e.coordinateSystem;r.seriesIndex=e.seriesIndex;var d=-1;r.off("mousemove"),r.off("mouseout"),r.on("mousemove",function(f){var g=function o(f,g){for(var _=1/0,w=-1,S=[],k=0;k<f.length;k++){r.geometry.attributes.position.get(f[k],S);var V=Cv.dist(g.array,S);V<_&&(_=V,w=f[k])}return w}(f.triangle,f.point);if(g>=0){var _=[];r.geometry.attributes.position.get(g,_);for(var w=i.pointToData(_),S=1/0,k=-1,V=[],ne=0;ne<t.count();ne++){V[0]=t.get("x",ne),V[1]=t.get("y",ne),V[2]=t.get("z",ne);var pe=Cv.squaredDistance(V,w);pe<S&&(k=ne,S=pe)}k!==d&&n.dispatchAction({type:"grid3DShowAxisPointer",value:w}),d=k,r.dataIndex=k}else r.dataIndex=-1},this),r.on("mouseout",function(f){d=-1,r.dataIndex=-1,n.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_updateSurfaceMesh:function(e,n,t,r){var i=e.geometry,o=n.getData(),d=o.getLayout("points"),f=0;o.each(function(So){o.hasValue(So)||f++});var g=f||r,_=i.attributes.position,w=i.attributes.normal,S=i.attributes.texcoord0,k=i.attributes.barycentric,V=i.attributes.color,ne=t[0],pe=t[1],Re="color"!==n.get("shading");if(g){var Fe=(ne-1)*(pe-1)*4;_.init(Fe),r&&k.init(Fe)}else _.value=new Float32Array(d);V.init(i.vertexCount),S.init(i.vertexCount);var ke=[0,3,1,1,3,2],Be=[[1,1,0,0],[0,1,0,1],[1,0,0,1],[1,0,1,0]],at=i.indices=new(i.vertexCount>65535?Uint32Array:Uint16Array)((ne-1)*(pe-1)*6),ot=function(So,Fu,Ds){Ds[1]=So*pe+Fu,Ds[0]=So*pe+Fu+1,Ds[3]=(So+1)*pe+Fu+1,Ds[2]=(So+1)*pe+Fu},St=!1;if(g){var yt=[],Ht=[],rn=0;Re?w.init(i.vertexCount):w.value=null;for(var Kt=[[],[],[]],gn=[],_n=[],ln=Cv.create(),Dn=function(So,Fu,Ds){var m5=3*Fu;return Ds[0]=So[m5],Ds[1]=So[m5+1],Ds[2]=So[m5+2],Ds},jt=new Float32Array(d.length),cn=new Float32Array(d.length/3*4),Yt=0;Yt<o.count();Yt++)if(o.hasValue(Yt)){var Ta=lt.parseColor(Fo(o,Yt));null!=(Jn=Bo(o,Yt))&&(Ta[3]*=Jn),Ta[3]<.99&&(St=!0);for(var Ln=0;Ln<4;Ln++)cn[4*Yt+Ln]=Ta[Ln]}var oi=[1e7,1e7,1e7];for(Yt=0;Yt<ne-1;Yt++)for(var Nr=0;Nr<pe-1;Nr++){var Ir=4*(Yt*(pe-1)+Nr);ot(Yt,Nr,yt);var ei=!1;for(Ln=0;Ln<4;Ln++)Dn(d,yt[Ln],Ht),lse(Ht)&&(ei=!0);for(Ln=0;Ln<4;Ln++)ei?_.set(Ir+Ln,oi):(Dn(d,yt[Ln],Ht),_.set(Ir+Ln,Ht)),r&&k.set(Ir+Ln,Be[Ln]);for(Ln=0;Ln<6;Ln++)at[rn++]=ke[Ln]+Ir;if(Re&&!ei)for(Ln=0;Ln<2;Ln++){for(var Qa=3*Ln,si=0;si<3;si++)Dn(d,Wi=yt[ke[Qa]+si],Kt[si]);for(Cv.sub(gn,Kt[0],Kt[1]),Cv.sub(_n,Kt[1],Kt[2]),Cv.cross(ln,gn,_n),si=0;si<3;si++){var ji=3*yt[ke[Qa]+si];jt[ji]=jt[ji]+ln[0],jt[ji+1]=jt[ji+1]+ln[1],jt[ji+2]=jt[ji+2]+ln[2]}}}if(Re)for(Yt=0;Yt<jt.length/3;Yt++)Dn(jt,Yt,ln),Cv.normalize(ln,ln),jt[3*Yt]=ln[0],jt[3*Yt+1]=ln[1],jt[3*Yt+2]=ln[2];Ta=[];var Na=[];for(Yt=0;Yt<ne-1;Yt++)for(Nr=0;Nr<pe-1;Nr++)for(Ir=4*(Yt*(pe-1)+Nr),ot(Yt,Nr,yt),Ln=0;Ln<4;Ln++){for(si=0;si<4;si++)Ta[si]=cn[4*yt[Ln]+si];var Wi;V.set(Ir+Ln,Ta),Re&&(Dn(jt,yt[Ln],ln),w.set(Ir+Ln,ln)),Na[0]=(Wi=yt[Ln])%pe/(pe-1),Na[1]=Math.floor(Wi/pe)/(ne-1),S.set(Ir+Ln,Na)}}else{for(Na=[],Yt=0;Yt<o.count();Yt++){var Jn;Na[0]=Yt%pe/(pe-1),Na[1]=Math.floor(Yt/pe)/(ne-1),Ta=lt.parseColor(Fo(o,Yt)),null!=(Jn=Bo(o,Yt))&&(Ta[3]*=Jn),Ta[3]<.99&&(St=!0),V.set(Yt,Ta),S.set(Yt,Na)}yt=[];var BC=0;for(Yt=0;Yt<ne-1;Yt++)for(Nr=0;Nr<pe-1;Nr++)for(ot(Yt,Nr,yt),Ln=0;Ln<6;Ln++)at[BC++]=yt[ke[Ln]];Re?i.generateVertexNormals():w.value=null}e.material.get("normalMap")&&i.generateTangents(),i.updateBoundingBox(),i.dirty(),e.material.transparent=St,e.material.depthMask=!St},_getDataShape:function(e,n){for(var t=-1/0,r=0,i=0,d=!1,f=n?"u":"x",g=e.count(),_=0;_<g;_++){var w=e.get(f,_);w<t&&(i=0,r++),t=w,i++}if((!r||1===i)&&(d=!0),!d)return[r+1,i];for(var S=Math.floor(Math.sqrt(g));S>0;){if(Math.floor(g/S)===g/S)return[S,g/S];S--}return[S=Math.floor(Math.sqrt(g)),S]},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function Hj(e,n){for(var t=[],r=0;r<n.length;r++)t.push(e.dataToPoint(n[r]));return t}(0,Ct.D$)(function use(e){e.registerChartView(cse),e.registerSeriesModel(sse),e.registerLayout(function(n,t){n.eachSeriesByType("surface",function(r){var i=r.coordinateSystem,o=r.getData(),d=new Float32Array(3*o.count()),f=[NaN,NaN,NaN];if(i&&"cartesian3D"===i.type){var _=i.dimensions.map(function(w){return r.coordDimToDataDim(w)[0]});o.each(_,function(w,S,k,V){var ne;ne=o.hasValue(V)?i.dataToPoint([w,S,k]):f,d[3*V]=ne[0],d[3*V+1]=ne[1],d[3*V+2]=ne[2]})}o.setLayout("points",d)})})});var qy=Ct.wJ.extend({type:"series.map3D",layoutMode:"box",coordinateSystem:null,visualStyleAccessPath:"itemStyle",optionUpdated:function(e){e=e||{};var n=this.get("coordinateSystem");null!=n&&"geo3D"!==n&&(this.get("groundPlane.show")&&(this.option.groundPlane.show=!1),this._geo=null)},getInitialData:function(e){e.data=this.getFilledRegions(e.data,e.map);var n=Ct._y.createDimensions(e.data,{coordDimensions:["value"]}),t=new Ct.aV(n,this);t.initData(e.data);var r={};return t.each(function(i){var o=t.getName(i),d=t.getItemModel(i);r[o]=d}),this._regionModelMap=r,t},formatTooltip:function(e){return SC(this,e)},getRegionModel:function(e){var n=this.getData().getName(e);return this._regionModelMap[n]||new Ct.Hn(null,this)},getRegionPolygonCoords:function(e){var n=this.coordinateSystem,t=this.getData().getName(e);if(n.transform)return(r=n.getRegion(t))?r.geometries:[];this._geo||(this._geo=cj.createGeo3D(this));for(var r=this._geo.getRegion(t),i=[],o=0;o<r.geometries.length;o++){var d=r.geometries[o],f=[],g=Hj(n,d.exterior);if(f&&f.length)for(var _=0;_<d.interiors.length;_++)f.push(Hj(n,f[_]));i.push({interiors:f,exterior:g})}return i},getFormattedLabel:function(e,n){var t=Qy.getFormattedLabel(this,e,n);return null==t&&(t=this.getData().getName(e)),t},defaultOption:{coordinateSystem:"geo3D",data:null}});Ct.D5.merge(qy.prototype,XW),Ct.D5.merge(qy.prototype,z2),Ct.D5.merge(qy.prototype,Hy),Ct.D5.merge(qy.prototype,Uy),Ct.D5.merge(qy.prototype,Zy);const dse=qy,hse=Ct.TA.extend({type:"map3D",__ecgl__:!0,init:function(e,n){this._geo3DBuilder=new J2(n),this.groupGL=new lt.Node},render:function(e,n,t){var r=e.coordinateSystem;if(r&&r.viewGL){if(this.groupGL.add(this._geo3DBuilder.rootNode),r.viewGL.add(this.groupGL),"geo3D"===r.type){this._sceneHelper||(this._sceneHelper=new Gy,this._sceneHelper.initLight(this.groupGL)),this._sceneHelper.setScene(r.viewGL.scene),this._sceneHelper.updateLight(e),r.viewGL.setPostEffect(e.getModel("postEffect"),t),r.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling"));var o=this._control;o||(o=this._control=new G2({zr:t.getZr()}),this._control.init());var d=e.getModel("viewControl");o.setViewGL(r.viewGL),o.setFromViewControlModel(d,0),o.off("update"),o.on("update",function(){t.dispatchAction({type:"map3DChangeCamera",alpha:o.getAlpha(),beta:o.getBeta(),distance:o.getDistance(),from:this.uid,map3DId:e.id})}),this._geo3DBuilder.extrudeY=!0}else this._control&&(this._control.dispose(),this._control=null),this._sceneHelper&&(this._sceneHelper.dispose(),this._sceneHelper=null),e.getData().getLayout("geo3D"),this._geo3DBuilder.extrudeY=!1;this._geo3DBuilder.update(e,n,t,0,e.getData().count());var f=r.viewGL.isLinearSpace()?"define":"undefine";this._geo3DBuilder.rootNode.traverse(function(g){g.material&&g.material[f]("fragment","SRGB_DECODE")})}},afterRender:function(e,n,t,r){var i=r.renderer,o=e.coordinateSystem;o&&"geo3D"===o.type&&(this._sceneHelper.updateAmbientCubemap(i,e,t),this._sceneHelper.updateSkybox(i,e,t))},dispose:function(){this.groupGL.removeAll(),this._control.dispose(),this._geo3DBuilder.dispose()}});(0,Ct.D$)(function fse(e){uj(e),e.registerChartView(hse),e.registerSeriesModel(dse),e.registerAction({type:"map3DChangeCamera",event:"map3dcamerachanged",update:"series:updateCamera"},function(n,t){t.eachComponent({mainType:"series",subType:"map3D",query:n},function(r){r.setView(n)})})});const pse=Ct.wJ.extend({type:"series.scatterGL",dependencies:["grid","polar","geo","singleAxis"],visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,getInitialData:function(){return Ct._y.createList(this)},defaultOption:{coordinateSystem:"cartesian2d",zlevel:10,progressive:1e5,progressiveThreshold:1e5,large:!1,symbol:"circle",symbolSize:10,zoomScale:0,blendMode:"source-over",itemStyle:{opacity:.8},postEffect:{enable:!1,colorCorrection:{exposure:0,brightness:0,contrast:1,saturation:1,enable:!0}}}});var Uj=z(619),Gj=z(5145);function Yf(e){this.viewGL=e}Yf.prototype.reset=function(e,n){this._updateCamera(n.getWidth(),n.getHeight(),n.getDevicePixelRatio()),this._viewTransform=Uj.create(),this.updateTransform(e,n)},Yf.prototype.updateTransform=function(e,n){var t=e.coordinateSystem;t.getRoamTransform&&(Uj.invert(this._viewTransform,t.getRoamTransform()),this._setCameraTransform(this._viewTransform),n.getZr().refresh())},Yf.prototype.dataToPoint=function(e,n,t){t=e.dataToPoint(n,null,t);var r=this._viewTransform;r&&Gj.applyTransform(t,t,r)},Yf.prototype.removeTransformInPoint=function(e){return this._viewTransform&&Gj.applyTransform(e,e,this._viewTransform),e},Yf.prototype.getZoom=function(){if(this._viewTransform){var e=this._viewTransform;return 1/Math.max(Math.sqrt(e[0]*e[0]+e[1]*e[1]),Math.sqrt(e[2]*e[2]+e[3]*e[3]))}return 1},Yf.prototype._setCameraTransform=function(e){var n=this.viewGL.camera;n.position.set(e[4],e[5],0),n.scale.set(Math.sqrt(e[0]*e[0]+e[1]*e[1]),Math.sqrt(e[2]*e[2]+e[3]*e[3]),1)},Yf.prototype._updateCamera=function(e,n,t){this.viewGL.setViewport(0,0,e,n,t);var r=this.viewGL.camera;r.left=r.top=0,r.bottom=n,r.right=e,r.near=0,r.far=100};const Wj=Yf,gse=Ct.TA.extend({type:"scatterGL",__ecgl__:!0,init:function(e,n){this.groupGL=new lt.Node,this.viewGL=new zf("orthographic"),this.viewGL.add(this.groupGL),this._pointsBuilderList=[],this._currentStep=0,this._sizeScale=1,this._glViewHelper=new Wj(this.viewGL)},render:function(e,n,t){if(this.groupGL.removeAll(),this._glViewHelper.reset(e,t),e.getData().count()){var r=this._pointsBuilderList[0];r||(r=this._pointsBuilderList[0]=new DC(!0,t)),this._pointsBuilderList.length=1,this.groupGL.add(r.rootNode),this._removeTransformInPoints(e.getData().getLayout("points")),r.update(e,n,t),this.viewGL.setPostEffect(e.getModel("postEffect"),t)}},incrementalPrepareRender:function(e,n,t){this.groupGL.removeAll(),this._glViewHelper.reset(e,t),this._currentStep=0,this.viewGL.setPostEffect(e.getModel("postEffect"),t)},incrementalRender:function(e,n,t,r){if(!(e.end<=e.start)){var i=this._pointsBuilderList[this._currentStep];i||(i=new DC(!0,r),this._pointsBuilderList[this._currentStep]=i),this.groupGL.add(i.rootNode),this._removeTransformInPoints(n.getData().getLayout("points")),i.setSizeScale(this._sizeScale),i.update(n,t,r,e.start,e.end),r.getZr().refresh(),this._currentStep++}},updateTransform:function(e,n,t){if(e.coordinateSystem.getRoamTransform){this._glViewHelper.updateTransform(e,t);var r=this._glViewHelper.getZoom(),i=Math.max((e.get("zoomScale")||0)*(r-1)+1,0);this._sizeScale=i,this._pointsBuilderList.forEach(function(o){o.setSizeScale(i)})}},_removeTransformInPoints:function(e){if(e)for(var n=[],t=0;t<e.length;t+=2)n[0]=e[t],n[1]=e[t+1],this._glViewHelper.removeTransformInPoint(n),e[t]=n[0],e[t+1]=n[1]},dispose:function(){this.groupGL.removeAll(),this._pointsBuilderList.forEach(function(e){e.dispose()})},remove:function(){this.groupGL.removeAll()}});(0,Ct.D$)(function vse(e){e.registerChartView(gse),e.registerSeriesModel(pse),e.registerLayout({seriesType:"scatterGL",reset:function(n){var i,t=n.coordinateSystem,r=n.getData();if(t){var o=t.dimensions.map(function(f){return r.mapDimension(f)}).slice(0,2),d=[];1===o.length?i=function(f){for(var g=new Float32Array(2*(f.end-f.start)),_=f.start;_<f.end;_++){var w=2*(_-f.start),S=r.get(o[0],_),k=t.dataToPoint(S);g[w]=k[0],g[w+1]=k[1]}r.setLayout("points",g)}:2===o.length&&(i=function(f){for(var g=new Float32Array(2*(f.end-f.start)),_=f.start;_<f.end;_++){var w=2*(_-f.start),S=r.get(o[0],_),k=r.get(o[1],_);d[0]=S,d[1]=k,d=t.dataToPoint(d),g[w]=d[0],g[w+1]=d[1]}r.setLayout("points",g)})}return{progress:i}}})});var mse=z(555);const yse=z(4786).Z;var TC=Ct.wJ.extend({type:"series.graphGL",visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,init:function(e){TC.superApply(this,"init",arguments),this.legendDataProvider=function(){return this._categoriesData},this._updateCategoriesData()},mergeOption:function(e){TC.superApply(this,"mergeOption",arguments),this._updateCategoriesData()},getFormattedLabel:function(e,n,t,r){var i=Qy.getFormattedLabel(this,e,n,t,r);if(null==i){var o=this.getData();i=o.get(o.dimensions[o.dimensions.length-1],e)}return i},getInitialData:function(e,n){var t=e.edges||e.links||[],r=e.data||e.nodes||[],i=this;if(r&&t)return function bse(e,n,t,r,i){for(var o=new mse.ZP(r),d=0;d<e.length;d++)o.addNode(Jr.firstNotNull(e[d].id,e[d].name,d),d);var f=[],g=[],_=0;for(d=0;d<n.length;d++){var w=n[d],S=w.source,k=w.target;o.addEdge(S,k,_)&&(g.push(w),f.push(Jr.firstNotNull(w.id,S+" > "+k)),_++)}var V,ne=Ct._y.createDimensions(e,{coordDimensions:["value"]});(V=new Ct.aV(ne,t)).initData(e);var pe=new Ct.aV(["value"],t);return pe.initData(g,f),i&&i(V,pe),yse({mainData:V,struct:o,structAttr:"graph",datas:{node:V,edge:pe},datasAttr:{node:"data",edge:"edgeData"}}),o.update(),o}(r,t,this,!0,function o(d,f){d.wrapMethod("getItemModel",function(S){const ne=i._categoriesModels[S.getShallow("category")];return ne&&(ne.parentModel=S.parentModel,S.parentModel=ne),S});const g=n.getModel([]).getModel;function _(S,k){const V=g.call(this,S,k);return V.resolveParentPath=w,V}function w(S){if(S&&("label"===S[0]||"label"===S[1])){const k=S.slice();return"label"===S[0]?k[0]="edgeLabel":"label"===S[1]&&(k[1]="edgeLabel"),k}return S}f.wrapMethod("getItemModel",function(S){return S.resolveParentPath=w,S.getModel=_,S})}).data},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(e,n,t){if("edge"===t){var r=this.getData(),i=this.getDataParams(e,t),o=r.graph.getEdgeByIndex(e),d=r.getName(o.node1.dataIndex),f=r.getName(o.node2.dataIndex),g=[];return null!=d&&g.push(d),null!=f&&g.push(f),g=Ct.WU.encodeHTML(g.join(" > ")),i.value&&(g+=" : "+Ct.WU.encodeHTML(i.value)),g}return TC.superApply(this,"formatTooltip",arguments)},_updateCategoriesData:function(){var e=(this.option.categories||[]).map(function(t){return null!=t.value?t:Object.assign({value:0},t)}),n=new Ct.aV(["value"],this);n.initData(e),this._categoriesData=n,this._categoriesModels=n.mapArray(function(t){return n.getItemModel(t,!0)})},setView:function(e){null!=e.zoom&&(this.option.zoom=e.zoom),null!=e.offset&&(this.option.offset=e.offset)},setNodePosition:function(e){for(var n=0;n<e.length/2;n++){var t=e[2*n],r=e[2*n+1],i=this.getData().getRawDataItem(n);i.x=t,i.y=r}},isAnimationEnabled:function(){return TC.superCall(this,"isAnimationEnabled")&&!("force"===this.get("layout")&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:10,z:2,legendHoverLink:!0,layout:"forceAtlas2",forceAtlas2:{initLayout:null,GPU:!0,steps:1,maxSteps:1e3,repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,edgeWeightInfluence:1,edgeWeight:[1,4],nodeWeight:[1,4],preventOverlap:!1,gravityCenter:null},focusNodeAdjacency:!0,focusNodeAdjacencyOn:"mouseover",left:"center",top:"center",symbol:"circle",symbolSize:5,roam:!1,center:null,zoom:1,label:{show:!1,formatter:"{b}",position:"right",distance:5,textStyle:{fontSize:14}},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}},animation:!1}});const xse=TC;var Co=Ka.vec2,jj=[[0,0],[1,1]],Zj=Ei.extend(function(){return{segmentScale:4,dynamic:!0,useNativeLine:!0,attributes:{position:new Ei.Attribute("position","float",2,"POSITION"),normal:new Ei.Attribute("normal","float",2),offset:new Ei.Attribute("offset","float",1),color:new Ei.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0,this._itemVertexOffsets=[]},setVertexCount:function(e){var n=this.attributes;this.vertexCount!==e&&(n.position.init(e),n.color.init(e),this.useNativeLine||(n.offset.init(e),n.normal.init(e)),e>65535?this.indices instanceof Uint16Array&&(this.indices=new Uint32Array(this.indices)):this.indices instanceof Uint32Array&&(this.indices=new Uint16Array(this.indices)))},setTriangleCount:function(e){this.triangleCount!==e&&(this.indices=0===e?null:this.vertexCount>65535?new Uint32Array(3*e):new Uint16Array(3*e))},_getCubicCurveApproxStep:function(e,n,t,r){return 1/(Co.dist(e,n)+Co.dist(t,n)+Co.dist(r,t)+1)*this.segmentScale},getCubicCurveVertexCount:function(e,n,t,r){var i=this._getCubicCurveApproxStep(e,n,t,r),o=Math.ceil(1/i);return this.useNativeLine?2*o:2*o+2},getCubicCurveTriangleCount:function(e,n,t,r){var i=this._getCubicCurveApproxStep(e,n,t,r),o=Math.ceil(1/i);return this.useNativeLine?0:2*o},getLineVertexCount:function(){return this.getPolylineVertexCount(jj)},getLineTriangleCount:function(){return this.getPolylineTriangleCount(jj)},getPolylineVertexCount:function(e){var n;return n="number"==typeof e?e:"number"!=typeof e[0]?e.length:e.length/2,this.useNativeLine?2*(n-1):2*(n-1)+2},getPolylineTriangleCount:function(e){var n;return n="number"==typeof e?e:"number"!=typeof e[0]?e.length:e.length/2,this.useNativeLine?0:2*(n-1)},addCubicCurve:function(e,n,t,r,i,o){null==o&&(o=1);var d=e[0],f=e[1],g=n[0],_=n[1],w=t[0],S=t[1],k=r[0],V=r[1],ne=this._getCubicCurveApproxStep(e,n,t,r),pe=ne*ne,De=pe*ne,Re=3*ne,Fe=3*pe,ke=6*pe,Be=6*De,at=d-2*g+w,ot=f-2*_+S,St=3*(g-w)-d+k,yt=3*(_-S)-f+V,Ht=d,rn=f,Kt=(g-d)*Re+at*Fe+St*De,gn=(_-f)*Re+ot*Fe+yt*De,_n=at*ke+St*Be,ln=ot*ke+yt*Be,Dn=St*Be,jt=yt*Be,cn=0,Yt=0,Jn=Math.ceil(1/ne),Ln=new Float32Array(3*(Jn+1)),oi=(Ln=[],0);for(Yt=0;Yt<Jn+1;Yt++)Ln[oi++]=Ht,Ln[oi++]=rn,Ht+=Kt,rn+=gn,Kt+=_n,gn+=ln,_n+=Dn,ln+=jt,(cn+=ne)>1&&(Ht=Kt>0?Math.min(Ht,k):Math.max(Ht,k),rn=gn>0?Math.min(rn,V):Math.max(rn,V));this.addPolyline(Ln,i,o)},addLine:function(e,n,t,r){this.addPolyline([e,n],t,r)},addPolyline:function(){var e=Co.create(),n=Co.create(),t=Co.create(),r=Co.create(),i=[],o=[],d=[];return function(f,g,_,w,S){if(f.length){var k="number"!=typeof f[0];if(null==S&&(S=k?f.length:f.length/2),!(S<2)){null==w&&(w=0),null==_&&(_=1),this._itemVertexOffsets.push(this._vertexOffset);for(var Be,V=k?"number"!=typeof g[0]:g.length/4===S,ne=this.attributes.position,pe=this.attributes.color,De=this.attributes.offset,Re=this.attributes.normal,Fe=this.indices,ke=this._vertexOffset,at=0;at<S;at++){if(k)i=f[at+w],Be=V?g[at+w]:g;else if((i=i||[])[0]=f[ot=2*at+w],i[1]=f[ot+1],V){var St=4*at+w;(Be=Be||[])[0]=g[St],Be[1]=g[St+1],Be[2]=g[St+2],Be[3]=g[St+3]}else Be=g;if(this.useNativeLine)at>1&&(ne.copy(ke,ke-1),pe.copy(ke,ke-1),ke++);else{var yt,ot;if(at<S-1)if(k?Co.copy(o,f[at+1]):((o=o||[])[0]=f[ot=2*(at+1)+w],o[1]=f[ot+1]),at>0){Co.sub(e,i,d),Co.sub(n,o,i),Co.normalize(e,e),Co.normalize(n,n),Co.add(r,e,n),Co.normalize(r,r);var Ht=_/2*Math.min(1/Co.dot(e,r),2);t[0]=-r[1],t[1]=r[0],yt=Ht}else Co.sub(e,o,i),Co.normalize(e,e),t[0]=-e[1],t[1]=e[0],yt=_/2;else Co.sub(e,i,d),Co.normalize(e,e),t[0]=-e[1],t[1]=e[0],yt=_/2;Re.set(ke,t),Re.set(ke+1,t),De.set(ke,yt),De.set(ke+1,-yt),Co.copy(d,i),ne.set(ke,i),ne.set(ke+1,i),pe.set(ke,Be),pe.set(ke+1,Be),ke+=2}if(this.useNativeLine)pe.set(ke,Be),ne.set(ke,i),ke++;else if(at>0){var rn=3*this._faceOffset;(Fe=this.indices)[rn]=ke-4,Fe[rn+1]=ke-3,Fe[rn+2]=ke-2,Fe[rn+3]=ke-3,Fe[rn+4]=ke-1,Fe[rn+5]=ke-2,this._faceOffset+=2}}this._vertexOffset=ke}}}}(),setItemColor:function(e,n){for(var r=e<this._itemVertexOffsets.length-1?this._itemVertexOffsets[e+1]:this._vertexOffset,i=this._itemVertexOffsets[e];i<r;i++)this.attributes.color.set(i,n);this.dirty("color")}});Ct.D5.defaults(Zj.prototype,pC);const Yj=Zj;lt.Shader.import("@export ecgl.forceAtlas2.updateNodeRepulsion\n\n#define NODE_COUNT 0\n\nuniform sampler2D positionTex;\n\nuniform vec2 textureSize;\nuniform float gravity;\nuniform float scaling;\nuniform vec2 gravityCenter;\n\nuniform bool strongGravityMode;\nuniform bool preventOverlap;\n\nvarying vec2 v_Texcoord;\n\nvoid main() {\n\n vec4 n0 = texture2D(positionTex, v_Texcoord);\n\n vec2 force = vec2(0.0);\n for (int i = 0; i < NODE_COUNT; i++) {\n vec2 uv = vec2(\n mod(float(i), textureSize.x) / (textureSize.x - 1.0),\n floor(float(i) / textureSize.x) / (textureSize.y - 1.0)\n );\n vec4 n1 = texture2D(positionTex, uv);\n\n vec2 dir = n0.xy - n1.xy;\n float d2 = dot(dir, dir);\n\n if (d2 > 0.0) {\n float factor = 0.0;\n if (preventOverlap) {\n float d = sqrt(d2);\n d = d - n0.w - n1.w;\n if (d > 0.0) {\n factor = scaling * n0.z * n1.z / (d * d);\n }\n else if (d < 0.0) {\n factor = scaling * 100.0 * n0.z * n1.z;\n }\n }\n else {\n factor = scaling * n0.z * n1.z / d2;\n }\n force += dir * factor;\n }\n }\n\n vec2 dir = gravityCenter - n0.xy;\n float d = 1.0;\n if (!strongGravityMode) {\n d = length(dir);\n }\n\n force += dir * n0.z * gravity / (d + 1.0);\n\n gl_FragColor = vec4(force, 0.0, 1.0);\n}\n@end\n\n@export ecgl.forceAtlas2.updateEdgeAttraction.vertex\n\nattribute vec2 node1;\nattribute vec2 node2;\nattribute float weight;\n\nuniform sampler2D positionTex;\nuniform float edgeWeightInfluence;\nuniform bool preventOverlap;\nuniform bool linLogMode;\n\nuniform vec2 windowSize: WINDOW_SIZE;\n\nvarying vec2 v_Force;\n\nvoid main() {\n\n vec4 n0 = texture2D(positionTex, node1);\n vec4 n1 = texture2D(positionTex, node2);\n\n vec2 dir = n1.xy - n0.xy;\n float d = length(dir);\n float w;\n if (edgeWeightInfluence == 0.0) {\n w = 1.0;\n }\n else if (edgeWeightInfluence == 1.0) {\n w = weight;\n }\n else {\n w = pow(weight, edgeWeightInfluence);\n }\n vec2 offset = vec2(1.0 / windowSize.x, 1.0 / windowSize.y);\n vec2 scale = vec2((windowSize.x - 1.0) / windowSize.x, (windowSize.y - 1.0) / windowSize.y);\n vec2 pos = node1 * scale * 2.0 - 1.0;\n gl_Position = vec4(pos + offset, 0.0, 1.0);\n gl_PointSize = 1.0;\n\n float factor;\n if (preventOverlap) {\n d = d - n1.w - n0.w;\n }\n if (d <= 0.0) {\n v_Force = vec2(0.0);\n return;\n }\n\n if (linLogMode) {\n factor = w * log(d) / d;\n }\n else {\n factor = w;\n }\n v_Force = dir * factor;\n}\n@end\n\n@export ecgl.forceAtlas2.updateEdgeAttraction.fragment\n\nvarying vec2 v_Force;\n\nvoid main() {\n gl_FragColor = vec4(v_Force, 0.0, 0.0);\n}\n@end\n\n@export ecgl.forceAtlas2.calcWeightedSum.vertex\n\nattribute vec2 node;\n\nvarying vec2 v_NodeUv;\n\nvoid main() {\n\n v_NodeUv = node;\n gl_Position = vec4(0.0, 0.0, 0.0, 1.0);\n gl_PointSize = 1.0;\n}\n@end\n\n@export ecgl.forceAtlas2.calcWeightedSum.fragment\n\nvarying vec2 v_NodeUv;\n\nuniform sampler2D positionTex;\nuniform sampler2D forceTex;\nuniform sampler2D forcePrevTex;\n\nvoid main() {\n vec2 force = texture2D(forceTex, v_NodeUv).rg;\n vec2 forcePrev = texture2D(forcePrevTex, v_NodeUv).rg;\n\n float mass = texture2D(positionTex, v_NodeUv).z;\n float swing = length(force - forcePrev) * mass;\n float traction = length(force + forcePrev) * 0.5 * mass;\n\n gl_FragColor = vec4(swing, traction, 0.0, 0.0);\n}\n@end\n\n@export ecgl.forceAtlas2.calcGlobalSpeed\n\nuniform sampler2D globalSpeedPrevTex;\nuniform sampler2D weightedSumTex;\nuniform float jitterTolerence;\n\nvoid main() {\n vec2 weightedSum = texture2D(weightedSumTex, vec2(0.5)).xy;\n float prevGlobalSpeed = texture2D(globalSpeedPrevTex, vec2(0.5)).x;\n float globalSpeed = jitterTolerence * jitterTolerence\n * weightedSum.y / weightedSum.x;\n if (prevGlobalSpeed > 0.0) {\n globalSpeed = min(globalSpeed / prevGlobalSpeed, 1.5) * prevGlobalSpeed;\n }\n gl_FragColor = vec4(globalSpeed, 0.0, 0.0, 1.0);\n}\n@end\n\n@export ecgl.forceAtlas2.updatePosition\n\nuniform sampler2D forceTex;\nuniform sampler2D forcePrevTex;\nuniform sampler2D positionTex;\nuniform sampler2D globalSpeedTex;\n\nvarying vec2 v_Texcoord;\n\nvoid main() {\n vec2 force = texture2D(forceTex, v_Texcoord).xy;\n vec2 forcePrev = texture2D(forcePrevTex, v_Texcoord).xy;\n vec4 node = texture2D(positionTex, v_Texcoord);\n\n float globalSpeed = texture2D(globalSpeedTex, vec2(0.5)).r;\n float swing = length(force - forcePrev);\n float speed = 0.1 * globalSpeed / (0.1 + globalSpeed * sqrt(swing));\n\n float df = length(force);\n if (df > 0.0) {\n speed = min(df * speed, 10.0) / df;\n\n gl_FragColor = vec4(node.xy + speed * force, node.zw);\n }\n else {\n gl_FragColor = node;\n }\n}\n@end\n\n@export ecgl.forceAtlas2.edges.vertex\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nattribute vec2 node;\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n\nuniform sampler2D positionTex;\n\nvoid main()\n{\n gl_Position = worldViewProjection * vec4(\n texture2D(positionTex, node).xy, -10.0, 1.0\n );\n v_Color = a_Color;\n}\n@end\n\n@export ecgl.forceAtlas2.edges.fragment\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\nvarying vec4 v_Color;\nvoid main() {\n gl_FragColor = color * v_Color;\n}\n@end");var NV={repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,scaling:1,edgeWeightInfluence:1,jitterTolerence:.1,preventOverlap:!1,dissuadeHubs:!1,gravityCenter:null};function ns(e){var n={type:lt.Texture.FLOAT,minFilter:lt.Texture.NEAREST,magFilter:lt.Texture.NEAREST};this._positionSourceTex=new lt.Texture2D(n),this._positionSourceTex.flipY=!1,this._positionTex=new lt.Texture2D(n),this._positionPrevTex=new lt.Texture2D(n),this._forceTex=new lt.Texture2D(n),this._forcePrevTex=new lt.Texture2D(n),this._weightedSumTex=new lt.Texture2D(n),this._weightedSumTex.width=this._weightedSumTex.height=1,this._globalSpeedTex=new lt.Texture2D(n),this._globalSpeedPrevTex=new lt.Texture2D(n),this._globalSpeedTex.width=this._globalSpeedTex.height=1,this._globalSpeedPrevTex.width=this._globalSpeedPrevTex.height=1,this._nodeRepulsionPass=new so({fragment:lt.Shader.source("ecgl.forceAtlas2.updateNodeRepulsion")}),this._positionPass=new so({fragment:lt.Shader.source("ecgl.forceAtlas2.updatePosition")}),this._globalSpeedPass=new so({fragment:lt.Shader.source("ecgl.forceAtlas2.calcGlobalSpeed")}),this._copyPass=new so({fragment:lt.Shader.source("clay.compositor.output")});var t=function(r){r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ONE)};this._edgeForceMesh=new lt.Mesh({geometry:new lt.Geometry({attributes:{node1:new lt.Geometry.Attribute("node1","float",2),node2:new lt.Geometry.Attribute("node2","float",2),weight:new lt.Geometry.Attribute("weight","float",1)},dynamic:!0,mainAttribute:"node1"}),material:new lt.Material({transparent:!0,shader:lt.createShader("ecgl.forceAtlas2.updateEdgeAttraction"),blend:t,depthMask:!1,depthText:!1}),mode:lt.Mesh.POINTS}),this._weightedSumMesh=new lt.Mesh({geometry:new lt.Geometry({attributes:{node:new lt.Geometry.Attribute("node","float",2)},dynamic:!0,mainAttribute:"node"}),material:new lt.Material({transparent:!0,shader:lt.createShader("ecgl.forceAtlas2.calcWeightedSum"),blend:t,depthMask:!1,depthText:!1}),mode:lt.Mesh.POINTS}),this._framebuffer=new ts({depthBuffer:!1}),this._dummyCamera=new lt.OrthographicCamera({left:-1,right:1,top:1,bottom:-1,near:0,far:100}),this._globalSpeed=0}ns.prototype.updateOption=function(e){for(var n in NV)this[n]=NV[n];var t=this._nodes.length;if(this.jitterTolerence=t>5e4?10:t>5e3?1:.1,this.scaling=t>100?2:10,e)for(var n in NV)null!=e[n]&&(this[n]=e[n]);if(this.repulsionByDegree)for(var r=this._positionSourceTex.pixels,i=0;i<this._nodes.length;i++)r[4*i+2]=(this._nodes[i].degree||0)+1},ns.prototype._updateGravityCenter=function(e){var n=this._nodes,t=this._edges;if(this.gravityCenter)this._gravityCenter=this.gravityCenter;else{for(var r=[1/0,1/0],i=[-1/0,-1/0],o=0;o<n.length;o++)r[0]=Math.min(n[o].x,r[0]),r[1]=Math.min(n[o].y,r[1]),i[0]=Math.max(n[o].x,i[0]),i[1]=Math.max(n[o].y,i[1]);this._gravityCenter=[.5*(r[0]+i[0]),.5*(r[1]+i[1])]}for(o=0;o<t.length;o++){var d=t[o].node1,f=t[o].node2;n[d].degree=(n[d].degree||0)+1,n[f].degree=(n[f].degree||0)+1}},ns.prototype.initData=function(e,n){this._nodes=e,this._edges=n,this._updateGravityCenter();var t=Math.ceil(Math.sqrt(e.length)),r=t,i=new Float32Array(t*r*4);this._resize(t,r);for(var o=0,d=0;d<e.length;d++){var f=e[d];i[o++]=f.x||0,i[o++]=f.y||0,i[o++]=f.mass||1,i[o++]=f.size||1}this._positionSourceTex.pixels=i;var g=this._edgeForceMesh.geometry,_=n.length;g.attributes.node1.init(2*_),g.attributes.node2.init(2*_),g.attributes.weight.init(2*_);var w=[];for(d=0;d<n.length;d++){var S=g.attributes,k=n[d].weight;null==k&&(k=1),S.node1.set(d,this.getNodeUV(n[d].node1,w)),S.node2.set(d,this.getNodeUV(n[d].node2,w)),S.weight.set(d,k),S.node1.set(d+_,this.getNodeUV(n[d].node2,w)),S.node2.set(d+_,this.getNodeUV(n[d].node1,w)),S.weight.set(d+_,k)}var V=this._weightedSumMesh.geometry;for(V.attributes.node.init(e.length),d=0;d<e.length;d++)V.attributes.node.set(d,this.getNodeUV(d,w));g.dirty(),V.dirty(),this._nodeRepulsionPass.material.define("fragment","NODE_COUNT",e.length),this._nodeRepulsionPass.material.setUniform("textureSize",[t,r]),this._inited=!1,this._frame=0},ns.prototype.getNodes=function(){return this._nodes},ns.prototype.getEdges=function(){return this._edges},ns.prototype.step=function(e){this._inited||(this._initFromSource(e),this._inited=!0),this._frame++,this._framebuffer.attach(this._forceTex),this._framebuffer.bind(e);var n=this._nodeRepulsionPass;n.setUniform("strongGravityMode",this.strongGravityMode),n.setUniform("gravity",this.gravity),n.setUniform("gravityCenter",this._gravityCenter),n.setUniform("scaling",this.scaling),n.setUniform("preventOverlap",this.preventOverlap),n.setUniform("positionTex",this._positionPrevTex),n.render(e);var t=this._edgeForceMesh;t.material.set("linLogMode",this.linLogMode),t.material.set("edgeWeightInfluence",this.edgeWeightInfluence),t.material.set("preventOverlap",this.preventOverlap),t.material.set("positionTex",this._positionPrevTex),e.gl.enable(e.gl.BLEND),e.renderPass([t],this._dummyCamera),this._framebuffer.attach(this._weightedSumTex),e.gl.clearColor(0,0,0,0),e.gl.clear(e.gl.COLOR_BUFFER_BIT),e.gl.enable(e.gl.BLEND);var r=this._weightedSumMesh;r.material.set("positionTex",this._positionPrevTex),r.material.set("forceTex",this._forceTex),r.material.set("forcePrevTex",this._forcePrevTex),e.renderPass([r],this._dummyCamera),this._framebuffer.attach(this._globalSpeedTex);var i=this._globalSpeedPass;i.setUniform("globalSpeedPrevTex",this._globalSpeedPrevTex),i.setUniform("weightedSumTex",this._weightedSumTex),i.setUniform("jitterTolerence",this.jitterTolerence),e.gl.disable(e.gl.BLEND),i.render(e);var o=this._positionPass;this._framebuffer.attach(this._positionTex),o.setUniform("globalSpeedTex",this._globalSpeedTex),o.setUniform("positionTex",this._positionPrevTex),o.setUniform("forceTex",this._forceTex),o.setUniform("forcePrevTex",this._forcePrevTex),o.render(e),this._framebuffer.unbind(e),this._swapTexture()},ns.prototype.update=function(e,n,t){null==n&&(n=1),n=Math.max(n,1);for(var r=0;r<n;r++)this.step(e);t&&t()},ns.prototype.getNodePositionTexture=function(){return this._inited?this._positionPrevTex:this._positionSourceTex},ns.prototype.getNodeUV=function(e,n){var t=this._positionTex.width,r=this._positionTex.height;return(n=n||[])[0]=e%t/(t-1),n[1]=Math.floor(e/t)/(r-1)||0,n},ns.prototype.getNodePosition=function(e,n){var t=this._positionArr,r=this._positionTex.width,i=this._positionTex.height,o=r*i;(!t||t.length!==4*o)&&(t=this._positionArr=new Float32Array(4*o)),this._framebuffer.bind(e),this._framebuffer.attach(this._positionPrevTex),e.gl.readPixels(0,0,r,i,e.gl.RGBA,e.gl.FLOAT,t),this._framebuffer.unbind(e),n||(n=new Float32Array(2*this._nodes.length));for(var d=0;d<this._nodes.length;d++)n[2*d]=t[4*d],n[2*d+1]=t[4*d+1];return n},ns.prototype.getTextureData=function(e,n){var t=this["_"+n+"Tex"],r=t.width,i=t.height;this._framebuffer.bind(e),this._framebuffer.attach(t);var o=new Float32Array(r*i*4);return e.gl.readPixels(0,0,r,i,e.gl.RGBA,e.gl.FLOAT,o),this._framebuffer.unbind(e),o},ns.prototype.getTextureSize=function(){return{width:this._positionTex.width,height:this._positionTex.height}},ns.prototype.isFinished=function(e){return this._frame>e},ns.prototype._swapTexture=function(){var e=this._positionPrevTex;this._positionPrevTex=this._positionTex,this._positionTex=e,e=this._forcePrevTex,this._forcePrevTex=this._forceTex,this._forceTex=e,e=this._globalSpeedPrevTex,this._globalSpeedPrevTex=this._globalSpeedTex,this._globalSpeedTex=e},ns.prototype._initFromSource=function(e){this._framebuffer.attach(this._positionPrevTex),this._framebuffer.bind(e),this._copyPass.setUniform("texture",this._positionSourceTex),this._copyPass.render(e),e.gl.clearColor(0,0,0,0),this._framebuffer.attach(this._forcePrevTex),e.gl.clear(e.gl.COLOR_BUFFER_BIT),this._framebuffer.attach(this._globalSpeedPrevTex),e.gl.clear(e.gl.COLOR_BUFFER_BIT),this._framebuffer.unbind(e)},ns.prototype._resize=function(e,n){["_positionSourceTex","_positionTex","_positionPrevTex","_forceTex","_forcePrevTex"].forEach(function(t){this[t].width=e,this[t].height=n,this[t].dirty()},this)},ns.prototype.dispose=function(e){this._framebuffer.dispose(e),this._copyPass.dispose(e),this._nodeRepulsionPass.dispose(e),this._positionPass.dispose(e),this._globalSpeedPass.dispose(e),this._edgeForceMesh.geometry.dispose(e),this._weightedSumMesh.geometry.dispose(e),this._positionSourceTex.dispose(e),this._positionTex.dispose(e),this._positionPrevTex.dispose(e),this._forceTex.dispose(e),this._forcePrevTex.dispose(e),this._weightedSumTex.dispose(e),this._globalSpeedTex.dispose(e),this._globalSpeedPrevTex.dispose(e)};const FV=ns;var EC=function Cse(){var e_create=function(){return new Float32Array(2)},e_dist=function(g,_){var w=_[0]-g[0],S=_[1]-g[1];return Math.sqrt(w*w+S*S)},e_len=function(g){var _=g[0],w=g[1];return Math.sqrt(_*_+w*w)},e_scaleAndAdd=function(g,_,w,S){return g[0]=_[0]+w[0]*S,g[1]=_[1]+w[1]*S,g},e_add=function(g,_,w){return g[0]=_[0]+w[0],g[1]=_[1]+w[1],g},e_sub=function(g,_,w){return g[0]=_[0]-w[0],g[1]=_[1]-w[1],g},e_copy=function(g,_){return g[0]=_[0],g[1]=_[1],g},e_set=function(g,_,w){return g[0]=_,g[1]=w,g};function n(){this.subRegions=[],this.nSubRegions=0,this.node=null,this.mass=0,this.centerOfMass=null,this.bbox=new Float32Array(4),this.size=0}var t=n.prototype;function r(){this.position=new Float32Array(2),this.force=e_create(),this.forcePrev=e_create(),this.mass=1,this.inDegree=0,this.outDegree=0}function i(g,_){this.source=g,this.target=_,this.weight=1}function o(){this.autoSettings=!0,this.barnesHutOptimize=!0,this.barnesHutTheta=1.5,this.repulsionByDegree=!0,this.linLogMode=!1,this.strongGravityMode=!1,this.gravity=1,this.scaling=1,this.edgeWeightInfluence=1,this.jitterTolerence=.1,this.preventOverlap=!1,this.dissuadeHubs=!1,this.rootRegion=new n,this.rootRegion.centerOfMass=e_create(),this.nodes=[],this.edges=[],this.bbox=new Float32Array(4),this.gravityCenter=null,this._massArr=null,this._swingingArr=null,this._sizeArr=null,this._globalSpeed=0}t.beforeUpdate=function(){for(var g=0;g<this.nSubRegions;g++)this.subRegions[g].beforeUpdate();this.mass=0,this.centerOfMass&&(this.centerOfMass[0]=0,this.centerOfMass[1]=0),this.nSubRegions=0,this.node=null},t.afterUpdate=function(){this.subRegions.length=this.nSubRegions;for(var g=0;g<this.nSubRegions;g++)this.subRegions[g].afterUpdate()},t.addNode=function(g){if(0===this.nSubRegions){if(null==this.node)return void(this.node=g);this._addNodeToSubRegion(this.node),this.node=null}this._addNodeToSubRegion(g),this._updateCenterOfMass(g)},t.findSubRegion=function(g,_){for(var w=0;w<this.nSubRegions;w++){var S=this.subRegions[w];if(S.contain(g,_))return S}},t.contain=function(g,_){return this.bbox[0]<=g&&this.bbox[2]>=g&&this.bbox[1]<=_&&this.bbox[3]>=_},t.setBBox=function(g,_,w,S){this.bbox[0]=g,this.bbox[1]=_,this.bbox[2]=w,this.bbox[3]=S,this.size=(w-g+S-_)/2},t._newSubRegion=function(){var g=this.subRegions[this.nSubRegions];return g||(g=new n,this.subRegions[this.nSubRegions]=g),this.nSubRegions++,g},t._addNodeToSubRegion=function(g){var _=this.findSubRegion(g.position[0],g.position[1]),w=this.bbox;if(!_){var V=(w[2]-w[0])/2,ne=(w[3]-w[1])/2,pe=g.position[0]>=(w[0]+w[2])/2?1:0,De=g.position[1]>=(w[1]+w[3])/2?1:0;(_=this._newSubRegion()).setBBox(pe*V+w[0],De*ne+w[1],(pe+1)*V+w[0],(De+1)*ne+w[1])}_.addNode(g)},t._updateCenterOfMass=function(g){null==this.centerOfMass&&(this.centerOfMass=new Float32Array(2));var _=this.centerOfMass[0]*this.mass,w=this.centerOfMass[1]*this.mass;_+=g.position[0]*g.mass,w+=g.position[1]*g.mass,this.mass+=g.mass,this.centerOfMass[0]=_/this.mass,this.centerOfMass[1]=w/this.mass};var g,d=o.prototype;d.initNodes=function(g,_,w){var S=_.length;this.nodes.length=0;for(var k=typeof w<"u",V=0;V<S;V++){var ne=new r;ne.position[0]=g[2*V],ne.position[1]=g[2*V+1],ne.mass=_[V],k&&(ne.size=w[V]),this.nodes.push(ne)}this._massArr=_,this._swingingArr=new Float32Array(S),k&&(this._sizeArr=w)},d.initEdges=function(g,_){var w=g.length/2;this.edges.length=0;for(var S=0;S<w;S++){var ne=this.nodes[g[2*S]],pe=this.nodes[g[2*S+1]];if(!ne||!pe)return void console.error("Node not exists, try initNodes before initEdges");ne.outDegree++,pe.inDegree++;var De=new i(ne,pe);_&&(De.weight=_[S]),this.edges.push(De)}},d.updateSettings=function(){if(this.repulsionByDegree)for(var g=0;g<this.nodes.length;g++)(_=this.nodes[g]).mass=_.inDegree+_.outDegree+1;else for(g=0;g<this.nodes.length;g++){var _;(_=this.nodes[g]).mass=this._massArr[g]}},d.update=function(){var g=this.nodes.length;if(this.updateSettings(),this.updateBBox(),this.barnesHutOptimize){this.rootRegion.setBBox(this.bbox[0],this.bbox[1],this.bbox[2],this.bbox[3]),this.rootRegion.beforeUpdate();for(var _=0;_<g;_++)this.rootRegion.addNode(this.nodes[_]);this.rootRegion.afterUpdate()}for(_=0;_<g;_++)e_copy((w=this.nodes[_]).forcePrev,w.force),e_set(w.force,0,0);for(_=0;_<g;_++){var S=this.nodes[_];if(this.barnesHutOptimize)this.applyRegionToNodeRepulsion(this.rootRegion,S);else for(var k=_+1;k<g;k++)this.applyNodeToNodeRepulsion(S,this.nodes[k],!1);this.gravity>0&&(this.strongGravityMode?this.applyNodeStrongGravity(S):this.applyNodeGravity(S))}for(_=0;_<this.edges.length;_++)this.applyEdgeAttraction(this.edges[_]);var ne=0,pe=0,De=e_create();for(_=0;_<g;_++)ne+=(Re=e_dist((w=this.nodes[_]).force,w.forcePrev))*w.mass,e_add(De,w.force,w.forcePrev),pe+=.5*e_len(De)*w.mass,this._swingingArr[_]=Re;var ke=this.jitterTolerence*this.jitterTolerence*pe/ne;for(this._globalSpeed>0&&(ke=Math.min(ke/this._globalSpeed,1.5)*this._globalSpeed),this._globalSpeed=ke,_=0;_<g;_++){var w=this.nodes[_],Re=this._swingingArr[_],Be=.1*ke/(1+ke*Math.sqrt(Re)),at=e_len(w.force);at>0&&(Be=Math.min(at*Be,10)/at,e_scaleAndAdd(w.position,w.position,w.force,Be))}},d.applyRegionToNodeRepulsion=(g=e_create(),function(w,S){if(w.node)this.applyNodeToNodeRepulsion(w.node,S,!0);else{e_sub(g,S.position,w.centerOfMass);var k=g[0]*g[0]+g[1]*g[1];if(k>this.barnesHutTheta*w.size*w.size)e_scaleAndAdd(S.force,S.force,g,this.scaling*S.mass*w.mass/k);else for(var ne=0;ne<w.nSubRegions;ne++)this.applyRegionToNodeRepulsion(w.subRegions[ne],S)}}),d.applyNodeToNodeRepulsion=function(){var g=e_create();return function(w,S,k){if(w!=S){e_sub(g,w.position,S.position);var V=g[0]*g[0]+g[1]*g[1];if(0!==V){var ne;if(this.preventOverlap){var pe=Math.sqrt(V);if((pe=pe-w.size-S.size)>0)ne=this.scaling*w.mass*S.mass/(pe*pe);else{if(!(pe<0))return;ne=100*this.scaling*w.mass*S.mass}}else ne=this.scaling*w.mass*S.mass/V;e_scaleAndAdd(w.force,w.force,g,ne),e_scaleAndAdd(S.force,S.force,g,-ne)}}}}(),d.applyEdgeAttraction=function(){var g=e_create();return function(w){var S=w.source,k=w.target;e_sub(g,S.position,k.position);var ne,pe,V=e_len(g);ne=0===this.edgeWeightInfluence?1:1===this.edgeWeightInfluence?w.weight:Math.pow(w.weight,this.edgeWeightInfluence),this.preventOverlap&&(V=V-S.size-k.size)<=0||(pe=this.linLogMode?-ne*Math.log(V+1)/(V+1):-ne,e_scaleAndAdd(S.force,S.force,g,pe),e_scaleAndAdd(k.force,k.force,g,-pe))}}(),d.applyNodeGravity=function(){var g=e_create();return function(_){e_sub(g,this.gravityCenter,_.position);var w=e_len(g);e_scaleAndAdd(_.force,_.force,g,this.gravity*_.mass/(w+1))}}(),d.applyNodeStrongGravity=function(){var g=e_create();return function(_){e_sub(g,this.gravityCenter,_.position),e_scaleAndAdd(_.force,_.force,g,this.gravity*_.mass)}}(),d.updateBBox=function(){for(var g=1/0,_=1/0,w=-1/0,S=-1/0,k=0;k<this.nodes.length;k++){var V=this.nodes[k].position;g=Math.min(g,V[0]),_=Math.min(_,V[1]),w=Math.max(w,V[0]),S=Math.max(S,V[1])}this.bbox[0]=g,this.bbox[1]=_,this.bbox[2]=w,this.bbox[3]=S},d.getGlobalSpeed=function(){return this._globalSpeed};var f=null;self.onmessage=function(g){switch(g.data.cmd){case"init":(f=new o).initNodes(g.data.nodesPosition,g.data.nodesMass,g.data.nodesSize),f.initEdges(g.data.edges,g.data.edgesWeight);break;case"updateConfig":if(f)for(var _ in g.data.config)f[_]=g.data.config[_];break;case"update":var w=g.data.steps;if(f){for(var S=0;S<w;S++)f.update();var k=f.nodes.length,V=new Float32Array(2*k);for(S=0;S<k;S++){var ne=f.nodes[S];V[2*S]=ne.position[0],V[2*S+1]=ne.position[1]}self.postMessage({buffer:V.buffer,globalSpeed:f.getGlobalSpeed()},[V.buffer])}else{var pe=new Float32Array;self.postMessage({buffer:pe.buffer,globalSpeed:f.getGlobalSpeed()},[pe.buffer])}}}}.toString();EC=EC.slice(EC.indexOf("{")+1,EC.lastIndexOf("}"));var AC={barnesHutOptimize:!0,barnesHutTheta:1.5,repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,scaling:1,edgeWeightInfluence:1,jitterTolerence:.1,preventOverlap:!1,dissuadeHubs:!1,gravityCenter:null},zl=function(e){for(var n in AC)this[n]=AC[n];if(e)for(var n in e)this[n]=e[n];this._nodes=[],this._edges=[],this._disposed=!1,this._positionTex=new Kr({type:fr.FLOAT,flipY:!1,minFilter:fr.NEAREST,magFilter:fr.NEAREST})};zl.prototype.initData=function(e,n){var t=new Blob([EC]),r=window.URL.createObjectURL(t);this._worker=new Worker(r),this._worker.onmessage=this._$onupdate.bind(this),this._nodes=e,this._edges=n,this._frame=0;for(var i=e.length,o=n.length,d=new Float32Array(2*i),f=new Float32Array(i),g=new Float32Array(i),_=new Float32Array(2*o),w=new Float32Array(o),S=0;S<e.length;S++){var k=e[S];d[2*S]=k.x,d[2*S+1]=k.y,f[S]=k.mass??1,g[S]=k.size??1}for(S=0;S<n.length;S++){var V=n[S],pe=V.node2;_[2*S]=V.node1,_[2*S+1]=pe,w[S]=V.weight??1}var De=Math.ceil(Math.sqrt(e.length)),Re=De,Fe=new Float32Array(De*Re*4),ke=this._positionTex;ke.width=De,ke.height=Re,ke.pixels=Fe,this._worker.postMessage({cmd:"init",nodesPosition:d,nodesMass:f,nodesSize:g,edges:_,edgesWeight:w}),this._globalSpeed=1/0},zl.prototype.updateOption=function(e){var n={};for(var t in AC)n[t]=AC[t];var r=this._nodes,i=this._edges,o=r.length;if(n.jitterTolerence=o>5e4?10:o>5e3?1:.1,n.scaling=o>100?2:10,n.barnesHutOptimize=o>1e3,e)for(var t in AC)null!=e[t]&&(n[t]=e[t]);if(!n.gravityCenter){for(var d=[1/0,1/0],f=[-1/0,-1/0],g=0;g<r.length;g++)d[0]=Math.min(r[g].x,d[0]),d[1]=Math.min(r[g].y,d[1]),f[0]=Math.max(r[g].x,f[0]),f[1]=Math.max(r[g].y,f[1]);n.gravityCenter=[.5*(d[0]+f[0]),.5*(d[1]+f[1])]}for(g=0;g<i.length;g++){var _=i[g].node1,w=i[g].node2;r[_].degree=(r[_].degree||0)+1,r[w].degree=(r[w].degree||0)+1}this._worker&&this._worker.postMessage({cmd:"updateConfig",config:n})},zl.prototype.update=function(e,n,t){null==n&&(n=1),n=Math.max(n,1),this._frame+=n,this._onupdate=t,this._worker&&this._worker.postMessage({cmd:"update",steps:Math.round(n)})},zl.prototype._$onupdate=function(e){if(!this._disposed){var n=new Float32Array(e.data.buffer);this._globalSpeed=e.data.globalSpeed,this._positionArr=n,this._updateTexture(n),this._onupdate&&this._onupdate()}},zl.prototype.getNodePositionTexture=function(){return this._positionTex},zl.prototype.getNodeUV=function(e,n){var t=this._positionTex.width,r=this._positionTex.height;return(n=n||[])[0]=e%t/(t-1),n[1]=Math.floor(e/t)/(r-1),n},zl.prototype.getNodes=function(){return this._nodes},zl.prototype.getEdges=function(){return this._edges},zl.prototype.isFinished=function(e){return this._frame>e},zl.prototype.getNodePosition=function(e,n){if(n||(n=new Float32Array(2*this._nodes.length)),this._positionArr)for(var t=0;t<this._positionArr.length;t++)n[t]=this._positionArr[t];return n},zl.prototype._updateTexture=function(e){for(var n=this._positionTex.pixels,t=0,r=0;r<e.length;)n[t++]=e[r++],n[t++]=e[r++],n[t++]=1,n[t++]=1;this._positionTex.dirty()},zl.prototype.dispose=function(e){this._disposed=!0,this._worker=null};const Xj=zl;var Sse=Us.extend(function(){return{zr:null,viewGL:null,minZoom:.2,maxZoom:5,_needsUpdate:!1,_dx:0,_dy:0,_zoom:1}},function(){this._mouseDownHandler=this._mouseDownHandler.bind(this),this._mouseWheelHandler=this._mouseWheelHandler.bind(this),this._mouseMoveHandler=this._mouseMoveHandler.bind(this),this._mouseUpHandler=this._mouseUpHandler.bind(this),this._update=this._update.bind(this)},{init:function(){var e=this.zr;e.on("mousedown",this._mouseDownHandler),e.on("mousewheel",this._mouseWheelHandler),e.on("globalout",this._mouseUpHandler),e.animation.on("frame",this._update)},setTarget:function(e){this._target=e},setZoom:function(e){this._zoom=Math.max(Math.min(e,this.maxZoom),this.minZoom),this._needsUpdate=!0},setOffset:function(e){this._dx=e[0],this._dy=e[1],this._needsUpdate=!0},getZoom:function(){return this._zoom},getOffset:function(){return[this._dx,this._dy]},_update:function(){if(this._target&&this._needsUpdate){var e=this._target,n=this._zoom;e.position.x=this._dx,e.position.y=this._dy,e.scale.set(n,n,n),this.zr.refresh(),this._needsUpdate=!1,this.trigger("update")}},_mouseDownHandler:function(e){if(!e.target){var n=e.offsetX,t=e.offsetY;if(!this.viewGL||this.viewGL.containPoint(n,t)){this.zr.on("mousemove",this._mouseMoveHandler),this.zr.on("mouseup",this._mouseUpHandler);var r=this._convertPos(n,t);this._x=r.x,this._y=r.y}}},_convertPos:function(e,n){var t=this.viewGL.camera,r=this.viewGL.viewport;return{x:(e-r.x)/r.width*(t.right-t.left)+t.left,y:(n-r.y)/r.height*(t.bottom-t.top)+t.top}},_mouseMoveHandler:function(e){var n=this._convertPos(e.offsetX,e.offsetY);this._dx+=n.x-this._x,this._dy+=n.y-this._y,this._x=n.x,this._y=n.y,this._needsUpdate=!0},_mouseUpHandler:function(e){this.zr.off("mousemove",this._mouseMoveHandler),this.zr.off("mouseup",this._mouseUpHandler)},_mouseWheelHandler:function(e){var n=(e=e.event).wheelDelta||-e.detail;if(0!==n){var t=e.offsetX,r=e.offsetY;if(!this.viewGL||this.viewGL.containPoint(t,r)){var i=n>0?1.1:.9,o=Math.max(Math.min(this._zoom*i,this.maxZoom),this.minZoom);i=o/this._zoom;var d=this._convertPos(t,r),g=(d.y-this._dy)*(i-1);this._dx-=(d.x-this._dx)*(i-1),this._dy-=g,this._zoom=o,this._needsUpdate=!0}}},dispose:function(){var e=this.zr;e.off("mousedown",this._mouseDownHandler),e.off("mousemove",this._mouseMoveHandler),e.off("mouseup",this._mouseUpHandler),e.off("mousewheel",this._mouseWheelHandler),e.off("globalout",this._mouseUpHandler),e.animation.off("frame",this._update)}});const Dse=Sse;var iP=Ka.vec2;lt.Shader.import("@export ecgl.lines2D.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nattribute vec2 position: POSITION;\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n\n#ifdef POSITIONTEXTURE_ENABLED\nuniform sampler2D positionTexture;\n#endif\n\nvoid main()\n{\n gl_Position = worldViewProjection * vec4(position, -10.0, 1.0);\n\n v_Color = a_Color;\n}\n\n@end\n\n@export ecgl.lines2D.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nvarying vec4 v_Color;\n\nvoid main()\n{\n gl_FragColor = color * v_Color;\n}\n@end\n\n\n@export ecgl.meshLines2D.vertex\n\nattribute vec2 position: POSITION;\nattribute vec2 normal;\nattribute float offset;\nattribute vec4 a_Color : COLOR;\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform vec4 viewport : VIEWPORT;\n\nvarying vec4 v_Color;\nvarying float v_Miter;\n\nvoid main()\n{\n vec4 p2 = worldViewProjection * vec4(position + normal, -10.0, 1.0);\n gl_Position = worldViewProjection * vec4(position, -10.0, 1.0);\n\n p2.xy /= p2.w;\n gl_Position.xy /= gl_Position.w;\n\n vec2 N = normalize(p2.xy - gl_Position.xy);\n gl_Position.xy += N * offset / viewport.zw * 2.0;\n\n gl_Position.xy *= gl_Position.w;\n\n v_Color = a_Color;\n}\n@end\n\n\n@export ecgl.meshLines2D.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nvarying vec4 v_Color;\nvarying float v_Miter;\n\nvoid main()\n{\n gl_FragColor = color * v_Color;\n}\n\n@end");var Tse=1;const Ese=Ct.TA.extend({type:"graphGL",__ecgl__:!0,init:function(e,n){this.groupGL=new lt.Node,this.viewGL=new zf("orthographic"),this.viewGL.camera.left=this.viewGL.camera.right=0,this.viewGL.add(this.groupGL),this._pointsBuilder=new DC(!0,n),this._forceEdgesMesh=new lt.Mesh({material:new lt.Material({shader:lt.createShader("ecgl.forceAtlas2.edges"),transparent:!0,depthMask:!1,depthTest:!1}),$ignorePicking:!0,geometry:new lt.Geometry({attributes:{node:new lt.Geometry.Attribute("node","float",2),color:new lt.Geometry.Attribute("color","float",4,"COLOR")},dynamic:!0,mainAttribute:"node"}),renderOrder:-1,mode:lt.Mesh.LINES}),this._edgesMesh=new lt.Mesh({material:new lt.Material({shader:lt.createShader("ecgl.meshLines2D"),transparent:!0,depthMask:!1,depthTest:!1}),$ignorePicking:!0,geometry:new Yj({useNativeLine:!1,dynamic:!0}),renderOrder:-1,culling:!1}),this._layoutId=0,this._control=new Dse({zr:n.getZr(),viewGL:this.viewGL}),this._control.setTarget(this.groupGL),this._control.init(),this._clickHandler=this._clickHandler.bind(this)},render:function(e,n,t){this.groupGL.add(this._pointsBuilder.rootNode),this._model=e,this._api=t,this._initLayout(e,n,t),this._pointsBuilder.update(e,n,t),this._forceLayoutInstance instanceof FV||this.groupGL.remove(this._forceEdgesMesh),this._updateCamera(e,t),this._control.off("update"),this._control.on("update",function(){t.dispatchAction({type:"graphGLRoam",seriesId:e.id,zoom:this._control.getZoom(),offset:this._control.getOffset()}),this._pointsBuilder.updateView(this.viewGL.camera)},this),this._control.setZoom(Jr.firstNotNull(e.get("zoom"),1)),this._control.setOffset(e.get("offset")||[0,0]);var r=this._pointsBuilder.getPointsMesh();if(r.off("mousemove",this._mousemoveHandler),r.off("mouseout",this._mouseOutHandler,this),t.getZr().off("click",this._clickHandler),this._pointsBuilder.highlightOnMouseover=!0,e.get("focusNodeAdjacency")){var i=e.get("focusNodeAdjacencyOn");"click"===i?t.getZr().on("click",this._clickHandler):"mouseover"===i&&(r.on("mousemove",this._mousemoveHandler,this),r.on("mouseout",this._mouseOutHandler,this),this._pointsBuilder.highlightOnMouseover=!1)}this._lastMouseOverDataIndex=-1},_clickHandler:function(e){if(!this._layouting){var n=this._pointsBuilder.getPointsMesh().dataIndex;this._api.dispatchAction(n>=0?{type:"graphGLFocusNodeAdjacency",seriesId:this._model.id,dataIndex:n}:{type:"graphGLUnfocusNodeAdjacency",seriesId:this._model.id})}},_mousemoveHandler:function(e){if(!this._layouting){var n=this._pointsBuilder.getPointsMesh().dataIndex;n>=0?n!==this._lastMouseOverDataIndex&&this._api.dispatchAction({type:"graphGLFocusNodeAdjacency",seriesId:this._model.id,dataIndex:n}):this._mouseOutHandler(e),this._lastMouseOverDataIndex=n}},_mouseOutHandler:function(e){this._layouting||(this._api.dispatchAction({type:"graphGLUnfocusNodeAdjacency",seriesId:this._model.id}),this._lastMouseOverDataIndex=-1)},_updateForceEdgesGeometry:function(e,n){var t=this._forceEdgesMesh.geometry,r=n.getEdgeData(),i=0,o=this._forceLayoutInstance,d=2*r.count();t.attributes.node.init(d),t.attributes.color.init(d),r.each(function(f){var g=e[f];t.attributes.node.set(i,o.getNodeUV(g.node1)),t.attributes.node.set(i+1,o.getNodeUV(g.node2));var _=Fo(r,g.dataIndex),w=lt.parseColor(_);w[3]*=Jr.firstNotNull(Bo(r,g.dataIndex),1),t.attributes.color.set(i,w),t.attributes.color.set(i+1,w),i+=2}),t.dirty()},_updateMeshLinesGeometry:function(){var n=this._model.getEdgeData(),e=this._edgesMesh.geometry,t=(n=this._model.getEdgeData(),this._model.getData().getLayout("points"));e.resetOffset(),e.setVertexCount(n.count()*e.getLineVertexCount()),e.setTriangleCount(n.count()*e.getLineTriangleCount());var r=[],i=[],o=["lineStyle","width"];this._originalEdgeColors=new Float32Array(4*n.count()),this._edgeIndicesMap=new Float32Array(n.count()),n.each(function(d){var f=n.graph.getEdgeByIndex(d),g=2*f.node1.dataIndex,_=2*f.node2.dataIndex;r[0]=t[g],r[1]=t[g+1],i[0]=t[_],i[1]=t[_+1];var w=Fo(n,f.dataIndex),S=lt.parseColor(w);S[3]*=Jr.firstNotNull(Bo(n,f.dataIndex),1);var k=n.getItemModel(f.dataIndex),V=Jr.firstNotNull(k.get(o),1)*this._api.getDevicePixelRatio();e.addLine(r,i,S,V);for(var ne=0;ne<4;ne++)this._originalEdgeColors[4*f.dataIndex+ne]=S[ne];this._edgeIndicesMap[f.dataIndex]=d},this),e.dirty()},_updateForceNodesGeometry:function(e){for(var n=this._pointsBuilder.getPointsMesh(),t=[],r=0;r<e.count();r++)this._forceLayoutInstance.getNodeUV(r,t),n.geometry.attributes.position.set(r,t);n.geometry.dirty("position")},_initLayout:function(e,n,t){var r=e.get("layout"),i=e.getGraph(),o=e.getBoxLayoutParams(),d=(0,$2.ME)(o,{width:t.getWidth(),height:t.getHeight()});"force"===r&&(r="forceAtlas2"),this.stopLayout(e,n,t,{beforeLayout:!0});var f=e.getData(),g=e.getData();if("forceAtlas2"===r){var _=e.getModel("forceAtlas2"),w=this._forceLayoutInstance,S=[],k=[],V=f.getDataExtent("value"),ne=g.getDataExtent("value"),pe=Jr.firstNotNull(_.get("edgeWeight"),1),De=Jr.firstNotNull(_.get("nodeWeight"),1);"number"==typeof pe&&(pe=[pe,pe]),"number"==typeof De&&(De=[De,De]);var Re=0,Fe={},ke=new Float32Array(2*f.count());if(i.eachNode(function(at){var yt,Ht,ot=at.dataIndex,St=f.get("value",ot);if(f.hasItemOption){var rn=f.getItemModel(ot);yt=rn.get("x"),Ht=rn.get("y")}null==yt&&(yt=d.x+Math.random()*d.width,Ht=d.y+Math.random()*d.height),ke[2*Re]=yt,ke[2*Re+1]=Ht,Fe[at.id]=Re++;var Kt=Ct.Rx.linearMap(St,V,De);isNaN(Kt)&&(Kt=isNaN(De[0])?1:De[0]),S.push({x:yt,y:Ht,mass:Kt,size:f.getItemVisual(ot,"symbolSize")})}),f.setLayout("points",ke),i.eachEdge(function(at){var ot=at.dataIndex,St=f.get("value",ot),yt=Ct.Rx.linearMap(St,ne,pe);isNaN(yt)&&(yt=isNaN(pe[0])?1:pe[0]),k.push({node1:Fe[at.node1.id],node2:Fe[at.node2.id],weight:yt,dataIndex:ot})}),!w){var Be=_.get("GPU");this._forceLayoutInstance&&(Be&&!(this._forceLayoutInstance instanceof FV)||!Be&&!(this._forceLayoutInstance instanceof Xj))&&(this._forceLayoutInstanceToDispose=this._forceLayoutInstance),w=this._forceLayoutInstance=Be?new FV:new Xj}w.initData(S,k),w.updateOption(_.option),this._updateForceEdgesGeometry(w.getEdges(),e),this._updatePositionTexture(),t.dispatchAction({type:"graphGLStartLayout",from:this.uid})}else ke=new Float32Array(2*f.count()),Re=0,i.eachNode(function(St){var Ht,rn;if(f.hasItemOption){var Kt=f.getItemModel(St.dataIndex);Ht=Kt.get("x"),rn=Kt.get("y")}ke[Re++]=Ht,ke[Re++]=rn}),f.setLayout("points",ke),this._updateAfterLayout(e,n,t)},_updatePositionTexture:function(){var e=this._forceLayoutInstance.getNodePositionTexture();this._pointsBuilder.setPositionTexture(e),this._forceEdgesMesh.material.set("positionTex",e)},startLayout:function(e,n,o,r){if(!r||null==r.from||r.from===this.uid){var i=this.viewGL,d=(o=this._api,this._forceLayoutInstance),f=this._model.getData(),g=this._model.getModel("forceAtlas2");if(d&&(this.groupGL.remove(this._edgesMesh),this.groupGL.add(this._forceEdgesMesh),this._forceLayoutInstance)){this._updateForceNodesGeometry(e.getData()),this._pointsBuilder.hideLabels();var _=this,w=this._layoutId=Tse++,S=g.getShallow("maxSteps"),k=g.getShallow("steps"),V=0,ne=Math.max(2*k,20),pe=function(De){if(De===_._layoutId){if(d.isFinished(S))return o.dispatchAction({type:"graphGLStopLayout",from:_.uid}),void o.dispatchAction({type:"graphGLFinishLayout",points:f.getLayout("points"),from:_.uid});d.update(i.layer.renderer,k,function(){_._updatePositionTexture(),(V+=k)>=ne&&(_._syncNodePosition(e),V=0),o.getZr().refresh(),(0,QB.Z)(function(){pe(De)})})}};(0,QB.Z)(function(){_._forceLayoutInstanceToDispose&&(_._forceLayoutInstanceToDispose.dispose(i.layer.renderer),_._forceLayoutInstanceToDispose=null),pe(w)}),this._layouting=!0}}},stopLayout:function(e,n,t,r){r&&null!=r.from&&r.from!==this.uid||(this._layoutId=0,this.groupGL.remove(this._forceEdgesMesh),this.groupGL.add(this._edgesMesh),this._forceLayoutInstance&&(!this.viewGL.layer||(r&&r.beforeLayout||(this._syncNodePosition(e),this._updateAfterLayout(e,n,t)),this._api.getZr().refresh(),this._layouting=!1)))},_syncNodePosition:function(e){var n=this._forceLayoutInstance.getNodePosition(this.viewGL.layer.renderer);e.getData().setLayout("points",n),e.setNodePosition(n)},_updateAfterLayout:function(e,n,t){this._updateMeshLinesGeometry(),this._pointsBuilder.removePositionTexture(),this._pointsBuilder.updateLayout(e,n,t),this._pointsBuilder.updateView(this.viewGL.camera),this._pointsBuilder.updateLabels(),this._pointsBuilder.showLabels()},focusNodeAdjacency:function(e,n,t,r){var i=this._model.getData();this._downplayAll();var f=[],g=i.graph.getNodeByIndex(r.dataIndex);f.push(g),g.edges.forEach(function(w){w.dataIndex<0||(w.node1!==g&&f.push(w.node1),w.node2!==g&&f.push(w.node2))},this),this._pointsBuilder.fadeOutAll(.05),this._fadeOutEdgesAll(.05),f.forEach(function(w){this._pointsBuilder.highlight(i,w.dataIndex)},this),this._pointsBuilder.updateLabels(f.map(function(w){return w.dataIndex}));var _=[];g.edges.forEach(function(w){w.dataIndex>=0&&(this._highlightEdge(w.dataIndex),_.push(w))},this),this._focusNodes=f,this._focusEdges=_},unfocusNodeAdjacency:function(e,n,t,r){this._downplayAll(),this._pointsBuilder.fadeInAll(),this._fadeInEdgesAll(),this._pointsBuilder.updateLabels()},_highlightEdge:function(e){var n=this._model.getEdgeData().getItemModel(e),t=lt.parseColor(n.get("emphasis.lineStyle.color")||n.get("lineStyle.color")),r=Jr.firstNotNull(n.get("emphasis.lineStyle.opacity"),n.get("lineStyle.opacity"),1);t[3]*=r,this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[e],t)},_downplayAll:function(){this._focusNodes&&this._focusNodes.forEach(function(e){this._pointsBuilder.downplay(this._model.getData(),e.dataIndex)},this),this._focusEdges&&this._focusEdges.forEach(function(e){this._downplayEdge(e.dataIndex)},this)},_downplayEdge:function(e){var n=this._getColor(e,[]);this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[e],n)},_setEdgeFade:function(){var e=[];return function(n,t){this._getColor(n,e),e[3]*=t,this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[n],e)}}(),_getColor:function(e,n){for(var t=0;t<4;t++)n[t]=this._originalEdgeColors[4*e+t];return n},_fadeOutEdgesAll:function(e){this._model.getData().graph.eachEdge(function(t){this._setEdgeFade(t.dataIndex,e)},this)},_fadeInEdgesAll:function(){this._fadeOutEdgesAll(1)},_updateCamera:function(e,n){this.viewGL.setViewport(0,0,n.getWidth(),n.getHeight(),n.getDevicePixelRatio());for(var t=this.viewGL.camera,i=e.getData().getLayout("points"),o=iP.create(1/0,1/0),d=iP.create(-1/0,-1/0),f=[],g=0;g<i.length;)f[0]=i[g++],f[1]=i[g++],iP.min(o,o,f),iP.max(d,d,f);var _=(d[1]+o[1])/2,w=(d[0]+o[0])/2;if(!(w>t.left&&w<t.right&&_<t.bottom&&_>t.top)){var S=Math.max(d[0]-o[0],10),k=S/n.getWidth()*n.getHeight();k*=1.4,o[0]-=.2*(S*=1.4),t.left=o[0],t.top=_-k/2,t.bottom=_+k/2,t.right=S+o[0],t.near=0,t.far=100}},dispose:function(){this._forceLayoutInstance&&this._forceLayoutInstance.dispose(this.viewGL.layer.renderer),this.groupGL.removeAll(),this._layoutId=-1,this._pointsBuilder.dispose()},remove:function(){this.groupGL.removeAll(),this._control.dispose()}});function aP(e){return e instanceof Array||(e=[e,e]),e}(0,Ct.D$)(function Ase(e){function n(){}e.registerChartView(Ese),e.registerSeriesModel(xse),e.registerVisual(function(t){const r={};t.eachSeriesByType("graphGL",function(i){var o=i.getCategoriesData(),d=i.getData(),f={};o.each(function(g){var _=o.getName(g);f["ec-"+_]=g;var w=o.getItemModel(g),S=w.getModel("itemStyle").getItemStyle();S.fill||(S.fill=i.getColorFromPalette(_,r)),o.setItemVisual(g,"style",S);var k=["symbol","symbolSize","symbolKeepAspect"];for(let ne=0;ne<k.length;ne++){var V=w.getShallow(k[ne],!0);null!=V&&o.setItemVisual(g,k[ne],V)}}),o.count()&&d.each(function(g){let w=d.getItemModel(g).getShallow("category");if(null!=w){"string"==typeof w&&(w=f["ec-"+w]);var S=o.getItemVisual(w,"style"),k=d.ensureUniqueItemVisual(g,"style");Ct.D5.extend(k,S);var V=["symbol","symbolSize","symbolKeepAspect"];for(let ne=0;ne<V.length;ne++)d.setItemVisual(g,V[ne],o.getItemVisual(w,V[ne]))}})})}),e.registerVisual(function(t){t.eachSeriesByType("graphGL",function(r){var i=r.getGraph(),o=r.getEdgeData(),d=aP(r.get("edgeSymbol")),f=aP(r.get("edgeSymbolSize"));o.setVisual("drawType","stroke"),o.setVisual("fromSymbol",d&&d[0]),o.setVisual("toSymbol",d&&d[1]),o.setVisual("fromSymbolSize",f&&f[0]),o.setVisual("toSymbolSize",f&&f[1]),o.setVisual("style",r.getModel("lineStyle").getLineStyle()),o.each(function(g){var _=o.getItemModel(g),w=i.getEdgeByIndex(g),S=aP(_.getShallow("symbol",!0)),k=aP(_.getShallow("symbolSize",!0)),V=_.getModel("lineStyle").getLineStyle(),ne=o.ensureUniqueItemVisual(g,"style");switch(Ct.D5.extend(ne,V),ne.stroke){case"source":var pe=w.node1.getVisual("style");ne.stroke=pe&&pe.fill;break;case"target":pe=w.node2.getVisual("style"),ne.stroke=pe&&pe.fill}S[0]&&w.setVisual("fromSymbol",S[0]),S[1]&&w.setVisual("toSymbol",S[1]),k[0]&&w.setVisual("fromSymbolSize",k[0]),k[1]&&w.setVisual("toSymbolSize",k[1])})})}),e.registerAction({type:"graphGLRoam",event:"graphglroam",update:"series.graphGL:roam"},function(t,r){r.eachComponent({mainType:"series",query:t},function(i){i.setView(t)})}),e.registerAction({type:"graphGLStartLayout",event:"graphgllayoutstarted",update:"series.graphGL:startLayout"},n),e.registerAction({type:"graphGLStopLayout",event:"graphgllayoutstopped",update:"series.graphGL:stopLayout"},n),e.registerAction({type:"graphGLFocusNodeAdjacency",event:"graphGLFocusNodeAdjacency",update:"series.graphGL:focusNodeAdjacency"},n),e.registerAction({type:"graphGLUnfocusNodeAdjacency",event:"graphGLUnfocusNodeAdjacency",update:"series.graphGL:unfocusNodeAdjacency"},n)});const Ise=Ct.wJ.extend({type:"series.flowGL",dependencies:["geo","grid","bmap"],visualStyleAccessPath:"itemStyle",getInitialData:function(e,n){var t=this.get("coordinateSystem"),r="geo"===t?["lng","lat"]:Ct.wL(t)||["x","y"];r.push("vx","vy");var i=Ct._y.createDimensions(this.getSource(),{coordDimensions:r,encodeDefine:this.get("encode"),dimensionsDefine:this.get("dimensions")}),o=new Ct.aV(i,this);return o.initData(this.getSource()),o},defaultOption:{coordinateSystem:"cartesian2d",zlevel:10,supersampling:1,particleType:"point",particleDensity:128,particleSize:1,particleSpeed:1,particleTrail:2,colorTexture:null,gridWidth:"auto",gridHeight:"auto",itemStyle:{color:"#fff",opacity:.8}}});var Pse=Ei.extend(function(){return{dynamic:!0,attributes:{position:new Ei.Attribute("position","float",3,"POSITION")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setLineCount:function(e){var t=4*e,r=2*e;this.vertexCount!==t&&this.attributes.position.init(t),this.triangleCount!==r&&(this.indices=0===r?null:this.vertexCount>65535?new Uint32Array(3*r):new Uint16Array(3*r))},addLine:function(e){var n=this._vertexOffset;this.attributes.position.set(n,[e[0],e[1],1]),this.attributes.position.set(n+1,[e[0],e[1],-1]),this.attributes.position.set(n+2,[e[0],e[1],2]),this.attributes.position.set(n+3,[e[0],e[1],-2]),this.setTriangleIndices(this._faceOffset++,[n,n+1,n+2]),this.setTriangleIndices(this._faceOffset++,[n+1,n+2,n+3]),this._vertexOffset+=4}});const Rse=Pse;Yn.import("@export ecgl.vfParticle.particle.fragment\n\nuniform sampler2D particleTexture;\nuniform sampler2D spawnTexture;\nuniform sampler2D velocityTexture;\n\nuniform float deltaTime;\nuniform float elapsedTime;\n\nuniform float speedScaling : 1.0;\n\nuniform vec2 textureSize;\nuniform vec4 region : [0, 0, 1, 1];\nuniform float firstFrameTime;\n\nvarying vec2 v_Texcoord;\n\n\nvoid main()\n{\n vec4 p = texture2D(particleTexture, v_Texcoord);\n bool spawn = false;\n if (p.w <= 0.0) {\n p = texture2D(spawnTexture, fract(v_Texcoord + elapsedTime / 10.0));\n p.w -= firstFrameTime;\n spawn = true;\n }\n vec2 v = texture2D(velocityTexture, fract(p.xy * region.zw + region.xy)).xy;\n v = (v - 0.5) * 2.0;\n p.z = length(v);\n p.xy += v * deltaTime / 10.0 * speedScaling;\n p.w -= deltaTime;\n\n if (spawn || p.xy != fract(p.xy)) {\n p.z = 0.0;\n }\n p.xy = fract(p.xy);\n\n gl_FragColor = p;\n}\n@end\n\n@export ecgl.vfParticle.renderPoints.vertex\n\n#define PI 3.1415926\n\nattribute vec2 texcoord : TEXCOORD_0;\n\nuniform sampler2D particleTexture;\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nuniform float size : 1.0;\n\nvarying float v_Mag;\nvarying vec2 v_Uv;\n\nvoid main()\n{\n vec4 p = texture2D(particleTexture, texcoord);\n\n if (p.w > 0.0 && p.z > 1e-5) {\n gl_Position = worldViewProjection * vec4(p.xy * 2.0 - 1.0, 0.0, 1.0);\n }\n else {\n gl_Position = vec4(100000.0, 100000.0, 100000.0, 1.0);\n }\n\n v_Mag = p.z;\n v_Uv = p.xy;\n\n gl_PointSize = size;\n}\n\n@end\n\n@export ecgl.vfParticle.renderPoints.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\nuniform sampler2D gradientTexture;\nuniform sampler2D colorTexture;\nuniform sampler2D spriteTexture;\n\nvarying float v_Mag;\nvarying vec2 v_Uv;\n\nvoid main()\n{\n gl_FragColor = color;\n#ifdef SPRITETEXTURE_ENABLED\n gl_FragColor *= texture2D(spriteTexture, gl_PointCoord);\n if (color.a == 0.0) {\n discard;\n }\n#endif\n#ifdef GRADIENTTEXTURE_ENABLED\n gl_FragColor *= texture2D(gradientTexture, vec2(v_Mag, 0.5));\n#endif\n#ifdef COLORTEXTURE_ENABLED\n gl_FragColor *= texture2D(colorTexture, v_Uv);\n#endif\n}\n\n@end\n\n@export ecgl.vfParticle.renderLines.vertex\n\n#define PI 3.1415926\n\nattribute vec3 position : POSITION;\n\nuniform sampler2D particleTexture;\nuniform sampler2D prevParticleTexture;\n\nuniform float size : 1.0;\nuniform vec4 vp: VIEWPORT;\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nvarying float v_Mag;\nvarying vec2 v_Uv;\n\n@import clay.util.rand\n\nvoid main()\n{\n vec4 p = texture2D(particleTexture, position.xy);\n vec4 p2 = texture2D(prevParticleTexture, position.xy);\n\n p.xy = p.xy * 2.0 - 1.0;\n p2.xy = p2.xy * 2.0 - 1.0;\n\n if (p.w > 0.0 && p.z > 1e-5) {\n vec2 dir = normalize(p.xy - p2.xy);\n vec2 norm = vec2(dir.y / vp.z, -dir.x / vp.w) * sign(position.z) * size;\n if (abs(position.z) == 2.0) {\n gl_Position = vec4(p.xy + norm, 0.0, 1.0);\n v_Uv = p.xy;\n v_Mag = p.z;\n }\n else {\n gl_Position = vec4(p2.xy + norm, 0.0, 1.0);\n v_Mag = p2.z;\n v_Uv = p2.xy;\n }\n gl_Position = worldViewProjection * gl_Position;\n }\n else {\n gl_Position = vec4(100000.0, 100000.0, 100000.0, 1.0);\n }\n}\n\n@end\n\n@export ecgl.vfParticle.renderLines.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\nuniform sampler2D gradientTexture;\nuniform sampler2D colorTexture;\n\nvarying float v_Mag;\nvarying vec2 v_Uv;\n\nvoid main()\n{\n gl_FragColor = color;\n #ifdef GRADIENTTEXTURE_ENABLED\n gl_FragColor *= texture2D(gradientTexture, vec2(v_Mag, 0.5));\n#endif\n#ifdef COLORTEXTURE_ENABLED\n gl_FragColor *= texture2D(colorTexture, v_Uv);\n#endif\n}\n\n@end\n");var BV=function(){this.motionBlurFactor=.99,this.vectorFieldTexture=new Kr({type:fr.FLOAT,flipY:!1}),this.particleLife=[5,20],this._particleType="point",this._particleSize=1,this.particleColor=[1,1,1,1],this.particleSpeedScaling=1,this._thisFrameTexture=null,this._particlePass=null,this._spawnTexture=null,this._particleTexture0=null,this._particleTexture1=null,this._particlePointsMesh=null,this._surfaceFrameBuffer=null,this._elapsedTime=0,this._scene=null,this._camera=null,this._lastFrameTexture=null,this._supersampling=1,this._downsampleTextures=[],this._width=512,this._height=512,this.init()};BV.prototype={constructor:BV,init:function(){var e={type:fr.FLOAT,minFilter:fr.NEAREST,magFilter:fr.NEAREST,useMipmap:!1};this._spawnTexture=new Kr(e),this._particleTexture0=new Kr(e),this._particleTexture1=new Kr(e),this._frameBuffer=new ts({depthBuffer:!1}),this._particlePass=new so({fragment:Yn.source("ecgl.vfParticle.particle.fragment")}),this._particlePass.setUniform("velocityTexture",this.vectorFieldTexture),this._particlePass.setUniform("spawnTexture",this._spawnTexture),this._downsamplePass=new so({fragment:Yn.source("clay.compositor.downsample")});var n=new av({renderOrder:10,material:new Sc({shader:new Yn(Yn.source("ecgl.vfParticle.renderPoints.vertex"),Yn.source("ecgl.vfParticle.renderPoints.fragment"))}),mode:av.POINTS,geometry:new Ei({dynamic:!0,mainAttribute:"texcoord0"})}),t=new av({renderOrder:10,material:new Sc({shader:new Yn(Yn.source("ecgl.vfParticle.renderLines.vertex"),Yn.source("ecgl.vfParticle.renderLines.fragment"))}),geometry:new Rse,culling:!1}),r=new av({material:new Sc({shader:new Yn(Yn.source("ecgl.color.vertex"),Yn.source("ecgl.color.fragment"))}),geometry:new A2});r.material.enableTexture("diffuseMap"),this._particlePointsMesh=n,this._particleLinesMesh=t,this._lastFrameFullQuadMesh=r,this._camera=new zy,this._thisFrameTexture=new Kr,this._lastFrameTexture=new Kr},setParticleDensity:function(e,n){for(var r=new Float32Array(e*n*4),i=0,o=this.particleLife,d=0;d<e;d++)for(var f=0;f<n;f++,i++){r[4*i]=Math.random(),r[4*i+1]=Math.random(),r[4*i+2]=Math.random();var g=(o[1]-o[0])*Math.random()+o[0];r[4*i+3]=g}"line"===this._particleType?this._setLineGeometry(e,n):this._setPointsGeometry(e,n),this._spawnTexture.width=e,this._spawnTexture.height=n,this._spawnTexture.pixels=r,this._particleTexture0.width=this._particleTexture1.width=e,this._particleTexture0.height=this._particleTexture1.height=n,this._particlePass.setUniform("textureSize",[e,n])},_setPointsGeometry:function(e,n){var r=this._particlePointsMesh.geometry,i=r.attributes;i.texcoord0.init(e*n);for(var o=0,d=0;d<e;d++)for(var f=0;f<n;f++,o++)i.texcoord0.value[2*o]=d/e,i.texcoord0.value[2*o+1]=f/n;r.dirty()},_setLineGeometry:function(e,n){var t=e*n,r=this._getParticleMesh().geometry;r.setLineCount(t),r.resetOffset();for(var i=0;i<e;i++)for(var o=0;o<n;o++)r.addLine([i/e,o/n]);r.dirty()},_getParticleMesh:function(){return"line"===this._particleType?this._particleLinesMesh:this._particlePointsMesh},update:function(e,n,t,r){var i=this._getParticleMesh(),o=this._frameBuffer,d=this._particlePass;r&&this._updateDownsampleTextures(e,n),i.material.set("size",this._particleSize*this._supersampling),i.material.set("color",this.particleColor),d.setUniform("speedScaling",this.particleSpeedScaling),o.attach(this._particleTexture1),d.setUniform("firstFrameTime",r?(this.particleLife[1]+this.particleLife[0])/2:0),d.setUniform("particleTexture",this._particleTexture0),d.setUniform("deltaTime",t),d.setUniform("elapsedTime",this._elapsedTime),d.render(e,o),i.material.set("particleTexture",this._particleTexture1),i.material.set("prevParticleTexture",this._particleTexture0),o.attach(this._thisFrameTexture),o.bind(e),e.gl.clear(e.gl.DEPTH_BUFFER_BIT|e.gl.COLOR_BUFFER_BIT);var f=this._lastFrameFullQuadMesh;f.material.set("diffuseMap",this._lastFrameTexture),f.material.set("color",[1,1,1,this.motionBlurFactor]),this._camera.update(!0),e.renderPass([f,i],this._camera),o.unbind(e),this._downsample(e),this._swapTexture(),this._elapsedTime+=t},_downsample:function(e){var n=this._downsampleTextures;if(0!==n.length)for(var t=0,r=this._thisFrameTexture,i=n[t];i;)this._frameBuffer.attach(i),this._downsamplePass.setUniform("texture",r),this._downsamplePass.setUniform("textureSize",[r.width,r.height]),this._downsamplePass.render(e,this._frameBuffer),r=i,i=n[++t]},getSurfaceTexture:function(){var e=this._downsampleTextures;return e.length>0?e[e.length-1]:this._lastFrameTexture},setRegion:function(e){this._particlePass.setUniform("region",e)},resize:function(e,n){this._lastFrameTexture.width=e*this._supersampling,this._lastFrameTexture.height=n*this._supersampling,this._thisFrameTexture.width=e*this._supersampling,this._thisFrameTexture.height=n*this._supersampling,this._width=e,this._height=n},setParticleSize:function(e){var n=this._getParticleMesh();if(e<=2)return n.material.disableTexture("spriteTexture"),void(n.material.transparent=!1);this._spriteTexture||(this._spriteTexture=new Kr),(!this._spriteTexture.image||this._spriteTexture.image.width!==e)&&(this._spriteTexture.image=function Ose(e){var n=document.createElement("canvas");n.width=n.height=e;var t=n.getContext("2d");return t.fillStyle="#fff",t.arc(e/2,e/2,e/2,0,2*Math.PI),t.fill(),n}(e),this._spriteTexture.dirty()),n.material.transparent=!0,n.material.enableTexture("spriteTexture"),n.material.set("spriteTexture",this._spriteTexture),this._particleSize=e},setGradientTexture:function(e){var n=this._getParticleMesh().material;n[e?"enableTexture":"disableTexture"]("gradientTexture"),n.setUniform("gradientTexture",e)},setColorTextureImage:function(e,n){this._getParticleMesh().material.setTextureImage("colorTexture",e,n,{flipY:!0})},setParticleType:function(e){this._particleType=e},clearFrame:function(e){var n=this._frameBuffer;n.attach(this._lastFrameTexture),n.bind(e),e.gl.clear(e.gl.DEPTH_BUFFER_BIT|e.gl.COLOR_BUFFER_BIT),n.unbind(e)},setSupersampling:function(e){this._supersampling=e,this.resize(this._width,this._height)},_updateDownsampleTextures:function(e,n){for(var t=this._downsampleTextures,r=Math.max(Math.floor(Math.log(this._supersampling/n.getDevicePixelRatio())/Math.log(2)),0),i=2,o=this._width*this._supersampling,d=this._height*this._supersampling,f=0;f<r;f++)t[f]=t[f]||new Kr,t[f].width=o/i,t[f].height=d/i,i*=2;for(;f<t.length;f++)t[f].dispose(e);t.length=r},_swapTexture:function(){var e=this._particleTexture0;this._particleTexture0=this._particleTexture1,this._particleTexture1=e,e=this._thisFrameTexture,this._thisFrameTexture=this._lastFrameTexture,this._lastFrameTexture=e},dispose:function(e){e.disposeFrameBuffer(this._frameBuffer),e.disposeTexture(this.vectorFieldTexture),e.disposeTexture(this._spawnTexture),e.disposeTexture(this._particleTexture0),e.disposeTexture(this._particleTexture1),e.disposeTexture(this._thisFrameTexture),e.disposeTexture(this._lastFrameTexture),e.disposeGeometry(this._particleLinesMesh.geometry),e.disposeGeometry(this._particlePointsMesh.geometry),e.disposeGeometry(this._lastFrameFullQuadMesh.geometry),this._spriteTexture&&e.disposeTexture(this._spriteTexture),this._particlePass.dispose(e),this._downsamplePass.dispose(e),this._downsampleTextures.forEach(function(n){n.dispose(e)})}};const kse=BV,Nse=Ct.TA.extend({type:"flowGL",__ecgl__:!0,init:function(e,n){this.viewGL=new zf("orthographic"),this.groupGL=new lt.Node,this.viewGL.add(this.groupGL),this._particleSurface=new kse;var t=new lt.Mesh({geometry:new lt.PlaneGeometry,material:new lt.Material({shader:new lt.Shader({vertex:lt.Shader.source("ecgl.color.vertex"),fragment:lt.Shader.source("ecgl.color.fragment")}),transparent:!0})});t.material.enableTexture("diffuseMap"),this.groupGL.add(t),this._planeMesh=t},render:function(e,n,t){var r=this._particleSurface;r.setParticleType(e.get("particleType")),r.setSupersampling(e.get("supersampling")),this._updateData(e,t),this._updateCamera(t.getWidth(),t.getHeight(),t.getDevicePixelRatio());var i=Jr.firstNotNull(e.get("particleDensity"),128);r.setParticleDensity(i,i);var o=this._planeMesh,d=+new Date,f=this,g=!0;o.__percent=0,o.stopAnimation(),o.animate("",{loop:!0}).when(1e5,{__percent:1}).during(function(){var S=+new Date,k=Math.min(S-d,20);d+=k,f._renderer&&(r.update(f._renderer,t,k/1e3,g),o.material.set("diffuseMap",r.getSurfaceTexture())),g=!1}).start();var _=e.getModel("itemStyle"),w=lt.parseColor(_.get("color"));w[3]*=Jr.firstNotNull(_.get("opacity"),1),o.material.set("color",w),r.setColorTextureImage(e.get("colorTexture"),t),r.setParticleSize(e.get("particleSize")),r.particleSpeedScaling=e.get("particleSpeed"),r.motionBlurFactor=1-Math.pow(.1,e.get("particleTrail"))},updateTransform:function(e,n,t){this._updateData(e,t)},afterRender:function(e,n,t,r){this._renderer=r.renderer},_updateData:function(e,n){var t=e.coordinateSystem,r=t.dimensions.map(function(Fe){return e.coordDimToDataDim(Fe)[0]}),i=e.getData(),o=i.getDataExtent(r[0]),d=i.getDataExtent(r[1]),f=e.get("gridWidth"),g=e.get("gridHeight");null!=f&&"auto"!==f||(f=Math.round(Math.sqrt((o[1]-o[0])/(d[1]-d[0])*i.count()))),(null==g||"auto"===g)&&(g=Math.ceil(i.count()/f));var w=this._particleSurface.vectorFieldTexture,S=w.pixels;if(S&&S.length===g*f*4)for(var k=0;k<S.length;k++)S[k]=0;else S=w.pixels=new Float32Array(f*g*4);var V=0,ne=1/0,pe=new Float32Array(2*i.count()),De=0,Re=[[1/0,1/0],[-1/0,-1/0]];i.each([r[0],r[1],"vx","vy"],function(Fe,ke,Be,at){var ot=t.dataToPoint([Fe,ke]);pe[De++]=ot[0],pe[De++]=ot[1],Re[0][0]=Math.min(ot[0],Re[0][0]),Re[0][1]=Math.min(ot[1],Re[0][1]),Re[1][0]=Math.max(ot[0],Re[1][0]),Re[1][1]=Math.max(ot[1],Re[1][1]);var St=Math.sqrt(Be*Be+at*at);V=Math.max(V,St),ne=Math.min(ne,St)}),i.each(["vx","vy"],function(Fe,ke,Be){var at=Math.round((pe[2*Be]-Re[0][0])/(Re[1][0]-Re[0][0])*(f-1)),St=4*((g-1-Math.round((pe[2*Be+1]-Re[0][1])/(Re[1][1]-Re[0][1])*(g-1)))*f+at);S[St]=Fe/V*.5+.5,S[St+1]=ke/V*.5+.5,S[St+3]=1}),w.width=f,w.height=g,"bmap"===e.get("coordinateSystem")&&this._fillEmptyPixels(w),w.dirty(),this._updatePlanePosition(Re[0],Re[1],e,n),this._updateGradientTexture(i.getVisual("visualMeta"),[ne,V])},_fillEmptyPixels:function(e){var n=e.pixels,t=e.width,r=e.height;function i(pe,De,Re){pe=Math.max(Math.min(pe,t-1),0);var Fe=4*((De=Math.max(Math.min(De,r-1),0))*(t-1)+pe);return 0!==n[Fe+3]&&(Re[0]=n[Fe],Re[1]=n[Fe+1],!0)}function o(pe,De,Re){Re[0]=pe[0]+De[0],Re[1]=pe[1]+De[1]}for(var d=[],f=[],g=[],_=[],w=[],S=0,k=0;k<r;k++)for(var V=0;V<t;V++){var ne=4*(k*(t-1)+V);0===n[ne+3]&&(S=d[0]=d[1]=0,i(V-1,k,f)&&(S++,o(f,d,d)),i(V+1,k,g)&&(S++,o(g,d,d)),i(V,k-1,_)&&(S++,o(_,d,d)),i(V,k+1,w)&&(S++,o(w,d,d)),d[0]/=S,d[1]/=S,n[ne]=d[0],n[ne+1]=d[1]),n[ne+3]=1}},_updateGradientTexture:function(e,n){if(e&&e.length){this._gradientTexture=this._gradientTexture||new lt.Texture2D({image:document.createElement("canvas")});var t=this._gradientTexture,r=t.image;r.width=200,r.height=1;var i=r.getContext("2d"),o=i.createLinearGradient(0,.5,r.width,.5);e[0].stops.forEach(function(d){var f;n[1]===n[0]?f=0:(f=d.value/n[1],f=Math.min(Math.max(f,0),1)),o.addColorStop(f,d.color)}),i.fillStyle=o,i.fillRect(0,0,r.width,r.height),t.dirty(),this._particleSurface.setGradientTexture(this._gradientTexture)}else this._particleSurface.setGradientTexture(null)},_updatePlanePosition:function(e,n,t,r){var i=this._limitInViewportAndFullFill(e,n,t,r);e=i.leftTop,n=i.rightBottom,this._particleSurface.setRegion(i.region),this._planeMesh.position.set((e[0]+n[0])/2,r.getHeight()-(e[1]+n[1])/2,0);var o=n[0]-e[0],d=n[1]-e[1];this._planeMesh.scale.set(o/2,d/2,1),this._particleSurface.resize(Math.max(Math.min(o,2048),1),Math.max(Math.min(d,2048),1)),this._renderer&&this._particleSurface.clearFrame(this._renderer)},_limitInViewportAndFullFill:function(e,n,t,r){var i=[Math.max(e[0],0),Math.max(e[1],0)],o=[Math.min(n[0],r.getWidth()),Math.min(n[1],r.getHeight())];if("bmap"===t.get("coordinateSystem")){var d=t.getData().getDataExtent(t.coordDimToDataDim("lng")[0]);Math.floor(d[1]-d[0])>=359&&(i[0]>0&&(i[0]=0),o[0]<r.getWidth()&&(o[0]=r.getWidth()))}var g=n[0]-e[0],_=n[1]-e[1],S=o[1]-i[1];return{leftTop:i,rightBottom:o,region:[(i[0]-e[0])/g,1-S/_-(i[1]-e[1])/_,(o[0]-i[0])/g,S/_]}},_updateCamera:function(e,n,t){this.viewGL.setViewport(0,0,e,n,t);var r=this.viewGL.camera;r.left=r.bottom=0,r.top=n,r.right=e,r.near=0,r.far=100,r.position.z=10},remove:function(){this._planeMesh.stopAnimation(),this.groupGL.removeAll()},dispose:function(){this._renderer&&this._particleSurface.dispose(this._renderer),this.groupGL.removeAll()}});(0,Ct.D$)(function Fse(e){e.registerChartView(Nse),e.registerSeriesModel(Ise)});var $j=z(9496),VV=Ct.wJ.extend({type:"series.linesGL",dependencies:["grid","geo"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",streamEnabled:!0,init:function(e){var n=this._processFlatCoordsArray(e.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(e.data=new Float32Array(n.count)),VV.superApply(this,"init",arguments)},mergeOption:function(e){var n=this._processFlatCoordsArray(e.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(e.data=new Float32Array(n.count)),VV.superApply(this,"mergeOption",arguments)},appendData:function(e){var n=this._processFlatCoordsArray(e.data);n.flatCoords&&(this._flatCoords?(this._flatCoords=(0,$j.concatArray)(this._flatCoords,n.flatCoords),this._flatCoordsOffset=(0,$j.concatArray)(this._flatCoordsOffset,n.flatCoordsOffset)):(this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset),e.data=new Float32Array(n.count)),this.getRawData().appendData(e.data)},_getCoordsFromItemModel:function(e){var n=this.getData().getItemModel(e);return n.option instanceof Array?n.option:n.getShallow("coords")},getLineCoordsCount:function(e){return this._flatCoordsOffset?this._flatCoordsOffset[2*e+1]:this._getCoordsFromItemModel(e).length},getLineCoords:function(e,n){if(this._flatCoordsOffset){for(var t=this._flatCoordsOffset[2*e],r=this._flatCoordsOffset[2*e+1],i=0;i<r;i++)n[i]=n[i]||[],n[i][0]=this._flatCoords[t+2*i],n[i][1]=this._flatCoords[t+2*i+1];return r}var o=this._getCoordsFromItemModel(e);for(i=0;i<o.length;i++)n[i]=n[i]||[],n[i][0]=o[i][0],n[i][1]=o[i][1];return o.length},_processFlatCoordsArray:function(e){var n=0;if(this._flatCoords&&(n=this._flatCoords.length),"number"==typeof e[0]){for(var t=e.length,r=new Uint32Array(t),i=new Float64Array(t),o=0,d=0,f=0,g=0;g<t;){f++;var _=e[g++];r[d++]=o+n,r[d++]=_;for(var w=0;w<_;w++){var S=e[g++],k=e[g++];i[o++]=S,i[o++]=k}}return{flatCoordsOffset:new Uint32Array(r.buffer,0,d),flatCoords:i,count:f}}return{flatCoordsOffset:null,flatCoords:null,count:e.length}},getInitialData:function(e,n){var t=new Ct.aV(["value"],this);return t.hasItemOption=!1,t.initData(e.data,[],function(r,i,o,d){if(r instanceof Array)return NaN;t.hasItemOption=!0;var f=r.value;return null!=f?f instanceof Array?f[d]:f:void 0}),t},defaultOption:{coordinateSystem:"geo",zlevel:10,progressive:1e4,progressiveThreshold:5e4,blendMode:"source-over",lineStyle:{opacity:.8},postEffect:{enable:!1,colorCorrection:{exposure:0,brightness:0,contrast:1,saturation:1,enable:!0}}}});const Bse=VV,Vse=Ct.TA.extend({type:"linesGL",__ecgl__:!0,init:function(e,n){this.groupGL=new lt.Node,this.viewGL=new zf("orthographic"),this.viewGL.add(this.groupGL),this._glViewHelper=new Wj(this.viewGL),this._nativeLinesShader=lt.createShader("ecgl.lines3D"),this._meshLinesShader=lt.createShader("ecgl.meshLines3D"),this._linesMeshes=[],this._currentStep=0},render:function(e,n,t){this.groupGL.removeAll(),this._glViewHelper.reset(e,t);var r=this._linesMeshes[0];r||(r=this._linesMeshes[0]=this._createLinesMesh(e)),this._linesMeshes.length=1,this.groupGL.add(r),this._updateLinesMesh(e,r,0,e.getData().count()),this.viewGL.setPostEffect(e.getModel("postEffect"),t)},incrementalPrepareRender:function(e,n,t){this.groupGL.removeAll(),this._glViewHelper.reset(e,t),this._currentStep=0,this.viewGL.setPostEffect(e.getModel("postEffect"),t)},incrementalRender:function(e,n,t,r){var i=this._linesMeshes[this._currentStep];i||(i=this._createLinesMesh(n),this._linesMeshes[this._currentStep]=i),this._updateLinesMesh(n,i,e.start,e.end),this.groupGL.add(i),r.getZr().refresh(),this._currentStep++},updateTransform:function(e,n,t){e.coordinateSystem.getRoamTransform&&this._glViewHelper.updateTransform(e,t)},_createLinesMesh:function(e){return new lt.Mesh({$ignorePicking:!0,material:new lt.Material({shader:lt.createShader("ecgl.lines3D"),transparent:!0,depthMask:!1,depthTest:!1}),geometry:new Yj({segmentScale:10,useNativeLine:!0,dynamic:!1}),mode:lt.Mesh.LINES,culling:!1})},_updateLinesMesh:function(e,n,t,r){var i=e.getData();n.material.blend="lighter"===e.get("blendMode")?lt.additiveBlend:null;var o=e.get("lineStyle.curveness")||0,d=e.get("polyline"),f=n.geometry,g=e.coordinateSystem,_=Jr.firstNotNull(e.get("lineStyle.width"),1);_>1?(n.material.shader!==this._meshLinesShader&&n.material.attachShader(this._meshLinesShader),n.mode=lt.Mesh.TRIANGLES):(n.material.shader!==this._nativeLinesShader&&n.material.attachShader(this._nativeLinesShader),n.mode=lt.Mesh.LINES),t=t||0,r=r||i.count(),f.resetOffset();var w=0,S=0,k=[],V=[],ne=[],pe=[],De=[];function ke(){V[0]=.7*k[0]+.3*pe[0]-(k[1]-pe[1])*o,V[1]=.7*k[1]+.3*pe[1]-(pe[0]-k[0])*o,ne[0]=.3*k[0]+.7*pe[0]-(k[1]-pe[1])*o,ne[1]=.3*k[1]+.7*pe[1]-(pe[0]-k[0])*o}if(d||0!==o)for(var Be=t;Be<r;Be++)if(d){var at=e.getLineCoordsCount(Be);w+=f.getPolylineVertexCount(at),S+=f.getPolylineTriangleCount(at)}else e.getLineCoords(Be,De),this._glViewHelper.dataToPoint(g,De[0],k),this._glViewHelper.dataToPoint(g,De[1],pe),ke(),w+=f.getCubicCurveVertexCount(k,V,ne,pe),S+=f.getCubicCurveTriangleCount(k,V,ne,pe);else{var ot=r-t;w+=ot*f.getLineVertexCount(),S+=ot*f.getLineVertexCount()}f.setVertexCount(w),f.setTriangleCount(S);var St=t,yt=[];for(Be=t;Be<r;Be++){lt.parseColor(Fo(i,St),yt);var Ht=Jr.firstNotNull(Bo(i,St),1);yt[3]*=Ht,at=e.getLineCoords(Be,De);for(var rn=0;rn<at;rn++)this._glViewHelper.dataToPoint(g,De[rn],De[rn]);d?f.addPolyline(De,yt,_,0,at):0!==o?(k=De[0],pe=De[1],ke(),f.addCubicCurve(k,V,ne,pe,yt,_)):f.addPolyline(De,yt,_,0,2),St++}},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function oP(e,n,t){return Math.min(Math.max(e,n),t)}function Kj(e){return e.reduce((n,t)=>n+t)/e.length}function Use(e=0,n=1){const t=1-Math.random(),r=Math.random();return Math.sqrt(-2*Math.log(t))*Math.cos(2*Math.PI*r)*n+e}(0,Ct.D$)(function zse(e){e.registerChartView(Vse),e.registerSeriesModel(Bse)});let Gse=(()=>{class e{constructor(){this.x_range=[-10,10],this.y_range=[-10,10],this.w_max=5,this.w_min=0,this.b_max=20,this.b_min=-20,this.lin_separability=!0,this.positiveBorder=[[this.x_range[0],this.y_range[0]],[this.x_range[1],this.y_range[1]],[this.x_range[1],this.y_range[0]],[this.x_range[0],this.y_range[0]]],this.negativeBorder=[[this.x_range[0],this.y_range[0]],[this.x_range[1],this.y_range[1]],[this.x_range[1],this.y_range[1]],[this.x_range[0],this.y_range[1]],[this.x_range[0],this.y_range[0]]],this.w=1,this.b=0,this.data_chart={legend:{align:"left"},tooltip:{},xAxis:{min:this.x_range[0],max:this.x_range[1]},yAxis:{min:this.y_range[0],max:this.y_range[1]},series:[{type:"scatter",encode:{tooltip:[0,1]},symbolSize:5,color:"green"},{type:"scatter",encode:{tooltip:[0,1]},symbolSize:5,color:"red"},{type:"line",data:this.positiveBorder,showSymbol:!1,areaStyle:{color:"green",opacity:.3},color:"black",z:-1},{type:"line",data:this.negativeBorder,showSymbol:!1,areaStyle:{color:"red",opacity:.3},lineStyle:{width:0},z:-1}],animationEasing:"elasticOut",animationDelayUpdate:t=>t},this.option_3d_graph={tooltip:{},visualMap:{show:!0,dimension:2,min:0,max:75,inRange:{color:["#313695","#4575b4","#74add1","#abd9e9","#fee090","#fdae61","#f46d43","#d73027","#a50026"]}},xAxis3D:{type:"value",name:"W"},yAxis3D:{type:"value",name:"b"},zAxis3D:{type:"value",name:"loss",axisLabel:{show:!1}},grid3D:{viewControl:{projection:"orthographic"}},series:[{type:"surface",tooltip:{show:!1},wireframe:{show:!0},data:[]},{type:"scatter3D",data:[[this.w,this.b,this.compute_loss(this.w,this.b)]],symbolSize:20}]},this.nPoints=100}ngOnInit(){this.distribute_points(),this.update_fx()}distribute_points(){this.lin_separability?(this.ptClass1=h2(this.nPoints,{x:5,y:-5},{x:4,y:4}),this.ptClass2=h2(this.nPoints,{x:-5,y:5},{x:4,y:4})):(this.ptClass1=h2(this.nPoints,{x:0,y:0},{x:1,y:1}),this.ptClass2=h2(this.nPoints,{x:0,y:0},{x:.1,y:.1}),this.ptClass2.forEach(i=>{let o=Math.sqrt(i.x*i.x+i.y*i.y);i.x=i.x*(5+5/o),i.y=i.y*(5+5/o)}));let t={data:this.ptClass1.map(i=>({value:[oP(i.x,this.x_range[0],this.x_range[1]),oP(i.y,this.y_range[0],this.y_range[1])]}))},r={data:this.ptClass2.map(i=>({value:[oP(i.x,this.x_range[0],this.x_range[1]),oP(i.y,this.y_range[0],this.y_range[1])]}))};Array.isArray(this.data_chart.series)&&(this.data_chart.series[0].data=t.data,this.data_chart.series[1].data=r.data),this.loss_3d_data=this.get_3D_data(),this.option_3d_graph.series[0].data=this.loss_3d_data,this.update_charts()}update_charts(){this.echartInstance?.setOption(this.data_chart),this.echartInstance3D?.setOption(this.option_3d_graph)}get_3D_data(){let t=new Array;for(let i=0;i<=50;i++)for(let o=0;o<=50;o++){let d=this.w_min+i*(this.w_max-this.w_min)/50,f=this.b_min+o*(this.b_max-this.b_min)/50,g=this.compute_loss(d,f);t.push([d,f,g])}return t}onChartInit(t){this.echartInstance=t}onChartInit3D(t){this.echartInstance3D=t}update_b(t){t.value&&(this.b=t.value),this.update_fx()}update_w(t){t.value&&(this.w=t.value),this.update_fx()}update_fx(){let t=[this.x_range[0],this.w*this.x_range[0]+this.b],r=[this.x_range[1],this.w*this.x_range[1]+this.b];this.positiveBorder[0]=t,this.positiveBorder[1]=r,this.negativeBorder[0]=t,this.negativeBorder[1]=r,this.option_3d_graph.series[1].data=[[this.w,this.b,this.compute_loss(this.w,this.b)]],this.update_charts()}compute_loss_v2(t,r){let i=0,o=Math.sqrt(1+t*t);for(let d=0;d<this.nPoints;d++){let f=this.ptClass1[d],g=this.ptClass2[d];i+=Math.abs(f.y+f.x*t+r)/o,i+=Math.abs(g.y+g.x*t+r)/o}return i/this.nPoints}compute_loss(t,r){let i=0;Math.sqrt(1+t*t);for(let d=0;d<this.nPoints;d++){let f=this.ptClass1[d],g=this.ptClass2[d];i+=+(f.y-f.x*t-r>0),i+=+(g.y-g.x*t-r<0)}return 100*i/(2*this.nPoints)}change_points_distributions(t){this.lin_separability="linear"==t.value,this.distribute_points(),this.update_fx()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=qn({type:e,selectors:[["app-weights-loss"]],decls:16,vars:12,consts:[[3,"rightDrawer"],["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],["title","Slope",3,"max","min","step","value","input"],["title","Intercept",3,"max","min","step","value","input"],["name","fontStyle","aria-label","Font Style",3,"change"],["value","linear",3,"checked"],["value","non_linear"],["ngProjectAs","[centerContent]",5,["","centerContent",""]],["echarts","",1,"graph",3,"options","chartInit"]],template:function(t,r){1&t&&(je(0,"app-tutorial-template",0),ci(1,1),je(2,"h3"),Mt(3," Tunable parameters "),Ke(),je(4,"app-labelled-sliders",2),It("input",function(o){return r.update_w(o)}),Ke(),je(5,"app-labelled-sliders",3),It("input",function(o){return r.update_b(o)}),Ke(),je(6,"h3"),Mt(7," Samples distribution "),Ke(),je(8,"mat-button-toggle-group",4),It("change",function(o){return r.change_points_distributions(o)}),je(9,"mat-button-toggle",5),Mt(10,"Linear"),Ke(),je(11,"mat-button-toggle",6),Mt(12,"Circular"),Ke()(),ui(),ci(13,7),je(14,"div",8),It("chartInit",function(o){return r.onChartInit(o)}),Ke(),je(15,"div",8),It("chartInit",function(o){return r.onChartInit3D(o)}),Ke(),ui(),Ke()),2&t&&(_t("rightDrawer",!1),xt(4),_t("max",r.w_max)("min",r.w_min)("step",.1)("value",r.w),xt(1),_t("max",r.b_max)("min",r.b_min)("step",.1)("value",r.b),xt(4),_t("checked",r.lin_separability),xt(5),_t("options",r.data_chart),xt(1),_t("options",r.option_3d_graph))},dependencies:[Og,nv,rv,iu,eC],styles:[".graph[_ngcontent-%COMP%]{aspect-ratio:1;width:30vw;background-color:#fff;border-radius:.25em;border-color:#000;margin:5%}.label-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:0 20px}.parameter-adjusting[_ngcontent-%COMP%]{margin:5px;border-radius:.5em;box-shadow:#0e1e251f 0 2px 4px,#0e1e2552 0 2px 16px}"]}),e})(),Wse=0;const zV=new dn("CdkAccordion");let jse=(()=>{class e{constructor(){this._stateChanges=new se,this._openCloseAllActions=new se,this.id="cdk-accordion-"+Wse++,this._multi=!1}get multi(){return this._multi}set multi(t){this._multi=yr(t)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(t){this._stateChanges.next(t)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Sn({type:e,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[Vr([{provide:zV,useExisting:e}]),ba]}),e})(),Zse=0,Yse=(()=>{class e{constructor(t,r,i){this.accordion=t,this._changeDetectorRef=r,this._expansionDispatcher=i,this._openCloseAllSubscription=ye.EMPTY,this.closed=new En,this.opened=new En,this.destroyed=new En,this.expandedChange=new En,this.id="cdk-accordion-child-"+Zse++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=i.listen((o,d)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===d&&this.id!==o&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(t){t=yr(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=yr(t)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}}return e.\u0275fac=function(t){return new(t||e)(qe(zV,12),qe(Pi),qe(tB))},e.\u0275dir=Sn({type:e,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[Vr([{provide:zV,useValue:void 0}])]}),e})(),Xse=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({}),e})();const $se=["body"];function Kse(e,n){}const Qse=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],qse=["mat-expansion-panel-header","*","mat-action-row"];function Jse(e,n){1&e&&yn(0,"span",2),2&e&&_t("@indicatorRotate",Wn()._getExpandedState())}const ele=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],tle=["mat-panel-title","mat-panel-description","*"],HV=new dn("MAT_ACCORDION"),Qj="225ms cubic-bezier(0.4,0.0,0.2,1)",qj={indicatorRotate:Xd("indicatorRotate",[dl("collapsed, void",va({transform:"rotate(0deg)"})),dl("expanded",va({transform:"rotate(180deg)"})),hl("expanded <=> collapsed, void => collapsed",kl(Qj))]),bodyExpansion:Xd("bodyExpansion",[dl("collapsed, void",va({height:"0px",visibility:"hidden"})),dl("expanded",va({height:"*",visibility:"visible"})),hl("expanded <=> collapsed, void => collapsed",kl(Qj))])},Jj=new dn("MAT_EXPANSION_PANEL");let nle=(()=>{class e{constructor(t,r){this._template=t,this._expansionPanel=r}}return e.\u0275fac=function(t){return new(t||e)(qe(il),qe(Jj,8))},e.\u0275dir=Sn({type:e,selectors:[["ng-template","matExpansionPanelContent",""]]}),e})(),rle=0;const e9=new dn("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let IC=(()=>{class e extends Yse{constructor(t,r,i,o,d,f,g){super(t,r,i),this._viewContainerRef=o,this._animationMode=f,this._hideToggle=!1,this.afterExpand=new En,this.afterCollapse=new En,this._inputChanges=new se,this._headerId="mat-expansion-panel-header-"+rle++,this._bodyAnimationDone=new se,this.accordion=t,this._document=d,this._bodyAnimationDone.pipe(Vw((_,w)=>_.fromState===w.fromState&&_.toState===w.toState)).subscribe(_=>{"void"!==_.fromState&&("expanded"===_.toState?this.afterExpand.emit():"collapsed"===_.toState&&this.afterCollapse.emit())}),g&&(this.hideToggle=g.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=yr(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Hs(null),Ki(()=>this.expanded&&!this._portal),vo(1)).subscribe(()=>{this._portal=new NI(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,r=this._body.nativeElement;return t===r||r.contains(t)}return!1}}return e.\u0275fac=function(t){return new(t||e)(qe(HV,12),qe(Pi),qe(tB),qe(as),qe(Rr),qe(Xo,8),qe(e9,8))},e.\u0275cmp=qn({type:e,selectors:[["mat-expansion-panel"]],contentQueries:function(t,r,i){if(1&t&&Bi(i,nle,5),2&t){let o;Qn(o=$n())&&(r._lazyContent=o.first)}},viewQuery:function(t,r){if(1&t&&Qr($se,5),2&t){let i;Qn(i=$n())&&(r._body=i.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(t,r){2&t&&ii("mat-expanded",r.expanded)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[Vr([{provide:HV,useValue:void 0},{provide:Jj,useExisting:e}]),Gn,ba],ngContentSelectors:qse,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(t,r){1&t&&(La(Qse),Yr(0),je(1,"div",0,1),It("@bodyExpansion.done",function(o){return r._bodyAnimationDone.next(o)}),je(3,"div",2),Yr(4,1),ir(5,Kse,0,0,"ng-template",3),Ke(),Yr(6,2),Ke()),2&t&&(xt(1),_t("@bodyExpansion",r._getExpandedState())("id",r.id),Pr("aria-labelledby",r._headerId),xt(4),_t("cdkPortalOutlet",r._portal))},dependencies:[FI],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[qj.bodyExpansion]},changeDetection:0}),e})();class ile{}const ale=xy(ile);let PC=(()=>{class e extends ale{constructor(t,r,i,o,d,f,g){super(),this.panel=t,this._element=r,this._focusMonitor=i,this._changeDetectorRef=o,this._animationMode=f,this._parentChangeSubscription=ye.EMPTY;const _=t.accordion?t.accordion._stateChanges.pipe(Ki(w=>!(!w.hideToggle&&!w.togglePosition))):Aa;this.tabIndex=parseInt(g||"")||0,this._parentChangeSubscription=Vn(t.opened,t.closed,_,t._inputChanges.pipe(Ki(w=>!!(w.hideToggle||w.disabled||w.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(Ki(()=>t._containsFocus())).subscribe(()=>i.focusVia(r,"program")),d&&(this.expandedHeight=d.expandedHeight,this.collapsedHeight=d.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:bc(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,r){t?this._focusMonitor.focusVia(this._element,t,r):this._element.nativeElement.focus(r)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return e.\u0275fac=function(t){return new(t||e)(qe(IC,1),qe(Or),qe(wc),qe(Pi),qe(e9,8),qe(Xo,8),ms("tabindex"))},e.\u0275cmp=qn({type:e,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(t,r){1&t&&It("click",function(){return r._toggle()})("keydown",function(o){return r._keydown(o)}),2&t&&(Pr("id",r.panel._headerId)("tabindex",r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),fa("height",r._getHeaderHeight()),ii("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[Gn],ngContentSelectors:tle,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(t,r){1&t&&(La(ele),je(0,"span",0),Yr(1),Yr(2,1),Yr(3,2),Ke(),ir(4,Jse,1,1,"span",1)),2&t&&(ii("mat-content-hide-toggle",!r._showToggle()),xt(4),_t("ngIf",r._showToggle()))},dependencies:[xs],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[qj.indicatorRotate]},changeDetection:0}),e})(),sP=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Sn({type:e,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),e})(),ole=(()=>{class e extends jse{constructor(){super(...arguments),this._ownHeaders=new Pd,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(t){this._hideToggle=yr(t)}ngAfterContentInit(){this._headers.changes.pipe(Hs(this._headers)).subscribe(t=>{this._ownHeaders.reset(t.filter(r=>r.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new hG(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(t){this._keyManager.onKeydown(t)}_handleHeaderFocus(t){this._keyManager.updateActiveItem(t)}ngOnDestroy(){super.ngOnDestroy(),this._ownHeaders.destroy()}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Ni(e)))(r||e)}}(),e.\u0275dir=Sn({type:e,selectors:[["mat-accordion"]],contentQueries:function(t,r,i){if(1&t&&Bi(i,PC,5),2&t){let o;Qn(o=$n())&&(r._headers=o)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(t,r){2&t&&ii("mat-accordion-multi",r.multi)},inputs:{multi:"multi",hideToggle:"hideToggle",displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],features:[Vr([{provide:HV,useExisting:e}]),Gn]}),e})(),sle=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[Rl,ri,Xse,gy]}),e})();const lle=["canvas"];function cle(e,n){1&e&&(je(0,"mat-icon"),Mt(1,"visibility"),Ke())}function ule(e,n){1&e&&(je(0,"mat-icon"),Mt(1,"visibility_off"),Ke())}function dle(e,n){if(1&e&&(je(0,"td"),Mt(1),Ke()),2&e){const t=n.index,r=Wn().index,i=Wn();xt(1),ro(" ",i.getFormattedValue(r,t)," ")}}const t9=function(){return[]};function hle(e,n){if(1&e&&(je(0,"tr"),ir(1,dle,2,1,"td",17),Ke()),2&e){const t=Wn();xt(1),_t("ngForOf",Id(1,t9).constructor(t.kernel.size))}}const fle=function(e,n){return{activated:e,deactivated:n}};let ple=(()=>{class e{constructor(){this.updateFilters=new En}ngOnInit(){this.kernel.delete=!1;const t=this.canvas.nativeElement;this.ctx=t.getContext("2d",{alpha:!1}),t.width=this.kernel.size,t.height=this.kernel.size,this.ctx.canvas.width=this.kernel.size,this.ctx.canvas.height=this.kernel.size,this.drawFilter()}delete(t){t.stopPropagation(),this.kernel.delete=!0,this.updateFilters.emit()}toggleActive(t){t.stopPropagation(),this.kernel.active=!this.kernel.active,this.updateFilters.emit()}drawFilter(){let t=new Uint8ClampedArray(this.kernel.size*this.kernel.size*4);for(let i=0;i<this.kernel.size;i++)for(let o=0;o<this.kernel.size;o++){const d=this.kernel.element[i*this.kernel.size+o];t[4*i*this.kernel.size+4*o]=d,t[4*i*this.kernel.size+4*o+1]=d,t[4*i*this.kernel.size+4*o+2]=d,t[4*i*this.kernel.size+4*o+3]=255}let r=new ImageData(t,this.kernel.size,this.kernel.size);this.ctx.putImageData(r,0,0)}getFormattedValue(t,r){return(this.kernel.element[t*this.kernel.size+r]/255).toFixed(0)}updateFilter(){this.updateFilters.emit(!0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=qn({type:e,selectors:[["app-structural-element"]],viewQuery:function(t,r){if(1&t&&Qr(lle,7),2&t){let i;Qn(i=$n())&&(r.canvas=i.first)}},inputs:{kernel:"kernel"},outputs:{updateFilters:"updateFilters"},decls:35,vars:9,consts:[[3,"ngClass"],["panelH",""],["mat-mini-fab","","color","accent",1,"action-button",3,"click"],[4,"ngIf"],["appearance","fill",3,"click"],[3,"ngModel","ngModelChange"],["value","erosion"],["value","dilation"],["value","opening"],["value","closing"],["value","tophat"],["value","gradient"],["value","skeletonize"],["mat-mini-fab","","color","warn",1,"action-button",3,"click"],[1,"vertical-flex","center"],[1,"rounded-table"],[3,"mouseenter"],[4,"ngFor","ngForOf"],["canvas",""]],template:function(t,r){if(1&t){const i=Fi();je(0,"mat-expansion-panel",0,1)(2,"mat-expansion-panel-header")(3,"mat-panel-title")(4,"button",2),It("click",function(d){return r.toggleActive(d)}),ir(5,cle,2,0,"mat-icon",3),ir(6,ule,2,0,"mat-icon",3),Ke(),je(7,"span")(8,"mat-form-field",4),It("click",function(){return Ur(i),Gr(li(1).toggle())}),je(9,"mat-label"),Mt(10,"Operation"),Ke(),je(11,"mat-select",5),It("ngModelChange",function(d){return r.kernel.morphOp=d})("ngModelChange",function(){return r.updateFilter()}),je(12,"mat-option",6),Mt(13,"Erosion"),Ke(),je(14,"mat-option",7),Mt(15,"Dilation"),Ke(),je(16,"mat-option",8),Mt(17,"Opening"),Ke(),je(18,"mat-option",9),Mt(19,"Closing"),Ke(),je(20,"mat-option",10),Mt(21,"Top Hat"),Ke(),je(22,"mat-option",11),Mt(23,"Gradient"),Ke(),je(24,"mat-option",12),Mt(25,"Skeletonize"),Ke()()()(),je(26,"button",13),It("click",function(d){return r.delete(d)}),je(27,"mat-icon"),Mt(28,"close"),Ke()()()(),je(29,"div",14)(30,"div",15)(31,"table",16),It("mouseenter",function(){return r.drawFilter()}),ir(32,hle,2,2,"tr",17),Ke()(),yn(33,"canvas",null,18),Ke()()}2&t&&(_t("ngClass",lg(5,fle,r.kernel.active,!r.kernel.active)),xt(5),_t("ngIf",r.kernel.active),xt(1),_t("ngIf",!r.kernel.active),xt(5),_t("ngModel",r.kernel.morphOp),xt(21),_t("ngForOf",Id(8,t9).constructor(r.kernel.size)))},dependencies:[Qw,$g,$8,z3,Vd,mc,xs,Au,Iu,IC,PC,sP,Cs,$d],styles:["mat-expansion-panel-header[_ngcontent-%COMP%]{height:fit-content}canvas[_ngcontent-%COMP%]{width:128px;aspect-ratio:1;image-rendering:-webkit-crisp-edges;image-rendering:pixelated;image-rendering:crisp-edges;box-shadow:#0000001f 0 1px 3px,#0000003d 0 1px 2px;border-radius:.5em}.title-span[_ngcontent-%COMP%]{margin:auto}tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#646464}.horizontal-flex[_ngcontent-%COMP%]{width:100%}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#6f9b75}td[_ngcontent-%COMP%]{font-size:small}.center[_ngcontent-%COMP%]{align-items:center;gap:1em}.deactivated[_ngcontent-%COMP%]:not(button){filter:brightness(.7);border:solid white 1px}.rounded-table[_ngcontent-%COMP%]{overflow:hidden;box-shadow:#0000001f 0 1px 3px,#0000003d 0 1px 2px;aspect-ratio:1;overflow:scroll}button[_ngcontent-%COMP%]{transform:scale(.5)}"]}),e})();const gle=["elementCanvasVisu"];function vle(e,n){if(1&e){const t=Fi();je(0,"app-structural-element",19),It("updateFilters",function(){return Ur(t),Gr(Wn().updateFilters())}),Ke()}2&e&&_t("kernel",n.$implicit)}let mle=(()=>{class e extends Jg{constructor(){super(...arguments),this.listKernels=new Array,this.ksize=3,this.structuralElementType="circle",this.width=256}ngAfterViewInit(){super.ngAfterViewInit(),this.cleanFilterList(),this.updateVisu()}updateVisu(){this.ngxOpenCv.isReady$.subscribe(t=>{if(this.cvState=t,t.ready){let r=this.getStructuringMat(this.ksize,this.structuralElementType);cv.convertScaleAbs(r,r,255);let i=32-this.ksize;cv.copyMakeBorder(r,r,i,i,i,i,cv.BORDER_CONSTANT),cv.imshow(this.eltCanvasVisu.nativeElement,r),r.delete()}})}applyFilter(){let t=cv.imread(this.drawCanvas.getCanvas()),r=new cv.Point(-1,-1),i=new cv.Mat;cv.cvtColor(t,i,cv.COLOR_RGB2GRAY),this.listKernels.forEach(o=>{if(!o.active)return;const d=o.size;let f=cv.matFromArray(d,d,cv.CV_8UC1,o.element);switch(o.morphOp){case"erosion":cv.erode(i,i,f,r,1,cv.BORDER_CONSTANT,cv.morphologyDefaultBorderValue());break;case"dilation":cv.dilate(i,i,f,r,1,cv.BORDER_CONSTANT,cv.morphologyDefaultBorderValue());break;case"opening":cv.morphologyEx(i,i,cv.MORPH_OPEN,f,r,1,cv.BORDER_CONSTANT,cv.morphologyDefaultBorderValue());break;case"closing":cv.morphologyEx(i,i,cv.MORPH_CLOSE,f);break;case"gradient":cv.morphologyEx(i,i,cv.MORPH_GRADIENT,f);break;case"tophat":cv.morphologyEx(i,i,cv.MORPH_TOPHAT,f);break;case"skeletonize":for(var g=new cv.Mat(this.width,this.width,cv.CV_8UC1,new cv.Scalar(0)),_=new cv.Mat,w=new cv.Mat,S=!1,k=50;!S&&k>0;)cv.erode(i,w,f),cv.dilate(w,_,f),cv.subtract(i,_,_),cv.bitwise_or(g,_,g),w.copyTo(i),S=0==cv.norm(i),k--;g.copyTo(i),g.delete(),_.delete(),w.delete()}f.delete()}),this.outputCanvas.drawMat(i),i.delete(),t.delete()}updateFilters(){this.listKernels=this.listKernels.filter(t=>!t.delete),this.applyFilter()}cleanFilterList(){this.listKernels=new Array}getStructuringMat(t,r){let i=new cv.Size(t,t);switch(r){case"circle":var o=cv.getStructuringElement(cv.MORPH_ELLIPSE,i);break;case"square":o=cv.getStructuringElement(cv.MORPH_RECT,i);break;case"cross":o=cv.getStructuringElement(cv.MORPH_CROSS,i)}return o}addFilter(){let t=this.getStructuringMat(this.ksize,this.structuralElementType);cv.convertScaleAbs(t,t,255);let r="erosion",i=this.listKernels.length;i>0&&(r=this.listKernels[i-1].morphOp);const o=new Uint8ClampedArray(t.data,t.cols,t.rows);this.listKernels.push({morphOp:r,size:this.ksize,element:o,active:!0,delete:!1}),t.delete(),this.updateFilters()}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Ni(e)))(r||e)}}(),e.\u0275cmp=qn({type:e,selectors:[["app-morpho-tools"]],viewQuery:function(t,r){if(1&t&&Qr(gle,7),2&t){let i;Qn(i=$n())&&(r.eltCanvasVisu=i.first)}},features:[Gn],decls:35,vars:16,consts:[["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],["title","Brush Size"],["brushSizeSlider",""],[3,"min","max","step","title","value","valueChange"],[3,"ngModel","ngModelChange","change"],["value","circle"],["value","square"],["value","cross"],[1,"structuralElementVisu"],["elementCanvasVisu",""],["mat-raised-button","","color","primary",1,"fillWidth",3,"click"],["ngProjectAs","[drawerRight]",5,["","drawerRight",""]],["echarts","",1,"profile-graph",3,"options"],[3,"kernel","updateFilters",4,"ngFor","ngForOf"],["ngProjectAs","[centerContent]",5,["","centerContent",""]],["title","Canvas",1,"canvas",3,"width","drawable","BWOption","OnlyBW","brushRadius","drawingEnded"],["inputCanvas",""],["title","Result",1,"canvas",3,"width","profileOption","drawable","profileChanged"],["outputCanvas",""],[3,"kernel","updateFilters"]],template:function(t,r){if(1&t&&(je(0,"app-tutorial-template-images"),Mt(1," Morphological Transformations "),ci(2,0),yn(3,"app-labelled-sliders",1,2)(5,"hr"),je(6,"app-labelled-sliders",3),It("valueChange",function(o){return r.ksize=o})("valueChange",function(){return r.updateVisu()}),Ke(),je(7,"span")(8,"mat-button-toggle-group",4),It("ngModelChange",function(o){return r.structuralElementType=o})("change",function(){return r.updateVisu()}),je(9,"mat-button-toggle",5)(10,"mat-icon"),Mt(11,"toll"),Ke()(),je(12,"mat-button-toggle",6)(13,"mat-icon"),Mt(14,"crop_square"),Ke()(),je(15,"mat-button-toggle",7)(16,"mat-icon"),Mt(17,"games"),Ke()()()(),yn(18,"canvas",8,9),je(20,"button",10),It("click",function(){return r.addFilter()}),Mt(21," Add "),Ke(),ui(),ci(22,11),je(23,"h2"),Mt(24,"Profile"),Ke(),yn(25,"div",12),je(26,"h2"),Mt(27,"Active filters"),Ke(),yn(28,"hr"),ir(29,vle,1,1,"app-structural-element",13),ui(),ci(30,14),je(31,"app-draw-canvas",15,16),It("drawingEnded",function(){return r.applyFilter()}),Ke(),je(33,"app-draw-canvas",17,18),It("profileChanged",function(){return r.updateProfile()}),Ke(),ui(),Ke()),2&t){const i=li(4);xt(6),_t("min",3)("max",25)("step",2)("title","Element size")("value",r.ksize),xt(2),_t("ngModel",r.structuralElementType),xt(17),_t("options",r.profileOptions),xt(4),_t("ngForOf",r.listKernels),xt(2),_t("width",r.width)("drawable",!0)("BWOption",!1)("OnlyBW",!0)("brushRadius",i.value),xt(2),_t("width",r.width)("profileOption",!0)("drawable",!1)}},dependencies:[Og,nv,rv,mc,Au,Iu,Cs,$d,ev,iu,ple,tv],styles:[".canvas[_ngcontent-%COMP%]{width:45%;min-width:256px;image-rendering:-webkit-crisp-edges;image-rendering:pixelated;image-rendering:crisp-edges}.structuralElementVisu[_ngcontent-%COMP%]{width:128px;aspect-ratio:1;image-rendering:-webkit-crisp-edges;image-rendering:pixelated;image-rendering:crisp-edges;margin:1em}.profile-graph[_ngcontent-%COMP%]{min-width:300px;padding:0 .5em}"]}),e})();function n9(e){let n=Array(e.length).fill(0);lP(e,n);let t=new Array(e.length);for(let r=0;r<t.length;r++){let i=e[r],o=n[r];t[r]=2*Math.sqrt(i*i+o*o)/e.length}return t}function lP(e,n){const t=e.length;if(t!=n.length)throw new RangeError("Mismatched lengths");0!=t&&(0==(t&t-1)?function yle(e,n){const t=e.length;if(t!=n.length)throw new RangeError("Mismatched lengths");if(1==t)return;let r=-1;for(let f=0;f<32;f++)1<<f==t&&(r=f);if(-1==r)throw new RangeError("Length is not a power of 2");let i=new Array(t/2),o=new Array(t/2);for(let f=0;f<t/2;f++)i[f]=Math.cos(2*Math.PI*f/t),o[f]=Math.sin(2*Math.PI*f/t);for(let f=0;f<t;f++){const g=d(f,r);if(g>f){let _=e[f];e[f]=e[g],e[g]=_,_=n[f],n[f]=n[g],n[g]=_}}for(let f=2;f<=t;f*=2){const g=f/2,_=t/f;for(let w=0;w<t;w+=f)for(let S=w,k=0;S<w+g;S++,k+=_){const V=S+g,ne=e[V]*i[k]+n[V]*o[k],pe=-e[V]*o[k]+n[V]*i[k];e[V]=e[S]-ne,n[V]=n[S]-pe,e[S]+=ne,n[S]+=pe}}function d(f,g){let _=0;for(let w=0;w<g;w++)_=_<<1|1&f,f>>>=1;return _}}(e,n):function ble(e,n){const t=e.length;if(t!=n.length)throw new RangeError("Mismatched lengths");let r=1;for(;r<2*t+1;)r*=2;let i=new Array(t),o=new Array(t);for(let k=0;k<t;k++){const V=k*k%(2*t);i[k]=Math.cos(Math.PI*V/t),o[k]=Math.sin(Math.PI*V/t)}let d=Sv(r),f=Sv(r);for(let k=0;k<t;k++)d[k]=e[k]*i[k]+n[k]*o[k],f[k]=-e[k]*o[k]+n[k]*i[k];let g=Sv(r),_=Sv(r);g[0]=i[0],_[0]=o[0];for(let k=1;k<t;k++)g[k]=g[r-k]=i[k],_[k]=_[r-k]=o[k];let w=new Array(r),S=new Array(r);!function r9(e,n,t,r,i,o){const d=e.length;if(d!=n.length||d!=t.length||d!=r.length||d!=i.length||d!=o.length)throw new RangeError("Mismatched lengths");e=e.slice(),n=n.slice(),t=t.slice(),r=r.slice(),lP(e,n),lP(t,r);for(let f=0;f<d;f++){const g=e[f]*t[f]-n[f]*r[f];n[f]=n[f]*t[f]+e[f]*r[f],e[f]=g}!function _le(e,n){lP(n,e)}(e,n);for(let f=0;f<d;f++)i[f]=e[f]/d,o[f]=n[f]/d}(d,f,g,_,w,S);for(let k=0;k<t;k++)e[k]=w[k]*i[k]+S[k]*o[k],n[k]=-w[k]*o[k]+S[k]*i[k]}(e,n))}function Sv(e){return Array(e).fill(0)}const xle=["input"],wle=["label"],Cle=function(e){return{enterDuration:e}},Sle=["*"],Dle=new dn("mat-checkbox-default-options",{providedIn:"root",factory:a9});function a9(){return{color:"accent",clickAction:"check-indeterminate"}}let Mle=0;const o9=a9(),Tle={provide:Qo,useExisting:kr(()=>UV),multi:!0};class Ele{}const Ale=xy(jd(If(Uw(class{constructor(e){this._elementRef=e}}))));let Ile=(()=>{class e extends Ale{constructor(t,r,i,o,d,f,g){super(r),this._changeDetectorRef=i,this._ngZone=o,this._animationMode=f,this._options=g,this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new En,this.indeterminateChange=new En,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||o9,this.color=this.defaultColor=this._options.color||o9.color,this.tabIndex=parseInt(d)||0,this.id=this._uniqueId=`${t}${++Mle}`}get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(t){this._required=yr(t)}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(t){const r=yr(t);r!=this.checked&&(this._checked=r,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){const r=yr(t);r!==this.disabled&&(this._disabled=r,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(t){const r=t!=this._indeterminate;this._indeterminate=yr(t),r&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(t){this.checked=!!t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_getAriaChecked(){return this.checked?"true":this.indeterminate?"mixed":"false"}_transitionCheckState(t){let r=this._currentCheckState,i=this._getAnimationTargetElement();if(r!==t&&i&&(this._currentAnimationClass&&i.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(r,t),this._currentCheckState=t,this._currentAnimationClass.length>0)){i.classList.add(this._currentAnimationClass);const o=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{i.classList.remove(o)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){const t=this._options?.clickAction;this.disabled||"noop"===t?!this.disabled&&"noop"===t&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==t&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}_onInteractionEvent(t){t.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(t,r){if("NoopAnimations"===this._animationMode)return"";switch(t){case 0:if(1===r)return this._animationClasses.uncheckedToChecked;if(3==r)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case 2:return 1===r?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case 1:return 2===r?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case 3:return 1===r?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(t){const r=this._inputElement;r&&(r.nativeElement.indeterminate=t)}}return e.\u0275fac=function(t){El()},e.\u0275dir=Sn({type:e,viewQuery:function(t,r){if(1&t&&(Qr(xle,5),Qr(wle,5),Qr(Zd,5)),2&t){let i;Qn(i=$n())&&(r._inputElement=i.first),Qn(i=$n())&&(r._labelElement=i.first),Qn(i=$n())&&(r.ripple=i.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],id:"id",required:"required",labelPosition:"labelPosition",name:"name",value:"value",checked:"checked",disabled:"disabled",indeterminate:"indeterminate"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},features:[Gn]}),e})(),UV=(()=>{class e extends Ile{constructor(t,r,i,o,d,f,g){super("mat-checkbox-",t,r,o,d,f,g),this._focusMonitor=i,this._animationClasses={uncheckedToChecked:"mat-checkbox-anim-unchecked-checked",uncheckedToIndeterminate:"mat-checkbox-anim-unchecked-indeterminate",checkedToUnchecked:"mat-checkbox-anim-checked-unchecked",checkedToIndeterminate:"mat-checkbox-anim-checked-indeterminate",indeterminateToChecked:"mat-checkbox-anim-indeterminate-checked",indeterminateToUnchecked:"mat-checkbox-anim-indeterminate-unchecked"}}_createChangeEvent(t){const r=new Ele;return r.source=this,r.checked=t,r}_getAnimationTargetElement(){return this._elementRef.nativeElement}ngAfterViewInit(){super.ngAfterViewInit(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{t||this._onBlur()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onInputClick(t){t.stopPropagation(),super._handleInputClick()}focus(t,r){t?this._focusMonitor.focusVia(this._inputElement,t,r):this._inputElement.nativeElement.focus(r)}}return e.\u0275fac=function(t){return new(t||e)(qe(Or),qe(Pi),qe(wc),qe(Cr),ms("tabindex"),qe(Xo,8),qe(Dle,8))},e.\u0275cmp=qn({type:e,selectors:[["mat-checkbox"]],hostAttrs:[1,"mat-checkbox"],hostVars:14,hostBindings:function(t,r){2&t&&(Zo("id",r.id),Pr("tabindex",null)("aria-label",null)("aria-labelledby",null),ii("mat-checkbox-indeterminate",r.indeterminate)("mat-checkbox-checked",r.checked)("mat-checkbox-disabled",r.disabled)("mat-checkbox-label-before","before"==r.labelPosition)("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matCheckbox"],features:[Vr([Tle]),Gn],ngContentSelectors:Sle,decls:17,vars:21,consts:[[1,"mat-checkbox-layout"],["label",""],[1,"mat-checkbox-inner-container"],["type","checkbox",1,"mat-checkbox-input","cdk-visually-hidden",3,"id","required","checked","disabled","tabIndex","change","click"],["input",""],["matRipple","",1,"mat-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleRadius","matRippleCentered","matRippleAnimation"],[1,"mat-ripple-element","mat-checkbox-persistent-ripple"],[1,"mat-checkbox-frame"],[1,"mat-checkbox-background"],["version","1.1","focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mat-checkbox-checkmark"],["fill","none","stroke","white","d","M4.1,12.7 9,17.6 20.3,6.3",1,"mat-checkbox-checkmark-path"],[1,"mat-checkbox-mixedmark"],[1,"mat-checkbox-label",3,"cdkObserveContent"],["checkboxLabel",""],[2,"display","none"]],template:function(t,r){if(1&t&&(La(),je(0,"label",0,1)(2,"span",2)(3,"input",3,4),It("change",function(o){return r._onInteractionEvent(o)})("click",function(o){return r._onInputClick(o)}),Ke(),je(5,"span",5),yn(6,"span",6),Ke(),yn(7,"span",7),je(8,"span",8),xh(),je(9,"svg",9),yn(10,"path",10),Ke(),function m0(){!function VP(){Br.lFrame.currentNamespace=null}()}(),yn(11,"span",11),Ke()(),je(12,"span",12,13),It("cdkObserveContent",function(){return r._onLabelTextChange()}),je(14,"span",14),Mt(15,"\xa0"),Ke(),Yr(16),Ke()()),2&t){const i=li(1),o=li(13);Pr("for",r.inputId),xt(2),ii("mat-checkbox-inner-container-no-side-margin",!o.textContent||!o.textContent.trim()),xt(1),_t("id",r.inputId)("required",r.required)("checked",r.checked)("disabled",r.disabled)("tabIndex",r.tabIndex),Pr("value",r.value)("name",r.name)("aria-label",r.ariaLabel||null)("aria-labelledby",r.ariaLabelledby)("aria-checked",r._getAriaChecked())("aria-describedby",r.ariaDescribedby),xt(2),_t("matRippleTrigger",i)("matRippleDisabled",r._isRippleDisabled())("matRippleRadius",20)("matRippleCentered",!0)("matRippleAnimation",hc(19,Cle,"NoopAnimations"===r._animationMode?0:150))}},dependencies:[Zd,k3],styles:['@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.910259}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);stroke-dashoffset:0}to{stroke-dashoffset:-22.910259}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0deg)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}32.8%,100%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{display:inline-block;transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);position:relative}.mat-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-checkbox-layout{-webkit-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:rgba(0,0,0,0);transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0, 0, 0.2, 0.1),opacity 90ms cubic-bezier(0, 0, 0.2, 0.1);-webkit-print-color-adjust:exact;color-adjust:exact}._mat-animation-noopable .mat-checkbox-background{transition:none}.cdk-high-contrast-active .mat-checkbox .mat-checkbox-background{background:none}.mat-checkbox-persistent-ripple{display:block;width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media(hover: none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.910259;stroke-dasharray:22.910259;stroke-width:2.1333333333px}.cdk-high-contrast-black-on-white .mat-checkbox-checkmark-path{stroke:#000 !important}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0deg);border-radius:2px}.cdk-high-contrast-active .mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0deg)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:rgba(0,0,0,0)}.mat-checkbox-disabled{cursor:default}.cdk-high-contrast-active .mat-checkbox-disabled{opacity:.5}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0ms mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0ms mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:300ms linear 0ms mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}.mat-checkbox-input:focus~.mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),e})(),s9=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({}),e})(),Lle=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[Zg,ri,zI,s9,ri,s9]}),e})(),Ole=(()=>{class e{constructor(t){this.formBuilder=t,this.n_points=1024,this.t_start=0,this.t_stop=8,this.fe=2,this.y1=!0,this.y2=!0,this.y3=!0,this.y1Phase=0,this.y2Phase=2,this.y3Phase=4,this.original_data=Array(this.n_points),this.sampled_data=Array(this.n_points),this.original_fft=Array(this.n_points),this.sampled_fft=Array(this.n_points),this.createData(),this.update_fft_chart(),this.initialize_echarts()}ngAfterViewInit(){this.update_fe(this.fe),this.update_fft_chart()}initialize_echarts(){let t={xAxis:{min:this.t_start,max:this.t_stop},yAxis:{min:-7,max:7}};this.original_graph=Object.assign({},t),this.original_graph.series=[{data:this.original_data,type:"line",showSymbol:!1,animation:!1},{data:this.sampled_data,type:"bar",barWidth:2}],this.original_graph.title={text:"Original Signal"},this.sampled_graph=Object.assign({},t),this.sampled_graph.title={text:"Sampled Signal"},this.sampled_graph.series=[{data:this.sampled_data,type:"line",showSymbol:!0}],this.sampled_fft_graph=Object.assign({},t),this.sampled_fft_graph.title={text:"Sampled Signal FFT"},this.original_fft_graph=Object.assign({},t),this.original_fft_graph.title={text:"Original Signal FFT"}}createData(){const t=c6(this.t_start,this.t_stop,this.n_points);this.original_data=new Array(this.n_points);for(let r=0;r<this.n_points;r++){const i=t[r];this.original_data[r]=[i,this.signal(i)]}this.resample_signal(),this.original_graph&&Array.isArray(this.original_graph.series)&&(this.original_graph.series[0].data=this.original_data,this.echartsInstanceOriginalGraph?.setOption(this.original_graph)),this.update_fft_chart()}resample_signal(){let r=Math.round(this.t_stop/(1/this.fe)),i=c6(this.t_start,this.t_stop,r+1);this.sampled_data=new Array(r+1);for(let o=0;o<=r;o++){let d=i[o];this.sampled_data[o]=[d,this.signal(d)]}}recompute(){this.createData(),this.update_fe(this.fe)}signal(t){return(this.y1?4*Math.sin(2*Math.PI*.5*t-this.y1Phase):0)+(this.y2?2*Math.sin(2*Math.PI*1*t+2-this.y2Phase):0)+(this.y3?1*Math.sin(2*Math.PI*4*t+4-this.y3Phase):0)}update_fft_chart(){let t=n9(this.original_data.map(o=>o[1])),r=this.n_points/(this.t_stop-this.t_start),i={xAxis:{min:0,max:5},yAxis:{min:0,max:5},series:[{data:t.map((o,d)=>[d*r/this.n_points,o]),type:"bar"}]};this.original_fft_graph=Object.assign({},i),this.original_fft_graph.title={text:"Fourier Transform of the original signal"},this.echartsInstanceOriginalFFTGraph?.setOption(this.original_fft_graph),this.update_sampled_fft_chart()}update_sampled_fft_chart(){if(0==this.sampled_data.length)return;let t=new Array(this.n_points),r=this.n_points/(this.t_stop-this.t_start),i=this.sampled_data.length;for(let _=0;_<this.n_points;_++){let w=i/this.n_points*_,S=Math.floor(w);if(S==i-1)t[_]=this.sampled_data[i-1];else{let k=w-S;t[_]=[this.t_start+_/r,(1-k)*this.sampled_data[S][1]+k*this.sampled_data[S+1][1]]}}let d=n9(t.map(_=>_[1])),f=d.length/(this.t_stop-this.t_start),g={xAxis:{min:0,max:5},yAxis:{min:0,max:5},series:[{data:d.map((_,w)=>[w*f/d.length,_]),type:"bar"}]};this.sampled_fft_graph=Object.assign({},g),this.sampled_fft_graph.title={text:"Fourier Transform of the sampled signal"},this.echartsInstanceSampledFFTGraph?.setOption(this.sampled_fft_graph)}onSampledChartInit(t){this.echartInstanceSampledGraph=t}onOriginalChartInit(t){this.echartsInstanceOriginalGraph=t}onFFTChartInit(t){this.echartsInstanceOriginalFFTGraph=t}onSampledFFTChartInit(t){this.echartsInstanceSampledFFTGraph=t}update_fe(t){t&&(this.fe=t,this.resample_signal(),Array.isArray(this.sampled_graph.series)&&(this.sampled_graph.series[0].data=this.sampled_data,this.sampled_graph.title={text:`Sampled Signal fe = ${this.fe}, N = ${this.sampled_data.length}`},this.echartInstanceSampledGraph?.setOption(this.sampled_graph),Array.isArray(this.original_graph.series)&&(this.original_graph.series[1].data=this.sampled_data,this.echartsInstanceOriginalGraph?.setOption(this.original_graph))),this.update_fft_chart())}}return e.\u0275fac=function(t){return new(t||e)(qe(M7))},e.\u0275cmp=qn({type:e,selectors:[["app-sampling"]],decls:26,vars:24,consts:[[3,"rightDrawer"],["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],[3,"checked","change"],[3,"value","min","max","step","valueChange"],[1,"w-64"],["title","Sub sampling frequency",3,"value","max","min","step","input"],["ngProjectAs","[centerContent]",5,["","centerContent",""]],[1,"grid","md:grid-cols-2","w-full","gap-2","p-2"],["echarts","",1,"bg-white",3,"options","chartInit"]],template:function(t,r){1&t&&(je(0,"app-tutorial-template",0),Mt(1," Sampling Frequency and Nyquist-Shannon Theorem "),ci(2,1),je(3,"mat-label"),Mt(4,"Components"),Ke(),je(5,"p")(6,"mat-checkbox",2),It("change",function(){return r.y1=!r.y1,r.recompute()}),Mt(7,"Y1"),Ke(),je(8,"mat-slider",3),It("valueChange",function(o){return r.y1Phase=o})("valueChange",function(){return r.recompute()}),Ke()(),je(9,"p")(10,"mat-checkbox",2),It("change",function(){return r.y2=!r.y2,r.recompute()}),Mt(11,"Y2"),Ke(),je(12,"mat-slider",3),It("valueChange",function(o){return r.y2Phase=o})("valueChange",function(){return r.recompute()}),Ke()(),je(13,"p")(14,"mat-checkbox",2),It("change",function(){return r.y3=!r.y3,r.recompute()}),Mt(15,"Y3"),Ke(),je(16,"mat-slider",3),It("valueChange",function(o){return r.y3Phase=o})("valueChange",function(){return r.recompute()}),Ke()(),je(17,"p",4),Mt(18," The Nyquist-Shannon theorem states that a signal must be sampled at a rate of at least twice the highest frequency component in the signal in order to be able to reconstruct the original signal from the samples. This is known as the Nyquist rate. "),Ke(),je(19,"app-labelled-sliders",5),It("input",function(o){return r.update_fe(o.value)}),Ke(),ui(),ci(20,6),je(21,"div",7)(22,"div",8),It("chartInit",function(o){return r.onOriginalChartInit(o)}),Ke(),je(23,"div",8),It("chartInit",function(o){return r.onSampledChartInit(o)}),Ke(),je(24,"div",8),It("chartInit",function(o){return r.onFFTChartInit(o)}),Ke(),je(25,"div",8),It("chartInit",function(o){return r.onSampledFFTChartInit(o)}),Ke()(),ui(),Ke()),2&t&&(_t("rightDrawer",!1),xt(6),_t("checked",r.y1),xt(2),_t("value",r.y1Phase)("min",0)("max",6.28)("step",.05),xt(2),_t("checked",r.y2),xt(2),_t("value",r.y2Phase)("min",0)("max",6.28)("step",.05),xt(2),_t("checked",r.y3),xt(2),_t("value",r.y3Phase)("min",0)("max",6.28)("step",.05),xt(3),_t("value",r.fe)("max",64)("min",0)("step",.1),xt(3),_t("options",r.original_graph),xt(1),_t("options",r.sampled_graph),xt(1),_t("options",r.original_fft_graph),xt(1),_t("options",r.sampled_fft_graph))},dependencies:[Og,UV,$g,uB,iu,eC]}),e})();class Dv{static getGaussianKernel(n,t,r=1,i=1){const o=((n=n%2==0?n+1:n)-1)/2,d=((t=t%2==0?t+1:t)-1)/2,f=Math.sqrt(2);let g=new Array;for(let w=0;w<n;w++)for(let S=0;S<t;S++){const k=Math.exp(-Math.pow((w-o)/(f*r),2)-Math.pow((S-d)/(f*i),2));g.push(k)}const _=g.reduce((w,S)=>w+S,0);return g=g.map(w=>w/_),{width:n,height:t,active:!0,mat:[g],name:"Gaussian"}}static getMeanKernel(n,t){return{width:n,height:t,active:!0,mat:[new Array(n*t).fill(1/(n*t))],name:"Mean"}}static getSobelKernels(){return{width:3,height:3,active:!0,mat:[[1,0,-1,2,0,-2,1,0,-1],[1,2,1,0,0,0,-1,-2,-1]],name:"Sobel"}}static getPrewittKernels(){return{width:3,height:3,active:!0,mat:[[1,0,-1,1,0,-1,1,0,-1],[1,1,1,0,0,0,-1,-1,-1]],name:"Prewitt"}}static getLaplacianKernel(){return{width:3,height:3,active:!0,mat:[[-1,-1,-1,-1,8,-1,-1,-1,-1]],name:"Laplacian"}}static getAdditiveKernel(n){return{width:1,height:1,active:!0,mat:[[n]],name:"Add"}}static getMultiplicativeKernel(n){return{width:1,height:1,active:!0,mat:[[n]],name:"Multiply"}}}const kle=["canvas"];function Nle(e,n){1&e&&(je(0,"mat-icon"),Mt(1,"visibility"),Ke())}function Fle(e,n){1&e&&(je(0,"mat-icon"),Mt(1,"visibility_off"),Ke())}function Ble(e,n){if(1&e&&(je(0,"td"),Mt(1),Ke()),2&e){const t=n.index,r=Wn().index,i=Wn().$implicit,o=Wn();xt(1),ro(" ",i[r*o.kernel.width+t].toFixed(2)," ")}}const l9=function(){return[]};function Vle(e,n){if(1&e&&(je(0,"tr"),ir(1,Ble,2,1,"td",10),Ke()),2&e){const t=Wn(2);xt(1),_t("ngForOf",Id(1,l9).constructor(t.kernel.width))}}function zle(e,n){if(1&e){const t=Fi();je(0,"div",8)(1,"table",9),It("mouseenter",function(){const o=Ur(t).$implicit;return Gr(Wn().drawFilter(o))}),ir(2,Vle,2,2,"tr",10),Ke()()}if(2&e){const t=Wn();xt(2),_t("ngForOf",Id(1,l9).constructor(t.kernel.height))}}const Hle=function(e,n){return{activated:e,deactivated:n}};let Ule=(()=>{class e{constructor(){this.updateFilters=new En}ngOnInit(){this.kernel.delete=!1;const t=this.canvas.nativeElement;this.ctx=t.getContext("2d"),this.width=this.kernel.width,this.height=this.kernel.height,t.width=this.width,t.height=this.height,this.ctx.canvas.width=this.width,this.ctx.canvas.height=this.height,this.drawFilter(this.kernel.mat[0])}delete(t){t.stopPropagation(),this.kernel.delete=!0,this.updateFilters.emit()}toggleActive(t){t.stopPropagation(),this.kernel.active=!this.kernel.active,this.updateFilters.emit()}drawFilter(t){let r=new Uint8ClampedArray(4*t.length),i=t.reduce(function(f,g){return f>g?f:g}),o=t.reduce(function(f,g){return f<g?f:g});o==i&&(o=0,i=1);for(let f=0;f<t.length;f++){const g=4*f,_=Math.round(255*(t[f]-o)/(i-o));r[g]=_,r[g+1]=_,r[g+2]=_,r[g+3]=255}let d=new ImageData(r,this.kernel.width,this.kernel.height);this.ctx.putImageData(d,0,0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=qn({type:e,selectors:[["app-kernel-element"]],viewQuery:function(t,r){if(1&t&&Qr(kle,7),2&t){let i;Qn(i=$n())&&(r.canvas=i.first)}},inputs:{kernel:"kernel"},outputs:{updateFilters:"updateFilters"},decls:15,vars:8,consts:[[3,"ngClass"],["mat-mini-fab","","color","accent",1,"action-button",3,"click"],[4,"ngIf"],[1,"title-span"],["mat-mini-fab","","color","warn",1,"action-button",3,"click"],[1,"vertical-flex","center"],["class","rounded-table",4,"ngFor","ngForOf"],["canvas",""],[1,"rounded-table"],[3,"mouseenter"],[4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(je(0,"mat-expansion-panel",0)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"button",1),It("click",function(o){return r.toggleActive(o)}),ir(4,Nle,2,0,"mat-icon",2),ir(5,Fle,2,0,"mat-icon",2),Ke(),je(6,"span",3),Mt(7),Ke(),je(8,"button",4),It("click",function(o){return r.delete(o)}),je(9,"mat-icon"),Mt(10,"close"),Ke()()()(),je(11,"div",5),ir(12,zle,3,2,"div",6),yn(13,"canvas",null,7),Ke()()),2&t&&(_t("ngClass",lg(5,Hle,r.kernel.active,!r.kernel.active)),xt(4),_t("ngIf",r.kernel.active),xt(1),_t("ngIf",!r.kernel.active),xt(2),ro(" ",r.kernel.name," "),xt(5),_t("ngForOf",r.kernel.mat))},dependencies:[Vd,mc,xs,IC,PC,sP,Cs,$d],styles:["canvas[_ngcontent-%COMP%]{width:128px;aspect-ratio:1;image-rendering:-webkit-crisp-edges;image-rendering:pixelated;image-rendering:crisp-edges;box-shadow:#0000001f 0 1px 3px,#0000003d 0 1px 2px;border-radius:.5em}.title-span[_ngcontent-%COMP%]{margin:auto}tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#646464}.horizontal-flex[_ngcontent-%COMP%]{width:100%}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#6f9b75}td[_ngcontent-%COMP%]{font-size:small}.center[_ngcontent-%COMP%]{align-items:center;gap:1em}.deactivated[_ngcontent-%COMP%]:not(button){filter:brightness(.7);border:solid white 1px}.rounded-table[_ngcontent-%COMP%]{border-radius:.75em;overflow:hidden;box-shadow:#0000001f 0 1px 3px,#0000003d 0 1px 2px}button[_ngcontent-%COMP%]{transform:scale(.5)}"]}),e})();function Gle(e,n){if(1&e){const t=Fi();je(0,"button",25),It("click",function(){return Ur(t),Gr(Wn().cleanFilterList())}),Mt(1," Clear "),Ke()}}function Wle(e,n){if(1&e){const t=Fi();je(0,"app-kernel-element",26),It("updateFilters",function(){return Ur(t),Gr(Wn().updateFilters())}),Ke()}2&e&&_t("kernel",n.$implicit)}let jle=(()=>{class e extends Jg{updateFilters(){this.listKernels=this.listKernels.filter(t=>!t.delete),this.applyFilter()}ngAfterContentInit(){this.listKernels=new Array}laplacianFilter(){this.listKernels.push(Dv.getLaplacianKernel()),this.applyFilter()}gaussianBlur(t,r,i){this.listKernels.push(Dv.getGaussianKernel(t,t,r,i)),this.applyFilter()}meanFilter(t){this.listKernels.push(Dv.getMeanKernel(t,t)),this.applyFilter()}prewittFilter(){this.listKernels.push(Dv.getPrewittKernels()),this.applyFilter()}sobelFilter(){this.listKernels.push(Dv.getSobelKernels()),this.applyFilter()}additiveFilter(t){this.listKernels.push(Dv.getAdditiveKernel(t)),this.applyFilter()}multiplyFilter(t){this.listKernels.push(Dv.getMultiplicativeKernel(t)),this.applyFilter()}cleanFilterList(){this.listKernels=new Array,this.applyFilter()}applyFilter(){let t=cv.imread(this.drawCanvas.getCanvas()),r=new cv.Mat;t.convertTo(r,cv.CV_32F,1/255),cv.cvtColor(r,r,cv.COLOR_RGB2GRAY),this.listKernels.forEach(i=>{if(i.active)if("Add"==i.name)r.convertTo(r,-1,1,i.mat[0][0]);else if("Multiply"==i.name)r.convertTo(r,-1,i.mat[0][0],0);else if(2==i.mat.length){let o=cv.matFromArray(i.width,i.height,cv.CV_32F,i.mat[0]),d=new cv.Mat;cv.filter2D(r,d,-1,o),cv.pow(d,2,d),o=cv.matFromArray(i.width,i.height,cv.CV_32F,i.mat[1]);let f=new cv.Mat;cv.filter2D(r,f,-1,o),cv.pow(f,2,f),cv.add(d,f,r),cv.pow(r,.5,r),o.delete(),d.delete(),f.delete()}else{let o=cv.matFromArray(i.width,i.height,cv.CV_32F,i.mat[0]);cv.filter2D(r,r,-1,o),o.delete()}}),cv.convertScaleAbs(r,r,255),cv.imshow(this.outputCanvas.getCanvas(),r),t.delete(),r.delete()}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Ni(e)))(r||e)}}(),e.\u0275cmp=qn({type:e,selectors:[["app-spatial-filtering"]],features:[Gn],decls:99,vars:32,consts:[["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],["title","Brush Size"],["brushSizeSlider",""],[1,"filter-name"],["mat-mini-fab","","color","accent",1,"action-button",3,"click"],["title","Addition factor",3,"max","min","value","step"],["additiveFilterSlider",""],["mat-raised-button","","color","primary",1,"add-button",3,"click"],["title","Multiplication factor",3,"max","min","value","step"],["multiplyFilterSlider",""],["title","Kernel size",3,"max","min","value","step"],["meanFilterSlider",""],["gaussSizeSlider",""],["title","STD X",3,"max","min","value","step"],["gaussSTDSliderX",""],["title","STD Y",3,"max","min","value","step"],["gaussSDTSliderY",""],["ngProjectAs","[drawerRight]",5,["","drawerRight",""]],["mat-raised-button","","color","warn","class","fillWidth",3,"click",4,"ngIf"],[3,"kernel","updateFilters",4,"ngFor","ngForOf"],["ngProjectAs","[centerContent]",5,["","centerContent",""]],["title","Canvas",1,"canvas",3,"width","drawable","BWOption","brushRadius","drawingEnded"],["inputCanvas",""],["title","Filtered canvas",1,"canvas",3,"width","drawable"],["outputCanvas",""],["mat-raised-button","","color","warn",1,"fillWidth",3,"click"],[3,"kernel","updateFilters"]],template:function(t,r){if(1&t){const i=Fi();je(0,"app-tutorial-template-images"),Mt(1," Spatial filtering "),ci(2,0),yn(3,"app-labelled-sliders",1,2)(5,"hr"),je(6,"mat-expansion-panel")(7,"mat-expansion-panel-header")(8,"mat-panel-title")(9,"span",3)(10,"button",4),It("click",function(d){Ur(i);const f=li(15);return r.additiveFilter(f.value),Gr(d.stopPropagation())}),je(11,"mat-icon"),Mt(12," add "),Ke()(),Mt(13," Brightness "),Ke()()(),yn(14,"app-labelled-sliders",5,6),je(16,"button",7),It("click",function(){Ur(i);const d=li(15);return Gr(r.additiveFilter(d.value))}),Mt(17," Add "),Ke()(),je(18,"mat-expansion-panel")(19,"mat-expansion-panel-header")(20,"mat-panel-title")(21,"span",3)(22,"button",4),It("click",function(d){Ur(i);const f=li(27);return r.multiplyFilter(f.value),Gr(d.stopPropagation())}),je(23,"mat-icon"),Mt(24," add "),Ke()(),Mt(25," Contrast "),Ke()()(),yn(26,"app-labelled-sliders",8,9),je(28,"button",7),It("click",function(){Ur(i);const d=li(27);return Gr(r.multiplyFilter(d.value))}),Mt(29," Add "),Ke()(),je(30,"mat-expansion-panel")(31,"mat-expansion-panel-header")(32,"mat-panel-title")(33,"span",3)(34,"button",4),It("click",function(d){Ur(i);const f=li(39);return r.meanFilter(f.value),Gr(d.stopPropagation())}),je(35,"mat-icon"),Mt(36," add "),Ke()(),Mt(37," Mean blur "),Ke()()(),yn(38,"app-labelled-sliders",10,11),je(40,"button",7),It("click",function(){Ur(i);const d=li(39);return Gr(r.meanFilter(d.value))}),Mt(41," Add "),Ke()(),je(42,"mat-expansion-panel")(43,"mat-expansion-panel-header")(44,"mat-panel-title")(45,"span",3)(46,"button",4),It("click",function(d){Ur(i);const f=li(51),g=li(53),_=li(55);return r.gaussianBlur(f.value,g.value,_.value),Gr(d.stopPropagation())}),je(47,"mat-icon"),Mt(48," add "),Ke()(),Mt(49," Gaussian blur "),Ke()()(),yn(50,"app-labelled-sliders",10,12)(52,"app-labelled-sliders",13,14)(54,"app-labelled-sliders",15,16),je(56,"button",7),It("click",function(){Ur(i);const d=li(51),f=li(53),g=li(55);return Gr(r.gaussianBlur(d.value,f.value,g.value))}),Mt(57," Add "),Ke()(),je(58,"mat-expansion-panel")(59,"mat-expansion-panel-header")(60,"mat-panel-title")(61,"span",3)(62,"button",4),It("click",function(d){return r.prewittFilter(),d.stopPropagation()}),je(63,"mat-icon"),Mt(64," add "),Ke()(),Mt(65," Prewitt Filter "),Ke()()(),je(66,"button",7),It("click",function(){return r.prewittFilter()}),Mt(67," Add "),Ke()(),je(68,"mat-expansion-panel")(69,"mat-expansion-panel-header")(70,"mat-panel-title")(71,"span",3)(72,"button",4),It("click",function(d){return r.sobelFilter(),d.stopPropagation()}),je(73,"mat-icon"),Mt(74," add "),Ke()(),Mt(75," Sobel Filter "),Ke()()(),je(76,"button",7),It("click",function(){return r.sobelFilter()}),Mt(77," Add "),Ke()(),je(78,"mat-expansion-panel")(79,"mat-expansion-panel-header")(80,"mat-panel-title")(81,"span",3)(82,"button",4),It("click",function(d){return r.laplacianFilter(),d.stopPropagation()}),je(83,"mat-icon"),Mt(84," add "),Ke()(),Mt(85," Laplacian Filter "),Ke()()(),je(86,"button",7),It("click",function(){return r.laplacianFilter()}),Mt(87," Add "),Ke()(),ui(),ci(88,17),je(89,"h2"),Mt(90,"Active filters"),Ke(),ir(91,Gle,2,0,"button",18),yn(92,"hr"),ir(93,Wle,1,1,"app-kernel-element",19),ui(),ci(94,20),je(95,"app-draw-canvas",21,22),It("drawingEnded",function(){return r.applyFilter()}),Ke(),yn(97,"app-draw-canvas",23,24),ui(),Ke()}if(2&t){const i=li(4);xt(14),_t("max",1)("min",-1)("value",0)("step",.1),xt(12),_t("max",5)("min",0)("value",1)("step",.1),xt(12),_t("max",9)("min",3)("value",3)("step",2),xt(12),_t("max",15)("min",3)("value",9)("step",2),xt(2),_t("max",15)("min",0)("value",2)("step",.5),xt(2),_t("max",15)("min",0)("value",2)("step",.5),xt(37),_t("ngIf",r.listKernels.length),xt(2),_t("ngForOf",r.listKernels),xt(2),_t("width",512)("drawable",!0)("BWOption",!0)("brushRadius",i.value),xt(2),_t("width",512)("drawable",!1)}},dependencies:[mc,xs,IC,PC,sP,Cs,$d,ev,Ule,iu,tv],styles:[".filter-name[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{transform:scale(.5)}.add-button[_ngcontent-%COMP%]{width:100%}mat-expansion-panel[_ngcontent-%COMP%]{width:100%}.canvas[_ngcontent-%COMP%]{width:45%;min-width:256px}"]}),e})(),Zle=(()=>{class e extends Jg{constructor(){super(...arguments),this.width=256}updateFFT(){let t=cv.imread(this.drawCanvas.getCanvas());cv.cvtColor(t,t,cv.COLOR_RGBA2GRAY,0);let r=cv.getOptimalDFTSize(t.rows),i=cv.getOptimalDFTSize(t.cols),o=cv.Scalar.all(0),d=new cv.Mat;cv.copyMakeBorder(t,d,0,r-t.rows,0,i-t.cols,cv.BORDER_CONSTANT,o);let f=new cv.Mat;d.convertTo(f,cv.CV_32F);let g=new cv.MatVector,_=new cv.Mat,w=new cv.Mat.zeros(d.rows,d.cols,cv.CV_32F);g.push_back(f),g.push_back(w),cv.merge(g,_),cv.dft(_,_,cv.DFT_SCALE),cv.split(_,g),cv.magnitude(g.get(0),g.get(1),g.get(0));let S=g.get(0),k=new cv.Mat.ones(S.rows,S.cols,S.type());cv.add(S,k,S),cv.log(S,S);let V=new cv.Rect(0,0,-2&S.cols,-2&S.rows);S=S.roi(V);let ne=S.cols/2,pe=S.rows/2,De=new cv.Mat,Re=new cv.Rect(0,0,ne,pe),Fe=new cv.Rect(ne,0,ne,pe),ke=new cv.Rect(0,pe,ne,pe),Be=new cv.Rect(ne,pe,ne,pe),at=S.roi(Re),ot=S.roi(Fe),St=S.roi(ke),yt=S.roi(Be);at.copyTo(De),yt.copyTo(at),De.copyTo(yt),ot.copyTo(De),St.copyTo(ot),De.copyTo(St),cv.normalize(S,S,0,1,cv.NORM_MINMAX),this.outputCanvas.drawMat(S),t.delete(),d.delete(),g.delete(),_.delete(),k.delete(),De.delete()}updateIFFT(){let t=cv.imread(this.drawCanvas.getCanvas());cv.cvtColor(t,t,cv.COLOR_RGBA2GRAY,0);let r=cv.getOptimalDFTSize(t.rows),i=cv.getOptimalDFTSize(t.cols),o=cv.Scalar.all(0),d=new cv.Mat;cv.copyMakeBorder(t,d,0,r-t.rows,0,i-t.cols,cv.BORDER_CONSTANT,o);let f=new cv.Mat;d.convertTo(f,cv.CV_32F);let g=new cv.MatVector,_=new cv.Mat,w=new cv.Mat.zeros(d.rows,d.cols,cv.CV_32F);g.push_back(f),g.push_back(w),cv.merge(g,_),cv.dft(_,_);let S=cv.imread(this.outputCanvas.getCanvas());cv.cvtColor(S,S,cv.COLOR_RGBA2GRAY,0);let k=new cv.Rect(0,0,-2&S.cols,-2&S.rows);S=S.roi(k);let V=S.cols/2,ne=S.rows/2,pe=new cv.Mat,De=new cv.Rect(0,0,V,ne),Re=new cv.Rect(V,0,V,ne),Fe=new cv.Rect(0,ne,V,ne),ke=new cv.Rect(V,ne,V,ne),Be=S.roi(De),at=S.roi(Re),ot=S.roi(Fe),St=S.roi(ke);Be.copyTo(pe),St.copyTo(Be),pe.copyTo(St),at.copyTo(pe),ot.copyTo(at),pe.copyTo(ot);let yt=new cv.Mat;cv.threshold(S,yt,0,1,cv.THRESH_BINARY),yt.convertTo(yt,cv.CV_32F),cv.split(_,g),console.log(_.type(),yt.type()),cv.multiply(g.get(0),yt,g.get(0)),cv.multiply(g.get(1),yt,g.get(1)),cv.merge(g,_),cv.dft(_,_,cv.DFT_INVERSE),cv.split(_,g),cv.magnitude(g.get(0),g.get(1),g.get(0));let Ht=g.get(0);cv.normalize(Ht,Ht,0,1,cv.NORM_MINMAX),this.drawCanvas.drawMat(Ht)}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Ni(e)))(r||e)}}(),e.\u0275cmp=qn({type:e,selectors:[["app-spectral-filtering"]],features:[Gn],decls:11,vars:8,consts:[["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],["title","Brush Size"],["brushSizeSlider",""],["ngProjectAs","[centerContent]",5,["","centerContent",""]],["title","Canvas",1,"canvas",3,"width","drawable","BWOption","brushRadius","drawingEnded"],["inputCanvas",""],["title","Fourier space",1,"canvas",3,"width","drawColor","drawable","brushRadius","drawingEnded"],["outputCanvas",""]],template:function(t,r){if(1&t&&(je(0,"app-tutorial-template-images"),Mt(1," Spectral filtering "),ci(2,0),yn(3,"app-labelled-sliders",1,2)(5,"hr"),ui(),ci(6,3),je(7,"app-draw-canvas",4,5),It("drawingEnded",function(){return r.updateFFT()}),Ke(),je(9,"app-draw-canvas",6,7),It("drawingEnded",function(){return r.updateIFFT()}),Ke(),ui(),Ke()),2&t){const i=li(4);xt(7),_t("width",r.width)("drawable",!0)("BWOption",!0)("brushRadius",i.value),xt(2),_t("width",r.width)("drawColor","black")("drawable",!0)("brushRadius",i.value)}},dependencies:[ev,iu,tv],styles:[".canvas[_ngcontent-%COMP%]{width:45%;min-width:256px}"]}),e})(),c9=(()=>{class e{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(t){this._vertical=yr(t)}get inset(){return this._inset}set inset(t){this._inset=yr(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=qn({type:e,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(t,r){2&t&&(Pr("aria-orientation",r.vertical?"vertical":"horizontal"),ii("mat-divider-vertical",r.vertical)("mat-divider-horizontal",!r.vertical)("mat-divider-inset",r.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(t,r){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),e})(),u9=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[ri,ri]}),e})();const Yle=["foreground"],Xle=["background"];let $le=(()=>{class e extends Jg{constructor(){super(...arguments),this.viewerSize=256,this.meanBG=0,this.meanFG=0,this.psnr=0,this.localcontrast=0,this.rois=[{name:"Background",color:"#f55d42",initial1:{x:256,y:256},initial2:{x:400,y:400}},{name:"Foreground",color:"#44ad52",initial1:{x:128,y:128},initial2:{x:256,y:256}}],this.pepperSaltNoise=.1,this.gaussianNoise=5}ngOnInit(){}ngAfterViewInit(){super.ngAfterViewInit(),super.loadSelectedFileFromPath("assets/image_presets/phantom.png")}updateCanvasROI(t){var r=this;return qA(function*(){let i=t.data;if(null==i)return;if("Background"==t.name){var o=r.backgroundCanvas.nativeElement.getContext("2d");r.backgroundData=new Array(i.data.length/4);for(let g=0;g<i.data.length;g+=4)r.backgroundData[g/4]=(i.data[g]+i.data[g+1]+i.data[g+2])/3}else{o=r.foregroundCanvas.nativeElement.getContext("2d"),r.foregroundData=new Array(i.data.length/4);for(let _=0;_<i.data.length;_+=4)r.foregroundData[_/4]=(i.data[_]+i.data[_+1]+i.data[_+2])/3}let d={width:r.viewerSize,height:r.viewerSize},f=yield window.createImageBitmap(i,0,0,i.width,i.height,{resizeHeight:d.height,resizeWidth:d.width});requestAnimationFrame(()=>{null!=o&&null!=i&&(o.clearRect(0,0,o.canvas.width,o.canvas.height),o.canvas.width=r.viewerSize,o.canvas.height=r.viewerSize,o.drawImage(f,0,0),r.updateStats())})})()}updateStats(){let t=this.backgroundData,r=this.foregroundData;this.meanBG=Kj(t),this.meanFG=Kj(r);let i=function Hse(e,n){const t=e.length;return null==n&&e.reduce((i,o)=>i+o),Math.sqrt(e.map(r=>Math.pow(r-n,2)).reduce((r,i)=>r+i)/t)}(t,this.meanBG);this.psnr=(this.meanFG-this.meanBG)/i,this.localcontrast=(this.meanFG-this.meanBG)/this.meanBG}addPepperSaltNoise(){let t=this.drawCanvas.getCtx().getImageData(0,0,this.drawCanvas.getCtx().canvas.width,this.drawCanvas.getCtx().canvas.height).data;for(let r=0;r<t.length;r+=4)Math.random()<this.pepperSaltNoise&&(Math.random()<.5?(t[r]=0,t[r+1]=0,t[r+2]=0):(t[r]=255,t[r+1]=255,t[r+2]=255));this.drawCanvas.drawArray(t)}addGaussianNoise(){let t=this.drawCanvas.getCtx().getImageData(0,0,this.drawCanvas.getCtx().canvas.width,this.drawCanvas.getCtx().canvas.height).data;for(let r=0;r<t.length;r+=4){let i=Use(0,this.gaussianNoise);t[r]+=i,t[r+1]+=i,t[r+2]+=i}this.drawCanvas.drawArray(t)}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Ni(e)))(r||e)}}(),e.\u0275cmp=qn({type:e,selectors:[["app-psnr"]],viewQuery:function(t,r){if(1&t&&(Qr(Yle,5),Qr(Xle,5)),2&t){let i;Qn(i=$n())&&(r.foregroundCanvas=i.first),Qn(i=$n())&&(r.backgroundCanvas=i.first)}},features:[Gn],decls:51,vars:23,consts:[["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],["title","Brush Size"],["brushSizeSlider",""],["title","Probability",3,"value","min","max","step","valueChange"],["mat-raised-button","","color","primary",3,"click"],["title","Gaussian Noise",3,"value","min","max","step","valueChange"],["ngProjectAs","[centerContent]",5,["","centerContent",""]],["title","Canvas",1,"w-1/2",3,"width","drawable","roi","brushRadius","BWOption","profileOption","roiChanged"],["inputCanvas",""],["ngProjectAs","[drawerRight]",5,["","drawerRight",""]],[1,"flex","flex-col","gap-2","mx-4"],[1,"w-64","aspect-square","border"],["background",""],[1,"flex","justify-between"],["foreground",""],[1,"flex","flex-col","gap-2"]],template:function(t,r){if(1&t&&(je(0,"app-tutorial-template-images"),Mt(1," Image Quality "),ci(2,0),yn(3,"app-labelled-sliders",1,2)(5,"hr"),je(6,"app-labelled-sliders",3),It("valueChange",function(o){return r.pepperSaltNoise=o})("valueChange",function(o){return r.pepperSaltNoise=o}),Ke(),je(7,"button",4),It("click",function(){return r.addPepperSaltNoise()}),Mt(8,"Add pepper & salt noise"),Ke(),yn(9,"hr"),je(10,"app-labelled-sliders",5),It("valueChange",function(o){return r.gaussianNoise=o})("valueChange",function(o){return r.gaussianNoise=o}),Ke(),je(11,"button",4),It("click",function(){return r.addGaussianNoise()}),Mt(12,"Add Gaussian noise"),Ke(),ui(),ci(13,6),je(14,"app-draw-canvas",7,8),It("roiChanged",function(o){return r.updateCanvasROI(o)}),Ke(),ui(),ci(16,9),je(17,"div",10)(18,"h3"),Mt(19,"Background"),Ke(),yn(20,"canvas",11,12),je(22,"div",13)(23,"p"),Mt(24,"Mean"),Ke(),je(25,"p"),Mt(26),Ke()(),yn(27,"mat-divider"),je(28,"h3"),Mt(29,"Foreground"),Ke(),yn(30,"canvas",11,14),je(32,"div",13)(33,"p"),Mt(34,"Mean"),Ke(),je(35,"p"),Mt(36),Ke()(),yn(37,"mat-divider"),je(38,"h3"),Mt(39,"Statistics"),Ke(),je(40,"div",15)(41,"div",13)(42,"p"),Mt(43,"SNR Differential"),Ke(),je(44,"p"),Mt(45),Ke()(),je(46,"div",13)(47,"p"),Mt(48,"Local contrast"),Ke(),je(49,"p"),Mt(50),Ke()()()(),ui(),Ke()),2&t){const i=li(4);xt(6),_t("value",r.pepperSaltNoise)("min",0)("max",1)("step",.01),xt(4),_t("value",r.gaussianNoise)("min",0)("max",75)("step",.5),xt(4),_t("width",512)("drawable",!1)("roi",r.rois)("drawable",!0)("brushRadius",i.value)("BWOption",!0)("profileOption",!1),xt(6),fa("border-color",r.rois[0].color),xt(6),Lo(r.meanBG.toFixed(3)),xt(4),fa("border-color",r.rois[1].color),xt(6),Lo(r.meanFG.toFixed(3)),xt(9),Lo(r.psnr.toFixed(3)),xt(5),Lo(r.localcontrast.toFixed(3))}},dependencies:[c9,Cs,ev,iu,tv]}),e})();class cP{constructor(){this.ctx=[]}parameters(){return null}getName(){return this.name}description(){return[]}}function qle(e,n,t){for(let r=0;r<e.length();r++)e.grad[r]=Math.min(t,Math.max(n,e.grad[r]));return e}class ds{constructor(n,t=!0){this.require_grad=!0,this.require_grad=t,this.data=new Array(n.reduce((r,i)=>r*i)).fill(0),this.shape=n,this.grad=new Array(n.reduce((r,i)=>r*i)).fill(0)}length(){return this.data.length}at(n){return this.data[n]}clone(){let n=new ds(this.shape);return n.data=this.data.slice(),n.grad=this.grad.slice(),n}matmul(n,t){return function Qle(e,n,t){let r=e.shape[0],i=e.shape[1];if(i!==n.shape[0])throw new Error("Matrix dimensions do not match, got "+i+" and "+n.shape[0]);let o=n.shape[1],d=new ds([r,o]);for(let f=0;f<r;f++)for(let g=0;g<o;g++){for(let _=0;_<i;_++)d.data[f*o+g]+=e.data[f*i+_]*n.data[_*o+g];void 0!==t&&(d.data[f*o+g]+=t.data[g])}return d}(this,n,t)}transpose(){let[n,t]=this.shape,r=new ds([t,n]);for(let i=0;i<n;i++)for(let o=0;o<t;o++)r.data[o*n+i]=this.data[i*t+o],r.grad[o*n+i]=this.grad[i*t+o];return r}T(){return this.transpose()}new_like(){return new ds(this.shape)}argmax(){return function Kle(e){let n=e.shape[0],t=e.shape[1],r=new ds([n,1]);for(let i=0;i<n;i++){let o=-1/0,d=0;for(let f=0;f<t;f++)e.data[i*t+f]>o&&(o=e.data[i*t+f],d=f);r.data[i]=d}return r}(this)}norm(){let n=0;for(let t=0;t<this.data.length;t++)n+=this.data[t]**2;return Math.sqrt(n)}}class ih extends cP{constructor(n,t,r=!0){super(),this.weights=new ds([n,t]);let i=3*Math.sqrt(2/(n+t));this.weights.data=this.weights.data.map(()=>i*(2*Math.random()-1)),this.hasBias=r,this.hasBias&&(this.bias=new ds([t])),this.name="FullyConnected"}forward(n){this.ctx=[];let t=n.matmul(this.weights,this.hasBias?this.bias:void 0);return this.ctx.push(n),t}backward(n){let t=this.ctx[0],r=n.shape[0],i=n.shape[1],o=n.new_like();if(o.data=n.grad,t.require_grad){let d=o.matmul(this.weights.T(),void 0);t.grad=d.data}if(this.weights.grad=o.T().matmul(t,void 0).T().data,this.hasBias)for(let d=0;d<r;d++)for(let f=0;f<i;f++)this.bias.grad[f]+=n.grad[d*i+f];return t}parameters(){return this.hasBias?[this.weights,this.bias]:[this.weights]}description(){return[`Input shape: ${this.weights.shape[0]}`,`Output shape: ${this.weights.shape[1]}`]}getName(){return`Fully connected (${this.weights.shape[0]} \u2192 ${this.weights.shape[1]})`}}class Jy extends cP{constructor(){super(...arguments),this.name="Activation"}forward(n){throw new Error("Method not implemented.")}backward(n){throw new Error("Method not implemented.")}}class uP extends Jy{constructor(){super(...arguments),this.name="RELU"}forward(n){let t=n.new_like();this.ctx=[],this.ctx.push(n);for(let r=0;r<t.data.length;r++)t.data[r]=Math.max(0,n.data[r]);return t}backward(n){let t=this.ctx[0];for(let r=0;r<t.data.length;r++)t.grad[r]=t.data[r]>0?n.grad[r]:0;return t}}class d9 extends Jy{constructor(){super(...arguments),this.name="Sigmoid"}forward(n){let t=n.new_like();this.ctx=[],this.ctx.push(n),this.ctx.push(t);for(let r=0;r<t.data.length;r++)t.data[r]=1/(1+Math.exp(-n.data[r]));return t}backward(n){let t=this.ctx[0],r=this.ctx[1];for(let i=0;i<r.data.length;i++)t.grad[i]=n.grad[i]*r.data[i]*(1-r.data[i]);return t}}class h9 extends Jy{constructor(){super(...arguments),this.name="TanH"}forward(n){let t=n.new_like();this.ctx=[];for(let r=0;r<t.data.length;r++)t.data[r]=Math.tanh(n.data[r]);return this.ctx.push(n),this.ctx.push(t),t}backward(n){let t=this.ctx[0],r=this.ctx[1];for(let i=0;i<t.data.length;i++)t.grad[i]=n.grad[i]*(1-r.data[i]*r.data[i]);return t}}class f9 extends Jy{constructor(){super(...arguments),this.name="Identity"}forward(n){return n}backward(n){return n}}class Jle extends Jy{constructor(){super(...arguments),this.name="Softmax"}forward(n){let t=n.new_like(),r=n.shape[0],i=n.shape[1];this.ctx=[],this.ctx.push(n);let o=new ds([r]);for(let d=0;d<r;d++){let f=0;for(let g=0;g<i;g++)t.data[d*i+g]=Math.exp(n.data[d*i+g]),f+=t.data[d*i+g];for(let g=0;g<i;g++)t.data[d*i+g]/=f;o.data[d]=f}return this.ctx.push(o),t}backward(n){let t=this.ctx[0],r=this.ctx[1],i=t.shape[0],o=t.shape[1],d=new ds(t.shape);for(let f=0;f<i;f++)for(let g=0;g<o;g++)d.data[f*o+g]=n.data[f*o+g]*(r.data[f]-Math.exp(t.data[f*o+g]))/(r.data[f]*r.data[f]);return t.grad=d.data,t}}class p9{constructor(n=!1){this.is_regression=n,this.layers=[]}addLayer(n){this.layers.push(n)}addLayerAtPosition(n,t){this.layers.splice(t,0,n)}removeLayerAtPosition(n){this.layers.splice(n,1)}forward(n){let t=n;for(let r=0;r<this.layers.length;r++)t=this.layers[r].forward(t);if(t instanceof Array&&(t=t[0]),null===t)throw new Error("Activations cannot be null");return t}inference(n){let t=this.forward(n);if(this.is_regression)return t;{let r=t.shape[0],i=t.shape[1],o=new ds([r]);for(let d=0;d<r;d++)o.data[d]=t.data[d*i+1];return o}}backward(n){for(let t=this.layers.length-1;t>=0;t--)n=this.layers[t].backward(n)}parameters(){let n=new Array;for(let t=0;t<this.layers.length;t++){let r=this.layers[t].parameters();r&&(n=n.concat(r))}return n}zero_grad(){for(let n=0;n<this.layers.length;n++){let t=this.layers[n].parameters();if(t)for(let r=0;r<t.length;r++)t[r].grad.fill(0)}}changeActivation(n){for(let t=0;t<this.layers.length;t++)if(this.layers[t]instanceof Jy){let r;r="sigmoid"===n?new d9:"tanh"===n?new h9:"identity"===n?new f9:new uP,this.layers[t]=r}}n_fc_layers(){let n=0;for(let t=0;t<this.layers.length;t++)this.layers[t]instanceof ih&&n++;return n}n_hidden_fc_layers(){return this.n_fc_layers()-2}swap_fc_layers(n,t){let r=0;for(let i=0;i<this.layers.length;i++){let o=this.layers[i];if(o instanceof ih){if(r===n){let d=Math.min(o.weights.shape[0],t.weights.shape[0]),f=Math.min(o.weights.shape[1],t.weights.shape[1]);for(let g=0;g<d;g++)for(let _=0;_<f;_++)t.weights.data[g*t.weights.shape[1]+_]=o.weights.data[g*o.weights.shape[1]+_],t.bias.data[g]=o.bias.data[g];return void(this.layers[i]=t)}r++}}}getParamsNorms(n){let t=this.layers[n].parameters();if(!t)return;let r=new Array(t.length);for(let i=0;i<t.length;i++)r[i]=t[i].norm();return r}trainableLayers(){let n=[];for(let t=0;t<this.layers.length;t++)this.layers[t].parameters()&&n.push(this.layers[t]);return n}}class RC{constructor(n,t,r){this.x=n,this.y=t,this.label=r}}class g9{constructor(){this.data=[],this.class1Color="#313695",this.class2Color="#a50026"}get(n){return this.data[n]}length(){return this.data.length}shuffle(){this.data=this.data.sort(()=>Math.random()-.5)}getBatch(n,t){let r=[];for(let d=0;d<t;d++)n*t+d>=this.data.length&&(n=0),r.push(this.data[n*t+d]);let i=new ds([t,2],!1);i.data=r.map(d=>[d.x,d.y]).flat();let o=new ds([t,1],!1);return o.data=r.map(d=>d.label),[i,o]}getCSSForPoint(n){return{left:(this.data[n].x+1)/2*100+"%",top:(this.data[n].y+1)/2*100+"%","background-color":this.data[n].label?this.class1Color:this.class2Color}}createLinearlySeparable(n){let t=[];for(let r=0;r<n;r++){let i=2*Math.random()-1,o=2*Math.random()-1;t.push(new RC(i,o,i>o?1:0))}this.data=t}createSpiralPoints(n,t=1){let r=[];for(let i=0;i<n/2;i++){let o=i/(n/2),d=t*i/n*4*Math.PI,f=t*i/n*4*Math.PI+Math.PI,g=o*Math.sin(d)+.25*Math.random(),_=o*Math.cos(d)+.25*Math.random();g=Math.max(Math.min(1,g),-1),_=Math.max(Math.min(1,_),-1);let w=1;r.push(new RC(g,_,w)),g=o*Math.sin(f)+.25*Math.random(),_=o*Math.cos(f)+.25*Math.random(),g=Math.max(Math.min(1,g),-1),_=Math.max(Math.min(1,_),-1),w=0,r.push(new RC(g,_,w))}this.data=r}createCircularPoints(n){let t=[];for(let r=0;r<n;r++){let i=2*Math.random()-1,o=2*Math.random()-1,d=Math.sqrt(i*i+o*o)<.5?1:0;t.push(new RC(i,o,d))}this.data=t}}class GV{}class LC extends GV{constructor(n,t,r=0,i=0,o=!1){super(),this.model=n,this.lr=t,this.weight_decay=r,this.momentum=i,this.nesterov=o}reset_momentums(){if(0!=this.momentum){this.momentums=[];let n=this.model.parameters();for(let t=0;t<n.length;t++)this.momentums.push(new Array(n[t].length()).fill(0))}}step(){let n=this.model.parameters();for(let t=0;t<n.length;t++){let r=n[t];if(r=qle(r,-10,10),0!=this.weight_decay)for(let i=0;i<r.length();i++)r.grad[i]+=this.weight_decay*r.data[i];if(this.momentums)if(this.momentums[t]=r.grad,this.nesterov)for(let i=0;i<r.length();i++)r.grad[i]+=this.momentum*this.momentums[t][i];else r.grad=this.momentums[t];for(let i=0;i<r.length();i++)r.data[i]-=this.lr*r.grad[i]}}zero_grad(){this.model.zero_grad()}}class v9 extends GV{constructor(n,t,r=0,i=.9,o=.999,d=1e-8){super(),this.model=n,this.lr=t,this.weight_decay=r,this.beta1=i,this.beta2=o,this.epsilon=d}reset_momentums(){if(0!=this.momentum){this.momentums=[],this.velocities=[];let n=this.model.parameters();for(let t=0;t<n.length;t++)this.momentums.push(new Array(n[t].length()).fill(0)),this.velocities.push(new Array(n[t].length()).fill(0))}}step(){let n=this.model.parameters();for(let t=0;t<n.length;t++){let r=n[t];if(0!=this.weight_decay)for(let i=0;i<r.length();i++)r.grad[i]+=this.weight_decay*r.data[i];if(this.momentums&&this.velocities){this.momentums[t]=this.momentums[t].map((d,f)=>this.beta1*d+(1-this.beta1)*r.grad[f]),this.velocities[t]=this.velocities[t].map((d,f)=>this.beta2*d+(1-this.beta2)*r.grad[f]*r.grad[f]);let i=this.momentums[t].map(d=>d/(1-Math.pow(this.beta1,1))),o=this.velocities[t].map(d=>d/(1-Math.pow(this.beta2,1)));for(let d=0;d<r.length();d++)r.data[d]-=this.lr*i[d]/(Math.sqrt(o[d])+this.epsilon)}}}zero_grad(){this.model.zero_grad()}}class m9 extends GV{constructor(n,t,r,i=.9,o=1e-8){super(),this.model=n,this.lr=t,this.weight_decay=r,this.rho=i,this.epsilon=o}reset_momentums(){this.squared_gradients=[];let n=this.model.parameters();for(let t=0;t<n.length;t++)this.squared_gradients.push(new Array(n[t].length()).fill(0))}step(){let n=this.model.parameters();for(let t=0;t<n.length;t++){let r=n[t];if(0!=this.weight_decay)for(let i=0;i<r.length();i++)r.grad[i]+=this.weight_decay*r.data[i];this.squared_gradients[t]=this.squared_gradients[t].map((i,o)=>(i=this.rho*i+(1-this.rho)*r.grad[o]*r.grad[o],r.data[o]-=this.lr*r.grad[o]/(Math.sqrt(i)+this.epsilon),i))}}zero_grad(){this.model.zero_grad()}}class _9{constructor(n,t,r){this.currentEpoch=0,this.losses=[],this.model=n,this.loss=t,this.optimizer=r}setDataset(n){this.dataset=n}train(n){if(!this.dataset)return;let t=0,r=0;this.trainTimeout=setInterval(()=>{if(t<this.dataset.length()/n){let i=this.dataset.getBatch(t,n);r+=this.train_step(i).data[0],t++}else this.currentEpoch++,this.losses.push(r/t),r=0,t=0},0)}train_step(n){this.optimizer.zero_grad();let r=n[1],i=this.model.forward(n[0]),o=this.loss.forward([i,r]),d=this.loss.backward();return this.model.backward(d),this.optimizer.step(),o}stopTraining(){this.trainTimeout&&clearInterval(this.trainTimeout)}changeOptimizer(n,t,r){this.optimizer="adam"===n?new v9(this.model,t,r):"sgd"===n?new LC(this.model,t,r):new m9(this.model,t,r),this.optimizer.reset_momentums()}correctlyPredicted(){let n=0,t=this.dataset.getBatch(0,this.dataset.length()),r=t[0],i=t[1],o=this.model.forward(r).argmax(),d=r.shape[0];for(let f=0;f<d;f++)o.at(f)==i.at(f)&&n++;return n}}class y9 extends cP{constructor(n=!0){super(),this.is_logits=n}forward(n){let t=n[0],r=n[1],i=t.shape[0],o=t.shape[1];this.ctx=n;let d=new ds([1]);this.is_logits&&(t=(new Jle).forward(t)),d.data=[0];for(let f=0;f<i;f++)for(let g=0;g<o;g++)d.data[0]+=Number(r.at(f)==g)*Math.log(t.at(f*o+g)+1e-10);return d.data[0]/=-Math.max(i,1),d}backward(){let n=this.ctx[0],t=this.ctx[1],r=n.shape[0],i=n.shape[1];for(let o=0;o<r;o++){let d=t.at(o);for(let f=0;f<i;f++)n.grad[o*i+f]=f===d?(n.at(o*i+f)-1)/r:n.at(o*i+f)/r}return n}}const WV=[[.61960784,.00392157,.25882353,1],[.63652441,.02268358,.26282199,1],[.66189927,.05082661,.26881968,1],[.67881584,.06958862,.27281815,1],[.7041907,.09773164,.27881584,1],[.72110727,.11649366,.2828143,1],[.74648212,.14463668,.288812,1],[.77185698,.1727797,.29480969,1],[.78877355,.19154171,.29880815,1],[.8141484,.21968474,.30480584,1],[.83106498,.23844675,.30880431,1],[.84721261,.26120723,.30519031,1],[.8615148,.2828912,.29965398,1],[.8710496,.29734717,.29596309,1],[.88535179,.31903114,.29042676,1],[.89488658,.33348712,.28673587,1],[.90918877,.35517109,.28119954,1],[.91872357,.36962707,.27750865,1],[.93302576,.39131103,.27197232,1],[.94732795,.412995,.26643599,1],[.95686275,.42745098,.2627451,1],[.96101499,.45743945,.27658593,1],[.96378316,.47743176,.28581315,1],[.96793541,.50742022,.29965398,1],[.97208766,.53740869,.31349481,1],[.97485582,.557401,.32272203,1],[.97900807,.58738947,.33656286,1],[.98177624,.60738178,.34579008,1],[.98592849,.63737024,.35963091,1],[.98869666,.65736255,.36885813,1],[.99223376,.68619762,.38362168,1],[.99269512,.70926567,.40299885,1],[.99300269,.72464437,.41591696,1],[.99346405,.74771242,.43529412,1],[.99377163,.76309112,.44821223,1],[.99423299,.78615917,.46758939,1],[.99469435,.80922722,.48696655,1],[.99500192,.82460592,.49988466,1],[.99546328,.84767397,.51926182,1],[.99577086,.86305267,.53217993,1],[.99623222,.88319877,.55309496,1],[.99669358,.89750096,.57708574,1],[.99700115,.90703576,.59307958,1],[.99746251,.92133795,.61707036,1],[.99777009,.93087274,.63306421,1],[.99823145,.94517493,.65705498,1],[.99853902,.95470973,.67304883,1],[.99900038,.96901192,.6970396,1],[.99946175,.98331411,.72103037,1],[.99976932,.9928489,.73702422,1],[.99423299,.99769319,.74002307,1],[.98654364,.99461745,.72802768,1],[.97500961,.99000384,.7100346,1],[.96347559,.98539023,.69204152,1],[.95578624,.98231449,.68004614,1],[.94425221,.97770088,.66205306,1],[.93656286,.97462514,.65005767,1],[.92502884,.97001153,.63206459,1],[.91733948,.96693579,.6200692,1],[.90580546,.96232218,.60207612,1],[.88381392,.95340254,.59976932,1],[.86566705,.94602076,.60346021,1],[.83844675,.9349481,.60899654,1],[.82029988,.92756632,.61268743,1],[.79307958,.91649366,.61822376,1],[.76585928,.90542099,.62376009,1],[.74771242,.89803922,.62745098,1],[.72049212,.88696655,.63298731,1],[.70234525,.87958478,.6366782,1],[.67512495,.86851211,.64221453,1],[.64405998,.85628604,.64352172,1],[.62283737,.84798155,.6438293,1],[.59100346,.8355248,.64429066,1],[.56978085,.8272203,.64459823,1],[.53794694,.81476355,.64505959,1],[.51672434,.80645905,.64536717,1],[.48489043,.79400231,.64582853,1],[.45305652,.78154556,.64628989,1],[.43183391,.77324106,.64659746,1],[.4,.76078431,.64705882,1],[.38400615,.74294502,.6544406,1],[.36001538,.71618608,.66551326,1],[.33602461,.68942714,.67658593,1],[.32003076,.67158785,.6839677,1],[.29603998,.64482891,.69504037,1],[.28004614,.62698962,.70242215,1],[.25605536,.60023068,.71349481,1],[.24006151,.58239139,.72087659,1],[.21607074,.55563245,.73194925,1],[.19946175,.5289504,.73910035,1],[.212995,.51141869,.73079585,1],[.23329489,.48512111,.7183391,1],[.24682814,.46758939,.7100346,1],[.26712803,.44129181,.69757785,1],[.28742791,.41499423,.68512111,1],[.30096117,.39746251,.67681661,1],[.32126105,.37116494,.66435986,1],[.33479431,.35363322,.65605536,1],[.35509419,.32733564,.64359862,1],[.36862745,.30980392,.63529412,1]],ece=["heatmapCanvas"],tce=["legendHeatmap"];function nce(e,n){if(1&e){const t=Fi();je(0,"div",41,42),It("chartInit",function(i){return Ur(t),Gr(Wn(3).paramsNormsEcharts.push(i))}),Ke()}if(2&e){const t=Wn(2).index,r=Wn();_t("options",r.allParamsNorms[r.getClosestLayer(t)])}}function rce(e,n){if(1&e&&(ci(0),ir(1,nce,2,1,"div",40),ui()),2&e){const t=Wn(2);xt(1),_t("ngIf",t.allParamsNorms)}}function ice(e,n){if(1&e&&(je(0,"mat-expansion-panel",39)(1,"mat-expansion-panel-header")(2,"mat-panel-title"),Mt(3),Ke()(),je(4,"div",6),ir(5,rce,2,1,"ng-container",36),Ke()()),2&e){const t=n.$implicit;_t("hideToggle",0==t.description().length)("disabled",0===t.description().length),xt(3),ro(" ",t.getName()," "),xt(2),_t("ngIf",t.description().length>0)}}function ace(e,n){if(1&e){const t=Fi();ci(0),je(1,"div",43),It("click",function(i){const d=Ur(t).index;return Gr(Wn().removePoint(i,d))}),Ke(),ui()}if(2&e){const t=n.index,r=Wn();xt(1),_t("ngStyle",r.dataset.getCSSForPoint(t))}}function oce(e,n){if(1&e&&(je(0,"span"),Mt(1),Ke()),2&e){const t=Wn();xt(1),eg(" ",t.correctlyClassified," / ",t.getDatasetLength()," points accurately classified (",(100*t.correctlyClassified/t.getDatasetLength()).toFixed(1),"%)")}}let sce=(()=>{class e extends sB{constructor(t){super(),this.cdr=t,this.paramsNormsEcharts=[],this.dataset=new g9,this.gridResolution=15,this.correctlyClassified=0,this.n_points=150,this.n_layers=2,this.n_neurons=32,this.datasetType="linear",this.optimizerType="sgd",this.currentActivation="relu",this.isTraining=!1,this.batch_size=Math.trunc(this.n_points/2),this.lr=.1,this.weight_decay=.001}ngOnInit(){this.buildModel();let t=new LC(this.model,this.lr,1e-5,.1,!0);this.trainer=new _9(this.model,new y9,t)}buildModel(t=!0){let r=new p9(!1);r.addLayer(new ih(2,this.n_neurons)),r.addLayer(new uP);for(let i=0;i<this.n_layers;i++)r.addLayer(new ih(this.n_neurons,this.n_neurons)),r.addLayer(new uP);if(r.addLayer(new ih(this.n_neurons,2,!0)),this.model=r,this.model.changeActivation(this.currentActivation),t){this.allParamsNorms=[];for(let i=0;i<this.n_layers+2;i++)this.allParamsNorms.push({legend:{show:!0,backgroundColor:"rgba(255, 255, 255, 0.5)"},tooltip:{},xAxis:{type:"value",name:"Epochs",min:0},yAxis:{type:"value",name:"Norm"},series:[{data:[],type:"line"}]})}}ngAfterViewInit(){this.ctx=this.heatmapCanvas.nativeElement.getContext("2d"),this.buildHeatmapLegend(),this.resetDataset(),this.updateParamsNormsView(),setInterval(()=>{this.isTraining&&this.updateChart()},75),setInterval(()=>{this.isTraining&&this.updateParamsNormsView()},1e3)}getClosestLayer(t){return Math.floor(t/2)}buildHeatmapLegend(){let t=this.legendHeatmap.nativeElement.getContext("2d");for(let i=0;i<this.gridResolution;i++)t.fillStyle=this.colormap(i/this.gridResolution),t.fillRect(i,0,1,1)}updateParamsNormsView(){if(!this.allParamsNorms)return;let t=this.model.trainableLayers(),r=this.trainer.currentEpoch;t.forEach((i,o)=>{let d=i.parameters();if(!d)return;let f=this.allParamsNorms[o];f&&(d.forEach((_,w)=>{let S=_.norm();if(f.series){if(Array.isArray(f.series))if(f.series.length<=w)f.series.push({data:[[r,S]],type:"line",name:0==w?"Weights":"Bias"});else{let k=f.series[w].data;f.series[w].name=0==w?"Weights":"Bias",k.push([r,S])}}else f.series=[{data:[[r,S]],type:"line",name:0==w?"Weights":"Bias"}]}),f.xAxis.max=r+10,this.allParamsNorms[o]=f,this.paramsNormsEcharts[o]&&this.paramsNormsEcharts[o].setOption(f))}),this.cdr.detectChanges()}changeNumberLayer(){if(!this.model)return;this.isTraining&&this.trainer.stopTraining();let t=this.model.n_fc_layers()-2;if(this.model.n_fc_layers()!=this.n_layers){if(this.n_layers>t)for(let r=0;r<this.n_layers-t;r++)this.allParamsNorms.push({legend:{show:!0,backgroundColor:"rgba(255, 255, 255, 0.5)"},tooltip:{},xAxis:{type:"value",name:"Epochs",min:0,max:this.trainer.currentEpoch+10},yAxis:{type:"value",name:"Norm"},series:[{data:[[0,0]],type:"line"}]}),this.model.addLayerAtPosition(new ih(this.n_neurons,this.n_neurons),-1),this.model.addLayerAtPosition("relu"==this.currentActivation?new uP:"sigmoid"==this.currentActivation?new d9:"tanh"==this.currentActivation?new h9:new f9,-1);else{let r=this.model.n_hidden_fc_layers();for(;r>this.n_layers;)this.allParamsNorms.pop(),this.paramsNormsEcharts.splice(-1,1),this.model.removeLayerAtPosition(-2),this.model.removeLayerAtPosition(-2),r--}this.trainer.optimizer.reset_momentums(),this.isTraining&&this.trainer.train(this.batch_size),this.cdr.detectChanges()}}changeNumberNeurons(){if(!this.n_neurons||!this.model)return;this.pauseTraining(),this.model.layers[0]=new ih(2,this.n_neurons);let t=this.model.n_fc_layers()-2;for(let r=0;r<t;r++)this.model.swap_fc_layers(r+1,new ih(this.n_neurons,this.n_neurons));this.model.swap_fc_layers(this.n_layers+1,new ih(this.n_neurons,2,!0)),this.trainer.optimizer.reset_momentums(),this.isTraining&&this.trainer.train(this.batch_size),this.cdr.detectChanges()}resetEchartsNorms(){this.allParamsNorms=[];for(let t=0;t<this.n_layers+2;t++)this.allParamsNorms.push({legend:{show:!0,backgroundColor:"rgba(255, 255, 255, 0.5)"},tooltip:{},xAxis:{type:"value",name:"Epochs",min:0},yAxis:{type:"value",name:"Norm"},series:[{data:[],type:"line"}]}),this.paramsNormsEcharts[t]&&this.paramsNormsEcharts[t].setOption(this.allParamsNorms[t])}changeLearningRate(){this.trainer.optimizer.lr=this.lr}changeWeightDecay(){this.trainer.optimizer.weight_decay=this.weight_decay}changeOptimizer(){this.pauseTraining(),this.trainer.changeOptimizer(this.optimizerType,this.lr,this.weight_decay),this.isTraining&&this.restartTraining()}pauseTraining(){this.trainer.stopTraining()}restartTraining(){this.trainer.train(this.batch_size),this.isTraining=!0}changeActivation(){!this.currentActivation||!this.model||(this.pauseTraining(),this.model.changeActivation(this.currentActivation),this.trainer.optimizer.reset_momentums(),this.isTraining&&this.trainer.train(this.batch_size),this.cdr.detectChanges())}addPoint(t){let r=this.isTraining;this.isTraining=!1,this.trainer.stopTraining();let i=this.heatmapCanvas.nativeElement.getBoundingClientRect();this.dataset.data.push(new RC(2*(t.clientX-i.left)/i.width-1,2*(t.clientY-i.top)/i.height-1,t.shiftKey?1:0)),this.n_points++,this.updateChart(!1),this.isTraining&&this.trainer.train(this.batch_size),this.isTraining=r,this.cdr.detectChanges()}removePoint(t,r){if(!t.ctrlKey)return;let i=this.isTraining;this.isTraining=!1,this.trainer.stopTraining(),-1!=r&&(this.dataset.data.splice(r,1),this.n_points--,this.updateChart(!1),this.isTraining&&this.trainer.train(this.batch_size),this.isTraining=i,this.cdr.detectChanges())}resetModel(){this.paramsNormsEcharts=[],this.buildModel(!0),this.resetEchartsNorms();let t=new LC(this.model,this.lr,1e-5,.1,!0);this.trainer=new _9(this.model,new y9,t),this.trainer.setDataset(this.dataset),this.updateChart()}evalMap(){this.pauseTraining();let t=[],r=new ds([this.gridResolution*this.gridResolution,2],!1);for(let f=0;f<this.gridResolution;f++)for(let g=0;g<this.gridResolution;g++)t.push([f/this.gridResolution*2-1,g/this.gridResolution*2-1]);r.data=t.flat();let i=[],o=this.model.inference(r),d=o.shape[0];for(let f=0;f<d;f++)i.push({x:t[f][0],y:t[f][1],label:o.data[f]});return this.isTraining&&this.restartTraining(),i}updateBatchSize(){this.batch_size&&this.isTraining&&(this.trainer.stopTraining(),setTimeout(()=>{this.restartTraining()},0))}resetDataset(){if(void 0===this.n_points||void 0===this.batch_size)return;this.batch_size=Math.min(this.n_points,this.batch_size);let t=new g9;"circular"==this.datasetType?t.createCircularPoints(this.n_points):"linear"==this.datasetType?t.createLinearlySeparable(this.n_points):"spiral"==this.datasetType&&t.createSpiralPoints(this.n_points),this.trainer&&(this.trainer.stopTraining(),this.trainer.setDataset(t),this.dataset=t,this.isTraining&&this.trainer.train(this.batch_size)),this.model&&this.updateChart(),this.cdr.detectChanges()}switchTraining(){this.isTraining?(this.isTraining=!1,this.trainer.stopTraining()):(this.isTraining=!0,this.trainer.train(this.batch_size))}colormap(t){isNaN(t)&&(t=0);let r=WV.length,i=Math.floor(t*r);i=Math.min(r-1,i),i=Math.max(0,i);let o=WV[i];return`rgb(${255*o[0]}, ${255*o[1]}, ${255*o[2]})`}getDatasetLength(){return this.dataset?this.dataset.data.length:0}updateChart(t=!0){t&&(this.heatmap=this.evalMap(),this.correctlyClassified=this.trainer.correctlyPredicted());for(let r=0;r<this.gridResolution;r++)for(let i=0;i<this.gridResolution;i++)this.ctx.fillStyle=this.colormap(this.heatmap[i*this.gridResolution+r].label),this.ctx.fillRect(i,r,1,1);this.lossOptions={xAxis:{type:"value",name:"Epochs",min:0,max:this.trainer.losses.length+10},yAxis:{type:"value",name:"Loss"},series:[{data:this.trainer.losses.map((r,i)=>[i,r]),type:"line"}]},this.cdr.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(qe(Pi))},e.\u0275cmp=qn({type:e,selectors:[["app-gradient-descent"]],viewQuery:function(t,r){if(1&t&&(Qr(ece,5),Qr(tce,5)),2&t){let i;Qn(i=$n())&&(r.heatmapCanvas=i.first),Qn(i=$n())&&(r.legendHeatmap=i.first)}},features:[Gn],decls:96,vars:40,consts:[[3,"rightDrawer"],["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],[1,"flex","flex-col","gap-2"],["mat-raised-button","","color","primary",1,"w-full",3,"click"],["multi",""],["expanded",""],[1,"flex","flex-col","gap-1"],[1,"w-full","justify-stretch",3,"ngModel","ngModelChange","change"],["value","circular",1,"flex-1"],["value","linear",1,"flex-1"],["value","spiral",1,"flex-1"],[3,"min","max","step","title","value","valueChange"],[3,"min","max","title","value","valueChange"],[3,"ngModel","ngModelChange","change"],["value","tanh"],["value","relu"],["value","sigmoid"],["value","identity"],[1,"mb-2",3,"ngModel","ngModelChange","change"],["value","sgd",1,"flex-1"],["value","adam",1,"flex-1"],["value","RMSPROP",1,"flex-1"],["ngProjectAs","[centerContent]",5,["","centerContent",""]],[1,"flex","gap-2","items-center"],[1,"w-1/2","m-4"],[3,"hideToggle","disabled",4,"ngFor","ngForOf"],[1,"flex","flex-col","items-center","gap-4"],[1,"italic"],[1,"relative","canvasContainer","w-full"],[4,"ngFor","ngForOf"],[1,"w-full","aspect-square","absolute",3,"width","height","click"],["heatmapCanvas",""],[1,"font-semibold"],[1,"w-full","flex","flex-row","gap-1","items-center"],[1,"w-full","h-[32px]",3,"width","height"],["legendHeatmap",""],[4,"ngIf"],["ngProjectAs","[drawerRight]",5,["","drawerRight",""]],["echarts","",1,"w-80","aspect-square",3,"options"],[3,"hideToggle","disabled"],["echarts","",3,"options","chartInit",4,"ngIf"],["echarts","",3,"options","chartInit"],["paramsNorms",""],[1,"absolute","datapoint",3,"ngStyle","click"]],template:function(t,r){1&t&&(je(0,"app-tutorial-template",0),ci(1,1),je(2,"div",2)(3,"button",3),It("click",function(){return r.switchTraining()}),Mt(4),Ke(),je(5,"button",3),It("click",function(){return r.resetModel()}),Mt(6," Reset model "),Ke(),je(7,"mat-accordion",4)(8,"mat-expansion-panel",5)(9,"mat-expansion-panel-header")(10,"mat-panel-title"),Mt(11," Data "),Ke()(),je(12,"div",6)(13,"span"),Mt(14,"Distribution"),Ke(),je(15,"mat-button-toggle-group",7),It("ngModelChange",function(o){return r.datasetType=o})("change",function(){return r.resetDataset()}),je(16,"mat-button-toggle",8),Mt(17," Circular "),Ke(),je(18,"mat-button-toggle",9),Mt(19," Linear "),Ke(),je(20,"mat-button-toggle",10),Mt(21," Spiral "),Ke()(),je(22,"app-labelled-sliders",11),It("valueChange",function(o){return r.n_points=o})("valueChange",function(){return r.resetDataset()}),Ke(),je(23,"app-labelled-sliders",12),It("valueChange",function(o){return r.batch_size=o})("valueChange",function(){return r.updateBatchSize()}),Ke()()(),je(24,"mat-expansion-panel",5)(25,"mat-expansion-panel-header")(26,"mat-panel-title"),Mt(27," Network "),Ke()(),je(28,"div",6)(29,"app-labelled-sliders",12),It("valueChange",function(o){return r.n_layers=o})("valueChange",function(){return r.changeNumberLayer()}),Ke(),je(30,"app-labelled-sliders",12),It("valueChange",function(o){return r.n_neurons=o})("valueChange",function(){return r.changeNumberNeurons()}),Ke(),je(31,"div",6)(32,"span"),Mt(33,"Activation function"),Ke(),je(34,"mat-button-toggle-group",13),It("ngModelChange",function(o){return r.currentActivation=o})("change",function(){return r.changeActivation()}),je(35,"mat-button-toggle",14),Mt(36," TanH "),Ke(),je(37,"mat-button-toggle",15),Mt(38," RELU "),Ke(),je(39,"mat-button-toggle",16),Mt(40," Sigmoid "),Ke(),je(41,"mat-button-toggle",17),Mt(42," Identity "),Ke()()()()(),je(43,"mat-expansion-panel",5)(44,"mat-expansion-panel-header")(45,"mat-panel-title"),Mt(46," Training "),Ke()(),je(47,"div",6)(48,"app-labelled-sliders",11),It("valueChange",function(o){return r.lr=o})("valueChange",function(){return r.changeLearningRate()}),Ke(),je(49,"app-labelled-sliders",11),It("valueChange",function(o){return r.weight_decay=o})("valueChange",function(){return r.changeWeightDecay()}),Ke(),je(50,"span"),Mt(51,"Optimizer"),Ke(),je(52,"mat-button-toggle-group",18),It("ngModelChange",function(o){return r.optimizerType=o})("change",function(){return r.changeOptimizer()}),je(53,"mat-button-toggle",19),Mt(54," SGD "),Ke(),je(55,"mat-button-toggle",20),Mt(56," Adam "),Ke(),je(57,"mat-button-toggle",21),Mt(58," RMSPROP "),Ke()(),je(59,"button",3),It("click",function(){return r.trainer.optimizer.reset_momentums()}),Mt(60," Reset momentums "),Ke()()()()(),ui(),ci(61,22),je(62,"div",23)(63,"div",24)(64,"h2"),Mt(65,"Context"),Ke(),je(66,"p"),Mt(67," In this setup, each datapoint lies in a 2D space. The color of the datapoint represents the class it belongs to. The goal of the neural network is to learn the decision boundary that separates the two classes in the 2D space. "),Ke(),je(68,"p"),Mt(69," The neural network receives the 2D coordinates of the datapoint as input and outputs the probability of the datapoint belonging to the blue class. The datapoints are randomly generated following different distributions: circular, linear or spiral. "),Ke(),je(70,"p"),Mt(71," The neural network is trained using the gradient descent algorithm. The loss function is the binary cross entropy loss. The network is trained using the backpropagation algorithm. "),Ke(),je(72,"h2"),Mt(73,"Model"),Ke(),je(74,"p"),Mt(75," You can visualize the weight's norms of the network's layers evolving over time. "),Ke(),je(76,"mat-accordion"),ir(77,ice,6,4,"mat-expansion-panel",25),Ke()(),je(78,"div",26)(79,"span",27),Mt(80," Left click: Add a red point, Shift+Left Click: Add a blue point, Ctrl+Click: remove a point."),Ke(),je(81,"div",28),ir(82,ace,2,1,"ng-container",29),je(83,"canvas",30,31),It("click",function(o){return r.addPoint(o)}),Mt(85," Your browser does not support the HTML5 canvas tag. "),Ke()(),je(86,"span",32),Mt(87,"Probability of belonging to the blue class"),Ke(),je(88,"div",33),Mt(89," p=0 "),yn(90,"canvas",34,35),Mt(92," p=1.0 "),Ke(),ir(93,oce,2,3,"span",36),Ke()(),ui(),ci(94,37),yn(95,"div",38),ui(),Ke()),2&t&&(_t("rightDrawer",!0),xt(4),ro(" ",r.isTraining?"Pause training":"Start training"," "),xt(11),_t("ngModel",r.datasetType),xt(7),_t("min",2)("max",256)("step",1)("title","Number of points")("value",r.n_points),xt(1),_t("min",1)("max",r.n_points)("title","Batch size")("value",r.batch_size),xt(6),_t("min",0)("max",6)("title","Number of hidden layers")("value",r.n_layers),xt(1),_t("min",4)("max",64)("title","Number of neurons per layer")("value",r.n_neurons),xt(4),_t("ngModel",r.currentActivation),xt(14),_t("min",1e-4)("max",.5)("step",.001)("title","Learning rate")("value",r.lr),xt(1),_t("min",0)("max",.1)("step",1e-5)("title","Weight decay")("value",r.weight_decay),xt(3),_t("ngModel",r.optimizerType),xt(25),_t("ngForOf",r.model.layers),xt(5),_t("ngForOf",r.dataset.data),xt(1),_t("width",r.gridResolution)("height",r.gridResolution),xt(7),_t("width",r.gridResolution)("height","1px"),xt(3),_t("ngIf",r.dataset),xt(2),_t("options",r.lossOptions))},dependencies:[Og,nv,rv,mc,xs,Ig,Au,Iu,ole,IC,PC,sP,Cs,iu,eC],styles:[".datapoint[_ngcontent-%COMP%]{border-radius:100%;width:.75em;z-index:250;aspect-ratio:1;transform:translate(-50%,-50%);border:rgb(192,192,192) solid 1px;box-shadow:#00000040 0 54px 55px,#0000001f 0 -12px 30px,#0000001f 0 4px 6px,#0000002b 0 12px 13px,#00000017 0 -3px 5px}.datapoint[_ngcontent-%COMP%]:hover{scale:1.5;transform-origin:top left;filter:brightness(1.5)}.canvasContainer[_ngcontent-%COMP%]{aspect-ratio:1;border-radius:1em;overflow:hidden;border:solid white 1px;box-shadow:#26394d 0 20px 30px -10px}"]}),e})();class lce extends cP{constructor(){super(),this.pos=new ds([2]),this.out=new ds([1]),this.name="ToyLayer",this.pos.data=[0,0]}forward(){let r=this.equation(this.pos.data[0],this.pos.data[1]);return this.out.data[0]=r,this.out}backward(){let n=this.pos.data[0],t=this.pos.data[1],r=this.derivative_x(n,t),i=this.derivative_y(n,t);return this.pos.grad[0]=r,this.pos.grad[1]=i,this.pos}parameters(){return[this.pos]}equation(n,t){return Math.sin(3*n)*Math.cos(3*t)}derivative_x(n,t){return 3*Math.cos(3*n)*Math.cos(3*t)}derivative_y(n,t){return-3*Math.sin(3*n)*Math.sin(3*t)}}class cce extends p9{constructor(){super(),this.layer1=new lce,this.layers.push(this.layer1)}forward(){return this.layer1.forward()}backward(){return this.layer1.backward()}currentXY(){return this.layer1.pos.data}currentZ(){return this.forward().data[0]}currentXYZ(n=0){let t=this.currentXY(),r=this.currentZ();return r+=n,[t[0],t[1],r]}noisify_gradient(n=.1){this.layer1.pos.grad[0]+=Math.random()*n-n/2,this.layer1.pos.grad[1]+=Math.random()*n-n/2}equation(n,t){return this.layer1.equation(n,t)}parameters(){return this.layer1.parameters()}bound_check(n=-1,t=1){let i=this.layer1.pos.data[1];this.layer1.pos.data[0]=Math.min(t,Math.max(n,this.layer1.pos.data[0])),this.layer1.pos.data[1]=Math.min(t,Math.max(n,i))}}const uce=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:KX},{path:"fourierTransform",component:pte},{path:"spatialFiltering",component:jle},{path:"colorspaces",component:ote},{path:"morphology",component:mle},{path:"histogram",component:gte},{path:"weightLoss",component:Gse},{path:"sampling",component:Ole},{path:"spectralFiltering",component:Zle},{path:"PSNR",component:$le},{path:"gradientDescent",component:sce},{path:"optimizer",component:(()=>{class e extends sB{constructor(t){super(),this.cdr=t,this.max_steps=100,this.simu_speed=50,this.max_history=25,this.step_size=.02,this.current_step=0,this.initial_xy=[.5,0],this.min=-1,this.max=1,this.noisyGradient=!1,this.isTraining=!1,this.lr=.01,this.wc=.1,this._isUpdating=!1,this.optimizerType="sgd",this.history=[],this.model=new cce,this.option={grid:{},animation:!1,visualMap:{show:!1,dimension:2,seriesIndex:[0,2],min:this.min,max:this.max,inRange:{symbolSize:[.5,15],color:["#313695","#4575b4","#74add1","#abd9e9","#abd9e9","#abd9e9","#fee090","#fdae61","#f46d43","#d73027","#a50026"]}},xAxis3D:{type:"value",min:this.min,max:this.max},yAxis3D:{type:"value",min:this.min,max:this.max},zAxis3D:{type:"value",show:!1,min:-1,max:1},grid3D:{show:!0,postEffect:{enable:!1}}},this.lossPlot={xAxis:{type:"value"},yAxis:{type:"value"},series:[{type:"line",data:[]}]},this.data={series:[{type:"line3D",data:this.history,visualMap:!0,lineStyle:{width:2,border:"black"}},{type:"scatter3D",zlevel:10,data:[this.model.currentXYZ()],symbol:"circle",symbolSize:10,itemStyle:{color:"black",opacity:.5}},{type:"surface",wireframe:{show:!1},dataShape:[Math.round((this.max-this.min)/this.step_size),Math.round((this.max-this.min)/this.step_size)]}]},this.model.layer1.pos.data=[...this.initial_xy],this.changeOptimizer()}ngOnInit(){}ngAfterViewInit(){}onChartInit(t){this.echartInstance=t;let r=this.min,i=this.max,o=this.step_size,d=[];for(let f=r;f<i;f+=o)for(let g=r;g<i;g+=o)d.push([f,g,this.model.equation(f,g)]);this.data.series[2].data=d,requestAnimationFrame(()=>{this.updateOption()})}onLossChartInit(t){this.echartLossPlotInstance=t}onChartClick(t){this.isTraining&&this.pauseTraining(),"surface"===t.seriesType&&(this.initial_xy=[t.value[0],t.value[1]],this.resetToInitialPoint()),this.isTraining&&this.startTraining()}changeLearningRate(t){this.isTraining&&this.pauseTraining(),this.lr=t,this.optim=new LC(this.model,this.lr,this.wc),this.isTraining&&this.startTraining()}changeOptimizer(){this.isTraining&&this.pauseTraining(),this.optim="sgd"===this.optimizerType?new LC(this.model,this.lr,this.wc):"Adam"===this.optimizerType?new v9(this.model,this.lr,this.wc):new m9(this.model,this.lr,this.wc),this.optim.reset_momentums(),this.isTraining&&this.startTraining()}switchTraining(){this.isTraining=!this.isTraining,this.isTraining?this.startTraining():clearInterval(this.trainer)}pauseTraining(){clearInterval(this.trainer)}startTraining(){this.trainer=setInterval(()=>{this.runTraining()},this.simu_speed)}runTraining(){this.isTraining?this.step():clearInterval(this.trainer)}step(){this.current_step>=this.max_steps?this.resetToInitialPoint():(this.model.backward(),this.noisyGradient&&this.model.noisify_gradient(5),this.optim.step(),this.model.bound_check(this.min,this.max),this.history.push(this.model.currentXYZ(.05)),this.current_step+=1,this.updateOption())}resetToInitialPoint(){this.model.layer1.pos.data=[...this.initial_xy],this.optim.reset_momentums(),this.current_step=0,this.history=[],this.updateOption()}updateOption(){this.data.series[1].data=[this.model.currentXYZ(.05)];let t=[];for(let o=this.history.length-this.max_history;o<this.history.length;o++)t.push(this.history[o]);this.data.series[0].data=t;const r={series:[this.data.series[0],this.data.series[1]]};let i=[];this.history.forEach((o,d)=>{i.push([d,o[2]])}),this.echartInstance.setOption(r,{notMerge:!1,lazyUpdate:!0,silent:!0}),this.echartLossPlotInstance.setOption({series:[{data:i}]})}}return e.\u0275fac=function(t){return new(t||e)(qe(Pi))},e.\u0275cmp=qn({type:e,selectors:[["app-optimizer"]],features:[Gn],decls:27,vars:12,consts:[[3,"rightDrawer"],["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],[1,"flex","flex-col","gap-2"],["mat-raised-button","","color","primary",1,"w-full",3,"click"],[3,"min","max","step","value","title","valueChange"],[1,"mb-2",3,"ngModel","ngModelChange","change"],["value","sgd",1,"flex-1"],["value","adam",1,"flex-1"],["value","RMSPROP",1,"flex-1"],[3,"ngModel","ngModelChange"],["ngProjectAs","[centerContent]",5,["","centerContent",""]],["echarts","",1,"graph",3,"options","merge","chartClick","chartInit"],["echarts","",1,"graph",3,"options","chartInit"]],template:function(t,r){1&t&&(je(0,"app-tutorial-template",0),ci(1,1),je(2,"div",2)(3,"button",3),It("click",function(){return r.switchTraining()}),Mt(4),Ke(),je(5,"button",3),It("click",function(){return r.resetToInitialPoint()}),Mt(6," Reset "),Ke(),yn(7,"mat-divider"),je(8,"app-labelled-sliders",4),It("valueChange",function(o){return r.changeLearningRate(o)}),Ke(),yn(9,"mat-divider"),je(10,"span"),Mt(11,"Optimizer"),Ke(),je(12,"mat-button-toggle-group",5),It("ngModelChange",function(o){return r.optimizerType=o})("change",function(){return r.changeOptimizer()}),je(13,"mat-button-toggle",6),Mt(14," SGD "),Ke(),je(15,"mat-button-toggle",7),Mt(16," Adam "),Ke(),je(17,"mat-button-toggle",8),Mt(18," RMSPROP "),Ke()(),je(19,"button",3),It("click",function(){return r.optim.reset_momentums()}),Mt(20," Reset momentums "),Ke(),yn(21,"mat-divider"),je(22,"mat-checkbox",9),It("ngModelChange",function(o){return r.noisyGradient=o}),Mt(23," Noisy gradient "),Ke()(),ui(),ci(24,10),je(25,"div",11),It("chartClick",function(o){return r.onChartClick(o)})("chartInit",function(o){return r.onChartInit(o)}),Ke(),je(26,"div",12),It("chartInit",function(o){return r.onLossChartInit(o)}),Ke(),ui(),Ke()),2&t&&(_t("rightDrawer",!0),xt(4),ro(" ",r.isTraining?"Pause training":"Start training"," "),xt(4),_t("min",0)("max",.3)("step",.001)("value",r.lr)("title","Learning rate"),xt(4),_t("ngModel",r.optimizerType),xt(10),_t("ngModel",r.noisyGradient),xt(3),_t("options",r.option)("merge",r.data),xt(1),_t("options",r.lossPlot))},dependencies:[Og,UV,nv,rv,Au,Iu,c9,Cs,iu,eC],styles:[".graph[_ngcontent-%COMP%]{width:100%;border-radius:.25em;border-color:#000;margin:5%}"]}),e})()}];let dce=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[QU.forRoot(uce),QU]}),e})(),hce=(()=>{class e{constructor(){this.title="cv-toolbox"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=qn({type:e,selectors:[["app-root"]],decls:6,vars:0,consts:[[1,"hide-smallscreen"],["routerLink","/home"]],template:function(t,r){1&t&&(je(0,"mat-toolbar",0)(1,"h1")(2,"a",1),Mt(3," Home"),Ke()()(),je(4,"div"),yn(5,"router-outlet"),Ke())},dependencies:[vB,h3,Ug],styles:["a[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit}h1[_ngcontent-%COMP%]{text-align:center;width:100%}"]}),e})();function b9(e){return new an(3e3,!1)}function Yce(){return typeof window<"u"&&typeof window.document<"u"}function jV(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Xf(e){switch(e.length){case 0:return new Xw;case 1:return e[0];default:return new i8(e)}}function x9(e,n,t,r,i=new Map,o=new Map){const d=[],f=[];let g=-1,_=null;if(r.forEach(w=>{const S=w.get("offset"),k=S==g,V=k&&_||new Map;w.forEach((ne,pe)=>{let De=pe,Re=ne;if("offset"!==pe)switch(De=n.normalizePropertyName(De,d),Re){case"!":Re=i.get(pe);break;case Yd:Re=o.get(pe);break;default:Re=n.normalizeStyleValue(pe,De,Re,d)}V.set(De,Re)}),k||f.push(V),_=V,g=S}),d.length)throw function kce(e){return new an(3502,!1)}();return f}function ZV(e,n,t,r){switch(n){case"start":e.onStart(()=>r(t&&YV(t,"start",e)));break;case"done":e.onDone(()=>r(t&&YV(t,"done",e)));break;case"destroy":e.onDestroy(()=>r(t&&YV(t,"destroy",e)))}}function YV(e,n,t){const o=XV(e.element,e.triggerName,e.fromState,e.toState,n||e.phaseName,t.totalTime??e.totalTime,!!t.disabled),d=e._data;return null!=d&&(o._data=d),o}function XV(e,n,t,r,i="",o=0,d){return{element:e,triggerName:n,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!d}}function Hl(e,n,t){let r=e.get(n);return r||e.set(n,r=t),r}function w9(e){const n=e.indexOf(":");return[e.substring(1,n),e.slice(n+1)]}let $V=(e,n)=>!1,C9=(e,n,t)=>[],S9=null;function KV(e){const n=e.parentNode||e.host;return n===S9?null:n}(jV()||typeof Element<"u")&&(Yce()?(S9=(()=>document.documentElement)(),$V=(e,n)=>{for(;n;){if(n===e)return!0;n=KV(n)}return!1}):$V=(e,n)=>e.contains(n),C9=(e,n,t)=>{if(t)return Array.from(e.querySelectorAll(n));const r=e.querySelector(n);return r?[r]:[]});let Mv=null,D9=!1;const M9=$V,T9=C9;let E9=(()=>{class e{validateStyleProperty(t){return function $ce(e){Mv||(Mv=function Kce(){return typeof document<"u"?document.body:null}()||{},D9=!!Mv.style&&"WebkitAppearance"in Mv.style);let n=!0;return Mv.style&&!function Xce(e){return"ebkit"==e.substring(1,6)}(e)&&(n=e in Mv.style,!n&&D9&&(n="Webkit"+e.charAt(0).toUpperCase()+e.slice(1)in Mv.style)),n}(t)}matchesElement(t,r){return!1}containsElement(t,r){return M9(t,r)}getParentElement(t){return KV(t)}query(t,r,i){return T9(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,d,f=[],g){return new Xw(i,o)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Jt({token:e,factory:e.\u0275fac}),e})(),QV=(()=>{class e{}return e.NOOP=new E9,e})();const qV="ng-enter",dP="ng-leave",hP="ng-trigger",fP=".ng-trigger",I9="ng-animating",JV=".ng-animating";function ah(e){if("number"==typeof e)return e;const n=e.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:e5(parseFloat(n[1]),n[2])}function e5(e,n){return"s"===n?1e3*e:e}function pP(e,n,t){return e.hasOwnProperty("duration")?e:function Jce(e,n,t){let i,o=0,d="";if("string"==typeof e){const f=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return n.push(b9()),{duration:0,delay:0,easing:""};i=e5(parseFloat(f[1]),f[2]);const g=f[3];null!=g&&(o=e5(parseFloat(g),f[4]));const _=f[5];_&&(d=_)}else i=e;if(!t){let f=!1,g=n.length;i<0&&(n.push(function fce(){return new an(3100,!1)}()),f=!0),o<0&&(n.push(function pce(){return new an(3101,!1)}()),f=!0),f&&n.splice(g,0,b9())}return{duration:i,delay:o,easing:d}}(e,n,t)}function OC(e,n={}){return Object.keys(e).forEach(t=>{n[t]=e[t]}),n}function P9(e){const n=new Map;return Object.keys(e).forEach(t=>{n.set(t,e[t])}),n}function $f(e,n=new Map,t){if(t)for(let[r,i]of t)n.set(r,i);for(let[r,i]of e)n.set(r,i);return n}function L9(e,n,t){return t?n+":"+t+";":""}function O9(e){let n="";for(let t=0;t<e.style.length;t++){const r=e.style.item(t);n+=L9(0,r,e.style.getPropertyValue(r))}for(const t in e.style)e.style.hasOwnProperty(t)&&!t.startsWith("_")&&(n+=L9(0,rue(t),e.style[t]));e.setAttribute("style",n)}function Nu(e,n,t){e.style&&(n.forEach((r,i)=>{const o=n5(i);t&&!t.has(i)&&t.set(i,e.style[o]),e.style[o]=r}),jV()&&O9(e))}function Tv(e,n){e.style&&(n.forEach((t,r)=>{const i=n5(r);e.style[i]=""}),jV()&&O9(e))}function kC(e){return Array.isArray(e)?1==e.length?e[0]:t8(e):e}const t5=new RegExp("{{\\s*(.+?)\\s*}}","g");function k9(e){let n=[];if("string"==typeof e){let t;for(;t=t5.exec(e);)n.push(t[1]);t5.lastIndex=0}return n}function NC(e,n,t){const r=e.toString(),i=r.replace(t5,(o,d)=>{let f=n[d];return null==f&&(t.push(function vce(e){return new an(3003,!1)}()),f=""),f.toString()});return i==r?e:i}function gP(e){const n=[];let t=e.next();for(;!t.done;)n.push(t.value),t=e.next();return n}const nue=/-+([a-z0-9])/g;function n5(e){return e.replace(nue,(...n)=>n[1].toUpperCase())}function rue(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ul(e,n,t){switch(n.type){case 7:return e.visitTrigger(n,t);case 0:return e.visitState(n,t);case 1:return e.visitTransition(n,t);case 2:return e.visitSequence(n,t);case 3:return e.visitGroup(n,t);case 4:return e.visitAnimate(n,t);case 5:return e.visitKeyframes(n,t);case 6:return e.visitStyle(n,t);case 8:return e.visitReference(n,t);case 9:return e.visitAnimateChild(n,t);case 10:return e.visitAnimateRef(n,t);case 11:return e.visitQuery(n,t);case 12:return e.visitStagger(n,t);default:throw function mce(e){return new an(3004,!1)}()}}function N9(e,n){return window.getComputedStyle(e)[n]}function cue(e,n){const t=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(r=>function uue(e,n,t){if(":"==e[0]){const g=function due(e,n){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return n.push(function Pce(e){return new an(3016,!1)}()),"* => *"}}(e,t);if("function"==typeof g)return void n.push(g);e=g}const r=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Ice(e){return new an(3015,!1)}()),n;const i=r[1],o=r[2],d=r[3];n.push(F9(i,d));"<"==o[0]&&!("*"==i&&"*"==d)&&n.push(F9(d,i))}(r,t,n)):t.push(e),t}const yP=new Set(["true","1"]),bP=new Set(["false","0"]);function F9(e,n){const t=yP.has(e)||bP.has(e),r=yP.has(n)||bP.has(n);return(i,o)=>{let d="*"==e||e==i,f="*"==n||n==o;return!d&&t&&"boolean"==typeof i&&(d=i?yP.has(e):bP.has(e)),!f&&r&&"boolean"==typeof o&&(f=o?yP.has(n):bP.has(n)),d&&f}}const hue=new RegExp("s*:selfs*,?","g");function r5(e,n,t,r){return new fue(e).build(n,t,r)}class fue{constructor(n){this._driver=n}build(n,t,r){const i=new vue(t);return this._resetContextStyleTimingState(i),Ul(this,kC(n),i)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles=new Map,n.collectedStyles.set("",new Map),n.currentTime=0}visitTrigger(n,t){let r=t.queryCount=0,i=t.depCount=0;const o=[],d=[];return"@"==n.name.charAt(0)&&t.errors.push(function yce(){return new an(3006,!1)}()),n.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),0==f.type){const g=f,_=g.name;_.toString().split(/\s*,\s*/).forEach(w=>{g.name=w,o.push(this.visitState(g,t))}),g.name=_}else if(1==f.type){const g=this.visitTransition(f,t);r+=g.queryCount,i+=g.depCount,d.push(g)}else t.errors.push(function bce(){return new an(3007,!1)}())}),{type:7,name:n.name,states:o,transitions:d,queryCount:r,depCount:i,options:null}}visitState(n,t){const r=this.visitStyle(n.styles,t),i=n.options&&n.options.params||null;if(r.containsDynamicStyles){const o=new Set,d=i||{};r.styles.forEach(f=>{f instanceof Map&&f.forEach(g=>{k9(g).forEach(_=>{d.hasOwnProperty(_)||o.add(_)})})}),o.size&&(gP(o.values()),t.errors.push(function xce(e,n){return new an(3008,!1)}()))}return{type:0,name:n.name,style:r,options:i?{params:i}:null}}visitTransition(n,t){t.queryCount=0,t.depCount=0;const r=Ul(this,kC(n.animation),t);return{type:1,matchers:cue(n.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Ev(n.options)}}visitSequence(n,t){return{type:2,steps:n.steps.map(r=>Ul(this,r,t)),options:Ev(n.options)}}visitGroup(n,t){const r=t.currentTime;let i=0;const o=n.steps.map(d=>{t.currentTime=r;const f=Ul(this,d,t);return i=Math.max(i,t.currentTime),f});return t.currentTime=i,{type:3,steps:o,options:Ev(n.options)}}visitAnimate(n,t){const r=function _ue(e,n){if(e.hasOwnProperty("duration"))return e;if("number"==typeof e)return a5(pP(e,n).duration,0,"");const t=e;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=a5(0,0,"");return o.dynamic=!0,o.strValue=t,o}const i=pP(t,n);return a5(i.duration,i.delay,i.easing)}(n.timings,t.errors);t.currentAnimateTimings=r;let i,o=n.styles?n.styles:va({});if(5==o.type)i=this.visitKeyframes(o,t);else{let d=n.styles,f=!1;if(!d){f=!0;const _={};r.easing&&(_.easing=r.easing),d=va(_)}t.currentTime+=r.duration+r.delay;const g=this.visitStyle(d,t);g.isEmptyStep=f,i=g}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(n,t){const r=this._makeStyleAst(n,t);return this._validateStyleAst(r,t),r}_makeStyleAst(n,t){const r=[],i=Array.isArray(n.styles)?n.styles:[n.styles];for(let f of i)"string"==typeof f?f===Yd?r.push(f):t.errors.push(new an(3002,!1)):r.push(P9(f));let o=!1,d=null;return r.forEach(f=>{if(f instanceof Map&&(f.has("easing")&&(d=f.get("easing"),f.delete("easing")),!o))for(let g of f.values())if(g.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:r,easing:d,offset:n.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(n,t){const r=t.currentAnimateTimings;let i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),n.styles.forEach(d=>{"string"!=typeof d&&d.forEach((f,g)=>{const _=t.collectedStyles.get(t.currentQuerySelector),w=_.get(g);let S=!0;w&&(o!=i&&o>=w.startTime&&i<=w.endTime&&(t.errors.push(function Cce(e,n,t,r,i){return new an(3010,!1)}()),S=!1),o=w.startTime),S&&_.set(g,{startTime:o,endTime:i}),t.options&&function tue(e,n,t){const r=n.params||{},i=k9(e);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(function gce(e){return new an(3001,!1)}())})}(f,t.options,t.errors)})})}visitKeyframes(n,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Sce(){return new an(3011,!1)}()),r;let o=0;const d=[];let f=!1,g=!1,_=0;const w=n.steps.map(Re=>{const Fe=this._makeStyleAst(Re,t);let ke=null!=Fe.offset?Fe.offset:function mue(e){if("string"==typeof e)return null;let n=null;if(Array.isArray(e))e.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;n=parseFloat(r.get("offset")),r.delete("offset")}});else if(e instanceof Map&&e.has("offset")){const t=e;n=parseFloat(t.get("offset")),t.delete("offset")}return n}(Fe.styles),Be=0;return null!=ke&&(o++,Be=Fe.offset=ke),g=g||Be<0||Be>1,f=f||Be<_,_=Be,d.push(Be),Fe});g&&t.errors.push(function Dce(){return new an(3012,!1)}()),f&&t.errors.push(function Mce(){return new an(3200,!1)}());const S=n.steps.length;let k=0;o>0&&o<S?t.errors.push(function Tce(){return new an(3202,!1)}()):0==o&&(k=1/(S-1));const V=S-1,ne=t.currentTime,pe=t.currentAnimateTimings,De=pe.duration;return w.forEach((Re,Fe)=>{const ke=k>0?Fe==V?1:k*Fe:d[Fe],Be=ke*De;t.currentTime=ne+pe.delay+Be,pe.duration=Be,this._validateStyleAst(Re,t),Re.offset=ke,r.styles.push(Re)}),r}visitReference(n,t){return{type:8,animation:Ul(this,kC(n.animation),t),options:Ev(n.options)}}visitAnimateChild(n,t){return t.depCount++,{type:9,options:Ev(n.options)}}visitAnimateRef(n,t){return{type:10,animation:this.visitReference(n.animation,t),options:Ev(n.options)}}visitQuery(n,t){const r=t.currentQuerySelector,i=n.options||{};t.queryCount++,t.currentQuery=n;const[o,d]=function pue(e){const n=!!e.split(/\s*,\s*/).find(t=>":self"==t);return n&&(e=e.replace(hue,"")),e=e.replace(/@\*/g,fP).replace(/@\w+/g,t=>fP+"-"+t.slice(1)).replace(/:animating/g,JV),[e,n]}(n.selector);t.currentQuerySelector=r.length?r+" "+o:o,Hl(t.collectedStyles,t.currentQuerySelector,new Map);const f=Ul(this,kC(n.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:d,animation:f,originalSelector:n.selector,options:Ev(n.options)}}visitStagger(n,t){t.currentQuery||t.errors.push(function Ece(){return new an(3013,!1)}());const r="full"===n.timings?{duration:0,delay:0,easing:"full"}:pP(n.timings,t.errors,!0);return{type:12,animation:Ul(this,kC(n.animation),t),timings:r,options:null}}}class vue{constructor(n){this.errors=n,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ev(e){return e?(e=OC(e)).params&&(e.params=function gue(e){return e?OC(e):null}(e.params)):e={},e}function a5(e,n,t){return{duration:e,delay:n,easing:t}}function o5(e,n,t,r,i,o,d=null,f=!1){return{type:1,element:e,keyframes:n,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:d,subTimeline:f}}class xP{constructor(){this._map=new Map}get(n){return this._map.get(n)||[]}append(n,t){let r=this._map.get(n);r||this._map.set(n,r=[]),r.push(...t)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const xue=new RegExp(":enter","g"),Cue=new RegExp(":leave","g");function s5(e,n,t,r,i,o=new Map,d=new Map,f,g,_=[]){return(new Sue).buildKeyframes(e,n,t,r,i,o,d,f,g,_)}class Sue{buildKeyframes(n,t,r,i,o,d,f,g,_,w=[]){_=_||new xP;const S=new l5(n,t,_,i,o,w,[]);S.options=g;const k=g.delay?ah(g.delay):0;S.currentTimeline.delayNextStep(k),S.currentTimeline.setStyles([d],null,S.errors,g),Ul(this,r,S);const V=S.timelines.filter(ne=>ne.containsAnimation());if(V.length&&f.size){let ne;for(let pe=V.length-1;pe>=0;pe--){const De=V[pe];if(De.element===t){ne=De;break}}ne&&!ne.allowOnlyTimelineStyles()&&ne.setStyles([f],null,S.errors,g)}return V.length?V.map(ne=>ne.buildKeyframes()):[o5(t,[],[],[],0,k,"",!1)]}visitTrigger(n,t){}visitState(n,t){}visitTransition(n,t){}visitAnimateChild(n,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(n.options),o=t.currentTimeline.currentTime,d=this._visitSubInstructions(r,i,i.options);o!=d&&t.transformIntoNewTimeline(d)}t.previousNode=n}visitAnimateRef(n,t){const r=t.createSubContext(n.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],t,r),this.visitReference(n.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=n}_applyAnimationRefDelays(n,t,r){for(const i of n){const o=i?.delay;if(o){const d="number"==typeof o?o:ah(NC(o,i?.params??{},t.errors));r.delayNextStep(d)}}}_visitSubInstructions(n,t,r){let o=t.currentTimeline.currentTime;const d=null!=r.duration?ah(r.duration):null,f=null!=r.delay?ah(r.delay):null;return 0!==d&&n.forEach(g=>{const _=t.appendInstructionToTimeline(g,d,f);o=Math.max(o,_.duration+_.delay)}),o}visitReference(n,t){t.updateOptions(n.options,!0),Ul(this,n.animation,t),t.previousNode=n}visitSequence(n,t){const r=t.subContextCount;let i=t;const o=n.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=wP);const d=ah(o.delay);i.delayNextStep(d)}n.steps.length&&(n.steps.forEach(d=>Ul(this,d,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=n}visitGroup(n,t){const r=[];let i=t.currentTimeline.currentTime;const o=n.options&&n.options.delay?ah(n.options.delay):0;n.steps.forEach(d=>{const f=t.createSubContext(n.options);o&&f.delayNextStep(o),Ul(this,d,f),i=Math.max(i,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(d=>t.currentTimeline.mergeTimelineCollectedStyles(d)),t.transformIntoNewTimeline(i),t.previousNode=n}_visitTiming(n,t){if(n.dynamic){const r=n.strValue;return pP(t.params?NC(r,t.params,t.errors):r,t.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,t){const r=t.currentAnimateTimings=this._visitTiming(n.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const o=n.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=n}visitStyle(n,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||n.easing;n.isEmptyStep?r.applyEmptyStep(o):r.setStyles(n.styles,o,t.errors,t.options),t.previousNode=n}visitKeyframes(n,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,n.styles.forEach(g=>{f.forwardTime((g.offset||0)*o),f.setStyles(g.styles,g.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(i+o),t.previousNode=n}visitQuery(n,t){const r=t.currentTimeline.currentTime,i=n.options||{},o=i.delay?ah(i.delay):0;o&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=wP);let d=r;const f=t.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=f.length;let g=null;f.forEach((_,w)=>{t.currentQueryIndex=w;const S=t.createSubContext(n.options,_);o&&S.delayNextStep(o),_===t.element&&(g=S.currentTimeline),Ul(this,n.animation,S),S.currentTimeline.applyStylesToKeyframe(),d=Math.max(d,S.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(d),g&&(t.currentTimeline.mergeTimelineCollectedStyles(g),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=n}visitStagger(n,t){const r=t.parentContext,i=t.currentTimeline,o=n.timings,d=Math.abs(o.duration),f=d*(t.currentQueryTotal-1);let g=d*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":g=f-g;break;case"full":g=r.currentStaggerTime}const w=t.currentTimeline;g&&w.delayNextStep(g);const S=w.currentTime;Ul(this,n.animation,t),t.previousNode=n,r.currentStaggerTime=i.currentTime-S+(i.startTime-r.currentTimeline.startTime)}}const wP={};class l5{constructor(n,t,r,i,o,d,f,g){this._driver=n,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=d,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=wP,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=g||new CP(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,t){if(!n)return;const r=n;let i=this.options;null!=r.duration&&(i.duration=ah(r.duration)),null!=r.delay&&(i.delay=ah(r.delay));const o=r.params;if(o){let d=i.params;d||(d=this.options.params={}),Object.keys(o).forEach(f=>{(!t||!d.hasOwnProperty(f))&&(d[f]=NC(o[f],d,this.errors))})}}_copyOptions(){const n={};if(this.options){const t=this.options.params;if(t){const r=n.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return n}createSubContext(n=null,t,r){const i=t||this.element,o=new l5(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(n),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(n){return this.previousNode=wP,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,t,r){const i={duration:t??n.duration,delay:this.currentTimeline.currentTime+(r??0)+n.delay,easing:""},o=new Due(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,i,n.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,t,r,i,o,d){let f=[];if(i&&f.push(this.element),n.length>0){n=(n=n.replace(xue,"."+this._enterClassName)).replace(Cue,"."+this._leaveClassName);let _=this._driver.query(this.element,n,1!=r);0!==r&&(_=r<0?_.slice(_.length+r,_.length):_.slice(0,r)),f.push(..._)}return!o&&0==f.length&&d.push(function Ace(e){return new an(3014,!1)}()),f}}class CP{constructor(n,t,r,i){this._driver=n,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+n),t&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,t){return this.applyStylesToKeyframe(),new CP(this._driver,n,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,t){this._localTimelineStyles.set(n,t),this._globalTimelineStyles.set(n,t),this._styleSummary.set(n,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Yd),this._currentKeyframe.set(t,Yd);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,t,r,i){t&&this._previousKeyframe.set("easing",t);const o=i&&i.params||{},d=function Mue(e,n){const t=new Map;let r;return e.forEach(i=>{if("*"===i){r=r||n.keys();for(let o of r)t.set(o,Yd)}else $f(i,t)}),t}(n,this._globalTimelineStyles);for(let[f,g]of d){const _=NC(g,o,r);this._pendingStyles.set(f,_),this._localTimelineStyles.has(f)||this._backFill.set(f,this._globalTimelineStyles.get(f)??Yd),this._updateStyle(f,_)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((n,t)=>{this._currentKeyframe.set(t,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,n)}))}snapshotCurrentStyles(){for(let[n,t]of this._localTimelineStyles)this._pendingStyles.set(n,t),this._updateStyle(n,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let t in this._currentKeyframe)n.push(t);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((f,g)=>{const _=$f(f,new Map,this._backFill);_.forEach((w,S)=>{"!"===w?n.add(S):w===Yd&&t.add(S)}),r||_.set("offset",g/this.duration),i.push(_)});const o=n.size?gP(n.values()):[],d=t.size?gP(t.values()):[];if(r){const f=i[0],g=new Map(f);f.set("offset",0),g.set("offset",1),i=[f,g]}return o5(this.element,i,o,d,this.duration,this.startTime,this.easing,!1)}}class Due extends CP{constructor(n,t,r,i,o,d,f=!1){super(n,t,d.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=f,this.timings={duration:d.duration,delay:d.delay,easing:d.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],d=r+t,f=t/d,g=$f(n[0]);g.set("offset",0),o.push(g);const _=$f(n[0]);_.set("offset",z9(f)),o.push(_);const w=n.length-1;for(let S=1;S<=w;S++){let k=$f(n[S]);const V=k.get("offset");k.set("offset",z9((t+V*r)/d)),o.push(k)}r=d,t=0,i="",n=o}return o5(this.element,n,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function z9(e,n=3){const t=Math.pow(10,n-1);return Math.round(e*t)/t}class c5{}const Tue=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Eue extends c5{normalizePropertyName(n,t){return n5(n)}normalizeStyleValue(n,t,r,i){let o="";const d=r.toString().trim();if(Tue.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&i.push(function _ce(e,n){return new an(3005,!1)}())}return d+o}}function H9(e,n,t,r,i,o,d,f,g,_,w,S,k){return{type:0,element:e,triggerName:n,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:d,timelines:f,queriedElements:g,preStyleProps:_,postStyleProps:w,totalTime:S,errors:k}}const u5={};class U9{constructor(n,t,r){this._triggerName=n,this.ast=t,this._stateStyles=r}match(n,t,r,i){return function Aue(e,n,t,r,i){return e.some(o=>o(n,t,r,i))}(this.ast.matchers,n,t,r,i)}buildStyles(n,t,r){let i=this._stateStyles.get("*");return void 0!==n&&(i=this._stateStyles.get(n?.toString())||i),i?i.buildStyles(t,r):new Map}build(n,t,r,i,o,d,f,g,_,w){const S=[],k=this.ast.options&&this.ast.options.params||u5,ne=this.buildStyles(r,f&&f.params||u5,S),pe=g&&g.params||u5,De=this.buildStyles(i,pe,S),Re=new Set,Fe=new Map,ke=new Map,Be="void"===i,at={params:Iue(pe,k),delay:this.ast.options?.delay},ot=w?[]:s5(n,t,this.ast.animation,o,d,ne,De,at,_,S);let St=0;if(ot.forEach(Ht=>{St=Math.max(Ht.duration+Ht.delay,St)}),S.length)return H9(t,this._triggerName,r,i,Be,ne,De,[],[],Fe,ke,St,S);ot.forEach(Ht=>{const rn=Ht.element,Kt=Hl(Fe,rn,new Set);Ht.preStyleProps.forEach(_n=>Kt.add(_n));const gn=Hl(ke,rn,new Set);Ht.postStyleProps.forEach(_n=>gn.add(_n)),rn!==t&&Re.add(rn)});const yt=gP(Re.values());return H9(t,this._triggerName,r,i,Be,ne,De,ot,yt,Fe,ke,St)}}function Iue(e,n){const t=OC(n);for(const r in e)e.hasOwnProperty(r)&&null!=e[r]&&(t[r]=e[r]);return t}class Pue{constructor(n,t,r){this.styles=n,this.defaultParams=t,this.normalizer=r}buildStyles(n,t){const r=new Map,i=OC(this.defaultParams);return Object.keys(n).forEach(o=>{const d=n[o];null!==d&&(i[o]=d)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((d,f)=>{d&&(d=NC(d,i,t));const g=this.normalizer.normalizePropertyName(f,t);d=this.normalizer.normalizeStyleValue(f,g,d,t),r.set(g,d)})}),r}}class Lue{constructor(n,t,r){this.name=n,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new Pue(i.style,i.options&&i.options.params||{},r))}),G9(this.states,"true","1"),G9(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new U9(n,i,this.states))}),this.fallbackTransition=function Oue(e,n,t){return new U9(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(d,f)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,t,r,i){return this.transitionFactories.find(d=>d.match(n,t,r,i))||null}matchStyles(n,t,r){return this.fallbackTransition.buildStyles(n,t,r)}}function G9(e,n,t){e.has(n)?e.has(t)||e.set(t,e.get(n)):e.has(t)&&e.set(n,e.get(t))}const kue=new xP;class Nue{constructor(n,t,r){this.bodyNode=n,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(n,t){const r=[],o=r5(this._driver,t,r,[]);if(r.length)throw function Nce(e){return new an(3503,!1)}();this._animations.set(n,o)}_buildPlayer(n,t,r){const i=n.element,o=x9(0,this._normalizer,0,n.keyframes,t,r);return this._driver.animate(i,o,n.duration,n.delay,n.easing,[],!0)}create(n,t,r={}){const i=[],o=this._animations.get(n);let d;const f=new Map;if(o?(d=s5(this._driver,t,o,qV,dP,new Map,new Map,r,kue,i),d.forEach(w=>{const S=Hl(f,w.element,new Map);w.postStyleProps.forEach(k=>S.set(k,null))})):(i.push(function Fce(){return new an(3300,!1)}()),d=[]),i.length)throw function Bce(e){return new an(3504,!1)}();f.forEach((w,S)=>{w.forEach((k,V)=>{w.set(V,this._driver.computeStyle(S,V,Yd))})});const _=Xf(d.map(w=>{const S=f.get(w.element);return this._buildPlayer(w,new Map,S)}));return this._playersById.set(n,_),_.onDestroy(()=>this.destroy(n)),this.players.push(_),_}destroy(n){const t=this._getPlayer(n);t.destroy(),this._playersById.delete(n);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(n){const t=this._playersById.get(n);if(!t)throw function Vce(e){return new an(3301,!1)}();return t}listen(n,t,r,i){const o=XV(t,"","","");return ZV(this._getPlayer(n),r,o,i),()=>{}}command(n,t,r,i){if("register"==r)return void this.register(n,i[0]);if("create"==r)return void this.create(n,t,i[0]||{});const o=this._getPlayer(n);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(n)}}}const W9="ng-animate-queued",d5="ng-animate-disabled",Hue=[],j9={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Uue={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ac="__ng_removed";class h5{constructor(n,t=""){this.namespaceId=t;const r=n&&n.hasOwnProperty("value");if(this.value=function Zue(e){return e??null}(r?n.value:n),r){const o=OC(n);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(n){const t=n.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const FC="void",f5=new h5(FC);class Gue{constructor(n,t,r){this.id=n,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+n,Ic(t,this._hostClassName)}listen(n,t,r,i){if(!this._triggers.has(t))throw function zce(e,n){return new an(3302,!1)}();if(null==r||0==r.length)throw function Hce(e){return new an(3303,!1)}();if(!function Yue(e){return"start"==e||"done"==e}(r))throw function Uce(e,n){return new an(3400,!1)}();const o=Hl(this._elementListeners,n,[]),d={name:t,phase:r,callback:i};o.push(d);const f=Hl(this._engine.statesByElement,n,new Map);return f.has(t)||(Ic(n,hP),Ic(n,hP+"-"+t),f.set(t,f5)),()=>{this._engine.afterFlush(()=>{const g=o.indexOf(d);g>=0&&o.splice(g,1),this._triggers.has(t)||f.delete(t)})}}register(n,t){return!this._triggers.has(n)&&(this._triggers.set(n,t),!0)}_getTrigger(n){const t=this._triggers.get(n);if(!t)throw function Gce(e){return new an(3401,!1)}();return t}trigger(n,t,r,i=!0){const o=this._getTrigger(t),d=new p5(this.id,t,n);let f=this._engine.statesByElement.get(n);f||(Ic(n,hP),Ic(n,hP+"-"+t),this._engine.statesByElement.set(n,f=new Map));let g=f.get(t);const _=new h5(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&g&&_.absorbOptions(g.options),f.set(t,_),g||(g=f5),_.value!==FC&&g.value===_.value){if(!function Kue(e,n){const t=Object.keys(e),r=Object.keys(n);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const o=t[i];if(!n.hasOwnProperty(o)||e[o]!==n[o])return!1}return!0}(g.params,_.params)){const pe=[],De=o.matchStyles(g.value,g.params,pe),Re=o.matchStyles(_.value,_.params,pe);pe.length?this._engine.reportError(pe):this._engine.afterFlush(()=>{Tv(n,De),Nu(n,Re)})}return}const k=Hl(this._engine.playersByElement,n,[]);k.forEach(pe=>{pe.namespaceId==this.id&&pe.triggerName==t&&pe.queued&&pe.destroy()});let V=o.matchTransition(g.value,_.value,n,_.params),ne=!1;if(!V){if(!i)return;V=o.fallbackTransition,ne=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:t,transition:V,fromState:g,toState:_,player:d,isFallbackTransition:ne}),ne||(Ic(n,W9),d.onStart(()=>{e0(n,W9)})),d.onDone(()=>{let pe=this.players.indexOf(d);pe>=0&&this.players.splice(pe,1);const De=this._engine.playersByElement.get(n);if(De){let Re=De.indexOf(d);Re>=0&&De.splice(Re,1)}}),this.players.push(d),k.push(d),d}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(t=>t.delete(n)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const t=this._engine.playersByElement.get(n);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,t){const r=this._engine.driver.query(n,fP,!0);r.forEach(i=>{if(i[Ac])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(d=>d.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(n,t,r,i){const o=this._engine.statesByElement.get(n),d=new Map;if(o){const f=[];if(o.forEach((g,_)=>{if(d.set(_,g.value),this._triggers.has(_)){const w=this.trigger(n,_,FC,i);w&&f.push(w)}}),f.length)return this._engine.markElementAsRemoved(this.id,n,!0,t,d),r&&Xf(f).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const t=this._elementListeners.get(n),r=this._engine.statesByElement.get(n);if(t&&r){const i=new Set;t.forEach(o=>{const d=o.name;if(i.has(d))return;i.add(d);const g=this._triggers.get(d).fallbackTransition,_=r.get(d)||f5,w=new h5(FC),S=new p5(this.id,d,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:d,transition:g,fromState:_,toState:w,player:S,isFallbackTransition:!0})})}}removeNode(n,t){const r=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,t),this.triggerLeaveAnimation(n,t,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(n):[];if(o&&o.length)i=!0;else{let d=n;for(;d=d.parentNode;)if(r.statesByElement.get(d)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(n),i)r.markElementAsRemoved(this.id,n,!1,t);else{const o=n[Ac];(!o||o===j9)&&(r.afterFlush(()=>this.clearElementCache(n)),r.destroyInnerAnimations(n),r._onRemovalComplete(n,t))}}insertNode(n,t){Ic(n,this._hostClassName)}drainQueuedTransitions(n){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,d=this._elementListeners.get(o);d&&d.forEach(f=>{if(f.name==r.triggerName){const g=XV(o,r.triggerName,r.fromState.value,r.toState.value);g._data=n,ZV(r.player,f.phase,g,f.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const o=r.transition.ast.depCount,d=i.transition.ast.depCount;return 0==o||0==d?o-d:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(n){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}elementContainsData(n){let t=!1;return this._elementListeners.has(n)&&(t=!0),t=!!this._queue.find(r=>r.element===n)||t,t}}class Wue{constructor(n,t,r){this.bodyNode=n,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}_onRemovalComplete(n,t){this.onRemovalComplete(n,t)}get queuedPlayers(){const n=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&n.push(r)})}),n}createNamespace(n,t){const r=new Gue(n,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[n]=r}_balanceNamespaceList(n,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let d=!1,f=this.driver.getParentElement(t);for(;f;){const g=i.get(f);if(g){const _=r.indexOf(g);r.splice(_+1,0,n),d=!0;break}f=this.driver.getParentElement(f)}d||r.unshift(n)}else r.push(n);return i.set(t,n),n}register(n,t){let r=this._namespaceLookup[n];return r||(r=this.createNamespace(n,t)),r}registerTrigger(n,t,r){let i=this._namespaceLookup[n];i&&i.register(t,r)&&this.totalAnimations++}destroy(n,t){if(!n)return;const r=this._fetchNamespace(n);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[n];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const t=new Set,r=this.statesByElement.get(n);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}return t}trigger(n,t,r,i){if(SP(t)){const o=this._fetchNamespace(n);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(n,t,r,i){if(!SP(t))return;const o=t[Ac];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const d=this.collectedLeaveElements.indexOf(t);d>=0&&this.collectedLeaveElements.splice(d,1)}if(n){const d=this._fetchNamespace(n);d&&d.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,t){t?this.disabledNodes.has(n)||(this.disabledNodes.add(n),Ic(n,d5)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),e0(n,d5))}removeNode(n,t,r,i){if(SP(t)){const o=n?this._fetchNamespace(n):null;if(o?o.removeNode(t,i):this.markElementAsRemoved(n,t,!1,i),r){const d=this.namespacesByHostElement.get(t);d&&d.id!==n&&d.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(n,t,r,i,o){this.collectedLeaveElements.push(t),t[Ac]={namespaceId:n,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(n,t,r,i,o){return SP(t)?this._fetchNamespace(n).listen(t,r,i,o):()=>{}}_buildInstruction(n,t,r,i,o){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,r,i,n.fromState.options,n.toState.options,t,o)}destroyInnerAnimations(n){let t=this.driver.query(n,fP,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(n,JV,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(n){const t=this.playersByElement.get(n);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(n){const t=this.playersByQueriedElement.get(n);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return Xf(this.players).onDone(()=>n());n()})}processLeaveNode(n){const t=n[Ac];if(t&&t.setForRemoval){if(n[Ac]=j9,t.namespaceId){this.destroyInnerAnimations(n);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(n)}this._onRemovalComplete(n,t.setForRemoval)}n.classList?.contains(d5)&&this.markElementAsDisabled(n,!1),this.driver.query(n,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(n=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ic(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,n)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Xf(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(n){throw function Wce(e){return new an(3402,!1)}()}_flushAnimations(n,t){const r=new xP,i=[],o=new Map,d=[],f=new Map,g=new Map,_=new Map,w=new Set;this.disabledNodes.forEach(jt=>{w.add(jt);const cn=this.driver.query(jt,".ng-animate-queued",!0);for(let Yt=0;Yt<cn.length;Yt++)w.add(cn[Yt])});const S=this.bodyNode,k=Array.from(this.statesByElement.keys()),V=X9(k,this.collectedEnterElements),ne=new Map;let pe=0;V.forEach((jt,cn)=>{const Yt=qV+pe++;ne.set(cn,Yt),jt.forEach(Jn=>Ic(Jn,Yt))});const De=[],Re=new Set,Fe=new Set;for(let jt=0;jt<this.collectedLeaveElements.length;jt++){const cn=this.collectedLeaveElements[jt],Yt=cn[Ac];Yt&&Yt.setForRemoval&&(De.push(cn),Re.add(cn),Yt.hasAnimation?this.driver.query(cn,".ng-star-inserted",!0).forEach(Jn=>Re.add(Jn)):Fe.add(cn))}const ke=new Map,Be=X9(k,Array.from(Re));Be.forEach((jt,cn)=>{const Yt=dP+pe++;ke.set(cn,Yt),jt.forEach(Jn=>Ic(Jn,Yt))}),n.push(()=>{V.forEach((jt,cn)=>{const Yt=ne.get(cn);jt.forEach(Jn=>e0(Jn,Yt))}),Be.forEach((jt,cn)=>{const Yt=ke.get(cn);jt.forEach(Jn=>e0(Jn,Yt))}),De.forEach(jt=>{this.processLeaveNode(jt)})});const at=[],ot=[];for(let jt=this._namespaceList.length-1;jt>=0;jt--)this._namespaceList[jt].drainQueuedTransitions(t).forEach(Yt=>{const Jn=Yt.player,Ln=Yt.element;if(at.push(Jn),this.collectedEnterElements.length){const si=Ln[Ac];if(si&&si.setForMove){if(si.previousTriggersValues&&si.previousTriggersValues.has(Yt.triggerName)){const Wi=si.previousTriggersValues.get(Yt.triggerName),ji=this.statesByElement.get(Yt.element);if(ji&&ji.has(Yt.triggerName)){const Ta=ji.get(Yt.triggerName);Ta.value=Wi,ji.set(Yt.triggerName,Ta)}}return void Jn.destroy()}}const oi=!S||!this.driver.containsElement(S,Ln),Nr=ke.get(Ln),Mi=ne.get(Ln),Ir=this._buildInstruction(Yt,r,Mi,Nr,oi);if(Ir.errors&&Ir.errors.length)return void ot.push(Ir);if(oi)return Jn.onStart(()=>Tv(Ln,Ir.fromStyles)),Jn.onDestroy(()=>Nu(Ln,Ir.toStyles)),void i.push(Jn);if(Yt.isFallbackTransition)return Jn.onStart(()=>Tv(Ln,Ir.fromStyles)),Jn.onDestroy(()=>Nu(Ln,Ir.toStyles)),void i.push(Jn);const ei=[];Ir.timelines.forEach(si=>{si.stretchStartingKeyframe=!0,this.disabledNodes.has(si.element)||ei.push(si)}),Ir.timelines=ei,r.append(Ln,Ir.timelines),d.push({instruction:Ir,player:Jn,element:Ln}),Ir.queriedElements.forEach(si=>Hl(f,si,[]).push(Jn)),Ir.preStyleProps.forEach((si,Wi)=>{if(si.size){let ji=g.get(Wi);ji||g.set(Wi,ji=new Set),si.forEach((Ta,Na)=>ji.add(Na))}}),Ir.postStyleProps.forEach((si,Wi)=>{let ji=_.get(Wi);ji||_.set(Wi,ji=new Set),si.forEach((Ta,Na)=>ji.add(Na))})});if(ot.length){const jt=[];ot.forEach(cn=>{jt.push(function jce(e,n){return new an(3505,!1)}())}),at.forEach(cn=>cn.destroy()),this.reportError(jt)}const St=new Map,yt=new Map;d.forEach(jt=>{const cn=jt.element;r.has(cn)&&(yt.set(cn,cn),this._beforeAnimationBuild(jt.player.namespaceId,jt.instruction,St))}),i.forEach(jt=>{const cn=jt.element;this._getPreviousPlayers(cn,!1,jt.namespaceId,jt.triggerName,null).forEach(Jn=>{Hl(St,cn,[]).push(Jn),Jn.destroy()})});const Ht=De.filter(jt=>K9(jt,g,_)),rn=new Map;Y9(rn,this.driver,Fe,_,Yd).forEach(jt=>{K9(jt,g,_)&&Ht.push(jt)});const gn=new Map;V.forEach((jt,cn)=>{Y9(gn,this.driver,new Set(jt),g,"!")}),Ht.forEach(jt=>{const cn=rn.get(jt),Yt=gn.get(jt);rn.set(jt,new Map([...Array.from(cn?.entries()??[]),...Array.from(Yt?.entries()??[])]))});const _n=[],ln=[],Dn={};d.forEach(jt=>{const{element:cn,player:Yt,instruction:Jn}=jt;if(r.has(cn)){if(w.has(cn))return Yt.onDestroy(()=>Nu(cn,Jn.toStyles)),Yt.disabled=!0,Yt.overrideTotalTime(Jn.totalTime),void i.push(Yt);let Ln=Dn;if(yt.size>1){let Nr=cn;const Mi=[];for(;Nr=Nr.parentNode;){const Ir=yt.get(Nr);if(Ir){Ln=Ir;break}Mi.push(Nr)}Mi.forEach(Ir=>yt.set(Ir,Ln))}const oi=this._buildAnimation(Yt.namespaceId,Jn,St,o,gn,rn);if(Yt.setRealPlayer(oi),Ln===Dn)_n.push(Yt);else{const Nr=this.playersByElement.get(Ln);Nr&&Nr.length&&(Yt.parentPlayer=Xf(Nr)),i.push(Yt)}}else Tv(cn,Jn.fromStyles),Yt.onDestroy(()=>Nu(cn,Jn.toStyles)),ln.push(Yt),w.has(cn)&&i.push(Yt)}),ln.forEach(jt=>{const cn=o.get(jt.element);if(cn&&cn.length){const Yt=Xf(cn);jt.setRealPlayer(Yt)}}),i.forEach(jt=>{jt.parentPlayer?jt.syncPlayerEvents(jt.parentPlayer):jt.destroy()});for(let jt=0;jt<De.length;jt++){const cn=De[jt],Yt=cn[Ac];if(e0(cn,dP),Yt&&Yt.hasAnimation)continue;let Jn=[];if(f.size){let oi=f.get(cn);oi&&oi.length&&Jn.push(...oi);let Nr=this.driver.query(cn,JV,!0);for(let Mi=0;Mi<Nr.length;Mi++){let Ir=f.get(Nr[Mi]);Ir&&Ir.length&&Jn.push(...Ir)}}const Ln=Jn.filter(oi=>!oi.destroyed);Ln.length?Xue(this,cn,Ln):this.processLeaveNode(cn)}return De.length=0,_n.forEach(jt=>{this.players.push(jt),jt.onDone(()=>{jt.destroy();const cn=this.players.indexOf(jt);this.players.splice(cn,1)}),jt.play()}),_n}elementContainsData(n,t){let r=!1;const i=t[Ac];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(n).elementContainsData(t)||r}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,t,r,i,o){let d=[];if(t){const f=this.playersByQueriedElement.get(n);f&&(d=f)}else{const f=this.playersByElement.get(n);if(f){const g=!o||o==FC;f.forEach(_=>{_.queued||!g&&_.triggerName!=i||d.push(_)})}}return(r||i)&&(d=d.filter(f=>!(r&&r!=f.namespaceId||i&&i!=f.triggerName))),d}_beforeAnimationBuild(n,t,r){const o=t.element,d=t.isRemovalTransition?void 0:n,f=t.isRemovalTransition?void 0:t.triggerName;for(const g of t.timelines){const _=g.element,w=_!==o,S=Hl(r,_,[]);this._getPreviousPlayers(_,w,d,f,t.toState).forEach(V=>{const ne=V.getRealPlayer();ne.beforeDestroy&&ne.beforeDestroy(),V.destroy(),S.push(V)})}Tv(o,t.fromStyles)}_buildAnimation(n,t,r,i,o,d){const f=t.triggerName,g=t.element,_=[],w=new Set,S=new Set,k=t.timelines.map(ne=>{const pe=ne.element;w.add(pe);const De=pe[Ac];if(De&&De.removedBeforeQueried)return new Xw(ne.duration,ne.delay);const Re=pe!==g,Fe=function $ue(e){const n=[];return $9(e,n),n}((r.get(pe)||Hue).map(St=>St.getRealPlayer())).filter(St=>!!St.element&&St.element===pe),ke=o.get(pe),Be=d.get(pe),at=x9(0,this._normalizer,0,ne.keyframes,ke,Be),ot=this._buildPlayer(ne,at,Fe);if(ne.subTimeline&&i&&S.add(pe),Re){const St=new p5(n,f,pe);St.setRealPlayer(ot),_.push(St)}return ot});_.forEach(ne=>{Hl(this.playersByQueriedElement,ne.element,[]).push(ne),ne.onDone(()=>function jue(e,n,t){let r=e.get(n);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&e.delete(n)}return r}(this.playersByQueriedElement,ne.element,ne))}),w.forEach(ne=>Ic(ne,I9));const V=Xf(k);return V.onDestroy(()=>{w.forEach(ne=>e0(ne,I9)),Nu(g,t.toStyles)}),S.forEach(ne=>{Hl(i,ne,[]).push(V)}),V}_buildPlayer(n,t,r){return t.length>0?this.driver.animate(n.element,t,n.duration,n.delay,n.easing,r):new Xw(n.duration,n.delay)}}class p5{constructor(n,t,r){this.namespaceId=n,this.triggerName=t,this.element=r,this._player=new Xw,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>ZV(n,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const t=this._player;t.triggerCallback&&n.onStart(()=>t.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,t){Hl(this._queuedCallbacks,n,[]).push(t)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const t=this._player;t.triggerCallback&&t.triggerCallback(n)}}function SP(e){return e&&1===e.nodeType}function Z9(e,n){const t=e.style.display;return e.style.display=n??"none",t}function Y9(e,n,t,r,i){const o=[];t.forEach(g=>o.push(Z9(g)));const d=[];r.forEach((g,_)=>{const w=new Map;g.forEach(S=>{const k=n.computeStyle(_,S,i);w.set(S,k),(!k||0==k.length)&&(_[Ac]=Uue,d.push(_))}),e.set(_,w)});let f=0;return t.forEach(g=>Z9(g,o[f++])),d}function X9(e,n){const t=new Map;if(e.forEach(f=>t.set(f,[])),0==n.length)return t;const i=new Set(n),o=new Map;function d(f){if(!f)return 1;let g=o.get(f);if(g)return g;const _=f.parentNode;return g=t.has(_)?_:i.has(_)?1:d(_),o.set(f,g),g}return n.forEach(f=>{const g=d(f);1!==g&&t.get(g).push(f)}),t}function Ic(e,n){e.classList?.add(n)}function e0(e,n){e.classList?.remove(n)}function Xue(e,n,t){Xf(t).onDone(()=>e.processLeaveNode(n))}function $9(e,n){for(let t=0;t<e.length;t++){const r=e[t];r instanceof i8?$9(r.players,n):n.push(r)}}function K9(e,n,t){const r=t.get(e);if(!r)return!1;let i=n.get(e);return i?r.forEach(o=>i.add(o)):n.set(e,r),t.delete(e),!0}class DP{constructor(n,t,r){this.bodyNode=n,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new Wue(n,t,r),this._timelineEngine=new Nue(n,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(n,t,r,i,o){const d=n+"-"+i;let f=this._triggerCache[d];if(!f){const g=[],w=r5(this._driver,o,g,[]);if(g.length)throw function Oce(e,n){return new an(3404,!1)}();f=function Rue(e,n,t){return new Lue(e,n,t)}(i,w,this._normalizer),this._triggerCache[d]=f}this._transitionEngine.registerTrigger(t,i,f)}register(n,t){this._transitionEngine.register(n,t)}destroy(n,t){this._transitionEngine.destroy(n,t)}onInsert(n,t,r,i){this._transitionEngine.insertNode(n,t,r,i)}onRemove(n,t,r,i){this._transitionEngine.removeNode(n,t,i||!1,r)}disableAnimations(n,t){this._transitionEngine.markElementAsDisabled(n,t)}process(n,t,r,i){if("@"==r.charAt(0)){const[o,d]=w9(r);this._timelineEngine.command(o,t,d,i)}else this._transitionEngine.trigger(n,t,r,i)}listen(n,t,r,i,o){if("@"==r.charAt(0)){const[d,f]=w9(r);return this._timelineEngine.listen(d,t,f,o)}return this._transitionEngine.listen(n,t,r,i,o)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let que=(()=>{class e{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let o=e.initialStylesByElement.get(t);o||e.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Nu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Nu(this._element,this._initialStyles),this._endStyles&&(Nu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(Tv(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Tv(this._element,this._endStyles),this._endStyles=null),Nu(this._element,this._initialStyles),this._state=3)}}return e.initialStylesByElement=new WeakMap,e})();function g5(e){let n=null;return e.forEach((t,r)=>{(function Jue(e){return"display"===e||"position"===e})(r)&&(n=n||new Map,n.set(r,t))}),n}class Q9{constructor(n,t,r,i){this.element=n,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(n){const t=[];return n.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(n,t,r){return n.animate(this._convertKeyframesToObject(t),r)}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&n.set(i,this._finished?r:N9(this.element,i))}),this.currentSnapshot=n}triggerCallback(n){const t="start"===n?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class ede{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}matchesElement(n,t){return!1}containsElement(n,t){return M9(n,t)}getParentElement(n){return KV(n)}query(n,t,r){return T9(n,t,r)}computeStyle(n,t,r){return window.getComputedStyle(n)[t]}animate(n,t,r,i,o,d=[]){const g={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(g.easing=o);const _=new Map,w=d.filter(V=>V instanceof Q9);(function iue(e,n){return 0===e||0===n})(r,i)&&w.forEach(V=>{V.currentSnapshot.forEach((ne,pe)=>_.set(pe,ne))});let S=function eue(e){return e.length?e[0]instanceof Map?e:e.map(n=>P9(n)):[]}(t).map(V=>$f(V));S=function aue(e,n,t){if(t.size&&n.length){let r=n[0],i=[];if(t.forEach((o,d)=>{r.has(d)||i.push(d),r.set(d,o)}),i.length)for(let o=1;o<n.length;o++){let d=n[o];i.forEach(f=>d.set(f,N9(e,f)))}}return n}(n,S,_);const k=function Que(e,n){let t=null,r=null;return Array.isArray(n)&&n.length?(t=g5(n[0]),n.length>1&&(r=g5(n[n.length-1]))):n instanceof Map&&(t=g5(n)),t||r?new que(e,t,r):null}(n,S);return new Q9(n,S,g,k)}}let tde=(()=>{class e extends JG{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:Ja.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?t8(t):t;return q9(this._renderer,null,r,"register",[i]),new nde(r,this._renderer)}}return e.\u0275fac=function(t){return new(t||e)(Nt(Lp),Nt(Rr))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac}),e})();class nde extends class tQ{}{constructor(n,t){super(),this._id=n,this._renderer=t}create(n,t){return new rde(this._id,n,t||{},this._renderer)}}class rde{constructor(n,t,r,i){this.id=n,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(n,t){return this._renderer.listen(this.element,`@@${this.id}:${n}`,t)}_command(n,...t){return q9(this._renderer,this.element,this.id,n,t)}onDone(n){this._listen("done",n)}onStart(n){this._listen("start",n)}onDestroy(n){this._listen("destroy",n)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(n){this._command("setPosition",n)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function q9(e,n,t,r,i){return e.setProperty(n,`@@${t}:${r}`,i)}const J9="@.disabled";let ide=(()=>{class e{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,d)=>{const f=d?.parentNode(o);f&&d.removeChild(f,o)}}createRenderer(t,r){const o=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let w=this._rendererCache.get(o);return w||(w=new eZ("",o,this.engine),this._rendererCache.set(o,w)),w}const d=r.id,f=r.id+"-"+this._currentId;this._currentId++,this.engine.register(f,t);const g=w=>{Array.isArray(w)?w.forEach(g):this.engine.registerTrigger(d,f,t,w.name,w)};return r.data.animation.forEach(g),new ade(this,f,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[d,f]=o;d(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return e.\u0275fac=function(t){return new(t||e)(Nt(Lp),Nt(DP),Nt(Cr))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac}),e})();class eZ{constructor(n,t,r){this.namespaceId=n,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(n,t){return this.delegate.createElement(n,t)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,t){this.delegate.appendChild(n,t),this.engine.onInsert(this.namespaceId,t,n,!1)}insertBefore(n,t,r,i=!0){this.delegate.insertBefore(n,t,r),this.engine.onInsert(this.namespaceId,t,n,i)}removeChild(n,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(n,t){return this.delegate.selectRootElement(n,t)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,t,r,i){this.delegate.setAttribute(n,t,r,i)}removeAttribute(n,t,r){this.delegate.removeAttribute(n,t,r)}addClass(n,t){this.delegate.addClass(n,t)}removeClass(n,t){this.delegate.removeClass(n,t)}setStyle(n,t,r,i){this.delegate.setStyle(n,t,r,i)}removeStyle(n,t,r){this.delegate.removeStyle(n,t,r)}setProperty(n,t,r){"@"==t.charAt(0)&&t==J9?this.disableAnimations(n,!!r):this.delegate.setProperty(n,t,r)}setValue(n,t){this.delegate.setValue(n,t)}listen(n,t,r){return this.delegate.listen(n,t,r)}disableAnimations(n,t){this.engine.disableAnimations(n,t)}}class ade extends eZ{constructor(n,t,r,i){super(t,r,i),this.factory=n,this.namespaceId=t}setProperty(n,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==J9?this.disableAnimations(n,r=void 0===r||!!r):this.engine.process(this.namespaceId,n,t.slice(1),r):this.delegate.setProperty(n,t,r)}listen(n,t,r){if("@"==t.charAt(0)){const i=function ode(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(n);let o=t.slice(1),d="";return"@"!=o.charAt(0)&&([o,d]=function sde(e){const n=e.indexOf(".");return[e.substring(0,n),e.slice(n+1)]}(o)),this.engine.listen(this.namespaceId,i,o,d,f=>{this.factory.scheduleListenerCallback(f._data||-1,r,f)})}return this.delegate.listen(n,t,r)}}let lde=(()=>{class e extends DP{constructor(t,r,i,o){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return e.\u0275fac=function(t){return new(t||e)(Nt(Rr),Nt(QV),Nt(c5),Nt(cf))},e.\u0275prov=Jt({token:e,factory:e.\u0275fac}),e})();const tZ=[{provide:JG,useClass:tde},{provide:c5,useFactory:function cde(){return new Eue}},{provide:DP,useClass:lde},{provide:Lp,useFactory:function ude(e,n,t){return new ide(e,n,t)},deps:[or,DP,Cr]}],v5=[{provide:QV,useFactory:()=>new ede},{provide:Xo,useValue:"BrowserAnimations"},...tZ],nZ=[{provide:QV,useClass:E9},{provide:Xo,useValue:"NoopAnimations"},...tZ];let dde=(()=>{class e{static withConfig(t){return{ngModule:e,providers:t.disableAnimations?nZ:v5}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({providers:v5,imports:[Sz]}),e})(),pde=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[GI,ri,GI,ri]}),e})(),Ede=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e}),e.\u0275inj=ft({imports:[GI,Zg,ri,V3,Rl,GI,ri,V3,u9]}),e})();const Ade={scriptUrl:"assets/opencv/opencv.js",wasmBinaryFile:"assets/opencv/opencv_js.wasm",usingWasm:!0};let Ide=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=vr({type:e,bootstrap:[hce]}),e.\u0275inj=ft({providers:[{provide:z8,useValue:eJ}],imports:[SZ.forRoot({echarts:()=>Promise.resolve().then(z.bind(z,2834))}),Lle,OG,Uee,EJ,dte,Rl,ZF,n2,BH,lJ,sle,cJ.forRoot(Ade),UJ,Ede,u9,D8,Mee,LG,pde,Iee,Sz,_8,mee,dce,dde]}),e})();(function iN(){L_=!1})(),cZ().bootstrapModule(Ide,{ngZoneEventCoalescing:!0}).catch(e=>console.error(e))},5845:(Ut,rt,z)=>{z.d(rt,{ZT:()=>Se});var le=function(D,P){return(le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,T){I.__proto__=T}||function(I,T){for(var A in T)Object.prototype.hasOwnProperty.call(T,A)&&(I[A]=T[A])})(D,P)};function Se(D,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function I(){this.constructor=D}le(D,P),D.prototype=null===P?Object.create(P):(I.prototype=P.prototype,new I)}},908:(Ut,rt,z)=>{z.d(rt,{ZT:()=>Se});var le=function(D,P){return(le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,T){I.__proto__=T}||function(I,T){for(var A in T)Object.prototype.hasOwnProperty.call(T,A)&&(I[A]=T[A])})(D,P)};function Se(D,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function I(){this.constructor=D}le(D,P),D.prototype=null===P?Object.create(P):(I.prototype=P.prototype,new I)}},2834:(Ut,rt,z)=>{z.r(rt),z.d(rt,{Axis:()=>Se.RD,ChartView:()=>Se.TA,ComponentModel:()=>Se.tF,ComponentView:()=>Se.Ir,List:()=>Se.aV,Model:()=>Se.Hn,PRIORITY:()=>Se.Hr,SeriesModel:()=>Se.wJ,color:()=>Se.$_,connect:()=>Se.$j,dataTool:()=>Se.Ok,dependencies:()=>Se.HO,disConnect:()=>Se.eU,disconnect:()=>Se.zP,dispose:()=>Se.B9,env:()=>Se.OB,extendChartView:()=>Se.Zy,extendComponentModel:()=>Se.tv,extendComponentView:()=>Se.Sp,extendSeriesModel:()=>Se.Zr,format:()=>Se.WU,getCoordinateSystemDimensions:()=>Se.wL,getInstanceByDom:()=>Se.JE,getInstanceById:()=>Se.rp,getMap:()=>Se.FU,graphic:()=>Se.Q,helper:()=>Se._y,init:()=>Se.S1,innerDrawElementOnCanvas:()=>Se.z$,matrix:()=>Se.pI,number:()=>Se.Rx,parseGeoJSON:()=>Se.Nu,parseGeoJson:()=>Se.pQ,registerAction:()=>Se.zl,registerCoordinateSystem:()=>Se.RS,registerLayout:()=>Se.qR,registerLoading:()=>Se.yn,registerLocale:()=>Se.I2,registerMap:()=>Se.je,registerPostInit:()=>Se.sq,registerPostUpdate:()=>Se.Br,registerPreprocessor:()=>Se.ds,registerProcessor:()=>Se.Pu,registerTheme:()=>Se.aW,registerTransform:()=>Se.rV,registerUpdateLifecycle:()=>Se.YK,registerVisual:()=>Se.Og,setCanvasCreator:()=>Se.jQ,setPlatformAPI:()=>Se.g2,throttle:()=>Se.P2,time:()=>Se.XV,use:()=>Se.D$,util:()=>Se.D5,vector:()=>Se.xr,version:()=>Se.i8,zrUtil:()=>Se.gf,zrender:()=>Se.x_});var le=z(7151),Se=z(3113),ce=z(5309),_e=z(2738),ye=z(5489),be=z(6115),we=z(9733),de=z(8442),j=Math.sin,$=Math.cos,G=Math.PI,Z=2*Math.PI,te=180/G;const Q=function(){function c(){}return c.prototype.reset=function(s){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,s||4)},c.prototype.moveTo=function(s,a){this._add("M",s,a)},c.prototype.lineTo=function(s,a){this._add("L",s,a)},c.prototype.bezierCurveTo=function(s,a,l,u,h,p){this._add("C",s,a,l,u,h,p)},c.prototype.quadraticCurveTo=function(s,a,l,u){this._add("Q",s,a,l,u)},c.prototype.arc=function(s,a,l,u,h,p){this.ellipse(s,a,l,l,0,u,h,p)},c.prototype.ellipse=function(s,a,l,u,h,p,v,m){var R,y=v-p,x=!m,C=Math.abs(y),M=(0,_e.zT)(C-Z)||(x?y>=Z:-y>=Z),E=y>0?y%Z:y%Z+Z;R=!!M||!(0,_e.zT)(C)&&E>=G==!!x;var F=s+l*$(p),U=a+u*j(p);this._start&&this._add("M",F,U);var ue=Math.round(h*te);if(M){var me=1/this._p,ve=(x?1:-1)*(Z-me);this._add("A",l,u,ue,1,+x,s+l*$(p+ve),a+u*j(p+ve)),me>.01&&this._add("A",l,u,ue,0,+x,F,U)}else{var Me=s+l*$(v),Ae=a+u*j(v);this._add("A",l,u,ue,+R,+x,Me,Ae)}},c.prototype.rect=function(s,a,l,u){this._add("M",s,a),this._add("l",l,0),this._add("l",0,u),this._add("l",-l,0),this._add("Z")},c.prototype.closePath=function(){this._d.length>0&&this._add("Z")},c.prototype._add=function(s,a,l,u,h,p,v,m,y){for(var x=[],C=this._p,M=1;M<arguments.length;M++){var E=arguments[M];if(isNaN(E))return void(this._invalid=!0);x.push(Math.round(E*C)/C)}this._d.push(s+x.join(" ")),this._start="Z"===s},c.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},c.prototype.getStr=function(){return this._str},c}();var J=z(8325),b=z(9496),Y="none",q=Math.round,W=["lineCap","miterLimit","lineJoin"],X=(0,b.map)(W,function(c){return"stroke-"+c.toLowerCase()});var B=z(5853),O="http://www.w3.org/2000/svg",D="http://www.w3.org/1999/xlink",T="ecmeta_";function A(c){return document.createElementNS(O,c)}function L(c,s,a,l,u){return{tag:c,attrs:a||{},children:l,text:u,key:s}}function oe(c,s){var a=(s=s||{}).newline?"\n":"";return function l(u){var h=u.children,p=u.tag,m=u.text;return function N(c,s){var a=[];if(s)for(var l in s){var u=s[l],h=l;!1!==u&&(!0!==u&&null!=u&&(h+='="'+u+'"'),a.push(h))}return"<"+c+" "+a.join(" ")+">"}(p,u.attrs)+("style"!==p?(0,B.F1)(m):m||"")+(h?""+a+(0,b.map)(h,function(y){return l(y)}).join(a)+a:"")+function ie(c){return"</"+c+">"}(p)}(c)}function he(c){return{zrId:c,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function se(c,s,a,l){return L("svg","root",{width:c,height:s,xmlns:O,"xmlns:xlink":D,version:"1.1",baseProfile:"full",viewBox:!!l&&"0 0 "+c+" "+s},a)}var xe=z(7247),fe=z(4593),ge=z(7899),Ce=z(3769),Te=z(4902),Ie=0;function Ee(){return Ie++}var Ve={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},ze="transform-origin";function We(c,s,a){var l=(0,b.extend)({},c.shape);(0,b.extend)(l,s),c.buildPath(a,l);var u=new Q;return u.reset((0,_e.Gk)(c)),a.rebuildPath(u,1),u.generateStr(),u.getStr()}function tt(c,s){var a=s.originX,l=s.originY;(a||l)&&(c[ze]=a+"px "+l+"px")}var st={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function Tt(c,s){var a=s.zrId+"-ani-"+s.cssAnimIdx++;return s.cssAnims[a]=c,a}function Vt(c){return(0,b.isString)(c)?Ve[c]?"cubic-bezier("+Ve[c]+")":(0,Te.H)(c)?c:"":""}function Wt(c,s,a,l){var u=c.animators,h=u.length,p=[];if(c instanceof Ce.Z){var v=function At(c,s,a){var h,p,u={};if((0,b.each)(c.shape.paths,function(m){var y=he(a.zrId);y.animation=!0,Wt(m,{},y,!0);var x=y.cssAnims,C=y.cssNodes,M=(0,b.keys)(x),E=M.length;if(E){var R=x[p=M[E-1]];for(var F in R){var U=R[F];u[F]=u[F]||{d:""},u[F].d+=U.d||""}for(var ue in C){var me=C[ue].animation;me.indexOf(p)>=0&&(h=me)}}}),h){s.d=!1;var v=Tt(u,a);return h.replace(p,v)}}(c,s,a);if(v)p.push(v);else if(!h)return}else if(!h)return;for(var m={},y=0;y<h;y++){var x=u[y],C=[x.getMaxTime()/1e3+"s"],M=Vt(x.getClip().easing),E=x.getDelay();C.push(M||"linear"),E&&C.push(E/1e3+"s"),x.getLoop()&&C.push("infinite");var R=C.join(" ");m[R]=m[R]||[R,[]],m[R][1].push(x)}function F(me){var ve=me[1],Me=ve.length,Ae={},Pe={},Ne={},He="animation-timing-function";function Ye(or,gi,bi){for(var Ii=or.getTracks(),Ya=or.getMaxTime(),po=0;po<Ii.length;po++){var aa=Ii[po];if(aa.needsAnimate()){var Xa=aa.keyframes,Sa=aa.propName;if(bi&&(Sa=bi(Sa)),Sa)for(var Ko=0;Ko<Xa.length;Ko++){var eu=Xa[Ko],ws=Math.round(eu.time/Ya*100)+"%",Cf=Vt(eu.easing),zd=eu.rawValue;((0,b.isString)(zd)||(0,b.isNumber)(zd))&&(gi[ws]=gi[ws]||{},gi[ws][Sa]=eu.rawValue,Cf&&(gi[ws][He]=Cf))}}}}for(var Qe=0;Qe<Me;Qe++)(ct=(it=ve[Qe]).targetName)?"shape"===ct&&Ye(it,Pe):!l&&Ye(it,Ae);for(var ht in Ae){var vt={};(0,fe.kY)(vt,c),(0,b.extend)(vt,Ae[ht]);var gt=(0,_e.gA)(vt),Ot=Ae[ht][He];Ne[ht]=gt?{transform:gt}:{},tt(Ne[ht],vt),Ot&&(Ne[ht][He]=Ot)}var Gt,Ft=!0;for(var ht in Pe){Ne[ht]=Ne[ht]||{};var en=!Gt;Ot=Pe[ht][He],en&&(Gt=new ge.Z);var Mn=Gt.len();Gt.reset(),Ne[ht].d=We(c,Pe[ht],Gt);var Tn=Gt.len();if(!en&&Mn!==Tn){Ft=!1;break}Ot&&(Ne[ht][He]=Ot)}if(!Ft)for(var ht in Ne)delete Ne[ht].d;if(!l)for(Qe=0;Qe<Me;Qe++){var it,ct;"style"===(ct=(it=ve[Qe]).targetName)&&Ye(it,Ne,function(Ii){return st[Ii]})}var hr,tr=(0,b.keys)(Ne),_r=!0;for(Qe=1;Qe<tr.length;Qe++){var jr=tr[Qe-1];if(Ne[jr][ze]!==Ne[tr[Qe]][ze]){_r=!1;break}hr=Ne[jr][ze]}if(_r&&hr){for(var ht in Ne)Ne[ht][ze]&&delete Ne[ht][ze];s[ze]=hr}if((0,b.filter)(tr,function(or){return(0,b.keys)(Ne[or]).length>0}).length)return Tt(Ne,a)+" "+me[0]+" both"}for(var U in m)(v=F(m[U]))&&p.push(v);if(p.length){var ue=a.zrId+"-cls-"+Ee();a.cssNodes["."+ue]={animation:p.join(",")},s.class=ue}}var kt=z(997),fn=z(3691),wn=z(2523);function Xn(c,s,a,l){var u=JSON.stringify(c),h=a.cssStyleCache[u];h||(h=a.zrId+"-cls-"+Ee(),a.cssStyleCache[u]=h,a.cssNodes["."+h+(l?":hover":"")]=c),s.class=s.class?s.class+" "+h:h}var pr=z(315),rr=Math.round;function Qt(c){return c&&(0,b.isString)(c.src)}function un(c){return c&&(0,b.isFunction)(c.toDataURL)}function Pn(c,s,a,l){(function K(c,s,a,l){var u=s.opacity??1;if(a instanceof be.ZP)c("opacity",u);else{if(function H(c){var s=c.fill;return null!=s&&s!==Y}(s)){var h=(0,_e.ut)(s.fill);c("fill",h.color);var p=null!=s.fillOpacity?s.fillOpacity*h.opacity*u:h.opacity*u;(l||p<1)&&c("fill-opacity",p)}else c("fill",Y);if(function re(c){var s=c.stroke;return null!=s&&s!==Y}(s)){var v=(0,_e.ut)(s.stroke);c("stroke",v.color);var m=s.strokeNoScale?a.getLineScale():1,y=m?(s.lineWidth||0)/m:0,x=null!=s.strokeOpacity?s.strokeOpacity*v.opacity*u:v.opacity*u,C=s.strokeFirst;if((l||1!==y)&&c("stroke-width",y),(l||C)&&c("paint-order",C?"stroke":"fill"),(l||x<1)&&c("stroke-opacity",x),s.lineDash){var M=(0,J.a)(a),E=M[0],R=M[1];E&&(R=q(R||0),c("stroke-dasharray",E.join(",")),(R||l)&&c("stroke-dashoffset",R))}else l&&c("stroke-dasharray",Y);for(var F=0;F<W.length;F++){var U=W[F];if(l||s[U]!==ye.$t[U]){var ue=s[U]||ye.$t[U];ue&&c(X[F],ue)}}}else l&&c("stroke",Y)}})(function(u,h){var p="fill"===u||"stroke"===u;p&&(0,_e.H3)(h)?mt(s,c,u,l):p&&(0,_e.R)(h)?Zt(a,c,u,l):c[u]=p&&"none"===h?"transparent":h},s,a,!1),function $e(c,s,a){var l=c.style;if((0,_e.i2)(l)){var u=(0,_e.n1)(c),h=a.shadowCache,p=h[u];if(!p){var v=c.getGlobalScale(),m=v[0],y=v[1];if(!m||!y)return;var x=l.shadowOffsetX||0,C=l.shadowOffsetY||0,M=l.shadowBlur,E=(0,_e.ut)(l.shadowColor),R=E.opacity,F=E.color,me=M/2/m+" "+M/2/y;p=a.zrId+"-s"+a.shadowIdx++,a.defs[p]=L("filter",p,{id:p,x:"-100%",y:"-100%",width:"300%",height:"300%"},[L("feDropShadow","",{dx:x/m,dy:C/y,stdDeviation:me,"flood-color":F,"flood-opacity":R})]),h[u]=p}s.filter=(0,_e.m1)(p)}}(a,c,l)}function Nn(c,s){var a=(0,pr.getElementSSRData)(s);a&&(a.each(function(l,u){null!=l&&(c[(T+u).toLowerCase()]=l+"")}),s.isSilent()&&(c[T+"silent"]="true"))}function jn(c){return(0,_e.zT)(c[0]-1)&&(0,_e.zT)(c[1])&&(0,_e.zT)(c[2])&&(0,_e.zT)(c[3]-1)}function gr(c,s,a){if(s&&(!function xr(c){return(0,_e.zT)(c[4])&&(0,_e.zT)(c[5])}(s)||!jn(s))){var l=a?10:1e4;c.transform=jn(s)?"translate("+rr(s[4]*l)/l+" "+rr(s[5]*l)/l+")":(0,_e.qV)(s)}}function Je(c,s,a){for(var l=c.points,u=[],h=0;h<l.length;h++)u.push(rr(l[h][0]*a)/a),u.push(rr(l[h][1]*a)/a);s.points=u.join(" ")}function wt(c){return!c.smooth}var Xt={circle:[function nn(c){var s=(0,b.map)(c,function(a){return"string"==typeof a?[a,a]:a});return function(a,l,u){for(var h=0;h<s.length;h++){var p=s[h],v=a[p[0]];null!=v&&(l[p[1]]=rr(v*u)/u)}}}(["cx","cy","r"])],polyline:[Je,wt],polygon:[Je,wt]};function Lt(c,s){var a=c.style,l=c.shape,u=Xt[c.type],h={},p=s.animation,v="path",m=c.style.strokePercent,y=s.compress&&(0,_e.Gk)(c)||4;if(!u||s.willUpdate||u[1]&&!u[1](l)||p&&function dt(c){for(var s=c.animators,a=0;a<s.length;a++)if("shape"===s[a].targetName)return!0;return!1}(c)||m<1){var C=!c.path||c.shapeChanged();c.path||c.createPathProxy();var M=c.path;C&&(M.beginPath(),c.buildPath(M,c.shape),c.pathUpdated());var E=M.getVersion(),R=c,F=R.__svgPathBuilder;(R.__svgPathVersion!==E||!F||m!==R.__svgPathStrokePercent)&&(F||(F=R.__svgPathBuilder=new Q),F.reset(y),M.rebuildPath(F,m),F.generateStr(),R.__svgPathVersion=E,R.__svgPathStrokePercent=m),h.d=F.getStr()}else{v=c.type;var x=Math.pow(10,y);u[0](l,h,x)}return gr(h,c.transform),Pn(h,a,c,s),Nn(h,c),s.animation&&Wt(c,h,s),s.emphasis&&function sr(c,s,a){if(!c.ignore)if(c.isSilent())Xn(l={"pointer-events":"none"},s,a,!0);else{var u=c.states.emphasis&&c.states.emphasis.style?c.states.emphasis.style:{},h=u.fill;if(!h){var p=c.style&&c.style.fill,v=c.states.select&&c.states.select.style&&c.states.select.style.fill,m=c.currentStates.indexOf("select")>=0&&v||p;m&&(h=(0,wn.liftColor)(m))}var y=u.lineWidth;y&&(y/=!u.strokeNoScale&&c.transform?c.transform[0]:1);var l={cursor:"pointer"};h&&(l.fill=h),u.stroke&&(l.stroke=u.stroke),y&&(l["stroke-width"]=y),Xn(l,s,a,!0)}}(c,h,s),L(v,c.id+"",h)}function et(c,s){return c instanceof ye.ZP?Lt(c,s):c instanceof be.ZP?function qt(c,s){var a=c.style,l=a.image;if(l&&!(0,b.isString)(l)&&(Qt(l)?l=l.src:un(l)&&(l=l.toDataURL())),l){var u=a.x||0,h=a.y||0,m={href:l,width:a.width,height:a.height};return u&&(m.x=u),h&&(m.y=h),gr(m,c.transform),Pn(m,a,c,s),Nn(m,c),s.animation&&Wt(c,m,s),L("image",c.id+"",m)}}(c,s):c instanceof de.Z?function Ze(c,s){var a=c.style,l=a.text;if(null!=l&&(l+=""),l&&!isNaN(a.x)&&!isNaN(a.y)){var u=a.font||fn.Uo,h=a.x||0,p=(0,_e.mU)(a.y||0,(0,we.Dp)(u),a.textBaseline),m={"dominant-baseline":"central","text-anchor":_e.jY[a.textAlign]||a.textAlign};if((0,kt.Y1)(a)){var y="",x=a.fontStyle,C=(0,kt.VG)(a.fontSize);if(!parseFloat(C))return;var E=a.fontWeight;y+="font-size:"+C+";font-family:"+(a.fontFamily||fn.rk)+";",x&&"normal"!==x&&(y+="font-style:"+x+";"),E&&"normal"!==E&&(y+="font-weight:"+E+";"),m.style=y}else m.style="font: "+u;return l.match(/\s/)&&(m["xml:space"]="preserve"),h&&(m.x=h),p&&(m.y=p),gr(m,c.transform),Pn(m,a,c,s),Nn(m,c),s.animation&&Wt(c,m,s),L("text",c.id+"",m,void 0,l)}}(c,s):void 0}function mt(c,s,a,l){var h,u=c[a],p={gradientUnits:u.global?"userSpaceOnUse":"objectBoundingBox"};if((0,_e.I1)(u))h="linearGradient",p.x1=u.x,p.y1=u.y,p.x2=u.x2,p.y2=u.y2;else{if(!(0,_e.gO)(u))return;h="radialGradient",p.cx=(0,b.retrieve2)(u.x,.5),p.cy=(0,b.retrieve2)(u.y,.5),p.r=(0,b.retrieve2)(u.r,.5)}for(var v=u.colorStops,m=[],y=0,x=v.length;y<x;++y){var C=100*(0,_e.Pn)(v[y].offset)+"%",E=(0,_e.ut)(v[y].color),F=E.opacity,U={offset:C};U["stop-color"]=E.color,F<1&&(U["stop-opacity"]=F),m.push(L("stop",y+"",U))}var me=oe(L(h,"",p,m)),ve=l.gradientCache,Me=ve[me];Me||(Me=l.zrId+"-g"+l.gradientIdx++,ve[me]=Me,p.id=Me,l.defs[Me]=L(h,Me,p,m)),s[a]=(0,_e.m1)(Me)}function Zt(c,s,a,l){var C,u=c.style[a],h=c.getBoundingRect(),p={},v=u.repeat,m="no-repeat"===v,y="repeat-x"===v,x="repeat-y"===v;if((0,_e.Cv)(u)){var M=u.imageWidth,E=u.imageHeight,R=void 0,F=u.image;if((0,b.isString)(F)?R=F:Qt(F)?R=F.src:un(F)&&(R=F.toDataURL()),typeof Image>"u"){var U="Image width/height must been given explictly in svg-ssr renderer.";(0,b.assert)(M,U),(0,b.assert)(E,U)}else if(null==M||null==E){var ue=function(Qe,it){if(Qe){var ct=Qe.elm,ht=M||it.width,vt=E||it.height;"pattern"===Qe.tag&&(y?(vt=1,ht/=h.width):x&&(ht=1,vt/=h.height)),Qe.attrs.width=ht,Qe.attrs.height=vt,ct&&(ct.setAttribute("width",ht),ct.setAttribute("height",vt))}},me=(0,xe.Gq)(R,null,c,function(Qe){m||ue(Pe,Qe),ue(C,Qe)});me&&me.width&&me.height&&(M=M||me.width,E=E||me.height)}C=L("image","img",{href:R,width:M,height:E}),p.width=M,p.height=E}else u.svgElement&&(C=(0,b.clone)(u.svgElement),p.width=u.svgWidth,p.height=u.svgHeight);if(C){var ve,Me;m?ve=Me=1:y?(Me=1,ve=p.width/h.width):x?(ve=1,Me=p.height/h.height):p.patternUnits="userSpaceOnUse",null!=ve&&!isNaN(ve)&&(p.width=ve),null!=Me&&!isNaN(Me)&&(p.height=Me);var Ae=(0,_e.gA)(u);Ae&&(p.patternTransform=Ae);var Pe=L("pattern","",p,[C]),Ne=oe(Pe),He=l.patternCache,Ye=He[Ne];Ye||(Ye=l.zrId+"-p"+l.patternIdx++,He[Ne]=Ye,p.id=Ye,Pe=l.defs[Ye]=L("pattern",Ye,p,[C])),s[a]=(0,_e.m1)(Ye)}}function vn(c,s,a){var l=a.clipPathCache,u=a.defs,h=l[c.id];if(!h){var p={id:h=a.zrId+"-c"+a.clipPathIdx++};l[c.id]=h,u[h]=L("clipPath",h,p,[Lt(c,a)])}s["clip-path"]=(0,_e.m1)(h)}function mn(c){return document.createTextNode(c)}function ur(c,s,a){c.insertBefore(s,a)}function Zi(c,s){c.removeChild(s)}function Li(c,s){c.appendChild(s)}function qa(c){return c.parentNode}function ea(c){return c.nextSibling}function Ea(c,s){c.textContent=s}var Kf=L("","");function Ms(c){return void 0===c}function Xs(c){return void 0!==c}function Fa(c,s,a){for(var l={},u=s;u<=a;++u){var h=c[u].key;void 0!==h&&(l[h]=u)}return l}function $s(c,s){return c.tag===s.tag&&c.key===s.key}function Aa(c){var s,a=c.children,l=c.tag;if(Xs(l)){var u=c.elm=A(l);if(sh(Kf,c),(0,b.isArray)(a))for(s=0;s<a.length;++s){var h=a[s];null!=h&&Li(u,Aa(h))}else Xs(c.text)&&!(0,b.isObject)(c.text)&&Li(u,mn(c.text))}else c.elm=mn(c.text);return c.elm}function n0(c,s,a,l,u){for(;l<=u;++l){var h=a[l];null!=h&&ur(c,Aa(h),s)}}function oh(c,s,a,l){for(;a<=l;++a){var u=s[a];null!=u&&(Xs(u.tag)?Zi(qa(u.elm),u.elm):Zi(c,u.elm))}}function sh(c,s){var a,l=s.elm,u=c&&c.attrs||{},h=s.attrs||{};if(u!==h){for(a in h){var p=h[a];u[a]!==p&&(!0===p?l.setAttribute(a,""):!1===p?l.removeAttribute(a):"style"===a?l.style.cssText=p:120!==a.charCodeAt(0)?l.setAttribute(a,p):"xmlns:xlink"===a||"xmlns"===a?l.setAttributeNS("http://www.w3.org/2000/xmlns/",a,p):58===a.charCodeAt(3)?l.setAttributeNS("http://www.w3.org/XML/1998/namespace",a,p):58===a.charCodeAt(5)?l.setAttributeNS(D,a,p):l.setAttribute(a,p))}for(a in u)a in h||l.removeAttribute(a)}}function Wl(c,s){var a=s.elm=c.elm,l=c.children,u=s.children;c!==s&&(sh(c,s),Ms(s.text)?Xs(l)&&Xs(u)?l!==u&&function Qf(c,s,a){for(var C,M,E,l=0,u=0,h=s.length-1,p=s[0],v=s[h],m=a.length-1,y=a[0],x=a[m];l<=h&&u<=m;)null==p?p=s[++l]:null==v?v=s[--h]:null==y?y=a[++u]:null==x?x=a[--m]:$s(p,y)?(Wl(p,y),p=s[++l],y=a[++u]):$s(v,x)?(Wl(v,x),v=s[--h],x=a[--m]):$s(p,x)?(Wl(p,x),ur(c,p.elm,ea(v.elm)),p=s[++l],x=a[--m]):$s(v,y)?(Wl(v,y),ur(c,v.elm,p.elm),v=s[--h],y=a[++u]):(Ms(C)&&(C=Fa(s,l,h)),Ms(M=C[y.key])||(E=s[M]).tag!==y.tag?ur(c,Aa(y),p.elm):(Wl(E,y),s[M]=void 0,ur(c,E.elm,p.elm)),y=a[++u]);(l<=h||u<=m)&&(l>h?n0(c,null==a[m+1]?null:a[m+1].elm,a,u,m):oh(c,s,l,h))}(a,l,u):Xs(u)?(Xs(c.text)&&Ea(a,""),n0(a,null,u,0,u.length-1)):Xs(l)?oh(a,l,0,l.length-1):Xs(c.text)&&Ea(a,""):c.text!==s.text&&(Xs(l)&&oh(a,l,0,l.length-1),Ea(a,s.text)))}var Rv=z(1744),cu=0;const Ov=function(){function c(s,a,l){if(this.type="svg",this.refreshHover=function(){},this.configLayer=function(){},this.storage=a,this._opts=l=(0,b.extend)({},l),this.root=s,this._id="zr"+cu++,this._oldVNode=se(l.width,l.height),s&&!l.ssr){var u=this._viewport=document.createElement("div");u.style.cssText="position:relative;overflow:hidden";var h=this._svgDom=this._oldVNode.elm=A("svg");sh(null,this._oldVNode),u.appendChild(h),s.appendChild(u)}this.resize(l.width,l.height)}return c.prototype.getType=function(){return this.type},c.prototype.getViewportRoot=function(){return this._viewport},c.prototype.getViewportRootOffset=function(){var s=this.getViewportRoot();if(s)return{offsetLeft:s.offsetLeft||0,offsetTop:s.offsetTop||0}},c.prototype.getSvgDom=function(){return this._svgDom},c.prototype.refresh=function(){if(this.root){var s=this.renderToVNode({willUpdate:!0});s.attrs.style="position:absolute;left:0;top:0;user-select:none",function zu(c,s){if($s(c,s))Wl(c,s);else{var a=c.elm,l=qa(a);Aa(s),null!==l&&(ur(l,s.elm,ea(a)),oh(l,[c],0,0))}}(this._oldVNode,s),this._oldVNode=s}},c.prototype.renderOneToVNode=function(s){return et(s,he(this._id))},c.prototype.renderToVNode=function(s){s=s||{};var a=this.storage.getDisplayList(!0),l=this._width,u=this._height,h=he(this._id);h.animation=s.animation,h.willUpdate=s.willUpdate,h.compress=s.compress,h.emphasis=s.emphasis;var p=[],v=this._bgVNode=function Lv(c,s,a,l){var u;if(a&&"none"!==a)if(u=L("rect","bg",{width:c,height:s,x:"0",y:"0"}),(0,_e.H3)(a))mt({fill:a},u.attrs,"fill",l);else if((0,_e.R)(a))Zt({style:{fill:a},dirty:b.noop,getBoundingRect:function(){return{width:c,height:s}}},u.attrs,"fill",l);else{var h=(0,_e.ut)(a),v=h.opacity;u.attrs.fill=h.color,v<1&&(u.attrs["fill-opacity"]=v)}return u}(l,u,this._backgroundColor,h);v&&p.push(v);var m=s.compress?null:this._mainVNode=L("g","main",{},[]);this._paintList(a,h,m?m.children:p),m&&p.push(m);var y=(0,b.map)((0,b.keys)(h.defs),function(M){return h.defs[M]});if(y.length&&p.push(L("defs","defs",{},y)),s.animation){var x=function ae(c,s,a){var l=(a=a||{}).newline?"\n":"",u=" {"+l,h=l+"}",p=(0,b.map)((0,b.keys)(c),function(m){return m+u+(0,b.map)((0,b.keys)(c[m]),function(y){return y+":"+c[m][y]+";"}).join(l)+h}).join(l),v=(0,b.map)((0,b.keys)(s),function(m){return"@keyframes "+m+u+(0,b.map)((0,b.keys)(s[m]),function(y){return y+u+(0,b.map)((0,b.keys)(s[m][y]),function(x){var C=s[m][y][x];return"d"===x&&(C='path("'+C+'")'),x+":"+C+";"}).join(l)+h}).join(l)+h}).join(l);return p||v?["<![CDATA[",p,v,"]]>"].join(l):""}(h.cssNodes,h.cssAnims,{newline:!0});if(x){var C=L("style","stl",{},[],x);p.push(C)}}return se(l,u,p,s.useViewBox)},c.prototype.renderToString=function(s){return oe(this.renderToVNode({animation:(0,b.retrieve2)((s=s||{}).cssAnimation,!0),emphasis:(0,b.retrieve2)(s.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:(0,b.retrieve2)(s.useViewBox,!0)}),{newline:!0})},c.prototype.setBackgroundColor=function(s){this._backgroundColor=s},c.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},c.prototype._paintList=function(s,a,l){for(var v,m,u=s.length,h=[],p=0,y=0,x=0;x<u;x++){var C=s[x];if(!C.invisible){var M=C.__clipPaths,E=M&&M.length||0,R=m&&m.length||0,F=void 0;for(F=Math.max(E-1,R-1);F>=0&&(!M||!m||M[F]!==m[F]);F--);for(var U=R-1;U>F;U--)v=h[--p-1];for(var ue=F+1;ue<E;ue++){var me={};vn(M[ue],me,a);var ve=L("g","clip-g-"+y++,me,[]);(v?v.children:l).push(ve),h[p++]=ve,v=ve}m=M;var Me=et(C,a);Me&&(v?v.children:l).push(Me)}}},c.prototype.resize=function(s,a){var l=this._opts,u=this.root,h=this._viewport;if(null!=s&&(l.width=s),null!=a&&(l.height=a),u&&h&&(h.style.display="none",s=(0,Rv.ap)(u,0,l),a=(0,Rv.ap)(u,1,l),h.style.display=""),this._width!==s||this._height!==a){if(this._width=s,this._height=a,h){var p=h.style;p.width=s+"px",p.height=a+"px"}if((0,_e.R)(this._backgroundColor))this.refresh();else{var v=this._svgDom;v&&(v.setAttribute("width",s),v.setAttribute("height",a));var m=this._bgVNode&&this._bgVNode.elm;m&&(m.setAttribute("width",s),m.setAttribute("height",a))}}},c.prototype.getWidth=function(){return this._width},c.prototype.getHeight=function(){return this._height},c.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},c.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},c.prototype.toDataURL=function(s){var a=this.renderToString(),l="data:image/svg+xml;";return s?(a=(0,_e.oF)(a))&&l+"base64,"+a:l+"charset=UTF-8,"+encodeURIComponent(a)},c}();var Rt=z(5845),ta=z(9621),zi=z(9462),dr=z(2063),Vn=z(189);const ep=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.hasSymbolVisual=!0,a}return(0,Rt.ZT)(s,c),s.prototype.getInitialData=function(a){return(0,ta.Z)(null,this,{useEncodeDefaulter:!0})},s.prototype.getLegendIcon=function(a){var l=new Vn.Z,u=(0,dr.th)("line",0,a.itemHeight/2,a.itemWidth,0,a.lineStyle.stroke,!1);l.add(u),u.setStyle(a.lineStyle);var h=this.getData().getVisual("symbol"),p=this.getData().getVisual("symbolRotate"),v="none"===h?"circle":h,m=.8*a.itemHeight,y=(0,dr.th)(v,(a.itemWidth-m)/2,(a.itemHeight-m)/2,m,m,a.itemStyle.fill);return l.add(y),y.setStyle(a.itemStyle),y.rotation=("inherit"===a.iconRotate?p:a.iconRotate||0)*Math.PI/180,y.setOrigin([a.itemWidth/2,a.itemHeight/2]),v.indexOf("empty")>-1&&(y.style.stroke=y.style.fill,y.style.fill="#fff",y.style.lineWidth=2),l},s.type="series.line",s.dependencies=["grid","polar"],s.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},s}(zi.Z);var on=z(8646),Un=z(6442),Fn=z(1096),bn=z(4372),Nv=z(7654);function kr(c,s){var a=c.mapDimensionsAll("defaultedLabel"),l=a.length;if(1===l){var u=(0,Nv.hk)(c,s,a[0]);return null!=u?u+"":null}if(l){for(var h=[],p=0;p<a.length;p++)h.push((0,Nv.hk)(c,s,a[p]));return h.join(" ")}}function wr(c,s){var a=c.mapDimensionsAll("defaultedLabel");if(!(0,b.isArray)(s))return s+"";for(var l=[],u=0;u<a.length;u++){var h=c.getDimensionIndex(a[u]);h>=0&&l.push(s[h])}return l.join(" ")}var Bn=z(2681);function an(c,s){this.parent.drift(c,s)}const Ks=function(c){function s(a,l,u,h){var p=c.call(this)||this;return p.updateData(a,l,u,h),p}return(0,Rt.ZT)(s,c),s.prototype._createSymbol=function(a,l,u,h,p){this.removeAll();var v=(0,dr.th)(a,-1,-1,2,2,null,p);v.attr({z2:100,culling:!0,scaleX:h[0]/2,scaleY:h[1]/2}),v.drift=an,this._symbolType=a,this.add(v)},s.prototype.stopSymbolAnimation=function(a){this.childAt(0).stopAnimation(null,a)},s.prototype.getSymbolType=function(){return this._symbolType},s.prototype.getSymbolPath=function(){return this.childAt(0)},s.prototype.highlight=function(){(0,bn.fD)(this.childAt(0))},s.prototype.downplay=function(){(0,bn.Mh)(this.childAt(0))},s.prototype.setZ=function(a,l){var u=this.childAt(0);u.zlevel=a,u.z=l},s.prototype.setDraggable=function(a,l){var u=this.childAt(0);u.draggable=a,u.cursor=!l&&a?"move":u.cursor},s.prototype.updateData=function(a,l,u,h){this.silent=!1;var p=a.getItemVisual(l,"symbol")||"circle",v=a.hostModel,m=s.getSymbolSize(a,l),y=p!==this._symbolType,x=h&&h.disableAnimation;if(y){var C=a.getItemVisual(l,"symbolKeepAspect");this._createSymbol(p,a,l,m,C)}else{(M=this.childAt(0)).silent=!1;var E={scaleX:m[0]/2,scaleY:m[1]/2};x?M.attr(E):on.D(M,E,v,l),(0,on.Zi)(M)}if(this._updateCommon(a,l,m,u,h),y){var M=this.childAt(0);x||(E={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:M.style.opacity}},M.scaleX=M.scaleY=0,M.style.opacity=0,on.KZ(M,E,v,l))}x&&this.childAt(0).stopAnimation("leave")},s.prototype._updateCommon=function(a,l,u,h,p){var y,x,C,M,E,R,F,U,ue,v=this.childAt(0),m=a.hostModel;if(h&&(y=h.emphasisItemStyle,x=h.blurItemStyle,C=h.selectItemStyle,M=h.focus,E=h.blurScope,F=h.labelStatesModels,U=h.hoverScale,ue=h.cursorStyle,R=h.emphasisDisabled),!h||a.hasItemOption){var me=h&&h.itemModel?h.itemModel:a.getItemModel(l),ve=me.getModel("emphasis");y=ve.getModel("itemStyle").getItemStyle(),C=me.getModel(["select","itemStyle"]).getItemStyle(),x=me.getModel(["blur","itemStyle"]).getItemStyle(),M=ve.get("focus"),E=ve.get("blurScope"),R=ve.get("disabled"),F=(0,Bn.k3)(me),U=ve.getShallow("scale"),ue=me.getShallow("cursor")}var Me=a.getItemVisual(l,"symbolRotate");v.attr("rotation",(Me||0)*Math.PI/180||0);var Ae=(0,dr.Cq)(a.getItemVisual(l,"symbolOffset"),u);Ae&&(v.x=Ae[0],v.y=Ae[1]),ue&&v.attr("cursor",ue);var Pe=a.getItemVisual(l,"style"),Ne=Pe.fill;if(v instanceof be.ZP){var He=v.style;v.useStyle((0,b.extend)({image:He.image,x:He.x,y:He.y,width:He.width,height:He.height},Pe))}else v.useStyle(v.__isEmptyBrush?(0,b.extend)({},Pe):Pe),v.style.decal=null,v.setColor(Ne,p&&p.symbolInnerColor),v.style.strokeNoScale=!0;var Ye=a.getItemVisual(l,"liftZ"),Qe=this._z2;null!=Ye?null==Qe&&(this._z2=v.z2,v.z2+=Ye):null!=Qe&&(v.z2=Qe,this._z2=null);var it=p&&p.useNameLabel;(0,Bn.ni)(v,F,{labelFetcher:m,labelDataIndex:l,defaultText:function ct(gt){return it?a.getName(gt):kr(a,gt)},inheritColor:Ne,defaultOpacity:Pe.opacity}),this._sizeX=u[0]/2,this._sizeY=u[1]/2;var ht=v.ensureState("emphasis");ht.style=y,v.ensureState("select").style=C,v.ensureState("blur").style=x;var vt=null==U||!0===U?Math.max(1.1,3/this._sizeY):isFinite(U)&&U>0?+U:1;ht.scaleX=this._sizeX*vt,ht.scaleY=this._sizeY*vt,this.setSymbolScale(1),(0,bn.k5)(this,M,E,R)},s.prototype.setSymbolScale=function(a){this.scaleX=this.scaleY=a},s.prototype.fadeOut=function(a,l,u){var h=this.childAt(0),p=(0,Fn.A)(this).dataIndex,v=u&&u.animation;if(this.silent=h.silent=!0,u&&u.fadeLabel){var m=h.getTextContent();m&&on.bX(m,{style:{opacity:0}},l,{dataIndex:p,removeOpt:v,cb:function(){h.removeTextContent()}})}else h.removeTextContent();on.bX(h,{style:{opacity:0},scaleX:0,scaleY:0},l,{dataIndex:p,cb:a,removeOpt:v})},s.getSymbolSize=function(a,l){return(0,dr.zp)(a.getItemVisual(l,"symbolSize"))},s}(Vn.Z);function Sr(c,s,a,l){return s&&!isNaN(s[0])&&!isNaN(s[1])&&!(l.isIgnore&&l.isIgnore(a))&&!(l.clipShape&&!l.clipShape.contain(s[0],s[1]))&&"none"!==c.getItemVisual(a,"symbol")}function Si(c){return null!=c&&!(0,b.isObject)(c)&&(c={isIgnore:c}),c||{}}function Fv(c){var s=c.hostModel,a=s.getModel("emphasis");return{emphasisItemStyle:a.getModel("itemStyle").getItemStyle(),blurItemStyle:s.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:s.getModel(["select","itemStyle"]).getItemStyle(),focus:a.get("focus"),blurScope:a.get("blurScope"),emphasisDisabled:a.get("disabled"),hoverScale:a.get("scale"),labelStatesModels:(0,Bn.k3)(s),cursorStyle:s.get("cursor")}}const Do=function(){function c(s){this.group=new Vn.Z,this._SymbolCtor=s||Ks}return c.prototype.updateData=function(s,a){this._progressiveEls=null,a=Si(a);var l=this.group,u=s.hostModel,h=this._data,p=this._SymbolCtor,v=a.disableAnimation,m=Fv(s),y={disableAnimation:v},x=a.getSymbolPoint||function(C){return s.getItemLayout(C)};h||l.removeAll(),s.diff(h).add(function(C){var M=x(C);if(Sr(s,M,C,a)){var E=new p(s,C,m,y);E.setPosition(M),s.setItemGraphicEl(C,E),l.add(E)}}).update(function(C,M){var E=h.getItemGraphicEl(M),R=x(C);if(Sr(s,R,C,a)){var F=s.getItemVisual(C,"symbol")||"circle",U=E&&E.getSymbolType&&E.getSymbolType();if(!E||U&&U!==F)l.remove(E),(E=new p(s,C,m,y)).setPosition(R);else{E.updateData(s,C,m,y);var ue={x:R[0],y:R[1]};v?E.attr(ue):on.D(E,ue,u)}l.add(E),s.setItemGraphicEl(C,E)}else l.remove(E)}).remove(function(C){var M=h.getItemGraphicEl(C);M&&M.fadeOut(function(){l.remove(M)},u)}).execute(),this._getSymbolPoint=x,this._data=s},c.prototype.updateLayout=function(){var s=this,a=this._data;a&&a.eachItemGraphicEl(function(l,u){var h=s._getSymbolPoint(u);l.setPosition(h),l.markRedraw()})},c.prototype.incrementalPrepareUpdate=function(s){this._seriesScope=Fv(s),this._data=null,this.group.removeAll()},c.prototype.incrementalUpdate=function(s,a,l){function u(m){m.isGroup||(m.incremental=!0,m.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[],l=Si(l);for(var h=s.start;h<s.end;h++){var p=a.getItemLayout(h);if(Sr(a,p,h,l)){var v=new this._SymbolCtor(a,h,this._seriesScope);v.traverse(u),v.setPosition(p),this.group.add(v),a.setItemGraphicEl(h,v),this._progressiveEls.push(v)}}},c.prototype.eachRendered=function(s){Un.traverseElements(this._progressiveEls||this.group,s)},c.prototype.remove=function(s){var a=this.group,l=this._data;l&&s?l.eachItemGraphicEl(function(u){u.fadeOut(function(){a.remove(u)},l.hostModel)}):a.removeAll()},c}();var Ts=z(9777);function Mo(c,s,a){var l=c.getBaseAxis(),u=c.getOtherAxis(l),h=function HC(c,s){var a=0,l=c.scale.getExtent();return"start"===s?a=l[0]:"end"===s?a=l[1]:(0,b.isNumber)(s)&&!isNaN(s)?a=s:l[0]>0?a=l[0]:l[1]<0&&(a=l[1]),a}(u,a),p=l.dim,v=u.dim,m=s.mapDimension(v),y=s.mapDimension(p),x="x"===v||"radius"===v?1:0,C=(0,b.map)(c.dimensions,function(R){return s.mapDimension(R)}),M=!1,E=s.getCalculationInfo("stackResultDimension");return(0,Ts.M)(s,C[0])&&(M=!0,C[0]=E),(0,Ts.M)(s,C[1])&&(M=!0,C[1]=E),{dataDimsForPoint:C,valueStart:h,valueAxisDim:v,baseAxisDim:p,stacked:!!M,valueDim:m,baseDim:y,baseDataOffset:x,stackedOverDimension:s.getCalculationInfo("stackedOverDimension")}}function Bv(c,s,a,l){var u=NaN;c.stacked&&(u=a.get(a.getCalculationInfo("stackedOverDimension"),l)),isNaN(u)&&(u=c.valueStart);var h=c.baseDataOffset,p=[];return p[h]=a.get(c.baseDim,l),p[1-h]=u,s.dataToPoint(p)}var uu=z(545),tp=z(9869),An=z(2846),Es=z(7315),_l=Math.min,Pc=Math.max;function yl(c,s){return isNaN(c)||isNaN(s)}function np(c,s,a,l,u,h,p,v,m){for(var y,x,C,M,E,R,F=a,U=0;U<l;U++){var ue=s[2*F],me=s[2*F+1];if(F>=u||F<0)break;if(yl(ue,me)){if(m){F+=h;continue}break}if(F===a)c[h>0?"moveTo":"lineTo"](ue,me),C=ue,M=me;else{var ve=ue-y,Me=me-x;if(ve*ve+Me*Me<.5){F+=h;continue}if(p>0){for(var Ae=F+h,Pe=s[2*Ae],Ne=s[2*Ae+1];Pe===ue&&Ne===me&&U<l;)U++,Pe=s[2*(Ae+=h)],Ne=s[2*Ae+1],ve=(ue=s[2*(F+=h)])-y,Me=(me=s[2*F+1])-x;var He=U+1;if(m)for(;yl(Pe,Ne)&&He<l;)He++,Pe=s[2*(Ae+=h)],Ne=s[2*Ae+1];var Ye=.5,Qe=0,it=0,ct=void 0,ht=void 0;if(He>=l||yl(Pe,Ne))E=ue,R=me;else{Qe=Pe-y,it=Ne-x;var vt=ue-y,gt=Pe-ue,Ot=me-x,Gt=Ne-me,Ft=void 0,en=void 0;if("x"===v){var Mn=Qe>0?1:-1;E=ue-Mn*(Ft=Math.abs(vt))*p,R=me,ct=ue+Mn*(en=Math.abs(gt))*p,ht=me}else if("y"===v){var Tn=it>0?1:-1;E=ue,R=me-Tn*(Ft=Math.abs(Ot))*p,ct=ue,ht=me+Tn*(en=Math.abs(Gt))*p}else Ft=Math.sqrt(vt*vt+Ot*Ot),E=ue-Qe*p*(1-(Ye=(en=Math.sqrt(gt*gt+Gt*Gt))/(en+Ft))),R=me-it*p*(1-Ye),ht=me+it*p*Ye,ct=_l(ct=ue+Qe*p*Ye,Pc(Pe,ue)),ht=_l(ht,Pc(Ne,me)),ct=Pc(ct,_l(Pe,ue)),R=me-(it=(ht=Pc(ht,_l(Ne,me)))-me)*Ft/en,E=_l(E=ue-(Qe=ct-ue)*Ft/en,Pc(y,ue)),R=_l(R,Pc(x,me)),ct=ue+(Qe=ue-(E=Pc(E,_l(y,ue))))*en/Ft,ht=me+(it=me-(R=Pc(R,_l(x,me))))*en/Ft}c.bezierCurveTo(C,M,E,R,ue,me),C=ct,M=ht}else c.lineTo(ue,me)}y=ue,x=me,F+=h}return U}var Vo=function c(){this.smooth=0,this.smoothConstraint=!0},Di=function(c){function s(a){var l=c.call(this,a)||this;return l.type="ec-polyline",l}return(0,Rt.ZT)(s,c),s.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},s.prototype.getDefaultShape=function(){return new Vo},s.prototype.buildPath=function(a,l){var u=l.points,h=0,p=u.length/2;if(l.connectNulls){for(;p>0&&yl(u[2*p-2],u[2*p-1]);p--);for(;h<p&&yl(u[2*h],u[2*h+1]);h++);}for(;h<p;)h+=np(a,u,h,p,p,1,l.smooth,l.smoothMonotone,l.connectNulls)+1},s.prototype.getPointOn=function(a,l){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var v,m,h=this.path.data,p=ge.Z.CMD,y="x"===l,x=[],C=0;C<h.length;){var E=void 0,R=void 0,F=void 0,U=void 0,ue=void 0,me=void 0,ve=void 0;switch(h[C++]){case p.M:v=h[C++],m=h[C++];break;case p.L:if(E=h[C++],R=h[C++],(ve=y?(a-v)/(E-v):(a-m)/(R-m))<=1&&ve>=0){var Me=y?(R-m)*ve+m:(E-v)*ve+v;return y?[a,Me]:[Me,a]}v=E,m=R;break;case p.C:E=h[C++],R=h[C++],F=h[C++],U=h[C++],ue=h[C++],me=h[C++];var Ae=y?(0,Es.kD)(v,E,F,ue,a,x):(0,Es.kD)(m,R,U,me,a,x);if(Ae>0)for(var Pe=0;Pe<Ae;Pe++){var Ne=x[Pe];if(Ne<=1&&Ne>=0)return Me=y?(0,Es.af)(m,R,U,me,Ne):(0,Es.af)(v,E,F,ue,Ne),y?[a,Me]:[Me,a]}v=ue,m=me}}},s}(ye.ZP),GC=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,Rt.ZT)(s,c),s}(Vo),r0=function(c){function s(a){var l=c.call(this,a)||this;return l.type="ec-polygon",l}return(0,Rt.ZT)(s,c),s.prototype.getDefaultShape=function(){return new GC},s.prototype.buildPath=function(a,l){var u=l.points,h=l.stackedOnPoints,p=0,v=u.length/2,m=l.smoothMonotone;if(l.connectNulls){for(;v>0&&yl(u[2*v-2],u[2*v-1]);v--);for(;p<v&&yl(u[2*p],u[2*p+1]);p++);}for(;p<v;){var y=np(a,u,p,v,v,1,l.smooth,m,l.connectNulls);np(a,h,p+y-1,y,v,-1,l.stackedOnSmooth,m,l.connectNulls),p+=y+1,a.closePath()}},s}(ye.ZP),na=z(7136),Jt=z(7952),hs=z(8801),ft=z(10);function Ba(c,s,a,l,u){var h=c.getArea(),p=h.x,v=h.y,m=h.width,y=h.height,x=a.get(["lineStyle","width"])||2;p-=x/2,v-=x/2,m+=x,y+=x,m=Math.ceil(m),p!==Math.floor(p)&&(p=Math.floor(p),m++);var C=new Jt.Z({shape:{x:p,y:v,width:m,height:y}});if(s){var M=c.getBaseAxis(),E=M.isHorizontal(),R=M.inverse;E?(R&&(C.shape.x+=m),C.shape.width=0):(R||(C.shape.y+=y),C.shape.height=0);var F=(0,b.isFunction)(u)?function(U){u(U,C)}:null;on.KZ(C,{shape:{width:m,height:y,x:p,y:v}},a,null,l,F)}return C}function lh(c,s,a){var l=c.getArea(),u=(0,ft.NM)(l.r0,1),h=(0,ft.NM)(l.r,1),p=new hs.C({shape:{cx:(0,ft.NM)(c.cx,1),cy:(0,ft.NM)(c.cy,1),r0:u,r:h,startAngle:l.startAngle,endAngle:l.endAngle,clockwise:l.clockwise}});return s&&("angle"===c.getBaseAxis().dim?p.shape.endAngle=l.startAngle:p.shape.r=u,on.KZ(p,{shape:{endAngle:l.endAngle,r:h}},a)),p}function Rc(c,s,a,l,u){return c?"polar"===c.type?lh(c,s,a):"cartesian2d"===c.type?Ba(c,s,a,l,u):null:null}function bl(c,s){return c.type===s}var Ia=z(1755);function rp(c,s){if(c.length===s.length){for(var a=0;a<c.length;a++)if(c[a]!==s[a])return;return!0}}function Uu(c){for(var s=1/0,a=1/0,l=-1/0,u=-1/0,h=0;h<c.length;){var p=c[h++],v=c[h++];isNaN(p)||(s=Math.min(p,s),l=Math.max(p,l)),isNaN(v)||(a=Math.min(v,a),u=Math.max(v,u))}return[[s,a],[l,u]]}function Gu(c,s){var a=Uu(c),l=a[0],u=a[1],h=Uu(s),p=h[0],v=h[1];return Math.max(Math.abs(l[0]-p[0]),Math.abs(l[1]-p[1]),Math.abs(u[0]-v[0]),Math.abs(u[1]-v[1]))}function ch(c){return b.isNumber(c)?c:c?.5:0}function ar(c,s,a,l){var u=s.getBaseAxis(),h="x"===u.dim||"radius"===u.dim?0:1,p=[],v=0,m=[],y=[],x=[],C=[];if(l){for(v=0;v<c.length;v+=2)!isNaN(c[v])&&!isNaN(c[v+1])&&C.push(c[v],c[v+1]);c=C}for(v=0;v<c.length-2;v+=2)switch(x[0]=c[v+2],x[1]=c[v+3],y[0]=c[v],y[1]=c[v+1],p.push(y[0],y[1]),a){case"end":m[h]=x[h],m[1-h]=y[1-h],p.push(m[0],m[1]);break;case"middle":var E=[];m[h]=E[h]=(y[h]+x[h])/2,m[1-h]=y[1-h],E[1-h]=x[1-h],p.push(m[0],m[1]),p.push(E[0],E[1]);break;default:m[h]=y[h],m[1-h]=x[1-h],p.push(m[0],m[1])}return p.push(c[v++],c[v++]),p}function Lc(c,s){return isNaN(c)||isNaN(s)}function Ho(c,s){return[c[2*s],c[2*s+1]]}function ju(c){if(c.get(["endLabel","show"]))return!0;for(var s=0;s<bn.L1.length;s++)if(c.get([bn.L1[s],"endLabel","show"]))return!0;return!1}function Ja(c,s,a,l){if(bl(s,"cartesian2d")){var u=l.getModel("endLabel"),h=u.get("valueAnimation"),p=l.getData(),v={lastFrameIndex:0},m=ju(l)?function(E,R){c._endLabelOnDuring(E,R,p,v,h,u,s)}:null,y=s.getBaseAxis().isHorizontal(),x=Ba(s,a,l,function(){var E=c._endLabel;E&&a&&null!=v.originalX&&E.attr({x:v.originalX,y:v.originalY})},m);if(!l.get("clip",!0)){var C=x.shape,M=Math.max(C.width,C.height);y?(C.y-=M,C.height+=2*M):(C.x-=M,C.width+=2*M)}return m&&m(1,x),x}return lh(s,a,l)}const Hv=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,Rt.ZT)(s,c),s.prototype.init=function(){var a=new Vn.Z,l=new Do;this.group.add(l.group),this._symbolDraw=l,this._lineGroup=a},s.prototype.render=function(a,l,u){var h=this,p=a.coordinateSystem,v=this.group,m=a.getData(),y=a.getModel("lineStyle"),x=a.getModel("areaStyle"),C=m.getLayout("points")||[],M="polar"===p.type,E=this._coordSys,R=this._symbolDraw,F=this._polyline,U=this._polygon,ue=this._lineGroup,me=!l.ssr&&a.get("animation"),ve=!x.isEmpty(),Me=x.get("origin"),Ae=Mo(p,m,Me),Pe=ve&&function Vv(c,s,a){if(!a.valueDim)return[];for(var l=s.count(),u=(0,uu.o)(2*l),h=0;h<l;h++){var p=Bv(a,c,s,h);u[2*h]=p[0],u[2*h+1]=p[1]}return u}(p,m,Ae),Ne=a.get("showSymbol"),He=a.get("connectNulls"),Ye=Ne&&!M&&function zo(c,s,a){var l=c.get("showAllSymbol"),u="auto"===l;if(!l||u){var h=a.getAxesByScale("ordinal")[0];if(h&&(!u||!function Wu(c,s){var a=c.getExtent(),l=Math.abs(a[1]-a[0])/c.scale.count();isNaN(l)&&(l=0);for(var u=s.count(),h=Math.max(1,Math.round(u/5)),p=0;p<u;p+=h)if(1.5*Ks.getSymbolSize(s,p)[c.isHorizontal()?1:0]>l)return!1;return!0}(h,s))){var p=s.mapDimension(h.dim),v={};return b.each(h.getViewLabels(),function(m){var y=h.scale.getRawOrdinalNumber(m.tickValue);v[y]=1}),function(m){return!v.hasOwnProperty(s.get(p,m))}}}}(a,m,p),Qe=this._data;Qe&&Qe.eachItemGraphicEl(function(pi,ni){pi.__temp&&(v.remove(pi),Qe.setItemGraphicEl(ni,null))}),Ne||R.remove(),v.add(ue);var ct,it=!M&&a.get("step");p&&p.getArea&&a.get("clip",!0)&&(null!=(ct=p.getArea()).width?(ct.x-=.1,ct.y-=.1,ct.width+=.2,ct.height+=.2):ct.r0&&(ct.r0-=.5,ct.r+=.5)),this._clipShapeForSymbol=ct;var ht=function du(c,s,a){var l=c.getVisual("visualMeta");if(l&&l.length&&c.count()&&"cartesian2d"===s.type){for(var u,h,p=l.length-1;p>=0;p--){var v=c.getDimensionInfo(l[p].dimension);if("x"===(u=v&&v.coordDim)||"y"===u){h=l[p];break}}if(h){var m=s.getAxis(u),y=b.map(h.stops,function(ve){return{coord:m.toGlobalCoord(m.dataToCoord(ve.value)),color:ve.color}}),x=y.length,C=h.outerColors.slice();x&&y[0].coord>y[x-1].coord&&(y.reverse(),C.reverse());var M=function uh(c,s){var u,h,a=[],l=c.length;function p(x,C,M){var E=x.coord;return{coord:M,color:(0,wn.lerp)((M-E)/(C.coord-E),[x.color,C.color])}}for(var v=0;v<l;v++){var m=c[v],y=m.coord;if(y<0)u=m;else{if(y>s){h?a.push(p(h,m,s)):u&&a.push(p(u,m,0),p(u,m,s));break}u&&(a.push(p(u,m,0)),u=null),a.push(m),h=m}}return a}(y,"x"===u?a.getWidth():a.getHeight()),E=M.length;if(!E&&x)return y[0].coord<0?C[1]?C[1]:y[x-1].color:C[0]?C[0]:y[0].color;var F=M[0].coord-10,U=M[E-1].coord+10,ue=U-F;if(ue<.001)return"transparent";b.each(M,function(ve){ve.offset=(ve.coord-F)/ue}),M.push({offset:E?M[E-1].offset:.5,color:C[1]||"transparent"}),M.unshift({offset:E?M[0].offset:.5,color:C[0]||"transparent"});var me=new tp.Z(0,0,0,0,M,!0);return me[u]=F,me[u+"2"]=U,me}}}(m,p,u)||m.getVisual("style")[m.getVisual("drawType")];if(F&&E.type===p.type&&it===this._step){ve&&!U?U=this._newPolygon(C,Pe):U&&!ve&&(ue.remove(U),U=this._polygon=null),M||this._initOrUpdateEndLabel(a,p,(0,Ia.Lz)(ht));var vt=ue.getClipPath();if(vt){var gt=Ja(this,p,!1,a);on.KZ(vt,{shape:gt.shape},a)}else ue.setClipPath(Ja(this,p,!0,a));Ne&&R.updateData(m,{isIgnore:Ye,clipShape:ct,disableAnimation:!0,getSymbolPoint:function(pi){return[C[2*pi],C[2*pi+1]]}}),(!rp(this._stackedOnPoints,Pe)||!rp(this._points,C))&&(me?this._doUpdateAnimation(m,Pe,p,u,it,Me,He):(it&&(C=ar(C,p,it,He),Pe&&(Pe=ar(Pe,p,it,He))),F.setShape({points:C}),U&&U.setShape({points:C,stackedOnPoints:Pe})))}else Ne&&R.updateData(m,{isIgnore:Ye,clipShape:ct,disableAnimation:!0,getSymbolPoint:function(pi){return[C[2*pi],C[2*pi+1]]}}),me&&this._initSymbolLabelAnimation(m,p,ct),it&&(C=ar(C,p,it,He),Pe&&(Pe=ar(Pe,p,it,He))),F=this._newPolyline(C),ve?U=this._newPolygon(C,Pe):U&&(ue.remove(U),U=this._polygon=null),M||this._initOrUpdateEndLabel(a,p,(0,Ia.Lz)(ht)),ue.setClipPath(Ja(this,p,!0,a));var Ot=a.getModel("emphasis"),Gt=Ot.get("focus"),Ft=Ot.get("blurScope"),en=Ot.get("disabled");F.useStyle(b.defaults(y.getLineStyle(),{fill:"none",stroke:ht,lineJoin:"bevel"})),(0,bn.WO)(F,a,"lineStyle"),F.style.lineWidth>0&&"bolder"===a.get(["emphasis","lineStyle","width"])&&(F.getState("emphasis").style.lineWidth=+F.style.lineWidth+1),(0,Fn.A)(F).seriesIndex=a.seriesIndex,(0,bn.k5)(F,Gt,Ft,en);var Tn=ch(a.get("smooth")),tr=a.get("smoothMonotone");if(F.setShape({smooth:Tn,smoothMonotone:tr,connectNulls:He}),U){var _r=m.getCalculationInfo("stackedOnSeries"),hr=0;U.useStyle(b.defaults(x.getAreaStyle(),{fill:ht,opacity:.7,lineJoin:"bevel",decal:m.getVisual("style").decal})),_r&&(hr=ch(_r.get("smooth"))),U.setShape({smooth:Tn,stackedOnSmooth:hr,smoothMonotone:tr,connectNulls:He}),(0,bn.WO)(U,a,"areaStyle"),(0,Fn.A)(U).seriesIndex=a.seriesIndex,(0,bn.k5)(U,Gt,Ft,en)}var jr=function(pi){h._changePolyState(pi)};m.eachItemGraphicEl(function(pi){pi&&(pi.onHoverStateChange=jr)}),this._polyline.onHoverStateChange=jr,this._data=m,this._coordSys=p,this._stackedOnPoints=Pe,this._points=C,this._step=it,this._valueOrigin=Me,a.get("triggerLineEvent")&&(this.packEventData(a,F),U&&this.packEventData(a,U))},s.prototype.packEventData=function(a,l){(0,Fn.A)(l).eventData={componentType:"series",componentSubType:"line",componentIndex:a.componentIndex,seriesIndex:a.seriesIndex,seriesName:a.name,seriesType:"line"}},s.prototype.highlight=function(a,l,u,h){var p=a.getData(),v=An.gO(p,h);if(this._changePolyState("emphasis"),!(v instanceof Array)&&null!=v&&v>=0){var m=p.getLayout("points"),y=p.getItemGraphicEl(v);if(!y){var x=m[2*v],C=m[2*v+1];if(isNaN(x)||isNaN(C)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(x,C))return;var M=a.get("zlevel")||0,E=a.get("z")||0;(y=new Ks(p,v)).x=x,y.y=C,y.setZ(M,E);var R=y.getSymbolPath().getTextContent();R&&(R.zlevel=M,R.z=E,R.z2=this._polyline.z2+1),y.__temp=!0,p.setItemGraphicEl(v,y),y.stopSymbolAnimation(!0),this.group.add(y)}y.highlight()}else na.Z.prototype.highlight.call(this,a,l,u,h)},s.prototype.downplay=function(a,l,u,h){var p=a.getData(),v=An.gO(p,h);if(this._changePolyState("normal"),null!=v&&v>=0){var m=p.getItemGraphicEl(v);m&&(m.__temp?(p.setItemGraphicEl(v,null),this.group.remove(m)):m.downplay())}else na.Z.prototype.downplay.call(this,a,l,u,h)},s.prototype._changePolyState=function(a){var l=this._polygon;(0,bn.Gl)(this._polyline,a),l&&(0,bn.Gl)(l,a)},s.prototype._newPolyline=function(a){var l=this._polyline;return l&&this._lineGroup.remove(l),l=new Di({shape:{points:a},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(l),this._polyline=l,l},s.prototype._newPolygon=function(a,l){var u=this._polygon;return u&&this._lineGroup.remove(u),u=new r0({shape:{points:a,stackedOnPoints:l},segmentIgnoreThreshold:2}),this._lineGroup.add(u),this._polygon=u,u},s.prototype._initSymbolLabelAnimation=function(a,l,u){var h,p,v=l.getBaseAxis(),m=v.inverse;"cartesian2d"===l.type?(h=v.isHorizontal(),p=!1):"polar"===l.type&&(h="angle"===v.dim,p=!0);var y=a.hostModel,x=y.get("animationDuration");b.isFunction(x)&&(x=x(null));var C=y.get("animationDelay")||0,M=b.isFunction(C)?C(null):C;a.eachItemGraphicEl(function(E,R){var F=E;if(F){var ue=void 0,me=void 0,ve=void 0;if(u)if(p){var Me=u,Ae=l.pointToCoord([E.x,E.y]);h?(ue=Me.startAngle,me=Me.endAngle,ve=-Ae[1]/180*Math.PI):(ue=Me.r0,me=Me.r,ve=Ae[0])}else h?(ue=u.x,me=u.x+u.width,ve=E.x):(ue=u.y+u.height,me=u.y,ve=E.y);var Ne=me===ue?0:(ve-ue)/(me-ue);m&&(Ne=1-Ne);var He=b.isFunction(C)?C(R):x*Ne+M,Ye=F.getSymbolPath(),Qe=Ye.getTextContent();F.attr({scaleX:0,scaleY:0}),F.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:He}),Qe&&Qe.animateFrom({style:{opacity:0}},{duration:300,delay:He}),Ye.disableLabelAnimation=!0}})},s.prototype._initOrUpdateEndLabel=function(a,l,u){var h=a.getModel("endLabel");if(ju(a)){var p=a.getData(),v=this._polyline,m=p.getLayout("points");if(!m)return v.removeTextContent(),void(this._endLabel=null);var y=this._endLabel;y||((y=this._endLabel=new kt.ZP({z2:200})).ignoreClip=!0,v.setTextContent(this._endLabel),v.disableLabelAnimation=!0);var x=function Qs(c){for(var s=c.length/2;s>0&&Lc(c[2*s-2],c[2*s-1]);s--);return s-1}(m);x>=0&&((0,Bn.ni)(v,(0,Bn.k3)(a,"endLabel"),{inheritColor:u,labelFetcher:a,labelDataIndex:x,defaultText:function(C,M,E){return null!=E?wr(p,E):kr(p,C)},enableTextSetter:!0},function Oi(c,s){var a=s.getBaseAxis(),l=a.isHorizontal(),u=a.inverse,h=l?u?"right":"left":"center",p=l?"middle":u?"top":"bottom";return{normal:{align:c.get("align")||h,verticalAlign:c.get("verticalAlign")||p}}}(h,l)),v.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},s.prototype._endLabelOnDuring=function(a,l,u,h,p,v,m){var y=this._endLabel,x=this._polyline;if(y){a<1&&null==h.originalX&&(h.originalX=y.x,h.originalY=y.y);var C=u.getLayout("points"),M=u.hostModel,E=M.get("connectNulls"),R=v.get("precision"),F=v.get("distance")||0,U=m.getBaseAxis(),ue=U.isHorizontal(),me=U.inverse,ve=l.shape,Me=me?ue?ve.x:ve.y+ve.height:ue?ve.x+ve.width:ve.y,Ae=(ue?F:0)*(me?-1:1),Pe=(ue?0:-F)*(me?-1:1),Ne=ue?"x":"y",He=function zv(c,s,a){for(var h,p,l=c.length/2,u="x"===a?0:1,v=0,m=-1,y=0;y<l;y++)if(p=c[2*y+u],!isNaN(p)&&!isNaN(c[2*y+1-u])){if(0===y){h=p;continue}if(h<=s&&p>=s||h>=s&&p<=s){m=y;break}v=y,h=p}return{range:[v,m],t:(s-h)/(p-h)}}(C,Me,Ne),Ye=He.range,Qe=Ye[1]-Ye[0],it=void 0;if(Qe>=1){if(Qe>1&&!E){var ct=Ho(C,Ye[0]);y.attr({x:ct[0]+Ae,y:ct[1]+Pe}),p&&(it=M.getRawValue(Ye[0]))}else{(ct=x.getPointOn(Me,Ne))&&y.attr({x:ct[0]+Ae,y:ct[1]+Pe});var ht=M.getRawValue(Ye[0]),vt=M.getRawValue(Ye[1]);p&&(it=An.pk(u,R,ht,vt,He.t))}h.lastFrameIndex=Ye[0]}else{var gt=1===a||h.lastFrameIndex>0?Ye[0]:0;ct=Ho(C,gt),p&&(it=M.getRawValue(gt)),y.attr({x:ct[0]+Ae,y:ct[1]+Pe})}if(p){var Ot=(0,Bn.qA)(y);"function"==typeof Ot.setLabelText&&Ot.setLabelText(it)}}},s.prototype._doUpdateAnimation=function(a,l,u,h,p,v,m){var y=this._polyline,x=this._polygon,C=a.hostModel,M=function UC(c,s,a,l,u,h,p,v){for(var m=function ml(c,s){var a=[];return s.diff(c).add(function(l){a.push({cmd:"+",idx:l})}).update(function(l,u){a.push({cmd:"=",idx:u,idx1:l})}).remove(function(l){a.push({cmd:"-",idx:l})}).execute(),a}(c,s),y=[],x=[],C=[],M=[],E=[],R=[],F=[],U=Mo(u,s,p),ue=c.getLayout("points")||[],me=s.getLayout("points")||[],ve=0;ve<m.length;ve++){var Me=m[ve],Ae=!0,Pe=void 0,Ne=void 0;switch(Me.cmd){case"=":var He=ue[Pe=2*Me.idx],Ye=ue[Pe+1],Qe=me[Ne=2*Me.idx1],it=me[Ne+1];(isNaN(He)||isNaN(Ye))&&(He=Qe,Ye=it),y.push(He,Ye),x.push(Qe,it),C.push(a[Pe],a[Pe+1]),M.push(l[Ne],l[Ne+1]),F.push(s.getRawIndex(Me.idx1));break;case"+":var ct=Me.idx,ht=U.dataDimsForPoint,vt=u.dataToPoint([s.get(ht[0],ct),s.get(ht[1],ct)]);Ne=2*ct,y.push(vt[0],vt[1]),x.push(me[Ne],me[Ne+1]);var gt=Bv(U,u,s,ct);C.push(gt[0],gt[1]),M.push(l[Ne],l[Ne+1]),F.push(s.getRawIndex(ct));break;case"-":Ae=!1}Ae&&(E.push(Me),R.push(R.length))}R.sort(function(jr,pi){return F[jr]-F[pi]});var Ot=y.length,Gt=(0,uu.o)(Ot),Ft=(0,uu.o)(Ot),en=(0,uu.o)(Ot),Mn=(0,uu.o)(Ot),Tn=[];for(ve=0;ve<R.length;ve++){var tr=R[ve],_r=2*ve,hr=2*tr;Gt[_r]=y[hr],Gt[_r+1]=y[hr+1],Ft[_r]=x[hr],Ft[_r+1]=x[hr+1],en[_r]=C[hr],en[_r+1]=C[hr+1],Mn[_r]=M[hr],Mn[_r+1]=M[hr+1],Tn[ve]=E[tr]}return{current:Gt,next:Ft,stackedOnCurrent:en,stackedOnNext:Mn,status:Tn}}(this._data,a,this._stackedOnPoints,l,this._coordSys,0,this._valueOrigin),E=M.current,R=M.stackedOnCurrent,F=M.next,U=M.stackedOnNext;if(p&&(E=ar(M.current,u,p,m),R=ar(M.stackedOnCurrent,u,p,m),F=ar(M.next,u,p,m),U=ar(M.stackedOnNext,u,p,m)),Gu(E,F)>3e3||x&&Gu(R,U)>3e3)return y.stopAnimation(),y.setShape({points:F}),void(x&&(x.stopAnimation(),x.setShape({points:F,stackedOnPoints:U})));y.shape.__points=M.current,y.shape.points=E;var ue={shape:{points:F}};M.current!==E&&(ue.shape.__points=M.next),y.stopAnimation(),on.D(y,ue,C),x&&(x.setShape({points:E,stackedOnPoints:R}),x.stopAnimation(),on.D(x,{shape:{stackedOnPoints:U}},C),y.shape.points!==x.shape.points&&(x.shape.points=y.shape.points));for(var me=[],ve=M.status,Me=0;Me<ve.length;Me++)if("="===ve[Me].cmd){var Pe=a.getItemGraphicEl(ve[Me].idx1);Pe&&me.push({el:Pe,ptIdx:Me})}y.animators&&y.animators.length&&y.animators[0].during(function(){x&&x.dirtyShape();for(var Ne=y.shape.__points,He=0;He<me.length;He++){var Ye=me[He].el,Qe=2*me[He].ptIdx;Ye.x=Ne[Qe],Ye.y=Ne[Qe+1],Ye.markRedraw()}})},s.prototype.remove=function(a){var l=this.group,u=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),u&&u.eachItemGraphicEl(function(h,p){h.__temp&&(l.remove(h),u.setItemGraphicEl(p,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},s.type="line",s}(na.Z);var qs=z(4325);function ti(c,s){return{seriesType:c,plan:(0,qs.Z)(),reset:function(a){var l=a.getData(),u=a.coordinateSystem,p=s||a.pipelineContext.large;if(u){var v=(0,b.map)(u.dimensions,function(E){return l.mapDimension(E)}).slice(0,2),m=v.length,y=l.getCalculationInfo("stackResultDimension");(0,Ts.M)(l,v[0])&&(v[0]=y),(0,Ts.M)(l,v[1])&&(v[1]=y);var x=l.getStore(),C=l.getDimensionIndex(v[0]),M=l.getDimensionIndex(v[1]);return m&&{progress:function(E,R){for(var U=p&&(0,uu.o)((E.end-E.start)*m),ue=[],me=[],ve=E.start,Me=0;ve<E.end;ve++){var Ae=void 0;if(1===m){var Pe=x.get(C,ve);Ae=u.dataToPoint(Pe,null,me)}else ue[0]=x.get(C,ve),ue[1]=x.get(M,ve),Ae=u.dataToPoint(ue,null,me);p?(U[Me++]=Ae[0],U[Me++]=Ae[1]):R.setItemLayout(ve,Ae.slice())}p&&R.setLayout("points",U)}}}}}}var Zu={average:function(c){for(var s=0,a=0,l=0;l<c.length;l++)isNaN(c[l])||(s+=c[l],a++);return 0===a?NaN:s/a},sum:function(c){for(var s=0,a=0;a<c.length;a++)s+=c[a]||0;return s},max:function(c){for(var s=-1/0,a=0;a<c.length;a++)c[a]>s&&(s=c[a]);return isFinite(s)?s:NaN},min:function(c){for(var s=1/0,a=0;a<c.length;a++)c[a]<s&&(s=c[a]);return isFinite(s)?s:NaN},minmax:function(c){for(var s=-1/0,a=-1/0,l=0;l<c.length;l++){var u=c[l],h=Math.abs(u);h>s&&(s=h,a=u)}return isFinite(a)?a:NaN},nearest:function(c){return c[0]}},dh=function(c){return Math.round(c.length/2)};function To(c){return{seriesType:c,reset:function(s,a,l){var u=s.getData(),h=s.get("sampling"),p=s.coordinateSystem,v=u.count();if(v>10&&"cartesian2d"===p.type&&h){var m=p.getBaseAxis(),y=p.getOtherAxis(m),x=m.getExtent(),C=l.getDevicePixelRatio(),M=Math.abs(x[1]-x[0])*(C||1),E=Math.round(v/M);if(isFinite(E)&&E>1){"lttb"===h&&s.setData(u.lttbDownSample(u.mapDimension(y.dim),1/E));var R=void 0;(0,b.isString)(h)?R=Zu[h]:(0,b.isFunction)(h)&&(R=h),R&&s.setData(u.downSample(u.mapDimension(y.dim),1/E,R,dh))}}}}}var uo=z(3236),jl=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.getInitialData=function(a,l){return(0,ta.Z)(null,this,{useEncodeDefaulter:!0})},s.prototype.getMarkerPosition=function(a,l,u){var h=this.coordinateSystem;if(h&&h.clampData){var p=h.clampData(a),v=h.dataToPoint(p);if(u)(0,b.each)(h.getAxes(),function(M,E){if("category"===M.type&&null!=l){var R=M.getTicksCoords(),F=M.getTickModel().get("alignWithLabel"),U=p[E],ue="x1"===l[E]||"y1"===l[E];if(ue&&!F&&(U+=1),R.length<2)return;if(2===R.length)return void(v[E]=M.toGlobalCoord(M.getExtent()[ue?1:0]));for(var me=void 0,ve=void 0,Me=1,Ae=0;Ae<R.length;Ae++){var Pe=R[Ae].coord,Ne=Ae===R.length-1?R[Ae-1].tickValue+Me:R[Ae].tickValue;if(Ne===U){ve=Pe;break}if(Ne<U)me=Pe;else if(null!=me&&Ne>U){ve=(Pe+me)/2;break}1===Ae&&(Me=Ne-R[0].tickValue)}null==ve&&(me?me&&(ve=R[R.length-1].coord):ve=R[0].coord),v[E]=M.toGlobalCoord(ve)}});else{var m=this.getData(),y=m.getLayout("offset"),x=m.getLayout("size"),C=h.getBaseAxis().isHorizontal()?0:1;v[C]+=y+x/2}return v}return[NaN,NaN]},s.type="series.__base_bar__",s.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},s}(zi.Z);zi.Z.registerClass(jl);const hh=jl;var qn=z(102);const hu=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.getInitialData=function(){return(0,ta.Z)(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},s.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},s.prototype.getProgressiveThreshold=function(){var a=this.get("progressiveThreshold"),l=this.get("largeThreshold");return l>a&&(a=l),a},s.prototype.brushSelector=function(a,l,u){return u.rect(l.getItemLayout(a))},s.type="series.bar",s.dependencies=["grid","polar"],s.defaultOption=(0,qn.ZL)(hh.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),s}(hh);var Eo=z(4658),vr=function c(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0};const fu=function(c){function s(a){var l=c.call(this,a)||this;return l.type="sausage",l}return(0,Rt.ZT)(s,c),s.prototype.getDefaultShape=function(){return new vr},s.prototype.buildPath=function(a,l){var u=l.cx,h=l.cy,p=Math.max(l.r0||0,0),v=Math.max(l.r,0),m=.5*(v-p),y=p+m,x=l.startAngle,C=l.endAngle,M=l.clockwise,E=2*Math.PI,R=M?C-x<E:x-C<E;R||(x=C-(M?E:-E));var F=Math.cos(x),U=Math.sin(x),ue=Math.cos(C),me=Math.sin(C);R?(a.moveTo(F*p+u,U*p+h),a.arc(F*y+u,U*y+h,m,-Math.PI+x,x,!M)):a.moveTo(F*v+u,U*v+h),a.arc(u,h,v,x,C,!M),a.arc(ue*y+u,me*y+h,m,C-2*Math.PI,C-Math.PI,!M),0!==p&&a.arc(u,h,p,C,x,M)},s}(ye.ZP);function hi(c,s,a){return s*Math.sin(c)*(a?-1:1)}function Va(c,s,a){return s*Math.cos(c)*(a?1:-1)}function da(c,s,a){var l=c.get("borderRadius");if(null==l)return a?{cornerRadius:0}:null;(0,b.isArray)(l)||(l=[l,l,l,l]);var u=Math.abs(s.r||0-s.r0||0);return{cornerRadius:(0,b.map)(l,function(h){return(0,we.GM)(h,u)})}}var Js=Math.max,Ao=Math.min,zn=function(c){function s(){var a=c.call(this)||this;return a.type=s.type,a._isFirstFrame=!0,a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u,h){this._model=a,this._removeOnRenderedListener(u),this._updateDrawMode(a);var p=a.get("coordinateSystem");("cartesian2d"===p||"polar"===p)&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(a,l,u):this._renderNormal(a,l,u,h))},s.prototype.incrementalPrepareRender=function(a){this._clear(),this._updateDrawMode(a),this._updateLargeClip(a)},s.prototype.incrementalRender=function(a,l){this._progressiveEls=[],this._incrementalRenderLarge(a,l)},s.prototype.eachRendered=function(a){(0,Un.traverseElements)(this._progressiveEls||this.group,a)},s.prototype._updateDrawMode=function(a){var l=a.pipelineContext.large;(null==this._isLargeDraw||l!==this._isLargeDraw)&&(this._isLargeDraw=l,this._clear())},s.prototype._renderNormal=function(a,l,u,h){var C,p=this.group,v=a.getData(),m=this._data,y=a.coordinateSystem,x=y.getBaseAxis();"cartesian2d"===y.type?C=x.isHorizontal():"polar"===y.type&&(C="angle"===x.dim);var M=a.isAnimationEnabled()?a:null,E=function Io(c,s){var a=c.get("realtimeSort",!0),l=s.getBaseAxis();if(a&&"category"===l.type&&"cartesian2d"===s.type)return{baseAxis:l,otherAxis:s.getOtherAxis(l)}}(a,y);E&&this._enableRealtimeSort(E,v,u);var R=a.get("clip",!0)||E,F=function fs(c,s){var a=c.getArea&&c.getArea();if(bl(c,"cartesian2d")){var l=c.getBaseAxis();if("category"!==l.type||!l.onBand){var u=s.getLayout("bandWidth");l.isHorizontal()?(a.x-=u,a.width+=2*u):(a.y-=u,a.height+=2*u)}}return a}(y,v);p.removeClipPath();var U=a.get("roundCap",!0),ue=a.get("showBackground",!0),me=a.getModel("backgroundStyle"),ve=me.get("borderRadius")||0,Me=[],Ae=this._backgroundEls,Pe=h&&h.isInitSort,Ne=h&&"changeAxisOrder"===h.type;function He(it){var ct=Xl[y.type](v,it),ht=function Uv(c,s,a){return new("polar"===c.type?hs.C:Jt.Z)({shape:Fc(s,a,c),silent:!0,z2:0})}(y,C,ct);return ht.useStyle(me.getItemStyle()),ht.setShape("cartesian2d"===y.type?"r":"cornerRadius",ve),Me[it]=ht,ht}v.diff(m).add(function(it){var ct=v.getItemModel(it),ht=Xl[y.type](v,it,ct);if(ue&&He(it),v.hasValue(it)&&pu[y.type](ht)){var vt=!1;R&&(vt=Fr[y.type](F,ht));var gt=Yi[y.type](a,v,it,ht,C,M,x.model,!1,U);E&&(gt.forceLabelAnimation=!0),Oc(gt,v,it,ct,ht,a,C,"polar"===y.type),Pe?gt.attr({shape:ht}):E?Zl(E,M,gt,ht,it,C,!1,!1):(0,on.KZ)(gt,{shape:ht},a,it),v.setItemGraphicEl(it,gt),p.add(gt),gt.ignore=vt}}).update(function(it,ct){var ht=v.getItemModel(it),vt=Xl[y.type](v,it,ht);if(ue){var gt=void 0;0===Ae.length?gt=He(ct):((gt=Ae[ct]).useStyle(me.getItemStyle()),gt.setShape("cartesian2d"===y.type?"r":"cornerRadius",ve),Me[it]=gt);var Ot=Xl[y.type](v,it),Gt=Fc(C,Ot,y);(0,on.D)(gt,{shape:Gt},M,it)}var Ft=m.getItemGraphicEl(ct);if(v.hasValue(it)&&pu[y.type](vt)){var en=!1;if(R&&(en=Fr[y.type](F,vt))&&p.remove(Ft),Ft?(0,on.Zi)(Ft):Ft=Yi[y.type](a,v,it,vt,C,M,x.model,!!Ft,U),E&&(Ft.forceLabelAnimation=!0),Ne){var Mn=Ft.getTextContent();if(Mn){var Tn=(0,Bn.qA)(Mn);null!=Tn.prevValue&&(Tn.prevValue=Tn.value)}}else Oc(Ft,v,it,ht,vt,a,C,"polar"===y.type);Pe?Ft.attr({shape:vt}):E?Zl(E,M,Ft,vt,it,C,!0,Ne):(0,on.D)(Ft,{shape:vt},a,it,null),v.setItemGraphicEl(it,Ft),Ft.ignore=en,p.add(Ft)}else p.remove(Ft)}).remove(function(it){var ct=m.getItemGraphicEl(it);ct&&(0,on.XD)(ct,a,it)}).execute();var Ye=this._backgroundGroup||(this._backgroundGroup=new Vn.Z);Ye.removeAll();for(var Qe=0;Qe<Me.length;++Qe)Ye.add(Me[Qe]);p.add(Ye),this._backgroundEls=Me,this._data=v},s.prototype._renderLarge=function(a,l,u){this._clear(),Nc(a,this.group),this._updateLargeClip(a)},s.prototype._incrementalRenderLarge=function(a,l){this._removeBackground(),Nc(l,this.group,this._progressiveEls,!0)},s.prototype._updateLargeClip=function(a){var l=a.get("clip",!0)&&Rc(a.coordinateSystem,!1,a),u=this.group;l?u.setClipPath(l):u.removeClipPath()},s.prototype._enableRealtimeSort=function(a,l,u){var h=this;if(l.count()){var p=a.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(l,a,u),this._isFirstFrame=!1;else{var v=function(m){var y=l.getItemGraphicEl(m),x=y&&y.shape;return x&&Math.abs(p.isHorizontal()?x.height:x.width)||0};this._onRendered=function(){h._updateSortWithinSameData(l,v,p,u)},u.getZr().on("rendered",this._onRendered)}}},s.prototype._dataSort=function(a,l,u){var h=[];return a.each(a.mapDimension(l.dim),function(p,v){var m=u(v);h.push({dataIndex:v,mappedValue:m=m??NaN,ordinalNumber:p})}),h.sort(function(p,v){return v.mappedValue-p.mappedValue}),{ordinalNumbers:(0,b.map)(h,function(p){return p.ordinalNumber})}},s.prototype._isOrderChangedWithinSameData=function(a,l,u){for(var h=u.scale,p=a.mapDimension(u.dim),v=Number.MAX_VALUE,m=0,y=h.getOrdinalMeta().categories.length;m<y;++m){var x=a.rawIndexOf(p,h.getRawOrdinalNumber(m)),C=x<0?Number.MIN_VALUE:l(a.indexOfRawIndex(x));if(C>v)return!0;v=C}return!1},s.prototype._isOrderDifferentInView=function(a,l){for(var u=l.scale,h=u.getExtent(),p=Math.max(0,h[0]),v=Math.min(h[1],u.getOrdinalMeta().categories.length-1);p<=v;++p)if(a.ordinalNumbers[p]!==u.getRawOrdinalNumber(p))return!0},s.prototype._updateSortWithinSameData=function(a,l,u,h){if(this._isOrderChangedWithinSameData(a,l,u)){var p=this._dataSort(a,u,l);this._isOrderDifferentInView(p,u)&&(this._removeOnRenderedListener(h),h.dispatchAction({type:"changeAxisOrder",componentType:u.dim+"Axis",axisId:u.index,sortInfo:p}))}},s.prototype._dispatchInitSort=function(a,l,u){var h=l.baseAxis,p=this._dataSort(a,h,function(v){return a.get(a.mapDimension(l.otherAxis.dim),v)});u.dispatchAction({type:"changeAxisOrder",componentType:h.dim+"Axis",isInitSort:!0,axisId:h.index,sortInfo:p})},s.prototype.remove=function(a,l){this._clear(this._model),this._removeOnRenderedListener(l)},s.prototype.dispose=function(a,l){this._removeOnRenderedListener(l)},s.prototype._removeOnRenderedListener=function(a){this._onRendered&&(a.getZr().off("rendered",this._onRendered),this._onRendered=null)},s.prototype._clear=function(a){var l=this.group,u=this._data;a&&a.isAnimationEnabled()&&u&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],u.eachItemGraphicEl(function(h){(0,on.XD)(h,a,(0,Fn.A)(h).dataIndex)})):l.removeAll(),this._data=null,this._isFirstFrame=!0},s.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},s.type="bar",s}(na.Z),Fr={cartesian2d:function(c,s){var a=s.width<0?-1:1,l=s.height<0?-1:1;a<0&&(s.x+=s.width,s.width=-s.width),l<0&&(s.y+=s.height,s.height=-s.height);var u=c.x+c.width,h=c.y+c.height,p=Js(s.x,c.x),v=Ao(s.x+s.width,u),m=Js(s.y,c.y),y=Ao(s.y+s.height,h),x=v<p,C=y<m;return s.x=x&&p>u?v:p,s.y=C&&m>h?y:m,s.width=x?0:v-p,s.height=C?0:y-m,a<0&&(s.x+=s.width,s.width=-s.width),l<0&&(s.y+=s.height,s.height=-s.height),x||C},polar:function(c,s){var a=s.r0<=s.r?1:-1;if(a<0){var l=s.r;s.r=s.r0,s.r0=l}var u=Ao(s.r,c.r),h=Js(s.r0,c.r0);s.r=u,s.r0=h;var p=u-h<0;return a<0&&(l=s.r,s.r=s.r0,s.r0=l),p}},Yi={cartesian2d:function(c,s,a,l,u,h,p,v,m){var y=new Jt.Z({shape:(0,b.extend)({},l),z2:1});return y.__dataIndex=a,y.name="item",h&&(y.shape[u?"height":"width"]=0),y},polar:function(c,s,a,l,u,h,p,v,m){var y=!u&&m?fu:hs.C,x=new y({shape:l,z2:1});x.name="item";var C=el(u);if(x.calculateTextPosition=function Sn(c,s){var a=(s=s||{}).isRoundCap;return function(l,u,h){var p=u.position;if(!p||p instanceof Array)return(0,we.wI)(l,u,h);var v=c(p),m=null!=u.distance?u.distance:5,y=this.shape,x=y.cx,C=y.cy,M=y.r,E=y.r0,R=(M+E)/2,F=y.startAngle,U=y.endAngle,ue=(F+U)/2,me=a?Math.abs(M-E)/2:0,ve=Math.cos,Me=Math.sin,Ae=x+M*ve(F),Pe=C+M*Me(F),Ne="left",He="top";switch(v){case"startArc":Ae=x+(E-m)*ve(ue),Pe=C+(E-m)*Me(ue),Ne="center",He="top";break;case"insideStartArc":Ae=x+(E+m)*ve(ue),Pe=C+(E+m)*Me(ue),Ne="center",He="bottom";break;case"startAngle":Ae=x+R*ve(F)+hi(F,m+me,!1),Pe=C+R*Me(F)+Va(F,m+me,!1),Ne="right",He="middle";break;case"insideStartAngle":Ae=x+R*ve(F)+hi(F,-m+me,!1),Pe=C+R*Me(F)+Va(F,-m+me,!1),Ne="left",He="middle";break;case"middle":Ae=x+R*ve(ue),Pe=C+R*Me(ue),Ne="center",He="middle";break;case"endArc":Ae=x+(M+m)*ve(ue),Pe=C+(M+m)*Me(ue),Ne="center",He="bottom";break;case"insideEndArc":Ae=x+(M-m)*ve(ue),Pe=C+(M-m)*Me(ue),Ne="center",He="top";break;case"endAngle":Ae=x+R*ve(U)+hi(U,m+me,!0),Pe=C+R*Me(U)+Va(U,m+me,!0),Ne="left",He="middle";break;case"insideEndAngle":Ae=x+R*ve(U)+hi(U,-m+me,!0),Pe=C+R*Me(U)+Va(U,-m+me,!0),Ne="right",He="middle";break;default:return(0,we.wI)(l,u,h)}return(l=l||{}).x=Ae,l.y=Pe,l.align=Ne,l.verticalAlign=He,l}}(C,{isRoundCap:y===fu}),h){var E=u?"r":"endAngle",R={};x.shape[E]=u?l.r0:l.startAngle,R[E]=l[E],(v?on.D:on.KZ)(x,{shape:R},h)}return x}};function Zl(c,s,a,l,u,h,p,v){var m,y;h?(y={x:l.x,width:l.width},m={y:l.y,height:l.height}):(y={y:l.y,height:l.height},m={x:l.x,width:l.width}),v||(p?on.D:on.KZ)(a,{shape:m},s,u,null),(p?on.D:on.KZ)(a,{shape:y},s?c.baseAxis.model:null,u)}function ha(c,s){for(var a=0;a<s.length;a++)if(!isFinite(c[s[a]]))return!0;return!1}var Yl=["x","y","width","height"],ra=["cx","cy","r","startAngle","endAngle"],pu={cartesian2d:function(c){return!ha(c,Yl)},polar:function(c){return!ha(c,ra)}},Xl={cartesian2d:function(c,s,a){var l=c.getItemLayout(s),u=a?function ap(c,s){var a=c.get(["itemStyle","borderColor"]);if(!a||"none"===a)return 0;var l=c.get(["itemStyle","borderWidth"])||0,u=isNaN(s.width)?Number.MAX_VALUE:Math.abs(s.width),h=isNaN(s.height)?Number.MAX_VALUE:Math.abs(s.height);return Math.min(l,u,h)}(a,l):0,h=l.width>0?1:-1,p=l.height>0?1:-1;return{x:l.x+h*u/2,y:l.y+p*u/2,width:l.width-h*u,height:l.height-p*u}},polar:function(c,s,a){var l=c.getItemLayout(s);return{cx:l.cx,cy:l.cy,r0:l.r0,r:l.r,startAngle:l.startAngle,endAngle:l.endAngle,clockwise:l.clockwise}}};function el(c){return a=c?"Arc":"Angle",function(l){switch(l){case"start":case"insideStart":case"end":case"insideEnd":return l+a;default:return l}};var a}function Oc(c,s,a,l,u,h,p,v){var m=s.getItemVisual(a,"style");if(v){if(!h.get("roundCap")){var x=c.shape,C=da(l.getModel("itemStyle"),x,!0);(0,b.extend)(x,C),c.setShape(x)}}else{var y=l.get(["itemStyle","borderRadius"])||0;c.setShape("r",y)}c.useStyle(m);var M=l.getShallow("cursor");M&&c.attr("cursor",M);var E=v?p?u.r>=u.r0?"endArc":"startArc":u.endAngle>=u.startAngle?"endAngle":"startAngle":p?u.height>=0?"bottom":"top":u.width>=0?"right":"left",R=(0,Bn.k3)(l);(0,Bn.ni)(c,R,{labelFetcher:h,labelDataIndex:a,defaultText:kr(h.getData(),a),inheritColor:m.fill,defaultOpacity:m.opacity,defaultOutsidePosition:E});var F=c.getTextContent();if(v&&F){var U=l.get(["label","position"]);c.textConfig.inside="middle"===U||null,function ya(c,s,a,l){if((0,b.isNumber)(l))c.setTextConfig({rotation:l});else if((0,b.isArray)(s))c.setTextConfig({rotation:0});else{var m,u=c.shape,h=u.clockwise?u.startAngle:u.endAngle,p=u.clockwise?u.endAngle:u.startAngle,v=(h+p)/2,y=a(s);switch(y){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":m=v;break;case"startAngle":case"insideStartAngle":m=h;break;case"endAngle":case"insideEndAngle":m=p;break;default:return void c.setTextConfig({rotation:0})}var x=1.5*Math.PI-m;"middle"===y&&x>Math.PI/2&&x<1.5*Math.PI&&(x-=Math.PI),c.setTextConfig({rotation:x})}}(c,"outside"===U?E:U,el(p),l.get(["label","rotate"]))}(0,Bn.pe)(F,R,h.getRawValue(a),function(me){return wr(s,me)});var ue=l.getModel(["emphasis"]);(0,bn.k5)(c,ue.get("focus"),ue.get("blurScope"),ue.get("disabled")),(0,bn.WO)(c,l),function zr(c){return null!=c.startAngle&&null!=c.endAngle&&c.startAngle===c.endAngle}(u)&&(c.style.fill="none",c.style.stroke="none",(0,b.each)(c.states,function(me){me.style&&(me.style.fill=me.style.stroke="none")}))}var kc=function c(){},ia=function(c){function s(a){var l=c.call(this,a)||this;return l.type="largeBar",l}return(0,Rt.ZT)(s,c),s.prototype.getDefaultShape=function(){return new kc},s.prototype.buildPath=function(a,l){for(var u=l.points,h=this.baseDimIdx,p=1-this.baseDimIdx,v=[],m=[],y=this.barWidth,x=0;x<u.length;x+=3)m[h]=y,m[p]=u[x+2],v[h]=u[x+h],v[p]=u[x+p],a.rect(v[0],v[1],m[0],m[1])},s}(ye.ZP);function Nc(c,s,a,l){var u=c.getData(),h=u.getLayout("valueAxisHorizontal")?1:0,p=u.getLayout("largeDataIndices"),v=u.getLayout("size"),m=c.getModel("backgroundStyle"),y=u.getLayout("largeBackgroundPoints");if(y){var x=new ia({shape:{points:y},incremental:!!l,silent:!0,z2:0});x.baseDimIdx=h,x.largeDataIndices=p,x.barWidth=v,x.useStyle(m.getItemStyle()),s.add(x),a&&a.push(x)}var C=new ia({shape:{points:u.getLayout("largePoints")},incremental:!!l,ignoreCoarsePointer:!0,z2:1});C.baseDimIdx=h,C.largeDataIndices=p,C.barWidth=v,s.add(C),C.useStyle(u.getVisual("style")),(0,Fn.A)(C).seriesIndex=c.seriesIndex,c.get("silent")||(C.on("mousedown",xl),C.on("mousemove",xl)),a&&a.push(C)}var xl=(0,Eo.P2)(function(c){var a=function ps(c,s,a){for(var l=c.baseDimIdx,u=1-l,h=c.shape.points,p=c.largeDataIndices,v=[],m=[],y=c.barWidth,x=0,C=h.length/3;x<C;x++){var M=3*x;if(m[l]=y,m[u]=h[M+2],v[l]=h[M+l],v[u]=h[M+u],m[u]<0&&(v[u]+=m[u],m[u]=-m[u]),s>=v[0]&&s<=v[0]+m[0]&&a>=v[1]&&a<=v[1]+m[1])return p[x]}return-1}(this,c.offsetX,c.offsetY);(0,Fn.A)(this).dataIndex=a>=0?a:null},30,!1);function Fc(c,s,a){if(bl(a,"cartesian2d")){var l=s,u=a.getArea();return{x:c?l.x:u.x,y:c?u.y:l.y,width:c?l.width:u.width,height:c?u.height:l.height}}return{cx:(u=a.getArea()).cx,cy:u.cy,r0:c?u.r0:s.r0,r:c?u.r:s.r,startAngle:c?s.startAngle:0,endAngle:c?s.endAngle:2*Math.PI}}const Hi=zn;var Gv=z(9624),Oe=z(8585),Ge=2*Math.PI,Le=Math.PI/180;function Ue(c,s){return Oe.ME(c.getBoxLayoutParams(),{width:s.getWidth(),height:s.getHeight()})}function Xe(c,s){var a=Ue(c,s),l=c.get("center"),u=c.get("radius");b.isArray(u)||(u=[0,u]);var x,C,h=(0,ft.GM)(a.width,s.getWidth()),p=(0,ft.GM)(a.height,s.getHeight()),v=Math.min(h,p),m=(0,ft.GM)(u[0],v/2),y=(0,ft.GM)(u[1],v/2),M=c.coordinateSystem;if(M){var E=M.dataToPoint(l);x=E[0]||0,C=E[1]||0}else b.isArray(l)||(l=[l,l]),x=(0,ft.GM)(l[0],h)+a.x,C=(0,ft.GM)(l[1],p)+a.y;return{cx:x,cy:C,r0:m,r:y}}function nt(c,s,a){s.eachSeriesByType(c,function(l){var u=l.getData(),h=u.mapDimension("value"),p=Ue(l,a),v=Xe(l,a),m=v.cx,y=v.cy,x=v.r,C=v.r0,M=-l.get("startAngle")*Le,E=l.get("endAngle"),R=l.get("padAngle")*Le;E="auto"===E?M-Ge:-E*Le;var U=l.get("minAngle")*Le+R,ue=0;u.each(h,function(Gt){!isNaN(Gt)&&ue++});var me=u.getSum(h),ve=Math.PI/(me||ue)*2,Me=l.get("clockwise"),Ae=l.get("roseType"),Pe=l.get("stillShowZeroSum"),Ne=u.getDataExtent(h);Ne[0]=0;var He=Me?1:-1,Ye=[M,E],Qe=He*R/2;(0,ge.L)(Ye,!Me),M=Ye[0],E=Ye[1];var it=pt(l);it.startAngle=M,it.endAngle=E,it.clockwise=Me;var ct=Math.abs(E-M),ht=ct,vt=0,gt=M;if(u.setLayout({viewRect:p,r:x}),u.each(h,function(Gt,Ft){var en;if(isNaN(Gt))u.setItemLayout(Ft,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:Me,cx:m,cy:y,r0:C,r:Ae?NaN:x});else{(en="area"!==Ae?0===me&&Pe?ve:Gt*ve:ct/ue)<U?(en=U,ht-=U):vt+=Gt;var Mn=gt+He*en,Tn=0,tr=0;R>en?tr=Tn=gt+He*en/2:(Tn=gt+Qe,tr=Mn-Qe),u.setItemLayout(Ft,{angle:en,startAngle:Tn,endAngle:tr,clockwise:Me,cx:m,cy:y,r0:C,r:Ae?(0,ft.NU)(Gt,Ne,[C,x]):x}),gt=Mn}}),ht<Ge&&ue)if(ht<=.001){var Ot=ct/ue;u.each(h,function(Gt,Ft){if(!isNaN(Gt)){var en=u.getItemLayout(Ft);en.angle=Ot;var Mn=0,Tn=0;Ot<R?Tn=Mn=M+He*(Ft+.5)*Ot:(Mn=M+He*Ft*Ot+Qe,Tn=M+He*(Ft+1)*Ot-Qe),en.startAngle=Mn,en.endAngle=Tn}})}else ve=ht/vt,gt=M,u.each(h,function(Gt,Ft){if(!isNaN(Gt)){var en=u.getItemLayout(Ft),Mn=en.angle===U?U:Gt*ve,Tn=0,tr=0;Mn<R?tr=Tn=gt+He*Mn/2:(Tn=gt+Qe,tr=gt+He*Mn-Qe),en.startAngle=Tn,en.endAngle=tr,gt+=He*Mn}})})}var pt=(0,An.Yf)();function zt(c){return{seriesType:c,reset:function(s,a){var l=a.findComponents({mainType:"legend"});if(l&&l.length){var u=s.getData();u.filterSelf(function(h){for(var p=u.getName(h),v=0;v<l.length;v++)if(!l[v].isSelected(p))return!1;return!0})}}}}var Pt=z(8059),tn=z(1788),xn=z(1146),ut=z(3356),Dt=Math.PI/180;function bt(c,s,a,l,u,h,p,v,m,y){if(!(c.length<2)){for(var M=c.length,E=0;E<M;E++)"outer"===c[E].position&&"labelLine"===c[E].labelAlignTo&&(c[E].linePoints[1][0]+=c[E].label.x-y,c[E].label.x=y);(0,ut.GI)(c,m,m+p)&&function C(F){for(var U={list:[],maxY:0},ue={list:[],maxY:0},me=0;me<F.length;me++)if("none"===F[me].labelAlignTo){var ve=F[me],Me=ve.label.y>a?ue:U,Ae=Math.abs(ve.label.y-a);if(Ae>=Me.maxY){var Pe=ve.label.x-s-ve.len2*u,Ne=l+ve.len,He=Math.abs(Pe)<Ne?Math.sqrt(Ae*Ae/(1-Pe*Pe/Ne/Ne)):Ne;Me.rB=He,Me.maxY=Ae}Me.list.push(ve)}x(U),x(ue)}(c)}function x(F){for(var U=F.rB,ue=U*U,me=0;me<F.list.length;me++){var ve=F.list[me],Me=Math.abs(ve.label.y-a),Ae=l+ve.len,Pe=Ae*Ae,Ne=Math.sqrt((1-Math.abs(Me*Me/ue))*Pe),He=s+(Ne+ve.len2)*u;$t(ve,ve.targetTextWidth-(He-ve.label.x)*u,!0),ve.label.x=He}}}function $t(c,s,a){if(void 0===a&&(a=!1),null==c.labelStyleWidth){var l=c.label,u=l.style,h=c.rect,p=u.backgroundColor,v=u.padding,m=v?v[1]+v[3]:0,y=u.overflow,x=h.width+(p?0:m);if(s<x||a){var C=h.height;if(y&&y.match("break")){l.setStyle("backgroundColor",null),l.setStyle("width",s-m);var M=l.getBoundingRect();l.setStyle("width",Math.ceil(M.width)),l.setStyle("backgroundColor",p)}else{var E=s-m;l.setStyle("width",s<x?E:a?E>c.unconstrainedWidth?null:E:null)}var F=l.getBoundingRect();h.width=F.width,h.height=F.height+((l.style.margin||0)+2.1),h.y-=(h.height-C)/2}}}function hn(c){return"center"===c.position}var Hn=function(c){function s(a,l,u){var h=c.call(this)||this;h.z2=2;var p=new kt.ZP;return h.setTextContent(p),h.updateData(a,l,u,!0),h}return(0,Rt.ZT)(s,c),s.prototype.updateData=function(a,l,u,h){var p=this,v=a.hostModel,m=a.getItemModel(l),y=m.getModel("emphasis"),x=a.getItemLayout(l),C=(0,b.extend)(da(m.getModel("itemStyle"),x,!0),x);if(isNaN(C.startAngle))p.setShape(C);else{if(h){p.setShape(C);var M=v.getShallow("animationType");v.ecModel.ssr?(on.KZ(p,{scaleX:0,scaleY:0},v,{dataIndex:l,isFrom:!0}),p.originX=C.cx,p.originY=C.cy):"scale"===M?(p.shape.r=x.r0,on.KZ(p,{shape:{r:x.r}},v,l)):null!=u?(p.setShape({startAngle:u,endAngle:u}),on.KZ(p,{shape:{startAngle:x.startAngle,endAngle:x.endAngle}},v,l)):(p.shape.endAngle=x.startAngle,on.D(p,{shape:{endAngle:x.endAngle}},v,l))}else(0,on.Zi)(p),on.D(p,{shape:C},v,l);p.useStyle(a.getItemVisual(l,"style")),(0,bn.WO)(p,m);var E=(x.startAngle+x.endAngle)/2,R=v.get("selectedOffset"),F=Math.cos(E)*R,U=Math.sin(E)*R,ue=m.getShallow("cursor");ue&&p.attr("cursor",ue),this._updateLabel(v,a,l),p.ensureState("emphasis").shape=(0,b.extend)({r:x.r+(y.get("scale")&&y.get("scaleSize")||0)},da(y.getModel("itemStyle"),x)),(0,b.extend)(p.ensureState("select"),{x:F,y:U,shape:da(m.getModel(["select","itemStyle"]),x)}),(0,b.extend)(p.ensureState("blur"),{shape:da(m.getModel(["blur","itemStyle"]),x)});var me=p.getTextGuideLine(),ve=p.getTextContent();me&&(0,b.extend)(me.ensureState("select"),{x:F,y:U}),(0,b.extend)(ve.ensureState("select"),{x:F,y:U}),(0,bn.k5)(this,y.get("focus"),y.get("blurScope"),y.get("disabled"))}},s.prototype._updateLabel=function(a,l,u){var h=this,p=l.getItemModel(u),v=p.getModel("labelLine"),m=l.getItemVisual(u,"style"),y=m&&m.fill,x=m&&m.opacity;(0,Bn.ni)(h,(0,Bn.k3)(p),{labelFetcher:l.hostModel,labelDataIndex:u,inheritColor:y,defaultOpacity:x,defaultText:a.getFormattedLabel(u,"normal")||l.getName(u)});var C=h.getTextContent();h.setTextConfig({position:null,rotation:null}),C.attr({z2:10});var M=a.get(["label","position"]);if("outside"!==M&&"outer"!==M)h.removeTextGuideLine();else{var E=this.getTextGuideLine();E||(E=new Pt.Z,this.setTextGuideLine(E)),(0,xn.Iu)(this,(0,xn.$x)(p),{stroke:y,opacity:(0,b.retrieve3)(v.get(["lineStyle","opacity"]),x,1)})}},s}(hs.C);const mr=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.ignoreLabelLineUpdate=!0,a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u,h){var y,p=a.getData(),v=this._data,m=this.group;if(!v&&p.count()>0){for(var x=p.getItemLayout(0),C=1;isNaN(x&&x.startAngle)&&C<p.count();++C)x=p.getItemLayout(C);x&&(y=x.startAngle)}if(this._emptyCircleSector&&m.remove(this._emptyCircleSector),0===p.count()&&a.get("showEmptyCircle")){var M=pt(a),E=new hs.C({shape:(0,b.extend)(Xe(a,u),M)});E.useStyle(a.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=E,m.add(E)}p.diff(v).add(function(R){var F=new Hn(p,R,y);p.setItemGraphicEl(R,F),m.add(F)}).update(function(R,F){var U=v.getItemGraphicEl(F);U.updateData(p,R,y),U.off("click"),m.add(U),p.setItemGraphicEl(R,U)}).remove(function(R){var F=v.getItemGraphicEl(R);on.XD(F,a,R)}).execute(),function Cn(c){var l,u,s=c.getData(),a=[],h=!1,p=(c.get("minShowLabelAngle")||0)*Dt,v=s.getLayout("viewRect"),m=s.getLayout("r"),y=v.width,x=v.x,C=v.y,M=v.height;function E(Pe){Pe.ignore=!0}s.each(function(Pe){var Ne=s.getItemGraphicEl(Pe),He=Ne.shape,Ye=Ne.getTextContent(),Qe=Ne.getTextGuideLine(),it=s.getItemModel(Pe),ct=it.getModel("label"),ht=ct.get("position")||it.get(["emphasis","label","position"]),vt=ct.get("distanceToLabelLine"),gt=ct.get("alignTo"),Ot=(0,ft.GM)(ct.get("edgeDistance"),y),Gt=ct.get("bleedMargin"),Ft=it.getModel("labelLine"),en=Ft.get("length");en=(0,ft.GM)(en,y);var Mn=Ft.get("length2");if(Mn=(0,ft.GM)(Mn,y),Math.abs(He.endAngle-He.startAngle)<p)return(0,b.each)(Ye.states,E),Ye.ignore=!0,void(Qe&&((0,b.each)(Qe.states,E),Qe.ignore=!0));if(function R(Pe){if(!Pe.ignore)return!0;for(var Ne in Pe.states)if(!1===Pe.states[Ne].ignore)return!0;return!1}(Ye)){var hr,jr,pi,ni,Tn=(He.startAngle+He.endAngle)/2,tr=Math.cos(Tn),_r=Math.sin(Tn);l=He.cx,u=He.cy;var or="inside"===ht||"inner"===ht;if("center"===ht)hr=He.cx,jr=He.cy,ni="center";else{var gi=(or?(He.r+He.r0)/2*tr:He.r*tr)+l,bi=(or?(He.r+He.r0)/2*_r:He.r*_r)+u;if(hr=gi+3*tr,jr=bi+3*_r,!or){var Ii=gi+tr*(en+m-He.r),Ya=bi+_r*(en+m-He.r),po=Ii+(tr<0?-1:1)*Mn;hr="edge"===gt?tr<0?x+Ot:x+y-Ot:po+(tr<0?-vt:vt),jr=Ya,pi=[[gi,bi],[Ii,Ya],[po,Ya]]}ni=or?"center":"edge"===gt?tr>0?"right":"left":tr>0?"left":"right"}var Xa=Math.PI,Sa=0,Ko=ct.get("rotate");if((0,b.isNumber)(Ko))Sa=Ko*(Xa/180);else if("center"===ht)Sa=0;else if("radial"===Ko||!0===Ko)Sa=tr<0?-Tn+Xa:-Tn;else if("tangential"===Ko&&"outside"!==ht&&"outer"!==ht){var ws=Math.atan2(tr,_r);ws<0&&(ws=2*Xa+ws),_r>0&&(ws=Xa+ws),Sa=ws-Xa}if(h=!!Sa,Ye.x=hr,Ye.y=jr,Ye.rotation=Sa,Ye.setStyle({verticalAlign:"middle"}),or){Ye.setStyle({align:ni});var ry=Ye.states.select;ry&&(ry.x+=Ye.x,ry.y+=Ye.y)}else{var zd=Ye.getBoundingRect().clone();zd.applyTransform(Ye.getComputedTransform());var mF=(Ye.style.margin||0)+2.1;zd.y-=mF/2,zd.height+=mF,a.push({label:Ye,labelLine:Qe,position:ht,len:en,len2:Mn,minTurnAngle:Ft.get("minTurnAngle"),maxSurfaceAngle:Ft.get("maxSurfaceAngle"),surfaceNormal:new tn.Z(tr,_r),linePoints:pi,textAlign:ni,labelDistance:vt,labelAlignTo:gt,edgeDistance:Ot,bleedMargin:Gt,rect:zd,unconstrainedWidth:zd.width,labelStyleWidth:Ye.style.width})}Ne.setTextConfig({inside:or})}}),!h&&c.get("avoidLabelOverlap")&&function Bt(c,s,a,l,u,h,p,v){for(var m=[],y=[],x=Number.MAX_VALUE,C=-Number.MAX_VALUE,M=0;M<c.length;M++){var E=c[M].label;hn(c[M])||(E.x<s?(x=Math.min(x,E.x),m.push(c[M])):(C=Math.max(C,E.x),y.push(c[M])))}for(M=0;M<c.length;M++)if(!hn(R=c[M])&&R.linePoints){if(null!=R.labelStyleWidth)continue;E=R.label;var U,F=R.linePoints;R.targetTextWidth=U="edge"===R.labelAlignTo?E.x<s?F[2][0]-R.labelDistance-p-R.edgeDistance:p+u-R.edgeDistance-F[2][0]-R.labelDistance:"labelLine"===R.labelAlignTo?E.x<s?x-p-R.bleedMargin:p+u-C-R.bleedMargin:E.x<s?E.x-p-R.bleedMargin:p+u-E.x-R.bleedMargin,$t(R,U)}for(bt(y,s,a,l,1,0,h,0,v,C),bt(m,s,a,l,-1,0,h,0,v,x),M=0;M<c.length;M++){var R;if(!hn(R=c[M])&&R.linePoints){var me=(E=R.label).style.padding,Ae=R.rect.width+(E.style.backgroundColor?0:me?me[1]+me[3]:0),Pe=(F=R.linePoints)[1][0]-F[2][0];"edge"===R.labelAlignTo?F[2][0]=E.x<s?p+R.edgeDistance+Ae+R.labelDistance:p+u-R.edgeDistance-Ae-R.labelDistance:(F[2][0]=E.x<s?E.x+R.labelDistance:E.x-R.labelDistance,F[1][0]=F[2][0]+Pe),F[1][1]=F[2][1]=E.y}}}(a,l,u,m,y,M,x,C);for(var F=0;F<a.length;F++){var U=a[F],ue=U.label,me=U.labelLine,ve=isNaN(ue.x)||isNaN(ue.y);if(ue){ue.setStyle({align:U.textAlign}),ve&&((0,b.each)(ue.states,E),ue.ignore=!0);var Me=ue.states.select;Me&&(Me.x+=ue.x,Me.y+=ue.y)}if(me){var Ae=U.linePoints;ve||!Ae?((0,b.each)(me.states,E),me.ignore=!0):((0,xn.qK)(Ae,U.minTurnAngle),(0,xn._A)(Ae,U.surfaceNormal,U.maxSurfaceAngle),me.setShape({points:Ae}),ue.__hostTarget.textGuideLineConfig={anchor:new tn.Z(Ae[0][0],Ae[0][1])})}}}(a),"expansion"!==a.get("animationTypeUpdate")&&(this._data=p)},s.prototype.dispose=function(){},s.prototype.containPoint=function(a,l){var h=l.getData().getItemLayout(0);if(h){var p=a[0]-h.cx,v=a[1]-h.cy,m=Math.sqrt(p*p+v*v);return m<=h.r&&m>=h.r0}},s.type="pie",s}(na.Z);var Zr=z(4694),nr=z(1082);function _i(c,s,a){s=(0,b.isArray)(s)&&{coordDimensions:s}||(0,b.extend)({encodeDefine:c.getEncode()},s);var l=c.getSource(),u=(0,Zr.Z)(l,s).dimensions,h=new nr.Z(u,c);return h.initData(l,a),h}var za=z(3957);const eo=function(){function c(s,a){this._getDataWithEncodedVisual=s,this._getRawData=a}return c.prototype.getAllNames=function(){var s=this._getRawData();return s.mapArray(s.getName)},c.prototype.containName=function(s){return this._getRawData().indexOfName(s)>=0},c.prototype.indexOfName=function(s){return this._getDataWithEncodedVisual().indexOfName(s)},c.prototype.getItemVisual=function(s,a){return this._getDataWithEncodedVisual().getItemVisual(s,a)},c}();var $l=An.Yf();const gh=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,Rt.ZT)(s,c),s.prototype.init=function(a){c.prototype.init.apply(this,arguments),this.legendVisualProvider=new eo(b.bind(this.getData,this),b.bind(this.getRawData,this)),this._defaultLabelLine(a)},s.prototype.mergeOption=function(){c.prototype.mergeOption.apply(this,arguments)},s.prototype.getInitialData=function(){return _i(this,{coordDimensions:["value"],encodeDefaulter:b.curry(za.Ss,this)})},s.prototype.getDataParams=function(a){var l=this.getData(),u=$l(l),h=u.seats;if(!h){var p=[];l.each(l.mapDimension("value"),function(m){p.push(m)}),h=u.seats=(0,ft.HD)(p,l.hostModel.get("percentPrecision"))}var v=c.prototype.getDataParams.call(this,a);return v.percent=h[a]||0,v.$vars.push("percent"),v},s.prototype._defaultLabelLine=function(a){An.Cc(a,"labelLine",["show"]);var l=a.labelLine,u=a.emphasis.labelLine;l.show=l.show&&a.label.show,u.show=u.show&&a.emphasis.label.show},s.type="series.pie",s.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},s}(zi.Z),WC=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.hasSymbolVisual=!0,a}return(0,Rt.ZT)(s,c),s.prototype.getInitialData=function(a,l){return(0,ta.Z)(null,this,{useEncodeDefaulter:!0})},s.prototype.getProgressive=function(){return this.option.progressive??(this.option.large?5e3:this.get("progressive"))},s.prototype.getProgressiveThreshold=function(){return this.option.progressiveThreshold??(this.option.large?1e4:this.get("progressiveThreshold"))},s.prototype.brushSelector=function(a,l,u){return u.point(l.getItemLayout(a))},s.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},s.type="series.scatter",s.dependencies=["grid","polar","geo","singleAxis","calendar"],s.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},s}(zi.Z);var Pa=z(468),Yu=function c(){},EP=function(c){function s(a){var l=c.call(this,a)||this;return l._off=0,l.hoverDataIdx=-1,l}return(0,Rt.ZT)(s,c),s.prototype.getDefaultShape=function(){return new Yu},s.prototype.reset=function(){this.notClear=!1,this._off=0},s.prototype.buildPath=function(a,l){var C,u=l.points,h=l.size,p=this.symbolProxy,v=p.shape,m=a.getContext?a.getContext():a,x=this.softClipShape;if(m&&h[0]<4)this._ctx=m;else{for(this._ctx=null,C=this._off;C<u.length;){var M=u[C++],E=u[C++];isNaN(M)||isNaN(E)||x&&!x.contain(M,E)||(v.x=M-h[0]/2,v.y=E-h[1]/2,v.width=h[0],v.height=h[1],p.buildPath(a,v,!0))}this.incremental&&(this._off=C,this.notClear=!0)}},s.prototype.afterBrush=function(){var v,a=this.shape,l=a.points,u=a.size,h=this._ctx,p=this.softClipShape;if(h){for(v=this._off;v<l.length;){var m=l[v++],y=l[v++];isNaN(m)||isNaN(y)||p&&!p.contain(m,y)||h.fillRect(m-u[0]/2,y-u[1]/2,u[0],u[1])}this.incremental&&(this._off=v,this.notClear=!0)}},s.prototype.findDataIndex=function(a,l){for(var u=this.shape,h=u.points,p=u.size,v=Math.max(p[0],4),m=Math.max(p[1],4),y=h.length/2-1;y>=0;y--){var x=2*y,C=h[x]-v/2,M=h[x+1]-m/2;if(a>=C&&l>=M&&a<=C+v&&l<=M+m)return y}return-1},s.prototype.contain=function(a,l){var u=this.transformCoordToLocal(a,l);return this.getBoundingRect().contain(a=u[0],l=u[1])?(this.hoverDataIdx=this.findDataIndex(a,l))>=0:(this.hoverDataIdx=-1,!1)},s.prototype.getBoundingRect=function(){var a=this._rect;if(!a){for(var l=this.shape,u=l.points,h=l.size,p=h[0],v=h[1],m=1/0,y=1/0,x=-1/0,C=-1/0,M=0;M<u.length;){var E=u[M++],R=u[M++];m=Math.min(E,m),x=Math.max(E,x),y=Math.min(R,y),C=Math.max(R,C)}a=this._rect=new Pa.Z(m-p/2,y-v/2,x-m+p,C-y+v)}return a},s}(ye.ZP);const jC=function(){function c(){this.group=new Vn.Z}return c.prototype.updateData=function(s,a){this._clear();var l=this._create();l.setShape({points:s.getLayout("points")}),this._setCommon(l,s,a)},c.prototype.updateLayout=function(s){var a=s.getLayout("points");this.group.eachChild(function(l){null!=l.startIndex&&(a=new Float32Array(a.buffer,4*l.startIndex*2,2*(l.endIndex-l.startIndex))),l.setShape("points",a),l.reset()})},c.prototype.incrementalPrepareUpdate=function(s){this._clear()},c.prototype.incrementalUpdate=function(s,a,l){var u=this._newAdded[0],h=a.getLayout("points"),p=u&&u.shape.points;if(p&&p.length<2e4){var v=p.length,m=new Float32Array(v+h.length);m.set(p),m.set(h,v),u.endIndex=s.end,u.setShape({points:m})}else{this._newAdded=[];var y=this._create();y.startIndex=s.start,y.endIndex=s.end,y.incremental=!0,y.setShape({points:h}),this._setCommon(y,a,l)}},c.prototype.eachRendered=function(s){this._newAdded[0]&&s(this._newAdded[0])},c.prototype._create=function(){var s=new EP({cursor:"default"});return s.ignoreCoarsePointer=!0,this.group.add(s),this._newAdded.push(s),s},c.prototype._setCommon=function(s,a,l){var u=a.hostModel;l=l||{};var h=a.getVisual("symbolSize");s.setShape("size",h instanceof Array?h:[h,h]),s.softClipShape=l.clipShape||null,s.symbolProxy=(0,dr.th)(a.getVisual("symbol"),0,0,0,0),s.setColor=s.symbolProxy.setColor;var p=s.shape.size[0]<4;s.useStyle(u.getModel("itemStyle").getItemStyle(p?["color","shadowBlur","shadowColor"]:["color"]));var v=a.getVisual("style"),m=v&&v.fill;m&&s.setColor(m);var y=(0,Fn.A)(s);y.seriesIndex=u.seriesIndex,s.on("mousemove",function(x){y.dataIndex=null;var C=s.hoverDataIdx;C>=0&&(y.dataIndex=C+(s.startIndex||0))})},c.prototype.remove=function(){this._clear()},c.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},c}(),IP=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u){var h=a.getData();this._updateSymbolDraw(h,a).updateData(h,{clipShape:this._getClipShape(a)}),this._finished=!0},s.prototype.incrementalPrepareRender=function(a,l,u){var h=a.getData();this._updateSymbolDraw(h,a).incrementalPrepareUpdate(h),this._finished=!1},s.prototype.incrementalRender=function(a,l,u){this._symbolDraw.incrementalUpdate(a,l.getData(),{clipShape:this._getClipShape(l)}),this._finished=a.end===l.getData().count()},s.prototype.updateTransform=function(a,l,u){var h=a.getData();if(this.group.dirty(),!this._finished||h.count()>1e4)return{update:!0};var p=ti("").reset(a,l,u);p.progress&&p.progress({start:0,end:h.count(),count:h.count()},h),this._symbolDraw.updateLayout(h)},s.prototype.eachRendered=function(a){this._symbolDraw&&this._symbolDraw.eachRendered(a)},s.prototype._getClipShape=function(a){if(a.get("clip",!0)){var l=a.coordinateSystem;return l&&l.getArea&&l.getArea(.1)}},s.prototype._updateSymbolDraw=function(a,l){var u=this._symbolDraw,p=l.pipelineContext.large;return(!u||p!==this._isLargeDraw)&&(u&&u.remove(),u=this._symbolDraw=p?new jC:new Do,this._isLargeDraw=p,this.group.removeAll()),this.group.add(u.group),u},s.prototype.remove=function(a,l){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},s.prototype.dispose=function(){},s.type="scatter",s}(na.Z);var Ra=z(9314),xa=z(8103);const s0=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,Rt.ZT)(s,c),s.type="grid",s.dependencies=["xAxis","yAxis"],s.layoutMode="box",s.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},s}(xa.Z);var lp=z(7069),gs=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,Rt.ZT)(s,c),s.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",An.C6).models[0]},s.type="cartesian2dAxis",s}(xa.Z);b.mixin(gs,lp.W);var YC={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},l0=b.merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},YC),c0=b.merge({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},YC);const XC={category:l0,value:c0,time:b.merge({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},c0),log:b.defaults({logBase:10},c0)};var y5=z(6681),jv={value:1,category:1,time:1,log:1};function Po(c,s,a,l){(0,b.each)(jv,function(u,h){var p=(0,b.merge)((0,b.merge)({},XC[h],!0),l,!0),v=function(m){function y(){var x=null!==m&&m.apply(this,arguments)||this;return x.type=s+"Axis."+h,x}return(0,Rt.ZT)(y,m),y.prototype.mergeDefaultAndTheme=function(x,C){var M=(0,Oe.YD)(this),E=M?(0,Oe.tE)(x):{},R=C.getTheme();(0,b.merge)(x,R.get(h+"Axis")),(0,b.merge)(x,this.getDefaultOption()),x.type=$C(x),M&&(0,Oe.dt)(x,E,M)},y.prototype.optionUpdated=function(){"category"===this.option.type&&(this.__ordinalMeta=y5.Z.createByAxisModel(this))},y.prototype.getCategories=function(x){var C=this.option;if("category"===C.type)return x?C.data:this.__ordinalMeta.categories},y.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},y.type=s+"Axis."+h,y.defaultOption=p,y}(a);c.registerComponentModel(v)}),c.registerSubTypeDefaulter(s+"Axis",$C)}function $C(c){return c.type||(c.data?"category":"value")}var wa=z(3809),vh=z(3352),Hr=z(619),lr=z(5145),mh=["x","y"];function KC(c){return"interval"===c.type||"time"===c.type}const QC=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type="cartesian2d",a.dimensions=mh,a}return(0,Rt.ZT)(s,c),s.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var a=this.getAxis("x").scale,l=this.getAxis("y").scale;if(KC(a)&&KC(l)){var u=a.getExtent(),h=l.getExtent(),p=this.dataToPoint([u[0],h[0]]),v=this.dataToPoint([u[1],h[1]]),m=u[1]-u[0],y=h[1]-h[0];if(m&&y){var x=(v[0]-p[0])/m,C=(v[1]-p[1])/y,R=this._transform=[x,0,0,C,p[0]-u[0]*x,p[1]-h[0]*C];this._invTransform=(0,Hr.invert)([],R)}}},s.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},s.prototype.containPoint=function(a){var l=this.getAxis("x"),u=this.getAxis("y");return l.contain(l.toLocalCoord(a[0]))&&u.contain(u.toLocalCoord(a[1]))},s.prototype.containData=function(a){return this.getAxis("x").containData(a[0])&&this.getAxis("y").containData(a[1])},s.prototype.containZone=function(a,l){var u=this.dataToPoint(a),h=this.dataToPoint(l),p=this.getArea(),v=new Pa.Z(u[0],u[1],h[0]-u[0],h[1]-u[1]);return p.intersect(v)},s.prototype.dataToPoint=function(a,l,u){u=u||[];var h=a[0],p=a[1];if(this._transform&&null!=h&&isFinite(h)&&null!=p&&isFinite(p))return(0,lr.applyTransform)(u,a,this._transform);var v=this.getAxis("x"),m=this.getAxis("y");return u[0]=v.toGlobalCoord(v.dataToCoord(h,l)),u[1]=m.toGlobalCoord(m.dataToCoord(p,l)),u},s.prototype.clampData=function(a,l){var u=this.getAxis("x").scale,h=this.getAxis("y").scale,p=u.getExtent(),v=h.getExtent(),m=u.parse(a[0]),y=h.parse(a[1]);return(l=l||[])[0]=Math.min(Math.max(Math.min(p[0],p[1]),m),Math.max(p[0],p[1])),l[1]=Math.min(Math.max(Math.min(v[0],v[1]),y),Math.max(v[0],v[1])),l},s.prototype.pointToData=function(a,l){var u=[];if(this._invTransform)return(0,lr.applyTransform)(u,a,this._invTransform);var h=this.getAxis("x"),p=this.getAxis("y");return u[0]=h.coordToData(h.toLocalCoord(a[0]),l),u[1]=p.coordToData(p.toLocalCoord(a[1]),l),u},s.prototype.getOtherAxis=function(a){return this.getAxis("x"===a.dim?"y":"x")},s.prototype.getArea=function(a){a=a||0;var l=this.getAxis("x").getGlobalExtent(),u=this.getAxis("y").getGlobalExtent(),h=Math.min(l[0],l[1])-a,p=Math.min(u[0],u[1])-a,v=Math.max(l[0],l[1])-h+a,m=Math.max(u[0],u[1])-p+a;return new Pa.Z(h,p,v,m)},s}(vh.Z);var Is=z(819);const qC=function(c){function s(a,l,u,h,p){var v=c.call(this,a,l,u)||this;return v.index=0,v.type=h||"value",v.position=p||"bottom",v}return(0,Rt.ZT)(s,c),s.prototype.isHorizontal=function(){var a=this.position;return"top"===a||"bottom"===a},s.prototype.getGlobalExtent=function(a){var l=this.getExtent();return l[0]=this.toGlobalCoord(l[0]),l[1]=this.toGlobalCoord(l[1]),a&&l[0]>l[1]&&l.reverse(),l},s.prototype.pointToData=function(a,l){return this.coordToData(this.toLocalCoord(a["x"===this.dim?0:1]),l)},s.prototype.setCategorySortInfo=function(a){if("category"!==this.type)return!1;this.model.option.categorySortInfo=a,this.scale.setSortInfo(a)},s}(Is.Z);function JC(c,s,a){a=a||{};var l=c.coordinateSystem,u=s.axis,h={},p=u.getAxesOnZeroOf()[0],v=u.position,m=p?"onZero":v,y=u.dim,x=l.getRect(),C=[x.x,x.x+x.width,x.y,x.y+x.height],M={left:0,right:1,top:0,bottom:1,onZero:2},E=s.get("offset")||0,R="x"===y?[C[2]-E,C[3]+E]:[C[0]-E,C[1]+E];if(p){var F=p.toGlobalCoord(p.dataToCoord(0));R[M.onZero]=Math.max(Math.min(F,R[1]),R[0])}h.position=["y"===y?R[M[m]]:C[0],"x"===y?R[M[m]]:C[3]],h.rotation=Math.PI/2*("x"===y?0:1),h.labelDirection=h.tickDirection=h.nameDirection={top:-1,bottom:1,left:-1,right:1}[v],h.labelOffset=p?R[M[v]]-R[M.onZero]:0,s.get(["axisTick","inside"])&&(h.tickDirection=-h.tickDirection),b.retrieve(a.labelInside,s.get(["axisLabel","inside"]))&&(h.labelDirection=-h.labelDirection);var ue=s.get(["axisLabel","rotate"]);return h.labelRotate="top"===m?-ue:ue,h.z2=1,h}function eS(c){return"cartesian2d"===c.get("coordinateSystem")}function tS(c){var s={xAxisModel:null,yAxisModel:null};return b.each(s,function(a,l){var u=l.replace(/Model$/,""),h=c.getReferringComponents(u,An.C6).models[0];s[l]=h}),s}var _h=z(3295),cp=z(4105),u0=Math.log;function nS(c,s,a){var l=cp.Z.prototype,u=l.getTicks.call(a),h=l.getTicks.call(a,!0),p=u.length-1,v=l.getInterval.call(a),m=(0,wa.Xv)(c,s),y=m.extent,x=m.fixMin,C=m.fixMax;if("log"===c.type){var M=u0(c.base);y=[u0(y[0])/M,u0(y[1])/M]}c.setExtent(y[0],y[1]),c.calcNiceExtent({splitNumber:p,fixMin:x,fixMax:C});var E=l.getExtent.call(c);x&&(y[0]=E[0]),C&&(y[1]=E[1]);var R=l.getInterval.call(c),F=y[0],U=y[1];if(x&&C)R=(U-F)/p;else if(x)for(U=y[0]+R*p;U<y[1]&&isFinite(U)&&isFinite(y[1]);)R=(0,_h.r1)(R),U=y[0]+R*p;else if(C)for(F=y[1]-R*p;F>y[0]&&isFinite(F)&&isFinite(y[0]);)R=(0,_h.r1)(R),F=y[1]-R*p;else{c.getTicks().length-1>p&&(R=(0,_h.r1)(R));var me=R*p;U=Math.ceil(y[1]/R)*R,(F=(0,ft.NM)(U-me))<0&&y[0]>=0?(F=0,U=(0,ft.NM)(me)):U>0&&y[1]<=0&&(U=0,F=-(0,ft.NM)(me))}var ve=(u[0].value-h[0].value)/v,Me=(u[p].value-h[p].value)/v;l.setExtent.call(c,F+R*ve,U+R*Me),l.setInterval.call(c,R),(ve||Me)&&l.setNiceExtent.call(c,F+R,U-R)}function yi(c,s){return c.getCoordSysModel()===s}function Ur(c,s,a,l){a.getAxesOnZeroOf=function(){return h?[h]:[]};var h,u=c[s],p=a.model,v=p.get(["axisLine","onZero"]),m=p.get(["axisLine","onZeroAxisIndex"]);if(v){if(null!=m)Gr(u[m])&&(h=u[m]);else for(var y in u)if(u.hasOwnProperty(y)&&Gr(u[y])&&!l[x(u[y])]){h=u[y];break}h&&(l[x(h)]=!0)}function x(C){return C.dim+"_"+C.index}}function Gr(c){return c&&"category"!==c.type&&"time"!==c.type&&(0,wa.Yb)(c)}const rS=function(){function c(s,a,l){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=mh,this._initCartesian(s,a,l),this.model=s}return c.prototype.getRect=function(){return this._rect},c.prototype.update=function(s,a){var l=this._axesMap;function u(p){var v,m=(0,b.keys)(p),y=m.length;if(y){for(var x=[],C=y-1;C>=0;C--){var E=p[+m[C]],R=E.model,F=E.scale;(0,_h.lM)(F)&&R.get("alignTicks")&&null==R.get("interval")?x.push(E):((0,wa.Jk)(F,R),(0,_h.lM)(F)&&(v=E))}x.length&&(v||(v=x.pop(),(0,wa.Jk)(v.scale,v.model)),(0,b.each)(x,function(U){nS(U.scale,U.model,v.scale)}))}}this._updateScale(s,this.model),u(l.x),u(l.y);var h={};(0,b.each)(l.x,function(p){Ur(l,"y",p,h)}),(0,b.each)(l.y,function(p){Ur(l,"x",p,h)}),this.resize(this.model,a)},c.prototype.resize=function(s,a,l){var u=s.getBoxLayoutParams(),h=!l&&s.get("containLabel"),p=(0,Oe.ME)(u,{width:a.getWidth(),height:a.getHeight()});this._rect=p;var v=this._axesList;function m(){(0,b.each)(v,function(y){var x=y.isHorizontal(),C=x?[0,p.width]:[0,p.height],M=y.inverse?1:0;y.setExtent(C[M],C[1-M]),function to(c,s){var a=c.getExtent(),l=a[0]+a[1];c.toGlobalCoord="x"===c.dim?function(u){return u+s}:function(u){return l-u+s},c.toLocalCoord="x"===c.dim?function(u){return u-s}:function(u){return l-u+s}}(y,x?p.x:p.y)})}m(),h&&((0,b.each)(v,function(y){if(!y.model.get(["axisLabel","inside"])){var x=(0,wa.Do)(y);if(x){var C=y.isHorizontal()?"height":"width",M=y.model.get(["axisLabel","margin"]);p[C]-=x[C]+M,"top"===y.position?p.y+=x.height+M:"left"===y.position&&(p.x+=x.width+M)}}}),m()),(0,b.each)(this._coordsList,function(y){y.calcAffineTransform()})},c.prototype.getAxis=function(s,a){var l=this._axesMap[s];if(null!=l)return l[a||0]},c.prototype.getAxes=function(){return this._axesList.slice()},c.prototype.getCartesian=function(s,a){if(null!=s&&null!=a)return this._coordsMap["x"+s+"y"+a];(0,b.isObject)(s)&&(a=s.yAxisIndex,s=s.xAxisIndex);for(var u=0,h=this._coordsList;u<h.length;u++)if(h[u].getAxis("x").index===s||h[u].getAxis("y").index===a)return h[u]},c.prototype.getCartesians=function(){return this._coordsList.slice()},c.prototype.convertToPixel=function(s,a,l){var u=this._findConvertTarget(a);return u.cartesian?u.cartesian.dataToPoint(l):u.axis?u.axis.toGlobalCoord(u.axis.dataToCoord(l)):null},c.prototype.convertFromPixel=function(s,a,l){var u=this._findConvertTarget(a);return u.cartesian?u.cartesian.pointToData(l):u.axis?u.axis.coordToData(u.axis.toLocalCoord(l)):null},c.prototype._findConvertTarget=function(s){var v,m,a=s.seriesModel,l=s.xAxisModel||a&&a.getReferringComponents("xAxis",An.C6).models[0],u=s.yAxisModel||a&&a.getReferringComponents("yAxis",An.C6).models[0],h=s.gridModel;return a?(0,b.indexOf)(this._coordsList,v=a.coordinateSystem)<0&&(v=null):l&&u?v=this.getCartesian(l.componentIndex,u.componentIndex):l?m=this.getAxis("x",l.componentIndex):u?m=this.getAxis("y",u.componentIndex):h&&h.coordinateSystem===this&&(v=this._coordsList[0]),{cartesian:v,axis:m}},c.prototype.containPoint=function(s){var a=this._coordsList[0];if(a)return a.containPoint(s)},c.prototype._initCartesian=function(s,a,l){var u=this,h=this,p={left:!1,right:!1,top:!1,bottom:!1},v={x:{},y:{}},m={x:0,y:0};if(a.eachComponent("xAxis",y("x"),this),a.eachComponent("yAxis",y("y"),this),!m.x||!m.y)return this._axesMap={},void(this._axesList=[]);function y(x){return function(C,M){if(yi(C,s)){var E=C.get("position");"x"===x?"top"!==E&&"bottom"!==E&&(E=p.bottom?"top":"bottom"):"left"!==E&&"right"!==E&&(E=p.left?"right":"left"),p[E]=!0;var R=new qC(x,(0,wa.aG)(C),[0,0],C.get("type"),E);R.onBand="category"===R.type&&C.get("boundaryGap"),R.inverse=C.get("inverse"),C.axis=R,R.model=C,R.grid=h,R.index=M,h._axesList.push(R),v[x][M]=R,m[x]++}}}this._axesMap=v,(0,b.each)(v.x,function(x,C){(0,b.each)(v.y,function(M,E){var R="x"+C+"y"+E,F=new QC(R);F.master=u,F.model=s,u._coordsMap[R]=F,u._coordsList.push(F),F.addAxis(x),F.addAxis(M)})})},c.prototype._updateScale=function(s,a){function l(u,h){(0,b.each)((0,wa.PY)(u,h.dim),function(p){h.scale.unionExtentFromData(u,p)})}(0,b.each)(this._axesList,function(u){if(u.scale.setExtent(1/0,-1/0),"category"===u.type){var h=u.model.get("categorySortInfo");u.scale.setSortInfo(h)}}),s.eachSeries(function(u){if(eS(u)){var h=tS(u),p=h.xAxisModel,v=h.yAxisModel;if(!yi(p,a)||!yi(v,a))return;var m=this.getCartesian(p.componentIndex,v.componentIndex),y=u.getData(),x=m.getAxis("x"),C=m.getAxis("y");l(y,x),l(y,C)}},this)},c.prototype.getTooltipAxes=function(s){var a=[],l=[];return(0,b.each)(this.getCartesians(),function(u){var h=null!=s&&"auto"!==s?u.getAxis(s):u.getBaseAxis(),p=u.getOtherAxis(h);(0,b.indexOf)(a,h)<0&&a.push(h),(0,b.indexOf)(l,p)<0&&l.push(p)}),{baseAxes:a,otherAxes:l}},c.create=function(s,a){var l=[];return s.eachComponent("grid",function(u,h){var p=new c(u,s,a);p.name="grid_"+h,p.resize(u,a,!0),u.coordinateSystem=p,l.push(p)}),s.eachSeries(function(u){if(eS(u)){var h=tS(u),p=h.xAxisModel,v=h.yAxisModel,m=p.getCoordSysModel();u.coordinateSystem=m.coordinateSystem.getCartesian(p.componentIndex,v.componentIndex)}}),l},c.dimensions=mh,c}();var no=z(1995),ki=z(1363),Kl=Math.PI,Bc=function(){function c(s,a){this.group=new Vn.Z,this.opt=a,this.axisModel=s,(0,b.defaults)(a,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var l=new Vn.Z({x:a.position[0],y:a.position[1],rotation:a.rotation});l.updateTransform(),this._transformGroup=l}return c.prototype.hasBuilder=function(s){return!!RP[s]},c.prototype.add=function(s){RP[s](this.opt,this.axisModel,this.group,this._transformGroup)},c.prototype.getGroup=function(){return this.group},c.innerTextLayout=function(s,a,l){var h,p,u=(0,ft.wW)(a-s);return(0,ft.mW)(u)?(p=l>0?"top":"bottom",h="center"):(0,ft.mW)(u-Kl)?(p=l>0?"bottom":"top",h="center"):(p="middle",h=u>0&&u<Kl?l>0?"right":"left":l>0?"left":"right"),{rotation:u,textAlign:h,textVerticalAlign:p}},c.makeAxisEventDataBase=function(s){var a={componentType:s.mainType,componentIndex:s.componentIndex};return a[s.mainType+"Index"]=s.componentIndex,a},c.isLabelSilent=function(s){var a=s.get("tooltip");return s.get("silent")||!(s.get("triggerEvent")||a&&a.show)},c}(),RP={axisLine:function(c,s,a,l){var u=s.get(["axisLine","show"]);if("auto"===u&&c.handleAutoShown&&(u=c.handleAutoShown("axisLine")),u){var h=s.axis.getExtent(),p=l.transform,v=[h[0],0],m=[h[1],0],y=v[0]>m[0];p&&((0,lr.applyTransform)(v,v,p),(0,lr.applyTransform)(m,m,p));var x=(0,b.extend)({lineCap:"round"},s.getModel(["axisLine","lineStyle"]).getLineStyle()),C=new no.Z({shape:{x1:v[0],y1:v[1],x2:m[0],y2:m[1]},style:x,strokeContainThreshold:c.strokeContainThreshold||5,silent:!0,z2:1});Un.subPixelOptimizeLine(C.shape,C.style.lineWidth),C.anid="line",a.add(C);var M=s.get(["axisLine","symbol"]);if(null!=M){var E=s.get(["axisLine","symbolSize"]);(0,b.isString)(M)&&(M=[M,M]),((0,b.isString)(E)||(0,b.isNumber)(E))&&(E=[E,E]);var R=(0,dr.Cq)(s.get(["axisLine","symbolOffset"])||0,E),F=E[0],U=E[1];(0,b.each)([{rotate:c.rotation+Math.PI/2,offset:R[0],r:0},{rotate:c.rotation-Math.PI/2,offset:R[1],r:Math.sqrt((v[0]-m[0])*(v[0]-m[0])+(v[1]-m[1])*(v[1]-m[1]))}],function(ue,me){if("none"!==M[me]&&null!=M[me]){var ve=(0,dr.th)(M[me],-F/2,-U/2,F,U,x.stroke,!0),Me=ue.r+ue.offset,Ae=y?m:v;ve.attr({rotation:ue.rotate,x:Ae[0]+Me*Math.cos(c.rotation),y:Ae[1]-Me*Math.sin(c.rotation),silent:!0,z2:11}),a.add(ve)}})}}},axisTickLabel:function(c,s,a,l){var u=function yh(c,s,a,l){var u=a.axis,h=a.getModel("axisTick"),p=h.get("show");if("auto"===p&&l.handleAutoShown&&(p=l.handleAutoShown("axisTick")),p&&!u.scale.isBlank()){for(var v=h.getModel("lineStyle"),m=l.tickDirection*h.get("length"),x=d0(u.getTicksCoords(),s.transform,m,(0,b.defaults)(v.getLineStyle(),{stroke:a.get(["axisLine","lineStyle","color"])}),"ticks"),C=0;C<x.length;C++)c.add(x[C]);return x}}(a,l,s,c),h=function OP(c,s,a,l){var u=a.axis;if((0,b.retrieve)(l.axisLabelShow,a.get(["axisLabel","show"]))&&!u.scale.isBlank()){var p=a.getModel("axisLabel"),v=p.get("margin"),m=u.getViewLabels(),y=((0,b.retrieve)(l.labelRotate,p.get("rotate"))||0)*Kl/180,x=Bc.innerTextLayout(l.rotation,y,l.labelDirection),C=a.getCategories&&a.getCategories(!0),M=[],E=Bc.isLabelSilent(a),R=a.get("triggerEvent");return(0,b.each)(m,function(F,U){var ue="ordinal"===u.scale.type?u.scale.getRawOrdinalNumber(F.tickValue):F.tickValue,me=F.formattedLabel,ve=F.rawLabel,Me=p;if(C&&C[ue]){var Ae=C[ue];(0,b.isObject)(Ae)&&Ae.textStyle&&(Me=new ki.Z(Ae.textStyle,p,a.ecModel))}var Pe=Me.getTextColor()||a.get(["axisLine","lineStyle","color"]),Ne=u.dataToCoord(ue),He=Me.getShallow("align",!0)||x.textAlign,Ye=(0,b.retrieve2)(Me.getShallow("alignMinLabel",!0),He),Qe=(0,b.retrieve2)(Me.getShallow("alignMaxLabel",!0),He),it=Me.getShallow("verticalAlign",!0)||Me.getShallow("baseline",!0)||x.textVerticalAlign,ct=(0,b.retrieve2)(Me.getShallow("verticalAlignMinLabel",!0),it),ht=(0,b.retrieve2)(Me.getShallow("verticalAlignMaxLabel",!0),it),vt=new kt.ZP({x:Ne,y:l.labelOffset+l.labelDirection*v,rotation:x.rotation,silent:E,z2:10+(F.level||0),style:(0,Bn.Lr)(Me,{text:me,align:0===U?Ye:U===m.length-1?Qe:He,verticalAlign:0===U?ct:U===m.length-1?ht:it,fill:(0,b.isFunction)(Pe)?Pe("category"===u.type?ve:"value"===u.type?ue+"":ue,U):Pe})});if(vt.anid="label_"+ue,R){var gt=Bc.makeAxisEventDataBase(a);gt.targetType="axisLabel",gt.value=ve,gt.tickIndex=U,"category"===u.type&&(gt.dataIndex=ue),(0,Fn.A)(vt).eventData=gt}s.add(vt),vt.updateTransform(),M.push(vt),c.add(vt),vt.decomposeTransform()}),M}}(a,l,s,c);if(function b5(c,s,a){if(!(0,wa.WY)(c.axis)){var l=c.get(["axisLabel","showMinLabel"]),u=c.get(["axisLabel","showMaxLabel"]),h=(s=s||[])[0],p=s[1],v=s[s.length-1],m=s[s.length-2],y=(a=a||[])[0],x=a[1],C=a[a.length-1],M=a[a.length-2];!1===l?(Ps(h),Ps(y)):Uo(h,p)&&(l?(Ps(p),Ps(x)):(Ps(h),Ps(y))),!1===u?(Ps(v),Ps(C)):Uo(m,v)&&(u?(Ps(m),Ps(M)):(Ps(v),Ps(C)))}}(s,h,u),function Vc(c,s,a,l){var u=a.axis,h=a.getModel("minorTick");if(h.get("show")&&!u.scale.isBlank()){var p=u.getMinorTicksCoords();if(p.length)for(var v=h.getModel("lineStyle"),m=l*h.get("length"),y=(0,b.defaults)(v.getLineStyle(),(0,b.defaults)(a.getModel("axisTick").getLineStyle(),{stroke:a.get(["axisLine","lineStyle","color"])})),x=0;x<p.length;x++)for(var C=d0(p[x],s.transform,m,y,"minorticks_"+x),M=0;M<C.length;M++)c.add(C[M])}}(a,l,s,c.tickDirection),s.get(["axisLabel","hideOverlap"])){var p=(0,ut.VT)((0,b.map)(h,function(v){return{label:v,priority:v.z2,defaultAttr:{ignore:v.ignore}}}));(0,ut.yl)(p)}},axisName:function(c,s,a,l){var u=(0,b.retrieve)(c.axisName,s.get("name"));if(u){var M,R,h=s.get("nameLocation"),p=c.nameDirection,v=s.getModel("nameTextStyle"),m=s.get("nameGap")||0,y=s.axis.getExtent(),x=y[0]>y[1]?-1:1,C=["start"===h?y[0]-x*m:"end"===h?y[1]+x*m:(y[0]+y[1])/2,Ql(h)?c.labelOffset+p*m:0],E=s.get("nameRotate");null!=E&&(E=E*Kl/180),Ql(h)?M=Bc.innerTextLayout(c.rotation,E??c.rotation,p):(M=function LP(c,s,a,l){var h,p,u=(0,ft.wW)(a-c),v=l[0]>l[1],m="start"===s&&!v||"start"!==s&&v;return(0,ft.mW)(u-Kl/2)?(p=m?"bottom":"top",h="center"):(0,ft.mW)(u-1.5*Kl)?(p=m?"top":"bottom",h="center"):(p="middle",h=u<1.5*Kl&&u>Kl/2?m?"left":"right":m?"right":"left"),{rotation:u,textAlign:h,textVerticalAlign:p}}(c.rotation,h,E||0,y),null!=(R=c.axisNameAvailableWidth)&&(R=Math.abs(R/Math.sin(M.rotation)),!isFinite(R)&&(R=null)));var F=v.getFont(),U=s.get("nameTruncate",!0)||{},ue=U.ellipsis,me=(0,b.retrieve)(c.nameTruncateMaxWidth,U.maxWidth,R),ve=new kt.ZP({x:C[0],y:C[1],rotation:M.rotation,silent:Bc.isLabelSilent(s),style:(0,Bn.Lr)(v,{text:u,font:F,overflow:"truncate",width:me,ellipsis:ue,fill:v.getTextColor()||s.get(["axisLine","lineStyle","color"]),align:v.get("align")||M.textAlign,verticalAlign:v.get("verticalAlign")||M.textVerticalAlign}),z2:1});if(Un.setTooltipConfig({el:ve,componentModel:s,itemName:u}),ve.__fullText=u,ve.anid="name",s.get("triggerEvent")){var Me=Bc.makeAxisEventDataBase(s);Me.targetType="axisName",Me.name=u,(0,Fn.A)(ve).eventData=Me}l.add(ve),ve.updateTransform(),a.add(ve),ve.decomposeTransform()}}};function Ps(c){c&&(c.ignore=!0)}function Uo(c,s){var a=c&&c.getBoundingRect().clone(),l=s&&s.getBoundingRect().clone();if(a&&l){var u=Hr.identity([]);return Hr.rotate(u,u,-c.rotation),a.applyTransform(Hr.mul([],u,c.getLocalTransform())),l.applyTransform(Hr.mul([],u,s.getLocalTransform())),a.intersect(l)}}function Ql(c){return"middle"===c||"center"===c}function d0(c,s,a,l,u){for(var h=[],p=[],v=[],m=0;m<c.length;m++){var y=c[m].coord;p[0]=y,p[1]=0,v[0]=y,v[1]=a,s&&((0,lr.applyTransform)(p,p,s),(0,lr.applyTransform)(v,v,s));var x=new no.Z({shape:{x1:p[0],y1:p[1],x2:v[0],y2:v[1]},style:l,z2:2,autoBatch:!0,silent:!0});Un.subPixelOptimizeLine(x.shape,x.style.lineWidth),x.anid=u+"_"+c[m].tickValue,h.push(x)}return h}const ql=Bc;function up(c,s){return"all"===c||(0,b.isArray)(c)&&(0,b.indexOf)(c,s)>=0||c===s}function FP(c){var s=Zv(c);if(s){var a=s.axisPointerModel,l=s.axis.scale,u=a.option,h=a.get("status"),p=a.get("value");null!=p&&(p=l.parse(p));var v=Yv(a);null==h&&(u.status=v?"show":"hide");var m=l.getExtent().slice();m[0]>m[1]&&m.reverse(),(null==p||p>m[1])&&(p=m[1]),p<m[0]&&(p=m[0]),u.value=p,v&&(u.status=s.axis.scale.isBlank()?"hide":"show")}}function Zv(c){var s=(c.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return s&&s.axesInfo[bh(c)]}function Yv(c){return!!c.get(["handle","show"])}function bh(c){return c.type+"||"+c.id}var g0={};const zc=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u,h){this.axisPointerClass&&FP(a),c.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(a,u,!0)},s.prototype.updateAxisPointer=function(a,l,u,h){this._doUpdateAxisPointerClass(a,u,!1)},s.prototype.remove=function(a,l){var u=this._axisPointer;u&&u.remove(l)},s.prototype.dispose=function(a,l){this._disposeAxisPointer(l),c.prototype.dispose.apply(this,arguments)},s.prototype._doUpdateAxisPointerClass=function(a,l,u){var h=s.getAxisPointerClass(this.axisPointerClass);if(h){var p=function p0(c){var s=Zv(c);return s&&s.axisPointerModel}(a);p?(this._axisPointer||(this._axisPointer=new h)).render(a,p,l,u):this._disposeAxisPointer(l)}},s.prototype._disposeAxisPointer=function(a){this._axisPointer&&this._axisPointer.dispose(a),this._axisPointer=null},s.registerAxisPointerClass=function(a,l){g0[a]=l},s.getAxisPointerClass=function(a){return a&&g0[a]},s.type="axis",s}(Ra.Z);var v0=(0,An.Yf)();function oS(c,s,a,l){var u=a.axis;if(!u.scale.isBlank()){var h=a.getModel("splitArea"),p=h.getModel("areaStyle"),v=p.get("color"),m=l.coordinateSystem.getRect(),y=u.getTicksCoords({tickModel:h,clamp:!0});if(y.length){var x=v.length,C=v0(c).splitAreaColors,M=b.createHashMap(),E=0;if(C)for(var R=0;R<y.length;R++){var F=C.get(y[R].tickValue);if(null!=F){E=(F+(x-1)*R)%x;break}}var U=u.toGlobalCoord(y[0].coord),ue=p.getAreaStyle();for(v=b.isArray(v)?v:[v],R=1;R<y.length;R++){var me=u.toGlobalCoord(y[R].coord),ve=void 0,Me=void 0,Ae=void 0,Pe=void 0;u.isHorizontal()?(Me=m.y,Pe=m.height,U=(ve=U)+(Ae=me-ve)):(ve=m.x,Ae=m.width,U=(Me=U)+(Pe=me-Me));var Ne=y[R-1].tickValue;null!=Ne&&M.set(Ne,E),s.add(new Jt.Z({anid:null!=Ne?"area_"+Ne:null,shape:{x:ve,y:Me,width:Ae,height:Pe},style:b.defaults({fill:v[E]},ue),autoBatch:!0,silent:!0})),E=(E+1)%x}v0(c).splitAreaColors=M}}}function Go(c){v0(c).splitAreaColors=null}var vu=["axisLine","axisTickLabel","axisName"],Ca=["splitArea","splitLine","minorSplitLine"],xh=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.axisPointerClass="CartesianAxisPointer",a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u,h){this.group.removeAll();var p=this._axisGroup;if(this._axisGroup=new Vn.Z,this.group.add(this._axisGroup),a.get("show")){var v=a.getCoordSysModel(),m=JC(v,a),y=new ql(a,b.extend({handleAutoShown:function(C){for(var M=v.coordinateSystem.getCartesians(),E=0;E<M.length;E++)if((0,_h.lM)(M[E].getOtherAxis(a.axis).scale))return!0;return!1}},m));b.each(vu,y.add,y),this._axisGroup.add(y.getGroup()),b.each(Ca,function(C){a.get([C,"show"])&&BP[C](this,this._axisGroup,a,v)},this),h&&"changeAxisOrder"===h.type&&h.isInitSort||Un.groupTransition(p,this._axisGroup,a),c.prototype.render.call(this,a,l,u,h)}},s.prototype.remove=function(){Go(this)},s.type="cartesianAxis",s}(zc),BP={splitLine:function(c,s,a,l){var u=a.axis;if(!u.scale.isBlank()){var h=a.getModel("splitLine"),p=h.getModel("lineStyle"),v=p.get("color");v=b.isArray(v)?v:[v];for(var m=l.coordinateSystem.getRect(),y=u.isHorizontal(),x=0,C=u.getTicksCoords({tickModel:h}),M=[],E=[],R=p.getLineStyle(),F=0;F<C.length;F++){var U=u.toGlobalCoord(C[F].coord);y?(M[0]=U,M[1]=m.y,E[0]=U,E[1]=m.y+m.height):(M[0]=m.x,M[1]=U,E[0]=m.x+m.width,E[1]=U);var ue=x++%v.length,ve=new no.Z({anid:null!=C[F].tickValue?"line_"+C[F].tickValue:null,autoBatch:!0,shape:{x1:M[0],y1:M[1],x2:E[0],y2:E[1]},style:b.defaults({stroke:v[ue]},R),silent:!0});Un.subPixelOptimizeLine(ve.shape,R.lineWidth),s.add(ve)}}},minorSplitLine:function(c,s,a,l){var u=a.axis,p=a.getModel("minorSplitLine").getModel("lineStyle"),v=l.coordinateSystem.getRect(),m=u.isHorizontal(),y=u.getMinorTicksCoords();if(y.length)for(var x=[],C=[],M=p.getLineStyle(),E=0;E<y.length;E++)for(var R=0;R<y[E].length;R++){var F=u.toGlobalCoord(y[E][R].coord);m?(x[0]=F,x[1]=v.y,C[0]=F,C[1]=v.y+v.height):(x[0]=v.x,x[1]=F,C[0]=v.x+v.width,C[1]=F);var U=new no.Z({anid:"minor_line_"+y[E][R].tickValue,autoBatch:!0,shape:{x1:x[0],y1:x[1],x2:C[0],y2:C[1]},style:M,silent:!0});Un.subPixelOptimizeLine(U.shape,M.lineWidth),s.add(U)}},splitArea:function(c,s,a,l){oS(c,s,a,l)}},m0=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.type="xAxis",s}(xh),VP=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=m0.type,a}return(0,Rt.ZT)(s,c),s.type="yAxis",s}(xh),zP=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type="grid",a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l){this.group.removeAll(),a.get("show")&&this.group.add(new Jt.Z({shape:a.coordinateSystem.getRect(),style:(0,b.defaults)({fill:a.get("backgroundColor")},a.getItemStyle()),silent:!0,z2:-1}))},s.type="grid",s}(Ra.Z),dp={offset:0};function hp(c){c.registerComponentView(zP),c.registerComponentModel(s0),c.registerCoordinateSystem("cartesian2d",rS),Po(c,"x",gs,dp),Po(c,"y",gs,dp),c.registerComponentView(m0),c.registerComponentView(VP),c.registerPreprocessor(function(s){s.xAxis&&s.yAxis&&!s.grid&&(s.grid={})})}function _0(c){c.eachSeriesByType("radar",function(s){var a=s.getData(),l=[],u=s.coordinateSystem;if(u){var h=u.getIndicatorAxes();b.each(h,function(p,v){a.each(a.mapDimension(h[v].dim),function(m,y){l[y]=l[y]||[];var x=u.dataToPoint(m,v);l[y][v]=y0(x)?x:sS(u)})}),a.each(function(p){var v=b.find(l[p],function(m){return y0(m)})||sS(u);l[p].push(v.slice()),a.setItemLayout(p,l[p])})}})}function y0(c){return!isNaN(c[0])&&!isNaN(c[1])}function sS(c){return[c.cx,c.cy]}function mu(c){var s=c.polar;if(s){b.isArray(s)||(s=[s]);var a=[];b.each(s,function(l,u){l.indicator?(l.type&&!l.shape&&(l.shape=l.type),c.radar=c.radar||[],b.isArray(c.radar)||(c.radar=[c.radar]),c.radar.push(l)):a.push(l)}),c.polar=a}b.each(c.series,function(l){l&&"radar"===l.type&&l.polarIndex&&(l.radarIndex=l.polarIndex)})}var Wo=z(8822);const UP=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u){var h=a.coordinateSystem,p=this.group,v=a.getData(),m=this._data;function y(M,E){var R=M.getItemVisual(E,"symbol")||"circle";if("none"!==R){var F=dr.zp(M.getItemVisual(E,"symbolSize")),U=dr.th(R,-1,-1,2,2),ue=M.getItemVisual(E,"symbolRotate")||0;return U.attr({style:{strokeNoScale:!0},z2:100,scaleX:F[0]/2,scaleY:F[1]/2,rotation:ue*Math.PI/180||0}),U}}function x(M,E,R,F,U,ue){R.removeAll();for(var me=0;me<E.length-1;me++){var ve=y(F,U);ve&&(ve.__dimIdx=me,M[me]?(ve.setPosition(M[me]),Un[ue?"initProps":"updateProps"](ve,{x:E[me][0],y:E[me][1]},a,U)):ve.setPosition(E[me]),R.add(ve))}}function C(M){return b.map(M,function(E){return[h.cx,h.cy]})}v.diff(m).add(function(M){var E=v.getItemLayout(M);if(E){var R=new Wo.Z,F=new Pt.Z,U={shape:{points:E}};R.shape.points=C(E),F.shape.points=C(E),on.KZ(R,U,a,M),on.KZ(F,U,a,M);var ue=new Vn.Z,me=new Vn.Z;ue.add(F),ue.add(R),ue.add(me),x(F.shape.points,E,me,v,M,!0),v.setItemGraphicEl(M,ue)}}).update(function(M,E){var R=m.getItemGraphicEl(E),F=R.childAt(0),U=R.childAt(1),ue=R.childAt(2),me={shape:{points:v.getItemLayout(M)}};!me.shape.points||(x(F.shape.points,me.shape.points,ue,v,M,!1),(0,on.Zi)(U),(0,on.Zi)(F),on.D(F,me,a),on.D(U,me,a),v.setItemGraphicEl(M,R))}).remove(function(M){p.remove(m.getItemGraphicEl(M))}).execute(),v.eachItemGraphicEl(function(M,E){var R=v.getItemModel(E),F=M.childAt(0),U=M.childAt(1),ue=M.childAt(2),me=v.getItemVisual(E,"style"),ve=me.fill;p.add(M),F.useStyle(b.defaults(R.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:ve})),(0,bn.WO)(F,R,"lineStyle"),(0,bn.WO)(U,R,"areaStyle");var Me=R.getModel("areaStyle"),Ae=Me.isEmpty()&&Me.parentModel.isEmpty();U.ignore=Ae,b.each(["emphasis","select","blur"],function(He){var Ye=R.getModel([He,"areaStyle"]),Qe=Ye.isEmpty()&&Ye.parentModel.isEmpty();U.ensureState(He).ignore=Qe&&Ae}),U.useStyle(b.defaults(Me.getAreaStyle(),{fill:ve,opacity:.7,decal:me.decal}));var Pe=R.getModel("emphasis"),Ne=Pe.getModel("itemStyle").getItemStyle();ue.eachChild(function(He){if(He instanceof be.ZP){var Ye=He.style;He.useStyle(b.extend({image:Ye.image,x:Ye.x,y:Ye.y,width:Ye.width,height:Ye.height},me))}else He.useStyle(me),He.setColor(ve),He.style.strokeNoScale=!0;He.ensureState("emphasis").style=b.clone(Ne);var it=v.getStore().get(v.getDimensionIndex(He.__dimIdx),E);(null==it||isNaN(it))&&(it=""),(0,Bn.ni)(He,(0,Bn.k3)(R),{labelFetcher:v.hostModel,labelDataIndex:E,labelDimIndex:He.__dimIdx,defaultText:it,inheritColor:ve,defaultOpacity:me.opacity})}),(0,bn.k5)(M,Pe.get("focus"),Pe.get("blurScope"),Pe.get("disabled"))}),this._data=v},s.prototype.remove=function(){this.group.removeAll(),this._data=null},s.type="radar",s}(na.Z);var Ui=z(7475);const GP=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.hasSymbolVisual=!0,a}return(0,Rt.ZT)(s,c),s.prototype.init=function(a){c.prototype.init.apply(this,arguments),this.legendVisualProvider=new eo(b.bind(this.getData,this),b.bind(this.getRawData,this))},s.prototype.getInitialData=function(a,l){return _i(this,{generateCoord:"indicator_",generateCoordCount:1/0})},s.prototype.formatTooltip=function(a,l,u){var h=this.getData(),v=this.coordinateSystem.getIndicatorAxes(),m=this.getData().getName(a),y=""===m?this.name:m,x=(0,Ui.jT)(this,a);return(0,Ui.TX)("section",{header:y,sortBlocks:!0,blocks:b.map(v,function(C){var M=h.get(h.mapDimension(C.dim),a);return(0,Ui.TX)("nameValue",{markerType:"subItem",markerColor:x,name:C.name,value:M,sortParam:M})})})},s.prototype.getTooltipPosition=function(a){if(null!=a)for(var l=this.getData(),u=this.coordinateSystem,h=l.getValues(b.map(u.dimensions,function(y){return l.mapDimension(y)}),a),p=0,v=h.length;p<v;p++)if(!isNaN(h[p])){var m=u.getIndicatorAxes();return u.coordToPoint(m[p].dataToCoord(h[p]),p)}},s.type="series.radar",s.dependencies=["radar"],s.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},s}(zi.Z);var fp=XC.value;function x0(c,s){return b.defaults({show:s},c)}const $v=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.optionUpdated=function(){var a=this.get("boundaryGap"),l=this.get("splitNumber"),u=this.get("scale"),h=this.get("axisLine"),p=this.get("axisTick"),v=this.get("axisLabel"),m=this.get("axisName"),y=this.get(["axisName","show"]),x=this.get(["axisName","formatter"]),C=this.get("axisNameGap"),M=this.get("triggerEvent"),E=b.map(this.get("indicator")||[],function(R){null!=R.max&&R.max>0&&!R.min?R.min=0:null!=R.min&&R.min<0&&!R.max&&(R.max=0);var F=m;null!=R.color&&(F=b.defaults({color:R.color},m));var U=b.merge(b.clone(R),{boundaryGap:a,splitNumber:l,scale:u,axisLine:h,axisTick:p,axisLabel:v,name:R.text,showName:y,nameLocation:"end",nameGap:C,nameTextStyle:F,triggerEvent:M},!1);b.isString(x)?U.name=x.replace("{value}",U.name??""):b.isFunction(x)&&(U.name=x(U.name,U));var me=new ki.Z(U,null,this.ecModel);return b.mixin(me,lp.W.prototype),me.mainType="radar",me.componentIndex=this.componentIndex,me},this);this._indicatorModels=E},s.prototype.getIndicatorModels=function(){return this._indicatorModels},s.type="radar",s.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:b.merge({lineStyle:{color:"#bbb"}},fp.axisLine),axisLabel:x0(fp.axisLabel,!1),axisTick:x0(fp.axisTick,!1),splitLine:x0(fp.splitLine,!0),splitArea:x0(fp.splitArea,!0),indicator:[]},s}(xa.Z);var wh=z(421),w0=z(5693),Kv=["axisLine","axisTickLabel","axisName"];const cS=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u){this.group.removeAll(),this._buildAxes(a),this._buildSplitLineAndArea(a)},s.prototype._buildAxes=function(a){var l=a.coordinateSystem,u=l.getIndicatorAxes(),h=b.map(u,function(p){var v=p.model.get("showName")?p.name:"";return new ql(p.model,{axisName:v,position:[l.cx,l.cy],rotation:p.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})});b.each(h,function(p){b.each(Kv,p.add,p),this.group.add(p.getGroup())},this)},s.prototype._buildSplitLineAndArea=function(a){var l=a.coordinateSystem,u=l.getIndicatorAxes();if(u.length){var h=a.get("shape"),p=a.getModel("splitLine"),v=a.getModel("splitArea"),m=p.getModel("lineStyle"),y=v.getModel("areaStyle"),x=p.get("show"),C=v.get("show"),M=m.get("color"),E=y.get("color"),R=b.isArray(M)?M:[M],F=b.isArray(E)?E:[E],U=[],ue=[];if("circle"===h)for(var ve=u[0].getTicksCoords(),Me=l.cx,Ae=l.cy,Pe=0;Pe<ve.length;Pe++)x&&U[me(U,R,Pe)].push(new wh.Z({shape:{cx:Me,cy:Ae,r:ve[Pe].coord}})),C&&Pe<ve.length-1&&ue[me(ue,F,Pe)].push(new w0.Z({shape:{cx:Me,cy:Ae,r0:ve[Pe].coord,r:ve[Pe+1].coord}}));else{var He,Ye=b.map(u,function(gt,Ot){var Gt=gt.getTicksCoords();return He=null==He?Gt.length-1:Math.min(Gt.length-1,He),b.map(Gt,function(Ft){return l.coordToPoint(Ft.coord,Ot)})}),Qe=[];for(Pe=0;Pe<=He;Pe++){for(var it=[],ct=0;ct<u.length;ct++)it.push(Ye[ct][Pe]);it[0]&&it.push(it[0].slice()),x&&U[me(U,R,Pe)].push(new Pt.Z({shape:{points:it}})),C&&Qe&&ue[me(ue,F,Pe-1)].push(new Wo.Z({shape:{points:it.concat(Qe)}})),Qe=it.slice().reverse()}}var ht=m.getLineStyle(),vt=y.getAreaStyle();b.each(ue,function(gt,Ot){this.group.add(Un.mergePath(gt,{style:b.defaults({stroke:"none",fill:F[Ot%F.length]},vt),silent:!0}))},this),b.each(U,function(gt,Ot){this.group.add(Un.mergePath(gt,{style:b.defaults({fill:"none",stroke:R[Ot%R.length]},ht),silent:!0}))},this)}function me(gt,Ot,Gt){var Ft=Gt%Ot.length;return gt[Ft]=gt[Ft]||[],Ft}},s.type="radar",s}(Ra.Z),WP=function(c){function s(a,l,u){var h=c.call(this,a,l,u)||this;return h.type="value",h.angle=0,h.name="",h}return(0,Rt.ZT)(s,c),s}(Is.Z),C0=function(){function c(s,a,l){this.dimensions=[],this._model=s,this._indicatorAxes=(0,b.map)(s.getIndicatorModels(),function(u,h){var p="indicator_"+h,v=new WP(p,new cp.Z);return v.name=u.get("name"),v.model=u,u.axis=v,this.dimensions.push(p),v},this),this.resize(s,l)}return c.prototype.getIndicatorAxes=function(){return this._indicatorAxes},c.prototype.dataToPoint=function(s,a){return this.coordToPoint(this._indicatorAxes[a].dataToCoord(s),a)},c.prototype.coordToPoint=function(s,a){var u=this._indicatorAxes[a].angle;return[this.cx+s*Math.cos(u),this.cy-s*Math.sin(u)]},c.prototype.pointToData=function(s){var a=s[0]-this.cx,l=s[1]-this.cy,u=Math.sqrt(a*a+l*l);a/=u,l/=u;for(var v,h=Math.atan2(-l,a),p=1/0,m=-1,y=0;y<this._indicatorAxes.length;y++){var x=this._indicatorAxes[y],C=Math.abs(h-x.angle);C<p&&(v=x,m=y,p=C)}return[m,+(v&&v.coordToData(u))]},c.prototype.resize=function(s,a){var l=s.get("center"),u=a.getWidth(),h=a.getHeight(),p=Math.min(u,h)/2;this.cx=ft.GM(l[0],u),this.cy=ft.GM(l[1],h),this.startAngle=s.get("startAngle")*Math.PI/180;var v=s.get("radius");((0,b.isString)(v)||(0,b.isNumber)(v))&&(v=[0,v]),this.r0=ft.GM(v[0],p),this.r=ft.GM(v[1],p),(0,b.each)(this._indicatorAxes,function(m,y){m.setExtent(this.r0,this.r);var x=this.startAngle+y*Math.PI*2/this._indicatorAxes.length;x=Math.atan2(Math.sin(x),Math.cos(x)),m.angle=x},this)},c.prototype.update=function(s,a){var l=this._indicatorAxes,u=this._model;(0,b.each)(l,function(v){v.scale.setExtent(1/0,-1/0)}),s.eachSeriesByType("radar",function(v,m){if("radar"===v.get("coordinateSystem")&&s.getComponent("radar",v.get("radarIndex"))===u){var y=v.getData();(0,b.each)(l,function(x){x.scale.unionExtentFromData(y,y.mapDimension(x.dim))})}},this);var h=u.get("splitNumber"),p=new cp.Z;p.setExtent(0,h),p.setInterval(1),(0,b.each)(l,function(v,m){nS(v.scale,v.model,p)})},c.prototype.convertToPixel=function(s,a,l){return console.warn("Not implemented."),null},c.prototype.convertFromPixel=function(s,a,l){return console.warn("Not implemented."),null},c.prototype.containPoint=function(s){return console.warn("Not implemented."),!1},c.create=function(s,a){var l=[];return s.eachComponent("radar",function(u){var h=new c(u,s,a);l.push(h),u.coordinateSystem=h}),s.eachSeriesByType("radar",function(u){"radar"===u.get("coordinateSystem")&&(u.coordinateSystem=l[u.get("radarIndex")||0])}),l},c.dimensions=[],c}();function Qv(c){c.registerCoordinateSystem("radar",C0),c.registerComponentModel($v),c.registerComponentView(cS),c.registerVisual({seriesType:"radar",reset:function(s){var a=s.getData();a.each(function(l){a.setItemVisual(l,"legendIcon","roundRect")}),a.setVisual("legendIcon","roundRect")}})}var S0=z(6735),vs=z(2614),qv=z(5985),wl="\0_ec_interaction_mutex";function Jv(c,s){return!!gp(c)[s]}function gp(c){return c[wl]||(c[wl]={})}function Dh(c,s,a,l,u){c.pointerChecker&&c.pointerChecker(l,u.originX,u.originY)&&(vs.sT(l.event),uS(c,s,a,l,u))}function uS(c,s,a,l,u){u.isAvailableBehavior=(0,b.bind)(vp,null,a,l),c.trigger(s,u)}function vp(c,s,a){var l=a[c];return!c||l&&(!(0,b.isString)(l)||s.event[l+"Key"])}qv.zl({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},b.noop);const Mh=function(c){function s(a){var l=c.call(this)||this;l._zr=a;var u=(0,b.bind)(l._mousedownHandler,l),h=(0,b.bind)(l._mousemoveHandler,l),p=(0,b.bind)(l._mouseupHandler,l),v=(0,b.bind)(l._mousewheelHandler,l),m=(0,b.bind)(l._pinchHandler,l);return l.enable=function(y,x){this.disable(),this._opt=(0,b.defaults)((0,b.clone)(x)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==y&&(y=!0),(!0===y||"move"===y||"pan"===y)&&(a.on("mousedown",u),a.on("mousemove",h),a.on("mouseup",p)),(!0===y||"scale"===y||"zoom"===y)&&(a.on("mousewheel",v),a.on("pinch",m))},l.disable=function(){a.off("mousedown",u),a.off("mousemove",h),a.off("mouseup",p),a.off("mousewheel",v),a.off("pinch",m)},l}return(0,Rt.ZT)(s,c),s.prototype.isDragging=function(){return this._dragging},s.prototype.isPinching=function(){return this._pinching},s.prototype.setPointerChecker=function(a){this.pointerChecker=a},s.prototype.dispose=function(){this.disable()},s.prototype._mousedownHandler=function(a){if(!vs.x1(a)){for(var l=a.target;l;){if(l.draggable)return;l=l.__hostTarget||l.parent}var u=a.offsetX,h=a.offsetY;this.pointerChecker&&this.pointerChecker(a,u,h)&&(this._x=u,this._y=h,this._dragging=!0)}},s.prototype._mousemoveHandler=function(a){if(this._dragging&&vp("moveOnMouseMove",a,this._opt)&&"pinch"!==a.gestureEvent&&!Jv(this._zr,"globalPan")){var l=a.offsetX,u=a.offsetY,h=this._x,p=this._y,v=l-h,m=u-p;this._x=l,this._y=u,this._opt.preventDefaultMouseMove&&vs.sT(a.event),uS(this,"pan","moveOnMouseMove",a,{dx:v,dy:m,oldX:h,oldY:p,newX:l,newY:u,isAvailableBehavior:null})}},s.prototype._mouseupHandler=function(a){vs.x1(a)||(this._dragging=!1)},s.prototype._mousewheelHandler=function(a){var l=vp("zoomOnMouseWheel",a,this._opt),u=vp("moveOnMouseWheel",a,this._opt),h=a.wheelDelta,p=Math.abs(h),v=a.offsetX,m=a.offsetY;if(0!==h&&(l||u)){if(l){var y=p>3?1.4:p>1?1.2:1.1;Dh(this,"zoom","zoomOnMouseWheel",a,{scale:h>0?y:1/y,originX:v,originY:m,isAvailableBehavior:null})}if(u){var C=Math.abs(h);Dh(this,"scrollMove","moveOnMouseWheel",a,{scrollDelta:(h>0?1:-1)*(C>3?.4:C>1?.15:.05),originX:v,originY:m,isAvailableBehavior:null})}}},s.prototype._pinchHandler=function(a){Jv(this._zr,"globalPan")||Dh(this,"zoom",null,a,{scale:a.pinchScale>1?1.1:1/1.1,originX:a.pinchX,originY:a.pinchY,isAvailableBehavior:null})},s}(S0.Z);function tm(c,s,a){var l=c.target;l.x+=s,l.y+=a,l.dirty()}function nm(c,s,a,l){var u=c.target,h=c.zoomLimit,p=c.zoom=c.zoom||1;if(p*=s,h){var v=h.min||0;p=Math.max(Math.min(h.max||1/0,p),v)}var y=p/c.zoom;c.zoom=p,u.x-=(a-u.x)*(y-1),u.y-=(l-u.y)*(y-1),u.scaleX*=y,u.scaleY*=y,u.dirty()}var ZP={axisPointer:1,tooltip:1,brush:1};function Xu(c,s,a){var l=s.getComponentByElement(c.topTarget),u=l&&l.coordinateSystem;return l&&l!==a&&!ZP.hasOwnProperty(l.mainType)&&u&&u.model!==a}var mp=z(2968),rm=z(714),dS=z(3622);function D0(c){(0,b.isString)(c)&&(c=(new DOMParser).parseFromString(c,"text/xml"));var a=c;for(9===a.nodeType&&(a=a.firstChild);"svg"!==a.nodeName.toLowerCase()||1!==a.nodeType;)a=a.nextSibling;return a}var _u,im={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},Ni=(0,b.keys)(im),Th={"alignment-baseline":"textBaseline","stop-color":"stopColor"},hS=(0,b.keys)(Th),fS=function(){function c(){this._defs={},this._root=null}return c.prototype.parse=function(s,a){a=a||{};var l=D0(s);this._defsUsePending=[];var u=new Vn.Z;this._root=u;var x,C,h=[],p=l.getAttribute("viewBox")||"",v=parseFloat(l.getAttribute("width")||a.width),m=parseFloat(l.getAttribute("height")||a.height);isNaN(v)&&(v=null),isNaN(m)&&(m=null),rs(l,u,null,!0,!1);for(var y=l.firstChild;y;)this._parseNode(y,u,h,null,!1,!1),y=y.nextSibling;if(function dn(c,s){for(var a=0;a<s.length;a++){var l=s[a];l[0].style[l[1]]=c[l[2]]}}(this._defs,this._defsUsePending),this._defsUsePending=[],p){var M=T0(p);M.length>=4&&(x={x:parseFloat(M[0]||0),y:parseFloat(M[1]||0),width:parseFloat(M[2]),height:parseFloat(M[3])})}if(x&&null!=v&&null!=m&&(C=$P(x,{x:0,y:0,width:v,height:m}),!a.ignoreViewBox)){var E=u;(u=new Vn.Z).add(E),E.scaleX=E.scaleY=C.scale,E.x=C.x,E.y=C.y}return!a.ignoreRootClip&&null!=v&&null!=m&&u.setClipPath(new Jt.Z({shape:{x:0,y:0,width:v,height:m}})),{root:u,width:v,height:m,viewBoxRect:x,viewBoxTransform:C,named:h}},c.prototype._parseNode=function(s,a,l,u,h,p){var m,v=s.nodeName.toLowerCase(),y=u;if("defs"===v&&(h=!0),"text"===v&&(p=!0),"defs"===v||"switch"===v)m=a;else{if(!h){var x=_u[v];if(x&&(0,b.hasOwn)(_u,v)){m=x.call(this,s,a);var C=s.getAttribute("name");if(C){var M={name:C,namedFrom:null,svgNodeTagLower:v,el:m};l.push(M),"g"===v&&(y=M)}else u&&l.push({name:u.name,namedFrom:u,svgNodeTagLower:v,el:m});a.add(m)}}var E=ms[v];if(E&&(0,b.hasOwn)(ms,v)){var R=E.call(this,s),F=s.getAttribute("id");F&&(this._defs[F]=R)}}if(m&&m.isGroup)for(var U=s.firstChild;U;)1===U.nodeType?this._parseNode(U,m,l,y,h,p):3===U.nodeType&&p&&this._parseText(U,m),U=U.nextSibling},c.prototype._parseText=function(s,a){var l=new de.Z({style:{text:s.textContent},silent:!0,x:this._textX||0,y:this._textY||0});Ro(a,l),rs(s,l,this._defsUsePending,!1,!1),function Eh(c,s){var a=s.__selfStyle;if(a){var l=a.textBaseline,u=l;l&&"auto"!==l&&"baseline"!==l?"before-edge"===l||"text-before-edge"===l?u="top":"after-edge"===l||"text-after-edge"===l?u="bottom":("central"===l||"mathematical"===l)&&(u="middle"):u="alphabetic",c.style.textBaseline=u}var h=s.__inheritedStyle;if(h){var p=h.textAlign,v=p;p&&("middle"===p&&(v="center"),c.style.textAlign=v)}}(l,a);var u=l.style,h=u.fontSize;h&&h<9&&(u.fontSize=9,l.scaleX*=h/9,l.scaleY*=h/9);var p=(u.fontSize||u.fontFamily)&&[u.fontStyle,u.fontWeight,(u.fontSize||12)+"px",u.fontFamily||"sans-serif"].join(" ");u.font=p;var v=l.getBoundingRect();return this._textX+=v.width,a.add(l),l},c.internalField=void(_u={g:function(s,a){var l=new Vn.Z;return Ro(a,l),rs(s,l,this._defsUsePending,!1,!1),l},rect:function(s,a){var l=new Jt.Z;return Ro(a,l),rs(s,l,this._defsUsePending,!1,!1),l.setShape({x:parseFloat(s.getAttribute("x")||"0"),y:parseFloat(s.getAttribute("y")||"0"),width:parseFloat(s.getAttribute("width")||"0"),height:parseFloat(s.getAttribute("height")||"0")}),l.silent=!0,l},circle:function(s,a){var l=new wh.Z;return Ro(a,l),rs(s,l,this._defsUsePending,!1,!1),l.setShape({cx:parseFloat(s.getAttribute("cx")||"0"),cy:parseFloat(s.getAttribute("cy")||"0"),r:parseFloat(s.getAttribute("r")||"0")}),l.silent=!0,l},line:function(s,a){var l=new no.Z;return Ro(a,l),rs(s,l,this._defsUsePending,!1,!1),l.setShape({x1:parseFloat(s.getAttribute("x1")||"0"),y1:parseFloat(s.getAttribute("y1")||"0"),x2:parseFloat(s.getAttribute("x2")||"0"),y2:parseFloat(s.getAttribute("y2")||"0")}),l.silent=!0,l},ellipse:function(s,a){var l=new mp.Z;return Ro(a,l),rs(s,l,this._defsUsePending,!1,!1),l.setShape({cx:parseFloat(s.getAttribute("cx")||"0"),cy:parseFloat(s.getAttribute("cy")||"0"),rx:parseFloat(s.getAttribute("rx")||"0"),ry:parseFloat(s.getAttribute("ry")||"0")}),l.silent=!0,l},polygon:function(s,a){var u,l=s.getAttribute("points");l&&(u=M0(l));var h=new Wo.Z({shape:{points:u||[]},silent:!0});return Ro(a,h),rs(s,h,this._defsUsePending,!1,!1),h},polyline:function(s,a){var u,l=s.getAttribute("points");l&&(u=M0(l));var h=new Pt.Z({shape:{points:u||[]},silent:!0});return Ro(a,h),rs(s,h,this._defsUsePending,!1,!1),h},image:function(s,a){var l=new be.ZP;return Ro(a,l),rs(s,l,this._defsUsePending,!1,!1),l.setStyle({image:s.getAttribute("xlink:href")||s.getAttribute("href"),x:+s.getAttribute("x"),y:+s.getAttribute("y"),width:+s.getAttribute("width"),height:+s.getAttribute("height")}),l.silent=!0,l},text:function(s,a){var l=s.getAttribute("x")||"0",u=s.getAttribute("y")||"0",h=s.getAttribute("dx")||"0",p=s.getAttribute("dy")||"0";this._textX=parseFloat(l)+parseFloat(h),this._textY=parseFloat(u)+parseFloat(p);var v=new Vn.Z;return Ro(a,v),rs(s,v,this._defsUsePending,!1,!0),v},tspan:function(s,a){var l=s.getAttribute("x"),u=s.getAttribute("y");null!=l&&(this._textX=parseFloat(l)),null!=u&&(this._textY=parseFloat(u));var h=s.getAttribute("dx")||"0",p=s.getAttribute("dy")||"0",v=new Vn.Z;return Ro(a,v),rs(s,v,this._defsUsePending,!1,!0),this._textX+=parseFloat(h),this._textY+=parseFloat(p),v},path:function(s,a){var l=s.getAttribute("d")||"",u=(0,rm.iR)(l);return Ro(a,u),rs(s,u,this._defsUsePending,!1,!1),u.silent=!0,u}}),c}(),ms={lineargradient:function(c){var s=parseInt(c.getAttribute("x1")||"0",10),a=parseInt(c.getAttribute("y1")||"0",10),l=parseInt(c.getAttribute("x2")||"10",10),u=parseInt(c.getAttribute("y2")||"0",10),h=new tp.Z(s,a,l,u);return $u(c,h),Ku(c,h),h},radialgradient:function(c){var s=parseInt(c.getAttribute("cx")||"0",10),a=parseInt(c.getAttribute("cy")||"0",10),l=parseInt(c.getAttribute("r")||"0",10),u=new dS.Z(s,a,l);return $u(c,u),Ku(c,u),u}};function $u(c,s){"userSpaceOnUse"===c.getAttribute("gradientUnits")&&(s.global=!0)}function Ku(c,s){for(var a=c.firstChild;a;){if(1===a.nodeType&&"stop"===a.nodeName.toLocaleLowerCase()){var u,l=a.getAttribute("offset");u=l&&l.indexOf("%")>0?parseInt(l,10)/100:l?parseFloat(l):0;var h={};XP(a,h,h);var p=h.stopColor||a.getAttribute("stop-color")||"#000000";s.colorStops.push({offset:u,color:p})}a=a.nextSibling}}function Ro(c,s){c&&c.__inheritedStyle&&(s.__inheritedStyle||(s.__inheritedStyle={}),(0,b.defaults)(s.__inheritedStyle,c.__inheritedStyle))}function M0(c){for(var s=T0(c),a=[],l=0;l<s.length;l+=2){var u=parseFloat(s[l]),h=parseFloat(s[l+1]);a.push([u,h])}return a}function rs(c,s,a,l,u){var h=s,p=h.__inheritedStyle=h.__inheritedStyle||{},v={};1===c.nodeType&&(function T5(c,s){var a=c.getAttribute("transform");if(a){a=a.replace(/,/g," ");var l=[],u=null;a.replace(M5,function(C,M,E){return l.push(M,E),""});for(var h=l.length-1;h>0;h-=2){var v=l[h-1],m=T0(l[h]);switch(u=u||Hr.create(),v){case"translate":Hr.translate(u,u,[parseFloat(m[0]),parseFloat(m[1]||"0")]);break;case"scale":Hr.scale(u,u,[parseFloat(m[0]),parseFloat(m[1]||m[0])]);break;case"rotate":Hr.rotate(u,u,-parseFloat(m[0])*gS,[parseFloat(m[1]||"0"),parseFloat(m[2]||"0")]);break;case"skewX":var y=Math.tan(parseFloat(m[0])*gS);Hr.mul(u,[1,0,y,1,0,0],u);break;case"skewY":var x=Math.tan(parseFloat(m[0])*gS);Hr.mul(u,[1,x,0,1,0,0],u);break;case"matrix":u[0]=parseFloat(m[0]),u[1]=parseFloat(m[1]),u[2]=parseFloat(m[2]),u[3]=parseFloat(m[3]),u[4]=parseFloat(m[4]),u[5]=parseFloat(m[5])}}s.setLocalTransform(u)}}(c,s),XP(c,p,v),l||function _p(c,s,a){for(var l=0;l<Ni.length;l++)null!=(h=c.getAttribute(u=Ni[l]))&&(s[im[u]]=h);for(l=0;l<hS.length;l++){var u,h;null!=(h=c.getAttribute(u=hS[l]))&&(a[Th[u]]=h)}}(c,p,v)),h.style=h.style||{},null!=p.fill&&(h.style.fill=pS(h,"fill",p.fill,a)),null!=p.stroke&&(h.style.stroke=pS(h,"stroke",p.stroke,a)),(0,b.each)(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(m){null!=p[m]&&(h.style[m]=parseFloat(p[m]))}),(0,b.each)(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(m){null!=p[m]&&(h.style[m]=p[m])}),u&&(h.__selfStyle=v),p.lineDash&&(h.style.lineDash=(0,b.map)(T0(p.lineDash),function(m){return parseFloat(m)})),("hidden"===p.visibility||"collapse"===p.visibility)&&(h.invisible=!0),"none"===p.display&&(h.ignore=!0)}var S5=/^url\(\s*#(.*?)\)/;function pS(c,s,a,l){var u=a&&a.match(S5);if(!u)return"none"===a&&(a=null),a;var h=(0,b.trim)(u[1]);l.push([c,s,h])}var D5=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function T0(c){return c.match(D5)||[]}var M5=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,gS=Math.PI/180,YP=/([^\s:;]+)\s*:\s*([^:;]+)/g;function XP(c,s,a){var l=c.getAttribute("style");if(l){YP.lastIndex=0;for(var u;null!=(u=YP.exec(l));){var h=u[1],p=(0,b.hasOwn)(im,h)?im[h]:null;p&&(s[p]=u[2]);var v=(0,b.hasOwn)(Th,h)?Th[h]:null;v&&(a[v]=u[2])}}}function $P(c,s){var u=Math.min(s.width/c.width,s.height/c.height);return{scale:u,x:-(c.x+c.width/2)*u+(s.x+s.width/2),y:-(c.y+c.height/2)*u+(s.y+s.height/2)}}for(var Ua=z(3052),E0=(0,b.createHashMap)(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),yp=function(){function c(s,a){this.type="geoSVG",this._usedGraphicMap=(0,b.createHashMap)(),this._freedGraphics=[],this._mapName=s,this._parsedXML=D0(a)}return c.prototype.load=function(){var s=this._firstGraphic;if(!s){s=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(s),this._boundingRect=this._firstGraphic.boundingRect.clone();var a=function KP(c){var s=[],a=(0,b.createHashMap)();return(0,b.each)(c,function(l){if(null==l.namedFrom){var u=new Ua.Im(l.name,l.el);s.push(u),a.set(l.name,u)}}),{regions:s,regionsMap:a}}(s.named),u=a.regionsMap;this._regions=a.regions,this._regionsMap=u}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},c.prototype._buildGraphic=function(s){var a,l;try{a=s&&function E5(c,s){return(new fS).parse(c,s)}(s,{ignoreViewBox:!0,ignoreRootClip:!0})||{},(0,b.assert)(null!=(l=a.root))}catch(U){throw new Error("Invalid svg format\n"+U.message)}var u=new Vn.Z;u.add(l),u.isGeoSVGGraphicRoot=!0;var h=a.width,p=a.height,v=a.viewBoxRect,m=this._boundingRect;if(!m){var y=void 0,x=void 0,C=void 0,M=void 0;if(null!=h?(y=0,C=h):v&&(y=v.x,C=v.width),null!=p?(x=0,M=p):v&&(x=v.y,M=v.height),null==y||null==x){var E=l.getBoundingRect();null==y&&(y=E.x,C=E.width),null==x&&(x=E.y,M=E.height)}m=this._boundingRect=new Pa.Z(y,x,C,M)}if(v){var R=$P(v,m);l.scaleX=l.scaleY=R.scale,l.x=R.x,l.y=R.y}u.setClipPath(new Jt.Z({shape:m.plain()}));var F=[];return(0,b.each)(a.named,function(U){null!=E0.get(U.svgNodeTagLower)&&(F.push(U),function A5(c){c.silent=!1,c.isGroup&&c.traverse(function(s){s.silent=!1})}(U.el))}),{root:u,boundingRect:m,named:F}},c.prototype.useGraphic=function(s){var a=this._usedGraphicMap,l=a.get(s);return l||(l=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),a.set(s,l),l)},c.prototype.freeGraphic=function(s){var a=this._usedGraphicMap,l=a.get(s);l&&(a.removeKey(s),this._freedGraphics.push(l))},c}(),Rs=z(5269),Cl=[126,25],Jl=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],Sl=0;Sl<Jl.length;Sl++)for(var Qu=0;Qu<Jl[Sl].length;Qu++)Jl[Sl][Qu][0]/=10.5,Jl[Sl][Qu][1]/=-14,Jl[Sl][Qu][0]+=Cl[0],Jl[Sl][Qu][1]+=Cl[1];var qP=z(9874),I5=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],Ls=function(){function c(s,a,l){this.type="geoJSON",this._parsedMap=(0,b.createHashMap)(),this._mapName=s,this._specialAreas=l,this._geoJSON=function Ah(c){return(0,b.isString)(c)?typeof JSON<"u"&&JSON.parse?JSON.parse(c):new Function("return ("+c+");")():c}(a)}return c.prototype.load=function(s,a){var l=this._parsedMap.get(a=a||"name");if(!l){var u=this._parseToRegions(a);l=this._parsedMap.set(a,{regions:u,boundingRect:I0(u)})}var h=(0,b.createHashMap)(),p=[];return(0,b.each)(l.regions,function(v){var m=v.name;s&&(0,b.hasOwn)(s,m)&&(v=v.cloneShallow(m=s[m])),p.push(v),h.set(m,v)}),{regions:p,boundingRect:l.boundingRect||new Pa.Z(0,0,0,0),regionsMap:h}},c.prototype._parseToRegions=function(s){var u,a=this._mapName,l=this._geoJSON;try{u=l?(0,Rs.Z)(l,s):[]}catch(h){throw new Error("Invalid geoJson format\n"+h.message)}return function QP(c,s){if("china"===c){for(var a=0;a<s.length;a++)if("\u5357\u6d77\u8bf8\u5c9b"===s[a].name)return;s.push(new Ua.Ni("\u5357\u6d77\u8bf8\u5c9b",b.map(Jl,function(l){return{type:"polygon",exterior:l}}),Cl))}}(a,u),(0,b.each)(u,function(h){var p=h.name;(0,qP.Z)(a,h),function P5(c,s){"china"===c&&"\u53f0\u6e7e"===s.name&&s.geometries.push({type:"polygon",exterior:I5[0]})}(a,h);var v=this._specialAreas&&this._specialAreas[p];v&&h.transformTo(v.left,v.top,v.width,v.height)},this),u},c.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},c}();function I0(c){for(var s,a=0;a<c.length;a++){var l=c[a].getBoundingRect();(s=s||l.clone()).union(l)}return s}var am=(0,b.createHashMap)();const ec_getGeoResource=function(c){return am.get(c)},ec_load=function(c,s,a){var l=am.get(c);if(l)return l.load(s,a)};var om=z(7123),qu=z(2320),P0=["rect","circle","line","ellipse","polygon","polyline","path"],JP=b.createHashMap(P0),eR=b.createHashMap(P0.concat(["g"])),tR=b.createHashMap(P0.concat(["g"])),sm=(0,An.Yf)();function Ju(c){var s=c.getItemStyle(),a=c.get("areaColor");return null!=a&&(s.fill=a),s}function nR(c){var s=c.style;s&&(s.stroke=s.stroke||s.fill,s.fill=null)}function lm(c,s,a,l){var u=l.getModel("itemStyle"),h=l.getModel(["emphasis","itemStyle"]),p=l.getModel(["blur","itemStyle"]),v=l.getModel(["select","itemStyle"]),m=Ju(u),y=Ju(h),x=Ju(v),C=Ju(p),M=c.data;if(M){var E=M.getItemVisual(a,"style"),R=M.getItemVisual(a,"decal");c.isVisualEncodedByVisualMap&&E.fill&&(m.fill=E.fill),R&&(m.decal=(0,om.I)(R,c.api))}s.setStyle(m),s.style.strokeNoScale=!0,s.ensureState("emphasis").style=y,s.ensureState("select").style=x,s.ensureState("blur").style=C,(0,bn.MA)(s)}function xp(c,s,a,l,u,h,p){var v=c.data,m=c.isGeo,y=v&&isNaN(v.get(v.mapDimension("value"),h)),x=v&&v.getItemLayout(h);if(m||y||x&&x.showLabel){var C=m?a:h,M=void 0;(!v||h>=0)&&(M=u);var E=p?{normal:{align:"center",verticalAlign:"middle"}}:null;(0,Bn.ni)(s,(0,Bn.k3)(l),{labelFetcher:M,labelDataIndex:C,defaultText:a},E);var R=s.getTextContent();if(R&&(sm(R).ignore=R.ignore,s.textConfig&&p)){var F=s.getBoundingRect().clone();s.textConfig.layoutRect=F,s.textConfig.position=[(p[0]-F.x)/F.width*100+"%",(p[1]-F.y)/F.height*100+"%"]}s.disableLabelAnimation=!0}else s.removeTextContent(),s.removeTextConfig(),s.disableLabelAnimation=null}function mS(c,s,a,l,u,h){c.data?c.data.setItemGraphicEl(h,s):(0,Fn.A)(s).eventData={componentType:"geo",componentIndex:u.componentIndex,geoIndex:u.componentIndex,name:a,region:l&&l.option||{}}}function _S(c,s,a,l,u){c.data||Un.setTooltipConfig({el:s,componentModel:u,itemName:a,itemTooltipOption:l.get("tooltip")})}function yS(c,s,a,l,u){s.highDownSilentOnTouch=!!u.get("selectedMode");var h=l.getModel("emphasis"),p=h.get("focus");return(0,bn.k5)(s,p,h.get("blurScope"),h.get("disabled")),c.isGeo&&(0,bn.th)(s,u,a),p}function R0(c,s,a){var u,l=[];function h(){u=[]}function p(){u.length&&(l.push(u),u=[])}var v=s({polygonStart:h,polygonEnd:p,lineStart:h,lineEnd:p,point:function(m,y){isFinite(m)&&isFinite(y)&&u.push([m,y])},sphere:function(){}});return!a&&v.polygonStart(),b.each(c,function(m){v.lineStart();for(var y=0;y<m.length;y++)v.point(m[y][0],m[y][1]);v.lineEnd()}),!a&&v.polygonEnd(),l}const Ih=function(){function c(s){var a=new Vn.Z;this.uid=(0,qn.Kr)("ec_map_draw"),this._controller=new Mh(s.getZr()),this._controllerHost={target:a},this.group=a,a.add(this._regionsGroup=new Vn.Z),a.add(this._svgGroup=new Vn.Z)}return c.prototype.draw=function(s,a,l,u,h){var p="geo"===s.mainType,v=s.getData&&s.getData();p&&a.eachComponent({mainType:"series",subType:"map"},function(ue){!v&&ue.getHostGeoModel()===s&&(v=ue.getData())});var m=s.coordinateSystem,y=this._regionsGroup,x=this.group,C=m.getTransformInfo(),M=C.raw,E=C.roam;!y.childAt(0)||h?(x.x=E.x,x.y=E.y,x.scaleX=E.scaleX,x.scaleY=E.scaleY,x.dirty()):on.D(x,E,s);var F=v&&v.getVisual("visualMeta")&&v.getVisual("visualMeta").length>0,U={api:l,geo:m,mapOrGeoModel:s,data:v,isVisualEncodedByVisualMap:F,isGeo:p,transformInfoRaw:M};"geoJSON"===m.resourceType?this._buildGeoJSON(U):"geoSVG"===m.resourceType&&this._buildSVG(U),this._updateController(s,a,l),this._updateMapSelectHandler(s,y,l,u)},c.prototype._buildGeoJSON=function(s){var a=this._regionsGroupByName=b.createHashMap(),l=b.createHashMap(),u=this._regionsGroup,h=s.transformInfoRaw,p=s.mapOrGeoModel,v=s.data,m=s.geo.projection,y=m&&m.stream;function x(E,R){return R&&(E=R(E)),E&&[E[0]*h.scaleX+h.x,E[1]*h.scaleY+h.y]}function C(E){for(var R=[],F=!y&&m&&m.project,U=0;U<E.length;++U){var ue=x(E[U],F);ue&&R.push(ue)}return R}function M(E){return{shape:{points:C(E)}}}u.removeAll(),b.each(s.geo.regions,function(E){var R=E.name,F=a.get(R),U=l.get(R)||{},ue=U.dataIdx,me=U.regionModel;F||(F=a.set(R,new Vn.Z),u.add(F),ue=v?v.indexOfName(R):null,me=s.isGeo?p.getRegionModel(R):v?v.getItemModel(ue):null,l.set(R,{dataIdx:ue,regionModel:me}));var ve=[],Me=[];b.each(E.geometries,function(Ne){if("polygon"===Ne.type){var He=[Ne.exterior].concat(Ne.interiors||[]);y&&(He=R0(He,y)),b.each(He,function(Qe){ve.push(new Wo.Z(M(Qe)))})}else{var Ye=Ne.points;y&&(Ye=R0(Ye,y,!0)),b.each(Ye,function(Qe){Me.push(new Pt.Z(M(Qe)))})}});var Ae=x(E.getCenter(),m&&m.project);function Pe(Ne,He){if(Ne.length){var Ye=new Ce.Z({culling:!0,segmentIgnoreThreshold:1,shape:{paths:Ne}});F.add(Ye),lm(s,Ye,ue,me),xp(s,Ye,R,me,p,ue,Ae),He&&(nR(Ye),b.each(Ye.states,nR))}}Pe(ve),Pe(Me,!0)}),a.each(function(E,R){var F=l.get(R),ue=F.regionModel;mS(s,E,R,ue,p,F.dataIdx),_S(s,E,R,ue,p),yS(s,E,R,ue,p)},this)},c.prototype._buildSVG=function(s){var a=s.geo.map,l=s.transformInfoRaw;this._svgGroup.x=l.x,this._svgGroup.y=l.y,this._svgGroup.scaleX=l.scaleX,this._svgGroup.scaleY=l.scaleY,this._svgResourceChanged(a)&&(this._freeSVG(),this._useSVG(a));var u=this._svgDispatcherMap=b.createHashMap(),h=!1;b.each(this._svgGraphicRecord.named,function(p){var v=p.name,m=s.mapOrGeoModel,y=s.data,x=p.svgNodeTagLower,C=p.el,M=y?y.indexOfName(v):null,E=m.getRegionModel(v);null!=JP.get(x)&&C instanceof qu.ZP&&lm(s,C,M,E),C instanceof qu.ZP&&(C.culling=!0),C.z2EmphasisLift=0,p.namedFrom||(null!=tR.get(x)&&xp(s,C,v,E,m,M,null),mS(s,C,v,E,m,M),_S(s,C,v,E,m),null==eR.get(x))||("self"===yS(s,C,v,E,m)&&(h=!0),(u.get(v)||u.set(v,[])).push(C))},this),this._enableBlurEntireSVG(h,s)},c.prototype._enableBlurEntireSVG=function(s,a){if(s&&a.isGeo){var u=a.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle().opacity;this._svgGraphicRecord.root.traverse(function(h){if(!h.isGroup){(0,bn.MA)(h);var p=h.ensureState("blur").style||{};null==p.opacity&&null!=u&&(p.opacity=u),h.ensureState("emphasis")}})}},c.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},c.prototype.findHighDownDispatchers=function(s,a){if(null==s)return[];var l=a.coordinateSystem;if("geoJSON"===l.resourceType){var u=this._regionsGroupByName;if(u){var h=u.get(s);return h?[h]:[]}}else if("geoSVG"===l.resourceType)return this._svgDispatcherMap&&this._svgDispatcherMap.get(s)||[]},c.prototype._svgResourceChanged=function(s){return this._svgMapName!==s},c.prototype._useSVG=function(s){var a=ec_getGeoResource(s);if(a&&"geoSVG"===a.type){var l=a.useGraphic(this.uid);this._svgGroup.add(l.root),this._svgGraphicRecord=l,this._svgMapName=s}},c.prototype._freeSVG=function(){var s=this._svgMapName;if(null!=s){var a=ec_getGeoResource(s);a&&"geoSVG"===a.type&&a.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},c.prototype._updateController=function(s,a,l){var u=s.coordinateSystem,h=this._controller,p=this._controllerHost;p.zoomLimit=s.get("scaleLimit"),p.zoom=u.getZoom(),h.enable(s.get("roam")||!1);var v=s.mainType;function m(){var y={type:"geoRoam",componentType:v};return y[v+"Id"]=s.id,y}h.off("pan").on("pan",function(y){this._mouseDownFlag=!1,tm(p,y.dx,y.dy),l.dispatchAction(b.extend(m(),{dx:y.dx,dy:y.dy,animation:{duration:0}}))},this),h.off("zoom").on("zoom",function(y){this._mouseDownFlag=!1,nm(p,y.scale,y.originX,y.originY),l.dispatchAction(b.extend(m(),{totalZoom:p.zoom,zoom:y.scale,originX:y.originX,originY:y.originY,animation:{duration:0}}))},this),h.setPointerChecker(function(y,x,C){return u.containPoint([x,C])&&!Xu(y,l,s)})},c.prototype.resetForLabelLayout=function(){this.group.traverse(function(s){var a=s.getTextContent();a&&(a.ignore=sm(a).ignore)})},c.prototype._updateMapSelectHandler=function(s,a,l,u){var h=this;a.off("mousedown"),a.off("click"),s.get("selectedMode")&&(a.on("mousedown",function(){h._mouseDownFlag=!0}),a.on("click",function(p){!h._mouseDownFlag||(h._mouseDownFlag=!1)}))},c}(),rR=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u,h){if(!h||"mapToggleSelect"!==h.type||h.from!==this.uid){var p=this.group;if(p.removeAll(),!a.getHostGeoModel()){if(this._mapDraw&&h&&"geoRoam"===h.type&&this._mapDraw.resetForLabelLayout(),h&&"geoRoam"===h.type&&"series"===h.componentType&&h.seriesId===a.id)(v=this._mapDraw)&&p.add(v.group);else if(a.needsDrawMap){var v=this._mapDraw||new Ih(u);p.add(v.group),v.draw(a,l,u,this,h),this._mapDraw=v}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;a.get("showLegendSymbol")&&l.getComponent("legend")&&this._renderSymbols(a,l,u)}}},s.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},s.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},s.prototype._renderSymbols=function(a,l,u){var h=a.originalData,p=this.group;h.each(h.mapDimension("value"),function(v,m){if(!isNaN(v)){var y=h.getItemLayout(m);if(y&&y.point){var x=y.point,C=y.offset,M=new wh.Z({style:{fill:a.getData().getVisual("style").fill},shape:{cx:x[0]+9*C,cy:x[1],r:3},silent:!0,z2:8+(C?0:bn.zr+1)});if(!C){var E=a.mainSeries.getData(),R=h.getName(m),F=E.indexOfName(R),U=h.getItemModel(m),ue=U.getModel("label"),me=E.getItemGraphicEl(F);(0,Bn.ni)(M,(0,Bn.k3)(U),{labelFetcher:{getFormattedLabel:function(ve,Me){return a.getFormattedLabel(F,Me)}},defaultText:R}),M.disableLabelAnimation=!0,ue.get("position")||M.setTextConfig({position:"bottom"}),me.onHoverStateChange=function(ve){(0,bn.Gl)(M,ve)}}p.add(M)}}})},s.type="map",s}(na.Z),bS=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.needsDrawMap=!1,a.seriesGroup=[],a.getTooltipPosition=function(l){if(null!=l){var u=this.getData().getName(l),h=this.coordinateSystem,p=h.getRegion(u);return p&&h.dataToPoint(p.getCenter())}},a}return(0,Rt.ZT)(s,c),s.prototype.getInitialData=function(a){for(var l=_i(this,{coordDimensions:["value"],encodeDefaulter:b.curry(za.Ss,this)}),u=b.createHashMap(),h=[],p=0,v=l.count();p<v;p++){var m=l.getName(p);u.set(m,!0)}var y=ec_load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return b.each(y.regions,function(x){var C=x.name;u.get(C)||h.push(C)}),l.appendValues([],h),l},s.prototype.getHostGeoModel=function(){var a=this.option.geoIndex;return null!=a?this.ecModel.getComponent("geo",a):null},s.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},s.prototype.getRawValue=function(a){var l=this.getData();return l.get(l.mapDimension("value"),a)},s.prototype.getRegionModel=function(a){var l=this.getData();return l.getItemModel(l.indexOfName(a))},s.prototype.formatTooltip=function(a,l,u){for(var h=this.getData(),p=this.getRawValue(a),v=h.getName(a),m=this.seriesGroup,y=[],x=0;x<m.length;x++){var C=m[x].originalData.indexOfName(v),M=h.mapDimension("value");isNaN(m[x].originalData.get(M,C))||y.push(m[x].name)}return(0,Ui.TX)("section",{header:y.join(", "),noHeader:!y.length,blocks:[(0,Ui.TX)("nameValue",{name:v,value:p})]})},s.prototype.setZoom=function(a){this.option.zoom=a},s.prototype.setCenter=function(a){this.option.center=a},s.prototype.getLegendIcon=function(a){var l=a.icon||"roundRect",u=(0,dr.th)(l,0,0,a.itemWidth,a.itemHeight,a.itemStyle.fill);return u.setStyle(a.itemStyle),u.style.stroke="none",l.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),u},s.type="series.map",s.dependencies=["geo"],s.layoutMode="box",s.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},s}(zi.Z);function L0(c){var s={};c.eachSeriesByType("map",function(a){var l=a.getHostGeoModel(),u=l?"o"+l.id:"i"+a.getMapType();(s[u]=s[u]||[]).push(a)}),b.each(s,function(a,l){for(var u=function Ji(c,s){var a={};return b.each(c,function(l){l.each(l.mapDimension("value"),function(u,h){var p="ec-"+l.getName(h);a[p]=a[p]||[],isNaN(u)||a[p].push(u)})}),c[0].map(c[0].mapDimension("value"),function(l,u){for(var h="ec-"+c[0].getName(u),p=0,v=1/0,m=-1/0,y=a[h].length,x=0;x<y;x++)v=Math.min(v,a[h][x]),m=Math.max(m,a[h][x]),p+=a[h][x];return 0===y?NaN:"min"===s?v:"max"===s?m:"average"===s?p/y:p})}(b.map(a,function(p){return p.getData()}),a[0].get("mapValueCalculation")),h=0;h<a.length;h++)a[h].originalData=a[h].getData();for(h=0;h<a.length;h++)a[h].seriesGroup=a,a[h].needsDrawMap=0===h&&!a[h].getHostGeoModel(),a[h].setData(u.cloneShallow()),a[h].mainSeries=a[0]})}function wp(c){var s={};c.eachSeriesByType("map",function(a){var l=a.getMapType();if(!a.getHostGeoModel()&&!s[l]){var u={};b.each(a.seriesGroup,function(p){var v=p.coordinateSystem,m=p.originalData;p.get("showLegendSymbol")&&c.getComponent("legend")&&m.each(m.mapDimension("value"),function(y,x){var C=m.getName(x),M=v.getRegion(C);if(M&&!isNaN(y)){var E=u[C]||0,R=v.dataToPoint(M.getCenter());u[C]=E+1,m.setItemLayout(x,{point:R,offset:E})}})});var h=a.getData();h.each(function(p){var v=h.getName(p),m=h.getItemLayout(p)||{};m.showLabel=!u[v],h.setItemLayout(p,m)}),s[l]=!0}})}var xS=lr.applyTransform;function wS(c){var s=c.seriesModel;return s?s.coordinateSystem:null}const ed=function(c){function s(a){var l=c.call(this)||this;return l.type="view",l.dimensions=["x","y"],l._roamTransformable=new fe.ZP,l._rawTransformable=new fe.ZP,l.name=a,l}return(0,Rt.ZT)(s,c),s.prototype.setBoundingRect=function(a,l,u,h){return this._rect=new Pa.Z(a,l,u,h),this._rect},s.prototype.getBoundingRect=function(){return this._rect},s.prototype.setViewRect=function(a,l,u,h){this._transformTo(a,l,u,h),this._viewRect=new Pa.Z(a,l,u,h)},s.prototype._transformTo=function(a,l,u,h){var p=this.getBoundingRect(),v=this._rawTransformable;v.transform=p.calculateTransform(new Pa.Z(a,l,u,h));var m=v.parent;v.parent=null,v.decomposeTransform(),v.parent=m,this._updateTransform()},s.prototype.setCenter=function(a,l){!a||(this._center=[(0,ft.GM)(a[0],l.getWidth()),(0,ft.GM)(a[1],l.getHeight())],this._updateCenterAndZoom())},s.prototype.setZoom=function(a){a=a||1;var l=this.zoomLimit;l&&(null!=l.max&&(a=Math.min(l.max,a)),null!=l.min&&(a=Math.max(l.min,a))),this._zoom=a,this._updateCenterAndZoom()},s.prototype.getDefaultCenter=function(){var a=this.getBoundingRect();return[a.x+a.width/2,a.y+a.height/2]},s.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},s.prototype.getZoom=function(){return this._zoom||1},s.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},s.prototype._updateCenterAndZoom=function(){var a=this._rawTransformable.getLocalTransform(),l=this._roamTransformable,u=this.getDefaultCenter(),h=this.getCenter(),p=this.getZoom();h=lr.applyTransform([],h,a),u=lr.applyTransform([],u,a),l.originX=h[0],l.originY=h[1],l.x=u[0]-h[0],l.y=u[1]-h[1],l.scaleX=l.scaleY=p,this._updateTransform()},s.prototype._updateTransform=function(){var a=this._roamTransformable,l=this._rawTransformable;l.parent=a,a.updateTransform(),l.updateTransform(),Hr.copy(this.transform||(this.transform=[]),l.transform||Hr.create()),this._rawTransform=l.getLocalTransform(),this.invTransform=this.invTransform||[],Hr.invert(this.invTransform,this.transform),this.decomposeTransform()},s.prototype.getTransformInfo=function(){var a=this._rawTransformable,l=this._roamTransformable,u=new fe.ZP;return u.transform=l.transform,u.decomposeTransform(),{roam:{x:u.x,y:u.y,scaleX:u.scaleX,scaleY:u.scaleY},raw:{x:a.x,y:a.y,scaleX:a.scaleX,scaleY:a.scaleY}}},s.prototype.getViewRect=function(){return this._viewRect},s.prototype.getViewRectAfterRoam=function(){var a=this.getBoundingRect().clone();return a.applyTransform(this.transform),a},s.prototype.dataToPoint=function(a,l,u){var h=l?this._rawTransform:this.transform;return u=u||[],h?xS(u,a,h):lr.copy(u,a)},s.prototype.pointToData=function(a){var l=this.invTransform;return l?xS([],a,l):[a[0],a[1]]},s.prototype.convertToPixel=function(a,l,u){var h=wS(l);return h===this?h.dataToPoint(u):null},s.prototype.convertFromPixel=function(a,l,u){var h=wS(l);return h===this?h.pointToData(u):null},s.prototype.containPoint=function(a){return this.getViewRectAfterRoam().contain(a[0],a[1])},s.dimensions=["x","y"],s}(fe.ZP);var Dl={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},O0=["lng","lat"],tc=function(c){function s(a,l,u){var h=c.call(this,a)||this;h.dimensions=O0,h.type="geo",h._nameCoordMap=b.createHashMap(),h.map=l;var M,p=u.projection,v=ec_load(l,u.nameMap,u.nameProperty),m=ec_getGeoResource(l),x=(h.resourceType=m?m.type:null,h.regions=v.regions),C=Dl[m.type];if(h._regionsMap=v.regionsMap,h.regions=v.regions,h.projection=p,p)for(var E=0;E<x.length;E++){var R=x[E].getBoundingRect(p);(M=M||R.clone()).union(R)}else M=v.boundingRect;return h.setBoundingRect(M.x,M.y,M.width,M.height),h.aspectScale=p?1:b.retrieve2(u.aspectScale,C.aspectScale),h._invertLongitute=!p&&C.invertLongitute,h}return(0,Rt.ZT)(s,c),s.prototype._transformTo=function(a,l,u,h){var p=this.getBoundingRect(),v=this._invertLongitute;p=p.clone(),v&&(p.y=-p.y-p.height);var m=this._rawTransformable;m.transform=p.calculateTransform(new Pa.Z(a,l,u,h));var y=m.parent;m.parent=null,m.decomposeTransform(),m.parent=y,v&&(m.scaleY=-m.scaleY),this._updateTransform()},s.prototype.getRegion=function(a){return this._regionsMap.get(a)},s.prototype.getRegionByCoord=function(a){for(var l=this.regions,u=0;u<l.length;u++){var h=l[u];if("geoJSON"===h.type&&h.contain(a))return l[u]}},s.prototype.addGeoCoord=function(a,l){this._nameCoordMap.set(a,l)},s.prototype.getGeoCoord=function(a){var l=this._regionsMap.get(a);return this._nameCoordMap.get(a)||l&&l.getCenter()},s.prototype.dataToPoint=function(a,l,u){if(b.isString(a)&&(a=this.getGeoCoord(a)),a){var h=this.projection;return h&&(a=h.project(a)),a&&this.projectedToPoint(a,l,u)}},s.prototype.pointToData=function(a){var l=this.projection;return l&&(a=l.unproject(a)),a&&this.pointToProjected(a)},s.prototype.pointToProjected=function(a){return c.prototype.pointToData.call(this,a)},s.prototype.projectedToPoint=function(a,l,u){return c.prototype.dataToPoint.call(this,a,l,u)},s.prototype.convertToPixel=function(a,l,u){var h=CS(l);return h===this?h.dataToPoint(u):null},s.prototype.convertFromPixel=function(a,l,u){var h=CS(l);return h===this?h.pointToData(u):null},s}(ed);function CS(c){var s=c.geoModel,a=c.seriesModel;return s?s.coordinateSystem:a?a.coordinateSystem||(a.getReferringComponents("geo",An.C6).models[0]||{}).coordinateSystem:null}b.mixin(tc,ed);const k0=tc;function Rh(c,s){var a=c.get("boundingCoords");if(null!=a){var l=a[0],u=a[1];if(isFinite(l[0])&&isFinite(l[1])&&isFinite(u[0])&&isFinite(u[1])){var h=this.projection;if(h){var p=l[0],v=l[1],m=u[0],y=u[1];l=[1/0,1/0],u=[-1/0,-1/0];var x=function(Pe,Ne,He,Ye){for(var Qe=He-Pe,it=Ye-Ne,ct=0;ct<=100;ct++){var ht=ct/100,vt=h.project([Pe+Qe*ht,Ne+it*ht]);lr.min(l,l,vt),lr.max(u,u,vt)}};x(p,v,m,v),x(m,v,m,y),x(m,y,p,y),x(p,y,m,v)}this.setBoundingRect(l[0],l[1],u[0]-l[0],u[1]-l[1])}}var me,ve,Me,C=this.getBoundingRect(),M=c.get("layoutCenter"),E=c.get("layoutSize"),R=s.getWidth(),F=s.getHeight(),U=C.width/C.height*this.aspectScale,ue=!1;if(M&&E&&(me=[ft.GM(M[0],R),ft.GM(M[1],F)],ve=ft.GM(E,Math.min(R,F)),!isNaN(me[0])&&!isNaN(me[1])&&!isNaN(ve)&&(ue=!0)),ue)Me={},U>1?(Me.width=ve,Me.height=ve/U):(Me.height=ve,Me.width=ve*U),Me.y=me[1]-Me.height/2,Me.x=me[0]-Me.width/2;else{var Ae=c.getBoxLayoutParams();Ae.aspect=U,Me=Oe.ME(Ae,{width:R,height:F})}this.setViewRect(Me.x,Me.y,Me.width,Me.height),this.setCenter(c.get("center"),s),this.setZoom(c.get("zoom"))}const DS=new(function(){function c(){this.dimensions=O0}return c.prototype.create=function(s,a){var l=[];function u(p){return{nameProperty:p.get("nameProperty"),aspectScale:p.get("aspectScale"),projection:p.get("projection")}}s.eachComponent("geo",function(p,v){var m=p.get("map"),y=new k0(m+v,m,b.extend({nameMap:p.get("nameMap")},u(p)));y.zoomLimit=p.get("scaleLimit"),l.push(y),p.coordinateSystem=y,y.model=p,y.resize=Rh,y.resize(p,a)}),s.eachSeries(function(p){if("geo"===p.get("coordinateSystem")){var m=p.get("geoIndex")||0;p.coordinateSystem=l[m]}});var h={};return s.eachSeriesByType("map",function(p){if(!p.getHostGeoModel()){var v=p.getMapType();h[v]=h[v]||[],h[v].push(p)}}),b.each(h,function(p,v){var m=b.map(p,function(x){return x.get("nameMap")}),y=new k0(v,v,b.extend({nameMap:b.mergeAll(m)},u(p[0])));y.zoomLimit=b.retrieve.apply(null,b.map(p,function(x){return x.get("scaleLimit")})),l.push(y),y.resize=Rh,y.resize(p[0],a),b.each(p,function(x){x.coordinateSystem=y,function cm(c,s){b.each(s.get("geoCoord"),function(a,l){c.addGeoCoord(l,a)})}(y,x)})}),l},c.prototype.getFilledRegions=function(s,a,l,u){for(var h=(s||[]).slice(),p=b.createHashMap(),v=0;v<h.length;v++)p.set(h[v].name,h[v]);var m=ec_load(a,l,u);return b.each(m.regions,function(y){var x=y.name;!p.get(x)&&h.push({name:x})}),h},c}()),Cp=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.init=function(a,l,u){var h=ec_getGeoResource(a.map);if(h&&"geoJSON"===h.type){var p=a.itemStyle=a.itemStyle||{};"color"in p||(p.color="#eee")}this.mergeDefaultAndTheme(a,u),An.Cc(a,"label",["show"])},s.prototype.optionUpdated=function(){var a=this,l=this.option;l.regions=DS.getFilledRegions(l.regions,l.map,l.nameMap,l.nameProperty);var u={};this._optionModelMap=b.reduce(l.regions||[],function(h,p){var v=p.name;return v&&(h.set(v,new ki.Z(p,a,a.ecModel)),p.selected&&(u[v]=!0)),h},b.createHashMap()),l.selectedMap||(l.selectedMap=u)},s.prototype.getRegionModel=function(a){return this._optionModelMap.get(a)||new ki.Z(null,this,this.ecModel)},s.prototype.getFormattedLabel=function(a,l){var h=this.getRegionModel(a).get("normal"===l?["label","formatter"]:["emphasis","label","formatter"]),p={name:a};return b.isFunction(h)?(p.status=l,h(p)):b.isString(h)?h.replace("{a}",a??""):void 0},s.prototype.setZoom=function(a){this.option.zoom=a},s.prototype.setCenter=function(a){this.option.center=a},s.prototype.select=function(a){var l=this.option,u=l.selectedMode;u&&("multiple"!==u&&(l.selectedMap=null),(l.selectedMap||(l.selectedMap={}))[a]=!0)},s.prototype.unSelect=function(a){var l=this.option.selectedMap;l&&(l[a]=!1)},s.prototype.toggleSelected=function(a){this[this.isSelected(a)?"unSelect":"select"](a)},s.prototype.isSelected=function(a){var l=this.option.selectedMap;return!(!l||!l[a])},s.type="geo",s.layoutMode="box",s.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},s}(xa.Z);function MS(c,s){return c.pointToProjected?c.pointToProjected(s):c.pointToData(s)}function TS(c,s,a,l){var u=c.getZoom(),h=c.getCenter(),p=s.zoom,v=c.projectedToPoint?c.projectedToPoint(h):c.dataToPoint(h);if(null!=s.dx&&null!=s.dy&&(v[0]-=s.dx,v[1]-=s.dy,c.setCenter(MS(c,v),l)),null!=p){if(a){var m=a.min||0;p=Math.max(Math.min(u*p,a.max||1/0),m)/u}c.scaleX*=p,c.scaleY*=p;var C=(s.originY-c.y)*(p-1);c.x-=(s.originX-c.x)*(p-1),c.y-=C,c.updateTransform(),c.setCenter(MS(c,v),l),c.setZoom(p*u)}return{center:c.getCenter(),zoom:c.getZoom()}}var um=z(3325);const R5=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.focusBlurEnabled=!0,a}return(0,Rt.ZT)(s,c),s.prototype.init=function(a,l){this._api=l},s.prototype.render=function(a,l,u,h){if(this._model=a,!a.get("show"))return this._mapDraw&&this._mapDraw.remove(),void(this._mapDraw=null);this._mapDraw||(this._mapDraw=new Ih(u));var p=this._mapDraw;p.draw(a,l,u,this,h),p.group.on("click",this._handleRegionClick,this),p.group.silent=a.get("silent"),this.group.add(p.group),this.updateSelectStatus(a,l,u)},s.prototype._handleRegionClick=function(a){var l;(0,um.o)(a.target,function(u){return null!=(l=(0,Fn.A)(u).eventData)},!0),l&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:l.name})},s.prototype.updateSelectStatus=function(a,l,u){var h=this;this._mapDraw.group.traverse(function(p){var v=(0,Fn.A)(p).eventData;if(v)return h._model.isSelected(v.name)?u.enterSelect(p):u.leaveSelect(p),!0})},s.prototype.findHighDownDispatchers=function(a){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(a,this._model)},s.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},s.type="geo",s}(Ra.Z);function sR(c,s,a){!function(c,s,a){if(s.svg){var l=new yp(c,s.svg);am.set(c,l)}else{var u=s.geoJson||s.geoJSON;u&&!s.features?a=s.specialAreas:u=s,l=new Ls(c,u,a),am.set(c,l)}}(c,s,a)}function ES(c){function s(a,l){l.update="geo:updateSelectStatus",c.registerAction(l,function(u,h){var p={},v=[];return h.eachComponent({mainType:"geo",query:u},function(m){m[a](u.name),(0,b.each)(m.coordinateSystem.regions,function(C){p[C.name]=m.isSelected(C.name)||!1});var x=[];(0,b.each)(p,function(C,M){p[M]&&x.push(M)}),v.push({geoIndex:m.componentIndex,name:x})}),{selected:p,allSelected:v,name:u.name}})}c.registerCoordinateSystem("geo",DS),c.registerComponentModel(Cp),c.registerComponentView(R5),c.registerImpl("registerMap",sR),c.registerImpl("getMap",function(a){return function(c){var s=am.get(c);return s&&"geoJSON"===s.type&&s.getMapForUser()}(a)}),s("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),s("select",{type:"geoSelect",event:"geoselected"}),s("unSelect",{type:"geoUnSelect",event:"geounselected"}),c.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(a,l,u){var h=a.componentType||"series";l.eachComponent({mainType:h,query:a},function(p){var v=p.coordinateSystem;if("geo"===v.type){var m=TS(v,a,p.get("scaleLimit"),u);p.setCenter&&p.setCenter(m.center),p.setZoom&&p.setZoom(m.zoom),"series"===h&&(0,b.each)(p.seriesGroup,function(y){y.setCenter(m.center),y.setZoom(m.zoom)})}})})}var Sp=z(161);function cR(c,s){var a=c.isExpand?c.children:[],l=c.parentNode.children,u=c.hierNode.i?l[c.hierNode.i-1]:null;if(a.length){!function N0(c){for(var s=c.children,a=s.length,l=0,u=0;--a>=0;){var h=s[a];h.hierNode.prelim+=l,h.hierNode.modifier+=l,l+=h.hierNode.shift+(u+=h.hierNode.change)}}(c);var h=(a[0].hierNode.prelim+a[a.length-1].hierNode.prelim)/2;u?(c.hierNode.prelim=u.hierNode.prelim+s(c,u),c.hierNode.modifier=c.hierNode.prelim-h):c.hierNode.prelim=h}else u&&(c.hierNode.prelim=u.hierNode.prelim+s(c,u));c.parentNode.hierNode.defaultAncestor=function dR(c,s,a,l){if(s){for(var u=c,h=c,p=h.parentNode.children[0],v=s,m=u.hierNode.modifier,y=h.hierNode.modifier,x=p.hierNode.modifier,C=v.hierNode.modifier;v=dm(v),h=kh(h),v&&h;){u=dm(u),p=kh(p),u.hierNode.ancestor=c;var M=v.hierNode.prelim+C-h.hierNode.prelim-y+l(v,h);M>0&&(Nh(F0(v,c,a),c,M),y+=M,m+=M),C+=v.hierNode.modifier,y+=h.hierNode.modifier,m+=u.hierNode.modifier,x+=p.hierNode.modifier}v&&!dm(u)&&(u.hierNode.thread=v,u.hierNode.modifier+=C-m),h&&!kh(p)&&(p.hierNode.thread=h,p.hierNode.modifier+=y-x,a=c)}return a}(c,u,c.parentNode.hierNode.defaultAncestor||l[0],s)}function IS(c){c.setLayout({x:c.hierNode.prelim+c.parentNode.hierNode.modifier},!0),c.hierNode.modifier+=c.parentNode.hierNode.modifier}function uR(c){return arguments.length?c:hR}function Oh(c,s){return c-=Math.PI/2,{x:s*Math.cos(c),y:s*Math.sin(c)}}function dm(c){var s=c.children;return s.length&&c.isExpand?s[s.length-1]:c.hierNode.thread}function kh(c){var s=c.children;return s.length&&c.isExpand?s[0]:c.hierNode.thread}function F0(c,s,a){return c.hierNode.ancestor.parentNode===s.parentNode?c.hierNode.ancestor:a}function Nh(c,s,a){var l=a/(s.hierNode.i-c.hierNode.i);s.hierNode.change-=l,s.hierNode.shift+=a,s.hierNode.modifier+=a,s.hierNode.prelim+=a,c.hierNode.change+=l}function hR(c,s){return c.parentNode===s.parentNode?1:2}var hm=z(8802),O5=function c(){this.parentPoint=[],this.childPoints=[]},fm=function(c){function s(a){return c.call(this,a)||this}return(0,Rt.ZT)(s,c),s.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},s.prototype.getDefaultShape=function(){return new O5},s.prototype.buildPath=function(a,l){var u=l.childPoints,h=u.length,p=l.parentPoint,v=u[0],m=u[h-1];if(1===h)return a.moveTo(p[0],p[1]),void a.lineTo(v[0],v[1]);var y=l.orient,x="TB"===y||"BT"===y?0:1,C=1-x,M=(0,ft.GM)(l.forkPosition,1),E=[];E[x]=p[x],E[C]=p[C]+(m[C]-p[C])*M,a.moveTo(p[0],p[1]),a.lineTo(E[0],E[1]),a.moveTo(v[0],v[1]),E[x]=v[x],a.lineTo(E[0],E[1]),E[x]=m[x],a.lineTo(E[0],E[1]),a.lineTo(m[0],m[1]);for(var R=1;R<h-1;R++){var F=u[R];a.moveTo(F[0],F[1]),E[x]=F[x],a.lineTo(E[0],E[1])}},s}(ye.ZP);function V0(c,s){var a=c.getItemLayout(s);return a&&!isNaN(a.x)&&!isNaN(a.y)}function z0(c,s,a,l,u){var h=!a,p=c.tree.getNodeByDataIndex(s),v=p.getModel(),m=p.getVisual("style").fill,y=!1===p.isExpand&&0!==p.children.length?m:"#fff",x=c.tree.root,C=p.parentNode===x?p:p.parentNode||p,M=c.getItemGraphicEl(C.dataIndex),E=C.getLayout(),R=M?{x:M.__oldX,y:M.__oldY,rawX:M.__radialOldRawX,rawY:M.__radialOldRawY}:E,F=p.getLayout();h?((a=new Ks(c,s,null,{symbolInnerColor:y,useNameLabel:!0})).x=R.x,a.y=R.y):a.updateData(c,s,null,{symbolInnerColor:y,useNameLabel:!0}),a.__radialOldRawX=a.__radialRawX,a.__radialOldRawY=a.__radialRawY,a.__radialRawX=F.rawX,a.__radialRawY=F.rawY,l.add(a),c.setItemGraphicEl(s,a),a.__oldX=a.x,a.__oldY=a.y,on.D(a,{x:F.x,y:F.y},u);var U=a.getSymbolPath();if("radial"===u.get("layout")){var ue=x.children[0],me=ue.getLayout(),ve=ue.children.length,Me=void 0,Ae=void 0;if(F.x===me.x&&!0===p.isExpand&&ue.children.length){var Pe={x:(ue.children[0].getLayout().x+ue.children[ve-1].getLayout().x)/2,y:(ue.children[0].getLayout().y+ue.children[ve-1].getLayout().y)/2};(Me=Math.atan2(Pe.y-me.y,Pe.x-me.x))<0&&(Me=2*Math.PI+Me),(Ae=Pe.x<me.x)&&(Me-=Math.PI)}else(Me=Math.atan2(F.y-me.y,F.x-me.x))<0&&(Me=2*Math.PI+Me),0===p.children.length||0!==p.children.length&&!1===p.isExpand?(Ae=F.x<me.x)&&(Me-=Math.PI):(Ae=F.x>me.x)||(Me-=Math.PI);var Ne=Ae?"left":"right",He=v.getModel("label"),Ye=He.get("rotate"),Qe=Ye*(Math.PI/180),it=U.getTextContent();it&&(U.setTextConfig({position:He.get("position")||Ne,rotation:null==Ye?-Me:Qe,origin:"center"}),it.setStyle("verticalAlign","middle"))}var ct=v.get(["emphasis","focus"]),ht="relative"===ct?b.concatArray(p.getAncestorsIndices(),p.getDescendantIndices()):"ancestor"===ct?p.getAncestorsIndices():"descendant"===ct?p.getDescendantIndices():null;ht&&((0,Fn.A)(a).focus=ht),function PS(c,s,a,l,u,h,p,v){var m=s.getModel(),y=c.get("edgeShape"),x=c.get("layout"),C=c.getOrient(),M=c.get(["lineStyle","curveness"]),E=c.get("edgeForkPosition"),R=m.getModel("lineStyle").getLineStyle(),F=l.__edge;if("curve"===y)s.parentNode&&s.parentNode!==a&&(F||(F=l.__edge=new Sp.Z({shape:H0(x,C,M,u,u)})),on.D(F,{shape:H0(x,C,M,h,p)},c));else if("polyline"===y&&"orthogonal"===x&&s!==a&&s.children&&0!==s.children.length&&!0===s.isExpand){for(var U=s.children,ue=[],me=0;me<U.length;me++){var ve=U[me].getLayout();ue.push([ve.x,ve.y])}F||(F=l.__edge=new fm({shape:{parentPoint:[p.x,p.y],childPoints:[[p.x,p.y]],orient:C,forkPosition:E}})),on.D(F,{shape:{parentPoint:[p.x,p.y],childPoints:ue}},c)}F&&("polyline"!==y||s.isExpand)&&(F.useStyle(b.defaults({strokeNoScale:!0,fill:null},R)),(0,bn.WO)(F,m,"lineStyle"),(0,bn.MA)(F),v.add(F))}(u,p,x,a,R,E,F,l),a.__edge&&(a.onHoverStateChange=function(vt){if("blur"!==vt){var gt=p.parentNode&&c.getItemGraphicEl(p.parentNode.dataIndex);gt&&gt.hoverState===bn.CX||(0,bn.Gl)(a.__edge,vt)}})}function yu(c,s,a,l,u){var p=RS(s.tree.root,c),v=p.source,m=p.sourceLayout,y=s.getItemGraphicEl(c.dataIndex);if(y){var x=s.getItemGraphicEl(v.dataIndex),M=y.__edge||(!1===v.isExpand||1===v.children.length?x.__edge:void 0),E=l.get("edgeShape"),R=l.get("layout"),F=l.get("orient"),U=l.get(["lineStyle","curveness"]);M&&("curve"===E?on.bX(M,{shape:H0(R,F,U,m,m),style:{opacity:0}},l,{cb:function(){a.remove(M)},removeOpt:u}):"polyline"===E&&"orthogonal"===l.get("layout")&&on.bX(M,{shape:{parentPoint:[m.x,m.y],childPoints:[[m.x,m.y]]},style:{opacity:0}},l,{cb:function(){a.remove(M)},removeOpt:u}))}}function RS(c,s){for(var l,a=s.parentNode===c?s:s.parentNode||s;null==(l=a.getLayout());)a=a.parentNode===c?a:a.parentNode||a;return{source:a,sourceLayout:l}}function LS(c,s,a,l,u){var h=c.tree.getNodeByDataIndex(s),v=RS(c.tree.root,h).sourceLayout,m={duration:u.get("animationDurationUpdate"),easing:u.get("animationEasingUpdate")};on.bX(a,{x:v.x+1,y:v.y+1},u,{cb:function(){l.remove(a),c.setItemGraphicEl(s,null)},removeOpt:m}),a.fadeOut(null,c.hostModel,{fadeLabel:!0,animation:m}),h.children.forEach(function(y){yu(y,c,l,u,m)}),yu(h,c,l,u,m)}function H0(c,s,a,l,u){var h,p,v,m,y,x,C,M;if("radial"===c){x=u.rawX,M=u.rawY;var E=Oh(y=l.rawX,C=l.rawY),R=Oh(y,C+(M-C)*a),F=Oh(x,M+(C-M)*a),U=Oh(x,M);return{x1:E.x||0,y1:E.y||0,x2:U.x||0,y2:U.y||0,cpx1:R.x||0,cpy1:R.y||0,cpx2:F.x||0,cpy2:F.y||0}}return y=l.x,C=l.y,x=u.x,M=u.y,("LR"===s||"RL"===s)&&(h=y+(x-y)*a,p=C,v=x+(y-x)*a,m=M),("TB"===s||"BT"===s)&&(h=y,p=C+(M-C)*a,v=x,m=M+(C-M)*a),{x1:y,y1:C,x2:x,y2:M,cpx1:h,cpy1:p,cpx2:v,cpy2:m}}const fR=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a._mainGroup=new Vn.Z,a}return(0,Rt.ZT)(s,c),s.prototype.init=function(a,l){this._controller=new Mh(l.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},s.prototype.render=function(a,l,u){var h=a.getData(),p=a.layoutInfo,v=this._mainGroup;"radial"===a.get("layout")?(v.x=p.x+p.width/2,v.y=p.y+p.height/2):(v.x=p.x,v.y=p.y),this._updateViewCoordSys(a,u),this._updateController(a,l,u);var y=this._data;h.diff(y).add(function(x){V0(h,x)&&z0(h,x,null,v,a)}).update(function(x,C){var M=y.getItemGraphicEl(C);V0(h,x)?z0(h,x,M,v,a):M&&LS(y,C,M,v,a)}).remove(function(x){var C=y.getItemGraphicEl(x);C&&LS(y,x,C,v,a)}).execute(),this._nodeScaleRatio=a.get("nodeScaleRatio"),this._updateNodeAndLinkScale(a),!0===a.get("expandAndCollapse")&&h.eachItemGraphicEl(function(x,C){x.off("click").on("click",function(){u.dispatchAction({type:"treeExpandAndCollapse",seriesId:a.id,dataIndex:C})})}),this._data=h},s.prototype._updateViewCoordSys=function(a,l){var u=a.getData(),h=[];u.each(function(C){var M=u.getItemLayout(C);M&&!isNaN(M.x)&&!isNaN(M.y)&&h.push([+M.x,+M.y])});var p=[],v=[];hm.zk(h,p,v);var m=this._min,y=this._max;v[0]-p[0]==0&&(p[0]=m?m[0]:p[0]-1,v[0]=y?y[0]:v[0]+1),v[1]-p[1]==0&&(p[1]=m?m[1]:p[1]-1,v[1]=y?y[1]:v[1]+1);var x=a.coordinateSystem=new ed;x.zoomLimit=a.get("scaleLimit"),x.setBoundingRect(p[0],p[1],v[0]-p[0],v[1]-p[1]),x.setCenter(a.get("center"),l),x.setZoom(a.get("zoom")),this.group.attr({x:x.x,y:x.y,scaleX:x.scaleX,scaleY:x.scaleY}),this._min=p,this._max=v},s.prototype._updateController=function(a,l,u){var h=this,p=this._controller,v=this._controllerHost,m=this.group;p.setPointerChecker(function(y,x,C){var M=m.getBoundingRect();return M.applyTransform(m.transform),M.contain(x,C)&&!Xu(y,u,a)}),p.enable(a.get("roam")),v.zoomLimit=a.get("scaleLimit"),v.zoom=a.coordinateSystem.getZoom(),p.off("pan").off("zoom").on("pan",function(y){tm(v,y.dx,y.dy),u.dispatchAction({seriesId:a.id,type:"treeRoam",dx:y.dx,dy:y.dy})}).on("zoom",function(y){nm(v,y.scale,y.originX,y.originY),u.dispatchAction({seriesId:a.id,type:"treeRoam",zoom:y.scale,originX:y.originX,originY:y.originY}),h._updateNodeAndLinkScale(a),u.updateLabelLayout()})},s.prototype._updateNodeAndLinkScale=function(a){var l=a.getData(),u=this._getNodeGlobalScale(a);l.eachItemGraphicEl(function(h,p){h.setSymbolScale(u)})},s.prototype._getNodeGlobalScale=function(a){var l=a.coordinateSystem;if("view"!==l.type)return 1;var u=this._nodeScaleRatio,h=l.scaleX||1;return((l.getZoom()-1)*u+1)/h},s.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},s.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},s.type="tree",s}(na.Z);var OS=z(4786),Os=function(){function c(s,a){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=s||"",this.hostTree=a}return c.prototype.isRemoved=function(){return this.dataIndex<0},c.prototype.eachNode=function(s,a,l){b.isFunction(s)&&(l=a,a=s,s=null),b.isString(s=s||{})&&(s={order:s});var p,u=s.order||"preorder",h=this[s.attr||"children"];"preorder"===u&&(p=a.call(l,this));for(var v=0;!p&&v<h.length;v++)h[v].eachNode(s,a,l);"postorder"===u&&a.call(l,this)},c.prototype.updateDepthAndHeight=function(s){var a=0;this.depth=s;for(var l=0;l<this.children.length;l++){var u=this.children[l];u.updateDepthAndHeight(s+1),u.height>a&&(a=u.height)}this.height=a+1},c.prototype.getNodeById=function(s){if(this.getId()===s)return this;for(var a=0,l=this.children,u=l.length;a<u;a++){var h=l[a].getNodeById(s);if(h)return h}},c.prototype.contains=function(s){if(s===this)return!0;for(var a=0,l=this.children,u=l.length;a<u;a++){var h=l[a].contains(s);if(h)return h}},c.prototype.getAncestors=function(s){for(var a=[],l=s?this:this.parentNode;l;)a.push(l),l=l.parentNode;return a.reverse(),a},c.prototype.getAncestorsIndices=function(){for(var s=[],a=this;a;)s.push(a.dataIndex),a=a.parentNode;return s.reverse(),s},c.prototype.getDescendantIndices=function(){var s=[];return this.eachNode(function(a){s.push(a.dataIndex)}),s},c.prototype.getValue=function(s){var a=this.hostTree.data;return a.getStore().get(a.getDimensionIndex(s||"value"),this.dataIndex)},c.prototype.setLayout=function(s,a){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,s,a)},c.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},c.prototype.getModel=function(s){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(s)},c.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},c.prototype.setVisual=function(s,a){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,s,a)},c.prototype.getVisual=function(s){return this.hostTree.data.getItemVisual(this.dataIndex,s)},c.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},c.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},c.prototype.getChildIndex=function(){if(this.parentNode){for(var s=this.parentNode.children,a=0;a<s.length;++a)if(s[a]===this)return a;return-1}return-1},c.prototype.isAncestorOf=function(s){for(var a=s.parentNode;a;){if(a===this)return!0;a=a.parentNode}return!1},c.prototype.isDescendantOf=function(s){return s!==this&&s.isAncestorOf(this)},c}();const U0=function(){function c(s){this.type="tree",this._nodes=[],this.hostModel=s}return c.prototype.eachNode=function(s,a,l){this.root.eachNode(s,a,l)},c.prototype.getNodeByDataIndex=function(s){var a=this.data.getRawIndex(s);return this._nodes[a]},c.prototype.getNodeById=function(s){return this.root.getNodeById(s)},c.prototype.update=function(){for(var s=this.data,a=this._nodes,l=0,u=a.length;l<u;l++)a[l].dataIndex=-1;for(l=0,u=s.count();l<u;l++)a[s.getRawIndex(l)].dataIndex=l},c.prototype.clearLayouts=function(){this.data.clearItemLayouts()},c.createTree=function(s,a,l){var u=new c(a),h=[],p=1;!function v(x,C){var M=x.value;p=Math.max(p,b.isArray(M)?M.length:1),h.push(x);var E=new Os((0,An.U5)(x.name,""),u);C?function pR(c,s){c.parentNode!==s&&(s.children.push(c),c.parentNode=s)}(E,C):u.root=E,u._nodes.push(E);var R=x.children;if(R)for(var F=0;F<R.length;F++)v(R[F],E)}(s),u.root.updateDepthAndHeight(0);var m=(0,Zr.Z)(h,{coordDimensions:["value"],dimensionsCount:p}).dimensions,y=new nr.Z(m,a);return y.initData(h),l&&l(y),(0,OS.Z)({mainData:y,struct:u,structAttr:"tree"}),u.update(),u},c}();function Dp(c,s,a){if(c&&b.indexOf(s,c.type)>=0){var l=a.getData().tree.root,u=c.targetNode;if(b.isString(u)&&(u=l.getNodeById(u)),u&&l.contains(u))return{node:u};var h=c.targetNodeId;if(null!=h&&(u=l.getNodeById(h)))return{node:u}}}function kS(c){for(var s=[];c;)(c=c.parentNode)&&s.push(c);return s.reverse()}function G0(c,s){var a=kS(c);return b.indexOf(a,s)>=0}function pm(c,s){for(var a=[];c;){var l=c.dataIndex;a.push({name:c.name,dataIndex:l,value:s.getRawValue(l)}),c=c.parentNode}return a.reverse(),a}const gR=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.hasSymbolVisual=!0,a.ignoreStyleOnData=!0,a}return(0,Rt.ZT)(s,c),s.prototype.getInitialData=function(a){var l={name:a.name,children:a.data},h=new ki.Z(a.leaves||{},this,this.ecModel),p=U0.createTree(l,this,function v(C){C.wrapMethod("getItemModel",function(M,E){var R=p.getNodeByDataIndex(E);return R&&R.children.length&&R.isExpand||(M.parentModel=h),M})}),m=0;p.eachNode("preorder",function(C){C.depth>m&&(m=C.depth)});var x=a.expandAndCollapse&&a.initialTreeDepth>=0?a.initialTreeDepth:m;return p.root.eachNode("preorder",function(C){var M=C.hostTree.data.getRawDataItem(C.dataIndex);C.isExpand=M&&null!=M.collapsed?!M.collapsed:C.depth<=x}),p.data},s.prototype.getOrient=function(){var a=this.get("orient");return"horizontal"===a?a="LR":"vertical"===a&&(a="TB"),a},s.prototype.setZoom=function(a){this.option.zoom=a},s.prototype.setCenter=function(a){this.option.center=a},s.prototype.formatTooltip=function(a,l,u){for(var h=this.getData().tree,p=h.root.children[0],v=h.getNodeByDataIndex(a),m=v.getValue(),y=v.name;v&&v!==p;)y=v.parentNode.name+"."+y,v=v.parentNode;return(0,Ui.TX)("nameValue",{name:y,value:m,noValue:isNaN(m)||null==m})},s.prototype.getDataParams=function(a){var l=c.prototype.getDataParams.apply(this,arguments),u=this.getData().tree.getNodeByDataIndex(a);return l.treeAncestors=pm(u,this),l.collapsed=!u.isExpand,l},s.type="series.tree",s.layoutMode="box",s.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},s}(zi.Z);function Mp(c,s){for(var l,a=[c];l=a.pop();)if(s(l),l.isExpand){var u=l.children;if(u.length)for(var h=u.length-1;h>=0;h--)a.push(u[h])}}function mR(c,s){c.eachSeriesByType("tree",function(a){!function gm(c,s){var a=function L5(c,s){return Oe.ME(c.getBoxLayoutParams(),{width:s.getWidth(),height:s.getHeight()})}(c,s);c.layoutInfo=a;var l=c.get("layout"),u=0,h=0,p=null;"radial"===l?(u=2*Math.PI,h=Math.min(a.height,a.width)/2,p=uR(function(ve,Me){return(ve.parentNode===Me.parentNode?1:2)/ve.depth})):(u=a.width,h=a.height,p=uR());var v=c.getData().tree.root,m=v.children[0];if(m){(function AS(c){var s=c;s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var l,u,a=[s];l=a.pop();)if(u=l.children,l.isExpand&&u.length)for(var p=u.length-1;p>=0;p--){var v=u[p];v.hierNode={defaultAncestor:null,ancestor:v,prelim:0,modifier:0,change:0,shift:0,i:p,thread:null},a.push(v)}})(v),function vR(c,s,a){for(var h,l=[c],u=[];h=l.pop();)if(u.push(h),h.isExpand){var p=h.children;if(p.length)for(var v=0;v<p.length;v++)l.push(p[v])}for(;h=u.pop();)s(h,a)}(m,cR,p),v.hierNode.modifier=-m.hierNode.prelim,Mp(m,IS);var y=m,x=m,C=m;Mp(m,function(ve){var Me=ve.getLayout().x;Me<y.getLayout().x&&(y=ve),Me>x.getLayout().x&&(x=ve),ve.depth>C.depth&&(C=ve)});var M=y===x?1:p(y,x)/2,E=M-y.getLayout().x,R=0,F=0,U=0,ue=0;if("radial"===l)R=u/(x.getLayout().x+M+E),F=h/(C.depth-1||1),Mp(m,function(ve){var Me=Oh(U=(ve.getLayout().x+E)*R,ue=(ve.depth-1)*F);ve.setLayout({x:Me.x,y:Me.y,rawX:U,rawY:ue},!0)});else{var me=c.getOrient();"RL"===me||"LR"===me?(F=h/(x.getLayout().x+M+E),R=u/(C.depth-1||1),Mp(m,function(ve){ue=(ve.getLayout().x+E)*F,ve.setLayout({x:U="LR"===me?(ve.depth-1)*R:u-(ve.depth-1)*R,y:ue},!0)})):("TB"===me||"BT"===me)&&(R=u/(x.getLayout().x+M+E),F=h/(C.depth-1||1),Mp(m,function(ve){U=(ve.getLayout().x+E)*R,ve.setLayout({x:U,y:ue="TB"===me?(ve.depth-1)*F:h-(ve.depth-1)*F},!0)}))}}}(a,s)})}function Hc(c){c.eachSeriesByType("tree",function(s){var a=s.getData();a.tree.eachNode(function(u){var p=u.getModel().getModel("itemStyle").getItemStyle(),v=a.ensureUniqueItemVisual(u.dataIndex,"style");(0,b.extend)(v,p)})})}var W0=["treemapZoomToNode","treemapRender","treemapMove"],VS=z(6468);function _R(c){var s=c.getData(),l={};s.tree.eachNode(function(u){for(var h=u;h&&h.depth>1;)h=h.parentNode;var p=(0,VS.i)(c.ecModel,h.name||h.dataIndex+"",l);u.setVisual("decal",p)})}function vm(c){var s=0;b.each(c.children,function(l){vm(l);var u=l.value;b.isArray(u)&&(u=u[0]),s+=u});var a=c.value;b.isArray(a)&&(a=a[0]),(null==a||isNaN(a))&&(a=s),a<0&&(a=0),b.isArray(c.value)?c.value[0]=a:c.value=a}const N5=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.preventUsingHoverLayer=!0,a}return(0,Rt.ZT)(s,c),s.prototype.getInitialData=function(a,l){var u={name:a.name,children:a.data};vm(u);var h=a.levels||[],p=this.designatedVisualItemStyle={},v=new ki.Z({itemStyle:p},this,l);h=a.levels=function j0(c,s){var a=(0,An.kF)(s.get("color")),l=(0,An.kF)(s.get(["aria","decal","decals"]));if(a){var u,h;b.each(c=c||[],function(v){var m=new ki.Z(v),y=m.get("color"),x=m.get("decal");(m.get(["itemStyle","color"])||y&&"none"!==y)&&(u=!0),(m.get(["itemStyle","decal"])||x&&"none"!==x)&&(h=!0)});var p=c[0]||(c[0]={});return u||(p.color=a.slice()),!h&&l&&(p.decal=l.slice()),c}}(h,l);var m=b.map(h||[],function(C){return new ki.Z(C,v,l)},this),y=U0.createTree(u,this,function x(C){C.wrapMethod("getItemModel",function(M,E){var R=y.getNodeByDataIndex(E);return M.parentModel=(R?m[R.depth]:null)||v,M})});return y.data},s.prototype.optionUpdated=function(){this.resetViewRoot()},s.prototype.formatTooltip=function(a,l,u){var h=this.getData(),p=this.getRawValue(a),v=h.getName(a);return(0,Ui.TX)("nameValue",{name:v,value:p})},s.prototype.getDataParams=function(a){var l=c.prototype.getDataParams.apply(this,arguments),u=this.getData().tree.getNodeByDataIndex(a);return l.treeAncestors=pm(u,this),l.treePathInfo=l.treeAncestors,l},s.prototype.setLayoutInfo=function(a){this.layoutInfo=this.layoutInfo||{},b.extend(this.layoutInfo,a)},s.prototype.mapIdToIndex=function(a){var l=this._idIndexMap;l||(l=this._idIndexMap=b.createHashMap(),this._idIndexMapCount=0);var u=l.get(a);return null==u&&l.set(a,u=this._idIndexMapCount++),u},s.prototype.getViewRoot=function(){return this._viewRoot},s.prototype.resetViewRoot=function(a){a?this._viewRoot=a:a=this._viewRoot;var l=this.getRawData().tree.root;(!a||a!==l&&!l.contains(a))&&(this._viewRoot=l)},s.prototype.enableAriaDecal=function(){_R(this)},s.type="series.treemap",s.layoutMode="box",s.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25b6",zoomToNodeRatio:.1024,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},s}(zi.Z);var td=z(3926);function bR(c,s,a,l,u,h){var p=[[u?c:c-5,s],[c+a,s],[c+a,s+l],[u?c:c-5,s+l]];return!h&&p.splice(2,0,[c+a+5,s+l/2]),!u&&p.push([c,s+l/2]),p}function US(c,s,a){(0,Fn.A)(c).eventData={componentType:"series",componentSubType:"treemap",componentIndex:s.componentIndex,seriesIndex:s.seriesIndex,seriesName:s.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:a&&a.dataIndex,name:a&&a.name},treePathInfo:a&&pm(a,s)}}const mm=function(){function c(s){this.group=new Vn.Z,s.add(this.group)}return c.prototype.render=function(s,a,l,u){var h=s.getModel("breadcrumb"),p=this.group;if(p.removeAll(),h.get("show")&&l){var v=h.getModel("itemStyle"),m=h.getModel("emphasis"),y=v.getModel("textStyle"),x=m.getModel(["itemStyle","textStyle"]),C={pos:{left:h.get("left"),right:h.get("right"),top:h.get("top"),bottom:h.get("bottom")},box:{width:a.getWidth(),height:a.getHeight()},emptyItemWidth:h.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(l,C,y),this._renderContent(s,C,v,m,y,x,u),Oe.p$(p,C.pos,C.box)}},c.prototype._prepare=function(s,a,l){for(var u=s;u;u=u.parentNode){var h=(0,An.U5)(u.getModel().get("name"),""),p=l.getTextRect(h),v=Math.max(p.width+16,a.emptyItemWidth);a.totalWidth+=v+8,a.renderList.push({node:u,text:h,width:v})}},c.prototype._renderContent=function(s,a,l,u,h,p,v){for(var m=0,y=a.emptyItemWidth,x=s.get(["breadcrumb","height"]),C=Oe.lq(a.pos,a.box),M=a.totalWidth,E=a.renderList,R=u.getModel("itemStyle").getItemStyle(),F=E.length-1;F>=0;F--){var U=E[F],ue=U.node,me=U.width,ve=U.text;M>C.width&&(M-=me-y,me=y,ve=null);var Me=new Wo.Z({shape:{points:bR(m,0,me,x,F===E.length-1,0===F)},style:(0,b.defaults)(l.getItemStyle(),{lineJoin:"bevel"}),textContent:new kt.ZP({style:(0,Bn.Lr)(h,{text:ve})}),textConfig:{position:"inside"},z2:1e4*bn.zr,onclick:(0,b.curry)(v,ue)});Me.disableLabelAnimation=!0,Me.getTextContent().ensureState("emphasis").style=(0,Bn.Lr)(p,{text:ve}),Me.ensureState("emphasis").style=R,(0,bn.k5)(Me,u.get("focus"),u.get("blurScope"),u.get("disabled")),this.group.add(Me),US(Me,s,ue),m+=me+8}},c.prototype.remove=function(){this.group.removeAll()},c}();var GS=function(){function c(){this._storage=[],this._elExistsMap={}}return c.prototype.add=function(s,a,l,u,h){return!this._elExistsMap[s.id]&&(this._elExistsMap[s.id]=!0,this._storage.push({el:s,target:a,duration:l,delay:u,easing:h}),!0)},c.prototype.finished=function(s){return this._finishedCallback=s,this},c.prototype.start=function(){for(var s=this,a=this._storage.length,l=function(){--a<=0&&(s._storage.length=0,s._elExistsMap={},s._finishedCallback&&s._finishedCallback())},u=0,h=this._storage.length;u<h;u++){var p=this._storage[u];p.el.animateTo(p.target,{duration:p.duration,delay:p.delay,easing:p.easing,setToFinal:!0,done:l,aborted:l})}return this},c}(),WS=z(498),Ai=Vn.Z,jS=Jt.Z,X0="upperLabel",xR=10*bn.zr,wR=2*bn.zr,CR=3*bn.zr,nd=(0,WS.Z)([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),YS=function(c){var s=nd(c);return s.stroke=s.fill=s.lineWidth=null,s},$0=(0,An.Yf)();const $S=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a._state="ready",a._storage={nodeGroup:[],background:[],content:[]},a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u,h){var p=l.findComponents({mainType:"series",subType:"treemap",query:h});if(!((0,b.indexOf)(p,a)<0)){this.seriesModel=a,this.api=u,this.ecModel=l;var m=Dp(h,["treemapZoomToNode","treemapRootToNode"],a),y=h&&h.type,x=a.layoutInfo,C=!this._oldTree,M=this._storage,E="treemapRootToNode"===y&&m&&M?{rootNodeGroup:M.nodeGroup[m.node.getRawIndex()],direction:h.direction}:null,R=this._giveContainerGroup(x),F=a.get("animation"),U=this._doRender(R,a,E);!F||C||y&&"treemapZoomToNode"!==y&&"treemapRootToNode"!==y?U.renderFinally():this._doAnimation(R,U,a,E),this._resetController(u),this._renderBreadcrumb(a,u,m)}},s.prototype._giveContainerGroup=function(a){var l=this._containerGroup;return l||(l=this._containerGroup=new Ai,this._initEvents(l),this.group.add(l)),l.x=a.x,l.y=a.y,l},s.prototype._doRender=function(a,l,u){var h=l.getData().tree,p=this._oldTree,v={nodeGroup:[],background:[],content:[]},m={nodeGroup:[],background:[],content:[]},y=this._storage,x=[];function C(me,ve,Me,Ae){return function K0(c,s,a,l,u,h,p,v,m,y){if(p){var x=p.getLayout(),C=c.getData(),M=p.getModel();if(C.setItemGraphicEl(p.dataIndex,null),x&&x.isInView){var E=x.width,R=x.height,F=x.borderWidth,U=x.invisible,ue=p.getRawIndex(),me=v&&v.getRawIndex(),ve=p.viewChildren,Me=x.upperHeight,Ae=ve&&ve.length,Pe=M.getModel("itemStyle"),Ne=M.getModel(["emphasis","itemStyle"]),He=M.getModel(["blur","itemStyle"]),Ye=M.getModel(["select","itemStyle"]),Qe=Pe.get("borderRadius")||0,it=hr("nodeGroup",Ai);if(it){if(m.add(it),it.x=x.x||0,it.y=x.y||0,it.markRedraw(),$0(it).nodeWidth=E,$0(it).nodeHeight=R,x.isAboveViewRoot)return it;var ct=hr("background",jS,y,wR);ct&&function en(ni,or,gi){var bi=(0,Fn.A)(or);if(bi.dataIndex=p.dataIndex,bi.seriesIndex=c.seriesIndex,or.setShape({x:0,y:0,width:E,height:R,r:Qe}),U)Tn(or);else{or.invisible=!1;var Ii=p.getVisual("style"),Ya=Ii.stroke,po=YS(Pe);po.fill=Ya;var aa=nd(Ne);aa.fill=Ne.get("borderColor");var Xa=nd(He);Xa.fill=He.get("borderColor");var Sa=nd(Ye);Sa.fill=Ye.get("borderColor"),gi?tr(or,Ya,Ii.opacity,{x:F,y:0,width:E-2*F,height:Me}):or.removeTextContent(),or.setStyle(po),or.ensureState("emphasis").style=aa,or.ensureState("blur").style=Xa,or.ensureState("select").style=Sa,(0,bn.MA)(or)}ni.add(or)}(it,ct,Ae&&x.upperLabelHeight);var ht=M.getModel("emphasis"),vt=ht.get("focus"),gt=ht.get("blurScope"),Ot=ht.get("disabled"),Gt="ancestor"===vt?p.getAncestorsIndices():"descendant"===vt?p.getDescendantIndices():vt;if(Ae)(0,bn.Av)(it)&&(0,bn.Nj)(it,!1),ct&&((0,bn.Nj)(ct,!Ot),C.setItemGraphicEl(p.dataIndex,ct),(0,bn.Ib)(ct,Gt,gt));else{var Ft=hr("content",jS,y,CR);Ft&&function Mn(ni,or){var gi=(0,Fn.A)(or);gi.dataIndex=p.dataIndex,gi.seriesIndex=c.seriesIndex;var bi=Math.max(E-2*F,0),Ii=Math.max(R-2*F,0);if(or.culling=!0,or.setShape({x:F,y:F,width:bi,height:Ii,r:Qe}),U)Tn(or);else{or.invisible=!1;var Ya=p.getVisual("style"),po=Ya.fill,aa=YS(Pe);aa.fill=po,aa.decal=Ya.decal;var Xa=nd(Ne),Sa=nd(He),Ko=nd(Ye);tr(or,po,Ya.opacity,null),or.setStyle(aa),or.ensureState("emphasis").style=Xa,or.ensureState("blur").style=Sa,or.ensureState("select").style=Ko,(0,bn.MA)(or)}ni.add(or)}(it,Ft),ct.disableMorphing=!0,ct&&(0,bn.Av)(ct)&&(0,bn.Nj)(ct,!1),(0,bn.Nj)(it,!Ot),C.setItemGraphicEl(p.dataIndex,it),(0,bn.Ib)(it,Gt,gt)}return it}}}function Tn(ni){!ni.invisible&&h.push(ni)}function tr(ni,or,gi,bi){var Ii=M.getModel(bi?X0:"label"),Ya=(0,An.U5)(M.get("name"),null),po=Ii.getShallow("show");(0,Bn.ni)(ni,(0,Bn.k3)(M,bi?X0:"label"),{defaultText:po?Ya:null,inheritColor:or,defaultOpacity:gi,labelFetcher:c,labelDataIndex:p.dataIndex});var aa=ni.getTextContent();if(aa){var Xa=aa.style,Sa=(0,b.normalizeCssArray)(Xa.padding||0);bi&&(ni.setTextConfig({layoutRect:bi}),aa.disableLabelLayout=!0),aa.beforeUpdate=function(){var eu=Math.max((bi?bi.width:ni.shape.width)-Sa[1]-Sa[3],0),ws=Math.max((bi?bi.height:ni.shape.height)-Sa[0]-Sa[2],0);(Xa.width!==eu||Xa.height!==ws)&&aa.setStyle({width:eu,height:ws})},Xa.truncateMinChar=2,Xa.lineOverflow="truncate",_r(Xa,bi,x);var Ko=aa.getState("emphasis");_r(Ko?Ko.style:null,bi,x)}}function _r(ni,or,gi){var bi=ni?ni.text:null;if(!or&&gi.isLeafRoot&&null!=bi){var Ii=c.get("drillDownIcon",!0);ni.text=Ii?Ii+" "+bi:bi}}function hr(ni,or,gi,bi){var Ii=null!=me&&a[ni][me],Ya=u[ni];return Ii?(a[ni][me]=null,function jr(ni,or){var gi=ni[ue]={};or instanceof Ai?(gi.oldX=or.x,gi.oldY=or.y):gi.oldShape=(0,b.extend)({},or.shape)}(Ya,Ii)):U||((Ii=new or)instanceof qu.ZP&&(Ii.z2=function XS(c,s){return c*xR+s}(gi,bi)),function pi(ni,or){var gi=ni[ue]={},bi=p.parentNode,Ii=or instanceof Vn.Z;if(bi&&(!l||"drillDown"===l.direction)){var Ya=0,po=0,aa=u.background[bi.getRawIndex()];!l&&aa&&aa.oldShape&&(Ya=aa.oldShape.width,po=aa.oldShape.height),Ii?(gi.oldX=0,gi.oldY=po):gi.oldShape={x:Ya,y:po,width:0,height:0}}gi.fadein=!Ii}(Ya,Ii)),s[ni][ue]=Ii}}(l,m,y,u,v,x,me,ve,Me,Ae)}!function F(me,ve,Me,Ae,Pe){function Ne(Ye){return Ye.getId()}function He(Ye,Qe){var it=null!=Ye?me[Ye]:null,ct=null!=Qe?ve[Qe]:null,ht=C(it,ct,Me,Pe);ht&&F(it&&it.viewChildren||[],ct&&ct.viewChildren||[],ht,Ae,Pe+1)}Ae?(ve=me,(0,b.each)(me,function(Ye,Qe){!Ye.isRemoved()&&He(Qe,Qe)})):new td.Z(ve,me,Ne,Ne).add(He).update(He).remove((0,b.curry)(He,null)).execute()}(h.root?[h.root]:[],p&&p.root?[p.root]:[],a,h===p||!p,0);var M=function U(me){var ve={nodeGroup:[],background:[],content:[]};return me&&(0,b.each)(me,function(Me,Ae){var Pe=ve[Ae];(0,b.each)(Me,function(Ne){Ne&&(Pe.push(Ne),$0(Ne).willDelete=!0)})}),ve}(y);if(this._oldTree=h,this._storage=m,this._controllerHost){var E=this.seriesModel.layoutInfo,R=h.root.getLayout();R.width===E.width&&R.height===E.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:v,willDeleteEls:M,renderFinally:function ue(){(0,b.each)(M,function(me){(0,b.each)(me,function(ve){ve.parent&&ve.parent.remove(ve)})}),(0,b.each)(x,function(me){me.invisible=!0,me.dirty()})}}},s.prototype._doAnimation=function(a,l,u,h){var p=u.get("animationDurationUpdate"),v=u.get("animationEasing"),m=((0,b.isFunction)(p)?0:p)||0,y=((0,b.isFunction)(v)?null:v)||"cubicOut",x=function Y0(){return new GS}();(0,b.each)(l.willDeleteEls,function(C,M){(0,b.each)(C,function(E,R){if(!E.invisible){var U,F=E.parent,ue=$0(F);if(h&&"drillDown"===h.direction)U=F===h.rootNodeGroup?{shape:{x:0,y:0,width:ue.nodeWidth,height:ue.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var me=0,ve=0;ue.willDelete||(me=ue.nodeWidth/2,ve=ue.nodeHeight/2),U="nodeGroup"===M?{x:me,y:ve,style:{opacity:0}}:{shape:{x:me,y:ve,width:0,height:0},style:{opacity:0}}}U&&x.add(E,U,m,0,y)}})}),(0,b.each)(this._storage,function(C,M){(0,b.each)(C,function(E,R){var F=l.lastsForAnimation[M][R],U={};!F||(E instanceof Vn.Z?null!=F.oldX&&(U.x=E.x,U.y=E.y,E.x=F.oldX,E.y=F.oldY):(F.oldShape&&(U.shape=(0,b.extend)({},E.shape),E.setShape(F.oldShape)),F.fadein?(E.setStyle("opacity",0),U.style={opacity:1}):1!==E.style.opacity&&(U.style={opacity:1})),x.add(E,U,m,0,y))})},this),this._state="animating",x.finished((0,b.bind)(function(){this._state="ready",l.renderFinally()},this)).start()},s.prototype._resetController=function(a){var l=this._controller,u=this._controllerHost;u||(this._controllerHost={target:this.group},u=this._controllerHost),l||((l=this._controller=new Mh(a.getZr())).enable(this.seriesModel.get("roam")),u.zoomLimit=this.seriesModel.get("scaleLimit"),u.zoom=this.seriesModel.get("zoom"),l.on("pan",(0,b.bind)(this._onPan,this)),l.on("zoom",(0,b.bind)(this._onZoom,this)));var h=new Pa.Z(0,0,a.getWidth(),a.getHeight());l.setPointerChecker(function(p,v,m){return h.contain(v,m)})},s.prototype._clearController=function(){var a=this._controller;this._controllerHost=null,a&&(a.dispose(),a=null)},s.prototype._onPan=function(a){if("animating"!==this._state&&(Math.abs(a.dx)>3||Math.abs(a.dy)>3)){var l=this.seriesModel.getData().tree.root;if(!l)return;var u=l.getLayout();if(!u)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:u.x+a.dx,y:u.y+a.dy,width:u.width,height:u.height}})}},s.prototype._onZoom=function(a){var l=a.originX,u=a.originY,h=a.scale;if("animating"!==this._state){var p=this.seriesModel.getData().tree.root;if(!p)return;var v=p.getLayout();if(!v)return;var y,m=new Pa.Z(v.x,v.y,v.width,v.height),x=this._controllerHost;y=x.zoomLimit;var C=x.zoom=x.zoom||1;if(C*=h,y){var M=y.min||0;C=Math.max(Math.min(y.max||1/0,C),M)}var R=C/x.zoom;x.zoom=C;var F=this.seriesModel.layoutInfo;l-=F.x,u-=F.y;var U=Hr.create();Hr.translate(U,U,[-l,-u]),Hr.scale(U,U,[R,R]),Hr.translate(U,U,[l,u]),m.applyTransform(U),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:m.x,y:m.y,width:m.width,height:m.height}})}},s.prototype._initEvents=function(a){var l=this;a.on("click",function(u){if("ready"===l._state){var h=l.seriesModel.get("nodeClick",!0);if(h){var p=l.findTarget(u.offsetX,u.offsetY);if(p){var v=p.node;if(v.getLayout().isLeafRoot)l._rootToNode(p);else if("zoomToNode"===h)l._zoomToNode(p);else if("link"===h){var m=v.hostTree.data.getItemModel(v.dataIndex),y=m.get("link",!0),x=m.get("target",!0)||"blank";y&&(0,Ia.MI)(y,x)}}}}},this)},s.prototype._renderBreadcrumb=function(a,l,u){var h=this;u||(u=null!=a.get("leafDepth",!0)?{node:a.getViewRoot()}:this.findTarget(l.getWidth()/2,l.getHeight()/2))||(u={node:a.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new mm(this.group))).render(a,l,u.node,function(p){"animating"!==h._state&&(G0(a.getViewRoot(),p)?h._rootToNode({node:p}):h._zoomToNode({node:p}))})},s.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},s.prototype.dispose=function(){this._clearController()},s.prototype._zoomToNode=function(a){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:a.node})},s.prototype._rootToNode=function(a){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:a.node})},s.prototype.findTarget=function(a,l){var u;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(p){var v=this._storage.background[p.getRawIndex()];if(v){var m=v.transformCoordToLocal(a,l),y=v.shape;if(!(y.x<=m[0]&&m[0]<=y.x+y.width&&y.y<=m[1]&&m[1]<=y.y+y.height))return!1;u={node:p,offsetX:m[0],offsetY:m[1]}}},this),u},s.type="treemap",s}(na.Z);var Fh=b.each,SR=b.isObject,_m=function(){function c(s){var a=s.mappingMethod,l=s.type,u=this.option=b.clone(s);this.type=l,this.mappingMethod=a,this._normalizeData=eb[a];var h=c.visualHandlers[l];this.applyVisual=h.applyVisual,this.getColorMapper=h.getColorMapper,this._normalizedToVisual=h._normalizedToVisual[a],"piecewise"===a?(q0(u),function Q0(c){var s=c.pieceList;c.hasSpecialVisual=!1,b.each(s,function(a,l){a.originIndex=l,null!=a.visual&&(c.hasSpecialVisual=!0)})}(u)):"category"===a?u.categories?function B5(c){var s=c.categories,a=c.categoryMap={},l=c.visual;if(Fh(s,function(p,v){a[p]=v}),!b.isArray(l)){var u=[];b.isObject(l)?Fh(l,function(p,v){u[a[v]??-1]=p}):u[-1]=l,l=KS(c,u)}for(var h=s.length-1;h>=0;h--)null==l[h]&&(delete a[s[h]],s.pop())}(u):q0(u,!0):(b.assert("linear"!==a||u.dataExtent),q0(u))}return c.prototype.mapValueToVisual=function(s){var a=this._normalizeData(s);return this._normalizedToVisual(a,s)},c.prototype.getNormalizer=function(){return b.bind(this._normalizeData,this)},c.listVisualTypes=function(){return b.keys(c.visualHandlers)},c.isValidType=function(s){return c.visualHandlers.hasOwnProperty(s)},c.eachVisual=function(s,a,l){b.isObject(s)?b.each(s,a,l):a.call(l,s)},c.mapVisual=function(s,a,l){var u,h=b.isArray(s)?[]:b.isObject(s)?{}:(u=!0,null);return c.eachVisual(s,function(p,v){var m=a.call(l,p,v);u?h=m:h[v]=m}),h},c.retrieveVisuals=function(s){var l,a={};return s&&Fh(c.visualHandlers,function(u,h){s.hasOwnProperty(h)&&(a[h]=s[h],l=!0)}),l?a:null},c.prepareVisualTypes=function(s){if(b.isArray(s))s=s.slice();else{if(!SR(s))return[];var a=[];Fh(s,function(l,u){a.push(u)}),s=a}return s.sort(function(l,u){return"color"===u&&"color"!==l&&0===l.indexOf("color")?1:-1}),s},c.dependsOn=function(s,a){return"color"===a?!(!s||0!==s.indexOf(a)):s===a},c.findPieceIndex=function(s,a,l){for(var u,h=1/0,p=0,v=a.length;p<v;p++){var m=a[p].value;if(null!=m){if(m===s||b.isString(m)&&m===s+"")return p;l&&M(m,p)}}for(p=0,v=a.length;p<v;p++){var y=a[p],x=y.interval,C=y.close;if(x){if(x[0]===-1/0){if(id(C[1],s,x[1]))return p}else if(x[1]===1/0){if(id(C[0],x[0],s))return p}else if(id(C[0],x[0],s)&&id(C[1],s,x[1]))return p;l&&M(x[0],p),l&&M(x[1],p)}}if(l)return s===1/0?a.length-1:s===-1/0?0:u;function M(E,R){var F=Math.abs(E-s);F<h&&(h=F,u=R)}},c.visualHandlers={color:{applyVisual:Vh("color"),getColorMapper:function(){var s=this.option;return b.bind("category"===s.mappingMethod?function(a,l){return!l&&(a=this._normalizeData(a)),Ml.call(this,a)}:function(a,l,u){var h=!!u;return!l&&(a=this._normalizeData(a)),u=wn.fastLerp(a,s.parsedVisual,u),h?u:wn.stringify(u,"rgba")},this)},_normalizedToVisual:{linear:function(s){return wn.stringify(wn.fastLerp(s,this.option.parsedVisual),"rgba")},category:Ml,piecewise:function(s,a){var l=zh.call(this,a);return null==l&&(l=wn.stringify(wn.fastLerp(s,this.option.parsedVisual),"rgba")),l},fixed:rd}},colorHue:Bh(function(s,a){return wn.modifyHSL(s,a)}),colorSaturation:Bh(function(s,a){return wn.modifyHSL(s,null,a)}),colorLightness:Bh(function(s,a){return wn.modifyHSL(s,null,null,a)}),colorAlpha:Bh(function(s,a){return wn.modifyAlpha(s,a)}),decal:{applyVisual:Vh("decal"),_normalizedToVisual:{linear:null,category:Ml,piecewise:null,fixed:null}},opacity:{applyVisual:Vh("opacity"),_normalizedToVisual:Ip([0,1])},liftZ:{applyVisual:Vh("liftZ"),_normalizedToVisual:{linear:rd,category:rd,piecewise:rd,fixed:rd}},symbol:{applyVisual:function(s,a,l){l("symbol",this.mapValueToVisual(s))},_normalizedToVisual:{linear:J0,category:Ml,piecewise:function(s,a){var l=zh.call(this,a);return null==l&&(l=J0.call(this,s)),l},fixed:rd}},symbolSize:{applyVisual:Vh("symbolSize"),_normalizedToVisual:Ip([0,1])}},c}();function q0(c,s){var a=c.visual,l=[];b.isObject(a)?Fh(a,function(h){l.push(h)}):null!=a&&l.push(a),!s&&1===l.length&&!{color:1,symbol:1}.hasOwnProperty(c.type)&&(l[1]=l[0]),KS(c,l)}function Bh(c){return{applyVisual:function(s,a,l){var u=this.mapValueToVisual(s);l("color",c(a("color"),u))},_normalizedToVisual:Ip([0,1])}}function J0(c){var s=this.option.visual;return s[Math.round((0,ft.NU)(c,[0,1],[0,s.length-1],!0))]||{}}function Vh(c){return function(s,a,l){l(c,this.mapValueToVisual(s))}}function Ml(c){var s=this.option.visual;return s[this.option.loop&&-1!==c?c%s.length:c]}function rd(){return this.option.visual[0]}function Ip(c){return{linear:function(s){return(0,ft.NU)(s,c,this.option.visual,!0)},category:Ml,piecewise:function(s,a){var l=zh.call(this,a);return null==l&&(l=(0,ft.NU)(s,c,this.option.visual,!0)),l},fixed:rd}}function zh(c){var s=this.option,a=s.pieceList;if(s.hasSpecialVisual){var u=a[_m.findPieceIndex(c,a)];if(u&&u.visual)return u.visual[this.type]}}function KS(c,s){return c.visual=s,"color"===c.type&&(c.parsedVisual=b.map(s,function(a){return wn.parse(a)||[0,0,0,1]})),s}var eb={linear:function(c){return(0,ft.NU)(c,this.option.dataExtent,[0,1],!0)},piecewise:function(c){var s=this.option.pieceList,a=_m.findPieceIndex(c,s,!0);if(null!=a)return(0,ft.NU)(a,[0,s.length-1],[0,1],!0)},category:function(c){return(this.option.categories?this.option.categoryMap[c]:c)??-1},fixed:b.noop};function id(c,s,a){return c?s<=a:s<a}const sa=_m;var ym=(0,An.Yf)();const DR={seriesType:"treemap",reset:function(c){var a=c.getData().tree.root;a.isRemoved()||qS(a,{},c.getViewRoot().getAncestors(),c)}};function qS(c,s,a,l){var u=c.getModel(),h=c.getLayout(),p=c.hostTree.data;if(h&&!h.invisible&&h.isInView){var M,v=u.getModel("itemStyle"),m=function JS(c,s,a){var l=(0,b.extend)({},s),u=a.designatedVisualItemStyle;return(0,b.each)(["color","colorAlpha","colorSaturation"],function(h){u[h]=s[h];var p=c.get(h);u[h]=null,null!=p&&(l[h]=p)}),l}(v,s,l),y=p.ensureUniqueItemVisual(c.dataIndex,"style"),x=v.get("borderColor"),C=v.get("borderColorSaturation");null!=C&&(x=function MR(c,s){return null!=s?(0,wn.modifyHSL)(s,null,null,c):null}(C,M=ad(m))),y.stroke=x;var E=c.viewChildren;if(E&&E.length){var R=function TR(c,s,a,l,u,h){if(h&&h.length){var p=nb(s,"color")||null!=u.color&&"none"!==u.color&&(nb(s,"colorAlpha")||nb(s,"colorSaturation"));if(p){var v=s.get("visualMin"),m=s.get("visualMax"),y=a.dataExtent.slice();null!=v&&v<y[0]&&(y[0]=v),null!=m&&m>y[1]&&(y[1]=m);var x=s.get("colorMappingBy"),C={type:p.name,dataExtent:y,visual:p.range};"color"!==C.type||"index"!==x&&"id"!==x?C.mappingMethod="linear":(C.mappingMethod="category",C.loop=!0);var M=new sa(C);return ym(M).drColorMappingBy=x,M}}}(0,u,h,0,m,E);(0,b.each)(E,function(F,U){if(F.depth>=a.length||F===a[F.depth]){var ue=function rb(c,s,a,l,u,h){var p=(0,b.extend)({},s);if(u){var v=u.type,m="color"===v&&ym(u).drColorMappingBy,y="index"===m?l:"id"===m?h.mapIdToIndex(a.getId()):a.getValue(c.get("visualDimension"));p[v]=u.mapValueToVisual(y)}return p}(u,m,F,U,R,l);qS(F,ue,a,l)}})}else M=ad(m),y.fill=M}}function ad(c){var s=tb(c,"color");if(s){var a=tb(c,"colorAlpha"),l=tb(c,"colorSaturation");return l&&(s=(0,wn.modifyHSL)(s,null,null,l)),a&&(s=(0,wn.modifyAlpha)(s,a)),s}}function tb(c,s){var a=c[s];if(null!=a&&"none"!==a)return a}function nb(c,s){var a=c.get(s);return(0,b.isArray)(a)&&a.length?{name:s,range:a}:null}var Pp=Math.max,Rp=Math.min,eD=b.retrieve,bm=b.each,ER=["itemStyle","borderWidth"],AR=["itemStyle","gapWidth"],od=["upperLabel","show"],IR=["upperLabel","height"];const Hh={seriesType:"treemap",reset:function(c,s,a,l){var u=a.getWidth(),h=a.getHeight(),p=c.option,v=Oe.ME(c.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()}),m=p.size||[],y=(0,ft.GM)(eD(v.width,m[0]),u),x=(0,ft.GM)(eD(v.height,m[1]),h),C=l&&l.type,E=Dp(l,["treemapZoomToNode","treemapRootToNode"],c),R="treemapRender"===C||"treemapMove"===C?l.rootRect:null,F=c.getViewRoot(),U=kS(F);if("treemapMove"!==C){var ue="treemapZoomToNode"===C?function sd(c,s,a,l,u){var h=(s||{}).node,p=[l,u];if(!h||h===a)return p;for(var v,m=l*u,y=m*c.option.zoomToNodeRatio;v=h.parentNode;){for(var x=0,C=v.children,M=0,E=C.length;M<E;M++)x+=C[M].getValue();var R=h.getValue();if(0===R)return p;y*=x/R;var F=v.getModel(),U=F.get(ER);(y+=4*U*U+(3*U+Math.max(U,nD(F)))*Math.pow(y,.5))>ft.YM&&(y=ft.YM),h=v}y<m&&(y=m);var me=Math.pow(y/m,.5);return[l*me,u*me]}(c,E,F,y,x):R?[R.width,R.height]:[y,x],me=p.sort;me&&"asc"!==me&&"desc"!==me&&(me="desc");var ve={squareRatio:p.squareRatio,sort:me,leafDepth:p.leafDepth};F.hostTree.clearLayouts();var Me={x:0,y:0,width:ue[0],height:ue[1],area:ue[0]*ue[1]};F.setLayout(Me),Or(F,ve,!1,0),Me=F.getLayout(),bm(U,function(Pe,Ne){var He=(U[Ne+1]||F).getValue();Pe.setLayout(b.extend({dataExtent:[He,He],borderWidth:0,upperHeight:0},Me))})}var Ae=c.getData().tree.root;Ae.setLayout(function LR(c,s,a){if(s)return{x:s.x,y:s.y};var l={x:0,y:0};if(!a)return l;var u=a.node,h=u.getLayout();if(!h)return l;for(var p=[h.width/2,h.height/2],v=u;v;){var m=v.getLayout();p[0]+=m.x,p[1]+=m.y,v=v.parentNode}return{x:c.width/2-p[0],y:c.height/2-p[1]}}(v,R,E),!0),c.setLayoutInfo(v),xm(Ae,new Pa.Z(-v.x,-v.y,u,h),U,F,0)}};function Or(c,s,a,l){var u,h;if(!c.isRemoved()){var p=c.getLayout();u=p.width,h=p.height;var v=c.getModel(),m=v.get(ER),y=v.get(AR)/2,x=nD(v),C=Math.max(m,x),M=m-y,E=C-y;c.setLayout({borderWidth:m,upperHeight:C,upperLabelHeight:x},!0);var R=(u=Pp(u-2*M,0))*(h=Pp(h-M-E,0)),F=function PR(c,s,a,l,u,h){var p=c.children||[],v=l.sort;"asc"!==v&&"desc"!==v&&(v=null);var m=null!=l.leafDepth&&l.leafDepth<=h;if(u&&!m)return c.viewChildren=[];p=b.filter(p,function(E){return!E.isRemoved()}),function Lp(c,s){s&&c.sort(function(a,l){var u="asc"===s?a.getValue()-l.getValue():l.getValue()-a.getValue();return 0===u?"asc"===s?a.dataIndex-l.dataIndex:l.dataIndex-a.dataIndex:u})}(p,v);var y=function Gc(c,s,a){for(var l=0,u=0,h=s.length;u<h;u++)l+=s[u].getValue();var v,p=c.get("visualDimension");return s&&s.length?"value"===p&&a?(v=[s[s.length-1].getValue(),s[0].getValue()],"asc"===a&&v.reverse()):(v=[1/0,-1/0],bm(s,function(m){var y=m.getValue(p);y<v[0]&&(v[0]=y),y>v[1]&&(v[1]=y)})):v=[NaN,NaN],{sum:l,dataExtent:v}}(s,p,v);if(0===y.sum)return c.viewChildren=[];if(y.sum=function V5(c,s,a,l,u){if(!l)return a;for(var h=c.get("visibleMin"),p=u.length,v=p,m=p-1;m>=0;m--){var y=u["asc"===l?p-m-1:m].getValue();y/a*s<h&&(v=m,a-=y)}return u.splice("asc"===l?0:v,p-v),a}(s,a,y.sum,v,p),0===y.sum)return c.viewChildren=[];for(var x=0,C=p.length;x<C;x++){var M=p[x].getValue()/y.sum*a;p[x].setLayout({area:M})}return m&&(p.length&&c.setLayout({isLeafRoot:!0},!0),p.length=0),c.viewChildren=p,c.setLayout({dataExtent:y.dataExtent},!0),p}(c,v,R,s,a,l);if(F.length){var U={x:M,y:E,width:u,height:h},ue=Rp(u,h),me=1/0,ve=[];ve.area=0;for(var Me=0,Ae=F.length;Me<Ae;){var Pe=F[Me];ve.push(Pe),ve.area+=Pe.getLayout().area;var Ne=RR(ve,ue,s.squareRatio);Ne<=me?(Me++,me=Ne):(ve.area-=ve.pop().getLayout().area,tD(ve,ue,U,y,!1),ue=Rp(U.width,U.height),ve.length=ve.area=0,me=1/0)}if(ve.length&&tD(ve,ue,U,y,!0),!a){var He=v.get("childrenVisibleMin");null!=He&&R<He&&(a=!0)}for(Me=0,Ae=F.length;Me<Ae;Me++)Or(F[Me],s,a,l+1)}}}function RR(c,s,a){for(var l=0,u=1/0,h=0,p=void 0,v=c.length;h<v;h++)(p=c[h].getLayout().area)&&(p<u&&(u=p),p>l&&(l=p));var m=c.area*c.area,y=s*s*a;return m?Pp(y*l/m,m/(y*u)):1/0}function tD(c,s,a,l,u){var h=s===a.width?0:1,p=1-h,v=["x","y"],m=["width","height"],y=a[v[h]],x=s?c.area/s:0;(u||x>a[m[p]])&&(x=a[m[p]]);for(var C=0,M=c.length;C<M;C++){var E=c[C],R={},F=x?E.getLayout().area/x:0,U=R[m[p]]=Pp(x-2*l,0),ue=a[v[h]]+a[m[h]]-y,me=C===M-1||ue<F?ue:F,ve=R[m[h]]=Pp(me-2*l,0);R[v[p]]=a[v[p]]+Rp(l,U/2),R[v[h]]=y+Rp(l,ve/2),y+=me,E.setLayout(R,!0)}a[v[p]]+=x,a[m[p]]-=x}function xm(c,s,a,l,u){var h=c.getLayout(),p=a[u],v=p&&p===c;if(!(p&&!v||u===a.length&&c!==l)){c.setLayout({isInView:!0,invisible:!v&&!s.intersect(h),isAboveViewRoot:v},!0);var m=new Pa.Z(s.x-h.x,s.y-h.y,s.width,s.height);bm(c.viewChildren||[],function(y){xm(y,m,a,l,u+1)})}}function nD(c){return c.get(od)?c.get(IR):0}function ib(c){var s=c.findComponents({mainType:"legend"});!s||!s.length||c.eachSeriesByType("graph",function(a){var l=a.getCategoriesData(),h=a.getGraph().data,p=l.mapArray(l.getName);h.filterSelf(function(v){var y=h.getItemModel(v).getShallow("category");if(null!=y){(0,b.isNumber)(y)&&(y=p[y]);for(var x=0;x<s.length;x++)if(!s[x].isSelected(y))return!1}return!0})})}function z5(c){var s={};c.eachSeriesByType("graph",function(a){var l=a.getCategoriesData(),u=a.getData(),h={};l.each(function(p){var v=l.getName(p);h["ec-"+v]=p;var m=l.getItemModel(p),y=m.getModel("itemStyle").getItemStyle();y.fill||(y.fill=a.getColorFromPalette(v,s)),l.setItemVisual(p,"style",y);for(var x=["symbol","symbolSize","symbolKeepAspect"],C=0;C<x.length;C++){var M=m.getShallow(x[C],!0);null!=M&&l.setItemVisual(p,x[C],M)}}),l.count()&&u.each(function(p){var m=u.getItemModel(p).getShallow("category");if(null!=m){(0,b.isString)(m)&&(m=h["ec-"+m]);var y=l.getItemVisual(m,"style"),x=u.ensureUniqueItemVisual(p,"style");(0,b.extend)(x,y);for(var C=["symbol","symbolSize","symbolKeepAspect"],M=0;M<C.length;M++)u.setItemVisual(p,C[M],l.getItemVisual(m,C[M]))}})})}function ab(c){return c instanceof Array||(c=[c,c]),c}function ob(c){c.eachSeriesByType("graph",function(s){var a=s.getGraph(),l=s.getEdgeData(),u=ab(s.get("edgeSymbol")),h=ab(s.get("edgeSymbolSize"));l.setVisual("fromSymbol",u&&u[0]),l.setVisual("toSymbol",u&&u[1]),l.setVisual("fromSymbolSize",h&&h[0]),l.setVisual("toSymbolSize",h&&h[1]),l.setVisual("style",s.getModel("lineStyle").getLineStyle()),l.each(function(p){var v=l.getItemModel(p),m=a.getEdgeByIndex(p),y=ab(v.getShallow("symbol",!0)),x=ab(v.getShallow("symbolSize",!0)),C=v.getModel("lineStyle").getLineStyle(),M=l.ensureUniqueItemVisual(p,"style");switch((0,b.extend)(M,C),M.stroke){case"source":var E=m.node1.getVisual("style");M.stroke=E&&E.fill;break;case"target":E=m.node2.getVisual("style"),M.stroke=E&&E.fill}y[0]&&m.setVisual("fromSymbol",y[0]),y[1]&&m.setVisual("toSymbol",y[1]),x[0]&&m.setVisual("fromSymbolSize",x[0]),x[1]&&m.setVisual("toSymbolSize",x[1])})})}var sb=function(c){return c.get("autoCurveness")||null},kR=function(c,s){var a=sb(c),l=20,u=[];if(b.isNumber(a))l=a;else if(b.isArray(a))return void(c.__curvenessList=a);s>l&&(l=s);var h=l%2?l+2:l+3;u=[];for(var p=0;p<h;p++)u.push((p%2?p+1:p)/10*(p%2?-1:1));c.__curvenessList=u},wm=function(c,s,a){var l=[c.id,c.dataIndex].join("."),u=[s.id,s.dataIndex].join(".");return[a.uid,l,u].join("--\x3e")},NR=function(c){var s=c.split("--\x3e");return[s[0],s[2],s[1]].join("--\x3e")},Op=function(c,s){var a=s.__edgeMap;return a[c]?a[c].length:0};function Cm(c,s,a,l){var u=sb(s),h=b.isArray(u);if(!u)return null;var p=function(c,s){var a=wm(c.node1,c.node2,s);return s.__edgeMap[a]}(c,s);if(!p)return null;for(var v=-1,m=0;m<p.length;m++)if(p[m]===a){v=m;break}var y=function(c,s){return Op(wm(c.node1,c.node2,s),s)+Op(wm(c.node2,c.node1,s),s)}(c,s);kR(s,y),c.lineStyle=c.lineStyle||{};var x=wm(c.node1,c.node2,s),C=s.__curvenessList,M=h||y%2?0:1;if(p.isForward)return C[M+v];var E=NR(x),R=Op(E,s),F=C[v+R+M];return l?h?u&&0===u[0]?(R+M)%2?F:-F:((R%2?0:1)+M)%2?F:-F:(R+M)%2?F:-F:C[v+R+M]}function Sm(c){var s=c.coordinateSystem;if(!s||"view"===s.type){var a=c.getGraph();a.eachNode(function(l){var u=l.getModel();l.setLayout([+u.get("x"),+u.get("y")])}),lb(a,c)}}function lb(c,s){c.eachEdge(function(a,l){var u=b.retrieve3(a.getModel().get(["lineStyle","curveness"]),-Cm(a,s,l,!0),0),h=lr.clone(a.node1.getLayout()),p=lr.clone(a.node2.getLayout()),v=[h,p];+u&&v.push([(h[0]+p[0])/2-(h[1]-p[1])*u,(h[1]+p[1])/2-(p[0]-h[0])*u]),a.setLayout(v)})}function cb(c,s){c.eachSeriesByType("graph",function(a){var l=a.get("layout"),u=a.coordinateSystem;if(u&&"view"!==u.type){var h=a.getData(),p=[];(0,b.each)(u.dimensions,function(M){p=p.concat(h.mapDimensionsAll(M))});for(var v=0;v<h.count();v++){for(var m=[],y=!1,x=0;x<p.length;x++){var C=h.get(p[x],v);isNaN(C)||(y=!0),m.push(C)}h.setItemLayout(v,y?u.dataToPoint(m):[NaN,NaN])}lb(h.graph,a)}else(!l||"none"===l)&&Sm(a)})}function ks(c){var s=c.coordinateSystem;if("view"!==s.type)return 1;var a=c.option.nodeScaleRatio,l=s.scaleX;return((s.getZoom()-1)*a+1)/l}function kp(c){var s=c.getVisual("symbolSize");return s instanceof Array&&(s=(s[0]+s[1])/2),+s}var sD=Math.PI,ub=[];function Dm(c,s,a,l){var u=c.coordinateSystem;if(!u||"view"===u.type){var h=u.getBoundingRect(),p=c.getData(),v=p.graph,m=h.width/2+h.x,y=h.height/2+h.y,x=Math.min(h.width,h.height)/2,C=p.count();if(p.setLayout({cx:m,cy:y}),C){if(a){var M=u.pointToData(l),F=[M[0]-m,M[1]-y];lr.normalize(F,F),lr.scale(F,F,x),a.setLayout([m+F[0],y+F[1]],!0),lD(a,c.get(["circular","rotateLabel"]),m,y)}BR[s](c,v,p,x,m,y,C),v.eachEdge(function(ue,me){var Pe,ve=b.retrieve3(ue.getModel().get(["lineStyle","curveness"]),Cm(ue,c,me),0),Me=lr.clone(ue.node1.getLayout()),Ae=lr.clone(ue.node2.getLayout());+ve&&(Pe=[m*(ve*=3)+(Me[0]+Ae[0])/2*(1-ve),y*ve+(Me[1]+Ae[1])/2*(1-ve)]),ue.setLayout([Me,Ae,Pe])})}}}var BR={value:function(c,s,a,l,u,h,p){var v=0,m=a.getSum("value"),y=2*Math.PI/(m||p);s.eachNode(function(x){var C=x.getValue("value"),M=y*(m?C:1)/2;v+=M,x.setLayout([l*Math.cos(v)+u,l*Math.sin(v)+h]),v+=M})},symbolSize:function(c,s,a,l,u,h,p){var v=0;ub.length=p;var m=ks(c);s.eachNode(function(C){var M=kp(C);isNaN(M)&&(M=2),M<0&&(M=0),M*=m;var E=Math.asin(M/2/l);isNaN(E)&&(E=sD/2),ub[C.dataIndex]=E,v+=2*E});var y=(2*sD-v)/p/2,x=0;s.eachNode(function(C){var M=y+ub[C.dataIndex];x+=M,(!C.getLayout()||!C.getLayout().fixed)&&C.setLayout([l*Math.cos(x)+u,l*Math.sin(x)+h]),x+=M})}};function lD(c,s,a,l){var u=c.getGraphicEl();if(u){var p=c.getModel().get(["label","rotate"])||0,v=u.getSymbolPath();if(s){var m=c.getLayout(),y=Math.atan2(m[1]-l,m[0]-a);y<0&&(y=2*Math.PI+y);var x=m[0]<a;x&&(y-=Math.PI);var C=x?"left":"right";v.setTextConfig({rotation:-y,position:C,origin:"center"});var M=v.ensureState("emphasis");b.extend(M.textConfig||(M.textConfig={}),{position:C})}else v.setTextConfig({rotation:p*=Math.PI/180})}}function VR(c){c.eachSeriesByType("graph",function(s){"circular"===s.get("layout")&&Dm(s,"symbolSize")})}var Uh=lr.scaleAndAdd;function zR(c){c.eachSeriesByType("graph",function(s){var a=s.coordinateSystem;if(!a||"view"===a.type)if("force"===s.get("layout")){var l=s.preservedPoints||{},u=s.getGraph(),h=u.data,p=u.edgeData,v=s.getModel("force"),m=v.get("initLayout");s.preservedPoints?h.each(function(ve){var Me=h.getId(ve);h.setItemLayout(ve,l[Me]||[NaN,NaN])}):m&&"none"!==m?"circular"===m&&Dm(s,"value"):Sm(s);var y=h.getDataExtent("value"),x=p.getDataExtent("value"),C=v.get("repulsion"),M=v.get("edgeLength"),E=b.isArray(C)?C:[C,C],R=b.isArray(M)?M:[M,M];R=[R[1],R[0]];var F=h.mapArray("value",function(ve,Me){var Ae=h.getItemLayout(Me),Pe=(0,ft.NU)(ve,y,E);return isNaN(Pe)&&(Pe=(E[0]+E[1])/2),{w:Pe,rep:Pe,fixed:h.getItemModel(Me).get("fixed"),p:!Ae||isNaN(Ae[0])||isNaN(Ae[1])?null:Ae}}),U=p.mapArray("value",function(ve,Me){var Ae=u.getEdgeByIndex(Me),Pe=(0,ft.NU)(ve,x,R);isNaN(Pe)&&(Pe=(R[0]+R[1])/2);var Ne=Ae.getModel(),He=b.retrieve3(Ae.getModel().get(["lineStyle","curveness"]),-Cm(Ae,s,Me,!0),0);return{n1:F[Ae.node1.dataIndex],n2:F[Ae.node2.dataIndex],d:Pe,curveness:He,ignoreForceLayout:Ne.get("ignoreForceLayout")}}),ue=a.getBoundingRect(),me=function db(c,s,a){for(var l=c,u=s,h=a.rect,p=h.width,v=h.height,m=[h.x+p/2,h.y+v/2],y=a.gravity??.1,x=0;x<l.length;x++){var C=l[x];C.p||(C.p=lr.create(p*(Math.random()-.5)+m[0],v*(Math.random()-.5)+m[1])),C.pp=lr.clone(C.p),C.edges=null}var R,F,M=a.friction??.6,E=M;return{warmUp:function(){E=.8*M},setFixed:function(U){l[U].fixed=!0},setUnfixed:function(U){l[U].fixed=!1},beforeStep:function(U){R=U},afterStep:function(U){F=U},step:function(U){R&&R(l,u);for(var ue=[],me=l.length,ve=0;ve<u.length;ve++){var Me=u[ve];if(!Me.ignoreForceLayout){lr.sub(ue,(Pe=Me.n2).p,(Ae=Me.n1).p);var Ne=lr.len(ue)-Me.d,He=Pe.w/(Ae.w+Pe.w);isNaN(He)&&(He=0),lr.normalize(ue,ue),!Ae.fixed&&Uh(Ae.p,Ae.p,ue,He*Ne*E),!Pe.fixed&&Uh(Pe.p,Pe.p,ue,-(1-He)*Ne*E)}}for(ve=0;ve<me;ve++)(Ye=l[ve]).fixed||(lr.sub(ue,m,Ye.p),Uh(Ye.p,Ye.p,ue,y*E));for(ve=0;ve<me;ve++)for(var Ae=l[ve],Qe=ve+1;Qe<me;Qe++){var Pe;lr.sub(ue,(Pe=l[Qe]).p,Ae.p),0===(Ne=lr.len(ue))&&(lr.set(ue,Math.random()-.5,Math.random()-.5),Ne=1);var it=(Ae.rep+Pe.rep)/Ne/Ne;!Ae.fixed&&Uh(Ae.pp,Ae.pp,ue,it),!Pe.fixed&&Uh(Pe.pp,Pe.pp,ue,-it)}var ct=[];for(ve=0;ve<me;ve++){var Ye;(Ye=l[ve]).fixed||(lr.sub(ct,Ye.p,Ye.pp),Uh(Ye.p,Ye.p,ct,E),lr.copy(Ye.pp,Ye.p))}var ht=(E*=.992)<.01;F&&F(l,u,ht),U&&U(ht)}}}(F,U,{rect:ue,gravity:v.get("gravity"),friction:v.get("friction")});me.beforeStep(function(ve,Me){for(var Ae=0,Pe=ve.length;Ae<Pe;Ae++)ve[Ae].fixed&&lr.copy(ve[Ae].p,u.getNodeByIndex(Ae).getLayout())}),me.afterStep(function(ve,Me,Ae){for(var Pe=0,Ne=ve.length;Pe<Ne;Pe++)ve[Pe].fixed||u.getNodeByIndex(Pe).setLayout(ve[Pe].p),l[h.getId(Pe)]=ve[Pe].p;for(Pe=0,Ne=Me.length;Pe<Ne;Pe++){var He=Me[Pe],Ye=u.getEdgeByIndex(Pe),Qe=He.n1.p,it=He.n2.p,ct=Ye.getLayout();(ct=ct?ct.slice():[])[0]=ct[0]||[],ct[1]=ct[1]||[],lr.copy(ct[0],Qe),lr.copy(ct[1],it),+He.curveness&&(ct[2]=[(Qe[0]+it[0])/2-(Qe[1]-it[1])*He.curveness,(Qe[1]+it[1])/2-(it[0]-Qe[0])*He.curveness]),Ye.setLayout(ct)}}),s.forceLayout=me,s.preservedPoints=l,me.step()}else s.forceLayout=null})}function UR(c,s){var a=[];return c.eachSeriesByType("graph",function(l){var u=l.get("coordinateSystem");if(!u||"view"===u){var h=l.getData(),p=h.mapArray(function(U){var ue=h.getItemModel(U);return[+ue.get("x"),+ue.get("y")]}),v=[],m=[];hm.zk(p,v,m),m[0]-v[0]==0&&(m[0]+=1,v[0]-=1),m[1]-v[1]==0&&(m[1]+=1,v[1]-=1);var y=(m[0]-v[0])/(m[1]-v[1]),x=function HR(c,s,a){var l=(0,b.extend)(c.getBoxLayoutParams(),{aspect:a});return(0,Oe.ME)(l,{width:s.getWidth(),height:s.getHeight()})}(l,s,y);isNaN(y)&&(v=[x.x,x.y],m=[x.x+x.width,x.y+x.height]);var C=m[0]-v[0],M=m[1]-v[1],E=x.width,R=x.height,F=l.coordinateSystem=new ed;F.zoomLimit=l.get("scaleLimit"),F.setBoundingRect(v[0],v[1],C,M),F.setViewRect(x.x,x.y,E,R),F.setCenter(l.get("center"),s),F.setZoom(l.get("zoom")),a.push(F)}}),a}var hb=no.Z.prototype,fb=Sp.Z.prototype,cD=function c(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1};function Np(c){return isNaN(+c.cpx1)||isNaN(+c.cpy1)}!function(c){(0,Rt.ZT)(function s(){return null!==c&&c.apply(this,arguments)||this},c)}(cD);const pb=function(c){function s(a){var l=c.call(this,a)||this;return l.type="ec-line",l}return(0,Rt.ZT)(s,c),s.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},s.prototype.getDefaultShape=function(){return new cD},s.prototype.buildPath=function(a,l){Np(l)?hb.buildPath.call(this,a,l):fb.buildPath.call(this,a,l)},s.prototype.pointAt=function(a){return Np(this.shape)?hb.pointAt.call(this,a):fb.pointAt.call(this,a)},s.prototype.tangentAt=function(a){var l=this.shape,u=Np(l)?[l.x2-l.x1,l.y2-l.y1]:fb.tangentAt.call(this,a);return lr.normalize(u,u)},s}(ye.ZP);var ho=["fromSymbol","toSymbol"];function Gh(c){return"_"+c+"Type"}function gb(c,s,a){var l=s.getItemVisual(a,c);if(!l||"none"===l)return l;var u=s.getItemVisual(a,c+"Size"),h=s.getItemVisual(a,c+"Rotate"),p=s.getItemVisual(a,c+"Offset"),v=s.getItemVisual(a,c+"KeepAspect"),m=dr.zp(u);return l+m+dr.Cq(p||0,m)+(h||"")+(v||"")}function dD(c,s,a){var l=s.getItemVisual(a,c);if(l&&"none"!==l){var u=s.getItemVisual(a,c+"Size"),h=s.getItemVisual(a,c+"Rotate"),p=s.getItemVisual(a,c+"Offset"),v=s.getItemVisual(a,c+"KeepAspect"),m=dr.zp(u),y=dr.Cq(p||0,m),x=dr.th(l,-m[0]/2+y[0],-m[1]/2+y[1],m[0],m[1],null,v);return x.__specifiedRotation=null==h||isNaN(h)?void 0:+h*Math.PI/180||0,x.name=c,x}}function Mm(c,s){c.x1=s[0][0],c.y1=s[0][1],c.x2=s[1][0],c.y2=s[1][1],c.percent=1;var a=s[2];a?(c.cpx1=a[0],c.cpy1=a[1]):(c.cpx1=NaN,c.cpy1=NaN)}const Tm=function(c){function s(a,l,u){var h=c.call(this)||this;return h._createLine(a,l,u),h}return(0,Rt.ZT)(s,c),s.prototype._createLine=function(a,l,u){var h=a.hostModel,v=function GR(c){var s=new pb({name:"line",subPixelOptimize:!0});return Mm(s.shape,c),s}(a.getItemLayout(l));v.shape.percent=0,on.KZ(v,{shape:{percent:1}},h,l),this.add(v),(0,b.each)(ho,function(m){var y=dD(m,a,l);this.add(y),this[Gh(m)]=gb(m,a,l)},this),this._updateCommonStl(a,l,u)},s.prototype.updateData=function(a,l,u){var h=a.hostModel,p=this.childOfName("line"),v=a.getItemLayout(l),m={shape:{}};Mm(m.shape,v),on.D(p,m,h,l),(0,b.each)(ho,function(y){var x=gb(y,a,l),C=Gh(y);if(this[C]!==x){this.remove(this.childOfName(y));var M=dD(y,a,l);this.add(M)}this[C]=x},this),this._updateCommonStl(a,l,u)},s.prototype.getLinePath=function(){return this.childAt(0)},s.prototype._updateCommonStl=function(a,l,u){var h=a.hostModel,p=this.childOfName("line"),v=u&&u.emphasisLineStyle,m=u&&u.blurLineStyle,y=u&&u.selectLineStyle,x=u&&u.labelStatesModels,C=u&&u.emphasisDisabled,M=u&&u.focus,E=u&&u.blurScope;if(!u||a.hasItemOption){var R=a.getItemModel(l),F=R.getModel("emphasis");v=F.getModel("lineStyle").getLineStyle(),m=R.getModel(["blur","lineStyle"]).getLineStyle(),y=R.getModel(["select","lineStyle"]).getLineStyle(),C=F.get("disabled"),M=F.get("focus"),E=F.get("blurScope"),x=(0,Bn.k3)(R)}var U=a.getItemVisual(l,"style"),ue=U.stroke;p.useStyle(U),p.style.fill=null,p.style.strokeNoScale=!0,p.ensureState("emphasis").style=v,p.ensureState("blur").style=m,p.ensureState("select").style=y,(0,b.each)(ho,function(Pe){var Ne=this.childOfName(Pe);if(Ne){Ne.setColor(ue),Ne.style.opacity=U.opacity;for(var He=0;He<bn.L1.length;He++){var Ye=bn.L1[He],Qe=p.getState(Ye);if(Qe){var it=Qe.style||{},ct=Ne.ensureState(Ye),ht=ct.style||(ct.style={});null!=it.stroke&&(ht[Ne.__isEmptyBrush?"stroke":"fill"]=it.stroke),null!=it.opacity&&(ht.opacity=it.opacity)}}Ne.markRedraw()}},this);var me=h.getRawValue(l);(0,Bn.ni)(this,x,{labelDataIndex:l,labelFetcher:{getFormattedLabel:function(Pe,Ne){return h.getFormattedLabel(Pe,Ne,a.dataType)}},inheritColor:ue||"#000",defaultOpacity:U.opacity,defaultText:(null==me?a.getName(l):isFinite(me)?(0,ft.NM)(me):me)+""});var ve=this.getTextContent();if(ve){var Me=x.normal;ve.__align=ve.style.align,ve.__verticalAlign=ve.style.verticalAlign,ve.__position=Me.get("position")||"middle";var Ae=Me.get("distance");(0,b.isArray)(Ae)||(Ae=[Ae,Ae]),ve.__labelDistance=Ae}this.setTextConfig({position:null,local:!0,inside:!1}),(0,bn.k5)(this,M,E,C)},s.prototype.highlight=function(){(0,bn.fD)(this)},s.prototype.downplay=function(){(0,bn.Mh)(this)},s.prototype.updateLayout=function(a,l){this.setLinePoints(a.getItemLayout(l))},s.prototype.setLinePoints=function(a){var l=this.childOfName("line");Mm(l.shape,a),l.dirty()},s.prototype.beforeUpdate=function(){var a=this,l=a.childOfName("fromSymbol"),u=a.childOfName("toSymbol"),h=a.getTextContent();if(l||u||h&&!h.ignore){for(var p=1,v=this.parent;v;)v.scaleX&&(p/=v.scaleX),v=v.parent;var m=a.childOfName("line");if(this.__dirty||m.__dirty){var y=m.shape.percent,x=m.pointAt(0),C=m.pointAt(y),M=lr.sub([],C,x);if(lr.normalize(M,M),l&&(l.setPosition(x),E(l,0),l.scaleX=l.scaleY=p*y,l.markRedraw()),u&&(u.setPosition(C),E(u,1),u.scaleX=u.scaleY=p*y,u.markRedraw()),h&&!h.ignore){h.x=h.y=0,h.originX=h.originY=0;var R=void 0,F=void 0,U=h.__labelDistance,ue=U[0]*p,me=U[1]*p,ve=y/2,Me=m.tangentAt(ve),Ae=[Me[1],-Me[0]],Pe=m.pointAt(ve);Ae[1]>0&&(Ae[0]=-Ae[0],Ae[1]=-Ae[1]);var Ne=Me[0]<0?-1:1;if("start"!==h.__position&&"end"!==h.__position){var He=-Math.atan2(Me[1],Me[0]);C[0]<x[0]&&(He=Math.PI+He),h.rotation=He}var Ye=void 0;switch(h.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":Ye=-me,F="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":Ye=me,F="top";break;default:Ye=0,F="middle"}switch(h.__position){case"end":h.x=M[0]*ue+C[0],h.y=M[1]*me+C[1],R=M[0]>.8?"left":M[0]<-.8?"right":"center",F=M[1]>.8?"top":M[1]<-.8?"bottom":"middle";break;case"start":h.x=-M[0]*ue+x[0],h.y=-M[1]*me+x[1],R=M[0]>.8?"right":M[0]<-.8?"left":"center",F=M[1]>.8?"bottom":M[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":h.x=ue*Ne+x[0],h.y=x[1]+Ye,R=Me[0]<0?"right":"left",h.originX=-ue*Ne,h.originY=-Ye;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":h.x=Pe[0],h.y=Pe[1]+Ye,R="center",h.originY=-Ye;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":h.x=-ue*Ne+C[0],h.y=C[1]+Ye,R=Me[0]>=0?"right":"left",h.originX=ue*Ne,h.originY=-Ye}h.scaleX=h.scaleY=p,h.setStyle({verticalAlign:h.__verticalAlign||F,align:h.__align||R})}}}function E(Qe,it){var ct=Qe.__specifiedRotation;if(null==ct){var ht=m.tangentAt(it);Qe.attr("rotation",(1===it?-1:1)*Math.PI/2-Math.atan2(ht[1],ht[0]))}else Qe.attr("rotation",ct)}},s}(Vn.Z);function fD(c){var s=c.hostModel,a=s.getModel("emphasis");return{lineStyle:s.getModel("lineStyle").getLineStyle(),emphasisLineStyle:a.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:s.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:s.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:a.get("disabled"),blurScope:a.get("blurScope"),focus:a.get("focus"),labelStatesModels:(0,Bn.k3)(s)}}function pD(c){return isNaN(c[0])||isNaN(c[1])}function Em(c){return c&&!pD(c[0])&&!pD(c[1])}const vb=function(){function c(s){this.group=new Vn.Z,this._LineCtor=s||Tm}return c.prototype.updateData=function(s){var a=this;this._progressiveEls=null;var l=this,u=l.group,h=l._lineData;l._lineData=s,h||u.removeAll();var p=fD(s);s.diff(h).add(function(v){a._doAdd(s,v,p)}).update(function(v,m){a._doUpdate(h,s,m,v,p)}).remove(function(v){u.remove(h.getItemGraphicEl(v))}).execute()},c.prototype.updateLayout=function(){var s=this._lineData;!s||s.eachItemGraphicEl(function(a,l){a.updateLayout(s,l)},this)},c.prototype.incrementalPrepareUpdate=function(s){this._seriesScope=fD(s),this._lineData=null,this.group.removeAll()},c.prototype.incrementalUpdate=function(s,a){function l(v){!v.isGroup&&!function hD(c){return c.animators&&c.animators.length>0}(v)&&(v.incremental=!0,v.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[];for(var u=s.start;u<s.end;u++)if(Em(a.getItemLayout(u))){var p=new this._LineCtor(a,u,this._seriesScope);p.traverse(l),this.group.add(p),a.setItemGraphicEl(u,p),this._progressiveEls.push(p)}},c.prototype.remove=function(){this.group.removeAll()},c.prototype.eachRendered=function(s){Un.traverseElements(this._progressiveEls||this.group,s)},c.prototype._doAdd=function(s,a,l){if(Em(s.getItemLayout(a))){var h=new this._LineCtor(s,a,l);s.setItemGraphicEl(a,h),this.group.add(h)}},c.prototype._doUpdate=function(s,a,l,u,h){var p=s.getItemGraphicEl(l);Em(a.getItemLayout(u))?(p?p.updateData(a,u,h):p=new this._LineCtor(a,u,h),a.setItemGraphicEl(u,p),this.group.add(p)):this.group.remove(p)},c}();var mb=[],bu=[],Tl=[],Wh=Es.Zm,_b=lr.distSquare,ZR=Math.abs;function YR(c,s,a){for(var v,l=c[0],u=c[1],h=c[2],p=1/0,m=a*a,y=.1,x=.1;x<=.9;x+=.1)mb[0]=Wh(l[0],u[0],h[0],x),mb[1]=Wh(l[1],u[1],h[1],x),(C=ZR(_b(mb,s)-m))<p&&(p=C,v=x);for(var M=0;M<32;M++){var E=v+y;bu[0]=Wh(l[0],u[0],h[0],v),bu[1]=Wh(l[1],u[1],h[1],v),Tl[0]=Wh(l[0],u[0],h[0],E),Tl[1]=Wh(l[1],u[1],h[1],E);var C=_b(bu,s)-m;if(ZR(C)<.01)break;var R=_b(Tl,s)-m;y/=2,C<0?R>=0?v+=y:v-=y:R>=0?v-=y:v+=y}return v}function Am(c,s){var a=[],l=Es.Lx,u=[[],[],[]],h=[[],[]],p=[];s/=2,c.eachEdge(function(v,m){var y=v.getLayout(),x=v.getVisual("fromSymbol"),C=v.getVisual("toSymbol");y.__original||(y.__original=[lr.clone(y[0]),lr.clone(y[1])],y[2]&&y.__original.push(lr.clone(y[2])));var M=y.__original;if(null!=y[2]){if(lr.copy(u[0],M[0]),lr.copy(u[1],M[2]),lr.copy(u[2],M[1]),x&&"none"!==x){var E=kp(v.node1),R=YR(u,M[0],E*s);l(u[0][0],u[1][0],u[2][0],R,a),u[0][0]=a[3],u[1][0]=a[4],l(u[0][1],u[1][1],u[2][1],R,a),u[0][1]=a[3],u[1][1]=a[4]}C&&"none"!==C&&(E=kp(v.node2),R=YR(u,M[1],E*s),l(u[0][0],u[1][0],u[2][0],R,a),u[1][0]=a[1],u[2][0]=a[2],l(u[0][1],u[1][1],u[2][1],R,a),u[1][1]=a[1],u[2][1]=a[2]),lr.copy(y[0],u[0]),lr.copy(y[1],u[2]),lr.copy(y[2],u[1])}else lr.copy(h[0],M[0]),lr.copy(h[1],M[1]),lr.sub(p,h[1],h[0]),lr.normalize(p,p),x&&"none"!==x&&(E=kp(v.node1),lr.scaleAndAdd(h[0],h[0],p,E*s)),C&&"none"!==C&&(E=kp(v.node2),lr.scaleAndAdd(h[1],h[1],p,-E*s)),lr.copy(y[0],h[0]),lr.copy(y[1],h[1])})}function XR(c){return"view"===c.type}const yb=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.init=function(a,l){var u=new Do,h=new vb,p=this.group;this._controller=new Mh(l.getZr()),this._controllerHost={target:p},p.add(u.group),p.add(h.group),this._symbolDraw=u,this._lineDraw=h,this._firstRender=!0},s.prototype.render=function(a,l,u){var h=this,p=a.coordinateSystem;this._model=a;var v=this._symbolDraw,m=this._lineDraw,y=this.group;if(XR(p)){var x={x:p.x,y:p.y,scaleX:p.scaleX,scaleY:p.scaleY};this._firstRender?y.attr(x):on.D(y,x,a)}Am(a.getGraph(),ks(a));var C=a.getData();v.updateData(C);var M=a.getEdgeData();m.updateData(M),this._updateNodeAndLinkScale(),this._updateController(a,l,u),clearTimeout(this._layoutTimeout);var E=a.forceLayout,R=a.get(["force","layoutAnimation"]);E&&this._startForceLayoutIteration(E,R);var F=a.get("layout");C.graph.eachNode(function(ve){var Me=ve.dataIndex,Ae=ve.getGraphicEl(),Pe=ve.getModel();if(Ae){Ae.off("drag").off("dragend");var Ne=Pe.get("draggable");Ne&&Ae.on("drag",function(Ye){switch(F){case"force":E.warmUp(),!h._layouting&&h._startForceLayoutIteration(E,R),E.setFixed(Me),C.setItemLayout(Me,[Ae.x,Ae.y]);break;case"circular":C.setItemLayout(Me,[Ae.x,Ae.y]),ve.setLayout({fixed:!0},!0),Dm(a,"symbolSize",ve,[Ye.offsetX,Ye.offsetY]),h.updateLayout(a);break;default:C.setItemLayout(Me,[Ae.x,Ae.y]),lb(a.getGraph(),a),h.updateLayout(a)}}).on("dragend",function(){E&&E.setUnfixed(Me)}),Ae.setDraggable(Ne,!!Pe.get("cursor")),"adjacency"===Pe.get(["emphasis","focus"])&&((0,Fn.A)(Ae).focus=ve.getAdjacentDataIndices())}}),C.graph.eachEdge(function(ve){var Me=ve.getGraphicEl(),Ae=ve.getModel().get(["emphasis","focus"]);!Me||"adjacency"===Ae&&((0,Fn.A)(Me).focus={edge:[ve.dataIndex],node:[ve.node1.dataIndex,ve.node2.dataIndex]})});var U="circular"===a.get("layout")&&a.get(["circular","rotateLabel"]),ue=C.getLayout("cx"),me=C.getLayout("cy");C.graph.eachNode(function(ve){lD(ve,U,ue,me)}),this._firstRender=!1},s.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},s.prototype._startForceLayoutIteration=function(a,l){var u=this;!function h(){a.step(function(p){u.updateLayout(u._model),(u._layouting=!p)&&(l?u._layoutTimeout=setTimeout(h,16):h())})}()},s.prototype._updateController=function(a,l,u){var h=this,p=this._controller,v=this._controllerHost,m=this.group;p.setPointerChecker(function(y,x,C){var M=m.getBoundingRect();return M.applyTransform(m.transform),M.contain(x,C)&&!Xu(y,u,a)}),XR(a.coordinateSystem)?(p.enable(a.get("roam")),v.zoomLimit=a.get("scaleLimit"),v.zoom=a.coordinateSystem.getZoom(),p.off("pan").off("zoom").on("pan",function(y){tm(v,y.dx,y.dy),u.dispatchAction({seriesId:a.id,type:"graphRoam",dx:y.dx,dy:y.dy})}).on("zoom",function(y){nm(v,y.scale,y.originX,y.originY),u.dispatchAction({seriesId:a.id,type:"graphRoam",zoom:y.scale,originX:y.originX,originY:y.originY}),h._updateNodeAndLinkScale(),Am(a.getGraph(),ks(a)),h._lineDraw.updateLayout(),u.updateLabelLayout()})):p.disable()},s.prototype._updateNodeAndLinkScale=function(){var a=this._model,l=a.getData(),u=ks(a);l.eachItemGraphicEl(function(h,p){h&&h.setSymbolScale(u)})},s.prototype.updateLayout=function(a){Am(a.getGraph(),ks(a)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},s.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},s.type="graph",s}(na.Z);var bb=z(555),gD=z(5566);function xb(c,s,a,l,u){for(var h=new bb.ZP(l),p=0;p<c.length;p++)h.addNode(b.retrieve(c[p].id,c[p].name,p),p);var v=[],m=[],y=0;for(p=0;p<s.length;p++){var x=s[p],C=x.source,M=x.target;h.addEdge(C,M,y)&&(m.push(x),v.push(b.retrieve((0,An.U5)(x.id,null),C+" > "+M)),y++)}var R,E=a.get("coordinateSystem");if("cartesian2d"===E||"polar"===E)R=(0,ta.Z)(c,a);else{var F=gD.Z.get(E),U=F&&F.dimensions||[];b.indexOf(U,"value")<0&&U.concat(["value"]);var ue=(0,Zr.Z)(c,{coordDimensions:U,encodeDefine:a.getEncode()}).dimensions;(R=new nr.Z(ue,a)).initData(c)}var me=new nr.Z(["value"],a);return me.initData(m,v),u&&u(R,me),(0,OS.Z)({mainData:R,struct:h,structAttr:"graph",datas:{node:R,edge:me},datasAttr:{node:"data",edge:"edgeData"}}),h.update(),h}var $R=z(7131);const KR=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.hasSymbolVisual=!0,a}return(0,Rt.ZT)(s,c),s.prototype.init=function(a){c.prototype.init.apply(this,arguments);var l=this;function u(){return l._categoriesData}this.legendVisualProvider=new eo(u,u),this.fillDataTextStyle(a.edges||a.links),this._updateCategoriesData()},s.prototype.mergeOption=function(a){c.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(a.edges||a.links),this._updateCategoriesData()},s.prototype.mergeDefaultAndTheme=function(a){c.prototype.mergeDefaultAndTheme.apply(this,arguments),(0,An.Cc)(a,"edgeLabel",["show"])},s.prototype.getInitialData=function(a,l){var u=a.edges||a.links||[],h=a.data||a.nodes||[],p=this;if(h&&u){!function aD(c){!sb(c)||(c.__curvenessList=[],c.__edgeMap={},kR(c))}(this);var v=xb(h,u,this,!0,function m(y,x){y.wrapMethod("getItemModel",function(R){var ue=p._categoriesModels[R.getShallow("category")];return ue&&(ue.parentModel=R.parentModel,R.parentModel=ue),R});var C=ki.Z.prototype.getModel;function M(R,F){var U=C.call(this,R,F);return U.resolveParentPath=E,U}function E(R){if(R&&("label"===R[0]||"label"===R[1])){var F=R.slice();return"label"===R[0]?F[0]="edgeLabel":"label"===R[1]&&(F[1]="edgeLabel"),F}return R}x.wrapMethod("getItemModel",function(R){return R.resolveParentPath=E,R.getModel=M,R})});return b.each(v.edges,function(y){!function oD(c,s,a,l){if(sb(a)){var u=wm(c,s,a),h=a.__edgeMap,p=h[NR(u)];h[u]&&!p?h[u].isForward=!0:p&&h[u]&&(p.isForward=!0,h[u].isForward=!1),h[u]=h[u]||[],h[u].push(l)}}(y.node1,y.node2,this,y.dataIndex)},this),v.data}},s.prototype.getGraph=function(){return this.getData().graph},s.prototype.getEdgeData=function(){return this.getGraph().edgeData},s.prototype.getCategoriesData=function(){return this._categoriesData},s.prototype.formatTooltip=function(a,l,u){if("edge"===u){var h=this.getData(),p=this.getDataParams(a,u),v=h.graph.getEdgeByIndex(a),m=h.getName(v.node1.dataIndex),y=h.getName(v.node2.dataIndex),x=[];return null!=m&&x.push(m),null!=y&&x.push(y),(0,Ui.TX)("nameValue",{name:x.join(" > "),value:p.value,noValue:null==p.value})}return(0,$R.w)({series:this,dataIndex:a,multipleSeries:l})},s.prototype._updateCategoriesData=function(){var a=b.map(this.option.categories||[],function(u){return null!=u.value?u:b.extend({value:0},u)}),l=new nr.Z(["value"],this);l.initData(a),this._categoriesData=l,this._categoriesModels=l.mapArray(function(u){return l.getItemModel(u)})},s.prototype.setZoom=function(a){this.option.zoom=a},s.prototype.setCenter=function(a){this.option.center=a},s.prototype.isAnimationEnabled=function(){return c.prototype.isAnimationEnabled.call(this)&&!("force"===this.get("layout")&&this.get(["force","layoutAnimation"]))},s.type="series.graph",s.dependencies=["grid","polar","geo","singleAxis","calendar"],s.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},s}(zi.Z);var QR={type:"graphRoam",event:"graphRoam",update:"none"},Cb=function c(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0};const H5=function(c){function s(a){var l=c.call(this,a)||this;return l.type="pointer",l}return(0,Rt.ZT)(s,c),s.prototype.getDefaultShape=function(){return new Cb},s.prototype.buildPath=function(a,l){var u=Math.cos,h=Math.sin,p=l.r,v=l.width,m=l.angle,y=l.x-u(m)*v*(v>=p/3?1:2),x=l.y-h(m)*v*(v>=p/3?1:2);m=l.angle-Math.PI/2,a.moveTo(y,x),a.lineTo(l.x+u(m)*v,l.y+h(m)*v),a.lineTo(l.x+u(l.angle)*p,l.y+h(l.angle)*p),a.lineTo(l.x-u(m)*v,l.y-h(m)*v),a.lineTo(y,x)},s}(ye.ZP);function Zh(c,s){var a=null==c?"":c+"";return s&&((0,b.isString)(s)?a=s.replace("{value}",a):(0,b.isFunction)(s)&&(a=s(c))),a}const qR=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u){this.group.removeAll();var h=a.get(["axisLine","lineStyle","color"]),p=function jh(c,s){var a=c.get("center"),l=s.getWidth(),u=s.getHeight(),h=Math.min(l,u);return{cx:(0,ft.GM)(a[0],s.getWidth()),cy:(0,ft.GM)(a[1],s.getHeight()),r:(0,ft.GM)(c.get("radius"),h/2)}}(a,u);this._renderMain(a,l,u,h,p),this._data=a.getData()},s.prototype.dispose=function(){},s.prototype._renderMain=function(a,l,u,h,p){var v=this.group,m=a.get("clockwise"),y=-a.get("startAngle")/180*Math.PI,x=-a.get("endAngle")/180*Math.PI,C=a.getModel("axisLine"),E=C.get("roundCap")?fu:hs.C,R=C.get("show"),F=C.getModel("lineStyle"),U=F.get("width"),ue=[y,x];(0,ge.L)(ue,!m);for(var me=(x=ue[1])-(y=ue[0]),ve=y,Me=[],Ae=0;R&&Ae<h.length;Ae++){var Ne=new E({shape:{startAngle:ve,endAngle:x=y+me*Math.min(Math.max(h[Ae][0],0),1),cx:p.cx,cy:p.cy,clockwise:m,r0:p.r-U,r:p.r},silent:!0});Ne.setStyle({fill:h[Ae][1]}),Ne.setStyle(F.getLineStyle(["color","width"])),Me.push(Ne),ve=x}Me.reverse(),(0,b.each)(Me,function(Ye){return v.add(Ye)});var He=function(Ye){if(Ye<=0)return h[0][1];var Qe;for(Qe=0;Qe<h.length;Qe++)if(h[Qe][0]>=Ye&&(0===Qe?0:h[Qe-1][0])<Ye)return h[Qe][1];return h[Qe-1][1]};this._renderTicks(a,l,u,He,p,y,x,m,U),this._renderTitleAndDetail(a,l,u,He,p),this._renderAnchor(a,p),this._renderPointer(a,l,u,He,p,y,x,m,U)},s.prototype._renderTicks=function(a,l,u,h,p,v,m,y,x){for(var vt,gt,C=this.group,M=p.cx,E=p.cy,R=p.r,F=+a.get("min"),U=+a.get("max"),ue=a.getModel("splitLine"),me=a.getModel("axisTick"),ve=a.getModel("axisLabel"),Me=a.get("splitNumber"),Ae=me.get("splitNumber"),Pe=(0,ft.GM)(ue.get("length"),R),Ne=(0,ft.GM)(me.get("length"),R),He=v,Ye=(m-v)/Me,Qe=Ye/Ae,it=ue.getModel("lineStyle").getLineStyle(),ct=me.getModel("lineStyle").getLineStyle(),ht=ue.get("distance"),Ot=0;Ot<=Me;Ot++){if(vt=Math.cos(He),gt=Math.sin(He),ue.get("show")){var Ft=new no.Z({shape:{x1:vt*(R-(Gt=ht?ht+x:x))+M,y1:gt*(R-Gt)+E,x2:vt*(R-Pe-Gt)+M,y2:gt*(R-Pe-Gt)+E},style:it,silent:!0});"auto"===it.stroke&&Ft.setStyle({stroke:h(Ot/Me)}),C.add(Ft)}if(ve.get("show")){var Gt=ve.get("distance")+ht,en=Zh((0,ft.NM)(Ot/Me*(U-F)+F),ve.get("formatter")),Mn=h(Ot/Me),Tn=vt*(R-Pe-Gt)+M,tr=gt*(R-Pe-Gt)+E,_r=ve.get("rotate"),hr=0;"radial"===_r?(hr=-He+2*Math.PI)>Math.PI/2&&(hr+=Math.PI):"tangential"===_r?hr=-He-Math.PI/2:(0,b.isNumber)(_r)&&(hr=_r*Math.PI/180),C.add(new kt.ZP(0===hr?{style:(0,Bn.Lr)(ve,{text:en,x:Tn,y:tr,verticalAlign:gt<-.8?"top":gt>.8?"bottom":"middle",align:vt<-.4?"left":vt>.4?"right":"center"},{inheritColor:Mn}),silent:!0}:{style:(0,Bn.Lr)(ve,{text:en,x:Tn,y:tr,verticalAlign:"middle",align:"center"},{inheritColor:Mn}),silent:!0,originX:Tn,originY:tr,rotation:hr}))}if(me.get("show")&&Ot!==Me){Gt=(Gt=me.get("distance"))?Gt+x:x;for(var jr=0;jr<=Ae;jr++){vt=Math.cos(He),gt=Math.sin(He);var pi=new no.Z({shape:{x1:vt*(R-Gt)+M,y1:gt*(R-Gt)+E,x2:vt*(R-Ne-Gt)+M,y2:gt*(R-Ne-Gt)+E},silent:!0,style:ct});"auto"===ct.stroke&&pi.setStyle({stroke:h((Ot+jr/Ae)/Me)}),C.add(pi),He+=Qe}He-=Qe}else He+=Ye}},s.prototype._renderPointer=function(a,l,u,h,p,v,m,y,x){var C=this.group,M=this._data,E=this._progressEls,R=[],F=a.get(["pointer","show"]),U=a.getModel("progress"),ue=U.get("show"),me=a.getData(),ve=me.mapDimension("value"),Me=+a.get("min"),Ae=+a.get("max"),Pe=[Me,Ae],Ne=[v,m];function He(Qe,it){var Tn,ht=me.getItemModel(Qe).getModel("pointer"),vt=(0,ft.GM)(ht.get("width"),p.r),gt=(0,ft.GM)(ht.get("length"),p.r),Ot=a.get(["pointer","icon"]),Gt=ht.get("offsetCenter"),Ft=(0,ft.GM)(Gt[0],p.r),en=(0,ft.GM)(Gt[1],p.r),Mn=ht.get("keepAspect");return(Tn=Ot?(0,dr.th)(Ot,Ft-vt/2,en-gt,vt,gt,null,Mn):new H5({shape:{angle:-Math.PI/2,width:vt,r:gt,x:Ft,y:en}})).rotation=-(it+Math.PI/2),Tn.x=p.cx,Tn.y=p.cy,Tn}function Ye(Qe,it){var ht=U.get("roundCap")?fu:hs.C,vt=U.get("overlap"),gt=vt?U.get("width"):x/me.count(),Ft=new ht({shape:{startAngle:v,endAngle:it,cx:p.cx,cy:p.cy,clockwise:y,r0:vt?p.r-gt:p.r-(Qe+1)*gt,r:vt?p.r:p.r-Qe*gt}});return vt&&(Ft.z2=Ae-me.get(ve,Qe)%Ae),Ft}(ue||F)&&(me.diff(M).add(function(Qe){var it=me.get(ve,Qe);if(F){var ct=He(Qe,v);on.KZ(ct,{rotation:-((isNaN(+it)?Ne[0]:(0,ft.NU)(it,Pe,Ne,!0))+Math.PI/2)},a),C.add(ct),me.setItemGraphicEl(Qe,ct)}if(ue){var ht=Ye(Qe,v),vt=U.get("clip");on.KZ(ht,{shape:{endAngle:(0,ft.NU)(it,Pe,Ne,vt)}},a),C.add(ht),(0,Fn.Q)(a.seriesIndex,me.dataType,Qe,ht),R[Qe]=ht}}).update(function(Qe,it){var ct=me.get(ve,Qe);if(F){var ht=M.getItemGraphicEl(it),vt=ht?ht.rotation:v,gt=He(Qe,vt);gt.rotation=vt,on.D(gt,{rotation:-((isNaN(+ct)?Ne[0]:(0,ft.NU)(ct,Pe,Ne,!0))+Math.PI/2)},a),C.add(gt),me.setItemGraphicEl(Qe,gt)}if(ue){var Ot=E[it],Ft=Ye(Qe,Ot?Ot.shape.endAngle:v),en=U.get("clip");on.D(Ft,{shape:{endAngle:(0,ft.NU)(ct,Pe,Ne,en)}},a),C.add(Ft),(0,Fn.Q)(a.seriesIndex,me.dataType,Qe,Ft),R[Qe]=Ft}}).execute(),me.each(function(Qe){var it=me.getItemModel(Qe),ct=it.getModel("emphasis"),ht=ct.get("focus"),vt=ct.get("blurScope"),gt=ct.get("disabled");if(F){var Ot=me.getItemGraphicEl(Qe),Gt=me.getItemVisual(Qe,"style"),Ft=Gt.fill;if(Ot instanceof be.ZP){var en=Ot.style;Ot.useStyle((0,b.extend)({image:en.image,x:en.x,y:en.y,width:en.width,height:en.height},Gt))}else Ot.useStyle(Gt),"pointer"!==Ot.type&&Ot.setColor(Ft);Ot.setStyle(it.getModel(["pointer","itemStyle"]).getItemStyle()),"auto"===Ot.style.fill&&Ot.setStyle("fill",h((0,ft.NU)(me.get(ve,Qe),Pe,[0,1],!0))),Ot.z2EmphasisLift=0,(0,bn.WO)(Ot,it),(0,bn.k5)(Ot,ht,vt,gt)}if(ue){var Mn=R[Qe];Mn.useStyle(me.getItemVisual(Qe,"style")),Mn.setStyle(it.getModel(["progress","itemStyle"]).getItemStyle()),Mn.z2EmphasisLift=0,(0,bn.WO)(Mn,it),(0,bn.k5)(Mn,ht,vt,gt)}}),this._progressEls=R)},s.prototype._renderAnchor=function(a,l){var u=a.getModel("anchor");if(u.get("show")){var p=u.get("size"),v=u.get("icon"),m=u.get("offsetCenter"),y=u.get("keepAspect"),x=(0,dr.th)(v,l.cx-p/2+(0,ft.GM)(m[0],l.r),l.cy-p/2+(0,ft.GM)(m[1],l.r),p,p,null,y);x.z2=u.get("showAbove")?1:0,x.setStyle(u.getModel("itemStyle").getItemStyle()),this.group.add(x)}},s.prototype._renderTitleAndDetail=function(a,l,u,h,p){var v=this,m=a.getData(),y=m.mapDimension("value"),x=+a.get("min"),C=+a.get("max"),M=new Vn.Z,E=[],R=[],F=a.isAnimationEnabled(),U=a.get(["pointer","showAbove"]);m.diff(this._data).add(function(ue){E[ue]=new kt.ZP({silent:!0}),R[ue]=new kt.ZP({silent:!0})}).update(function(ue,me){E[ue]=v._titleEls[me],R[ue]=v._detailEls[me]}).execute(),m.each(function(ue){var me=m.getItemModel(ue),ve=m.get(y,ue),Me=new Vn.Z,Ae=h((0,ft.NU)(ve,[x,C],[0,1],!0)),Pe=me.getModel("title");if(Pe.get("show")){var Ne=Pe.get("offsetCenter"),He=p.cx+(0,ft.GM)(Ne[0],p.r),Ye=p.cy+(0,ft.GM)(Ne[1],p.r);(Qe=E[ue]).attr({z2:U?0:2,style:(0,Bn.Lr)(Pe,{x:He,y:Ye,text:m.getName(ue),align:"center",verticalAlign:"middle"},{inheritColor:Ae})}),Me.add(Qe)}var it=me.getModel("detail");if(it.get("show")){var ct=it.get("offsetCenter"),ht=p.cx+(0,ft.GM)(ct[0],p.r),vt=p.cy+(0,ft.GM)(ct[1],p.r),gt=(0,ft.GM)(it.get("width"),p.r),Ot=(0,ft.GM)(it.get("height"),p.r),Gt=a.get(["progress","show"])?m.getItemVisual(ue,"style").fill:Ae,Qe=R[ue],Ft=it.get("formatter");Qe.attr({z2:U?0:2,style:(0,Bn.Lr)(it,{x:ht,y:vt,text:Zh(ve,Ft),width:isNaN(gt)?null:gt,height:isNaN(Ot)?null:Ot,align:"center",verticalAlign:"middle"},{inheritColor:Gt})}),(0,Bn.pe)(Qe,{normal:it},ve,function(Mn){return Zh(Mn,Ft)}),F&&(0,Bn.tD)(Qe,ue,m,a,{getFormattedLabel:function(Mn,Tn,tr,_r,hr,jr){return Zh(jr?jr.interpolatedValue:ve,Ft)}}),Me.add(Qe)}M.add(Me)}),this.group.add(M),this._titleEls=E,this._detailEls=R},s.type="gauge",s}(na.Z),JR=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.visualStyleAccessPath="itemStyle",a}return(0,Rt.ZT)(s,c),s.prototype.getInitialData=function(a,l){return _i(this,["value"])},s.type="series.gauge",s.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},s}(zi.Z);var tL=["itemStyle","opacity"],nL=function(c){function s(a,l){var u=c.call(this)||this,h=u,p=new Pt.Z,v=new kt.ZP;return h.setTextContent(v),u.setTextGuideLine(p),u.updateData(a,l,!0),u}return(0,Rt.ZT)(s,c),s.prototype.updateData=function(a,l,u){var h=this,p=a.hostModel,v=a.getItemModel(l),m=a.getItemLayout(l),y=v.getModel("emphasis"),x=v.get(tL);x=x??1,u||(0,on.Zi)(h),h.useStyle(a.getItemVisual(l,"style")),h.style.lineJoin="round",u?(h.setShape({points:m.points}),h.style.opacity=0,on.KZ(h,{style:{opacity:x}},p,l)):on.D(h,{style:{opacity:x},shape:{points:m.points}},p,l),(0,bn.WO)(h,v),this._updateLabel(a,l),(0,bn.k5)(this,y.get("focus"),y.get("blurScope"),y.get("disabled"))},s.prototype._updateLabel=function(a,l){var u=this,h=this.getTextGuideLine(),p=u.getTextContent(),v=a.hostModel,m=a.getItemModel(l),x=a.getItemLayout(l).label,C=a.getItemVisual(l,"style"),M=C.fill;(0,Bn.ni)(p,(0,Bn.k3)(m),{labelFetcher:a.hostModel,labelDataIndex:l,defaultOpacity:C.opacity,defaultText:a.getName(l)},{normal:{align:x.textAlign,verticalAlign:x.verticalAlign}}),u.setTextConfig({local:!0,inside:!!x.inside,insideStroke:M,outsideFill:M});var E=x.linePoints;h.setShape({points:E}),u.textGuideLineConfig={anchor:E?new tn.Z(E[0][0],E[0][1]):null},on.D(p,{style:{x:x.x,y:x.y}},v,l),p.attr({rotation:x.rotation,originX:x.x,originY:x.y,z2:10}),(0,xn.Iu)(u,(0,xn.$x)(m),{stroke:M})},s}(Wo.Z);const iL=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.ignoreLabelLineUpdate=!0,a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u){var h=a.getData(),p=this._data,v=this.group;h.diff(p).add(function(m){var y=new nL(h,m);h.setItemGraphicEl(m,y),v.add(y)}).update(function(m,y){var x=p.getItemGraphicEl(y);x.updateData(h,m),v.add(x),h.setItemGraphicEl(m,x)}).remove(function(m){var y=p.getItemGraphicEl(m);on.XD(y,a,m)}).execute(),this._data=h},s.prototype.remove=function(){this.group.removeAll(),this._data=null},s.prototype.dispose=function(){},s.type="funnel",s}(na.Z),Db=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.init=function(a){c.prototype.init.apply(this,arguments),this.legendVisualProvider=new eo(b.bind(this.getData,this),b.bind(this.getRawData,this)),this._defaultLabelLine(a)},s.prototype.getInitialData=function(a,l){return _i(this,{coordDimensions:["value"],encodeDefaulter:b.curry(za.Ss,this)})},s.prototype._defaultLabelLine=function(a){(0,An.Cc)(a,"labelLine",["show"]);var l=a.labelLine,u=a.emphasis.labelLine;l.show=l.show&&a.label.show,u.show=u.show&&a.emphasis.label.show},s.prototype.getDataParams=function(a){var l=this.getData(),u=c.prototype.getDataParams.call(this,a),h=l.mapDimension("value"),p=l.getSum(h);return u.percent=p?+(l.get(h,a)/p*100).toFixed(2):0,u.$vars.push("percent"),u},s.type="series.funnel",s.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},s}(zi.Z);function oL(c,s){c.eachSeriesByType("funnel",function(a){var l=a.getData(),u=l.mapDimension("value"),h=a.get("sort"),p=function yD(c,s){return Oe.ME(c.getBoxLayoutParams(),{width:s.getWidth(),height:s.getHeight()})}(a,s),v=a.get("orient"),m=p.width,y=p.height,x=function Mb(c,s){for(var a=c.mapDimension("value"),l=c.mapArray(a,function(m){return m}),u=[],h="ascending"===s,p=0,v=c.count();p<v;p++)u[p]=p;return(0,b.isFunction)(s)?u.sort(s):"none"!==s&&u.sort(function(m,y){return h?l[m]-l[y]:l[y]-l[m]}),u}(l,h),C=p.x,M=p.y,E="horizontal"===v?[(0,ft.GM)(a.get("minSize"),y),(0,ft.GM)(a.get("maxSize"),y)]:[(0,ft.GM)(a.get("minSize"),m),(0,ft.GM)(a.get("maxSize"),m)],R=l.getDataExtent(u),F=a.get("min"),U=a.get("max");null==F&&(F=Math.min(R[0],0)),null==U&&(U=R[1]);var ue=a.get("funnelAlign"),me=a.get("gap"),Me=(("horizontal"===v?m:y)-me*(l.count()-1))/l.count(),Ae=function(vt,gt){if("horizontal"===v){var Ot=l.get(u,vt)||0,Gt=(0,ft.NU)(Ot,[F,U],E,!0),Ft=void 0;switch(ue){case"top":Ft=M;break;case"center":Ft=M+(y-Gt)/2;break;case"bottom":Ft=M+(y-Gt)}return[[gt,Ft],[gt,Ft+Gt]]}var Tn,en=l.get(u,vt)||0,Mn=(0,ft.NU)(en,[F,U],E,!0);switch(ue){case"left":Tn=C;break;case"center":Tn=C+(m-Mn)/2;break;case"right":Tn=C+m-Mn}return[[Tn,gt],[Tn+Mn,gt]]};"ascending"===h&&(Me=-Me,me=-me,"horizontal"===v?C+=m:M+=y,x=x.reverse());for(var Pe=0;Pe<x.length;Pe++){var Ne=x[Pe],He=x[Pe+1],Ye=l.getItemModel(Ne);if("horizontal"===v){var Qe=Ye.get(["itemStyle","width"]);null==Qe?Qe=Me:(Qe=(0,ft.GM)(Qe,m),"ascending"===h&&(Qe=-Qe));var it=Ae(Ne,C),ct=Ae(He,C+Qe);C+=Qe+me,l.setItemLayout(Ne,{points:it.concat(ct.slice().reverse())})}else{var ht=Ye.get(["itemStyle","height"]);null==ht?ht=Me:(ht=(0,ft.GM)(ht,y),"ascending"===h&&(ht=-ht)),it=Ae(Ne,M),ct=Ae(He,M+ht),M+=ht+me,l.setItemLayout(Ne,{points:it.concat(ct.slice().reverse())})}}!function aL(c){var a=c.hostModel.get("orient");c.each(function(l){var C,M,E,R,u=c.getItemModel(l),p=u.getModel("label").get("position"),v=u.getModel("labelLine"),m=c.getItemLayout(l),y=m.points,x="inner"===p||"inside"===p||"center"===p||"insideLeft"===p||"insideRight"===p;if(x)"insideLeft"===p?(M=(y[0][0]+y[3][0])/2+5,E=(y[0][1]+y[3][1])/2,C="left"):"insideRight"===p?(M=(y[1][0]+y[2][0])/2-5,E=(y[1][1]+y[2][1])/2,C="right"):(M=(y[0][0]+y[1][0]+y[2][0]+y[3][0])/4,E=(y[0][1]+y[1][1]+y[2][1]+y[3][1])/4,C="center"),R=[[M,E],[M,E]];else{var F=void 0,U=void 0,ue=void 0,me=void 0,ve=v.get("length");"left"===p?(U=(y[3][1]+y[0][1])/2,M=(ue=(F=(y[3][0]+y[0][0])/2)-ve)-5,C="right"):"right"===p?(U=(y[1][1]+y[2][1])/2,M=(ue=(F=(y[1][0]+y[2][0])/2)+ve)+5,C="left"):"top"===p?(F=(y[3][0]+y[0][0])/2,E=(me=(U=(y[3][1]+y[0][1])/2)-ve)-5,C="center"):"bottom"===p?(F=(y[1][0]+y[2][0])/2,E=(me=(U=(y[1][1]+y[2][1])/2)+ve)+5,C="center"):"rightTop"===p?(F="horizontal"===a?y[3][0]:y[1][0],U="horizontal"===a?y[3][1]:y[1][1],"horizontal"===a?(E=(me=U-ve)-5,C="center"):(M=(ue=F+ve)+5,C="top")):"rightBottom"===p?(F=y[2][0],U=y[2][1],"horizontal"===a?(E=(me=U+ve)+5,C="center"):(M=(ue=F+ve)+5,C="bottom")):"leftTop"===p?(F=y[0][0],U="horizontal"===a?y[0][1]:y[1][1],"horizontal"===a?(E=(me=U-ve)-5,C="center"):(M=(ue=F-ve)-5,C="right")):"leftBottom"===p?(F="horizontal"===a?y[1][0]:y[3][0],U="horizontal"===a?y[1][1]:y[2][1],"horizontal"===a?(E=(me=U+ve)+5,C="center"):(M=(ue=F-ve)-5,C="right")):(F=(y[1][0]+y[2][0])/2,U=(y[1][1]+y[2][1])/2,"horizontal"===a?(E=(me=U+ve)+5,C="center"):(M=(ue=F+ve)+5,C="left")),"horizontal"===a?M=ue=F:E=me=U,R=[[F,U],[ue,me]]}m.label={linePoints:R,x:M,y:E,verticalAlign:"middle",textAlign:C,inside:x}})}(l)})}function Tb(c,s,a,l){for(var u=[],h=0;h<a.length;h++){var p=a[h],v=c.get(c.mapDimension(p),s);lL(v,l.getAxis(p).type)||u.push(l.dataToPoint(v,p))}return u}function CD(c,s,a,l,u){var h=Tb(c,a,l,u),p=new Pt.Z({shape:{points:h},z2:10});return s.add(p),c.setItemGraphicEl(a,p),p}function sL(c){var s=c.get("smooth",!0);return!0===s&&(s=.3),s=(0,ft.FK)(s),(0,b.eqNaN)(s)&&(s=0),{smooth:s}}function Yh(c,s,a,l){c.useStyle(s.getItemVisual(a,"style")),c.style.fill=null,c.setShape("smooth",l.smooth);var u=s.getItemModel(a),h=u.getModel("emphasis");(0,bn.WO)(c,u,"lineStyle"),(0,bn.k5)(c,h.get("focus"),h.get("blurScope"),h.get("disabled"))}function lL(c,s){return"category"===s?null==c:null==c||isNaN(c)}const SD=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a._dataGroup=new Vn.Z,a._initialized=!1,a}return(0,Rt.ZT)(s,c),s.prototype.init=function(){this.group.add(this._dataGroup)},s.prototype.render=function(a,l,u,h){this._progressiveEls=null;var p=this._dataGroup,v=a.getData(),m=this._data,y=a.coordinateSystem,x=y.dimensions,C=sL(a);if(v.diff(m).add(function M(U){Yh(CD(v,p,U,x,y),v,U,C)}).update(function E(U,ue){var me=m.getItemGraphicEl(ue),ve=Tb(v,U,x,y);v.setItemGraphicEl(U,me),on.D(me,{shape:{points:ve}},a,U),(0,on.Zi)(me),Yh(me,v,U,C)}).remove(function R(U){var ue=m.getItemGraphicEl(U);p.remove(ue)}).execute(),!this._initialized){this._initialized=!0;var F=function wD(c,s,a){var l=c.model,u=c.getRect(),h=new Jt.Z({shape:{x:u.x,y:u.y,width:u.width,height:u.height}}),p="horizontal"===l.get("layout")?"width":"height";return h.setShape(p,0),on.KZ(h,{shape:{width:u.width,height:u.height}},s,a),h}(y,a,function(){setTimeout(function(){p.removeClipPath()})});p.setClipPath(F)}this._data=v},s.prototype.incrementalPrepareRender=function(a,l,u){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},s.prototype.incrementalRender=function(a,l,u){for(var h=l.getData(),p=l.coordinateSystem,v=p.dimensions,m=sL(l),y=this._progressiveEls=[],x=a.start;x<a.end;x++){var C=CD(h,this._dataGroup,x,v,p);C.incremental=!0,Yh(C,h,x,m),y.push(C)}},s.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},s.type="parallel",s}(na.Z);function MD(c){var s=c.ecModel.getComponent("parallel",c.get("parallelIndex"));if(s){var a={};return(0,b.each)(s.dimensions,function(l){var u=function Eb(c){return+c.replace("dim","")}(l);a[l]=u}),a}}const TD=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.visualStyleAccessPath="lineStyle",a.visualDrawType="stroke",a}return(0,Rt.ZT)(s,c),s.prototype.getInitialData=function(a,l){return(0,ta.Z)(null,this,{useEncodeDefaulter:(0,b.bind)(MD,null,this)})},s.prototype.getRawIndicesByActiveState=function(a){var l=this.coordinateSystem,u=this.getData(),h=[];return l.eachActiveState(u,function(p,v){a===p&&h.push(u.getRawIndex(v))}),h},s.type="series.parallel",s.dependencies=["parallel"],s.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},s}(zi.Z);var Im=["lineStyle","opacity"];const ED={seriesType:"parallel",reset:function(c,s){var a=c.coordinateSystem,l={normal:c.get(["lineStyle","opacity"]),active:c.get("activeOpacity"),inactive:c.get("inactiveOpacity")};return{progress:function(u,h){a.eachActiveState(h,function(p,v){var m=l[p];if("normal"===p&&h.hasItemOption){var y=h.getItemModel(v).get(Im,!0);null!=y&&(m=y)}h.ensureUniqueItemVisual(v,"style").opacity=m},u.start,u.end)}}}};function Ab(c){(function AD(c){if(!c.parallel){var s=!1;b.each(c.series,function(a){a&&"parallel"===a.type&&(s=!0)}),s&&(c.parallel=[{}])}})(c),function Ib(c){var s=An.kF(c.parallelAxis);b.each(s,function(a){if(b.isObject(a)){var l=a.parallelIndex||0,u=An.kF(c.parallel)[l];u&&u.parallelAxisDefault&&b.merge(a,u.parallelAxisDefault,!1)}})}(c)}var cL=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u){this._model=a,this._api=u,this._handlers||(this._handlers={},(0,b.each)(ID,function(h,p){u.getZr().on(p,this._handlers[p]=(0,b.bind)(h,this))},this)),(0,Eo.T9)(this,"_throttledDispatchExpand",a.get("axisExpandRate"),"fixRate")},s.prototype.dispose=function(a,l){(0,Eo.ZH)(this,"_throttledDispatchExpand"),(0,b.each)(this._handlers,function(u,h){l.getZr().off(h,u)}),this._handlers=null},s.prototype._throttledDispatchExpand=function(a){this._dispatchExpand(a)},s.prototype._dispatchExpand=function(a){a&&this._api.dispatchAction((0,b.extend)({type:"parallelAxisExpand"},a))},s.type="parallel",s}(Ra.Z),ID={mousedown:function(c){Pb(this,"click")&&(this._mouseDownPoint=[c.offsetX,c.offsetY])},mouseup:function(c){var s=this._mouseDownPoint;if(Pb(this,"click")&&s){var a=[c.offsetX,c.offsetY];if(Math.pow(s[0]-a[0],2)+Math.pow(s[1]-a[1],2)>5)return;var u=this._model.coordinateSystem.getSlidedAxisExpandWindow([c.offsetX,c.offsetY]);"none"!==u.behavior&&this._dispatchExpand({axisExpandWindow:u.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(c){if(!this._mouseDownPoint&&Pb(this,"mousemove")){var s=this._model,a=s.coordinateSystem.getSlidedAxisExpandWindow([c.offsetX,c.offsetY]),l=a.behavior;"jump"===l&&this._throttledDispatchExpand.debounceNextCall(s.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===l?null:{axisExpandWindow:a.axisExpandWindow,animation:"jump"===l?null:{duration:0}})}}};function Pb(c,s){var a=c._model;return a.get("axisExpandable")&&a.get("axisExpandTriggerOn")===s}const uL=cL,Rb=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.init=function(){c.prototype.init.apply(this,arguments),this.mergeOption({})},s.prototype.mergeOption=function(a){a&&b.merge(this.option,a,!0),this._initDimensions()},s.prototype.contains=function(a,l){var u=a.get("parallelIndex");return null!=u&&l.getComponent("parallel",u)===this},s.prototype.setAxisExpand=function(a){b.each(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(l){a.hasOwnProperty(l)&&(this.option[l]=a[l])},this)},s.prototype._initDimensions=function(){var a=this.dimensions=[],l=this.parallelAxisIndex=[],u=b.filter(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(h){return(h.get("parallelIndex")||0)===this.componentIndex},this);b.each(u,function(h){a.push("dim"+h.get("dim")),l.push(h.componentIndex)})},s.type="parallel",s.dependencies=["parallelAxis"],s.layoutMode="box",s.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},s}(xa.Z),U5=function(c){function s(a,l,u,h,p){var v=c.call(this,a,l,u)||this;return v.type=h||"value",v.axisIndex=p,v}return(0,Rt.ZT)(s,c),s.prototype.isHorizontal=function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")},s}(Is.Z);function xu(c,s,a,l,u,h){c=c||0;var p=a[1]-a[0];if(null!=u&&(u=cd(u,[0,p])),null!=h&&(h=Math.max(h,u??0)),"all"===l){var v=Math.abs(s[1]-s[0]);v=cd(v,[0,p]),u=h=cd(v,[u,h]),l=0}s[0]=cd(s[0],a),s[1]=cd(s[1],a);var m=Lb(s,l);s[l]+=c;var C,y=u||0,x=a.slice();return m.sign<0?x[0]+=y:x[1]-=y,s[l]=cd(s[l],x),C=Lb(s,l),null!=u&&(C.sign!==m.sign||C.span<u)&&(s[1-l]=s[l]+m.sign*u),C=Lb(s,l),null!=h&&C.span>h&&(s[1-l]=s[l]+C.sign*h),s}function Lb(c,s){var a=c[s]-c[1-s];return{span:Math.abs(a),sign:a>0?-1:a<0?1:s?-1:1}}function cd(c,s){return Math.min(null!=s[1]?s[1]:1/0,Math.max(null!=s[0]?s[0]:-1/0,c))}var Ob=b.each,LD=Math.min,tl=Math.max,OD=Math.floor,kD=Math.ceil,ND=ft.NM,dL=Math.PI;function Rm(c,s){return LD(tl(c,s[0]),s[1])}function FD(c,s){var a=s.layoutLength/(s.axisCount-1);return{position:a*c,axisNameAvailableWidth:a,axisLabelShow:!0}}function fL(c,s){var v,x,l=s.axisExpandWidth,h=s.axisCollapseWidth,p=s.winInnerIndices,m=h,y=!1;return c<p[0]?(v=c*h,x=h):c<=p[1]?(v=s.axisExpandWindow0Pos+c*l-s.axisExpandWindow[0],m=l,y=!0):(v=s.layoutLength-(s.axisCount-1-c)*h,x=h),{position:v,axisNameAvailableWidth:m,axisLabelShow:y,nameTruncateMaxWidth:x}}const pL=function(){function c(s,a,l){this.type="parallel",this._axesMap=b.createHashMap(),this._axesLayout={},this.dimensions=s.dimensions,this._model=s,this._init(s,a,l)}return c.prototype._init=function(s,a,l){var h=s.parallelAxisIndex;Ob(s.dimensions,function(p,v){var m=h[v],y=a.getComponent("parallelAxis",m),x=this._axesMap.set(p,new U5(p,wa.aG(y),[0,0],y.get("type"),m));x.onBand="category"===x.type&&y.get("boundaryGap"),x.inverse=y.get("inverse"),y.axis=x,x.model=y,x.coordinateSystem=y.coordinateSystem=this},this)},c.prototype.update=function(s,a){this._updateAxesFromSeries(this._model,s)},c.prototype.containPoint=function(s){var a=this._makeLayoutInfo(),l=a.axisBase,u=a.layoutBase,h=a.pixelDimIndex,p=s[1-h],v=s[h];return p>=l&&p<=l+a.axisLength&&v>=u&&v<=u+a.layoutLength},c.prototype.getModel=function(){return this._model},c.prototype._updateAxesFromSeries=function(s,a){a.eachSeries(function(l){if(s.contains(l,a)){var u=l.getData();Ob(this.dimensions,function(h){var p=this._axesMap.get(h);p.scale.unionExtentFromData(u,u.mapDimension(h)),wa.Jk(p.scale,p.model)},this)}},this)},c.prototype.resize=function(s,a){this._rect=Oe.ME(s.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()}),this._layoutAxes()},c.prototype.getRect=function(){return this._rect},c.prototype._makeLayoutInfo=function(){var R,s=this._model,a=this._rect,l=["x","y"],u=["width","height"],h=s.get("layout"),p="horizontal"===h?0:1,v=a[u[p]],m=[0,v],y=this.dimensions.length,x=Rm(s.get("axisExpandWidth"),m),C=Rm(s.get("axisExpandCount")||0,[0,y]),M=s.get("axisExpandable")&&y>3&&y>C&&C>1&&x>0&&v>0,E=s.get("axisExpandWindow");E?(R=Rm(E[1]-E[0],m),E[1]=E[0]+R):(R=Rm(x*(C-1),m),(E=[x*(s.get("axisExpandCenter")||OD(y/2))-R/2])[1]=E[0]+R);var U=(v-R)/(y-C);U<3&&(U=0);var ue=[OD(ND(E[0]/x,1))+1,kD(ND(E[1]/x,1))-1];return{layout:h,pixelDimIndex:p,layoutBase:a[l[p]],layoutLength:v,axisBase:a[l[1-p]],axisLength:a[u[1-p]],axisExpandable:M,axisExpandWidth:x,axisCollapseWidth:U,axisExpandWindow:E,axisCount:y,winInnerIndices:ue,axisExpandWindow0Pos:U/x*E[0]}},c.prototype._layoutAxes=function(){var s=this._rect,a=this._axesMap,l=this.dimensions,u=this._makeLayoutInfo(),h=u.layout;a.each(function(p){var v=[0,u.axisLength],m=p.inverse?1:0;p.setExtent(v[m],v[1-m])}),Ob(l,function(p,v){var m=(u.axisExpandable?fL:FD)(v,u),y={horizontal:{x:m.position,y:u.axisLength},vertical:{x:0,y:m.position}},C=[y[h].x+s.x,y[h].y+s.y],M={horizontal:dL/2,vertical:0}[h],E=Hr.create();Hr.rotate(E,E,M),Hr.translate(E,E,C),this._axesLayout[p]={position:C,rotation:M,transform:E,axisNameAvailableWidth:m.axisNameAvailableWidth,axisLabelShow:m.axisLabelShow,nameTruncateMaxWidth:m.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},c.prototype.getAxis=function(s){return this._axesMap.get(s)},c.prototype.dataToPoint=function(s,a){return this.axisCoordToPoint(this._axesMap.get(a).dataToCoord(s),a)},c.prototype.eachActiveState=function(s,a,l,u){null==l&&(l=0),null==u&&(u=s.count());var h=this._axesMap,p=this.dimensions,v=[],m=[];b.each(p,function(U){v.push(s.mapDimension(U)),m.push(h.get(U).model)});for(var y=this.hasAxisBrushed(),x=l;x<u;x++){var C=void 0;if(y){C="active";for(var M=s.getValues(v,x),E=0,R=p.length;E<R;E++)if("inactive"===m[E].getActiveState(M[E])){C="inactive";break}}else C="normal";a(C,x)}},c.prototype.hasAxisBrushed=function(){for(var s=this.dimensions,a=this._axesMap,l=!1,u=0,h=s.length;u<h;u++)"normal"!==a.get(s[u]).model.getActiveState()&&(l=!0);return l},c.prototype.axisCoordToPoint=function(s,a){return Un.applyTransform([s,0],this._axesLayout[a].transform)},c.prototype.getAxisLayout=function(s){return b.clone(this._axesLayout[s])},c.prototype.getSlidedAxisExpandWindow=function(s){var a=this._makeLayoutInfo(),l=a.pixelDimIndex,u=a.axisExpandWindow.slice(),h=u[1]-u[0],p=[0,a.axisExpandWidth*(a.axisCount-1)];if(!this.containPoint(s))return{behavior:"none",axisExpandWindow:u};var m,v=s[l]-a.layoutBase-a.axisExpandWindow0Pos,y="slide",x=a.axisCollapseWidth,C=this._model.get("axisExpandSlideTriggerArea"),M=null!=C[0];if(x)M&&x&&v<h*C[0]?(y="jump",m=v-h*C[2]):M&&x&&v>h*(1-C[0])?(y="jump",m=v-h*(1-C[2])):(m=v-h*C[1])>=0&&(m=v-h*(1-C[1]))<=0&&(m=0),(m*=a.axisExpandWidth/x)?xu(m,u,p,"all"):y="none";else{var E=u[1]-u[0];(u=[tl(0,p[1]*v/E-E/2)])[1]=LD(p[1],u[0]+E),u[0]=u[1]-E}return{axisExpandWindow:u,behavior:y}},c}(),xt={create:function gL(c,s){var a=[];return c.eachComponent("parallel",function(l,u){var h=new pL(l,c,s);h.name="parallel_"+u,h.resize(l,s),l.coordinateSystem=h,h.model=l,a.push(h)}),c.eachSeries(function(l){if("parallel"===l.get("coordinateSystem")){var u=l.getReferringComponents("parallel",An.C6).models[0];l.coordinateSystem=u.coordinateSystem}}),a}};var kb=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.activeIntervals=[],a}return(0,Rt.ZT)(s,c),s.prototype.getAreaSelectStyle=function(){return(0,WS.Z)([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},s.prototype.setActiveIntervals=function(a){var l=this.activeIntervals=b.clone(a);if(l)for(var u=l.length-1;u>=0;u--)ft.dt(l[u])},s.prototype.getActiveState=function(a){var l=this.activeIntervals;if(!l.length)return"normal";if(null==a||isNaN(+a))return"inactive";if(1===l.length){var u=l[0];if(u[0]<=a&&a<=u[1])return"active"}else for(var h=0,p=l.length;h<p;h++)if(l[h][0]<=a&&a<=l[h][1])return"active";return"inactive"},s}(xa.Z);b.mixin(kb,lp.W);const Nb=kb;var ud=!0,Vp=Math.min,dd=Math.max,vL=Math.pow,yL="globalPan",VD={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},zD={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Ga={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},bL=0,Fb=function(c){function s(a){var l=c.call(this)||this;return l._track=[],l._covers=[],l._handlers={},l._zr=a,l.group=new Vn.Z,l._uid="brushController_"+bL++,(0,b.each)($D,function(u,h){this._handlers[h]=(0,b.bind)(u,this)},l),l}return(0,Rt.ZT)(s,c),s.prototype.enableBrush=function(a){return this._brushType&&this._doDisableBrush(),a.brushType&&this._doEnableBrush(a),this},s.prototype._doEnableBrush=function(a){var l=this._zr;this._enableGlobalPan||function jP(c,s,a){gp(c)[s]=a}(l,yL,this._uid),(0,b.each)(this._handlers,function(u,h){l.on(h,u)}),this._brushType=a.brushType,this._brushOption=(0,b.merge)((0,b.clone)(Ga),a,!0)},s.prototype._doDisableBrush=function(){var a=this._zr;(function pp(c,s,a){var l=gp(c);l[s]===a&&(l[s]=null)})(a,yL,this._uid),(0,b.each)(this._handlers,function(l,u){a.off(u,l)}),this._brushType=this._brushOption=null},s.prototype.setPanels=function(a){if(a&&a.length){var l=this._panels={};(0,b.each)(a,function(u){l[u.panelId]=(0,b.clone)(u)})}else this._panels=null;return this},s.prototype.mount=function(a){this._enableGlobalPan=(a=a||{}).enableGlobalPan;var l=this.group;return this._zr.add(l),l.attr({x:a.x||0,y:a.y||0,rotation:a.rotation||0,scaleX:a.scaleX||1,scaleY:a.scaleY||1}),this._transform=l.getLocalTransform(),this},s.prototype.updateCovers=function(a){a=(0,b.map)(a,function(M){return(0,b.merge)((0,b.clone)(Ga),M,!0)});var u=this._covers,h=this._covers=[],p=this,v=this._creatingCover;return new td.Z(u,a,function y(M,E){return m(M.__brushOption,E)},m).add(x).update(x).remove(function C(M){u[M]!==v&&p.group.remove(u[M])}).execute(),this;function m(M,E){return(null!=M.id?M.id:"\0-brush-index-"+E)+"-"+M.brushType}function x(M,E){var R=a[M];if(null!=E&&u[E]===v)h[M]=u[E];else{var F=h[M]=null!=E?(u[E].__brushOption=R,u[E]):HD(p,Lm(p,R));UD(p,F)}}},s.prototype.unmount=function(){return this.enableBrush(!1),Vb(this),this._zr.remove(this.group),this},s.prototype.dispose=function(){this.unmount(),this.off()},s}(S0.Z);function Lm(c,s){var a=Gp[s.brushType].createCover(c,s);return a.__brushOption=s,wL(a,s),c.group.add(a),a}function HD(c,s){var a=Bb(s);return a.endCreating&&(a.endCreating(c,s),wL(s,s.__brushOption)),s}function xL(c,s){var a=s.__brushOption;Bb(s).updateCoverShape(c,s,a.range,a)}function wL(c,s){var a=s.z;null==a&&(a=1e4),c.traverse(function(l){l.z=a,l.z2=a})}function UD(c,s){Bb(s).updateCommon(c,s),xL(c,s)}function Bb(c){return Gp[c.__brushOption.brushType]}function Om(c,s,a){var l=c._panels;if(!l)return ud;var u,h=c._transform;return(0,b.each)(l,function(p){p.isTargetByCursor(s,a,h)&&(u=p)}),u}function CL(c,s){var a=c._panels;if(!a)return ud;var l=s.__brushOption.panelId;return null!=l?a[l]:ud}function Vb(c){var s=c._covers,a=s.length;return(0,b.each)(s,function(l){c.group.remove(l)},c),s.length=0,!!a}function nl(c,s){var a=(0,b.map)(c._covers,function(l){var u=l.__brushOption,h=(0,b.clone)(u.range);return{brushType:u.brushType,panelId:u.panelId,range:h}});c.trigger("brush",{areas:a,isEnd:!!s.isEnd,removeOnClick:!!s.removeOnClick})}function zb(c){var s=c.length-1;return s<0&&(s=0),[c[0],c[s]]}function zp(c,s,a,l){var u=new Vn.Z;return u.add(new Jt.Z({name:"main",style:Hb(a),silent:!0,draggable:!0,cursor:"move",drift:(0,b.curry)(ZD,c,s,u,["n","s","w","e"]),ondragend:(0,b.curry)(nl,s,{isEnd:!0})})),(0,b.each)(l,function(h){u.add(new Jt.Z({name:h.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:(0,b.curry)(ZD,c,s,u,h),ondragend:(0,b.curry)(nl,s,{isEnd:!0})}))}),u}function GD(c,s,a,l){var u=l.brushStyle.lineWidth||0,h=dd(u,6),p=a[0][0],v=a[1][0],m=p-u/2,y=v-u/2,x=a[0][1],C=a[1][1],M=x-h+u/2,E=C-h+u/2,R=x-p,F=C-v,U=R+u,ue=F+u;Wc(c,s,"main",p,v,R,F),l.transformable&&(Wc(c,s,"w",m,y,h,ue),Wc(c,s,"e",M,y,h,ue),Wc(c,s,"n",m,y,U,h),Wc(c,s,"s",m,E,U,h),Wc(c,s,"nw",m,y,h,h),Wc(c,s,"ne",M,y,h,h),Wc(c,s,"sw",m,E,h,h),Wc(c,s,"se",M,E,h,h))}function km(c,s){var a=s.__brushOption,l=a.transformable,u=s.childAt(0);u.useStyle(Hb(a)),u.attr({silent:!l,cursor:l?"move":"default"}),(0,b.each)([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(h){var p=s.childOfName(h.join("")),v=1===h.length?Ub(c,h[0]):function jD(c,s){var a=[Ub(c,s[0]),Ub(c,s[1])];return("e"===a[0]||"w"===a[0])&&a.reverse(),a.join("")}(c,h);p&&p.attr({silent:!l,invisible:!l,cursor:l?zD[v]+"-resize":null})})}function Wc(c,s,a,l,u,h,p){var v=s.childOfName(a);v&&v.setShape(function G5(c){var s=Vp(c[0][0],c[1][0]),a=Vp(c[0][1],c[1][1]);return{x:s,y:a,width:dd(c[0][0],c[1][0])-s,height:dd(c[0][1],c[1][1])-a}}(Hp(c,s,[[l,u],[l+h,u+p]])))}function Hb(c){return(0,b.defaults)({strokeNoScale:!0},c.brushStyle)}function WD(c,s,a,l){var u=[Vp(c,a),Vp(s,l)],h=[dd(c,a),dd(s,l)];return[[u[0],h[0]],[u[1],h[1]]]}function Ub(c,s){var u=Un.transformDirection({w:"left",e:"right",n:"top",s:"bottom"}[s],function DL(c){return Un.getTransform(c.group)}(c));return{left:"w",right:"e",top:"n",bottom:"s"}[u]}function ZD(c,s,a,l,u,h){var p=a.__brushOption,v=c.toRectRange(p.range),m=Gb(s,u,h);(0,b.each)(l,function(y){var x=VD[y];v[x[0]][x[1]]+=m[x[0]]}),p.range=c.fromRectRange(WD(v[0][0],v[1][0],v[0][1],v[1][1])),UD(s,a),nl(s,{isEnd:!1})}function YD(c,s,a,l){var u=s.__brushOption.range,h=Gb(c,a,l);(0,b.each)(u,function(p){p[0]+=h[0],p[1]+=h[1]}),UD(c,s),nl(c,{isEnd:!1})}function Gb(c,s,a){var l=c.group,u=l.transformCoordToLocal(s,a),h=l.transformCoordToLocal(0,0);return[u[0]-h[0],u[1]-h[1]]}function Hp(c,s,a){var l=CL(c,s);return l&&l!==ud?l.clipPath(a,c._transform):(0,b.clone)(a)}function jb(c){var s=c.event;s.preventDefault&&s.preventDefault()}function XD(c,s,a){return c.childOfName("main").contain(s,a)}function qe(c,s,a,l){var v,u=c._creatingCover,h=c._creatingPanel,p=c._brushOption;if(c._track.push(a.slice()),function SL(c){var s=c._track;if(!s.length)return!1;var a=s[s.length-1],l=s[0],u=a[0]-l[0],h=a[1]-l[1];return vL(u*u+h*h,.5)>6}(c)||u){if(h&&!u){"single"===p.brushMode&&Vb(c);var m=(0,b.clone)(p);m.brushType=El(m.brushType,h),m.panelId=h===ud?null:h.panelId,u=c._creatingCover=Lm(c,m),c._covers.push(u)}if(u){var y=Gp[El(c._brushType,h)];u.__brushOption.range=y.getCreatingRange(Hp(c,u,c._track)),l&&(HD(c,u),y.updateCommon(c,u)),xL(c,u),v={isEnd:l}}}else l&&"single"===p.brushMode&&p.removeOnClick&&Om(c,s,a)&&Vb(c)&&(v={isEnd:l,removeOnClick:!0});return v}function El(c,s){return"auto"===c?s.defaultBrushType:c}var $D={mousedown:function(c){if(this._dragging)Up(this,c);else if(!c.target||!c.target.draggable){jb(c);var s=this.group.transformCoordToLocal(c.offsetX,c.offsetY);this._creatingCover=null,(this._creatingPanel=Om(this,c,s))&&(this._dragging=!0,this._track=[s.slice()])}},mousemove:function(c){var l=this.group.transformCoordToLocal(c.offsetX,c.offsetY);if(function Wb(c,s,a){if(c._brushType&&!function Al(c,s,a){var l=c._zr;return s<0||s>l.getWidth()||a<0||a>l.getHeight()}(c,s.offsetX,s.offsetY)){var l=c._zr,u=c._covers,h=Om(c,s,a);if(!c._dragging)for(var p=0;p<u.length;p++){var v=u[p].__brushOption;if(h&&(h===ud||v.panelId===h.panelId)&&Gp[v.brushType].contain(u[p],a[0],a[1]))return}h&&l.setCursorStyle("crosshair")}}(this,c,l),this._dragging){jb(c);var u=qe(this,c,l,!1);u&&nl(this,u)}},mouseup:function(c){Up(this,c)}};function Up(c,s){if(c._dragging){jb(s);var u=c.group.transformCoordToLocal(s.offsetX,s.offsetY),h=qe(c,s,u,!0);c._dragging=!1,c._track=[],c._creatingCover=null,h&&nl(c,h)}}var Gp={lineX:KD(0),lineY:KD(1),rect:{createCover:function(c,s){function a(l){return l}return zp({toRectRange:a,fromRectRange:a},c,s,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(c){var s=zb(c);return WD(s[1][0],s[1][1],s[0][0],s[0][1])},updateCoverShape:function(c,s,a,l){GD(c,s,a,l)},updateCommon:km,contain:XD},polygon:{createCover:function(c,s){var a=new Vn.Z;return a.add(new Pt.Z({name:"main",style:Hb(s),silent:!0})),a},getCreatingRange:function(c){return c},endCreating:function(c,s){s.remove(s.childAt(0)),s.add(new Wo.Z({name:"main",draggable:!0,drift:(0,b.curry)(YD,c,s),ondragend:(0,b.curry)(nl,c,{isEnd:!0})}))},updateCoverShape:function(c,s,a,l){s.childAt(0).setShape({points:Hp(c,s,a)})},updateCommon:km,contain:XD}};function KD(c){return{createCover:function(s,a){return zp({toRectRange:function(l){var u=[l,[0,100]];return c&&u.reverse(),u},fromRectRange:function(l){return l[c]}},s,a,[[["w"],["e"]],[["n"],["s"]]][c])},getCreatingRange:function(s){var a=zb(s);return[Vp(a[0][c],a[1][c]),dd(a[0][c],a[1][c])]},updateCoverShape:function(s,a,l,u){var h,p=CL(s,a);if(p!==ud&&p.getLinearBrushOtherExtent)h=p.getLinearBrushOtherExtent(c);else{var v=s._zr;h=[0,[v.getWidth(),v.getHeight()][1-c]]}var m=[l,h];c&&m.reverse(),GD(s,a,m,u)},updateCommon:km,contain:XD}}const Wp=Fb;function rc(c){return c=jp(c),function(s){return Un.clipPointsByRect(s,c)}}function Nm(c,s){return c=jp(c),function(a){var l=s??a,h=l?c.x:c.y;return[h,h+((l?c.width:c.height)||0)]}}function Zb(c,s,a){var l=jp(c);return function(u,h){return l.contain(h[0],h[1])&&!Xu(u,s,a)}}function jp(c){return Pa.Z.create(c)}var W5=["axisLine","axisTickLabel","axisName"];const Yb=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.init=function(a,l){c.prototype.init.apply(this,arguments),(this._brushController=new Wp(l.getZr())).on("brush",b.bind(this._onBrush,this))},s.prototype.render=function(a,l,u,h){if(!function j5(c,s,a){return a&&"axisAreaSelect"===a.type&&s.findComponents({mainType:"parallelAxis",query:a})[0]===c}(a,l,h)){this.axisModel=a,this.api=u,this.group.removeAll();var p=this._axisGroup;if(this._axisGroup=new Vn.Z,this.group.add(this._axisGroup),a.get("show")){var v=function Bm(c,s){return s.getComponent("parallel",c.get("parallelIndex"))}(a,l),m=v.coordinateSystem,y=a.getAreaSelectStyle(),x=y.width,M=m.getAxisLayout(a.axis.dim),E=b.extend({strokeContainThreshold:x},M),R=new ql(a,E);b.each(W5,R.add,R),this._axisGroup.add(R.getGroup()),this._refreshBrushController(E,y,a,v,x,u),Un.groupTransition(p,this._axisGroup,a)}}},s.prototype._refreshBrushController=function(a,l,u,h,p,v){var m=u.axis.getExtent(),y=m[1]-m[0],x=Math.min(30,.1*Math.abs(y)),C=Pa.Z.create({x:m[0],y:-p/2,width:y,height:p});C.x-=x,C.width+=2*x,this._brushController.mount({enableGlobalPan:!0,rotation:a.rotation,x:a.position[0],y:a.position[1]}).setPanels([{panelId:"pl",clipPath:rc(C),isTargetByCursor:Zb(C,v,h),getLinearBrushOtherExtent:Nm(C,0)}]).enableBrush({brushType:"lineX",brushStyle:l,removeOnClick:!0}).updateCovers(function Fm(c){var s=c.axis;return b.map(c.activeIntervals,function(a){return{brushType:"lineX",panelId:"pl",range:[s.dataToCoord(a[0],!0),s.dataToCoord(a[1],!0)]}})}(u))},s.prototype._onBrush=function(a){var u=this.axisModel,h=u.axis,p=b.map(a.areas,function(v){return[h.coordToData(v.range[0],!0),h.coordToData(v.range[1],!0)]});(!u.option.realtime===a.isEnd||a.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:u.id,intervals:p})},s.prototype.dispose=function(){this._brushController.dispose()},s.type="parallelAxis",s}(Ra.Z);var Xb={type:"axisAreaSelect",event:"axisAreaSelected"},Z5={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function qD(c){c.registerComponentView(uL),c.registerComponentModel(Rb),c.registerCoordinateSystem("parallel",xt),c.registerPreprocessor(Ab),c.registerComponentModel(Nb),c.registerComponentView(Yb),Po(c,"parallel",Nb,Z5),function $b(c){c.registerAction(Xb,function(s,a){a.eachComponent({mainType:"parallelAxis",query:s},function(l){l.axis.model.setActiveIntervals(s.intervals)})}),c.registerAction("parallelAxisExpand",function(s,a){a.eachComponent({mainType:"parallel",query:s},function(l){l.setAxisExpand(s)})})}(c)}var TL=function c(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0},EL=function(c){function s(a){return c.call(this,a)||this}return(0,Rt.ZT)(s,c),s.prototype.getDefaultShape=function(){return new TL},s.prototype.buildPath=function(a,l){var u=l.extent;a.moveTo(l.x1,l.y1),a.bezierCurveTo(l.cpx1,l.cpy1,l.cpx2,l.cpy2,l.x2,l.y2),"vertical"===l.orient?(a.lineTo(l.x2+u,l.y2),a.bezierCurveTo(l.cpx2+u,l.cpy2,l.cpx1+u,l.cpy1,l.x1+u,l.y1)):(a.lineTo(l.x2,l.y2+u),a.bezierCurveTo(l.cpx2,l.cpy2+u,l.cpx1,l.cpy1+u,l.x1,l.y1+u)),a.closePath()},s.prototype.highlight=function(){(0,bn.fD)(this)},s.prototype.downplay=function(){(0,bn.Mh)(this)},s}(ye.ZP);function AL(c,s,a){switch(c.fill){case"source":c.fill=a.node1.getVisual("color"),c.decal=a.node1.getVisual("style").decal;break;case"target":c.fill=a.node2.getVisual("color"),c.decal=a.node2.getVisual("style").decal;break;case"gradient":var l=a.node1.getVisual("color"),u=a.node2.getVisual("color");(0,b.isString)(l)&&(0,b.isString)(u)&&(c.fill=new tp.Z(0,0,+("horizontal"===s),+("vertical"===s),[{color:l,offset:0},{color:u,offset:1}]))}}const Y5=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a._focusAdjacencyDisabled=!1,a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u){var h=this,p=a.getGraph(),v=this.group,m=a.layoutInfo,y=m.width,x=m.height,C=a.getData(),M=a.getData("edge"),E=a.get("orient");this._model=a,v.removeAll(),v.x=m.x,v.y=m.y,p.eachEdge(function(R){var F=new EL,U=(0,Fn.A)(F);U.dataIndex=R.dataIndex,U.seriesIndex=a.seriesIndex,U.dataType="edge";var ht,vt,gt,Ot,Gt,Ft,en,Mn,ue=R.getModel(),me=ue.getModel("lineStyle"),ve=me.get("curveness"),Me=R.node1.getLayout(),Ae=R.node1.getModel(),Pe=Ae.get("localX"),Ne=Ae.get("localY"),He=R.node2.getLayout(),Ye=R.node2.getModel(),Qe=Ye.get("localX"),it=Ye.get("localY"),ct=R.getLayout();F.shape.extent=Math.max(1,ct.dy),F.shape.orient=E,"vertical"===E?(Gt=ht=(null!=Pe?Pe*y:Me.x)+ct.sy,Ft=(vt=(null!=Ne?Ne*x:Me.y)+Me.dy)*(1-ve)+(Ot=null!=it?it*x:He.y)*ve,en=gt=(null!=Qe?Qe*y:He.x)+ct.ty,Mn=vt*ve+Ot*(1-ve)):(Gt=(ht=(null!=Pe?Pe*y:Me.x)+Me.dx)*(1-ve)+(gt=null!=Qe?Qe*y:He.x)*ve,Ft=vt=(null!=Ne?Ne*x:Me.y)+ct.sy,en=ht*ve+gt*(1-ve),Mn=Ot=(null!=it?it*x:He.y)+ct.ty),F.setShape({x1:ht,y1:vt,x2:gt,y2:Ot,cpx1:Gt,cpy1:Ft,cpx2:en,cpy2:Mn}),F.useStyle(me.getItemStyle()),AL(F.style,E,R);var Tn=""+ue.get("value"),tr=(0,Bn.k3)(ue,"edgeLabel");(0,Bn.ni)(F,tr,{labelFetcher:{getFormattedLabel:function(jr,pi,ni,or,gi,bi){return a.getFormattedLabel(jr,pi,"edge",or,(0,b.retrieve3)(gi,tr.normal&&tr.normal.get("formatter"),Tn),bi)}},labelDataIndex:R.dataIndex,defaultText:Tn}),F.setTextConfig({position:"inside"});var _r=ue.getModel("emphasis");(0,bn.WO)(F,ue,"lineStyle",function(jr){var pi=jr.getItemStyle();return AL(pi,E,R),pi}),v.add(F),M.setItemGraphicEl(R.dataIndex,F);var hr=_r.get("focus");(0,bn.k5)(F,"adjacency"===hr?R.getAdjacentDataIndices():"trajectory"===hr?R.getTrajectoryDataIndices():hr,_r.get("blurScope"),_r.get("disabled"))}),p.eachNode(function(R){var F=R.getLayout(),U=R.getModel(),ue=U.get("localX"),me=U.get("localY"),ve=U.getModel("emphasis"),Me=U.get(["itemStyle","borderRadius"])||0,Ae=new Jt.Z({shape:{x:null!=ue?ue*y:F.x,y:null!=me?me*x:F.y,width:F.dx,height:F.dy,r:Me},style:U.getModel("itemStyle").getItemStyle(),z2:10});(0,Bn.ni)(Ae,(0,Bn.k3)(U),{labelFetcher:{getFormattedLabel:function(Ne,He){return a.getFormattedLabel(Ne,He,"node")}},labelDataIndex:R.dataIndex,defaultText:R.id}),Ae.disableLabelAnimation=!0,Ae.setStyle("fill",R.getVisual("color")),Ae.setStyle("decal",R.getVisual("style").decal),(0,bn.WO)(Ae,U),v.add(Ae),C.setItemGraphicEl(R.dataIndex,Ae),(0,Fn.A)(Ae).dataType="node";var Pe=ve.get("focus");(0,bn.k5)(Ae,"adjacency"===Pe?R.getAdjacentDataIndices():"trajectory"===Pe?R.getTrajectoryDataIndices():Pe,ve.get("blurScope"),ve.get("disabled"))}),C.eachItemGraphicEl(function(R,F){C.getItemModel(F).get("draggable")&&(R.drift=function(ue,me){h._focusAdjacencyDisabled=!0,this.shape.x+=ue,this.shape.y+=me,this.dirty(),u.dispatchAction({type:"dragNode",seriesId:a.id,dataIndex:C.getRawIndex(F),localX:this.shape.x/y,localY:this.shape.y/x})},R.ondragend=function(){h._focusAdjacencyDisabled=!1},R.draggable=!0,R.cursor="move")}),!this._data&&a.isAnimationEnabled()&&v.setClipPath(function IL(c,s,a){var l=new Jt.Z({shape:{x:c.x-10,y:c.y-10,width:0,height:c.height+20}});return on.KZ(l,{shape:{width:c.width+20}},s,a),l}(v.getBoundingRect(),a,function(){v.removeClipPath()})),this._data=a.getData()},s.prototype.dispose=function(){},s.type="sankey",s}(na.Z),tM=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.getInitialData=function(a,l){var u=a.edges||a.links,h=a.data||a.nodes,p=a.levels;this.levelModels=[];for(var v=this.levelModels,m=0;m<p.length;m++)null!=p[m].depth&&p[m].depth>=0&&(v[p[m].depth]=new ki.Z(p[m],this,l));if(h&&u)return xb(h,u,this,!0,function x(C,M){C.wrapMethod("getItemModel",function(E,R){var F=E.parentModel,U=F.getData().getItemLayout(R);if(U){var me=F.levelModels[U.depth];me&&(E.parentModel=me)}return E}),M.wrapMethod("getItemModel",function(E,R){var F=E.parentModel,ue=F.getGraph().getEdgeByIndex(R).node1.getLayout();if(ue){var ve=F.levelModels[ue.depth];ve&&(E.parentModel=ve)}return E})}).data},s.prototype.setNodePosition=function(a,l){var h=(this.option.data||this.option.nodes)[a];h.localX=l[0],h.localY=l[1]},s.prototype.getGraph=function(){return this.getData().graph},s.prototype.getEdgeData=function(){return this.getGraph().edgeData},s.prototype.formatTooltip=function(a,l,u){function h(E){return isNaN(E)||null==E}if("edge"===u){var p=this.getDataParams(a,u),v=p.data,m=p.value;return(0,Ui.TX)("nameValue",{name:v.source+" -- "+v.target,value:m,noValue:h(m)})}var C=this.getGraph().getNodeByIndex(a).getLayout().value,M=this.getDataParams(a,u).data.name;return(0,Ui.TX)("nameValue",{name:null!=M?M+"":null,value:C,noValue:h(C)})},s.prototype.optionUpdated=function(){},s.prototype.getDataParams=function(a,l){var u=c.prototype.getDataParams.call(this,a,l);if(null==u.value&&"node"===l){var p=this.getGraph().getNodeByIndex(a).getLayout().value;u.value=p}return u},s.type="series.sankey",s.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},s}(zi.Z);function PL(c,s){c.eachSeriesByType("sankey",function(a){var l=a.get("nodeWidth"),u=a.get("nodeGap"),h=function Kb(c,s){return Oe.ME(c.getBoxLayoutParams(),{width:s.getWidth(),height:s.getHeight()})}(a,s);a.layoutInfo=h;var p=h.width,v=h.height,m=a.getGraph(),y=m.nodes,x=m.edges;!function $5(c){b.each(c,function(s){var a=is(s.outEdges,Vm),l=is(s.inEdges,Vm),u=s.getValue()||0,h=Math.max(a,l,u);s.setLayout({value:h},!0)})}(y),function X5(c,s,a,l,u,h,p,v,m){(function K5(c,s,a,l,u,h,p){for(var v=[],m=[],y=[],x=[],C=0,M=0;M<s.length;M++)v[M]=1;for(M=0;M<c.length;M++)m[M]=c[M].inEdges.length,0===m[M]&&y.push(c[M]);for(var E=-1;y.length;){for(var R=0;R<y.length;R++){var F=y[R],U=F.hostGraph.data.getRawDataItem(F.dataIndex),ue=null!=U.depth&&U.depth>=0;ue&&U.depth>E&&(E=U.depth),F.setLayout({depth:ue?U.depth:C},!0),F.setLayout("vertical"===h?{dy:a}:{dx:a},!0);for(var me=0;me<F.outEdges.length;me++){var ve=F.outEdges[me];v[s.indexOf(ve)]=0;var Ae=ve.node2;0==--m[c.indexOf(Ae)]&&x.indexOf(Ae)<0&&x.push(Ae)}}++C,y=x,x=[]}for(M=0;M<v.length;M++)if(1===v[M])throw new Error("Sankey is a DAG, the original data has cycle!");var Ne=E>C-1?E:C-1;p&&"left"!==p&&function Q5(c,s,a,l){if("right"===s){for(var u=[],h=c,p=0;h.length;){for(var v=0;v<h.length;v++){var m=h[v];m.setLayout({skNodeHeight:p},!0);for(var y=0;y<m.inEdges.length;y++){var x=m.inEdges[y];u.indexOf(x.node1)<0&&u.push(x.node1)}}h=u,u=[],++p}b.each(c,function(C){RL(C)||C.setLayout({depth:Math.max(0,l-C.getLayout().skNodeHeight)},!0)})}else"justify"===s&&function q5(c,s){b.each(c,function(a){!RL(a)&&!a.outEdges.length&&a.setLayout({depth:s},!0)})}(c,l)}(c,p,0,Ne),function J5(c,s,a){b.each(c,function(l){var u=l.getLayout().depth*s;l.setLayout("vertical"===a?{y:u}:{x:u},!0)})}(c,"vertical"===h?(u-a)/Ne:(l-a)/Ne,h)})(c,s,a,u,h,v,m),function e4(c,s,a,l,u,h,p){var v=function t4(c,s){var a=[],l="vertical"===s?"y":"x",u=(0,An.pv)(c,function(h){return h.getLayout()[l]});return u.keys.sort(function(h,p){return h-p}),b.each(u.keys,function(h){a.push(u.buckets.get(h))}),a}(c,p);(function n4(c,s,a,l,u,h){var p=1/0;b.each(c,function(v){var m=v.length,y=0;b.each(v,function(C){y+=C.getLayout().value});var x="vertical"===h?(l-(m-1)*u)/y:(a-(m-1)*u)/y;x<p&&(p=x)}),b.each(c,function(v){b.each(v,function(m,y){var x=m.getLayout().value*p;"vertical"===h?(m.setLayout({x:y},!0),m.setLayout({dx:x},!0)):(m.setLayout({y},!0),m.setLayout({dy:x},!0))})}),b.each(s,function(v){var m=+v.getValue()*p;v.setLayout({dy:m},!0)})})(v,s,a,l,u,p),ic(v,u,a,l,p);for(var m=1;h>0;h--)Qb(v,m*=.99,p),ic(v,u,a,l,p),iM(v,m,p),ic(v,u,a,l,p)}(c,s,h,u,l,p,v),function OL(c,s){var a="vertical"===s?"x":"y";b.each(c,function(l){l.outEdges.sort(function(u,h){return u.node2.getLayout()[a]-h.node2.getLayout()[a]}),l.inEdges.sort(function(u,h){return u.node1.getLayout()[a]-h.node1.getLayout()[a]})}),b.each(c,function(l){var u=0,h=0;b.each(l.outEdges,function(p){p.setLayout({sy:u},!0),u+=p.getLayout().dy}),b.each(l.inEdges,function(p){p.setLayout({ty:h},!0),h+=p.getLayout().dy})})}(c,v)}(y,x,l,u,p,v,0!==b.filter(y,function(F){return 0===F.getLayout().value}).length?0:a.get("layoutIterations"),a.get("orient"),a.get("nodeAlign"))})}function RL(c){var s=c.hostGraph.data.getRawDataItem(c.dataIndex);return null!=s.depth&&s.depth>=0}function ic(c,s,a,l,u){var h="vertical"===u?"x":"y";b.each(c,function(p){p.sort(function(F,U){return F.getLayout()[h]-U.getLayout()[h]});for(var v,m,y,x=0,C=p.length,M="vertical"===u?"dx":"dy",E=0;E<C;E++)(y=x-(m=p[E]).getLayout()[h])>0&&(v=m.getLayout()[h]+y,m.setLayout("vertical"===u?{x:v}:{y:v},!0)),x=m.getLayout()[h]+m.getLayout()[M]+s;if((y=x-s-("vertical"===u?l:a))>0)for(v=m.getLayout()[h]-y,m.setLayout("vertical"===u?{x:v}:{y:v},!0),x=v,E=C-2;E>=0;--E)(y=(m=p[E]).getLayout()[h]+m.getLayout()[M]+s-x)>0&&(v=m.getLayout()[h]-y,m.setLayout("vertical"===u?{x:v}:{y:v},!0)),x=m.getLayout()[h]})}function Qb(c,s,a){b.each(c.slice().reverse(),function(l){b.each(l,function(u){if(u.outEdges.length){var h=is(u.outEdges,LL,a)/is(u.outEdges,Vm);if(isNaN(h)){var p=u.outEdges.length;h=p?is(u.outEdges,nM,a)/p:0}if("vertical"===a){var v=u.getLayout().x+(h-ac(u,a))*s;u.setLayout({x:v},!0)}else{var m=u.getLayout().y+(h-ac(u,a))*s;u.setLayout({y:m},!0)}}})})}function LL(c,s){return ac(c.node2,s)*c.getValue()}function nM(c,s){return ac(c.node2,s)}function qb(c,s){return ac(c.node1,s)*c.getValue()}function rM(c,s){return ac(c.node1,s)}function ac(c,s){return"vertical"===s?c.getLayout().x+c.getLayout().dx/2:c.getLayout().y+c.getLayout().dy/2}function Vm(c){return c.getValue()}function is(c,s,a){for(var l=0,u=c.length,h=-1;++h<u;){var p=+s(c[h],a);isNaN(p)||(l+=p)}return l}function iM(c,s,a){b.each(c,function(l){b.each(l,function(u){if(u.inEdges.length){var h=is(u.inEdges,qb,a)/is(u.inEdges,Vm);if(isNaN(h)){var p=u.inEdges.length;h=p?is(u.inEdges,rM,a)/p:0}if("vertical"===a){var v=u.getLayout().x+(h-ac(u,a))*s;u.setLayout({x:v},!0)}else{var m=u.getLayout().y+(h-ac(u,a))*s;u.setLayout({y:m},!0)}}})})}function kL(c){c.eachSeriesByType("sankey",function(s){var a=s.getGraph(),l=a.nodes,u=a.edges;if(l.length){var h=1/0,p=-1/0;b.each(l,function(v){var m=v.getLayout().value;m<h&&(h=m),m>p&&(p=m)}),b.each(l,function(v){var y=new sa({type:"color",mappingMethod:"linear",dataExtent:[h,p],visual:s.get("color")}).mapValueToVisual(v.getLayout().value),x=v.getModel().get(["itemStyle","color"]);null!=x?(v.setVisual("color",x),v.setVisual("style",{fill:x})):(v.setVisual("color",y),v.setVisual("style",{fill:y}))})}u.length&&b.each(u,function(v){var m=v.getModel().get("lineStyle");v.setVisual("style",m)})})}var Jb=z(5618),oM=function(){function c(){}return c.prototype.getInitialData=function(s,a){var l,m,u=a.getComponent("xAxis",this.get("xAxisIndex")),h=a.getComponent("yAxis",this.get("yAxisIndex")),p=u.get("type"),v=h.get("type");"category"===p?(s.layout="horizontal",l=u.getOrdinalMeta(),m=!0):"category"===v?(s.layout="vertical",l=h.getOrdinalMeta(),m=!0):s.layout=s.layout||"horizontal";var y=["x","y"],x="horizontal"===s.layout?0:1,C=this._baseAxisDim=y[x],M=y[1-x],E=[u,h],R=E[x].get("type"),F=E[1-x].get("type"),U=s.data;if(U&&m){var ue=[];b.each(U,function(Me,Ae){var Pe;b.isArray(Me)?(Pe=Me.slice(),Me.unshift(Ae)):b.isArray(Me.value)?((Pe=b.extend({},Me)).value=Pe.value.slice(),Me.value.unshift(Ae)):Pe=Me,ue.push(Pe)}),s.data=ue}var me=this.defaultValueDimensions,ve=[{name:C,type:(0,Jb.T)(R),ordinalMeta:l,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:M,type:(0,Jb.T)(F),dimsDef:me.slice()}];return _i(this,{coordDimensions:ve,dimensionsCount:me.length+1,encodeDefaulter:b.curry(za.pY,ve,this)})},c.prototype.getBaseAxis=function(){var s=this._baseAxisDim;return this.ecModel.getComponent(s+"Axis",this.get(s+"AxisIndex")).axis},c}(),Zp=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],a.visualDrawType="stroke",a}return(0,Rt.ZT)(s,c),s.type="series.boxplot",s.dependencies=["xAxis","yAxis","grid"],s.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},s}(zi.Z);(0,b.mixin)(Zp,oM,!0);const Xh=Zp;var ex=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u){var h=a.getData(),p=this.group,v=this._data;this._data||p.removeAll();var m="horizontal"===a.get("layout")?1:0;h.diff(v).add(function(y){if(h.hasValue(y)){var C=Yp(h.getItemLayout(y),h,y,m,!0);h.setItemGraphicEl(y,C),p.add(C)}}).update(function(y,x){var C=v.getItemGraphicEl(x);if(h.hasValue(y)){var M=h.getItemLayout(y);C?((0,on.Zi)(C),nx(M,C,h,y)):C=Yp(M,h,y,m),p.add(C),h.setItemGraphicEl(y,C)}else p.remove(C)}).remove(function(y){var x=v.getItemGraphicEl(y);x&&p.remove(x)}).execute(),this._data=h},s.prototype.remove=function(a){var l=this.group,u=this._data;this._data=null,u&&u.eachItemGraphicEl(function(h){h&&l.remove(h)})},s.type="boxplot",s}(na.Z),$h=function c(){},tx=function(c){function s(a){var l=c.call(this,a)||this;return l.type="boxplotBoxPath",l}return(0,Rt.ZT)(s,c),s.prototype.getDefaultShape=function(){return new $h},s.prototype.buildPath=function(a,l){var u=l.points,h=0;for(a.moveTo(u[h][0],u[h][1]),h++;h<4;h++)a.lineTo(u[h][0],u[h][1]);for(a.closePath();h<u.length;h++)a.moveTo(u[h][0],u[h][1]),h++,a.lineTo(u[h][0],u[h][1])},s}(ye.ZP);function Yp(c,s,a,l,u){var h=c.ends,p=new tx({shape:{points:u?sM(h,l,c):h}});return nx(c,p,s,a,u),p}function nx(c,s,a,l,u){(0,Un[u?"initProps":"updateProps"])(s,{shape:{points:c.ends}},a.hostModel,l),s.useStyle(a.getItemVisual(l,"style")),s.style.strokeNoScale=!0,s.z2=100;var v=a.getItemModel(l),m=v.getModel("emphasis");(0,bn.WO)(s,v),(0,bn.k5)(s,m.get("focus"),m.get("blurScope"),m.get("disabled"))}function sM(c,s,a){return b.map(c,function(l){return(l=l.slice())[s]=a.initBaseline,l})}const rx=ex;var hd=b.each;function lM(c){var s=function ix(c){var s=[],a=[];return c.eachSeriesByType("boxplot",function(l){var u=l.getBaseAxis(),h=b.indexOf(a,u);h<0&&(a[h=a.length]=u,s[h]={axis:u,seriesModels:[]}),s[h].seriesModels.push(l)}),s}(c);hd(s,function(a){var l=a.seriesModels;!l.length||(function NL(c){var v,s=c.axis,a=c.seriesModels,l=a.length,u=c.boxWidthList=[],h=c.boxOffsetList=[],p=[];if("category"===s.type)v=s.getBandWidth();else{var m=0;hd(a,function(R){m=Math.max(m,R.getData().count())});var y=s.getExtent();v=Math.abs(y[1]-y[0])/m}hd(a,function(R){var F=R.get("boxWidth");b.isArray(F)||(F=[F,F]),p.push([(0,ft.GM)(F[0],v)||0,(0,ft.GM)(F[1],v)||0])});var x=.8*v-2,C=x/l*.3,M=(x-C*(l-1))/l,E=M/2-x/2;hd(a,function(R,F){h.push(E),E+=C+M,u.push(Math.min(Math.max(M,p[F][0]),p[F][1]))})}(a),hd(l,function(u,h){!function r4(c,s,a){var l=c.coordinateSystem,u=c.getData(),h=a/2,p="horizontal"===c.get("layout")?0:1,v=1-p,m=["x","y"],y=u.mapDimension(m[p]),x=u.mapDimensionsAll(m[v]);if(!(null==y||x.length<5))for(var C=0;C<u.count();C++){var M=u.get(y,C),E=ve(M,x[2],C),R=ve(M,x[0],C),F=ve(M,x[1],C),U=ve(M,x[3],C),ue=ve(M,x[4],C),me=[];Me(me,F,!1),Me(me,U,!0),me.push(R,F,ue,U),Ae(me,R),Ae(me,ue),Ae(me,E),u.setItemLayout(C,{initBaseline:E[v],ends:me})}function ve(Pe,Ne,He){var it,Ye=u.get(Ne,He),Qe=[];return Qe[p]=Pe,Qe[v]=Ye,isNaN(Pe)||isNaN(Ye)?it=[NaN,NaN]:(it=l.dataToPoint(Qe))[p]+=s,it}function Me(Pe,Ne,He){var Ye=Ne.slice(),Qe=Ne.slice();Ye[p]+=h,Qe[p]-=h,He?Pe.push(Ye,Qe):Pe.push(Qe,Ye)}function Ae(Pe,Ne){var He=Ne.slice(),Ye=Ne.slice();He[p]-=h,Ye[p]+=h,Pe.push(He,Ye)}}(u,a.boxOffsetList[h],a.boxWidthList[h])}))})}var la=z(6420),ax=z(678),cM={type:"echarts:boxplot",transform:function(s){var a=s.upstream;a.sourceFormat!==ax.XD&&(0,la._y)("");var u=function FL(c,s){for(var a=[],l=[],u=(s=s||{}).boundIQR,h="none"===u||0===u,p=0;p<c.length;p++){var v=(0,ft.dt)(c[p].slice()),m=(0,ft.VR)(v,.25),y=(0,ft.VR)(v,.5),x=(0,ft.VR)(v,.75),C=v[0],M=v[v.length-1],E=(u??1.5)*(x-m),R=h?C:Math.max(C,m-E),F=h?M:Math.min(M,x+E),U=s.itemNameFormatter,ue=(0,b.isFunction)(U)?U({value:p}):(0,b.isString)(U)?U.replace("{value}",p+""):p+"";a.push([ue,R,m,y,x,F]);for(var me=0;me<v.length;me++){var ve=v[me];(ve<R||ve>F)&&l.push([ue,ve])}}return{boxData:a,outliers:l}}(a.getRawData(),s.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:u.boxData},{data:u.outliers}]}},BL=["color","borderColor"],Ns=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(a),this._isLargeDraw?this._renderLarge(a):this._renderNormal(a)},s.prototype.incrementalPrepareRender=function(a,l,u){this._clear(),this._updateDrawMode(a)},s.prototype.incrementalRender=function(a,l,u,h){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(a,l):this._incrementalRenderNormal(a,l)},s.prototype.eachRendered=function(a){Un.traverseElements(this._progressiveEls||this.group,a)},s.prototype._updateDrawMode=function(a){var l=a.pipelineContext.large;(null==this._isLargeDraw||l!==this._isLargeDraw)&&(this._isLargeDraw=l,this._clear())},s.prototype._renderNormal=function(a){var l=a.getData(),u=this._data,h=this.group,p=l.getLayout("isSimpleBox"),v=a.get("clip",!0),m=a.coordinateSystem,y=m.getArea&&m.getArea();this._data||h.removeAll(),l.diff(u).add(function(x){if(l.hasValue(x)){var C=l.getItemLayout(x);if(v&&fM(y,C))return;var M=hM(C,0,!0);on.KZ(M,{shape:{points:C.ends}},a,x),Xp(M,l,x,p),h.add(M),l.setItemGraphicEl(x,M)}}).update(function(x,C){var M=u.getItemGraphicEl(C);if(l.hasValue(x)){var E=l.getItemLayout(x);v&&fM(y,E)?h.remove(M):(M?(on.D(M,{shape:{points:E.ends}},a,x),(0,on.Zi)(M)):M=hM(E),Xp(M,l,x,p),h.add(M),l.setItemGraphicEl(x,M))}else h.remove(M)}).remove(function(x){var C=u.getItemGraphicEl(x);C&&h.remove(C)}).execute(),this._data=l},s.prototype._renderLarge=function(a){this._clear(),gM(a,this.group);var l=a.get("clip",!0)?Rc(a.coordinateSystem,!1,a):null;l?this.group.setClipPath(l):this.group.removeClipPath()},s.prototype._incrementalRenderNormal=function(a,l){for(var p,u=l.getData(),h=u.getLayout("isSimpleBox");null!=(p=a.next());){var m=hM(u.getItemLayout(p));Xp(m,u,p,h),m.incremental=!0,this.group.add(m),this._progressiveEls.push(m)}},s.prototype._incrementalRenderLarge=function(a,l){gM(l,this.group,this._progressiveEls,!0)},s.prototype.remove=function(a){this._clear()},s.prototype._clear=function(){this.group.removeAll(),this._data=null},s.type="candlestick",s}(na.Z),dM=function c(){},VL=function(c){function s(a){var l=c.call(this,a)||this;return l.type="normalCandlestickBox",l}return(0,Rt.ZT)(s,c),s.prototype.getDefaultShape=function(){return new dM},s.prototype.buildPath=function(a,l){var u=l.points;this.__simpleBox?(a.moveTo(u[4][0],u[4][1]),a.lineTo(u[6][0],u[6][1])):(a.moveTo(u[0][0],u[0][1]),a.lineTo(u[1][0],u[1][1]),a.lineTo(u[2][0],u[2][1]),a.lineTo(u[3][0],u[3][1]),a.closePath(),a.moveTo(u[4][0],u[4][1]),a.lineTo(u[5][0],u[5][1]),a.moveTo(u[6][0],u[6][1]),a.lineTo(u[7][0],u[7][1]))},s}(ye.ZP);function hM(c,s,a){var l=c.ends;return new VL({shape:{points:a?pM(l,c):l},z2:100})}function fM(c,s){for(var a=!0,l=0;l<s.ends.length;l++)if(c.contain(s.ends[l][0],s.ends[l][1])){a=!1;break}return a}function Xp(c,s,a,l){var u=s.getItemModel(a);c.useStyle(s.getItemVisual(a,"style")),c.style.strokeNoScale=!0,c.__simpleBox=l,(0,bn.WO)(c,u)}function pM(c,s){return b.map(c,function(a){return(a=a.slice())[1]=s.initBaseline,a})}var zL=function c(){},ox=function(c){function s(a){var l=c.call(this,a)||this;return l.type="largeCandlestickBox",l}return(0,Rt.ZT)(s,c),s.prototype.getDefaultShape=function(){return new zL},s.prototype.buildPath=function(a,l){for(var u=l.points,h=0;h<u.length;)if(this.__sign===u[h++]){var p=u[h++];a.moveTo(p,u[h++]),a.lineTo(p,u[h++])}else h+=3},s}(ye.ZP);function gM(c,s,a,l){var u=c.getData(),h=u.getLayout("largePoints"),p=new ox({shape:{points:h},__sign:1,ignoreCoarsePointer:!0});s.add(p);var v=new ox({shape:{points:h},__sign:-1,ignoreCoarsePointer:!0});s.add(v);var m=new ox({shape:{points:h},__sign:0,ignoreCoarsePointer:!0});s.add(m),zm(1,p,c),zm(-1,v,c),zm(0,m,c),l&&(p.incremental=!0,v.incremental=!0),a&&a.push(p,v)}function zm(c,s,a,l){var u=a.get(["itemStyle",c>0?"borderColor":"borderColor0"])||a.get(["itemStyle",c>0?"color":"color0"]);0===c&&(u=a.get(["itemStyle","borderColorDoji"]));var h=a.getModel("itemStyle").getItemStyle(BL);s.useStyle(h),s.style.fill=null,s.style.stroke=u}const HL=Ns;var sx=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],a}return(0,Rt.ZT)(s,c),s.prototype.getShadowDim=function(){return"open"},s.prototype.brushSelector=function(a,l,u){var h=l.getItemLayout(a);return h&&u.rect(h.brushRect)},s.type="series.candlestick",s.dependencies=["xAxis","yAxis","grid"],s.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},s}(zi.Z);(0,b.mixin)(sx,oM,!0);const UL=sx;function GL(c){!c||!b.isArray(c.series)||b.each(c.series,function(s){b.isObject(s)&&"k"===s.type&&(s.type="candlestick")})}var vM=["itemStyle","borderColor"],mM=["itemStyle","borderColor0"],WL=["itemStyle","borderColorDoji"],oc=["itemStyle","color"],lx=["itemStyle","color0"];const ZL={seriesType:"candlestick",plan:(0,qs.Z)(),performRawSeries:!0,reset:function(c,s){function a(h,p){return p.get(h>0?oc:lx)}function l(h,p){return p.get(0===h?WL:h>0?vM:mM)}if(!s.isSeriesFiltered(c))return!c.pipelineContext.large&&{progress:function(h,p){for(var v;null!=(v=h.next());){var m=p.getItemModel(v),y=p.getItemLayout(v).sign,x=m.getItemStyle();x.fill=a(y,m),x.stroke=l(y,m)||x.fill;var C=p.ensureUniqueItemVisual(v,"style");(0,b.extend)(C,x)}}}}};function cx(c,s,a,l,u,h){return a>l?-1:a<l?1:h?0:s>0?c.get(u,s-1)<=l?1:-1:1}const XL={seriesType:"candlestick",plan:(0,qs.Z)(),reset:function(c){var s=c.coordinateSystem,a=c.getData(),l=function YL(c,s){var l,a=c.getBaseAxis(),u="category"===a.type?a.getBandWidth():(l=a.getExtent(),Math.abs(l[1]-l[0])/s.count()),h=(0,ft.GM)((0,b.retrieve2)(c.get("barMaxWidth"),u),u),p=(0,ft.GM)((0,b.retrieve2)(c.get("barMinWidth"),1),u),v=c.get("barWidth");return null!=v?(0,ft.GM)(v,u):Math.max(Math.min(u/2,h),p)}(c,a),p=["x","y"],v=a.getDimensionIndex(a.mapDimension(p[0])),m=(0,b.map)(a.mapDimensionsAll(p[1]),a.getDimensionIndex,a),y=m[0],x=m[1],C=m[2],M=m[3];if(a.setLayout({candleWidth:l,isSimpleBox:l<=1.3}),!(v<0||m.length<4))return{progress:c.pipelineContext.large?function R(F,U){for(var ve,Pe,ue=(0,uu.o)(4*F.count),me=0,Me=[],Ae=[],Ne=U.getStore(),He=!!c.get(["itemStyle","borderColorDoji"]);null!=(Pe=F.next());){var Ye=Ne.get(v,Pe),Qe=Ne.get(y,Pe),it=Ne.get(x,Pe),ct=Ne.get(C,Pe),ht=Ne.get(M,Pe);isNaN(Ye)||isNaN(ct)||isNaN(ht)?(ue[me++]=NaN,me+=3):(ue[me++]=cx(Ne,Pe,Qe,it,x,He),Me[0]=Ye,Me[1]=ct,ve=s.dataToPoint(Me,null,Ae),ue[me++]=ve?ve[0]:NaN,ue[me++]=ve?ve[1]:NaN,Me[1]=ht,ve=s.dataToPoint(Me,null,Ae),ue[me++]=ve?ve[1]:NaN)}U.setLayout("largePoints",ue)}:function E(F,U){for(var ue,me=U.getStore();null!=(ue=F.next());){var ve=me.get(v,ue),Me=me.get(y,ue),Ae=me.get(x,ue),Pe=me.get(C,ue),Ne=me.get(M,ue),He=Math.min(Me,Ae),Ye=Math.max(Me,Ae),Qe=Gt(He,ve),it=Gt(Ye,ve),ct=Gt(Pe,ve),ht=Gt(Ne,ve),vt=[];Ft(vt,it,0),Ft(vt,Qe,1),vt.push(Mn(ht),Mn(it),Mn(ct),Mn(Qe));var Ot=!!U.getItemModel(ue).get(["itemStyle","borderColorDoji"]);U.setItemLayout(ue,{sign:cx(me,ue,Me,Ae,x,Ot),initBaseline:Me>Ae?it[1]:Qe[1],ends:vt,brushRect:(Tn=Pe,tr=Ne,_r=ve,hr=void 0,jr=void 0,hr=Gt(Tn,_r),jr=Gt(tr,_r),hr[0]-=l/2,jr[0]-=l/2,{x:hr[0],y:hr[1],width:l,height:jr[1]-hr[1]})})}var Tn,tr,_r,hr,jr;function Gt(Tn,tr){var _r=[];return _r[0]=tr,_r[1]=Tn,isNaN(tr)||isNaN(Tn)?[NaN,NaN]:s.dataToPoint(_r)}function Ft(Tn,tr,_r){var hr=tr.slice(),jr=tr.slice();hr[0]=(0,Un.subPixelOptimize)(hr[0]+l/2,1,!1),jr[0]=(0,Un.subPixelOptimize)(jr[0]-l/2,1,!0),_r?Tn.push(hr,jr):Tn.push(jr,hr)}function Mn(Tn){return Tn[0]=(0,Un.subPixelOptimize)(Tn[0],1),Tn}}}}};function Hm(c,s){var a=s.rippleEffectColor||s.color;c.eachChild(function(l){l.attr({z:s.z,zlevel:s.zlevel,style:{stroke:"stroke"===s.brushType?a:null,fill:"fill"===s.brushType?a:null}})})}const QL=function(c){function s(a,l){var u=c.call(this)||this,h=new Ks(a,l),p=new Vn.Z;return u.add(h),u.add(p),u.updateData(a,l),u}return(0,Rt.ZT)(s,c),s.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},s.prototype.startEffectAnimation=function(a){for(var l=a.symbolType,u=a.color,h=a.rippleNumber,p=this.childAt(1),v=0;v<h;v++){var m=(0,dr.th)(l,-1,-1,2,2,u);m.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var y=-v/h*a.period+a.effectOffset;m.animate("",!0).when(a.period,{scaleX:a.rippleScale/2,scaleY:a.rippleScale/2}).delay(y).start(),m.animateStyle(!0).when(a.period,{opacity:0}).delay(y).start(),p.add(m)}Hm(p,a)},s.prototype.updateEffectAnimation=function(a){for(var l=this._effectCfg,u=this.childAt(1),h=["symbolType","period","rippleScale","rippleNumber"],p=0;p<h.length;p++){var v=h[p];if(l[v]!==a[v])return this.stopEffectAnimation(),void this.startEffectAnimation(a)}Hm(u,a)},s.prototype.highlight=function(){(0,bn.fD)(this)},s.prototype.downplay=function(){(0,bn.Mh)(this)},s.prototype.getSymbolType=function(){var a=this.childAt(0);return a&&a.getSymbolType()},s.prototype.updateData=function(a,l){var u=this,h=a.hostModel;this.childAt(0).updateData(a,l);var p=this.childAt(1),v=a.getItemModel(l),m=a.getItemVisual(l,"symbol"),y=(0,dr.zp)(a.getItemVisual(l,"symbolSize")),x=a.getItemVisual(l,"style"),C=x&&x.fill,M=v.getModel("emphasis");p.setScale(y),p.traverse(function(U){U.setStyle("fill",C)});var E=(0,dr.Cq)(a.getItemVisual(l,"symbolOffset"),y);E&&(p.x=E[0],p.y=E[1]);var R=a.getItemVisual(l,"symbolRotate");p.rotation=(R||0)*Math.PI/180||0;var F={};F.showEffectOn=h.get("showEffectOn"),F.rippleScale=v.get(["rippleEffect","scale"]),F.brushType=v.get(["rippleEffect","brushType"]),F.period=1e3*v.get(["rippleEffect","period"]),F.effectOffset=l/a.count(),F.z=h.getShallow("z")||0,F.zlevel=h.getShallow("zlevel")||0,F.symbolType=m,F.color=C,F.rippleEffectColor=v.get(["rippleEffect","color"]),F.rippleNumber=v.get(["rippleEffect","number"]),"render"===F.showEffectOn?(this._effectCfg?this.updateEffectAnimation(F):this.startEffectAnimation(F),this._effectCfg=F):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(U){"emphasis"===U?"render"!==F.showEffectOn&&u.startEffectAnimation(F):"normal"===U&&"render"!==F.showEffectOn&&u.stopEffectAnimation()}),this._effectCfg=F,(0,bn.k5)(this,M.get("focus"),M.get("blurScope"),M.get("disabled"))},s.prototype.fadeOut=function(a){a&&a()},s}(Vn.Z),ux=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.init=function(){this._symbolDraw=new Do(QL)},s.prototype.render=function(a,l,u){var h=a.getData(),p=this._symbolDraw;p.updateData(h,{clipShape:this._getClipShape(a)}),this.group.add(p.group)},s.prototype._getClipShape=function(a){var l=a.coordinateSystem,u=l&&l.getArea&&l.getArea();return a.get("clip",!0)?u:null},s.prototype.updateTransform=function(a,l,u){var h=a.getData();this.group.dirty();var p=ti("").reset(a,l,u);p.progress&&p.progress({start:0,end:h.count(),count:h.count()},h),this._symbolDraw.updateLayout()},s.prototype._updateGroupTransform=function(a){var l=a.coordinateSystem;l&&l.getRoamTransform&&(this.group.transform=Hr.clone(l.getRoamTransform()),this.group.decomposeTransform())},s.prototype.remove=function(a,l){this._symbolDraw&&this._symbolDraw.remove(!0)},s.type="effectScatter",s}(na.Z),a4=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.hasSymbolVisual=!0,a}return(0,Rt.ZT)(s,c),s.prototype.getInitialData=function(a,l){return(0,ta.Z)(null,this,{useEncodeDefaulter:!0})},s.prototype.brushSelector=function(a,l,u){return u.point(l.getItemLayout(a))},s.type="series.effectScatter",s.dependencies=["grid","polar"],s.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},s}(zi.Z),hx=function(c){function s(a,l,u){var h=c.call(this)||this;return h.add(h.createLine(a,l,u)),h._updateEffectSymbol(a,l),h}return(0,Rt.ZT)(s,c),s.prototype.createLine=function(a,l,u){return new Tm(a,l,u)},s.prototype._updateEffectSymbol=function(a,l){var h=a.getItemModel(l).getModel("effect"),p=h.get("symbolSize"),v=h.get("symbol");b.isArray(p)||(p=[p,p]);var m=a.getItemVisual(l,"style"),y=h.get("color")||m&&m.stroke,x=this.childAt(1);this._symbolType!==v&&(this.remove(x),(x=(0,dr.th)(v,-.5,-.5,1,1,y)).z2=100,x.culling=!0,this.add(x)),x&&(x.setStyle("shadowColor",y),x.setStyle(h.getItemStyle(["color"])),x.scaleX=p[0],x.scaleY=p[1],x.setColor(y),this._symbolType=v,this._symbolScale=p,this._updateEffectAnimation(a,h,l))},s.prototype._updateEffectAnimation=function(a,l,u){var h=this.childAt(1);if(h){var p=a.getItemLayout(u),v=1e3*l.get("period"),m=l.get("loop"),y=l.get("roundTrip"),x=l.get("constantSpeed"),C=b.retrieve(l.get("delay"),function(E){return E/a.count()*v/3});if(h.ignore=!0,this._updateAnimationPoints(h,p),x>0&&(v=this._getLineLength(h)/x*1e3),v!==this._period||m!==this._loop||y!==this._roundTrip){h.stopAnimation();var M=void 0;M=b.isFunction(C)?C(u):C,h.__t>0&&(M=-v*h.__t),this._animateSymbol(h,v,M,m,y)}this._period=v,this._loop=m,this._roundTrip=y}},s.prototype._animateSymbol=function(a,l,u,h,p){if(l>0){a.__t=0;var v=this,m=a.animate("",h).when(p?2*l:l,{__t:p?2:1}).delay(u).during(function(){v._updateSymbolPosition(a)});h||m.done(function(){v.remove(a)}),m.start()}},s.prototype._getLineLength=function(a){return lr.dist(a.__p1,a.__cp1)+lr.dist(a.__cp1,a.__p2)},s.prototype._updateAnimationPoints=function(a,l){a.__p1=l[0],a.__p2=l[1],a.__cp1=l[2]||[(l[0][0]+l[1][0])/2,(l[0][1]+l[1][1])/2]},s.prototype.updateData=function(a,l,u){this.childAt(0).updateData(a,l,u),this._updateEffectSymbol(a,l)},s.prototype._updateSymbolPosition=function(a){var l=a.__p1,u=a.__p2,h=a.__cp1,p=a.__t<1?a.__t:2-a.__t,v=[a.x,a.y],m=v.slice(),y=Es.Zm,x=Es.AZ;v[0]=y(l[0],h[0],u[0],p),v[1]=y(l[1],h[1],u[1],p);var C=a.__t<1?x(l[0],h[0],u[0],p):x(u[0],h[0],l[0],1-p),M=a.__t<1?x(l[1],h[1],u[1],p):x(u[1],h[1],l[1],1-p);a.rotation=-Math.atan2(M,C)-Math.PI/2,("line"===this._symbolType||"rect"===this._symbolType||"roundRect"===this._symbolType)&&(void 0!==a.__lastT&&a.__lastT<a.__t?(a.scaleY=1.05*lr.dist(m,v),1===p&&(v[0]=m[0]+(v[0]-m[0])/2,v[1]=m[1]+(v[1]-m[1])/2)):a.scaleY=1===a.__lastT?2*lr.dist(l,v):this._symbolScale[1]),a.__lastT=a.__t,a.ignore=!1,a.x=v[0],a.y=v[1]},s.prototype.updateLayout=function(a,l){this.childAt(0).updateLayout(a,l);var u=a.getItemModel(l).getModel("effect");this._updateEffectAnimation(a,u,l)},s}(Vn.Z),fx=function(c){function s(a,l,u){var h=c.call(this)||this;return h._createPolyline(a,l,u),h}return(0,Rt.ZT)(s,c),s.prototype._createPolyline=function(a,l,u){var h=a.getItemLayout(l),p=new Pt.Z({shape:{points:h}});this.add(p),this._updateCommonStl(a,l,u)},s.prototype.updateData=function(a,l,u){var h=a.hostModel,p=this.childAt(0),v={shape:{points:a.getItemLayout(l)}};on.D(p,v,h,l),this._updateCommonStl(a,l,u)},s.prototype._updateCommonStl=function(a,l,u){var h=this.childAt(0),p=a.getItemModel(l),v=u&&u.emphasisLineStyle,m=u&&u.focus,y=u&&u.blurScope,x=u&&u.emphasisDisabled;if(!u||a.hasItemOption){var C=p.getModel("emphasis");v=C.getModel("lineStyle").getLineStyle(),x=C.get("disabled"),m=C.get("focus"),y=C.get("blurScope")}h.useStyle(a.getItemVisual(l,"style")),h.style.fill=null,h.style.strokeNoScale=!0,h.ensureState("emphasis").style=v,(0,bn.k5)(this,m,y,x)},s.prototype.updateLayout=function(a,l){this.childAt(0).setShape("points",a.getItemLayout(l))},s}(Vn.Z),px=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a._lastFrame=0,a._lastFramePercent=0,a}return(0,Rt.ZT)(s,c),s.prototype.createLine=function(a,l,u){return new fx(a,l,u)},s.prototype._updateAnimationPoints=function(a,l){this._points=l;for(var u=[0],h=0,p=1;p<l.length;p++)h+=lr.dist(l[p-1],l[p]),u.push(h);if(0!==h){for(p=0;p<u.length;p++)u[p]/=h;this._offsets=u,this._length=h}else this._length=0},s.prototype._getLineLength=function(){return this._length},s.prototype._updateSymbolPosition=function(a){var l=a.__t<1?a.__t:2-a.__t,u=this._points,h=this._offsets,p=u.length;if(h){var m,v=this._lastFrame;if(l<this._lastFramePercent){for(m=Math.min(v+1,p-1);m>=0&&!(h[m]<=l);m--);m=Math.min(m,p-2)}else{for(m=v;m<p&&!(h[m]>l);m++);m=Math.min(m-1,p-2)}var x=(l-h[m])/(h[m+1]-h[m]),C=u[m],M=u[m+1];a.x=C[0]*(1-x)+x*M[0],a.y=C[1]*(1-x)+x*M[1],a.rotation=-Math.atan2(a.__t<1?M[1]-C[1]:C[1]-M[1],a.__t<1?M[0]-C[0]:C[0]-M[0])-Math.PI/2,this._lastFrame=m,this._lastFramePercent=l,a.ignore=!1}},s}(hx);var sc=z(7739),Wm=z(4239),jm=function c(){this.polyline=!1,this.curveness=0,this.segs=[]},$p=function(c){function s(a){var l=c.call(this,a)||this;return l._off=0,l.hoverDataIdx=-1,l}return(0,Rt.ZT)(s,c),s.prototype.reset=function(){this.notClear=!1,this._off=0},s.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},s.prototype.getDefaultShape=function(){return new jm},s.prototype.buildPath=function(a,l){var p,u=l.segs,h=l.curveness;if(l.polyline)for(p=this._off;p<u.length;){var v=u[p++];if(v>0){a.moveTo(u[p++],u[p++]);for(var m=1;m<v;m++)a.lineTo(u[p++],u[p++])}}else for(p=this._off;p<u.length;){var y=u[p++],x=u[p++],C=u[p++],M=u[p++];a.moveTo(y,x),h>0?a.quadraticCurveTo((y+C)/2-(x-M)*h,(x+M)/2-(C-y)*h,C,M):a.lineTo(C,M)}this.incremental&&(this._off=p,this.notClear=!0)},s.prototype.findDataIndex=function(a,l){var u=this.shape,h=u.segs,p=u.curveness,v=this.style.lineWidth;if(u.polyline)for(var m=0,y=0;y<h.length;){var x=h[y++];if(x>0)for(var C=h[y++],M=h[y++],E=1;E<x;E++){var R=h[y++],F=h[y++];if(sc.m(C,M,R,F,v,a,l))return m}m++}else for(m=0,y=0;y<h.length;){if(C=h[y++],M=h[y++],R=h[y++],F=h[y++],p>0){if(Wm.m(C,M,(C+R)/2-(M-F)*p,(M+F)/2-(R-C)*p,R,F,v,a,l))return m}else if(sc.m(C,M,R,F,v,a,l))return m;m++}return-1},s.prototype.contain=function(a,l){var u=this.transformCoordToLocal(a,l);return this.getBoundingRect().contain(a=u[0],l=u[1])?(this.hoverDataIdx=this.findDataIndex(a,l))>=0:(this.hoverDataIdx=-1,!1)},s.prototype.getBoundingRect=function(){var a=this._rect;if(!a){for(var u=this.shape.segs,h=1/0,p=1/0,v=-1/0,m=-1/0,y=0;y<u.length;){var x=u[y++],C=u[y++];h=Math.min(x,h),v=Math.max(x,v),p=Math.min(C,p),m=Math.max(C,m)}a=this._rect=new Pa.Z(h,p,v,m)}return a},s}(ye.ZP);const gx=function(){function c(){this.group=new Vn.Z}return c.prototype.updateData=function(s){this._clear();var a=this._create();a.setShape({segs:s.getLayout("linesPoints")}),this._setCommon(a,s)},c.prototype.incrementalPrepareUpdate=function(s){this.group.removeAll(),this._clear()},c.prototype.incrementalUpdate=function(s,a){var l=this._newAdded[0],u=a.getLayout("linesPoints"),h=l&&l.shape.segs;if(h&&h.length<2e4){var p=h.length,v=new Float32Array(p+u.length);v.set(h),v.set(u,p),l.setShape({segs:v})}else{this._newAdded=[];var m=this._create();m.incremental=!0,m.setShape({segs:u}),this._setCommon(m,a),m.__startIndex=s.start}},c.prototype.remove=function(){this._clear()},c.prototype.eachRendered=function(s){this._newAdded[0]&&s(this._newAdded[0])},c.prototype._create=function(){var s=new $p({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(s),this.group.add(s),s},c.prototype._setCommon=function(s,a,l){var u=a.hostModel;s.setShape({polyline:u.get("polyline"),curveness:u.get(["lineStyle","curveness"])}),s.useStyle(u.getModel("lineStyle").getLineStyle()),s.style.strokeNoScale=!0;var h=a.getVisual("style");h&&h.stroke&&s.setStyle("stroke",h.stroke),s.setStyle("fill",null);var p=(0,Fn.A)(s);p.seriesIndex=u.seriesIndex,s.on("mousemove",function(v){p.dataIndex=null;var m=s.hoverDataIdx;m>0&&(p.dataIndex=m+s.__startIndex)})},c.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},c}(),xM={seriesType:"lines",plan:(0,qs.Z)(),reset:function(c){var s=c.coordinateSystem;if(s){var a=c.get("polyline"),l=c.pipelineContext.large;return{progress:function(u,h){var p=[];if(l){var v=void 0,m=u.end-u.start;if(a){for(var y=0,x=u.start;x<u.end;x++)y+=c.getLineCoordsCount(x);v=new Float32Array(m+2*y)}else v=new Float32Array(4*m);var C=0,M=[];for(x=u.start;x<u.end;x++){var E=c.getLineCoords(x,p);a&&(v[C++]=E);for(var R=0;R<E;R++)M=s.dataToPoint(p[R],!1,M),v[C++]=M[0],v[C++]=M[1]}h.setLayout("linesPoints",v)}else for(x=u.start;x<u.end;x++){var F=h.getItemModel(x),U=(E=c.getLineCoords(x,p),[]);if(a)for(var ue=0;ue<E;ue++)U.push(s.dataToPoint(p[ue]));else{U[0]=s.dataToPoint(p[0]),U[1]=s.dataToPoint(p[1]);var me=F.get(["lineStyle","curveness"]);+me&&(U[2]=[(U[0][0]+U[1][0])/2-(U[0][1]-U[1][1])*me,(U[0][1]+U[1][1])/2-(U[1][0]-U[0][0])*me])}h.setItemLayout(x,U)}}}}}},Kp=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u){var h=a.getData(),p=this._updateLineDraw(h,a),v=a.get("zlevel"),m=a.get(["effect","trailLength"]),y=u.getZr(),x="svg"===y.painter.getType();x||y.painter.getLayer(v).clear(!0),null!=this._lastZlevel&&!x&&y.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(a)&&m>0&&(x||y.configLayer(v,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(m/10+.9,1),0)})),p.updateData(h);var C=a.get("clip",!0)&&Rc(a.coordinateSystem,!1,a);C?this.group.setClipPath(C):this.group.removeClipPath(),this._lastZlevel=v,this._finished=!0},s.prototype.incrementalPrepareRender=function(a,l,u){var h=a.getData();this._updateLineDraw(h,a).incrementalPrepareUpdate(h),this._clearLayer(u),this._finished=!1},s.prototype.incrementalRender=function(a,l,u){this._lineDraw.incrementalUpdate(a,l.getData()),this._finished=a.end===l.getData().count()},s.prototype.eachRendered=function(a){this._lineDraw&&this._lineDraw.eachRendered(a)},s.prototype.updateTransform=function(a,l,u){var h=a.getData(),p=a.pipelineContext;if(!this._finished||p.large||p.progressiveRender)return{update:!0};var v=xM.reset(a,l,u);v.progress&&v.progress({start:0,end:h.count(),count:h.count()},h),this._lineDraw.updateLayout(),this._clearLayer(u)},s.prototype._updateLineDraw=function(a,l){var u=this._lineDraw,h=this._showEffect(l),p=!!l.get("polyline"),m=l.pipelineContext.large;return(!u||h!==this._hasEffet||p!==this._isPolyline||m!==this._isLargeDraw)&&(u&&u.remove(),u=this._lineDraw=m?new gx:new vb(p?h?px:fx:h?hx:Tm),this._hasEffet=h,this._isPolyline=p,this._isLargeDraw=m),this.group.add(u.group),u},s.prototype._showEffect=function(a){return!!a.get(["effect","show"])},s.prototype._clearLayer=function(a){var l=a.getZr();"svg"!==l.painter.getType()&&null!=this._lastZlevel&&l.painter.getLayer(this._lastZlevel).clear(!0)},s.prototype.remove=function(a,l){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(l)},s.prototype.dispose=function(a,l){this.remove(a,l)},s.type="lines",s}(na.Z);var eO=typeof Uint32Array>"u"?Array:Uint32Array,s4=typeof Float64Array>"u"?Array:Float64Array;function wM(c){var s=c.data;s&&s[0]&&s[0][0]&&s[0][0].coord&&(c.data=(0,b.map)(s,function(a){var u={coords:[a[0].coord,a[1].coord]};return a[0].name&&(u.fromName=a[0].name),a[1].name&&(u.toName=a[1].name),(0,b.mergeAll)([u,a[0],a[1]])}))}const tO=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.visualStyleAccessPath="lineStyle",a.visualDrawType="stroke",a}return(0,Rt.ZT)(s,c),s.prototype.init=function(a){a.data=a.data||[],wM(a);var l=this._processFlatCoordsArray(a.data);this._flatCoords=l.flatCoords,this._flatCoordsOffset=l.flatCoordsOffset,l.flatCoords&&(a.data=new Float32Array(l.count)),c.prototype.init.apply(this,arguments)},s.prototype.mergeOption=function(a){if(wM(a),a.data){var l=this._processFlatCoordsArray(a.data);this._flatCoords=l.flatCoords,this._flatCoordsOffset=l.flatCoordsOffset,l.flatCoords&&(a.data=new Float32Array(l.count))}c.prototype.mergeOption.apply(this,arguments)},s.prototype.appendData=function(a){var l=this._processFlatCoordsArray(a.data);l.flatCoords&&(this._flatCoords?(this._flatCoords=(0,b.concatArray)(this._flatCoords,l.flatCoords),this._flatCoordsOffset=(0,b.concatArray)(this._flatCoordsOffset,l.flatCoordsOffset)):(this._flatCoords=l.flatCoords,this._flatCoordsOffset=l.flatCoordsOffset),a.data=new Float32Array(l.count)),this.getRawData().appendData(a.data)},s.prototype._getCoordsFromItemModel=function(a){var l=this.getData().getItemModel(a);return l.option instanceof Array?l.option:l.getShallow("coords")},s.prototype.getLineCoordsCount=function(a){return this._flatCoordsOffset?this._flatCoordsOffset[2*a+1]:this._getCoordsFromItemModel(a).length},s.prototype.getLineCoords=function(a,l){if(this._flatCoordsOffset){for(var u=this._flatCoordsOffset[2*a],h=this._flatCoordsOffset[2*a+1],p=0;p<h;p++)l[p]=l[p]||[],l[p][0]=this._flatCoords[u+2*p],l[p][1]=this._flatCoords[u+2*p+1];return h}var v=this._getCoordsFromItemModel(a);for(p=0;p<v.length;p++)l[p]=l[p]||[],l[p][0]=v[p][0],l[p][1]=v[p][1];return v.length},s.prototype._processFlatCoordsArray=function(a){var l=0;if(this._flatCoords&&(l=this._flatCoords.length),(0,b.isNumber)(a[0])){for(var u=a.length,h=new eO(u),p=new s4(u),v=0,m=0,y=0,x=0;x<u;){y++;var C=a[x++];h[m++]=v+l,h[m++]=C;for(var M=0;M<C;M++){var E=a[x++],R=a[x++];p[v++]=E,p[v++]=R}}return{flatCoordsOffset:new Uint32Array(h.buffer,0,m),flatCoords:p,count:y}}return{flatCoordsOffset:null,flatCoords:null,count:a.length}},s.prototype.getInitialData=function(a,l){var h=new nr.Z(["value"],this);return h.hasItemOption=!1,h.initData(a.data,[],function(p,v,m,y){if(p instanceof Array)return NaN;h.hasItemOption=!0;var x=p.value;return null!=x?x instanceof Array?x[y]:x:void 0}),h},s.prototype.formatTooltip=function(a,l,u){var p=this.getData().getItemModel(a),v=p.get("name");if(v)return v;var m=p.get("fromName"),y=p.get("toName"),x=[];return null!=m&&x.push(m),null!=y&&x.push(y),(0,Ui.TX)("nameValue",{name:x.join(" > ")})},s.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},s.prototype.getProgressive=function(){return this.option.progressive??(this.option.large?1e4:this.get("progressive"))},s.prototype.getProgressiveThreshold=function(){return this.option.progressiveThreshold??(this.option.large?2e4:this.get("progressiveThreshold"))},s.prototype.getZLevelKey=function(){var a=this.getModel("effect"),l=a.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:a.get("show")&&l>0?l+"":""},s.type="series.lines",s.dependencies=["grid","polar","geo","calendar"],s.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},s}(zi.Z);function Zm(c){return c instanceof Array||(c=[c,c]),c}const CM={seriesType:"lines",reset:function(c){var s=Zm(c.get("symbol")),a=Zm(c.get("symbolSize")),l=c.getData();return l.setVisual("fromSymbol",s&&s[0]),l.setVisual("toSymbol",s&&s[1]),l.setVisual("fromSymbolSize",a&&a[0]),l.setVisual("toSymbolSize",a&&a[1]),{dataEach:l.hasItemOption?function u(h,p){var v=h.getItemModel(p),m=Zm(v.getShallow("symbol",!0)),y=Zm(v.getShallow("symbolSize",!0));m[0]&&h.setItemVisual(p,"fromSymbol",m[0]),m[1]&&h.setItemVisual(p,"toSymbol",m[1]),y[0]&&h.setItemVisual(p,"fromSymbolSize",y[0]),y[1]&&h.setItemVisual(p,"toSymbolSize",y[1])}:null}}},iO=function(){function c(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var s=fn.qW.createCanvas();this.canvas=s}return c.prototype.update=function(s,a,l,u,h,p){var v=this._getBrush(),m=this._getGradient(h,"inRange"),y=this._getGradient(h,"outOfRange"),x=this.pointSize+this.blurSize,C=this.canvas,M=C.getContext("2d"),E=s.length;C.width=a,C.height=l;for(var R=0;R<E;++R){var F=s[R],U=F[0],ue=F[1],ve=u(F[2]);M.globalAlpha=ve,M.drawImage(v,U-x,ue-x)}if(!C.width||!C.height)return C;for(var Me=M.getImageData(0,0,C.width,C.height),Ae=Me.data,Pe=0,Ne=Ae.length,He=this.minOpacity,Qe=this.maxOpacity-He;Pe<Ne;){ve=Ae[Pe+3]/256;var it=4*Math.floor(255*ve);if(ve>0){var ct=p(ve)?m:y;ve>0&&(ve=ve*Qe+He),Ae[Pe++]=ct[it],Ae[Pe++]=ct[it+1],Ae[Pe++]=ct[it+2],Ae[Pe++]=ct[it+3]*ve*256}else Pe+=4}return M.putImageData(Me,0,0),C},c.prototype._getBrush=function(){var s=this._brushCanvas||(this._brushCanvas=fn.qW.createCanvas()),a=this.pointSize+this.blurSize,l=2*a;s.width=l,s.height=l;var u=s.getContext("2d");return u.clearRect(0,0,l,l),u.shadowOffsetX=l,u.shadowBlur=this.blurSize,u.shadowColor="#000",u.beginPath(),u.arc(-a,a,this.pointSize,0,2*Math.PI,!0),u.closePath(),u.fill(),s},c.prototype._getGradient=function(s,a){for(var l=this._gradientPixels,u=l[a]||(l[a]=new Uint8ClampedArray(1024)),h=[0,0,0,0],p=0,v=0;v<256;v++)s[a](v/255,!0,h),u[p++]=h[0],u[p++]=h[1],u[p++]=h[2],u[p++]=h[3];return u},c}();function SM(c){var s=c.dimensions;return"lng"===s[0]&&"lat"===s[1]}const lO=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u){var h;l.eachComponent("visualMap",function(v){v.eachTargetSeries(function(m){m===a&&(h=v)})}),this._progressiveEls=null,this.group.removeAll();var p=a.coordinateSystem;"cartesian2d"===p.type||"calendar"===p.type?this._renderOnCartesianAndCalendar(a,u,0,a.getData().count()):SM(p)&&this._renderOnGeo(p,a,h,u)},s.prototype.incrementalPrepareRender=function(a,l,u){this.group.removeAll()},s.prototype.incrementalRender=function(a,l,u,h){var p=l.coordinateSystem;p&&(SM(p)?this.render(l,u,h):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(l,h,a.start,a.end,!0)))},s.prototype.eachRendered=function(a){Un.traverseElements(this._progressiveEls||this.group,a)},s.prototype._renderOnCartesianAndCalendar=function(a,l,u,h,p){var y,x,C,M,v=a.coordinateSystem,m=bl(v,"cartesian2d");if(m){var E=v.getAxis("x"),R=v.getAxis("y");y=E.getBandWidth()+.5,x=R.getBandWidth()+.5,C=E.scale.getExtent(),M=R.scale.getExtent()}for(var F=this.group,U=a.getData(),ue=a.getModel(["emphasis","itemStyle"]).getItemStyle(),me=a.getModel(["blur","itemStyle"]).getItemStyle(),ve=a.getModel(["select","itemStyle"]).getItemStyle(),Me=a.get(["itemStyle","borderRadius"]),Ae=(0,Bn.k3)(a),Pe=a.getModel("emphasis"),Ne=Pe.get("focus"),He=Pe.get("blurScope"),Ye=Pe.get("disabled"),Qe=m?[U.mapDimension("x"),U.mapDimension("y"),U.mapDimension("value")]:[U.mapDimension("time"),U.mapDimension("value")],it=u;it<h;it++){var ct=void 0,ht=U.getItemVisual(it,"style");if(m){var vt=U.get(Qe[0],it),gt=U.get(Qe[1],it);if(isNaN(U.get(Qe[2],it))||isNaN(vt)||isNaN(gt)||vt<C[0]||vt>C[1]||gt<M[0]||gt>M[1])continue;var Ot=v.dataToPoint([vt,gt]);ct=new Jt.Z({shape:{x:Ot[0]-y/2,y:Ot[1]-x/2,width:y,height:x},style:ht})}else{if(isNaN(U.get(Qe[1],it)))continue;ct=new Jt.Z({z2:1,shape:v.dataToRect([U.get(Qe[0],it)]).contentShape,style:ht})}if(U.hasItemOption){var Gt=U.getItemModel(it),Ft=Gt.getModel("emphasis");ue=Ft.getModel("itemStyle").getItemStyle(),me=Gt.getModel(["blur","itemStyle"]).getItemStyle(),ve=Gt.getModel(["select","itemStyle"]).getItemStyle(),Me=Gt.get(["itemStyle","borderRadius"]),Ne=Ft.get("focus"),He=Ft.get("blurScope"),Ye=Ft.get("disabled"),Ae=(0,Bn.k3)(Gt)}ct.shape.r=Me;var en=a.getRawValue(it),Mn="-";en&&null!=en[2]&&(Mn=en[2]+""),(0,Bn.ni)(ct,Ae,{labelFetcher:a,labelDataIndex:it,defaultOpacity:ht.opacity,defaultText:Mn}),ct.ensureState("emphasis").style=ue,ct.ensureState("blur").style=me,ct.ensureState("select").style=ve,(0,bn.k5)(ct,Ne,He,Ye),ct.incremental=p,p&&(ct.states.emphasis.hoverLayer=!0),F.add(ct),U.setItemGraphicEl(it,ct),this._progressiveEls&&this._progressiveEls.push(ct)}},s.prototype._renderOnGeo=function(a,l,u,h){var p=u.targetVisuals.inRange,v=u.targetVisuals.outOfRange,m=l.getData(),y=this._hmLayer||this._hmLayer||new iO;y.blurSize=l.get("blurSize"),y.pointSize=l.get("pointSize"),y.minOpacity=l.get("minOpacity"),y.maxOpacity=l.get("maxOpacity");var x=a.getViewRect().clone(),C=a.getRoamTransform();x.applyTransform(C);var M=Math.max(x.x,0),E=Math.max(x.y,0),R=Math.min(x.width+x.x,h.getWidth()),F=Math.min(x.height+x.y,h.getHeight()),U=R-M,ue=F-E,me=[m.mapDimension("lng"),m.mapDimension("lat"),m.mapDimension("value")],ve=m.mapArray(me,function(Ne,He,Ye){var Qe=a.dataToPoint([Ne,He]);return Qe[0]-=M,Qe[1]-=E,Qe.push(Ye),Qe}),Me=u.getExtent(),Ae="visualMap.continuous"===u.type?function oO(c,s){var a=c[1]-c[0];return s=[(s[0]-c[0])/a,(s[1]-c[0])/a],function(l){return l>=s[0]&&l<=s[1]}}(Me,u.option.range):function aO(c,s,a){var l=c[1]-c[0],u=(s=b.map(s,function(p){return{interval:[(p.interval[0]-c[0])/l,(p.interval[1]-c[0])/l]}})).length,h=0;return function(p){var v;for(v=h;v<u;v++)if((m=s[v].interval)[0]<=p&&p<=m[1]){h=v;break}if(v===u)for(v=h-1;v>=0;v--){var m;if((m=s[v].interval)[0]<=p&&p<=m[1]){h=v;break}}return v>=0&&v<u&&a[v]}}(Me,u.getPieceList(),u.option.selected);y.update(ve,U,ue,p.color.getNormalizer(),{inRange:p.color.getColorMapper(),outOfRange:v.color.getColorMapper()},Ae);var Pe=new be.ZP({style:{width:U,height:ue,x:M,y:E,image:y.canvas},silent:!0});this.group.add(Pe)},s.type="heatmap",s}(na.Z),fd=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.getInitialData=function(a,l){return(0,ta.Z)(null,this,{generateCoord:"value"})},s.prototype.preventIncremental=function(){var a=gD.Z.get(this.get("coordinateSystem"));if(a&&a.dimensions)return"lng"===a.dimensions[0]&&"lat"===a.dimensions[1]},s.type="series.heatmap",s.dependencies=["grid","geo","calendar"],s.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},s}(zi.Z);var Qp=["itemStyle","borderWidth"],DM=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],mx=new wh.Z;function MM(c,s,a,l){var u=c.getItemLayout(s),h=a.get("symbolRepeat"),p=a.get("symbolClip"),v=a.get("symbolPosition")||"start",y=(a.get("symbolRotate")||0)*Math.PI/180||0,x=a.get("symbolPatternSize")||2,C=a.isAnimationEnabled(),M={dataIndex:s,layout:u,itemModel:a,symbolType:c.getItemVisual(s,"symbol")||"circle",style:c.getItemVisual(s,"style"),symbolClip:p,symbolRepeat:h,symbolRepeatDirection:a.get("symbolRepeatDirection"),symbolPatternSize:x,rotation:y,animationModel:C?a:null,hoverScale:C&&a.get(["emphasis","scale"]),z2:a.getShallow("z",!0)||0};(function lc(c,s,a,l,u){var x,h=l.valueDim,p=c.get("symbolBoundingData"),v=l.coordSys.getOtherAxis(l.coordSys.getBaseAxis()),m=v.toGlobalCoord(v.dataToCoord(0)),y=1-+(a[h.wh]<=0);if(b.isArray(p)){var C=[pd(v,p[0])-m,pd(v,p[1])-m];C[1]<C[0]&&C.reverse(),x=C[y]}else x=null!=p?pd(v,p)-m:s?l.coordSysExtent[h.index][y]-m:a[h.wh];u.boundingLength=x,s&&(u.repeatCutLength=a[h.wh]),u.pxSign=x>0?1:-1})(a,h,u,l,M),function jo(c,s,a,l,u,h,p,v,m,y){var R,x=m.valueDim,C=m.categoryDim,M=Math.abs(a[C.wh]),E=c.getItemVisual(s,"symbolSize");(R=b.isArray(E)?E.slice():null==E?["100%","100%"]:[E,E])[C.index]=(0,ft.GM)(R[C.index],M),R[x.index]=(0,ft.GM)(R[x.index],l?M:Math.abs(h)),y.symbolSize=R,(y.symbolScale=[R[0]/v,R[1]/v])[x.index]*=(m.isHorizontal?-1:1)*p}(c,s,u,h,0,M.boundingLength,M.pxSign,x,l,M),function gd(c,s,a,l,u){var h=c.get(Qp)||0;h&&(mx.attr({scaleX:s[0],scaleY:s[1],rotation:a}),mx.updateTransform(),h/=mx.getLineScale(),h*=s[l.valueDim.index]),u.valueLineWidth=h||0}(a,M.symbolScale,y,l,M);var E=M.symbolSize,R=(0,dr.Cq)(a.get("symbolOffset"),E);return function Xm(c,s,a,l,u,h,p,v,m,y,x,C){var M=x.categoryDim,E=x.valueDim,R=C.pxSign,F=Math.max(s[E.index]+v,0),U=F;if(l){var ue=Math.abs(m),me=b.retrieve(c.get("symbolMargin"),"15%")+"",ve=!1;me.lastIndexOf("!")===me.length-1&&(ve=!0,me=me.slice(0,me.length-1));var Me=(0,ft.GM)(me,s[E.index]),Ae=Math.max(F+2*Me,0),Pe=ve?0:2*Me,Ne=(0,ft.kE)(l),He=Ne?l:xx((ue+Pe)/Ae);Ae=F+2*(Me=(ue-He*F)/2/(ve?He:Math.max(He-1,1))),Pe=ve?0:2*Me,!Ne&&"fixed"!==l&&(He=y?xx((Math.abs(y)+Pe)/Ae):0),U=He*Ae-Pe,C.repeatTimes=He,C.symbolMargin=Me}var Qe=R*(U/2),it=C.pathPosition=[];it[M.index]=a[M.wh]/2,it[E.index]="start"===p?Qe:"end"===p?m-Qe:m/2,h&&(it[0]+=h[0],it[1]+=h[1]);var ct=C.bundlePosition=[];ct[M.index]=a[M.xy],ct[E.index]=a[E.xy];var ht=C.barRectShape=b.extend({},a);ht[E.wh]=R*Math.max(Math.abs(a[E.wh]),Math.abs(it[E.index]+Qe)),ht[M.wh]=a[M.wh];var vt=C.clipShape={};vt[M.xy]=-a[M.xy],vt[M.wh]=x.ecSize[M.wh],vt[E.xy]=0,vt[E.wh]=a[E.wh]}(a,E,u,h,0,R,v,M.valueLineWidth,M.boundingLength,M.repeatCutLength,l,M),M}function pd(c,s){return c.toGlobalCoord(c.dataToCoord(c.scale.parse(s)))}function Fs(c){var s=c.symbolPatternSize,a=(0,dr.th)(c.symbolType,-s/2,-s/2,s,s);return a.attr({culling:!0}),"image"!==a.type&&a.setStyle({strokeNoScale:!0}),a}function Pr(c,s,a,l){var u=c.__pictorialBundle,v=a.pathPosition,m=s.valueDim,y=a.repeatTimes||0,x=0,C=a.symbolSize[s.valueDim.index]+a.valueLineWidth+2*a.symbolMargin;for($m(c,function(F){F.__pictorialAnimationIndex=x,F.__pictorialRepeatTimes=y,x<y?wd(F,null,R(x),a,l):wd(F,null,{scaleX:0,scaleY:0},a,l,function(){u.remove(F)}),x++});x<y;x++){var M=Fs(a);M.__pictorialAnimationIndex=x,M.__pictorialRepeatTimes=y,u.add(M);var E=R(x);wd(M,{x:E.x,y:E.y,scaleX:0,scaleY:0},{scaleX:E.scaleX,scaleY:E.scaleY,rotation:E.rotation},a,l)}function R(F){var U=v.slice(),ue=a.pxSign,me=F;return("start"===a.symbolRepeatDirection?ue>0:ue<0)&&(me=y-1-F),U[m.index]=C*(me-y/2+.5)+v[m.index],{x:U[0],y:U[1],scaleX:a.symbolScale[0],scaleY:a.symbolScale[1],rotation:a.rotation}}}function vd(c,s,a,l){var u=c.__pictorialBundle,h=c.__pictorialMainPath;h?wd(h,null,{x:a.pathPosition[0],y:a.pathPosition[1],scaleX:a.symbolScale[0],scaleY:a.symbolScale[1],rotation:a.rotation},a,l):(h=c.__pictorialMainPath=Fs(a),u.add(h),wd(h,{x:a.pathPosition[0],y:a.pathPosition[1],scaleX:0,scaleY:0,rotation:a.rotation},{scaleX:a.symbolScale[0],scaleY:a.symbolScale[1]},a,l))}function md(c,s,a){var l=b.extend({},s.barRectShape),u=c.__pictorialBarRect;u?wd(u,null,{shape:l},s,a):((u=c.__pictorialBarRect=new Jt.Z({z2:2,shape:l,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}})).disableMorphing=!0,c.add(u))}function _d(c,s,a,l){if(a.symbolClip){var u=c.__pictorialClipPath,h=b.extend({},a.clipShape),p=s.valueDim,v=a.animationModel,m=a.dataIndex;if(u)on.D(u,{shape:h},v,m);else{h[p.wh]=0,u=new Jt.Z({shape:h}),c.__pictorialBundle.setClipPath(u),c.__pictorialClipPath=u;var y={};y[p.wh]=a.clipShape[p.wh],Un[l?"updateProps":"initProps"](u,{shape:y},v,m)}}}function yd(c,s){var a=c.getItemModel(s);return a.getAnimationDelayParams=Kh,a.isAnimationEnabled=Qh,a}function Kh(c){return{index:c.__pictorialAnimationIndex,count:c.__pictorialRepeatTimes}}function Qh(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function bd(c,s,a,l){var u=new Vn.Z,h=new Vn.Z;return u.add(h),u.__pictorialBundle=h,h.x=a.bundlePosition[0],h.y=a.bundlePosition[1],a.symbolRepeat?Pr(u,s,a):vd(u,0,a),md(u,a,l),_d(u,s,a,l),u.__pictorialShapeStr=yx(c,a),u.__pictorialSymbolMeta=a,u}function xd(c,s,a,l){var u=l.__pictorialBarRect;u&&u.removeTextContent();var h=[];$m(l,function(p){h.push(p)}),l.__pictorialMainPath&&h.push(l.__pictorialMainPath),l.__pictorialClipPath&&(a=null),b.each(h,function(p){on.bX(p,{scaleX:0,scaleY:0},a,s,function(){l.parent&&l.parent.remove(l)})}),c.setItemGraphicEl(s,null)}function yx(c,s){return[c.getItemVisual(s.dataIndex,"symbol")||"none",!!s.symbolRepeat,!!s.symbolClip].join(":")}function $m(c,s,a){b.each(c.__pictorialBundle.children(),function(l){l!==c.__pictorialBarRect&&s.call(a,l)})}function wd(c,s,a,l,u,h){s&&c.attr(s),l.symbolClip&&!u?a&&c.attr(a):a&&Un[u?"updateProps":"initProps"](c,a,l.animationModel,l.dataIndex,h)}function bx(c,s,a){var l=a.dataIndex,u=a.itemModel,h=u.getModel("emphasis"),p=h.getModel("itemStyle").getItemStyle(),v=u.getModel(["blur","itemStyle"]).getItemStyle(),m=u.getModel(["select","itemStyle"]).getItemStyle(),y=u.getShallow("cursor"),x=h.get("focus"),C=h.get("blurScope"),M=h.get("scale");$m(c,function(F){if(F instanceof be.ZP){var U=F.style;F.useStyle(b.extend({image:U.image,x:U.x,y:U.y,width:U.width,height:U.height},a.style))}else F.useStyle(a.style);var ue=F.ensureState("emphasis");ue.style=p,M&&(ue.scaleX=1.1*F.scaleX,ue.scaleY=1.1*F.scaleY),F.ensureState("blur").style=v,F.ensureState("select").style=m,y&&(F.cursor=y),F.z2=a.z2});var E=s.valueDim.posDesc[+(a.boundingLength>0)],R=c.__pictorialBarRect;R.ignoreClip=!0,(0,Bn.ni)(R,(0,Bn.k3)(u),{labelFetcher:s.seriesModel,labelDataIndex:l,defaultText:kr(s.seriesModel.getData(),l),inheritColor:a.style.fill,defaultOpacity:a.style.opacity,defaultOutsidePosition:E}),(0,bn.k5)(c,x,C,h.get("disabled"))}function xx(c){var s=Math.round(c);return Math.abs(c-s)<1e-4?s:Math.ceil(c)}const TM=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u){var h=this.group,p=a.getData(),v=this._data,m=a.coordinateSystem,x=m.getBaseAxis().isHorizontal(),C=m.master.getRect(),M={ecSize:{width:u.getWidth(),height:u.getHeight()},seriesModel:a,coordSys:m,coordSysExtent:[[C.x,C.x+C.width],[C.y,C.y+C.height]],isHorizontal:x,valueDim:DM[+x],categoryDim:DM[1-+x]};p.diff(v).add(function(R){if(p.hasValue(R)){var F=yd(p,R),U=MM(p,R,F,M),ue=bd(p,M,U);p.setItemGraphicEl(R,ue),h.add(ue),bx(ue,M,U)}}).update(function(R,F){var U=v.getItemGraphicEl(F);if(p.hasValue(R)){var ue=yd(p,R),me=MM(p,R,ue,M),ve=yx(p,me);U&&ve!==U.__pictorialShapeStr&&(h.remove(U),p.setItemGraphicEl(R,null),U=null),U?function qh(c,s,a){on.D(c.__pictorialBundle,{x:a.bundlePosition[0],y:a.bundlePosition[1]},a.animationModel,a.dataIndex),a.symbolRepeat?Pr(c,s,a,!0):vd(c,0,a,!0),md(c,a,!0),_d(c,s,a,!0)}(U,M,me):U=bd(p,M,me,!0),p.setItemGraphicEl(R,U),U.__pictorialSymbolMeta=me,h.add(U),bx(U,M,me)}else h.remove(U)}).remove(function(R){var F=v.getItemGraphicEl(R);F&&xd(v,R,F.__pictorialSymbolMeta.animationModel,F)}).execute();var E=a.get("clip",!0)?Rc(a.coordinateSystem,!1,a):null;return E?h.setClipPath(E):h.removeClipPath(),this._data=p,this.group},s.prototype.remove=function(a,l){var u=this.group,h=this._data;a.get("animation")?h&&h.eachItemGraphicEl(function(p){xd(h,(0,Fn.A)(p).dataIndex,a,p)}):u.removeAll()},s.type="pictorialBar",s}(na.Z),AM=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.hasSymbolVisual=!0,a.defaultSymbol="roundRect",a}return(0,Rt.ZT)(s,c),s.prototype.getInitialData=function(a){return a.stack=null,c.prototype.getInitialData.apply(this,arguments)},s.type="series.pictorialBar",s.dependencies=["grid"],s.defaultOption=(0,qn.ZL)(hh.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),s}(hh),ir=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a._layers=[],a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u){var h=a.getData(),p=this,v=this.group,m=a.getLayerSeries(),y=h.getLayout("layoutInfo"),x=y.rect,C=y.boundaryGap;function M(U){return U.name}v.x=0,v.y=x.y+C[0];var E=new td.Z(this._layersSeries||[],m,M,M),R=[];function F(U,ue,me){var ve=p._layers;if("remove"!==U){for(var Pe,Me=[],Ae=[],Ne=m[ue].indices,He=0;He<Ne.length;He++){var Ye=h.getItemLayout(Ne[He]),Qe=Ye.x,it=Ye.y0,ct=Ye.y;Me.push(Qe,it),Ae.push(Qe,it+ct),Pe=h.getItemVisual(Ne[He],"style")}var ht,vt=h.getItemLayout(Ne[0]),Ot=a.getModel("label").get("margin"),Gt=a.getModel("emphasis");if("add"===U){var Ft=R[ue]=new Vn.Z;ht=new r0({shape:{points:Me,stackedOnPoints:Ae,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),Ft.add(ht),v.add(Ft),a.isAnimationEnabled()&&ht.setClipPath(function uO(c,s,a){var l=new Jt.Z({shape:{x:c.x-10,y:c.y-10,width:0,height:c.height+20}});return on.KZ(l,{shape:{x:c.x-50,width:c.width+100,height:c.height+20}},s,a),l}(ht.getBoundingRect(),a,function(){ht.removeClipPath()}))}else ht=(Ft=ve[me]).childAt(0),v.add(Ft),R[ue]=Ft,on.D(ht,{shape:{points:Me,stackedOnPoints:Ae}},a),(0,on.Zi)(ht);(0,Bn.ni)(ht,(0,Bn.k3)(a),{labelDataIndex:Ne[He-1],defaultText:h.getName(Ne[He-1]),inheritColor:Pe.fill},{normal:{verticalAlign:"middle"}}),ht.setTextConfig({position:null,local:!0});var en=ht.getTextContent();en&&(en.x=vt.x-Ot,en.y=vt.y0+vt.y/2),ht.useStyle(Pe),h.setItemGraphicEl(ue,ht),(0,bn.WO)(ht,a),(0,bn.k5)(ht,Gt.get("focus"),Gt.get("blurScope"),Gt.get("disabled"))}else v.remove(ve[ue])}E.add((0,b.bind)(F,this,"add")).update((0,b.bind)(F,this,"update")).remove((0,b.bind)(F,this,"remove")).execute(),this._layersSeries=m,this._layers=R},s.type="themeRiver",s}(na.Z),_t=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.init=function(a){c.prototype.init.apply(this,arguments),this.legendVisualProvider=new eo(b.bind(this.getData,this),b.bind(this.getRawData,this))},s.prototype.fixData=function(a){var l=a.length,u={},h=(0,An.pv)(a,function(M){return u.hasOwnProperty(M[0]+"")||(u[M[0]+""]=-1),M[2]}),p=[];h.buckets.each(function(M,E){p.push({name:E,dataList:M})});for(var v=p.length,m=0;m<v;++m){for(var y=p[m].name,x=0;x<p[m].dataList.length;++x)u[C=p[m].dataList[x][0]+""]=m;for(var C in u)u.hasOwnProperty(C)&&u[C]!==m&&(u[C]=m,a[l]=[C,0,y],l++)}return a},s.prototype.getInitialData=function(a,l){for(var h=this.getReferringComponents("singleAxis",An.C6).models[0].get("type"),p=b.filter(a.data,function(R){return void 0!==R[2]}),v=this.fixData(p||[]),m=[],y=this.nameMap=b.createHashMap(),x=0,C=0;C<v.length;++C)m.push(v[C][2]),y.get(v[C][2])||(y.set(v[C][2],x),x++);var M=(0,Zr.Z)(v,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:(0,Jb.T)(h)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,E=new nr.Z(M,this);return E.initData(v),E},s.prototype.getLayerSeries=function(){for(var a=this.getData(),l=a.count(),u=[],h=0;h<l;++h)u[h]=h;var p=a.mapDimension("single"),v=(0,An.pv)(u,function(y){return a.get("name",y)}),m=[];return v.buckets.each(function(y,x){y.sort(function(C,M){return a.get(p,C)-a.get(p,M)}),m.push({name:x,indices:y})}),m},s.prototype.getAxisTooltipData=function(a,l,u){b.isArray(a)||(a=a?[a]:[]);for(var y,h=this.getData(),p=this.getLayerSeries(),v=[],m=p.length,x=0;x<m;++x){for(var C=Number.MAX_VALUE,M=-1,E=p[x].indices.length,R=0;R<E;++R){var F=h.get(a[0],p[x].indices[R]),U=Math.abs(F-l);U<=C&&(y=F,C=U,M=p[x].indices[R])}v.push(M)}return{dataIndices:v,nestestValue:y}},s.prototype.formatTooltip=function(a,l,u){var h=this.getData(),p=h.getName(a),v=h.get(h.mapDimension("value"),a);return(0,Ui.TX)("nameValue",{name:p,value:v})},s.type="series.themeRiver",s.dependencies=["singleAxis"],s.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},s}(zi.Z);function Sx(c,s){c.eachSeriesByType("themeRiver",function(a){var l=a.getData(),u=a.coordinateSystem,h={},p=u.getRect();h.rect=p;var v=a.get("boundaryGap"),m=u.getAxis();h.boundaryGap=v,"horizontal"===m.orient?(v[0]=ft.GM(v[0],p.height),v[1]=ft.GM(v[1],p.height),PM(l,a,p.height-v[0]-v[1])):(v[0]=ft.GM(v[0],p.width),v[1]=ft.GM(v[1],p.width),PM(l,a,p.width-v[0]-v[1])),l.setLayout("layoutInfo",h)})}function PM(c,s,a){if(c.count())for(var E,l=s.coordinateSystem,u=s.getLayerSeries(),h=c.mapDimension("single"),p=c.mapDimension("value"),v=b.map(u,function(U){return b.map(U.indices,function(ue){var me=l.dataToPoint(c.get(h,ue));return me[1]=c.get(p,ue),me})}),m=function je(c){for(var s=c.length,a=c[0].length,l=[],u=[],h=0,p=0;p<a;++p){for(var v=0,m=0;m<s;++m)v+=c[m][p][1];v>h&&(h=v),l.push(v)}for(var y=0;y<a;++y)u[y]=(h-l[y])/2;h=0;for(var x=0;x<a;++x){var C=l[x]+u[x];C>h&&(h=C)}return{y0:u,max:h}}(v),y=m.y0,x=a/m.max,C=u.length,M=u[0].indices.length,R=0;R<M;++R){c.setItemLayout(u[0].indices[R],{layerIndex:0,x:v[0][R][0],y0:E=y[R]*x,y:v[0][R][1]*x});for(var F=1;F<C;++F)c.setItemLayout(u[F].indices[R],{layerIndex:F,x:v[F][R][0],y0:E+=v[F-1][R][1]*x,y:v[F][R][1]*x})}}var yn=z(5951);const Dx=function(c){function s(a,l,u,h){var p=c.call(this)||this;p.z2=2,p.textConfig={inside:!0},(0,Fn.A)(p).seriesIndex=l.seriesIndex;var v=new kt.ZP({z2:4,silent:a.getModel().get(["label","silent"])});return p.setTextContent(v),p.updateData(!0,a,l,u,h),p}return(0,Rt.ZT)(s,c),s.prototype.updateData=function(a,l,u,h,p){this.node=l,l.piece=this,u=u||this._seriesModel,h=h||this._ecModel;var v=this;(0,Fn.A)(v).dataIndex=l.dataIndex;var m=l.getModel(),y=m.getModel("emphasis"),x=l.getLayout(),C=b.extend({},x);C.label=null;var M=l.getVisual("style");M.lineJoin="bevel";var E=l.getVisual("decal");E&&(M.decal=(0,om.I)(E,p));var R=da(m.getModel("itemStyle"),C,!0);b.extend(C,R),b.each(bn.L1,function(me){var ve=v.ensureState(me),Me=m.getModel([me,"itemStyle"]);ve.style=Me.getItemStyle();var Ae=da(Me,C);Ae&&(ve.shape=Ae)}),a?(v.setShape(C),v.shape.r=x.r0,on.KZ(v,{shape:{r:x.r}},u,l.dataIndex)):(on.D(v,{shape:C},u),(0,on.Zi)(v)),v.useStyle(M),this._updateLabel(u);var F=m.getShallow("cursor");F&&v.attr("cursor",F),this._seriesModel=u||this._seriesModel,this._ecModel=h||this._ecModel;var U=y.get("focus"),ue="ancestor"===U?l.getAncestorsIndices():"descendant"===U?l.getDescendantIndices():U;(0,bn.k5)(this,ue,y.get("blurScope"),y.get("disabled"))},s.prototype._updateLabel=function(a){var l=this,u=this.node.getModel(),h=u.getModel("label"),p=this.node.getLayout(),v=p.endAngle-p.startAngle,m=(p.startAngle+p.endAngle)/2,y=Math.cos(m),x=Math.sin(m),C=this,M=C.getTextContent(),E=this.node.dataIndex,R=h.get("minAngle")/180*Math.PI,F=h.get("show")&&!(null!=R&&Math.abs(v)<R);function U(ue,me){return ue.get(me)??h.get(me)}M.ignore=!F,b.each(bn.qc,function(ue){var me=u.getModel("normal"===ue?"label":[ue,"label"]),ve="normal"===ue,Me=ve?M:M.ensureState(ue),Ae=a.getFormattedLabel(E,ue);ve&&(Ae=Ae||l.node.name),Me.style=(0,Bn.Lr)(me,{},null,"normal"!==ue,!0),Ae&&(Me.style.text=Ae);var Pe=me.get("show");null!=Pe&&!ve&&(Me.ignore=!Pe);var Ne=U(me,"position"),He=ve?C:C.states[ue],Ye=He.style.fill;He.textConfig={outsideFill:"inherit"===me.get("color")?Ye:null,inside:"outside"!==Ne};var Qe,it=U(me,"distance")||0,ct=U(me,"align"),ht=U(me,"rotate"),vt=.5*Math.PI,gt=1.5*Math.PI,Ot=(0,yn.m)("tangential"===ht?Math.PI/2-m:m),Gt=Ot>vt&&!(0,ft.mW)(Ot-vt)&&Ot<gt;"outside"===Ne?(Qe=p.r+it,ct=Gt?"right":"left"):ct&&"center"!==ct?"left"===ct?(Qe=p.r0+it,ct=Gt?"right":"left"):"right"===ct&&(Qe=p.r-it,ct=Gt?"left":"right"):(Qe=v===2*Math.PI&&0===p.r0?0:(p.r+p.r0)/2,ct="center"),Me.style.align=ct,Me.style.verticalAlign=U(me,"verticalAlign")||"middle",Me.x=Qe*y+p.cx,Me.y=Qe*x+p.cy;var Ft=0;"radial"===ht?Ft=(0,yn.m)(-m)+(Gt?Math.PI:0):"tangential"===ht?Ft=(0,yn.m)(Math.PI/2-m)+(Gt?Math.PI:0):b.isNumber(ht)&&(Ft=ht*Math.PI/180),Me.rotation=(0,yn.m)(Ft)}),M.dirtyStyle()},s}(hs.C);var Fi="sunburstRootToNode",Jh="sunburstHighlight";const Km=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u,h){var p=this;this.seriesModel=a,this.api=u,this.ecModel=l;var v=a.getData(),m=v.tree.root,y=a.getViewRoot(),x=this.group,C=a.get("renderLabelForZeroData"),M=[];y.eachNode(function(me){M.push(me)}),function R(me,ve){function Me(Pe){return Pe.getId()}function Ae(Pe,Ne){!function F(me,ve){if(!C&&me&&!me.getValue()&&(me=null),me!==m&&ve!==m)if(ve&&ve.piece)me?(ve.piece.updateData(!1,me,a,l,u),v.setItemGraphicEl(me.dataIndex,ve.piece)):function U(me){!me||me.piece&&(x.remove(me.piece),me.piece=null)}(ve);else if(me){var Me=new Dx(me,a,l,u);x.add(Me),v.setItemGraphicEl(me.dataIndex,Me)}}(null==Pe?null:me[Pe],null==Ne?null:ve[Ne])}0===me.length&&0===ve.length||new td.Z(ve,me,Me,Me).add(Ae).update(Ae).remove(b.curry(Ae,null)).execute()}(M,this._oldChildren||[]),function ue(me,ve){ve.depth>0?(p.virtualPiece?p.virtualPiece.updateData(!1,me,a,l,u):(p.virtualPiece=new Dx(me,a,l,u),x.add(p.virtualPiece)),ve.piece.off("click"),p.virtualPiece.on("click",function(Me){p._rootToNode(ve.parentNode)})):p.virtualPiece&&(x.remove(p.virtualPiece),p.virtualPiece=null)}(m,y),this._initEvents(),this._oldChildren=M},s.prototype._initEvents=function(){var a=this;this.group.off("click"),this.group.on("click",function(l){var u=!1;a.seriesModel.getViewRoot().eachNode(function(p){if(!u&&p.piece&&p.piece===l.target){var v=p.getModel().get("nodeClick");if("rootToNode"===v)a._rootToNode(p);else if("link"===v){var m=p.getModel(),y=m.get("link");if(y){var x=m.get("target",!0)||"_blank";(0,Ia.MI)(y,x)}}u=!0}})})},s.prototype._rootToNode=function(a){a!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:Fi,from:this.uid,seriesId:this.seriesModel.id,targetNode:a})},s.prototype.containPoint=function(a,l){var h=l.getData().getItemLayout(0);if(h){var p=a[0]-h.cx,v=a[1]-h.cy,m=Math.sqrt(p*p+v*v);return m<=h.r&&m>=h.r0}},s.type="sunburst",s}(na.Z);function Tx(c){var s=0;b.each(c.children,function(l){Tx(l);var u=l.value;b.isArray(u)&&(u=u[0]),s+=u});var a=c.value;b.isArray(a)&&(a=a[0]),(null==a||isNaN(a))&&(a=s),a<0&&(a=0),b.isArray(c.value)?c.value[0]=a:c.value=a}const LM=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.ignoreStyleOnData=!0,a}return(0,Rt.ZT)(s,c),s.prototype.getInitialData=function(a,l){var u={name:a.name,children:a.data};Tx(u);var h=this._levelModels=b.map(a.levels||[],function(m){return new ki.Z(m,this,l)},this),p=U0.createTree(u,this,function v(m){m.wrapMethod("getItemModel",function(y,x){var C=p.getNodeByDataIndex(x),M=h[C.depth];return M&&(y.parentModel=M),y})});return p.data},s.prototype.optionUpdated=function(){this.resetViewRoot()},s.prototype.getDataParams=function(a){var l=c.prototype.getDataParams.apply(this,arguments),u=this.getData().tree.getNodeByDataIndex(a);return l.treePathInfo=pm(u,this),l},s.prototype.getLevelModel=function(a){return this._levelModels&&this._levelModels[a.depth]},s.prototype.getViewRoot=function(){return this._viewRoot},s.prototype.resetViewRoot=function(a){a?this._viewRoot=a:a=this._viewRoot;var l=this.getRawData().tree.root;(!a||a!==l&&!l.contains(a))&&(this._viewRoot=l)},s.prototype.enableAriaDecal=function(){_R(this)},s.type="series.sunburst",s.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},s}(zi.Z);var Ex=Math.PI/180;function Wn(c,s,a){s.eachSeriesByType(c,function(l){var u=l.get("center"),h=l.get("radius");b.isArray(h)||(h=[0,h]),b.isArray(u)||(u=[u,u]);var p=a.getWidth(),v=a.getHeight(),m=Math.min(p,v),y=(0,ft.GM)(u[0],p),x=(0,ft.GM)(u[1],v),C=(0,ft.GM)(h[0],m/2),M=(0,ft.GM)(h[1],m/2),E=-l.get("startAngle")*Ex,R=l.get("minAngle")*Ex,F=l.getData().tree.root,U=l.getViewRoot(),ue=U.depth,me=l.get("sort");null!=me&&OM(U,me);var ve=0;b.each(U.children,function(Ot){!isNaN(Ot.getValue())&&ve++});var Me=U.getValue(),Ae=Math.PI/(Me||ve)*2,Pe=U.depth>0,He=(M-C)/(U.height-(Pe?-1:1)||1),Ye=l.get("clockwise"),Qe=l.get("stillShowZeroSum"),it=Ye?1:-1,ct=function(Ot,Gt){if(Ot){var Ft=Gt;if(Ot!==F){var en=Ot.getValue(),Mn=0===Me&&Qe?Ae:en*Ae;Mn<R&&(Mn=R),Ft=Gt+it*Mn;var Tn=Ot.depth-ue-(Pe?-1:1),tr=C+He*Tn,_r=C+He*(Tn+1),hr=l.getLevelModel(Ot);if(hr){var jr=hr.get("r0",!0),pi=hr.get("r",!0),ni=hr.get("radius",!0);null!=ni&&(jr=ni[0],pi=ni[1]),null!=jr&&(tr=(0,ft.GM)(jr,m/2)),null!=pi&&(_r=(0,ft.GM)(pi,m/2))}Ot.setLayout({angle:Mn,startAngle:Gt,endAngle:Ft,clockwise:Ye,cx:y,cy:x,r0:tr,r:_r})}if(Ot.children&&Ot.children.length){var or=0;b.each(Ot.children,function(gi){or+=ct(gi,Gt+or)})}return Ft-Gt}};if(Pe){var gt=2*Math.PI;F.setLayout({angle:gt,startAngle:E,endAngle:E+gt,clockwise:Ye,cx:y,cy:x,r0:C,r:C+He})}ct(U,E)})}function OM(c,s){var a=c.children||[];c.children=function La(c,s){if(b.isFunction(s)){var a=b.map(c,function(u,h){var p=u.getValue();return{params:{depth:u.depth,height:u.height,dataIndex:u.dataIndex,getValue:function(){return p}},index:h}});return a.sort(function(u,h){return s(u.params,h.params)}),b.map(a,function(u){return c[u.index]})}var l="asc"===s;return c.sort(function(u,h){var p=(u.getValue()-h.getValue())*(l?1:-1);return 0===p?(u.dataIndex-h.dataIndex)*(l?-1:1):p})}(a,s),a.length&&b.each(c.children,function(l){OM(l,s)})}function Yr(c){var s={};c.eachSeriesByType("sunburst",function(l){var u=l.getData(),h=u.tree;h.eachNode(function(p){var m=p.getModel().getModel("itemStyle").getItemStyle();m.fill||(m.fill=function a(l,u,h){for(var p=l;p&&p.depth>1;)p=p.parentNode;var v=u.getColorFromPalette(p.name||p.dataIndex+"",s);return l.depth>1&&(0,b.isString)(v)&&(v=(0,wn.lift)(v,(l.depth-1)/(h-1)*.5)),v}(p,l,h.root.height));var y=u.ensureUniqueItemVisual(p.dataIndex,"style");(0,b.extend)(y,m)})})}var Qm={color:"fill",borderColor:"stroke"},NM={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},cc=(0,An.Yf)();const BM=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},s.prototype.getInitialData=function(a,l){return(0,ta.Z)(null,this)},s.prototype.getDataParams=function(a,l,u){var h=c.prototype.getDataParams.call(this,a,l);return u&&(h.info=cc(u).info),h},s.type="series.custom",s.dependencies=["grid","polar","geo","singleAxis","calendar"],s.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},s}(zi.Z);function VM(c,s){return s=s||[0,0],b.map(["x","y"],function(a,l){var u=this.getAxis(a),h=s[l],p=c[l]/2;return"category"===u.type?u.getBandWidth():Math.abs(u.dataToCoord(h-p)-u.dataToCoord(h+p))},this)}function HM(c,s){return s=s||[0,0],b.map([0,1],function(a){var l=s[a],u=c[a]/2,h=[],p=[];return h[a]=l-u,p[a]=l+u,h[1-a]=p[1-a]=s[1-a],Math.abs(this.dataToPoint(h)[a]-this.dataToPoint(p)[a])},this)}function u4(c,s){var a=this.getAxis(),l=s instanceof Array?s[0]:s,u=(c instanceof Array?c[0]:c)/2;return"category"===a.type?a.getBandWidth():Math.abs(a.dataToCoord(l-u)-a.dataToCoord(l+u))}function pO(c,s){return s=s||[0,0],b.map(["Radius","Angle"],function(a,l){var h=this["get"+a+"Axis"](),p=s[l],v=c[l]/2,m="category"===h.type?h.getBandWidth():Math.abs(h.dataToCoord(p-v)-h.dataToCoord(p+v));return"Angle"===a&&(m=m*Math.PI/180),m},this)}function Ax(c,s,a,l){return c&&(c.legacy||!1!==c.legacy&&!a&&!l&&"tspan"!==s&&("text"===s||(0,b.hasOwn)(c,"text")))}function WM(c,s,a){var u,h,p,l=c;if("text"===s)p=l;else{p={},(0,b.hasOwn)(l,"text")&&(p.text=l.text),(0,b.hasOwn)(l,"rich")&&(p.rich=l.rich),(0,b.hasOwn)(l,"textFill")&&(p.fill=l.textFill),(0,b.hasOwn)(l,"textStroke")&&(p.stroke=l.textStroke),(0,b.hasOwn)(l,"fontFamily")&&(p.fontFamily=l.fontFamily),(0,b.hasOwn)(l,"fontSize")&&(p.fontSize=l.fontSize),(0,b.hasOwn)(l,"fontStyle")&&(p.fontStyle=l.fontStyle),(0,b.hasOwn)(l,"fontWeight")&&(p.fontWeight=l.fontWeight),h={type:"text",style:p,silent:!0},u={};var v=(0,b.hasOwn)(l,"textPosition");a?u.position=v?l.textPosition:"inside":v&&(u.position=l.textPosition),(0,b.hasOwn)(l,"textPosition")&&(u.position=l.textPosition),(0,b.hasOwn)(l,"textOffset")&&(u.offset=l.textOffset),(0,b.hasOwn)(l,"textRotation")&&(u.rotation=l.textRotation),(0,b.hasOwn)(l,"textDistance")&&(u.distance=l.textDistance)}return jM(p,c),(0,b.each)(p.rich,function(m){jM(m,m)}),{textConfig:u,textContent:h}}function jM(c,s){!s||(s.font=s.textFont||s.font,(0,b.hasOwn)(s,"textStrokeWidth")&&(c.lineWidth=s.textStrokeWidth),(0,b.hasOwn)(s,"textAlign")&&(c.align=s.textAlign),(0,b.hasOwn)(s,"textVerticalAlign")&&(c.verticalAlign=s.textVerticalAlign),(0,b.hasOwn)(s,"textLineHeight")&&(c.lineHeight=s.textLineHeight),(0,b.hasOwn)(s,"textWidth")&&(c.width=s.textWidth),(0,b.hasOwn)(s,"textHeight")&&(c.height=s.textHeight),(0,b.hasOwn)(s,"textBackgroundColor")&&(c.backgroundColor=s.textBackgroundColor),(0,b.hasOwn)(s,"textPadding")&&(c.padding=s.textPadding),(0,b.hasOwn)(s,"textBorderColor")&&(c.borderColor=s.textBorderColor),(0,b.hasOwn)(s,"textBorderWidth")&&(c.borderWidth=s.textBorderWidth),(0,b.hasOwn)(s,"textBorderRadius")&&(c.borderRadius=s.textBorderRadius),(0,b.hasOwn)(s,"textBoxShadowColor")&&(c.shadowColor=s.textBoxShadowColor),(0,b.hasOwn)(s,"textBoxShadowBlur")&&(c.shadowBlur=s.textBoxShadowBlur),(0,b.hasOwn)(s,"textBoxShadowOffsetX")&&(c.shadowOffsetX=s.textBoxShadowOffsetX),(0,b.hasOwn)(s,"textBoxShadowOffsetY")&&(c.shadowOffsetY=s.textBoxShadowOffsetY))}function Ix(c,s,a){var l=c;l.textPosition=l.textPosition||a.position||"inside",null!=a.offset&&(l.textOffset=a.offset),null!=a.rotation&&(l.textRotation=a.rotation),null!=a.distance&&(l.textDistance=a.distance);var u=l.textPosition.indexOf("inside")>=0,h=c.fill||"#000";ZM(l,s);var p=null==l.textFill;return u?p&&(l.textFill=a.insideFill||"#fff",!l.textStroke&&a.insideStroke&&(l.textStroke=a.insideStroke),!l.textStroke&&(l.textStroke=h),null==l.textStrokeWidth&&(l.textStrokeWidth=2)):(p&&(l.textFill=c.fill||a.outsideFill||"#000"),!l.textStroke&&a.outsideStroke&&(l.textStroke=a.outsideStroke)),l.text=s.text,l.rich=s.rich,(0,b.each)(s.rich,function(v){ZM(v,v)}),l}function ZM(c,s){!s||((0,b.hasOwn)(s,"fill")&&(c.textFill=s.fill),(0,b.hasOwn)(s,"stroke")&&(c.textStroke=s.fill),(0,b.hasOwn)(s,"lineWidth")&&(c.textStrokeWidth=s.lineWidth),(0,b.hasOwn)(s,"font")&&(c.font=s.font),(0,b.hasOwn)(s,"fontStyle")&&(c.fontStyle=s.fontStyle),(0,b.hasOwn)(s,"fontWeight")&&(c.fontWeight=s.fontWeight),(0,b.hasOwn)(s,"fontSize")&&(c.fontSize=s.fontSize),(0,b.hasOwn)(s,"fontFamily")&&(c.fontFamily=s.fontFamily),(0,b.hasOwn)(s,"align")&&(c.textAlign=s.align),(0,b.hasOwn)(s,"verticalAlign")&&(c.textVerticalAlign=s.verticalAlign),(0,b.hasOwn)(s,"lineHeight")&&(c.textLineHeight=s.lineHeight),(0,b.hasOwn)(s,"width")&&(c.textWidth=s.width),(0,b.hasOwn)(s,"height")&&(c.textHeight=s.height),(0,b.hasOwn)(s,"backgroundColor")&&(c.textBackgroundColor=s.backgroundColor),(0,b.hasOwn)(s,"padding")&&(c.textPadding=s.padding),(0,b.hasOwn)(s,"borderColor")&&(c.textBorderColor=s.borderColor),(0,b.hasOwn)(s,"borderWidth")&&(c.textBorderWidth=s.borderWidth),(0,b.hasOwn)(s,"borderRadius")&&(c.textBorderRadius=s.borderRadius),(0,b.hasOwn)(s,"shadowColor")&&(c.textBoxShadowColor=s.shadowColor),(0,b.hasOwn)(s,"shadowBlur")&&(c.textBoxShadowBlur=s.shadowBlur),(0,b.hasOwn)(s,"shadowOffsetX")&&(c.textBoxShadowOffsetX=s.shadowOffsetX),(0,b.hasOwn)(s,"shadowOffsetY")&&(c.textBoxShadowOffsetY=s.shadowOffsetY),(0,b.hasOwn)(s,"textShadowColor")&&(c.textShadowColor=s.textShadowColor),(0,b.hasOwn)(s,"textShadowBlur")&&(c.textShadowBlur=s.textShadowBlur),(0,b.hasOwn)(s,"textShadowOffsetX")&&(c.textShadowOffsetX=s.textShadowOffsetX),(0,b.hasOwn)(s,"textShadowOffsetY")&&(c.textShadowOffsetY=s.textShadowOffsetY))}var YM=z(3945),Cd={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},XM=(0,b.keys)(Cd),qm=((0,b.reduce)(fe.dN,function(c,s){return c[s]=1,c},{}),fe.dN.join(", "),["","style","shape","extra"]),Sd=(0,An.Yf)();function $M(c,s,a,l,u){var h=c+"Animation",p=(0,on.ke)(c,l,u)||{},v=Sd(s).userDuring;return p.duration>0&&(p.during=v?(0,b.bind)(bO,{el:s,userDuring:v}):null,p.setToFinal=!0,p.scope=c),(0,b.extend)(p,a[h]),p}function fa(c,s,a,l){var u=(l=l||{}).dataIndex,h=l.isInit,p=l.clearStyle,v=a.isAnimationEnabled(),m=Sd(c),y=s.style;m.userDuring=s.during;var x={},C={};if(function Px(c,s,a){for(var l=0;l<XM.length;l++){var u=XM[l],h=Cd[u],p=s[u];p&&(a[h[0]]=p[0],a[h[1]]=p[1])}for(l=0;l<fe.dN.length;l++){var v=fe.dN[l];null!=s[v]&&(a[v]=s[v])}}(0,s,C),qM("shape",s,C),qM("extra",s,C),!h&&v&&(function xO(c,s,a){for(var l=s.transition,u=Dd(l)?fe.dN:(0,An.kF)(l||[]),h=0;h<u.length;h++){var p=u[h];"style"!==p&&"shape"!==p&&"extra"!==p&&(a[p]=c[p])}}(c,s,x),QM("shape",c,s,x),QM("extra",c,s,x),function qp(c,s,a,l){if(a){var h,u=c.style;if(u){var p=a.transition,v=s.transition;if(p&&!Dd(p)){var m=(0,An.kF)(p);!h&&(h=l.style={});for(var y=0;y<m.length;y++)h[x=m[y]]=u[x]}else if(c.getAnimationStyleProps&&(Dd(v)||Dd(p)||(0,b.indexOf)(v,"style")>=0)){var M=c.getAnimationStyleProps(),E=M?M.style:null;if(E){!h&&(h=l.style={});var R=(0,b.keys)(a);for(y=0;y<R.length;y++){var x;E[x=R[y]]&&(h[x]=u[x])}}}}}}(c,s,y,x)),C.style=y,function _O(c,s,a){var l=s.style;if(!c.isGroup&&l){if(a){c.useStyle({});for(var u=c.animators,h=0;h<u.length;h++){var p=u[h];"style"===p.targetName&&p.changeTarget(c.style)}}c.setStyle(l)}s&&(s.style=null,s&&c.attr(s),s.style=l)}(c,C,p),function Il(c,s){(0,b.hasOwn)(s,"silent")&&(c.silent=s.silent),(0,b.hasOwn)(s,"ignore")&&(c.ignore=s.ignore),c instanceof qu.ZP&&(0,b.hasOwn)(s,"invisible")&&(c.invisible=s.invisible),c instanceof ye.ZP&&(0,b.hasOwn)(s,"autoBatch")&&(c.autoBatch=s.autoBatch)}(c,s),v)if(h){var M={};(0,b.each)(qm,function(R){var F=R?s[R]:s;F&&F.enterFrom&&(R&&(M[R]=M[R]||{}),(0,b.extend)(R?M[R]:M,F.enterFrom))});var E=$M("enter",c,s,a,u);E.duration>0&&c.animateFrom(M,E)}else!function uc(c,s,a,l,u){if(u){var h=$M("update",c,s,l,a);h.duration>0&&c.animateFrom(u,h)}}(c,s,u||0,a,x);ii(c,s),y?c.dirty():c.markRedraw()}function ii(c,s){for(var a=Sd(c).leaveToProps,l=0;l<qm.length;l++){var u=qm[l],h=u?s[u]:s;h&&h.leaveTo&&(a||(a=Sd(c).leaveToProps={}),u&&(a[u]=a[u]||{}),(0,b.extend)(u?a[u]:a,h.leaveTo))}}function Bs(c,s,a,l){if(c){var u=c.parent,h=Sd(c).leaveToProps;if(h){var p=$M("update",c,s,a,0);p.done=function(){u.remove(c),l&&l()},c.animateTo(h,p)}else u.remove(c),l&&l()}}function Dd(c){return"all"===c}var Wa={},KM={setTransform:function(c,s){return Wa.el[c]=s,this},getTransform:function(c){return Wa.el[c]},setShape:function(c,s){var a=Wa.el;return(a.shape||(a.shape={}))[c]=s,a.dirtyShape&&a.dirtyShape(),this},getShape:function(c){var s=Wa.el.shape;if(s)return s[c]},setStyle:function(c,s){var a=Wa.el,l=a.style;return l&&(l[c]=s,a.dirtyStyle&&a.dirtyStyle()),this},getStyle:function(c){var s=Wa.el.style;if(s)return s[c]},setExtra:function(c,s){return(Wa.el.extra||(Wa.el.extra={}))[c]=s,this},getExtra:function(c){var s=Wa.el.extra;if(s)return s[c]}};function bO(){var c=this,s=c.el;if(s){var a=Sd(s).userDuring,l=c.userDuring;if(a!==l)return void(c.el=c.userDuring=null);Wa.el=s,l(KM)}}function QM(c,s,a,l){var u=a[c];if(u){var p,h=s[c];if(h){var v=a.transition,m=u.transition;if(m)if(!p&&(p=l[c]={}),Dd(m))(0,b.extend)(p,h);else for(var y=(0,An.kF)(m),x=0;x<y.length;x++)p[C=y[x]]=M=h[C];else if(Dd(v)||(0,b.indexOf)(v,c)>=0){!p&&(p=l[c]={});var E=(0,b.keys)(h);for(x=0;x<E.length;x++){var C,M;wO(u[C=E[x]],M=h[C])&&(p[C]=M)}}}}}function qM(c,s,a){var l=s[c];if(l)for(var u=a[c]={},h=(0,b.keys)(l),p=0;p<h.length;p++){var v=h[p];u[v]=(0,YM.V)(l[v])}}function wO(c,s){return(0,b.isArrayLike)(c)?c!==s:null!=c&&isFinite(c)}var JM=(0,An.Yf)(),eT=["percent","easing","shape","style","extra"];function Rx(c){c.stopAnimation("keyframe"),c.attr(JM(c))}function Md(c,s,a){if(a.isAnimationEnabled()&&s){if((0,b.isArray)(s))return void(0,b.each)(s,function(v){Md(c,v,a)});var l=s.keyframes,u=s.duration;if(a&&null==u){var h=(0,on.ke)("enter",a,0);u=h&&h.duration}if(l&&u){var p=JM(c);(0,b.each)(qm,function(v){var m;v&&!c[v]||(l.sort(function(x,C){return x.percent-C.percent}),(0,b.each)(l,function(x){var C=c.animators,M=v?x[v]:x;if(M){var E=(0,b.keys)(M);if(v||(E=(0,b.filter)(E,function(U){return(0,b.indexOf)(eT,U)<0})),E.length){m||((m=c.animate(v,s.loop,!0)).scope="keyframe");for(var R=0;R<C.length;R++)C[R]!==m&&C[R].targetName===m.targetName&&C[R].stopTracks(E);v&&(p[v]=p[v]||{});var F=v?p[v]:p;(0,b.each)(E,function(U){F[U]=((v?c[v]:c)||{})[U]}),m.whenWithKeys(u*x.percent,M,E,x.easing)}}}),m&&m.delay(s.delay||0).duration(u).start(s.easing))})}}}var jc="emphasis",Zc="normal",Mt="blur",Lo="select",ro=[Zc,jc,Mt,Lo],Jp={normal:["itemStyle"],emphasis:[jc,"itemStyle"],blur:[Mt,"itemStyle"],select:[Lo,"itemStyle"]},eg={normal:["label"],emphasis:[jc,"label"],blur:[Mt,"label"],select:[Lo,"label"]},tT=["x","y"],Vs={normal:{},emphasis:{},blur:{},select:{}},rT={cartesian2d:function zM(c){var s=c.master.getRect();return{coordSys:{type:"cartesian2d",x:s.x,y:s.y,width:s.width,height:s.height},api:{coord:function(a){return c.dataToPoint(a)},size:b.bind(VM,c)}}},geo:function UM(c){var s=c.getBoundingRect();return{coordSys:{type:"geo",x:s.x,y:s.y,width:s.width,height:s.height,zoom:c.getZoom()},api:{coord:function(a){return c.dataToPoint(a)},size:b.bind(HM,c)}}},single:function fO(c){var s=c.getRect();return{coordSys:{type:"singleAxis",x:s.x,y:s.y,width:s.width,height:s.height},api:{coord:function(a){return c.dataToPoint(a)},size:(0,b.bind)(u4,c)}}},polar:function GM(c){var s=c.getRadiusAxis(),a=c.getAngleAxis(),l=s.getExtent();return l[0]>l[1]&&l.reverse(),{coordSys:{type:"polar",cx:c.cx,cy:c.cy,r:l[1],r0:l[0]},api:{coord:function(u){var h=s.dataToRadius(u[0]),p=a.dataToAngle(u[1]),v=c.coordToPoint([h,p]);return v.push(h,p*Math.PI/180),v},size:b.bind(pO,c)}}},calendar:function gO(c){var s=c.getRect(),a=c.getRangeInfo();return{coordSys:{type:"calendar",x:s.x,y:s.y,width:s.width,height:s.height,cellWidth:c.getCellWidth(),cellHeight:c.getCellHeight(),rangeInfo:{start:a.start,end:a.end,weeks:a.weeks,dayCount:a.allDay}},api:{coord:function(l,u){return c.dataToPoint(l,u)}}}}};function Jm(c){return c instanceof ye.ZP}function e_(c){return c instanceof qu.ZP}const DO=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u,h){this._progressiveEls=null;var p=this._data,v=a.getData(),m=this.group,y=oT(a,v,l,u);p||m.removeAll(),v.diff(p).add(function(C){kx(u,null,C,y(C,h),a,m,v)}).remove(function(C){var M=p.getItemGraphicEl(C);M&&Bs(M,cc(M).option,a)}).update(function(C,M){var E=p.getItemGraphicEl(M);kx(u,E,C,y(C,h),a,m,v)}).execute();var x=a.get("clip",!0)?Rc(a.coordinateSystem,!1,a):null;x?m.setClipPath(x):m.removeClipPath(),this._data=v},s.prototype.incrementalPrepareRender=function(a,l,u){this.group.removeAll(),this._data=null},s.prototype.incrementalRender=function(a,l,u,h,p){var v=l.getData(),m=oT(l,v,u,h),y=this._progressiveEls=[];function x(E){E.isGroup||(E.incremental=!0,E.ensureState("emphasis").hoverLayer=!0)}for(var C=a.start;C<a.end;C++){var M=kx(null,null,C,m(C,p),l,this.group,v);M&&(M.traverse(x),y.push(M))}},s.prototype.eachRendered=function(a){Un.traverseElements(this._progressiveEls||this.group,a)},s.prototype.filterForExposedEvent=function(a,l,u,h){var p=l.element;if(null==p||u.name===p)return!0;for(;(u=u.__hostTarget||u.parent)&&u!==this.group;)if(u.name===p)return!0;return!1},s.type="custom",s}(na.Z);function Lx(c){var a,s=c.type;if("path"===s){var l=c.shape,u=null!=l.width&&null!=l.height?{x:l.x||0,y:l.y||0,width:l.width,height:l.height}:null,h=zx(l);a=Un.makePath(h,null,u,l.layout||"center"),cc(a).customPathData=h}else if("image"===s)a=new be.ZP({}),cc(a).customImagePath=c.style.image;else if("text"===s)a=new kt.ZP({});else if("group"===s)a=new Vn.Z;else{if("compoundPath"===s)throw new Error('"compoundPath" is not supported yet.');var p=Un.getShapeClass(s);p||(0,la._y)(""),a=new p}return cc(a).customGraphicType=s,a.name=c.name,a.z2EmphasisLift=1,a.z2SelectLift=1,a}function Ox(c,s,a,l,u,h,p){Rx(s);var v=u&&u.normal.cfg;v&&s.setTextConfig(v),l&&null==l.transition&&(l.transition=tT);var m=l&&l.style;if(m){if("text"===s.type){var y=m;(0,b.hasOwn)(y,"textFill")&&(y.fill=y.textFill),(0,b.hasOwn)(y,"textStroke")&&(y.stroke=y.textStroke)}var x=void 0,C=Jm(s)?m.decal:null;c&&C&&(C.dirty=!0,x=(0,om.I)(C,c)),m.__decalPattern=x}e_(s)&&m&&(x=m.__decalPattern)&&(m.decal=x),fa(s,l,h,{dataIndex:a,isInit:p,clearStyle:!0}),Md(s,l.keyframeAnimation,h)}function aT(c,s,a,l,u){var h=s.isGroup?null:s,p=u&&u[c].cfg;if(h){var v=h.ensureState(c);if(!1===l){var m=h.getState(c);m&&(m.style=null)}else v.style=l||null;p&&(v.textConfig=p),(0,bn.MA)(h)}}function TO(c,s,a){var l=a===Zc,u=l?s:t_(s,a),h=u?u.z2:null;null!=h&&((l?c:c.ensureState(a)).z2=h||0)}function oT(c,s,a,l){var u=c.get("renderItem"),h=c.coordinateSystem,p={};h&&(p=h.prepareCustoms?h.prepareCustoms(h):rT[h.type](h));for(var y,x,v=(0,b.defaults)({getWidth:l.getWidth,getHeight:l.getHeight,getZr:l.getZr,getDevicePixelRatio:l.getDevicePixelRatio,value:function Me(vt,gt){return null==gt&&(gt=y),s.getStore().get(s.getDimensionIndex(vt||0),gt)},style:function Pe(vt,gt){null==gt&&(gt=y);var Ot=s.getItemVisual(gt,"style"),Gt=Ot&&Ot.fill,Ft=Ot&&Ot.opacity,en=me(gt,Zc).getItemStyle();null!=Gt&&(en.fill=Gt),null!=Ft&&(en.opacity=Ft);var Mn={inheritColor:(0,b.isString)(Gt)?Gt:"#000"},Tn=ve(gt,Zc),tr=Bn.Lr(Tn,null,Mn,!1,!0);tr.text=Tn.getShallow("show")?(0,b.retrieve2)(c.getFormattedLabel(gt,Zc),kr(s,gt)):null;var _r=Bn.nC(Tn,Mn,!1);return Ye(vt,en),en=Ix(en,tr,_r),vt&&He(en,vt),en.legacy=!0,en},ordinalRawValue:function Ae(vt,gt){null==gt&&(gt=y);var Ot=s.getDimensionInfo(vt=vt||0);if(!Ot){var Gt=s.getDimensionIndex(vt);return Gt>=0?s.getStore().get(Gt,gt):void 0}var Ft=s.get(Ot.name,gt),en=Ot&&Ot.ordinalMeta;return en?en.categories[Ft]:Ft},styleEmphasis:function Ne(vt,gt){null==gt&&(gt=y);var Ot=me(gt,jc).getItemStyle(),Gt=ve(gt,jc),Ft=Bn.Lr(Gt,null,null,!0,!0);Ft.text=Gt.getShallow("show")?(0,b.retrieve3)(c.getFormattedLabel(gt,jc),c.getFormattedLabel(gt,Zc),kr(s,gt)):null;var en=Bn.nC(Gt,null,!0);return Ye(vt,Ot),Ot=Ix(Ot,Ft,en),vt&&He(Ot,vt),Ot.legacy=!0,Ot},visual:function Qe(vt,gt){if(null==gt&&(gt=y),(0,b.hasOwn)(Qm,vt)){var Ot=s.getItemVisual(gt,"style");return Ot?Ot[Qm[vt]]:null}if((0,b.hasOwn)(NM,vt))return s.getItemVisual(gt,vt)},barLayout:function it(vt){if("cartesian2d"===h.type){var gt=h.getBaseAxis();return(0,uo.Gk)((0,b.defaults)({axis:gt},vt))}},currentSeriesIndices:function ct(){return a.getCurrentSeriesIndices()},font:function ht(vt){return Bn.qT(vt,a)}},p.api||{}),m={context:{},seriesId:c.id,seriesName:c.name,seriesIndex:c.seriesIndex,coordSys:p.coordSys,dataInsideLength:s.count(),encode:EO(c.getData())},C={},M={},E={},R={},F=0;F<ro.length;F++){var U=ro[F];E[U]=c.getModel(Jp[U]),R[U]=c.getModel(eg[U])}function ue(vt){return vt===y?x||(x=s.getItemModel(vt)):s.getItemModel(vt)}function me(vt,gt){return s.hasItemOption?vt===y?C[gt]||(C[gt]=ue(vt).getModel(Jp[gt])):ue(vt).getModel(Jp[gt]):E[gt]}function ve(vt,gt){return s.hasItemOption?vt===y?M[gt]||(M[gt]=ue(vt).getModel(eg[gt])):ue(vt).getModel(eg[gt]):R[gt]}return function(vt,gt){return y=vt,x=null,C={},M={},u&&u((0,b.defaults)({dataIndexInside:vt,dataIndex:s.getRawIndex(vt),actionType:gt?gt.type:null},m),v)};function He(vt,gt){for(var Ot in gt)(0,b.hasOwn)(gt,Ot)&&(vt[Ot]=gt[Ot])}function Ye(vt,gt){vt&&(vt.textFill&&(gt.textFill=vt.textFill),vt.textPosition&&(gt.textPosition=vt.textPosition))}}function EO(c){var s={};return(0,b.each)(c.dimensions,function(a){var l=c.getDimensionInfo(a);if(!l.isExtraCoord){var u=l.coordDim;(s[u]=s[u]||[])[l.coordDimIndex]=c.getDimensionIndex(a)}}),s}function kx(c,s,a,l,u,h,p){if(l){var v=Nx(c,s,a,l,u,h);return v&&p.setItemGraphicEl(a,v),v&&(0,bn.k5)(v,l.focus,l.blurScope,l.emphasisDisabled),v}h.remove(s)}function Nx(c,s,a,l,u,h){var p=-1,v=s;s&&sT(s,l,u)&&(p=(0,b.indexOf)(h.childrenRef(),s),s=null);var m=!s,y=s;y?y.clearStates():(y=Lx(l),v&&function iT(c,s){s.copyTransform(c),e_(s)&&e_(c)&&(s.setStyle(c.style),s.z=c.z,s.z2=c.z2,s.zlevel=c.zlevel,s.invisible=c.invisible,s.ignore=c.ignore,Jm(s)&&Jm(c)&&s.setShape(c.shape))}(v,y)),!1===l.morph?y.disableMorphing=!0:y.disableMorphing&&(y.disableMorphing=!1),Vs.normal.cfg=Vs.normal.conOpt=Vs.emphasis.cfg=Vs.emphasis.conOpt=Vs.blur.cfg=Vs.blur.conOpt=Vs.select.cfg=Vs.select.conOpt=null,Vs.isLegacy=!1,function IO(c,s,a,l,u,h){if(!c.isGroup){lT(a,null,h),lT(a,jc,h);var p=h.normal.conOpt;if(null!=p||null!=h.emphasis.conOpt||null!=h.select.conOpt||null!=h.blur.conOpt){var x=c.getTextContent();if(!1===p)x&&c.removeTextContent();else{p=h.normal.conOpt=p||{type:"text"},x?x.clearStates():(x=Lx(p),c.setTextContent(x)),Ox(null,x,s,p,null,l,u);for(var C=p&&p.style,M=0;M<ro.length;M++){var E=ro[M];if(E!==Zc)aT(E,x,0,Fx(p,h[E].conOpt,E),null)}C?x.dirty():x.markRedraw()}}}}(y,a,l,u,m,Vs),function AO(c,s,a,l,u){var h=a.clipPath;if(!1===h)c&&c.getClipPath()&&c.removeClipPath();else if(h){var p=c.getClipPath();p&&sT(p,h,l)&&(p=null),p||(p=Lx(h),c.setClipPath(p)),Ox(null,p,s,h,null,l,u)}}(y,a,l,u,m),Ox(c,y,a,l,Vs,u,m),(0,b.hasOwn)(l,"info")&&(cc(y).info=l.info);for(var x=0;x<ro.length;x++){var C=ro[x];if(C!==Zc)aT(C,y,0,Fx(l,t_(l,C),C),Vs)}return function MO(c,s,a){if(!c.isGroup){var l=c,h=a.currentZLevel;l.z=a.currentZ,l.zlevel=h;var p=s.z2;null!=p&&(l.z2=p||0);for(var v=0;v<ro.length;v++)TO(l,s,ro[v])}}(y,l,u),"group"===l.type&&function cT(c,s,a,l,u){var h=l.children,p=h?h.length:0,v=l.$mergeChildren,m="byName"===v||l.diffChildrenByName,y=!1===v;if(p||m||y){if(m)return void function dT(c){new td.Z(c.oldChildren,c.newChildren,Bx,Bx,c).add(Vx).update(Vx).remove(hT).execute()}({api:c,oldChildren:s.children()||[],newChildren:h||[],dataIndex:a,seriesModel:u,group:s});y&&s.removeAll();for(var x=0;x<p;x++){var C=h[x],M=s.childAt(x);C?(null==C.ignore&&(C.ignore=!1),Nx(c,M,a,C,u,s)):M.ignore=!0}for(var E=s.childCount()-1;E>=x;E--){var R=s.childAt(E);uT(s,R,u)}}}(c,y,a,l,u),p>=0?h.replaceAt(y,p):h.add(y),y}function sT(c,s,a){var l=cc(c),u=s.type,h=s.shape,p=s.style;return a.isUniversalTransitionEnabled()||null!=u&&u!==l.customGraphicType||"path"===u&&function fT(c){return c&&((0,b.hasOwn)(c,"pathData")||(0,b.hasOwn)(c,"d"))}(h)&&zx(h)!==l.customPathData||"image"===u&&(0,b.hasOwn)(p,"image")&&p.image!==l.customImagePath}function lT(c,s,a){var l=s?t_(c,s):c,u=s?Fx(c,l,jc):c.style,h=c.type,p=l?l.textConfig:null,v=c.textContent,m=v?s?t_(v,s):v:null;if(u&&(a.isLegacy||Ax(u,h,!!p,!!m))){a.isLegacy=!0;var y=WM(u,h,!s);!p&&y.textConfig&&(p=y.textConfig),!m&&y.textContent&&(m=y.textContent)}!s&&m&&!m.type&&(m.type="text");var C=s?a[s]:a.normal;C.cfg=p,C.conOpt=m}function t_(c,s){return s?c?c[s]:null:c}function Fx(c,s,a){var l=s&&s.style;return null==l&&a===jc&&c&&(l=c.styleEmphasis),l}function uT(c,s,a){s&&Bs(s,cc(c).option,a)}function Bx(c,s){return(c&&c.name)??"e\0\0"+s}function Vx(c,s){var a=this.context;Nx(a.api,null!=s?a.oldChildren[s]:null,a.dataIndex,null!=c?a.newChildren[c]:null,a.seriesModel,a.group)}function hT(c){var s=this.context,a=s.oldChildren[c];a&&Bs(a,cc(a).option,s.seriesModel)}function zx(c){return c&&(c.pathData||c.d)}var Zo=(0,An.Yf)(),ef=b.clone,Yc=b.bind;function gT(c,s,a,l){Td(Zo(a).lastProp,l)||(Zo(a).lastProp=l,s?on.D(a,l,c):(a.stopAnimation(),a.attr(l)))}function Td(c,s){if(b.isObject(c)&&b.isObject(s)){var a=!0;return b.each(s,function(l,u){a=a&&Td(c[u],l)}),!!a}return c===s}function RO(c,s){c[s.get(["label","show"])?"show":"hide"]()}function Oo(c){return{x:c.x||0,y:c.y||0,rotation:c.rotation||0}}function LO(c,s,a){var l=s.get("z"),u=s.get("zlevel");c&&c.traverse(function(h){"group"!==h.type&&(null!=l&&(h.z=l),null!=u&&(h.zlevel=u),h.silent=a)})}const n_=function(){function c(){this._dragging=!1,this.animationThreshold=15}return c.prototype.render=function(s,a,l,u){var h=a.get("value"),p=a.get("status");if(this._axisModel=s,this._axisPointerModel=a,this._api=l,u||this._lastValue!==h||this._lastStatus!==p){this._lastValue=h,this._lastStatus=p;var v=this._group,m=this._handle;if(!p||"hide"===p)return v&&v.hide(),void(m&&m.hide());v&&v.show(),m&&m.show();var y={};this.makeElOption(y,h,s,a,l);var x=y.graphicKey;x!==this._lastGraphicKey&&this.clear(l),this._lastGraphicKey=x;var C=this._moveAnimation=this.determineAnimation(s,a);if(v){var M=b.curry(gT,a,C);this.updatePointerEl(v,y,M),this.updateLabelEl(v,y,M,a)}else v=this._group=new Vn.Z,this.createPointerEl(v,y,s,a),this.createLabelEl(v,y,s,a),l.getZr().add(v);LO(v,a,!0),this._renderHandle(h)}},c.prototype.remove=function(s){this.clear(s)},c.prototype.dispose=function(s){this.clear(s)},c.prototype.determineAnimation=function(s,a){var l=a.get("animation"),u=s.axis,h="category"===u.type,p=a.get("snap");if(!p&&!h)return!1;if("auto"===l||null==l){var v=this.animationThreshold;if(h&&u.getBandWidth()>v)return!0;if(p){var m=Zv(s).seriesDataCount,y=u.getExtent();return Math.abs(y[0]-y[1])/m>v}return!1}return!0===l},c.prototype.makeElOption=function(s,a,l,u,h){},c.prototype.createPointerEl=function(s,a,l,u){var h=a.pointer;if(h){var p=Zo(s).pointerEl=new Un[h.type](ef(a.pointer));s.add(p)}},c.prototype.createLabelEl=function(s,a,l,u){if(a.label){var h=Zo(s).labelEl=new kt.ZP(ef(a.label));s.add(h),RO(h,u)}},c.prototype.updatePointerEl=function(s,a,l){var u=Zo(s).pointerEl;u&&a.pointer&&(u.setStyle(a.pointer.style),l(u,{shape:a.pointer.shape}))},c.prototype.updateLabelEl=function(s,a,l,u){var h=Zo(s).labelEl;h&&(h.setStyle(a.label.style),l(h,{x:a.label.x,y:a.label.y}),RO(h,u))},c.prototype._renderHandle=function(s){if(!this._dragging&&this.updateHandleTransform){var v,a=this._axisPointerModel,l=this._api.getZr(),u=this._handle,h=a.getModel("handle"),p=a.get("status");if(!h.get("show")||!p||"hide"===p)return u&&l.remove(u),void(this._handle=null);this._handle||(v=!0,u=this._handle=Un.createIcon(h.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(y){vs.sT(y.event)},onmousedown:Yc(this._onHandleDragMove,this,0,0),drift:Yc(this._onHandleDragMove,this),ondragend:Yc(this._onHandleDragEnd,this)}),l.add(u)),LO(u,a,!1),u.setStyle(h.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var m=h.get("size");b.isArray(m)||(m=[m,m]),u.scaleX=m[0]/2,u.scaleY=m[1]/2,Eo.T9(this,"_doDispatchAxisPointer",h.get("throttle")||0,"fixRate"),this._moveHandleToValue(s,v)}},c.prototype._moveHandleToValue=function(s,a){gT(this._axisPointerModel,!a&&this._moveAnimation,this._handle,Oo(this.getHandleTransform(s,this._axisModel,this._axisPointerModel)))},c.prototype._onHandleDragMove=function(s,a){var l=this._handle;if(l){this._dragging=!0;var u=this.updateHandleTransform(Oo(l),[s,a],this._axisModel,this._axisPointerModel);this._payloadInfo=u,l.stopAnimation(),l.attr(Oo(u)),Zo(l).lastProp=null,this._doDispatchAxisPointer()}},c.prototype._doDispatchAxisPointer=function(){if(this._handle){var a=this._payloadInfo,l=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:a.cursorPoint[0],y:a.cursorPoint[1],tooltipOption:a.tooltipOption,axesInfo:[{axisDim:l.axis.dim,axisIndex:l.componentIndex}]})}},c.prototype._onHandleDragEnd=function(){if(this._dragging=!1,this._handle){var a=this._axisPointerModel.get("value");this._moveHandleToValue(a),this._api.dispatchAction({type:"hideTip"})}},c.prototype.clear=function(s){this._lastValue=null,this._lastStatus=null;var a=s.getZr(),l=this._group,u=this._handle;a&&l&&(this._lastGraphicKey=null,l&&a.remove(l),u&&a.remove(u),this._group=null,this._handle=null,this._payloadInfo=null),Eo.ZH(this,"_doDispatchAxisPointer")},c.prototype.doClear=function(){},c.prototype.buildLabel=function(s,a,l){return{x:s[l=l||0],y:s[1-l],width:a[l],height:a[1-l]}},c}();function r_(c){var l,s=c.get("type"),a=c.getModel(s+"Style");return"line"===s?(l=a.getLineStyle()).fill=null:"shadow"===s&&((l=a.getAreaStyle()).stroke=null),l}function OO(c,s,a,l,u){var p=vT(a.get("value"),s.axis,s.ecModel,a.get("seriesDataIndices"),{precision:a.get(["label","precision"]),formatter:a.get(["label","formatter"])}),v=a.getModel("label"),m=Ia.MY(v.get("padding")||0),y=v.getFont(),x=we.lP(p,y),C=u.position,M=x.width+m[1]+m[3],E=x.height+m[0]+m[2],R=u.align;"right"===R&&(C[0]-=M),"center"===R&&(C[0]-=M/2);var F=u.verticalAlign;"bottom"===F&&(C[1]-=E),"middle"===F&&(C[1]-=E/2),function Zn(c,s,a,l){var u=l.getWidth(),h=l.getHeight();c[0]=Math.min(c[0]+s,u)-s,c[1]=Math.min(c[1]+a,h)-a,c[0]=Math.max(c[0],0),c[1]=Math.max(c[1],0)}(C,M,E,l);var U=v.get("backgroundColor");(!U||"auto"===U)&&(U=s.get(["axisLine","lineStyle","color"])),c.label={x:C[0],y:C[1],style:(0,Bn.Lr)(v,{text:p,font:y,fill:v.getTextColor(),padding:m,backgroundColor:U}),z2:10}}function vT(c,s,a,l,u){c=s.scale.parse(c);var h=s.scale.getLabel({value:c},{precision:u.precision}),p=u.formatter;if(p){var v={value:wa.DX(s,{value:c}),axisDimension:s.dim,axisIndex:s.index,seriesData:[]};b.each(l,function(m){var y=a.getSeriesByIndex(m.seriesIndex),C=y&&y.getDataParams(m.dataIndexInside);C&&v.seriesData.push(C)}),b.isString(p)?h=p.replace("{value}",h):b.isFunction(p)&&(h=p(v))}return h}function Hx(c,s,a){var l=Hr.create();return Hr.rotate(l,l,a.rotation),Hr.translate(l,l,a.position),Un.applyTransform([c.dataToCoord(s),(a.labelOffset||0)+(a.labelDirection||1)*(a.labelMargin||0)],l)}function mT(c,s,a,l,u,h){var p=ql.innerTextLayout(a.rotation,0,a.labelDirection);a.labelMargin=u.get(["label","margin"]),OO(s,l,u,h,{position:Hx(l.axis,c,a),align:p.textAlign,verticalAlign:p.textVerticalAlign})}function wu(c,s,a){return{x1:c[a=a||0],y1:c[1-a],x2:s[a],y2:s[1-a]}}function _T(c,s,a){return{x:c[a=a||0],y:c[1-a],width:s[a],height:s[1-a]}}function tg(c,s,a,l,u,h){return{cx:c,cy:s,r0:a,r:l,startAngle:u,endAngle:h,clockwise:!0}}var i_=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,Rt.ZT)(s,c),s.prototype.makeElOption=function(a,l,u,h,p){var v=u.axis,m=v.grid,y=h.get("type"),x=pa(m,v).getOtherAxis(v).getGlobalExtent(),C=v.toGlobalCoord(v.dataToCoord(l,!0));if(y&&"none"!==y){var M=r_(h),E=h4[y](v,C,x);E.style=M,a.graphicKey=E.type,a.pointer=E}mT(l,a,JC(m.model,u),u,h,p)},s.prototype.getHandleTransform=function(a,l,u){var h=JC(l.axis.grid.model,l,{labelInside:!1});h.labelMargin=u.get(["handle","margin"]);var p=Hx(l.axis,a,h);return{x:p[0],y:p[1],rotation:h.rotation+(h.labelDirection<0?Math.PI:0)}},s.prototype.updateHandleTransform=function(a,l,u,h){var p=u.axis,v=p.grid,m=p.getGlobalExtent(!0),y=pa(v,p).getOtherAxis(p).getGlobalExtent(),x="x"===p.dim?0:1,C=[a.x,a.y];C[x]+=l[x],C[x]=Math.min(m[1],C[x]),C[x]=Math.max(m[0],C[x]);var M=(y[1]+y[0])/2,E=[M,M];return E[x]=C[x],{x:C[0],y:C[1],rotation:a.rotation,cursorPoint:E,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][x]}},s}(n_);function pa(c,s){var a={};return a[s.dim+"AxisIndex"]=s.index,c.getCartesian(a)}var h4={line:function(c,s,a){return{type:"Line",subPixelOptimize:!0,shape:wu([s,a[0]],[s,a[1]],Ux(c))}},shadow:function(c,s,a){var l=Math.max(1,c.getBandWidth());return{type:"Rect",shape:_T([s-l/2,a[0]],[l,a[1]-a[0]],Ux(c))}}};function Ux(c){return"x"===c.dim?0:1}const yT=i_,bT=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.type="axisPointer",s.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},s}(xa.Z);var Yo=z(9420),dc=(0,An.Yf)(),xT=b.each;function wT(c,s,a){if(!Yo.Z.node){var l=s.getZr();dc(l).records||(dc(l).records={}),function NO(c,s){function a(l,u){c.on(l,function(h){var p=function BO(c){var s={showTip:[],hideTip:[]},a=function(l){var u=s[l.type];u?u.push(l):(l.dispatchAction=a,c.dispatchAction(l))};return{dispatchAction:a,pendings:s}}(s);xT(dc(c).records,function(v){v&&u(v,h,p.dispatchAction)}),function FO(c,s){var u,a=c.showTip.length,l=c.hideTip.length;a?u=c.showTip[a-1]:l&&(u=c.hideTip[l-1]),u&&(u.dispatchAction=null,s.dispatchAction(u))}(p.pendings,s)})}dc(c).initialized||(dc(c).initialized=!0,a("click",b.curry(CT,"click")),a("mousemove",b.curry(CT,"mousemove")),a("globalout",ng))}(l,s),(dc(l).records[c]||(dc(l).records[c]={})).handler=a}}function ng(c,s,a){c.handler("leave",null,a)}function CT(c,s,a,l){s.handler(c,a,l)}function Gx(c,s){if(!Yo.Z.node){var a=s.getZr();(dc(a).records||{})[c]&&(dc(a).records[c]=null)}}const ST=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u){var h=l.getComponent("tooltip"),p=a.get("triggerOn")||h&&h.get("triggerOn")||"mousemove|click";wT("axisPointer",u,function(v,m,y){"none"!==p&&("leave"===v||p.indexOf(v)>=0)&&y({type:"updateAxisPointer",currTrigger:v,x:m&&m.offsetX,y:m&&m.offsetY})})},s.prototype.remove=function(a,l){Gx("axisPointer",l)},s.prototype.dispose=function(a,l){Gx("axisPointer",l)},s.type="axisPointer",s}(Ra.Z);function Wx(c,s){var u,a=[],l=c.seriesIndex;if(null==l||!(u=s.getSeriesByIndex(l)))return{point:[]};var h=u.getData(),p=An.gO(h,c);if(null==p||p<0||b.isArray(p))return{point:[]};var v=h.getItemGraphicEl(p),m=u.coordinateSystem;if(u.getTooltipPosition)a=u.getTooltipPosition(p)||[];else if(m&&m.dataToPoint)if(c.isStacked){var y=m.getBaseAxis(),C=m.getOtherAxis(y).dim,E="x"===C||"radius"===C?1:0,R=h.mapDimension(y.dim),F=[];F[E]=h.get(R,p),F[1-E]=h.get(h.getCalculationInfo("stackResultDimension"),p),a=m.dataToPoint(F)||[]}else a=m.dataToPoint(h.getValues(b.map(m.dimensions,function(ue){return h.mapDimension(ue)}),p))||[];else if(v){var U=v.getBoundingRect().clone();U.applyTransform(v.transform),a=[U.x+U.width/2,U.y+U.height/2]}return{point:a,el:v}}var jx=(0,An.Yf)();function VO(c,s,a){var l=c.currTrigger,u=[c.x,c.y],h=c,p=c.dispatchAction||(0,b.bind)(a.dispatchAction,a),v=s.getComponent("axisPointer").coordSysAxesInfo;if(v){ig(u)&&(u=Wx({seriesIndex:h.seriesIndex,dataIndex:h.dataIndex},s).point);var m=ig(u),y=h.axesInfo,x=v.axesInfo,C="leave"===l||ig(u),M={},E={},R={list:[],map:{}},F={showPointer:(0,b.curry)(zO,E),showTooltip:(0,b.curry)(HO,R)};(0,b.each)(v.coordSysMap,function(ue,me){var ve=m||ue.containPoint(u);(0,b.each)(v.coordSysAxesInfo[me],function(Me,Ae){var Pe=Me.axis,Ne=function TT(c,s){for(var a=0;a<(c||[]).length;a++){var l=c[a];if(s.axis.dim===l.axisDim&&s.axis.model.componentIndex===l.axisIndex)return l}}(y,Me);if(!C&&ve&&(!y||Ne)){var He=Ne&&Ne.value;null==He&&!m&&(He=Pe.pointToData(u)),null!=He&&tf(Me,He,F,!1,M)}})});var U={};return(0,b.each)(x,function(ue,me){var ve=ue.linkGroup;ve&&!E[me]&&(0,b.each)(ve.axesInfo,function(Me,Ae){var Pe=E[Ae];if(Me!==ue&&Pe){var Ne=Pe.value;ve.mapper&&(Ne=ue.axis.scale.parse(ve.mapper(Ne,ET(Me),ET(ue)))),U[ue.key]=Ne}})}),(0,b.each)(U,function(ue,me){tf(x[me],ue,F,!0,M)}),function UO(c,s,a){var l=a.axesInfo=[];(0,b.each)(s,function(u,h){var p=u.axisPointerModel.option,v=c[h];v?(!u.useHandle&&(p.status="show"),p.value=v.value,p.seriesDataIndices=(v.payloadBatch||[]).slice()):!u.useHandle&&(p.status="hide"),"show"===p.status&&l.push({axisDim:u.axis.dim,axisIndex:u.axis.model.componentIndex,value:p.value})})}(E,x,M),function DT(c,s,a,l){if(!ig(s)&&c.list.length){var u=((c.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};l({type:"showTip",escapeConnect:!0,x:s[0],y:s[1],tooltipOption:a.tooltipOption,position:a.position,dataIndexInside:u.dataIndexInside,dataIndex:u.dataIndex,seriesIndex:u.seriesIndex,dataByCoordSys:c.list})}else l({type:"hideTip"})}(R,u,c,p),function MT(c,s,a){var l=a.getZr(),u="axisPointerLastHighlights",h=jx(l)[u]||{},p=jx(l)[u]={};(0,b.each)(c,function(y,x){var C=y.axisPointerModel.option;"show"===C.status&&y.triggerEmphasis&&(0,b.each)(C.seriesDataIndices,function(M){p[M.seriesIndex+" | "+M.dataIndex]=M})});var v=[],m=[];(0,b.each)(h,function(y,x){!p[x]&&m.push(y)}),(0,b.each)(p,function(y,x){!h[x]&&v.push(y)}),m.length&&a.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:m}),v.length&&a.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:v})}(x,0,a),M}}function tf(c,s,a,l,u){var h=c.axis;if(!h.scale.isBlank()&&h.containData(s)){if(!c.involveSeries)return void a.showPointer(c,s);var p=function rg(c,s){var a=s.axis,l=a.dim,u=c,h=[],p=Number.MAX_VALUE,v=-1;return(0,b.each)(s.seriesModels,function(m,y){var C,M,x=m.getData().mapDimensionsAll(l);if(m.getAxisTooltipData){var E=m.getAxisTooltipData(x,c,a);M=E.dataIndices,C=E.nestestValue}else{if(!(M=m.getData().indicesOfNearest(x[0],c,"category"===a.type?.5:null)).length)return;C=m.getData().get(x[0],M[0])}if(null!=C&&isFinite(C)){var R=c-C,F=Math.abs(R);F<=p&&((F<p||R>=0&&v<0)&&(p=F,v=R,u=C,h.length=0),(0,b.each)(M,function(U){h.push({seriesIndex:m.seriesIndex,dataIndexInside:U,dataIndex:m.getData().getRawIndex(U)})}))}}),{payloadBatch:h,snapToValue:u}}(s,c),v=p.payloadBatch,m=p.snapToValue;v[0]&&null==u.seriesIndex&&(0,b.extend)(u,v[0]),!l&&c.snap&&h.containData(m)&&null!=m&&(s=m),a.showPointer(c,s,v),a.showTooltip(c,p,m)}}function zO(c,s,a,l){c[s.key]={value:a,payloadBatch:l}}function HO(c,s,a,l){var u=a.payloadBatch,h=s.axis,p=h.model,v=s.axisPointerModel;if(s.triggerTooltip&&u.length){var m=s.coordSys.model,y=bh(m),x=c.map[y];x||(x=c.map[y]={coordSysId:m.id,coordSysIndex:m.componentIndex,coordSysType:m.type,coordSysMainType:m.mainType,dataByAxis:[]},c.list.push(x)),x.dataByAxis.push({axisDim:h.dim,axisIndex:p.componentIndex,axisType:p.type,axisId:p.id,value:l,valueLabelOpt:{precision:v.get(["label","precision"]),formatter:v.get(["label","formatter"])},seriesDataIndices:u.slice()})}}function ET(c){var s=c.axis.model,a={},l=a.axisDim=c.axis.dim;return a.axisIndex=a[l+"AxisIndex"]=s.componentIndex,a.axisName=a[l+"AxisName"]=s.name,a.axisId=a[l+"AxisId"]=s.id,a}function ig(c){return!c||null==c[0]||isNaN(c[0])||null==c[1]||isNaN(c[1])}function ag(c){zc.registerAxisPointerClass("CartesianAxisPointer",yT),c.registerComponentModel(bT),c.registerComponentView(ST),c.registerPreprocessor(function(s){if(s){(!s.axisPointer||0===s.axisPointer.length)&&(s.axisPointer={});var a=s.axisPointer.link;a&&!(0,b.isArray)(a)&&(s.axisPointer.link=[a])}}),c.registerProcessor(c.PRIORITY.PROCESSOR.STATISTIC,function(s,a){s.getComponent("axisPointer").coordSysAxesInfo=function kP(c,s){var a={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function NP(c,s,a){var l=s.getComponent("tooltip"),u=s.getComponent("axisPointer"),h=u.get("link",!0)||[],p=[];(0,b.each)(a.getCoordinateSystems(),function(v){if(v.axisPointerEnabled){var m=bh(v.model),y=c.coordSysAxesInfo[m]={};c.coordSysMap[m]=v;var C=v.model.getModel("tooltip",l);if((0,b.each)(v.getAxes(),(0,b.curry)(F,!1,null)),v.getTooltipAxes&&l&&C.get("show")){var M="axis"===C.get("trigger"),E="cross"===C.get(["axisPointer","type"]),R=v.getTooltipAxes(C.get(["axisPointer","axis"]));(M||E)&&(0,b.each)(R.baseAxes,(0,b.curry)(F,!E||"cross",M)),E&&(0,b.each)(R.otherAxes,(0,b.curry)(F,"cross",!1))}}function F(U,ue,me){var ve=me.model.getModel("axisPointer",u),Me=ve.get("show");if(Me&&("auto"!==Me||U||Yv(ve))){null==ue&&(ue=ve.get("triggerTooltip")),ve=U?function h0(c,s,a,l,u,h){var p=s.getModel("axisPointer"),m={};(0,b.each)(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(M){m[M]=(0,b.clone)(p.get(M))}),m.snap="category"!==c.type&&!!h,"cross"===p.get("type")&&(m.type="line");var y=m.label||(m.label={});if(null==y.show&&(y.show=!1),"cross"===u){var x=p.get(["label","show"]);if(y.show=x??!0,!h){var C=m.lineStyle=p.get("crossStyle");C&&(0,b.defaults)(y,C.textStyle)}}return c.model.getModel("axisPointer",new ki.Z(m,a,l))}(me,C,u,s,U,ue):ve;var Ae=ve.get("snap"),Pe=ve.get("triggerEmphasis"),Ne=bh(me.model),He=ue||Ae||"category"===me.type,Ye=c.axesInfo[Ne]={key:Ne,axis:me,coordSys:v,axisPointerModel:ve,triggerTooltip:ue,triggerEmphasis:Pe,involveSeries:He,snap:Ae,useHandle:Yv(ve),seriesModels:[],linkGroup:null};y[Ne]=Ye,c.seriesInvolved=c.seriesInvolved||He;var Qe=function iS(c,s){for(var a=s.model,l=s.dim,u=0;u<c.length;u++){var h=c[u]||{};if(up(h[l+"AxisId"],a.id)||up(h[l+"AxisIndex"],a.componentIndex)||up(h[l+"AxisName"],a.name))return u}}(h,me);if(null!=Qe){var it=p[Qe]||(p[Qe]={axesInfo:{}});it.axesInfo[Ne]=Ye,it.mapper=h[Qe].mapper,Ye.linkGroup=it}}}})}(a,c,s),a.seriesInvolved&&function f0(c,s){s.eachSeries(function(a){var l=a.coordinateSystem,u=a.get(["tooltip","trigger"],!0),h=a.get(["tooltip","show"],!0);!l||"none"===u||!1===u||"item"===u||!1===h||!1===a.get(["axisPointer","show"],!0)||(0,b.each)(c.coordSysAxesInfo[bh(l.model)],function(p){var v=p.axis;l.getAxis(v.dim)===v&&(p.seriesModels.push(a),null==p.seriesDataCount&&(p.seriesDataCount=0),p.seriesDataCount+=a.getData().count())})})}(a,c),a}(s,a)}),c.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},VO)}var f4=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,Rt.ZT)(s,c),s.prototype.makeElOption=function(a,l,u,h,p){var v=u.axis;"angle"===v.dim&&(this.animationThreshold=Math.PI/18);var m=v.polar,x=m.getOtherAxis(v).getExtent(),C=v.dataToCoord(l),M=h.get("type");if(M&&"none"!==M){var E=r_(h),R=g4[M](v,m,C,x);R.style=E,a.graphicKey=R.type,a.pointer=R}var U=function p4(c,s,a,l,u){var h=s.axis,p=h.dataToCoord(c),v=l.getAngleAxis().getExtent()[0];v=v/180*Math.PI;var y,x,C,m=l.getRadiusAxis().getExtent();if("radius"===h.dim){var M=Hr.create();Hr.rotate(M,M,v),Hr.translate(M,M,[l.cx,l.cy]),y=Un.applyTransform([p,-u],M);var E=s.getModel("axisLabel").get("rotate")||0,R=ql.innerTextLayout(v,E*Math.PI/180,-1);x=R.textAlign,C=R.textVerticalAlign}else{var F=m[1];y=l.coordToPoint([F+u,p]);var U=l.cx,ue=l.cy;x=Math.abs(y[0]-U)/F<.3?"center":y[0]>U?"left":"right",C=Math.abs(y[1]-ue)/F<.3?"middle":y[1]>ue?"top":"bottom"}return{position:y,align:x,verticalAlign:C}}(l,u,0,m,h.get(["label","margin"]));OO(a,u,h,p,U)},s}(n_),g4={line:function(c,s,a,l){return"angle"===c.dim?{type:"Line",shape:wu(s.coordToPoint([l[0],a]),s.coordToPoint([l[1],a]))}:{type:"Circle",shape:{cx:s.cx,cy:s.cy,r:a}}},shadow:function(c,s,a,l){var u=Math.max(1,c.getBandWidth()),h=Math.PI/180;return"angle"===c.dim?{type:"Sector",shape:tg(s.cx,s.cy,l[0],l[1],(-a-u/2)*h,(u/2-a)*h)}:{type:"Sector",shape:tg(s.cx,s.cy,a-u/2,a+u/2,0,2*Math.PI)}}};const v4=f4,o_=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.findAxisModel=function(a){var l;return this.ecModel.eachComponent(a,function(h){h.getCoordSysModel()===this&&(l=h)},this),l},s.type="polar",s.dependencies=["radiusAxis","angleAxis"],s.defaultOption={z:0,center:["50%","50%"],radius:"80%"},s}(xa.Z);var Zx=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,Rt.ZT)(s,c),s.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",An.C6).models[0]},s.type="polarAxis",s}(xa.Z);b.mixin(Zx,lp.W);var WO=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.type="angleAxis",s}(Zx),IT=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.type="radiusAxis",s}(Zx),Ed=function(c){function s(a,l){return c.call(this,"radius",a,l)||this}return(0,Rt.ZT)(s,c),s.prototype.pointToData=function(a,l){return this.polar.pointToData(a,l)["radius"===this.dim?0:1]},s}(Is.Z);Ed.prototype.dataToRadius=Is.Z.prototype.dataToCoord,Ed.prototype.radiusToData=Is.Z.prototype.coordToData;const jO=Ed;var ZO=(0,An.Yf)(),Yx=function(c){function s(a,l){return c.call(this,"angle",a,l||[0,360])||this}return(0,Rt.ZT)(s,c),s.prototype.pointToData=function(a,l){return this.polar.pointToData(a,l)["radius"===this.dim?0:1]},s.prototype.calculateCategoryInterval=function(){var a=this,l=a.getLabelModel(),u=a.scale,h=u.getExtent(),p=u.count();if(h[1]-h[0]<1)return 0;var v=h[0],m=a.dataToCoord(v+1)-a.dataToCoord(v),y=Math.abs(m),x=we.lP(null==v?"":v+"",l.getFont(),"center","top"),M=Math.max(x.height,7)/y;isNaN(M)&&(M=1/0);var E=Math.max(0,Math.floor(M)),R=ZO(a.model),F=R.lastAutoInterval,U=R.lastTickCount;return null!=F&&null!=U&&Math.abs(F-E)<=1&&Math.abs(U-p)<=1&&F>E?E=F:(R.lastTickCount=p,R.lastAutoInterval=E),E},s}(Is.Z);Yx.prototype.dataToAngle=Is.Z.prototype.dataToCoord,Yx.prototype.angleToData=Is.Z.prototype.coordToData;const YO=Yx;var PT=["radius","angle"];function LT(c){var s=c.seriesModel,a=c.polarModel;return a&&a.coordinateSystem||s&&s.coordinateSystem}const XO=function(){function c(s){this.dimensions=PT,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new jO,this._angleAxis=new YO,this.axisPointerEnabled=!0,this.name=s||"",this._radiusAxis.polar=this._angleAxis.polar=this}return c.prototype.containPoint=function(s){var a=this.pointToCoord(s);return this._radiusAxis.contain(a[0])&&this._angleAxis.contain(a[1])},c.prototype.containData=function(s){return this._radiusAxis.containData(s[0])&&this._angleAxis.containData(s[1])},c.prototype.getAxis=function(s){return this["_"+s+"Axis"]},c.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},c.prototype.getAxesByScale=function(s){var a=[],l=this._angleAxis,u=this._radiusAxis;return l.scale.type===s&&a.push(l),u.scale.type===s&&a.push(u),a},c.prototype.getAngleAxis=function(){return this._angleAxis},c.prototype.getRadiusAxis=function(){return this._radiusAxis},c.prototype.getOtherAxis=function(s){var a=this._angleAxis;return s===a?this._radiusAxis:a},c.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},c.prototype.getTooltipAxes=function(s){var a=null!=s&&"auto"!==s?this.getAxis(s):this.getBaseAxis();return{baseAxes:[a],otherAxes:[this.getOtherAxis(a)]}},c.prototype.dataToPoint=function(s,a){return this.coordToPoint([this._radiusAxis.dataToRadius(s[0],a),this._angleAxis.dataToAngle(s[1],a)])},c.prototype.pointToData=function(s,a){var l=this.pointToCoord(s);return[this._radiusAxis.radiusToData(l[0],a),this._angleAxis.angleToData(l[1],a)]},c.prototype.pointToCoord=function(s){var a=s[0]-this.cx,l=s[1]-this.cy,u=this.getAngleAxis(),h=u.getExtent(),p=Math.min(h[0],h[1]),v=Math.max(h[0],h[1]);u.inverse?p=v-360:v=p+360;var m=Math.sqrt(a*a+l*l);a/=m,l/=m;for(var y=Math.atan2(-l,a)/Math.PI*180,x=y<p?1:-1;y<p||y>v;)y+=360*x;return[m,y]},c.prototype.coordToPoint=function(s){var a=s[0],l=s[1]/180*Math.PI;return[Math.cos(l)*a+this.cx,-Math.sin(l)*a+this.cy]},c.prototype.getArea=function(){var s=this.getAngleAxis(),l=this.getRadiusAxis().getExtent().slice();l[0]>l[1]&&l.reverse();var u=s.getExtent(),h=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:l[0],r:l[1],startAngle:-u[0]*h,endAngle:-u[1]*h,clockwise:s.inverse,contain:function(p,v){var m=p-this.cx,y=v-this.cy,x=m*m+y*y-1e-4,C=this.r,M=this.r0;return x<=C*C&&x>=M*M}}},c.prototype.convertToPixel=function(s,a,l){return LT(a)===this?this.dataToPoint(l):null},c.prototype.convertFromPixel=function(s,a,l){return LT(a)===this?this.pointToData(l):null},c}();function $O(c,s){var a=this,l=a.getAngleAxis(),u=a.getRadiusAxis();if(l.scale.setExtent(1/0,-1/0),u.scale.setExtent(1/0,-1/0),c.eachSeries(function(v){if(v.coordinateSystem===a){var m=v.getData();b.each((0,wa.PY)(m,"radius"),function(y){u.scale.unionExtentFromData(m,y)}),b.each((0,wa.PY)(m,"angle"),function(y){l.scale.unionExtentFromData(m,y)})}}),(0,wa.Jk)(l.scale,l.model),(0,wa.Jk)(u.scale,u.model),"category"===l.type&&!l.onBand){var h=l.getExtent(),p=360/l.scale.count();l.inverse?h[1]+=p:h[1]-=p,l.setExtent(h[0],h[1])}}function kT(c,s){var a;if(c.type=s.get("type"),c.scale=(0,wa.aG)(s),c.onBand=s.get("boundaryGap")&&"category"===c.type,c.inverse=s.get("inverse"),function OT(c){return"angleAxis"===c.mainType}(s)){c.inverse=c.inverse!==s.get("clockwise");var l=s.get("startAngle"),u=null!==(a=s.get("endAngle"))&&void 0!==a?a:l+(c.inverse?-360:360);c.setExtent(l,u)}s.axis=c,c.model=s}const KO={dimensions:PT,create:function(c,s){var a=[];return c.eachComponent("polar",function(l,u){var h=new XO(u+"");h.update=$O;var p=h.getRadiusAxis(),v=h.getAngleAxis(),m=l.findAxisModel("radiusAxis"),y=l.findAxisModel("angleAxis");kT(p,m),kT(v,y),function og(c,s,a){var l=s.get("center"),u=a.getWidth(),h=a.getHeight();c.cx=(0,ft.GM)(l[0],u),c.cy=(0,ft.GM)(l[1],h);var p=c.getRadiusAxis(),v=Math.min(u,h)/2,m=s.get("radius");null==m?m=[0,"100%"]:b.isArray(m)||(m=[0,m]);var y=[(0,ft.GM)(m[0],v),(0,ft.GM)(m[1],v)];p.inverse?p.setExtent(y[1],y[0]):p.setExtent(y[0],y[1])}(h,l,s),a.push(h),l.coordinateSystem=h,h.model=l}),c.eachSeries(function(l){if("polar"===l.get("coordinateSystem")){var u=l.getReferringComponents("polar",An.C6).models[0];l.coordinateSystem=u.coordinateSystem}}),a}};var FT=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function s_(c,s,a){s[1]>s[0]&&(s=s.slice().reverse());var l=c.coordToPoint([s[0],a]),u=c.coordToPoint([s[1],a]);return{x1:l[0],y1:l[1],x2:u[0],y2:u[1]}}function nf(c){return c.getRadiusAxis().inverse?0:1}function BT(c){var s=c[0],a=c[c.length-1];s&&a&&Math.abs(Math.abs(s.coord-a.coord)-360)<1e-4&&c.pop()}var VT=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.axisPointerClass="PolarAxisPointer",a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l){if(this.group.removeAll(),a.get("show")){var u=a.axis,h=u.polar,p=h.getRadiusAxis().getExtent(),v=u.getTicksCoords(),m=u.getMinorTicksCoords(),y=b.map(u.getViewLabels(),function(x){x=b.clone(x);var C=u.scale,M="ordinal"===C.type?C.getRawOrdinalNumber(x.tickValue):x.tickValue;return x.coord=u.dataToCoord(M),x});BT(y),BT(v),b.each(FT,function(x){a.get([x,"show"])&&(!u.scale.isBlank()||"axisLine"===x)&&zT[x](this.group,a,h,v,m,p,y)},this)}},s.type="angleAxis",s}(zc),zT={axisLine:function(c,s,a,l,u,h){var M,p=s.getModel(["axisLine","lineStyle"]),v=a.getAngleAxis(),m=Math.PI/180,y=v.getExtent(),x=nf(a),C=x?0:1,E=360===Math.abs(y[1]-y[0])?"Circle":"Arc";(M=0===h[C]?new Un[E]({shape:{cx:a.cx,cy:a.cy,r:h[x],startAngle:-y[0]*m,endAngle:-y[1]*m,clockwise:v.inverse},style:p.getLineStyle(),z2:1,silent:!0}):new w0.Z({shape:{cx:a.cx,cy:a.cy,r:h[x],r0:h[C]},style:p.getLineStyle(),z2:1,silent:!0})).style.fill=null,c.add(M)},axisTick:function(c,s,a,l,u,h){var p=s.getModel("axisTick"),v=(p.get("inside")?-1:1)*p.get("length"),m=h[nf(a)],y=b.map(l,function(x){return new no.Z({shape:s_(a,[m,m+v],x.coord)})});c.add(Un.mergePath(y,{style:b.defaults(p.getModel("lineStyle").getLineStyle(),{stroke:s.get(["axisLine","lineStyle","color"])})}))},minorTick:function(c,s,a,l,u,h){if(u.length){for(var p=s.getModel("axisTick"),v=s.getModel("minorTick"),m=(p.get("inside")?-1:1)*v.get("length"),y=h[nf(a)],x=[],C=0;C<u.length;C++)for(var M=0;M<u[C].length;M++)x.push(new no.Z({shape:s_(a,[y,y+m],u[C][M].coord)}));c.add(Un.mergePath(x,{style:b.defaults(v.getModel("lineStyle").getLineStyle(),b.defaults(p.getLineStyle(),{stroke:s.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(c,s,a,l,u,h,p){var v=s.getCategories(!0),m=s.getModel("axisLabel"),y=m.get("margin"),x=s.get("triggerEvent");b.each(p,function(C,M){var E=m,R=C.tickValue,F=h[nf(a)],U=a.coordToPoint([F+y,C.coord]),ue=a.cx,me=a.cy,ve=Math.abs(U[0]-ue)/F<.3?"center":U[0]>ue?"left":"right",Me=Math.abs(U[1]-me)/F<.3?"middle":U[1]>me?"top":"bottom";if(v&&v[R]){var Ae=v[R];b.isObject(Ae)&&Ae.textStyle&&(E=new ki.Z(Ae.textStyle,m,m.ecModel))}var Pe=new kt.ZP({silent:ql.isLabelSilent(s),style:(0,Bn.Lr)(E,{x:U[0],y:U[1],fill:E.getTextColor()||s.get(["axisLine","lineStyle","color"]),text:C.formattedLabel,align:ve,verticalAlign:Me})});if(c.add(Pe),x){var Ne=ql.makeAxisEventDataBase(s);Ne.targetType="axisLabel",Ne.value=C.rawLabel,(0,Fn.A)(Pe).eventData=Ne}},this)},splitLine:function(c,s,a,l,u,h){var v=s.getModel("splitLine").getModel("lineStyle"),m=v.get("color"),y=0;m=m instanceof Array?m:[m];for(var x=[],C=0;C<l.length;C++){var M=y++%m.length;x[M]=x[M]||[],x[M].push(new no.Z({shape:s_(a,h,l[C].coord)}))}for(C=0;C<x.length;C++)c.add(Un.mergePath(x[C],{style:b.defaults({stroke:m[C%m.length]},v.getLineStyle()),silent:!0,z:s.get("z")}))},minorSplitLine:function(c,s,a,l,u,h){if(u.length){for(var v=s.getModel("minorSplitLine").getModel("lineStyle"),m=[],y=0;y<u.length;y++)for(var x=0;x<u[y].length;x++)m.push(new no.Z({shape:s_(a,h,u[y][x].coord)}));c.add(Un.mergePath(m,{style:v.getLineStyle(),silent:!0,z:s.get("z")}))}},splitArea:function(c,s,a,l,u,h){if(l.length){var v=s.getModel("splitArea").getModel("areaStyle"),m=v.get("color"),y=0;m=m instanceof Array?m:[m];for(var x=[],C=Math.PI/180,M=-l[0].coord*C,E=Math.min(h[0],h[1]),R=Math.max(h[0],h[1]),F=s.get("clockwise"),U=1,ue=l.length;U<=ue;U++){var me=U===ue?l[0].coord:l[U].coord,ve=y++%m.length;x[ve]=x[ve]||[],x[ve].push(new hs.C({shape:{cx:a.cx,cy:a.cy,r0:E,r:R,startAngle:M,endAngle:-me*C,clockwise:F},silent:!0})),M=-me*C}for(U=0;U<x.length;U++)c.add(Un.mergePath(x[U],{style:b.defaults({fill:m[U%m.length]},v.getAreaStyle()),silent:!0}))}}};const QO=VT;var qO=["axisLine","axisTickLabel","axisName"],JO=["splitLine","splitArea","minorSplitLine"],Xx=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.axisPointerClass="PolarAxisPointer",a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l){if(this.group.removeAll(),a.get("show")){var u=this._axisGroup,h=this._axisGroup=new Vn.Z;this.group.add(h);var p=a.axis,v=p.polar,m=v.getAngleAxis(),y=p.getTicksCoords(),x=p.getMinorTicksCoords(),C=m.getExtent()[0],M=p.getExtent(),E=function HT(c,s,a){return{position:[c.cx,c.cy],rotation:a/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:s.getModel("axisLabel").get("rotate"),z2:1}}(v,a,C),R=new ql(a,E);b.each(qO,R.add,R),h.add(R.getGroup()),Un.groupTransition(u,h,a),b.each(JO,function(F){a.get([F,"show"])&&!p.scale.isBlank()&&ek[F](this.group,a,v,C,M,y,x)},this)}},s.type="radiusAxis",s}(zc),ek={splitLine:function(c,s,a,l,u,h){var v=s.getModel("splitLine").getModel("lineStyle"),m=v.get("color"),y=0,x=a.getAngleAxis(),C=Math.PI/180,M=x.getExtent(),E=360===Math.abs(M[1]-M[0])?"Circle":"Arc";m=m instanceof Array?m:[m];for(var R=[],F=0;F<h.length;F++){var U=y++%m.length;R[U]=R[U]||[],R[U].push(new Un[E]({shape:{cx:a.cx,cy:a.cy,r:Math.max(h[F].coord,0),startAngle:-M[0]*C,endAngle:-M[1]*C,clockwise:x.inverse}}))}for(F=0;F<R.length;F++)c.add(Un.mergePath(R[F],{style:b.defaults({stroke:m[F%m.length],fill:null},v.getLineStyle()),silent:!0}))},minorSplitLine:function(c,s,a,l,u,h,p){if(p.length){for(var m=s.getModel("minorSplitLine").getModel("lineStyle"),y=[],x=0;x<p.length;x++)for(var C=0;C<p[x].length;C++)y.push(new wh.Z({shape:{cx:a.cx,cy:a.cy,r:p[x][C].coord}}));c.add(Un.mergePath(y,{style:b.defaults({fill:null},m.getLineStyle()),silent:!0}))}},splitArea:function(c,s,a,l,u,h){if(h.length){var v=s.getModel("splitArea").getModel("areaStyle"),m=v.get("color"),y=0;m=m instanceof Array?m:[m];for(var x=[],C=h[0].coord,M=1;M<h.length;M++){var E=y++%m.length;x[E]=x[E]||[],x[E].push(new hs.C({shape:{cx:a.cx,cy:a.cy,r0:C,r:h[M].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),C=h[M].coord}for(M=0;M<x.length;M++)c.add(Un.mergePath(x[M],{style:b.defaults({fill:m[M%m.length]},v.getAreaStyle()),silent:!0}))}}};const tk=Xx;function UT(c){return c.get("stack")||"__ec_stack_"+c.seriesIndex}function GT(c,s){return s.dim+c.model.componentIndex}const ik=function nk(c,s,a){var l={},u=function rk(c){var s={};b.each(c,function(l,u){var h=l.getData(),p=l.coordinateSystem,v=p.getBaseAxis(),m=GT(p,v),y=v.getExtent(),x="category"===v.type?v.getBandWidth():Math.abs(y[1]-y[0])/h.count(),C=s[m]||{bandWidth:x,remainedWidth:x,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},M=C.stacks;s[m]=C;var E=UT(l);M[E]||C.autoWidthCount++,M[E]=M[E]||{width:0,maxWidth:0};var R=(0,ft.GM)(l.get("barWidth"),x),F=(0,ft.GM)(l.get("barMaxWidth"),x),U=l.get("barGap"),ue=l.get("barCategoryGap");R&&!M[E].width&&(R=Math.min(C.remainedWidth,R),M[E].width=R,C.remainedWidth-=R),F&&(M[E].maxWidth=F),null!=U&&(C.gap=U),null!=ue&&(C.categoryGap=ue)});var a={};return b.each(s,function(l,u){a[u]={};var h=l.stacks,v=(0,ft.GM)(l.categoryGap,l.bandWidth),m=(0,ft.GM)(l.gap,1),y=l.remainedWidth,x=l.autoWidthCount,C=(y-v)/(x+(x-1)*m);C=Math.max(C,0),b.each(h,function(F,U){var ue=F.maxWidth;ue&&ue<C&&(ue=Math.min(ue,y),F.width&&(ue=Math.min(ue,F.width)),y-=ue,F.width=ue,x--)}),C=(y-v)/(x+(x-1)*m),C=Math.max(C,0);var E,M=0;b.each(h,function(F,U){F.width||(F.width=C),E=F,M+=F.width*(1+m)}),E&&(M-=E.width*m);var R=-M/2;b.each(h,function(F,U){a[u][U]=a[u][U]||{offset:R,width:F.width},R+=F.width*(1+m)})}),a}(b.filter(s.getSeriesByType(c),function(h){return!s.isSeriesFiltered(h)&&h.coordinateSystem&&"polar"===h.coordinateSystem.type}));s.eachSeriesByType(c,function(h){if("polar"===h.coordinateSystem.type){var p=h.getData(),v=h.coordinateSystem,m=v.getBaseAxis(),y=GT(v,m),x=UT(h),C=u[y][x],M=C.offset,E=C.width,R=v.getOtherAxis(m),F=h.coordinateSystem.cx,U=h.coordinateSystem.cy,ue=h.get("barMinHeight")||0,me=h.get("barMinAngle")||0;l[x]=l[x]||[];for(var ve=p.mapDimension(R.dim),Me=p.mapDimension(m.dim),Ae=(0,Ts.M)(p,ve),Pe="radius"!==m.dim||!h.get("roundCap",!0),He=R.model.get("startValue"),Ye=R.dataToCoord(He||0),Qe=0,it=p.count();Qe<it;Qe++){var ct=p.get(ve,Qe),ht=p.get(Me,Qe),vt=ct>=0?"p":"n",gt=Ye;Ae&&(l[x][ht]||(l[x][ht]={p:Ye,n:Ye}),gt=l[x][ht][vt]);var Ot=void 0,Gt=void 0,Ft=void 0,en=void 0;if("radius"===R.dim){var Mn=R.dataToCoord(ct)-Ye,Tn=m.dataToCoord(ht);Math.abs(Mn)<ue&&(Mn=(Mn<0?-1:1)*ue),Ot=gt,Gt=gt+Mn,en=(Ft=Tn-M)-E,Ae&&(l[x][ht][vt]=Gt)}else{var tr=R.dataToCoord(ct,Pe)-Ye,_r=m.dataToCoord(ht);Math.abs(tr)<me&&(tr=(tr<0?-1:1)*me),Gt=(Ot=_r+M)+E,Ft=gt,en=gt+tr,Ae&&(l[x][ht][vt]=en)}p.setItemLayout(Qe,{cx:F,cy:U,r0:Ot,r:Gt,startAngle:-Ft*Math.PI/180,endAngle:-en*Math.PI/180,clockwise:Ft>=en})}}})};var ak={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},ok={splitNumber:5},WT=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.type="polar",s}(Ra.Z);function $x(c,s){s=s||{};var l=c.axis,u={},h=l.position,p=l.orient,v=c.coordinateSystem.getRect(),m=[v.x,v.x+v.width,v.y,v.y+v.height],y={horizontal:{top:m[2],bottom:m[3]},vertical:{left:m[0],right:m[1]}};u.position=["vertical"===p?y.vertical[h]:m[0],"horizontal"===p?y.horizontal[h]:m[3]],u.rotation=Math.PI/2*{horizontal:0,vertical:1}[p],u.labelDirection=u.tickDirection=u.nameDirection={top:-1,bottom:1,right:1,left:-1}[h],c.get(["axisTick","inside"])&&(u.tickDirection=-u.tickDirection),b.retrieve(s.labelInside,c.get(["axisLabel","inside"]))&&(u.labelDirection=-u.labelDirection);var M=s.rotate;return null==M&&(M=c.get(["axisLabel","rotate"])),u.labelRotation="top"===h?-M:M,u.z2=1,u}var sk=["axisLine","axisTickLabel","axisName"],ZT=["splitArea","splitLine"],lk=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.axisPointerClass="SingleAxisPointer",a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u,h){var p=this.group;p.removeAll();var v=this._axisGroup;this._axisGroup=new Vn.Z;var m=$x(a),y=new ql(a,m);b.each(sk,y.add,y),p.add(this._axisGroup),p.add(y.getGroup()),b.each(ZT,function(x){a.get([x,"show"])&&ck[x](this,this.group,this._axisGroup,a)},this),Un.groupTransition(v,this._axisGroup,a),c.prototype.render.call(this,a,l,u,h)},s.prototype.remove=function(){Go(this)},s.type="singleAxis",s}(zc),ck={splitLine:function(c,s,a,l){var u=l.axis;if(!u.scale.isBlank()){var h=l.getModel("splitLine"),p=h.getModel("lineStyle"),v=p.get("color");v=v instanceof Array?v:[v];for(var m=p.get("width"),y=l.coordinateSystem.getRect(),x=u.isHorizontal(),C=[],M=0,E=u.getTicksCoords({tickModel:h}),R=[],F=[],U=0;U<E.length;++U){var ue=u.toGlobalCoord(E[U].coord);x?(R[0]=ue,R[1]=y.y,F[0]=ue,F[1]=y.y+y.height):(R[0]=y.x,R[1]=ue,F[0]=y.x+y.width,F[1]=ue);var me=new no.Z({shape:{x1:R[0],y1:R[1],x2:F[0],y2:F[1]},silent:!0});Un.subPixelOptimizeLine(me.shape,m);var ve=M++%v.length;C[ve]=C[ve]||[],C[ve].push(me)}var Me=p.getLineStyle(["color"]);for(U=0;U<C.length;++U)s.add(Un.mergePath(C[U],{style:b.defaults({stroke:v[U%v.length]},Me),silent:!0}))}},splitArea:function(c,s,a,l){oS(c,a,l,l)}};const uk=lk;var l_=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.getCoordSysModel=function(){return this},s.type="singleAxis",s.layoutMode="box",s.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},s}(xa.Z);(0,b.mixin)(l_,lp.W.prototype);const sg=l_,Kx=function(c){function s(a,l,u,h,p){var v=c.call(this,a,l,u)||this;return v.type=h||"value",v.position=p||"bottom",v}return(0,Rt.ZT)(s,c),s.prototype.isHorizontal=function(){var a=this.position;return"top"===a||"bottom"===a},s.prototype.pointToData=function(a,l){return this.coordinateSystem.pointToData(a)[0]},s}(Is.Z);var XT=["single"];function c_(c){var s=c.seriesModel,a=c.singleAxisModel;return a&&a.coordinateSystem||s&&s.coordinateSystem}const hk=function(){function c(s,a,l){this.type="single",this.dimension="single",this.dimensions=XT,this.axisPointerEnabled=!0,this.model=s,this._init(s,a,l)}return c.prototype._init=function(s,a,l){var h=new Kx(this.dimension,wa.aG(s),[0,0],s.get("type"),s.get("position"));h.onBand="category"===h.type&&s.get("boundaryGap"),h.inverse=s.get("inverse"),h.orient=s.get("orient"),s.axis=h,h.model=s,h.coordinateSystem=this,this._axis=h},c.prototype.update=function(s,a){s.eachSeries(function(l){if(l.coordinateSystem===this){var u=l.getData();(0,b.each)(u.mapDimensionsAll(this.dimension),function(h){this._axis.scale.unionExtentFromData(u,h)},this),wa.Jk(this._axis.scale,this._axis.model)}},this)},c.prototype.resize=function(s,a){this._rect=(0,Oe.ME)({left:s.get("left"),top:s.get("top"),right:s.get("right"),bottom:s.get("bottom"),width:s.get("width"),height:s.get("height")},{width:a.getWidth(),height:a.getHeight()}),this._adjustAxis()},c.prototype.getRect=function(){return this._rect},c.prototype._adjustAxis=function(){var s=this._rect,a=this._axis,l=a.isHorizontal(),u=l?[0,s.width]:[0,s.height],h=a.inverse?1:0;a.setExtent(u[h],u[1-h]),this._updateAxisTransform(a,l?s.x:s.y)},c.prototype._updateAxisTransform=function(s,a){var l=s.getExtent(),u=l[0]+l[1],h=s.isHorizontal();s.toGlobalCoord=h?function(p){return p+a}:function(p){return u-p+a},s.toLocalCoord=h?function(p){return p-a}:function(p){return u-p+a}},c.prototype.getAxis=function(){return this._axis},c.prototype.getBaseAxis=function(){return this._axis},c.prototype.getAxes=function(){return[this._axis]},c.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},c.prototype.containPoint=function(s){var a=this.getRect(),l=this.getAxis();return"horizontal"===l.orient?l.contain(l.toLocalCoord(s[0]))&&s[1]>=a.y&&s[1]<=a.y+a.height:l.contain(l.toLocalCoord(s[1]))&&s[0]>=a.y&&s[0]<=a.y+a.height},c.prototype.pointToData=function(s){var a=this.getAxis();return[a.coordToData(a.toLocalCoord(s["horizontal"===a.orient?0:1]))]},c.prototype.dataToPoint=function(s){var a=this.getAxis(),l=this.getRect(),u=[],h="horizontal"===a.orient?0:1;return s instanceof Array&&(s=s[0]),u[h]=a.toGlobalCoord(a.dataToCoord(+s)),u[1-h]=0===h?l.y+l.height/2:l.x+l.width/2,u},c.prototype.convertToPixel=function(s,a,l){return c_(a)===this?this.dataToPoint(l):null},c.prototype.convertFromPixel=function(s,a,l){return c_(a)===this?this.pointToData(l):null},c}(),$T={create:function Vr(c,s){var a=[];return c.eachComponent("singleAxis",function(l,u){var h=new hk(l,c,s);h.name="single_"+u,h.resize(l,s),l.coordinateSystem=h,a.push(h)}),c.eachSeries(function(l){if("singleAxis"===l.get("coordinateSystem")){var u=l.getReferringComponents("singleAxis",An.C6).models[0];l.coordinateSystem=u&&u.coordinateSystem}}),a},dimensions:XT};var KT=["x","y"],m4=["width","height"],QT=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,Rt.ZT)(s,c),s.prototype.makeElOption=function(a,l,u,h,p){var v=u.axis,m=v.coordinateSystem,y=rf(m,1-u_(v)),x=m.dataToPoint(l)[0],C=h.get("type");if(C&&"none"!==C){var M=r_(h),E=Qx[C](v,x,y);E.style=M,a.graphicKey=E.type,a.pointer=E}mT(l,a,$x(u),u,h,p)},s.prototype.getHandleTransform=function(a,l,u){var h=$x(l,{labelInside:!1});h.labelMargin=u.get(["handle","margin"]);var p=Hx(l.axis,a,h);return{x:p[0],y:p[1],rotation:h.rotation+(h.labelDirection<0?Math.PI:0)}},s.prototype.updateHandleTransform=function(a,l,u,h){var p=u.axis,v=p.coordinateSystem,m=u_(p),y=rf(v,m),x=[a.x,a.y];x[m]+=l[m],x[m]=Math.min(y[1],x[m]),x[m]=Math.max(y[0],x[m]);var C=rf(v,1-m),M=(C[1]+C[0])/2,E=[M,M];return E[m]=x[m],{x:x[0],y:x[1],rotation:a.rotation,cursorPoint:E,tooltipOption:{verticalAlign:"middle"}}},s}(n_),Qx={line:function(c,s,a){return{type:"Line",subPixelOptimize:!0,shape:wu([s,a[0]],[s,a[1]],u_(c))}},shadow:function(c,s,a){var l=c.getBandWidth();return{type:"Rect",shape:_T([s-l/2,a[0]],[l,a[1]-a[0]],u_(c))}}};function u_(c){return c.isHorizontal()?0:1}function rf(c,s){var a=c.getRect();return[a[KT[s]],a[KT[s]]+a[m4[s]]]}const fk=QT;var qT=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.type="single",s}(Ra.Z);function Jx(c,s){var l,a=c.cellSize;1===(l=b.isArray(a)?a:c.cellSize=[a,a]).length&&(l[1]=l[0]);var u=b.map([0,1],function(h){return(0,Oe.QM)(s,h)&&(l[h]="auto"),null!=l[h]&&"auto"!==l[h]});(0,Oe.dt)(c,s,{type:"box",ignoreSize:u})}const eE=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.init=function(a,l,u){var h=(0,Oe.tE)(a);c.prototype.init.apply(this,arguments),Jx(a,h)},s.prototype.mergeOption=function(a){c.prototype.mergeOption.apply(this,arguments),Jx(this.option,a)},s.prototype.getCellSize=function(){return this.option.cellSize},s.type="calendar",s.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},s}(xa.Z);var e1=z(7772);const gk=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u){var h=this.group;h.removeAll();var p=a.coordinateSystem,v=p.getRangeInfo(),m=p.getOrient(),y=l.getLocaleModel();this._renderDayRect(a,v,h),this._renderLines(a,v,m,h),this._renderYearText(a,v,m,h),this._renderMonthText(a,y,m,h),this._renderWeekText(a,y,v,m,h)},s.prototype._renderDayRect=function(a,l,u){for(var h=a.coordinateSystem,p=a.getModel("itemStyle").getItemStyle(),v=h.getCellWidth(),m=h.getCellHeight(),y=l.start.time;y<=l.end.time;y=h.getNextNDay(y,1).time){var x=h.dataToRect([y],!1).tl,C=new Jt.Z({shape:{x:x[0],y:x[1],width:v,height:m},cursor:"default",style:p});u.add(C)}},s.prototype._renderLines=function(a,l,u,h){var p=this,v=a.coordinateSystem,m=a.getModel(["splitLine","lineStyle"]).getLineStyle(),y=a.get(["splitLine","show"]),x=m.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var C=l.start,M=0;C.time<=l.end.time;M++){R(C.formatedDate),0===M&&(C=v.getDateInfo(l.start.y+"-"+l.start.m));var E=C.date;E.setMonth(E.getMonth()+1),C=v.getDateInfo(E)}function R(F){p._firstDayOfMonth.push(v.getDateInfo(F)),p._firstDayPoints.push(v.dataToRect([F],!1).tl);var U=p._getLinePointsOfOneWeek(a,F,u);p._tlpoints.push(U[0]),p._blpoints.push(U[U.length-1]),y&&p._drawSplitline(U,m,h)}R(v.getNextNDay(l.end.time,1).formatedDate),y&&this._drawSplitline(p._getEdgesPoints(p._tlpoints,x,u),m,h),y&&this._drawSplitline(p._getEdgesPoints(p._blpoints,x,u),m,h)},s.prototype._getEdgesPoints=function(a,l,u){var h=[a[0].slice(),a[a.length-1].slice()],p="horizontal"===u?0:1;return h[0][p]=h[0][p]-l/2,h[1][p]=h[1][p]+l/2,h},s.prototype._drawSplitline=function(a,l,u){var h=new Pt.Z({z2:20,shape:{points:a},style:l});u.add(h)},s.prototype._getLinePointsOfOneWeek=function(a,l,u){for(var h=a.coordinateSystem,p=h.getDateInfo(l),v=[],m=0;m<7;m++){var y=h.getNextNDay(p.time,m),x=h.dataToRect([y.time],!1);v[2*y.day]=x.tl,v[2*y.day+1]=x["horizontal"===u?"bl":"tr"]}return v},s.prototype._formatterLabel=function(a,l){return(0,b.isString)(a)&&a?(0,Ia.wx)(a,l):(0,b.isFunction)(a)?a(l):l.nameMap},s.prototype._yearTextPositionControl=function(a,l,u,h,p){var v=l[0],m=l[1],y=["center","bottom"];"bottom"===h?(m+=p,y=["center","top"]):"left"===h?v-=p:"right"===h?(v+=p,y=["center","top"]):m-=p;var x=0;return("left"===h||"right"===h)&&(x=Math.PI/2),{rotation:x,x:v,y:m,style:{align:y[0],verticalAlign:y[1]}}},s.prototype._renderYearText=function(a,l,u,h){var p=a.getModel("yearLabel");if(p.get("show")){var v=p.get("margin"),m=p.get("position");m||(m="horizontal"!==u?"top":"left");var y=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],x=(y[0][0]+y[1][0])/2,C=(y[0][1]+y[1][1])/2,M="horizontal"===u?0:1,E={top:[x,y[M][1]],bottom:[x,y[1-M][1]],left:[y[1-M][0],C],right:[y[M][0],C]},R=l.start.y;+l.end.y>+l.start.y&&(R=R+"-"+l.end.y);var F=p.get("formatter"),ue=this._formatterLabel(F,{start:l.start.y,end:l.end.y,nameMap:R}),me=new kt.ZP({z2:30,style:(0,Bn.Lr)(p,{text:ue})});me.attr(this._yearTextPositionControl(me,E[m],u,m,v)),h.add(me)}},s.prototype._monthTextPositionControl=function(a,l,u,h,p){var v="left",m="top",y=a[0],x=a[1];return"horizontal"===u?(x+=p,l&&(v="center"),"start"===h&&(m="bottom")):(y+=p,l&&(m="middle"),"start"===h&&(v="right")),{x:y,y:x,align:v,verticalAlign:m}},s.prototype._renderMonthText=function(a,l,u,h){var p=a.getModel("monthLabel");if(p.get("show")){var v=p.get("nameMap"),m=p.get("margin"),y=p.get("position"),x=p.get("align"),C=[this._tlpoints,this._blpoints];(!v||(0,b.isString)(v))&&(v&&(l=(0,e1.G8)(v)||l),v=l.get(["time","monthAbbr"])||[]);var M="start"===y?0:1,E="horizontal"===u?0:1;m="start"===y?-m:m;for(var R="center"===x,F=0;F<C[M].length-1;F++){var U=C[M][F].slice(),ue=this._firstDayOfMonth[F];R&&(U[E]=(this._firstDayPoints[F][E]+C[0][F+1][E])/2);var ve=p.get("formatter"),Me=v[+ue.m-1],Ae={yyyy:ue.y,yy:(ue.y+"").slice(2),MM:ue.m,M:+ue.m,nameMap:Me},Pe=this._formatterLabel(ve,Ae),Ne=new kt.ZP({z2:30,style:(0,b.extend)((0,Bn.Lr)(p,{text:Pe}),this._monthTextPositionControl(U,R,u,y,m))});h.add(Ne)}}},s.prototype._weekTextPositionControl=function(a,l,u,h,p){var v="center",m="middle",y=a[0],x=a[1],C="start"===u;return"horizontal"===l?(y=y+h+(C?1:-1)*p[0]/2,v=C?"right":"left"):(x=x+h+(C?1:-1)*p[1]/2,m=C?"bottom":"top"),{x:y,y:x,align:v,verticalAlign:m}},s.prototype._renderWeekText=function(a,l,u,h,p){var v=a.getModel("dayLabel");if(v.get("show")){var m=a.coordinateSystem,y=v.get("position"),x=v.get("nameMap"),C=v.get("margin"),M=m.getFirstDayOfWeek();x&&!(0,b.isString)(x)||(x&&(l=(0,e1.G8)(x)||l),x=l.get(["time","dayOfWeekShort"])||(0,b.map)(l.get(["time","dayOfWeekAbbr"]),function(Ae){return Ae[0]}));var R=m.getNextNDay(u.end.time,7-u.lweek).time,F=[m.getCellWidth(),m.getCellHeight()];C=(0,ft.GM)(C,Math.min(F[1],F[0])),"start"===y&&(R=m.getNextNDay(u.start.time,-(7+u.fweek)).time,C=-C);for(var U=0;U<7;U++){var ve,ue=m.getNextNDay(R,U),me=m.dataToRect([ue.time],!1).center;ve=Math.abs((U+M)%7);var Me=new kt.ZP({z2:30,style:(0,b.extend)((0,Bn.Lr)(v,{text:x[ve]}),this._weekTextPositionControl(me,h,y,C,F))});p.add(Me)}}},s.type="calendar",s}(Ra.Z);var t1=864e5;function n1(c){var s=c.calendarModel,a=c.seriesModel;return s?s.coordinateSystem:a?a.coordinateSystem:null}const _4=function(){function c(s,a,l){this.type="calendar",this.dimensions=c.dimensions,this.getDimensionsInfo=c.getDimensionsInfo,this._model=s}return c.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},c.prototype.getRangeInfo=function(){return this._rangeInfo},c.prototype.getModel=function(){return this._model},c.prototype.getRect=function(){return this._rect},c.prototype.getCellWidth=function(){return this._sw},c.prototype.getCellHeight=function(){return this._sh},c.prototype.getOrient=function(){return this._orient},c.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},c.prototype.getDateInfo=function(s){var a=(s=ft.sG(s)).getFullYear(),l=s.getMonth()+1,u=l<10?"0"+l:""+l,h=s.getDate(),p=h<10?"0"+h:""+h,v=s.getDay();return{y:a+"",m:u,d:p,day:v=Math.abs((v+7-this.getFirstDayOfWeek())%7),time:s.getTime(),formatedDate:a+"-"+u+"-"+p,date:s}},c.prototype.getNextNDay=function(s,a){return 0===(a=a||0)||(s=new Date(this.getDateInfo(s).time)).setDate(s.getDate()+a),this.getDateInfo(s)},c.prototype.update=function(s,a){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var l=this._rangeInfo.weeks||1,u=["width","height"],h=this._model.getCellSize().slice(),p=this._model.getBoxLayoutParams(),v="horizontal"===this._orient?[l,7]:[7,l];b.each([0,1],function(C){x(h,C)&&(p[u[C]]=h[C]*v[C])});var m={width:a.getWidth(),height:a.getHeight()},y=this._rect=Oe.ME(p,m);function x(C,M){return null!=C[M]&&"auto"!==C[M]}b.each([0,1],function(C){x(h,C)||(h[C]=y[u[C]]/v[C])}),this._sw=h[0],this._sh=h[1]},c.prototype.dataToPoint=function(s,a){b.isArray(s)&&(s=s[0]),null==a&&(a=!0);var l=this.getDateInfo(s),u=this._rangeInfo;if(a&&!(l.time>=u.start.time&&l.time<u.end.time+t1))return[NaN,NaN];var p=l.day,v=this._getRangeInfo([u.start.time,l.formatedDate]).nthWeek;return"vertical"===this._orient?[this._rect.x+p*this._sw+this._sw/2,this._rect.y+v*this._sh+this._sh/2]:[this._rect.x+v*this._sw+this._sw/2,this._rect.y+p*this._sh+this._sh/2]},c.prototype.pointToData=function(s){var a=this.pointToDate(s);return a&&a.time},c.prototype.dataToRect=function(s,a){var l=this.dataToPoint(s,a);return{contentShape:{x:l[0]-(this._sw-this._lineWidth)/2,y:l[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:l,tl:[l[0]-this._sw/2,l[1]-this._sh/2],tr:[l[0]+this._sw/2,l[1]-this._sh/2],br:[l[0]+this._sw/2,l[1]+this._sh/2],bl:[l[0]-this._sw/2,l[1]+this._sh/2]}},c.prototype.pointToDate=function(s){var a=Math.floor((s[0]-this._rect.x)/this._sw)+1,l=Math.floor((s[1]-this._rect.y)/this._sh)+1,u=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(l,a-1,u):this._getDateByWeeksAndDay(a,l-1,u)},c.prototype.convertToPixel=function(s,a,l){var u=n1(a);return u===this?u.dataToPoint(l):null},c.prototype.convertFromPixel=function(s,a,l){var u=n1(a);return u===this?u.pointToData(l):null},c.prototype.containPoint=function(s){return console.warn("Not implemented."),!1},c.prototype._initRangeOption=function(){var a,s=this._model.get("range");if(b.isArray(s)&&1===s.length&&(s=s[0]),b.isArray(s))a=s;else{var l=s.toString();if(/^\d{4}$/.test(l)&&(a=[l+"-01-01",l+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(l)){var u=this.getDateInfo(l),h=u.date;h.setMonth(h.getMonth()+1);var p=this.getNextNDay(h,-1);a=[u.formatedDate,p.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(l)&&(a=[l,l])}if(!a)return s;var v=this._getRangeInfo(a);return v.start.time>v.end.time&&a.reverse(),a},c.prototype._getRangeInfo=function(s){var l,a=[this.getDateInfo(s[0]),this.getDateInfo(s[1])];a[0].time>a[1].time&&(l=!0,a.reverse());var u=Math.floor(a[1].time/t1)-Math.floor(a[0].time/t1)+1,h=new Date(a[0].time),p=h.getDate(),v=a[1].date.getDate();h.setDate(p+u-1);var m=h.getDate();if(m!==v)for(var y=h.getTime()-a[1].time>0?1:-1;(m=h.getDate())!==v&&(h.getTime()-a[1].time)*y>0;)u-=y,h.setDate(m-y);var x=Math.floor((u+a[0].day+6)/7),C=l?1-x:x-1;return l&&a.reverse(),{range:[a[0].formatedDate,a[1].formatedDate],start:a[0],end:a[1],allDay:u,weeks:x,nthWeek:C,fweek:a[0].day,lweek:a[1].day}},c.prototype._getDateByWeeksAndDay=function(s,a,l){var u=this._getRangeInfo(l);if(s>u.weeks||0===s&&a<u.fweek||s===u.weeks&&a>u.lweek)return null;var h=7*(s-1)-u.fweek+a,p=new Date(u.start.time);return p.setDate(+u.start.d+h),this.getDateInfo(p)},c.create=function(s,a){var l=[];return s.eachComponent("calendar",function(u){var h=new c(u,s,a);l.push(h),u.coordinateSystem=h}),s.eachSeries(function(u){"calendar"===u.get("coordinateSystem")&&(u.coordinateSystem=l[u.get("calendarIndex")||0])}),l},c.dimensions=["time","value"],c}();function nE(c,s){var a;return b.each(s,function(l){null!=c[l]&&"auto"!==c[l]&&(a=!0)}),a}var _k=["transition","enterFrom","leaveTo"],yk=_k.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function d_(c,s,a){if(a&&(!c[a]&&s[a]&&(c[a]={}),c=c[a],s=s[a]),c&&s)for(var l=a?_k:yk,u=0;u<l.length;u++){var h=l[u];null==c[h]&&null!=s[h]&&(c[h]=s[h])}}var hc=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.preventAutoZ=!0,a}return(0,Rt.ZT)(s,c),s.prototype.mergeOption=function(a,l){var u=this.option.elements;this.option.elements=null,c.prototype.mergeOption.call(this,a,l),this.option.elements=u},s.prototype.optionUpdated=function(a,l){var u=this.option,h=(l?u:a).elements,p=u.elements=l?[]:u.elements,v=[];this._flatten(h,v,null);var m=An.ab(p,v,"normalMerge"),y=this._elOptionsToUpdate=[];b.each(m,function(x,C){var M=x.newOption;!M||(y.push(M),function mk(c,s){var a=c.existing;if(s.id=c.keyInfo.id,!s.type&&a&&(s.type=a.type),null==s.parentId){var l=s.parentOption;l?s.parentId=l.id:a&&(s.parentId=a.parentId)}s.parentOption=null}(x,M),function y4(c,s,a){var l=b.extend({},a),u=c[s],h=a.$action||"merge";"merge"===h?u?(b.merge(u,l,!0),(0,Oe.dt)(u,l,{ignoreSize:!0}),(0,Oe.QT)(a,u),d_(a,u),d_(a,u,"shape"),d_(a,u,"style"),d_(a,u,"extra"),a.clipPath=u.clipPath):c[s]=l:"replace"===h?c[s]=l:"remove"===h&&u&&(c[s]=null)}(p,C,M),function Id(c,s){if(c&&(c.hv=s.hv=[nE(s,["left","right"]),nE(s,["top","bottom"])],"group"===c.type)){var a=c,l=s;null==a.width&&(a.width=l.width=0),null==a.height&&(a.height=l.height=0)}}(p[C],M))},this),u.elements=b.filter(p,function(x){return x&&delete x.$action,null!=x})},s.prototype._flatten=function(a,l,u){b.each(a,function(h){if(h){u&&(h.parentOption=u),l.push(h);var p=h.children;p&&p.length&&this._flatten(p,l,h),delete h.children}},this)},s.prototype.useElOptionsToUpdate=function(){var a=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,a},s.type="graphic",s.defaultOption={elements:[]},s}(xa.Z),lg={path:null,compoundPath:null,group:Vn.Z,image:be.ZP,text:kt.ZP},rl=An.Yf(),bk=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.init=function(){this._elMap=b.createHashMap()},s.prototype.render=function(a,l,u){a!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=a,this._updateElements(a),this._relocate(a,u)},s.prototype._updateElements=function(a){var l=a.useElOptionsToUpdate();if(l){var u=this._elMap,h=this.group,p=a.get("z"),v=a.get("zlevel");b.each(l,function(m){var y=An.U5(m.id,null),x=null!=y?u.get(y):null,C=An.U5(m.parentId,null),M=null!=C?u.get(C):h,E=m.type,R=m.style;"text"===E&&R&&m.hv&&m.hv[1]&&(R.textVerticalAlign=R.textBaseline=R.verticalAlign=R.align=null);var F=m.textContent,U=m.textConfig;if(R&&Ax(R,E,!!U,!!F)){var ue=WM(R,E,!0);!U&&ue.textConfig&&(U=m.textConfig=ue.textConfig),!F&&ue.textContent&&(F=ue.textContent)}var me=function xk(c){return c=b.extend({},c),b.each(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(Oe.gN),function(s){delete c[s]}),c}(m),ve=m.$action||"merge",Me="merge"===ve,Ae="replace"===ve;if(Me){var Ne=x;(Pe=!x)?Ne=rE(y,M,m.type,u):(Ne&&(rl(Ne).isNew=!1),Rx(Ne)),Ne&&(fa(Ne,me,a,{isInit:Pe}),iE(Ne,m,p,v))}else if(Ae){h_(x,m,u,a);var He=rE(y,M,m.type,u);He&&(fa(He,me,a,{isInit:!0}),iE(He,m,p,v))}else"remove"===ve&&(ii(x,m),h_(x,m,u,a));var Ye=u.get(y);if(Ye&&F)if(Me){var Qe=Ye.getTextContent();Qe?Qe.attr(F):Ye.setTextContent(new kt.ZP(F))}else Ae&&Ye.setTextContent(new kt.ZP(F));if(Ye){var it=m.clipPath;if(it){var ct=it.type,ht=void 0,Pe=!1;if(Me){var vt=Ye.getClipPath();ht=(Pe=!vt||rl(vt).type!==ct)?r1(ct):vt}else Ae&&(Pe=!0,ht=r1(ct));Ye.setClipPath(ht),fa(ht,it,a,{isInit:Pe}),Md(ht,it.keyframeAnimation,a)}var gt=rl(Ye);Ye.setTextConfig(U),gt.option=m,function cg(c,s,a){var l=(0,Fn.A)(c).eventData;!c.silent&&!c.ignore&&!l&&(l=(0,Fn.A)(c).eventData={componentType:"graphic",componentIndex:s.componentIndex,name:c.name}),l&&(l.info=a.info)}(Ye,a,m),Un.setTooltipConfig({el:Ye,componentModel:a,itemName:Ye.name,itemTooltipOption:m.tooltip}),Md(Ye,m.keyframeAnimation,a)}})}},s.prototype._relocate=function(a,l){for(var u=a.option.elements,h=this.group,p=this._elMap,v=l.getWidth(),m=l.getHeight(),y=["x","y"],x=0;x<u.length;x++)if((E=null!=(M=An.U5((C=u[x]).id,null))?p.get(M):null)&&E.isGroup){var F=(R=E.parent)===h,U=rl(E),ue=rl(R);U.width=(0,ft.GM)(U.option.width,F?v:ue.width)||0,U.height=(0,ft.GM)(U.option.height,F?m:ue.height)||0}for(x=u.length-1;x>=0;x--){var C,M,E;if(E=null!=(M=An.U5((C=u[x]).id,null))?p.get(M):null){ue=rl(R=E.parent);var R,ve={},Me=Oe.p$(E,C,R===h?{width:v,height:m}:{width:ue.width,height:ue.height},null,{hv:C.hv,boundingMode:C.bounding},ve);if(!rl(E).isNew&&Me){for(var Ae=C.transition,Pe={},Ne=0;Ne<y.length;Ne++){var He=y[Ne],Ye=ve[He];Ae&&(Dd(Ae)||b.indexOf(Ae,He)>=0)?Pe[He]=Ye:E[He]=Ye}(0,on.D)(E,Pe,a,0)}else E.attr(ve)}}},s.prototype._clear=function(){var a=this,l=this._elMap;l.each(function(u){h_(u,rl(u).option,l,a._lastGraphicModel)}),this._elMap=b.createHashMap()},s.prototype.dispose=function(){this._clear()},s.type="graphic",s}(Ra.Z);function r1(c){var a=new(b.hasOwn(lg,c)?lg[c]:Un.getShapeClass(c))({});return rl(a).type=c,a}function rE(c,s,a,l){var u=r1(a);return s.add(u),l.set(c,u),rl(u).id=c,rl(u).isNew=!0,u}function h_(c,s,a,l){c&&c.parent&&("group"===c.type&&c.traverse(function(h){h_(h,s,a,l)}),Bs(c,s,l),a.removeKey(rl(c).id))}function iE(c,s,a,l){c.isGroup||b.each([["cursor",qu.ZP.prototype.cursor],["zlevel",l||0],["z",a||0],["z2",0]],function(u){var h=u[0];b.hasOwn(s,h)?c[h]=b.retrieve2(s[h],u[1]):null==c[h]&&(c[h]=u[1])}),b.each(b.keys(s),function(u){if(0===u.indexOf("on")){var h=s[u];c[u]=b.isFunction(h)?h:null}}),b.hasOwn(s,"draggable")&&(c.draggable=s.draggable),null!=s.name&&(c.name=s.name),null!=s.id&&(c.id=s.id)}var a1=["x","y","radius","angle","single"],oE=["cartesian2d","polar","singleAxis"];function Xc(c){return c+"Axis"}function lE(c){var s=c.ecModel,a={infoList:[],infoMap:(0,b.createHashMap)()};return c.eachTargetAxis(function(l,u){var h=s.getComponent(Xc(l),u);if(h){var p=h.getCoordSysModel();if(p){var v=p.uid,m=a.infoMap.get(v);m||(a.infoList.push(m={model:p,axisModels:[]}),a.infoMap.set(v,m)),m.axisModels.push(h)}}}),a}var o1=function(){function c(){this.indexList=[],this.indexMap=[]}return c.prototype.add=function(s){this.indexMap[s]||(this.indexList.push(s),this.indexMap[s]=!0)},c}();function cE(c){var s={};return(0,b.each)(["start","end","startValue","endValue","throttle"],function(a){c.hasOwnProperty(a)&&(s[a]=c[a])}),s}const ug=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a._autoThrottle=!0,a._noTarget=!0,a._rangePropMode=["percent","percent"],a}return(0,Rt.ZT)(s,c),s.prototype.init=function(a,l,u){var h=cE(a);this.settledOption=h,this.mergeDefaultAndTheme(a,u),this._doInit(h)},s.prototype.mergeOption=function(a){var l=cE(a);(0,b.merge)(this.option,a,!0),(0,b.merge)(this.settledOption,l,!0),this._doInit(l)},s.prototype._doInit=function(a){var l=this.option;this._setDefaultThrottle(a),this._updateRangeUse(a);var u=this.settledOption;(0,b.each)([["start","startValue"],["end","endValue"]],function(h,p){"value"===this._rangePropMode[p]&&(l[h[0]]=u[h[0]]=null)},this),this._resetTarget()},s.prototype._resetTarget=function(){var a=this.get("orient",!0),l=this._targetAxisInfoMap=(0,b.createHashMap)();this._fillSpecifiedTargetAxis(l)?this._orient=a||this._makeAutoOrientByTargetAxis():(this._orient=a||"horizontal",this._fillAutoTargetAxisByOrient(l,this._orient)),this._noTarget=!0,l.each(function(h){h.indexList.length&&(this._noTarget=!1)},this)},s.prototype._fillSpecifiedTargetAxis=function(a){var l=!1;return(0,b.each)(a1,function(u){var h=this.getReferringComponents(Xc(u),An.iP);if(h.specified){l=!0;var p=new o1;(0,b.each)(h.models,function(v){p.add(v.componentIndex)}),a.set(u,p)}},this),l},s.prototype._fillAutoTargetAxisByOrient=function(a,l){var u=this.ecModel,h=!0;if(h){var p="vertical"===l?"y":"x";m(u.findComponents({mainType:p+"Axis"}),p)}function m(y,x){var C=y[0];if(C){var M=new o1;if(M.add(C.componentIndex),a.set(x,M),h=!1,"x"===x||"y"===x){var E=C.getReferringComponents("grid",An.C6).models[0];E&&(0,b.each)(y,function(R){C.componentIndex!==R.componentIndex&&E===R.getReferringComponents("grid",An.C6).models[0]&&M.add(R.componentIndex)})}}}h&&m(u.findComponents({mainType:"singleAxis",filter:function(x){return x.get("orient",!0)===l}}),"single"),h&&(0,b.each)(a1,function(y){if(h){var x=u.findComponents({mainType:Xc(y),filter:function(M){return"category"===M.get("type",!0)}});if(x[0]){var C=new o1;C.add(x[0].componentIndex),a.set(y,C),h=!1}}},this)},s.prototype._makeAutoOrientByTargetAxis=function(){var a;return this.eachTargetAxis(function(l){!a&&(a=l)},this),"y"===a?"vertical":"horizontal"},s.prototype._setDefaultThrottle=function(a){if(a.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var l=this.ecModel.option;this.option.throttle=l.animation&&l.animationDurationUpdate>0?100:20}},s.prototype._updateRangeUse=function(a){var l=this._rangePropMode,u=this.get("rangeMode");(0,b.each)([["start","startValue"],["end","endValue"]],function(h,p){var v=null!=a[h[0]],m=null!=a[h[1]];v&&!m?l[p]="percent":!v&&m?l[p]="value":u?l[p]=u[p]:v&&(l[p]="percent")})},s.prototype.noTarget=function(){return this._noTarget},s.prototype.getFirstTargetAxisModel=function(){var a;return this.eachTargetAxis(function(l,u){null==a&&(a=this.ecModel.getComponent(Xc(l),u))},this),a},s.prototype.eachTargetAxis=function(a,l){this._targetAxisInfoMap.each(function(u,h){(0,b.each)(u.indexList,function(p){a.call(l,h,p)})})},s.prototype.getAxisProxy=function(a,l){var u=this.getAxisModel(a,l);if(u)return u.__dzAxisProxy},s.prototype.getAxisModel=function(a,l){var u=this._targetAxisInfoMap.get(a);if(u&&u.indexMap[l])return this.ecModel.getComponent(Xc(a),l)},s.prototype.setRawRange=function(a){var l=this.option,u=this.settledOption;(0,b.each)([["start","startValue"],["end","endValue"]],function(h){(null!=a[h[0]]||null!=a[h[1]])&&(l[h[0]]=u[h[0]]=a[h[0]],l[h[1]]=u[h[1]]=a[h[1]])},this),this._updateRangeUse(a)},s.prototype.setCalculatedRange=function(a){var l=this.option;(0,b.each)(["start","startValue","end","endValue"],function(u){l[u]=a[u]})},s.prototype.getPercentRange=function(){var a=this.findRepresentativeAxisProxy();if(a)return a.getDataPercentWindow()},s.prototype.getValueRange=function(a,l){if(null!=a||null!=l)return this.getAxisProxy(a,l).getDataValueWindow();var u=this.findRepresentativeAxisProxy();return u?u.getDataValueWindow():void 0},s.prototype.findRepresentativeAxisProxy=function(a){if(a)return a.__dzAxisProxy;for(var l,u=this._targetAxisInfoMap.keys(),h=0;h<u.length;h++)for(var p=u[h],v=this._targetAxisInfoMap.get(p),m=0;m<v.indexList.length;m++){var y=this.getAxisProxy(p,v.indexList[m]);if(y.hostedBy(this))return y;l||(l=y)}return l},s.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},s.prototype.getOrient=function(){return this._orient},s.type="dataZoom",s.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],s.defaultOption={z:4,filterMode:"filter",start:0,end:100},s}(xa.Z),Ck=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.type="dataZoom.select",s}(ug),En=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u,h){this.dataZoomModel=a,this.ecModel=l,this.api=u},s.type="dataZoom",s}(Ra.Z),Pd=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.type="dataZoom.select",s}(En);var il=z(1017),af=b.each,uE=ft.dt;const as=function(){function c(s,a,l,u){this._dimName=s,this._axisIndex=a,this.ecModel=u,this._dataZoomModel=l}return c.prototype.hostedBy=function(s){return this._dataZoomModel===s},c.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},c.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},c.prototype.getTargetSeriesModels=function(){var s=[];return this.ecModel.eachSeries(function(a){if(function sE(c){var s=c.get("coordinateSystem");return(0,b.indexOf)(oE,s)>=0}(a)){var l=Xc(this._dimName),u=a.getReferringComponents(l,An.C6).models[0];u&&this._axisIndex===u.componentIndex&&s.push(a)}},this),s},c.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},c.prototype.getMinMaxSpan=function(){return b.clone(this._minMaxSpan)},c.prototype.calculateDataWindow=function(s){var y,a=this._dataExtent,u=this.getAxisModel().axis.scale,h=this._dataZoomModel.getRangePropMode(),p=[0,100],v=[],m=[];af(["start","end"],function(M,E){var R=s[M],F=s[M+"Value"];"percent"===h[E]?(null==R&&(R=p[E]),F=u.parse(ft.NU(R,p,a))):(y=!0,F=null==F?a[E]:u.parse(F),R=ft.NU(F,a,p)),m[E]=null==F||isNaN(F)?a[E]:F,v[E]=null==R||isNaN(R)?p[E]:R}),uE(m),uE(v);var x=this._minMaxSpan;function C(M,E,R,F,U){var ue=U?"Span":"ValueSpan";xu(0,M,R,"all",x["min"+ue],x["max"+ue]);for(var me=0;me<2;me++)E[me]=ft.NU(M[me],R,F,!0),U&&(E[me]=u.parse(E[me]))}return y?C(m,v,a,p,!1):C(v,m,p,a,!0),{valueWindow:m,percentWindow:v}},c.prototype.reset=function(s){if(s===this._dataZoomModel){var a=this.getTargetSeriesModels();this._dataExtent=function f_(c,s,a){var l=[1/0,-1/0];af(a,function(p){(0,wa.AH)(l,p.getData(),s)});var u=c.getAxisModel(),h=(0,il.Qw)(u.axis.scale,u,l).calculate();return[h.min,h.max]}(this,this._dimName,a),this._updateMinMaxSpan();var l=this.calculateDataWindow(s.settledOption);this._valueWindow=l.valueWindow,this._percentWindow=l.percentWindow,this._setAxisModel()}},c.prototype.filterData=function(s,a){if(s===this._dataZoomModel){var l=this._dimName,u=this.getTargetSeriesModels(),h=s.get("filterMode"),p=this._valueWindow;"none"!==h&&af(u,function(m){var y=m.getData(),x=y.mapDimensionsAll(l);if(x.length){if("weakFilter"===h){var C=y.getStore(),M=b.map(x,function(E){return y.getDimensionIndex(E)},y);y.filterSelf(function(E){for(var R,F,U,ue=0;ue<x.length;ue++){var me=C.get(M[ue],E),ve=!isNaN(me),Me=me<p[0],Ae=me>p[1];if(ve&&!Me&&!Ae)return!0;ve&&(U=!0),Me&&(R=!0),Ae&&(F=!0)}return U&&R&&F})}else af(x,function(E){if("empty"===h)m.setData(y=y.map(E,function(F){return function v(m){return m>=p[0]&&m<=p[1]}(F)?F:NaN}));else{var R={};R[E]=p,y.selectRange(R)}});af(x,function(E){y.setApproximateExtent(p,E)})}})}},c.prototype._updateMinMaxSpan=function(){var s=this._minMaxSpan={},a=this._dataZoomModel,l=this._dataExtent;af(["min","max"],function(u){var h=a.get(u+"Span"),p=a.get(u+"ValueSpan");null!=p&&(p=this.getAxisModel().axis.scale.parse(p)),null!=p?h=ft.NU(l[0]+p,l,[0,100],!0):null!=h&&(p=ft.NU(h,[0,100],l,!0)-l[0]),s[u+"Span"]=h,s[u+"ValueSpan"]=p},this)},c.prototype._setAxisModel=function(){var s=this.getAxisModel(),a=this._percentWindow,l=this._valueWindow;if(a){var u=ft.M9(l,[0,500]);u=Math.min(u,20);var h=s.axis.scale.rawExtentInfo;0!==a[0]&&h.setDeterminedMinMax("min",+l[0].toFixed(u)),100!==a[1]&&h.setDeterminedMinMax("max",+l[1].toFixed(u)),h.freeze()}},c}(),Tk={getTargetSeries:function(c){function s(u){c.eachComponent("dataZoom",function(h){h.eachTargetAxis(function(p,v){var m=c.getComponent(Xc(p),v);u(p,v,m,h)})})}s(function(u,h,p,v){p.__dzAxisProxy=null});var a=[];s(function(u,h,p,v){p.__dzAxisProxy||(p.__dzAxisProxy=new as(u,h,v,c),a.push(p.__dzAxisProxy))});var l=(0,b.createHashMap)();return(0,b.each)(a,function(u){(0,b.each)(u.getTargetSeriesModels(),function(h){l.set(h.uid,h)})}),l},overallReset:function(c,s){c.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(l,u){a.getAxisProxy(l,u).reset(a)}),a.eachTargetAxis(function(l,u){a.getAxisProxy(l,u).filterData(a,s)})}),c.eachComponent("dataZoom",function(a){var l=a.findRepresentativeAxisProxy();if(l){var u=l.getDataPercentWindow(),h=l.getDataValueWindow();a.setCalculatedRange({start:u[0],end:u[1],startValue:h[0],endValue:h[1]})}})}};var l1=!1;function hg(c){l1||(l1=!0,c.registerProcessor(c.PRIORITY.PROCESSOR.FILTER,Tk),function dE(c){c.registerAction("dataZoom",function(s,a){var l=function w4(c,s){var h,a=(0,b.createHashMap)(),l=[],u=(0,b.createHashMap)();c.eachComponent({mainType:"dataZoom",query:s},function(x){u.get(x.uid)||v(x)});do{h=!1,c.eachComponent("dataZoom",p)}while(h);function p(x){!u.get(x.uid)&&function m(x){var C=!1;return x.eachTargetAxis(function(M,E){var R=a.get(M);R&&R[E]&&(C=!0)}),C}(x)&&(v(x),h=!0)}function v(x){u.set(x.uid,!0),l.push(x),function y(x){x.eachTargetAxis(function(C,M){(a.get(C)||a.set(C,[]))[M]=!0})}(x)}return l}(a,s);(0,b.each)(l,function(u){u.setRawRange({start:s.start,end:s.end,startValue:s.startValue,endValue:s.endValue})})})}(c),c.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function hE(c){c.registerComponentModel(Ck),c.registerComponentView(Pd),hg(c)}var al=function c(){},fE={};function fg(c,s){fE[c]=s}function p_(c){return fE[c]}const pE=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.optionUpdated=function(){c.prototype.optionUpdated.apply(this,arguments);var a=this.ecModel;b.each(this.option.feature,function(l,u){var h=p_(u);h&&(h.getDefaultOption&&(h.defaultOption=h.getDefaultOption(a)),b.merge(l,h.defaultOption))})},s.type="toolbox",s.layoutMode={type:"box",ignoreSize:!0},s.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},s}(xa.Z);function g_(c,s){var a=Ia.MY(s.get("padding")),l=s.getItemStyle(["color","opacity"]);return l.fill=s.get("backgroundColor"),new Jt.Z({shape:{x:c.x-a[3],y:c.y-a[0],width:c.width+a[1]+a[3],height:c.height+a[0]+a[2],r:s.get("borderRadius")},style:l,silent:!0,z2:-1})}const Ik=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u,h){var p=this.group;if(p.removeAll(),a.get("show")){var v=+a.get("itemSize"),m="vertical"===a.get("orient"),y=a.get("feature")||{},x=this._features||(this._features={}),C=[];b.each(y,function(R,F){C.push(F)}),new td.Z(this._featureNames||[],C).add(M).update(M).remove(b.curry(M,null)).execute(),this._featureNames=C,function u1(c,s,a){var l=s.getBoxLayoutParams(),u=s.get("padding"),h={width:a.getWidth(),height:a.getHeight()},p=(0,Oe.ME)(l,h,u);(0,Oe.BZ)(s.get("orient"),c,s.get("itemGap"),p.width,p.height),(0,Oe.p$)(c,l,h,u)}(p,a,u),p.add(g_(p.getBoundingRect(),a)),m||p.eachChild(function(R){var F=R.__title,U=R.ensureState("emphasis"),ue=U.textConfig||(U.textConfig={}),me=R.getTextContent(),ve=me&&me.ensureState("emphasis");if(ve&&!b.isFunction(ve)&&F){var Me=ve.style||(ve.style={}),Ae=we.lP(F,kt.ZP.makeFont(Me)),Pe=R.x+p.x,He=!1;R.y+p.y+v+Ae.height>u.getHeight()&&(ue.position="top",He=!0);var Ye=He?-5-Ae.height:v+10;Pe+Ae.width/2>u.getWidth()?(ue.position=["100%",Ye],Me.align="right"):Pe-Ae.width/2<0&&(ue.position=[0,Ye],Me.align="left")}})}function M(R,F){var Me,U=C[R],ue=C[F],me=y[U],ve=new ki.Z(me,a,a.ecModel);if(h&&null!=h.newTitle&&h.featureName===U&&(me.title=h.newTitle),U&&!ue){if(function Ak(c){return 0===c.indexOf("my")}(U))Me={onclick:ve.option.onclick,featureName:U};else{var Ae=p_(U);if(!Ae)return;Me=new Ae}x[U]=Me}else if(!(Me=x[ue]))return;Me.uid=(0,qn.Kr)("toolbox-feature"),Me.model=ve,Me.ecModel=l,Me.api=u;var Pe=Me instanceof al;U||!ue?!ve.get("show")||Pe&&Me.unusable?Pe&&Me.remove&&Me.remove(l,u):(function E(R,F,U){var Ae,Pe,ue=R.getModel("iconStyle"),me=R.getModel(["emphasis","iconStyle"]),ve=F instanceof al&&F.getIcons?F.getIcons():R.get("icon"),Me=R.get("title")||{};b.isString(ve)?(Ae={})[U]=ve:Ae=ve,b.isString(Me)?(Pe={})[U]=Me:Pe=Me;var Ne=R.iconPaths={};b.each(Ae,function(He,Ye){var Qe=Un.createIcon(He,{},{x:-v/2,y:-v/2,width:v,height:v});Qe.setStyle(ue.getItemStyle()),Qe.ensureState("emphasis").style=me.getItemStyle();var ct=new kt.ZP({style:{text:Pe[Ye],align:me.get("textAlign"),borderRadius:me.get("textBorderRadius"),padding:me.get("textPadding"),fill:null,font:(0,Bn.qT)({fontStyle:me.get("textFontStyle"),fontFamily:me.get("textFontFamily"),fontSize:me.get("textFontSize"),fontWeight:me.get("textFontWeight")},l)},ignore:!0});Qe.setTextContent(ct),Un.setTooltipConfig({el:Qe,componentModel:a,itemName:Ye,formatterParamsExtra:{title:Pe[Ye]}}),Qe.__title=Pe[Ye],Qe.on("mouseover",function(){var ht=me.getItemStyle(),vt=m?null==a.get("right")&&"right"!==a.get("left")?"right":"left":null==a.get("bottom")&&"bottom"!==a.get("top")?"bottom":"top";ct.setStyle({fill:me.get("textFill")||ht.fill||ht.stroke||"#000",backgroundColor:me.get("textBackgroundColor")}),Qe.setTextConfig({position:me.get("textPosition")||vt}),ct.ignore=!a.get("showTitle"),u.enterEmphasis(this)}).on("mouseout",function(){"emphasis"!==R.get(["iconStatus",Ye])&&u.leaveEmphasis(this),ct.hide()}),("emphasis"===R.get(["iconStatus",Ye])?bn.fD:bn.Mh)(Qe),p.add(Qe),Qe.on("click",b.bind(F.onclick,F,l,u,Ye)),Ne[Ye]=Qe})}(ve,Me,U),ve.setIconStatus=function(Ne,He){var Ye=this.option,Qe=this.iconPaths;Ye.iconStatus=Ye.iconStatus||{},Ye.iconStatus[Ne]=He,Qe[Ne]&&("emphasis"===He?bn.fD:bn.Mh)(Qe[Ne])},Me instanceof al&&Me.render&&Me.render(ve,l,u,h)):Pe&&Me.dispose&&Me.dispose(l,u)}},s.prototype.updateView=function(a,l,u,h){b.each(this._features,function(p){p instanceof al&&p.updateView&&p.updateView(p.model,l,u,h)})},s.prototype.remove=function(a,l){b.each(this._features,function(u){u instanceof al&&u.remove&&u.remove(a,l)}),this.group.removeAll()},s.prototype.dispose=function(a,l){b.each(this._features,function(u){u instanceof al&&u.dispose&&u.dispose(a,l)})},s.type="toolbox",s}(Ra.Z),gE=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,Rt.ZT)(s,c),s.prototype.onclick=function(a,l){var u=this.model,h=u.get("name")||a.get("title.0.text")||"echarts",p="svg"===l.getZr().painter.getType(),v=p?"svg":u.get("type",!0)||"png",m=l.getConnectedDataURL({type:v,backgroundColor:u.get("backgroundColor",!0)||a.get("backgroundColor")||"#fff",connectedBackgroundColor:u.get("connectedBackgroundColor"),excludeComponents:u.get("excludeComponents"),pixelRatio:u.get("pixelRatio")}),y=Yo.Z.browser;if("function"!=typeof MouseEvent||!y.newEdge&&(y.ie||y.edge))if(window.navigator.msSaveOrOpenBlob||p){var M=m.split(","),E=M[0].indexOf("base64")>-1,R=p?decodeURIComponent(M[1]):M[1];E&&(R=window.atob(R));var F=h+"."+v;if(window.navigator.msSaveOrOpenBlob){for(var U=R.length,ue=new Uint8Array(U);U--;)ue[U]=R.charCodeAt(U);var me=new Blob([ue]);window.navigator.msSaveOrOpenBlob(me,F)}else{var ve=document.createElement("iframe");document.body.appendChild(ve);var Me=ve.contentWindow,Ae=Me.document;Ae.open("image/svg+xml","replace"),Ae.write(R),Ae.close(),Me.focus(),Ae.execCommand("SaveAs",!0,F),document.body.removeChild(ve)}}else{var Pe=u.get("lang"),Ne='<body style="margin:0;"><img src="'+m+'" style="max-width:100%;" title="'+(Pe&&Pe[0]||"")+'" /></body>',He=window.open();He.document.write(Ne),He.document.title=h}else{var x=document.createElement("a");x.download=h+"."+v,x.target="_blank",x.href=m;var C=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});x.dispatchEvent(C)}},s.getDefaultOption=function(a){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:a.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:a.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},s}(al);var v_="__ec_magicType_stack__",Bi=[["line","bar"],["stack"]],$n=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,Rt.ZT)(s,c),s.prototype.getIcons=function(){var a=this.model,l=a.get("icon"),u={};return b.each(a.get("type"),function(h){l[h]&&(u[h]=l[h])}),u},s.getDefaultOption=function(a){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:a.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},s.prototype.onclick=function(a,l,u){var h=this.model,p=h.get(["seriesIndex",u]);if(vE[u]){var v={series:[]};b.each(Bi,function(C){b.indexOf(C,u)>=0&&b.each(C,function(M){h.setIconStatus(M,"normal")})}),h.setIconStatus(u,"emphasis"),a.eachComponent({mainType:"series",query:null==p?null:{seriesIndex:p}},function(C){var R=vE[u](C.subType,C.id,C,h);R&&(b.defaults(R,C.option),v.series.push(R));var F=C.coordinateSystem;if(F&&"cartesian2d"===F.type&&("line"===u||"bar"===u)){var U=F.getAxesByScale("ordinal")[0];if(U){var me=U.dim+"Axis",Me=C.getReferringComponents(me,An.C6).models[0].componentIndex;v[me]=v[me]||[];for(var Ae=0;Ae<=Me;Ae++)v[me][Me]=v[me][Me]||{};v[me][Me].boundaryGap="bar"===u}}});var y,x=u;"stack"===u&&(y=b.merge({stack:h.option.title.tiled,tiled:h.option.title.stack},h.option.title),"emphasis"!==h.get(["iconStatus",u])&&(x="tiled")),l.dispatchAction({type:"changeMagicType",currentType:x,newOption:v,newTitle:y,featureName:"magicType"})}},s}(al),vE={line:function(c,s,a,l){if("bar"===c)return b.merge({id:s,type:"line",data:a.get("data"),stack:a.get("stack"),markPoint:a.get("markPoint"),markLine:a.get("markLine")},l.get(["option","line"])||{},!0)},bar:function(c,s,a,l){if("line"===c)return b.merge({id:s,type:"bar",data:a.get("data"),stack:a.get("stack"),markPoint:a.get("markPoint"),markLine:a.get("markLine")},l.get(["option","bar"])||{},!0)},stack:function(c,s,a,l){var u=a.get("stack")===v_;if("line"===c||"bar"===c)return l.setIconStatus("stack",u?"normal":"emphasis"),b.merge({id:s,stack:u?"":v_},l.get(["option","stack"])||{},!0)}};qv.zl({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(c,s){s.mergeOption(c.newOption)});const mE=$n;var pg=new Array(60).join("-");function yE(c){var s=[];return b.each(c,function(a,l){var u=a.categoryAxis,p=a.valueAxis.dim,v=[" "].concat(b.map(a.series,function(E){return E.name})),m=[u.model.getCategories()];b.each(a.series,function(E){var R=E.getRawData();m.push(E.getRawData().mapArray(R.mapDimension(p),function(F){return F}))});for(var y=[v.join("\t")],x=0;x<m[0].length;x++){for(var C=[],M=0;M<m.length;M++)C.push(m[M][x]);y.push(C.join("\t"))}s.push(y.join("\n"))}),s.join("\n\n"+pg+"\n\n")}function os(c){return b.map(c,function(s){var a=s.getRawData(),l=[s.name],u=[];return a.each(a.dimensions,function(){for(var h=arguments.length,p=arguments[h-1],v=a.getName(p),m=0;m<h-1;m++)u[m]=arguments[m];l.push((v?v+"\t":"")+u.join("\t"))}),l.join("\n")}).join("\n\n"+pg+"\n\n")}function m_(c){return c.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var bE=new RegExp("[\t]+","g");var gg=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,Rt.ZT)(s,c),s.prototype.onclick=function(a,l){setTimeout(function(){l.dispatchAction({type:"hideTip"})});var u=l.getDom(),h=this.model;this._dom&&u.removeChild(this._dom);var p=document.createElement("div");p.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",p.style.backgroundColor=h.get("backgroundColor")||"#fff";var v=document.createElement("h4"),m=h.get("lang")||[];v.innerHTML=m[0]||h.get("title"),v.style.cssText="margin:10px 20px",v.style.color=h.get("textColor");var y=document.createElement("div"),x=document.createElement("textarea");y.style.cssText="overflow:auto";var C=h.get("optionToContent"),M=h.get("contentToOption"),E=function lf(c){var s=function _E(c){var s={},a=[],l=[];return c.eachRawSeries(function(u){var h=u.coordinateSystem;if(!h||"cartesian2d"!==h.type&&"polar"!==h.type)a.push(u);else{var p=h.getBaseAxis();if("category"===p.type){var v=p.dim+"_"+p.index;s[v]||(s[v]={categoryAxis:p,valueAxis:h.getOtherAxis(p),series:[]},l.push({axisDim:p.dim,axisIndex:p.index})),s[v].series.push(u)}else a.push(u)}}),{seriesGroupByCategoryAxis:s,other:a,meta:l}}(c);return{value:b.filter([yE(s.seriesGroupByCategoryAxis),os(s.other)],function(a){return!!a.replace(/[\n\t\s]/g,"")}).join("\n\n"+pg+"\n\n"),meta:s.meta}}(a);if(b.isFunction(C)){var R=C(l.getOption());b.isString(R)?y.innerHTML=R:b.isDom(R)&&y.appendChild(R)}else{x.readOnly=h.get("readOnly");var F=x.style;F.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",F.color=h.get("textColor"),F.borderColor=h.get("textareaBorderColor"),F.backgroundColor=h.get("textareaColor"),x.value=E.value,y.appendChild(x)}var U=E.meta,ue=document.createElement("div");ue.style.cssText="position:absolute;bottom:5px;left:0;right:0";var me="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",ve=document.createElement("div"),Me=document.createElement("div");me+=";background-color:"+h.get("buttonColor"),me+=";color:"+h.get("buttonTextColor");var Ae=this;function Pe(){u.removeChild(p),Ae._dom=null}(0,vs.Oo)(ve,"click",Pe),(0,vs.Oo)(Me,"click",function(){if(null==M&&null!=C||null!=M&&null==C)Pe();else{var Ne;try{Ne=b.isFunction(M)?M(y,l.getOption()):function wE(c,s){var a=c.split(new RegExp("\n*"+pg+"\n*","g")),l={series:[]};return b.each(a,function(u,h){if(function Rk(c){if(c.slice(0,c.indexOf("\n")).indexOf("\t")>=0)return!0}(u)){var p=function C4(c){for(var s=c.split(/\n+/g),a=m_(s.shift()).split(bE),l=[],u=b.map(a,function(m){return{name:m,data:[]}}),h=0;h<s.length;h++){var p=m_(s[h]).split(bE);l.push(p.shift());for(var v=0;v<p.length;v++)u[v]&&(u[v].data[h]=p[v])}return{series:u,categories:l}}(u),v=s[h],m=v.axisDim+"Axis";v&&(l[m]=l[m]||[],l[m][v.axisIndex]={data:p.categories},l.series=l.series.concat(p.series))}else p=function xE(c){for(var s=c.split(/\n+/g),a=m_(s.shift()),l=[],u=0;u<s.length;u++){var h=m_(s[u]);if(h){var p=h.split(bE),v="",m=void 0,y=!1;isNaN(p[0])?(y=!0,v=p[0],p=p.slice(1),l[u]={name:v,value:[]},m=l[u].value):m=l[u]=[];for(var x=0;x<p.length;x++)m.push(+p[x]);1===m.length&&(y?l[u].value=m[0]:l[u]=m[0])}}return{name:a,data:l}}(u),l.series.push(p)}),l}(x.value,U)}catch(He){throw Pe(),new Error("Data view format error "+He)}Ne&&l.dispatchAction({type:"changeDataView",newOption:Ne}),Pe()}}),ve.innerHTML=m[1],Me.innerHTML=m[2],Me.style.cssText=ve.style.cssText=me,!h.get("readOnly")&&ue.appendChild(Me),ue.appendChild(ve),p.appendChild(v),p.appendChild(y),p.appendChild(ue),y.style.height=u.clientHeight-80+"px",u.appendChild(p),this._dom=p},s.prototype.remove=function(a,l){this._dom&&l.getDom().removeChild(this._dom)},s.prototype.dispose=function(a,l){this.remove(a,l)},s.getDefaultOption=function(a){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:a.getLocaleModel().get(["toolbox","dataView","title"]),lang:a.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},s}(al);function Lk(c,s){return b.map(c,function(a,l){var u=s&&s[l];if(b.isObject(u)&&!b.isArray(u)){b.isObject(a)&&!b.isArray(a)||(a={value:a});var p=null!=u.name&&null==a.name;return a=b.defaults(a,u),p&&delete a.name,a}return a})}qv.zl({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(c,s){var a=[];b.each(c.newOption.series,function(l){var u=s.getSeriesByName(l.name)[0];if(u){var h=u.get("data");a.push({name:l.name,data:Lk(l.data,h)})}else a.push(b.extend({type:"scatter"},l))}),s.mergeOption(b.defaults({series:a},c.newOption))});const d1=gg;var CE=b.each,h1=(0,An.Yf)();function __(c){var s=h1(c);return s.snapshots||(s.snapshots=[{}]),s.snapshots}var SE=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,Rt.ZT)(s,c),s.prototype.onclick=function(a,l){(function Nk(c){h1(c).snapshots=null})(a),l.dispatchAction({type:"restore",from:this.uid})},s.getDefaultOption=function(a){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:a.getLocaleModel().get(["toolbox","restore","title"])}},s}(al);qv.zl({type:"restore",event:"restore",update:"prepareAndUpdate"},function(c,s){s.resetOption("recreate")});const y_=SE;var p1=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],S4=function(){function c(s,a,l){var u=this;this._targetInfoList=[];var h=DE(a,s);(0,b.each)(ME,function(p,v){(!l||!l.include||(0,b.indexOf)(l.include,v)>=0)&&p(h,u._targetInfoList)})}return c.prototype.setOutputRanges=function(s,a){return this.matchOutputRanges(s,a,function(l,u,h){if((l.coordRanges||(l.coordRanges=[])).push(u),!l.coordRange){l.coordRange=u;var p=x_[l.brushType](0,h,u);l.__rangeOffset={offset:Fk[l.brushType](p.values,l.range,[1,1]),xyMinMax:p.xyMinMax}}}),s},c.prototype.matchOutputRanges=function(s,a,l){(0,b.each)(s,function(u){var h=this.findTargetInfo(u,a);h&&!0!==h&&(0,b.each)(h.coordSyses,function(p){var v=x_[u.brushType](1,p,u.range,!0);l(u,v.values,p,a)})},this)},c.prototype.setInputRanges=function(s,a){(0,b.each)(s,function(l){var u=this.findTargetInfo(l,a);if(l.range=l.range||[],u&&!0!==u){l.panelId=u.panelId;var h=x_[l.brushType](0,u.coordSys,l.coordRange),p=l.__rangeOffset;l.range=p?Fk[l.brushType](h.values,p.offset,function D4(c,s){var a=AE(c),l=AE(s),u=[a[0]/l[0],a[1]/l[1]];return isNaN(u[0])&&(u[0]=1),isNaN(u[1])&&(u[1]=1),u}(h.xyMinMax,p.xyMinMax)):h.values}},this)},c.prototype.makePanelOpts=function(s,a){return(0,b.map)(this._targetInfoList,function(l){var u=l.getPanelRect();return{panelId:l.panelId,defaultBrushType:a?a(l):null,clipPath:rc(u),isTargetByCursor:Zb(u,s,l.coordSysModel),getLinearBrushOtherExtent:Nm(u)}})},c.prototype.controlSeries=function(s,a,l){var u=this.findTargetInfo(s,l);return!0===u||u&&(0,b.indexOf)(u.coordSyses,a.coordinateSystem)>=0},c.prototype.findTargetInfo=function(s,a){for(var l=this._targetInfoList,u=DE(a,s),h=0;h<l.length;h++){var p=l[h],v=s.panelId;if(v){if(p.panelId===v)return p}else for(var m=0;m<Rd.length;m++)if(Rd[m](u,p))return p}return!0},c}();function b_(c){return c[0]>c[1]&&c.reverse(),c}function DE(c,s){return(0,An.pm)(c,s,{includeMainTypes:p1})}var ME={grid:function(c,s){var a=c.xAxisModels,l=c.yAxisModels,u=c.gridModels,h=(0,b.createHashMap)(),p={},v={};!a&&!l&&!u||((0,b.each)(a,function(m){var y=m.axis.grid.model;h.set(y.id,y),p[y.id]=!0}),(0,b.each)(l,function(m){var y=m.axis.grid.model;h.set(y.id,y),v[y.id]=!0}),(0,b.each)(u,function(m){h.set(m.id,m),p[m.id]=!0,v[m.id]=!0}),h.each(function(m){var x=[];(0,b.each)(m.coordinateSystem.getCartesians(),function(C,M){((0,b.indexOf)(a,C.getAxis("x").model)>=0||(0,b.indexOf)(l,C.getAxis("y").model)>=0)&&x.push(C)}),s.push({panelId:"grid--"+m.id,gridModel:m,coordSysModel:m,coordSys:x[0],coordSyses:x,getPanelRect:TE.grid,xAxisDeclared:p[m.id],yAxisDeclared:v[m.id]})}))},geo:function(c,s){(0,b.each)(c.geoModels,function(a){var l=a.coordinateSystem;s.push({panelId:"geo--"+a.id,geoModel:a,coordSysModel:a,coordSys:l,coordSyses:[l],getPanelRect:TE.geo})})}},Rd=[function(c,s){var a=c.xAxisModel,l=c.yAxisModel,u=c.gridModel;return!u&&a&&(u=a.axis.grid.model),!u&&l&&(u=l.axis.grid.model),u&&u===s.gridModel},function(c,s){var a=c.geoModel;return a&&a===s.geoModel}],TE={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var c=this.coordSys,s=c.getBoundingRect().clone();return s.applyTransform(Un.getTransform(c)),s}},x_={lineX:(0,b.curry)(w_,0),lineY:(0,b.curry)(w_,1),rect:function(c,s,a,l){var u=c?s.pointToData([a[0][0],a[1][0]],l):s.dataToPoint([a[0][0],a[1][0]],l),h=c?s.pointToData([a[0][1],a[1][1]],l):s.dataToPoint([a[0][1],a[1][1]],l),p=[b_([u[0],h[0]]),b_([u[1],h[1]])];return{values:p,xyMinMax:p}},polygon:function(c,s,a,l){var u=[[1/0,-1/0],[1/0,-1/0]];return{values:(0,b.map)(a,function(p){var v=c?s.pointToData(p,l):s.dataToPoint(p,l);return u[0][0]=Math.min(u[0][0],v[0]),u[1][0]=Math.min(u[1][0],v[1]),u[0][1]=Math.max(u[0][1],v[0]),u[1][1]=Math.max(u[1][1],v[1]),v}),xyMinMax:u}}};function w_(c,s,a,l){var u=a.getAxis(["x","y"][c]),h=b_((0,b.map)([0,1],function(v){return s?u.coordToData(u.toLocalCoord(l[v]),!0):u.toGlobalCoord(u.dataToCoord(l[v]))})),p=[];return p[c]=h,p[1-c]=[NaN,NaN],{values:h,xyMinMax:p}}var Fk={lineX:(0,b.curry)(EE,0),lineY:(0,b.curry)(EE,1),rect:function(c,s,a){return[[c[0][0]-a[0]*s[0][0],c[0][1]-a[0]*s[0][1]],[c[1][0]-a[1]*s[1][0],c[1][1]-a[1]*s[1][1]]]},polygon:function(c,s,a){return(0,b.map)(c,function(l,u){return[l[0]-a[0]*s[u][0],l[1]-a[1]*s[u][1]]})}};function EE(c,s,a,l){return[s[0]-l[c]*a[0],s[1]-l[c]*a[1]]}function AE(c){return c?[c[0][1]-c[0][0],c[1][1]-c[1][0]]:[NaN,NaN]}const g1=S4;var Bk=z(7920),C_=b.each,IE=(0,An.g0)("toolbox-dataZoom_"),PE=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u,h){this._brushController||(this._brushController=new Wp(u.getZr()),this._brushController.on("brush",b.bind(this._onBrush,this)).mount()),function LE(c,s,a,l,u){var h=a._isZoomActive;l&&"takeGlobalCursor"===l.type&&(h="dataZoomSelect"===l.key&&l.dataZoomSelectActive),a._isZoomActive=h,c.setIconStatus("zoom",h?"emphasis":"normal");var v=new g1(v1(c),s,{include:["grid"]}).makePanelOpts(u,function(m){return m.xAxisDeclared&&!m.yAxisDeclared?"lineX":!m.xAxisDeclared&&m.yAxisDeclared?"lineY":"rect"});a._brushController.setPanels(v).enableBrush(!(!h||!v.length)&&{brushType:"auto",brushStyle:c.getModel("brushStyle").getItemStyle()})}(a,l,this,h,u),function Vk(c,s){c.setIconStatus("back",function f1(c){return __(c).length}(s)>1?"emphasis":"normal")}(a,l)},s.prototype.onclick=function(a,l,u){RE[u].call(this)},s.prototype.remove=function(a,l){this._brushController&&this._brushController.unmount()},s.prototype.dispose=function(a,l){this._brushController&&this._brushController.dispose()},s.prototype._onBrush=function(a){var l=a.areas;if(a.isEnd&&l.length){var u={},h=this.ecModel;this._brushController.updateCovers([]),new g1(v1(this.model),h,{include:["grid"]}).matchOutputRanges(l,h,function(y,x,C){if("cartesian2d"===C.type){var M=y.brushType;"rect"===M?(v("x",C,x[0]),v("y",C,x[1])):v({lineX:"x",lineY:"y"}[M],C,x)}}),function Ok(c,s){var a=__(c);CE(s,function(l,u){for(var h=a.length-1;h>=0&&!a[h][u];h--);if(h<0){var v=c.queryComponents({mainType:"dataZoom",subType:"select",id:u})[0];if(v){var m=v.getPercentRange();a[0][u]={dataZoomId:u,start:m[0],end:m[1]}}}}),a.push(s)}(h,u),this._dispatchZoomAction(u)}function v(y,x,C){var M=x.getAxis(y),E=M.model,R=function m(y,x,C){var M;return C.eachComponent({mainType:"dataZoom",subType:"select"},function(E){E.getAxisModel(y,x.componentIndex)&&(M=E)}),M}(y,E,h),F=R.findRepresentativeAxisProxy(E).getMinMaxSpan();(null!=F.minValueSpan||null!=F.maxValueSpan)&&(C=xu(0,C.slice(),M.scale.getExtent(),0,F.minValueSpan,F.maxValueSpan)),R&&(u[R.id]={dataZoomId:R.id,startValue:C[0],endValue:C[1]})}},s.prototype._dispatchZoomAction=function(a){var l=[];C_(a,function(u,h){l.push(b.clone(u))}),l.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:l})},s.getDefaultOption=function(a){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:a.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},s}(al),RE={zoom:function(){this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!this._isZoomActive})},back:function(){this._dispatchZoomAction(function kk(c){var s=__(c),a=s[s.length-1];s.length>1&&s.pop();var l={};return CE(a,function(u,h){for(var p=s.length-1;p>=0;p--)if(u=s[p][h]){l[h]=u;break}}),l}(this.ecModel))}};function v1(c){var s={xAxisIndex:c.get("xAxisIndex",!0),yAxisIndex:c.get("yAxisIndex",!0),xAxisId:c.get("xAxisId",!0),yAxisId:c.get("yAxisId",!0)};return null==s.xAxisIndex&&null==s.xAxisId&&(s.xAxisIndex="all"),null==s.yAxisIndex&&null==s.yAxisId&&(s.yAxisIndex="all"),s}(0,Bk.f)("dataZoom",function(c){var s=c.getComponent("toolbox",0),a=["feature","dataZoom"];if(s&&null!=s.get(a)){var l=s.getModel(a),u=[],h=v1(l),p=(0,An.pm)(c,h);return C_(p.xAxisModels,function(m){return v(m,"xAxis","xAxisIndex")}),C_(p.yAxisModels,function(m){return v(m,"yAxis","yAxisIndex")}),u}function v(m,y,x){var C=m.componentIndex,M={type:"select",$fromToolbox:!0,filterMode:l.get("filterMode",!0)||"filter",id:IE+y+C};M[x]=C,u.push(M)}});const zk=PE,NE=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.type="tooltip",s.dependencies=["axisPointer"],s.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},s}(xa.Z);function m1(c){var s=c.get("confine");return null!=s?!!s:"richText"===c.get("renderMode")}function FE(c){if(Yo.Z.domSupported)for(var s=document.documentElement.style,a=0,l=c.length;a<l;a++)if(c[a]in s)return c[a]}var BE=FE(["transform","webkitTransform","OTransform","MozTransform","msTransform"]);function _1(c,s){if(!c)return s;s=(0,Ia.zW)(s,!0);var a=c.indexOf(s);return(c=-1===a?s:"-"+c.slice(0,a)+"-"+s).toLowerCase()}var A4=_1(FE(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),"transition"),VE=_1(BE,"transform"),I4="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Yo.Z.transform3dSupported?"will-change:transform;":"");function Hk(c,s,a){var l=c.toFixed(0)+"px",u=s.toFixed(0)+"px";if(!Yo.Z.transformSupported)return a?"top:"+u+";left:"+l+";":[["top",u],["left",l]];var h=Yo.Z.transform3dSupported,p="translate"+(h?"3d":"")+"("+l+","+u+(h?",0":"")+")";return a?"top:0;left:0;"+VE+":"+p+";":[["top",0],["left",0],[BE,p]]}function vg(c,s,a,l,u){var h=s&&s.painter;if(a){var p=h&&h.getViewportRoot();p&&(0,B.YB)(c,p,a,l,u)}else{c[0]=l,c[1]=u;var v=h&&h.getViewportRootOffset();v&&(c[0]+=v.offsetLeft,c[1]+=v.offsetTop)}c[2]=c[0]/s.getWidth(),c[3]=c[1]/s.getHeight()}const mg=function(){function c(s,a){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,Yo.Z.wxa)return null;var l=document.createElement("div");l.domBelongToZr=!0,this.el=l;var u=this._zr=s.getZr(),h=a.appendTo,p=h&&((0,b.isString)(h)?document.querySelector(h):(0,b.isDom)(h)?h:(0,b.isFunction)(h)&&h(s.getDom()));vg(this._styleCoord,u,p,s.getWidth()/2,s.getHeight()/2),(p||s.getDom()).appendChild(l),this._api=s,this._container=p;var v=this;l.onmouseenter=function(){v._enterable&&(clearTimeout(v._hideTimeout),v._show=!0),v._inContent=!0},l.onmousemove=function(m){if(m=m||window.event,!v._enterable){var y=u.handler,x=u.painter.getViewportRoot();(0,vs.OD)(x,m,!0),y.dispatch("mousemove",m)}},l.onmouseleave=function(){v._inContent=!1,v._enterable&&v._show&&v.hideLater(v._hideDelay)}}return c.prototype.update=function(s){if(!this._container){var a=this._api.getDom(),l=function E4(c,s){var a=c.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(c);return a?s?a[s]:a:null}(a,"position"),u=a.style;"absolute"!==u.position&&"absolute"!==l&&(u.position="relative")}var h=s.get("alwaysShowContent");h&&this._moveIfResized(),this._alwaysShowContent=h,this.el.className=s.get("className")||""},c.prototype.show=function(s,a){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var l=this.el,u=l.style,h=this._styleCoord;l.innerHTML?u.cssText=I4+function O4(c,s,a){var l=[],u=c.get("transitionDuration"),h=c.get("backgroundColor"),p=c.get("shadowBlur"),v=c.get("shadowColor"),m=c.get("shadowOffsetX"),y=c.get("shadowOffsetY"),x=c.getModel("textStyle"),C=(0,Ui.d_)(c,"html");return l.push("box-shadow:"+m+"px "+y+"px "+p+"px "+v),s&&u&&l.push(function L4(c,s){var a="cubic-bezier(0.23,1,0.32,1)",l=" "+c/2+"s "+a,u="opacity"+l+",visibility"+l;return s||(l=" "+c+"s "+a,u+=Yo.Z.transformSupported?","+VE+l:",left"+l+",top"+l),A4+":"+u}(u,a)),h&&l.push("background-color:"+h),(0,b.each)(["width","color","radius"],function(E){var R="border-"+E,F=(0,Ia.zW)(R),U=c.get(F);null!=U&&l.push(R+":"+U+("color"===E?"":"px"))}),l.push(function S_(c){var s=[],a=c.get("fontSize"),l=c.getTextColor();l&&s.push("color:"+l),s.push("font:"+c.getFont()),a&&s.push("line-height:"+Math.round(3*a/2)+"px");var u=c.get("textShadowColor"),h=c.get("textShadowBlur")||0,p=c.get("textShadowOffsetX")||0,v=c.get("textShadowOffsetY")||0;return u&&h&&s.push("text-shadow:"+p+"px "+v+"px "+h+"px "+u),(0,b.each)(["decoration","align"],function(m){var y=c.get(m);y&&s.push("text-"+m+":"+y)}),s.join(";")}(x)),null!=C&&l.push("padding:"+(0,Ia.MY)(C).join("px ")+"px"),l.join(";")+";"}(s,!this._firstShow,this._longHide)+Hk(h[0],h[1],!0)+"border-color:"+(0,Ia.Lz)(a)+";"+(s.get("extraCssText")||"")+";pointer-events:"+(this._enterable?"auto":"none"):u.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},c.prototype.setContent=function(s,a,l,u,h){var p=this.el;if(null!=s){var v="";if((0,b.isString)(h)&&"item"===l.get("trigger")&&!m1(l)&&(v=function R4(c,s,a){if(!(0,b.isString)(a)||"inside"===a)return"";var l=c.get("backgroundColor"),u=c.get("borderWidth");s=(0,Ia.Lz)(s);var y,h=function P4(c){return"left"===c?"right":"right"===c?"left":"top"===c?"bottom":"top"}(a),p=Math.max(1.5*Math.round(u),6),v="",m=VE+":";(0,b.indexOf)(["left","right"],h)>-1?(v+="top:50%",m+="translateY(-50%) rotate("+(y="left"===h?-225:-45)+"deg)"):(v+="left:50%",m+="translateX(-50%) rotate("+(y="top"===h?225:45)+"deg)");var x=y*Math.PI/180,C=p+u,M=C*Math.abs(Math.cos(x))+C*Math.abs(Math.sin(x)),R=s+" solid "+u+"px;";return'<div style="'+["position:absolute;width:"+p+"px;height:"+p+"px;z-index:-1;",(v+=";"+h+":-"+Math.round(100*((M-Math.SQRT2*u)/2+Math.SQRT2*u-(M-C)/2))/100+"px")+";"+m+";","border-bottom:"+R,"border-right:"+R,"background-color:"+l+";"].join("")+'"></div>'}(l,u,h)),(0,b.isString)(s))p.innerHTML=s+v;else if(s){p.innerHTML="",(0,b.isArray)(s)||(s=[s]);for(var m=0;m<s.length;m++)(0,b.isDom)(s[m])&&s[m].parentNode!==p&&p.appendChild(s[m]);if(v&&p.childNodes.length){var y=document.createElement("div");y.innerHTML=v,p.appendChild(y)}}}else p.innerHTML=""},c.prototype.setEnterable=function(s){this._enterable=s},c.prototype.getSize=function(){var s=this.el;return[s.offsetWidth,s.offsetHeight]},c.prototype.moveTo=function(s,a){var l=this._styleCoord;if(vg(l,this._zr,this._container,s,a),null!=l[0]&&null!=l[1]){var u=this.el.style,h=Hk(l[0],l[1]);(0,b.each)(h,function(p){u[p[0]]=p[1]})}},c.prototype._moveIfResized=function(){var a=this._styleCoord[3];this.moveTo(this._styleCoord[2]*this._zr.getWidth(),a*this._zr.getHeight())},c.prototype.hide=function(){var s=this,a=this.el.style;a.visibility="hidden",a.opacity="0",Yo.Z.transform3dSupported&&(a.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return s._longHide=!0},500)},c.prototype.hideLater=function(s){this._show&&(!this._inContent||!this._enterable)&&!this._alwaysShowContent&&(s?(this._hideDelay=s,this._show=!1,this._hideTimeout=setTimeout((0,b.bind)(this.hide,this),s)):this.hide())},c.prototype.isShow=function(){return this._show},c.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var s=this.el.parentNode;s&&s.removeChild(this.el),this.el=this._container=null},c}();function Ld(c){return Math.max(0,c)}function M_(c){var s=Ld(c.shadowBlur||0),a=Ld(c.shadowOffsetX||0),l=Ld(c.shadowOffsetY||0);return{left:Ld(s-a),right:Ld(s+a),top:Ld(s-l),bottom:Ld(s+l)}}function y1(c,s,a,l){c[0]=a,c[1]=l,c[2]=c[0]/s.getWidth(),c[3]=c[1]/s.getHeight()}const b1=function(){function c(s){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=s.getZr(),y1(this._styleCoord,this._zr,s.getWidth()/2,s.getHeight()/2)}return c.prototype.update=function(s){var a=s.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a},c.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},c.prototype.setContent=function(s,a,l,u,h){var p=this;b.isObject(s)&&(0,la._y)(""),this.el&&this._zr.remove(this.el);var v=l.getModel("textStyle");this.el=new kt.ZP({style:{rich:a.richTextStyles,text:s,lineHeight:22,borderWidth:1,borderColor:u,textShadowColor:v.get("textShadowColor"),fill:l.get(["textStyle","color"]),padding:(0,Ui.d_)(l,"richText"),verticalAlign:"top",align:"left"},z:l.get("z")}),b.each(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(y){p.el.style[y]=l.get(y)}),b.each(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(y){p.el.style[y]=v.get(y)||0}),this._zr.add(this.el);var m=this;this.el.on("mouseover",function(){m._enterable&&(clearTimeout(m._hideTimeout),m._show=!0),m._inContent=!0}),this.el.on("mouseout",function(){m._enterable&&m._show&&m.hideLater(m._hideDelay),m._inContent=!1})},c.prototype.setEnterable=function(s){this._enterable=s},c.prototype.getSize=function(){var s=this.el,a=this.el.getBoundingRect(),l=M_(s.style);return[a.width+l.left+l.right,a.height+l.top+l.bottom]},c.prototype.moveTo=function(s,a){var l=this.el;if(l){var u=this._styleCoord;y1(u,this._zr,s,a),s=u[0],a=u[1];var h=l.style,p=Ld(h.borderWidth||0),v=M_(h);l.x=s+p+v.left,l.y=a+p+v.top,l.markRedraw()}},c.prototype._moveIfResized=function(){var a=this._styleCoord[3];this.moveTo(this._styleCoord[2]*this._zr.getWidth(),a*this._zr.getHeight())},c.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},c.prototype.hideLater=function(s){this._show&&(!this._inContent||!this._enterable)&&!this._alwaysShowContent&&(s?(this._hideDelay=s,this._show=!1,this._hideTimeout=setTimeout(b.bind(this.hide,this),s)):this.hide())},c.prototype.isShow=function(){return this._show},c.prototype.dispose=function(){this._zr.remove(this.el)},c}();var HE=z(7530),T_=z(6867),Xo=new Jt.Z({shape:{x:-1,y:-1,width:2,height:2}});function _g(c,s,a){var u,l=s.ecModel;a?(u=new ki.Z(a,l,l),u=new ki.Z(s.option,u,l)):u=s;for(var h=c.length-1;h>=0;h--){var p=c[h];p&&(p instanceof ki.Z&&(p=p.get("tooltip",!0)),(0,b.isString)(p)&&(p={formatter:p}),p&&(u=new ki.Z(p,u,l)))}return u}function Pl(c,s){return c.dispatchAction||(0,b.bind)(s.dispatchAction,s)}function Wk(c){return"center"===c||"middle"===c}const x1=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.init=function(a,l){if(!Yo.Z.node&&l.getDom()){var u=a.getComponent("tooltip"),h=this._renderMode=(0,An.U9)(u.get("renderMode"));this._tooltipContent="richText"===h?new b1(l):new mg(l,{appendTo:u.get("appendToBody",!0)?"body":u.get("appendTo",!0)})}},s.prototype.render=function(a,l,u){if(!Yo.Z.node&&u.getDom()){this.group.removeAll(),this._tooltipModel=a,this._ecModel=l,this._api=u;var h=this._tooltipContent;h.update(a),h.setEnterable(a.get("enterable")),this._initGlobalListener(),this._keepShow(),"richText"!==this._renderMode&&a.get("transitionDuration")?(0,Eo.T9)(this,"_updatePosition",50,"fixRate"):(0,Eo.ZH)(this,"_updatePosition")}},s.prototype._initGlobalListener=function(){var l=this._tooltipModel.get("triggerOn");wT("itemTooltip",this._api,(0,b.bind)(function(u,h,p){"none"!==l&&(l.indexOf(u)>=0?this._tryShow(h,p):"leave"===u&&this._hide(p))},this))},s.prototype._keepShow=function(){var a=this._tooltipModel,l=this._ecModel,u=this._api,h=a.get("triggerOn");if(null!=this._lastX&&null!=this._lastY&&"none"!==h&&"click"!==h){var p=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!u.isDisposed()&&p.manuallyShowTip(a,l,u,{x:p._lastX,y:p._lastY,dataByCoordSys:p._lastDataByCoordSys})})}},s.prototype.manuallyShowTip=function(a,l,u,h){if(h.from!==this.uid&&!Yo.Z.node&&u.getDom()){var p=Pl(h,u);this._ticket="";var v=h.dataByCoordSys,m=function jk(c,s,a){var l=(0,An.zH)(c).queryOptionMap,u=l.keys()[0];if(u&&"series"!==u){var m,p=(0,An.HZ)(s,u,l.get(u),{useDefault:!1,enableAll:!1,enableNone:!1}).models[0];if(p&&(a.getViewOfComponentModel(p).group.traverse(function(y){var x=(0,Fn.A)(y).tooltipConfig;if(x&&x.name===c.name)return m=y,!0}),m))return{componentMainType:u,componentIndex:p.componentIndex,el:m}}}(h,l,u);if(m){var y=m.el.getBoundingRect().clone();y.applyTransform(m.el.transform),this._tryShow({offsetX:y.x+y.width/2,offsetY:y.y+y.height/2,target:m.el,position:h.position,positionDefault:"bottom"},p)}else if(h.tooltip&&null!=h.x&&null!=h.y){var x=Xo;x.x=h.x,x.y=h.y,x.update(),(0,Fn.A)(x).tooltipConfig={name:null,option:h.tooltip},this._tryShow({offsetX:h.x,offsetY:h.y,target:x},p)}else if(v)this._tryShow({offsetX:h.x,offsetY:h.y,position:h.position,dataByCoordSys:v,tooltipOption:h.tooltipOption},p);else if(null!=h.seriesIndex){if(this._manuallyAxisShowTip(a,l,u,h))return;var C=Wx(h,l),M=C.point[0],E=C.point[1];null!=M&&null!=E&&this._tryShow({offsetX:M,offsetY:E,target:C.el,position:h.position,positionDefault:"bottom"},p)}else null!=h.x&&null!=h.y&&(u.dispatchAction({type:"updateAxisPointer",x:h.x,y:h.y}),this._tryShow({offsetX:h.x,offsetY:h.y,position:h.position,target:u.getZr().findHover(h.x,h.y).target},p))}},s.prototype.manuallyHideTip=function(a,l,u,h){this._tooltipModel&&this._tooltipContent.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,h.from!==this.uid&&this._hide(Pl(h,u))},s.prototype._manuallyAxisShowTip=function(a,l,u,h){var p=h.seriesIndex,v=h.dataIndex,m=l.getComponent("axisPointer").coordSysAxesInfo;if(null!=p&&null!=v&&null!=m){var y=l.getSeriesByIndex(p);if(y&&"axis"===_g([y.getData().getItemModel(v),y,(y.coordinateSystem||{}).model],this._tooltipModel).get("trigger"))return u.dispatchAction({type:"updateAxisPointer",seriesIndex:p,dataIndex:v,position:h.position}),!0}},s.prototype._tryShow=function(a,l){var u=a.target;if(this._tooltipModel){this._lastX=a.offsetX,this._lastY=a.offsetY;var p=a.dataByCoordSys;if(p&&p.length)this._showAxisTooltip(p,a);else if(u){var m,y;if("legend"===(0,Fn.A)(u).ssrType)return;this._lastDataByCoordSys=null,(0,um.o)(u,function(x){return null!=(0,Fn.A)(x).dataIndex?(m=x,!0):null!=(0,Fn.A)(x).tooltipConfig?(y=x,!0):void 0},!0),m?this._showSeriesItemTooltip(a,m,l):y?this._showComponentItemTooltip(a,y,l):this._hide(l)}else this._lastDataByCoordSys=null,this._hide(l)}},s.prototype._showOrMove=function(a,l){var u=a.get("showDelay");l=(0,b.bind)(l,this),clearTimeout(this._showTimout),u>0?this._showTimout=setTimeout(l,u):l()},s.prototype._showAxisTooltip=function(a,l){var u=this._ecModel,h=this._tooltipModel,p=[l.offsetX,l.offsetY],v=_g([l.tooltipOption],h),m=this._renderMode,y=[],x=(0,Ui.TX)("section",{blocks:[],noHeader:!0}),C=[],M=new Ui.iv;(0,b.each)(a,function(me){(0,b.each)(me.dataByAxis,function(ve){var Me=u.getComponent(ve.axisDim+"Axis",ve.axisIndex),Ae=ve.value;if(Me&&null!=Ae){var Pe=vT(Ae,Me.axis,u,ve.seriesDataIndices,ve.valueLabelOpt),Ne=(0,Ui.TX)("section",{header:Pe,noHeader:!(0,b.trim)(Pe),sortBlocks:!0,blocks:[]});x.blocks.push(Ne),(0,b.each)(ve.seriesDataIndices,function(He){var Ye=u.getSeriesByIndex(He.seriesIndex),Qe=He.dataIndexInside,it=Ye.getDataParams(Qe);if(!(it.dataIndex<0)){it.axisDim=ve.axisDim,it.axisIndex=ve.axisIndex,it.axisType=ve.axisType,it.axisId=ve.axisId,it.axisValue=wa.DX(Me.axis,{value:Ae}),it.axisValueLabel=Pe,it.marker=M.makeTooltipMarker("item",(0,Ia.Lz)(it.color),m);var ct=(0,T_.f)(Ye.formatTooltip(Qe,!0,null)),ht=ct.frag;if(ht){var vt=_g([Ye],h).get("valueFormatter");Ne.blocks.push(vt?(0,b.extend)({valueFormatter:vt},ht):ht)}ct.text&&C.push(ct.text),y.push(it)}})}})}),x.blocks.reverse(),C.reverse();var E=l.position,R=v.get("order"),F=(0,Ui.BY)(x,M,m,R,u.get("useUTC"),v.get("textStyle"));F&&C.unshift(F);var ue=C.join("richText"===m?"\n\n":"<br/>");this._showOrMove(v,function(){this._updateContentNotChangedOnAxis(a,y)?this._updatePosition(v,E,p[0],p[1],this._tooltipContent,y):this._showTooltipContent(v,ue,y,Math.random()+"",p[0],p[1],E,null,M)})},s.prototype._showSeriesItemTooltip=function(a,l,u){var h=this._ecModel,p=(0,Fn.A)(l),v=p.seriesIndex,m=h.getSeriesByIndex(v),y=p.dataModel||m,x=p.dataIndex,C=p.dataType,M=y.getData(C),E=this._renderMode,R=a.positionDefault,F=_g([M.getItemModel(x),y,m&&(m.coordinateSystem||{}).model],this._tooltipModel,R?{position:R}:null),U=F.get("trigger");if(null==U||"item"===U){var ue=y.getDataParams(x,C),me=new Ui.iv;ue.marker=me.makeTooltipMarker("item",(0,Ia.Lz)(ue.color),E);var ve=(0,T_.f)(y.formatTooltip(x,!1,C)),Me=F.get("order"),Ae=F.get("valueFormatter"),Pe=ve.frag,Ne=Pe?(0,Ui.BY)(Ae?(0,b.extend)({valueFormatter:Ae},Pe):Pe,me,E,Me,h.get("useUTC"),F.get("textStyle")):ve.text,He="item_"+y.name+"_"+x;this._showOrMove(F,function(){this._showTooltipContent(F,Ne,ue,He,a.offsetX,a.offsetY,a.position,a.target,me)}),u({type:"showTip",dataIndexInside:x,dataIndex:M.getRawIndex(x),seriesIndex:v,from:this.uid})}},s.prototype._showComponentItemTooltip=function(a,l,u){var h="html"===this._renderMode,p=(0,Fn.A)(l),m=p.tooltipConfig.option||{},y=m.encodeHTMLContent;(0,b.isString)(m)&&(m={content:m,formatter:m},y=!0),y&&h&&m.content&&((m=(0,b.clone)(m)).content=(0,B.F1)(m.content));var C=[m],M=this._ecModel.getComponent(p.componentMainType,p.componentIndex);M&&C.push(M),C.push({formatter:m.content});var E=a.positionDefault,R=_g(C,this._tooltipModel,E?{position:E}:null),F=R.get("content"),U=Math.random()+"",ue=new Ui.iv;this._showOrMove(R,function(){var me=(0,b.clone)(R.get("formatterParams")||{});this._showTooltipContent(R,F,me,U,a.offsetX,a.offsetY,a.position,l,ue)}),u({type:"showTip",from:this.uid})},s.prototype._showTooltipContent=function(a,l,u,h,p,v,m,y,x){if(this._ticket="",a.get("showContent")&&a.get("show")){var C=this._tooltipContent;C.setEnterable(a.get("enterable"));var M=a.get("formatter");m=m||a.get("position");var E=l,F=this._getNearestPoint([p,v],u,a.get("trigger"),a.get("borderColor")).color;if(M)if((0,b.isString)(M)){var U=a.ecModel.get("useUTC"),ue=(0,b.isArray)(u)?u[0]:u;E=M,ue&&ue.axisType&&ue.axisType.indexOf("time")>=0&&(E=(0,HE.WU)(ue.axisValue,E,U)),E=(0,Ia.kF)(E,u,!0)}else if((0,b.isFunction)(M)){var ve=(0,b.bind)(function(Me,Ae){Me===this._ticket&&(C.setContent(Ae,x,a,F,m),this._updatePosition(a,m,p,v,C,u,y))},this);this._ticket=h,E=M(u,h,ve)}else E=M;C.setContent(E,x,a,F,m),C.show(a,F),this._updatePosition(a,m,p,v,C,u,y)}},s.prototype._getNearestPoint=function(a,l,u,h){return"axis"===u||(0,b.isArray)(l)?{color:h||("html"===this._renderMode?"#fff":"none")}:(0,b.isArray)(l)?void 0:{color:h||l.color||l.borderColor}},s.prototype._updatePosition=function(a,l,u,h,p,v,m){var y=this._api.getWidth(),x=this._api.getHeight();l=l||a.get("position");var C=p.getSize(),M=a.get("align"),E=a.get("verticalAlign"),R=m&&m.getBoundingRect().clone();if(m&&R.applyTransform(m.transform),(0,b.isFunction)(l)&&(l=l([u,h],v,p.el,R,{viewSize:[y,x],contentSize:C.slice()})),(0,b.isArray)(l))u=(0,ft.GM)(l[0],y),h=(0,ft.GM)(l[1],x);else if((0,b.isObject)(l)){var F=l;F.width=C[0],F.height=C[1];var U=(0,Oe.ME)(F,{width:y,height:x});u=U.x,h=U.y,M=null,E=null}else if((0,b.isString)(l)&&m){var ue=function N4(c,s,a,l){var u=a[0],h=a[1],p=Math.ceil(Math.SQRT2*l)+8,v=0,m=0,y=s.width,x=s.height;switch(c){case"inside":v=s.x+y/2-u/2,m=s.y+x/2-h/2;break;case"top":v=s.x+y/2-u/2,m=s.y-h-p;break;case"bottom":v=s.x+y/2-u/2,m=s.y+x+p;break;case"left":v=s.x-u-p,m=s.y+x/2-h/2;break;case"right":v=s.x+y+p,m=s.y+x/2-h/2}return[v,m]}(l,R,C,a.get("borderWidth"));u=ue[0],h=ue[1]}else ue=function Gk(c,s,a,l,u,h,p){var v=a.getSize(),m=v[0],y=v[1];return null!=h&&(c+m+h+2>l?c-=m+h:c+=h),null!=p&&(s+y+p>u?s-=y+p:s+=p),[c,s]}(u,h,p,y,x,M?null:20,E?null:20),u=ue[0],h=ue[1];M&&(u-=Wk(M)?C[0]/2:"right"===M?C[0]:0),E&&(h-=Wk(E)?C[1]/2:"bottom"===E?C[1]:0),m1(a)&&(ue=function k4(c,s,a,l,u){var h=a.getSize(),p=h[0],v=h[1];return c=Math.min(c+p,l)-p,s=Math.min(s+v,u)-v,[c=Math.max(c,0),s=Math.max(s,0)]}(u,h,p,y,x),u=ue[0],h=ue[1]),p.moveTo(u,h)},s.prototype._updateContentNotChangedOnAxis=function(a,l){var u=this._lastDataByCoordSys,h=this._cbParamsList,p=!!u&&u.length===a.length;return p&&(0,b.each)(u,function(v,m){var y=v.dataByAxis||[],C=(a[m]||{}).dataByAxis||[];(p=p&&y.length===C.length)&&(0,b.each)(y,function(M,E){var R=C[E]||{},F=M.seriesDataIndices||[],U=R.seriesDataIndices||[];(p=p&&M.value===R.value&&M.axisType===R.axisType&&M.axisId===R.axisId&&F.length===U.length)&&(0,b.each)(F,function(ue,me){var ve=U[me];p=p&&ue.seriesIndex===ve.seriesIndex&&ue.dataIndex===ve.dataIndex}),h&&(0,b.each)(M.seriesDataIndices,function(ue){var me=ue.seriesIndex,ve=l[me],Me=h[me];ve&&Me&&Me.data!==ve.data&&(p=!1)})})}),this._lastDataByCoordSys=a,this._cbParamsList=l,!!p},s.prototype._hide=function(a){this._lastDataByCoordSys=null,a({type:"hideTip",from:this.uid})},s.prototype.dispose=function(a,l){Yo.Z.node||!l.getDom()||((0,Eo.ZH)(this,"_updatePosition"),this._tooltipContent.dispose(),Gx("itemTooltip",l))},s.type="tooltip",s}(Ra.Z);var F4=["rect","polygon","keep","clear"];function Yk(c,s){var a=(0,An.kF)(c?c.brush:[]);if(a.length){var l=[];b.each(a,function(m){var y=m.hasOwnProperty("toolbox")?m.toolbox:[];y instanceof Array&&(l=l.concat(y))});var u=c&&c.toolbox;b.isArray(u)&&(u=u[0]),u||(c.toolbox=[u={feature:{}}]);var h=u.feature||(u.feature={}),p=h.brush||(h.brush={}),v=p.type||(p.type=[]);v.push.apply(v,l),function UE(c){var s={};b.each(c,function(a){s[a]=1}),c.length=0,b.each(s,function(a,l){c.push(l)})}(v),s&&!v.length&&v.push.apply(v,F4)}}var $c=z(470),Xk=b.each;function ol(c){if(c)for(var s in c)if(c.hasOwnProperty(s))return!0}function w1(c,s,a){var l={};return Xk(s,function(h){var p=l[h]=function u(){var h=function(){};return h.prototype.__hidden=h.prototype,new h}();Xk(c[h],function(v,m){if(sa.isValidType(m)){var y={type:m,visual:v};a&&a(y,h),p[m]=new sa(y),"opacity"===m&&((y=b.clone(y)).type="colorAlpha",p.__hidden.__alphaForOpacity=new sa(y))}})}),l}function E_(c,s,a){var l;b.each(a,function(u){s.hasOwnProperty(u)&&ol(s[u])&&(l=!0)}),l&&b.each(a,function(u){s.hasOwnProperty(u)&&ol(s[u])?c[u]=b.clone(s[u]):delete c[u]})}var yg=z(2286),GE={lineX:WE(0),lineY:WE(1),rect:{point:function(c,s,a){return c&&a.boundingRect.contain(c[0],c[1])},rect:function(c,s,a){return c&&a.boundingRect.intersect(c)}},polygon:{point:function(c,s,a){return c&&a.boundingRect.contain(c[0],c[1])&&yg.X(a.range,c[0],c[1])},rect:function(c,s,a){var l=a.range;if(!c||l.length<=1)return!1;var u=c.x,h=c.y,p=c.width,v=c.height,m=l[0];return!!(yg.X(l,u,h)||yg.X(l,u+p,h)||yg.X(l,u,h+v)||yg.X(l,u+p,h+v)||Pa.Z.create(c).contain(m[0],m[1])||(0,Un.linePolygonIntersect)(u,h,u+p,h,l)||(0,Un.linePolygonIntersect)(u,h,u,h+v,l)||(0,Un.linePolygonIntersect)(u+p,h,u+p,h+v,l)||(0,Un.linePolygonIntersect)(u,h+v,u+p,h+v,l))||void 0}}};function WE(c){var s=["x","y"],a=["width","height"];return{point:function(l,u,h){if(l)return Od(l[c],h.range)},rect:function(l,u,h){if(l){var p=h.range,v=[l[s[c]],l[s[c]]+l[a[c]]];return v[1]<v[0]&&v.reverse(),Od(v[0],p)||Od(v[1],p)||Od(p[0],v)||Od(p[1],v)}}}}function Od(c,s){return s[0]<=c&&c<=s[1]}var S1=["inBrush","outOfBrush"],D1="__ecBrushSelect",A_="__ecInBrushSelectEvent";function bg(c){c.eachComponent({mainType:"brush"},function(s){(s.brushTargetManager=new g1(s.option,c)).setInputRanges(s.areas,c)})}function M1(c,s,a){var u,h,l=[];c.eachComponent({mainType:"brush"},function(p){a&&"takeGlobalCursor"===a.type&&p.setBrushOption("brush"===a.key?a.brushOption:{brushType:!1})}),bg(c),c.eachComponent({mainType:"brush"},function(p,v){var m={brushId:p.id,brushIndex:v,brushName:p.name,areas:b.clone(p.areas),selected:[]};l.push(m);var y=p.option,x=y.brushLink,C=[],M=[],E=[],R=!1;v||(u=y.throttleType,h=y.throttleDelay);var F=b.map(p.areas,function(Ae){var Pe=jE[Ae.brushType],Ne=b.defaults({boundingRect:Pe?Pe(Ae):void 0},Ae);return Ne.selectors=function C1(c){var s=c.brushType,a={point:function(l){return GE[s].point(l,a,c)},rect:function(l){return GE[s].rect(l,a,c)}};return a}(Ne),Ne}),U=w1(p.option,S1,function(Ae){Ae.mappingMethod="fixed"});function ue(Ae){return"all"===x||!!C[Ae]}function me(Ae){return!!Ae.length}b.isArray(x)&&b.each(x,function(Ae){C[Ae]=1}),c.eachSeries(function(Ae,Pe){var Ne=E[Pe]=[];"parallel"===Ae.subType?function ve(Ae,Pe){var Ne=Ae.coordinateSystem;R=R||Ne.hasAxisBrushed(),ue(Pe)&&Ne.eachActiveState(Ae.getData(),function(He,Ye){"active"===He&&(M[Ye]=1)})}(Ae,Pe):function Me(Ae,Pe,Ne){if(Ae.brushSelector&&!function Cu(c,s){var a=c.option.seriesIndex;return null!=a&&"all"!==a&&(b.isArray(a)?b.indexOf(a,s)<0:s!==a)}(p,Pe)&&(b.each(F,function(Ye){p.brushTargetManager.controlSeries(Ye,Ae,c)&&Ne.push(Ye),R=R||me(Ne)}),ue(Pe)&&me(Ne))){var He=Ae.getData();He.each(function(Ye){I_(Ae,Ne,He,Ye)&&(M[Ye]=1)})}}(Ae,Pe,Ne)}),c.eachSeries(function(Ae,Pe){var Ne={seriesId:Ae.id,seriesIndex:Pe,seriesName:Ae.name,dataIndex:[]};m.selected.push(Ne);var He=E[Pe],Ye=Ae.getData(),Qe=ue(Pe)?function(it){return M[it]?(Ne.dataIndex.push(Ye.getRawIndex(it)),"inBrush"):"outOfBrush"}:function(it){return I_(Ae,He,Ye,it)?(Ne.dataIndex.push(Ye.getRawIndex(it)),"inBrush"):"outOfBrush"};(ue(Pe)?R:me(He))&&function $k(c,s,a,l,u,h){var v,p={};function m(C){return(0,$c.Or)(a,v,C)}function y(C,M){(0,$c.LZ)(a,v,C,M)}function x(C,M){var E=a.getRawDataItem(v=null==h?C:M);if(!E||!1!==E.visualMap)for(var R=l.call(u,C),F=s[R],U=p[R],ue=0,me=U.length;ue<me;ue++){var ve=U[ue];F[ve]&&F[ve].applyVisual(C,m,y)}}b.each(c,function(C){var M=sa.prepareVisualTypes(s[C]);p[C]=M}),null==h?a.each(x):a.each([h],x)}(S1,U,Ye,Qe)})}),function T1(c,s,a,l,u){if(u){var h=c.getZr();h[A_]||(h[D1]||(h[D1]=Qk),Eo.T9(h,D1,a,s)(c,l))}}(s,u,h,l,a)}function Qk(c,s){if(!c.isDisposed()){var a=c.getZr();a[A_]=!0,c.dispatchAction({type:"brushSelect",batch:s}),a[A_]=!1}}function I_(c,s,a,l){for(var u=0,h=s.length;u<h;u++){var p=s[u];if(c.brushSelector(l,a,p.selectors,p))return!0}}var jE={rect:function(c){return P_(c.range)},polygon:function(c){for(var s,a=c.range,l=0,u=a.length;l<u;l++){var h=a[l];h[0]<(s=s||[[1/0,-1/0],[1/0,-1/0]])[0][0]&&(s[0][0]=h[0]),h[0]>s[0][1]&&(s[0][1]=h[0]),h[1]<s[1][0]&&(s[1][0]=h[1]),h[1]>s[1][1]&&(s[1][1]=h[1])}return s&&P_(s)}};function P_(c){return new Pa.Z(c[0][0],c[1][0],c[0][1]-c[0][0],c[1][1]-c[1][0])}const qk=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.init=function(a,l){this.ecModel=a,this.api=l,(this._brushController=new Wp(l.getZr())).on("brush",b.bind(this._onBrush,this)).mount()},s.prototype.render=function(a,l,u,h){this.model=a,this._updateController(a,l,u,h)},s.prototype.updateTransform=function(a,l,u,h){bg(l),this._updateController(a,l,u,h)},s.prototype.updateVisual=function(a,l,u,h){this.updateTransform(a,l,u,h)},s.prototype.updateView=function(a,l,u,h){this._updateController(a,l,u,h)},s.prototype._updateController=function(a,l,u,h){(!h||h.$from!==a.id)&&this._brushController.setPanels(a.brushTargetManager.makePanelOpts(u)).enableBrush(a.brushOption).updateCovers(a.areas.slice())},s.prototype.dispose=function(){this._brushController.dispose()},s.prototype._onBrush=function(a){var l=this.model.id,u=this.model.brushTargetManager.setOutputRanges(a.areas,this.ecModel);(!a.isEnd||a.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:l,areas:b.clone(u),$from:l}),a.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:l,areas:b.clone(u),$from:l})},s.type="brush",s}(Ra.Z);function E1(c,s){return b.merge({brushType:c.brushType,brushMode:c.brushMode,transformable:c.transformable,brushStyle:new ki.Z(c.brushStyle).getItemStyle(),removeOnClick:c.removeOnClick,z:c.z},s,!0)}const eN=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.areas=[],a.brushOption={},a}return(0,Rt.ZT)(s,c),s.prototype.optionUpdated=function(a,l){var u=this.option;!l&&E_(u,a,["inBrush","outOfBrush"]);var h=u.inBrush=u.inBrush||{};u.outOfBrush=u.outOfBrush||{color:"#ddd"},h.hasOwnProperty("liftZ")||(h.liftZ=5)},s.prototype.setAreas=function(a){!a||(this.areas=b.map(a,function(l){return E1(this.option,l)},this))},s.prototype.setBrushOption=function(a){this.brushOption=E1(this.option,a),this.brushType=this.brushOption.brushType},s.type="brush",s.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],s.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},s}(xa.Z);var tN=["rect","polygon","lineX","lineY","keep","clear"];const V4=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u){var h,p,v;l.eachComponent({mainType:"brush"},function(m){h=m.brushType,p=m.brushOption.brushMode||"single",v=v||!!m.areas.length}),this._brushType=h,this._brushMode=p,b.each(a.get("type",!0),function(m){a.setIconStatus(m,("keep"===m?"multiple"===p:"clear"===m?v:m===h)?"emphasis":"normal")})},s.prototype.updateView=function(a,l,u){this.render(a,l,u)},s.prototype.getIcons=function(){var a=this.model,l=a.get("icon",!0),u={};return b.each(a.get("type",!0),function(h){l[h]&&(u[h]=l[h])}),u},s.prototype.onclick=function(a,l,u){var h=this._brushType,p=this._brushMode;"clear"===u?(l.dispatchAction({type:"axisAreaSelect",intervals:[]}),l.dispatchAction({type:"brush",command:"clear",areas:[]})):l.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===u?h:h!==u&&u,brushMode:"keep"===u?"multiple"===p?"single":"multiple":p}})},s.getDefaultOption=function(a){return{show:!0,type:tN.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:a.getLocaleModel().get(["toolbox","brush","title"])}},s}(al);var nN=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.layoutMode={type:"box",ignoreSize:!0},a}return(0,Rt.ZT)(s,c),s.type="title",s.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},s}(xa.Z),XE=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u){if(this.group.removeAll(),a.get("show")){var h=this.group,p=a.getModel("textStyle"),v=a.getModel("subtextStyle"),m=a.get("textAlign"),y=b.retrieve2(a.get("textBaseline"),a.get("textVerticalAlign")),x=new kt.ZP({style:(0,Bn.Lr)(p,{text:a.get("text"),fill:p.getTextColor()},{disableBox:!0}),z2:10}),C=x.getBoundingRect(),M=a.get("subtext"),E=new kt.ZP({style:(0,Bn.Lr)(v,{text:M,fill:v.getTextColor(),y:C.height+a.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),R=a.get("link"),F=a.get("sublink"),U=a.get("triggerEvent",!0);x.silent=!R&&!U,E.silent=!F&&!U,R&&x.on("click",function(){(0,Ia.MI)(R,"_"+a.get("target"))}),F&&E.on("click",function(){(0,Ia.MI)(F,"_"+a.get("subtarget"))}),(0,Fn.A)(x).eventData=(0,Fn.A)(E).eventData=U?{componentType:"title",componentIndex:a.componentIndex}:null,h.add(x),M&&h.add(E);var ue=h.getBoundingRect(),me=a.getBoxLayoutParams();me.width=ue.width,me.height=ue.height;var ve=(0,Oe.ME)(me,{width:u.getWidth(),height:u.getHeight()},a.get("padding"));m||("middle"===(m=a.get("left")||a.get("right"))&&(m="center"),"right"===m?ve.x+=ve.width:"center"===m&&(ve.x+=ve.width/2)),y||("center"===(y=a.get("top")||a.get("bottom"))&&(y="middle"),"bottom"===y?ve.y+=ve.height:"middle"===y&&(ve.y+=ve.height/2),y=y||"top"),h.x=ve.x,h.y=ve.y,h.markRedraw();var Me={align:m,verticalAlign:y};x.setStyle(Me),E.setStyle(Me),ue=h.getBoundingRect();var Ae=ve.margin,Pe=a.getItemStyle(["color","opacity"]);Pe.fill=a.get("backgroundColor");var Ne=new Jt.Z({shape:{x:ue.x-Ae[3],y:ue.y-Ae[0],width:ue.width+Ae[1]+Ae[3],height:ue.height+Ae[0]+Ae[2],r:a.get("borderRadius")},style:Pe,subPixelOptimize:!0,silent:!0});h.add(Ne)}},s.type="title",s}(Ra.Z);const I1=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.layoutMode="box",a}return(0,Rt.ZT)(s,c),s.prototype.init=function(a,l,u){this.mergeDefaultAndTheme(a,u),this._initData()},s.prototype.mergeOption=function(a){c.prototype.mergeOption.apply(this,arguments),this._initData()},s.prototype.setCurrentIndex=function(a){null==a&&(a=this.option.currentIndex);var l=this._data.count();this.option.loop?a=(a%l+l)%l:(a>=l&&(a=l-1),a<0&&(a=0)),this.option.currentIndex=a},s.prototype.getCurrentIndex=function(){return this.option.currentIndex},s.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},s.prototype.setPlayState=function(a){this.option.autoPlay=!!a},s.prototype.getPlayState=function(){return!!this.option.autoPlay},s.prototype._initData=function(){var p,a=this.option,l=a.data||[],u=a.axisType,h=this._names=[];"category"===u?(p=[],(0,b.each)(l,function(y,x){var M,C=(0,An.U5)((0,An.C4)(y),"");(0,b.isObject)(y)?(M=(0,b.clone)(y)).value=x:M=x,p.push(M),h.push(C)})):p=l,(this._data=new nr.Z([{name:"value",type:{category:"ordinal",time:"time",value:"number"}[u]||"number"}],this)).initData(p,h)},s.prototype.getData=function(){return this._data},s.prototype.getCategories=function(){if("category"===this.get("axisType"))return this._names.slice()},s.type="timeline",s.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},s}(xa.Z);var P1=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.type="timeline.slider",s.defaultOption=(0,qn.ZL)(I1.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),s}(I1);(0,b.mixin)(P1,T_.X.prototype);const $E=P1,QE=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.type="timeline",s}(Ra.Z),R_=function(c){function s(a,l,u,h){var p=c.call(this,a,l,u)||this;return p.type=h||"value",p}return(0,Rt.ZT)(s,c),s.prototype.getLabelModel=function(){return this.model.getModel("label")},s.prototype.isHorizontal=function(){return"horizontal"===this.model.get("orient")},s}(Is.Z);var qE=z(5866),rN=z(2841),L_=Math.PI,R1=(0,An.Yf)();function L1(c,s,a,l,u,h){var p=s.get("color");if(u)u.setColor(p),a.add(u),h&&h.onUpdate(u);else{var v=c.get("symbol");(u=(0,dr.th)(v,-1,-1,2,2,p)).setStyle("strokeNoScale",!0),a.add(u),h&&h.onCreate(u)}var m=s.getItemStyle(["color"]);u.setStyle(m),l=(0,b.merge)({rectHover:!0,z2:100},l,!0);var y=(0,dr.zp)(c.get("symbolSize"));l.scaleX=y[0]/2,l.scaleY=y[1]/2;var x=(0,dr.Cq)(c.get("symbolOffset"),y);x&&(l.x=(l.x||0)+x[0],l.y=(l.y||0)+x[1]);var C=c.get("symbolRotate");return l.rotation=(C||0)*Math.PI/180||0,u.attr(l),u.updateTransform(),u}function Pi(c,s,a,l,u,h){if(!c.dragging){var p=u.getModel("checkpointStyle"),v=l.dataToCoord(u.getData().get("value",a));if(h||!p.get("animation",!0))c.attr({x:v,y:0}),s&&s.attr({shape:{x2:v}});else{var m={duration:p.get("animationDuration",!0),easing:p.get("animationEasing",!0)};c.stopAnimation(null,!0),c.animateTo({x:v,y:0},m),s&&s.animateTo({shape:{x2:v}},m)}}}const aN=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.init=function(a,l){this.api=l},s.prototype.render=function(a,l,u){if(this.model=a,this.api=u,this.ecModel=l,this.group.removeAll(),a.get("show",!0)){var h=this._layout(a,u),p=this._createGroup("_mainGroup"),v=this._createGroup("_labelGroup"),m=this._axis=this._createAxis(h,a);a.formatTooltip=function(y){var x=m.scale.getLabel({value:y});return(0,Ui.TX)("nameValue",{noName:!0,value:x})},(0,b.each)(["AxisLine","AxisTick","Control","CurrentPointer"],function(y){this["_render"+y](h,p,m,a)},this),this._renderAxisLabel(h,v,m,a),this._position(h,a)}this._doPlayStop(),this._updateTicksStatus()},s.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},s.prototype.dispose=function(){this._clearTimer()},s.prototype._layout=function(a,l){var v,u=a.get(["label","position"]),h=a.get("orient"),p=function U4(c,s){return Oe.ME(c.getBoxLayoutParams(),{width:s.getWidth(),height:s.getHeight()},c.get("padding"))}(a,l),m={horizontal:"center",vertical:(v=null==u||"auto"===u?"horizontal"===h?p.y+p.height/2<l.getHeight()/2?"-":"+":p.x+p.width/2<l.getWidth()/2?"+":"-":(0,b.isString)(u)?{horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[h][u]:u)>=0||"+"===v?"left":"right"},y={horizontal:v>=0||"+"===v?"top":"bottom",vertical:"middle"},x={horizontal:0,vertical:L_/2},C="vertical"===h?p.height:p.width,M=a.getModel("controlStyle"),E=M.get("show",!0),R=E?M.get("itemSize"):0,F=E?M.get("itemGap"):0,U=R+F,ue=a.get(["label","rotate"])||0;ue=ue*L_/180;var me,ve,Me,Ae=M.get("position",!0),Pe=E&&M.get("showPlayBtn",!0),Ne=E&&M.get("showPrevBtn",!0),He=E&&M.get("showNextBtn",!0),Ye=0,Qe=C;"left"===Ae||"bottom"===Ae?(Pe&&(me=[0,0],Ye+=U),Ne&&(ve=[Ye,0],Ye+=U),He&&(Me=[Qe-R,0],Qe-=U)):(Pe&&(me=[Qe-R,0],Qe-=U),Ne&&(ve=[0,0],Ye+=U),He&&(Me=[Qe-R,0],Qe-=U));var it=[Ye,Qe];return a.get("inverse")&&it.reverse(),{viewRect:p,mainLength:C,orient:h,rotation:x[h],labelRotation:ue,labelPosOpt:v,labelAlign:a.get(["label","align"])||m[h],labelBaseline:a.get(["label","verticalAlign"])||a.get(["label","baseline"])||y[h],playPosition:me,prevBtnPosition:ve,nextBtnPosition:Me,axisExtent:it,controlSize:R,controlGap:F}},s.prototype._position=function(a,l){var u=this._mainGroup,h=this._labelGroup,p=a.viewRect;if("vertical"===a.orient){var v=Hr.create(),m=p.x,y=p.y+p.height;Hr.translate(v,v,[-m,-y]),Hr.rotate(v,v,-L_/2),Hr.translate(v,v,[m,y]),(p=p.clone()).applyTransform(v)}var x=me(p),C=me(u.getBoundingRect()),M=me(h.getBoundingRect()),E=[u.x,u.y],R=[h.x,h.y];R[0]=E[0]=x[0][0];var U,F=a.labelPosOpt;function ue(Me){Me.originX=x[0][0]-Me.x,Me.originY=x[1][0]-Me.y}function me(Me){return[[Me.x,Me.x+Me.width],[Me.y,Me.y+Me.height]]}function ve(Me,Ae,Pe,Ne,He){Me[Ne]+=Pe[Ne][He]-Ae[Ne][He]}null==F||(0,b.isString)(F)?(ve(E,C,x,1,U="+"===F?0:1),ve(R,M,x,1,1-U)):(ve(E,C,x,1,U=F>=0?0:1),R[1]=E[1]+F),u.setPosition(E),h.setPosition(R),u.rotation=h.rotation=a.rotation,ue(u),ue(h)},s.prototype._createAxis=function(a,l){var u=l.getData(),h=l.get("axisType"),p=function iN(c,s){if(s=s||c.get("type"))switch(s){case"category":return new qE.Z({ordinalMeta:c.getCategories(),extent:[1/0,-1/0]});case"time":return new rN.Z({locale:c.ecModel.getLocaleModel(),useUTC:c.ecModel.get("useUTC")});default:return new cp.Z}}(l,h);p.getTicks=function(){return u.mapArray(["value"],function(y){return{value:y}})};var v=u.getDataExtent("value");p.setExtent(v[0],v[1]),p.calcNiceTicks();var m=new R_("value",p,a.axisExtent,h);return m.model=l,m},s.prototype._createGroup=function(a){var l=this[a]=new Vn.Z;return this.group.add(l),l},s.prototype._renderAxisLine=function(a,l,u,h){var p=u.getExtent();if(h.get(["lineStyle","show"])){var v=new no.Z({shape:{x1:p[0],y1:0,x2:p[1],y2:0},style:(0,b.extend)({lineCap:"round"},h.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});l.add(v);var m=this._progressLine=new no.Z({shape:{x1:p[0],x2:this._currentPointer?this._currentPointer.x:p[0],y1:0,y2:0},style:(0,b.defaults)({lineCap:"round",lineWidth:v.style.lineWidth},h.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});l.add(m)}},s.prototype._renderAxisTick=function(a,l,u,h){var p=this,v=h.getData(),m=u.scale.getTicks();this._tickSymbols=[],(0,b.each)(m,function(y){var x=u.dataToCoord(y.value),C=v.getItemModel(y.value),M=C.getModel("itemStyle"),E=C.getModel(["emphasis","itemStyle"]),R=C.getModel(["progress","itemStyle"]),F={x,y:0,onclick:(0,b.bind)(p._changeTimeline,p,y.value)},U=L1(C,M,l,F);U.ensureState("emphasis").style=E.getItemStyle(),U.ensureState("progress").style=R.getItemStyle(),(0,bn.vF)(U);var ue=(0,Fn.A)(U);C.get("tooltip")?(ue.dataIndex=y.value,ue.dataModel=h):ue.dataIndex=ue.dataModel=null,p._tickSymbols.push(U)})},s.prototype._renderAxisLabel=function(a,l,u,h){var p=this;if(u.getLabelModel().get("show")){var m=h.getData(),y=u.getViewLabels();this._tickLabels=[],(0,b.each)(y,function(x){var C=x.tickValue,M=m.getItemModel(C),E=M.getModel("label"),R=M.getModel(["emphasis","label"]),F=M.getModel(["progress","label"]),U=u.dataToCoord(x.tickValue),ue=new kt.ZP({x:U,y:0,rotation:a.labelRotation-a.rotation,onclick:(0,b.bind)(p._changeTimeline,p,C),silent:!1,style:(0,Bn.Lr)(E,{text:x.formattedLabel,align:a.labelAlign,verticalAlign:a.labelBaseline})});ue.ensureState("emphasis").style=(0,Bn.Lr)(R),ue.ensureState("progress").style=(0,Bn.Lr)(F),l.add(ue),(0,bn.vF)(ue),R1(ue).dataIndex=C,p._tickLabels.push(ue)})}},s.prototype._renderControl=function(a,l,u,h){var p=a.controlSize,v=a.rotation,m=h.getModel("controlStyle").getItemStyle(),y=h.getModel(["emphasis","controlStyle"]).getItemStyle(),x=h.getPlayState(),C=h.get("inverse",!0);function M(E,R,F,U){if(E){var ue=(0,we.GM)((0,b.retrieve2)(h.get(["controlStyle",R+"BtnSize"]),p),p),ve=function G4(c,s,a,l){var u=l.style,h=Un.createIcon(c.get(["controlStyle",s]),l||{},new Pa.Z(a[0],a[1],a[2],a[3]));return u&&h.setStyle(u),h}(h,R+"Icon",[0,-ue/2,ue,ue],{x:E[0],y:E[1],originX:p/2,originY:0,rotation:U?-v:0,rectHover:!0,style:m,onclick:F});ve.ensureState("emphasis").style=y,l.add(ve),(0,bn.vF)(ve)}}M(a.nextBtnPosition,"next",(0,b.bind)(this._changeTimeline,this,C?"-":"+")),M(a.prevBtnPosition,"prev",(0,b.bind)(this._changeTimeline,this,C?"+":"-")),M(a.playPosition,x?"stop":"play",(0,b.bind)(this._handlePlayClick,this,!x),!0)},s.prototype._renderCurrentPointer=function(a,l,u,h){var p=h.getData(),v=h.getCurrentIndex(),m=p.getItemModel(v).getModel("checkpointStyle"),y=this;this._currentPointer=L1(m,m,this._mainGroup,{},this._currentPointer,{onCreate:function(C){C.draggable=!0,C.drift=(0,b.bind)(y._handlePointerDrag,y),C.ondragend=(0,b.bind)(y._handlePointerDragend,y),Pi(C,y._progressLine,v,u,h,!0)},onUpdate:function(C){Pi(C,y._progressLine,v,u,h)}})},s.prototype._handlePlayClick=function(a){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:a,from:this.uid})},s.prototype._handlePointerDrag=function(a,l,u){this._clearTimer(),this._pointerChangeTimeline([u.offsetX,u.offsetY])},s.prototype._handlePointerDragend=function(a){this._pointerChangeTimeline([a.offsetX,a.offsetY],!0)},s.prototype._pointerChangeTimeline=function(a,l){var u=this._toAxisCoord(a)[0],p=ft.dt(this._axis.getExtent().slice());u>p[1]&&(u=p[1]),u<p[0]&&(u=p[0]),this._currentPointer.x=u,this._currentPointer.markRedraw();var v=this._progressLine;v&&(v.shape.x2=u,v.dirty());var m=this._findNearestTick(u),y=this.model;(l||m!==y.getCurrentIndex()&&y.get("realtime"))&&this._changeTimeline(m)},s.prototype._doPlayStop=function(){var a=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var l=a.model;a._changeTimeline(l.getCurrentIndex()+(l.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},s.prototype._toAxisCoord=function(a){var l=this._mainGroup.getLocalTransform();return Un.applyTransform(a,l,!0)},s.prototype._findNearestTick=function(a){var h,l=this.model.getData(),u=1/0,p=this._axis;return l.each(["value"],function(v,m){var y=p.dataToCoord(v),x=Math.abs(y-a);x<u&&(u=x,h=m)}),h},s.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},s.prototype._changeTimeline=function(a){var l=this.model.getCurrentIndex();"+"===a?a=l+1:"-"===a&&(a=l-1),this.api.dispatchAction({type:"timelineChange",currentIndex:a,from:this.uid})},s.prototype._updateTicksStatus=function(){var a=this.model.getCurrentIndex(),l=this._tickSymbols,u=this._tickLabels;if(l)for(var h=0;h<l.length;h++)l&&l[h]&&l[h].toggleState("progress",h<a);if(u)for(h=0;h<u.length;h++)u&&u[h]&&u[h].toggleState("progress",R1(u[h]).dataIndex<=a)},s.type="timeline.slider",s}(QE);function W4(c){var s=c&&c.timeline;b.isArray(s)||(s=s?[s]:[]),b.each(s,function(a){!a||function j4(c){var s=c.type,a={number:"value",time:"time"};if(a[s]&&(c.axisType=a[s],delete c.type),sN(c),uf(c,"controlPosition")){var l=c.controlStyle||(c.controlStyle={});uf(l,"position")||(l.position=c.controlPosition),"none"===l.position&&!uf(l,"show")&&(l.show=!1,delete l.position),delete c.controlPosition}b.each(c.data||[],function(u){b.isObject(u)&&!b.isArray(u)&&(!uf(u,"value")&&uf(u,"name")&&(u.value=u.name),sN(u))})}(a)})}function sN(c){var s=c.itemStyle||(c.itemStyle={}),a=s.emphasis||(s.emphasis={}),l=c.label||c.label||{},u=l.normal||(l.normal={}),h={normal:1,emphasis:1};b.each(l,function(p,v){!h[v]&&!uf(u,v)&&(u[v]=p)}),a.label&&!uf(l,"emphasis")&&(l.emphasis=a.label,delete a.label)}function uf(c,s){return c.hasOwnProperty(s)}function O1(c,s){if(!c)return!1;for(var a=(0,b.isArray)(c)?c:[c],l=0;l<a.length;l++)if(a[l]&&a[l][s])return!0;return!1}function kd(c){(0,An.Cc)(c,"label",["show"])}var O_=(0,An.Yf)(),JE=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.createdBySelf=!1,a}return(0,Rt.ZT)(s,c),s.prototype.init=function(a,l,u){this.mergeDefaultAndTheme(a,u),this._mergeOption(a,u,!1,!0)},s.prototype.isAnimationEnabled=function(){if(Yo.Z.node)return!1;var a=this.__hostSeries;return this.getShallow("animation")&&a&&a.isAnimationEnabled()},s.prototype.mergeOption=function(a,l){this._mergeOption(a,l,!1,!1)},s.prototype._mergeOption=function(a,l,u,h){var p=this.mainType;u||l.eachSeries(function(v){var m=v.get(this.mainType,!0),y=O_(v)[p];m&&m.data?(y?y._mergeOption(m,l,!0):(h&&kd(m),b.each(m.data,function(x){x instanceof Array?(kd(x[0]),kd(x[1])):kd(x)}),y=this.createMarkerModelFromSeries(m,this,l),b.extend(y,{mainType:this.mainType,seriesIndex:v.seriesIndex,name:v.name,createdBySelf:!0}),y.__hostSeries=v),O_(v)[p]=y):O_(v)[p]=null},this)},s.prototype.formatTooltip=function(a,l,u){var h=this.getData(),p=this.getRawValue(a),v=h.getName(a);return(0,Ui.TX)("section",{header:this.name,blocks:[(0,Ui.TX)("nameValue",{name:v,value:p,noName:!v,noValue:null==p})]})},s.prototype.getData=function(){return this._data},s.prototype.setData=function(a){this._data=a},s.prototype.getDataParams=function(a,l){var u=T_.X.prototype.getDataParams.call(this,a,l),h=this.__hostSeries;return h&&(u.seriesId=h.id,u.seriesName=h.name,u.seriesType=h.subType),u},s.getMarkerModelFromSeries=function(a,l){return O_(a)[l]},s.type="marker",s.dependencies=["series","grid","polar","geo"],s}(xa.Z);b.mixin(JE,T_.X.prototype);const Qc=JE,eA=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.createMarkerModelFromSeries=function(a,l,u){return new s(a,l,u)},s.type="markPoint",s.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},s}(Qc);var fc=z(2401);function xg(c){return!(isNaN(parseFloat(c.x))&&isNaN(parseFloat(c.y)))}function df(c,s,a,l,u,h){var p=[],m=(0,Ts.M)(s,l)?s.getCalculationInfo("stackResultDimension"):l,y=N1(s,m,c),x=s.indicesOfNearest(m,y)[0];p[u]=s.get(a,x),p[h]=s.get(m,x);var C=s.get(l,x),M=ft.p8(s.get(l,x));return(M=Math.min(M,20))>=0&&(p[h]=+p[h].toFixed(M)),[p,C]}var wg={min:(0,b.curry)(df,"min"),max:(0,b.curry)(df,"max"),average:(0,b.curry)(df,"average"),median:(0,b.curry)(df,"median")};function Su(c,s){if(s){var a=c.getData(),l=c.coordinateSystem,u=l&&l.dimensions;if(!function lN(c){return!isNaN(parseFloat(c.x))&&!isNaN(parseFloat(c.y))}(s)&&!(0,b.isArray)(s.coord)&&(0,b.isArray)(u)){var h=cN(s,a,l,c);if((s=(0,b.clone)(s)).type&&wg[s.type]&&h.baseAxis&&h.valueAxis){var p=(0,b.indexOf)(u,h.baseAxis.dim),v=(0,b.indexOf)(u,h.valueAxis.dim),m=wg[s.type](a,h.baseDataDim,h.valueDataDim,p,v);s.coord=m[0],s.value=m[1]}else s.coord=[null!=s.xAxis?s.xAxis:s.radiusAxis,null!=s.yAxis?s.yAxis:s.angleAxis]}if(null!=s.coord&&(0,b.isArray)(u))for(var y=s.coord,x=0;x<2;x++)wg[y[x]]&&(y[x]=N1(a,a.mapDimension(u[x]),y[x]));else s.coord=[];return s}}function cN(c,s,a,l){var u={};return null!=c.valueIndex||null!=c.valueDim?(u.valueDataDim=null!=c.valueIndex?s.getDimension(c.valueIndex):c.valueDim,u.valueAxis=a.getAxis(function Y4(c,s){var a=c.getData().getDimensionInfo(s);return a&&a.coordDim}(l,u.valueDataDim)),u.baseAxis=a.getOtherAxis(u.valueAxis),u.baseDataDim=s.mapDimension(u.baseAxis.dim)):(u.baseAxis=l.getBaseAxis(),u.valueAxis=a.getOtherAxis(u.baseAxis),u.baseDataDim=s.mapDimension(u.baseAxis.dim),u.valueDataDim=s.mapDimension(u.valueAxis.dim)),u}function k_(c,s){return!(c&&c.containData&&s.coord&&!xg(s))||c.containData(s.coord)}function k1(c,s){return c?function(a,l,u,h){return(0,fc.yQ)(h<2?a.coord&&a.coord[h]:a.value,s[h])}:function(a,l,u,h){return(0,fc.yQ)(a.value,s[h])}}function N1(c,s,a){if("average"===a){var l=0,u=0;return c.each(s,function(h,p){isNaN(h)||(l+=h,u++)}),l/u}return"median"===a?c.getMedian(s):c.getDataExtent(s)["max"===a?1:0]}var F1=(0,An.Yf)();const B1=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.init=function(){this.markerGroupMap=(0,b.createHashMap)()},s.prototype.render=function(a,l,u){var h=this,p=this.markerGroupMap;p.each(function(v){F1(v).keep=!1}),l.eachSeries(function(v){var m=Qc.getMarkerModelFromSeries(v,h.type);m&&h.renderSeries(v,m,l,u)}),p.each(function(v){!F1(v).keep&&h.group.remove(v.group)})},s.prototype.markKeep=function(a){F1(a).keep=!0},s.prototype.toggleBlurSeries=function(a,l){var u=this;(0,b.each)(a,function(h){var p=Qc.getMarkerModelFromSeries(h,u.type);p&&p.getData().eachItemGraphicEl(function(m){m&&(l?(0,bn.SX)(m):(0,bn.VP)(m))})})},s.type="marker",s}(Ra.Z);function V1(c,s,a){var l=s.coordinateSystem;c.each(function(u){var p,h=c.getItemModel(u),v=ft.GM(h.get("x"),a.getWidth()),m=ft.GM(h.get("y"),a.getHeight());if(isNaN(v)||isNaN(m)){if(s.getMarkerPosition)p=s.getMarkerPosition(c.getValues(c.dimensions,u));else if(l){var y=c.get(l.dimensions[0],u),x=c.get(l.dimensions[1],u);p=l.dataToPoint([y,x])}}else p=[v,m];isNaN(v)||(p[0]=v),isNaN(m)||(p[1]=m),c.setItemLayout(u,p)})}const dN=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.updateTransform=function(a,l,u){l.eachSeries(function(h){var p=Qc.getMarkerModelFromSeries(h,"markPoint");p&&(V1(p.getData(),h,u),this.markerGroupMap.get(h.id).updateLayout())},this)},s.prototype.renderSeries=function(a,l,u,h){var p=a.coordinateSystem,v=a.id,m=a.getData(),y=this.markerGroupMap,x=y.get(v)||y.set(v,new Do),C=function nA(c,s,a){var l;l=c?(0,b.map)(c&&c.dimensions,function(v){var m=s.getData().getDimensionInfo(s.getData().mapDimension(v))||{};return(0,b.extend)((0,b.extend)({},m),{name:v,ordinalMeta:null})}):[{name:"value",type:"float"}];var u=new nr.Z(l,a),h=(0,b.map)(a.get("data"),(0,b.curry)(Su,s));c&&(h=(0,b.filter)(h,(0,b.curry)(k_,c)));var p=k1(!!c,l);return u.initData(h,null,p),u}(p,a,l);l.setData(C),V1(l.getData(),a,h),C.each(function(M){var E=C.getItemModel(M),R=E.getShallow("symbol"),F=E.getShallow("symbolSize"),U=E.getShallow("symbolRotate"),ue=E.getShallow("symbolOffset"),me=E.getShallow("symbolKeepAspect");if((0,b.isFunction)(R)||(0,b.isFunction)(F)||(0,b.isFunction)(U)||(0,b.isFunction)(ue)){var ve=l.getRawValue(M),Me=l.getDataParams(M);(0,b.isFunction)(R)&&(R=R(ve,Me)),(0,b.isFunction)(F)&&(F=F(ve,Me)),(0,b.isFunction)(U)&&(U=U(ve,Me)),(0,b.isFunction)(ue)&&(ue=ue(ve,Me))}var Ae=E.getModel("itemStyle").getItemStyle(),Pe=(0,$c.UL)(m,"color");Ae.fill||(Ae.fill=Pe),C.setItemVisual(M,{symbol:R,symbolSize:F,symbolRotate:U,symbolOffset:ue,symbolKeepAspect:me,style:Ae})}),x.updateData(C),this.group.add(x.group),C.eachItemGraphicEl(function(M){M.traverse(function(E){(0,Fn.A)(E).dataModel=l})}),this.markKeep(x),x.group.silent=l.get("silent")||a.get("silent")},s.type="markPoint",s}(B1),N_=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.createMarkerModelFromSeries=function(a,l,u){return new s(a,l,u)},s.type="markLine",s.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},s}(Qc);var z1=(0,An.Yf)(),iA=function(c,s,a,l){var h,u=c.getData();if((0,b.isArray)(l))h=l;else{var p=l.type;if("min"===p||"max"===p||"average"===p||"median"===p||null!=l.xAxis||null!=l.yAxis){var v=void 0,m=void 0;if(null!=l.yAxis||null!=l.xAxis)v=s.getAxis(null!=l.yAxis?"y":"x"),m=(0,b.retrieve)(l.yAxis,l.xAxis);else{var y=cN(l,u,s,c);v=y.valueAxis,m=N1(u,(0,Ts.IR)(u,y.valueDataDim),p)}var C="x"===v.dim?0:1,M=1-C,E=(0,b.clone)(l),R={coord:[]};E.type=null,E.coord=[],E.coord[M]=-1/0,R.coord[M]=1/0;var F=a.get("precision");F>=0&&(0,b.isNumber)(m)&&(m=+m.toFixed(Math.min(F,20))),E.coord[C]=R.coord[C]=m,h=[E,R,{type:p,valueIndex:l.valueIndex,value:m}]}else h=[]}var U=[Su(c,h[0]),Su(c,h[1]),(0,b.extend)({},h[2])];return U[2].type=U[2].type||null,(0,b.merge)(U[2],U[0]),(0,b.merge)(U[2],U[1]),U};function Du(c){return!isNaN(c)&&!isFinite(c)}function aA(c,s,a,l){var u=1-c,h=l.dimensions[c];return Du(s[u])&&Du(a[u])&&s[c]===a[c]&&l.getAxis(h).containData(s[c])}function fN(c,s){if("cartesian2d"===c.type){var a=s[0].coord,l=s[1].coord;if(a&&l&&(aA(1,a,l,c)||aA(0,a,l,c)))return!0}return k_(c,s[0])&&k_(c,s[1])}function oA(c,s,a,l,u){var v,h=l.coordinateSystem,p=c.getItemModel(s),m=ft.GM(p.get("x"),u.getWidth()),y=ft.GM(p.get("y"),u.getHeight());if(isNaN(m)||isNaN(y)){if(l.getMarkerPosition)v=l.getMarkerPosition(c.getValues(c.dimensions,s));else{var C=c.get((x=h.dimensions)[0],s),M=c.get(x[1],s);v=h.dataToPoint([C,M])}if(bl(h,"cartesian2d")){var x,E=h.getAxis("x"),R=h.getAxis("y");Du(c.get((x=h.dimensions)[0],s))?v[0]=E.toGlobalCoord(E.getExtent()[a?0:1]):Du(c.get(x[1],s))&&(v[1]=R.toGlobalCoord(R.getExtent()[a?0:1]))}isNaN(m)||(v[0]=m),isNaN(y)||(v[1]=y)}else v=[m,y];c.setItemLayout(s,v)}const gN=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.updateTransform=function(a,l,u){l.eachSeries(function(h){var p=Qc.getMarkerModelFromSeries(h,"markLine");if(p){var v=p.getData(),m=z1(p).from,y=z1(p).to;m.each(function(x){oA(m,x,!0,h,u),oA(y,x,!1,h,u)}),v.each(function(x){v.setItemLayout(x,[m.getItemLayout(x),y.getItemLayout(x)])}),this.markerGroupMap.get(h.id).updateLayout()}},this)},s.prototype.renderSeries=function(a,l,u,h){var p=a.coordinateSystem,v=a.id,m=a.getData(),y=this.markerGroupMap,x=y.get(v)||y.set(v,new vb);this.group.add(x.group);var C=function pN(c,s,a){var l;l=c?(0,b.map)(c&&c.dimensions,function(y){var x=s.getData().getDimensionInfo(s.getData().mapDimension(y))||{};return(0,b.extend)((0,b.extend)({},x),{name:y,ordinalMeta:null})}):[{name:"value",type:"float"}];var u=new nr.Z(l,a),h=new nr.Z(l,a),p=new nr.Z([],a),v=(0,b.map)(a.get("data"),(0,b.curry)(iA,s,c,a));c&&(v=(0,b.filter)(v,(0,b.curry)(fN,c)));var m=k1(!!c,l);return u.initData((0,b.map)(v,function(y){return y[0]}),null,m),h.initData((0,b.map)(v,function(y){return y[1]}),null,m),p.initData((0,b.map)(v,function(y){return y[2]})),p.hasItemOption=!0,{from:u,to:h,line:p}}(p,a,l),M=C.from,E=C.to,R=C.line;z1(l).from=M,z1(l).to=E,l.setData(R);var F=l.get("symbol"),U=l.get("symbolSize"),ue=l.get("symbolRotate"),me=l.get("symbolOffset");function ve(Me,Ae,Pe){var Ne=Me.getItemModel(Ae);oA(Me,Ae,Pe,a,h);var He=Ne.getModel("itemStyle").getItemStyle();null==He.fill&&(He.fill=(0,$c.UL)(m,"color")),Me.setItemVisual(Ae,{symbolKeepAspect:Ne.get("symbolKeepAspect"),symbolOffset:(0,b.retrieve2)(Ne.get("symbolOffset",!0),me[Pe?0:1]),symbolRotate:(0,b.retrieve2)(Ne.get("symbolRotate",!0),ue[Pe?0:1]),symbolSize:(0,b.retrieve2)(Ne.get("symbolSize"),U[Pe?0:1]),symbol:(0,b.retrieve2)(Ne.get("symbol",!0),F[Pe?0:1]),style:He})}(0,b.isArray)(F)||(F=[F,F]),(0,b.isArray)(U)||(U=[U,U]),(0,b.isArray)(ue)||(ue=[ue,ue]),(0,b.isArray)(me)||(me=[me,me]),C.from.each(function(Me){ve(M,Me,!0),ve(E,Me,!1)}),R.each(function(Me){var Ae=R.getItemModel(Me).getModel("lineStyle").getLineStyle();R.setItemLayout(Me,[M.getItemLayout(Me),E.getItemLayout(Me)]),null==Ae.stroke&&(Ae.stroke=M.getItemVisual(Me,"style").fill),R.setItemVisual(Me,{fromSymbolKeepAspect:M.getItemVisual(Me,"symbolKeepAspect"),fromSymbolOffset:M.getItemVisual(Me,"symbolOffset"),fromSymbolRotate:M.getItemVisual(Me,"symbolRotate"),fromSymbolSize:M.getItemVisual(Me,"symbolSize"),fromSymbol:M.getItemVisual(Me,"symbol"),toSymbolKeepAspect:E.getItemVisual(Me,"symbolKeepAspect"),toSymbolOffset:E.getItemVisual(Me,"symbolOffset"),toSymbolRotate:E.getItemVisual(Me,"symbolRotate"),toSymbolSize:E.getItemVisual(Me,"symbolSize"),toSymbol:E.getItemVisual(Me,"symbol"),style:Ae})}),x.updateData(R),C.line.eachItemGraphicEl(function(Me){(0,Fn.A)(Me).dataModel=l,Me.traverse(function(Ae){(0,Fn.A)(Ae).dataModel=l})}),this.markKeep(x),x.group.silent=l.get("silent")||a.get("silent")},s.type="markLine",s}(B1),Q4=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.createMarkerModelFromSeries=function(a,l,u){return new s(a,l,u)},s.type="markArea",s.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},s}(Qc);var H1=(0,An.Yf)(),q4=function(c,s,a,l){var u=l[0],h=l[1];if(u&&h){var p=Su(c,u),v=Su(c,h),m=p.coord,y=v.coord;m[0]=(0,b.retrieve)(m[0],-1/0),m[1]=(0,b.retrieve)(m[1],-1/0),y[0]=(0,b.retrieve)(y[0],1/0),y[1]=(0,b.retrieve)(y[1],1/0);var x=(0,b.mergeAll)([{},p,v]);return x.coord=[p.coord,v.coord],x.x0=p.x,x.y0=p.y,x.x1=v.x,x.y1=v.y,x}};function U1(c){return!isNaN(c)&&!isFinite(c)}function sA(c,s,a,l){var u=1-c;return U1(s[u])&&U1(a[u])}function J4(c,s){var a=s.coord[0],l=s.coord[1],u={coord:a,x:s.x0,y:s.y0},h={coord:l,x:s.x1,y:s.y1};return bl(c,"cartesian2d")?!(!a||!l||!sA(1,a,l)&&!sA(0,a,l))||function X4(c,s,a){return!(c&&c.containZone&&s.coord&&a.coord&&!xg(s)&&!xg(a))||c.containZone(s.coord,a.coord)}(c,u,h):k_(c,u)||k_(c,h)}function vN(c,s,a,l,u){var v,h=l.coordinateSystem,p=c.getItemModel(s),m=ft.GM(p.get(a[0]),u.getWidth()),y=ft.GM(p.get(a[1]),u.getHeight());if(isNaN(m)||isNaN(y)){if(l.getMarkerPosition){var x=c.getValues(["x0","y0"],s),C=c.getValues(["x1","y1"],s),M=h.clampData(x),E=h.clampData(C),R=[];R[0]="x0"===a[0]?M[0]>E[0]?C[0]:x[0]:M[0]>E[0]?x[0]:C[0],R[1]="y0"===a[1]?M[1]>E[1]?C[1]:x[1]:M[1]>E[1]?x[1]:C[1],v=l.getMarkerPosition(R,a,!0)}else{var ue=[F=c.get(a[0],s),U=c.get(a[1],s)];h.clampData&&h.clampData(ue,ue),v=h.dataToPoint(ue,!0)}if(bl(h,"cartesian2d")){var me=h.getAxis("x"),ve=h.getAxis("y"),F=c.get(a[0],s),U=c.get(a[1],s);U1(F)?v[0]=me.toGlobalCoord(me.getExtent()["x0"===a[0]?0:1]):U1(U)&&(v[1]=ve.toGlobalCoord(ve.getExtent()["y0"===a[1]?0:1]))}isNaN(m)||(v[0]=m),isNaN(y)||(v[1]=y)}else v=[m,y];return v}var mN=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];const nz=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.updateTransform=function(a,l,u){l.eachSeries(function(h){var p=Qc.getMarkerModelFromSeries(h,"markArea");if(p){var v=p.getData();v.each(function(m){var y=(0,b.map)(mN,function(C){return vN(v,m,C,h,u)});v.setItemLayout(m,y),v.getItemGraphicEl(m).setShape("points",y)})}},this)},s.prototype.renderSeries=function(a,l,u,h){var p=a.coordinateSystem,v=a.id,m=a.getData(),y=this.markerGroupMap,x=y.get(v)||y.set(v,{group:new Vn.Z});this.group.add(x.group),this.markKeep(x);var C=function tz(c,s,a){var l,u;if(c){var p=(0,b.map)(c&&c.dimensions,function(y){var x=s.getData(),C=x.getDimensionInfo(x.mapDimension(y))||{};return(0,b.extend)((0,b.extend)({},C),{name:y,ordinalMeta:null})});u=(0,b.map)(["x0","y0","x1","y1"],function(y,x){return{name:y,type:p[x%2].type}}),l=new nr.Z(u,a)}else l=new nr.Z(u=[{name:"value",type:"float"}],a);var v=(0,b.map)(a.get("data"),(0,b.curry)(q4,s,c,a));c&&(v=(0,b.filter)(v,(0,b.curry)(J4,c)));var m=c?function(y,x,C,M){var E=y.coord[Math.floor(M/2)][M%2];return(0,fc.yQ)(E,u[M])}:function(y,x,C,M){return(0,fc.yQ)(y.value,u[M])};return l.initData(v,null,m),l.hasItemOption=!0,l}(p,a,l);l.setData(C),C.each(function(M){var E=(0,b.map)(mN,function(He){return vN(C,M,He,a,h)}),R=p.getAxis("x").scale,F=p.getAxis("y").scale,U=R.getExtent(),ue=F.getExtent(),me=[R.parse(C.get("x0",M)),R.parse(C.get("x1",M))],ve=[F.parse(C.get("y0",M)),F.parse(C.get("y1",M))];ft.dt(me),ft.dt(ve),C.setItemLayout(M,{points:E,allClipped:!!(U[0]>me[1]||U[1]<me[0]||ue[0]>ve[1]||ue[1]<ve[0])});var Pe=C.getItemModel(M).getModel("itemStyle").getItemStyle(),Ne=(0,$c.UL)(m,"color");Pe.fill||(Pe.fill=Ne,(0,b.isString)(Pe.fill)&&(Pe.fill=wn.modifyAlpha(Pe.fill,.4))),Pe.stroke||(Pe.stroke=Ne),C.setItemVisual(M,"style",Pe)}),C.diff(H1(x).data).add(function(M){var E=C.getItemLayout(M);if(!E.allClipped){var R=new Wo.Z({shape:{points:E.points}});C.setItemGraphicEl(M,R),x.group.add(R)}}).update(function(M,E){var R=H1(x).data.getItemGraphicEl(E),F=C.getItemLayout(M);F.allClipped?R&&x.group.remove(R):(R?on.D(R,{shape:{points:F.points}},l,M):R=new Wo.Z({shape:{points:F.points}}),C.setItemGraphicEl(M,R),x.group.add(R))}).remove(function(M){var E=H1(x).data.getItemGraphicEl(M);x.group.remove(E)}).execute(),C.eachItemGraphicEl(function(M,E){var R=C.getItemModel(E),F=C.getItemVisual(E,"style");M.useStyle(C.getItemVisual(E,"style")),(0,Bn.ni)(M,(0,Bn.k3)(R),{labelFetcher:l,labelDataIndex:E,defaultText:C.getName(E)||"",inheritColor:(0,b.isString)(F.fill)?wn.modifyAlpha(F.fill,1):"#000"}),(0,bn.WO)(M,R),(0,bn.k5)(M,null,null,R.get(["emphasis","disabled"])),(0,Fn.A)(M).dataModel=l}),H1(x).data=C,x.group.silent=l.get("silent")||a.get("silent")},s.type="markArea",s}(B1),G1=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.layoutMode={type:"box",ignoreSize:!0},a}return(0,Rt.ZT)(s,c),s.prototype.init=function(a,l,u){this.mergeDefaultAndTheme(a,u),a.selected=a.selected||{},this._updateSelector(a)},s.prototype.mergeOption=function(a,l){c.prototype.mergeOption.call(this,a,l),this._updateSelector(a)},s.prototype._updateSelector=function(a){var l=a.selector,u=this.ecModel;!0===l&&(l=a.selector=["all","inverse"]),b.isArray(l)&&b.each(l,function(h,p){b.isString(h)&&(h={type:h}),l[p]=b.merge(h,function(c,s){return"all"===s?{type:"all",title:c.getLocaleModel().get(["legend","selector","all"])}:"inverse"===s?{type:"inverse",title:c.getLocaleModel().get(["legend","selector","inverse"])}:void 0}(u,h.type))})},s.prototype.optionUpdated=function(){this._updateData(this.ecModel);var a=this._data;if(a[0]&&"single"===this.get("selectedMode")){for(var l=!1,u=0;u<a.length;u++){var h=a[u].get("name");if(this.isSelected(h)){this.select(h),l=!0;break}}!l&&this.select(a[0].get("name"))}},s.prototype._updateData=function(a){var l=[],u=[];a.eachRawSeries(function(m){var x;if(u.push(m.name),m.legendVisualProvider){var M=m.legendVisualProvider.getAllNames();a.isSeriesFiltered(m)||(u=u.concat(M)),M.length?l=l.concat(M):x=!0}else x=!0;x&&(0,An.yu)(m)&&l.push(m.name)}),this._availableNames=u;var h=this.get("data")||l,p=b.createHashMap(),v=b.map(h,function(m){return(b.isString(m)||b.isNumber(m))&&(m={name:m}),p.get(m.name)?null:(p.set(m.name,!0),new ki.Z(m,this,this.ecModel))},this);this._data=b.filter(v,function(m){return!!m})},s.prototype.getData=function(){return this._data},s.prototype.select=function(a){var l=this.option.selected;"single"===this.get("selectedMode")&&b.each(this._data,function(p){l[p.get("name")]=!1}),l[a]=!0},s.prototype.unSelect=function(a){"single"!==this.get("selectedMode")&&(this.option.selected[a]=!1)},s.prototype.toggleSelected=function(a){var l=this.option.selected;l.hasOwnProperty(a)||(l[a]=!0),this[l[a]?"unSelect":"select"](a)},s.prototype.allSelect=function(){var l=this.option.selected;b.each(this._data,function(u){l[u.get("name",!0)]=!0})},s.prototype.inverseSelect=function(){var l=this.option.selected;b.each(this._data,function(u){var h=u.get("name",!0);l.hasOwnProperty(h)||(l[h]=!0),l[h]=!l[h]})},s.prototype.isSelected=function(a){var l=this.option.selected;return!(l.hasOwnProperty(a)&&!l[a])&&b.indexOf(this._availableNames,a)>=0},s.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},s.type="legend.plain",s.dependencies=["series"],s.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},s}(xa.Z);var hf=b.curry,Rr=b.each,ff=Vn.Z;function W1(c,s,a,l){B_(c,s,a,l),a.dispatchAction({type:"legendToggleSelect",name:c??s}),Cg(c,s,a,l)}function cA(c){for(var a,s=c.getZr().storage.getDisplayList(),l=0,u=s.length;l<u&&!(a=s[l].states.emphasis);)l++;return a&&a.hoverLayer}function Cg(c,s,a,l){cA(a)||a.dispatchAction({type:"highlight",seriesName:c,name:s,excludeSeriesId:l})}function B_(c,s,a,l){cA(a)||a.dispatchAction({type:"downplay",seriesName:c,name:s,excludeSeriesId:l})}const gc=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.newlineDisabled=!1,a}return(0,Rt.ZT)(s,c),s.prototype.init=function(){this.group.add(this._contentGroup=new ff),this.group.add(this._selectorGroup=new ff),this._isFirstRender=!0},s.prototype.getContentGroup=function(){return this._contentGroup},s.prototype.getSelectorGroup=function(){return this._selectorGroup},s.prototype.render=function(a,l,u){var h=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),a.get("show",!0)){var p=a.get("align"),v=a.get("orient");(!p||"auto"===p)&&(p="right"===a.get("left")&&"vertical"===v?"right":"left");var m=a.get("selector",!0),y=a.get("selectorPosition",!0);m&&(!y||"auto"===y)&&(y="horizontal"===v?"end":"start"),this.renderInner(p,a,l,u,m,v,y);var x=a.getBoxLayoutParams(),C={width:u.getWidth(),height:u.getHeight()},M=a.get("padding"),E=Oe.ME(x,C,M),R=this.layoutInner(a,p,E,h,m,y),F=Oe.ME(b.defaults({width:R.width,height:R.height},x),C,M);this.group.x=F.x-R.x,this.group.y=F.y-R.y,this.group.markRedraw(),this.group.add(this._backgroundEl=g_(R,a))}},s.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},s.prototype.renderInner=function(a,l,u,h,p,v,m){var y=this.getContentGroup(),x=b.createHashMap(),C=l.get("selectedMode"),M=[];u.eachRawSeries(function(E){!E.get("legendHoverLink")&&M.push(E.id)}),Rr(l.getData(),function(E,R){var F=E.get("name");if(!this.newlineDisabled&&(""===F||"\n"===F)){var U=new ff;return U.newline=!0,void y.add(U)}var ue=u.getSeriesByName(F)[0];if(!x.get(F))if(ue){var me=ue.getData(),ve=me.getVisual("legendLineStyle")||{},Me=me.getVisual("legendIcon"),Ae=me.getVisual("style"),Pe=this._createItem(ue,F,R,E,l,a,ve,Ae,Me,C,h);Pe.on("click",hf(W1,F,null,h,M)).on("mouseover",hf(Cg,ue.name,null,h,M)).on("mouseout",hf(B_,ue.name,null,h,M)),u.ssr&&Pe.eachChild(function(Ne){var He=(0,Fn.A)(Ne);He.seriesIndex=ue.seriesIndex,He.dataIndex=R,He.ssrType="legend"}),x.set(F,!0)}else u.eachRawSeries(function(Ne){if(!x.get(F)&&Ne.legendVisualProvider){var He=Ne.legendVisualProvider;if(!He.containName(F))return;var Ye=He.indexOfName(F),Qe=He.getItemVisual(Ye,"style"),it=He.getItemVisual(Ye,"legendIcon"),ct=(0,wn.parse)(Qe.fill);ct&&0===ct[3]&&(ct[3]=.2,Qe=b.extend(b.extend({},Qe),{fill:(0,wn.stringify)(ct,"rgba")}));var ht=this._createItem(Ne,F,R,E,l,a,{},Qe,it,C,h);ht.on("click",hf(W1,null,F,h,M)).on("mouseover",hf(Cg,null,F,h,M)).on("mouseout",hf(B_,null,F,h,M)),u.ssr&&ht.eachChild(function(vt){var gt=(0,Fn.A)(vt);gt.seriesIndex=Ne.seriesIndex,gt.dataIndex=R,gt.ssrType="legend"}),x.set(F,!0)}},this)},this),p&&this._createSelector(p,l,h,v,m)},s.prototype._createSelector=function(a,l,u,h,p){var v=this.getSelectorGroup();Rr(a,function(y){var x=y.type,C=new kt.ZP({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){u.dispatchAction({type:"all"===x?"legendAllSelect":"legendInverseSelect"})}});v.add(C);var M=l.getModel("selectorLabel"),E=l.getModel(["emphasis","selectorLabel"]);(0,Bn.ni)(C,{normal:M,emphasis:E},{defaultText:y.title}),(0,bn.vF)(C)})},s.prototype._createItem=function(a,l,u,h,p,v,m,y,x,C,M){var E=a.visualDrawType,R=p.get("itemWidth"),F=p.get("itemHeight"),U=p.isSelected(l),ue=h.get("symbolRotate"),me=h.get("symbolKeepAspect"),ve=h.get("icon"),Me=function yN(c,s,a,l,u,h,p){function v(U,ue){"auto"===U.lineWidth&&(U.lineWidth=ue.lineWidth>0?2:0),Rr(U,function(me,ve){"inherit"===U[ve]&&(U[ve]=ue[ve])})}var m=s.getModel("itemStyle"),y=m.getItemStyle(),x=0===c.lastIndexOf("empty",0)?"fill":"stroke",C=m.getShallow("decal");y.decal=C&&"inherit"!==C?(0,om.I)(C,p):l.decal,"inherit"===y.fill&&(y.fill=l[u]),"inherit"===y.stroke&&(y.stroke=l[x]),"inherit"===y.opacity&&(y.opacity=("fill"===u?l:a).opacity),v(y,l);var M=s.getModel("lineStyle"),E=M.getLineStyle();if(v(E,a),"auto"===y.fill&&(y.fill=l.fill),"auto"===y.stroke&&(y.stroke=l.fill),"auto"===E.stroke&&(E.stroke=l.fill),!h){var R=s.get("inactiveBorderWidth");y.lineWidth="auto"===R?l.lineWidth>0&&y[x]?2:0:y.lineWidth,y.fill=s.get("inactiveColor"),y.stroke=s.get("inactiveBorderColor"),E.stroke=M.get("inactiveColor"),E.lineWidth=M.get("inactiveWidth")}return{itemStyle:y,lineStyle:E}}(x=ve||x||"roundRect",h,m,y,E,U,M),Ae=new ff,Pe=h.getModel("textStyle");if(!b.isFunction(a.getLegendIcon)||ve&&"inherit"!==ve){var Ne="inherit"===ve&&a.getData().getVisual("symbol")?"inherit"===ue?a.getData().getVisual("symbolRotate"):ue:0;Ae.add(function lA(c){var s=c.icon||"roundRect",a=(0,dr.th)(s,0,0,c.itemWidth,c.itemHeight,c.itemStyle.fill,c.symbolKeepAspect);return a.setStyle(c.itemStyle),a.rotation=(c.iconRotate||0)*Math.PI/180,a.setOrigin([c.itemWidth/2,c.itemHeight/2]),s.indexOf("empty")>-1&&(a.style.stroke=a.style.fill,a.style.fill="#fff",a.style.lineWidth=2),a}({itemWidth:R,itemHeight:F,icon:x,iconRotate:Ne,itemStyle:Me.itemStyle,lineStyle:Me.lineStyle,symbolKeepAspect:me}))}else Ae.add(a.getLegendIcon({itemWidth:R,itemHeight:F,icon:x,iconRotate:ue,itemStyle:Me.itemStyle,lineStyle:Me.lineStyle,symbolKeepAspect:me}));var He="left"===v?R+5:-5,Ye=v,Qe=p.get("formatter"),it=l;b.isString(Qe)&&Qe?it=Qe.replace("{name}",l??""):b.isFunction(Qe)&&(it=Qe(l));var ct=U?Pe.getTextColor():h.get("inactiveColor");Ae.add(new kt.ZP({style:(0,Bn.Lr)(Pe,{text:it,x:He,y:F/2,fill:ct,align:Ye,verticalAlign:"middle"},{inheritColor:ct})}));var ht=new Jt.Z({shape:Ae.getBoundingRect(),style:{fill:"transparent"}}),vt=h.getModel("tooltip");return vt.get("show")&&Un.setTooltipConfig({el:ht,componentModel:p,itemName:l,itemTooltipOption:vt.option}),Ae.add(ht),Ae.eachChild(function(gt){gt.silent=!0}),ht.silent=!C,this.getContentGroup().add(Ae),(0,bn.vF)(Ae),Ae.__legendDataIndex=u,Ae},s.prototype.layoutInner=function(a,l,u,h,p,v){var m=this.getContentGroup(),y=this.getSelectorGroup();Oe.BZ(a.get("orient"),m,a.get("itemGap"),u.width,u.height);var x=m.getBoundingRect(),C=[-x.x,-x.y];if(y.markRedraw(),m.markRedraw(),p){Oe.BZ("horizontal",y,a.get("selectorItemGap",!0));var M=y.getBoundingRect(),E=[-M.x,-M.y],R=a.get("selectorButtonGap",!0),F=a.getOrient().index,U=0===F?"width":"height",ue=0===F?"height":"width",me=0===F?"y":"x";"end"===v?E[F]+=x[U]+R:C[F]+=M[U]+R,E[1-F]+=x[ue]/2-M[ue]/2,y.x=E[0],y.y=E[1],m.x=C[0],m.y=C[1];var ve={x:0,y:0};return ve[U]=x[U]+R+M[U],ve[ue]=Math.max(x[ue],M[ue]),ve[me]=Math.min(0,M[me]+E[1-F]),ve}return m.x=C[0],m.y=C[1],this.group.getBoundingRect()},s.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},s.type="legend.plain",s}(Ra.Z);function Fd(c){var s=c.findComponents({mainType:"legend"});s&&s.length&&c.filterSeries(function(a){for(var l=0;l<s.length;l++)if(!s[l].isSelected(a.name))return!1;return!0})}function pf(c,s,a){var h,l={},u="toggleSelected"===c;return a.eachComponent("legend",function(p){u&&null!=h?p[h?"select":"unSelect"](s.name):"allSelect"===c||"inverseSelect"===c?p[c]():(p[c](s.name),h=p.isSelected(s.name));var v=p.getData();(0,b.each)(v,function(m){var y=m.get("name");if("\n"!==y&&""!==y){var x=p.isSelected(y);l[y]=l.hasOwnProperty(y)?l[y]&&x:x}})}),"allSelect"===c||"inverseSelect"===c?{selected:l}:{name:s.name,selected:l}}function dA(c){c.registerComponentModel(G1),c.registerComponentView(gc),c.registerProcessor(c.PRIORITY.PROCESSOR.SERIES_FILTER,Fd),c.registerSubTypeDefaulter("legend",function(){return"plain"}),function uA(c){c.registerAction("legendToggleSelect","legendselectchanged",(0,b.curry)(pf,"toggleSelected")),c.registerAction("legendAllSelect","legendselectall",(0,b.curry)(pf,"allSelect")),c.registerAction("legendInverseSelect","legendinverseselect",(0,b.curry)(pf,"inverseSelect")),c.registerAction("legendSelect","legendselected",(0,b.curry)(pf,"select")),c.registerAction("legendUnSelect","legendunselected",(0,b.curry)(pf,"unSelect"))}(c)}function hA(c,s,a){var u=[1,1];u[c.getOrient().index]=0,(0,Oe.dt)(s,a,{type:"box",ignoreSize:!!u})}const bN=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.setScrollDataIndex=function(a){this.option.scrollDataIndex=a},s.prototype.init=function(a,l,u){var h=(0,Oe.tE)(a);c.prototype.init.call(this,a,l,u),hA(this,a,h)},s.prototype.mergeOption=function(a,l){c.prototype.mergeOption.call(this,a,l),hA(this,this.option,a)},s.type="legend.scroll",s.defaultOption=(0,qn.ZL)(G1.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),s}(G1);var j1=Vn.Z,V_=["width","height"],$o=["x","y"];const Oa=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.newlineDisabled=!0,a._currentIndex=0,a}return(0,Rt.ZT)(s,c),s.prototype.init=function(){c.prototype.init.call(this),this.group.add(this._containerGroup=new j1),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new j1)},s.prototype.resetInner=function(){c.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},s.prototype.renderInner=function(a,l,u,h,p,v,m){var y=this;c.prototype.renderInner.call(this,a,l,u,h,p,v,m);var x=this._controllerGroup,C=l.get("pageIconSize",!0),M=b.isArray(C)?C:[C,C];R("pagePrev",0);var E=l.getModel("pageTextStyle");function R(F,U){var ue=F+"DataIndex",me=Un.createIcon(l.get("pageIcons",!0)[l.getOrient().name][U],{onclick:b.bind(y._pageGo,y,ue,l,h)},{x:-M[0]/2,y:-M[1]/2,width:M[0],height:M[1]});me.name=F,x.add(me)}x.add(new kt.ZP({name:"pageText",style:{text:"xx/xx",fill:E.getTextColor(),font:E.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),R("pageNext",1)},s.prototype.layoutInner=function(a,l,u,h,p,v){var m=this.getSelectorGroup(),y=a.getOrient().index,x=V_[y],C=$o[y],M=V_[1-y],E=$o[1-y];p&&Oe.BZ("horizontal",m,a.get("selectorItemGap",!0));var R=a.get("selectorButtonGap",!0),F=m.getBoundingRect(),U=[-F.x,-F.y],ue=b.clone(u);p&&(ue[x]=u[x]-F[x]-R);var me=this._layoutContentAndController(a,h,ue,y,x,M,E,C);if(p){if("end"===v)U[y]+=me[x]+R;else{var ve=F[x]+R;U[y]-=ve,me[C]-=ve}me[x]+=F[x]+R,U[1-y]+=me[E]+me[M]/2-F[M]/2,me[M]=Math.max(me[M],F[M]),me[E]=Math.min(me[E],F[E]+U[1-y]),m.x=U[0],m.y=U[1],m.markRedraw()}return me},s.prototype._layoutContentAndController=function(a,l,u,h,p,v,m,y){var x=this.getContentGroup(),C=this._containerGroup,M=this._controllerGroup;Oe.BZ(a.get("orient"),x,a.get("itemGap"),h?u.width:null,h?null:u.height),Oe.BZ("horizontal",M,a.get("pageButtonItemGap",!0));var E=x.getBoundingRect(),R=M.getBoundingRect(),F=this._showController=E[p]>u[p],U=[-E.x,-E.y];l||(U[h]=x[y]);var ue=[0,0],me=[-R.x,-R.y],ve=b.retrieve2(a.get("pageButtonGap",!0),a.get("itemGap",!0));F&&("end"===a.get("pageButtonPosition",!0)?me[h]+=u[p]-R[p]:ue[h]+=R[p]+ve),me[1-h]+=E[v]/2-R[v]/2,x.setPosition(U),C.setPosition(ue),M.setPosition(me);var Ae={x:0,y:0};if(Ae[p]=F?u[p]:E[p],Ae[v]=Math.max(E[v],R[v]),Ae[m]=Math.min(0,R[m]+me[1-h]),C.__rectSize=u[p],F){var Pe={x:0,y:0};Pe[p]=Math.max(u[p]-R[p]-ve,0),Pe[v]=Ae[v],C.setClipPath(new Jt.Z({shape:Pe})),C.__rectSize=Pe[p]}else M.eachChild(function(He){He.attr({invisible:!0,silent:!0})});var Ne=this._getPageInfo(a);return null!=Ne.pageIndex&&on.D(x,{x:Ne.contentPosition[0],y:Ne.contentPosition[1]},F?a:null),this._updatePageInfoView(a,Ne),Ae},s.prototype._pageGo=function(a,l,u){var h=this._getPageInfo(l)[a];null!=h&&u.dispatchAction({type:"legendScroll",scrollDataIndex:h,legendId:l.id})},s.prototype._updatePageInfoView=function(a,l){var u=this._controllerGroup;b.each(["pagePrev","pageNext"],function(x){var M=null!=l[x+"DataIndex"],E=u.childOfName(x);E&&(E.setStyle("fill",a.get(M?"pageIconColor":"pageIconInactiveColor",!0)),E.cursor=M?"pointer":"default")});var h=u.childOfName("pageText"),p=a.get("pageFormatter"),v=l.pageIndex,m=null!=v?v+1:0,y=l.pageCount;h&&p&&h.setStyle("text",b.isString(p)?p.replace("{current}",null==m?"":m+"").replace("{total}",null==y?"":y+""):p({current:m,total:y}))},s.prototype._getPageInfo=function(a){var l=a.get("scrollDataIndex",!0),u=this.getContentGroup(),h=this._containerGroup.__rectSize,p=a.getOrient().index,v=V_[p],m=$o[p],y=this._findTargetItemIndex(l),x=u.children(),C=x[y],M=x.length,E=M?1:0,R={contentPosition:[u.x,u.y],pageCount:E,pageIndex:E-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!C)return R;var F=Me(C);R.contentPosition[p]=-F.s;for(var U=y+1,ue=F,me=F,ve=null;U<=M;++U)(!(ve=Me(x[U]))&&me.e>ue.s+h||ve&&!Ae(ve,ue.s))&&(ue=me.i>ue.i?me:ve)&&(null==R.pageNextDataIndex&&(R.pageNextDataIndex=ue.i),++R.pageCount),me=ve;for(U=y-1,ue=F,me=F,ve=null;U>=-1;--U)(!(ve=Me(x[U]))||!Ae(me,ve.s))&&ue.i<me.i&&(me=ue,null==R.pagePrevDataIndex&&(R.pagePrevDataIndex=ue.i),++R.pageCount,++R.pageIndex),ue=ve;return R;function Me(Pe){if(Pe){var Ne=Pe.getBoundingRect(),He=Ne[m]+Pe[m];return{s:He,e:He+Ne[v],i:Pe.__legendDataIndex}}}function Ae(Pe,Ne){return Pe.e>=Ne&&Pe.s<=Ne+h}},s.prototype._findTargetItemIndex=function(a){return this._showController?(this.getContentGroup().eachChild(function(p,v){var m=p.__legendDataIndex;null==h&&null!=m&&(h=v),m===a&&(l=v)}),l??h):0;var l,h},s.type="legend.scroll",s}(gc);function ga(c){(0,le.D)(dA),c.registerComponentModel(bN),c.registerComponentView(Oa),function fi(c){c.registerAction("legendScroll","legendscroll",function(s,a){var l=s.scrollDataIndex;null!=l&&a.eachComponent({mainType:"legend",subType:"scroll",query:s},function(u){u.setScrollDataIndex(l)})})}(c)}const xN=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.type="dataZoom.inside",s.defaultOption=(0,qn.ZL)(ug.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),s}(ug);var Z1=(0,An.Yf)();function wN(c,s,a){Z1(c).coordSysRecordMap.each(function(l){var u=l.dataZoomInfoMap.get(s.uid);u&&(u.getRange=a)})}function fA(c,s){if(s){c.removeKey(s.model.uid);var a=s.controller;a&&a.dispose()}}function oz(c,s){c.isDisposed()||c.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:s})}function z_(c,s,a,l){return c.coordinateSystem.containPoint([a,l])}var sl=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type="dataZoom.inside",a}return(0,Rt.ZT)(s,c),s.prototype.render=function(a,l,u){c.prototype.render.apply(this,arguments),a.noTarget()?this._clear():(this.range=a.getPercentRange(),wN(u,a,{pan:(0,b.bind)(Dg.pan,this),zoom:(0,b.bind)(Dg.zoom,this),scrollMove:(0,b.bind)(Dg.scrollMove,this)}))},s.prototype.dispose=function(){this._clear(),c.prototype.dispose.apply(this,arguments)},s.prototype._clear=function(){(function CN(c,s){for(var a=Z1(c).coordSysRecordMap,l=a.keys(),u=0;u<l.length;u++){var p=a.get(l[u]),v=p.dataZoomInfoMap;if(v){var m=s.uid;v.get(m)&&(v.removeKey(m),v.keys().length||fA(a,p))}}})(this.api,this.dataZoomModel),this.range=null},s.type="dataZoom.inside",s}(En),Dg={zoom:function(c,s,a,l){var u=this.range,h=u.slice(),p=c.axisModels[0];if(p){var v=pA[s](null,[l.originX,l.originY],p,a,c),m=(v.signal>0?v.pixelStart+v.pixelLength-v.pixel:v.pixel-v.pixelStart)/v.pixelLength*(h[1]-h[0])+h[0],y=Math.max(1/l.scale,0);h[0]=(h[0]-m)*y+m,h[1]=(h[1]-m)*y+m;var x=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(xu(0,h,[0,100],0,x.minSpan,x.maxSpan),this.range=h,u[0]!==h[0]||u[1]!==h[1])return h}},pan:SN(function(c,s,a,l,u,h){var p=pA[l]([h.oldX,h.oldY],[h.newX,h.newY],s,u,a);return p.signal*(c[1]-c[0])*p.pixel/p.pixelLength}),scrollMove:SN(function(c,s,a,l,u,h){return pA[l]([0,0],[h.scrollDelta,h.scrollDelta],s,u,a).signal*(c[1]-c[0])*h.scrollDelta})};function SN(c){return function(s,a,l,u){var h=this.range,p=h.slice(),v=s.axisModels[0];if(v&&(xu(c(p,v,s,a,l,u),p,[0,100],"all"),this.range=p,h[0]!==p[0]||h[1]!==p[1]))return p}}var pA={grid:function(c,s,a,l,u){var h=a.axis,p={},v=u.model.coordinateSystem.getRect();return c=c||[0,0],"x"===h.dim?(p.pixel=s[0]-c[0],p.pixelLength=v.width,p.pixelStart=v.x,p.signal=h.inverse?1:-1):(p.pixel=s[1]-c[1],p.pixelLength=v.height,p.pixelStart=v.y,p.signal=h.inverse?-1:1),p},polar:function(c,s,a,l,u){var h=a.axis,p={},v=u.model.coordinateSystem,m=v.getRadiusAxis().getExtent(),y=v.getAngleAxis().getExtent();return c=c?v.pointToCoord(c):[0,0],s=v.pointToCoord(s),"radiusAxis"===a.mainType?(p.pixel=s[0]-c[0],p.pixelLength=m[1]-m[0],p.pixelStart=m[0],p.signal=h.inverse?1:-1):(p.pixel=s[1]-c[1],p.pixelLength=y[1]-y[0],p.pixelStart=y[0],p.signal=h.inverse?-1:1),p},singleAxis:function(c,s,a,l,u){var h=a.axis,p=u.model.coordinateSystem.getRect(),v={};return c=c||[0,0],"horizontal"===h.orient?(v.pixel=s[0]-c[0],v.pixelLength=p.width,v.pixelStart=p.x,v.signal=h.inverse?1:-1):(v.pixel=s[1]-c[1],v.pixelLength=p.height,v.pixelStart=p.y,v.signal=h.inverse?-1:1),v}};const sz=sl;function gA(c){hg(c),c.registerComponentModel(xN),c.registerComponentView(sz),function U_(c){c.registerProcessor(c.PRIORITY.PROCESSOR.FILTER,function(s,a){var l=Z1(a),u=l.coordSysRecordMap||(l.coordSysRecordMap=(0,b.createHashMap)());u.each(function(h){h.dataZoomInfoMap=null}),s.eachComponent({mainType:"dataZoom",subType:"inside"},function(h){var p=lE(h);(0,b.each)(p.infoList,function(v){var m=v.model.uid,y=u.get(m)||u.set(m,function az(c,s){var a={model:s,containsPoint:(0,b.curry)(z_,s),dispatchAction:(0,b.curry)(oz,c),dataZoomInfoMap:null,controller:null},l=a.controller=new Mh(c.getZr());return(0,b.each)(["pan","zoom","scrollMove"],function(u){l.on(u,function(h){var p=[];a.dataZoomInfoMap.each(function(v){if(h.isAvailableBehavior(v.model.option)){var m=(v.getRange||{})[u],y=m&&m(v.dzReferCoordSysInfo,a.model.mainType,a.controller,h);!v.model.get("disabled",!0)&&y&&p.push({dataZoomId:v.model.id,start:y[0],end:y[1]})}}),p.length&&a.dispatchAction(p)})}),a}(a,v.model));(y.dataZoomInfoMap||(y.dataZoomInfoMap=(0,b.createHashMap)())).set(h.uid,{dzReferCoordSysInfo:v,model:h,getRange:null})})}),u.each(function(h){var v,p=h.controller,m=h.dataZoomInfoMap;if(m){var y=m.keys()[0];null!=y&&(v=m.get(y))}if(v){var x=function H_(c){var s,a="type_",l={type_true:2,type_move:1,type_false:0,type_undefined:-1},u=!0;return c.each(function(h){var p=h.model,v=!p.get("disabled",!0)&&(!p.get("zoomLock",!0)||"move");l[a+v]>l[a+s]&&(s=v),u=u&&p.get("preventDefaultMouseMove",!0)}),{controlType:s,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!u}}}(m);p.enable(x.controlType,x.opt),p.setPointerChecker(h.containsPoint),Eo.T9(h,"dispatchAction",v.model.get("throttle",!0),"fixRate")}else fA(u,h)})})}(c)}const vA=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.type="dataZoom.slider",s.layoutMode="box",s.defaultOption=(0,qn.ZL)(ug.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),s}(ug);var Mg=Jt.Z,Tg="horizontal",_A="vertical",TN=["line","bar","candlestick","scatter"],Eg={easing:"cubicOut",duration:100,delay:0};function Er(c){return"vertical"===c?"ns-resize":"ew-resize"}const qr=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a._displayables={},a}return(0,Rt.ZT)(s,c),s.prototype.init=function(a,l){this.api=l,this._onBrush=(0,b.bind)(this._onBrush,this),this._onBrushEnd=(0,b.bind)(this._onBrushEnd,this)},s.prototype.render=function(a,l,u,h){if(c.prototype.render.apply(this,arguments),Eo.T9(this,"_dispatchZoomAction",a.get("throttle"),"fixRate"),this._orient=a.getOrient(),!1!==a.get("show"))return a.noTarget()?(this._clear(),void this.group.removeAll()):((!h||"dataZoom"!==h.type||h.from!==this.uid)&&this._buildView(),void this._updateView());this.group.removeAll()},s.prototype.dispose=function(){this._clear(),c.prototype.dispose.apply(this,arguments)},s.prototype._clear=function(){Eo.ZH(this,"_dispatchZoomAction");var a=this.api.getZr();a.off("mousemove",this._onBrush),a.off("mouseup",this._onBrushEnd)},s.prototype._buildView=function(){var a=this.group;a.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var l=this._displayables.sliderGroup=new Vn.Z;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),a.add(l),this._positionGroup()},s.prototype._resetLocation=function(){var a=this.dataZoomModel,l=this.api,h=a.get("brushSelect")?7:0,p=this._findCoordRect(),v={width:l.getWidth(),height:l.getHeight()},m=this._orient===Tg?{right:v.width-p.x-p.width,top:v.height-30-7-h,width:p.width,height:30}:{right:7,top:p.y,width:30,height:p.height},y=Oe.tE(a.option);(0,b.each)(["right","top","width","height"],function(C){"ph"===y[C]&&(y[C]=m[C])});var x=Oe.ME(y,v);this._location={x:x.x,y:x.y},this._size=[x.width,x.height],this._orient===_A&&this._size.reverse()},s.prototype._positionGroup=function(){var a=this.group,l=this._location,u=this._orient,h=this.dataZoomModel.getFirstTargetAxisModel(),p=h&&h.get("inverse"),v=this._displayables.sliderGroup,m=(this._dataShadowInfo||{}).otherAxisInverse;v.attr(u!==Tg||p?u===Tg&&p?{scaleY:m?1:-1,scaleX:-1}:u!==_A||p?{scaleY:m?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:m?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:m?1:-1,scaleX:1});var y=a.getBoundingRect([v]);a.x=l.x-y.x,a.y=l.y-y.y,a.markRedraw()},s.prototype._getViewExtent=function(){return[0,this._size[0]]},s.prototype._renderBackground=function(){var a=this.dataZoomModel,l=this._size,u=this._displayables.sliderGroup,h=a.get("brushSelect");u.add(new Mg({silent:!0,shape:{x:0,y:0,width:l[0],height:l[1]},style:{fill:a.get("backgroundColor")},z2:-40}));var p=new Mg({shape:{x:0,y:0,width:l[0],height:l[1]},style:{fill:"transparent"},z2:0,onclick:(0,b.bind)(this._onClickPanel,this)}),v=this.api.getZr();h?(p.on("mousedown",this._onBrushStart,this),p.cursor="crosshair",v.on("mousemove",this._onBrush),v.on("mouseup",this._onBrushEnd)):(v.off("mousemove",this._onBrush),v.off("mouseup",this._onBrushEnd)),u.add(p)},s.prototype._renderDataShadow=function(){var a=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],a){var l=this._size,u=this._shadowSize||[],h=a.series,p=h.getRawData(),v=h.getShadowDim&&h.getShadowDim(),m=v&&p.getDimensionInfo(v)?h.getShadowDim():a.otherDim;if(null!=m){var y=this._shadowPolygonPts,x=this._shadowPolylinePts;if(p!==this._shadowData||m!==this._shadowDim||l[0]!==u[0]||l[1]!==u[1]){var C=p.getDataExtent(m),M=.3*(C[1]-C[0]);C=[C[0]-M,C[1]+M];var Me,E=[0,l[1]],F=[[l[0],0],[0,0]],U=[],ue=l[0]/(p.count()-1),me=0,ve=Math.round(p.count()/l[0]);p.each([m],function(Ye,Qe){if(ve>0&&Qe%ve)me+=ue;else{var it=null==Ye||isNaN(Ye)||""===Ye,ct=it?0:(0,ft.NU)(Ye,C,E,!0);it&&!Me&&Qe?(F.push([F[F.length-1][0],0]),U.push([U[U.length-1][0],0])):!it&&Me&&(F.push([me,0]),U.push([me,0])),F.push([me,ct]),U.push([me,ct]),me+=ue,Me=it}}),y=this._shadowPolygonPts=F,x=this._shadowPolylinePts=U}this._shadowData=p,this._shadowDim=m,this._shadowSize=[l[0],l[1]];for(var Qe,it,ct,ht,Ae=this.dataZoomModel,Ne=0;Ne<3;Ne++){var He=(Qe=void 0,it=void 0,void 0,void 0,Qe=Ae.getModel(1===Ne?"selectedDataBackground":"dataBackground"),it=new Vn.Z,ct=new Wo.Z({shape:{points:y},segmentIgnoreThreshold:1,style:Qe.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),ht=new Pt.Z({shape:{points:x},segmentIgnoreThreshold:1,style:Qe.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19}),it.add(ct),it.add(ht),it);this._displayables.sliderGroup.add(He),this._displayables.dataShadowSegs.push(He)}}}},s.prototype._prepareDataShadowInfo=function(){var a=this.dataZoomModel,l=a.get("showDataShadow");if(!1!==l){var u,h=this.ecModel;return a.eachTargetAxis(function(p,v){var m=a.getAxisProxy(p,v).getTargetSeriesModels();(0,b.each)(m,function(y){if(!(u||!0!==l&&(0,b.indexOf)(TN,y.get("type"))<0)){var M,x=h.getComponent(Xc(p),v).axis,C=function io(c){return{x:"y",y:"x",radius:"angle",angle:"radius"}[c]}(p),E=y.coordinateSystem;null!=C&&E.getOtherAxis&&(M=E.getOtherAxis(x).inverse),C=y.getData().mapDimension(C),u={thisAxis:x,series:y,thisDim:p,otherDim:C,otherAxisInverse:M}}},this)},this),u}},s.prototype._renderHandle=function(){var a=this.group,l=this._displayables,u=l.handles=[null,null],h=l.handleLabels=[null,null],p=this._displayables.sliderGroup,v=this._size,m=this.dataZoomModel,y=this.api,x=m.get("borderRadius")||0,C=m.get("brushSelect"),M=l.filler=new Mg({silent:C,style:{fill:m.get("fillerColor")},textConfig:{position:"inside"}});p.add(M),p.add(new Mg({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:v[0],height:v[1],r:x},style:{stroke:m.get("dataBackgroundColor")||m.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),(0,b.each)([0,1],function(ve){var Me=m.get("handleIcon");!dr.Pw[Me]&&Me.indexOf("path://")<0&&Me.indexOf("image://")<0&&(Me="path://"+Me);var Ae=(0,dr.th)(Me,-1,0,2,2,null,!0);Ae.attr({cursor:Er(this._orient),draggable:!0,drift:(0,b.bind)(this._onDragMove,this,ve),ondragend:(0,b.bind)(this._onDragEnd,this),onmouseover:(0,b.bind)(this._showDataInfo,this,!0),onmouseout:(0,b.bind)(this._showDataInfo,this,!1),z2:5});var Pe=Ae.getBoundingRect(),Ne=m.get("handleSize");this._handleHeight=(0,ft.GM)(Ne,this._size[1]),this._handleWidth=Pe.width/Pe.height*this._handleHeight,Ae.setStyle(m.getModel("handleStyle").getItemStyle()),Ae.style.strokeNoScale=!0,Ae.rectHover=!0,Ae.ensureState("emphasis").style=m.getModel(["emphasis","handleStyle"]).getItemStyle(),(0,bn.vF)(Ae);var He=m.get("handleColor");null!=He&&(Ae.style.fill=He),p.add(u[ve]=Ae);var Ye=m.getModel("textStyle");a.add(h[ve]=new kt.ZP({silent:!0,invisible:!0,style:(0,Bn.Lr)(Ye,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:Ye.getTextColor(),font:Ye.getFont()}),z2:10}))},this);var E=M;if(C){var R=(0,ft.GM)(m.get("moveHandleSize"),v[1]),F=l.moveHandle=new Jt.Z({style:m.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:v[1]-.5,height:R}}),U=.8*R,ue=l.moveHandleIcon=(0,dr.th)(m.get("moveHandleIcon"),-U/2,-U/2,U,U,"#fff",!0);ue.silent=!0,ue.y=v[1]+R/2-.5,F.ensureState("emphasis").style=m.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var me=Math.min(v[1]/2,Math.max(R,10));(E=l.moveZone=new Jt.Z({invisible:!0,shape:{y:v[1]-me,height:R+me}})).on("mouseover",function(){y.enterEmphasis(F)}).on("mouseout",function(){y.leaveEmphasis(F)}),p.add(F),p.add(ue),p.add(E)}E.attr({draggable:!0,cursor:Er(this._orient),drift:(0,b.bind)(this._onDragMove,this,"all"),ondragstart:(0,b.bind)(this._showDataInfo,this,!0),ondragend:(0,b.bind)(this._onDragEnd,this),onmouseover:(0,b.bind)(this._showDataInfo,this,!0),onmouseout:(0,b.bind)(this._showDataInfo,this,!1)})},s.prototype._resetInterval=function(){var a=this._range=this.dataZoomModel.getPercentRange(),l=this._getViewExtent();this._handleEnds=[(0,ft.NU)(a[0],[0,100],l,!0),(0,ft.NU)(a[1],[0,100],l,!0)]},s.prototype._updateInterval=function(a,l){var u=this.dataZoomModel,h=this._handleEnds,p=this._getViewExtent(),v=u.findRepresentativeAxisProxy().getMinMaxSpan(),m=[0,100];xu(l,h,p,u.get("zoomLock")?"all":a,null!=v.minSpan?(0,ft.NU)(v.minSpan,m,p,!0):null,null!=v.maxSpan?(0,ft.NU)(v.maxSpan,m,p,!0):null);var y=this._range,x=this._range=(0,ft.dt)([(0,ft.NU)(h[0],p,m,!0),(0,ft.NU)(h[1],p,m,!0)]);return!y||y[0]!==x[0]||y[1]!==x[1]},s.prototype._updateView=function(a){var l=this._displayables,u=this._handleEnds,h=(0,ft.dt)(u.slice()),p=this._size;(0,b.each)([0,1],function(E){var F=this._handleHeight;l.handles[E].attr({scaleX:F/2,scaleY:F/2,x:u[E]+(E?-1:1),y:p[1]/2-F/2})},this),l.filler.setShape({x:h[0],y:0,width:h[1]-h[0],height:p[1]});var v={x:h[0],width:h[1]-h[0]};l.moveHandle&&(l.moveHandle.setShape(v),l.moveZone.setShape(v),l.moveZone.getBoundingRect(),l.moveHandleIcon&&l.moveHandleIcon.attr("x",v.x+v.width/2));for(var m=l.dataShadowSegs,y=[0,h[0],h[1],p[0]],x=0;x<m.length;x++){var C=m[x],M=C.getClipPath();M||(M=new Jt.Z,C.setClipPath(M)),M.setShape({x:y[x],y:0,width:y[x+1]-y[x],height:p[1]})}this._updateDataInfo(a)},s.prototype._updateDataInfo=function(a){var l=this.dataZoomModel,u=this._displayables,h=u.handleLabels,p=this._orient,v=["",""];if(l.get("showDetail")){var m=l.findRepresentativeAxisProxy();if(m){var y=m.getAxisModel().axis,x=this._range,C=a?m.calculateDataWindow({start:x[0],end:x[1]}).valueWindow:m.getDataValueWindow();v=[this._formatLabel(C[0],y),this._formatLabel(C[1],y)]}}var M=(0,ft.dt)(this._handleEnds.slice());function E(R){var F=Un.getTransform(u.handles[R].parent,this.group),U=Un.transformDirection(0===R?"right":"left",F),ue=this._handleWidth/2+5,me=Un.applyTransform([M[R]+(0===R?-ue:ue),this._size[1]/2],F);h[R].setStyle({x:me[0],y:me[1],verticalAlign:p===Tg?"middle":U,align:p===Tg?U:"center",text:v[R]})}E.call(this,0),E.call(this,1)},s.prototype._formatLabel=function(a,l){var u=this.dataZoomModel,h=u.get("labelFormatter"),p=u.get("labelPrecision");(null==p||"auto"===p)&&(p=l.getPixelPrecision());var v=null==a||isNaN(a)?"":"category"===l.type||"time"===l.type?l.scale.getLabel({value:Math.round(a)}):a.toFixed(Math.min(p,20));return(0,b.isFunction)(h)?h(a,v):(0,b.isString)(h)?h.replace("{value}",v):v},s.prototype._showDataInfo=function(a){var l=this._displayables,u=l.handleLabels;u[0].attr("invisible",!(a=this._dragging||a)),u[1].attr("invisible",!a),l.moveHandle&&this.api[a?"enterEmphasis":"leaveEmphasis"](l.moveHandle,1)},s.prototype._onDragMove=function(a,l,u,h){this._dragging=!0,vs.sT(h.event);var p=this._displayables.sliderGroup.getLocalTransform(),v=Un.applyTransform([l,u],p,!0),m=this._updateInterval(a,v[0]),y=this.dataZoomModel.get("realtime");this._updateView(!y),m&&y&&this._dispatchZoomAction(!0)},s.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction(!1)},s.prototype._onClickPanel=function(a){var l=this._size,u=this._displayables.sliderGroup.transformCoordToLocal(a.offsetX,a.offsetY);if(!(u[0]<0||u[0]>l[0]||u[1]<0||u[1]>l[1])){var h=this._handleEnds,v=this._updateInterval("all",u[0]-(h[0]+h[1])/2);this._updateView(),v&&this._dispatchZoomAction(!1)}},s.prototype._onBrushStart=function(a){this._brushStart=new tn.Z(a.offsetX,a.offsetY),this._brushing=!0,this._brushStartTime=+new Date},s.prototype._onBrushEnd=function(a){if(this._brushing){var l=this._displayables.brushRect;if(this._brushing=!1,l){l.attr("ignore",!0);var u=l.shape;if(!(+new Date-this._brushStartTime<200&&Math.abs(u.width)<5)){var p=this._getViewExtent(),v=[0,100];this._range=(0,ft.dt)([(0,ft.NU)(u.x,p,v,!0),(0,ft.NU)(u.x+u.width,p,v,!0)]),this._handleEnds=[u.x,u.x+u.width],this._updateView(),this._dispatchZoomAction(!1)}}}},s.prototype._onBrush=function(a){this._brushing&&(vs.sT(a.event),this._updateBrushRect(a.offsetX,a.offsetY))},s.prototype._updateBrushRect=function(a,l){var u=this._displayables,p=u.brushRect;p||(p=u.brushRect=new Mg({silent:!0,style:this.dataZoomModel.getModel("brushStyle").getItemStyle()}),u.sliderGroup.add(p)),p.attr("ignore",!1);var v=this._brushStart,m=this._displayables.sliderGroup,y=m.transformCoordToLocal(a,l),x=m.transformCoordToLocal(v.x,v.y),C=this._size;y[0]=Math.max(Math.min(C[0],y[0]),0),p.setShape({x:x[0],y:0,width:y[0]-x[0],height:C[1]})},s.prototype._dispatchZoomAction=function(a){var l=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:a?Eg:null,start:l[0],end:l[1]})},s.prototype._findCoordRect=function(){var a,l=lE(this.dataZoomModel).infoList;if(!a&&l.length){var u=l[0].model.coordinateSystem;a=u.getRect&&u.getRect()}if(!a){var h=this.api.getWidth(),p=this.api.getHeight();a={x:.2*h,y:.2*p,width:.6*h,height:.6*p}}return a},s.type="dataZoom.slider",s}(En);function yA(c){c.registerComponentModel(vA),c.registerComponentView(qr),hg(c)}var Jc={get:function(c,s,a){var l=b.clone((W_[c]||{})[s]);return a&&b.isArray(l)?l[l.length-1]:l}},W_={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};const ll=Jc;var bA=sa.mapVisual,Za=sa.eachVisual,AN=b.isArray,$i=b.each,IN=ft.dt,j_=ft.NU;const Bd=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.stateList=["inRange","outOfRange"],a.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],a.layoutMode={type:"box",ignoreSize:!0},a.dataBound=[-1/0,1/0],a.targetVisuals={},a.controllerVisuals={},a}return(0,Rt.ZT)(s,c),s.prototype.init=function(a,l,u){this.mergeDefaultAndTheme(a,u)},s.prototype.optionUpdated=function(a,l){!l&&E_(this.option,a,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},s.prototype.resetVisual=function(a){var l=this.stateList;a=b.bind(a,this),this.controllerVisuals=w1(this.option.controller,l,a),this.targetVisuals=w1(this.option.target,l,a)},s.prototype.getItemSymbol=function(){return null},s.prototype.getTargetSeriesIndices=function(){var a=this.option.seriesIndex,l=[];return null==a||"all"===a?this.ecModel.eachSeries(function(u,h){l.push(h)}):l=An.kF(a),l},s.prototype.eachTargetSeries=function(a,l){b.each(this.getTargetSeriesIndices(),function(u){var h=this.ecModel.getSeriesByIndex(u);h&&a.call(l,h)},this)},s.prototype.isTargetSeries=function(a){var l=!1;return this.eachTargetSeries(function(u){u===a&&(l=!0)}),l},s.prototype.formatValueText=function(a,l,u){var y,h=this.option,p=h.precision,v=this.dataBound,m=h.formatter;u=u||["<",">"],b.isArray(a)&&(a=a.slice(),y=!0);var x=l?a:y?[C(a[0]),C(a[1])]:C(a);return b.isString(m)?m.replace("{value}",y?x[0]:x).replace("{value2}",y?x[1]:x):b.isFunction(m)?y?m(a[0],a[1]):m(a):y?a[0]===v[0]?u[0]+" "+x[1]:a[1]===v[1]?u[1]+" "+x[0]:x[0]+" - "+x[1]:x;function C(M){return M===v[0]?"min":M===v[1]?"max":(+M).toFixed(Math.min(p,20))}},s.prototype.resetExtent=function(){var a=this.option,l=IN([a.min,a.max]);this._dataExtent=l},s.prototype.getDataDimensionIndex=function(a){var l=this.option.dimension;if(null!=l)return a.getDimensionIndex(l);for(var u=a.dimensions,h=u.length-1;h>=0;h--){var v=a.getDimensionInfo(u[h]);if(!v.isCalculationCoord)return v.storeDimIndex}},s.prototype.getExtent=function(){return this._dataExtent.slice()},s.prototype.completeVisualOption=function(){var a=this.ecModel,l=this.option,u={inRange:l.inRange,outOfRange:l.outOfRange},h=l.target||(l.target={}),p=l.controller||(l.controller={});b.merge(h,u),b.merge(p,u);var v=this.isCategory();function m(C){AN(l.color)&&!C.inRange&&(C.inRange={color:l.color.slice().reverse()}),C.inRange=C.inRange||{color:a.get("gradientColor")}}m.call(this,h),m.call(this,p),function y(C,M,E){var R=C[M],F=C[E];R&&!F&&(F=C[E]={},$i(R,function(U,ue){if(sa.isValidType(ue)){var me=ll.get(ue,"inactive",v);null!=me&&(F[ue]=me,"color"===ue&&!F.hasOwnProperty("opacity")&&!F.hasOwnProperty("colorAlpha")&&(F.opacity=[0,0]))}}))}.call(this,h,"inRange","outOfRange"),function x(C){var M=(C.inRange||{}).symbol||(C.outOfRange||{}).symbol,E=(C.inRange||{}).symbolSize||(C.outOfRange||{}).symbolSize,R=this.get("inactiveColor"),U=this.getItemSymbol()||"roundRect";$i(this.stateList,function(ue){var me=this.itemSize,ve=C[ue];ve||(ve=C[ue]={color:v?R:[R]}),null==ve.symbol&&(ve.symbol=M&&b.clone(M)||(v?U:[U])),null==ve.symbolSize&&(ve.symbolSize=E&&b.clone(E)||(v?me[0]:[me[0],me[0]])),ve.symbol=bA(ve.symbol,function(Pe){return"none"===Pe?U:Pe});var Me=ve.symbolSize;if(null!=Me){var Ae=-1/0;Za(Me,function(Pe){Pe>Ae&&(Ae=Pe)}),ve.symbolSize=bA(Me,function(Pe){return j_(Pe,[0,Ae],[0,me[0]],!0)})}},this)}.call(this,p)},s.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},s.prototype.isCategory=function(){return!!this.option.categories},s.prototype.setSelected=function(a){},s.prototype.getSelected=function(){return null},s.prototype.getValueState=function(a){return null},s.prototype.getVisualMeta=function(a){return null},s.type="visualMap",s.dependencies=["series"],s.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},s}(xa.Z);var xA=[20,140];function Z_(c,s,a){if(a[0]===a[1])return a.slice();for(var u=(a[1]-a[0])/200,h=a[0],p=[],v=0;v<=200&&h<a[1];v++)p.push(h),h+=u;return p.push(a[1]),p}const Y_=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.optionUpdated=function(a,l){c.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(u){u.mappingMethod="linear",u.dataExtent=this.getExtent()}),this._resetRange()},s.prototype.resetItemSize=function(){c.prototype.resetItemSize.apply(this,arguments);var a=this.itemSize;(null==a[0]||isNaN(a[0]))&&(a[0]=xA[0]),(null==a[1]||isNaN(a[1]))&&(a[1]=xA[1])},s.prototype._resetRange=function(){var a=this.getExtent(),l=this.option.range;!l||l.auto?(a.auto=1,this.option.range=a):b.isArray(l)&&(l[0]>l[1]&&l.reverse(),l[0]=Math.max(l[0],a[0]),l[1]=Math.min(l[1],a[1]))},s.prototype.completeVisualOption=function(){c.prototype.completeVisualOption.apply(this,arguments),b.each(this.stateList,function(a){var l=this.option.controller[a].symbolSize;l&&l[0]!==l[1]&&(l[0]=l[1]/3)},this)},s.prototype.setSelected=function(a){this.option.range=a.slice(),this._resetRange()},s.prototype.getSelected=function(){var a=this.getExtent(),l=ft.dt((this.get("range")||[]).slice());return l[0]>a[1]&&(l[0]=a[1]),l[1]>a[1]&&(l[1]=a[1]),l[0]<a[0]&&(l[0]=a[0]),l[1]<a[0]&&(l[1]=a[0]),l},s.prototype.getValueState=function(a){var l=this.option.range,u=this.getExtent();return(l[0]<=u[0]||l[0]<=a)&&(l[1]>=u[1]||a<=l[1])?"inRange":"outOfRange"},s.prototype.findTargetDataIndices=function(a){var l=[];return this.eachTargetSeries(function(u){var h=[],p=u.getData();p.each(this.getDataDimensionIndex(p),function(v,m){a[0]<=v&&v<=a[1]&&h.push(m)},this),l.push({seriesId:u.id,dataIndex:h})},this),l},s.prototype.getVisualMeta=function(a){var l=Z_(0,0,this.getExtent()),u=Z_(0,0,this.option.range.slice()),h=[];function p(E,R){h.push({value:E,color:a(E,R)})}for(var v=0,m=0,y=u.length,x=l.length;m<x&&(!u.length||l[m]<=u[0]);m++)l[m]<u[v]&&p(l[m],"outOfRange");for(var C=1;v<y;v++,C=0)C&&h.length&&p(u[v],"outOfRange"),p(u[v],"inRange");for(C=1;m<x;m++)(!u.length||u[u.length-1]<l[m])&&(C&&(h.length&&p(h[h.length-1].value,"outOfRange"),C=0),p(l[m],"outOfRange"));var M=h.length;return{stops:h,outerColors:[M?h[0].color:"transparent",M?h[M-1].color:"transparent"]}},s.type="visualMap.continuous",s.defaultOption=(0,qn.ZL)(Bd.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),s}(Bd),CA=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.autoPositionValues={left:1,right:1,top:1,bottom:1},a}return(0,Rt.ZT)(s,c),s.prototype.init=function(a,l){this.ecModel=a,this.api=l},s.prototype.render=function(a,l,u,h){this.visualMapModel=a,!1!==a.get("show")?this.doRender(a,l,u,h):this.group.removeAll()},s.prototype.renderBackground=function(a){var l=this.visualMapModel,u=Ia.MY(l.get("padding")||0),h=a.getBoundingRect();a.add(new Jt.Z({z2:-1,silent:!0,shape:{x:h.x-u[3],y:h.y-u[0],width:h.width+u[3]+u[1],height:h.height+u[0]+u[2]},style:{fill:l.get("backgroundColor"),stroke:l.get("borderColor"),lineWidth:l.get("borderWidth")}}))},s.prototype.getControllerVisual=function(a,l,u){var h=(u=u||{}).forceState,p=this.visualMapModel,v={};if("color"===l){var m=p.get("contentColor");v.color=m}function y(E){return v[E]}function x(E,R){v[E]=R}var C=p.controllerVisuals[h||p.getValueState(a)],M=sa.prepareVisualTypes(C);return b.each(M,function(E){var R=C[E];u.convertOpacityToAlpha&&"opacity"===E&&(E="colorAlpha",R=C.__alphaForOpacity),sa.dependsOn(E,l)&&R&&R.applyVisual(a,y,x)}),v[l]},s.prototype.positionGroup=function(a){var u=this.api;Oe.p$(a,this.visualMapModel.getBoxLayoutParams(),{width:u.getWidth(),height:u.getHeight()})},s.prototype.doRender=function(a,l,u,h){},s.type="visualMap",s}(Ra.Z);var $1=[["left","right","width"],["top","bottom","height"]];function SA(c,s,a){var l=c.option,u=l.align;if(null!=u&&"auto"!==u)return u;for(var h={width:s.getWidth(),height:s.getHeight()},p="horizontal"===l.orient?1:0,v=$1[p],m=[0,null,10],y={},x=0;x<3;x++)y[$1[1-p][x]]=m[x],y[v[x]]=2===x?a[0]:l[v[x]];var C=[["x","width",3],["y","height",0]][p],M=(0,Oe.ME)(y,h,l.padding);return v[(M.margin[C[2]]||0)+M[C[0]]+.5*M[C[1]]<.5*h[C[1]]?0:1]}function X_(c,s){return b.each(c||[],function(a){null!=a.dataIndex&&(a.dataIndexInside=a.dataIndex,a.dataIndex=null),a.highlightKey="visualMap"+(s?s.componentIndex:"")}),c}var vc=ft.NU,RN=b.each,K1=Math.min,Q1=Math.max;function MA(c,s,a,l){return new Wo.Z({shape:{points:c},draggable:!!a,cursor:s,drift:a,onmousemove:function(u){vs.sT(u.event)},ondragend:l})}function K_(c){return!!(c.get("hoverLinkOnHandle")??c.get("realtime"))}function q1(c){return"vertical"===c?"ns-resize":"ew-resize"}const ON=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a._shapes={},a._dataInterval=[],a._handleEnds=[],a._hoverLinkDataIndices=[],a}return(0,Rt.ZT)(s,c),s.prototype.init=function(a,l){c.prototype.init.call(this,a,l),this._hoverLinkFromSeriesMouseOver=b.bind(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=b.bind(this._hideIndicator,this)},s.prototype.doRender=function(a,l,u,h){(!h||"selectDataRange"!==h.type||h.from!==this.uid)&&this._buildView()},s.prototype._buildView=function(){this.group.removeAll();var a=this.visualMapModel,l=this.group;this._orient=a.get("orient"),this._useHandle=a.get("calculable"),this._resetInterval(),this._renderBar(l);var u=a.get("text");this._renderEndsText(l,u,0),this._renderEndsText(l,u,1),this._updateView(!0),this.renderBackground(l),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(l)},s.prototype._renderEndsText=function(a,l,u){if(l){var h=l[1-u];h=null!=h?h+"":"";var p=this.visualMapModel,v=p.get("textGap"),m=p.itemSize,y=this._shapes.mainGroup,x=this._applyTransform([m[0]/2,0===u?-v:m[1]+v],y),C=this._applyTransform(0===u?"bottom":"top",y),M=this._orient;this.group.add(new kt.ZP({style:(0,Bn.Lr)(this.visualMapModel.textStyleModel,{x:x[0],y:x[1],verticalAlign:"horizontal"===M?"middle":C,align:"horizontal"===M?C:"center",text:h})}))}},s.prototype._renderBar=function(a){var l=this.visualMapModel,u=this._shapes,h=l.itemSize,p=this._orient,v=this._useHandle,m=SA(l,this.api,h),y=u.mainGroup=this._createBarGroup(m),x=new Vn.Z;y.add(x),x.add(u.outOfRange=MA()),x.add(u.inRange=MA(null,v?q1(this._orient):null,b.bind(this._dragHandle,this,"all",!1),b.bind(this._dragHandle,this,"all",!0))),x.setClipPath(new Jt.Z({shape:{x:0,y:0,width:h[0],height:h[1],r:3}}));var C=l.textStyleModel.getTextRect("\u56fd"),M=Q1(C.width,C.height);v&&(u.handleThumbs=[],u.handleLabels=[],u.handleLabelPoints=[],this._createHandle(l,y,0,h,M,p),this._createHandle(l,y,1,h,M,p)),this._createIndicator(l,y,h,M,p),a.add(y)},s.prototype._createHandle=function(a,l,u,h,p,v){var m=b.bind(this._dragHandle,this,u,!1),y=b.bind(this._dragHandle,this,u,!0),x=(0,we.GM)(a.get("handleSize"),h[0]),C=(0,dr.th)(a.get("handleIcon"),-x/2,-x/2,x,x,null,!0),M=q1(this._orient);C.attr({cursor:M,draggable:!0,drift:m,ondragend:y,onmousemove:function(ue){vs.sT(ue.event)}}),C.x=h[0]/2,C.useStyle(a.getModel("handleStyle").getItemStyle()),C.setStyle({strokeNoScale:!0,strokeFirst:!0}),C.style.lineWidth*=2,C.ensureState("emphasis").style=a.getModel(["emphasis","handleStyle"]).getItemStyle(),(0,bn.Nj)(C,!0),l.add(C);var R=new kt.ZP({cursor:M,draggable:!0,drift:m,onmousemove:function(ue){vs.sT(ue.event)},ondragend:y,style:(0,Bn.Lr)(this.visualMapModel.textStyleModel,{x:0,y:0,text:""})});R.ensureState("blur").style={opacity:.1},R.stateTransition={duration:200},this.group.add(R);var F=[x,0],U=this._shapes;U.handleThumbs[u]=C,U.handleLabelPoints[u]=F,U.handleLabels[u]=R},s.prototype._createIndicator=function(a,l,u,h,p){var v=(0,we.GM)(a.get("indicatorSize"),u[0]),m=(0,dr.th)(a.get("indicatorIcon"),-v/2,-v/2,v,v,null,!0);m.attr({cursor:"move",invisible:!0,silent:!0,x:u[0]/2});var y=a.getModel("indicatorStyle").getItemStyle();if(m instanceof be.ZP){var x=m.style;m.useStyle(b.extend({image:x.image,x:x.x,y:x.y,width:x.width,height:x.height},y))}else m.useStyle(y);l.add(m);var M=new kt.ZP({silent:!0,invisible:!0,style:(0,Bn.Lr)(this.visualMapModel.textStyleModel,{x:0,y:0,text:""})});this.group.add(M);var E=[("horizontal"===p?h/2:6)+u[0]/2,0],R=this._shapes;R.indicator=m,R.indicatorLabel=M,R.indicatorLabelPoint=E,this._firstShowIndicator=!0},s.prototype._dragHandle=function(a,l,u,h){if(this._useHandle){if(this._dragging=!l,!l){var p=this._applyTransform([u,h],this._shapes.mainGroup,!0);this._updateInterval(a,p[1]),this._hideIndicator(),this._updateView()}l===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),l?!this._hovering&&this._clearHoverLinkToSeries():K_(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[a],!1)}},s.prototype._resetInterval=function(){var a=this.visualMapModel,l=this._dataInterval=a.getSelected(),u=a.getExtent(),h=[0,a.itemSize[1]];this._handleEnds=[vc(l[0],u,h,!0),vc(l[1],u,h,!0)]},s.prototype._updateInterval=function(a,l){var u=this.visualMapModel,h=this._handleEnds,p=[0,u.itemSize[1]];xu(l=l||0,h,p,a,0);var v=u.getExtent();this._dataInterval=[vc(h[0],p,v,!0),vc(h[1],p,v,!0)]},s.prototype._updateView=function(a){var l=this.visualMapModel,u=l.getExtent(),h=this._shapes,p=[0,l.itemSize[1]],v=a?p:this._handleEnds,m=this._createBarVisual(this._dataInterval,u,v,"inRange"),y=this._createBarVisual(u,u,p,"outOfRange");h.inRange.setStyle({fill:m.barColor}).setShape("points",m.barPoints),h.outOfRange.setStyle({fill:y.barColor}).setShape("points",y.barPoints),this._updateHandle(v,m)},s.prototype._createBarVisual=function(a,l,u,h){var p={forceState:h,convertOpacityToAlpha:!0},v=this._makeColorGradient(a,p),m=[this.getControllerVisual(a[0],"symbolSize",p),this.getControllerVisual(a[1],"symbolSize",p)],y=this._createBarPoints(u,m);return{barColor:new tp.Z(0,0,0,1,v),barPoints:y,handlesColor:[v[0].color,v[v.length-1].color]}},s.prototype._makeColorGradient=function(a,l){var h=[],p=(a[1]-a[0])/100;h.push({color:this.getControllerVisual(a[0],"color",l),offset:0});for(var v=1;v<100;v++){var m=a[0]+p*v;if(m>a[1])break;h.push({color:this.getControllerVisual(m,"color",l),offset:v/100})}return h.push({color:this.getControllerVisual(a[1],"color",l),offset:1}),h},s.prototype._createBarPoints=function(a,l){var u=this.visualMapModel.itemSize;return[[u[0]-l[0],a[0]],[u[0],a[0]],[u[0],a[1]],[u[0]-l[1],a[1]]]},s.prototype._createBarGroup=function(a){var l=this._orient,u=this.visualMapModel.get("inverse");return new Vn.Z("horizontal"!==l||u?"horizontal"===l&&u?{scaleX:"bottom"===a?-1:1,rotation:-Math.PI/2}:"vertical"!==l||u?{scaleX:"left"===a?1:-1}:{scaleX:"left"===a?1:-1,scaleY:-1}:{scaleX:"bottom"===a?1:-1,rotation:Math.PI/2})},s.prototype._updateHandle=function(a,l){if(this._useHandle){var u=this._shapes,h=this.visualMapModel,p=u.handleThumbs,v=u.handleLabels,m=h.itemSize,y=h.getExtent();RN([0,1],function(x){var C=p[x];C.setStyle("fill",l.handlesColor[x]),C.y=a[x];var M=vc(a[x],[0,m[1]],y,!0),E=this.getControllerVisual(M,"symbolSize");C.scaleX=C.scaleY=E/m[0],C.x=m[0]-E/2;var R=Un.applyTransform(u.handleLabelPoints[x],Un.getTransform(C,this.group));v[x].setStyle({x:R[0],y:R[1],text:h.formatValueText(this._dataInterval[x]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",u.mainGroup):"center"})},this)}},s.prototype._showIndicator=function(a,l,u,h){var p=this.visualMapModel,v=p.getExtent(),m=p.itemSize,y=[0,m[1]],x=this._shapes,C=x.indicator;if(C){C.attr("invisible",!1);var E=this.getControllerVisual(a,"color",{convertOpacityToAlpha:!0}),R=this.getControllerVisual(a,"symbolSize"),F=vc(a,v,y,!0),U=m[0]-R/2,ue={x:C.x,y:C.y};C.y=F,C.x=U;var me=Un.applyTransform(x.indicatorLabelPoint,Un.getTransform(C,this.group)),ve=x.indicatorLabel;ve.attr("invisible",!1);var Me=this._applyTransform("left",x.mainGroup),Pe="horizontal"===this._orient;ve.setStyle({text:(u||"")+p.formatValueText(l),verticalAlign:Pe?Me:"middle",align:Pe?"center":Me});var Ne={x:U,y:F,style:{fill:E}},He={style:{x:me[0],y:me[1]}};if(p.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var Ye={duration:100,easing:"cubicInOut",additive:!0};C.x=ue.x,C.y=ue.y,C.animateTo(Ne,Ye),ve.animateTo(He,Ye)}else C.attr(Ne),ve.attr(He);this._firstShowIndicator=!1;var Qe=this._shapes.handleLabels;if(Qe)for(var it=0;it<Qe.length;it++)this.api.enterBlur(Qe[it])}},s.prototype._enableHoverLinkToSeries=function(){var a=this;this._shapes.mainGroup.on("mousemove",function(l){if(a._hovering=!0,!a._dragging){var u=a.visualMapModel.itemSize,h=a._applyTransform([l.offsetX,l.offsetY],a._shapes.mainGroup,!0,!0);h[1]=K1(Q1(0,h[1]),u[1]),a._doHoverLinkToSeries(h[1],0<=h[0]&&h[0]<=u[0])}}).on("mouseout",function(){a._hovering=!1,!a._dragging&&a._clearHoverLinkToSeries()})},s.prototype._enableHoverLinkFromSeries=function(){var a=this.api.getZr();this.visualMapModel.option.hoverLink?(a.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),a.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},s.prototype._doHoverLinkToSeries=function(a,l){var u=this.visualMapModel;if(u.option.hoverLink){var p=[0,u.itemSize[1]],v=u.getExtent();a=K1(Q1(p[0],a),p[1]);var m=function LN(c,s,a){var l=6,u=c.get("hoverLinkDataSize");return u&&(l=vc(u,s,a,!0)/2),l}(u,v,p),y=[a-m,a+m],x=vc(a,p,v,!0),C=[vc(y[0],p,v,!0),vc(y[1],p,v,!0)];y[0]<p[0]&&(C[0]=-1/0),y[1]>p[1]&&(C[1]=1/0),l&&(C[0]===-1/0?this._showIndicator(x,C[1],"< ",m):C[1]===1/0?this._showIndicator(x,C[0],"> ",m):this._showIndicator(x,x,"\u2248 ",m));var M=this._hoverLinkDataIndices,E=[];(l||K_(u))&&(E=this._hoverLinkDataIndices=u.findTargetDataIndices(C));var R=An.XI(M,E);this._dispatchHighDown("downplay",X_(R[0],u)),this._dispatchHighDown("highlight",X_(R[1],u))}},s.prototype._hoverLinkFromSeriesMouseOver=function(a){var l;if((0,um.o)(a.target,function(m){var y=(0,Fn.A)(m);if(null!=y.dataIndex)return l=y,!0},!0),l){var u=this.ecModel.getSeriesByIndex(l.seriesIndex),h=this.visualMapModel;if(h.isTargetSeries(u)){var p=u.getData(l.dataType),v=p.getStore().get(h.getDataDimensionIndex(p),l.dataIndex);isNaN(v)||this._showIndicator(v,v)}}},s.prototype._hideIndicator=function(){var a=this._shapes;a.indicator&&a.indicator.attr("invisible",!0),a.indicatorLabel&&a.indicatorLabel.attr("invisible",!0);var l=this._shapes.handleLabels;if(l)for(var u=0;u<l.length;u++)this.api.leaveBlur(l[u])},s.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var a=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",X_(a,this.visualMapModel)),a.length=0},s.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var a=this.api.getZr();a.off("mouseover",this._hoverLinkFromSeriesMouseOver),a.off("mouseout",this._hideIndicator)},s.prototype._applyTransform=function(a,l,u,h){var p=Un.getTransform(l,h?null:this.group);return b.isArray(a)?Un.applyTransform(a,p,u):Un.transformDirection(a,p,u)},s.prototype._dispatchHighDown=function(a,l){l&&l.length&&this.api.dispatchAction({type:a,batch:l})},s.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},s.type="visualMap.continuous",s}(CA);var J1={type:"selectDataRange",event:"dataRangeSelected",update:"update"},kN=function(c,s){s.eachComponent({mainType:"visualMap",query:c},function(a){a.setSelected(c.selected)})},NN=[{createOnAllSeries:!0,reset:function(c,s){var a=[];return s.eachComponent("visualMap",function(l){var u=c.pipelineContext;!l.isTargetSeries(c)||u&&u.large||a.push(function Cr(c,s,a,l){var u={};return b.each(c,function(h){var p=sa.prepareVisualTypes(s[h]);u[h]=p}),{progress:function(p,v){var m;function y(Ae){return(0,$c.Or)(v,C,Ae)}function x(Ae,Pe){(0,$c.LZ)(v,C,Ae,Pe)}null!=l&&(m=v.getDimensionIndex(l));for(var C,M=v.getStore();null!=(C=p.next());){var E=v.getRawDataItem(C);if(!E||!1!==E.visualMap)for(var R=null!=l?M.get(m,C):C,F=a(R),U=s[F],ue=u[F],me=0,ve=ue.length;me<ve;me++){var Me=ue[me];U[Me]&&U[Me].applyVisual(R,y,x)}}}}}(l.stateList,l.targetVisuals,b.bind(l.getValueState,l),l.getDataDimensionIndex(c.getData())))}),a}},{createOnAllSeries:!0,reset:function(c,s){var a=c.getData(),l=[];s.eachComponent("visualMap",function(u){if(u.isTargetSeries(c)){var h=u.getVisualMeta(b.bind(FN,null,c,u))||{stops:[],outerColors:[]},p=u.getDataDimensionIndex(a);p>=0&&(h.dimension=p,l.push(h))}}),c.getData().setVisual("visualMeta",l)}}];function FN(c,s,a,l){for(var u=s.targetVisuals[l],h=sa.prepareVisualTypes(u),p={color:(0,$c.UL)(c.getData(),"color")},v=0,m=h.length;v<m;v++){var y=h[v],x=u["opacity"===y?"__alphaForOpacity":y];x&&x.applyVisual(a,C,M)}return p.color;function C(E){return p[E]}function M(E,R){p[E]=R}}var Q_=b.each;function BN(c){var s=c&&c.visualMap;b.isArray(s)||(s=s?[s]:[]),Q_(s,function(a){if(a){gf(a,"splitList")&&!gf(a,"pieces")&&(a.pieces=a.splitList,delete a.splitList);var l=a.pieces;l&&b.isArray(l)&&Q_(l,function(u){b.isObject(u)&&(gf(u,"start")&&!gf(u,"min")&&(u.min=u.start),gf(u,"end")&&!gf(u,"max")&&(u.max=u.end))})}})}function gf(c,s){return c&&c.hasOwnProperty&&c.hasOwnProperty(s)}var TA=!1;function q_(c){TA||(TA=!0,c.registerSubTypeDefaulter("visualMap",function(s){return s.categories||(s.pieces?s.pieces.length>0:s.splitNumber>0)&&!s.calculable?"piecewise":"continuous"}),c.registerAction(J1,kN),(0,b.each)(NN,function(s){c.registerVisual(c.PRIORITY.VISUAL.COMPONENT,s)}),c.registerPreprocessor(BN))}function J_(c){c.registerComponentModel(Y_),c.registerComponentView(ON),q_(c)}var EA=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a._pieceList=[],a}return(0,Rt.ZT)(s,c),s.prototype.optionUpdated=function(a,l){c.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var u=this._mode=this._determineMode();this._pieceList=[],VN[this._mode].call(this,this._pieceList),this._resetSelected(a,l);var h=this.option.categories;this.resetVisual(function(p,v){"categories"===u?(p.mappingMethod="category",p.categories=b.clone(h)):(p.dataExtent=this.getExtent(),p.mappingMethod="piecewise",p.pieceList=b.map(this._pieceList,function(m){return m=b.clone(m),"inRange"!==v&&(m.visual=null),m}))})},s.prototype.completeVisualOption=function(){var a=this.option,l={},u=sa.listVisualTypes(),h=this.isCategory();function p(v,m,y){return v&&v[m]&&v[m].hasOwnProperty(y)}b.each(a.pieces,function(v){b.each(u,function(m){v.hasOwnProperty(m)&&(l[m]=1)})}),b.each(l,function(v,m){var y=!1;b.each(this.stateList,function(x){y=y||p(a,x,m)||p(a.target,x,m)},this),!y&&b.each(this.stateList,function(x){(a[x]||(a[x]={}))[m]=ll.get(m,"inRange"===x?"active":"inactive",h)})},this),c.prototype.completeVisualOption.apply(this,arguments)},s.prototype._resetSelected=function(a,l){var u=this.option,h=this._pieceList,p=(l?u:a).selected||{};if(u.selected=p,b.each(h,function(m,y){var x=this.getSelectedMapKey(m);p.hasOwnProperty(x)||(p[x]=!0)},this),"single"===u.selectedMode){var v=!1;b.each(h,function(m,y){var x=this.getSelectedMapKey(m);p[x]&&(v?p[x]=!1:v=!0)},this)}},s.prototype.getItemSymbol=function(){return this.get("itemSymbol")},s.prototype.getSelectedMapKey=function(a){return"categories"===this._mode?a.value+"":a.index+""},s.prototype.getPieceList=function(){return this._pieceList},s.prototype._determineMode=function(){var a=this.option;return a.pieces&&a.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},s.prototype.setSelected=function(a){this.option.selected=b.clone(a)},s.prototype.getValueState=function(a){var l=sa.findPieceIndex(a,this._pieceList);return null!=l&&this.option.selected[this.getSelectedMapKey(this._pieceList[l])]?"inRange":"outOfRange"},s.prototype.findTargetDataIndices=function(a){var l=[],u=this._pieceList;return this.eachTargetSeries(function(h){var p=[],v=h.getData();v.each(this.getDataDimensionIndex(v),function(m,y){sa.findPieceIndex(m,u)===a&&p.push(y)},this),l.push({seriesId:h.id,dataIndex:p})},this),l},s.prototype.getRepresentValue=function(a){var l;if(this.isCategory())l=a.value;else if(null!=a.value)l=a.value;else{var u=a.interval||[];l=u[0]===-1/0&&u[1]===1/0?0:(u[0]+u[1])/2}return l},s.prototype.getVisualMeta=function(a){if(!this.isCategory()){var l=[],u=["",""],h=this,v=this._pieceList.slice();if(v.length){var m=v[0].interval[0];m!==-1/0&&v.unshift({interval:[-1/0,m]}),(m=v[v.length-1].interval[1])!==1/0&&v.push({interval:[m,1/0]})}else v.push({interval:[-1/0,1/0]});var y=-1/0;return b.each(v,function(x){var C=x.interval;C&&(C[0]>y&&p([y,C[0]],"outOfRange"),p(C.slice()),y=C[1])},this),{stops:l,outerColors:u}}function p(x,C){var M=h.getRepresentValue({interval:x});C||(C=h.getValueState(M));var E=a(M,C);x[0]===-1/0?u[0]=E:x[1]===1/0?u[1]=E:l.push({value:x[0],color:E},{value:x[1],color:E})}},s.type="visualMap.piecewise",s.defaultOption=(0,qn.ZL)(Bd.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),s}(Bd),VN={splitNumber:function(c){var s=this.option,a=Math.min(s.precision,20),l=this.getExtent(),u=s.splitNumber;u=Math.max(parseInt(u,10),1),s.splitNumber=u;for(var h=(l[1]-l[0])/u;+h.toFixed(a)!==h&&a<5;)a++;s.precision=a,h=+h.toFixed(a),s.minOpen&&c.push({interval:[-1/0,l[0]],close:[0,0]});for(var p=0,v=l[0];p<u;v+=h,p++)c.push({interval:[v,p===u-1?l[1]:v+h],close:[1,1]});s.maxOpen&&c.push({interval:[l[1],1/0],close:[0,0]}),(0,ft.nR)(c),b.each(c,function(y,x){y.index=x,y.text=this.formatValueText(y.interval)},this)},categories:function(c){var s=this.option;b.each(s.categories,function(a){c.push({text:this.formatValueText(a,!0),value:a})},this),zN(s,c)},pieces:function(c){var s=this.option;b.each(s.pieces,function(a,l){b.isObject(a)||(a={value:a});var u={text:"",index:l};if(null!=a.label&&(u.text=a.label),a.hasOwnProperty("value")){var h=u.value=a.value;u.interval=[h,h],u.close=[1,1]}else{for(var p=u.interval=[],v=u.close=[0,0],m=[1,0,1],y=[-1/0,1/0],x=[],C=0;C<2;C++){for(var M=[["gte","gt","min"],["lte","lt","max"]][C],E=0;E<3&&null==p[C];E++)p[C]=a[M[E]],v[C]=m[E],x[C]=2===E;null==p[C]&&(p[C]=y[C])}x[0]&&p[1]===1/0&&(v[0]=0),x[1]&&p[0]===-1/0&&(v[1]=0),p[0]===p[1]&&v[0]&&v[1]&&(u.value=p[0])}u.visual=sa.retrieveVisuals(a),c.push(u)},this),zN(s,c),(0,ft.nR)(c),b.each(c,function(a){var l=a.close;a.text=a.text||this.formatValueText(null!=a.value?a.value:a.interval,!1,[["<","\u2264"][l[1]],[">","\u2265"][l[0]]])},this)}};function zN(c,s){var a=c.inverse;("vertical"===c.orient?!a:a)&&s.reverse()}const HN=EA,UN=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,Rt.ZT)(s,c),s.prototype.doRender=function(){var a=this.group;a.removeAll();var l=this.visualMapModel,u=l.get("textGap"),h=l.textStyleModel,p=h.getFont(),v=h.getTextColor(),m=this._getItemAlign(),y=l.itemSize,x=this._getViewData(),C=x.endsText,M=b.retrieve(l.get("showLabel",!0),!C);C&&this._renderEndsText(a,C[0],y,M,m),b.each(x.viewPieceList,function(E){var R=E.piece,F=new Vn.Z;F.onclick=b.bind(this._onItemClick,this,R),this._enableHoverLink(F,E.indexInModelPieceList);var U=l.getRepresentValue(R);if(this._createItemSymbol(F,U,[0,0,y[0],y[1]]),M){var ue=this.visualMapModel.getValueState(U);F.add(new kt.ZP({style:{x:"right"===m?-u:y[0]+u,y:y[1]/2,text:R.text,verticalAlign:"middle",align:m,font:p,fill:v,opacity:"outOfRange"===ue?.5:1}}))}a.add(F)},this),C&&this._renderEndsText(a,C[1],y,M,m),Oe.BZ(l.get("orient"),a,l.get("itemGap")),this.renderBackground(a),this.positionGroup(a)},s.prototype._enableHoverLink=function(a,l){var u=this;a.on("mouseover",function(){return h("highlight")}).on("mouseout",function(){return h("downplay")});var h=function(p){var v=u.visualMapModel;v.option.hoverLink&&u.api.dispatchAction({type:p,batch:X_(v.findTargetDataIndices(l),v)})}},s.prototype._getItemAlign=function(){var a=this.visualMapModel,l=a.option;if("vertical"===l.orient)return SA(a,this.api,a.itemSize);var u=l.align;return(!u||"auto"===u)&&(u="left"),u},s.prototype._renderEndsText=function(a,l,u,h,p){if(l){var v=new Vn.Z;v.add(new kt.ZP({style:(0,Bn.Lr)(this.visualMapModel.textStyleModel,{x:h?"right"===p?u[0]:0:u[0]/2,y:u[1]/2,verticalAlign:"middle",align:h?p:"center",text:l})})),a.add(v)}},s.prototype._getViewData=function(){var a=this.visualMapModel,l=b.map(a.getPieceList(),function(v,m){return{piece:v,indexInModelPieceList:m}}),u=a.get("text"),h=a.get("orient"),p=a.get("inverse");return("horizontal"===h?p:!p)?l.reverse():u&&(u=u.slice().reverse()),{viewPieceList:l,endsText:u}},s.prototype._createItemSymbol=function(a,l,u){a.add((0,dr.th)(this.getControllerVisual(l,"symbol"),u[0],u[1],u[2],u[3],this.getControllerVisual(l,"color")))},s.prototype._onItemClick=function(a){var l=this.visualMapModel,u=l.option,h=u.selectedMode;if(h){var p=b.clone(u.selected),v=l.getSelectedMapKey(a);"single"===h||!0===h?(p[v]=!0,b.each(p,function(m,y){p[y]=y===v})):p[v]=!p[v],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:p})}},s.type="visualMap.piecewise",s}(CA);function ew(c){c.registerComponentModel(HN),c.registerComponentView(UN),q_(c)}var GN={label:{enabled:!0},decal:{show:!1}},mc=(0,An.Yf)(),IA={};function WN(c,s){var a=c.getModel("aria");if(a.get("enabled")){var l=b.clone(GN);b.merge(l.label,c.getLocaleModel().get("aria"),!1),b.merge(a.option,l,!1),function u(){if(a.getModel("decal").get("show")){var C=b.createHashMap();c.eachSeries(function(M){if(!M.isColorBySeries()){var E=C.get(M.type);E||C.set(M.type,E={}),mc(M).scope=E}}),c.eachRawSeries(function(M){if(!c.isSeriesFiltered(M))if(b.isFunction(M.enableAriaDecal))M.enableAriaDecal();else{var E=M.getData();if(M.isColorBySeries()){var me=(0,VS.i)(M.ecModel,M.name,IA,c.getSeriesCount()),ve=E.getVisual("decal");E.setVisual("decal",Me(ve,me))}else{var R=M.getRawData(),F={},U=mc(M).scope;E.each(function(Ae){var Pe=E.getRawIndex(Ae);F[Pe]=Ae});var ue=R.count();R.each(function(Ae){var Pe=F[Ae],Ne=R.getName(Ae)||Ae+"",He=(0,VS.i)(M.ecModel,Ne,U,ue),Ye=E.getItemVisual(Pe,"decal");E.setItemVisual(Pe,"decal",Me(Ye,He))})}}function Me(Ae,Pe){var Ne=Ae?b.extend(b.extend({},Pe),Ae):Pe;return Ne.dirty=!0,Ne}})}}(),function h(){var y=s.getZr().dom;if(y){var x=c.getLocaleModel().get("aria"),C=a.getModel("label");if(C.option=b.defaults(C.option,x),C.get("enabled")){if(C.get("description"))return void y.setAttribute("aria-label",C.get("description"));var U,M=c.getSeriesCount(),E=C.get(["data","maxCount"])||10,R=C.get(["series","maxCount"])||10,F=Math.min(M,R);if(!(M<1)){var ue=function v(){var y=c.get("title");return y&&y.length&&(y=y[0]),y&&y.text}();if(ue)U=p(C.get(["general","withTitle"]),{title:ue});else U=C.get(["general","withoutTitle"]);var ve=[];U+=p(C.get(M>1?["series","multiple","prefix"]:["series","single","prefix"]),{seriesCount:M}),c.eachSeries(function(He,Ye){if(Ye<F){var Qe=void 0,ct=He.get("name")?"withName":"withoutName";Qe=p(Qe=C.get(M>1?["series","multiple",ct]:["series","single",ct]),{seriesId:He.seriesIndex,seriesName:He.get("name"),seriesType:m(He.subType)});var ht=He.getData();ht.count()>E?Qe+=p(C.get(["data","partialData"]),{displayCnt:E}):Qe+=C.get(["data","allData"]);for(var gt=C.get(["data","separator","middle"]),Ot=C.get(["data","separator","end"]),Gt=[],Ft=0;Ft<ht.count();Ft++)if(Ft<E){var en=ht.getName(Ft),Mn=ht.getValues(Ft),Tn=C.get(["data",en?"withName":"withoutName"]);Gt.push(p(Tn,{name:en,value:Mn.join(gt)}))}Qe+=Gt.join(gt)+Ot,ve.push(Qe)}});var Ae=C.getModel(["series","multiple","separator"]),Pe=Ae.get("middle"),Ne=Ae.get("end");U+=ve.join(Pe)+Ne,y.setAttribute("aria-label",U)}}}}()}function p(y,x){if(!b.isString(y))return y;var C=y;return b.each(x,function(M,E){C=C.replace(new RegExp("\\{\\s*"+E+"\\s*\\}","g"),M)}),C}function m(y){var x=c.getLocaleModel().get(["series","typeNames"]);return x[y]||x.chart}}function xs(c){if(c&&c.aria){var s=c.aria;null!=s.show&&(s.enabled=s.show),s.label=s.label||{},b.each(["description","general","series","data"],function(a){null!=s[a]&&(s.label[a]=s[a])})}}var tw={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},nw=function(){function c(s){null==(this._condVal=(0,b.isString)(s)?new RegExp(s):(0,b.isRegExp)(s)?s:null)&&(0,la._y)("")}return c.prototype.evaluate=function(s){var a=typeof s;return(0,b.isString)(a)?this._condVal.test(s):!!(0,b.isNumber)(a)&&this._condVal.test(s+"")},c}(),vf=function(){function c(){}return c.prototype.evaluate=function(){return this.value},c}(),ey=function(){function c(){}return c.prototype.evaluate=function(){for(var s=this.children,a=0;a<s.length;a++)if(!s[a].evaluate())return!1;return!0},c}(),PA=function(){function c(){}return c.prototype.evaluate=function(){for(var s=this.children,a=0;a<s.length;a++)if(s[a].evaluate())return!0;return!1},c}(),cz=function(){function c(){}return c.prototype.evaluate=function(){return!this.child.evaluate()},c}(),RA=function(){function c(){}return c.prototype.evaluate=function(){for(var s=!!this.valueParser,l=(0,this.getValue)(this.valueGetterParam),u=s?this.valueParser(l):null,h=0;h<this.subCondList.length;h++)if(!this.subCondList[h].evaluate(s?u:l))return!1;return!0},c}();function rw(c,s){if(!0===c||!1===c){var a=new vf;return a.value=c,a}return cl(c)||(0,la._y)(""),c.and?Ig("and",c,s):c.or?Ig("or",c,s):c.not?function ZN(c,s){var a=c.not;cl(a)||(0,la._y)("");var u=new cz;return u.child=rw(a,s),u.child||(0,la._y)(""),u}(c,s):function uz(c,s){for(var l=s.prepareGetValue(c),u=[],h=(0,b.keys)(c),p=c.parser,v=p?(0,fc.o2)(p):null,m=0;m<h.length;m++){var y=h[m];if("parser"!==y&&!s.valueGetterAttrMap.get(y)){var x=(0,b.hasOwn)(tw,y)?tw[y]:y,C=c[y],M=v?v(C):C,E=(0,fc.tR)(x,M)||"reg"===x&&new nw(M);E||(0,la._y)(""),u.push(E)}}u.length||(0,la._y)("");var R=new RA;return R.valueGetterParam=l,R.valueParser=v,R.getValue=s.getValue,R.subCondList=u,R}(c,s)}function Ig(c,s,a){var l=s[c];(0,b.isArray)(l)||(0,la._y)(""),l.length||(0,la._y)("");var h="and"===c?new ey:new PA;return h.children=(0,b.map)(l,function(p){return rw(p,a)}),h.children.length||(0,la._y)(""),h}function cl(c){return(0,b.isObject)(c)&&!(0,b.isArrayLike)(c)}var YN=function(){function c(s,a){this._cond=rw(s,a)}return c.prototype.evaluate=function(){return this._cond.evaluate()},c}(),$N={type:"echarts:filter",transform:function(c){for(var a,s=c.upstream,l=function XN(c,s){return new YN(c,s)}(c.config,{valueGetterAttrMap:(0,b.createHashMap)({dimension:!0}),prepareGetValue:function(v){var y=v.dimension;(0,b.hasOwn)(v,"dimension")||(0,la._y)("");var x=s.getDimensionInfo(y);return x||(0,la._y)(""),{dimIdx:x.index}},getValue:function(v){return s.retrieveValueFromItem(a,v.dimIdx)}}),u=[],h=0,p=s.count();h<p;h++)a=s.getRawDataItem(h),l.evaluate()&&u.push(a);return{data:u}}},KN={type:"echarts:sort",transform:function(c){var s=c.upstream,l="",u=(0,An.kF)(c.config);u.length||(0,la._y)(l);var h=[];(0,b.each)(u,function(x){var C=x.dimension,M=x.order,E=x.parser,R=x.incomparable;null==C&&(0,la._y)(l),"asc"!==M&&"desc"!==M&&(0,la._y)(l),R&&"min"!==R&&"max"!==R&&(0,la._y)(""),"asc"!==M&&"desc"!==M&&(0,la._y)("");var ue=s.getDimensionInfo(C);ue||(0,la._y)(l);var me=E?(0,fc.o2)(E):null;E&&!me&&(0,la._y)(l),h.push({dimIdx:ue.index,parser:me,comparator:new fc.ID(M,R)})});var p=s.sourceFormat;p!==ax.XD&&p!==ax.qb&&(0,la._y)(l);for(var v=[],m=0,y=s.count();m<y;m++)v.push(s.getRawDataItem(m));return v.sort(function(x,C){for(var M=0;M<h.length;M++){var E=h[M],R=s.retrieveValueFromItem(x,E.dimIdx),F=s.retrieveValueFromItem(C,E.dimIdx);E.parser&&(R=E.parser(R),F=E.parser(F));var U=E.comparator.evaluate(R,F);if(0!==U)return U}return 0}),{data:v}}},qN=z(559),_c=ge.Z.CMD;function mf(c,s){return Math.abs(c-s)<1e-5}function iw(c){var u,ht,vt,gt,Ot,Gt,Ft,en,Mn,Tn,tr,_r,hr,jr,or,gi,bi,Ii,s=c.data,a=c.len(),l=[],h=0,p=0,v=0,m=0;function y(ht,vt){u&&u.length>2&&l.push(u),u=[ht,vt]}function x(ht,vt,gt,Ot){mf(ht,gt)&&mf(vt,Ot)||u.push(ht,vt,gt,Ot,gt,Ot)}for(var M,E,R,F,U=0;U<a;){var ue=s[U++],me=1===U;switch(me&&(v=h=s[U],m=p=s[U+1],(ue===_c.L||ue===_c.C||ue===_c.Q)&&(u=[v,m])),ue){case _c.M:h=v=s[U++],p=m=s[U++],y(v,m);break;case _c.L:x(h,p,M=s[U++],E=s[U++]),h=M,p=E;break;case _c.C:u.push(s[U++],s[U++],s[U++],s[U++],h=s[U++],p=s[U++]);break;case _c.Q:M=s[U++],E=s[U++],R=s[U++],F=s[U++],u.push(h+2/3*(M-h),p+2/3*(E-p),R+2/3*(M-R),F+2/3*(E-F),R,F),h=R,p=F;break;case _c.A:var ve=s[U++],Me=s[U++],Ae=s[U++],Pe=s[U++],Ne=s[U++],He=s[U++]+Ne;U+=1;var Ye=!s[U++];M=Math.cos(Ne)*Ae+ve,E=Math.sin(Ne)*Pe+Me,me?y(v=M,m=E):x(h,p,M,E),h=Math.cos(He)*Ae+ve,p=Math.sin(He)*Pe+Me;for(var Qe=(Ye?-1:1)*Math.PI/2,it=Ne;Ye?it>He:it<He;it+=Qe){ht=it,vt=Ye?Math.max(it+Qe,He):Math.min(it+Qe,He),gt=ve,Ot=Me,Gt=Ae,Ft=Pe,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,en=Math.abs(vt-ht),Mn=4*Math.tan(en/4)/3,Tn=vt<ht?-1:1,tr=Math.cos(ht),_r=Math.sin(ht),hr=Math.cos(vt),jr=Math.sin(vt),u.push(tr*Gt+gt-(bi=Gt*Mn*Tn)*_r,_r*Ft+Ot+(Ii=Ft*Mn*Tn)*tr,(or=hr*Gt+gt)+bi*jr,(gi=jr*Ft+Ot)-Ii*hr,or,gi)}break;case _c.R:v=h=s[U++],m=p=s[U++],M=v+s[U++],E=m+s[U++],y(M,m),x(M,m,M,E),x(M,E,v,E),x(v,E,v,m),x(v,m,M,m);break;case _c.Z:u&&x(h,p,v,m),h=v,p=m}}return u&&u.length>2&&l.push(u),l}function aw(c,s,a,l,u,h,p,v,m,y){if(mf(c,a)&&mf(s,l)&&mf(u,p)&&mf(h,v))m.push(p,v);else{var x=2/y,C=x*x,M=p-c,E=v-s,R=Math.sqrt(M*M+E*E);M/=R,E/=R;var F=a-c,U=l-s,ue=u-p,me=h-v,ve=F*F+U*U,Me=ue*ue+me*me;if(ve<C&&Me<C)m.push(p,v);else{var Ae=M*F+E*U,Pe=-M*ue-E*me;if(ve-Ae*Ae<C&&Ae>=0&&Me-Pe*Pe<C&&Pe>=0)m.push(p,v);else{var Ye=[],Qe=[];(0,Es.Vz)(c,a,u,p,.5,Ye),(0,Es.Vz)(s,l,h,v,.5,Qe),aw(Ye[0],Qe[0],Ye[1],Qe[1],Ye[2],Qe[2],Ye[3],Qe[3],m,y),aw(Ye[4],Qe[4],Ye[5],Qe[5],Ye[6],Qe[6],Ye[7],Qe[7],m,y)}}}}function LA(c,s,a){var h=Math.abs(c[s]/c[1-s]),p=Math.ceil(Math.sqrt(h*a)),v=Math.floor(a/p);0===v&&(v=1,p=a);for(var m=[],y=0;y<p;y++)m.push(v);var C=a-p*v;if(C>0)for(y=0;y<C;y++)m[y%p]+=1;return m}function OA(c,s,a){for(var l=c.r0,u=c.r,h=c.startAngle,v=Math.abs(c.endAngle-h),m=v*u,y=u-l,x=m>Math.abs(y),C=LA([m,y],x?0:1,s),M=(x?v:y)/C.length,E=0;E<C.length;E++)for(var R=(x?y:v)/C[E],F=0;F<C[E];F++){var U={};x?(U.startAngle=h+M*E,U.endAngle=h+M*(E+1),U.r0=l+R*F,U.r=l+R*(F+1)):(U.startAngle=h+R*F,U.endAngle=h+R*(F+1),U.r0=l+M*E,U.r=l+M*(E+1)),U.clockwise=c.clockwise,U.cx=c.cx,U.cy=c.cy,a.push(U)}}function kA(c,s,a,l){return c*l-a*s}function tF(c,s,a,l,u,h,p,v){var m=a-c,y=l-s,x=p-u,C=v-h,M=kA(x,C,m,y);if(Math.abs(M)<1e-6)return null;var F=kA(c-u,s-h,x,C)/M;return F<0||F>1?null:new tn.Z(F*m+c,F*y+s)}function NA(c,s,a){var l=new tn.Z;tn.Z.sub(l,a,s),l.normalize();var u=new tn.Z;return tn.Z.sub(u,c,s),u.dot(l)}function _f(c,s){var a=c[c.length-1];a&&a[0]===s[0]&&a[1]===s[1]||c.push(s)}function FA(c){var s=c.points,a=[],l=[];(0,hm.zk)(s,a,l);var u=new Pa.Z(a[0],a[1],l[0]-a[0],l[1]-a[1]),h=u.width,p=u.height,v=u.x,m=u.y,y=new tn.Z,x=new tn.Z;return h>p?(y.x=x.x=v+h/2,y.y=m,x.y=m+p):(y.y=x.y=m+p/2,y.x=v,x.x=v+h),function nF(c,s,a){for(var l=c.length,u=[],h=0;h<l;h++){var p=c[h],v=c[(h+1)%l],m=tF(p[0],p[1],v[0],v[1],s.x,s.y,a.x,a.y);m&&u.push({projPt:NA(m,s,a),pt:m,idx:h})}if(u.length<2)return[{points:c},{points:c}];u.sort(function(U,ue){return U.projPt-ue.projPt});var y=u[0],x=u[u.length-1];if(x.idx<y.idx){var C=y;y=x,x=C}var M=[y.pt.x,y.pt.y],E=[x.pt.x,x.pt.y],R=[M],F=[E];for(h=y.idx+1;h<=x.idx;h++)_f(R,c[h].slice());for(_f(R,E),_f(R,M),h=x.idx+1;h<=y.idx+l;h++)_f(F,c[h%l].slice());return _f(F,M),_f(F,E),[{points:R},{points:F}]}(s,y,x)}function yf(c,s,a,l){if(1===a)l.push(s);else{var u=Math.floor(a/2),h=c(s);yf(c,h[0],u,l),yf(c,h[1],a-u,l)}return l}function rF(c,s){s.setStyle(c.style),s.z=c.z,s.z2=c.z2,s.zlevel=c.zlevel}function BA(c,s){var a=c.length,l=s.length;if(a===l)return[c,s];for(var u=[],h=[],p=a<l?c:s,v=Math.min(a,l),m=Math.abs(l-a)/6,x=Math.ceil(m/((v-2)/6))+1,C=[p[0],p[1]],M=m,E=2;E<v;){var R=p[E-2],F=p[E-1],U=p[E++],ue=p[E++],me=p[E++],ve=p[E++],Me=p[E++],Ae=p[E++];if(M<=0)C.push(U,ue,me,ve,Me,Ae);else{for(var Pe=Math.min(M,x-1)+1,Ne=1;Ne<=Pe;Ne++){var He=Ne/Pe;(0,Es.Vz)(R,U,me,Me,He,u),(0,Es.Vz)(F,ue,ve,Ae,He,h),C.push(u[1],h[1],u[2],h[2],R=u[3],F=h[3]),U=u[5],ue=h[5],me=u[6],ve=h[6]}M-=Pe-1}}return p===c?[C,s]:[c,C]}function VA(c,s){for(var a=c.length,l=c[a-2],u=c[a-1],h=[],p=0;p<s.length;)h[p++]=l,h[p++]=u;return h}function zA(c){for(var s=0,a=0,l=0,u=c.length,h=0,p=u-2;h<u;p=h,h+=2){var v=c[p],m=c[p+1],y=c[h],x=c[h+1],C=v*x-y*m;s+=C,a+=(v+y)*C,l+=(m+x)*C}return 0===s?[c[0]||0,c[1]||0]:[a/s/3,l/s/3,s]}function aF(c,s,a,l){for(var u=(c.length-2)/6,h=1/0,p=0,v=c.length,m=v-2,y=0;y<u;y++){for(var x=6*y,C=0,M=0;M<v;M+=2){var E=0===M?x:(x+M-2)%m+2,me=s[M]-l[0]-(c[E]-a[0]),ve=s[M+1]-l[1]-(c[E+1]-a[1]);C+=me*me+ve*ve}C<h&&(h=C,p=y)}return p}function fz(c){for(var s=[],a=c.length,l=0;l<a;l+=2)s[l]=c[a-l-2],s[l+1]=c[a-l-1];return s}function sw(c){return c.__isCombineMorphing}var HA="__mOriginal_";function ty(c,s,a){var l=HA+s,u=c[l]||c[s];c[l]||(c[l]=c[s]);var h=a.replace,p=a.after,v=a.before;c[s]=function(){var y,m=arguments;return v&&v.apply(this,m),y=h?h.apply(this,m):u.apply(this,m),p&&p.apply(this,m),y}}function bf(c,s){var a=HA+s;c[a]&&(c[s]=c[a],c[a]=null)}function UA(c,s){for(var a=0;a<c.length;a++)for(var l=c[a],u=0;u<l.length;){var h=l[u],p=l[u+1];l[u++]=s[0]*h+s[2]*p+s[4],l[u++]=s[1]*h+s[3]*p+s[5]}}function oF(c,s){var a=c.getUpdatedPathProxy(),l=s.getUpdatedPathProxy(),u=function iF(c,s){for(var a,l,u,h=[],p=[],v=0;v<Math.max(c.length,s.length);v++){var m=c[v],y=s[v],x=void 0,C=void 0;m?y?(l=x=(a=BA(m,y))[0],u=C=a[1]):(C=VA(u||m,m),x=m):(x=VA(l||y,y),C=y),h.push(x),p.push(C)}return[h,p]}(iw(a),iw(l)),h=u[0],p=u[1],v=c.getComputedTransform(),m=s.getComputedTransform();v&&UA(h,v),m&&UA(p,m),ty(s,"updateTransform",{replace:function y(){this.transform=null}}),s.transform=null;var x=function pz(c,s,a,l){for(var h,u=[],p=0;p<c.length;p++){var v=c[p],m=s[p],y=zA(v),x=zA(m);null==h&&(h=y[2]<0!=x[2]<0);var C=[],M=[],E=0,R=1/0,F=[],U=v.length;h&&(v=fz(v));for(var ue=6*aF(v,m,y,x),me=U-2,ve=0;ve<me;ve+=2){var Me=(ue+ve)%me+2;C[ve+2]=v[Me]-y[0],C[ve+3]=v[Me+1]-y[1]}if(C[0]=v[ue]-y[0],C[1]=v[ue+1]-y[1],a>0)for(var Ae=l/a,Pe=-l/2;Pe<=l/2;Pe+=Ae){var Ne=Math.sin(Pe),He=Math.cos(Pe),Ye=0;for(ve=0;ve<v.length;ve+=2){var Qe=C[ve],it=C[ve+1],ct=m[ve]-x[0],ht=m[ve+1]-x[1],vt=ct*He-ht*Ne,gt=ct*Ne+ht*He;F[ve]=vt,F[ve+1]=gt;var Ot=vt-Qe,Gt=gt-it;Ye+=Ot*Ot+Gt*Gt}if(Ye<R){R=Ye,E=Pe;for(var Ft=0;Ft<F.length;Ft++)M[Ft]=F[Ft]}}else for(var en=0;en<U;en+=2)M[en]=m[en]-x[0],M[en+1]=m[en+1]-x[1];u.push({from:C,to:M,fromCp:y,toCp:x,rotation:-E})}return u}(h,p,10,Math.PI),C=[];ty(s,"buildPath",{replace:function(M){for(var E=s.__morphT,R=1-E,F=[],U=0;U<x.length;U++){var ue=x[U],me=ue.from,ve=ue.to,Me=ue.rotation*E,Ae=ue.fromCp,Pe=ue.toCp,Ne=Math.sin(Me),He=Math.cos(Me);(0,lr.lerp)(F,Ae,Pe,E);for(var Ye=0;Ye<me.length;Ye+=2){var vt=me[Ye]*R+(ct=ve[Ye])*E,gt=me[Ye+1]*R+(ht=ve[Ye+1])*E;C[Ye]=vt*He-gt*Ne+F[0],C[Ye+1]=vt*Ne+gt*He+F[1]}var Ot=C[0],Gt=C[1];for(M.moveTo(Ot,Gt),Ye=2;Ye<me.length;){var ct=C[Ye++],ht=C[Ye++],Ft=C[Ye++],en=C[Ye++],Mn=C[Ye++],Tn=C[Ye++];Ot===ct&&Gt===ht&&Ft===Mn&&en===Tn?M.lineTo(Mn,Tn):M.bezierCurveTo(ct,ht,Ft,en,Mn,Tn),Ot=Mn,Gt=Tn}}}})}function lw(c,s,a){if(!c||!s)return s;var l=a.done,u=a.during;return oF(c,s),s.__morphT=0,s.animateTo({__morphT:1},(0,b.defaults)({during:function(p){s.dirtyShape(),u&&u(p)},done:function(){(function h(){bf(s,"buildPath"),bf(s,"updateTransform"),s.__morphT=-1,s.createPathProxy(),s.dirtyShape()})(),l&&l()}},a)),s}function gz(c,s,a,l,u,h){c=u===a?0:Math.round(32767*(c-a)/(u-a)),s=h===l?0:Math.round(32767*(s-l)/(h-l));for(var m,v=0,y=32768;y>0;y/=2){var x=0,C=0;(c&y)>0&&(x=1),(s&y)>0&&(C=1),v+=y*y*(3*x^C),0===C&&(1===x&&(c=y-1-c,s=y-1-s),m=c,c=s,s=m)}return v}function ao(c){var s=1/0,a=1/0,l=-1/0,u=-1/0,h=(0,b.map)(c,function(v){var m=v.getBoundingRect(),y=v.getComputedTransform(),x=m.x+m.width/2+(y?y[4]:0),C=m.y+m.height/2+(y?y[5]:0);return s=Math.min(x,s),a=Math.min(C,a),l=Math.max(x,l),u=Math.max(C,u),[x,C]});return(0,b.map)(h,function(v,m){return{cp:v,z:gz(v[0],v[1],s,a,l,u),path:c[m]}}).sort(function(v,m){return v.z-m.z}).map(function(v){return v.path})}function sF(c){return function Rl(c,s){var u,a=[],l=c.shape;switch(c.type){case"rect":(function eF(c,s,a){for(var l=c.width,u=c.height,h=l>u,p=LA([l,u],h?0:1,s),v=h?"width":"height",m=h?"height":"width",y=h?"x":"y",x=h?"y":"x",C=c[v]/p.length,M=0;M<p.length;M++)for(var E=c[m]/p[M],R=0;R<p[M];R++){var F={};F[y]=M*C,F[x]=R*E,F[v]=C,F[m]=E,F.x+=c.x,F.y+=c.y,a.push(F)}})(l,s,a),u=Jt.Z;break;case"sector":OA(l,s,a),u=hs.C;break;case"circle":OA({r0:0,r:l.r,startAngle:0,endAngle:2*Math.PI,cx:l.cx,cy:l.cy},s,a),u=hs.C;break;default:var h=c.getComputedTransform(),p=h?Math.sqrt(Math.max(h[0]*h[0]+h[1]*h[1],h[2]*h[2]+h[3]*h[3])):1,v=(0,b.map)(function JN(c,s){var a=iw(c),l=[];s=s||1;for(var u=0;u<a.length;u++){var h=a[u],p=[],v=h[0],m=h[1];p.push(v,m);for(var y=2;y<h.length;){var x=h[y++],C=h[y++],M=h[y++],E=h[y++],R=h[y++],F=h[y++];aw(v,m,x,C,M,E,R,F,p,s),v=R,m=F}l.push(p)}return l}(c.getUpdatedPathProxy(),p),function(ue){return function hz(c){for(var s=[],a=0;a<c.length;)s.push([c[a++],c[a++]]);return s}(ue)}),m=v.length;if(0===m)yf(FA,{points:v[0]},s,a);else if(m===s)for(var y=0;y<m;y++)a.push({points:v[y]});else{var x=0,C=(0,b.map)(v,function(ue){var me=[],ve=[];(0,hm.zk)(ue,me,ve);var Me=(ve[1]-me[1])*(ve[0]-me[0]);return x+=Me,{poly:ue,area:Me}});C.sort(function(ue,me){return me.area-ue.area});var M=s;for(y=0;y<m;y++){var E=C[y];if(M<=0)break;var R=y===m-1?M:Math.ceil(E.area/x*s);R<0||(yf(FA,{points:E.poly},R,a),M-=R)}}u=Wo.Z}if(!u)return function ow(c,s){for(var a=[],l=0;l<s;l++)a.push((0,rm.U5)(c));return a}(c,s);var F=[];for(y=0;y<a.length;y++){var U=new u;U.setShape(a[y]),rF(c,U),F.push(U)}return F}(c.path,c.count)}function GA(c){return(0,b.isArray)(c[0])}function WA(c,s){for(var a=[],l=c.length,u=0;u<l;u++)a.push({one:c[u],many:[]});for(u=0;u<s.length;u++){var h=s[u].length,p=void 0;for(p=0;p<h;p++)a[p%l].many.push(s[u][p])}var v=0;for(u=l-1;u>=0;u--)if(!a[u].many.length){var m=a[v].many;if(m.length<=1){if(!v)return a;v=0}h=m.length;var y=Math.ceil(h/2);a[u].many=m.slice(y,h),a[v].many=m.slice(0,y),v++}return a}var mz={clone:function(c){for(var s=[],a=1-Math.pow(1-c.path.style.opacity,1/c.count),l=0;l<c.count;l++){var u=(0,rm.U5)(c.path);u.setStyle("opacity",a),s.push(u)}return s},split:null};function jA(c,s,a,l,u,h){if(c.length&&s.length){var p=(0,on.ke)("update",l,u);if(p&&p.duration>0){var y,x,v=l.getModel("universalTransition").get("delay"),m=Object.assign({setToFinal:!0},p);GA(c)&&(y=c,x=s),GA(s)&&(y=s,x=c);for(var M=y?y===c:c.length>s.length,E=y?WA(x,y):WA(M?s:c,[M?c:s]),R=0,F=0;F<E.length;F++)R+=E[F].many.length;var U=0;for(F=0;F<E.length;F++)C(E[F],M,U,R),U+=E[F].many.length}}function C(ue,me,ve,Me,Ae){var Pe=ue.many,Ne=ue.one;if(1!==Pe.length||Ae)for(var it=(0,b.defaults)({dividePath:mz[a],individualDelay:v&&function(Gt,Ft,en,Mn){return v(Gt+ve,Me)}},m),ct=me?function vz(c,s,a){var l=[];!function u(Ae){for(var Pe=0;Pe<Ae.length;Pe++){var Ne=Ae[Pe];sw(Ne)?u(Ne.childrenRef()):Ne instanceof ye.ZP&&l.push(Ne)}}(c);var h=l.length;if(!h)return{fromIndividuals:[],toIndividuals:[],count:0};var v=(a.dividePath||sF)({path:s,count:h});if(v.length!==h)return console.error("Invalid morphing: unmatched splitted path"),{fromIndividuals:[],toIndividuals:[],count:0};l=ao(l),v=ao(v);for(var m=a.done,y=a.during,x=a.individualDelay,C=new fe.ZP,M=0;M<h;M++){var E=l[M],R=v[M];R.parent=s,R.copyTransform(C),x||oF(E,R)}function F(Ae){for(var Pe=0;Pe<v.length;Pe++)v[Pe].addSelfToZr(Ae)}function U(){s.__isCombineMorphing=!1,s.__morphT=-1,s.childrenRef=null,bf(s,"addSelfToZr"),bf(s,"removeSelfFromZr")}s.__isCombineMorphing=!0,s.childrenRef=function(){return v},ty(s,"addSelfToZr",{after:function(Ae){F(Ae)}}),ty(s,"removeSelfFromZr",{after:function(Ae){for(var Pe=0;Pe<v.length;Pe++)v[Pe].removeSelfFromZr(Ae)}});var ue=v.length;if(x){var me=ue,ve=function(){0==--me&&(U(),m&&m())};for(M=0;M<ue;M++){var Me=x?(0,b.defaults)({delay:(a.delay||0)+x(M,ue,l[M],v[M]),done:ve},a):a;lw(l[M],v[M],Me)}}else s.__morphT=0,s.animateTo({__morphT:1},(0,b.defaults)({during:function(Ae){for(var Pe=0;Pe<ue;Pe++){var Ne=v[Pe];Ne.__morphT=s.__morphT,Ne.dirtyShape()}y&&y(Ae)},done:function(){U();for(var Ae=0;Ae<c.length;Ae++)bf(c[Ae],"updateTransform");m&&m()}},a));return s.__zr&&F(s.__zr),{fromIndividuals:l,toIndividuals:v,count:ue}}(Pe,Ne,it):function lF(c,s,a){var l=s.length,u=[],h=a.dividePath||sF;if(sw(c)){!function p(E){for(var R=0;R<E.length;R++){var F=E[R];sw(F)?p(F.childrenRef()):F instanceof ye.ZP&&u.push(F)}}(c.childrenRef());var v=u.length;if(v<l)for(var m=0,y=v;y<l;y++)u.push((0,rm.U5)(u[m++%v]));u.length=l}else{u=h({path:c,count:l});var x=c.getComputedTransform();for(y=0;y<u.length;y++)u[y].setLocalTransform(x);if(u.length!==l)return console.error("Invalid morphing: unmatched splitted path"),{fromIndividuals:[],toIndividuals:[],count:0}}u=ao(u),s=ao(s);var C=a.individualDelay;for(y=0;y<l;y++){var M=C?(0,b.defaults)({delay:(a.delay||0)+C(y,l,u[y],s[y])},a):a;lw(u[y],s[y],M)}return{fromIndividuals:u,toIndividuals:s,count:s.length}}(Ne,Pe,it),ht=ct.fromIndividuals,vt=ct.toIndividuals,gt=ht.length,Ot=0;Ot<gt;Ot++)Qe=v?(0,b.defaults)({delay:v(Ot,gt)},m):m,h(ht[Ot],vt[Ot],me?Pe[Ot]:ue.one,me?ue.one:Pe[Ot],Qe);else{var Qe,He=me?Pe[0]:Ne,Ye=me?Ne:Pe[0];sw(He)?C({many:[He],one:Ye},!0,ve,Me,!0):(lw(He,Ye,Qe=v?(0,b.defaults)({delay:v(ve,Me)},m):m),h(He,Ye,He,Ye,Qe))}}}function xf(c){if(!c)return[];if((0,b.isArray)(c)){for(var s=[],a=0;a<c.length;a++)s.push(xf(c[a]));return s}var l=[];return c.traverse(function(u){u instanceof ye.ZP&&!u.disableMorphing&&!u.invisible&&!u.ignore&&l.push(u)}),l}var uF=(0,An.Yf)();function XA(c,s,a,l){var h=function dF(c,s){for(var a=c.dimensions,l=0;l<a.length;l++){var u=c.getDimensionInfo(a[l]);if(u&&0===u.otherDims[s])return a[l]}}(c,l?"itemChildGroupId":"itemGroupId");if(h){var p=function _z(c,s,a){var l=c.getDimensionInfo(a),u=l&&l.ordinalMeta;if(l){var h=c.get(l.name,s);return u&&u.categories[h]||h+""}}(c,s,h);return p}var v=c.getRawDataItem(s),m=l?"childGroupId":"groupId";return v&&v[m]?v[m]+"":l?void 0:a||c.getId(s)}function hF(c){var s=[];return(0,b.each)(c,function(a){var l=a.data,u=a.dataGroupId;if(!(l.count()>1e4))for(var h=l.getIndices(),p=0;p<h.length;p++)s.push({data:l,groupId:XA(l,p,u,!1),childGroupId:XA(l,p,u,!0),divide:a.divide,dataIndex:p})}),s}function cw(c,s,a){c.traverse(function(l){l instanceof ye.ZP&&(0,on.KZ)(l,{style:{opacity:0}},s,{dataIndex:a,isFrom:!0})})}function $A(c){if(c.parent){var s=c.getComputedTransform();c.setLocalTransform(s),c.parent.remove(c)}}function wf(c){c.stopAnimation(),c.isGroup&&c.traverse(function(s){s.stopAnimation()})}function pF(c,s,a){var l=hF(c),u=hF(s);function h(ve,Me,Ae,Pe,Ne){(Ae||ve)&&Me.animateFrom({style:Ae&&Ae!==ve?(0,b.extend)((0,b.extend)({},Ae.style),ve.style):ve.style},Ne)}var p=!1,v=0,m=(0,b.createHashMap)(),y=(0,b.createHashMap)();l.forEach(function(ve){ve.groupId&&m.set(ve.groupId,!0),ve.childGroupId&&y.set(ve.childGroupId,!0)});for(var x=0;x<u.length;x++){if(y.get(u[x].groupId)){v=1;break}var M=u[x].childGroupId;if(M&&m.get(M)){v=2;break}}function E(ve,Me){return function(Ae){return Me?Ae.data.getId(Ae.dataIndex):ve?1===v?Ae.childGroupId:Ae.groupId:2===v?Ae.childGroupId:Ae.groupId}}var R=function fF(c,s){var a=c.length;if(a!==s.length)return!1;for(var l=0;l<a;l++){var u=c[l],h=s[l];if(u.data.getId(u.dataIndex)!==h.data.getId(h.dataIndex))return!1}return!0}(l,u),F={};if(!R)for(x=0;x<u.length;x++){var U=u[x],ue=U.data.getItemGraphicEl(U.dataIndex);ue&&(F[ue.id]=!0)}function me(ve,Me){var Ae=l[Me],Pe=u[ve],Ne=Pe.data.hostModel,He=Ae.data.getItemGraphicEl(Ae.dataIndex),Ye=Pe.data.getItemGraphicEl(Pe.dataIndex);He!==Ye?He&&F[He.id]||Ye&&(wf(Ye),He?(wf(He),$A(He),p=!0,jA(xf(He),xf(Ye),Pe.divide,Ne,ve,h)):cw(Ye,Ne,ve)):Ye&&function yz(c,s,a){var l=(0,on.ke)("update",a,s);l&&c.traverse(function(u){if(u instanceof qu.ZP){var h=(0,on._W)(u);h&&u.animateFrom({style:h},l)}})}(Ye,Pe.dataIndex,Ne)}new td.Z(l,u,E(!0,R),E(!1,R),null,"multiple").update(me).updateManyToOne(function(ve,Me){var Ae=u[ve],Pe=Ae.data,Ne=Pe.hostModel,He=Pe.getItemGraphicEl(Ae.dataIndex),Ye=(0,b.filter)((0,b.map)(Me,function(Qe){return l[Qe].data.getItemGraphicEl(l[Qe].dataIndex)}),function(Qe){return Qe&&Qe!==He&&!F[Qe.id]});He&&(wf(He),Ye.length?((0,b.each)(Ye,function(Qe){wf(Qe),$A(Qe)}),p=!0,jA(xf(Ye),xf(He),Ae.divide,Ne,ve,h)):cw(He,Ne,Ae.dataIndex))}).updateOneToMany(function(ve,Me){var Ae=l[Me],Pe=Ae.data.getItemGraphicEl(Ae.dataIndex);if(!Pe||!F[Pe.id]){var Ne=(0,b.filter)((0,b.map)(ve,function(Ye){return u[Ye].data.getItemGraphicEl(u[Ye].dataIndex)}),function(Ye){return Ye&&Ye!==Pe}),He=u[ve[0]].data.hostModel;Ne.length&&((0,b.each)(Ne,function(Ye){return wf(Ye)}),Pe?(wf(Pe),$A(Pe),p=!0,jA(xf(Pe),xf(Ne),Ae.divide,He,ve[0],h)):(0,b.each)(Ne,function(Ye){return cw(Ye,He,ve[0])}))}}).updateManyToMany(function(ve,Me){new td.Z(Me,ve,function(Ae){return l[Ae].data.getId(l[Ae].dataIndex)},function(Ae){return u[Ae].data.getId(u[Ae].dataIndex)}).update(function(Ae,Pe){me(ve[Ae],Me[Pe])}).execute()}).execute(),p&&(0,b.each)(s,function(ve){var Ae=ve.data.hostModel,Pe=Ae&&a.getViewOfSeriesModel(Ae),Ne=(0,on.ke)("update",Ae,0);Pe&&Ae.isAnimationEnabled()&&Ne&&Ne.duration>0&&Pe.group.traverse(function(He){He instanceof ye.ZP&&!He.animators.length&&He.animateFrom({style:{opacity:0}},Ne)})})}function gF(c){return c.getModel("universalTransition").get("seriesKey")||c.id}function uw(c){return(0,b.isArray)(c)?c.sort().join(","):c}function Mu(c){if(c.hostModel)return c.hostModel.getModel("universalTransition").get("divideShape")}function ny(c,s){for(var a=0;a<c.length;a++)if(null!=s.seriesIndex&&s.seriesIndex===c[a].seriesIndex||null!=s.seriesId&&s.seriesId===c[a].id)return a}var QA=z(1296);(0,le.D)([ce.N]),(0,le.D)([function kv(c){c.registerPainter("svg",Ov)}]),(0,le.D)([function ip(c){c.registerChartView(Hv),c.registerSeriesModel(ep),c.registerLayout(ti("line",!0)),c.registerVisual({seriesType:"line",reset:function(s){var a=s.getData(),l=s.getModel("lineStyle").getLineStyle();l&&!l.stroke&&(l.stroke=a.getVisual("style").fill),a.setVisual("legendLineStyle",l)}}),c.registerProcessor(c.PRIORITY.PROCESSOR.STATISTIC,To("line"))},function o0(c){c.registerChartView(Hi),c.registerSeriesModel(hu),c.registerLayout(c.PRIORITY.VISUAL.LAYOUT,b.curry(uo.bK,"bar")),c.registerLayout(c.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,(0,uo.Bk)("bar")),c.registerProcessor(c.PRIORITY.PROCESSOR.STATISTIC,To("bar")),c.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(s,a){a.eachComponent({mainType:s.componentType||"series",query:s},function(u){s.sortInfo&&u.axis.setCategorySortInfo(s.sortInfo)})})},function op(c){c.registerChartView(mr),c.registerSeriesModel(gh),(0,Gv.y)("pie",c.registerAction),c.registerLayout((0,b.curry)(nt,"pie")),c.registerProcessor(zt("pie")),c.registerProcessor(function As(c){return{seriesType:c,reset:function(s,a){var l=s.getData();l.filterSelf(function(u){var h=l.mapDimension("value"),p=l.get(h,u);return!((0,b.isNumber)(p)&&!isNaN(p)&&p<0)})}}}("pie"))},function Xv(c){(0,le.D)(hp),c.registerSeriesModel(WC),c.registerChartView(IP),c.registerLayout(ti("scatter"))},function C5(c){(0,le.D)(Qv),c.registerChartView(UP),c.registerSeriesModel(GP),c.registerLayout(_0),c.registerProcessor(zt("radar")),c.registerPreprocessor(mu)},function lR(c){(0,le.D)(ES),c.registerChartView(rR),c.registerSeriesModel(bS),c.registerLayout(wp),c.registerProcessor(c.PRIORITY.PROCESSOR.STATISTIC,L0),(0,Gv.y)("map",c.registerAction)},function FS(c){c.registerChartView(fR),c.registerSeriesModel(gR),c.registerLayout(mR),c.registerVisual(Hc),function Tp(c){c.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(s,a){a.eachComponent({mainType:"series",subType:"tree",query:s},function(l){var u=s.dataIndex,p=l.getData().tree.getNodeByDataIndex(u);p.isExpand=!p.isExpand})}),c.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(s,a,l){a.eachComponent({mainType:"series",subType:"tree",query:s},function(u){var p=TS(u.coordinateSystem,s,void 0,l);u.setCenter&&u.setCenter(p.center),u.setZoom&&u.setZoom(p.zoom)})})}(c)},function OR(c){c.registerSeriesModel(N5),c.registerChartView($S),c.registerVisual(DR),c.registerLayout(Hh),function BS(c){for(var s=0;s<W0.length;s++)c.registerAction({type:W0[s],update:"updateView"},b.noop);c.registerAction({type:"treemapRootToNode",update:"updateView"},function(a,l){l.eachComponent({mainType:"series",subType:"treemap",query:a},function u(h,p){var m=Dp(a,["treemapZoomToNode","treemapRootToNode"],h);if(m){var y=h.getViewRoot();y&&(a.direction=G0(y,m.node)?"rollUp":"drillDown"),h.resetViewRoot(m.node)}})})}(c)},function wb(c){c.registerChartView(yb),c.registerSeriesModel(KR),c.registerProcessor(ib),c.registerVisual(z5),c.registerVisual(ob),c.registerLayout(cb),c.registerLayout(c.PRIORITY.VISUAL.POST_CHART_LAYOUT,VR),c.registerLayout(zR),c.registerCoordinateSystem("graphView",{dimensions:ed.dimensions,create:UR}),c.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},b.noop),c.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},b.noop),c.registerAction(QR,function(s,a,l){a.eachComponent({mainType:"series",query:s},function(u){var p=TS(u.coordinateSystem,s,void 0,l);u.setCenter&&u.setCenter(p.center),u.setZoom&&u.setZoom(p.zoom)})})},function eL(c){c.registerChartView(qR),c.registerSeriesModel(JR)},function bD(c){c.registerChartView(iL),c.registerSeriesModel(Db),c.registerLayout(oL),c.registerProcessor(zt("funnel"))},function ML(c){(0,le.D)(qD),c.registerChartView(SD),c.registerSeriesModel(TD),c.registerVisual(c.PRIORITY.VISUAL.BRUSH,ED)},function aM(c){c.registerChartView(Y5),c.registerSeriesModel(tM),c.registerLayout(PL),c.registerVisual(kL),c.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(s,a){a.eachComponent({mainType:"series",subType:"sankey",query:s},function(l){l.setNodePosition(s.dataIndex,[s.localX,s.localY])})})},function uM(c){c.registerSeriesModel(Xh),c.registerChartView(rx),c.registerLayout(lM),c.registerTransform(cM)},function $L(c){c.registerChartView(HL),c.registerSeriesModel(UL),c.registerPreprocessor(GL),c.registerVisual(ZL),c.registerLayout(XL)},function dx(c){c.registerChartView(ux),c.registerSeriesModel(a4),c.registerLayout(ti("effectScatter"))},function Gn(c){c.registerChartView(Kp),c.registerSeriesModel(tO),c.registerLayout(xM),c.registerVisual(CM)},function c4(c){c.registerChartView(lO),c.registerSeriesModel(fd)},function IM(c){c.registerChartView(TM),c.registerSeriesModel(AM),c.registerLayout(c.PRIORITY.VISUAL.LAYOUT,(0,b.curry)(uo.bK,"pictorialBar")),c.registerLayout(c.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,(0,uo.Bk)("pictorialBar"))},function Ke(c){c.registerChartView(ir),c.registerSeriesModel(_t),c.registerLayout(Sx),c.registerProcessor(zt("themeRiver"))},function kM(c){c.registerChartView(Km),c.registerSeriesModel(LM),c.registerLayout((0,b.curry)(Wn,"sunburst")),c.registerProcessor((0,b.curry)(zt,"sunburst")),c.registerVisual(Yr),function Mx(c){c.registerAction({type:Fi,update:"updateView"},function(s,a){a.eachComponent({mainType:"series",subType:"sunburst",query:s},function l(u,h){var p=Dp(s,[Fi],u);if(p){var v=u.getViewRoot();v&&(s.direction=G0(v,p.node)?"rollUp":"drillDown"),u.resetViewRoot(p.node)}})}),c.registerAction({type:Jh,update:"none"},function(s,a,l){s=(0,b.extend)({},s),a.eachComponent({mainType:"series",subType:"sunburst",query:s},function u(h){var p=Dp(s,[Jh],h);p&&(s.dataIndex=p.node.dataIndex)}),l.dispatchAction((0,b.extend)(s,{type:"highlight"}))}),c.registerAction({type:"sunburstUnhighlight",update:"updateView"},function(s,a,l){s=(0,b.extend)({},s),l.dispatchAction((0,b.extend)(s,{type:"downplay"}))})}(c)},function pT(c){c.registerChartView(DO),c.registerSeriesModel(BM)}]),(0,le.D)(function GO(c){(0,le.D)(hp),(0,le.D)(ag)}),(0,le.D)(function jT(c){(0,le.D)(ag),zc.registerAxisPointerClass("PolarAxisPointer",v4),c.registerCoordinateSystem("polar",KO),c.registerComponentModel(o_),c.registerComponentView(WT),Po(c,"angle",WO,ak),Po(c,"radius",IT,ok),c.registerComponentView(QO),c.registerComponentView(tk),c.registerLayout((0,b.curry)(ik,"bar"))}),(0,le.D)(ES),(0,le.D)(function qx(c){(0,le.D)(ag),zc.registerAxisPointerClass("SingleAxisPointer",fk),c.registerComponentView(qT),c.registerComponentView(uk),c.registerComponentModel(sg),Po(c,"single",sg,sg.defaultOption),c.registerCoordinateSystem("single",$T)}),(0,le.D)(qD),(0,le.D)(function tE(c){c.registerComponentModel(eE),c.registerComponentView(gk),c.registerCoordinateSystem("calendar",_4)}),(0,le.D)(function aE(c){c.registerComponentModel(hc),c.registerComponentView(bk),c.registerPreprocessor(function(s){var a=s.graphic;(0,b.isArray)(a)?s.graphic=a[0]&&a[0].elements?[s.graphic[0]]:[{elements:a}]:a&&!a.elements&&(s.graphic=[{elements:[a]}])})}),(0,le.D)(function OE(c){c.registerComponentModel(pE),c.registerComponentView(Ik),fg("saveAsImage",gE),fg("magicType",mE),fg("dataView",d1),fg("dataZoom",zk),fg("restore",y_),(0,le.D)(hE)}),(0,le.D)(function Zk(c){(0,le.D)(ag),c.registerComponentModel(NE),c.registerComponentView(x1),c.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},b.noop),c.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},b.noop)}),(0,le.D)(ag),(0,le.D)(function YE(c){c.registerComponentView(qk),c.registerComponentModel(eN),c.registerPreprocessor(Yk),c.registerVisual(c.PRIORITY.VISUAL.BRUSH,M1),c.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(s,a){a.eachComponent({mainType:"brush",query:s},function(l){l.setAreas(s.areas)})}),c.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},b.noop),c.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},b.noop),fg("brush",V4)}),(0,le.D)(function z4(c){c.registerComponentModel(nN),c.registerComponentView(XE)}),(0,le.D)(function Z4(c){c.registerComponentModel($E),c.registerComponentView(aN),c.registerSubTypeDefaulter("timeline",function(){return"slider"}),function oN(c){c.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(s,a,l){var u=a.getComponent("timeline");return u&&null!=s.currentIndex&&(u.setCurrentIndex(s.currentIndex),!u.get("loop",!0)&&u.isIndexMax()&&u.getPlayState()&&(u.setPlayState(!1),l.dispatchAction({type:"timelinePlayChange",playState:!1,from:s.from}))),a.resetOption("timeline",{replaceMerge:u.get("replaceMerge",!0)}),(0,b.defaults)({currentIndex:u.option.currentIndex},s)}),c.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(s,a){var l=a.getComponent("timeline");l&&null!=s.playState&&l.setPlayState(s.playState)})}(c),c.registerPreprocessor(W4)}),(0,le.D)(function hN(c){c.registerComponentModel(eA),c.registerComponentView(dN),c.registerPreprocessor(function(s){O1(s.series,"markPoint")&&(s.markPoint=s.markPoint||{})})}),(0,le.D)(function qc(c){c.registerComponentModel(N_),c.registerComponentView(gN),c.registerPreprocessor(function(s){O1(s.series,"markLine")&&(s.markLine=s.markLine||{})})}),(0,le.D)(function F_(c){c.registerComponentModel(Q4),c.registerComponentView(nz),c.registerPreprocessor(function(s){O1(s.series,"markArea")&&(s.markArea=s.markArea||{})})}),(0,le.D)(function Dr(c){(0,le.D)(dA),(0,le.D)(ga)}),(0,le.D)(function G_(c){(0,le.D)(gA),(0,le.D)(yA)}),(0,le.D)(gA),(0,le.D)(yA),(0,le.D)(function AA(c){(0,le.D)(J_),(0,le.D)(ew)}),(0,le.D)(J_),(0,le.D)(ew),(0,le.D)(function jN(c){c.registerPreprocessor(xs),c.registerVisual(c.PRIORITY.VISUAL.ARIA,WN)}),(0,le.D)(function QN(c){c.registerTransform($N),c.registerTransform(KN)}),(0,le.D)(qN.N),(0,le.D)(function KA(c){c.registerUpdateLifecycle("series:beforeupdate",function(s,a,l){(0,b.each)((0,An.kF)(l.seriesTransition),function(u){(0,b.each)((0,An.kF)(u.to),function(h){for(var p=l.updatedSeries,v=0;v<p.length;v++)(null!=h.seriesIndex&&h.seriesIndex===p[v].seriesIndex||null!=h.seriesId&&h.seriesId===p[v].id)&&(p[v][zi.V]=!0)})})}),c.registerUpdateLifecycle("series:transition",function(s,a,l){var u=uF(a);if(u.oldSeries&&l.updatedSeries&&l.optionChanged){var h=l.seriesTransition;if(h)(0,b.each)((0,An.kF)(h),function(E){!function Lg(c,s,a,l){var u=[],h=[];(0,b.each)((0,An.kF)(c.from),function(p){var v=ny(s.oldSeries,p);v>=0&&u.push({dataGroupId:s.oldDataGroupIds[v],data:s.oldData[v],divide:Mu(s.oldData[v]),groupIdDim:p.dimension})}),(0,b.each)((0,An.kF)(c.to),function(p){var v=ny(a.updatedSeries,p);if(v>=0){var m=a.updatedSeries[v].getData();h.push({dataGroupId:s.oldDataGroupIds[v],data:m,divide:Mu(m),groupIdDim:p.dimension})}}),u.length>0&&h.length>0&&pF(u,h,l)}(E,u,l,a)});else{var p=function vF(c,s){var a=(0,b.createHashMap)(),l=(0,b.createHashMap)(),u=(0,b.createHashMap)();return(0,b.each)(c.oldSeries,function(p,v){var m=c.oldDataGroupIds[v],y=c.oldData[v],x=gF(p),C=uw(x);l.set(C,{dataGroupId:m,data:y}),(0,b.isArray)(x)&&(0,b.each)(x,function(M){u.set(M,{key:C,dataGroupId:m,data:y})})}),(0,b.each)(s.updatedSeries,function(p){if(p.isUniversalTransitionEnabled()&&p.isAnimationEnabled()){var v=p.get("dataGroupId"),m=p.getData(),y=gF(p),x=uw(y),C=l.get(x);if(C)a.set(x,{oldSeries:[{dataGroupId:C.dataGroupId,divide:Mu(C.data),data:C.data}],newSeries:[{dataGroupId:v,divide:Mu(m),data:m}]});else if((0,b.isArray)(y)){var M=[];(0,b.each)(y,function(F){var U=l.get(F);U.data&&M.push({dataGroupId:U.dataGroupId,divide:Mu(U.data),data:U.data})}),M.length&&a.set(x,{oldSeries:M,newSeries:[{dataGroupId:v,data:m,divide:Mu(m)}]})}else{var E=u.get(y);if(E){var R=a.get(E.key);R||(R={oldSeries:[{dataGroupId:E.dataGroupId,data:E.data,divide:Mu(E.data)}],newSeries:[]},a.set(E.key,R)),R.newSeries.push({dataGroupId:v,data:m,divide:Mu(m)})}}}}),a}(u,l);(0,b.each)(p.keys(),function(E){var R=p.get(E);pF(R.oldSeries,R.newSeries,a)})}(0,b.each)(l.updatedSeries,function(E){E[zi.V]&&(E[zi.V]=!1)})}for(var v=s.getSeries(),m=u.oldSeries=[],y=u.oldDataGroupIds=[],x=u.oldData=[],C=0;C<v.length;C++){var M=v[C].getData();M.count()<1e4&&(m.push(v[C]),y.push(v[C].get("dataGroupId")),x.push(M))}})}),(0,le.D)(QA.T)},8646:(Ut,rt,z)=>{z.d(rt,{D:()=>be,KZ:()=>we,XD:()=>G,Zi:()=>Z,_W:()=>te,bX:()=>j,eq:()=>de,ke:()=>_e});var le=z(9496),ce=(0,z(2846).Yf)();function _e(ee,Q,J,b,Y){var q;if(Q&&Q.ecModel){var H=Q.ecModel.getUpdatePayload();q=H&&H.animation}var W="update"===ee;if(Q&&Q.isAnimationEnabled()){var X=void 0,K=void 0,B=void 0;return b?(X=(0,le.retrieve2)(b.duration,200),K=(0,le.retrieve2)(b.easing,"cubicOut"),B=0):(X=Q.getShallow(W?"animationDurationUpdate":"animationDuration"),K=Q.getShallow(W?"animationEasingUpdate":"animationEasing"),B=Q.getShallow(W?"animationDelayUpdate":"animationDelay")),q&&(null!=q.duration&&(X=q.duration),null!=q.easing&&(K=q.easing),null!=q.delay&&(B=q.delay)),(0,le.isFunction)(B)&&(B=B(J,Y)),(0,le.isFunction)(X)&&(X=X(J)),{duration:X||0,delay:B,easing:K}}return null}function ye(ee,Q,J,b,Y,q,H){var W,re=!1;(0,le.isFunction)(Y)?(H=q,q=Y,Y=null):(0,le.isObject)(Y)&&(q=Y.cb,H=Y.during,re=Y.isFrom,W=Y.removeOpt,Y=Y.dataIndex);var X="leave"===ee;X||Q.stopAnimation("leave");var K=_e(ee,b,Y,X?W||{}:null,b&&b.getAnimationDelayParams?b.getAnimationDelayParams(Q,Y):null);if(K&&K.duration>0){var P={duration:K.duration,delay:K.delay||0,easing:K.easing,done:q,force:!!q||!!H,setToFinal:!X,scope:ee,during:H};re?Q.animateFrom(J,P):Q.animateTo(J,P)}else Q.stopAnimation(),!re&&Q.attr(J),H&&H(1),q&&q()}function be(ee,Q,J,b,Y,q){ye("update",ee,Q,J,b,Y,q)}function we(ee,Q,J,b,Y,q){ye("enter",ee,Q,J,b,Y,q)}function de(ee){if(!ee.__zr)return!0;for(var Q=0;Q<ee.animators.length;Q++)if("leave"===ee.animators[Q].scope)return!0;return!1}function j(ee,Q,J,b,Y,q){de(ee)||ye("leave",ee,Q,J,b,Y,q)}function $(ee,Q,J,b){ee.removeTextContent(),ee.removeTextGuideLine(),j(ee,{style:{opacity:0}},Q,J,b)}function G(ee,Q,J){function b(){ee.parent&&ee.parent.remove(ee)}ee.isGroup?ee.traverse(function(Y){Y.isGroup||$(Y,Q,J,b)}):$(ee,Q,J,b)}function Z(ee){ce(ee).oldStyle=ee.style}function te(ee){return ce(ee).oldStyle}},4325:(Ut,rt,z)=>{z.d(rt,{Z:()=>Se});var le=z(2846);function Se(){var ce=(0,le.Yf)();return function(_e){var ye=ce(_e),be=_e.pipelineContext,we=!!ye.large,de=!!ye.progressiveRender,j=ye.large=!(!be||!be.large),$=ye.progressiveRender=!(!be||!be.progressiveRender);return(we!==j||de!==$)&&"reset"}}},9621:(Ut,rt,z)=>{z.d(rt,{Z:()=>H});var le=z(9496),Se=z(1082),ce=z(4694),_e=z(5618),ye=z(2846),be=z(5566),we=function re(W){this.coordSysDims=[],this.axisMap=(0,le.createHashMap)(),this.categoryAxisMap=(0,le.createHashMap)(),this.coordSysName=W},j={cartesian2d:function(re,W,X,K){var B=re.getReferringComponents("xAxis",ye.C6).models[0],O=re.getReferringComponents("yAxis",ye.C6).models[0];W.coordSysDims=["x","y"],X.set("x",B),X.set("y",O),$(B)&&(K.set("x",B),W.firstCategoryDimIndex=0),$(O)&&(K.set("y",O),null==W.firstCategoryDimIndex&&(W.firstCategoryDimIndex=1))},singleAxis:function(re,W,X,K){var B=re.getReferringComponents("singleAxis",ye.C6).models[0];W.coordSysDims=["single"],X.set("single",B),$(B)&&(K.set("single",B),W.firstCategoryDimIndex=0)},polar:function(re,W,X,K){var B=re.getReferringComponents("polar",ye.C6).models[0],O=B.findAxisModel("radiusAxis"),D=B.findAxisModel("angleAxis");W.coordSysDims=["radius","angle"],X.set("radius",O),X.set("angle",D),$(O)&&(K.set("radius",O),W.firstCategoryDimIndex=0),$(D)&&(K.set("angle",D),null==W.firstCategoryDimIndex&&(W.firstCategoryDimIndex=1))},geo:function(re,W,X,K){W.coordSysDims=["lng","lat"]},parallel:function(re,W,X,K){var B=re.ecModel,O=B.getComponent("parallel",re.get("parallelIndex")),D=W.coordSysDims=O.dimensions.slice();(0,le.each)(O.parallelAxisIndex,function(P,I){var T=B.getComponent("parallelAxis",P),A=D[I];X.set(A,T),$(T)&&(K.set(A,T),null==W.firstCategoryDimIndex&&(W.firstCategoryDimIndex=I))})}};function $(re){return"category"===re.get("type")}var G=z(5743),Z=z(9777),te=z(3957),ee=z(678);const H=function b(re,W,X){X=X||{};var B,K=W.getSourceManager(),O=!1;re?(O=!0,B=(0,G.nx)(re)):O=(B=K.getSource()).sourceFormat===ee.cy;var D=function de(re){var W=re.get("coordinateSystem"),X=new we(W),K=j[W];if(K)return K(re,X,X.axisMap,X.categoryAxisMap),X}(W),P=function Q(re,W){var B,X=re.get("coordinateSystem"),K=be.Z.get(X);return W&&W.coordSysDims&&(B=le.map(W.coordSysDims,function(O){var D={name:O},P=W.axisMap.get(O);if(P){var I=P.get("type");D.type=(0,_e.T)(I)}return D})),B||(B=K&&(K.getDimensionsInfo?K.getDimensionsInfo():K.dimensions.slice())||["x","y"]),B}(W,D),I=X.useEncodeDefaulter,T=le.isFunction(I)?I:I?le.curry(te.pY,P,W):null,A={coordDimensions:P,generateCoord:X.generateCoord,encodeDefine:W.getEncode(),encodeDefaulter:T,canOmitUnusedDimensions:!O},L=(0,ce.Z)(B,A),N=function J(re,W,X){var K,B;return X&&le.each(re,function(O,D){var I=X.categoryAxisMap.get(O.coordDim);I&&(null==K&&(K=D),O.ordinalMeta=I.getOrdinalMeta(),W&&(O.createInvertedIndices=!0)),null!=O.otherDims.itemName&&(B=!0)}),!B&&null!=K&&(re[K].otherDims.itemName=0),K}(L.dimensions,X.createInvertedIndices,D),ie=O?null:K.getSharedDataStore(L),oe=(0,Z.BM)(W,{schema:L,store:ie}),ae=new Se.Z(L,W);ae.setCalculationInfo(oe);var he=null!=N&&function Y(re){if(re.sourceFormat===ee.cy){var W=function q(re){for(var W=0;W<re.length&&null==re[W];)W++;return re[W]}(re.data||[]);return!le.isArray((0,ye.C4)(W))}}(B)?function(se,xe,fe,ge){return ge===N?fe:this.defaultDimValueGetter(se,xe,fe,ge)}:null;return ae.hasItemOption=!1,ae.initData(O?B:ie,null,he),ae}},559:(Ut,rt,z)=>{z.d(rt,{N:()=>de});var le=z(5845),Se=z(8103),ce=z(9314),_e=z(678),ye=z(8296),be=function(j){function $(){var G=null!==j&&j.apply(this,arguments)||this;return G.type="dataset",G}return(0,le.ZT)($,j),$.prototype.init=function(G,Z,te){j.prototype.init.call(this,G,Z,te),this._sourceManager=new ye.U(this),(0,ye.t)(this)},$.prototype.mergeOption=function(G,Z){j.prototype.mergeOption.call(this,G,Z),(0,ye.t)(this)},$.prototype.optionUpdated=function(){this._sourceManager.dirty()},$.prototype.getSourceManager=function(){return this._sourceManager},$.type="dataset",$.defaultOption={seriesLayoutBy:_e.fY},$}(Se.Z),we=function(j){function $(){var G=null!==j&&j.apply(this,arguments)||this;return G.type="dataset",G}return(0,le.ZT)($,j),$.type="dataset",$}(ce.Z);function de(j){j.registerComponentModel(be),j.registerComponentView(we)}},7131:(Ut,rt,z)=>{z.d(rt,{w:()=>ye});var le=z(9496),Se=z(7475),ce=z(7654),_e=z(2846);function ye(we){var b,Y,q,H,de=we.series,j=we.dataIndex,$=we.multipleSeries,G=de.getData(),Z=G.mapDimensionsAll("defaultedTooltip"),te=Z.length,ee=de.getRawValue(j),Q=(0,le.isArray)(ee),J=(0,Se.jT)(de,j);if(te>1||Q&&!te){var re=function be(we,de,j,$,G){var Z=de.getData(),te=(0,le.reduce)(we,function(Y,q,H){var re=Z.getDimensionInfo(H);return Y||re&&!1!==re.tooltip&&null!=re.displayName},!1),ee=[],Q=[],J=[];function b(Y,q){var H=Z.getDimensionInfo(q);!H||!1===H.otherDims.tooltip||(te?J.push((0,Se.TX)("nameValue",{markerType:"subItem",markerColor:G,name:H.displayName,value:Y,valueType:H.type})):(ee.push(Y),Q.push(H.type)))}return $.length?(0,le.each)($,function(Y){b((0,ce.hk)(Z,j,Y),Y)}):(0,le.each)(we,b),{inlineValues:ee,inlineValueTypes:Q,blocks:J}}(ee,de,j,Z,J);b=re.inlineValues,Y=re.inlineValueTypes,q=re.blocks,H=re.inlineValues[0]}else if(te){var W=G.getDimensionInfo(Z[0]);H=b=(0,ce.hk)(G,j,Z[0]),Y=W.type}else H=b=Q?ee[0]:ee;var X=(0,_e.yu)(de),K=X&&de.name||"",B=G.getName(j),O=$?K:B;return(0,Se.TX)("section",{header:K,noHeader:$||!X,sortParam:H,blocks:[(0,Se.TX)("nameValue",{markerType:"item",markerColor:J,name:O,noName:!(0,le.trim)(O),value:b,valueType:Y,dataIndex:j})].concat(q||[])})}},7475:(Ut,rt,z)=>{z.d(rt,{BY:()=>J,TX:()=>$,d_:()=>K,iv:()=>B,jT:()=>X});var le=z(5853),Se=z(1755),ce=z(9496),_e=z(2401),ye=z(10),be="line-height:1";function we(O,D){var P=O.color||"#6e7079",I=O.fontSize||12,T=O.fontWeight||"400",A=O.color||"#464646",L=O.fontSize||14,N=O.fontWeight||"900";return"html"===D?{nameStyle:"font-size:"+(0,le.F1)(I+"")+"px;color:"+(0,le.F1)(P)+";font-weight:"+(0,le.F1)(T+""),valueStyle:"font-size:"+(0,le.F1)(L+"")+"px;color:"+(0,le.F1)(A)+";font-weight:"+(0,le.F1)(N+"")}:{nameStyle:{fontSize:I,fill:P,fontWeight:T},valueStyle:{fontSize:L,fill:A,fontWeight:N}}}var de=[0,10,20,30],j=["","\n","\n\n","\n\n\n"];function $(O,D){return D.type=O,D}function G(O){return"section"===O.type}function Z(O){return G(O)?ee:Q}function te(O){if(G(O)){var D=0,P=O.blocks.length,I=P>1||P>0&&!O.noHeader;return(0,ce.each)(O.blocks,function(T){var A=te(T);A>=D&&(D=A+ +(I&&(!A||G(T)&&!T.noHeader)))}),D}return 0}function ee(O,D,P,I){var T=D.noHeader,A=function b(O){return{html:de[O],richText:j[O]}}(te(D)),L=[],N=D.blocks||[];(0,ce.assert)(!N||(0,ce.isArray)(N)),N=N||[];var ie=O.orderMode;if(D.sortBlocks&&ie){N=N.slice();var oe={valueAsc:"asc",valueDesc:"desc"};if((0,ce.hasOwn)(oe,ie)){var ae=new _e.ID(oe[ie],null);N.sort(function(fe,ge){return ae.evaluate(fe.sortParam,ge.sortParam)})}else"seriesDesc"===ie&&N.reverse()}(0,ce.each)(N,function(fe,ge){var Ce=D.valueFormatter,Te=Z(fe)(Ce?(0,ce.extend)((0,ce.extend)({},O),{valueFormatter:Ce}):O,fe,ge>0?A.html:0,I);null!=Te&&L.push(Te)});var he="richText"===O.renderMode?L.join(A.richText):Y(L.join(""),T?P:A.html);if(T)return he;var se=(0,Se.uX)(D.header,"ordinal",O.useUTC),xe=we(I,O.renderMode).nameStyle;return"richText"===O.renderMode?re(O,se,xe)+A.richText+he:Y('<div style="'+xe+";"+be+';">'+(0,le.F1)(se)+"</div>"+he,P)}function Q(O,D,P,I){var T=O.renderMode,A=D.noName,L=D.noValue,N=!D.markerType,ie=D.name,oe=O.useUTC,ae=D.valueFormatter||O.valueFormatter||function(Ve){return Ve=(0,ce.isArray)(Ve)?Ve:[Ve],(0,ce.map)(Ve,function(ze,We){return(0,Se.uX)(ze,(0,ce.isArray)(xe)?xe[We]:xe,oe)})};if(!A||!L){var he=N?"":O.markupStyleCreator.makeTooltipMarker(D.markerType,D.markerColor||"#333",T),se=A?"":(0,Se.uX)(ie,"ordinal",oe),xe=D.valueType,fe=L?[]:ae(D.value,D.dataIndex),ge=!N||!A,Ce=!N&&A,Te=we(I,T),Ie=Te.nameStyle,Ee=Te.valueStyle;return"richText"===T?(N?"":he)+(A?"":re(O,se,Ie))+(L?"":function W(O,D,P,I,T){var A=[T];return P&&A.push({padding:[0,0,0,I?10:20],align:"right"}),O.markupStyleCreator.wrapRichTextStyle((0,ce.isArray)(D)?D.join("  "):D,A)}(O,fe,ge,Ce,Ee)):Y((N?"":he)+(A?"":function q(O,D,P){return'<span style="'+P+";"+(D?"margin-left:2px":"")+'">'+(0,le.F1)(O)+"</span>"}(se,!N,Ie))+(L?"":function H(O,D,P,I){var A=D?"float:right;margin-left:"+(P?"10px":"20px"):"";return O=(0,ce.isArray)(O)?O:[O],'<span style="'+A+";"+I+'">'+(0,ce.map)(O,function(L){return(0,le.F1)(L)}).join("&nbsp;&nbsp;")+"</span>"}(fe,ge,Ce,Ee)),P)}}function J(O,D,P,I,T,A){if(O)return Z(O)({useUTC:T,renderMode:P,orderMode:I,markupStyleCreator:D,valueFormatter:O.valueFormatter},O,0,A)}function Y(O,D){return'<div style="margin: '+D+"px 0 0;"+be+';">'+O+'<div style="clear:both"></div></div>'}function re(O,D,P){return O.markupStyleCreator.wrapRichTextStyle(D,P)}function X(O,D){var P=O.getData().getItemVisual(D,"style");return(0,Se.Lz)(P[O.visualDrawType])}function K(O,D){return O.get("padding")??("richText"===D?[8,10]:10)}var B=function(){function O(){this.richTextStyles={},this._nextStyleNameId=(0,ye.jj)()}return O.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},O.prototype.makeTooltipMarker=function(D,P,I){var T="richText"===I?this._generateStyleName():null,A=(0,Se.A0)({color:P,type:D,renderMode:I,markerId:T});return(0,ce.isString)(A)?A:(this.richTextStyles[T]=A.style,A.content)},O.prototype.wrapRichTextStyle=function(D,P){var I={};(0,ce.isArray)(P)?(0,ce.each)(P,function(A){return(0,ce.extend)(I,A)}):(0,ce.extend)(I,P);var T=this._generateStyleName();return this.richTextStyles[T]=I,"{"+T+"|"+D+"}"},O}()},819:(Ut,rt,z)=>{z.d(rt,{Z:()=>O});var le=z(9496),Se=z(10),ce=z(9733),_e=z(2846),ye=z(3809),be=(0,_e.Yf)();function we(D,P){var I=le.map(P,function(T){return D.scale.parse(T)});return"time"===D.type&&I.length>0&&(I.sort(),I.unshift(I[0]),I.push(I[I.length-1])),I}function G(D,P){var L,N,I=ee(D,"labels"),T=(0,ye.rk)(P);return Q(I,T)||(le.isFunction(T)?L=re(D,T):(N="auto"===T?function b(D){return be(D).autoInterval??(be(D).autoInterval=D.calculateCategoryInterval())}(D):T,L=H(D,N)),J(I,T,{labels:L,labelCategoryInterval:N}))}function ee(D,P){return be(D)[P]||(be(D)[P]=[])}function Q(D,P){for(var I=0;I<D.length;I++)if(D[I].key===P)return D[I].value}function J(D,P,I){return D.push({key:P,value:I}),I}function H(D,P,I){var T=(0,ye.J9)(D),A=D.scale,L=A.getExtent(),N=D.getLabelModel(),ie=[],oe=Math.max((P||0)+1,1),ae=L[0],he=A.count();0!==ae&&oe>1&&he/oe>2&&(ae=Math.round(Math.ceil(ae/oe)*oe));var se=(0,ye.WY)(D),xe=N.get("showMinLabel")||se,fe=N.get("showMaxLabel")||se;xe&&ae!==L[0]&&Ce(L[0]);for(var ge=ae;ge<=L[1];ge+=oe)Ce(ge);function Ce(Te){var Ie={value:Te};ie.push(I?Te:{formattedLabel:T(Ie),rawLabel:A.getLabel(Ie),tickValue:Te})}return fe&&ge-oe!==L[1]&&Ce(L[1]),ie}function re(D,P,I){var T=D.scale,A=(0,ye.J9)(D),L=[];return le.each(T.getTicks(),function(N){var ie=T.getLabel(N),oe=N.value;P(N.value,ie)&&L.push(I?oe:{formattedLabel:A(N),rawLabel:ie,tickValue:oe})}),L}var W=[0,1];function K(D,P){var A=(D[1]-D[0])/P/2;D[0]+=A,D[1]-=A}const O=function(){function D(P,I,T){this.onBand=!1,this.inverse=!1,this.dim=P,this.scale=I,this._extent=T||[0,0]}return D.prototype.contain=function(P){var I=this._extent,T=Math.min(I[0],I[1]),A=Math.max(I[0],I[1]);return P>=T&&P<=A},D.prototype.containData=function(P){return this.scale.contain(P)},D.prototype.getExtent=function(){return this._extent.slice()},D.prototype.getPixelPrecision=function(P){return(0,Se.M9)(P||this.scale.getExtent(),this._extent)},D.prototype.setExtent=function(P,I){var T=this._extent;T[0]=P,T[1]=I},D.prototype.dataToCoord=function(P,I){var T=this._extent,A=this.scale;return P=A.normalize(P),this.onBand&&"ordinal"===A.type&&K(T=T.slice(),A.count()),(0,Se.NU)(P,W,T,I)},D.prototype.coordToData=function(P,I){var T=this._extent,A=this.scale;this.onBand&&"ordinal"===A.type&&K(T=T.slice(),A.count());var L=(0,Se.NU)(P,T,W,I);return this.scale.scale(L)},D.prototype.pointToData=function(P,I){},D.prototype.getTicksCoords=function(P){var I=(P=P||{}).tickModel||this.getTickModel(),T=function j(D,P){var I=D.getTickModel().get("customValues");return I?{ticks:we(D,I)}:"category"===D.type?function Z(D,P){var L,N,I=ee(D,"ticks"),T=(0,ye.rk)(P),A=Q(I,T);if(A)return A;if((!P.get("show")||D.scale.isBlank())&&(L=[]),le.isFunction(T))L=re(D,T,!0);else if("auto"===T){var ie=G(D,D.getLabelModel());N=ie.labelCategoryInterval,L=le.map(ie.labels,function(oe){return oe.tickValue})}else L=H(D,N=T,!0);return J(I,T,{ticks:L,tickCategoryInterval:N})}(D,P):{ticks:le.map(D.scale.getTicks(),function(T){return T.value})}}(this,I),L=(0,le.map)(T.ticks,function(ie){return{coord:this.dataToCoord("ordinal"===this.scale.type?this.scale.getRawOrdinalNumber(ie):ie),tickValue:ie}},this);return function B(D,P,I,T){var A=P.length;if(D.onBand&&!I&&A){var N,L=D.getExtent();if(1===A)P[0].coord=L[0],N=P[1]={coord:L[1]};else{var ae=(P[A-1].coord-P[0].coord)/(P[A-1].tickValue-P[0].tickValue);(0,le.each)(P,function(fe){fe.coord-=ae/2});var he=D.scale.getExtent();P.push(N={coord:P[A-1].coord+ae*(1+he[1]-P[A-1].tickValue)})}var se=L[0]>L[1];xe(P[0].coord,L[0])&&(T?P[0].coord=L[0]:P.shift()),T&&xe(L[0],P[0].coord)&&P.unshift({coord:L[0]}),xe(L[1],N.coord)&&(T?N.coord=L[1]:P.pop()),T&&xe(N.coord,L[1])&&P.push({coord:L[1]})}function xe(fe,ge){return fe=(0,Se.NM)(fe),ge=(0,Se.NM)(ge),se?fe>ge:fe<ge}}(this,L,I.get("alignWithLabel"),P.clamp),L},D.prototype.getMinorTicksCoords=function(){if("ordinal"===this.scale.type)return[];var I=this.model.getModel("minorTick").get("splitNumber");I>0&&I<100||(I=5);var T=this.scale.getMinorTicks(I);return(0,le.map)(T,function(L){return(0,le.map)(L,function(N){return{coord:this.dataToCoord(N),tickValue:N}},this)},this)},D.prototype.getViewLabels=function(){return function de(D){var P=D.getLabelModel().get("customValues");if(P){var I=(0,ye.J9)(D);return{labels:we(D,P).map(function(T){var A={value:T};return{formattedLabel:I(A),rawLabel:D.scale.getLabel(A),tickValue:T}})}}return"category"===D.type?function $(D){var P=D.getLabelModel(),I=G(D,P);return!P.get("show")||D.scale.isBlank()?{labels:[],labelCategoryInterval:I.labelCategoryInterval}:I}(D):function te(D){var P=D.scale.getTicks(),I=(0,ye.J9)(D);return{labels:le.map(P,function(T,A){return{level:T.level,formattedLabel:I(T,A),rawLabel:D.scale.getLabel(T),tickValue:T.value}})}}(D)}(this).labels},D.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},D.prototype.getTickModel=function(){return this.model.getModel("axisTick")},D.prototype.getBandWidth=function(){var P=this._extent,I=this.scale.getExtent(),T=I[1]-I[0]+(this.onBand?1:0);0===T&&(T=1);var A=Math.abs(P[1]-P[0]);return Math.abs(A)/T},D.prototype.calculateCategoryInterval=function(){return function Y(D){var P=function q(D){var P=D.getLabelModel();return{axisRotate:D.getRotate?D.getRotate():D.isHorizontal&&!D.isHorizontal()?90:0,labelRotate:P.get("rotate")||0,font:P.getFont()}}(D),I=(0,ye.J9)(D),T=(P.axisRotate-P.labelRotate)/180*Math.PI,A=D.scale,L=A.getExtent(),N=A.count();if(L[1]-L[0]<1)return 0;var ie=1;N>40&&(ie=Math.max(1,Math.floor(N/40)));for(var oe=L[0],ae=D.dataToCoord(oe+1)-D.dataToCoord(oe),he=Math.abs(ae*Math.cos(T)),se=Math.abs(ae*Math.sin(T)),xe=0,fe=0;oe<=L[1];oe+=ie){var Ce,Te=ce.lP(I({value:oe}),P.font,"center","top");Ce=1.3*Te.height,xe=Math.max(xe,1.3*Te.width,7),fe=Math.max(fe,Ce,7)}var Ie=xe/he,Ee=fe/se;isNaN(Ie)&&(Ie=1/0),isNaN(Ee)&&(Ee=1/0);var Ve=Math.max(0,Math.floor(Math.min(Ie,Ee))),ze=be(D.model),We=D.getExtent(),tt=ze.lastAutoInterval,st=ze.lastTickCount;return null!=tt&&null!=st&&Math.abs(tt-Ve)<=1&&Math.abs(st-N)<=1&&tt>Ve&&ze.axisExtent0===We[0]&&ze.axisExtent1===We[1]?Ve=tt:(ze.lastTickCount=N,ze.lastAutoInterval=Ve,ze.axisExtent0=We[0],ze.axisExtent1=We[1]),Ve}(this)},D}()},3809:(Ut,rt,z)=>{z.d(rt,{aG:()=>D,Do:()=>A,DX:()=>T,PY:()=>oe,rk:()=>N,Xv:()=>K,Yb:()=>P,J9:()=>I,Jk:()=>O,WY:()=>ie,AH:()=>ae});var le=z(9496),Se=z(5866),ce=z(4105),_e=z(2725),ye=z(3236),be=z(468),we=z(2841),de=z(5845),j=z(10),$=z(3295),G=_e.Z.prototype,Z=ce.Z.prototype,te=j.NM,ee=Math.floor,Q=Math.ceil,J=Math.pow,b=Math.log,Y=function(he){function se(){var xe=null!==he&&he.apply(this,arguments)||this;return xe.type="log",xe.base=10,xe._originalScale=new ce.Z,xe._interval=0,xe}return(0,de.ZT)(se,he),se.prototype.getTicks=function(xe){var ge=this._extent,Ce=this._originalScale.getExtent(),Te=Z.getTicks.call(this,xe);return le.map(Te,function(Ie){var Ee=Ie.value,Ve=j.NM(J(this.base,Ee));return Ve=Ee===ge[0]&&this._fixMin?H(Ve,Ce[0]):Ve,{value:Ve=Ee===ge[1]&&this._fixMax?H(Ve,Ce[1]):Ve}},this)},se.prototype.setExtent=function(xe,fe){var ge=b(this.base);xe=b(Math.max(0,xe))/ge,fe=b(Math.max(0,fe))/ge,Z.setExtent.call(this,xe,fe)},se.prototype.getExtent=function(){var xe=this.base,fe=G.getExtent.call(this);fe[0]=J(xe,fe[0]),fe[1]=J(xe,fe[1]);var Ce=this._originalScale.getExtent();return this._fixMin&&(fe[0]=H(fe[0],Ce[0])),this._fixMax&&(fe[1]=H(fe[1],Ce[1])),fe},se.prototype.unionExtent=function(xe){this._originalScale.unionExtent(xe);var fe=this.base;xe[0]=b(xe[0])/b(fe),xe[1]=b(xe[1])/b(fe),G.unionExtent.call(this,xe)},se.prototype.unionExtentFromData=function(xe,fe){this.unionExtent(xe.getApproximateExtent(fe))},se.prototype.calcNiceTicks=function(xe){xe=xe||10;var fe=this._extent,ge=fe[1]-fe[0];if(!(ge===1/0||ge<=0)){var Ce=j.Xd(ge);for(xe/ge*Ce<=.5&&(Ce*=10);!isNaN(Ce)&&Math.abs(Ce)<1&&Math.abs(Ce)>0;)Ce*=10;var Ie=[j.NM(Q(fe[0]/Ce)*Ce),j.NM(ee(fe[1]/Ce)*Ce)];this._interval=Ce,this._niceExtent=Ie}},se.prototype.calcNiceExtent=function(xe){Z.calcNiceExtent.call(this,xe),this._fixMin=xe.fixMin,this._fixMax=xe.fixMax},se.prototype.parse=function(xe){return xe},se.prototype.contain=function(xe){return xe=b(xe)/b(this.base),$.XS(xe,this._extent)},se.prototype.normalize=function(xe){return xe=b(xe)/b(this.base),$.Fv(xe,this._extent)},se.prototype.scale=function(xe){return xe=$.bA(xe,this._extent),J(this.base,xe)},se.type="log",se}(_e.Z),q=Y.prototype;function H(he,se){return te(he,j.p8(se))}q.getMinorTicks=Z.getMinorTicks,q.getLabel=Z.getLabel,_e.Z.registerClass(Y);const re=Y;var W=z(9777),X=z(1017);function K(he,se){var xe=he.type,fe=(0,X.Qw)(he,se,he.getExtent()).calculate();he.setBlank(fe.isBlank);var ge=fe.min,Ce=fe.max,Te=se.ecModel;if(Te&&"time"===xe){var Ie=(0,ye.Ge)("bar",Te),Ee=!1;if(le.each(Ie,function(We){Ee=Ee||We.getBaseAxis()===se.axis}),Ee){var Ve=(0,ye.My)(Ie),ze=function B(he,se,xe,fe){var ge=xe.axis.getExtent(),Ce=ge[1]-ge[0],Te=(0,ye.G_)(fe,xe.axis);if(void 0===Te)return{min:he,max:se};var Ie=1/0;le.each(Te,function(st){Ie=Math.min(st.offset,Ie)});var Ee=-1/0;le.each(Te,function(st){Ee=Math.max(st.offset+st.width,Ee)}),Ie=Math.abs(Ie),Ee=Math.abs(Ee);var Ve=Ie+Ee,ze=se-he,tt=ze/(1-(Ie+Ee)/Ce)-ze;return{min:he-=tt*(Ie/Ve),max:se+=tt*(Ee/Ve)}}(ge,Ce,se,Ve);ge=ze.min,Ce=ze.max}}return{extent:[ge,Ce],fixMin:fe.minFixed,fixMax:fe.maxFixed}}function O(he,se){var xe=se,fe=K(he,xe),ge=fe.extent,Ce=xe.get("splitNumber");he instanceof re&&(he.base=xe.get("logBase"));var Te=he.type,Ie=xe.get("interval"),Ee="interval"===Te||"time"===Te;he.setExtent(ge[0],ge[1]),he.calcNiceExtent({splitNumber:Ce,fixMin:fe.fixMin,fixMax:fe.fixMax,minInterval:Ee?xe.get("minInterval"):null,maxInterval:Ee?xe.get("maxInterval"):null}),null!=Ie&&he.setInterval&&he.setInterval(Ie)}function D(he,se){if(se=se||he.get("type"))switch(se){case"category":return new Se.Z({ordinalMeta:he.getOrdinalMeta?he.getOrdinalMeta():he.getCategories(),extent:[1/0,-1/0]});case"time":return new we.Z({locale:he.ecModel.getLocaleModel(),useUTC:he.ecModel.get("useUTC")});default:return new(_e.Z.getClass(se)||ce.Z)}}function P(he){var se=he.scale.getExtent(),xe=se[0],fe=se[1];return!(xe>0&&fe>0||xe<0&&fe<0)}function I(he){var fe,se=he.getLabelModel().get("formatter"),xe="category"===he.type?he.scale.getExtent()[0]:null;return"time"===he.scale.type?(fe=se,function(ge,Ce){return he.scale.getFormattedLabel(ge,Ce,fe)}):le.isString(se)?function(fe){return function(ge){var Ce=he.scale.getLabel(ge);return fe.replace("{value}",Ce??"")}}(se):le.isFunction(se)?function(fe){return function(ge,Ce){return null!=xe&&(Ce=ge.value-xe),fe(T(he,ge),Ce,null!=ge.level?{level:ge.level}:null)}}(se):function(fe){return he.scale.getLabel(fe)}}function T(he,se){return"category"===he.type?he.scale.getLabel(se):se.value}function A(he){var xe=he.scale;if(he.model.get(["axisLabel","show"])&&!xe.isBlank()){var fe,ge,Ce=xe.getExtent();ge=xe instanceof Se.Z?xe.count():(fe=xe.getTicks()).length;var Ee,Te=he.getLabelModel(),Ie=I(he),Ve=1;ge>40&&(Ve=Math.ceil(ge/40));for(var ze=0;ze<ge;ze+=Ve){var tt=Ie(fe?fe[ze]:{value:Ce[0]+ze},ze),Tt=L(Te.getTextRect(tt),Te.get("rotate")||0);Ee?Ee.union(Tt):Ee=Tt}return Ee}}function L(he,se){var xe=se*Math.PI/180,fe=he.width,ge=he.height,Ce=fe*Math.abs(Math.cos(xe))+Math.abs(ge*Math.sin(xe)),Te=fe*Math.abs(Math.sin(xe))+Math.abs(ge*Math.cos(xe));return new be.Z(he.x,he.y,Ce,Te)}function N(he){return he.get("interval")??"auto"}function ie(he){return"category"===he.type&&0===N(he.getLabelModel())}function oe(he,se){var xe={};return le.each(he.mapDimensionsAll(se),function(fe){xe[(0,W.IR)(he,fe)]=!0}),le.keys(xe)}function ae(he,se,xe){se&&le.each(oe(se,xe),function(fe){var ge=se.getApproximateExtent(fe);ge[0]<he[0]&&(he[0]=ge[0]),ge[1]>he[1]&&(he[1]=ge[1])})}},7069:(Ut,rt,z)=>{z.d(rt,{W:()=>le});var le=function(){function Se(){}return Se.prototype.getNeedCrossZero=function(){return!this.option.scale},Se.prototype.getCoordSysModel=function(){},Se}()},3352:(Ut,rt,z)=>{z.d(rt,{Z:()=>ce});var le=z(9496);const ce=function(){function _e(ye){this.type="cartesian",this._dimList=[],this._axes={},this.name=ye||""}return _e.prototype.getAxis=function(ye){return this._axes[ye]},_e.prototype.getAxes=function(){return le.map(this._dimList,function(ye){return this._axes[ye]},this)},_e.prototype.getAxesByScale=function(ye){return ye=ye.toLowerCase(),le.filter(this.getAxes(),function(be){return be.scale.type===ye})},_e.prototype.addAxis=function(ye){var be=ye.dim;this._axes[be]=ye,this._dimList.push(be)},_e}()},3052:(Ut,rt,z)=>{z.d(rt,{Im:()=>Q,Ni:()=>ee,Qh:()=>Z,jM:()=>te});var le=z(5845),Se=z(468),ce=z(5145),_e=z(2286),ye=z(619),be=z(9496),we=[];function de(J,b){for(var Y=0;Y<J.length;Y++)ce.applyTransform(J[Y],J[Y],b)}function j(J,b,Y,q){for(var H=0;H<J.length;H++){var re=J[H];q&&(re=q.project(re)),re&&isFinite(re[0])&&isFinite(re[1])&&(ce.min(b,b,re),ce.max(Y,Y,re))}}var G=function(){function J(b){this.name=b}return J.prototype.setCenter=function(b){this._center=b},J.prototype.getCenter=function(){var b=this._center;return b||(b=this._center=this.calcCenter()),b},J}(),Z=function J(b,Y){this.type="polygon",this.exterior=b,this.interiors=Y},te=function J(b){this.type="linestring",this.points=b},ee=function(J){function b(Y,q,H){var re=J.call(this,Y)||this;return re.type="geoJSON",re.geometries=q,re._center=H&&[H[0],H[1]],re}return(0,le.ZT)(b,J),b.prototype.calcCenter=function(){for(var q,Y=this.geometries,H=0,re=0;re<Y.length;re++){var W=Y[re],X=W.exterior,K=X&&X.length;K>H&&(q=W,H=K)}if(q)return function $(J){for(var b=0,Y=0,q=0,H=J.length,re=J[H-1][0],W=J[H-1][1],X=0;X<H;X++){var K=J[X][0],B=J[X][1],O=re*B-K*W;b+=O,Y+=(re+K)*O,q+=(W+B)*O,re=K,W=B}return b?[Y/b/3,q/b/3,b]:[J[0][0]||0,J[0][1]||0]}(q.exterior);var B=this.getBoundingRect();return[B.x+B.width/2,B.y+B.height/2]},b.prototype.getBoundingRect=function(Y){var q=this._rect;if(q&&!Y)return q;var H=[1/0,1/0],re=[-1/0,-1/0];return(0,be.each)(this.geometries,function(X){"polygon"===X.type?j(X.exterior,H,re,Y):(0,be.each)(X.points,function(K){j(K,H,re,Y)})}),isFinite(H[0])&&isFinite(H[1])&&isFinite(re[0])&&isFinite(re[1])||(H[0]=H[1]=re[0]=re[1]=0),q=new Se.Z(H[0],H[1],re[0]-H[0],re[1]-H[1]),Y||(this._rect=q),q},b.prototype.contain=function(Y){var q=this.getBoundingRect(),H=this.geometries;if(!q.contain(Y[0],Y[1]))return!1;e:for(var re=0,W=H.length;re<W;re++){var X=H[re];if("polygon"===X.type){var B=X.interiors;if(_e.X(X.exterior,Y[0],Y[1])){for(var O=0;O<(B?B.length:0);O++)if(_e.X(B[O],Y[0],Y[1]))continue e;return!0}}}return!1},b.prototype.transformTo=function(Y,q,H,re){var W=this.getBoundingRect(),X=W.width/W.height;H?re||(re=H/X):H=X*re;for(var K=new Se.Z(Y,q,H,re),B=W.calculateTransform(K),O=this.geometries,D=0;D<O.length;D++){var P=O[D];"polygon"===P.type?(de(P.exterior,B),(0,be.each)(P.interiors,function(I){de(I,B)})):(0,be.each)(P.points,function(I){de(I,B)})}(W=this._rect).copy(K),this._center=[W.x+W.width/2,W.y+W.height/2]},b.prototype.cloneShallow=function(Y){null==Y&&(Y=this.name);var q=new b(Y,this.geometries,this._center);return q._rect=this._rect,q.transformTo=null,q},b}(G),Q=function(J){function b(Y,q){var H=J.call(this,Y)||this;return H.type="geoSVG",H._elOnlyForCalculate=q,H}return(0,le.ZT)(b,J),b.prototype.calcCenter=function(){for(var Y=this._elOnlyForCalculate,q=Y.getBoundingRect(),H=[q.x+q.width/2,q.y+q.height/2],re=ye.identity(we),W=Y;W&&!W.isGeoSVGGraphicRoot;)ye.mul(re,W.getLocalTransform(),re),W=W.parent;return ye.invert(re,re),ce.applyTransform(H,H,re),H},b}(G)},9874:(Ut,rt,z)=>{z.d(rt,{Z:()=>Se});var le={\u5357\u6d77\u8bf8\u5c9b:[32,80],\u5e7f\u4e1c:[0,-10],\u9999\u6e2f:[10,5],\u6fb3\u95e8:[-10,10],\u5929\u6d25:[5,5]};function Se(ce,_e){if("china"===ce){var ye=le[_e.name];if(ye){var be=_e.getCenter();be[0]+=ye[0]/10.5,be[1]+=-ye[1]/14,_e.setCenter(be)}}}},5269:(Ut,rt,z)=>{z.d(rt,{Z:()=>be});var le=z(9496),Se=z(3052);function _e(we,de,j){for(var $=0;$<we.length;$++)we[$]=ye(we[$],de[$],j)}function ye(we,de,j){for(var $=[],G=de[0],Z=de[1],te=0;te<we.length;te+=2){var ee=we.charCodeAt(te)-64,Q=we.charCodeAt(te+1)-64;ee=ee>>1^-(1&ee),Q=Q>>1^-(1&Q),G=ee+=G,Z=Q+=Z,$.push([ee/j,Q/j])}return $}function be(we,de){return we=function ce(we){if(!we.UTF8Encoding)return we;var de=we,j=de.UTF8Scale;return null==j&&(j=1024),le.each(de.features,function(G){var Z=G.geometry,te=Z.encodeOffsets,ee=Z.coordinates;if(te)switch(Z.type){case"LineString":Z.coordinates=ye(ee,te,j);break;case"Polygon":case"MultiLineString":_e(ee,te,j);break;case"MultiPolygon":le.each(ee,function(Q,J){return _e(Q,te[J],j)})}}),de.UTF8Encoding=!1,de}(we),le.map(le.filter(we.features,function(j){return j.geometry&&j.properties&&j.geometry.coordinates.length>0}),function(j){var $=j.properties,G=j.geometry,Z=[];switch(G.type){case"Polygon":var te=G.coordinates;Z.push(new Se.Qh(te[0],te.slice(1)));break;case"MultiPolygon":le.each(G.coordinates,function(Q){Q[0]&&Z.push(new Se.Qh(Q[0],Q.slice(1)))});break;case"LineString":Z.push(new Se.jM([G.coordinates]));break;case"MultiLineString":Z.push(new Se.jM(G.coordinates))}var ee=new Se.Ni($[de||"name"],Z,$.cp);return ee.properties=$,ee})}},1017:(Ut,rt,z)=>{z.d(rt,{Qw:()=>be});var le=z(9496),Se=z(9733),ce=function(){function de(j,$,G){this._prepareParams(j,$,G)}return de.prototype._prepareParams=function(j,$,G){G[1]<G[0]&&(G=[NaN,NaN]),this._dataMin=G[0],this._dataMax=G[1];var Z=this._isOrdinal="ordinal"===j.type;this._needCrossZero="interval"===j.type&&$.getNeedCrossZero&&$.getNeedCrossZero();var te=$.get("min",!0);null==te&&(te=$.get("startValue",!0));var ee=this._modelMinRaw=te;(0,le.isFunction)(ee)?this._modelMinNum=we(j,ee({min:G[0],max:G[1]})):"dataMin"!==ee&&(this._modelMinNum=we(j,ee));var Q=this._modelMaxRaw=$.get("max",!0);if((0,le.isFunction)(Q)?this._modelMaxNum=we(j,Q({min:G[0],max:G[1]})):"dataMax"!==Q&&(this._modelMaxNum=we(j,Q)),Z)this._axisDataLen=$.getCategories().length;else{var J=$.get("boundaryGap"),b=(0,le.isArray)(J)?J:[J||0,J||0];this._boundaryGapInner="boolean"==typeof b[0]||"boolean"==typeof b[1]?[0,0]:[(0,Se.GM)(b[0],1),(0,Se.GM)(b[1],1)]}},de.prototype.calculate=function(){var j=this._isOrdinal,$=this._dataMin,G=this._dataMax,Z=this._axisDataLen,te=this._boundaryGapInner,ee=j?null:G-$||Math.abs($),Q="dataMin"===this._modelMinRaw?$:this._modelMinNum,J="dataMax"===this._modelMaxRaw?G:this._modelMaxNum,b=null!=Q,Y=null!=J;null==Q&&(Q=j?Z?0:NaN:$-te[0]*ee),null==J&&(J=j?Z?Z-1:NaN:G+te[1]*ee),(null==Q||!isFinite(Q))&&(Q=NaN),(null==J||!isFinite(J))&&(J=NaN);var q=(0,le.eqNaN)(Q)||(0,le.eqNaN)(J)||j&&!Z;this._needCrossZero&&(Q>0&&J>0&&!b&&(Q=0),Q<0&&J<0&&!Y&&(J=0));var H=this._determinedMin,re=this._determinedMax;return null!=H&&(Q=H,b=!0),null!=re&&(J=re,Y=!0),{min:Q,max:J,minFixed:b,maxFixed:Y,isBlank:q}},de.prototype.modifyDataMinMax=function(j,$){this[ye[j]]=$},de.prototype.setDeterminedMinMax=function(j,$){this[_e[j]]=$},de.prototype.freeze=function(){this.frozen=!0},de}(),_e={min:"_determinedMin",max:"_determinedMax"},ye={min:"_dataMin",max:"_dataMax"};function be(de,j,$){var G=de.rawExtentInfo;return G||(G=new ce(de,j,$),de.rawExtentInfo=G,G)}function we(de,j){return null==j?null:(0,le.eqNaN)(j)?NaN:de.parse(j)}},5566:(Ut,rt,z)=>{z.d(rt,{Z:()=>_e});var le=z(9496),Se={};const _e=function(){function ye(){this._coordinateSystems=[]}return ye.prototype.create=function(be,we){var de=[];le.each(Se,function(j,$){var G=j.create(be,we);de=de.concat(G||[])}),this._coordinateSystems=de},ye.prototype.update=function(be,we){le.each(this._coordinateSystems,function(de){de.update&&de.update(be,we)})},ye.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},ye.register=function(be,we){Se[be]=we},ye.get=function(be){return Se[be]},ye}()},5985:(Ut,rt,z)=>{z.d(rt,{Hr:()=>hs,$j:()=>fs,Ok:()=>Gv,HO:()=>Bv,eU:()=>Fr,zP:()=>zn,B9:()=>Yi,wL:()=>ap,JE:()=>Io,rp:()=>Zl,FU:()=>Hi,S1:()=>Ao,zl:()=>el,RS:()=>Oc,qR:()=>kc,yn:()=>ps,I2:()=>Ks.I2,je:()=>Uv,sq:()=>pu,Br:()=>Xl,ds:()=>Yl,Pu:()=>ra,aW:()=>ha,OB:()=>o0,YK:()=>zr,Og:()=>ia,jQ:()=>Fc,i8:()=>HC});var le=z(5845),Se=z(315),ce=z(9496),_e=z(9420),ye=z(445),be=z(6735),we=z(2846),de=z(1363),j=z(8103),$="";typeof navigator<"u"&&($=navigator.platform||"");var G="rgba(0, 0, 0, 0.2)";const Z={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:G,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:G,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:G,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:G,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:G,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:G,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:$.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var J,b,Y,te=z(3957),ee=z(7920),Q=z(6468),q="\0_ec_inner",B=function(Oe){function Ge(){return null!==Oe&&Oe.apply(this,arguments)||this}return(0,le.ZT)(Ge,Oe),Ge.prototype.init=function(Le,Ue,Xe,nt,pt,zt){nt=nt||{},this.option=null,this._theme=new de.Z(nt),this._locale=new de.Z(pt),this._optionManager=zt},Ge.prototype.setOption=function(Le,Ue,Xe){var nt=T(Ue);this._optionManager.setOption(Le,Xe,nt),this._resetOption(null,nt)},Ge.prototype.resetOption=function(Le,Ue){return this._resetOption(Le,T(Ue))},Ge.prototype._resetOption=function(Le,Ue){var Xe=!1,nt=this._optionManager;if(!Le||"recreate"===Le){var pt=nt.mountOption("recreate"===Le);this.option&&"recreate"!==Le?(this.restoreData(),this._mergeOption(pt,Ue)):Y(this,pt),Xe=!0}if(("timeline"===Le||"media"===Le)&&this.restoreData(),!Le||"recreate"===Le||"timeline"===Le){var zt=nt.getTimelineOption(this);zt&&(Xe=!0,this._mergeOption(zt,Ue))}if(!Le||"recreate"===Le||"media"===Le){var Pt=nt.getMediaOption(this);Pt.length&&(0,ce.each)(Pt,function(tn){Xe=!0,this._mergeOption(tn,Ue)},this)}return Xe},Ge.prototype.mergeOption=function(Le){this._mergeOption(Le,null)},Ge.prototype._mergeOption=function(Le,Ue){var Xe=this.option,nt=this._componentsMap,pt=this._componentsCount,zt=[],Pt=(0,ce.createHashMap)(),tn=Ue&&Ue.replaceMergeMainTypeMap;(0,te.md)(this),(0,ce.each)(Le,function(ut,Dt){null!=ut&&(j.Z.hasClass(Dt)?Dt&&(zt.push(Dt),Pt.set(Dt,!0)):Xe[Dt]=null==Xe[Dt]?(0,ce.clone)(ut):(0,ce.merge)(Xe[Dt],ut,!0))}),tn&&tn.each(function(ut,Dt){j.Z.hasClass(Dt)&&!Pt.get(Dt)&&(zt.push(Dt),Pt.set(Dt,!0))}),j.Z.topologicalTravel(zt,j.Z.getAllClassMainTypes(),function xn(ut){var Dt=(0,ee.R)(this,ut,we.kF(Le[ut])),bt=nt.get(ut),Bt=bt?tn&&tn.get(ut)?"replaceMerge":"normalMerge":"replaceAll",$t=we.ab(bt,Dt,Bt);we.O0($t,ut,j.Z),Xe[ut]=null,nt.set(ut,null),pt.set(ut,0);var kn,hn=[],Cn=[],Hn=0;(0,ce.each)($t,function(Zr,nr){var _i=Zr.existing,za=Zr.newOption;if(za){var eo=j.Z.getClass(ut,Zr.keyInfo.subType,!("series"===ut));if(!eo)return;if("tooltip"===ut){if(kn)return;kn=!0}if(_i&&_i.constructor===eo)_i.name=Zr.keyInfo.name,_i.mergeOption(za,this),_i.optionUpdated(za,!1);else{var gh=(0,ce.extend)({componentIndex:nr},Zr.keyInfo);_i=new eo(za,this,this,gh),(0,ce.extend)(_i,gh),Zr.brandNew&&(_i.__requireNewView=!0),_i.init(za,this,this),_i.optionUpdated(null,!0)}}else _i&&(_i.mergeOption({},this),_i.optionUpdated({},!1));_i?(hn.push(_i.option),Cn.push(_i),Hn++):(hn.push(void 0),Cn.push(void 0))},this),Xe[ut]=hn,nt.set(ut,Cn),pt.set(ut,Hn),"series"===ut&&J(this)},this),this._seriesIndices||J(this)},Ge.prototype.getOption=function(){var Le=(0,ce.clone)(this.option);return(0,ce.each)(Le,function(Ue,Xe){if(j.Z.hasClass(Xe)){for(var nt=we.kF(Ue),pt=nt.length,zt=!1,Pt=pt-1;Pt>=0;Pt--)nt[Pt]&&!we.lY(nt[Pt])?zt=!0:(nt[Pt]=null,!zt&&pt--);nt.length=pt,Le[Xe]=nt}}),delete Le[q],Le},Ge.prototype.getTheme=function(){return this._theme},Ge.prototype.getLocaleModel=function(){return this._locale},Ge.prototype.setUpdatePayload=function(Le){this._payload=Le},Ge.prototype.getUpdatePayload=function(){return this._payload},Ge.prototype.getComponent=function(Le,Ue){var Xe=this._componentsMap.get(Le);if(Xe){var nt=Xe[Ue||0];if(nt)return nt;if(null==Ue)for(var pt=0;pt<Xe.length;pt++)if(Xe[pt])return Xe[pt]}},Ge.prototype.queryComponents=function(Le){var Ue=Le.mainType;if(!Ue)return[];var Pt,Xe=Le.index,nt=Le.id,pt=Le.name,zt=this._componentsMap.get(Ue);return zt&&zt.length?(null!=Xe?(Pt=[],(0,ce.each)(we.kF(Xe),function(tn){zt[tn]&&Pt.push(zt[tn])})):Pt=null!=nt?P("id",nt,zt):null!=pt?P("name",pt,zt):(0,ce.filter)(zt,function(tn){return!!tn}),I(Pt,Le)):[]},Ge.prototype.findComponents=function(Le){var Xe=Le.mainType,nt=function zt(tn){var xn=Xe+"Index",ut=Xe+"Id",Dt=Xe+"Name";return!tn||null==tn[xn]&&null==tn[ut]&&null==tn[Dt]?null:{mainType:Xe,index:tn[xn],id:tn[ut],name:tn[Dt]}}(Le.query);return function Pt(tn){return Le.filter?(0,ce.filter)(tn,Le.filter):tn}(I(nt?this.queryComponents(nt):(0,ce.filter)(this._componentsMap.get(Xe),function(tn){return!!tn}),Le))},Ge.prototype.eachComponent=function(Le,Ue,Xe){var nt=this._componentsMap;if((0,ce.isFunction)(Le)){var pt=Ue,zt=Le;nt.each(function(ut,Dt){for(var bt=0;ut&&bt<ut.length;bt++){var Bt=ut[bt];Bt&&zt.call(pt,Dt,Bt,Bt.componentIndex)}})}else for(var Pt=(0,ce.isString)(Le)?nt.get(Le):(0,ce.isObject)(Le)?this.findComponents(Le):null,tn=0;Pt&&tn<Pt.length;tn++){var xn=Pt[tn];xn&&Ue.call(Xe,xn,xn.componentIndex)}},Ge.prototype.getSeriesByName=function(Le){var Ue=we.U5(Le,null);return(0,ce.filter)(this._componentsMap.get("series"),function(Xe){return!!Xe&&null!=Ue&&Xe.name===Ue})},Ge.prototype.getSeriesByIndex=function(Le){return this._componentsMap.get("series")[Le]},Ge.prototype.getSeriesByType=function(Le){return(0,ce.filter)(this._componentsMap.get("series"),function(Ue){return!!Ue&&Ue.subType===Le})},Ge.prototype.getSeries=function(){return(0,ce.filter)(this._componentsMap.get("series"),function(Le){return!!Le})},Ge.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},Ge.prototype.eachSeries=function(Le,Ue){b(this),(0,ce.each)(this._seriesIndices,function(Xe){var nt=this._componentsMap.get("series")[Xe];Le.call(Ue,nt,Xe)},this)},Ge.prototype.eachRawSeries=function(Le,Ue){(0,ce.each)(this._componentsMap.get("series"),function(Xe){Xe&&Le.call(Ue,Xe,Xe.componentIndex)})},Ge.prototype.eachSeriesByType=function(Le,Ue,Xe){b(this),(0,ce.each)(this._seriesIndices,function(nt){var pt=this._componentsMap.get("series")[nt];pt.subType===Le&&Ue.call(Xe,pt,nt)},this)},Ge.prototype.eachRawSeriesByType=function(Le,Ue,Xe){return(0,ce.each)(this.getSeriesByType(Le),Ue,Xe)},Ge.prototype.isSeriesFiltered=function(Le){return b(this),null==this._seriesIndicesMap.get(Le.componentIndex)},Ge.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},Ge.prototype.filterSeries=function(Le,Ue){b(this);var Xe=[];(0,ce.each)(this._seriesIndices,function(nt){var pt=this._componentsMap.get("series")[nt];Le.call(Ue,pt,nt)&&Xe.push(nt)},this),this._seriesIndices=Xe,this._seriesIndicesMap=(0,ce.createHashMap)(Xe)},Ge.prototype.restoreData=function(Le){J(this);var Ue=this._componentsMap,Xe=[];Ue.each(function(nt,pt){j.Z.hasClass(pt)&&Xe.push(pt)}),j.Z.topologicalTravel(Xe,j.Z.getAllClassMainTypes(),function(nt){(0,ce.each)(Ue.get(nt),function(pt){pt&&("series"!==nt||!function O(Oe,Ge){if(Ge){var Le=Ge.seriesIndex,Ue=Ge.seriesId,Xe=Ge.seriesName;return null!=Le&&Oe.componentIndex!==Le||null!=Ue&&Oe.id!==Ue||null!=Xe&&Oe.name!==Xe}}(pt,Le))&&pt.restoreData()})})},Ge.internalField=(J=function(Le){var Ue=Le._seriesIndices=[];(0,ce.each)(Le._componentsMap.get("series"),function(Xe){Xe&&Ue.push(Xe.componentIndex)}),Le._seriesIndicesMap=(0,ce.createHashMap)(Ue)},b=function(Le){},void(Y=function(Le,Ue){Le.option={},Le.option[q]=1,Le._componentsMap=(0,ce.createHashMap)({series:[]}),Le._componentsCount=(0,ce.createHashMap)();var Xe=Ue.aria;(0,ce.isObject)(Xe)&&null==Xe.enabled&&(Xe.enabled=!0),function D(Oe,Ge){var Le=Oe.color&&!Oe.colorLayer;(0,ce.each)(Ge,function(Ue,Xe){"colorLayer"===Xe&&Le||j.Z.hasClass(Xe)||("object"==typeof Ue?Oe[Xe]=Oe[Xe]?(0,ce.merge)(Oe[Xe],Ue,!1):(0,ce.clone)(Ue):null==Oe[Xe]&&(Oe[Xe]=Ue))})}(Ue,Le._theme.option),(0,ce.merge)(Ue,Z,!1),Le._mergeOption(Ue,null)})),Ge}(de.Z);function P(Oe,Ge,Le){if((0,ce.isArray)(Ge)){var Ue=(0,ce.createHashMap)();return(0,ce.each)(Ge,function(nt){null!=nt&&null!=we.U5(nt,null)&&Ue.set(nt,!0)}),(0,ce.filter)(Le,function(nt){return nt&&Ue.get(nt[Oe])})}var Xe=we.U5(Ge,null);return(0,ce.filter)(Le,function(nt){return nt&&null!=Xe&&nt[Oe]===Xe})}function I(Oe,Ge){return Ge.hasOwnProperty("subType")?(0,ce.filter)(Oe,function(Le){return Le&&Le.subType===Ge.subType}):Oe}function T(Oe){var Ge=(0,ce.createHashMap)();return Oe&&(0,ce.each)(we.kF(Oe.replaceMerge),function(Le){Ge.set(Le,!0)}),{replaceMergeMainTypeMap:Ge}}(0,ce.mixin)(B,Q._);const A=B;var L=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"];const ie=function Oe(Ge){ce.each(L,function(Le){this[Le]=ce.bind(Ge[Le],Ge)},this)};var oe=z(5566),ae=/^(min|max)?(.+)$/;function xe(Oe,Ge,Le){var Ue={width:Ge,height:Le,aspectratio:Ge/Le},Xe=!0;return(0,ce.each)(Oe,function(nt,pt){var zt=pt.match(ae);if(zt&&zt[1]&&zt[2]){var Pt=zt[1],tn=zt[2].toLowerCase();(function fe(Oe,Ge,Le){return"min"===Le?Oe>=Ge:"max"===Le?Oe<=Ge:Oe===Ge})(Ue[tn],nt,Pt)||(Xe=!1)}}),Xe}const Ce=function(){function Oe(Ge){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=Ge}return Oe.prototype.setOption=function(Ge,Le,Ue){Ge&&((0,ce.each)((0,we.kF)(Ge.series),function(pt){pt&&pt.data&&(0,ce.isTypedArray)(pt.data)&&(0,ce.setAsPrimitive)(pt.data)}),(0,ce.each)((0,we.kF)(Ge.dataset),function(pt){pt&&pt.source&&(0,ce.isTypedArray)(pt.source)&&(0,ce.setAsPrimitive)(pt.source)})),Ge=(0,ce.clone)(Ge);var Xe=this._optionBackup,nt=function se(Oe,Ge,Le){var Xe,nt,Ue=[],pt=Oe.baseOption,zt=Oe.timeline,Pt=Oe.options,tn=Oe.media,xn=!!Oe.media,ut=!!(Pt||zt||pt&&pt.timeline);function Dt(bt){(0,ce.each)(Ge,function(Bt){Bt(bt,Le)})}return pt?(nt=pt).timeline||(nt.timeline=zt):((ut||xn)&&(Oe.options=Oe.media=null),nt=Oe),xn&&(0,ce.isArray)(tn)&&(0,ce.each)(tn,function(bt){bt&&bt.option&&(bt.query?Ue.push(bt):Xe||(Xe=bt))}),Dt(nt),(0,ce.each)(Pt,function(bt){return Dt(bt)}),(0,ce.each)(Ue,function(bt){return Dt(bt.option)}),{baseOption:nt,timelineOptions:Pt||[],mediaDefault:Xe,mediaList:Ue}}(Ge,Le,!Xe);this._newBaseOption=nt.baseOption,Xe?(nt.timelineOptions.length&&(Xe.timelineOptions=nt.timelineOptions),nt.mediaList.length&&(Xe.mediaList=nt.mediaList),nt.mediaDefault&&(Xe.mediaDefault=nt.mediaDefault)):this._optionBackup=nt},Oe.prototype.mountOption=function(Ge){var Le=this._optionBackup;return this._timelineOptions=Le.timelineOptions,this._mediaList=Le.mediaList,this._mediaDefault=Le.mediaDefault,this._currentMediaIndices=[],(0,ce.clone)(Ge?Le.baseOption:this._newBaseOption)},Oe.prototype.getTimelineOption=function(Ge){var Le,Ue=this._timelineOptions;if(Ue.length){var Xe=Ge.getComponent("timeline");Xe&&(Le=(0,ce.clone)(Ue[Xe.getCurrentIndex()]))}return Le},Oe.prototype.getMediaOption=function(Ge){var Le=this._api.getWidth(),Ue=this._api.getHeight(),Xe=this._mediaList,nt=this._mediaDefault,pt=[],zt=[];if(!Xe.length&&!nt)return zt;for(var Pt=0,tn=Xe.length;Pt<tn;Pt++)xe(Xe[Pt].query,Le,Ue)&&pt.push(Pt);return!pt.length&&nt&&(pt=[-1]),pt.length&&!function ge(Oe,Ge){return Oe.join(",")===Ge.join(",")}(pt,this._currentMediaIndices)&&(zt=(0,ce.map)(pt,function(xn){return(0,ce.clone)(-1===xn?nt.option:Xe[xn].option)})),this._currentMediaIndices=pt,zt},Oe}();var Te=ce.each,Ie=ce.isObject,Ee=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function Ve(Oe){var Ge=Oe&&Oe.itemStyle;if(Ge)for(var Le=0,Ue=Ee.length;Le<Ue;Le++){var Xe=Ee[Le],nt=Ge.normal,pt=Ge.emphasis;nt&&nt[Xe]&&(Oe[Xe]=Oe[Xe]||{},Oe[Xe].normal?ce.merge(Oe[Xe].normal,nt[Xe]):Oe[Xe].normal=nt[Xe],nt[Xe]=null),pt&&pt[Xe]&&(Oe[Xe]=Oe[Xe]||{},Oe[Xe].emphasis?ce.merge(Oe[Xe].emphasis,pt[Xe]):Oe[Xe].emphasis=pt[Xe],pt[Xe]=null)}}function ze(Oe,Ge,Le){if(Oe&&Oe[Ge]&&(Oe[Ge].normal||Oe[Ge].emphasis)){var Ue=Oe[Ge].normal,Xe=Oe[Ge].emphasis;Ue&&(Le?(Oe[Ge].normal=Oe[Ge].emphasis=null,ce.defaults(Oe[Ge],Ue)):Oe[Ge]=Ue),Xe&&(Oe.emphasis=Oe.emphasis||{},Oe.emphasis[Ge]=Xe,Xe.focus&&(Oe.emphasis.focus=Xe.focus),Xe.blurScope&&(Oe.emphasis.blurScope=Xe.blurScope))}}function We(Oe){ze(Oe,"itemStyle"),ze(Oe,"lineStyle"),ze(Oe,"areaStyle"),ze(Oe,"label"),ze(Oe,"labelLine"),ze(Oe,"upperLabel"),ze(Oe,"edgeLabel")}function tt(Oe,Ge){var Le=Ie(Oe)&&Oe[Ge],Ue=Ie(Le)&&Le.textStyle;if(Ue)for(var Xe=0,nt=we.Td.length;Xe<nt;Xe++){var pt=we.Td[Xe];Ue.hasOwnProperty(pt)&&(Le[pt]=Ue[pt])}}function st(Oe){Oe&&(We(Oe),tt(Oe,"label"),Oe.emphasis&&tt(Oe.emphasis,"label"))}function At(Oe){return ce.isArray(Oe)?Oe:Oe?[Oe]:[]}function Vt(Oe){return(ce.isArray(Oe)?Oe[0]:Oe)||{}}function wn(Oe){Oe&&(0,ce.each)(sr,function(Ge){Ge[0]in Oe&&!(Ge[1]in Oe)&&(Oe[Ge[1]]=Oe[Ge[0]])})}var sr=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Xn=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],pr=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function rr(Oe){var Ge=Oe&&Oe.itemStyle;if(Ge)for(var Le=0;Le<pr.length;Le++){var Ue=pr[Le][1];null!=Ge[Ue]&&(Ge[pr[Le][0]]=Ge[Ue])}}function Qt(Oe){!Oe||"edge"===Oe.alignTo&&null!=Oe.margin&&null==Oe.edgeDistance&&(Oe.edgeDistance=Oe.margin)}function un(Oe){!Oe||Oe.downplay&&!Oe.blur&&(Oe.blur=Oe.downplay)}function Nn(Oe,Ge){if(Oe)for(var Le=0;Le<Oe.length;Le++)Ge(Oe[Le]),Oe[Le]&&Nn(Oe[Le].children,Ge)}function jn(Oe,Ge){(function Wt(Oe,Ge){Te(At(Oe.series),function(Ue){Ie(Ue)&&function Tt(Oe){if(Ie(Oe)){Ve(Oe),We(Oe),tt(Oe,"label"),tt(Oe,"upperLabel"),tt(Oe,"edgeLabel"),Oe.emphasis&&(tt(Oe.emphasis,"label"),tt(Oe.emphasis,"upperLabel"),tt(Oe.emphasis,"edgeLabel"));var Ge=Oe.markPoint;Ge&&(Ve(Ge),st(Ge));var Le=Oe.markLine;Le&&(Ve(Le),st(Le));var Ue=Oe.markArea;Ue&&st(Ue);var Xe=Oe.data;if("graph"===Oe.type){Xe=Xe||Oe.nodes;var nt=Oe.links||Oe.edges;if(nt&&!ce.isTypedArray(nt))for(var pt=0;pt<nt.length;pt++)st(nt[pt]);ce.each(Oe.categories,function(tn){We(tn)})}if(Xe&&!ce.isTypedArray(Xe))for(pt=0;pt<Xe.length;pt++)st(Xe[pt]);if((Ge=Oe.markPoint)&&Ge.data){var zt=Ge.data;for(pt=0;pt<zt.length;pt++)st(zt[pt])}if((Le=Oe.markLine)&&Le.data){var Pt=Le.data;for(pt=0;pt<Pt.length;pt++)ce.isArray(Pt[pt])?(st(Pt[pt][0]),st(Pt[pt][1])):st(Pt[pt])}"gauge"===Oe.type?(tt(Oe,"axisLabel"),tt(Oe,"title"),tt(Oe,"detail")):"treemap"===Oe.type?(ze(Oe.breadcrumb,"itemStyle"),ce.each(Oe.levels,function(tn){We(tn)})):"tree"===Oe.type&&We(Oe.leaves)}}(Ue)});var Le=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];Ge&&Le.push("valueAxis","categoryAxis","logAxis","timeAxis"),Te(Le,function(Ue){Te(At(Oe[Ue]),function(Xe){Xe&&(tt(Xe,"axisLabel"),tt(Xe.axisPointer,"label"))})}),Te(At(Oe.parallel),function(Ue){var Xe=Ue&&Ue.parallelAxisDefault;tt(Xe,"axisLabel"),tt(Xe&&Xe.axisPointer,"label")}),Te(At(Oe.calendar),function(Ue){ze(Ue,"itemStyle"),tt(Ue,"dayLabel"),tt(Ue,"monthLabel"),tt(Ue,"yearLabel")}),Te(At(Oe.radar),function(Ue){tt(Ue,"name"),Ue.name&&null==Ue.axisName&&(Ue.axisName=Ue.name,delete Ue.name),null!=Ue.nameGap&&null==Ue.axisNameGap&&(Ue.axisNameGap=Ue.nameGap,delete Ue.nameGap)}),Te(At(Oe.geo),function(Ue){Ie(Ue)&&(st(Ue),Te(At(Ue.regions),function(Xe){st(Xe)}))}),Te(At(Oe.timeline),function(Ue){st(Ue),ze(Ue,"label"),ze(Ue,"itemStyle"),ze(Ue,"controlStyle",!0);var Xe=Ue.data;ce.isArray(Xe)&&ce.each(Xe,function(nt){ce.isObject(nt)&&(ze(nt,"label"),ze(nt,"itemStyle"))})}),Te(At(Oe.toolbox),function(Ue){ze(Ue,"iconStyle"),Te(Ue.feature,function(Xe){ze(Xe,"iconStyle")})}),tt(Vt(Oe.axisPointer),"label"),tt(Vt(Oe.tooltip).axisPointer,"label")})(Oe,Ge),Oe.series=(0,we.kF)(Oe.series),(0,ce.each)(Oe.series,function(Le){if((0,ce.isObject)(Le)){var Ue=Le.type;if("line"===Ue)null!=Le.clipOverflow&&(Le.clip=Le.clipOverflow);else if("pie"===Ue||"gauge"===Ue){if(null!=Le.clockWise&&(Le.clockwise=Le.clockWise),Qt(Le.label),(Xe=Le.data)&&!(0,ce.isTypedArray)(Xe))for(var nt=0;nt<Xe.length;nt++)Qt(Xe[nt]);null!=Le.hoverOffset&&(Le.emphasis=Le.emphasis||{},(Le.emphasis.scaleSize=null)&&(Le.emphasis.scaleSize=Le.hoverOffset))}else if("gauge"===Ue){var pt=function kt(Oe,Ge){for(var Le=Ge.split(","),Ue=Oe,Xe=0;Xe<Le.length&&null!=(Ue=Ue&&Ue[Le[Xe]]);Xe++);return Ue}(Le,"pointer.color");null!=pt&&function fn(Oe,Ge,Le,Ue){for(var pt,Xe=Ge.split(","),nt=Oe,zt=0;zt<Xe.length-1;zt++)null==nt[pt=Xe[zt]]&&(nt[pt]={}),nt=nt[pt];(Ue||null==nt[Xe[zt]])&&(nt[Xe[zt]]=Le)}(Le,"itemStyle.color",pt)}else if("bar"===Ue){var Xe;if(rr(Le),rr(Le.backgroundStyle),rr(Le.emphasis),(Xe=Le.data)&&!(0,ce.isTypedArray)(Xe))for(nt=0;nt<Xe.length;nt++)"object"==typeof Xe[nt]&&(rr(Xe[nt]),rr(Xe[nt]&&Xe[nt].emphasis))}else if("sunburst"===Ue){var zt=Le.highlightPolicy;zt&&(Le.emphasis=Le.emphasis||{},Le.emphasis.focus||(Le.emphasis.focus=zt)),un(Le),Nn(Le.data,un)}else"graph"===Ue||"sankey"===Ue?function Pn(Oe){!Oe||null!=Oe.focusNodeAdjacency&&(Oe.emphasis=Oe.emphasis||{},null==Oe.emphasis.focus&&(Oe.emphasis.focus="adjacency"))}(Le):"map"===Ue&&(Le.mapType&&!Le.map&&(Le.map=Le.mapType),Le.mapLocation&&(0,ce.defaults)(Le,Le.mapLocation));null!=Le.hoverAnimation&&(Le.emphasis=Le.emphasis||{},Le.emphasis&&null==Le.emphasis.scale&&(Le.emphasis.scale=Le.hoverAnimation)),wn(Le)}}),Oe.dataRange&&(Oe.visualMap=Oe.dataRange),(0,ce.each)(Xn,function(Le){var Ue=Oe[Le];Ue&&((0,ce.isArray)(Ue)||(Ue=[Ue]),(0,ce.each)(Ue,function(Xe){wn(Xe)}))})}var xr=z(10);function Je(Oe){(0,ce.each)(Oe,function(Ge,Le){var Ue=[],Xe=[NaN,NaN],nt=[Ge.stackResultDimension,Ge.stackedOverDimension],pt=Ge.data,zt=Ge.isStackedByIndex,Pt=Ge.seriesModel.get("stackStrategy")||"samesign";pt.modify(nt,function(tn,xn,ut){var bt,Bt,Dt=pt.get(Ge.stackedDimension,ut);if(isNaN(Dt))return Xe;zt?Bt=pt.getRawIndex(ut):bt=pt.get(Ge.stackedByDimension,ut);for(var $t=NaN,hn=Le-1;hn>=0;hn--){var Cn=Oe[hn];if(zt||(Bt=Cn.data.rawIndexOf(Cn.stackedByDimension,bt)),Bt>=0){var Hn=Cn.data.getByRawIndex(Cn.stackResultDimension,Bt);if("all"===Pt||"positive"===Pt&&Hn>0||"negative"===Pt&&Hn<0||"samesign"===Pt&&Dt>=0&&Hn>0||"samesign"===Pt&&Dt<=0&&Hn<0){Dt=(0,xr.S$)(Dt,Hn),$t=Hn;break}}}return Ue[0]=Dt,Ue[1]=$t,Ue})})}var wt=z(9462),nn=z(9314),Xt=z(7136),dt=z(7952),Lt=z(6115),qt=z(8646),Ze=z(5489),et=z(1096),$e=z(4372),mt=z(4658),Zt=z(498),vn=z(6960),mn=z(5105),Rn=(0,we.Yf)(),ur={itemStyle:(0,Zt.Z)(vn.t,!0),lineStyle:(0,Zt.Z)(mn.v,!0)},Zi={lineStyle:"stroke",itemStyle:"fill"};function Li(Oe,Ge){return Oe.visualStyleMapper||ur[Ge]||(console.warn("Unknown style type '"+Ge+"'."),ur.itemStyle)}function qa(Oe,Ge){return Oe.visualDrawType||Zi[Ge]||(console.warn("Unknown style type '"+Ge+"'."),"fill")}var ea={createOnAllSeries:!0,performRawSeries:!0,reset:function(Oe,Ge){var Le=Oe.getData(),Ue=Oe.visualStyleAccessPath||"itemStyle",Xe=Oe.getModel(Ue),pt=Li(Oe,Ue)(Xe),zt=Xe.getShallow("decal");zt&&(Le.setVisual("decal",zt),zt.dirty=!0);var Pt=qa(Oe,Ue),tn=pt[Pt],xn=(0,ce.isFunction)(tn)?tn:null;if(!pt[Pt]||xn||"auto"===pt.fill||"auto"===pt.stroke){var Dt=Oe.getColorFromPalette(Oe.name,null,Ge.getSeriesCount());pt[Pt]||(pt[Pt]=Dt,Le.setVisual("colorFromPalette",!0)),pt.fill="auto"===pt.fill||(0,ce.isFunction)(pt.fill)?Dt:pt.fill,pt.stroke="auto"===pt.stroke||(0,ce.isFunction)(pt.stroke)?Dt:pt.stroke}if(Le.setVisual("style",pt),Le.setVisual("drawType",Pt),!Ge.isSeriesFiltered(Oe)&&xn)return Le.setVisual("colorFromPalette",!1),{dataEach:function(bt,Bt){var $t=Oe.getDataParams(Bt),hn=(0,ce.extend)({},pt);hn[Pt]=xn($t),bt.setItemVisual(Bt,"style",hn)}}}},co=new de.Z,Ea={createOnAllSeries:!0,performRawSeries:!0,reset:function(Oe,Ge){if(!Oe.ignoreStyleOnData&&!Ge.isSeriesFiltered(Oe)){var Le=Oe.getData(),Ue=Oe.visualStyleAccessPath||"itemStyle",Xe=Li(Oe,Ue),nt=Le.getVisual("drawType");return{dataEach:Le.hasItemOption?function(pt,zt){var Pt=pt.getRawDataItem(zt);if(Pt&&Pt[Ue]){co.option=Pt[Ue];var tn=Xe(co),xn=pt.ensureUniqueItemVisual(zt,"style");(0,ce.extend)(xn,tn),co.option.decal&&(pt.setItemVisual(zt,"decal",co.option.decal),co.option.decal.dirty=!0),nt in tn&&pt.setItemVisual(zt,"colorFromPalette",!1)}}:null}}}},Iv={performRawSeries:!0,overallReset:function(Oe){var Ge=(0,ce.createHashMap)();Oe.eachSeries(function(Le){var Ue=Le.getColorBy();if(!Le.isColorBySeries()){var Xe=Le.type+"-"+Ue,nt=Ge.get(Xe);nt||Ge.set(Xe,nt={}),Rn(Le).scope=nt}}),Oe.eachSeries(function(Le){if(!Le.isColorBySeries()&&!Oe.isSeriesFiltered(Le)){var Ue=Le.getRawData(),Xe={},nt=Le.getData(),pt=Rn(Le).scope,Pt=qa(Le,Le.visualStyleAccessPath||"itemStyle");nt.each(function(tn){var xn=nt.getRawIndex(tn);Xe[xn]=tn}),Ue.each(function(tn){var xn=Xe[tn];if(nt.getItemVisual(xn,"colorFromPalette")){var Dt=nt.ensureUniqueItemVisual(xn,"style"),bt=Ue.getName(tn)||tn+"",Bt=Ue.count();Dt[Pt]=Le.getColorFromPalette(bt,pt,Bt)}})}})}},Bu=z(189),Vu=z(997),Pv=z(598),Gl=Math.PI,Kf=z(9466),Ms=z(102),Xs=function(){function Oe(Ge,Le,Ue,Xe){this._stageTaskMap=(0,ce.createHashMap)(),this.ecInstance=Ge,this.api=Le,Ue=this._dataProcessorHandlers=Ue.slice(),Xe=this._visualHandlers=Xe.slice(),this._allHandlers=Ue.concat(Xe)}return Oe.prototype.restoreData=function(Ge,Le){Ge.restoreData(Le),this._stageTaskMap.each(function(Ue){var Xe=Ue.overallTask;Xe&&Xe.dirty()})},Oe.prototype.getPerformArgs=function(Ge,Le){if(Ge.__pipeline){var Ue=this._pipelineMap.get(Ge.__pipeline.id),Xe=Ue.context,pt=!Le&&Ue.progressiveEnabled&&(!Xe||Xe.progressiveRender)&&Ge.__idxInPipeline>Ue.blockIndex?Ue.step:null,zt=Xe&&Xe.modDataCount;return{step:pt,modBy:null!=zt?Math.ceil(zt/pt):null,modDataCount:zt}}},Oe.prototype.getPipeline=function(Ge){return this._pipelineMap.get(Ge)},Oe.prototype.updateStreamModes=function(Ge,Le){var Ue=this._pipelineMap.get(Ge.uid),nt=Ge.getData().count(),pt=Ue.progressiveEnabled&&Le.incrementalPrepareRender&&nt>=Ue.threshold,zt=Ge.get("large")&&nt>=Ge.get("largeThreshold"),Pt="mod"===Ge.get("progressiveChunkMode")?nt:null;Ge.pipelineContext=Ue.context={progressiveRender:pt,modDataCount:Pt,large:zt}},Oe.prototype.restorePipelines=function(Ge){var Le=this,Ue=Le._pipelineMap=(0,ce.createHashMap)();Ge.eachSeries(function(Xe){var nt=Xe.getProgressive(),pt=Xe.uid;Ue.set(pt,{id:pt,head:null,tail:null,threshold:Xe.getProgressiveThreshold(),progressiveEnabled:nt&&!(Xe.preventIncremental&&Xe.preventIncremental()),blockIndex:-1,step:Math.round(nt||700),count:0}),Le._pipe(Xe,Xe.dataTask)})},Oe.prototype.prepareStageTasks=function(){var Ge=this._stageTaskMap,Le=this.api.getModel(),Ue=this.api;(0,ce.each)(this._allHandlers,function(Xe){var nt=Ge.get(Xe.uid)||Ge.set(Xe.uid,{});(0,ce.assert)(!(Xe.reset&&Xe.overallReset),""),Xe.reset&&this._createSeriesStageTask(Xe,nt,Le,Ue),Xe.overallReset&&this._createOverallStageTask(Xe,nt,Le,Ue)},this)},Oe.prototype.prepareView=function(Ge,Le,Ue,Xe){var nt=Ge.renderTask,pt=nt.context;pt.model=Le,pt.ecModel=Ue,pt.api=Xe,nt.__block=!Ge.incrementalPrepareRender,this._pipe(Le,nt)},Oe.prototype.performDataProcessorTasks=function(Ge,Le){this._performStageTasks(this._dataProcessorHandlers,Ge,Le,{block:!0})},Oe.prototype.performVisualTasks=function(Ge,Le,Ue){this._performStageTasks(this._visualHandlers,Ge,Le,Ue)},Oe.prototype._performStageTasks=function(Ge,Le,Ue,Xe){Xe=Xe||{};var nt=!1,pt=this;function zt(Pt,tn){return Pt.setDirty&&(!Pt.dirtyMap||Pt.dirtyMap.get(tn.__pipeline.id))}(0,ce.each)(Ge,function(Pt,tn){if(!Xe.visualType||Xe.visualType===Pt.visualType){var xn=pt._stageTaskMap.get(Pt.uid),ut=xn.seriesTaskMap,Dt=xn.overallTask;if(Dt){var bt,Bt=Dt.agentStubMap;Bt.each(function(hn){zt(Xe,hn)&&(hn.dirty(),bt=!0)}),bt&&Dt.dirty(),pt.updatePayload(Dt,Ue);var $t=pt.getPerformArgs(Dt,Xe.block);Bt.each(function(hn){hn.perform($t)}),Dt.perform($t)&&(nt=!0)}else ut&&ut.each(function(hn,Cn){zt(Xe,hn)&&hn.dirty();var Hn=pt.getPerformArgs(hn,Xe.block);Hn.skip=!Pt.performRawSeries&&Le.isSeriesFiltered(hn.context.model),pt.updatePayload(hn,Ue),hn.perform(Hn)&&(nt=!0)})}}),this.unfinished=nt||this.unfinished},Oe.prototype.performSeriesTasks=function(Ge){var Le;Ge.eachSeries(function(Ue){Le=Ue.dataTask.perform()||Le}),this.unfinished=Le||this.unfinished},Oe.prototype.plan=function(){this._pipelineMap.each(function(Ge){var Le=Ge.tail;do{if(Le.__block){Ge.blockIndex=Le.__idxInPipeline;break}Le=Le.getUpstream()}while(Le)})},Oe.prototype.updatePayload=function(Ge,Le){"remain"!==Le&&(Ge.context.payload=Le)},Oe.prototype._createSeriesStageTask=function(Ge,Le,Ue,Xe){var nt=this,pt=Le.seriesTaskMap,zt=Le.seriesTaskMap=(0,ce.createHashMap)(),Pt=Ge.seriesType,tn=Ge.getTargetSeries;function xn(ut){var Dt=ut.uid,bt=zt.set(Dt,pt&&pt.get(Dt)||(0,Kf.v)({plan:oh,reset:sh,count:zu}));bt.context={model:ut,ecModel:Ue,api:Xe,useClearVisual:Ge.isVisual&&!Ge.isLayout,plan:Ge.plan,reset:Ge.reset,scheduler:nt},nt._pipe(ut,bt)}Ge.createOnAllSeries?Ue.eachRawSeries(xn):Pt?Ue.eachRawSeriesByType(Pt,xn):tn&&tn(Ue,Xe).each(xn)},Oe.prototype._createOverallStageTask=function(Ge,Le,Ue,Xe){var nt=this,pt=Le.overallTask=Le.overallTask||(0,Kf.v)({reset:Fa});pt.context={ecModel:Ue,api:Xe,overallReset:Ge.overallReset,scheduler:nt};var zt=pt.agentStubMap,Pt=pt.agentStubMap=(0,ce.createHashMap)(),tn=Ge.seriesType,xn=Ge.getTargetSeries,ut=!0,Dt=!1;function Bt($t){var hn=$t.uid,Cn=Pt.set(hn,zt&&zt.get(hn)||(Dt=!0,(0,Kf.v)({reset:$s,onDirty:n0})));Cn.context={model:$t,overallProgress:ut},Cn.agent=pt,Cn.__block=ut,nt._pipe($t,Cn)}(0,ce.assert)(!Ge.createOnAllSeries,""),tn?Ue.eachRawSeriesByType(tn,Bt):xn?xn(Ue,Xe).each(Bt):(ut=!1,(0,ce.each)(Ue.getSeries(),Bt)),Dt&&pt.dirty()},Oe.prototype._pipe=function(Ge,Le){var Xe=this._pipelineMap.get(Ge.uid);!Xe.head&&(Xe.head=Le),Xe.tail&&Xe.tail.pipe(Le),Xe.tail=Le,Le.__idxInPipeline=Xe.count++,Le.__pipeline=Xe},Oe.wrapStageHandler=function(Ge,Le){return(0,ce.isFunction)(Ge)&&(Ge={overallReset:Ge,seriesType:Rv(Ge)}),Ge.uid=(0,Ms.Kr)("stageHandler"),Le&&(Ge.visualType=Le),Ge},Oe}();function Fa(Oe){Oe.overallReset(Oe.ecModel,Oe.api,Oe.payload)}function $s(Oe){return Oe.overallProgress&&Aa}function Aa(){this.agent.dirty(),this.getDownstream().dirty()}function n0(){this.agent&&this.agent.dirty()}function oh(Oe){return Oe.plan?Oe.plan(Oe.model,Oe.ecModel,Oe.api,Oe.payload):null}function sh(Oe){Oe.useClearVisual&&Oe.data.clearAllVisual();var Ge=Oe.resetDefines=(0,we.kF)(Oe.reset(Oe.model,Oe.ecModel,Oe.api,Oe.payload));return Ge.length>1?(0,ce.map)(Ge,function(Le,Ue){return Wl(Ue)}):Qf}var Qf=Wl(0);function Wl(Oe){return function(Ge,Le){var Ue=Le.data,Xe=Le.resetDefines[Oe];if(Xe&&Xe.dataEach)for(var nt=Ge.start;nt<Ge.end;nt++)Xe.dataEach(Ue,nt);else Xe&&Xe.progress&&Xe.progress(Ge,Ue)}}function zu(Oe){return Oe.data.count()}function Rv(Oe){Hu=null;try{Oe(cu,qf)}catch{}return Hu}var Hu,cu={},qf={};function Lv(Oe,Ge){for(var Le in Ge.prototype)Oe[Le]=ce.noop}Lv(cu,A),Lv(qf,ie),cu.eachSeriesByType=cu.eachRawSeriesByType=function(Oe){Hu=Oe},cu.eachComponent=function(Oe){"series"===Oe.mainType&&Oe.subType&&(Hu=Oe.subType)};const Ov=Xs;var kv=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const Rt={color:kv,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],kv]};var ta="#B9B8CE",zi="#100C2A",dr=function(){return{axisLine:{lineStyle:{color:ta}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},Vn=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],Jf={darkMode:!0,color:Vn,backgroundColor:zi,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:ta}},textStyle:{color:ta},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:ta}},dataZoom:{borderColor:"#71708A",textStyle:{color:ta},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:ta}},timeline:{lineStyle:{color:ta},label:{color:ta},controlStyle:{color:ta,borderColor:ta}},calendar:{itemStyle:{color:zi},dayLabel:{color:ta},monthLabel:{color:ta},yearLabel:{color:ta}},timeAxis:dr(),logAxis:dr(),valueAxis:dr(),categoryAxis:dr(),line:{symbol:"circle"},graph:{color:Vn},gauge:{title:{color:ta},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:ta},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};Jf.categoryAxis.splitLine.show=!1;const ep=Jf;var on=z(9358),Un=function(){function Oe(){}return Oe.prototype.normalizeQuery=function(Ge){var Le={},Ue={},Xe={};if(ce.isString(Ge)){var nt=(0,on.u9)(Ge);Le.mainType=nt.main||null,Le.subType=nt.sub||null}else{var pt=["Index","Name","Id"],zt={name:1,dataIndex:1,dataType:1};ce.each(Ge,function(Pt,tn){for(var xn=!1,ut=0;ut<pt.length;ut++){var Dt=pt[ut],bt=tn.lastIndexOf(Dt);if(bt>0&&bt===tn.length-Dt.length){var Bt=tn.slice(0,bt);"data"!==Bt&&(Le.mainType=Bt,Le[Dt.toLowerCase()]=Pt,xn=!0)}}zt.hasOwnProperty(tn)&&(Ue[tn]=Pt,xn=!0),xn||(Xe[tn]=Pt)})}return{cptQuery:Le,dataQuery:Ue,otherQuery:Xe}},Oe.prototype.filter=function(Ge,Le){var Ue=this.eventInfo;if(!Ue)return!0;var Xe=Ue.targetEl,nt=Ue.packedEvent,pt=Ue.model,zt=Ue.view;if(!pt||!zt)return!0;var Pt=Le.cptQuery,tn=Le.dataQuery;return xn(Pt,pt,"mainType")&&xn(Pt,pt,"subType")&&xn(Pt,pt,"index","componentIndex")&&xn(Pt,pt,"name")&&xn(Pt,pt,"id")&&xn(tn,nt,"name")&&xn(tn,nt,"dataIndex")&&xn(tn,nt,"dataType")&&(!zt.filterForExposedEvent||zt.filterForExposedEvent(Ge,Le.otherQuery,Xe,nt));function xn(ut,Dt,bt,Bt){return null==ut[bt]||Dt[Bt||bt]===ut[bt]}},Oe.prototype.afterTrigger=function(){this.eventInfo=null},Oe}(),Fn=["symbol","symbolSize","symbolRotate","symbolOffset"],bn=Fn.concat(["symbolKeepAspect"]),Nv={createOnAllSeries:!0,performRawSeries:!0,reset:function(Oe,Ge){var Le=Oe.getData();if(Oe.legendIcon&&Le.setVisual("legendIcon",Oe.legendIcon),Oe.hasSymbolVisual){for(var Ue={},Xe={},nt=!1,pt=0;pt<Fn.length;pt++){var zt=Fn[pt],Pt=Oe.get(zt);(0,ce.isFunction)(Pt)?(nt=!0,Xe[zt]=Pt):Ue[zt]=Pt}if(Ue.symbol=Ue.symbol||Oe.defaultSymbol,Le.setVisual((0,ce.extend)({legendIcon:Oe.legendIcon||Ue.symbol,symbolKeepAspect:Oe.get("symbolKeepAspect")},Ue)),!Ge.isSeriesFiltered(Oe)){var tn=(0,ce.keys)(Xe);return{dataEach:nt?function xn(ut,Dt){for(var bt=Oe.getRawValue(Dt),Bt=Oe.getDataParams(Dt),$t=0;$t<tn.length;$t++){var hn=tn[$t];ut.setItemVisual(Dt,hn,Xe[hn](bt,Bt))}}:null}}}}},kr={createOnAllSeries:!0,performRawSeries:!0,reset:function(Oe,Ge){if(Oe.hasSymbolVisual&&!Ge.isSeriesFiltered(Oe))return{dataEach:Oe.getData().hasItemOption?function Ue(Xe,nt){for(var pt=Xe.getItemModel(nt),zt=0;zt<bn.length;zt++){var Pt=bn[zt],tn=pt.getShallow(Pt,!0);null!=tn&&Xe.setItemVisual(nt,Pt,tn)}}:null}}},wr=z(470),Bn=z(6420),VC=z(9624),an=z(8489),Ks=z(7772),Sr=z(3325),Si=z(7123);const Do=new be.Z;var Ts=z(3691),Mo=z(9500),HC="5.5.1",Bv={zrender:"5.6.0"},hs={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:2e3,CHART:3e3,POST_CHART_LAYOUT:4600,COMPONENT:4e3,BRUSH:5e3,CHART_ITEM:4500,ARIA:6e3,DECAL:7e3}},ft="__flagInMainProcess",Ba="__pendingUpdate",lh="__needsUpdateStatus",Rc=/^[a-zA-Z0-9_]+$/,bl="__connectUpdateStatus";function Gu(Oe){return function(){for(var Ge=[],Le=0;Le<arguments.length;Le++)Ge[Le]=arguments[Le];if(!this.isDisposed())return Vv(this,Oe,Ge)}}function ch(Oe){return function(){for(var Ge=[],Le=0;Le<arguments.length;Le++)Ge[Le]=arguments[Le];return Vv(this,Oe,Ge)}}function Vv(Oe,Ge,Le){return Le[0]=Le[0]&&Le[0].toLowerCase(),be.Z.prototype[Ge].apply(Oe,Le)}var ar=function(Oe){function Ge(){return null!==Oe&&Oe.apply(this,arguments)||this}return(0,le.ZT)(Ge,Oe),Ge}(be.Z),uh=ar.prototype;uh.on=ch("on"),uh.off=ch("off");var du,zo,Wu,Lc,Qs,Ho,zv,ju,Ja,Oi,a0,Hv,qs,ti,Zu,dh,To,ip,uo=function(Oe){function Ge(Le,Ue,Xe){var nt=Oe.call(this,new Un)||this;nt._chartsViews=[],nt._chartsMap={},nt._componentsViews=[],nt._componentsMap={},nt._pendingActions=[],Xe=Xe||{},(0,ce.isString)(Ue)&&(Ue=fu[Ue]),nt._dom=Le,Xe.ssr&&Se.registerSSRDataGetter(function(bt){var Bt=(0,et.A)(bt),$t=Bt.dataIndex;if(null!=$t){var hn=(0,ce.createHashMap)();return hn.set("series_index",Bt.seriesIndex),hn.set("data_index",$t),Bt.ssrType&&hn.set("ssr_type",Bt.ssrType),hn}});var xn=nt._zr=Se.init(Le,{renderer:Xe.renderer||"canvas",devicePixelRatio:Xe.devicePixelRatio,width:Xe.width,height:Xe.height,ssr:Xe.ssr,useDirtyRect:(0,ce.retrieve2)(Xe.useDirtyRect,!1),useCoarsePointer:(0,ce.retrieve2)(Xe.useCoarsePointer,"auto"),pointerSize:Xe.pointerSize});nt._ssr=Xe.ssr,nt._throttledZrFlush=(0,mt.P2)((0,ce.bind)(xn.flush,xn),17),(Ue=(0,ce.clone)(Ue))&&jn(Ue,!0),nt._theme=Ue,nt._locale=(0,Ks.D0)(Xe.locale||Ks.sO),nt._coordSysMgr=new oe.Z;var ut=nt._api=Zu(nt);function Dt(bt,Bt){return bt.__prio-Bt.__prio}return(0,ye.Z)(ph,Dt),(0,ye.Z)(Eo,Dt),nt._scheduler=new Ov(nt,ut,Eo,ph),nt._messageCenter=new ar,nt._initEvents(),nt.resize=(0,ce.bind)(nt.resize,nt),xn.animation.on("frame",nt._onframe,nt),Oi(xn,nt),a0(xn,nt),(0,ce.setAsPrimitive)(nt),nt}return(0,le.ZT)(Ge,Oe),Ge.prototype._onframe=function(){if(!this._disposed){ip(this);var Le=this._scheduler;if(this[Ba]){var Ue=this[Ba].silent;this[ft]=!0;try{du(this),Lc.update.call(this,null,this[Ba].updateParams)}catch(Pt){throw this[ft]=!1,this[Ba]=null,Pt}this._zr.flush(),this[ft]=!1,this[Ba]=null,ju.call(this,Ue),Ja.call(this,Ue)}else if(Le.unfinished){var Xe=1,nt=this._model,pt=this._api;Le.unfinished=!1;do{var zt=+new Date;Le.performSeriesTasks(nt),Le.performDataProcessorTasks(nt),Ho(this,nt),Le.performVisualTasks(nt),ti(this,this._model,pt,"remain",{}),Xe-=+new Date-zt}while(Xe>0&&Le.unfinished);Le.unfinished||this._zr.flush()}}},Ge.prototype.getDom=function(){return this._dom},Ge.prototype.getId=function(){return this.id},Ge.prototype.getZr=function(){return this._zr},Ge.prototype.isSSR=function(){return this._ssr},Ge.prototype.setOption=function(Le,Ue,Xe){if(!this[ft]){if(this._disposed)return;var nt,pt,zt;if((0,ce.isObject)(Ue)&&(Xe=Ue.lazyUpdate,nt=Ue.silent,pt=Ue.replaceMerge,zt=Ue.transition,Ue=Ue.notMerge),this[ft]=!0,!this._model||Ue){var Pt=new Ce(this._api),tn=this._theme,xn=this._model=new A;xn.scheduler=this._scheduler,xn.ssr=this._ssr,xn.init(null,null,null,tn,this._locale,Pt)}this._model.setOption(Le,{replaceMerge:pt},vr);var ut={seriesTransition:zt,optionChanged:!0};if(Xe)this[Ba]={silent:nt,updateParams:ut},this[ft]=!1,this.getZr().wakeUp();else{try{du(this),Lc.update.call(this,null,ut)}catch(Dt){throw this[Ba]=null,this[ft]=!1,Dt}this._ssr||this._zr.flush(),this[Ba]=null,this[ft]=!1,ju.call(this,nt),Ja.call(this,nt)}}},Ge.prototype.setTheme=function(){(0,Bn.Sh)("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},Ge.prototype.getModel=function(){return this._model},Ge.prototype.getOption=function(){return this._model&&this._model.getOption()},Ge.prototype.getWidth=function(){return this._zr.getWidth()},Ge.prototype.getHeight=function(){return this._zr.getHeight()},Ge.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||_e.Z.hasGlobalWindow&&window.devicePixelRatio||1},Ge.prototype.getRenderedCanvas=function(Le){return this.renderToCanvas(Le)},Ge.prototype.renderToCanvas=function(Le){return this._zr.painter.getRenderedCanvas({backgroundColor:(Le=Le||{}).backgroundColor||this._model.get("backgroundColor"),pixelRatio:Le.pixelRatio||this.getDevicePixelRatio()})},Ge.prototype.renderToSVGString=function(Le){return this._zr.painter.renderToString({useViewBox:(Le=Le||{}).useViewBox})},Ge.prototype.getSvgDataURL=function(){if(_e.Z.svgSupported){var Le=this._zr,Ue=Le.storage.getDisplayList();return(0,ce.each)(Ue,function(Xe){Xe.stopAnimation(null,!0)}),Le.painter.toDataURL()}},Ge.prototype.getDataURL=function(Le){if(!this._disposed){var Xe=this._model,nt=[],pt=this;(0,ce.each)((Le=Le||{}).excludeComponents,function(Pt){Xe.eachComponent({mainType:Pt},function(tn){var xn=pt._componentsMap[tn.__viewId];xn.group.ignore||(nt.push(xn),xn.group.ignore=!0)})});var zt="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.renderToCanvas(Le).toDataURL("image/"+(Le&&Le.type||"png"));return(0,ce.each)(nt,function(Pt){Pt.group.ignore=!1}),zt}},Ge.prototype.getConnectedDataURL=function(Le){if(!this._disposed){var Ue="svg"===Le.type,Xe=this.group,nt=Math.min,pt=Math.max,zt=1/0;if(hi[Xe]){var Pt=zt,tn=zt,xn=-zt,ut=-zt,Dt=[],bt=Le&&Le.pixelRatio||this.getDevicePixelRatio();(0,ce.each)(ya,function(kn,mr){if(kn.group===Xe){var Zr=Ue?kn.getZr().painter.getSvgDom().innerHTML:kn.renderToCanvas((0,ce.clone)(Le)),nr=kn.getDom().getBoundingClientRect();Pt=nt(nr.left,Pt),tn=nt(nr.top,tn),xn=pt(nr.right,xn),ut=pt(nr.bottom,ut),Dt.push({dom:Zr,left:nr.left,top:nr.top})}});var Bt=(xn*=bt)-(Pt*=bt),$t=(ut*=bt)-(tn*=bt),hn=Ts.qW.createCanvas(),Cn=Se.init(hn,{renderer:Ue?"svg":"canvas"});if(Cn.resize({width:Bt,height:$t}),Ue){var Hn="";return(0,ce.each)(Dt,function(kn){Hn+='<g transform="translate('+(kn.left-Pt)+","+(kn.top-tn)+')">'+kn.dom+"</g>"}),Cn.painter.getSvgRoot().innerHTML=Hn,Le.connectedBackgroundColor&&Cn.painter.setBackgroundColor(Le.connectedBackgroundColor),Cn.refreshImmediately(),Cn.painter.toDataURL()}return Le.connectedBackgroundColor&&Cn.add(new dt.Z({shape:{x:0,y:0,width:Bt,height:$t},style:{fill:Le.connectedBackgroundColor}})),(0,ce.each)(Dt,function(kn){var mr=new Lt.ZP({style:{x:kn.left*bt-Pt,y:kn.top*bt-tn,image:kn.dom}});Cn.add(mr)}),Cn.refreshImmediately(),hn.toDataURL("image/"+(Le&&Le.type||"png"))}return this.getDataURL(Le)}},Ge.prototype.convertToPixel=function(Le,Ue){return Qs(this,"convertToPixel",Le,Ue)},Ge.prototype.convertFromPixel=function(Le,Ue){return Qs(this,"convertFromPixel",Le,Ue)},Ge.prototype.containPixel=function(Le,Ue){if(!this._disposed){var nt,pt=we.pm(this._model,Le);return(0,ce.each)(pt,function(zt,Pt){Pt.indexOf("Models")>=0&&(0,ce.each)(zt,function(tn){var xn=tn.coordinateSystem;if(xn&&xn.containPoint)nt=nt||!!xn.containPoint(Ue);else if("seriesModels"===Pt){var ut=this._chartsMap[tn.__viewId];ut&&ut.containPoint&&(nt=nt||ut.containPoint(Ue,tn))}},this)},this),!!nt}},Ge.prototype.getVisual=function(Le,Ue){var nt=we.pm(this._model,Le,{defaultMainType:"series"}),zt=nt.seriesModel.getData(),Pt=nt.hasOwnProperty("dataIndexInside")?nt.dataIndexInside:nt.hasOwnProperty("dataIndex")?zt.indexOfRawIndex(nt.dataIndex):null;return null!=Pt?(0,wr.Or)(zt,Pt,Ue):(0,wr.UL)(zt,Ue)},Ge.prototype.getViewOfComponentModel=function(Le){return this._componentsMap[Le.__viewId]},Ge.prototype.getViewOfSeriesModel=function(Le){return this._chartsMap[Le.__viewId]},Ge.prototype._initEvents=function(){var Le=this;(0,ce.each)(hh,function(Ue){var Xe=function(nt){var Pt,pt=Le.getModel(),zt=nt.target;if("globalout"===Ue?Pt={}:zt&&(0,Sr.o)(zt,function(Bt){var $t=(0,et.A)(Bt);if($t&&null!=$t.dataIndex){var hn=$t.dataModel||pt.getSeriesByIndex($t.seriesIndex);return Pt=hn&&hn.getDataParams($t.dataIndex,$t.dataType,zt)||{},!0}if($t.eventData)return Pt=(0,ce.extend)({},$t.eventData),!0},!0),Pt){var xn=Pt.componentType,ut=Pt.componentIndex;("markLine"===xn||"markPoint"===xn||"markArea"===xn)&&(xn="series",ut=Pt.seriesIndex);var Dt=xn&&null!=ut&&pt.getComponent(xn,ut),bt=Dt&&Le["series"===Dt.mainType?"_chartsMap":"_componentsMap"][Dt.__viewId];Pt.event=nt,Pt.type=Ue,Le._$eventProcessor.eventInfo={targetEl:zt,packedEvent:Pt,model:Dt,view:bt},Le.trigger(Ue,Pt)}};Xe.zrEventfulCallAtLast=!0,Le._zr.on(Ue,Xe,Le)}),(0,ce.each)(hu,function(Ue,Xe){Le._messageCenter.on(Xe,function(nt){this.trigger(Xe,nt)},Le)}),(0,ce.each)(["selectchanged"],function(Ue){Le._messageCenter.on(Ue,function(Xe){this.trigger(Ue,Xe)},Le)}),(0,VC.s)(this._messageCenter,this,this._api)},Ge.prototype.isDisposed=function(){return this._disposed},Ge.prototype.clear=function(){this._disposed||this.setOption({series:[]},!0)},Ge.prototype.dispose=function(){if(!this._disposed){this._disposed=!0,this.getDom()&&we.P$(this.getDom(),Js,"");var Ue=this,Xe=Ue._api,nt=Ue._model;(0,ce.each)(Ue._componentsViews,function(pt){pt.dispose(nt,Xe)}),(0,ce.each)(Ue._chartsViews,function(pt){pt.dispose(nt,Xe)}),Ue._zr.dispose(),Ue._dom=Ue._model=Ue._chartsMap=Ue._componentsMap=Ue._chartsViews=Ue._componentsViews=Ue._scheduler=Ue._api=Ue._zr=Ue._throttledZrFlush=Ue._theme=Ue._coordSysMgr=Ue._messageCenter=null,delete ya[Ue.id]}},Ge.prototype.resize=function(Le){if(!this[ft]){if(this._disposed)return;this._zr.resize(Le);var Ue=this._model;if(this._loadingFX&&this._loadingFX.resize(),Ue){var Xe=Ue.resetOption("media"),nt=Le&&Le.silent;this[Ba]&&(null==nt&&(nt=this[Ba].silent),Xe=!0,this[Ba]=null),this[ft]=!0;try{Xe&&du(this),Lc.update.call(this,{type:"resize",animation:(0,ce.extend)({duration:0},Le&&Le.animation)})}catch(pt){throw this[ft]=!1,pt}this[ft]=!1,ju.call(this,nt),Ja.call(this,nt)}}},Ge.prototype.showLoading=function(Le,Ue){if(!this._disposed&&((0,ce.isObject)(Le)&&(Ue=Le,Le=""),Le=Le||"default",this.hideLoading(),Sn[Le])){var Xe=Sn[Le](this._api,Ue),nt=this._zr;this._loadingFX=Xe,nt.add(Xe)}},Ge.prototype.hideLoading=function(){this._disposed||(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},Ge.prototype.makeActionFromEvent=function(Le){var Ue=(0,ce.extend)({},Le);return Ue.type=hu[Le.type],Ue},Ge.prototype.dispatchAction=function(Le,Ue){if(!this._disposed&&((0,ce.isObject)(Ue)||(Ue={silent:!!Ue}),fh[Le.type]&&this._model)){if(this[ft])return void this._pendingActions.push(Le);var Xe=Ue.silent;zv.call(this,Le,Xe);var nt=Ue.flush;nt?this._zr.flush():!1!==nt&&_e.Z.browser.weChat&&this._throttledZrFlush(),ju.call(this,Xe),Ja.call(this,Xe)}},Ge.prototype.updateLabelLayout=function(){Do.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},Ge.prototype.appendData=function(Le){if(!this._disposed){var Ue=Le.seriesIndex;this.getModel().getSeriesByIndex(Ue).appendData(Le),this._scheduler.unfinished=!0,this.getZr().wakeUp()}},Ge.internalField=function(){function Le(ut){ut.clearColorPalette(),ut.eachSeries(function(Dt){Dt.clearColorPalette()})}function Xe(ut){for(var Dt=[],bt=ut.currentStates,Bt=0;Bt<bt.length;Bt++){var $t=bt[Bt];"emphasis"===$t||"blur"===$t||"select"===$t||Dt.push($t)}ut.selected&&ut.states.select&&Dt.push("select"),ut.hoverState===$e.wU&&ut.states.emphasis?Dt.push("emphasis"):ut.hoverState===$e.CX&&ut.states.blur&&Dt.push("blur"),ut.useStates(Dt)}function zt(ut,Dt){if(!ut.preventAutoZ){var bt=ut.get("z")||0,Bt=ut.get("zlevel")||0;Dt.eachRendered(function($t){return Pt($t,bt,Bt,-1/0),!0})}}function Pt(ut,Dt,bt,Bt){var $t=ut.getTextContent(),hn=ut.getTextGuideLine();if(ut.isGroup)for(var Hn=ut.childrenRef(),kn=0;kn<Hn.length;kn++)Bt=Math.max(Pt(Hn[kn],Dt,bt,Bt),Bt);else ut.z=Dt,ut.zlevel=bt,Bt=Math.max(ut.z2,Bt);if($t&&($t.z=Dt,$t.zlevel=bt,isFinite(Bt)&&($t.z2=Bt+2)),hn){var mr=ut.textGuideLineConfig;hn.z=Dt,hn.zlevel=bt,isFinite(Bt)&&(hn.z2=Bt+(mr&&mr.showAbove?1:-1))}return Bt}function tn(ut,Dt){Dt.eachRendered(function(bt){if(!qt.eq(bt)){var Bt=bt.getTextContent(),$t=bt.getTextGuideLine();bt.stateTransition&&(bt.stateTransition=null),Bt&&Bt.stateTransition&&(Bt.stateTransition=null),$t&&$t.stateTransition&&($t.stateTransition=null),bt.hasState()?(bt.prevStates=bt.currentStates,bt.clearStates()):bt.prevStates&&(bt.prevStates=null)}})}function xn(ut,Dt){var bt=ut.getModel("stateAnimation"),Bt=ut.isAnimationEnabled(),$t=bt.get("duration"),hn=$t>0?{duration:$t,delay:bt.get("delay"),easing:bt.get("easing")}:null;Dt.eachRendered(function(Cn){if(Cn.states&&Cn.states.emphasis){if(qt.eq(Cn))return;if(Cn instanceof Ze.ZP&&(0,$e.e9)(Cn),Cn.__dirty){var Hn=Cn.prevStates;Hn&&Cn.useStates(Hn)}if(Bt){Cn.stateTransition=hn;var kn=Cn.getTextContent(),mr=Cn.getTextGuideLine();kn&&(kn.stateTransition=hn),mr&&(mr.stateTransition=hn)}Cn.__dirty&&Xe(Cn)}})}du=function(ut){var Dt=ut._scheduler;Dt.restorePipelines(ut._model),Dt.prepareStageTasks(),zo(ut,!0),zo(ut,!1),Dt.plan()},zo=function(ut,Dt){for(var bt=ut._model,Bt=ut._scheduler,$t=Dt?ut._componentsViews:ut._chartsViews,hn=Dt?ut._componentsMap:ut._chartsMap,Cn=ut._zr,Hn=ut._api,kn=0;kn<$t.length;kn++)$t[kn].__alive=!1;function mr(nr){var _i=nr.__requireNewView;nr.__requireNewView=!1;var za="_ec_"+nr.id+"_"+nr.type,Xi=!_i&&hn[za];if(!Xi){var eo=(0,on.u9)(nr.type);(Xi=new(Dt?nn.Z.getClass(eo.main,eo.sub):Xt.Z.getClass(eo.sub))).init(bt,Hn),hn[za]=Xi,$t.push(Xi),Cn.add(Xi.group)}nr.__viewId=Xi.__id=za,Xi.__alive=!0,Xi.__model=nr,Xi.group.__ecComponentInfo={mainType:nr.mainType,index:nr.componentIndex},!Dt&&Bt.prepareView(Xi,nr,bt,Hn)}for(Dt?bt.eachComponent(function(nr,_i){"series"!==nr&&mr(_i)}):bt.eachSeries(mr),kn=0;kn<$t.length;){var Zr=$t[kn];Zr.__alive?kn++:(!Dt&&Zr.renderTask.dispose(),Cn.remove(Zr.group),Zr.dispose(bt,Hn),$t.splice(kn,1),hn[Zr.__id]===Zr&&delete hn[Zr.__id],Zr.__id=Zr.group.__ecComponentInfo=null)}},Wu=function(ut,Dt,bt,Bt,$t){var hn=ut._model;if(hn.setUpdatePayload(bt),Bt){var Cn={};Cn[Bt+"Id"]=bt[Bt+"Id"],Cn[Bt+"Index"]=bt[Bt+"Index"],Cn[Bt+"Name"]=bt[Bt+"Name"];var Hn={mainType:Bt,query:Cn};$t&&(Hn.subType=$t);var mr,kn=bt.excludeSeriesId;null!=kn&&(mr=(0,ce.createHashMap)(),(0,ce.each)(we.kF(kn),function(nr){var _i=we.U5(nr,null);null!=_i&&mr.set(_i,!0)})),hn&&hn.eachComponent(Hn,function(nr){if(!mr||null==mr.get(nr.id))if((0,$e.xp)(bt))if(nr instanceof wt.Z)bt.type===$e.Ki&&!bt.notBlur&&!nr.get(["emphasis","disabled"])&&(0,$e.UL)(nr,bt,ut._api);else{var za=(0,$e.oJ)(nr.mainType,nr.componentIndex,bt.name,ut._api),eo=za.dispatchers;bt.type===$e.Ki&&za.focusSelf&&!bt.notBlur&&(0,$e.zI)(nr.mainType,nr.componentIndex,ut._api),eo&&(0,ce.each)(eo,function($l){bt.type===$e.Ki?(0,$e.fD)($l):(0,$e.Mh)($l)})}else(0,$e.aG)(bt)&&nr instanceof wt.Z&&((0,$e.og)(nr,bt,ut._api),(0,$e.ci)(nr),To(ut))},ut),hn&&hn.eachComponent(Hn,function(nr){mr&&null!=mr.get(nr.id)||Zr(ut["series"===Bt?"_chartsMap":"_componentsMap"][nr.__viewId])},ut)}else(0,ce.each)([].concat(ut._componentsViews).concat(ut._chartsViews),Zr);function Zr(nr){nr&&nr.__alive&&nr[Dt]&&nr[Dt](nr.__model,hn,ut._api,bt)}},Lc={prepareAndUpdate:function(ut){du(this),Lc.update.call(this,ut,{optionChanged:null!=ut.newOption})},update:function(ut,Dt){var bt=this._model,Bt=this._api,$t=this._zr,hn=this._coordSysMgr,Cn=this._scheduler;if(bt){bt.setUpdatePayload(ut),Cn.restoreData(bt,ut),Cn.performSeriesTasks(bt),hn.create(bt,Bt),Cn.performDataProcessorTasks(bt,ut),Ho(this,bt),hn.update(bt,Bt),Le(bt),Cn.performVisualTasks(bt,ut),Hv(this,bt,Bt,ut,Dt);var Hn=bt.get("backgroundColor")||"transparent",kn=bt.get("darkMode");$t.setBackgroundColor(Hn),null!=kn&&"auto"!==kn&&$t.setDarkMode(kn),Do.trigger("afterupdate",bt,Bt)}},updateTransform:function(ut){var Dt=this,bt=this._model,Bt=this._api;if(bt){bt.setUpdatePayload(ut);var $t=[];bt.eachComponent(function(Cn,Hn){if("series"!==Cn){var kn=Dt.getViewOfComponentModel(Hn);if(kn&&kn.__alive)if(kn.updateTransform){var mr=kn.updateTransform(Hn,bt,Bt,ut);mr&&mr.update&&$t.push(kn)}else $t.push(kn)}});var hn=(0,ce.createHashMap)();bt.eachSeries(function(Cn){var Hn=Dt._chartsMap[Cn.__viewId];if(Hn.updateTransform){var kn=Hn.updateTransform(Cn,bt,Bt,ut);kn&&kn.update&&hn.set(Cn.uid,1)}else hn.set(Cn.uid,1)}),Le(bt),this._scheduler.performVisualTasks(bt,ut,{setDirty:!0,dirtyMap:hn}),ti(this,bt,Bt,ut,{},hn),Do.trigger("afterupdate",bt,Bt)}},updateView:function(ut){var Dt=this._model;!Dt||(Dt.setUpdatePayload(ut),Xt.Z.markUpdateMethod(ut,"updateView"),Le(Dt),this._scheduler.performVisualTasks(Dt,ut,{setDirty:!0}),Hv(this,Dt,this._api,ut,{}),Do.trigger("afterupdate",Dt,this._api))},updateVisual:function(ut){var Dt=this,bt=this._model;!bt||(bt.setUpdatePayload(ut),bt.eachSeries(function(Bt){Bt.getData().clearAllVisual()}),Xt.Z.markUpdateMethod(ut,"updateVisual"),Le(bt),this._scheduler.performVisualTasks(bt,ut,{visualType:"visual",setDirty:!0}),bt.eachComponent(function(Bt,$t){if("series"!==Bt){var hn=Dt.getViewOfComponentModel($t);hn&&hn.__alive&&hn.updateVisual($t,bt,Dt._api,ut)}}),bt.eachSeries(function(Bt){Dt._chartsMap[Bt.__viewId].updateVisual(Bt,bt,Dt._api,ut)}),Do.trigger("afterupdate",bt,this._api))},updateLayout:function(ut){Lc.update.call(this,ut)}},Qs=function(ut,Dt,bt,Bt){if(!ut._disposed)for(var Cn,$t=ut._model,hn=ut._coordSysMgr.getCoordinateSystems(),Hn=we.pm($t,bt),kn=0;kn<hn.length;kn++){var mr=hn[kn];if(mr[Dt]&&null!=(Cn=mr[Dt]($t,Hn,Bt)))return Cn}},Ho=function(ut,Dt){var bt=ut._chartsMap,Bt=ut._scheduler;Dt.eachSeries(function($t){Bt.updateStreamModes($t,bt[$t.__viewId])})},zv=function(ut,Dt){var bt=this,Bt=this.getModel(),$t=ut.type,hn=ut.escapeConnect,Cn=fh[$t],Hn=Cn.actionInfo,kn=(Hn.update||"update").split(":"),mr=kn.pop(),Zr=null!=kn[0]&&(0,on.u9)(kn[0]);this[ft]=!0;var nr=[ut],_i=!1;ut.batch&&(_i=!0,nr=(0,ce.map)(ut.batch,function(As){return(As=(0,ce.defaults)((0,ce.extend)({},As),ut)).batch=null,As}));var Xi,za=[],eo=(0,$e.aG)(ut),$l=(0,$e.xp)(ut);if($l&&(0,$e.T5)(this._api),(0,ce.each)(nr,function(As){if((Xi=(Xi=Cn.action(As,bt._model,bt._api))||(0,ce.extend)({},As)).type=Hn.event||Xi.type,za.push(Xi),$l){var op=we.zH(ut),Pa=op.mainTypeSpecified?op.queryOptionMap.keys()[0]:"series";Wu(bt,mr,As,Pa),To(bt)}else eo?(Wu(bt,mr,As,"series"),To(bt)):Zr&&Wu(bt,mr,As,Zr.main,Zr.sub)}),"none"!==mr&&!$l&&!eo&&!Zr)try{this[Ba]?(du(this),Lc.update.call(this,ut),this[Ba]=null):Lc[mr].call(this,ut)}catch(As){throw this[ft]=!1,As}if(Xi=_i?{type:Hn.event||$t,escapeConnect:hn,batch:za}:za[0],this[ft]=!1,!Dt){var Wv=this._messageCenter;if(Wv.trigger(Xi.type,Xi),eo){var gh={type:"selectchanged",escapeConnect:hn,selected:(0,$e.C5)(Bt),isFromClick:ut.isFromClick||!1,fromAction:ut.type,fromActionPayload:ut};Wv.trigger(gh.type,gh)}}},ju=function(ut){for(var Dt=this._pendingActions;Dt.length;){var bt=Dt.shift();zv.call(this,bt,ut)}},Ja=function(ut){!ut&&this.trigger("updated")},Oi=function(ut,Dt){ut.on("rendered",function(bt){Dt.trigger("rendered",bt),ut.animation.isFinished()&&!Dt[Ba]&&!Dt._scheduler.unfinished&&!Dt._pendingActions.length&&Dt.trigger("finished")})},a0=function(ut,Dt){ut.on("mouseover",function(bt){var $t=(0,Sr.o)(bt.target,$e.Av);$t&&((0,$e.$l)($t,bt,Dt._api),To(Dt))}).on("mouseout",function(bt){var $t=(0,Sr.o)(bt.target,$e.Av);$t&&((0,$e.xr)($t,bt,Dt._api),To(Dt))}).on("click",function(bt){var $t=(0,Sr.o)(bt.target,function(Hn){return null!=(0,et.A)(Hn).dataIndex},!0);if($t){var hn=$t.selected?"unselect":"select",Cn=(0,et.A)($t);Dt._api.dispatchAction({type:hn,dataType:Cn.dataType,dataIndexInside:Cn.dataIndex,seriesIndex:Cn.seriesIndex,isFromClick:!0})}})},Hv=function(ut,Dt,bt,Bt,$t){(function Ue(ut){var Dt=[],bt=[],Bt=!1;if(ut.eachComponent(function(Hn,kn){var mr=kn.get("zlevel")||0,Zr=kn.get("z")||0,nr=kn.getZLevelKey();Bt=Bt||!!nr,("series"===Hn?bt:Dt).push({zlevel:mr,z:Zr,idx:kn.componentIndex,type:Hn,key:nr})}),Bt){var hn,Cn,$t=Dt.concat(bt);(0,ye.Z)($t,function(Hn,kn){return Hn.zlevel===kn.zlevel?Hn.z-kn.z:Hn.zlevel-kn.zlevel}),(0,ce.each)($t,function(Hn){var kn=ut.getComponent(Hn.type,Hn.idx),mr=Hn.zlevel,Zr=Hn.key;null!=hn&&(mr=Math.max(hn,mr)),Zr?(mr===hn&&Zr!==Cn&&mr++,Cn=Zr):Cn&&(mr===hn&&mr++,Cn=""),hn=mr,kn.setZLevel(mr)})}})(Dt),qs(ut,Dt,bt,Bt,$t),(0,ce.each)(ut._chartsViews,function(hn){hn.__alive=!1}),ti(ut,Dt,bt,Bt,$t),(0,ce.each)(ut._chartsViews,function(hn){hn.__alive||hn.remove(Dt,bt)})},qs=function(ut,Dt,bt,Bt,$t,hn){(0,ce.each)(hn||ut._componentsViews,function(Cn){var Hn=Cn.__model;tn(0,Cn),Cn.render(Hn,Dt,bt,Bt),zt(Hn,Cn),xn(Hn,Cn)})},ti=function(ut,Dt,bt,Bt,$t,hn){var Cn=ut._scheduler;$t=(0,ce.extend)($t||{},{updatedSeries:Dt.getSeries()}),Do.trigger("series:beforeupdate",Dt,bt,$t);var Hn=!1;Dt.eachSeries(function(kn){var mr=ut._chartsMap[kn.__viewId];mr.__alive=!0;var Zr=mr.renderTask;Cn.updatePayload(Zr,Bt),tn(0,mr),hn&&hn.get(kn.uid)&&Zr.dirty(),Zr.perform(Cn.getPerformArgs(Zr))&&(Hn=!0),mr.group.silent=!!kn.get("silent"),function pt(ut,Dt){var bt=ut.get("blendMode")||null;Dt.eachRendered(function(Bt){Bt.isGroup||(Bt.style.blend=bt)})}(kn,mr),(0,$e.ci)(kn)}),Cn.unfinished=Hn||Cn.unfinished,Do.trigger("series:layoutlabels",Dt,bt,$t),Do.trigger("series:transition",Dt,bt,$t),Dt.eachSeries(function(kn){var mr=ut._chartsMap[kn.__viewId];zt(kn,mr),xn(kn,mr)}),function nt(ut,Dt){var $t=0;ut._zr.storage.traverse(function(hn){hn.isGroup||$t++}),$t>Dt.get("hoverLayerThreshold")&&!_e.Z.node&&!_e.Z.worker&&Dt.eachSeries(function(hn){if(!hn.preventUsingHoverLayer){var Cn=ut._chartsMap[hn.__viewId];Cn.__alive&&Cn.eachRendered(function(Hn){Hn.states.emphasis&&(Hn.states.emphasis.hoverLayer=!0)})}})}(ut,Dt),Do.trigger("series:afterupdate",Dt,bt,$t)},To=function(ut){ut[lh]=!0,ut.getZr().wakeUp()},ip=function(ut){!ut[lh]||(ut.getZr().storage.traverse(function(Dt){qt.eq(Dt)||Xe(Dt)}),ut[lh]=!1)},Zu=function(ut){return new(function(Dt){function bt(){return null!==Dt&&Dt.apply(this,arguments)||this}return(0,le.ZT)(bt,Dt),bt.prototype.getCoordinateSystems=function(){return ut._coordSysMgr.getCoordinateSystems()},bt.prototype.getComponentByElement=function(Bt){for(;Bt;){var $t=Bt.__ecComponentInfo;if(null!=$t)return ut._model.getComponent($t.mainType,$t.index);Bt=Bt.parent}},bt.prototype.enterEmphasis=function(Bt,$t){(0,$e.fD)(Bt,$t),To(ut)},bt.prototype.leaveEmphasis=function(Bt,$t){(0,$e.Mh)(Bt,$t),To(ut)},bt.prototype.enterBlur=function(Bt){(0,$e.SX)(Bt),To(ut)},bt.prototype.leaveBlur=function(Bt){(0,$e.VP)(Bt),To(ut)},bt.prototype.enterSelect=function(Bt){(0,$e.XX)(Bt),To(ut)},bt.prototype.leaveSelect=function(Bt){(0,$e.SJ)(Bt),To(ut)},bt.prototype.getModel=function(){return ut.getModel()},bt.prototype.getViewOfComponentModel=function(Bt){return ut.getViewOfComponentModel(Bt)},bt.prototype.getViewOfSeriesModel=function(Bt){return ut.getViewOfSeriesModel(Bt)},bt}(ie))(ut)},dh=function(ut){function Dt(bt,Bt){for(var $t=0;$t<bt.length;$t++)bt[$t][bl]=Bt}(0,ce.each)(hu,function(bt,Bt){ut._messageCenter.on(Bt,function($t){if(hi[ut.group]&&0!==ut[bl]){if($t&&$t.escapeConnect)return;var hn=ut.makeActionFromEvent($t),Cn=[];(0,ce.each)(ya,function(Hn){Hn!==ut&&Hn.group===ut.group&&Cn.push(Hn)}),Dt(Cn,0),(0,ce.each)(Cn,function(Hn){1!==Hn[bl]&&Hn.dispatchAction(hn)}),Dt(Cn,2)}})})}}(),Ge}(be.Z),jl=uo.prototype;jl.on=Gu("on"),jl.off=Gu("off"),jl.one=function(Oe,Ge,Le){var Ue=this;(0,Bn.Sh)("ECharts#one is deprecated."),this.on.call(this,Oe,function Xe(){for(var nt=[],pt=0;pt<arguments.length;pt++)nt[pt]=arguments[pt];Ge&&Ge.apply&&Ge.apply(this,nt),Ue.off(Oe,Xe)},Le)};var hh=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"],fh={},hu={},Eo=[],vr=[],ph=[],fu={},Sn={},ya={},hi={},Va=+new Date-0,da=+new Date-0,Js="_echarts_instance_";function Ao(Oe,Ge,Le){var Ue=!(Le&&Le.ssr);if(Ue){var Xe=Io(Oe);if(Xe)return Xe}var nt=new uo(Oe,Ge,Le);return nt.id="ec_"+Va++,ya[nt.id]=nt,Ue&&we.P$(Oe,Js,nt.id),dh(nt),Do.trigger("afterinit",nt),nt}function fs(Oe){if((0,ce.isArray)(Oe)){var Ge=Oe;Oe=null,(0,ce.each)(Ge,function(Le){null!=Le.group&&(Oe=Le.group)}),Oe=Oe||"g_"+da++,(0,ce.each)(Ge,function(Le){Le.group=Oe})}return hi[Oe]=!0,Oe}function zn(Oe){hi[Oe]=!1}var Fr=zn;function Yi(Oe){(0,ce.isString)(Oe)?Oe=ya[Oe]:Oe instanceof uo||(Oe=Io(Oe)),Oe instanceof uo&&!Oe.isDisposed()&&Oe.dispose()}function Io(Oe){return ya[we.IL(Oe,Js)]}function Zl(Oe){return ya[Oe]}function ha(Oe,Ge){fu[Oe]=Ge}function Yl(Oe){(0,ce.indexOf)(vr,Oe)<0&&vr.push(Oe)}function ra(Oe,Ge){xl(Eo,Oe,Ge,2e3)}function pu(Oe){zr("afterinit",Oe)}function Xl(Oe){zr("afterupdate",Oe)}function zr(Oe,Ge){Do.on(Oe,Ge)}function el(Oe,Ge,Le){(0,ce.isFunction)(Ge)&&(Le=Ge,Ge="");var Ue=(0,ce.isObject)(Oe)?Oe.type:[Oe,Oe={event:Ge}][0];Oe.event=(Oe.event||Ue).toLowerCase(),!hu[Ge=Oe.event]&&((0,ce.assert)(Rc.test(Ue)&&Rc.test(Ge)),fh[Ue]||(fh[Ue]={action:Le,actionInfo:Oe}),hu[Ge]=Ue)}function Oc(Oe,Ge){oe.Z.register(Oe,Ge)}function ap(Oe){var Ge=oe.Z.get(Oe);if(Ge)return Ge.getDimensionsInfo?Ge.getDimensionsInfo():Ge.dimensions.slice()}function kc(Oe,Ge){xl(ph,Oe,Ge,1e3,"layout")}function ia(Oe,Ge){xl(ph,Oe,Ge,3e3,"visual")}var Nc=[];function xl(Oe,Ge,Le,Ue,Xe){if(((0,ce.isFunction)(Ge)||(0,ce.isObject)(Ge))&&(Le=Ge,Ge=Ue),!((0,ce.indexOf)(Nc,Le)>=0)){Nc.push(Le);var nt=Ov.wrapStageHandler(Le,Xe);nt.__prio=Ge,nt.__raw=Le,Oe.push(nt)}}function ps(Oe,Ge){Sn[Oe]=Ge}function Fc(Oe){(0,Ts.g2)({createCanvas:Oe})}function Uv(Oe,Ge,Le){var Ue=(0,Mo.C)("registerMap");Ue&&Ue(Oe,Ge,Le)}function Hi(Oe){var Ge=(0,Mo.C)("getMap");return Ge&&Ge(Oe)}var o0=an.DA;ia(2e3,ea),ia(4500,Ea),ia(4500,Iv),ia(2e3,Nv),ia(4500,kr),ia(7e3,function Fv(Oe,Ge){Oe.eachRawSeries(function(Le){if(!Oe.isSeriesFiltered(Le)){var Ue=Le.getData();Ue.hasItemVisual()&&Ue.each(function(pt){var zt=Ue.getItemVisual(pt,"decal");zt&&(Ue.ensureUniqueItemVisual(pt,"style").decal=(0,Si.I)(zt,Ge))});var Xe=Ue.getVisual("decal");Xe&&(Ue.getVisual("style").decal=(0,Si.I)(Xe,Ge))}})}),Yl(jn),ra(900,function gr(Oe){var Ge=(0,ce.createHashMap)();Oe.eachSeries(function(Le){var Ue=Le.get("stack");if(Ue){var Xe=Ge.get(Ue)||Ge.set(Ue,[]),nt=Le.getData(),pt={stackResultDimension:nt.getCalculationInfo("stackResultDimension"),stackedOverDimension:nt.getCalculationInfo("stackedOverDimension"),stackedDimension:nt.getCalculationInfo("stackedDimension"),stackedByDimension:nt.getCalculationInfo("stackedByDimension"),isStackedByIndex:nt.getCalculationInfo("isStackedByIndex"),data:nt,seriesModel:Le};if(!pt.stackedDimension||!pt.isStackedByIndex&&!pt.stackedByDimension)return;Xe.length&&nt.setCalculationInfo("stackedOnSeries",Xe[Xe.length-1].seriesModel),Xe.push(pt)}}),Ge.each(Je)}),ps("default",function t0(Oe,Ge){ce.defaults(Ge=Ge||{},{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var Le=new Bu.Z,Ue=new dt.Z({style:{fill:Ge.maskColor},zlevel:Ge.zlevel,z:1e4});Le.add(Ue);var pt,Xe=new Vu.ZP({style:{text:Ge.text,fill:Ge.textColor,fontSize:Ge.fontSize,fontWeight:Ge.fontWeight,fontStyle:Ge.fontStyle,fontFamily:Ge.fontFamily},zlevel:Ge.zlevel,z:10001}),nt=new dt.Z({style:{fill:"none"},textContent:Xe,textConfig:{position:"right",distance:10},zlevel:Ge.zlevel,z:10001});return Le.add(nt),Ge.showSpinner&&((pt=new Pv.Z({shape:{startAngle:-Gl/2,endAngle:-Gl/2+.1,r:Ge.spinnerRadius},style:{stroke:Ge.color,lineCap:"round",lineWidth:Ge.lineWidth},zlevel:Ge.zlevel,z:10001})).animateShape(!0).when(1e3,{endAngle:3*Gl/2}).start("circularInOut"),pt.animateShape(!0).when(1e3,{startAngle:3*Gl/2}).delay(300).start("circularInOut"),Le.add(pt)),Le.resize=function(){var zt=Xe.getBoundingRect().width,Pt=Ge.showSpinner?Ge.spinnerRadius:0,tn=(Oe.getWidth()-2*Pt-(Ge.showSpinner&&zt?10:0)-zt)/2-(Ge.showSpinner&&zt?0:5+zt/2)+(Ge.showSpinner?0:zt/2)+(zt?0:Pt),xn=Oe.getHeight()/2;Ge.showSpinner&&pt.setShape({cx:tn,cy:xn}),nt.setShape({x:tn-Pt,y:xn-Pt,width:2*Pt,height:2*Pt}),Ue.setShape({x:0,y:0,width:Oe.getWidth(),height:Oe.getHeight()})},Le.resize(),Le}),el({type:$e.Ki,event:$e.Ki,update:$e.Ki},ce.noop),el({type:$e.yx,event:$e.yx,update:$e.yx},ce.noop),el({type:$e.Hg,event:$e.Hg,update:$e.Hg},ce.noop),el({type:$e.JQ,event:$e.JQ,update:$e.JQ},ce.noop),el({type:$e.iK,event:$e.iK,update:$e.iK},ce.noop),ha("light",Rt),ha("dark",ep);var Gv={}},9500:(Ut,rt,z)=>{z.d(rt,{C:()=>ce,M:()=>Se});var le={};function Se(_e,ye){le[_e]=ye}function ce(_e){return le[_e]}},7772:(Ut,rt,z)=>{z.d(rt,{sO:()=>G,D0:()=>te,Li:()=>Q,G8:()=>ee,I2:()=>Z});var le=z(1363),Se=z(9420),ye=z(9496),j={},$={},G=Se.Z.domSupported&&(document.documentElement.lang||navigator.language||navigator.browserLanguage||"EN").toUpperCase().indexOf("ZH")>-1?"ZH":"EN";function Z(J,b){J=J.toUpperCase(),$[J]=new le.Z(b),j[J]=b}function te(J){if((0,ye.isString)(J)){var b=j[J.toUpperCase()]||{};return"ZH"===J||"EN"===J?(0,ye.clone)(b):(0,ye.merge)((0,ye.clone)(b),(0,ye.clone)(j.EN),!1)}return(0,ye.merge)((0,ye.clone)(J),(0,ye.clone)(j.EN),!1)}function ee(J){return $[J]}function Q(){return $.EN}Z("EN",{time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}}),Z("ZH",{time:{month:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],dayOfWeekAbbr:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53cd\u9009"}},toolbox:{brush:{title:{rect:"\u77e9\u5f62\u9009\u62e9",polygon:"\u5708\u9009",lineX:"\u6a2a\u5411\u9009\u62e9",lineY:"\u7eb5\u5411\u9009\u62e9",keep:"\u4fdd\u6301\u9009\u62e9",clear:"\u6e05\u9664\u9009\u62e9"}},dataView:{title:"\u6570\u636e\u89c6\u56fe",lang:["\u6570\u636e\u89c6\u56fe","\u5173\u95ed","\u5237\u65b0"]},dataZoom:{title:{zoom:"\u533a\u57df\u7f29\u653e",back:"\u533a\u57df\u7f29\u653e\u8fd8\u539f"}},magicType:{title:{line:"\u5207\u6362\u4e3a\u6298\u7ebf\u56fe",bar:"\u5207\u6362\u4e3a\u67f1\u72b6\u56fe",stack:"\u5207\u6362\u4e3a\u5806\u53e0",tiled:"\u5207\u6362\u4e3a\u5e73\u94fa"}},restore:{title:"\u8fd8\u539f"},saveAsImage:{title:"\u4fdd\u5b58\u4e3a\u56fe\u7247",lang:["\u53f3\u952e\u53e6\u5b58\u4e3a\u56fe\u7247"]}},series:{typeNames:{pie:"\u997c\u56fe",bar:"\u67f1\u72b6\u56fe",line:"\u6298\u7ebf\u56fe",scatter:"\u6563\u70b9\u56fe",effectScatter:"\u6d9f\u6f2a\u6563\u70b9\u56fe",radar:"\u96f7\u8fbe\u56fe",tree:"\u6811\u56fe",treemap:"\u77e9\u5f62\u6811\u56fe",boxplot:"\u7bb1\u578b\u56fe",candlestick:"K\u7ebf\u56fe",k:"K\u7ebf\u56fe",heatmap:"\u70ed\u529b\u56fe",map:"\u5730\u56fe",parallel:"\u5e73\u884c\u5750\u6807\u56fe",lines:"\u7ebf\u56fe",graph:"\u5173\u7cfb\u56fe",sankey:"\u6851\u57fa\u56fe",funnel:"\u6f0f\u6597\u56fe",gauge:"\u4eea\u8868\u76d8\u56fe",pictorialBar:"\u8c61\u5f62\u67f1\u56fe",themeRiver:"\u4e3b\u9898\u6cb3\u6d41\u56fe",sunburst:"\u65ed\u65e5\u56fe",custom:"\u81ea\u5b9a\u4e49\u56fe\u8868",chart:"\u56fe\u8868"}},aria:{general:{withTitle:"\u8fd9\u662f\u4e00\u4e2a\u5173\u4e8e\u201c{title}\u201d\u7684\u56fe\u8868\u3002",withoutTitle:"\u8fd9\u662f\u4e00\u4e2a\u56fe\u8868\uff0c"},series:{single:{prefix:"",withName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\uff0c\u8868\u793a{seriesName}\u3002",withoutName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\u3002"},multiple:{prefix:"\u5b83\u7531{seriesCount}\u4e2a\u56fe\u8868\u7cfb\u5217\u7ec4\u6210\u3002",withName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a\u8868\u793a{seriesName}\u7684{seriesType}\uff0c",withoutName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a{seriesType}\uff0c",separator:{middle:"\uff1b",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636e\u662f\u2014\u2014",partialData:"\u5176\u4e2d\uff0c\u524d{displayCnt}\u9879\u662f\u2014\u2014",withName:"{name}\u7684\u6570\u636e\u662f{value}",withoutName:"{value}",separator:{middle:"\uff0c",end:""}}}})},9466:(Ut,rt,z)=>{z.d(rt,{v:()=>Se});var le=z(9496);function Se(ye){return new ce(ye)}var ce=function(){function ye(be){this._reset=(be=be||{}).reset,this._plan=be.plan,this._count=be.count,this._onDirty=be.onDirty,this._dirty=!0}return ye.prototype.perform=function(be){var $,we=this._upstream,de=be&&be.skip;if(this._dirty&&we){var j=this.context;j.data=j.outputData=we.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!de&&($=this._plan(this.context));var J,G=Q(this._modBy),Z=this._modDataCount||0,te=Q(be&&be.modBy),ee=be&&be.modDataCount||0;function Q(X){return!(X>=1)&&(X=1),X}(G!==te||Z!==ee)&&($="reset"),(this._dirty||"reset"===$)&&(this._dirty=!1,J=this._doReset(de)),this._modBy=te,this._modDataCount=ee;var b=be&&be.step;if(this._dueEnd=we?we._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var Y=this._dueIndex,q=Math.min(null!=b?this._dueIndex+b:1/0,this._dueEnd);if(!de&&(J||Y<q)){var H=this._progress;if((0,le.isArray)(H))for(var re=0;re<H.length;re++)this._doProgress(H[re],Y,q,te,ee);else this._doProgress(H,Y,q,te,ee)}this._dueIndex=q,this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:q}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()},ye.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},ye.prototype._doProgress=function(be,we,de,j,$){_e.reset(we,de,j,$),this._callingProgress=be,this._callingProgress({start:we,end:de,count:de-we,next:_e.next},this.context)},ye.prototype._doReset=function(be){var we,de;this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null,!be&&this._reset&&((we=this._reset(this.context))&&we.progress&&(de=we.forceFirstProgress,we=we.progress),(0,le.isArray)(we)&&!we.length&&(we=null)),this._progress=we,this._modBy=this._modDataCount=null;var j=this._downstream;return j&&j.dirty(),de},ye.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},ye.prototype.pipe=function(be){(this._downstream!==be||this._dirty)&&(this._downstream=be,be._upstream=this,be.dirty())},ye.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},ye.prototype.getUpstream=function(){return this._upstream},ye.prototype.getDownstream=function(){return this._downstream},ye.prototype.setOutputEnd=function(be){this._outputDueEnd=this._settedOutputEnd=be},ye}(),_e=function(){var ye,be,we,de,j,$={reset:function(te,ee,Q,J){be=te,ye=ee,we=Q,de=J,j=Math.ceil(de/we),$.next=we>1&&de>0?Z:G}};return $;function G(){return be<ye?be++:null}function Z(){var te=be%j*we+Math.ceil(be/j),ee=be>=ye?null:te<de?te:be;return be++,ee}}()},3926:(Ut,rt,z)=>{function le(ye){return null==ye?0:ye.length||1}function Se(ye){return ye}z.d(rt,{Z:()=>_e});const _e=function(){function ye(be,we,de,j,$,G){this._old=be,this._new=we,this._oldKeyGetter=de||Se,this._newKeyGetter=j||Se,this.context=$,this._diffModeMultiple="multiple"===G}return ye.prototype.add=function(be){return this._add=be,this},ye.prototype.update=function(be){return this._update=be,this},ye.prototype.updateManyToOne=function(be){return this._updateManyToOne=be,this},ye.prototype.updateOneToMany=function(be){return this._updateOneToMany=be,this},ye.prototype.updateManyToMany=function(be){return this._updateManyToMany=be,this},ye.prototype.remove=function(be){return this._remove=be,this},ye.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},ye.prototype._executeOneToOne=function(){var be=this._old,we=this._new,de={},j=new Array(be.length),$=new Array(we.length);this._initIndexMap(be,null,j,"_oldKeyGetter"),this._initIndexMap(we,de,$,"_newKeyGetter");for(var G=0;G<be.length;G++){var Z=j[G],te=de[Z],ee=le(te);if(ee>1){var Q=te.shift();1===te.length&&(de[Z]=te[0]),this._update&&this._update(Q,G)}else 1===ee?(de[Z]=null,this._update&&this._update(te,G)):this._remove&&this._remove(G)}this._performRestAdd($,de)},ye.prototype._executeMultiple=function(){var we=this._new,de={},j={},$=[],G=[];this._initIndexMap(this._old,de,$,"_oldKeyGetter"),this._initIndexMap(we,j,G,"_newKeyGetter");for(var Z=0;Z<$.length;Z++){var te=$[Z],ee=de[te],Q=j[te],J=le(ee),b=le(Q);if(J>1&&1===b)this._updateManyToOne&&this._updateManyToOne(Q,ee),j[te]=null;else if(1===J&&b>1)this._updateOneToMany&&this._updateOneToMany(Q,ee),j[te]=null;else if(1===J&&1===b)this._update&&this._update(Q,ee),j[te]=null;else if(J>1&&b>1)this._updateManyToMany&&this._updateManyToMany(Q,ee),j[te]=null;else if(J>1)for(var Y=0;Y<J;Y++)this._remove&&this._remove(ee[Y]);else this._remove&&this._remove(ee)}this._performRestAdd(G,j)},ye.prototype._performRestAdd=function(be,we){for(var de=0;de<be.length;de++){var j=be[de],$=we[j],G=le($);if(G>1)for(var Z=0;Z<G;Z++)this._add&&this._add($[Z]);else 1===G&&this._add&&this._add($);we[j]=null}},ye.prototype._initIndexMap=function(be,we,de,j){for(var $=this._diffModeMultiple,G=0;G<be.length;G++){var Z="_ec_"+this[j](be[G],G);if($||(de[G]=Z),we){var te=we[Z],ee=le(te);0===ee?(we[Z]=G,$&&de.push(Z)):1===ee?we[Z]=[te,G]:te.push(G)}}},ye}()},5780:(Ut,rt,z)=>{z.d(rt,{ZP:()=>J,hG:()=>we});var $,le=z(9496),Se=z(2401),ce=z(5743),_e="undefined",ye=typeof Uint32Array===_e?Array:Uint32Array,be=typeof Uint16Array===_e?Array:Uint16Array,we=typeof Int32Array===_e?Array:Int32Array,de=typeof Float64Array===_e?Array:Float64Array,j={float:de,int:we,ordinal:Array,number:Array,time:de};function G(b){return b>65535?ye:be}function te(b){var Y=b.constructor;return Y===Array?b.slice():new Y(b)}function ee(b,Y,q,H,re){var W=j[q||"float"];if(re){var X=b[Y],K=X&&X.length;if(K!==H){for(var B=new W(H),O=0;O<K;O++)B[O]=X[O];b[Y]=B}}else b[Y]=new W(H)}const J=function(){function b(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=(0,le.createHashMap)()}return b.prototype.initData=function(Y,q,H){this._provider=Y,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var re=Y.getSource(),W=this.defaultDimValueGetter=$[re.sourceFormat];this._dimValueGetter=H||W,this._rawExtent=[],(0,ce.QY)(re),this._dimensions=(0,le.map)(q,function(K){return{type:K.type,property:K.property}}),this._initDataFromProvider(0,Y.count())},b.prototype.getProvider=function(){return this._provider},b.prototype.getSource=function(){return this._provider.getSource()},b.prototype.ensureCalculationDimension=function(Y,q){var H=this._calcDimNameToIdx,re=this._dimensions,W=H.get(Y);if(null!=W){if(re[W].type===q)return W}else W=re.length;return re[W]={type:q},H.set(Y,W),this._chunks[W]=new j[q||"float"](this._rawCount),this._rawExtent[W]=[1/0,-1/0],W},b.prototype.collectOrdinalMeta=function(Y,q){var H=this._chunks[Y],re=this._dimensions[Y],W=this._rawExtent,X=re.ordinalOffset||0,K=H.length;0===X&&(W[Y]=[1/0,-1/0]);for(var B=W[Y],O=X;O<K;O++){var D=H[O]=q.parseAndCollect(H[O]);isNaN(D)||(B[0]=Math.min(D,B[0]),B[1]=Math.max(D,B[1]))}re.ordinalMeta=q,re.ordinalOffset=K,re.type="ordinal"},b.prototype.getOrdinalMeta=function(Y){return this._dimensions[Y].ordinalMeta},b.prototype.getDimensionProperty=function(Y){var q=this._dimensions[Y];return q&&q.property},b.prototype.appendData=function(Y){var q=this._provider,H=this.count();q.appendData(Y);var re=q.count();return q.persistent||(re+=H),H<re&&this._initDataFromProvider(H,re,!0),[H,re]},b.prototype.appendValues=function(Y,q){for(var H=this._chunks,re=this._dimensions,W=re.length,X=this._rawExtent,K=this.count(),B=K+Math.max(Y.length,q||0),O=0;O<W;O++)ee(H,O,re[O].type,B,!0);for(var P=[],I=K;I<B;I++)for(var T=I-K,A=0;A<W;A++){var L=$.arrayRows.call(this,Y[T]||P,re[A].property,T,A);H[A][I]=L;var N=X[A];L<N[0]&&(N[0]=L),L>N[1]&&(N[1]=L)}return this._rawCount=this._count=B,{start:K,end:B}},b.prototype._initDataFromProvider=function(Y,q,H){for(var re=this._provider,W=this._chunks,X=this._dimensions,K=X.length,B=this._rawExtent,O=(0,le.map)(X,function(oe){return oe.property}),D=0;D<K;D++){var P=X[D];B[D]||(B[D]=[1/0,-1/0]),ee(W,D,P.type,q,H)}if(re.fillStorage)re.fillStorage(Y,q,W,B);else for(var I=[],T=Y;T<q;T++){I=re.getItem(T,I);for(var A=0;A<K;A++){var L=W[A],N=this._dimValueGetter(I,O[A],T,A);L[T]=N;var ie=B[A];N<ie[0]&&(ie[0]=N),N>ie[1]&&(ie[1]=N)}}!re.persistent&&re.clean&&re.clean(),this._rawCount=this._count=q,this._extent=[]},b.prototype.count=function(){return this._count},b.prototype.get=function(Y,q){if(!(q>=0&&q<this._count))return NaN;var H=this._chunks[Y];return H?H[this.getRawIndex(q)]:NaN},b.prototype.getValues=function(Y,q){var H=[],re=[];if(null==q){q=Y,Y=[];for(var W=0;W<this._dimensions.length;W++)re.push(W)}else re=Y;W=0;for(var X=re.length;W<X;W++)H.push(this.get(re[W],q));return H},b.prototype.getByRawIndex=function(Y,q){if(!(q>=0&&q<this._rawCount))return NaN;var H=this._chunks[Y];return H?H[q]:NaN},b.prototype.getSum=function(Y){var H=0;if(this._chunks[Y])for(var re=0,W=this.count();re<W;re++){var X=this.get(Y,re);isNaN(X)||(H+=X)}return H},b.prototype.getMedian=function(Y){var q=[];this.each([Y],function(W){isNaN(W)||q.push(W)});var H=q.sort(function(W,X){return W-X}),re=this.count();return 0===re?0:re%2==1?H[(re-1)/2]:(H[re/2]+H[re/2-1])/2},b.prototype.indexOfRawIndex=function(Y){if(Y>=this._rawCount||Y<0)return-1;if(!this._indices)return Y;var q=this._indices,H=q[Y];if(null!=H&&H<this._count&&H===Y)return Y;for(var re=0,W=this._count-1;re<=W;){var X=(re+W)/2|0;if(q[X]<Y)re=X+1;else{if(!(q[X]>Y))return X;W=X-1}}return-1},b.prototype.indicesOfNearest=function(Y,q,H){var W=this._chunks[Y],X=[];if(!W)return X;null==H&&(H=1/0);for(var K=1/0,B=-1,O=0,D=0,P=this.count();D<P;D++){var T=q-W[this.getRawIndex(D)],A=Math.abs(T);A<=H&&((A<K||A===K&&T>=0&&B<0)&&(K=A,B=T,O=0),T===B&&(X[O++]=D))}return X.length=O,X},b.prototype.getIndices=function(){var Y,q=this._indices;if(q){var re=this._count;if((H=q.constructor)===Array){Y=new H(re);for(var W=0;W<re;W++)Y[W]=q[W]}else Y=new H(q.buffer,0,re)}else{var H;for(Y=new(H=G(this._rawCount))(this.count()),W=0;W<Y.length;W++)Y[W]=W}return Y},b.prototype.filter=function(Y,q){if(!this._count)return this;for(var H=this.clone(),re=H.count(),X=new(G(H._rawCount))(re),K=[],B=Y.length,O=0,D=Y[0],P=H._chunks,I=0;I<re;I++){var T=void 0,A=H.getRawIndex(I);if(0===B)T=q(I);else if(1===B)T=q(P[D][A],I);else{for(var N=0;N<B;N++)K[N]=P[Y[N]][A];K[N]=I,T=q.apply(null,K)}T&&(X[O++]=A)}return O<re&&(H._indices=X),H._count=O,H._extent=[],H._updateGetRawIdx(),H},b.prototype.selectRange=function(Y){var q=this.clone(),H=q._count;if(!H)return this;var re=(0,le.keys)(Y),W=re.length;if(!W)return this;var X=q.count(),B=new(G(q._rawCount))(X),O=0,D=re[0],P=Y[D][0],I=Y[D][1],T=q._chunks,A=!1;if(!q._indices){var L=0;if(1===W){for(var N=T[re[0]],ie=0;ie<H;ie++)((oe=N[ie])>=P&&oe<=I||isNaN(oe))&&(B[O++]=L),L++;A=!0}else if(2===W){N=T[re[0]];var ae=T[re[1]],he=Y[re[1]][0],se=Y[re[1]][1];for(ie=0;ie<H;ie++){var xe=ae[ie];((oe=N[ie])>=P&&oe<=I||isNaN(oe))&&(xe>=he&&xe<=se||isNaN(xe))&&(B[O++]=L),L++}A=!0}}if(!A)if(1===W)for(ie=0;ie<X;ie++){var fe=q.getRawIndex(ie);((oe=T[re[0]][fe])>=P&&oe<=I||isNaN(oe))&&(B[O++]=fe)}else for(ie=0;ie<X;ie++){for(var ge=!0,Ce=(fe=q.getRawIndex(ie),0);Ce<W;Ce++){var oe,Te=re[Ce];((oe=T[Te][fe])<Y[Te][0]||oe>Y[Te][1])&&(ge=!1)}ge&&(B[O++]=q.getRawIndex(ie))}return O<X&&(q._indices=B),q._count=O,q._extent=[],q._updateGetRawIdx(),q},b.prototype.map=function(Y,q){var H=this.clone(Y);return this._updateDims(H,Y,q),H},b.prototype.modify=function(Y,q){this._updateDims(this,Y,q)},b.prototype._updateDims=function(Y,q,H){for(var re=Y._chunks,W=[],X=q.length,K=Y.count(),B=[],O=Y._rawExtent,D=0;D<q.length;D++)O[q[D]]=[1/0,-1/0];for(var P=0;P<K;P++){for(var I=Y.getRawIndex(P),T=0;T<X;T++)B[T]=re[q[T]][I];B[X]=P;var A=H&&H.apply(null,B);if(null!=A)for("object"!=typeof A&&(W[0]=A,A=W),D=0;D<A.length;D++){var L=q[D],N=A[D],ie=O[L],oe=re[L];oe&&(oe[I]=N),N<ie[0]&&(ie[0]=N),N>ie[1]&&(ie[1]=N)}}},b.prototype.lttbDownSample=function(Y,q){var D,P,I,H=this.clone([Y],!0),W=H._chunks[Y],X=this.count(),K=0,B=Math.floor(1/q),O=this.getRawIndex(0),T=new(G(this._rawCount))(Math.min(2*(Math.ceil(X/B)+2),X));T[K++]=O;for(var A=1;A<X-1;A+=B){for(var L=Math.min(A+B,X-1),N=Math.min(A+2*B,X),ie=(N+L)/2,oe=0,ae=L;ae<N;ae++){var se=W[he=this.getRawIndex(ae)];isNaN(se)||(oe+=se)}oe/=N-L;var xe=A,fe=Math.min(A+B,X),ge=A-1,Ce=W[O];D=-1,I=xe;var Te=-1,Ie=0;for(ae=xe;ae<fe;ae++){var he;se=W[he=this.getRawIndex(ae)],isNaN(se)?(Ie++,Te<0&&(Te=he)):(P=Math.abs((ge-ie)*(se-Ce)-(ge-ae)*(oe-Ce)))>D&&(D=P,I=he)}Ie>0&&Ie<fe-xe&&(T[K++]=Math.min(Te,I),I=Math.max(Te,I)),T[K++]=I,O=I}return T[K++]=this.getRawIndex(X-1),H._count=K,H._indices=T,H.getRawIndex=this._getRawIdx,H},b.prototype.downSample=function(Y,q,H,re){for(var W=this.clone([Y],!0),X=W._chunks,K=[],B=Math.floor(1/q),O=X[Y],D=this.count(),P=W._rawExtent[Y]=[1/0,-1/0],I=new(G(this._rawCount))(Math.ceil(D/B)),T=0,A=0;A<D;A+=B){B>D-A&&(K.length=B=D-A);for(var L=0;L<B;L++){var N=this.getRawIndex(A+L);K[L]=O[N]}var ie=H(K),oe=this.getRawIndex(Math.min(A+re(K,ie)||0,D-1));O[oe]=ie,ie<P[0]&&(P[0]=ie),ie>P[1]&&(P[1]=ie),I[T++]=oe}return W._count=T,W._indices=I,W._updateGetRawIdx(),W},b.prototype.each=function(Y,q){if(this._count)for(var H=Y.length,re=this._chunks,W=0,X=this.count();W<X;W++){var K=this.getRawIndex(W);switch(H){case 0:q(W);break;case 1:q(re[Y[0]][K],W);break;case 2:q(re[Y[0]][K],re[Y[1]][K],W);break;default:for(var B=0,O=[];B<H;B++)O[B]=re[Y[B]][K];O[B]=W,q.apply(null,O)}}},b.prototype.getDataExtent=function(Y){var q=this._chunks[Y],H=[1/0,-1/0];if(!q)return H;var X,re=this.count();if(!this._indices)return this._rawExtent[Y].slice();if(X=this._extent[Y])return X.slice();for(var K=(X=H)[0],B=X[1],O=0;O<re;O++){var P=q[this.getRawIndex(O)];P<K&&(K=P),P>B&&(B=P)}return this._extent[Y]=X=[K,B],X},b.prototype.getRawDataItem=function(Y){var q=this.getRawIndex(Y);if(this._provider.persistent)return this._provider.getItem(q);for(var H=[],re=this._chunks,W=0;W<re.length;W++)H.push(re[W][q]);return H},b.prototype.clone=function(Y,q){var H=new b,re=this._chunks,W=Y&&(0,le.reduce)(Y,function(K,B){return K[B]=!0,K},{});if(W)for(var X=0;X<re.length;X++)H._chunks[X]=W[X]?te(re[X]):re[X];else H._chunks=re;return this._copyCommonProps(H),q||(H._indices=this._cloneIndices()),H._updateGetRawIdx(),H},b.prototype._copyCommonProps=function(Y){Y._count=this._count,Y._rawCount=this._rawCount,Y._provider=this._provider,Y._dimensions=this._dimensions,Y._extent=(0,le.clone)(this._extent),Y._rawExtent=(0,le.clone)(this._rawExtent)},b.prototype._cloneIndices=function(){if(this._indices){var Y=this._indices.constructor,q=void 0;if(Y===Array){var H=this._indices.length;q=new Y(H);for(var re=0;re<H;re++)q[re]=this._indices[re]}else q=new Y(this._indices);return q}return null},b.prototype._getRawIdxIdentity=function(Y){return Y},b.prototype._getRawIdx=function(Y){return Y<this._count&&Y>=0?this._indices[Y]:-1},b.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},b.internalField=function(){function Y(q,H,re,W){return(0,Se.yQ)(q[W],this._dimensions[W])}$={arrayRows:Y,objectRows:function(q,H,re,W){return(0,Se.yQ)(q[H],this._dimensions[W])},keyedColumns:Y,original:function(q,H,re,W){var X=q&&(q.value??q);return(0,Se.yQ)(X instanceof Array?X[W]:X,this._dimensions[W])},typedArray:function(q,H,re,W){return q[W]}}}(),b}()},555:(Ut,rt,z)=>{z.d(rt,{ZP:()=>we});var le=z(9496);function Se(de){return"_EC_"+de}var ce=function(){function de(j){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=j||!1}return de.prototype.isDirected=function(){return this._directed},de.prototype.addNode=function(j,$){var G=this._nodesMap;if(!G[Se(j=null==j?""+$:""+j)]){var Z=new _e(j,$);return Z.hostGraph=this,this.nodes.push(Z),G[Se(j)]=Z,Z}},de.prototype.getNodeByIndex=function(j){var $=this.data.getRawIndex(j);return this.nodes[$]},de.prototype.getNodeById=function(j){return this._nodesMap[Se(j)]},de.prototype.addEdge=function(j,$,G){var Z=this._nodesMap,te=this._edgesMap;if(le.isNumber(j)&&(j=this.nodes[j]),le.isNumber($)&&($=this.nodes[$]),j instanceof _e||(j=Z[Se(j)]),$ instanceof _e||($=Z[Se($)]),j&&$){var ee=j.id+"-"+$.id,Q=new ye(j,$,G);return Q.hostGraph=this,this._directed&&(j.outEdges.push(Q),$.inEdges.push(Q)),j.edges.push(Q),j!==$&&$.edges.push(Q),this.edges.push(Q),te[ee]=Q,Q}},de.prototype.getEdgeByIndex=function(j){var $=this.edgeData.getRawIndex(j);return this.edges[$]},de.prototype.getEdge=function(j,$){j instanceof _e&&(j=j.id),$ instanceof _e&&($=$.id);var G=this._edgesMap;return this._directed?G[j+"-"+$]:G[j+"-"+$]||G[$+"-"+j]},de.prototype.eachNode=function(j,$){for(var G=this.nodes,Z=G.length,te=0;te<Z;te++)G[te].dataIndex>=0&&j.call($,G[te],te)},de.prototype.eachEdge=function(j,$){for(var G=this.edges,Z=G.length,te=0;te<Z;te++)G[te].dataIndex>=0&&G[te].node1.dataIndex>=0&&G[te].node2.dataIndex>=0&&j.call($,G[te],te)},de.prototype.breadthFirstTraverse=function(j,$,G,Z){if($ instanceof _e||($=this._nodesMap[Se($)]),$){for(var te="out"===G?"outEdges":"in"===G?"inEdges":"edges",ee=0;ee<this.nodes.length;ee++)this.nodes[ee].__visited=!1;if(!j.call(Z,$,null))for(var Q=[$];Q.length;){var J=Q.shift(),b=J[te];for(ee=0;ee<b.length;ee++){var Y=b[ee],q=Y.node1===J?Y.node2:Y.node1;if(!q.__visited){if(j.call(Z,q,J))return;Q.push(q),q.__visited=!0}}}}},de.prototype.update=function(){for(var j=this.data,$=this.edgeData,G=this.nodes,Z=this.edges,te=0,ee=G.length;te<ee;te++)G[te].dataIndex=-1;for(te=0,ee=j.count();te<ee;te++)G[j.getRawIndex(te)].dataIndex=te;for($.filterSelf(function(Q){var J=Z[$.getRawIndex(Q)];return J.node1.dataIndex>=0&&J.node2.dataIndex>=0}),te=0,ee=Z.length;te<ee;te++)Z[te].dataIndex=-1;for(te=0,ee=$.count();te<ee;te++)Z[$.getRawIndex(te)].dataIndex=te},de.prototype.clone=function(){for(var j=new de(this._directed),$=this.nodes,G=this.edges,Z=0;Z<$.length;Z++)j.addNode($[Z].id,$[Z].dataIndex);for(Z=0;Z<G.length;Z++){var te=G[Z];j.addEdge(te.node1.id,te.node2.id,te.dataIndex)}return j},de}(),_e=function(){function de(j,$){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=j??"",this.dataIndex=$??-1}return de.prototype.degree=function(){return this.edges.length},de.prototype.inDegree=function(){return this.inEdges.length},de.prototype.outDegree=function(){return this.outEdges.length},de.prototype.getModel=function(j){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(j)},de.prototype.getAdjacentDataIndices=function(){for(var j={edge:[],node:[]},$=0;$<this.edges.length;$++){var G=this.edges[$];G.dataIndex<0||(j.edge.push(G.dataIndex),j.node.push(G.node1.dataIndex,G.node2.dataIndex))}return j},de.prototype.getTrajectoryDataIndices=function(){for(var j=le.createHashMap(),$=le.createHashMap(),G=0;G<this.edges.length;G++){var Z=this.edges[G];if(!(Z.dataIndex<0)){j.set(Z.dataIndex,!0);for(var te=[Z.node1],ee=[Z.node2],Q=0;Q<te.length;){var J=te[Q];Q++,$.set(J.dataIndex,!0);for(var b=0;b<J.inEdges.length;b++)j.set(J.inEdges[b].dataIndex,!0),te.push(J.inEdges[b].node1)}for(Q=0;Q<ee.length;){var Y=ee[Q];for(Q++,$.set(Y.dataIndex,!0),b=0;b<Y.outEdges.length;b++)j.set(Y.outEdges[b].dataIndex,!0),ee.push(Y.outEdges[b].node2)}}}return{edge:j.keys(),node:$.keys()}},de}(),ye=function(){function de(j,$,G){this.dataIndex=-1,this.node1=j,this.node2=$,this.dataIndex=G??-1}return de.prototype.getModel=function(j){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(j)},de.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},de.prototype.getTrajectoryDataIndices=function(){var j=le.createHashMap(),$=le.createHashMap();j.set(this.dataIndex,!0);for(var G=[this.node1],Z=[this.node2],te=0;te<G.length;){var ee=G[te];te++,$.set(ee.dataIndex,!0);for(var Q=0;Q<ee.inEdges.length;Q++)j.set(ee.inEdges[Q].dataIndex,!0),G.push(ee.inEdges[Q].node1)}for(te=0;te<Z.length;){var J=Z[te];for(te++,$.set(J.dataIndex,!0),Q=0;Q<J.outEdges.length;Q++)j.set(J.outEdges[Q].dataIndex,!0),Z.push(J.outEdges[Q].node2)}return{edge:j.keys(),node:$.keys()}},de}();function be(de,j){return{getValue:function($){var G=this[de][j];return G.getStore().get(G.getDimensionIndex($||"value"),this.dataIndex)},setVisual:function($,G){this.dataIndex>=0&&this[de][j].setItemVisual(this.dataIndex,$,G)},getVisual:function($){return this[de][j].getItemVisual(this.dataIndex,$)},setLayout:function($,G){this.dataIndex>=0&&this[de][j].setItemLayout(this.dataIndex,$,G)},getLayout:function(){return this[de][j].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[de][j].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[de][j].getRawIndex(this.dataIndex)}}}le.mixin(_e,be("hostGraph","data")),le.mixin(ye,be("hostGraph","edgeData"));const we=ce},6681:(Ut,rt,z)=>{z.d(rt,{Z:()=>ye});var le=z(9496),Se=0;function _e(be){return(0,le.isObject)(be)&&null!=be.value?be.value:be+""}const ye=function(){function be(we){this.categories=we.categories||[],this._needCollect=we.needCollect,this._deduplication=we.deduplication,this.uid=++Se}return be.createByAxisModel=function(we){var de=we.option,j=de.data,$=j&&(0,le.map)(j,_e);return new be({categories:$,needCollect:!$,deduplication:!1!==de.dedplication})},be.prototype.getOrdinal=function(we){return this._getOrCreateMap().get(we)},be.prototype.parseAndCollect=function(we){var de,j=this._needCollect;if(!(0,le.isString)(we)&&!j)return we;if(j&&!this._deduplication)return this.categories[de=this.categories.length]=we,de;var $=this._getOrCreateMap();return null==(de=$.get(we))&&(j?(this.categories[de=this.categories.length]=we,$.set(we,de)):de=NaN),de},be.prototype._getOrCreateMap=function(){return this._map||(this._map=(0,le.createHashMap)(this.categories))},be}()},1082:(Ut,rt,z)=>{z.d(rt,{Z:()=>P});var H,re,W,X,K,B,O,le=z(9496),Se=z(1363),ce=z(3926),_e=z(7654),ye=z(5618),be=z(8911),we=z(678),de=z(2846),j=z(1096),$=z(5743),G=z(5780),Z=z(4273),te=le.isObject,ee=le.map,Q=typeof Int32Array>"u"?Array:Int32Array,Y=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],q=["_approximateExtent"];const P=function(){function I(T,A){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var L,N=!1;(0,Z.bB)(T)?(L=T.dimensions,this._dimOmitted=T.isDimensionOmitted(),this._schema=T):(N=!0,L=T),L=L||["x","y"];for(var ie={},oe=[],ae={},he=!1,se={},xe=0;xe<L.length;xe++){var fe=L[xe],ge=le.isString(fe)?new be.Z({name:fe}):fe instanceof be.Z?fe:new be.Z(fe),Ce=ge.name;ge.type=ge.type||"float",ge.coordDim||(ge.coordDim=Ce,ge.coordDimIndex=0);var Te=ge.otherDims=ge.otherDims||{};oe.push(Ce),ie[Ce]=ge,null!=se[Ce]&&(he=!0),ge.createInvertedIndices&&(ae[Ce]=[]),0===Te.itemName&&(this._nameDimIdx=xe),0===Te.itemId&&(this._idDimIdx=xe),N&&(ge.storeDimIndex=xe)}if(this.dimensions=oe,this._dimInfos=ie,this._initGetDimensionInfo(he),this.hostModel=A,this._invertedIndicesMap=ae,this._dimOmitted){var Ie=this._dimIdxToName=le.createHashMap();le.each(oe,function(Ee){Ie.set(ie[Ee].storeDimIndex,Ee)})}}return I.prototype.getDimension=function(T){var A=this._recognizeDimIndex(T);if(null==A)return T;if(A=T,!this._dimOmitted)return this.dimensions[A];var L=this._dimIdxToName.get(A);if(null!=L)return L;var N=this._schema.getSourceDimension(A);return N?N.name:void 0},I.prototype.getDimensionIndex=function(T){var A=this._recognizeDimIndex(T);if(null!=A)return A;if(null==T)return-1;var L=this._getDimInfo(T);return L?L.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(T):-1},I.prototype._recognizeDimIndex=function(T){if(le.isNumber(T)||null!=T&&!isNaN(T)&&!this._getDimInfo(T)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(T)<0))return+T},I.prototype._getStoreDimIndex=function(T){return this.getDimensionIndex(T)},I.prototype.getDimensionInfo=function(T){return this._getDimInfo(this.getDimension(T))},I.prototype._initGetDimensionInfo=function(T){var A=this._dimInfos;this._getDimInfo=T?function(L){return A.hasOwnProperty(L)?A[L]:void 0}:function(L){return A[L]}},I.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},I.prototype.mapDimension=function(T,A){var L=this._dimSummary;if(null==A)return L.encodeFirstDimNotExtra[T];var N=L.encode[T];return N?N[A]:null},I.prototype.mapDimensionsAll=function(T){return(this._dimSummary.encode[T]||[]).slice()},I.prototype.getStore=function(){return this._store},I.prototype.initData=function(T,A,L){var ie,N=this;if(T instanceof G.ZP&&(ie=T),!ie){var oe=this.dimensions,ae=(0,$.Ld)(T)||le.isArrayLike(T)?new _e.Pl(T,oe.length):T;ie=new G.ZP;var he=ee(oe,function(se){return{type:N._dimInfos[se].type,property:se}});ie.initData(ae,he,L)}this._store=ie,this._nameList=(A||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,ie.count()),this._dimSummary=(0,ye.y)(this,this._schema),this.userOutput=this._dimSummary.userOutput},I.prototype.appendData=function(T){var A=this._store.appendData(T);this._doInit(A[0],A[1])},I.prototype.appendValues=function(T,A){var L=this._store.appendValues(T,A.length),N=L.start,ie=L.end,oe=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),A)for(var ae=N;ae<ie;ae++)this._nameList[ae]=A[ae-N],oe&&O(this,ae)},I.prototype._updateOrdinalMeta=function(){for(var T=this._store,A=this.dimensions,L=0;L<A.length;L++){var N=this._dimInfos[A[L]];N.ordinalMeta&&T.collectOrdinalMeta(N.storeDimIndex,N.ordinalMeta)}},I.prototype._shouldMakeIdFromName=function(){var T=this._store.getProvider();return null==this._idDimIdx&&T.getSource().sourceFormat!==we.J5&&!T.fillStorage},I.prototype._doInit=function(T,A){if(!(T>=A)){var N=this._store.getProvider();this._updateOrdinalMeta();var ie=this._nameList,oe=this._idList;if(N.getSource().sourceFormat===we.cy&&!N.pure)for(var se=[],xe=T;xe<A;xe++){var fe=N.getItem(xe,se);if(!this.hasItemOption&&(0,de.Co)(fe)&&(this.hasItemOption=!0),fe){var ge=fe.name;null==ie[xe]&&null!=ge&&(ie[xe]=(0,de.U5)(ge,null));var Ce=fe.id;null==oe[xe]&&null!=Ce&&(oe[xe]=(0,de.U5)(Ce,null))}}if(this._shouldMakeIdFromName())for(xe=T;xe<A;xe++)O(this,xe);H(this)}},I.prototype.getApproximateExtent=function(T){return this._approximateExtent[T]||this._store.getDataExtent(this._getStoreDimIndex(T))},I.prototype.setApproximateExtent=function(T,A){A=this.getDimension(A),this._approximateExtent[A]=T.slice()},I.prototype.getCalculationInfo=function(T){return this._calculationInfo[T]},I.prototype.setCalculationInfo=function(T,A){te(T)?le.extend(this._calculationInfo,T):this._calculationInfo[T]=A},I.prototype.getName=function(T){var A=this.getRawIndex(T),L=this._nameList[A];return null==L&&null!=this._nameDimIdx&&(L=W(this,this._nameDimIdx,A)),null==L&&(L=""),L},I.prototype._getCategory=function(T,A){var L=this._store.get(T,A),N=this._store.getOrdinalMeta(T);return N?N.categories[L]:L},I.prototype.getId=function(T){return re(this,this.getRawIndex(T))},I.prototype.count=function(){return this._store.count()},I.prototype.get=function(T,A){var N=this._dimInfos[T];if(N)return this._store.get(N.storeDimIndex,A)},I.prototype.getByRawIndex=function(T,A){var N=this._dimInfos[T];if(N)return this._store.getByRawIndex(N.storeDimIndex,A)},I.prototype.getIndices=function(){return this._store.getIndices()},I.prototype.getDataExtent=function(T){return this._store.getDataExtent(this._getStoreDimIndex(T))},I.prototype.getSum=function(T){return this._store.getSum(this._getStoreDimIndex(T))},I.prototype.getMedian=function(T){return this._store.getMedian(this._getStoreDimIndex(T))},I.prototype.getValues=function(T,A){var L=this,N=this._store;return le.isArray(T)?N.getValues(ee(T,function(ie){return L._getStoreDimIndex(ie)}),A):N.getValues(T)},I.prototype.hasValue=function(T){for(var A=this._dimSummary.dataDimIndicesOnCoord,L=0,N=A.length;L<N;L++)if(isNaN(this._store.get(A[L],T)))return!1;return!0},I.prototype.indexOfName=function(T){for(var A=0,L=this._store.count();A<L;A++)if(this.getName(A)===T)return A;return-1},I.prototype.getRawIndex=function(T){return this._store.getRawIndex(T)},I.prototype.indexOfRawIndex=function(T){return this._store.indexOfRawIndex(T)},I.prototype.rawIndexOf=function(T,A){var N=(T&&this._invertedIndicesMap[T])[A];return null==N||isNaN(N)?-1:N},I.prototype.indicesOfNearest=function(T,A,L){return this._store.indicesOfNearest(this._getStoreDimIndex(T),A,L)},I.prototype.each=function(T,A,L){le.isFunction(T)&&(L=A,A=T,T=[]);var N=L||this,ie=ee(X(T),this._getStoreDimIndex,this);this._store.each(ie,N?le.bind(A,N):A)},I.prototype.filterSelf=function(T,A,L){le.isFunction(T)&&(L=A,A=T,T=[]);var N=L||this,ie=ee(X(T),this._getStoreDimIndex,this);return this._store=this._store.filter(ie,N?le.bind(A,N):A),this},I.prototype.selectRange=function(T){var A=this,L={},N=le.keys(T),ie=[];return le.each(N,function(oe){var ae=A._getStoreDimIndex(oe);L[ae]=T[oe],ie.push(ae)}),this._store=this._store.selectRange(L),this},I.prototype.mapArray=function(T,A,L){le.isFunction(T)&&(L=A,A=T,T=[]);var N=[];return this.each(T,function(){N.push(A&&A.apply(this,arguments))},L=L||this),N},I.prototype.map=function(T,A,L,N){var ie=L||N||this,oe=ee(X(T),this._getStoreDimIndex,this),ae=B(this);return ae._store=this._store.map(oe,ie?le.bind(A,ie):A),ae},I.prototype.modify=function(T,A,L,N){var oe=L||N||this,ae=ee(X(T),this._getStoreDimIndex,this);this._store.modify(ae,oe?le.bind(A,oe):A)},I.prototype.downSample=function(T,A,L,N){var ie=B(this);return ie._store=this._store.downSample(this._getStoreDimIndex(T),A,L,N),ie},I.prototype.lttbDownSample=function(T,A){var L=B(this);return L._store=this._store.lttbDownSample(this._getStoreDimIndex(T),A),L},I.prototype.getRawDataItem=function(T){return this._store.getRawDataItem(T)},I.prototype.getItemModel=function(T){var A=this.hostModel,L=this.getRawDataItem(T);return new Se.Z(L,A,A&&A.ecModel)},I.prototype.diff=function(T){var A=this;return new ce.Z(T?T.getStore().getIndices():[],this.getStore().getIndices(),function(L){return re(T,L)},function(L){return re(A,L)})},I.prototype.getVisual=function(T){var A=this._visual;return A&&A[T]},I.prototype.setVisual=function(T,A){this._visual=this._visual||{},te(T)?le.extend(this._visual,T):this._visual[T]=A},I.prototype.getItemVisual=function(T,A){var L=this._itemVisuals[T];return(L&&L[A])??this.getVisual(A)},I.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},I.prototype.ensureUniqueItemVisual=function(T,A){var L=this._itemVisuals,N=L[T];N||(N=L[T]={});var ie=N[A];return null==ie&&(ie=this.getVisual(A),le.isArray(ie)?ie=ie.slice():te(ie)&&(ie=le.extend({},ie)),N[A]=ie),ie},I.prototype.setItemVisual=function(T,A,L){var N=this._itemVisuals[T]||{};this._itemVisuals[T]=N,te(A)?le.extend(N,A):N[A]=L},I.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},I.prototype.setLayout=function(T,A){te(T)?le.extend(this._layout,T):this._layout[T]=A},I.prototype.getLayout=function(T){return this._layout[T]},I.prototype.getItemLayout=function(T){return this._itemLayouts[T]},I.prototype.setItemLayout=function(T,A,L){this._itemLayouts[T]=L?le.extend(this._itemLayouts[T]||{},A):A},I.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},I.prototype.setItemGraphicEl=function(T,A){(0,j.Q)(this.hostModel&&this.hostModel.seriesIndex,this.dataType,T,A),this._graphicEls[T]=A},I.prototype.getItemGraphicEl=function(T){return this._graphicEls[T]},I.prototype.eachItemGraphicEl=function(T,A){le.each(this._graphicEls,function(L,N){L&&T&&T.call(A,L,N)})},I.prototype.cloneShallow=function(T){return T||(T=new I(this._schema?this._schema:ee(this.dimensions,this._getDimInfo,this),this.hostModel)),K(T,this),T._store=this._store,T},I.prototype.wrapMethod=function(T,A){var L=this[T];!le.isFunction(L)||(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(T),this[T]=function(){var N=L.apply(this,arguments);return A.apply(this,[N].concat(le.slice(arguments)))})},I.internalField=(H=function(T){var A=T._invertedIndicesMap;le.each(A,function(L,N){var ie=T._dimInfos[N],oe=ie.ordinalMeta,ae=T._store;if(oe){L=A[N]=new Q(oe.categories.length);for(var he=0;he<L.length;he++)L[he]=-1;for(he=0;he<ae.count();he++)L[ae.get(ie.storeDimIndex,he)]=he}})},W=function(T,A,L){return(0,de.U5)(T._getCategory(A,L),null)},re=function(T,A){var L=T._idList[A];return null==L&&null!=T._idDimIdx&&(L=W(T,T._idDimIdx,A)),null==L&&(L="e\0\0"+A),L},X=function(T){return le.isArray(T)||(T=null!=T?[T]:[]),T},B=function(T){var A=new I(T._schema?T._schema:ee(T.dimensions,T._getDimInfo,T),T.hostModel);return K(A,T),A},K=function(T,A){le.each(Y.concat(A.__wrappedMethods||[]),function(L){A.hasOwnProperty(L)&&(T[L]=A[L])}),T.__wrappedMethods=A.__wrappedMethods,le.each(q,function(L){T[L]=le.clone(A[L])}),T._calculationInfo=le.extend({},A._calculationInfo)},void(O=function(T,A){var L=T._nameList,N=T._idList,ie=T._nameDimIdx,oe=T._idDimIdx,ae=L[A],he=N[A];if(null==ae&&null!=ie&&(L[A]=ae=W(T,ie,A)),null==he&&null!=oe&&(N[A]=he=W(T,oe,A)),null==he&&null!=ae){var se=T._nameRepeatCount,xe=se[ae]=(se[ae]||0)+1;he=ae,xe>1&&(he+="__ec__"+xe),N[A]=he}})),I}()},8911:(Ut,rt,z)=>{z.d(rt,{Z:()=>ce});var le=z(9496);const ce=function _e(ye){this.otherDims={},null!=ye&&le.extend(this,ye)}},5743:(Ut,rt,z)=>{z.d(rt,{Kp:()=>$,Ld:()=>be,ML:()=>j,QY:()=>Q,_P:()=>we,nx:()=>de});var le=z(9496),Se=z(678),ce=z(2846),_e=z(3957),ye=function J(b){this.data=b.data||(b.sourceFormat===Se.hL?{}:[]),this.sourceFormat=b.sourceFormat||Se.RA,this.seriesLayoutBy=b.seriesLayoutBy||Se.fY,this.startIndex=b.startIndex||0,this.dimensionsDetectedCount=b.dimensionsDetectedCount,this.metaRawOption=b.metaRawOption;var Y=this.dimensionsDefine=b.dimensionsDefine;if(Y)for(var q=0;q<Y.length;q++){var H=Y[q];null==H.type&&(0,_e.u7)(this,q)===_e.Dq.Must&&(H.type="ordinal")}};function be(J){return J instanceof ye}function we(J,b,Y){Y=Y||$(J);var q=b.seriesLayoutBy,H=function G(J,b,Y,q,H){var re,W;if(!J)return{dimensionsDefine:te(H),startIndex:W,dimensionsDetectedCount:re};if(b===Se.XD){var X=J;"auto"===q||null==q?ee(function(B){null!=B&&"-"!==B&&((0,le.isString)(B)?null==W&&(W=1):W=0)},Y,X,10):W=(0,le.isNumber)(q)?q:q?1:0,!H&&1===W&&(H=[],ee(function(B,O){H[O]=null!=B?B+"":""},Y,X,1/0)),re=H?H.length:Y===Se.Wc?X.length:X[0]?X[0].length:null}else if(b===Se.qb)H||(H=function Z(J){for(var Y,b=0;b<J.length&&!(Y=J[b++]););if(Y)return(0,le.keys)(Y)}(J));else if(b===Se.hL)H||(H=[],(0,le.each)(J,function(B,O){H.push(O)}));else if(b===Se.cy){var K=(0,ce.C4)(J[0]);re=(0,le.isArray)(K)&&K.length||1}return{startIndex:W,dimensionsDefine:te(H),dimensionsDetectedCount:re}}(J,Y,q,b.sourceHeader,b.dimensions);return new ye({data:J,sourceFormat:Y,seriesLayoutBy:q,dimensionsDefine:H.dimensionsDefine,startIndex:H.startIndex,dimensionsDetectedCount:H.dimensionsDetectedCount,metaRawOption:(0,le.clone)(b)})}function de(J){return new ye({data:J,sourceFormat:(0,le.isTypedArray)(J)?Se.J5:Se.cy})}function j(J){return new ye({data:J.data,sourceFormat:J.sourceFormat,seriesLayoutBy:J.seriesLayoutBy,dimensionsDefine:(0,le.clone)(J.dimensionsDefine),startIndex:J.startIndex,dimensionsDetectedCount:J.dimensionsDetectedCount})}function $(J){var b=Se.RA;if((0,le.isTypedArray)(J))b=Se.J5;else if((0,le.isArray)(J)){0===J.length&&(b=Se.XD);for(var Y=0,q=J.length;Y<q;Y++){var H=J[Y];if(null!=H){if((0,le.isArray)(H)||(0,le.isTypedArray)(H)){b=Se.XD;break}if((0,le.isObject)(H)){b=Se.qb;break}}}}else if((0,le.isObject)(J))for(var re in J)if((0,le.hasOwn)(J,re)&&(0,le.isArrayLike)(J[re])){b=Se.hL;break}return b}function te(J){if(J){var b=(0,le.createHashMap)();return(0,le.map)(J,function(Y,q){var H={name:(Y=(0,le.isObject)(Y)?Y:{name:Y}).name,displayName:Y.displayName,type:Y.type};if(null==H.name)return H;H.name+="",null==H.displayName&&(H.displayName=H.name);var re=b.get(H.name);return re?H.name+="-"+re.count++:b.set(H.name,{count:1}),H})}}function ee(J,b,Y,q){if(b===Se.Wc)for(var H=0;H<Y.length&&H<q;H++)J(Y[H]?Y[H][0]:null,H);else{var re=Y[0]||[];for(H=0;H<re.length&&H<q;H++)J(re[H],H)}}function Q(J){var b=J.sourceFormat;return b===Se.qb||b===Se.hL}},4273:(Ut,rt,z)=>{z.d(rt,{Eo:()=>be,Jj:()=>j,Jl:()=>$,bB:()=>we,v5:()=>de});var le=z(9496),Se=z(2846),ce=z(5743),_e=(0,Se.Yf)(),ye={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},be=function(){function G(Z){this.dimensions=Z.dimensions,this._dimOmitted=Z.dimensionOmitted,this.source=Z.source,this._fullDimCount=Z.fullDimensionCount,this._updateDimOmitted(Z.dimensionOmitted)}return G.prototype.isDimensionOmitted=function(){return this._dimOmitted},G.prototype._updateDimOmitted=function(Z){this._dimOmitted=Z,Z&&(this._dimNameMap||(this._dimNameMap=j(this.source)))},G.prototype.getSourceDimensionIndex=function(Z){return(0,le.retrieve2)(this._dimNameMap.get(Z),-1)},G.prototype.getSourceDimension=function(Z){var te=this.source.dimensionsDefine;if(te)return te[Z]},G.prototype.makeStoreSchema=function(){for(var Z=this._fullDimCount,te=(0,ce.QY)(this.source),ee=!$(Z),Q="",J=[],b=0,Y=0;b<Z;b++){var q=void 0,H=void 0,re=void 0,W=this.dimensions[Y];if(W&&W.storeDimIndex===b)q=te?W.name:null,H=W.type,re=W.ordinalMeta,Y++;else{var X=this.getSourceDimension(b);X&&(q=te?X.name:null,H=X.type)}J.push({property:q,type:H,ordinalMeta:re}),te&&null!=q&&(!W||!W.isCalculationCoord)&&(Q+=ee?q.replace(/\`/g,"`1").replace(/\$/g,"`2"):q),Q+="$",Q+=ye[H]||"f",re&&(Q+=re.uid),Q+="$"}var K=this.source;return{dimensions:J,hash:[K.seriesLayoutBy,K.startIndex,Q].join("$$")}},G.prototype.makeOutputDimensionNames=function(){for(var Z=[],te=0,ee=0;te<this._fullDimCount;te++){var Q=void 0,J=this.dimensions[ee];if(J&&J.storeDimIndex===te)J.isCalculationCoord||(Q=J.name),ee++;else{var b=this.getSourceDimension(te);b&&(Q=b.name)}Z.push(Q)}return Z},G.prototype.appendCalculationDimension=function(Z){this.dimensions.push(Z),Z.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},G}();function we(G){return G instanceof be}function de(G){for(var Z=(0,le.createHashMap)(),te=0;te<(G||[]).length;te++){var ee=G[te],Q=(0,le.isObject)(ee)?ee.name:ee;null!=Q&&null==Z.get(Q)&&Z.set(Q,te)}return Z}function j(G){var Z=_e(G);return Z.dimNameMap||(Z.dimNameMap=de(G.dimensionsDefine))}function $(G){return G>30}},4694:(Ut,rt,z)=>{z.d(rt,{Z:()=>$,q:()=>j});var le=z(678),Se=z(8911),ce=z(9496),_e=z(5743),ye=z(5780),be=z(2846),we=z(3957),de=z(4273);function j(ee,Q){return $(ee,Q).dimensions}function $(ee,Q){(0,_e.Ld)(ee)||(ee=(0,_e.nx)(ee));var J=(Q=Q||{}).coordDimensions||[],b=Q.dimensionsDefine||ee.dimensionsDefine||[],Y=(0,ce.createHashMap)(),q=[],H=function Z(ee,Q,J,b){var Y=Math.max(ee.dimensionsDetectedCount||1,Q.length,J.length,b||0);return(0,ce.each)(Q,function(q){var H;(0,ce.isObject)(q)&&(H=q.dimsDef)&&(Y=Math.max(Y,H.length))}),Y}(ee,J,b,Q.dimensionsCount),re=Q.canOmitUnusedDimensions&&(0,de.Jl)(H),W=b===ee.dimensionsDefine,X=W?(0,de.Jj)(ee):(0,de.v5)(b),K=Q.encodeDefine;!K&&Q.encodeDefaulter&&(K=Q.encodeDefaulter(ee,H));for(var B=(0,ce.createHashMap)(K),O=new ye.hG(H),D=0;D<O.length;D++)O[D]=-1;function P(xe){var fe=O[xe];if(fe<0){var ge=b[xe],Ce=(0,ce.isObject)(ge)?ge:{name:ge},Te=new Se.Z,Ie=Ce.name;return null!=Ie&&null!=X.get(Ie)&&(Te.name=Te.displayName=Ie),null!=Ce.type&&(Te.type=Ce.type),null!=Ce.displayName&&(Te.displayName=Ce.displayName),O[xe]=q.length,Te.storeDimIndex=xe,q.push(Te),Te}return q[fe]}if(!re)for(D=0;D<H;D++)P(D);B.each(function(xe,fe){var ge=(0,be.kF)(xe).slice();if(1===ge.length&&!(0,ce.isString)(ge[0])&&ge[0]<0)B.set(fe,!1);else{var Ce=B.set(fe,[]);(0,ce.each)(ge,function(Te,Ie){var Ee=(0,ce.isString)(Te)?X.get(Te):Te;null!=Ee&&Ee<H&&(Ce[Ie]=Ee,T(P(Ee),fe,Ie))})}});var I=0;function T(xe,fe,ge){null!=le.f7.get(fe)?xe.otherDims[fe]=ge:(xe.coordDim=fe,xe.coordDimIndex=ge,Y.set(fe,!0))}(0,ce.each)(J,function(xe){var fe,ge,Ce,Te;if((0,ce.isString)(xe))fe=xe,Te={};else{fe=(Te=xe).name;var Ie=Te.ordinalMeta;Te.ordinalMeta=null,(Te=(0,ce.extend)({},Te)).ordinalMeta=Ie,ge=Te.dimsDef,Ce=Te.otherDims,Te.name=Te.coordDim=Te.coordDimIndex=Te.dimsDef=Te.otherDims=null}var Ee=B.get(fe);if(!1!==Ee){if(!(Ee=(0,be.kF)(Ee)).length)for(var Ve=0;Ve<(ge&&ge.length||1);Ve++){for(;I<H&&null!=P(I).coordDim;)I++;I<H&&Ee.push(I++)}(0,ce.each)(Ee,function(ze,We){var tt=P(ze);if(W&&null!=Te.type&&(tt.type=Te.type),T((0,ce.defaults)(tt,Te),fe,We),null==tt.name&&ge){var st=ge[We];!(0,ce.isObject)(st)&&(st={name:st}),tt.name=tt.displayName=st.name,tt.defaultTooltip=st.defaultTooltip}Ce&&(0,ce.defaults)(tt.otherDims,Ce)})}});var A=Q.generateCoord,L=Q.generateCoordCount,N=null!=L;L=A?L||1:0;var ie=A||"value";function oe(xe){null==xe.name&&(xe.name=xe.coordDim)}if(re)(0,ce.each)(q,function(xe){oe(xe)}),q.sort(function(xe,fe){return xe.storeDimIndex-fe.storeDimIndex});else for(var ae=0;ae<H;ae++){var he=P(ae);null==he.coordDim&&(he.coordDim=te(ie,Y,N),he.coordDimIndex=0,(!A||L<=0)&&(he.isExtraCoord=!0),L--),oe(he),null==he.type&&((0,we.u7)(ee,ae)===we.Dq.Must||he.isExtraCoord&&(null!=he.otherDims.itemName||null!=he.otherDims.seriesName))&&(he.type="ordinal")}return function G(ee){for(var Q=(0,ce.createHashMap)(),J=0;J<ee.length;J++){var b=ee[J],Y=b.name,q=Q.get(Y)||0;q>0&&(b.name=Y+(q-1)),q++,Q.set(Y,q)}}(q),new de.Eo({source:ee,dimensions:q,fullDimensionCount:H,dimensionOmitted:re})}function te(ee,Q,J){if(J||Q.hasKey(ee)){for(var b=0;Q.hasKey(ee+b);)b++;ee+=b}return Q.set(ee,!0),ee}},7654:(Ut,rt,z)=>{z.d(rt,{Pl:()=>$,_j:()=>te,a:()=>J,hk:()=>re,tB:()=>q});var ye,be,we,de,j,le=z(9496),Se=z(2846),ce=z(5743),_e=z(678),$=function(){function X(K,B){var O=(0,ce.Ld)(K)?K:(0,ce.nx)(K);this._source=O;var D=this._data=O.data;O.sourceFormat===_e.J5&&(this._offset=0,this._dimSize=B,this._data=D),j(this,D,O)}return X.prototype.getSource=function(){return this._source},X.prototype.count=function(){return 0},X.prototype.getItem=function(K,B){},X.prototype.appendData=function(K){},X.prototype.clean=function(){},X.protoInitialize=((K=X.prototype).pure=!1,void(K.persistent=!0)),X.internalField=function(){var K;j=function(I,T,A){var L=A.sourceFormat,N=A.seriesLayoutBy,ie=A.startIndex,oe=A.dimensionsDefine,ae=de[H(L,N)];if((0,le.extend)(I,ae),L===_e.J5)I.getItem=B,I.count=D,I.fillStorage=O;else{var he=te(L,N);I.getItem=(0,le.bind)(he,null,T,ie,oe);var se=J(L,N);I.count=(0,le.bind)(se,null,T,ie,oe)}};var B=function(I,T){T=T||[];for(var A=this._data,L=this._dimSize,N=L*(I-=this._offset),ie=0;ie<L;ie++)T[ie]=A[N+ie];return T},O=function(I,T,A,L){for(var N=this._data,ie=this._dimSize,oe=0;oe<ie;oe++){for(var ae=L[oe],he=ae[0]??1/0,se=ae[1]??-1/0,xe=T-I,fe=A[oe],ge=0;ge<xe;ge++){var Ce=N[ge*ie+oe];fe[I+ge]=Ce,Ce<he&&(he=Ce),Ce>se&&(se=Ce)}ae[0]=he,ae[1]=se}},D=function(){return this._data?this._data.length/this._dimSize:0};function P(I){for(var T=0;T<I.length;T++)this._data.push(I[T])}(K={})[_e.XD+"_"+_e.fY]={pure:!0,appendData:P},K[_e.XD+"_"+_e.Wc]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},K[_e.qb]={pure:!0,appendData:P},K[_e.hL]={pure:!0,appendData:function(I){var T=this._data;(0,le.each)(I,function(A,L){for(var N=T[L]||(T[L]=[]),ie=0;ie<(A||[]).length;ie++)N.push(A[ie])})}},K[_e.cy]={appendData:P},K[_e.J5]={persistent:!1,pure:!0,appendData:function(I){this._data=I},clean:function(){this._offset+=this.count(),this._data=null}},de=K}(),X;var K}(),G=function(X,K,B,O){return X[O]},Z=((ye={})[_e.XD+"_"+_e.fY]=function(X,K,B,O){return X[O+K]},ye[_e.XD+"_"+_e.Wc]=function(X,K,B,O,D){O+=K;for(var P=D||[],I=X,T=0;T<I.length;T++){var A=I[T];P[T]=A?A[O]:null}return P},ye[_e.qb]=G,ye[_e.hL]=function(X,K,B,O,D){for(var P=D||[],I=0;I<B.length;I++){var A=X[B[I].name];P[I]=A?A[O]:null}return P},ye[_e.cy]=G,ye);function te(X,K){return Z[H(X,K)]}var ee=function(X,K,B){return X.length},Q=((be={})[_e.XD+"_"+_e.fY]=function(X,K,B){return Math.max(0,X.length-K)},be[_e.XD+"_"+_e.Wc]=function(X,K,B){var O=X[0];return O?Math.max(0,O.length-K):0},be[_e.qb]=ee,be[_e.hL]=function(X,K,B){var D=X[B[0].name];return D?D.length:0},be[_e.cy]=ee,be);function J(X,K){return Q[H(X,K)]}var b=function(X,K,B){return X[K]},Y=((we={})[_e.XD]=b,we[_e.qb]=function(X,K,B){return X[B]},we[_e.hL]=b,we[_e.cy]=function(X,K,B){var O=(0,Se.C4)(X);return O instanceof Array?O[K]:O},we[_e.J5]=b,we);function q(X){return Y[X]}function H(X,K){return X===_e.XD?X+"_"+K:X}function re(X,K,B){if(X){var O=X.getRawDataItem(K);if(null!=O){var D=X.getStore(),P=D.getSource().sourceFormat;if(null!=B){var I=X.getDimensionIndex(B),T=D.getDimensionProperty(I);return q(P)(O,I,T)}var A=O;return P===_e.cy&&(A=(0,Se.C4)(O)),A}}}},9777:(Ut,rt,z)=>{z.d(rt,{BM:()=>ce,IR:()=>be,M:()=>ye});var le=z(9496),Se=z(4273);function ce(we,de,j){var Z,te,ee,$=(j=j||{}).byIndex,G=j.stackedCoordDimension;!function _e(we){return!(0,Se.bB)(we.schema)}(de)?(Z=(te=de.schema).dimensions,ee=de.store):Z=de;var J,b,Y,q,Q=!(!we||!we.get("stack"));if((0,le.each)(Z,function(B,O){(0,le.isString)(B)&&(Z[O]=B={name:B}),Q&&!B.isExtraCoord&&(!$&&!J&&B.ordinalMeta&&(J=B),!b&&"ordinal"!==B.type&&"time"!==B.type&&(!G||G===B.coordDim)&&(b=B))}),b&&!$&&!J&&($=!0),b){Y="__\0ecstackresult_"+we.id,q="__\0ecstackedover_"+we.id,J&&(J.createInvertedIndices=!0);var H=b.coordDim,re=b.type,W=0;(0,le.each)(Z,function(B){B.coordDim===H&&W++});var X={name:Y,coordDim:H,coordDimIndex:W,type:re,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:Z.length},K={name:q,coordDim:q,coordDimIndex:W+1,type:re,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:Z.length+1};te?(ee&&(X.storeDimIndex=ee.ensureCalculationDimension(q,re),K.storeDimIndex=ee.ensureCalculationDimension(Y,re)),te.appendCalculationDimension(X),te.appendCalculationDimension(K)):(Z.push(X),Z.push(K))}return{stackedDimension:b&&b.name,stackedByDimension:J&&J.name,isStackedByIndex:$,stackedOverDimension:q,stackResultDimension:Y}}function ye(we,de){return!!de&&de===we.getCalculationInfo("stackedDimension")}function be(we,de){return ye(we,de)?we.getCalculationInfo("stackResultDimension"):de}},2401:(Ut,rt,z)=>{z.d(rt,{ID:()=>j,o2:()=>be,tR:()=>G,yQ:()=>_e});var le=z(10),Se=z(9496),ce=z(6420);function _e(Z,te){var ee=te&&te.type;return"ordinal"===ee?Z:("time"===ee&&!(0,Se.isNumber)(Z)&&null!=Z&&"-"!==Z&&(Z=+(0,le.sG)(Z)),null==Z||""===Z?NaN:Number(Z))}var ye=(0,Se.createHashMap)({number:function(Z){return parseFloat(Z)},time:function(Z){return+(0,le.sG)(Z)},trim:function(Z){return(0,Se.isString)(Z)?(0,Se.trim)(Z):Z}});function be(Z){return ye.get(Z)}var we={lt:function(Z,te){return Z<te},lte:function(Z,te){return Z<=te},gt:function(Z,te){return Z>te},gte:function(Z,te){return Z>=te}},de=function(){function Z(te,ee){(0,Se.isNumber)(ee)||(0,ce._y)(""),this._opFn=we[te],this._rvalFloat=(0,le.FK)(ee)}return Z.prototype.evaluate=function(te){return(0,Se.isNumber)(te)?this._opFn(te,this._rvalFloat):this._opFn((0,le.FK)(te),this._rvalFloat)},Z}(),j=function(){function Z(te,ee){var Q="desc"===te;this._resultLT=Q?1:-1,null==ee&&(ee=Q?"min":"max"),this._incomparable="min"===ee?-1/0:1/0}return Z.prototype.evaluate=function(te,ee){var Q=(0,Se.isNumber)(te)?te:(0,le.FK)(te),J=(0,Se.isNumber)(ee)?ee:(0,le.FK)(ee),b=isNaN(Q),Y=isNaN(J);if(b&&(Q=this._incomparable),Y&&(J=this._incomparable),b&&Y){var q=(0,Se.isString)(te),H=(0,Se.isString)(ee);q&&(Q=H?te:0),H&&(J=q?ee:0)}return Q<J?this._resultLT:Q>J?-this._resultLT:0},Z}(),$=function(){function Z(te,ee){this._rval=ee,this._isEQ=te,this._rvalTypeof=typeof ee,this._rvalFloat=(0,le.FK)(ee)}return Z.prototype.evaluate=function(te){var ee=te===this._rval;if(!ee){var Q=typeof te;Q!==this._rvalTypeof&&("number"===Q||"number"===this._rvalTypeof)&&(ee=(0,le.FK)(te)===this._rvalFloat)}return this._isEQ?ee:!ee},Z}();function G(Z,te){return"eq"===Z||"ne"===Z?new $("eq"===Z,te):(0,Se.hasOwn)(we,Z)?new de(Z,te):null}},5618:(Ut,rt,z)=>{z.d(rt,{T:()=>be,y:()=>_e});var le=z(9496),Se=z(678),ce=function(){function de(j,$){this._encode=j,this._schema=$}return de.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},de.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},de}();function _e(de,j){var $={},G=$.encode={},Z=(0,le.createHashMap)(),te=[],ee=[],Q={};(0,le.each)(de.dimensions,function(H){var re=de.getDimensionInfo(H),W=re.coordDim;if(W){var X=re.coordDimIndex;ye(G,W)[X]=H,re.isExtraCoord||(Z.set(W,1),function we(de){return!("ordinal"===de||"time"===de)}(re.type)&&(te[0]=H),ye(Q,W)[X]=de.getDimensionIndex(re.name)),re.defaultTooltip&&ee.push(H)}Se.f7.each(function(K,B){var O=ye(G,B),D=re.otherDims[B];null!=D&&!1!==D&&(O[D]=re.name)})});var J=[],b={};Z.each(function(H,re){var W=G[re];b[re]=W[0],J=J.concat(W)}),$.dataDimsOnCoord=J,$.dataDimIndicesOnCoord=(0,le.map)(J,function(H){return de.getDimensionInfo(H).storeDimIndex}),$.encodeFirstDimNotExtra=b;var Y=G.label;Y&&Y.length&&(te=Y.slice());var q=G.tooltip;return q&&q.length?ee=q.slice():ee.length||(ee=te.slice()),G.defaultedLabel=te,G.defaultedTooltip=ee,$.userOutput=new ce(Q,j),$}function ye(de,j){return de.hasOwnProperty(j)||(de[j]=[]),de[j]}function be(de){return"category"===de?"ordinal":"time"===de?"time":"float"}},4786:(Ut,rt,z)=>{z.d(rt,{Z:()=>te});var le=z(9496),ce=(0,z(2846).Yf)();function ye(ee,Q){if(function $(ee){return ce(ee).mainData===ee}(this)){var J=(0,le.extend)({},ce(this).datas);J[this.dataType]=Q,G(Q,J,ee)}else Z(Q,this.dataType,ce(this).mainData,ee);return Q}function be(ee,Q){return ee.struct&&ee.struct.update(),Q}function we(ee,Q){return(0,le.each)(ce(Q).datas,function(J,b){J!==Q&&Z(J.cloneShallow(),b,Q,ee)}),Q}function de(ee){var Q=ce(this).mainData;return null==ee||null==Q?Q:ce(Q).datas[ee]}function j(){var ee=ce(this).mainData;return null==ee?[{data:ee}]:(0,le.map)((0,le.keys)(ce(ee).datas),function(Q){return{type:Q,data:ce(ee).datas[Q]}})}function G(ee,Q,J){ce(ee).datas={},(0,le.each)(Q,function(b,Y){Z(b,Y,ee,J)})}function Z(ee,Q,J,b){ce(J).datas[Q]=ee,ce(ee).mainData=J,ee.dataType=Q,b.struct&&(ee[b.structAttr]=b.struct,b.struct[b.datasAttr[Q]]=ee),ee.getLinkedData=de,ee.getLinkedDataAll=j}const te=function _e(ee){var Q=ee.mainData,J=ee.datas;J||(J={main:Q},ee.datasAttr={main:"data"}),ee.datas=ee.mainData=null,G(Q,J,ee),(0,le.each)(J,function(b){(0,le.each)(Q.TRANSFERABLE_METHODS,function(Y){b.wrapMethod(Y,(0,le.curry)(ye,ee))})}),Q.wrapMethod("cloneShallow",(0,le.curry)(we,ee)),(0,le.each)(Q.CHANGABLE_METHODS,function(b){Q.wrapMethod(b,(0,le.curry)(be,ee))}),(0,le.assert)(J[Q.dataType]===Q)}},3957:(Ut,rt,z)=>{z.d(rt,{Dq:()=>_e,JT:()=>$,Ss:()=>de,Wd:()=>j,md:()=>be,pY:()=>we,u7:()=>G});var le=z(2846),Se=z(9496),ce=z(678),_e={Must:1,Might:2,Not:3},ye=(0,le.Yf)();function be(te){ye(te).datasetMap=(0,Se.createHashMap)()}function we(te,ee,Q){var J={},b=j(ee);if(!b||!te)return J;var X,K,Y=[],q=[],re=ye(ee.ecModel).datasetMap,W=b.uid+"_"+Q.seriesLayoutBy;te=te.slice(),(0,Se.each)(te,function(P,I){var T=(0,Se.isObject)(P)?P:te[I]={name:P};"ordinal"===T.type&&null==X&&(X=I,K=D(T)),J[T.name]=[]});var B=re.get(W)||re.set(W,{categoryWayDim:K,valueWayDim:0});function O(P,I,T){for(var A=0;A<T;A++)P.push(I+A)}function D(P){var I=P.dimsDef;return I?I.length:1}return(0,Se.each)(te,function(P,I){var T=P.name,A=D(P);if(null==X)O(J[T],L=B.valueWayDim,A),O(q,L,A),B.valueWayDim+=A;else if(X===I)O(J[T],0,A),O(Y,0,A);else{var L;O(J[T],L=B.categoryWayDim,A),O(q,L,A),B.categoryWayDim+=A}}),Y.length&&(J.itemName=Y),q.length&&(J.seriesName=q),J}function de(te,ee,Q){var J={};if(!j(te))return J;var H,Y=ee.sourceFormat,q=ee.dimensionsDefine;(Y===ce.qb||Y===ce.hL)&&(0,Se.each)(q,function(X,K){"name"===((0,Se.isObject)(X)?X.name:X)&&(H=K)});var re=function(){for(var X={},K={},B=[],O=0,D=Math.min(5,Q);O<D;O++){var P=Z(ee.data,Y,ee.seriesLayoutBy,q,ee.startIndex,O);B.push(P);var I=P===_e.Not;if(I&&null==X.v&&O!==H&&(X.v=O),(null==X.n||X.n===X.v||!I&&B[X.n]===_e.Not)&&(X.n=O),T(X)&&B[X.n]!==_e.Not)return X;I||(P===_e.Might&&null==K.v&&O!==H&&(K.v=O),(null==K.n||K.n===K.v)&&(K.n=O))}function T(A){return null!=A.v&&null!=A.n}return T(X)?X:T(K)?K:null}();if(re){J.value=[re.v];var W=H??re.n;J.itemName=[W],J.seriesName=[W]}return J}function j(te){if(!te.get("data",!0))return(0,le.HZ)(te.ecModel,"dataset",{index:te.get("datasetIndex",!0),id:te.get("datasetId",!0)},le.C6).models[0]}function $(te){return te.get("transform",!0)||te.get("fromTransformResult",!0)?(0,le.HZ)(te.ecModel,"dataset",{index:te.get("fromDatasetIndex",!0),id:te.get("fromDatasetId",!0)},le.C6).models:[]}function G(te,ee){return Z(te.data,te.sourceFormat,te.seriesLayoutBy,te.dimensionsDefine,te.startIndex,ee)}function Z(te,ee,Q,J,b,Y){var q,re,W;if((0,Se.isTypedArray)(te))return _e.Not;if(J){var X=J[Y];(0,Se.isObject)(X)?(re=X.name,W=X.type):(0,Se.isString)(X)&&(re=X)}if(null!=W)return"ordinal"===W?_e.Must:_e.Not;if(ee===ce.XD){var K=te;if(Q===ce.Wc){for(var B=K[Y],O=0;O<(B||[]).length&&O<5;O++)if(null!=(q=N(B[b+O])))return q}else for(O=0;O<K.length&&O<5;O++){var D=K[b+O];if(D&&null!=(q=N(D[Y])))return q}}else if(ee===ce.qb){var P=te;if(!re)return _e.Not;for(O=0;O<P.length&&O<5;O++)if((I=P[O])&&null!=(q=N(I[re])))return q}else if(ee===ce.hL){if(!re)return _e.Not;if(!(B=te[re])||(0,Se.isTypedArray)(B))return _e.Not;for(O=0;O<B.length&&O<5;O++)if(null!=(q=N(B[O])))return q}else if(ee===ce.cy){var A=te;for(O=0;O<A.length&&O<5;O++){var I,L=(0,le.C4)(I=A[O]);if(!(0,Se.isArray)(L))return _e.Not;if(null!=(q=N(L[Y])))return q}}function N(ie){var oe=(0,Se.isString)(ie);return null!=ie&&Number.isFinite(Number(ie))&&""!==ie?oe?_e.Might:_e.Not:oe&&"-"!==ie?_e.Must:void 0}return _e.Not}},8296:(Ut,rt,z)=>{z.d(rt,{U:()=>de,t:()=>j});var le=z(9496),Se=z(5743),ce=z(678),_e=z(3957),ye=z(8489),be=z(5780),we=z(7654),de=function(){function Z(te){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=te}return Z.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},Z.prototype._setLocalSource=function(te,ee){this._sourceList=te,this._upstreamSignList=ee,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},Z.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},Z.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},Z.prototype._createSource=function(){this._setLocalSource([],[]);var J,b,te=this._sourceHost,ee=this._getUpstreamSourceManagers(),Q=!!ee.length;if($(te)){var Y=te,q=void 0,H=void 0,re=void 0;if(Q){var W=ee[0];W.prepareSource(),q=(re=W.getSource()).data,H=re.sourceFormat,b=[W._getVersionSign()]}else q=Y.get("data",!0),H=(0,le.isTypedArray)(q)?ce.J5:ce.cy,b=[];var X=this._getSourceMetaRawOption()||{},K=re&&re.metaRawOption||{},B=(0,le.retrieve2)(X.seriesLayoutBy,K.seriesLayoutBy)||null,O=(0,le.retrieve2)(X.sourceHeader,K.sourceHeader),D=(0,le.retrieve2)(X.dimensions,K.dimensions);J=B!==K.seriesLayoutBy||!!O!=!!K.sourceHeader||D?[(0,Se._P)(q,{seriesLayoutBy:B,sourceHeader:O,dimensions:D},H)]:[]}else{var I=te;if(Q){var T=this._applyTransform(ee);J=T.sourceList,b=T.upstreamSignList}else{var A=I.get("source",!0);J=[(0,Se._P)(A,this._getSourceMetaRawOption(),null)],b=[]}}this._setLocalSource(J,b)},Z.prototype._applyTransform=function(te){var ee=this._sourceHost,Q=ee.get("transform",!0),J=ee.get("fromTransformResult",!0);null!=J&&1!==te.length&&G("");var Y,q=[],H=[];return(0,le.each)(te,function(re){re.prepareSource();var W=re.getSource(J||0);null!=J&&!W&&G(""),q.push(W),H.push(re._getVersionSign())}),Q?Y=(0,ye.vK)(Q,q,{datasetIndex:ee.componentIndex}):null!=J&&(Y=[(0,Se.ML)(q[0])]),{sourceList:Y,upstreamSignList:H}},Z.prototype._isDirty=function(){if(this._dirty)return!0;for(var te=this._getUpstreamSourceManagers(),ee=0;ee<te.length;ee++){var Q=te[ee];if(Q._isDirty()||this._upstreamSignList[ee]!==Q._getVersionSign())return!0}},Z.prototype.getSource=function(te){var ee=this._sourceList[te=te||0];if(!ee){var Q=this._getUpstreamSourceManagers();return Q[0]&&Q[0].getSource(te)}return ee},Z.prototype.getSharedDataStore=function(te){var ee=te.makeStoreSchema();return this._innerGetDataStore(ee.dimensions,te.source,ee.hash)},Z.prototype._innerGetDataStore=function(te,ee,Q){var b=this._storeList,Y=b[0];Y||(Y=b[0]={});var q=Y[Q];if(!q){var H=this._getUpstreamSourceManagers()[0];$(this._sourceHost)&&H?q=H._innerGetDataStore(te,ee,Q):(q=new be.ZP).initData(new we.Pl(ee,te.length),te),Y[Q]=q}return q},Z.prototype._getUpstreamSourceManagers=function(){var te=this._sourceHost;if($(te)){var ee=(0,_e.Wd)(te);return ee?[ee.getSourceManager()]:[]}return(0,le.map)((0,_e.JT)(te),function(Q){return Q.getSourceManager()})},Z.prototype._getSourceMetaRawOption=function(){var ee,Q,J,te=this._sourceHost;if($(te))ee=te.get("seriesLayoutBy",!0),Q=te.get("sourceHeader",!0),J=te.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var b=te;ee=b.get("seriesLayoutBy",!0),Q=b.get("sourceHeader",!0),J=b.get("dimensions",!0)}return{seriesLayoutBy:ee,sourceHeader:Q,dimensions:J}},Z}();function j(Z){Z.option.transform&&(0,le.setAsPrimitive)(Z.option.transform)}function $(Z){return"series"===Z.mainType}function G(Z){throw new Error(Z)}},8489:(Ut,rt,z)=>{z.d(rt,{DA:()=>Q,vK:()=>J});var le=z(678),Se=z(2846),ce=z(9496),_e=z(7654),ye=z(2401),be=z(6420),we=z(5743),de=function(){function q(){}return q.prototype.getRawData=function(){throw new Error("not supported")},q.prototype.getRawDataItem=function(H){throw new Error("not supported")},q.prototype.cloneRawData=function(){},q.prototype.getDimensionInfo=function(H){},q.prototype.cloneAllDimensionInfo=function(){},q.prototype.count=function(){},q.prototype.retrieveValue=function(H,re){},q.prototype.retrieveValueFromItem=function(H,re){},q.prototype.convertValue=function(H,re){return(0,ye.yQ)(H,re)},q}();function $(q){return Y(q.sourceFormat)||(0,be._y)(""),q.data}function G(q){var H=q.sourceFormat,re=q.data;if(Y(H)||(0,be._y)(""),H===le.XD){for(var X=[],K=0,B=re.length;K<B;K++)X.push(re[K].slice());return X}if(H===le.qb){for(X=[],K=0,B=re.length;K<B;K++)X.push((0,ce.extend)({},re[K]));return X}}function Z(q,H,re){if(null!=re){if((0,ce.isNumber)(re)||!isNaN(re)&&!(0,ce.hasOwn)(H,re))return q[re];if((0,ce.hasOwn)(H,re))return H[re]}}function te(q){return(0,ce.clone)(q)}var ee=(0,ce.createHashMap)();function Q(q){var H=(q=(0,ce.clone)(q)).type;H||(0,be._y)("");var W=H.split(":");2!==W.length&&(0,be._y)("");var X=!1;"echarts"===W[0]&&(H=W[1],X=!0),q.__isBuiltIn=X,ee.set(H,q)}function J(q,H,re){var W=(0,Se.kF)(q),X=W.length;X||(0,be._y)("");for(var B=0,O=X;B<O;B++)H=b(W[B],H),B!==O-1&&(H.length=Math.max(H.length,1));return H}function b(q,H,re,W){H.length||(0,be._y)(""),(0,ce.isObject)(q)||(0,be._y)("");var B=ee.get(q.type);B||(0,be._y)("");var O=(0,ce.map)(H,function(I){return function j(q,H){var re=new de,W=q.data,X=re.sourceFormat=q.sourceFormat,K=q.startIndex;q.seriesLayoutBy!==le.fY&&(0,be._y)("");var O=[],D={},P=q.dimensionsDefine;if(P)(0,ce.each)(P,function(ie,oe){var ae=ie.name,he={index:oe,name:ae,displayName:ie.displayName};O.push(he),null!=ae&&((0,ce.hasOwn)(D,ae)&&(0,be._y)(""),D[ae]=he)});else for(var I=0;I<q.dimensionsDetectedCount;I++)O.push({index:I});var T=(0,_e._j)(X,le.fY);H.__isBuiltIn&&(re.getRawDataItem=function(ie){return T(W,K,O,ie)},re.getRawData=(0,ce.bind)($,null,q)),re.cloneRawData=(0,ce.bind)(G,null,q);var A=(0,_e.a)(X,le.fY);re.count=(0,ce.bind)(A,null,W,K,O);var L=(0,_e.tB)(X);re.retrieveValue=function(ie,oe){var ae=T(W,K,O,ie);return N(ae,oe)};var N=re.retrieveValueFromItem=function(ie,oe){if(null!=ie){var ae=O[oe];if(ae)return L(ie,oe,ae.name)}};return re.getDimensionInfo=(0,ce.bind)(Z,null,O,D),re.cloneAllDimensionInfo=(0,ce.bind)(te,null,O),re}(I,B)}),D=(0,Se.kF)(B.transform({upstream:O[0],upstreamList:O,config:(0,ce.clone)(q.config)}));return(0,ce.map)(D,function(I,T){(0,ce.isObject)(I)||(0,be._y)(""),I.data||(0,be._y)(""),Y((0,we.Kp)(I.data))||(0,be._y)("");var N,ie=H[0];if(ie&&0===T&&!I.dimensions){var oe=ie.startIndex;oe&&(I.data=ie.data.slice(0,oe).concat(I.data)),N={seriesLayoutBy:le.fY,sourceHeader:oe,dimensions:ie.metaRawOption.dimensions}}else N={seriesLayoutBy:le.fY,sourceHeader:0,dimensions:I.dimensions};return(0,we._P)(I.data,N,null)})}function Y(q){return q===le.XD||q===le.qb}},3113:(Ut,rt,z)=>{z.d(rt,{RD:()=>Nn.Z,TA:()=>G.Z,tF:()=>de.Z,Ir:()=>j.Z,aV:()=>Z.Z,Hn:()=>W.Z,Hr:()=>we.Hr,wJ:()=>$.Z,$_:()=>b,$j:()=>we.$j,Ok:()=>we.Ok,HO:()=>we.HO,eU:()=>we.eU,zP:()=>we.zP,B9:()=>we.B9,OB:()=>Pn.Z,Zy:()=>wt,tv:()=>xr,Sp:()=>gr,Zr:()=>Je,WU:()=>ye,wL:()=>we.wL,JE:()=>we.JE,rp:()=>we.rp,FU:()=>we.FU,Q:()=>_e,_y:()=>le,S1:()=>we.S1,z$:()=>jn.RV,pI:()=>ee,Rx:()=>Se,Nu:()=>he.Z,pQ:()=>he.Z,zl:()=>we.zl,RS:()=>we.RS,qR:()=>we.qR,yn:()=>we.yn,I2:()=>we.I2,je:()=>we.je,sq:()=>we.sq,Br:()=>we.Br,ds:()=>we.ds,Pu:()=>we.Pu,aW:()=>we.aW,rV:()=>we.OB,YK:()=>we.YK,Og:()=>we.Og,jQ:()=>we.jQ,g2:()=>ae.g2,P2:()=>Y.P2,XV:()=>ce,D$:()=>oe.D,D5:()=>be,xr:()=>Q,i8:()=>we.i8,gf:()=>J,x_:()=>te});var le={};z.r(le),z.d(le,{createDimensions:()=>D.q,createList:()=>T,createScale:()=>L,createSymbol:()=>P.th,createTextStyle:()=>ie,dataStack:()=>A,enableHoverEmphasis:()=>I.vF,getECData:()=>B.A,getLayoutRect:()=>X.ME,mixinAxisModelCommonMethods:()=>N});var Se={};z.r(Se),z.d(Se,{MAX_SAFE_INTEGER:()=>se.YM,asc:()=>se.dt,getPercentWithPrecision:()=>se.eJ,getPixelPrecision:()=>se.M9,getPrecision:()=>se.p8,getPrecisionSafe:()=>se.ZB,isNumeric:()=>se.kE,isRadianAroundZero:()=>se.mW,linearMap:()=>se.NU,nice:()=>se.kx,numericToNumber:()=>se.FK,parseDate:()=>se.sG,quantile:()=>se.VR,quantity:()=>se.Xd,quantityExponent:()=>se.xW,reformIntervals:()=>se.nR,remRadian:()=>se.wW,round:()=>se.NM});var ce={};z.r(ce),z.d(ce,{format:()=>xe.WU,parse:()=>se.sG});var _e={};z.r(_e),z.d(_e,{Arc:()=>Wt.Z,BezierCurve:()=>Vt.Z,BoundingRect:()=>Xn.Z,Circle:()=>Ee.Z,CompoundPath:()=>fn.Z,Ellipse:()=>Ve.Z,Group:()=>Ce.Z,Image:()=>Te.ZP,IncrementalDisplayable:()=>kt.Z,Line:()=>At.Z,LinearGradient:()=>wn.Z,Polygon:()=>tt.Z,Polyline:()=>st.Z,RadialGradient:()=>sr.Z,Rect:()=>Tt.Z,Ring:()=>We.Z,Sector:()=>ze.C,Text:()=>Ie.ZP,clipPointsByRect:()=>fe.clipPointsByRect,clipRectByRect:()=>fe.clipRectByRect,createIcon:()=>fe.createIcon,extendPath:()=>fe.extendPath,extendShape:()=>fe.extendShape,getShapeClass:()=>fe.getShapeClass,getTransform:()=>fe.getTransform,initProps:()=>ge.KZ,makeImage:()=>fe.makeImage,makePath:()=>fe.makePath,mergePath:()=>fe.mergePath,registerShape:()=>fe.registerShape,resizePath:()=>fe.resizePath,updateProps:()=>ge.D});var ye={};z.r(ye),z.d(ye,{addCommas:()=>pr.OD,capitalFirst:()=>pr.ew,encodeHTML:()=>rr.F1,formatTime:()=>pr.mr,formatTpl:()=>pr.kF,getTextRect:()=>un,getTooltipMarker:()=>pr.A0,normalizeCssArray:()=>pr.MY,toCamelCase:()=>pr.zW,truncateText:()=>Qt.aF});var be={};z.r(be),z.d(be,{bind:()=>J.bind,clone:()=>J.clone,curry:()=>J.curry,defaults:()=>J.defaults,each:()=>J.each,extend:()=>J.extend,filter:()=>J.filter,indexOf:()=>J.indexOf,inherits:()=>J.inherits,isArray:()=>J.isArray,isFunction:()=>J.isFunction,isObject:()=>J.isObject,isString:()=>J.isString,map:()=>J.map,merge:()=>J.merge,reduce:()=>J.reduce});var we=z(5985),de=z(8103),j=z(9314),$=z(9462),G=z(7136),Z=z(1082),te=z(315),ee=z(619),Q=z(5145),J=z(9496),b=z(2523),Y=z(4658),q=z(9621),H=z(3809),re=z(7069),W=z(1363),X=z(8585),K=z(9777),B=z(1096),O=z(2681),D=z(4694),P=z(2063),I=z(4372);function T(Xt){return(0,q.Z)(null,Xt)}var A={isDimensionStacked:K.M,enableDataStack:K.BM,getStackedDimension:K.IR};function L(Xt,dt){var Lt=dt;dt instanceof W.Z||(Lt=new W.Z(dt));var qt=H.aG(Lt);return qt.setExtent(Xt[0],Xt[1]),H.Jk(qt,Lt),qt}function N(Xt){J.mixin(Xt,re.W)}function ie(Xt,dt){return(0,O.Lr)(Xt,null,null,"normal"!==(dt=dt||{}).state)}var oe=z(7151),ae=z(3691),he=z(5269),se=z(10),xe=z(7530),fe=z(6442),ge=z(8646),Ce=z(189),Te=z(6115),Ie=z(997),Ee=z(421),Ve=z(2968),ze=z(8801),We=z(5693),tt=z(8822),st=z(8059),Tt=z(7952),At=z(1995),Vt=z(161),Wt=z(598),kt=z(1133),fn=z(3769),wn=z(9869),sr=z(3622),Xn=z(468),pr=z(1755),rr=z(5853),Qt=z(8279);function un(Xt,dt,Lt,qt,Ze,et,$e,mt){return new Ie.ZP({style:{text:Xt,font:dt,align:Lt,verticalAlign:qt,padding:Ze,rich:et,overflow:$e?"truncate":null,lineHeight:mt}}).getBoundingRect()}var Pn=z(9420),Nn=z(819),jn=z(2539);function xr(Xt){var dt=de.Z.extend(Xt);return de.Z.registerClass(dt),dt}function gr(Xt){var dt=j.Z.extend(Xt);return j.Z.registerClass(dt),dt}function Je(Xt){var dt=$.Z.extend(Xt);return $.Z.registerClass(dt),dt}function wt(Xt){var dt=G.Z.extend(Xt);return G.Z.registerClass(dt),dt}var nn=z(1296);(0,oe.D)(nn.T)},7151:(Ut,rt,z)=>{z.d(rt,{D:()=>G});var le=z(5985),Se=z(9314),ce=z(7136),_e=z(8103),ye=z(9462),be=z(9496),we=z(9500),de=z(315),j=[],$={registerPreprocessor:le.ds,registerProcessor:le.Pu,registerPostInit:le.sq,registerPostUpdate:le.Br,registerUpdateLifecycle:le.YK,registerAction:le.zl,registerCoordinateSystem:le.RS,registerLayout:le.qR,registerVisual:le.Og,registerTransform:le.OB,registerLoading:le.yn,registerMap:le.je,registerImpl:we.M,PRIORITY:le.Hr,ComponentModel:_e.Z,ComponentView:Se.Z,SeriesModel:ye.Z,ChartView:ce.Z,registerComponentModel:function(Z){_e.Z.registerClass(Z)},registerComponentView:function(Z){Se.Z.registerClass(Z)},registerSeriesModel:function(Z){ye.Z.registerClass(Z)},registerChartView:function(Z){ce.Z.registerClass(Z)},registerSubTypeDefaulter:function(Z,te){_e.Z.registerSubTypeDefaulter(Z,te)},registerPainter:function(Z,te){(0,de.registerPainter)(Z,te)}};function G(Z){(0,be.isArray)(Z)?(0,be.each)(Z,function(te){G(te)}):(0,be.indexOf)(j,Z)>=0||(j.push(Z),(0,be.isFunction)(Z)&&(Z={install:Z}),Z.install($))}},1296:(Ut,rt,z)=>{z.d(rt,{T:()=>X});var le=z(2846),Se=z(468),ce=z(8646),_e=z(1096),ye=z(10),be=z(4593),we=z(1146),de=z(9496),j=z(3356),$=z(2681),G=z(5951);function Z(K){if(K){for(var B=[],O=0;O<K.length;O++)B.push(K[O].slice());return B}}function te(K,B){var O=K.label,D=B&&B.getTextGuideLine();return{dataIndex:K.dataIndex,dataType:K.dataType,seriesIndex:K.seriesModel.seriesIndex,text:K.label.style.text,rect:K.hostRect,labelRect:K.rect,align:O.style.align,verticalAlign:O.style.verticalAlign,labelLinePoints:Z(D&&D.shape.points)}}var ee=["align","verticalAlign","width","height","fontSize"],Q=new be.ZP,J=(0,le.Yf)(),b=(0,le.Yf)();function Y(K,B,O){for(var D=0;D<O.length;D++){var P=O[D];null!=B[P]&&(K[P]=B[P])}}var q=["x","y","rotation"];const re=function(){function K(){this._labelList=[],this._chartViewList=[]}return K.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},K.prototype._addLabel=function(B,O,D,P,I){var T=P.style,L=P.__hostTarget.textConfig||{},N=P.getComputedTransform(),ie=P.getBoundingRect().plain();Se.Z.applyTransform(ie,ie,N),N?Q.setLocalTransform(N):(Q.x=Q.y=Q.rotation=Q.originX=Q.originY=0,Q.scaleX=Q.scaleY=1),Q.rotation=(0,G.m)(Q.rotation);var ae,oe=P.__hostTarget;if(oe){ae=oe.getBoundingRect().plain();var he=oe.getComputedTransform();Se.Z.applyTransform(ae,ae,he)}var se=ae&&oe.getTextGuideLine();this._labelList.push({label:P,labelLine:se,seriesModel:D,dataIndex:B,dataType:O,layoutOption:I,computedLayoutOption:null,rect:ie,hostRect:ae,priority:ae?ae.width*ae.height:0,defaultAttr:{ignore:P.ignore,labelGuideIgnore:se&&se.ignore,x:Q.x,y:Q.y,scaleX:Q.scaleX,scaleY:Q.scaleY,rotation:Q.rotation,style:{x:T.x,y:T.y,align:T.align,verticalAlign:T.verticalAlign,width:T.width,height:T.height,fontSize:T.fontSize},cursor:P.cursor,attachedPos:L.position,attachedRot:L.rotation}})},K.prototype.addLabelsOfSeries=function(B){var O=this;this._chartViewList.push(B);var D=B.__model,P=D.get("labelLayout");!(0,de.isFunction)(P)&&!(0,de.keys)(P).length||B.group.traverse(function(I){if(I.ignore)return!0;var T=I.getTextContent(),A=(0,_e.A)(I);T&&!T.disableLabelLayout&&O._addLabel(A.dataIndex,A.dataType,D,T,P)})},K.prototype.updateLayoutConfig=function(B){var O=B.getWidth(),D=B.getHeight();function P(Te,Ie){return function(){(0,we.d)(Te,Ie)}}for(var I=0;I<this._labelList.length;I++){var T=this._labelList[I],A=T.label,L=A.__hostTarget,N=T.defaultAttr,ie=void 0;ie=(0,de.isFunction)(T.layoutOption)?T.layoutOption(te(T,L)):T.layoutOption,T.computedLayoutOption=ie=ie||{};var oe=Math.PI/180;L&&L.setTextConfig({local:!1,position:null!=ie.x||null!=ie.y?null:N.attachedPos,rotation:null!=ie.rotate?ie.rotate*oe:N.attachedRot,offset:[ie.dx||0,ie.dy||0]});var ae=!1;if(null!=ie.x?(A.x=(0,ye.GM)(ie.x,O),A.setStyle("x",0),ae=!0):(A.x=N.x,A.setStyle("x",N.style.x)),null!=ie.y?(A.y=(0,ye.GM)(ie.y,D),A.setStyle("y",0),ae=!0):(A.y=N.y,A.setStyle("y",N.style.y)),ie.labelLinePoints){var he=L.getTextGuideLine();he&&(he.setShape({points:ie.labelLinePoints}),ae=!1)}J(A).needsUpdateLabelLine=ae,A.rotation=null!=ie.rotate?ie.rotate*oe:N.rotation,A.scaleX=N.scaleX,A.scaleY=N.scaleY;for(var xe=0;xe<ee.length;xe++){var fe=ee[xe];A.setStyle(fe,null!=ie[fe]?ie[fe]:N.style[fe])}if(ie.draggable){if(A.draggable=!0,A.cursor="move",L){var ge=T.seriesModel;null!=T.dataIndex&&(ge=T.seriesModel.getData(T.dataType).getItemModel(T.dataIndex)),A.on("drag",P(L,ge.getModel("labelLine")))}}else A.off("drag"),A.cursor=N.cursor}},K.prototype.layout=function(B){var O=B.getWidth(),D=B.getHeight(),P=(0,j.VT)(this._labelList),I=(0,de.filter)(P,function(L){return"shiftX"===L.layoutOption.moveOverlap}),T=(0,de.filter)(P,function(L){return"shiftY"===L.layoutOption.moveOverlap});(0,j.WE)(I,0,O),(0,j.GI)(T,0,D);var A=(0,de.filter)(P,function(L){return L.layoutOption.hideOverlap});(0,j.yl)(A)},K.prototype.processLabelsOverall=function(){var B=this;(0,de.each)(this._chartViewList,function(O){var D=O.__model,P=O.ignoreLabelLineUpdate,I=D.isAnimationEnabled();O.group.traverse(function(T){if(T.ignore&&!T.forceLabelAnimation)return!0;var A=!P,L=T.getTextContent();!A&&L&&(A=J(L).needsUpdateLabelLine),A&&B._updateLabelLine(T,D),I&&B._animateLabels(T,D)})})},K.prototype._updateLabelLine=function(B,O){var D=B.getTextContent(),P=(0,_e.A)(B),I=P.dataIndex;if(D&&null!=I){var T=O.getData(P.dataType),A=T.getItemModel(I),L={},N=T.getItemVisual(I,"style");if(N){var ie=T.getVisual("drawType");L.stroke=N[ie]}var oe=A.getModel("labelLine");(0,we.Iu)(B,(0,we.$x)(A),L),(0,we.d)(B,oe)}},K.prototype._animateLabels=function(B,O){var D=B.getTextContent(),P=B.getTextGuideLine();if(D&&(B.forceLabelAnimation||!D.ignore&&!D.invisible&&!B.disableLabelAnimation&&!(0,ce.eq)(B))){var T=(I=J(D)).oldLayout,A=(0,_e.A)(B),L=A.dataIndex,N={x:D.x,y:D.y,rotation:D.rotation},ie=O.getData(A.dataType);if(T){D.attr(T);var ae=B.prevStates;ae&&((0,de.indexOf)(ae,"select")>=0&&D.attr(I.oldLayoutSelect),(0,de.indexOf)(ae,"emphasis")>=0&&D.attr(I.oldLayoutEmphasis)),(0,ce.D)(D,N,O,L)}else if(D.attr(N),!(0,$.qA)(D).valueAnimation){var oe=(0,de.retrieve2)(D.style.opacity,1);D.style.opacity=0,(0,ce.KZ)(D,{style:{opacity:oe}},O,L)}if(I.oldLayout=N,D.states.select){var he=I.oldLayoutSelect={};Y(he,N,q),Y(he,D.states.select,q)}if(D.states.emphasis){var se=I.oldLayoutEmphasis={};Y(se,N,q),Y(se,D.states.emphasis,q)}(0,$.tD)(D,L,ie,O,O)}if(P&&!P.ignore&&!P.invisible){var I=b(P),xe={points:P.shape.points};(T=I.oldLayout)?(P.attr({shape:T}),(0,ce.D)(P,{shape:xe},O)):(P.setShape(xe),P.style.strokePercent=0,(0,ce.KZ)(P,{style:{strokePercent:1}},O)),I.oldLayout=xe}},K}();var W=(0,le.Yf)();function X(K){K.registerUpdateLifecycle("series:beforeupdate",function(B,O,D){var P=W(O).labelManager;P||(P=W(O).labelManager=new re),P.clearLabels()}),K.registerUpdateLifecycle("series:layoutlabels",function(B,O,D){var P=W(O).labelManager;D.updatedSeries.forEach(function(I){P.addLabelsOfSeries(O.getViewOfSeriesModel(I))}),P.updateLayoutConfig(O),P.layout(O),P.processLabelsOverall()})}},1146:(Ut,rt,z)=>{z.d(rt,{$x:()=>ie,Iu:()=>N,_A:()=>T,d:()=>O,qK:()=>I});var le=z(1788),Se=z(5489),ce=z(8059),_e=z(7899),ye=z(5951),be=z(7315),we=z(9496),de=z(619),j=z(5145),$=z(4372),G=2*Math.PI,Z=_e.Z.CMD,te=["top","right","bottom","left"];function ee(oe,ae,he,se,xe){var fe=he.width,ge=he.height;switch(oe){case"top":se.set(he.x+fe/2,he.y-ae),xe.set(0,-1);break;case"bottom":se.set(he.x+fe/2,he.y+ge+ae),xe.set(0,1);break;case"left":se.set(he.x-ae,he.y+ge/2),xe.set(-1,0);break;case"right":se.set(he.x+fe+ae,he.y+ge/2),xe.set(1,0)}}function Q(oe,ae,he,se,xe,fe,ge,Ce,Te){ge-=oe,Ce-=ae;var Ie=Math.sqrt(ge*ge+Ce*Ce),Ee=(ge/=Ie)*he+oe,Ve=(Ce/=Ie)*he+ae;if(Math.abs(se-xe)%G<1e-4)return Te[0]=Ee,Te[1]=Ve,Ie-he;if(fe){var ze=se;se=(0,ye.m)(xe),xe=(0,ye.m)(ze)}else se=(0,ye.m)(se),xe=(0,ye.m)(xe);se>xe&&(xe+=G);var We=Math.atan2(Ce,ge);if(We<0&&(We+=G),We>=se&&We<=xe||We+G>=se&&We+G<=xe)return Te[0]=Ee,Te[1]=Ve,Ie-he;var tt=he*Math.cos(se)+oe,st=he*Math.sin(se)+ae,Tt=he*Math.cos(xe)+oe,At=he*Math.sin(xe)+ae,Vt=(tt-ge)*(tt-ge)+(st-Ce)*(st-Ce),Wt=(Tt-ge)*(Tt-ge)+(At-Ce)*(At-Ce);return Vt<Wt?(Te[0]=tt,Te[1]=st,Math.sqrt(Vt)):(Te[0]=Tt,Te[1]=At,Math.sqrt(Wt))}function J(oe,ae,he,se,xe,fe,ge,Ce){var Te=xe-oe,Ie=fe-ae,Ee=he-oe,Ve=se-ae,ze=Math.sqrt(Ee*Ee+Ve*Ve),tt=(Te*(Ee/=ze)+Ie*(Ve/=ze))/ze;Ce&&(tt=Math.min(Math.max(tt,0),1));var st=ge[0]=oe+(tt*=ze)*Ee,Tt=ge[1]=ae+tt*Ve;return Math.sqrt((st-xe)*(st-xe)+(Tt-fe)*(Tt-fe))}function b(oe,ae,he,se,xe,fe,ge){he<0&&(oe+=he,he=-he),se<0&&(ae+=se,se=-se);var Ce=oe+he,Te=ae+se,Ie=ge[0]=Math.min(Math.max(xe,oe),Ce),Ee=ge[1]=Math.min(Math.max(fe,ae),Te);return Math.sqrt((Ie-xe)*(Ie-xe)+(Ee-fe)*(Ee-fe))}var Y=[];function q(oe,ae,he){var se=b(ae.x,ae.y,ae.width,ae.height,oe.x,oe.y,Y);return he.set(Y[0],Y[1]),se}function H(oe,ae,he){for(var Ce,Te,se=0,xe=0,fe=0,ge=0,Ie=1/0,Ee=ae.data,Ve=oe.x,ze=oe.y,We=0;We<Ee.length;){var tt=Ee[We++];1===We&&(fe=se=Ee[We],ge=xe=Ee[We+1]);var st=Ie;switch(tt){case Z.M:se=fe=Ee[We++],xe=ge=Ee[We++];break;case Z.L:st=J(se,xe,Ee[We],Ee[We+1],Ve,ze,Y,!0),se=Ee[We++],xe=Ee[We++];break;case Z.C:st=(0,be.t1)(se,xe,Ee[We++],Ee[We++],Ee[We++],Ee[We++],Ee[We],Ee[We+1],Ve,ze,Y),se=Ee[We++],xe=Ee[We++];break;case Z.Q:st=(0,be.Wr)(se,xe,Ee[We++],Ee[We++],Ee[We],Ee[We+1],Ve,ze,Y),se=Ee[We++],xe=Ee[We++];break;case Z.A:var Tt=Ee[We++],At=Ee[We++],Vt=Ee[We++],Wt=Ee[We++],kt=Ee[We++],fn=Ee[We++];We+=1;var wn=!!(1-Ee[We++]);Ce=Math.cos(kt)*Vt+Tt,Te=Math.sin(kt)*Wt+At,We<=1&&(fe=Ce,ge=Te),st=Q(Tt,At,Wt,kt,kt+fn,wn,(Ve-Tt)*Wt/Vt+Tt,ze,Y),se=Math.cos(kt+fn)*Vt+Tt,xe=Math.sin(kt+fn)*Wt+At;break;case Z.R:st=b(fe=se=Ee[We++],ge=xe=Ee[We++],Ee[We++],Ee[We++],Ve,ze,Y);break;case Z.Z:st=J(se,xe,fe,ge,Ve,ze,Y,!0),se=fe,xe=ge}st<Ie&&(Ie=st,he.set(Y[0],Y[1]))}return Ie}var re=new le.Z,W=new le.Z,X=new le.Z,K=new le.Z,B=new le.Z;function O(oe,ae){if(oe){var he=oe.getTextGuideLine(),se=oe.getTextContent();if(se&&he){var xe=oe.textGuideLineConfig||{},fe=[[0,0],[0,0],[0,0]],ge=xe.candidates||te,Ce=se.getBoundingRect().clone();Ce.applyTransform(se.getComputedTransform());var Te=1/0,Ie=xe.anchor,Ee=oe.getComputedTransform(),Ve=Ee&&(0,de.invert)([],Ee),ze=ae.get("length2")||0;Ie&&X.copy(Ie);for(var We=0;We<ge.length;We++){ee(ge[We],0,Ce,re,K),le.Z.scaleAndAdd(W,re,K,ze),W.transform(Ve);var st=oe.getBoundingRect(),Tt=Ie?Ie.distance(W):oe instanceof Se.ZP?H(W,oe.path,X):q(W,st,X);Tt<Te&&(Te=Tt,W.transform(Ee),X.transform(Ee),X.toArray(fe[0]),W.toArray(fe[1]),re.toArray(fe[2]))}I(fe,ae.get("minTurnAngle")),he.setShape({points:fe})}}}var D=[],P=new le.Z;function I(oe,ae){if(ae<=180&&ae>0){ae=ae/180*Math.PI,re.fromArray(oe[0]),W.fromArray(oe[1]),X.fromArray(oe[2]),le.Z.sub(K,re,W),le.Z.sub(B,X,W);var he=K.len(),se=B.len();if(!(he<.001||se<.001)){K.scale(1/he),B.scale(1/se);var xe=K.dot(B);if(Math.cos(ae)<xe){var ge=J(W.x,W.y,X.x,X.y,re.x,re.y,D,!1);P.fromArray(D),P.scaleAndAdd(B,ge/Math.tan(Math.PI-ae));var Ce=X.x!==W.x?(P.x-W.x)/(X.x-W.x):(P.y-W.y)/(X.y-W.y);if(isNaN(Ce))return;Ce<0?le.Z.copy(P,W):Ce>1&&le.Z.copy(P,X),P.toArray(oe[1])}}}}function T(oe,ae,he){if(he<=180&&he>0){he=he/180*Math.PI,re.fromArray(oe[0]),W.fromArray(oe[1]),X.fromArray(oe[2]),le.Z.sub(K,W,re),le.Z.sub(B,X,W);var se=K.len(),xe=B.len();if(!(se<.001||xe<.001)&&(K.scale(1/se),B.scale(1/xe),K.dot(ae)<Math.cos(he))){var Ce=J(W.x,W.y,X.x,X.y,re.x,re.y,D,!1);P.fromArray(D);var Te=Math.PI/2,Ee=Te+Math.acos(B.dot(ae))-he;if(Ee>=Te)le.Z.copy(P,X);else{P.scaleAndAdd(B,Ce/Math.tan(Math.PI/2-Ee));var Ve=X.x!==W.x?(P.x-W.x)/(X.x-W.x):(P.y-W.y)/(X.y-W.y);if(isNaN(Ve))return;Ve<0?le.Z.copy(P,W):Ve>1&&le.Z.copy(P,X)}P.toArray(oe[1])}}}function A(oe,ae,he,se){var xe="normal"===he,fe=xe?oe:oe.ensureState(he);fe.ignore=ae;var ge=se.get("smooth");ge&&!0===ge&&(ge=.3),fe.shape=fe.shape||{},ge>0&&(fe.shape.smooth=ge);var Ce=se.getModel("lineStyle").getLineStyle();xe?oe.useStyle(Ce):fe.style=Ce}function L(oe,ae){var he=ae.smooth,se=ae.points;if(se)if(oe.moveTo(se[0][0],se[0][1]),he>0&&se.length>=3){var xe=j.dist(se[0],se[1]),fe=j.dist(se[1],se[2]);if(!xe||!fe)return oe.lineTo(se[1][0],se[1][1]),void oe.lineTo(se[2][0],se[2][1]);var ge=Math.min(xe,fe)*he,Ce=j.lerp([],se[1],se[0],ge/xe),Te=j.lerp([],se[1],se[2],ge/fe),Ie=j.lerp([],Ce,Te,.5);oe.bezierCurveTo(Ce[0],Ce[1],Ce[0],Ce[1],Ie[0],Ie[1]),oe.bezierCurveTo(Te[0],Te[1],Te[0],Te[1],se[2][0],se[2][1])}else for(var Ee=1;Ee<se.length;Ee++)oe.lineTo(se[Ee][0],se[Ee][1])}function N(oe,ae,he){var se=oe.getTextGuideLine(),xe=oe.getTextContent();if(xe){for(var fe=ae.normal,ge=fe.get("show"),Ce=xe.ignore,Te=0;Te<$.qc.length;Te++){var Ie=$.qc[Te],Ee=ae[Ie],Ve="normal"===Ie;if(Ee){var ze=Ee.get("show");if((Ve?Ce:(0,we.retrieve2)(xe.states[Ie]&&xe.states[Ie].ignore,Ce))||!(0,we.retrieve2)(ze,ge)){var tt=Ve?se:se&&se.states[Ie];tt&&(tt.ignore=!0),se&&A(se,!0,Ie,Ee);continue}se||(se=new ce.Z,oe.setTextGuideLine(se),!Ve&&(Ce||!ge)&&A(se,!0,"normal",ae.normal),oe.stateProxy&&(se.stateProxy=oe.stateProxy)),A(se,!1,Ie,Ee)}}if(se){(0,we.defaults)(se.style,he),se.style.fill=null;var st=fe.get("showAbove");(oe.textGuideLineConfig=oe.textGuideLineConfig||{}).showAbove=st||!1,se.buildPath=L}}else se&&oe.removeTextGuideLine()}function ie(oe,ae){for(var he={normal:oe.getModel(ae=ae||"labelLine")},se=0;se<$.L1.length;se++){var xe=$.L1[se];he[xe]=oe.getModel([xe,ae])}return he}},3356:(Ut,rt,z)=>{z.d(rt,{GI:()=>be,VT:()=>ce,WE:()=>ye,yl:()=>we});var le=z(8025),Se=z(468);function ce(de){for(var j=[],$=0;$<de.length;$++){var G=de[$];if(!G.defaultAttr.ignore){var Z=G.label,te=Z.getComputedTransform(),ee=Z.getBoundingRect(),Q=!te||te[1]<1e-5&&te[2]<1e-5,J=Z.style.margin||0,b=ee.clone();b.applyTransform(te),b.x-=J/2,b.y-=J/2,b.width+=J,b.height+=J;var Y=Q?new le.Z(ee,te):null;j.push({label:Z,labelLine:G.labelLine,rect:b,localRect:ee,obb:Y,priority:G.priority,defaultAttr:G.defaultAttr,layoutOption:G.computedLayoutOption,axisAligned:Q,transform:te})}}return j}function _e(de,j,$,G,Z,te){var ee=de.length;if(!(ee<2)){de.sort(function(N,ie){return N.rect[j]-ie.rect[j]});for(var J,Q=0,b=!1,Y=[],q=0,H=0;H<ee;H++){var re=de[H],W=re.rect;(J=W[j]-Q)<0&&(W[j]-=J,re.label[j]-=J,b=!0);var X=Math.max(-J,0);Y.push(X),q+=X,Q=W[j]+W[$]}q>0&&te&&T(-q/ee,0,ee);var O,D,K=de[0],B=de[ee-1];return P(),O<0&&A(-O,.8),D<0&&A(D,.8),P(),I(O,D,1),I(D,O,-1),P(),O<0&&L(-O),D<0&&L(D),b}function P(){O=K.rect[j]-G,D=Z-B.rect[j]-B.rect[$]}function I(N,ie,oe){if(N<0){var ae=Math.min(ie,-N);if(ae>0){T(ae*oe,0,ee);var he=ae+N;he<0&&A(-he*oe,1)}else A(-N*oe,1)}}function T(N,ie,oe){0!==N&&(b=!0);for(var ae=ie;ae<oe;ae++){var he=de[ae];he.rect[j]+=N,he.label[j]+=N}}function A(N,ie){for(var oe=[],ae=0,he=1;he<ee;he++){var se=de[he-1].rect,xe=Math.max(de[he].rect[j]-se[j]-se[$],0);oe.push(xe),ae+=xe}if(ae){var fe=Math.min(Math.abs(N)/ae,ie);if(N>0)for(he=0;he<ee-1;he++)T(oe[he]*fe,0,he+1);else for(he=ee-1;he>0;he--)T(-oe[he-1]*fe,he,ee)}}function L(N){var ie=N<0?-1:1;N=Math.abs(N);for(var oe=Math.ceil(N/(ee-1)),ae=0;ae<ee-1;ae++)if(ie>0?T(oe,0,ae+1):T(-oe,ee-ae-1,ee),(N-=oe)<=0)return}}function ye(de,j,$,G){return _e(de,"x","width",j,$,G)}function be(de,j,$,G){return _e(de,"y","height",j,$,G)}function we(de){var j=[];de.sort(function(X,K){return K.priority-X.priority});var $=new Se.Z(0,0,0,0);function G(X){if(!X.ignore){var K=X.ensureState("emphasis");null==K.ignore&&(K.ignore=!1)}X.ignore=!0}for(var Z=0;Z<de.length;Z++){var te=de[Z],ee=te.axisAligned,Q=te.localRect,J=te.transform,b=te.label,Y=te.labelLine;$.copy(te.rect),$.width-=.1,$.height-=.1,$.x+=.05,$.y+=.05;for(var q=te.obb,H=!1,re=0;re<j.length;re++){var W=j[re];if($.intersect(W.rect)){if(ee&&W.axisAligned){H=!0;break}if(W.obb||(W.obb=new le.Z(W.localRect,W.transform)),q||(q=new le.Z(Q,J)),q.intersect(W.obb)){H=!0;break}}}H?(G(b),Y&&G(Y)):(b.attr("ignore",te.defaultAttr.ignore),Y&&Y.attr("ignore",te.defaultAttr.labelGuideIgnore),j.push(te))}}},2681:(Ut,rt,z)=>{z.d(rt,{Lr:()=>G,k3:()=>$,nC:()=>Z,ni:()=>j,pe:()=>re,qA:()=>H,qT:()=>q,tD:()=>W});var le=z(997),Se=z(9496),ce=z(4372),_e=z(2846),ye=z(8646),be={};function we(X,K){for(var B=0;B<ce.L1.length;B++){var O=ce.L1[B],D=K[O],P=X.ensureState(O);P.style=P.style||{},P.style.text=D}var I=X.currentStates.slice();X.clearStates(!0),X.setStyle({text:K.normal}),X.useStates(I,!0)}function de(X,K,B){var T,O=X.labelFetcher,D=X.labelDataIndex,P=X.labelDimIndex,I=K.normal;O&&(T=O.getFormattedLabel(D,"normal",null,P,I&&I.get("formatter"),null!=B?{interpolatedValue:B}:null)),null==T&&(T=(0,Se.isFunction)(X.defaultText)?X.defaultText(D,X,B):X.defaultText);for(var A={normal:T},L=0;L<ce.L1.length;L++){var N=ce.L1[L],ie=K[N];A[N]=(0,Se.retrieve2)(O?O.getFormattedLabel(D,N,null,P,ie&&ie.get("formatter")):null,T)}return A}function j(X,K,B,O){B=B||be;for(var D=X instanceof le.ZP,P=!1,I=0;I<ce.qc.length;I++)if((T=K[ce.qc[I]])&&T.getShallow("show")){P=!0;break}var A=D?X:X.getTextContent();if(P){D||(A||(A=new le.ZP,X.setTextContent(A)),X.stateProxy&&(A.stateProxy=X.stateProxy));var L=de(B,K),N=K.normal,ie=!!N.getShallow("show"),oe=G(N,O&&O.normal,B,!1,!D);for(oe.text=L.normal,D||X.setTextConfig(Z(N,B,!1)),I=0;I<ce.L1.length;I++){var T,ae=ce.L1[I];if(T=K[ae]){var he=A.ensureState(ae),se=!!(0,Se.retrieve2)(T.getShallow("show"),ie);se!==ie&&(he.ignore=!se),he.style=G(T,O&&O[ae],B,!0,!D),he.style.text=L[ae],D||(X.ensureState(ae).textConfig=Z(T,B,!0))}}A.silent=!!N.getShallow("silent"),null!=A.style.x&&(oe.x=A.style.x),null!=A.style.y&&(oe.y=A.style.y),A.ignore=!ie,A.useStyle(oe),A.dirty(),B.enableTextSetter&&(H(A).setLabelText=function(fe){var ge=de(B,K,fe);we(A,ge)})}else A&&(A.ignore=!0);X.dirty()}function $(X,K){for(var B={normal:X.getModel(K=K||"label")},O=0;O<ce.L1.length;O++){var D=ce.L1[O];B[D]=X.getModel([D,K])}return B}function G(X,K,B,O,D){var P={};return function te(X,K,B,O,D){B=B||be;var A,P=K.ecModel,I=P&&P.option.textStyle,T=function ee(X){for(var K;X&&X!==X.ecModel;){var B=(X.option||be).rich;if(B){K=K||{};for(var O=(0,Se.keys)(B),D=0;D<O.length;D++)K[O[D]]=1}X=X.parentModel}return K}(K);if(T)for(var L in A={},T)if(T.hasOwnProperty(L)){var N=K.getModel(["rich",L]);Y(A[L]={},N,I,B,O,D,!1,!0)}A&&(X.rich=A);var ie=K.get("overflow");ie&&(X.overflow=ie);var oe=K.get("minMargin");null!=oe&&(X.margin=oe),Y(X,K,I,B,O,D,!0,!1)}(P,X,B,O,D),K&&(0,Se.extend)(P,K),P}function Z(X,K,B){K=K||{};var D,O={},P=X.getShallow("rotate"),I=(0,Se.retrieve2)(X.getShallow("distance"),B?null:5),T=X.getShallow("offset");return"outside"===(D=X.getShallow("position")||(B?null:"inside"))&&(D=K.defaultOutsidePosition||"top"),null!=D&&(O.position=D),null!=T&&(O.offset=T),null!=P&&(P*=Math.PI/180,O.rotation=P),null!=I&&(O.distance=I),O.outsideFill="inherit"===X.get("color")?K.inheritColor||null:"auto",O}var Q=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],J=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],b=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function Y(X,K,B,O,D,P,I,T){B=!D&&B||be;var A=O&&O.inheritColor,L=K.getShallow("color"),N=K.getShallow("textBorderColor"),ie=(0,Se.retrieve2)(K.getShallow("opacity"),B.opacity);("inherit"===L||"auto"===L)&&(L=A||null),("inherit"===N||"auto"===N)&&(N=A||null),P||(L=L||B.color,N=N||B.textBorderColor),null!=L&&(X.fill=L),null!=N&&(X.stroke=N);var oe=(0,Se.retrieve2)(K.getShallow("textBorderWidth"),B.textBorderWidth);null!=oe&&(X.lineWidth=oe);var ae=(0,Se.retrieve2)(K.getShallow("textBorderType"),B.textBorderType);null!=ae&&(X.lineDash=ae);var he=(0,Se.retrieve2)(K.getShallow("textBorderDashOffset"),B.textBorderDashOffset);null!=he&&(X.lineDashOffset=he),!D&&null==ie&&!T&&(ie=O&&O.defaultOpacity),null!=ie&&(X.opacity=ie),!D&&!P&&null==X.fill&&O.inheritColor&&(X.fill=O.inheritColor);for(var se=0;se<Q.length;se++)null!=(fe=(0,Se.retrieve2)(K.getShallow(xe=Q[se]),B[xe]))&&(X[xe]=fe);for(se=0;se<J.length;se++)null!=(fe=K.getShallow(xe=J[se]))&&(X[xe]=fe);if(null==X.verticalAlign){var ge=K.getShallow("baseline");null!=ge&&(X.verticalAlign=ge)}if(!I||!O.disableBox){for(se=0;se<b.length;se++){var xe,fe;null!=(fe=K.getShallow(xe=b[se]))&&(X[xe]=fe)}var Ce=K.getShallow("borderType");null!=Ce&&(X.borderDash=Ce),("auto"===X.backgroundColor||"inherit"===X.backgroundColor)&&A&&(X.backgroundColor=A),("auto"===X.borderColor||"inherit"===X.borderColor)&&A&&(X.borderColor=A)}}function q(X,K){var B=K&&K.getModel("textStyle");return(0,Se.trim)([X.fontStyle||B&&B.getShallow("fontStyle")||"",X.fontWeight||B&&B.getShallow("fontWeight")||"",(X.fontSize||B&&B.getShallow("fontSize")||12)+"px",X.fontFamily||B&&B.getShallow("fontFamily")||"sans-serif"].join(" "))}var H=(0,_e.Yf)();function re(X,K,B,O){if(X){var D=H(X);D.prevValue=D.value,D.value=B;var P=K.normal;D.valueAnimation=P.get("valueAnimation"),D.valueAnimation&&(D.precision=P.get("precision"),D.defaultInterpolatedText=O,D.statesModels=K)}}function W(X,K,B,O,D){var P=H(X);if(P.valueAnimation&&P.prevValue!==P.value){var I=P.defaultInterpolatedText,T=(0,Se.retrieve2)(P.interpolatedValue,P.prevValue),A=P.value;X.percent=0,(null==P.prevValue?ye.KZ:ye.D)(X,{percent:1},O,K,null,function L(N){var ie=(0,_e.pk)(B,P.precision,T,A,N);P.interpolatedValue=1===N?null:ie;var oe=de({labelDataIndex:K,labelFetcher:D,defaultText:I?I(ie):ie+""},P.statesModels,ie);we(X,oe)})}}},3236:(Ut,rt,z)=>{z.d(rt,{Bk:()=>J,G_:()=>ee,Ge:()=>$,Gk:()=>j,My:()=>Z,bK:()=>Q});var le=z(9496),Se=z(10),ce=z(9777),_e=z(4325),ye=z(545),be="__ec_stack_";function we(H){return H.get("stack")||be+H.seriesIndex}function de(H){return H.dim+H.index}function j(H){var re=[],W=H.axis,X="axis0";if("category"===W.type){for(var K=W.getBandWidth(),B=0;B<H.count;B++)re.push((0,le.defaults)({bandWidth:K,axisKey:X,stackId:be+B},H));var O=te(re),D=[];for(B=0;B<H.count;B++){var P=O[X][be+B];P.offsetCenter=P.offset+P.width/2,D.push(P)}return D}}function $(H,re){var W=[];return re.eachSeriesByType(H,function(X){b(X)&&W.push(X)}),W}function Z(H){var re=function G(H){var re={};(0,le.each)(H,function(P){var T=P.coordinateSystem.getBaseAxis();if("time"===T.type||"value"===T.type)for(var A=P.getData(),L=T.dim+"_"+T.index,N=A.getDimensionIndex(A.mapDimension(T.dim)),ie=A.getStore(),oe=0,ae=ie.count();oe<ae;++oe){var he=ie.get(N,oe);re[L]?re[L].push(he):re[L]=[he]}});var W={};for(var X in re)if(re.hasOwnProperty(X)){var K=re[X];if(K){K.sort(function(P,I){return P-I});for(var B=null,O=1;O<K.length;++O){var D=K[O]-K[O-1];D>0&&(B=null===B?D:Math.min(B,D))}W[X]=B}}return W}(H),W=[];return(0,le.each)(H,function(X){var D,B=X.coordinateSystem.getBaseAxis(),O=B.getExtent();if("category"===B.type)D=B.getBandWidth();else if("value"===B.type||"time"===B.type){var I=re[B.dim+"_"+B.index],T=Math.abs(O[1]-O[0]),A=B.scale.getExtent(),L=Math.abs(A[1]-A[0]);D=I?T/L*I:T}else{var N=X.getData();D=Math.abs(O[1]-O[0])/N.count()}var ie=(0,Se.GM)(X.get("barWidth"),D),oe=(0,Se.GM)(X.get("barMaxWidth"),D),ae=(0,Se.GM)(X.get("barMinWidth")||(Y(X)?.5:1),D),he=X.get("barGap"),se=X.get("barCategoryGap");W.push({bandWidth:D,barWidth:ie,barMaxWidth:oe,barMinWidth:ae,barGap:he,barCategoryGap:se,axisKey:de(B),stackId:we(X)})}),te(W)}function te(H){var re={};(0,le.each)(H,function(X,K){var B=X.axisKey,O=X.bandWidth,D=re[B]||{bandWidth:O,remainedWidth:O,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},P=D.stacks;re[B]=D;var I=X.stackId;P[I]||D.autoWidthCount++,P[I]=P[I]||{width:0,maxWidth:0};var T=X.barWidth;T&&!P[I].width&&(P[I].width=T,T=Math.min(D.remainedWidth,T),D.remainedWidth-=T);var A=X.barMaxWidth;A&&(P[I].maxWidth=A);var L=X.barMinWidth;L&&(P[I].minWidth=L);var N=X.barGap;null!=N&&(D.gap=N);var ie=X.barCategoryGap;null!=ie&&(D.categoryGap=ie)});var W={};return(0,le.each)(re,function(X,K){W[K]={};var B=X.stacks,O=X.bandWidth,D=X.categoryGap;if(null==D){var P=(0,le.keys)(B).length;D=Math.max(35-4*P,15)+"%"}var I=(0,Se.GM)(D,O),T=(0,Se.GM)(X.gap,1),A=X.remainedWidth,L=X.autoWidthCount,N=(A-I)/(L+(L-1)*T);N=Math.max(N,0),(0,le.each)(B,function(he){var se=he.maxWidth,xe=he.minWidth;if(he.width){var fe=he.width;se&&(fe=Math.min(fe,se)),xe&&(fe=Math.max(fe,xe)),he.width=fe,A-=fe+T*fe,L--}else fe=N,se&&se<fe&&(fe=Math.min(se,A)),xe&&xe>fe&&(fe=xe),fe!==N&&(he.width=fe,A-=fe+T*fe,L--)}),N=(A-I)/(L+(L-1)*T),N=Math.max(N,0);var oe,ie=0;(0,le.each)(B,function(he,se){he.width||(he.width=N),oe=he,ie+=he.width*(1+T)}),oe&&(ie-=oe.width*T);var ae=-ie/2;(0,le.each)(B,function(he,se){W[K][se]=W[K][se]||{bandWidth:O,offset:ae,width:he.width},ae+=he.width*(1+T)})}),W}function ee(H,re,W){if(H&&re){var X=H[de(re)];return null!=X&&null!=W?X[we(W)]:X}}function Q(H,re){var W=$(H,re),X=Z(W);(0,le.each)(W,function(K){var B=K.getData(),D=K.coordinateSystem.getBaseAxis(),P=we(K),I=X[de(D)][P];B.setLayout({bandWidth:I.bandWidth,offset:I.offset,size:I.width})})}function J(H){return{seriesType:H,plan:(0,_e.Z)(),reset:function(re){if(b(re)){var W=re.getData(),X=re.coordinateSystem,K=X.getBaseAxis(),B=X.getOtherAxis(K),O=W.getDimensionIndex(W.mapDimension(B.dim)),D=W.getDimensionIndex(W.mapDimension(K.dim)),P=re.get("showBackground",!0),I=W.mapDimension(B.dim),T=W.getCalculationInfo("stackResultDimension"),A=(0,ce.M)(W,I)&&!!W.getCalculationInfo("stackedOnSeries"),L=B.isHorizontal(),N=function q(H,re){var W=re.model.get("startValue");return W||(W=0),re.toGlobalCoord(re.dataToCoord("log"===re.type?W>0?W:1:W))}(0,B),ie=Y(re),oe=re.get("barMinHeight")||0,ae=T&&W.getDimensionIndex(T),he=W.getLayout("size"),se=W.getLayout("offset");return{progress:function(xe,fe){for(var ze,ge=xe.count,Ce=ie&&(0,ye.o)(3*ge),Te=ie&&P&&(0,ye.o)(3*ge),Ie=ie&&(0,ye.o)(ge),Ee=X.master.getRect(),Ve=L?Ee.width:Ee.height,We=fe.getStore(),tt=0;null!=(ze=xe.next());){var st=We.get(A?ae:O,ze),Tt=We.get(D,ze),At=N,Vt=void 0;A&&(Vt=+st-We.get(O,ze));var Wt=void 0,kt=void 0,fn=void 0,wn=void 0;if(L){var sr=X.dataToPoint([st,Tt]);A&&(At=X.dataToPoint([Vt,Tt])[0]),Wt=At,kt=sr[1]+se,fn=sr[0]-At,wn=he,Math.abs(fn)<oe&&(fn=(fn<0?-1:1)*oe)}else sr=X.dataToPoint([Tt,st]),A&&(At=X.dataToPoint([Tt,Vt])[1]),Wt=sr[0]+se,kt=At,fn=he,wn=sr[1]-At,Math.abs(wn)<oe&&(wn=(wn<=0?-1:1)*oe);ie?(Ce[tt]=Wt,Ce[tt+1]=kt,Ce[tt+2]=L?fn:wn,Te&&(Te[tt]=L?Ee.x:Wt,Te[tt+1]=L?kt:Ee.y,Te[tt+2]=Ve),Ie[ze]=ze):fe.setItemLayout(ze,{x:Wt,y:kt,width:fn,height:wn}),tt+=3}ie&&fe.setLayout({largePoints:Ce,largeDataIndices:Ie,largeBackgroundPoints:Te,valueAxisHorizontal:L})}}}}}}function b(H){return H.coordinateSystem&&"cartesian2d"===H.coordinateSystem.type}function Y(H){return H.pipelineContext&&H.pipelineContext.large}},9624:(Ut,rt,z)=>{z.d(rt,{s:()=>ye,y:()=>ce});var le=z(9496),Se=z(2846);function ce(be,we){function de(j,$){var G=[];return j.eachComponent({mainType:"series",subType:be,query:$},function(Z){G.push(Z.seriesIndex)}),G}(0,le.each)([[be+"ToggleSelect","toggleSelect"],[be+"Select","select"],[be+"UnSelect","unselect"]],function(j){we(j[0],function($,G,Z){$=(0,le.extend)({},$),Z.dispatchAction((0,le.extend)($,{type:j[1],seriesIndex:de(G,$)}))})})}function _e(be,we,de,j,$){var G=be+we;de.isSilent(G)||j.eachComponent({mainType:"series",subType:"pie"},function(Z){for(var te=Z.seriesIndex,ee=Z.option.selectedMap,Q=$.selected,J=0;J<Q.length;J++)if(Q[J].seriesIndex===te){var b=Z.getData(),Y=(0,Se.gO)(b,$.fromActionPayload);de.trigger(G,{type:G,seriesId:Z.id,name:(0,le.isArray)(Y)?b.getName(Y[0]):b.getName(Y),selected:(0,le.isString)(ee)?ee:(0,le.extend)({},ee)})}})}function ye(be,we,de){be.on("selectchanged",function(j){var $=de.getModel();j.isFromClick?(_e("map","selectchanged",we,$,j),_e("pie","selectchanged",we,$,j)):"select"===j.fromAction?(_e("map","selected",we,$,j),_e("pie","selected",we,$,j)):"unselect"===j.fromAction&&(_e("map","unselected",we,$,j),_e("pie","unselected",we,$,j))})}},8103:(Ut,rt,z)=>{z.d(rt,{Z:()=>G});var le=z(5845),Se=z(9496),ce=z(1363),_e=z(102),ye=z(9358),be=z(2846),we=z(8585),de=(0,be.Yf)(),j=function(Z){function te(ee,Q,J){var b=Z.call(this,ee,Q,J)||this;return b.uid=_e.Kr("ec_cpt_model"),b}return(0,le.ZT)(te,Z),te.prototype.init=function(ee,Q,J){this.mergeDefaultAndTheme(ee,J)},te.prototype.mergeDefaultAndTheme=function(ee,Q){var J=we.YD(this),b=J?we.tE(ee):{},Y=Q.getTheme();Se.merge(ee,Y.get(this.mainType)),Se.merge(ee,this.getDefaultOption()),J&&we.dt(ee,b,J)},te.prototype.mergeOption=function(ee,Q){Se.merge(this.option,ee,!0);var J=we.YD(this);J&&we.dt(this.option,ee,J)},te.prototype.optionUpdated=function(ee,Q){},te.prototype.getDefaultOption=function(){var ee=this.constructor;if(!(0,ye.PT)(ee))return ee.defaultOption;var Q=de(this);if(!Q.defaultOption){for(var J=[],b=ee;b;){var Y=b.prototype.defaultOption;Y&&J.push(Y),b=b.superClass}for(var q={},H=J.length-1;H>=0;H--)q=Se.merge(q,J[H],!0);Q.defaultOption=q}return Q.defaultOption},te.prototype.getReferringComponents=function(ee,Q){var b=ee+"Id";return(0,be.HZ)(this.ecModel,ee,{index:this.get(ee+"Index",!0),id:this.get(b,!0)},Q)},te.prototype.getBoxLayoutParams=function(){var ee=this;return{left:ee.get("left"),top:ee.get("top"),right:ee.get("right"),bottom:ee.get("bottom"),width:ee.get("width"),height:ee.get("height")}},te.prototype.getZLevelKey=function(){return""},te.prototype.setZLevel=function(ee){this.option.zlevel=ee},te.protoInitialize=((ee=te.prototype).type="component",ee.id="",ee.name="",ee.mainType="",ee.subType="",void(ee.componentIndex=0)),te;var ee}(ce.Z);(0,ye.pw)(j,ce.Z),(0,ye.au)(j),_e.cj(j),_e.jS(j,function $(Z){var te=[];return Se.each(j.getClassesByMainType(Z),function(ee){te=te.concat(ee.dependencies||ee.prototype.dependencies||[])}),te=Se.map(te,function(ee){return(0,ye.u9)(ee).main}),"dataset"!==Z&&Se.indexOf(te,"dataset")<=0&&te.unshift("dataset"),te});const G=j},1363:(Ut,rt,z)=>{z.d(rt,{Z:()=>Y});var le=z(9420),Se=z(9358),ye=(0,z(498).Z)([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),be=function(){function q(){}return q.prototype.getAreaStyle=function(H,re){return ye(this,H,re)},q}(),we=z(2681),de=z(997),j=["textStyle","color"],$=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],G=new de.ZP;const te=function(){function q(){}return q.prototype.getTextColor=function(H){var re=this.ecModel;return this.getShallow("color")||(!H&&re?re.get(j):null)},q.prototype.getFont=function(){return(0,we.qT)({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},q.prototype.getTextRect=function(H){for(var re={text:H,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},W=0;W<$.length;W++)re[$[W]]=this.getShallow($[W]);return G.useStyle(re),G.update(),G.getBoundingRect()},q}();var ee=z(5105),Q=z(6960),J=z(9496),b=function(){function q(H,re,W){this.parentModel=re,this.ecModel=W,this.option=H}return q.prototype.init=function(H,re,W){for(var X=[],K=3;K<arguments.length;K++)X[K-3]=arguments[K]},q.prototype.mergeOption=function(H,re){(0,J.merge)(this.option,H,!0)},q.prototype.get=function(H,re){return null==H?this.option:this._doGet(this.parsePath(H),!re&&this.parentModel)},q.prototype.getShallow=function(H,re){var W=this.option,X=null==W?W:W[H];if(null==X&&!re){var K=this.parentModel;K&&(X=K.getShallow(H))}return X},q.prototype.getModel=function(H,re){var W=null!=H,X=W?this.parsePath(H):null;return new q(W?this._doGet(X):this.option,re=re||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(X)),this.ecModel)},q.prototype.isEmpty=function(){return null==this.option},q.prototype.restoreData=function(){},q.prototype.clone=function(){return new(0,this.constructor)((0,J.clone)(this.option))},q.prototype.parsePath=function(H){return"string"==typeof H?H.split("."):H},q.prototype.resolveParentPath=function(H){return H},q.prototype.isAnimationEnabled=function(){if(!le.Z.node&&this.option){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},q.prototype._doGet=function(H,re){var W=this.option;if(!H)return W;for(var X=0;X<H.length&&(!H[X]||null!=(W=W&&"object"==typeof W?W[H[X]]:null));X++);return null==W&&re&&(W=re._doGet(this.resolveParentPath(H),re.parentModel)),W},q}();(0,Se.dm)(b),(0,Se.Qj)(b),(0,J.mixin)(b,ee.K),(0,J.mixin)(b,Q.D),(0,J.mixin)(b,be),(0,J.mixin)(b,te);const Y=b},9462:(Ut,rt,z)=>{z.d(rt,{V:()=>Q,Z:()=>B});var le=z(5845),Se=z(9496),ce=z(9420),_e=z(2846),ye=z(8103),be=z(6468),we=z(6867),de=z(8585),j=z(9466),$=z(9358),G=z(8296),Z=z(7131),te=_e.Yf();function ee(O,D){return O.getName(D)||O.getId(D)}var Q="__universalTransitionEnabled",J=function(O){function D(){var P=null!==O&&O.apply(this,arguments)||this;return P._selectedDataIndicesMap={},P}return(0,le.ZT)(D,O),D.prototype.init=function(P,I,T){this.seriesIndex=this.componentIndex,this.dataTask=(0,j.v)({count:q,reset:H}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(P,T),(te(this).sourceManager=new G.U(this)).prepareSource();var L=this.getInitialData(P,T);W(L,this),this.dataTask.context.data=L,te(this).dataBeforeProcessed=L,b(this),this._initSelectedMapFromData(L)},D.prototype.mergeDefaultAndTheme=function(P,I){var T=(0,de.YD)(this),A=T?(0,de.tE)(P):{},L=this.subType;ye.Z.hasClass(L)&&(L+="Series"),Se.merge(P,I.getTheme().get(this.subType)),Se.merge(P,this.getDefaultOption()),_e.Cc(P,"label",["show"]),this.fillDataTextStyle(P.data),T&&(0,de.dt)(P,A,T)},D.prototype.mergeOption=function(P,I){P=Se.merge(this.option,P,!0),this.fillDataTextStyle(P.data);var T=(0,de.YD)(this);T&&(0,de.dt)(this.option,P,T);var A=te(this).sourceManager;A.dirty(),A.prepareSource();var L=this.getInitialData(P,I);W(L,this),this.dataTask.dirty(),this.dataTask.context.data=L,te(this).dataBeforeProcessed=L,b(this),this._initSelectedMapFromData(L)},D.prototype.fillDataTextStyle=function(P){if(P&&!Se.isTypedArray(P))for(var I=["show"],T=0;T<P.length;T++)P[T]&&P[T].label&&_e.Cc(P[T],"label",I)},D.prototype.getInitialData=function(P,I){},D.prototype.appendData=function(P){this.getRawData().appendData(P.data)},D.prototype.getData=function(P){var I=K(this);if(I){var T=I.context.data;return null!=P&&T.getLinkedData?T.getLinkedData(P):T}return te(this).data},D.prototype.getAllData=function(){var P=this.getData();return P&&P.getLinkedDataAll?P.getLinkedDataAll():[{data:P}]},D.prototype.setData=function(P){var I=K(this);if(I){var T=I.context;T.outputData=P,I!==this.dataTask&&(T.data=P)}te(this).data=P},D.prototype.getEncode=function(){var P=this.get("encode",!0);if(P)return Se.createHashMap(P)},D.prototype.getSourceManager=function(){return te(this).sourceManager},D.prototype.getSource=function(){return this.getSourceManager().getSource()},D.prototype.getRawData=function(){return te(this).dataBeforeProcessed},D.prototype.getColorBy=function(){return this.get("colorBy")||"series"},D.prototype.isColorBySeries=function(){return"series"===this.getColorBy()},D.prototype.getBaseAxis=function(){var P=this.coordinateSystem;return P&&P.getBaseAxis&&P.getBaseAxis()},D.prototype.formatTooltip=function(P,I,T){return(0,Z.w)({series:this,dataIndex:P,multipleSeries:I})},D.prototype.isAnimationEnabled=function(){var P=this.ecModel;if(ce.Z.node&&(!P||!P.ssr))return!1;var I=this.getShallow("animation");return I&&this.getData().count()>this.getShallow("animationThreshold")&&(I=!1),!!I},D.prototype.restoreData=function(){this.dataTask.dirty()},D.prototype.getColorFromPalette=function(P,I,T){var A=this.ecModel,L=be._.prototype.getColorFromPalette.call(this,P,I,T);return L||(L=A.getColorFromPalette(P,I,T)),L},D.prototype.coordDimToDataDim=function(P){return this.getRawData().mapDimensionsAll(P)},D.prototype.getProgressive=function(){return this.get("progressive")},D.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},D.prototype.select=function(P,I){this._innerSelect(this.getData(I),P)},D.prototype.unselect=function(P,I){var T=this.option.selectedMap;if(T){var A=this.option.selectedMode,L=this.getData(I);if("series"===A||"all"===T)return this.option.selectedMap={},void(this._selectedDataIndicesMap={});for(var N=0;N<P.length;N++){var oe=ee(L,P[N]);T[oe]=!1,this._selectedDataIndicesMap[oe]=-1}}},D.prototype.toggleSelect=function(P,I){for(var T=[],A=0;A<P.length;A++)T[0]=P[A],this.isSelected(P[A],I)?this.unselect(T,I):this.select(T,I)},D.prototype.getSelectedDataIndices=function(){if("all"===this.option.selectedMap)return[].slice.call(this.getData().getIndices());for(var P=this._selectedDataIndicesMap,I=Se.keys(P),T=[],A=0;A<I.length;A++){var L=P[I[A]];L>=0&&T.push(L)}return T},D.prototype.isSelected=function(P,I){var T=this.option.selectedMap;if(!T)return!1;var A=this.getData(I);return("all"===T||T[ee(A,P)])&&!A.getItemModel(P).get(["select","disabled"])},D.prototype.isUniversalTransitionEnabled=function(){if(this[Q])return!0;var P=this.option.universalTransition;return!!P&&(!0===P||P&&P.enabled)},D.prototype._innerSelect=function(P,I){var T,A,L=this.option,N=L.selectedMode,ie=I.length;if(N&&ie)if("series"===N)L.selectedMap="all";else if("multiple"===N){Se.isObject(L.selectedMap)||(L.selectedMap={});for(var oe=L.selectedMap,ae=0;ae<ie;ae++){var he=I[ae];oe[se=ee(P,he)]=!0,this._selectedDataIndicesMap[se]=P.getRawIndex(he)}}else if("single"===N||!0===N){var xe=I[ie-1],se=ee(P,xe);L.selectedMap=((T={})[se]=!0,T),this._selectedDataIndicesMap=((A={})[se]=P.getRawIndex(xe),A)}},D.prototype._initSelectedMapFromData=function(P){if(!this.option.selectedMap){var I=[];P.hasItemOption&&P.each(function(T){var A=P.getRawDataItem(T);A&&A.selected&&I.push(T)}),I.length>0&&this._innerSelect(P,I)}},D.registerClass=function(P){return ye.Z.registerClass(P)},D.protoInitialize=((P=D.prototype).type="series.__base__",P.seriesIndex=0,P.ignoreStyleOnData=!1,P.hasSymbolVisual=!1,P.defaultSymbol="circle",P.visualStyleAccessPath="itemStyle",void(P.visualDrawType="fill")),D;var P}(ye.Z);function b(O){var D=O.name;_e.yu(O)||(O.name=function Y(O){var D=O.getRawData(),P=D.mapDimensionsAll("seriesName"),I=[];return Se.each(P,function(T){var A=D.getDimensionInfo(T);A.displayName&&I.push(A.displayName)}),I.join(" ")}(O)||D)}function q(O){return O.model.getRawData().count()}function H(O){var D=O.model;return D.setData(D.getRawData().cloneShallow()),re}function re(O,D){D.outputData&&O.end>D.outputData.count()&&D.model.getRawData().cloneShallow(D.outputData)}function W(O,D){Se.each(Se.concatArray(O.CHANGABLE_METHODS,O.DOWNSAMPLE_METHODS),function(P){O.wrapMethod(P,Se.curry(X,D))})}function X(O,D){var P=K(O);return P&&P.setOutputEnd((D||this).count()),D}function K(O){var D=(O.ecModel||{}).scheduler,P=D&&D.getPipeline(O.uid);if(P){var I=P.currentTask;if(I){var T=I.agentStubMap;T&&(I=T.get(O.uid))}return I}}Se.mixin(J,we.X),Se.mixin(J,be._),(0,$.pw)(J,ye.Z);const B=J},7920:(Ut,rt,z)=>{z.d(rt,{R:()=>_e,f:()=>ce});var le=z(9496),Se=(0,le.createHashMap)();function ce(ye,be){(0,le.assert)(null==Se.get(ye)&&be),Se.set(ye,be)}function _e(ye,be,we){var de=Se.get(be);if(!de)return we;var j=de(ye);return j?we.concat(j):we}},6867:(Ut,rt,z)=>{z.d(rt,{X:()=>ye,f:()=>be});var le=z(9496),Se=z(7654),ce=z(1755),_e=/\{@(.+?)\}/g,ye=function(){function we(){}return we.prototype.getDataParams=function(de,j){var $=this.getData(j),G=this.getRawValue(de,j),Z=$.getRawIndex(de),te=$.getName(de),ee=$.getRawDataItem(de),Q=$.getItemVisual(de,"style"),J=Q&&Q[$.getItemVisual(de,"drawType")||"fill"],b=Q&&Q.stroke,Y=this.mainType,q="series"===Y,H=$.userOutput&&$.userOutput.get();return{componentType:Y,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:q?this.subType:null,seriesIndex:this.seriesIndex,seriesId:q?this.id:null,seriesName:q?this.name:null,name:te,dataIndex:Z,data:ee,dataType:j,value:G,color:J,borderColor:b,dimensionNames:H?H.fullDimensions:null,encode:H?H.encode:null,$vars:["seriesName","name","value"]}},we.prototype.getFormattedLabel=function(de,j,$,G,Z,te){j=j||"normal";var ee=this.getData($),Q=this.getDataParams(de,$);return te&&(Q.value=te.interpolatedValue),null!=G&&le.isArray(Q.value)&&(Q.value=Q.value[G]),Z||(Z=ee.getItemModel(de).get("normal"===j?["label","formatter"]:[j,"label","formatter"])),le.isFunction(Z)?(Q.status=j,Q.dimensionIndex=G,Z(Q)):le.isString(Z)?(0,ce.kF)(Z,Q).replace(_e,function(Y,q){var H=q.length,re=q;"["===re.charAt(0)&&"]"===re.charAt(H-1)&&(re=+re.slice(1,H-1));var W=(0,Se.hk)(ee,de,re);if(te&&le.isArray(te.interpolatedValue)){var X=ee.getDimensionIndex(re);X>=0&&(W=te.interpolatedValue[X])}return null!=W?W+"":""}):void 0},we.prototype.getRawValue=function(de,j){return(0,Se.hk)(this.getData(j),de)},we.prototype.formatTooltip=function(de,j,$){},we}();function be(we){var de,j;return le.isObject(we)?we.type&&(j=we):de=we,{text:de,frag:j}}},6960:(Ut,rt,z)=>{z.d(rt,{D:()=>_e,t:()=>Se});var le=z(498),Se=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],ce=(0,le.Z)(Se),_e=function(){function ye(){}return ye.prototype.getItemStyle=function(be,we){return ce(this,be,we)},ye}()},5105:(Ut,rt,z)=>{z.d(rt,{K:()=>_e,v:()=>Se});var le=z(498),Se=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],ce=(0,le.Z)(Se),_e=function(){function ye(){}return ye.prototype.getLineStyle=function(be){return ce(this,be)},ye}()},498:(Ut,rt,z)=>{z.d(rt,{Z:()=>Se});var le=z(9496);function Se(ce,_e){for(var ye=0;ye<ce.length;ye++)ce[ye][1]||(ce[ye][1]=ce[ye][0]);return _e=_e||!1,function(be,we,de){for(var j={},$=0;$<ce.length;$++){var G=ce[$][1];if(!(we&&le.indexOf(we,G)>=0||de&&le.indexOf(de,G)<0)){var Z=be.getShallow(G,_e);null!=Z&&(j[ce[$][0]]=Z)}}return j}}},6468:(Ut,rt,z)=>{z.d(rt,{_:()=>_e,i:()=>ye});var le=z(2846),Se=(0,le.Yf)(),ce=(0,le.Yf)(),_e=function(){function j(){}return j.prototype.getColorFromPalette=function($,G,Z){var te=(0,le.kF)(this.get("color",!0)),ee=this.get("colorLayer",!0);return we(this,Se,te,ee,$,G,Z)},j.prototype.clearColorPalette=function(){!function de(j,$){$(j).paletteIdx=0,$(j).paletteNameMap={}}(this,Se)},j}();function ye(j,$,G,Z){var te=(0,le.kF)(j.get(["aria","decal","decals"]));return we(j,ce,te,null,$,G,Z)}function we(j,$,G,Z,te,ee,Q){var J=$(ee=ee||j),b=J.paletteIdx||0,Y=J.paletteNameMap=J.paletteNameMap||{};if(Y.hasOwnProperty(te))return Y[te];var q=null!=Q&&Z?function be(j,$){for(var G=j.length,Z=0;Z<G;Z++)if(j[Z].length>$)return j[Z];return j[G-1]}(Z,Q):G;if((q=q||G)&&q.length){var H=q[b];return te&&(Y[te]=H),J.paletteIdx=(b+1)%q.length,H}}},5309:(Ut,rt,z)=>{z.d(rt,{N:()=>X});var le=z(9072),Se=z(9496),ce=z(908),_e=z(6735),ye=z(1744),be=z(2539),we=z(468),de=z(6839),j=z(3691);function $(K,B,O){var D=j.qW.createCanvas(),P=B.getWidth(),I=B.getHeight(),T=D.style;return T&&(T.position="absolute",T.left="0",T.top="0",T.width=P+"px",T.height=I+"px",D.setAttribute("data-zr-dom-id",K)),D.width=P*O,D.height=I*O,D}const Z=function(K){function B(O,D,P){var T,I=K.call(this)||this;I.motionBlur=!1,I.lastFrameAlpha=.7,I.dpr=1,I.virtual=!1,I.config={},I.incremental=!1,I.zlevel=0,I.maxRepaintRectCount=5,I.__dirty=!0,I.__firstTimePaint=!0,I.__used=!1,I.__drawIndex=0,I.__startIndex=0,I.__endIndex=0,I.__prevStartIndex=null,I.__prevEndIndex=null,P=P||le.KL,"string"==typeof O?T=$(O,D,P):Se.isObject(O)&&(O=(T=O).id),I.id=O,I.dom=T;var A=T.style;return A&&(Se.disableUserSelect(T),T.onselectstart=function(){return!1},A.padding="0",A.margin="0",A.borderWidth="0"),I.painter=D,I.dpr=P,I}return(0,ce.ZT)(B,K),B.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},B.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},B.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},B.prototype.setUnpainted=function(){this.__firstTimePaint=!0},B.prototype.createBackBuffer=function(){var O=this.dpr;this.domBack=$("back-"+this.id,this.painter,O),this.ctxBack=this.domBack.getContext("2d"),1!==O&&this.ctxBack.scale(O,O)},B.prototype.createRepaintRects=function(O,D,P,I){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var fe,T=[],A=this.maxRepaintRectCount,L=!1,N=new we.Z(0,0,0,0);function ie(Ce){if(Ce.isFinite()&&!Ce.isZero())if(0===T.length)(Te=new we.Z(0,0,0,0)).copy(Ce),T.push(Te);else{for(var Ie=!1,Ee=1/0,Ve=0,ze=0;ze<T.length;++ze){var We=T[ze];if(We.intersect(Ce)){var tt=new we.Z(0,0,0,0);tt.copy(We),tt.union(Ce),T[ze]=tt,Ie=!0;break}if(L){N.copy(Ce),N.union(We);var Vt=N.width*N.height-Ce.width*Ce.height-We.width*We.height;Vt<Ee&&(Ee=Vt,Ve=ze)}}var Te;L&&(T[Ve].union(Ce),Ie=!0),Ie||((Te=new we.Z(0,0,0,0)).copy(Ce),T.push(Te)),L||(L=T.length>=A)}}for(var oe=this.__startIndex;oe<this.__endIndex;++oe)if(ae=O[oe]){var he=ae.shouldBePainted(P,I,!0,!0);(se=ae.__isRendered&&(ae.__dirty&de.YV||!he)?ae.getPrevPaintRect():null)&&ie(se);var xe=he&&(ae.__dirty&de.YV||!ae.__isRendered)?ae.getPaintRect():null;xe&&ie(xe)}for(oe=this.__prevStartIndex;oe<this.__prevEndIndex;++oe){var ae,se;he=(ae=D[oe])&&ae.shouldBePainted(P,I,!0,!0),!ae||he&&ae.__zr||!ae.__isRendered||(se=ae.getPrevPaintRect())&&ie(se)}do{for(fe=!1,oe=0;oe<T.length;)if(T[oe].isZero())T.splice(oe,1);else{for(var ge=oe+1;ge<T.length;)T[oe].intersect(T[ge])?(fe=!0,T[oe].union(T[ge]),T.splice(ge,1)):ge++;oe++}}while(fe);return this._paintRects=T,T},B.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},B.prototype.resize=function(O,D){var P=this.dpr,I=this.dom,T=I.style,A=this.domBack;T&&(T.width=O+"px",T.height=D+"px"),I.width=O*P,I.height=D*P,A&&(A.width=O*P,A.height=D*P,1!==P&&this.ctxBack.scale(P,P))},B.prototype.clear=function(O,D,P){var I=this.dom,T=this.ctx,A=I.width,L=I.height;D=D||this.clearColor;var N=this.motionBlur&&!O,ie=this.lastFrameAlpha,oe=this.dpr,ae=this;N&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(I,0,0,A/oe,L/oe));var he=this.domBack;function se(xe,fe,ge,Ce){if(T.clearRect(xe,fe,ge,Ce),D&&"transparent"!==D){var Te=void 0;Se.isGradientObject(D)?(Te=(D.global||D.__width===ge&&D.__height===Ce)&&D.__canvasGradient||(0,ye.ZF)(T,D,{x:0,y:0,width:ge,height:Ce}),D.__canvasGradient=Te,D.__width=ge,D.__height=Ce):Se.isImagePatternObject(D)&&(D.scaleX=D.scaleX||oe,D.scaleY=D.scaleY||oe,Te=(0,be.RZ)(T,D,{dirty:function(){ae.setUnpainted(),ae.painter.refresh()}})),T.save(),T.fillStyle=Te||D,T.fillRect(xe,fe,ge,Ce),T.restore()}N&&(T.save(),T.globalAlpha=ie,T.drawImage(he,xe,fe,ge,Ce),T.restore())}!P||N?se(0,0,A,L):P.length&&Se.each(P,function(xe){se(xe.x*oe,xe.y*oe,xe.width*oe,xe.height*oe)})},B}(_e.Z);var te=z(2415),ee=z(9420),Q=1e5,J=314159,b=.01;const W=function(){function K(B,O,D,P){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var I=!B.nodeName||"CANVAS"===B.nodeName.toUpperCase();this._opts=D=Se.extend({},D||{}),this.dpr=D.devicePixelRatio||le.KL,this._singleCanvas=I,this.root=B,B.style&&(Se.disableUserSelect(B),B.innerHTML=""),this.storage=O;var A=this._zlevelList;this._prevDisplayList=[];var L=this._layers;if(I){var ie=B,oe=ie.width,ae=ie.height;null!=D.width&&(oe=D.width),null!=D.height&&(ae=D.height),this.dpr=D.devicePixelRatio||1,ie.width=oe*this.dpr,ie.height=ae*this.dpr,this._width=oe,this._height=ae;var he=new Z(ie,this,this.dpr);he.__builtin__=!0,he.initContext(),L[J]=he,he.zlevel=J,A.push(J),this._domRoot=B}else{this._width=(0,ye.ap)(B,0,D),this._height=(0,ye.ap)(B,1,D);var N=this._domRoot=function H(K,B){var O=document.createElement("div");return O.style.cssText=["position:relative","width:"+K+"px","height:"+B+"px","padding:0","margin:0","border-width:0"].join(";")+";",O}(this._width,this._height);B.appendChild(N)}}return K.prototype.getType=function(){return"canvas"},K.prototype.isSingleCanvas=function(){return this._singleCanvas},K.prototype.getViewportRoot=function(){return this._domRoot},K.prototype.getViewportRootOffset=function(){var B=this.getViewportRoot();if(B)return{offsetLeft:B.offsetLeft||0,offsetTop:B.offsetTop||0}},K.prototype.refresh=function(B){var O=this.storage.getDisplayList(!0),D=this._prevDisplayList,P=this._zlevelList;this._redrawId=Math.random(),this._paintList(O,D,B,this._redrawId);for(var I=0;I<P.length;I++){var A=this._layers[P[I]];!A.__builtin__&&A.refresh&&A.refresh(0===I?this._backgroundColor:null)}return this._opts.useDirtyRect&&(this._prevDisplayList=O.slice()),this},K.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},K.prototype._paintHoverList=function(B){var O=B.length,D=this._hoverlayer;if(D&&D.clear(),O){for(var I,P={inHover:!0,viewWidth:this._width,viewHeight:this._height},T=0;T<O;T++){var A=B[T];A.__inHover&&(D||(D=this._hoverlayer=this.getLayer(Q)),I||(I=D.ctx).save(),(0,be.Dm)(I,A,P,T===O-1))}I&&I.restore()}},K.prototype.getHoverLayer=function(){return this.getLayer(Q)},K.prototype.paintOne=function(B,O){(0,be.RV)(B,O)},K.prototype._paintList=function(B,O,D,P){if(this._redrawId===P){D=D||!1,this._updateLayerStatus(B);var I=this._doPaintList(B,O,D),T=I.finished,A=I.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),A&&this._paintHoverList(B),T)this.eachLayer(function(N){N.afterBrush&&N.afterBrush()});else{var L=this;(0,te.Z)(function(){L._paintList(B,O,D,P)})}}},K.prototype._compositeManually=function(){var B=this.getLayer(J).ctx,O=this._domRoot.width,D=this._domRoot.height;B.clearRect(0,0,O,D),this.eachBuiltinLayer(function(P){P.virtual&&B.drawImage(P.dom,0,0,O,D)})},K.prototype._doPaintList=function(B,O,D){for(var P=this,I=[],T=this._opts.useDirtyRect,A=0;A<this._zlevelList.length;A++){var N=this._layers[this._zlevelList[A]];N.__builtin__&&N!==this._hoverlayer&&(N.__dirty||D)&&I.push(N)}for(var ie=!0,oe=!1,ae=function(xe){var fe=I[xe],ge=fe.ctx,Ce=T&&fe.createRepaintRects(B,O,he._width,he._height),Te=D?fe.__startIndex:fe.__drawIndex,Ie=!D&&fe.incremental&&Date.now,Ee=Ie&&Date.now(),Ve=fe.zlevel===he._zlevelList[0]?he._backgroundColor:null;if(fe.__startIndex===fe.__endIndex)fe.clear(!1,Ve,Ce);else if(Te===fe.__startIndex){var ze=B[Te];(!ze.incremental||!ze.notClear||D)&&fe.clear(!1,Ve,Ce)}-1===Te&&(console.error("For some unknown reason. drawIndex is -1"),Te=fe.__startIndex);var We,tt=function(Vt){var Wt={inHover:!1,allClipped:!1,prevEl:null,viewWidth:P._width,viewHeight:P._height};for(We=Te;We<fe.__endIndex;We++){var kt=B[We];if(kt.__inHover&&(oe=!0),P._doPaintEl(kt,fe,T,Vt,Wt,We===fe.__endIndex-1),Ie&&Date.now()-Ee>15)break}Wt.prevElClipPaths&&ge.restore()};if(Ce)if(0===Ce.length)We=fe.__endIndex;else for(var st=he.dpr,Tt=0;Tt<Ce.length;++Tt){var At=Ce[Tt];ge.save(),ge.beginPath(),ge.rect(At.x*st,At.y*st,At.width*st,At.height*st),ge.clip(),tt(At),ge.restore()}else ge.save(),tt(),ge.restore();fe.__drawIndex=We,fe.__drawIndex<fe.__endIndex&&(ie=!1)},he=this,se=0;se<I.length;se++)ae(se);return ee.Z.wxa&&Se.each(this._layers,function(xe){xe&&xe.ctx&&xe.ctx.draw&&xe.ctx.draw()}),{finished:ie,needsRefreshHover:oe}},K.prototype._doPaintEl=function(B,O,D,P,I,T){var A=O.ctx;if(D){var L=B.getPaintRect();(!P||L&&L.intersect(P))&&((0,be.Dm)(A,B,I,T),B.setPrevPaintRect(L))}else(0,be.Dm)(A,B,I,T)},K.prototype.getLayer=function(B,O){this._singleCanvas&&!this._needsManuallyCompositing&&(B=J);var D=this._layers[B];return D||((D=new Z("zr_"+B,this,this.dpr)).zlevel=B,D.__builtin__=!0,this._layerConfig[B]?Se.merge(D,this._layerConfig[B],!0):this._layerConfig[B-b]&&Se.merge(D,this._layerConfig[B-b],!0),O&&(D.virtual=O),this.insertLayer(B,D),D.initContext()),D},K.prototype.insertLayer=function(B,O){var D=this._layers,P=this._zlevelList,I=P.length,T=this._domRoot,A=null,L=-1;if(!D[B]&&function q(K){return!(!K||!K.__builtin__&&("function"!=typeof K.resize||"function"!=typeof K.refresh))}(O)){if(I>0&&B>P[0]){for(L=0;L<I-1&&!(P[L]<B&&P[L+1]>B);L++);A=D[P[L]]}if(P.splice(L+1,0,B),D[B]=O,!O.virtual)if(A){var N=A.dom;N.nextSibling?T.insertBefore(O.dom,N.nextSibling):T.appendChild(O.dom)}else T.firstChild?T.insertBefore(O.dom,T.firstChild):T.appendChild(O.dom);O.painter||(O.painter=this)}},K.prototype.eachLayer=function(B,O){for(var D=this._zlevelList,P=0;P<D.length;P++){var I=D[P];B.call(O,this._layers[I],I)}},K.prototype.eachBuiltinLayer=function(B,O){for(var D=this._zlevelList,P=0;P<D.length;P++){var I=D[P],T=this._layers[I];T.__builtin__&&B.call(O,T,I)}},K.prototype.eachOtherLayer=function(B,O){for(var D=this._zlevelList,P=0;P<D.length;P++){var I=D[P],T=this._layers[I];T.__builtin__||B.call(O,T,I)}},K.prototype.getLayers=function(){return this._layers},K.prototype._updateLayerStatus=function(B){function O(oe){I&&(I.__endIndex!==oe&&(I.__dirty=!0),I.__endIndex=oe)}if(this.eachBuiltinLayer(function(oe,ae){oe.__dirty=oe.__used=!1}),this._singleCanvas)for(var D=1;D<B.length;D++)if((P=B[D]).zlevel!==B[D-1].zlevel||P.incremental){this._needsManuallyCompositing=!0;break}var A,L,I=null,T=0;for(L=0;L<B.length;L++){var P,N=(P=B[L]).zlevel,ie=void 0;A!==N&&(A=N,T=0),P.incremental?((ie=this.getLayer(N+.001,this._needsManuallyCompositing)).incremental=!0,T=1):ie=this.getLayer(N+(T>0?b:0),this._needsManuallyCompositing),ie.__builtin__||Se.logError("ZLevel "+N+" has been used by unkown layer "+ie.id),ie!==I&&(ie.__used=!0,ie.__startIndex!==L&&(ie.__dirty=!0),ie.__startIndex=L,ie.__drawIndex=ie.incremental?-1:L,O(L),I=ie),P.__dirty&de.YV&&!P.__inHover&&(ie.__dirty=!0,ie.incremental&&ie.__drawIndex<0&&(ie.__drawIndex=L))}O(L),this.eachBuiltinLayer(function(oe,ae){!oe.__used&&oe.getElementCount()>0&&(oe.__dirty=!0,oe.__startIndex=oe.__endIndex=oe.__drawIndex=0),oe.__dirty&&oe.__drawIndex<0&&(oe.__drawIndex=oe.__startIndex)})},K.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},K.prototype._clearLayer=function(B){B.clear()},K.prototype.setBackgroundColor=function(B){this._backgroundColor=B,Se.each(this._layers,function(O){O.setUnpainted()})},K.prototype.configLayer=function(B,O){if(O){var D=this._layerConfig;D[B]?Se.merge(D[B],O,!0):D[B]=O;for(var P=0;P<this._zlevelList.length;P++){var I=this._zlevelList[P];I!==B&&I!==B+b||Se.merge(this._layers[I],D[B],!0)}}},K.prototype.delLayer=function(B){var O=this._layers,D=this._zlevelList,P=O[B];!P||(P.dom.parentNode.removeChild(P.dom),delete O[B],D.splice(Se.indexOf(D,B),1))},K.prototype.resize=function(B,O){if(this._domRoot.style){var D=this._domRoot;D.style.display="none";var P=this._opts,I=this.root;if(null!=B&&(P.width=B),null!=O&&(P.height=O),B=(0,ye.ap)(I,0,P),O=(0,ye.ap)(I,1,P),D.style.display="",this._width!==B||O!==this._height){for(var T in D.style.width=B+"px",D.style.height=O+"px",this._layers)this._layers.hasOwnProperty(T)&&this._layers[T].resize(B,O);this.refresh(!0)}this._width=B,this._height=O}else{if(null==B||null==O)return;this._width=B,this._height=O,this.getLayer(J).resize(B,O)}return this},K.prototype.clearLayer=function(B){var O=this._layers[B];O&&O.clear()},K.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},K.prototype.getRenderedCanvas=function(B){if(this._singleCanvas&&!this._compositeManually)return this._layers[J].dom;var O=new Z("image",this,(B=B||{}).pixelRatio||this.dpr);O.initContext(),O.clear(!1,B.backgroundColor||this._backgroundColor);var D=O.ctx;if(B.pixelRatio<=this.dpr){this.refresh();var P=O.dom.width,I=O.dom.height;this.eachLayer(function(oe){oe.__builtin__?D.drawImage(oe.dom,0,0,P,I):oe.renderToCanvas&&(D.save(),oe.renderToCanvas(D),D.restore())})}else for(var T={inHover:!1,viewWidth:this._width,viewHeight:this._height},A=this.storage.getDisplayList(!0),L=0,N=A.length;L<N;L++)(0,be.Dm)(D,A[L],T,L===N-1);return O.dom},K.prototype.getWidth=function(){return this._width},K.prototype.getHeight=function(){return this._height},K}();function X(K){K.registerPainter("canvas",W)}},4105:(Ut,rt,z)=>{z.d(rt,{Z:()=>de});var le=z(5845),Se=z(10),ce=z(1755),_e=z(2725),ye=z(3295),be=Se.NM,we=function(j){function $(){var G=null!==j&&j.apply(this,arguments)||this;return G.type="interval",G._interval=0,G._intervalPrecision=2,G}return(0,le.ZT)($,j),$.prototype.parse=function(G){return G},$.prototype.contain=function(G){return ye.XS(G,this._extent)},$.prototype.normalize=function(G){return ye.Fv(G,this._extent)},$.prototype.scale=function(G){return ye.bA(G,this._extent)},$.prototype.setExtent=function(G,Z){var te=this._extent;isNaN(G)||(te[0]=parseFloat(G)),isNaN(Z)||(te[1]=parseFloat(Z))},$.prototype.unionExtent=function(G){var Z=this._extent;G[0]<Z[0]&&(Z[0]=G[0]),G[1]>Z[1]&&(Z[1]=G[1]),this.setExtent(Z[0],Z[1])},$.prototype.getInterval=function(){return this._interval},$.prototype.setInterval=function(G){this._interval=G,this._niceExtent=this._extent.slice(),this._intervalPrecision=ye.lb(G)},$.prototype.getTicks=function(G){var Z=this._interval,te=this._extent,ee=this._niceExtent,Q=this._intervalPrecision,J=[];if(!Z)return J;te[0]<ee[0]&&J.push(G?{value:be(ee[0]-Z,Q)}:{value:te[0]});for(var Y=ee[0];Y<=ee[1]&&(J.push({value:Y}),(Y=be(Y+Z,Q))!==J[J.length-1].value);)if(J.length>1e4)return[];var q=J.length?J[J.length-1].value:ee[1];return te[1]>q&&J.push(G?{value:be(q+Z,Q)}:{value:te[1]}),J},$.prototype.getMinorTicks=function(G){for(var Z=this.getTicks(!0),te=[],ee=this.getExtent(),Q=1;Q<Z.length;Q++){for(var b=Z[Q-1],Y=0,q=[],re=(Z[Q].value-b.value)/G;Y<G-1;){var W=be(b.value+(Y+1)*re);W>ee[0]&&W<ee[1]&&q.push(W),Y++}te.push(q)}return te},$.prototype.getLabel=function(G,Z){if(null==G)return"";var te=Z&&Z.precision;null==te?te=Se.p8(G.value)||0:"auto"===te&&(te=this._intervalPrecision);var ee=be(G.value,te,!0);return ce.OD(ee)},$.prototype.calcNiceTicks=function(G,Z,te){G=G||5;var ee=this._extent,Q=ee[1]-ee[0];if(isFinite(Q)){Q<0&&(Q=-Q,ee.reverse());var J=ye.Qf(ee,G,Z,te);this._intervalPrecision=J.intervalPrecision,this._interval=J.interval,this._niceExtent=J.niceTickExtent}},$.prototype.calcNiceExtent=function(G){var Z=this._extent;if(Z[0]===Z[1])if(0!==Z[0]){var te=Math.abs(Z[0]);G.fixMax||(Z[1]+=te/2),Z[0]-=te/2}else Z[1]=1;isFinite(Z[1]-Z[0])||(Z[0]=0,Z[1]=1),this.calcNiceTicks(G.splitNumber,G.minInterval,G.maxInterval);var Q=this._interval;G.fixMin||(Z[0]=be(Math.floor(Z[0]/Q)*Q)),G.fixMax||(Z[1]=be(Math.ceil(Z[1]/Q)*Q))},$.prototype.setNiceExtent=function(G,Z){this._niceExtent=[G,Z]},$.type="interval",$}(_e.Z);_e.Z.registerClass(we);const de=we},5866:(Ut,rt,z)=>{z.d(rt,{Z:()=>we});var le=z(5845),Se=z(2725),ce=z(6681),_e=z(3295),ye=z(9496),be=function(de){function j($){var G=de.call(this,$)||this;G.type="ordinal";var Z=G.getSetting("ordinalMeta");return Z||(Z=new ce.Z({})),(0,ye.isArray)(Z)&&(Z=new ce.Z({categories:(0,ye.map)(Z,function(te){return(0,ye.isObject)(te)?te.value:te})})),G._ordinalMeta=Z,G._extent=G.getSetting("extent")||[0,Z.categories.length-1],G}return(0,le.ZT)(j,de),j.prototype.parse=function($){return null==$?NaN:(0,ye.isString)($)?this._ordinalMeta.getOrdinal($):Math.round($)},j.prototype.contain=function($){return $=this.parse($),_e.XS($,this._extent)&&null!=this._ordinalMeta.categories[$]},j.prototype.normalize=function($){return $=this._getTickNumber(this.parse($)),_e.Fv($,this._extent)},j.prototype.scale=function($){return $=Math.round(_e.bA($,this._extent)),this.getRawOrdinalNumber($)},j.prototype.getTicks=function(){for(var $=[],G=this._extent,Z=G[0];Z<=G[1];)$.push({value:Z}),Z++;return $},j.prototype.getMinorTicks=function($){},j.prototype.setSortInfo=function($){if(null!=$){for(var G=$.ordinalNumbers,Z=this._ordinalNumbersByTick=[],te=this._ticksByOrdinalNumber=[],ee=0,Q=this._ordinalMeta.categories.length,J=Math.min(Q,G.length);ee<J;++ee){var b=G[ee];Z[ee]=b,te[b]=ee}for(var Y=0;ee<Q;++ee){for(;null!=te[Y];)Y++;Z.push(Y),te[Y]=ee}}else this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null},j.prototype._getTickNumber=function($){var G=this._ticksByOrdinalNumber;return G&&$>=0&&$<G.length?G[$]:$},j.prototype.getRawOrdinalNumber=function($){var G=this._ordinalNumbersByTick;return G&&$>=0&&$<G.length?G[$]:$},j.prototype.getLabel=function($){if(!this.isBlank()){var G=this.getRawOrdinalNumber($.value),Z=this._ordinalMeta.categories[G];return null==Z?"":Z+""}},j.prototype.count=function(){return this._extent[1]-this._extent[0]+1},j.prototype.unionExtentFromData=function($,G){this.unionExtent($.getApproximateExtent(G))},j.prototype.isInExtentRange=function($){return $=this._getTickNumber($),this._extent[0]<=$&&this._extent[1]>=$},j.prototype.getOrdinalMeta=function(){return this._ordinalMeta},j.prototype.calcNiceTicks=function(){},j.prototype.calcNiceExtent=function(){},j.type="ordinal",j}(Se.Z);Se.Z.registerClass(be);const we=be},2725:(Ut,rt,z)=>{z.d(rt,{Z:()=>ce});var le=z(9358),Se=function(){function _e(ye){this._setting=ye||{},this._extent=[1/0,-1/0]}return _e.prototype.getSetting=function(ye){return this._setting[ye]},_e.prototype.unionExtent=function(ye){var be=this._extent;ye[0]<be[0]&&(be[0]=ye[0]),ye[1]>be[1]&&(be[1]=ye[1])},_e.prototype.unionExtentFromData=function(ye,be){this.unionExtent(ye.getApproximateExtent(be))},_e.prototype.getExtent=function(){return this._extent.slice()},_e.prototype.setExtent=function(ye,be){var we=this._extent;isNaN(ye)||(we[0]=ye),isNaN(be)||(we[1]=be)},_e.prototype.isInExtentRange=function(ye){return this._extent[0]<=ye&&this._extent[1]>=ye},_e.prototype.isBlank=function(){return this._isBlank},_e.prototype.setBlank=function(ye){this._isBlank=ye},_e}();le.au(Se);const ce=Se},2841:(Ut,rt,z)=>{z.d(rt,{Z:()=>q});var le=z(5845),Se=z(10),ce=z(7530),_e=z(3295),ye=z(4105),be=z(2725),we=z(9496),j=function(H){function re(W){var X=H.call(this,W)||this;return X.type="time",X}return(0,le.ZT)(re,H),re.prototype.getLabel=function(W){var X=this.getSetting("useUTC");return(0,ce.WU)(W.value,ce.V8[(0,ce.xC)((0,ce.Tj)(this._minLevelUnit))]||ce.V8.second,X,this.getSetting("locale"))},re.prototype.getFormattedLabel=function(W,X,K){var B=this.getSetting("useUTC"),O=this.getSetting("locale");return(0,ce.k7)(W,X,K,O,B)},re.prototype.getTicks=function(){var X=this._extent,K=[];if(!this._interval)return K;K.push({value:X[0],level:0});var B=this.getSetting("useUTC"),O=function Y(H,re,W,X){var B=ce.FW,O=0;function D(Ve,ze,We,tt,st,Tt,At){for(var Vt=new Date(ze),Wt=ze,kt=Vt[tt]();Wt<We&&Wt<=X[1];)At.push({value:Wt}),Vt[st](kt+=Ve),Wt=Vt.getTime();At.push({value:Wt,notAdd:!0})}function P(Ve,ze,We){var tt=[],st=!ze.length;if(!function G(H,re,W,X){var K=Se.sG(re),B=Se.sG(W),O=function(ie){return(0,ce.q5)(K,ie,X)===(0,ce.q5)(B,ie,X)},D=function(){return O("year")},P=function(){return D()&&O("month")},I=function(){return P()&&O("day")},T=function(){return I()&&O("hour")},A=function(){return T()&&O("minute")},L=function(){return A()&&O("second")};switch(H){case"year":return D();case"month":return P();case"day":return I();case"hour":return T();case"minute":return A();case"second":return L();case"millisecond":return L()&&O("millisecond")}}((0,ce.Tj)(Ve),X[0],X[1],W)){st&&(ze=[{value:b(new Date(X[0]),Ve,W)},{value:X[1]}]);for(var Tt=0;Tt<ze.length-1;Tt++){var At=ze[Tt].value,Vt=ze[Tt+1].value;if(At!==Vt){var Wt=void 0,kt=void 0,fn=void 0;switch(Ve){case"year":Wt=Math.max(1,Math.round(re/ce.s2/365)),kt=(0,ce.sx)(W),fn=(0,ce.xL)(W);break;case"half-year":case"quarter":case"month":Wt=te(re),kt=(0,ce.CW)(W),fn=(0,ce.vh)(W);break;case"week":case"half-week":case"day":Wt=Z(re),kt=(0,ce.xz)(W),fn=(0,ce.f5)(W),!0;break;case"half-day":case"quarter-day":case"hour":Wt=ee(re),kt=(0,ce.Wp)(W),fn=(0,ce.En)(W);break;case"minute":Wt=Q(re,!0),kt=(0,ce.fn)(W),fn=(0,ce.eN)(W);break;case"second":Wt=Q(re,!1),kt=(0,ce.MV)(W),fn=(0,ce.rM)(W);break;case"millisecond":Wt=J(re),kt=(0,ce.RZ)(W),fn=(0,ce.cb)(W)}D(Wt,At,Vt,kt,fn,0,tt),"year"===Ve&&We.length>1&&0===Tt&&We.unshift({value:We[0].value-Wt})}}for(Tt=0;Tt<tt.length;Tt++)We.push(tt[Tt]);return tt}}for(var I=[],T=[],A=0,L=0,N=0;N<B.length&&O++<1e4;++N){var ie=(0,ce.Tj)(B[N]);if((0,ce.$K)(B[N])&&(P(B[N],I[I.length-1]||[],T),ie!==(B[N+1]?(0,ce.Tj)(B[N+1]):null))){if(T.length){L=A,T.sort(function(Ve,ze){return Ve.value-ze.value});for(var ae=[],he=0;he<T.length;++he){var se=T[he].value;(0===he||T[he-1].value!==se)&&(ae.push(T[he]),se>=X[0]&&se<=X[1]&&A++)}var xe=(X[1]-X[0])/re;if(A>1.5*xe&&L>xe/1.5||(I.push(ae),A>xe||H===B[N]))break}T=[]}}var fe=(0,we.filter)((0,we.map)(I,function(Ve){return(0,we.filter)(Ve,function(ze){return ze.value>=X[0]&&ze.value<=X[1]&&!ze.notAdd})}),function(Ve){return Ve.length>0}),ge=[],Ce=fe.length-1;for(N=0;N<fe.length;++N)for(var Te=fe[N],Ie=0;Ie<Te.length;++Ie)ge.push({value:Te[Ie].value,level:Ce-N});ge.sort(function(Ve,ze){return Ve.value-ze.value});var Ee=[];for(N=0;N<ge.length;++N)(0===N||ge[N].value!==ge[N-1].value)&&Ee.push(ge[N]);return Ee}(this._minLevelUnit,this._approxInterval,B,X);return(K=K.concat(O)).push({value:X[1],level:0}),K},re.prototype.calcNiceExtent=function(W){var X=this._extent;if(X[0]===X[1]&&(X[0]-=ce.s2,X[1]+=ce.s2),X[1]===-1/0&&X[0]===1/0){var K=new Date;X[1]=+new Date(K.getFullYear(),K.getMonth(),K.getDate()),X[0]=X[1]-ce.s2}this.calcNiceTicks(W.splitNumber,W.minInterval,W.maxInterval)},re.prototype.calcNiceTicks=function(W,X,K){var B=this._extent;this._approxInterval=(B[1]-B[0])/(W=W||10),null!=X&&this._approxInterval<X&&(this._approxInterval=X),null!=K&&this._approxInterval>K&&(this._approxInterval=K);var D=$.length,P=Math.min(function(H,re,W,X){for(;W<X;){var K=W+X>>>1;H[K][1]<re?W=K+1:X=K}return W}($,this._approxInterval,0,D),D-1);this._interval=$[P][1],this._minLevelUnit=$[Math.max(P-1,0)][0]},re.prototype.parse=function(W){return(0,we.isNumber)(W)?W:+Se.sG(W)},re.prototype.contain=function(W){return _e.XS(this.parse(W),this._extent)},re.prototype.normalize=function(W){return _e.Fv(this.parse(W),this._extent)},re.prototype.scale=function(W){return _e.bA(W,this._extent)},re.type="time",re}(ye.Z),$=[["second",ce.WT],["minute",ce.yR],["hour",ce.dV],["quarter-day",6*ce.dV],["half-day",12*ce.dV],["day",1.2*ce.s2],["half-week",3.5*ce.s2],["week",7*ce.s2],["month",31*ce.s2],["quarter",95*ce.s2],["half-year",ce.P5/2],["year",ce.P5]];function Z(H,re){return(H/=ce.s2)>16?16:H>7.5?7:H>3.5?4:H>1.5?2:1}function te(H){return(H/=30*ce.s2)>6?6:H>3?3:H>2?2:1}function ee(H){return(H/=ce.dV)>12?12:H>6?6:H>3.5?4:H>2?2:1}function Q(H,re){return(H/=re?ce.yR:ce.WT)>30?30:H>20?20:H>15?15:H>10?10:H>5?5:H>2?2:1}function J(H){return Se.kx(H,!0)}function b(H,re,W){var X=new Date(H);switch((0,ce.Tj)(re)){case"year":case"month":X[(0,ce.vh)(W)](0);case"day":X[(0,ce.f5)(W)](1);case"hour":X[(0,ce.En)(W)](0);case"minute":X[(0,ce.eN)(W)](0);case"second":X[(0,ce.rM)(W)](0),X[(0,ce.cb)(W)](0)}return X.getTime()}be.Z.registerClass(j);const q=j},3295:(Ut,rt,z)=>{z.d(rt,{Fv:()=>$,Qf:()=>_e,XS:()=>j,bA:()=>G,lM:()=>ce,lb:()=>be,r1:()=>ye});var le=z(10);function ce(Z){return"interval"===Z.type||"log"===Z.type}function _e(Z,te,ee,Q){var J={},Y=J.interval=(0,le.kx)((Z[1]-Z[0])/te,!0);null!=ee&&Y<ee&&(Y=J.interval=ee),null!=Q&&Y>Q&&(Y=J.interval=Q);var q=J.intervalPrecision=be(Y);return function de(Z,te){!isFinite(Z[0])&&(Z[0]=te[0]),!isFinite(Z[1])&&(Z[1]=te[1]),we(Z,0,te),we(Z,1,te),Z[0]>Z[1]&&(Z[0]=Z[1])}(J.niceTickExtent=[(0,le.NM)(Math.ceil(Z[0]/Y)*Y,q),(0,le.NM)(Math.floor(Z[1]/Y)*Y,q)],Z),J}function ye(Z){var te=Math.pow(10,(0,le.xW)(Z)),ee=Z/te;return ee?2===ee?ee=3:3===ee?ee=5:ee*=2:ee=1,(0,le.NM)(ee*te)}function be(Z){return(0,le.p8)(Z)+2}function we(Z,te,ee){Z[te]=Math.max(Math.min(Z[te],ee[1]),ee[0])}function j(Z,te){return Z>=te[0]&&Z<=te[1]}function $(Z,te){return te[1]===te[0]?.5:(Z-te[0])/(te[1]-te[0])}function G(Z,te){return Z*(te[1]-te[0])+te[0]}},9358:(Ut,rt,z)=>{z.d(rt,{PT:()=>de,Qj:()=>te,au:()=>J,dm:()=>j,pw:()=>G,u9:()=>be});var le=z(5845),Se=z(9496),_e="___EC__COMPONENT__CONTAINER___",ye="___EC__EXTENDED_CLASS___";function be(b){var Y={main:"",sub:""};if(b){var q=b.split(".");Y.main=q[0]||"",Y.sub=q[1]||""}return Y}function de(b){return!(!b||!b[ye])}function j(b,Y){b.$constructor=b,b.extend=function(q){var re,H=this;return function $(b){return Se.isFunction(b)&&/^class\s/.test(Function.prototype.toString.call(b))}(H)?re=function(W){function X(){return W.apply(this,arguments)||this}return(0,le.ZT)(X,W),X}(H):(re=function(){(q.$constructor||H).apply(this,arguments)},Se.inherits(re,this)),Se.extend(re.prototype,q),re[ye]=!0,re.extend=this.extend,re.superCall=ee,re.superApply=Q,re.superClass=H,re}}function G(b,Y){b.extend=Y.extend}var Z=Math.round(10*Math.random());function te(b){var Y=["__\0is_clz",Z++].join("_");b.prototype[Y]=!0,b.isInstance=function(q){return!(!q||!q[Y])}}function ee(b,Y){for(var q=[],H=2;H<arguments.length;H++)q[H-2]=arguments[H];return this.superClass.prototype[Y].apply(b,q)}function Q(b,Y,q){return this.superClass.prototype[Y].apply(b,q)}function J(b){var Y={};b.registerClass=function(H){var re=H.type||H.prototype.type;if(re){(function we(b){Se.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(b),'componentType "'+b+'" illegal')})(re),H.prototype.type=re;var W=be(re);if(W.sub){if(W.sub!==_e){var X=function q(H){var re=Y[H.main];return(!re||!re[_e])&&((re=Y[H.main]={})[_e]=!0),re}(W);X[W.sub]=H}}else Y[W.main]=H}return H},b.getClass=function(H,re,W){var X=Y[H];if(X&&X[_e]&&(X=re?X[re]:null),W&&!X)throw new Error(re?"Component "+H+"."+(re||"")+" is used but not imported.":H+".type should be specified.");return X},b.getClassesByMainType=function(H){var re=be(H),W=[],X=Y[re.main];return X&&X[_e]?Se.each(X,function(K,B){B!==_e&&W.push(K)}):W.push(X),W},b.hasClass=function(H){var re=be(H);return!!Y[re.main]},b.getAllClassMainTypes=function(){var H=[];return Se.each(Y,function(re,W){H.push(W)}),H},b.hasSubTypes=function(H){var re=be(H),W=Y[re.main];return W&&W[_e]}}},102:(Ut,rt,z)=>{z.d(rt,{Kr:()=>_e,ZL:()=>we,cj:()=>ye,jS:()=>be});var le=z(9496),Se=z(9358),ce=Math.round(10*Math.random());function _e(de){return[de||"",ce++].join("_")}function ye(de){var j={};de.registerSubTypeDefaulter=function($,G){var Z=(0,Se.u9)($);j[Z.main]=G},de.determineSubType=function($,G){var Z=G.type;if(!Z){var te=(0,Se.u9)($).main;de.hasSubTypes($)&&j[te]&&(Z=j[te](G))}return Z}}function be(de,j){function G(te,ee){return te[ee]||(te[ee]={predecessor:[],successor:[]}),te[ee]}de.topologicalTravel=function(te,ee,Q,J){if(te.length){var b=function $(te){var ee={},Q=[];return le.each(te,function(J){var b=G(ee,J),q=function Z(te,ee){var Q=[];return le.each(te,function(J){le.indexOf(ee,J)>=0&&Q.push(J)}),Q}(b.originalDeps=j(J),te);b.entryCount=q.length,0===b.entryCount&&Q.push(J),le.each(q,function(H){le.indexOf(b.predecessor,H)<0&&b.predecessor.push(H);var re=G(ee,H);le.indexOf(re.successor,H)<0&&re.successor.push(J)})}),{graph:ee,noEntryList:Q}}(ee),Y=b.graph,q=b.noEntryList,H={};for(le.each(te,function(O){H[O]=!0});q.length;){var re=q.pop(),W=Y[re],X=!!H[re];X&&(Q.call(J,re,W.originalDeps.slice()),delete H[re]),le.each(W.successor,X?B:K)}le.each(H,function(){throw new Error("")})}function K(O){Y[O].entryCount--,0===Y[O].entryCount&&q.push(O)}function B(O){H[O]=!0,K(O)}}}function we(de,j){return le.merge(le.merge({},de,!0),j,!0)}},7123:(Ut,rt,z)=>{z.d(rt,{I:()=>ee});var le=Math.round(9*Math.random()),Se="function"==typeof Object.defineProperty;const _e=function(){function H(){this._id="__ec_inner_"+le++}return H.prototype.get=function(re){return this._guard(re)[this._id]},H.prototype.set=function(re,W){var X=this._guard(re);return Se?Object.defineProperty(X,this._id,{value:W,enumerable:!1,configurable:!0}):X[this._id]=W,this},H.prototype.delete=function(re){return!!this.has(re)&&(delete this._guard(re)[this._id],!0)},H.prototype.has=function(re){return!!this._guard(re)[this._id]},H.prototype._guard=function(re){if(re!==Object(re))throw TypeError("Value of WeakMap is not a non-null object.");return re},H}();var ye=z(9040),be=z(9496),we=z(10),de=z(2063),j=z(2539),$=z(3691),G=new _e,Z=new ye.ZP(100),te=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function ee(H,re){if("none"===H)return null;var W=re.getDevicePixelRatio(),X=re.getZr(),K="svg"===X.painter.type;H.dirty&&G.delete(H);var B=G.get(H);if(B)return B;var O=(0,be.defaults)(H,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});"none"===O.backgroundColor&&(O.backgroundColor=null);var D={repeat:"repeat"};return function P(I){for(var T=[W],A=!0,L=0;L<te.length;++L){var N=O[te[L]];if(null!=N&&!(0,be.isArray)(N)&&!(0,be.isString)(N)&&!(0,be.isNumber)(N)&&"boolean"!=typeof N){A=!1;break}T.push(N)}var ie;if(A){ie=T.join(",")+(K?"-svg":"");var oe=Z.get(ie);oe&&(K?I.svgElement=oe:I.image=oe)}var Ie,ae=J(O.dashArrayX),he=function b(H){if(!H||"object"==typeof H&&0===H.length)return[0,0];if((0,be.isNumber)(H)){var re=Math.ceil(H);return[re,re]}var W=(0,be.map)(H,function(X){return Math.ceil(X)});return H.length%2?W.concat(W):W}(O.dashArrayY),se=Q(O.symbol),xe=function Y(H){return(0,be.map)(H,function(re){return q(re)})}(ae),fe=q(he),ge=!K&&$.qW.createCanvas(),Ce=K&&{tag:"g",attrs:{},key:"dcl",children:[]},Te=function Ee(){for(var ze=1,We=0,tt=xe.length;We<tt;++We)ze=(0,we.nl)(ze,xe[We]);var st=1;for(We=0,tt=se.length;We<tt;++We)st=(0,we.nl)(st,se[We].length);ze*=st;var Tt=fe*xe.length*se.length;return{width:Math.max(1,Math.min(ze,O.maxTileWidth)),height:Math.max(1,Math.min(Tt,O.maxTileHeight))}}();ge&&(ge.width=Te.width*W,ge.height=Te.height*W,Ie=ge.getContext("2d")),function Ve(){Ie&&(Ie.clearRect(0,0,ge.width,ge.height),O.backgroundColor&&(Ie.fillStyle=O.backgroundColor,Ie.fillRect(0,0,ge.width,ge.height)));for(var ze=0,We=0;We<he.length;++We)ze+=he[We];if(!(ze<=0))for(var tt=-fe,st=0,Tt=0,At=0;tt<Te.height;){if(st%2==0){for(var Vt=Tt/2%se.length,Wt=0,kt=0,fn=0;Wt<2*Te.width;){var wn=0;for(We=0;We<ae[At].length;++We)wn+=ae[At][We];if(wn<=0)break;if(kt%2==0){var sr=.5*(1-O.symbolSize);Pn(Wt+ae[At][kt]*sr,tt+he[st]*sr,ae[At][kt]*O.symbolSize,he[st]*O.symbolSize,se[Vt][fn/2%se[Vt].length])}Wt+=ae[At][kt],++fn,++kt===ae[At].length&&(kt=0)}++At===ae.length&&(At=0)}tt+=he[st],++Tt,++st===he.length&&(st=0)}function Pn(Nn,jn,xr,gr,Je){var wt=K?1:W,nn=(0,de.th)(Je,Nn*wt,jn*wt,xr*wt,gr*wt,O.color,O.symbolKeepAspect);if(K){var Xt=X.painter.renderOneToVNode(nn);Xt&&Ce.children.push(Xt)}else(0,j.RV)(Ie,nn)}}(),A&&Z.put(ie,ge||Ce),I.image=ge,I.svgElement=Ce,I.svgWidth=Te.width,I.svgHeight=Te.height}(D),D.rotation=O.rotation,D.scaleX=D.scaleY=K?1:1/W,G.set(H,D),H.dirty=!1,D}function Q(H){if(!H||0===H.length)return[["rect"]];if((0,be.isString)(H))return[[H]];for(var re=!0,W=0;W<H.length;++W)if(!(0,be.isString)(H[W])){re=!1;break}if(re)return Q([H]);var X=[];for(W=0;W<H.length;++W)(0,be.isString)(H[W])?X.push([H[W]]):X.push(H[W]);return X}function J(H){if(!H||0===H.length)return[[0,0]];if((0,be.isNumber)(H))return[[re=Math.ceil(H),re]];for(var W=!0,X=0;X<H.length;++X)if(!(0,be.isNumber)(H[X])){W=!1;break}if(W)return J([H]);var K=[];for(X=0;X<H.length;++X)if((0,be.isNumber)(H[X])){var re=Math.ceil(H[X]);K.push([re,re])}else re=(0,be.map)(H[X],function(D){return Math.ceil(D)}),K.push(re.length%2==1?re.concat(re):re);return K}function q(H){for(var re=0,W=0;W<H.length;++W)re+=H[W];return H.length%2==1?2*re:re}},3325:(Ut,rt,z)=>{function le(Se,ce,_e){for(var ye;Se&&(!ce(Se)||(ye=Se,!_e));)Se=Se.__hostTarget||Se.parent;return ye}z.d(rt,{o:()=>le})},1755:(Ut,rt,z)=>{z.d(rt,{A0:()=>te,Lz:()=>J,MI:()=>b,MY:()=>we,OD:()=>ye,ew:()=>Q,kF:()=>G,mr:()=>ee,uX:()=>de,wx:()=>Z,zW:()=>be});var le=z(9496),Se=z(5853),ce=z(10),_e=z(7530);function ye(Y){if(!(0,ce.kE)(Y))return le.isString(Y)?Y:"-";var q=(Y+"").split(".");return q[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(q.length>1?"."+q[1]:"")}function be(Y,q){return Y=(Y||"").toLowerCase().replace(/-(.)/g,function(H,re){return re.toUpperCase()}),q&&Y&&(Y=Y.charAt(0).toUpperCase()+Y.slice(1)),Y}var we=le.normalizeCssArray;function de(Y,q,H){function W(P){return P&&le.trim(P)?P:"-"}function X(P){return!(null==P||isNaN(P)||!isFinite(P))}var K="time"===q,B=Y instanceof Date;if(K||B){var O=K?(0,ce.sG)(Y):Y;if(!isNaN(+O))return(0,_e.WU)(O,"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}",H);if(B)return"-"}if("ordinal"===q)return le.isStringSafe(Y)?W(Y):le.isNumber(Y)&&X(Y)?Y+"":"-";var D=(0,ce.FK)(Y);return X(D)?ye(D):le.isStringSafe(Y)?W(Y):"boolean"==typeof Y?Y+"":"-"}var j=["a","b","c","d","e","f","g"],$=function(Y,q){return"{"+Y+(q??"")+"}"};function G(Y,q,H){le.isArray(q)||(q=[q]);var re=q.length;if(!re)return"";for(var W=q[0].$vars||[],X=0;X<W.length;X++){var K=j[X];Y=Y.replace($(K),$(K,0))}for(var B=0;B<re;B++)for(var O=0;O<W.length;O++){var D=q[B][W[O]];Y=Y.replace($(j[O],B),H?(0,Se.F1)(D):D)}return Y}function Z(Y,q,H){return le.each(q,function(re,W){Y=Y.replace("{"+W+"}",H?(0,Se.F1)(re):re)}),Y}function te(Y,q){var H=le.isString(Y)?{color:Y,extraCssText:q}:Y||{},re=H.color,W=H.type;q=H.extraCssText;var X=H.renderMode||"html";return re?"html"===X?"subItem"===W?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+(0,Se.F1)(re)+";"+(q||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+(0,Se.F1)(re)+";"+(q||"")+'"></span>':{renderMode:X,content:"{"+(H.markerId||"markerX")+"|}  ",style:"subItem"===W?{width:4,height:4,borderRadius:2,backgroundColor:re}:{width:10,height:10,borderRadius:5,backgroundColor:re}}:""}function ee(Y,q,H){("week"===Y||"month"===Y||"quarter"===Y||"half-year"===Y||"year"===Y)&&(Y="MM-dd\nyyyy");var re=(0,ce.sG)(q),W=H?"getUTC":"get",X=re[W+"FullYear"](),K=re[W+"Month"]()+1,B=re[W+"Date"](),O=re[W+"Hours"](),D=re[W+"Minutes"](),P=re[W+"Seconds"](),I=re[W+"Milliseconds"]();return Y.replace("MM",(0,_e.vk)(K,2)).replace("M",K).replace("yyyy",X).replace("yy",(0,_e.vk)(X%100+"",2)).replace("dd",(0,_e.vk)(B,2)).replace("d",B).replace("hh",(0,_e.vk)(O,2)).replace("h",O).replace("mm",(0,_e.vk)(D,2)).replace("m",D).replace("ss",(0,_e.vk)(P,2)).replace("s",P).replace("SSS",(0,_e.vk)(I,3))}function Q(Y){return Y&&Y.charAt(0).toUpperCase()+Y.substr(1)}function J(Y,q){return q=q||"transparent",le.isString(Y)?Y:le.isObject(Y)&&Y.colorStops&&(Y.colorStops[0]||{}).color||q}function b(Y,q){if("_blank"===q||"blank"===q){var H=window.open();H.opener=null,H.location.href=Y}else window.open(Y,q)}},6442:(Ut,rt,z)=>{z.r(rt),z.d(rt,{Arc:()=>Y.Z,BezierCurve:()=>b.Z,BoundingRect:()=>W.Z,Circle:()=>j.Z,CompoundPath:()=>q.Z,Ellipse:()=>$.Z,Group:()=>we.Z,Image:()=>be.ZP,IncrementalDisplayable:()=>B.Z,Line:()=>J.Z,LinearGradient:()=>H.Z,OrientedBoundingRect:()=>X.Z,Path:()=>_e.ZP,Point:()=>K.Z,Polygon:()=>te.Z,Polyline:()=>ee.Z,RadialGradient:()=>re.Z,Rect:()=>Q.Z,Ring:()=>Z.Z,Sector:()=>G.C,Text:()=>de.ZP,applyTransform:()=>ze,clipPointsByRect:()=>At,clipRectByRect:()=>Vt,createIcon:()=>Wt,extendPath:()=>oe,extendShape:()=>N,getShapeClass:()=>he,getTransform:()=>Ve,groupTransition:()=>Tt,initProps:()=>I.KZ,isElementRemoved:()=>I.eq,lineLineIntersect:()=>fn,linePolygonIntersect:()=>kt,makeImage:()=>xe,makePath:()=>se,mergePath:()=>ge,registerShape:()=>ae,removeElement:()=>I.bX,removeElementWithFadeOut:()=>I.XD,resizePath:()=>Ce,setTooltipConfig:()=>Xn,subPixelOptimize:()=>Ee,subPixelOptimizeLine:()=>Te,subPixelOptimizeRect:()=>Ie,transformDirection:()=>We,traverseElements:()=>rr,updateProps:()=>I.D});var le=z(714),Se=z(619),ce=z(5145),_e=z(5489),ye=z(4593),be=z(6115),we=z(189),de=z(997),j=z(421),$=z(2968),G=z(8801),Z=z(5693),te=z(8822),ee=z(8059),Q=z(7952),J=z(1995),b=z(161),Y=z(598),q=z(3769),H=z(9869),re=z(3622),W=z(468),X=z(8025),K=z(1788),B=z(1133),O=z(5381),D=z(9496),P=z(1096),I=z(8646),T=Math.max,A=Math.min,L={};function N(Qt){return _e.ZP.extend(Qt)}var ie=le.Pc;function oe(Qt,un){return ie(Qt,un)}function ae(Qt,un){L[Qt]=un}function he(Qt){if(L.hasOwnProperty(Qt))return L[Qt]}function se(Qt,un,Pn,Nn){var jn=le.iR(Qt,un);return Pn&&("center"===Nn&&(Pn=fe(Pn,jn.getBoundingRect())),Ce(jn,Pn)),jn}function xe(Qt,un,Pn){var Nn=new be.ZP({style:{image:Qt,x:un.x,y:un.y,width:un.width,height:un.height},onload:function(jn){"center"===Pn&&Nn.setStyle(fe(un,{width:jn.width,height:jn.height}))}});return Nn}function fe(Qt,un){var jn,Pn=un.width/un.height,Nn=Qt.height*Pn;return jn=Nn<=Qt.width?Qt.height:(Nn=Qt.width)/Pn,{x:Qt.x+Qt.width/2-Nn/2,y:Qt.y+Qt.height/2-jn/2,width:Nn,height:jn}}var ge=le.AA;function Ce(Qt,un){if(Qt.applyTransform){var Nn=Qt.getBoundingRect().calculateTransform(un);Qt.applyTransform(Nn)}}function Te(Qt,un){return O._3(Qt,Qt,{lineWidth:un}),Qt}function Ie(Qt){return O.Pw(Qt.shape,Qt.shape,Qt.style),Qt}var Ee=O.vu;function Ve(Qt,un){for(var Pn=Se.identity([]);Qt&&Qt!==un;)Se.mul(Pn,Qt.getLocalTransform(),Pn),Qt=Qt.parent;return Pn}function ze(Qt,un,Pn){return un&&!(0,D.isArrayLike)(un)&&(un=ye.ZP.getLocalTransform(un)),Pn&&(un=Se.invert([],un)),ce.applyTransform([],Qt,un)}function We(Qt,un,Pn){var Nn=0===un[4]||0===un[5]||0===un[0]?1:Math.abs(2*un[4]/un[0]),jn=0===un[4]||0===un[5]||0===un[2]?1:Math.abs(2*un[4]/un[2]),xr=["left"===Qt?-Nn:"right"===Qt?Nn:0,"top"===Qt?-jn:"bottom"===Qt?jn:0];return xr=ze(xr,un,Pn),Math.abs(xr[0])>Math.abs(xr[1])?xr[0]>0?"right":"left":xr[1]>0?"bottom":"top"}function tt(Qt){return!Qt.isGroup}function Tt(Qt,un,Pn){if(Qt&&un){var xr=function Nn(gr){var Je={};return gr.traverse(function(wt){tt(wt)&&wt.anid&&(Je[wt.anid]=wt)}),Je}(Qt);un.traverse(function(gr){if(tt(gr)&&gr.anid){var Je=xr[gr.anid];if(Je){var wt=jn(gr);gr.attr(jn(Je)),(0,I.D)(gr,wt,Pn,(0,P.A)(gr).dataIndex)}}})}function jn(gr){var Je={x:gr.x,y:gr.y,rotation:gr.rotation};return function st(Qt){return null!=Qt.shape}(gr)&&(Je.shape=(0,D.extend)({},gr.shape)),Je}}function At(Qt,un){return(0,D.map)(Qt,function(Pn){var Nn=Pn[0];Nn=T(Nn,un.x),Nn=A(Nn,un.x+un.width);var jn=Pn[1];return jn=T(jn,un.y),[Nn,jn=A(jn,un.y+un.height)]})}function Vt(Qt,un){var Pn=T(Qt.x,un.x),Nn=A(Qt.x+Qt.width,un.x+un.width),jn=T(Qt.y,un.y),xr=A(Qt.y+Qt.height,un.y+un.height);if(Nn>=Pn&&xr>=jn)return{x:Pn,y:jn,width:Nn-Pn,height:xr-jn}}function Wt(Qt,un,Pn){var Nn=(0,D.extend)({rectHover:!0},un),jn=Nn.style={strokeNoScale:!0};if(Pn=Pn||{x:-1,y:-1,width:2,height:2},Qt)return 0===Qt.indexOf("image://")?(jn.image=Qt.slice(8),(0,D.defaults)(jn,Pn),new be.ZP(Nn)):se(Qt.replace("path://",""),Nn,Pn,"center")}function kt(Qt,un,Pn,Nn,jn){for(var xr=0,gr=jn[jn.length-1];xr<jn.length;xr++){var Je=jn[xr];if(fn(Qt,un,Pn,Nn,Je[0],Je[1],gr[0],gr[1]))return!0;gr=Je}}function fn(Qt,un,Pn,Nn,jn,xr,gr,Je){var wt=Pn-Qt,nn=Nn-un,Xt=gr-jn,dt=Je-xr,Lt=wn(Xt,dt,wt,nn);if(function sr(Qt){return Qt<=1e-6&&Qt>=-1e-6}(Lt))return!1;var qt=Qt-jn,Ze=un-xr,et=wn(qt,Ze,wt,nn)/Lt;if(et<0||et>1)return!1;var $e=wn(qt,Ze,Xt,dt)/Lt;return!($e<0||$e>1)}function wn(Qt,un,Pn,Nn){return Qt*Nn-Pn*un}function Xn(Qt){var un=Qt.itemTooltipOption,Pn=Qt.componentModel,Nn=Qt.itemName,jn=(0,D.isString)(un)?{formatter:un}:un,xr=Pn.mainType,gr=Pn.componentIndex,Je={componentType:xr,name:Nn,$vars:["name"]};Je[xr+"Index"]=gr;var wt=Qt.formatterParamsExtra;wt&&(0,D.each)((0,D.keys)(wt),function(Xt){(0,D.hasOwn)(Je,Xt)||(Je[Xt]=wt[Xt],Je.$vars.push(Xt))});var nn=(0,P.A)(Qt.el);nn.componentMainType=xr,nn.componentIndex=gr,nn.tooltipConfig={name:Nn,option:(0,D.defaults)({content:Nn,encodeHTMLContent:!0,formatterParams:Je},jn)}}function pr(Qt,un){var Pn;Qt.isGroup&&(Pn=un(Qt)),Pn||Qt.traverse(un)}function rr(Qt,un){if(Qt)if((0,D.isArray)(Qt))for(var Pn=0;Pn<Qt.length;Pn++)pr(Qt[Pn],un);else pr(Qt,un)}ae("circle",j.Z),ae("ellipse",$.Z),ae("sector",G.C),ae("ring",Z.Z),ae("polygon",te.Z),ae("polyline",ee.Z),ae("rect",Q.Z),ae("line",J.Z),ae("bezierCurve",b.Z),ae("arc",Y.Z)},1096:(Ut,rt,z)=>{z.d(rt,{A:()=>Se,Q:()=>ce});var Se=(0,z(2846).Yf)(),ce=function(_e,ye,be,we){if(we){var de=Se(we);de.dataIndex=be,de.dataType=ye,de.seriesIndex=_e,de.ssrType="chart","group"===we.type&&we.traverse(function(j){var $=Se(j);$.seriesIndex=_e,$.dataIndex=be,$.dataType=ye,$.ssrType="chart"})}}},8585:(Ut,rt,z)=>{z.d(rt,{BZ:()=>j,ME:()=>te,QM:()=>Q,QT:()=>q,YD:()=>J,dt:()=>b,gN:()=>be,lq:()=>Z,p$:()=>ee,tE:()=>Y});var le=z(9496),Se=z(468),ce=z(10),_e=z(1755),ye=le.each,be=["left","right","top","bottom","width","height"],we=[["width","left","right"],["height","top","bottom"]];function de(H,re,W,X,K){var B=0,O=0;null==X&&(X=1/0),null==K&&(K=1/0);var D=0;re.eachChild(function(P,I){var N,ie,T=P.getBoundingRect(),A=re.childAt(I+1),L=A&&A.getBoundingRect();if("horizontal"===H){var oe=T.width+(L?-L.x+T.x:0);(N=B+oe)>X||P.newline?(B=0,N=oe,O+=D+W,D=T.height):D=Math.max(D,T.height)}else{var ae=T.height+(L?-L.y+T.y:0);(ie=O+ae)>K||P.newline?(B+=D+W,O=0,ie=ae,D=T.width):D=Math.max(D,T.width)}P.newline||(P.x=B,P.y=O,P.markRedraw(),"horizontal"===H?B=N+W:O=ie+W)})}var j=de;function Z(H,re,W){var X=re.width,K=re.height,B=(0,ce.GM)(H.left,X),O=(0,ce.GM)(H.top,K),D=(0,ce.GM)(H.right,X),P=(0,ce.GM)(H.bottom,K);return(isNaN(B)||isNaN(parseFloat(H.left)))&&(B=0),(isNaN(D)||isNaN(parseFloat(H.right)))&&(D=X),(isNaN(O)||isNaN(parseFloat(H.top)))&&(O=0),(isNaN(P)||isNaN(parseFloat(H.bottom)))&&(P=K),W=_e.MY(W||0),{width:Math.max(D-B-W[1]-W[3],0),height:Math.max(P-O-W[0]-W[2],0)}}function te(H,re,W){W=_e.MY(W||0);var X=re.width,K=re.height,B=(0,ce.GM)(H.left,X),O=(0,ce.GM)(H.top,K),D=(0,ce.GM)(H.right,X),P=(0,ce.GM)(H.bottom,K),I=(0,ce.GM)(H.width,X),T=(0,ce.GM)(H.height,K),A=W[2]+W[0],L=W[1]+W[3],N=H.aspect;switch(isNaN(I)&&(I=X-D-L-B),isNaN(T)&&(T=K-P-A-O),null!=N&&(isNaN(I)&&isNaN(T)&&(N>X/K?I=.8*X:T=.8*K),isNaN(I)&&(I=N*T),isNaN(T)&&(T=I/N)),isNaN(B)&&(B=X-D-I-L),isNaN(O)&&(O=K-P-T-A),H.left||H.right){case"center":B=X/2-I/2-W[3];break;case"right":B=X-I-L}switch(H.top||H.bottom){case"middle":case"center":O=K/2-T/2-W[0];break;case"bottom":O=K-T-A}B=B||0,O=O||0,isNaN(I)&&(I=X-L-B-(D||0)),isNaN(T)&&(T=K-A-O-(P||0));var ie=new Se.Z(B+W[3],O+W[0],I,T);return ie.margin=W,ie}function ee(H,re,W,X,K,B){var I,O=!K||!K.hv||K.hv[0],D=!K||!K.hv||K.hv[1],P=K&&K.boundingMode||"all";if((B=B||H).x=H.x,B.y=H.y,!O&&!D)return!1;if("raw"===P)I="group"===H.type?new Se.Z(0,0,+re.width||0,+re.height||0):H.getBoundingRect();else if(I=H.getBoundingRect(),H.needLocalTransform()){var T=H.getLocalTransform();(I=I.clone()).applyTransform(T)}var A=te(le.defaults({width:I.width,height:I.height},re),W,X),L=O?A.x-I.x:0,N=D?A.y-I.y:0;return"raw"===P?(B.x=L,B.y=N):(B.x+=L,B.y+=N),B===H&&H.markRedraw(),!0}function Q(H,re){return null!=H[we[re][0]]||null!=H[we[re][1]]&&null!=H[we[re][2]]}function J(H){var re=H.layoutMode||H.constructor.layoutMode;return le.isObject(re)?re:re?{type:re}:null}function b(H,re,W){var X=W&&W.ignoreSize;!le.isArray(X)&&(X=[X,X]);var K=O(we[0],0),B=O(we[1],1);function O(T,A){var L={},N=0,ie={},oe=0;if(ye(T,function(xe){ie[xe]=H[xe]}),ye(T,function(xe){D(re,xe)&&(L[xe]=ie[xe]=re[xe]),P(L,xe)&&N++,P(ie,xe)&&oe++}),X[A])return P(re,T[1])?ie[T[2]]=null:P(re,T[2])&&(ie[T[1]]=null),ie;if(2===oe||!N)return ie;if(N>=2)return L;for(var he=0;he<T.length;he++){var se=T[he];if(!D(L,se)&&D(H,se)){L[se]=H[se];break}}return L}function D(T,A){return T.hasOwnProperty(A)}function P(T,A){return null!=T[A]&&"auto"!==T[A]}function I(T,A,L){ye(T,function(N){A[N]=L[N]})}I(we[0],H,K),I(we[1],H,B)}function Y(H){return q({},H)}function q(H,re){return re&&H&&ye(be,function(W){re.hasOwnProperty(W)&&(H[W]=re[W])}),H}le.curry(de,"vertical"),le.curry(de,"horizontal")},6420:(Ut,rt,z)=>{z.d(rt,{Sh:()=>de,ZK:()=>be,_y:()=>G});var Se={},ce=typeof console<"u"&&console.warn&&console.log;function be(Z,te){!function _e(Z,te,ee){if(ce){if(ee){if(Se[te])return;Se[te]=!0}console[Z]("[ECharts] "+te)}}("warn",Z,te)}function de(Z){}function G(Z){throw new Error(Z)}},2846:(Ut,rt,z)=>{z.d(rt,{C4:()=>$,C6:()=>oe,Cc:()=>de,Co:()=>G,HZ:()=>he,IL:()=>xe,O0:()=>D,P$:()=>se,Td:()=>j,U5:()=>re,U9:()=>fe,XI:()=>I,Yf:()=>A,ab:()=>Z,g0:()=>O,gO:()=>T,iP:()=>ae,kF:()=>we,lY:()=>B,pk:()=>Ce,pm:()=>N,pv:()=>ge,yu:()=>K,zH:()=>ie});var le=z(9496),Se=z(9420),ce=z(10);function _e(Te,Ie,Ee){return(Ie-Te)*Ee+Te}var ye="series\0";function we(Te){return Te instanceof Array?Te:null==Te?[]:[Te]}function de(Te,Ie,Ee){if(Te){Te[Ie]=Te[Ie]||{},Te.emphasis=Te.emphasis||{},Te.emphasis[Ie]=Te.emphasis[Ie]||{};for(var Ve=0,ze=Ee.length;Ve<ze;Ve++){var We=Ee[Ve];!Te.emphasis[Ie].hasOwnProperty(We)&&Te[Ie].hasOwnProperty(We)&&(Te.emphasis[Ie][We]=Te[Ie][We])}}}var j=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function $(Te){return!(0,le.isObject)(Te)||(0,le.isArray)(Te)||Te instanceof Date?Te:Te.value}function G(Te){return(0,le.isObject)(Te)&&!(Te instanceof Array)}function Z(Te,Ie,Ee){var Ve="normalMerge"===Ee,ze="replaceMerge"===Ee,We="replaceAll"===Ee;Te=Te||[],Ie=(Ie||[]).slice();var tt=(0,le.createHashMap)();(0,le.each)(Ie,function(Tt,At){(0,le.isObject)(Tt)||(Ie[At]=null)});var st=function te(Te,Ie,Ee){var Ve=[];if("replaceAll"===Ee)return Ve;for(var ze=0;ze<Te.length;ze++){var We=Te[ze];We&&null!=We.id&&Ie.set(We.id,ze),Ve.push({existing:"replaceMerge"===Ee||B(We)?null:We,newOption:null,keyInfo:null,brandNew:null})}return Ve}(Te,tt,Ee);return(Ve||ze)&&function ee(Te,Ie,Ee,Ve){(0,le.each)(Ve,function(ze,We){if(ze&&null!=ze.id){var tt=H(ze.id),st=Ee.get(tt);if(null!=st){var Tt=Te[st];(0,le.assert)(!Tt.newOption,'Duplicated option on id "'+tt+'".'),Tt.newOption=ze,Tt.existing=Ie[st],Ve[We]=null}}})}(st,Te,tt,Ie),Ve&&function Q(Te,Ie){(0,le.each)(Ie,function(Ee,Ve){if(Ee&&null!=Ee.name)for(var ze=0;ze<Te.length;ze++){var We=Te[ze].existing;if(!Te[ze].newOption&&We&&(null==We.id||null==Ee.id)&&!B(Ee)&&!B(We)&&q("name",We,Ee))return Te[ze].newOption=Ee,void(Ie[Ve]=null)}})}(st,Ie),Ve||ze?function J(Te,Ie,Ee){(0,le.each)(Ie,function(Ve){if(Ve){for(var ze,We=0;(ze=Te[We])&&(ze.newOption||B(ze.existing)||ze.existing&&null!=Ve.id&&!q("id",Ve,ze.existing));)We++;ze?(ze.newOption=Ve,ze.brandNew=Ee):Te.push({newOption:Ve,brandNew:Ee,existing:null,keyInfo:null}),We++}})}(st,Ie,ze):We&&function b(Te,Ie){(0,le.each)(Ie,function(Ee){Te.push({newOption:Ee,brandNew:!0,existing:null,keyInfo:null})})}(st,Ie),function Y(Te){var Ie=(0,le.createHashMap)();(0,le.each)(Te,function(Ee){var Ve=Ee.existing;Ve&&Ie.set(Ve.id,Ee)}),(0,le.each)(Te,function(Ee){var Ve=Ee.newOption;(0,le.assert)(!Ve||null==Ve.id||!Ie.get(Ve.id)||Ie.get(Ve.id)===Ee,"id duplicates: "+(Ve&&Ve.id)),Ve&&null!=Ve.id&&Ie.set(Ve.id,Ee),!Ee.keyInfo&&(Ee.keyInfo={})}),(0,le.each)(Te,function(Ee,Ve){var ze=Ee.existing,We=Ee.newOption,tt=Ee.keyInfo;if((0,le.isObject)(We)){if(tt.name=null!=We.name?H(We.name):ze?ze.name:ye+Ve,ze)tt.id=H(ze.id);else if(null!=We.id)tt.id=H(We.id);else{var st=0;do{tt.id="\0"+tt.name+"\0"+st++}while(Ie.get(tt.id))}Ie.set(tt.id,Ee)}})}(st),st}function q(Te,Ie,Ee){var Ve=re(Ie[Te],null),ze=re(Ee[Te],null);return null!=Ve&&null!=ze&&Ve===ze}function H(Te){return re(Te,"")}function re(Te,Ie){return null==Te?Ie:(0,le.isString)(Te)?Te:(0,le.isNumber)(Te)||(0,le.isStringSafe)(Te)?Te+"":Ie}function K(Te){var Ie=Te.name;return!(!Ie||!Ie.indexOf(ye))}function B(Te){return Te&&null!=Te.id&&0===H(Te.id).indexOf("\0_ec_\0")}function O(Te){return"\0_ec_\0"+Te}function D(Te,Ie,Ee){(0,le.each)(Te,function(Ve){var ze=Ve.newOption;(0,le.isObject)(ze)&&(Ve.keyInfo.mainType=Ie,Ve.keyInfo.subType=function P(Te,Ie,Ee,Ve){return Ie.type?Ie.type:Ee?Ee.subType:Ve.determineSubType(Te,Ie)}(Ie,ze,Ve.existing,Ee))})}function I(Te,Ie){var Ee={},Ve={};return ze(Te||[],Ee),ze(Ie||[],Ve,Ee),[We(Ee),We(Ve)];function ze(tt,st,Tt){for(var At=0,Vt=tt.length;At<Vt;At++){var Wt=re(tt[At].seriesId,null);if(null==Wt)return;for(var kt=we(tt[At].dataIndex),fn=Tt&&Tt[Wt],wn=0,sr=kt.length;wn<sr;wn++){var Xn=kt[wn];fn&&fn[Xn]?fn[Xn]=null:(st[Wt]||(st[Wt]={}))[Xn]=1}}}function We(tt,st){var Tt=[];for(var At in tt)if(tt.hasOwnProperty(At)&&null!=tt[At])if(st)Tt.push(+At);else{var Vt=We(tt[At],!0);Vt.length&&Tt.push({seriesId:At,dataIndex:Vt})}return Tt}}function T(Te,Ie){return null!=Ie.dataIndexInside?Ie.dataIndexInside:null!=Ie.dataIndex?(0,le.isArray)(Ie.dataIndex)?(0,le.map)(Ie.dataIndex,function(Ee){return Te.indexOfRawIndex(Ee)}):Te.indexOfRawIndex(Ie.dataIndex):null!=Ie.name?(0,le.isArray)(Ie.name)?(0,le.map)(Ie.name,function(Ee){return Te.indexOfName(Ee)}):Te.indexOfName(Ie.name):void 0}function A(){var Te="__ec_inner_"+L++;return function(Ie){return Ie[Te]||(Ie[Te]={})}}var L=(0,ce.jj)();function N(Te,Ie,Ee){var Ve=ie(Ie,Ee),We=Ve.queryOptionMap,st=Ve.others,Tt=Ee?Ee.defaultMainType:null;return!Ve.mainTypeSpecified&&Tt&&We.set(Tt,{}),We.each(function(At,Vt){var Wt=he(Te,Vt,At,{useDefault:Tt===Vt,enableAll:!Ee||null==Ee.enableAll||Ee.enableAll,enableNone:!Ee||null==Ee.enableNone||Ee.enableNone});st[Vt+"Models"]=Wt.models,st[Vt+"Model"]=Wt.models[0]}),st}function ie(Te,Ie){var Ee;if((0,le.isString)(Te)){var Ve={};Ve[Te+"Index"]=0,Ee=Ve}else Ee=Te;var ze=(0,le.createHashMap)(),We={},tt=!1;return(0,le.each)(Ee,function(st,Tt){if("dataIndex"!==Tt&&"dataIndexInside"!==Tt){var At=Tt.match(/^(\w+)(Index|Id|Name)$/)||[],Vt=At[1],Wt=(At[2]||"").toLowerCase();!Vt||!Wt||Ie&&Ie.includeMainTypes&&(0,le.indexOf)(Ie.includeMainTypes,Vt)<0||(tt=tt||!!Vt,(ze.get(Vt)||ze.set(Vt,{}))[Wt]=st)}else We[Tt]=st}),{mainTypeSpecified:tt,queryOptionMap:ze,others:We}}var oe={useDefault:!0,enableAll:!1,enableNone:!1},ae={useDefault:!1,enableAll:!0,enableNone:!0};function he(Te,Ie,Ee,Ve){Ve=Ve||oe;var ze=Ee.index,We=Ee.id,tt=Ee.name,st={models:null,specified:null!=ze||null!=We||null!=tt};if(!st.specified){var Tt=void 0;return st.models=Ve.useDefault&&(Tt=Te.getComponent(Ie))?[Tt]:[],st}return"none"===ze||!1===ze?((0,le.assert)(Ve.enableNone,'`"none"` or `false` is not a valid value on index option.'),st.models=[],st):("all"===ze&&((0,le.assert)(Ve.enableAll,'`"all"` is not a valid value on index option.'),ze=We=tt=null),st.models=Te.queryComponents({mainType:Ie,index:ze,id:We,name:tt}),st)}function se(Te,Ie,Ee){Te.setAttribute?Te.setAttribute(Ie,Ee):Te[Ie]=Ee}function xe(Te,Ie){return Te.getAttribute?Te.getAttribute(Ie):Te[Ie]}function fe(Te){return"auto"===Te?Se.Z.domSupported?"html":"richText":Te||"html"}function ge(Te,Ie){var Ee=(0,le.createHashMap)(),Ve=[];return(0,le.each)(Te,function(ze){var We=Ie(ze);(Ee.get(We)||(Ve.push(We),Ee.set(We,[]))).push(ze)}),{keys:Ve,buckets:Ee}}function Ce(Te,Ie,Ee,Ve,ze){var We=null==Ie||"auto"===Ie;if(null==Ve)return Ve;if((0,le.isNumber)(Ve)){var tt=_e(Ee||0,Ve,ze);return(0,ce.NM)(tt,We?Math.max((0,ce.p8)(Ee||0),(0,ce.p8)(Ve)):Ie)}if((0,le.isString)(Ve))return ze<1?Ee:Ve;for(var st=[],Tt=Ee,At=Ve,Vt=Math.max(Tt?Tt.length:0,At.length),Wt=0;Wt<Vt;++Wt){var kt=Te.getDimensionInfo(Wt);if(kt&&"ordinal"===kt.type)st[Wt]=(ze<1&&Tt?Tt:At)[Wt];else{var fn=Tt&&Tt[Wt]?Tt[Wt]:0,wn=At[Wt];tt=_e(fn,wn,ze),st[Wt]=(0,ce.NM)(tt,We?Math.max((0,ce.p8)(fn),(0,ce.p8)(wn)):Ie)}}return st}},10:(Ut,rt,z)=>{z.d(rt,{FK:()=>B,GM:()=>be,HD:()=>te,M9:()=>G,NM:()=>we,NU:()=>ye,S$:()=>ee,VR:()=>X,Xd:()=>H,YM:()=>Q,ZB:()=>$,dt:()=>de,eJ:()=>Z,jj:()=>D,kE:()=>O,kx:()=>W,mW:()=>b,nR:()=>K,nl:()=>I,p8:()=>j,sG:()=>q,wW:()=>J,xW:()=>re});var le=z(9496);function ye(T,A,L,N){var ie=A[0],oe=A[1],ae=L[0],he=L[1],se=oe-ie,xe=he-ae;if(0===se)return 0===xe?ae:(ae+he)/2;if(N)if(se>0){if(T<=ie)return ae;if(T>=oe)return he}else{if(T>=ie)return ae;if(T<=oe)return he}else{if(T===ie)return ae;if(T===oe)return he}return(T-ie)/se*xe+ae}function be(T,A){switch(T){case"center":case"middle":T="50%";break;case"left":case"top":T="0%";break;case"right":case"bottom":T="100%"}return le.isString(T)?function _e(T){return T.replace(/^\s+|\s+$/g,"")}(T).match(/%$/)?parseFloat(T)/100*A:parseFloat(T):null==T?NaN:+T}function we(T,A,L){return null==A&&(A=10),A=Math.min(Math.max(0,A),20),T=(+T).toFixed(A),L?T:+T}function de(T){return T.sort(function(A,L){return A-L}),T}function j(T){if(T=+T,isNaN(T))return 0;if(T>1e-14)for(var A=1,L=0;L<15;L++,A*=10)if(Math.round(T*A)/A===T)return L;return $(T)}function $(T){var A=T.toString().toLowerCase(),L=A.indexOf("e"),N=L>0?+A.slice(L+1):0,ie=L>0?L:A.length,oe=A.indexOf(".");return Math.max(0,(oe<0?0:ie-1-oe)-N)}function G(T,A){var L=Math.log,N=Math.LN10,ie=Math.floor(L(T[1]-T[0])/N),oe=Math.round(L(Math.abs(A[1]-A[0]))/N),ae=Math.min(Math.max(-ie+oe,0),20);return isFinite(ae)?ae:20}function Z(T,A,L){return T[A]&&te(T,L)[A]||0}function te(T,A){var L=le.reduce(T,function(Te,Ie){return Te+(isNaN(Ie)?0:Ie)},0);if(0===L)return[];for(var N=Math.pow(10,A),ie=le.map(T,function(Te){return(isNaN(Te)?0:Te)/L*N*100}),oe=100*N,ae=le.map(ie,function(Te){return Math.floor(Te)}),he=le.reduce(ae,function(Te,Ie){return Te+Ie},0),se=le.map(ie,function(Te,Ie){return Te-ae[Ie]});he<oe;){for(var xe=Number.NEGATIVE_INFINITY,fe=null,ge=0,Ce=se.length;ge<Ce;++ge)se[ge]>xe&&(xe=se[ge],fe=ge);++ae[fe],se[fe]=0,++he}return le.map(ae,function(Te){return Te/N})}function ee(T,A){var L=Math.max(j(T),j(A)),N=T+A;return L>20?N:we(N,L)}var Q=9007199254740991;function J(T){var A=2*Math.PI;return(T%A+A)%A}function b(T){return T>-1e-4&&T<1e-4}var Y=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function q(T){if(T instanceof Date)return T;if(le.isString(T)){var A=Y.exec(T);if(!A)return new Date(NaN);if(A[8]){var L=+A[4]||0;return"Z"!==A[8].toUpperCase()&&(L-=+A[8].slice(0,3)),new Date(Date.UTC(+A[1],+(A[2]||1)-1,+A[3]||1,L,+(A[5]||0),+A[6]||0,A[7]?+A[7].substring(0,3):0))}return new Date(+A[1],+(A[2]||1)-1,+A[3]||1,+A[4]||0,+(A[5]||0),+A[6]||0,A[7]?+A[7].substring(0,3):0)}return null==T?new Date(NaN):new Date(Math.round(T))}function H(T){return Math.pow(10,re(T))}function re(T){if(0===T)return 0;var A=Math.floor(Math.log(T)/Math.LN10);return T/Math.pow(10,A)>=10&&A++,A}function W(T,A){var L=re(T),N=Math.pow(10,L),ie=T/N;return T=(A?ie<1.5?1:ie<2.5?2:ie<4?3:ie<7?5:10:ie<1?1:ie<2?2:ie<3?3:ie<5?5:10)*N,L>=-20?+T.toFixed(L<0?-L:0):T}function X(T,A){var L=(T.length-1)*A+1,N=Math.floor(L),ie=+T[N-1],oe=L-N;return oe?ie+oe*(T[N]-ie):ie}function K(T){T.sort(function(se,xe){return he(se,xe,0)?-1:1});for(var A=-1/0,L=1,N=0;N<T.length;){for(var ie=T[N].interval,oe=T[N].close,ae=0;ae<2;ae++)ie[ae]<=A&&(ie[ae]=A,oe[ae]=ae?1:1-L),A=ie[ae],L=oe[ae];ie[0]===ie[1]&&oe[0]*oe[1]!=1?T.splice(N,1):N++}return T;function he(se,xe,fe){return se.interval[fe]<xe.interval[fe]||se.interval[fe]===xe.interval[fe]&&(se.close[fe]-xe.close[fe]==(fe?-1:1)||!fe&&he(se,xe,1))}}function B(T){var A=parseFloat(T);return A==T&&(0!==A||!le.isString(T)||T.indexOf("x")<=0)?A:NaN}function O(T){return!isNaN(B(T))}function D(){return Math.round(9*Math.random())}function P(T,A){return 0===A?T:P(A,T%A)}function I(T,A){return null==T?A:null==A?T:T*A/P(T,A)}},4372:(Ut,rt,z)=>{z.d(rt,{$l:()=>Wt,Av:()=>xr,C5:()=>sr,CX:()=>G,Gl:()=>L,Hg:()=>q,Ib:()=>Qt,JQ:()=>H,Ki:()=>b,L1:()=>te,MA:()=>xe,Mh:()=>Te,Nj:()=>jn,RW:()=>Je,SJ:()=>ze,SX:()=>Ie,T5:()=>tt,UL:()=>At,VP:()=>Ee,WO:()=>Nn,XX:()=>Ve,aG:()=>wt,ci:()=>wn,e9:()=>Xt,fD:()=>Ce,iK:()=>re,k5:()=>rr,oJ:()=>Vt,og:()=>fn,qc:()=>ee,th:()=>gr,vF:()=>Xn,wU:()=>Z,xp:()=>nn,xr:()=>kt,yx:()=>Y,zI:()=>Tt,zr:()=>Q});var le=z(9496),Se=z(1096),ce=z(2523),_e=z(2846),ye=z(5489),be=1,we={},de=(0,_e.Yf)(),j=(0,_e.Yf)(),G=1,Z=2,te=["emphasis","blur","select"],ee=["normal","emphasis","blur","select"],Q=10,b="highlight",Y="downplay",q="select",H="unselect",re="toggleSelect";function W(dt){return null!=dt&&"none"!==dt}function X(dt,Lt,qt){dt.onHoverStateChange&&(dt.hoverState||0)!==qt&&dt.onHoverStateChange(Lt),dt.hoverState=qt}function K(dt){X(dt,"emphasis",Z)}function B(dt){dt.hoverState===Z&&X(dt,"normal",0)}function O(dt){X(dt,"blur",G)}function D(dt){dt.hoverState===G&&X(dt,"normal",0)}function P(dt){dt.selected=!0}function I(dt){dt.selected=!1}function T(dt,Lt,qt){Lt(dt,qt)}function A(dt,Lt,qt){T(dt,Lt,qt),dt.isGroup&&dt.traverse(function(Ze){T(Ze,Lt,qt)})}function L(dt,Lt){switch(Lt){case"emphasis":dt.hoverState=Z;break;case"normal":dt.hoverState=0;break;case"blur":dt.hoverState=G;break;case"select":dt.selected=!0}}function se(dt,Lt){var qt=this.states[dt];if(this.style){if("emphasis"===dt)return function oe(dt,Lt,qt,Ze){var et=qt&&(0,le.indexOf)(qt,"select")>=0,$e=!1;if(dt instanceof ye.ZP){var mt=de(dt),Zt=et&&mt.selectFill||mt.normalFill,vn=et&&mt.selectStroke||mt.normalStroke;if(W(Zt)||W(vn)){var mn=(Ze=Ze||{}).style||{};"inherit"===mn.fill?($e=!0,Ze=(0,le.extend)({},Ze),(mn=(0,le.extend)({},mn)).fill=Zt):!W(mn.fill)&&W(Zt)?($e=!0,Ze=(0,le.extend)({},Ze),(mn=(0,le.extend)({},mn)).fill=(0,ce.liftColor)(Zt)):!W(mn.stroke)&&W(vn)&&($e||(Ze=(0,le.extend)({},Ze),mn=(0,le.extend)({},mn)),mn.stroke=(0,ce.liftColor)(vn)),Ze.style=mn}}return Ze&&null==Ze.z2&&($e||(Ze=(0,le.extend)({},Ze)),Ze.z2=dt.z2+(dt.z2EmphasisLift??Q)),Ze}(this,0,Lt,qt);if("blur"===dt)return function he(dt,Lt,qt){var Ze=(0,le.indexOf)(dt.currentStates,Lt)>=0,et=dt.style.opacity,$e=Ze?null:function ie(dt,Lt,qt,Ze){for(var et=dt.style,$e={},mt=0;mt<Lt.length;mt++){var Zt=Lt[mt];$e[Zt]=et[Zt]??(Ze&&Ze[Zt])}for(mt=0;mt<dt.animators.length;mt++){var mn=dt.animators[mt];mn.__fromStateTransition&&mn.__fromStateTransition.indexOf(qt)<0&&"style"===mn.targetName&&mn.saveTo($e,Lt)}return $e}(dt,["opacity"],Lt,{opacity:1}),mt=(qt=qt||{}).style||{};return null==mt.opacity&&(qt=(0,le.extend)({},qt),mt=(0,le.extend)({opacity:Ze?et:.1*$e.opacity},mt),qt.style=mt),qt}(this,dt,qt);if("select"===dt)return function ae(dt,Lt,qt){return qt&&null==qt.z2&&((qt=(0,le.extend)({},qt)).z2=dt.z2+(dt.z2SelectLift??9)),qt}(this,0,qt)}return qt}function xe(dt){dt.stateProxy=se;var Lt=dt.getTextContent(),qt=dt.getTextGuideLine();Lt&&(Lt.stateProxy=se),qt&&(qt.stateProxy=se)}function fe(dt,Lt){!We(dt,Lt)&&!dt.__highByOuter&&A(dt,K)}function ge(dt,Lt){!We(dt,Lt)&&!dt.__highByOuter&&A(dt,B)}function Ce(dt,Lt){dt.__highByOuter|=1<<(Lt||0),A(dt,K)}function Te(dt,Lt){!(dt.__highByOuter&=~(1<<(Lt||0)))&&A(dt,B)}function Ie(dt){A(dt,O)}function Ee(dt){A(dt,D)}function Ve(dt){A(dt,P)}function ze(dt){A(dt,I)}function We(dt,Lt){return dt.__highDownSilentOnTouch&&Lt.zrByTouch}function tt(dt){var Lt=dt.getModel(),qt=[],Ze=[];Lt.eachComponent(function(et,$e){var mt=j($e),Zt="series"===et,vn=Zt?dt.getViewOfSeriesModel($e):dt.getViewOfComponentModel($e);!Zt&&Ze.push(vn),mt.isBlured&&(vn.group.traverse(function(mn){D(mn)}),Zt&&qt.push($e)),mt.isBlured=!1}),(0,le.each)(Ze,function(et){et&&et.toggleBlurSeries&&et.toggleBlurSeries(qt,!1,Lt)})}function st(dt,Lt,qt,Ze){var et=Ze.getModel();function $e(mn,Rn){for(var ur=0;ur<Rn.length;ur++){var Zi=mn.getItemGraphicEl(Rn[ur]);Zi&&Ee(Zi)}}if(qt=qt||"coordinateSystem",null!=dt&&Lt&&"none"!==Lt){var mt=et.getSeriesByIndex(dt),Zt=mt.coordinateSystem;Zt&&Zt.master&&(Zt=Zt.master);var vn=[];et.eachSeries(function(mn){var Rn=mt===mn,ur=mn.coordinateSystem;if(ur&&ur.master&&(ur=ur.master),!("series"===qt&&!Rn||"coordinateSystem"===qt&&!(ur&&Zt?ur===Zt:Rn)||"series"===Lt&&Rn)){if(Ze.getViewOfSeriesModel(mn).group.traverse(function(co){co.__highByOuter&&Rn&&"self"===Lt||O(co)}),(0,le.isArrayLike)(Lt))$e(mn.getData(),Lt);else if((0,le.isObject)(Lt))for(var qa=(0,le.keys)(Lt),ea=0;ea<qa.length;ea++)$e(mn.getData(qa[ea]),Lt[qa[ea]]);vn.push(mn),j(mn).isBlured=!0}}),et.eachComponent(function(mn,Rn){if("series"!==mn){var ur=Ze.getViewOfComponentModel(Rn);ur&&ur.toggleBlurSeries&&ur.toggleBlurSeries(vn,!0,et)}})}}function Tt(dt,Lt,qt){if(null!=dt&&null!=Lt){var Ze=qt.getModel().getComponent(dt,Lt);if(Ze){j(Ze).isBlured=!0;var et=qt.getViewOfComponentModel(Ze);!et||!et.focusBlurEnabled||et.group.traverse(function($e){O($e)})}}}function At(dt,Lt,qt){var Ze=dt.seriesIndex,et=dt.getData(Lt.dataType);if(et){var $e=(0,_e.gO)(et,Lt);$e=((0,le.isArray)($e)?$e[0]:$e)||0;var mt=et.getItemGraphicEl($e);if(!mt)for(var Zt=et.count(),vn=0;!mt&&vn<Zt;)mt=et.getItemGraphicEl(vn++);if(mt){var mn=(0,Se.A)(mt);st(Ze,mn.focus,mn.blurScope,qt)}else{var Rn=dt.get(["emphasis","focus"]),ur=dt.get(["emphasis","blurScope"]);null!=Rn&&st(Ze,Rn,ur,qt)}}}function Vt(dt,Lt,qt,Ze){var et={focusSelf:!1,dispatchers:null};if(null==dt||"series"===dt||null==Lt||null==qt)return et;var $e=Ze.getModel().getComponent(dt,Lt);if(!$e)return et;var mt=Ze.getViewOfComponentModel($e);if(!mt||!mt.findHighDownDispatchers)return et;for(var vn,Zt=mt.findHighDownDispatchers(qt),mn=0;mn<Zt.length;mn++)if("self"===(0,Se.A)(Zt[mn]).focus){vn=!0;break}return{focusSelf:vn,dispatchers:Zt}}function Wt(dt,Lt,qt){var Ze=(0,Se.A)(dt),et=Vt(Ze.componentMainType,Ze.componentIndex,Ze.componentHighDownName,qt),$e=et.dispatchers;$e?(et.focusSelf&&Tt(Ze.componentMainType,Ze.componentIndex,qt),(0,le.each)($e,function(Zt){return fe(Zt,Lt)})):(st(Ze.seriesIndex,Ze.focus,Ze.blurScope,qt),"self"===Ze.focus&&Tt(Ze.componentMainType,Ze.componentIndex,qt),fe(dt,Lt))}function kt(dt,Lt,qt){tt(qt);var Ze=(0,Se.A)(dt),et=Vt(Ze.componentMainType,Ze.componentIndex,Ze.componentHighDownName,qt).dispatchers;et?(0,le.each)(et,function($e){return ge($e,Lt)}):ge(dt,Lt)}function fn(dt,Lt,qt){if(wt(Lt)){var Ze=Lt.dataType,et=dt.getData(Ze),$e=(0,_e.gO)(et,Lt);(0,le.isArray)($e)||($e=[$e]),dt[Lt.type===re?"toggleSelect":Lt.type===q?"select":"unselect"]($e,Ze)}}function wn(dt){var Lt=dt.getAllData();(0,le.each)(Lt,function(qt){var et=qt.type;qt.data.eachItemGraphicEl(function($e,mt){dt.isSelected(mt,et)?Ve($e):ze($e)})})}function sr(dt){var Lt=[];return dt.eachSeries(function(qt){var Ze=qt.getAllData();(0,le.each)(Ze,function(et){var mt=et.type,Zt=qt.getSelectedDataIndices();if(Zt.length>0){var vn={dataIndex:Zt,seriesIndex:qt.seriesIndex};null!=mt&&(vn.dataType=mt),Lt.push(vn)}})}),Lt}function Xn(dt,Lt,qt){jn(dt,!0),A(dt,xe),Qt(dt,Lt,qt)}function rr(dt,Lt,qt,Ze){Ze?function pr(dt){jn(dt,!1)}(dt):Xn(dt,Lt,qt)}function Qt(dt,Lt,qt){var Ze=(0,Se.A)(dt);null!=Lt?(Ze.focus=Lt,Ze.blurScope=qt):Ze.focus&&(Ze.focus=null)}var un=["emphasis","blur","select"],Pn={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function Nn(dt,Lt,qt,Ze){qt=qt||"itemStyle";for(var et=0;et<un.length;et++){var $e=un[et],mt=Lt.getModel([$e,qt]);dt.ensureState($e).style=Ze?Ze(mt):mt[Pn[qt]]()}}function jn(dt,Lt){var qt=!1===Lt,Ze=dt;dt.highDownSilentOnTouch&&(Ze.__highDownSilentOnTouch=dt.highDownSilentOnTouch),(!qt||Ze.__highDownDispatcher)&&(Ze.__highByOuter=Ze.__highByOuter||0,Ze.__highDownDispatcher=!qt)}function xr(dt){return!(!dt||!dt.__highDownDispatcher)}function gr(dt,Lt,qt){var Ze=(0,Se.A)(dt);Ze.componentMainType=Lt.mainType,Ze.componentIndex=Lt.componentIndex,Ze.componentHighDownName=qt}function Je(dt){var Lt=we[dt];return null==Lt&&be<=32&&(Lt=we[dt]=be++),Lt}function wt(dt){var Lt=dt.type;return Lt===q||Lt===H||Lt===re}function nn(dt){var Lt=dt.type;return Lt===b||Lt===Y}function Xt(dt){var Lt=de(dt);Lt.normalFill=dt.style.fill,Lt.normalStroke=dt.style.stroke;var qt=dt.states.select||{};Lt.selectFill=qt.style&&qt.style.fill||null,Lt.selectStroke=qt.style&&qt.style.stroke||null}},2063:(Ut,rt,z)=>{z.d(rt,{Cq:()=>re,Pw:()=>J,th:()=>q,zp:()=>H});var le=z(9496),Se=z(5489),ce=z(1995),_e=z(7952),ye=z(421),be=z(6442),we=z(468),de=z(9733),j=z(10),$=Se.ZP.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(W,X){var K=X.cx,B=X.cy,O=X.width/2,D=X.height/2;W.moveTo(K,B-D),W.lineTo(K+O,B+D),W.lineTo(K-O,B+D),W.closePath()}}),G=Se.ZP.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(W,X){var K=X.cx,B=X.cy,O=X.width/2,D=X.height/2;W.moveTo(K,B-D),W.lineTo(K+O,B),W.lineTo(K,B+D),W.lineTo(K-O,B),W.closePath()}}),Z=Se.ZP.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(W,X){var K=X.x,B=X.y,O=X.width/5*3,D=Math.max(O,X.height),P=O/2,I=P*P/(D-P),T=B-D+P+I,A=Math.asin(I/P),L=Math.cos(A)*P,N=Math.sin(A),ie=Math.cos(A),oe=.6*P,ae=.7*P;W.moveTo(K-L,T+I),W.arc(K,T,P,Math.PI-A,2*Math.PI+A),W.bezierCurveTo(K+L-N*oe,T+I+ie*oe,K,B-ae,K,B),W.bezierCurveTo(K,B-ae,K-L+N*oe,T+I+ie*oe,K-L,T+I),W.closePath()}}),te=Se.ZP.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(W,X){var K=X.height,O=X.x,D=X.y,P=X.width/3*2;W.moveTo(O,D),W.lineTo(O+P,D+K),W.lineTo(O,D+K/4*3),W.lineTo(O-P,D+K),W.lineTo(O,D),W.closePath()}}),Q={line:function(W,X,K,B,O){O.x1=W,O.y1=X+B/2,O.x2=W+K,O.y2=X+B/2},rect:function(W,X,K,B,O){O.x=W,O.y=X,O.width=K,O.height=B},roundRect:function(W,X,K,B,O){O.x=W,O.y=X,O.width=K,O.height=B,O.r=Math.min(K,B)/4},square:function(W,X,K,B,O){var D=Math.min(K,B);O.x=W,O.y=X,O.width=D,O.height=D},circle:function(W,X,K,B,O){O.cx=W+K/2,O.cy=X+B/2,O.r=Math.min(K,B)/2},diamond:function(W,X,K,B,O){O.cx=W+K/2,O.cy=X+B/2,O.width=K,O.height=B},pin:function(W,X,K,B,O){O.x=W+K/2,O.y=X+B/2,O.width=K,O.height=B},arrow:function(W,X,K,B,O){O.x=W+K/2,O.y=X+B/2,O.width=K,O.height=B},triangle:function(W,X,K,B,O){O.cx=W+K/2,O.cy=X+B/2,O.width=K,O.height=B}},J={};(0,le.each)({line:ce.Z,rect:_e.Z,roundRect:_e.Z,square:_e.Z,circle:ye.Z,diamond:G,pin:Z,arrow:te,triangle:$},function(W,X){J[X]=new W});var b=Se.ZP.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(W,X,K){var B=(0,de.wI)(W,X,K),O=this.shape;return O&&"pin"===O.symbolType&&"inside"===X.position&&(B.y=K.y+.4*K.height),B},buildPath:function(W,X,K){var B=X.symbolType;if("none"!==B){var O=J[B];O||(O=J[B="rect"]),Q[B](X.x,X.y,X.width,X.height,O.shape),O.buildPath(W,O.shape,K)}}});function Y(W,X){if("image"!==this.type){var K=this.style;this.__isEmptyBrush?(K.stroke=W,K.fill=X||"#fff",K.lineWidth=2):"line"===this.shape.symbolType?K.stroke=W:K.fill=W,this.markRedraw()}}function q(W,X,K,B,O,D,P){var T,I=0===W.indexOf("empty");return I&&(W=W.substr(5,1).toLowerCase()+W.substr(6)),(T=0===W.indexOf("image://")?be.makeImage(W.slice(8),new we.Z(X,K,B,O),P?"center":"cover"):0===W.indexOf("path://")?be.makePath(W.slice(7),{},new we.Z(X,K,B,O),P?"center":"cover"):new b({shape:{symbolType:W,x:X,y:K,width:B,height:O}})).__isEmptyBrush=I,T.setColor=Y,D&&T.setColor(D),T}function H(W){return(0,le.isArray)(W)||(W=[+W,+W]),[W[0]||0,W[1]||0]}function re(W,X){if(null!=W)return(0,le.isArray)(W)||(W=[W,W]),[(0,j.GM)(W[0],X[0])||0,(0,j.GM)((0,le.retrieve2)(W[1],W[0]),X[1])||0]}},4658:(Ut,rt,z)=>{z.d(rt,{P2:()=>_e,T9:()=>ye,ZH:()=>be});var le="\0__throttleOriginMethod",Se="\0__throttleRate",ce="\0__throttleType";function _e(we,de,j){var $,ee,Q,J,b,G=0,Z=0,te=null;function Y(){Z=(new Date).getTime(),te=null,we.apply(Q,J||[])}de=de||0;var q=function(){for(var H=[],re=0;re<arguments.length;re++)H[re]=arguments[re];$=(new Date).getTime(),Q=this,J=H;var W=b||de,X=b||j;b=null,ee=$-(X?G:Z)-W,clearTimeout(te),X?te=setTimeout(Y,W):ee>=0?Y():te=setTimeout(Y,-ee),G=$};return q.clear=function(){te&&(clearTimeout(te),te=null)},q.debounceNextCall=function(H){b=H},q}function ye(we,de,j,$){var G=we[de];if(G){var Z=G[le]||G;if(G[Se]!==j||G[ce]!==$){if(null==j||!$)return we[de]=Z;(G=we[de]=_e(Z,j,"debounce"===$))[le]=Z,G[ce]=$,G[Se]=j}return G}}function be(we,de){var j=we[de];j&&j[le]&&(j.clear&&j.clear(),we[de]=j[le])}},7530:(Ut,rt,z)=>{z.d(rt,{$K:()=>b,CW:()=>K,En:()=>N,FW:()=>ee,MV:()=>P,P5:()=>j,RZ:()=>I,Tj:()=>J,V8:()=>Z,WT:()=>ye,WU:()=>q,Wp:()=>O,cb:()=>ae,dV:()=>we,eN:()=>ie,f5:()=>L,fn:()=>D,k7:()=>H,q5:()=>W,rM:()=>oe,s2:()=>de,sx:()=>X,vh:()=>A,vk:()=>Q,xC:()=>Y,xL:()=>T,xz:()=>B,yR:()=>be});var le=z(9496),Se=z(10),ce=z(7772),_e=z(1363),ye=1e3,be=60*ye,we=60*be,de=24*we,j=365*de,$={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},G="{yyyy}-{MM}-{dd}",Z={year:"{yyyy}",month:"{yyyy}-{MM}",day:G,hour:G+" "+$.hour,minute:G+" "+$.minute,second:G+" "+$.second,millisecond:$.none},te=["year","month","day","hour","minute","second","millisecond"],ee=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function Q(he,se){return"0000".substr(0,se-(he+="").length)+he}function J(he){switch(he){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return he}}function b(he){return he===J(he)}function Y(he){switch(he){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function q(he,se,xe,fe){var ge=Se.sG(he),Ce=ge[X(xe)](),Te=ge[K(xe)]()+1,Ie=Math.floor((Te-1)/3)+1,Ee=ge[B(xe)](),Ve=ge["get"+(xe?"UTC":"")+"Day"](),ze=ge[O(xe)](),We=(ze-1)%12+1,tt=ge[D(xe)](),st=ge[P(xe)](),Tt=ge[I(xe)](),At=ze>=12?"pm":"am",Vt=At.toUpperCase(),kt=(fe instanceof _e.Z?fe:(0,ce.G8)(fe||ce.sO)||(0,ce.Li)()).getModel("time"),fn=kt.get("month"),wn=kt.get("monthAbbr"),sr=kt.get("dayOfWeek"),Xn=kt.get("dayOfWeekAbbr");return(se||"").replace(/{a}/g,At+"").replace(/{A}/g,Vt+"").replace(/{yyyy}/g,Ce+"").replace(/{yy}/g,Q(Ce%100+"",2)).replace(/{Q}/g,Ie+"").replace(/{MMMM}/g,fn[Te-1]).replace(/{MMM}/g,wn[Te-1]).replace(/{MM}/g,Q(Te,2)).replace(/{M}/g,Te+"").replace(/{dd}/g,Q(Ee,2)).replace(/{d}/g,Ee+"").replace(/{eeee}/g,sr[Ve]).replace(/{ee}/g,Xn[Ve]).replace(/{e}/g,Ve+"").replace(/{HH}/g,Q(ze,2)).replace(/{H}/g,ze+"").replace(/{hh}/g,Q(We+"",2)).replace(/{h}/g,We+"").replace(/{mm}/g,Q(tt,2)).replace(/{m}/g,tt+"").replace(/{ss}/g,Q(st,2)).replace(/{s}/g,st+"").replace(/{SSS}/g,Q(Tt,3)).replace(/{S}/g,Tt+"")}function H(he,se,xe,fe,ge){var Ce=null;if(le.isString(xe))Ce=xe;else if(le.isFunction(xe))Ce=xe(he.value,se,{level:he.level});else{var Te=le.extend({},$);if(he.level>0)for(var Ie=0;Ie<te.length;++Ie)Te[te[Ie]]="{primary|"+Te[te[Ie]]+"}";var Ee=xe?!1===xe.inherit?xe:le.defaults(xe,Te):Te,Ve=re(he.value,ge);if(Ee[Ve])Ce=Ee[Ve];else if(Ee.inherit){for(Ie=ee.indexOf(Ve)-1;Ie>=0;--Ie)if(Ee[Ve]){Ce=Ee[Ve];break}Ce=Ce||Te.none}if(le.isArray(Ce)){var We=null==he.level?0:he.level>=0?he.level:Ce.length+he.level;Ce=Ce[We=Math.min(We,Ce.length-1)]}}return q(new Date(he.value),Ce,ge,fe)}function re(he,se){var xe=Se.sG(he),fe=xe[K(se)]()+1,ge=xe[B(se)](),Ce=xe[O(se)](),Te=xe[D(se)](),Ie=xe[P(se)](),Ve=0===xe[I(se)](),ze=Ve&&0===Ie,We=ze&&0===Te,tt=We&&0===Ce,st=tt&&1===ge;return st&&1===fe?"year":st?"month":tt?"day":We?"hour":ze?"minute":Ve?"second":"millisecond"}function W(he,se,xe){var fe=le.isNumber(he)?Se.sG(he):he;switch(se=se||re(he,xe)){case"year":return fe[X(xe)]();case"half-year":return fe[K(xe)]()>=6?1:0;case"quarter":return Math.floor((fe[K(xe)]()+1)/4);case"month":return fe[K(xe)]();case"day":return fe[B(xe)]();case"half-day":return fe[O(xe)]()/24;case"hour":return fe[O(xe)]();case"minute":return fe[D(xe)]();case"second":return fe[P(xe)]();case"millisecond":return fe[I(xe)]()}}function X(he){return he?"getUTCFullYear":"getFullYear"}function K(he){return he?"getUTCMonth":"getMonth"}function B(he){return he?"getUTCDate":"getDate"}function O(he){return he?"getUTCHours":"getHours"}function D(he){return he?"getUTCMinutes":"getMinutes"}function P(he){return he?"getUTCSeconds":"getSeconds"}function I(he){return he?"getUTCMilliseconds":"getMilliseconds"}function T(he){return he?"setUTCFullYear":"setFullYear"}function A(he){return he?"setUTCMonth":"setMonth"}function L(he){return he?"setUTCDate":"setDate"}function N(he){return he?"setUTCHours":"setHours"}function ie(he){return he?"setUTCMinutes":"setMinutes"}function oe(he){return he?"setUTCSeconds":"setSeconds"}function ae(he){return he?"setUTCMilliseconds":"setMilliseconds"}},678:(Ut,rt,z)=>{z.d(rt,{J5:()=>we,RA:()=>de,Wc:()=>$,XD:()=>_e,cy:()=>ce,f7:()=>Se,fY:()=>j,hL:()=>be,qb:()=>ye});var Se=(0,z(9496).createHashMap)(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),ce="original",_e="arrayRows",ye="objectRows",be="keyedColumns",we="typedArray",de="unknown",j="column",$="row"},545:(Ut,rt,z)=>{z.d(rt,{o:()=>_e});var le=z(9496),Se=typeof Float32Array<"u",ce=Se?Float32Array:Array;function _e(ye){return(0,le.isArray)(ye)?Se?new Float32Array(ye):ye:new ce(ye)}},7136:(Ut,rt,z)=>{z.d(rt,{Z:()=>Y});var le=z(9496),Se=z(189),ce=z(102),_e=z(9358),ye=z(2846),be=z(4372),we=z(9466),de=z(4325),j=z(6442),$=ye.Yf(),G=(0,de.Z)(),Z=function(){function q(){this.group=new Se.Z,this.uid=ce.Kr("viewChart"),this.renderTask=(0,we.v)({plan:Q,reset:J}),this.renderTask.context={view:this}}return q.prototype.init=function(H,re){},q.prototype.render=function(H,re,W,X){},q.prototype.highlight=function(H,re,W,X){var K=H.getData(X&&X.dataType);!K||ee(K,X,"emphasis")},q.prototype.downplay=function(H,re,W,X){var K=H.getData(X&&X.dataType);!K||ee(K,X,"normal")},q.prototype.remove=function(H,re){this.group.removeAll()},q.prototype.dispose=function(H,re){},q.prototype.updateView=function(H,re,W,X){this.render(H,re,W,X)},q.prototype.updateLayout=function(H,re,W,X){this.render(H,re,W,X)},q.prototype.updateVisual=function(H,re,W,X){this.render(H,re,W,X)},q.prototype.eachRendered=function(H){(0,j.traverseElements)(this.group,H)},q.markUpdateMethod=function(H,re){$(H).updateMethod=re},q.protoInitialize=void(q.prototype.type="chart"),q}();function te(q,H,re){q&&(0,be.Av)(q)&&("emphasis"===H?be.fD:be.Mh)(q,re)}function ee(q,H,re){var W=ye.gO(q,H),X=H&&null!=H.highlightKey?(0,be.RW)(H.highlightKey):null;null!=W?(0,le.each)(ye.kF(W),function(K){te(q.getItemGraphicEl(K),re,X)}):q.eachItemGraphicEl(function(K){te(K,re,X)})}function Q(q){return G(q.model)}function J(q){var H=q.model,re=q.ecModel,W=q.api,X=q.payload,K=H.pipelineContext.progressiveRender,B=q.view,O=X&&$(X).updateMethod,D=K?"incrementalPrepareRender":O&&B[O]?O:"render";return"render"!==D&&B[D](H,re,W,X),b[D]}_e.dm(Z,["dispose"]),_e.au(Z);var b={incrementalPrepareRender:{progress:function(q,H){H.view.incrementalRender(q,H.model,H.ecModel,H.api,H.payload)}},render:{forceFirstProgress:!0,progress:function(q,H){H.view.render(H.model,H.ecModel,H.api,H.payload)}}};const Y=Z},9314:(Ut,rt,z)=>{z.d(rt,{Z:()=>ye});var le=z(189),Se=z(102),ce=z(9358),_e=function(){function be(){this.group=new le.Z,this.uid=Se.Kr("viewComponent")}return be.prototype.init=function(we,de){},be.prototype.render=function(we,de,j,$){},be.prototype.dispose=function(we,de){},be.prototype.updateView=function(we,de,j,$){},be.prototype.updateLayout=function(we,de,j,$){},be.prototype.updateVisual=function(we,de,j,$){},be.prototype.toggleBlurSeries=function(we,de,j){},be.prototype.eachRendered=function(we){var de=this.group;de&&de.traverse(we)},be}();ce.dm(_e),ce.au(_e);const ye=_e},470:(Ut,rt,z)=>{function le(_e,ye,be){switch(be){case"color":return _e.getItemVisual(ye,"style")[_e.getVisual("drawType")];case"opacity":return _e.getItemVisual(ye,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return _e.getItemVisual(ye,be)}}function Se(_e,ye){switch(ye){case"color":return _e.getVisual("style")[_e.getVisual("drawType")];case"opacity":return _e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return _e.getVisual(ye)}}function ce(_e,ye,be,we){switch(be){case"color":_e.ensureUniqueItemVisual(ye,"style")[_e.getVisual("drawType")]=we,_e.setItemVisual(ye,"colorFromPalette",!1);break;case"opacity":_e.ensureUniqueItemVisual(ye,"style").opacity=we;break;case"symbol":case"symbolSize":case"liftZ":_e.setItemVisual(ye,be,we)}}z.d(rt,{LZ:()=>ce,Or:()=>le,UL:()=>Se})},1580:(Ut,rt,z)=>{z.d(rt,{Z:()=>X});var le=z(4593),Se=z(3945),ce=z(468),_e=z(6735),ye=z(9733),be=z(9496),we=z(9072),de=z(2523),j=z(6839),$="__zr_normal__",G=le.dN.concat(["ignore"]),Z=(0,be.reduce)(le.dN,function(K,B){return K[B]=!0,K},{ignore:!1}),te={},ee=new ce.Z(0,0,0,0),Q=function(){function K(B){this.id=(0,be.guid)(),this.animators=[],this.currentStates=[],this.states={},this._init(B)}return K.prototype._init=function(B){this.attr(B)},K.prototype.drift=function(B,O,D){switch(this.draggable){case"horizontal":O=0;break;case"vertical":B=0}var P=this.transform;P||(P=this.transform=[1,0,0,1,0,0]),P[4]+=B,P[5]+=O,this.decomposeTransform(),this.markRedraw()},K.prototype.beforeUpdate=function(){},K.prototype.afterUpdate=function(){},K.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},K.prototype.updateInnerText=function(B){var O=this._textContent;if(O&&(!O.ignore||B)){this.textConfig||(this.textConfig={});var D=this.textConfig,P=D.local,I=O.innerTransformable,T=void 0,A=void 0,L=!1;I.parent=P?this:null;var N=!1;if(I.copyTransform(O),null!=D.position){var ie=ee;ie.copy(D.layoutRect?D.layoutRect:this.getBoundingRect()),P||ie.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(te,D,ie):(0,ye.wI)(te,D,ie),I.x=te.x,I.y=te.y,T=te.align,A=te.verticalAlign;var oe=D.origin;if(oe&&null!=D.rotation){var ae=void 0,he=void 0;"center"===oe?(ae=.5*ie.width,he=.5*ie.height):(ae=(0,ye.GM)(oe[0],ie.width),he=(0,ye.GM)(oe[1],ie.height)),N=!0,I.originX=-I.x+ae+(P?0:ie.x),I.originY=-I.y+he+(P?0:ie.y)}}null!=D.rotation&&(I.rotation=D.rotation);var se=D.offset;se&&(I.x+=se[0],I.y+=se[1],N||(I.originX=-se[0],I.originY=-se[1]));var xe=D.inside??("string"==typeof D.position&&D.position.indexOf("inside")>=0),fe=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),ge=void 0,Ce=void 0,Te=void 0;xe&&this.canBeInsideText()?(Ce=D.insideStroke,(null==(ge=D.insideFill)||"auto"===ge)&&(ge=this.getInsideTextFill()),(null==Ce||"auto"===Ce)&&(Ce=this.getInsideTextStroke(ge),Te=!0)):(Ce=D.outsideStroke,(null==(ge=D.outsideFill)||"auto"===ge)&&(ge=this.getOutsideFill()),(null==Ce||"auto"===Ce)&&(Ce=this.getOutsideStroke(ge),Te=!0)),((ge=ge||"#000")!==fe.fill||Ce!==fe.stroke||Te!==fe.autoStroke||T!==fe.align||A!==fe.verticalAlign)&&(L=!0,fe.fill=ge,fe.stroke=Ce,fe.autoStroke=Te,fe.align=T,fe.verticalAlign=A,O.setDefaultTextStyle(fe)),O.__dirty|=j.YV,L&&O.dirtyStyle(!0)}},K.prototype.canBeInsideText=function(){return!0},K.prototype.getInsideTextFill=function(){return"#fff"},K.prototype.getInsideTextStroke=function(B){return"#000"},K.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?we.GD:we.vU},K.prototype.getOutsideStroke=function(B){var O=this.__zr&&this.__zr.getBackgroundColor(),D="string"==typeof O&&(0,de.parse)(O);D||(D=[255,255,255,1]);for(var P=D[3],I=this.__zr.isDarkMode(),T=0;T<3;T++)D[T]=D[T]*P+(I?0:255)*(1-P);return D[3]=1,(0,de.stringify)(D,"rgba")},K.prototype.traverse=function(B,O){},K.prototype.attrKV=function(B,O){"textConfig"===B?this.setTextConfig(O):"textContent"===B?this.setTextContent(O):"clipPath"===B?this.setClipPath(O):"extra"===B?(this.extra=this.extra||{},(0,be.extend)(this.extra,O)):this[B]=O},K.prototype.hide=function(){this.ignore=!0,this.markRedraw()},K.prototype.show=function(){this.ignore=!1,this.markRedraw()},K.prototype.attr=function(B,O){if("string"==typeof B)this.attrKV(B,O);else if((0,be.isObject)(B))for(var P=(0,be.keys)(B),I=0;I<P.length;I++){var T=P[I];this.attrKV(T,B[T])}return this.markRedraw(),this},K.prototype.saveCurrentToNormalState=function(B){this._innerSaveToNormal(B);for(var O=this._normalState,D=0;D<this.animators.length;D++){var P=this.animators[D],I=P.__fromStateTransition;if(!(P.getLoop()||I&&I!==$)){var T=P.targetName;P.saveTo(T?O[T]:O)}}},K.prototype._innerSaveToNormal=function(B){var O=this._normalState;O||(O=this._normalState={}),B.textConfig&&!O.textConfig&&(O.textConfig=this.textConfig),this._savePrimaryToNormal(B,O,G)},K.prototype._savePrimaryToNormal=function(B,O,D){for(var P=0;P<D.length;P++){var I=D[P];null!=B[I]&&!(I in O)&&(O[I]=this[I])}},K.prototype.hasState=function(){return this.currentStates.length>0},K.prototype.getState=function(B){return this.states[B]},K.prototype.ensureState=function(B){var O=this.states;return O[B]||(O[B]={}),O[B]},K.prototype.clearStates=function(B){this.useState($,!1,B)},K.prototype.useState=function(B,O,D,P){var I=B===$;if(this.hasState()||!I){var A=this.currentStates,L=this.stateTransition;if(!((0,be.indexOf)(A,B)>=0)||!O&&1!==A.length){var N;if(this.stateProxy&&!I&&(N=this.stateProxy(B)),N||(N=this.states&&this.states[B]),!N&&!I)return void(0,be.logError)("State "+B+" not exists.");I||this.saveCurrentToNormalState(N);var ie=!!(N&&N.hoverLayer||P);ie&&this._toggleHoverLayerFlag(!0),this._applyStateObj(B,N,this._normalState,O,!D&&!this.__inHover&&L&&L.duration>0,L);var oe=this._textContent,ae=this._textGuide;return oe&&oe.useState(B,O,D,ie),ae&&ae.useState(B,O,D,ie),I?(this.currentStates=[],this._normalState={}):O?this.currentStates.push(B):this.currentStates=[B],this._updateAnimationTargets(),this.markRedraw(),!ie&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~j.YV),N}}},K.prototype.useStates=function(B,O,D){if(B.length){var P=[],I=this.currentStates,T=B.length,A=T===I.length;if(A)for(var L=0;L<T;L++)if(B[L]!==I[L]){A=!1;break}if(A)return;for(L=0;L<T;L++){var N=B[L],ie=void 0;this.stateProxy&&(ie=this.stateProxy(N,B)),ie||(ie=this.states[N]),ie&&P.push(ie)}var oe=P[T-1],ae=!!(oe&&oe.hoverLayer||D);ae&&this._toggleHoverLayerFlag(!0);var he=this._mergeStates(P),se=this.stateTransition;this.saveCurrentToNormalState(he),this._applyStateObj(B.join(","),he,this._normalState,!1,!O&&!this.__inHover&&se&&se.duration>0,se);var xe=this._textContent,fe=this._textGuide;xe&&xe.useStates(B,O,ae),fe&&fe.useStates(B,O,ae),this._updateAnimationTargets(),this.currentStates=B.slice(),this.markRedraw(),!ae&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~j.YV)}else this.clearStates()},K.prototype.isSilent=function(){for(var B=this.silent,O=this.parent;!B&&O;){if(O.silent){B=!0;break}O=O.parent}return B},K.prototype._updateAnimationTargets=function(){for(var B=0;B<this.animators.length;B++){var O=this.animators[B];O.targetName&&O.changeTarget(this[O.targetName])}},K.prototype.removeState=function(B){var O=(0,be.indexOf)(this.currentStates,B);if(O>=0){var D=this.currentStates.slice();D.splice(O,1),this.useStates(D)}},K.prototype.replaceState=function(B,O,D){var P=this.currentStates.slice(),I=(0,be.indexOf)(P,B),T=(0,be.indexOf)(P,O)>=0;I>=0?T?P.splice(I,1):P[I]=O:D&&!T&&P.push(O),this.useStates(P)},K.prototype.toggleState=function(B,O){O?this.useState(B,!0):this.removeState(B)},K.prototype._mergeStates=function(B){for(var D,O={},P=0;P<B.length;P++){var I=B[P];(0,be.extend)(O,I),I.textConfig&&(0,be.extend)(D=D||{},I.textConfig)}return D&&(O.textConfig=D),O},K.prototype._applyStateObj=function(B,O,D,P,I,T){var A=!(O&&P);O&&O.textConfig?(this.textConfig=(0,be.extend)({},P?this.textConfig:D.textConfig),(0,be.extend)(this.textConfig,O.textConfig)):A&&D.textConfig&&(this.textConfig=D.textConfig);for(var L={},N=!1,ie=0;ie<G.length;ie++){var oe=G[ie],ae=I&&Z[oe];O&&null!=O[oe]?ae?(N=!0,L[oe]=O[oe]):this[oe]=O[oe]:A&&null!=D[oe]&&(ae?(N=!0,L[oe]=D[oe]):this[oe]=D[oe])}if(!I)for(ie=0;ie<this.animators.length;ie++){var he=this.animators[ie],se=he.targetName;he.getLoop()||he.__changeFinalValue(se?(O||D)[se]:O||D)}N&&this._transitionState(B,L,T)},K.prototype._attachComponent=function(B){if((!B.__zr||B.__hostTarget)&&B!==this){var O=this.__zr;O&&B.addSelfToZr(O),B.__zr=O,B.__hostTarget=this}},K.prototype._detachComponent=function(B){B.__zr&&B.removeSelfFromZr(B.__zr),B.__zr=null,B.__hostTarget=null},K.prototype.getClipPath=function(){return this._clipPath},K.prototype.setClipPath=function(B){this._clipPath&&this._clipPath!==B&&this.removeClipPath(),this._attachComponent(B),this._clipPath=B,this.markRedraw()},K.prototype.removeClipPath=function(){var B=this._clipPath;B&&(this._detachComponent(B),this._clipPath=null,this.markRedraw())},K.prototype.getTextContent=function(){return this._textContent},K.prototype.setTextContent=function(B){var O=this._textContent;O!==B&&(O&&O!==B&&this.removeTextContent(),B.innerTransformable=new le.ZP,this._attachComponent(B),this._textContent=B,this.markRedraw())},K.prototype.setTextConfig=function(B){this.textConfig||(this.textConfig={}),(0,be.extend)(this.textConfig,B),this.markRedraw()},K.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},K.prototype.removeTextContent=function(){var B=this._textContent;B&&(B.innerTransformable=null,this._detachComponent(B),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},K.prototype.getTextGuideLine=function(){return this._textGuide},K.prototype.setTextGuideLine=function(B){this._textGuide&&this._textGuide!==B&&this.removeTextGuideLine(),this._attachComponent(B),this._textGuide=B,this.markRedraw()},K.prototype.removeTextGuideLine=function(){var B=this._textGuide;B&&(this._detachComponent(B),this._textGuide=null,this.markRedraw())},K.prototype.markRedraw=function(){this.__dirty|=j.YV;var B=this.__zr;B&&(this.__inHover?B.refreshHover():B.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},K.prototype.dirty=function(){this.markRedraw()},K.prototype._toggleHoverLayerFlag=function(B){this.__inHover=B;var O=this._textContent,D=this._textGuide;O&&(O.__inHover=B),D&&(D.__inHover=B)},K.prototype.addSelfToZr=function(B){if(this.__zr!==B){this.__zr=B;var O=this.animators;if(O)for(var D=0;D<O.length;D++)B.animation.addAnimator(O[D]);this._clipPath&&this._clipPath.addSelfToZr(B),this._textContent&&this._textContent.addSelfToZr(B),this._textGuide&&this._textGuide.addSelfToZr(B)}},K.prototype.removeSelfFromZr=function(B){if(this.__zr){this.__zr=null;var O=this.animators;if(O)for(var D=0;D<O.length;D++)B.animation.removeAnimator(O[D]);this._clipPath&&this._clipPath.removeSelfFromZr(B),this._textContent&&this._textContent.removeSelfFromZr(B),this._textGuide&&this._textGuide.removeSelfFromZr(B)}},K.prototype.animate=function(B,O,D){var I=new Se.Z(B?this[B]:this,O,D);return B&&(I.targetName=B),this.addAnimator(I,B),I},K.prototype.addAnimator=function(B,O){var D=this.__zr,P=this;B.during(function(){P.updateDuringAnimation(O)}).done(function(){var I=P.animators,T=(0,be.indexOf)(I,B);T>=0&&I.splice(T,1)}),this.animators.push(B),D&&D.animation.addAnimator(B),D&&D.wakeUp()},K.prototype.updateDuringAnimation=function(B){this.markRedraw()},K.prototype.stopAnimation=function(B,O){for(var D=this.animators,P=D.length,I=[],T=0;T<P;T++){var A=D[T];B&&B!==A.scope?I.push(A):A.stop(O)}return this.animators=I,this},K.prototype.animateTo=function(B,O,D){J(this,B,O,D)},K.prototype.animateFrom=function(B,O,D){J(this,B,O,D,!0)},K.prototype._transitionState=function(B,O,D,P){for(var I=J(this,O,D,P),T=0;T<I.length;T++)I[T].__fromStateTransition=B},K.prototype.getBoundingRect=function(){return null},K.prototype.getPaintRect=function(){return null},K.initDefaultProps=function(){var B=K.prototype;function P(I,T,A,L){function N(ie,oe){Object.defineProperty(oe,0,{get:function(){return ie[A]},set:function(ae){ie[A]=ae}}),Object.defineProperty(oe,1,{get:function(){return ie[L]},set:function(ae){ie[L]=ae}})}Object.defineProperty(B,I,{get:function(){return this[T]||N(this,this[T]=[]),this[T]},set:function(ie){this[A]=ie[0],this[L]=ie[1],this[T]=ie,N(this,ie)}})}B.type="element",B.name="",B.ignore=B.silent=B.isGroup=B.draggable=B.dragging=B.ignoreClip=B.__inHover=!1,B.__dirty=j.YV,Object.defineProperty&&(P("position","_legacyPos","x","y"),P("scale","_legacyScale","scaleX","scaleY"),P("origin","_legacyOrigin","originX","originY"))}(),K}();function J(K,B,O,D,P){var I=[];W(K,"",K,B,O=O||{},D,I,P);var T=I.length,A=!1,L=O.done,N=O.aborted,ie=function(){A=!0,--T<=0&&(A?L&&L():N&&N())},oe=function(){--T<=0&&(A?L&&L():N&&N())};T||L&&L(),I.length>0&&O.during&&I[0].during(function(se,xe){O.during(xe)});for(var ae=0;ae<I.length;ae++){var he=I[ae];ie&&he.done(ie),oe&&he.aborted(oe),O.force&&he.duration(O.duration),he.start(O.easing)}return I}function b(K,B,O){for(var D=0;D<O;D++)K[D]=B[D]}function q(K,B,O){if((0,be.isArrayLike)(B[O]))if((0,be.isArrayLike)(K[O])||(K[O]=[]),(0,be.isTypedArray)(B[O])){var D=B[O].length;K[O].length!==D&&(K[O]=new B[O].constructor(D),b(K[O],B[O],D))}else{var P=B[O],I=K[O],T=P.length;if(function Y(K){return(0,be.isArrayLike)(K[0])}(P))for(var A=P[0].length,L=0;L<T;L++)I[L]?b(I[L],P[L],A):I[L]=Array.prototype.slice.call(P[L]);else b(I,P,T);I.length=P.length}else K[O]=B[O]}function W(K,B,O,D,P,I,T,A){for(var L=(0,be.keys)(D),N=P.duration,ie=P.delay,oe=P.additive,ae=P.setToFinal,he=!(0,be.isObject)(I),se=K.animators,xe=[],fe=0;fe<L.length;fe++){var Ce=D[ge=L[fe]];if(null!=Ce&&null!=O[ge]&&(he||I[ge]))if(!(0,be.isObject)(Ce)||(0,be.isArrayLike)(Ce)||(0,be.isGradientObject)(Ce))xe.push(ge);else{if(B){A||(O[ge]=Ce,K.updateDuringAnimation(B));continue}W(K,ge,O[ge],Ce,P,I&&I[ge],T,A)}else A||(O[ge]=Ce,K.updateDuringAnimation(B),xe.push(ge))}var Te=xe.length;if(!oe&&Te)for(var Ie=0;Ie<se.length;Ie++)if((Ee=se[Ie]).targetName===B&&Ee.stopTracks(xe)){var ze=(0,be.indexOf)(se,Ee);se.splice(ze,1)}if(P.force||(xe=(0,be.filter)(xe,function(Tt){return!function H(K,B){return K===B||(0,be.isArrayLike)(K)&&(0,be.isArrayLike)(B)&&function re(K,B){var O=K.length;if(O!==B.length)return!1;for(var D=0;D<O;D++)if(K[D]!==B[D])return!1;return!0}(K,B)}(D[Tt],O[Tt])}),Te=xe.length),Te>0||P.force&&!T.length){var Ee,We=void 0,tt=void 0,st=void 0;if(A)for(tt={},ae&&(We={}),Ie=0;Ie<Te;Ie++)tt[ge=xe[Ie]]=O[ge],ae?We[ge]=D[ge]:O[ge]=D[ge];else if(ae)for(st={},Ie=0;Ie<Te;Ie++){var ge;st[ge=xe[Ie]]=(0,Se.V)(O[ge]),q(O,D,ge)}(Ee=new Se.Z(O,!1,!1,oe?(0,be.filter)(se,function(At){return At.targetName===B}):null)).targetName=B,P.scope&&(Ee.scope=P.scope),ae&&We&&Ee.whenWithKeys(0,We,xe),st&&Ee.whenWithKeys(0,st,xe),Ee.whenWithKeys(N??500,A?tt:D,xe).delay(ie||0),K.addAnimator(Ee,B),T.push(Ee)}}(0,be.mixin)(Q,_e.Z),(0,be.mixin)(Q,le.ZP);const X=Q},3945:(Ut,rt,z)=>{z.d(rt,{V:()=>b,Z:()=>L});var le={linear:function(N){return N},quadraticIn:function(N){return N*N},quadraticOut:function(N){return N*(2-N)},quadraticInOut:function(N){return(N*=2)<1?.5*N*N:-.5*(--N*(N-2)-1)},cubicIn:function(N){return N*N*N},cubicOut:function(N){return--N*N*N+1},cubicInOut:function(N){return(N*=2)<1?.5*N*N*N:.5*((N-=2)*N*N+2)},quarticIn:function(N){return N*N*N*N},quarticOut:function(N){return 1- --N*N*N*N},quarticInOut:function(N){return(N*=2)<1?.5*N*N*N*N:-.5*((N-=2)*N*N*N-2)},quinticIn:function(N){return N*N*N*N*N},quinticOut:function(N){return--N*N*N*N*N+1},quinticInOut:function(N){return(N*=2)<1?.5*N*N*N*N*N:.5*((N-=2)*N*N*N*N+2)},sinusoidalIn:function(N){return 1-Math.cos(N*Math.PI/2)},sinusoidalOut:function(N){return Math.sin(N*Math.PI/2)},sinusoidalInOut:function(N){return.5*(1-Math.cos(Math.PI*N))},exponentialIn:function(N){return 0===N?0:Math.pow(1024,N-1)},exponentialOut:function(N){return 1===N?1:1-Math.pow(2,-10*N)},exponentialInOut:function(N){return 0===N?0:1===N?1:(N*=2)<1?.5*Math.pow(1024,N-1):.5*(2-Math.pow(2,-10*(N-1)))},circularIn:function(N){return 1-Math.sqrt(1-N*N)},circularOut:function(N){return Math.sqrt(1- --N*N)},circularInOut:function(N){return(N*=2)<1?-.5*(Math.sqrt(1-N*N)-1):.5*(Math.sqrt(1-(N-=2)*N)+1)},elasticIn:function(N){var ie,oe=.1;return 0===N?0:1===N?1:(!oe||oe<1?(oe=1,ie=.1):ie=.4*Math.asin(1/oe)/(2*Math.PI),-oe*Math.pow(2,10*(N-=1))*Math.sin((N-ie)*(2*Math.PI)/.4))},elasticOut:function(N){var ie,oe=.1;return 0===N?0:1===N?1:(!oe||oe<1?(oe=1,ie=.1):ie=.4*Math.asin(1/oe)/(2*Math.PI),oe*Math.pow(2,-10*N)*Math.sin((N-ie)*(2*Math.PI)/.4)+1)},elasticInOut:function(N){var ie,oe=.1;return 0===N?0:1===N?1:(!oe||oe<1?(oe=1,ie=.1):ie=.4*Math.asin(1/oe)/(2*Math.PI),(N*=2)<1?oe*Math.pow(2,10*(N-=1))*Math.sin((N-ie)*(2*Math.PI)/.4)*-.5:oe*Math.pow(2,-10*(N-=1))*Math.sin((N-ie)*(2*Math.PI)/.4)*.5+1)},backIn:function(N){return N*N*(2.70158*N-1.70158)},backOut:function(N){return--N*N*(2.70158*N+1.70158)+1},backInOut:function(N){var ie=2.5949095;return(N*=2)<1?N*N*((ie+1)*N-ie)*.5:.5*((N-=2)*N*((ie+1)*N+ie)+2)},bounceIn:function(N){return 1-le.bounceOut(1-N)},bounceOut:function(N){return N<1/2.75?7.5625*N*N:N<2/2.75?7.5625*(N-=1.5/2.75)*N+.75:N<2.5/2.75?7.5625*(N-=2.25/2.75)*N+.9375:7.5625*(N-=2.625/2.75)*N+.984375},bounceInOut:function(N){return N<.5?.5*le.bounceIn(2*N):.5*le.bounceOut(2*N-1)+.5}};const Se=le;var ce=z(9496),_e=z(4902);const be=function(){function N(ie){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=ie.life||1e3,this._delay=ie.delay||0,this.loop=ie.loop||!1,this.onframe=ie.onframe||ce.noop,this.ondestroy=ie.ondestroy||ce.noop,this.onrestart=ie.onrestart||ce.noop,ie.easing&&this.setEasing(ie.easing)}return N.prototype.step=function(ie,oe){if(this._inited||(this._startTime=ie+this._delay,this._inited=!0),!this._paused){var ae=this._life,he=ie-this._startTime-this._pausedTime,se=he/ae;se<0&&(se=0),se=Math.min(se,1);var xe=this.easingFunc,fe=xe?xe(se):se;if(this.onframe(fe),1===se){if(!this.loop)return!0;this._startTime=ie-he%ae,this._pausedTime=0,this.onrestart()}return!1}this._pausedTime+=oe},N.prototype.pause=function(){this._paused=!0},N.prototype.resume=function(){this._paused=!1},N.prototype.setEasing=function(ie){this.easing=ie,this.easingFunc=(0,ce.isFunction)(ie)?ie:Se[ie]||(0,_e.H)(ie)},N}();var we=z(2523),de=z(2738),j=Array.prototype.slice;function $(N,ie,oe){return(ie-N)*oe+N}function G(N,ie,oe,ae){for(var he=ie.length,se=0;se<he;se++)N[se]=$(ie[se],oe[se],ae);return N}function te(N,ie,oe,ae){for(var he=ie.length,se=0;se<he;se++)N[se]=ie[se]+oe[se]*ae;return N}function ee(N,ie,oe,ae){for(var he=ie.length,se=he&&ie[0].length,xe=0;xe<he;xe++){N[xe]||(N[xe]=[]);for(var fe=0;fe<se;fe++)N[xe][fe]=ie[xe][fe]+oe[xe][fe]*ae}return N}function Q(N,ie){for(var oe=N.length,ae=ie.length,he=oe>ae?ie:N,se=Math.min(oe,ae),xe=he[se-1]||{color:[0,0,0,0],offset:0},fe=se;fe<Math.max(oe,ae);fe++)he.push({offset:xe.offset,color:xe.color.slice()})}function J(N,ie,oe){var ae=N,he=ie;if(ae.push&&he.push){var se=ae.length,xe=he.length;if(se!==xe)if(se>xe)ae.length=xe;else for(var ge=se;ge<xe;ge++)ae.push(1===oe?he[ge]:j.call(he[ge]));var Ce=ae[0]&&ae[0].length;for(ge=0;ge<ae.length;ge++)if(1===oe)isNaN(ae[ge])&&(ae[ge]=he[ge]);else for(var Te=0;Te<Ce;Te++)isNaN(ae[ge][Te])&&(ae[ge][Te]=he[ge][Te])}}function b(N){if((0,ce.isArrayLike)(N)){var ie=N.length;if((0,ce.isArrayLike)(N[0])){for(var oe=[],ae=0;ae<ie;ae++)oe.push(j.call(N[ae]));return oe}return j.call(N)}return N}function Y(N){return N[0]=Math.floor(N[0])||0,N[1]=Math.floor(N[1])||0,N[2]=Math.floor(N[2])||0,N[3]=N[3]??1,"rgba("+N.join(",")+")"}function D(N){return 4===N||5===N}function P(N){return 1===N||2===N}var I=[0,0,0,0],T=function(){function N(ie){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=ie}return N.prototype.isFinished=function(){return this._finished},N.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},N.prototype.needsAnimate=function(){return this.keyframes.length>=1},N.prototype.getAdditiveTrack=function(){return this._additiveTrack},N.prototype.addKeyframe=function(ie,oe,ae){this._needsSort=!0;var he=this.keyframes,se=he.length,xe=!1,fe=6,ge=oe;if((0,ce.isArrayLike)(oe)){var Ce=function q(N){return(0,ce.isArrayLike)(N&&N[0])?2:1}(oe);fe=Ce,(1===Ce&&!(0,ce.isNumber)(oe[0])||2===Ce&&!(0,ce.isNumber)(oe[0][0]))&&(xe=!0)}else if((0,ce.isNumber)(oe)&&!(0,ce.eqNaN)(oe))fe=0;else if((0,ce.isString)(oe))if(isNaN(+oe)){var Te=we.parse(oe);Te&&(ge=Te,fe=3)}else fe=0;else if((0,ce.isGradientObject)(oe)){var Ie=(0,ce.extend)({},ge);Ie.colorStops=(0,ce.map)(oe.colorStops,function(Ve){return{offset:Ve.offset,color:we.parse(Ve.color)}}),(0,de.I1)(oe)?fe=4:(0,de.gO)(oe)&&(fe=5),ge=Ie}0===se?this.valType=fe:(fe!==this.valType||6===fe)&&(xe=!0),this.discrete=this.discrete||xe;var Ee={time:ie,value:ge,rawValue:oe,percent:0};return ae&&(Ee.easing=ae,Ee.easingFunc=(0,ce.isFunction)(ae)?ae:Se[ae]||(0,_e.H)(ae)),he.push(Ee),Ee},N.prototype.prepare=function(ie,oe){var ae=this.keyframes;this._needsSort&&ae.sort(function(We,tt){return We.time-tt.time});for(var he=this.valType,se=ae.length,xe=ae[se-1],fe=this.discrete,ge=P(he),Ce=D(he),Te=0;Te<se;Te++){var Ie=ae[Te],Ee=Ie.value,Ve=xe.value;Ie.percent=Ie.time/ie,fe||(ge&&Te!==se-1?J(Ee,Ve,he):Ce&&Q(Ee.colorStops,Ve.colorStops))}if(!fe&&5!==he&&oe&&this.needsAnimate()&&oe.needsAnimate()&&he===oe.valType&&!oe._finished){this._additiveTrack=oe;var ze=ae[0].value;for(Te=0;Te<se;Te++)0===he?ae[Te].additiveValue=ae[Te].value-ze:3===he?ae[Te].additiveValue=te([],ae[Te].value,ze,-1):P(he)&&(ae[Te].additiveValue=1===he?te([],ae[Te].value,ze,-1):ee([],ae[Te].value,ze,-1))}},N.prototype.step=function(ie,oe){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var Te,Ve,ze,ae=null!=this._additiveTrack,he=ae?"additiveValue":"value",se=this.valType,xe=this.keyframes,fe=xe.length,ge=this.propName,Ce=3===se,Ie=this._lastFr,Ee=Math.min;if(1===fe)Ve=ze=xe[0];else{if(oe<0)Te=0;else if(oe<this._lastFrP){for(Te=Ee(Ie+1,fe-1);Te>=0&&!(xe[Te].percent<=oe);Te--);Te=Ee(Te,fe-2)}else{for(Te=Ie;Te<fe&&!(xe[Te].percent>oe);Te++);Te=Ee(Te-1,fe-2)}ze=xe[Te+1],Ve=xe[Te]}if(Ve&&ze){this._lastFr=Te,this._lastFrP=oe;var tt=ze.percent-Ve.percent,st=0===tt?1:Ee((oe-Ve.percent)/tt,1);ze.easingFunc&&(st=ze.easingFunc(st));var Tt=ae?this._additiveValue:Ce?I:ie[ge];if((P(se)||Ce)&&!Tt&&(Tt=this._additiveValue=[]),this.discrete)ie[ge]=st<1?Ve.rawValue:ze.rawValue;else if(P(se))1===se?G(Tt,Ve[he],ze[he],st):function Z(N,ie,oe,ae){for(var he=ie.length,se=he&&ie[0].length,xe=0;xe<he;xe++){N[xe]||(N[xe]=[]);for(var fe=0;fe<se;fe++)N[xe][fe]=$(ie[xe][fe],oe[xe][fe],ae)}}(Tt,Ve[he],ze[he],st);else if(D(se)){var At=Ve[he],Vt=ze[he],Wt=4===se;ie[ge]={type:Wt?"linear":"radial",x:$(At.x,Vt.x,st),y:$(At.y,Vt.y,st),colorStops:(0,ce.map)(At.colorStops,function(fn,wn){var sr=Vt.colorStops[wn];return{offset:$(fn.offset,sr.offset,st),color:Y(G([],fn.color,sr.color,st))}}),global:Vt.global},Wt?(ie[ge].x2=$(At.x2,Vt.x2,st),ie[ge].y2=$(At.y2,Vt.y2,st)):ie[ge].r=$(At.r,Vt.r,st)}else if(Ce)G(Tt,Ve[he],ze[he],st),ae||(ie[ge]=Y(Tt));else{var kt=$(Ve[he],ze[he],st);ae?this._additiveValue=kt:ie[ge]=kt}ae&&this._addToTarget(ie)}}},N.prototype._addToTarget=function(ie){var oe=this.valType,ae=this.propName,he=this._additiveValue;0===oe?ie[ae]=ie[ae]+he:3===oe?(we.parse(ie[ae],I),te(I,I,he,1),ie[ae]=Y(I)):1===oe?te(ie[ae],ie[ae],he,1):2===oe&&ee(ie[ae],ie[ae],he,1)},N}();const L=function(){function N(ie,oe,ae,he){this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=ie,this._loop=oe,oe&&he?(0,ce.logError)("Can' use additive animation on looped animation."):(this._additiveAnimators=he,this._allowDiscrete=ae)}return N.prototype.getMaxTime=function(){return this._maxTime},N.prototype.getDelay=function(){return this._delay},N.prototype.getLoop=function(){return this._loop},N.prototype.getTarget=function(){return this._target},N.prototype.changeTarget=function(ie){this._target=ie},N.prototype.when=function(ie,oe,ae){return this.whenWithKeys(ie,oe,(0,ce.keys)(oe),ae)},N.prototype.whenWithKeys=function(ie,oe,ae,he){for(var se=this._tracks,xe=0;xe<ae.length;xe++){var fe=ae[xe],ge=se[fe];if(!ge){ge=se[fe]=new T(fe);var Ce=void 0,Te=this._getAdditiveTrack(fe);if(Te){var Ie=Te.keyframes,Ee=Ie[Ie.length-1];Ce=Ee&&Ee.value,3===Te.valType&&Ce&&(Ce=Y(Ce))}else Ce=this._target[fe];if(null==Ce)continue;ie>0&&ge.addKeyframe(0,b(Ce),he),this._trackKeys.push(fe)}ge.addKeyframe(ie,b(oe[fe]),he)}return this._maxTime=Math.max(this._maxTime,ie),this},N.prototype.pause=function(){this._clip.pause(),this._paused=!0},N.prototype.resume=function(){this._clip.resume(),this._paused=!1},N.prototype.isPaused=function(){return!!this._paused},N.prototype.duration=function(ie){return this._maxTime=ie,this._force=!0,this},N.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var ie=this._doneCbs;if(ie)for(var oe=ie.length,ae=0;ae<oe;ae++)ie[ae].call(this)},N.prototype._abortedCallback=function(){this._setTracksFinished();var ie=this.animation,oe=this._abortedCbs;if(ie&&ie.removeClip(this._clip),this._clip=null,oe)for(var ae=0;ae<oe.length;ae++)oe[ae].call(this)},N.prototype._setTracksFinished=function(){for(var ie=this._tracks,oe=this._trackKeys,ae=0;ae<oe.length;ae++)ie[oe[ae]].setFinished()},N.prototype._getAdditiveTrack=function(ie){var oe,ae=this._additiveAnimators;if(ae)for(var he=0;he<ae.length;he++){var se=ae[he].getTrack(ie);se&&(oe=se)}return oe},N.prototype.start=function(ie){if(!(this._started>0)){this._started=1;for(var oe=this,ae=[],he=this._maxTime||0,se=0;se<this._trackKeys.length;se++){var xe=this._trackKeys[se],fe=this._tracks[xe],ge=this._getAdditiveTrack(xe),Ce=fe.keyframes,Te=Ce.length;if(fe.prepare(he,ge),fe.needsAnimate())if(!this._allowDiscrete&&fe.discrete){var Ie=Ce[Te-1];Ie&&(oe._target[fe.propName]=Ie.rawValue),fe.setFinished()}else ae.push(fe)}if(ae.length||this._force){var Ee=new be({life:he,loop:this._loop,delay:this._delay||0,onframe:function(Ve){oe._started=2;var ze=oe._additiveAnimators;if(ze){for(var We=!1,tt=0;tt<ze.length;tt++)if(ze[tt]._clip){We=!0;break}We||(oe._additiveAnimators=null)}for(tt=0;tt<ae.length;tt++)ae[tt].step(oe._target,Ve);var st=oe._onframeCbs;if(st)for(tt=0;tt<st.length;tt++)st[tt](oe._target,Ve)},ondestroy:function(){oe._doneCallback()}});this._clip=Ee,this.animation&&this.animation.addClip(Ee),ie&&Ee.setEasing(ie)}else this._doneCallback();return this}},N.prototype.stop=function(ie){this._clip&&(ie&&this._clip.onframe(1),this._abortedCallback())},N.prototype.delay=function(ie){return this._delay=ie,this},N.prototype.during=function(ie){return ie&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(ie)),this},N.prototype.done=function(ie){return ie&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(ie)),this},N.prototype.aborted=function(ie){return ie&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(ie)),this},N.prototype.getClip=function(){return this._clip},N.prototype.getTrack=function(ie){return this._tracks[ie]},N.prototype.getTracks=function(){var ie=this;return(0,ce.map)(this._trackKeys,function(oe){return ie._tracks[oe]})},N.prototype.stopTracks=function(ie,oe){if(!ie.length||!this._clip)return!0;for(var ae=this._tracks,he=this._trackKeys,se=0;se<ie.length;se++){var xe=ae[ie[se]];xe&&!xe.isFinished()&&(oe?xe.step(this._target,1):1===this._started&&xe.step(this._target,0),xe.setFinished())}var fe=!0;for(se=0;se<he.length;se++)if(!ae[he[se]].isFinished()){fe=!1;break}return fe&&this._abortedCallback(),fe},N.prototype.saveTo=function(ie,oe,ae){if(ie){oe=oe||this._trackKeys;for(var he=0;he<oe.length;he++){var se=oe[he],xe=this._tracks[se];if(xe&&!xe.isFinished()){var fe=xe.keyframes,ge=fe[ae?0:fe.length-1];ge&&(ie[se]=b(ge.rawValue))}}}},N.prototype.__changeFinalValue=function(ie,oe){oe=oe||(0,ce.keys)(ie);for(var ae=0;ae<oe.length;ae++){var he=oe[ae],se=this._tracks[he];if(se){var xe=se.keyframes;if(xe.length>1){var fe=xe.pop();se.addKeyframe(fe.time,ie[he]),se.prepare(this._maxTime,se.getAdditiveTrack())}}}},N}()},4902:(Ut,rt,z)=>{z.d(rt,{H:()=>_e});var le=z(7315),Se=z(9496),ce=/cubic-bezier\(([0-9,\.e ]+)\)/;function _e(ye){var be=ye&&ce.exec(ye);if(be){var we=be[1].split(","),de=+(0,Se.trim)(we[0]),j=+(0,Se.trim)(we[1]),$=+(0,Se.trim)(we[2]),G=+(0,Se.trim)(we[3]);if(isNaN(de+j+$+G))return;var Z=[];return function(te){return te<=0?0:te>=1?1:(0,le.kD)(0,de,$,1,te,Z)&&(0,le.af)(0,j,G,1,Z[0])}}}},2415:(Ut,rt,z)=>{z.d(rt,{Z:()=>ce});const ce=z(9420).Z.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(_e){return setTimeout(_e,16)}},8325:(Ut,rt,z)=>{z.d(rt,{a:()=>ce});var le=z(9496);function ce(_e){var ye=_e.style,be=ye.lineDash&&ye.lineWidth>0&&function Se(_e,ye){return _e&&"solid"!==_e&&ye>0?"dashed"===_e?[4*ye,2*ye]:"dotted"===_e?[ye]:(0,le.isNumber)(_e)?[_e]:(0,le.isArray)(_e)?_e:null:null}(ye.lineDash,ye.lineWidth),we=ye.lineDashOffset;if(be){var de=ye.strokeNoScale&&_e.getLineScale?_e.getLineScale():1;de&&1!==de&&(be=(0,le.map)(be,function(j){return j/de}),we/=de)}return[be,we]}},2539:(Ut,rt,z)=>{z.d(rt,{Dm:()=>se,RV:()=>he,RZ:()=>Y});var le=z(2320),Se=z(7899),ce=z(7247),_e=z(1744),ye=z(5489),be=z(6115),we=z(8442),de=z(9496),j=z(8325),$=z(6839),G=z(3691),Z=new Se.Z(!0);function te(fe){var ge=fe.stroke;return!(null==ge||"none"===ge||!(fe.lineWidth>0))}function ee(fe){return"string"==typeof fe&&"none"!==fe}function Q(fe){var ge=fe.fill;return null!=ge&&"none"!==ge}function J(fe,ge){if(null!=ge.fillOpacity&&1!==ge.fillOpacity){var Ce=fe.globalAlpha;fe.globalAlpha=ge.fillOpacity*ge.opacity,fe.fill(),fe.globalAlpha=Ce}else fe.fill()}function b(fe,ge){if(null!=ge.strokeOpacity&&1!==ge.strokeOpacity){var Ce=fe.globalAlpha;fe.globalAlpha=ge.strokeOpacity*ge.opacity,fe.stroke(),fe.globalAlpha=Ce}else fe.stroke()}function Y(fe,ge,Ce){var Te=(0,ce.Gq)(ge.image,ge.__image,Ce);if((0,ce.v5)(Te)){var Ie=fe.createPattern(Te,ge.repeat||"repeat");if("function"==typeof DOMMatrix&&Ie&&Ie.setTransform){var Ee=new DOMMatrix;Ee.translateSelf(ge.x||0,ge.y||0),Ee.rotateSelf(0,0,(ge.rotation||0)*de.RADIAN_TO_DEGREE),Ee.scaleSelf(ge.scaleX||1,ge.scaleY||1),Ie.setTransform(Ee)}return Ie}}var W=["shadowBlur","shadowOffsetX","shadowOffsetY"],X=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function K(fe,ge,Ce,Te,Ie){var Ee=!1;if(!Te&&ge===(Ce=Ce||{}))return!1;if(Te||ge.opacity!==Ce.opacity){oe(fe,Ie),Ee=!0;var Ve=Math.max(Math.min(ge.opacity,1),0);fe.globalAlpha=isNaN(Ve)?le.tj.opacity:Ve}(Te||ge.blend!==Ce.blend)&&(Ee||(oe(fe,Ie),Ee=!0),fe.globalCompositeOperation=ge.blend||le.tj.blend);for(var ze=0;ze<W.length;ze++){var We=W[ze];(Te||ge[We]!==Ce[We])&&(Ee||(oe(fe,Ie),Ee=!0),fe[We]=fe.dpr*(ge[We]||0))}return(Te||ge.shadowColor!==Ce.shadowColor)&&(Ee||(oe(fe,Ie),Ee=!0),fe.shadowColor=ge.shadowColor||le.tj.shadowColor),Ee}function B(fe,ge,Ce,Te,Ie){var Ee=ae(ge,Ie.inHover),Ve=Te?null:Ce&&ae(Ce,Ie.inHover)||{};if(Ee===Ve)return!1;var ze=K(fe,Ee,Ve,Te,Ie);if((Te||Ee.fill!==Ve.fill)&&(ze||(oe(fe,Ie),ze=!0),ee(Ee.fill)&&(fe.fillStyle=Ee.fill)),(Te||Ee.stroke!==Ve.stroke)&&(ze||(oe(fe,Ie),ze=!0),ee(Ee.stroke)&&(fe.strokeStyle=Ee.stroke)),(Te||Ee.opacity!==Ve.opacity)&&(ze||(oe(fe,Ie),ze=!0),fe.globalAlpha=Ee.opacity??1),ge.hasStroke()){var tt=Ee.lineWidth/(Ee.strokeNoScale&&ge.getLineScale?ge.getLineScale():1);fe.lineWidth!==tt&&(ze||(oe(fe,Ie),ze=!0),fe.lineWidth=tt)}for(var st=0;st<X.length;st++){var Tt=X[st],At=Tt[0];(Te||Ee[At]!==Ve[At])&&(ze||(oe(fe,Ie),ze=!0),fe[At]=Ee[At]||Tt[1])}return ze}function D(fe,ge){var Ce=ge.transform,Te=fe.dpr||1;Ce?fe.setTransform(Te*Ce[0],Te*Ce[1],Te*Ce[2],Te*Ce[3],Te*Ce[4],Te*Ce[5]):fe.setTransform(Te,0,0,Te,0,0)}function oe(fe,ge){ge.batchFill&&fe.fill(),ge.batchStroke&&fe.stroke(),ge.batchFill="",ge.batchStroke=""}function ae(fe,ge){return ge&&fe.__hoverStyle||fe.style}function he(fe,ge){se(fe,ge,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function se(fe,ge,Ce,Te){var Ie=ge.transform;if(!ge.shouldBePainted(Ce.viewWidth,Ce.viewHeight,!1,!1))return ge.__dirty&=~$.YV,void(ge.__isRendered=!1);var Ee=ge.__clipPaths,Ve=Ce.prevElClipPaths,ze=!1,We=!1;if((!Ve||(0,_e.cF)(Ee,Ve))&&(Ve&&Ve.length&&(oe(fe,Ce),fe.restore(),We=ze=!0,Ce.prevElClipPaths=null,Ce.allClipped=!1,Ce.prevEl=null),Ee&&Ee.length&&(oe(fe,Ce),fe.save(),function P(fe,ge,Ce){for(var Te=!1,Ie=0;Ie<fe.length;Ie++){var Ee=fe[Ie];Te=Te||Ee.isZeroArea(),D(ge,Ee),ge.beginPath(),Ee.buildPath(ge,Ee.shape),ge.clip()}Ce.allClipped=Te}(Ee,fe,Ce),ze=!0),Ce.prevElClipPaths=Ee),Ce.allClipped)ge.__isRendered=!1;else{ge.beforeBrush&&ge.beforeBrush(),ge.innerBeforeBrush();var tt=Ce.prevEl;tt||(We=ze=!0);var st=ge instanceof ye.ZP&&ge.autoBatch&&function ie(fe){var ge=Q(fe),Ce=te(fe);return!(fe.lineDash||!(+ge^+Ce)||ge&&"string"!=typeof fe.fill||Ce&&"string"!=typeof fe.stroke||fe.strokePercent<1||fe.strokeOpacity<1||fe.fillOpacity<1)}(ge.style);ze||function I(fe,ge){return fe&&ge?fe[0]!==ge[0]||fe[1]!==ge[1]||fe[2]!==ge[2]||fe[3]!==ge[3]||fe[4]!==ge[4]||fe[5]!==ge[5]:!(!fe&&!ge)}(Ie,tt.transform)?(oe(fe,Ce),D(fe,ge)):st||oe(fe,Ce);var Tt=ae(ge,Ce.inHover);ge instanceof ye.ZP?(1!==Ce.lastDrawType&&(We=!0,Ce.lastDrawType=1),B(fe,ge,tt,We,Ce),(!st||!Ce.batchFill&&!Ce.batchStroke)&&fe.beginPath(),function q(fe,ge,Ce,Te){var Ie,Ee=te(Ce),Ve=Q(Ce),ze=Ce.strokePercent,We=ze<1,tt=!ge.path;(!ge.silent||We)&&tt&&ge.createPathProxy();var st=ge.path||Z,Tt=ge.__dirty;if(!Te){var At=Ce.fill,Vt=Ce.stroke,Wt=Ve&&!!At.colorStops,kt=Ee&&!!Vt.colorStops,fn=Ve&&!!At.image,wn=Ee&&!!Vt.image,sr=void 0,Xn=void 0,pr=void 0,rr=void 0,Qt=void 0;(Wt||kt)&&(Qt=ge.getBoundingRect()),Wt&&(sr=Tt?(0,_e.ZF)(fe,At,Qt):ge.__canvasFillGradient,ge.__canvasFillGradient=sr),kt&&(Xn=Tt?(0,_e.ZF)(fe,Vt,Qt):ge.__canvasStrokeGradient,ge.__canvasStrokeGradient=Xn),fn&&(pr=Tt||!ge.__canvasFillPattern?Y(fe,At,ge):ge.__canvasFillPattern,ge.__canvasFillPattern=pr),wn&&(rr=Tt||!ge.__canvasStrokePattern?Y(fe,Vt,ge):ge.__canvasStrokePattern,ge.__canvasStrokePattern=pr),Wt?fe.fillStyle=sr:fn&&(pr?fe.fillStyle=pr:Ve=!1),kt?fe.strokeStyle=Xn:wn&&(rr?fe.strokeStyle=rr:Ee=!1)}var Pn,Nn,un=ge.getGlobalScale();st.setScale(un[0],un[1],ge.segmentIgnoreThreshold),fe.setLineDash&&Ce.lineDash&&(Pn=(Ie=(0,j.a)(ge))[0],Nn=Ie[1]);var jn=!0;(tt||Tt&$.RH)&&(st.setDPR(fe.dpr),We?st.setContext(null):(st.setContext(fe),jn=!1),st.reset(),ge.buildPath(st,ge.shape,Te),st.toStatic(),ge.pathUpdated()),jn&&st.rebuildPath(fe,We?ze:1),Pn&&(fe.setLineDash(Pn),fe.lineDashOffset=Nn),Te||(Ce.strokeFirst?(Ee&&b(fe,Ce),Ve&&J(fe,Ce)):(Ve&&J(fe,Ce),Ee&&b(fe,Ce))),Pn&&fe.setLineDash([])}(fe,ge,Tt,st),st&&(Ce.batchFill=Tt.fill||"",Ce.batchStroke=Tt.stroke||"")):ge instanceof we.Z?(3!==Ce.lastDrawType&&(We=!0,Ce.lastDrawType=3),B(fe,ge,tt,We,Ce),function re(fe,ge,Ce){var Te,Ie=Ce.text;if(null!=Ie&&(Ie+=""),Ie){fe.font=Ce.font||G.Uo,fe.textAlign=Ce.textAlign,fe.textBaseline=Ce.textBaseline;var Ee=void 0,Ve=void 0;fe.setLineDash&&Ce.lineDash&&(Ee=(Te=(0,j.a)(ge))[0],Ve=Te[1]),Ee&&(fe.setLineDash(Ee),fe.lineDashOffset=Ve),Ce.strokeFirst?(te(Ce)&&fe.strokeText(Ie,Ce.x,Ce.y),Q(Ce)&&fe.fillText(Ie,Ce.x,Ce.y)):(Q(Ce)&&fe.fillText(Ie,Ce.x,Ce.y),te(Ce)&&fe.strokeText(Ie,Ce.x,Ce.y)),Ee&&fe.setLineDash([])}}(fe,ge,Tt)):ge instanceof be.ZP?(2!==Ce.lastDrawType&&(We=!0,Ce.lastDrawType=2),function O(fe,ge,Ce,Te,Ie){K(fe,ae(ge,Ie.inHover),Ce&&ae(Ce,Ie.inHover),Te,Ie)}(fe,ge,tt,We,Ce),function H(fe,ge,Ce){var Te=ge.__image=(0,ce.Gq)(Ce.image,ge.__image,ge,ge.onload);if(Te&&(0,ce.v5)(Te)){var Ie=Ce.x||0,Ee=Ce.y||0,Ve=ge.getWidth(),ze=ge.getHeight(),We=Te.width/Te.height;if(null==Ve&&null!=ze?Ve=ze*We:null==ze&&null!=Ve?ze=Ve/We:null==Ve&&null==ze&&(Ve=Te.width,ze=Te.height),Ce.sWidth&&Ce.sHeight)fe.drawImage(Te,tt=Ce.sx||0,st=Ce.sy||0,Ce.sWidth,Ce.sHeight,Ie,Ee,Ve,ze);else if(Ce.sx&&Ce.sy){var tt,st;fe.drawImage(Te,tt=Ce.sx,st=Ce.sy,Ve-tt,ze-st,Ie,Ee,Ve,ze)}else fe.drawImage(Te,Ie,Ee,Ve,ze)}}(fe,ge,Tt)):ge.getTemporalDisplayables&&(4!==Ce.lastDrawType&&(We=!0,Ce.lastDrawType=4),function xe(fe,ge,Ce){var Te=ge.getDisplayables(),Ie=ge.getTemporalDisplayables();fe.save();var Ve,ze,Ee={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:Ce.viewWidth,viewHeight:Ce.viewHeight,inHover:Ce.inHover};for(Ve=ge.getCursor(),ze=Te.length;Ve<ze;Ve++)(We=Te[Ve]).beforeBrush&&We.beforeBrush(),We.innerBeforeBrush(),se(fe,We,Ee,Ve===ze-1),We.innerAfterBrush(),We.afterBrush&&We.afterBrush(),Ee.prevEl=We;for(var tt=0,st=Ie.length;tt<st;tt++){var We;(We=Ie[tt]).beforeBrush&&We.beforeBrush(),We.innerBeforeBrush(),se(fe,We,Ee,tt===st-1),We.innerAfterBrush(),We.afterBrush&&We.afterBrush(),Ee.prevEl=We}ge.clearTemporalDisplayables(),ge.notClear=!0,fe.restore()}(fe,ge,Ce)),st&&Te&&oe(fe,Ce),ge.innerAfterBrush(),ge.afterBrush&&ge.afterBrush(),Ce.prevEl=ge,ge.__dirty=0,ge.__isRendered=!0}}},1744:(Ut,rt,z)=>{function le(de){return isFinite(de)}function _e(de,j,$){for(var G="radial"===j.type?function ce(de,j,$){var G=$.width,Z=$.height,te=Math.min(G,Z),ee=j.x??.5,Q=j.y??.5,J=j.r??.5;return j.global||(ee=ee*G+$.x,Q=Q*Z+$.y,J*=te),ee=le(ee)?ee:.5,Q=le(Q)?Q:.5,J=J>=0&&le(J)?J:.5,de.createRadialGradient(ee,Q,0,ee,Q,J)}(de,j,$):function Se(de,j,$){var G=j.x??0,Z=j.x2??1,te=j.y??0,ee=j.y2??0;return j.global||(G=G*$.width+$.x,Z=Z*$.width+$.x,te=te*$.height+$.y,ee=ee*$.height+$.y),G=le(G)?G:0,Z=le(Z)?Z:1,te=le(te)?te:0,ee=le(ee)?ee:0,de.createLinearGradient(G,te,Z,ee)}(de,j,$),Z=j.colorStops,te=0;te<Z.length;te++)G.addColorStop(Z[te].offset,Z[te].color);return G}function ye(de,j){if(de===j||!de&&!j)return!1;if(!de||!j||de.length!==j.length)return!0;for(var $=0;$<de.length;$++)if(de[$]!==j[$])return!0;return!1}function be(de){return parseInt(de,10)}function we(de,j,$){var G=["width","height"][j],Z=["clientWidth","clientHeight"][j],te=["paddingLeft","paddingTop"][j],ee=["paddingRight","paddingBottom"][j];if(null!=$[G]&&"auto"!==$[G])return parseFloat($[G]);var Q=document.defaultView.getComputedStyle(de);return(de[Z]||be(Q[G])||be(de.style[G]))-(be(Q[te])||0)-(be(Q[ee])||0)|0}z.d(rt,{ZF:()=>_e,ap:()=>we,cF:()=>ye})},9072:(Ut,rt,z)=>{z.d(rt,{Ak:()=>ye,GD:()=>we,KL:()=>_e,iv:()=>de,vU:()=>be});var Se=1;z(9420).Z.hasGlobalWindow&&(Se=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var _e=Se,ye=.4,be="#333",we="#ccc",de="#eee"},7739:(Ut,rt,z)=>{function le(Se,ce,_e,ye,be,we,de){if(0===be)return!1;var $,j=be;if(de>ce+j&&de>ye+j||de<ce-j&&de<ye-j||we>Se+j&&we>_e+j||we<Se-j&&we<_e-j)return!1;if(Se===_e)return Math.abs(we-Se)<=j/2;var Z=($=(ce-ye)/(Se-_e))*we-de+(Se*ye-_e*ce)/(Se-_e);return Z*Z/($*$+1)<=j/2*j/2}z.d(rt,{m:()=>le})},2286:(Ut,rt,z)=>{z.d(rt,{X:()=>_e});var le=z(3951);function ce(ye,be){return Math.abs(ye-be)<1e-8}function _e(ye,be,we){var de=0,j=ye[0];if(!j)return!1;for(var $=1;$<ye.length;$++){var G=ye[$];de+=(0,le.Z)(j[0],j[1],G[0],G[1],be,we),j=G}var Z=ye[0];return(!ce(j[0],Z[0])||!ce(j[1],Z[1]))&&(de+=(0,le.Z)(j[0],j[1],Z[0],Z[1],be,we)),0!==de}},4239:(Ut,rt,z)=>{z.d(rt,{m:()=>Se});var le=z(7315);function Se(ce,_e,ye,be,we,de,j,$,G){if(0===j)return!1;var Z=j;return!(G>_e+Z&&G>be+Z&&G>de+Z||G<_e-Z&&G<be-Z&&G<de-Z||$>ce+Z&&$>ye+Z&&$>we+Z||$<ce-Z&&$<ye-Z&&$<we-Z)&&(0,le.Wr)(ce,_e,ye,be,we,de,$,G,null)<=Z/2}},9733:(Ut,rt,z)=>{z.d(rt,{Dp:()=>$,GM:()=>Z,M3:()=>de,dz:()=>ye,lP:()=>we,mU:()=>j,wI:()=>te});var le=z(468),Se=z(9040),ce=z(3691),_e={};function ye(ee,Q){var J=_e[Q=Q||ce.Uo];J||(J=_e[Q]=new Se.ZP(500));var b=J.get(ee);return null==b&&(b=ce.qW.measureText(ee,Q).width,J.put(ee,b)),b}function be(ee,Q,J,b){var Y=ye(ee,Q),q=$(Q),H=de(0,Y,J),re=j(0,q,b);return new le.Z(H,re,Y,q)}function we(ee,Q,J,b){var Y=((ee||"")+"").split("\n");if(1===Y.length)return be(Y[0],Q,J,b);for(var H=new le.Z(0,0,0,0),re=0;re<Y.length;re++){var W=be(Y[re],Q,J,b);0===re?H.copy(W):H.union(W)}return H}function de(ee,Q,J){return"right"===J?ee-=Q:"center"===J&&(ee-=Q/2),ee}function j(ee,Q,J){return"middle"===J?ee-=Q/2:"bottom"===J&&(ee-=Q),ee}function $(ee){return ye("\u56fd",ee)}function Z(ee,Q){return"string"==typeof ee?ee.lastIndexOf("%")>=0?parseFloat(ee)/100*Q:parseFloat(ee):ee}function te(ee,Q,J){var b=Q.position||"inside",Y=null!=Q.distance?Q.distance:5,q=J.height,H=J.width,re=q/2,W=J.x,X=J.y,K="left",B="top";if(b instanceof Array)W+=Z(b[0],J.width),X+=Z(b[1],J.height),K=null,B=null;else switch(b){case"left":W-=Y,X+=re,K="right",B="middle";break;case"right":W+=Y+H,X+=re,B="middle";break;case"top":W+=H/2,X-=Y,K="center",B="bottom";break;case"bottom":W+=H/2,X+=q+Y,K="center";break;case"inside":W+=H/2,X+=re,K="center",B="middle";break;case"insideLeft":W+=Y,X+=re,B="middle";break;case"insideRight":W+=H-Y,X+=re,K="right",B="middle";break;case"insideTop":W+=H/2,X+=Y,K="center";break;case"insideBottom":W+=H/2,X+=q-Y,K="center",B="bottom";break;case"insideTopLeft":W+=Y,X+=Y;break;case"insideTopRight":W+=H-Y,X+=Y,K="right";break;case"insideBottomLeft":W+=Y,X+=q-Y,B="bottom";break;case"insideBottomRight":W+=H-Y,X+=q-Y,K="right",B="bottom"}return(ee=ee||{}).x=W,ee.y=X,ee.align=K,ee.verticalAlign=B,ee}},5951:(Ut,rt,z)=>{z.d(rt,{m:()=>Se});var le=2*Math.PI;function Se(ce){return(ce%=le)<0&&(ce+=le),ce}},3951:(Ut,rt,z)=>{function le(Se,ce,_e,ye,be,we){if(we>ce&&we>ye||we<ce&&we<ye||ye===ce)return 0;var de=(we-ce)/(ye-ce),j=ye<ce?1:-1;(1===de||0===de)&&(j=ye<ce?.5:-.5);var $=de*(_e-Se)+Se;return $===be?1/0:$>be?j:0}z.d(rt,{Z:()=>le})},468:(Ut,rt,z)=>{z.d(rt,{Z:()=>Z});var le=z(619),Se=z(1788),ce=Math.min,_e=Math.max,ye=new Se.Z,be=new Se.Z,we=new Se.Z,de=new Se.Z,j=new Se.Z,$=new Se.Z;const Z=function(){function te(ee,Q,J,b){J<0&&(ee+=J,J=-J),b<0&&(Q+=b,b=-b),this.x=ee,this.y=Q,this.width=J,this.height=b}return te.prototype.union=function(ee){var Q=ce(ee.x,this.x),J=ce(ee.y,this.y);this.width=isFinite(this.x)&&isFinite(this.width)?_e(ee.x+ee.width,this.x+this.width)-Q:ee.width,this.height=isFinite(this.y)&&isFinite(this.height)?_e(ee.y+ee.height,this.y+this.height)-J:ee.height,this.x=Q,this.y=J},te.prototype.applyTransform=function(ee){te.applyTransform(this,this,ee)},te.prototype.calculateTransform=function(ee){var Q=this,J=ee.width/Q.width,b=ee.height/Q.height,Y=le.create();return le.translate(Y,Y,[-Q.x,-Q.y]),le.scale(Y,Y,[J,b]),le.translate(Y,Y,[ee.x,ee.y]),Y},te.prototype.intersect=function(ee,Q){if(!ee)return!1;ee instanceof te||(ee=te.create(ee));var J=this,b=J.x,Y=J.x+J.width,q=J.y,H=J.y+J.height,re=ee.x,W=ee.x+ee.width,X=ee.y,K=ee.y+ee.height,B=!(Y<re||W<b||H<X||K<q);if(Q){var O=1/0,D=0,P=Math.abs(Y-re),I=Math.abs(W-b),T=Math.abs(H-X),A=Math.abs(K-q),L=Math.min(P,I),N=Math.min(T,A);Y<re||W<b?L>D&&(D=L,Se.Z.set($,P<I?-P:I,0)):L<O&&(O=L,Se.Z.set(j,P<I?P:-I,0)),H<X||K<q?N>D&&(D=N,Se.Z.set($,0,T<A?-T:A)):L<O&&(O=L,Se.Z.set(j,0,T<A?T:-A))}return Q&&Se.Z.copy(Q,B?j:$),B},te.prototype.contain=function(ee,Q){var J=this;return ee>=J.x&&ee<=J.x+J.width&&Q>=J.y&&Q<=J.y+J.height},te.prototype.clone=function(){return new te(this.x,this.y,this.width,this.height)},te.prototype.copy=function(ee){te.copy(this,ee)},te.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},te.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},te.prototype.isZero=function(){return 0===this.width||0===this.height},te.create=function(ee){return new te(ee.x,ee.y,ee.width,ee.height)},te.copy=function(ee,Q){ee.x=Q.x,ee.y=Q.y,ee.width=Q.width,ee.height=Q.height},te.applyTransform=function(ee,Q,J){if(J){if(J[1]<1e-5&&J[1]>-1e-5&&J[2]<1e-5&&J[2]>-1e-5){var b=J[0],Y=J[3],H=J[5];return ee.x=Q.x*b+J[4],ee.y=Q.y*Y+H,ee.width=Q.width*b,ee.height=Q.height*Y,ee.width<0&&(ee.x+=ee.width,ee.width=-ee.width),void(ee.height<0&&(ee.y+=ee.height,ee.height=-ee.height))}ye.x=we.x=Q.x,ye.y=de.y=Q.y,be.x=de.x=Q.x+Q.width,be.y=we.y=Q.y+Q.height,ye.transform(J),de.transform(J),be.transform(J),we.transform(J),ee.x=ce(ye.x,be.x,we.x,de.x),ee.y=ce(ye.y,be.y,we.y,de.y);var re=_e(ye.x,be.x,we.x,de.x),W=_e(ye.y,be.y,we.y,de.y);ee.width=re-ee.x,ee.height=W-ee.y}else ee!==Q&&te.copy(ee,Q)},te}()},6735:(Ut,rt,z)=>{z.d(rt,{Z:()=>Se});const Se=function(){function ce(_e){_e&&(this._$eventProcessor=_e)}return ce.prototype.on=function(_e,ye,be,we){this._$handlers||(this._$handlers={});var de=this._$handlers;if("function"==typeof ye&&(we=be,be=ye,ye=null),!be||!_e)return this;var j=this._$eventProcessor;null!=ye&&j&&j.normalizeQuery&&(ye=j.normalizeQuery(ye)),de[_e]||(de[_e]=[]);for(var $=0;$<de[_e].length;$++)if(de[_e][$].h===be)return this;var G={h:be,query:ye,ctx:we||this,callAtLast:be.zrEventfulCallAtLast},Z=de[_e].length-1,te=de[_e][Z];return te&&te.callAtLast?de[_e].splice(Z,0,G):de[_e].push(G),this},ce.prototype.isSilent=function(_e){var ye=this._$handlers;return!ye||!ye[_e]||!ye[_e].length},ce.prototype.off=function(_e,ye){var be=this._$handlers;if(!be)return this;if(!_e)return this._$handlers={},this;if(ye){if(be[_e]){for(var we=[],de=0,j=be[_e].length;de<j;de++)be[_e][de].h!==ye&&we.push(be[_e][de]);be[_e]=we}be[_e]&&0===be[_e].length&&delete be[_e]}else delete be[_e];return this},ce.prototype.trigger=function(_e){for(var ye=[],be=1;be<arguments.length;be++)ye[be-1]=arguments[be];if(!this._$handlers)return this;var we=this._$handlers[_e],de=this._$eventProcessor;if(we)for(var j=ye.length,$=we.length,G=0;G<$;G++){var Z=we[G];if(!de||!de.filter||null==Z.query||de.filter(_e,Z.query))switch(j){case 0:Z.h.call(Z.ctx);break;case 1:Z.h.call(Z.ctx,ye[0]);break;case 2:Z.h.call(Z.ctx,ye[0],ye[1]);break;default:Z.h.apply(Z.ctx,ye)}}return de&&de.afterTrigger&&de.afterTrigger(_e),this},ce.prototype.triggerWithContext=function(_e){for(var ye=[],be=1;be<arguments.length;be++)ye[be-1]=arguments[be];if(!this._$handlers)return this;var we=this._$handlers[_e],de=this._$eventProcessor;if(we)for(var j=ye.length,$=ye[j-1],G=we.length,Z=0;Z<G;Z++){var te=we[Z];if(!de||!de.filter||null==te.query||de.filter(_e,te.query))switch(j){case 0:te.h.call($);break;case 1:te.h.call($,ye[0]);break;case 2:te.h.call($,ye[0],ye[1]);break;default:te.h.apply($,ye.slice(1,j-1))}}return de&&de.afterTrigger&&de.afterTrigger(_e),this},ce}()},9040:(Ut,rt,z)=>{z.d(rt,{ZP:()=>_e});var le=function ye(be){this.value=be},Se=function(){function ye(){this._len=0}return ye.prototype.insert=function(be){var we=new le(be);return this.insertEntry(we),we},ye.prototype.insertEntry=function(be){this.head?(this.tail.next=be,be.prev=this.tail,be.next=null,this.tail=be):this.head=this.tail=be,this._len++},ye.prototype.remove=function(be){var we=be.prev,de=be.next;we?we.next=de:this.head=de,de?de.prev=we:this.tail=we,be.next=be.prev=null,this._len--},ye.prototype.len=function(){return this._len},ye.prototype.clear=function(){this.head=this.tail=null,this._len=0},ye}();const _e=function(){function ye(be){this._list=new Se,this._maxSize=10,this._map={},this._maxSize=be}return ye.prototype.put=function(be,we){var de=this._list,j=this._map,$=null;if(null==j[be]){var G=de.len(),Z=this._lastRemovedEntry;if(G>=this._maxSize&&G>0){var te=de.head;de.remove(te),delete j[te.key],$=te.value,this._lastRemovedEntry=te}Z?Z.value=we:Z=new le(we),Z.key=be,de.insertEntry(Z),j[be]=Z}return $},ye.prototype.get=function(be){var we=this._map[be],de=this._list;if(null!=we)return we!==de.tail&&(de.remove(we),de.insertEntry(we)),we.value},ye.prototype.clear=function(){this._list.clear(),this._map={}},ye.prototype.len=function(){return this._list.len()},ye}()},8025:(Ut,rt,z)=>{z.d(rt,{Z:()=>we});var le=z(1788),Se=[0,0],ce=[0,0],_e=new le.Z,ye=new le.Z;const we=function(){function de(j,$){this._corners=[],this._axes=[],this._origin=[0,0];for(var G=0;G<4;G++)this._corners[G]=new le.Z;for(G=0;G<2;G++)this._axes[G]=new le.Z;j&&this.fromBoundingRect(j,$)}return de.prototype.fromBoundingRect=function(j,$){var G=this._corners,Z=this._axes,te=j.x,ee=j.y,Q=te+j.width,J=ee+j.height;if(G[0].set(te,ee),G[1].set(Q,ee),G[2].set(Q,J),G[3].set(te,J),$)for(var b=0;b<4;b++)G[b].transform($);for(le.Z.sub(Z[0],G[1],G[0]),le.Z.sub(Z[1],G[3],G[0]),Z[0].normalize(),Z[1].normalize(),b=0;b<2;b++)this._origin[b]=Z[b].dot(G[0])},de.prototype.intersect=function(j,$){var G=!0,Z=!$;return _e.set(1/0,1/0),ye.set(0,0),!this._intersectCheckOneSide(this,j,_e,ye,Z,1)&&(G=!1,Z)||!this._intersectCheckOneSide(j,this,_e,ye,Z,-1)&&(G=!1,Z)||Z||le.Z.copy($,G?_e:ye),G},de.prototype._intersectCheckOneSide=function(j,$,G,Z,te,ee){for(var Q=!0,J=0;J<2;J++){var b=this._axes[J];if(this._getProjMinMaxOnAxis(J,j._corners,Se),this._getProjMinMaxOnAxis(J,$._corners,ce),Se[1]<ce[0]||Se[0]>ce[1]){if(Q=!1,te)return Q;var Y=Math.abs(ce[0]-Se[1]),q=Math.abs(Se[0]-ce[1]);Math.min(Y,q)>Z.len()&&le.Z.scale(Z,b,Y<q?-Y*ee:q*ee)}else G&&(Y=Math.abs(ce[0]-Se[1]),q=Math.abs(Se[0]-ce[1]),Math.min(Y,q)<G.len()&&le.Z.scale(G,b,Y<q?Y*ee:-q*ee))}return Q},de.prototype._getProjMinMaxOnAxis=function(j,$,G){for(var Z=this._axes[j],te=this._origin,ee=$[0].dot(Z)+te[j],Q=ee,J=ee,b=1;b<$.length;b++){var Y=$[b].dot(Z)+te[j];Q=Math.min(Y,Q),J=Math.max(Y,J)}G[0]=Q,G[1]=J},de}()},7899:(Ut,rt,z)=>{z.d(rt,{L:()=>X,Z:()=>B});var le=z(5145),Se=z(468),ce=z(9072),_e=z(8802),ye=z(7315),be={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},we=[],de=[],j=[],$=[],G=[],Z=[],te=Math.min,ee=Math.max,Q=Math.cos,J=Math.sin,b=Math.abs,Y=Math.PI,q=2*Y,H=typeof Float32Array<"u",re=[];function W(O){return Math.round(O/Y*1e8)/1e8%2*Y}function X(O,D){var P=W(O[0]);P<0&&(P+=q);var T=O[1];T+=P-O[0],!D&&T-P>=q?T=P+q:D&&P-T>=q?T=P-q:!D&&P>T?T=P+(q-W(P-T)):D&&P<T&&(T=P-(q-W(T-P))),O[0]=P,O[1]=T}const B=function(){function O(D){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,D&&(this._saveData=!1),this._saveData&&(this.data=[])}return O.prototype.increaseVersion=function(){this._version++},O.prototype.getVersion=function(){return this._version},O.prototype.setScale=function(D,P,I){(I=I||0)>0&&(this._ux=b(I/ce.KL/D)||0,this._uy=b(I/ce.KL/P)||0)},O.prototype.setDPR=function(D){this.dpr=D},O.prototype.setContext=function(D){this._ctx=D},O.prototype.getContext=function(){return this._ctx},O.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},O.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},O.prototype.moveTo=function(D,P){return this._drawPendingPt(),this.addData(be.M,D,P),this._ctx&&this._ctx.moveTo(D,P),this._x0=D,this._y0=P,this._xi=D,this._yi=P,this},O.prototype.lineTo=function(D,P){var I=b(D-this._xi),T=b(P-this._yi),A=I>this._ux||T>this._uy;if(this.addData(be.L,D,P),this._ctx&&A&&this._ctx.lineTo(D,P),A)this._xi=D,this._yi=P,this._pendingPtDist=0;else{var L=I*I+T*T;L>this._pendingPtDist&&(this._pendingPtX=D,this._pendingPtY=P,this._pendingPtDist=L)}return this},O.prototype.bezierCurveTo=function(D,P,I,T,A,L){return this._drawPendingPt(),this.addData(be.C,D,P,I,T,A,L),this._ctx&&this._ctx.bezierCurveTo(D,P,I,T,A,L),this._xi=A,this._yi=L,this},O.prototype.quadraticCurveTo=function(D,P,I,T){return this._drawPendingPt(),this.addData(be.Q,D,P,I,T),this._ctx&&this._ctx.quadraticCurveTo(D,P,I,T),this._xi=I,this._yi=T,this},O.prototype.arc=function(D,P,I,T,A,L){return this._drawPendingPt(),re[0]=T,re[1]=A,X(re,L),this.addData(be.A,D,P,I,I,T=re[0],(A=re[1])-T,0,L?0:1),this._ctx&&this._ctx.arc(D,P,I,T,A,L),this._xi=Q(A)*I+D,this._yi=J(A)*I+P,this},O.prototype.arcTo=function(D,P,I,T,A){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(D,P,I,T,A),this},O.prototype.rect=function(D,P,I,T){return this._drawPendingPt(),this._ctx&&this._ctx.rect(D,P,I,T),this.addData(be.R,D,P,I,T),this},O.prototype.closePath=function(){this._drawPendingPt(),this.addData(be.Z);var D=this._ctx,P=this._x0,I=this._y0;return D&&D.closePath(),this._xi=P,this._yi=I,this},O.prototype.fill=function(D){D&&D.fill(),this.toStatic()},O.prototype.stroke=function(D){D&&D.stroke(),this.toStatic()},O.prototype.len=function(){return this._len},O.prototype.setData=function(D){var P=D.length;(!this.data||this.data.length!==P)&&H&&(this.data=new Float32Array(P));for(var I=0;I<P;I++)this.data[I]=D[I];this._len=P},O.prototype.appendPath=function(D){D instanceof Array||(D=[D]);for(var P=D.length,I=0,T=this._len,A=0;A<P;A++)I+=D[A].len();for(H&&this.data instanceof Float32Array&&(this.data=new Float32Array(T+I)),A=0;A<P;A++)for(var L=D[A].data,N=0;N<L.length;N++)this.data[T++]=L[N];this._len=T},O.prototype.addData=function(D,P,I,T,A,L,N,ie,oe){if(this._saveData){var ae=this.data;this._len+arguments.length>ae.length&&(this._expandData(),ae=this.data);for(var he=0;he<arguments.length;he++)ae[this._len++]=arguments[he]}},O.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},O.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var D=[],P=0;P<this._len;P++)D[P]=this.data[P];this.data=D}},O.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var D=this.data;D instanceof Array&&(D.length=this._len,H&&this._len>11&&(this.data=new Float32Array(D)))}},O.prototype.getBoundingRect=function(){j[0]=j[1]=G[0]=G[1]=Number.MAX_VALUE,$[0]=$[1]=Z[0]=Z[1]=-Number.MAX_VALUE;var L,D=this.data,P=0,I=0,T=0,A=0;for(L=0;L<this._len;){var N=D[L++],ie=1===L;switch(ie&&(T=P=D[L],A=I=D[L+1]),N){case be.M:P=T=D[L++],I=A=D[L++],G[0]=T,G[1]=A,Z[0]=T,Z[1]=A;break;case be.L:(0,_e.u4)(P,I,D[L],D[L+1],G,Z),P=D[L++],I=D[L++];break;case be.C:(0,_e.H9)(P,I,D[L++],D[L++],D[L++],D[L++],D[L],D[L+1],G,Z),P=D[L++],I=D[L++];break;case be.Q:(0,_e.mJ)(P,I,D[L++],D[L++],D[L],D[L+1],G,Z),P=D[L++],I=D[L++];break;case be.A:var oe=D[L++],ae=D[L++],he=D[L++],se=D[L++],xe=D[L++],fe=D[L++]+xe;L+=1;var ge=!D[L++];ie&&(T=Q(xe)*he+oe,A=J(xe)*se+ae),(0,_e.qL)(oe,ae,he,se,xe,fe,ge,G,Z),P=Q(fe)*he+oe,I=J(fe)*se+ae;break;case be.R:T=P=D[L++],A=I=D[L++];var Ce=D[L++],Te=D[L++];(0,_e.u4)(T,A,T+Ce,A+Te,G,Z);break;case be.Z:P=T,I=A}le.min(j,j,G),le.max($,$,Z)}return 0===L&&(j[0]=j[1]=$[0]=$[1]=0),new Se.Z(j[0],j[1],$[0]-j[0],$[1]-j[1])},O.prototype._calculateLength=function(){var D=this.data,P=this._len,I=this._ux,T=this._uy,A=0,L=0,N=0,ie=0;this._pathSegLen||(this._pathSegLen=[]);for(var oe=this._pathSegLen,ae=0,he=0,se=0;se<P;){var xe=D[se++],fe=1===se;fe&&(N=A=D[se],ie=L=D[se+1]);var ge=-1;switch(xe){case be.M:A=N=D[se++],L=ie=D[se++];break;case be.L:var Ce=D[se++],Ee=(Te=D[se++])-L;(b(Ie=Ce-A)>I||b(Ee)>T||se===P-1)&&(ge=Math.sqrt(Ie*Ie+Ee*Ee),A=Ce,L=Te);break;case be.C:var Ve=D[se++],ze=D[se++],Te=(Ce=D[se++],D[se++]),We=D[se++],tt=D[se++];ge=(0,ye.Ci)(A,L,Ve,ze,Ce,Te,We,tt,10),A=We,L=tt;break;case be.Q:Ve=D[se++],ze=D[se++],Ce=D[se++],Te=D[se++],ge=(0,ye.wQ)(A,L,Ve,ze,Ce,Te,10),A=Ce,L=Te;break;case be.A:var st=D[se++],Tt=D[se++],At=D[se++],Vt=D[se++],Wt=D[se++],kt=D[se++],fn=kt+Wt;se+=1,fe&&(N=Q(Wt)*At+st,ie=J(Wt)*Vt+Tt),ge=ee(At,Vt)*te(q,Math.abs(kt)),A=Q(fn)*At+st,L=J(fn)*Vt+Tt;break;case be.R:N=A=D[se++],ie=L=D[se++],ge=2*D[se++]+2*D[se++];break;case be.Z:var Ie=N-A;Ee=ie-L,ge=Math.sqrt(Ie*Ie+Ee*Ee),A=N,L=ie}ge>=0&&(oe[he++]=ge,ae+=ge)}return this._pathLen=ae,ae},O.prototype.rebuildPath=function(D,P){var N,ie,oe,ae,he,se,fe,Ie,Ve,ze,I=this.data,T=this._ux,A=this._uy,L=this._len,xe=P<1,Ce=0,Te=0,Ee=0;if(!xe||(this._pathSegLen||this._calculateLength(),fe=this._pathSegLen,Ie=P*this._pathLen))e:for(var We=0;We<L;){var tt=I[We++],st=1===We;switch(st&&(N=oe=I[We],ie=ae=I[We+1]),tt!==be.L&&Ee>0&&(D.lineTo(Ve,ze),Ee=0),tt){case be.M:N=oe=I[We++],ie=ae=I[We++],D.moveTo(oe,ae);break;case be.L:he=I[We++],se=I[We++];var Tt=b(he-oe),At=b(se-ae);if(Tt>T||At>A){if(xe){if(Ce+(Vt=fe[Te++])>Ie){D.lineTo(oe*(1-(Wt=(Ie-Ce)/Vt))+he*Wt,ae*(1-Wt)+se*Wt);break e}Ce+=Vt}D.lineTo(he,se),oe=he,ae=se,Ee=0}else{var kt=Tt*Tt+At*At;kt>Ee&&(Ve=he,ze=se,Ee=kt)}break;case be.C:var fn=I[We++],wn=I[We++],sr=I[We++],Xn=I[We++],pr=I[We++],rr=I[We++];if(xe){if(Ce+(Vt=fe[Te++])>Ie){(0,ye.Vz)(oe,fn,sr,pr,Wt=(Ie-Ce)/Vt,we),(0,ye.Vz)(ae,wn,Xn,rr,Wt,de),D.bezierCurveTo(we[1],de[1],we[2],de[2],we[3],de[3]);break e}Ce+=Vt}D.bezierCurveTo(fn,wn,sr,Xn,pr,rr),oe=pr,ae=rr;break;case be.Q:if(fn=I[We++],wn=I[We++],sr=I[We++],Xn=I[We++],xe){if(Ce+(Vt=fe[Te++])>Ie){(0,ye.Lx)(oe,fn,sr,Wt=(Ie-Ce)/Vt,we),(0,ye.Lx)(ae,wn,Xn,Wt,de),D.quadraticCurveTo(we[1],de[1],we[2],de[2]);break e}Ce+=Vt}D.quadraticCurveTo(fn,wn,sr,Xn),oe=sr,ae=Xn;break;case be.A:var Qt=I[We++],un=I[We++],Pn=I[We++],Nn=I[We++],jn=I[We++],xr=I[We++],gr=I[We++],Je=!I[We++],wt=Pn>Nn?Pn:Nn,nn=b(Pn-Nn)>.001,Xt=jn+xr,dt=!1;if(xe&&(Ce+(Vt=fe[Te++])>Ie&&(Xt=jn+xr*(Ie-Ce)/Vt,dt=!0),Ce+=Vt),nn&&D.ellipse?D.ellipse(Qt,un,Pn,Nn,gr,jn,Xt,Je):D.arc(Qt,un,wt,jn,Xt,Je),dt)break e;st&&(N=Q(jn)*Pn+Qt,ie=J(jn)*Nn+un),oe=Q(Xt)*Pn+Qt,ae=J(Xt)*Nn+un;break;case be.R:N=oe=I[We],ie=ae=I[We+1],he=I[We++],se=I[We++];var Lt=I[We++],qt=I[We++];if(xe){if(Ce+(Vt=fe[Te++])>Ie){var Ze=Ie-Ce;D.moveTo(he,se),D.lineTo(he+te(Ze,Lt),se),(Ze-=Lt)>0&&D.lineTo(he+Lt,se+te(Ze,qt)),(Ze-=qt)>0&&D.lineTo(he+ee(Lt-Ze,0),se+qt),(Ze-=Lt)>0&&D.lineTo(he,se+ee(qt-Ze,0));break e}Ce+=Vt}D.rect(he,se,Lt,qt);break;case be.Z:if(xe){var Vt;if(Ce+(Vt=fe[Te++])>Ie){var Wt;D.lineTo(oe*(1-(Wt=(Ie-Ce)/Vt))+N*Wt,ae*(1-Wt)+ie*Wt);break e}Ce+=Vt}D.closePath(),oe=N,ae=ie}}},O.prototype.clone=function(){var D=new O,P=this.data;return D.data=P.slice?P.slice():Array.prototype.slice.call(P),D._len=this._len,D},O.CMD=be,O.initDefaultProps=((D=O.prototype)._saveData=!0,D._ux=0,D._uy=0,D._pendingPtDist=0,void(D._version=0)),O;var D}()},1788:(Ut,rt,z)=>{z.d(rt,{Z:()=>Se});const Se=function(){function ce(_e,ye){this.x=_e||0,this.y=ye||0}return ce.prototype.copy=function(_e){return this.x=_e.x,this.y=_e.y,this},ce.prototype.clone=function(){return new ce(this.x,this.y)},ce.prototype.set=function(_e,ye){return this.x=_e,this.y=ye,this},ce.prototype.equal=function(_e){return _e.x===this.x&&_e.y===this.y},ce.prototype.add=function(_e){return this.x+=_e.x,this.y+=_e.y,this},ce.prototype.scale=function(_e){this.x*=_e,this.y*=_e},ce.prototype.scaleAndAdd=function(_e,ye){this.x+=_e.x*ye,this.y+=_e.y*ye},ce.prototype.sub=function(_e){return this.x-=_e.x,this.y-=_e.y,this},ce.prototype.dot=function(_e){return this.x*_e.x+this.y*_e.y},ce.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},ce.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},ce.prototype.normalize=function(){var _e=this.len();return this.x/=_e,this.y/=_e,this},ce.prototype.distance=function(_e){var ye=this.x-_e.x,be=this.y-_e.y;return Math.sqrt(ye*ye+be*be)},ce.prototype.distanceSquare=function(_e){var ye=this.x-_e.x,be=this.y-_e.y;return ye*ye+be*be},ce.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},ce.prototype.transform=function(_e){if(_e){var ye=this.x,be=this.y;return this.x=_e[0]*ye+_e[2]*be+_e[4],this.y=_e[1]*ye+_e[3]*be+_e[5],this}},ce.prototype.toArray=function(_e){return _e[0]=this.x,_e[1]=this.y,_e},ce.prototype.fromArray=function(_e){this.x=_e[0],this.y=_e[1]},ce.set=function(_e,ye,be){_e.x=ye,_e.y=be},ce.copy=function(_e,ye){_e.x=ye.x,_e.y=ye.y},ce.len=function(_e){return Math.sqrt(_e.x*_e.x+_e.y*_e.y)},ce.lenSquare=function(_e){return _e.x*_e.x+_e.y*_e.y},ce.dot=function(_e,ye){return _e.x*ye.x+_e.y*ye.y},ce.add=function(_e,ye,be){_e.x=ye.x+be.x,_e.y=ye.y+be.y},ce.sub=function(_e,ye,be){_e.x=ye.x-be.x,_e.y=ye.y-be.y},ce.scale=function(_e,ye,be){_e.x=ye.x*be,_e.y=ye.y*be},ce.scaleAndAdd=function(_e,ye,be,we){_e.x=ye.x+be.x*we,_e.y=ye.y+be.y*we},ce.lerp=function(_e,ye,be,we){var de=1-we;_e.x=de*ye.x+we*be.x,_e.y=de*ye.y+we*be.y},ce}()},4593:(Ut,rt,z)=>{z.d(rt,{ZP:()=>te,dN:()=>G,kY:()=>Z});var le=z(619),Se=z(5145),ce=le.identity;function ye(ee){return ee>5e-5||ee<-5e-5}var be=[],we=[],de=le.create(),j=Math.abs,$=function(){function ee(){}return ee.prototype.getLocalTransform=function(Q){return ee.getLocalTransform(this,Q)},ee.prototype.setPosition=function(Q){this.x=Q[0],this.y=Q[1]},ee.prototype.setScale=function(Q){this.scaleX=Q[0],this.scaleY=Q[1]},ee.prototype.setSkew=function(Q){this.skewX=Q[0],this.skewY=Q[1]},ee.prototype.setOrigin=function(Q){this.originX=Q[0],this.originY=Q[1]},ee.prototype.needLocalTransform=function(){return ye(this.rotation)||ye(this.x)||ye(this.y)||ye(this.scaleX-1)||ye(this.scaleY-1)||ye(this.skewX)||ye(this.skewY)},ee.prototype.updateTransform=function(){var Q=this.parent&&this.parent.transform,J=this.needLocalTransform(),b=this.transform;J||Q?(b=b||le.create(),J?this.getLocalTransform(b):ce(b),Q&&(J?le.mul(b,Q,b):le.copy(b,Q)),this.transform=b,this._resolveGlobalScaleRatio(b)):b&&(ce(b),this.invTransform=null)},ee.prototype._resolveGlobalScaleRatio=function(Q){var J=this.globalScaleRatio;if(null!=J&&1!==J){this.getGlobalScale(be);var b=be[0]<0?-1:1,Y=be[1]<0?-1:1,q=((be[0]-b)*J+b)/be[0]||0,H=((be[1]-Y)*J+Y)/be[1]||0;Q[0]*=q,Q[1]*=q,Q[2]*=H,Q[3]*=H}this.invTransform=this.invTransform||le.create(),le.invert(this.invTransform,Q)},ee.prototype.getComputedTransform=function(){for(var Q=this,J=[];Q;)J.push(Q),Q=Q.parent;for(;Q=J.pop();)Q.updateTransform();return this.transform},ee.prototype.setLocalTransform=function(Q){if(Q){var J=Q[0]*Q[0]+Q[1]*Q[1],b=Q[2]*Q[2]+Q[3]*Q[3],Y=Math.atan2(Q[1],Q[0]),q=Math.PI/2+Y-Math.atan2(Q[3],Q[2]);b=Math.sqrt(b)*Math.cos(q),J=Math.sqrt(J),this.skewX=q,this.skewY=0,this.rotation=-Y,this.x=+Q[4],this.y=+Q[5],this.scaleX=J,this.scaleY=b,this.originX=0,this.originY=0}},ee.prototype.decomposeTransform=function(){if(this.transform){var Q=this.parent,J=this.transform;Q&&Q.transform&&(Q.invTransform=Q.invTransform||le.create(),le.mul(we,Q.invTransform,J),J=we);var b=this.originX,Y=this.originY;(b||Y)&&(de[4]=b,de[5]=Y,le.mul(we,J,de),we[4]-=b,we[5]-=Y,J=we),this.setLocalTransform(J)}},ee.prototype.getGlobalScale=function(Q){var J=this.transform;return Q=Q||[],J?(Q[0]=Math.sqrt(J[0]*J[0]+J[1]*J[1]),Q[1]=Math.sqrt(J[2]*J[2]+J[3]*J[3]),J[0]<0&&(Q[0]=-Q[0]),J[3]<0&&(Q[1]=-Q[1]),Q):(Q[0]=1,Q[1]=1,Q)},ee.prototype.transformCoordToLocal=function(Q,J){var b=[Q,J],Y=this.invTransform;return Y&&Se.applyTransform(b,b,Y),b},ee.prototype.transformCoordToGlobal=function(Q,J){var b=[Q,J],Y=this.transform;return Y&&Se.applyTransform(b,b,Y),b},ee.prototype.getLineScale=function(){var Q=this.transform;return Q&&j(Q[0]-1)>1e-10&&j(Q[3]-1)>1e-10?Math.sqrt(j(Q[0]*Q[3]-Q[2]*Q[1])):1},ee.prototype.copyTransform=function(Q){Z(this,Q)},ee.getLocalTransform=function(Q,J){J=J||[];var b=Q.originX||0,Y=Q.originY||0,q=Q.scaleX,H=Q.scaleY,re=Q.anchorX,W=Q.anchorY,X=Q.rotation||0,K=Q.x,B=Q.y,O=Q.skewX?Math.tan(Q.skewX):0,D=Q.skewY?Math.tan(-Q.skewY):0;if(b||Y||re||W){var P=b+re,I=Y+W;J[4]=-P*q-O*I*H,J[5]=-I*H-D*P*q}else J[4]=J[5]=0;return J[0]=q,J[3]=H,J[1]=D*q,J[2]=O*H,X&&le.rotate(J,J,X),J[4]+=b+K,J[5]+=Y+B,J},ee.initDefaultProps=((Q=ee.prototype).scaleX=Q.scaleY=Q.globalScaleRatio=1,void(Q.x=Q.y=Q.originX=Q.originY=Q.skewX=Q.skewY=Q.rotation=Q.anchorX=Q.anchorY=0)),ee;var Q}(),G=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function Z(ee,Q){for(var J=0;J<G.length;J++){var b=G[J];ee[b]=Q[b]}}const te=$},8802:(Ut,rt,z)=>{z.d(rt,{H9:()=>Q,mJ:()=>J,qL:()=>b,u4:()=>Z,zk:()=>G});var le=z(5145),Se=z(7315),ce=Math.min,_e=Math.max,ye=Math.sin,be=Math.cos,we=2*Math.PI,de=le.create(),j=le.create(),$=le.create();function G(Y,q,H){if(0!==Y.length){for(var re=Y[0],W=re[0],X=re[0],K=re[1],B=re[1],O=1;O<Y.length;O++)W=ce(W,(re=Y[O])[0]),X=_e(X,re[0]),K=ce(K,re[1]),B=_e(B,re[1]);q[0]=W,q[1]=K,H[0]=X,H[1]=B}}function Z(Y,q,H,re,W,X){W[0]=ce(Y,H),W[1]=ce(q,re),X[0]=_e(Y,H),X[1]=_e(q,re)}var te=[],ee=[];function Q(Y,q,H,re,W,X,K,B,O,D){var P=Se.pP,I=Se.af,T=P(Y,H,W,K,te);O[0]=1/0,O[1]=1/0,D[0]=-1/0,D[1]=-1/0;for(var A=0;A<T;A++){var L=I(Y,H,W,K,te[A]);O[0]=ce(L,O[0]),D[0]=_e(L,D[0])}for(T=P(q,re,X,B,ee),A=0;A<T;A++){var N=I(q,re,X,B,ee[A]);O[1]=ce(N,O[1]),D[1]=_e(N,D[1])}O[0]=ce(Y,O[0]),D[0]=_e(Y,D[0]),O[0]=ce(K,O[0]),D[0]=_e(K,D[0]),O[1]=ce(q,O[1]),D[1]=_e(q,D[1]),O[1]=ce(B,O[1]),D[1]=_e(B,D[1])}function J(Y,q,H,re,W,X,K,B){var O=Se.QC,D=Se.Zm,P=_e(ce(O(Y,H,W),1),0),I=_e(ce(O(q,re,X),1),0),T=D(Y,H,W,P),A=D(q,re,X,I);K[0]=ce(Y,W,T),K[1]=ce(q,X,A),B[0]=_e(Y,W,T),B[1]=_e(q,X,A)}function b(Y,q,H,re,W,X,K,B,O){var D=le.min,P=le.max,I=Math.abs(W-X);if(I%we<1e-4&&I>1e-4)return B[0]=Y-H,B[1]=q-re,O[0]=Y+H,void(O[1]=q+re);if(de[0]=be(W)*H+Y,de[1]=ye(W)*re+q,j[0]=be(X)*H+Y,j[1]=ye(X)*re+q,D(B,de,j),P(O,de,j),(W%=we)<0&&(W+=we),(X%=we)<0&&(X+=we),W>X&&!K?X+=we:W<X&&K&&(W+=we),K){var T=X;X=W,W=T}for(var A=0;A<X;A+=Math.PI/2)A>W&&($[0]=be(A)*H+Y,$[1]=ye(A)*re+q,D(B,$,B),P(O,$,O))}},7315:(Ut,rt,z)=>{z.d(rt,{AZ:()=>re,Ci:()=>q,Jz:()=>W,Lx:()=>K,QC:()=>X,Vz:()=>b,Wr:()=>B,X_:()=>ee,Zm:()=>H,af:()=>te,kD:()=>Q,pP:()=>J,t1:()=>Y,wQ:()=>O});var le=z(5145),Se=Math.pow,ce=Math.sqrt,be=ce(3),we=1/3,de=(0,le.create)(),j=(0,le.create)(),$=(0,le.create)();function G(D){return D>-1e-8&&D<1e-8}function Z(D){return D>1e-8||D<-1e-8}function te(D,P,I,T,A){var L=1-A;return L*L*(L*D+3*A*P)+A*A*(A*T+3*L*I)}function ee(D,P,I,T,A){var L=1-A;return 3*(((P-D)*L+2*(I-P)*A)*L+(T-I)*A*A)}function Q(D,P,I,T,A,L){var N=T+3*(P-I)-D,ie=3*(I-2*P+D),oe=3*(P-D),ae=D-A,he=ie*ie-3*N*oe,se=ie*oe-9*N*ae,xe=oe*oe-3*ie*ae,fe=0;if(G(he)&&G(se))G(ie)?L[0]=0:(ge=-oe/ie)>=0&&ge<=1&&(L[fe++]=ge);else{var Ce=se*se-4*he*xe;if(G(Ce)){var Te=se/he,Ie=-Te/2;(ge=-ie/N+Te)>=0&&ge<=1&&(L[fe++]=ge),Ie>=0&&Ie<=1&&(L[fe++]=Ie)}else if(Ce>0){var Ee=ce(Ce),Ve=he*ie+1.5*N*(-se+Ee),ze=he*ie+1.5*N*(-se-Ee);(ge=(-ie-((Ve=Ve<0?-Se(-Ve,we):Se(Ve,we))+(ze=ze<0?-Se(-ze,we):Se(ze,we))))/(3*N))>=0&&ge<=1&&(L[fe++]=ge)}else{var We=(2*he*ie-3*N*se)/(2*ce(he*he*he)),tt=Math.acos(We)/3,st=ce(he),Tt=Math.cos(tt),ge=(-ie-2*st*Tt)/(3*N),At=(Ie=(-ie+st*(Tt+be*Math.sin(tt)))/(3*N),(-ie+st*(Tt-be*Math.sin(tt)))/(3*N));ge>=0&&ge<=1&&(L[fe++]=ge),Ie>=0&&Ie<=1&&(L[fe++]=Ie),At>=0&&At<=1&&(L[fe++]=At)}}return fe}function J(D,P,I,T,A){var L=6*I-12*P+6*D,N=9*P+3*T-3*D-9*I,ie=3*P-3*D,oe=0;if(G(N))Z(L)&&(ae=-ie/L)>=0&&ae<=1&&(A[oe++]=ae);else{var he=L*L-4*N*ie;if(G(he))A[0]=-L/(2*N);else if(he>0){var ae,se=ce(he),xe=(-L-se)/(2*N);(ae=(-L+se)/(2*N))>=0&&ae<=1&&(A[oe++]=ae),xe>=0&&xe<=1&&(A[oe++]=xe)}}return oe}function b(D,P,I,T,A,L){var N=(P-D)*A+D,ie=(I-P)*A+P,oe=(T-I)*A+I,ae=(ie-N)*A+N,he=(oe-ie)*A+ie,se=(he-ae)*A+ae;L[0]=D,L[1]=N,L[2]=ae,L[3]=se,L[4]=se,L[5]=he,L[6]=oe,L[7]=T}function Y(D,P,I,T,A,L,N,ie,oe,ae,he){var se,ge,Ce,Te,Ie,xe=.005,fe=1/0;de[0]=oe,de[1]=ae;for(var Ee=0;Ee<1;Ee+=.05)j[0]=te(D,I,A,N,Ee),j[1]=te(P,T,L,ie,Ee),(Te=(0,le.distSquare)(de,j))<fe&&(se=Ee,fe=Te);fe=1/0;for(var Ve=0;Ve<32&&!(xe<1e-4);Ve++)Ce=se+xe,j[0]=te(D,I,A,N,ge=se-xe),j[1]=te(P,T,L,ie,ge),Te=(0,le.distSquare)(j,de),ge>=0&&Te<fe?(se=ge,fe=Te):($[0]=te(D,I,A,N,Ce),$[1]=te(P,T,L,ie,Ce),Ie=(0,le.distSquare)($,de),Ce<=1&&Ie<fe?(se=Ce,fe=Ie):xe*=.5);return he&&(he[0]=te(D,I,A,N,se),he[1]=te(P,T,L,ie,se)),ce(fe)}function q(D,P,I,T,A,L,N,ie,oe){for(var ae=D,he=P,se=0,xe=1/oe,fe=1;fe<=oe;fe++){var ge=fe*xe,Ce=te(D,I,A,N,ge),Te=te(P,T,L,ie,ge),Ie=Ce-ae,Ee=Te-he;se+=Math.sqrt(Ie*Ie+Ee*Ee),ae=Ce,he=Te}return se}function H(D,P,I,T){var A=1-T;return A*(A*D+2*T*P)+T*T*I}function re(D,P,I,T){return 2*((1-T)*(P-D)+T*(I-P))}function W(D,P,I,T,A){var L=D-2*P+I,N=2*(P-D),ie=D-T,oe=0;if(G(L))Z(N)&&(ae=-ie/N)>=0&&ae<=1&&(A[oe++]=ae);else{var he=N*N-4*L*ie;if(G(he))(ae=-N/(2*L))>=0&&ae<=1&&(A[oe++]=ae);else if(he>0){var ae,se=ce(he),xe=(-N-se)/(2*L);(ae=(-N+se)/(2*L))>=0&&ae<=1&&(A[oe++]=ae),xe>=0&&xe<=1&&(A[oe++]=xe)}}return oe}function X(D,P,I){var T=D+I-2*P;return 0===T?.5:(D-P)/T}function K(D,P,I,T,A){var L=(P-D)*T+D,N=(I-P)*T+P,ie=(N-L)*T+L;A[0]=D,A[1]=L,A[2]=ie,A[3]=ie,A[4]=N,A[5]=I}function B(D,P,I,T,A,L,N,ie,oe){var ae,he=.005,se=1/0;de[0]=N,de[1]=ie;for(var xe=0;xe<1;xe+=.05)j[0]=H(D,I,A,xe),j[1]=H(P,T,L,xe),(fe=(0,le.distSquare)(de,j))<se&&(ae=xe,se=fe);se=1/0;for(var ge=0;ge<32&&!(he<1e-4);ge++){var Ce=ae-he,Te=ae+he;j[0]=H(D,I,A,Ce),j[1]=H(P,T,L,Ce);var fe=(0,le.distSquare)(j,de);if(Ce>=0&&fe<se)ae=Ce,se=fe;else{$[0]=H(D,I,A,Te),$[1]=H(P,T,L,Te);var Ie=(0,le.distSquare)($,de);Te<=1&&Ie<se?(ae=Te,se=Ie):he*=.5}}return oe&&(oe[0]=H(D,I,A,ae),oe[1]=H(P,T,L,ae)),ce(se)}function O(D,P,I,T,A,L,N){for(var ie=D,oe=P,ae=0,he=1/N,se=1;se<=N;se++){var xe=se*he,fe=H(D,I,A,xe),ge=H(P,T,L,xe),Ce=fe-ie,Te=ge-oe;ae+=Math.sqrt(Ce*Ce+Te*Te),ie=fe,oe=ge}return ae}},5853:(Ut,rt,z)=>{z.d(rt,{F1:()=>ee,UK:()=>G,A4:()=>de,YB:()=>we});var le=z(9420),Se=Math.log(2);function ce(Q,J,b,Y,q,H){var re=Y+"-"+q,W=Q.length;if(H.hasOwnProperty(re))return H[re];if(1===J){var X=Math.round(Math.log((1<<W)-1&~q)/Se);return Q[b][X]}for(var K=Y|1<<b,B=b+1;Y&1<<B;)B++;for(var O=0,D=0,P=0;D<W;D++){var I=1<<D;I&q||(O+=(P%2?-1:1)*Q[b][D]*ce(Q,J-1,B,K,q|I,H),P++)}return H[re]=O,O}function _e(Q,J){var b=[[Q[0],Q[1],1,0,0,0,-J[0]*Q[0],-J[0]*Q[1]],[0,0,0,Q[0],Q[1],1,-J[1]*Q[0],-J[1]*Q[1]],[Q[2],Q[3],1,0,0,0,-J[2]*Q[2],-J[2]*Q[3]],[0,0,0,Q[2],Q[3],1,-J[3]*Q[2],-J[3]*Q[3]],[Q[4],Q[5],1,0,0,0,-J[4]*Q[4],-J[4]*Q[5]],[0,0,0,Q[4],Q[5],1,-J[5]*Q[4],-J[5]*Q[5]],[Q[6],Q[7],1,0,0,0,-J[6]*Q[6],-J[6]*Q[7]],[0,0,0,Q[6],Q[7],1,-J[7]*Q[6],-J[7]*Q[7]]],Y={},q=ce(b,8,0,0,0,Y);if(0!==q){for(var H=[],re=0;re<8;re++)for(var W=0;W<8;W++)null==H[W]&&(H[W]=0),H[W]+=((re+W)%2?-1:1)*ce(b,7,0===re?1:0,1<<re,1<<W,Y)/q*J[re];return function(X,K,B){var O=K*H[6]+B*H[7]+1;X[0]=(K*H[0]+B*H[1]+H[2])/O,X[1]=(K*H[3]+B*H[4]+H[5])/O}}}var ye="___zrEVENTSAVED",be=[];function we(Q,J,b,Y,q){return de(be,J,Y,q,!0)&&de(Q,b,be[0],be[1])}function de(Q,J,b,Y,q){if(J.getBoundingClientRect&&le.Z.domSupported&&!G(J)){var H=J[ye]||(J[ye]={}),re=function j(Q,J){var b=J.markers;if(b)return b;b=J.markers=[];for(var Y=["left","right"],q=["top","bottom"],H=0;H<4;H++){var re=document.createElement("div"),X=H%2,K=(H>>1)%2;re.style.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",Y[X]+":0",q[K]+":0",Y[1-X]+":auto",q[1-K]+":auto",""].join("!important;"),Q.appendChild(re),b.push(re)}return b}(J,H),W=function $(Q,J,b){for(var Y=b?"invTrans":"trans",q=J[Y],H=J.srcCoords,re=[],W=[],X=!0,K=0;K<4;K++){var B=Q[K].getBoundingClientRect(),O=2*K,D=B.left,P=B.top;re.push(D,P),X=X&&H&&D===H[O]&&P===H[O+1],W.push(Q[K].offsetLeft,Q[K].offsetTop)}return X&&q?q:(J.srcCoords=re,J[Y]=b?_e(W,re):_e(re,W))}(re,H,q);if(W)return W(Q,b,Y),!0}return!1}function G(Q){return"CANVAS"===Q.nodeName.toUpperCase()}var Z=/([&<>"'])/g,te={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function ee(Q){return null==Q?"":(Q+"").replace(Z,function(J,b){return te[b]})}},9420:(Ut,rt,z)=>{z.d(rt,{Z:()=>ye});var le=function be(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1},ce=new function be(){this.browser=new le,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"};"object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?(ce.wxa=!0,ce.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?ce.worker=!0:typeof navigator>"u"||0===navigator.userAgent.indexOf("Node.js")?(ce.node=!0,ce.svgSupported=!0):function _e(be,we){var de=we.browser,j=be.match(/Firefox\/([\d.]+)/),$=be.match(/MSIE\s([\d.]+)/)||be.match(/Trident\/.+?rv:(([\d.]+))/),G=be.match(/Edge?\/([\d.]+)/),Z=/micromessenger/i.test(be);j&&(de.firefox=!0,de.version=j[1]),$&&(de.ie=!0,de.version=$[1]),G&&(de.edge=!0,de.version=G[1],de.newEdge=+G[1].split(".")[0]>18),Z&&(de.weChat=!0),we.svgSupported=typeof SVGRect<"u",we.touchEventsSupported="ontouchstart"in window&&!de.ie&&!de.edge,we.pointerEventsSupported="onpointerdown"in window&&(de.edge||de.ie&&+de.version>=11),we.domSupported=typeof document<"u";var te=document.documentElement.style;we.transform3dSupported=(de.ie&&"transition"in te||de.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in te)&&!("OTransition"in te),we.transformSupported=we.transform3dSupported||de.ie&&+de.version>=9}(navigator.userAgent,ce);const ye=ce},2614:(Ut,rt,z)=>{z.d(rt,{OD:()=>j,Oo:()=>G,eV:()=>be,iP:()=>de,sT:()=>te,x1:()=>ee,xg:()=>Z});var le=z(9420),Se=z(5853),ce=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_e=[],ye=le.Z.browser.firefox&&+le.Z.browser.version.split(".")[0]<39;function be(Q,J,b,Y){return b=b||{},Y?we(Q,J,b):ye&&null!=J.layerX&&J.layerX!==J.offsetX?(b.zrX=J.layerX,b.zrY=J.layerY):null!=J.offsetX?(b.zrX=J.offsetX,b.zrY=J.offsetY):we(Q,J,b),b}function we(Q,J,b){if(le.Z.domSupported&&Q.getBoundingClientRect){var Y=J.clientX,q=J.clientY;if((0,Se.UK)(Q)){var H=Q.getBoundingClientRect();return b.zrX=Y-H.left,void(b.zrY=q-H.top)}if((0,Se.A4)(_e,Q,Y,q))return b.zrX=_e[0],void(b.zrY=_e[1])}b.zrX=b.zrY=0}function de(Q){return Q||window.event}function j(Q,J,b){if(null!=(J=de(J)).zrX)return J;var Y=J.type;if(Y&&Y.indexOf("touch")>=0){var re="touchend"!==Y?J.targetTouches[0]:J.changedTouches[0];re&&be(Q,re,J,b)}else{be(Q,J,J,b);var H=function $(Q){var J=Q.wheelDelta;if(J)return J;var b=Q.deltaX,Y=Q.deltaY;return null==b||null==Y?J:3*Math.abs(0!==Y?Y:b)*(Y>0?-1:Y<0?1:b>0?-1:1)}(J);J.zrDelta=H?H/120:-(J.detail||0)/3}var W=J.button;return null==J.which&&void 0!==W&&ce.test(J.type)&&(J.which=1&W?1:2&W?3:4&W?2:0),J}function G(Q,J,b,Y){Q.addEventListener(J,b,Y)}function Z(Q,J,b,Y){Q.removeEventListener(J,b,Y)}var te=function(Q){Q.preventDefault(),Q.stopPropagation(),Q.cancelBubble=!0};function ee(Q){return 2===Q.which||3===Q.which}},619:(Ut,rt,z)=>{function le(){return[1,0,0,1,0,0]}function Se($){return $[0]=1,$[1]=0,$[2]=0,$[3]=1,$[4]=0,$[5]=0,$}function ce($,G){return $[0]=G[0],$[1]=G[1],$[2]=G[2],$[3]=G[3],$[4]=G[4],$[5]=G[5],$}function _e($,G,Z){var ee=G[1]*Z[0]+G[3]*Z[1],Q=G[0]*Z[2]+G[2]*Z[3],J=G[1]*Z[2]+G[3]*Z[3],b=G[0]*Z[4]+G[2]*Z[5]+G[4],Y=G[1]*Z[4]+G[3]*Z[5]+G[5];return $[0]=G[0]*Z[0]+G[2]*Z[1],$[1]=ee,$[2]=Q,$[3]=J,$[4]=b,$[5]=Y,$}function ye($,G,Z){return $[0]=G[0],$[1]=G[1],$[2]=G[2],$[3]=G[3],$[4]=G[4]+Z[0],$[5]=G[5]+Z[1],$}function be($,G,Z,te){void 0===te&&(te=[0,0]);var ee=G[0],Q=G[2],J=G[4],b=G[1],Y=G[3],q=G[5],H=Math.sin(Z),re=Math.cos(Z);return $[0]=ee*re+b*H,$[1]=-ee*H+b*re,$[2]=Q*re+Y*H,$[3]=-Q*H+re*Y,$[4]=re*(J-te[0])+H*(q-te[1])+te[0],$[5]=re*(q-te[1])-H*(J-te[0])+te[1],$}function we($,G,Z){var te=Z[0],ee=Z[1];return $[0]=G[0]*te,$[1]=G[1]*ee,$[2]=G[2]*te,$[3]=G[3]*ee,$[4]=G[4]*te,$[5]=G[5]*ee,$}function de($,G){var Z=G[0],te=G[2],ee=G[4],Q=G[1],J=G[3],b=G[5],Y=Z*J-Q*te;return Y?($[0]=J*(Y=1/Y),$[1]=-Q*Y,$[2]=-te*Y,$[3]=Z*Y,$[4]=(te*b-J*ee)*Y,$[5]=(Q*ee-Z*b)*Y,$):null}function j($){var G=[1,0,0,1,0,0];return ce(G,$),G}z.r(rt),z.d(rt,{clone:()=>j,copy:()=>ce,create:()=>le,identity:()=>Se,invert:()=>de,mul:()=>_e,rotate:()=>be,scale:()=>we,translate:()=>ye})},3691:(Ut,rt,z)=>{z.d(rt,{Uo:()=>ce,g2:()=>$,n5:()=>le,qW:()=>j,rk:()=>Se});var G,Z,le=12,Se="sans-serif",ce=le+"px "+Se,de=function we(G){var Z={};if(typeof JSON>"u")return Z;for(var te=0;te<G.length;te++){var ee=String.fromCharCode(te+32),Q=(G.charCodeAt(te)-20)/100;Z[ee]=Q}return Z}("007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N"),j={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(te,ee){if(!G){var Q=j.createCanvas();G=Q&&Q.getContext("2d")}if(G)return Z!==ee&&(Z=G.font=ee||ce),G.measureText(te);te=te||"";var J=/((?:\d+)?\.?\d*)px/.exec(ee=ee||ce),b=J&&+J[1]||le,Y=0;if(ee.indexOf("mono")>=0)Y=b*te.length;else for(var q=0;q<te.length;q++){var H=de[te[q]];Y+=null==H?b:H*b}return{width:Y}},loadImage:function(G,Z,te){var ee=new Image;return ee.onload=Z,ee.onerror=te,ee.src=G,ee}};function $(G){for(var Z in j)G[Z]&&(j[Z]=G[Z])}},445:(Ut,rt,z)=>{function _e(G,Z,te,ee){var Q=Z+1;if(Q===te)return 1;if(ee(G[Q++],G[Z])<0){for(;Q<te&&ee(G[Q],G[Q-1])<0;)Q++;!function ye(G,Z,te){for(te--;Z<te;){var ee=G[Z];G[Z++]=G[te],G[te--]=ee}}(G,Z,Q)}else for(;Q<te&&ee(G[Q],G[Q-1])>=0;)Q++;return Q-Z}function be(G,Z,te,ee,Q){for(ee===Z&&ee++;ee<te;ee++){for(var q,J=G[ee],b=Z,Y=ee;b<Y;)Q(J,G[q=b+Y>>>1])<0?Y=q:b=q+1;var H=ee-b;switch(H){case 3:G[b+3]=G[b+2];case 2:G[b+2]=G[b+1];case 1:G[b+1]=G[b];break;default:for(;H>0;)G[b+H]=G[b+H-1],H--}G[b]=J}}function we(G,Z,te,ee,Q,J){var b=0,Y=0,q=1;if(J(G,Z[te+Q])>0){for(Y=ee-Q;q<Y&&J(G,Z[te+Q+q])>0;)b=q,(q=1+(q<<1))<=0&&(q=Y);q>Y&&(q=Y),b+=Q,q+=Q}else{for(Y=Q+1;q<Y&&J(G,Z[te+Q-q])<=0;)b=q,(q=1+(q<<1))<=0&&(q=Y);q>Y&&(q=Y);var H=b;b=Q-q,q=Q-H}for(b++;b<q;){var re=b+(q-b>>>1);J(G,Z[te+re])>0?b=re+1:q=re}return q}function de(G,Z,te,ee,Q,J){var b=0,Y=0,q=1;if(J(G,Z[te+Q])<0){for(Y=Q+1;q<Y&&J(G,Z[te+Q-q])<0;)b=q,(q=1+(q<<1))<=0&&(q=Y);q>Y&&(q=Y);var H=b;b=Q-q,q=Q-H}else{for(Y=ee-Q;q<Y&&J(G,Z[te+Q+q])>=0;)b=q,(q=1+(q<<1))<=0&&(q=Y);q>Y&&(q=Y),b+=Q,q+=Q}for(b++;b<q;){var re=b+(q-b>>>1);J(G,Z[te+re])<0?q=re:b=re+1}return q}function $(G,Z,te,ee){te||(te=0),ee||(ee=G.length);var Q=ee-te;if(!(Q<2)){var J=0;if(Q<32)return void be(G,te,ee,te+(J=_e(G,te,ee,Z)),Z);var b=function j(G,Z){var ee,Q,te=7,J=0,b=[];function re(K){var B=ee[K],O=Q[K],D=ee[K+1],P=Q[K+1];Q[K]=O+P,K===J-3&&(ee[K+1]=ee[K+2],Q[K+1]=Q[K+2]),J--;var I=de(G[D],G,B,O,0,Z);B+=I,0!=(O-=I)&&0!==(P=we(G[B+O-1],G,D,P,P-1,Z))&&(O<=P?function W(K,B,O,D){var P=0;for(P=0;P<B;P++)b[P]=G[K+P];var I=0,T=O,A=K;if(G[A++]=G[T++],0!=--D)if(1!==B){for(var N,ie,oe,L=te;;){N=0,ie=0,oe=!1;do{if(Z(G[T],b[I])<0){if(G[A++]=G[T++],ie++,N=0,0==--D){oe=!0;break}}else if(G[A++]=b[I++],N++,ie=0,1==--B){oe=!0;break}}while((N|ie)<L);if(oe)break;do{if(0!==(N=de(G[T],b,I,B,0,Z))){for(P=0;P<N;P++)G[A+P]=b[I+P];if(A+=N,I+=N,(B-=N)<=1){oe=!0;break}}if(G[A++]=G[T++],0==--D){oe=!0;break}if(0!==(ie=we(b[I],G,T,D,0,Z))){for(P=0;P<ie;P++)G[A+P]=G[T+P];if(A+=ie,T+=ie,0==(D-=ie)){oe=!0;break}}if(G[A++]=b[I++],1==--B){oe=!0;break}L--}while(N>=7||ie>=7);if(oe)break;L<0&&(L=0),L+=2}if((te=L)<1&&(te=1),1===B){for(P=0;P<D;P++)G[A+P]=G[T+P];G[A+D]=b[I]}else{if(0===B)throw new Error;for(P=0;P<B;P++)G[A+P]=b[I+P]}}else{for(P=0;P<D;P++)G[A+P]=G[T+P];G[A+D]=b[I]}else for(P=0;P<B;P++)G[A+P]=b[I+P]}(B,O,D,P):function X(K,B,O,D){var P=0;for(P=0;P<D;P++)b[P]=G[O+P];var I=K+B-1,T=D-1,A=O+D-1,L=0,N=0;if(G[A--]=G[I--],0!=--B)if(1!==D){for(var ie=te;;){var oe=0,ae=0,he=!1;do{if(Z(b[T],G[I])<0){if(G[A--]=G[I--],oe++,ae=0,0==--B){he=!0;break}}else if(G[A--]=b[T--],ae++,oe=0,1==--D){he=!0;break}}while((oe|ae)<ie);if(he)break;do{if(0!=(oe=B-de(b[T],G,K,B,B-1,Z))){for(B-=oe,N=1+(A-=oe),L=1+(I-=oe),P=oe-1;P>=0;P--)G[N+P]=G[L+P];if(0===B){he=!0;break}}if(G[A--]=b[T--],1==--D){he=!0;break}if(0!=(ae=D-we(G[I],b,0,D,D-1,Z))){for(D-=ae,N=1+(A-=ae),L=1+(T-=ae),P=0;P<ae;P++)G[N+P]=b[L+P];if(D<=1){he=!0;break}}if(G[A--]=G[I--],0==--B){he=!0;break}ie--}while(oe>=7||ae>=7);if(he)break;ie<0&&(ie=0),ie+=2}if((te=ie)<1&&(te=1),1===D){for(N=1+(A-=B),L=1+(I-=B),P=B-1;P>=0;P--)G[N+P]=G[L+P];G[A]=b[T]}else{if(0===D)throw new Error;for(L=A-(D-1),P=0;P<D;P++)G[L+P]=b[P]}}else{for(N=1+(A-=B),L=1+(I-=B),P=B-1;P>=0;P--)G[N+P]=G[L+P];G[A]=b[T]}else for(L=A-(D-1),P=0;P<D;P++)G[L+P]=b[P]}(B,O,D,P))}return ee=[],Q=[],{mergeRuns:function q(){for(;J>1;){var K=J-2;if(K>=1&&Q[K-1]<=Q[K]+Q[K+1]||K>=2&&Q[K-2]<=Q[K]+Q[K-1])Q[K-1]<Q[K+1]&&K--;else if(Q[K]>Q[K+1])break;re(K)}},forceMergeRuns:function H(){for(;J>1;){var K=J-2;K>0&&Q[K-1]<Q[K+1]&&K--,re(K)}},pushRun:function Y(K,B){ee[J]=K,Q[J]=B,J+=1}}}(G,Z),Y=function ce(G){for(var Z=0;G>=32;)Z|=1&G,G>>=1;return G+Z}(Q);do{if((J=_e(G,te,ee,Z))<Y){var q=Q;q>Y&&(q=Y),be(G,te,te+q,te+J,Z),J=q}b.pushRun(te,J),b.mergeRuns(),Q-=J,te+=J}while(0!==Q);b.forceMergeRuns()}}z.d(rt,{Z:()=>$})},9496:(Ut,rt,z)=>{z.r(rt),z.d(rt,{HashMap:()=>rr,RADIAN_TO_DEGREE:()=>gr,assert:()=>Vt,bind:()=>N,clone:()=>J,concatArray:()=>un,createCanvas:()=>re,createHashMap:()=>Qt,createObject:()=>Pn,curry:()=>ie,defaults:()=>H,disableUserSelect:()=>Nn,each:()=>O,eqNaN:()=>ze,extend:()=>q,filter:()=>I,find:()=>T,guid:()=>ee,hasOwn:()=>jn,indexOf:()=>W,inherits:()=>X,isArray:()=>oe,isArrayLike:()=>B,isBuiltInObject:()=>ge,isDom:()=>Te,isFunction:()=>ae,isGradientObject:()=>Ie,isImagePatternObject:()=>Ee,isNumber:()=>xe,isObject:()=>fe,isPrimitive:()=>wn,isRegExp:()=>Ve,isString:()=>he,isStringSafe:()=>se,isTypedArray:()=>Ce,keys:()=>A,logError:()=>Q,map:()=>D,merge:()=>b,mergeAll:()=>Y,mixin:()=>K,noop:()=>xr,normalizeCssArray:()=>At,reduce:()=>P,retrieve:()=>We,retrieve2:()=>tt,retrieve3:()=>st,setAsPrimitive:()=>fn,slice:()=>Tt,trim:()=>Wt});var le=z(3691),Se=P(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(Je,wt){return Je["[object "+wt+"]"]=!0,Je},{}),ce=P(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(Je,wt){return Je["[object "+wt+"Array]"]=!0,Je},{}),_e=Object.prototype.toString,ye=Array.prototype,be=ye.forEach,we=ye.filter,de=ye.slice,j=ye.map,$=function(){}.constructor,G=$?$.prototype:null,Z="__proto__",te=2311;function ee(){return te++}function Q(){for(var Je=[],wt=0;wt<arguments.length;wt++)Je[wt]=arguments[wt];typeof console<"u"&&console.error.apply(console,Je)}function J(Je){if(null==Je||"object"!=typeof Je)return Je;var wt=Je,nn=_e.call(Je);if("[object Array]"===nn){if(!wn(Je)){wt=[];for(var Xt=0,dt=Je.length;Xt<dt;Xt++)wt[Xt]=J(Je[Xt])}}else if(ce[nn]){if(!wn(Je)){var Lt=Je.constructor;if(Lt.from)wt=Lt.from(Je);else for(wt=new Lt(Je.length),Xt=0,dt=Je.length;Xt<dt;Xt++)wt[Xt]=Je[Xt]}}else if(!Se[nn]&&!wn(Je)&&!Te(Je))for(var qt in wt={},Je)Je.hasOwnProperty(qt)&&qt!==Z&&(wt[qt]=J(Je[qt]));return wt}function b(Je,wt,nn){if(!fe(wt)||!fe(Je))return nn?J(wt):Je;for(var Xt in wt)if(wt.hasOwnProperty(Xt)&&Xt!==Z){var dt=Je[Xt],Lt=wt[Xt];!fe(Lt)||!fe(dt)||oe(Lt)||oe(dt)||Te(Lt)||Te(dt)||ge(Lt)||ge(dt)||wn(Lt)||wn(dt)?(nn||!(Xt in Je))&&(Je[Xt]=J(wt[Xt])):b(dt,Lt,nn)}return Je}function Y(Je,wt){for(var nn=Je[0],Xt=1,dt=Je.length;Xt<dt;Xt++)nn=b(nn,Je[Xt],wt);return nn}function q(Je,wt){if(Object.assign)Object.assign(Je,wt);else for(var nn in wt)wt.hasOwnProperty(nn)&&nn!==Z&&(Je[nn]=wt[nn]);return Je}function H(Je,wt,nn){for(var Xt=A(wt),dt=0;dt<Xt.length;dt++){var Lt=Xt[dt];(nn?null!=wt[Lt]:null==Je[Lt])&&(Je[Lt]=wt[Lt])}return Je}var re=le.qW.createCanvas;function W(Je,wt){if(Je){if(Je.indexOf)return Je.indexOf(wt);for(var nn=0,Xt=Je.length;nn<Xt;nn++)if(Je[nn]===wt)return nn}return-1}function X(Je,wt){var nn=Je.prototype;function Xt(){}for(var dt in Xt.prototype=wt.prototype,Je.prototype=new Xt,nn)nn.hasOwnProperty(dt)&&(Je.prototype[dt]=nn[dt]);Je.prototype.constructor=Je,Je.superClass=wt}function K(Je,wt,nn){if(Je="prototype"in Je?Je.prototype:Je,wt="prototype"in wt?wt.prototype:wt,Object.getOwnPropertyNames)for(var Xt=Object.getOwnPropertyNames(wt),dt=0;dt<Xt.length;dt++){var Lt=Xt[dt];"constructor"!==Lt&&(nn?null!=wt[Lt]:null==Je[Lt])&&(Je[Lt]=wt[Lt])}else H(Je,wt,nn)}function B(Je){return!(!Je||"string"==typeof Je)&&"number"==typeof Je.length}function O(Je,wt,nn){if(Je&&wt)if(Je.forEach&&Je.forEach===be)Je.forEach(wt,nn);else if(Je.length===+Je.length)for(var Xt=0,dt=Je.length;Xt<dt;Xt++)wt.call(nn,Je[Xt],Xt,Je);else for(var Lt in Je)Je.hasOwnProperty(Lt)&&wt.call(nn,Je[Lt],Lt,Je)}function D(Je,wt,nn){if(!Je)return[];if(!wt)return Tt(Je);if(Je.map&&Je.map===j)return Je.map(wt,nn);for(var Xt=[],dt=0,Lt=Je.length;dt<Lt;dt++)Xt.push(wt.call(nn,Je[dt],dt,Je));return Xt}function P(Je,wt,nn,Xt){if(Je&&wt){for(var dt=0,Lt=Je.length;dt<Lt;dt++)nn=wt.call(Xt,nn,Je[dt],dt,Je);return nn}}function I(Je,wt,nn){if(!Je)return[];if(!wt)return Tt(Je);if(Je.filter&&Je.filter===we)return Je.filter(wt,nn);for(var Xt=[],dt=0,Lt=Je.length;dt<Lt;dt++)wt.call(nn,Je[dt],dt,Je)&&Xt.push(Je[dt]);return Xt}function T(Je,wt,nn){if(Je&&wt)for(var Xt=0,dt=Je.length;Xt<dt;Xt++)if(wt.call(nn,Je[Xt],Xt,Je))return Je[Xt]}function A(Je){if(!Je)return[];if(Object.keys)return Object.keys(Je);var wt=[];for(var nn in Je)Je.hasOwnProperty(nn)&&wt.push(nn);return wt}var N=G&&ae(G.bind)?G.call.bind(G.bind):function L(Je,wt){for(var nn=[],Xt=2;Xt<arguments.length;Xt++)nn[Xt-2]=arguments[Xt];return function(){return Je.apply(wt,nn.concat(de.call(arguments)))}};function ie(Je){for(var wt=[],nn=1;nn<arguments.length;nn++)wt[nn-1]=arguments[nn];return function(){return Je.apply(this,wt.concat(de.call(arguments)))}}function oe(Je){return Array.isArray?Array.isArray(Je):"[object Array]"===_e.call(Je)}function ae(Je){return"function"==typeof Je}function he(Je){return"string"==typeof Je}function se(Je){return"[object String]"===_e.call(Je)}function xe(Je){return"number"==typeof Je}function fe(Je){var wt=typeof Je;return"function"===wt||!!Je&&"object"===wt}function ge(Je){return!!Se[_e.call(Je)]}function Ce(Je){return!!ce[_e.call(Je)]}function Te(Je){return"object"==typeof Je&&"number"==typeof Je.nodeType&&"object"==typeof Je.ownerDocument}function Ie(Je){return null!=Je.colorStops}function Ee(Je){return null!=Je.image}function Ve(Je){return"[object RegExp]"===_e.call(Je)}function ze(Je){return Je!=Je}function We(){for(var Je=[],wt=0;wt<arguments.length;wt++)Je[wt]=arguments[wt];for(var nn=0,Xt=Je.length;nn<Xt;nn++)if(null!=Je[nn])return Je[nn]}function tt(Je,wt){return Je??wt}function st(Je,wt,nn){return Je??wt??nn}function Tt(Je){for(var wt=[],nn=1;nn<arguments.length;nn++)wt[nn-1]=arguments[nn];return de.apply(Je,wt)}function At(Je){if("number"==typeof Je)return[Je,Je,Je,Je];var wt=Je.length;return 2===wt?[Je[0],Je[1],Je[0],Je[1]]:3===wt?[Je[0],Je[1],Je[2],Je[1]]:Je}function Vt(Je,wt){if(!Je)throw new Error(wt)}function Wt(Je){return null==Je?null:"function"==typeof Je.trim?Je.trim():Je.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var kt="__ec_primitive__";function fn(Je){Je[kt]=!0}function wn(Je){return Je[kt]}var sr=function(){function Je(){this.data={}}return Je.prototype.delete=function(wt){var nn=this.has(wt);return nn&&delete this.data[wt],nn},Je.prototype.has=function(wt){return this.data.hasOwnProperty(wt)},Je.prototype.get=function(wt){return this.data[wt]},Je.prototype.set=function(wt,nn){return this.data[wt]=nn,this},Je.prototype.keys=function(){return A(this.data)},Je.prototype.forEach=function(wt){var nn=this.data;for(var Xt in nn)nn.hasOwnProperty(Xt)&&wt(nn[Xt],Xt)},Je}(),Xn="function"==typeof Map,rr=function(){function Je(wt){var nn=oe(wt);this.data=function pr(){return Xn?new Map:new sr}();var Xt=this;function dt(Lt,qt){nn?Xt.set(Lt,qt):Xt.set(qt,Lt)}wt instanceof Je?wt.each(dt):wt&&O(wt,dt)}return Je.prototype.hasKey=function(wt){return this.data.has(wt)},Je.prototype.get=function(wt){return this.data.get(wt)},Je.prototype.set=function(wt,nn){return this.data.set(wt,nn),nn},Je.prototype.each=function(wt,nn){this.data.forEach(function(Xt,dt){wt.call(nn,Xt,dt)})},Je.prototype.keys=function(){var wt=this.data.keys();return Xn?Array.from(wt):wt},Je.prototype.removeKey=function(wt){this.data.delete(wt)},Je}();function Qt(Je){return new rr(Je)}function un(Je,wt){for(var nn=new Je.constructor(Je.length+wt.length),Xt=0;Xt<Je.length;Xt++)nn[Xt]=Je[Xt];var dt=Je.length;for(Xt=0;Xt<wt.length;Xt++)nn[Xt+dt]=wt[Xt];return nn}function Pn(Je,wt){var nn;if(Object.create)nn=Object.create(Je);else{var Xt=function(){};Xt.prototype=Je,nn=new Xt}return wt&&q(nn,wt),nn}function Nn(Je){var wt=Je.style;wt.webkitUserSelect="none",wt.userSelect="none",wt.webkitTapHighlightColor="rgba(0,0,0,0)",wt["-webkit-touch-callout"]="none"}function jn(Je,wt){return Je.hasOwnProperty(wt)}function xr(){}var gr=180/Math.PI},5145:(Ut,rt,z)=>{function le(O,D){return null==O&&(O=0),null==D&&(D=0),[O,D]}function Se(O,D){return O[0]=D[0],O[1]=D[1],O}function ce(O){return[O[0],O[1]]}function _e(O,D,P){return O[0]=D,O[1]=P,O}function ye(O,D,P){return O[0]=D[0]+P[0],O[1]=D[1]+P[1],O}function be(O,D,P,I){return O[0]=D[0]+P[0]*I,O[1]=D[1]+P[1]*I,O}function we(O,D,P){return O[0]=D[0]-P[0],O[1]=D[1]-P[1],O}function de(O){return Math.sqrt($(O))}z.r(rt),z.d(rt,{add:()=>ye,applyTransform:()=>X,clone:()=>ce,copy:()=>Se,create:()=>le,dist:()=>Y,distSquare:()=>H,distance:()=>b,distanceSquare:()=>q,div:()=>te,dot:()=>ee,len:()=>de,lenSquare:()=>$,length:()=>j,lengthSquare:()=>G,lerp:()=>W,max:()=>B,min:()=>K,mul:()=>Z,negate:()=>re,normalize:()=>J,scale:()=>Q,scaleAndAdd:()=>be,set:()=>_e,sub:()=>we});var j=de;function $(O){return O[0]*O[0]+O[1]*O[1]}var G=$;function Z(O,D,P){return O[0]=D[0]*P[0],O[1]=D[1]*P[1],O}function te(O,D,P){return O[0]=D[0]/P[0],O[1]=D[1]/P[1],O}function ee(O,D){return O[0]*D[0]+O[1]*D[1]}function Q(O,D,P){return O[0]=D[0]*P,O[1]=D[1]*P,O}function J(O,D){var P=de(D);return 0===P?(O[0]=0,O[1]=0):(O[0]=D[0]/P,O[1]=D[1]/P),O}function b(O,D){return Math.sqrt((O[0]-D[0])*(O[0]-D[0])+(O[1]-D[1])*(O[1]-D[1]))}var Y=b;function q(O,D){return(O[0]-D[0])*(O[0]-D[0])+(O[1]-D[1])*(O[1]-D[1])}var H=q;function re(O,D){return O[0]=-D[0],O[1]=-D[1],O}function W(O,D,P,I){return O[0]=D[0]+I*(P[0]-D[0]),O[1]=D[1]+I*(P[1]-D[1]),O}function X(O,D,P){var I=D[0],T=D[1];return O[0]=P[0]*I+P[2]*T+P[4],O[1]=P[1]*I+P[3]*T+P[5],O}function K(O,D,P){return O[0]=Math.min(D[0],P[0]),O[1]=Math.min(D[1],P[1]),O}function B(O,D,P){return O[0]=Math.max(D[0],P[0]),O[1]=Math.max(D[1],P[1]),O}},3769:(Ut,rt,z)=>{z.d(rt,{Z:()=>_e});var le=z(908),Se=z(5489);const _e=function(ye){function be(){var we=null!==ye&&ye.apply(this,arguments)||this;return we.type="compound",we}return(0,le.ZT)(be,ye),be.prototype._updatePathDirty=function(){for(var we=this.shape.paths,de=this.shapeChanged(),j=0;j<we.length;j++)de=de||we[j].shapeChanged();de&&this.dirtyShape()},be.prototype.beforeBrush=function(){this._updatePathDirty();for(var we=this.shape.paths||[],de=this.getGlobalScale(),j=0;j<we.length;j++)we[j].path||we[j].createPathProxy(),we[j].path.setScale(de[0],de[1],we[j].segmentIgnoreThreshold)},be.prototype.buildPath=function(we,de){for(var j=de.paths||[],$=0;$<j.length;$++)j[$].buildPath(we,j[$].shape,!0)},be.prototype.afterBrush=function(){for(var we=this.shape.paths||[],de=0;de<we.length;de++)we[de].pathUpdated()},be.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Se.ZP.prototype.getBoundingRect.call(this)},be}(Se.ZP)},2320:(Ut,rt,z)=>{z.d(rt,{ZP:()=>Q,ik:()=>de,tj:()=>we});var le=z(908),Se=z(1580),ce=z(468),_e=z(9496),ye=z(6839),be="__zr_style_"+Math.round(10*Math.random()),we={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},de={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};we[be]=!0;var j=["z","z2","invisible"],$=["invisible"],G=function(J){function b(Y){return J.call(this,Y)||this}return(0,le.ZT)(b,J),b.prototype._init=function(Y){for(var q=(0,_e.keys)(Y),H=0;H<q.length;H++){var re=q[H];"style"===re?this.useStyle(Y[re]):J.prototype.attrKV.call(this,re,Y[re])}this.style||this.useStyle({})},b.prototype.beforeBrush=function(){},b.prototype.afterBrush=function(){},b.prototype.innerBeforeBrush=function(){},b.prototype.innerAfterBrush=function(){},b.prototype.shouldBePainted=function(Y,q,H,re){var W=this.transform;if(this.ignore||this.invisible||0===this.style.opacity||this.culling&&function ee(J,b,Y){return Z.copy(J.getBoundingRect()),J.transform&&Z.applyTransform(J.transform),te.width=b,te.height=Y,!Z.intersect(te)}(this,Y,q)||W&&!W[0]&&!W[3])return!1;if(H&&this.__clipPaths)for(var X=0;X<this.__clipPaths.length;++X)if(this.__clipPaths[X].isZeroArea())return!1;if(re&&this.parent)for(var K=this.parent;K;){if(K.ignore)return!1;K=K.parent}return!0},b.prototype.contain=function(Y,q){return this.rectContain(Y,q)},b.prototype.traverse=function(Y,q){Y.call(q,this)},b.prototype.rectContain=function(Y,q){var H=this.transformCoordToLocal(Y,q);return this.getBoundingRect().contain(H[0],H[1])},b.prototype.getPaintRect=function(){var Y=this._paintRect;if(!this._paintRect||this.__dirty){var q=this.transform,H=this.getBoundingRect(),re=this.style,W=re.shadowBlur||0,X=re.shadowOffsetX||0,K=re.shadowOffsetY||0;Y=this._paintRect||(this._paintRect=new ce.Z(0,0,0,0)),q?ce.Z.applyTransform(Y,H,q):Y.copy(H),(W||X||K)&&(Y.width+=2*W+Math.abs(X),Y.height+=2*W+Math.abs(K),Y.x=Math.min(Y.x,Y.x+X-W),Y.y=Math.min(Y.y,Y.y+K-W));var B=this.dirtyRectTolerance;Y.isZero()||(Y.x=Math.floor(Y.x-B),Y.y=Math.floor(Y.y-B),Y.width=Math.ceil(Y.width+1+2*B),Y.height=Math.ceil(Y.height+1+2*B))}return Y},b.prototype.setPrevPaintRect=function(Y){Y?(this._prevPaintRect=this._prevPaintRect||new ce.Z(0,0,0,0),this._prevPaintRect.copy(Y)):this._prevPaintRect=null},b.prototype.getPrevPaintRect=function(){return this._prevPaintRect},b.prototype.animateStyle=function(Y){return this.animate("style",Y)},b.prototype.updateDuringAnimation=function(Y){"style"===Y?this.dirtyStyle():this.markRedraw()},b.prototype.attrKV=function(Y,q){"style"!==Y?J.prototype.attrKV.call(this,Y,q):this.style?this.setStyle(q):this.useStyle(q)},b.prototype.setStyle=function(Y,q){return"string"==typeof Y?this.style[Y]=q:(0,_e.extend)(this.style,Y),this.dirtyStyle(),this},b.prototype.dirtyStyle=function(Y){Y||this.markRedraw(),this.__dirty|=ye.SE,this._rect&&(this._rect=null)},b.prototype.dirty=function(){this.dirtyStyle()},b.prototype.styleChanged=function(){return!!(this.__dirty&ye.SE)},b.prototype.styleUpdated=function(){this.__dirty&=~ye.SE},b.prototype.createStyle=function(Y){return(0,_e.createObject)(we,Y)},b.prototype.useStyle=function(Y){Y[be]||(Y=this.createStyle(Y)),this.__inHover?this.__hoverStyle=Y:this.style=Y,this.dirtyStyle()},b.prototype.isStyleObject=function(Y){return Y[be]},b.prototype._innerSaveToNormal=function(Y){J.prototype._innerSaveToNormal.call(this,Y);var q=this._normalState;Y.style&&!q.style&&(q.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(Y,q,j)},b.prototype._applyStateObj=function(Y,q,H,re,W,X){J.prototype._applyStateObj.call(this,Y,q,H,re,W,X);var B,K=!(q&&re);if(q&&q.style?W?re?B=q.style:(B=this._mergeStyle(this.createStyle(),H.style),this._mergeStyle(B,q.style)):(B=this._mergeStyle(this.createStyle(),re?this.style:H.style),this._mergeStyle(B,q.style)):K&&(B=H.style),B)if(W){var O=this.style;if(this.style=this.createStyle(K?{}:O),K)for(var D=(0,_e.keys)(O),P=0;P<D.length;P++)(I=D[P])in B&&(B[I]=B[I],this.style[I]=O[I]);var T=(0,_e.keys)(B);for(P=0;P<T.length;P++)this.style[I=T[P]]=this.style[I];this._transitionState(Y,{style:B},X,this.getAnimationStyleProps())}else this.useStyle(B);var A=this.__inHover?$:j;for(P=0;P<A.length;P++){var I=A[P];q&&null!=q[I]?this[I]=q[I]:K&&null!=H[I]&&(this[I]=H[I])}},b.prototype._mergeStates=function(Y){for(var H,q=J.prototype._mergeStates.call(this,Y),re=0;re<Y.length;re++){var W=Y[re];W.style&&this._mergeStyle(H=H||{},W.style)}return H&&(q.style=H),q},b.prototype._mergeStyle=function(Y,q){return(0,_e.extend)(Y,q),Y},b.prototype.getAnimationStyleProps=function(){return de},b.initDefaultProps=((Y=b.prototype).type="displayable",Y.invisible=!1,Y.z=0,Y.z2=0,Y.zlevel=0,Y.culling=!1,Y.cursor="pointer",Y.rectHover=!1,Y.incremental=!1,Y._rect=null,Y.dirtyRectTolerance=0,void(Y.__dirty=ye.YV|ye.SE)),b;var Y}(Se.Z),Z=new ce.Z(0,0,0,0),te=new ce.Z(0,0,0,0);const Q=G},6560:(Ut,rt,z)=>{z.d(rt,{Z:()=>Se});const Se=function(){function ce(_e){this.colorStops=_e||[]}return ce.prototype.addColorStop=function(_e,ye){this.colorStops.push({offset:_e,color:ye})},ce}()},189:(Ut,rt,z)=>{z.d(rt,{Z:()=>be});var le=z(908),Se=z(9496),ce=z(1580),_e=z(468),ye=function(we){function de(j){var $=we.call(this)||this;return $.isGroup=!0,$._children=[],$.attr(j),$}return(0,le.ZT)(de,we),de.prototype.childrenRef=function(){return this._children},de.prototype.children=function(){return this._children.slice()},de.prototype.childAt=function(j){return this._children[j]},de.prototype.childOfName=function(j){for(var $=this._children,G=0;G<$.length;G++)if($[G].name===j)return $[G]},de.prototype.childCount=function(){return this._children.length},de.prototype.add=function(j){return j&&j!==this&&j.parent!==this&&(this._children.push(j),this._doAdd(j)),this},de.prototype.addBefore=function(j,$){if(j&&j!==this&&j.parent!==this&&$&&$.parent===this){var G=this._children,Z=G.indexOf($);Z>=0&&(G.splice(Z,0,j),this._doAdd(j))}return this},de.prototype.replace=function(j,$){var G=Se.indexOf(this._children,j);return G>=0&&this.replaceAt($,G),this},de.prototype.replaceAt=function(j,$){var G=this._children,Z=G[$];if(j&&j!==this&&j.parent!==this&&j!==Z){G[$]=j,Z.parent=null;var te=this.__zr;te&&Z.removeSelfFromZr(te),this._doAdd(j)}return this},de.prototype._doAdd=function(j){j.parent&&j.parent.remove(j),j.parent=this;var $=this.__zr;$&&$!==j.__zr&&j.addSelfToZr($),$&&$.refresh()},de.prototype.remove=function(j){var $=this.__zr,G=this._children,Z=Se.indexOf(G,j);return Z<0||(G.splice(Z,1),j.parent=null,$&&j.removeSelfFromZr($),$&&$.refresh()),this},de.prototype.removeAll=function(){for(var j=this._children,$=this.__zr,G=0;G<j.length;G++){var Z=j[G];$&&Z.removeSelfFromZr($),Z.parent=null}return j.length=0,this},de.prototype.eachChild=function(j,$){for(var G=this._children,Z=0;Z<G.length;Z++)j.call($,G[Z],Z);return this},de.prototype.traverse=function(j,$){for(var G=0;G<this._children.length;G++){var Z=this._children[G],te=j.call($,Z);Z.isGroup&&!te&&Z.traverse(j,$)}return this},de.prototype.addSelfToZr=function(j){we.prototype.addSelfToZr.call(this,j);for(var $=0;$<this._children.length;$++)this._children[$].addSelfToZr(j)},de.prototype.removeSelfFromZr=function(j){we.prototype.removeSelfFromZr.call(this,j);for(var $=0;$<this._children.length;$++)this._children[$].removeSelfFromZr(j)},de.prototype.getBoundingRect=function(j){for(var $=new _e.Z(0,0,0,0),G=j||this._children,Z=[],te=null,ee=0;ee<G.length;ee++){var Q=G[ee];if(!Q.ignore&&!Q.invisible){var J=Q.getBoundingRect(),b=Q.getLocalTransform(Z);b?(_e.Z.applyTransform($,J,b),(te=te||$.clone()).union($)):(te=te||J.clone()).union(J)}}return te||$},de}(ce.Z);ye.prototype.type="group";const be=ye},6115:(Ut,rt,z)=>{z.d(rt,{ZP:()=>j});var le=z(908),Se=z(2320),ce=z(468),_e=z(9496),ye=(0,_e.defaults)({x:0,y:0},Se.tj),be={style:(0,_e.defaults)({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},Se.ik.style)},de=function($){function G(){return null!==$&&$.apply(this,arguments)||this}return(0,le.ZT)(G,$),G.prototype.createStyle=function(Z){return(0,_e.createObject)(ye,Z)},G.prototype._getSize=function(Z){var te=this.style,ee=te[Z];if(null!=ee)return ee;var Q=function we($){return!!($&&"string"!=typeof $&&$.width&&$.height)}(te.image)?te.image:this.__image;if(!Q)return 0;var J="width"===Z?"height":"width",b=te[J];return null==b?Q[Z]:Q[Z]/Q[J]*b},G.prototype.getWidth=function(){return this._getSize("width")},G.prototype.getHeight=function(){return this._getSize("height")},G.prototype.getAnimationStyleProps=function(){return be},G.prototype.getBoundingRect=function(){var Z=this.style;return this._rect||(this._rect=new ce.Z(Z.x||0,Z.y||0,this.getWidth(),this.getHeight())),this._rect},G}(Se.ZP);de.prototype.type="image";const j=de},1133:(Ut,rt,z)=>{z.d(rt,{Z:()=>be});var le=z(908),Se=z(2320),ce=z(468),_e=[];const be=function(we){function de(){var j=null!==we&&we.apply(this,arguments)||this;return j.notClear=!0,j.incremental=!0,j._displayables=[],j._temporaryDisplayables=[],j._cursor=0,j}return(0,le.ZT)(de,we),de.prototype.traverse=function(j,$){j.call($,this)},de.prototype.useStyle=function(){this.style={}},de.prototype.getCursor=function(){return this._cursor},de.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},de.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},de.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},de.prototype.addDisplayable=function(j,$){$?this._temporaryDisplayables.push(j):this._displayables.push(j),this.markRedraw()},de.prototype.addDisplayables=function(j,$){$=$||!1;for(var G=0;G<j.length;G++)this.addDisplayable(j[G],$)},de.prototype.getDisplayables=function(){return this._displayables},de.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},de.prototype.eachPendingDisplayable=function(j){for(var $=this._cursor;$<this._displayables.length;$++)j&&j(this._displayables[$]);for($=0;$<this._temporaryDisplayables.length;$++)j&&j(this._temporaryDisplayables[$])},de.prototype.update=function(){this.updateTransform();for(var j=this._cursor;j<this._displayables.length;j++)($=this._displayables[j]).parent=this,$.update(),$.parent=null;for(j=0;j<this._temporaryDisplayables.length;j++){var $;($=this._temporaryDisplayables[j]).parent=this,$.update(),$.parent=null}},de.prototype.getBoundingRect=function(){if(!this._rect){for(var j=new ce.Z(1/0,1/0,-1/0,-1/0),$=0;$<this._displayables.length;$++){var G=this._displayables[$],Z=G.getBoundingRect().clone();G.needLocalTransform()&&Z.applyTransform(G.getLocalTransform(_e)),j.union(Z)}this._rect=j}return this._rect},de.prototype.contain=function(j,$){var G=this.transformCoordToLocal(j,$);if(this.getBoundingRect().contain(G[0],G[1]))for(var te=0;te<this._displayables.length;te++)if(this._displayables[te].contain(j,$))return!0;return!1},de}(Se.ZP)},9869:(Ut,rt,z)=>{z.d(rt,{Z:()=>_e});var le=z(908);const _e=function(ye){function be(we,de,j,$,G,Z){var te=ye.call(this,G)||this;return te.x=we??0,te.y=de??0,te.x2=j??1,te.y2=$??0,te.type="linear",te.global=Z||!1,te}return(0,le.ZT)(be,ye),be}(z(6560).Z)},5489:(Ut,rt,z)=>{z.d(rt,{$t:()=>T,ZP:()=>ie});var le=z(908),Se=z(2320),ce=z(7899),_e=z(7739),ye=z(7315);function be(oe,ae,he,se,xe,fe,ge,Ce,Te,Ie,Ee){if(0===Te)return!1;var Ve=Te;return!(Ee>ae+Ve&&Ee>se+Ve&&Ee>fe+Ve&&Ee>Ce+Ve||Ee<ae-Ve&&Ee<se-Ve&&Ee<fe-Ve&&Ee<Ce-Ve||Ie>oe+Ve&&Ie>he+Ve&&Ie>xe+Ve&&Ie>ge+Ve||Ie<oe-Ve&&Ie<he-Ve&&Ie<xe-Ve&&Ie<ge-Ve)&&ye.t1(oe,ae,he,se,xe,fe,ge,Ce,Ie,Ee,null)<=Ve/2}var we=z(4239),de=z(5951),j=2*Math.PI;function $(oe,ae,he,se,xe,fe,ge,Ce,Te){if(0===ge)return!1;var Ie=ge;Ce-=oe,Te-=ae;var Ee=Math.sqrt(Ce*Ce+Te*Te);if(Ee-Ie>he||Ee+Ie<he)return!1;if(Math.abs(se-xe)%j<1e-4)return!0;if(fe){var Ve=se;se=(0,de.m)(xe),xe=(0,de.m)(Ve)}else se=(0,de.m)(se),xe=(0,de.m)(xe);se>xe&&(xe+=j);var ze=Math.atan2(Te,Ce);return ze<0&&(ze+=j),ze>=se&&ze<=xe||ze+j>=se&&ze+j<=xe}var G=z(3951),Z=ce.Z.CMD,te=2*Math.PI,J=[-1,-1,-1],b=[-1,-1];function Y(){var oe=b[0];b[0]=b[1],b[1]=oe}function q(oe,ae,he,se,xe,fe,ge,Ce,Te,Ie){if(Ie>ae&&Ie>se&&Ie>fe&&Ie>Ce||Ie<ae&&Ie<se&&Ie<fe&&Ie<Ce)return 0;var Ee=ye.kD(ae,se,fe,Ce,Ie,J);if(0===Ee)return 0;for(var Ve=0,ze=-1,We=void 0,tt=void 0,st=0;st<Ee;st++){var Tt=J[st],At=0===Tt||1===Tt?.5:1;ye.af(oe,he,xe,ge,Tt)<Te||(ze<0&&(ze=ye.pP(ae,se,fe,Ce,b),b[1]<b[0]&&ze>1&&Y(),We=ye.af(ae,se,fe,Ce,b[0]),ze>1&&(tt=ye.af(ae,se,fe,Ce,b[1]))),Ve+=2===ze?Tt<b[0]?We<ae?At:-At:Tt<b[1]?tt<We?At:-At:Ce<tt?At:-At:Tt<b[0]?We<ae?At:-At:Ce<We?At:-At)}return Ve}function H(oe,ae,he,se,xe,fe,ge,Ce){if(Ce>ae&&Ce>se&&Ce>fe||Ce<ae&&Ce<se&&Ce<fe)return 0;var Te=ye.Jz(ae,se,fe,Ce,J);if(0===Te)return 0;var Ie=ye.QC(ae,se,fe);if(Ie>=0&&Ie<=1){for(var Ee=0,Ve=ye.Zm(ae,se,fe,Ie),ze=0;ze<Te;ze++){var We=0===J[ze]||1===J[ze]?.5:1;ye.Zm(oe,he,xe,J[ze])<ge||(Ee+=J[ze]<Ie?Ve<ae?We:-We:fe<Ve?We:-We)}return Ee}return We=0===J[0]||1===J[0]?.5:1,ye.Zm(oe,he,xe,J[0])<ge?0:fe<ae?We:-We}function re(oe,ae,he,se,xe,fe,ge,Ce){if((Ce-=ae)>he||Ce<-he)return 0;var Te=Math.sqrt(he*he-Ce*Ce);J[0]=-Te,J[1]=Te;var Ie=Math.abs(se-xe);if(Ie<1e-4)return 0;if(Ie>=te-1e-4){se=0,xe=te;var Ee=fe?1:-1;return ge>=J[0]+oe&&ge<=J[1]+oe?Ee:0}if(se>xe){var Ve=se;se=xe,xe=Ve}se<0&&(se+=te,xe+=te);for(var ze=0,We=0;We<2;We++){var tt=J[We];if(tt+oe>ge){var st=Math.atan2(Ce,tt);Ee=fe?1:-1,st<0&&(st=te+st),(st>=se&&st<=xe||st+te>=se&&st+te<=xe)&&(st>Math.PI/2&&st<1.5*Math.PI&&(Ee=-Ee),ze+=Ee)}}return ze}function W(oe,ae,he,se,xe){for(var ze,We,fe=oe.data,ge=oe.len(),Ce=0,Te=0,Ie=0,Ee=0,Ve=0,tt=0;tt<ge;){var st=fe[tt++],Tt=1===tt;switch(st===Z.M&&tt>1&&(he||(Ce+=(0,G.Z)(Te,Ie,Ee,Ve,se,xe))),Tt&&(Ee=Te=fe[tt],Ve=Ie=fe[tt+1]),st){case Z.M:Te=Ee=fe[tt++],Ie=Ve=fe[tt++];break;case Z.L:if(he){if(_e.m(Te,Ie,fe[tt],fe[tt+1],ae,se,xe))return!0}else Ce+=(0,G.Z)(Te,Ie,fe[tt],fe[tt+1],se,xe)||0;Te=fe[tt++],Ie=fe[tt++];break;case Z.C:if(he){if(be(Te,Ie,fe[tt++],fe[tt++],fe[tt++],fe[tt++],fe[tt],fe[tt+1],ae,se,xe))return!0}else Ce+=q(Te,Ie,fe[tt++],fe[tt++],fe[tt++],fe[tt++],fe[tt],fe[tt+1],se,xe)||0;Te=fe[tt++],Ie=fe[tt++];break;case Z.Q:if(he){if(we.m(Te,Ie,fe[tt++],fe[tt++],fe[tt],fe[tt+1],ae,se,xe))return!0}else Ce+=H(Te,Ie,fe[tt++],fe[tt++],fe[tt],fe[tt+1],se,xe)||0;Te=fe[tt++],Ie=fe[tt++];break;case Z.A:var At=fe[tt++],Vt=fe[tt++],Wt=fe[tt++],kt=fe[tt++],fn=fe[tt++],wn=fe[tt++];tt+=1;var sr=!!(1-fe[tt++]);ze=Math.cos(fn)*Wt+At,We=Math.sin(fn)*kt+Vt,Tt?(Ee=ze,Ve=We):Ce+=(0,G.Z)(Te,Ie,ze,We,se,xe);var Xn=(se-At)*kt/Wt+At;if(he){if($(At,Vt,kt,fn,fn+wn,sr,ae,Xn,xe))return!0}else Ce+=re(At,Vt,kt,fn,fn+wn,sr,Xn,xe);Te=Math.cos(fn+wn)*Wt+At,Ie=Math.sin(fn+wn)*kt+Vt;break;case Z.R:if(Ee=Te=fe[tt++],Ve=Ie=fe[tt++],ze=Ee+fe[tt++],We=Ve+fe[tt++],he){if(_e.m(Ee,Ve,ze,Ve,ae,se,xe)||_e.m(ze,Ve,ze,We,ae,se,xe)||_e.m(ze,We,Ee,We,ae,se,xe)||_e.m(Ee,We,Ee,Ve,ae,se,xe))return!0}else Ce+=(0,G.Z)(ze,Ve,ze,We,se,xe),Ce+=(0,G.Z)(Ee,We,Ee,Ve,se,xe);break;case Z.Z:if(he){if(_e.m(Te,Ie,Ee,Ve,ae,se,xe))return!0}else Ce+=(0,G.Z)(Te,Ie,Ee,Ve,se,xe);Te=Ee,Ie=Ve}}return!he&&!function Q(oe,ae){return Math.abs(oe-ae)<1e-4}(Ie,Ve)&&(Ce+=(0,G.Z)(Te,Ie,Ee,Ve,se,xe)||0),0!==Ce}var B=z(9496),O=z(2523),D=z(9072),P=z(6839),I=z(4593),T=(0,B.defaults)({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Se.tj),A={style:(0,B.defaults)({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},Se.ik.style)},L=I.dN.concat(["invisible","culling","z","z2","zlevel","parent"]);const ie=function(oe){function ae(he){return oe.call(this,he)||this}return(0,le.ZT)(ae,oe),ae.prototype.update=function(){var he=this;oe.prototype.update.call(this);var se=this.style;if(se.decal){var xe=this._decalEl=this._decalEl||new ae;xe.buildPath===ae.prototype.buildPath&&(xe.buildPath=function(Te){he.buildPath(Te,he.shape)}),xe.silent=!0;var fe=xe.style;for(var ge in se)fe[ge]!==se[ge]&&(fe[ge]=se[ge]);fe.fill=se.fill?se.decal:null,fe.decal=null,fe.shadowColor=null,se.strokeFirst&&(fe.stroke=null);for(var Ce=0;Ce<L.length;++Ce)xe[L[Ce]]=this[L[Ce]];xe.__dirty|=P.YV}else this._decalEl&&(this._decalEl=null)},ae.prototype.getDecalElement=function(){return this._decalEl},ae.prototype._init=function(he){var se=(0,B.keys)(he);this.shape=this.getDefaultShape();var xe=this.getDefaultStyle();xe&&this.useStyle(xe);for(var fe=0;fe<se.length;fe++){var ge=se[fe],Ce=he[ge];"style"===ge?this.style?(0,B.extend)(this.style,Ce):this.useStyle(Ce):"shape"===ge?(0,B.extend)(this.shape,Ce):oe.prototype.attrKV.call(this,ge,Ce)}this.style||this.useStyle({})},ae.prototype.getDefaultStyle=function(){return null},ae.prototype.getDefaultShape=function(){return{}},ae.prototype.canBeInsideText=function(){return this.hasFill()},ae.prototype.getInsideTextFill=function(){var he=this.style.fill;if("none"!==he){if((0,B.isString)(he)){var se=(0,O.lum)(he,0);return se>.5?D.vU:se>.2?D.iv:D.GD}if(he)return D.GD}return D.vU},ae.prototype.getInsideTextStroke=function(he){var se=this.style.fill;if((0,B.isString)(se)){var xe=this.__zr;if(!(!xe||!xe.isDarkMode())==(0,O.lum)(he,0)<D.Ak)return se}},ae.prototype.buildPath=function(he,se,xe){},ae.prototype.pathUpdated=function(){this.__dirty&=~P.RH},ae.prototype.getUpdatedPathProxy=function(he){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,he),this.path},ae.prototype.createPathProxy=function(){this.path=new ce.Z(!1)},ae.prototype.hasStroke=function(){var he=this.style,se=he.stroke;return!(null==se||"none"===se||!(he.lineWidth>0))},ae.prototype.hasFill=function(){var se=this.style.fill;return null!=se&&"none"!==se},ae.prototype.getBoundingRect=function(){var he=this._rect,se=this.style,xe=!he;if(xe){var fe=!1;this.path||(fe=!0,this.createPathProxy());var ge=this.path;(fe||this.__dirty&P.RH)&&(ge.beginPath(),this.buildPath(ge,this.shape,!1),this.pathUpdated()),he=ge.getBoundingRect()}if(this._rect=he,this.hasStroke()&&this.path&&this.path.len()>0){var Ce=this._rectStroke||(this._rectStroke=he.clone());if(this.__dirty||xe){Ce.copy(he);var Te=se.strokeNoScale?this.getLineScale():1,Ie=se.lineWidth;this.hasFill()||(Ie=Math.max(Ie,this.strokeContainThreshold??4)),Te>1e-10&&(Ce.width+=Ie/Te,Ce.height+=Ie/Te,Ce.x-=Ie/Te/2,Ce.y-=Ie/Te/2)}return Ce}return he},ae.prototype.contain=function(he,se){var xe=this.transformCoordToLocal(he,se),fe=this.getBoundingRect(),ge=this.style;if(fe.contain(he=xe[0],se=xe[1])){var Ce=this.path;if(this.hasStroke()){var Te=ge.lineWidth,Ie=ge.strokeNoScale?this.getLineScale():1;if(Ie>1e-10&&(this.hasFill()||(Te=Math.max(Te,this.strokeContainThreshold)),function K(oe,ae,he,se){return W(oe,ae,!0,he,se)}(Ce,Te/Ie,he,se)))return!0}if(this.hasFill())return function X(oe,ae,he){return W(oe,0,!1,ae,he)}(Ce,he,se)}return!1},ae.prototype.dirtyShape=function(){this.__dirty|=P.RH,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},ae.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},ae.prototype.animateShape=function(he){return this.animate("shape",he)},ae.prototype.updateDuringAnimation=function(he){"style"===he?this.dirtyStyle():"shape"===he?this.dirtyShape():this.markRedraw()},ae.prototype.attrKV=function(he,se){"shape"===he?this.setShape(se):oe.prototype.attrKV.call(this,he,se)},ae.prototype.setShape=function(he,se){var xe=this.shape;return xe||(xe=this.shape={}),"string"==typeof he?xe[he]=se:(0,B.extend)(xe,he),this.dirtyShape(),this},ae.prototype.shapeChanged=function(){return!!(this.__dirty&P.RH)},ae.prototype.createStyle=function(he){return(0,B.createObject)(T,he)},ae.prototype._innerSaveToNormal=function(he){oe.prototype._innerSaveToNormal.call(this,he);var se=this._normalState;he.shape&&!se.shape&&(se.shape=(0,B.extend)({},this.shape))},ae.prototype._applyStateObj=function(he,se,xe,fe,ge,Ce){oe.prototype._applyStateObj.call(this,he,se,xe,fe,ge,Ce);var Ie,Te=!(se&&fe);if(se&&se.shape?ge?fe?Ie=se.shape:(Ie=(0,B.extend)({},xe.shape),(0,B.extend)(Ie,se.shape)):(Ie=(0,B.extend)({},fe?this.shape:xe.shape),(0,B.extend)(Ie,se.shape)):Te&&(Ie=xe.shape),Ie)if(ge){this.shape=(0,B.extend)({},this.shape);for(var Ee={},Ve=(0,B.keys)(Ie),ze=0;ze<Ve.length;ze++){var We=Ve[ze];"object"==typeof Ie[We]?this.shape[We]=Ie[We]:Ee[We]=Ie[We]}this._transitionState(he,{shape:Ee},Ce)}else this.shape=Ie,this.dirtyShape()},ae.prototype._mergeStates=function(he){for(var xe,se=oe.prototype._mergeStates.call(this,he),fe=0;fe<he.length;fe++){var ge=he[fe];ge.shape&&this._mergeStyle(xe=xe||{},ge.shape)}return xe&&(se.shape=xe),se},ae.prototype.getAnimationStyleProps=function(){return A},ae.prototype.isZeroArea=function(){return!1},ae.extend=function(he){var se=function(fe){function ge(Ce){var Te=fe.call(this,Ce)||this;return he.init&&he.init.call(Te,Ce),Te}return(0,le.ZT)(ge,fe),ge.prototype.getDefaultStyle=function(){return(0,B.clone)(he.style)},ge.prototype.getDefaultShape=function(){return(0,B.clone)(he.shape)},ge}(ae);for(var xe in he)"function"==typeof he[xe]&&(se.prototype[xe]=he[xe]);return se},ae.initDefaultProps=((he=ae.prototype).type="path",he.strokeContainThreshold=5,he.segmentIgnoreThreshold=0,he.subPixelOptimize=!1,he.autoBatch=!1,void(he.__dirty=P.YV|P.SE|P.RH)),ae;var he}(Se.ZP)},3622:(Ut,rt,z)=>{z.d(rt,{Z:()=>_e});var le=z(908);const _e=function(ye){function be(we,de,j,$,G){var Z=ye.call(this,$)||this;return Z.x=we??.5,Z.y=de??.5,Z.r=j??.5,Z.type="radial",Z.global=G||!1,Z}return(0,le.ZT)(be,ye),be}(z(6560).Z)},8442:(Ut,rt,z)=>{z.d(rt,{Z:()=>j});var le=z(908),Se=z(2320),ce=z(9733),_e=z(5489),ye=z(9496),be=z(3691),we=(0,ye.defaults)({strokeFirst:!0,font:be.Uo,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},_e.$t),de=function($){function G(){return null!==$&&$.apply(this,arguments)||this}return(0,le.ZT)(G,$),G.prototype.hasStroke=function(){var Z=this.style,te=Z.stroke;return null!=te&&"none"!==te&&Z.lineWidth>0},G.prototype.hasFill=function(){var te=this.style.fill;return null!=te&&"none"!==te},G.prototype.createStyle=function(Z){return(0,ye.createObject)(we,Z)},G.prototype.setBoundingRect=function(Z){this._rect=Z},G.prototype.getBoundingRect=function(){var Z=this.style;if(!this._rect){var te=Z.text;null!=te?te+="":te="";var ee=(0,ce.lP)(te,Z.font,Z.textAlign,Z.textBaseline);if(ee.x+=Z.x||0,ee.y+=Z.y||0,this.hasStroke()){var Q=Z.lineWidth;ee.x-=Q/2,ee.y-=Q/2,ee.width+=Q,ee.height+=Q}this._rect=ee}return this._rect},G.initDefaultProps=void(G.prototype.dirtyRectTolerance=10),G}(Se.ZP);de.prototype.type="tspan";const j=de},997:(Ut,rt,z)=>{z.d(rt,{VG:()=>Y,Y1:()=>H,ZP:()=>P});var le=z(908),Se=z(8279),ce=z(8442),_e=z(9496),ye=z(9733),be=z(6115),we=z(7952),de=z(468),j=z(2320),$=z(3691),G={fill:"#000"},te={style:(0,_e.defaults)({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},j.ik.style)},ee=function(I){function T(A){var L=I.call(this)||this;return L.type="text",L._children=[],L._defaultStyle=G,L.attr(A),L}return(0,le.ZT)(T,I),T.prototype.childrenRef=function(){return this._children},T.prototype.update=function(){I.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var A=0;A<this._children.length;A++){var L=this._children[A];L.zlevel=this.zlevel,L.z=this.z,L.z2=this.z2,L.culling=this.culling,L.cursor=this.cursor,L.invisible=this.invisible}},T.prototype.updateTransform=function(){var A=this.innerTransformable;A?(A.updateTransform(),A.transform&&(this.transform=A.transform)):I.prototype.updateTransform.call(this)},T.prototype.getLocalTransform=function(A){var L=this.innerTransformable;return L?L.getLocalTransform(A):I.prototype.getLocalTransform.call(this,A)},T.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),I.prototype.getComputedTransform.call(this)},T.prototype._updateSubTexts=function(){this._childCursor=0,function re(I){W(I),(0,_e.each)(I.rich,W)}(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},T.prototype.addSelfToZr=function(A){I.prototype.addSelfToZr.call(this,A);for(var L=0;L<this._children.length;L++)this._children[L].__zr=A},T.prototype.removeSelfFromZr=function(A){I.prototype.removeSelfFromZr.call(this,A);for(var L=0;L<this._children.length;L++)this._children[L].__zr=null},T.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var A=new de.Z(0,0,0,0),L=this._children,N=[],ie=null,oe=0;oe<L.length;oe++){var ae=L[oe],he=ae.getBoundingRect(),se=ae.getLocalTransform(N);se?(A.copy(he),A.applyTransform(se),(ie=ie||A.clone()).union(A)):(ie=ie||he.clone()).union(he)}this._rect=ie||A}return this._rect},T.prototype.setDefaultTextStyle=function(A){this._defaultStyle=A||G},T.prototype.setTextContent=function(A){},T.prototype._mergeStyle=function(A,L){if(!L)return A;var N=L.rich,ie=A.rich||N&&{};return(0,_e.extend)(A,L),N&&ie?(this._mergeRich(ie,N),A.rich=ie):ie&&(A.rich=ie),A},T.prototype._mergeRich=function(A,L){for(var N=(0,_e.keys)(L),ie=0;ie<N.length;ie++){var oe=N[ie];A[oe]=A[oe]||{},(0,_e.extend)(A[oe],L[oe])}},T.prototype.getAnimationStyleProps=function(){return te},T.prototype._getOrCreateChild=function(A){var L=this._children[this._childCursor];return(!L||!(L instanceof A))&&(L=new A),this._children[this._childCursor++]=L,L.__zr=this.__zr,L.parent=this,L},T.prototype._updatePlainTexts=function(){var A=this.style,L=A.font||$.Uo,N=A.padding,ie=O(A),oe=(0,Se.NY)(ie,A),ae=D(A),he=!!A.backgroundColor,se=oe.outerHeight,xe=oe.outerWidth,fe=oe.contentWidth,ge=oe.lines,Ce=oe.lineHeight,Te=this._defaultStyle,Ie=A.x||0,Ee=A.y||0,Ve=A.align||Te.align||"left",ze=A.verticalAlign||Te.verticalAlign||"top",We=Ie,tt=(0,ye.mU)(Ee,oe.contentHeight,ze);if(ae||N){var st=(0,ye.M3)(Ie,xe,Ve),Tt=(0,ye.mU)(Ee,se,ze);ae&&this._renderBackground(A,A,st,Tt,xe,se)}tt+=Ce/2,N&&(We=B(Ie,Ve,N),"top"===ze?tt+=N[0]:"bottom"===ze&&(tt-=N[2]));for(var At=0,Vt=!1,Wt=(K("fill"in A?A.fill:(Vt=!0,Te.fill))),kt=(X("stroke"in A?A.stroke:he||Te.autoStroke&&!Vt?null:(At=2,Te.stroke))),fn=A.textShadowBlur>0,wn=null!=A.width&&("truncate"===A.overflow||"break"===A.overflow||"breakAll"===A.overflow),sr=oe.calculatedLineHeight,Xn=0;Xn<ge.length;Xn++){var pr=this._getOrCreateChild(ce.Z),rr=pr.createStyle();pr.useStyle(rr),rr.text=ge[Xn],rr.x=We,rr.y=tt,Ve&&(rr.textAlign=Ve),rr.textBaseline="middle",rr.opacity=A.opacity,rr.strokeFirst=!0,fn&&(rr.shadowBlur=A.textShadowBlur||0,rr.shadowColor=A.textShadowColor||"transparent",rr.shadowOffsetX=A.textShadowOffsetX||0,rr.shadowOffsetY=A.textShadowOffsetY||0),rr.stroke=kt,rr.fill=Wt,kt&&(rr.lineWidth=A.lineWidth||At,rr.lineDash=A.lineDash,rr.lineDashOffset=A.lineDashOffset||0),rr.font=L,q(rr,A),tt+=Ce,wn&&pr.setBoundingRect(new de.Z((0,ye.M3)(rr.x,A.width,rr.textAlign),(0,ye.mU)(rr.y,sr,rr.textBaseline),fe,sr))}},T.prototype._updateRichTexts=function(){var A=this.style,L=O(A),N=(0,Se.$F)(L,A),ie=N.width,oe=N.outerWidth,ae=N.outerHeight,he=A.padding,xe=A.y||0,fe=this._defaultStyle,Ce=A.verticalAlign||fe.verticalAlign,Te=(0,ye.M3)(A.x||0,oe,A.align||fe.align),Ie=(0,ye.mU)(xe,ae,Ce),Ee=Te,Ve=Ie;he&&(Ee+=he[3],Ve+=he[0]);var ze=Ee+ie;D(A)&&this._renderBackground(A,A,Te,Ie,oe,ae);for(var We=!!A.backgroundColor,tt=0;tt<N.lines.length;tt++){for(var st=N.lines[tt],Tt=st.tokens,At=Tt.length,Vt=st.lineHeight,Wt=st.width,kt=0,fn=Ee,wn=ze,sr=At-1,Xn=void 0;kt<At&&(!(Xn=Tt[kt]).align||"left"===Xn.align);)this._placeToken(Xn,A,Vt,Ve,fn,"left",We),Wt-=Xn.width,fn+=Xn.width,kt++;for(;sr>=0&&"right"===(Xn=Tt[sr]).align;)this._placeToken(Xn,A,Vt,Ve,wn,"right",We),Wt-=Xn.width,wn-=Xn.width,sr--;for(fn+=(ie-(fn-Ee)-(ze-wn)-Wt)/2;kt<=sr;)this._placeToken(Xn=Tt[kt],A,Vt,Ve,fn+Xn.width/2,"center",We),fn+=Xn.width,kt++;Ve+=Vt}},T.prototype._placeToken=function(A,L,N,ie,oe,ae,he){var se=L.rich[A.styleName]||{};se.text=A.text;var xe=A.verticalAlign,fe=ie+N/2;"top"===xe?fe=ie+A.height/2:"bottom"===xe&&(fe=ie+N-A.height/2),!A.isLineHolder&&D(se)&&this._renderBackground(se,L,"right"===ae?oe-A.width:"center"===ae?oe-A.width/2:oe,fe-A.height/2,A.width,A.height);var Ce=!!se.backgroundColor,Te=A.textPadding;Te&&(oe=B(oe,ae,Te),fe-=A.height/2-Te[0]-A.innerHeight/2);var Ie=this._getOrCreateChild(ce.Z),Ee=Ie.createStyle();Ie.useStyle(Ee);var Ve=this._defaultStyle,ze=!1,We=0,tt=K("fill"in se?se.fill:"fill"in L?L.fill:(ze=!0,Ve.fill)),st=X("stroke"in se?se.stroke:"stroke"in L?L.stroke:Ce||he||Ve.autoStroke&&!ze?null:(We=2,Ve.stroke)),Tt=se.textShadowBlur>0||L.textShadowBlur>0;Ee.text=A.text,Ee.x=oe,Ee.y=fe,Tt&&(Ee.shadowBlur=se.textShadowBlur||L.textShadowBlur||0,Ee.shadowColor=se.textShadowColor||L.textShadowColor||"transparent",Ee.shadowOffsetX=se.textShadowOffsetX||L.textShadowOffsetX||0,Ee.shadowOffsetY=se.textShadowOffsetY||L.textShadowOffsetY||0),Ee.textAlign=ae,Ee.textBaseline="middle",Ee.font=A.font||$.Uo,Ee.opacity=(0,_e.retrieve3)(se.opacity,L.opacity,1),q(Ee,se),st&&(Ee.lineWidth=(0,_e.retrieve3)(se.lineWidth,L.lineWidth,We),Ee.lineDash=(0,_e.retrieve2)(se.lineDash,L.lineDash),Ee.lineDashOffset=L.lineDashOffset||0,Ee.stroke=st),tt&&(Ee.fill=tt);var At=A.contentWidth,Vt=A.contentHeight;Ie.setBoundingRect(new de.Z((0,ye.M3)(Ee.x,At,Ee.textAlign),(0,ye.mU)(Ee.y,Vt,Ee.textBaseline),At,Vt))},T.prototype._renderBackground=function(A,L,N,ie,oe,ae){var Ie,Ee,ze,he=A.backgroundColor,se=A.borderWidth,xe=A.borderColor,fe=he&&he.image,ge=he&&!fe,Ce=A.borderRadius,Te=this;if(ge||A.lineHeight||se&&xe){(Ie=this._getOrCreateChild(we.Z)).useStyle(Ie.createStyle()),Ie.style.fill=null;var Ve=Ie.shape;Ve.x=N,Ve.y=ie,Ve.width=oe,Ve.height=ae,Ve.r=Ce,Ie.dirtyShape()}if(ge)(ze=Ie.style).fill=he||null,ze.fillOpacity=(0,_e.retrieve2)(A.fillOpacity,1);else if(fe){(Ee=this._getOrCreateChild(be.ZP)).onload=function(){Te.dirtyStyle()};var We=Ee.style;We.image=he.image,We.x=N,We.y=ie,We.width=oe,We.height=ae}se&&xe&&((ze=Ie.style).lineWidth=se,ze.stroke=xe,ze.strokeOpacity=(0,_e.retrieve2)(A.strokeOpacity,1),ze.lineDash=A.borderDash,ze.lineDashOffset=A.borderDashOffset||0,Ie.strokeContainThreshold=0,Ie.hasFill()&&Ie.hasStroke()&&(ze.strokeFirst=!0,ze.lineWidth*=2));var tt=(Ie||Ee).style;tt.shadowBlur=A.shadowBlur||0,tt.shadowColor=A.shadowColor||"transparent",tt.shadowOffsetX=A.shadowOffsetX||0,tt.shadowOffsetY=A.shadowOffsetY||0,tt.opacity=(0,_e.retrieve3)(A.opacity,L.opacity,1)},T.makeFont=function(A){var L="";return H(A)&&(L=[A.fontStyle,A.fontWeight,Y(A.fontSize),A.fontFamily||"sans-serif"].join(" ")),L&&(0,_e.trim)(L)||A.textFont||A.font},T}(j.ZP),Q={left:!0,right:1,center:1},J={top:1,bottom:1,middle:1},b=["fontStyle","fontWeight","fontSize","fontFamily"];function Y(I){return"string"!=typeof I||-1===I.indexOf("px")&&-1===I.indexOf("rem")&&-1===I.indexOf("em")?isNaN(+I)?$.n5+"px":I+"px":I}function q(I,T){for(var A=0;A<b.length;A++){var L=b[A],N=T[L];null!=N&&(I[L]=N)}}function H(I){return null!=I.fontSize||I.fontFamily||I.fontWeight}function W(I){if(I){I.font=ee.makeFont(I);var T=I.align;"middle"===T&&(T="center"),I.align=null==T||Q[T]?T:"left";var A=I.verticalAlign;"center"===A&&(A="middle"),I.verticalAlign=null==A||J[A]?A:"top",I.padding&&(I.padding=(0,_e.normalizeCssArray)(I.padding))}}function X(I,T){return null==I||T<=0||"transparent"===I||"none"===I?null:I.image||I.colorStops?"#000":I}function K(I){return null==I||"none"===I?null:I.image||I.colorStops?"#000":I}function B(I,T,A){return"right"===T?I-A[1]:"center"===T?I+A[3]/2-A[1]/2:I+A[3]}function O(I){var T=I.text;return null!=T&&(T+=""),T}function D(I){return!!(I.backgroundColor||I.lineHeight||I.borderWidth&&I.borderColor)}const P=ee},6839:(Ut,rt,z)=>{z.d(rt,{RH:()=>ce,SE:()=>Se,YV:()=>le});var le=1,Se=2,ce=4},7247:(Ut,rt,z)=>{z.d(rt,{Gq:()=>ye,ko:()=>_e,v5:()=>we});var le=z(9040),Se=z(3691),ce=new le.ZP(50);function _e(de){if("string"==typeof de){var j=ce.get(de);return j&&j.image}return de}function ye(de,j,$,G,Z){if(de){if("string"==typeof de){if(j&&j.__zrImageSrc===de||!$)return j;var te=ce.get(de),ee={hostEl:$,cb:G,cbPayload:Z};return te?!we(j=te.image)&&te.pending.push(ee):((j=Se.qW.loadImage(de,be,be)).__zrImageSrc=de,ce.put(de,j.__cachedImgObj={image:j,pending:[ee]})),j}return de}return j}function be(){var de=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var j=0;j<de.pending.length;j++){var $=de.pending[j],G=$.cb;G&&G(this,$.cbPayload),$.hostEl.dirty()}de.pending.length=0}function we(de){return de&&de.width&&de.height}},8279:(Ut,rt,z)=>{z.d(rt,{$F:()=>te,NY:()=>j,aF:()=>ye});var le=z(7247),Se=z(9496),ce=z(9733),_e=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function ye(q,H,re,W,X){if(!H)return"";var K=(q+"").split("\n");X=be(H,re,W,X);for(var B=0,O=K.length;B<O;B++)K[B]=we(K[B],X);return K.join("\n")}function be(q,H,re,W){var X=(0,Se.extend)({},W=W||{});X.font=H,re=(0,Se.retrieve2)(re,"..."),X.maxIterations=(0,Se.retrieve2)(W.maxIterations,2);var K=X.minChar=(0,Se.retrieve2)(W.minChar,0);X.cnCharWidth=(0,ce.dz)("\u56fd",H);var B=X.ascCharWidth=(0,ce.dz)("a",H);X.placeholder=(0,Se.retrieve2)(W.placeholder,"");for(var O=q=Math.max(0,q-1),D=0;D<K&&O>=B;D++)O-=B;var P=(0,ce.dz)(re,H);return P>O&&(re="",P=0),O=q-P,X.ellipsis=re,X.ellipsisWidth=P,X.contentWidth=O,X.containerWidth=q,X}function we(q,H){var re=H.containerWidth,W=H.font,X=H.contentWidth;if(!re)return"";var K=(0,ce.dz)(q,W);if(K<=re)return q;for(var B=0;;B++){if(K<=X||B>=H.maxIterations){q+=H.ellipsis;break}var O=0===B?de(q,X,H.ascCharWidth,H.cnCharWidth):K>0?Math.floor(q.length*X/K):0;q=q.substr(0,O),K=(0,ce.dz)(q,W)}return""===q&&(q=H.placeholder),q}function de(q,H,re,W){for(var X=0,K=0,B=q.length;K<B&&X<H;K++){var O=q.charCodeAt(K);X+=0<=O&&O<=127?re:W}return K}function j(q,H){null!=q&&(q+="");var T,re=H.overflow,W=H.padding,X=H.font,K="truncate"===re,B=(0,ce.Dp)(X),O=(0,Se.retrieve2)(H.lineHeight,B),D=!!H.backgroundColor,P="truncate"===H.lineOverflow,I=H.width,A=(T=null==I||"break"!==re&&"breakAll"!==re?q?q.split("\n"):[]:q?Y(q,H.font,I,"breakAll"===re,0).lines:[]).length*O,L=(0,Se.retrieve2)(H.height,A);if(A>L&&P){var N=Math.floor(L/O);T=T.slice(0,N)}if(q&&K&&null!=I)for(var ie=be(I,X,H.ellipsis,{minChar:H.truncateMinChar,placeholder:H.placeholder}),oe=0;oe<T.length;oe++)T[oe]=we(T[oe],ie);var ae=L,he=0;for(oe=0;oe<T.length;oe++)he=Math.max((0,ce.dz)(T[oe],X),he);null==I&&(I=he);var se=he;return W&&(ae+=W[0]+W[2],se+=W[1]+W[3],I+=W[1]+W[3]),D&&(se=I),{lines:T,height:L,outerWidth:se,outerHeight:ae,lineHeight:O,calculatedLineHeight:B,contentWidth:he,contentHeight:A,width:I}}var $=function q(){},G=function q(H){this.tokens=[],H&&(this.tokens=H)},Z=function q(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]};function te(q,H){var re=new Z;if(null!=q&&(q+=""),!q)return re;for(var D,W=H.width,X=H.height,K=H.overflow,B="break"!==K&&"breakAll"!==K||null==W?null:{width:W,accumWidth:0,breakAll:"breakAll"===K},O=_e.lastIndex=0;null!=(D=_e.exec(q));){var P=D.index;P>O&&ee(re,q.substring(O,P),H,B),ee(re,D[2],H,B,D[1]),O=_e.lastIndex}O<q.length&&ee(re,q.substring(O,q.length),H,B);var I=[],T=0,A=0,L=H.padding,N="truncate"===K,ie="truncate"===H.lineOverflow;function oe(Vt,Wt,kt){Vt.width=Wt,Vt.lineHeight=kt,T+=kt,A=Math.max(A,Wt)}e:for(var ae=0;ae<re.lines.length;ae++){for(var he=re.lines[ae],se=0,xe=0,fe=0;fe<he.tokens.length;fe++){var Ce=(ge=he.tokens[fe]).styleName&&H.rich[ge.styleName]||{},Te=ge.textPadding=Ce.padding,Ie=Te?Te[1]+Te[3]:0,Ee=ge.font=Ce.font||H.font;ge.contentHeight=(0,ce.Dp)(Ee);var Ve=(0,Se.retrieve2)(Ce.height,ge.contentHeight);if(ge.innerHeight=Ve,Te&&(Ve+=Te[0]+Te[2]),ge.height=Ve,ge.lineHeight=(0,Se.retrieve3)(Ce.lineHeight,H.lineHeight,Ve),ge.align=Ce&&Ce.align||H.align,ge.verticalAlign=Ce&&Ce.verticalAlign||"middle",ie&&null!=X&&T+ge.lineHeight>X){fe>0?(he.tokens=he.tokens.slice(0,fe),oe(he,xe,se),re.lines=re.lines.slice(0,ae+1)):re.lines=re.lines.slice(0,ae);break e}var ze=Ce.width,We=null==ze||"auto"===ze;if("string"==typeof ze&&"%"===ze.charAt(ze.length-1))ge.percentWidth=ze,I.push(ge),ge.contentWidth=(0,ce.dz)(ge.text,Ee);else{if(We){var tt=Ce.backgroundColor,st=tt&&tt.image;st&&(st=le.ko(st),le.v5(st)&&(ge.width=Math.max(ge.width,st.width*Ve/st.height)))}var Tt=N&&null!=W?W-xe:null;null!=Tt&&Tt<ge.width?!We||Tt<Ie?(ge.text="",ge.width=ge.contentWidth=0):(ge.text=ye(ge.text,Tt-Ie,Ee,H.ellipsis,{minChar:H.truncateMinChar}),ge.width=ge.contentWidth=(0,ce.dz)(ge.text,Ee)):ge.contentWidth=(0,ce.dz)(ge.text,Ee)}ge.width+=Ie,xe+=ge.width,Ce&&(se=Math.max(se,ge.lineHeight))}oe(he,xe,se)}for(re.outerWidth=re.width=(0,Se.retrieve2)(W,A),re.outerHeight=re.height=(0,Se.retrieve2)(X,T),re.contentHeight=T,re.contentWidth=A,L&&(re.outerWidth+=L[1]+L[3],re.outerHeight+=L[0]+L[2]),ae=0;ae<I.length;ae++){var ge;(ge=I[ae]).width=parseInt(ge.percentWidth,10)/100*re.width}return re}function ee(q,H,re,W,X){var I,T,K=""===H,B=X&&re.rich[X]||{},O=q.lines,D=B.font||re.font,P=!1;if(W){var A=B.padding,L=A?A[1]+A[3]:0;if(null!=B.width&&"auto"!==B.width){var N=(0,ce.GM)(B.width,W.width)+L;O.length>0&&N+W.accumWidth>W.width&&(I=H.split("\n"),P=!0),W.accumWidth=N}else{var ie=Y(H,D,W.width,W.breakAll,W.accumWidth);W.accumWidth=ie.accumWidth+L,T=ie.linesWidths,I=ie.lines}}else I=H.split("\n");for(var oe=0;oe<I.length;oe++){var ae=I[oe],he=new $;if(he.styleName=X,he.text=ae,he.isLineHolder=!ae&&!K,he.width="number"==typeof B.width?B.width:T?T[oe]:(0,ce.dz)(ae,D),oe||P)O.push(new G([he]));else{var se=(O[O.length-1]||(O[0]=new G)).tokens,xe=se.length;1===xe&&se[0].isLineHolder?se[0]=he:(ae||!xe||K)&&se.push(he)}}}var J=(0,Se.reduce)(",&?/;] ".split(""),function(q,H){return q[H]=!0,q},{});function b(q){return!function Q(q){var H=q.charCodeAt(0);return H>=32&&H<=591||H>=880&&H<=4351||H>=4608&&H<=5119||H>=7680&&H<=8303}(q)||!!J[q]}function Y(q,H,re,W,X){for(var K=[],B=[],O="",D="",P=0,I=0,T=0;T<q.length;T++){var A=q.charAt(T);if("\n"!==A){var L=(0,ce.dz)(A,H),N=!W&&!b(A);(K.length?I+L>re:X+I+L>re)?I?(O||D)&&(N?(O||(O=D,D="",I=P=0),K.push(O),B.push(I-P),D+=A,O="",I=P+=L):(D&&(O+=D,D="",P=0),K.push(O),B.push(I),O=A,I=L)):N?(K.push(D),B.push(P),D=A,P=L):(K.push(A),B.push(L)):(I+=L,N?(D+=A,P+=L):(D&&(O+=D,D="",P=0),O+=A))}else D&&(O+=D,I+=P),K.push(O),B.push(I),O="",D="",P=0,I=0}return!K.length&&!O&&(O=q,D="",P=0),D&&(O+=D),O&&(K.push(O),B.push(I)),1===K.length&&(I+=X),{accumWidth:I,lines:K,linesWidths:B}}},4813:(Ut,rt,z)=>{z.d(rt,{L:()=>ce});var le=z(5145);function ce(_e,ye,be){var we=ye.smooth,de=ye.points;if(de&&de.length>=2){if(we){var j=function Se(_e,ye,be,we){var Z,te,ee,Q,de=[],j=[],$=[],G=[];if(we){ee=[1/0,1/0],Q=[-1/0,-1/0];for(var J=0,b=_e.length;J<b;J++)(0,le.min)(ee,ee,_e[J]),(0,le.max)(Q,Q,_e[J]);(0,le.min)(ee,ee,we[0]),(0,le.max)(Q,Q,we[1])}for(J=0,b=_e.length;J<b;J++){var Y=_e[J];if(be)Z=_e[J?J-1:b-1],te=_e[(J+1)%b];else{if(0===J||J===b-1){de.push((0,le.clone)(_e[J]));continue}Z=_e[J-1],te=_e[J+1]}(0,le.sub)(j,te,Z),(0,le.scale)(j,j,ye);var q=(0,le.distance)(Y,Z),H=(0,le.distance)(Y,te),re=q+H;0!==re&&(q/=re,H/=re),(0,le.scale)($,j,-q),(0,le.scale)(G,j,H);var W=(0,le.add)([],Y,$),X=(0,le.add)([],Y,G);we&&((0,le.max)(W,W,ee),(0,le.min)(W,W,Q),(0,le.max)(X,X,ee),(0,le.min)(X,X,Q)),de.push(W),de.push(X)}return be&&de.push(de.shift()),de}(de,we,be,ye.smoothConstraint);_e.moveTo(de[0][0],de[0][1]);for(var $=de.length,G=0;G<(be?$:$-1);G++){var Z=j[2*G],te=j[2*G+1],ee=de[(G+1)%$];_e.bezierCurveTo(Z[0],Z[1],te[0],te[1],ee[0],ee[1])}}else{_e.moveTo(de[0][0],de[0][1]),G=1;for(var Q=de.length;G<Q;G++)_e.lineTo(de[G][0],de[G][1])}be&&_e.closePath()}}},5381:(Ut,rt,z)=>{z.d(rt,{Pw:()=>ce,_3:()=>Se,vu:()=>_e});var le=Math.round;function Se(ye,be,we){if(be){var de=be.x1,j=be.x2,$=be.y1,G=be.y2;ye.x1=de,ye.x2=j,ye.y1=$,ye.y2=G;var Z=we&&we.lineWidth;return Z&&(le(2*de)===le(2*j)&&(ye.x1=ye.x2=_e(de,Z,!0)),le(2*$)===le(2*G)&&(ye.y1=ye.y2=_e($,Z,!0))),ye}}function ce(ye,be,we){if(be){var de=be.x,j=be.y,$=be.width,G=be.height;ye.x=de,ye.y=j,ye.width=$,ye.height=G;var Z=we&&we.lineWidth;return Z&&(ye.x=_e(de,Z,!0),ye.y=_e(j,Z,!0),ye.width=Math.max(_e(de+$,Z,!1)-ye.x,0===$?0:1),ye.height=Math.max(_e(j+G,Z,!1)-ye.y,0===G?0:1)),ye}}function _e(ye,be,we){if(!be)return ye;var de=le(2*ye);return(de+le(be))%2==0?de/2:(de+(we?1:-1))/2}},598:(Ut,rt,z)=>{z.d(rt,{Z:()=>ye});var le=z(908),Se=z(5489),ce=function be(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},_e=function(be){function we(de){return be.call(this,de)||this}return(0,le.ZT)(we,be),we.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},we.prototype.getDefaultShape=function(){return new ce},we.prototype.buildPath=function(de,j){var $=j.cx,G=j.cy,Z=Math.max(j.r,0),te=j.startAngle,ee=j.endAngle,Q=j.clockwise,J=Math.cos(te),b=Math.sin(te);de.moveTo(J*Z+$,b*Z+G),de.arc($,G,Z,te,ee,!Q)},we}(Se.ZP);_e.prototype.type="arc";const ye=_e},161:(Ut,rt,z)=>{z.d(rt,{Z:()=>j});var le=z(908),Se=z(5489),ce=z(5145),_e=z(7315),ye=[],be=function $(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1};function we($,G,Z){return null!=$.cpx2||null!=$.cpy2?[(Z?_e.X_:_e.af)($.x1,$.cpx1,$.cpx2,$.x2,G),(Z?_e.X_:_e.af)($.y1,$.cpy1,$.cpy2,$.y2,G)]:[(Z?_e.AZ:_e.Zm)($.x1,$.cpx1,$.x2,G),(Z?_e.AZ:_e.Zm)($.y1,$.cpy1,$.y2,G)]}var de=function($){function G(Z){return $.call(this,Z)||this}return(0,le.ZT)(G,$),G.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},G.prototype.getDefaultShape=function(){return new be},G.prototype.buildPath=function(Z,te){var ee=te.x1,Q=te.y1,J=te.x2,b=te.y2,Y=te.cpx1,q=te.cpy1,H=te.cpx2,re=te.cpy2,W=te.percent;0!==W&&(Z.moveTo(ee,Q),null==H||null==re?(W<1&&((0,_e.Lx)(ee,Y,J,W,ye),Y=ye[1],J=ye[2],(0,_e.Lx)(Q,q,b,W,ye),q=ye[1],b=ye[2]),Z.quadraticCurveTo(Y,q,J,b)):(W<1&&((0,_e.Vz)(ee,Y,H,J,W,ye),Y=ye[1],H=ye[2],J=ye[3],(0,_e.Vz)(Q,q,re,b,W,ye),q=ye[1],re=ye[2],b=ye[3]),Z.bezierCurveTo(Y,q,H,re,J,b)))},G.prototype.pointAt=function(Z){return we(this.shape,Z,!1)},G.prototype.tangentAt=function(Z){var te=we(this.shape,Z,!0);return ce.normalize(te,te)},G}(Se.ZP);de.prototype.type="bezier-curve";const j=de},421:(Ut,rt,z)=>{z.d(rt,{Z:()=>ye});var le=z(908),Se=z(5489),ce=function be(){this.cx=0,this.cy=0,this.r=0},_e=function(be){function we(de){return be.call(this,de)||this}return(0,le.ZT)(we,be),we.prototype.getDefaultShape=function(){return new ce},we.prototype.buildPath=function(de,j){de.moveTo(j.cx+j.r,j.cy),de.arc(j.cx,j.cy,j.r,0,2*Math.PI)},we}(Se.ZP);_e.prototype.type="circle";const ye=_e},2968:(Ut,rt,z)=>{z.d(rt,{Z:()=>ye});var le=z(908),Se=z(5489),ce=function be(){this.cx=0,this.cy=0,this.rx=0,this.ry=0},_e=function(be){function we(de){return be.call(this,de)||this}return(0,le.ZT)(we,be),we.prototype.getDefaultShape=function(){return new ce},we.prototype.buildPath=function(de,j){var $=.5522848,G=j.cx,Z=j.cy,te=j.rx,ee=j.ry,Q=te*$,J=ee*$;de.moveTo(G-te,Z),de.bezierCurveTo(G-te,Z-J,G-Q,Z-ee,G,Z-ee),de.bezierCurveTo(G+Q,Z-ee,G+te,Z-J,G+te,Z),de.bezierCurveTo(G+te,Z+J,G+Q,Z+ee,G,Z+ee),de.bezierCurveTo(G-Q,Z+ee,G-te,Z+J,G-te,Z),de.closePath()},we}(Se.ZP);_e.prototype.type="ellipse";const ye=_e},1995:(Ut,rt,z)=>{z.d(rt,{Z:()=>we});var le=z(908),Se=z(5489),ce=z(5381),_e={},ye=function de(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1},be=function(de){function j($){return de.call(this,$)||this}return(0,le.ZT)(j,de),j.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},j.prototype.getDefaultShape=function(){return new ye},j.prototype.buildPath=function($,G){var Z,te,ee,Q;if(this.subPixelOptimize){var J=(0,ce._3)(_e,G,this.style);Z=J.x1,te=J.y1,ee=J.x2,Q=J.y2}else Z=G.x1,te=G.y1,ee=G.x2,Q=G.y2;var b=G.percent;0!==b&&($.moveTo(Z,te),b<1&&(ee=Z*(1-b)+ee*b,Q=te*(1-b)+Q*b),$.lineTo(ee,Q))},j.prototype.pointAt=function($){var G=this.shape;return[G.x1*(1-$)+G.x2*$,G.y1*(1-$)+G.y2*$]},j}(Se.ZP);be.prototype.type="line";const we=be},8822:(Ut,rt,z)=>{z.d(rt,{Z:()=>be});var le=z(908),Se=z(5489),ce=z(4813),_e=function we(){this.points=null,this.smooth=0,this.smoothConstraint=null},ye=function(we){function de(j){return we.call(this,j)||this}return(0,le.ZT)(de,we),de.prototype.getDefaultShape=function(){return new _e},de.prototype.buildPath=function(j,$){ce.L(j,$,!0)},de}(Se.ZP);ye.prototype.type="polygon";const be=ye},8059:(Ut,rt,z)=>{z.d(rt,{Z:()=>be});var le=z(908),Se=z(5489),ce=z(4813),_e=function we(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null},ye=function(we){function de(j){return we.call(this,j)||this}return(0,le.ZT)(de,we),de.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},de.prototype.getDefaultShape=function(){return new _e},de.prototype.buildPath=function(j,$){ce.L(j,$,!1)},de}(Se.ZP);ye.prototype.type="polyline";const be=ye},7952:(Ut,rt,z)=>{z.d(rt,{Z:()=>de});var le=z(908),Se=z(5489),_e=z(5381),ye=function j(){this.x=0,this.y=0,this.width=0,this.height=0},be={},we=function(j){function $(G){return j.call(this,G)||this}return(0,le.ZT)($,j),$.prototype.getDefaultShape=function(){return new ye},$.prototype.buildPath=function(G,Z){var te,ee,Q,J;if(this.subPixelOptimize){var b=(0,_e.Pw)(be,Z,this.style);te=b.x,ee=b.y,Q=b.width,J=b.height,b.r=Z.r,Z=b}else te=Z.x,ee=Z.y,Q=Z.width,J=Z.height;Z.r?function ce(j,$){var J,b,Y,q,H,G=$.x,Z=$.y,te=$.width,ee=$.height,Q=$.r;te<0&&(G+=te,te=-te),ee<0&&(Z+=ee,ee=-ee),"number"==typeof Q?J=b=Y=q=Q:Q instanceof Array?1===Q.length?J=b=Y=q=Q[0]:2===Q.length?(J=Y=Q[0],b=q=Q[1]):3===Q.length?(J=Q[0],b=q=Q[1],Y=Q[2]):(J=Q[0],b=Q[1],Y=Q[2],q=Q[3]):J=b=Y=q=0,J+b>te&&(J*=te/(H=J+b),b*=te/H),Y+q>te&&(Y*=te/(H=Y+q),q*=te/H),b+Y>ee&&(b*=ee/(H=b+Y),Y*=ee/H),J+q>ee&&(J*=ee/(H=J+q),q*=ee/H),j.moveTo(G+J,Z),j.lineTo(G+te-b,Z),0!==b&&j.arc(G+te-b,Z+b,b,-Math.PI/2,0),j.lineTo(G+te,Z+ee-Y),0!==Y&&j.arc(G+te-Y,Z+ee-Y,Y,0,Math.PI/2),j.lineTo(G+q,Z+ee),0!==q&&j.arc(G+q,Z+ee-q,q,Math.PI/2,Math.PI),j.lineTo(G,Z+J),0!==J&&j.arc(G+J,Z+J,J,Math.PI,1.5*Math.PI)}(G,Z):G.rect(te,ee,Q,J)},$.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},$}(Se.ZP);we.prototype.type="rect";const de=we},5693:(Ut,rt,z)=>{z.d(rt,{Z:()=>ye});var le=z(908),Se=z(5489),ce=function be(){this.cx=0,this.cy=0,this.r=0,this.r0=0},_e=function(be){function we(de){return be.call(this,de)||this}return(0,le.ZT)(we,be),we.prototype.getDefaultShape=function(){return new ce},we.prototype.buildPath=function(de,j){var $=j.cx,G=j.cy,Z=2*Math.PI;de.moveTo($+j.r,G),de.arc($,G,j.r,0,Z,!1),de.moveTo($+j.r0,G),de.arc($,G,j.r0,0,Z,!0)},we}(Se.ZP);_e.prototype.type="ring";const ye=_e},8801:(Ut,rt,z)=>{z.d(rt,{C:()=>re});var le=z(908),Se=z(5489),ce=z(9496),_e=Math.PI,ye=2*_e,be=Math.sin,we=Math.cos,de=Math.acos,j=Math.atan2,$=Math.abs,G=Math.sqrt,Z=Math.max,te=Math.min,ee=1e-4;function J(W,X,K,B,O,D,P){var I=W-K,T=X-B,A=(P?D:-D)/G(I*I+T*T),L=A*T,N=-A*I,ie=W+L,oe=X+N,ae=K+L,he=B+N,se=(ie+ae)/2,xe=(oe+he)/2,fe=ae-ie,ge=he-oe,Ce=fe*fe+ge*ge,Te=O-D,Ie=ie*he-ae*oe,Ee=(ge<0?-1:1)*G(Z(0,Te*Te*Ce-Ie*Ie)),Ve=(Ie*ge-fe*Ee)/Ce,ze=(-Ie*fe-ge*Ee)/Ce,We=(Ie*ge+fe*Ee)/Ce,tt=(-Ie*fe+ge*Ee)/Ce,st=Ve-se,Tt=ze-xe,At=We-se,Vt=tt-xe;return st*st+Tt*Tt>At*At+Vt*Vt&&(Ve=We,ze=tt),{cx:Ve,cy:ze,x0:-L,y0:-N,x1:Ve*(O/Te-1),y1:ze*(O/Te-1)}}var q=function W(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.cornerRadius=0},H=function(W){function X(K){return W.call(this,K)||this}return(0,le.ZT)(X,W),X.prototype.getDefaultShape=function(){return new q},X.prototype.buildPath=function(K,B){!function Y(W,X){var K,B=Z(X.r,0),O=Z(X.r0||0,0),D=B>0;if(D||O>0){if(D||(B=O,O=0),O>B){var I=B;B=O,O=I}var T=X.startAngle,A=X.endAngle;if(!isNaN(T)&&!isNaN(A)){var L=X.cx,N=X.cy,ie=!!X.clockwise,oe=$(A-T),ae=oe>ye&&oe%ye;if(ae>ee&&(oe=ae),B>ee)if(oe>ye-ee)W.moveTo(L+B*we(T),N+B*be(T)),W.arc(L,N,B,T,A,!ie),O>ee&&(W.moveTo(L+O*we(A),N+O*be(A)),W.arc(L,N,O,A,T,ie));else{var he=void 0,se=void 0,xe=void 0,fe=void 0,ge=void 0,Ce=void 0,Te=void 0,Ie=void 0,Ee=void 0,Ve=void 0,ze=void 0,We=void 0,tt=void 0,st=void 0,Tt=void 0,At=void 0,Vt=B*we(T),Wt=B*be(T),kt=O*we(A),fn=O*be(A),wn=oe>ee;if(wn){var sr=X.cornerRadius;sr&&(K=function b(W){var X;if((0,ce.isArray)(W)){var K=W.length;if(!K)return W;X=1===K?[W[0],W[0],0,0]:2===K?[W[0],W[0],W[1],W[1]]:3===K?W.concat(W[2]):W}else X=[W,W,W,W];return X}(sr),he=K[0],se=K[1],xe=K[2],fe=K[3]);var Xn=$(B-O)/2;if(ge=te(Xn,xe),Ce=te(Xn,fe),Te=te(Xn,he),Ie=te(Xn,se),ze=Ee=Z(ge,Ce),We=Ve=Z(Te,Ie),(Ee>ee||Ve>ee)&&(tt=B*we(A),st=B*be(A),Tt=O*we(T),At=O*be(T),oe<_e)){var pr=function Q(W,X,K,B,O,D,P,I){var T=K-W,A=B-X,L=P-O,N=I-D,ie=N*T-L*A;if(!(ie*ie<ee))return[W+(ie=(L*(X-D)-N*(W-O))/ie)*T,X+ie*A]}(Vt,Wt,Tt,At,tt,st,kt,fn);if(pr){var rr=Vt-pr[0],Qt=Wt-pr[1],un=tt-pr[0],Pn=st-pr[1],Nn=1/be(de((rr*un+Qt*Pn)/(G(rr*rr+Qt*Qt)*G(un*un+Pn*Pn)))/2),jn=G(pr[0]*pr[0]+pr[1]*pr[1]);ze=te(Ee,(B-jn)/(Nn+1)),We=te(Ve,(O-jn)/(Nn-1))}}}if(wn)if(ze>ee){var xr=te(xe,ze),gr=te(fe,ze),Je=J(Tt,At,Vt,Wt,B,xr,ie),wt=J(tt,st,kt,fn,B,gr,ie);W.moveTo(L+Je.cx+Je.x0,N+Je.cy+Je.y0),ze<Ee&&xr===gr?W.arc(L+Je.cx,N+Je.cy,ze,j(Je.y0,Je.x0),j(wt.y0,wt.x0),!ie):(xr>0&&W.arc(L+Je.cx,N+Je.cy,xr,j(Je.y0,Je.x0),j(Je.y1,Je.x1),!ie),W.arc(L,N,B,j(Je.cy+Je.y1,Je.cx+Je.x1),j(wt.cy+wt.y1,wt.cx+wt.x1),!ie),gr>0&&W.arc(L+wt.cx,N+wt.cy,gr,j(wt.y1,wt.x1),j(wt.y0,wt.x0),!ie))}else W.moveTo(L+Vt,N+Wt),W.arc(L,N,B,T,A,!ie);else W.moveTo(L+Vt,N+Wt);O>ee&&wn?We>ee?(xr=te(he,We),Je=J(kt,fn,tt,st,O,-(gr=te(se,We)),ie),wt=J(Vt,Wt,Tt,At,O,-xr,ie),W.lineTo(L+Je.cx+Je.x0,N+Je.cy+Je.y0),We<Ve&&xr===gr?W.arc(L+Je.cx,N+Je.cy,We,j(Je.y0,Je.x0),j(wt.y0,wt.x0),!ie):(gr>0&&W.arc(L+Je.cx,N+Je.cy,gr,j(Je.y0,Je.x0),j(Je.y1,Je.x1),!ie),W.arc(L,N,O,j(Je.cy+Je.y1,Je.cx+Je.x1),j(wt.cy+wt.y1,wt.cx+wt.x1),ie),xr>0&&W.arc(L+wt.cx,N+wt.cy,xr,j(wt.y1,wt.x1),j(wt.y0,wt.x0),!ie))):(W.lineTo(L+kt,N+fn),W.arc(L,N,O,A,T,ie)):W.lineTo(L+kt,N+fn)}else W.moveTo(L,N);W.closePath()}}}(K,B)},X.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},X}(Se.ZP);H.prototype.type="sector";const re=H},2738:(Ut,rt,z)=>{z.d(rt,{Cv:()=>b,Gk:()=>K,H3:()=>W,I1:()=>H,Pn:()=>j,R:()=>q,gA:()=>B,gO:()=>re,i2:()=>ee,jY:()=>Z,m1:()=>X,mU:()=>te,n1:()=>Q,oF:()=>O,qV:()=>G,ut:()=>ye,zT:()=>we});var le=z(9496),Se=z(2523),ce=z(9420),_e=Math.round;function ye(D){var P;if(D&&"transparent"!==D){if("string"==typeof D&&D.indexOf("rgba")>-1){var I=(0,Se.parse)(D);I&&(D="rgb("+I[0]+","+I[1]+","+I[2]+")",P=I[3])}}else D="none";return{color:D,opacity:P??1}}function we(D){return D<1e-4&&D>-1e-4}function de(D){return _e(1e3*D)/1e3}function j(D){return _e(1e4*D)/1e4}function G(D){return"matrix("+de(D[0])+","+de(D[1])+","+de(D[2])+","+de(D[3])+","+j(D[4])+","+j(D[5])+")"}var Z={left:"start",right:"end",center:"middle",middle:"middle"};function te(D,P,I){return"top"===I?D+=P/2:"bottom"===I&&(D-=P/2),D}function ee(D){return D&&(D.shadowBlur||D.shadowOffsetX||D.shadowOffsetY)}function Q(D){var P=D.style,I=D.getGlobalScale();return[P.shadowColor,(P.shadowBlur||0).toFixed(2),(P.shadowOffsetX||0).toFixed(2),(P.shadowOffsetY||0).toFixed(2),I[0],I[1]].join(",")}function b(D){return D&&!!D.image}function q(D){return b(D)||function Y(D){return D&&!!D.svgElement}(D)}function H(D){return"linear"===D.type}function re(D){return"radial"===D.type}function W(D){return D&&("linear"===D.type||"radial"===D.type)}function X(D){return"url(#"+D+")"}function K(D){var P=D.getGlobalScale(),I=Math.max(P[0],P[1]);return Math.max(Math.ceil(Math.log(I)/Math.log(10)),1)}function B(D){var P=D.x||0,I=D.y||0,T=(D.rotation||0)*le.RADIAN_TO_DEGREE,A=(0,le.retrieve2)(D.scaleX,1),L=(0,le.retrieve2)(D.scaleY,1),N=D.skewX||0,ie=D.skewY||0,oe=[];return(P||I)&&oe.push("translate("+P+"px,"+I+"px)"),T&&oe.push("rotate("+T+")"),(1!==A||1!==L)&&oe.push("scale("+A+","+L+")"),(N||ie)&&oe.push("skew("+_e(N*le.RADIAN_TO_DEGREE)+"deg, "+_e(ie*le.RADIAN_TO_DEGREE)+"deg)"),oe.join(" ")}var O=ce.Z.hasGlobalWindow&&(0,le.isFunction)(window.btoa)?function(D){return window.btoa(unescape(encodeURIComponent(D)))}:typeof Buffer<"u"?function(D){return Buffer.from(D).toString("base64")}:function(D){return null}},2523:(Ut,rt,z)=>{z.r(rt),z.d(rt,{fastLerp:()=>re,fastMapToColor:()=>W,lerp:()=>X,lift:()=>q,liftColor:()=>A,lum:()=>P,mapToColor:()=>K,modifyAlpha:()=>O,modifyHSL:()=>B,parse:()=>J,random:()=>I,stringify:()=>D,toHex:()=>H});var le=z(9040),Se=z(9496),ce={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function _e(L){return(L=Math.round(L))<0?0:L>255?255:L}function be(L){return L<0?0:L>1?1:L}function we(L){var N=L;return N.length&&"%"===N.charAt(N.length-1)?_e(parseFloat(N)/100*255):_e(parseInt(N,10))}function de(L){var N=L;return N.length&&"%"===N.charAt(N.length-1)?be(parseFloat(N)/100):be(parseFloat(N))}function j(L,N,ie){return ie<0?ie+=1:ie>1&&(ie-=1),6*ie<1?L+(N-L)*ie*6:2*ie<1?N:3*ie<2?L+(N-L)*(2/3-ie)*6:L}function $(L,N,ie){return L+(N-L)*ie}function G(L,N,ie,oe,ae){return L[0]=N,L[1]=ie,L[2]=oe,L[3]=ae,L}function Z(L,N){return L[0]=N[0],L[1]=N[1],L[2]=N[2],L[3]=N[3],L}var te=new le.ZP(20),ee=null;function Q(L,N){ee&&Z(ee,N),ee=te.put(L,ee||N.slice())}function J(L,N){if(L){N=N||[];var ie=te.get(L);if(ie)return Z(N,ie);var oe=(L+="").replace(/ /g,"").toLowerCase();if(oe in ce)return Z(N,ce[oe]),Q(L,N),N;var he,ae=oe.length;if("#"===oe.charAt(0))return 4===ae||5===ae?(he=parseInt(oe.slice(1,4),16))>=0&&he<=4095?(G(N,(3840&he)>>4|(3840&he)>>8,240&he|(240&he)>>4,15&he|(15&he)<<4,5===ae?parseInt(oe.slice(4),16)/15:1),Q(L,N),N):void G(N,0,0,0,1):7===ae||9===ae?(he=parseInt(oe.slice(1,7),16))>=0&&he<=16777215?(G(N,(16711680&he)>>16,(65280&he)>>8,255&he,9===ae?parseInt(oe.slice(7),16)/255:1),Q(L,N),N):void G(N,0,0,0,1):void 0;var se=oe.indexOf("("),xe=oe.indexOf(")");if(-1!==se&&xe+1===ae){var fe=oe.substr(0,se),ge=oe.substr(se+1,xe-(se+1)).split(","),Ce=1;switch(fe){case"rgba":if(4!==ge.length)return 3===ge.length?G(N,+ge[0],+ge[1],+ge[2],1):G(N,0,0,0,1);Ce=de(ge.pop());case"rgb":return ge.length>=3?(G(N,we(ge[0]),we(ge[1]),we(ge[2]),3===ge.length?Ce:de(ge[3])),Q(L,N),N):void G(N,0,0,0,1);case"hsla":return 4!==ge.length?void G(N,0,0,0,1):(ge[3]=de(ge[3]),b(ge,N),Q(L,N),N);case"hsl":return 3!==ge.length?void G(N,0,0,0,1):(b(ge,N),Q(L,N),N);default:return}}G(N,0,0,0,1)}}function b(L,N){var ie=(parseFloat(L[0])%360+360)%360/360,oe=de(L[1]),ae=de(L[2]),he=ae<=.5?ae*(oe+1):ae+oe-ae*oe,se=2*ae-he;return G(N=N||[],_e(255*j(se,he,ie+1/3)),_e(255*j(se,he,ie)),_e(255*j(se,he,ie-1/3)),1),4===L.length&&(N[3]=L[3]),N}function q(L,N){var ie=J(L);if(ie){for(var oe=0;oe<3;oe++)ie[oe]=N<0?ie[oe]*(1-N)|0:(255-ie[oe])*N+ie[oe]|0,ie[oe]>255?ie[oe]=255:ie[oe]<0&&(ie[oe]=0);return D(ie,4===ie.length?"rgba":"rgb")}}function H(L){var N=J(L);if(N)return((1<<24)+(N[0]<<16)+(N[1]<<8)+ +N[2]).toString(16).slice(1)}function re(L,N,ie){if(N&&N.length&&L>=0&&L<=1){ie=ie||[];var oe=L*(N.length-1),ae=Math.floor(oe),he=Math.ceil(oe),se=N[ae],xe=N[he],fe=oe-ae;return ie[0]=_e($(se[0],xe[0],fe)),ie[1]=_e($(se[1],xe[1],fe)),ie[2]=_e($(se[2],xe[2],fe)),ie[3]=be($(se[3],xe[3],fe)),ie}}var W=re;function X(L,N,ie){if(N&&N.length&&L>=0&&L<=1){var oe=L*(N.length-1),ae=Math.floor(oe),he=Math.ceil(oe),se=J(N[ae]),xe=J(N[he]),fe=oe-ae,ge=D([_e($(se[0],xe[0],fe)),_e($(se[1],xe[1],fe)),_e($(se[2],xe[2],fe)),be($(se[3],xe[3],fe))],"rgba");return ie?{color:ge,leftIndex:ae,rightIndex:he,value:oe}:ge}}var K=X;function B(L,N,ie,oe){var ae=J(L);if(L)return ae=function Y(L){if(L){var fe,ge,N=L[0]/255,ie=L[1]/255,oe=L[2]/255,ae=Math.min(N,ie,oe),he=Math.max(N,ie,oe),se=he-ae,xe=(he+ae)/2;if(0===se)fe=0,ge=0;else{ge=xe<.5?se/(he+ae):se/(2-he-ae);var Ce=((he-N)/6+se/2)/se,Te=((he-ie)/6+se/2)/se,Ie=((he-oe)/6+se/2)/se;N===he?fe=Ie-Te:ie===he?fe=1/3+Ce-Ie:oe===he&&(fe=2/3+Te-Ce),fe<0&&(fe+=1),fe>1&&(fe-=1)}var Ee=[360*fe,ge,xe];return null!=L[3]&&Ee.push(L[3]),Ee}}(ae),null!=N&&(ae[0]=function ye(L){return(L=Math.round(L))<0?0:L>360?360:L}(N)),null!=ie&&(ae[1]=de(ie)),null!=oe&&(ae[2]=de(oe)),D(b(ae),"rgba")}function O(L,N){var ie=J(L);if(ie&&null!=N)return ie[3]=be(N),D(ie,"rgba")}function D(L,N){if(L&&L.length){var ie=L[0]+","+L[1]+","+L[2];return("rgba"===N||"hsva"===N||"hsla"===N)&&(ie+=","+L[3]),N+"("+ie+")"}}function P(L,N){var ie=J(L);return ie?(.299*ie[0]+.587*ie[1]+.114*ie[2])*ie[3]/255+(1-ie[3])*N:0}function I(){return D([Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random())],"rgb")}var T=new le.ZP(100);function A(L){if((0,Se.isString)(L)){var N=T.get(L);return N||(N=q(L,-.1),T.put(L,N)),N}if((0,Se.isGradientObject)(L)){var ie=(0,Se.extend)({},L);return ie.colorStops=(0,Se.map)(L.colorStops,function(oe){return{offset:oe.offset,color:q(oe.color,-.1)}}),ie}return L}},714:(Ut,rt,z)=>{z.d(rt,{U5:()=>P,iR:()=>B,Pc:()=>O,AA:()=>D});var le=z(908),Se=z(5489),ce=z(7899),_e=z(5145),ye=ce.Z.CMD,be=[[],[],[]],we=Math.sqrt,de=Math.atan2;function j(I,T){if(T){var N,ie,oe,ae,he,se,A=I.data,L=I.len(),xe=ye.M,fe=ye.C,ge=ye.L,Ce=ye.R,Te=ye.A,Ie=ye.Q;for(oe=0,ae=0;oe<L;){switch(N=A[oe++],ae=oe,ie=0,N){case xe:case ge:ie=1;break;case fe:ie=3;break;case Ie:ie=2;break;case Te:var Ee=T[4],Ve=T[5],ze=we(T[0]*T[0]+T[1]*T[1]),We=we(T[2]*T[2]+T[3]*T[3]),tt=de(-T[1]/We,T[0]/ze);A[oe]*=ze,A[oe++]+=Ee,A[oe]*=We,A[oe++]+=Ve,A[oe++]*=ze,A[oe++]*=We,A[oe++]+=tt,A[oe++]+=tt,ae=oe+=2;break;case Ce:se[0]=A[oe++],se[1]=A[oe++],(0,_e.applyTransform)(se,se,T),A[ae++]=se[0],A[ae++]=se[1],se[0]+=A[oe++],se[1]+=A[oe++],(0,_e.applyTransform)(se,se,T),A[ae++]=se[0],A[ae++]=se[1]}for(he=0;he<ie;he++){var st=be[he];st[0]=A[oe++],st[1]=A[oe++],(0,_e.applyTransform)(st,st,T),A[ae++]=st[0],A[ae++]=st[1]}}I.increaseVersion()}}var $=z(9496),G=Math.sqrt,Z=Math.sin,te=Math.cos,ee=Math.PI;function Q(I){return Math.sqrt(I[0]*I[0]+I[1]*I[1])}function J(I,T){return(I[0]*T[0]+I[1]*T[1])/(Q(I)*Q(T))}function b(I,T){return(I[0]*T[1]<I[1]*T[0]?-1:1)*Math.acos(J(I,T))}function Y(I,T,A,L,N,ie,oe,ae,he,se,xe){var fe=he*(ee/180),ge=te(fe)*(I-A)/2+Z(fe)*(T-L)/2,Ce=-1*Z(fe)*(I-A)/2+te(fe)*(T-L)/2,Te=ge*ge/(oe*oe)+Ce*Ce/(ae*ae);Te>1&&(oe*=G(Te),ae*=G(Te));var Ie=(N===ie?-1:1)*G((oe*oe*(ae*ae)-oe*oe*(Ce*Ce)-ae*ae*(ge*ge))/(oe*oe*(Ce*Ce)+ae*ae*(ge*ge)))||0,Ee=Ie*oe*Ce/ae,Ve=Ie*-ae*ge/oe,ze=(I+A)/2+te(fe)*Ee-Z(fe)*Ve,We=(T+L)/2+Z(fe)*Ee+te(fe)*Ve,tt=b([1,0],[(ge-Ee)/oe,(Ce-Ve)/ae]),st=[(ge-Ee)/oe,(Ce-Ve)/ae],Tt=[(-1*ge-Ee)/oe,(-1*Ce-Ve)/ae],At=b(st,Tt);if(J(st,Tt)<=-1&&(At=ee),J(st,Tt)>=1&&(At=0),At<0){var Vt=Math.round(At/ee*1e6)/1e6;At=2*ee+Vt%2*ee}xe.addData(se,ze,We,oe,ae,tt,At,fe,ie)}var q=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,H=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g,W=function(I){function T(){return null!==I&&I.apply(this,arguments)||this}return(0,le.ZT)(T,I),T.prototype.applyTransform=function(A){},T}(Se.ZP);function X(I){return null!=I.setData}function K(I,T){var A=function re(I){var T=new ce.Z;if(!I)return T;var oe,A=0,L=0,N=A,ie=L,ae=ce.Z.CMD,he=I.match(q);if(!he)return T;for(var se=0;se<he.length;se++){for(var xe=he[se],fe=xe.charAt(0),ge=void 0,Ce=xe.match(H)||[],Te=Ce.length,Ie=0;Ie<Te;Ie++)Ce[Ie]=parseFloat(Ce[Ie]);for(var Ee=0;Ee<Te;){var Ve=void 0,ze=void 0,We=void 0,tt=void 0,st=void 0,Tt=void 0,At=void 0,Vt=A,Wt=L,kt=void 0,fn=void 0;switch(fe){case"l":A+=Ce[Ee++],L+=Ce[Ee++],T.addData(ge=ae.L,A,L);break;case"L":A=Ce[Ee++],L=Ce[Ee++],T.addData(ge=ae.L,A,L);break;case"m":A+=Ce[Ee++],L+=Ce[Ee++],T.addData(ge=ae.M,A,L),N=A,ie=L,fe="l";break;case"M":A=Ce[Ee++],L=Ce[Ee++],T.addData(ge=ae.M,A,L),N=A,ie=L,fe="L";break;case"h":A+=Ce[Ee++],T.addData(ge=ae.L,A,L);break;case"H":A=Ce[Ee++],T.addData(ge=ae.L,A,L);break;case"v":L+=Ce[Ee++],T.addData(ge=ae.L,A,L);break;case"V":L=Ce[Ee++],T.addData(ge=ae.L,A,L);break;case"C":T.addData(ge=ae.C,Ce[Ee++],Ce[Ee++],Ce[Ee++],Ce[Ee++],Ce[Ee++],Ce[Ee++]),A=Ce[Ee-2],L=Ce[Ee-1];break;case"c":T.addData(ge=ae.C,Ce[Ee++]+A,Ce[Ee++]+L,Ce[Ee++]+A,Ce[Ee++]+L,Ce[Ee++]+A,Ce[Ee++]+L),A+=Ce[Ee-2],L+=Ce[Ee-1];break;case"S":Ve=A,ze=L,kt=T.len(),fn=T.data,oe===ae.C&&(Ve+=A-fn[kt-4],ze+=L-fn[kt-3]),Vt=Ce[Ee++],Wt=Ce[Ee++],A=Ce[Ee++],L=Ce[Ee++],T.addData(ge=ae.C,Ve,ze,Vt,Wt,A,L);break;case"s":Ve=A,ze=L,kt=T.len(),fn=T.data,oe===ae.C&&(Ve+=A-fn[kt-4],ze+=L-fn[kt-3]),Vt=A+Ce[Ee++],Wt=L+Ce[Ee++],A+=Ce[Ee++],L+=Ce[Ee++],T.addData(ge=ae.C,Ve,ze,Vt,Wt,A,L);break;case"Q":Vt=Ce[Ee++],Wt=Ce[Ee++],A=Ce[Ee++],L=Ce[Ee++],T.addData(ge=ae.Q,Vt,Wt,A,L);break;case"q":Vt=Ce[Ee++]+A,Wt=Ce[Ee++]+L,A+=Ce[Ee++],L+=Ce[Ee++],T.addData(ge=ae.Q,Vt,Wt,A,L);break;case"T":Ve=A,ze=L,kt=T.len(),fn=T.data,oe===ae.Q&&(Ve+=A-fn[kt-4],ze+=L-fn[kt-3]),A=Ce[Ee++],L=Ce[Ee++],T.addData(ge=ae.Q,Ve,ze,A,L);break;case"t":Ve=A,ze=L,kt=T.len(),fn=T.data,oe===ae.Q&&(Ve+=A-fn[kt-4],ze+=L-fn[kt-3]),A+=Ce[Ee++],L+=Ce[Ee++],T.addData(ge=ae.Q,Ve,ze,A,L);break;case"A":We=Ce[Ee++],tt=Ce[Ee++],st=Ce[Ee++],Tt=Ce[Ee++],At=Ce[Ee++],Y(Vt=A,Wt=L,A=Ce[Ee++],L=Ce[Ee++],Tt,At,We,tt,st,ge=ae.A,T);break;case"a":We=Ce[Ee++],tt=Ce[Ee++],st=Ce[Ee++],Tt=Ce[Ee++],At=Ce[Ee++],Y(Vt=A,Wt=L,A+=Ce[Ee++],L+=Ce[Ee++],Tt,At,We,tt,st,ge=ae.A,T)}}("z"===fe||"Z"===fe)&&(T.addData(ge=ae.Z),A=N,L=ie),oe=ge}return T.toStatic(),T}(I),L=(0,$.extend)({},T);return L.buildPath=function(N){var ie;X(N)?(N.setData(A.data),(ie=N.getContext())&&N.rebuildPath(ie,1)):A.rebuildPath(ie=N,1)},L.applyTransform=function(N){j(A,N),this.dirtyShape()},L}function B(I,T){return new W(K(I,T))}function O(I,T){var A=K(I,T);return function(N){function ie(oe){var ae=N.call(this,oe)||this;return ae.applyTransform=A.applyTransform,ae.buildPath=A.buildPath,ae}return(0,le.ZT)(ie,N),ie}(W)}function D(I,T){for(var A=[],L=I.length,N=0;N<L;N++)A.push(I[N].getUpdatedPathProxy(!0));var oe=new Se.ZP(T);return oe.createPathProxy(),oe.buildPath=function(ae){if(X(ae)){ae.appendPath(A);var he=ae.getContext();he&&ae.rebuildPath(he,1)}},oe}function P(I,T){T=T||{};var A=new Se.ZP;return I.shape&&A.setShape(I.shape),A.setStyle(I.style),T.bakeTransform?j(A.path,I.getComputedTransform()):T.toLocal?A.setLocalTransform(I.getComputedTransform()):A.copyTransform(I),A.buildPath=I.buildPath,A.applyTransform=A.applyTransform,A.z=I.z,A.z2=I.z2,A.zlevel=I.zlevel,A}},315:(Ut,rt,z)=>{z.r(rt),z.d(rt,{dispose:()=>gr,disposeAll:()=>Je,getElementSSRData:()=>dt,getInstance:()=>wt,init:()=>xr,registerPainter:()=>nn,registerSSRDataGetter:()=>Lt,version:()=>qt});var le=z(9420),Se=z(9496),ce=z(908),_e=z(5145),ye=function Ze(et,$e){this.target=et,this.topTarget=$e&&$e.topTarget},be=function(){function Ze(et){this.handler=et,et.on("mousedown",this._dragStart,this),et.on("mousemove",this._drag,this),et.on("mouseup",this._dragEnd,this)}return Ze.prototype._dragStart=function(et){for(var $e=et.target;$e&&!$e.draggable;)$e=$e.parent||$e.__hostTarget;$e&&(this._draggingTarget=$e,$e.dragging=!0,this._x=et.offsetX,this._y=et.offsetY,this.handler.dispatchToElement(new ye($e,et),"dragstart",et.event))},Ze.prototype._drag=function(et){var $e=this._draggingTarget;if($e){var mt=et.offsetX,Zt=et.offsetY,vn=mt-this._x,mn=Zt-this._y;this._x=mt,this._y=Zt,$e.drift(vn,mn,et),this.handler.dispatchToElement(new ye($e,et),"drag",et.event);var Rn=this.handler.findHover(mt,Zt,$e).target,ur=this._dropTarget;this._dropTarget=Rn,$e!==Rn&&(ur&&Rn!==ur&&this.handler.dispatchToElement(new ye(ur,et),"dragleave",et.event),Rn&&Rn!==ur&&this.handler.dispatchToElement(new ye(Rn,et),"dragenter",et.event))}},Ze.prototype._dragEnd=function(et){var $e=this._draggingTarget;$e&&($e.dragging=!1),this.handler.dispatchToElement(new ye($e,et),"dragend",et.event),this._dropTarget&&this.handler.dispatchToElement(new ye(this._dropTarget,et),"drop",et.event),this._draggingTarget=null,this._dropTarget=null},Ze}();const we=be;var de=z(6735),j=z(2614),$=function(){function Ze(){this._track=[]}return Ze.prototype.recognize=function(et,$e,mt){return this._doTrack(et,$e,mt),this._recognize(et)},Ze.prototype.clear=function(){return this._track.length=0,this},Ze.prototype._doTrack=function(et,$e,mt){var Zt=et.touches;if(Zt){for(var vn={points:[],touches:[],target:$e,event:et},mn=0,Rn=Zt.length;mn<Rn;mn++){var ur=Zt[mn],Zi=j.eV(mt,ur,{});vn.points.push([Zi.zrX,Zi.zrY]),vn.touches.push(ur)}this._track.push(vn)}},Ze.prototype._recognize=function(et){for(var $e in te)if(te.hasOwnProperty($e)){var mt=te[$e](this._track,et);if(mt)return mt}},Ze}();function G(Ze){var et=Ze[1][0]-Ze[0][0],$e=Ze[1][1]-Ze[0][1];return Math.sqrt(et*et+$e*$e)}var te={pinch:function(Ze,et){var $e=Ze.length;if($e){var mt=(Ze[$e-1]||{}).points,Zt=(Ze[$e-2]||{}).points||mt;if(Zt&&Zt.length>1&&mt&&mt.length>1){var vn=G(mt)/G(Zt);!isFinite(vn)&&(vn=1),et.pinchScale=vn;var mn=function Z(Ze){return[(Ze[0][0]+Ze[1][0])/2,(Ze[0][1]+Ze[1][1])/2]}(mt);return et.pinchX=mn[0],et.pinchY=mn[1],{type:"pinch",target:Ze[0].target,event:et}}}}},ee=z(468),Q="silent";function b(){j.sT(this.event)}var Y=function(Ze){function et(){var $e=null!==Ze&&Ze.apply(this,arguments)||this;return $e.handler=null,$e}return(0,ce.ZT)(et,Ze),et.prototype.dispose=function(){},et.prototype.setCursor=function(){},et}(de.Z),q=function Ze(et,$e){this.x=et,this.y=$e},H=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],re=new ee.Z(0,0,0,0),W=function(Ze){function et($e,mt,Zt,vn,mn){var Rn=Ze.call(this)||this;return Rn._hovered=new q(0,0),Rn.storage=$e,Rn.painter=mt,Rn.painterRoot=vn,Rn._pointerSize=mn,Zt=Zt||new Y,Rn.proxy=null,Rn.setHandlerProxy(Zt),Rn._draggingMgr=new we(Rn),Rn}return(0,ce.ZT)(et,Ze),et.prototype.setHandlerProxy=function($e){this.proxy&&this.proxy.dispose(),$e&&(Se.each(H,function(mt){$e.on&&$e.on(mt,this[mt],this)},this),$e.handler=this),this.proxy=$e},et.prototype.mousemove=function($e){var mt=$e.zrX,Zt=$e.zrY,vn=B(this,mt,Zt),mn=this._hovered,Rn=mn.target;Rn&&!Rn.__zr&&(Rn=(mn=this.findHover(mn.x,mn.y)).target);var ur=this._hovered=vn?new q(mt,Zt):this.findHover(mt,Zt),Zi=ur.target,Li=this.proxy;Li.setCursor&&Li.setCursor(Zi?Zi.cursor:"default"),Rn&&Zi!==Rn&&this.dispatchToElement(mn,"mouseout",$e),this.dispatchToElement(ur,"mousemove",$e),Zi&&Zi!==Rn&&this.dispatchToElement(ur,"mouseover",$e)},et.prototype.mouseout=function($e){var mt=$e.zrEventControl;"only_globalout"!==mt&&this.dispatchToElement(this._hovered,"mouseout",$e),"no_globalout"!==mt&&this.trigger("globalout",{type:"globalout",event:$e})},et.prototype.resize=function(){this._hovered=new q(0,0)},et.prototype.dispatch=function($e,mt){var Zt=this[$e];Zt&&Zt.call(this,mt)},et.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},et.prototype.setCursorStyle=function($e){var mt=this.proxy;mt.setCursor&&mt.setCursor($e)},et.prototype.dispatchToElement=function($e,mt,Zt){var vn=($e=$e||{}).target;if(!vn||!vn.silent){for(var mn="on"+mt,Rn=function J(Ze,et,$e){return{type:Ze,event:$e,target:et.target,topTarget:et.topTarget,cancelBubble:!1,offsetX:$e.zrX,offsetY:$e.zrY,gestureEvent:$e.gestureEvent,pinchX:$e.pinchX,pinchY:$e.pinchY,pinchScale:$e.pinchScale,wheelDelta:$e.zrDelta,zrByTouch:$e.zrByTouch,which:$e.which,stop:b}}(mt,$e,Zt);vn&&(vn[mn]&&(Rn.cancelBubble=!!vn[mn].call(vn,Rn)),vn.trigger(mt,Rn),vn=vn.__hostTarget?vn.__hostTarget:vn.parent,!Rn.cancelBubble););Rn.cancelBubble||(this.trigger(mt,Rn),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(ur){"function"==typeof ur[mn]&&ur[mn].call(ur,Rn),ur.trigger&&ur.trigger(mt,Rn)}))}},et.prototype.findHover=function($e,mt,Zt){var vn=this.storage.getDisplayList(),mn=new q($e,mt);if(K(vn,mn,$e,mt,Zt),this._pointerSize&&!mn.target){for(var Rn=[],ur=this._pointerSize,Zi=ur/2,Li=new ee.Z($e-Zi,mt-Zi,ur,ur),qa=vn.length-1;qa>=0;qa--){var ea=vn[qa];ea!==Zt&&!ea.ignore&&!ea.ignoreCoarsePointer&&(!ea.parent||!ea.parent.ignoreCoarsePointer)&&(re.copy(ea.getBoundingRect()),ea.transform&&re.applyTransform(ea.transform),re.intersect(Li)&&Rn.push(ea))}if(Rn.length)for(var Ea=Math.PI/12,Iv=2*Math.PI,Bu=0;Bu<Zi;Bu+=4)for(var Vu=0;Vu<Iv;Vu+=Ea)if(K(Rn,mn,$e+Bu*Math.cos(Vu),mt+Bu*Math.sin(Vu),Zt),mn.target)return mn}return mn},et.prototype.processGesture=function($e,mt){this._gestureMgr||(this._gestureMgr=new $);var Zt=this._gestureMgr;"start"===mt&&Zt.clear();var vn=Zt.recognize($e,this.findHover($e.zrX,$e.zrY,null).target,this.proxy.dom);if("end"===mt&&Zt.clear(),vn){var mn=vn.type;$e.gestureEvent=mn;var Rn=new q;Rn.target=vn.target,this.dispatchToElement(Rn,mn,vn.event)}},et}(de.Z);function X(Ze,et,$e){if(Ze[Ze.rectHover?"rectContain":"contain"](et,$e)){for(var mt=Ze,Zt=void 0,vn=!1;mt;){if(mt.ignoreClip&&(vn=!0),!vn){var mn=mt.getClipPath();if(mn&&!mn.contain(et,$e))return!1}mt.silent&&(Zt=!0),mt=mt.__hostTarget||mt.parent}return!Zt||Q}return!1}function K(Ze,et,$e,mt,Zt){for(var vn=Ze.length-1;vn>=0;vn--){var mn=Ze[vn],Rn=void 0;if(mn!==Zt&&!mn.ignore&&(Rn=X(mn,$e,mt))&&(!et.topTarget&&(et.topTarget=mn),Rn!==Q)){et.target=mn;break}}}function B(Ze,et,$e){var mt=Ze.painter;return et<0||et>mt.getWidth()||$e<0||$e>mt.getHeight()}Se.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(Ze){W.prototype[Ze]=function(et){var vn,mn,$e=et.zrX,mt=et.zrY,Zt=B(this,$e,mt);if(("mouseup"!==Ze||!Zt)&&(mn=(vn=this.findHover($e,mt)).target),"mousedown"===Ze)this._downEl=mn,this._downPoint=[et.zrX,et.zrY],this._upEl=mn;else if("mouseup"===Ze)this._upEl=mn;else if("click"===Ze){if(this._downEl!==this._upEl||!this._downPoint||_e.dist(this._downPoint,[et.zrX,et.zrY])>4)return;this._downPoint=null}this.dispatchToElement(vn,Ze,et)}});const O=W;var D=z(445),P=z(6839),I=!1;function T(){I||(I=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function A(Ze,et){return Ze.zlevel===et.zlevel?Ze.z===et.z?Ze.z2-et.z2:Ze.z-et.z:Ze.zlevel-et.zlevel}var L=function(){function Ze(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=A}return Ze.prototype.traverse=function(et,$e){for(var mt=0;mt<this._roots.length;mt++)this._roots[mt].traverse(et,$e)},Ze.prototype.getDisplayList=function(et,$e){$e=$e||!1;var mt=this._displayList;return(et||!mt.length)&&this.updateDisplayList($e),mt},Ze.prototype.updateDisplayList=function(et){this._displayListLen=0;for(var $e=this._roots,mt=this._displayList,Zt=0,vn=$e.length;Zt<vn;Zt++)this._updateAndAddDisplayable($e[Zt],null,et);mt.length=this._displayListLen,(0,D.Z)(mt,A)},Ze.prototype._updateAndAddDisplayable=function(et,$e,mt){if(!et.ignore||mt){et.beforeUpdate(),et.update(),et.afterUpdate();var Zt=et.getClipPath();if(et.ignoreClip)$e=null;else if(Zt){$e=$e?$e.slice():[];for(var vn=Zt,mn=et;vn;)vn.parent=mn,vn.updateTransform(),$e.push(vn),mn=vn,vn=vn.getClipPath()}if(et.childrenRef){for(var Rn=et.childrenRef(),ur=0;ur<Rn.length;ur++){var Zi=Rn[ur];et.__dirty&&(Zi.__dirty|=P.YV),this._updateAndAddDisplayable(Zi,$e,mt)}et.__dirty=0}else{var Li=et;$e&&$e.length?Li.__clipPaths=$e:Li.__clipPaths&&Li.__clipPaths.length>0&&(Li.__clipPaths=[]),isNaN(Li.z)&&(T(),Li.z=0),isNaN(Li.z2)&&(T(),Li.z2=0),isNaN(Li.zlevel)&&(T(),Li.zlevel=0),this._displayList[this._displayListLen++]=Li}var qa=et.getDecalElement&&et.getDecalElement();qa&&this._updateAndAddDisplayable(qa,$e,mt);var ea=et.getTextGuideLine();ea&&this._updateAndAddDisplayable(ea,$e,mt);var co=et.getTextContent();co&&this._updateAndAddDisplayable(co,$e,mt)}},Ze.prototype.addRoot=function(et){et.__zr&&et.__zr.storage===this||this._roots.push(et)},Ze.prototype.delRoot=function(et){if(et instanceof Array)for(var $e=0,mt=et.length;$e<mt;$e++)this.delRoot(et[$e]);else{var Zt=Se.indexOf(this._roots,et);Zt>=0&&this._roots.splice(Zt,1)}},Ze.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},Ze.prototype.getRoots=function(){return this._roots},Ze.prototype.dispose=function(){this._displayList=null,this._roots=null},Ze}();const N=L;var ie=z(2415),oe=z(3945);function ae(){return(new Date).getTime()}var he=function(Ze){function et($e){var mt=Ze.call(this)||this;return mt._running=!1,mt._time=0,mt._pausedTime=0,mt._pauseStart=0,mt._paused=!1,mt.stage=($e=$e||{}).stage||{},mt}return(0,ce.ZT)(et,Ze),et.prototype.addClip=function($e){$e.animation&&this.removeClip($e),this._head?(this._tail.next=$e,$e.prev=this._tail,$e.next=null,this._tail=$e):this._head=this._tail=$e,$e.animation=this},et.prototype.addAnimator=function($e){$e.animation=this;var mt=$e.getClip();mt&&this.addClip(mt)},et.prototype.removeClip=function($e){if($e.animation){var mt=$e.prev,Zt=$e.next;mt?mt.next=Zt:this._head=Zt,Zt?Zt.prev=mt:this._tail=mt,$e.next=$e.prev=$e.animation=null}},et.prototype.removeAnimator=function($e){var mt=$e.getClip();mt&&this.removeClip(mt),$e.animation=null},et.prototype.update=function($e){for(var mt=ae()-this._pausedTime,Zt=mt-this._time,vn=this._head;vn;){var mn=vn.next;vn.step(mt,Zt)&&(vn.ondestroy(),this.removeClip(vn)),vn=mn}this._time=mt,$e||(this.trigger("frame",Zt),this.stage.update&&this.stage.update())},et.prototype._startLoop=function(){var $e=this;this._running=!0,(0,ie.Z)(function mt(){$e._running&&((0,ie.Z)(mt),!$e._paused&&$e.update())})},et.prototype.start=function(){this._running||(this._time=ae(),this._pausedTime=0,this._startLoop())},et.prototype.stop=function(){this._running=!1},et.prototype.pause=function(){this._paused||(this._pauseStart=ae(),this._paused=!0)},et.prototype.resume=function(){this._paused&&(this._pausedTime+=ae()-this._pauseStart,this._paused=!1)},et.prototype.clear=function(){for(var $e=this._head;$e;){var mt=$e.next;$e.prev=$e.next=$e.animation=null,$e=mt}this._head=this._tail=null},et.prototype.isFinished=function(){return null==this._head},et.prototype.animate=function($e,mt){mt=mt||{},this.start();var Zt=new oe.Z($e,mt.loop);return this.addAnimator(Zt),Zt},et}(de.Z);const se=he;var Ze,$e,fe=le.Z.domSupported,ge=($e={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},{mouse:Ze=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touch:["touchstart","touchend","touchmove"],pointer:Se.map(Ze,function(Zt){var vn=Zt.replace("mouse","pointer");return $e.hasOwnProperty(vn)?vn:Zt})}),Ce_mouse=["mousemove","mouseup"],Ce_pointer=["pointermove","pointerup"],Te=!1;function Ie(Ze){var et=Ze.pointerType;return"pen"===et||"touch"===et}function Ve(Ze){Ze&&(Ze.zrByTouch=!0)}function We(Ze,et){for(var $e=et,mt=!1;$e&&9!==$e.nodeType&&!(mt=$e.domBelongToZr||$e!==et&&$e===Ze.painterRoot);)$e=$e.parentNode;return mt}var tt=function Ze(et,$e){this.stopPropagation=Se.noop,this.stopImmediatePropagation=Se.noop,this.preventDefault=Se.noop,this.type=$e.type,this.target=this.currentTarget=et.dom,this.pointerType=$e.pointerType,this.clientX=$e.clientX,this.clientY=$e.clientY},st={mousedown:function(Ze){Ze=(0,j.OD)(this.dom,Ze),this.__mayPointerCapture=[Ze.zrX,Ze.zrY],this.trigger("mousedown",Ze)},mousemove:function(Ze){Ze=(0,j.OD)(this.dom,Ze);var et=this.__mayPointerCapture;et&&(Ze.zrX!==et[0]||Ze.zrY!==et[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",Ze)},mouseup:function(Ze){Ze=(0,j.OD)(this.dom,Ze),this.__togglePointerCapture(!1),this.trigger("mouseup",Ze)},mouseout:function(Ze){We(this,(Ze=(0,j.OD)(this.dom,Ze)).toElement||Ze.relatedTarget)||(this.__pointerCapturing&&(Ze.zrEventControl="no_globalout"),this.trigger("mouseout",Ze))},wheel:function(Ze){Te=!0,Ze=(0,j.OD)(this.dom,Ze),this.trigger("mousewheel",Ze)},mousewheel:function(Ze){Te||(Ze=(0,j.OD)(this.dom,Ze),this.trigger("mousewheel",Ze))},touchstart:function(Ze){Ve(Ze=(0,j.OD)(this.dom,Ze)),this.__lastTouchMoment=new Date,this.handler.processGesture(Ze,"start"),st.mousemove.call(this,Ze),st.mousedown.call(this,Ze)},touchmove:function(Ze){Ve(Ze=(0,j.OD)(this.dom,Ze)),this.handler.processGesture(Ze,"change"),st.mousemove.call(this,Ze)},touchend:function(Ze){Ve(Ze=(0,j.OD)(this.dom,Ze)),this.handler.processGesture(Ze,"end"),st.mouseup.call(this,Ze),+new Date-+this.__lastTouchMoment<300&&st.click.call(this,Ze)},pointerdown:function(Ze){st.mousedown.call(this,Ze)},pointermove:function(Ze){Ie(Ze)||st.mousemove.call(this,Ze)},pointerup:function(Ze){st.mouseup.call(this,Ze)},pointerout:function(Ze){Ie(Ze)||st.mouseout.call(this,Ze)}};Se.each(["click","dblclick","contextmenu"],function(Ze){st[Ze]=function(et){et=(0,j.OD)(this.dom,et),this.trigger(Ze,et)}});var Tt={pointermove:function(Ze){Ie(Ze)||Tt.mousemove.call(this,Ze)},pointerup:function(Ze){Tt.mouseup.call(this,Ze)},mousemove:function(Ze){this.trigger("mousemove",Ze)},mouseup:function(Ze){var et=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",Ze),et&&(Ze.zrEventControl="only_globalout",this.trigger("mouseout",Ze))}};function Wt(Ze,et,$e,mt){Ze.mounted[et]=$e,Ze.listenerOpts[et]=mt,(0,j.Oo)(Ze.domTarget,et,$e,mt)}function kt(Ze){var et=Ze.mounted;for(var $e in et)et.hasOwnProperty($e)&&(0,j.xg)(Ze.domTarget,$e,et[$e],Ze.listenerOpts[$e]);Ze.mounted={}}var fn=function Ze(et,$e){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=et,this.domHandlers=$e},wn=function(Ze){function et($e,mt){var Zt=Ze.call(this)||this;return Zt.__pointerCapturing=!1,Zt.dom=$e,Zt.painterRoot=mt,Zt._localHandlerScope=new fn($e,st),fe&&(Zt._globalHandlerScope=new fn(document,Tt)),function At(Ze,et){var $e=et.domHandlers;le.Z.pointerEventsSupported?Se.each(ge.pointer,function(mt){Wt(et,mt,function(Zt){$e[mt].call(Ze,Zt)})}):(le.Z.touchEventsSupported&&Se.each(ge.touch,function(mt){Wt(et,mt,function(Zt){$e[mt].call(Ze,Zt),function Ee(Ze){Ze.touching=!0,null!=Ze.touchTimer&&(clearTimeout(Ze.touchTimer),Ze.touchTimer=null),Ze.touchTimer=setTimeout(function(){Ze.touching=!1,Ze.touchTimer=null},700)}(et)})}),Se.each(ge.mouse,function(mt){Wt(et,mt,function(Zt){Zt=(0,j.iP)(Zt),et.touching||$e[mt].call(Ze,Zt)})}))}(Zt,Zt._localHandlerScope),Zt}return(0,ce.ZT)(et,Ze),et.prototype.dispose=function(){kt(this._localHandlerScope),fe&&kt(this._globalHandlerScope)},et.prototype.setCursor=function($e){this.dom.style&&(this.dom.style.cursor=$e||"default")},et.prototype.__togglePointerCapture=function($e){if(this.__mayPointerCapture=null,fe&&+this.__pointerCapturing^+$e){this.__pointerCapturing=$e;var mt=this._globalHandlerScope;$e?function Vt(Ze,et){function $e(mt){Wt(et,mt,function Zt(vn){vn=(0,j.iP)(vn),We(Ze,vn.target)||(vn=function ze(Ze,et){return(0,j.OD)(Ze.dom,new tt(Ze,et),!0)}(Ze,vn),et.domHandlers[mt].call(Ze,vn))},{capture:!0})}le.Z.pointerEventsSupported?Se.each(Ce_pointer,$e):le.Z.touchEventsSupported||Se.each(Ce_mouse,$e)}(this,mt):kt(mt)}},et}(de.Z);const sr=wn;var Xt,Xn=z(2523),pr=z(9072),rr=z(189),Qt={},un={},jn=function(){function Ze(et,$e,mt){var Zt=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,mt=mt||{},this.dom=$e,this.id=et;var vn=new N,mn=mt.renderer||"canvas";Qt[mn]||(mn=Se.keys(Qt)[0]),mt.useDirtyRect=mt.useDirtyRect??!1;var Rn=new Qt[mn]($e,vn,mt,et),ur=mt.ssr||Rn.ssrOnly;this.storage=vn,this.painter=Rn;var co,Zi=le.Z.node||le.Z.worker||ur?null:new sr(Rn.getViewportRoot(),Rn.root),Li=mt.useCoarsePointer;(null==Li||"auto"===Li?le.Z.touchEventsSupported:!!Li)&&(co=Se.retrieve2(mt.pointerSize,44)),this.handler=new O(vn,Rn,Zi,Rn.root,co),this.animation=new se({stage:{update:ur?null:function(){return Zt._flush(!0)}}}),ur||this.animation.start()}return Ze.prototype.add=function(et){this._disposed||!et||(this.storage.addRoot(et),et.addSelfToZr(this),this.refresh())},Ze.prototype.remove=function(et){this._disposed||!et||(this.storage.delRoot(et),et.removeSelfFromZr(this),this.refresh())},Ze.prototype.configLayer=function(et,$e){this._disposed||(this.painter.configLayer&&this.painter.configLayer(et,$e),this.refresh())},Ze.prototype.setBackgroundColor=function(et){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(et),this.refresh(),this._backgroundColor=et,this._darkMode=function Nn(Ze){if(!Ze)return!1;if("string"==typeof Ze)return(0,Xn.lum)(Ze,1)<pr.Ak;if(Ze.colorStops){for(var et=Ze.colorStops,$e=0,mt=et.length,Zt=0;Zt<mt;Zt++)$e+=(0,Xn.lum)(et[Zt].color,1);return($e/=mt)<pr.Ak}return!1}(et))},Ze.prototype.getBackgroundColor=function(){return this._backgroundColor},Ze.prototype.setDarkMode=function(et){this._darkMode=et},Ze.prototype.isDarkMode=function(){return this._darkMode},Ze.prototype.refreshImmediately=function(et){this._disposed||(et||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},Ze.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},Ze.prototype.flush=function(){this._disposed||this._flush(!1)},Ze.prototype._flush=function(et){var $e,mt=ae();this._needsRefresh&&($e=!0,this.refreshImmediately(et)),this._needsRefreshHover&&($e=!0,this.refreshHoverImmediately());var Zt=ae();$e?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:Zt-mt})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},Ze.prototype.setSleepAfterStill=function(et){this._sleepAfterStill=et},Ze.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},Ze.prototype.refreshHover=function(){this._needsRefreshHover=!0},Ze.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&"canvas"===this.painter.getType()&&this.painter.refreshHover())},Ze.prototype.resize=function(et){this._disposed||(this.painter.resize((et=et||{}).width,et.height),this.handler.resize())},Ze.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},Ze.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},Ze.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},Ze.prototype.setCursorStyle=function(et){this._disposed||this.handler.setCursorStyle(et)},Ze.prototype.findHover=function(et,$e){if(!this._disposed)return this.handler.findHover(et,$e)},Ze.prototype.on=function(et,$e,mt){return this._disposed||this.handler.on(et,$e,mt),this},Ze.prototype.off=function(et,$e){this._disposed||this.handler.off(et,$e)},Ze.prototype.trigger=function(et,$e){this._disposed||this.handler.trigger(et,$e)},Ze.prototype.clear=function(){if(!this._disposed){for(var et=this.storage.getRoots(),$e=0;$e<et.length;$e++)et[$e]instanceof rr.Z&&et[$e].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},Ze.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,function Pn(Ze){delete un[Ze]}(this.id))},Ze}();function xr(Ze,et){var $e=new jn(Se.guid(),Ze,et);return un[$e.id]=$e,$e}function gr(Ze){Ze.dispose()}function Je(){for(var Ze in un)un.hasOwnProperty(Ze)&&un[Ze].dispose();un={}}function wt(Ze){return un[Ze]}function nn(Ze,et){Qt[Ze]=et}function dt(Ze){if("function"==typeof Xt)return Xt(Ze)}function Lt(Ze){Xt=Ze}var qt="5.6.0"}},Ut=>{Ut(Ut.s=118)}]);