"use strict";(self.webpackChunkcv_toolbox=self.webpackChunkcv_toolbox||[]).push([[179],{8775:(Bt,Qe,z)=>{z.r(Qe),z.d(Qe,{Axis:()=>Se.RD,ChartView:()=>Se.TA,ComponentModel:()=>Se.tF,ComponentView:()=>Se.Ir,List:()=>Se.aV,Model:()=>Se.Hn,PRIORITY:()=>Se.Hr,SeriesModel:()=>Se.wJ,color:()=>Se.$_,connect:()=>Se.$j,dataTool:()=>Se.Ok,dependencies:()=>Se.HO,disConnect:()=>Se.eU,disconnect:()=>Se.zP,dispose:()=>Se.B9,env:()=>Se.OB,extendChartView:()=>Se.Zy,extendComponentModel:()=>Se.tv,extendComponentView:()=>Se.Sp,extendSeriesModel:()=>Se.Zr,format:()=>Se.WU,getCoordinateSystemDimensions:()=>Se.wL,getInstanceByDom:()=>Se.JE,getInstanceById:()=>Se.rp,getMap:()=>Se.FU,graphic:()=>Se.Q,helper:()=>Se._y,init:()=>Se.S1,innerDrawElementOnCanvas:()=>Se.z$,matrix:()=>Se.pI,number:()=>Se.Rx,parseGeoJSON:()=>Se.Nu,parseGeoJson:()=>Se.pQ,registerAction:()=>Se.zl,registerCoordinateSystem:()=>Se.RS,registerLayout:()=>Se.qR,registerLoading:()=>Se.yn,registerLocale:()=>Se.I2,registerMap:()=>Se.je,registerPostInit:()=>Se.sq,registerPostUpdate:()=>Se.Br,registerPreprocessor:()=>Se.ds,registerProcessor:()=>Se.Pu,registerTheme:()=>Se.aW,registerTransform:()=>Se.rV,registerUpdateLifecycle:()=>Se.YK,registerVisual:()=>Se.Og,setCanvasCreator:()=>Se.jQ,setPlatformAPI:()=>Se.g2,throttle:()=>Se.P2,time:()=>Se.XV,use:()=>Se.D$,util:()=>Se.D5,vector:()=>Se.xr,version:()=>Se.i8,zrUtil:()=>Se.gf,zrender:()=>Se.x_});var ce=z(5199),Se=z(3786),le=z(1659),ye=z(8541),ve=z(126),be=z(6766),Ce=z(1790),he=z(491),j=Math.sin,X=Math.cos,re=Math.PI,U=2*Math.PI,ee=180/re;const ie=function(){function u(){}return u.prototype.reset=function(o){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,o||4)},u.prototype.moveTo=function(o,a){this._add("M",o,a)},u.prototype.lineTo=function(o,a){this._add("L",o,a)},u.prototype.bezierCurveTo=function(o,a,l,c,h,f){this._add("C",o,a,l,c,h,f)},u.prototype.quadraticCurveTo=function(o,a,l,c){this._add("Q",o,a,l,c)},u.prototype.arc=function(o,a,l,c,h,f){this.ellipse(o,a,l,l,0,c,h,f)},u.prototype.ellipse=function(o,a,l,c,h,f,g,m){var L,y=g-f,x=!m,w=Math.abs(y),D=(0,ye.zT)(w-U)||(x?y>=U:-y>=U),I=y>0?y%U:y%U+U;L=!!D||!(0,ye.zT)(w)&&I>=re==!!x;var N=o+l*X(f),Z=a+c*j(f);this._start&&this._add("M",N,Z);var se=Math.round(h*ee);if(D){var _e=1/this._p,me=(x?1:-1)*(U-_e);this._add("A",l,c,se,1,+x,o+l*X(f+me),a+c*j(f+me)),_e>.01&&this._add("A",l,c,se,0,+x,N,Z)}else{var De=o+l*X(g),Pe=a+c*j(g);this._add("A",l,c,se,+L,+x,De,Pe)}},u.prototype.rect=function(o,a,l,c){this._add("M",o,a),this._add("l",l,0),this._add("l",0,c),this._add("l",-l,0),this._add("Z")},u.prototype.closePath=function(){this._d.length>0&&this._add("Z")},u.prototype._add=function(o,a,l,c,h,f,g,m,y){for(var x=[],w=this._p,D=1;D<arguments.length;D++){var I=arguments[D];if(isNaN(I))return void(this._invalid=!0);x.push(Math.round(I*w)/w)}this._d.push(o+x.join(" ")),this._start="Z"===o},u.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},u.prototype.getStr=function(){return this._str},u}();var K=z(9411),b=z(628),Y="none",Q=Math.round,G=["lineCap","miterLimit","lineJoin"],W=(0,b.map)(G,function(u){return"stroke-"+u.toLowerCase()});var V=z(2425),P="http://www.w3.org/2000/svg",T="http://www.w3.org/1999/xlink";function M(u){return document.createElementNS(P,u)}function A(u,o,a,l,c){return{tag:u,attrs:a||{},children:l,text:c,key:o}}function ue(u,o){var a=(o=o||{}).newline?"\n":"";return function l(c){var h=c.children,f=c.tag;return function O(u,o){var a=[];if(o)for(var l in o){var c=o[l],h=l;!1!==c&&(!0!==c&&null!=c&&(h+='="'+c+'"'),a.push(h))}return"<"+u+" "+a.join(" ")+">"}(f,c.attrs)+(0,V.F1)(c.text)+(h?""+a+(0,b.map)(h,function(m){return l(m)}).join(a)+a:"")+function B(u){return"</"+u+">"}(f)}(u)}function oe(u){return{zrId:u,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssClassIdx:0,cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function de(u,o,a,l){return A("svg","root",{width:u,height:o,xmlns:P,"xmlns:xlink":T,version:"1.1",baseProfile:"full",viewBox:!!l&&"0 0 "+u+" "+o},a)}var te=z(6790),xe=z(9778),fe=z(7349),ge=z(1115),we=z(6410),Te={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},Ae="transform-origin";function Ee(u,o,a){var l=(0,b.extend)({},u.shape);(0,b.extend)(l,o),u.buildPath(a,l);var c=new ie;return c.reset((0,ye.Gk)(u)),a.rebuildPath(c,1),c.generateStr(),c.getStr()}function Ve(u,o){var a=o.originX,l=o.originY;(a||l)&&(u[Ae]=a+"px "+l+"px")}var He={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function We(u,o){var a=o.zrId+"-ani-"+o.cssAnimIdx++;return o.cssAnims[a]=u,a}function lt(u){return(0,b.isString)(u)?Te[u]?"cubic-bezier("+Te[u]+")":(0,we.H)(u)?u:"":""}function St(u,o,a,l){var c=u.animators,h=c.length,f=[];if(u instanceof ge.Z){var g=function $e(u,o,a){var h,f,c={};if((0,b.each)(u.shape.paths,function(m){var y=oe(a.zrId);y.animation=!0,St(m,{},y,!0);var x=y.cssAnims,w=y.cssNodes,D=(0,b.keys)(x),I=D.length;if(I){var L=x[f=D[I-1]];for(var N in L){var Z=L[N];c[N]=c[N]||{d:""},c[N].d+=Z.d||""}for(var se in w){var _e=w[se].animation;_e.indexOf(f)>=0&&(h=_e)}}}),h){o.d=!1;var g=We(c,a);return h.replace(f,g)}}(u,o,a);if(g)f.push(g);else if(!h)return}else if(!h)return;for(var m={},y=0;y<h;y++){var x=c[y],w=[x.getMaxTime()/1e3+"s"],D=lt(x.getClip().easing),I=x.getDelay();w.push(D||"linear"),I&&w.push(I/1e3+"s"),x.getLoop()&&w.push("infinite");var L=w.join(" ");m[L]=m[L]||[L,[]],m[L][1].push(x)}function N(_e){var me=_e[1],De=me.length,Pe={},Ie={},ke={},Ue="animation-timing-function";function Ye(ir,Ci,vi){for(var Ni=ir.getTracks(),ao=ir.getMaxTime(),vo=0;vo<Ni.length;vo++){var sa=Ni[vo];if(sa.needsAnimate()){var ba=sa.keyframes,Aa=sa.propName;if(vi&&(Aa=vi(Aa)),Aa)for(var vs=0;vs<ba.length;vs++){var gl=ba[vs],Zo=Math.round(gl.time/ao*100)+"%",J_=lt(gl.easing),tc=gl.rawValue;((0,b.isString)(tc)||(0,b.isNumber)(tc))&&(Ci[Zo]=Ci[Zo]||{},Ci[Zo][Aa]=gl.rawValue,J_&&(Ci[Zo][Ue]=J_))}}}}for(var Ke=0;Ke<De;Ke++)(ut=(qe=me[Ke]).targetName)?"shape"===ut&&Ye(qe,Ie):!l&&Ye(qe,Pe);for(var pt in Pe){var yt={};(0,xe.kY)(yt,u),(0,b.extend)(yt,Pe[pt]);var wt=(0,ye.gA)(yt),kt=Pe[pt][Ue];ke[pt]=wt?{transform:wt}:{},Ve(ke[pt],yt),kt&&(ke[pt][Ue]=kt)}var en,jt=!0;for(var pt in Ie){ke[pt]=ke[pt]||{};var dn=!en;kt=Ie[pt][Ue],dn&&(en=new fe.Z);var Fn=en.len();en.reset(),ke[pt].d=Ee(u,Ie[pt],en);var Hn=en.len();if(!dn&&Fn!==Hn){jt=!1;break}kt&&(ke[pt][Ue]=kt)}if(!jt)for(var pt in ke)delete ke[pt].d;if(!l)for(Ke=0;Ke<De;Ke++){var qe,ut;"style"===(ut=(qe=me[Ke]).targetName)&&Ye(qe,ke,function(Ni){return He[Ni]})}var Fr,lr=(0,b.keys)(ke),br=!0;for(Ke=1;Ke<lr.length;Ke++){var xi=lr[Ke-1];if(ke[xi][Ae]!==ke[lr[Ke]][Ae]){br=!1;break}Fr=ke[xi][Ae]}if(br&&Fr){for(var pt in ke)ke[pt][Ae]&&delete ke[pt][Ae];o[Ae]=Fr}if((0,b.filter)(lr,function(ir){return(0,b.keys)(ke[ir]).length>0}).length)return We(ke,a)+" "+_e[0]+" both"}for(var Z in m)(g=N(m[Z]))&&f.push(g);if(f.length){var se=a.zrId+"-cls-"+a.cssClassIdx++;a.cssNodes["."+se]={animation:f.join(",")},o.class=se}}var _t=z(8208),Ot=z(5730),Vt=Math.round;function an(u){return u&&(0,b.isString)(u.src)}function hn(u){return u&&(0,b.isFunction)(u.toDataURL)}function Vn(u,o,a,l){(function J(u,o,a,l){var c=o.opacity??1;if(a instanceof be.ZP)u("opacity",c);else{if(function F(u){var o=u.fill;return null!=o&&o!==Y}(o)){var h=(0,ye.ut)(o.fill);u("fill",h.color);var f=null!=o.fillOpacity?o.fillOpacity*h.opacity*c:h.opacity*c;(l||f<1)&&u("fill-opacity",f)}else u("fill",Y);if(function q(u){var o=u.stroke;return null!=o&&o!==Y}(o)){var g=(0,ye.ut)(o.stroke);u("stroke",g.color);var m=o.strokeNoScale?a.getLineScale():1,y=m?(o.lineWidth||0)/m:0,x=null!=o.strokeOpacity?o.strokeOpacity*g.opacity*c:g.opacity*c,w=o.strokeFirst;if((l||1!==y)&&u("stroke-width",y),(l||w)&&u("paint-order",w?"stroke":"fill"),(l||x<1)&&u("stroke-opacity",x),o.lineDash){var D=(0,K.a)(a),I=D[0],L=D[1];I&&(L=Q(L||0),u("stroke-dasharray",I.join(",")),(L||l)&&u("stroke-dashoffset",L))}else l&&u("stroke-dasharray",Y);for(var N=0;N<G.length;N++){var Z=G[N];if(l||o[Z]!==ve.$t[Z]){var se=o[Z]||ve.$t[Z];se&&u(W[N],se)}}}else l&&u("stroke",Y)}})(function(c,h){var f="fill"===c||"stroke"===c;f&&(0,ye.H3)(h)?function hr(u,o,a,l){var h,c=u[a],f={gradientUnits:c.global?"userSpaceOnUse":"objectBoundingBox"};if((0,ye.I1)(c))h="linearGradient",f.x1=c.x,f.y1=c.y,f.x2=c.x2,f.y2=c.y2;else{if(!(0,ye.gO)(c))return;h="radialGradient",f.cx=(0,b.retrieve2)(c.x,.5),f.cy=(0,b.retrieve2)(c.y,.5),f.r=(0,b.retrieve2)(c.r,.5)}for(var g=c.colorStops,m=[],y=0,x=g.length;y<x;++y){var w=100*(0,ye.Pn)(g[y].offset)+"%",I=(0,ye.ut)(g[y].color),N=I.opacity,Z={offset:w};Z["stop-color"]=I.color,N<1&&(Z["stop-opacity"]=N),m.push(A("stop",y+"",Z))}var _e=ue(A(h,"",f,m)),me=l.gradientCache,De=me[_e];De||(De=l.zrId+"-g"+l.gradientIdx++,me[_e]=De,f.id=De,l.defs[De]=A(h,De,f,m)),o[a]=(0,ye.m1)(De)}(o,u,c,l):f&&(0,ye.R)(h)?function fr(u,o,a,l){var f,c=u.style[a],h={patternUnits:"userSpaceOnUse"};if((0,ye.Cv)(c)){var g=c.imageWidth,m=c.imageHeight,y=void 0,x=c.image;if((0,b.isString)(x)?y=x:an(x)?y=x.src:hn(x)&&(y=x.toDataURL()),typeof Image>"u"){var w="Image width/height must been given explictly in svg-ssr renderer.";(0,b.assert)(g,w),(0,b.assert)(m,w)}else if(null==g||null==m){var D=function(_e,me){if(_e){var De=_e.elm,Pe=_e.attrs.width=g||me.width,Ie=_e.attrs.height=m||me.height;De&&(De.setAttribute("width",Pe),De.setAttribute("height",Ie))}},I=(0,te.Gq)(y,null,u,function(_e){D(L,_e),D(f,_e)});I&&I.width&&I.height&&(g=g||I.width,m=m||I.height)}f=A("image","img",{href:y,width:g,height:m}),h.width=g,h.height=m}else c.svgElement&&(f=(0,b.clone)(c.svgElement),h.width=c.svgWidth,h.height=c.svgHeight);if(f){h.patternTransform=(0,ye.gA)(c);var L=A("pattern","",h,[f]),N=ue(L),Z=l.patternCache,se=Z[N];se||(se=l.zrId+"-p"+l.patternIdx++,Z[N]=se,h.id=se,L=l.defs[se]=A("pattern",se,h,[f])),o[a]=(0,ye.m1)(se)}}(a,u,c,l):u[c]=h},o,a,!1),function fn(u,o,a){var l=u.style;if((0,ye.i2)(l)){var c=(0,ye.n1)(u),h=a.shadowCache,f=h[c];if(!f){var g=u.getGlobalScale(),m=g[0],y=g[1];if(!m||!y)return;var x=l.shadowOffsetX||0,w=l.shadowOffsetY||0,D=l.shadowBlur,I=(0,ye.ut)(l.shadowColor),L=I.opacity,N=I.color,_e=D/2/m+" "+D/2/y;f=a.zrId+"-s"+a.shadowIdx++,a.defs[f]=A("filter",f,{id:f,x:"-100%",y:"-100%",width:"300%",height:"300%"},[A("feDropShadow","",{dx:x/m,dy:w/y,stdDeviation:_e,"flood-color":N,"flood-opacity":L})]),h[c]=f}o.filter=(0,ye.m1)(f)}}(a,u,l)}function ar(u){return(0,ye.zT)(u[0]-1)&&(0,ye.zT)(u[1])&&(0,ye.zT)(u[2])&&(0,ye.zT)(u[3]-1)}function vr(u,o,a){if(o&&(!function Yn(u){return(0,ye.zT)(u[4])&&(0,ye.zT)(u[5])}(o)||!ar(o))){var l=a?10:1e4;u.transform=ar(o)?"translate("+Vt(o[4]*l)/l+" "+Vt(o[5]*l)/l+")":(0,ye.qV)(o)}}function Qn(u,o,a){for(var l=u.points,c=[],h=0;h<l.length;h++)c.push(Vt(l[h][0]*a)/a),c.push(Vt(l[h][1]*a)/a);o.points=c.join(" ")}function $t(u){return!u.smooth}var On={circle:[function un(u){var o=(0,b.map)(u,function(a){return"string"==typeof a?[a,a]:a});return function(a,l,c){for(var h=0;h<o.length;h++){var f=o[h],g=a[f[0]];null!=g&&(l[f[1]]=Vt(g*c)/c)}}}(["cx","cy","r"])],polyline:[Qn,$t],polygon:[Qn,$t]};function Je(u,o){var a=u.style,l=u.shape,c=On[u.type],h={},f=o.animation,g="path",m=u.style.strokePercent,y=o.compress&&(0,ye.Gk)(u)||4;if(!c||o.willUpdate||c[1]&&!c[1](l)||f&&function jn(u){for(var o=u.animators,a=0;a<o.length;a++)if("shape"===o[a].targetName)return!0;return!1}(u)||m<1){u.path||u.createPathProxy();var w=u.path;u.shapeChanged()&&(w.beginPath(),u.buildPath(w,u.shape),u.pathUpdated());var D=w.getVersion(),I=u,L=I.__svgPathBuilder;(I.__svgPathVersion!==D||!L||m!==I.__svgPathStrokePercent)&&(L||(L=I.__svgPathBuilder=new ie),L.reset(y),w.rebuildPath(L,m),L.generateStr(),I.__svgPathVersion=D,I.__svgPathStrokePercent=m),h.d=L.getStr()}else{g=u.type;var x=Math.pow(10,y);c[0](l,h,x)}return vr(h,u.transform),Vn(h,a,u,o),o.animation&&St(u,h,o),A(g,u.id+"",h)}function Rt(u,o){return u instanceof ve.ZP?Je(u,o):u instanceof be.ZP?function Dt(u,o){var a=u.style,l=a.image;if(l&&!(0,b.isString)(l)&&(an(l)?l=l.src:hn(l)&&(l=l.toDataURL())),l){var c=a.x||0,h=a.y||0,m={href:l,width:a.width,height:a.height};return c&&(m.x=c),h&&(m.y=h),vr(m,u.transform),Vn(m,a,u,o),o.animation&&St(u,m,o),A("image",u.id+"",m)}}(u,o):u instanceof he.Z?function Gt(u,o){var a=u.style,l=a.text;if(null!=l&&(l+=""),l&&!isNaN(a.x)&&!isNaN(a.y)){var c=a.font||Ot.Uo,h=a.x||0,f=(0,ye.mU)(a.y||0,(0,Ce.Dp)(c),a.textBaseline),m={"dominant-baseline":"central","text-anchor":ye.jY[a.textAlign]||a.textAlign};if((0,_t.Y1)(a)){var y="",x=a.fontStyle,w=(0,_t.VG)(a.fontSize);if(!parseFloat(w))return;var I=a.fontWeight;y+="font-size:"+w+";font-family:"+(a.fontFamily||Ot.rk)+";",x&&"normal"!==x&&(y+="font-style:"+x+";"),I&&"normal"!==I&&(y+="font-weight:"+I+";"),m.style=y}else m.style="font: "+c;return l.match(/\s/)&&(m["xml:space"]="preserve"),h&&(m.x=h),f&&(m.y=f),vr(m,u.transform),Vn(m,a,u,o),o.animation&&St(u,m,o),A("text",u.id+"",m,void 0,l)}}(u,o):void 0}function tt(u,o,a){var l=a.clipPathCache,c=a.defs,h=l[u.id];if(!h){var f={id:h=a.zrId+"-c"+a.clipPathIdx++};l[u.id]=h,c[h]=A("clipPath",h,f,[Je(u,a)])}o["clip-path"]=(0,ye.m1)(h)}function it(u){return document.createTextNode(u)}function je(u,o,a){u.insertBefore(o,a)}function vt(u,o){u.removeChild(o)}function ht(u,o){u.appendChild(o)}function Pt(u){return u.parentNode}function tn(u){return u.nextSibling}function Dn(u,o){u.textContent=o}var xs=A("","");function Sa(u){return void 0===u}function qa(u){return void 0!==u}function ua(u,o,a){for(var l={},c=o;c<=a;++c){var h=u[c].key;void 0!==h&&(l[h]=c)}return l}function Xs(u,o){return u.tag===o.tag&&u.key===o.key}function La(u){var o,a=u.children,l=u.tag;if(qa(l)){var c=u.elm=M(l);if(lc(xs,u),(0,b.isArray)(a))for(o=0;o<a.length;++o){var h=a[o];null!=h&&ht(c,La(h))}else qa(u.text)&&!(0,b.isObject)(u.text)&&ht(c,it(u.text))}else u.elm=it(u.text);return u.elm}function lh(u,o,a,l,c){for(;l<=c;++l){var h=a[l];null!=h&&je(u,La(h),o)}}function uh(u,o,a,l){for(;a<=l;++a){var c=o[a];null!=c&&(qa(c.tag)?vt(Pt(c.elm),c.elm):vt(u,c.elm))}}function lc(u,o){var a,l=o.elm,c=u&&u.attrs||{},h=o.attrs||{};if(c!==h){for(a in h){var f=h[a];c[a]!==f&&(!0===f?l.setAttribute(a,""):!1===f?l.removeAttribute(a):120!==a.charCodeAt(0)?l.setAttribute(a,f):"xmlns:xlink"===a||"xmlns"===a?l.setAttributeNS("http://www.w3.org/2000/xmlns/",a,f):58===a.charCodeAt(3)?l.setAttributeNS("http://www.w3.org/XML/1998/namespace",a,f):58===a.charCodeAt(5)?l.setAttributeNS(T,a,f):l.setAttribute(a,f))}for(a in c)a in h||l.removeAttribute(a)}}function ku(u,o){var a=o.elm=u.elm,l=u.children,c=o.children;u!==o&&(lc(u,o),Sa(o.text)?qa(l)&&qa(c)?l!==c&&function Of(u,o,a){for(var w,D,I,l=0,c=0,h=o.length-1,f=o[0],g=o[h],m=a.length-1,y=a[0],x=a[m];l<=h&&c<=m;)null==f?f=o[++l]:null==g?g=o[--h]:null==y?y=a[++c]:null==x?x=a[--m]:Xs(f,y)?(ku(f,y),f=o[++l],y=a[++c]):Xs(g,x)?(ku(g,x),g=o[--h],x=a[--m]):Xs(f,x)?(ku(f,x),je(u,f.elm,tn(g.elm)),f=o[++l],x=a[--m]):Xs(g,y)?(ku(g,y),je(u,g.elm,f.elm),g=o[--h],y=a[++c]):(Sa(w)&&(w=ua(o,l,h)),Sa(D=w[y.key])||(I=o[D]).tag!==y.tag?je(u,La(y),f.elm):(ku(I,y),o[D]=void 0,je(u,I.elm,f.elm)),y=a[++c]);(l<=h||c<=m)&&(l>h?lh(u,null==a[m+1]?null:a[m+1].elm,a,c,m):uh(u,o,l,h))}(a,l,c):qa(c)?(qa(u.text)&&Dn(a,""),lh(a,null,c,0,c.length-1)):qa(l)?uh(a,l,0,l.length-1):qa(u.text)&&Dn(a,""):u.text!==o.text&&(qa(l)&&uh(a,l,0,l.length-1),Dn(a,o.text)))}var lg=z(7072),ug=0;const qy=function(){function u(o,a,l){if(this.type="svg",this.refreshHover=function(){},this.configLayer=function(){},this.storage=a,this._opts=l=(0,b.extend)({},l),this.root=o,this._id="zr"+ug++,this._oldVNode=de(l.width,l.height),o&&!l.ssr){var c=this._viewport=document.createElement("div");c.style.cssText="position:relative;overflow:hidden";var h=this._svgDom=this._oldVNode.elm=M("svg");lc(null,this._oldVNode),c.appendChild(h),o.appendChild(c)}this.resize(l.width,l.height)}return u.prototype.getType=function(){return this.type},u.prototype.getViewportRoot=function(){return this._viewport},u.prototype.getViewportRootOffset=function(){var o=this.getViewportRoot();if(o)return{offsetLeft:o.offsetLeft||0,offsetTop:o.offsetTop||0}},u.prototype.getSvgDom=function(){return this._svgDom},u.prototype.refresh=function(){if(this.root){var o=this.renderToVNode({willUpdate:!0});o.attrs.style="position:absolute;left:0;top:0;user-select:none",function td(u,o){if(Xs(u,o))ku(u,o);else{var a=u.elm,l=Pt(a);La(o),null!==l&&(je(l,o.elm,tn(a)),uh(l,[u],0,0))}}(this._oldVNode,o),this._oldVNode=o}},u.prototype.renderOneToVNode=function(o){return Rt(o,oe(this._id))},u.prototype.renderToVNode=function(o){o=o||{};var a=this.storage.getDisplayList(!0),l=this._backgroundColor,c=this._width,h=this._height,f=oe(this._id);f.animation=o.animation,f.willUpdate=o.willUpdate,f.compress=o.compress;var g=[];if(l&&"none"!==l){var m=(0,ye.ut)(l);this._bgVNode=A("rect","bg",{width:c,height:h,x:"0",y:"0",id:"0",fill:m.color,"fill-opacity":m.opacity}),g.push(this._bgVNode)}else this._bgVNode=null;var w=o.compress?null:this._mainVNode=A("g","main",{},[]);this._paintList(a,f,w?w.children:g),w&&g.push(w);var D=(0,b.map)((0,b.keys)(f.defs),function(N){return f.defs[N]});if(D.length&&g.push(A("defs","defs",{},D)),o.animation){var I=function ae(u,o,a){var l=(a=a||{}).newline?"\n":"",c=" {"+l,h=l+"}",f=(0,b.map)((0,b.keys)(u),function(m){return m+c+(0,b.map)((0,b.keys)(u[m]),function(y){return y+":"+u[m][y]+";"}).join(l)+h}).join(l),g=(0,b.map)((0,b.keys)(o),function(m){return"@keyframes "+m+c+(0,b.map)((0,b.keys)(o[m]),function(y){return y+c+(0,b.map)((0,b.keys)(o[m][y]),function(x){var w=o[m][y][x];return"d"===x&&(w='path("'+w+'")'),x+":"+w+";"}).join(l)+h}).join(l)+h}).join(l);return f||g?["<![CDATA[",f,g,"]]>"].join(l):""}(f.cssNodes,f.cssAnims,{newline:!0});if(I){var L=A("style","stl",{},[],I);g.push(L)}}return de(c,h,g,o.useViewBox)},u.prototype.renderToString=function(o){return ue(this.renderToVNode({animation:(0,b.retrieve2)((o=o||{}).cssAnimation,!0),willUpdate:!1,compress:!0,useViewBox:(0,b.retrieve2)(o.useViewBox,!0)}),{newline:!0})},u.prototype.setBackgroundColor=function(o){this._backgroundColor=o;var a=this._bgVNode;if(a&&a.elm){var l=(0,ye.ut)(o),h=l.opacity;a.elm.setAttribute("fill",l.color),h<1&&a.elm.setAttribute("fill-opacity",h)}},u.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},u.prototype._paintList=function(o,a,l){for(var g,m,c=o.length,h=[],f=0,y=0,x=0;x<c;x++){var w=o[x];if(!w.invisible){var D=w.__clipPaths,I=D&&D.length||0,L=m&&m.length||0,N=void 0;for(N=Math.max(I-1,L-1);N>=0&&(!D||!m||D[N]!==m[N]);N--);for(var Z=L-1;Z>N;Z--)g=h[--f-1];for(var se=N+1;se<I;se++){var _e={};tt(D[se],_e,a);var me=A("g","clip-g-"+y++,_e,[]);(g?g.children:l).push(me),h[f++]=me,g=me}m=D;var De=Rt(w,a);De&&(g?g.children:l).push(De)}}},u.prototype.resize=function(o,a){var l=this._opts,c=this.root,h=this._viewport;if(null!=o&&(l.width=o),null!=a&&(l.height=a),c&&h&&(h.style.display="none",o=(0,lg.ap)(c,0,l),a=(0,lg.ap)(c,1,l),h.style.display=""),this._width!==o||this._height!==a){if(this._width=o,this._height=a,h){var f=h.style;f.width=o+"px",f.height=a+"px"}var g=this._svgDom;g&&(g.setAttribute("width",o),g.setAttribute("height",a))}},u.prototype.getWidth=function(){return this._width},u.prototype.getHeight=function(){return this._height},u.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},u.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},u.prototype.toDataURL=function(o){var a=encodeURIComponent(this.renderToString()),l="data:image/svg+xml;";return o?(a=(0,ye.oF)(a))&&l+"base64,"+a:l+"charset=UTF-8,"+a},u}();var Tt=z(5845),$s=z(405),Zi=z(9521),ai=z(4550),Pn=z(8539);const kf=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.hasSymbolVisual=!0,a}return(0,Tt.ZT)(o,u),o.prototype.getInitialData=function(a){return(0,$s.Z)(null,this,{useEncodeDefaulter:!0})},o.prototype.getLegendIcon=function(a){var l=new Pn.Z,c=(0,ai.th)("line",0,a.itemHeight/2,a.itemWidth,0,a.lineStyle.stroke,!1);l.add(c),c.setStyle(a.lineStyle);var h=this.getData().getVisual("symbol"),f=this.getData().getVisual("symbolRotate"),g="none"===h?"circle":h,m=.8*a.itemHeight,y=(0,ai.th)(g,(a.itemWidth-m)/2,(a.itemHeight-m)/2,m,m,a.itemStyle.fill);return l.add(y),y.setStyle(a.itemStyle),y.rotation=("inherit"===a.iconRotate?f:a.iconRotate||0)*Math.PI/180,y.setOrigin([a.itemWidth/2,a.itemHeight/2]),g.indexOf("empty")>-1&&(y.style.stroke=y.style.fill,y.style.fill="#fff",y.style.lineWidth=2),l},o.type="series.line",o.dependencies=["grid","polar"],o.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},o}(Zi.Z);var wn=z(3802),_n=z(2429),Mr=z(7282),Ut=z(6869),nd=z(67);function Dl(u,o){var a=u.mapDimensionsAll("defaultedLabel"),l=a.length;if(1===l){var c=(0,nd.hk)(u,o,a[0]);return null!=c?c+"":null}if(l){for(var h=[],f=0;f<a.length;f++)h.push((0,nd.hk)(u,o,a[f]));return h.join(" ")}}function Wr(u,o){var a=u.mapDimensionsAll("defaultedLabel");if(!(0,b.isArray)(o))return o+"";for(var l=[],c=0;c<a.length;c++){var h=u.getDimensionIndex(a[c]);h>=0&&l.push(o[h])}return l.join(" ")}var qt=z(1081);function hg(u,o){this.parent.drift(u,o)}const Jt=function(u){function o(a,l,c,h){var f=u.call(this)||this;return f.updateData(a,l,c,h),f}return(0,Tt.ZT)(o,u),o.prototype._createSymbol=function(a,l,c,h,f){this.removeAll();var g=(0,ai.th)(a,-1,-1,2,2,null,f);g.attr({z2:100,culling:!0,scaleX:h[0]/2,scaleY:h[1]/2}),g.drift=hg,this._symbolType=a,this.add(g)},o.prototype.stopSymbolAnimation=function(a){this.childAt(0).stopAnimation(null,a)},o.prototype.getSymbolType=function(){return this._symbolType},o.prototype.getSymbolPath=function(){return this.childAt(0)},o.prototype.highlight=function(){(0,Ut.fD)(this.childAt(0))},o.prototype.downplay=function(){(0,Ut.Mh)(this.childAt(0))},o.prototype.setZ=function(a,l){var c=this.childAt(0);c.zlevel=a,c.z=l},o.prototype.setDraggable=function(a,l){var c=this.childAt(0);c.draggable=a,c.cursor=!l&&a?"move":c.cursor},o.prototype.updateData=function(a,l,c,h){this.silent=!1;var f=a.getItemVisual(l,"symbol")||"circle",g=a.hostModel,m=o.getSymbolSize(a,l),y=f!==this._symbolType,x=h&&h.disableAnimation;if(y){var w=a.getItemVisual(l,"symbolKeepAspect");this._createSymbol(f,a,l,m,w)}else{(D=this.childAt(0)).silent=!1;var I={scaleX:m[0]/2,scaleY:m[1]/2};x?D.attr(I):wn.D(D,I,g,l),(0,wn.Zi)(D)}if(this._updateCommon(a,l,m,c,h),y){var D=this.childAt(0);x||(I={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:D.style.opacity}},D.scaleX=D.scaleY=0,D.style.opacity=0,wn.KZ(D,I,g,l))}x&&this.childAt(0).stopAnimation("leave")},o.prototype._updateCommon=function(a,l,c,h,f){var y,x,w,D,I,L,N,Z,se,g=this.childAt(0),m=a.hostModel;if(h&&(y=h.emphasisItemStyle,x=h.blurItemStyle,w=h.selectItemStyle,D=h.focus,I=h.blurScope,N=h.labelStatesModels,Z=h.hoverScale,se=h.cursorStyle,L=h.emphasisDisabled),!h||a.hasItemOption){var _e=h&&h.itemModel?h.itemModel:a.getItemModel(l),me=_e.getModel("emphasis");y=me.getModel("itemStyle").getItemStyle(),w=_e.getModel(["select","itemStyle"]).getItemStyle(),x=_e.getModel(["blur","itemStyle"]).getItemStyle(),D=me.get("focus"),I=me.get("blurScope"),L=me.get("disabled"),N=(0,qt.k3)(_e),Z=me.getShallow("scale"),se=_e.getShallow("cursor")}var De=a.getItemVisual(l,"symbolRotate");g.attr("rotation",(De||0)*Math.PI/180||0);var Pe=(0,ai.Cq)(a.getItemVisual(l,"symbolOffset"),c);Pe&&(g.x=Pe[0],g.y=Pe[1]),se&&g.attr("cursor",se);var Ie=a.getItemVisual(l,"style"),ke=Ie.fill;if(g instanceof be.ZP){var Ue=g.style;g.useStyle((0,b.extend)({image:Ue.image,x:Ue.x,y:Ue.y,width:Ue.width,height:Ue.height},Ie))}else g.useStyle(g.__isEmptyBrush?(0,b.extend)({},Ie):Ie),g.style.decal=null,g.setColor(ke,f&&f.symbolInnerColor),g.style.strokeNoScale=!0;var Ye=a.getItemVisual(l,"liftZ"),Ke=this._z2;null!=Ye?null==Ke&&(this._z2=g.z2,g.z2+=Ye):null!=Ke&&(g.z2=Ke,this._z2=null);var qe=f&&f.useNameLabel;(0,qt.ni)(g,N,{labelFetcher:m,labelDataIndex:l,defaultText:function ut(wt){return qe?a.getName(wt):Dl(a,wt)},inheritColor:ke,defaultOpacity:Ie.opacity}),this._sizeX=c[0]/2,this._sizeY=c[1]/2;var pt=g.ensureState("emphasis");pt.style=y,g.ensureState("select").style=w,g.ensureState("blur").style=x;var yt=null==Z||!0===Z?Math.max(1.1,3/this._sizeY):isFinite(Z)&&Z>0?+Z:1;pt.scaleX=this._sizeX*yt,pt.scaleY=this._sizeY*yt,this.setSymbolScale(1),(0,Ut.k5)(this,D,I,L)},o.prototype.setSymbolScale=function(a){this.scaleX=this.scaleY=a},o.prototype.fadeOut=function(a,l,c){var h=this.childAt(0),f=(0,Mr.A)(this).dataIndex,g=c&&c.animation;if(this.silent=h.silent=!0,c&&c.fadeLabel){var m=h.getTextContent();m&&wn.bX(m,{style:{opacity:0}},l,{dataIndex:f,removeOpt:g,cb:function(){h.removeTextContent()}})}else h.removeTextContent();wn.bX(h,{style:{opacity:0},scaleX:0,scaleY:0},l,{dataIndex:f,cb:a,removeOpt:g})},o.getSymbolSize=function(a,l){return(0,ai.zp)(a.getItemVisual(l,"symbolSize"))},o}(Pn.Z);function Xl(u,o,a,l){return o&&!isNaN(o[0])&&!isNaN(o[1])&&!(l.isIgnore&&l.isIgnore(a))&&!(l.clipShape&&!l.clipShape.contain(o[0],o[1]))&&"none"!==u.getItemVisual(a,"symbol")}function Pr(u){return null!=u&&!(0,b.isObject)(u)&&(u={isIgnore:u}),u||{}}function _i(u){var o=u.hostModel,a=o.getModel("emphasis");return{emphasisItemStyle:a.getModel("itemStyle").getItemStyle(),blurItemStyle:o.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:o.getModel(["select","itemStyle"]).getItemStyle(),focus:a.get("focus"),blurScope:a.get("blurScope"),emphasisDisabled:a.get("disabled"),hoverScale:a.get("scale"),labelStatesModels:(0,qt.k3)(o),cursorStyle:o.get("cursor")}}const rd=function(){function u(o){this.group=new Pn.Z,this._SymbolCtor=o||Jt}return u.prototype.updateData=function(o,a){this._progressiveEls=null,a=Pr(a);var l=this.group,c=o.hostModel,h=this._data,f=this._SymbolCtor,g=a.disableAnimation,m=_i(o),y={disableAnimation:g},x=a.getSymbolPoint||function(w){return o.getItemLayout(w)};h||l.removeAll(),o.diff(h).add(function(w){var D=x(w);if(Xl(o,D,w,a)){var I=new f(o,w,m,y);I.setPosition(D),o.setItemGraphicEl(w,I),l.add(I)}}).update(function(w,D){var I=h.getItemGraphicEl(D),L=x(w);if(Xl(o,L,w,a)){var N=o.getItemVisual(w,"symbol")||"circle",Z=I&&I.getSymbolType&&I.getSymbolType();if(!I||Z&&Z!==N)l.remove(I),(I=new f(o,w,m,y)).setPosition(L);else{I.updateData(o,w,m,y);var se={x:L[0],y:L[1]};g?I.attr(se):wn.D(I,se,c)}l.add(I),o.setItemGraphicEl(w,I)}else l.remove(I)}).remove(function(w){var D=h.getItemGraphicEl(w);D&&D.fadeOut(function(){l.remove(D)},c)}).execute(),this._getSymbolPoint=x,this._data=o},u.prototype.updateLayout=function(){var o=this,a=this._data;a&&a.eachItemGraphicEl(function(l,c){var h=o._getSymbolPoint(c);l.setPosition(h),l.markRedraw()})},u.prototype.incrementalPrepareUpdate=function(o){this._seriesScope=_i(o),this._data=null,this.group.removeAll()},u.prototype.incrementalUpdate=function(o,a,l){function c(m){m.isGroup||(m.incremental=!0,m.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[],l=Pr(l);for(var h=o.start;h<o.end;h++){var f=a.getItemLayout(h);if(Xl(a,f,h,l)){var g=new this._SymbolCtor(a,h,this._seriesScope);g.traverse(c),g.setPosition(f),this.group.add(g),a.setItemGraphicEl(h,g),this._progressiveEls.push(g)}}},u.prototype.eachRendered=function(o){_n.traverseElements(this._progressiveEls||this.group,o)},u.prototype.remove=function(o){var a=this.group,l=this._data;l&&o?l.eachItemGraphicEl(function(c){c.fadeOut(function(){a.remove(c)},l.hostModel)}):a.removeAll()},u}();var $l=z(143);function id(u,o,a){var l=u.getBaseAxis(),c=u.getOtherAxis(l),h=function qo(u,o){var a=0,l=u.scale.getExtent();return"start"===o?a=l[0]:"end"===o?a=l[1]:(0,b.isNumber)(o)&&!isNaN(o)?a=o:l[0]>0?a=l[0]:l[1]<0&&(a=l[1]),a}(c,a),f=l.dim,g=c.dim,m=o.mapDimension(g),y=o.mapDimension(f),x="x"===g||"radius"===g?1:0,w=(0,b.map)(u.dimensions,function(L){return o.mapDimension(L)}),D=!1,I=o.getCalculationInfo("stackResultDimension");return(0,$l.M)(o,w[0])&&(D=!0,w[0]=I),(0,$l.M)(o,w[1])&&(D=!0,w[1]=I),{dataDimsForPoint:w,valueStart:h,valueAxisDim:g,baseAxisDim:f,stacked:!!D,valueDim:m,baseDim:y,baseDataOffset:x,stackedOverDimension:o.getCalculationInfo("stackedOverDimension")}}function Ff(u,o,a,l){var c=NaN;u.stacked&&(c=a.get(a.getCalculationInfo("stackedOverDimension"),l)),isNaN(c)&&(c=u.valueStart);var h=u.baseDataOffset,f=[];return f[h]=a.get(u.baseDim,l),f[1-h]=c,o.dataToPoint(f)}var Ks=z(3133),Bf=z(5910),xn=z(1266),Cs=z(9969),Kl=Math.min,Ql=Math.max;function uc(u,o){return isNaN(u)||isNaN(o)}function Vf(u,o,a,l,c,h,f,g,m){for(var y,x,w,D,I,L,N=a,Z=0;Z<l;Z++){var se=o[2*N],_e=o[2*N+1];if(N>=c||N<0)break;if(uc(se,_e)){if(m){N+=h;continue}break}if(N===a)u[h>0?"moveTo":"lineTo"](se,_e),w=se,D=_e;else{var me=se-y,De=_e-x;if(me*me+De*De<.5){N+=h;continue}if(f>0){for(var Pe=N+h,Ie=o[2*Pe],ke=o[2*Pe+1];Ie===se&&ke===_e&&Z<l;)Z++,Ie=o[2*(Pe+=h)],ke=o[2*Pe+1],me=(se=o[2*(N+=h)])-y,De=(_e=o[2*N+1])-x;var Ue=Z+1;if(m)for(;uc(Ie,ke)&&Ue<l;)Ue++,Ie=o[2*(Pe+=h)],ke=o[2*Pe+1];var Ye=.5,Ke=0,qe=0,ut=void 0,pt=void 0;if(Ue>=l||uc(Ie,ke))I=se,L=_e;else{Ke=Ie-y,qe=ke-x;var yt=se-y,wt=Ie-se,kt=_e-x,en=ke-_e,jt=void 0,dn=void 0;if("x"===g){var Fn=Ke>0?1:-1;I=se-Fn*(jt=Math.abs(yt))*f,L=_e,ut=se+Fn*(dn=Math.abs(wt))*f,pt=_e}else if("y"===g){var Hn=qe>0?1:-1;I=se,L=_e-Hn*(jt=Math.abs(kt))*f,ut=se,pt=_e+Hn*(dn=Math.abs(en))*f}else jt=Math.sqrt(yt*yt+kt*kt),I=se-Ke*f*(1-(Ye=(dn=Math.sqrt(wt*wt+en*en))/(dn+jt))),L=_e-qe*f*(1-Ye),pt=_e+qe*f*Ye,ut=Kl(ut=se+Ke*f*Ye,Ql(Ie,se)),pt=Kl(pt,Ql(ke,_e)),ut=Ql(ut,Kl(Ie,se)),L=_e-(qe=(pt=Ql(pt,Kl(ke,_e)))-_e)*jt/dn,I=Kl(I=se-(Ke=ut-se)*jt/dn,Ql(y,se)),L=Kl(L,Ql(x,_e)),ut=se+(Ke=se-(I=Ql(I,Kl(y,se))))*dn/jt,pt=_e+(qe=_e-(L=Ql(L,Kl(x,_e))))*dn/jt}u.bezierCurveTo(w,D,I,L,se,_e),w=ut,D=pt}else u.lineTo(se,_e)}y=se,x=_e,N+=h}return Z}var n0=function u(){this.smooth=0,this.smoothConstraint=!0},Jo=function(u){function o(a){var l=u.call(this,a)||this;return l.type="ec-polyline",l}return(0,Tt.ZT)(o,u),o.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},o.prototype.getDefaultShape=function(){return new n0},o.prototype.buildPath=function(a,l){var c=l.points,h=0,f=c.length/2;if(l.connectNulls){for(;f>0&&uc(c[2*f-2],c[2*f-1]);f--);for(;h<f&&uc(c[2*h],c[2*h+1]);h++);}for(;h<f;)h+=Vf(a,c,h,f,f,1,l.smooth,l.smoothMonotone,l.connectNulls)+1},o.prototype.getPointOn=function(a,l){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var g,m,h=this.path.data,f=fe.Z.CMD,y="x"===l,x=[],w=0;w<h.length;){var I=void 0,L=void 0,N=void 0,Z=void 0,se=void 0,_e=void 0,me=void 0;switch(h[w++]){case f.M:g=h[w++],m=h[w++];break;case f.L:if(I=h[w++],L=h[w++],(me=y?(a-g)/(I-g):(a-m)/(L-m))<=1&&me>=0){var De=y?(L-m)*me+m:(I-g)*me+g;return y?[a,De]:[De,a]}g=I,m=L;break;case f.C:I=h[w++],L=h[w++],N=h[w++],Z=h[w++],se=h[w++],_e=h[w++];var Pe=y?(0,Cs.kD)(g,I,N,se,a,x):(0,Cs.kD)(m,L,Z,_e,a,x);if(Pe>0)for(var Ie=0;Ie<Pe;Ie++){var ke=x[Ie];if(ke<=1&&ke>=0)return De=y?(0,Cs.af)(m,L,Z,_e,ke):(0,Cs.af)(g,I,N,se,ke),y?[a,De]:[De,a]}g=se,m=_e}}},o}(ve.ZP),Ii=function(u){function o(){return null!==u&&u.apply(this,arguments)||this}return(0,Tt.ZT)(o,u),o}(n0),r0=function(u){function o(a){var l=u.call(this,a)||this;return l.type="ec-polygon",l}return(0,Tt.ZT)(o,u),o.prototype.getDefaultShape=function(){return new Ii},o.prototype.buildPath=function(a,l){var c=l.points,h=l.stackedOnPoints,f=0,g=c.length/2,m=l.smoothMonotone;if(l.connectNulls){for(;g>0&&uc(c[2*g-2],c[2*g-1]);g--);for(;f<g&&uc(c[2*f],c[2*f+1]);f++);}for(;f<g;){var y=Vf(a,c,f,g,g,1,l.smooth,m,l.connectNulls);Vf(a,h,f+y-1,y,g,-1,l.stackedOnSmooth,m,l.connectNulls),f+=y+1,a.closePath()}},o}(ve.ZP),ia=z(1005),Di=z(3160),yn=z(9770),It=z(4785);function pr(u,o,a,l,c){var h=u.getArea(),f=h.x,g=h.y,m=h.width,y=h.height,x=a.get(["lineStyle","width"])||2;f-=x/2,g-=x/2,m+=x,y+=x,f=Math.floor(f),m=Math.round(m);var w=new Di.Z({shape:{x:f,y:g,width:m,height:y}});if(o){var D=u.getBaseAxis(),I=D.isHorizontal(),L=D.inverse;I?(L&&(w.shape.x+=m),w.shape.width=0):(L||(w.shape.y+=y),w.shape.height=0);var N=(0,b.isFunction)(c)?function(Z){c(Z,w)}:null;wn.KZ(w,{shape:{width:m,height:y,x:f,y:g}},a,null,l,N)}return w}function cc(u,o,a){var l=u.getArea(),c=(0,It.NM)(l.r0,1),h=(0,It.NM)(l.r,1),f=new yn.C({shape:{cx:(0,It.NM)(u.cx,1),cy:(0,It.NM)(u.cy,1),r0:c,r:h,startAngle:l.startAngle,endAngle:l.endAngle,clockwise:l.clockwise}});return o&&("angle"===u.getBaseAxis().dim?f.shape.endAngle=l.startAngle:f.shape.r=c,wn.KZ(f,{shape:{endAngle:l.endAngle,r:h}},a)),f}function ch(u,o,a,l,c){return u?"polar"===u.type?cc(u,o,a):"cartesian2d"===u.type?pr(u,o,a,l,c):null:null}function Is(u,o){return u.type===o}var Va=z(9706),Da=z(312);function zf(u,o){if(u.length===o.length){for(var a=0;a<u.length;a++)if(u[a]!==o[a])return;return!0}}function dc(u){for(var o=1/0,a=1/0,l=-1/0,c=-1/0,h=0;h<u.length;){var f=u[h++],g=u[h++];isNaN(f)||(o=Math.min(f,o),l=Math.max(f,l)),isNaN(g)||(a=Math.min(g,a),c=Math.max(g,c))}return[[o,a],[l,c]]}function dh(u,o){var a=dc(u),l=a[0],c=a[1],h=dc(o),f=h[0],g=h[1];return Math.max(Math.abs(l[0]-f[0]),Math.abs(l[1]-f[1]),Math.abs(c[0]-g[0]),Math.abs(c[1]-g[1]))}function za(u){return b.isNumber(u)?u:u?.5:0}function Jn(u,o,a,l){var c=o.getBaseAxis(),h="x"===c.dim||"radius"===c.dim?0:1,f=[],g=0,m=[],y=[],x=[],w=[];if(l){for(g=0;g<u.length;g+=2)!isNaN(u[g])&&!isNaN(u[g+1])&&w.push(u[g],u[g+1]);u=w}for(g=0;g<u.length-2;g+=2)switch(x[0]=u[g+2],x[1]=u[g+3],y[0]=u[g],y[1]=u[g+1],f.push(y[0],y[1]),a){case"end":m[h]=x[h],m[1-h]=y[1-h],f.push(m[0],m[1]);break;case"middle":var I=[];m[h]=I[h]=(y[h]+x[h])/2,m[1-h]=y[1-h],I[1-h]=x[1-h],f.push(m[0],m[1]),f.push(I[0],I[1]);break;default:m[h]=y[h],m[1-h]=x[1-h],f.push(m[0],m[1])}return f.push(u[g++],u[g++]),f}function ww(u,o){return isNaN(u)||isNaN(o)}function ts(u,o){return[u[2*o],u[2*o+1]]}function pg(u){if(u.get(["endLabel","show"]))return!0;for(var o=0;o<Ut.L1.length;o++)if(u.get([Ut.L1[o],"endLabel","show"]))return!0;return!1}function zo(u,o,a,l){if(Is(o,"cartesian2d")){var c=l.getModel("endLabel"),h=c.get("valueAnimation"),f=l.getData(),g={lastFrameIndex:0},m=pg(l)?function(I,L){u._endLabelOnDuring(I,L,f,g,h,c,o)}:null,y=o.getBaseAxis().isHorizontal(),x=pr(o,a,l,function(){var I=u._endLabel;I&&a&&null!=g.originalX&&I.attr({x:g.originalX,y:g.originalY})},m);if(!l.get("clip",!0)){var w=x.shape,D=Math.max(w.width,w.height);y?(w.y-=D,w.height+=2*D):(w.x-=D,w.width+=2*D)}return m&&m(1,x),x}return cc(o,a,l)}const Uf=function(u){function o(){return null!==u&&u.apply(this,arguments)||this}return(0,Tt.ZT)(o,u),o.prototype.init=function(){var a=new Pn.Z,l=new rd;this.group.add(l.group),this._symbolDraw=l,this._lineGroup=a},o.prototype.render=function(a,l,c){var h=this,f=a.coordinateSystem,g=this.group,m=a.getData(),y=a.getModel("lineStyle"),x=a.getModel("areaStyle"),w=m.getLayout("points")||[],D="polar"===f.type,I=this._coordSys,L=this._symbolDraw,N=this._polyline,Z=this._polygon,se=this._lineGroup,_e=a.get("animation"),me=!x.isEmpty(),De=x.get("origin"),Pe=id(f,m,De),Ie=me&&function Vo(u,o,a){if(!a.valueDim)return[];for(var l=o.count(),c=(0,Ks.o)(2*l),h=0;h<l;h++){var f=Ff(a,u,o,h);c[2*h]=f[0],c[2*h+1]=f[1]}return c}(f,m,Pe),ke=a.get("showSymbol"),Ue=a.get("connectNulls"),Ye=ke&&!D&&function es(u,o,a){var l=u.get("showAllSymbol"),c="auto"===l;if(!l||c){var h=a.getAxesByScale("ordinal")[0];if(h&&(!c||!function fg(u,o){var a=u.getExtent(),l=Math.abs(a[1]-a[0])/u.scale.count();isNaN(l)&&(l=0);for(var c=o.count(),h=Math.max(1,Math.round(c/5)),f=0;f<c;f+=h)if(1.5*Jt.getSymbolSize(o,f)[u.isHorizontal()?1:0]>l)return!1;return!0}(h,o))){var f=o.mapDimension(h.dim),g={};return b.each(h.getViewLabels(),function(m){var y=h.scale.getRawOrdinalNumber(m.tickValue);g[y]=1}),function(m){return!g.hasOwnProperty(o.get(f,m))}}}}(a,m,f),Ke=this._data;Ke&&Ke.eachItemGraphicEl(function(Oi,Yr){Oi.__temp&&(g.remove(Oi),Ke.setItemGraphicEl(Yr,null))}),ke||L.remove(),g.add(se);var ut,qe=!D&&a.get("step");f&&f.getArea&&a.get("clip",!0)&&(null!=(ut=f.getArea()).width?(ut.x-=.1,ut.y-=.1,ut.width+=.2,ut.height+=.2):ut.r0&&(ut.r0-=.5,ut.r+=.5)),this._clipShapeForSymbol=ut;var pt=function Hf(u,o,a){var l=u.getVisual("visualMeta");if(l&&l.length&&u.count()&&"cartesian2d"===o.type){for(var c,h,f=l.length-1;f>=0;f--){var g=u.getDimensionInfo(l[f].dimension);if("x"===(c=g&&g.coordDim)||"y"===c){h=l[f];break}}if(h){var m=o.getAxis(c),y=b.map(h.stops,function(me){return{coord:m.toGlobalCoord(m.dataToCoord(me.value)),color:me.color}}),x=y.length,w=h.outerColors.slice();x&&y[0].coord>y[x-1].coord&&(y.reverse(),w.reverse());var D=function hh(u,o){var c,h,a=[],l=u.length;function f(x,w,D){var I=x.coord;return{coord:D,color:(0,Da.lerp)((D-I)/(w.coord-I),[x.color,w.color])}}for(var g=0;g<l;g++){var m=u[g],y=m.coord;if(y<0)c=m;else{if(y>o){h?a.push(f(h,m,o)):c&&a.push(f(c,m,0),f(c,m,o));break}c&&(a.push(f(c,m,0)),c=null),a.push(m),h=m}}return a}(y,"x"===c?a.getWidth():a.getHeight()),I=D.length;if(!I&&x)return y[0].coord<0?w[1]?w[1]:y[x-1].color:w[0]?w[0]:y[0].color;var N=D[0].coord-10,Z=D[I-1].coord+10,se=Z-N;if(se<.001)return"transparent";b.each(D,function(me){me.offset=(me.coord-N)/se}),D.push({offset:I?D[I-1].offset:.5,color:w[1]||"transparent"}),D.unshift({offset:I?D[0].offset:.5,color:w[0]||"transparent"});var _e=new Bf.Z(0,0,0,0,D,!0);return _e[c]=N,_e[c+"2"]=Z,_e}}}(m,f,c)||m.getVisual("style")[m.getVisual("drawType")];if(N&&I.type===f.type&&qe===this._step){me&&!Z?Z=this._newPolygon(w,Ie):Z&&!me&&(se.remove(Z),Z=this._polygon=null),D||this._initOrUpdateEndLabel(a,f,(0,Va.Lz)(pt));var yt=se.getClipPath();if(yt){var wt=zo(this,f,!1,a);wn.KZ(yt,{shape:wt.shape},a)}else se.setClipPath(zo(this,f,!0,a));ke&&L.updateData(m,{isIgnore:Ye,clipShape:ut,disableAnimation:!0,getSymbolPoint:function(Oi){return[w[2*Oi],w[2*Oi+1]]}}),(!zf(this._stackedOnPoints,Ie)||!zf(this._points,w))&&(_e?this._doUpdateAnimation(m,Ie,f,c,qe,De,Ue):(qe&&(w=Jn(w,f,qe,Ue),Ie&&(Ie=Jn(Ie,f,qe,Ue))),N.setShape({points:w}),Z&&Z.setShape({points:w,stackedOnPoints:Ie})))}else ke&&L.updateData(m,{isIgnore:Ye,clipShape:ut,disableAnimation:!0,getSymbolPoint:function(Oi){return[w[2*Oi],w[2*Oi+1]]}}),_e&&this._initSymbolLabelAnimation(m,f,ut),qe&&(w=Jn(w,f,qe,Ue),Ie&&(Ie=Jn(Ie,f,qe,Ue))),N=this._newPolyline(w),me?Z=this._newPolygon(w,Ie):Z&&(se.remove(Z),Z=this._polygon=null),D||this._initOrUpdateEndLabel(a,f,(0,Va.Lz)(pt)),se.setClipPath(zo(this,f,!0,a));var kt=a.getModel("emphasis"),en=kt.get("focus"),jt=kt.get("blurScope"),dn=kt.get("disabled");N.useStyle(b.defaults(y.getLineStyle(),{fill:"none",stroke:pt,lineJoin:"bevel"})),(0,Ut.WO)(N,a,"lineStyle"),N.style.lineWidth>0&&"bolder"===a.get(["emphasis","lineStyle","width"])&&(N.getState("emphasis").style.lineWidth=+N.style.lineWidth+1),(0,Mr.A)(N).seriesIndex=a.seriesIndex,(0,Ut.k5)(N,en,jt,dn);var Hn=za(a.get("smooth")),lr=a.get("smoothMonotone");if(N.setShape({smooth:Hn,smoothMonotone:lr,connectNulls:Ue}),Z){var br=m.getCalculationInfo("stackedOnSeries"),Fr=0;Z.useStyle(b.defaults(x.getAreaStyle(),{fill:pt,opacity:.7,lineJoin:"bevel",decal:m.getVisual("style").decal})),br&&(Fr=za(br.get("smooth"))),Z.setShape({smooth:Hn,stackedOnSmooth:Fr,smoothMonotone:lr,connectNulls:Ue}),(0,Ut.WO)(Z,a,"areaStyle"),(0,Mr.A)(Z).seriesIndex=a.seriesIndex,(0,Ut.k5)(Z,en,jt,dn)}var xi=function(Oi){h._changePolyState(Oi)};m.eachItemGraphicEl(function(Oi){Oi&&(Oi.onHoverStateChange=xi)}),this._polyline.onHoverStateChange=xi,this._data=m,this._coordSys=f,this._stackedOnPoints=Ie,this._points=w,this._step=qe,this._valueOrigin=De,a.get("triggerLineEvent")&&(this.packEventData(a,N),Z&&this.packEventData(a,Z))},o.prototype.packEventData=function(a,l){(0,Mr.A)(l).eventData={componentType:"series",componentSubType:"line",componentIndex:a.componentIndex,seriesIndex:a.seriesIndex,seriesName:a.name,seriesType:"line"}},o.prototype.highlight=function(a,l,c,h){var f=a.getData(),g=xn.gO(f,h);if(this._changePolyState("emphasis"),!(g instanceof Array)&&null!=g&&g>=0){var m=f.getLayout("points"),y=f.getItemGraphicEl(g);if(!y){var x=m[2*g],w=m[2*g+1];if(isNaN(x)||isNaN(w)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(x,w))return;var D=a.get("zlevel")||0,I=a.get("z")||0;(y=new Jt(f,g)).x=x,y.y=w,y.setZ(D,I);var L=y.getSymbolPath().getTextContent();L&&(L.zlevel=D,L.z=I,L.z2=this._polyline.z2+1),y.__temp=!0,f.setItemGraphicEl(g,y),y.stopSymbolAnimation(!0),this.group.add(y)}y.highlight()}else ia.Z.prototype.highlight.call(this,a,l,c,h)},o.prototype.downplay=function(a,l,c,h){var f=a.getData(),g=xn.gO(f,h);if(this._changePolyState("normal"),null!=g&&g>=0){var m=f.getItemGraphicEl(g);m&&(m.__temp?(f.setItemGraphicEl(g,null),this.group.remove(m)):m.downplay())}else ia.Z.prototype.downplay.call(this,a,l,c,h)},o.prototype._changePolyState=function(a){var l=this._polygon;(0,Ut.Gl)(this._polyline,a),l&&(0,Ut.Gl)(l,a)},o.prototype._newPolyline=function(a){var l=this._polyline;return l&&this._lineGroup.remove(l),l=new Jo({shape:{points:a},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(l),this._polyline=l,l},o.prototype._newPolygon=function(a,l){var c=this._polygon;return c&&this._lineGroup.remove(c),c=new r0({shape:{points:a,stackedOnPoints:l},segmentIgnoreThreshold:2}),this._lineGroup.add(c),this._polygon=c,c},o.prototype._initSymbolLabelAnimation=function(a,l,c){var h,f,g=l.getBaseAxis(),m=g.inverse;"cartesian2d"===l.type?(h=g.isHorizontal(),f=!1):"polar"===l.type&&(h="angle"===g.dim,f=!0);var y=a.hostModel,x=y.get("animationDuration");b.isFunction(x)&&(x=x(null));var w=y.get("animationDelay")||0,D=b.isFunction(w)?w(null):w;a.eachItemGraphicEl(function(I,L){var N=I;if(N){var se=void 0,_e=void 0,me=void 0;if(c)if(f){var De=c,Pe=l.pointToCoord([I.x,I.y]);h?(se=De.startAngle,_e=De.endAngle,me=-Pe[1]/180*Math.PI):(se=De.r0,_e=De.r,me=Pe[0])}else h?(se=c.x,_e=c.x+c.width,me=I.x):(se=c.y+c.height,_e=c.y,me=I.y);var ke=_e===se?0:(me-se)/(_e-se);m&&(ke=1-ke);var Ue=b.isFunction(w)?w(L):x*ke+D,Ye=N.getSymbolPath(),Ke=Ye.getTextContent();N.attr({scaleX:0,scaleY:0}),N.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:Ue}),Ke&&Ke.animateFrom({style:{opacity:0}},{duration:300,delay:Ue}),Ye.disableLabelAnimation=!0}})},o.prototype._initOrUpdateEndLabel=function(a,l,c){var h=a.getModel("endLabel");if(pg(a)){var f=a.getData(),g=this._polyline,m=f.getLayout("points");if(!m)return g.removeTextContent(),void(this._endLabel=null);var y=this._endLabel;y||((y=this._endLabel=new _t.ZP({z2:200})).ignoreClip=!0,g.setTextContent(this._endLabel),g.disableLabelAnimation=!0);var x=function Tl(u){for(var o=u.length/2;o>0&&ww(u[2*o-2],u[2*o-1]);o--);return o-1}(m);x>=0&&((0,qt.ni)(g,(0,qt.k3)(a,"endLabel"),{inheritColor:c,labelFetcher:a,labelDataIndex:x,defaultText:function(w,D,I){return null!=I?Wr(f,I):Dl(f,w)},enableTextSetter:!0},function Mi(u,o){var a=o.getBaseAxis(),l=a.isHorizontal(),c=a.inverse,h=l?c?"right":"left":"center",f=l?"middle":c?"top":"bottom";return{normal:{align:u.get("align")||h,verticalAlign:u.get("verticalAlign")||f}}}(h,l)),g.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},o.prototype._endLabelOnDuring=function(a,l,c,h,f,g,m){var y=this._endLabel,x=this._polyline;if(y){a<1&&null==h.originalX&&(h.originalX=y.x,h.originalY=y.y);var w=c.getLayout("points"),D=c.hostModel,I=D.get("connectNulls"),L=g.get("precision"),N=g.get("distance")||0,Z=m.getBaseAxis(),se=Z.isHorizontal(),_e=Z.inverse,me=l.shape,De=_e?se?me.x:me.y+me.height:se?me.x+me.width:me.y,Pe=(se?N:0)*(_e?-1:1),Ie=(se?0:-N)*(_e?-1:1),ke=se?"x":"y",Ue=function a0(u,o,a){for(var h,f,l=u.length/2,c="x"===a?0:1,g=0,m=-1,y=0;y<l;y++)if(f=u[2*y+c],!isNaN(f)&&!isNaN(u[2*y+1-c])){if(0===y){h=f;continue}if(h<=o&&f>=o||h>=o&&f<=o){m=y;break}g=y,h=f}return{range:[g,m],t:(o-h)/(f-h)}}(w,De,ke),Ye=Ue.range,Ke=Ye[1]-Ye[0],qe=void 0;if(Ke>=1){if(Ke>1&&!I){var ut=ts(w,Ye[0]);y.attr({x:ut[0]+Pe,y:ut[1]+Ie}),f&&(qe=D.getRawValue(Ye[0]))}else{(ut=x.getPointOn(De,ke))&&y.attr({x:ut[0]+Pe,y:ut[1]+Ie});var pt=D.getRawValue(Ye[0]),yt=D.getRawValue(Ye[1]);f&&(qe=xn.pk(c,L,pt,yt,Ue.t))}h.lastFrameIndex=Ye[0]}else{var wt=1===a||h.lastFrameIndex>0?Ye[0]:0;ut=ts(w,wt),f&&(qe=D.getRawValue(wt)),y.attr({x:ut[0]+Pe,y:ut[1]+Ie})}f&&(0,qt.qA)(y).setLabelText(qe)}},o.prototype._doUpdateAnimation=function(a,l,c,h,f,g,m){var y=this._polyline,x=this._polygon,w=a.hostModel,D=function Ml(u,o,a,l,c,h,f,g){for(var m=function t0(u,o){var a=[];return o.diff(u).add(function(l){a.push({cmd:"+",idx:l})}).update(function(l,c){a.push({cmd:"=",idx:c,idx1:l})}).remove(function(l){a.push({cmd:"-",idx:l})}).execute(),a}(u,o),y=[],x=[],w=[],D=[],I=[],L=[],N=[],Z=id(c,o,f),se=u.getLayout("points")||[],_e=o.getLayout("points")||[],me=0;me<m.length;me++){var De=m[me],Pe=!0,Ie=void 0,ke=void 0;switch(De.cmd){case"=":var Ue=se[Ie=2*De.idx],Ye=se[Ie+1],Ke=_e[ke=2*De.idx1],qe=_e[ke+1];(isNaN(Ue)||isNaN(Ye))&&(Ue=Ke,Ye=qe),y.push(Ue,Ye),x.push(Ke,qe),w.push(a[Ie],a[Ie+1]),D.push(l[ke],l[ke+1]),N.push(o.getRawIndex(De.idx1));break;case"+":var ut=De.idx,pt=Z.dataDimsForPoint,yt=c.dataToPoint([o.get(pt[0],ut),o.get(pt[1],ut)]);ke=2*ut,y.push(yt[0],yt[1]),x.push(_e[ke],_e[ke+1]);var wt=Ff(Z,c,o,ut);w.push(wt[0],wt[1]),D.push(l[ke],l[ke+1]),N.push(o.getRawIndex(ut));break;case"-":Pe=!1}Pe&&(I.push(De),L.push(L.length))}L.sort(function(xi,Oi){return N[xi]-N[Oi]});var kt=y.length,en=(0,Ks.o)(kt),jt=(0,Ks.o)(kt),dn=(0,Ks.o)(kt),Fn=(0,Ks.o)(kt),Hn=[];for(me=0;me<L.length;me++){var lr=L[me],br=2*me,Fr=2*lr;en[br]=y[Fr],en[br+1]=y[Fr+1],jt[br]=x[Fr],jt[br+1]=x[Fr+1],dn[br]=w[Fr],dn[br+1]=w[Fr+1],Fn[br]=D[Fr],Fn[br+1]=D[Fr+1],Hn[me]=I[lr]}return{current:en,next:jt,stackedOnCurrent:dn,stackedOnNext:Fn,status:Hn}}(this._data,a,this._stackedOnPoints,l,this._coordSys,0,this._valueOrigin),I=D.current,L=D.stackedOnCurrent,N=D.next,Z=D.stackedOnNext;if(f&&(I=Jn(D.current,c,f,m),L=Jn(D.stackedOnCurrent,c,f,m),N=Jn(D.next,c,f,m),Z=Jn(D.stackedOnNext,c,f,m)),dh(I,N)>3e3||x&&dh(L,Z)>3e3)return y.stopAnimation(),y.setShape({points:N}),void(x&&(x.stopAnimation(),x.setShape({points:N,stackedOnPoints:Z})));y.shape.__points=D.current,y.shape.points=I;var se={shape:{points:N}};D.current!==I&&(se.shape.__points=D.next),y.stopAnimation(),wn.D(y,se,w),x&&(x.setShape({points:I,stackedOnPoints:L}),x.stopAnimation(),wn.D(x,{shape:{stackedOnPoints:Z}},w),y.shape.points!==x.shape.points&&(x.shape.points=y.shape.points));for(var _e=[],me=D.status,De=0;De<me.length;De++)if("="===me[De].cmd){var Ie=a.getItemGraphicEl(me[De].idx1);Ie&&_e.push({el:Ie,ptIdx:De})}y.animators&&y.animators.length&&y.animators[0].during(function(){x&&x.dirtyShape();for(var ke=y.shape.__points,Ue=0;Ue<_e.length;Ue++){var Ye=_e[Ue].el,Ke=2*_e[Ue].ptIdx;Ye.x=ke[Ke],Ye.y=ke[Ke+1],Ye.markRedraw()}})},o.prototype.remove=function(a){var l=this.group,c=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),c&&c.eachItemGraphicEl(function(h,f){h.__temp&&(l.remove(h),c.setItemGraphicEl(f,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},o.type="line",o}(ia.Z);var uo=z(5103);function ei(u,o){return{seriesType:u,plan:(0,uo.Z)(),reset:function(a){var l=a.getData(),c=a.coordinateSystem,f=o||a.pipelineContext.large;if(c){var g=(0,b.map)(c.dimensions,function(I){return l.mapDimension(I)}).slice(0,2),m=g.length,y=l.getCalculationInfo("stackResultDimension");(0,$l.M)(l,g[0])&&(g[0]=y),(0,$l.M)(l,g[1])&&(g[1]=y);var x=l.getStore(),w=l.getDimensionIndex(g[0]),D=l.getDimensionIndex(g[1]);return m&&{progress:function(I,L){for(var Z=f&&(0,Ks.o)((I.end-I.start)*m),se=[],_e=[],me=I.start,De=0;me<I.end;me++){var Pe=void 0;if(1===m){var Ie=x.get(w,me);Pe=c.dataToPoint(Ie,null,_e)}else se[0]=x.get(w,me),se[1]=x.get(D,me),Pe=c.dataToPoint(se,null,_e);f?(Z[De++]=Pe[0],Z[De++]=Pe[1]):L.setItemLayout(me,Pe.slice())}f&&L.setLayout("points",Z)}}}}}}var hc={average:function(u){for(var o=0,a=0,l=0;l<u.length;l++)isNaN(u[l])||(o+=u[l],a++);return 0===a?NaN:o/a},sum:function(u){for(var o=0,a=0;a<u.length;a++)o+=u[a]||0;return o},max:function(u){for(var o=-1/0,a=0;a<u.length;a++)u[a]>o&&(o=u[a]);return isFinite(o)?o:NaN},min:function(u){for(var o=1/0,a=0;a<u.length;a++)u[a]<o&&(o=u[a]);return isFinite(o)?o:NaN},nearest:function(u){return u[0]}},ad=function(u){return Math.round(u.length/2)};function ql(u){return{seriesType:u,reset:function(o,a,l){var c=o.getData(),h=o.get("sampling"),f=o.coordinateSystem,g=c.count();if(g>10&&"cartesian2d"===f.type&&h){var m=f.getBaseAxis(),y=f.getOtherAxis(m),x=m.getExtent(),w=l.getDevicePixelRatio(),D=Math.abs(x[1]-x[0])*(w||1),I=Math.round(g/D);if(isFinite(I)&&I>1){"lttb"===h&&o.setData(c.lttbDownSample(c.mapDimension(y.dim),1/I));var L=void 0;(0,b.isString)(h)?L=hc[h]:(0,b.isFunction)(h)&&(L=h),L&&o.setData(c.downSample(c.mapDimension(y.dim),1/I,L,ad))}}}}}var Ho=z(2154),Nu=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.getInitialData=function(a,l){return(0,$s.Z)(null,this,{useEncodeDefaulter:!0})},o.prototype.getMarkerPosition=function(a){var l=this.coordinateSystem;if(l&&l.clampData){var c=l.dataToPoint(l.clampData(a)),h=this.getData(),f=h.getLayout("offset"),g=h.getLayout("size");return c[l.getBaseAxis().isHorizontal()?0:1]+=f+g/2,c}return[NaN,NaN]},o.type="series.__base_bar__",o.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},o}(Zi.Z);Zi.Z.registerClass(Nu);const pc=Nu;var qn=z(2015);const Gf=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.getInitialData=function(){return(0,$s.Z)(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},o.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},o.prototype.getProgressiveThreshold=function(){var a=this.get("progressiveThreshold"),l=this.get("largeThreshold");return l>a&&(a=l),a},o.prototype.brushSelector=function(a,l,c){return c.rect(l.getItemLayout(a))},o.type="series.bar",o.dependencies=["grid","polar"],o.defaultOption=(0,qn.ZL)(pc.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),o}(pc);var Uo=z(357),er=function u(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0};const Jl=function(u){function o(a){var l=u.call(this,a)||this;return l.type="sausage",l}return(0,Tt.ZT)(o,u),o.prototype.getDefaultShape=function(){return new er},o.prototype.buildPath=function(a,l){var c=l.cx,h=l.cy,f=Math.max(l.r0||0,0),g=Math.max(l.r,0),m=.5*(g-f),y=f+m,x=l.startAngle,w=l.endAngle,D=l.clockwise,I=2*Math.PI,L=D?w-x<I:x-w<I;L||(x=w-(D?I:-I));var N=Math.cos(x),Z=Math.sin(x),se=Math.cos(w),_e=Math.sin(w);L?(a.moveTo(N*f+c,Z*f+h),a.arc(N*y+c,Z*y+h,m,-Math.PI+x,x,!D)):a.moveTo(N*g+c,Z*g+h),a.arc(c,h,g,x,w,!D),a.arc(se*y+c,_e*y+h,m,w-2*Math.PI,w-Math.PI,!D),0!==f&&a.arc(c,h,f,w,x,D)},o}(ve.ZP);function Ti(u,o,a){return o*Math.sin(u)*(a?-1:1)}function pa(u,o,a){return o*Math.cos(u)*(a?1:-1)}var va=Math.max,Qs=Math.min,Mo=function(u){function o(){var a=u.call(this)||this;return a.type=o.type,a._isFirstFrame=!0,a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c,h){this._model=a,this._removeOnRenderedListener(c),this._updateDrawMode(a);var f=a.get("coordinateSystem");("cartesian2d"===f||"polar"===f)&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(a,l,c):this._renderNormal(a,l,c,h))},o.prototype.incrementalPrepareRender=function(a){this._clear(),this._updateDrawMode(a),this._updateLargeClip(a)},o.prototype.incrementalRender=function(a,l){this._progressiveEls=[],this._incrementalRenderLarge(a,l)},o.prototype.eachRendered=function(a){(0,_n.traverseElements)(this._progressiveEls||this.group,a)},o.prototype._updateDrawMode=function(a){var l=a.pipelineContext.large;(null==this._isLargeDraw||l!==this._isLargeDraw)&&(this._isLargeDraw=l,this._clear())},o.prototype._renderNormal=function(a,l,c,h){var w,f=this.group,g=a.getData(),m=this._data,y=a.coordinateSystem,x=y.getBaseAxis();"cartesian2d"===y.type?w=x.isHorizontal():"polar"===y.type&&(w="angle"===x.dim);var D=a.isAnimationEnabled()?a:null,I=function Pi(u,o){var a=u.get("realtimeSort",!0),l=o.getBaseAxis();if(a&&"category"===l.type&&"cartesian2d"===o.type)return{baseAxis:l,otherAxis:o.getOtherAxis(l)}}(a,y);I&&this._enableRealtimeSort(I,g,c);var L=a.get("clip",!0)||I,N=function Do(u,o){var a=u.getArea&&u.getArea();if(Is(u,"cartesian2d")){var l=u.getBaseAxis();if("category"!==l.type||!l.onBand){var c=o.getLayout("bandWidth");l.isHorizontal()?(a.x-=c,a.width+=2*c):(a.y-=c,a.height+=2*c)}}return a}(y,g);f.removeClipPath();var Z=a.get("roundCap",!0),se=a.get("showBackground",!0),_e=a.getModel("backgroundStyle"),me=_e.get("borderRadius")||0,De=[],Pe=this._backgroundEls,Ie=h&&h.isInitSort,ke=h&&"changeAxisOrder"===h.type;function Ue(qe){var ut=tu[y.type](g,qe),pt=function ru(u,o,a){return new("polar"===u.type?yn.C:Di.Z)({shape:ws(o,a,u),silent:!0,z2:0})}(y,w,ut);return pt.useStyle(_e.getItemStyle()),"cartesian2d"===y.type&&pt.setShape("r",me),De[qe]=pt,pt}g.diff(m).add(function(qe){var ut=g.getItemModel(qe),pt=tu[y.type](g,qe,ut);if(se&&Ue(qe),g.hasValue(qe)&&aa[y.type](pt)){var yt=!1;L&&(yt=Nn[y.type](N,pt));var wt=Lr[y.type](a,g,qe,pt,w,D,x.model,!1,Z);I&&(wt.forceLabelAnimation=!0),od(wt,g,qe,ut,pt,a,w,"polar"===y.type),Ie?wt.attr({shape:pt}):I?Ja(I,D,wt,pt,qe,w,!1,!1):(0,wn.KZ)(wt,{shape:pt},a,qe),g.setItemGraphicEl(qe,wt),f.add(wt),wt.ignore=yt}}).update(function(qe,ut){var pt=g.getItemModel(qe),yt=tu[y.type](g,qe,pt);if(se){var wt=void 0;0===Pe.length?wt=Ue(ut):((wt=Pe[ut]).useStyle(_e.getItemStyle()),"cartesian2d"===y.type&&wt.setShape("r",me),De[qe]=wt);var kt=tu[y.type](g,qe),en=ws(w,kt,y);(0,wn.D)(wt,{shape:en},D,qe)}var jt=m.getItemGraphicEl(ut);if(g.hasValue(qe)&&aa[y.type](yt)){var dn=!1;if(L&&(dn=Nn[y.type](N,yt))&&f.remove(jt),jt?(0,wn.Zi)(jt):jt=Lr[y.type](a,g,qe,yt,w,D,x.model,!!jt,Z),I&&(jt.forceLabelAnimation=!0),ke){var Fn=jt.getTextContent();if(Fn){var Hn=(0,qt.qA)(Fn);null!=Hn.prevValue&&(Hn.prevValue=Hn.value)}}else od(jt,g,qe,pt,yt,a,w,"polar"===y.type);Ie?jt.attr({shape:yt}):I?Ja(I,D,jt,yt,qe,w,!0,ke):(0,wn.D)(jt,{shape:yt},a,qe,null),g.setItemGraphicEl(qe,jt),jt.ignore=dn,f.add(jt)}else f.remove(jt)}).remove(function(qe){var ut=m.getItemGraphicEl(qe);ut&&(0,wn.XD)(ut,a,qe)}).execute();var Ye=this._backgroundGroup||(this._backgroundGroup=new Pn.Z);Ye.removeAll();for(var Ke=0;Ke<De.length;++Ke)Ye.add(De[Ke]);f.add(Ye),this._backgroundEls=De,this._data=g},o.prototype._renderLarge=function(a,l,c){this._clear(),Ua(a,this.group),this._updateLargeClip(a)},o.prototype._incrementalRenderLarge=function(a,l){this._removeBackground(),Ua(l,this.group,this._progressiveEls,!0)},o.prototype._updateLargeClip=function(a){var l=a.get("clip",!0)&&ch(a.coordinateSystem,!1,a),c=this.group;l?c.setClipPath(l):c.removeClipPath()},o.prototype._enableRealtimeSort=function(a,l,c){var h=this;if(l.count()){var f=a.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(l,a,c),this._isFirstFrame=!1;else{var g=function(m){var y=l.getItemGraphicEl(m),x=y&&y.shape;return x&&Math.abs(f.isHorizontal()?x.height:x.width)||0};this._onRendered=function(){h._updateSortWithinSameData(l,g,f,c)},c.getZr().on("rendered",this._onRendered)}}},o.prototype._dataSort=function(a,l,c){var h=[];return a.each(a.mapDimension(l.dim),function(f,g){var m=c(g);h.push({dataIndex:g,mappedValue:m=m??NaN,ordinalNumber:f})}),h.sort(function(f,g){return g.mappedValue-f.mappedValue}),{ordinalNumbers:(0,b.map)(h,function(f){return f.ordinalNumber})}},o.prototype._isOrderChangedWithinSameData=function(a,l,c){for(var h=c.scale,f=a.mapDimension(c.dim),g=Number.MAX_VALUE,m=0,y=h.getOrdinalMeta().categories.length;m<y;++m){var x=a.rawIndexOf(f,h.getRawOrdinalNumber(m)),w=x<0?Number.MIN_VALUE:l(a.indexOfRawIndex(x));if(w>g)return!0;g=w}return!1},o.prototype._isOrderDifferentInView=function(a,l){for(var c=l.scale,h=c.getExtent(),f=Math.max(0,h[0]),g=Math.min(h[1],c.getOrdinalMeta().categories.length-1);f<=g;++f)if(a.ordinalNumbers[f]!==c.getRawOrdinalNumber(f))return!0},o.prototype._updateSortWithinSameData=function(a,l,c,h){if(this._isOrderChangedWithinSameData(a,l,c)){var f=this._dataSort(a,c,l);this._isOrderDifferentInView(f,c)&&(this._removeOnRenderedListener(h),h.dispatchAction({type:"changeAxisOrder",componentType:c.dim+"Axis",axisId:c.index,sortInfo:f}))}},o.prototype._dispatchInitSort=function(a,l,c){var h=l.baseAxis,f=this._dataSort(a,h,function(g){return a.get(a.mapDimension(l.otherAxis.dim),g)});c.dispatchAction({type:"changeAxisOrder",componentType:h.dim+"Axis",isInitSort:!0,axisId:h.index,sortInfo:f})},o.prototype.remove=function(a,l){this._clear(this._model),this._removeOnRenderedListener(l)},o.prototype.dispose=function(a,l){this._removeOnRenderedListener(l)},o.prototype._removeOnRenderedListener=function(a){this._onRendered&&(a.getZr().off("rendered",this._onRendered),this._onRendered=null)},o.prototype._clear=function(a){var l=this.group,c=this._data;a&&a.isAnimationEnabled()&&c&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],c.eachItemGraphicEl(function(h){(0,wn.XD)(h,a,(0,Mr.A)(h).dataIndex)})):l.removeAll(),this._data=null,this._isFirstFrame=!0},o.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},o.type="bar",o}(ia.Z),Nn={cartesian2d:function(u,o){var a=o.width<0?-1:1,l=o.height<0?-1:1;a<0&&(o.x+=o.width,o.width=-o.width),l<0&&(o.y+=o.height,o.height=-o.height);var c=u.x+u.width,h=u.y+u.height,f=va(o.x,u.x),g=Qs(o.x+o.width,c),m=va(o.y,u.y),y=Qs(o.y+o.height,h),x=g<f,w=y<m;return o.x=x&&f>c?g:f,o.y=w&&m>h?y:m,o.width=x?0:g-f,o.height=w?0:y-m,a<0&&(o.x+=o.width,o.width=-o.width),l<0&&(o.y+=o.height,o.height=-o.height),x||w},polar:function(u,o){var a=o.r0<=o.r?1:-1;if(a<0){var l=o.r;o.r=o.r0,o.r0=l}var c=Qs(o.r,u.r),h=va(o.r0,u.r0);o.r=c,o.r0=h;var f=c-h<0;return a<0&&(l=o.r,o.r=o.r0,o.r0=l),f}},Lr={cartesian2d:function(u,o,a,l,c,h,f,g,m){var y=new Di.Z({shape:(0,b.extend)({},l),z2:1});return y.__dataIndex=a,y.name="item",h&&(y.shape[c?"height":"width"]=0),y},polar:function(u,o,a,l,c,h,f,g,m){var y=!c&&m?Jl:yn.C,x=new y({shape:l,z2:1});x.name="item";var w=Ur(c);if(x.calculateTextPosition=function Sn(u,o){var a=(o=o||{}).isRoundCap;return function(l,c,h){var f=c.position;if(!f||f instanceof Array)return(0,Ce.wI)(l,c,h);var g=u(f),m=null!=c.distance?c.distance:5,y=this.shape,x=y.cx,w=y.cy,D=y.r,I=y.r0,L=(D+I)/2,N=y.startAngle,Z=y.endAngle,se=(N+Z)/2,_e=a?Math.abs(D-I)/2:0,me=Math.cos,De=Math.sin,Pe=x+D*me(N),Ie=w+D*De(N),ke="left",Ue="top";switch(g){case"startArc":Pe=x+(I-m)*me(se),Ie=w+(I-m)*De(se),ke="center",Ue="top";break;case"insideStartArc":Pe=x+(I+m)*me(se),Ie=w+(I+m)*De(se),ke="center",Ue="bottom";break;case"startAngle":Pe=x+L*me(N)+Ti(N,m+_e,!1),Ie=w+L*De(N)+pa(N,m+_e,!1),ke="right",Ue="middle";break;case"insideStartAngle":Pe=x+L*me(N)+Ti(N,-m+_e,!1),Ie=w+L*De(N)+pa(N,-m+_e,!1),ke="left",Ue="middle";break;case"middle":Pe=x+L*me(se),Ie=w+L*De(se),ke="center",Ue="middle";break;case"endArc":Pe=x+(D+m)*me(se),Ie=w+(D+m)*De(se),ke="center",Ue="bottom";break;case"insideEndArc":Pe=x+(D-m)*me(se),Ie=w+(D-m)*De(se),ke="center",Ue="top";break;case"endAngle":Pe=x+L*me(Z)+Ti(Z,m+_e,!0),Ie=w+L*De(Z)+pa(Z,m+_e,!0),ke="left",Ue="middle";break;case"insideEndAngle":Pe=x+L*me(Z)+Ti(Z,-m+_e,!0),Ie=w+L*De(Z)+pa(Z,-m+_e,!0),ke="right",Ue="middle";break;default:return(0,Ce.wI)(l,c,h)}return(l=l||{}).x=Pe,l.y=Ie,l.align=ke,l.verticalAlign=Ue,l}}(w,{isRoundCap:y===Jl}),h){var I=c?"r":"endAngle",L={};x.shape[I]=c?0:l.startAngle,L[I]=l[I],(g?wn.D:wn.KZ)(x,{shape:L},h)}return x}};function Ja(u,o,a,l,c,h,f,g){var m,y;h?(y={x:l.x,width:l.width},m={y:l.y,height:l.height}):(y={y:l.y,height:l.height},m={x:l.x,width:l.width}),g||(f?wn.D:wn.KZ)(a,{shape:m},o,c,null),(f?wn.D:wn.KZ)(a,{shape:y},o?u.baseAxis.model:null,c)}function eu(u,o){for(var a=0;a<o.length;a++)if(!isFinite(u[o[a]]))return!0;return!1}var Ha=["x","y","width","height"],El=["cx","cy","r","startAngle","endAngle"],aa={cartesian2d:function(u){return!eu(u,Ha)},polar:function(u){return!eu(u,El)}},tu={cartesian2d:function(u,o,a){var l=u.getItemLayout(o),c=a?function nu(u,o){var a=u.get(["itemStyle","borderColor"]);if(!a||"none"===a)return 0;var l=u.get(["itemStyle","borderWidth"])||0,c=isNaN(o.width)?Number.MAX_VALUE:Math.abs(o.width),h=isNaN(o.height)?Number.MAX_VALUE:Math.abs(o.height);return Math.min(l,c,h)}(a,l):0,h=l.width>0?1:-1,f=l.height>0?1:-1;return{x:l.x+h*c/2,y:l.y+f*c/2,width:l.width-h*c,height:l.height-f*c}},polar:function(u,o,a){var l=u.getItemLayout(o);return{cx:l.cx,cy:l.cy,r0:l.r0,r:l.r,startAngle:l.startAngle,endAngle:l.endAngle,clockwise:l.clockwise}}};function Ur(u){return a=u?"Arc":"Angle",function(l){switch(l){case"start":case"insideStart":case"end":case"insideEnd":return l+a;default:return l}};var a}function od(u,o,a,l,c,h,f,g){var m=o.getItemVisual(a,"style");g||u.setShape("r",l.get(["itemStyle","borderRadius"])||0),u.useStyle(m);var y=l.getShallow("cursor");y&&u.attr("cursor",y);var x=g?f?c.r>=c.r0?"endArc":"startArc":c.endAngle>=c.startAngle?"endAngle":"startAngle":f?c.height>=0?"bottom":"top":c.width>=0?"right":"left",w=(0,qt.k3)(l);(0,qt.ni)(u,w,{labelFetcher:h,labelDataIndex:a,defaultText:Dl(h.getData(),a),inheritColor:m.fill,defaultOpacity:m.opacity,defaultOutsidePosition:x});var D=u.getTextContent();if(g&&D){var I=l.get(["label","position"]);u.textConfig.inside="middle"===I||null,function Go(u,o,a,l){if((0,b.isNumber)(l))u.setTextConfig({rotation:l});else if((0,b.isArray)(o))u.setTextConfig({rotation:0});else{var m,c=u.shape,h=c.clockwise?c.startAngle:c.endAngle,f=c.clockwise?c.endAngle:c.startAngle,g=(h+f)/2,y=a(o);switch(y){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":m=g;break;case"startAngle":case"insideStartAngle":m=h;break;case"endAngle":case"insideEndAngle":m=f;break;default:return void u.setTextConfig({rotation:0})}var x=1.5*Math.PI-m;"middle"===y&&x>Math.PI/2&&x<1.5*Math.PI&&(x-=Math.PI),u.setTextConfig({rotation:x})}}(u,"outside"===I?x:I,Ur(f),l.get(["label","rotate"]))}(0,qt.pe)(D,w,h.getRawValue(a),function(N){return Wr(o,N)});var L=l.getModel(["emphasis"]);(0,Ut.k5)(u,L.get("focus"),L.get("blurScope"),L.get("disabled")),(0,Ut.WO)(u,l),function vc(u){return null!=u.startAngle&&null!=u.endAngle&&u.startAngle===u.endAngle}(c)&&(u.style.fill="none",u.style.stroke="none",(0,b.each)(u.states,function(N){N.style&&(N.style.fill=N.style.stroke="none")}))}var Wf=function u(){},qs=function(u){function o(a){var l=u.call(this,a)||this;return l.type="largeBar",l}return(0,Tt.ZT)(o,u),o.prototype.getDefaultShape=function(){return new Wf},o.prototype.buildPath=function(a,l){for(var c=l.points,h=this.baseDimIdx,f=1-this.baseDimIdx,g=[],m=[],y=this.barWidth,x=0;x<c.length;x+=3)m[h]=y,m[f]=c[x+2],g[h]=c[x+h],g[f]=c[x+f],a.rect(g[0],g[1],m[0],m[1])},o}(ve.ZP);function Ua(u,o,a,l){var c=u.getData(),h=c.getLayout("valueAxisHorizontal")?1:0,f=c.getLayout("largeDataIndices"),g=c.getLayout("size"),m=u.getModel("backgroundStyle"),y=c.getLayout("largeBackgroundPoints");if(y){var x=new qs({shape:{points:y},incremental:!!l,silent:!0,z2:0});x.baseDimIdx=h,x.largeDataIndices=f,x.barWidth=g,x.useStyle(m.getItemStyle()),o.add(x),a&&a.push(x)}var w=new qs({shape:{points:c.getLayout("largePoints")},incremental:!!l,ignoreCoarsePointer:!0,z2:1});w.baseDimIdx=h,w.largeDataIndices=f,w.barWidth=g,o.add(w),w.useStyle(c.getVisual("style")),(0,Mr.A)(w).seriesIndex=u.seriesIndex,u.get("silent")||(w.on("mousedown",Fu),w.on("mousemove",Fu)),a&&a.push(w)}var Fu=(0,Uo.P2)(function(u){var a=function gc(u,o,a){for(var l=u.baseDimIdx,c=1-l,h=u.shape.points,f=u.largeDataIndices,g=[],m=[],y=u.barWidth,x=0,w=h.length/3;x<w;x++){var D=3*x;if(m[l]=y,m[c]=h[D+2],g[l]=h[D+l],g[c]=h[D+c],m[c]<0&&(g[c]+=m[c],m[c]=-m[c]),o>=g[0]&&o<=g[0]+m[0]&&a>=g[1]&&a<=g[1]+m[1])return f[x]}return-1}(this,u.offsetX,u.offsetY);(0,Mr.A)(this).dataIndex=a>=0?a:null},30,!1);function ws(u,o,a){if(Is(a,"cartesian2d")){var l=o,c=a.getArea();return{x:u?l.x:c.x,y:u?c.y:l.y,width:u?l.width:c.width,height:u?c.height:l.height}}return{cx:(c=a.getArea()).cx,cy:c.cy,r0:u?c.r0:o.r0,r:u?c.r:o.r,startAngle:u?o.startAngle:0,endAngle:u?o.endAngle:2*Math.PI}}const Bu=Mo;var mg=z(960),Vr=z(634),ns=2*Math.PI,sd=Math.PI/180;function iu(u,o){return Vr.ME(u.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()})}function mc(u,o){var a=iu(u,o),l=u.get("center"),c=u.get("radius");b.isArray(c)||(c=[0,c]),b.isArray(l)||(l=[l,l]);var x,w,h=(0,It.GM)(a.width,o.getWidth()),f=(0,It.GM)(a.height,o.getHeight()),g=Math.min(h,f),m=(0,It.GM)(c[0],g/2),y=(0,It.GM)(c[1],g/2),D=u.coordinateSystem;if(D){var I=D.dataToPoint(l);x=I[0]||0,w=I[1]||0}else x=(0,It.GM)(l[0],h)+a.x,w=(0,It.GM)(l[1],f)+a.y;return{cx:x,cy:w,r0:m,r:y}}function Vu(u,o,a){o.eachSeriesByType(u,function(l){var c=l.getData(),h=c.mapDimension("value"),f=iu(l,a),g=mc(l,a),m=g.cx,y=g.cy,x=g.r,w=g.r0,D=-l.get("startAngle")*sd,I=l.get("minAngle")*sd,L=0;c.each(h,function(Ke){!isNaN(Ke)&&L++});var N=c.getSum(h),Z=Math.PI/(N||L)*2,se=l.get("clockwise"),_e=l.get("roseType"),me=l.get("stillShowZeroSum"),De=c.getDataExtent(h);De[0]=0;var Pe=ns,Ie=0,ke=D,Ue=se?1:-1;if(c.setLayout({viewRect:f,r:x}),c.each(h,function(Ke,qe){var ut;if(isNaN(Ke))c.setItemLayout(qe,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:se,cx:m,cy:y,r0:w,r:_e?NaN:x});else{(ut="area"!==_e?0===N&&me?Z:Ke*Z:ns/L)<I?(ut=I,Pe-=I):Ie+=Ke;var pt=ke+Ue*ut;c.setItemLayout(qe,{angle:ut,startAngle:ke,endAngle:pt,clockwise:se,cx:m,cy:y,r0:w,r:_e?(0,It.NU)(Ke,De,[w,x]):x}),ke=pt}}),Pe<ns&&L)if(Pe<=.001){var Ye=ns/L;c.each(h,function(Ke,qe){if(!isNaN(Ke)){var ut=c.getItemLayout(qe);ut.angle=Ye,ut.startAngle=D+Ue*qe*Ye,ut.endAngle=D+Ue*(qe+1)*Ye}})}else Z=Pe/Ie,ke=D,c.each(h,function(Ke,qe){if(!isNaN(Ke)){var ut=c.getItemLayout(qe),pt=ut.angle===I?I:Ke*Z;ut.startAngle=ke,ut.endAngle=ke+Ue*pt,ke+=Ue*pt}})})}function Ma(u){return{seriesType:u,reset:function(o,a){var l=a.findComponents({mainType:"legend"});if(l&&l.length){var c=o.getData();c.filterSelf(function(h){for(var f=c.getName(h),g=0;g<l.length;g++)if(!l[g].isSelected(f))return!1;return!0})}}}}var Ps=z(7834),ea=z(7564),co=z(7521),Ne=z(1593),Ge=Math.PI/180;function Le(u,o,a,l,c,h,f,g,m,y){if(!(u.length<2)){for(var D=u.length,I=0;I<D;I++)"outer"===u[I].position&&"labelLine"===u[I].labelAlignTo&&(u[I].linePoints[1][0]+=u[I].label.x-y,u[I].label.x=y);(0,Ne.GI)(u,m,m+f)&&function w(N){for(var Z={list:[],maxY:0},se={list:[],maxY:0},_e=0;_e<N.length;_e++)if("none"===N[_e].labelAlignTo){var me=N[_e],De=me.label.y>a?se:Z,Pe=Math.abs(me.label.y-a);if(Pe>=De.maxY){var Ie=me.label.x-o-me.len2*c,ke=l+me.len,Ue=Math.abs(Ie)<ke?Math.sqrt(Pe*Pe/(1-Ie*Ie/ke/ke)):ke;De.rB=Ue,De.maxY=Pe}De.list.push(me)}x(Z),x(se)}(u)}function x(N){for(var Z=N.rB,se=Z*Z,_e=0;_e<N.list.length;_e++){var me=N.list[_e],De=Math.abs(me.label.y-a),Pe=l+me.len,Ie=Pe*Pe,ke=Math.sqrt((1-Math.abs(De*De/se))*Ie),Ue=o+(ke+me.len2)*c;Ze(me,me.targetTextWidth-(Ue-me.label.x)*c,!0),me.label.x=Ue}}}function Ze(u,o,a){if(void 0===a&&(a=!1),null==u.labelStyleWidth){var l=u.label,c=l.style,h=u.rect,f=c.backgroundColor,g=c.padding,m=g?g[1]+g[3]:0,y=c.overflow,x=h.width+(f?0:m);if(o<x||a){var w=h.height;if(y&&y.match("break")){l.setStyle("backgroundColor",null),l.setStyle("width",o-m);var D=l.getBoundingRect();l.setStyle("width",Math.ceil(D.width)),l.setStyle("backgroundColor",f)}else{var I=o-m;l.setStyle("width",o<x?I:a?I>u.unconstrainedWidth?null:I:null)}var N=l.getBoundingRect();h.width=N.width,h.height=N.height+((l.style.margin||0)+2.1),h.y-=(h.height-w)/2}}}function et(u){return"center"===u.position}function Wt(u,o,a){var l=u.get("borderRadius");if(null==l)return a?{cornerRadius:0}:null;(0,b.isArray)(l)||(l=[l,l,l,l]);var c=Math.abs(o.r||0-o.r0||0);return{cornerRadius:(0,b.map)(l,function(h){return(0,Ce.GM)(h,c)})}}var zt=function(u){function o(a,l,c){var h=u.call(this)||this;h.z2=2;var f=new _t.ZP;return h.setTextContent(f),h.updateData(a,l,c,!0),h}return(0,Tt.ZT)(o,u),o.prototype.updateData=function(a,l,c,h){var f=this,g=a.hostModel,m=a.getItemModel(l),y=m.getModel("emphasis"),x=a.getItemLayout(l),w=(0,b.extend)(Wt(m.getModel("itemStyle"),x,!0),x);if(isNaN(w.startAngle))f.setShape(w);else{if(h){f.setShape(w);var D=g.getShallow("animationType");g.ecModel.ssr?(wn.KZ(f,{scaleX:0,scaleY:0},g,{dataIndex:l,isFrom:!0}),f.originX=w.cx,f.originY=w.cy):"scale"===D?(f.shape.r=x.r0,wn.KZ(f,{shape:{r:x.r}},g,l)):null!=c?(f.setShape({startAngle:c,endAngle:c}),wn.KZ(f,{shape:{startAngle:x.startAngle,endAngle:x.endAngle}},g,l)):(f.shape.endAngle=x.startAngle,wn.D(f,{shape:{endAngle:x.endAngle}},g,l))}else(0,wn.Zi)(f),wn.D(f,{shape:w},g,l);f.useStyle(a.getItemVisual(l,"style")),(0,Ut.WO)(f,m);var I=(x.startAngle+x.endAngle)/2,L=g.get("selectedOffset"),N=Math.cos(I)*L,Z=Math.sin(I)*L,se=m.getShallow("cursor");se&&f.attr("cursor",se),this._updateLabel(g,a,l),f.ensureState("emphasis").shape=(0,b.extend)({r:x.r+(y.get("scale")&&y.get("scaleSize")||0)},Wt(y.getModel("itemStyle"),x)),(0,b.extend)(f.ensureState("select"),{x:N,y:Z,shape:Wt(m.getModel(["select","itemStyle"]),x)}),(0,b.extend)(f.ensureState("blur"),{shape:Wt(m.getModel(["blur","itemStyle"]),x)});var _e=f.getTextGuideLine(),me=f.getTextContent();_e&&(0,b.extend)(_e.ensureState("select"),{x:N,y:Z}),(0,b.extend)(me.ensureState("select"),{x:N,y:Z}),(0,Ut.k5)(this,y.get("focus"),y.get("blurScope"),y.get("disabled"))}},o.prototype._updateLabel=function(a,l,c){var h=this,f=l.getItemModel(c),g=f.getModel("labelLine"),m=l.getItemVisual(c,"style"),y=m&&m.fill,x=m&&m.opacity;(0,qt.ni)(h,(0,qt.k3)(f),{labelFetcher:l.hostModel,labelDataIndex:c,inheritColor:y,defaultOpacity:x,defaultText:a.getFormattedLabel(c,"normal")||l.getName(c)});var w=h.getTextContent();h.setTextConfig({position:null,rotation:null}),w.attr({z2:10});var D=a.get(["label","position"]);if("outside"!==D&&"outer"!==D)h.removeTextGuideLine();else{var I=this.getTextGuideLine();I||(I=new Ps.Z,this.setTextGuideLine(I)),(0,co.Iu)(this,(0,co.$x)(f),{stroke:y,opacity:(0,b.retrieve3)(g.get(["lineStyle","opacity"]),x,1)})}},o}(yn.C);const Mn=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.ignoreLabelLineUpdate=!0,a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c,h){var y,f=a.getData(),g=this._data,m=this.group;if(!g&&f.count()>0){for(var x=f.getItemLayout(0),w=1;isNaN(x&&x.startAngle)&&w<f.count();++w)x=f.getItemLayout(w);x&&(y=x.startAngle)}if(this._emptyCircleSector&&m.remove(this._emptyCircleSector),0===f.count()&&a.get("showEmptyCircle")){var D=new yn.C({shape:mc(a,c)});D.useStyle(a.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=D,m.add(D)}f.diff(g).add(function(I){var L=new zt(f,I,y);f.setItemGraphicEl(I,L),m.add(L)}).update(function(I,L){var N=g.getItemGraphicEl(L);N.updateData(f,I,y),N.off("click"),m.add(N),f.setItemGraphicEl(I,N)}).remove(function(I){var L=g.getItemGraphicEl(I);wn.XD(L,a,I)}).execute(),function ft(u){var l,c,o=u.getData(),a=[],h=!1,f=(u.get("minShowLabelAngle")||0)*Ge,g=o.getLayout("viewRect"),m=o.getLayout("r"),y=g.width,x=g.x,w=g.y,D=g.height;function I(Ie){Ie.ignore=!0}o.each(function(Ie){var ke=o.getItemGraphicEl(Ie),Ue=ke.shape,Ye=ke.getTextContent(),Ke=ke.getTextGuideLine(),qe=o.getItemModel(Ie),ut=qe.getModel("label"),pt=ut.get("position")||qe.get(["emphasis","label","position"]),yt=ut.get("distanceToLabelLine"),wt=ut.get("alignTo"),kt=(0,It.GM)(ut.get("edgeDistance"),y),en=ut.get("bleedMargin"),jt=qe.getModel("labelLine"),dn=jt.get("length");dn=(0,It.GM)(dn,y);var Fn=jt.get("length2");if(Fn=(0,It.GM)(Fn,y),Math.abs(Ue.endAngle-Ue.startAngle)<f)return(0,b.each)(Ye.states,I),(0,b.each)(Ke.states,I),void(Ye.ignore=Ke.ignore=!0);if(function L(Ie){if(!Ie.ignore)return!0;for(var ke in Ie.states)if(!1===Ie.states[ke].ignore)return!0;return!1}(Ye)){var Fr,xi,Oi,Yr,Hn=(Ue.startAngle+Ue.endAngle)/2,lr=Math.cos(Hn),br=Math.sin(Hn);l=Ue.cx,c=Ue.cy;var ir="inside"===pt||"inner"===pt;if("center"===pt)Fr=Ue.cx,xi=Ue.cy,Yr="center";else{var Ci=(ir?(Ue.r+Ue.r0)/2*lr:Ue.r*lr)+l,vi=(ir?(Ue.r+Ue.r0)/2*br:Ue.r*br)+c;if(Fr=Ci+3*lr,xi=vi+3*br,!ir){var Ni=Ci+lr*(dn+m-Ue.r),ao=vi+br*(dn+m-Ue.r),vo=Ni+(lr<0?-1:1)*Fn;Fr="edge"===wt?lr<0?x+kt:x+y-kt:vo+(lr<0?-yt:yt),xi=ao,Oi=[[Ci,vi],[Ni,ao],[vo,ao]]}Yr=ir?"center":"edge"===wt?lr>0?"right":"left":lr>0?"left":"right"}var ba=Math.PI,Aa=0,vs=ut.get("rotate");if((0,b.isNumber)(vs))Aa=vs*(ba/180);else if("center"===pt)Aa=0;else if("radial"===vs||!0===vs)Aa=lr<0?-Hn+ba:-Hn;else if("tangential"===vs&&"outside"!==pt&&"outer"!==pt){var Zo=Math.atan2(lr,br);Zo<0&&(Zo=2*ba+Zo),br>0&&(Zo=ba+Zo),Aa=Zo-ba}if(h=!!Aa,Ye.x=Fr,Ye.y=xi,Ye.rotation=Aa,Ye.setStyle({verticalAlign:"middle"}),ir){Ye.setStyle({align:Yr});var K1=Ye.states.select;K1&&(K1.x+=Ye.x,K1.y+=Ye.y)}else{var tc=Ye.getBoundingRect().clone();tc.applyTransform(Ye.getComputedTransform());var $1=(Ye.style.margin||0)+2.1;tc.y-=$1/2,tc.height+=$1,a.push({label:Ye,labelLine:Ke,position:pt,len:dn,len2:Fn,minTurnAngle:jt.get("minTurnAngle"),maxSurfaceAngle:jt.get("maxSurfaceAngle"),surfaceNormal:new ea.Z(lr,br),linePoints:Oi,textAlign:Yr,labelDistance:yt,labelAlignTo:wt,edgeDistance:kt,bleedMargin:en,rect:tc,unconstrainedWidth:tc.width,labelStyleWidth:Ye.style.width})}ke.setTextConfig({inside:ir})}}),!h&&u.get("avoidLabelOverlap")&&function ze(u,o,a,l,c,h,f,g){for(var m=[],y=[],x=Number.MAX_VALUE,w=-Number.MAX_VALUE,D=0;D<u.length;D++){var I=u[D].label;et(u[D])||(I.x<o?(x=Math.min(x,I.x),m.push(u[D])):(w=Math.max(w,I.x),y.push(u[D])))}for(D=0;D<u.length;D++)if(!et(L=u[D])&&L.linePoints){if(null!=L.labelStyleWidth)continue;I=L.label;var Z,N=L.linePoints;L.targetTextWidth=Z="edge"===L.labelAlignTo?I.x<o?N[2][0]-L.labelDistance-f-L.edgeDistance:f+c-L.edgeDistance-N[2][0]-L.labelDistance:"labelLine"===L.labelAlignTo?I.x<o?x-f-L.bleedMargin:f+c-w-L.bleedMargin:I.x<o?I.x-f-L.bleedMargin:f+c-I.x-L.bleedMargin,Ze(L,Z)}for(Le(y,o,a,l,1,0,h,0,g,w),Le(m,o,a,l,-1,0,h,0,g,x),D=0;D<u.length;D++){var L;if(!et(L=u[D])&&L.linePoints){var _e=(I=L.label).style.padding,Pe=L.rect.width+(I.style.backgroundColor?0:_e?_e[1]+_e[3]:0),Ie=(N=L.linePoints)[1][0]-N[2][0];"edge"===L.labelAlignTo?N[2][0]=I.x<o?f+L.edgeDistance+Pe+L.labelDistance:f+c-L.edgeDistance-Pe-L.labelDistance:(N[2][0]=I.x<o?I.x+L.labelDistance:I.x-L.labelDistance,N[1][0]=N[2][0]+Ie),N[1][1]=N[2][1]=I.y}}}(a,l,c,m,y,D,x,w);for(var N=0;N<a.length;N++){var Z=a[N],se=Z.label,_e=Z.labelLine,me=isNaN(se.x)||isNaN(se.y);if(se){se.setStyle({align:Z.textAlign}),me&&((0,b.each)(se.states,I),se.ignore=!0);var De=se.states.select;De&&(De.x+=se.x,De.y+=se.y)}if(_e){var Pe=Z.linePoints;me||!Pe?((0,b.each)(_e.states,I),_e.ignore=!0):((0,co.qK)(Pe,Z.minTurnAngle),(0,co._A)(Pe,Z.surfaceNormal,Z.maxSurfaceAngle),_e.setShape({points:Pe}),se.__hostTarget.textGuideLineConfig={anchor:new ea.Z(Pe[0][0],Pe[0][1])})}}}(a),"expansion"!==a.get("animationTypeUpdate")&&(this._data=f)},o.prototype.dispose=function(){},o.prototype.containPoint=function(a,l){var h=l.getData().getItemLayout(0);if(h){var f=a[0]-h.cx,g=a[1]-h.cy,m=Math.sqrt(f*f+g*g);return m<=h.r&&m>=h.r0}},o.type="pie",o}(ia.Z);var ct=z(9178),xt=z(3241);function gt(u,o,a){o=(0,b.isArray)(o)&&{coordDimensions:o}||(0,b.extend)({encodeDefine:u.getEncode()},o);var l=u.getSource(),c=(0,ct.Z)(l,o).dimensions,h=new xt.Z(c,u);return h.initData(l,a),h}var Nt=z(6153);const vn=function(){function u(o,a){this._getDataWithEncodedVisual=o,this._getRawData=a}return u.prototype.getAllNames=function(){var o=this._getRawData();return o.mapArray(o.getName)},u.prototype.containName=function(o){return this._getRawData().indexOfName(o)>=0},u.prototype.indexOfName=function(o){return this._getDataWithEncodedVisual().indexOfName(o)},u.prototype.getItemVisual=function(o,a){return this._getDataWithEncodedVisual().getItemVisual(o,a)},u}(),Bn=function(u){function o(){return null!==u&&u.apply(this,arguments)||this}return(0,Tt.ZT)(o,u),o.prototype.init=function(a){u.prototype.init.apply(this,arguments),this.legendVisualProvider=new vn(b.bind(this.getData,this),b.bind(this.getRawData,this)),this._defaultLabelLine(a)},o.prototype.mergeOption=function(){u.prototype.mergeOption.apply(this,arguments)},o.prototype.getInitialData=function(){var a=gt(this,{coordDimensions:["value"],encodeDefaulter:b.curry(Nt.Ss,this)}),l=[];return a.each(a.mapDimension("value"),function(c){l.push(c)}),this.seats=(0,It.HD)(l,a.hostModel.get("percentPrecision")),a},o.prototype.getDataParams=function(a){var l=u.prototype.getDataParams.call(this,a);return l.percent=this.seats[a],l.$vars.push("percent"),l},o.prototype._defaultLabelLine=function(a){xn.Cc(a,"labelLine",["show"]);var l=a.labelLine,c=a.emphasis.labelLine;l.show=l.show&&a.label.show,c.show=c.show&&a.emphasis.label.show},o.type="series.pie",o.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},o}(Zi.Z),_r=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.hasSymbolVisual=!0,a}return(0,Tt.ZT)(o,u),o.prototype.getInitialData=function(a,l){return(0,$s.Z)(null,this,{useEncodeDefaulter:!0})},o.prototype.getProgressive=function(){return this.option.progressive??(this.option.large?5e3:this.get("progressive"))},o.prototype.getProgressiveThreshold=function(){return this.option.progressiveThreshold??(this.option.large?1e4:this.get("progressiveThreshold"))},o.prototype.brushSelector=function(a,l,c){return c.point(l.getItemLayout(a))},o.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},o.type="series.scatter",o.dependencies=["grid","polar","geo","singleAxis","calendar"],o.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},o}(Zi.Z);var yr=z(7021),Yi=function u(){},rs=function(u){function o(a){var l=u.call(this,a)||this;return l._off=0,l.hoverDataIdx=-1,l}return(0,Tt.ZT)(o,u),o.prototype.getDefaultShape=function(){return new Yi},o.prototype.reset=function(){this.notClear=!1,this._off=0},o.prototype.buildPath=function(a,l){var w,c=l.points,h=l.size,f=this.symbolProxy,g=f.shape,m=a.getContext?a.getContext():a,x=this.softClipShape;if(m&&h[0]<4)this._ctx=m;else{for(this._ctx=null,w=this._off;w<c.length;){var D=c[w++],I=c[w++];isNaN(D)||isNaN(I)||x&&!x.contain(D,I)||(g.x=D-h[0]/2,g.y=I-h[1]/2,g.width=h[0],g.height=h[1],f.buildPath(a,g,!0))}this.incremental&&(this._off=w,this.notClear=!0)}},o.prototype.afterBrush=function(){var g,a=this.shape,l=a.points,c=a.size,h=this._ctx,f=this.softClipShape;if(h){for(g=this._off;g<l.length;){var m=l[g++],y=l[g++];isNaN(m)||isNaN(y)||f&&!f.contain(m,y)||h.fillRect(m-c[0]/2,y-c[1]/2,c[0],c[1])}this.incremental&&(this._off=g,this.notClear=!0)}},o.prototype.findDataIndex=function(a,l){for(var c=this.shape,h=c.points,f=c.size,g=Math.max(f[0],4),m=Math.max(f[1],4),y=h.length/2-1;y>=0;y--){var x=2*y,w=h[x]-g/2,D=h[x+1]-m/2;if(a>=w&&l>=D&&a<=w+g&&l<=D+m)return y}return-1},o.prototype.contain=function(a,l){var c=this.transformCoordToLocal(a,l);return this.getBoundingRect().contain(a=c[0],l=c[1])?(this.hoverDataIdx=this.findDataIndex(a,l))>=0:(this.hoverDataIdx=-1,!1)},o.prototype.getBoundingRect=function(){var a=this._rect;if(!a){for(var l=this.shape,c=l.points,h=l.size,f=h[0],g=h[1],m=1/0,y=1/0,x=-1/0,w=-1/0,D=0;D<c.length;){var I=c[D++],L=c[D++];m=Math.min(I,m),x=Math.max(I,x),y=Math.min(L,y),w=Math.max(L,w)}a=this._rect=new yr.Z(m-f/2,y-g/2,x-m+f,w-y+g)}return a},o}(ve.ZP);const jf=function(){function u(){this.group=new Pn.Z}return u.prototype.updateData=function(o,a){this._clear();var l=this._create();l.setShape({points:o.getLayout("points")}),this._setCommon(l,o,a)},u.prototype.updateLayout=function(o){var a=o.getLayout("points");this.group.eachChild(function(l){null!=l.startIndex&&(a=new Float32Array(a.buffer,4*l.startIndex*2,2*(l.endIndex-l.startIndex))),l.setShape("points",a),l.reset()})},u.prototype.incrementalPrepareUpdate=function(o){this._clear()},u.prototype.incrementalUpdate=function(o,a,l){var c=this._newAdded[0],h=a.getLayout("points"),f=c&&c.shape.points;if(f&&f.length<2e4){var g=f.length,m=new Float32Array(g+h.length);m.set(f),m.set(h,g),c.endIndex=o.end,c.setShape({points:m})}else{this._newAdded=[];var y=this._create();y.startIndex=o.start,y.endIndex=o.end,y.incremental=!0,y.setShape({points:h}),this._setCommon(y,a,l)}},u.prototype.eachRendered=function(o){this._newAdded[0]&&o(this._newAdded[0])},u.prototype._create=function(){var o=new rs({cursor:"default"});return o.ignoreCoarsePointer=!0,this.group.add(o),this._newAdded.push(o),o},u.prototype._setCommon=function(o,a,l){var c=a.hostModel;l=l||{};var h=a.getVisual("symbolSize");o.setShape("size",h instanceof Array?h:[h,h]),o.softClipShape=l.clipShape||null,o.symbolProxy=(0,ai.th)(a.getVisual("symbol"),0,0,0,0),o.setColor=o.symbolProxy.setColor;var f=o.shape.size[0]<4;o.useStyle(c.getModel("itemStyle").getItemStyle(f?["color","shadowBlur","shadowColor"]:["color"]));var g=a.getVisual("style"),m=g&&g.fill;m&&o.setColor(m);var y=(0,Mr.A)(o);y.seriesIndex=c.seriesIndex,o.on("mousemove",function(x){y.dataIndex=null;var w=o.hoverDataIdx;w>=0&&(y.dataIndex=w+(o.startIndex||0))})},u.prototype.remove=function(){this._clear()},u.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},u}(),is=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c){var h=a.getData();this._updateSymbolDraw(h,a).updateData(h,{clipShape:this._getClipShape(a)}),this._finished=!0},o.prototype.incrementalPrepareRender=function(a,l,c){var h=a.getData();this._updateSymbolDraw(h,a).incrementalPrepareUpdate(h),this._finished=!1},o.prototype.incrementalRender=function(a,l,c){this._symbolDraw.incrementalUpdate(a,l.getData(),{clipShape:this._getClipShape(l)}),this._finished=a.end===l.getData().count()},o.prototype.updateTransform=function(a,l,c){var h=a.getData();if(this.group.dirty(),!this._finished||h.count()>1e4)return{update:!0};var f=ei("").reset(a,l,c);f.progress&&f.progress({start:0,end:h.count(),count:h.count()},h),this._symbolDraw.updateLayout(h)},o.prototype.eachRendered=function(a){this._symbolDraw&&this._symbolDraw.eachRendered(a)},o.prototype._getClipShape=function(a){var l=a.coordinateSystem,c=l&&l.getArea&&l.getArea();return a.get("clip",!0)?c:null},o.prototype._updateSymbolDraw=function(a,l){var c=this._symbolDraw,f=l.pipelineContext.large;return(!c||f!==this._isLargeDraw)&&(c&&c.remove(),c=this._symbolDraw=f?new jf:new rd,this._isLargeDraw=f,this.group.removeAll()),this.group.add(c.group),c},o.prototype.remove=function(a,l){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},o.prototype.dispose=function(){},o.type="scatter",o}(ia.Z);var ga=z(9899),ma=z(9447);const yg=function(u){function o(){return null!==u&&u.apply(this,arguments)||this}return(0,Tt.ZT)(o,u),o.type="grid",o.dependencies=["xAxis","yAxis"],o.layoutMode="box",o.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},o}(ma.Z);var Zf=z(2565),Yf=function(u){function o(){return null!==u&&u.apply(this,arguments)||this}return(0,Tt.ZT)(o,u),o.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",xn.C6).models[0]},o.type="cartesian2dAxis",o}(ma.Z);b.mixin(Yf,Zf.W);var Rs={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},o0=b.merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},Rs),s0=b.merge({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},Rs);const bP={category:o0,value:s0,time:b.merge({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},s0),log:b.defaults({logBase:10},s0)};var Ga=z(9567),xP={value:1,category:1,time:1,log:1};function Xf(u,o,a,l){(0,b.each)(xP,function(c,h){var f=(0,b.merge)((0,b.merge)({},bP[h],!0),l,!0),g=function(m){function y(){var x=null!==m&&m.apply(this,arguments)||this;return x.type=o+"Axis."+h,x}return(0,Tt.ZT)(y,m),y.prototype.mergeDefaultAndTheme=function(x,w){var D=(0,Vr.YD)(this),I=D?(0,Vr.tE)(x):{},L=w.getTheme();(0,b.merge)(x,L.get(h+"Axis")),(0,b.merge)(x,this.getDefaultOption()),x.type=$f(x),D&&(0,Vr.dt)(x,I,D)},y.prototype.optionUpdated=function(){"category"===this.option.type&&(this.__ordinalMeta=Ga.Z.createByAxisModel(this))},y.prototype.getCategories=function(x){var w=this.option;if("category"===w.type)return x?w.data:this.__ordinalMeta.categories},y.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},y.type=o+"Axis."+h,y.defaultOption=f,y}(a);u.registerComponentModel(g)}),u.registerSubTypeDefaulter(o+"Axis",$f)}function $f(u){return u.type||(u.data?"category":"value")}var ki=z(4174),CP=z(8540),yi=z(3481),Kn=z(8221),as=["x","y"];function Sw(u){return"interval"===u.type||"time"===u.type}const wP=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type="cartesian2d",a.dimensions=as,a}return(0,Tt.ZT)(o,u),o.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var a=this.getAxis("x").scale,l=this.getAxis("y").scale;if(Sw(a)&&Sw(l)){var c=a.getExtent(),h=l.getExtent(),f=this.dataToPoint([c[0],h[0]]),g=this.dataToPoint([c[1],h[1]]),m=c[1]-c[0],y=h[1]-h[0];if(m&&y){var x=(g[0]-f[0])/m,w=(g[1]-f[1])/y,L=this._transform=[x,0,0,w,f[0]-c[0]*x,f[1]-h[0]*w];this._invTransform=(0,yi.invert)([],L)}}},o.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},o.prototype.containPoint=function(a){var l=this.getAxis("x"),c=this.getAxis("y");return l.contain(l.toLocalCoord(a[0]))&&c.contain(c.toLocalCoord(a[1]))},o.prototype.containData=function(a){return this.getAxis("x").containData(a[0])&&this.getAxis("y").containData(a[1])},o.prototype.containZone=function(a,l){var c=this.dataToPoint(a),h=this.dataToPoint(l),f=this.getArea(),g=new yr.Z(c[0],c[1],h[0]-c[0],h[1]-c[1]);return f.intersect(g)},o.prototype.dataToPoint=function(a,l,c){c=c||[];var h=a[0],f=a[1];if(this._transform&&null!=h&&isFinite(h)&&null!=f&&isFinite(f))return(0,Kn.applyTransform)(c,a,this._transform);var g=this.getAxis("x"),m=this.getAxis("y");return c[0]=g.toGlobalCoord(g.dataToCoord(h,l)),c[1]=m.toGlobalCoord(m.dataToCoord(f,l)),c},o.prototype.clampData=function(a,l){var c=this.getAxis("x").scale,h=this.getAxis("y").scale,f=c.getExtent(),g=h.getExtent(),m=c.parse(a[0]),y=h.parse(a[1]);return(l=l||[])[0]=Math.min(Math.max(Math.min(f[0],f[1]),m),Math.max(f[0],f[1])),l[1]=Math.min(Math.max(Math.min(g[0],g[1]),y),Math.max(g[0],g[1])),l},o.prototype.pointToData=function(a,l){var c=[];if(this._invTransform)return(0,Kn.applyTransform)(c,a,this._invTransform);var h=this.getAxis("x"),f=this.getAxis("y");return c[0]=h.coordToData(h.toLocalCoord(a[0]),l),c[1]=f.coordToData(f.toLocalCoord(a[1]),l),c},o.prototype.getOtherAxis=function(a){return this.getAxis("x"===a.dim?"y":"x")},o.prototype.getArea=function(){var a=this.getAxis("x").getGlobalExtent(),l=this.getAxis("y").getGlobalExtent(),c=Math.min(a[0],a[1]),h=Math.min(l[0],l[1]),f=Math.max(a[0],a[1])-c,g=Math.max(l[0],l[1])-h;return new yr.Z(c,h,f,g)},o}(CP.Z);var fo=z(6592);const u0=function(u){function o(a,l,c,h,f){var g=u.call(this,a,l,c)||this;return g.index=0,g.type=h||"value",g.position=f||"bottom",g}return(0,Tt.ZT)(o,u),o.prototype.isHorizontal=function(){var a=this.position;return"top"===a||"bottom"===a},o.prototype.getGlobalExtent=function(a){var l=this.getExtent();return l[0]=this.toGlobalCoord(l[0]),l[1]=this.toGlobalCoord(l[1]),a&&l[0]>l[1]&&l.reverse(),l},o.prototype.pointToData=function(a,l){return this.coordToData(this.toLocalCoord(a["x"===this.dim?0:1]),l)},o.prototype.setCategorySortInfo=function(a){if("category"!==this.type)return!1;this.model.option.categorySortInfo=a,this.scale.setSortInfo(a)},o}(fo.Z);function Or(u,o,a){a=a||{};var l=u.coordinateSystem,c=o.axis,h={},f=c.getAxesOnZeroOf()[0],g=c.position,m=f?"onZero":g,y=c.dim,x=l.getRect(),w=[x.x,x.x+x.width,x.y,x.y+x.height],D={left:0,right:1,top:0,bottom:1,onZero:2},I=o.get("offset")||0,L="x"===y?[w[2]-I,w[3]+I]:[w[0]-I,w[1]+I];if(f){var N=f.toGlobalCoord(f.dataToCoord(0));L[D.onZero]=Math.max(Math.min(N,L[1]),L[0])}h.position=["y"===y?L[D[m]]:w[0],"x"===y?L[D[m]]:w[3]],h.rotation=Math.PI/2*("x"===y?0:1),h.labelDirection=h.tickDirection=h.nameDirection={top:-1,bottom:1,left:-1,right:1}[g],h.labelOffset=f?L[D[g]]-L[D.onZero]:0,o.get(["axisTick","inside"])&&(h.tickDirection=-h.tickDirection),b.retrieve(a.labelInside,o.get(["axisLabel","inside"]))&&(h.labelDirection=-h.labelDirection);var se=o.get(["axisLabel","rotate"]);return h.labelRotate="top"===m?-se:se,h.z2=1,h}function c0(u){return"cartesian2d"===u.get("coordinateSystem")}function SP(u){var o={xAxisModel:null,yAxisModel:null};return b.each(o,function(a,l){var c=l.replace(/Model$/,""),h=u.getReferringComponents(c,xn.C6).models[0];o[l]=h}),o}var ph=z(7331),xg=z(5543),d0=Math.log;function h0(u,o,a){var l=xg.Z.prototype,c=l.getTicks.call(a),h=l.getTicks.call(a,!0),f=c.length-1,g=l.getInterval.call(a),m=(0,ki.Xv)(u,o),y=m.extent,x=m.fixMin,w=m.fixMax;if("log"===u.type){var D=d0(u.base);y=[d0(y[0])/D,d0(y[1])/D]}u.setExtent(y[0],y[1]),u.calcNiceExtent({splitNumber:f,fixMin:x,fixMax:w});var I=l.getExtent.call(u);x&&(y[0]=I[0]),w&&(y[1]=I[1]);var L=l.getInterval.call(u),N=y[0],Z=y[1];if(x&&w)L=(Z-N)/f;else if(x)for(Z=y[0]+L*f;Z<y[1]&&isFinite(Z)&&isFinite(y[1]);)L=(0,ph.r1)(L),Z=y[0]+L*f;else if(w)for(N=y[1]-L*f;N>y[0]&&isFinite(N)&&isFinite(y[0]);)L=(0,ph.r1)(L),N=y[1]-L*f;else{u.getTicks().length-1>f&&(L=(0,ph.r1)(L));var _e=L*f;Z=Math.ceil(y[1]/L)*L,(N=(0,It.NM)(Z-_e))<0&&y[0]>=0?(N=0,Z=(0,It.NM)(_e)):Z>0&&y[1]<=0&&(Z=0,N=-(0,It.NM)(_e))}var me=(c[0].value-h[0].value)/g,De=(c[f].value-h[f].value)/g;l.setExtent.call(u,N+L*me,Z+L*De),l.setInterval.call(u,L),(me||De)&&l.setNiceExtent.call(u,N+L,Z-L)}function f0(u,o){return u.getCoordSysModel()===o}function cn(u,o,a,l){a.getAxesOnZeroOf=function(){return h?[h]:[]};var h,c=u[o],f=a.model,g=f.get(["axisLine","onZero"]),m=f.get(["axisLine","onZeroAxisIndex"]);if(g){if(null!=m)fi(c[m])&&(h=c[m]);else for(var y in c)if(c.hasOwnProperty(y)&&fi(c[y])&&!l[x(c[y])]){h=c[y];break}h&&(l[x(h)]=!0)}function x(w){return w.dim+"_"+w.index}}function fi(u){return u&&"category"!==u.type&&"time"!==u.type&&(0,ki.Yb)(u)}const Er=function(){function u(o,a,l){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=as,this._initCartesian(o,a,l),this.model=o}return u.prototype.getRect=function(){return this._rect},u.prototype.update=function(o,a){var l=this._axesMap;function c(f){var g,m=(0,b.keys)(f),y=m.length;if(y){for(var x=[],w=y-1;w>=0;w--){var I=f[+m[w]],L=I.model,N=I.scale;(0,ph.lM)(N)&&L.get("alignTicks")&&null==L.get("interval")?x.push(I):((0,ki.Jk)(N,L),(0,ph.lM)(N)&&(g=I))}x.length&&(g||(g=x.pop(),(0,ki.Jk)(g.scale,g.model)),(0,b.each)(x,function(Z){h0(Z.scale,Z.model,g.scale)}))}}this._updateScale(o,this.model),c(l.x),c(l.y);var h={};(0,b.each)(l.x,function(f){cn(l,"y",f,h)}),(0,b.each)(l.y,function(f){cn(l,"x",f,h)}),this.resize(this.model,a)},u.prototype.resize=function(o,a,l){var c=o.getBoxLayoutParams(),h=!l&&o.get("containLabel"),f=(0,Vr.ME)(c,{width:a.getWidth(),height:a.getHeight()});this._rect=f;var g=this._axesList;function m(){(0,b.each)(g,function(y){var x=y.isHorizontal(),w=x?[0,f.width]:[0,f.height],D=y.inverse?1:0;y.setExtent(w[D],w[1-D]),function Tr(u,o){var a=u.getExtent(),l=a[0]+a[1];u.toGlobalCoord="x"===u.dim?function(c){return c+o}:function(c){return l-c+o},u.toLocalCoord="x"===u.dim?function(c){return c-o}:function(c){return l-c+o}}(y,x?f.x:f.y)})}m(),h&&((0,b.each)(g,function(y){if(!y.model.get(["axisLabel","inside"])){var x=(0,ki.Do)(y);if(x){var w=y.isHorizontal()?"height":"width",D=y.model.get(["axisLabel","margin"]);f[w]-=x[w]+D,"top"===y.position?f.y+=x.height+D:"left"===y.position&&(f.x+=x.width+D)}}}),m()),(0,b.each)(this._coordsList,function(y){y.calcAffineTransform()})},u.prototype.getAxis=function(o,a){var l=this._axesMap[o];if(null!=l)return l[a||0]},u.prototype.getAxes=function(){return this._axesList.slice()},u.prototype.getCartesian=function(o,a){if(null!=o&&null!=a)return this._coordsMap["x"+o+"y"+a];(0,b.isObject)(o)&&(a=o.yAxisIndex,o=o.xAxisIndex);for(var c=0,h=this._coordsList;c<h.length;c++)if(h[c].getAxis("x").index===o||h[c].getAxis("y").index===a)return h[c]},u.prototype.getCartesians=function(){return this._coordsList.slice()},u.prototype.convertToPixel=function(o,a,l){var c=this._findConvertTarget(a);return c.cartesian?c.cartesian.dataToPoint(l):c.axis?c.axis.toGlobalCoord(c.axis.dataToCoord(l)):null},u.prototype.convertFromPixel=function(o,a,l){var c=this._findConvertTarget(a);return c.cartesian?c.cartesian.pointToData(l):c.axis?c.axis.coordToData(c.axis.toLocalCoord(l)):null},u.prototype._findConvertTarget=function(o){var g,m,a=o.seriesModel,l=o.xAxisModel||a&&a.getReferringComponents("xAxis",xn.C6).models[0],c=o.yAxisModel||a&&a.getReferringComponents("yAxis",xn.C6).models[0],h=o.gridModel;return a?(0,b.indexOf)(this._coordsList,g=a.coordinateSystem)<0&&(g=null):l&&c?g=this.getCartesian(l.componentIndex,c.componentIndex):l?m=this.getAxis("x",l.componentIndex):c?m=this.getAxis("y",c.componentIndex):h&&h.coordinateSystem===this&&(g=this._coordsList[0]),{cartesian:g,axis:m}},u.prototype.containPoint=function(o){var a=this._coordsList[0];if(a)return a.containPoint(o)},u.prototype._initCartesian=function(o,a,l){var c=this,h=this,f={left:!1,right:!1,top:!1,bottom:!1},g={x:{},y:{}},m={x:0,y:0};if(a.eachComponent("xAxis",y("x"),this),a.eachComponent("yAxis",y("y"),this),!m.x||!m.y)return this._axesMap={},void(this._axesList=[]);function y(x){return function(w,D){if(f0(w,o)){var I=w.get("position");"x"===x?"top"!==I&&"bottom"!==I&&(I=f.bottom?"top":"bottom"):"left"!==I&&"right"!==I&&(I=f.left?"right":"left"),f[I]=!0;var L=new u0(x,(0,ki.aG)(w),[0,0],w.get("type"),I);L.onBand="category"===L.type&&w.get("boundaryGap"),L.inverse=w.get("inverse"),w.axis=L,L.model=w,L.grid=h,L.index=D,h._axesList.push(L),g[x][D]=L,m[x]++}}}this._axesMap=g,(0,b.each)(g.x,function(x,w){(0,b.each)(g.y,function(D,I){var L="x"+w+"y"+I,N=new wP(L);N.master=c,N.model=o,c._coordsMap[L]=N,c._coordsList.push(N),N.addAxis(x),N.addAxis(D)})})},u.prototype._updateScale=function(o,a){function l(c,h){(0,b.each)((0,ki.PY)(c,h.dim),function(f){h.scale.unionExtentFromData(c,f)})}(0,b.each)(this._axesList,function(c){if(c.scale.setExtent(1/0,-1/0),"category"===c.type){var h=c.model.get("categorySortInfo");c.scale.setSortInfo(h)}}),o.eachSeries(function(c){if(c0(c)){var h=SP(c),f=h.xAxisModel,g=h.yAxisModel;if(!f0(f,a)||!f0(g,a))return;var m=this.getCartesian(f.componentIndex,g.componentIndex),y=c.getData(),x=m.getAxis("x"),w=m.getAxis("y");l(y,x),l(y,w)}},this)},u.prototype.getTooltipAxes=function(o){var a=[],l=[];return(0,b.each)(this.getCartesians(),function(c){var h=null!=o&&"auto"!==o?c.getAxis(o):c.getBaseAxis(),f=c.getOtherAxis(h);(0,b.indexOf)(a,h)<0&&a.push(h),(0,b.indexOf)(l,f)<0&&l.push(f)}),{baseAxes:a,otherAxes:l}},u.create=function(o,a){var l=[];return o.eachComponent("grid",function(c,h){var f=new u(c,o,a);f.name="grid_"+h,f.resize(c,a,!0),c.coordinateSystem=f,l.push(f)}),o.eachSeries(function(c){if(c0(c)){var h=SP(c),f=h.xAxisModel,g=h.yAxisModel,m=f.getCoordSysModel();c.coordinateSystem=m.coordinateSystem.getCartesian(f.componentIndex,g.componentIndex)}}),l},u.dimensions=as,u}();var Ei=z(4110),ka=z(1725),Js=Math.PI,Wo=function(){function u(o,a){this.group=new Pn.Z,this.opt=a,this.axisModel=o,(0,b.defaults)(a,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var l=new Pn.Z({x:a.position[0],y:a.position[1],rotation:a.rotation});l.updateTransform(),this._transformGroup=l}return u.prototype.hasBuilder=function(o){return!!Cg[o]},u.prototype.add=function(o){Cg[o](this.opt,this.axisModel,this.group,this._transformGroup)},u.prototype.getGroup=function(){return this.group},u.innerTextLayout=function(o,a,l){var h,f,c=(0,It.wW)(a-o);return(0,It.mW)(c)?(f=l>0?"top":"bottom",h="center"):(0,It.mW)(c-Js)?(f=l>0?"bottom":"top",h="center"):(f="middle",h=c>0&&c<Js?l>0?"right":"left":l>0?"left":"right"),{rotation:c,textAlign:h,textVerticalAlign:f}},u.makeAxisEventDataBase=function(o){var a={componentType:o.mainType,componentIndex:o.componentIndex};return a[o.mainType+"Index"]=o.componentIndex,a},u.isLabelSilent=function(o){var a=o.get("tooltip");return o.get("silent")||!(o.get("triggerEvent")||a&&a.show)},u}(),Cg={axisLine:function(u,o,a,l){var c=o.get(["axisLine","show"]);if("auto"===c&&u.handleAutoShown&&(c=u.handleAutoShown("axisLine")),c){var h=o.axis.getExtent(),f=l.transform,g=[h[0],0],m=[h[1],0],y=g[0]>m[0];f&&((0,Kn.applyTransform)(g,g,f),(0,Kn.applyTransform)(m,m,f));var x=(0,b.extend)({lineCap:"round"},o.getModel(["axisLine","lineStyle"]).getLineStyle()),w=new Ei.Z({shape:{x1:g[0],y1:g[1],x2:m[0],y2:m[1]},style:x,strokeContainThreshold:u.strokeContainThreshold||5,silent:!0,z2:1});_n.subPixelOptimizeLine(w.shape,w.style.lineWidth),w.anid="line",a.add(w);var D=o.get(["axisLine","symbol"]);if(null!=D){var I=o.get(["axisLine","symbolSize"]);(0,b.isString)(D)&&(D=[D,D]),((0,b.isString)(I)||(0,b.isNumber)(I))&&(I=[I,I]);var L=(0,ai.Cq)(o.get(["axisLine","symbolOffset"])||0,I),N=I[0],Z=I[1];(0,b.each)([{rotate:u.rotation+Math.PI/2,offset:L[0],r:0},{rotate:u.rotation-Math.PI/2,offset:L[1],r:Math.sqrt((g[0]-m[0])*(g[0]-m[0])+(g[1]-m[1])*(g[1]-m[1]))}],function(se,_e){if("none"!==D[_e]&&null!=D[_e]){var me=(0,ai.th)(D[_e],-N/2,-Z/2,N,Z,x.stroke,!0),De=se.r+se.offset,Pe=y?m:g;me.attr({rotation:se.rotate,x:Pe[0]+De*Math.cos(u.rotation),y:Pe[1]-De*Math.sin(u.rotation),silent:!0,z2:11}),a.add(me)}})}}},axisTickLabel:function(u,o,a,l){var c=function zu(u,o,a,l){var c=a.axis,h=a.getModel("axisTick"),f=h.get("show");if("auto"===f&&l.handleAutoShown&&(f=l.handleAutoShown("axisTick")),f&&!c.scale.isBlank()){for(var g=h.getModel("lineStyle"),m=l.tickDirection*h.get("length"),x=jo(c.getTicksCoords(),o.transform,m,(0,b.defaults)(g.getLineStyle(),{stroke:a.get(["axisLine","lineStyle","color"])}),"ticks"),w=0;w<x.length;w++)u.add(x[w]);return x}}(a,l,o,u),h=function vh(u,o,a,l){var c=a.axis;if((0,b.retrieve)(l.axisLabelShow,a.get(["axisLabel","show"]))&&!c.scale.isBlank()){var f=a.getModel("axisLabel"),g=f.get("margin"),m=c.getViewLabels(),y=((0,b.retrieve)(l.labelRotate,f.get("rotate"))||0)*Js/180,x=Wo.innerTextLayout(l.rotation,y,l.labelDirection),w=a.getCategories&&a.getCategories(!0),D=[],I=Wo.isLabelSilent(a),L=a.get("triggerEvent");return(0,b.each)(m,function(N,Z){var se="ordinal"===c.scale.type?c.scale.getRawOrdinalNumber(N.tickValue):N.tickValue,_e=N.formattedLabel,me=N.rawLabel,De=f;if(w&&w[se]){var Pe=w[se];(0,b.isObject)(Pe)&&Pe.textStyle&&(De=new ka.Z(Pe.textStyle,f,a.ecModel))}var Ie=De.getTextColor()||a.get(["axisLine","lineStyle","color"]),ke=c.dataToCoord(se),Ue=new _t.ZP({x:ke,y:l.labelOffset+l.labelDirection*g,rotation:x.rotation,silent:I,z2:10+(N.level||0),style:(0,qt.Lr)(De,{text:_e,align:De.getShallow("align",!0)||x.textAlign,verticalAlign:De.getShallow("verticalAlign",!0)||De.getShallow("baseline",!0)||x.textVerticalAlign,fill:(0,b.isFunction)(Ie)?Ie("category"===c.type?me:"value"===c.type?se+"":se,Z):Ie})});if(Ue.anid="label_"+se,L){var Ye=Wo.makeAxisEventDataBase(a);Ye.targetType="axisLabel",Ye.value=me,Ye.tickIndex=Z,"category"===c.type&&(Ye.dataIndex=se),(0,Mr.A)(Ue).eventData=Ye}o.add(Ue),Ue.updateTransform(),D.push(Ue),u.add(Ue),Ue.decomposeTransform()}),D}}(a,l,o,u);if(function VV(u,o,a){if(!(0,ki.WY)(u.axis)){var l=u.get(["axisLabel","showMinLabel"]),c=u.get(["axisLabel","showMaxLabel"]),h=(o=o||[])[0],f=o[1],g=o[o.length-1],m=o[o.length-2],y=(a=a||[])[0],x=a[1],w=a[a.length-1],D=a[a.length-2];!1===l?(el(h),el(y)):MP(h,f)&&(l?(el(f),el(x)):(el(h),el(y))),!1===c?(el(g),el(w)):MP(m,g)&&(c?(el(m),el(D)):(el(g),el(w)))}}(o,h,c),function Mw(u,o,a,l){var c=a.axis,h=a.getModel("minorTick");if(h.get("show")&&!c.scale.isBlank()){var f=c.getMinorTicksCoords();if(f.length)for(var g=h.getModel("lineStyle"),m=l*h.get("length"),y=(0,b.defaults)(g.getLineStyle(),(0,b.defaults)(a.getModel("axisTick").getLineStyle(),{stroke:a.get(["axisLine","lineStyle","color"])})),x=0;x<f.length;x++)for(var w=jo(f[x],o.transform,m,y,"minorticks_"+x),D=0;D<w.length;D++)u.add(w[D])}}(a,l,o,u.tickDirection),o.get(["axisLabel","hideOverlap"])){var f=(0,Ne.VT)((0,b.map)(h,function(g){return{label:g,priority:g.z2,defaultAttr:{ignore:g.ignore}}}));(0,Ne.yl)(f)}},axisName:function(u,o,a,l){var c=(0,b.retrieve)(u.axisName,o.get("name"));if(c){var D,L,h=o.get("nameLocation"),f=u.nameDirection,g=o.getModel("nameTextStyle"),m=o.get("nameGap")||0,y=o.axis.getExtent(),x=y[0]>y[1]?-1:1,w=["start"===h?y[0]-x*m:"end"===h?y[1]+x*m:(y[0]+y[1])/2,v0(h)?u.labelOffset+f*m:0],I=o.get("nameRotate");null!=I&&(I=I*Js/180),v0(h)?D=Wo.innerTextLayout(u.rotation,I??u.rotation,f):(D=function p0(u,o,a,l){var h,f,c=(0,It.wW)(a-u),g=l[0]>l[1],m="start"===o&&!g||"start"!==o&&g;return(0,It.mW)(c-Js/2)?(f=m?"bottom":"top",h="center"):(0,It.mW)(c-1.5*Js)?(f=m?"top":"bottom",h="center"):(f="middle",h=c<1.5*Js&&c>Js/2?m?"left":"right":m?"right":"left"),{rotation:c,textAlign:h,textVerticalAlign:f}}(u.rotation,h,I||0,y),null!=(L=u.axisNameAvailableWidth)&&(L=Math.abs(L/Math.sin(D.rotation)),!isFinite(L)&&(L=null)));var N=g.getFont(),Z=o.get("nameTruncate",!0)||{},se=Z.ellipsis,_e=(0,b.retrieve)(u.nameTruncateMaxWidth,Z.maxWidth,L),me=new _t.ZP({x:w[0],y:w[1],rotation:D.rotation,silent:Wo.isLabelSilent(o),style:(0,qt.Lr)(g,{text:c,font:N,overflow:"truncate",width:_e,ellipsis:se,fill:g.getTextColor()||o.get(["axisLine","lineStyle","color"]),align:g.get("align")||D.textAlign,verticalAlign:g.get("verticalAlign")||D.textVerticalAlign}),z2:1});if(_n.setTooltipConfig({el:me,componentModel:o,itemName:c}),me.__fullText=c,me.anid="name",o.get("triggerEvent")){var De=Wo.makeAxisEventDataBase(o);De.targetType="axisName",De.name=c,(0,Mr.A)(me).eventData=De}l.add(me),me.updateTransform(),a.add(me),me.decomposeTransform()}}};function el(u){u&&(u.ignore=!0)}function MP(u,o){var a=u&&u.getBoundingRect().clone(),l=o&&o.getBoundingRect().clone();if(a&&l){var c=yi.identity([]);return yi.rotate(c,c,-u.rotation),a.applyTransform(yi.mul([],c,u.getLocalTransform())),l.applyTransform(yi.mul([],c,o.getLocalTransform())),a.intersect(l)}}function v0(u){return"middle"===u||"center"===u}function jo(u,o,a,l,c){for(var h=[],f=[],g=[],m=0;m<u.length;m++){var y=u[m].coord;f[0]=y,f[1]=0,g[0]=y,g[1]=a,o&&((0,Kn.applyTransform)(f,f,o),(0,Kn.applyTransform)(g,g,o));var x=new Ei.Z({shape:{x1:f[0],y1:f[1],x2:g[0],y2:g[1]},style:l,z2:2,autoBatch:!0,silent:!0});_n.subPixelOptimizeLine(x.shape,x.style.lineWidth),x.anid=c+"_"+u[m].tickValue,h.push(x)}return h}const Eo=Wo;function Kf(u,o){return"all"===u||(0,b.isArray)(u)&&(0,b.indexOf)(u,o)>=0||u===o}function Ew(u){var o=Qf(u);if(o){var a=o.axisPointerModel,l=o.axis.scale,c=a.option,h=a.get("status"),f=a.get("value");null!=f&&(f=l.parse(f));var g=wg(a);null==h&&(c.status=g?"show":"hide");var m=l.getExtent().slice();m[0]>m[1]&&m.reverse(),(null==f||f>m[1])&&(f=m[1]),f<m[0]&&(f=m[0]),c.value=f,g&&(c.status=o.axis.scale.isBlank()?"hide":"show")}}function Qf(u){var o=(u.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return o&&o.axesInfo[ld(u)]}function wg(u){return!!u.get(["handle","show"])}function ld(u){return u.type+"||"+u.id}var m0={};const _c=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c,h){this.axisPointerClass&&Ew(a),u.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(a,c,!0)},o.prototype.updateAxisPointer=function(a,l,c,h){this._doUpdateAxisPointerClass(a,c,!1)},o.prototype.remove=function(a,l){var c=this._axisPointer;c&&c.remove(l)},o.prototype.dispose=function(a,l){this._disposeAxisPointer(l),u.prototype.dispose.apply(this,arguments)},o.prototype._doUpdateAxisPointerClass=function(a,l,c){var h=o.getAxisPointerClass(this.axisPointerClass);if(h){var f=function IP(u){var o=Qf(u);return o&&o.axisPointerModel}(a);f?(this._axisPointer||(this._axisPointer=new h)).render(a,f,l,c):this._disposeAxisPointer(l)}},o.prototype._disposeAxisPointer=function(a){this._axisPointer&&this._axisPointer.dispose(a),this._axisPointer=null},o.registerAxisPointerClass=function(a,l){m0[a]=l},o.getAxisPointerClass=function(a){return a&&m0[a]},o.type="axis",o}(ga.Z);var Sg=(0,xn.Yf)();function Dg(u,o,a,l){var c=a.axis;if(!c.scale.isBlank()){var h=a.getModel("splitArea"),f=h.getModel("areaStyle"),g=f.get("color"),m=l.coordinateSystem.getRect(),y=c.getTicksCoords({tickModel:h,clamp:!0});if(y.length){var x=g.length,w=Sg(u).splitAreaColors,D=b.createHashMap(),I=0;if(w)for(var L=0;L<y.length;L++){var N=w.get(y[L].tickValue);if(null!=N){I=(N+(x-1)*L)%x;break}}var Z=c.toGlobalCoord(y[0].coord),se=f.getAreaStyle();for(g=b.isArray(g)?g:[g],L=1;L<y.length;L++){var _e=c.toGlobalCoord(y[L].coord),me=void 0,De=void 0,Pe=void 0,Ie=void 0;c.isHorizontal()?(De=m.y,Ie=m.height,Z=(me=Z)+(Pe=_e-me)):(me=m.x,Pe=m.width,Z=(De=Z)+(Ie=_e-De));var ke=y[L-1].tickValue;null!=ke&&D.set(ke,I),o.add(new Di.Z({anid:null!=ke?"area_"+ke:null,shape:{x:me,y:De,width:Pe,height:Ie},style:b.defaults({fill:g[I]},se),autoBatch:!0,silent:!0})),I=(I+1)%x}Sg(u).splitAreaColors=D}}}function Iw(u){Sg(u).splitAreaColors=null}var PP=["axisLine","axisTickLabel","axisName"],os=["splitArea","splitLine","minorSplitLine"],Hu=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.axisPointerClass="CartesianAxisPointer",a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c,h){this.group.removeAll();var f=this._axisGroup;if(this._axisGroup=new Pn.Z,this.group.add(this._axisGroup),a.get("show")){var g=a.getCoordSysModel(),m=Or(g,a),y=new Eo(a,b.extend({handleAutoShown:function(w){for(var D=g.coordinateSystem.getCartesians(),I=0;I<D.length;I++)if((0,ph.lM)(D[I].getOtherAxis(a.axis).scale))return!0;return!1}},m));b.each(PP,y.add,y),this._axisGroup.add(y.getGroup()),b.each(os,function(w){a.get([w,"show"])&&Ta[w](this,this._axisGroup,a,g)},this),h&&"changeAxisOrder"===h.type&&h.isInitSort||_n.groupTransition(f,this._axisGroup,a),u.prototype.render.call(this,a,l,c,h)}},o.prototype.remove=function(){Iw(this)},o.type="cartesianAxis",o}(_c),Ta={splitLine:function(u,o,a,l){var c=a.axis;if(!c.scale.isBlank()){var h=a.getModel("splitLine"),f=h.getModel("lineStyle"),g=f.get("color");g=b.isArray(g)?g:[g];for(var m=l.coordinateSystem.getRect(),y=c.isHorizontal(),x=0,w=c.getTicksCoords({tickModel:h}),D=[],I=[],L=f.getLineStyle(),N=0;N<w.length;N++){var Z=c.toGlobalCoord(w[N].coord);y?(D[0]=Z,D[1]=m.y,I[0]=Z,I[1]=m.y+m.height):(D[0]=m.x,D[1]=Z,I[0]=m.x+m.width,I[1]=Z);var se=x++%g.length,me=new Ei.Z({anid:null!=w[N].tickValue?"line_"+w[N].tickValue:null,autoBatch:!0,shape:{x1:D[0],y1:D[1],x2:I[0],y2:I[1]},style:b.defaults({stroke:g[se]},L),silent:!0});_n.subPixelOptimizeLine(me.shape,L.lineWidth),o.add(me)}}},minorSplitLine:function(u,o,a,l){var c=a.axis,f=a.getModel("minorSplitLine").getModel("lineStyle"),g=l.coordinateSystem.getRect(),m=c.isHorizontal(),y=c.getMinorTicksCoords();if(y.length)for(var x=[],w=[],D=f.getLineStyle(),I=0;I<y.length;I++)for(var L=0;L<y[I].length;L++){var N=c.toGlobalCoord(y[I][L].coord);m?(x[0]=N,x[1]=g.y,w[0]=N,w[1]=g.y+g.height):(x[0]=g.x,x[1]=N,w[0]=g.x+g.width,w[1]=N);var Z=new Ei.Z({anid:"minor_line_"+y[I][L].tickValue,autoBatch:!0,shape:{x1:x[0],y1:x[1],x2:w[0],y2:w[1]},style:D,silent:!0});_n.subPixelOptimizeLine(Z.shape,D.lineWidth),o.add(Z)}},splitArea:function(u,o,a,l){Dg(u,o,a,l)}},qf=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.type="xAxis",o}(Hu),RP=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=qf.type,a}return(0,Tt.ZT)(o,u),o.type="yAxis",o}(Hu),LP=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type="grid",a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l){this.group.removeAll(),a.get("show")&&this.group.add(new Di.Z({shape:a.coordinateSystem.getRect(),style:(0,b.defaults)({fill:a.get("backgroundColor")},a.getItemStyle()),silent:!0,z2:-1}))},o.type="grid",o}(ga.Z),Pw={offset:0};function Rw(u){u.registerComponentView(LP),u.registerComponentModel(yg),u.registerCoordinateSystem("cartesian2d",Er),Xf(u,"x",Yf,Pw),Xf(u,"y",Yf,Pw),u.registerComponentView(qf),u.registerComponentView(RP),u.registerPreprocessor(function(o){o.xAxis&&o.yAxis&&!o.grid&&(o.grid={})})}function Tg(u){u.eachSeriesByType("radar",function(o){var a=o.getData(),l=[],c=o.coordinateSystem;if(c){var h=c.getIndicatorAxes();b.each(h,function(f,g){a.each(a.mapDimension(h[g].dim),function(m,y){l[y]=l[y]||[];var x=c.dataToPoint(m,g);l[y][g]=Jf(x)?x:Eg(c)})}),a.each(function(f){var g=b.find(l[f],function(m){return Jf(m)})||Eg(c);l[f].push(g.slice()),a.setItemLayout(f,l[f])})}})}function Jf(u){return!isNaN(u[0])&&!isNaN(u[1])}function Eg(u){return[u.cx,u.cy]}function Lw(u){var o=u.polar;if(o){b.isArray(o)||(o=[o]);var a=[];b.each(o,function(l,c){l.indicator?(l.type&&!l.shape&&(l.shape=l.type),u.radar=u.radar||[],b.isArray(u.radar)||(u.radar=[u.radar]),u.radar.push(l)):a.push(l)}),u.polar=a}b.each(u.series,function(l){l&&"radar"===l.type&&l.polarIndex&&(l.radarIndex=l.polarIndex)})}var tl=z(3186);const ep=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c){var h=a.coordinateSystem,f=this.group,g=a.getData(),m=this._data;function y(D,I){var L=D.getItemVisual(I,"symbol")||"circle";if("none"!==L){var N=ai.zp(D.getItemVisual(I,"symbolSize")),Z=ai.th(L,-1,-1,2,2),se=D.getItemVisual(I,"symbolRotate")||0;return Z.attr({style:{strokeNoScale:!0},z2:100,scaleX:N[0]/2,scaleY:N[1]/2,rotation:se*Math.PI/180||0}),Z}}function x(D,I,L,N,Z,se){L.removeAll();for(var _e=0;_e<I.length-1;_e++){var me=y(N,Z);me&&(me.__dimIdx=_e,D[_e]?(me.setPosition(D[_e]),_n[se?"initProps":"updateProps"](me,{x:I[_e][0],y:I[_e][1]},a,Z)):me.setPosition(I[_e]),L.add(me))}}function w(D){return b.map(D,function(I){return[h.cx,h.cy]})}g.diff(m).add(function(D){var I=g.getItemLayout(D);if(I){var L=new tl.Z,N=new Ps.Z,Z={shape:{points:I}};L.shape.points=w(I),N.shape.points=w(I),wn.KZ(L,Z,a,D),wn.KZ(N,Z,a,D);var se=new Pn.Z,_e=new Pn.Z;se.add(N),se.add(L),se.add(_e),x(N.shape.points,I,_e,g,D,!0),g.setItemGraphicEl(D,se)}}).update(function(D,I){var L=m.getItemGraphicEl(I),N=L.childAt(0),Z=L.childAt(1),se=L.childAt(2),_e={shape:{points:g.getItemLayout(D)}};!_e.shape.points||(x(N.shape.points,_e.shape.points,se,g,D,!1),(0,wn.Zi)(Z),(0,wn.Zi)(N),wn.D(N,_e,a),wn.D(Z,_e,a),g.setItemGraphicEl(D,L))}).remove(function(D){f.remove(m.getItemGraphicEl(D))}).execute(),g.eachItemGraphicEl(function(D,I){var L=g.getItemModel(I),N=D.childAt(0),Z=D.childAt(1),se=D.childAt(2),_e=g.getItemVisual(I,"style"),me=_e.fill;f.add(D),N.useStyle(b.defaults(L.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:me})),(0,Ut.WO)(N,L,"lineStyle"),(0,Ut.WO)(Z,L,"areaStyle");var De=L.getModel("areaStyle"),Pe=De.isEmpty()&&De.parentModel.isEmpty();Z.ignore=Pe,b.each(["emphasis","select","blur"],function(Ue){var Ye=L.getModel([Ue,"areaStyle"]),Ke=Ye.isEmpty()&&Ye.parentModel.isEmpty();Z.ensureState(Ue).ignore=Ke&&Pe}),Z.useStyle(b.defaults(De.getAreaStyle(),{fill:me,opacity:.7,decal:_e.decal}));var Ie=L.getModel("emphasis"),ke=Ie.getModel("itemStyle").getItemStyle();se.eachChild(function(Ue){if(Ue instanceof be.ZP){var Ye=Ue.style;Ue.useStyle(b.extend({image:Ye.image,x:Ye.x,y:Ye.y,width:Ye.width,height:Ye.height},_e))}else Ue.useStyle(_e),Ue.setColor(me),Ue.style.strokeNoScale=!0;Ue.ensureState("emphasis").style=b.clone(ke);var qe=g.getStore().get(g.getDimensionIndex(Ue.__dimIdx),I);(null==qe||isNaN(qe))&&(qe=""),(0,qt.ni)(Ue,(0,qt.k3)(L),{labelFetcher:g.hostModel,labelDataIndex:I,labelDimIndex:Ue.__dimIdx,defaultText:qe,inheritColor:me,defaultOpacity:_e.opacity})}),(0,Ut.k5)(D,Ie.get("focus"),Ie.get("blurScope"),Ie.get("disabled"))}),this._data=g},o.prototype.remove=function(){this.group.removeAll(),this._data=null},o.type="radar",o}(ia.Z);var ca=z(4974);const tp=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.hasSymbolVisual=!0,a}return(0,Tt.ZT)(o,u),o.prototype.init=function(a){u.prototype.init.apply(this,arguments),this.legendVisualProvider=new vn(b.bind(this.getData,this),b.bind(this.getRawData,this))},o.prototype.getInitialData=function(a,l){return gt(this,{generateCoord:"indicator_",generateCoordCount:1/0})},o.prototype.formatTooltip=function(a,l,c){var h=this.getData(),g=this.coordinateSystem.getIndicatorAxes(),m=this.getData().getName(a),y=""===m?this.name:m,x=(0,ca.jT)(this,a);return(0,ca.TX)("section",{header:y,sortBlocks:!0,blocks:b.map(g,function(w){var D=h.get(h.mapDimension(w.dim),a);return(0,ca.TX)("nameValue",{markerType:"subItem",markerColor:x,name:w.name,value:D,sortParam:D})})})},o.prototype.getTooltipPosition=function(a){if(null!=a)for(var l=this.getData(),c=this.coordinateSystem,h=l.getValues(b.map(c.dimensions,function(y){return l.mapDimension(y)}),a),f=0,g=h.length;f<g;f++)if(!isNaN(h[f])){var m=c.getIndicatorAxes();return c.coordToPoint(m[f].dataToCoord(h[f]),f)}},o.type="series.radar",o.dependencies=["radar"],o.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},o}(Zi.Z);var ud=bP.value;function Ag(u,o){return b.defaults({show:o},u)}const HV=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.optionUpdated=function(){var a=this.get("boundaryGap"),l=this.get("splitNumber"),c=this.get("scale"),h=this.get("axisLine"),f=this.get("axisTick"),g=this.get("axisLabel"),m=this.get("axisName"),y=this.get(["axisName","show"]),x=this.get(["axisName","formatter"]),w=this.get("axisNameGap"),D=this.get("triggerEvent"),I=b.map(this.get("indicator")||[],function(L){null!=L.max&&L.max>0&&!L.min?L.min=0:null!=L.min&&L.min<0&&!L.max&&(L.max=0);var N=m;null!=L.color&&(N=b.defaults({color:L.color},m));var Z=b.merge(b.clone(L),{boundaryGap:a,splitNumber:l,scale:c,axisLine:h,axisTick:f,axisLabel:g,name:L.text,showName:y,nameLocation:"end",nameGap:w,nameTextStyle:N,triggerEvent:D},!1);b.isString(x)?Z.name=x.replace("{value}",Z.name??""):b.isFunction(x)&&(Z.name=x(Z.name,Z));var _e=new ka.Z(Z,null,this.ecModel);return b.mixin(_e,Zf.W.prototype),_e.mainType="radar",_e.componentIndex=this.componentIndex,_e},this);this._indicatorModels=I},o.prototype.getIndicatorModels=function(){return this._indicatorModels},o.type="radar",o.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:b.merge({lineStyle:{color:"#bbb"}},ud.axisLine),axisLabel:Ag(ud.axisLabel,!1),axisTick:Ag(ud.axisTick,!1),splitLine:Ag(ud.splitLine,!0),splitArea:Ag(ud.splitArea,!0),indicator:[]},o}(ma.Z);var gh=z(9359),np=z(495),Ow=["axisLine","axisTickLabel","axisName"];const Ig=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c){this.group.removeAll(),this._buildAxes(a),this._buildSplitLineAndArea(a)},o.prototype._buildAxes=function(a){var l=a.coordinateSystem,c=l.getIndicatorAxes(),h=b.map(c,function(f){var g=f.model.get("showName")?f.name:"";return new Eo(f.model,{axisName:g,position:[l.cx,l.cy],rotation:f.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})});b.each(h,function(f){b.each(Ow,f.add,f),this.group.add(f.getGroup())},this)},o.prototype._buildSplitLineAndArea=function(a){var l=a.coordinateSystem,c=l.getIndicatorAxes();if(c.length){var h=a.get("shape"),f=a.getModel("splitLine"),g=a.getModel("splitArea"),m=f.getModel("lineStyle"),y=g.getModel("areaStyle"),x=f.get("show"),w=g.get("show"),D=m.get("color"),I=y.get("color"),L=b.isArray(D)?D:[D],N=b.isArray(I)?I:[I],Z=[],se=[];if("circle"===h)for(var me=c[0].getTicksCoords(),De=l.cx,Pe=l.cy,Ie=0;Ie<me.length;Ie++)x&&Z[_e(Z,L,Ie)].push(new gh.Z({shape:{cx:De,cy:Pe,r:me[Ie].coord}})),w&&Ie<me.length-1&&se[_e(se,N,Ie)].push(new np.Z({shape:{cx:De,cy:Pe,r0:me[Ie].coord,r:me[Ie+1].coord}}));else{var Ue,Ye=b.map(c,function(wt,kt){var en=wt.getTicksCoords();return Ue=null==Ue?en.length-1:Math.min(en.length-1,Ue),b.map(en,function(jt){return l.coordToPoint(jt.coord,kt)})}),Ke=[];for(Ie=0;Ie<=Ue;Ie++){for(var qe=[],ut=0;ut<c.length;ut++)qe.push(Ye[ut][Ie]);qe[0]&&qe.push(qe[0].slice()),x&&Z[_e(Z,L,Ie)].push(new Ps.Z({shape:{points:qe}})),w&&Ke&&se[_e(se,N,Ie-1)].push(new tl.Z({shape:{points:qe.concat(Ke)}})),Ke=qe.slice().reverse()}}var pt=m.getLineStyle(),yt=y.getAreaStyle();b.each(se,function(wt,kt){this.group.add(_n.mergePath(wt,{style:b.defaults({stroke:"none",fill:N[kt%N.length]},yt),silent:!0}))},this),b.each(Z,function(wt,kt){this.group.add(_n.mergePath(wt,{style:b.defaults({fill:"none",stroke:L[kt%L.length]},pt),silent:!0}))},this)}function _e(wt,kt,en){var jt=en%kt.length;return wt[jt]=wt[jt]||[],jt}},o.type="radar",o}(ga.Z),Fw=function(u){function o(a,l,c){var h=u.call(this,a,l,c)||this;return h.type="value",h.angle=0,h.name="",h}return(0,Tt.ZT)(o,u),o}(fo.Z),NP=function(){function u(o,a,l){this.dimensions=[],this._model=o,this._indicatorAxes=(0,b.map)(o.getIndicatorModels(),function(c,h){var f="indicator_"+h,g=new Fw(f,new xg.Z);return g.name=c.get("name"),g.model=c,c.axis=g,this.dimensions.push(f),g},this),this.resize(o,l)}return u.prototype.getIndicatorAxes=function(){return this._indicatorAxes},u.prototype.dataToPoint=function(o,a){return this.coordToPoint(this._indicatorAxes[a].dataToCoord(o),a)},u.prototype.coordToPoint=function(o,a){var c=this._indicatorAxes[a].angle;return[this.cx+o*Math.cos(c),this.cy-o*Math.sin(c)]},u.prototype.pointToData=function(o){var a=o[0]-this.cx,l=o[1]-this.cy,c=Math.sqrt(a*a+l*l);a/=c,l/=c;for(var g,h=Math.atan2(-l,a),f=1/0,m=-1,y=0;y<this._indicatorAxes.length;y++){var x=this._indicatorAxes[y],w=Math.abs(h-x.angle);w<f&&(g=x,m=y,f=w)}return[m,+(g&&g.coordToData(c))]},u.prototype.resize=function(o,a){var l=o.get("center"),c=a.getWidth(),h=a.getHeight(),f=Math.min(c,h)/2;this.cx=It.GM(l[0],c),this.cy=It.GM(l[1],h),this.startAngle=o.get("startAngle")*Math.PI/180;var g=o.get("radius");((0,b.isString)(g)||(0,b.isNumber)(g))&&(g=[0,g]),this.r0=It.GM(g[0],f),this.r=It.GM(g[1],f),(0,b.each)(this._indicatorAxes,function(m,y){m.setExtent(this.r0,this.r);var x=this.startAngle+y*Math.PI*2/this._indicatorAxes.length;x=Math.atan2(Math.sin(x),Math.cos(x)),m.angle=x},this)},u.prototype.update=function(o,a){var l=this._indicatorAxes,c=this._model;(0,b.each)(l,function(g){g.scale.setExtent(1/0,-1/0)}),o.eachSeriesByType("radar",function(g,m){if("radar"===g.get("coordinateSystem")&&o.getComponent("radar",g.get("radarIndex"))===c){var y=g.getData();(0,b.each)(l,function(x){x.scale.unionExtentFromData(y,y.mapDimension(x.dim))})}},this);var h=c.get("splitNumber"),f=new xg.Z;f.setExtent(0,h),f.setInterval(1),(0,b.each)(l,function(g,m){h0(g.scale,g.model,f)})},u.prototype.convertToPixel=function(o,a,l){return console.warn("Not implemented."),null},u.prototype.convertFromPixel=function(o,a,l){return console.warn("Not implemented."),null},u.prototype.containPoint=function(o){return console.warn("Not implemented."),!1},u.create=function(o,a){var l=[];return o.eachComponent("radar",function(c){var h=new u(c,o,a);l.push(h),c.coordinateSystem=h}),o.eachSeriesByType("radar",function(c){"radar"===c.get("coordinateSystem")&&(c.coordinateSystem=l[c.get("radarIndex")||0])}),l},u.dimensions=[],u}();function _h(u){u.registerCoordinateSystem("radar",NP),u.registerComponentModel(HV),u.registerComponentView(Ig),u.registerVisual({seriesType:"radar",reset:function(o){var a=o.getData();a.each(function(l){a.setItemVisual(l,"legendIcon","roundRect")}),a.setVisual("legendIcon","roundRect")}})}var rp=z(6801),nl=z(1170),ip=z(5433),y0="\0_ec_interaction_mutex";function Bw(u,o){return!!cd(u)[o]}function cd(u){return u[y0]||(u[y0]={})}function ap(u,o,a,l,c){u.pointerChecker&&u.pointerChecker(l,c.originX,c.originY)&&(nl.sT(l.event),op(u,o,a,l,c))}function op(u,o,a,l,c){c.isAvailableBehavior=(0,b.bind)(dd,null,a,l),u.trigger(o,c)}function dd(u,o,a){var l=a[u];return!u||l&&(!(0,b.isString)(l)||o.event[l+"Key"])}ip.zl({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},b.noop);const sp=function(u){function o(a){var l=u.call(this)||this;l._zr=a;var c=(0,b.bind)(l._mousedownHandler,l),h=(0,b.bind)(l._mousemoveHandler,l),f=(0,b.bind)(l._mouseupHandler,l),g=(0,b.bind)(l._mousewheelHandler,l),m=(0,b.bind)(l._pinchHandler,l);return l.enable=function(y,x){this.disable(),this._opt=(0,b.defaults)((0,b.clone)(x)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==y&&(y=!0),(!0===y||"move"===y||"pan"===y)&&(a.on("mousedown",c),a.on("mousemove",h),a.on("mouseup",f)),(!0===y||"scale"===y||"zoom"===y)&&(a.on("mousewheel",g),a.on("pinch",m))},l.disable=function(){a.off("mousedown",c),a.off("mousemove",h),a.off("mouseup",f),a.off("mousewheel",g),a.off("pinch",m)},l}return(0,Tt.ZT)(o,u),o.prototype.isDragging=function(){return this._dragging},o.prototype.isPinching=function(){return this._pinching},o.prototype.setPointerChecker=function(a){this.pointerChecker=a},o.prototype.dispose=function(){this.disable()},o.prototype._mousedownHandler=function(a){if(!nl.x1(a)){for(var l=a.target;l;){if(l.draggable)return;l=l.__hostTarget||l.parent}var c=a.offsetX,h=a.offsetY;this.pointerChecker&&this.pointerChecker(a,c,h)&&(this._x=c,this._y=h,this._dragging=!0)}},o.prototype._mousemoveHandler=function(a){if(this._dragging&&dd("moveOnMouseMove",a,this._opt)&&"pinch"!==a.gestureEvent&&!Bw(this._zr,"globalPan")){var l=a.offsetX,c=a.offsetY,h=this._x,f=this._y,g=l-h,m=c-f;this._x=l,this._y=c,this._opt.preventDefaultMouseMove&&nl.sT(a.event),op(this,"pan","moveOnMouseMove",a,{dx:g,dy:m,oldX:h,oldY:f,newX:l,newY:c,isAvailableBehavior:null})}},o.prototype._mouseupHandler=function(a){nl.x1(a)||(this._dragging=!1)},o.prototype._mousewheelHandler=function(a){var l=dd("zoomOnMouseWheel",a,this._opt),c=dd("moveOnMouseWheel",a,this._opt),h=a.wheelDelta,f=Math.abs(h),g=a.offsetX,m=a.offsetY;if(0!==h&&(l||c)){if(l){var y=f>3?1.4:f>1?1.2:1.1;ap(this,"zoom","zoomOnMouseWheel",a,{scale:h>0?y:1/y,originX:g,originY:m,isAvailableBehavior:null})}if(c){var w=Math.abs(h);ap(this,"scrollMove","moveOnMouseWheel",a,{scrollDelta:(h>0?1:-1)*(w>3?.4:w>1?.15:.05),originX:g,originY:m,isAvailableBehavior:null})}}},o.prototype._pinchHandler=function(a){Bw(this._zr,"globalPan")||ap(this,"zoom",null,a,{scale:a.pinchScale>1?1.1:1/1.1,originX:a.pinchX,originY:a.pinchY,isAvailableBehavior:null})},o}(rp.Z);function Pg(u,o,a){var l=u.target;l.x+=o,l.y+=a,l.dirty()}function Rg(u,o,a,l){var c=u.target,h=u.zoomLimit,f=u.zoom=u.zoom||1;if(f*=o,h){var g=h.min||0;f=Math.max(Math.min(h.max||1/0,f),g)}var y=f/u.zoom;u.zoom=f,c.x-=(a-c.x)*(y-1),c.y-=(l-c.y)*(y-1),c.scaleX*=y,c.scaleY*=y,c.dirty()}var Vw={axisPointer:1,tooltip:1,brush:1};function lp(u,o,a){var l=o.getComponentByElement(u.topTarget),c=l&&l.coordinateSystem;return l&&l!==a&&!Vw.hasOwnProperty(l.mainType)&&c&&c.model!==a}var BP=z(6743),hd=z(9441),up=z(641);function zw(u){(0,b.isString)(u)&&(u=(new DOMParser).parseFromString(u,"text/xml"));var a=u;for(9===a.nodeType&&(a=a.firstChild);"svg"!==a.nodeName.toLowerCase()||1!==a.nodeType;)a=a.nextSibling;return a}var Lg,cp={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},fd=(0,b.keys)(cp),Og={"alignment-baseline":"textBaseline","stop-color":"stopColor"},ta=(0,b.keys)(Og),x0=function(){function u(){this._defs={},this._root=null}return u.prototype.parse=function(o,a){a=a||{};var l=zw(o);this._defsUsePending=[];var c=new Pn.Z;this._root=c;var x,w,h=[],f=l.getAttribute("viewBox")||"",g=parseFloat(l.getAttribute("width")||a.width),m=parseFloat(l.getAttribute("height")||a.height);isNaN(g)&&(g=null),isNaN(m)&&(m=null),po(l,c,null,!0,!1);for(var y=l.firstChild;y;)this._parseNode(y,c,h,null,!1,!1),y=y.nextSibling;if(function UV(u,o){for(var a=0;a<o.length;a++){var l=o[a];l[0].style[l[1]]=u[l[2]]}}(this._defs,this._defsUsePending),this._defsUsePending=[],f){var D=sn(f);D.length>=4&&(x={x:parseFloat(D[0]||0),y:parseFloat(D[1]||0),width:parseFloat(D[2]),height:parseFloat(D[3])})}if(x&&null!=g&&null!=m&&(w=UP(x,{x:0,y:0,width:g,height:m}),!a.ignoreViewBox)){var I=c;(c=new Pn.Z).add(I),I.scaleX=I.scaleY=w.scale,I.x=w.x,I.y=w.y}return!a.ignoreRootClip&&null!=g&&null!=m&&c.setClipPath(new Di.Z({shape:{x:0,y:0,width:g,height:m}})),{root:c,width:g,height:m,viewBoxRect:x,viewBoxTransform:w,named:h}},u.prototype._parseNode=function(o,a,l,c,h,f){var m,g=o.nodeName.toLowerCase(),y=c;if("defs"===g&&(h=!0),"text"===g&&(f=!0),"defs"===g||"switch"===g)m=a;else{if(!h){var x=Lg[g];if(x&&(0,b.hasOwn)(Lg,g)){m=x.call(this,o,a);var w=o.getAttribute("name");if(w){var D={name:w,namedFrom:null,svgNodeTagLower:g,el:m};l.push(D),"g"===g&&(y=D)}else c&&l.push({name:c.name,namedFrom:c,svgNodeTagLower:g,el:m});a.add(m)}}var I=Hw[g];if(I&&(0,b.hasOwn)(Hw,g)){var L=I.call(this,o),N=o.getAttribute("id");N&&(this._defs[N]=L)}}if(m&&m.isGroup)for(var Z=o.firstChild;Z;)1===Z.nodeType?this._parseNode(Z,m,l,y,h,f):3===Z.nodeType&&f&&this._parseText(Z,m),Z=Z.nextSibling},u.prototype._parseText=function(o,a){var l=new he.Z({style:{text:o.textContent},silent:!0,x:this._textX||0,y:this._textY||0});Ao(a,l),po(o,l,this._defsUsePending,!1,!1),function Uw(u,o){var a=o.__selfStyle;if(a){var l=a.textBaseline,c=l;l&&"auto"!==l&&"baseline"!==l?"before-edge"===l||"text-before-edge"===l?c="top":"after-edge"===l||"text-after-edge"===l?c="bottom":("central"===l||"mathematical"===l)&&(c="middle"):c="alphabetic",u.style.textBaseline=c}var h=o.__inheritedStyle;if(h){var f=h.textAlign,g=f;f&&("middle"===f&&(g="center"),u.style.textAlign=g)}}(l,a);var c=l.style,h=c.fontSize;h&&h<9&&(c.fontSize=9,l.scaleX*=h/9,l.scaleY*=h/9);var f=(c.fontSize||c.fontFamily)&&[c.fontStyle,c.fontWeight,(c.fontSize||12)+"px",c.fontFamily||"sans-serif"].join(" ");c.font=f;var g=l.getBoundingRect();return this._textX+=g.width,a.add(l),l},u.internalField=void(Lg={g:function(o,a){var l=new Pn.Z;return Ao(a,l),po(o,l,this._defsUsePending,!1,!1),l},rect:function(o,a){var l=new Di.Z;return Ao(a,l),po(o,l,this._defsUsePending,!1,!1),l.setShape({x:parseFloat(o.getAttribute("x")||"0"),y:parseFloat(o.getAttribute("y")||"0"),width:parseFloat(o.getAttribute("width")||"0"),height:parseFloat(o.getAttribute("height")||"0")}),l.silent=!0,l},circle:function(o,a){var l=new gh.Z;return Ao(a,l),po(o,l,this._defsUsePending,!1,!1),l.setShape({cx:parseFloat(o.getAttribute("cx")||"0"),cy:parseFloat(o.getAttribute("cy")||"0"),r:parseFloat(o.getAttribute("r")||"0")}),l.silent=!0,l},line:function(o,a){var l=new Ei.Z;return Ao(a,l),po(o,l,this._defsUsePending,!1,!1),l.setShape({x1:parseFloat(o.getAttribute("x1")||"0"),y1:parseFloat(o.getAttribute("y1")||"0"),x2:parseFloat(o.getAttribute("x2")||"0"),y2:parseFloat(o.getAttribute("y2")||"0")}),l.silent=!0,l},ellipse:function(o,a){var l=new BP.Z;return Ao(a,l),po(o,l,this._defsUsePending,!1,!1),l.setShape({cx:parseFloat(o.getAttribute("cx")||"0"),cy:parseFloat(o.getAttribute("cy")||"0"),rx:parseFloat(o.getAttribute("rx")||"0"),ry:parseFloat(o.getAttribute("ry")||"0")}),l.silent=!0,l},polygon:function(o,a){var c,l=o.getAttribute("points");l&&(c=pd(l));var h=new tl.Z({shape:{points:c||[]},silent:!0});return Ao(a,h),po(o,h,this._defsUsePending,!1,!1),h},polyline:function(o,a){var c,l=o.getAttribute("points");l&&(c=pd(l));var h=new Ps.Z({shape:{points:c||[]},silent:!0});return Ao(a,h),po(o,h,this._defsUsePending,!1,!1),h},image:function(o,a){var l=new be.ZP;return Ao(a,l),po(o,l,this._defsUsePending,!1,!1),l.setStyle({image:o.getAttribute("xlink:href")||o.getAttribute("href"),x:+o.getAttribute("x"),y:+o.getAttribute("y"),width:+o.getAttribute("width"),height:+o.getAttribute("height")}),l.silent=!0,l},text:function(o,a){var l=o.getAttribute("x")||"0",c=o.getAttribute("y")||"0",h=o.getAttribute("dx")||"0",f=o.getAttribute("dy")||"0";this._textX=parseFloat(l)+parseFloat(h),this._textY=parseFloat(c)+parseFloat(f);var g=new Pn.Z;return Ao(a,g),po(o,g,this._defsUsePending,!1,!0),g},tspan:function(o,a){var l=o.getAttribute("x"),c=o.getAttribute("y");null!=l&&(this._textX=parseFloat(l)),null!=c&&(this._textY=parseFloat(c));var h=o.getAttribute("dx")||"0",f=o.getAttribute("dy")||"0",g=new Pn.Z;return Ao(a,g),po(o,g,this._defsUsePending,!1,!0),this._textX+=parseFloat(h),this._textY+=parseFloat(f),g},path:function(o,a){var l=o.getAttribute("d")||"",c=(0,hd.iR)(l);return Ao(a,c),po(o,c,this._defsUsePending,!1,!1),c.silent=!0,c}}),u}(),Hw={lineargradient:function(u){var o=parseInt(u.getAttribute("x1")||"0",10),a=parseInt(u.getAttribute("y1")||"0",10),l=parseInt(u.getAttribute("x2")||"10",10),c=parseInt(u.getAttribute("y2")||"0",10),h=new Bf.Z(o,a,l,c);return C0(u,h),Ls(u,h),h},radialgradient:function(u){var o=parseInt(u.getAttribute("cx")||"0",10),a=parseInt(u.getAttribute("cy")||"0",10),l=parseInt(u.getAttribute("r")||"0",10),c=new up.Z(o,a,l);return C0(u,c),Ls(u,c),c}};function C0(u,o){"userSpaceOnUse"===u.getAttribute("gradientUnits")&&(o.global=!0)}function Ls(u,o){for(var a=u.firstChild;a;){if(1===a.nodeType&&"stop"===a.nodeName.toLocaleLowerCase()){var c,l=a.getAttribute("offset");c=l&&l.indexOf("%")>0?parseInt(l,10)/100:l?parseFloat(l):0;var h={};HP(a,h,h);var f=h.stopColor||a.getAttribute("stop-color")||"#000000";o.colorStops.push({offset:c,color:f})}a=a.nextSibling}}function Ao(u,o){u&&u.__inheritedStyle&&(o.__inheritedStyle||(o.__inheritedStyle={}),(0,b.defaults)(o.__inheritedStyle,u.__inheritedStyle))}function pd(u){for(var o=sn(u),a=[],l=0;l<o.length;l+=2){var c=parseFloat(o[l]),h=parseFloat(o[l+1]);a.push([c,h])}return a}function po(u,o,a,l,c){var h=o,f=h.__inheritedStyle=h.__inheritedStyle||{},g={};1===u.nodeType&&(function WV(u,o){var a=u.getAttribute("transform");if(a){a=a.replace(/,/g," ");var l=[],c=null;a.replace(GV,function(w,D,I){return l.push(D,I),""});for(var h=l.length-1;h>0;h-=2){var g=l[h-1],m=sn(l[h]);switch(c=c||yi.create(),g){case"translate":yi.translate(c,c,[parseFloat(m[0]),parseFloat(m[1]||"0")]);break;case"scale":yi.scale(c,c,[parseFloat(m[0]),parseFloat(m[1]||m[0])]);break;case"rotate":yi.rotate(c,c,-parseFloat(m[0])*Gw);break;case"skewX":var y=Math.tan(parseFloat(m[0])*Gw);yi.mul(c,[1,0,y,1,0,0],c);break;case"skewY":var x=Math.tan(parseFloat(m[0])*Gw);yi.mul(c,[1,x,0,1,0,0],c);break;case"matrix":c[0]=parseFloat(m[0]),c[1]=parseFloat(m[1]),c[2]=parseFloat(m[2]),c[3]=parseFloat(m[3]),c[4]=parseFloat(m[4]),c[5]=parseFloat(m[5])}}o.setLocalTransform(c)}}(u,o),HP(u,f,g),l||function jV(u,o,a){for(var l=0;l<fd.length;l++)null!=(h=u.getAttribute(c=fd[l]))&&(o[cp[c]]=h);for(l=0;l<ta.length;l++){var c,h;null!=(h=u.getAttribute(c=ta[l]))&&(a[Og[c]]=h)}}(u,f,g)),h.style=h.style||{},null!=f.fill&&(h.style.fill=vd(h,"fill",f.fill,a)),null!=f.stroke&&(h.style.stroke=vd(h,"stroke",f.stroke,a)),(0,b.each)(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(m){null!=f[m]&&(h.style[m]=parseFloat(f[m]))}),(0,b.each)(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(m){null!=f[m]&&(h.style[m]=f[m])}),c&&(h.__selfStyle=g),f.lineDash&&(h.style.lineDash=(0,b.map)(sn(f.lineDash),function(m){return parseFloat(m)})),("hidden"===f.visibility||"collapse"===f.visibility)&&(h.invisible=!0),"none"===f.display&&(h.ignore=!0)}var w0=/^url\(\s*#(.*?)\)/;function vd(u,o,a,l){var c=a&&a.match(w0);if(!c)return"none"===a&&(a=null),a;var h=(0,b.trim)(c[1]);l.push([u,o,h])}var VP=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function sn(u){return u.match(VP)||[]}var GV=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,Gw=Math.PI/180,zP=/([^\s:;]+)\s*:\s*([^:;]+)/g;function HP(u,o,a){var l=u.getAttribute("style");if(l){zP.lastIndex=0;for(var c;null!=(c=zP.exec(l));){var h=c[1],f=(0,b.hasOwn)(cp,h)?cp[h]:null;f&&(o[f]=c[2]);var g=(0,b.hasOwn)(Og,h)?Og[h]:null;g&&(a[g]=c[2])}}}function UP(u,o){var c=Math.min(o.width/u.width,o.height/u.height);return{scale:c,x:-(u.x+u.width/2)*c+(o.x+o.width/2),y:-(u.y+u.height/2)*c+(o.y+o.height/2)}}for(var GP=z(2224),ZV=(0,b.createHashMap)(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),eo=function(){function u(o,a){this.type="geoSVG",this._usedGraphicMap=(0,b.createHashMap)(),this._freedGraphics=[],this._mapName=o,this._parsedXML=zw(a)}return u.prototype.load=function(){var o=this._firstGraphic;if(!o){o=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(o),this._boundingRect=this._firstGraphic.boundingRect.clone();var a=function hp(u){var o=[],a=(0,b.createHashMap)();return(0,b.each)(u,function(l){if(null==l.namedFrom){var c=new GP.Im(l.name,l.el);o.push(c),a.set(l.name,c)}}),{regions:o,regionsMap:a}}(o.named),c=a.regionsMap;this._regions=a.regions,this._regionsMap=c}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},u.prototype._buildGraphic=function(o){var a,l;try{a=o&&function dp(u,o){return(new x0).parse(u,o)}(o,{ignoreViewBox:!0,ignoreRootClip:!0})||{},(0,b.assert)(null!=(l=a.root))}catch(Z){throw new Error("Invalid svg format\n"+Z.message)}var c=new Pn.Z;c.add(l),c.isGeoSVGGraphicRoot=!0;var h=a.width,f=a.height,g=a.viewBoxRect,m=this._boundingRect;if(!m){var y=void 0,x=void 0,w=void 0,D=void 0;if(null!=h?(y=0,w=h):g&&(y=g.x,w=g.width),null!=f?(x=0,D=f):g&&(x=g.y,D=g.height),null==y||null==x){var I=l.getBoundingRect();null==y&&(y=I.x,w=I.width),null==x&&(x=I.y,D=I.height)}m=this._boundingRect=new yr.Z(y,x,w,D)}if(g){var L=UP(g,m);l.scaleX=l.scaleY=L.scale,l.x=L.x,l.y=L.y}c.setClipPath(new Di.Z({shape:m.plain()}));var N=[];return(0,b.each)(a.named,function(Z){null!=ZV.get(Z.svgNodeTagLower)&&(N.push(Z),function S0(u){u.silent=!1,u.isGroup&&u.traverse(function(o){o.silent=!1})}(Z.el))}),{root:c,boundingRect:m,named:N}},u.prototype.useGraphic=function(o){var a=this._usedGraphicMap,l=a.get(o);return l||(l=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),a.set(o,l),l)},u.prototype.freeGraphic=function(o){var a=this._usedGraphicMap,l=a.get(o);l&&(a.removeKey(o),this._freedGraphics.push(l))},u}(),YV=z(119),D0=[126,25],ss=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],bc=0;bc<ss.length;bc++)for(var Uu=0;Uu<ss[bc].length;Uu++)ss[bc][Uu][0]/=10.5,ss[bc][Uu][1]/=-14,ss[bc][Uu][0]+=D0[0],ss[bc][Uu][1]+=D0[1];var Ww=z(776),WP=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],$V=function(){function u(o,a,l){this.type="geoJSON",this._parsedMap=(0,b.createHashMap)(),this._mapName=o,this._specialAreas=l,this._geoJSON=function Os(u){return(0,b.isString)(u)?typeof JSON<"u"&&JSON.parse?JSON.parse(u):new Function("return ("+u+");")():u}(a)}return u.prototype.load=function(o,a){var l=this._parsedMap.get(a=a||"name");if(!l){var c=this._parseToRegions(a);l=this._parsedMap.set(a,{regions:c,boundingRect:jw(c)})}var h=(0,b.createHashMap)(),f=[];return(0,b.each)(l.regions,function(g){var m=g.name;o&&(0,b.hasOwn)(o,m)&&(g=g.cloneShallow(m=o[m])),f.push(g),h.set(m,g)}),{regions:f,boundingRect:l.boundingRect||new yr.Z(0,0,0,0),regionsMap:h}},u.prototype._parseToRegions=function(o){var c,a=this._mapName,l=this._geoJSON;try{c=l?(0,YV.Z)(l,o):[]}catch(h){throw new Error("Invalid geoJson format\n"+h.message)}return function fp(u,o){if("china"===u){for(var a=0;a<o.length;a++)if("\u5357\u6d77\u8bf8\u5c9b"===o[a].name)return;o.push(new GP.Ni("\u5357\u6d77\u8bf8\u5c9b",b.map(ss,function(l){return{type:"polygon",exterior:l}}),D0))}}(a,c),(0,b.each)(c,function(h){var f=h.name;(0,Ww.Z)(a,h),function jP(u,o){"china"===u&&"\u53f0\u6e7e"===o.name&&o.geometries.push({type:"polygon",exterior:WP[0]})}(a,h);var g=this._specialAreas&&this._specialAreas[f];g&&h.transformTo(g.left,g.top,g.width,g.height)},this),c},u.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},u}();function jw(u){for(var o,a=0;a<u.length;a++){var l=u[a].getBoundingRect();(o=o||l.clone()).union(l)}return o}var gd=(0,b.createHashMap)();const Ds_getGeoResource=function(u){return gd.get(u)},Ds_load=function(u,o,a){var l=gd.get(u);if(l)return l.load(o,a)};var M0=z(8177),xc=z(9563),T0=["rect","circle","line","ellipse","polygon","polyline","path"],ZP=b.createHashMap(T0),YP=b.createHashMap(T0.concat(["g"])),XP=b.createHashMap(T0.concat(["g"])),Zw=(0,xn.Yf)();function kg(u){var o=u.getItemStyle(),a=u.get("areaColor");return null!=a&&(o.fill=a),o}function Ng(u){var o=u.style;o&&(o.stroke=o.stroke||o.fill,o.fill=null)}function $P(u,o,a,l){var c=l.getModel("itemStyle"),h=l.getModel(["emphasis","itemStyle"]),f=l.getModel(["blur","itemStyle"]),g=l.getModel(["select","itemStyle"]),m=kg(c),y=kg(h),x=kg(g),w=kg(f),D=u.data;if(D){var I=D.getItemVisual(a,"style"),L=D.getItemVisual(a,"decal");u.isVisualEncodedByVisualMap&&I.fill&&(m.fill=I.fill),L&&(m.decal=(0,M0.I)(L,u.api))}o.setStyle(m),o.style.strokeNoScale=!0,o.ensureState("emphasis").style=y,o.ensureState("select").style=x,o.ensureState("blur").style=w,(0,Ut.MA)(o)}function yh(u,o,a,l,c,h,f){var g=u.data,m=u.isGeo,y=g&&isNaN(g.get(g.mapDimension("value"),h)),x=g&&g.getItemLayout(h);if(m||y||x&&x.showLabel){var w=m?a:h,D=void 0;(!g||h>=0)&&(D=c);var I=f?{normal:{align:"center",verticalAlign:"middle"}}:null;(0,qt.ni)(o,(0,qt.k3)(l),{labelFetcher:D,labelDataIndex:w,defaultText:a},I);var L=o.getTextContent();if(L&&(Zw(L).ignore=L.ignore,o.textConfig&&f)){var N=o.getBoundingRect().clone();o.textConfig.layoutRect=N,o.textConfig.position=[(f[0]-N.x)/N.width*100+"%",(f[1]-N.y)/N.height*100+"%"]}o.disableLabelAnimation=!0}else o.removeTextContent(),o.removeTextConfig(),o.disableLabelAnimation=null}function Bg(u,o,a,l,c,h){u.data?u.data.setItemGraphicEl(h,o):(0,Mr.A)(o).eventData={componentType:"geo",componentIndex:c.componentIndex,geoIndex:c.componentIndex,name:a,region:l&&l.option||{}}}function pp(u,o,a,l,c){u.data||_n.setTooltipConfig({el:o,componentModel:c,itemName:a,itemTooltipOption:l.get("tooltip")})}function Yw(u,o,a,l,c){o.highDownSilentOnTouch=!!c.get("selectedMode");var h=l.getModel("emphasis"),f=h.get("focus");return(0,Ut.k5)(o,f,h.get("blurScope"),h.get("disabled")),u.isGeo&&(0,Ut.th)(o,c,a),f}function Xw(u,o,a){var c,l=[];function h(){c=[]}function f(){c.length&&(l.push(c),c=[])}var g=o({polygonStart:h,polygonEnd:f,lineStart:h,lineEnd:f,point:function(m,y){isFinite(m)&&isFinite(y)&&c.push([m,y])},sphere:function(){}});return!a&&g.polygonStart(),b.each(u,function(m){g.lineStart();for(var y=0;y<m.length;y++)g.point(m[y][0],m[y][1]);g.lineEnd()}),!a&&g.polygonEnd(),l}const $w=function(){function u(o){var a=new Pn.Z;this.uid=(0,qn.Kr)("ec_map_draw"),this._controller=new sp(o.getZr()),this._controllerHost={target:a},this.group=a,a.add(this._regionsGroup=new Pn.Z),a.add(this._svgGroup=new Pn.Z)}return u.prototype.draw=function(o,a,l,c,h){var f="geo"===o.mainType,g=o.getData&&o.getData();f&&a.eachComponent({mainType:"series",subType:"map"},function(se){!g&&se.getHostGeoModel()===o&&(g=se.getData())});var m=o.coordinateSystem,y=this._regionsGroup,x=this.group,w=m.getTransformInfo(),D=w.raw,I=w.roam;!y.childAt(0)||h?(x.x=I.x,x.y=I.y,x.scaleX=I.scaleX,x.scaleY=I.scaleY,x.dirty()):wn.D(x,I,o);var N=g&&g.getVisual("visualMeta")&&g.getVisual("visualMeta").length>0,Z={api:l,geo:m,mapOrGeoModel:o,data:g,isVisualEncodedByVisualMap:N,isGeo:f,transformInfoRaw:D};"geoJSON"===m.resourceType?this._buildGeoJSON(Z):"geoSVG"===m.resourceType&&this._buildSVG(Z),this._updateController(o,a,l),this._updateMapSelectHandler(o,y,l,c)},u.prototype._buildGeoJSON=function(o){var a=this._regionsGroupByName=b.createHashMap(),l=b.createHashMap(),c=this._regionsGroup,h=o.transformInfoRaw,f=o.mapOrGeoModel,g=o.data,m=o.geo.projection,y=m&&m.stream;function x(I,L){return L&&(I=L(I)),I&&[I[0]*h.scaleX+h.x,I[1]*h.scaleY+h.y]}function w(I){for(var L=[],N=!y&&m&&m.project,Z=0;Z<I.length;++Z){var se=x(I[Z],N);se&&L.push(se)}return L}function D(I){return{shape:{points:w(I)}}}c.removeAll(),b.each(o.geo.regions,function(I){var L=I.name,N=a.get(L),Z=l.get(L)||{},se=Z.dataIdx,_e=Z.regionModel;N||(N=a.set(L,new Pn.Z),c.add(N),se=g?g.indexOfName(L):null,_e=o.isGeo?f.getRegionModel(L):g?g.getItemModel(se):null,l.set(L,{dataIdx:se,regionModel:_e}));var me=[],De=[];b.each(I.geometries,function(ke){if("polygon"===ke.type){var Ue=[ke.exterior].concat(ke.interiors||[]);y&&(Ue=Xw(Ue,y)),b.each(Ue,function(Ke){me.push(new tl.Z(D(Ke)))})}else{var Ye=ke.points;y&&(Ye=Xw(Ye,y,!0)),b.each(Ye,function(Ke){De.push(new Ps.Z(D(Ke)))})}});var Pe=x(I.getCenter(),m&&m.project);function Ie(ke,Ue){if(ke.length){var Ye=new ge.Z({culling:!0,segmentIgnoreThreshold:1,shape:{paths:ke}});N.add(Ye),$P(o,Ye,se,_e),yh(o,Ye,L,_e,f,se,Pe),Ue&&(Ng(Ye),b.each(Ye.states,Ng))}}Ie(me),Ie(De,!0)}),a.each(function(I,L){var N=l.get(L),se=N.regionModel;Bg(o,I,L,se,f,N.dataIdx),pp(o,I,L,se,f),Yw(o,I,L,se,f)},this)},u.prototype._buildSVG=function(o){var a=o.geo.map,l=o.transformInfoRaw;this._svgGroup.x=l.x,this._svgGroup.y=l.y,this._svgGroup.scaleX=l.scaleX,this._svgGroup.scaleY=l.scaleY,this._svgResourceChanged(a)&&(this._freeSVG(),this._useSVG(a));var c=this._svgDispatcherMap=b.createHashMap(),h=!1;b.each(this._svgGraphicRecord.named,function(f){var g=f.name,m=o.mapOrGeoModel,y=o.data,x=f.svgNodeTagLower,w=f.el,D=y?y.indexOfName(g):null,I=m.getRegionModel(g);null!=ZP.get(x)&&w instanceof xc.ZP&&$P(o,w,D,I),w instanceof xc.ZP&&(w.culling=!0),w.z2EmphasisLift=0,f.namedFrom||(null!=XP.get(x)&&yh(o,w,g,I,m,D,null),Bg(o,w,g,I,m,D),pp(o,w,g,I,m),null==YP.get(x))||("self"===Yw(o,w,g,I,m)&&(h=!0),(c.get(g)||c.set(g,[])).push(w))},this),this._enableBlurEntireSVG(h,o)},u.prototype._enableBlurEntireSVG=function(o,a){if(o&&a.isGeo){var c=a.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle().opacity;this._svgGraphicRecord.root.traverse(function(h){if(!h.isGroup){(0,Ut.MA)(h);var f=h.ensureState("blur").style||{};null==f.opacity&&null!=c&&(f.opacity=c),h.ensureState("emphasis")}})}},u.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},u.prototype.findHighDownDispatchers=function(o,a){if(null==o)return[];var l=a.coordinateSystem;if("geoJSON"===l.resourceType){var c=this._regionsGroupByName;if(c){var h=c.get(o);return h?[h]:[]}}else if("geoSVG"===l.resourceType)return this._svgDispatcherMap&&this._svgDispatcherMap.get(o)||[]},u.prototype._svgResourceChanged=function(o){return this._svgMapName!==o},u.prototype._useSVG=function(o){var a=Ds_getGeoResource(o);if(a&&"geoSVG"===a.type){var l=a.useGraphic(this.uid);this._svgGroup.add(l.root),this._svgGraphicRecord=l,this._svgMapName=o}},u.prototype._freeSVG=function(){var o=this._svgMapName;if(null!=o){var a=Ds_getGeoResource(o);a&&"geoSVG"===a.type&&a.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},u.prototype._updateController=function(o,a,l){var c=o.coordinateSystem,h=this._controller,f=this._controllerHost;f.zoomLimit=o.get("scaleLimit"),f.zoom=c.getZoom(),h.enable(o.get("roam")||!1);var g=o.mainType;function m(){var y={type:"geoRoam",componentType:g};return y[g+"Id"]=o.id,y}h.off("pan").on("pan",function(y){this._mouseDownFlag=!1,Pg(f,y.dx,y.dy),l.dispatchAction(b.extend(m(),{dx:y.dx,dy:y.dy,animation:{duration:0}}))},this),h.off("zoom").on("zoom",function(y){this._mouseDownFlag=!1,Rg(f,y.scale,y.originX,y.originY),l.dispatchAction(b.extend(m(),{zoom:y.scale,originX:y.originX,originY:y.originY,animation:{duration:0}}))},this),h.setPointerChecker(function(y,x,w){return c.containPoint([x,w])&&!lp(y,l,o)})},u.prototype.resetForLabelLayout=function(){this.group.traverse(function(o){var a=o.getTextContent();a&&(a.ignore=Zw(a).ignore)})},u.prototype._updateMapSelectHandler=function(o,a,l,c){var h=this;a.off("mousedown"),a.off("click"),o.get("selectedMode")&&(a.on("mousedown",function(){h._mouseDownFlag=!0}),a.on("click",function(f){!h._mouseDownFlag||(h._mouseDownFlag=!1)}))},u}(),vp=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c,h){if(!h||"mapToggleSelect"!==h.type||h.from!==this.uid){var f=this.group;if(f.removeAll(),!a.getHostGeoModel()){if(this._mapDraw&&h&&"geoRoam"===h.type&&this._mapDraw.resetForLabelLayout(),h&&"geoRoam"===h.type&&"series"===h.componentType&&h.seriesId===a.id)(g=this._mapDraw)&&f.add(g.group);else if(a.needsDrawMap){var g=this._mapDraw||new $w(c);f.add(g.group),g.draw(a,l,c,this,h),this._mapDraw=g}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;a.get("showLegendSymbol")&&l.getComponent("legend")&&this._renderSymbols(a,l,c)}}},o.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},o.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},o.prototype._renderSymbols=function(a,l,c){var h=a.originalData,f=this.group;h.each(h.mapDimension("value"),function(g,m){if(!isNaN(g)){var y=h.getItemLayout(m);if(y&&y.point){var x=y.point,w=y.offset,D=new gh.Z({style:{fill:a.getData().getVisual("style").fill},shape:{cx:x[0]+9*w,cy:x[1],r:3},silent:!0,z2:8+(w?0:Ut.zr+1)});if(!w){var I=a.mainSeries.getData(),L=h.getName(m),N=I.indexOfName(L),Z=h.getItemModel(m),se=Z.getModel("label"),_e=I.getItemGraphicEl(N);(0,qt.ni)(D,(0,qt.k3)(Z),{labelFetcher:{getFormattedLabel:function(me,De){return a.getFormattedLabel(N,De)}},defaultText:L}),D.disableLabelAnimation=!0,se.get("position")||D.setTextConfig({position:"bottom"}),_e.onHoverStateChange=function(me){(0,Ut.Gl)(D,me)}}f.add(D)}}})},o.type="map",o}(ia.Z),KP=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.needsDrawMap=!1,a.seriesGroup=[],a.getTooltipPosition=function(l){if(null!=l){var c=this.getData().getName(l),h=this.coordinateSystem,f=h.getRegion(c);return f&&h.dataToPoint(f.getCenter())}},a}return(0,Tt.ZT)(o,u),o.prototype.getInitialData=function(a){for(var l=gt(this,{coordDimensions:["value"],encodeDefaulter:b.curry(Nt.Ss,this)}),c=b.createHashMap(),h=[],f=0,g=l.count();f<g;f++){var m=l.getName(f);c.set(m,!0)}var y=Ds_load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return b.each(y.regions,function(x){var w=x.name;c.get(w)||h.push(w)}),l.appendValues([],h),l},o.prototype.getHostGeoModel=function(){var a=this.option.geoIndex;return null!=a?this.ecModel.getComponent("geo",a):null},o.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},o.prototype.getRawValue=function(a){var l=this.getData();return l.get(l.mapDimension("value"),a)},o.prototype.getRegionModel=function(a){var l=this.getData();return l.getItemModel(l.indexOfName(a))},o.prototype.formatTooltip=function(a,l,c){for(var h=this.getData(),f=this.getRawValue(a),g=h.getName(a),m=this.seriesGroup,y=[],x=0;x<m.length;x++){var w=m[x].originalData.indexOfName(g),D=h.mapDimension("value");isNaN(m[x].originalData.get(D,w))||y.push(m[x].name)}return(0,ca.TX)("section",{header:y.join(", "),noHeader:!y.length,blocks:[(0,ca.TX)("nameValue",{name:g,value:f})]})},o.prototype.setZoom=function(a){this.option.zoom=a},o.prototype.setCenter=function(a){this.option.center=a},o.prototype.getLegendIcon=function(a){var l=a.icon||"roundRect",c=(0,ai.th)(l,0,0,a.itemWidth,a.itemHeight,a.itemStyle.fill);return c.setStyle(a.itemStyle),c.style.stroke="none",l.indexOf("empty")>-1&&(c.style.stroke=c.style.fill,c.style.fill="#fff",c.style.lineWidth=2),c},o.type="series.map",o.dependencies=["geo"],o.layoutMode="box",o.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},o}(Zi.Z);function Qw(u){var o={};u.eachSeriesByType("map",function(a){var l=a.getHostGeoModel(),c=l?"o"+l.id:"i"+a.getMapType();(o[c]=o[c]||[]).push(a)}),b.each(o,function(a,l){for(var c=function Lt(u,o){var a={};return b.each(u,function(l){l.each(l.mapDimension("value"),function(c,h){var f="ec-"+l.getName(h);a[f]=a[f]||[],isNaN(c)||a[f].push(c)})}),u[0].map(u[0].mapDimension("value"),function(l,c){for(var h="ec-"+u[0].getName(c),f=0,g=1/0,m=-1/0,y=a[h].length,x=0;x<y;x++)g=Math.min(g,a[h][x]),m=Math.max(m,a[h][x]),f+=a[h][x];return 0===y?NaN:"min"===o?g:"max"===o?m:"average"===o?f/y:f})}(b.map(a,function(f){return f.getData()}),a[0].get("mapValueCalculation")),h=0;h<a.length;h++)a[h].originalData=a[h].getData();for(h=0;h<a.length;h++)a[h].seriesGroup=a,a[h].needsDrawMap=0===h&&!a[h].getHostGeoModel(),a[h].setData(c.cloneShallow()),a[h].mainSeries=a[0]})}function oa(u){var o={};u.eachSeriesByType("map",function(a){var l=a.getMapType();if(!a.getHostGeoModel()&&!o[l]){var c={};b.each(a.seriesGroup,function(f){var g=f.coordinateSystem,m=f.originalData;f.get("showLegendSymbol")&&u.getComponent("legend")&&m.each(m.mapDimension("value"),function(y,x){var w=m.getName(x),D=g.getRegion(w);if(D&&!isNaN(y)){var I=c[w]||0,L=g.dataToPoint(D.getCenter());c[w]=I+1,m.setItemLayout(x,{point:L,offset:I})}})});var h=a.getData();h.each(function(f){var g=h.getName(f),m=h.getItemLayout(f)||{};m.showLabel=!c[g],h.setItemLayout(f,m)}),o[l]=!0}})}var Vg=Kn.applyTransform;function qw(u){var o=u.seriesModel;return o?o.coordinateSystem:null}const mp=function(u){function o(a){var l=u.call(this)||this;return l.type="view",l.dimensions=["x","y"],l._roamTransformable=new xe.ZP,l._rawTransformable=new xe.ZP,l.name=a,l}return(0,Tt.ZT)(o,u),o.prototype.setBoundingRect=function(a,l,c,h){return this._rect=new yr.Z(a,l,c,h),this._rect},o.prototype.getBoundingRect=function(){return this._rect},o.prototype.setViewRect=function(a,l,c,h){this._transformTo(a,l,c,h),this._viewRect=new yr.Z(a,l,c,h)},o.prototype._transformTo=function(a,l,c,h){var f=this.getBoundingRect(),g=this._rawTransformable;g.transform=f.calculateTransform(new yr.Z(a,l,c,h));var m=g.parent;g.parent=null,g.decomposeTransform(),g.parent=m,this._updateTransform()},o.prototype.setCenter=function(a,l){!a||(this._center=[(0,It.GM)(a[0],l.getWidth()),(0,It.GM)(a[1],l.getHeight())],this._updateCenterAndZoom())},o.prototype.setZoom=function(a){a=a||1;var l=this.zoomLimit;l&&(null!=l.max&&(a=Math.min(l.max,a)),null!=l.min&&(a=Math.max(l.min,a))),this._zoom=a,this._updateCenterAndZoom()},o.prototype.getDefaultCenter=function(){var a=this.getBoundingRect();return[a.x+a.width/2,a.y+a.height/2]},o.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},o.prototype.getZoom=function(){return this._zoom||1},o.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},o.prototype._updateCenterAndZoom=function(){var a=this._rawTransformable.getLocalTransform(),l=this._roamTransformable,c=this.getDefaultCenter(),h=this.getCenter(),f=this.getZoom();h=Kn.applyTransform([],h,a),c=Kn.applyTransform([],c,a),l.originX=h[0],l.originY=h[1],l.x=c[0]-h[0],l.y=c[1]-h[1],l.scaleX=l.scaleY=f,this._updateTransform()},o.prototype._updateTransform=function(){var a=this._roamTransformable,l=this._rawTransformable;l.parent=a,a.updateTransform(),l.updateTransform(),yi.copy(this.transform||(this.transform=[]),l.transform||yi.create()),this._rawTransform=l.getLocalTransform(),this.invTransform=this.invTransform||[],yi.invert(this.invTransform,this.transform),this.decomposeTransform()},o.prototype.getTransformInfo=function(){var a=this._rawTransformable,l=this._roamTransformable,c=new xe.ZP;return c.transform=l.transform,c.decomposeTransform(),{roam:{x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY},raw:{x:a.x,y:a.y,scaleX:a.scaleX,scaleY:a.scaleY}}},o.prototype.getViewRect=function(){return this._viewRect},o.prototype.getViewRectAfterRoam=function(){var a=this.getBoundingRect().clone();return a.applyTransform(this.transform),a},o.prototype.dataToPoint=function(a,l,c){var h=l?this._rawTransform:this.transform;return c=c||[],h?Vg(c,a,h):Kn.copy(c,a)},o.prototype.pointToData=function(a){var l=this.invTransform;return l?Vg([],a,l):[a[0],a[1]]},o.prototype.convertToPixel=function(a,l,c){var h=qw(l);return h===this?h.dataToPoint(c):null},o.prototype.convertFromPixel=function(a,l,c){var h=qw(l);return h===this?h.pointToData(c):null},o.prototype.containPoint=function(a){return this.getViewRectAfterRoam().contain(a[0],a[1])},o.dimensions=["x","y"],o}(xe.ZP);var QP={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},_p=["lng","lat"],rl=function(u){function o(a,l,c){var h=u.call(this,a)||this;h.dimensions=_p,h.type="geo",h._nameCoordMap=b.createHashMap(),h.map=l;var D,f=c.projection,g=Ds_load(l,c.nameMap,c.nameProperty),m=Ds_getGeoResource(l),x=(h.resourceType=m?m.type:null,h.regions=g.regions),w=QP[m.type];if(h._regionsMap=g.regionsMap,h.regions=g.regions,h.projection=f,f)for(var I=0;I<x.length;I++){var L=x[I].getBoundingRect(f);(D=D||L.clone()).union(L)}else D=g.boundingRect;return h.setBoundingRect(D.x,D.y,D.width,D.height),h.aspectScale=f?1:b.retrieve2(c.aspectScale,w.aspectScale),h._invertLongitute=!f&&w.invertLongitute,h}return(0,Tt.ZT)(o,u),o.prototype._transformTo=function(a,l,c,h){var f=this.getBoundingRect(),g=this._invertLongitute;f=f.clone(),g&&(f.y=-f.y-f.height);var m=this._rawTransformable;m.transform=f.calculateTransform(new yr.Z(a,l,c,h));var y=m.parent;m.parent=null,m.decomposeTransform(),m.parent=y,g&&(m.scaleY=-m.scaleY),this._updateTransform()},o.prototype.getRegion=function(a){return this._regionsMap.get(a)},o.prototype.getRegionByCoord=function(a){for(var l=this.regions,c=0;c<l.length;c++){var h=l[c];if("geoJSON"===h.type&&h.contain(a))return l[c]}},o.prototype.addGeoCoord=function(a,l){this._nameCoordMap.set(a,l)},o.prototype.getGeoCoord=function(a){var l=this._regionsMap.get(a);return this._nameCoordMap.get(a)||l&&l.getCenter()},o.prototype.dataToPoint=function(a,l,c){if(b.isString(a)&&(a=this.getGeoCoord(a)),a){var h=this.projection;return h&&(a=h.project(a)),a&&this.projectedToPoint(a,l,c)}},o.prototype.pointToData=function(a){var l=this.projection;return l&&(a=l.unproject(a)),a&&this.pointToProjected(a)},o.prototype.pointToProjected=function(a){return u.prototype.pointToData.call(this,a)},o.prototype.projectedToPoint=function(a,l,c){return u.prototype.dataToPoint.call(this,a,l,c)},o.prototype.convertToPixel=function(a,l,c){var h=E0(l);return h===this?h.dataToPoint(c):null},o.prototype.convertFromPixel=function(a,l,c){var h=E0(l);return h===this?h.pointToData(c):null},o}(mp);function E0(u){var o=u.geoModel,a=u.seriesModel;return o?o.coordinateSystem:a?a.coordinateSystem||(a.getReferringComponents("geo",xn.C6).models[0]||{}).coordinateSystem:null}b.mixin(rl,mp);const ou=rl;function Jw(u,o){var a=u.get("boundingCoords");if(null!=a){var l=a[0],c=a[1];if(isFinite(l[0])&&isFinite(l[1])&&isFinite(c[0])&&isFinite(c[1])){var h=this.projection;if(h){var f=l[0],g=l[1],m=c[0],y=c[1];l=[1/0,1/0],c=[-1/0,-1/0];var x=function(Ie,ke,Ue,Ye){for(var Ke=Ue-Ie,qe=Ye-ke,ut=0;ut<=100;ut++){var pt=ut/100,yt=h.project([Ie+Ke*pt,ke+qe*pt]);Kn.min(l,l,yt),Kn.max(c,c,yt)}};x(f,g,m,g),x(m,g,m,y),x(m,y,f,y),x(f,y,m,g)}this.setBoundingRect(l[0],l[1],c[0]-l[0],c[1]-l[1])}}var _e,me,De,w=this.getBoundingRect(),D=u.get("layoutCenter"),I=u.get("layoutSize"),L=o.getWidth(),N=o.getHeight(),Z=w.width/w.height*this.aspectScale,se=!1;if(D&&I&&(_e=[It.GM(D[0],L),It.GM(D[1],N)],me=It.GM(I,Math.min(L,N)),!isNaN(_e[0])&&!isNaN(_e[1])&&!isNaN(me)&&(se=!0)),se)De={},Z>1?(De.width=me,De.height=me/Z):(De.height=me,De.width=me*Z),De.y=_e[1]-De.height/2,De.x=_e[0]-De.width/2;else{var Pe=u.getBoxLayoutParams();Pe.aspect=Z,De=Vr.ME(Pe,{width:L,height:N})}this.setViewRect(De.x,De.y,De.width,De.height),this.setCenter(u.get("center"),o),this.setZoom(u.get("zoom"))}const A0=new(function(){function u(){this.dimensions=_p}return u.prototype.create=function(o,a){var l=[];function c(f){return{nameProperty:f.get("nameProperty"),aspectScale:f.get("aspectScale"),projection:f.get("projection")}}o.eachComponent("geo",function(f,g){var m=f.get("map"),y=new ou(m+g,m,b.extend({nameMap:f.get("nameMap")},c(f)));y.zoomLimit=f.get("scaleLimit"),l.push(y),f.coordinateSystem=y,y.model=f,y.resize=Jw,y.resize(f,a)}),o.eachSeries(function(f){if("geo"===f.get("coordinateSystem")){var m=f.get("geoIndex")||0;f.coordinateSystem=l[m]}});var h={};return o.eachSeriesByType("map",function(f){if(!f.getHostGeoModel()){var g=f.getMapType();h[g]=h[g]||[],h[g].push(f)}}),b.each(h,function(f,g){var m=b.map(f,function(x){return x.get("nameMap")}),y=new ou(g,g,b.extend({nameMap:b.mergeAll(m)},c(f[0])));y.zoomLimit=b.retrieve.apply(null,b.map(f,function(x){return x.get("scaleLimit")})),l.push(y),y.resize=Jw,y.resize(f[0],a),b.each(f,function(x){x.coordinateSystem=y,function eS(u,o){b.each(o.get("geoCoord"),function(a,l){u.addGeoCoord(l,a)})}(y,x)})}),l},u.prototype.getFilledRegions=function(o,a,l,c){for(var h=(o||[]).slice(),f=b.createHashMap(),g=0;g<h.length;g++)f.set(h[g].name,h[g]);var m=Ds_load(a,l,c);return b.each(m.regions,function(y){var x=y.name;!f.get(x)&&h.push({name:x})}),h},u}()),JP=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.init=function(a,l,c){var h=Ds_getGeoResource(a.map);if(h&&"geoJSON"===h.type){var f=a.itemStyle=a.itemStyle||{};"color"in f||(f.color="#eee")}this.mergeDefaultAndTheme(a,c),xn.Cc(a,"label",["show"])},o.prototype.optionUpdated=function(){var a=this,l=this.option;l.regions=A0.getFilledRegions(l.regions,l.map,l.nameMap,l.nameProperty);var c={};this._optionModelMap=b.reduce(l.regions||[],function(h,f){var g=f.name;return g&&(h.set(g,new ka.Z(f,a,a.ecModel)),f.selected&&(c[g]=!0)),h},b.createHashMap()),l.selectedMap||(l.selectedMap=c)},o.prototype.getRegionModel=function(a){return this._optionModelMap.get(a)||new ka.Z(null,this,this.ecModel)},o.prototype.getFormattedLabel=function(a,l){var h=this.getRegionModel(a).get("normal"===l?["label","formatter"]:["emphasis","label","formatter"]),f={name:a};return b.isFunction(h)?(f.status=l,h(f)):b.isString(h)?h.replace("{a}",a??""):void 0},o.prototype.setZoom=function(a){this.option.zoom=a},o.prototype.setCenter=function(a){this.option.center=a},o.prototype.select=function(a){var l=this.option,c=l.selectedMode;c&&("multiple"!==c&&(l.selectedMap=null),(l.selectedMap||(l.selectedMap={}))[a]=!0)},o.prototype.unSelect=function(a){var l=this.option.selectedMap;l&&(l[a]=!1)},o.prototype.toggleSelected=function(a){this[this.isSelected(a)?"unSelect":"select"](a)},o.prototype.isSelected=function(a){var l=this.option.selectedMap;return!(!l||!l[a])},o.type="geo",o.layoutMode="box",o.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},o}(ma.Z);function md(u,o){return u.pointToProjected?u.pointToProjected(o):u.pointToData(o)}function _d(u,o,a,l){var c=u.getZoom(),h=u.getCenter(),f=o.zoom,g=u.projectedToPoint?u.projectedToPoint(h):u.dataToPoint(h);if(null!=o.dx&&null!=o.dy&&(g[0]-=o.dx,g[1]-=o.dy,u.setCenter(md(u,g),l)),null!=f){if(a){var m=a.min||0;f=Math.max(Math.min(c*f,a.max||1/0),m)/c}u.scaleX*=f,u.scaleY*=f;var w=(o.originY-u.y)*(f-1);u.x-=(o.originX-u.x)*(f-1),u.y-=w,u.updateTransform(),u.setCenter(md(u,g),l),u.setZoom(f*c)}return{center:u.getCenter(),zoom:u.getZoom()}}var I0=z(4649);const tS=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.focusBlurEnabled=!0,a}return(0,Tt.ZT)(o,u),o.prototype.init=function(a,l){this._api=l},o.prototype.render=function(a,l,c,h){if(this._model=a,!a.get("show"))return this._mapDraw&&this._mapDraw.remove(),void(this._mapDraw=null);this._mapDraw||(this._mapDraw=new $w(c));var f=this._mapDraw;f.draw(a,l,c,this,h),f.group.on("click",this._handleRegionClick,this),f.group.silent=a.get("silent"),this.group.add(f.group),this.updateSelectStatus(a,l,c)},o.prototype._handleRegionClick=function(a){var l;(0,I0.o)(a.target,function(c){return null!=(l=(0,Mr.A)(c).eventData)},!0),l&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:l.name})},o.prototype.updateSelectStatus=function(a,l,c){var h=this;this._mapDraw.group.traverse(function(f){var g=(0,Mr.A)(f).eventData;if(g)return h._model.isSelected(g.name)?c.enterSelect(f):c.leaveSelect(f),!0})},o.prototype.findHighDownDispatchers=function(a){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(a,this._model)},o.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},o.type="geo",o}(ga.Z);function e2(u,o,a){!function(u,o,a){if(o.svg){var l=new eo(u,o.svg);gd.set(u,l)}else{var c=o.geoJson||o.geoJSON;c&&!o.features?a=o.specialAreas:c=o,l=new $V(u,c,a),gd.set(u,l)}}(u,o,a)}function t2(u){function o(a,l){l.update="geo:updateSelectStatus",u.registerAction(l,function(c,h){var f={},g=[];return h.eachComponent({mainType:"geo",query:c},function(m){m[a](c.name),(0,b.each)(m.coordinateSystem.regions,function(w){f[w.name]=m.isSelected(w.name)||!1});var x=[];(0,b.each)(f,function(w,D){f[D]&&x.push(D)}),g.push({geoIndex:m.componentIndex,name:x})}),{selected:f,allSelected:g,name:c.name}})}u.registerCoordinateSystem("geo",A0),u.registerComponentModel(JP),u.registerComponentView(tS),u.registerImpl("registerMap",e2),u.registerImpl("getMap",function(a){return function(u){var o=gd.get(u);return o&&"geoJSON"===o.type&&o.getMapForUser()}(a)}),o("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),o("select",{type:"geoSelect",event:"geoselected"}),o("unSelect",{type:"geoUnSelect",event:"geounselected"}),u.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(a,l,c){var h=a.componentType||"series";l.eachComponent({mainType:h,query:a},function(f){var g=f.coordinateSystem;if("geo"===g.type){var m=_d(g,a,f.get("scaleLimit"),c);f.setCenter&&f.setCenter(m.center),f.setZoom&&f.setZoom(m.zoom),"series"===h&&(0,b.each)(f.seriesGroup,function(y){y.setCenter(m.center),y.setZoom(m.zoom)})}})})}var nS=z(6146);function Hg(u,o){var a=u.isExpand?u.children:[],l=u.parentNode.children,c=u.hierNode.i?l[u.hierNode.i-1]:null;if(a.length){!function aS(u){for(var o=u.children,a=o.length,l=0,c=0;--a>=0;){var h=o[a];h.hierNode.prelim+=l,h.hierNode.modifier+=l,l+=h.hierNode.shift+(c+=h.hierNode.change)}}(u);var h=(a[0].hierNode.prelim+a[a.length-1].hierNode.prelim)/2;c?(u.hierNode.prelim=c.hierNode.prelim+o(u,c),u.hierNode.modifier=u.hierNode.prelim-h):u.hierNode.prelim=h}else c&&(u.hierNode.prelim=c.hierNode.prelim+o(u,c));u.parentNode.hierNode.defaultAncestor=function qV(u,o,a,l){if(o){for(var c=u,h=u,f=h.parentNode.children[0],g=o,m=c.hierNode.modifier,y=h.hierNode.modifier,x=f.hierNode.modifier,w=g.hierNode.modifier;g=bp(g),h=P0(h),g&&h;){c=bp(c),f=P0(f),c.hierNode.ancestor=u;var D=g.hierNode.prelim+w-h.hierNode.prelim-y+l(g,h);D>0&&(Ug(oS(g,u,a),u,D),y+=D,m+=D),w+=g.hierNode.modifier,y+=h.hierNode.modifier,m+=c.hierNode.modifier,x+=f.hierNode.modifier}g&&!bp(c)&&(c.hierNode.thread=g,c.hierNode.modifier+=w-m),h&&!P0(f)&&(f.hierNode.thread=h,f.hierNode.modifier+=y-x,a=u)}return a}(u,c,u.parentNode.hierNode.defaultAncestor||l[0],o)}function rS(u){u.setLayout({x:u.hierNode.prelim+u.parentNode.hierNode.modifier},!0),u.hierNode.modifier+=u.parentNode.hierNode.modifier}function iS(u){return arguments.length?u:R0}function xh(u,o){return u-=Math.PI/2,{x:o*Math.cos(u),y:o*Math.sin(u)}}function bp(u){var o=u.children;return o.length&&u.isExpand?o[o.length-1]:u.hierNode.thread}function P0(u){var o=u.children;return o.length&&u.isExpand?o[0]:u.hierNode.thread}function oS(u,o,a){return u.hierNode.ancestor.parentNode===o.parentNode?u.hierNode.ancestor:a}function Ug(u,o,a){var l=a/(o.hierNode.i-u.hierNode.i);o.hierNode.change-=l,o.hierNode.shift+=a,o.hierNode.modifier+=a,o.hierNode.prelim+=a,u.hierNode.change+=l}function R0(u,o){return u.parentNode===o.parentNode?1:2}var Gu=z(9110),a2=function u(){this.parentPoint=[],this.childPoints=[]},o2=function(u){function o(a){return u.call(this,a)||this}return(0,Tt.ZT)(o,u),o.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},o.prototype.getDefaultShape=function(){return new a2},o.prototype.buildPath=function(a,l){var c=l.childPoints,h=c.length,f=l.parentPoint,g=c[0],m=c[h-1];if(1===h)return a.moveTo(f[0],f[1]),void a.lineTo(g[0],g[1]);var y=l.orient,x="TB"===y||"BT"===y?0:1,w=1-x,D=(0,It.GM)(l.forkPosition,1),I=[];I[x]=f[x],I[w]=f[w]+(m[w]-f[w])*D,a.moveTo(f[0],f[1]),a.lineTo(I[0],I[1]),a.moveTo(g[0],g[1]),I[x]=g[x],a.lineTo(I[0],I[1]),I[x]=m[x],a.lineTo(I[0],I[1]),a.lineTo(m[0],m[1]);for(var L=1;L<h-1;L++){var N=c[L];a.moveTo(N[0],N[1]),I[x]=N[x],a.lineTo(I[0],I[1])}},o}(ve.ZP);function xp(u,o){var a=u.getItemLayout(o);return a&&!isNaN(a.x)&&!isNaN(a.y)}function Gg(u,o,a,l,c){var h=!a,f=u.tree.getNodeByDataIndex(o),g=f.getModel(),m=f.getVisual("style").fill,y=!1===f.isExpand&&0!==f.children.length?m:"#fff",x=u.tree.root,w=f.parentNode===x?f:f.parentNode||f,D=u.getItemGraphicEl(w.dataIndex),I=w.getLayout(),L=D?{x:D.__oldX,y:D.__oldY,rawX:D.__radialOldRawX,rawY:D.__radialOldRawY}:I,N=f.getLayout();h?((a=new Jt(u,o,null,{symbolInnerColor:y,useNameLabel:!0})).x=L.x,a.y=L.y):a.updateData(u,o,null,{symbolInnerColor:y,useNameLabel:!0}),a.__radialOldRawX=a.__radialRawX,a.__radialOldRawY=a.__radialRawY,a.__radialRawX=N.rawX,a.__radialRawY=N.rawY,l.add(a),u.setItemGraphicEl(o,a),a.__oldX=a.x,a.__oldY=a.y,wn.D(a,{x:N.x,y:N.y},c);var Z=a.getSymbolPath();if("radial"===c.get("layout")){var se=x.children[0],_e=se.getLayout(),me=se.children.length,De=void 0,Pe=void 0;if(N.x===_e.x&&!0===f.isExpand&&se.children.length){var Ie={x:(se.children[0].getLayout().x+se.children[me-1].getLayout().x)/2,y:(se.children[0].getLayout().y+se.children[me-1].getLayout().y)/2};(De=Math.atan2(Ie.y-_e.y,Ie.x-_e.x))<0&&(De=2*Math.PI+De),(Pe=Ie.x<_e.x)&&(De-=Math.PI)}else(De=Math.atan2(N.y-_e.y,N.x-_e.x))<0&&(De=2*Math.PI+De),0===f.children.length||0!==f.children.length&&!1===f.isExpand?(Pe=N.x<_e.x)&&(De-=Math.PI):(Pe=N.x>_e.x)||(De-=Math.PI);var ke=Pe?"left":"right",Ue=g.getModel("label"),Ye=Ue.get("rotate"),Ke=Ye*(Math.PI/180),qe=Z.getTextContent();qe&&(Z.setTextConfig({position:Ue.get("position")||ke,rotation:null==Ye?-De:Ke,origin:"center"}),qe.setStyle("verticalAlign","middle"))}var ut=g.get(["emphasis","focus"]),pt="relative"===ut?b.concatArray(f.getAncestorsIndices(),f.getDescendantIndices()):"ancestor"===ut?f.getAncestorsIndices():"descendant"===ut?f.getDescendantIndices():null;pt&&((0,Mr.A)(a).focus=pt),function sS(u,o,a,l,c,h,f,g){var m=o.getModel(),y=u.get("edgeShape"),x=u.get("layout"),w=u.getOrient(),D=u.get(["lineStyle","curveness"]),I=u.get("edgeForkPosition"),L=m.getModel("lineStyle").getLineStyle(),N=l.__edge;if("curve"===y)o.parentNode&&o.parentNode!==a&&(N||(N=l.__edge=new nS.Z({shape:k0(x,w,D,c,c)})),wn.D(N,{shape:k0(x,w,D,h,f)},u));else if("polyline"===y&&"orthogonal"===x&&o!==a&&o.children&&0!==o.children.length&&!0===o.isExpand){for(var Z=o.children,se=[],_e=0;_e<Z.length;_e++){var me=Z[_e].getLayout();se.push([me.x,me.y])}N||(N=l.__edge=new o2({shape:{parentPoint:[f.x,f.y],childPoints:[[f.x,f.y]],orient:w,forkPosition:I}})),wn.D(N,{shape:{parentPoint:[f.x,f.y],childPoints:se}},u)}N&&("polyline"!==y||o.isExpand)&&(N.useStyle(b.defaults({strokeNoScale:!0,fill:null},L)),(0,Ut.WO)(N,m,"lineStyle"),(0,Ut.MA)(N),g.add(N))}(c,f,x,a,L,I,N,l),a.__edge&&(a.onHoverStateChange=function(yt){if("blur"!==yt){var wt=f.parentNode&&u.getItemGraphicEl(f.parentNode.dataIndex);wt&&wt.hoverState===Ut.CX||(0,Ut.Gl)(a.__edge,yt)}})}function L0(u,o,a,l,c){var f=O0(o.tree.root,u),g=f.source,m=f.sourceLayout,y=o.getItemGraphicEl(u.dataIndex);if(y){var x=o.getItemGraphicEl(g.dataIndex),D=y.__edge||(!1===g.isExpand||1===g.children.length?x.__edge:void 0),I=l.get("edgeShape"),L=l.get("layout"),N=l.get("orient"),Z=l.get(["lineStyle","curveness"]);D&&("curve"===I?wn.bX(D,{shape:k0(L,N,Z,m,m),style:{opacity:0}},l,{cb:function(){a.remove(D)},removeOpt:c}):"polyline"===I&&"orthogonal"===l.get("layout")&&wn.bX(D,{shape:{parentPoint:[m.x,m.y],childPoints:[[m.x,m.y]]},style:{opacity:0}},l,{cb:function(){a.remove(D)},removeOpt:c}))}}function O0(u,o){for(var l,a=o.parentNode===u?o:o.parentNode||o;null==(l=a.getLayout());)a=a.parentNode===u?a:a.parentNode||a;return{source:a,sourceLayout:l}}function Cc(u,o,a,l,c){var h=u.tree.getNodeByDataIndex(o),g=O0(u.tree.root,h).sourceLayout,m={duration:c.get("animationDurationUpdate"),easing:c.get("animationEasingUpdate")};wn.bX(a,{x:g.x+1,y:g.y+1},c,{cb:function(){l.remove(a),u.setItemGraphicEl(o,null)},removeOpt:m}),a.fadeOut(null,u.hostModel,{fadeLabel:!0,animation:m}),h.children.forEach(function(y){L0(y,u,l,c,m)}),L0(h,u,l,c,m)}function k0(u,o,a,l,c){var h,f,g,m,y,x,w,D;if("radial"===u){x=c.rawX,D=c.rawY;var I=xh(y=l.rawX,w=l.rawY),L=xh(y,w+(D-w)*a),N=xh(x,D+(w-D)*a),Z=xh(x,D);return{x1:I.x||0,y1:I.y||0,x2:Z.x||0,y2:Z.y||0,cpx1:L.x||0,cpy1:L.y||0,cpx2:N.x||0,cpy2:N.y||0}}return y=l.x,w=l.y,x=c.x,D=c.y,("LR"===o||"RL"===o)&&(h=y+(x-y)*a,f=w,g=x+(y-x)*a,m=D),("TB"===o||"BT"===o)&&(h=y,f=w+(D-w)*a,g=x,m=D+(w-D)*a),{x1:y,y1:w,x2:x,y2:D,cpx1:h,cpy1:f,cpx2:g,cpy2:m}}const s2=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a._mainGroup=new Pn.Z,a}return(0,Tt.ZT)(o,u),o.prototype.init=function(a,l){this._controller=new sp(l.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},o.prototype.render=function(a,l,c){var h=a.getData(),f=a.layoutInfo,g=this._mainGroup;"radial"===a.get("layout")?(g.x=f.x+f.width/2,g.y=f.y+f.height/2):(g.x=f.x,g.y=f.y),this._updateViewCoordSys(a,c),this._updateController(a,l,c);var y=this._data;h.diff(y).add(function(x){xp(h,x)&&Gg(h,x,null,g,a)}).update(function(x,w){var D=y.getItemGraphicEl(w);xp(h,x)?Gg(h,x,D,g,a):D&&Cc(y,w,D,g,a)}).remove(function(x){var w=y.getItemGraphicEl(x);w&&Cc(y,x,w,g,a)}).execute(),this._nodeScaleRatio=a.get("nodeScaleRatio"),this._updateNodeAndLinkScale(a),!0===a.get("expandAndCollapse")&&h.eachItemGraphicEl(function(x,w){x.off("click").on("click",function(){c.dispatchAction({type:"treeExpandAndCollapse",seriesId:a.id,dataIndex:w})})}),this._data=h},o.prototype._updateViewCoordSys=function(a,l){var c=a.getData(),h=[];c.each(function(w){var D=c.getItemLayout(w);D&&!isNaN(D.x)&&!isNaN(D.y)&&h.push([+D.x,+D.y])});var f=[],g=[];Gu.zk(h,f,g);var m=this._min,y=this._max;g[0]-f[0]==0&&(f[0]=m?m[0]:f[0]-1,g[0]=y?y[0]:g[0]+1),g[1]-f[1]==0&&(f[1]=m?m[1]:f[1]-1,g[1]=y?y[1]:g[1]+1);var x=a.coordinateSystem=new mp;x.zoomLimit=a.get("scaleLimit"),x.setBoundingRect(f[0],f[1],g[0]-f[0],g[1]-f[1]),x.setCenter(a.get("center"),l),x.setZoom(a.get("zoom")),this.group.attr({x:x.x,y:x.y,scaleX:x.scaleX,scaleY:x.scaleY}),this._min=f,this._max=g},o.prototype._updateController=function(a,l,c){var h=this,f=this._controller,g=this._controllerHost,m=this.group;f.setPointerChecker(function(y,x,w){var D=m.getBoundingRect();return D.applyTransform(m.transform),D.contain(x,w)&&!lp(y,c,a)}),f.enable(a.get("roam")),g.zoomLimit=a.get("scaleLimit"),g.zoom=a.coordinateSystem.getZoom(),f.off("pan").off("zoom").on("pan",function(y){Pg(g,y.dx,y.dy),c.dispatchAction({seriesId:a.id,type:"treeRoam",dx:y.dx,dy:y.dy})}).on("zoom",function(y){Rg(g,y.scale,y.originX,y.originY),c.dispatchAction({seriesId:a.id,type:"treeRoam",zoom:y.scale,originX:y.originX,originY:y.originY}),h._updateNodeAndLinkScale(a),c.updateLabelLayout()})},o.prototype._updateNodeAndLinkScale=function(a){var l=a.getData(),c=this._getNodeGlobalScale(a);l.eachItemGraphicEl(function(h,f){h.setSymbolScale(c)})},o.prototype._getNodeGlobalScale=function(a){var l=a.coordinateSystem;if("view"!==l.type)return 1;var c=this._nodeScaleRatio,h=l.scaleX||1;return((l.getZoom()-1)*c+1)/h},o.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},o.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},o.type="tree",o}(ia.Z);var lS=z(4844),l2=function(){function u(o,a){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=o||"",this.hostTree=a}return u.prototype.isRemoved=function(){return this.dataIndex<0},u.prototype.eachNode=function(o,a,l){b.isFunction(o)&&(l=a,a=o,o=null),b.isString(o=o||{})&&(o={order:o});var f,c=o.order||"preorder",h=this[o.attr||"children"];"preorder"===c&&(f=a.call(l,this));for(var g=0;!f&&g<h.length;g++)h[g].eachNode(o,a,l);"postorder"===c&&a.call(l,this)},u.prototype.updateDepthAndHeight=function(o){var a=0;this.depth=o;for(var l=0;l<this.children.length;l++){var c=this.children[l];c.updateDepthAndHeight(o+1),c.height>a&&(a=c.height)}this.height=a+1},u.prototype.getNodeById=function(o){if(this.getId()===o)return this;for(var a=0,l=this.children,c=l.length;a<c;a++){var h=l[a].getNodeById(o);if(h)return h}},u.prototype.contains=function(o){if(o===this)return!0;for(var a=0,l=this.children,c=l.length;a<c;a++){var h=l[a].contains(o);if(h)return h}},u.prototype.getAncestors=function(o){for(var a=[],l=o?this:this.parentNode;l;)a.push(l),l=l.parentNode;return a.reverse(),a},u.prototype.getAncestorsIndices=function(){for(var o=[],a=this;a;)o.push(a.dataIndex),a=a.parentNode;return o.reverse(),o},u.prototype.getDescendantIndices=function(){var o=[];return this.eachNode(function(a){o.push(a.dataIndex)}),o},u.prototype.getValue=function(o){var a=this.hostTree.data;return a.getStore().get(a.getDimensionIndex(o||"value"),this.dataIndex)},u.prototype.setLayout=function(o,a){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,o,a)},u.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},u.prototype.getModel=function(o){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(o)},u.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},u.prototype.setVisual=function(o,a){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,o,a)},u.prototype.getVisual=function(o){return this.hostTree.data.getItemVisual(this.dataIndex,o)},u.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},u.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},u.prototype.getChildIndex=function(){if(this.parentNode){for(var o=this.parentNode.children,a=0;a<o.length;++a)if(o[a]===this)return a;return-1}return-1},u.prototype.isAncestorOf=function(o){for(var a=o.parentNode;a;){if(a===this)return!0;a=a.parentNode}return!1},u.prototype.isDescendantOf=function(o){return o!==this&&o.isAncestorOf(this)},u}();const il=function(){function u(o){this.type="tree",this._nodes=[],this.hostModel=o}return u.prototype.eachNode=function(o,a,l){this.root.eachNode(o,a,l)},u.prototype.getNodeByDataIndex=function(o){var a=this.data.getRawIndex(o);return this._nodes[a]},u.prototype.getNodeById=function(o){return this.root.getNodeById(o)},u.prototype.update=function(){for(var o=this.data,a=this._nodes,l=0,c=a.length;l<c;l++)a[l].dataIndex=-1;for(l=0,c=o.count();l<c;l++)a[o.getRawIndex(l)].dataIndex=l},u.prototype.clearLayouts=function(){this.data.clearItemLayouts()},u.createTree=function(o,a,l){var c=new u(a),h=[],f=1;!function g(x,w){var D=x.value;f=Math.max(f,b.isArray(D)?D.length:1),h.push(x);var I=new l2((0,xn.U5)(x.name,""),c);w?function ks(u,o){u.parentNode!==o&&(o.children.push(u),u.parentNode=o)}(I,w):c.root=I,c._nodes.push(I);var L=x.children;if(L)for(var N=0;N<L.length;N++)g(L[N],I)}(o),c.root.updateDepthAndHeight(0);var m=(0,ct.Z)(h,{coordDimensions:["value"],dimensionsCount:f}).dimensions,y=new xt.Z(m,a);return y.initData(h),l&&l(y),(0,lS.Z)({mainData:y,struct:c,structAttr:"tree"}),c.update(),c},u}();function Cp(u,o,a){if(u&&b.indexOf(o,u.type)>=0){var l=a.getData().tree.root,c=u.targetNode;if(b.isString(c)&&(c=l.getNodeById(c)),c&&l.contains(c))return{node:c};var h=u.targetNodeId;if(null!=h&&(c=l.getNodeById(h)))return{node:c}}}function uS(u){for(var o=[];u;)(u=u.parentNode)&&o.push(u);return o.reverse()}function N0(u,o){var a=uS(u);return b.indexOf(a,o)>=0}function Wg(u,o){for(var a=[];u;){var l=u.dataIndex;a.push({name:u.name,dataIndex:l,value:o.getRawValue(l)}),u=u.parentNode}return a.reverse(),a}const d2=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.hasSymbolVisual=!0,a.ignoreStyleOnData=!0,a}return(0,Tt.ZT)(o,u),o.prototype.getInitialData=function(a){var l={name:a.name,children:a.data},h=new ka.Z(a.leaves||{},this,this.ecModel),f=il.createTree(l,this,function g(w){w.wrapMethod("getItemModel",function(D,I){var L=f.getNodeByDataIndex(I);return L&&L.children.length&&L.isExpand||(D.parentModel=h),D})}),m=0;f.eachNode("preorder",function(w){w.depth>m&&(m=w.depth)});var x=a.expandAndCollapse&&a.initialTreeDepth>=0?a.initialTreeDepth:m;return f.root.eachNode("preorder",function(w){var D=w.hostTree.data.getRawDataItem(w.dataIndex);w.isExpand=D&&null!=D.collapsed?!D.collapsed:w.depth<=x}),f.data},o.prototype.getOrient=function(){var a=this.get("orient");return"horizontal"===a?a="LR":"vertical"===a&&(a="TB"),a},o.prototype.setZoom=function(a){this.option.zoom=a},o.prototype.setCenter=function(a){this.option.center=a},o.prototype.formatTooltip=function(a,l,c){for(var h=this.getData().tree,f=h.root.children[0],g=h.getNodeByDataIndex(a),m=g.getValue(),y=g.name;g&&g!==f;)y=g.parentNode.name+"."+y,g=g.parentNode;return(0,ca.TX)("nameValue",{name:y,value:m,noValue:isNaN(m)||null==m})},o.prototype.getDataParams=function(a){var l=u.prototype.getDataParams.apply(this,arguments),c=this.getData().tree.getNodeByDataIndex(a);return l.treeAncestors=Wg(c,this),l.collapsed=!c.isExpand,l},o.type="series.tree",o.layoutMode="box",o.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},o}(Zi.Z);function wp(u,o){for(var l,a=[u];l=a.pop();)if(o(l),l.isExpand){var c=l.children;if(c.length)for(var h=c.length-1;h>=0;h--)a.push(c[h])}}function h2(u,o){u.eachSeriesByType("tree",function(a){!function f2(u,o){var a=function QV(u,o){return Vr.ME(u.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()})}(u,o);u.layoutInfo=a;var l=u.get("layout"),c=0,h=0,f=null;"radial"===l?(c=2*Math.PI,h=Math.min(a.height,a.width)/2,f=iS(function(me,De){return(me.parentNode===De.parentNode?1:2)/me.depth})):(c=a.width,h=a.height,f=iS());var g=u.getData().tree.root,m=g.children[0];if(m){(function r2(u){var o=u;o.hierNode={defaultAncestor:null,ancestor:o,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var l,c,a=[o];l=a.pop();)if(c=l.children,l.isExpand&&c.length)for(var f=c.length-1;f>=0;f--){var g=c[f];g.hierNode={defaultAncestor:null,ancestor:g,prelim:0,modifier:0,change:0,shift:0,i:f,thread:null},a.push(g)}})(g),function cS(u,o,a){for(var h,l=[u],c=[];h=l.pop();)if(c.push(h),h.isExpand){var f=h.children;if(f.length)for(var g=0;g<f.length;g++)l.push(f[g])}for(;h=c.pop();)o(h,a)}(m,Hg,f),g.hierNode.modifier=-m.hierNode.prelim,wp(m,rS);var y=m,x=m,w=m;wp(m,function(me){var De=me.getLayout().x;De<y.getLayout().x&&(y=me),De>x.getLayout().x&&(x=me),me.depth>w.depth&&(w=me)});var D=y===x?1:f(y,x)/2,I=D-y.getLayout().x,L=0,N=0,Z=0,se=0;if("radial"===l)L=c/(x.getLayout().x+D+I),N=h/(w.depth-1||1),wp(m,function(me){var De=xh(Z=(me.getLayout().x+I)*L,se=(me.depth-1)*N);me.setLayout({x:De.x,y:De.y,rawX:Z,rawY:se},!0)});else{var _e=u.getOrient();"RL"===_e||"LR"===_e?(N=h/(x.getLayout().x+D+I),L=c/(w.depth-1||1),wp(m,function(me){se=(me.getLayout().x+I)*N,me.setLayout({x:Z="LR"===_e?(me.depth-1)*L:c-(me.depth-1)*L,y:se},!0)})):("TB"===_e||"BT"===_e)&&(L=c/(x.getLayout().x+D+I),N=h/(w.depth-1||1),wp(m,function(me){Z=(me.getLayout().x+I)*L,me.setLayout({x:Z,y:se="TB"===_e?(me.depth-1)*N:h-(me.depth-1)*N},!0)}))}}}(a,o)})}function p2(u){u.eachSeriesByType("tree",function(o){var a=o.getData();a.tree.eachNode(function(c){var f=c.getModel().getModel("itemStyle").getItemStyle(),g=a.ensureUniqueItemVisual(c.dataIndex,"style");(0,b.extend)(g,f)})})}var Ch=["treemapZoomToNode","treemapRender","treemapMove"],Zg=z(1769);function F0(u){var o=u.getData(),l={};o.tree.eachNode(function(c){for(var h=c;h&&h.depth>1;)h=h.parentNode;var f=(0,Zg.i)(u.ecModel,h.name||h.dataIndex+"",l);c.setVisual("decal",f)})}function v2(u){var o=0;b.each(u.children,function(l){v2(l);var c=l.value;b.isArray(c)&&(c=c[0]),o+=c});var a=u.value;b.isArray(a)&&(a=a[0]),(null==a||isNaN(a))&&(a=o),a<0&&(a=0),b.isArray(u.value)?u.value[0]=a:u.value=a}const B0=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.preventUsingHoverLayer=!0,a}return(0,Tt.ZT)(o,u),o.prototype.getInitialData=function(a,l){var c={name:a.name,children:a.data};v2(c);var h=a.levels||[],f=this.designatedVisualItemStyle={},g=new ka.Z({itemStyle:f},this,l);h=a.levels=function t5(u,o){var a=(0,xn.kF)(o.get("color")),l=(0,xn.kF)(o.get(["aria","decal","decals"]));if(a){var c,h;b.each(u=u||[],function(g){var m=new ka.Z(g),y=m.get("color"),x=m.get("decal");(m.get(["itemStyle","color"])||y&&"none"!==y)&&(c=!0),(m.get(["itemStyle","decal"])||x&&"none"!==x)&&(h=!0)});var f=u[0]||(u[0]={});return c||(f.color=a.slice()),!h&&l&&(f.decal=l.slice()),u}}(h,l);var m=b.map(h||[],function(w){return new ka.Z(w,g,l)},this),y=il.createTree(c,this,function x(w){w.wrapMethod("getItemModel",function(D,I){var L=y.getNodeByDataIndex(I);return D.parentModel=(L?m[L.depth]:null)||g,D})});return y.data},o.prototype.optionUpdated=function(){this.resetViewRoot()},o.prototype.formatTooltip=function(a,l,c){var h=this.getData(),f=this.getRawValue(a),g=h.getName(a);return(0,ca.TX)("nameValue",{name:g,value:f})},o.prototype.getDataParams=function(a){var l=u.prototype.getDataParams.apply(this,arguments),c=this.getData().tree.getNodeByDataIndex(a);return l.treeAncestors=Wg(c,this),l.treePathInfo=l.treeAncestors,l},o.prototype.setLayoutInfo=function(a){this.layoutInfo=this.layoutInfo||{},b.extend(this.layoutInfo,a)},o.prototype.mapIdToIndex=function(a){var l=this._idIndexMap;l||(l=this._idIndexMap=b.createHashMap(),this._idIndexMapCount=0);var c=l.get(a);return null==c&&l.set(a,c=this._idIndexMapCount++),c},o.prototype.getViewRoot=function(){return this._viewRoot},o.prototype.resetViewRoot=function(a){a?this._viewRoot=a:a=this._viewRoot;var l=this.getRawData().tree.root;(!a||a!==l&&!l.contains(a))&&(this._viewRoot=l)},o.prototype.enableAriaDecal=function(){F0(this)},o.type="series.treemap",o.layoutMode="box",o.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25b6",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},o}(Zi.Z);var su=z(2650);function _2(u,o,a,l,c,h){var f=[[c?u:u-5,o],[u+a,o],[u+a,o+l],[c?u:u-5,o+l]];return!h&&f.splice(2,0,[u+a+5,o+l/2]),!c&&f.push([u,o+l/2]),f}function y2(u,o,a){(0,Mr.A)(u).eventData={componentType:"series",componentSubType:"treemap",componentIndex:o.componentIndex,seriesIndex:o.seriesIndex,seriesName:o.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:a&&a.dataIndex,name:a&&a.name},treePathInfo:a&&Wg(a,o)}}const b2=function(){function u(o){this.group=new Pn.Z,o.add(this.group)}return u.prototype.render=function(o,a,l,c){var h=o.getModel("breadcrumb"),f=this.group;if(f.removeAll(),h.get("show")&&l){var g=h.getModel("itemStyle"),m=h.getModel("emphasis"),y=g.getModel("textStyle"),x=m.getModel(["itemStyle","textStyle"]),w={pos:{left:h.get("left"),right:h.get("right"),top:h.get("top"),bottom:h.get("bottom")},box:{width:a.getWidth(),height:a.getHeight()},emptyItemWidth:h.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(l,w,y),this._renderContent(o,w,g,m,y,x,c),Vr.p$(f,w.pos,w.box)}},u.prototype._prepare=function(o,a,l){for(var c=o;c;c=c.parentNode){var h=(0,xn.U5)(c.getModel().get("name"),""),f=l.getTextRect(h),g=Math.max(f.width+16,a.emptyItemWidth);a.totalWidth+=g+8,a.renderList.push({node:c,text:h,width:g})}},u.prototype._renderContent=function(o,a,l,c,h,f,g){for(var m=0,y=a.emptyItemWidth,x=o.get(["breadcrumb","height"]),w=Vr.lq(a.pos,a.box),D=a.totalWidth,I=a.renderList,L=c.getModel("itemStyle").getItemStyle(),N=I.length-1;N>=0;N--){var Z=I[N],se=Z.node,_e=Z.width,me=Z.text;D>w.width&&(D-=_e-y,_e=y,me=null);var De=new tl.Z({shape:{points:_2(m,0,_e,x,N===I.length-1,0===N)},style:(0,b.defaults)(l.getItemStyle(),{lineJoin:"bevel"}),textContent:new _t.ZP({style:(0,qt.Lr)(h,{text:me})}),textConfig:{position:"inside"},z2:1e4*Ut.zr,onclick:(0,b.curry)(g,se)});De.disableLabelAnimation=!0,De.getTextContent().ensureState("emphasis").style=(0,qt.Lr)(f,{text:me}),De.ensureState("emphasis").style=L,(0,Ut.k5)(De,c.get("focus"),c.get("blurScope"),c.get("disabled")),this.group.add(De),y2(De,o,se),m+=_e+8}},u.prototype.remove=function(){this.group.removeAll()},u}();var hS=function(){function u(){this._storage=[],this._elExistsMap={}}return u.prototype.add=function(o,a,l,c,h){return!this._elExistsMap[o.id]&&(this._elExistsMap[o.id]=!0,this._storage.push({el:o,target:a,duration:l,delay:c,easing:h}),!0)},u.prototype.finished=function(o){return this._finishedCallback=o,this},u.prototype.start=function(){for(var o=this,a=this._storage.length,l=function(){--a<=0&&(o._storage.length=0,o._elExistsMap={},o._finishedCallback&&o._finishedCallback())},c=0,h=this._storage.length;c<h;c++){var f=this._storage[c];f.el.animateTo(f.target,{duration:f.duration,delay:f.delay,easing:f.easing,setToFinal:!0,done:l,aborted:l})}return this},u}(),V0=z(5632),Sp=Pn.Z,fS=Di.Z,vS="upperLabel",$g=10*Ut.zr,gS=2*Ut.zr,x2=3*Ut.zr,yd=(0,V0.Z)([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),mS=function(u){var o=yd(u);return o.stroke=o.fill=o.lineWidth=null,o},Kg=(0,xn.Yf)();const z0=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a._state="ready",a._storage={nodeGroup:[],background:[],content:[]},a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c,h){var f=l.findComponents({mainType:"series",subType:"treemap",query:h});if(!((0,b.indexOf)(f,a)<0)){this.seriesModel=a,this.api=c,this.ecModel=l;var m=Cp(h,["treemapZoomToNode","treemapRootToNode"],a),y=h&&h.type,x=a.layoutInfo,w=!this._oldTree,D=this._storage,I="treemapRootToNode"===y&&m&&D?{rootNodeGroup:D.nodeGroup[m.node.getRawIndex()],direction:h.direction}:null,L=this._giveContainerGroup(x),N=a.get("animation"),Z=this._doRender(L,a,I);!N||w||y&&"treemapZoomToNode"!==y&&"treemapRootToNode"!==y?Z.renderFinally():this._doAnimation(L,Z,a,I),this._resetController(c),this._renderBreadcrumb(a,c,m)}},o.prototype._giveContainerGroup=function(a){var l=this._containerGroup;return l||(l=this._containerGroup=new Sp,this._initEvents(l),this.group.add(l)),l.x=a.x,l.y=a.y,l},o.prototype._doRender=function(a,l,c){var h=l.getData().tree,f=this._oldTree,g={nodeGroup:[],background:[],content:[]},m={nodeGroup:[],background:[],content:[]},y=this._storage,x=[];function w(Z,se,_e,me){return function r5(u,o,a,l,c,h,f,g,m,y){if(f){var x=f.getLayout(),w=u.getData(),D=f.getModel();if(w.setItemGraphicEl(f.dataIndex,null),x&&x.isInView){var I=x.width,L=x.height,N=x.borderWidth,Z=x.invisible,se=f.getRawIndex(),_e=g&&g.getRawIndex(),me=f.viewChildren,De=x.upperHeight,Pe=me&&me.length,Ie=D.getModel("itemStyle"),ke=D.getModel(["emphasis","itemStyle"]),Ue=D.getModel(["blur","itemStyle"]),Ye=D.getModel(["select","itemStyle"]),Ke=Ie.get("borderRadius")||0,qe=Fr("nodeGroup",Sp);if(qe){if(m.add(qe),qe.x=x.x||0,qe.y=x.y||0,qe.markRedraw(),Kg(qe).nodeWidth=I,Kg(qe).nodeHeight=L,x.isAboveViewRoot)return qe;var ut=Fr("background",fS,y,gS);ut&&function dn(Yr,ir,Ci){var vi=(0,Mr.A)(ir);if(vi.dataIndex=f.dataIndex,vi.seriesIndex=u.seriesIndex,ir.setShape({x:0,y:0,width:I,height:L,r:Ke}),Z)Hn(ir);else{ir.invisible=!1;var Ni=f.getVisual("style"),ao=Ni.stroke,vo=mS(Ie);vo.fill=ao;var sa=yd(ke);sa.fill=ke.get("borderColor");var ba=yd(Ue);ba.fill=Ue.get("borderColor");var Aa=yd(Ye);Aa.fill=Ye.get("borderColor"),Ci?lr(ir,ao,Ni.opacity,{x:N,y:0,width:I-2*N,height:De}):ir.removeTextContent(),ir.setStyle(vo),ir.ensureState("emphasis").style=sa,ir.ensureState("blur").style=ba,ir.ensureState("select").style=Aa,(0,Ut.MA)(ir)}Yr.add(ir)}(qe,ut,Pe&&x.upperLabelHeight);var pt=D.getModel("emphasis"),yt=pt.get("focus"),wt=pt.get("blurScope"),kt=pt.get("disabled"),en="ancestor"===yt?f.getAncestorsIndices():"descendant"===yt?f.getDescendantIndices():yt;if(Pe)(0,Ut.Av)(qe)&&(0,Ut.Nj)(qe,!1),ut&&((0,Ut.Nj)(ut,!kt),w.setItemGraphicEl(f.dataIndex,ut),(0,Ut.Ib)(ut,en,wt));else{var jt=Fr("content",fS,y,x2);jt&&function Fn(Yr,ir){var Ci=(0,Mr.A)(ir);Ci.dataIndex=f.dataIndex,Ci.seriesIndex=u.seriesIndex;var vi=Math.max(I-2*N,0),Ni=Math.max(L-2*N,0);if(ir.culling=!0,ir.setShape({x:N,y:N,width:vi,height:Ni,r:Ke}),Z)Hn(ir);else{ir.invisible=!1;var ao=f.getVisual("style"),vo=ao.fill,sa=mS(Ie);sa.fill=vo,sa.decal=ao.decal;var ba=yd(ke),Aa=yd(Ue),vs=yd(Ye);lr(ir,vo,ao.opacity,null),ir.setStyle(sa),ir.ensureState("emphasis").style=ba,ir.ensureState("blur").style=Aa,ir.ensureState("select").style=vs,(0,Ut.MA)(ir)}Yr.add(ir)}(qe,jt),ut.disableMorphing=!0,ut&&(0,Ut.Av)(ut)&&(0,Ut.Nj)(ut,!1),(0,Ut.Nj)(qe,!kt),w.setItemGraphicEl(f.dataIndex,qe),(0,Ut.Ib)(qe,en,wt)}return qe}}}function Hn(Yr){!Yr.invisible&&h.push(Yr)}function lr(Yr,ir,Ci,vi){var Ni=D.getModel(vi?vS:"label"),ao=(0,xn.U5)(D.get("name"),null),vo=Ni.getShallow("show");(0,qt.ni)(Yr,(0,qt.k3)(D,vi?vS:"label"),{defaultText:vo?ao:null,inheritColor:ir,defaultOpacity:Ci,labelFetcher:u,labelDataIndex:f.dataIndex});var sa=Yr.getTextContent();if(sa){var ba=sa.style,Aa=(0,b.normalizeCssArray)(ba.padding||0);vi&&(Yr.setTextConfig({layoutRect:vi}),sa.disableLabelLayout=!0),sa.beforeUpdate=function(){var gl=Math.max((vi?vi.width:Yr.shape.width)-Aa[1]-Aa[3],0),Zo=Math.max((vi?vi.height:Yr.shape.height)-Aa[0]-Aa[2],0);(ba.width!==gl||ba.height!==Zo)&&sa.setStyle({width:gl,height:Zo})},ba.truncateMinChar=2,ba.lineOverflow="truncate",br(ba,vi,x);var vs=sa.getState("emphasis");br(vs?vs.style:null,vi,x)}}function br(Yr,ir,Ci){var vi=Yr?Yr.text:null;if(!ir&&Ci.isLeafRoot&&null!=vi){var Ni=u.get("drillDownIcon",!0);Yr.text=Ni?Ni+" "+vi:vi}}function Fr(Yr,ir,Ci,vi){var Ni=null!=_e&&a[Yr][_e],ao=c[Yr];return Ni?(a[Yr][_e]=null,function xi(Yr,ir){var Ci=Yr[se]={};ir instanceof Sp?(Ci.oldX=ir.x,Ci.oldY=ir.y):Ci.oldShape=(0,b.extend)({},ir.shape)}(ao,Ni)):Z||((Ni=new ir)instanceof xc.ZP&&(Ni.z2=function Dp(u,o){return u*$g+o}(Ci,vi)),function Oi(Yr,ir){var Ci=Yr[se]={},vi=f.parentNode,Ni=ir instanceof Pn.Z;if(vi&&(!l||"drillDown"===l.direction)){var ao=0,vo=0,sa=c.background[vi.getRawIndex()];!l&&sa&&sa.oldShape&&(ao=sa.oldShape.width,vo=sa.oldShape.height),Ni?(Ci.oldX=0,Ci.oldY=vo):Ci.oldShape={x:ao,y:vo,width:0,height:0}}Ci.fadein=!Ni}(ao,Ni)),o[Yr][se]=Ni}}(l,m,y,c,g,x,Z,se,_e,me)}!function I(Z,se,_e,me,De){function Pe(ke){return ke.getId()}function Ie(ke,Ue){var Ye=null!=ke?Z[ke]:null,Ke=null!=Ue?se[Ue]:null,qe=w(Ye,Ke,_e,De);qe&&I(Ye&&Ye.viewChildren||[],Ke&&Ke.viewChildren||[],qe,me,De+1)}me?(se=Z,(0,b.each)(Z,function(ke,Ue){!ke.isRemoved()&&Ie(Ue,Ue)})):new su.Z(se,Z,Pe,Pe).add(Ie).update(Ie).remove((0,b.curry)(Ie,null)).execute()}(h.root?[h.root]:[],f&&f.root?[f.root]:[],a,h===f||!f,0);var D=function L(Z){var se={nodeGroup:[],background:[],content:[]};return Z&&(0,b.each)(Z,function(_e,me){var De=se[me];(0,b.each)(_e,function(Pe){Pe&&(De.push(Pe),Kg(Pe).willDelete=!0)})}),se}(y);return this._oldTree=h,this._storage=m,{lastsForAnimation:g,willDeleteEls:D,renderFinally:function N(){(0,b.each)(D,function(Z){(0,b.each)(Z,function(se){se.parent&&se.parent.remove(se)})}),(0,b.each)(x,function(Z){Z.invisible=!0,Z.dirty()})}}},o.prototype._doAnimation=function(a,l,c,h){var f=c.get("animationDurationUpdate"),g=c.get("animationEasing"),m=((0,b.isFunction)(f)?0:f)||0,y=((0,b.isFunction)(g)?null:g)||"cubicOut",x=function Xg(){return new hS}();(0,b.each)(l.willDeleteEls,function(w,D){(0,b.each)(w,function(I,L){if(!I.invisible){var Z,N=I.parent,se=Kg(N);if(h&&"drillDown"===h.direction)Z=N===h.rootNodeGroup?{shape:{x:0,y:0,width:se.nodeWidth,height:se.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var _e=0,me=0;se.willDelete||(_e=se.nodeWidth/2,me=se.nodeHeight/2),Z="nodeGroup"===D?{x:_e,y:me,style:{opacity:0}}:{shape:{x:_e,y:me,width:0,height:0},style:{opacity:0}}}Z&&x.add(I,Z,m,0,y)}})}),(0,b.each)(this._storage,function(w,D){(0,b.each)(w,function(I,L){var N=l.lastsForAnimation[D][L],Z={};!N||(I instanceof Pn.Z?null!=N.oldX&&(Z.x=I.x,Z.y=I.y,I.x=N.oldX,I.y=N.oldY):(N.oldShape&&(Z.shape=(0,b.extend)({},I.shape),I.setShape(N.oldShape)),N.fadein?(I.setStyle("opacity",0),Z.style={opacity:1}):1!==I.style.opacity&&(Z.style={opacity:1})),x.add(I,Z,m,0,y))})},this),this._state="animating",x.finished((0,b.bind)(function(){this._state="ready",l.renderFinally()},this)).start()},o.prototype._resetController=function(a){var l=this._controller;l||((l=this._controller=new sp(a.getZr())).enable(this.seriesModel.get("roam")),l.on("pan",(0,b.bind)(this._onPan,this)),l.on("zoom",(0,b.bind)(this._onZoom,this)));var c=new yr.Z(0,0,a.getWidth(),a.getHeight());l.setPointerChecker(function(h,f,g){return c.contain(f,g)})},o.prototype._clearController=function(){var a=this._controller;a&&(a.dispose(),a=null)},o.prototype._onPan=function(a){if("animating"!==this._state&&(Math.abs(a.dx)>3||Math.abs(a.dy)>3)){var l=this.seriesModel.getData().tree.root;if(!l)return;var c=l.getLayout();if(!c)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:c.x+a.dx,y:c.y+a.dy,width:c.width,height:c.height}})}},o.prototype._onZoom=function(a){var l=a.originX,c=a.originY;if("animating"!==this._state){var h=this.seriesModel.getData().tree.root;if(!h)return;var f=h.getLayout();if(!f)return;var g=new yr.Z(f.x,f.y,f.width,f.height),m=this.seriesModel.layoutInfo;l-=m.x,c-=m.y;var y=yi.create();yi.translate(y,y,[-l,-c]),yi.scale(y,y,[a.scale,a.scale]),yi.translate(y,y,[l,c]),g.applyTransform(y),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:g.x,y:g.y,width:g.width,height:g.height}})}},o.prototype._initEvents=function(a){var l=this;a.on("click",function(c){if("ready"===l._state){var h=l.seriesModel.get("nodeClick",!0);if(h){var f=l.findTarget(c.offsetX,c.offsetY);if(f){var g=f.node;if(g.getLayout().isLeafRoot)l._rootToNode(f);else if("zoomToNode"===h)l._zoomToNode(f);else if("link"===h){var m=g.hostTree.data.getItemModel(g.dataIndex),y=m.get("link",!0),x=m.get("target",!0)||"blank";y&&(0,Va.MI)(y,x)}}}}},this)},o.prototype._renderBreadcrumb=function(a,l,c){var h=this;c||(c=null!=a.get("leafDepth",!0)?{node:a.getViewRoot()}:this.findTarget(l.getWidth()/2,l.getHeight()/2))||(c={node:a.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new b2(this.group))).render(a,l,c.node,function(f){"animating"!==h._state&&(N0(a.getViewRoot(),f)?h._rootToNode({node:f}):h._zoomToNode({node:f}))})},o.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},o.prototype.dispose=function(){this._clearController()},o.prototype._zoomToNode=function(a){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:a.node})},o.prototype._rootToNode=function(a){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:a.node})},o.prototype.findTarget=function(a,l){var c;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(f){var g=this._storage.background[f.getRawIndex()];if(g){var m=g.transformCoordToLocal(a,l),y=g.shape;if(!(y.x<=m[0]&&m[0]<=y.x+y.width&&y.y<=m[1]&&m[1]<=y.y+y.height))return!1;c={node:f,offsetX:m[0],offsetY:m[1]}}},this),c},o.type="treemap",o}(ia.Z);var wh=b.each,_S=b.isObject,H0=function(){function u(o){var a=o.mappingMethod,l=o.type,c=this.option=b.clone(o);this.type=l,this.mappingMethod=a,this._normalizeData=Jg[a];var h=u.visualHandlers[l];this.applyVisual=h.applyVisual,this.getColorMapper=h.getColorMapper,this._normalizedToVisual=h._normalizedToVisual[a],"piecewise"===a?(Tp(c),function yS(u){var o=u.pieceList;u.hasSpecialVisual=!1,b.each(o,function(a,l){a.originIndex=l,null!=a.visual&&(u.hasSpecialVisual=!0)})}(c)):"category"===a?c.categories?function bS(u){var o=u.categories,a=u.categoryMap={},l=u.visual;if(wh(o,function(f,g){a[f]=g}),!b.isArray(l)){var c=[];b.isObject(l)?wh(l,function(f,g){c[a[g]??-1]=f}):c[-1]=l,l=qg(u,c)}for(var h=o.length-1;h>=0;h--)null==l[h]&&(delete a[o[h]],o.pop())}(c):Tp(c,!0):(b.assert("linear"!==a||c.dataExtent),Tp(c))}return u.prototype.mapValueToVisual=function(o){var a=this._normalizeData(o);return this._normalizedToVisual(a,o)},u.prototype.getNormalizer=function(){return b.bind(this._normalizeData,this)},u.listVisualTypes=function(){return b.keys(u.visualHandlers)},u.isValidType=function(o){return u.visualHandlers.hasOwnProperty(o)},u.eachVisual=function(o,a,l){b.isObject(o)?b.each(o,a,l):a.call(l,o)},u.mapVisual=function(o,a,l){var c,h=b.isArray(o)?[]:b.isObject(o)?{}:(c=!0,null);return u.eachVisual(o,function(f,g){var m=a.call(l,f,g);c?h=m:h[g]=m}),h},u.retrieveVisuals=function(o){var l,a={};return o&&wh(u.visualHandlers,function(c,h){o.hasOwnProperty(h)&&(a[h]=o[h],l=!0)}),l?a:null},u.prepareVisualTypes=function(o){if(b.isArray(o))o=o.slice();else{if(!_S(o))return[];var a=[];wh(o,function(l,c){a.push(c)}),o=a}return o.sort(function(l,c){return"color"===c&&"color"!==l&&0===l.indexOf("color")?1:-1}),o},u.dependsOn=function(o,a){return"color"===a?!(!o||0!==o.indexOf(a)):o===a},u.findPieceIndex=function(o,a,l){for(var c,h=1/0,f=0,g=a.length;f<g;f++){var m=a[f].value;if(null!=m){if(m===o||b.isString(m)&&m===o+"")return f;l&&D(m,f)}}for(f=0,g=a.length;f<g;f++){var y=a[f],x=y.interval,w=y.close;if(x){if(x[0]===-1/0){if(em(w[1],o,x[1]))return f}else if(x[1]===1/0){if(em(w[0],x[0],o))return f}else if(em(w[0],x[0],o)&&em(w[1],o,x[1]))return f;l&&D(x[0],f),l&&D(x[1],f)}}if(l)return o===1/0?a.length-1:o===-1/0?0:c;function D(I,L){var N=Math.abs(I-o);N<h&&(h=N,c=L)}},u.visualHandlers={color:{applyVisual:bd("color"),getColorMapper:function(){var o=this.option;return b.bind("category"===o.mappingMethod?function(a,l){return!l&&(a=this._normalizeData(a)),Sh.call(this,a)}:function(a,l,c){var h=!!c;return!l&&(a=this._normalizeData(a)),c=Da.fastLerp(a,o.parsedVisual,c),h?c:Da.stringify(c,"rgba")},this)},_normalizedToVisual:{linear:function(o){return Da.stringify(Da.fastLerp(o,this.option.parsedVisual),"rgba")},category:Sh,piecewise:function(o,a){var l=G0.call(this,a);return null==l&&(l=Da.stringify(Da.fastLerp(o,this.option.parsedVisual),"rgba")),l},fixed:wc}},colorHue:U0(function(o,a){return Da.modifyHSL(o,a)}),colorSaturation:U0(function(o,a){return Da.modifyHSL(o,null,a)}),colorLightness:U0(function(o,a){return Da.modifyHSL(o,null,null,a)}),colorAlpha:U0(function(o,a){return Da.modifyAlpha(o,a)}),decal:{applyVisual:bd("decal"),_normalizedToVisual:{linear:null,category:Sh,piecewise:null,fixed:null}},opacity:{applyVisual:bd("opacity"),_normalizedToVisual:ju([0,1])},liftZ:{applyVisual:bd("liftZ"),_normalizedToVisual:{linear:wc,category:wc,piecewise:wc,fixed:wc}},symbol:{applyVisual:function(o,a,l){l("symbol",this.mapValueToVisual(o))},_normalizedToVisual:{linear:xS,category:Sh,piecewise:function(o,a){var l=G0.call(this,a);return null==l&&(l=xS.call(this,o)),l},fixed:wc}},symbolSize:{applyVisual:bd("symbolSize"),_normalizedToVisual:ju([0,1])}},u}();function Tp(u,o){var a=u.visual,l=[];b.isObject(a)?wh(a,function(h){l.push(h)}):null!=a&&l.push(a),!o&&1===l.length&&!{color:1,symbol:1}.hasOwnProperty(u.type)&&(l[1]=l[0]),qg(u,l)}function U0(u){return{applyVisual:function(o,a,l){var c=this.mapValueToVisual(o);l("color",u(a("color"),c))},_normalizedToVisual:ju([0,1])}}function xS(u){var o=this.option.visual;return o[Math.round((0,It.NU)(u,[0,1],[0,o.length-1],!0))]||{}}function bd(u){return function(o,a,l){l(u,this.mapValueToVisual(o))}}function Sh(u){var o=this.option.visual;return o[this.option.loop&&-1!==u?u%o.length:u]}function wc(){return this.option.visual[0]}function ju(u){return{linear:function(o){return(0,It.NU)(o,u,this.option.visual,!0)},category:Sh,piecewise:function(o,a){var l=G0.call(this,a);return null==l&&(l=(0,It.NU)(o,u,this.option.visual,!0)),l},fixed:wc}}function G0(u){var o=this.option,a=o.pieceList;if(o.hasSpecialVisual){var c=a[H0.findPieceIndex(u,a)];if(c&&c.visual)return c.visual[this.type]}}function qg(u,o){return u.visual=o,"color"===u.type&&(u.parsedVisual=b.map(o,function(a){return Da.parse(a)||[0,0,0,1]})),o}var Jg={linear:function(u){return(0,It.NU)(u,this.option.dataExtent,[0,1],!0)},piecewise:function(u){var o=this.option.pieceList,a=H0.findPieceIndex(u,o,!0);if(null!=a)return(0,It.NU)(a,[0,o.length-1],[0,1],!0)},category:function(u){return(this.option.categories?this.option.categoryMap[u]:u)??-1},fixed:b.noop};function em(u,o,a){return u?o<=a:o<a}const to=H0;var Zu=(0,xn.Yf)();const CS={seriesType:"treemap",reset:function(u){var a=u.getData().tree.root;a.isRemoved()||nm(a,{},u.getViewRoot().getAncestors(),u)}};function nm(u,o,a,l){var c=u.getModel(),h=u.getLayout(),f=u.hostTree.data;if(h&&!h.invisible&&h.isInView){var D,g=c.getModel("itemStyle"),m=function w2(u,o,a){var l=(0,b.extend)({},o),c=a.designatedVisualItemStyle;return(0,b.each)(["color","colorAlpha","colorSaturation"],function(h){c[h]=o[h];var f=u.get(h);c[h]=null,null!=f&&(l[h]=f)}),l}(g,o,l),y=f.ensureUniqueItemVisual(u.dataIndex,"style"),x=g.get("borderColor"),w=g.get("borderColorSaturation");null!=w&&(x=function SS(u,o){return null!=o?(0,Da.modifyHSL)(o,null,null,u):null}(w,D=wS(m))),y.stroke=x;var I=u.viewChildren;if(I&&I.length){var L=function S2(u,o,a,l,c,h){if(h&&h.length){var f=W0(o,"color")||null!=c.color&&"none"!==c.color&&(W0(o,"colorAlpha")||W0(o,"colorSaturation"));if(f){var g=o.get("visualMin"),m=o.get("visualMax"),y=a.dataExtent.slice();null!=g&&g<y[0]&&(y[0]=g),null!=m&&m>y[1]&&(y[1]=m);var x=o.get("colorMappingBy"),w={type:f.name,dataExtent:y,visual:f.range};"color"!==w.type||"index"!==x&&"id"!==x?w.mappingMethod="linear":(w.mappingMethod="category",w.loop=!0);var D=new to(w);return Zu(D).drColorMappingBy=x,D}}}(0,c,h,0,m,I);(0,b.each)(I,function(N,Z){if(N.depth>=a.length||N===a[N.depth]){var se=function D2(u,o,a,l,c,h){var f=(0,b.extend)({},o);if(c){var g=c.type,m="color"===g&&Zu(c).drColorMappingBy,y="index"===m?l:"id"===m?h.mapIdToIndex(a.getId()):a.getValue(u.get("visualDimension"));f[g]=c.mapValueToVisual(y)}return f}(c,m,N,Z,L,l);nm(N,se,a,l)}})}else D=wS(m),y.fill=D}}function wS(u){var o=Sc(u,"color");if(o){var a=Sc(u,"colorAlpha"),l=Sc(u,"colorSaturation");return l&&(o=(0,Da.modifyHSL)(o,null,null,l)),a&&(o=(0,Da.modifyAlpha)(o,a)),o}}function Sc(u,o){var a=u[o];if(null!=a&&"none"!==a)return a}function W0(u,o){var a=u.get(o);return(0,b.isArray)(a)&&a.length?{name:o,range:a}:null}var Ep=Math.max,Dh=Math.min,DS=b.retrieve,rm=b.each,MS=["itemStyle","borderWidth"],TS=["itemStyle","gapWidth"],a5=["upperLabel","show"],M2=["upperLabel","height"];const xd={seriesType:"treemap",reset:function(u,o,a,l){var c=a.getWidth(),h=a.getHeight(),f=u.option,g=Vr.ME(u.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()}),m=f.size||[],y=(0,It.GM)(DS(g.width,m[0]),c),x=(0,It.GM)(DS(g.height,m[1]),h),w=l&&l.type,I=Cp(l,["treemapZoomToNode","treemapRootToNode"],u),L="treemapRender"===w||"treemapMove"===w?l.rootRect:null,N=u.getViewRoot(),Z=uS(N);if("treemapMove"!==w){var se="treemapZoomToNode"===w?function E2(u,o,a,l,c){var h=(o||{}).node,f=[l,c];if(!h||h===a)return f;for(var g,m=l*c,y=m*u.option.zoomToNodeRatio;g=h.parentNode;){for(var x=0,w=g.children,D=0,I=w.length;D<I;D++)x+=w[D].getValue();var L=h.getValue();if(0===L)return f;y*=x/L;var N=g.getModel(),Z=N.get(MS);(y+=4*Z*Z+(3*Z+Math.max(Z,AS(N)))*Math.pow(y,.5))>It.YM&&(y=It.YM),h=g}y<m&&(y=m);var _e=Math.pow(y/m,.5);return[l*_e,c*_e]}(u,I,N,y,x):L?[L.width,L.height]:[y,x],_e=f.sort;_e&&"asc"!==_e&&"desc"!==_e&&(_e="desc");var me={squareRatio:f.squareRatio,sort:_e,leafDepth:f.leafDepth};N.hostTree.clearLayouts();var De={x:0,y:0,width:se[0],height:se[1],area:se[0]*se[1]};N.setLayout(De),ES(N,me,!1,0),De=N.getLayout(),rm(Z,function(Ie,ke){var Ue=(Z[ke+1]||N).getValue();Ie.setLayout(b.extend({dataExtent:[Ue,Ue],borderWidth:0,upperHeight:0},De))})}var Pe=u.getData().tree.root;Pe.setLayout(function A2(u,o,a){if(o)return{x:o.x,y:o.y};var l={x:0,y:0};if(!a)return l;var c=a.node,h=c.getLayout();if(!h)return l;for(var f=[h.width/2,h.height/2],g=c;g;){var m=g.getLayout();f[0]+=m.x,f[1]+=m.y,g=g.parentNode}return{x:u.width/2-f[0],y:u.height/2-f[1]}}(g,L,I),!0),u.setLayoutInfo(g),Dc(Pe,new yr.Z(-g.x,-g.y,c,h),Z,N,0)}};function ES(u,o,a,l){var c,h;if(!u.isRemoved()){var f=u.getLayout();c=f.width,h=f.height;var g=u.getModel(),m=g.get(MS),y=g.get(TS)/2,x=AS(g),w=Math.max(m,x),D=m-y,I=w-y;u.setLayout({borderWidth:m,upperHeight:w,upperLabelHeight:x},!0);var L=(c=Ep(c-2*D,0))*(h=Ep(h-D-I,0)),N=function Mh(u,o,a,l,c,h){var f=u.children||[],g=l.sort;"asc"!==g&&"desc"!==g&&(g=null);var m=null!=l.leafDepth&&l.leafDepth<=h;if(c&&!m)return u.viewChildren=[];f=b.filter(f,function(I){return!I.isRemoved()}),function T2(u,o){o&&u.sort(function(a,l){var c="asc"===o?a.getValue()-l.getValue():l.getValue()-a.getValue();return 0===c?"asc"===o?a.dataIndex-l.dataIndex:l.dataIndex-a.dataIndex:c})}(f,g);var y=function o5(u,o,a){for(var l=0,c=0,h=o.length;c<h;c++)l+=o[c].getValue();var g,f=u.get("visualDimension");return o&&o.length?"value"===f&&a?(g=[o[o.length-1].getValue(),o[0].getValue()],"asc"===a&&g.reverse()):(g=[1/0,-1/0],rm(o,function(m){var y=m.getValue(f);y<g[0]&&(g[0]=y),y>g[1]&&(g[1]=y)})):g=[NaN,NaN],{sum:l,dataExtent:g}}(o,f,g);if(0===y.sum)return u.viewChildren=[];if(y.sum=function Nr(u,o,a,l,c){if(!l)return a;for(var h=u.get("visibleMin"),f=c.length,g=f,m=f-1;m>=0;m--){var y=c["asc"===l?f-m-1:m].getValue();y/a*o<h&&(g=m,a-=y)}return c.splice("asc"===l?0:g,f-g),a}(o,a,y.sum,g,f),0===y.sum)return u.viewChildren=[];for(var x=0,w=f.length;x<w;x++){var D=f[x].getValue()/y.sum*a;f[x].setLayout({area:D})}return m&&(f.length&&u.setLayout({isLeafRoot:!0},!0),f.length=0),u.viewChildren=f,u.setLayout({dataExtent:y.dataExtent},!0),f}(u,g,L,o,a,l);if(N.length){var Z={x:D,y:I,width:c,height:h},se=Dh(c,h),_e=1/0,me=[];me.area=0;for(var De=0,Pe=N.length;De<Pe;){var Ie=N[De];me.push(Ie),me.area+=Ie.getLayout().area;var ke=Ap(me,se,o.squareRatio);ke<=_e?(De++,_e=ke):(me.area-=me.pop().getLayout().area,lu(me,se,Z,y,!1),se=Dh(Z.width,Z.height),me.length=me.area=0,_e=1/0)}if(me.length&&lu(me,se,Z,y,!0),!a){var Ue=g.get("childrenVisibleMin");null!=Ue&&L<Ue&&(a=!0)}for(De=0,Pe=N.length;De<Pe;De++)ES(N[De],o,a,l+1)}}}function Ap(u,o,a){for(var l=0,c=1/0,h=0,f=void 0,g=u.length;h<g;h++)(f=u[h].getLayout().area)&&(f<c&&(c=f),f>l&&(l=f));var m=u.area*u.area,y=o*o*a;return m?Ep(y*l/m,m/(y*c)):1/0}function lu(u,o,a,l,c){var h=o===a.width?0:1,f=1-h,g=["x","y"],m=["width","height"],y=a[g[h]],x=o?u.area/o:0;(c||x>a[m[f]])&&(x=a[m[f]]);for(var w=0,D=u.length;w<D;w++){var I=u[w],L={},N=x?I.getLayout().area/x:0,Z=L[m[f]]=Ep(x-2*l,0),se=a[g[h]]+a[m[h]]-y,_e=w===D-1||se<N?se:N,me=L[m[h]]=Ep(_e-2*l,0);L[g[f]]=a[g[f]]+Dh(l,Z/2),L[g[h]]=y+Dh(l,me/2),y+=_e,I.setLayout(L,!0)}a[g[f]]+=x,a[m[f]]-=x}function Dc(u,o,a,l,c){var h=u.getLayout(),f=a[c],g=f&&f===u;if(!(f&&!g||c===a.length&&u!==l)){u.setLayout({isInView:!0,invisible:!g&&!o.intersect(h),isAboveViewRoot:g},!0);var m=new yr.Z(o.x-h.x,o.y-h.y,o.width,o.height);rm(u.viewChildren||[],function(y){Dc(y,m,a,l,c+1)})}}function AS(u){return u.get(a5)?u.get(M2):0}function I2(u){var o=u.findComponents({mainType:"legend"});!o||!o.length||u.eachSeriesByType("graph",function(a){var l=a.getCategoriesData(),h=a.getGraph().data,f=l.mapArray(l.getName);h.filterSelf(function(g){var y=h.getItemModel(g).getShallow("category");if(null!=y){(0,b.isNumber)(y)&&(y=f[y]);for(var x=0;x<o.length;x++)if(!o[x].isSelected(y))return!1}return!0})})}function P2(u){var o={};u.eachSeriesByType("graph",function(a){var l=a.getCategoriesData(),c=a.getData(),h={};l.each(function(f){var g=l.getName(f);h["ec-"+g]=f;var m=l.getItemModel(f),y=m.getModel("itemStyle").getItemStyle();y.fill||(y.fill=a.getColorFromPalette(g,o)),l.setItemVisual(f,"style",y);for(var x=["symbol","symbolSize","symbolKeepAspect"],w=0;w<x.length;w++){var D=m.getShallow(x[w],!0);null!=D&&l.setItemVisual(f,x[w],D)}}),l.count()&&c.each(function(f){var m=c.getItemModel(f).getShallow("category");if(null!=m){(0,b.isString)(m)&&(m=h["ec-"+m]);var y=l.getItemVisual(m,"style"),x=c.ensureUniqueItemVisual(f,"style");(0,b.extend)(x,y);for(var w=["symbol","symbolSize","symbolKeepAspect"],D=0;D<w.length;D++)c.setItemVisual(f,w[D],l.getItemVisual(m,w[D]))}})})}function Th(u){return u instanceof Array||(u=[u,u]),u}function s5(u){u.eachSeriesByType("graph",function(o){var a=o.getGraph(),l=o.getEdgeData(),c=Th(o.get("edgeSymbol")),h=Th(o.get("edgeSymbolSize"));l.setVisual("fromSymbol",c&&c[0]),l.setVisual("toSymbol",c&&c[1]),l.setVisual("fromSymbolSize",h&&h[0]),l.setVisual("toSymbolSize",h&&h[1]),l.setVisual("style",o.getModel("lineStyle").getLineStyle()),l.each(function(f){var g=l.getItemModel(f),m=a.getEdgeByIndex(f),y=Th(g.getShallow("symbol",!0)),x=Th(g.getShallow("symbolSize",!0)),w=g.getModel("lineStyle").getLineStyle(),D=l.ensureUniqueItemVisual(f,"style");switch((0,b.extend)(D,w),D.stroke){case"source":var I=m.node1.getVisual("style");D.stroke=I&&I.fill;break;case"target":I=m.node2.getVisual("style"),D.stroke=I&&I.fill}y[0]&&m.setVisual("fromSymbol",y[0]),y[1]&&m.setVisual("toSymbol",y[1]),x[0]&&m.setVisual("fromSymbolSize",x[0]),x[1]&&m.setVisual("toSymbolSize",x[1])})})}var Eh=function(u){return u.get("autoCurveness")||null},R2=function(u,o){var a=Eh(u),l=20,c=[];if(b.isNumber(a))l=a;else if(b.isArray(a))return void(u.__curvenessList=a);o>l&&(l=o);var h=l%2?l+2:l+3;c=[];for(var f=0;f<h;f++)c.push((f%2?f+1:f)/10*(f%2?-1:1));u.__curvenessList=c},im=function(u,o,a){var l=[u.id,u.dataIndex].join("."),c=[o.id,o.dataIndex].join(".");return[a.uid,l,c].join("--\x3e")},L2=function(u){var o=u.split("--\x3e");return[o[0],o[2],o[1]].join("--\x3e")},Z0=function(u,o){var a=o.__edgeMap;return a[u]?a[u].length:0};function am(u,o,a,l){var c=Eh(o),h=b.isArray(c);if(!c)return null;var f=function(u,o){var a=im(u.node1,u.node2,o);return o.__edgeMap[a]}(u,o);if(!f)return null;for(var g=-1,m=0;m<f.length;m++)if(f[m]===a){g=m;break}var y=function(u,o){return Z0(im(u.node1,u.node2,o),o)+Z0(im(u.node2,u.node1,o),o)}(u,o);R2(o,y),u.lineStyle=u.lineStyle||{};var x=im(u.node1,u.node2,o),w=o.__curvenessList,D=h||y%2?0:1;if(f.isForward)return w[D+g];var I=L2(x),L=Z0(I,o),N=w[g+L+D];return l?h?c&&0===c[0]?(L+D)%2?N:-N:((L%2?0:1)+D)%2?N:-N:(L+D)%2?N:-N:w[g+L+D]}function X0(u){var o=u.coordinateSystem;if(!o||"view"===o.type){var a=u.getGraph();a.eachNode(function(l){var c=l.getModel();l.setLayout([+c.get("x"),+c.get("y")])}),om(a,u)}}function om(u,o){u.eachEdge(function(a,l){var c=b.retrieve3(a.getModel().get(["lineStyle","curveness"]),-am(a,o,l,!0),0),h=Kn.clone(a.node1.getLayout()),f=Kn.clone(a.node2.getLayout()),g=[h,f];+c&&g.push([(h[0]+f[0])/2-(h[1]-f[1])*c,(h[1]+f[1])/2-(f[0]-h[0])*c]),a.setLayout(g)})}function $0(u,o){u.eachSeriesByType("graph",function(a){var l=a.get("layout"),c=a.coordinateSystem;if(c&&"view"!==c.type){var h=a.getData(),f=[];(0,b.each)(c.dimensions,function(D){f=f.concat(h.mapDimensionsAll(D))});for(var g=0;g<h.count();g++){for(var m=[],y=!1,x=0;x<f.length;x++){var w=h.get(f[x],g);isNaN(w)||(y=!0),m.push(w)}h.setItemLayout(g,y?c.dataToPoint(m):[NaN,NaN])}om(h.graph,a)}else(!l||"none"===l)&&X0(a)})}function Ip(u){var o=u.coordinateSystem;if("view"!==o.type)return 1;var a=u.option.nodeScaleRatio,l=o.scaleX;return((o.getZoom()-1)*a+1)/l}function Cd(u){var o=u.getVisual("symbolSize");return o instanceof Array&&(o=(o[0]+o[1])/2),+o}var uu=Math.PI,K0=[];function Q0(u,o,a,l){var c=u.coordinateSystem;if(!c||"view"===c.type){var h=c.getBoundingRect(),f=u.getData(),g=f.graph,m=h.width/2+h.x,y=h.height/2+h.y,x=Math.min(h.width,h.height)/2,w=f.count();if(f.setLayout({cx:m,cy:y}),w){if(a){var D=c.pointToData(l),N=[D[0]-m,D[1]-y];Kn.normalize(N,N),Kn.scale(N,N,x),a.setLayout([m+N[0],y+N[1]],!0),q0(a,u.get(["circular","rotateLabel"]),m,y)}O2[o](u,g,f,x,m,y,w),g.eachEdge(function(se,_e){var Ie,me=b.retrieve3(se.getModel().get(["lineStyle","curveness"]),am(se,u,_e),0),De=Kn.clone(se.node1.getLayout()),Pe=Kn.clone(se.node2.getLayout());+me&&(Ie=[m*(me*=3)+(De[0]+Pe[0])/2*(1-me),y*me+(De[1]+Pe[1])/2*(1-me)]),se.setLayout([De,Pe,Ie])})}}}var O2={value:function(u,o,a,l,c,h,f){var g=0,m=a.getSum("value"),y=2*Math.PI/(m||f);o.eachNode(function(x){var w=x.getValue("value"),D=y*(m?w:1)/2;g+=D,x.setLayout([l*Math.cos(g)+c,l*Math.sin(g)+h]),g+=D})},symbolSize:function(u,o,a,l,c,h,f){var g=0;K0.length=f;var m=Ip(u);o.eachNode(function(w){var D=Cd(w);isNaN(D)&&(D=2),D<0&&(D=0),D*=m;var I=Math.asin(D/2/l);isNaN(I)&&(I=uu/2),K0[w.dataIndex]=I,g+=2*I});var y=(2*uu-g)/f/2,x=0;o.eachNode(function(w){var D=y+K0[w.dataIndex];x+=D,(!w.getLayout()||!w.getLayout().fixed)&&w.setLayout([l*Math.cos(x)+c,l*Math.sin(x)+h]),x+=D})}};function q0(u,o,a,l){var c=u.getGraphicEl();if(c){var f=u.getModel().get(["label","rotate"])||0,g=c.getSymbolPath();if(o){var m=u.getLayout(),y=Math.atan2(m[1]-l,m[0]-a);y<0&&(y=2*Math.PI+y);var x=m[0]<a;x&&(y-=Math.PI);var w=x?"left":"right";g.setTextConfig({rotation:-y,position:w,origin:"center"});var D=g.ensureState("emphasis");b.extend(D.textConfig||(D.textConfig={}),{position:w})}else g.setTextConfig({rotation:f*=Math.PI/180})}}function k2(u){u.eachSeriesByType("graph",function(o){"circular"===o.get("layout")&&Q0(o,"symbolSize")})}var Ah=Kn.scaleAndAdd;function F2(u){u.eachSeriesByType("graph",function(o){var a=o.coordinateSystem;if(!a||"view"===a.type)if("force"===o.get("layout")){var l=o.preservedPoints||{},c=o.getGraph(),h=c.data,f=c.edgeData,g=o.getModel("force"),m=g.get("initLayout");o.preservedPoints?h.each(function(me){var De=h.getId(me);h.setItemLayout(me,l[De]||[NaN,NaN])}):m&&"none"!==m?"circular"===m&&Q0(o,"value"):X0(o);var y=h.getDataExtent("value"),x=f.getDataExtent("value"),w=g.get("repulsion"),D=g.get("edgeLength"),I=b.isArray(w)?w:[w,w],L=b.isArray(D)?D:[D,D];L=[L[1],L[0]];var N=h.mapArray("value",function(me,De){var Pe=h.getItemLayout(De),Ie=(0,It.NU)(me,y,I);return isNaN(Ie)&&(Ie=(I[0]+I[1])/2),{w:Ie,rep:Ie,fixed:h.getItemModel(De).get("fixed"),p:!Pe||isNaN(Pe[0])||isNaN(Pe[1])?null:Pe}}),Z=f.mapArray("value",function(me,De){var Pe=c.getEdgeByIndex(De),Ie=(0,It.NU)(me,x,L);isNaN(Ie)&&(Ie=(L[0]+L[1])/2);var ke=Pe.getModel(),Ue=b.retrieve3(Pe.getModel().get(["lineStyle","curveness"]),-am(Pe,o,De,!0),0);return{n1:N[Pe.node1.dataIndex],n2:N[Pe.node2.dataIndex],d:Ie,curveness:Ue,ignoreForceLayout:ke.get("ignoreForceLayout")}}),se=a.getBoundingRect(),_e=function N2(u,o,a){for(var l=u,c=o,h=a.rect,f=h.width,g=h.height,m=[h.x+f/2,h.y+g/2],y=a.gravity??.1,x=0;x<l.length;x++){var w=l[x];w.p||(w.p=Kn.create(f*(Math.random()-.5)+m[0],g*(Math.random()-.5)+m[1])),w.pp=Kn.clone(w.p),w.edges=null}var L,N,D=a.friction??.6,I=D;return{warmUp:function(){I=.8*D},setFixed:function(Z){l[Z].fixed=!0},setUnfixed:function(Z){l[Z].fixed=!1},beforeStep:function(Z){L=Z},afterStep:function(Z){N=Z},step:function(Z){L&&L(l,c);for(var se=[],_e=l.length,me=0;me<c.length;me++){var De=c[me];if(!De.ignoreForceLayout){Kn.sub(se,(Ie=De.n2).p,(Pe=De.n1).p);var ke=Kn.len(se)-De.d,Ue=Ie.w/(Pe.w+Ie.w);isNaN(Ue)&&(Ue=0),Kn.normalize(se,se),!Pe.fixed&&Ah(Pe.p,Pe.p,se,Ue*ke*I),!Ie.fixed&&Ah(Ie.p,Ie.p,se,-(1-Ue)*ke*I)}}for(me=0;me<_e;me++)(Ye=l[me]).fixed||(Kn.sub(se,m,Ye.p),Ah(Ye.p,Ye.p,se,y*I));for(me=0;me<_e;me++)for(var Pe=l[me],Ke=me+1;Ke<_e;Ke++){var Ie;Kn.sub(se,(Ie=l[Ke]).p,Pe.p),0===(ke=Kn.len(se))&&(Kn.set(se,Math.random()-.5,Math.random()-.5),ke=1);var qe=(Pe.rep+Ie.rep)/ke/ke;!Pe.fixed&&Ah(Pe.pp,Pe.pp,se,qe),!Ie.fixed&&Ah(Ie.pp,Ie.pp,se,-qe)}var ut=[];for(me=0;me<_e;me++){var Ye;(Ye=l[me]).fixed||(Kn.sub(ut,Ye.p,Ye.pp),Ah(Ye.p,Ye.p,ut,I),Kn.copy(Ye.pp,Ye.p))}var pt=(I*=.992)<.01;N&&N(l,c,pt),Z&&Z(pt)}}}(N,Z,{rect:se,gravity:g.get("gravity"),friction:g.get("friction")});_e.beforeStep(function(me,De){for(var Pe=0,Ie=me.length;Pe<Ie;Pe++)me[Pe].fixed&&Kn.copy(me[Pe].p,c.getNodeByIndex(Pe).getLayout())}),_e.afterStep(function(me,De,Pe){for(var Ie=0,ke=me.length;Ie<ke;Ie++)me[Ie].fixed||c.getNodeByIndex(Ie).setLayout(me[Ie].p),l[h.getId(Ie)]=me[Ie].p;for(Ie=0,ke=De.length;Ie<ke;Ie++){var Ue=De[Ie],Ye=c.getEdgeByIndex(Ie),Ke=Ue.n1.p,qe=Ue.n2.p,ut=Ye.getLayout();(ut=ut?ut.slice():[])[0]=ut[0]||[],ut[1]=ut[1]||[],Kn.copy(ut[0],Ke),Kn.copy(ut[1],qe),+Ue.curveness&&(ut[2]=[(Ke[0]+qe[0])/2-(Ke[1]-qe[1])*Ue.curveness,(Ke[1]+qe[1])/2-(qe[0]-Ke[0])*Ue.curveness]),Ye.setLayout(ut)}}),o.forceLayout=_e,o.preservedPoints=l,_e.step()}else o.forceLayout=null})}function B2(u,o){var a=[];return u.eachSeriesByType("graph",function(l){var c=l.get("coordinateSystem");if(!c||"view"===c){var h=l.getData(),f=h.mapArray(function(Z){var se=h.getItemModel(Z);return[+se.get("x"),+se.get("y")]}),g=[],m=[];Gu.zk(f,g,m),m[0]-g[0]==0&&(m[0]+=1,g[0]-=1),m[1]-g[1]==0&&(m[1]+=1,g[1]-=1);var y=(m[0]-g[0])/(m[1]-g[1]),x=function J0(u,o,a){var l=(0,b.extend)(u.getBoxLayoutParams(),{aspect:a});return(0,Vr.ME)(l,{width:o.getWidth(),height:o.getHeight()})}(l,o,y);isNaN(y)&&(g=[x.x,x.y],m=[x.x+x.width,x.y+x.height]);var w=m[0]-g[0],D=m[1]-g[1],I=x.width,L=x.height,N=l.coordinateSystem=new mp;N.zoomLimit=l.get("scaleLimit"),N.setBoundingRect(g[0],g[1],w,D),N.setViewRect(x.x,x.y,I,L),N.setCenter(l.get("center"),o),N.setZoom(l.get("zoom")),a.push(N)}}),a}var RS=Ei.Z.prototype,eb=nS.Z.prototype,tb=function u(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1};function nb(u){return isNaN(+u.cpx1)||isNaN(+u.cpy1)}!function(u){(0,Tt.ZT)(function o(){return null!==u&&u.apply(this,arguments)||this},u)}(tb);const rb=function(u){function o(a){var l=u.call(this,a)||this;return l.type="ec-line",l}return(0,Tt.ZT)(o,u),o.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},o.prototype.getDefaultShape=function(){return new tb},o.prototype.buildPath=function(a,l){nb(l)?RS.buildPath.call(this,a,l):eb.buildPath.call(this,a,l)},o.prototype.pointAt=function(a){return nb(this.shape)?RS.pointAt.call(this,a):eb.pointAt.call(this,a)},o.prototype.tangentAt=function(a){var l=this.shape,c=nb(l)?[l.x2-l.x1,l.y2-l.y1]:eb.tangentAt.call(this,a);return Kn.normalize(c,c)},o}(ve.ZP);var sm=["fromSymbol","toSymbol"];function lm(u){return"_"+u+"Type"}function Io(u,o,a){var l=o.getItemVisual(a,u);if(l&&"none"!==l){var c=o.getItemVisual(a,u+"Size"),h=o.getItemVisual(a,u+"Rotate"),f=o.getItemVisual(a,u+"Offset"),g=o.getItemVisual(a,u+"KeepAspect"),m=ai.zp(c),y=ai.Cq(f||0,m),x=ai.th(l,-m[0]/2+y[0],-m[1]/2+y[1],m[0],m[1],null,g);return x.__specifiedRotation=null==h||isNaN(h)?void 0:+h*Math.PI/180||0,x.name=u,x}}function um(u,o){u.x1=o[0][0],u.y1=o[0][1],u.x2=o[1][0],u.y2=o[1][1],u.percent=1;var a=o[2];a?(u.cpx1=a[0],u.cpy1=a[1]):(u.cpx1=NaN,u.cpy1=NaN)}const ib=function(u){function o(a,l,c){var h=u.call(this)||this;return h._createLine(a,l,c),h}return(0,Tt.ZT)(o,u),o.prototype._createLine=function(a,l,c){var h=a.hostModel,g=function Pp(u){var o=new rb({name:"line",subPixelOptimize:!0});return um(o.shape,u),o}(a.getItemLayout(l));g.shape.percent=0,wn.KZ(g,{shape:{percent:1}},h,l),this.add(g),(0,b.each)(sm,function(m){var y=Io(m,a,l);this.add(y),this[lm(m)]=a.getItemVisual(l,m)},this),this._updateCommonStl(a,l,c)},o.prototype.updateData=function(a,l,c){var h=a.hostModel,f=this.childOfName("line"),g=a.getItemLayout(l),m={shape:{}};um(m.shape,g),wn.D(f,m,h,l),(0,b.each)(sm,function(y){var x=a.getItemVisual(l,y),w=lm(y);if(this[w]!==x){this.remove(this.childOfName(y));var D=Io(y,a,l);this.add(D)}this[w]=x},this),this._updateCommonStl(a,l,c)},o.prototype.getLinePath=function(){return this.childAt(0)},o.prototype._updateCommonStl=function(a,l,c){var h=a.hostModel,f=this.childOfName("line"),g=c&&c.emphasisLineStyle,m=c&&c.blurLineStyle,y=c&&c.selectLineStyle,x=c&&c.labelStatesModels,w=c&&c.emphasisDisabled,D=c&&c.focus,I=c&&c.blurScope;if(!c||a.hasItemOption){var L=a.getItemModel(l),N=L.getModel("emphasis");g=N.getModel("lineStyle").getLineStyle(),m=L.getModel(["blur","lineStyle"]).getLineStyle(),y=L.getModel(["select","lineStyle"]).getLineStyle(),w=N.get("disabled"),D=N.get("focus"),I=N.get("blurScope"),x=(0,qt.k3)(L)}var Z=a.getItemVisual(l,"style"),se=Z.stroke;f.useStyle(Z),f.style.fill=null,f.style.strokeNoScale=!0,f.ensureState("emphasis").style=g,f.ensureState("blur").style=m,f.ensureState("select").style=y,(0,b.each)(sm,function(Ie){var ke=this.childOfName(Ie);if(ke){ke.setColor(se),ke.style.opacity=Z.opacity;for(var Ue=0;Ue<Ut.L1.length;Ue++){var Ye=Ut.L1[Ue],Ke=f.getState(Ye);if(Ke){var qe=Ke.style||{},ut=ke.ensureState(Ye),pt=ut.style||(ut.style={});null!=qe.stroke&&(pt[ke.__isEmptyBrush?"stroke":"fill"]=qe.stroke),null!=qe.opacity&&(pt.opacity=qe.opacity)}}ke.markRedraw()}},this);var _e=h.getRawValue(l);(0,qt.ni)(this,x,{labelDataIndex:l,labelFetcher:{getFormattedLabel:function(Ie,ke){return h.getFormattedLabel(Ie,ke,a.dataType)}},inheritColor:se||"#000",defaultOpacity:Z.opacity,defaultText:(null==_e?a.getName(l):isFinite(_e)?(0,It.NM)(_e):_e)+""});var me=this.getTextContent();if(me){var De=x.normal;me.__align=me.style.align,me.__verticalAlign=me.style.verticalAlign,me.__position=De.get("position")||"middle";var Pe=De.get("distance");(0,b.isArray)(Pe)||(Pe=[Pe,Pe]),me.__labelDistance=Pe}this.setTextConfig({position:null,local:!0,inside:!1}),(0,Ut.k5)(this,D,I,w)},o.prototype.highlight=function(){(0,Ut.fD)(this)},o.prototype.downplay=function(){(0,Ut.Mh)(this)},o.prototype.updateLayout=function(a,l){this.setLinePoints(a.getItemLayout(l))},o.prototype.setLinePoints=function(a){var l=this.childOfName("line");um(l.shape,a),l.dirty()},o.prototype.beforeUpdate=function(){var a=this,l=a.childOfName("fromSymbol"),c=a.childOfName("toSymbol"),h=a.getTextContent();if(l||c||h&&!h.ignore){for(var f=1,g=this.parent;g;)g.scaleX&&(f/=g.scaleX),g=g.parent;var m=a.childOfName("line");if(this.__dirty||m.__dirty){var y=m.shape.percent,x=m.pointAt(0),w=m.pointAt(y),D=Kn.sub([],w,x);if(Kn.normalize(D,D),l&&(l.setPosition(x),I(l,0),l.scaleX=l.scaleY=f*y,l.markRedraw()),c&&(c.setPosition(w),I(c,1),c.scaleX=c.scaleY=f*y,c.markRedraw()),h&&!h.ignore){h.x=h.y=0,h.originX=h.originY=0;var L=void 0,N=void 0,Z=h.__labelDistance,se=Z[0]*f,_e=Z[1]*f,me=y/2,De=m.tangentAt(me),Pe=[De[1],-De[0]],Ie=m.pointAt(me);Pe[1]>0&&(Pe[0]=-Pe[0],Pe[1]=-Pe[1]);var ke=De[0]<0?-1:1;if("start"!==h.__position&&"end"!==h.__position){var Ue=-Math.atan2(De[1],De[0]);w[0]<x[0]&&(Ue=Math.PI+Ue),h.rotation=Ue}var Ye=void 0;switch(h.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":Ye=-_e,N="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":Ye=_e,N="top";break;default:Ye=0,N="middle"}switch(h.__position){case"end":h.x=D[0]*se+w[0],h.y=D[1]*_e+w[1],L=D[0]>.8?"left":D[0]<-.8?"right":"center",N=D[1]>.8?"top":D[1]<-.8?"bottom":"middle";break;case"start":h.x=-D[0]*se+x[0],h.y=-D[1]*_e+x[1],L=D[0]>.8?"right":D[0]<-.8?"left":"center",N=D[1]>.8?"bottom":D[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":h.x=se*ke+x[0],h.y=x[1]+Ye,L=De[0]<0?"right":"left",h.originX=-se*ke,h.originY=-Ye;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":h.x=Ie[0],h.y=Ie[1]+Ye,L="center",h.originY=-Ye;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":h.x=-se*ke+w[0],h.y=w[1]+Ye,L=De[0]>=0?"right":"left",h.originX=se*ke,h.originY=-Ye}h.scaleX=h.scaleY=f,h.setStyle({verticalAlign:h.__verticalAlign||N,align:h.__align||L})}}}function I(Ke,qe){var ut=Ke.__specifiedRotation;if(null==ut){var pt=m.tangentAt(qe);Ke.attr("rotation",(1===qe?-1:1)*Math.PI/2-Math.atan2(pt[1],pt[0]))}else Ke.attr("rotation",ut)}},o}(Pn.Z);function ab(u){var o=u.hostModel,a=o.getModel("emphasis");return{lineStyle:o.getModel("lineStyle").getLineStyle(),emphasisLineStyle:a.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:o.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:o.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:a.get("disabled"),blurScope:a.get("blurScope"),focus:a.get("focus"),labelStatesModels:(0,qt.k3)(o)}}function OS(u){return isNaN(u[0])||isNaN(u[1])}function cm(u){return u&&!OS(u[0])&&!OS(u[1])}const ob=function(){function u(o){this.group=new Pn.Z,this._LineCtor=o||ib}return u.prototype.updateData=function(o){var a=this;this._progressiveEls=null;var l=this,c=l.group,h=l._lineData;l._lineData=o,h||c.removeAll();var f=ab(o);o.diff(h).add(function(g){a._doAdd(o,g,f)}).update(function(g,m){a._doUpdate(h,o,m,g,f)}).remove(function(g){c.remove(h.getItemGraphicEl(g))}).execute()},u.prototype.updateLayout=function(){var o=this._lineData;!o||o.eachItemGraphicEl(function(a,l){a.updateLayout(o,l)},this)},u.prototype.incrementalPrepareUpdate=function(o){this._seriesScope=ab(o),this._lineData=null,this.group.removeAll()},u.prototype.incrementalUpdate=function(o,a){function l(g){!g.isGroup&&!function z2(u){return u.animators&&u.animators.length>0}(g)&&(g.incremental=!0,g.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[];for(var c=o.start;c<o.end;c++)if(cm(a.getItemLayout(c))){var f=new this._LineCtor(a,c,this._seriesScope);f.traverse(l),this.group.add(f),a.setItemGraphicEl(c,f),this._progressiveEls.push(f)}},u.prototype.remove=function(){this.group.removeAll()},u.prototype.eachRendered=function(o){_n.traverseElements(this._progressiveEls||this.group,o)},u.prototype._doAdd=function(o,a,l){if(cm(o.getItemLayout(a))){var h=new this._LineCtor(o,a,l);o.setItemGraphicEl(a,h),this.group.add(h)}},u.prototype._doUpdate=function(o,a,l,c,h){var f=o.getItemGraphicEl(l);cm(a.getItemLayout(c))?(f?f.updateData(a,c,h):f=new this._LineCtor(a,c,h),a.setItemGraphicEl(c,f),this.group.add(f)):this.group.remove(f)},u}();var sb=[],lb=[],ub=[],Ih=Cs.Zm,Mc=Kn.distSquare,cu=Math.abs;function kS(u,o,a){for(var g,l=u[0],c=u[1],h=u[2],f=1/0,m=a*a,y=.1,x=.1;x<=.9;x+=.1)sb[0]=Ih(l[0],c[0],h[0],x),sb[1]=Ih(l[1],c[1],h[1],x),(w=cu(Mc(sb,o)-m))<f&&(f=w,g=x);for(var D=0;D<32;D++){var I=g+y;lb[0]=Ih(l[0],c[0],h[0],g),lb[1]=Ih(l[1],c[1],h[1],g),ub[0]=Ih(l[0],c[0],h[0],I),ub[1]=Ih(l[1],c[1],h[1],I);var w=Mc(lb,o)-m;if(cu(w)<.01)break;var L=Mc(ub,o)-m;y/=2,w<0?L>=0?g+=y:g-=y:L>=0?g-=y:g+=y}return g}function cb(u,o){var a=[],l=Cs.Lx,c=[[],[],[]],h=[[],[]],f=[];o/=2,u.eachEdge(function(g,m){var y=g.getLayout(),x=g.getVisual("fromSymbol"),w=g.getVisual("toSymbol");y.__original||(y.__original=[Kn.clone(y[0]),Kn.clone(y[1])],y[2]&&y.__original.push(Kn.clone(y[2])));var D=y.__original;if(null!=y[2]){if(Kn.copy(c[0],D[0]),Kn.copy(c[1],D[2]),Kn.copy(c[2],D[1]),x&&"none"!==x){var I=Cd(g.node1),L=kS(c,D[0],I*o);l(c[0][0],c[1][0],c[2][0],L,a),c[0][0]=a[3],c[1][0]=a[4],l(c[0][1],c[1][1],c[2][1],L,a),c[0][1]=a[3],c[1][1]=a[4]}w&&"none"!==w&&(I=Cd(g.node2),L=kS(c,D[1],I*o),l(c[0][0],c[1][0],c[2][0],L,a),c[1][0]=a[1],c[2][0]=a[2],l(c[0][1],c[1][1],c[2][1],L,a),c[1][1]=a[1],c[2][1]=a[2]),Kn.copy(y[0],c[0]),Kn.copy(y[1],c[2]),Kn.copy(y[2],c[1])}else Kn.copy(h[0],D[0]),Kn.copy(h[1],D[1]),Kn.sub(f,h[1],h[0]),Kn.normalize(f,f),x&&"none"!==x&&(I=Cd(g.node1),Kn.scaleAndAdd(h[0],h[0],f,I*o)),w&&"none"!==w&&(I=Cd(g.node2),Kn.scaleAndAdd(h[1],h[1],f,-I*o)),Kn.copy(y[0],h[0]),Kn.copy(y[1],h[1])})}function H2(u){return"view"===u.type}const NS=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.init=function(a,l){var c=new rd,h=new ob,f=this.group;this._controller=new sp(l.getZr()),this._controllerHost={target:f},f.add(c.group),f.add(h.group),this._symbolDraw=c,this._lineDraw=h,this._firstRender=!0},o.prototype.render=function(a,l,c){var h=this,f=a.coordinateSystem;this._model=a;var g=this._symbolDraw,m=this._lineDraw,y=this.group;if(H2(f)){var x={x:f.x,y:f.y,scaleX:f.scaleX,scaleY:f.scaleY};this._firstRender?y.attr(x):wn.D(y,x,a)}cb(a.getGraph(),Ip(a));var w=a.getData();g.updateData(w);var D=a.getEdgeData();m.updateData(D),this._updateNodeAndLinkScale(),this._updateController(a,l,c),clearTimeout(this._layoutTimeout);var I=a.forceLayout,L=a.get(["force","layoutAnimation"]);I&&this._startForceLayoutIteration(I,L);var N=a.get("layout");w.graph.eachNode(function(me){var De=me.dataIndex,Pe=me.getGraphicEl(),Ie=me.getModel();if(Pe){Pe.off("drag").off("dragend");var ke=Ie.get("draggable");ke&&Pe.on("drag",function(Ye){switch(N){case"force":I.warmUp(),!h._layouting&&h._startForceLayoutIteration(I,L),I.setFixed(De),w.setItemLayout(De,[Pe.x,Pe.y]);break;case"circular":w.setItemLayout(De,[Pe.x,Pe.y]),me.setLayout({fixed:!0},!0),Q0(a,"symbolSize",me,[Ye.offsetX,Ye.offsetY]),h.updateLayout(a);break;default:w.setItemLayout(De,[Pe.x,Pe.y]),om(a.getGraph(),a),h.updateLayout(a)}}).on("dragend",function(){I&&I.setUnfixed(De)}),Pe.setDraggable(ke&&!!I,!!Ie.get("cursor")),"adjacency"===Ie.get(["emphasis","focus"])&&((0,Mr.A)(Pe).focus=me.getAdjacentDataIndices())}}),w.graph.eachEdge(function(me){var De=me.getGraphicEl(),Pe=me.getModel().get(["emphasis","focus"]);!De||"adjacency"===Pe&&((0,Mr.A)(De).focus={edge:[me.dataIndex],node:[me.node1.dataIndex,me.node2.dataIndex]})});var Z="circular"===a.get("layout")&&a.get(["circular","rotateLabel"]),se=w.getLayout("cx"),_e=w.getLayout("cy");w.graph.eachNode(function(me){q0(me,Z,se,_e)}),this._firstRender=!1},o.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},o.prototype._startForceLayoutIteration=function(a,l){var c=this;!function h(){a.step(function(f){c.updateLayout(c._model),(c._layouting=!f)&&(l?c._layoutTimeout=setTimeout(h,16):h())})}()},o.prototype._updateController=function(a,l,c){var h=this,f=this._controller,g=this._controllerHost,m=this.group;f.setPointerChecker(function(y,x,w){var D=m.getBoundingRect();return D.applyTransform(m.transform),D.contain(x,w)&&!lp(y,c,a)}),H2(a.coordinateSystem)?(f.enable(a.get("roam")),g.zoomLimit=a.get("scaleLimit"),g.zoom=a.coordinateSystem.getZoom(),f.off("pan").off("zoom").on("pan",function(y){Pg(g,y.dx,y.dy),c.dispatchAction({seriesId:a.id,type:"graphRoam",dx:y.dx,dy:y.dy})}).on("zoom",function(y){Rg(g,y.scale,y.originX,y.originY),c.dispatchAction({seriesId:a.id,type:"graphRoam",zoom:y.scale,originX:y.originX,originY:y.originY}),h._updateNodeAndLinkScale(),cb(a.getGraph(),Ip(a)),h._lineDraw.updateLayout(),c.updateLabelLayout()})):f.disable()},o.prototype._updateNodeAndLinkScale=function(){var a=this._model,l=a.getData(),c=Ip(a);l.eachItemGraphicEl(function(h,f){h&&h.setSymbolScale(c)})},o.prototype.updateLayout=function(a){cb(a.getGraph(),Ip(a)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},o.prototype.remove=function(a,l){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},o.type="graph",o}(ia.Z);var h5=z(5297),us=z(9506);function dm(u,o,a,l,c){for(var h=new h5.ZP(l),f=0;f<u.length;f++)h.addNode(b.retrieve(u[f].id,u[f].name,f),f);var g=[],m=[],y=0;for(f=0;f<o.length;f++){var x=o[f],w=x.source,D=x.target;h.addEdge(w,D,y)&&(m.push(x),g.push(b.retrieve((0,xn.U5)(x.id,null),w+" > "+D)),y++)}var L,I=a.get("coordinateSystem");if("cartesian2d"===I||"polar"===I)L=(0,$s.Z)(u,a);else{var N=us.Z.get(I),Z=N&&N.dimensions||[];b.indexOf(Z,"value")<0&&Z.concat(["value"]);var se=(0,ct.Z)(u,{coordDimensions:Z,encodeDefine:a.getEncode()}).dimensions;(L=new xt.Z(se,a)).initData(u)}var _e=new xt.Z(["value"],a);return _e.initData(m,g),c&&c(L,_e),(0,lS.Z)({mainData:L,struct:h,structAttr:"graph",datas:{node:L,edge:_e},datasAttr:{node:"data",edge:"edgeData"}}),h.update(),h}var db=z(1549);const FS=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.hasSymbolVisual=!0,a}return(0,Tt.ZT)(o,u),o.prototype.init=function(a){u.prototype.init.apply(this,arguments);var l=this;function c(){return l._categoriesData}this.legendVisualProvider=new vn(c,c),this.fillDataTextStyle(a.edges||a.links),this._updateCategoriesData()},o.prototype.mergeOption=function(a){u.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(a.edges||a.links),this._updateCategoriesData()},o.prototype.mergeDefaultAndTheme=function(a){u.prototype.mergeDefaultAndTheme.apply(this,arguments),(0,xn.Cc)(a,"edgeLabel",["show"])},o.prototype.getInitialData=function(a,l){var c=a.edges||a.links||[],h=a.data||a.nodes||[],f=this;if(h&&c){!function PS(u){!Eh(u)||(u.__curvenessList=[],u.__edgeMap={},R2(u))}(this);var g=dm(h,c,this,!0,function m(y,x){y.wrapMethod("getItemModel",function(L){var se=f._categoriesModels[L.getShallow("category")];return se&&(se.parentModel=L.parentModel,L.parentModel=se),L});var w=ka.Z.prototype.getModel;function D(L,N){var Z=w.call(this,L,N);return Z.resolveParentPath=I,Z}function I(L){if(L&&("label"===L[0]||"label"===L[1])){var N=L.slice();return"label"===L[0]?N[0]="edgeLabel":"label"===L[1]&&(N[1]="edgeLabel"),N}return L}x.wrapMethod("getItemModel",function(L){return L.resolveParentPath=I,L.getModel=D,L})});return b.each(g.edges,function(y){!function Y0(u,o,a,l){if(Eh(a)){var c=im(u,o,a),h=a.__edgeMap,f=h[L2(c)];h[c]&&!f?h[c].isForward=!0:f&&h[c]&&(f.isForward=!0,h[c].isForward=!1),h[c]=h[c]||[],h[c].push(l)}}(y.node1,y.node2,this,y.dataIndex)},this),g.data}},o.prototype.getGraph=function(){return this.getData().graph},o.prototype.getEdgeData=function(){return this.getGraph().edgeData},o.prototype.getCategoriesData=function(){return this._categoriesData},o.prototype.formatTooltip=function(a,l,c){if("edge"===c){var h=this.getData(),f=this.getDataParams(a,c),g=h.graph.getEdgeByIndex(a),m=h.getName(g.node1.dataIndex),y=h.getName(g.node2.dataIndex),x=[];return null!=m&&x.push(m),null!=y&&x.push(y),(0,ca.TX)("nameValue",{name:x.join(" > "),value:f.value,noValue:null==f.value})}return(0,db.w)({series:this,dataIndex:a,multipleSeries:l})},o.prototype._updateCategoriesData=function(){var a=b.map(this.option.categories||[],function(c){return null!=c.value?c:b.extend({value:0},c)}),l=new xt.Z(["value"],this);l.initData(a),this._categoriesData=l,this._categoriesModels=l.mapArray(function(c){return l.getItemModel(c)})},o.prototype.setZoom=function(a){this.option.zoom=a},o.prototype.setCenter=function(a){this.option.center=a},o.prototype.isAnimationEnabled=function(){return u.prototype.isAnimationEnabled.call(this)&&!("force"===this.get("layout")&&this.get(["force","layoutAnimation"]))},o.type="series.graph",o.dependencies=["grid","polar","geo","singleAxis","calendar"],o.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},o}(Zi.Z);var G2={type:"graphRoam",event:"graphRoam",update:"none"},W2=function u(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0};const hb=function(u){function o(a){var l=u.call(this,a)||this;return l.type="pointer",l}return(0,Tt.ZT)(o,u),o.prototype.getDefaultShape=function(){return new W2},o.prototype.buildPath=function(a,l){var c=Math.cos,h=Math.sin,f=l.r,g=l.width,m=l.angle,y=l.x-c(m)*g*(g>=f/3?1:2),x=l.y-h(m)*g*(g>=f/3?1:2);m=l.angle-Math.PI/2,a.moveTo(y,x),a.lineTo(l.x+c(m)*g,l.y+h(m)*g),a.lineTo(l.x+c(l.angle)*f,l.y+h(l.angle)*f),a.lineTo(l.x-c(m)*g,l.y-h(m)*g),a.lineTo(y,x)},o}(ve.ZP);function Lp(u,o){var a=null==u?"":u+"";return o&&((0,b.isString)(o)?a=o.replace("{value}",a):(0,b.isFunction)(o)&&(a=o(u))),a}const Ph=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c){this.group.removeAll();var h=a.get(["axisLine","lineStyle","color"]),f=function fb(u,o){var a=u.get("center"),l=o.getWidth(),c=o.getHeight(),h=Math.min(l,c);return{cx:(0,It.GM)(a[0],o.getWidth()),cy:(0,It.GM)(a[1],o.getHeight()),r:(0,It.GM)(u.get("radius"),h/2)}}(a,c);this._renderMain(a,l,c,h,f),this._data=a.getData()},o.prototype.dispose=function(){},o.prototype._renderMain=function(a,l,c,h,f){var g=this.group,m=a.get("clockwise"),y=-a.get("startAngle")/180*Math.PI,x=-a.get("endAngle")/180*Math.PI,w=a.getModel("axisLine"),I=w.get("roundCap")?Jl:yn.C,L=w.get("show"),N=w.getModel("lineStyle"),Z=N.get("width"),se=[y,x];(0,fe.L)(se,!m);for(var _e=(x=se[1])-(y=se[0]),me=y,De=0;L&&De<h.length;De++){var Ie=new I({shape:{startAngle:me,endAngle:x=y+_e*Math.min(Math.max(h[De][0],0),1),cx:f.cx,cy:f.cy,clockwise:m,r0:f.r-Z,r:f.r},silent:!0});Ie.setStyle({fill:h[De][1]}),Ie.setStyle(N.getLineStyle(["color","width"])),g.add(Ie),me=x}var ke=function(Ue){if(Ue<=0)return h[0][1];var Ye;for(Ye=0;Ye<h.length;Ye++)if(h[Ye][0]>=Ue&&(0===Ye?0:h[Ye-1][0])<Ue)return h[Ye][1];return h[Ye-1][1]};this._renderTicks(a,l,c,ke,f,y,x,m,Z),this._renderTitleAndDetail(a,l,c,ke,f),this._renderAnchor(a,f),this._renderPointer(a,l,c,ke,f,y,x,m,Z)},o.prototype._renderTicks=function(a,l,c,h,f,g,m,y,x){for(var yt,wt,w=this.group,D=f.cx,I=f.cy,L=f.r,N=+a.get("min"),Z=+a.get("max"),se=a.getModel("splitLine"),_e=a.getModel("axisTick"),me=a.getModel("axisLabel"),De=a.get("splitNumber"),Pe=_e.get("splitNumber"),Ie=(0,It.GM)(se.get("length"),L),ke=(0,It.GM)(_e.get("length"),L),Ue=g,Ye=(m-g)/De,Ke=Ye/Pe,qe=se.getModel("lineStyle").getLineStyle(),ut=_e.getModel("lineStyle").getLineStyle(),pt=se.get("distance"),kt=0;kt<=De;kt++){if(yt=Math.cos(Ue),wt=Math.sin(Ue),se.get("show")){var jt=new Ei.Z({shape:{x1:yt*(L-(en=pt?pt+x:x))+D,y1:wt*(L-en)+I,x2:yt*(L-Ie-en)+D,y2:wt*(L-Ie-en)+I},style:qe,silent:!0});"auto"===qe.stroke&&jt.setStyle({stroke:h(kt/De)}),w.add(jt)}if(me.get("show")){var en=me.get("distance")+pt,dn=Lp((0,It.NM)(kt/De*(Z-N)+N),me.get("formatter")),Fn=h(kt/De),Hn=yt*(L-Ie-en)+D,lr=wt*(L-Ie-en)+I,br=me.get("rotate"),Fr=0;"radial"===br?(Fr=-Ue+2*Math.PI)>Math.PI/2&&(Fr+=Math.PI):"tangential"===br?Fr=-Ue-Math.PI/2:(0,b.isNumber)(br)&&(Fr=br*Math.PI/180),w.add(new _t.ZP(0===Fr?{style:(0,qt.Lr)(me,{text:dn,x:Hn,y:lr,verticalAlign:wt<-.8?"top":wt>.8?"bottom":"middle",align:yt<-.4?"left":yt>.4?"right":"center"},{inheritColor:Fn}),silent:!0}:{style:(0,qt.Lr)(me,{text:dn,x:Hn,y:lr,verticalAlign:"middle",align:"center"},{inheritColor:Fn}),silent:!0,originX:Hn,originY:lr,rotation:Fr}))}if(_e.get("show")&&kt!==De){en=(en=_e.get("distance"))?en+x:x;for(var xi=0;xi<=Pe;xi++){yt=Math.cos(Ue),wt=Math.sin(Ue);var Oi=new Ei.Z({shape:{x1:yt*(L-en)+D,y1:wt*(L-en)+I,x2:yt*(L-ke-en)+D,y2:wt*(L-ke-en)+I},silent:!0,style:ut});"auto"===ut.stroke&&Oi.setStyle({stroke:h((kt+xi/Pe)/De)}),w.add(Oi),Ue+=Ke}Ue-=Ke}else Ue+=Ye}},o.prototype._renderPointer=function(a,l,c,h,f,g,m,y,x){var w=this.group,D=this._data,I=this._progressEls,L=[],N=a.get(["pointer","show"]),Z=a.getModel("progress"),se=Z.get("show"),_e=a.getData(),me=_e.mapDimension("value"),De=+a.get("min"),Pe=+a.get("max"),Ie=[De,Pe],ke=[g,m];function Ue(Ke,qe){var Hn,pt=_e.getItemModel(Ke).getModel("pointer"),yt=(0,It.GM)(pt.get("width"),f.r),wt=(0,It.GM)(pt.get("length"),f.r),kt=a.get(["pointer","icon"]),en=pt.get("offsetCenter"),jt=(0,It.GM)(en[0],f.r),dn=(0,It.GM)(en[1],f.r),Fn=pt.get("keepAspect");return(Hn=kt?(0,ai.th)(kt,jt-yt/2,dn-wt,yt,wt,null,Fn):new hb({shape:{angle:-Math.PI/2,width:yt,r:wt,x:jt,y:dn}})).rotation=-(qe+Math.PI/2),Hn.x=f.cx,Hn.y=f.cy,Hn}function Ye(Ke,qe){var pt=Z.get("roundCap")?Jl:yn.C,yt=Z.get("overlap"),wt=yt?Z.get("width"):x/_e.count(),jt=new pt({shape:{startAngle:g,endAngle:qe,cx:f.cx,cy:f.cy,clockwise:y,r0:yt?f.r-wt:f.r-(Ke+1)*wt,r:yt?f.r:f.r-Ke*wt}});return yt&&(jt.z2=Pe-_e.get(me,Ke)%Pe),jt}(se||N)&&(_e.diff(D).add(function(Ke){var qe=_e.get(me,Ke);if(N){var ut=Ue(Ke,g);wn.KZ(ut,{rotation:-((isNaN(+qe)?ke[0]:(0,It.NU)(qe,Ie,ke,!0))+Math.PI/2)},a),w.add(ut),_e.setItemGraphicEl(Ke,ut)}if(se){var pt=Ye(Ke,g),yt=Z.get("clip");wn.KZ(pt,{shape:{endAngle:(0,It.NU)(qe,Ie,ke,yt)}},a),w.add(pt),(0,Mr.Q)(a.seriesIndex,_e.dataType,Ke,pt),L[Ke]=pt}}).update(function(Ke,qe){var ut=_e.get(me,Ke);if(N){var pt=D.getItemGraphicEl(qe),yt=pt?pt.rotation:g,wt=Ue(Ke,yt);wt.rotation=yt,wn.D(wt,{rotation:-((isNaN(+ut)?ke[0]:(0,It.NU)(ut,Ie,ke,!0))+Math.PI/2)},a),w.add(wt),_e.setItemGraphicEl(Ke,wt)}if(se){var kt=I[qe],jt=Ye(Ke,kt?kt.shape.endAngle:g),dn=Z.get("clip");wn.D(jt,{shape:{endAngle:(0,It.NU)(ut,Ie,ke,dn)}},a),w.add(jt),(0,Mr.Q)(a.seriesIndex,_e.dataType,Ke,jt),L[Ke]=jt}}).execute(),_e.each(function(Ke){var qe=_e.getItemModel(Ke),ut=qe.getModel("emphasis"),pt=ut.get("focus"),yt=ut.get("blurScope"),wt=ut.get("disabled");if(N){var kt=_e.getItemGraphicEl(Ke),en=_e.getItemVisual(Ke,"style"),jt=en.fill;if(kt instanceof be.ZP){var dn=kt.style;kt.useStyle((0,b.extend)({image:dn.image,x:dn.x,y:dn.y,width:dn.width,height:dn.height},en))}else kt.useStyle(en),"pointer"!==kt.type&&kt.setColor(jt);kt.setStyle(qe.getModel(["pointer","itemStyle"]).getItemStyle()),"auto"===kt.style.fill&&kt.setStyle("fill",h((0,It.NU)(_e.get(me,Ke),Ie,[0,1],!0))),kt.z2EmphasisLift=0,(0,Ut.WO)(kt,qe),(0,Ut.k5)(kt,pt,yt,wt)}if(se){var Fn=L[Ke];Fn.useStyle(_e.getItemVisual(Ke,"style")),Fn.setStyle(qe.getModel(["progress","itemStyle"]).getItemStyle()),Fn.z2EmphasisLift=0,(0,Ut.WO)(Fn,qe),(0,Ut.k5)(Fn,pt,yt,wt)}}),this._progressEls=L)},o.prototype._renderAnchor=function(a,l){var c=a.getModel("anchor");if(c.get("show")){var f=c.get("size"),g=c.get("icon"),m=c.get("offsetCenter"),y=c.get("keepAspect"),x=(0,ai.th)(g,l.cx-f/2+(0,It.GM)(m[0],l.r),l.cy-f/2+(0,It.GM)(m[1],l.r),f,f,null,y);x.z2=c.get("showAbove")?1:0,x.setStyle(c.getModel("itemStyle").getItemStyle()),this.group.add(x)}},o.prototype._renderTitleAndDetail=function(a,l,c,h,f){var g=this,m=a.getData(),y=m.mapDimension("value"),x=+a.get("min"),w=+a.get("max"),D=new Pn.Z,I=[],L=[],N=a.isAnimationEnabled(),Z=a.get(["pointer","showAbove"]);m.diff(this._data).add(function(se){I[se]=new _t.ZP({silent:!0}),L[se]=new _t.ZP({silent:!0})}).update(function(se,_e){I[se]=g._titleEls[_e],L[se]=g._detailEls[_e]}).execute(),m.each(function(se){var _e=m.getItemModel(se),me=m.get(y,se),De=new Pn.Z,Pe=h((0,It.NU)(me,[x,w],[0,1],!0)),Ie=_e.getModel("title");if(Ie.get("show")){var ke=Ie.get("offsetCenter"),Ue=f.cx+(0,It.GM)(ke[0],f.r),Ye=f.cy+(0,It.GM)(ke[1],f.r);(Ke=I[se]).attr({z2:Z?0:2,style:(0,qt.Lr)(Ie,{x:Ue,y:Ye,text:m.getName(se),align:"center",verticalAlign:"middle"},{inheritColor:Pe})}),De.add(Ke)}var qe=_e.getModel("detail");if(qe.get("show")){var ut=qe.get("offsetCenter"),pt=f.cx+(0,It.GM)(ut[0],f.r),yt=f.cy+(0,It.GM)(ut[1],f.r),wt=(0,It.GM)(qe.get("width"),f.r),kt=(0,It.GM)(qe.get("height"),f.r),en=a.get(["progress","show"])?m.getItemVisual(se,"style").fill:Pe,Ke=L[se],jt=qe.get("formatter");Ke.attr({z2:Z?0:2,style:(0,qt.Lr)(qe,{x:pt,y:yt,text:Lp(me,jt),width:isNaN(wt)?null:wt,height:isNaN(kt)?null:kt,align:"center",verticalAlign:"middle"},{inheritColor:en})}),(0,qt.pe)(Ke,{normal:qe},me,function(Fn){return Lp(Fn,jt)}),N&&(0,qt.tD)(Ke,se,m,a,{getFormattedLabel:function(Fn,Hn,lr,br,Fr,xi){return Lp(xi?xi.interpolatedValue:me,jt)}}),De.add(Ke)}D.add(De)}),this.group.add(D),this._titleEls=I,this._detailEls=L},o.type="gauge",o}(ia.Z),BS=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.visualStyleAccessPath="itemStyle",a}return(0,Tt.ZT)(o,u),o.prototype.getInitialData=function(a,l){return gt(this,["value"])},o.type="series.gauge",o.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},o}(Zi.Z);var vb=["itemStyle","opacity"],Y2=function(u){function o(a,l){var c=u.call(this)||this,h=c,f=new Ps.Z,g=new _t.ZP;return h.setTextContent(g),c.setTextGuideLine(f),c.updateData(a,l,!0),c}return(0,Tt.ZT)(o,u),o.prototype.updateData=function(a,l,c){var h=this,f=a.hostModel,g=a.getItemModel(l),m=a.getItemLayout(l),y=g.getModel("emphasis"),x=g.get(vb);x=x??1,c||(0,wn.Zi)(h),h.useStyle(a.getItemVisual(l,"style")),h.style.lineJoin="round",c?(h.setShape({points:m.points}),h.style.opacity=0,wn.KZ(h,{style:{opacity:x}},f,l)):wn.D(h,{style:{opacity:x},shape:{points:m.points}},f,l),(0,Ut.WO)(h,g),this._updateLabel(a,l),(0,Ut.k5)(this,y.get("focus"),y.get("blurScope"),y.get("disabled"))},o.prototype._updateLabel=function(a,l){var c=this,h=this.getTextGuideLine(),f=c.getTextContent(),g=a.hostModel,m=a.getItemModel(l),x=a.getItemLayout(l).label,w=a.getItemVisual(l,"style"),D=w.fill;(0,qt.ni)(f,(0,qt.k3)(m),{labelFetcher:a.hostModel,labelDataIndex:l,defaultOpacity:w.opacity,defaultText:a.getName(l)},{normal:{align:x.textAlign,verticalAlign:x.verticalAlign}}),c.setTextConfig({local:!0,inside:!!x.inside,insideStroke:D,outsideFill:D});var I=x.linePoints;h.setShape({points:I}),c.textGuideLineConfig={anchor:I?new ea.Z(I[0][0],I[0][1]):null},wn.D(f,{style:{x:x.x,y:x.y}},g,l),f.attr({rotation:x.rotation,originX:x.x,originY:x.y,z2:10}),(0,co.Iu)(c,(0,co.$x)(m),{stroke:D})},o}(tl.Z);const $2=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.ignoreLabelLineUpdate=!0,a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c){var h=a.getData(),f=this._data,g=this.group;h.diff(f).add(function(m){var y=new Y2(h,m);h.setItemGraphicEl(m,y),g.add(y)}).update(function(m,y){var x=f.getItemGraphicEl(y);x.updateData(h,m),g.add(x),h.setItemGraphicEl(m,x)}).remove(function(m){var y=f.getItemGraphicEl(m);wn.XD(y,a,m)}).execute(),this._data=h},o.prototype.remove=function(){this.group.removeAll(),this._data=null},o.prototype.dispose=function(){},o.type="funnel",o}(ia.Z),Q2=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.init=function(a){u.prototype.init.apply(this,arguments),this.legendVisualProvider=new vn(b.bind(this.getData,this),b.bind(this.getRawData,this)),this._defaultLabelLine(a)},o.prototype.getInitialData=function(a,l){return gt(this,{coordDimensions:["value"],encodeDefaulter:b.curry(Nt.Ss,this)})},o.prototype._defaultLabelLine=function(a){(0,xn.Cc)(a,"labelLine",["show"]);var l=a.labelLine,c=a.emphasis.labelLine;l.show=l.show&&a.label.show,c.show=c.show&&a.emphasis.label.show},o.prototype.getDataParams=function(a){var l=this.getData(),c=u.prototype.getDataParams.call(this,a),h=l.mapDimension("value"),f=l.getSum(h);return c.percent=f?+(l.get(h,a)/f*100).toFixed(2):0,c.$vars.push("percent"),c},o.type="series.funnel",o.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},o}(Zi.Z);function zS(u,o){u.eachSeriesByType("funnel",function(a){var l=a.getData(),c=l.mapDimension("value"),h=a.get("sort"),f=function q2(u,o){return Vr.ME(u.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()})}(a,o),g=a.get("orient"),m=f.width,y=f.height,x=function VS(u,o){for(var a=u.mapDimension("value"),l=u.mapArray(a,function(m){return m}),c=[],h="ascending"===o,f=0,g=u.count();f<g;f++)c[f]=f;return(0,b.isFunction)(o)?c.sort(o):"none"!==o&&c.sort(function(m,y){return h?l[m]-l[y]:l[y]-l[m]}),c}(l,h),w=f.x,D=f.y,I="horizontal"===g?[(0,It.GM)(a.get("minSize"),y),(0,It.GM)(a.get("maxSize"),y)]:[(0,It.GM)(a.get("minSize"),m),(0,It.GM)(a.get("maxSize"),m)],L=l.getDataExtent(c),N=a.get("min"),Z=a.get("max");null==N&&(N=Math.min(L[0],0)),null==Z&&(Z=L[1]);var se=a.get("funnelAlign"),_e=a.get("gap"),De=(("horizontal"===g?m:y)-_e*(l.count()-1))/l.count(),Pe=function(yt,wt){if("horizontal"===g){var kt=l.get(c,yt)||0,en=(0,It.NU)(kt,[N,Z],I,!0),jt=void 0;switch(se){case"top":jt=D;break;case"center":jt=D+(y-en)/2;break;case"bottom":jt=D+(y-en)}return[[wt,jt],[wt,jt+en]]}var Hn,dn=l.get(c,yt)||0,Fn=(0,It.NU)(dn,[N,Z],I,!0);switch(se){case"left":Hn=w;break;case"center":Hn=w+(m-Fn)/2;break;case"right":Hn=w+m-Fn}return[[Hn,wt],[Hn+Fn,wt]]};"ascending"===h&&(De=-De,_e=-_e,"horizontal"===g?w+=m:D+=y,x=x.reverse());for(var Ie=0;Ie<x.length;Ie++){var ke=x[Ie],Ue=x[Ie+1],Ye=l.getItemModel(ke);if("horizontal"===g){var Ke=Ye.get(["itemStyle","width"]);null==Ke?Ke=De:(Ke=(0,It.GM)(Ke,m),"ascending"===h&&(Ke=-Ke));var qe=Pe(ke,w),ut=Pe(Ue,w+Ke);w+=Ke+_e,l.setItemLayout(ke,{points:qe.concat(ut.slice().reverse())})}else{var pt=Ye.get(["itemStyle","height"]);null==pt?pt=De:(pt=(0,It.GM)(pt,y),"ascending"===h&&(pt=-pt)),qe=Pe(ke,D),ut=Pe(Ue,D+pt),D+=pt+_e,l.setItemLayout(ke,{points:qe.concat(ut.slice().reverse())})}}!function gb(u){var a=u.hostModel.get("orient");u.each(function(l){var w,D,I,L,c=u.getItemModel(l),f=c.getModel("label").get("position"),g=c.getModel("labelLine"),m=u.getItemLayout(l),y=m.points,x="inner"===f||"inside"===f||"center"===f||"insideLeft"===f||"insideRight"===f;if(x)"insideLeft"===f?(D=(y[0][0]+y[3][0])/2+5,I=(y[0][1]+y[3][1])/2,w="left"):"insideRight"===f?(D=(y[1][0]+y[2][0])/2-5,I=(y[1][1]+y[2][1])/2,w="right"):(D=(y[0][0]+y[1][0]+y[2][0]+y[3][0])/4,I=(y[0][1]+y[1][1]+y[2][1]+y[3][1])/4,w="center"),L=[[D,I],[D,I]];else{var N=void 0,Z=void 0,se=void 0,_e=void 0,me=g.get("length");"left"===f?(Z=(y[3][1]+y[0][1])/2,D=(se=(N=(y[3][0]+y[0][0])/2)-me)-5,w="right"):"right"===f?(Z=(y[1][1]+y[2][1])/2,D=(se=(N=(y[1][0]+y[2][0])/2)+me)+5,w="left"):"top"===f?(N=(y[3][0]+y[0][0])/2,I=(_e=(Z=(y[3][1]+y[0][1])/2)-me)-5,w="center"):"bottom"===f?(N=(y[1][0]+y[2][0])/2,I=(_e=(Z=(y[1][1]+y[2][1])/2)+me)+5,w="center"):"rightTop"===f?(N="horizontal"===a?y[3][0]:y[1][0],Z="horizontal"===a?y[3][1]:y[1][1],"horizontal"===a?(I=(_e=Z-me)-5,w="center"):(D=(se=N+me)+5,w="top")):"rightBottom"===f?(N=y[2][0],Z=y[2][1],"horizontal"===a?(I=(_e=Z+me)+5,w="center"):(D=(se=N+me)+5,w="bottom")):"leftTop"===f?(N=y[0][0],Z="horizontal"===a?y[0][1]:y[1][1],"horizontal"===a?(I=(_e=Z-me)-5,w="center"):(D=(se=N-me)-5,w="right")):"leftBottom"===f?(N="horizontal"===a?y[1][0]:y[3][0],Z="horizontal"===a?y[1][1]:y[2][1],"horizontal"===a?(I=(_e=Z+me)+5,w="center"):(D=(se=N-me)-5,w="right")):(N=(y[1][0]+y[2][0])/2,Z=(y[1][1]+y[2][1])/2,"horizontal"===a?(I=(_e=Z+me)+5,w="center"):(D=(se=N+me)+5,w="left")),"horizontal"===a?D=se=N:I=_e=Z,L=[[N,Z],[se,_e]]}m.label={linePoints:L,x:D,y:I,verticalAlign:"middle",textAlign:w,inside:x}})}(l)})}function _b(u,o,a,l){for(var c=[],h=0;h<a.length;h++){var f=a[h],g=u.get(u.mapDimension(f),o);tR(g,l.getAxis(f).type)||c.push(l.dataToPoint(g,f))}return c}function Tc(u,o,a,l,c){var h=_b(u,a,l,c),f=new Ps.Z({shape:{points:h},z2:10});return o.add(f),u.setItemGraphicEl(a,f),f}function yb(u){var o=u.get("smooth",!0);return!0===o&&(o=.3),o=(0,It.FK)(o),(0,b.eqNaN)(o)&&(o=0),{smooth:o}}function hm(u,o,a,l){u.useStyle(o.getItemVisual(a,"style")),u.style.fill=null,u.setShape("smooth",l.smooth);var c=o.getItemModel(a),h=c.getModel("emphasis");(0,Ut.WO)(u,c,"lineStyle"),(0,Ut.k5)(u,h.get("focus"),h.get("blurScope"),h.get("disabled"))}function tR(u,o){return"category"===o?null==u:null==u||isNaN(u)}const p5=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a._dataGroup=new Pn.Z,a._initialized=!1,a}return(0,Tt.ZT)(o,u),o.prototype.init=function(){this.group.add(this._dataGroup)},o.prototype.render=function(a,l,c,h){this._progressiveEls=null;var f=this._dataGroup,g=a.getData(),m=this._data,y=a.coordinateSystem,x=y.dimensions,w=yb(a);if(g.diff(m).add(function D(Z){hm(Tc(g,f,Z,x,y),g,Z,w)}).update(function I(Z,se){var _e=m.getItemGraphicEl(se),me=_b(g,Z,x,y);g.setItemGraphicEl(Z,_e),wn.D(_e,{shape:{points:me}},a,Z),(0,wn.Zi)(_e),hm(_e,g,Z,w)}).remove(function L(Z){var se=m.getItemGraphicEl(Z);f.remove(se)}).execute(),!this._initialized){this._initialized=!0;var N=function HS(u,o,a){var l=u.model,c=u.getRect(),h=new Di.Z({shape:{x:c.x,y:c.y,width:c.width,height:c.height}}),f="horizontal"===l.get("layout")?"width":"height";return h.setShape(f,0),wn.KZ(h,{shape:{width:c.width,height:c.height}},o,a),h}(y,a,function(){setTimeout(function(){f.removeClipPath()})});f.setClipPath(N)}this._data=g},o.prototype.incrementalPrepareRender=function(a,l,c){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},o.prototype.incrementalRender=function(a,l,c){for(var h=l.getData(),f=l.coordinateSystem,g=f.dimensions,m=yb(l),y=this._progressiveEls=[],x=a.start;x<a.end;x++){var w=Tc(h,this._dataGroup,x,g,f);w.incremental=!0,hm(w,h,x,m),y.push(w)}},o.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},o.type="parallel",o}(ia.Z);function nR(u){var o=u.ecModel.getComponent("parallel",u.get("parallelIndex"));if(o){var a={};return(0,b.each)(o.dimensions,function(l){var c=function US(u){return+u.replace("dim","")}(l);a[l]=c}),a}}const GS=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.visualStyleAccessPath="lineStyle",a.visualDrawType="stroke",a}return(0,Tt.ZT)(o,u),o.prototype.getInitialData=function(a,l){return(0,$s.Z)(null,this,{useEncodeDefaulter:(0,b.bind)(nR,null,this)})},o.prototype.getRawIndicesByActiveState=function(a){var l=this.coordinateSystem,c=this.getData(),h=[];return l.eachActiveState(c,function(f,g){a===f&&h.push(c.getRawIndex(g))}),h},o.type="series.parallel",o.dependencies=["parallel"],o.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},o}(Zi.Z);var WS=["lineStyle","opacity"];const jS={seriesType:"parallel",reset:function(u,o){var a=u.coordinateSystem,l={normal:u.get(["lineStyle","opacity"]),active:u.get("activeOpacity"),inactive:u.get("inactiveOpacity")};return{progress:function(c,h){a.eachActiveState(h,function(f,g){var m=l[f];if("normal"===f&&h.hasItemOption){var y=h.getItemModel(g).get(WS,!0);null!=y&&(m=y)}h.ensureUniqueItemVisual(g,"style").opacity=m},c.start,c.end)}}}};function pm(u){(function vm(u){if(!u.parallel){var o=!1;b.each(u.series,function(a){a&&"parallel"===a.type&&(o=!0)}),o&&(u.parallel=[{}])}})(u),function ZS(u){var o=xn.kF(u.parallelAxis);b.each(o,function(a){if(b.isObject(a)){var l=a.parallelIndex||0,c=xn.kF(u.parallel)[l];c&&c.parallelAxisDefault&&b.merge(a,c.parallelAxisDefault,!1)}})}(u)}var YS=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c){this._model=a,this._api=c,this._handlers||(this._handlers={},(0,b.each)(Cb,function(h,f){c.getZr().on(f,this._handlers[f]=(0,b.bind)(h,this))},this)),(0,Uo.T9)(this,"_throttledDispatchExpand",a.get("axisExpandRate"),"fixRate")},o.prototype.dispose=function(a,l){(0,Uo.ZH)(this,"_throttledDispatchExpand"),(0,b.each)(this._handlers,function(c,h){l.getZr().off(h,c)}),this._handlers=null},o.prototype._throttledDispatchExpand=function(a){this._dispatchExpand(a)},o.prototype._dispatchExpand=function(a){a&&this._api.dispatchAction((0,b.extend)({type:"parallelAxisExpand"},a))},o.type="parallel",o}(ga.Z),Cb={mousedown:function(u){wd(this,"click")&&(this._mouseDownPoint=[u.offsetX,u.offsetY])},mouseup:function(u){var o=this._mouseDownPoint;if(wd(this,"click")&&o){var a=[u.offsetX,u.offsetY];if(Math.pow(o[0]-a[0],2)+Math.pow(o[1]-a[1],2)>5)return;var c=this._model.coordinateSystem.getSlidedAxisExpandWindow([u.offsetX,u.offsetY]);"none"!==c.behavior&&this._dispatchExpand({axisExpandWindow:c.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(u){if(!this._mouseDownPoint&&wd(this,"mousemove")){var o=this._model,a=o.coordinateSystem.getSlidedAxisExpandWindow([u.offsetX,u.offsetY]),l=a.behavior;"jump"===l&&this._throttledDispatchExpand.debounceNextCall(o.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===l?null:{axisExpandWindow:a.axisExpandWindow,animation:"jump"===l?null:{duration:0}})}}};function wd(u,o){var a=u._model;return a.get("axisExpandable")&&a.get("axisExpandTriggerOn")===o}const rR=YS,iR=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.init=function(){u.prototype.init.apply(this,arguments),this.mergeOption({})},o.prototype.mergeOption=function(a){a&&b.merge(this.option,a,!0),this._initDimensions()},o.prototype.contains=function(a,l){var c=a.get("parallelIndex");return null!=c&&l.getComponent("parallel",c)===this},o.prototype.setAxisExpand=function(a){b.each(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(l){a.hasOwnProperty(l)&&(this.option[l]=a[l])},this)},o.prototype._initDimensions=function(){var a=this.dimensions=[],l=this.parallelAxisIndex=[],c=b.filter(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(h){return(h.get("parallelIndex")||0)===this.componentIndex},this);b.each(c,function(h){a.push("dim"+h.get("dim")),l.push(h.componentIndex)})},o.type="parallel",o.dependencies=["parallelAxis"],o.layoutMode="box",o.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},o}(ma.Z),$S=function(u){function o(a,l,c,h,f){var g=u.call(this,a,l,c)||this;return g.type=h||"value",g.axisIndex=f,g}return(0,Tt.ZT)(o,u),o.prototype.isHorizontal=function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")},o}(fo.Z);function Yu(u,o,a,l,c,h){u=u||0;var f=a[1]-a[0];if(null!=c&&(c=Op(c,[0,f])),null!=h&&(h=Math.max(h,c??0)),"all"===l){var g=Math.abs(o[1]-o[0]);g=Op(g,[0,f]),c=h=Op(g,[c,h]),l=0}o[0]=Op(o[0],a),o[1]=Op(o[1],a);var m=gm(o,l);o[l]+=u;var w,y=c||0,x=a.slice();return m.sign<0?x[0]+=y:x[1]-=y,o[l]=Op(o[l],x),w=gm(o,l),null!=c&&(w.sign!==m.sign||w.span<c)&&(o[1-l]=o[l]+m.sign*c),w=gm(o,l),null!=h&&w.span>h&&(o[1-l]=o[l]+w.sign*h),o}function gm(u,o){var a=u[o]-u[1-o];return{span:Math.abs(a),sign:a>0?-1:a<0?1:o?-1:1}}function Op(u,o){return Math.min(null!=o[1]?o[1]:1/0,Math.max(null!=o[0]?o[0]:-1/0,u))}var mm=b.each,KS=Math.min,wb=Math.max,QS=Math.floor,oR=Math.ceil,al=It.NM,sR=Math.PI;function _m(u,o){return KS(wb(u,o[0]),o[1])}function lR(u,o){var a=o.layoutLength/(o.axisCount-1);return{position:a*u,axisNameAvailableWidth:a,axisLabelShow:!0}}function uR(u,o){var g,x,l=o.axisExpandWidth,h=o.axisCollapseWidth,f=o.winInnerIndices,m=h,y=!1;return u<f[0]?(g=u*h,x=h):u<=f[1]?(g=o.axisExpandWindow0Pos+u*l-o.axisExpandWindow[0],m=l,y=!0):(g=o.layoutLength-(o.axisCount-1-u)*h,x=h),{position:g,axisNameAvailableWidth:m,axisLabelShow:y,nameTruncateMaxWidth:x}}const cR=function(){function u(o,a,l){this.type="parallel",this._axesMap=b.createHashMap(),this._axesLayout={},this.dimensions=o.dimensions,this._model=o,this._init(o,a,l)}return u.prototype._init=function(o,a,l){var h=o.parallelAxisIndex;mm(o.dimensions,function(f,g){var m=h[g],y=a.getComponent("parallelAxis",m),x=this._axesMap.set(f,new $S(f,ki.aG(y),[0,0],y.get("type"),m));x.onBand="category"===x.type&&y.get("boundaryGap"),x.inverse=y.get("inverse"),y.axis=x,x.model=y,x.coordinateSystem=y.coordinateSystem=this},this)},u.prototype.update=function(o,a){this._updateAxesFromSeries(this._model,o)},u.prototype.containPoint=function(o){var a=this._makeLayoutInfo(),l=a.axisBase,c=a.layoutBase,h=a.pixelDimIndex,f=o[1-h],g=o[h];return f>=l&&f<=l+a.axisLength&&g>=c&&g<=c+a.layoutLength},u.prototype.getModel=function(){return this._model},u.prototype._updateAxesFromSeries=function(o,a){a.eachSeries(function(l){if(o.contains(l,a)){var c=l.getData();mm(this.dimensions,function(h){var f=this._axesMap.get(h);f.scale.unionExtentFromData(c,c.mapDimension(h)),ki.Jk(f.scale,f.model)},this)}},this)},u.prototype.resize=function(o,a){this._rect=Vr.ME(o.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()}),this._layoutAxes()},u.prototype.getRect=function(){return this._rect},u.prototype._makeLayoutInfo=function(){var L,o=this._model,a=this._rect,l=["x","y"],c=["width","height"],h=o.get("layout"),f="horizontal"===h?0:1,g=a[c[f]],m=[0,g],y=this.dimensions.length,x=_m(o.get("axisExpandWidth"),m),w=_m(o.get("axisExpandCount")||0,[0,y]),D=o.get("axisExpandable")&&y>3&&y>w&&w>1&&x>0&&g>0,I=o.get("axisExpandWindow");I?(L=_m(I[1]-I[0],m),I[1]=I[0]+L):(L=_m(x*(w-1),m),(I=[x*(o.get("axisExpandCenter")||QS(y/2))-L/2])[1]=I[0]+L);var Z=(g-L)/(y-w);Z<3&&(Z=0);var se=[QS(al(I[0]/x,1))+1,oR(al(I[1]/x,1))-1];return{layout:h,pixelDimIndex:f,layoutBase:a[l[f]],layoutLength:g,axisBase:a[l[1-f]],axisLength:a[c[1-f]],axisExpandable:D,axisExpandWidth:x,axisCollapseWidth:Z,axisExpandWindow:I,axisCount:y,winInnerIndices:se,axisExpandWindow0Pos:Z/x*I[0]}},u.prototype._layoutAxes=function(){var o=this._rect,a=this._axesMap,l=this.dimensions,c=this._makeLayoutInfo(),h=c.layout;a.each(function(f){var g=[0,c.axisLength],m=f.inverse?1:0;f.setExtent(g[m],g[1-m])}),mm(l,function(f,g){var m=(c.axisExpandable?uR:lR)(g,c),y={horizontal:{x:m.position,y:c.axisLength},vertical:{x:0,y:m.position}},w=[y[h].x+o.x,y[h].y+o.y],D={horizontal:sR/2,vertical:0}[h],I=yi.create();yi.rotate(I,I,D),yi.translate(I,I,w),this._axesLayout[f]={position:w,rotation:D,transform:I,axisNameAvailableWidth:m.axisNameAvailableWidth,axisLabelShow:m.axisLabelShow,nameTruncateMaxWidth:m.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},u.prototype.getAxis=function(o){return this._axesMap.get(o)},u.prototype.dataToPoint=function(o,a){return this.axisCoordToPoint(this._axesMap.get(a).dataToCoord(o),a)},u.prototype.eachActiveState=function(o,a,l,c){null==l&&(l=0),null==c&&(c=o.count());var h=this._axesMap,f=this.dimensions,g=[],m=[];b.each(f,function(Z){g.push(o.mapDimension(Z)),m.push(h.get(Z).model)});for(var y=this.hasAxisBrushed(),x=l;x<c;x++){var w=void 0;if(y){w="active";for(var D=o.getValues(g,x),I=0,L=f.length;I<L;I++)if("inactive"===m[I].getActiveState(D[I])){w="inactive";break}}else w="normal";a(w,x)}},u.prototype.hasAxisBrushed=function(){for(var o=this.dimensions,a=this._axesMap,l=!1,c=0,h=o.length;c<h;c++)"normal"!==a.get(o[c]).model.getActiveState()&&(l=!0);return l},u.prototype.axisCoordToPoint=function(o,a){return _n.applyTransform([o,0],this._axesLayout[a].transform)},u.prototype.getAxisLayout=function(o){return b.clone(this._axesLayout[o])},u.prototype.getSlidedAxisExpandWindow=function(o){var a=this._makeLayoutInfo(),l=a.pixelDimIndex,c=a.axisExpandWindow.slice(),h=c[1]-c[0],f=[0,a.axisExpandWidth*(a.axisCount-1)];if(!this.containPoint(o))return{behavior:"none",axisExpandWindow:c};var m,g=o[l]-a.layoutBase-a.axisExpandWindow0Pos,y="slide",x=a.axisCollapseWidth,w=this._model.get("axisExpandSlideTriggerArea"),D=null!=w[0];if(x)D&&x&&g<h*w[0]?(y="jump",m=g-h*w[2]):D&&x&&g>h*(1-w[0])?(y="jump",m=g-h*(1-w[2])):(m=g-h*w[1])>=0&&(m=g-h*(1-w[1]))<=0&&(m=0),(m*=a.axisExpandWidth/x)?Yu(m,c,f,"all"):y="none";else{var I=c[1]-c[0];(c=[wb(0,f[1]*g/I-I/2)])[1]=KS(f[1],c[0]+I),c[0]=c[1]-I}return{axisExpandWindow:c,behavior:y}},u}(),hR={create:function JS(u,o){var a=[];return u.eachComponent("parallel",function(l,c){var h=new cR(l,u,o);h.name="parallel_"+c,h.resize(l,o),l.coordinateSystem=h,h.model=l,a.push(h)}),u.eachSeries(function(l){if("parallel"===l.get("coordinateSystem")){var c=l.getReferringComponents("parallel",xn.C6).models[0];l.coordinateSystem=c.coordinateSystem}}),a}};var eD=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.activeIntervals=[],a}return(0,Tt.ZT)(o,u),o.prototype.getAreaSelectStyle=function(){return(0,V0.Z)([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},o.prototype.setActiveIntervals=function(a){var l=this.activeIntervals=b.clone(a);if(l)for(var c=l.length-1;c>=0;c--)It.dt(l[c])},o.prototype.getActiveState=function(a){var l=this.activeIntervals;if(!l.length)return"normal";if(null==a||isNaN(+a))return"inactive";if(1===l.length){var c=l[0];if(c[0]<=a&&a<=c[1])return"active"}else for(var h=0,f=l.length;h<f;h++)if(l[h][0]<=a&&a<=l[h][1])return"active";return"inactive"},o}(ma.Z);b.mixin(eD,Zf.W);const zr=eD;var Et=!0,Rh=Math.min,Sd=Math.max,fR=Math.pow,Sb="globalPan",gR={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},mR={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},_R={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},nD=0,rD=function(u){function o(a){var l=u.call(this)||this;return l._track=[],l._covers=[],l._handlers={},l._zr=a,l.group=new Pn.Z,l._uid="brushController_"+nD++,(0,b.each)(g5,function(c,h){this._handlers[h]=(0,b.bind)(c,this)},l),l}return(0,Tt.ZT)(o,u),o.prototype.enableBrush=function(a){return this._brushType&&this._doDisableBrush(),a.brushType&&this._doEnableBrush(a),this},o.prototype._doEnableBrush=function(a){var l=this._zr;this._enableGlobalPan||function FP(u,o,a){cd(u)[o]=a}(l,Sb,this._uid),(0,b.each)(this._handlers,function(c,h){l.on(h,c)}),this._brushType=a.brushType,this._brushOption=(0,b.merge)((0,b.clone)(_R),a,!0)},o.prototype._doDisableBrush=function(){var a=this._zr;(function au(u,o,a){var l=cd(u);l[o]===a&&(l[o]=null)})(a,Sb,this._uid),(0,b.each)(this._handlers,function(l,c){a.off(c,l)}),this._brushType=this._brushOption=null},o.prototype.setPanels=function(a){if(a&&a.length){var l=this._panels={};(0,b.each)(a,function(c){l[c.panelId]=(0,b.clone)(c)})}else this._panels=null;return this},o.prototype.mount=function(a){this._enableGlobalPan=(a=a||{}).enableGlobalPan;var l=this.group;return this._zr.add(l),l.attr({x:a.x||0,y:a.y||0,rotation:a.rotation||0,scaleX:a.scaleX||1,scaleY:a.scaleY||1}),this._transform=l.getLocalTransform(),this},o.prototype.updateCovers=function(a){a=(0,b.map)(a,function(D){return(0,b.merge)((0,b.clone)(_R),D,!0)});var c=this._covers,h=this._covers=[],f=this,g=this._creatingCover;return new su.Z(c,a,function y(D,I){return m(D.__brushOption,I)},m).add(x).update(x).remove(function w(D){c[D]!==g&&f.group.remove(c[D])}).execute(),this;function m(D,I){return(null!=D.id?D.id:"\0-brush-index-"+I)+"-"+D.brushType}function x(D,I){var L=a[D];if(null!=I&&c[I]===g)h[D]=c[I];else{var N=h[D]=null!=I?(c[I].__brushOption=L,c[I]):iD(f,Wa(f,L));Db(f,N)}}},o.prototype.unmount=function(){return this.enableBrush(!1),Mb(this),this._zr.remove(this.group),this},o.prototype.dispose=function(){this.unmount(),this.off()},o}(rp.Z);function Wa(u,o){var a=Np[o.brushType].createCover(u,o);return a.__brushOption=o,bm(a,o),u.group.add(a),a}function iD(u,o){var a=aD(o);return a.endCreating&&(a.endCreating(u,o),bm(o,o.__brushOption)),o}function ym(u,o){var a=o.__brushOption;aD(o).updateCoverShape(u,o,a.range,a)}function bm(u,o){var a=o.z;null==a&&(a=1e4),u.traverse(function(l){l.z=a,l.z2=a})}function Db(u,o){aD(o).updateCommon(u,o),ym(u,o)}function aD(u){return Np[u.__brushOption.brushType]}function oD(u,o,a){var l=u._panels;if(!l)return Et;var c,h=u._transform;return(0,b.each)(l,function(f){f.isTargetByCursor(o,a,h)&&(c=f)}),c}function yR(u,o){var a=u._panels;if(!a)return Et;var l=o.__brushOption.panelId;return null!=l?a[l]:Et}function Mb(u){var o=u._covers,a=o.length;return(0,b.each)(o,function(l){u.group.remove(l)},u),o.length=0,!!a}function Ec(u,o){var a=(0,b.map)(u._covers,function(l){var c=l.__brushOption,h=(0,b.clone)(c.range);return{brushType:c.brushType,panelId:c.panelId,range:h}});u.trigger("brush",{areas:a,isEnd:!!o.isEnd,removeOnClick:!!o.removeOnClick})}function sD(u){var o=u.length-1;return o<0&&(o=0),[u[0],u[o]]}function Dd(u,o,a,l){var c=new Pn.Z;return c.add(new Di.Z({name:"main",style:Tb(a),silent:!0,draggable:!0,cursor:"move",drift:(0,b.curry)(uD,u,o,c,["n","s","w","e"]),ondragend:(0,b.curry)(Ec,o,{isEnd:!0})})),(0,b.each)(l,function(h){c.add(new Di.Z({name:h.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:(0,b.curry)(uD,u,o,c,h),ondragend:(0,b.curry)(Ec,o,{isEnd:!0})}))}),c}function lD(u,o,a,l){var c=l.brushStyle.lineWidth||0,h=Sd(c,6),f=a[0][0],g=a[1][0],m=f-c/2,y=g-c/2,x=a[0][1],w=a[1][1],D=x-h+c/2,I=w-h+c/2,L=x-f,N=w-g,Z=L+c,se=N+c;ol(u,o,"main",f,g,L,N),l.transformable&&(ol(u,o,"w",m,y,h,se),ol(u,o,"e",D,y,h,se),ol(u,o,"n",m,y,Z,h),ol(u,o,"s",m,I,Z,h),ol(u,o,"nw",m,y,h,h),ol(u,o,"ne",D,y,h,h),ol(u,o,"sw",m,I,h,h),ol(u,o,"se",D,I,h,h))}function xm(u,o){var a=o.__brushOption,l=a.transformable,c=o.childAt(0);c.useStyle(Tb(a)),c.attr({silent:!l,cursor:l?"move":"default"}),(0,b.each)([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(h){var f=o.childOfName(h.join("")),g=1===h.length?Ab(u,h[0]):function xR(u,o){var a=[Ab(u,o[0]),Ab(u,o[1])];return("e"===a[0]||"w"===a[0])&&a.reverse(),a.join("")}(u,h);f&&f.attr({silent:!l,invisible:!l,cursor:l?mR[g]+"-resize":null})})}function ol(u,o,a,l,c,h,f){var g=o.childOfName(a);g&&g.setShape(function cD(u){var o=Rh(u[0][0],u[1][0]),a=Rh(u[0][1],u[1][1]);return{x:o,y:a,width:Sd(u[0][0],u[1][0])-o,height:Sd(u[0][1],u[1][1])-a}}(Pb(u,o,[[l,c],[l+h,c+f]])))}function Tb(u){return(0,b.defaults)({strokeNoScale:!0},u.brushStyle)}function Eb(u,o,a,l){var c=[Rh(u,a),Rh(o,l)],h=[Sd(u,a),Sd(o,l)];return[[c[0],h[0]],[c[1],h[1]]]}function Ab(u,o){var c=_n.transformDirection({w:"left",e:"right",n:"top",s:"bottom"}[o],function bR(u){return _n.getTransform(u.group)}(u));return{left:"w",right:"e",top:"n",bottom:"s"}[c]}function uD(u,o,a,l,c,h){var f=a.__brushOption,g=u.toRectRange(f.range),m=Ib(o,c,h);(0,b.each)(l,function(y){var x=gR[y];g[x[0]][x[1]]+=m[x[0]]}),f.range=u.fromRectRange(Eb(g[0][0],g[1][0],g[0][1],g[1][1])),Db(o,a),Ec(o,{isEnd:!1})}function CR(u,o,a,l){var c=o.__brushOption.range,h=Ib(u,a,l);(0,b.each)(c,function(f){f[0]+=h[0],f[1]+=h[1]}),Db(u,o),Ec(u,{isEnd:!1})}function Ib(u,o,a){var l=u.group,c=l.transformCoordToLocal(o,a),h=l.transformCoordToLocal(0,0);return[c[0]-h[0],c[1]-h[1]]}function Pb(u,o,a){var l=yR(u,o);return l&&l!==Et?l.clipPath(a,u._transform):(0,b.clone)(a)}function kp(u){var o=u.event;o.preventDefault&&o.preventDefault()}function hD(u,o,a){return u.childOfName("main").contain(o,a)}function Cm(u,o,a,l){var g,c=u._creatingCover,h=u._creatingPanel,f=u._brushOption;if(u._track.push(a.slice()),function v5(u){var o=u._track;if(!o.length)return!1;var a=o[o.length-1],l=o[0],c=a[0]-l[0],h=a[1]-l[1];return fR(c*c+h*h,.5)>6}(u)||c){if(h&&!c){"single"===f.brushMode&&Mb(u);var m=(0,b.clone)(f);m.brushType=fD(m.brushType,h),m.panelId=h===Et?null:h.panelId,c=u._creatingCover=Wa(u,m),u._covers.push(c)}if(c){var y=Np[fD(u._brushType,h)];c.__brushOption.range=y.getCreatingRange(Pb(u,c,u._track)),l&&(iD(u,c),y.updateCommon(u,c)),ym(u,c),g={isEnd:l}}}else l&&"single"===f.brushMode&&f.removeOnClick&&oD(u,o,a)&&Mb(u)&&(g={isEnd:l,removeOnClick:!0});return g}function fD(u,o){return"auto"===u?o.defaultBrushType:u}var g5={mousedown:function(u){if(this._dragging)Xe(this,u);else if(!u.target||!u.target.draggable){kp(u);var o=this.group.transformCoordToLocal(u.offsetX,u.offsetY);this._creatingCover=null,(this._creatingPanel=oD(this,u,o))&&(this._dragging=!0,this._track=[o.slice()])}},mousemove:function(u){var l=this.group.transformCoordToLocal(u.offsetX,u.offsetY);if(function dD(u,o,a){if(u._brushType&&!function Xu(u,o,a){var l=u._zr;return o<0||o>l.getWidth()||a<0||a>l.getHeight()}(u,o.offsetX,o.offsetY)){var l=u._zr,c=u._covers,h=oD(u,o,a);if(!u._dragging)for(var f=0;f<c.length;f++){var g=c[f].__brushOption;if(h&&(h===Et||g.panelId===h.panelId)&&Np[g.brushType].contain(c[f],a[0],a[1]))return}h&&l.setCursorStyle("crosshair")}}(this,u,l),this._dragging){kp(u);var c=Cm(this,u,l,!1);c&&Ec(this,c)}},mouseup:function(u){Xe(this,u)}};function Xe(u,o){if(u._dragging){kp(o);var c=u.group.transformCoordToLocal(o.offsetX,o.offsetY),h=Cm(u,o,c,!0);u._dragging=!1,u._track=[],u._creatingCover=null,h&&Ec(u,h)}}var Np={lineX:Fp(0),lineY:Fp(1),rect:{createCover:function(u,o){function a(l){return l}return Dd({toRectRange:a,fromRectRange:a},u,o,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(u){var o=sD(u);return Eb(o[1][0],o[1][1],o[0][0],o[0][1])},updateCoverShape:function(u,o,a,l){lD(u,o,a,l)},updateCommon:xm,contain:hD},polygon:{createCover:function(u,o){var a=new Pn.Z;return a.add(new Ps.Z({name:"main",style:Tb(o),silent:!0})),a},getCreatingRange:function(u){return u},endCreating:function(u,o){o.remove(o.childAt(0)),o.add(new tl.Z({name:"main",draggable:!0,drift:(0,b.curry)(CR,u,o),ondragend:(0,b.curry)(Ec,u,{isEnd:!0})}))},updateCoverShape:function(u,o,a,l){o.childAt(0).setShape({points:Pb(u,o,a)})},updateCommon:xm,contain:hD}};function Fp(u){return{createCover:function(o,a){return Dd({toRectRange:function(l){var c=[l,[0,100]];return u&&c.reverse(),c},fromRectRange:function(l){return l[u]}},o,a,[[["w"],["e"]],[["n"],["s"]]][u])},getCreatingRange:function(o){var a=sD(o);return[Rh(a[0][u],a[1][u]),Sd(a[0][u],a[1][u])]},updateCoverShape:function(o,a,l,c){var h,f=yR(o,a);if(f!==Et&&f.getLinearBrushOtherExtent)h=f.getLinearBrushOtherExtent(u);else{var g=o._zr;h=[0,[g.getWidth(),g.getHeight()][1-u]]}var m=[l,h];u&&m.reverse(),lD(o,a,m,c)},updateCommon:xm,contain:hD}}const Ns=rD;function Rb(u){return u=Al(u),function(o){return _n.clipPointsByRect(o,u)}}function pD(u,o){return u=Al(u),function(a){var l=o??a,h=l?u.x:u.y;return[h,h+((l?u.width:u.height)||0)]}}function wm(u,o,a){var l=Al(u);return function(c,h){return l.contain(h[0],h[1])&&!lp(c,o,a)}}function Al(u){return yr.Z.create(u)}var Lb=["axisLine","axisTickLabel","axisName"];const _5=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.init=function(a,l){u.prototype.init.apply(this,arguments),(this._brushController=new Ns(l.getZr())).on("brush",b.bind(this._onBrush,this))},o.prototype.render=function(a,l,c,h){if(!function Ob(u,o,a){return a&&"axisAreaSelect"===a.type&&o.findComponents({mainType:"parallelAxis",query:a})[0]===u}(a,l,h)){this.axisModel=a,this.api=c,this.group.removeAll();var f=this._axisGroup;if(this._axisGroup=new Pn.Z,this.group.add(this._axisGroup),a.get("show")){var g=function gD(u,o){return o.getComponent("parallel",u.get("parallelIndex"))}(a,l),m=g.coordinateSystem,y=a.getAreaSelectStyle(),x=y.width,D=m.getAxisLayout(a.axis.dim),I=b.extend({strokeContainThreshold:x},D),L=new Eo(a,I);b.each(Lb,L.add,L),this._axisGroup.add(L.getGroup()),this._refreshBrushController(I,y,a,g,x,c),_n.groupTransition(f,this._axisGroup,a)}}},o.prototype._refreshBrushController=function(a,l,c,h,f,g){var m=c.axis.getExtent(),y=m[1]-m[0],x=Math.min(30,.1*Math.abs(y)),w=yr.Z.create({x:m[0],y:-f/2,width:y,height:f});w.x-=x,w.width+=2*x,this._brushController.mount({enableGlobalPan:!0,rotation:a.rotation,x:a.position[0],y:a.position[1]}).setPanels([{panelId:"pl",clipPath:Rb(w),isTargetByCursor:wm(w,g,h),getLinearBrushOtherExtent:pD(w,0)}]).enableBrush({brushType:"lineX",brushStyle:l,removeOnClick:!0}).updateCovers(function m5(u){var o=u.axis;return b.map(u.activeIntervals,function(a){return{brushType:"lineX",panelId:"pl",range:[o.dataToCoord(a[0],!0),o.dataToCoord(a[1],!0)]}})}(c))},o.prototype._onBrush=function(a){var c=this.axisModel,h=c.axis,f=b.map(a.areas,function(g){return[h.coordToData(g.range[0],!0),h.coordToData(g.range[1],!0)]});(!c.option.realtime===a.isEnd||a.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:c.id,intervals:f})},o.prototype.dispose=function(){this._brushController.dispose()},o.type="parallelAxis",o}(ga.Z);var Sm={type:"axisAreaSelect",event:"axisAreaSelected"},kb={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function Mm(u){u.registerComponentView(rR),u.registerComponentModel(iR),u.registerCoordinateSystem("parallel",hR),u.registerPreprocessor(pm),u.registerComponentModel(zr),u.registerComponentView(_5),Xf(u,"parallel",zr,kb),function Dm(u){u.registerAction(Sm,function(o,a){a.eachComponent({mainType:"parallelAxis",query:o},function(l){l.axis.model.setActiveIntervals(o.intervals)})}),u.registerAction("parallelAxisExpand",function(o,a){a.eachComponent({mainType:"parallel",query:o},function(l){l.setAxisExpand(o)})})}(u)}var y5=function u(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0},wR=function(u){function o(a){return u.call(this,a)||this}return(0,Tt.ZT)(o,u),o.prototype.getDefaultShape=function(){return new y5},o.prototype.buildPath=function(a,l){var c=l.extent;a.moveTo(l.x1,l.y1),a.bezierCurveTo(l.cpx1,l.cpy1,l.cpx2,l.cpy2,l.x2,l.y2),"vertical"===l.orient?(a.lineTo(l.x2+c,l.y2),a.bezierCurveTo(l.cpx2+c,l.cpy2,l.cpx1+c,l.cpy1,l.x1+c,l.y1)):(a.lineTo(l.x2,l.y2+c),a.bezierCurveTo(l.cpx2,l.cpy2+c,l.cpx1,l.cpy1+c,l.x1,l.y1+c)),a.closePath()},o.prototype.highlight=function(){(0,Ut.fD)(this)},o.prototype.downplay=function(){(0,Ut.Mh)(this)},o}(ve.ZP);const MR=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a._focusAdjacencyDisabled=!1,a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c){var h=this,f=a.getGraph(),g=this.group,m=a.layoutInfo,y=m.width,x=m.height,w=a.getData(),D=a.getData("edge"),I=a.get("orient");this._model=a,g.removeAll(),g.x=m.x,g.y=m.y,f.eachEdge(function(L){var N=new wR,Z=(0,Mr.A)(N);Z.dataIndex=L.dataIndex,Z.seriesIndex=a.seriesIndex,Z.dataType="edge";var pt,yt,wt,kt,en,jt,dn,Fn,se=L.getModel(),_e=se.getModel("lineStyle"),me=_e.get("curveness"),De=L.node1.getLayout(),Pe=L.node1.getModel(),Ie=Pe.get("localX"),ke=Pe.get("localY"),Ue=L.node2.getLayout(),Ye=L.node2.getModel(),Ke=Ye.get("localX"),qe=Ye.get("localY"),ut=L.getLayout();switch(N.shape.extent=Math.max(1,ut.dy),N.shape.orient=I,"vertical"===I?(en=pt=(null!=Ie?Ie*y:De.x)+ut.sy,jt=(yt=(null!=ke?ke*x:De.y)+De.dy)*(1-me)+(kt=null!=qe?qe*x:Ue.y)*me,dn=wt=(null!=Ke?Ke*y:Ue.x)+ut.ty,Fn=yt*me+kt*(1-me)):(en=(pt=(null!=Ie?Ie*y:De.x)+De.dx)*(1-me)+(wt=null!=Ke?Ke*y:Ue.x)*me,jt=yt=(null!=ke?ke*x:De.y)+ut.sy,dn=pt*me+wt*(1-me),Fn=kt=(null!=qe?qe*x:Ue.y)+ut.ty),N.setShape({x1:pt,y1:yt,x2:wt,y2:kt,cpx1:en,cpy1:jt,cpx2:dn,cpy2:Fn}),N.useStyle(_e.getItemStyle()),N.style.fill){case"source":N.style.fill=L.node1.getVisual("color"),N.style.decal=L.node1.getVisual("style").decal;break;case"target":N.style.fill=L.node2.getVisual("color"),N.style.decal=L.node2.getVisual("style").decal;break;case"gradient":var Hn=L.node1.getVisual("color"),lr=L.node2.getVisual("color");(0,b.isString)(Hn)&&(0,b.isString)(lr)&&(N.style.fill=new Bf.Z(0,0,+("horizontal"===I),+("vertical"===I),[{color:Hn,offset:0},{color:lr,offset:1}]))}var br=se.getModel("emphasis");(0,Ut.WO)(N,se,"lineStyle",function(xi){return xi.getItemStyle()}),g.add(N),D.setItemGraphicEl(L.dataIndex,N);var Fr=br.get("focus");(0,Ut.k5)(N,"adjacency"===Fr?L.getAdjacentDataIndices():Fr,br.get("blurScope"),br.get("disabled")),(0,Mr.A)(N).dataType="edge"}),f.eachNode(function(L){var N=L.getLayout(),Z=L.getModel(),se=Z.get("localX"),_e=Z.get("localY"),me=Z.getModel("emphasis"),De=new Di.Z({shape:{x:null!=se?se*y:N.x,y:null!=_e?_e*x:N.y,width:N.dx,height:N.dy},style:Z.getModel("itemStyle").getItemStyle(),z2:10});(0,qt.ni)(De,(0,qt.k3)(Z),{labelFetcher:a,labelDataIndex:L.dataIndex,defaultText:L.id}),De.disableLabelAnimation=!0,De.setStyle("fill",L.getVisual("color")),De.setStyle("decal",L.getVisual("style").decal),(0,Ut.WO)(De,Z),g.add(De),w.setItemGraphicEl(L.dataIndex,De),(0,Mr.A)(De).dataType="node";var Pe=me.get("focus");(0,Ut.k5)(De,"adjacency"===Pe?L.getAdjacentDataIndices():Pe,me.get("blurScope"),me.get("disabled"))}),w.eachItemGraphicEl(function(L,N){w.getItemModel(N).get("draggable")&&(L.drift=function(se,_e){h._focusAdjacencyDisabled=!0,this.shape.x+=se,this.shape.y+=_e,this.dirty(),c.dispatchAction({type:"dragNode",seriesId:a.id,dataIndex:w.getRawIndex(N),localX:this.shape.x/y,localY:this.shape.y/x})},L.ondragend=function(){h._focusAdjacencyDisabled=!1},L.draggable=!0,L.cursor="move")}),!this._data&&a.isAnimationEnabled()&&g.setClipPath(function DR(u,o,a){var l=new Di.Z({shape:{x:u.x-10,y:u.y-10,width:0,height:u.height+20}});return wn.KZ(l,{shape:{width:u.width+20}},o,a),l}(g.getBoundingRect(),a,function(){g.removeClipPath()})),this._data=a.getData()},o.prototype.dispose=function(){},o.type="sankey",o}(ia.Z),b5=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.getInitialData=function(a,l){var c=a.edges||a.links,h=a.data||a.nodes,f=a.levels;this.levelModels=[];for(var g=this.levelModels,m=0;m<f.length;m++)null!=f[m].depth&&f[m].depth>=0&&(g[f[m].depth]=new ka.Z(f[m],this,l));if(h&&c)return dm(h,c,this,!0,function x(w,D){w.wrapMethod("getItemModel",function(I,L){var N=I.parentModel,Z=N.getData().getItemLayout(L);if(Z){var _e=N.levelModels[Z.depth];_e&&(I.parentModel=_e)}return I}),D.wrapMethod("getItemModel",function(I,L){var N=I.parentModel,se=N.getGraph().getEdgeByIndex(L).node1.getLayout();if(se){var me=N.levelModels[se.depth];me&&(I.parentModel=me)}return I})}).data},o.prototype.setNodePosition=function(a,l){var h=(this.option.data||this.option.nodes)[a];h.localX=l[0],h.localY=l[1]},o.prototype.getGraph=function(){return this.getData().graph},o.prototype.getEdgeData=function(){return this.getGraph().edgeData},o.prototype.formatTooltip=function(a,l,c){function h(I){return isNaN(I)||null==I}if("edge"===c){var f=this.getDataParams(a,c),g=f.data,m=f.value;return(0,ca.TX)("nameValue",{name:g.source+" -- "+g.target,value:m,noValue:h(m)})}var w=this.getGraph().getNodeByIndex(a).getLayout().value,D=this.getDataParams(a,c).data.name;return(0,ca.TX)("nameValue",{name:null!=D?D+"":null,value:w,noValue:h(w)})},o.prototype.optionUpdated=function(){},o.prototype.getDataParams=function(a,l){var c=u.prototype.getDataParams.call(this,a,l);if(null==c.value&&"node"===l){var f=this.getGraph().getNodeByIndex(a).getLayout().value;c.value=f}return c},o.type="series.sankey",o.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},o}(Zi.Z);function TR(u,o){u.eachSeriesByType("sankey",function(a){var l=a.get("nodeWidth"),c=a.get("nodeGap"),h=function x5(u,o){return Vr.ME(u.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()})}(a,o);a.layoutInfo=h;var f=h.width,g=h.height,m=a.getGraph(),y=m.nodes,x=m.edges;!function yD(u){b.each(u,function(o){var a=du(o.outEdges,Bp),l=du(o.inEdges,Bp),c=o.getValue()||0,h=Math.max(a,l,c);o.setLayout({value:h},!0)})}(y),function _D(u,o,a,l,c,h,f,g,m){(function ER(u,o,a,l,c,h,f){for(var g=[],m=[],y=[],x=[],w=0,D=0;D<o.length;D++)g[D]=1;for(D=0;D<u.length;D++)m[D]=u[D].inEdges.length,0===m[D]&&y.push(u[D]);for(var I=-1;y.length;){for(var L=0;L<y.length;L++){var N=y[L],Z=N.hostGraph.data.getRawDataItem(N.dataIndex),se=null!=Z.depth&&Z.depth>=0;se&&Z.depth>I&&(I=Z.depth),N.setLayout({depth:se?Z.depth:w},!0),N.setLayout("vertical"===h?{dy:a}:{dx:a},!0);for(var _e=0;_e<N.outEdges.length;_e++){var me=N.outEdges[_e];g[o.indexOf(me)]=0;var Pe=me.node2;0==--m[u.indexOf(Pe)]&&x.indexOf(Pe)<0&&x.push(Pe)}}++w,y=x,x=[]}for(D=0;D<g.length;D++)if(1===g[D])throw new Error("Sankey is a DAG, the original data has cycle!");var ke=I>w-1?I:w-1;f&&"left"!==f&&function C5(u,o,a,l){if("right"===o){for(var c=[],h=u,f=0;h.length;){for(var g=0;g<h.length;g++){var m=h[g];m.setLayout({skNodeHeight:f},!0);for(var y=0;y<m.inEdges.length;y++){var x=m.inEdges[y];c.indexOf(x.node1)<0&&c.push(x.node1)}}h=c,c=[],++f}b.each(u,function(w){Tm(w)||w.setLayout({depth:Math.max(0,l-w.getLayout().skNodeHeight)},!0)})}else"justify"===o&&function w5(u,o){b.each(u,function(a){!Tm(a)&&!a.outEdges.length&&a.setLayout({depth:o},!0)})}(u,l)}(u,f,0,ke),function S5(u,o,a){b.each(u,function(l){var c=l.getLayout().depth*o;l.setLayout("vertical"===a?{y:c}:{x:c},!0)})}(u,"vertical"===h?(c-a)/ke:(l-a)/ke,h)})(u,o,a,c,h,g,m),function D5(u,o,a,l,c,h,f){var g=function M5(u,o){var a=[],l="vertical"===o?"y":"x",c=(0,xn.pv)(u,function(h){return h.getLayout()[l]});return c.keys.sort(function(h,f){return h-f}),b.each(c.keys,function(h){a.push(c.buckets.get(h))}),a}(u,f);(function T5(u,o,a,l,c,h){var f=1/0;b.each(u,function(g){var m=g.length,y=0;b.each(g,function(w){y+=w.getLayout().value});var x="vertical"===h?(l-(m-1)*c)/y:(a-(m-1)*c)/y;x<f&&(f=x)}),b.each(u,function(g){b.each(g,function(m,y){var x=m.getLayout().value*f;"vertical"===h?(m.setLayout({x:y},!0),m.setLayout({dx:x},!0)):(m.setLayout({y},!0),m.setLayout({dy:x},!0))})}),b.each(o,function(g){var m=+g.getValue()*f;g.setLayout({dy:m},!0)})})(g,o,a,l,c,f),bD(g,c,a,l,f);for(var m=1;h>0;h--)E5(g,m*=.99,f),bD(g,c,a,l,f),xD(g,m,f),bD(g,c,a,l,f)}(u,o,h,c,l,f,g),function Bb(u,o){var a="vertical"===o?"x":"y";b.each(u,function(l){l.outEdges.sort(function(c,h){return c.node2.getLayout()[a]-h.node2.getLayout()[a]}),l.inEdges.sort(function(c,h){return c.node1.getLayout()[a]-h.node1.getLayout()[a]})}),b.each(u,function(l){var c=0,h=0;b.each(l.outEdges,function(f){f.setLayout({sy:c},!0),c+=f.getLayout().dy}),b.each(l.inEdges,function(f){f.setLayout({ty:h},!0),h+=f.getLayout().dy})})}(u,g)}(y,x,l,c,f,g,0!==b.filter(y,function(N){return 0===N.getLayout().value}).length?0:a.get("layoutIterations"),a.get("orient"),a.get("nodeAlign"))})}function Tm(u){var o=u.hostGraph.data.getRawDataItem(u.dataIndex);return null!=o.depth&&o.depth>=0}function bD(u,o,a,l,c){var h="vertical"===c?"x":"y";b.each(u,function(f){f.sort(function(N,Z){return N.getLayout()[h]-Z.getLayout()[h]});for(var g,m,y,x=0,w=f.length,D="vertical"===c?"dx":"dy",I=0;I<w;I++)(y=x-(m=f[I]).getLayout()[h])>0&&(g=m.getLayout()[h]+y,m.setLayout("vertical"===c?{x:g}:{y:g},!0)),x=m.getLayout()[h]+m.getLayout()[D]+o;if((y=x-o-("vertical"===c?l:a))>0)for(g=m.getLayout()[h]-y,m.setLayout("vertical"===c?{x:g}:{y:g},!0),x=g,I=w-2;I>=0;--I)(y=(m=f[I]).getLayout()[h]+m.getLayout()[D]+o-x)>0&&(g=m.getLayout()[h]-y,m.setLayout("vertical"===c?{x:g}:{y:g},!0)),x=m.getLayout()[h]})}function E5(u,o,a){b.each(u.slice().reverse(),function(l){b.each(l,function(c){if(c.outEdges.length){var h=du(c.outEdges,A5,a)/du(c.outEdges,Bp);if(isNaN(h)){var f=c.outEdges.length;h=f?du(c.outEdges,I5,a)/f:0}if("vertical"===a){var g=c.getLayout().x+(h-Ic(c,a))*o;c.setLayout({x:g},!0)}else{var m=c.getLayout().y+(h-Ic(c,a))*o;c.setLayout({y:m},!0)}}})})}function A5(u,o){return Ic(u.node2,o)*u.getValue()}function I5(u,o){return Ic(u.node2,o)}function Ac(u,o){return Ic(u.node1,o)*u.getValue()}function Fb(u,o){return Ic(u.node1,o)}function Ic(u,o){return"vertical"===o?u.getLayout().x+u.getLayout().dx/2:u.getLayout().y+u.getLayout().dy/2}function Bp(u){return u.getValue()}function du(u,o,a){for(var l=0,c=u.length,h=-1;++h<c;){var f=+o(u[h],a);isNaN(f)||(l+=f)}return l}function xD(u,o,a){b.each(u,function(l){b.each(l,function(c){if(c.inEdges.length){var h=du(c.inEdges,Ac,a)/du(c.inEdges,Bp);if(isNaN(h)){var f=c.inEdges.length;h=f?du(c.inEdges,Fb,a)/f:0}if("vertical"===a){var g=c.getLayout().x+(h-Ic(c,a))*o;c.setLayout({x:g},!0)}else{var m=c.getLayout().y+(h-Ic(c,a))*o;c.setLayout({y:m},!0)}}})})}function AR(u){u.eachSeriesByType("sankey",function(o){var l=o.getGraph().nodes;if(l.length){var c=1/0,h=-1/0;b.each(l,function(f){var g=f.getLayout().value;g<c&&(c=g),g>h&&(h=g)}),b.each(l,function(f){var m=new to({type:"color",mappingMethod:"linear",dataExtent:[c,h],visual:o.get("color")}).mapValueToVisual(f.getLayout().value),y=f.getModel().get(["itemStyle","color"]);null!=y?(f.setVisual("color",y),f.setVisual("style",{fill:y})):(f.setVisual("color",m),f.setVisual("style",{fill:m}))})}})}var Em=z(1577),CD=function(){function u(){}return u.prototype.getInitialData=function(o,a){var l,m,c=a.getComponent("xAxis",this.get("xAxisIndex")),h=a.getComponent("yAxis",this.get("yAxisIndex")),f=c.get("type"),g=h.get("type");"category"===f?(o.layout="horizontal",l=c.getOrdinalMeta(),m=!0):"category"===g?(o.layout="vertical",l=h.getOrdinalMeta(),m=!0):o.layout=o.layout||"horizontal";var y=["x","y"],x="horizontal"===o.layout?0:1,w=this._baseAxisDim=y[x],D=y[1-x],I=[c,h],L=I[x].get("type"),N=I[1-x].get("type"),Z=o.data;if(Z&&m){var se=[];b.each(Z,function(De,Pe){var Ie;b.isArray(De)?(Ie=De.slice(),De.unshift(Pe)):b.isArray(De.value)?((Ie=b.extend({},De)).value=Ie.value.slice(),De.value.unshift(Pe)):Ie=De,se.push(Ie)}),o.data=se}var _e=this.defaultValueDimensions,me=[{name:w,type:(0,Em.T)(L),ordinalMeta:l,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:D,type:(0,Em.T)(N),dimsDef:_e.slice()}];return gt(this,{coordDimensions:me,dimensionsCount:_e.length+1,encodeDefaulter:b.curry(Nt.pY,me,this)})},u.prototype.getBaseAxis=function(){var o=this._baseAxisDim;return this.ecModel.getComponent(o+"Axis",this.get(o+"AxisIndex")).axis},u}(),wD=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],a.visualDrawType="stroke",a}return(0,Tt.ZT)(o,u),o.type="series.boxplot",o.dependencies=["xAxis","yAxis","grid"],o.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},o}(Zi.Z);(0,b.mixin)(wD,CD,!0);const SD=wD;var IR=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c){var h=a.getData(),f=this.group,g=this._data;this._data||f.removeAll();var m="horizontal"===a.get("layout")?1:0;h.diff(g).add(function(y){if(h.hasValue(y)){var w=Md(h.getItemLayout(y),h,y,m,!0);h.setItemGraphicEl(y,w),f.add(w)}}).update(function(y,x){var w=g.getItemGraphicEl(x);if(h.hasValue(y)){var D=h.getItemLayout(y);w?((0,wn.Zi)(w),Im(D,w,h,y)):w=Md(D,h,y,m),f.add(w),h.setItemGraphicEl(y,w)}else f.remove(w)}).remove(function(y){var x=g.getItemGraphicEl(y);x&&f.remove(x)}).execute(),this._data=h},o.prototype.remove=function(a){var l=this.group,c=this._data;this._data=null,c&&c.eachItemGraphicEl(function(h){h&&l.remove(h)})},o.type="boxplot",o}(ia.Z),PR=function u(){},Am=function(u){function o(a){var l=u.call(this,a)||this;return l.type="boxplotBoxPath",l}return(0,Tt.ZT)(o,u),o.prototype.getDefaultShape=function(){return new PR},o.prototype.buildPath=function(a,l){var c=l.points,h=0;for(a.moveTo(c[h][0],c[h][1]),h++;h<4;h++)a.lineTo(c[h][0],c[h][1]);for(a.closePath();h<c.length;h++)a.moveTo(c[h][0],c[h][1]),h++,a.lineTo(c[h][0],c[h][1])},o}(ve.ZP);function Md(u,o,a,l,c){var h=u.ends,f=new Am({shape:{points:c?Lh(h,l,u):h}});return Im(u,f,o,a,c),f}function Im(u,o,a,l,c){(0,_n[c?"initProps":"updateProps"])(o,{shape:{points:u.ends}},a.hostModel,l),o.useStyle(a.getItemVisual(l,"style")),o.style.strokeNoScale=!0,o.z2=100;var g=a.getItemModel(l),m=g.getModel("emphasis");(0,Ut.WO)(o,g),(0,Ut.k5)(o,m.get("focus"),m.get("blurScope"),m.get("disabled"))}function Lh(u,o,a){return b.map(u,function(l){return(l=l.slice())[o]=a.initBaseline,l})}const Vb=IR;function Pm(u,o){}var Oh=b.each;function DD(u){var o=function zb(u){var o=[],a=[];return u.eachSeriesByType("boxplot",function(l){var c=l.getBaseAxis(),h=b.indexOf(a,c);h<0&&(a[h=a.length]=c,o[h]={axis:c,seriesModels:[]}),o[h].seriesModels.push(l)}),o}(u);Oh(o,function(a){var l=a.seriesModels;!l.length||(function Hb(u){var g,o=u.axis,a=u.seriesModels,l=a.length,c=u.boxWidthList=[],h=u.boxOffsetList=[],f=[];if("category"===o.type)g=o.getBandWidth();else{var m=0;Oh(a,function(L){m=Math.max(m,L.getData().count())});var y=o.getExtent();g=Math.abs(y[1]-y[0])/m}Oh(a,function(L){var N=L.get("boxWidth");b.isArray(N)||(N=[N,N]),f.push([(0,It.GM)(N[0],g)||0,(0,It.GM)(N[1],g)||0])});var x=.8*g-2,w=x/l*.3,D=(x-w*(l-1))/l,I=D/2-x/2;Oh(a,function(L,N){h.push(I),I+=w+D,c.push(Math.min(Math.max(D,f[N][0]),f[N][1]))})}(a),Oh(l,function(c,h){!function MD(u,o,a){var l=u.coordinateSystem,c=u.getData(),h=a/2,f="horizontal"===u.get("layout")?0:1,g=1-f,m=["x","y"],y=c.mapDimension(m[f]),x=c.mapDimensionsAll(m[g]);if(!(null==y||x.length<5))for(var w=0;w<c.count();w++){var D=c.get(y,w),I=me(D,x[2],w),L=me(D,x[0],w),N=me(D,x[1],w),Z=me(D,x[3],w),se=me(D,x[4],w),_e=[];De(_e,N,!1),De(_e,Z,!0),_e.push(L,N,se,Z),Pe(_e,L),Pe(_e,se),Pe(_e,I),c.setItemLayout(w,{initBaseline:I[g],ends:_e})}function me(Ie,ke,Ue){var qe,Ye=c.get(ke,Ue),Ke=[];return Ke[f]=Ie,Ke[g]=Ye,isNaN(Ie)||isNaN(Ye)?qe=[NaN,NaN]:(qe=l.dataToPoint(Ke))[f]+=o,qe}function De(Ie,ke,Ue){var Ye=ke.slice(),Ke=ke.slice();Ye[f]+=h,Ke[f]-=h,Ue?Ie.push(Ye,Ke):Ie.push(Ke,Ye)}function Pe(Ie,ke){var Ue=ke.slice(),Ye=ke.slice();Ue[f]-=h,Ye[f]+=h,Ie.push(Ue,Ye)}}(c,a.boxOffsetList[h],a.boxWidthList[h])}))})}var _a=z(5577),TD=z(4367),RR={type:"echarts:boxplot",transform:function(o){var a=o.upstream;a.sourceFormat!==TD.XD&&(0,_a._y)("");var c=function Ub(u,o){for(var a=[],l=[],c=(o=o||{}).boundIQR,h="none"===c||0===c,f=0;f<u.length;f++){var g=(0,It.dt)(u[f].slice()),m=(0,It.VR)(g,.25),y=(0,It.VR)(g,.5),x=(0,It.VR)(g,.75),w=g[0],D=g[g.length-1],I=(c??1.5)*(x-m),L=h?w:Math.max(w,m-I),N=h?D:Math.min(D,x+I),Z=o.itemNameFormatter,se=(0,b.isFunction)(Z)?Z({value:f}):(0,b.isString)(Z)?Z.replace("{value}",f+""):f+"";a.push([se,L,m,y,x,N]);for(var _e=0;_e<g.length;_e++){var me=g[_e];(me<L||me>N)&&l.push([se,me])}}return{boxData:a,outliers:l}}(a.getRawData(),o.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:c.boxData},{data:c.outliers}]}},LR=["color","borderColor"],AD=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(a),this._isLargeDraw?this._renderLarge(a):this._renderNormal(a)},o.prototype.incrementalPrepareRender=function(a,l,c){this._clear(),this._updateDrawMode(a)},o.prototype.incrementalRender=function(a,l,c,h){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(a,l):this._incrementalRenderNormal(a,l)},o.prototype.eachRendered=function(a){_n.traverseElements(this._progressiveEls||this.group,a)},o.prototype._updateDrawMode=function(a){var l=a.pipelineContext.large;(null==this._isLargeDraw||l!==this._isLargeDraw)&&(this._isLargeDraw=l,this._clear())},o.prototype._renderNormal=function(a){var l=a.getData(),c=this._data,h=this.group,f=l.getLayout("isSimpleBox"),g=a.get("clip",!0),m=a.coordinateSystem,y=m.getArea&&m.getArea();this._data||h.removeAll(),l.diff(c).add(function(x){if(l.hasValue(x)){var w=l.getItemLayout(x);if(g&&Gb(y,w))return;var D=cs(w,0,!0);wn.KZ(D,{shape:{points:w.ends}},a,x),Wb(D,l,x,f),h.add(D),l.setItemGraphicEl(x,D)}}).update(function(x,w){var D=c.getItemGraphicEl(w);if(l.hasValue(x)){var I=l.getItemLayout(x);g&&Gb(y,I)?h.remove(D):(D?(wn.D(D,{shape:{points:I.ends}},a,x),(0,wn.Zi)(D)):D=cs(I),Wb(D,l,x,f),h.add(D),l.setItemGraphicEl(x,D))}else h.remove(D)}).remove(function(x){var w=c.getItemGraphicEl(x);w&&h.remove(w)}).execute(),this._data=l},o.prototype._renderLarge=function(a){this._clear(),jb(a,this.group);var l=a.get("clip",!0)?ch(a.coordinateSystem,!1,a):null;l?this.group.setClipPath(l):this.group.removeClipPath()},o.prototype._incrementalRenderNormal=function(a,l){for(var f,c=l.getData(),h=c.getLayout("isSimpleBox");null!=(f=a.next());){var m=cs(c.getItemLayout(f));Wb(m,c,f,h),m.incremental=!0,this.group.add(m),this._progressiveEls.push(m)}},o.prototype._incrementalRenderLarge=function(a,l){jb(l,this.group,this._progressiveEls,!0)},o.prototype.remove=function(a){this._clear()},o.prototype._clear=function(){this.group.removeAll(),this._data=null},o.type="candlestick",o}(ia.Z),ID=function u(){},OR=function(u){function o(a){var l=u.call(this,a)||this;return l.type="normalCandlestickBox",l}return(0,Tt.ZT)(o,u),o.prototype.getDefaultShape=function(){return new ID},o.prototype.buildPath=function(a,l){var c=l.points;this.__simpleBox?(a.moveTo(c[4][0],c[4][1]),a.lineTo(c[6][0],c[6][1])):(a.moveTo(c[0][0],c[0][1]),a.lineTo(c[1][0],c[1][1]),a.lineTo(c[2][0],c[2][1]),a.lineTo(c[3][0],c[3][1]),a.closePath(),a.moveTo(c[4][0],c[4][1]),a.lineTo(c[5][0],c[5][1]),a.moveTo(c[6][0],c[6][1]),a.lineTo(c[7][0],c[7][1]))},o}(ve.ZP);function cs(u,o,a){var l=u.ends;return new OR({shape:{points:a?P5(l,u):l},z2:100})}function Gb(u,o){for(var a=!0,l=0;l<o.ends.length;l++)if(u.contain(o.ends[l][0],o.ends[l][1])){a=!1;break}return a}function Wb(u,o,a,l){var c=o.getItemModel(a);u.useStyle(o.getItemVisual(a,"style")),u.style.strokeNoScale=!0,u.__simpleBox=l,(0,Ut.WO)(u,c)}function P5(u,o){return b.map(u,function(a){return(a=a.slice())[1]=o.initBaseline,a})}var kR=function u(){},Rm=function(u){function o(a){var l=u.call(this,a)||this;return l.type="largeCandlestickBox",l}return(0,Tt.ZT)(o,u),o.prototype.getDefaultShape=function(){return new kR},o.prototype.buildPath=function(a,l){for(var c=l.points,h=0;h<c.length;)if(this.__sign===c[h++]){var f=c[h++];a.moveTo(f,c[h++]),a.lineTo(f,c[h++])}else h+=3},o}(ve.ZP);function jb(u,o,a,l){var c=u.getData(),h=c.getLayout("largePoints"),f=new Rm({shape:{points:h},__sign:1,ignoreCoarsePointer:!0});o.add(f);var g=new Rm({shape:{points:h},__sign:-1,ignoreCoarsePointer:!0});o.add(g),PD(1,f,u),PD(-1,g,u),l&&(f.incremental=!0,g.incremental=!0),a&&a.push(f,g)}function PD(u,o,a,l){var c=a.get(["itemStyle",u>0?"borderColor":"borderColor0"])||a.get(["itemStyle",u>0?"color":"color0"]),h=a.getModel("itemStyle").getItemStyle(LR);o.useStyle(h),o.style.fill=null,o.style.stroke=c}const NR=AD;var RD=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],a}return(0,Tt.ZT)(o,u),o.prototype.getShadowDim=function(){return"open"},o.prototype.brushSelector=function(a,l,c){var h=l.getItemLayout(a);return h&&c.rect(h.brushRect)},o.type="series.candlestick",o.dependencies=["xAxis","yAxis","grid"],o.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},o}(Zi.Z);(0,b.mixin)(RD,CD,!0);const LD=RD;function FR(u){!u||!b.isArray(u.series)||b.each(u.series,function(o){b.isObject(o)&&"k"===o.type&&(o.type="candlestick")})}var OD=["itemStyle","borderColor"],BR=["itemStyle","borderColor0"],VR=["itemStyle","color"],kD=["itemStyle","color0"];const zR={seriesType:"candlestick",plan:(0,uo.Z)(),performRawSeries:!0,reset:function(u,o){function a(h,f){return f.get(h>0?VR:kD)}function l(h,f){return f.get(h>0?OD:BR)}if(!o.isSeriesFiltered(u))return!u.pipelineContext.large&&{progress:function(h,f){for(var g;null!=(g=h.next());){var m=f.getItemModel(g),y=f.getItemLayout(g).sign,x=m.getItemStyle();x.fill=a(y,m),x.stroke=l(y,m)||x.fill;var w=f.ensureUniqueItemVisual(g,"style");(0,b.extend)(w,x)}}}}};function Lm(u,o,a,l,c){return a>l?-1:a<l?1:o>0?u.get(c,o-1)<=l?1:-1:1}const UR={seriesType:"candlestick",plan:(0,uo.Z)(),reset:function(u){var o=u.coordinateSystem,a=u.getData(),l=function HR(u,o){var l,a=u.getBaseAxis(),c="category"===a.type?a.getBandWidth():(l=a.getExtent(),Math.abs(l[1]-l[0])/o.count()),h=(0,It.GM)((0,b.retrieve2)(u.get("barMaxWidth"),c),c),f=(0,It.GM)((0,b.retrieve2)(u.get("barMinWidth"),1),c),g=u.get("barWidth");return null!=g?(0,It.GM)(g,c):Math.max(Math.min(c/2,h),f)}(u,a),f=["x","y"],g=a.getDimensionIndex(a.mapDimension(f[0])),m=(0,b.map)(a.mapDimensionsAll(f[1]),a.getDimensionIndex,a),y=m[0],x=m[1],w=m[2],D=m[3];if(a.setLayout({candleWidth:l,isSimpleBox:l<=1.3}),!(g<0||m.length<4))return{progress:u.pipelineContext.large?function L(N,Z){for(var me,Ie,se=(0,Ks.o)(4*N.count),_e=0,De=[],Pe=[],ke=Z.getStore();null!=(Ie=N.next());){var Ue=ke.get(g,Ie),Ye=ke.get(y,Ie),Ke=ke.get(x,Ie),qe=ke.get(w,Ie),ut=ke.get(D,Ie);isNaN(Ue)||isNaN(qe)||isNaN(ut)?(se[_e++]=NaN,_e+=3):(se[_e++]=Lm(ke,Ie,Ye,Ke,x),De[0]=Ue,De[1]=qe,me=o.dataToPoint(De,null,Pe),se[_e++]=me?me[0]:NaN,se[_e++]=me?me[1]:NaN,De[1]=ut,me=o.dataToPoint(De,null,Pe),se[_e++]=me?me[1]:NaN)}Z.setLayout("largePoints",se)}:function I(N,Z){for(var se,_e=Z.getStore();null!=(se=N.next());){var me=_e.get(g,se),De=_e.get(y,se),Pe=_e.get(x,se),Ie=_e.get(w,se),ke=_e.get(D,se),Ue=Math.min(De,Pe),Ye=Math.max(De,Pe),Ke=wt(Ue,me),qe=wt(Ye,me),ut=wt(Ie,me),pt=wt(ke,me),yt=[];kt(yt,qe,0),kt(yt,Ke,1),yt.push(jt(pt),jt(qe),jt(ut),jt(Ke)),Z.setItemLayout(se,{sign:Lm(_e,se,De,Pe,x),initBaseline:De>Pe?qe[1]:Ke[1],ends:yt,brushRect:(dn=Ie,Fn=ke,Hn=me,lr=void 0,br=void 0,lr=wt(dn,Hn),br=wt(Fn,Hn),lr[0]-=l/2,br[0]-=l/2,{x:lr[0],y:lr[1],width:l,height:br[1]-lr[1]})})}var dn,Fn,Hn,lr,br;function wt(dn,Fn){var Hn=[];return Hn[0]=Fn,Hn[1]=dn,isNaN(Fn)||isNaN(dn)?[NaN,NaN]:o.dataToPoint(Hn)}function kt(dn,Fn,Hn){var lr=Fn.slice(),br=Fn.slice();lr[0]=(0,_n.subPixelOptimize)(lr[0]+l/2,1,!1),br[0]=(0,_n.subPixelOptimize)(br[0]-l/2,1,!0),Hn?dn.push(lr,br):dn.push(br,lr)}function jt(dn){return dn[0]=(0,_n.subPixelOptimize)(dn[0],1),dn}}}}};function Zb(u,o){var a=o.rippleEffectColor||o.color;u.eachChild(function(l){l.attr({z:o.z,zlevel:o.zlevel,style:{stroke:"stroke"===o.brushType?a:null,fill:"fill"===o.brushType?a:null}})})}const WR=function(u){function o(a,l){var c=u.call(this)||this,h=new Jt(a,l),f=new Pn.Z;return c.add(h),c.add(f),c.updateData(a,l),c}return(0,Tt.ZT)(o,u),o.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},o.prototype.startEffectAnimation=function(a){for(var l=a.symbolType,c=a.color,h=a.rippleNumber,f=this.childAt(1),g=0;g<h;g++){var m=(0,ai.th)(l,-1,-1,2,2,c);m.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var y=-g/h*a.period+a.effectOffset;m.animate("",!0).when(a.period,{scaleX:a.rippleScale/2,scaleY:a.rippleScale/2}).delay(y).start(),m.animateStyle(!0).when(a.period,{opacity:0}).delay(y).start(),f.add(m)}Zb(f,a)},o.prototype.updateEffectAnimation=function(a){for(var l=this._effectCfg,c=this.childAt(1),h=["symbolType","period","rippleScale","rippleNumber"],f=0;f<h.length;f++){var g=h[f];if(l[g]!==a[g])return this.stopEffectAnimation(),void this.startEffectAnimation(a)}Zb(c,a)},o.prototype.highlight=function(){(0,Ut.fD)(this)},o.prototype.downplay=function(){(0,Ut.Mh)(this)},o.prototype.getSymbolType=function(){var a=this.childAt(0);return a&&a.getSymbolType()},o.prototype.updateData=function(a,l){var c=this,h=a.hostModel;this.childAt(0).updateData(a,l);var f=this.childAt(1),g=a.getItemModel(l),m=a.getItemVisual(l,"symbol"),y=(0,ai.zp)(a.getItemVisual(l,"symbolSize")),x=a.getItemVisual(l,"style"),w=x&&x.fill,D=g.getModel("emphasis");f.setScale(y),f.traverse(function(Z){Z.setStyle("fill",w)});var I=(0,ai.Cq)(a.getItemVisual(l,"symbolOffset"),y);I&&(f.x=I[0],f.y=I[1]);var L=a.getItemVisual(l,"symbolRotate");f.rotation=(L||0)*Math.PI/180||0;var N={};N.showEffectOn=h.get("showEffectOn"),N.rippleScale=g.get(["rippleEffect","scale"]),N.brushType=g.get(["rippleEffect","brushType"]),N.period=1e3*g.get(["rippleEffect","period"]),N.effectOffset=l/a.count(),N.z=h.getShallow("z")||0,N.zlevel=h.getShallow("zlevel")||0,N.symbolType=m,N.color=w,N.rippleEffectColor=g.get(["rippleEffect","color"]),N.rippleNumber=g.get(["rippleEffect","number"]),"render"===N.showEffectOn?(this._effectCfg?this.updateEffectAnimation(N):this.startEffectAnimation(N),this._effectCfg=N):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(Z){"emphasis"===Z?"render"!==N.showEffectOn&&c.startEffectAnimation(N):"normal"===Z&&"render"!==N.showEffectOn&&c.stopEffectAnimation()}),this._effectCfg=N,(0,Ut.k5)(this,D.get("focus"),D.get("blurScope"),D.get("disabled"))},o.prototype.fadeOut=function(a){a&&a()},o}(Pn.Z),Yb=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.init=function(){this._symbolDraw=new rd(WR)},o.prototype.render=function(a,l,c){var h=a.getData(),f=this._symbolDraw;f.updateData(h,{clipShape:this._getClipShape(a)}),this.group.add(f.group)},o.prototype._getClipShape=function(a){var l=a.coordinateSystem,c=l&&l.getArea&&l.getArea();return a.get("clip",!0)?c:null},o.prototype.updateTransform=function(a,l,c){var h=a.getData();this.group.dirty();var f=ei("").reset(a,l,c);f.progress&&f.progress({start:0,end:h.count(),count:h.count()},h),this._symbolDraw.updateLayout()},o.prototype._updateGroupTransform=function(a){var l=a.coordinateSystem;l&&l.getRoamTransform&&(this.group.transform=yi.clone(l.getRoamTransform()),this.group.decomposeTransform())},o.prototype.remove=function(a,l){this._symbolDraw&&this._symbolDraw.remove(!0)},o.type="effectScatter",o}(ia.Z),YR=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.hasSymbolVisual=!0,a}return(0,Tt.ZT)(o,u),o.prototype.getInitialData=function(a,l){return(0,$s.Z)(null,this,{useEncodeDefaulter:!0})},o.prototype.brushSelector=function(a,l,c){return c.point(l.getItemLayout(a))},o.type="series.effectScatter",o.dependencies=["grid","polar"],o.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},o}(Zi.Z),Vp=function(u){function o(a,l,c){var h=u.call(this)||this;return h.add(h.createLine(a,l,c)),h._updateEffectSymbol(a,l),h}return(0,Tt.ZT)(o,u),o.prototype.createLine=function(a,l,c){return new ib(a,l,c)},o.prototype._updateEffectSymbol=function(a,l){var h=a.getItemModel(l).getModel("effect"),f=h.get("symbolSize"),g=h.get("symbol");b.isArray(f)||(f=[f,f]);var m=a.getItemVisual(l,"style"),y=h.get("color")||m&&m.stroke,x=this.childAt(1);this._symbolType!==g&&(this.remove(x),(x=(0,ai.th)(g,-.5,-.5,1,1,y)).z2=100,x.culling=!0,this.add(x)),x&&(x.setStyle("shadowColor",y),x.setStyle(h.getItemStyle(["color"])),x.scaleX=f[0],x.scaleY=f[1],x.setColor(y),this._symbolType=g,this._symbolScale=f,this._updateEffectAnimation(a,h,l))},o.prototype._updateEffectAnimation=function(a,l,c){var h=this.childAt(1);if(h){var f=a.getItemLayout(c),g=1e3*l.get("period"),m=l.get("loop"),y=l.get("roundTrip"),x=l.get("constantSpeed"),w=b.retrieve(l.get("delay"),function(I){return I/a.count()*g/3});if(h.ignore=!0,this._updateAnimationPoints(h,f),x>0&&(g=this._getLineLength(h)/x*1e3),g!==this._period||m!==this._loop||y!==this._roundTrip){h.stopAnimation();var D=void 0;D=b.isFunction(w)?w(c):w,h.__t>0&&(D=-g*h.__t),this._animateSymbol(h,g,D,m,y)}this._period=g,this._loop=m,this._roundTrip=y}},o.prototype._animateSymbol=function(a,l,c,h,f){if(l>0){a.__t=0;var g=this,m=a.animate("",h).when(f?2*l:l,{__t:f?2:1}).delay(c).during(function(){g._updateSymbolPosition(a)});h||m.done(function(){g.remove(a)}),m.start()}},o.prototype._getLineLength=function(a){return Kn.dist(a.__p1,a.__cp1)+Kn.dist(a.__cp1,a.__p2)},o.prototype._updateAnimationPoints=function(a,l){a.__p1=l[0],a.__p2=l[1],a.__cp1=l[2]||[(l[0][0]+l[1][0])/2,(l[0][1]+l[1][1])/2]},o.prototype.updateData=function(a,l,c){this.childAt(0).updateData(a,l,c),this._updateEffectSymbol(a,l)},o.prototype._updateSymbolPosition=function(a){var l=a.__p1,c=a.__p2,h=a.__cp1,f=a.__t<1?a.__t:2-a.__t,g=[a.x,a.y],m=g.slice(),y=Cs.Zm,x=Cs.AZ;g[0]=y(l[0],h[0],c[0],f),g[1]=y(l[1],h[1],c[1],f);var w=a.__t<1?x(l[0],h[0],c[0],f):x(c[0],h[0],l[0],1-f),D=a.__t<1?x(l[1],h[1],c[1],f):x(c[1],h[1],l[1],1-f);a.rotation=-Math.atan2(D,w)-Math.PI/2,("line"===this._symbolType||"rect"===this._symbolType||"roundRect"===this._symbolType)&&(void 0!==a.__lastT&&a.__lastT<a.__t?(a.scaleY=1.05*Kn.dist(m,g),1===f&&(g[0]=m[0]+(g[0]-m[0])/2,g[1]=m[1]+(g[1]-m[1])/2)):a.scaleY=1===a.__lastT?2*Kn.dist(l,g):this._symbolScale[1]),a.__lastT=a.__t,a.ignore=!1,a.x=g[0],a.y=g[1]},o.prototype.updateLayout=function(a,l){this.childAt(0).updateLayout(a,l);var c=a.getItemModel(l).getModel("effect");this._updateEffectAnimation(a,c,l)},o}(Pn.Z),km=function(u){function o(a,l,c){var h=u.call(this)||this;return h._createPolyline(a,l,c),h}return(0,Tt.ZT)(o,u),o.prototype._createPolyline=function(a,l,c){var h=a.getItemLayout(l),f=new Ps.Z({shape:{points:h}});this.add(f),this._updateCommonStl(a,l,c)},o.prototype.updateData=function(a,l,c){var h=a.hostModel,f=this.childAt(0),g={shape:{points:a.getItemLayout(l)}};wn.D(f,g,h,l),this._updateCommonStl(a,l,c)},o.prototype._updateCommonStl=function(a,l,c){var h=this.childAt(0),f=a.getItemModel(l),g=c&&c.emphasisLineStyle,m=c&&c.focus,y=c&&c.blurScope,x=c&&c.emphasisDisabled;if(!c||a.hasItemOption){var w=f.getModel("emphasis");g=w.getModel("lineStyle").getLineStyle(),x=w.get("disabled"),m=w.get("focus"),y=w.get("blurScope")}h.useStyle(a.getItemVisual(l,"style")),h.style.fill=null,h.style.strokeNoScale=!0,h.ensureState("emphasis").style=g,(0,Ut.k5)(this,m,y,x)},o.prototype.updateLayout=function(a,l){this.childAt(0).setShape("points",a.getItemLayout(l))},o}(Pn.Z),FD=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a._lastFrame=0,a._lastFramePercent=0,a}return(0,Tt.ZT)(o,u),o.prototype.createLine=function(a,l,c){return new km(a,l,c)},o.prototype._updateAnimationPoints=function(a,l){this._points=l;for(var c=[0],h=0,f=1;f<l.length;f++)h+=Kn.dist(l[f-1],l[f]),c.push(h);if(0!==h){for(f=0;f<c.length;f++)c[f]/=h;this._offsets=c,this._length=h}else this._length=0},o.prototype._getLineLength=function(){return this._length},o.prototype._updateSymbolPosition=function(a){var l=a.__t<1?a.__t:2-a.__t,c=this._points,h=this._offsets,f=c.length;if(h){var m,g=this._lastFrame;if(l<this._lastFramePercent){for(m=Math.min(g+1,f-1);m>=0&&!(h[m]<=l);m--);m=Math.min(m,f-2)}else{for(m=g;m<f&&!(h[m]>l);m++);m=Math.min(m-1,f-2)}var x=(l-h[m])/(h[m+1]-h[m]),w=c[m],D=c[m+1];a.x=w[0]*(1-x)+x*D[0],a.y=w[1]*(1-x)+x*D[1],a.rotation=-Math.atan2(a.__t<1?D[1]-w[1]:w[1]-D[1],a.__t<1?D[0]-w[0]:w[0]-D[0])-Math.PI/2,this._lastFrame=m,this._lastFramePercent=l,a.ignore=!1}},o}(Vp);var $b=z(4443),BD=z(7014),VD=function u(){this.polyline=!1,this.curveness=0,this.segs=[]},Kb=function(u){function o(a){var l=u.call(this,a)||this;return l._off=0,l.hoverDataIdx=-1,l}return(0,Tt.ZT)(o,u),o.prototype.reset=function(){this.notClear=!1,this._off=0},o.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},o.prototype.getDefaultShape=function(){return new VD},o.prototype.buildPath=function(a,l){var f,c=l.segs,h=l.curveness;if(l.polyline)for(f=this._off;f<c.length;){var g=c[f++];if(g>0){a.moveTo(c[f++],c[f++]);for(var m=1;m<g;m++)a.lineTo(c[f++],c[f++])}}else for(f=this._off;f<c.length;){var y=c[f++],x=c[f++],w=c[f++],D=c[f++];a.moveTo(y,x),h>0?a.quadraticCurveTo((y+w)/2-(x-D)*h,(x+D)/2-(w-y)*h,w,D):a.lineTo(w,D)}this.incremental&&(this._off=f,this.notClear=!0)},o.prototype.findDataIndex=function(a,l){var c=this.shape,h=c.segs,f=c.curveness,g=this.style.lineWidth;if(c.polyline)for(var m=0,y=0;y<h.length;){var x=h[y++];if(x>0)for(var w=h[y++],D=h[y++],I=1;I<x;I++){var L=h[y++],N=h[y++];if($b.m(w,D,L,N,g,a,l))return m}m++}else for(m=0,y=0;y<h.length;){if(w=h[y++],D=h[y++],L=h[y++],N=h[y++],f>0){if(BD.m(w,D,(w+L)/2-(D-N)*f,(D+N)/2-(L-w)*f,L,N,g,a,l))return m}else if($b.m(w,D,L,N,g,a,l))return m;m++}return-1},o.prototype.contain=function(a,l){var c=this.transformCoordToLocal(a,l);return this.getBoundingRect().contain(a=c[0],l=c[1])?(this.hoverDataIdx=this.findDataIndex(a,l))>=0:(this.hoverDataIdx=-1,!1)},o.prototype.getBoundingRect=function(){var a=this._rect;if(!a){for(var c=this.shape.segs,h=1/0,f=1/0,g=-1/0,m=-1/0,y=0;y<c.length;){var x=c[y++],w=c[y++];h=Math.min(x,h),g=Math.max(x,g),f=Math.min(w,f),m=Math.max(w,m)}a=this._rect=new yr.Z(h,f,g,m)}return a},o}(ve.ZP);const Nm=function(){function u(){this.group=new Pn.Z}return u.prototype.updateData=function(o){this._clear();var a=this._create();a.setShape({segs:o.getLayout("linesPoints")}),this._setCommon(a,o)},u.prototype.incrementalPrepareUpdate=function(o){this.group.removeAll(),this._clear()},u.prototype.incrementalUpdate=function(o,a){var l=this._newAdded[0],c=a.getLayout("linesPoints"),h=l&&l.shape.segs;if(h&&h.length<2e4){var f=h.length,g=new Float32Array(f+c.length);g.set(h),g.set(c,f),l.setShape({segs:g})}else{this._newAdded=[];var m=this._create();m.incremental=!0,m.setShape({segs:c}),this._setCommon(m,a),m.__startIndex=o.start}},u.prototype.remove=function(){this._clear()},u.prototype.eachRendered=function(o){this._newAdded[0]&&o(this._newAdded[0])},u.prototype._create=function(){var o=new Kb({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(o),this.group.add(o),o},u.prototype._setCommon=function(o,a,l){var c=a.hostModel;o.setShape({polyline:c.get("polyline"),curveness:c.get(["lineStyle","curveness"])}),o.useStyle(c.getModel("lineStyle").getLineStyle()),o.style.strokeNoScale=!0;var h=a.getVisual("style");h&&h.stroke&&o.setStyle("stroke",h.stroke),o.setStyle("fill",null);var f=(0,Mr.A)(o);f.seriesIndex=c.seriesIndex,o.on("mousemove",function(g){f.dataIndex=null;var m=o.hoverDataIdx;m>0&&(f.dataIndex=m+o.__startIndex)})},u.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},u}(),kh={seriesType:"lines",plan:(0,uo.Z)(),reset:function(u){var o=u.coordinateSystem;if(o){var a=u.get("polyline"),l=u.pipelineContext.large;return{progress:function(c,h){var f=[];if(l){var g=void 0,m=c.end-c.start;if(a){for(var y=0,x=c.start;x<c.end;x++)y+=u.getLineCoordsCount(x);g=new Float32Array(m+2*y)}else g=new Float32Array(4*m);var w=0,D=[];for(x=c.start;x<c.end;x++){var I=u.getLineCoords(x,f);a&&(g[w++]=I);for(var L=0;L<I;L++)D=o.dataToPoint(f[L],!1,D),g[w++]=D[0],g[w++]=D[1]}h.setLayout("linesPoints",g)}else for(x=c.start;x<c.end;x++){var N=h.getItemModel(x),Z=(I=u.getLineCoords(x,f),[]);if(a)for(var se=0;se<I;se++)Z.push(o.dataToPoint(f[se]));else{Z[0]=o.dataToPoint(f[0]),Z[1]=o.dataToPoint(f[1]);var _e=N.get(["lineStyle","curveness"]);+_e&&(Z[2]=[(Z[0][0]+Z[1][0])/2-(Z[0][1]-Z[1][1])*_e,(Z[0][1]+Z[1][1])/2-(Z[1][0]-Z[0][0])*_e])}h.setItemLayout(x,Z)}}}}}},Qb=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c){var h=a.getData(),f=this._updateLineDraw(h,a),g=a.get("zlevel"),m=a.get(["effect","trailLength"]),y=c.getZr(),x="svg"===y.painter.getType();x||y.painter.getLayer(g).clear(!0),null!=this._lastZlevel&&!x&&y.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(a)&&m>0&&(x||y.configLayer(g,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(m/10+.9,1),0)})),f.updateData(h);var w=a.get("clip",!0)&&ch(a.coordinateSystem,!1,a);w?this.group.setClipPath(w):this.group.removeClipPath(),this._lastZlevel=g,this._finished=!0},o.prototype.incrementalPrepareRender=function(a,l,c){var h=a.getData();this._updateLineDraw(h,a).incrementalPrepareUpdate(h),this._clearLayer(c),this._finished=!1},o.prototype.incrementalRender=function(a,l,c){this._lineDraw.incrementalUpdate(a,l.getData()),this._finished=a.end===l.getData().count()},o.prototype.eachRendered=function(a){this._lineDraw&&this._lineDraw.eachRendered(a)},o.prototype.updateTransform=function(a,l,c){var h=a.getData(),f=a.pipelineContext;if(!this._finished||f.large||f.progressiveRender)return{update:!0};var g=kh.reset(a,l,c);g.progress&&g.progress({start:0,end:h.count(),count:h.count()},h),this._lineDraw.updateLayout(),this._clearLayer(c)},o.prototype._updateLineDraw=function(a,l){var c=this._lineDraw,h=this._showEffect(l),f=!!l.get("polyline"),m=l.pipelineContext.large;return(!c||h!==this._hasEffet||f!==this._isPolyline||m!==this._isLargeDraw)&&(c&&c.remove(),c=this._lineDraw=m?new Nm:new ob(f?h?FD:km:h?Vp:ib),this._hasEffet=h,this._isPolyline=f,this._isLargeDraw=m),this.group.add(c.group),c},o.prototype._showEffect=function(a){return!!a.get(["effect","show"])},o.prototype._clearLayer=function(a){var l=a.getZr();"svg"!==l.painter.getType()&&null!=this._lastZlevel&&l.painter.getLayer(this._lastZlevel).clear(!0)},o.prototype.remove=function(a,l){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(l)},o.prototype.dispose=function(a,l){this.remove(a,l)},o.type="lines",o}(ia.Z);var zD=typeof Uint32Array>"u"?Array:Uint32Array,$R=typeof Float64Array>"u"?Array:Float64Array;function HD(u){var o=u.data;o&&o[0]&&o[0][0]&&o[0][0].coord&&(u.data=(0,b.map)(o,function(a){var c={coords:[a[0].coord,a[1].coord]};return a[0].name&&(c.fromName=a[0].name),a[1].name&&(c.toName=a[1].name),(0,b.mergeAll)([c,a[0],a[1]])}))}const KR=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.visualStyleAccessPath="lineStyle",a.visualDrawType="stroke",a}return(0,Tt.ZT)(o,u),o.prototype.init=function(a){a.data=a.data||[],HD(a);var l=this._processFlatCoordsArray(a.data);this._flatCoords=l.flatCoords,this._flatCoordsOffset=l.flatCoordsOffset,l.flatCoords&&(a.data=new Float32Array(l.count)),u.prototype.init.apply(this,arguments)},o.prototype.mergeOption=function(a){if(HD(a),a.data){var l=this._processFlatCoordsArray(a.data);this._flatCoords=l.flatCoords,this._flatCoordsOffset=l.flatCoordsOffset,l.flatCoords&&(a.data=new Float32Array(l.count))}u.prototype.mergeOption.apply(this,arguments)},o.prototype.appendData=function(a){var l=this._processFlatCoordsArray(a.data);l.flatCoords&&(this._flatCoords?(this._flatCoords=(0,b.concatArray)(this._flatCoords,l.flatCoords),this._flatCoordsOffset=(0,b.concatArray)(this._flatCoordsOffset,l.flatCoordsOffset)):(this._flatCoords=l.flatCoords,this._flatCoordsOffset=l.flatCoordsOffset),a.data=new Float32Array(l.count)),this.getRawData().appendData(a.data)},o.prototype._getCoordsFromItemModel=function(a){var l=this.getData().getItemModel(a);return l.option instanceof Array?l.option:l.getShallow("coords")},o.prototype.getLineCoordsCount=function(a){return this._flatCoordsOffset?this._flatCoordsOffset[2*a+1]:this._getCoordsFromItemModel(a).length},o.prototype.getLineCoords=function(a,l){if(this._flatCoordsOffset){for(var c=this._flatCoordsOffset[2*a],h=this._flatCoordsOffset[2*a+1],f=0;f<h;f++)l[f]=l[f]||[],l[f][0]=this._flatCoords[c+2*f],l[f][1]=this._flatCoords[c+2*f+1];return h}var g=this._getCoordsFromItemModel(a);for(f=0;f<g.length;f++)l[f]=l[f]||[],l[f][0]=g[f][0],l[f][1]=g[f][1];return g.length},o.prototype._processFlatCoordsArray=function(a){var l=0;if(this._flatCoords&&(l=this._flatCoords.length),(0,b.isNumber)(a[0])){for(var c=a.length,h=new zD(c),f=new $R(c),g=0,m=0,y=0,x=0;x<c;){y++;var w=a[x++];h[m++]=g+l,h[m++]=w;for(var D=0;D<w;D++){var I=a[x++],L=a[x++];f[g++]=I,f[g++]=L}}return{flatCoordsOffset:new Uint32Array(h.buffer,0,m),flatCoords:f,count:y}}return{flatCoordsOffset:null,flatCoords:null,count:a.length}},o.prototype.getInitialData=function(a,l){var h=new xt.Z(["value"],this);return h.hasItemOption=!1,h.initData(a.data,[],function(f,g,m,y){if(f instanceof Array)return NaN;h.hasItemOption=!0;var x=f.value;return null!=x?x instanceof Array?x[y]:x:void 0}),h},o.prototype.formatTooltip=function(a,l,c){var f=this.getData().getItemModel(a),g=f.get("name");if(g)return g;var m=f.get("fromName"),y=f.get("toName"),x=[];return null!=m&&x.push(m),null!=y&&x.push(y),(0,ca.TX)("nameValue",{name:x.join(" > ")})},o.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},o.prototype.getProgressive=function(){return this.option.progressive??(this.option.large?1e4:this.get("progressive"))},o.prototype.getProgressiveThreshold=function(){return this.option.progressiveThreshold??(this.option.large?2e4:this.get("progressiveThreshold"))},o.prototype.getZLevelKey=function(){var a=this.getModel("effect"),l=a.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:a.get("show")&&l>0?l+"":""},o.type="series.lines",o.dependencies=["grid","polar","geo","calendar"],o.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},o}(Zi.Z);function qb(u){return u instanceof Array||(u=[u,u]),u}const k5={seriesType:"lines",reset:function(u){var o=qb(u.get("symbol")),a=qb(u.get("symbolSize")),l=u.getData();return l.setVisual("fromSymbol",o&&o[0]),l.setVisual("toSymbol",o&&o[1]),l.setVisual("fromSymbolSize",a&&a[0]),l.setVisual("toSymbolSize",a&&a[1]),{dataEach:l.hasItemOption?function c(h,f){var g=h.getItemModel(f),m=qb(g.getShallow("symbol",!0)),y=qb(g.getShallow("symbolSize",!0));m[0]&&h.setItemVisual(f,"fromSymbol",m[0]),m[1]&&h.setItemVisual(f,"toSymbol",m[1]),y[0]&&h.setItemVisual(f,"fromSymbolSize",y[0]),y[1]&&h.setItemVisual(f,"toSymbolSize",y[1])}:null}}},UD=function(){function u(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var o=Ot.qW.createCanvas();this.canvas=o}return u.prototype.update=function(o,a,l,c,h,f){var g=this._getBrush(),m=this._getGradient(h,"inRange"),y=this._getGradient(h,"outOfRange"),x=this.pointSize+this.blurSize,w=this.canvas,D=w.getContext("2d"),I=o.length;w.width=a,w.height=l;for(var L=0;L<I;++L){var N=o[L],Z=N[0],se=N[1],me=c(N[2]);D.globalAlpha=me,D.drawImage(g,Z-x,se-x)}if(!w.width||!w.height)return w;for(var De=D.getImageData(0,0,w.width,w.height),Pe=De.data,Ie=0,ke=Pe.length,Ue=this.minOpacity,Ke=this.maxOpacity-Ue;Ie<ke;){me=Pe[Ie+3]/256;var qe=4*Math.floor(255*me);if(me>0){var ut=f(me)?m:y;me>0&&(me=me*Ke+Ue),Pe[Ie++]=ut[qe],Pe[Ie++]=ut[qe+1],Pe[Ie++]=ut[qe+2],Pe[Ie++]=ut[qe+3]*me*256}else Ie+=4}return D.putImageData(De,0,0),w},u.prototype._getBrush=function(){var o=this._brushCanvas||(this._brushCanvas=Ot.qW.createCanvas()),a=this.pointSize+this.blurSize,l=2*a;o.width=l,o.height=l;var c=o.getContext("2d");return c.clearRect(0,0,l,l),c.shadowOffsetX=l,c.shadowBlur=this.blurSize,c.shadowColor="#000",c.beginPath(),c.arc(-a,a,this.pointSize,0,2*Math.PI,!0),c.closePath(),c.fill(),o},u.prototype._getGradient=function(o,a){for(var l=this._gradientPixels,c=l[a]||(l[a]=new Uint8ClampedArray(1024)),h=[0,0,0,0],f=0,g=0;g<256;g++)o[a](g/255,!0,h),c[f++]=h[0],c[f++]=h[1],c[f++]=h[2],c[f++]=h[3];return c},u}();function Bm(u){var o=u.dimensions;return"lng"===o[0]&&"lat"===o[1]}const rL=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c){var h;l.eachComponent("visualMap",function(g){g.eachTargetSeries(function(m){m===a&&(h=g)})}),this._progressiveEls=null,this.group.removeAll();var f=a.coordinateSystem;"cartesian2d"===f.type||"calendar"===f.type?this._renderOnCartesianAndCalendar(a,c,0,a.getData().count()):Bm(f)&&this._renderOnGeo(f,a,h,c)},o.prototype.incrementalPrepareRender=function(a,l,c){this.group.removeAll()},o.prototype.incrementalRender=function(a,l,c,h){var f=l.coordinateSystem;f&&(Bm(f)?this.render(l,c,h):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(l,h,a.start,a.end,!0)))},o.prototype.eachRendered=function(a){_n.traverseElements(this._progressiveEls||this.group,a)},o.prototype._renderOnCartesianAndCalendar=function(a,l,c,h,f){var y,x,w,D,g=a.coordinateSystem,m=Is(g,"cartesian2d");if(m){var I=g.getAxis("x"),L=g.getAxis("y");y=I.getBandWidth()+.5,x=L.getBandWidth()+.5,w=I.scale.getExtent(),D=L.scale.getExtent()}for(var N=this.group,Z=a.getData(),se=a.getModel(["emphasis","itemStyle"]).getItemStyle(),_e=a.getModel(["blur","itemStyle"]).getItemStyle(),me=a.getModel(["select","itemStyle"]).getItemStyle(),De=a.get(["itemStyle","borderRadius"]),Pe=(0,qt.k3)(a),Ie=a.getModel("emphasis"),ke=Ie.get("focus"),Ue=Ie.get("blurScope"),Ye=Ie.get("disabled"),Ke=m?[Z.mapDimension("x"),Z.mapDimension("y"),Z.mapDimension("value")]:[Z.mapDimension("time"),Z.mapDimension("value")],qe=c;qe<h;qe++){var ut=void 0,pt=Z.getItemVisual(qe,"style");if(m){var yt=Z.get(Ke[0],qe),wt=Z.get(Ke[1],qe);if(isNaN(Z.get(Ke[2],qe))||yt<w[0]||yt>w[1]||wt<D[0]||wt>D[1])continue;var kt=g.dataToPoint([yt,wt]);ut=new Di.Z({shape:{x:kt[0]-y/2,y:kt[1]-x/2,width:y,height:x},style:pt})}else{if(isNaN(Z.get(Ke[1],qe)))continue;ut=new Di.Z({z2:1,shape:g.dataToRect([Z.get(Ke[0],qe)]).contentShape,style:pt})}if(Z.hasItemOption){var en=Z.getItemModel(qe),jt=en.getModel("emphasis");se=jt.getModel("itemStyle").getItemStyle(),_e=en.getModel(["blur","itemStyle"]).getItemStyle(),me=en.getModel(["select","itemStyle"]).getItemStyle(),De=en.get(["itemStyle","borderRadius"]),ke=jt.get("focus"),Ue=jt.get("blurScope"),Ye=jt.get("disabled"),Pe=(0,qt.k3)(en)}ut.shape.r=De;var dn=a.getRawValue(qe),Fn="-";dn&&null!=dn[2]&&(Fn=dn[2]+""),(0,qt.ni)(ut,Pe,{labelFetcher:a,labelDataIndex:qe,defaultOpacity:pt.opacity,defaultText:Fn}),ut.ensureState("emphasis").style=se,ut.ensureState("blur").style=_e,ut.ensureState("select").style=me,(0,Ut.k5)(ut,ke,Ue,Ye),ut.incremental=f,f&&(ut.states.emphasis.hoverLayer=!0),N.add(ut),Z.setItemGraphicEl(qe,ut),this._progressiveEls&&this._progressiveEls.push(ut)}},o.prototype._renderOnGeo=function(a,l,c,h){var f=c.targetVisuals.inRange,g=c.targetVisuals.outOfRange,m=l.getData(),y=this._hmLayer||this._hmLayer||new UD;y.blurSize=l.get("blurSize"),y.pointSize=l.get("pointSize"),y.minOpacity=l.get("minOpacity"),y.maxOpacity=l.get("maxOpacity");var x=a.getViewRect().clone(),w=a.getRoamTransform();x.applyTransform(w);var D=Math.max(x.x,0),I=Math.max(x.y,0),L=Math.min(x.width+x.x,h.getWidth()),N=Math.min(x.height+x.y,h.getHeight()),Z=L-D,se=N-I,_e=[m.mapDimension("lng"),m.mapDimension("lat"),m.mapDimension("value")],me=m.mapArray(_e,function(ke,Ue,Ye){var Ke=a.dataToPoint([ke,Ue]);return Ke[0]-=D,Ke[1]-=I,Ke.push(Ye),Ke}),De=c.getExtent(),Pe="visualMap.continuous"===c.type?function tL(u,o){var a=u[1]-u[0];return o=[(o[0]-u[0])/a,(o[1]-u[0])/a],function(l){return l>=o[0]&&l<=o[1]}}(De,c.option.range):function Xn(u,o,a){var l=u[1]-u[0],c=(o=b.map(o,function(f){return{interval:[(f.interval[0]-u[0])/l,(f.interval[1]-u[0])/l]}})).length,h=0;return function(f){var g;for(g=h;g<c;g++)if((m=o[g].interval)[0]<=f&&f<=m[1]){h=g;break}if(g===c)for(g=h-1;g>=0;g--){var m;if((m=o[g].interval)[0]<=f&&f<=m[1]){h=g;break}}return g>=0&&g<c&&a[g]}}(De,c.getPieceList(),c.option.selected);y.update(me,Z,se,f.color.getNormalizer(),{inRange:f.color.getColorMapper(),outOfRange:g.color.getColorMapper()},Pe);var Ie=new be.ZP({style:{width:Z,height:se,x:D,y:I,image:y.canvas},silent:!0});this.group.add(Ie)},o.type="heatmap",o}(ia.Z),aL=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.getInitialData=function(a,l){return(0,$s.Z)(null,this,{generateCoord:"value"})},o.prototype.preventIncremental=function(){var a=us.Z.get(this.get("coordinateSystem"));if(a&&a.dimensions)return"lng"===a.dimensions[0]&&"lat"===a.dimensions[1]},o.type="series.heatmap",o.dependencies=["grid","geo","calendar"],o.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},o}(Zi.Z);var sL=["itemStyle","borderWidth"],Hp=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],Ku=new gh.Z;function Nh(u,o,a,l){var c=u.getItemLayout(o),h=a.get("symbolRepeat"),f=a.get("symbolClip"),g=a.get("symbolPosition")||"start",y=(a.get("symbolRotate")||0)*Math.PI/180||0,x=a.get("symbolPatternSize")||2,w=a.isAnimationEnabled(),D={dataIndex:o,layout:c,itemModel:a,symbolType:u.getItemVisual(o,"symbol")||"circle",style:u.getItemVisual(o,"style"),symbolClip:f,symbolRepeat:h,symbolRepeatDirection:a.get("symbolRepeatDirection"),symbolPatternSize:x,rotation:y,animationModel:w?a:null,hoverScale:w&&a.get(["emphasis","scale"]),z2:a.getShallow("z",!0)||0};(function lL(u,o,a,l,c){var x,h=l.valueDim,f=u.get("symbolBoundingData"),g=l.coordSys.getOtherAxis(l.coordSys.getBaseAxis()),m=g.toGlobalCoord(g.dataToCoord(0)),y=1-+(a[h.wh]<=0);if(b.isArray(f)){var w=[Jb(g,f[0])-m,Jb(g,f[1])-m];w[1]<w[0]&&w.reverse(),x=w[y]}else x=null!=f?Jb(g,f)-m:o?l.coordSysExtent[h.index][y]-m:a[h.wh];c.boundingLength=x,o&&(c.repeatCutLength=a[h.wh]),c.pxSign=x>0?1:-1})(a,h,c,l,D),function ex(u,o,a,l,c,h,f,g,m,y){var L,x=m.valueDim,w=m.categoryDim,D=Math.abs(a[w.wh]),I=u.getItemVisual(o,"symbolSize");(L=b.isArray(I)?I.slice():null==I?["100%","100%"]:[I,I])[w.index]=(0,It.GM)(L[w.index],D),L[x.index]=(0,It.GM)(L[x.index],l?D:Math.abs(h)),y.symbolSize=L,(y.symbolScale=[L[0]/g,L[1]/g])[x.index]*=(m.isHorizontal?-1:1)*f}(u,o,c,h,0,D.boundingLength,D.pxSign,x,l,D),function uL(u,o,a,l,c){var h=u.get(sL)||0;h&&(Ku.attr({scaleX:o[0],scaleY:o[1],rotation:a}),Ku.updateTransform(),h/=Ku.getLineScale(),h*=o[l.valueDim.index]),c.valueLineWidth=h||0}(a,D.symbolScale,y,l,D);var I=D.symbolSize,L=(0,ai.Cq)(a.get("symbolOffset"),I);return function fu(u,o,a,l,c,h,f,g,m,y,x,w){var D=x.categoryDim,I=x.valueDim,L=w.pxSign,N=Math.max(o[I.index]+g,0),Z=N;if(l){var se=Math.abs(m),_e=b.retrieve(u.get("symbolMargin"),"15%")+"",me=!1;_e.lastIndexOf("!")===_e.length-1&&(me=!0,_e=_e.slice(0,_e.length-1));var De=(0,It.GM)(_e,o[I.index]),Pe=Math.max(N+2*De,0),Ie=me?0:2*De,ke=(0,It.kE)(l),Ue=ke?l:tx((se+Ie)/Pe);Pe=N+2*(De=(se-Ue*N)/2/(me?Ue:Math.max(Ue-1,1))),Ie=me?0:2*De,!ke&&"fixed"!==l&&(Ue=y?tx((Math.abs(y)+Ie)/Pe):0),Z=Ue*Pe-Ie,w.repeatTimes=Ue,w.symbolMargin=De}var Ke=L*(Z/2),qe=w.pathPosition=[];qe[D.index]=a[D.wh]/2,qe[I.index]="start"===f?Ke:"end"===f?m-Ke:m/2,h&&(qe[0]+=h[0],qe[1]+=h[1]);var ut=w.bundlePosition=[];ut[D.index]=a[D.xy],ut[I.index]=a[I.xy];var pt=w.barRectShape=b.extend({},a);pt[I.wh]=L*Math.max(Math.abs(a[I.wh]),Math.abs(qe[I.index]+Ke)),pt[D.wh]=a[D.wh];var yt=w.clipShape={};yt[D.xy]=-a[D.xy],yt[D.wh]=x.ecSize[D.wh],yt[I.xy]=0,yt[I.wh]=a[I.wh]}(a,I,c,h,0,L,g,D.valueLineWidth,D.boundingLength,D.repeatCutLength,l,D),D}function Jb(u,o){return u.toGlobalCoord(u.dataToCoord(u.scale.parse(o)))}function Fh(u){var o=u.symbolPatternSize,a=(0,ai.th)(u.symbolType,-o/2,-o/2,o,o);return a.attr({culling:!0}),"image"!==a.type&&a.setStyle({strokeNoScale:!0}),a}function Po(u,o,a,l){var c=u.__pictorialBundle,g=a.pathPosition,m=o.valueDim,y=a.repeatTimes||0,x=0,w=a.symbolSize[o.valueDim.index]+a.valueLineWidth+2*a.symbolMargin;for(Lc(u,function(N){N.__pictorialAnimationIndex=x,N.__pictorialRepeatTimes=y,x<y?Il(N,null,L(x),a,l):Il(N,null,{scaleX:0,scaleY:0},a,l,function(){c.remove(N)}),x++});x<y;x++){var D=Fh(a);D.__pictorialAnimationIndex=x,D.__pictorialRepeatTimes=y,c.add(D);var I=L(x);Il(D,{x:I.x,y:I.y,scaleX:0,scaleY:0},{scaleX:I.scaleX,scaleY:I.scaleY,rotation:I.rotation},a,l)}function L(N){var Z=g.slice(),se=a.pxSign,_e=N;return("start"===a.symbolRepeatDirection?se>0:se<0)&&(_e=y-1-N),Z[m.index]=w*(_e-y/2+.5)+g[m.index],{x:Z[0],y:Z[1],scaleX:a.symbolScale[0],scaleY:a.symbolScale[1],rotation:a.rotation}}}function Rc(u,o,a,l){var c=u.__pictorialBundle,h=u.__pictorialMainPath;h?Il(h,null,{x:a.pathPosition[0],y:a.pathPosition[1],scaleX:a.symbolScale[0],scaleY:a.symbolScale[1],rotation:a.rotation},a,l):(h=u.__pictorialMainPath=Fh(a),c.add(h),Il(h,{x:a.pathPosition[0],y:a.pathPosition[1],scaleX:0,scaleY:0,rotation:a.rotation},{scaleX:a.symbolScale[0],scaleY:a.symbolScale[1]},a,l))}function Up(u,o,a){var l=b.extend({},o.barRectShape),c=u.__pictorialBarRect;c?Il(c,null,{shape:l},o,a):((c=u.__pictorialBarRect=new Di.Z({z2:2,shape:l,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}})).disableMorphing=!0,u.add(c))}function Fs(u,o,a,l){if(a.symbolClip){var c=u.__pictorialClipPath,h=b.extend({},a.clipShape),f=o.valueDim,g=a.animationModel,m=a.dataIndex;if(c)wn.D(c,{shape:h},g,m);else{h[f.wh]=0,c=new Di.Z({shape:h}),u.__pictorialBundle.setClipPath(c),u.__pictorialClipPath=c;var y={};y[f.wh]=a.clipShape[f.wh],_n[l?"updateProps":"initProps"](c,{shape:y},g,m)}}}function Hr(u,o){var a=u.getItemModel(o);return a.getAnimationDelayParams=Bh,a.isAnimationEnabled=Vh,a}function Bh(u){return{index:u.__pictorialAnimationIndex,count:u.__pictorialRepeatTimes}}function Vh(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function Td(u,o,a,l){var c=new Pn.Z,h=new Pn.Z;return c.add(h),c.__pictorialBundle=h,h.x=a.bundlePosition[0],h.y=a.bundlePosition[1],a.symbolRepeat?Po(c,o,a):Rc(c,0,a),Up(c,a,l),Fs(c,o,a,l),c.__pictorialShapeStr=Ad(u,a),c.__pictorialSymbolMeta=a,c}function Ed(u,o,a,l){var c=l.__pictorialBarRect;c&&c.removeTextContent();var h=[];Lc(l,function(f){h.push(f)}),l.__pictorialMainPath&&h.push(l.__pictorialMainPath),l.__pictorialClipPath&&(a=null),b.each(h,function(f){wn.bX(f,{scaleX:0,scaleY:0},a,o,function(){l.parent&&l.parent.remove(l)})}),u.setItemGraphicEl(o,null)}function Ad(u,o){return[u.getItemVisual(o.dataIndex,"symbol")||"none",!!o.symbolRepeat,!!o.symbolClip].join(":")}function Lc(u,o,a){b.each(u.__pictorialBundle.children(),function(l){l!==u.__pictorialBarRect&&o.call(a,l)})}function Il(u,o,a,l,c,h){o&&u.attr(o),l.symbolClip&&!c?a&&u.attr(a):a&&_n[c?"updateProps":"initProps"](u,a,l.animationModel,l.dataIndex,h)}function Id(u,o,a){var l=a.dataIndex,c=a.itemModel,h=c.getModel("emphasis"),f=h.getModel("itemStyle").getItemStyle(),g=c.getModel(["blur","itemStyle"]).getItemStyle(),m=c.getModel(["select","itemStyle"]).getItemStyle(),y=c.getShallow("cursor"),x=h.get("focus"),w=h.get("blurScope"),D=h.get("scale");Lc(u,function(N){if(N instanceof be.ZP){var Z=N.style;N.useStyle(b.extend({image:Z.image,x:Z.x,y:Z.y,width:Z.width,height:Z.height},a.style))}else N.useStyle(a.style);var se=N.ensureState("emphasis");se.style=f,D&&(se.scaleX=1.1*N.scaleX,se.scaleY=1.1*N.scaleY),N.ensureState("blur").style=g,N.ensureState("select").style=m,y&&(N.cursor=y),N.z2=a.z2});var I=o.valueDim.posDesc[+(a.boundingLength>0)];(0,qt.ni)(u.__pictorialBarRect,(0,qt.k3)(c),{labelFetcher:o.seriesModel,labelDataIndex:l,defaultText:Dl(o.seriesModel.getData(),l),inheritColor:a.style.fill,defaultOpacity:a.style.opacity,defaultOutsidePosition:I}),(0,Ut.k5)(u,x,w,h.get("disabled"))}function tx(u){var o=Math.round(u);return Math.abs(u-o)<1e-4?o:Math.ceil(u)}const GD=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c){var h=this.group,f=a.getData(),g=this._data,m=a.coordinateSystem,x=m.getBaseAxis().isHorizontal(),w=m.master.getRect(),D={ecSize:{width:c.getWidth(),height:c.getHeight()},seriesModel:a,coordSys:m,coordSysExtent:[[w.x,w.x+w.width],[w.y,w.y+w.height]],isHorizontal:x,valueDim:Hp[+x],categoryDim:Hp[1-+x]};return f.diff(g).add(function(I){if(f.hasValue(I)){var L=Hr(f,I),N=Nh(f,I,L,D),Z=Td(f,D,N);f.setItemGraphicEl(I,Z),h.add(Z),Id(Z,D,N)}}).update(function(I,L){var N=g.getItemGraphicEl(L);if(f.hasValue(I)){var Z=Hr(f,I),se=Nh(f,I,Z,D),_e=Ad(f,se);N&&_e!==N.__pictorialShapeStr&&(h.remove(N),f.setItemGraphicEl(I,null),N=null),N?function zh(u,o,a){wn.D(u.__pictorialBundle,{x:a.bundlePosition[0],y:a.bundlePosition[1]},a.animationModel,a.dataIndex),a.symbolRepeat?Po(u,o,a,!0):Rc(u,0,a,!0),Up(u,a,!0),Fs(u,o,a,!0)}(N,D,se):N=Td(f,D,se,!0),f.setItemGraphicEl(I,N),N.__pictorialSymbolMeta=se,h.add(N),Id(N,D,se)}else h.remove(N)}).remove(function(I){var L=g.getItemGraphicEl(I);L&&Ed(g,I,L.__pictorialSymbolMeta.animationModel,L)}).execute(),this._data=f,this.group},o.prototype.remove=function(a,l){var c=this.group,h=this._data;a.get("animation")?h&&h.eachItemGraphicEl(function(f){Ed(h,(0,Mr.A)(f).dataIndex,a,f)}):c.removeAll()},o.type="pictorialBar",o}(ia.Z),jD=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.hasSymbolVisual=!0,a.defaultSymbol="roundRect",a}return(0,Tt.ZT)(o,u),o.prototype.getInitialData=function(a){return a.stack=null,u.prototype.getInitialData.apply(this,arguments)},o.type="series.pictorialBar",o.dependencies=["grid"],o.defaultOption=(0,qn.ZL)(pc.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),o}(pc),$D=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a._layers=[],a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c){var h=a.getData(),f=this,g=this.group,m=a.getLayerSeries(),y=h.getLayout("layoutInfo"),x=y.rect,w=y.boundaryGap;function D(Z){return Z.name}g.x=0,g.y=x.y+w[0];var I=new su.Z(this._layersSeries||[],m,D,D),L=[];function N(Z,se,_e){var me=f._layers;if("remove"!==Z){for(var Ie,De=[],Pe=[],ke=m[se].indices,Ue=0;Ue<ke.length;Ue++){var Ye=h.getItemLayout(ke[Ue]),Ke=Ye.x,qe=Ye.y0,ut=Ye.y;De.push(Ke,qe),Pe.push(Ke,qe+ut),Ie=h.getItemVisual(ke[Ue],"style")}var pt,yt=h.getItemLayout(ke[0]),kt=a.getModel("label").get("margin"),en=a.getModel("emphasis");if("add"===Z){var jt=L[se]=new Pn.Z;pt=new r0({shape:{points:De,stackedOnPoints:Pe,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),jt.add(pt),g.add(jt),a.isAnimationEnabled()&&pt.setClipPath(function XD(u,o,a){var l=new Di.Z({shape:{x:u.x-10,y:u.y-10,width:0,height:u.height+20}});return wn.KZ(l,{shape:{x:u.x-50,width:u.width+100,height:u.height+20}},o,a),l}(pt.getBoundingRect(),a,function(){pt.removeClipPath()}))}else pt=(jt=me[_e]).childAt(0),g.add(jt),L[se]=jt,wn.D(pt,{shape:{points:De,stackedOnPoints:Pe}},a),(0,wn.Zi)(pt);(0,qt.ni)(pt,(0,qt.k3)(a),{labelDataIndex:ke[Ue-1],defaultText:h.getName(ke[Ue-1]),inheritColor:Ie.fill},{normal:{verticalAlign:"middle"}}),pt.setTextConfig({position:null,local:!0});var dn=pt.getTextContent();dn&&(dn.x=yt.x-kt,dn.y=yt.y0+yt.y/2),pt.useStyle(Ie),h.setItemGraphicEl(se,pt),(0,Ut.WO)(pt,a),(0,Ut.k5)(pt,en.get("focus"),en.get("blurScope"),en.get("disabled"))}else g.remove(me[se])}I.add((0,b.bind)(N,this,"add")).update((0,b.bind)(N,this,"update")).remove((0,b.bind)(N,this,"remove")).execute(),this._layersSeries=m,this._layers=L},o.type="themeRiver",o}(ia.Z),dL=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.init=function(a){u.prototype.init.apply(this,arguments),this.legendVisualProvider=new vn(b.bind(this.getData,this),b.bind(this.getRawData,this))},o.prototype.fixData=function(a){var l=a.length,c={},h=(0,xn.pv)(a,function(D){return c.hasOwnProperty(D[0]+"")||(c[D[0]+""]=-1),D[2]}),f=[];h.buckets.each(function(D,I){f.push({name:I,dataList:D})});for(var g=f.length,m=0;m<g;++m){for(var y=f[m].name,x=0;x<f[m].dataList.length;++x)c[w=f[m].dataList[x][0]+""]=m;for(var w in c)c.hasOwnProperty(w)&&c[w]!==m&&(c[w]=m,a[l]=[w,0,y],l++)}return a},o.prototype.getInitialData=function(a,l){for(var h=this.getReferringComponents("singleAxis",xn.C6).models[0].get("type"),f=b.filter(a.data,function(L){return void 0!==L[2]}),g=this.fixData(f||[]),m=[],y=this.nameMap=b.createHashMap(),x=0,w=0;w<g.length;++w)m.push(g[w][2]),y.get(g[w][2])||(y.set(g[w][2],x),x++);var D=(0,ct.Z)(g,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:(0,Em.T)(h)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,I=new xt.Z(D,this);return I.initData(g),I},o.prototype.getLayerSeries=function(){for(var a=this.getData(),l=a.count(),c=[],h=0;h<l;++h)c[h]=h;var f=a.mapDimension("single"),g=(0,xn.pv)(c,function(y){return a.get("name",y)}),m=[];return g.buckets.each(function(y,x){y.sort(function(w,D){return a.get(f,w)-a.get(f,D)}),m.push({name:x,indices:y})}),m},o.prototype.getAxisTooltipData=function(a,l,c){b.isArray(a)||(a=a?[a]:[]);for(var y,h=this.getData(),f=this.getLayerSeries(),g=[],m=f.length,x=0;x<m;++x){for(var w=Number.MAX_VALUE,D=-1,I=f[x].indices.length,L=0;L<I;++L){var N=h.get(a[0],f[x].indices[L]),Z=Math.abs(N-l);Z<=w&&(y=N,w=Z,D=f[x].indices[L])}g.push(D)}return{dataIndices:g,nestestValue:y}},o.prototype.formatTooltip=function(a,l,c){var h=this.getData(),f=h.getName(a),g=h.get(h.mapDimension("value"),a);return(0,ca.TX)("nameValue",{name:f,value:g})},o.type="series.themeRiver",o.dependencies=["singleAxis"],o.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},o}(Zi.Z);function nr(u,o){u.eachSeriesByType("themeRiver",function(a){var l=a.getData(),c=a.coordinateSystem,h={},f=c.getRect();h.rect=f;var g=a.get("boundaryGap"),m=c.getAxis();h.boundaryGap=g,"horizontal"===m.orient?(g[0]=It.GM(g[0],f.height),g[1]=It.GM(g[1],f.height),KD(l,a,f.height-g[0]-g[1])):(g[0]=It.GM(g[0],f.width),g[1]=It.GM(g[1],f.width),KD(l,a,f.width-g[0]-g[1])),l.setLayout("layoutInfo",h)})}function KD(u,o,a){if(u.count())for(var I,l=o.coordinateSystem,c=o.getLayerSeries(),h=u.mapDimension("single"),f=u.mapDimension("value"),g=b.map(c,function(Z){return b.map(Z.indices,function(se){var _e=l.dataToPoint(u.get(h,se));return _e[1]=u.get(f,se),_e})}),m=function pi(u){for(var o=u.length,a=u[0].length,l=[],c=[],h=0,f=0;f<a;++f){for(var g=0,m=0;m<o;++m)g+=u[m][f][1];g>h&&(h=g),l.push(g)}for(var y=0;y<a;++y)c[y]=(h-l[y])/2;h=0;for(var x=0;x<a;++x){var w=l[x]+c[x];w>h&&(h=w)}return{y0:c,max:h}}(g),y=m.y0,x=a/m.max,w=c.length,D=c[0].indices.length,L=0;L<D;++L){u.setItemLayout(c[0].indices[L],{layerIndex:0,x:g[0][L][0],y0:I=y[L]*x,y:g[0][L][1]*x});for(var N=1;N<w;++N)u.setItemLayout(c[N].indices[L],{layerIndex:N,x:g[N][L][0],y0:I+=g[N-1][L][1]*x,y:g[N][L][1]*x})}}const dt=function(u){function o(a,l,c,h){var f=u.call(this)||this;f.z2=2,f.textConfig={inside:!0},(0,Mr.A)(f).seriesIndex=l.seriesIndex;var g=new _t.ZP({z2:4,silent:a.getModel().get(["label","silent"])});return f.setTextContent(g),f.updateData(!0,a,l,c,h),f}return(0,Tt.ZT)(o,u),o.prototype.updateData=function(a,l,c,h,f){this.node=l,l.piece=this,c=c||this._seriesModel,h=h||this._ecModel;var g=this;(0,Mr.A)(g).dataIndex=l.dataIndex;var m=l.getModel(),y=m.getModel("emphasis"),x=l.getLayout(),w=b.extend({},x);w.label=null;var D=l.getVisual("style");D.lineJoin="bevel";var I=l.getVisual("decal");I&&(D.decal=(0,M0.I)(I,f));var L=Wt(m.getModel("itemStyle"),w,!0);b.extend(w,L),b.each(Ut.L1,function(_e){var me=g.ensureState(_e),De=m.getModel([_e,"itemStyle"]);me.style=De.getItemStyle();var Pe=Wt(De,w);Pe&&(me.shape=Pe)}),a?(g.setShape(w),g.shape.r=x.r0,wn.D(g,{shape:{r:x.r}},c,l.dataIndex)):(wn.D(g,{shape:w},c),(0,wn.Zi)(g)),g.useStyle(D),this._updateLabel(c);var N=m.getShallow("cursor");N&&g.attr("cursor",N),this._seriesModel=c||this._seriesModel,this._ecModel=h||this._ecModel;var Z=y.get("focus"),se="ancestor"===Z?l.getAncestorsIndices():"descendant"===Z?l.getDescendantIndices():Z;(0,Ut.k5)(this,se,y.get("blurScope"),y.get("disabled"))},o.prototype._updateLabel=function(a){var l=this,c=this.node.getModel(),h=c.getModel("label"),f=this.node.getLayout(),g=f.endAngle-f.startAngle,m=(f.startAngle+f.endAngle)/2,y=Math.cos(m),x=Math.sin(m),w=this,D=w.getTextContent(),I=this.node.dataIndex,L=h.get("minAngle")/180*Math.PI,N=h.get("show")&&!(null!=L&&Math.abs(g)<L);function Z(se,_e){return se.get(_e)??h.get(_e)}D.ignore=!N,b.each(Ut.qc,function(se){var _e=c.getModel("normal"===se?"label":[se,"label"]),me="normal"===se,De=me?D:D.ensureState(se),Pe=a.getFormattedLabel(I,se);me&&(Pe=Pe||l.node.name),De.style=(0,qt.Lr)(_e,{},null,"normal"!==se,!0),Pe&&(De.style.text=Pe);var Ie=_e.get("show");null!=Ie&&!me&&(De.ignore=!Ie);var ke=Z(_e,"position"),Ue=me?w:w.states[se],Ye=Ue.style.fill;Ue.textConfig={outsideFill:"inherit"===_e.get("color")?Ye:null,inside:"outside"!==ke};var Ke,qe=Z(_e,"distance")||0,ut=Z(_e,"align");"outside"===ke?(Ke=f.r+qe,ut=m>Math.PI/2?"right":"left"):ut&&"center"!==ut?"left"===ut?(Ke=f.r0+qe,m>Math.PI/2&&(ut="right")):"right"===ut&&(Ke=f.r-qe,m>Math.PI/2&&(ut="left")):(Ke=g===2*Math.PI&&0===f.r0?0:(f.r+f.r0)/2,ut="center"),De.style.align=ut,De.style.verticalAlign=Z(_e,"verticalAlign")||"middle",De.x=Ke*y+f.cx,De.y=Ke*x+f.cy;var pt=Z(_e,"rotate"),yt=0;"radial"===pt?(yt=-m)<-Math.PI/2&&(yt+=Math.PI):"tangential"===pt?(yt=Math.PI/2-m)>Math.PI/2?yt-=Math.PI:yt<-Math.PI/2&&(yt+=Math.PI):b.isNumber(pt)&&(yt=pt*Math.PI/180),De.rotation=yt}),D.dirtyStyle()},o}(yn.C);var Rn="sunburstRootToNode",QD="sunburstHighlight";const na=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c,h){var f=this;this.seriesModel=a,this.api=c,this.ecModel=l;var g=a.getData(),m=g.tree.root,y=a.getViewRoot(),x=this.group,w=a.get("renderLabelForZeroData"),D=[];y.eachNode(function(_e){D.push(_e)}),function L(_e,me){function De(Ie){return Ie.getId()}function Pe(Ie,ke){!function N(_e,me){if(!w&&_e&&!_e.getValue()&&(_e=null),_e!==m&&me!==m)if(me&&me.piece)_e?(me.piece.updateData(!1,_e,a,l,c),g.setItemGraphicEl(_e.dataIndex,me.piece)):function Z(_e){!_e||_e.piece&&(x.remove(_e.piece),_e.piece=null)}(me);else if(_e){var De=new dt(_e,a,l,c);x.add(De),g.setItemGraphicEl(_e.dataIndex,De)}}(null==Ie?null:_e[Ie],null==ke?null:me[ke])}0===_e.length&&0===me.length||new su.Z(me,_e,De,De).add(Pe).update(Pe).remove(b.curry(Pe,null)).execute()}(D,this._oldChildren||[]),function se(_e,me){me.depth>0?(f.virtualPiece?f.virtualPiece.updateData(!1,_e,a,l,c):(f.virtualPiece=new dt(_e,a,l,c),x.add(f.virtualPiece)),me.piece.off("click"),f.virtualPiece.on("click",function(De){f._rootToNode(me.parentNode)})):f.virtualPiece&&(x.remove(f.virtualPiece),f.virtualPiece=null)}(m,y),this._initEvents(),this._oldChildren=D},o.prototype._initEvents=function(){var a=this;this.group.off("click"),this.group.on("click",function(l){var c=!1;a.seriesModel.getViewRoot().eachNode(function(f){if(!c&&f.piece&&f.piece===l.target){var g=f.getModel().get("nodeClick");if("rootToNode"===g)a._rootToNode(f);else if("link"===g){var m=f.getModel(),y=m.get("link");if(y){var x=m.get("target",!0)||"_blank";(0,Va.MI)(y,x)}}c=!0}})})},o.prototype._rootToNode=function(a){a!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:Rn,from:this.uid,seriesId:this.seriesModel.id,targetNode:a})},o.prototype.containPoint=function(a,l){var h=l.getData().getItemLayout(0);if(h){var f=a[0]-h.cx,g=a[1]-h.cy,m=Math.sqrt(f*f+g*g);return m<=h.r&&m>=h.r0}},o.type="sunburst",o}(ia.Z);function rx(u){var o=0;b.each(u.children,function(l){rx(l);var c=l.value;b.isArray(c)&&(c=c[0]),o+=c});var a=u.value;b.isArray(a)&&(a=a[0]),(null==a||isNaN(a))&&(a=o),a<0&&(a=0),b.isArray(u.value)?u.value[0]=a:u.value=a}const ix=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.ignoreStyleOnData=!0,a}return(0,Tt.ZT)(o,u),o.prototype.getInitialData=function(a,l){var c={name:a.name,children:a.data};rx(c);var h=this._levelModels=b.map(a.levels||[],function(m){return new ka.Z(m,this,l)},this),f=il.createTree(c,this,function g(m){m.wrapMethod("getItemModel",function(y,x){var w=f.getNodeByDataIndex(x),D=h[w.depth];return D&&(y.parentModel=D),y})});return f.data},o.prototype.optionUpdated=function(){this.resetViewRoot()},o.prototype.getDataParams=function(a){var l=u.prototype.getDataParams.apply(this,arguments),c=this.getData().tree.getNodeByDataIndex(a);return l.treePathInfo=Wg(c,this),l},o.prototype.getLevelModel=function(a){return this._levelModels&&this._levelModels[a.depth]},o.prototype.getViewRoot=function(){return this._viewRoot},o.prototype.resetViewRoot=function(a){a?this._viewRoot=a:a=this._viewRoot;var l=this.getRawData().tree.root;(!a||a!==l&&!l.contains(a))&&(this._viewRoot=l)},o.prototype.enableAriaDecal=function(){F0(this)},o.type="series.sunburst",o.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},o}(Zi.Z);var Yt=Math.PI/180;function zm(u,o,a){o.eachSeriesByType(u,function(l){var c=l.get("center"),h=l.get("radius");b.isArray(h)||(h=[0,h]),b.isArray(c)||(c=[c,c]);var f=a.getWidth(),g=a.getHeight(),m=Math.min(f,g),y=(0,It.GM)(c[0],f),x=(0,It.GM)(c[1],g),w=(0,It.GM)(h[0],m/2),D=(0,It.GM)(h[1],m/2),I=-l.get("startAngle")*Yt,L=l.get("minAngle")*Yt,N=l.getData().tree.root,Z=l.getViewRoot(),se=Z.depth,_e=l.get("sort");null!=_e&&JD(Z,_e);var me=0;b.each(Z.children,function(kt){!isNaN(kt.getValue())&&me++});var De=Z.getValue(),Pe=Math.PI/(De||me)*2,Ie=Z.depth>0,Ue=(D-w)/(Z.height-(Ie?-1:1)||1),Ye=l.get("clockwise"),Ke=l.get("stillShowZeroSum"),qe=Ye?1:-1,ut=function(kt,en){if(kt){var jt=en;if(kt!==N){var dn=kt.getValue(),Fn=0===De&&Ke?Pe:dn*Pe;Fn<L&&(Fn=L),jt=en+qe*Fn;var Hn=kt.depth-se-(Ie?-1:1),lr=w+Ue*Hn,br=w+Ue*(Hn+1),Fr=l.getLevelModel(kt);if(Fr){var xi=Fr.get("r0",!0),Oi=Fr.get("r",!0),Yr=Fr.get("radius",!0);null!=Yr&&(xi=Yr[0],Oi=Yr[1]),null!=xi&&(lr=(0,It.GM)(xi,m/2)),null!=Oi&&(br=(0,It.GM)(Oi,m/2))}kt.setLayout({angle:Fn,startAngle:en,endAngle:jt,clockwise:Ye,cx:y,cy:x,r0:lr,r:br})}if(kt.children&&kt.children.length){var ir=0;b.each(kt.children,function(Ci){ir+=ut(Ci,en+ir)})}return jt-en}};if(Ie){var wt=2*Math.PI;N.setLayout({angle:wt,startAngle:I,endAngle:I+wt,clockwise:Ye,cx:y,cy:x,r0:w,r:w+Ue})}ut(Z,I)})}function JD(u,o){var a=u.children||[];u.children=function eM(u,o){if(b.isFunction(o)){var a=b.map(u,function(c,h){var f=c.getValue();return{params:{depth:c.depth,height:c.height,dataIndex:c.dataIndex,getValue:function(){return f}},index:h}});return a.sort(function(c,h){return o(c.params,h.params)}),b.map(a,function(c){return u[c.index]})}var l="asc"===o;return u.sort(function(c,h){var f=(c.getValue()-h.getValue())*(l?1:-1);return 0===f?(c.dataIndex-h.dataIndex)*(l?-1:1):f})}(a,o),a.length&&b.each(u.children,function(l){JD(l,o)})}function tM(u){var o={};u.eachSeriesByType("sunburst",function(l){var c=l.getData(),h=c.tree;h.eachNode(function(f){var m=f.getModel().getModel("itemStyle").getItemStyle();m.fill||(m.fill=function a(l,c,h){for(var f=l;f&&f.depth>1;)f=f.parentNode;var g=c.getColorFromPalette(f.name||f.dataIndex+"",o);return l.depth>1&&(0,b.isString)(g)&&(g=(0,Da.lift)(g,(l.depth-1)/(h-1)*.5)),g}(f,l,h.root.height));var y=c.ensureUniqueItemVisual(f.dataIndex,"style");(0,b.extend)(y,m)})})}var zn={color:"fill",borderColor:"stroke"},fL={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},Ui=(0,xn.Yf)();const rM=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},o.prototype.getInitialData=function(a,l){return(0,$s.Z)(null,this)},o.prototype.getDataParams=function(a,l,c){var h=u.prototype.getDataParams.call(this,a,l);return c&&(h.info=Ui(c).info),h},o.type="series.custom",o.dependencies=["grid","polar","geo","singleAxis","calendar"],o.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},o}(Zi.Z);function ax(u,o){return o=o||[0,0],b.map(["x","y"],function(a,l){var c=this.getAxis(a),h=o[l],f=u[l]/2;return"category"===c.type?c.getBandWidth():Math.abs(c.dataToCoord(h-f)-c.dataToCoord(h+f))},this)}function aM(u,o){return o=o||[0,0],b.map([0,1],function(a){var l=o[a],c=u[a]/2,h=[],f=[];return h[a]=l-c,f[a]=l+c,h[1-a]=f[1-a]=o[1-a],Math.abs(this.dataToPoint(h)[a]-this.dataToPoint(f)[a])},this)}function sM(u,o){var a=this.getAxis(),l=o instanceof Array?o[0]:o,c=(u instanceof Array?u[0]:u)/2;return"category"===a.type?a.getBandWidth():Math.abs(a.dataToCoord(l-c)-a.dataToCoord(l+c))}function uM(u,o){return o=o||[0,0],b.map(["Radius","Angle"],function(a,l){var h=this["get"+a+"Axis"](),f=o[l],g=u[l]/2,m="category"===h.type?h.getBandWidth():Math.abs(h.dataToCoord(f-g)-h.dataToCoord(f+g));return"Angle"===a&&(m=m*Math.PI/180),m},this)}function hM(u,o,a,l){return u&&(u.legacy||!1!==u.legacy&&!a&&!l&&"tspan"!==o&&("text"===o||(0,b.hasOwn)(u,"text")))}function fM(u,o,a){var c,h,f,l=u;if("text"===o)f=l;else{f={},(0,b.hasOwn)(l,"text")&&(f.text=l.text),(0,b.hasOwn)(l,"rich")&&(f.rich=l.rich),(0,b.hasOwn)(l,"textFill")&&(f.fill=l.textFill),(0,b.hasOwn)(l,"textStroke")&&(f.stroke=l.textStroke),(0,b.hasOwn)(l,"fontFamily")&&(f.fontFamily=l.fontFamily),(0,b.hasOwn)(l,"fontSize")&&(f.fontSize=l.fontSize),(0,b.hasOwn)(l,"fontStyle")&&(f.fontStyle=l.fontStyle),(0,b.hasOwn)(l,"fontWeight")&&(f.fontWeight=l.fontWeight),h={type:"text",style:f,silent:!0},c={};var g=(0,b.hasOwn)(l,"textPosition");a?c.position=g?l.textPosition:"inside":g&&(c.position=l.textPosition),(0,b.hasOwn)(l,"textPosition")&&(c.position=l.textPosition),(0,b.hasOwn)(l,"textOffset")&&(c.offset=l.textOffset),(0,b.hasOwn)(l,"textRotation")&&(c.rotation=l.textRotation),(0,b.hasOwn)(l,"textDistance")&&(c.distance=l.textDistance)}return ox(f,u),(0,b.each)(f.rich,function(m){ox(m,m)}),{textConfig:c,textContent:h}}function ox(u,o){!o||(o.font=o.textFont||o.font,(0,b.hasOwn)(o,"textStrokeWidth")&&(u.lineWidth=o.textStrokeWidth),(0,b.hasOwn)(o,"textAlign")&&(u.align=o.textAlign),(0,b.hasOwn)(o,"textVerticalAlign")&&(u.verticalAlign=o.textVerticalAlign),(0,b.hasOwn)(o,"textLineHeight")&&(u.lineHeight=o.textLineHeight),(0,b.hasOwn)(o,"textWidth")&&(u.width=o.textWidth),(0,b.hasOwn)(o,"textHeight")&&(u.height=o.textHeight),(0,b.hasOwn)(o,"textBackgroundColor")&&(u.backgroundColor=o.textBackgroundColor),(0,b.hasOwn)(o,"textPadding")&&(u.padding=o.textPadding),(0,b.hasOwn)(o,"textBorderColor")&&(u.borderColor=o.textBorderColor),(0,b.hasOwn)(o,"textBorderWidth")&&(u.borderWidth=o.textBorderWidth),(0,b.hasOwn)(o,"textBorderRadius")&&(u.borderRadius=o.textBorderRadius),(0,b.hasOwn)(o,"textBoxShadowColor")&&(u.shadowColor=o.textBoxShadowColor),(0,b.hasOwn)(o,"textBoxShadowBlur")&&(u.shadowBlur=o.textBoxShadowBlur),(0,b.hasOwn)(o,"textBoxShadowOffsetX")&&(u.shadowOffsetX=o.textBoxShadowOffsetX),(0,b.hasOwn)(o,"textBoxShadowOffsetY")&&(u.shadowOffsetY=o.textBoxShadowOffsetY))}function pM(u,o,a){var l=u;l.textPosition=l.textPosition||a.position||"inside",null!=a.offset&&(l.textOffset=a.offset),null!=a.rotation&&(l.textRotation=a.rotation),null!=a.distance&&(l.textDistance=a.distance);var c=l.textPosition.indexOf("inside")>=0,h=u.fill||"#000";ja(l,o);var f=null==l.textFill;return c?f&&(l.textFill=a.insideFill||"#fff",!l.textStroke&&a.insideStroke&&(l.textStroke=a.insideStroke),!l.textStroke&&(l.textStroke=h),null==l.textStrokeWidth&&(l.textStrokeWidth=2)):(f&&(l.textFill=u.fill||a.outsideFill||"#000"),!l.textStroke&&a.outsideStroke&&(l.textStroke=a.outsideStroke)),l.text=o.text,l.rich=o.rich,(0,b.each)(o.rich,function(g){ja(g,g)}),l}function ja(u,o){!o||((0,b.hasOwn)(o,"fill")&&(u.textFill=o.fill),(0,b.hasOwn)(o,"stroke")&&(u.textStroke=o.fill),(0,b.hasOwn)(o,"lineWidth")&&(u.textStrokeWidth=o.lineWidth),(0,b.hasOwn)(o,"font")&&(u.font=o.font),(0,b.hasOwn)(o,"fontStyle")&&(u.fontStyle=o.fontStyle),(0,b.hasOwn)(o,"fontWeight")&&(u.fontWeight=o.fontWeight),(0,b.hasOwn)(o,"fontSize")&&(u.fontSize=o.fontSize),(0,b.hasOwn)(o,"fontFamily")&&(u.fontFamily=o.fontFamily),(0,b.hasOwn)(o,"align")&&(u.textAlign=o.align),(0,b.hasOwn)(o,"verticalAlign")&&(u.textVerticalAlign=o.verticalAlign),(0,b.hasOwn)(o,"lineHeight")&&(u.textLineHeight=o.lineHeight),(0,b.hasOwn)(o,"width")&&(u.textWidth=o.width),(0,b.hasOwn)(o,"height")&&(u.textHeight=o.height),(0,b.hasOwn)(o,"backgroundColor")&&(u.textBackgroundColor=o.backgroundColor),(0,b.hasOwn)(o,"padding")&&(u.textPadding=o.padding),(0,b.hasOwn)(o,"borderColor")&&(u.textBorderColor=o.borderColor),(0,b.hasOwn)(o,"borderWidth")&&(u.textBorderWidth=o.borderWidth),(0,b.hasOwn)(o,"borderRadius")&&(u.textBorderRadius=o.borderRadius),(0,b.hasOwn)(o,"shadowColor")&&(u.textBoxShadowColor=o.shadowColor),(0,b.hasOwn)(o,"shadowBlur")&&(u.textBoxShadowBlur=o.shadowBlur),(0,b.hasOwn)(o,"shadowOffsetX")&&(u.textBoxShadowOffsetX=o.shadowOffsetX),(0,b.hasOwn)(o,"shadowOffsetY")&&(u.textBoxShadowOffsetY=o.shadowOffsetY),(0,b.hasOwn)(o,"textShadowColor")&&(u.textShadowColor=o.textShadowColor),(0,b.hasOwn)(o,"textShadowBlur")&&(u.textShadowBlur=o.textShadowBlur),(0,b.hasOwn)(o,"textShadowOffsetX")&&(u.textShadowOffsetX=o.textShadowOffsetX),(0,b.hasOwn)(o,"textShadowOffsetY")&&(u.textShadowOffsetY=o.textShadowOffsetY))}var vL=z(6062),vM={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},sx=(0,b.keys)(vM),Wp=((0,b.reduce)(xe.dN,function(u,o){return u[o]=1,u},{}),xe.dN.join(", "),["","style","shape","extra"]),Pl=(0,xn.Yf)();function lx(u,o,a,l,c){var h=u+"Animation",f=(0,wn.ke)(u,l,c)||{},g=Pl(o).userDuring;return f.duration>0&&(f.during=g?(0,b.bind)(pu,{el:o,userDuring:g}):null,f.setToFinal=!0,f.scope=u),(0,b.extend)(f,a[h]),f}function Hm(u,o,a,l){var c=(l=l||{}).dataIndex,h=l.isInit,f=l.clearStyle,g=a.isAnimationEnabled(),m=Pl(u),y=o.style;m.userDuring=o.during;var x={},w={};if(function mM(u,o,a){for(var l=0;l<sx.length;l++){var c=sx[l],h=vM[c],f=o[c];f&&(a[h[0]]=f[0],a[h[1]]=f[1])}for(l=0;l<xe.dN.length;l++){var g=xe.dN[l];null!=o[g]&&(a[g]=o[g])}}(0,o,w),ll("shape",o,w),ll("extra",o,w),!h&&g&&(function gM(u,o,a){for(var l=o.transition,c=Oc(l)?xe.dN:(0,xn.kF)(l||[]),h=0;h<c.length;h++){var f=c[h];"style"!==f&&"shape"!==f&&"extra"!==f&&(a[f]=u[f])}}(u,o,x),sl("shape",u,o,x),sl("extra",u,o,x),function _L(u,o,a,l){if(a){var h,c=u.style;if(c){var f=a.transition,g=o.transition;if(f&&!Oc(f)){var m=(0,xn.kF)(f);!h&&(h=l.style={});for(var y=0;y<m.length;y++)h[x=m[y]]=c[x]}else if(u.getAnimationStyleProps&&(Oc(g)||Oc(f)||(0,b.indexOf)(g,"style")>=0)){var D=u.getAnimationStyleProps(),I=D?D.style:null;if(I){!h&&(h=l.style={});var L=(0,b.keys)(a);for(y=0;y<L.length;y++){var x;I[x=L[y]]&&(h[x]=c[x])}}}}}}(u,o,y,x)),w.style=y,function B5(u,o,a){var l=o.style;if(!u.isGroup&&l){if(a){u.useStyle({});for(var c=u.animators,h=0;h<c.length;h++){var f=c[h];"style"===f.targetName&&f.changeTarget(u.style)}}u.setStyle(l)}o&&(o.style=null,o&&u.attr(o),o.style=l)}(u,w,f),function bi(u,o){(0,b.hasOwn)(o,"silent")&&(u.silent=o.silent),(0,b.hasOwn)(o,"ignore")&&(u.ignore=o.ignore),u instanceof xc.ZP&&(0,b.hasOwn)(o,"invisible")&&(u.invisible=o.invisible),u instanceof ve.ZP&&(0,b.hasOwn)(o,"autoBatch")&&(u.autoBatch=o.autoBatch)}(u,o),g)if(h){var D={};(0,b.each)(Wp,function(L){var N=L?o[L]:o;N&&N.enterFrom&&(L&&(D[L]=D[L]||{}),(0,b.extend)(L?D[L]:D,N.enterFrom))});var I=lx("enter",u,o,a,c);I.duration>0&&u.animateFrom(D,I)}else!function no(u,o,a,l,c){if(c){var h=lx("update",u,o,l,a);h.duration>0&&u.animateFrom(c,h)}}(u,o,c||0,a,x);ux(u,o),y?u.dirty():u.markRedraw()}function ux(u,o){for(var a=Pl(u).leaveToProps,l=0;l<Wp.length;l++){var c=Wp[l],h=c?o[c]:o;h&&h.leaveTo&&(a||(a=Pl(u).leaveToProps={}),c&&(a[c]=a[c]||{}),(0,b.extend)(c?a[c]:a,h.leaveTo))}}function Um(u,o,a,l){if(u){var c=u.parent,h=Pl(u).leaveToProps;if(h){var f=lx("update",u,o,a,0);f.done=function(){c.remove(u),l&&l()},u.animateTo(h,f)}else c.remove(u),l&&l()}}function Oc(u){return"all"===u}var ro={},mL={setTransform:function(u,o){return ro.el[u]=o,this},getTransform:function(u){return ro.el[u]},setShape:function(u,o){var a=ro.el;return(a.shape||(a.shape={}))[u]=o,a.dirtyShape&&a.dirtyShape(),this},getShape:function(u){var o=ro.el.shape;if(o)return o[u]},setStyle:function(u,o){var a=ro.el,l=a.style;return l&&(l[u]=o,a.dirtyStyle&&a.dirtyStyle()),this},getStyle:function(u){var o=ro.el.style;if(o)return o[u]},setExtra:function(u,o){return(ro.el.extra||(ro.el.extra={}))[u]=o,this},getExtra:function(u){var o=ro.el.extra;if(o)return o[u]}};function pu(){var u=this,o=u.el;if(o){var a=Pl(o).userDuring,l=u.userDuring;if(a!==l)return void(u.el=u.userDuring=null);ro.el=o,l(mL)}}function sl(u,o,a,l){var c=a[u];if(c){var f,h=o[u];if(h){var g=a.transition,m=c.transition;if(m)if(!f&&(f=l[u]={}),Oc(m))(0,b.extend)(f,h);else for(var y=(0,xn.kF)(m),x=0;x<y.length;x++)f[w=y[x]]=D=h[w];else if(Oc(g)||(0,b.indexOf)(g,u)>=0){!f&&(f=l[u]={});var I=(0,b.keys)(h);for(x=0;x<I.length;x++){var w,D;yL(c[w=I[x]],D=h[w])&&(f[w]=D)}}}}}function ll(u,o,a){var l=o[u];if(l)for(var c=a[u]={},h=(0,b.keys)(l),f=0;f<h.length;f++){var g=h[f];c[g]=(0,vL.V)(l[g])}}function yL(u,o){return(0,b.isArrayLike)(u)?u!==o:null!=u&&isFinite(u)}var _M=(0,xn.Yf)(),cx=["percent","easing","shape","style","extra"];function Hh(u){u.stopAnimation("keyframe"),u.attr(_M(u))}function Gm(u,o,a){if(a.isAnimationEnabled()&&o){if((0,b.isArray)(o))return void(0,b.each)(o,function(g){Gm(u,g,a)});var l=o.keyframes,c=o.duration;if(a&&null==c){var h=(0,wn.ke)("enter",a,0);c=h&&h.duration}if(l&&c){var f=_M(u);(0,b.each)(Wp,function(g){var m;g&&!u[g]||(l.sort(function(x,w){return x.percent-w.percent}),(0,b.each)(l,function(x){var w=u.animators,D=g?x[g]:x;if(D){var I=(0,b.keys)(D);if(g||(I=(0,b.filter)(I,function(Z){return(0,b.indexOf)(cx,Z)<0})),I.length){m||((m=u.animate(g,o.loop,!0)).scope="keyframe");for(var L=0;L<w.length;L++)w[L]!==m&&w[L].targetName===m.targetName&&w[L].stopTracks(I);g&&(f[g]=f[g]||{});var N=g?f[g]:f;(0,b.each)(I,function(Z){N[Z]=((g?u[g]:u)||{})[Z]}),m.whenWithKeys(c*x.percent,D,I,x.easing)}}}),m&&m.delay(o.delay||0).duration(c).start(o.easing))})}}}var vu="emphasis",kc="normal",Wm="blur",jm="select",Rl=[kc,vu,Wm,jm],dx={normal:["itemStyle"],emphasis:[vu,"itemStyle"],blur:[Wm,"itemStyle"],select:[jm,"itemStyle"]},Zm={normal:["label"],emphasis:[vu,"label"],blur:[Wm,"label"],select:[jm,"label"]},Qt=["x","y"],Za={normal:{},emphasis:{},blur:{},select:{}},Ym={cartesian2d:function iM(u){var o=u.master.getRect();return{coordSys:{type:"cartesian2d",x:o.x,y:o.y,width:o.width,height:o.height},api:{coord:function(a){return u.dataToPoint(a)},size:b.bind(ax,u)}}},geo:function oM(u){var o=u.getBoundingRect();return{coordSys:{type:"geo",x:o.x,y:o.y,width:o.width,height:o.height,zoom:u.getZoom()},api:{coord:function(a){return u.dataToPoint(a)},size:b.bind(aM,u)}}},single:function lM(u){var o=u.getRect();return{coordSys:{type:"singleAxis",x:o.x,y:o.y,width:o.width,height:o.height},api:{coord:function(a){return u.dataToPoint(a)},size:(0,b.bind)(sM,u)}}},polar:function cM(u){var o=u.getRadiusAxis(),a=u.getAngleAxis(),l=o.getExtent();return l[0]>l[1]&&l.reverse(),{coordSys:{type:"polar",cx:u.cx,cy:u.cy,r:l[1],r0:l[0]},api:{coord:function(c){var h=o.dataToRadius(c[0]),f=a.dataToAngle(c[1]),g=u.coordToPoint([h,f]);return g.push(h,f*Math.PI/180),g},size:b.bind(uM,u)}}},calendar:function dM(u){var o=u.getRect(),a=u.getRangeInfo();return{coordSys:{type:"calendar",x:o.x,y:o.y,width:o.width,height:o.height,cellWidth:u.getCellWidth(),cellHeight:u.getCellHeight(),rangeInfo:{start:a.start,end:a.end,weeks:a.weeks,dayCount:a.allDay}},api:{coord:function(l,c){return u.dataToPoint(l,c)}}}}};function Xm(u){return u instanceof ve.ZP}function $m(u){return u instanceof xc.ZP}const xM=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c,h){this._progressiveEls=null;var f=this._data,g=a.getData(),m=this.group,y=CM(a,g,l,c);f||m.removeAll(),g.diff(f).add(function(w){fx(c,null,w,y(w,h),a,m,g)}).remove(function(w){var D=f.getItemGraphicEl(w);D&&Um(D,Ui(D).option,a)}).update(function(w,D){var I=f.getItemGraphicEl(D);fx(c,I,w,y(w,h),a,m,g)}).execute();var x=a.get("clip",!0)?ch(a.coordinateSystem,!1,a):null;x?m.setClipPath(x):m.removeClipPath(),this._data=g},o.prototype.incrementalPrepareRender=function(a,l,c){this.group.removeAll(),this._data=null},o.prototype.incrementalRender=function(a,l,c,h,f){var g=l.getData(),m=CM(l,g,c,h),y=this._progressiveEls=[];function x(I){I.isGroup||(I.incremental=!0,I.ensureState("emphasis").hoverLayer=!0)}for(var w=a.start;w<a.end;w++){var D=fx(null,null,w,m(w,f),l,this.group,g);D&&(D.traverse(x),y.push(D))}},o.prototype.eachRendered=function(a){_n.traverseElements(this._progressiveEls||this.group,a)},o.prototype.filterForExposedEvent=function(a,l,c,h){var f=l.element;if(null==f||c.name===f)return!0;for(;(c=c.__hostTarget||c.parent)&&c!==this.group;)if(c.name===f)return!0;return!1},o.type="custom",o}(ia.Z);function Km(u){var a,o=u.type;if("path"===o){var l=u.shape,c=null!=l.width&&null!=l.height?{x:l.x||0,y:l.y||0,width:l.width,height:l.height}:null,h=gx(l);a=_n.makePath(h,null,c,l.layout||"center"),Ui(a).customPathData=h}else if("image"===o)a=new be.ZP({}),Ui(a).customImagePath=u.style.image;else if("text"===o)a=new _t.ZP({});else if("group"===o)a=new Pn.Z;else{if("compoundPath"===o)throw new Error('"compoundPath" is not supported yet.');var f=_n.getShapeClass(o);f||(0,_a._y)(""),a=new f}return Ui(a).customGraphicType=o,a.name=u.name,a.z2EmphasisLift=1,a.z2SelectLift=1,a}function Qm(u,o,a,l,c,h,f){Hh(o);var g=c&&c.normal.cfg;g&&o.setTextConfig(g),l&&null==l.transition&&(l.transition=Qt);var m=l&&l.style;if(m){if("text"===o.type){var y=m;(0,b.hasOwn)(y,"textFill")&&(y.fill=y.textFill),(0,b.hasOwn)(y,"textStroke")&&(y.stroke=y.textStroke)}var x=void 0,w=Xm(o)?m.decal:null;u&&w&&(w.dirty=!0,x=(0,M0.I)(w,u)),m.__decalPattern=x}$m(o)&&m&&(x=m.__decalPattern)&&(m.decal=x),Hm(o,l,h,{dataIndex:a,isInit:f,clearStyle:!0}),Gm(o,l.keyframeAnimation,h)}function hx(u,o,a,l,c){var h=o.isGroup?null:o,f=c&&c[u].cfg;if(h){var g=h.ensureState(u);if(!1===l){var m=h.getState(u);m&&(m.style=null)}else g.style=l||null;f&&(g.textConfig=f),(0,Ut.MA)(h)}}function xL(u,o,a){var l=a===kc,c=l?o:qm(o,a),h=c?c.z2:null;null!=h&&((l?u:u.ensureState(a)).z2=h||0)}function CM(u,o,a,l){var c=u.get("renderItem"),h=u.coordinateSystem,f={};h&&(f=h.prepareCustoms?h.prepareCustoms(h):Ym[h.type](h));for(var y,x,g=(0,b.defaults)({getWidth:l.getWidth,getHeight:l.getHeight,getZr:l.getZr,getDevicePixelRatio:l.getDevicePixelRatio,value:function De(yt,wt){return null==wt&&(wt=y),o.getStore().get(o.getDimensionIndex(yt||0),wt)},style:function Ie(yt,wt){null==wt&&(wt=y);var kt=o.getItemVisual(wt,"style"),en=kt&&kt.fill,jt=kt&&kt.opacity,dn=_e(wt,kc).getItemStyle();null!=en&&(dn.fill=en),null!=jt&&(dn.opacity=jt);var Fn={inheritColor:(0,b.isString)(en)?en:"#000"},Hn=me(wt,kc),lr=qt.Lr(Hn,null,Fn,!1,!0);lr.text=Hn.getShallow("show")?(0,b.retrieve2)(u.getFormattedLabel(wt,kc),Dl(o,wt)):null;var br=qt.nC(Hn,Fn,!1);return Ye(yt,dn),dn=pM(dn,lr,br),yt&&Ue(dn,yt),dn.legacy=!0,dn},ordinalRawValue:function Pe(yt,wt){null==wt&&(wt=y);var kt=o.getDimensionInfo(yt=yt||0);if(!kt){var en=o.getDimensionIndex(yt);return en>=0?o.getStore().get(en,wt):void 0}var jt=o.get(kt.name,wt),dn=kt&&kt.ordinalMeta;return dn?dn.categories[jt]:jt},styleEmphasis:function ke(yt,wt){null==wt&&(wt=y);var kt=_e(wt,vu).getItemStyle(),en=me(wt,vu),jt=qt.Lr(en,null,null,!0,!0);jt.text=en.getShallow("show")?(0,b.retrieve3)(u.getFormattedLabel(wt,vu),u.getFormattedLabel(wt,kc),Dl(o,wt)):null;var dn=qt.nC(en,null,!0);return Ye(yt,kt),kt=pM(kt,jt,dn),yt&&Ue(kt,yt),kt.legacy=!0,kt},visual:function Ke(yt,wt){if(null==wt&&(wt=y),(0,b.hasOwn)(zn,yt)){var kt=o.getItemVisual(wt,"style");return kt?kt[zn[yt]]:null}if((0,b.hasOwn)(fL,yt))return o.getItemVisual(wt,yt)},barLayout:function qe(yt){if("cartesian2d"===h.type){var wt=h.getBaseAxis();return(0,Ho.Gk)((0,b.defaults)({axis:wt},yt))}},currentSeriesIndices:function ut(){return a.getCurrentSeriesIndices()},font:function pt(yt){return qt.qT(yt,a)}},f.api||{}),m={context:{},seriesId:u.id,seriesName:u.name,seriesIndex:u.seriesIndex,coordSys:f.coordSys,dataInsideLength:o.count(),encode:CL(u.getData())},w={},D={},I={},L={},N=0;N<Rl.length;N++){var Z=Rl[N];I[Z]=u.getModel(dx[Z]),L[Z]=u.getModel(Zm[Z])}function se(yt){return yt===y?x||(x=o.getItemModel(yt)):o.getItemModel(yt)}function _e(yt,wt){return o.hasItemOption?yt===y?w[wt]||(w[wt]=se(yt).getModel(dx[wt])):se(yt).getModel(dx[wt]):I[wt]}function me(yt,wt){return o.hasItemOption?yt===y?D[wt]||(D[wt]=se(yt).getModel(Zm[wt])):se(yt).getModel(Zm[wt]):L[wt]}return function(yt,wt){return y=yt,x=null,w={},D={},c&&c((0,b.defaults)({dataIndexInside:yt,dataIndex:o.getRawIndex(yt),actionType:wt?wt.type:null},m),g)};function Ue(yt,wt){for(var kt in wt)(0,b.hasOwn)(wt,kt)&&(yt[kt]=wt[kt])}function Ye(yt,wt){yt&&(yt.textFill&&(wt.textFill=yt.textFill),yt.textPosition&&(wt.textPosition=yt.textPosition))}}function CL(u){var o={};return(0,b.each)(u.dimensions,function(a){var l=u.getDimensionInfo(a);if(!l.isExtraCoord){var c=l.coordDim;(o[c]=o[c]||[])[l.coordDimIndex]=u.getDimensionIndex(a)}}),o}function fx(u,o,a,l,c,h,f){if(l){var g=px(u,o,a,l,c,h);return g&&f.setItemGraphicEl(a,g),g&&(0,Ut.k5)(g,l.focus,l.blurScope,l.emphasisDisabled),g}h.remove(o)}function px(u,o,a,l,c,h){var f=-1,g=o;o&&wM(o,l,c)&&(f=(0,b.indexOf)(h.childrenRef(),o),o=null);var m=!o,y=o;y?y.clearStates():(y=Km(l),g&&function yM(u,o){o.copyTransform(u),$m(o)&&$m(u)&&(o.setStyle(u.style),o.z=u.z,o.z2=u.z2,o.zlevel=u.zlevel,o.invisible=u.invisible,o.ignore=u.ignore,Xm(o)&&Xm(u)&&o.setShape(u.shape))}(g,y)),!1===l.morph?y.disableMorphing=!0:y.disableMorphing&&(y.disableMorphing=!1),Za.normal.cfg=Za.normal.conOpt=Za.emphasis.cfg=Za.emphasis.conOpt=Za.blur.cfg=Za.blur.conOpt=Za.select.cfg=Za.select.conOpt=null,Za.isLegacy=!1,function SL(u,o,a,l,c,h){if(!u.isGroup){SM(a,null,h),SM(a,vu,h);var f=h.normal.conOpt;if(null!=f||null!=h.emphasis.conOpt||null!=h.select.conOpt||null!=h.blur.conOpt){var x=u.getTextContent();if(!1===f)x&&u.removeTextContent();else{f=h.normal.conOpt=f||{type:"text"},x?x.clearStates():(x=Km(f),u.setTextContent(x)),Qm(null,x,o,f,null,l,c);for(var w=f&&f.style,D=0;D<Rl.length;D++){var I=Rl[D];if(I!==kc)hx(I,x,0,vx(f,h[I].conOpt,I),null)}w?x.dirty():x.markRedraw()}}}}(y,a,l,c,m,Za),function wL(u,o,a,l,c){var h=a.clipPath;if(!1===h)u&&u.getClipPath()&&u.removeClipPath();else if(h){var f=u.getClipPath();f&&wM(f,h,l)&&(f=null),f||(f=Km(h),u.setClipPath(f)),Qm(null,f,o,h,null,l,c)}}(y,a,l,c,m),Qm(u,y,a,l,Za,c,m),(0,b.hasOwn)(l,"info")&&(Ui(y).info=l.info);for(var x=0;x<Rl.length;x++){var w=Rl[x];if(w!==kc)hx(w,y,0,vx(l,qm(l,w),w),Za)}return function bL(u,o,a){if(!u.isGroup){var l=u,h=a.currentZLevel;l.z=a.currentZ,l.zlevel=h;var f=o.z2;null!=f&&(l.z2=f||0);for(var g=0;g<Rl.length;g++)xL(l,o,Rl[g])}}(y,l,c),"group"===l.type&&function DL(u,o,a,l,c){var h=l.children,f=h?h.length:0,g=l.$mergeChildren,m="byName"===g||l.diffChildrenByName,y=!1===g;if(f||m||y){if(m)return void function TL(u){new su.Z(u.oldChildren,u.newChildren,DM,DM,u).add(MM).update(MM).remove(TM).execute()}({api:u,oldChildren:o.children()||[],newChildren:h||[],dataIndex:a,seriesModel:c,group:o});y&&o.removeAll();for(var x=0;x<f;x++){var w=h[x],D=o.childAt(x);w?(null==w.ignore&&(w.ignore=!1),px(u,D,a,w,c,o)):D.ignore=!0}for(var I=o.childCount()-1;I>=x;I--){var L=o.childAt(I);ML(o,L,c)}}}(u,y,a,l,c),f>=0?h.replaceAt(y,f):h.add(y),y}function wM(u,o,a){var l=Ui(u),c=o.type,h=o.shape,f=o.style;return a.isUniversalTransitionEnabled()||null!=c&&c!==l.customGraphicType||"path"===c&&function EM(u){return u&&((0,b.hasOwn)(u,"pathData")||(0,b.hasOwn)(u,"d"))}(h)&&gx(h)!==l.customPathData||"image"===c&&(0,b.hasOwn)(f,"image")&&f.image!==l.customImagePath}function SM(u,o,a){var l=o?qm(u,o):u,c=o?vx(u,l,vu):u.style,h=u.type,f=l?l.textConfig:null,g=u.textContent,m=g?o?qm(g,o):g:null;if(c&&(a.isLegacy||hM(c,h,!!f,!!m))){a.isLegacy=!0;var y=fM(c,h,!o);!f&&y.textConfig&&(f=y.textConfig),!m&&y.textContent&&(m=y.textContent)}!o&&m&&!m.type&&(m.type="text");var w=o?a[o]:a.normal;w.cfg=f,w.conOpt=m}function qm(u,o){return o?u?u[o]:null:u}function vx(u,o,a){var l=o&&o.style;return null==l&&a===vu&&u&&(l=u.styleEmphasis),l}function ML(u,o,a){o&&Um(o,Ui(u).option,a)}function DM(u,o){return(u&&u.name)??"e\0\0"+o}function MM(u,o){var a=this.context;px(a.api,null!=o?a.oldChildren[o]:null,a.dataIndex,null!=u?a.newChildren[u]:null,a.seriesModel,a.group)}function TM(u){var o=this.context,a=o.oldChildren[u];a&&Um(a,Ui(a).option,o.seriesModel)}function gx(u){return u&&(u.pathData||u.d)}var Nc=(0,xn.Yf)(),mx=b.clone,Jm=b.bind;function _x(u,o,a,l){mu(Nc(a).lastProp,l)||(Nc(a).lastProp=l,o?wn.D(a,l,u):(a.stopAnimation(),a.attr(l)))}function mu(u,o){if(b.isObject(u)&&b.isObject(o)){var a=!0;return b.each(o,function(l,c){a=a&&mu(u[c],l)}),!!a}return u===o}function Uh(u,o){u[o.get(["label","show"])?"show":"hide"]()}function Qu(u){return{x:u.x||0,y:u.y||0,rotation:u.rotation||0}}function PM(u,o,a){var l=o.get("z"),c=o.get("zlevel");u&&u.traverse(function(h){"group"!==h.type&&(null!=l&&(h.z=l),null!=c&&(h.zlevel=c),h.silent=a)})}const yx=function(){function u(){this._dragging=!1,this.animationThreshold=15}return u.prototype.render=function(o,a,l,c){var h=a.get("value"),f=a.get("status");if(this._axisModel=o,this._axisPointerModel=a,this._api=l,c||this._lastValue!==h||this._lastStatus!==f){this._lastValue=h,this._lastStatus=f;var g=this._group,m=this._handle;if(!f||"hide"===f)return g&&g.hide(),void(m&&m.hide());g&&g.show(),m&&m.show();var y={};this.makeElOption(y,h,o,a,l);var x=y.graphicKey;x!==this._lastGraphicKey&&this.clear(l),this._lastGraphicKey=x;var w=this._moveAnimation=this.determineAnimation(o,a);if(g){var D=b.curry(_x,a,w);this.updatePointerEl(g,y,D),this.updateLabelEl(g,y,D,a)}else g=this._group=new Pn.Z,this.createPointerEl(g,y,o,a),this.createLabelEl(g,y,o,a),l.getZr().add(g);PM(g,a,!0),this._renderHandle(h)}},u.prototype.remove=function(o){this.clear(o)},u.prototype.dispose=function(o){this.clear(o)},u.prototype.determineAnimation=function(o,a){var l=a.get("animation"),c=o.axis,h="category"===c.type,f=a.get("snap");if(!f&&!h)return!1;if("auto"===l||null==l){var g=this.animationThreshold;if(h&&c.getBandWidth()>g)return!0;if(f){var m=Qf(o).seriesDataCount,y=c.getExtent();return Math.abs(y[0]-y[1])/m>g}return!1}return!0===l},u.prototype.makeElOption=function(o,a,l,c,h){},u.prototype.createPointerEl=function(o,a,l,c){var h=a.pointer;if(h){var f=Nc(o).pointerEl=new _n[h.type](mx(a.pointer));o.add(f)}},u.prototype.createLabelEl=function(o,a,l,c){if(a.label){var h=Nc(o).labelEl=new _t.ZP(mx(a.label));o.add(h),Uh(h,c)}},u.prototype.updatePointerEl=function(o,a,l){var c=Nc(o).pointerEl;c&&a.pointer&&(c.setStyle(a.pointer.style),l(c,{shape:a.pointer.shape}))},u.prototype.updateLabelEl=function(o,a,l,c){var h=Nc(o).labelEl;h&&(h.setStyle(a.label.style),l(h,{x:a.label.x,y:a.label.y}),Uh(h,c))},u.prototype._renderHandle=function(o){if(!this._dragging&&this.updateHandleTransform){var g,a=this._axisPointerModel,l=this._api.getZr(),c=this._handle,h=a.getModel("handle"),f=a.get("status");if(!h.get("show")||!f||"hide"===f)return c&&l.remove(c),void(this._handle=null);this._handle||(g=!0,c=this._handle=_n.createIcon(h.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(y){nl.sT(y.event)},onmousedown:Jm(this._onHandleDragMove,this,0,0),drift:Jm(this._onHandleDragMove,this),ondragend:Jm(this._onHandleDragEnd,this)}),l.add(c)),PM(c,a,!1),c.setStyle(h.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var m=h.get("size");b.isArray(m)||(m=[m,m]),c.scaleX=m[0]/2,c.scaleY=m[1]/2,Uo.T9(this,"_doDispatchAxisPointer",h.get("throttle")||0,"fixRate"),this._moveHandleToValue(o,g)}},u.prototype._moveHandleToValue=function(o,a){_x(this._axisPointerModel,!a&&this._moveAnimation,this._handle,Qu(this.getHandleTransform(o,this._axisModel,this._axisPointerModel)))},u.prototype._onHandleDragMove=function(o,a){var l=this._handle;if(l){this._dragging=!0;var c=this.updateHandleTransform(Qu(l),[o,a],this._axisModel,this._axisPointerModel);this._payloadInfo=c,l.stopAnimation(),l.attr(Qu(c)),Nc(l).lastProp=null,this._doDispatchAxisPointer()}},u.prototype._doDispatchAxisPointer=function(){if(this._handle){var a=this._payloadInfo,l=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:a.cursorPoint[0],y:a.cursorPoint[1],tooltipOption:a.tooltipOption,axesInfo:[{axisDim:l.axis.dim,axisIndex:l.componentIndex}]})}},u.prototype._onHandleDragEnd=function(){if(this._dragging=!1,this._handle){var a=this._axisPointerModel.get("value");this._moveHandleToValue(a),this._api.dispatchAction({type:"hideTip"})}},u.prototype.clear=function(o){this._lastValue=null,this._lastStatus=null;var a=o.getZr(),l=this._group,c=this._handle;a&&l&&(this._lastGraphicKey=null,l&&a.remove(l),c&&a.remove(c),this._group=null,this._handle=null,this._payloadInfo=null),Uo.ZH(this,"_doDispatchAxisPointer")},u.prototype.doClear=function(){},u.prototype.buildLabel=function(o,a,l){return{x:o[l=l||0],y:o[1-l],width:a[l],height:a[1-l]}},u}();function Fc(u){var l,o=u.get("type"),a=u.getModel(o+"Style");return"line"===o?(l=a.getLineStyle()).fill=null:"shadow"===o&&((l=a.getAreaStyle()).stroke=null),l}function EL(u,o,a,l,c){var f=AL(a.get("value"),o.axis,o.ecModel,a.get("seriesDataIndices"),{precision:a.get(["label","precision"]),formatter:a.get(["label","formatter"])}),g=a.getModel("label"),m=Va.MY(g.get("padding")||0),y=g.getFont(),x=Ce.lP(f,y),w=c.position,D=x.width+m[1]+m[3],I=x.height+m[0]+m[2],L=c.align;"right"===L&&(w[0]-=D),"center"===L&&(w[0]-=D/2);var N=c.verticalAlign;"bottom"===N&&(w[1]-=I),"middle"===N&&(w[1]-=I/2),function ds(u,o,a,l){var c=l.getWidth(),h=l.getHeight();u[0]=Math.min(u[0]+o,c)-o,u[1]=Math.min(u[1]+a,h)-a,u[0]=Math.max(u[0],0),u[1]=Math.max(u[1],0)}(w,D,I,l);var Z=g.get("backgroundColor");(!Z||"auto"===Z)&&(Z=o.get(["axisLine","lineStyle","color"])),u.label={x:w[0],y:w[1],style:(0,qt.Lr)(g,{text:f,font:y,fill:g.getTextColor(),padding:m,backgroundColor:Z}),z2:10}}function AL(u,o,a,l,c){u=o.scale.parse(u);var h=o.scale.getLabel({value:u},{precision:c.precision}),f=c.formatter;if(f){var g={value:ki.DX(o,{value:u}),axisDimension:o.dim,axisIndex:o.index,seriesData:[]};b.each(l,function(m){var y=a.getSeriesByIndex(m.seriesIndex),w=y&&y.getDataParams(m.dataIndexInside);w&&g.seriesData.push(w)}),b.isString(f)?h=f.replace("{value}",h):b.isFunction(f)&&(h=f(g))}return h}function e_(u,o,a){var l=yi.create();return yi.rotate(l,l,a.rotation),yi.translate(l,l,a.position),_n.applyTransform([u.dataToCoord(o),(a.labelOffset||0)+(a.labelDirection||1)*(a.labelMargin||0)],l)}function bx(u,o,a,l,c,h){var f=Eo.innerTextLayout(a.rotation,0,a.labelDirection);a.labelMargin=c.get(["label","margin"]),EL(o,l,c,h,{position:e_(l.axis,u,a),align:f.textAlign,verticalAlign:f.textVerticalAlign})}function RM(u,o,a){return{x1:u[a=a||0],y1:u[1-a],x2:o[a],y2:o[1-a]}}function Un(u,o,a){return{x:u[a=a||0],y:u[1-a],width:o[a],height:o[1-a]}}function LM(u,o,a,l,c,h){return{cx:u,cy:o,r0:a,r:l,startAngle:c,endAngle:h,clockwise:!0}}var IL=function(u){function o(){return null!==u&&u.apply(this,arguments)||this}return(0,Tt.ZT)(o,u),o.prototype.makeElOption=function(a,l,c,h,f){var g=c.axis,m=g.grid,y=h.get("type"),x=OM(m,g).getOtherAxis(g).getGlobalExtent(),w=g.toGlobalCoord(g.dataToCoord(l,!0));if(y&&"none"!==y){var D=Fc(h),I=Gh[y](g,w,x);I.style=D,a.graphicKey=I.type,a.pointer=I}bx(l,a,Or(m.model,c),c,h,f)},o.prototype.getHandleTransform=function(a,l,c){var h=Or(l.axis.grid.model,l,{labelInside:!1});h.labelMargin=c.get(["handle","margin"]);var f=e_(l.axis,a,h);return{x:f[0],y:f[1],rotation:h.rotation+(h.labelDirection<0?Math.PI:0)}},o.prototype.updateHandleTransform=function(a,l,c,h){var f=c.axis,g=f.grid,m=f.getGlobalExtent(!0),y=OM(g,f).getOtherAxis(f).getGlobalExtent(),x="x"===f.dim?0:1,w=[a.x,a.y];w[x]+=l[x],w[x]=Math.min(m[1],w[x]),w[x]=Math.max(m[0],w[x]);var D=(y[1]+y[0])/2,I=[D,D];return I[x]=w[x],{x:w[0],y:w[1],rotation:a.rotation,cursorPoint:I,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][x]}},o}(yx);function OM(u,o){var a={};return a[o.dim+"AxisIndex"]=o.index,u.getCartesian(a)}var Gh={line:function(u,o,a){return{type:"Line",subPixelOptimize:!0,shape:RM([o,a[0]],[o,a[1]],kM(u))}},shadow:function(u,o,a){var l=Math.max(1,u.getBandWidth());return{type:"Rect",shape:Un([o-l/2,a[0]],[l,a[1]-a[0]],kM(u))}}};function kM(u){return"x"===u.dim?0:1}const t_=IL,Ea=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.type="axisPointer",o.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},o}(ma.Z);var Ms=z(169),_u=(0,xn.Yf)(),NM=b.each;function FM(u,o,a){if(!Ms.Z.node){var l=o.getZr();_u(l).records||(_u(l).records={}),function BM(u,o){function a(l,c){u.on(l,function(h){var f=function PL(u){var o={showTip:[],hideTip:[]},a=function(l){var c=o[l.type];c?c.push(l):(l.dispatchAction=a,u.dispatchAction(l))};return{dispatchAction:a,pendings:o}}(o);NM(_u(u).records,function(g){g&&c(g,h,f.dispatchAction)}),function VM(u,o){var c,a=u.showTip.length,l=u.hideTip.length;a?c=u.showTip[a-1]:l&&(c=u.hideTip[l-1]),c&&(c.dispatchAction=null,o.dispatchAction(c))}(f.pendings,o)})}_u(u).initialized||(_u(u).initialized=!0,a("click",b.curry(xx,"click")),a("mousemove",b.curry(xx,"mousemove")),a("globalout",zM))}(l,o),(_u(l).records[u]||(_u(l).records[u]={})).handler=a}}function zM(u,o,a){u.handler("leave",null,a)}function xx(u,o,a,l){o.handler(u,a,l)}function Cx(u,o){if(!Ms.Z.node){var a=o.getZr();(_u(a).records||{})[u]&&(_u(a).records[u]=null)}}const jp=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c){var h=l.getComponent("tooltip"),f=a.get("triggerOn")||h&&h.get("triggerOn")||"mousemove|click";FM("axisPointer",c,function(g,m,y){"none"!==f&&("leave"===g||f.indexOf(g)>=0)&&y({type:"updateAxisPointer",currTrigger:g,x:m&&m.offsetX,y:m&&m.offsetY})})},o.prototype.remove=function(a,l){Cx("axisPointer",l)},o.prototype.dispose=function(a,l){Cx("axisPointer",l)},o.type="axisPointer",o}(ga.Z);function HM(u,o){var c,a=[],l=u.seriesIndex;if(null==l||!(c=o.getSeriesByIndex(l)))return{point:[]};var h=c.getData(),f=xn.gO(h,u);if(null==f||f<0||b.isArray(f))return{point:[]};var g=h.getItemGraphicEl(f),m=c.coordinateSystem;if(c.getTooltipPosition)a=c.getTooltipPosition(f)||[];else if(m&&m.dataToPoint)if(u.isStacked){var y=m.getBaseAxis(),w=m.getOtherAxis(y).dim,I="x"===w||"radius"===w?1:0,L=h.mapDimension(y.dim),N=[];N[I]=h.get(L,f),N[1-I]=h.get(h.getCalculationInfo("stackResultDimension"),f),a=m.dataToPoint(N)||[]}else a=m.dataToPoint(h.getValues(b.map(m.dimensions,function(se){return h.mapDimension(se)}),f))||[];else if(g){var Z=g.getBoundingRect().clone();Z.applyTransform(g.transform),a=[Z.x+Z.width/2,Z.y+Z.height/2]}return{point:a,el:g}}var UM=(0,xn.Yf)();function LL(u,o,a){var l=u.currTrigger,c=[u.x,u.y],h=u,f=u.dispatchAction||(0,b.bind)(a.dispatchAction,a),g=o.getComponent("axisPointer").coordSysAxesInfo;if(g){r_(c)&&(c=HM({seriesIndex:h.seriesIndex,dataIndex:h.dataIndex},o).point);var m=r_(c),y=h.axesInfo,x=g.axesInfo,w="leave"===l||r_(c),D={},I={},L={list:[],map:{}},N={showPointer:(0,b.curry)(WM,I),showTooltip:(0,b.curry)(jM,L)};(0,b.each)(g.coordSysMap,function(se,_e){var me=m||se.containPoint(c);(0,b.each)(g.coordSysAxesInfo[_e],function(De,Pe){var Ie=De.axis,ke=function kL(u,o){for(var a=0;a<(u||[]).length;a++){var l=u[a];if(o.axis.dim===l.axisDim&&o.axis.model.componentIndex===l.axisIndex)return l}}(y,De);if(!w&&me&&(!y||ke)){var Ue=ke&&ke.value;null==Ue&&!m&&(Ue=Ie.pointToData(c)),null!=Ue&&Zp(De,Ue,N,!1,D)}})});var Z={};return(0,b.each)(x,function(se,_e){var me=se.linkGroup;me&&!I[_e]&&(0,b.each)(me.axesInfo,function(De,Pe){var Ie=I[Pe];if(De!==se&&Ie){var ke=Ie.value;me.mapper&&(ke=se.axis.scale.parse(me.mapper(ke,ZM(De),ZM(se)))),Z[se.key]=ke}})}),(0,b.each)(Z,function(se,_e){Zp(x[_e],se,N,!0,D)}),function OL(u,o,a){var l=a.axesInfo=[];(0,b.each)(o,function(c,h){var f=c.axisPointerModel.option,g=u[h];g?(!c.useHandle&&(f.status="show"),f.value=g.value,f.seriesDataIndices=(g.payloadBatch||[]).slice()):!c.useHandle&&(f.status="hide"),"show"===f.status&&l.push({axisDim:c.axis.dim,axisIndex:c.axis.model.componentIndex,value:f.value})})}(I,x,D),function Yp(u,o,a,l){if(!r_(o)&&u.list.length){var c=((u.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};l({type:"showTip",escapeConnect:!0,x:o[0],y:o[1],tooltipOption:a.tooltipOption,position:a.position,dataIndexInside:c.dataIndexInside,dataIndex:c.dataIndex,seriesIndex:c.seriesIndex,dataByCoordSys:u.list})}else l({type:"hideTip"})}(L,c,u,f),function Xp(u,o,a){var l=a.getZr(),c="axisPointerLastHighlights",h=UM(l)[c]||{},f=UM(l)[c]={};(0,b.each)(u,function(y,x){var w=y.axisPointerModel.option;"show"===w.status&&(0,b.each)(w.seriesDataIndices,function(D){f[D.seriesIndex+" | "+D.dataIndex]=D})});var g=[],m=[];(0,b.each)(h,function(y,x){!f[x]&&m.push(y)}),(0,b.each)(f,function(y,x){!h[x]&&g.push(y)}),m.length&&a.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:m}),g.length&&a.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:g})}(x,0,a),D}}function Zp(u,o,a,l,c){var h=u.axis;if(!h.scale.isBlank()&&h.containData(o)){if(!u.involveSeries)return void a.showPointer(u,o);var f=function GM(u,o){var a=o.axis,l=a.dim,c=u,h=[],f=Number.MAX_VALUE,g=-1;return(0,b.each)(o.seriesModels,function(m,y){var w,D,x=m.getData().mapDimensionsAll(l);if(m.getAxisTooltipData){var I=m.getAxisTooltipData(x,u,a);D=I.dataIndices,w=I.nestestValue}else{if(!(D=m.getData().indicesOfNearest(x[0],u,"category"===a.type?.5:null)).length)return;w=m.getData().get(x[0],D[0])}if(null!=w&&isFinite(w)){var L=u-w,N=Math.abs(L);N<=f&&((N<f||L>=0&&g<0)&&(f=N,g=L,c=w,h.length=0),(0,b.each)(D,function(Z){h.push({seriesIndex:m.seriesIndex,dataIndexInside:Z,dataIndex:m.getData().getRawIndex(Z)})}))}}),{payloadBatch:h,snapToValue:c}}(o,u),g=f.payloadBatch,m=f.snapToValue;g[0]&&null==c.seriesIndex&&(0,b.extend)(c,g[0]),!l&&u.snap&&h.containData(m)&&null!=m&&(o=m),a.showPointer(u,o,g),a.showTooltip(u,f,m)}}function WM(u,o,a,l){u[o.key]={value:a,payloadBatch:l}}function jM(u,o,a,l){var c=a.payloadBatch,h=o.axis,f=h.model,g=o.axisPointerModel;if(o.triggerTooltip&&c.length){var m=o.coordSys.model,y=ld(m),x=u.map[y];x||(x=u.map[y]={coordSysId:m.id,coordSysIndex:m.componentIndex,coordSysType:m.type,coordSysMainType:m.mainType,dataByAxis:[]},u.list.push(x)),x.dataByAxis.push({axisDim:h.dim,axisIndex:f.componentIndex,axisType:f.type,axisId:f.id,value:l,valueLabelOpt:{precision:g.get(["label","precision"]),formatter:g.get(["label","formatter"])},seriesDataIndices:c.slice()})}}function ZM(u){var o=u.axis.model,a={},l=a.axisDim=u.axis.dim;return a.axisIndex=a[l+"AxisIndex"]=o.componentIndex,a.axisName=a[l+"AxisName"]=o.name,a.axisId=a[l+"AxisId"]=o.id,a}function r_(u){return!u||null==u[0]||isNaN(u[0])||null==u[1]||isNaN(u[1])}function Wh(u){_c.registerAxisPointerClass("CartesianAxisPointer",t_),u.registerComponentModel(Ea),u.registerComponentView(jp),u.registerPreprocessor(function(o){if(o){(!o.axisPointer||0===o.axisPointer.length)&&(o.axisPointer={});var a=o.axisPointer.link;a&&!(0,b.isArray)(a)&&(o.axisPointer.link=[a])}}),u.registerProcessor(u.PRIORITY.PROCESSOR.STATISTIC,function(o,a){o.getComponent("axisPointer").coordSysAxesInfo=function TP(u,o){var a={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function Tw(u,o,a){var l=o.getComponent("tooltip"),c=o.getComponent("axisPointer"),h=c.get("link",!0)||[],f=[];(0,b.each)(a.getCoordinateSystems(),function(g){if(g.axisPointerEnabled){var m=ld(g.model),y=u.coordSysAxesInfo[m]={};u.coordSysMap[m]=g;var w=g.model.getModel("tooltip",l);if((0,b.each)(g.getAxes(),(0,b.curry)(N,!1,null)),g.getTooltipAxes&&l&&w.get("show")){var D="axis"===w.get("trigger"),I="cross"===w.get(["axisPointer","type"]),L=g.getTooltipAxes(w.get(["axisPointer","axis"]));(D||I)&&(0,b.each)(L.baseAxes,(0,b.curry)(N,!I||"cross",D)),I&&(0,b.each)(L.otherAxes,(0,b.curry)(N,"cross",!1))}}function N(Z,se,_e){var me=_e.model.getModel("axisPointer",c),De=me.get("show");if(De&&("auto"!==De||Z||wg(me))){null==se&&(se=me.get("triggerTooltip")),me=Z?function EP(u,o,a,l,c,h){var f=o.getModel("axisPointer"),m={};(0,b.each)(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(D){m[D]=(0,b.clone)(f.get(D))}),m.snap="category"!==u.type&&!!h,"cross"===f.get("type")&&(m.type="line");var y=m.label||(m.label={});if(null==y.show&&(y.show=!1),"cross"===c){var x=f.get(["label","show"]);if(y.show=x??!0,!h){var w=m.lineStyle=f.get("crossStyle");w&&(0,b.defaults)(y,w.textStyle)}}return u.model.getModel("axisPointer",new ka.Z(m,a,l))}(_e,w,c,o,Z,se):me;var Pe=me.get("snap"),Ie=ld(_e.model),ke=se||Pe||"category"===_e.type,Ue=u.axesInfo[Ie]={key:Ie,axis:_e,coordSys:g,axisPointerModel:me,triggerTooltip:se,involveSeries:ke,snap:Pe,useHandle:wg(me),seriesModels:[],linkGroup:null};y[Ie]=Ue,u.seriesInvolved=u.seriesInvolved||ke;var Ye=function g0(u,o){for(var a=o.model,l=o.dim,c=0;c<u.length;c++){var h=u[c]||{};if(Kf(h[l+"AxisId"],a.id)||Kf(h[l+"AxisIndex"],a.componentIndex)||Kf(h[l+"AxisName"],a.name))return c}}(h,_e);if(null!=Ye){var Ke=f[Ye]||(f[Ye]={axesInfo:{}});Ke.axesInfo[Ie]=Ue,Ke.mapper=h[Ye].mapper,Ue.linkGroup=Ke}}}})}(a,u,o),a.seriesInvolved&&function AP(u,o){o.eachSeries(function(a){var l=a.coordinateSystem,c=a.get(["tooltip","trigger"],!0),h=a.get(["tooltip","show"],!0);!l||"none"===c||!1===c||"item"===c||!1===h||!1===a.get(["axisPointer","show"],!0)||(0,b.each)(u.coordSysAxesInfo[ld(l.model)],function(f){var g=f.axis;l.getAxis(g.dim)===g&&(f.seriesModels.push(a),null==f.seriesDataCount&&(f.seriesDataCount=0),f.seriesDataCount+=a.getData().count())})})}(a,u),a}(o,a)}),u.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},LL)}var XM=function(u){function o(){return null!==u&&u.apply(this,arguments)||this}return(0,Tt.ZT)(o,u),o.prototype.makeElOption=function(a,l,c,h,f){var g=c.axis;"angle"===g.dim&&(this.animationThreshold=Math.PI/18);var m=g.polar,x=m.getOtherAxis(g).getExtent(),w=g.dataToCoord(l),D=h.get("type");if(D&&"none"!==D){var I=Fc(h),L=$M[D](g,m,w,x);L.style=I,a.graphicKey=L.type,a.pointer=L}var Z=function NL(u,o,a,l,c){var h=o.axis,f=h.dataToCoord(u),g=l.getAngleAxis().getExtent()[0];g=g/180*Math.PI;var y,x,w,m=l.getRadiusAxis().getExtent();if("radius"===h.dim){var D=yi.create();yi.rotate(D,D,g),yi.translate(D,D,[l.cx,l.cy]),y=_n.applyTransform([f,-c],D);var I=o.getModel("axisLabel").get("rotate")||0,L=Eo.innerTextLayout(g,I*Math.PI/180,-1);x=L.textAlign,w=L.textVerticalAlign}else{var N=m[1];y=l.coordToPoint([N+c,f]);var Z=l.cx,se=l.cy;x=Math.abs(y[0]-Z)/N<.3?"center":y[0]>Z?"left":"right",w=Math.abs(y[1]-se)/N<.3?"middle":y[1]>se?"top":"bottom"}return{position:y,align:x,verticalAlign:w}}(l,c,0,m,h.get(["label","margin"]));EL(a,c,h,f,Z)},o}(yx),$M={line:function(u,o,a,l){return"angle"===u.dim?{type:"Line",shape:RM(o.coordToPoint([l[0],a]),o.coordToPoint([l[1],a]))}:{type:"Circle",shape:{cx:o.cx,cy:o.cy,r:a}}},shadow:function(u,o,a,l){var c=Math.max(1,u.getBandWidth()),h=Math.PI/180;return"angle"===u.dim?{type:"Sector",shape:LM(o.cx,o.cy,l[0],l[1],(-a-c/2)*h,(c/2-a)*h)}:{type:"Sector",shape:LM(o.cx,o.cy,a-c/2,a+c/2,0,2*Math.PI)}}};const FL=XM,H5=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.findAxisModel=function(a){var l;return this.ecModel.eachComponent(a,function(h){h.getCoordSysModel()===this&&(l=h)},this),l},o.type="polar",o.dependencies=["radiusAxis","angleAxis"],o.defaultOption={z:0,center:["50%","50%"],radius:"80%"},o}(ma.Z);var KM=function(u){function o(){return null!==u&&u.apply(this,arguments)||this}return(0,Tt.ZT)(o,u),o.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",xn.C6).models[0]},o.type="polarAxis",o}(ma.Z);b.mixin(KM,Zf.W);var U5=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.type="angleAxis",o}(KM),G5=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.type="radiusAxis",o}(KM),i_=function(u){function o(a,l){return u.call(this,"radius",a,l)||this}return(0,Tt.ZT)(o,u),o.prototype.pointToData=function(a,l){return this.polar.pointToData(a,l)["radius"===this.dim?0:1]},o}(fo.Z);i_.prototype.dataToRadius=fo.Z.prototype.dataToCoord,i_.prototype.radiusToData=fo.Z.prototype.coordToData;const a_=i_;var VL=(0,xn.Yf)(),Sx=function(u){function o(a,l){return u.call(this,"angle",a,l||[0,360])||this}return(0,Tt.ZT)(o,u),o.prototype.pointToData=function(a,l){return this.polar.pointToData(a,l)["radius"===this.dim?0:1]},o.prototype.calculateCategoryInterval=function(){var a=this,l=a.getLabelModel(),c=a.scale,h=c.getExtent(),f=c.count();if(h[1]-h[0]<1)return 0;var g=h[0],m=a.dataToCoord(g+1)-a.dataToCoord(g),y=Math.abs(m),x=Ce.lP(null==g?"":g+"",l.getFont(),"center","top"),D=Math.max(x.height,7)/y;isNaN(D)&&(D=1/0);var I=Math.max(0,Math.floor(D)),L=VL(a.model),N=L.lastAutoInterval,Z=L.lastTickCount;return null!=N&&null!=Z&&Math.abs(N-I)<=1&&Math.abs(Z-f)<=1&&N>I?I=N:(L.lastTickCount=f,L.lastAutoInterval=I),I},o}(fo.Z);Sx.prototype.dataToAngle=fo.Z.prototype.dataToCoord,Sx.prototype.angleToData=fo.Z.prototype.coordToData;const QM=Sx;var jh=["radius","angle"];function qM(u){var o=u.seriesModel,a=u.polarModel;return a&&a.coordinateSystem||o&&o.coordinateSystem}const HL=function(){function u(o){this.dimensions=jh,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new a_,this._angleAxis=new QM,this.axisPointerEnabled=!0,this.name=o||"",this._radiusAxis.polar=this._angleAxis.polar=this}return u.prototype.containPoint=function(o){var a=this.pointToCoord(o);return this._radiusAxis.contain(a[0])&&this._angleAxis.contain(a[1])},u.prototype.containData=function(o){return this._radiusAxis.containData(o[0])&&this._angleAxis.containData(o[1])},u.prototype.getAxis=function(o){return this["_"+o+"Axis"]},u.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},u.prototype.getAxesByScale=function(o){var a=[],l=this._angleAxis,c=this._radiusAxis;return l.scale.type===o&&a.push(l),c.scale.type===o&&a.push(c),a},u.prototype.getAngleAxis=function(){return this._angleAxis},u.prototype.getRadiusAxis=function(){return this._radiusAxis},u.prototype.getOtherAxis=function(o){var a=this._angleAxis;return o===a?this._radiusAxis:a},u.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},u.prototype.getTooltipAxes=function(o){var a=null!=o&&"auto"!==o?this.getAxis(o):this.getBaseAxis();return{baseAxes:[a],otherAxes:[this.getOtherAxis(a)]}},u.prototype.dataToPoint=function(o,a){return this.coordToPoint([this._radiusAxis.dataToRadius(o[0],a),this._angleAxis.dataToAngle(o[1],a)])},u.prototype.pointToData=function(o,a){var l=this.pointToCoord(o);return[this._radiusAxis.radiusToData(l[0],a),this._angleAxis.angleToData(l[1],a)]},u.prototype.pointToCoord=function(o){var a=o[0]-this.cx,l=o[1]-this.cy,c=this.getAngleAxis(),h=c.getExtent(),f=Math.min(h[0],h[1]),g=Math.max(h[0],h[1]);c.inverse?f=g-360:g=f+360;var m=Math.sqrt(a*a+l*l);a/=m,l/=m;for(var y=Math.atan2(-l,a)/Math.PI*180,x=y<f?1:-1;y<f||y>g;)y+=360*x;return[m,y]},u.prototype.coordToPoint=function(o){var a=o[0],l=o[1]/180*Math.PI;return[Math.cos(l)*a+this.cx,-Math.sin(l)*a+this.cy]},u.prototype.getArea=function(){var o=this.getAngleAxis(),l=this.getRadiusAxis().getExtent().slice();l[0]>l[1]&&l.reverse();var c=o.getExtent(),h=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:l[0],r:l[1],startAngle:-c[0]*h,endAngle:-c[1]*h,clockwise:o.inverse,contain:function(f,g){var m=f-this.cx,y=g-this.cy,x=m*m+y*y-1e-4,w=this.r,D=this.r0;return x<=w*w&&x>=D*D}}},u.prototype.convertToPixel=function(o,a,l){return qM(a)===this?this.dataToPoint(l):null},u.prototype.convertFromPixel=function(o,a,l){return qM(a)===this?this.pointToData(l):null},u}();function GL(u,o){var a=this,l=a.getAngleAxis(),c=a.getRadiusAxis();if(l.scale.setExtent(1/0,-1/0),c.scale.setExtent(1/0,-1/0),u.eachSeries(function(g){if(g.coordinateSystem===a){var m=g.getData();b.each((0,ki.PY)(m,"radius"),function(y){c.scale.unionExtentFromData(m,y)}),b.each((0,ki.PY)(m,"angle"),function(y){l.scale.unionExtentFromData(m,y)})}}),(0,ki.Jk)(l.scale,l.model),(0,ki.Jk)(c.scale,c.model),"category"===l.type&&!l.onBand){var h=l.getExtent(),f=360/l.scale.count();l.inverse?h[1]+=f:h[1]-=f,l.setExtent(h[0],h[1])}}function eT(u,o){if(u.type=o.get("type"),u.scale=(0,ki.aG)(o),u.onBand=o.get("boundaryGap")&&"category"===u.type,u.inverse=o.get("inverse"),function JM(u){return"angleAxis"===u.mainType}(o)){u.inverse=u.inverse!==o.get("clockwise");var a=o.get("startAngle");u.setExtent(a,a+(u.inverse?-360:360))}o.axis=u,u.model=o}const $p={dimensions:jh,create:function(u,o){var a=[];return u.eachComponent("polar",function(l,c){var h=new HL(c+"");h.update=GL;var f=h.getRadiusAxis(),g=h.getAngleAxis(),m=l.findAxisModel("radiusAxis"),y=l.findAxisModel("angleAxis");eT(f,m),eT(g,y),function UL(u,o,a){var l=o.get("center"),c=a.getWidth(),h=a.getHeight();u.cx=(0,It.GM)(l[0],c),u.cy=(0,It.GM)(l[1],h);var f=u.getRadiusAxis(),g=Math.min(c,h)/2,m=o.get("radius");null==m?m=[0,"100%"]:b.isArray(m)||(m=[0,m]);var y=[(0,It.GM)(m[0],g),(0,It.GM)(m[1],g)];f.inverse?f.setExtent(y[1],y[0]):f.setExtent(y[0],y[1])}(h,l,o),a.push(h),l.coordinateSystem=h,h.model=l}),u.eachSeries(function(l){if("polar"===l.get("coordinateSystem")){var c=l.getReferringComponents("polar",xn.C6).models[0];l.coordinateSystem=c.coordinateSystem}}),a}};var jL=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function Kp(u,o,a){o[1]>o[0]&&(o=o.slice().reverse());var l=u.coordToPoint([o[0],a]),c=u.coordToPoint([o[1],a]);return{x1:l[0],y1:l[1],x2:c[0],y2:c[1]}}function o_(u){return u.getRadiusAxis().inverse?0:1}function Dx(u){var o=u[0],a=u[u.length-1];o&&a&&Math.abs(Math.abs(o.coord-a.coord)-360)<1e-4&&u.pop()}var ZL=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.axisPointerClass="PolarAxisPointer",a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l){if(this.group.removeAll(),a.get("show")){var c=a.axis,h=c.polar,f=h.getRadiusAxis().getExtent(),g=c.getTicksCoords(),m=c.getMinorTicksCoords(),y=b.map(c.getViewLabels(),function(x){x=b.clone(x);var w=c.scale,D="ordinal"===w.type?w.getRawOrdinalNumber(x.tickValue):x.tickValue;return x.coord=c.dataToCoord(D),x});Dx(y),Dx(g),b.each(jL,function(x){a.get([x,"show"])&&(!c.scale.isBlank()||"axisLine"===x)&&tT[x](this.group,a,h,g,m,f,y)},this)}},o.type="angleAxis",o}(_c),tT={axisLine:function(u,o,a,l,c,h){var y,f=o.getModel(["axisLine","lineStyle"]),g=o_(a),m=g?0:1;(y=0===h[m]?new gh.Z({shape:{cx:a.cx,cy:a.cy,r:h[g]},style:f.getLineStyle(),z2:1,silent:!0}):new np.Z({shape:{cx:a.cx,cy:a.cy,r:h[g],r0:h[m]},style:f.getLineStyle(),z2:1,silent:!0})).style.fill=null,u.add(y)},axisTick:function(u,o,a,l,c,h){var f=o.getModel("axisTick"),g=(f.get("inside")?-1:1)*f.get("length"),m=h[o_(a)],y=b.map(l,function(x){return new Ei.Z({shape:Kp(a,[m,m+g],x.coord)})});u.add(_n.mergePath(y,{style:b.defaults(f.getModel("lineStyle").getLineStyle(),{stroke:o.get(["axisLine","lineStyle","color"])})}))},minorTick:function(u,o,a,l,c,h){if(c.length){for(var f=o.getModel("axisTick"),g=o.getModel("minorTick"),m=(f.get("inside")?-1:1)*g.get("length"),y=h[o_(a)],x=[],w=0;w<c.length;w++)for(var D=0;D<c[w].length;D++)x.push(new Ei.Z({shape:Kp(a,[y,y+m],c[w][D].coord)}));u.add(_n.mergePath(x,{style:b.defaults(g.getModel("lineStyle").getLineStyle(),b.defaults(f.getLineStyle(),{stroke:o.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(u,o,a,l,c,h,f){var g=o.getCategories(!0),m=o.getModel("axisLabel"),y=m.get("margin"),x=o.get("triggerEvent");b.each(f,function(w,D){var I=m,L=w.tickValue,N=h[o_(a)],Z=a.coordToPoint([N+y,w.coord]),se=a.cx,_e=a.cy,me=Math.abs(Z[0]-se)/N<.3?"center":Z[0]>se?"left":"right",De=Math.abs(Z[1]-_e)/N<.3?"middle":Z[1]>_e?"top":"bottom";if(g&&g[L]){var Pe=g[L];b.isObject(Pe)&&Pe.textStyle&&(I=new ka.Z(Pe.textStyle,m,m.ecModel))}var Ie=new _t.ZP({silent:Eo.isLabelSilent(o),style:(0,qt.Lr)(I,{x:Z[0],y:Z[1],fill:I.getTextColor()||o.get(["axisLine","lineStyle","color"]),text:w.formattedLabel,align:me,verticalAlign:De})});if(u.add(Ie),x){var ke=Eo.makeAxisEventDataBase(o);ke.targetType="axisLabel",ke.value=w.rawLabel,(0,Mr.A)(Ie).eventData=ke}},this)},splitLine:function(u,o,a,l,c,h){var g=o.getModel("splitLine").getModel("lineStyle"),m=g.get("color"),y=0;m=m instanceof Array?m:[m];for(var x=[],w=0;w<l.length;w++){var D=y++%m.length;x[D]=x[D]||[],x[D].push(new Ei.Z({shape:Kp(a,h,l[w].coord)}))}for(w=0;w<x.length;w++)u.add(_n.mergePath(x[w],{style:b.defaults({stroke:m[w%m.length]},g.getLineStyle()),silent:!0,z:o.get("z")}))},minorSplitLine:function(u,o,a,l,c,h){if(c.length){for(var g=o.getModel("minorSplitLine").getModel("lineStyle"),m=[],y=0;y<c.length;y++)for(var x=0;x<c[y].length;x++)m.push(new Ei.Z({shape:Kp(a,h,c[y][x].coord)}));u.add(_n.mergePath(m,{style:g.getLineStyle(),silent:!0,z:o.get("z")}))}},splitArea:function(u,o,a,l,c,h){if(l.length){var g=o.getModel("splitArea").getModel("areaStyle"),m=g.get("color"),y=0;m=m instanceof Array?m:[m];for(var x=[],w=Math.PI/180,D=-l[0].coord*w,I=Math.min(h[0],h[1]),L=Math.max(h[0],h[1]),N=o.get("clockwise"),Z=1,se=l.length;Z<=se;Z++){var _e=Z===se?l[0].coord:l[Z].coord,me=y++%m.length;x[me]=x[me]||[],x[me].push(new yn.C({shape:{cx:a.cx,cy:a.cy,r0:I,r:L,startAngle:D,endAngle:-_e*w,clockwise:N},silent:!0})),D=-_e*w}for(Z=0;Z<x.length;Z++)u.add(_n.mergePath(x[Z],{style:b.defaults({fill:m[Z%m.length]},g.getAreaStyle()),silent:!0}))}}};const YL=ZL;var Mx=["axisLine","axisTickLabel","axisName"],XL=["splitLine","splitArea","minorSplitLine"],nT=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.axisPointerClass="PolarAxisPointer",a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l){if(this.group.removeAll(),a.get("show")){var c=this._axisGroup,h=this._axisGroup=new Pn.Z;this.group.add(h);var f=a.axis,g=f.polar,m=g.getAngleAxis(),y=f.getTicksCoords(),x=f.getMinorTicksCoords(),w=m.getExtent()[0],D=f.getExtent(),I=function $L(u,o,a){return{position:[u.cx,u.cy],rotation:a/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:o.getModel("axisLabel").get("rotate"),z2:1}}(g,a,w),L=new Eo(a,I);b.each(Mx,L.add,L),h.add(L.getGroup()),_n.groupTransition(c,h,a),b.each(XL,function(N){a.get([N,"show"])&&!f.scale.isBlank()&&rT[N](this.group,a,g,w,D,y,x)},this)}},o.type="radiusAxis",o}(_c),rT={splitLine:function(u,o,a,l,c,h){var g=o.getModel("splitLine").getModel("lineStyle"),m=g.get("color"),y=0;m=m instanceof Array?m:[m];for(var x=[],w=0;w<h.length;w++){var D=y++%m.length;x[D]=x[D]||[],x[D].push(new gh.Z({shape:{cx:a.cx,cy:a.cy,r:Math.max(h[w].coord,0)}}))}for(w=0;w<x.length;w++)u.add(_n.mergePath(x[w],{style:b.defaults({stroke:m[w%m.length],fill:null},g.getLineStyle()),silent:!0}))},minorSplitLine:function(u,o,a,l,c,h,f){if(f.length){for(var m=o.getModel("minorSplitLine").getModel("lineStyle"),y=[],x=0;x<f.length;x++)for(var w=0;w<f[x].length;w++)y.push(new gh.Z({shape:{cx:a.cx,cy:a.cy,r:f[x][w].coord}}));u.add(_n.mergePath(y,{style:b.defaults({fill:null},m.getLineStyle()),silent:!0}))}},splitArea:function(u,o,a,l,c,h){if(h.length){var g=o.getModel("splitArea").getModel("areaStyle"),m=g.get("color"),y=0;m=m instanceof Array?m:[m];for(var x=[],w=h[0].coord,D=1;D<h.length;D++){var I=y++%m.length;x[I]=x[I]||[],x[I].push(new yn.C({shape:{cx:a.cx,cy:a.cy,r0:w,r:h[D].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),w=h[D].coord}for(D=0;D<x.length;D++)u.add(_n.mergePath(x[D],{style:b.defaults({fill:m[D%m.length]},g.getAreaStyle()),silent:!0}))}}};const KL=nT;function iT(u){return u.get("stack")||"__ec_stack_"+u.seriesIndex}function s_(u,o){return o.dim+u.model.componentIndex}const qL=function QL(u,o,a){var l={},c=function aT(u){var o={};b.each(u,function(l,c){var h=l.getData(),f=l.coordinateSystem,g=f.getBaseAxis(),m=s_(f,g),y=g.getExtent(),x="category"===g.type?g.getBandWidth():Math.abs(y[1]-y[0])/h.count(),w=o[m]||{bandWidth:x,remainedWidth:x,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},D=w.stacks;o[m]=w;var I=iT(l);D[I]||w.autoWidthCount++,D[I]=D[I]||{width:0,maxWidth:0};var L=(0,It.GM)(l.get("barWidth"),x),N=(0,It.GM)(l.get("barMaxWidth"),x),Z=l.get("barGap"),se=l.get("barCategoryGap");L&&!D[I].width&&(L=Math.min(w.remainedWidth,L),D[I].width=L,w.remainedWidth-=L),N&&(D[I].maxWidth=N),null!=Z&&(w.gap=Z),null!=se&&(w.categoryGap=se)});var a={};return b.each(o,function(l,c){a[c]={};var h=l.stacks,g=(0,It.GM)(l.categoryGap,l.bandWidth),m=(0,It.GM)(l.gap,1),y=l.remainedWidth,x=l.autoWidthCount,w=(y-g)/(x+(x-1)*m);w=Math.max(w,0),b.each(h,function(N,Z){var se=N.maxWidth;se&&se<w&&(se=Math.min(se,y),N.width&&(se=Math.min(se,N.width)),y-=se,N.width=se,x--)}),w=(y-g)/(x+(x-1)*m),w=Math.max(w,0);var I,D=0;b.each(h,function(N,Z){N.width||(N.width=w),I=N,D+=N.width*(1+m)}),I&&(D-=I.width*m);var L=-D/2;b.each(h,function(N,Z){a[c][Z]=a[c][Z]||{offset:L,width:N.width},L+=N.width*(1+m)})}),a}(b.filter(o.getSeriesByType(u),function(h){return!o.isSeriesFiltered(h)&&h.coordinateSystem&&"polar"===h.coordinateSystem.type}));o.eachSeriesByType(u,function(h){if("polar"===h.coordinateSystem.type){var f=h.getData(),g=h.coordinateSystem,m=g.getBaseAxis(),y=s_(g,m),x=iT(h),w=c[y][x],D=w.offset,I=w.width,L=g.getOtherAxis(m),N=h.coordinateSystem.cx,Z=h.coordinateSystem.cy,se=h.get("barMinHeight")||0,_e=h.get("barMinAngle")||0;l[x]=l[x]||[];for(var me=f.mapDimension(L.dim),De=f.mapDimension(m.dim),Pe=(0,$l.M)(f,me),Ie="radius"!==m.dim||!h.get("roundCap",!0),ke=L.dataToCoord(0),Ue=0,Ye=f.count();Ue<Ye;Ue++){var Ke=f.get(me,Ue),qe=f.get(De,Ue),ut=Ke>=0?"p":"n",pt=ke;Pe&&(l[x][qe]||(l[x][qe]={p:ke,n:ke}),pt=l[x][qe][ut]);var yt=void 0,wt=void 0,kt=void 0,en=void 0;if("radius"===L.dim){var jt=L.dataToCoord(Ke)-ke,dn=m.dataToCoord(qe);Math.abs(jt)<se&&(jt=(jt<0?-1:1)*se),yt=pt,wt=pt+jt,en=(kt=dn-D)-I,Pe&&(l[x][qe][ut]=wt)}else{var Fn=L.dataToCoord(Ke,Ie)-ke,Hn=m.dataToCoord(qe);Math.abs(Fn)<_e&&(Fn=(Fn<0?-1:1)*_e),wt=(yt=Hn+D)+I,kt=pt,en=pt+Fn,Pe&&(l[x][qe][ut]=en)}f.setItemLayout(Ue,{cx:N,cy:Z,r0:yt,r:wt,startAngle:-kt*Math.PI/180,endAngle:-en*Math.PI/180,clockwise:kt>=en})}}})};var JL={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},eO={splitNumber:5},tO=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.type="polar",o}(ga.Z);function Tx(u,o){o=o||{};var l=u.axis,c={},h=l.position,f=l.orient,g=u.coordinateSystem.getRect(),m=[g.x,g.x+g.width,g.y,g.y+g.height],y={horizontal:{top:m[2],bottom:m[3]},vertical:{left:m[0],right:m[1]}};c.position=["vertical"===f?y.vertical[h]:m[0],"horizontal"===f?y.horizontal[h]:m[3]],c.rotation=Math.PI/2*{horizontal:0,vertical:1}[f],c.labelDirection=c.tickDirection=c.nameDirection={top:-1,bottom:1,right:1,left:-1}[h],u.get(["axisTick","inside"])&&(c.tickDirection=-c.tickDirection),b.retrieve(o.labelInside,u.get(["axisLabel","inside"]))&&(c.labelDirection=-c.labelDirection);var D=o.rotate;return null==D&&(D=u.get(["axisLabel","rotate"])),c.labelRotation="top"===h?-D:D,c.z2=1,c}var rO=["axisLine","axisTickLabel","axisName"],iO=["splitArea","splitLine"],oT=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.axisPointerClass="SingleAxisPointer",a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c,h){var f=this.group;f.removeAll();var g=this._axisGroup;this._axisGroup=new Pn.Z;var m=Tx(a),y=new Eo(a,m);b.each(rO,y.add,y),f.add(this._axisGroup),f.add(y.getGroup()),b.each(iO,function(x){a.get([x,"show"])&&sT[x](this,this.group,this._axisGroup,a)},this),_n.groupTransition(g,this._axisGroup,a),u.prototype.render.call(this,a,l,c,h)},o.prototype.remove=function(){Iw(this)},o.type="singleAxis",o}(_c),sT={splitLine:function(u,o,a,l){var c=l.axis;if(!c.scale.isBlank()){var h=l.getModel("splitLine"),f=h.getModel("lineStyle"),g=f.get("color");g=g instanceof Array?g:[g];for(var m=f.get("width"),y=l.coordinateSystem.getRect(),x=c.isHorizontal(),w=[],D=0,I=c.getTicksCoords({tickModel:h}),L=[],N=[],Z=0;Z<I.length;++Z){var se=c.toGlobalCoord(I[Z].coord);x?(L[0]=se,L[1]=y.y,N[0]=se,N[1]=y.y+y.height):(L[0]=y.x,L[1]=se,N[0]=y.x+y.width,N[1]=se);var _e=new Ei.Z({shape:{x1:L[0],y1:L[1],x2:N[0],y2:N[1]},silent:!0});_n.subPixelOptimizeLine(_e.shape,m);var me=D++%g.length;w[me]=w[me]||[],w[me].push(_e)}var De=f.getLineStyle(["color"]);for(Z=0;Z<w.length;++Z)o.add(_n.mergePath(w[Z],{style:b.defaults({stroke:g[Z%g.length]},De),silent:!0}))}},splitArea:function(u,o,a,l){Dg(u,a,l,l)}};const aO=oT;var lT=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.getCoordSysModel=function(){return this},o.type="singleAxis",o.layoutMode="box",o.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},o}(ma.Z);(0,b.mixin)(lT,Zf.W.prototype);const l_=lT,sO=function(u){function o(a,l,c,h,f){var g=u.call(this,a,l,c)||this;return g.type=h||"value",g.position=f||"bottom",g}return(0,Tt.ZT)(o,u),o.prototype.isHorizontal=function(){var a=this.position;return"top"===a||"bottom"===a},o.prototype.pointToData=function(a,l){return this.coordinateSystem.pointToData(a)[0]},o}(fo.Z);var uT=["single"];function u_(u){var o=u.seriesModel,a=u.singleAxisModel;return a&&a.coordinateSystem||o&&o.coordinateSystem}const cT=function(){function u(o,a,l){this.type="single",this.dimension="single",this.dimensions=uT,this.axisPointerEnabled=!0,this.model=o,this._init(o,a,l)}return u.prototype._init=function(o,a,l){var h=new sO(this.dimension,ki.aG(o),[0,0],o.get("type"),o.get("position"));h.onBand="category"===h.type&&o.get("boundaryGap"),h.inverse=o.get("inverse"),h.orient=o.get("orient"),o.axis=h,h.model=o,h.coordinateSystem=this,this._axis=h},u.prototype.update=function(o,a){o.eachSeries(function(l){if(l.coordinateSystem===this){var c=l.getData();(0,b.each)(c.mapDimensionsAll(this.dimension),function(h){this._axis.scale.unionExtentFromData(c,h)},this),ki.Jk(this._axis.scale,this._axis.model)}},this)},u.prototype.resize=function(o,a){this._rect=(0,Vr.ME)({left:o.get("left"),top:o.get("top"),right:o.get("right"),bottom:o.get("bottom"),width:o.get("width"),height:o.get("height")},{width:a.getWidth(),height:a.getHeight()}),this._adjustAxis()},u.prototype.getRect=function(){return this._rect},u.prototype._adjustAxis=function(){var o=this._rect,a=this._axis,l=a.isHorizontal(),c=l?[0,o.width]:[0,o.height],h=a.inverse?1:0;a.setExtent(c[h],c[1-h]),this._updateAxisTransform(a,l?o.x:o.y)},u.prototype._updateAxisTransform=function(o,a){var l=o.getExtent(),c=l[0]+l[1],h=o.isHorizontal();o.toGlobalCoord=h?function(f){return f+a}:function(f){return c-f+a},o.toLocalCoord=h?function(f){return f-a}:function(f){return c-f+a}},u.prototype.getAxis=function(){return this._axis},u.prototype.getBaseAxis=function(){return this._axis},u.prototype.getAxes=function(){return[this._axis]},u.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},u.prototype.containPoint=function(o){var a=this.getRect(),l=this.getAxis();return"horizontal"===l.orient?l.contain(l.toLocalCoord(o[0]))&&o[1]>=a.y&&o[1]<=a.y+a.height:l.contain(l.toLocalCoord(o[1]))&&o[0]>=a.y&&o[0]<=a.y+a.height},u.prototype.pointToData=function(o){var a=this.getAxis();return[a.coordToData(a.toLocalCoord(o["horizontal"===a.orient?0:1]))]},u.prototype.dataToPoint=function(o){var a=this.getAxis(),l=this.getRect(),c=[],h="horizontal"===a.orient?0:1;return o instanceof Array&&(o=o[0]),c[h]=a.toGlobalCoord(a.dataToCoord(+o)),c[1-h]=0===h?l.y+l.height/2:l.x+l.width/2,c},u.prototype.convertToPixel=function(o,a,l){return u_(a)===this?this.dataToPoint(l):null},u.prototype.convertFromPixel=function(o,a,l){return u_(a)===this?this.pointToData(l):null},u}(),uO={create:function Ax(u,o){var a=[];return u.eachComponent("singleAxis",function(l,c){var h=new cT(l,u,o);h.name="single_"+c,h.resize(l,o),l.coordinateSystem=h,a.push(h)}),u.eachSeries(function(l){if("singleAxis"===l.get("coordinateSystem")){var c=l.getReferringComponents("singleAxis",xn.C6).models[0];l.coordinateSystem=c&&c.coordinateSystem}}),a},dimensions:uT};var c_=["x","y"],cO=["width","height"],Kr=function(u){function o(){return null!==u&&u.apply(this,arguments)||this}return(0,Tt.ZT)(o,u),o.prototype.makeElOption=function(a,l,c,h,f){var g=c.axis,m=g.coordinateSystem,y=Ix(m,1-Qp(g)),x=m.dataToPoint(l)[0],w=h.get("type");if(w&&"none"!==w){var D=Fc(h),I=Pd[w](g,x,y);I.style=D,a.graphicKey=I.type,a.pointer=I}bx(l,a,Tx(c),c,h,f)},o.prototype.getHandleTransform=function(a,l,c){var h=Tx(l,{labelInside:!1});h.labelMargin=c.get(["handle","margin"]);var f=e_(l.axis,a,h);return{x:f[0],y:f[1],rotation:h.rotation+(h.labelDirection<0?Math.PI:0)}},o.prototype.updateHandleTransform=function(a,l,c,h){var f=c.axis,g=f.coordinateSystem,m=Qp(f),y=Ix(g,m),x=[a.x,a.y];x[m]+=l[m],x[m]=Math.min(y[1],x[m]),x[m]=Math.max(y[0],x[m]);var w=Ix(g,1-m),D=(w[1]+w[0])/2,I=[D,D];return I[m]=x[m],{x:x[0],y:x[1],rotation:a.rotation,cursorPoint:I,tooltipOption:{verticalAlign:"middle"}}},o}(yx),Pd={line:function(u,o,a){return{type:"Line",subPixelOptimize:!0,shape:RM([o,a[0]],[o,a[1]],Qp(u))}},shadow:function(u,o,a){var l=u.getBandWidth();return{type:"Rect",shape:Un([o-l/2,a[0]],[l,a[1]-a[0]],Qp(u))}}};function Qp(u){return u.isHorizontal()?0:1}function Ix(u,o){var a=u.getRect();return[a[c_[o]],a[c_[o]]+a[cO[o]]]}const W5=Kr;var dT=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.type="single",o}(ga.Z);function qp(u,o){var l,a=u.cellSize;1===(l=b.isArray(a)?a:u.cellSize=[a,a]).length&&(l[1]=l[0]);var c=b.map([0,1],function(h){return(0,Vr.QM)(o,h)&&(l[h]="auto"),null!=l[h]&&"auto"!==l[h]});(0,Vr.dt)(u,o,{type:"box",ignoreSize:c})}const hO=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.init=function(a,l,c){var h=(0,Vr.tE)(a);u.prototype.init.apply(this,arguments),qp(a,h)},o.prototype.mergeOption=function(a){u.prototype.mergeOption.apply(this,arguments),qp(this.option,a)},o.prototype.getCellSize=function(){return this.option.cellSize},o.type="calendar",o.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},o}(ma.Z);var Rx=z(5514);const hT=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c){var h=this.group;h.removeAll();var f=a.coordinateSystem,g=f.getRangeInfo(),m=f.getOrient(),y=l.getLocaleModel();this._renderDayRect(a,g,h),this._renderLines(a,g,m,h),this._renderYearText(a,g,m,h),this._renderMonthText(a,y,m,h),this._renderWeekText(a,y,g,m,h)},o.prototype._renderDayRect=function(a,l,c){for(var h=a.coordinateSystem,f=a.getModel("itemStyle").getItemStyle(),g=h.getCellWidth(),m=h.getCellHeight(),y=l.start.time;y<=l.end.time;y=h.getNextNDay(y,1).time){var x=h.dataToRect([y],!1).tl,w=new Di.Z({shape:{x:x[0],y:x[1],width:g,height:m},cursor:"default",style:f});c.add(w)}},o.prototype._renderLines=function(a,l,c,h){var f=this,g=a.coordinateSystem,m=a.getModel(["splitLine","lineStyle"]).getLineStyle(),y=a.get(["splitLine","show"]),x=m.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var w=l.start,D=0;w.time<=l.end.time;D++){L(w.formatedDate),0===D&&(w=g.getDateInfo(l.start.y+"-"+l.start.m));var I=w.date;I.setMonth(I.getMonth()+1),w=g.getDateInfo(I)}function L(N){f._firstDayOfMonth.push(g.getDateInfo(N)),f._firstDayPoints.push(g.dataToRect([N],!1).tl);var Z=f._getLinePointsOfOneWeek(a,N,c);f._tlpoints.push(Z[0]),f._blpoints.push(Z[Z.length-1]),y&&f._drawSplitline(Z,m,h)}L(g.getNextNDay(l.end.time,1).formatedDate),y&&this._drawSplitline(f._getEdgesPoints(f._tlpoints,x,c),m,h),y&&this._drawSplitline(f._getEdgesPoints(f._blpoints,x,c),m,h)},o.prototype._getEdgesPoints=function(a,l,c){var h=[a[0].slice(),a[a.length-1].slice()],f="horizontal"===c?0:1;return h[0][f]=h[0][f]-l/2,h[1][f]=h[1][f]+l/2,h},o.prototype._drawSplitline=function(a,l,c){var h=new Ps.Z({z2:20,shape:{points:a},style:l});c.add(h)},o.prototype._getLinePointsOfOneWeek=function(a,l,c){for(var h=a.coordinateSystem,f=h.getDateInfo(l),g=[],m=0;m<7;m++){var y=h.getNextNDay(f.time,m),x=h.dataToRect([y.time],!1);g[2*y.day]=x.tl,g[2*y.day+1]=x["horizontal"===c?"bl":"tr"]}return g},o.prototype._formatterLabel=function(a,l){return(0,b.isString)(a)&&a?(0,Va.wx)(a,l):(0,b.isFunction)(a)?a(l):l.nameMap},o.prototype._yearTextPositionControl=function(a,l,c,h,f){var g=l[0],m=l[1],y=["center","bottom"];"bottom"===h?(m+=f,y=["center","top"]):"left"===h?g-=f:"right"===h?(g+=f,y=["center","top"]):m-=f;var x=0;return("left"===h||"right"===h)&&(x=Math.PI/2),{rotation:x,x:g,y:m,style:{align:y[0],verticalAlign:y[1]}}},o.prototype._renderYearText=function(a,l,c,h){var f=a.getModel("yearLabel");if(f.get("show")){var g=f.get("margin"),m=f.get("position");m||(m="horizontal"!==c?"top":"left");var y=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],x=(y[0][0]+y[1][0])/2,w=(y[0][1]+y[1][1])/2,D="horizontal"===c?0:1,I={top:[x,y[D][1]],bottom:[x,y[1-D][1]],left:[y[1-D][0],w],right:[y[D][0],w]},L=l.start.y;+l.end.y>+l.start.y&&(L=L+"-"+l.end.y);var N=f.get("formatter"),se=this._formatterLabel(N,{start:l.start.y,end:l.end.y,nameMap:L}),_e=new _t.ZP({z2:30,style:(0,qt.Lr)(f,{text:se})});_e.attr(this._yearTextPositionControl(_e,I[m],c,m,g)),h.add(_e)}},o.prototype._monthTextPositionControl=function(a,l,c,h,f){var g="left",m="top",y=a[0],x=a[1];return"horizontal"===c?(x+=f,l&&(g="center"),"start"===h&&(m="bottom")):(y+=f,l&&(m="middle"),"start"===h&&(g="right")),{x:y,y:x,align:g,verticalAlign:m}},o.prototype._renderMonthText=function(a,l,c,h){var f=a.getModel("monthLabel");if(f.get("show")){var g=f.get("nameMap"),m=f.get("margin"),y=f.get("position"),x=f.get("align"),w=[this._tlpoints,this._blpoints];(!g||(0,b.isString)(g))&&(g&&(l=(0,Rx.G8)(g)||l),g=l.get(["time","monthAbbr"])||[]);var D="start"===y?0:1,I="horizontal"===c?0:1;m="start"===y?-m:m;for(var L="center"===x,N=0;N<w[D].length-1;N++){var Z=w[D][N].slice(),se=this._firstDayOfMonth[N];L&&(Z[I]=(this._firstDayPoints[N][I]+w[0][N+1][I])/2);var me=f.get("formatter"),De=g[+se.m-1],Pe={yyyy:se.y,yy:(se.y+"").slice(2),MM:se.m,M:+se.m,nameMap:De},Ie=this._formatterLabel(me,Pe),ke=new _t.ZP({z2:30,style:(0,b.extend)((0,qt.Lr)(f,{text:Ie}),this._monthTextPositionControl(Z,L,c,y,m))});h.add(ke)}}},o.prototype._weekTextPositionControl=function(a,l,c,h,f){var g="center",m="middle",y=a[0],x=a[1],w="start"===c;return"horizontal"===l?(y=y+h+(w?1:-1)*f[0]/2,g=w?"right":"left"):(x=x+h+(w?1:-1)*f[1]/2,m=w?"bottom":"top"),{x:y,y:x,align:g,verticalAlign:m}},o.prototype._renderWeekText=function(a,l,c,h,f){var g=a.getModel("dayLabel");if(g.get("show")){var m=a.coordinateSystem,y=g.get("position"),x=g.get("nameMap"),w=g.get("margin"),D=m.getFirstDayOfWeek();x&&!(0,b.isString)(x)||(x&&(l=(0,Rx.G8)(x)||l),x=l.get(["time","dayOfWeekShort"])||(0,b.map)(l.get(["time","dayOfWeekAbbr"]),function(Pe){return Pe[0]}));var L=m.getNextNDay(c.end.time,7-c.lweek).time,N=[m.getCellWidth(),m.getCellHeight()];w=(0,It.GM)(w,Math.min(N[1],N[0])),"start"===y&&(L=m.getNextNDay(c.start.time,-(7+c.fweek)).time,w=-w);for(var Z=0;Z<7;Z++){var me,se=m.getNextNDay(L,Z),_e=m.dataToRect([se.time],!1).center;me=Math.abs((Z+D)%7);var De=new _t.ZP({z2:30,style:(0,b.extend)((0,qt.Lr)(g,{text:x[me]}),this._weekTextPositionControl(_e,h,y,w,N))});f.add(De)}}},o.type="calendar",o}(ga.Z);var d_=864e5;function Ox(u){var o=u.calendarModel,a=u.seriesModel;return o?o.coordinateSystem:a?a.coordinateSystem:null}const fO=function(){function u(o,a,l){this.type="calendar",this.dimensions=u.dimensions,this.getDimensionsInfo=u.getDimensionsInfo,this._model=o}return u.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},u.prototype.getRangeInfo=function(){return this._rangeInfo},u.prototype.getModel=function(){return this._model},u.prototype.getRect=function(){return this._rect},u.prototype.getCellWidth=function(){return this._sw},u.prototype.getCellHeight=function(){return this._sh},u.prototype.getOrient=function(){return this._orient},u.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},u.prototype.getDateInfo=function(o){var a=(o=It.sG(o)).getFullYear(),l=o.getMonth()+1,c=l<10?"0"+l:""+l,h=o.getDate(),f=h<10?"0"+h:""+h,g=o.getDay();return{y:a+"",m:c,d:f,day:g=Math.abs((g+7-this.getFirstDayOfWeek())%7),time:o.getTime(),formatedDate:a+"-"+c+"-"+f,date:o}},u.prototype.getNextNDay=function(o,a){return 0===(a=a||0)||(o=new Date(this.getDateInfo(o).time)).setDate(o.getDate()+a),this.getDateInfo(o)},u.prototype.update=function(o,a){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var l=this._rangeInfo.weeks||1,c=["width","height"],h=this._model.getCellSize().slice(),f=this._model.getBoxLayoutParams(),g="horizontal"===this._orient?[l,7]:[7,l];b.each([0,1],function(w){x(h,w)&&(f[c[w]]=h[w]*g[w])});var m={width:a.getWidth(),height:a.getHeight()},y=this._rect=Vr.ME(f,m);function x(w,D){return null!=w[D]&&"auto"!==w[D]}b.each([0,1],function(w){x(h,w)||(h[w]=y[c[w]]/g[w])}),this._sw=h[0],this._sh=h[1]},u.prototype.dataToPoint=function(o,a){b.isArray(o)&&(o=o[0]),null==a&&(a=!0);var l=this.getDateInfo(o),c=this._rangeInfo;if(a&&!(l.time>=c.start.time&&l.time<c.end.time+d_))return[NaN,NaN];var f=l.day,g=this._getRangeInfo([c.start.time,l.formatedDate]).nthWeek;return"vertical"===this._orient?[this._rect.x+f*this._sw+this._sw/2,this._rect.y+g*this._sh+this._sh/2]:[this._rect.x+g*this._sw+this._sw/2,this._rect.y+f*this._sh+this._sh/2]},u.prototype.pointToData=function(o){var a=this.pointToDate(o);return a&&a.time},u.prototype.dataToRect=function(o,a){var l=this.dataToPoint(o,a);return{contentShape:{x:l[0]-(this._sw-this._lineWidth)/2,y:l[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:l,tl:[l[0]-this._sw/2,l[1]-this._sh/2],tr:[l[0]+this._sw/2,l[1]-this._sh/2],br:[l[0]+this._sw/2,l[1]+this._sh/2],bl:[l[0]-this._sw/2,l[1]+this._sh/2]}},u.prototype.pointToDate=function(o){var a=Math.floor((o[0]-this._rect.x)/this._sw)+1,l=Math.floor((o[1]-this._rect.y)/this._sh)+1,c=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(l,a-1,c):this._getDateByWeeksAndDay(a,l-1,c)},u.prototype.convertToPixel=function(o,a,l){var c=Ox(a);return c===this?c.dataToPoint(l):null},u.prototype.convertFromPixel=function(o,a,l){var c=Ox(a);return c===this?c.pointToData(l):null},u.prototype.containPoint=function(o){return console.warn("Not implemented."),!1},u.prototype._initRangeOption=function(){var a,o=this._model.get("range");if(b.isArray(o)&&1===o.length&&(o=o[0]),b.isArray(o))a=o;else{var l=o.toString();if(/^\d{4}$/.test(l)&&(a=[l+"-01-01",l+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(l)){var c=this.getDateInfo(l),h=c.date;h.setMonth(h.getMonth()+1);var f=this.getNextNDay(h,-1);a=[c.formatedDate,f.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(l)&&(a=[l,l])}if(!a)return o;var g=this._getRangeInfo(a);return g.start.time>g.end.time&&a.reverse(),a},u.prototype._getRangeInfo=function(o){var l,a=[this.getDateInfo(o[0]),this.getDateInfo(o[1])];a[0].time>a[1].time&&(l=!0,a.reverse());var c=Math.floor(a[1].time/d_)-Math.floor(a[0].time/d_)+1,h=new Date(a[0].time),f=h.getDate(),g=a[1].date.getDate();h.setDate(f+c-1);var m=h.getDate();if(m!==g)for(var y=h.getTime()-a[1].time>0?1:-1;(m=h.getDate())!==g&&(h.getTime()-a[1].time)*y>0;)c-=y,h.setDate(m-y);var x=Math.floor((c+a[0].day+6)/7),w=l?1-x:x-1;return l&&a.reverse(),{range:[a[0].formatedDate,a[1].formatedDate],start:a[0],end:a[1],allDay:c,weeks:x,nthWeek:w,fweek:a[0].day,lweek:a[1].day}},u.prototype._getDateByWeeksAndDay=function(o,a,l){var c=this._getRangeInfo(l);if(o>c.weeks||0===o&&a<c.fweek||o===c.weeks&&a>c.lweek)return null;var h=7*(o-1)-c.fweek+a,f=new Date(c.start.time);return f.setDate(+c.start.d+h),this.getDateInfo(f)},u.create=function(o,a){var l=[];return o.eachComponent("calendar",function(c){var h=new u(c,o,a);l.push(h),c.coordinateSystem=h}),o.eachSeries(function(c){"calendar"===c.get("coordinateSystem")&&(c.coordinateSystem=l[c.get("calendarIndex")||0])}),l},u.dimensions=["time","value"],u}();function pT(u,o){var a;return b.each(o,function(l){null!=u[l]&&"auto"!==u[l]&&(a=!0)}),a}var gO=["transition","enterFrom","leaveTo"],gT=gO.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function h_(u,o,a){if(a&&(!u[a]&&o[a]&&(u[a]={}),u=u[a],o=o[a]),u&&o)for(var l=a?gO:gT,c=0;c<l.length;c++){var h=l[c];null==u[h]&&null!=o[h]&&(u[h]=o[h])}}var j5=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.preventAutoZ=!0,a}return(0,Tt.ZT)(o,u),o.prototype.mergeOption=function(a,l){var c=this.option.elements;this.option.elements=null,u.prototype.mergeOption.call(this,a,l),this.option.elements=c},o.prototype.optionUpdated=function(a,l){var c=this.option,h=(l?c:a).elements,f=c.elements=l?[]:c.elements,g=[];this._flatten(h,g,null);var m=xn.ab(f,g,"normalMerge"),y=this._elOptionsToUpdate=[];b.each(m,function(x,w){var D=x.newOption;!D||(y.push(D),function vO(u,o){var a=u.existing;if(o.id=u.keyInfo.id,!o.type&&a&&(o.type=a.type),null==o.parentId){var l=o.parentOption;l?o.parentId=l.id:a&&(o.parentId=a.parentId)}o.parentOption=null}(x,D),function vT(u,o,a){var l=b.extend({},a),c=u[o],h=a.$action||"merge";"merge"===h?c?(b.merge(c,l,!0),(0,Vr.dt)(c,l,{ignoreSize:!0}),(0,Vr.QT)(a,c),h_(a,c),h_(a,c,"shape"),h_(a,c,"style"),h_(a,c,"extra"),a.clipPath=c.clipPath):u[o]=l:"replace"===h?u[o]=l:"remove"===h&&c&&(u[o]=null)}(f,w,D),function mO(u,o){if(u&&(u.hv=o.hv=[pT(o,["left","right"]),pT(o,["top","bottom"])],"group"===u.type)){var a=u,l=o;null==a.width&&(a.width=l.width=0),null==a.height&&(a.height=l.height=0)}}(f[w],D))},this),c.elements=b.filter(f,function(x){return x&&delete x.$action,null!=x})},o.prototype._flatten=function(a,l,c){b.each(a,function(h){if(h){c&&(h.parentOption=c),l.push(h);var f=h.children;f&&f.length&&this._flatten(f,l,h),delete h.children}},this)},o.prototype.useElOptionsToUpdate=function(){var a=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,a},o.type="graphic",o.defaultOption={elements:[]},o}(ma.Z),_O={path:null,compoundPath:null,group:Pn.Z,image:be.ZP,text:_t.ZP},ul=xn.Yf(),yO=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.init=function(){this._elMap=b.createHashMap()},o.prototype.render=function(a,l,c){a!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=a,this._updateElements(a),this._relocate(a,c)},o.prototype._updateElements=function(a){var l=a.useElOptionsToUpdate();if(l){var c=this._elMap,h=this.group,f=a.get("z"),g=a.get("zlevel");b.each(l,function(m){var y=xn.U5(m.id,null),x=null!=y?c.get(y):null,w=xn.U5(m.parentId,null),D=null!=w?c.get(w):h,I=m.type,L=m.style;"text"===I&&L&&m.hv&&m.hv[1]&&(L.textVerticalAlign=L.textBaseline=L.verticalAlign=L.align=null);var N=m.textContent,Z=m.textConfig;if(L&&hM(L,I,!!Z,!!N)){var se=fM(L,I,!0);!Z&&se.textConfig&&(Z=m.textConfig=se.textConfig),!N&&se.textContent&&(N=se.textContent)}var _e=function bO(u){return u=b.extend({},u),b.each(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(Vr.gN),function(o){delete u[o]}),u}(m),me=m.$action||"merge",De="merge"===me,Pe="replace"===me;if(De){var ke=x;(Ie=!x)?ke=Bc(y,D,m.type,c):(ke&&(ul(ke).isNew=!1),Hh(ke)),ke&&(Hm(ke,_e,a,{isInit:Ie}),mT(ke,m,f,g))}else if(Pe){Zh(x,m,c,a);var Ue=Bc(y,D,m.type,c);Ue&&(Hm(Ue,_e,a,{isInit:!0}),mT(Ue,m,f,g))}else"remove"===me&&(ux(x,m),Zh(x,m,c,a));var Ye=c.get(y);if(Ye&&N)if(De){var Ke=Ye.getTextContent();Ke?Ke.attr(N):Ye.setTextContent(new _t.ZP(N))}else Pe&&Ye.setTextContent(new _t.ZP(N));if(Ye){var qe=m.clipPath;if(qe){var ut=qe.type,pt=void 0,Ie=!1;if(De){var yt=Ye.getClipPath();pt=(Ie=!yt||ul(yt).type!==ut)?Rd(ut):yt}else Pe&&(Ie=!0,pt=Rd(ut));Ye.setClipPath(pt),Hm(pt,qe,a,{isInit:Ie}),Gm(pt,qe.keyframeAnimation,a)}var wt=ul(Ye);Ye.setTextConfig(Z),wt.option=m,function xO(u,o,a){var l=(0,Mr.A)(u).eventData;!u.silent&&!u.ignore&&!l&&(l=(0,Mr.A)(u).eventData={componentType:"graphic",componentIndex:o.componentIndex,name:u.name}),l&&(l.info=a.info)}(Ye,a,m),_n.setTooltipConfig({el:Ye,componentModel:a,itemName:Ye.name,itemTooltipOption:m.tooltip}),Gm(Ye,m.keyframeAnimation,a)}})}},o.prototype._relocate=function(a,l){for(var c=a.option.elements,h=this.group,f=this._elMap,g=l.getWidth(),m=l.getHeight(),y=["x","y"],x=0;x<c.length;x++)if((I=null!=(D=xn.U5((w=c[x]).id,null))?f.get(D):null)&&I.isGroup){var N=(L=I.parent)===h,Z=ul(I),se=ul(L);Z.width=(0,It.GM)(Z.option.width,N?g:se.width)||0,Z.height=(0,It.GM)(Z.option.height,N?m:se.height)||0}for(x=c.length-1;x>=0;x--){var w,D,I;if(I=null!=(D=xn.U5((w=c[x]).id,null))?f.get(D):null){se=ul(L=I.parent);var L,me={},De=Vr.p$(I,w,L===h?{width:g,height:m}:{width:se.width,height:se.height},null,{hv:w.hv,boundingMode:w.bounding},me);if(!ul(I).isNew&&De){for(var Pe=w.transition,Ie={},ke=0;ke<y.length;ke++){var Ue=y[ke],Ye=me[Ue];Pe&&(Oc(Pe)||b.indexOf(Pe,Ue)>=0)?Ie[Ue]=Ye:I[Ue]=Ye}(0,wn.D)(I,Ie,a,0)}else I.attr(me)}}},o.prototype._clear=function(){var a=this,l=this._elMap;l.each(function(c){Zh(c,ul(c).option,l,a._lastGraphicModel)}),this._elMap=b.createHashMap()},o.prototype.dispose=function(){this._clear()},o.type="graphic",o}(ga.Z);function Rd(u){var a=new(b.hasOwn(_O,u)?_O[u]:_n.getShapeClass(u))({});return ul(a).type=u,a}function Bc(u,o,a,l){var c=Rd(a);return o.add(c),l.set(u,c),ul(c).id=u,ul(c).isNew=!0,c}function Zh(u,o,a,l){u&&u.parent&&("group"===u.type&&u.traverse(function(h){Zh(h,o,a,l)}),Um(u,o,l),a.removeKey(ul(u).id))}function mT(u,o,a,l){u.isGroup||b.each([["cursor",xc.ZP.prototype.cursor],["zlevel",l||0],["z",a||0],["z2",0]],function(c){var h=c[0];b.hasOwn(o,h)?u[h]=b.retrieve2(o[h],c[1]):null==u[h]&&(u[h]=c[1])}),b.each(b.keys(o),function(c){if(0===c.indexOf("on")){var h=o[c];u[c]=b.isFunction(h)?h:null}}),b.hasOwn(o,"draggable")&&(u.draggable=o.draggable),null!=o.name&&(u.name=o.name),null!=o.id&&(u.id=o.id)}var _T=["x","y","radius","angle","single"],wO=["cartesian2d","polar","singleAxis"];function cl(u){return u+"Axis"}function kx(u){var o=u.ecModel,a={infoList:[],infoMap:(0,b.createHashMap)()};return u.eachTargetAxis(function(l,c){var h=o.getComponent(cl(l),c);if(h){var f=h.getCoordSysModel();if(f){var g=f.uid,m=a.infoMap.get(g);m||(a.infoList.push(m={model:f,axisModels:[]}),a.infoMap.set(g,m)),m.axisModels.push(h)}}}),a}var f_=function(){function u(){this.indexList=[],this.indexMap=[]}return u.prototype.add=function(o){this.indexMap[o]||(this.indexList.push(o),this.indexMap[o]=!0)},u}();function bT(u){var o={};return(0,b.each)(["start","end","startValue","endValue","throttle"],function(a){u.hasOwnProperty(a)&&(o[a]=u[a])}),o}const p_=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a._autoThrottle=!0,a._noTarget=!0,a._rangePropMode=["percent","percent"],a}return(0,Tt.ZT)(o,u),o.prototype.init=function(a,l,c){var h=bT(a);this.settledOption=h,this.mergeDefaultAndTheme(a,c),this._doInit(h)},o.prototype.mergeOption=function(a){var l=bT(a);(0,b.merge)(this.option,a,!0),(0,b.merge)(this.settledOption,l,!0),this._doInit(l)},o.prototype._doInit=function(a){var l=this.option;this._setDefaultThrottle(a),this._updateRangeUse(a);var c=this.settledOption;(0,b.each)([["start","startValue"],["end","endValue"]],function(h,f){"value"===this._rangePropMode[f]&&(l[h[0]]=c[h[0]]=null)},this),this._resetTarget()},o.prototype._resetTarget=function(){var a=this.get("orient",!0),l=this._targetAxisInfoMap=(0,b.createHashMap)();this._fillSpecifiedTargetAxis(l)?this._orient=a||this._makeAutoOrientByTargetAxis():(this._orient=a||"horizontal",this._fillAutoTargetAxisByOrient(l,this._orient)),this._noTarget=!0,l.each(function(h){h.indexList.length&&(this._noTarget=!1)},this)},o.prototype._fillSpecifiedTargetAxis=function(a){var l=!1;return(0,b.each)(_T,function(c){var h=this.getReferringComponents(cl(c),xn.iP);if(h.specified){l=!0;var f=new f_;(0,b.each)(h.models,function(g){f.add(g.componentIndex)}),a.set(c,f)}},this),l},o.prototype._fillAutoTargetAxisByOrient=function(a,l){var c=this.ecModel,h=!0;if(h){var f="vertical"===l?"y":"x";m(c.findComponents({mainType:f+"Axis"}),f)}function m(y,x){var w=y[0];if(w){var D=new f_;if(D.add(w.componentIndex),a.set(x,D),h=!1,"x"===x||"y"===x){var I=w.getReferringComponents("grid",xn.C6).models[0];I&&(0,b.each)(y,function(L){w.componentIndex!==L.componentIndex&&I===L.getReferringComponents("grid",xn.C6).models[0]&&D.add(L.componentIndex)})}}}h&&m(c.findComponents({mainType:"singleAxis",filter:function(x){return x.get("orient",!0)===l}}),"single"),h&&(0,b.each)(_T,function(y){if(h){var x=c.findComponents({mainType:cl(y),filter:function(D){return"category"===D.get("type",!0)}});if(x[0]){var w=new f_;w.add(x[0].componentIndex),a.set(y,w),h=!1}}},this)},o.prototype._makeAutoOrientByTargetAxis=function(){var a;return this.eachTargetAxis(function(l){!a&&(a=l)},this),"y"===a?"vertical":"horizontal"},o.prototype._setDefaultThrottle=function(a){if(a.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var l=this.ecModel.option;this.option.throttle=l.animation&&l.animationDurationUpdate>0?100:20}},o.prototype._updateRangeUse=function(a){var l=this._rangePropMode,c=this.get("rangeMode");(0,b.each)([["start","startValue"],["end","endValue"]],function(h,f){var g=null!=a[h[0]],m=null!=a[h[1]];g&&!m?l[f]="percent":!g&&m?l[f]="value":c?l[f]=c[f]:g&&(l[f]="percent")})},o.prototype.noTarget=function(){return this._noTarget},o.prototype.getFirstTargetAxisModel=function(){var a;return this.eachTargetAxis(function(l,c){null==a&&(a=this.ecModel.getComponent(cl(l),c))},this),a},o.prototype.eachTargetAxis=function(a,l){this._targetAxisInfoMap.each(function(c,h){(0,b.each)(c.indexList,function(f){a.call(l,h,f)})})},o.prototype.getAxisProxy=function(a,l){var c=this.getAxisModel(a,l);if(c)return c.__dzAxisProxy},o.prototype.getAxisModel=function(a,l){var c=this._targetAxisInfoMap.get(a);if(c&&c.indexMap[l])return this.ecModel.getComponent(cl(a),l)},o.prototype.setRawRange=function(a){var l=this.option,c=this.settledOption;(0,b.each)([["start","startValue"],["end","endValue"]],function(h){(null!=a[h[0]]||null!=a[h[1]])&&(l[h[0]]=c[h[0]]=a[h[0]],l[h[1]]=c[h[1]]=a[h[1]])},this),this._updateRangeUse(a)},o.prototype.setCalculatedRange=function(a){var l=this.option;(0,b.each)(["start","startValue","end","endValue"],function(c){l[c]=a[c]})},o.prototype.getPercentRange=function(){var a=this.findRepresentativeAxisProxy();if(a)return a.getDataPercentWindow()},o.prototype.getValueRange=function(a,l){if(null!=a||null!=l)return this.getAxisProxy(a,l).getDataValueWindow();var c=this.findRepresentativeAxisProxy();return c?c.getDataValueWindow():void 0},o.prototype.findRepresentativeAxisProxy=function(a){if(a)return a.__dzAxisProxy;for(var l,c=this._targetAxisInfoMap.keys(),h=0;h<c.length;h++)for(var f=c[h],g=this._targetAxisInfoMap.get(f),m=0;m<g.indexList.length;m++){var y=this.getAxisProxy(f,g.indexList[m]);if(y.hostedBy(this))return y;l||(l=y)}return l},o.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},o.prototype.getOrient=function(){return this._orient},o.type="dataZoom",o.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],o.defaultOption={z:4,filterMode:"filter",start:0,end:100},o}(ma.Z),AO=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.type="dataZoom.select",o}(p_),Nx=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c,h){this.dataZoomModel=a,this.ecModel=l,this.api=c},o.type="dataZoom",o}(ga.Z),Jp=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.type="dataZoom.select",o}(Nx);var RO=z(7951),Vc=b.each,En=It.dt;const dl=function(){function u(o,a,l,c){this._dimName=o,this._axisIndex=a,this.ecModel=c,this._dataZoomModel=l}return u.prototype.hostedBy=function(o){return this._dataZoomModel===o},u.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},u.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},u.prototype.getTargetSeriesModels=function(){var o=[];return this.ecModel.eachSeries(function(a){if(function SO(u){var o=u.get("coordinateSystem");return(0,b.indexOf)(wO,o)>=0}(a)){var l=cl(this._dimName),c=a.getReferringComponents(l,xn.C6).models[0];c&&this._axisIndex===c.componentIndex&&o.push(a)}},this),o},u.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},u.prototype.getMinMaxSpan=function(){return b.clone(this._minMaxSpan)},u.prototype.calculateDataWindow=function(o){var y,a=this._dataExtent,c=this.getAxisModel().axis.scale,h=this._dataZoomModel.getRangePropMode(),f=[0,100],g=[],m=[];Vc(["start","end"],function(D,I){var L=o[D],N=o[D+"Value"];"percent"===h[I]?(null==L&&(L=f[I]),N=c.parse(It.NU(L,f,a))):(y=!0,N=null==N?a[I]:c.parse(N),L=It.NU(N,a,f)),m[I]=N,g[I]=L}),En(m),En(g);var x=this._minMaxSpan;function w(D,I,L,N,Z){var se=Z?"Span":"ValueSpan";Yu(0,D,L,"all",x["min"+se],x["max"+se]);for(var _e=0;_e<2;_e++)I[_e]=It.NU(D[_e],L,N,!0),Z&&(I[_e]=c.parse(I[_e]))}return y?w(m,g,a,f,!1):w(g,m,f,a,!0),{valueWindow:m,percentWindow:g}},u.prototype.reset=function(o){if(o===this._dataZoomModel){var a=this.getTargetSeriesModels();this._dataExtent=function Yh(u,o,a){var l=[1/0,-1/0];Vc(a,function(f){(0,ki.AH)(l,f.getData(),o)});var c=u.getAxisModel(),h=(0,RO.Qw)(c.axis.scale,c,l).calculate();return[h.min,h.max]}(this,this._dimName,a),this._updateMinMaxSpan();var l=this.calculateDataWindow(o.settledOption);this._valueWindow=l.valueWindow,this._percentWindow=l.percentWindow,this._setAxisModel()}},u.prototype.filterData=function(o,a){if(o===this._dataZoomModel){var l=this._dimName,c=this.getTargetSeriesModels(),h=o.get("filterMode"),f=this._valueWindow;"none"!==h&&Vc(c,function(m){var y=m.getData(),x=y.mapDimensionsAll(l);if(x.length){if("weakFilter"===h){var w=y.getStore(),D=b.map(x,function(I){return y.getDimensionIndex(I)},y);y.filterSelf(function(I){for(var L,N,Z,se=0;se<x.length;se++){var _e=w.get(D[se],I),me=!isNaN(_e),De=_e<f[0],Pe=_e>f[1];if(me&&!De&&!Pe)return!0;me&&(Z=!0),De&&(L=!0),Pe&&(N=!0)}return Z&&L&&N})}else Vc(x,function(I){if("empty"===h)m.setData(y=y.map(I,function(N){return function g(m){return m>=f[0]&&m<=f[1]}(N)?N:NaN}));else{var L={};L[I]=f,y.selectRange(L)}});Vc(x,function(I){y.setApproximateExtent(f,I)})}})}},u.prototype._updateMinMaxSpan=function(){var o=this._minMaxSpan={},a=this._dataZoomModel,l=this._dataExtent;Vc(["min","max"],function(c){var h=a.get(c+"Span"),f=a.get(c+"ValueSpan");null!=f&&(f=this.getAxisModel().axis.scale.parse(f)),null!=f?h=It.NU(l[0]+f,l,[0,100],!0):null!=h&&(f=It.NU(h,[0,100],l,!0)-l[0]),o[c+"Span"]=h,o[c+"ValueSpan"]=f},this)},u.prototype._setAxisModel=function(){var o=this.getAxisModel(),a=this._percentWindow,l=this._valueWindow;if(a){var c=It.M9(l,[0,500]);c=Math.min(c,20);var h=o.axis.scale.rawExtentInfo;0!==a[0]&&h.setDeterminedMinMax("min",+l[0].toFixed(c)),100!==a[1]&&h.setDeterminedMinMax("max",+l[1].toFixed(c)),h.freeze()}},u}(),kO={getTargetSeries:function(u){function o(c){u.eachComponent("dataZoom",function(h){h.eachTargetAxis(function(f,g){var m=u.getComponent(cl(f),g);c(f,g,m,h)})})}o(function(c,h,f,g){f.__dzAxisProxy=null});var a=[];o(function(c,h,f,g){f.__dzAxisProxy||(f.__dzAxisProxy=new dl(c,h,g,u),a.push(f.__dzAxisProxy))});var l=(0,b.createHashMap)();return(0,b.each)(a,function(c){(0,b.each)(c.getTargetSeriesModels(),function(h){l.set(h.uid,h)})}),l},overallReset:function(u,o){u.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(l,c){a.getAxisProxy(l,c).reset(a)}),a.eachTargetAxis(function(l,c){a.getAxisProxy(l,c).filterData(a,o)})}),u.eachComponent("dataZoom",function(a){var l=a.findRepresentativeAxisProxy();if(l){var c=l.getDataPercentWindow(),h=l.getDataValueWindow();a.setCalculatedRange({start:c[0],end:c[1],startValue:h[0],endValue:h[1]})}})}};var ev=!1;function Ro(u){ev||(ev=!0,u.registerProcessor(u.PRIORITY.PROCESSOR.FILTER,kO),function NO(u){u.registerAction("dataZoom",function(o,a){var l=function yT(u,o){var h,a=(0,b.createHashMap)(),l=[],c=(0,b.createHashMap)();u.eachComponent({mainType:"dataZoom",query:o},function(x){c.get(x.uid)||g(x)});do{h=!1,u.eachComponent("dataZoom",f)}while(h);function f(x){!c.get(x.uid)&&function m(x){var w=!1;return x.eachTargetAxis(function(D,I){var L=a.get(D);L&&L[I]&&(w=!0)}),w}(x)&&(g(x),h=!0)}function g(x){c.set(x.uid,!0),l.push(x),function y(x){x.eachTargetAxis(function(w,D){(a.get(w)||a.set(w,[]))[D]=!0})}(x)}return l}(a,o);(0,b.each)(l,function(c){c.setRawRange({start:o.start,end:o.end,startValue:o.startValue,endValue:o.endValue})})})}(u),u.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function FO(u){u.registerComponentModel(AO),u.registerComponentView(Jp),Ro(u)}var hl=function u(){},Fx={};function Ld(u,o){Fx[u]=o}function v_(u){return Fx[u]}const BO=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.optionUpdated=function(){u.prototype.optionUpdated.apply(this,arguments);var a=this.ecModel;b.each(this.option.feature,function(l,c){var h=v_(c);h&&(h.getDefaultOption&&(h.defaultOption=h.getDefaultOption(a)),b.merge(l,h.defaultOption))})},o.type="toolbox",o.layoutMode={type:"box",ignoreSize:!0},o.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},o}(ma.Z);function zO(u,o){var a=Va.MY(o.get("padding")),l=o.getItemStyle(["color","opacity"]);return l.fill=o.get("backgroundColor"),new Di.Z({shape:{x:u.x-a[3],y:u.y-a[0],width:u.width+a[1]+a[3],height:u.height+a[0]+a[2],r:o.get("borderRadius")},style:l,silent:!0,z2:-1})}const CT=function(u){function o(){return null!==u&&u.apply(this,arguments)||this}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c,h){var f=this.group;if(f.removeAll(),a.get("show")){var g=+a.get("itemSize"),m="vertical"===a.get("orient"),y=a.get("feature")||{},x=this._features||(this._features={}),w=[];b.each(y,function(L,N){w.push(N)}),new su.Z(this._featureNames||[],w).add(D).update(D).remove(b.curry(D,null)).execute(),this._featureNames=w,function VO(u,o,a){var l=o.getBoxLayoutParams(),c=o.get("padding"),h={width:a.getWidth(),height:a.getHeight()},f=(0,Vr.ME)(l,h,c);(0,Vr.BZ)(o.get("orient"),u,o.get("itemGap"),f.width,f.height),(0,Vr.p$)(u,l,h,c)}(f,a,c),f.add(zO(f.getBoundingRect(),a)),m||f.eachChild(function(L){var N=L.__title,Z=L.ensureState("emphasis"),se=Z.textConfig||(Z.textConfig={}),_e=L.getTextContent(),me=_e&&_e.ensureState("emphasis");if(me&&!b.isFunction(me)&&N){var De=me.style||(me.style={}),Pe=Ce.lP(N,_t.ZP.makeFont(De)),Ie=L.x+f.x,Ue=!1;L.y+f.y+g+Pe.height>c.getHeight()&&(se.position="top",Ue=!0);var Ye=Ue?-5-Pe.height:g+10;Ie+Pe.width/2>c.getWidth()?(se.position=["100%",Ye],De.align="right"):Ie-Pe.width/2<0&&(se.position=[0,Ye],De.align="left")}})}function D(L,N){var De,Z=w[L],se=w[N],_e=y[Z],me=new ka.Z(_e,a,a.ecModel);if(h&&null!=h.newTitle&&h.featureName===Z&&(_e.title=h.newTitle),Z&&!se){if(function Vx(u){return 0===u.indexOf("my")}(Z))De={onclick:me.option.onclick,featureName:Z};else{var Pe=v_(Z);if(!Pe)return;De=new Pe}x[Z]=De}else if(!(De=x[se]))return;De.uid=(0,qn.Kr)("toolbox-feature"),De.model=me,De.ecModel=l,De.api=c;var Ie=De instanceof hl;Z||!se?!me.get("show")||Ie&&De.unusable?Ie&&De.remove&&De.remove(l,c):(function I(L,N,Z){var Pe,Ie,se=L.getModel("iconStyle"),_e=L.getModel(["emphasis","iconStyle"]),me=N instanceof hl&&N.getIcons?N.getIcons():L.get("icon"),De=L.get("title")||{};b.isString(me)?(Pe={})[Z]=me:Pe=me,b.isString(De)?(Ie={})[Z]=De:Ie=De;var ke=L.iconPaths={};b.each(Pe,function(Ue,Ye){var Ke=_n.createIcon(Ue,{},{x:-g/2,y:-g/2,width:g,height:g});Ke.setStyle(se.getItemStyle()),Ke.ensureState("emphasis").style=_e.getItemStyle();var ut=new _t.ZP({style:{text:Ie[Ye],align:_e.get("textAlign"),borderRadius:_e.get("textBorderRadius"),padding:_e.get("textPadding"),fill:null},ignore:!0});Ke.setTextContent(ut),_n.setTooltipConfig({el:Ke,componentModel:a,itemName:Ye,formatterParamsExtra:{title:Ie[Ye]}}),Ke.__title=Ie[Ye],Ke.on("mouseover",function(){var pt=_e.getItemStyle(),yt=m?null==a.get("right")&&"right"!==a.get("left")?"right":"left":null==a.get("bottom")&&"bottom"!==a.get("top")?"bottom":"top";ut.setStyle({fill:_e.get("textFill")||pt.fill||pt.stroke||"#000",backgroundColor:_e.get("textBackgroundColor")}),Ke.setTextConfig({position:_e.get("textPosition")||yt}),ut.ignore=!a.get("showTitle"),c.enterEmphasis(this)}).on("mouseout",function(){"emphasis"!==L.get(["iconStatus",Ye])&&c.leaveEmphasis(this),ut.hide()}),("emphasis"===L.get(["iconStatus",Ye])?Ut.fD:Ut.Mh)(Ke),f.add(Ke),Ke.on("click",b.bind(N.onclick,N,l,c,Ye)),ke[Ye]=Ke})}(me,De,Z),me.setIconStatus=function(ke,Ue){var Ye=this.option,Ke=this.iconPaths;Ye.iconStatus=Ye.iconStatus||{},Ye.iconStatus[ke]=Ue,Ke[ke]&&("emphasis"===Ue?Ut.fD:Ut.Mh)(Ke[ke])},De instanceof hl&&De.render&&De.render(me,l,c,h)):Ie&&De.dispose&&De.dispose(l,c)}},o.prototype.updateView=function(a,l,c,h){b.each(this._features,function(f){f instanceof hl&&f.updateView&&f.updateView(f.model,l,c,h)})},o.prototype.remove=function(a,l){b.each(this._features,function(c){c instanceof hl&&c.remove&&c.remove(a,l)}),this.group.removeAll()},o.prototype.dispose=function(a,l){b.each(this._features,function(c){c instanceof hl&&c.dispose&&c.dispose(a,l)})},o.type="toolbox",o}(ga.Z),Hx=function(u){function o(){return null!==u&&u.apply(this,arguments)||this}return(0,Tt.ZT)(o,u),o.prototype.onclick=function(a,l){var c=this.model,h=c.get("name")||a.get("title.0.text")||"echarts",f="svg"===l.getZr().painter.getType(),g=f?"svg":c.get("type",!0)||"png",m=l.getConnectedDataURL({type:g,backgroundColor:c.get("backgroundColor",!0)||a.get("backgroundColor")||"#fff",connectedBackgroundColor:c.get("connectedBackgroundColor"),excludeComponents:c.get("excludeComponents"),pixelRatio:c.get("pixelRatio")}),y=Ms.Z.browser;if((0,b.isFunction)(MouseEvent)&&(y.newEdge||!y.ie&&!y.edge)){var x=document.createElement("a");x.download=h+"."+g,x.target="_blank",x.href=m;var w=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});x.dispatchEvent(w)}else if(window.navigator.msSaveOrOpenBlob||f){var D=m.split(","),I=D[0].indexOf("base64")>-1,L=f?decodeURIComponent(D[1]):D[1];I&&(L=window.atob(L));var N=h+"."+g;if(window.navigator.msSaveOrOpenBlob){for(var Z=L.length,se=new Uint8Array(Z);Z--;)se[Z]=L.charCodeAt(Z);var _e=new Blob([se]);window.navigator.msSaveOrOpenBlob(_e,N)}else{var me=document.createElement("iframe");document.body.appendChild(me);var De=me.contentWindow,Pe=De.document;Pe.open("image/svg+xml","replace"),Pe.write(L),Pe.close(),De.focus(),Pe.execCommand("SaveAs",!0,N),document.body.removeChild(me)}}else{var Ie=c.get("lang"),ke='<body style="margin:0;"><img src="'+m+'" style="max-width:100%;" title="'+(Ie&&Ie[0]||"")+'" /></body>',Ue=window.open();Ue.document.write(ke),Ue.document.title=h}},o.getDefaultOption=function(a){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:a.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:a.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},o}(hl);var wT="__ec_magicType_stack__",HO=[["line","bar"],["stack"]],ST=function(u){function o(){return null!==u&&u.apply(this,arguments)||this}return(0,Tt.ZT)(o,u),o.prototype.getIcons=function(){var a=this.model,l=a.get("icon"),c={};return b.each(a.get("type"),function(h){l[h]&&(c[h]=l[h])}),c},o.getDefaultOption=function(a){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:a.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},o.prototype.onclick=function(a,l,c){var h=this.model,f=h.get(["seriesIndex",c]);if(g_[c]){var g={series:[]};b.each(HO,function(w){b.indexOf(w,c)>=0&&b.each(w,function(D){h.setIconStatus(D,"normal")})}),h.setIconStatus(c,"emphasis"),a.eachComponent({mainType:"series",query:null==f?null:{seriesIndex:f}},function(w){var L=g_[c](w.subType,w.id,w,h);L&&(b.defaults(L,w.option),g.series.push(L));var N=w.coordinateSystem;if(N&&"cartesian2d"===N.type&&("line"===c||"bar"===c)){var Z=N.getAxesByScale("ordinal")[0];if(Z){var _e=Z.dim+"Axis",De=w.getReferringComponents(_e,xn.C6).models[0].componentIndex;g[_e]=g[_e]||[];for(var Pe=0;Pe<=De;Pe++)g[_e][De]=g[_e][De]||{};g[_e][De].boundaryGap="bar"===c}}});var y,x=c;"stack"===c&&(y=b.merge({stack:h.option.title.tiled,tiled:h.option.title.stack},h.option.title),"emphasis"!==h.get(["iconStatus",c])&&(x="tiled")),l.dispatchAction({type:"changeMagicType",currentType:x,newOption:g,newTitle:y,featureName:"magicType"})}},o}(hl),g_={line:function(u,o,a,l){if("bar"===u)return b.merge({id:o,type:"line",data:a.get("data"),stack:a.get("stack"),markPoint:a.get("markPoint"),markLine:a.get("markLine")},l.get(["option","line"])||{},!0)},bar:function(u,o,a,l){if("line"===u)return b.merge({id:o,type:"bar",data:a.get("data"),stack:a.get("stack"),markPoint:a.get("markPoint"),markLine:a.get("markLine")},l.get(["option","bar"])||{},!0)},stack:function(u,o,a,l){var c=a.get("stack")===wT;if("line"===u||"bar"===u)return l.setIconStatus("stack",c?"normal":"emphasis"),b.merge({id:o,stack:c?"":wT},l.get(["option","stack"])||{},!0)}};ip.zl({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(u,o){o.mergeOption(u.newOption)});const ur=ST;var Ai=new Array(60).join("-");function UO(u){var o=[];return b.each(u,function(a,l){var c=a.categoryAxis,f=a.valueAxis.dim,g=[" "].concat(b.map(a.series,function(I){return I.name})),m=[c.model.getCategories()];b.each(a.series,function(I){var L=I.getRawData();m.push(I.getRawData().mapArray(L.mapDimension(f),function(N){return N}))});for(var y=[g.join("\t")],x=0;x<m[0].length;x++){for(var w=[],D=0;D<m.length;D++)w.push(m[D][x]);y.push(w.join("\t"))}o.push(y.join("\n"))}),o.join("\n\n"+Ai+"\n\n")}function DT(u){return b.map(u,function(o){var a=o.getRawData(),l=[o.name],c=[];return a.each(a.dimensions,function(){for(var h=arguments.length,f=arguments[h-1],g=a.getName(f),m=0;m<h-1;m++)c[m]=arguments[m];l.push((g?g+"\t":"")+c.join("\t"))}),l.join("\n")}).join("\n\n"+Ai+"\n\n")}function m_(u){return u.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var __=new RegExp("[\t]+","g");var WO=function(u){function o(){return null!==u&&u.apply(this,arguments)||this}return(0,Tt.ZT)(o,u),o.prototype.onclick=function(a,l){setTimeout(function(){l.dispatchAction({type:"hideTip"})});var c=l.getDom(),h=this.model;this._dom&&c.removeChild(this._dom);var f=document.createElement("div");f.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",f.style.backgroundColor=h.get("backgroundColor")||"#fff";var g=document.createElement("h4"),m=h.get("lang")||[];g.innerHTML=m[0]||h.get("title"),g.style.cssText="margin:10px 20px",g.style.color=h.get("textColor");var y=document.createElement("div"),x=document.createElement("textarea");y.style.cssText="overflow:auto";var w=h.get("optionToContent"),D=h.get("contentToOption"),I=function MT(u){var o=function cr(u){var o={},a=[],l=[];return u.eachRawSeries(function(c){var h=c.coordinateSystem;if(!h||"cartesian2d"!==h.type&&"polar"!==h.type)a.push(c);else{var f=h.getBaseAxis();if("category"===f.type){var g=f.dim+"_"+f.index;o[g]||(o[g]={categoryAxis:f,valueAxis:h.getOtherAxis(f),series:[]},l.push({axisDim:f.dim,axisIndex:f.index})),o[g].series.push(c)}else a.push(c)}}),{seriesGroupByCategoryAxis:o,other:a,meta:l}}(u);return{value:b.filter([UO(o.seriesGroupByCategoryAxis),DT(o.other)],function(a){return!!a.replace(/[\n\t\s]/g,"")}).join("\n\n"+Ai+"\n\n"),meta:o.meta}}(a);if(b.isFunction(w)){var L=w(l.getOption());b.isString(L)?y.innerHTML=L:b.isDom(L)&&y.appendChild(L)}else{x.readOnly=h.get("readOnly");var N=x.style;N.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",N.color=h.get("textColor"),N.borderColor=h.get("textareaBorderColor"),N.backgroundColor=h.get("textareaColor"),x.value=I.value,y.appendChild(x)}var Z=I.meta,se=document.createElement("div");se.style.cssText="position:absolute;bottom:5px;left:0;right:0";var _e="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",me=document.createElement("div"),De=document.createElement("div");_e+=";background-color:"+h.get("buttonColor"),_e+=";color:"+h.get("buttonTextColor");var Pe=this;function Ie(){c.removeChild(f),Pe._dom=null}(0,nl.Oo)(me,"click",Ie),(0,nl.Oo)(De,"click",function(){if(null==D&&null!=w||null!=D&&null==w)Ie();else{var ke;try{ke=b.isFunction(D)?D(y,l.getOption()):function GO(u,o){var a=u.split(new RegExp("\n*"+Ai+"\n*","g")),l={series:[]};return b.each(a,function(c,h){if(function TT(u){if(u.slice(0,u.indexOf("\n")).indexOf("\t")>=0)return!0}(c)){var f=function hs(u){for(var o=u.split(/\n+/g),a=m_(o.shift()).split(__),l=[],c=b.map(a,function(m){return{name:m,data:[]}}),h=0;h<o.length;h++){var f=m_(o[h]).split(__);l.push(f.shift());for(var g=0;g<f.length;g++)c[g]&&(c[g].data[h]=f[g])}return{series:c,categories:l}}(c),g=o[h],m=g.axisDim+"Axis";g&&(l[m]=l[m]||[],l[m][g.axisIndex]={data:f.categories},l.series=l.series.concat(f.series))}else f=function Xh(u){for(var o=u.split(/\n+/g),a=m_(o.shift()),l=[],c=0;c<o.length;c++){var h=m_(o[c]);if(h){var f=h.split(__),g="",m=void 0,y=!1;isNaN(f[0])?(y=!0,g=f[0],f=f.slice(1),l[c]={name:g,value:[]},m=l[c].value):m=l[c]=[];for(var x=0;x<f.length;x++)m.push(+f[x]);1===m.length&&(y?l[c].value=m[0]:l[c]=m[0])}}return{name:a,data:l}}(c),l.series.push(f)}),l}(x.value,Z)}catch(Ue){throw Ie(),new Error("Data view format error "+Ue)}ke&&l.dispatchAction({type:"changeDataView",newOption:ke}),Ie()}}),me.innerHTML=m[1],De.innerHTML=m[2],De.style.cssText=me.style.cssText=_e,!h.get("readOnly")&&se.appendChild(De),se.appendChild(me),f.appendChild(g),f.appendChild(y),f.appendChild(se),y.style.height=c.clientHeight-80+"px",c.appendChild(f),this._dom=f},o.prototype.remove=function(a,l){this._dom&&l.getDom().removeChild(this._dom)},o.prototype.dispose=function(a,l){this.remove(a,l)},o.getDefaultOption=function(a){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:a.getLocaleModel().get(["toolbox","dataView","title"]),lang:a.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},o}(hl);function X5(u,o){return b.map(u,function(a,l){var c=o&&o[l];if(b.isObject(c)&&!b.isArray(c)){b.isObject(a)&&!b.isArray(a)||(a={value:a});var f=null!=c.name&&null==a.name;return a=b.defaults(a,c),f&&delete a.name,a}return a})}ip.zl({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(u,o){var a=[];b.each(u.newOption.series,function(l){var c=o.getSeriesByName(l.name)[0];if(c){var h=c.get("data");a.push({name:l.name,data:X5(l.data,h)})}else a.push(b.extend({type:"scatter"},l))}),o.mergeOption(b.defaults({series:a},u.newOption))});const $5=WO;var Ux=b.each,Gx=(0,xn.Yf)();function y_(u){var o=Gx(u);return o.snapshots||(o.snapshots=[{}]),o.snapshots}var YO=function(u){function o(){return null!==u&&u.apply(this,arguments)||this}return(0,Tt.ZT)(o,u),o.prototype.onclick=function(a,l){(function Wx(u){Gx(u).snapshots=null})(a),l.dispatchAction({type:"restore",from:this.uid})},o.getDefaultOption=function(a){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:a.getLocaleModel().get(["toolbox","restore","title"])}},o}(hl);ip.zl({type:"restore",event:"restore",update:"prepareAndUpdate"},function(u,o){o.resetOption("recreate")});const XO=YO;var $O=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],jx=function(){function u(o,a,l){var c=this;this._targetInfoList=[];var h=Zx(a,o);(0,b.each)(x_,function(f,g){(!l||!l.include||(0,b.indexOf)(l.include,g)>=0)&&f(h,c._targetInfoList)})}return u.prototype.setOutputRanges=function(o,a){return this.matchOutputRanges(o,a,function(l,c,h){if((l.coordRanges||(l.coordRanges=[])).push(c),!l.coordRange){l.coordRange=c;var f=w_[l.brushType](0,h,c);l.__rangeOffset={offset:Yx[l.brushType](f.values,l.range,[1,1]),xyMinMax:f.xyMinMax}}}),o},u.prototype.matchOutputRanges=function(o,a,l){(0,b.each)(o,function(c){var h=this.findTargetInfo(c,a);h&&!0!==h&&(0,b.each)(h.coordSyses,function(f){var g=w_[c.brushType](1,f,c.range,!0);l(c,g.values,f,a)})},this)},u.prototype.setInputRanges=function(o,a){(0,b.each)(o,function(l){var c=this.findTargetInfo(l,a);if(l.range=l.range||[],c&&!0!==c){l.panelId=c.panelId;var h=w_[l.brushType](0,c.coordSys,l.coordRange),f=l.__rangeOffset;l.range=f?Yx[l.brushType](h.values,f.offset,function QO(u,o){var a=Xx(u),l=Xx(o),c=[a[0]/l[0],a[1]/l[1]];return isNaN(c[0])&&(c[0]=1),isNaN(c[1])&&(c[1]=1),c}(h.xyMinMax,f.xyMinMax)):h.values}},this)},u.prototype.makePanelOpts=function(o,a){return(0,b.map)(this._targetInfoList,function(l){var c=l.getPanelRect();return{panelId:l.panelId,defaultBrushType:a?a(l):null,clipPath:Rb(c),isTargetByCursor:wm(c,o,l.coordSysModel),getLinearBrushOtherExtent:pD(c)}})},u.prototype.controlSeries=function(o,a,l){var c=this.findTargetInfo(o,l);return!0===c||c&&(0,b.indexOf)(c.coordSyses,a.coordinateSystem)>=0},u.prototype.findTargetInfo=function(o,a){for(var l=this._targetInfoList,c=Zx(a,o),h=0;h<l.length;h++){var f=l[h],g=o.panelId;if(g){if(f.panelId===g)return f}else for(var m=0;m<C_.length;m++)if(C_[m](c,f))return f}return!0},u}();function b_(u){return u[0]>u[1]&&u.reverse(),u}function Zx(u,o){return(0,xn.pm)(u,o,{includeMainTypes:$O})}var x_={grid:function(u,o){var a=u.xAxisModels,l=u.yAxisModels,c=u.gridModels,h=(0,b.createHashMap)(),f={},g={};!a&&!l&&!c||((0,b.each)(a,function(m){var y=m.axis.grid.model;h.set(y.id,y),f[y.id]=!0}),(0,b.each)(l,function(m){var y=m.axis.grid.model;h.set(y.id,y),g[y.id]=!0}),(0,b.each)(c,function(m){h.set(m.id,m),f[m.id]=!0,g[m.id]=!0}),h.each(function(m){var x=[];(0,b.each)(m.coordinateSystem.getCartesians(),function(w,D){((0,b.indexOf)(a,w.getAxis("x").model)>=0||(0,b.indexOf)(l,w.getAxis("y").model)>=0)&&x.push(w)}),o.push({panelId:"grid--"+m.id,gridModel:m,coordSysModel:m,coordSys:x[0],coordSyses:x,getPanelRect:KO.grid,xAxisDeclared:f[m.id],yAxisDeclared:g[m.id]})}))},geo:function(u,o){(0,b.each)(u.geoModels,function(a){var l=a.coordinateSystem;o.push({panelId:"geo--"+a.id,geoModel:a,coordSysModel:a,coordSys:l,coordSyses:[l],getPanelRect:KO.geo})})}},C_=[function(u,o){var a=u.xAxisModel,l=u.yAxisModel,c=u.gridModel;return!c&&a&&(c=a.axis.grid.model),!c&&l&&(c=l.axis.grid.model),c&&c===o.gridModel},function(u,o){var a=u.geoModel;return a&&a===o.geoModel}],KO={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var u=this.coordSys,o=u.getBoundingRect().clone();return o.applyTransform(_n.getTransform(u)),o}},w_={lineX:(0,b.curry)(ET,0),lineY:(0,b.curry)(ET,1),rect:function(u,o,a,l){var c=u?o.pointToData([a[0][0],a[1][0]],l):o.dataToPoint([a[0][0],a[1][0]],l),h=u?o.pointToData([a[0][1],a[1][1]],l):o.dataToPoint([a[0][1],a[1][1]],l),f=[b_([c[0],h[0]]),b_([c[1],h[1]])];return{values:f,xyMinMax:f}},polygon:function(u,o,a,l){var c=[[1/0,-1/0],[1/0,-1/0]];return{values:(0,b.map)(a,function(f){var g=u?o.pointToData(f,l):o.dataToPoint(f,l);return c[0][0]=Math.min(c[0][0],g[0]),c[1][0]=Math.min(c[1][0],g[1]),c[0][1]=Math.max(c[0][1],g[0]),c[1][1]=Math.max(c[1][1],g[1]),g}),xyMinMax:c}}};function ET(u,o,a,l){var c=a.getAxis(["x","y"][u]),h=b_((0,b.map)([0,1],function(g){return o?c.coordToData(c.toLocalCoord(l[g]),!0):c.toGlobalCoord(c.dataToCoord(l[g]))})),f=[];return f[u]=h,f[1-u]=[NaN,NaN],{values:h,xyMinMax:f}}var Yx={lineX:(0,b.curry)(Od,0),lineY:(0,b.curry)(Od,1),rect:function(u,o,a){return[[u[0][0]-a[0]*o[0][0],u[0][1]-a[0]*o[0][1]],[u[1][0]-a[1]*o[1][0],u[1][1]-a[1]*o[1][1]]]},polygon:function(u,o,a){return(0,b.map)(u,function(l,c){return[l[0]-a[0]*o[c][0],l[1]-a[1]*o[c][1]]})}};function Od(u,o,a,l){return[o[0]-l[u]*a[0],o[1]-l[u]*a[1]]}function Xx(u){return u?[u[0][1]-u[0][0],u[1][1]-u[1][0]]:[NaN,NaN]}const nv=jx;var K5=z(157),$x=b.each,Q5=(0,xn.g0)("toolbox-dataZoom_"),qO=function(u){function o(){return null!==u&&u.apply(this,arguments)||this}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c,h){this._brushController||(this._brushController=new Ns(c.getZr()),this._brushController.on("brush",b.bind(this._onBrush,this)).mount()),function ek(u,o,a,l,c){var h=a._isZoomActive;l&&"takeGlobalCursor"===l.type&&(h="dataZoomSelect"===l.key&&l.dataZoomSelectActive),a._isZoomActive=h,u.setIconStatus("zoom",h?"emphasis":"normal");var g=new nv(S_(u),o,{include:["grid"]}).makePanelOpts(c,function(m){return m.xAxisDeclared&&!m.yAxisDeclared?"lineX":!m.xAxisDeclared&&m.yAxisDeclared?"lineY":"rect"});a._brushController.setPanels(g).enableBrush(!(!h||!g.length)&&{brushType:"auto",brushStyle:u.getModel("brushStyle").getItemStyle()})}(a,l,this,h,c),function AT(u,o){u.setIconStatus("back",function ZO(u){return y_(u).length}(o)>1?"emphasis":"normal")}(a,l)},o.prototype.onclick=function(a,l,c){JO[c].call(this)},o.prototype.remove=function(a,l){this._brushController&&this._brushController.unmount()},o.prototype.dispose=function(a,l){this._brushController&&this._brushController.dispose()},o.prototype._onBrush=function(a){var l=a.areas;if(a.isEnd&&l.length){var c={},h=this.ecModel;this._brushController.updateCovers([]),new nv(S_(this.model),h,{include:["grid"]}).matchOutputRanges(l,h,function(y,x,w){if("cartesian2d"===w.type){var D=y.brushType;"rect"===D?(g("x",w,x[0]),g("y",w,x[1])):g({lineX:"x",lineY:"y"}[D],w,x)}}),function tv(u,o){var a=y_(u);Ux(o,function(l,c){for(var h=a.length-1;h>=0&&!a[h][c];h--);if(h<0){var g=u.queryComponents({mainType:"dataZoom",subType:"select",id:c})[0];if(g){var m=g.getPercentRange();a[0][c]={dataZoomId:c,start:m[0],end:m[1]}}}}),a.push(o)}(h,c),this._dispatchZoomAction(c)}function g(y,x,w){var D=x.getAxis(y),I=D.model,L=function m(y,x,w){var D;return w.eachComponent({mainType:"dataZoom",subType:"select"},function(I){I.getAxisModel(y,x.componentIndex)&&(D=I)}),D}(y,I,h),N=L.findRepresentativeAxisProxy(I).getMinMaxSpan();(null!=N.minValueSpan||null!=N.maxValueSpan)&&(w=Yu(0,w.slice(),D.scale.getExtent(),0,N.minValueSpan,N.maxValueSpan)),L&&(c[L.id]={dataZoomId:L.id,startValue:w[0],endValue:w[1]})}},o.prototype._dispatchZoomAction=function(a){var l=[];$x(a,function(c,h){l.push(b.clone(c))}),l.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:l})},o.getDefaultOption=function(a){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:a.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},o}(hl),JO={zoom:function(){this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!this._isZoomActive})},back:function(){this._dispatchZoomAction(function jO(u){var o=y_(u),a=o[o.length-1];o.length>1&&o.pop();var l={};return Ux(a,function(c,h){for(var f=o.length-1;f>=0;f--)if(c=o[f][h]){l[h]=c;break}}),l}(this.ecModel))}};function S_(u){var o={xAxisIndex:u.get("xAxisIndex",!0),yAxisIndex:u.get("yAxisIndex",!0),xAxisId:u.get("xAxisId",!0),yAxisId:u.get("yAxisId",!0)};return null==o.xAxisIndex&&null==o.xAxisId&&(o.xAxisIndex="all"),null==o.yAxisIndex&&null==o.yAxisId&&(o.yAxisIndex="all"),o}(0,K5.f)("dataZoom",function(u){var o=u.getComponent("toolbox",0),a=["feature","dataZoom"];if(o&&null!=o.get(a)){var l=o.getModel(a),c=[],h=S_(l),f=(0,xn.pm)(u,h);return $x(f.xAxisModels,function(m){return g(m,"xAxis","xAxisIndex")}),$x(f.yAxisModels,function(m){return g(m,"yAxis","yAxisIndex")}),c}function g(m,y,x){var w=m.componentIndex,D={type:"select",$fromToolbox:!0,filterMode:l.get("filterMode",!0)||"filter",id:Q5+y+w};D[x]=w,c.push(D)}});const IT=qO,nk=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.type="tooltip",o.dependencies=["axisPointer"],o.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},o}(ma.Z);function Kx(u){var o=u.get("confine");return null!=o?!!o:"richText"===u.get("renderMode")}function RT(u){if(Ms.Z.domSupported)for(var o=document.documentElement.style,a=0,l=u.length;a<l;a++)if(u[a]in o)return u[a]}var Qx=RT(["transform","webkitTransform","OTransform","MozTransform","msTransform"]);function qx(u,o){if(!u)return o;o=(0,Va.zW)(o,!0);var a=u.indexOf(o);return(u=-1===a?o:"-"+u.slice(0,a)+"-"+o).toLowerCase()}var rk=qx(RT(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),"transition"),Jx=qx(Qx,"transform"),J5="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Ms.Z.transform3dSupported?"will-change:transform;":"");function ik(u,o,a){var l=u.toFixed(0)+"px",c=o.toFixed(0)+"px";if(!Ms.Z.transformSupported)return a?"top:"+c+";left:"+l+";":[["top",c],["left",l]];var h=Ms.Z.transform3dSupported,f="translate"+(h?"3d":"")+"("+l+","+c+(h?",0":"")+")";return a?"top:0;left:0;"+Jx+":"+f+";":[["top",0],["left",0],[Qx,f]]}function ak(u,o,a,l,c){var h=o&&o.painter;if(a){var f=h&&h.getViewportRoot();f&&(0,V.YB)(u,f,document.body,l,c)}else{u[0]=l,u[1]=c;var g=h&&h.getViewportRootOffset();g&&(u[0]+=g.offsetLeft,u[1]+=g.offsetTop)}u[2]=u[0]/o.getWidth(),u[3]=u[1]/o.getHeight()}const az=function(){function u(o,a,l){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,Ms.Z.wxa)return null;var c=document.createElement("div");c.domBelongToZr=!0,this.el=c;var h=this._zr=a.getZr(),f=this._appendToBody=l&&l.appendToBody;ak(this._styleCoord,h,f,a.getWidth()/2,a.getHeight()/2),f?document.body.appendChild(c):o.appendChild(c),this._container=o;var g=this;c.onmouseenter=function(){g._enterable&&(clearTimeout(g._hideTimeout),g._show=!0),g._inContent=!0},c.onmousemove=function(m){if(m=m||window.event,!g._enterable){var y=h.handler,x=h.painter.getViewportRoot();(0,nl.OD)(x,m,!0),y.dispatch("mousemove",m)}},c.onmouseleave=function(){g._inContent=!1,g._enterable&&g._show&&g.hideLater(g._hideDelay)}}return u.prototype.update=function(o){var a=this._container,l=function OT(u,o){var a=u.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(u);return a?o?a[o]:a:null}(a,"position"),c=a.style;"absolute"!==c.position&&"absolute"!==l&&(c.position="relative"),o.get("alwaysShowContent")&&this._moveIfResized(),this.el.className=o.get("className")||""},u.prototype.show=function(o,a){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var l=this.el,c=l.style,h=this._styleCoord;l.innerHTML?c.cssText=J5+function rz(u,o,a){var l=[],c=u.get("transitionDuration"),h=u.get("backgroundColor"),f=u.get("shadowBlur"),g=u.get("shadowColor"),m=u.get("shadowOffsetX"),y=u.get("shadowOffsetY"),x=u.getModel("textStyle"),w=(0,ca.d_)(u,"html");return l.push("box-shadow:"+m+"px "+y+"px "+f+"px "+g),o&&c&&l.push(function tz(u,o){var a="cubic-bezier(0.23,1,0.32,1)",l=" "+u/2+"s "+a,c="opacity"+l+",visibility"+l;return o||(l=" "+u+"s "+a,c+=Ms.Z.transformSupported?","+Jx+l:",left"+l+",top"+l),rk+":"+c}(c,a)),h&&l.push("background-color:"+h),(0,b.each)(["width","color","radius"],function(I){var L="border-"+I,N=(0,Va.zW)(L),Z=u.get(N);null!=Z&&l.push(L+":"+Z+("color"===I?"":"px"))}),l.push(function nz(u){var o=[],a=u.get("fontSize"),l=u.getTextColor();l&&o.push("color:"+l),o.push("font:"+u.getFont()),a&&o.push("line-height:"+Math.round(3*a/2)+"px");var c=u.get("textShadowColor"),h=u.get("textShadowBlur")||0,f=u.get("textShadowOffsetX")||0,g=u.get("textShadowOffsetY")||0;return c&&h&&o.push("text-shadow:"+f+"px "+g+"px "+h+"px "+c),(0,b.each)(["decoration","align"],function(m){var y=u.get(m);y&&o.push("text-"+m+":"+y)}),o.join(";")}(x)),null!=w&&l.push("padding:"+(0,Va.MY)(w).join("px ")+"px"),l.join(";")+";"}(o,!this._firstShow,this._longHide)+ik(h[0],h[1],!0)+"border-color:"+(0,Va.Lz)(a)+";"+(o.get("extraCssText")||"")+";pointer-events:"+(this._enterable?"auto":"none"):c.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},u.prototype.setContent=function(o,a,l,c,h){var f=this.el;if(null!=o){var g="";if((0,b.isString)(h)&&"item"===l.get("trigger")&&!Kx(l)&&(g=function ez(u,o,a){if(!(0,b.isString)(a)||"inside"===a)return"";var l=u.get("backgroundColor"),c=u.get("borderWidth");o=(0,Va.Lz)(o);var y,h=function kT(u){return"left"===u?"right":"right"===u?"left":"top"===u?"bottom":"top"}(a),f=Math.max(1.5*Math.round(c),6),g="",m=Jx+":";(0,b.indexOf)(["left","right"],h)>-1?(g+="top:50%",m+="translateY(-50%) rotate("+(y="left"===h?-225:-45)+"deg)"):(g+="left:50%",m+="translateX(-50%) rotate("+(y="top"===h?225:45)+"deg)");var x=y*Math.PI/180,w=f+c,D=w*Math.abs(Math.cos(x))+w*Math.abs(Math.sin(x)),L=o+" solid "+c+"px;";return'<div style="'+["position:absolute;width:"+f+"px;height:"+f+"px;",(g+=";"+h+":-"+Math.round(100*((D-Math.SQRT2*c)/2+Math.SQRT2*c-(D-w)/2))/100+"px")+";"+m+";","border-bottom:"+L,"border-right:"+L,"background-color:"+l+";"].join("")+'"></div>'}(l,c,h)),(0,b.isString)(o))f.innerHTML=o+g;else if(o){f.innerHTML="",(0,b.isArray)(o)||(o=[o]);for(var m=0;m<o.length;m++)(0,b.isDom)(o[m])&&o[m].parentNode!==f&&f.appendChild(o[m]);if(g&&f.childNodes.length){var y=document.createElement("div");y.innerHTML=g,f.appendChild(y)}}}else f.innerHTML=""},u.prototype.setEnterable=function(o){this._enterable=o},u.prototype.getSize=function(){var o=this.el;return[o.offsetWidth,o.offsetHeight]},u.prototype.moveTo=function(o,a){var l=this._styleCoord;if(ak(l,this._zr,this._appendToBody,o,a),null!=l[0]&&null!=l[1]){var c=this.el.style,h=ik(l[0],l[1]);(0,b.each)(h,function(f){c[f[0]]=f[1]})}},u.prototype._moveIfResized=function(){var a=this._styleCoord[3];this.moveTo(this._styleCoord[2]*this._zr.getWidth(),a*this._zr.getHeight())},u.prototype.hide=function(){var o=this,a=this.el.style;a.visibility="hidden",a.opacity="0",Ms.Z.transform3dSupported&&(a.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return o._longHide=!0},500)},u.prototype.hideLater=function(o){this._show&&(!this._inContent||!this._enterable)&&(o?(this._hideDelay=o,this._show=!1,this._hideTimeout=setTimeout((0,b.bind)(this.hide,this),o)):this.hide())},u.prototype.isShow=function(){return this._show},u.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},u}();function kd(u){return Math.max(0,u)}function rv(u){var o=kd(u.shadowBlur||0),a=kd(u.shadowOffsetX||0),l=kd(u.shadowOffsetY||0);return{left:kd(o-a),right:kd(o+a),top:kd(o-l),bottom:kd(o+l)}}function iv(u,o,a,l){u[0]=a,u[1]=l,u[2]=u[0]/o.getWidth(),u[3]=u[1]/o.getHeight()}const av=function(){function u(o){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=o.getZr(),iv(this._styleCoord,this._zr,o.getWidth()/2,o.getHeight()/2)}return u.prototype.update=function(o){o.get("alwaysShowContent")&&this._moveIfResized()},u.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},u.prototype.setContent=function(o,a,l,c,h){var f=this;b.isObject(o)&&(0,_a._y)(""),this.el&&this._zr.remove(this.el);var g=l.getModel("textStyle");this.el=new _t.ZP({style:{rich:a.richTextStyles,text:o,lineHeight:22,borderWidth:1,borderColor:c,textShadowColor:g.get("textShadowColor"),fill:l.get(["textStyle","color"]),padding:(0,ca.d_)(l,"richText"),verticalAlign:"top",align:"left"},z:l.get("z")}),b.each(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(y){f.el.style[y]=l.get(y)}),b.each(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(y){f.el.style[y]=g.get(y)||0}),this._zr.add(this.el);var m=this;this.el.on("mouseover",function(){m._enterable&&(clearTimeout(m._hideTimeout),m._show=!0),m._inContent=!0}),this.el.on("mouseout",function(){m._enterable&&m._show&&m.hideLater(m._hideDelay),m._inContent=!1})},u.prototype.setEnterable=function(o){this._enterable=o},u.prototype.getSize=function(){var o=this.el,a=this.el.getBoundingRect(),l=rv(o.style);return[a.width+l.left+l.right,a.height+l.top+l.bottom]},u.prototype.moveTo=function(o,a){var l=this.el;if(l){var c=this._styleCoord;iv(c,this._zr,o,a),o=c[0],a=c[1];var h=l.style,f=kd(h.borderWidth||0),g=rv(h);l.x=o+f+g.left,l.y=a+f+g.top,l.markRedraw()}},u.prototype._moveIfResized=function(){var a=this._styleCoord[3];this.moveTo(this._styleCoord[2]*this._zr.getWidth(),a*this._zr.getHeight())},u.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},u.prototype.hideLater=function(o){this._show&&(!this._inContent||!this._enterable)&&(o?(this._hideDelay=o,this._show=!1,this._hideTimeout=setTimeout(b.bind(this.hide,this),o)):this.hide())},u.prototype.isShow=function(){return this._show},u.prototype.dispose=function(){this._zr.remove(this.el)},u}();var NT=z(999),e1=z(4756),t1=new Di.Z({shape:{x:-1,y:-1,width:2,height:2}});function Nd(u,o,a){var c,l=o.ecModel;a?(c=new ka.Z(a,l,l),c=new ka.Z(o.option,c,l)):c=o;for(var h=u.length-1;h>=0;h--){var f=u[h];f&&(f instanceof ka.Z&&(f=f.get("tooltip",!0)),(0,b.isString)(f)&&(f={formatter:f}),f&&(c=new ka.Z(f,c,l)))}return c}function n1(u,o){return u.dispatchAction||(0,b.bind)(o.dispatchAction,o)}function BT(u){return"center"===u||"middle"===u}const sk=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.init=function(a,l){if(!Ms.Z.node&&l.getDom()){var c=a.getComponent("tooltip"),h=this._renderMode=(0,xn.U9)(c.get("renderMode"));this._tooltipContent="richText"===h?new av(l):new az(l.getDom(),l,{appendToBody:c.get("appendToBody",!0)})}},o.prototype.render=function(a,l,c){if(!Ms.Z.node&&c.getDom()){this.group.removeAll(),this._tooltipModel=a,this._ecModel=l,this._api=c,this._alwaysShowContent=a.get("alwaysShowContent");var h=this._tooltipContent;h.update(a),h.setEnterable(a.get("enterable")),this._initGlobalListener(),this._keepShow(),"richText"!==this._renderMode&&a.get("transitionDuration")?(0,Uo.T9)(this,"_updatePosition",50,"fixRate"):(0,Uo.ZH)(this,"_updatePosition")}},o.prototype._initGlobalListener=function(){var l=this._tooltipModel.get("triggerOn");FM("itemTooltip",this._api,(0,b.bind)(function(c,h,f){"none"!==l&&(l.indexOf(c)>=0?this._tryShow(h,f):"leave"===c&&this._hide(f))},this))},o.prototype._keepShow=function(){var a=this._tooltipModel,l=this._ecModel,c=this._api,h=a.get("triggerOn");if(null!=this._lastX&&null!=this._lastY&&"none"!==h&&"click"!==h){var f=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!c.isDisposed()&&f.manuallyShowTip(a,l,c,{x:f._lastX,y:f._lastY,dataByCoordSys:f._lastDataByCoordSys})})}},o.prototype.manuallyShowTip=function(a,l,c,h){if(h.from!==this.uid&&!Ms.Z.node&&c.getDom()){var f=n1(h,c);this._ticket="";var g=h.dataByCoordSys,m=function yu(u,o,a){var l=(0,xn.zH)(u).queryOptionMap,c=l.keys()[0];if(c&&"series"!==c){var m,f=(0,xn.HZ)(o,c,l.get(c),{useDefault:!1,enableAll:!1,enableNone:!1}).models[0];if(f&&(a.getViewOfComponentModel(f).group.traverse(function(y){var x=(0,Mr.A)(y).tooltipConfig;if(x&&x.name===u.name)return m=y,!0}),m))return{componentMainType:c,componentIndex:f.componentIndex,el:m}}}(h,l,c);if(m){var y=m.el.getBoundingRect().clone();y.applyTransform(m.el.transform),this._tryShow({offsetX:y.x+y.width/2,offsetY:y.y+y.height/2,target:m.el,position:h.position,positionDefault:"bottom"},f)}else if(h.tooltip&&null!=h.x&&null!=h.y){var x=t1;x.x=h.x,x.y=h.y,x.update(),(0,Mr.A)(x).tooltipConfig={name:null,option:h.tooltip},this._tryShow({offsetX:h.x,offsetY:h.y,target:x},f)}else if(g)this._tryShow({offsetX:h.x,offsetY:h.y,position:h.position,dataByCoordSys:g,tooltipOption:h.tooltipOption},f);else if(null!=h.seriesIndex){if(this._manuallyAxisShowTip(a,l,c,h))return;var w=HM(h,l),D=w.point[0],I=w.point[1];null!=D&&null!=I&&this._tryShow({offsetX:D,offsetY:I,target:w.el,position:h.position,positionDefault:"bottom"},f)}else null!=h.x&&null!=h.y&&(c.dispatchAction({type:"updateAxisPointer",x:h.x,y:h.y}),this._tryShow({offsetX:h.x,offsetY:h.y,position:h.position,target:c.getZr().findHover(h.x,h.y).target},f))}},o.prototype.manuallyHideTip=function(a,l,c,h){!this._alwaysShowContent&&this._tooltipModel&&this._tooltipContent.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,h.from!==this.uid&&this._hide(n1(h,c))},o.prototype._manuallyAxisShowTip=function(a,l,c,h){var f=h.seriesIndex,g=h.dataIndex,m=l.getComponent("axisPointer").coordSysAxesInfo;if(null!=f&&null!=g&&null!=m){var y=l.getSeriesByIndex(f);if(y&&"axis"===Nd([y.getData().getItemModel(g),y,(y.coordinateSystem||{}).model],this._tooltipModel).get("trigger"))return c.dispatchAction({type:"updateAxisPointer",seriesIndex:f,dataIndex:g,position:h.position}),!0}},o.prototype._tryShow=function(a,l){var c=a.target;if(this._tooltipModel){this._lastX=a.offsetX,this._lastY=a.offsetY;var f=a.dataByCoordSys;if(f&&f.length)this._showAxisTooltip(f,a);else if(c){var g,m;this._lastDataByCoordSys=null,(0,I0.o)(c,function(y){return null!=(0,Mr.A)(y).dataIndex?(g=y,!0):null!=(0,Mr.A)(y).tooltipConfig?(m=y,!0):void 0},!0),g?this._showSeriesItemTooltip(a,g,l):m?this._showComponentItemTooltip(a,m,l):this._hide(l)}else this._lastDataByCoordSys=null,this._hide(l)}},o.prototype._showOrMove=function(a,l){var c=a.get("showDelay");l=(0,b.bind)(l,this),clearTimeout(this._showTimout),c>0?this._showTimout=setTimeout(l,c):l()},o.prototype._showAxisTooltip=function(a,l){var c=this._ecModel,h=this._tooltipModel,f=[l.offsetX,l.offsetY],g=Nd([l.tooltipOption],h),m=this._renderMode,y=[],x=(0,ca.TX)("section",{blocks:[],noHeader:!0}),w=[],D=new ca.iv;(0,b.each)(a,function(_e){(0,b.each)(_e.dataByAxis,function(me){var De=c.getComponent(me.axisDim+"Axis",me.axisIndex),Pe=me.value;if(De&&null!=Pe){var Ie=AL(Pe,De.axis,c,me.seriesDataIndices,me.valueLabelOpt),ke=(0,ca.TX)("section",{header:Ie,noHeader:!(0,b.trim)(Ie),sortBlocks:!0,blocks:[]});x.blocks.push(ke),(0,b.each)(me.seriesDataIndices,function(Ue){var Ye=c.getSeriesByIndex(Ue.seriesIndex),Ke=Ue.dataIndexInside,qe=Ye.getDataParams(Ke);if(!(qe.dataIndex<0)){qe.axisDim=me.axisDim,qe.axisIndex=me.axisIndex,qe.axisType=me.axisType,qe.axisId=me.axisId,qe.axisValue=ki.DX(De.axis,{value:Pe}),qe.axisValueLabel=Ie,qe.marker=D.makeTooltipMarker("item",(0,Va.Lz)(qe.color),m);var ut=(0,e1.f)(Ye.formatTooltip(Ke,!0,null)),pt=ut.frag;if(pt){var yt=Nd([Ye],h).get("valueFormatter");ke.blocks.push(yt?(0,b.extend)({valueFormatter:yt},pt):pt)}ut.text&&w.push(ut.text),y.push(qe)}})}})}),x.blocks.reverse(),w.reverse();var I=l.position,L=g.get("order"),N=(0,ca.BY)(x,D,m,L,c.get("useUTC"),g.get("textStyle"));N&&w.unshift(N);var se=w.join("richText"===m?"\n\n":"<br/>");this._showOrMove(g,function(){this._updateContentNotChangedOnAxis(a,y)?this._updatePosition(g,I,f[0],f[1],this._tooltipContent,y):this._showTooltipContent(g,se,y,Math.random()+"",f[0],f[1],I,null,D)})},o.prototype._showSeriesItemTooltip=function(a,l,c){var h=this._ecModel,f=(0,Mr.A)(l),g=f.seriesIndex,m=h.getSeriesByIndex(g),y=f.dataModel||m,x=f.dataIndex,w=f.dataType,D=y.getData(w),I=this._renderMode,L=a.positionDefault,N=Nd([D.getItemModel(x),y,m&&(m.coordinateSystem||{}).model],this._tooltipModel,L?{position:L}:null),Z=N.get("trigger");if(null==Z||"item"===Z){var se=y.getDataParams(x,w),_e=new ca.iv;se.marker=_e.makeTooltipMarker("item",(0,Va.Lz)(se.color),I);var me=(0,e1.f)(y.formatTooltip(x,!1,w)),De=N.get("order"),Pe=N.get("valueFormatter"),Ie=me.frag,ke=Ie?(0,ca.BY)(Pe?(0,b.extend)({valueFormatter:Pe},Ie):Ie,_e,I,De,h.get("useUTC"),N.get("textStyle")):me.text,Ue="item_"+y.name+"_"+x;this._showOrMove(N,function(){this._showTooltipContent(N,ke,se,Ue,a.offsetX,a.offsetY,a.position,a.target,_e)}),c({type:"showTip",dataIndexInside:x,dataIndex:D.getRawIndex(x),seriesIndex:g,from:this.uid})}},o.prototype._showComponentItemTooltip=function(a,l,c){var h=(0,Mr.A)(l),g=h.tooltipConfig.option||{};(0,b.isString)(g)&&(g={content:g,formatter:g});var y=[g],x=this._ecModel.getComponent(h.componentMainType,h.componentIndex);x&&y.push(x),y.push({formatter:g.content});var w=a.positionDefault,D=Nd(y,this._tooltipModel,w?{position:w}:null),I=D.get("content"),L=Math.random()+"",N=new ca.iv;this._showOrMove(D,function(){var Z=(0,b.clone)(D.get("formatterParams")||{});this._showTooltipContent(D,I,Z,L,a.offsetX,a.offsetY,a.position,l,N)}),c({type:"showTip",from:this.uid})},o.prototype._showTooltipContent=function(a,l,c,h,f,g,m,y,x){if(this._ticket="",a.get("showContent")&&a.get("show")){var w=this._tooltipContent;w.setEnterable(a.get("enterable"));var D=a.get("formatter");m=m||a.get("position");var I=l,N=this._getNearestPoint([f,g],c,a.get("trigger"),a.get("borderColor")).color;if(D)if((0,b.isString)(D)){var Z=a.ecModel.get("useUTC"),se=(0,b.isArray)(c)?c[0]:c;I=D,se&&se.axisType&&se.axisType.indexOf("time")>=0&&(I=(0,NT.WU)(se.axisValue,I,Z)),I=(0,Va.kF)(I,c,!0)}else if((0,b.isFunction)(D)){var me=(0,b.bind)(function(De,Pe){De===this._ticket&&(w.setContent(Pe,x,a,N,m),this._updatePosition(a,m,f,g,w,c,y))},this);this._ticket=h,I=D(c,h,me)}else I=D;w.setContent(I,x,a,N,m),w.show(a,N),this._updatePosition(a,m,f,g,w,c,y)}},o.prototype._getNearestPoint=function(a,l,c,h){return"axis"===c||(0,b.isArray)(l)?{color:h||("html"===this._renderMode?"#fff":"none")}:(0,b.isArray)(l)?void 0:{color:h||l.color||l.borderColor}},o.prototype._updatePosition=function(a,l,c,h,f,g,m){var y=this._api.getWidth(),x=this._api.getHeight();l=l||a.get("position");var w=f.getSize(),D=a.get("align"),I=a.get("verticalAlign"),L=m&&m.getBoundingRect().clone();if(m&&L.applyTransform(m.transform),(0,b.isFunction)(l)&&(l=l([c,h],g,f.el,L,{viewSize:[y,x],contentSize:w.slice()})),(0,b.isArray)(l))c=(0,It.GM)(l[0],y),h=(0,It.GM)(l[1],x);else if((0,b.isObject)(l)){var N=l;N.width=w[0],N.height=w[1];var Z=(0,Vr.ME)(N,{width:y,height:x});c=Z.x,h=Z.y,D=null,I=null}else if((0,b.isString)(l)&&m){var se=function ok(u,o,a,l){var c=a[0],h=a[1],f=Math.ceil(Math.SQRT2*l)+8,g=0,m=0,y=o.width,x=o.height;switch(u){case"inside":g=o.x+y/2-c/2,m=o.y+x/2-h/2;break;case"top":g=o.x+y/2-c/2,m=o.y-h-f;break;case"bottom":g=o.x+y/2-c/2,m=o.y+x+f;break;case"left":g=o.x-c-f,m=o.y+x/2-h/2;break;case"right":g=o.x+y+f,m=o.y+x/2-h/2}return[g,m]}(l,L,w,a.get("borderWidth"));c=se[0],h=se[1]}else se=function oz(u,o,a,l,c,h,f){var g=a.getSize(),m=g[0],y=g[1];return null!=h&&(u+m+h+2>l?u-=m+h:u+=h),null!=f&&(o+y+f>c?o-=y+f:o+=f),[u,o]}(c,h,f,y,x,D?null:20,I?null:20),c=se[0],h=se[1];D&&(c-=BT(D)?w[0]/2:"right"===D?w[0]:0),I&&(h-=BT(I)?w[1]/2:"bottom"===I?w[1]:0),Kx(a)&&(se=function fs(u,o,a,l,c){var h=a.getSize(),f=h[0],g=h[1];return u=Math.min(u+f,l)-f,o=Math.min(o+g,c)-g,[u=Math.max(u,0),o=Math.max(o,0)]}(c,h,f,y,x),c=se[0],h=se[1]),f.moveTo(c,h)},o.prototype._updateContentNotChangedOnAxis=function(a,l){var c=this._lastDataByCoordSys,h=this._cbParamsList,f=!!c&&c.length===a.length;return f&&(0,b.each)(c,function(g,m){var y=g.dataByAxis||[],w=(a[m]||{}).dataByAxis||[];(f=f&&y.length===w.length)&&(0,b.each)(y,function(D,I){var L=w[I]||{},N=D.seriesDataIndices||[],Z=L.seriesDataIndices||[];(f=f&&D.value===L.value&&D.axisType===L.axisType&&D.axisId===L.axisId&&N.length===Z.length)&&(0,b.each)(N,function(se,_e){var me=Z[_e];f=f&&se.seriesIndex===me.seriesIndex&&se.dataIndex===me.dataIndex}),h&&(0,b.each)(D.seriesDataIndices,function(se){var _e=se.seriesIndex,me=l[_e],De=h[_e];me&&De&&De.data!==me.data&&(f=!1)})})}),this._lastDataByCoordSys=a,this._cbParamsList=l,!!f},o.prototype._hide=function(a){this._lastDataByCoordSys=null,a({type:"hideTip",from:this.uid})},o.prototype.dispose=function(a,l){Ms.Z.node||!l.getDom()||((0,Uo.ZH)(this,"_updatePosition"),this._tooltipContent.dispose(),Cx("itemTooltip",l))},o.type="tooltip",o}(ga.Z);var lz=["rect","polygon","keep","clear"];function uz(u,o){var a=(0,xn.kF)(u?u.brush:[]);if(a.length){var l=[];b.each(a,function(m){var y=m.hasOwnProperty("toolbox")?m.toolbox:[];y instanceof Array&&(l=l.concat(y))});var c=u&&u.toolbox;b.isArray(c)&&(c=c[0]),c||(u.toolbox=[c={feature:{}}]);var h=c.feature||(c.feature={}),f=h.brush||(h.brush={}),g=f.type||(f.type=[]);g.push.apply(g,l),function lk(u){var o={};b.each(u,function(a){o[a]=1}),u.length=0,b.each(o,function(a,l){u.push(l)})}(g),o&&!g.length&&g.push.apply(g,lz)}}var bu=z(5018),VT=b.each;function uk(u){if(u)for(var o in u)if(u.hasOwnProperty(o))return!0}function r1(u,o,a){var l={};return VT(o,function(h){var f=l[h]=function c(){var h=function(){};return h.prototype.__hidden=h.prototype,new h}();VT(u[h],function(g,m){if(to.isValidType(m)){var y={type:m,visual:g};a&&a(y,h),f[m]=new to(y),"opacity"===m&&((y=b.clone(y)).type="colorAlpha",f.__hidden.__alphaForOpacity=new to(y))}})}),l}function a1(u,o,a){var l;b.each(a,function(c){o.hasOwnProperty(c)&&uk(o[c])&&(l=!0)}),l&&b.each(a,function(c){o.hasOwnProperty(c)&&uk(o[c])?u[c]=b.clone(o[c]):delete u[c]})}var ps=z(1995),M_={lineX:HT(0),lineY:HT(1),rect:{point:function(u,o,a){return u&&a.boundingRect.contain(u[0],u[1])},rect:function(u,o,a){return u&&a.boundingRect.intersect(u)}},polygon:{point:function(u,o,a){return u&&a.boundingRect.contain(u[0],u[1])&&ps.X(a.range,u[0],u[1])},rect:function(u,o,a){var l=a.range;if(!u||l.length<=1)return!1;var c=u.x,h=u.y,f=u.width,g=u.height,m=l[0];return!!(ps.X(l,c,h)||ps.X(l,c+f,h)||ps.X(l,c,h+g)||ps.X(l,c+f,h+g)||yr.Z.create(u).contain(m[0],m[1])||(0,_n.linePolygonIntersect)(c,h,c+f,h,l)||(0,_n.linePolygonIntersect)(c,h,c,h+g,l)||(0,_n.linePolygonIntersect)(c+f,h,c+f,h+g,l)||(0,_n.linePolygonIntersect)(c,h+g,c+f,h+g,l))||void 0}}};function HT(u){var o=["x","y"],a=["width","height"];return{point:function(l,c,h){if(l)return rr(l[u],h.range)},rect:function(l,c,h){if(l){var f=h.range,g=[l[o[u]],l[o[u]]+l[a[u]]];return g[1]<g[0]&&g.reverse(),rr(g[0],f)||rr(g[1],f)||rr(f[0],g)||rr(f[1],g)}}}}function rr(u,o){return o[0]<=u&&u<=o[1]}var T_=["inBrush","outOfBrush"],o1="__ecBrushSelect",s1="__ecInBrushSelectEvent";function E_(u){u.eachComponent({mainType:"brush"},function(o){(o.brushTargetManager=new nv(o.option,u)).setInputRanges(o.areas,u)})}function UT(u,o,a){var c,h,l=[];u.eachComponent({mainType:"brush"},function(f){a&&"takeGlobalCursor"===a.type&&f.setBrushOption("brush"===a.key?a.brushOption:{brushType:!1})}),E_(u),u.eachComponent({mainType:"brush"},function(f,g){var m={brushId:f.id,brushIndex:g,brushName:f.name,areas:b.clone(f.areas),selected:[]};l.push(m);var y=f.option,x=y.brushLink,w=[],D=[],I=[],L=!1;g||(c=y.throttleType,h=y.throttleDelay);var N=b.map(f.areas,function(Pe){var Ie=u1[Pe.brushType],ke=b.defaults({boundingRect:Ie?Ie(Pe):void 0},Pe);return ke.selectors=function ck(u){var o=u.brushType,a={point:function(l){return M_[o].point(l,a,u)},rect:function(l){return M_[o].rect(l,a,u)}};return a}(ke),ke}),Z=r1(f.option,T_,function(Pe){Pe.mappingMethod="fixed"});function se(Pe){return"all"===x||!!w[Pe]}function _e(Pe){return!!Pe.length}b.isArray(x)&&b.each(x,function(Pe){w[Pe]=1}),u.eachSeries(function(Pe,Ie){var ke=I[Ie]=[];"parallel"===Pe.subType?function me(Pe,Ie){var ke=Pe.coordinateSystem;L=L||ke.hasAxisBrushed(),se(Ie)&&ke.eachActiveState(Pe.getData(),function(Ue,Ye){"active"===Ue&&(D[Ye]=1)})}(Pe,Ie):function De(Pe,Ie,ke){if(Pe.brushSelector&&!function A_(u,o){var a=u.option.seriesIndex;return null!=a&&"all"!==a&&(b.isArray(a)?b.indexOf(a,o)<0:o!==a)}(f,Ie)&&(b.each(N,function(Ye){f.brushTargetManager.controlSeries(Ye,Pe,u)&&ke.push(Ye),L=L||_e(ke)}),se(Ie)&&_e(ke))){var Ue=Pe.getData();Ue.each(function(Ye){l1(Pe,ke,Ue,Ye)&&(D[Ye]=1)})}}(Pe,Ie,ke)}),u.eachSeries(function(Pe,Ie){var ke={seriesId:Pe.id,seriesIndex:Ie,seriesName:Pe.name,dataIndex:[]};m.selected.push(ke);var Ue=I[Ie],Ye=Pe.getData(),Ke=se(Ie)?function(qe){return D[qe]?(ke.dataIndex.push(Ye.getRawIndex(qe)),"inBrush"):"outOfBrush"}:function(qe){return l1(Pe,Ue,Ye,qe)?(ke.dataIndex.push(Ye.getRawIndex(qe)),"inBrush"):"outOfBrush"};(se(Ie)?L:_e(Ue))&&function zT(u,o,a,l,c,h){var g,f={};function m(w){return(0,bu.Or)(a,g,w)}function y(w,D){(0,bu.LZ)(a,g,w,D)}function x(w,D){var I=a.getRawDataItem(g=null==h?w:D);if(!I||!1!==I.visualMap)for(var L=l.call(c,w),N=o[L],Z=f[L],se=0,_e=Z.length;se<_e;se++){var me=Z[se];N[me]&&N[me].applyVisual(w,m,y)}}b.each(u,function(w){var D=to.prepareVisualTypes(o[w]);f[w]=D}),null==h?a.each(x):a.each([h],x)}(T_,Z,Ye,Ke)})}),function GT(u,o,a,l,c){if(c){var h=u.getZr();h[s1]||(h[o1]||(h[o1]=dk),Uo.T9(h,o1,a,o)(u,l))}}(o,c,h,l,a)}function dk(u,o){if(!u.isDisposed()){var a=u.getZr();a[s1]=!0,u.dispatchAction({type:"brushSelect",batch:o}),a[s1]=!1}}function l1(u,o,a,l){for(var c=0,h=o.length;c<h;c++){var f=o[c];if(u.brushSelector(l,a,f.selectors,f))return!0}}var u1={rect:function(u){return I_(u.range)},polygon:function(u){for(var o,a=u.range,l=0,c=a.length;l<c;l++){var h=a[l];h[0]<(o=o||[[1/0,-1/0],[1/0,-1/0]])[0][0]&&(o[0][0]=h[0]),h[0]>o[0][1]&&(o[0][1]=h[0]),h[1]<o[1][0]&&(o[1][0]=h[1]),h[1]>o[1][1]&&(o[1][1]=h[1])}return o&&I_(o)}};function I_(u){return new yr.Z(u[0][0],u[1][0],u[0][1]-u[0][0],u[1][1]-u[1][0])}const c1=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.init=function(a,l){this.ecModel=a,this.api=l,(this._brushController=new Ns(l.getZr())).on("brush",b.bind(this._onBrush,this)).mount()},o.prototype.render=function(a,l,c,h){this.model=a,this._updateController(a,l,c,h)},o.prototype.updateTransform=function(a,l,c,h){E_(l),this._updateController(a,l,c,h)},o.prototype.updateVisual=function(a,l,c,h){this.updateTransform(a,l,c,h)},o.prototype.updateView=function(a,l,c,h){this._updateController(a,l,c,h)},o.prototype._updateController=function(a,l,c,h){(!h||h.$from!==a.id)&&this._brushController.setPanels(a.brushTargetManager.makePanelOpts(c)).enableBrush(a.brushOption).updateCovers(a.areas.slice())},o.prototype.dispose=function(){this._brushController.dispose()},o.prototype._onBrush=function(a){var l=this.model.id,c=this.model.brushTargetManager.setOutputRanges(a.areas,this.ecModel);(!a.isEnd||a.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:l,areas:b.clone(c),$from:l}),a.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:l,areas:b.clone(c),$from:l})},o.type="brush",o}(ga.Z);function P_(u,o){return b.merge({brushType:u.brushType,brushMode:u.brushMode,transformable:u.transformable,brushStyle:new ka.Z(u.brushStyle).getItemStyle(),removeOnClick:u.removeOnClick,z:u.z},o,!0)}const qu=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.areas=[],a.brushOption={},a}return(0,Tt.ZT)(o,u),o.prototype.optionUpdated=function(a,l){var c=this.option;!l&&a1(c,a,["inBrush","outOfBrush"]);var h=c.inBrush=c.inBrush||{};c.outOfBrush=c.outOfBrush||{color:"#ddd"},h.hasOwnProperty("liftZ")||(h.liftZ=5)},o.prototype.setAreas=function(a){!a||(this.areas=b.map(a,function(l){return P_(this.option,l)},this))},o.prototype.setBrushOption=function(a){this.brushOption=P_(this.option,a),this.brushType=this.brushOption.brushType},o.type="brush",o.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],o.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},o}(ma.Z);var fk=["rect","polygon","lineX","lineY","keep","clear"];const pk=function(u){function o(){return null!==u&&u.apply(this,arguments)||this}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c){var h,f,g;l.eachComponent({mainType:"brush"},function(m){h=m.brushType,f=m.brushOption.brushMode||"single",g=g||!!m.areas.length}),this._brushType=h,this._brushMode=f,b.each(a.get("type",!0),function(m){a.setIconStatus(m,("keep"===m?"multiple"===f:"clear"===m?g:m===h)?"emphasis":"normal")})},o.prototype.updateView=function(a,l,c){this.render(a,l,c)},o.prototype.getIcons=function(){var a=this.model,l=a.get("icon",!0),c={};return b.each(a.get("type",!0),function(h){l[h]&&(c[h]=l[h])}),c},o.prototype.onclick=function(a,l,c){var h=this._brushType,f=this._brushMode;"clear"===c?(l.dispatchAction({type:"axisAreaSelect",intervals:[]}),l.dispatchAction({type:"brush",command:"clear",areas:[]})):l.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===c?h:h!==c&&c,brushMode:"keep"===c?"multiple"===f?"single":"multiple":f}})},o.getDefaultOption=function(a){return{show:!0,type:fk.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:a.getLocaleModel().get(["toolbox","brush","title"])}},o}(hl);var vk=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.layoutMode={type:"box",ignoreSize:!0},a}return(0,Tt.ZT)(o,u),o.type="title",o.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},o}(ma.Z),gk=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c){if(this.group.removeAll(),a.get("show")){var h=this.group,f=a.getModel("textStyle"),g=a.getModel("subtextStyle"),m=a.get("textAlign"),y=b.retrieve2(a.get("textBaseline"),a.get("textVerticalAlign")),x=new _t.ZP({style:(0,qt.Lr)(f,{text:a.get("text"),fill:f.getTextColor()},{disableBox:!0}),z2:10}),w=x.getBoundingRect(),D=a.get("subtext"),I=new _t.ZP({style:(0,qt.Lr)(g,{text:D,fill:g.getTextColor(),y:w.height+a.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),L=a.get("link"),N=a.get("sublink"),Z=a.get("triggerEvent",!0);x.silent=!L&&!Z,I.silent=!N&&!Z,L&&x.on("click",function(){(0,Va.MI)(L,"_"+a.get("target"))}),N&&I.on("click",function(){(0,Va.MI)(N,"_"+a.get("subtarget"))}),(0,Mr.A)(x).eventData=(0,Mr.A)(I).eventData=Z?{componentType:"title",componentIndex:a.componentIndex}:null,h.add(x),D&&h.add(I);var se=h.getBoundingRect(),_e=a.getBoxLayoutParams();_e.width=se.width,_e.height=se.height;var me=(0,Vr.ME)(_e,{width:c.getWidth(),height:c.getHeight()},a.get("padding"));m||("middle"===(m=a.get("left")||a.get("right"))&&(m="center"),"right"===m?me.x+=me.width:"center"===m&&(me.x+=me.width/2)),y||("center"===(y=a.get("top")||a.get("bottom"))&&(y="middle"),"bottom"===y?me.y+=me.height:"middle"===y&&(me.y+=me.height/2),y=y||"top"),h.x=me.x,h.y=me.y,h.markRedraw();var De={align:m,verticalAlign:y};x.setStyle(De),I.setStyle(De),se=h.getBoundingRect();var Pe=me.margin,Ie=a.getItemStyle(["color","opacity"]);Ie.fill=a.get("backgroundColor");var ke=new Di.Z({shape:{x:se.x-Pe[3],y:se.y-Pe[0],width:se.width+Pe[1]+Pe[3],height:se.height+Pe[0]+Pe[2],r:a.get("borderRadius")},style:Ie,subPixelOptimize:!0,silent:!0});h.add(ke)}},o.type="title",o}(ga.Z);const d1=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.layoutMode="box",a}return(0,Tt.ZT)(o,u),o.prototype.init=function(a,l,c){this.mergeDefaultAndTheme(a,c),this._initData()},o.prototype.mergeOption=function(a){u.prototype.mergeOption.apply(this,arguments),this._initData()},o.prototype.setCurrentIndex=function(a){null==a&&(a=this.option.currentIndex);var l=this._data.count();this.option.loop?a=(a%l+l)%l:(a>=l&&(a=l-1),a<0&&(a=0)),this.option.currentIndex=a},o.prototype.getCurrentIndex=function(){return this.option.currentIndex},o.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},o.prototype.setPlayState=function(a){this.option.autoPlay=!!a},o.prototype.getPlayState=function(){return!!this.option.autoPlay},o.prototype._initData=function(){var f,a=this.option,l=a.data||[],c=a.axisType,h=this._names=[];"category"===c?(f=[],(0,b.each)(l,function(y,x){var D,w=(0,xn.U5)((0,xn.C4)(y),"");(0,b.isObject)(y)?(D=(0,b.clone)(y)).value=x:D=x,f.push(D),h.push(w)})):f=l,(this._data=new xt.Z([{name:"value",type:{category:"ordinal",time:"time",value:"number"}[c]||"number"}],this)).initData(f,h)},o.prototype.getData=function(){return this._data},o.prototype.getCategories=function(){if("category"===this.get("axisType"))return this._names.slice()},o.type="timeline",o.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},o}(ma.Z);var YT=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.type="timeline.slider",o.defaultOption=(0,qn.ZL)(d1.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),o}(d1);(0,b.mixin)(YT,e1.X.prototype);const XT=YT,h1=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.type="timeline",o}(ga.Z),KT=function(u){function o(a,l,c,h){var f=u.call(this,a,l,c)||this;return f.type=h||"value",f}return(0,Tt.ZT)(o,u),o.prototype.getLabelModel=function(){return this.model.getModel("label")},o.prototype.isHorizontal=function(){return"horizontal"===this.model.get("orient")},o}(fo.Z);var QT=z(3156),qT=z(9020),R_=Math.PI,Fd=(0,xn.Yf)();function f1(u,o,a,l,c,h){var f=o.get("color");if(c)c.setColor(f),a.add(c),h&&h.onUpdate(c);else{var g=u.get("symbol");(c=(0,ai.th)(g,-1,-1,2,2,f)).setStyle("strokeNoScale",!0),a.add(c),h&&h.onCreate(c)}var m=o.getItemStyle(["color"]);c.setStyle(m),l=(0,b.merge)({rectHover:!0,z2:100},l,!0);var y=(0,ai.zp)(u.get("symbolSize"));l.scaleX=y[0]/2,l.scaleY=y[1]/2;var x=(0,ai.Cq)(u.get("symbolOffset"),y);x&&(l.x=(l.x||0)+x[0],l.y=(l.y||0)+x[1]);var w=u.get("symbolRotate");return l.rotation=(w||0)*Math.PI/180||0,c.attr(l),c.updateTransform(),c}function _k(u,o,a,l,c,h){if(!u.dragging){var f=c.getModel("checkpointStyle"),g=l.dataToCoord(c.getData().get("value",a));if(h||!f.get("animation",!0))u.attr({x:g,y:0}),o&&o.attr({shape:{x2:g}});else{var m={duration:f.get("animationDuration",!0),easing:f.get("animationEasing",!0)};u.stopAnimation(null,!0),u.animateTo({x:g,y:0},m),o&&o.animateTo({shape:{x2:g}},m)}}}const yk=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.init=function(a,l){this.api=l},o.prototype.render=function(a,l,c){if(this.model=a,this.api=c,this.ecModel=l,this.group.removeAll(),a.get("show",!0)){var h=this._layout(a,c),f=this._createGroup("_mainGroup"),g=this._createGroup("_labelGroup"),m=this._axis=this._createAxis(h,a);a.formatTooltip=function(y){var x=m.scale.getLabel({value:y});return(0,ca.TX)("nameValue",{noName:!0,value:x})},(0,b.each)(["AxisLine","AxisTick","Control","CurrentPointer"],function(y){this["_render"+y](h,f,m,a)},this),this._renderAxisLabel(h,g,m,a),this._position(h,a)}this._doPlayStop(),this._updateTicksStatus()},o.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},o.prototype.dispose=function(){this._clearTimer()},o.prototype._layout=function(a,l){var g,c=a.get(["label","position"]),h=a.get("orient"),f=function mk(u,o){return Vr.ME(u.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()},u.get("padding"))}(a,l),m={horizontal:"center",vertical:(g=null==c||"auto"===c?"horizontal"===h?f.y+f.height/2<l.getHeight()/2?"-":"+":f.x+f.width/2<l.getWidth()/2?"+":"-":(0,b.isString)(c)?{horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[h][c]:c)>=0||"+"===g?"left":"right"},y={horizontal:g>=0||"+"===g?"top":"bottom",vertical:"middle"},x={horizontal:0,vertical:R_/2},w="vertical"===h?f.height:f.width,D=a.getModel("controlStyle"),I=D.get("show",!0),L=I?D.get("itemSize"):0,N=I?D.get("itemGap"):0,Z=L+N,se=a.get(["label","rotate"])||0;se=se*R_/180;var _e,me,De,Pe=D.get("position",!0),Ie=I&&D.get("showPlayBtn",!0),ke=I&&D.get("showPrevBtn",!0),Ue=I&&D.get("showNextBtn",!0),Ye=0,Ke=w;"left"===Pe||"bottom"===Pe?(Ie&&(_e=[0,0],Ye+=Z),ke&&(me=[Ye,0],Ye+=Z),Ue&&(De=[Ke-L,0],Ke-=Z)):(Ie&&(_e=[Ke-L,0],Ke-=Z),ke&&(me=[0,0],Ye+=Z),Ue&&(De=[Ke-L,0],Ke-=Z));var qe=[Ye,Ke];return a.get("inverse")&&qe.reverse(),{viewRect:f,mainLength:w,orient:h,rotation:x[h],labelRotation:se,labelPosOpt:g,labelAlign:a.get(["label","align"])||m[h],labelBaseline:a.get(["label","verticalAlign"])||a.get(["label","baseline"])||y[h],playPosition:_e,prevBtnPosition:me,nextBtnPosition:De,axisExtent:qe,controlSize:L,controlGap:N}},o.prototype._position=function(a,l){var c=this._mainGroup,h=this._labelGroup,f=a.viewRect;if("vertical"===a.orient){var g=yi.create(),m=f.x,y=f.y+f.height;yi.translate(g,g,[-m,-y]),yi.rotate(g,g,-R_/2),yi.translate(g,g,[m,y]),(f=f.clone()).applyTransform(g)}var x=_e(f),w=_e(c.getBoundingRect()),D=_e(h.getBoundingRect()),I=[c.x,c.y],L=[h.x,h.y];L[0]=I[0]=x[0][0];var Z,N=a.labelPosOpt;function se(De){De.originX=x[0][0]-De.x,De.originY=x[1][0]-De.y}function _e(De){return[[De.x,De.x+De.width],[De.y,De.y+De.height]]}function me(De,Pe,Ie,ke,Ue){De[ke]+=Ie[ke][Ue]-Pe[ke][Ue]}null==N||(0,b.isString)(N)?(me(I,w,x,1,Z="+"===N?0:1),me(L,D,x,1,1-Z)):(me(I,w,x,1,Z=N>=0?0:1),L[1]=I[1]+N),c.setPosition(I),h.setPosition(L),c.rotation=h.rotation=a.rotation,se(c),se(h)},o.prototype._createAxis=function(a,l){var c=l.getData(),h=l.get("axisType"),f=function JT(u,o){if(o=o||u.get("type"))switch(o){case"category":return new QT.Z({ordinalMeta:u.getCategories(),extent:[1/0,-1/0]});case"time":return new qT.Z({locale:u.ecModel.getLocaleModel(),useUTC:u.ecModel.get("useUTC")});default:return new xg.Z}}(l,h);f.getTicks=function(){return c.mapArray(["value"],function(y){return{value:y}})};var g=c.getDataExtent("value");f.setExtent(g[0],g[1]),f.calcNiceTicks();var m=new KT("value",f,a.axisExtent,h);return m.model=l,m},o.prototype._createGroup=function(a){var l=this[a]=new Pn.Z;return this.group.add(l),l},o.prototype._renderAxisLine=function(a,l,c,h){var f=c.getExtent();if(h.get(["lineStyle","show"])){var g=new Ei.Z({shape:{x1:f[0],y1:0,x2:f[1],y2:0},style:(0,b.extend)({lineCap:"round"},h.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});l.add(g);var m=this._progressLine=new Ei.Z({shape:{x1:f[0],x2:this._currentPointer?this._currentPointer.x:f[0],y1:0,y2:0},style:(0,b.defaults)({lineCap:"round",lineWidth:g.style.lineWidth},h.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});l.add(m)}},o.prototype._renderAxisTick=function(a,l,c,h){var f=this,g=h.getData(),m=c.scale.getTicks();this._tickSymbols=[],(0,b.each)(m,function(y){var x=c.dataToCoord(y.value),w=g.getItemModel(y.value),D=w.getModel("itemStyle"),I=w.getModel(["emphasis","itemStyle"]),L=w.getModel(["progress","itemStyle"]),N={x,y:0,onclick:(0,b.bind)(f._changeTimeline,f,y.value)},Z=f1(w,D,l,N);Z.ensureState("emphasis").style=I.getItemStyle(),Z.ensureState("progress").style=L.getItemStyle(),(0,Ut.vF)(Z);var se=(0,Mr.A)(Z);w.get("tooltip")?(se.dataIndex=y.value,se.dataModel=h):se.dataIndex=se.dataModel=null,f._tickSymbols.push(Z)})},o.prototype._renderAxisLabel=function(a,l,c,h){var f=this;if(c.getLabelModel().get("show")){var m=h.getData(),y=c.getViewLabels();this._tickLabels=[],(0,b.each)(y,function(x){var w=x.tickValue,D=m.getItemModel(w),I=D.getModel("label"),L=D.getModel(["emphasis","label"]),N=D.getModel(["progress","label"]),Z=c.dataToCoord(x.tickValue),se=new _t.ZP({x:Z,y:0,rotation:a.labelRotation-a.rotation,onclick:(0,b.bind)(f._changeTimeline,f,w),silent:!1,style:(0,qt.Lr)(I,{text:x.formattedLabel,align:a.labelAlign,verticalAlign:a.labelBaseline})});se.ensureState("emphasis").style=(0,qt.Lr)(L),se.ensureState("progress").style=(0,qt.Lr)(N),l.add(se),(0,Ut.vF)(se),Fd(se).dataIndex=w,f._tickLabels.push(se)})}},o.prototype._renderControl=function(a,l,c,h){var f=a.controlSize,g=a.rotation,m=h.getModel("controlStyle").getItemStyle(),y=h.getModel(["emphasis","controlStyle"]).getItemStyle(),x=h.getPlayState(),w=h.get("inverse",!0);function D(I,L,N,Z){if(I){var se=(0,Ce.GM)((0,b.retrieve2)(h.get(["controlStyle",L+"BtnSize"]),f),f),me=function eE(u,o,a,l){var c=l.style,h=_n.createIcon(u.get(["controlStyle",o]),l||{},new yr.Z(a[0],a[1],a[2],a[3]));return c&&h.setStyle(c),h}(h,L+"Icon",[0,-se/2,se,se],{x:I[0],y:I[1],originX:f/2,originY:0,rotation:Z?-g:0,rectHover:!0,style:m,onclick:N});me.ensureState("emphasis").style=y,l.add(me),(0,Ut.vF)(me)}}D(a.nextBtnPosition,"next",(0,b.bind)(this._changeTimeline,this,w?"-":"+")),D(a.prevBtnPosition,"prev",(0,b.bind)(this._changeTimeline,this,w?"+":"-")),D(a.playPosition,x?"stop":"play",(0,b.bind)(this._handlePlayClick,this,!x),!0)},o.prototype._renderCurrentPointer=function(a,l,c,h){var f=h.getData(),g=h.getCurrentIndex(),m=f.getItemModel(g).getModel("checkpointStyle"),y=this;this._currentPointer=f1(m,m,this._mainGroup,{},this._currentPointer,{onCreate:function(w){w.draggable=!0,w.drift=(0,b.bind)(y._handlePointerDrag,y),w.ondragend=(0,b.bind)(y._handlePointerDragend,y),_k(w,y._progressLine,g,c,h,!0)},onUpdate:function(w){_k(w,y._progressLine,g,c,h)}})},o.prototype._handlePlayClick=function(a){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:a,from:this.uid})},o.prototype._handlePointerDrag=function(a,l,c){this._clearTimer(),this._pointerChangeTimeline([c.offsetX,c.offsetY])},o.prototype._handlePointerDragend=function(a){this._pointerChangeTimeline([a.offsetX,a.offsetY],!0)},o.prototype._pointerChangeTimeline=function(a,l){var c=this._toAxisCoord(a)[0],f=It.dt(this._axis.getExtent().slice());c>f[1]&&(c=f[1]),c<f[0]&&(c=f[0]),this._currentPointer.x=c,this._currentPointer.markRedraw(),this._progressLine.shape.x2=c,this._progressLine.dirty();var g=this._findNearestTick(c),m=this.model;(l||g!==m.getCurrentIndex()&&m.get("realtime"))&&this._changeTimeline(g)},o.prototype._doPlayStop=function(){var a=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var l=a.model;a._changeTimeline(l.getCurrentIndex()+(l.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},o.prototype._toAxisCoord=function(a){var l=this._mainGroup.getLocalTransform();return _n.applyTransform(a,l,!0)},o.prototype._findNearestTick=function(a){var h,l=this.model.getData(),c=1/0,f=this._axis;return l.each(["value"],function(g,m){var y=f.dataToCoord(g),x=Math.abs(y-a);x<c&&(c=x,h=m)}),h},o.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},o.prototype._changeTimeline=function(a){var l=this.model.getCurrentIndex();"+"===a?a=l+1:"-"===a&&(a=l-1),this.api.dispatchAction({type:"timelineChange",currentIndex:a,from:this.uid})},o.prototype._updateTicksStatus=function(){var a=this.model.getCurrentIndex(),l=this._tickSymbols,c=this._tickLabels;if(l)for(var h=0;h<l.length;h++)l&&l[h]&&l[h].toggleState("progress",h<a);if(c)for(h=0;h<c.length;h++)c&&c[h]&&c[h].toggleState("progress",Fd(c[h]).dataIndex<=a)},o.type="timeline.slider",o}(h1);function gz(u){var o=u&&u.timeline;b.isArray(o)||(o=o?[o]:[]),b.each(o,function(a){!a||function tE(u){var o=u.type,a={number:"value",time:"time"};if(a[o]&&(u.axisType=a[o],delete u.type),da(u),Bd(u,"controlPosition")){var l=u.controlStyle||(u.controlStyle={});Bd(l,"position")||(l.position=u.controlPosition),"none"===l.position&&!Bd(l,"show")&&(l.show=!1,delete l.position),delete u.controlPosition}b.each(u.data||[],function(c){b.isObject(c)&&!b.isArray(c)&&(!Bd(c,"value")&&Bd(c,"name")&&(c.value=c.name),da(c))})}(a)})}function da(u){var o=u.itemStyle||(u.itemStyle={}),a=o.emphasis||(o.emphasis={}),l=u.label||u.label||{},c=l.normal||(l.normal={}),h={normal:1,emphasis:1};b.each(l,function(f,g){!h[g]&&!Bd(c,g)&&(c[g]=f)}),a.label&&!Bd(l,"emphasis")&&(l.emphasis=a.label,delete a.label)}function Bd(u,o){return u.hasOwnProperty(o)}function nE(u,o){if(!u)return!1;for(var a=(0,b.isArray)(u)?u:[u],l=0;l<a.length;l++)if(a[l]&&a[l][o])return!0;return!1}function p1(u){(0,xn.Cc)(u,"label",["show"])}var v1=(0,xn.Yf)(),xk=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.createdBySelf=!1,a}return(0,Tt.ZT)(o,u),o.prototype.init=function(a,l,c){this.mergeDefaultAndTheme(a,c),this._mergeOption(a,c,!1,!0)},o.prototype.isAnimationEnabled=function(){if(Ms.Z.node)return!1;var a=this.__hostSeries;return this.getShallow("animation")&&a&&a.isAnimationEnabled()},o.prototype.mergeOption=function(a,l){this._mergeOption(a,l,!1,!1)},o.prototype._mergeOption=function(a,l,c,h){var f=this.mainType;c||l.eachSeries(function(g){var m=g.get(this.mainType,!0),y=v1(g)[f];m&&m.data?(y?y._mergeOption(m,l,!0):(h&&p1(m),b.each(m.data,function(x){x instanceof Array?(p1(x[0]),p1(x[1])):p1(x)}),y=this.createMarkerModelFromSeries(m,this,l),b.extend(y,{mainType:this.mainType,seriesIndex:g.seriesIndex,name:g.name,createdBySelf:!0}),y.__hostSeries=g),v1(g)[f]=y):v1(g)[f]=null},this)},o.prototype.formatTooltip=function(a,l,c){var h=this.getData(),f=this.getRawValue(a),g=h.getName(a);return(0,ca.TX)("section",{header:this.name,blocks:[(0,ca.TX)("nameValue",{name:g,value:f,noName:!g,noValue:null==f})]})},o.prototype.getData=function(){return this._data},o.prototype.setData=function(a){this._data=a},o.getMarkerModelFromSeries=function(a,l){return v1(a)[l]},o.type="marker",o.dependencies=["series","grid","polar","geo"],o}(ma.Z);b.mixin(xk,e1.X.prototype);const Vd=xk,O_=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.createMarkerModelFromSeries=function(a,l,c){return new o(a,l,c)},o.type="markPoint",o.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},o}(Vd);var Hc=z(4066);function g1(u){return!(isNaN(parseFloat(u.x))&&isNaN(parseFloat(u.y)))}function xu(u,o,a,l,c,h){var f=[],m=(0,$l.M)(o,l)?o.getCalculationInfo("stackResultDimension"):l,y=iE(o,m,u),x=o.indicesOfNearest(m,y)[0];f[c]=o.get(a,x),f[h]=o.get(m,x);var w=o.get(l,x),D=It.p8(o.get(l,x));return(D=Math.min(D,20))>=0&&(f[h]=+f[h].toFixed(D)),[f,w]}var k_={min:(0,b.curry)(xu,"min"),max:(0,b.curry)(xu,"max"),average:(0,b.curry)(xu,"average"),median:(0,b.curry)(xu,"median")};function zd(u,o){var a=u.getData(),l=u.coordinateSystem;if(o&&!function rE(u){return!isNaN(parseFloat(u.x))&&!isNaN(parseFloat(u.y))}(o)&&!(0,b.isArray)(o.coord)&&l){var c=l.dimensions,h=N_(o,a,l,u);if((o=(0,b.clone)(o)).type&&k_[o.type]&&h.baseAxis&&h.valueAxis){var f=(0,b.indexOf)(c,h.baseAxis.dim),g=(0,b.indexOf)(c,h.valueAxis.dim),m=k_[o.type](a,h.baseDataDim,h.valueDataDim,f,g);o.coord=m[0],o.value=m[1]}else{for(var y=[null!=o.xAxis?o.xAxis:o.radiusAxis,null!=o.yAxis?o.yAxis:o.angleAxis],x=0;x<2;x++)k_[y[x]]&&(y[x]=iE(a,a.mapDimension(c[x]),y[x]));o.coord=y}}return o}function N_(u,o,a,l){var c={};return null!=u.valueIndex||null!=u.valueDim?(c.valueDataDim=null!=u.valueIndex?o.getDimension(u.valueIndex):u.valueDim,c.valueAxis=a.getAxis(function wk(u,o){var a=u.getData().getDimensionInfo(o);return a&&a.coordDim}(l,c.valueDataDim)),c.baseAxis=a.getOtherAxis(c.valueAxis),c.baseDataDim=o.mapDimension(c.baseAxis.dim)):(c.baseAxis=l.getBaseAxis(),c.valueAxis=a.getOtherAxis(c.baseAxis),c.baseDataDim=o.mapDimension(c.baseAxis.dim),c.valueDataDim=o.mapDimension(c.valueAxis.dim)),c}function Hd(u,o){return!(u&&u.containData&&o.coord&&!g1(o))||u.containData(o.coord)}function ov(u,o){return u?function(a,l,c,h){return(0,Hc.yQ)(h<2?a.coord&&a.coord[h]:a.value,o[h])}:function(a,l,c,h){return(0,Hc.yQ)(a.value,o[h])}}function iE(u,o,a){if("average"===a){var l=0,c=0;return u.each(o,function(h,f){isNaN(h)||(l+=h,c++)}),l/c}return"median"===a?u.getMedian(o):u.getDataExtent(o)["max"===a?1:0]}var aE=(0,xn.Yf)();const oE=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.init=function(){this.markerGroupMap=(0,b.createHashMap)()},o.prototype.render=function(a,l,c){var h=this,f=this.markerGroupMap;f.each(function(g){aE(g).keep=!1}),l.eachSeries(function(g){var m=Vd.getMarkerModelFromSeries(g,h.type);m&&h.renderSeries(g,m,l,c)}),f.each(function(g){!aE(g).keep&&h.group.remove(g.group)})},o.prototype.markKeep=function(a){aE(a).keep=!0},o.prototype.toggleBlurSeries=function(a,l){var c=this;(0,b.each)(a,function(h){var f=Vd.getMarkerModelFromSeries(h,c.type);f&&f.getData().eachItemGraphicEl(function(m){m&&(l?(0,Ut.SX)(m):(0,Ut.VP)(m))})})},o.type="marker",o}(ga.Z);function _1(u,o,a){var l=o.coordinateSystem;u.each(function(c){var f,h=u.getItemModel(c),g=It.GM(h.get("x"),a.getWidth()),m=It.GM(h.get("y"),a.getHeight());if(isNaN(g)||isNaN(m)){if(o.getMarkerPosition)f=o.getMarkerPosition(u.getValues(u.dimensions,c));else if(l){var y=u.get(l.dimensions[0],c),x=u.get(l.dimensions[1],c);f=l.dataToPoint([y,x])}}else f=[g,m];isNaN(g)||(f[0]=g),isNaN(m)||(f[1]=m),u.setItemLayout(c,f)})}const Mk=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.updateTransform=function(a,l,c){l.eachSeries(function(h){var f=Vd.getMarkerModelFromSeries(h,"markPoint");f&&(_1(f.getData(),h,c),this.markerGroupMap.get(h.id).updateLayout())},this)},o.prototype.renderSeries=function(a,l,c,h){var f=a.coordinateSystem,g=a.id,m=a.getData(),y=this.markerGroupMap,x=y.get(g)||y.set(g,new rd),w=function Dk(u,o,a){var l;l=u?(0,b.map)(u&&u.dimensions,function(g){var m=o.getData().getDimensionInfo(o.getData().mapDimension(g))||{};return(0,b.extend)((0,b.extend)({},m),{name:g,ordinalMeta:null})}):[{name:"value",type:"float"}];var c=new xt.Z(l,a),h=(0,b.map)(a.get("data"),(0,b.curry)(zd,o));u&&(h=(0,b.filter)(h,(0,b.curry)(Hd,u)));var f=ov(!!u,l);return c.initData(h,null,f),c}(f,a,l);l.setData(w),_1(l.getData(),a,h),w.each(function(D){var I=w.getItemModel(D),L=I.getShallow("symbol"),N=I.getShallow("symbolSize"),Z=I.getShallow("symbolRotate"),se=I.getShallow("symbolOffset"),_e=I.getShallow("symbolKeepAspect");if((0,b.isFunction)(L)||(0,b.isFunction)(N)||(0,b.isFunction)(Z)||(0,b.isFunction)(se)){var me=l.getRawValue(D),De=l.getDataParams(D);(0,b.isFunction)(L)&&(L=L(me,De)),(0,b.isFunction)(N)&&(N=N(me,De)),(0,b.isFunction)(Z)&&(Z=Z(me,De)),(0,b.isFunction)(se)&&(se=se(me,De))}var Pe=I.getModel("itemStyle").getItemStyle(),Ie=(0,bu.UL)(m,"color");Pe.fill||(Pe.fill=Ie),w.setItemVisual(D,{symbol:L,symbolSize:N,symbolRotate:Z,symbolOffset:se,symbolKeepAspect:_e,style:Pe})}),x.updateData(w),this.group.add(x.group),w.eachItemGraphicEl(function(D){D.traverse(function(I){(0,Mr.A)(I).dataModel=l})}),this.markKeep(x),x.group.silent=l.get("silent")||a.get("silent")},o.type="markPoint",o}(oE),lE=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.createMarkerModelFromSeries=function(a,l,c){return new o(a,l,c)},o.type="markLine",o.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},o}(Vd);var sv=(0,xn.Yf)(),Ek=function(u,o,a,l){var h,c=u.getData();if((0,b.isArray)(l))h=l;else{var f=l.type;if("min"===f||"max"===f||"average"===f||"median"===f||null!=l.xAxis||null!=l.yAxis){var g=void 0,m=void 0;if(null!=l.yAxis||null!=l.xAxis)g=o.getAxis(null!=l.yAxis?"y":"x"),m=(0,b.retrieve)(l.yAxis,l.xAxis);else{var y=N_(l,c,o,u);g=y.valueAxis,m=iE(c,(0,$l.IR)(c,y.valueDataDim),f)}var w="x"===g.dim?0:1,D=1-w,I=(0,b.clone)(l),L={coord:[]};I.type=null,I.coord=[],I.coord[D]=-1/0,L.coord[D]=1/0;var N=a.get("precision");N>=0&&(0,b.isNumber)(m)&&(m=+m.toFixed(Math.min(N,20))),I.coord[w]=L.coord[w]=m,h=[I,L,{type:f,valueIndex:l.valueIndex,value:m}]}else h=[]}var Z=[zd(u,h[0]),zd(u,h[1]),(0,b.extend)({},h[2])];return Z[2].type=Z[2].type||null,(0,b.merge)(Z[2],Z[0]),(0,b.merge)(Z[2],Z[1]),Z};function F_(u){return!isNaN(u)&&!isFinite(u)}function y1(u,o,a,l){var c=1-u,h=l.dimensions[u];return F_(o[c])&&F_(a[c])&&o[u]===a[u]&&l.getAxis(h).containData(o[u])}function B_(u,o){if("cartesian2d"===u.type){var a=o[0].coord,l=o[1].coord;if(a&&l&&(y1(1,a,l,u)||y1(0,a,l,u)))return!0}return Hd(u,o[0])&&Hd(u,o[1])}function uE(u,o,a,l,c){var g,h=l.coordinateSystem,f=u.getItemModel(o),m=It.GM(f.get("x"),c.getWidth()),y=It.GM(f.get("y"),c.getHeight());if(isNaN(m)||isNaN(y)){if(l.getMarkerPosition)g=l.getMarkerPosition(u.getValues(u.dimensions,o));else{var w=u.get((x=h.dimensions)[0],o),D=u.get(x[1],o);g=h.dataToPoint([w,D])}if(Is(h,"cartesian2d")){var x,I=h.getAxis("x"),L=h.getAxis("y");F_(u.get((x=h.dimensions)[0],o))?g[0]=I.toGlobalCoord(I.getExtent()[a?0:1]):F_(u.get(x[1],o))&&(g[1]=L.toGlobalCoord(L.getExtent()[a?0:1]))}isNaN(m)||(g[0]=m),isNaN(y)||(g[1]=y)}else g=[m,y];u.setItemLayout(o,g)}const Ak=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.updateTransform=function(a,l,c){l.eachSeries(function(h){var f=Vd.getMarkerModelFromSeries(h,"markLine");if(f){var g=f.getData(),m=sv(f).from,y=sv(f).to;m.each(function(x){uE(m,x,!0,h,c),uE(y,x,!1,h,c)}),g.each(function(x){g.setItemLayout(x,[m.getItemLayout(x),y.getItemLayout(x)])}),this.markerGroupMap.get(h.id).updateLayout()}},this)},o.prototype.renderSeries=function(a,l,c,h){var f=a.coordinateSystem,g=a.id,m=a.getData(),y=this.markerGroupMap,x=y.get(g)||y.set(g,new ob);this.group.add(x.group);var w=function lv(u,o,a){var l;l=u?(0,b.map)(u&&u.dimensions,function(y){var x=o.getData().getDimensionInfo(o.getData().mapDimension(y))||{};return(0,b.extend)((0,b.extend)({},x),{name:y,ordinalMeta:null})}):[{name:"value",type:"float"}];var c=new xt.Z(l,a),h=new xt.Z(l,a),f=new xt.Z([],a),g=(0,b.map)(a.get("data"),(0,b.curry)(Ek,o,u,a));u&&(g=(0,b.filter)(g,(0,b.curry)(B_,u)));var m=ov(!!u,l);return c.initData((0,b.map)(g,function(y){return y[0]}),null,m),h.initData((0,b.map)(g,function(y){return y[1]}),null,m),f.initData((0,b.map)(g,function(y){return y[2]})),f.hasItemOption=!0,{from:c,to:h,line:f}}(f,a,l),D=w.from,I=w.to,L=w.line;sv(l).from=D,sv(l).to=I,l.setData(L);var N=l.get("symbol"),Z=l.get("symbolSize"),se=l.get("symbolRotate"),_e=l.get("symbolOffset");function me(De,Pe,Ie){var ke=De.getItemModel(Pe);uE(De,Pe,Ie,a,h);var Ue=ke.getModel("itemStyle").getItemStyle();null==Ue.fill&&(Ue.fill=(0,bu.UL)(m,"color")),De.setItemVisual(Pe,{symbolKeepAspect:ke.get("symbolKeepAspect"),symbolOffset:(0,b.retrieve2)(ke.get("symbolOffset",!0),_e[Ie?0:1]),symbolRotate:(0,b.retrieve2)(ke.get("symbolRotate",!0),se[Ie?0:1]),symbolSize:(0,b.retrieve2)(ke.get("symbolSize"),Z[Ie?0:1]),symbol:(0,b.retrieve2)(ke.get("symbol",!0),N[Ie?0:1]),style:Ue})}(0,b.isArray)(N)||(N=[N,N]),(0,b.isArray)(Z)||(Z=[Z,Z]),(0,b.isArray)(se)||(se=[se,se]),(0,b.isArray)(_e)||(_e=[_e,_e]),w.from.each(function(De){me(D,De,!0),me(I,De,!1)}),L.each(function(De){var Pe=L.getItemModel(De).getModel("lineStyle").getLineStyle();L.setItemLayout(De,[D.getItemLayout(De),I.getItemLayout(De)]),null==Pe.stroke&&(Pe.stroke=D.getItemVisual(De,"style").fill),L.setItemVisual(De,{fromSymbolKeepAspect:D.getItemVisual(De,"symbolKeepAspect"),fromSymbolOffset:D.getItemVisual(De,"symbolOffset"),fromSymbolRotate:D.getItemVisual(De,"symbolRotate"),fromSymbolSize:D.getItemVisual(De,"symbolSize"),fromSymbol:D.getItemVisual(De,"symbol"),toSymbolKeepAspect:I.getItemVisual(De,"symbolKeepAspect"),toSymbolOffset:I.getItemVisual(De,"symbolOffset"),toSymbolRotate:I.getItemVisual(De,"symbolRotate"),toSymbolSize:I.getItemVisual(De,"symbolSize"),toSymbol:I.getItemVisual(De,"symbol"),style:Pe})}),x.updateData(L),w.line.eachItemGraphicEl(function(De){(0,Mr.A)(De).dataModel=l,De.traverse(function(Pe){(0,Mr.A)(Pe).dataModel=l})}),this.markKeep(x),x.group.silent=l.get("silent")||a.get("silent")},o.type="markLine",o}(oE),yz=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.createMarkerModelFromSeries=function(a,l,c){return new o(a,l,c)},o.type="markArea",o.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},o}(Vd);var V_=(0,xn.Yf)(),Pk=function(u,o,a,l){var c=zd(u,l[0]),h=zd(u,l[1]),f=c.coord,g=h.coord;f[0]=(0,b.retrieve)(f[0],-1/0),f[1]=(0,b.retrieve)(f[1],-1/0),g[0]=(0,b.retrieve)(g[0],1/0),g[1]=(0,b.retrieve)(g[1],1/0);var m=(0,b.mergeAll)([{},c,h]);return m.coord=[c.coord,h.coord],m.x0=c.x,m.y0=c.y,m.x1=h.x,m.y1=h.y,m};function fl(u){return!isNaN(u)&&!isFinite(u)}function Rk(u,o,a,l){var c=1-u;return fl(o[c])&&fl(a[c])}function bz(u,o){var a=o.coord[0],l=o.coord[1],c={coord:a,x:o.x0,y:o.y0},h={coord:l,x:o.x1,y:o.y1};return Is(u,"cartesian2d")?!(!a||!l||!Rk(1,a,l)&&!Rk(0,a,l))||function m1(u,o,a){return!(u&&u.containZone&&o.coord&&a.coord&&!g1(o)&&!g1(a))||u.containZone(o.coord,a.coord)}(u,c,h):Hd(u,c)||Hd(u,h)}function Lk(u,o,a,l,c){var g,h=l.coordinateSystem,f=u.getItemModel(o),m=It.GM(f.get(a[0]),c.getWidth()),y=It.GM(f.get(a[1]),c.getHeight());if(isNaN(m)||isNaN(y)){if(l.getMarkerPosition)g=l.getMarkerPosition(u.getValues(a,o));else{var D=[x=u.get(a[0],o),w=u.get(a[1],o)];h.clampData&&h.clampData(D,D),g=h.dataToPoint(D,!0)}if(Is(h,"cartesian2d")){var I=h.getAxis("x"),L=h.getAxis("y"),x=u.get(a[0],o),w=u.get(a[1],o);fl(x)?g[0]=I.toGlobalCoord(I.getExtent()["x0"===a[0]?0:1]):fl(w)&&(g[1]=L.toGlobalCoord(L.getExtent()["y0"===a[1]?0:1]))}isNaN(m)||(g[0]=m),isNaN(y)||(g[1]=y)}else g=[m,y];return g}var Ok=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];const Cz=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.updateTransform=function(a,l,c){l.eachSeries(function(h){var f=Vd.getMarkerModelFromSeries(h,"markArea");if(f){var g=f.getData();g.each(function(m){var y=(0,b.map)(Ok,function(w){return Lk(g,m,w,h,c)});g.setItemLayout(m,y),g.getItemGraphicEl(m).setShape("points",y)})}},this)},o.prototype.renderSeries=function(a,l,c,h){var f=a.coordinateSystem,g=a.id,m=a.getData(),y=this.markerGroupMap,x=y.get(g)||y.set(g,{group:new Pn.Z});this.group.add(x.group),this.markKeep(x);var w=function kk(u,o,a){var l,c;if(u){var f=(0,b.map)(u&&u.dimensions,function(y){var x=o.getData(),w=x.getDimensionInfo(x.mapDimension(y))||{};return(0,b.extend)((0,b.extend)({},w),{name:y,ordinalMeta:null})});c=(0,b.map)(["x0","y0","x1","y1"],function(y,x){return{name:y,type:f[x%2].type}}),l=new xt.Z(c,a)}else l=new xt.Z(c=[{name:"value",type:"float"}],a);var g=(0,b.map)(a.get("data"),(0,b.curry)(Pk,o,u,a));u&&(g=(0,b.filter)(g,(0,b.curry)(bz,u)));var m=u?function(y,x,w,D){var I=y.coord[Math.floor(D/2)][D%2];return(0,Hc.yQ)(I,c[D])}:function(y,x,w,D){return(0,Hc.yQ)(y.value,c[D])};return l.initData(g,null,m),l.hasItemOption=!0,l}(f,a,l);l.setData(w),w.each(function(D){var I=(0,b.map)(Ok,function(Ue){return Lk(w,D,Ue,a,h)}),L=f.getAxis("x").scale,N=f.getAxis("y").scale,Z=L.getExtent(),se=N.getExtent(),_e=[L.parse(w.get("x0",D)),L.parse(w.get("x1",D))],me=[N.parse(w.get("y0",D)),N.parse(w.get("y1",D))];It.dt(_e),It.dt(me),w.setItemLayout(D,{points:I,allClipped:!!(Z[0]>_e[1]||Z[1]<_e[0]||se[0]>me[1]||se[1]<me[0])});var Ie=w.getItemModel(D).getModel("itemStyle").getItemStyle(),ke=(0,bu.UL)(m,"color");Ie.fill||(Ie.fill=ke,(0,b.isString)(Ie.fill)&&(Ie.fill=Da.modifyAlpha(Ie.fill,.4))),Ie.stroke||(Ie.stroke=ke),w.setItemVisual(D,"style",Ie)}),w.diff(V_(x).data).add(function(D){var I=w.getItemLayout(D);if(!I.allClipped){var L=new tl.Z({shape:{points:I.points}});w.setItemGraphicEl(D,L),x.group.add(L)}}).update(function(D,I){var L=V_(x).data.getItemGraphicEl(I),N=w.getItemLayout(D);N.allClipped?L&&x.group.remove(L):(L?wn.D(L,{shape:{points:N.points}},l,D):L=new tl.Z({shape:{points:N.points}}),w.setItemGraphicEl(D,L),x.group.add(L))}).remove(function(D){var I=V_(x).data.getItemGraphicEl(D);x.group.remove(I)}).execute(),w.eachItemGraphicEl(function(D,I){var L=w.getItemModel(I),N=w.getItemVisual(I,"style");D.useStyle(w.getItemVisual(I,"style")),(0,qt.ni)(D,(0,qt.k3)(L),{labelFetcher:l,labelDataIndex:I,defaultText:w.getName(I)||"",inheritColor:(0,b.isString)(N.fill)?Da.modifyAlpha(N.fill,1):"#000"}),(0,Ut.WO)(D,L),(0,Ut.k5)(D,null,null,L.get(["emphasis","disabled"])),(0,Mr.A)(D).dataModel=l}),V_(x).data=w,x.group.silent=l.get("silent")||a.get("silent")},o.type="markArea",o}(oE),dE=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.layoutMode={type:"box",ignoreSize:!0},a}return(0,Tt.ZT)(o,u),o.prototype.init=function(a,l,c){this.mergeDefaultAndTheme(a,c),a.selected=a.selected||{},this._updateSelector(a)},o.prototype.mergeOption=function(a,l){u.prototype.mergeOption.call(this,a,l),this._updateSelector(a)},o.prototype._updateSelector=function(a){var l=a.selector,c=this.ecModel;!0===l&&(l=a.selector=["all","inverse"]),b.isArray(l)&&b.each(l,function(h,f){b.isString(h)&&(h={type:h}),l[f]=b.merge(h,function(u,o){return"all"===o?{type:"all",title:u.getLocaleModel().get(["legend","selector","all"])}:"inverse"===o?{type:"inverse",title:u.getLocaleModel().get(["legend","selector","inverse"])}:void 0}(c,h.type))})},o.prototype.optionUpdated=function(){this._updateData(this.ecModel);var a=this._data;if(a[0]&&"single"===this.get("selectedMode")){for(var l=!1,c=0;c<a.length;c++){var h=a[c].get("name");if(this.isSelected(h)){this.select(h),l=!0;break}}!l&&this.select(a[0].get("name"))}},o.prototype._updateData=function(a){var l=[],c=[];a.eachRawSeries(function(g){var y;if(c.push(g.name),g.legendVisualProvider){var w=g.legendVisualProvider.getAllNames();a.isSeriesFiltered(g)||(c=c.concat(w)),w.length?l=l.concat(w):y=!0}else y=!0;y&&(0,xn.yu)(g)&&l.push(g.name)}),this._availableNames=c;var h=this.get("data")||l,f=b.map(h,function(g){return(b.isString(g)||b.isNumber(g))&&(g={name:g}),new ka.Z(g,this,this.ecModel)},this);this._data=f},o.prototype.getData=function(){return this._data},o.prototype.select=function(a){var l=this.option.selected;"single"===this.get("selectedMode")&&b.each(this._data,function(f){l[f.get("name")]=!1}),l[a]=!0},o.prototype.unSelect=function(a){"single"!==this.get("selectedMode")&&(this.option.selected[a]=!1)},o.prototype.toggleSelected=function(a){var l=this.option.selected;l.hasOwnProperty(a)||(l[a]=!0),this[l[a]?"unSelect":"select"](a)},o.prototype.allSelect=function(){var l=this.option.selected;b.each(this._data,function(c){l[c.get("name",!0)]=!0})},o.prototype.inverseSelect=function(){var l=this.option.selected;b.each(this._data,function(c){var h=c.get("name",!0);l.hasOwnProperty(h)||(l[h]=!0),l[h]=!l[h]})},o.prototype.isSelected=function(a){var l=this.option.selected;return!(l.hasOwnProperty(a)&&!l[a])&&b.indexOf(this._availableNames,a)>=0},o.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},o.type="legend.plain",o.dependencies=["series"],o.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},o}(ma.Z);var uv=b.curry,$h=b.each,Bs=Pn.Z;function Rr(u,o,a,l){x1(u,o,a,l),a.dispatchAction({type:"legendToggleSelect",name:u??o}),b1(u,o,a,l)}function z_(u){for(var a,o=u.getZr().storage.getDisplayList(),l=0,c=o.length;l<c&&!(a=o[l].states.emphasis);)l++;return a&&a.hoverLayer}function b1(u,o,a,l){z_(a)||a.dispatchAction({type:"highlight",seriesName:u,name:o,excludeSeriesId:l})}function x1(u,o,a,l){z_(a)||a.dispatchAction({type:"downplay",seriesName:u,name:o,excludeSeriesId:l})}const C1=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.newlineDisabled=!1,a}return(0,Tt.ZT)(o,u),o.prototype.init=function(){this.group.add(this._contentGroup=new Bs),this.group.add(this._selectorGroup=new Bs),this._isFirstRender=!0},o.prototype.getContentGroup=function(){return this._contentGroup},o.prototype.getSelectorGroup=function(){return this._selectorGroup},o.prototype.render=function(a,l,c){var h=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),a.get("show",!0)){var f=a.get("align"),g=a.get("orient");(!f||"auto"===f)&&(f="right"===a.get("left")&&"vertical"===g?"right":"left");var m=a.get("selector",!0),y=a.get("selectorPosition",!0);m&&(!y||"auto"===y)&&(y="horizontal"===g?"end":"start"),this.renderInner(f,a,l,c,m,g,y);var x=a.getBoxLayoutParams(),w={width:c.getWidth(),height:c.getHeight()},D=a.get("padding"),I=Vr.ME(x,w,D),L=this.layoutInner(a,f,I,h,m,y),N=Vr.ME(b.defaults({width:L.width,height:L.height},x),w,D);this.group.x=N.x-L.x,this.group.y=N.y-L.y,this.group.markRedraw(),this.group.add(this._backgroundEl=zO(L,a))}},o.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},o.prototype.renderInner=function(a,l,c,h,f,g,m){var y=this.getContentGroup(),x=b.createHashMap(),w=l.get("selectedMode"),D=[];c.eachRawSeries(function(I){!I.get("legendHoverLink")&&D.push(I.id)}),$h(l.getData(),function(I,L){var N=I.get("name");if(!this.newlineDisabled&&(""===N||"\n"===N)){var Z=new Bs;return Z.newline=!0,void y.add(Z)}var se=c.getSeriesByName(N)[0];if(!x.get(N))if(se){var _e=se.getData(),me=_e.getVisual("legendLineStyle")||{},De=_e.getVisual("legendIcon"),Pe=_e.getVisual("style");this._createItem(se,N,L,I,l,a,me,Pe,De,w,h).on("click",uv(Rr,N,null,h,D)).on("mouseover",uv(b1,se.name,null,h,D)).on("mouseout",uv(x1,se.name,null,h,D)),x.set(N,!0)}else c.eachRawSeries(function(ke){if(!x.get(N)&&ke.legendVisualProvider){var Ue=ke.legendVisualProvider;if(!Ue.containName(N))return;var Ye=Ue.indexOfName(N),Ke=Ue.getItemVisual(Ye,"style"),qe=Ue.getItemVisual(Ye,"legendIcon"),ut=(0,Da.parse)(Ke.fill);ut&&0===ut[3]&&(ut[3]=.2,Ke=b.extend(b.extend({},Ke),{fill:(0,Da.stringify)(ut,"rgba")})),this._createItem(ke,N,L,I,l,a,{},Ke,qe,w,h).on("click",uv(Rr,null,N,h,D)).on("mouseover",uv(b1,null,N,h,D)).on("mouseout",uv(x1,null,N,h,D)),x.set(N,!0)}},this)},this),f&&this._createSelector(f,l,h,g,m)},o.prototype._createSelector=function(a,l,c,h,f){var g=this.getSelectorGroup();$h(a,function(y){var x=y.type,w=new _t.ZP({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){c.dispatchAction({type:"all"===x?"legendAllSelect":"legendInverseSelect"})}});g.add(w);var D=l.getModel("selectorLabel"),I=l.getModel(["emphasis","selectorLabel"]);(0,qt.ni)(w,{normal:D,emphasis:I},{defaultText:y.title}),(0,Ut.vF)(w)})},o.prototype._createItem=function(a,l,c,h,f,g,m,y,x,w,D){var I=a.visualDrawType,L=f.get("itemWidth"),N=f.get("itemHeight"),Z=f.isSelected(l),se=h.get("symbolRotate"),_e=h.get("symbolKeepAspect"),me=h.get("icon"),De=function Nk(u,o,a,l,c,h,f){function g(Z,se){"auto"===Z.lineWidth&&(Z.lineWidth=se.lineWidth>0?2:0),$h(Z,function(_e,me){"inherit"===Z[me]&&(Z[me]=se[me])})}var m=o.getModel("itemStyle"),y=m.getItemStyle(),x=0===u.lastIndexOf("empty",0)?"fill":"stroke",w=m.getShallow("decal");y.decal=w&&"inherit"!==w?(0,M0.I)(w,f):l.decal,"inherit"===y.fill&&(y.fill=l[c]),"inherit"===y.stroke&&(y.stroke=l[x]),"inherit"===y.opacity&&(y.opacity=("fill"===c?l:a).opacity),g(y,l);var D=o.getModel("lineStyle"),I=D.getLineStyle();if(g(I,a),"auto"===y.fill&&(y.fill=l.fill),"auto"===y.stroke&&(y.stroke=l.fill),"auto"===I.stroke&&(I.stroke=l.fill),!h){var L=o.get("inactiveBorderWidth");y.lineWidth="auto"===L?l.lineWidth>0&&y[x]?2:0:y.lineWidth,y.fill=o.get("inactiveColor"),y.stroke=o.get("inactiveBorderColor"),I.stroke=D.get("inactiveColor"),I.lineWidth=D.get("inactiveWidth")}return{itemStyle:y,lineStyle:I}}(x=me||x||"roundRect",h,m,y,I,Z,D),Pe=new Bs,Ie=h.getModel("textStyle");if(!b.isFunction(a.getLegendIcon)||me&&"inherit"!==me){var ke="inherit"===me&&a.getData().getVisual("symbol")?"inherit"===se?a.getData().getVisual("symbolRotate"):se:0;Pe.add(function Fk(u){var o=u.icon||"roundRect",a=(0,ai.th)(o,0,0,u.itemWidth,u.itemHeight,u.itemStyle.fill,u.symbolKeepAspect);return a.setStyle(u.itemStyle),a.rotation=(u.iconRotate||0)*Math.PI/180,a.setOrigin([u.itemWidth/2,u.itemHeight/2]),o.indexOf("empty")>-1&&(a.style.stroke=a.style.fill,a.style.fill="#fff",a.style.lineWidth=2),a}({itemWidth:L,itemHeight:N,icon:x,iconRotate:ke,itemStyle:De.itemStyle,lineStyle:De.lineStyle,symbolKeepAspect:_e}))}else Pe.add(a.getLegendIcon({itemWidth:L,itemHeight:N,icon:x,iconRotate:se,itemStyle:De.itemStyle,lineStyle:De.lineStyle,symbolKeepAspect:_e}));var Ue="left"===g?L+5:-5,Ye=g,Ke=f.get("formatter"),qe=l;b.isString(Ke)&&Ke?qe=Ke.replace("{name}",l??""):b.isFunction(Ke)&&(qe=Ke(l));var ut=h.get("inactiveColor");Pe.add(new _t.ZP({style:(0,qt.Lr)(Ie,{text:qe,x:Ue,y:N/2,fill:Z?Ie.getTextColor():ut,align:Ye,verticalAlign:"middle"})}));var pt=new Di.Z({shape:Pe.getBoundingRect(),invisible:!0}),yt=h.getModel("tooltip");return yt.get("show")&&_n.setTooltipConfig({el:pt,componentModel:f,itemName:l,itemTooltipOption:yt.option}),Pe.add(pt),Pe.eachChild(function(wt){wt.silent=!0}),pt.silent=!w,this.getContentGroup().add(Pe),(0,Ut.vF)(Pe),Pe.__legendDataIndex=c,Pe},o.prototype.layoutInner=function(a,l,c,h,f,g){var m=this.getContentGroup(),y=this.getSelectorGroup();Vr.BZ(a.get("orient"),m,a.get("itemGap"),c.width,c.height);var x=m.getBoundingRect(),w=[-x.x,-x.y];if(y.markRedraw(),m.markRedraw(),f){Vr.BZ("horizontal",y,a.get("selectorItemGap",!0));var D=y.getBoundingRect(),I=[-D.x,-D.y],L=a.get("selectorButtonGap",!0),N=a.getOrient().index,Z=0===N?"width":"height",se=0===N?"height":"width",_e=0===N?"y":"x";"end"===g?I[N]+=x[Z]+L:w[N]+=D[Z]+L,I[1-N]+=x[se]/2-D[se]/2,y.x=I[0],y.y=I[1],m.x=w[0],m.y=w[1];var me={x:0,y:0};return me[Z]=x[Z]+L+D[Z],me[se]=Math.max(x[se],D[se]),me[_e]=Math.min(0,D[_e]+I[1-N]),me}return m.x=w[0],m.y=w[1],this.group.getBoundingRect()},o.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},o.type="legend.plain",o}(ga.Z);function hE(u){var o=u.findComponents({mainType:"legend"});o&&o.length&&u.filterSeries(function(a){for(var l=0;l<o.length;l++)if(!o[l].isSelected(a.name))return!1;return!0})}function dv(u,o,a){var h,l={},c="toggleSelected"===u;return a.eachComponent("legend",function(f){c&&null!=h?f[h?"select":"unSelect"](o.name):"allSelect"===u||"inverseSelect"===u?f[u]():(f[u](o.name),h=f.isSelected(o.name));var g=f.getData();(0,b.each)(g,function(m){var y=m.get("name");if("\n"!==y&&""!==y){var x=f.isSelected(y);l[y]=l.hasOwnProperty(y)?l[y]&&x:x}})}),"allSelect"===u||"inverseSelect"===u?{selected:l}:{name:o.name,selected:l}}function S1(u){u.registerComponentModel(dE),u.registerComponentView(C1),u.registerProcessor(u.PRIORITY.PROCESSOR.SERIES_FILTER,hE),u.registerSubTypeDefaulter("legend",function(){return"plain"}),function w1(u){u.registerAction("legendToggleSelect","legendselectchanged",(0,b.curry)(dv,"toggleSelected")),u.registerAction("legendAllSelect","legendselectall",(0,b.curry)(dv,"allSelect")),u.registerAction("legendInverseSelect","legendinverseselect",(0,b.curry)(dv,"inverseSelect")),u.registerAction("legendSelect","legendselected",(0,b.curry)(dv,"select")),u.registerAction("legendUnSelect","legendunselected",(0,b.curry)(dv,"unSelect"))}(u)}function Uc(u,o,a){var c=[1,1];c[u.getOrient().index]=0,(0,Vr.dt)(o,a,{type:"box",ignoreSize:!!c})}const fE=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.setScrollDataIndex=function(a){this.option.scrollDataIndex=a},o.prototype.init=function(a,l,c){var h=(0,Vr.tE)(a);u.prototype.init.call(this,a,l,c),Uc(this,a,h)},o.prototype.mergeOption=function(a,l){u.prototype.mergeOption.call(this,a,l),Uc(this,this.option,a)},o.type="legend.scroll",o.defaultOption=(0,qn.ZL)(dE.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),o}(dE);var D1=Pn.Z,M1=["width","height"],Ud=["x","y"];const Vk=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.newlineDisabled=!0,a._currentIndex=0,a}return(0,Tt.ZT)(o,u),o.prototype.init=function(){u.prototype.init.call(this),this.group.add(this._containerGroup=new D1),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new D1)},o.prototype.resetInner=function(){u.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},o.prototype.renderInner=function(a,l,c,h,f,g,m){var y=this;u.prototype.renderInner.call(this,a,l,c,h,f,g,m);var x=this._controllerGroup,w=l.get("pageIconSize",!0),D=b.isArray(w)?w:[w,w];L("pagePrev",0);var I=l.getModel("pageTextStyle");function L(N,Z){var se=N+"DataIndex",_e=_n.createIcon(l.get("pageIcons",!0)[l.getOrient().name][Z],{onclick:b.bind(y._pageGo,y,se,l,h)},{x:-D[0]/2,y:-D[1]/2,width:D[0],height:D[1]});_e.name=N,x.add(_e)}x.add(new _t.ZP({name:"pageText",style:{text:"xx/xx",fill:I.getTextColor(),font:I.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),L("pageNext",1)},o.prototype.layoutInner=function(a,l,c,h,f,g){var m=this.getSelectorGroup(),y=a.getOrient().index,x=M1[y],w=Ud[y],D=M1[1-y],I=Ud[1-y];f&&Vr.BZ("horizontal",m,a.get("selectorItemGap",!0));var L=a.get("selectorButtonGap",!0),N=m.getBoundingRect(),Z=[-N.x,-N.y],se=b.clone(c);f&&(se[x]=c[x]-N[x]-L);var _e=this._layoutContentAndController(a,h,se,y,x,D,I,w);if(f){if("end"===g)Z[y]+=_e[x]+L;else{var me=N[x]+L;Z[y]-=me,_e[w]-=me}_e[x]+=N[x]+L,Z[1-y]+=_e[I]+_e[D]/2-N[D]/2,_e[D]=Math.max(_e[D],N[D]),_e[I]=Math.min(_e[I],N[I]+Z[1-y]),m.x=Z[0],m.y=Z[1],m.markRedraw()}return _e},o.prototype._layoutContentAndController=function(a,l,c,h,f,g,m,y){var x=this.getContentGroup(),w=this._containerGroup,D=this._controllerGroup;Vr.BZ(a.get("orient"),x,a.get("itemGap"),h?c.width:null,h?null:c.height),Vr.BZ("horizontal",D,a.get("pageButtonItemGap",!0));var I=x.getBoundingRect(),L=D.getBoundingRect(),N=this._showController=I[f]>c[f],Z=[-I.x,-I.y];l||(Z[h]=x[y]);var se=[0,0],_e=[-L.x,-L.y],me=b.retrieve2(a.get("pageButtonGap",!0),a.get("itemGap",!0));N&&("end"===a.get("pageButtonPosition",!0)?_e[h]+=c[f]-L[f]:se[h]+=L[f]+me),_e[1-h]+=I[g]/2-L[g]/2,x.setPosition(Z),w.setPosition(se),D.setPosition(_e);var Pe={x:0,y:0};if(Pe[f]=N?c[f]:I[f],Pe[g]=Math.max(I[g],L[g]),Pe[m]=Math.min(0,L[m]+_e[1-h]),w.__rectSize=c[f],N){var Ie={x:0,y:0};Ie[f]=Math.max(c[f]-L[f]-me,0),Ie[g]=Pe[g],w.setClipPath(new Di.Z({shape:Ie})),w.__rectSize=Ie[f]}else D.eachChild(function(Ue){Ue.attr({invisible:!0,silent:!0})});var ke=this._getPageInfo(a);return null!=ke.pageIndex&&wn.D(x,{x:ke.contentPosition[0],y:ke.contentPosition[1]},N?a:null),this._updatePageInfoView(a,ke),Pe},o.prototype._pageGo=function(a,l,c){var h=this._getPageInfo(l)[a];null!=h&&c.dispatchAction({type:"legendScroll",scrollDataIndex:h,legendId:l.id})},o.prototype._updatePageInfoView=function(a,l){var c=this._controllerGroup;b.each(["pagePrev","pageNext"],function(x){var D=null!=l[x+"DataIndex"],I=c.childOfName(x);I&&(I.setStyle("fill",a.get(D?"pageIconColor":"pageIconInactiveColor",!0)),I.cursor=D?"pointer":"default")});var h=c.childOfName("pageText"),f=a.get("pageFormatter"),g=l.pageIndex,m=null!=g?g+1:0,y=l.pageCount;h&&f&&h.setStyle("text",b.isString(f)?f.replace("{current}",null==m?"":m+"").replace("{total}",null==y?"":y+""):f({current:m,total:y}))},o.prototype._getPageInfo=function(a){var l=a.get("scrollDataIndex",!0),c=this.getContentGroup(),h=this._containerGroup.__rectSize,f=a.getOrient().index,g=M1[f],m=Ud[f],y=this._findTargetItemIndex(l),x=c.children(),w=x[y],D=x.length,I=D?1:0,L={contentPosition:[c.x,c.y],pageCount:I,pageIndex:I-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!w)return L;var N=De(w);L.contentPosition[f]=-N.s;for(var Z=y+1,se=N,_e=N,me=null;Z<=D;++Z)(!(me=De(x[Z]))&&_e.e>se.s+h||me&&!Pe(me,se.s))&&(se=_e.i>se.i?_e:me)&&(null==L.pageNextDataIndex&&(L.pageNextDataIndex=se.i),++L.pageCount),_e=me;for(Z=y-1,se=N,_e=N,me=null;Z>=-1;--Z)(!(me=De(x[Z]))||!Pe(_e,me.s))&&se.i<_e.i&&(_e=se,null==L.pagePrevDataIndex&&(L.pagePrevDataIndex=se.i),++L.pageCount,++L.pageIndex),se=me;return L;function De(Ie){if(Ie){var ke=Ie.getBoundingRect(),Ue=ke[m]+Ie[m];return{s:Ue,e:Ue+ke[g],i:Ie.__legendDataIndex}}}function Pe(Ie,ke){return Ie.e>=ke&&Ie.s<=ke+h}},o.prototype._findTargetItemIndex=function(a){return this._showController?(this.getContentGroup().eachChild(function(f,g){var m=f.__legendDataIndex;null==h&&null!=m&&(h=g),m===a&&(l=g)}),l??h):0;var l,h},o.type="legend.scroll",o}(C1);function vE(u){(0,ce.D)(S1),u.registerComponentModel(fE),u.registerComponentView(Vk),function pE(u){u.registerAction("legendScroll","legendscroll",function(o,a){var l=o.scrollDataIndex;null!=l&&a.eachComponent({mainType:"legend",subType:"scroll",query:o},function(c){c.setScrollDataIndex(l)})})}(u)}const Na=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.type="dataZoom.inside",o.defaultOption=(0,qn.ZL)(p_.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),o}(p_);var ti=(0,xn.Yf)();function ya(u,o,a){ti(u).coordSysRecordMap.each(function(l){var c=l.dataZoomInfoMap.get(o.uid);c&&(c.getRange=a)})}function zk(u,o){if(o){u.removeKey(o.model.uid);var a=o.controller;a&&a.dispose()}}function Uk(u,o){u.isDisposed()||u.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:o})}function Gk(u,o,a,l){return u.coordinateSystem.containPoint([a,l])}var Tz=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type="dataZoom.inside",a}return(0,Tt.ZT)(o,u),o.prototype.render=function(a,l,c){u.prototype.render.apply(this,arguments),a.noTarget()?this._clear():(this.range=a.getPercentRange(),ya(c,a,{pan:(0,b.bind)(gE.pan,this),zoom:(0,b.bind)(gE.zoom,this),scrollMove:(0,b.bind)(gE.scrollMove,this)}))},o.prototype.dispose=function(){this._clear(),u.prototype.dispose.apply(this,arguments)},o.prototype._clear=function(){(function xr(u,o){for(var a=ti(u).coordSysRecordMap,l=a.keys(),c=0;c<l.length;c++){var f=a.get(l[c]),g=f.dataZoomInfoMap;if(g){var m=o.uid;g.get(m)&&(g.removeKey(m),g.keys().length||zk(a,f))}}})(this.api,this.dataZoomModel),this.range=null},o.type="dataZoom.inside",o}(Nx),gE={zoom:function(u,o,a,l){var c=this.range,h=c.slice(),f=u.axisModels[0];if(f){var g=Kh[o](null,[l.originX,l.originY],f,a,u),m=(g.signal>0?g.pixelStart+g.pixelLength-g.pixel:g.pixel-g.pixelStart)/g.pixelLength*(h[1]-h[0])+h[0],y=Math.max(1/l.scale,0);h[0]=(h[0]-m)*y+m,h[1]=(h[1]-m)*y+m;var x=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(Yu(0,h,[0,100],0,x.minSpan,x.maxSpan),this.range=h,c[0]!==h[0]||c[1]!==h[1])return h}},pan:hv(function(u,o,a,l,c,h){var f=Kh[l]([h.oldX,h.oldY],[h.newX,h.newY],o,c,a);return f.signal*(u[1]-u[0])*f.pixel/f.pixelLength}),scrollMove:hv(function(u,o,a,l,c,h){return Kh[l]([0,0],[h.scrollDelta,h.scrollDelta],o,c,a).signal*(u[1]-u[0])*h.scrollDelta})};function hv(u){return function(o,a,l,c){var h=this.range,f=h.slice(),g=o.axisModels[0];if(g&&(Yu(u(f,g,o,a,l,c),f,[0,100],"all"),this.range=f,h[0]!==f[0]||h[1]!==f[1]))return f}}var Kh={grid:function(u,o,a,l,c){var h=a.axis,f={},g=c.model.coordinateSystem.getRect();return u=u||[0,0],"x"===h.dim?(f.pixel=o[0]-u[0],f.pixelLength=g.width,f.pixelStart=g.x,f.signal=h.inverse?1:-1):(f.pixel=o[1]-u[1],f.pixelLength=g.height,f.pixelStart=g.y,f.signal=h.inverse?-1:1),f},polar:function(u,o,a,l,c){var h=a.axis,f={},g=c.model.coordinateSystem,m=g.getRadiusAxis().getExtent(),y=g.getAngleAxis().getExtent();return u=u?g.pointToCoord(u):[0,0],o=g.pointToCoord(o),"radiusAxis"===a.mainType?(f.pixel=o[0]-u[0],f.pixelLength=m[1]-m[0],f.pixelStart=m[0],f.signal=h.inverse?1:-1):(f.pixel=o[1]-u[1],f.pixelLength=y[1]-y[0],f.pixelStart=y[0],f.signal=h.inverse?-1:1),f},singleAxis:function(u,o,a,l,c){var h=a.axis,f=c.model.coordinateSystem.getRect(),g={};return u=u||[0,0],"horizontal"===h.orient?(g.pixel=o[0]-u[0],g.pixelLength=f.width,g.pixelStart=f.x,g.signal=h.inverse?1:-1):(g.pixel=o[1]-u[1],g.pixelLength=f.height,g.pixelStart=f.y,g.signal=h.inverse?-1:1),g}};const H_=Tz;function Vs(u){Ro(u),u.registerComponentModel(Na),u.registerComponentView(H_),function jk(u){u.registerProcessor(u.PRIORITY.PROCESSOR.FILTER,function(o,a){var l=ti(a),c=l.coordSysRecordMap||(l.coordSysRecordMap=(0,b.createHashMap)());c.each(function(h){h.dataZoomInfoMap=null}),o.eachComponent({mainType:"dataZoom",subType:"inside"},function(h){var f=kx(h);(0,b.each)(f.infoList,function(g){var m=g.model.uid,y=c.get(m)||c.set(m,function Hk(u,o){var a={model:o,containsPoint:(0,b.curry)(Gk,o),dispatchAction:(0,b.curry)(Uk,u),dataZoomInfoMap:null,controller:null},l=a.controller=new sp(u.getZr());return(0,b.each)(["pan","zoom","scrollMove"],function(c){l.on(c,function(h){var f=[];a.dataZoomInfoMap.each(function(g){if(h.isAvailableBehavior(g.model.option)){var m=(g.getRange||{})[c],y=m&&m(g.dzReferCoordSysInfo,a.model.mainType,a.controller,h);!g.model.get("disabled",!0)&&y&&f.push({dataZoomId:g.model.id,start:y[0],end:y[1]})}}),f.length&&a.dispatchAction(f)})}),a}(a,g.model));(y.dataZoomInfoMap||(y.dataZoomInfoMap=(0,b.createHashMap)())).set(h.uid,{dzReferCoordSysInfo:g,model:h,getRange:null})})}),c.each(function(h){var g,f=h.controller,m=h.dataZoomInfoMap;if(m){var y=m.keys()[0];null!=y&&(g=m.get(y))}if(g){var x=function Wk(u){var o,a="type_",l={type_true:2,type_move:1,type_false:0,type_undefined:-1},c=!0;return u.each(function(h){var f=h.model,g=!f.get("disabled",!0)&&(!f.get("zoomLock",!0)||"move");l[a+g]>l[a+o]&&(o=g),c=c&&f.get("preventDefaultMouseMove",!0)}),{controlType:o,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!c}}}(m);f.enable(x.controlType,x.opt),f.setPointerChecker(h.containsPoint),Uo.T9(h,"dispatchAction",g.model.get("throttle",!0),"fixRate")}else zk(c,h)})})}(u)}const Ez=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.type="dataZoom.slider",o.layoutMode="box",o.defaultOption=(0,qn.ZL)(p_.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),o}(p_);var U_=Di.Z,fv="horizontal",_E="vertical",pl=["line","bar","candlestick","scatter"],A1={easing:"cubicOut",duration:100,delay:0};function yE(u){return"vertical"===u?"ns-resize":"ew-resize"}const Kk=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a._displayables={},a}return(0,Tt.ZT)(o,u),o.prototype.init=function(a,l){this.api=l,this._onBrush=(0,b.bind)(this._onBrush,this),this._onBrushEnd=(0,b.bind)(this._onBrushEnd,this)},o.prototype.render=function(a,l,c,h){if(u.prototype.render.apply(this,arguments),Uo.T9(this,"_dispatchZoomAction",a.get("throttle"),"fixRate"),this._orient=a.getOrient(),!1!==a.get("show"))return a.noTarget()?(this._clear(),void this.group.removeAll()):((!h||"dataZoom"!==h.type||h.from!==this.uid)&&this._buildView(),void this._updateView());this.group.removeAll()},o.prototype.dispose=function(){this._clear(),u.prototype.dispose.apply(this,arguments)},o.prototype._clear=function(){Uo.ZH(this,"_dispatchZoomAction");var a=this.api.getZr();a.off("mousemove",this._onBrush),a.off("mouseup",this._onBrushEnd)},o.prototype._buildView=function(){var a=this.group;a.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var l=this._displayables.sliderGroup=new Pn.Z;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),a.add(l),this._positionGroup()},o.prototype._resetLocation=function(){var a=this.dataZoomModel,l=this.api,h=a.get("brushSelect")?7:0,f=this._findCoordRect(),g={width:l.getWidth(),height:l.getHeight()},m=this._orient===fv?{right:g.width-f.x-f.width,top:g.height-30-7-h,width:f.width,height:30}:{right:7,top:f.y,width:30,height:f.height},y=Vr.tE(a.option);(0,b.each)(["right","top","width","height"],function(w){"ph"===y[w]&&(y[w]=m[w])});var x=Vr.ME(y,g);this._location={x:x.x,y:x.y},this._size=[x.width,x.height],this._orient===_E&&this._size.reverse()},o.prototype._positionGroup=function(){var a=this.group,l=this._location,c=this._orient,h=this.dataZoomModel.getFirstTargetAxisModel(),f=h&&h.get("inverse"),g=this._displayables.sliderGroup,m=(this._dataShadowInfo||{}).otherAxisInverse;g.attr(c!==fv||f?c===fv&&f?{scaleY:m?1:-1,scaleX:-1}:c!==_E||f?{scaleY:m?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:m?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:m?1:-1,scaleX:1});var y=a.getBoundingRect([g]);a.x=l.x-y.x,a.y=l.y-y.y,a.markRedraw()},o.prototype._getViewExtent=function(){return[0,this._size[0]]},o.prototype._renderBackground=function(){var a=this.dataZoomModel,l=this._size,c=this._displayables.sliderGroup,h=a.get("brushSelect");c.add(new U_({silent:!0,shape:{x:0,y:0,width:l[0],height:l[1]},style:{fill:a.get("backgroundColor")},z2:-40}));var f=new U_({shape:{x:0,y:0,width:l[0],height:l[1]},style:{fill:"transparent"},z2:0,onclick:(0,b.bind)(this._onClickPanel,this)}),g=this.api.getZr();h?(f.on("mousedown",this._onBrushStart,this),f.cursor="crosshair",g.on("mousemove",this._onBrush),g.on("mouseup",this._onBrushEnd)):(g.off("mousemove",this._onBrush),g.off("mouseup",this._onBrushEnd)),c.add(f)},o.prototype._renderDataShadow=function(){var a=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],a){var l=this._size,c=this._shadowSize||[],h=a.series,f=h.getRawData(),g=h.getShadowDim&&h.getShadowDim(),m=g&&f.getDimensionInfo(g)?h.getShadowDim():a.otherDim;if(null!=m){var y=this._shadowPolygonPts,x=this._shadowPolylinePts;if(f!==this._shadowData||m!==this._shadowDim||l[0]!==c[0]||l[1]!==c[1]){var w=f.getDataExtent(m),D=.3*(w[1]-w[0]);w=[w[0]-D,w[1]+D];var De,I=[0,l[1]],N=[[l[0],0],[0,0]],Z=[],se=l[0]/(f.count()-1),_e=0,me=Math.round(f.count()/l[0]);f.each([m],function(Ye,Ke){if(me>0&&Ke%me)_e+=se;else{var qe=null==Ye||isNaN(Ye)||""===Ye,ut=qe?0:(0,It.NU)(Ye,w,I,!0);qe&&!De&&Ke?(N.push([N[N.length-1][0],0]),Z.push([Z[Z.length-1][0],0])):!qe&&De&&(N.push([_e,0]),Z.push([_e,0])),N.push([_e,ut]),Z.push([_e,ut]),_e+=se,De=qe}}),y=this._shadowPolygonPts=N,x=this._shadowPolylinePts=Z}this._shadowData=f,this._shadowDim=m,this._shadowSize=[l[0],l[1]];for(var Ke,qe,ut,pt,Pe=this.dataZoomModel,ke=0;ke<3;ke++){var Ue=(Ke=void 0,qe=void 0,void 0,void 0,Ke=Pe.getModel(1===ke?"selectedDataBackground":"dataBackground"),qe=new Pn.Z,ut=new tl.Z({shape:{points:y},segmentIgnoreThreshold:1,style:Ke.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),pt=new Ps.Z({shape:{points:x},segmentIgnoreThreshold:1,style:Ke.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19}),qe.add(ut),qe.add(pt),qe);this._displayables.sliderGroup.add(Ue),this._displayables.dataShadowSegs.push(Ue)}}}},o.prototype._prepareDataShadowInfo=function(){var a=this.dataZoomModel,l=a.get("showDataShadow");if(!1!==l){var c,h=this.ecModel;return a.eachTargetAxis(function(f,g){var m=a.getAxisProxy(f,g).getTargetSeriesModels();(0,b.each)(m,function(y){if(!(c||!0!==l&&(0,b.indexOf)(pl,y.get("type"))<0)){var D,x=h.getComponent(cl(f),g).axis,w=function $k(u){return{x:"y",y:"x",radius:"angle",angle:"radius"}[u]}(f),I=y.coordinateSystem;null!=w&&I.getOtherAxis&&(D=I.getOtherAxis(x).inverse),w=y.getData().mapDimension(w),c={thisAxis:x,series:y,thisDim:f,otherDim:w,otherAxisInverse:D}}},this)},this),c}},o.prototype._renderHandle=function(){var a=this.group,l=this._displayables,c=l.handles=[null,null],h=l.handleLabels=[null,null],f=this._displayables.sliderGroup,g=this._size,m=this.dataZoomModel,y=this.api,x=m.get("borderRadius")||0,w=m.get("brushSelect"),D=l.filler=new U_({silent:w,style:{fill:m.get("fillerColor")},textConfig:{position:"inside"}});f.add(D),f.add(new U_({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:g[0],height:g[1],r:x},style:{stroke:m.get("dataBackgroundColor")||m.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),(0,b.each)([0,1],function(me){var De=m.get("handleIcon");!ai.Pw[De]&&De.indexOf("path://")<0&&De.indexOf("image://")<0&&(De="path://"+De);var Pe=(0,ai.th)(De,-1,0,2,2,null,!0);Pe.attr({cursor:yE(this._orient),draggable:!0,drift:(0,b.bind)(this._onDragMove,this,me),ondragend:(0,b.bind)(this._onDragEnd,this),onmouseover:(0,b.bind)(this._showDataInfo,this,!0),onmouseout:(0,b.bind)(this._showDataInfo,this,!1),z2:5});var Ie=Pe.getBoundingRect(),ke=m.get("handleSize");this._handleHeight=(0,It.GM)(ke,this._size[1]),this._handleWidth=Ie.width/Ie.height*this._handleHeight,Pe.setStyle(m.getModel("handleStyle").getItemStyle()),Pe.style.strokeNoScale=!0,Pe.rectHover=!0,Pe.ensureState("emphasis").style=m.getModel(["emphasis","handleStyle"]).getItemStyle(),(0,Ut.vF)(Pe);var Ue=m.get("handleColor");null!=Ue&&(Pe.style.fill=Ue),f.add(c[me]=Pe);var Ye=m.getModel("textStyle");a.add(h[me]=new _t.ZP({silent:!0,invisible:!0,style:(0,qt.Lr)(Ye,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:Ye.getTextColor(),font:Ye.getFont()}),z2:10}))},this);var I=D;if(w){var L=(0,It.GM)(m.get("moveHandleSize"),g[1]),N=l.moveHandle=new Di.Z({style:m.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:g[1]-.5,height:L}}),Z=.8*L,se=l.moveHandleIcon=(0,ai.th)(m.get("moveHandleIcon"),-Z/2,-Z/2,Z,Z,"#fff",!0);se.silent=!0,se.y=g[1]+L/2-.5,N.ensureState("emphasis").style=m.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var _e=Math.min(g[1]/2,Math.max(L,10));(I=l.moveZone=new Di.Z({invisible:!0,shape:{y:g[1]-_e,height:L+_e}})).on("mouseover",function(){y.enterEmphasis(N)}).on("mouseout",function(){y.leaveEmphasis(N)}),f.add(N),f.add(se),f.add(I)}I.attr({draggable:!0,cursor:yE(this._orient),drift:(0,b.bind)(this._onDragMove,this,"all"),ondragstart:(0,b.bind)(this._showDataInfo,this,!0),ondragend:(0,b.bind)(this._onDragEnd,this),onmouseover:(0,b.bind)(this._showDataInfo,this,!0),onmouseout:(0,b.bind)(this._showDataInfo,this,!1)})},o.prototype._resetInterval=function(){var a=this._range=this.dataZoomModel.getPercentRange(),l=this._getViewExtent();this._handleEnds=[(0,It.NU)(a[0],[0,100],l,!0),(0,It.NU)(a[1],[0,100],l,!0)]},o.prototype._updateInterval=function(a,l){var c=this.dataZoomModel,h=this._handleEnds,f=this._getViewExtent(),g=c.findRepresentativeAxisProxy().getMinMaxSpan(),m=[0,100];Yu(l,h,f,c.get("zoomLock")?"all":a,null!=g.minSpan?(0,It.NU)(g.minSpan,m,f,!0):null,null!=g.maxSpan?(0,It.NU)(g.maxSpan,m,f,!0):null);var y=this._range,x=this._range=(0,It.dt)([(0,It.NU)(h[0],f,m,!0),(0,It.NU)(h[1],f,m,!0)]);return!y||y[0]!==x[0]||y[1]!==x[1]},o.prototype._updateView=function(a){var l=this._displayables,c=this._handleEnds,h=(0,It.dt)(c.slice()),f=this._size;(0,b.each)([0,1],function(I){var N=this._handleHeight;l.handles[I].attr({scaleX:N/2,scaleY:N/2,x:c[I]+(I?-1:1),y:f[1]/2-N/2})},this),l.filler.setShape({x:h[0],y:0,width:h[1]-h[0],height:f[1]});var g={x:h[0],width:h[1]-h[0]};l.moveHandle&&(l.moveHandle.setShape(g),l.moveZone.setShape(g),l.moveZone.getBoundingRect(),l.moveHandleIcon&&l.moveHandleIcon.attr("x",g.x+g.width/2));for(var m=l.dataShadowSegs,y=[0,h[0],h[1],f[0]],x=0;x<m.length;x++){var w=m[x],D=w.getClipPath();D||(D=new Di.Z,w.setClipPath(D)),D.setShape({x:y[x],y:0,width:y[x+1]-y[x],height:f[1]})}this._updateDataInfo(a)},o.prototype._updateDataInfo=function(a){var l=this.dataZoomModel,c=this._displayables,h=c.handleLabels,f=this._orient,g=["",""];if(l.get("showDetail")){var m=l.findRepresentativeAxisProxy();if(m){var y=m.getAxisModel().axis,x=this._range,w=a?m.calculateDataWindow({start:x[0],end:x[1]}).valueWindow:m.getDataValueWindow();g=[this._formatLabel(w[0],y),this._formatLabel(w[1],y)]}}var D=(0,It.dt)(this._handleEnds.slice());function I(L){var N=_n.getTransform(c.handles[L].parent,this.group),Z=_n.transformDirection(0===L?"right":"left",N),se=this._handleWidth/2+5,_e=_n.applyTransform([D[L]+(0===L?-se:se),this._size[1]/2],N);h[L].setStyle({x:_e[0],y:_e[1],verticalAlign:f===fv?"middle":Z,align:f===fv?Z:"center",text:g[L]})}I.call(this,0),I.call(this,1)},o.prototype._formatLabel=function(a,l){var c=this.dataZoomModel,h=c.get("labelFormatter"),f=c.get("labelPrecision");(null==f||"auto"===f)&&(f=l.getPixelPrecision());var g=null==a||isNaN(a)?"":"category"===l.type||"time"===l.type?l.scale.getLabel({value:Math.round(a)}):a.toFixed(Math.min(f,20));return(0,b.isFunction)(h)?h(a,g):(0,b.isString)(h)?h.replace("{value}",g):g},o.prototype._showDataInfo=function(a){var l=this._displayables,c=l.handleLabels;c[0].attr("invisible",!(a=this._dragging||a)),c[1].attr("invisible",!a),l.moveHandle&&this.api[a?"enterEmphasis":"leaveEmphasis"](l.moveHandle,1)},o.prototype._onDragMove=function(a,l,c,h){this._dragging=!0,nl.sT(h.event);var f=this._displayables.sliderGroup.getLocalTransform(),g=_n.applyTransform([l,c],f,!0),m=this._updateInterval(a,g[0]),y=this.dataZoomModel.get("realtime");this._updateView(!y),m&&y&&this._dispatchZoomAction(!0)},o.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction(!1)},o.prototype._onClickPanel=function(a){var l=this._size,c=this._displayables.sliderGroup.transformCoordToLocal(a.offsetX,a.offsetY);if(!(c[0]<0||c[0]>l[0]||c[1]<0||c[1]>l[1])){var h=this._handleEnds,g=this._updateInterval("all",c[0]-(h[0]+h[1])/2);this._updateView(),g&&this._dispatchZoomAction(!1)}},o.prototype._onBrushStart=function(a){this._brushStart=new ea.Z(a.offsetX,a.offsetY),this._brushing=!0,this._brushStartTime=+new Date},o.prototype._onBrushEnd=function(a){if(this._brushing){var l=this._displayables.brushRect;if(this._brushing=!1,l){l.attr("ignore",!0);var c=l.shape;if(!(+new Date-this._brushStartTime<200&&Math.abs(c.width)<5)){var f=this._getViewExtent(),g=[0,100];this._range=(0,It.dt)([(0,It.NU)(c.x,f,g,!0),(0,It.NU)(c.x+c.width,f,g,!0)]),this._handleEnds=[c.x,c.x+c.width],this._updateView(),this._dispatchZoomAction(!1)}}}},o.prototype._onBrush=function(a){this._brushing&&(nl.sT(a.event),this._updateBrushRect(a.offsetX,a.offsetY))},o.prototype._updateBrushRect=function(a,l){var c=this._displayables,f=c.brushRect;f||(f=c.brushRect=new U_({silent:!0,style:this.dataZoomModel.getModel("brushStyle").getItemStyle()}),c.sliderGroup.add(f)),f.attr("ignore",!1);var g=this._brushStart,m=this._displayables.sliderGroup,y=m.transformCoordToLocal(a,l),x=m.transformCoordToLocal(g.x,g.y),w=this._size;y[0]=Math.max(Math.min(w[0],y[0]),0),f.setShape({x:x[0],y:0,width:y[0]-x[0],height:w[1]})},o.prototype._dispatchZoomAction=function(a){var l=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:a?A1:null,start:l[0],end:l[1]})},o.prototype._findCoordRect=function(){var a,l=kx(this.dataZoomModel).infoList;if(!a&&l.length){var c=l[0].model.coordinateSystem;a=c.getRect&&c.getRect()}if(!a){var h=this.api.getWidth(),f=this.api.getHeight();a={x:.2*h,y:.2*f,width:.6*h,height:.6*f}}return a},o.type="dataZoom.slider",o}(Nx);function Qh(u){u.registerComponentModel(Ez),u.registerComponentView(Kk),Ro(u)}var io={get:function(u,o,a){var l=b.clone((Ar[u]||{})[o]);return a&&b.isArray(l)?l[l.length-1]:l}},Ar={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};const Zr=io;var bE=to.mapVisual,G_=to.eachVisual,ec=b.isArray,pv=b.each,Ll=It.dt,qk=It.NU;const W_=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.stateList=["inRange","outOfRange"],a.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],a.layoutMode={type:"box",ignoreSize:!0},a.dataBound=[-1/0,1/0],a.targetVisuals={},a.controllerVisuals={},a}return(0,Tt.ZT)(o,u),o.prototype.init=function(a,l,c){this.mergeDefaultAndTheme(a,c)},o.prototype.optionUpdated=function(a,l){!l&&a1(this.option,a,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},o.prototype.resetVisual=function(a){var l=this.stateList;a=b.bind(a,this),this.controllerVisuals=r1(this.option.controller,l,a),this.targetVisuals=r1(this.option.target,l,a)},o.prototype.getItemSymbol=function(){return null},o.prototype.getTargetSeriesIndices=function(){var a=this.option.seriesIndex,l=[];return null==a||"all"===a?this.ecModel.eachSeries(function(c,h){l.push(h)}):l=xn.kF(a),l},o.prototype.eachTargetSeries=function(a,l){b.each(this.getTargetSeriesIndices(),function(c){var h=this.ecModel.getSeriesByIndex(c);h&&a.call(l,h)},this)},o.prototype.isTargetSeries=function(a){var l=!1;return this.eachTargetSeries(function(c){c===a&&(l=!0)}),l},o.prototype.formatValueText=function(a,l,c){var y,h=this.option,f=h.precision,g=this.dataBound,m=h.formatter;c=c||["<",">"],b.isArray(a)&&(a=a.slice(),y=!0);var x=l?a:y?[w(a[0]),w(a[1])]:w(a);return b.isString(m)?m.replace("{value}",y?x[0]:x).replace("{value2}",y?x[1]:x):b.isFunction(m)?y?m(a[0],a[1]):m(a):y?a[0]===g[0]?c[0]+" "+x[1]:a[1]===g[1]?c[1]+" "+x[0]:x[0]+" - "+x[1]:x;function w(D){return D===g[0]?"min":D===g[1]?"max":(+D).toFixed(Math.min(f,20))}},o.prototype.resetExtent=function(){var a=this.option,l=Ll([a.min,a.max]);this._dataExtent=l},o.prototype.getDataDimensionIndex=function(a){var l=this.option.dimension;if(null!=l)return a.getDimensionIndex(l);for(var c=a.dimensions,h=c.length-1;h>=0;h--){var g=a.getDimensionInfo(c[h]);if(!g.isCalculationCoord)return g.storeDimIndex}},o.prototype.getExtent=function(){return this._dataExtent.slice()},o.prototype.completeVisualOption=function(){var a=this.ecModel,l=this.option,c={inRange:l.inRange,outOfRange:l.outOfRange},h=l.target||(l.target={}),f=l.controller||(l.controller={});b.merge(h,c),b.merge(f,c);var g=this.isCategory();function m(w){ec(l.color)&&!w.inRange&&(w.inRange={color:l.color.slice().reverse()}),w.inRange=w.inRange||{color:a.get("gradientColor")}}m.call(this,h),m.call(this,f),function y(w,D,I){var L=w[D],N=w[I];L&&!N&&(N=w[I]={},pv(L,function(Z,se){if(to.isValidType(se)){var _e=Zr.get(se,"inactive",g);null!=_e&&(N[se]=_e,"color"===se&&!N.hasOwnProperty("opacity")&&!N.hasOwnProperty("colorAlpha")&&(N.opacity=[0,0]))}}))}.call(this,h,"inRange","outOfRange"),function x(w){var D=(w.inRange||{}).symbol||(w.outOfRange||{}).symbol,I=(w.inRange||{}).symbolSize||(w.outOfRange||{}).symbolSize,L=this.get("inactiveColor"),Z=this.getItemSymbol()||"roundRect";pv(this.stateList,function(se){var _e=this.itemSize,me=w[se];me||(me=w[se]={color:g?L:[L]}),null==me.symbol&&(me.symbol=D&&b.clone(D)||(g?Z:[Z])),null==me.symbolSize&&(me.symbolSize=I&&b.clone(I)||(g?_e[0]:[_e[0],_e[0]])),me.symbol=bE(me.symbol,function(Ie){return"none"===Ie?Z:Ie});var De=me.symbolSize;if(null!=De){var Pe=-1/0;G_(De,function(Ie){Ie>Pe&&(Pe=Ie)}),me.symbolSize=bE(De,function(Ie){return qk(Ie,[0,Pe],[0,_e[0]],!0)})}},this)}.call(this,f)},o.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},o.prototype.isCategory=function(){return!!this.option.categories},o.prototype.setSelected=function(a){},o.prototype.getSelected=function(){return null},o.prototype.getValueState=function(a){return null},o.prototype.getVisualMeta=function(a){return null},o.type="visualMap",o.dependencies=["series"],o.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},o}(ma.Z);var $i=[20,140];function vv(u,o,a){if(a[0]===a[1])return a.slice();for(var c=(a[1]-a[0])/200,h=a[0],f=[],g=0;g<=200&&h<a[1];g++)f.push(h),h+=c;return f.push(a[1]),f}const eN=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.optionUpdated=function(a,l){u.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(c){c.mappingMethod="linear",c.dataExtent=this.getExtent()}),this._resetRange()},o.prototype.resetItemSize=function(){u.prototype.resetItemSize.apply(this,arguments);var a=this.itemSize;(null==a[0]||isNaN(a[0]))&&(a[0]=$i[0]),(null==a[1]||isNaN(a[1]))&&(a[1]=$i[1])},o.prototype._resetRange=function(){var a=this.getExtent(),l=this.option.range;!l||l.auto?(a.auto=1,this.option.range=a):b.isArray(l)&&(l[0]>l[1]&&l.reverse(),l[0]=Math.max(l[0],a[0]),l[1]=Math.min(l[1],a[1]))},o.prototype.completeVisualOption=function(){u.prototype.completeVisualOption.apply(this,arguments),b.each(this.stateList,function(a){var l=this.option.controller[a].symbolSize;l&&l[0]!==l[1]&&(l[0]=l[1]/3)},this)},o.prototype.setSelected=function(a){this.option.range=a.slice(),this._resetRange()},o.prototype.getSelected=function(){var a=this.getExtent(),l=It.dt((this.get("range")||[]).slice());return l[0]>a[1]&&(l[0]=a[1]),l[1]>a[1]&&(l[1]=a[1]),l[0]<a[0]&&(l[0]=a[0]),l[1]<a[0]&&(l[1]=a[0]),l},o.prototype.getValueState=function(a){var l=this.option.range,c=this.getExtent();return(l[0]<=c[0]||l[0]<=a)&&(l[1]>=c[1]||a<=l[1])?"inRange":"outOfRange"},o.prototype.findTargetDataIndices=function(a){var l=[];return this.eachTargetSeries(function(c){var h=[],f=c.getData();f.each(this.getDataDimensionIndex(f),function(g,m){a[0]<=g&&g<=a[1]&&h.push(m)},this),l.push({seriesId:c.id,dataIndex:h})},this),l},o.prototype.getVisualMeta=function(a){var l=vv(0,0,this.getExtent()),c=vv(0,0,this.option.range.slice()),h=[];function f(I,L){h.push({value:I,color:a(I,L)})}for(var g=0,m=0,y=c.length,x=l.length;m<x&&(!c.length||l[m]<=c[0]);m++)l[m]<c[g]&&f(l[m],"outOfRange");for(var w=1;g<y;g++,w=0)w&&h.length&&f(c[g],"outOfRange"),f(c[g],"inRange");for(w=1;m<x;m++)(!c.length||c[c.length-1]<l[m])&&(w&&(h.length&&f(h[h.length-1].value,"outOfRange"),w=0),f(l[m],"outOfRange"));var D=h.length;return{stops:h,outerColors:[D?h[0].color:"transparent",D?h[D-1].color:"transparent"]}},o.type="visualMap.continuous",o.defaultOption=(0,qn.ZL)(W_.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),o}(W_),xE=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a.autoPositionValues={left:1,right:1,top:1,bottom:1},a}return(0,Tt.ZT)(o,u),o.prototype.init=function(a,l){this.ecModel=a,this.api=l},o.prototype.render=function(a,l,c,h){this.visualMapModel=a,!1!==a.get("show")?this.doRender(a,l,c,h):this.group.removeAll()},o.prototype.renderBackground=function(a){var l=this.visualMapModel,c=Va.MY(l.get("padding")||0),h=a.getBoundingRect();a.add(new Di.Z({z2:-1,silent:!0,shape:{x:h.x-c[3],y:h.y-c[0],width:h.width+c[3]+c[1],height:h.height+c[0]+c[2]},style:{fill:l.get("backgroundColor"),stroke:l.get("borderColor"),lineWidth:l.get("borderWidth")}}))},o.prototype.getControllerVisual=function(a,l,c){var h=(c=c||{}).forceState,f=this.visualMapModel,g={};if("color"===l){var m=f.get("contentColor");g.color=m}function y(I){return g[I]}function x(I,L){g[I]=L}var w=f.controllerVisuals[h||f.getValueState(a)],D=to.prepareVisualTypes(w);return b.each(D,function(I){var L=w[I];c.convertOpacityToAlpha&&"opacity"===I&&(I="colorAlpha",L=w.__alphaForOpacity),to.dependsOn(I,l)&&L&&L.applyVisual(a,y,x)}),g[l]},o.prototype.positionGroup=function(a){var c=this.api;Vr.p$(a,this.visualMapModel.getBoxLayoutParams(),{width:c.getWidth(),height:c.getHeight()})},o.prototype.doRender=function(a,l,c,h){},o.type="visualMap",o}(ga.Z);var I1=[["left","right","width"],["top","bottom","height"]];function Z_(u,o,a){var l=u.option,c=l.align;if(null!=c&&"auto"!==c)return c;for(var h={width:o.getWidth(),height:o.getHeight()},f="horizontal"===l.orient?1:0,g=I1[f],m=[0,null,10],y={},x=0;x<3;x++)y[I1[1-f][x]]=m[x],y[g[x]]=2===x?a[0]:l[g[x]];var w=[["x","width",3],["y","height",0]][f],D=(0,Vr.ME)(y,h,l.padding);return g[(D.margin[w[2]]||0)+D[w[0]]+.5*D[w[1]]<.5*h[w[1]]?0:1]}function Gd(u,o){return b.each(u||[],function(a){null!=a.dataIndex&&(a.dataIndexInside=a.dataIndex,a.dataIndex=null),a.highlightKey="visualMap"+(o?o.componentIndex:"")}),u}var vl=It.NU,tN=b.each,P1=Math.min,R1=Math.max;function L1(u,o,a,l){return new tl.Z({shape:{points:u},draggable:!!a,cursor:o,drift:a,onmousemove:function(c){nl.sT(c.event)},ondragend:l})}function O1(u){return!!(u.get("hoverLinkOnHandle")??u.get("realtime"))}function gv(u){return"vertical"===u?"ns-resize":"ew-resize"}const mv=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a._shapes={},a._dataInterval=[],a._handleEnds=[],a._hoverLinkDataIndices=[],a}return(0,Tt.ZT)(o,u),o.prototype.doRender=function(a,l,c,h){this._api=c,(!h||"selectDataRange"!==h.type||h.from!==this.uid)&&this._buildView()},o.prototype._buildView=function(){this.group.removeAll();var a=this.visualMapModel,l=this.group;this._orient=a.get("orient"),this._useHandle=a.get("calculable"),this._resetInterval(),this._renderBar(l);var c=a.get("text");this._renderEndsText(l,c,0),this._renderEndsText(l,c,1),this._updateView(!0),this.renderBackground(l),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(l)},o.prototype._renderEndsText=function(a,l,c){if(l){var h=l[1-c];h=null!=h?h+"":"";var f=this.visualMapModel,g=f.get("textGap"),m=f.itemSize,y=this._shapes.mainGroup,x=this._applyTransform([m[0]/2,0===c?-g:m[1]+g],y),w=this._applyTransform(0===c?"bottom":"top",y),D=this._orient;this.group.add(new _t.ZP({style:(0,qt.Lr)(this.visualMapModel.textStyleModel,{x:x[0],y:x[1],verticalAlign:"horizontal"===D?"middle":w,align:"horizontal"===D?w:"center",text:h})}))}},o.prototype._renderBar=function(a){var l=this.visualMapModel,c=this._shapes,h=l.itemSize,f=this._orient,g=this._useHandle,m=Z_(l,this.api,h),y=c.mainGroup=this._createBarGroup(m),x=new Pn.Z;y.add(x),x.add(c.outOfRange=L1()),x.add(c.inRange=L1(null,g?gv(this._orient):null,b.bind(this._dragHandle,this,"all",!1),b.bind(this._dragHandle,this,"all",!0))),x.setClipPath(new Di.Z({shape:{x:0,y:0,width:h[0],height:h[1],r:3}}));var w=l.textStyleModel.getTextRect("\u56fd"),D=R1(w.width,w.height);g&&(c.handleThumbs=[],c.handleLabels=[],c.handleLabelPoints=[],this._createHandle(l,y,0,h,D,f),this._createHandle(l,y,1,h,D,f)),this._createIndicator(l,y,h,D,f),a.add(y)},o.prototype._createHandle=function(a,l,c,h,f,g){var m=b.bind(this._dragHandle,this,c,!1),y=b.bind(this._dragHandle,this,c,!0),x=(0,Ce.GM)(a.get("handleSize"),h[0]),w=(0,ai.th)(a.get("handleIcon"),-x/2,-x/2,x,x,null,!0),D=gv(this._orient);w.attr({cursor:D,draggable:!0,drift:m,ondragend:y,onmousemove:function(se){nl.sT(se.event)}}),w.x=h[0]/2,w.useStyle(a.getModel("handleStyle").getItemStyle()),w.setStyle({strokeNoScale:!0,strokeFirst:!0}),w.style.lineWidth*=2,w.ensureState("emphasis").style=a.getModel(["emphasis","handleStyle"]).getItemStyle(),(0,Ut.Nj)(w,!0),l.add(w);var L=new _t.ZP({cursor:D,draggable:!0,drift:m,onmousemove:function(se){nl.sT(se.event)},ondragend:y,style:(0,qt.Lr)(this.visualMapModel.textStyleModel,{x:0,y:0,text:""})});L.ensureState("blur").style={opacity:.1},L.stateTransition={duration:200},this.group.add(L);var N=[x,0],Z=this._shapes;Z.handleThumbs[c]=w,Z.handleLabelPoints[c]=N,Z.handleLabels[c]=L},o.prototype._createIndicator=function(a,l,c,h,f){var g=(0,Ce.GM)(a.get("indicatorSize"),c[0]),m=(0,ai.th)(a.get("indicatorIcon"),-g/2,-g/2,g,g,null,!0);m.attr({cursor:"move",invisible:!0,silent:!0,x:c[0]/2});var y=a.getModel("indicatorStyle").getItemStyle();if(m instanceof be.ZP){var x=m.style;m.useStyle(b.extend({image:x.image,x:x.x,y:x.y,width:x.width,height:x.height},y))}else m.useStyle(y);l.add(m);var D=new _t.ZP({silent:!0,invisible:!0,style:(0,qt.Lr)(this.visualMapModel.textStyleModel,{x:0,y:0,text:""})});this.group.add(D);var I=[("horizontal"===f?h/2:6)+c[0]/2,0],L=this._shapes;L.indicator=m,L.indicatorLabel=D,L.indicatorLabelPoint=I,this._firstShowIndicator=!0},o.prototype._dragHandle=function(a,l,c,h){if(this._useHandle){if(this._dragging=!l,!l){var f=this._applyTransform([c,h],this._shapes.mainGroup,!0);this._updateInterval(a,f[1]),this._hideIndicator(),this._updateView()}l===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),l?!this._hovering&&this._clearHoverLinkToSeries():O1(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[a],!1)}},o.prototype._resetInterval=function(){var a=this.visualMapModel,l=this._dataInterval=a.getSelected(),c=a.getExtent(),h=[0,a.itemSize[1]];this._handleEnds=[vl(l[0],c,h,!0),vl(l[1],c,h,!0)]},o.prototype._updateInterval=function(a,l){var c=this.visualMapModel,h=this._handleEnds,f=[0,c.itemSize[1]];Yu(l=l||0,h,f,a,0);var g=c.getExtent();this._dataInterval=[vl(h[0],f,g,!0),vl(h[1],f,g,!0)]},o.prototype._updateView=function(a){var l=this.visualMapModel,c=l.getExtent(),h=this._shapes,f=[0,l.itemSize[1]],g=a?f:this._handleEnds,m=this._createBarVisual(this._dataInterval,c,g,"inRange"),y=this._createBarVisual(c,c,f,"outOfRange");h.inRange.setStyle({fill:m.barColor}).setShape("points",m.barPoints),h.outOfRange.setStyle({fill:y.barColor}).setShape("points",y.barPoints),this._updateHandle(g,m)},o.prototype._createBarVisual=function(a,l,c,h){var f={forceState:h,convertOpacityToAlpha:!0},g=this._makeColorGradient(a,f),m=[this.getControllerVisual(a[0],"symbolSize",f),this.getControllerVisual(a[1],"symbolSize",f)],y=this._createBarPoints(c,m);return{barColor:new Bf.Z(0,0,0,1,g),barPoints:y,handlesColor:[g[0].color,g[g.length-1].color]}},o.prototype._makeColorGradient=function(a,l){var h=[],f=(a[1]-a[0])/100;h.push({color:this.getControllerVisual(a[0],"color",l),offset:0});for(var g=1;g<100;g++){var m=a[0]+f*g;if(m>a[1])break;h.push({color:this.getControllerVisual(m,"color",l),offset:g/100})}return h.push({color:this.getControllerVisual(a[1],"color",l),offset:1}),h},o.prototype._createBarPoints=function(a,l){var c=this.visualMapModel.itemSize;return[[c[0]-l[0],a[0]],[c[0],a[0]],[c[0],a[1]],[c[0]-l[1],a[1]]]},o.prototype._createBarGroup=function(a){var l=this._orient,c=this.visualMapModel.get("inverse");return new Pn.Z("horizontal"!==l||c?"horizontal"===l&&c?{scaleX:"bottom"===a?-1:1,rotation:-Math.PI/2}:"vertical"!==l||c?{scaleX:"left"===a?1:-1}:{scaleX:"left"===a?1:-1,scaleY:-1}:{scaleX:"bottom"===a?1:-1,rotation:Math.PI/2})},o.prototype._updateHandle=function(a,l){if(this._useHandle){var c=this._shapes,h=this.visualMapModel,f=c.handleThumbs,g=c.handleLabels,m=h.itemSize,y=h.getExtent();tN([0,1],function(x){var w=f[x];w.setStyle("fill",l.handlesColor[x]),w.y=a[x];var D=vl(a[x],[0,m[1]],y,!0),I=this.getControllerVisual(D,"symbolSize");w.scaleX=w.scaleY=I/m[0],w.x=m[0]-I/2;var L=_n.applyTransform(c.handleLabelPoints[x],_n.getTransform(w,this.group));g[x].setStyle({x:L[0],y:L[1],text:h.formatValueText(this._dataInterval[x]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",c.mainGroup):"center"})},this)}},o.prototype._showIndicator=function(a,l,c,h){var f=this.visualMapModel,g=f.getExtent(),m=f.itemSize,y=[0,m[1]],x=this._shapes,w=x.indicator;if(w){w.attr("invisible",!1);var I=this.getControllerVisual(a,"color",{convertOpacityToAlpha:!0}),L=this.getControllerVisual(a,"symbolSize"),N=vl(a,g,y,!0),Z=m[0]-L/2,se={x:w.x,y:w.y};w.y=N,w.x=Z;var _e=_n.applyTransform(x.indicatorLabelPoint,_n.getTransform(w,this.group)),me=x.indicatorLabel;me.attr("invisible",!1);var De=this._applyTransform("left",x.mainGroup),Ie="horizontal"===this._orient;me.setStyle({text:(c||"")+f.formatValueText(l),verticalAlign:Ie?De:"middle",align:Ie?"center":De});var ke={x:Z,y:N,style:{fill:I}},Ue={style:{x:_e[0],y:_e[1]}};if(f.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var Ye={duration:100,easing:"cubicInOut",additive:!0};w.x=se.x,w.y=se.y,w.animateTo(ke,Ye),me.animateTo(Ue,Ye)}else w.attr(ke),me.attr(Ue);this._firstShowIndicator=!1;var Ke=this._shapes.handleLabels;if(Ke)for(var qe=0;qe<Ke.length;qe++)this._api.enterBlur(Ke[qe])}},o.prototype._enableHoverLinkToSeries=function(){var a=this;this._shapes.mainGroup.on("mousemove",function(l){if(a._hovering=!0,!a._dragging){var c=a.visualMapModel.itemSize,h=a._applyTransform([l.offsetX,l.offsetY],a._shapes.mainGroup,!0,!0);h[1]=P1(R1(0,h[1]),c[1]),a._doHoverLinkToSeries(h[1],0<=h[0]&&h[0]<=c[0])}}).on("mouseout",function(){a._hovering=!1,!a._dragging&&a._clearHoverLinkToSeries()})},o.prototype._enableHoverLinkFromSeries=function(){var a=this.api.getZr();this.visualMapModel.option.hoverLink?(a.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),a.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},o.prototype._doHoverLinkToSeries=function(a,l){var c=this.visualMapModel;if(c.option.hoverLink){var f=[0,c.itemSize[1]],g=c.getExtent();a=P1(R1(f[0],a),f[1]);var m=function aN(u,o,a){var l=6,c=u.get("hoverLinkDataSize");return c&&(l=vl(c,o,a,!0)/2),l}(c,g,f),y=[a-m,a+m],x=vl(a,f,g,!0),w=[vl(y[0],f,g,!0),vl(y[1],f,g,!0)];y[0]<f[0]&&(w[0]=-1/0),y[1]>f[1]&&(w[1]=1/0),l&&(w[0]===-1/0?this._showIndicator(x,w[1],"< ",m):w[1]===1/0?this._showIndicator(x,w[0],"> ",m):this._showIndicator(x,x,"\u2248 ",m));var D=this._hoverLinkDataIndices,I=[];(l||O1(c))&&(I=this._hoverLinkDataIndices=c.findTargetDataIndices(w));var L=xn.XI(D,I);this._dispatchHighDown("downplay",Gd(L[0],c)),this._dispatchHighDown("highlight",Gd(L[1],c))}},o.prototype._hoverLinkFromSeriesMouseOver=function(a){var l;if((0,I0.o)(a.target,function(m){var y=(0,Mr.A)(m);if(null!=y.dataIndex)return l=y,!0},!0),l){var c=this.ecModel.getSeriesByIndex(l.seriesIndex),h=this.visualMapModel;if(h.isTargetSeries(c)){var f=c.getData(l.dataType),g=f.getStore().get(h.getDataDimensionIndex(f),l.dataIndex);isNaN(g)||this._showIndicator(g,g)}}},o.prototype._hideIndicator=function(){var a=this._shapes;a.indicator&&a.indicator.attr("invisible",!0),a.indicatorLabel&&a.indicatorLabel.attr("invisible",!0);var l=this._shapes.handleLabels;if(l)for(var c=0;c<l.length;c++)this._api.leaveBlur(l[c])},o.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var a=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",Gd(a,this.visualMapModel)),a.length=0},o.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var a=this.api.getZr();a.off("mouseover",this._hoverLinkFromSeriesMouseOver),a.off("mouseout",this._hideIndicator)},o.prototype._applyTransform=function(a,l,c,h){var f=_n.getTransform(l,h?null:this.group);return b.isArray(a)?_n.applyTransform(a,f,c):_n.transformDirection(a,f,c)},o.prototype._dispatchHighDown=function(a,l){l&&l.length&&this.api.dispatchAction({type:a,batch:l})},o.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},o.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},o.type="visualMap.continuous",o}(xE);var oN={type:"selectDataRange",event:"dataRangeSelected",update:"update"},sN=function(u,o){o.eachComponent({mainType:"visualMap",query:u},function(a){a.setSelected(u.selected)})},k1=[{createOnAllSeries:!0,reset:function(u,o){var a=[];return o.eachComponent("visualMap",function(l){var c=u.pipelineContext;!l.isTargetSeries(u)||c&&c.large||a.push(function cz(u,o,a,l){var c={};return b.each(u,function(h){var f=to.prepareVisualTypes(o[h]);c[h]=f}),{progress:function(f,g){var m;function y(Pe){return(0,bu.Or)(g,w,Pe)}function x(Pe,Ie){(0,bu.LZ)(g,w,Pe,Ie)}null!=l&&(m=g.getDimensionIndex(l));for(var w,D=g.getStore();null!=(w=f.next());){var I=g.getRawDataItem(w);if(!I||!1!==I.visualMap)for(var L=null!=l?D.get(m,w):w,N=a(L),Z=o[N],se=c[N],_e=0,me=se.length;_e<me;_e++){var De=se[_e];Z[De]&&Z[De].applyVisual(L,y,x)}}}}}(l.stateList,l.targetVisuals,b.bind(l.getValueState,l),l.getDataDimensionIndex(u.getData())))}),a}},{createOnAllSeries:!0,reset:function(u,o){var a=u.getData(),l=[];o.eachComponent("visualMap",function(c){if(c.isTargetSeries(u)){var h=c.getVisualMeta(b.bind(CE,null,u,c))||{stops:[],outerColors:[]},f=c.getDataDimensionIndex(a);f>=0&&(h.dimension=f,l.push(h))}}),u.getData().setVisual("visualMeta",l)}}];function CE(u,o,a,l){for(var c=o.targetVisuals[l],h=to.prepareVisualTypes(c),f={color:(0,bu.UL)(u.getData(),"color")},g=0,m=h.length;g<m;g++){var y=h[g],x=c["opacity"===y?"__alphaForOpacity":y];x&&x.applyVisual(a,w,D)}return f.color;function w(I){return f[I]}function D(I,L){f[I]=L}}var wE=b.each;function N1(u){var o=u&&u.visualMap;b.isArray(o)||(o=o?[o]:[]),wE(o,function(a){if(a){qh(a,"splitList")&&!qh(a,"pieces")&&(a.pieces=a.splitList,delete a.splitList);var l=a.pieces;l&&b.isArray(l)&&wE(l,function(c){b.isObject(c)&&(qh(c,"start")&&!qh(c,"min")&&(c.min=c.start),qh(c,"end")&&!qh(c,"max")&&(c.max=c.end))})}})}function qh(u,o){return u&&u.hasOwnProperty&&u.hasOwnProperty(o)}var SE=!1;function DE(u){SE||(SE=!0,u.registerSubTypeDefaulter("visualMap",function(o){return o.categories||(o.pieces?o.pieces.length>0:o.splitNumber>0)&&!o.calculable?"piecewise":"continuous"}),u.registerAction(oN,sN),(0,b.each)(k1,function(o){u.registerVisual(u.PRIORITY.VISUAL.COMPONENT,o)}),u.registerPreprocessor(N1))}function Y_(u){u.registerComponentModel(eN),u.registerComponentView(mv),DE(u)}var lN=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a._pieceList=[],a}return(0,Tt.ZT)(o,u),o.prototype.optionUpdated=function(a,l){u.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var c=this._mode=this._determineMode();this._pieceList=[],uN[this._mode].call(this,this._pieceList),this._resetSelected(a,l);var h=this.option.categories;this.resetVisual(function(f,g){"categories"===c?(f.mappingMethod="category",f.categories=b.clone(h)):(f.dataExtent=this.getExtent(),f.mappingMethod="piecewise",f.pieceList=b.map(this._pieceList,function(m){return m=b.clone(m),"inRange"!==g&&(m.visual=null),m}))})},o.prototype.completeVisualOption=function(){var a=this.option,l={},c=to.listVisualTypes(),h=this.isCategory();function f(g,m,y){return g&&g[m]&&g[m].hasOwnProperty(y)}b.each(a.pieces,function(g){b.each(c,function(m){g.hasOwnProperty(m)&&(l[m]=1)})}),b.each(l,function(g,m){var y=!1;b.each(this.stateList,function(x){y=y||f(a,x,m)||f(a.target,x,m)},this),!y&&b.each(this.stateList,function(x){(a[x]||(a[x]={}))[m]=Zr.get(m,"inRange"===x?"active":"inactive",h)})},this),u.prototype.completeVisualOption.apply(this,arguments)},o.prototype._resetSelected=function(a,l){var c=this.option,h=this._pieceList,f=(l?c:a).selected||{};if(c.selected=f,b.each(h,function(m,y){var x=this.getSelectedMapKey(m);f.hasOwnProperty(x)||(f[x]=!0)},this),"single"===c.selectedMode){var g=!1;b.each(h,function(m,y){var x=this.getSelectedMapKey(m);f[x]&&(g?f[x]=!1:g=!0)},this)}},o.prototype.getItemSymbol=function(){return this.get("itemSymbol")},o.prototype.getSelectedMapKey=function(a){return"categories"===this._mode?a.value+"":a.index+""},o.prototype.getPieceList=function(){return this._pieceList},o.prototype._determineMode=function(){var a=this.option;return a.pieces&&a.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},o.prototype.setSelected=function(a){this.option.selected=b.clone(a)},o.prototype.getValueState=function(a){var l=to.findPieceIndex(a,this._pieceList);return null!=l&&this.option.selected[this.getSelectedMapKey(this._pieceList[l])]?"inRange":"outOfRange"},o.prototype.findTargetDataIndices=function(a){var l=[],c=this._pieceList;return this.eachTargetSeries(function(h){var f=[],g=h.getData();g.each(this.getDataDimensionIndex(g),function(m,y){to.findPieceIndex(m,c)===a&&f.push(y)},this),l.push({seriesId:h.id,dataIndex:f})},this),l},o.prototype.getRepresentValue=function(a){var l;if(this.isCategory())l=a.value;else if(null!=a.value)l=a.value;else{var c=a.interval||[];l=c[0]===-1/0&&c[1]===1/0?0:(c[0]+c[1])/2}return l},o.prototype.getVisualMeta=function(a){if(!this.isCategory()){var l=[],c=["",""],h=this,g=this._pieceList.slice();if(g.length){var m=g[0].interval[0];m!==-1/0&&g.unshift({interval:[-1/0,m]}),(m=g[g.length-1].interval[1])!==1/0&&g.push({interval:[m,1/0]})}else g.push({interval:[-1/0,1/0]});var y=-1/0;return b.each(g,function(x){var w=x.interval;w&&(w[0]>y&&f([y,w[0]],"outOfRange"),f(w.slice()),y=w[1])},this),{stops:l,outerColors:c}}function f(x,w){var D=h.getRepresentValue({interval:x});w||(w=h.getValueState(D));var I=a(D,w);x[0]===-1/0?c[0]=I:x[1]===1/0?c[1]=I:l.push({value:x[0],color:I},{value:x[1],color:I})}},o.type="visualMap.piecewise",o.defaultOption=(0,qn.ZL)(W_.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),o}(W_),uN={splitNumber:function(u){var o=this.option,a=Math.min(o.precision,20),l=this.getExtent(),c=o.splitNumber;c=Math.max(parseInt(c,10),1),o.splitNumber=c;for(var h=(l[1]-l[0])/c;+h.toFixed(a)!==h&&a<5;)a++;o.precision=a,h=+h.toFixed(a),o.minOpen&&u.push({interval:[-1/0,l[0]],close:[0,0]});for(var f=0,g=l[0];f<c;g+=h,f++)u.push({interval:[g,f===c-1?l[1]:g+h],close:[1,1]});o.maxOpen&&u.push({interval:[l[1],1/0],close:[0,0]}),(0,It.nR)(u),b.each(u,function(y,x){y.index=x,y.text=this.formatValueText(y.interval)},this)},categories:function(u){var o=this.option;b.each(o.categories,function(a){u.push({text:this.formatValueText(a,!0),value:a})},this),ME(o,u)},pieces:function(u){var o=this.option;b.each(o.pieces,function(a,l){b.isObject(a)||(a={value:a});var c={text:"",index:l};if(null!=a.label&&(c.text=a.label),a.hasOwnProperty("value")){var h=c.value=a.value;c.interval=[h,h],c.close=[1,1]}else{for(var f=c.interval=[],g=c.close=[0,0],m=[1,0,1],y=[-1/0,1/0],x=[],w=0;w<2;w++){for(var D=[["gte","gt","min"],["lte","lt","max"]][w],I=0;I<3&&null==f[w];I++)f[w]=a[D[I]],g[w]=m[I],x[w]=2===I;null==f[w]&&(f[w]=y[w])}x[0]&&f[1]===1/0&&(g[0]=0),x[1]&&f[0]===-1/0&&(g[1]=0),f[0]===f[1]&&g[0]&&g[1]&&(c.value=f[0])}c.visual=to.retrieveVisuals(a),u.push(c)},this),ME(o,u),(0,It.nR)(u),b.each(u,function(a){var l=a.close;a.text=a.text||this.formatValueText(null!=a.value?a.value:a.interval,!1,[["<","\u2264"][l[1]],[">","\u2265"][l[0]]])},this)}};function ME(u,o){var a=u.inverse;("vertical"===u.orient?!a:a)&&o.reverse()}const F1=lN,TE=function(u){function o(){var a=null!==u&&u.apply(this,arguments)||this;return a.type=o.type,a}return(0,Tt.ZT)(o,u),o.prototype.doRender=function(){var a=this.group;a.removeAll();var l=this.visualMapModel,c=l.get("textGap"),h=l.textStyleModel,f=h.getFont(),g=h.getTextColor(),m=this._getItemAlign(),y=l.itemSize,x=this._getViewData(),w=x.endsText,D=b.retrieve(l.get("showLabel",!0),!w);w&&this._renderEndsText(a,w[0],y,D,m),b.each(x.viewPieceList,function(I){var L=I.piece,N=new Pn.Z;N.onclick=b.bind(this._onItemClick,this,L),this._enableHoverLink(N,I.indexInModelPieceList);var Z=l.getRepresentValue(L);if(this._createItemSymbol(N,Z,[0,0,y[0],y[1]]),D){var se=this.visualMapModel.getValueState(Z);N.add(new _t.ZP({style:{x:"right"===m?-c:y[0]+c,y:y[1]/2,text:L.text,verticalAlign:"middle",align:m,font:f,fill:g,opacity:"outOfRange"===se?.5:1}}))}a.add(N)},this),w&&this._renderEndsText(a,w[1],y,D,m),Vr.BZ(l.get("orient"),a,l.get("itemGap")),this.renderBackground(a),this.positionGroup(a)},o.prototype._enableHoverLink=function(a,l){var c=this;a.on("mouseover",function(){return h("highlight")}).on("mouseout",function(){return h("downplay")});var h=function(f){var g=c.visualMapModel;g.option.hoverLink&&c.api.dispatchAction({type:f,batch:Gd(g.findTargetDataIndices(l),g)})}},o.prototype._getItemAlign=function(){var a=this.visualMapModel,l=a.option;if("vertical"===l.orient)return Z_(a,this.api,a.itemSize);var c=l.align;return(!c||"auto"===c)&&(c="left"),c},o.prototype._renderEndsText=function(a,l,c,h,f){if(l){var g=new Pn.Z;g.add(new _t.ZP({style:(0,qt.Lr)(this.visualMapModel.textStyleModel,{x:h?"right"===f?c[0]:0:c[0]/2,y:c[1]/2,verticalAlign:"middle",align:h?f:"center",text:l})})),a.add(g)}},o.prototype._getViewData=function(){var a=this.visualMapModel,l=b.map(a.getPieceList(),function(g,m){return{piece:g,indexInModelPieceList:m}}),c=a.get("text"),h=a.get("orient"),f=a.get("inverse");return("horizontal"===h?f:!f)?l.reverse():c&&(c=c.slice().reverse()),{viewPieceList:l,endsText:c}},o.prototype._createItemSymbol=function(a,l,c){a.add((0,ai.th)(this.getControllerVisual(l,"symbol"),c[0],c[1],c[2],c[3],this.getControllerVisual(l,"color")))},o.prototype._onItemClick=function(a){var l=this.visualMapModel,c=l.option,h=c.selectedMode;if(h){var f=b.clone(c.selected),g=l.getSelectedMapKey(a);"single"===h||!0===h?(f[g]=!0,b.each(f,function(m,y){f[y]=y===g})):f[g]=!f[g],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:f})}},o.type="visualMap.piecewise",o}(xE);function EE(u){u.registerComponentModel(F1),u.registerComponentView(TE),DE(u)}var cN={label:{enabled:!0},decal:{show:!1}},Wd=(0,xn.Yf)(),dN={};function AE(u,o){var a=u.getModel("aria");if(a.get("enabled")){var l=b.clone(cN);b.merge(l.label,u.getLocaleModel().get("aria"),!1),b.merge(a.option,l,!1),function c(){if(a.getModel("decal").get("show")){var w=b.createHashMap();u.eachSeries(function(D){if(!D.isColorBySeries()){var I=w.get(D.type);I||w.set(D.type,I={}),Wd(D).scope=I}}),u.eachRawSeries(function(D){if(!u.isSeriesFiltered(D))if(b.isFunction(D.enableAriaDecal))D.enableAriaDecal();else{var I=D.getData();if(D.isColorBySeries()){var _e=(0,Zg.i)(D.ecModel,D.name,dN,u.getSeriesCount()),me=I.getVisual("decal");I.setVisual("decal",De(me,_e))}else{var L=D.getRawData(),N={},Z=Wd(D).scope;I.each(function(Pe){var Ie=I.getRawIndex(Pe);N[Ie]=Pe});var se=L.count();L.each(function(Pe){var Ie=N[Pe],ke=L.getName(Pe)||Pe+"",Ue=(0,Zg.i)(D.ecModel,ke,Z,se),Ye=I.getItemVisual(Ie,"decal");I.setItemVisual(Ie,"decal",De(Ye,Ue))})}}function De(Pe,Ie){var ke=Pe?b.extend(b.extend({},Ie),Pe):Ie;return ke.dirty=!0,ke}})}}(),function h(){var y=u.getLocaleModel().get("aria"),x=a.getModel("label");if(x.option=b.defaults(x.option,y),x.get("enabled")){var w=o.getZr().dom;if(x.get("description"))return void w.setAttribute("aria-label",x.get("description"));var Z,D=u.getSeriesCount(),I=x.get(["data","maxCount"])||10,L=x.get(["series","maxCount"])||10,N=Math.min(D,L);if(!(D<1)){var se=function g(){var y=u.get("title");return y&&y.length&&(y=y[0]),y&&y.text}();if(se)Z=f(x.get(["general","withTitle"]),{title:se});else Z=x.get(["general","withoutTitle"]);var me=[];Z+=f(x.get(D>1?["series","multiple","prefix"]:["series","single","prefix"]),{seriesCount:D}),u.eachSeries(function(Ue,Ye){if(Ye<N){var Ke=void 0,ut=Ue.get("name")?"withName":"withoutName";Ke=f(Ke=x.get(D>1?["series","multiple",ut]:["series","single",ut]),{seriesId:Ue.seriesIndex,seriesName:Ue.get("name"),seriesType:m(Ue.subType)});var pt=Ue.getData();pt.count()>I?Ke+=f(x.get(["data","partialData"]),{displayCnt:I}):Ke+=x.get(["data","allData"]);for(var wt=x.get(["data","separator","middle"]),kt=x.get(["data","separator","end"]),en=[],jt=0;jt<pt.count();jt++)if(jt<I){var dn=pt.getName(jt),Fn=pt.getValues(jt),Hn=x.get(["data",dn?"withName":"withoutName"]);en.push(f(Hn,{name:dn,value:Fn.join(wt)}))}Ke+=en.join(wt)+kt,me.push(Ke)}});var Pe=x.getModel(["series","multiple","separator"]),Ie=Pe.get("middle"),ke=Pe.get("end");Z+=me.join(Ie)+ke,w.setAttribute("aria-label",Z)}}}()}function f(y,x){if(!b.isString(y))return y;var w=y;return b.each(x,function(D,I){w=w.replace(new RegExp("\\{\\s*"+I+"\\s*\\}","g"),D)}),w}function m(y){return u.getLocaleModel().get(["series","typeNames"])[y]||"\u81ea\u5b9a\u4e49\u56fe"}}function IE(u){if(u&&u.aria){var o=u.aria;null!=o.show&&(o.enabled=o.show),o.label=o.label||{},b.each(["description","general","series","data"],function(a){null!=o[a]&&(o.label[a]=o[a])})}}var Gc={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},PE=function(){function u(o){null==(this._condVal=(0,b.isString)(o)?new RegExp(o):(0,b.isRegExp)(o)?o:null)&&(0,_a._y)("")}return u.prototype.evaluate=function(o){var a=typeof o;return(0,b.isString)(a)?this._condVal.test(o):!!(0,b.isNumber)(a)&&this._condVal.test(o+"")},u}(),fN=function(){function u(){}return u.prototype.evaluate=function(){return this.value},u}(),zs=function(){function u(){}return u.prototype.evaluate=function(){for(var o=this.children,a=0;a<o.length;a++)if(!o[a].evaluate())return!1;return!0},u}(),pN=function(){function u(){}return u.prototype.evaluate=function(){for(var o=this.children,a=0;a<o.length;a++)if(o[a].evaluate())return!0;return!1},u}(),RE=function(){function u(){}return u.prototype.evaluate=function(){return!this.child.evaluate()},u}(),V1=function(){function u(){}return u.prototype.evaluate=function(){for(var o=!!this.valueParser,l=(0,this.getValue)(this.valueGetterParam),c=o?this.valueParser(l):null,h=0;h<this.subCondList.length;h++)if(!this.subCondList[h].evaluate(o?c:l))return!1;return!0},u}();function Wc(u,o){if(!0===u||!1===u){var a=new fN;return a.value=u,a}return z1(u)||(0,_a._y)(""),u.and?_v("and",u,o):u.or?_v("or",u,o):u.not?function LE(u,o){var a=u.not;z1(a)||(0,_a._y)("");var c=new RE;return c.child=Wc(a,o),c.child||(0,_a._y)(""),c}(u,o):function Pz(u,o){for(var l=o.prepareGetValue(u),c=[],h=(0,b.keys)(u),f=u.parser,g=f?(0,Hc.o2)(f):null,m=0;m<h.length;m++){var y=h[m];if("parser"!==y&&!o.valueGetterAttrMap.get(y)){var x=(0,b.hasOwn)(Gc,y)?Gc[y]:y,w=u[y],D=g?g(w):w,I=(0,Hc.tR)(x,D)||"reg"===x&&new PE(D);I||(0,_a._y)(""),c.push(I)}}c.length||(0,_a._y)("");var L=new V1;return L.valueGetterParam=l,L.valueParser=g,L.getValue=o.getValue,L.subCondList=c,L}(u,o)}function _v(u,o,a){var l=o[u];(0,b.isArray)(l)||(0,_a._y)(""),l.length||(0,_a._y)("");var h="and"===u?new zs:new pN;return h.children=(0,b.map)(l,function(f){return Wc(f,a)}),h.children.length||(0,_a._y)(""),h}function z1(u){return(0,b.isObject)(u)&&!(0,b.isArrayLike)(u)}var vN=function(){function u(o,a){this._cond=Wc(o,a)}return u.prototype.evaluate=function(){return this._cond.evaluate()},u}(),gN={type:"echarts:filter",transform:function(u){for(var a,o=u.upstream,l=function H1(u,o){return new vN(u,o)}(u.config,{valueGetterAttrMap:(0,b.createHashMap)({dimension:!0}),prepareGetValue:function(g){var y=g.dimension;(0,b.hasOwn)(g,"dimension")||(0,_a._y)("");var x=o.getDimensionInfo(y);return x||(0,_a._y)(""),{dimIdx:x.index}},getValue:function(g){return o.retrieveValueFromItem(a,g.dimIdx)}}),c=[],h=0,f=o.count();h<f;h++)a=o.getRawDataItem(h),l.evaluate()&&c.push(a);return{data:c}}},Ol={type:"echarts:sort",transform:function(u){var o=u.upstream,l="",c=(0,xn.kF)(u.config);c.length||(0,_a._y)(l);var h=[];(0,b.each)(c,function(x){var w=x.dimension,D=x.order,I=x.parser,L=x.incomparable;null==w&&(0,_a._y)(l),"asc"!==D&&"desc"!==D&&(0,_a._y)(l),L&&"min"!==L&&"max"!==L&&(0,_a._y)(""),"asc"!==D&&"desc"!==D&&(0,_a._y)("");var se=o.getDimensionInfo(w);se||(0,_a._y)(l);var _e=I?(0,Hc.o2)(I):null;I&&!_e&&(0,_a._y)(l),h.push({dimIdx:se.index,parser:_e,comparator:new Hc.ID(D,L)})});var f=o.sourceFormat;f!==TD.XD&&f!==TD.qb&&(0,_a._y)(l);for(var g=[],m=0,y=o.count();m<y;m++)g.push(o.getRawDataItem(m));return g.sort(function(x,w){for(var D=0;D<h.length;D++){var I=h[D],L=o.retrieveValueFromItem(x,I.dimIdx),N=o.retrieveValueFromItem(w,I.dimIdx);I.parser&&(L=I.parser(L),N=I.parser(N));var Z=I.comparator.evaluate(L,N);if(0!==Z)return Z}return 0}),{data:g}}},_N=z(4664),Cu=fe.Z.CMD;function Jh(u,o){return Math.abs(u-o)<1e-5}function U1(u){var c,pt,yt,wt,kt,en,jt,dn,Fn,Hn,lr,br,Fr,xi,ir,Ci,vi,Ni,o=u.data,a=u.len(),l=[],h=0,f=0,g=0,m=0;function y(pt,yt){c&&c.length>2&&l.push(c),c=[pt,yt]}function x(pt,yt,wt,kt){Jh(pt,wt)&&Jh(yt,kt)||c.push(pt,yt,wt,kt,wt,kt)}for(var D,I,L,N,Z=0;Z<a;){var se=o[Z++],_e=1===Z;switch(_e&&(g=h=o[Z],m=f=o[Z+1],(se===Cu.L||se===Cu.C||se===Cu.Q)&&(c=[g,m])),se){case Cu.M:h=g=o[Z++],f=m=o[Z++],y(g,m);break;case Cu.L:x(h,f,D=o[Z++],I=o[Z++]),h=D,f=I;break;case Cu.C:c.push(o[Z++],o[Z++],o[Z++],o[Z++],h=o[Z++],f=o[Z++]);break;case Cu.Q:D=o[Z++],I=o[Z++],L=o[Z++],N=o[Z++],c.push(h+2/3*(D-h),f+2/3*(I-f),L+2/3*(D-L),N+2/3*(I-N),L,N),h=L,f=N;break;case Cu.A:var me=o[Z++],De=o[Z++],Pe=o[Z++],Ie=o[Z++],ke=o[Z++],Ue=o[Z++]+ke;Z+=1;var Ye=!o[Z++];D=Math.cos(ke)*Pe+me,I=Math.sin(ke)*Ie+De,_e?y(g=D,m=I):x(h,f,D,I),h=Math.cos(Ue)*Pe+me,f=Math.sin(Ue)*Ie+De;for(var Ke=(Ye?-1:1)*Math.PI/2,qe=ke;Ye?qe>Ue:qe<Ue;qe+=Ke){pt=qe,yt=Ye?Math.max(qe+Ke,Ue):Math.min(qe+Ke,Ue),wt=me,kt=De,en=Pe,jt=Ie,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,dn=Math.abs(yt-pt),Fn=4*Math.tan(dn/4)/3,Hn=yt<pt?-1:1,lr=Math.cos(pt),br=Math.sin(pt),Fr=Math.cos(yt),xi=Math.sin(yt),c.push(lr*en+wt-(vi=en*Fn*Hn)*br,br*jt+kt+(Ni=jt*Fn*Hn)*lr,(ir=Fr*en+wt)+vi*xi,(Ci=xi*jt+kt)-Ni*Fr,ir,Ci)}break;case Cu.R:g=h=o[Z++],m=f=o[Z++],D=g+o[Z++],I=m+o[Z++],y(D,m),x(D,m,D,I),x(D,I,g,I),x(g,I,g,m),x(g,m,D,m);break;case Cu.Z:c&&x(h,f,g,m),h=g,f=m}}return c&&c.length>2&&l.push(c),l}function G1(u,o,a,l,c,h,f,g,m,y){if(Jh(u,a)&&Jh(o,l)&&Jh(c,f)&&Jh(h,g))m.push(f,g);else{var x=2/y,w=x*x,D=f-u,I=g-o,L=Math.sqrt(D*D+I*I);D/=L,I/=L;var N=a-u,Z=l-o,se=c-f,_e=h-g,me=N*N+Z*Z,De=se*se+_e*_e;if(me<w&&De<w)m.push(f,g);else{var Pe=D*N+I*Z,Ie=-D*se-I*_e;if(me-Pe*Pe<w&&Pe>=0&&De-Ie*Ie<w&&Ie>=0)m.push(f,g);else{var Ye=[],Ke=[];(0,Cs.Vz)(u,a,c,f,.5,Ye),(0,Cs.Vz)(o,l,h,g,.5,Ke),G1(Ye[0],Ke[0],Ye[1],Ke[1],Ye[2],Ke[2],Ye[3],Ke[3],m,y),G1(Ye[4],Ke[4],Ye[5],Ke[5],Ye[6],Ke[6],Ye[7],Ke[7],m,y)}}}}function OE(u,o,a){var h=Math.abs(u[o]/u[1-o]),f=Math.ceil(Math.sqrt(h*a)),g=Math.floor(a/f);0===g&&(g=1,f=a);for(var m=[],y=0;y<f;y++)m.push(g);var w=a-f*g;if(w>0)for(y=0;y<w;y++)m[y%f]+=1;return m}function kE(u,o,a){for(var l=u.r0,c=u.r,h=u.startAngle,g=Math.abs(u.endAngle-h),m=g*c,y=c-l,x=m>Math.abs(y),w=OE([m,y],x?0:1,o),D=(x?g:y)/w.length,I=0;I<w.length;I++)for(var L=(x?y:g)/w[I],N=0;N<w[I];N++){var Z={};x?(Z.startAngle=h+D*I,Z.endAngle=h+D*(I+1),Z.r0=l+L*N,Z.r=l+L*(N+1)):(Z.startAngle=h+L*N,Z.endAngle=h+L*(N+1),Z.r0=l+D*I,Z.r=l+D*(I+1)),Z.clockwise=u.clockwise,Z.cx=u.cx,Z.cy=u.cy,a.push(Z)}}function NE(u,o,a,l){return u*l-a*o}function xN(u,o,a,l,c,h,f,g){var m=a-u,y=l-o,x=f-c,w=g-h,D=NE(x,w,m,y);if(Math.abs(D)<1e-6)return null;var N=NE(u-c,o-h,x,w)/D;return N<0||N>1?null:new ea.Z(N*m+u,N*y+o)}function CN(u,o,a){var l=new ea.Z;ea.Z.sub(l,a,o),l.normalize();var c=new ea.Z;return ea.Z.sub(c,u,o),c.dot(l)}function ef(u,o){var a=u[u.length-1];a&&a[0]===o[0]&&a[1]===o[1]||u.push(o)}function FE(u){var o=u.points,a=[],l=[];(0,Gu.zk)(o,a,l);var c=new yr.Z(a[0],a[1],l[0]-a[0],l[1]-a[1]),h=c.width,f=c.height,g=c.x,m=c.y,y=new ea.Z,x=new ea.Z;return h>f?(y.x=x.x=g+h/2,y.y=m,x.y=m+f):(y.y=x.y=m+f/2,y.x=g,x.x=g+h),function wN(u,o,a){for(var l=u.length,c=[],h=0;h<l;h++){var f=u[h],g=u[(h+1)%l],m=xN(f[0],f[1],g[0],g[1],o.x,o.y,a.x,a.y);m&&c.push({projPt:CN(m,o,a),pt:m,idx:h})}if(c.length<2)return[{points:u},{points:u}];c.sort(function(Z,se){return Z.projPt-se.projPt});var y=c[0],x=c[c.length-1];if(x.idx<y.idx){var w=y;y=x,x=w}var D=[y.pt.x,y.pt.y],I=[x.pt.x,x.pt.y],L=[D],N=[I];for(h=y.idx+1;h<=x.idx;h++)ef(L,u[h].slice());for(ef(L,I),ef(L,D),h=x.idx+1;h<=y.idx+l;h++)ef(N,u[h%l].slice());return ef(N,D),ef(N,I),[{points:L},{points:N}]}(o,y,x)}function X_(u,o,a,l){if(1===a)l.push(o);else{var c=Math.floor(a/2),h=u(o);X_(u,h[0],c,l),X_(u,h[1],a-c,l)}return l}function SN(u,o){o.setStyle(u.style),o.z=u.z,o.z2=u.z2,o.zlevel=u.zlevel}function W1(u,o){var a=u.length,l=o.length;if(a===l)return[u,o];for(var c=[],h=[],f=a<l?u:o,g=Math.min(a,l),m=Math.abs(l-a)/6,x=Math.ceil(m/((g-2)/6))+1,w=[f[0],f[1]],D=m,I=2;I<g;){var L=f[I-2],N=f[I-1],Z=f[I++],se=f[I++],_e=f[I++],me=f[I++],De=f[I++],Pe=f[I++];if(D<=0)w.push(Z,se,_e,me,De,Pe);else{for(var Ie=Math.min(D,x-1)+1,ke=1;ke<=Ie;ke++){var Ue=ke/Ie;(0,Cs.Vz)(L,Z,_e,De,Ue,c),(0,Cs.Vz)(N,se,me,Pe,Ue,h),w.push(c[1],h[1],c[2],h[2],L=c[3],N=h[3]),Z=c[5],se=h[5],_e=c[6],me=h[6]}D-=Ie-1}}return f===u?[w,o]:[u,w]}function $_(u,o){for(var a=u.length,l=u[a-2],c=u[a-1],h=[],f=0;f<o.length;)h[f++]=l,h[f++]=c;return h}function EN(u){for(var o=0,a=0,l=0,c=u.length,h=0,f=c-2;h<c;f=h,h+=2){var g=u[f],m=u[f+1],y=u[h],x=u[h+1],w=g*x-y*m;o+=w,a+=(g+y)*w,l+=(m+x)*w}return 0===o?[u[0]||0,u[1]||0]:[a/o/3,l/o/3,o]}function kl(u,o,a,l){for(var c=(u.length-2)/6,h=1/0,f=0,g=u.length,m=g-2,y=0;y<c;y++){for(var x=6*y,w=0,D=0;D<g;D+=2){var I=0===D?x:(x+D-2)%m+2,_e=o[D]-l[0]-(u[I]-a[0]),me=o[D+1]-l[1]-(u[I+1]-a[1]);w+=_e*_e+me*me}w<h&&(h=w,f=y)}return f}function VE(u){for(var o=[],a=u.length,l=0;l<a;l+=2)o[l]=u[a-l-2],o[l+1]=u[a-l-1];return o}function K_(u){return u.__isCombineMorphing}var zE="__mOriginal_";function j1(u,o,a){var l=zE+o,c=u[l]||u[o];u[l]||(u[l]=u[o]);var h=a.replace,f=a.after,g=a.before;u[o]=function(){var y,m=arguments;return g&&g.apply(this,m),y=h?h.apply(this,m):c.apply(this,m),f&&f.apply(this,m),y}}function Q_(u,o){var a=zE+o;u[a]&&(u[o]=u[a],u[a]=null)}function IN(u,o){for(var a=0;a<u.length;a++)for(var l=u[a],c=0;c<l.length;){var h=l[c],f=l[c+1];l[c++]=o[0]*h+o[2]*f+o[4],l[c++]=o[1]*h+o[3]*f+o[5]}}function PN(u,o){var a=u.getUpdatedPathProxy(),l=o.getUpdatedPathProxy(),c=function TN(u,o){for(var a,l,c,h=[],f=[],g=0;g<Math.max(u.length,o.length);g++){var m=u[g],y=o[g],x=void 0,w=void 0;m?y?(l=x=(a=W1(m,y))[0],c=w=a[1]):(w=$_(c||m,m),x=m):(x=$_(l||y,y),w=y),h.push(x),f.push(w)}return[h,f]}(U1(a),U1(l)),h=c[0],f=c[1],g=u.getComputedTransform(),m=o.getComputedTransform();g&&IN(h,g),m&&IN(f,m),j1(o,"updateTransform",{replace:function y(){this.transform=null}}),o.transform=null;var x=function AN(u,o,a,l){for(var h,c=[],f=0;f<u.length;f++){var g=u[f],m=o[f],y=EN(g),x=EN(m);null==h&&(h=y[2]<0!=x[2]<0);var w=[],D=[],I=0,L=1/0,N=[],Z=g.length;h&&(g=VE(g));for(var se=6*kl(g,m,y,x),_e=Z-2,me=0;me<_e;me+=2){var De=(se+me)%_e+2;w[me+2]=g[De]-y[0],w[me+3]=g[De+1]-y[1]}if(w[0]=g[se]-y[0],w[1]=g[se+1]-y[1],a>0)for(var Pe=l/a,Ie=-l/2;Ie<=l/2;Ie+=Pe){var ke=Math.sin(Ie),Ue=Math.cos(Ie),Ye=0;for(me=0;me<g.length;me+=2){var Ke=w[me],qe=w[me+1],ut=m[me]-x[0],pt=m[me+1]-x[1],yt=ut*Ue-pt*ke,wt=ut*ke+pt*Ue;N[me]=yt,N[me+1]=wt;var kt=yt-Ke,en=wt-qe;Ye+=kt*kt+en*en}if(Ye<L){L=Ye,I=Ie;for(var jt=0;jt<N.length;jt++)D[jt]=N[jt]}}else for(var dn=0;dn<Z;dn+=2)D[dn]=m[dn]-x[0],D[dn+1]=m[dn+1]-x[1];c.push({from:w,to:D,fromCp:y,toCp:x,rotation:-I})}return c}(h,f,10,Math.PI),w=[];j1(o,"buildPath",{replace:function(D){for(var I=o.__morphT,L=1-I,N=[],Z=0;Z<x.length;Z++){var se=x[Z],_e=se.from,me=se.to,De=se.rotation*I,Pe=se.fromCp,Ie=se.toCp,ke=Math.sin(De),Ue=Math.cos(De);(0,Kn.lerp)(N,Pe,Ie,I);for(var Ye=0;Ye<_e.length;Ye+=2){var yt=_e[Ye]*L+(ut=me[Ye])*I,wt=_e[Ye+1]*L+(pt=me[Ye+1])*I;w[Ye]=yt*Ue-wt*ke+N[0],w[Ye+1]=yt*ke+wt*Ue+N[1]}var kt=w[0],en=w[1];for(D.moveTo(kt,en),Ye=2;Ye<_e.length;){var ut=w[Ye++],pt=w[Ye++],jt=w[Ye++],dn=w[Ye++],Fn=w[Ye++],Hn=w[Ye++];kt===ut&&en===pt&&jt===Fn&&dn===Hn?D.lineTo(Fn,Hn):D.bezierCurveTo(ut,pt,jt,dn,Fn,Hn),kt=Fn,en=Hn}}}})}function Z1(u,o,a){if(!u||!o)return o;var l=a.done,c=a.during;return PN(u,o),o.__morphT=0,o.animateTo({__morphT:1},(0,b.defaults)({during:function(f){o.dirtyShape(),c&&c(f)},done:function(){(function h(){Q_(o,"buildPath"),Q_(o,"updateTransform"),o.__morphT=-1,o.createPathProxy(),o.dirtyShape()})(),l&&l()}},a)),o}function RN(u,o,a,l,c,h){u=c===a?0:Math.round(32767*(u-a)/(c-a)),o=h===l?0:Math.round(32767*(o-l)/(h-l));for(var m,g=0,y=32768;y>0;y/=2){var x=0,w=0;(u&y)>0&&(x=1),(o&y)>0&&(w=1),g+=y*y*(3*x^w),0===w&&(1===x&&(u=y-1-u,o=y-1-o),m=u,u=o,o=m)}return g}function yv(u){var o=1/0,a=1/0,l=-1/0,c=-1/0,h=(0,b.map)(u,function(g){var m=g.getBoundingRect(),y=g.getComputedTransform(),x=m.x+m.width/2+(y?y[4]:0),w=m.y+m.height/2+(y?y[5]:0);return o=Math.min(x,o),a=Math.min(w,a),l=Math.max(x,l),c=Math.max(w,c),[x,w]});return(0,b.map)(h,function(g,m){return{cp:g,z:RN(g[0],g[1],o,a,l,c),path:u[m]}}).sort(function(g,m){return g.z-m.z}).map(function(g){return g.path})}function HE(u){return function MN(u,o){var c,a=[],l=u.shape;switch(u.type){case"rect":(function bN(u,o,a){for(var l=u.width,c=u.height,h=l>c,f=OE([l,c],h?0:1,o),g=h?"width":"height",m=h?"height":"width",y=h?"x":"y",x=h?"y":"x",w=u[g]/f.length,D=0;D<f.length;D++)for(var I=u[m]/f[D],L=0;L<f[D];L++){var N={};N[y]=D*w,N[x]=L*I,N[g]=w,N[m]=I,N.x+=u.x,N.y+=u.y,a.push(N)}})(l,o,a),c=Di.Z;break;case"sector":kE(l,o,a),c=yn.C;break;case"circle":kE({r0:0,r:l.r,startAngle:0,endAngle:2*Math.PI,cx:l.cx,cy:l.cy},o,a),c=yn.C;break;default:var h=u.getComputedTransform(),f=h?Math.sqrt(Math.max(h[0]*h[0]+h[1]*h[1],h[2]*h[2]+h[3]*h[3])):1,g=(0,b.map)(function yN(u,o){var a=U1(u),l=[];o=o||1;for(var c=0;c<a.length;c++){var h=a[c],f=[],g=h[0],m=h[1];f.push(g,m);for(var y=2;y<h.length;){var x=h[y++],w=h[y++],D=h[y++],I=h[y++],L=h[y++],N=h[y++];G1(g,m,x,w,D,I,L,N,f,o),g=L,m=N}l.push(f)}return l}(u.getUpdatedPathProxy(),f),function(se){return function DN(u){for(var o=[],a=0;a<u.length;)o.push([u[a++],u[a++]]);return o}(se)}),m=g.length;if(0===m)X_(FE,{points:g[0]},o,a);else if(m===o)for(var y=0;y<m;y++)a.push({points:g[y]});else{var x=0,w=(0,b.map)(g,function(se){var _e=[],me=[];(0,Gu.zk)(se,_e,me);var De=(me[1]-_e[1])*(me[0]-_e[0]);return x+=De,{poly:se,area:De}});w.sort(function(se,_e){return _e.area-se.area});var D=o;for(y=0;y<m;y++){var I=w[y];if(D<=0)break;var L=y===m-1?D:Math.ceil(I.area/x*o);L<0||(X_(FE,{points:I.poly},L,a),D-=L)}}c=tl.Z}if(!c)return function BE(u,o){for(var a=[],l=0;l<o;l++)a.push((0,hd.U5)(u));return a}(u,o);var N=[];for(y=0;y<a.length;y++){var Z=new c;Z.setShape(a[y]),SN(u,Z),N.push(Z)}return N}(u.path,u.count)}function Lo(u){return(0,b.isArray)(u[0])}function ON(u,o){for(var a=[],l=u.length,c=0;c<l;c++)a.push({one:u[c],many:[]});for(c=0;c<o.length;c++){var h=o[c].length,f=void 0;for(f=0;f<h;f++)a[f%l].many.push(o[c][f])}var g=0;for(c=l-1;c>=0;c--)if(!a[c].many.length){var m=a[g].many;if(m.length<=1){if(!g)return a;g=0}h=m.length;var y=Math.ceil(h/2);a[c].many=m.slice(y,h),a[g].many=m.slice(0,y),g++}return a}var Y1={clone:function(u){for(var o=[],a=1-Math.pow(1-u.path.style.opacity,1/u.count),l=0;l<u.count;l++){var c=(0,hd.U5)(u.path);c.setStyle("opacity",a),o.push(c)}return o},split:null};function GE(u,o,a,l,c,h){if(u.length&&o.length){var f=(0,wn.ke)("update",l,c);if(f&&f.duration>0){var y,x,g=l.getModel("universalTransition").get("delay"),m=Object.assign({setToFinal:!0},f);Lo(u)&&(y=u,x=o),Lo(o)&&(y=o,x=u);for(var D=y?y===u:u.length>o.length,I=y?ON(x,y):ON(D?o:u,[D?u:o]),L=0,N=0;N<I.length;N++)L+=I[N].many.length;var Z=0;for(N=0;N<I.length;N++)w(I[N],D,Z,L),Z+=I[N].many.length}}function w(se,_e,me,De,Pe){var Ie=se.many,ke=se.one;if(1!==Ie.length||Pe)for(var qe=(0,b.defaults)({dividePath:Y1[a],individualDelay:g&&function(en,jt,dn,Fn){return g(en+me,De)}},m),ut=_e?function LN(u,o,a){var l=[];!function c(Pe){for(var Ie=0;Ie<Pe.length;Ie++){var ke=Pe[Ie];K_(ke)?c(ke.childrenRef()):ke instanceof ve.ZP&&l.push(ke)}}(u);var h=l.length;if(!h)return{fromIndividuals:[],toIndividuals:[],count:0};var g=(a.dividePath||HE)({path:o,count:h});if(g.length!==h)return console.error("Invalid morphing: unmatched splitted path"),{fromIndividuals:[],toIndividuals:[],count:0};l=yv(l),g=yv(g);for(var m=a.done,y=a.during,x=a.individualDelay,w=new xe.ZP,D=0;D<h;D++){var I=l[D],L=g[D];L.parent=o,L.copyTransform(w),x||PN(I,L)}function N(Pe){for(var Ie=0;Ie<g.length;Ie++)g[Ie].addSelfToZr(Pe)}function Z(){o.__isCombineMorphing=!1,o.__morphT=-1,o.childrenRef=null,Q_(o,"addSelfToZr"),Q_(o,"removeSelfFromZr")}o.__isCombineMorphing=!0,o.childrenRef=function(){return g},j1(o,"addSelfToZr",{after:function(Pe){N(Pe)}}),j1(o,"removeSelfFromZr",{after:function(Pe){for(var Ie=0;Ie<g.length;Ie++)g[Ie].removeSelfFromZr(Pe)}});var se=g.length;if(x){var _e=se,me=function(){0==--_e&&(Z(),m&&m())};for(D=0;D<se;D++){var De=x?(0,b.defaults)({delay:(a.delay||0)+x(D,se,l[D],g[D]),done:me},a):a;Z1(l[D],g[D],De)}}else o.__morphT=0,o.animateTo({__morphT:1},(0,b.defaults)({during:function(Pe){for(var Ie=0;Ie<se;Ie++){var ke=g[Ie];ke.__morphT=o.__morphT,ke.dirtyShape()}y&&y(Pe)},done:function(){Z();for(var Pe=0;Pe<u.length;Pe++)Q_(u[Pe],"updateTransform");m&&m()}},a));return o.__zr&&N(o.__zr),{fromIndividuals:l,toIndividuals:g,count:se}}(Ie,ke,qe):function Lz(u,o,a){var l=o.length,c=[],h=a.dividePath||HE;if(K_(u)){!function f(I){for(var L=0;L<I.length;L++){var N=I[L];K_(N)?f(N.childrenRef()):N instanceof ve.ZP&&c.push(N)}}(u.childrenRef());var g=c.length;if(g<l)for(var m=0,y=g;y<l;y++)c.push((0,hd.U5)(c[m++%g]));c.length=l}else{c=h({path:u,count:l});var x=u.getComputedTransform();for(y=0;y<c.length;y++)c[y].setLocalTransform(x);if(c.length!==l)return console.error("Invalid morphing: unmatched splitted path"),{fromIndividuals:[],toIndividuals:[],count:0}}c=yv(c),o=yv(o);var w=a.individualDelay;for(y=0;y<l;y++){var D=w?(0,b.defaults)({delay:(a.delay||0)+w(y,l,c[y],o[y])},a):a;Z1(c[y],o[y],D)}return{fromIndividuals:c,toIndividuals:o,count:o.length}}(ke,Ie,qe),pt=ut.fromIndividuals,yt=ut.toIndividuals,wt=pt.length,kt=0;kt<wt;kt++)Ke=g?(0,b.defaults)({delay:g(kt,wt)},m):m,h(pt[kt],yt[kt],_e?Ie[kt]:se.one,_e?se.one:Ie[kt],Ke);else{var Ke,Ue=_e?Ie[0]:ke,Ye=_e?ke:Ie[0];K_(Ue)?w({many:[Ue],one:Ye},!0,me,De,!0):(Z1(Ue,Ye,Ke=g?(0,b.defaults)({delay:g(me,De)},m):m),h(Ue,Ye,Ue,Ye,Ke))}}}function jd(u){if(!u)return[];if((0,b.isArray)(u)){for(var o=[],a=0;a<u.length;a++)o.push(jd(u[a]));return o}var l=[];return u.traverse(function(c){c instanceof ve.ZP&&!c.disableMorphing&&!c.invisible&&!c.ignore&&l.push(c)}),l}var kN=(0,xn.Yf)();function NN(u){var o=[];return(0,b.each)(u,function(a){var l=a.data;if(!(l.count()>1e4))for(var c=l.getIndices(),h=function Oz(u){for(var o=u.dimensions,a=0;a<o.length;a++){var l=u.getDimensionInfo(o[a]);if(l&&0===l.otherDims.itemGroupId)return o[a]}}(l),f=0;f<c.length;f++)o.push({data:l,dim:a.dim||h,divide:a.divide,dataIndex:f})}),o}function jE(u,o,a){u.traverse(function(l){l instanceof ve.ZP&&(0,wn.KZ)(l,{style:{opacity:0}},o,{dataIndex:a,isFrom:!0})})}function X1(u){if(u.parent){var o=u.getComputedTransform();u.setLocalTransform(o),u.parent.remove(u)}}function tf(u){u.stopAnimation(),u.isGroup&&u.traverse(function(o){o.stopAnimation()})}function ZE(u,o,a){var l=NN(u),c=NN(o);function h(se,_e,me,De,Pe){(me||se)&&_e.animateFrom({style:me&&me!==se?(0,b.extend)((0,b.extend)({},me.style),se.style):se.style},Pe)}function f(se){for(var _e=0;_e<se.length;_e++)if(se[_e].dim)return se[_e].dim}var g=f(l),m=f(c),y=!1;function x(se,_e){return function(me){var De=me.data,Pe=me.dataIndex;if(_e)return De.getId(Pe);var Ie=De.hostModel&&De.hostModel.get("dataGroupId"),ke=se?g||m:m||g,Ue=ke&&De.getDimensionInfo(ke),Ye=Ue&&Ue.ordinalMeta;if(Ue){var Ke=De.get(Ue.name,Pe);return Ye&&Ye.categories[Ke]||Ke+""}var qe=De.getRawDataItem(Pe);return qe&&qe.groupId?qe.groupId+"":Ie||De.getId(Pe)}}var w=function q_(u,o){var a=u.length;if(a!==o.length)return!1;for(var l=0;l<a;l++){var c=u[l],h=o[l];if(c.data.getId(c.dataIndex)!==h.data.getId(h.dataIndex))return!1}return!0}(l,c),D={};if(!w)for(var I=0;I<c.length;I++){var L=c[I],N=L.data.getItemGraphicEl(L.dataIndex);N&&(D[N.id]=!0)}function Z(se,_e){var me=l[_e],De=c[se],Pe=De.data.hostModel,Ie=me.data.getItemGraphicEl(me.dataIndex),ke=De.data.getItemGraphicEl(De.dataIndex);Ie!==ke?Ie&&D[Ie.id]||ke&&(tf(ke),Ie?(tf(Ie),X1(Ie),y=!0,GE(jd(Ie),jd(ke),De.divide,Pe,se,h)):jE(ke,Pe,se)):ke&&function FN(u,o,a){var l=(0,wn.ke)("update",a,o);l&&u.traverse(function(c){if(c instanceof xc.ZP){var h=(0,wn._W)(c);h&&c.animateFrom({style:h},l)}})}(ke,De.dataIndex,Pe)}new su.Z(l,c,x(!0,w),x(!1,w),null,"multiple").update(Z).updateManyToOne(function(se,_e){var me=c[se],De=me.data,Pe=De.hostModel,Ie=De.getItemGraphicEl(me.dataIndex),ke=(0,b.filter)((0,b.map)(_e,function(Ue){return l[Ue].data.getItemGraphicEl(l[Ue].dataIndex)}),function(Ue){return Ue&&Ue!==Ie&&!D[Ue.id]});Ie&&(tf(Ie),ke.length?((0,b.each)(ke,function(Ue){tf(Ue),X1(Ue)}),y=!0,GE(jd(ke),jd(Ie),me.divide,Pe,se,h)):jE(Ie,Pe,me.dataIndex))}).updateOneToMany(function(se,_e){var me=l[_e],De=me.data.getItemGraphicEl(me.dataIndex);if(!De||!D[De.id]){var Pe=(0,b.filter)((0,b.map)(se,function(ke){return c[ke].data.getItemGraphicEl(c[ke].dataIndex)}),function(ke){return ke&&ke!==De}),Ie=c[se[0]].data.hostModel;Pe.length&&((0,b.each)(Pe,function(ke){return tf(ke)}),De?(tf(De),X1(De),y=!0,GE(jd(De),jd(Pe),me.divide,Ie,se[0],h)):(0,b.each)(Pe,function(ke){return jE(ke,Ie,se[0])}))}}).updateManyToMany(function(se,_e){new su.Z(_e,se,function(me){return l[me].data.getId(l[me].dataIndex)},function(me){return c[me].data.getId(c[me].dataIndex)}).update(function(me,De){Z(se[me],_e[De])}).execute()}).execute(),y&&(0,b.each)(o,function(se){var me=se.data.hostModel,De=me&&a.getViewOfSeriesModel(me),Pe=(0,wn.ke)("update",me,0);De&&me.isAnimationEnabled()&&Pe&&Pe.duration>0&&De.group.traverse(function(Ie){Ie instanceof ve.ZP&&!Ie.animators.length&&Ie.animateFrom({style:{opacity:0}},Pe)})})}function YE(u){return u.getModel("universalTransition").get("seriesKey")||u.id}function BN(u){return(0,b.isArray)(u)?u.sort().join(","):u}function jc(u){if(u.hostModel)return u.hostModel.getModel("universalTransition").get("divideShape")}function XE(u,o){for(var a=0;a<u.length;a++)if(null!=o.seriesIndex&&o.seriesIndex===u[a].seriesIndex||null!=o.seriesId&&o.seriesId===u[a].id)return a}var Fz=z(6840);(0,ce.D)([le.N]),(0,ce.D)([function Jy(u){u.registerPainter("svg",qy)}]),(0,ce.D)([function fc(u){u.registerChartView(Uf),u.registerSeriesModel(kf),u.registerLayout(ei("line",!0)),u.registerVisual({seriesType:"line",reset:function(o){var a=o.getData(),l=o.getModel("lineStyle").getLineStyle();l&&!l.stroke&&(l.stroke=a.getVisual("style").fill),a.setVisual("legendLineStyle",l)}}),u.registerProcessor(u.PRIORITY.PROCESSOR.STATISTIC,ql("line"))},function Hi(u){u.registerChartView(Bu),u.registerSeriesModel(Gf),u.registerLayout(u.PRIORITY.VISUAL.LAYOUT,b.curry(Ho.bK,"bar")),u.registerLayout(u.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,(0,Ho.Bk)("bar")),u.registerProcessor(u.PRIORITY.PROCESSOR.STATISTIC,ql("bar")),u.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(o,a){a.eachComponent({mainType:o.componentType||"series",query:o},function(c){o.sortInfo&&c.axis.setCategorySortInfo(o.sortInfo)})})},function gr(u){u.registerChartView(Mn),u.registerSeriesModel(Bn),(0,mg.y)("pie",u.registerAction),u.registerLayout((0,b.curry)(Vu,"pie")),u.registerProcessor(Ma("pie")),u.registerProcessor(function kn(u){return{seriesType:u,reset:function(o,a){var l=o.getData();l.filterSelf(function(c){var h=l.mapDimension("value"),f=l.get(h,c);return!((0,b.isNumber)(f)&&!isNaN(f)&&f<0)})}}}("pie"))},function Mg(u){(0,ce.D)(Rw),u.registerSeriesModel(_r),u.registerChartView(is),u.registerLayout(ei("scatter"))},function _0(u){(0,ce.D)(_h),u.registerChartView(ep),u.registerSeriesModel(tp),u.registerLayout(Tg),u.registerProcessor(Ma("radar")),u.registerPreprocessor(Lw)},function n2(u){(0,ce.D)(t2),u.registerChartView(vp),u.registerSeriesModel(KP),u.registerLayout(oa),u.registerProcessor(u.PRIORITY.PROCESSOR.STATISTIC,Qw),(0,mg.y)("map",u.registerAction)},function Wu(u){u.registerChartView(s2),u.registerSeriesModel(d2),u.registerLayout(h2),u.registerVisual(p2),function jg(u){u.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(o,a){a.eachComponent({mainType:"series",subType:"tree",query:o},function(l){var c=o.dataIndex,f=l.getData().tree.getNodeByDataIndex(c);f.isExpand=!f.isExpand})}),u.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(o,a,l){a.eachComponent({mainType:"series",subType:"tree",query:o},function(c){var f=_d(c.coordinateSystem,o,void 0,l);c.setCenter&&c.setCenter(f.center),c.setZoom&&c.setZoom(f.zoom)})})}(u)},function j0(u){u.registerSeriesModel(B0),u.registerChartView(z0),u.registerVisual(CS),u.registerLayout(xd),function dS(u){for(var o=0;o<Ch.length;o++)u.registerAction({type:Ch[o],update:"updateView"},b.noop);u.registerAction({type:"treemapRootToNode",update:"updateView"},function(a,l){l.eachComponent({mainType:"series",subType:"treemap",query:a},function c(h,f){var m=Cp(a,["treemapZoomToNode","treemapRootToNode"],h);if(m){var y=h.getViewRoot();y&&(a.direction=N0(y,m.node)?"rollUp":"drillDown"),h.resetViewRoot(m.node)}})})}(u)},function Rp(u){u.registerChartView(NS),u.registerSeriesModel(FS),u.registerProcessor(I2),u.registerVisual(P2),u.registerVisual(s5),u.registerLayout($0),u.registerLayout(u.PRIORITY.VISUAL.POST_CHART_LAYOUT,k2),u.registerLayout(F2),u.registerCoordinateSystem("graphView",{dimensions:mp.dimensions,create:B2}),u.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},b.noop),u.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},b.noop),u.registerAction(G2,function(o,a,l){a.eachComponent({mainType:"series",query:o},function(c){var f=_d(c.coordinateSystem,o,void 0,l);c.setCenter&&c.setCenter(f.center),c.setZoom&&c.setZoom(f.zoom)})})},function Z2(u){u.registerChartView(Ph),u.registerSeriesModel(BS)},function mb(u){u.registerChartView($2),u.registerSeriesModel(Q2),u.registerLayout(zS),u.registerProcessor(Ma("funnel"))},function Nb(u){(0,ce.D)(Mm),u.registerChartView(p5),u.registerSeriesModel(GS),u.registerVisual(u.PRIORITY.VISUAL.BRUSH,jS)},function Pc(u){u.registerChartView(MR),u.registerSeriesModel(b5),u.registerLayout(TR),u.registerVisual(AR),u.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(o,a){a.eachComponent({mainType:"series",subType:"sankey",query:o},function(l){l.setNodePosition(o.dataIndex,[o.localX,o.localY])})})},function ED(u){u.registerSeriesModel(SD),u.registerChartView(Vb),u.registerVisual(Pm),u.registerLayout(DD),u.registerTransform(RR)},function R5(u){u.registerChartView(NR),u.registerSeriesModel(LD),u.registerPreprocessor(FR),u.registerVisual(zR),u.registerLayout(UR)},function Om(u){u.registerChartView(Yb),u.registerSeriesModel(YR),u.registerLayout(ei("effectScatter"))},function qR(u){u.registerChartView(Qb),u.registerSeriesModel(KR),u.registerLayout(kh),u.registerVisual(k5)},function oL(u){u.registerChartView(rL),u.registerSeriesModel(aL)},function ZD(u){u.registerChartView(GD),u.registerSeriesModel(jD),u.registerLayout(u.PRIORITY.VISUAL.LAYOUT,(0,b.curry)(Ho.bK,"pictorialBar")),u.registerLayout(u.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,(0,Ho.Bk)("pictorialBar"))},function At(u){u.registerChartView($D),u.registerSeriesModel(dL),u.registerLayout(nr),u.registerProcessor(Ma("themeRiver"))},function nM(u){u.registerChartView(na),u.registerSeriesModel(ix),u.registerLayout((0,b.curry)(zm,"sunburst")),u.registerProcessor((0,b.curry)(Ma,"sunburst")),u.registerVisual(tM),function Vi(u){u.registerAction({type:Rn,update:"updateView"},function(o,a){a.eachComponent({mainType:"series",subType:"sunburst",query:o},function l(c,h){var f=Cp(o,[Rn],c);if(f){var g=c.getViewRoot();g&&(o.direction=N0(g,f.node)?"rollUp":"drillDown"),c.resetViewRoot(f.node)}})}),u.registerAction({type:QD,update:"none"},function(o,a,l){o=(0,b.extend)({},o),a.eachComponent({mainType:"series",subType:"sunburst",query:o},function c(h){var f=Cp(o,[QD],h);f&&(o.dataIndex=f.node.dataIndex)}),l.dispatchAction((0,b.extend)(o,{type:"highlight"}))}),u.registerAction({type:"sunburstUnhighlight",update:"updateView"},function(o,a,l){o=(0,b.extend)({},o),l.dispatchAction((0,b.extend)(o,{type:"downplay"}))})}(u)},function AM(u){u.registerChartView(xM),u.registerSeriesModel(rM)}]),(0,ce.D)(function YM(u){(0,ce.D)(Rw),(0,ce.D)(Wh)}),(0,ce.D)(function nO(u){(0,ce.D)(Wh),_c.registerAxisPointerClass("PolarAxisPointer",FL),u.registerCoordinateSystem("polar",$p),u.registerComponentModel(H5),u.registerComponentView(tO),Xf(u,"angle",U5,JL),Xf(u,"radius",G5,eO),u.registerComponentView(YL),u.registerComponentView(KL),u.registerLayout((0,b.curry)(qL,"bar"))}),(0,ce.D)(t2),(0,ce.D)(function Px(u){(0,ce.D)(Wh),_c.registerAxisPointerClass("SingleAxisPointer",W5),u.registerComponentView(dT),u.registerComponentView(aO),u.registerComponentModel(l_),Xf(u,"single",l_,l_.defaultOption),u.registerCoordinateSystem("single",uO)}),(0,ce.D)(Mm),(0,ce.D)(function pO(u){u.registerComponentModel(hO),u.registerComponentView(hT),u.registerCoordinateSystem("calendar",fO)}),(0,ce.D)(function CO(u){u.registerComponentModel(j5),u.registerComponentView(yO),u.registerPreprocessor(function(o){var a=o.graphic;(0,b.isArray)(a)?o.graphic=a[0]&&a[0].elements?[o.graphic[0]]:[{elements:a}]:a&&!a.elements&&(o.graphic=[{elements:[a]}])})}),(0,ce.D)(function PT(u){u.registerComponentModel(BO),u.registerComponentView(CT),Ld("saveAsImage",Hx),Ld("magicType",ur),Ld("dataView",$5),Ld("dataZoom",IT),Ld("restore",XO),(0,ce.D)(FO)}),(0,ce.D)(function sz(u){(0,ce.D)(Wh),u.registerComponentModel(nk),u.registerComponentView(sk),u.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},b.noop),u.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},b.noop)}),(0,ce.D)(Wh),(0,ce.D)(function jT(u){u.registerComponentView(c1),u.registerComponentModel(qu),u.registerPreprocessor(uz),u.registerVisual(u.PRIORITY.VISUAL.BRUSH,UT),u.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(o,a){a.eachComponent({mainType:"brush",query:o},function(l){l.setAreas(o.areas)})}),u.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},b.noop),u.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},b.noop),Ld("brush",pk)}),(0,ce.D)(function ZT(u){u.registerComponentModel(vk),u.registerComponentView(gk)}),(0,ce.D)(function bk(u){u.registerComponentModel(XT),u.registerComponentView(yk),u.registerSubTypeDefaulter("timeline",function(){return"slider"}),function vz(u){u.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(o,a,l){var c=a.getComponent("timeline");return c&&null!=o.currentIndex&&(c.setCurrentIndex(o.currentIndex),!c.get("loop",!0)&&c.isIndexMax()&&c.getPlayState()&&(c.setPlayState(!1),l.dispatchAction({type:"timelinePlayChange",playState:!1,from:o.from}))),a.resetOption("timeline",{replaceMerge:c.get("replaceMerge",!0)}),(0,b.defaults)({currentIndex:c.option.currentIndex},o)}),u.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(o,a){var l=a.getComponent("timeline");l&&null!=o.playState&&l.setPlayState(o.playState)})}(u),u.registerPreprocessor(gz)}),(0,ce.D)(function Tk(u){u.registerComponentModel(O_),u.registerComponentView(Mk),u.registerPreprocessor(function(o){nE(o.series,"markPoint")&&(o.markPoint=o.markPoint||{})})}),(0,ce.D)(function Ik(u){u.registerComponentModel(lE),u.registerComponentView(Ak),u.registerPreprocessor(function(o){nE(o.series,"markLine")&&(o.markLine=o.markLine||{})})}),(0,ce.D)(function wz(u){u.registerComponentModel(yz),u.registerComponentView(Cz),u.registerPreprocessor(function(o){nE(o.series,"markArea")&&(o.markArea=o.markArea||{})})}),(0,ce.D)(function Ts(u){(0,ce.D)(S1),(0,ce.D)(vE)}),(0,ce.D)(function Qk(u){(0,ce.D)(Vs),(0,ce.D)(Qh)}),(0,ce.D)(Vs),(0,ce.D)(Qh),(0,ce.D)(function Iz(u){(0,ce.D)(Y_),(0,ce.D)(EE)}),(0,ce.D)(Y_),(0,ce.D)(EE),(0,ce.D)(function hN(u){u.registerPreprocessor(IE),u.registerVisual(u.PRIORITY.VISUAL.ARIA,AE)}),(0,ce.D)(function mN(u){u.registerTransform(gN),u.registerTransform(Ol)}),(0,ce.D)(_N.N),(0,ce.D)(function VN(u){u.registerUpdateLifecycle("series:beforeupdate",function(o,a,l){(0,b.each)((0,xn.kF)(l.seriesTransition),function(c){(0,b.each)((0,xn.kF)(c.to),function(h){for(var f=l.updatedSeries,g=0;g<f.length;g++)(null!=h.seriesIndex&&h.seriesIndex===f[g].seriesIndex||null!=h.seriesId&&h.seriesId===f[g].id)&&(f[g][Zi.V]=!0)})})}),u.registerUpdateLifecycle("series:transition",function(o,a,l){var c=kN(a);if(c.oldSeries&&l.updatedSeries&&l.optionChanged){var h=l.seriesTransition;if(h)(0,b.each)((0,xn.kF)(h),function(D){!function Nz(u,o,a,l){var c=[],h=[];(0,b.each)((0,xn.kF)(u.from),function(f){var g=XE(o.oldSeries,f);g>=0&&c.push({data:o.oldData[g],divide:jc(o.oldData[g]),dim:f.dimension})}),(0,b.each)((0,xn.kF)(u.to),function(f){var g=XE(a.updatedSeries,f);if(g>=0){var m=a.updatedSeries[g].getData();h.push({data:m,divide:jc(m),dim:f.dimension})}}),c.length>0&&h.length>0&&ZE(c,h,l)}(D,c,l,a)});else{var f=function kz(u,o){var a=(0,b.createHashMap)(),l=(0,b.createHashMap)(),c=(0,b.createHashMap)();return(0,b.each)(u.oldSeries,function(f,g){var m=u.oldData[g],y=YE(f),x=BN(y);l.set(x,m),(0,b.isArray)(y)&&(0,b.each)(y,function(w){c.set(w,{data:m,key:x})})}),(0,b.each)(o.updatedSeries,function(f){if(f.isUniversalTransitionEnabled()&&f.isAnimationEnabled()){var g=f.getData(),m=YE(f),y=BN(m),x=l.get(y);if(x)a.set(y,{oldSeries:[{divide:jc(x),data:x}],newSeries:[{divide:jc(g),data:g}]});else if((0,b.isArray)(m)){var w=[];(0,b.each)(m,function(L){var N=l.get(L);N&&w.push({divide:jc(N),data:N})}),w.length&&a.set(y,{oldSeries:w,newSeries:[{data:g,divide:jc(g)}]})}else{var D=c.get(m);if(D){var I=a.get(D.key);I||(I={oldSeries:[{data:D.data,divide:jc(D.data)}],newSeries:[]},a.set(D.key,I)),I.newSeries.push({data:g,divide:jc(g)})}}}}),a}(c,l);(0,b.each)(f.keys(),function(D){var I=f.get(D);ZE(I.oldSeries,I.newSeries,a)})}(0,b.each)(l.updatedSeries,function(D){D[Zi.V]&&(D[Zi.V]=!1)})}for(var g=o.getSeries(),m=c.oldSeries=[],y=c.oldData=[],x=0;x<g.length;x++){var w=g[x].getData();w.count()<1e4&&(m.push(g[x]),y.push(w))}})}),(0,ce.D)(Fz.T)},3802:(Bt,Qe,z)=>{z.d(Qe,{D:()=>be,KZ:()=>Ce,XD:()=>re,Zi:()=>U,_W:()=>ee,bX:()=>j,eq:()=>he,ke:()=>ye});var ce=z(628),le=(0,z(1266).Yf)();function ye($,ie,K,b,Y){var Q;if(ie&&ie.ecModel){var F=ie.ecModel.getUpdatePayload();Q=F&&F.animation}var G="update"===$;if(ie&&ie.isAnimationEnabled()){var W=void 0,J=void 0,V=void 0;return b?(W=(0,ce.retrieve2)(b.duration,200),J=(0,ce.retrieve2)(b.easing,"cubicOut"),V=0):(W=ie.getShallow(G?"animationDurationUpdate":"animationDuration"),J=ie.getShallow(G?"animationEasingUpdate":"animationEasing"),V=ie.getShallow(G?"animationDelayUpdate":"animationDelay")),Q&&(null!=Q.duration&&(W=Q.duration),null!=Q.easing&&(J=Q.easing),null!=Q.delay&&(V=Q.delay)),(0,ce.isFunction)(V)&&(V=V(K,Y)),(0,ce.isFunction)(W)&&(W=W(K)),{duration:W||0,delay:V,easing:J}}return null}function ve($,ie,K,b,Y,Q,F){var G,q=!1;(0,ce.isFunction)(Y)?(F=Q,Q=Y,Y=null):(0,ce.isObject)(Y)&&(Q=Y.cb,F=Y.during,q=Y.isFrom,G=Y.removeOpt,Y=Y.dataIndex);var W="leave"===$;W||ie.stopAnimation("leave");var J=ye($,b,Y,W?G||{}:null,b&&b.getAnimationDelayParams?b.getAnimationDelayParams(ie,Y):null);if(J&&J.duration>0){var R={duration:J.duration,delay:J.delay||0,easing:J.easing,done:Q,force:!!Q||!!F,setToFinal:!W,scope:$,during:F};q?ie.animateFrom(K,R):ie.animateTo(K,R)}else ie.stopAnimation(),!q&&ie.attr(K),F&&F(1),Q&&Q()}function be($,ie,K,b,Y,Q){ve("update",$,ie,K,b,Y,Q)}function Ce($,ie,K,b,Y,Q){ve("enter",$,ie,K,b,Y,Q)}function he($){if(!$.__zr)return!0;for(var ie=0;ie<$.animators.length;ie++)if("leave"===$.animators[ie].scope)return!0;return!1}function j($,ie,K,b,Y,Q){he($)||ve("leave",$,ie,K,b,Y,Q)}function X($,ie,K,b){$.removeTextContent(),$.removeTextGuideLine(),j($,{style:{opacity:0}},ie,K,b)}function re($,ie,K){function b(){$.parent&&$.parent.remove($)}$.isGroup?$.traverse(function(Y){Y.isGroup||X(Y,ie,K,b)}):X($,ie,K,b)}function U($){le($).oldStyle=$.style}function ee($){return le($).oldStyle}},5103:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>Se});var ce=z(1266);function Se(){var le=(0,ce.Yf)();return function(ye){var ve=le(ye),be=ye.pipelineContext,Ce=!!ve.large,he=!!ve.progressiveRender,j=ve.large=!(!be||!be.large),X=ve.progressiveRender=!(!be||!be.progressiveRender);return(Ce!==j||he!==X)&&"reset"}}},405:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>F});var ce=z(628),Se=z(3241),le=z(9178),ye=z(1577),ve=z(1266),be=z(9506),Ce=function q(G){this.coordSysDims=[],this.axisMap=(0,ce.createHashMap)(),this.categoryAxisMap=(0,ce.createHashMap)(),this.coordSysName=G},j={cartesian2d:function(q,G,W,J){var V=q.getReferringComponents("xAxis",ve.C6).models[0],P=q.getReferringComponents("yAxis",ve.C6).models[0];G.coordSysDims=["x","y"],W.set("x",V),W.set("y",P),X(V)&&(J.set("x",V),G.firstCategoryDimIndex=0),X(P)&&(J.set("y",P),null==G.firstCategoryDimIndex&&(G.firstCategoryDimIndex=1))},singleAxis:function(q,G,W,J){var V=q.getReferringComponents("singleAxis",ve.C6).models[0];G.coordSysDims=["single"],W.set("single",V),X(V)&&(J.set("single",V),G.firstCategoryDimIndex=0)},polar:function(q,G,W,J){var V=q.getReferringComponents("polar",ve.C6).models[0],P=V.findAxisModel("radiusAxis"),T=V.findAxisModel("angleAxis");G.coordSysDims=["radius","angle"],W.set("radius",P),W.set("angle",T),X(P)&&(J.set("radius",P),G.firstCategoryDimIndex=0),X(T)&&(J.set("angle",T),null==G.firstCategoryDimIndex&&(G.firstCategoryDimIndex=1))},geo:function(q,G,W,J){G.coordSysDims=["lng","lat"]},parallel:function(q,G,W,J){var V=q.ecModel,P=V.getComponent("parallel",q.get("parallelIndex")),T=G.coordSysDims=P.dimensions.slice();(0,ce.each)(P.parallelAxisIndex,function(R,E){var M=V.getComponent("parallelAxis",R),A=T[E];W.set(A,M),X(M)&&(J.set(A,M),null==G.firstCategoryDimIndex&&(G.firstCategoryDimIndex=E))})}};function X(q){return"category"===q.get("type")}var re=z(7079),U=z(143),ee=z(6153),$=z(4367);const F=function b(q,G,W){W=W||{};var V,J=G.getSourceManager(),P=!1;q?(P=!0,V=(0,re.nx)(q)):P=(V=J.getSource()).sourceFormat===$.cy;var T=function he(q){var G=q.get("coordinateSystem"),W=new Ce(G),J=j[G];if(J)return J(q,W,W.axisMap,W.categoryAxisMap),W}(G),R=function ie(q,G){var V,W=q.get("coordinateSystem"),J=be.Z.get(W);return G&&G.coordSysDims&&(V=ce.map(G.coordSysDims,function(P){var T={name:P},R=G.axisMap.get(P);if(R){var E=R.get("type");T.type=(0,ye.T)(E)}return T})),V||(V=J&&(J.getDimensionsInfo?J.getDimensionsInfo():J.dimensions.slice())||["x","y"]),V}(G,T),E=W.useEncodeDefaulter,M=ce.isFunction(E)?E:E?ce.curry(ee.pY,R,G):null,A={coordDimensions:R,generateCoord:W.generateCoord,encodeDefine:G.getEncode(),encodeDefaulter:M,canOmitUnusedDimensions:!P},O=(0,le.Z)(V,A),B=function K(q,G,W){var J,V;return W&&ce.each(q,function(P,T){var E=W.categoryAxisMap.get(P.coordDim);E&&(null==J&&(J=T),P.ordinalMeta=E.getOrdinalMeta(),G&&(P.createInvertedIndices=!0)),null!=P.otherDims.itemName&&(V=!0)}),!V&&null!=J&&(q[J].otherDims.itemName=0),J}(O.dimensions,W.createInvertedIndices,T),ue=P?null:J.getSharedDataStore(O),ae=(0,U.BM)(G,{schema:O,store:ue}),oe=new Se.Z(O,G);oe.setCalculationInfo(ae);var de=null!=B&&function Y(q){if(q.sourceFormat===$.cy){var G=function Q(q){for(var G=0;G<q.length&&null==q[G];)G++;return q[G]}(q.data||[]);return!ce.isArray((0,ve.C4)(G))}}(V)?function(te,xe,fe,ge){return ge===B?fe:this.defaultDimValueGetter(te,xe,fe,ge)}:null;return oe.hasItemOption=!1,oe.initData(P?V:ue,null,de),oe}},4664:(Bt,Qe,z)=>{z.d(Qe,{N:()=>he});var ce=z(5845),Se=z(9447),le=z(9899),ye=z(4367),ve=z(8003),be=function(j){function X(){var re=null!==j&&j.apply(this,arguments)||this;return re.type="dataset",re}return(0,ce.ZT)(X,j),X.prototype.init=function(re,U,ee){j.prototype.init.call(this,re,U,ee),this._sourceManager=new ve.U(this),(0,ve.t)(this)},X.prototype.mergeOption=function(re,U){j.prototype.mergeOption.call(this,re,U),(0,ve.t)(this)},X.prototype.optionUpdated=function(){this._sourceManager.dirty()},X.prototype.getSourceManager=function(){return this._sourceManager},X.type="dataset",X.defaultOption={seriesLayoutBy:ye.fY},X}(Se.Z),Ce=function(j){function X(){var re=null!==j&&j.apply(this,arguments)||this;return re.type="dataset",re}return(0,ce.ZT)(X,j),X.type="dataset",X}(le.Z);function he(j){j.registerComponentModel(be),j.registerComponentView(Ce)}},1549:(Bt,Qe,z)=>{z.d(Qe,{w:()=>ve});var ce=z(628),Se=z(4974),le=z(67),ye=z(1266);function ve(Ce){var b,Y,Q,F,he=Ce.series,j=Ce.dataIndex,X=Ce.multipleSeries,re=he.getData(),U=re.mapDimensionsAll("defaultedTooltip"),ee=U.length,$=he.getRawValue(j),ie=(0,ce.isArray)($),K=(0,Se.jT)(he,j);if(ee>1||ie&&!ee){var q=function be(Ce,he,j,X,re){var U=he.getData(),ee=(0,ce.reduce)(Ce,function(Y,Q,F){var q=U.getDimensionInfo(F);return Y||q&&!1!==q.tooltip&&null!=q.displayName},!1),$=[],ie=[],K=[];function b(Y,Q){var F=U.getDimensionInfo(Q);!F||!1===F.otherDims.tooltip||(ee?K.push((0,Se.TX)("nameValue",{markerType:"subItem",markerColor:re,name:F.displayName,value:Y,valueType:F.type})):($.push(Y),ie.push(F.type)))}return X.length?(0,ce.each)(X,function(Y){b((0,le.hk)(U,j,Y),Y)}):(0,ce.each)(Ce,b),{inlineValues:$,inlineValueTypes:ie,blocks:K}}($,he,j,U,K);b=q.inlineValues,Y=q.inlineValueTypes,Q=q.blocks,F=q.inlineValues[0]}else if(ee){var G=re.getDimensionInfo(U[0]);F=b=(0,le.hk)(re,j,U[0]),Y=G.type}else F=b=ie?$[0]:$;var W=(0,ye.yu)(he),J=W&&he.name||"",V=re.getName(j),P=X?J:V;return(0,Se.TX)("section",{header:J,noHeader:X||!W,sortParam:F,blocks:[(0,Se.TX)("nameValue",{markerType:"item",markerColor:K,name:P,noName:!(0,ce.trim)(P),value:b,valueType:Y})].concat(Q||[])})}},4974:(Bt,Qe,z)=>{z.d(Qe,{BY:()=>K,TX:()=>X,d_:()=>J,iv:()=>V,jT:()=>W});var ce=z(2425),Se=z(9706),le=z(628),ye=z(4066),ve=z(4785),be="line-height:1";function Ce(P,T){var R=P.color||"#6e7079",E=P.fontSize||12,M=P.fontWeight||"400",A=P.color||"#464646",O=P.fontSize||14,B=P.fontWeight||"900";return"html"===T?{nameStyle:"font-size:"+(0,ce.F1)(E+"")+"px;color:"+(0,ce.F1)(R)+";font-weight:"+(0,ce.F1)(M+""),valueStyle:"font-size:"+(0,ce.F1)(O+"")+"px;color:"+(0,ce.F1)(A)+";font-weight:"+(0,ce.F1)(B+"")}:{nameStyle:{fontSize:E,fill:R,fontWeight:M},valueStyle:{fontSize:O,fill:A,fontWeight:B}}}var he=[0,10,20,30],j=["","\n","\n\n","\n\n\n"];function X(P,T){return T.type=P,T}function re(P){return"section"===P.type}function U(P){return re(P)?$:ie}function ee(P){if(re(P)){var T=0,R=P.blocks.length,E=R>1||R>0&&!P.noHeader;return(0,le.each)(P.blocks,function(M){var A=ee(M);A>=T&&(T=A+ +(E&&(!A||re(M)&&!M.noHeader)))}),T}return 0}function $(P,T,R,E){var M=T.noHeader,A=function b(P){return{html:he[P],richText:j[P]}}(ee(T)),O=[],B=T.blocks||[];(0,le.assert)(!B||(0,le.isArray)(B)),B=B||[];var ue=P.orderMode;if(T.sortBlocks&&ue){B=B.slice();var ae={valueAsc:"asc",valueDesc:"desc"};if((0,le.hasOwn)(ae,ue)){var oe=new ye.ID(ae[ue],null);B.sort(function(fe,ge){return oe.evaluate(fe.sortParam,ge.sortParam)})}else"seriesDesc"===ue&&B.reverse()}(0,le.each)(B,function(fe,ge){var we=T.valueFormatter,Te=U(fe)(we?(0,le.extend)((0,le.extend)({},P),{valueFormatter:we}):P,fe,ge>0?A.html:0,E);null!=Te&&O.push(Te)});var de="richText"===P.renderMode?O.join(A.richText):Y(O.join(""),M?R:A.html);if(M)return de;var te=(0,Se.uX)(T.header,"ordinal",P.useUTC),xe=Ce(E,P.renderMode).nameStyle;return"richText"===P.renderMode?q(P,te,xe)+A.richText+de:Y('<div style="'+xe+";"+be+';">'+(0,ce.F1)(te)+"</div>"+de,R)}function ie(P,T,R,E){var M=P.renderMode,A=T.noName,O=T.noValue,B=!T.markerType,ue=T.name,ae=P.useUTC,oe=T.valueFormatter||P.valueFormatter||function(Ve){return Ve=(0,le.isArray)(Ve)?Ve:[Ve],(0,le.map)(Ve,function(He,We){return(0,Se.uX)(He,(0,le.isArray)(xe)?xe[We]:xe,ae)})};if(!A||!O){var de=B?"":P.markupStyleCreator.makeTooltipMarker(T.markerType,T.markerColor||"#333",M),te=A?"":(0,Se.uX)(ue,"ordinal",ae),xe=T.valueType,fe=O?[]:oe(T.value),ge=!B||!A,we=!B&&A,Te=Ce(E,M),Ae=Te.nameStyle,Ee=Te.valueStyle;return"richText"===M?(B?"":de)+(A?"":q(P,te,Ae))+(O?"":function G(P,T,R,E,M){var A=[M];return R&&A.push({padding:[0,0,0,E?10:20],align:"right"}),P.markupStyleCreator.wrapRichTextStyle((0,le.isArray)(T)?T.join("  "):T,A)}(P,fe,ge,we,Ee)):Y((B?"":de)+(A?"":function Q(P,T,R){return'<span style="'+R+";"+(T?"margin-left:2px":"")+'">'+(0,ce.F1)(P)+"</span>"}(te,!B,Ae))+(O?"":function F(P,T,R,E){var A=T?"float:right;margin-left:"+(R?"10px":"20px"):"";return P=(0,le.isArray)(P)?P:[P],'<span style="'+A+";"+E+'">'+(0,le.map)(P,function(O){return(0,ce.F1)(O)}).join("&nbsp;&nbsp;")+"</span>"}(fe,ge,we,Ee)),R)}}function K(P,T,R,E,M,A){if(P)return U(P)({useUTC:M,renderMode:R,orderMode:E,markupStyleCreator:T,valueFormatter:P.valueFormatter},P,0,A)}function Y(P,T){return'<div style="margin: '+T+"px 0 0;"+be+';">'+P+'<div style="clear:both"></div></div>'}function q(P,T,R){return P.markupStyleCreator.wrapRichTextStyle(T,R)}function W(P,T){var R=P.getData().getItemVisual(T,"style");return(0,Se.Lz)(R[P.visualDrawType])}function J(P,T){return P.get("padding")??("richText"===T?[8,10]:10)}var V=function(){function P(){this.richTextStyles={},this._nextStyleNameId=(0,ve.jj)()}return P.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},P.prototype.makeTooltipMarker=function(T,R,E){var M="richText"===E?this._generateStyleName():null,A=(0,Se.A0)({color:R,type:T,renderMode:E,markerId:M});return(0,le.isString)(A)?A:(this.richTextStyles[M]=A.style,A.content)},P.prototype.wrapRichTextStyle=function(T,R){var E={};(0,le.isArray)(R)?(0,le.each)(R,function(A){return(0,le.extend)(E,A)}):(0,le.extend)(E,R);var M=this._generateStyleName();return this.richTextStyles[M]=E,"{"+M+"|"+T+"}"},P}()},6592:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>V});var ce=z(628),Se=z(4785),le=z(1790),ye=z(1266),ve=z(4174),be=(0,ye.Yf)();function X(P,T){var A,O,R=ee(P,"labels"),E=(0,ve.rk)(T);return $(R,E)||(ce.isFunction(E)?A=F(P,E):(O="auto"===E?function K(P){return be(P).autoInterval??(be(P).autoInterval=P.calculateCategoryInterval())}(P):E,A=Q(P,O)),ie(R,E,{labels:A,labelCategoryInterval:O}))}function ee(P,T){return be(P)[T]||(be(P)[T]=[])}function $(P,T){for(var R=0;R<P.length;R++)if(P[R].key===T)return P[R].value}function ie(P,T,R){return P.push({key:T,value:R}),R}function Q(P,T,R){var E=(0,ve.J9)(P),M=P.scale,A=M.getExtent(),O=P.getLabelModel(),B=[],ue=Math.max((T||0)+1,1),ae=A[0],oe=M.count();0!==ae&&ue>1&&oe/ue>2&&(ae=Math.round(Math.ceil(ae/ue)*ue));var de=(0,ve.WY)(P),te=O.get("showMinLabel")||de,xe=O.get("showMaxLabel")||de;te&&ae!==A[0]&&ge(A[0]);for(var fe=ae;fe<=A[1];fe+=ue)ge(fe);function ge(we){var Te={value:we};B.push(R?we:{formattedLabel:E(Te),rawLabel:M.getLabel(Te),tickValue:we})}return xe&&fe-ue!==A[1]&&ge(A[1]),B}function F(P,T,R){var E=P.scale,M=(0,ve.J9)(P),A=[];return ce.each(E.getTicks(),function(O){var B=E.getLabel(O),ue=O.value;T(O.value,B)&&A.push(R?ue:{formattedLabel:M(O),rawLabel:B,tickValue:ue})}),A}var q=[0,1];function W(P,T){var M=(P[1]-P[0])/T/2;P[0]+=M,P[1]-=M}const V=function(){function P(T,R,E){this.onBand=!1,this.inverse=!1,this.dim=T,this.scale=R,this._extent=E||[0,0]}return P.prototype.contain=function(T){var R=this._extent,E=Math.min(R[0],R[1]),M=Math.max(R[0],R[1]);return T>=E&&T<=M},P.prototype.containData=function(T){return this.scale.contain(T)},P.prototype.getExtent=function(){return this._extent.slice()},P.prototype.getPixelPrecision=function(T){return(0,Se.M9)(T||this.scale.getExtent(),this._extent)},P.prototype.setExtent=function(T,R){var E=this._extent;E[0]=T,E[1]=R},P.prototype.dataToCoord=function(T,R){var E=this._extent,M=this.scale;return T=M.normalize(T),this.onBand&&"ordinal"===M.type&&W(E=E.slice(),M.count()),(0,Se.NU)(T,q,E,R)},P.prototype.coordToData=function(T,R){var E=this._extent,M=this.scale;this.onBand&&"ordinal"===M.type&&W(E=E.slice(),M.count());var A=(0,Se.NU)(T,E,q,R);return this.scale.scale(A)},P.prototype.pointToData=function(T,R){},P.prototype.getTicksCoords=function(T){var R=(T=T||{}).tickModel||this.getTickModel(),E=function he(P,T){return"category"===P.type?function re(P,T){var A,O,R=ee(P,"ticks"),E=(0,ve.rk)(T),M=$(R,E);if(M)return M;if((!T.get("show")||P.scale.isBlank())&&(A=[]),ce.isFunction(E))A=F(P,E,!0);else if("auto"===E){var B=X(P,P.getLabelModel());O=B.labelCategoryInterval,A=ce.map(B.labels,function(ue){return ue.tickValue})}else A=Q(P,O=E,!0);return ie(R,E,{ticks:A,tickCategoryInterval:O})}(P,T):{ticks:ce.map(P.scale.getTicks(),function(R){return R.value})}}(this,R),A=(0,ce.map)(E.ticks,function(B){return{coord:this.dataToCoord("ordinal"===this.scale.type?this.scale.getRawOrdinalNumber(B):B),tickValue:B}},this);return function J(P,T,R,E){var M=T.length;if(P.onBand&&!R&&M){var O,A=P.getExtent();if(1===M)T[0].coord=A[0],O=T[1]={coord:A[0]};else{var ae=(T[M-1].coord-T[0].coord)/(T[M-1].tickValue-T[0].tickValue);(0,ce.each)(T,function(xe){xe.coord-=ae/2});var oe=P.scale.getExtent();T.push(O={coord:T[M-1].coord+ae*(1+oe[1]-T[M-1].tickValue)})}var de=A[0]>A[1];te(T[0].coord,A[0])&&(E?T[0].coord=A[0]:T.shift()),E&&te(A[0],T[0].coord)&&T.unshift({coord:A[0]}),te(A[1],O.coord)&&(E?O.coord=A[1]:T.pop()),E&&te(O.coord,A[1])&&T.push({coord:A[1]})}function te(xe,fe){return xe=(0,Se.NM)(xe),fe=(0,Se.NM)(fe),de?xe>fe:xe<fe}}(this,A,R.get("alignWithLabel"),T.clamp),A},P.prototype.getMinorTicksCoords=function(){if("ordinal"===this.scale.type)return[];var R=this.model.getModel("minorTick").get("splitNumber");R>0&&R<100||(R=5);var E=this.scale.getMinorTicks(R);return(0,ce.map)(E,function(A){return(0,ce.map)(A,function(O){return{coord:this.dataToCoord(O),tickValue:O}},this)},this)},P.prototype.getViewLabels=function(){return function Ce(P){return"category"===P.type?function j(P){var T=P.getLabelModel(),R=X(P,T);return!T.get("show")||P.scale.isBlank()?{labels:[],labelCategoryInterval:R.labelCategoryInterval}:R}(P):function U(P){var T=P.scale.getTicks(),R=(0,ve.J9)(P);return{labels:ce.map(T,function(E,M){return{level:E.level,formattedLabel:R(E,M),rawLabel:P.scale.getLabel(E),tickValue:E.value}})}}(P)}(this).labels},P.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},P.prototype.getTickModel=function(){return this.model.getModel("axisTick")},P.prototype.getBandWidth=function(){var T=this._extent,R=this.scale.getExtent(),E=R[1]-R[0]+(this.onBand?1:0);0===E&&(E=1);var M=Math.abs(T[1]-T[0]);return Math.abs(M)/E},P.prototype.calculateCategoryInterval=function(){return function b(P){var T=function Y(P){var T=P.getLabelModel();return{axisRotate:P.getRotate?P.getRotate():P.isHorizontal&&!P.isHorizontal()?90:0,labelRotate:T.get("rotate")||0,font:T.getFont()}}(P),R=(0,ve.J9)(P),E=(T.axisRotate-T.labelRotate)/180*Math.PI,M=P.scale,A=M.getExtent(),O=M.count();if(A[1]-A[0]<1)return 0;var B=1;O>40&&(B=Math.max(1,Math.floor(O/40)));for(var ue=A[0],ae=P.dataToCoord(ue+1)-P.dataToCoord(ue),oe=Math.abs(ae*Math.cos(E)),de=Math.abs(ae*Math.sin(E)),te=0,xe=0;ue<=A[1];ue+=B){var ge,we=le.lP(R({value:ue}),T.font,"center","top");ge=1.3*we.height,te=Math.max(te,1.3*we.width,7),xe=Math.max(xe,ge,7)}var Te=te/oe,Ae=xe/de;isNaN(Te)&&(Te=1/0),isNaN(Ae)&&(Ae=1/0);var Ee=Math.max(0,Math.floor(Math.min(Te,Ae))),Ve=be(P.model),He=P.getExtent(),We=Ve.lastAutoInterval,$e=Ve.lastTickCount;return null!=We&&null!=$e&&Math.abs(We-Ee)<=1&&Math.abs($e-O)<=1&&We>Ee&&Ve.axisExtent0===He[0]&&Ve.axisExtent1===He[1]?Ee=We:(Ve.lastTickCount=O,Ve.lastAutoInterval=Ee,Ve.axisExtent0=He[0],Ve.axisExtent1=He[1]),Ee}(this)},P}()},4174:(Bt,Qe,z)=>{z.d(Qe,{aG:()=>T,Do:()=>A,DX:()=>M,PY:()=>ae,rk:()=>B,Xv:()=>J,Yb:()=>R,J9:()=>E,Jk:()=>P,WY:()=>ue,AH:()=>oe});var ce=z(628),Se=z(3156),le=z(5543),ye=z(8512),ve=z(2154),be=z(7021),Ce=z(9020),he=z(5845),j=z(4785),X=z(7331),re=ye.Z.prototype,U=le.Z.prototype,ee=j.NM,$=Math.floor,ie=Math.ceil,K=Math.pow,b=Math.log,Y=function(de){function te(){var xe=null!==de&&de.apply(this,arguments)||this;return xe.type="log",xe.base=10,xe._originalScale=new le.Z,xe._interval=0,xe}return(0,he.ZT)(te,de),te.prototype.getTicks=function(xe){var ge=this._extent,we=this._originalScale.getExtent(),Te=U.getTicks.call(this,xe);return ce.map(Te,function(Ae){var Ee=Ae.value,Ve=j.NM(K(this.base,Ee));return Ve=Ee===ge[0]&&this._fixMin?F(Ve,we[0]):Ve,{value:Ve=Ee===ge[1]&&this._fixMax?F(Ve,we[1]):Ve}},this)},te.prototype.setExtent=function(xe,fe){var ge=b(this.base);xe=b(Math.max(0,xe))/ge,fe=b(Math.max(0,fe))/ge,U.setExtent.call(this,xe,fe)},te.prototype.getExtent=function(){var xe=this.base,fe=re.getExtent.call(this);fe[0]=K(xe,fe[0]),fe[1]=K(xe,fe[1]);var we=this._originalScale.getExtent();return this._fixMin&&(fe[0]=F(fe[0],we[0])),this._fixMax&&(fe[1]=F(fe[1],we[1])),fe},te.prototype.unionExtent=function(xe){this._originalScale.unionExtent(xe);var fe=this.base;xe[0]=b(xe[0])/b(fe),xe[1]=b(xe[1])/b(fe),re.unionExtent.call(this,xe)},te.prototype.unionExtentFromData=function(xe,fe){this.unionExtent(xe.getApproximateExtent(fe))},te.prototype.calcNiceTicks=function(xe){xe=xe||10;var fe=this._extent,ge=fe[1]-fe[0];if(!(ge===1/0||ge<=0)){var we=j.Xd(ge);for(xe/ge*we<=.5&&(we*=10);!isNaN(we)&&Math.abs(we)<1&&Math.abs(we)>0;)we*=10;var Ae=[j.NM(ie(fe[0]/we)*we),j.NM($(fe[1]/we)*we)];this._interval=we,this._niceExtent=Ae}},te.prototype.calcNiceExtent=function(xe){U.calcNiceExtent.call(this,xe),this._fixMin=xe.fixMin,this._fixMax=xe.fixMax},te.prototype.parse=function(xe){return xe},te.prototype.contain=function(xe){return xe=b(xe)/b(this.base),X.XS(xe,this._extent)},te.prototype.normalize=function(xe){return xe=b(xe)/b(this.base),X.Fv(xe,this._extent)},te.prototype.scale=function(xe){return xe=X.bA(xe,this._extent),K(this.base,xe)},te.type="log",te}(ye.Z),Q=Y.prototype;function F(de,te){return ee(de,j.p8(te))}Q.getMinorTicks=U.getMinorTicks,Q.getLabel=U.getLabel,ye.Z.registerClass(Y);const q=Y;var G=z(143),W=z(7951);function J(de,te){var xe=de.type,fe=(0,W.Qw)(de,te,de.getExtent()).calculate();de.setBlank(fe.isBlank);var ge=fe.min,we=fe.max,Te=te.ecModel;if(Te&&"time"===xe){var Ae=(0,ve.Ge)("bar",Te),Ee=!1;if(ce.each(Ae,function(We){Ee=Ee||We.getBaseAxis()===te.axis}),Ee){var Ve=(0,ve.My)(Ae),He=function V(de,te,xe,fe){var ge=xe.axis.getExtent(),we=ge[1]-ge[0],Te=(0,ve.G_)(fe,xe.axis);if(void 0===Te)return{min:de,max:te};var Ae=1/0;ce.each(Te,function(lt){Ae=Math.min(lt.offset,Ae)});var Ee=-1/0;ce.each(Te,function(lt){Ee=Math.max(lt.offset+lt.width,Ee)}),Ae=Math.abs(Ae),Ee=Math.abs(Ee);var Ve=Ae+Ee,He=te-de,$e=He/(1-(Ae+Ee)/we)-He;return{min:de-=$e*(Ae/Ve),max:te+=$e*(Ee/Ve)}}(ge,we,te,Ve);ge=He.min,we=He.max}}return{extent:[ge,we],fixMin:fe.minFixed,fixMax:fe.maxFixed}}function P(de,te){var xe=te,fe=J(de,xe),ge=fe.extent,we=xe.get("splitNumber");de instanceof q&&(de.base=xe.get("logBase"));var Te=de.type,Ae=xe.get("interval"),Ee="interval"===Te||"time"===Te;de.setExtent(ge[0],ge[1]),de.calcNiceExtent({splitNumber:we,fixMin:fe.fixMin,fixMax:fe.fixMax,minInterval:Ee?xe.get("minInterval"):null,maxInterval:Ee?xe.get("maxInterval"):null}),null!=Ae&&de.setInterval&&de.setInterval(Ae)}function T(de,te){if(te=te||de.get("type"))switch(te){case"category":return new Se.Z({ordinalMeta:de.getOrdinalMeta?de.getOrdinalMeta():de.getCategories(),extent:[1/0,-1/0]});case"time":return new Ce.Z({locale:de.ecModel.getLocaleModel(),useUTC:de.ecModel.get("useUTC")});default:return new(ye.Z.getClass(te)||le.Z)}}function R(de){var te=de.scale.getExtent(),xe=te[0],fe=te[1];return!(xe>0&&fe>0||xe<0&&fe<0)}function E(de){var fe,te=de.getLabelModel().get("formatter"),xe="category"===de.type?de.scale.getExtent()[0]:null;return"time"===de.scale.type?(fe=te,function(ge,we){return de.scale.getFormattedLabel(ge,we,fe)}):ce.isString(te)?function(fe){return function(ge){var we=de.scale.getLabel(ge);return fe.replace("{value}",we??"")}}(te):ce.isFunction(te)?function(fe){return function(ge,we){return null!=xe&&(we=ge.value-xe),fe(M(de,ge),we,null!=ge.level?{level:ge.level}:null)}}(te):function(fe){return de.scale.getLabel(fe)}}function M(de,te){return"category"===de.type?de.scale.getLabel(te):te.value}function A(de){var xe=de.scale;if(de.model.get(["axisLabel","show"])&&!xe.isBlank()){var fe,ge,we=xe.getExtent();ge=xe instanceof Se.Z?xe.count():(fe=xe.getTicks()).length;var Ee,Te=de.getLabelModel(),Ae=E(de),Ve=1;ge>40&&(Ve=Math.ceil(ge/40));for(var He=0;He<ge;He+=Ve){var $e=Ae(fe?fe[He]:{value:we[0]+He},He),St=O(Te.getTextRect($e),Te.get("rotate")||0);Ee?Ee.union(St):Ee=St}return Ee}}function O(de,te){var xe=te*Math.PI/180,fe=de.width,ge=de.height,we=fe*Math.abs(Math.cos(xe))+Math.abs(ge*Math.sin(xe)),Te=fe*Math.abs(Math.sin(xe))+Math.abs(ge*Math.cos(xe));return new be.Z(de.x,de.y,we,Te)}function B(de){return de.get("interval")??"auto"}function ue(de){return"category"===de.type&&0===B(de.getLabelModel())}function ae(de,te){var xe={};return ce.each(de.mapDimensionsAll(te),function(fe){xe[(0,G.IR)(de,fe)]=!0}),ce.keys(xe)}function oe(de,te,xe){te&&ce.each(ae(te,xe),function(fe){var ge=te.getApproximateExtent(fe);ge[0]<de[0]&&(de[0]=ge[0]),ge[1]>de[1]&&(de[1]=ge[1])})}},2565:(Bt,Qe,z)=>{z.d(Qe,{W:()=>ce});var ce=function(){function Se(){}return Se.prototype.getNeedCrossZero=function(){return!this.option.scale},Se.prototype.getCoordSysModel=function(){},Se}()},8540:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>le});var ce=z(628);const le=function(){function ye(ve){this.type="cartesian",this._dimList=[],this._axes={},this.name=ve||""}return ye.prototype.getAxis=function(ve){return this._axes[ve]},ye.prototype.getAxes=function(){return ce.map(this._dimList,function(ve){return this._axes[ve]},this)},ye.prototype.getAxesByScale=function(ve){return ve=ve.toLowerCase(),ce.filter(this.getAxes(),function(be){return be.scale.type===ve})},ye.prototype.addAxis=function(ve){var be=ve.dim;this._axes[be]=ve,this._dimList.push(be)},ye}()},2224:(Bt,Qe,z)=>{z.d(Qe,{Im:()=>ie,Ni:()=>$,Qh:()=>U,jM:()=>ee});var ce=z(5845),Se=z(7021),le=z(8221),ye=z(1995),ve=z(3481),be=z(628),Ce=[];function he(K,b){for(var Y=0;Y<K.length;Y++)le.applyTransform(K[Y],K[Y],b)}function j(K,b,Y,Q){for(var F=0;F<K.length;F++){var q=K[F];Q&&(q=Q.project(q)),q&&isFinite(q[0])&&isFinite(q[1])&&(le.min(b,b,q),le.max(Y,Y,q))}}var re=function(){function K(b){this.name=b}return K.prototype.setCenter=function(b){this._center=b},K.prototype.getCenter=function(){var b=this._center;return b||(b=this._center=this.calcCenter()),b},K}(),U=function K(b,Y){this.type="polygon",this.exterior=b,this.interiors=Y},ee=function K(b){this.type="linestring",this.points=b},$=function(K){function b(Y,Q,F){var q=K.call(this,Y)||this;return q.type="geoJSON",q.geometries=Q,q._center=F&&[F[0],F[1]],q}return(0,ce.ZT)(b,K),b.prototype.calcCenter=function(){for(var Q,Y=this.geometries,F=0,q=0;q<Y.length;q++){var G=Y[q],W=G.exterior,J=W&&W.length;J>F&&(Q=G,F=J)}if(Q)return function X(K){for(var b=0,Y=0,Q=0,F=K.length,q=K[F-1][0],G=K[F-1][1],W=0;W<F;W++){var J=K[W][0],V=K[W][1],P=q*V-J*G;b+=P,Y+=(q+J)*P,Q+=(G+V)*P,q=J,G=V}return b?[Y/b/3,Q/b/3,b]:[K[0][0]||0,K[0][1]||0]}(Q.exterior);var V=this.getBoundingRect();return[V.x+V.width/2,V.y+V.height/2]},b.prototype.getBoundingRect=function(Y){var Q=this._rect;if(Q&&!Y)return Q;var F=[1/0,1/0],q=[-1/0,-1/0];return(0,be.each)(this.geometries,function(W){"polygon"===W.type?j(W.exterior,F,q,Y):(0,be.each)(W.points,function(J){j(J,F,q,Y)})}),isFinite(F[0])&&isFinite(F[1])&&isFinite(q[0])&&isFinite(q[1])||(F[0]=F[1]=q[0]=q[1]=0),Q=new Se.Z(F[0],F[1],q[0]-F[0],q[1]-F[1]),Y||(this._rect=Q),Q},b.prototype.contain=function(Y){var Q=this.getBoundingRect(),F=this.geometries;if(!Q.contain(Y[0],Y[1]))return!1;e:for(var q=0,G=F.length;q<G;q++){var W=F[q];if("polygon"===W.type){var V=W.interiors;if(ye.X(W.exterior,Y[0],Y[1])){for(var P=0;P<(V?V.length:0);P++)if(ye.X(V[P],Y[0],Y[1]))continue e;return!0}}}return!1},b.prototype.transformTo=function(Y,Q,F,q){var G=this.getBoundingRect(),W=G.width/G.height;F?q||(q=F/W):F=W*q;for(var J=new Se.Z(Y,Q,F,q),V=G.calculateTransform(J),P=this.geometries,T=0;T<P.length;T++){var R=P[T];"polygon"===R.type?(he(R.exterior,V),(0,be.each)(R.interiors,function(E){he(E,V)})):(0,be.each)(R.points,function(E){he(E,V)})}(G=this._rect).copy(J),this._center=[G.x+G.width/2,G.y+G.height/2]},b.prototype.cloneShallow=function(Y){null==Y&&(Y=this.name);var Q=new b(Y,this.geometries,this._center);return Q._rect=this._rect,Q.transformTo=null,Q},b}(re),ie=function(K){function b(Y,Q){var F=K.call(this,Y)||this;return F.type="geoSVG",F._elOnlyForCalculate=Q,F}return(0,ce.ZT)(b,K),b.prototype.calcCenter=function(){for(var Y=this._elOnlyForCalculate,Q=Y.getBoundingRect(),F=[Q.x+Q.width/2,Q.y+Q.height/2],q=ve.identity(Ce),G=Y;G&&!G.isGeoSVGGraphicRoot;)ve.mul(q,G.getLocalTransform(),q),G=G.parent;return ve.invert(q,q),le.applyTransform(F,F,q),F},b}(re)},776:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>Se});var ce={\u5357\u6d77\u8bf8\u5c9b:[32,80],\u5e7f\u4e1c:[0,-10],\u9999\u6e2f:[10,5],\u6fb3\u95e8:[-10,10],\u5929\u6d25:[5,5]};function Se(le,ye){if("china"===le){var ve=ce[ye.name];if(ve){var be=ye.getCenter();be[0]+=ve[0]/10.5,be[1]+=-ve[1]/14,ye.setCenter(be)}}}},119:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>be});var ce=z(628),Se=z(2224);function ye(Ce,he,j){for(var X=0;X<Ce.length;X++)Ce[X]=ve(Ce[X],he[X],j)}function ve(Ce,he,j){for(var X=[],re=he[0],U=he[1],ee=0;ee<Ce.length;ee+=2){var $=Ce.charCodeAt(ee)-64,ie=Ce.charCodeAt(ee+1)-64;$=$>>1^-(1&$),ie=ie>>1^-(1&ie),re=$+=re,U=ie+=U,X.push([$/j,ie/j])}return X}function be(Ce,he){return Ce=function le(Ce){if(!Ce.UTF8Encoding)return Ce;var he=Ce,j=he.UTF8Scale;return null==j&&(j=1024),ce.each(he.features,function(re){var U=re.geometry,ee=U.encodeOffsets,$=U.coordinates;if(ee)switch(U.type){case"LineString":U.coordinates=ve($,ee,j);break;case"Polygon":case"MultiLineString":ye($,ee,j);break;case"MultiPolygon":ce.each($,function(ie,K){return ye(ie,ee[K],j)})}}),he.UTF8Encoding=!1,he}(Ce),ce.map(ce.filter(Ce.features,function(j){return j.geometry&&j.properties&&j.geometry.coordinates.length>0}),function(j){var X=j.properties,re=j.geometry,U=[];switch(re.type){case"Polygon":var ee=re.coordinates;U.push(new Se.Qh(ee[0],ee.slice(1)));break;case"MultiPolygon":ce.each(re.coordinates,function(ie){ie[0]&&U.push(new Se.Qh(ie[0],ie.slice(1)))});break;case"LineString":U.push(new Se.jM([re.coordinates]));break;case"MultiLineString":U.push(new Se.jM(re.coordinates))}var $=new Se.Ni(X[he||"name"],U,X.cp);return $.properties=X,$})}},7951:(Bt,Qe,z)=>{z.d(Qe,{Qw:()=>be});var ce=z(628),Se=z(1790),le=function(){function he(j,X,re){this._prepareParams(j,X,re)}return he.prototype._prepareParams=function(j,X,re){re[1]<re[0]&&(re=[NaN,NaN]),this._dataMin=re[0],this._dataMax=re[1];var U=this._isOrdinal="ordinal"===j.type;this._needCrossZero="interval"===j.type&&X.getNeedCrossZero&&X.getNeedCrossZero();var ee=this._modelMinRaw=X.get("min",!0);(0,ce.isFunction)(ee)?this._modelMinNum=Ce(j,ee({min:re[0],max:re[1]})):"dataMin"!==ee&&(this._modelMinNum=Ce(j,ee));var $=this._modelMaxRaw=X.get("max",!0);if((0,ce.isFunction)($)?this._modelMaxNum=Ce(j,$({min:re[0],max:re[1]})):"dataMax"!==$&&(this._modelMaxNum=Ce(j,$)),U)this._axisDataLen=X.getCategories().length;else{var ie=X.get("boundaryGap"),K=(0,ce.isArray)(ie)?ie:[ie||0,ie||0];this._boundaryGapInner="boolean"==typeof K[0]||"boolean"==typeof K[1]?[0,0]:[(0,Se.GM)(K[0],1),(0,Se.GM)(K[1],1)]}},he.prototype.calculate=function(){var j=this._isOrdinal,X=this._dataMin,re=this._dataMax,U=this._axisDataLen,ee=this._boundaryGapInner,$=j?null:re-X||Math.abs(X),ie="dataMin"===this._modelMinRaw?X:this._modelMinNum,K="dataMax"===this._modelMaxRaw?re:this._modelMaxNum,b=null!=ie,Y=null!=K;null==ie&&(ie=j?U?0:NaN:X-ee[0]*$),null==K&&(K=j?U?U-1:NaN:re+ee[1]*$),(null==ie||!isFinite(ie))&&(ie=NaN),(null==K||!isFinite(K))&&(K=NaN);var Q=(0,ce.eqNaN)(ie)||(0,ce.eqNaN)(K)||j&&!U;this._needCrossZero&&(ie>0&&K>0&&!b&&(ie=0),ie<0&&K<0&&!Y&&(K=0));var F=this._determinedMin,q=this._determinedMax;return null!=F&&(ie=F,b=!0),null!=q&&(K=q,Y=!0),{min:ie,max:K,minFixed:b,maxFixed:Y,isBlank:Q}},he.prototype.modifyDataMinMax=function(j,X){this[ve[j]]=X},he.prototype.setDeterminedMinMax=function(j,X){this[ye[j]]=X},he.prototype.freeze=function(){this.frozen=!0},he}(),ye={min:"_determinedMin",max:"_determinedMax"},ve={min:"_dataMin",max:"_dataMax"};function be(he,j,X){var re=he.rawExtentInfo;return re||(re=new le(he,j,X),he.rawExtentInfo=re,re)}function Ce(he,j){return null==j?null:(0,ce.eqNaN)(j)?NaN:he.parse(j)}},9506:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>ye});var ce=z(628),Se={};const ye=function(){function ve(){this._coordinateSystems=[]}return ve.prototype.create=function(be,Ce){var he=[];ce.each(Se,function(j,X){var re=j.create(be,Ce);he=he.concat(re||[])}),this._coordinateSystems=he},ve.prototype.update=function(be,Ce){ce.each(this._coordinateSystems,function(he){he.update&&he.update(be,Ce)})},ve.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},ve.register=function(be,Ce){Se[be]=Ce},ve.get=function(be){return Se[be]},ve}()},5433:(Bt,Qe,z)=>{z.d(Qe,{Hr:()=>dh,$j:()=>tu,Ok:()=>co,HO:()=>Vf,eU:()=>vc,zP:()=>Ur,B9:()=>od,wL:()=>mg,JE:()=>nu,rp:()=>Wf,FU:()=>Ps,S1:()=>aa,zl:()=>Bu,RS:()=>Hi,qR:()=>Vr,yn:()=>mc,I2:()=>Ff.I2,je:()=>Ma,sq:()=>gc,Br:()=>ws,ds:()=>Ua,Pu:()=>Fu,aW:()=>qs,OB:()=>ea,YK:()=>ru,Og:()=>ns,jQ:()=>Vu,i8:()=>uc});var ce=z(5845),Se=z(7806),le=z(628),ye=z(169),ve=z(9995),be=z(6801),Ce=z(1266),he=z(1725),j=z(9447),X="";typeof navigator<"u"&&(X=navigator.platform||"");var re="rgba(0, 0, 0, 0.2)";const U={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:re,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:re,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:re,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:re,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:re,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:re,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:X.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var K,b,Y,ee=z(6153),$=z(157),ie=z(1769),Q="\0_ec_inner",V=function(Ne){function Ge(){return null!==Ne&&Ne.apply(this,arguments)||this}return(0,ce.ZT)(Ge,Ne),Ge.prototype.init=function(Le,ze,Ze,et,ft,Wt){et=et||{},this.option=null,this._theme=new he.Z(et),this._locale=new he.Z(ft),this._optionManager=Wt},Ge.prototype.setOption=function(Le,ze,Ze){var et=M(ze);this._optionManager.setOption(Le,Ze,et),this._resetOption(null,et)},Ge.prototype.resetOption=function(Le,ze){return this._resetOption(Le,M(ze))},Ge.prototype._resetOption=function(Le,ze){var Ze=!1,et=this._optionManager;if(!Le||"recreate"===Le){var ft=et.mountOption("recreate"===Le);this.option&&"recreate"!==Le?(this.restoreData(),this._mergeOption(ft,ze)):Y(this,ft),Ze=!0}if(("timeline"===Le||"media"===Le)&&this.restoreData(),!Le||"recreate"===Le||"timeline"===Le){var Wt=et.getTimelineOption(this);Wt&&(Ze=!0,this._mergeOption(Wt,ze))}if(!Le||"recreate"===Le||"media"===Le){var zt=et.getMediaOption(this);zt.length&&(0,le.each)(zt,function(gn){Ze=!0,this._mergeOption(gn,ze)},this)}return Ze},Ge.prototype.mergeOption=function(Le){this._mergeOption(Le,null)},Ge.prototype._mergeOption=function(Le,ze){var Ze=this.option,et=this._componentsMap,ft=this._componentsCount,Wt=[],zt=(0,le.createHashMap)(),gn=ze&&ze.replaceMergeMainTypeMap;(0,ee.md)(this),(0,le.each)(Le,function(ct,xt){null!=ct&&(j.Z.hasClass(xt)?xt&&(Wt.push(xt),zt.set(xt,!0)):Ze[xt]=null==Ze[xt]?(0,le.clone)(ct):(0,le.merge)(Ze[xt],ct,!0))}),gn&&gn.each(function(ct,xt){j.Z.hasClass(xt)&&!zt.get(xt)&&(Wt.push(xt),zt.set(xt,!0))}),j.Z.topologicalTravel(Wt,j.Z.getAllClassMainTypes(),function Mn(ct){var xt=(0,$.R)(this,ct,Ce.kF(Le[ct])),gt=et.get(ct),Nt=gt?gn&&gn.get(ct)?"replaceMerge":"normalMerge":"replaceAll",Kt=Ce.ab(gt,xt,Nt);Ce.O0(Kt,ct,j.Z),Ze[ct]=null,et.set(ct,null),ft.set(ct,0);var kn,vn=[],bn=[],Bn=0;(0,le.each)(Kt,function(Jr,_r){var yr=Jr.existing,ho=Jr.newOption;if(ho){var rs=j.Z.getClass(ct,Jr.keyInfo.subType,!("series"===ct));if(!rs)return;if("tooltip"===ct){if(kn)return;kn=!0}if(yr&&yr.constructor===rs)yr.name=Jr.keyInfo.name,yr.mergeOption(ho,this),yr.optionUpdated(ho,!1);else{var Xi=(0,le.extend)({componentIndex:_r},Jr.keyInfo);yr=new rs(ho,this,this,Xi),(0,le.extend)(yr,Xi),Jr.brandNew&&(yr.__requireNewView=!0),yr.init(ho,this,this),yr.optionUpdated(null,!0)}}else yr&&(yr.mergeOption({},this),yr.optionUpdated({},!1));yr?(vn.push(yr.option),bn.push(yr),Bn++):(vn.push(void 0),bn.push(void 0))},this),Ze[ct]=vn,et.set(ct,bn),ft.set(ct,Bn),"series"===ct&&K(this)},this),this._seriesIndices||K(this)},Ge.prototype.getOption=function(){var Le=(0,le.clone)(this.option);return(0,le.each)(Le,function(ze,Ze){if(j.Z.hasClass(Ze)){for(var et=Ce.kF(ze),ft=et.length,Wt=!1,zt=ft-1;zt>=0;zt--)et[zt]&&!Ce.lY(et[zt])?Wt=!0:(et[zt]=null,!Wt&&ft--);et.length=ft,Le[Ze]=et}}),delete Le[Q],Le},Ge.prototype.getTheme=function(){return this._theme},Ge.prototype.getLocaleModel=function(){return this._locale},Ge.prototype.setUpdatePayload=function(Le){this._payload=Le},Ge.prototype.getUpdatePayload=function(){return this._payload},Ge.prototype.getComponent=function(Le,ze){var Ze=this._componentsMap.get(Le);if(Ze){var et=Ze[ze||0];if(et)return et;if(null==ze)for(var ft=0;ft<Ze.length;ft++)if(Ze[ft])return Ze[ft]}},Ge.prototype.queryComponents=function(Le){var ze=Le.mainType;if(!ze)return[];var zt,Ze=Le.index,et=Le.id,ft=Le.name,Wt=this._componentsMap.get(ze);return Wt&&Wt.length?(null!=Ze?(zt=[],(0,le.each)(Ce.kF(Ze),function(gn){Wt[gn]&&zt.push(Wt[gn])})):zt=null!=et?R("id",et,Wt):null!=ft?R("name",ft,Wt):(0,le.filter)(Wt,function(gn){return!!gn}),E(zt,Le)):[]},Ge.prototype.findComponents=function(Le){var Ze=Le.mainType,et=function Wt(gn){var Mn=Ze+"Index",ct=Ze+"Id",xt=Ze+"Name";return!gn||null==gn[Mn]&&null==gn[ct]&&null==gn[xt]?null:{mainType:Ze,index:gn[Mn],id:gn[ct],name:gn[xt]}}(Le.query);return function zt(gn){return Le.filter?(0,le.filter)(gn,Le.filter):gn}(E(et?this.queryComponents(et):(0,le.filter)(this._componentsMap.get(Ze),function(gn){return!!gn}),Le))},Ge.prototype.eachComponent=function(Le,ze,Ze){var et=this._componentsMap;if((0,le.isFunction)(Le)){var ft=ze,Wt=Le;et.each(function(ct,xt){for(var gt=0;ct&&gt<ct.length;gt++){var Nt=ct[gt];Nt&&Wt.call(ft,xt,Nt,Nt.componentIndex)}})}else for(var zt=(0,le.isString)(Le)?et.get(Le):(0,le.isObject)(Le)?this.findComponents(Le):null,gn=0;zt&&gn<zt.length;gn++){var Mn=zt[gn];Mn&&ze.call(Ze,Mn,Mn.componentIndex)}},Ge.prototype.getSeriesByName=function(Le){var ze=Ce.U5(Le,null);return(0,le.filter)(this._componentsMap.get("series"),function(Ze){return!!Ze&&null!=ze&&Ze.name===ze})},Ge.prototype.getSeriesByIndex=function(Le){return this._componentsMap.get("series")[Le]},Ge.prototype.getSeriesByType=function(Le){return(0,le.filter)(this._componentsMap.get("series"),function(ze){return!!ze&&ze.subType===Le})},Ge.prototype.getSeries=function(){return(0,le.filter)(this._componentsMap.get("series"),function(Le){return!!Le})},Ge.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},Ge.prototype.eachSeries=function(Le,ze){b(this),(0,le.each)(this._seriesIndices,function(Ze){var et=this._componentsMap.get("series")[Ze];Le.call(ze,et,Ze)},this)},Ge.prototype.eachRawSeries=function(Le,ze){(0,le.each)(this._componentsMap.get("series"),function(Ze){Ze&&Le.call(ze,Ze,Ze.componentIndex)})},Ge.prototype.eachSeriesByType=function(Le,ze,Ze){b(this),(0,le.each)(this._seriesIndices,function(et){var ft=this._componentsMap.get("series")[et];ft.subType===Le&&ze.call(Ze,ft,et)},this)},Ge.prototype.eachRawSeriesByType=function(Le,ze,Ze){return(0,le.each)(this.getSeriesByType(Le),ze,Ze)},Ge.prototype.isSeriesFiltered=function(Le){return b(this),null==this._seriesIndicesMap.get(Le.componentIndex)},Ge.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},Ge.prototype.filterSeries=function(Le,ze){b(this);var Ze=[];(0,le.each)(this._seriesIndices,function(et){var ft=this._componentsMap.get("series")[et];Le.call(ze,ft,et)&&Ze.push(et)},this),this._seriesIndices=Ze,this._seriesIndicesMap=(0,le.createHashMap)(Ze)},Ge.prototype.restoreData=function(Le){K(this);var ze=this._componentsMap,Ze=[];ze.each(function(et,ft){j.Z.hasClass(ft)&&Ze.push(ft)}),j.Z.topologicalTravel(Ze,j.Z.getAllClassMainTypes(),function(et){(0,le.each)(ze.get(et),function(ft){ft&&("series"!==et||!function P(Ne,Ge){if(Ge){var Le=Ge.seriesIndex,ze=Ge.seriesId,Ze=Ge.seriesName;return null!=Le&&Ne.componentIndex!==Le||null!=ze&&Ne.id!==ze||null!=Ze&&Ne.name!==Ze}}(ft,Le))&&ft.restoreData()})})},Ge.internalField=(K=function(Le){var ze=Le._seriesIndices=[];(0,le.each)(Le._componentsMap.get("series"),function(Ze){Ze&&ze.push(Ze.componentIndex)}),Le._seriesIndicesMap=(0,le.createHashMap)(ze)},b=function(Le){},void(Y=function(Le,ze){Le.option={},Le.option[Q]=1,Le._componentsMap=(0,le.createHashMap)({series:[]}),Le._componentsCount=(0,le.createHashMap)();var Ze=ze.aria;(0,le.isObject)(Ze)&&null==Ze.enabled&&(Ze.enabled=!0),function T(Ne,Ge){var Le=Ne.color&&!Ne.colorLayer;(0,le.each)(Ge,function(ze,Ze){"colorLayer"===Ze&&Le||j.Z.hasClass(Ze)||("object"==typeof ze?Ne[Ze]=Ne[Ze]?(0,le.merge)(Ne[Ze],ze,!1):(0,le.clone)(ze):null==Ne[Ze]&&(Ne[Ze]=ze))})}(ze,Le._theme.option),(0,le.merge)(ze,U,!1),Le._mergeOption(ze,null)})),Ge}(he.Z);function R(Ne,Ge,Le){if((0,le.isArray)(Ge)){var ze=(0,le.createHashMap)();return(0,le.each)(Ge,function(et){null!=et&&null!=Ce.U5(et,null)&&ze.set(et,!0)}),(0,le.filter)(Le,function(et){return et&&ze.get(et[Ne])})}var Ze=Ce.U5(Ge,null);return(0,le.filter)(Le,function(et){return et&&null!=Ze&&et[Ne]===Ze})}function E(Ne,Ge){return Ge.hasOwnProperty("subType")?(0,le.filter)(Ne,function(Le){return Le&&Le.subType===Ge.subType}):Ne}function M(Ne){var Ge=(0,le.createHashMap)();return Ne&&(0,le.each)(Ce.kF(Ne.replaceMerge),function(Le){Ge.set(Le,!0)}),{replaceMergeMainTypeMap:Ge}}(0,le.mixin)(V,ie._);const A=V;var O=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"];const ue=function Ne(Ge){le.each(O,function(Le){this[Le]=le.bind(Ge[Le],Ge)},this)};var ae=z(9506),oe=/^(min|max)?(.+)$/;function xe(Ne,Ge,Le){var ze={width:Ge,height:Le,aspectratio:Ge/Le},Ze=!0;return(0,le.each)(Ne,function(et,ft){var Wt=ft.match(oe);if(Wt&&Wt[1]&&Wt[2]){var zt=Wt[1],gn=Wt[2].toLowerCase();(function fe(Ne,Ge,Le){return"min"===Le?Ne>=Ge:"max"===Le?Ne<=Ge:Ne===Ge})(ze[gn],et,zt)||(Ze=!1)}}),Ze}const we=function(){function Ne(Ge){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=Ge}return Ne.prototype.setOption=function(Ge,Le,ze){Ge&&((0,le.each)((0,Ce.kF)(Ge.series),function(ft){ft&&ft.data&&(0,le.isTypedArray)(ft.data)&&(0,le.setAsPrimitive)(ft.data)}),(0,le.each)((0,Ce.kF)(Ge.dataset),function(ft){ft&&ft.source&&(0,le.isTypedArray)(ft.source)&&(0,le.setAsPrimitive)(ft.source)})),Ge=(0,le.clone)(Ge);var Ze=this._optionBackup,et=function te(Ne,Ge,Le){var Ze,et,ze=[],ft=Ne.baseOption,Wt=Ne.timeline,zt=Ne.options,gn=Ne.media,Mn=!!Ne.media,ct=!!(zt||Wt||ft&&ft.timeline);function xt(gt){(0,le.each)(Ge,function(Nt){Nt(gt,Le)})}return ft?(et=ft).timeline||(et.timeline=Wt):((ct||Mn)&&(Ne.options=Ne.media=null),et=Ne),Mn&&(0,le.isArray)(gn)&&(0,le.each)(gn,function(gt){gt&&gt.option&&(gt.query?ze.push(gt):Ze||(Ze=gt))}),xt(et),(0,le.each)(zt,function(gt){return xt(gt)}),(0,le.each)(ze,function(gt){return xt(gt.option)}),{baseOption:et,timelineOptions:zt||[],mediaDefault:Ze,mediaList:ze}}(Ge,Le,!Ze);this._newBaseOption=et.baseOption,Ze?(et.timelineOptions.length&&(Ze.timelineOptions=et.timelineOptions),et.mediaList.length&&(Ze.mediaList=et.mediaList),et.mediaDefault&&(Ze.mediaDefault=et.mediaDefault)):this._optionBackup=et},Ne.prototype.mountOption=function(Ge){var Le=this._optionBackup;return this._timelineOptions=Le.timelineOptions,this._mediaList=Le.mediaList,this._mediaDefault=Le.mediaDefault,this._currentMediaIndices=[],(0,le.clone)(Ge?Le.baseOption:this._newBaseOption)},Ne.prototype.getTimelineOption=function(Ge){var Le,ze=this._timelineOptions;if(ze.length){var Ze=Ge.getComponent("timeline");Ze&&(Le=(0,le.clone)(ze[Ze.getCurrentIndex()]))}return Le},Ne.prototype.getMediaOption=function(Ge){var Le=this._api.getWidth(),ze=this._api.getHeight(),Ze=this._mediaList,et=this._mediaDefault,ft=[],Wt=[];if(!Ze.length&&!et)return Wt;for(var zt=0,gn=Ze.length;zt<gn;zt++)xe(Ze[zt].query,Le,ze)&&ft.push(zt);return!ft.length&&et&&(ft=[-1]),ft.length&&!function ge(Ne,Ge){return Ne.join(",")===Ge.join(",")}(ft,this._currentMediaIndices)&&(Wt=(0,le.map)(ft,function(Mn){return(0,le.clone)(-1===Mn?et.option:Ze[Mn].option)})),this._currentMediaIndices=ft,Wt},Ne}();var Te=le.each,Ae=le.isObject,Ee=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function Ve(Ne){var Ge=Ne&&Ne.itemStyle;if(Ge)for(var Le=0,ze=Ee.length;Le<ze;Le++){var Ze=Ee[Le],et=Ge.normal,ft=Ge.emphasis;et&&et[Ze]&&(Ne[Ze]=Ne[Ze]||{},Ne[Ze].normal?le.merge(Ne[Ze].normal,et[Ze]):Ne[Ze].normal=et[Ze],et[Ze]=null),ft&&ft[Ze]&&(Ne[Ze]=Ne[Ze]||{},Ne[Ze].emphasis?le.merge(Ne[Ze].emphasis,ft[Ze]):Ne[Ze].emphasis=ft[Ze],ft[Ze]=null)}}function He(Ne,Ge,Le){if(Ne&&Ne[Ge]&&(Ne[Ge].normal||Ne[Ge].emphasis)){var ze=Ne[Ge].normal,Ze=Ne[Ge].emphasis;ze&&(Le?(Ne[Ge].normal=Ne[Ge].emphasis=null,le.defaults(Ne[Ge],ze)):Ne[Ge]=ze),Ze&&(Ne.emphasis=Ne.emphasis||{},Ne.emphasis[Ge]=Ze,Ze.focus&&(Ne.emphasis.focus=Ze.focus),Ze.blurScope&&(Ne.emphasis.blurScope=Ze.blurScope))}}function We(Ne){He(Ne,"itemStyle"),He(Ne,"lineStyle"),He(Ne,"areaStyle"),He(Ne,"label"),He(Ne,"labelLine"),He(Ne,"upperLabel"),He(Ne,"edgeLabel")}function $e(Ne,Ge){var Le=Ae(Ne)&&Ne[Ge],ze=Ae(Le)&&Le.textStyle;if(ze)for(var Ze=0,et=Ce.Td.length;Ze<et;Ze++){var ft=Ce.Td[Ze];ze.hasOwnProperty(ft)&&(Le[ft]=ze[ft])}}function lt(Ne){Ne&&(We(Ne),$e(Ne,"label"),Ne.emphasis&&$e(Ne.emphasis,"label"))}function _t(Ne){return le.isArray(Ne)?Ne:Ne?[Ne]:[]}function Ot(Ne){return(le.isArray(Ne)?Ne[0]:Ne)||{}}function Vn(Ne){Ne&&(0,le.each)(ar,function(Ge){Ge[0]in Ne&&!(Ge[1]in Ne)&&(Ne[Ge[1]]=Ne[Ge[0]])})}var ar=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Yn=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],vr=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function Qn(Ne){var Ge=Ne&&Ne.itemStyle;if(Ge)for(var Le=0;Le<vr.length;Le++){var ze=vr[Le][1];null!=Ge[ze]&&(Ge[vr[Le][0]]=Ge[ze])}}function $t(Ne){!Ne||"edge"===Ne.alignTo&&null!=Ne.margin&&null==Ne.edgeDistance&&(Ne.edgeDistance=Ne.margin)}function un(Ne){!Ne||Ne.downplay&&!Ne.blur&&(Ne.blur=Ne.downplay)}function jn(Ne,Ge){if(Ne)for(var Le=0;Le<Ne.length;Le++)Ge(Ne[Le]),Ne[Le]&&jn(Ne[Le].children,Ge)}function Je(Ne,Ge){(function Vt(Ne,Ge){Te(_t(Ne.series),function(ze){Ae(ze)&&function St(Ne){if(Ae(Ne)){Ve(Ne),We(Ne),$e(Ne,"label"),$e(Ne,"upperLabel"),$e(Ne,"edgeLabel"),Ne.emphasis&&($e(Ne.emphasis,"label"),$e(Ne.emphasis,"upperLabel"),$e(Ne.emphasis,"edgeLabel"));var Ge=Ne.markPoint;Ge&&(Ve(Ge),lt(Ge));var Le=Ne.markLine;Le&&(Ve(Le),lt(Le));var ze=Ne.markArea;ze&&lt(ze);var Ze=Ne.data;if("graph"===Ne.type){Ze=Ze||Ne.nodes;var et=Ne.links||Ne.edges;if(et&&!le.isTypedArray(et))for(var ft=0;ft<et.length;ft++)lt(et[ft]);le.each(Ne.categories,function(gn){We(gn)})}if(Ze&&!le.isTypedArray(Ze))for(ft=0;ft<Ze.length;ft++)lt(Ze[ft]);if((Ge=Ne.markPoint)&&Ge.data){var Wt=Ge.data;for(ft=0;ft<Wt.length;ft++)lt(Wt[ft])}if((Le=Ne.markLine)&&Le.data){var zt=Le.data;for(ft=0;ft<zt.length;ft++)le.isArray(zt[ft])?(lt(zt[ft][0]),lt(zt[ft][1])):lt(zt[ft])}"gauge"===Ne.type?($e(Ne,"axisLabel"),$e(Ne,"title"),$e(Ne,"detail")):"treemap"===Ne.type?(He(Ne.breadcrumb,"itemStyle"),le.each(Ne.levels,function(gn){We(gn)})):"tree"===Ne.type&&We(Ne.leaves)}}(ze)});var Le=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];Ge&&Le.push("valueAxis","categoryAxis","logAxis","timeAxis"),Te(Le,function(ze){Te(_t(Ne[ze]),function(Ze){Ze&&($e(Ze,"axisLabel"),$e(Ze.axisPointer,"label"))})}),Te(_t(Ne.parallel),function(ze){var Ze=ze&&ze.parallelAxisDefault;$e(Ze,"axisLabel"),$e(Ze&&Ze.axisPointer,"label")}),Te(_t(Ne.calendar),function(ze){He(ze,"itemStyle"),$e(ze,"dayLabel"),$e(ze,"monthLabel"),$e(ze,"yearLabel")}),Te(_t(Ne.radar),function(ze){$e(ze,"name"),ze.name&&null==ze.axisName&&(ze.axisName=ze.name,delete ze.name),null!=ze.nameGap&&null==ze.axisNameGap&&(ze.axisNameGap=ze.nameGap,delete ze.nameGap)}),Te(_t(Ne.geo),function(ze){Ae(ze)&&(lt(ze),Te(_t(ze.regions),function(Ze){lt(Ze)}))}),Te(_t(Ne.timeline),function(ze){lt(ze),He(ze,"label"),He(ze,"itemStyle"),He(ze,"controlStyle",!0);var Ze=ze.data;le.isArray(Ze)&&le.each(Ze,function(et){le.isObject(et)&&(He(et,"label"),He(et,"itemStyle"))})}),Te(_t(Ne.toolbox),function(ze){He(ze,"iconStyle"),Te(ze.feature,function(Ze){He(Ze,"iconStyle")})}),$e(Ot(Ne.axisPointer),"label"),$e(Ot(Ne.tooltip).axisPointer,"label")})(Ne,Ge),Ne.series=(0,Ce.kF)(Ne.series),(0,le.each)(Ne.series,function(Le){if((0,le.isObject)(Le)){var ze=Le.type;if("line"===ze)null!=Le.clipOverflow&&(Le.clip=Le.clipOverflow);else if("pie"===ze||"gauge"===ze){if(null!=Le.clockWise&&(Le.clockwise=Le.clockWise),$t(Le.label),(Ze=Le.data)&&!(0,le.isTypedArray)(Ze))for(var et=0;et<Ze.length;et++)$t(Ze[et]);null!=Le.hoverOffset&&(Le.emphasis=Le.emphasis||{},(Le.emphasis.scaleSize=null)&&(Le.emphasis.scaleSize=Le.hoverOffset))}else if("gauge"===ze){var ft=function an(Ne,Ge){for(var Le=Ge.split(","),ze=Ne,Ze=0;Ze<Le.length&&null!=(ze=ze&&ze[Le[Ze]]);Ze++);return ze}(Le,"pointer.color");null!=ft&&function hn(Ne,Ge,Le,ze){for(var ft,Ze=Ge.split(","),et=Ne,Wt=0;Wt<Ze.length-1;Wt++)null==et[ft=Ze[Wt]]&&(et[ft]={}),et=et[ft];(ze||null==et[Ze[Wt]])&&(et[Ze[Wt]]=Le)}(Le,"itemStyle.color",ft)}else if("bar"===ze){var Ze;if(Qn(Le),Qn(Le.backgroundStyle),Qn(Le.emphasis),(Ze=Le.data)&&!(0,le.isTypedArray)(Ze))for(et=0;et<Ze.length;et++)"object"==typeof Ze[et]&&(Qn(Ze[et]),Qn(Ze[et]&&Ze[et].emphasis))}else if("sunburst"===ze){var Wt=Le.highlightPolicy;Wt&&(Le.emphasis=Le.emphasis||{},Le.emphasis.focus||(Le.emphasis.focus=Wt)),un(Le),jn(Le.data,un)}else"graph"===ze||"sankey"===ze?function On(Ne){!Ne||null!=Ne.focusNodeAdjacency&&(Ne.emphasis=Ne.emphasis||{},null==Ne.emphasis.focus&&(Ne.emphasis.focus="adjacency"))}(Le):"map"===ze&&(Le.mapType&&!Le.map&&(Le.map=Le.mapType),Le.mapLocation&&(0,le.defaults)(Le,Le.mapLocation));null!=Le.hoverAnimation&&(Le.emphasis=Le.emphasis||{},Le.emphasis&&null==Le.emphasis.scale&&(Le.emphasis.scale=Le.hoverAnimation)),Vn(Le)}}),Ne.dataRange&&(Ne.visualMap=Ne.dataRange),(0,le.each)(Yn,function(Le){var ze=Ne[Le];ze&&((0,le.isArray)(ze)||(ze=[ze]),(0,le.each)(ze,function(Ze){Vn(Ze)}))})}var Dt=z(4785);function Rt(Ne){(0,le.each)(Ne,function(Ge,Le){var ze=[],Ze=[NaN,NaN],et=[Ge.stackResultDimension,Ge.stackedOverDimension],ft=Ge.data,Wt=Ge.isStackedByIndex,zt=Ge.seriesModel.get("stackStrategy")||"samesign";ft.modify(et,function(gn,Mn,ct){var gt,Nt,xt=ft.get(Ge.stackedDimension,ct);if(isNaN(xt))return Ze;Wt?Nt=ft.getRawIndex(ct):gt=ft.get(Ge.stackedByDimension,ct);for(var Kt=NaN,vn=Le-1;vn>=0;vn--){var bn=Ne[vn];if(Wt||(Nt=bn.data.rawIndexOf(bn.stackedByDimension,gt)),Nt>=0){var Bn=bn.data.getByRawIndex(bn.stackResultDimension,Nt);if("all"===zt||"positive"===zt&&Bn>0||"negative"===zt&&Bn<0||"samesign"===zt&&xt>=0&&Bn>0||"samesign"===zt&&xt<=0&&Bn<0){xt=(0,Dt.S$)(xt,Bn),Kt=Bn;break}}}return ze[0]=xt,ze[1]=Kt,ze})})}var fn=z(9521),hr=z(9899),fr=z(1005),tt=z(3160),it=z(6766),at=z(3802),je=z(126),vt=z(7282),ht=z(6869),Pt=z(357),tn=z(5632),In=z(7327),Dn=z(3331),or=(0,Ce.Yf)(),mi={itemStyle:(0,tn.Z)(In.t,!0),lineStyle:(0,tn.Z)(Dn.v,!0)},sr={lineStyle:"stroke",itemStyle:"fill"};function Ji(Ne,Ge){return Ne.visualStyleMapper||mi[Ge]||(console.warn("Unkown style type '"+Ge+"'."),mi.itemStyle)}function ra(Ne,Ge){return Ne.visualDrawType||sr[Ge]||(console.warn("Unkown style type '"+Ge+"'."),"fill")}var Yl={createOnAllSeries:!0,performRawSeries:!0,reset:function(Ne,Ge){var Le=Ne.getData(),ze=Ne.visualStyleAccessPath||"itemStyle",Ze=Ne.getModel(ze),ft=Ji(Ne,ze)(Ze),Wt=Ze.getShallow("decal");Wt&&(Le.setVisual("decal",Wt),Wt.dirty=!0);var zt=ra(Ne,ze),gn=ft[zt],Mn=(0,le.isFunction)(gn)?gn:null;if(!ft[zt]||Mn||"auto"===ft.fill||"auto"===ft.stroke){var xt=Ne.getColorFromPalette(Ne.name,null,Ge.getSeriesCount());ft[zt]||(ft[zt]=xt,Le.setVisual("colorFromPalette",!0)),ft.fill="auto"===ft.fill||(0,le.isFunction)(ft.fill)?xt:ft.fill,ft.stroke="auto"===ft.stroke||(0,le.isFunction)(ft.stroke)?xt:ft.stroke}if(Le.setVisual("style",ft),Le.setVisual("drawType",zt),!Ge.isSeriesFiltered(Ne)&&Mn)return Le.setVisual("colorFromPalette",!1),{dataEach:function(gt,Nt){var Kt=Ne.getDataParams(Nt),vn=(0,le.extend)({},ft);vn[zt]=Mn(Kt),gt.setItemVisual(Nt,"style",vn)}}}},xs=new he.Z,Sa={createOnAllSeries:!0,performRawSeries:!0,reset:function(Ne,Ge){if(!Ne.ignoreStyleOnData&&!Ge.isSeriesFiltered(Ne)){var Le=Ne.getData(),ze=Ne.visualStyleAccessPath||"itemStyle",Ze=Ji(Ne,ze),et=Le.getVisual("drawType");return{dataEach:Le.hasItemOption?function(ft,Wt){var zt=ft.getRawDataItem(Wt);if(zt&&zt[ze]){xs.option=zt[ze];var gn=Ze(xs),Mn=ft.ensureUniqueItemVisual(Wt,"style");(0,le.extend)(Mn,gn),xs.option.decal&&(ft.setItemVisual(Wt,"decal",xs.option.decal),xs.option.decal.dirty=!0),et in gn&&ft.setItemVisual(Wt,"colorFromPalette",!1)}}:null}}}},qa={performRawSeries:!0,overallReset:function(Ne){var Ge=(0,le.createHashMap)();Ne.eachSeries(function(Le){var ze=Le.getColorBy();if(!Le.isColorBySeries()){var Ze=Le.type+"-"+ze,et=Ge.get(Ze);et||Ge.set(Ze,et={}),or(Le).scope=et}}),Ne.eachSeries(function(Le){if(!Le.isColorBySeries()&&!Ne.isSeriesFiltered(Le)){var ze=Le.getRawData(),Ze={},et=Le.getData(),ft=or(Le).scope,zt=ra(Le,Le.visualStyleAccessPath||"itemStyle");et.each(function(gn){var Mn=et.getRawIndex(gn);Ze[Mn]=gn}),ze.each(function(gn){var Mn=Ze[gn];if(et.getItemVisual(Mn,"colorFromPalette")){var xt=et.ensureUniqueItemVisual(Mn,"style"),gt=ze.getName(gn)||gn+"",Nt=ze.count();xt[zt]=Le.getColorFromPalette(gt,ft,Nt)}})}})}},ua=z(8539),Xs=z(8208),La=z(8234),lh=Math.PI,lc=z(6861),Of=z(2015),ku=function(){function Ne(Ge,Le,ze,Ze){this._stageTaskMap=(0,le.createHashMap)(),this.ecInstance=Ge,this.api=Le,ze=this._dataProcessorHandlers=ze.slice(),Ze=this._visualHandlers=Ze.slice(),this._allHandlers=ze.concat(Ze)}return Ne.prototype.restoreData=function(Ge,Le){Ge.restoreData(Le),this._stageTaskMap.each(function(ze){var Ze=ze.overallTask;Ze&&Ze.dirty()})},Ne.prototype.getPerformArgs=function(Ge,Le){if(Ge.__pipeline){var ze=this._pipelineMap.get(Ge.__pipeline.id),Ze=ze.context,ft=!Le&&ze.progressiveEnabled&&(!Ze||Ze.progressiveRender)&&Ge.__idxInPipeline>ze.blockIndex?ze.step:null,Wt=Ze&&Ze.modDataCount;return{step:ft,modBy:null!=Wt?Math.ceil(Wt/ft):null,modDataCount:Wt}}},Ne.prototype.getPipeline=function(Ge){return this._pipelineMap.get(Ge)},Ne.prototype.updateStreamModes=function(Ge,Le){var ze=this._pipelineMap.get(Ge.uid),et=Ge.getData().count(),ft=ze.progressiveEnabled&&Le.incrementalPrepareRender&&et>=ze.threshold,Wt=Ge.get("large")&&et>=Ge.get("largeThreshold"),zt="mod"===Ge.get("progressiveChunkMode")?et:null;Ge.pipelineContext=ze.context={progressiveRender:ft,modDataCount:zt,large:Wt}},Ne.prototype.restorePipelines=function(Ge){var Le=this,ze=Le._pipelineMap=(0,le.createHashMap)();Ge.eachSeries(function(Ze){var et=Ze.getProgressive(),ft=Ze.uid;ze.set(ft,{id:ft,head:null,tail:null,threshold:Ze.getProgressiveThreshold(),progressiveEnabled:et&&!(Ze.preventIncremental&&Ze.preventIncremental()),blockIndex:-1,step:Math.round(et||700),count:0}),Le._pipe(Ze,Ze.dataTask)})},Ne.prototype.prepareStageTasks=function(){var Ge=this._stageTaskMap,Le=this.api.getModel(),ze=this.api;(0,le.each)(this._allHandlers,function(Ze){var et=Ge.get(Ze.uid)||Ge.set(Ze.uid,{});(0,le.assert)(!(Ze.reset&&Ze.overallReset),""),Ze.reset&&this._createSeriesStageTask(Ze,et,Le,ze),Ze.overallReset&&this._createOverallStageTask(Ze,et,Le,ze)},this)},Ne.prototype.prepareView=function(Ge,Le,ze,Ze){var et=Ge.renderTask,ft=et.context;ft.model=Le,ft.ecModel=ze,ft.api=Ze,et.__block=!Ge.incrementalPrepareRender,this._pipe(Le,et)},Ne.prototype.performDataProcessorTasks=function(Ge,Le){this._performStageTasks(this._dataProcessorHandlers,Ge,Le,{block:!0})},Ne.prototype.performVisualTasks=function(Ge,Le,ze){this._performStageTasks(this._visualHandlers,Ge,Le,ze)},Ne.prototype._performStageTasks=function(Ge,Le,ze,Ze){Ze=Ze||{};var et=!1,ft=this;function Wt(zt,gn){return zt.setDirty&&(!zt.dirtyMap||zt.dirtyMap.get(gn.__pipeline.id))}(0,le.each)(Ge,function(zt,gn){if(!Ze.visualType||Ze.visualType===zt.visualType){var Mn=ft._stageTaskMap.get(zt.uid),ct=Mn.seriesTaskMap,xt=Mn.overallTask;if(xt){var gt,Nt=xt.agentStubMap;Nt.each(function(vn){Wt(Ze,vn)&&(vn.dirty(),gt=!0)}),gt&&xt.dirty(),ft.updatePayload(xt,ze);var Kt=ft.getPerformArgs(xt,Ze.block);Nt.each(function(vn){vn.perform(Kt)}),xt.perform(Kt)&&(et=!0)}else ct&&ct.each(function(vn,bn){Wt(Ze,vn)&&vn.dirty();var Bn=ft.getPerformArgs(vn,Ze.block);Bn.skip=!zt.performRawSeries&&Le.isSeriesFiltered(vn.context.model),ft.updatePayload(vn,ze),vn.perform(Bn)&&(et=!0)})}}),this.unfinished=et||this.unfinished},Ne.prototype.performSeriesTasks=function(Ge){var Le;Ge.eachSeries(function(ze){Le=ze.dataTask.perform()||Le}),this.unfinished=Le||this.unfinished},Ne.prototype.plan=function(){this._pipelineMap.each(function(Ge){var Le=Ge.tail;do{if(Le.__block){Ge.blockIndex=Le.__idxInPipeline;break}Le=Le.getUpstream()}while(Le)})},Ne.prototype.updatePayload=function(Ge,Le){"remain"!==Le&&(Ge.context.payload=Le)},Ne.prototype._createSeriesStageTask=function(Ge,Le,ze,Ze){var et=this,ft=Le.seriesTaskMap,Wt=Le.seriesTaskMap=(0,le.createHashMap)(),zt=Ge.seriesType,gn=Ge.getTargetSeries;function Mn(ct){var xt=ct.uid,gt=Wt.set(xt,ft&&ft.get(xt)||(0,lc.v)({plan:dg,reset:qy,count:$s}));gt.context={model:ct,ecModel:ze,api:Ze,useClearVisual:Ge.isVisual&&!Ge.isLayout,plan:Ge.plan,reset:Ge.reset,scheduler:et},et._pipe(ct,gt)}Ge.createOnAllSeries?ze.eachRawSeries(Mn):zt?ze.eachRawSeriesByType(zt,Mn):gn&&gn(ze,Ze).each(Mn)},Ne.prototype._createOverallStageTask=function(Ge,Le,ze,Ze){var et=this,ft=Le.overallTask=Le.overallTask||(0,lc.v)({reset:td});ft.context={ecModel:ze,api:Ze,overallReset:Ge.overallReset,scheduler:et};var Wt=ft.agentStubMap,zt=ft.agentStubMap=(0,le.createHashMap)(),gn=Ge.seriesType,Mn=Ge.getTargetSeries,ct=!0,xt=!1;function Nt(Kt){var vn=Kt.uid,bn=zt.set(vn,Wt&&Wt.get(vn)||(xt=!0,(0,lc.v)({reset:lg,onDirty:cg})));bn.context={model:Kt,overallProgress:ct},bn.agent=ft,bn.__block=ct,et._pipe(Kt,bn)}(0,le.assert)(!Ge.createOnAllSeries,""),gn?ze.eachRawSeriesByType(gn,Nt):Mn?Mn(ze,Ze).each(Nt):(ct=!1,(0,le.each)(ze.getSeries(),Nt)),xt&&ft.dirty()},Ne.prototype._pipe=function(Ge,Le){var Ze=this._pipelineMap.get(Ge.uid);!Ze.head&&(Ze.head=Le),Ze.tail&&Ze.tail.pipe(Le),Ze.tail=Le,Le.__idxInPipeline=Ze.count++,Le.__pipeline=Ze},Ne.wrapStageHandler=function(Ge,Le){return(0,le.isFunction)(Ge)&&(Ge={overallReset:Ge,seriesType:Zi(Ge)}),Ge.uid=(0,Of.Kr)("stageHandler"),Le&&(Ge.visualType=Le),Ge},Ne}();function td(Ne){Ne.overallReset(Ne.ecModel,Ne.api,Ne.payload)}function lg(Ne){return Ne.overallProgress&&ug}function ug(){this.agent.dirty(),this.getDownstream().dirty()}function cg(){this.agent&&this.agent.dirty()}function dg(Ne){return Ne.plan?Ne.plan(Ne.model,Ne.ecModel,Ne.api,Ne.payload):null}function qy(Ne){Ne.useClearVisual&&Ne.data.clearAllVisual();var Ge=Ne.resetDefines=(0,Ce.kF)(Ne.reset(Ne.model,Ne.ecModel,Ne.api,Ne.payload));return Ge.length>1?(0,le.map)(Ge,function(Le,ze){return Tt(ze)}):Jy}var Jy=Tt(0);function Tt(Ne){return function(Ge,Le){var ze=Le.data,Ze=Le.resetDefines[Ne];if(Ze&&Ze.dataEach)for(var et=Ge.start;et<Ge.end;et++)Ze.dataEach(ze,et);else Ze&&Ze.progress&&Ze.progress(Ge,ze)}}function $s(Ne){return Ne.data.count()}function Zi(Ne){Oa=null;try{Ne(ai,Pn)}catch{}return Oa}var Oa,ai={},Pn={};function kf(Ne,Ge){for(var Le in Ge.prototype)Ne[Le]=le.noop}kf(ai,A),kf(Pn,ue),ai.eachSeriesByType=ai.eachRawSeriesByType=function(Ne){Oa=Ne},ai.eachComponent=function(Ne){"series"===Ne.mainType&&Ne.subType&&(Oa=Ne.subType)};const wn=ku;var _n=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const Mr={color:_n,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],_n]};var Ut="#B9B8CE",nd="#100C2A",Dl=function(){return{axisLine:{lineStyle:{color:Ut}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},Wr=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],qt={darkMode:!0,color:Wr,backgroundColor:nd,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Ut}},textStyle:{color:Ut},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Ut}},dataZoom:{borderColor:"#71708A",textStyle:{color:Ut},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Ut}},timeline:{lineStyle:{color:Ut},label:{color:Ut},controlStyle:{color:Ut,borderColor:Ut}},calendar:{itemStyle:{color:nd},dayLabel:{color:Ut},monthLabel:{color:Ut},yearLabel:{color:Ut}},timeAxis:Dl(),logAxis:Dl(),valueAxis:Dl(),categoryAxis:Dl(),line:{symbol:"circle"},graph:{color:Wr},gauge:{title:{color:Ut},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Ut},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};qt.categoryAxis.splitLine.show=!1;const Nf=qt;var hg=z(1087),Jt=function(){function Ne(){}return Ne.prototype.normalizeQuery=function(Ge){var Le={},ze={},Ze={};if(le.isString(Ge)){var et=(0,hg.u9)(Ge);Le.mainType=et.main||null,Le.subType=et.sub||null}else{var ft=["Index","Name","Id"],Wt={name:1,dataIndex:1,dataType:1};le.each(Ge,function(zt,gn){for(var Mn=!1,ct=0;ct<ft.length;ct++){var xt=ft[ct],gt=gn.lastIndexOf(xt);if(gt>0&&gt===gn.length-xt.length){var Nt=gn.slice(0,gt);"data"!==Nt&&(Le.mainType=Nt,Le[xt.toLowerCase()]=zt,Mn=!0)}}Wt.hasOwnProperty(gn)&&(ze[gn]=zt,Mn=!0),Mn||(Ze[gn]=zt)})}return{cptQuery:Le,dataQuery:ze,otherQuery:Ze}},Ne.prototype.filter=function(Ge,Le){var ze=this.eventInfo;if(!ze)return!0;var Ze=ze.targetEl,et=ze.packedEvent,ft=ze.model,Wt=ze.view;if(!ft||!Wt)return!0;var zt=Le.cptQuery,gn=Le.dataQuery;return Mn(zt,ft,"mainType")&&Mn(zt,ft,"subType")&&Mn(zt,ft,"index","componentIndex")&&Mn(zt,ft,"name")&&Mn(zt,ft,"id")&&Mn(gn,et,"name")&&Mn(gn,et,"dataIndex")&&Mn(gn,et,"dataType")&&(!Wt.filterForExposedEvent||Wt.filterForExposedEvent(Ge,Le.otherQuery,Ze,et));function Mn(ct,xt,gt,Nt){return null==ct[gt]||xt[Nt||gt]===ct[gt]}},Ne.prototype.afterTrigger=function(){this.eventInfo=null},Ne}(),Xl=["symbol","symbolSize","symbolRotate","symbolOffset"],Pr=Xl.concat(["symbolKeepAspect"]),_i={createOnAllSeries:!0,performRawSeries:!0,reset:function(Ne,Ge){var Le=Ne.getData();if(Ne.legendIcon&&Le.setVisual("legendIcon",Ne.legendIcon),Ne.hasSymbolVisual){for(var ze={},Ze={},et=!1,ft=0;ft<Xl.length;ft++){var Wt=Xl[ft],zt=Ne.get(Wt);(0,le.isFunction)(zt)?(et=!0,Ze[Wt]=zt):ze[Wt]=zt}if(ze.symbol=ze.symbol||Ne.defaultSymbol,Le.setVisual((0,le.extend)({legendIcon:Ne.legendIcon||ze.symbol,symbolKeepAspect:Ne.get("symbolKeepAspect")},ze)),!Ge.isSeriesFiltered(Ne)){var gn=(0,le.keys)(Ze);return{dataEach:et?function Mn(ct,xt){for(var gt=Ne.getRawValue(xt),Nt=Ne.getDataParams(xt),Kt=0;Kt<gn.length;Kt++){var vn=gn[Kt];ct.setItemVisual(xt,vn,Ze[vn](gt,Nt))}}:null}}}}},e0={createOnAllSeries:!0,performRawSeries:!0,reset:function(Ne,Ge){if(Ne.hasSymbolVisual&&!Ge.isSeriesFiltered(Ne))return{dataEach:Ne.getData().hasItemOption?function ze(Ze,et){for(var ft=Ze.getItemModel(et),Wt=0;Wt<Pr.length;Wt++){var zt=Pr[Wt],gn=ft.getShallow(zt,!0);null!=gn&&Ze.setItemVisual(et,zt,gn)}}:null}}},rd=z(5018),$l=z(5577),id=z(960),qo=z(7664),Ff=z(5514),Ks=z(4649),t0=z(8177);const xn=new be.Z;var Cs=z(5730),Kl=z(5831),Ql=typeof window<"u",uc="5.4.0",Vf={zrender:"5.4.0"},dh={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:2e3,CHART:3e3,POST_CHART_LAYOUT:4600,COMPONENT:4e3,BRUSH:5e3,CHART_ITEM:4500,ARIA:6e3,DECAL:7e3}},za="__flagInMainProcess",Vo="__pendingUpdate",Jn="__needsUpdateStatus",hh=/^[a-zA-Z0-9_]+$/,Hf="__connectUpdateStatus";function Tl(Ne){return function(){for(var Ge=[],Le=0;Le<arguments.length;Le++)Ge[Le]=arguments[Le];if(!this.isDisposed())return a0(this,Ne,Ge)}}function ts(Ne){return function(){for(var Ge=[],Le=0;Le<arguments.length;Le++)Ge[Le]=arguments[Le];return a0(this,Ne,Ge)}}function a0(Ne,Ge,Le){return Le[0]=Le[0]&&Le[0].toLowerCase(),be.Z.prototype[Ge].apply(Ne,Le)}var pg=function(Ne){function Ge(){return null!==Ne&&Ne.apply(this,arguments)||this}return(0,ce.ZT)(Ge,Ne),Ge}(be.Z),zo=pg.prototype;zo.on=ts("on"),zo.off=ts("off");var Mi,vg,Uf,uo,ei,hc,ad,ql,fc,Ho,Nu,pc,qn,fh,Gf,Uo,er,gg,Jl=function(Ne){function Ge(Le,ze,Ze){var et=Ne.call(this,new Jt)||this;et._chartsViews=[],et._chartsMap={},et._componentsViews=[],et._componentsMap={},et._pendingActions=[],Ze=Ze||{},(0,le.isString)(ze)&&(ze=Nn[ze]),et._dom=Le;var ct=et._zr=Se.init(Le,{renderer:Ze.renderer||"canvas",devicePixelRatio:Ze.devicePixelRatio,width:Ze.width,height:Ze.height,ssr:Ze.ssr,useDirtyRect:(0,le.retrieve2)(Ze.useDirtyRect,!1),useCoarsePointer:(0,le.retrieve2)(Ze.useCoarsePointer,"auto"),pointerSize:Ze.pointerSize});et._ssr=Ze.ssr,et._throttledZrFlush=(0,Pt.P2)((0,le.bind)(ct.flush,ct),17),(ze=(0,le.clone)(ze))&&Je(ze,!0),et._theme=ze,et._locale=(0,Ff.D0)(Ze.locale||Ff.sO),et._coordSysMgr=new ae.Z;var xt=et._api=Gf(et);function gt(Nt,Kt){return Nt.__prio-Kt.__prio}return(0,ve.Z)(Mo,gt),(0,ve.Z)(Qs,gt),et._scheduler=new wn(et,xt,Qs,Mo),et._messageCenter=new pg,et._initEvents(),et.resize=(0,le.bind)(et.resize,et),ct.animation.on("frame",et._onframe,et),Ho(ct,et),Nu(ct,et),(0,le.setAsPrimitive)(et),et}return(0,ce.ZT)(Ge,Ne),Ge.prototype._onframe=function(){if(!this._disposed){gg(this);var Le=this._scheduler;if(this[Vo]){var ze=this[Vo].silent;this[za]=!0;try{Mi(this),uo.update.call(this,null,this[Vo].updateParams)}catch(zt){throw this[za]=!1,this[Vo]=null,zt}this._zr.flush(),this[za]=!1,this[Vo]=null,ql.call(this,ze),fc.call(this,ze)}else if(Le.unfinished){var Ze=1,et=this._model,ft=this._api;Le.unfinished=!1;do{var Wt=+new Date;Le.performSeriesTasks(et),Le.performDataProcessorTasks(et),hc(this,et),Le.performVisualTasks(et),fh(this,this._model,ft,"remain",{}),Ze-=+new Date-Wt}while(Ze>0&&Le.unfinished);Le.unfinished||this._zr.flush()}}},Ge.prototype.getDom=function(){return this._dom},Ge.prototype.getId=function(){return this.id},Ge.prototype.getZr=function(){return this._zr},Ge.prototype.isSSR=function(){return this._ssr},Ge.prototype.setOption=function(Le,ze,Ze){if(!this[za]){if(this._disposed)return;var et,ft,Wt;if((0,le.isObject)(ze)&&(Ze=ze.lazyUpdate,et=ze.silent,ft=ze.replaceMerge,Wt=ze.transition,ze=ze.notMerge),this[za]=!0,!this._model||ze){var zt=new we(this._api),gn=this._theme,Mn=this._model=new A;Mn.scheduler=this._scheduler,Mn.ssr=this._ssr,Mn.init(null,null,null,gn,this._locale,zt)}this._model.setOption(Le,{replaceMerge:ft},Do);var ct={seriesTransition:Wt,optionChanged:!0};if(Ze)this[Vo]={silent:et,updateParams:ct},this[za]=!1,this.getZr().wakeUp();else{try{Mi(this),uo.update.call(this,null,ct)}catch(xt){throw this[Vo]=null,this[za]=!1,xt}this._ssr||this._zr.flush(),this[Vo]=null,this[za]=!1,ql.call(this,et),fc.call(this,et)}}},Ge.prototype.setTheme=function(){(0,$l.Sh)("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},Ge.prototype.getModel=function(){return this._model},Ge.prototype.getOption=function(){return this._model&&this._model.getOption()},Ge.prototype.getWidth=function(){return this._zr.getWidth()},Ge.prototype.getHeight=function(){return this._zr.getHeight()},Ge.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||Ql&&window.devicePixelRatio||1},Ge.prototype.getRenderedCanvas=function(Le){return this.renderToCanvas(Le)},Ge.prototype.renderToCanvas=function(Le){return this._zr.painter.getRenderedCanvas({backgroundColor:(Le=Le||{}).backgroundColor||this._model.get("backgroundColor"),pixelRatio:Le.pixelRatio||this.getDevicePixelRatio()})},Ge.prototype.renderToSVGString=function(Le){return this._zr.painter.renderToString({useViewBox:(Le=Le||{}).useViewBox})},Ge.prototype.getSvgDataURL=function(){if(ye.Z.svgSupported){var Le=this._zr,ze=Le.storage.getDisplayList();return(0,le.each)(ze,function(Ze){Ze.stopAnimation(null,!0)}),Le.painter.toDataURL()}},Ge.prototype.getDataURL=function(Le){if(!this._disposed){var Ze=this._model,et=[],ft=this;(0,le.each)((Le=Le||{}).excludeComponents,function(zt){Ze.eachComponent({mainType:zt},function(gn){var Mn=ft._componentsMap[gn.__viewId];Mn.group.ignore||(et.push(Mn),Mn.group.ignore=!0)})});var Wt="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.renderToCanvas(Le).toDataURL("image/"+(Le&&Le.type||"png"));return(0,le.each)(et,function(zt){zt.group.ignore=!1}),Wt}},Ge.prototype.getConnectedDataURL=function(Le){if(!this._disposed){var ze="svg"===Le.type,Ze=this.group,et=Math.min,ft=Math.max,Wt=1/0;if(Ja[Ze]){var zt=Wt,gn=Wt,Mn=-Wt,ct=-Wt,xt=[],gt=Le&&Le.pixelRatio||this.getDevicePixelRatio();(0,le.each)(Pi,function(kn,gr){if(kn.group===Ze){var Jr=ze?kn.getZr().painter.getSvgDom().innerHTML:kn.renderToCanvas((0,le.clone)(Le)),_r=kn.getDom().getBoundingClientRect();zt=et(_r.left,zt),gn=et(_r.top,gn),Mn=ft(_r.right,Mn),ct=ft(_r.bottom,ct),xt.push({dom:Jr,left:_r.left,top:_r.top})}});var Nt=(Mn*=gt)-(zt*=gt),Kt=(ct*=gt)-(gn*=gt),vn=Cs.qW.createCanvas(),bn=Se.init(vn,{renderer:ze?"svg":"canvas"});if(bn.resize({width:Nt,height:Kt}),ze){var Bn="";return(0,le.each)(xt,function(kn){Bn+='<g transform="translate('+(kn.left-zt)+","+(kn.top-gn)+')">'+kn.dom+"</g>"}),bn.painter.getSvgRoot().innerHTML=Bn,Le.connectedBackgroundColor&&bn.painter.setBackgroundColor(Le.connectedBackgroundColor),bn.refreshImmediately(),bn.painter.toDataURL()}return Le.connectedBackgroundColor&&bn.add(new tt.Z({shape:{x:0,y:0,width:Nt,height:Kt},style:{fill:Le.connectedBackgroundColor}})),(0,le.each)(xt,function(kn){var gr=new it.ZP({style:{x:kn.left*gt-zt,y:kn.top*gt-gn,image:kn.dom}});bn.add(gr)}),bn.refreshImmediately(),vn.toDataURL("image/"+(Le&&Le.type||"png"))}return this.getDataURL(Le)}},Ge.prototype.convertToPixel=function(Le,ze){return ei(this,"convertToPixel",Le,ze)},Ge.prototype.convertFromPixel=function(Le,ze){return ei(this,"convertFromPixel",Le,ze)},Ge.prototype.containPixel=function(Le,ze){if(!this._disposed){var et,ft=Ce.pm(this._model,Le);return(0,le.each)(ft,function(Wt,zt){zt.indexOf("Models")>=0&&(0,le.each)(Wt,function(gn){var Mn=gn.coordinateSystem;if(Mn&&Mn.containPoint)et=et||!!Mn.containPoint(ze);else if("seriesModels"===zt){var ct=this._chartsMap[gn.__viewId];ct&&ct.containPoint&&(et=et||ct.containPoint(ze,gn))}},this)},this),!!et}},Ge.prototype.getVisual=function(Le,ze){var et=Ce.pm(this._model,Le,{defaultMainType:"series"}),Wt=et.seriesModel.getData(),zt=et.hasOwnProperty("dataIndexInside")?et.dataIndexInside:et.hasOwnProperty("dataIndex")?Wt.indexOfRawIndex(et.dataIndex):null;return null!=zt?(0,rd.Or)(Wt,zt,ze):(0,rd.UL)(Wt,ze)},Ge.prototype.getViewOfComponentModel=function(Le){return this._componentsMap[Le.__viewId]},Ge.prototype.getViewOfSeriesModel=function(Le){return this._chartsMap[Le.__viewId]},Ge.prototype._initEvents=function(){var Le=this;(0,le.each)(Go,function(ze){var Ze=function(et){var zt,ft=Le.getModel(),Wt=et.target;if("globalout"===ze?zt={}:Wt&&(0,Ks.o)(Wt,function(Nt){var Kt=(0,vt.A)(Nt);if(Kt&&null!=Kt.dataIndex){var vn=Kt.dataModel||ft.getSeriesByIndex(Kt.seriesIndex);return zt=vn&&vn.getDataParams(Kt.dataIndex,Kt.dataType)||{},!0}if(Kt.eventData)return zt=(0,le.extend)({},Kt.eventData),!0},!0),zt){var Mn=zt.componentType,ct=zt.componentIndex;("markLine"===Mn||"markPoint"===Mn||"markArea"===Mn)&&(Mn="series",ct=zt.seriesIndex);var xt=Mn&&null!=ct&&ft.getComponent(Mn,ct),gt=xt&&Le["series"===xt.mainType?"_chartsMap":"_componentsMap"][xt.__viewId];zt.event=et,zt.type=ze,Le._$eventProcessor.eventInfo={targetEl:Wt,packedEvent:zt,model:xt,view:gt},Le.trigger(ze,zt)}};Ze.zrEventfulCallAtLast=!0,Le._zr.on(ze,Ze,Le)}),(0,le.each)(va,function(ze,Ze){Le._messageCenter.on(Ze,function(et){this.trigger(Ze,et)},Le)}),(0,le.each)(["selectchanged"],function(ze){Le._messageCenter.on(ze,function(Ze){this.trigger(ze,Ze)},Le)}),(0,id.s)(this._messageCenter,this,this._api)},Ge.prototype.isDisposed=function(){return this._disposed},Ge.prototype.clear=function(){this._disposed||this.setOption({series:[]},!0)},Ge.prototype.dispose=function(){if(!this._disposed){this._disposed=!0,this.getDom()&&Ce.P$(this.getDom(),El,"");var ze=this,Ze=ze._api,et=ze._model;(0,le.each)(ze._componentsViews,function(ft){ft.dispose(et,Ze)}),(0,le.each)(ze._chartsViews,function(ft){ft.dispose(et,Ze)}),ze._zr.dispose(),ze._dom=ze._model=ze._chartsMap=ze._componentsMap=ze._chartsViews=ze._componentsViews=ze._scheduler=ze._api=ze._zr=ze._throttledZrFlush=ze._theme=ze._coordSysMgr=ze._messageCenter=null,delete Pi[ze.id]}},Ge.prototype.resize=function(Le){if(!this[za]){if(this._disposed)return;this._zr.resize(Le);var ze=this._model;if(this._loadingFX&&this._loadingFX.resize(),ze){var Ze=ze.resetOption("media"),et=Le&&Le.silent;this[Vo]&&(null==et&&(et=this[Vo].silent),Ze=!0,this[Vo]=null),this[za]=!0;try{Ze&&Mi(this),uo.update.call(this,{type:"resize",animation:(0,le.extend)({duration:0},Le&&Le.animation)})}catch(ft){throw this[za]=!1,ft}this[za]=!1,ql.call(this,et),fc.call(this,et)}}},Ge.prototype.showLoading=function(Le,ze){if(!this._disposed&&((0,le.isObject)(Le)&&(ze=Le,Le=""),Le=Le||"default",this.hideLoading(),Lr[Le])){var Ze=Lr[Le](this._api,ze),et=this._zr;this._loadingFX=Ze,et.add(Ze)}},Ge.prototype.hideLoading=function(){this._disposed||(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},Ge.prototype.makeActionFromEvent=function(Le){var ze=(0,le.extend)({},Le);return ze.type=va[Le.type],ze},Ge.prototype.dispatchAction=function(Le,ze){if(!this._disposed&&((0,le.isObject)(ze)||(ze={silent:!!ze}),pa[Le.type]&&this._model)){if(this[za])return void this._pendingActions.push(Le);var Ze=ze.silent;ad.call(this,Le,Ze);var et=ze.flush;et?this._zr.flush():!1!==et&&ye.Z.browser.weChat&&this._throttledZrFlush(),ql.call(this,Ze),fc.call(this,Ze)}},Ge.prototype.updateLabelLayout=function(){xn.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},Ge.prototype.appendData=function(Le){if(!this._disposed){var ze=Le.seriesIndex;this.getModel().getSeriesByIndex(ze).appendData(Le),this._scheduler.unfinished=!0,this.getZr().wakeUp()}},Ge.internalField=function(){function Le(ct){ct.clearColorPalette(),ct.eachSeries(function(xt){xt.clearColorPalette()})}function Ze(ct){for(var xt=[],gt=ct.currentStates,Nt=0;Nt<gt.length;Nt++){var Kt=gt[Nt];"emphasis"===Kt||"blur"===Kt||"select"===Kt||xt.push(Kt)}ct.selected&&ct.states.select&&xt.push("select"),ct.hoverState===ht.wU&&ct.states.emphasis?xt.push("emphasis"):ct.hoverState===ht.CX&&ct.states.blur&&xt.push("blur"),ct.useStates(xt)}function Wt(ct,xt){if(!ct.preventAutoZ){var gt=ct.get("z")||0,Nt=ct.get("zlevel")||0;xt.eachRendered(function(Kt){return zt(Kt,gt,Nt,-1/0),!0})}}function zt(ct,xt,gt,Nt){var Kt=ct.getTextContent(),vn=ct.getTextGuideLine();if(ct.isGroup)for(var Bn=ct.childrenRef(),kn=0;kn<Bn.length;kn++)Nt=Math.max(zt(Bn[kn],xt,gt,Nt),Nt);else ct.z=xt,ct.zlevel=gt,Nt=Math.max(ct.z2,Nt);if(Kt&&(Kt.z=xt,Kt.zlevel=gt,isFinite(Nt)&&(Kt.z2=Nt+2)),vn){var gr=ct.textGuideLineConfig;vn.z=xt,vn.zlevel=gt,isFinite(Nt)&&(vn.z2=Nt+(gr&&gr.showAbove?1:-1))}return Nt}function gn(ct,xt){xt.eachRendered(function(gt){if(!at.eq(gt)){var Nt=gt.getTextContent(),Kt=gt.getTextGuideLine();gt.stateTransition&&(gt.stateTransition=null),Nt&&Nt.stateTransition&&(Nt.stateTransition=null),Kt&&Kt.stateTransition&&(Kt.stateTransition=null),gt.hasState()?(gt.prevStates=gt.currentStates,gt.clearStates()):gt.prevStates&&(gt.prevStates=null)}})}function Mn(ct,xt){var gt=ct.getModel("stateAnimation"),Nt=ct.isAnimationEnabled(),Kt=gt.get("duration"),vn=Kt>0?{duration:Kt,delay:gt.get("delay"),easing:gt.get("easing")}:null;xt.eachRendered(function(bn){if(bn.states&&bn.states.emphasis){if(at.eq(bn))return;if(bn instanceof je.ZP&&(0,ht.e9)(bn),bn.__dirty){var Bn=bn.prevStates;Bn&&bn.useStates(Bn)}if(Nt){bn.stateTransition=vn;var kn=bn.getTextContent(),gr=bn.getTextGuideLine();kn&&(kn.stateTransition=vn),gr&&(gr.stateTransition=vn)}bn.__dirty&&Ze(bn)}})}Mi=function(ct){var xt=ct._scheduler;xt.restorePipelines(ct._model),xt.prepareStageTasks(),vg(ct,!0),vg(ct,!1),xt.plan()},vg=function(ct,xt){for(var gt=ct._model,Nt=ct._scheduler,Kt=xt?ct._componentsViews:ct._chartsViews,vn=xt?ct._componentsMap:ct._chartsMap,bn=ct._zr,Bn=ct._api,kn=0;kn<Kt.length;kn++)Kt[kn].__alive=!1;function gr(_r){var yr=_r.__requireNewView;_r.__requireNewView=!1;var ho="_ec_"+_r.id+"_"+_r.type,Yi=!yr&&vn[ho];if(!Yi){var rs=(0,hg.u9)(_r.type);(Yi=new(xt?hr.Z.getClass(rs.main,rs.sub):fr.Z.getClass(rs.sub))).init(gt,Bn),vn[ho]=Yi,Kt.push(Yi),bn.add(Yi.group)}_r.__viewId=Yi.__id=ho,Yi.__alive=!0,Yi.__model=_r,Yi.group.__ecComponentInfo={mainType:_r.mainType,index:_r.componentIndex},!xt&&Nt.prepareView(Yi,_r,gt,Bn)}for(xt?gt.eachComponent(function(_r,yr){"series"!==_r&&gr(yr)}):gt.eachSeries(gr),kn=0;kn<Kt.length;){var Jr=Kt[kn];Jr.__alive?kn++:(!xt&&Jr.renderTask.dispose(),bn.remove(Jr.group),Jr.dispose(gt,Bn),Kt.splice(kn,1),vn[Jr.__id]===Jr&&delete vn[Jr.__id],Jr.__id=Jr.group.__ecComponentInfo=null)}},Uf=function(ct,xt,gt,Nt,Kt){var vn=ct._model;if(vn.setUpdatePayload(gt),Nt){var bn={};bn[Nt+"Id"]=gt[Nt+"Id"],bn[Nt+"Index"]=gt[Nt+"Index"],bn[Nt+"Name"]=gt[Nt+"Name"];var Bn={mainType:Nt,query:bn};Kt&&(Bn.subType=Kt);var gr,kn=gt.excludeSeriesId;null!=kn&&(gr=(0,le.createHashMap)(),(0,le.each)(Ce.kF(kn),function(_r){var yr=Ce.U5(_r,null);null!=yr&&gr.set(yr,!0)})),vn&&vn.eachComponent(Bn,function(_r){if(!gr||null===gr.get(_r.id))if((0,ht.xp)(gt))if(_r instanceof fn.Z)gt.type===ht.Ki&&!gt.notBlur&&!_r.get(["emphasis","disabled"])&&(0,ht.UL)(_r,gt,ct._api);else{var ho=(0,ht.oJ)(_r.mainType,_r.componentIndex,gt.name,ct._api),rs=ho.dispatchers;gt.type===ht.Ki&&ho.focusSelf&&!gt.notBlur&&(0,ht.zI)(_r.mainType,_r.componentIndex,ct._api),rs&&(0,le.each)(rs,function(To){gt.type===ht.Ki?(0,ht.fD)(To):(0,ht.Mh)(To)})}else(0,ht.aG)(gt)&&_r instanceof fn.Z&&((0,ht.og)(_r,gt,ct._api),(0,ht.ci)(_r),er(ct))},ct),vn&&vn.eachComponent(Bn,function(_r){gr&&null!==gr.get(_r.id)||Jr(ct["series"===Nt?"_chartsMap":"_componentsMap"][_r.__viewId])},ct)}else(0,le.each)([].concat(ct._componentsViews).concat(ct._chartsViews),Jr);function Jr(_r){_r&&_r.__alive&&_r[xt]&&_r[xt](_r.__model,vn,ct._api,gt)}},uo={prepareAndUpdate:function(ct){Mi(this),uo.update.call(this,ct,{optionChanged:null!=ct.newOption})},update:function(ct,xt){var gt=this._model,Nt=this._api,Kt=this._zr,vn=this._coordSysMgr,bn=this._scheduler;if(gt){gt.setUpdatePayload(ct),bn.restoreData(gt,ct),bn.performSeriesTasks(gt),vn.create(gt,Nt),bn.performDataProcessorTasks(gt,ct),hc(this,gt),vn.update(gt,Nt),Le(gt),bn.performVisualTasks(gt,ct),pc(this,gt,Nt,ct,xt);var Bn=gt.get("backgroundColor")||"transparent",kn=gt.get("darkMode");Kt.setBackgroundColor(Bn),null!=kn&&"auto"!==kn&&Kt.setDarkMode(kn),xn.trigger("afterupdate",gt,Nt)}},updateTransform:function(ct){var xt=this,gt=this._model,Nt=this._api;if(gt){gt.setUpdatePayload(ct);var Kt=[];gt.eachComponent(function(bn,Bn){if("series"!==bn){var kn=xt.getViewOfComponentModel(Bn);if(kn&&kn.__alive)if(kn.updateTransform){var gr=kn.updateTransform(Bn,gt,Nt,ct);gr&&gr.update&&Kt.push(kn)}else Kt.push(kn)}});var vn=(0,le.createHashMap)();gt.eachSeries(function(bn){var Bn=xt._chartsMap[bn.__viewId];if(Bn.updateTransform){var kn=Bn.updateTransform(bn,gt,Nt,ct);kn&&kn.update&&vn.set(bn.uid,1)}else vn.set(bn.uid,1)}),Le(gt),this._scheduler.performVisualTasks(gt,ct,{setDirty:!0,dirtyMap:vn}),fh(this,gt,Nt,ct,{},vn),xn.trigger("afterupdate",gt,Nt)}},updateView:function(ct){var xt=this._model;!xt||(xt.setUpdatePayload(ct),fr.Z.markUpdateMethod(ct,"updateView"),Le(xt),this._scheduler.performVisualTasks(xt,ct,{setDirty:!0}),pc(this,xt,this._api,ct,{}),xn.trigger("afterupdate",xt,this._api))},updateVisual:function(ct){var xt=this,gt=this._model;!gt||(gt.setUpdatePayload(ct),gt.eachSeries(function(Nt){Nt.getData().clearAllVisual()}),fr.Z.markUpdateMethod(ct,"updateVisual"),Le(gt),this._scheduler.performVisualTasks(gt,ct,{visualType:"visual",setDirty:!0}),gt.eachComponent(function(Nt,Kt){if("series"!==Nt){var vn=xt.getViewOfComponentModel(Kt);vn&&vn.__alive&&vn.updateVisual(Kt,gt,xt._api,ct)}}),gt.eachSeries(function(Nt){xt._chartsMap[Nt.__viewId].updateVisual(Nt,gt,xt._api,ct)}),xn.trigger("afterupdate",gt,this._api))},updateLayout:function(ct){uo.update.call(this,ct)}},ei=function(ct,xt,gt,Nt){if(!ct._disposed)for(var bn,Kt=ct._model,vn=ct._coordSysMgr.getCoordinateSystems(),Bn=Ce.pm(Kt,gt),kn=0;kn<vn.length;kn++){var gr=vn[kn];if(gr[xt]&&null!=(bn=gr[xt](Kt,Bn,Nt)))return bn}},hc=function(ct,xt){var gt=ct._chartsMap,Nt=ct._scheduler;xt.eachSeries(function(Kt){Nt.updateStreamModes(Kt,gt[Kt.__viewId])})},ad=function(ct,xt){var gt=this,Nt=this.getModel(),Kt=ct.type,vn=ct.escapeConnect,bn=pa[Kt],Bn=bn.actionInfo,kn=(Bn.update||"update").split(":"),gr=kn.pop(),Jr=null!=kn[0]&&(0,hg.u9)(kn[0]);this[za]=!0;var _r=[ct],yr=!1;ct.batch&&(yr=!0,_r=(0,le.map)(ct.batch,function(is){return(is=(0,le.defaults)((0,le.extend)({},is),ct)).batch=null,is}));var Yi,ho=[],rs=(0,ht.aG)(ct),To=(0,ht.xp)(ct);if(To&&(0,ht.T5)(this._api),(0,le.each)(_r,function(is){if((Yi=(Yi=bn.action(is,gt._model,gt._api))||(0,le.extend)({},is)).type=Bn.event||Yi.type,ho.push(Yi),To){var ga=Ce.zH(ct),yg=ga.mainTypeSpecified?ga.queryOptionMap.keys()[0]:"series";Uf(gt,gr,is,yg),er(gt)}else rs?(Uf(gt,gr,is,"series"),er(gt)):Jr&&Uf(gt,gr,is,Jr.main,Jr.sub)}),"none"!==gr&&!To&&!rs&&!Jr)try{this[Vo]?(Mi(this),uo.update.call(this,ct),this[Vo]=null):uo[gr].call(this,ct)}catch(is){throw this[za]=!1,is}if(Yi=yr?{type:Bn.event||Kt,escapeConnect:vn,batch:ho}:ho[0],this[za]=!1,!xt){var jf=this._messageCenter;if(jf.trigger(Yi.type,Yi),rs){var Xi={type:"selectchanged",escapeConnect:vn,selected:(0,ht.C5)(Nt),isFromClick:ct.isFromClick||!1,fromAction:ct.type,fromActionPayload:ct};jf.trigger(Xi.type,Xi)}}},ql=function(ct){for(var xt=this._pendingActions;xt.length;){var gt=xt.shift();ad.call(this,gt,ct)}},fc=function(ct){!ct&&this.trigger("updated")},Ho=function(ct,xt){ct.on("rendered",function(gt){xt.trigger("rendered",gt),ct.animation.isFinished()&&!xt[Vo]&&!xt._scheduler.unfinished&&!xt._pendingActions.length&&xt.trigger("finished")})},Nu=function(ct,xt){ct.on("mouseover",function(gt){var Kt=(0,Ks.o)(gt.target,ht.Av);Kt&&((0,ht.$l)(Kt,gt,xt._api),er(xt))}).on("mouseout",function(gt){var Kt=(0,Ks.o)(gt.target,ht.Av);Kt&&((0,ht.xr)(Kt,gt,xt._api),er(xt))}).on("click",function(gt){var Kt=(0,Ks.o)(gt.target,function(Bn){return null!=(0,vt.A)(Bn).dataIndex},!0);if(Kt){var vn=Kt.selected?"unselect":"select",bn=(0,vt.A)(Kt);xt._api.dispatchAction({type:vn,dataType:bn.dataType,dataIndexInside:bn.dataIndex,seriesIndex:bn.seriesIndex,isFromClick:!0})}})},pc=function(ct,xt,gt,Nt,Kt){(function ze(ct){var xt=[],gt=[],Nt=!1;if(ct.eachComponent(function(Bn,kn){var gr=kn.get("zlevel")||0,Jr=kn.get("z")||0,_r=kn.getZLevelKey();Nt=Nt||!!_r,("series"===Bn?gt:xt).push({zlevel:gr,z:Jr,idx:kn.componentIndex,type:Bn,key:_r})}),Nt){var vn,bn,Kt=xt.concat(gt);(0,ve.Z)(Kt,function(Bn,kn){return Bn.zlevel===kn.zlevel?Bn.z-kn.z:Bn.zlevel-kn.zlevel}),(0,le.each)(Kt,function(Bn){var kn=ct.getComponent(Bn.type,Bn.idx),gr=Bn.zlevel,Jr=Bn.key;null!=vn&&(gr=Math.max(vn,gr)),Jr?(gr===vn&&Jr!==bn&&gr++,bn=Jr):bn&&(gr===vn&&gr++,bn=""),vn=gr,kn.setZLevel(gr)})}})(xt),qn(ct,xt,gt,Nt,Kt),(0,le.each)(ct._chartsViews,function(vn){vn.__alive=!1}),fh(ct,xt,gt,Nt,Kt),(0,le.each)(ct._chartsViews,function(vn){vn.__alive||vn.remove(xt,gt)})},qn=function(ct,xt,gt,Nt,Kt,vn){(0,le.each)(vn||ct._componentsViews,function(bn){var Bn=bn.__model;gn(0,bn),bn.render(Bn,xt,gt,Nt),Wt(Bn,bn),Mn(Bn,bn)})},fh=function(ct,xt,gt,Nt,Kt,vn){var bn=ct._scheduler;Kt=(0,le.extend)(Kt||{},{updatedSeries:xt.getSeries()}),xn.trigger("series:beforeupdate",xt,gt,Kt);var Bn=!1;xt.eachSeries(function(kn){var gr=ct._chartsMap[kn.__viewId];gr.__alive=!0;var Jr=gr.renderTask;bn.updatePayload(Jr,Nt),gn(0,gr),vn&&vn.get(kn.uid)&&Jr.dirty(),Jr.perform(bn.getPerformArgs(Jr))&&(Bn=!0),gr.group.silent=!!kn.get("silent"),function ft(ct,xt){var gt=ct.get("blendMode")||null;xt.eachRendered(function(Nt){Nt.isGroup||(Nt.style.blend=gt)})}(kn,gr),(0,ht.ci)(kn)}),bn.unfinished=Bn||bn.unfinished,xn.trigger("series:layoutlabels",xt,gt,Kt),xn.trigger("series:transition",xt,gt,Kt),xt.eachSeries(function(kn){var gr=ct._chartsMap[kn.__viewId];Wt(kn,gr),Mn(kn,gr)}),function et(ct,xt){var Kt=0;ct._zr.storage.traverse(function(vn){vn.isGroup||Kt++}),Kt>xt.get("hoverLayerThreshold")&&!ye.Z.node&&!ye.Z.worker&&xt.eachSeries(function(vn){if(!vn.preventUsingHoverLayer){var bn=ct._chartsMap[vn.__viewId];bn.__alive&&bn.eachRendered(function(Bn){Bn.states.emphasis&&(Bn.states.emphasis.hoverLayer=!0)})}})}(ct,xt),xn.trigger("series:afterupdate",xt,gt,Kt)},er=function(ct){ct[Jn]=!0,ct.getZr().wakeUp()},gg=function(ct){!ct[Jn]||(ct.getZr().storage.traverse(function(xt){at.eq(xt)||Ze(xt)}),ct[Jn]=!1)},Gf=function(ct){return new(function(xt){function gt(){return null!==xt&&xt.apply(this,arguments)||this}return(0,ce.ZT)(gt,xt),gt.prototype.getCoordinateSystems=function(){return ct._coordSysMgr.getCoordinateSystems()},gt.prototype.getComponentByElement=function(Nt){for(;Nt;){var Kt=Nt.__ecComponentInfo;if(null!=Kt)return ct._model.getComponent(Kt.mainType,Kt.index);Nt=Nt.parent}},gt.prototype.enterEmphasis=function(Nt,Kt){(0,ht.fD)(Nt,Kt),er(ct)},gt.prototype.leaveEmphasis=function(Nt,Kt){(0,ht.Mh)(Nt,Kt),er(ct)},gt.prototype.enterBlur=function(Nt){(0,ht.SX)(Nt),er(ct)},gt.prototype.leaveBlur=function(Nt){(0,ht.VP)(Nt),er(ct)},gt.prototype.enterSelect=function(Nt){(0,ht.XX)(Nt),er(ct)},gt.prototype.leaveSelect=function(Nt){(0,ht.SJ)(Nt),er(ct)},gt.prototype.getModel=function(){return ct.getModel()},gt.prototype.getViewOfComponentModel=function(Nt){return ct.getViewOfComponentModel(Nt)},gt.prototype.getViewOfSeriesModel=function(Nt){return ct.getViewOfSeriesModel(Nt)},gt}(ue))(ct)},Uo=function(ct){function xt(gt,Nt){for(var Kt=0;Kt<gt.length;Kt++)gt[Kt][Hf]=Nt}(0,le.each)(va,function(gt,Nt){ct._messageCenter.on(Nt,function(Kt){if(Ja[ct.group]&&0!==ct[Hf]){if(Kt&&Kt.escapeConnect)return;var vn=ct.makeActionFromEvent(Kt),bn=[];(0,le.each)(Pi,function(Bn){Bn!==ct&&Bn.group===ct.group&&bn.push(Bn)}),xt(bn,0),(0,le.each)(bn,function(Bn){1!==Bn[Hf]&&Bn.dispatchAction(vn)}),xt(bn,2)}})})}}(),Ge}(be.Z),Sn=Jl.prototype;Sn.on=Tl("on"),Sn.off=Tl("off"),Sn.one=function(Ne,Ge,Le){var ze=this;(0,$l.Sh)("ECharts#one is deprecated."),this.on.call(this,Ne,function Ze(){for(var et=[],ft=0;ft<arguments.length;ft++)et[ft]=arguments[ft];Ge&&Ge.apply&&Ge.apply(this,et),ze.off(Ne,Ze)},Le)};var Go=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"],pa={},va={},Qs=[],Do=[],Mo=[],Nn={},Lr={},Pi={},Ja={},eu=+new Date-0,Ha=+new Date-0,El="_echarts_instance_";function aa(Ne,Ge,Le){var ze=!(Le&&Le.ssr);if(ze){var Ze=nu(Ne);if(Ze)return Ze}var et=new Jl(Ne,Ge,Le);return et.id="ec_"+eu++,Pi[et.id]=et,ze&&Ce.P$(Ne,El,et.id),Uo(et),xn.trigger("afterinit",et),et}function tu(Ne){if((0,le.isArray)(Ne)){var Ge=Ne;Ne=null,(0,le.each)(Ge,function(Le){null!=Le.group&&(Ne=Le.group)}),Ne=Ne||"g_"+Ha++,(0,le.each)(Ge,function(Le){Le.group=Ne})}return Ja[Ne]=!0,Ne}function vc(Ne){Ja[Ne]=!1}var Ur=vc;function od(Ne){(0,le.isString)(Ne)?Ne=Pi[Ne]:Ne instanceof Jl||(Ne=nu(Ne)),Ne instanceof Jl&&!Ne.isDisposed()&&Ne.dispose()}function nu(Ne){return Pi[Ce.IL(Ne,El)]}function Wf(Ne){return Pi[Ne]}function qs(Ne,Ge){Nn[Ne]=Ge}function Ua(Ne){(0,le.indexOf)(Do,Ne)<0&&Do.push(Ne)}function Fu(Ne,Ge){iu(Qs,Ne,Ge,2e3)}function gc(Ne){ru("afterinit",Ne)}function ws(Ne){ru("afterupdate",Ne)}function ru(Ne,Ge){xn.on(Ne,Ge)}function Bu(Ne,Ge,Le){(0,le.isFunction)(Ge)&&(Le=Ge,Ge="");var ze=(0,le.isObject)(Ne)?Ne.type:[Ne,Ne={event:Ge}][0];Ne.event=(Ne.event||ze).toLowerCase(),!va[Ge=Ne.event]&&((0,le.assert)(hh.test(ze)&&hh.test(Ge)),pa[ze]||(pa[ze]={action:Le,actionInfo:Ne}),va[Ge]=ze)}function Hi(Ne,Ge){ae.Z.register(Ne,Ge)}function mg(Ne){var Ge=ae.Z.get(Ne);if(Ge)return Ge.getDimensionsInfo?Ge.getDimensionsInfo():Ge.dimensions.slice()}function Vr(Ne,Ge){iu(Mo,Ne,Ge,1e3,"layout")}function ns(Ne,Ge){iu(Mo,Ne,Ge,3e3,"visual")}var sd=[];function iu(Ne,Ge,Le,ze,Ze){if(((0,le.isFunction)(Ge)||(0,le.isObject)(Ge))&&(Le=Ge,Ge=ze),!((0,le.indexOf)(sd,Le)>=0)){sd.push(Le);var et=wn.wrapStageHandler(Le,Ze);et.__prio=Ge,et.__raw=Le,Ne.push(et)}}function mc(Ne,Ge){Lr[Ne]=Ge}function Vu(Ne){(0,Cs.g2)({createCanvas:Ne})}function Ma(Ne,Ge,Le){var ze=(0,Kl.C)("registerMap");ze&&ze(Ne,Ge,Le)}function Ps(Ne){var Ge=(0,Kl.C)("getMap");return Ge&&Ge(Ne)}var ea=qo.DA;ns(2e3,Yl),ns(4500,Sa),ns(4500,qa),ns(2e3,_i),ns(4500,e0),ns(7e3,function Ml(Ne,Ge){Ne.eachRawSeries(function(Le){if(!Ne.isSeriesFiltered(Le)){var ze=Le.getData();ze.hasItemVisual()&&ze.each(function(ft){var Wt=ze.getItemVisual(ft,"decal");Wt&&(ze.ensureUniqueItemVisual(ft,"style").decal=(0,t0.I)(Wt,Ge))});var Ze=ze.getVisual("decal");Ze&&(ze.getVisual("style").decal=(0,t0.I)(Ze,Ge))}})}),Ua(Je),Fu(900,function Gt(Ne){var Ge=(0,le.createHashMap)();Ne.eachSeries(function(Le){var ze=Le.get("stack");if(ze){var Ze=Ge.get(ze)||Ge.set(ze,[]),et=Le.getData(),ft={stackResultDimension:et.getCalculationInfo("stackResultDimension"),stackedOverDimension:et.getCalculationInfo("stackedOverDimension"),stackedDimension:et.getCalculationInfo("stackedDimension"),stackedByDimension:et.getCalculationInfo("stackedByDimension"),isStackedByIndex:et.getCalculationInfo("isStackedByIndex"),data:et,seriesModel:Le};if(!ft.stackedDimension||!ft.isStackedByIndex&&!ft.stackedByDimension)return;Ze.length&&et.setCalculationInfo("stackedOnSeries",Ze[Ze.length-1].seriesModel),Ze.push(ft)}}),Ge.each(Rt)}),mc("default",function uh(Ne,Ge){le.defaults(Ge=Ge||{},{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var Le=new ua.Z,ze=new tt.Z({style:{fill:Ge.maskColor},zlevel:Ge.zlevel,z:1e4});Le.add(ze);var ft,Ze=new Xs.ZP({style:{text:Ge.text,fill:Ge.textColor,fontSize:Ge.fontSize,fontWeight:Ge.fontWeight,fontStyle:Ge.fontStyle,fontFamily:Ge.fontFamily},zlevel:Ge.zlevel,z:10001}),et=new tt.Z({style:{fill:"none"},textContent:Ze,textConfig:{position:"right",distance:10},zlevel:Ge.zlevel,z:10001});return Le.add(et),Ge.showSpinner&&((ft=new La.Z({shape:{startAngle:-lh/2,endAngle:-lh/2+.1,r:Ge.spinnerRadius},style:{stroke:Ge.color,lineCap:"round",lineWidth:Ge.lineWidth},zlevel:Ge.zlevel,z:10001})).animateShape(!0).when(1e3,{endAngle:3*lh/2}).start("circularInOut"),ft.animateShape(!0).when(1e3,{startAngle:3*lh/2}).delay(300).start("circularInOut"),Le.add(ft)),Le.resize=function(){var Wt=Ze.getBoundingRect().width,zt=Ge.showSpinner?Ge.spinnerRadius:0,gn=(Ne.getWidth()-2*zt-(Ge.showSpinner&&Wt?10:0)-Wt)/2-(Ge.showSpinner&&Wt?0:5+Wt/2)+(Ge.showSpinner?0:Wt/2)+(Wt?0:zt),Mn=Ne.getHeight()/2;Ge.showSpinner&&ft.setShape({cx:gn,cy:Mn}),et.setShape({x:gn-zt,y:Mn-zt,width:2*zt,height:2*zt}),ze.setShape({x:0,y:0,width:Ne.getWidth(),height:Ne.getHeight()})},Le.resize(),Le}),Bu({type:ht.Ki,event:ht.Ki,update:ht.Ki},le.noop),Bu({type:ht.yx,event:ht.yx,update:ht.yx},le.noop),Bu({type:ht.Hg,event:ht.Hg,update:ht.Hg},le.noop),Bu({type:ht.JQ,event:ht.JQ,update:ht.JQ},le.noop),Bu({type:ht.iK,event:ht.iK,update:ht.iK},le.noop),qs("light",Mr),qs("dark",Nf);var co={}},5831:(Bt,Qe,z)=>{z.d(Qe,{C:()=>le,M:()=>Se});var ce={};function Se(ye,ve){ce[ye]=ve}function le(ye){return ce[ye]}},5514:(Bt,Qe,z)=>{z.d(Qe,{sO:()=>re,D0:()=>ee,Li:()=>ie,G8:()=>$,I2:()=>U});var ce=z(1725),Se=z(169),ve=z(628),j={},X={},re=Se.Z.domSupported&&(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase().indexOf("ZH")>-1?"ZH":"EN";function U(K,b){K=K.toUpperCase(),X[K]=new ce.Z(b),j[K]=b}function ee(K){if((0,ve.isString)(K)){var b=j[K.toUpperCase()]||{};return"ZH"===K||"EN"===K?(0,ve.clone)(b):(0,ve.merge)((0,ve.clone)(b),(0,ve.clone)(j.EN),!1)}return(0,ve.merge)((0,ve.clone)(K),(0,ve.clone)(j.EN),!1)}function $(K){return X[K]}function ie(){return X.EN}U("EN",{time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}}),U("ZH",{time:{month:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],dayOfWeekAbbr:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53cd\u9009"}},toolbox:{brush:{title:{rect:"\u77e9\u5f62\u9009\u62e9",polygon:"\u5708\u9009",lineX:"\u6a2a\u5411\u9009\u62e9",lineY:"\u7eb5\u5411\u9009\u62e9",keep:"\u4fdd\u6301\u9009\u62e9",clear:"\u6e05\u9664\u9009\u62e9"}},dataView:{title:"\u6570\u636e\u89c6\u56fe",lang:["\u6570\u636e\u89c6\u56fe","\u5173\u95ed","\u5237\u65b0"]},dataZoom:{title:{zoom:"\u533a\u57df\u7f29\u653e",back:"\u533a\u57df\u7f29\u653e\u8fd8\u539f"}},magicType:{title:{line:"\u5207\u6362\u4e3a\u6298\u7ebf\u56fe",bar:"\u5207\u6362\u4e3a\u67f1\u72b6\u56fe",stack:"\u5207\u6362\u4e3a\u5806\u53e0",tiled:"\u5207\u6362\u4e3a\u5e73\u94fa"}},restore:{title:"\u8fd8\u539f"},saveAsImage:{title:"\u4fdd\u5b58\u4e3a\u56fe\u7247",lang:["\u53f3\u952e\u53e6\u5b58\u4e3a\u56fe\u7247"]}},series:{typeNames:{pie:"\u997c\u56fe",bar:"\u67f1\u72b6\u56fe",line:"\u6298\u7ebf\u56fe",scatter:"\u6563\u70b9\u56fe",effectScatter:"\u6d9f\u6f2a\u6563\u70b9\u56fe",radar:"\u96f7\u8fbe\u56fe",tree:"\u6811\u56fe",treemap:"\u77e9\u5f62\u6811\u56fe",boxplot:"\u7bb1\u578b\u56fe",candlestick:"K\u7ebf\u56fe",k:"K\u7ebf\u56fe",heatmap:"\u70ed\u529b\u56fe",map:"\u5730\u56fe",parallel:"\u5e73\u884c\u5750\u6807\u56fe",lines:"\u7ebf\u56fe",graph:"\u5173\u7cfb\u56fe",sankey:"\u6851\u57fa\u56fe",funnel:"\u6f0f\u6597\u56fe",gauge:"\u4eea\u8868\u76d8\u56fe",pictorialBar:"\u8c61\u5f62\u67f1\u56fe",themeRiver:"\u4e3b\u9898\u6cb3\u6d41\u56fe",sunburst:"\u65ed\u65e5\u56fe"}},aria:{general:{withTitle:"\u8fd9\u662f\u4e00\u4e2a\u5173\u4e8e\u201c{title}\u201d\u7684\u56fe\u8868\u3002",withoutTitle:"\u8fd9\u662f\u4e00\u4e2a\u56fe\u8868\uff0c"},series:{single:{prefix:"",withName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\uff0c\u8868\u793a{seriesName}\u3002",withoutName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\u3002"},multiple:{prefix:"\u5b83\u7531{seriesCount}\u4e2a\u56fe\u8868\u7cfb\u5217\u7ec4\u6210\u3002",withName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a\u8868\u793a{seriesName}\u7684{seriesType}\uff0c",withoutName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a{seriesType}\uff0c",separator:{middle:"\uff1b",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636e\u662f\u2014\u2014",partialData:"\u5176\u4e2d\uff0c\u524d{displayCnt}\u9879\u662f\u2014\u2014",withName:"{name}\u7684\u6570\u636e\u662f{value}",withoutName:"{value}",separator:{middle:"\uff0c",end:""}}}})},6861:(Bt,Qe,z)=>{z.d(Qe,{v:()=>Se});var ce=z(628);function Se(ve){return new le(ve)}var le=function(){function ve(be){this._reset=(be=be||{}).reset,this._plan=be.plan,this._count=be.count,this._onDirty=be.onDirty,this._dirty=!0}return ve.prototype.perform=function(be){var X,Ce=this._upstream,he=be&&be.skip;if(this._dirty&&Ce){var j=this.context;j.data=j.outputData=Ce.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!he&&(X=this._plan(this.context));var K,re=ie(this._modBy),U=this._modDataCount||0,ee=ie(be&&be.modBy),$=be&&be.modDataCount||0;function ie(W){return!(W>=1)&&(W=1),W}(re!==ee||U!==$)&&(X="reset"),(this._dirty||"reset"===X)&&(this._dirty=!1,K=this._doReset(he)),this._modBy=ee,this._modDataCount=$;var b=be&&be.step;if(this._dueEnd=Ce?Ce._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var Y=this._dueIndex,Q=Math.min(null!=b?this._dueIndex+b:1/0,this._dueEnd);if(!he&&(K||Y<Q)){var F=this._progress;if((0,ce.isArray)(F))for(var q=0;q<F.length;q++)this._doProgress(F[q],Y,Q,ee,$);else this._doProgress(F,Y,Q,ee,$)}this._dueIndex=Q,this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:Q}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()},ve.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},ve.prototype._doProgress=function(be,Ce,he,j,X){ye.reset(Ce,he,j,X),this._callingProgress=be,this._callingProgress({start:Ce,end:he,count:he-Ce,next:ye.next},this.context)},ve.prototype._doReset=function(be){var Ce,he;this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null,!be&&this._reset&&((Ce=this._reset(this.context))&&Ce.progress&&(he=Ce.forceFirstProgress,Ce=Ce.progress),(0,ce.isArray)(Ce)&&!Ce.length&&(Ce=null)),this._progress=Ce,this._modBy=this._modDataCount=null;var j=this._downstream;return j&&j.dirty(),he},ve.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},ve.prototype.pipe=function(be){(this._downstream!==be||this._dirty)&&(this._downstream=be,be._upstream=this,be.dirty())},ve.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},ve.prototype.getUpstream=function(){return this._upstream},ve.prototype.getDownstream=function(){return this._downstream},ve.prototype.setOutputEnd=function(be){this._outputDueEnd=this._settedOutputEnd=be},ve}(),ye=function(){var ve,be,Ce,he,j,X={reset:function(ee,$,ie,K){be=ee,ve=$,Ce=ie,he=K,j=Math.ceil(he/Ce),X.next=Ce>1&&he>0?U:re}};return X;function re(){return be<ve?be++:null}function U(){var ee=be%j*Ce+Math.ceil(be/j),$=be>=ve?null:ee<he?ee:be;return be++,$}}()},2650:(Bt,Qe,z)=>{function ce(ve){return null==ve?0:ve.length||1}function Se(ve){return ve}z.d(Qe,{Z:()=>ye});const ye=function(){function ve(be,Ce,he,j,X,re){this._old=be,this._new=Ce,this._oldKeyGetter=he||Se,this._newKeyGetter=j||Se,this.context=X,this._diffModeMultiple="multiple"===re}return ve.prototype.add=function(be){return this._add=be,this},ve.prototype.update=function(be){return this._update=be,this},ve.prototype.updateManyToOne=function(be){return this._updateManyToOne=be,this},ve.prototype.updateOneToMany=function(be){return this._updateOneToMany=be,this},ve.prototype.updateManyToMany=function(be){return this._updateManyToMany=be,this},ve.prototype.remove=function(be){return this._remove=be,this},ve.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},ve.prototype._executeOneToOne=function(){var be=this._old,Ce=this._new,he={},j=new Array(be.length),X=new Array(Ce.length);this._initIndexMap(be,null,j,"_oldKeyGetter"),this._initIndexMap(Ce,he,X,"_newKeyGetter");for(var re=0;re<be.length;re++){var U=j[re],ee=he[U],$=ce(ee);if($>1){var ie=ee.shift();1===ee.length&&(he[U]=ee[0]),this._update&&this._update(ie,re)}else 1===$?(he[U]=null,this._update&&this._update(ee,re)):this._remove&&this._remove(re)}this._performRestAdd(X,he)},ve.prototype._executeMultiple=function(){var Ce=this._new,he={},j={},X=[],re=[];this._initIndexMap(this._old,he,X,"_oldKeyGetter"),this._initIndexMap(Ce,j,re,"_newKeyGetter");for(var U=0;U<X.length;U++){var ee=X[U],$=he[ee],ie=j[ee],K=ce($),b=ce(ie);if(K>1&&1===b)this._updateManyToOne&&this._updateManyToOne(ie,$),j[ee]=null;else if(1===K&&b>1)this._updateOneToMany&&this._updateOneToMany(ie,$),j[ee]=null;else if(1===K&&1===b)this._update&&this._update(ie,$),j[ee]=null;else if(K>1&&b>1)this._updateManyToMany&&this._updateManyToMany(ie,$),j[ee]=null;else if(K>1)for(var Y=0;Y<K;Y++)this._remove&&this._remove($[Y]);else this._remove&&this._remove($)}this._performRestAdd(re,j)},ve.prototype._performRestAdd=function(be,Ce){for(var he=0;he<be.length;he++){var j=be[he],X=Ce[j],re=ce(X);if(re>1)for(var U=0;U<re;U++)this._add&&this._add(X[U]);else 1===re&&this._add&&this._add(X);Ce[j]=null}},ve.prototype._initIndexMap=function(be,Ce,he,j){for(var X=this._diffModeMultiple,re=0;re<be.length;re++){var U="_ec_"+this[j](be[re],re);if(X||(he[re]=U),Ce){var ee=Ce[U],$=ce(ee);0===$?(Ce[U]=re,X&&he.push(U)):1===$?Ce[U]=[ee,re]:ee.push(re)}}},ve}()},9762:(Bt,Qe,z)=>{z.d(Qe,{ZP:()=>K,hG:()=>Ce});var X,ce=z(628),Se=z(4066),le=z(7079),ye="undefined",ve=typeof Uint32Array===ye?Array:Uint32Array,be=typeof Uint16Array===ye?Array:Uint16Array,Ce=typeof Int32Array===ye?Array:Int32Array,he=typeof Float64Array===ye?Array:Float64Array,j={float:he,int:Ce,ordinal:Array,number:Array,time:he};function re(b){return b>65535?ve:be}function ee(b){var Y=b.constructor;return Y===Array?b.slice():new Y(b)}function $(b,Y,Q,F,q){var G=j[Q||"float"];if(q){var W=b[Y],J=W&&W.length;if(J!==F){for(var V=new G(F),P=0;P<J;P++)V[P]=W[P];b[Y]=V}}else b[Y]=new G(F)}const K=function(){function b(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=(0,ce.createHashMap)()}return b.prototype.initData=function(Y,Q,F){this._provider=Y,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var q=Y.getSource(),G=this.defaultDimValueGetter=X[q.sourceFormat];this._dimValueGetter=F||G,this._rawExtent=[],(0,le.QY)(q),this._dimensions=(0,ce.map)(Q,function(J){return{type:J.type,property:J.property}}),this._initDataFromProvider(0,Y.count())},b.prototype.getProvider=function(){return this._provider},b.prototype.getSource=function(){return this._provider.getSource()},b.prototype.ensureCalculationDimension=function(Y,Q){var F=this._calcDimNameToIdx,q=this._dimensions,G=F.get(Y);if(null!=G){if(q[G].type===Q)return G}else G=q.length;return q[G]={type:Q},F.set(Y,G),this._chunks[G]=new j[Q||"float"](this._rawCount),this._rawExtent[G]=[1/0,-1/0],G},b.prototype.collectOrdinalMeta=function(Y,Q){var F=this._chunks[Y],q=this._dimensions[Y],G=this._rawExtent,W=q.ordinalOffset||0,J=F.length;0===W&&(G[Y]=[1/0,-1/0]);for(var V=G[Y],P=W;P<J;P++){var T=F[P]=Q.parseAndCollect(F[P]);isNaN(T)||(V[0]=Math.min(T,V[0]),V[1]=Math.max(T,V[1]))}q.ordinalMeta=Q,q.ordinalOffset=J,q.type="ordinal"},b.prototype.getOrdinalMeta=function(Y){return this._dimensions[Y].ordinalMeta},b.prototype.getDimensionProperty=function(Y){var Q=this._dimensions[Y];return Q&&Q.property},b.prototype.appendData=function(Y){var Q=this._provider,F=this.count();Q.appendData(Y);var q=Q.count();return Q.persistent||(q+=F),F<q&&this._initDataFromProvider(F,q,!0),[F,q]},b.prototype.appendValues=function(Y,Q){for(var F=this._chunks,q=this._dimensions,G=q.length,W=this._rawExtent,J=this.count(),V=J+Math.max(Y.length,Q||0),P=0;P<G;P++)$(F,P,q[P].type,V,!0);for(var R=[],E=J;E<V;E++)for(var M=E-J,A=0;A<G;A++){var O=X.arrayRows.call(this,Y[M]||R,q[A].property,M,A);F[A][E]=O;var B=W[A];O<B[0]&&(B[0]=O),O>B[1]&&(B[1]=O)}return this._rawCount=this._count=V,{start:J,end:V}},b.prototype._initDataFromProvider=function(Y,Q,F){for(var q=this._provider,G=this._chunks,W=this._dimensions,J=W.length,V=this._rawExtent,P=(0,ce.map)(W,function(ae){return ae.property}),T=0;T<J;T++){var R=W[T];V[T]||(V[T]=[1/0,-1/0]),$(G,T,R.type,Q,F)}if(q.fillStorage)q.fillStorage(Y,Q,G,V);else for(var E=[],M=Y;M<Q;M++){E=q.getItem(M,E);for(var A=0;A<J;A++){var O=G[A],B=this._dimValueGetter(E,P[A],M,A);O[M]=B;var ue=V[A];B<ue[0]&&(ue[0]=B),B>ue[1]&&(ue[1]=B)}}!q.persistent&&q.clean&&q.clean(),this._rawCount=this._count=Q,this._extent=[]},b.prototype.count=function(){return this._count},b.prototype.get=function(Y,Q){if(!(Q>=0&&Q<this._count))return NaN;var F=this._chunks[Y];return F?F[this.getRawIndex(Q)]:NaN},b.prototype.getValues=function(Y,Q){var F=[],q=[];if(null==Q){Q=Y,Y=[];for(var G=0;G<this._dimensions.length;G++)q.push(G)}else q=Y;G=0;for(var W=q.length;G<W;G++)F.push(this.get(q[G],Q));return F},b.prototype.getByRawIndex=function(Y,Q){if(!(Q>=0&&Q<this._rawCount))return NaN;var F=this._chunks[Y];return F?F[Q]:NaN},b.prototype.getSum=function(Y){var F=0;if(this._chunks[Y])for(var q=0,G=this.count();q<G;q++){var W=this.get(Y,q);isNaN(W)||(F+=W)}return F},b.prototype.getMedian=function(Y){var Q=[];this.each([Y],function(G){isNaN(G)||Q.push(G)});var F=Q.sort(function(G,W){return G-W}),q=this.count();return 0===q?0:q%2==1?F[(q-1)/2]:(F[q/2]+F[q/2-1])/2},b.prototype.indexOfRawIndex=function(Y){if(Y>=this._rawCount||Y<0)return-1;if(!this._indices)return Y;var Q=this._indices,F=Q[Y];if(null!=F&&F<this._count&&F===Y)return Y;for(var q=0,G=this._count-1;q<=G;){var W=(q+G)/2|0;if(Q[W]<Y)q=W+1;else{if(!(Q[W]>Y))return W;G=W-1}}return-1},b.prototype.indicesOfNearest=function(Y,Q,F){var G=this._chunks[Y],W=[];if(!G)return W;null==F&&(F=1/0);for(var J=1/0,V=-1,P=0,T=0,R=this.count();T<R;T++){var M=Q-G[this.getRawIndex(T)],A=Math.abs(M);A<=F&&((A<J||A===J&&M>=0&&V<0)&&(J=A,V=M,P=0),M===V&&(W[P++]=T))}return W.length=P,W},b.prototype.getIndices=function(){var Y,Q=this._indices;if(Q){var q=this._count;if((F=Q.constructor)===Array){Y=new F(q);for(var G=0;G<q;G++)Y[G]=Q[G]}else Y=new F(Q.buffer,0,q)}else{var F;for(Y=new(F=re(this._rawCount))(this.count()),G=0;G<Y.length;G++)Y[G]=G}return Y},b.prototype.filter=function(Y,Q){if(!this._count)return this;for(var F=this.clone(),q=F.count(),W=new(re(F._rawCount))(q),J=[],V=Y.length,P=0,T=Y[0],R=F._chunks,E=0;E<q;E++){var M=void 0,A=F.getRawIndex(E);if(0===V)M=Q(E);else if(1===V)M=Q(R[T][A],E);else{for(var B=0;B<V;B++)J[B]=R[Y[B]][A];J[B]=E,M=Q.apply(null,J)}M&&(W[P++]=A)}return P<q&&(F._indices=W),F._count=P,F._extent=[],F._updateGetRawIdx(),F},b.prototype.selectRange=function(Y){var Q=this.clone(),F=Q._count;if(!F)return this;var q=(0,ce.keys)(Y),G=q.length;if(!G)return this;var W=Q.count(),V=new(re(Q._rawCount))(W),P=0,T=q[0],R=Y[T][0],E=Y[T][1],M=Q._chunks,A=!1;if(!Q._indices){var O=0;if(1===G){for(var B=M[q[0]],ue=0;ue<F;ue++)((ae=B[ue])>=R&&ae<=E||isNaN(ae))&&(V[P++]=O),O++;A=!0}else if(2===G){B=M[q[0]];var oe=M[q[1]],de=Y[q[1]][0],te=Y[q[1]][1];for(ue=0;ue<F;ue++){var xe=oe[ue];((ae=B[ue])>=R&&ae<=E||isNaN(ae))&&(xe>=de&&xe<=te||isNaN(xe))&&(V[P++]=O),O++}A=!0}}if(!A)if(1===G)for(ue=0;ue<W;ue++){var fe=Q.getRawIndex(ue);((ae=M[q[0]][fe])>=R&&ae<=E||isNaN(ae))&&(V[P++]=fe)}else for(ue=0;ue<W;ue++){for(var ge=!0,we=(fe=Q.getRawIndex(ue),0);we<G;we++){var ae,Te=q[we];((ae=M[Te][fe])<Y[Te][0]||ae>Y[Te][1])&&(ge=!1)}ge&&(V[P++]=Q.getRawIndex(ue))}return P<W&&(Q._indices=V),Q._count=P,Q._extent=[],Q._updateGetRawIdx(),Q},b.prototype.map=function(Y,Q){var F=this.clone(Y);return this._updateDims(F,Y,Q),F},b.prototype.modify=function(Y,Q){this._updateDims(this,Y,Q)},b.prototype._updateDims=function(Y,Q,F){for(var q=Y._chunks,G=[],W=Q.length,J=Y.count(),V=[],P=Y._rawExtent,T=0;T<Q.length;T++)P[Q[T]]=[1/0,-1/0];for(var R=0;R<J;R++){for(var E=Y.getRawIndex(R),M=0;M<W;M++)V[M]=q[Q[M]][E];V[W]=R;var A=F&&F.apply(null,V);if(null!=A)for("object"!=typeof A&&(G[0]=A,A=G),T=0;T<A.length;T++){var O=Q[T],B=A[T],ue=P[O],ae=q[O];ae&&(ae[E]=B),B<ue[0]&&(ue[0]=B),B>ue[1]&&(ue[1]=B)}}},b.prototype.lttbDownSample=function(Y,Q){var T,R,E,F=this.clone([Y],!0),G=F._chunks[Y],W=this.count(),J=0,V=Math.floor(1/Q),P=this.getRawIndex(0),M=new(re(this._rawCount))(Math.min(2*(Math.ceil(W/V)+2),W));M[J++]=P;for(var A=1;A<W-1;A+=V){for(var O=Math.min(A+V,W-1),B=Math.min(A+2*V,W),ue=(B+O)/2,ae=0,oe=O;oe<B;oe++){var te=G[de=this.getRawIndex(oe)];isNaN(te)||(ae+=te)}ae/=B-O;var xe=A,fe=Math.min(A+V,W),ge=A-1,we=G[P];T=-1,E=xe;var Te=-1,Ae=0;for(oe=xe;oe<fe;oe++){var de;te=G[de=this.getRawIndex(oe)],isNaN(te)?(Ae++,Te<0&&(Te=de)):(R=Math.abs((ge-ue)*(te-we)-(ge-oe)*(ae-we)))>T&&(T=R,E=de)}Ae>0&&Ae<fe-xe&&(M[J++]=Math.min(Te,E),E=Math.max(Te,E)),M[J++]=E,P=E}return M[J++]=this.getRawIndex(W-1),F._count=J,F._indices=M,F.getRawIndex=this._getRawIdx,F},b.prototype.downSample=function(Y,Q,F,q){for(var G=this.clone([Y],!0),W=G._chunks,J=[],V=Math.floor(1/Q),P=W[Y],T=this.count(),R=G._rawExtent[Y]=[1/0,-1/0],E=new(re(this._rawCount))(Math.ceil(T/V)),M=0,A=0;A<T;A+=V){V>T-A&&(J.length=V=T-A);for(var O=0;O<V;O++){var B=this.getRawIndex(A+O);J[O]=P[B]}var ue=F(J),ae=this.getRawIndex(Math.min(A+q(J,ue)||0,T-1));P[ae]=ue,ue<R[0]&&(R[0]=ue),ue>R[1]&&(R[1]=ue),E[M++]=ae}return G._count=M,G._indices=E,G._updateGetRawIdx(),G},b.prototype.each=function(Y,Q){if(this._count)for(var F=Y.length,q=this._chunks,G=0,W=this.count();G<W;G++){var J=this.getRawIndex(G);switch(F){case 0:Q(G);break;case 1:Q(q[Y[0]][J],G);break;case 2:Q(q[Y[0]][J],q[Y[1]][J],G);break;default:for(var V=0,P=[];V<F;V++)P[V]=q[Y[V]][J];P[V]=G,Q.apply(null,P)}}},b.prototype.getDataExtent=function(Y){var Q=this._chunks[Y],F=[1/0,-1/0];if(!Q)return F;var W,q=this.count();if(!this._indices)return this._rawExtent[Y].slice();if(W=this._extent[Y])return W.slice();for(var J=(W=F)[0],V=W[1],P=0;P<q;P++){var R=Q[this.getRawIndex(P)];R<J&&(J=R),R>V&&(V=R)}return this._extent[Y]=W=[J,V],W},b.prototype.getRawDataItem=function(Y){var Q=this.getRawIndex(Y);if(this._provider.persistent)return this._provider.getItem(Q);for(var F=[],q=this._chunks,G=0;G<q.length;G++)F.push(q[G][Q]);return F},b.prototype.clone=function(Y,Q){var F=new b,q=this._chunks,G=Y&&(0,ce.reduce)(Y,function(J,V){return J[V]=!0,J},{});if(G)for(var W=0;W<q.length;W++)F._chunks[W]=G[W]?ee(q[W]):q[W];else F._chunks=q;return this._copyCommonProps(F),Q||(F._indices=this._cloneIndices()),F._updateGetRawIdx(),F},b.prototype._copyCommonProps=function(Y){Y._count=this._count,Y._rawCount=this._rawCount,Y._provider=this._provider,Y._dimensions=this._dimensions,Y._extent=(0,ce.clone)(this._extent),Y._rawExtent=(0,ce.clone)(this._rawExtent)},b.prototype._cloneIndices=function(){if(this._indices){var Y=this._indices.constructor,Q=void 0;if(Y===Array){var F=this._indices.length;Q=new Y(F);for(var q=0;q<F;q++)Q[q]=this._indices[q]}else Q=new Y(this._indices);return Q}return null},b.prototype._getRawIdxIdentity=function(Y){return Y},b.prototype._getRawIdx=function(Y){return Y<this._count&&Y>=0?this._indices[Y]:-1},b.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},b.internalField=function(){function Y(Q,F,q,G){return(0,Se.yQ)(Q[G],this._dimensions[G])}X={arrayRows:Y,objectRows:function(Q,F,q,G){return(0,Se.yQ)(Q[F],this._dimensions[G])},keyedColumns:Y,original:function(Q,F,q,G){var W=Q&&(Q.value??Q);return(0,Se.yQ)(W instanceof Array?W[G]:W,this._dimensions[G])},typedArray:function(Q,F,q,G){return Q[G]}}}(),b}()},5297:(Bt,Qe,z)=>{z.d(Qe,{ZP:()=>Ce});var ce=z(628);function Se(he){return"_EC_"+he}var le=function(){function he(j){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=j||!1}return he.prototype.isDirected=function(){return this._directed},he.prototype.addNode=function(j,X){var re=this._nodesMap;if(!re[Se(j=null==j?""+X:""+j)]){var U=new ye(j,X);return U.hostGraph=this,this.nodes.push(U),re[Se(j)]=U,U}},he.prototype.getNodeByIndex=function(j){var X=this.data.getRawIndex(j);return this.nodes[X]},he.prototype.getNodeById=function(j){return this._nodesMap[Se(j)]},he.prototype.addEdge=function(j,X,re){var U=this._nodesMap,ee=this._edgesMap;if(ce.isNumber(j)&&(j=this.nodes[j]),ce.isNumber(X)&&(X=this.nodes[X]),j instanceof ye||(j=U[Se(j)]),X instanceof ye||(X=U[Se(X)]),j&&X){var $=j.id+"-"+X.id,ie=new ve(j,X,re);return ie.hostGraph=this,this._directed&&(j.outEdges.push(ie),X.inEdges.push(ie)),j.edges.push(ie),j!==X&&X.edges.push(ie),this.edges.push(ie),ee[$]=ie,ie}},he.prototype.getEdgeByIndex=function(j){var X=this.edgeData.getRawIndex(j);return this.edges[X]},he.prototype.getEdge=function(j,X){j instanceof ye&&(j=j.id),X instanceof ye&&(X=X.id);var re=this._edgesMap;return this._directed?re[j+"-"+X]:re[j+"-"+X]||re[X+"-"+j]},he.prototype.eachNode=function(j,X){for(var re=this.nodes,U=re.length,ee=0;ee<U;ee++)re[ee].dataIndex>=0&&j.call(X,re[ee],ee)},he.prototype.eachEdge=function(j,X){for(var re=this.edges,U=re.length,ee=0;ee<U;ee++)re[ee].dataIndex>=0&&re[ee].node1.dataIndex>=0&&re[ee].node2.dataIndex>=0&&j.call(X,re[ee],ee)},he.prototype.breadthFirstTraverse=function(j,X,re,U){if(X instanceof ye||(X=this._nodesMap[Se(X)]),X){for(var ee="out"===re?"outEdges":"in"===re?"inEdges":"edges",$=0;$<this.nodes.length;$++)this.nodes[$].__visited=!1;if(!j.call(U,X,null))for(var ie=[X];ie.length;){var K=ie.shift(),b=K[ee];for($=0;$<b.length;$++){var Y=b[$],Q=Y.node1===K?Y.node2:Y.node1;if(!Q.__visited){if(j.call(U,Q,K))return;ie.push(Q),Q.__visited=!0}}}}},he.prototype.update=function(){for(var j=this.data,X=this.edgeData,re=this.nodes,U=this.edges,ee=0,$=re.length;ee<$;ee++)re[ee].dataIndex=-1;for(ee=0,$=j.count();ee<$;ee++)re[j.getRawIndex(ee)].dataIndex=ee;for(X.filterSelf(function(ie){var K=U[X.getRawIndex(ie)];return K.node1.dataIndex>=0&&K.node2.dataIndex>=0}),ee=0,$=U.length;ee<$;ee++)U[ee].dataIndex=-1;for(ee=0,$=X.count();ee<$;ee++)U[X.getRawIndex(ee)].dataIndex=ee},he.prototype.clone=function(){for(var j=new he(this._directed),X=this.nodes,re=this.edges,U=0;U<X.length;U++)j.addNode(X[U].id,X[U].dataIndex);for(U=0;U<re.length;U++){var ee=re[U];j.addEdge(ee.node1.id,ee.node2.id,ee.dataIndex)}return j},he}(),ye=function(){function he(j,X){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=j??"",this.dataIndex=X??-1}return he.prototype.degree=function(){return this.edges.length},he.prototype.inDegree=function(){return this.inEdges.length},he.prototype.outDegree=function(){return this.outEdges.length},he.prototype.getModel=function(j){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(j)},he.prototype.getAdjacentDataIndices=function(){for(var j={edge:[],node:[]},X=0;X<this.edges.length;X++){var re=this.edges[X];re.dataIndex<0||(j.edge.push(re.dataIndex),j.node.push(re.node1.dataIndex,re.node2.dataIndex))}return j},he}(),ve=function(){function he(j,X,re){this.dataIndex=-1,this.node1=j,this.node2=X,this.dataIndex=re??-1}return he.prototype.getModel=function(j){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(j)},he.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},he}();function be(he,j){return{getValue:function(X){var re=this[he][j];return re.getStore().get(re.getDimensionIndex(X||"value"),this.dataIndex)},setVisual:function(X,re){this.dataIndex>=0&&this[he][j].setItemVisual(this.dataIndex,X,re)},getVisual:function(X){return this[he][j].getItemVisual(this.dataIndex,X)},setLayout:function(X,re){this.dataIndex>=0&&this[he][j].setItemLayout(this.dataIndex,X,re)},getLayout:function(){return this[he][j].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[he][j].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[he][j].getRawIndex(this.dataIndex)}}}ce.mixin(ye,be("hostGraph","data")),ce.mixin(ve,be("hostGraph","edgeData"));const Ce=le},9567:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>ve});var ce=z(628),Se=0;function ye(be){return(0,ce.isObject)(be)&&null!=be.value?be.value:be+""}const ve=function(){function be(Ce){this.categories=Ce.categories||[],this._needCollect=Ce.needCollect,this._deduplication=Ce.deduplication,this.uid=++Se}return be.createByAxisModel=function(Ce){var he=Ce.option,j=he.data,X=j&&(0,ce.map)(j,ye);return new be({categories:X,needCollect:!X,deduplication:!1!==he.dedplication})},be.prototype.getOrdinal=function(Ce){return this._getOrCreateMap().get(Ce)},be.prototype.parseAndCollect=function(Ce){var he,j=this._needCollect;if(!(0,ce.isString)(Ce)&&!j)return Ce;if(j&&!this._deduplication)return this.categories[he=this.categories.length]=Ce,he;var X=this._getOrCreateMap();return null==(he=X.get(Ce))&&(j?(this.categories[he=this.categories.length]=Ce,X.set(Ce,he)):he=NaN),he},be.prototype._getOrCreateMap=function(){return this._map||(this._map=(0,ce.createHashMap)(this.categories))},be}()},3241:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>R});var F,q,G,W,J,V,P,ce=z(628),Se=z(1725),le=z(2650),ye=z(67),ve=z(1577),be=z(7843),Ce=z(4367),he=z(1266),j=z(7282),X=z(7079),re=z(9762),U=z(4735),ee=ce.isObject,$=ce.map,ie=typeof Int32Array>"u"?Array:Int32Array,Y=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],Q=["_approximateExtent"];const R=function(){function E(M,A){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var O,B=!1;(0,U.bB)(M)?(O=M.dimensions,this._dimOmitted=M.isDimensionOmitted(),this._schema=M):(B=!0,O=M),O=O||["x","y"];for(var ue={},ae=[],oe={},de=!1,te={},xe=0;xe<O.length;xe++){var fe=O[xe],ge=ce.isString(fe)?new be.Z({name:fe}):fe instanceof be.Z?fe:new be.Z(fe),we=ge.name;ge.type=ge.type||"float",ge.coordDim||(ge.coordDim=we,ge.coordDimIndex=0);var Te=ge.otherDims=ge.otherDims||{};ae.push(we),ue[we]=ge,null!=te[we]&&(de=!0),ge.createInvertedIndices&&(oe[we]=[]),0===Te.itemName&&(this._nameDimIdx=xe),0===Te.itemId&&(this._idDimIdx=xe),B&&(ge.storeDimIndex=xe)}if(this.dimensions=ae,this._dimInfos=ue,this._initGetDimensionInfo(de),this.hostModel=A,this._invertedIndicesMap=oe,this._dimOmitted){var Ae=this._dimIdxToName=ce.createHashMap();ce.each(ae,function(Ee){Ae.set(ue[Ee].storeDimIndex,Ee)})}}return E.prototype.getDimension=function(M){var A=this._recognizeDimIndex(M);if(null==A)return M;if(A=M,!this._dimOmitted)return this.dimensions[A];var O=this._dimIdxToName.get(A);if(null!=O)return O;var B=this._schema.getSourceDimension(A);return B?B.name:void 0},E.prototype.getDimensionIndex=function(M){var A=this._recognizeDimIndex(M);if(null!=A)return A;if(null==M)return-1;var O=this._getDimInfo(M);return O?O.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(M):-1},E.prototype._recognizeDimIndex=function(M){if(ce.isNumber(M)||null!=M&&!isNaN(M)&&!this._getDimInfo(M)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(M)<0))return+M},E.prototype._getStoreDimIndex=function(M){return this.getDimensionIndex(M)},E.prototype.getDimensionInfo=function(M){return this._getDimInfo(this.getDimension(M))},E.prototype._initGetDimensionInfo=function(M){var A=this._dimInfos;this._getDimInfo=M?function(O){return A.hasOwnProperty(O)?A[O]:void 0}:function(O){return A[O]}},E.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},E.prototype.mapDimension=function(M,A){var O=this._dimSummary;if(null==A)return O.encodeFirstDimNotExtra[M];var B=O.encode[M];return B?B[A]:null},E.prototype.mapDimensionsAll=function(M){return(this._dimSummary.encode[M]||[]).slice()},E.prototype.getStore=function(){return this._store},E.prototype.initData=function(M,A,O){var ue,B=this;if(M instanceof re.ZP&&(ue=M),!ue){var ae=this.dimensions,oe=(0,X.Ld)(M)||ce.isArrayLike(M)?new ye.Pl(M,ae.length):M;ue=new re.ZP;var de=$(ae,function(te){return{type:B._dimInfos[te].type,property:te}});ue.initData(oe,de,O)}this._store=ue,this._nameList=(A||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,ue.count()),this._dimSummary=(0,ve.y)(this,this._schema),this.userOutput=this._dimSummary.userOutput},E.prototype.appendData=function(M){var A=this._store.appendData(M);this._doInit(A[0],A[1])},E.prototype.appendValues=function(M,A){var O=this._store.appendValues(M,A.length),B=O.start,ue=O.end,ae=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),A)for(var oe=B;oe<ue;oe++)this._nameList[oe]=A[oe-B],ae&&P(this,oe)},E.prototype._updateOrdinalMeta=function(){for(var M=this._store,A=this.dimensions,O=0;O<A.length;O++){var B=this._dimInfos[A[O]];B.ordinalMeta&&M.collectOrdinalMeta(B.storeDimIndex,B.ordinalMeta)}},E.prototype._shouldMakeIdFromName=function(){var M=this._store.getProvider();return null==this._idDimIdx&&M.getSource().sourceFormat!==Ce.J5&&!M.fillStorage},E.prototype._doInit=function(M,A){if(!(M>=A)){var B=this._store.getProvider();this._updateOrdinalMeta();var ue=this._nameList,ae=this._idList;if(B.getSource().sourceFormat===Ce.cy&&!B.pure)for(var te=[],xe=M;xe<A;xe++){var fe=B.getItem(xe,te);if(!this.hasItemOption&&(0,he.Co)(fe)&&(this.hasItemOption=!0),fe){var ge=fe.name;null==ue[xe]&&null!=ge&&(ue[xe]=(0,he.U5)(ge,null));var we=fe.id;null==ae[xe]&&null!=we&&(ae[xe]=(0,he.U5)(we,null))}}if(this._shouldMakeIdFromName())for(xe=M;xe<A;xe++)P(this,xe);F(this)}},E.prototype.getApproximateExtent=function(M){return this._approximateExtent[M]||this._store.getDataExtent(this._getStoreDimIndex(M))},E.prototype.setApproximateExtent=function(M,A){A=this.getDimension(A),this._approximateExtent[A]=M.slice()},E.prototype.getCalculationInfo=function(M){return this._calculationInfo[M]},E.prototype.setCalculationInfo=function(M,A){ee(M)?ce.extend(this._calculationInfo,M):this._calculationInfo[M]=A},E.prototype.getName=function(M){var A=this.getRawIndex(M),O=this._nameList[A];return null==O&&null!=this._nameDimIdx&&(O=G(this,this._nameDimIdx,A)),null==O&&(O=""),O},E.prototype._getCategory=function(M,A){var O=this._store.get(M,A),B=this._store.getOrdinalMeta(M);return B?B.categories[O]:O},E.prototype.getId=function(M){return q(this,this.getRawIndex(M))},E.prototype.count=function(){return this._store.count()},E.prototype.get=function(M,A){var B=this._dimInfos[M];if(B)return this._store.get(B.storeDimIndex,A)},E.prototype.getByRawIndex=function(M,A){var B=this._dimInfos[M];if(B)return this._store.getByRawIndex(B.storeDimIndex,A)},E.prototype.getIndices=function(){return this._store.getIndices()},E.prototype.getDataExtent=function(M){return this._store.getDataExtent(this._getStoreDimIndex(M))},E.prototype.getSum=function(M){return this._store.getSum(this._getStoreDimIndex(M))},E.prototype.getMedian=function(M){return this._store.getMedian(this._getStoreDimIndex(M))},E.prototype.getValues=function(M,A){var O=this,B=this._store;return ce.isArray(M)?B.getValues($(M,function(ue){return O._getStoreDimIndex(ue)}),A):B.getValues(M)},E.prototype.hasValue=function(M){for(var A=this._dimSummary.dataDimIndicesOnCoord,O=0,B=A.length;O<B;O++)if(isNaN(this._store.get(A[O],M)))return!1;return!0},E.prototype.indexOfName=function(M){for(var A=0,O=this._store.count();A<O;A++)if(this.getName(A)===M)return A;return-1},E.prototype.getRawIndex=function(M){return this._store.getRawIndex(M)},E.prototype.indexOfRawIndex=function(M){return this._store.indexOfRawIndex(M)},E.prototype.rawIndexOf=function(M,A){var B=(M&&this._invertedIndicesMap[M])[A];return null==B||isNaN(B)?-1:B},E.prototype.indicesOfNearest=function(M,A,O){return this._store.indicesOfNearest(this._getStoreDimIndex(M),A,O)},E.prototype.each=function(M,A,O){ce.isFunction(M)&&(O=A,A=M,M=[]);var B=O||this,ue=$(W(M),this._getStoreDimIndex,this);this._store.each(ue,B?ce.bind(A,B):A)},E.prototype.filterSelf=function(M,A,O){ce.isFunction(M)&&(O=A,A=M,M=[]);var B=O||this,ue=$(W(M),this._getStoreDimIndex,this);return this._store=this._store.filter(ue,B?ce.bind(A,B):A),this},E.prototype.selectRange=function(M){var A=this,O={},B=ce.keys(M),ue=[];return ce.each(B,function(ae){var oe=A._getStoreDimIndex(ae);O[oe]=M[ae],ue.push(oe)}),this._store=this._store.selectRange(O),this},E.prototype.mapArray=function(M,A,O){ce.isFunction(M)&&(O=A,A=M,M=[]);var B=[];return this.each(M,function(){B.push(A&&A.apply(this,arguments))},O=O||this),B},E.prototype.map=function(M,A,O,B){var ue=O||B||this,ae=$(W(M),this._getStoreDimIndex,this),oe=V(this);return oe._store=this._store.map(ae,ue?ce.bind(A,ue):A),oe},E.prototype.modify=function(M,A,O,B){var ae=O||B||this,oe=$(W(M),this._getStoreDimIndex,this);this._store.modify(oe,ae?ce.bind(A,ae):A)},E.prototype.downSample=function(M,A,O,B){var ue=V(this);return ue._store=this._store.downSample(this._getStoreDimIndex(M),A,O,B),ue},E.prototype.lttbDownSample=function(M,A){var O=V(this);return O._store=this._store.lttbDownSample(this._getStoreDimIndex(M),A),O},E.prototype.getRawDataItem=function(M){return this._store.getRawDataItem(M)},E.prototype.getItemModel=function(M){var A=this.hostModel,O=this.getRawDataItem(M);return new Se.Z(O,A,A&&A.ecModel)},E.prototype.diff=function(M){var A=this;return new le.Z(M?M.getStore().getIndices():[],this.getStore().getIndices(),function(O){return q(M,O)},function(O){return q(A,O)})},E.prototype.getVisual=function(M){var A=this._visual;return A&&A[M]},E.prototype.setVisual=function(M,A){this._visual=this._visual||{},ee(M)?ce.extend(this._visual,M):this._visual[M]=A},E.prototype.getItemVisual=function(M,A){var O=this._itemVisuals[M];return(O&&O[A])??this.getVisual(A)},E.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},E.prototype.ensureUniqueItemVisual=function(M,A){var O=this._itemVisuals,B=O[M];B||(B=O[M]={});var ue=B[A];return null==ue&&(ue=this.getVisual(A),ce.isArray(ue)?ue=ue.slice():ee(ue)&&(ue=ce.extend({},ue)),B[A]=ue),ue},E.prototype.setItemVisual=function(M,A,O){var B=this._itemVisuals[M]||{};this._itemVisuals[M]=B,ee(A)?ce.extend(B,A):B[A]=O},E.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},E.prototype.setLayout=function(M,A){ee(M)?ce.extend(this._layout,M):this._layout[M]=A},E.prototype.getLayout=function(M){return this._layout[M]},E.prototype.getItemLayout=function(M){return this._itemLayouts[M]},E.prototype.setItemLayout=function(M,A,O){this._itemLayouts[M]=O?ce.extend(this._itemLayouts[M]||{},A):A},E.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},E.prototype.setItemGraphicEl=function(M,A){(0,j.Q)(this.hostModel&&this.hostModel.seriesIndex,this.dataType,M,A),this._graphicEls[M]=A},E.prototype.getItemGraphicEl=function(M){return this._graphicEls[M]},E.prototype.eachItemGraphicEl=function(M,A){ce.each(this._graphicEls,function(O,B){O&&M&&M.call(A,O,B)})},E.prototype.cloneShallow=function(M){return M||(M=new E(this._schema?this._schema:$(this.dimensions,this._getDimInfo,this),this.hostModel)),J(M,this),M._store=this._store,M},E.prototype.wrapMethod=function(M,A){var O=this[M];!ce.isFunction(O)||(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(M),this[M]=function(){var B=O.apply(this,arguments);return A.apply(this,[B].concat(ce.slice(arguments)))})},E.internalField=(F=function(M){var A=M._invertedIndicesMap;ce.each(A,function(O,B){var ue=M._dimInfos[B],ae=ue.ordinalMeta,oe=M._store;if(ae){O=A[B]=new ie(ae.categories.length);for(var de=0;de<O.length;de++)O[de]=-1;for(de=0;de<oe.count();de++)O[oe.get(ue.storeDimIndex,de)]=de}})},G=function(M,A,O){return(0,he.U5)(M._getCategory(A,O),null)},q=function(M,A){var O=M._idList[A];return null==O&&null!=M._idDimIdx&&(O=G(M,M._idDimIdx,A)),null==O&&(O="e\0\0"+A),O},W=function(M){return ce.isArray(M)||(M=null!=M?[M]:[]),M},V=function(M){var A=new E(M._schema?M._schema:$(M.dimensions,M._getDimInfo,M),M.hostModel);return J(A,M),A},J=function(M,A){ce.each(Y.concat(A.__wrappedMethods||[]),function(O){A.hasOwnProperty(O)&&(M[O]=A[O])}),M.__wrappedMethods=A.__wrappedMethods,ce.each(Q,function(O){M[O]=ce.clone(A[O])}),M._calculationInfo=ce.extend({},A._calculationInfo)},void(P=function(M,A){var O=M._nameList,B=M._idList,ue=M._nameDimIdx,ae=M._idDimIdx,oe=O[A],de=B[A];if(null==oe&&null!=ue&&(O[A]=oe=G(M,ue,A)),null==de&&null!=ae&&(B[A]=de=G(M,ae,A)),null==de&&null!=oe){var te=M._nameRepeatCount,xe=te[oe]=(te[oe]||0)+1;de=oe,xe>1&&(de+="__ec__"+xe),B[A]=de}})),E}()},7843:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>le});var ce=z(628);const le=function ye(ve){this.otherDims={},null!=ve&&ce.extend(this,ve)}},7079:(Bt,Qe,z)=>{z.d(Qe,{Kp:()=>X,Ld:()=>be,ML:()=>j,QY:()=>ie,_P:()=>Ce,nx:()=>he});var ce=z(628),Se=z(4367),le=z(1266),ye=z(6153),ve=function K(b){this.data=b.data||(b.sourceFormat===Se.hL?{}:[]),this.sourceFormat=b.sourceFormat||Se.RA,this.seriesLayoutBy=b.seriesLayoutBy||Se.fY,this.startIndex=b.startIndex||0,this.dimensionsDetectedCount=b.dimensionsDetectedCount,this.metaRawOption=b.metaRawOption;var Y=this.dimensionsDefine=b.dimensionsDefine;if(Y)for(var Q=0;Q<Y.length;Q++){var F=Y[Q];null==F.type&&(0,ye.u7)(this,Q)===ye.Dq.Must&&(F.type="ordinal")}};function be(K){return K instanceof ve}function Ce(K,b,Y){Y=Y||X(K);var Q=b.seriesLayoutBy,F=function re(K,b,Y,Q,F){var q,G;if(!K)return{dimensionsDefine:ee(F),startIndex:G,dimensionsDetectedCount:q};if(b===Se.XD){var W=K;"auto"===Q||null==Q?$(function(V){null!=V&&"-"!==V&&((0,ce.isString)(V)?null==G&&(G=1):G=0)},Y,W,10):G=(0,ce.isNumber)(Q)?Q:Q?1:0,!F&&1===G&&(F=[],$(function(V,P){F[P]=null!=V?V+"":""},Y,W,1/0)),q=F?F.length:Y===Se.Wc?W.length:W[0]?W[0].length:null}else if(b===Se.qb)F||(F=function U(K){for(var Y,b=0;b<K.length&&!(Y=K[b++]););if(Y){var Q=[];return(0,ce.each)(Y,function(F,q){Q.push(q)}),Q}}(K));else if(b===Se.hL)F||(F=[],(0,ce.each)(K,function(V,P){F.push(P)}));else if(b===Se.cy){var J=(0,le.C4)(K[0]);q=(0,ce.isArray)(J)&&J.length||1}return{startIndex:G,dimensionsDefine:ee(F),dimensionsDetectedCount:q}}(K,Y,Q,b.sourceHeader,b.dimensions);return new ve({data:K,sourceFormat:Y,seriesLayoutBy:Q,dimensionsDefine:F.dimensionsDefine,startIndex:F.startIndex,dimensionsDetectedCount:F.dimensionsDetectedCount,metaRawOption:(0,ce.clone)(b)})}function he(K){return new ve({data:K,sourceFormat:(0,ce.isTypedArray)(K)?Se.J5:Se.cy})}function j(K){return new ve({data:K.data,sourceFormat:K.sourceFormat,seriesLayoutBy:K.seriesLayoutBy,dimensionsDefine:(0,ce.clone)(K.dimensionsDefine),startIndex:K.startIndex,dimensionsDetectedCount:K.dimensionsDetectedCount})}function X(K){var b=Se.RA;if((0,ce.isTypedArray)(K))b=Se.J5;else if((0,ce.isArray)(K)){0===K.length&&(b=Se.XD);for(var Y=0,Q=K.length;Y<Q;Y++){var F=K[Y];if(null!=F){if((0,ce.isArray)(F)){b=Se.XD;break}if((0,ce.isObject)(F)){b=Se.qb;break}}}}else if((0,ce.isObject)(K))for(var q in K)if((0,ce.hasOwn)(K,q)&&(0,ce.isArrayLike)(K[q])){b=Se.hL;break}return b}function ee(K){if(K){var b=(0,ce.createHashMap)();return(0,ce.map)(K,function(Y,Q){var F={name:(Y=(0,ce.isObject)(Y)?Y:{name:Y}).name,displayName:Y.displayName,type:Y.type};if(null==F.name)return F;F.name+="",null==F.displayName&&(F.displayName=F.name);var q=b.get(F.name);return q?F.name+="-"+q.count++:b.set(F.name,{count:1}),F})}}function $(K,b,Y,Q){if(b===Se.Wc)for(var F=0;F<Y.length&&F<Q;F++)K(Y[F]?Y[F][0]:null,F);else{var q=Y[0]||[];for(F=0;F<q.length&&F<Q;F++)K(q[F],F)}}function ie(K){var b=K.sourceFormat;return b===Se.qb||b===Se.hL}},4735:(Bt,Qe,z)=>{z.d(Qe,{Eo:()=>be,Jj:()=>j,Jl:()=>X,bB:()=>Ce,v5:()=>he});var ce=z(628),Se=z(1266),le=z(7079),ye=(0,Se.Yf)(),ve={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},be=function(){function re(U){this.dimensions=U.dimensions,this._dimOmitted=U.dimensionOmitted,this.source=U.source,this._fullDimCount=U.fullDimensionCount,this._updateDimOmitted(U.dimensionOmitted)}return re.prototype.isDimensionOmitted=function(){return this._dimOmitted},re.prototype._updateDimOmitted=function(U){this._dimOmitted=U,U&&(this._dimNameMap||(this._dimNameMap=j(this.source)))},re.prototype.getSourceDimensionIndex=function(U){return(0,ce.retrieve2)(this._dimNameMap.get(U),-1)},re.prototype.getSourceDimension=function(U){var ee=this.source.dimensionsDefine;if(ee)return ee[U]},re.prototype.makeStoreSchema=function(){for(var U=this._fullDimCount,ee=(0,le.QY)(this.source),$=!X(U),ie="",K=[],b=0,Y=0;b<U;b++){var Q=void 0,F=void 0,q=void 0,G=this.dimensions[Y];if(G&&G.storeDimIndex===b)Q=ee?G.name:null,F=G.type,q=G.ordinalMeta,Y++;else{var W=this.getSourceDimension(b);W&&(Q=ee?W.name:null,F=W.type)}K.push({property:Q,type:F,ordinalMeta:q}),ee&&null!=Q&&(!G||!G.isCalculationCoord)&&(ie+=$?Q.replace(/\`/g,"`1").replace(/\$/g,"`2"):Q),ie+="$",ie+=ve[F]||"f",q&&(ie+=q.uid),ie+="$"}var J=this.source;return{dimensions:K,hash:[J.seriesLayoutBy,J.startIndex,ie].join("$$")}},re.prototype.makeOutputDimensionNames=function(){for(var U=[],ee=0,$=0;ee<this._fullDimCount;ee++){var ie=void 0,K=this.dimensions[$];if(K&&K.storeDimIndex===ee)K.isCalculationCoord||(ie=K.name),$++;else{var b=this.getSourceDimension(ee);b&&(ie=b.name)}U.push(ie)}return U},re.prototype.appendCalculationDimension=function(U){this.dimensions.push(U),U.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},re}();function Ce(re){return re instanceof be}function he(re){for(var U=(0,ce.createHashMap)(),ee=0;ee<(re||[]).length;ee++){var $=re[ee],ie=(0,ce.isObject)($)?$.name:$;null!=ie&&null==U.get(ie)&&U.set(ie,ee)}return U}function j(re){var U=ye(re);return U.dimNameMap||(U.dimNameMap=he(re.dimensionsDefine))}function X(re){return re>30}},9178:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>X,q:()=>j});var ce=z(4367),Se=z(7843),le=z(628),ye=z(7079),ve=z(9762),be=z(1266),Ce=z(6153),he=z(4735);function j($,ie){return X($,ie).dimensions}function X($,ie){(0,ye.Ld)($)||($=(0,ye.nx)($));var K=(ie=ie||{}).coordDimensions||[],b=ie.dimensionsDefine||$.dimensionsDefine||[],Y=(0,le.createHashMap)(),Q=[],F=function U($,ie,K,b){var Y=Math.max($.dimensionsDetectedCount||1,ie.length,K.length,b||0);return(0,le.each)(ie,function(Q){var F;(0,le.isObject)(Q)&&(F=Q.dimsDef)&&(Y=Math.max(Y,F.length))}),Y}($,K,b,ie.dimensionsCount),q=ie.canOmitUnusedDimensions&&(0,he.Jl)(F),G=b===$.dimensionsDefine,W=G?(0,he.Jj)($):(0,he.v5)(b),J=ie.encodeDefine;!J&&ie.encodeDefaulter&&(J=ie.encodeDefaulter($,F));for(var V=(0,le.createHashMap)(J),P=new ve.hG(F),T=0;T<P.length;T++)P[T]=-1;function R(xe){var fe=P[xe];if(fe<0){var ge=b[xe],we=(0,le.isObject)(ge)?ge:{name:ge},Te=new Se.Z,Ae=we.name;return null!=Ae&&null!=W.get(Ae)&&(Te.name=Te.displayName=Ae),null!=we.type&&(Te.type=we.type),null!=we.displayName&&(Te.displayName=we.displayName),P[xe]=Q.length,Te.storeDimIndex=xe,Q.push(Te),Te}return Q[fe]}if(!q)for(T=0;T<F;T++)R(T);V.each(function(xe,fe){var ge=(0,be.kF)(xe).slice();if(1===ge.length&&!(0,le.isString)(ge[0])&&ge[0]<0)V.set(fe,!1);else{var we=V.set(fe,[]);(0,le.each)(ge,function(Te,Ae){var Ee=(0,le.isString)(Te)?W.get(Te):Te;null!=Ee&&Ee<F&&(we[Ae]=Ee,M(R(Ee),fe,Ae))})}});var E=0;function M(xe,fe,ge){null!=ce.f7.get(fe)?xe.otherDims[fe]=ge:(xe.coordDim=fe,xe.coordDimIndex=ge,Y.set(fe,!0))}(0,le.each)(K,function(xe){var fe,ge,we,Te;if((0,le.isString)(xe))fe=xe,Te={};else{fe=(Te=xe).name;var Ae=Te.ordinalMeta;Te.ordinalMeta=null,(Te=(0,le.extend)({},Te)).ordinalMeta=Ae,ge=Te.dimsDef,we=Te.otherDims,Te.name=Te.coordDim=Te.coordDimIndex=Te.dimsDef=Te.otherDims=null}var Ee=V.get(fe);if(!1!==Ee){if(!(Ee=(0,be.kF)(Ee)).length)for(var Ve=0;Ve<(ge&&ge.length||1);Ve++){for(;E<F&&null!=R(E).coordDim;)E++;E<F&&Ee.push(E++)}(0,le.each)(Ee,function(He,We){var $e=R(He);if(G&&null!=Te.type&&($e.type=Te.type),M((0,le.defaults)($e,Te),fe,We),null==$e.name&&ge){var lt=ge[We];!(0,le.isObject)(lt)&&(lt={name:lt}),$e.name=$e.displayName=lt.name,$e.defaultTooltip=lt.defaultTooltip}we&&(0,le.defaults)($e.otherDims,we)})}});var A=ie.generateCoord,O=ie.generateCoordCount,B=null!=O;O=A?O||1:0;var ue=A||"value";function ae(xe){null==xe.name&&(xe.name=xe.coordDim)}if(q)(0,le.each)(Q,function(xe){ae(xe)}),Q.sort(function(xe,fe){return xe.storeDimIndex-fe.storeDimIndex});else for(var oe=0;oe<F;oe++){var de=R(oe);null==de.coordDim&&(de.coordDim=ee(ue,Y,B),de.coordDimIndex=0,(!A||O<=0)&&(de.isExtraCoord=!0),O--),ae(de),null==de.type&&((0,Ce.u7)($,oe)===Ce.Dq.Must||de.isExtraCoord&&(null!=de.otherDims.itemName||null!=de.otherDims.seriesName))&&(de.type="ordinal")}return function re($){for(var ie=(0,le.createHashMap)(),K=0;K<$.length;K++){var b=$[K],Y=b.name,Q=ie.get(Y)||0;Q>0&&(b.name=Y+(Q-1)),Q++,ie.set(Y,Q)}}(Q),new he.Eo({source:$,dimensions:Q,fullDimensionCount:F,dimensionOmitted:q})}function ee($,ie,K){var b=ie.data;if(K||b.hasOwnProperty($)){for(var Y=0;b.hasOwnProperty($+Y);)Y++;$+=Y}return ie.set($,!0),$}},67:(Bt,Qe,z)=>{z.d(Qe,{Pl:()=>X,_j:()=>ee,a:()=>K,hk:()=>q,tB:()=>Q});var ve,be,Ce,he,j,ce=z(628),Se=z(1266),le=z(7079),ye=z(4367),X=function(){function W(J,V){var P=(0,le.Ld)(J)?J:(0,le.nx)(J);this._source=P;var T=this._data=P.data;P.sourceFormat===ye.J5&&(this._offset=0,this._dimSize=V,this._data=T),j(this,T,P)}return W.prototype.getSource=function(){return this._source},W.prototype.count=function(){return 0},W.prototype.getItem=function(J,V){},W.prototype.appendData=function(J){},W.prototype.clean=function(){},W.protoInitialize=((J=W.prototype).pure=!1,void(J.persistent=!0)),W.internalField=function(){var J;j=function(E,M,A){var O=A.sourceFormat,B=A.seriesLayoutBy,ue=A.startIndex,ae=A.dimensionsDefine,oe=he[F(O,B)];if((0,ce.extend)(E,oe),O===ye.J5)E.getItem=V,E.count=T,E.fillStorage=P;else{var de=ee(O,B);E.getItem=(0,ce.bind)(de,null,M,ue,ae);var te=K(O,B);E.count=(0,ce.bind)(te,null,M,ue,ae)}};var V=function(E,M){M=M||[];for(var A=this._data,O=this._dimSize,B=O*(E-=this._offset),ue=0;ue<O;ue++)M[ue]=A[B+ue];return M},P=function(E,M,A,O){for(var B=this._data,ue=this._dimSize,ae=0;ae<ue;ae++){for(var oe=O[ae],de=oe[0]??1/0,te=oe[1]??-1/0,xe=M-E,fe=A[ae],ge=0;ge<xe;ge++){var we=B[ge*ue+ae];fe[E+ge]=we,we<de&&(de=we),we>te&&(te=we)}oe[0]=de,oe[1]=te}},T=function(){return this._data?this._data.length/this._dimSize:0};function R(E){for(var M=0;M<E.length;M++)this._data.push(E[M])}(J={})[ye.XD+"_"+ye.fY]={pure:!0,appendData:R},J[ye.XD+"_"+ye.Wc]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},J[ye.qb]={pure:!0,appendData:R},J[ye.hL]={pure:!0,appendData:function(E){var M=this._data;(0,ce.each)(E,function(A,O){for(var B=M[O]||(M[O]=[]),ue=0;ue<(A||[]).length;ue++)B.push(A[ue])})}},J[ye.cy]={appendData:R},J[ye.J5]={persistent:!1,pure:!0,appendData:function(E){this._data=E},clean:function(){this._offset+=this.count(),this._data=null}},he=J}(),W;var J}(),re=function(W,J,V,P){return W[P]},U=((ve={})[ye.XD+"_"+ye.fY]=function(W,J,V,P){return W[P+J]},ve[ye.XD+"_"+ye.Wc]=function(W,J,V,P,T){P+=J;for(var R=T||[],E=W,M=0;M<E.length;M++){var A=E[M];R[M]=A?A[P]:null}return R},ve[ye.qb]=re,ve[ye.hL]=function(W,J,V,P,T){for(var R=T||[],E=0;E<V.length;E++){var A=W[V[E].name];R[E]=A?A[P]:null}return R},ve[ye.cy]=re,ve);function ee(W,J){return U[F(W,J)]}var $=function(W,J,V){return W.length},ie=((be={})[ye.XD+"_"+ye.fY]=function(W,J,V){return Math.max(0,W.length-J)},be[ye.XD+"_"+ye.Wc]=function(W,J,V){var P=W[0];return P?Math.max(0,P.length-J):0},be[ye.qb]=$,be[ye.hL]=function(W,J,V){var T=W[V[0].name];return T?T.length:0},be[ye.cy]=$,be);function K(W,J){return ie[F(W,J)]}var b=function(W,J,V){return W[J]},Y=((Ce={})[ye.XD]=b,Ce[ye.qb]=function(W,J,V){return W[V]},Ce[ye.hL]=b,Ce[ye.cy]=function(W,J,V){var P=(0,Se.C4)(W);return P instanceof Array?P[J]:P},Ce[ye.J5]=b,Ce);function Q(W){return Y[W]}function F(W,J){return W===ye.XD?W+"_"+J:W}function q(W,J,V){if(W){var P=W.getRawDataItem(J);if(null!=P){var T=W.getStore(),R=T.getSource().sourceFormat;if(null!=V){var E=W.getDimensionIndex(V),M=T.getDimensionProperty(E);return Q(R)(P,E,M)}var A=P;return R===ye.cy&&(A=(0,Se.C4)(P)),A}}}},143:(Bt,Qe,z)=>{z.d(Qe,{BM:()=>le,IR:()=>be,M:()=>ve});var ce=z(628),Se=z(4735);function le(Ce,he,j){var U,ee,$,X=(j=j||{}).byIndex,re=j.stackedCoordDimension;!function ye(Ce){return!(0,Se.bB)(Ce.schema)}(he)?(U=(ee=he.schema).dimensions,$=he.store):U=he;var K,b,Y,Q,ie=!(!Ce||!Ce.get("stack"));if((0,ce.each)(U,function(V,P){(0,ce.isString)(V)&&(U[P]=V={name:V}),ie&&!V.isExtraCoord&&(!X&&!K&&V.ordinalMeta&&(K=V),!b&&"ordinal"!==V.type&&"time"!==V.type&&(!re||re===V.coordDim)&&(b=V))}),b&&!X&&!K&&(X=!0),b){Y="__\0ecstackresult_"+Ce.id,Q="__\0ecstackedover_"+Ce.id,K&&(K.createInvertedIndices=!0);var F=b.coordDim,q=b.type,G=0;(0,ce.each)(U,function(V){V.coordDim===F&&G++});var W={name:Y,coordDim:F,coordDimIndex:G,type:q,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:U.length},J={name:Q,coordDim:Q,coordDimIndex:G+1,type:q,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:U.length+1};ee?($&&(W.storeDimIndex=$.ensureCalculationDimension(Q,q),J.storeDimIndex=$.ensureCalculationDimension(Y,q)),ee.appendCalculationDimension(W),ee.appendCalculationDimension(J)):(U.push(W),U.push(J))}return{stackedDimension:b&&b.name,stackedByDimension:K&&K.name,isStackedByIndex:X,stackedOverDimension:Q,stackResultDimension:Y}}function ve(Ce,he){return!!he&&he===Ce.getCalculationInfo("stackedDimension")}function be(Ce,he){return ve(Ce,he)?Ce.getCalculationInfo("stackResultDimension"):he}},4066:(Bt,Qe,z)=>{z.d(Qe,{ID:()=>j,o2:()=>be,tR:()=>re,yQ:()=>ye});var ce=z(4785),Se=z(628),le=z(5577);function ye(U,ee){var $=ee&&ee.type;return"ordinal"===$?U:("time"===$&&!(0,Se.isNumber)(U)&&null!=U&&"-"!==U&&(U=+(0,ce.sG)(U)),null==U||""===U?NaN:+U)}var ve=(0,Se.createHashMap)({number:function(U){return parseFloat(U)},time:function(U){return+(0,ce.sG)(U)},trim:function(U){return(0,Se.isString)(U)?(0,Se.trim)(U):U}});function be(U){return ve.get(U)}var Ce={lt:function(U,ee){return U<ee},lte:function(U,ee){return U<=ee},gt:function(U,ee){return U>ee},gte:function(U,ee){return U>=ee}},he=function(){function U(ee,$){(0,Se.isNumber)($)||(0,le._y)(""),this._opFn=Ce[ee],this._rvalFloat=(0,ce.FK)($)}return U.prototype.evaluate=function(ee){return(0,Se.isNumber)(ee)?this._opFn(ee,this._rvalFloat):this._opFn((0,ce.FK)(ee),this._rvalFloat)},U}(),j=function(){function U(ee,$){var ie="desc"===ee;this._resultLT=ie?1:-1,null==$&&($=ie?"min":"max"),this._incomparable="min"===$?-1/0:1/0}return U.prototype.evaluate=function(ee,$){var ie=(0,Se.isNumber)(ee)?ee:(0,ce.FK)(ee),K=(0,Se.isNumber)($)?$:(0,ce.FK)($),b=isNaN(ie),Y=isNaN(K);if(b&&(ie=this._incomparable),Y&&(K=this._incomparable),b&&Y){var Q=(0,Se.isString)(ee),F=(0,Se.isString)($);Q&&(ie=F?ee:0),F&&(K=Q?$:0)}return ie<K?this._resultLT:ie>K?-this._resultLT:0},U}(),X=function(){function U(ee,$){this._rval=$,this._isEQ=ee,this._rvalTypeof=typeof $,this._rvalFloat=(0,ce.FK)($)}return U.prototype.evaluate=function(ee){var $=ee===this._rval;if(!$){var ie=typeof ee;ie!==this._rvalTypeof&&("number"===ie||"number"===this._rvalTypeof)&&($=(0,ce.FK)(ee)===this._rvalFloat)}return this._isEQ?$:!$},U}();function re(U,ee){return"eq"===U||"ne"===U?new X("eq"===U,ee):(0,Se.hasOwn)(Ce,U)?new he(U,ee):null}},1577:(Bt,Qe,z)=>{z.d(Qe,{T:()=>be,y:()=>ye});var ce=z(628),Se=z(4367),le=function(){function he(j,X){this._encode=j,this._schema=X}return he.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},he.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},he}();function ye(he,j){var X={},re=X.encode={},U=(0,ce.createHashMap)(),ee=[],$=[],ie={};(0,ce.each)(he.dimensions,function(F){var q=he.getDimensionInfo(F),G=q.coordDim;if(G){var W=q.coordDimIndex;ve(re,G)[W]=F,q.isExtraCoord||(U.set(G,1),function Ce(he){return!("ordinal"===he||"time"===he)}(q.type)&&(ee[0]=F),ve(ie,G)[W]=he.getDimensionIndex(q.name)),q.defaultTooltip&&$.push(F)}Se.f7.each(function(J,V){var P=ve(re,V),T=q.otherDims[V];null!=T&&!1!==T&&(P[T]=q.name)})});var K=[],b={};U.each(function(F,q){var G=re[q];b[q]=G[0],K=K.concat(G)}),X.dataDimsOnCoord=K,X.dataDimIndicesOnCoord=(0,ce.map)(K,function(F){return he.getDimensionInfo(F).storeDimIndex}),X.encodeFirstDimNotExtra=b;var Y=re.label;Y&&Y.length&&(ee=Y.slice());var Q=re.tooltip;return Q&&Q.length?$=Q.slice():$.length||($=ee.slice()),re.defaultedLabel=ee,re.defaultedTooltip=$,X.userOutput=new le(ie,j),X}function ve(he,j){return he.hasOwnProperty(j)||(he[j]=[]),he[j]}function be(he){return"category"===he?"ordinal":"time"===he?"time":"float"}},4844:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>ee});var ce=z(628),le=(0,z(1266).Yf)();function ve($,ie){if(function X($){return le($).mainData===$}(this)){var K=(0,ce.extend)({},le(this).datas);K[this.dataType]=ie,re(ie,K,$)}else U(ie,this.dataType,le(this).mainData,$);return ie}function be($,ie){return $.struct&&$.struct.update(),ie}function Ce($,ie){return(0,ce.each)(le(ie).datas,function(K,b){K!==ie&&U(K.cloneShallow(),b,ie,$)}),ie}function he($){var ie=le(this).mainData;return null==$||null==ie?ie:le(ie).datas[$]}function j(){var $=le(this).mainData;return null==$?[{data:$}]:(0,ce.map)((0,ce.keys)(le($).datas),function(ie){return{type:ie,data:le($).datas[ie]}})}function re($,ie,K){le($).datas={},(0,ce.each)(ie,function(b,Y){U(b,Y,$,K)})}function U($,ie,K,b){le(K).datas[ie]=$,le($).mainData=K,$.dataType=ie,b.struct&&($[b.structAttr]=b.struct,b.struct[b.datasAttr[ie]]=$),$.getLinkedData=he,$.getLinkedDataAll=j}const ee=function ye($){var ie=$.mainData,K=$.datas;K||(K={main:ie},$.datasAttr={main:"data"}),$.datas=$.mainData=null,re(ie,K,$),(0,ce.each)(K,function(b){(0,ce.each)(ie.TRANSFERABLE_METHODS,function(Y){b.wrapMethod(Y,(0,ce.curry)(ve,$))})}),ie.wrapMethod("cloneShallow",(0,ce.curry)(Ce,$)),(0,ce.each)(ie.CHANGABLE_METHODS,function(b){ie.wrapMethod(b,(0,ce.curry)(be,$))}),(0,ce.assert)(K[ie.dataType]===ie)}},6153:(Bt,Qe,z)=>{z.d(Qe,{Dq:()=>ye,JT:()=>X,Ss:()=>he,Wd:()=>j,md:()=>be,pY:()=>Ce,u7:()=>re});var ce=z(1266),Se=z(628),le=z(4367),ye={Must:1,Might:2,Not:3},ve=(0,ce.Yf)();function be(ee){ve(ee).datasetMap=(0,Se.createHashMap)()}function Ce(ee,$,ie){var K={},b=j($);if(!b||!ee)return K;var W,J,Y=[],Q=[],q=ve($.ecModel).datasetMap,G=b.uid+"_"+ie.seriesLayoutBy;ee=ee.slice(),(0,Se.each)(ee,function(R,E){var M=(0,Se.isObject)(R)?R:ee[E]={name:R};"ordinal"===M.type&&null==W&&(W=E,J=T(M)),K[M.name]=[]});var V=q.get(G)||q.set(G,{categoryWayDim:J,valueWayDim:0});function P(R,E,M){for(var A=0;A<M;A++)R.push(E+A)}function T(R){var E=R.dimsDef;return E?E.length:1}return(0,Se.each)(ee,function(R,E){var M=R.name,A=T(R);if(null==W)P(K[M],O=V.valueWayDim,A),P(Q,O,A),V.valueWayDim+=A;else if(W===E)P(K[M],0,A),P(Y,0,A);else{var O;P(K[M],O=V.categoryWayDim,A),P(Q,O,A),V.categoryWayDim+=A}}),Y.length&&(K.itemName=Y),Q.length&&(K.seriesName=Q),K}function he(ee,$,ie){var K={};if(!j(ee))return K;var F,Y=$.sourceFormat,Q=$.dimensionsDefine;(Y===le.qb||Y===le.hL)&&(0,Se.each)(Q,function(W,J){"name"===((0,Se.isObject)(W)?W.name:W)&&(F=J)});var q=function(){for(var W={},J={},V=[],P=0,T=Math.min(5,ie);P<T;P++){var R=U($.data,Y,$.seriesLayoutBy,Q,$.startIndex,P);V.push(R);var E=R===ye.Not;if(E&&null==W.v&&P!==F&&(W.v=P),(null==W.n||W.n===W.v||!E&&V[W.n]===ye.Not)&&(W.n=P),M(W)&&V[W.n]!==ye.Not)return W;E||(R===ye.Might&&null==J.v&&P!==F&&(J.v=P),(null==J.n||J.n===J.v)&&(J.n=P))}function M(A){return null!=A.v&&null!=A.n}return M(W)?W:M(J)?J:null}();if(q){K.value=[q.v];var G=F??q.n;K.itemName=[G],K.seriesName=[G]}return K}function j(ee){if(!ee.get("data",!0))return(0,ce.HZ)(ee.ecModel,"dataset",{index:ee.get("datasetIndex",!0),id:ee.get("datasetId",!0)},ce.C6).models[0]}function X(ee){return ee.get("transform",!0)||ee.get("fromTransformResult",!0)?(0,ce.HZ)(ee.ecModel,"dataset",{index:ee.get("fromDatasetIndex",!0),id:ee.get("fromDatasetId",!0)},ce.C6).models:[]}function re(ee,$){return U(ee.data,ee.sourceFormat,ee.seriesLayoutBy,ee.dimensionsDefine,ee.startIndex,$)}function U(ee,$,ie,K,b,Y){var Q,q,G;if((0,Se.isTypedArray)(ee))return ye.Not;if(K){var W=K[Y];(0,Se.isObject)(W)?(q=W.name,G=W.type):(0,Se.isString)(W)&&(q=W)}if(null!=G)return"ordinal"===G?ye.Must:ye.Not;if($===le.XD){var J=ee;if(ie===le.Wc){for(var V=J[Y],P=0;P<(V||[]).length&&P<5;P++)if(null!=(Q=B(V[b+P])))return Q}else for(P=0;P<J.length&&P<5;P++){var T=J[b+P];if(T&&null!=(Q=B(T[Y])))return Q}}else if($===le.qb){var R=ee;if(!q)return ye.Not;for(P=0;P<R.length&&P<5;P++)if((E=R[P])&&null!=(Q=B(E[q])))return Q}else if($===le.hL){if(!q)return ye.Not;if(!(V=ee[q])||(0,Se.isTypedArray)(V))return ye.Not;for(P=0;P<V.length&&P<5;P++)if(null!=(Q=B(V[P])))return Q}else if($===le.cy){var A=ee;for(P=0;P<A.length&&P<5;P++){var E,O=(0,ce.C4)(E=A[P]);if(!(0,Se.isArray)(O))return ye.Not;if(null!=(Q=B(O[Y])))return Q}}function B(ue){var ae=(0,Se.isString)(ue);return null!=ue&&isFinite(ue)&&""!==ue?ae?ye.Might:ye.Not:ae&&"-"!==ue?ye.Must:void 0}return ye.Not}},8003:(Bt,Qe,z)=>{z.d(Qe,{U:()=>he,t:()=>j});var ce=z(628),Se=z(7079),le=z(4367),ye=z(6153),ve=z(7664),be=z(9762),Ce=z(67),he=function(){function U(ee){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=ee}return U.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},U.prototype._setLocalSource=function(ee,$){this._sourceList=ee,this._upstreamSignList=$,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},U.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},U.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},U.prototype._createSource=function(){this._setLocalSource([],[]);var K,b,ee=this._sourceHost,$=this._getUpstreamSourceManagers(),ie=!!$.length;if(X(ee)){var Y=ee,Q=void 0,F=void 0,q=void 0;if(ie){var G=$[0];G.prepareSource(),Q=(q=G.getSource()).data,F=q.sourceFormat,b=[G._getVersionSign()]}else Q=Y.get("data",!0),F=(0,ce.isTypedArray)(Q)?le.J5:le.cy,b=[];var W=this._getSourceMetaRawOption()||{},J=q&&q.metaRawOption||{},V=(0,ce.retrieve2)(W.seriesLayoutBy,J.seriesLayoutBy)||null,P=(0,ce.retrieve2)(W.sourceHeader,J.sourceHeader),T=(0,ce.retrieve2)(W.dimensions,J.dimensions);K=V!==J.seriesLayoutBy||!!P!=!!J.sourceHeader||T?[(0,Se._P)(Q,{seriesLayoutBy:V,sourceHeader:P,dimensions:T},F)]:[]}else{var E=ee;if(ie){var M=this._applyTransform($);K=M.sourceList,b=M.upstreamSignList}else{var A=E.get("source",!0);K=[(0,Se._P)(A,this._getSourceMetaRawOption(),null)],b=[]}}this._setLocalSource(K,b)},U.prototype._applyTransform=function(ee){var $=this._sourceHost,ie=$.get("transform",!0),K=$.get("fromTransformResult",!0);null!=K&&1!==ee.length&&re("");var Y,Q=[],F=[];return(0,ce.each)(ee,function(q){q.prepareSource();var G=q.getSource(K||0);null!=K&&!G&&re(""),Q.push(G),F.push(q._getVersionSign())}),ie?Y=(0,ve.vK)(ie,Q,{datasetIndex:$.componentIndex}):null!=K&&(Y=[(0,Se.ML)(Q[0])]),{sourceList:Y,upstreamSignList:F}},U.prototype._isDirty=function(){if(this._dirty)return!0;for(var ee=this._getUpstreamSourceManagers(),$=0;$<ee.length;$++){var ie=ee[$];if(ie._isDirty()||this._upstreamSignList[$]!==ie._getVersionSign())return!0}},U.prototype.getSource=function(ee){var $=this._sourceList[ee=ee||0];if(!$){var ie=this._getUpstreamSourceManagers();return ie[0]&&ie[0].getSource(ee)}return $},U.prototype.getSharedDataStore=function(ee){var $=ee.makeStoreSchema();return this._innerGetDataStore($.dimensions,ee.source,$.hash)},U.prototype._innerGetDataStore=function(ee,$,ie){var b=this._storeList,Y=b[0];Y||(Y=b[0]={});var Q=Y[ie];if(!Q){var F=this._getUpstreamSourceManagers()[0];X(this._sourceHost)&&F?Q=F._innerGetDataStore(ee,$,ie):(Q=new be.ZP).initData(new Ce.Pl($,ee.length),ee),Y[ie]=Q}return Q},U.prototype._getUpstreamSourceManagers=function(){var ee=this._sourceHost;if(X(ee)){var $=(0,ye.Wd)(ee);return $?[$.getSourceManager()]:[]}return(0,ce.map)((0,ye.JT)(ee),function(ie){return ie.getSourceManager()})},U.prototype._getSourceMetaRawOption=function(){var $,ie,K,ee=this._sourceHost;if(X(ee))$=ee.get("seriesLayoutBy",!0),ie=ee.get("sourceHeader",!0),K=ee.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var b=ee;$=b.get("seriesLayoutBy",!0),ie=b.get("sourceHeader",!0),K=b.get("dimensions",!0)}return{seriesLayoutBy:$,sourceHeader:ie,dimensions:K}},U}();function j(U){U.option.transform&&(0,ce.setAsPrimitive)(U.option.transform)}function X(U){return"series"===U.mainType}function re(U){throw new Error(U)}},7664:(Bt,Qe,z)=>{z.d(Qe,{DA:()=>ie,vK:()=>K});var ce=z(4367),Se=z(1266),le=z(628),ye=z(67),ve=z(4066),be=z(5577),Ce=z(7079),he=function(){function Q(){}return Q.prototype.getRawData=function(){throw new Error("not supported")},Q.prototype.getRawDataItem=function(F){throw new Error("not supported")},Q.prototype.cloneRawData=function(){},Q.prototype.getDimensionInfo=function(F){},Q.prototype.cloneAllDimensionInfo=function(){},Q.prototype.count=function(){},Q.prototype.retrieveValue=function(F,q){},Q.prototype.retrieveValueFromItem=function(F,q){},Q.prototype.convertValue=function(F,q){return(0,ve.yQ)(F,q)},Q}();function X(Q){return Y(Q.sourceFormat)||(0,be._y)(""),Q.data}function re(Q){var F=Q.sourceFormat,q=Q.data;if(Y(F)||(0,be._y)(""),F===ce.XD){for(var W=[],J=0,V=q.length;J<V;J++)W.push(q[J].slice());return W}if(F===ce.qb){for(W=[],J=0,V=q.length;J<V;J++)W.push((0,le.extend)({},q[J]));return W}}function U(Q,F,q){if(null!=q){if((0,le.isNumber)(q)||!isNaN(q)&&!(0,le.hasOwn)(F,q))return Q[q];if((0,le.hasOwn)(F,q))return F[q]}}function ee(Q){return(0,le.clone)(Q)}var $=(0,le.createHashMap)();function ie(Q){var F=(Q=(0,le.clone)(Q)).type;F||(0,be._y)("");var G=F.split(":");2!==G.length&&(0,be._y)("");var W=!1;"echarts"===G[0]&&(F=G[1],W=!0),Q.__isBuiltIn=W,$.set(F,Q)}function K(Q,F,q){var G=(0,Se.kF)(Q),W=G.length;W||(0,be._y)("");for(var V=0,P=W;V<P;V++)F=b(G[V],F),V!==P-1&&(F.length=Math.max(F.length,1));return F}function b(Q,F,q,G){F.length||(0,be._y)(""),(0,le.isObject)(Q)||(0,be._y)("");var V=$.get(Q.type);V||(0,be._y)("");var P=(0,le.map)(F,function(E){return function j(Q,F){var q=new he,G=Q.data,W=q.sourceFormat=Q.sourceFormat,J=Q.startIndex;Q.seriesLayoutBy!==ce.fY&&(0,be._y)("");var P=[],T={},R=Q.dimensionsDefine;if(R)(0,le.each)(R,function(ue,ae){var oe=ue.name,de={index:ae,name:oe,displayName:ue.displayName};P.push(de),null!=oe&&((0,le.hasOwn)(T,oe)&&(0,be._y)(""),T[oe]=de)});else for(var E=0;E<Q.dimensionsDetectedCount;E++)P.push({index:E});var M=(0,ye._j)(W,ce.fY);F.__isBuiltIn&&(q.getRawDataItem=function(ue){return M(G,J,P,ue)},q.getRawData=(0,le.bind)(X,null,Q)),q.cloneRawData=(0,le.bind)(re,null,Q);var A=(0,ye.a)(W,ce.fY);q.count=(0,le.bind)(A,null,G,J,P);var O=(0,ye.tB)(W);q.retrieveValue=function(ue,ae){var oe=M(G,J,P,ue);return B(oe,ae)};var B=q.retrieveValueFromItem=function(ue,ae){if(null!=ue){var oe=P[ae];if(oe)return O(ue,ae,oe.name)}};return q.getDimensionInfo=(0,le.bind)(U,null,P,T),q.cloneAllDimensionInfo=(0,le.bind)(ee,null,P),q}(E,V)}),T=(0,Se.kF)(V.transform({upstream:P[0],upstreamList:P,config:(0,le.clone)(Q.config)}));return(0,le.map)(T,function(E,M){(0,le.isObject)(E)||(0,be._y)(""),E.data||(0,be._y)(""),Y((0,Ce.Kp)(E.data))||(0,be._y)("");var B,ue=F[0];if(ue&&0===M&&!E.dimensions){var ae=ue.startIndex;ae&&(E.data=ue.data.slice(0,ae).concat(E.data)),B={seriesLayoutBy:ce.fY,sourceHeader:ae,dimensions:ue.metaRawOption.dimensions}}else B={seriesLayoutBy:ce.fY,sourceHeader:0,dimensions:E.dimensions};return(0,Ce._P)(E.data,B,null)})}function Y(Q){return Q===ce.XD||Q===ce.qb}},3786:(Bt,Qe,z)=>{z.d(Qe,{RD:()=>jn.Z,TA:()=>re.Z,tF:()=>he.Z,Ir:()=>j.Z,aV:()=>U.Z,Hn:()=>G.Z,Hr:()=>Ce.Hr,wJ:()=>X.Z,$_:()=>b,$j:()=>Ce.$j,Ok:()=>Ce.Ok,HO:()=>Ce.HO,eU:()=>Ce.eU,zP:()=>Ce.zP,B9:()=>Ce.B9,OB:()=>On.Z,Zy:()=>fn,tv:()=>Dt,Sp:()=>Gt,Zr:()=>Rt,WU:()=>ve,wL:()=>Ce.wL,JE:()=>Ce.JE,rp:()=>Ce.rp,FU:()=>Ce.FU,Q:()=>ye,_y:()=>ce,S1:()=>Ce.S1,z$:()=>Je.RV,pI:()=>$,Rx:()=>Se,Nu:()=>de.Z,pQ:()=>de.Z,zl:()=>Ce.zl,RS:()=>Ce.RS,qR:()=>Ce.qR,yn:()=>Ce.yn,I2:()=>Ce.I2,je:()=>Ce.je,sq:()=>Ce.sq,Br:()=>Ce.Br,ds:()=>Ce.ds,Pu:()=>Ce.Pu,aW:()=>Ce.aW,rV:()=>Ce.OB,YK:()=>Ce.YK,Og:()=>Ce.Og,jQ:()=>Ce.jQ,g2:()=>oe.g2,P2:()=>Y.P2,XV:()=>le,D$:()=>ae.D,D5:()=>be,xr:()=>ie,i8:()=>Ce.i8,gf:()=>K,x_:()=>ee});var ce={};z.r(ce),z.d(ce,{createDimensions:()=>T.q,createList:()=>M,createScale:()=>O,createSymbol:()=>R.th,createTextStyle:()=>ue,dataStack:()=>A,enableHoverEmphasis:()=>E.vF,getECData:()=>V.A,getLayoutRect:()=>W.ME,mixinAxisModelCommonMethods:()=>B});var Se={};z.r(Se),z.d(Se,{MAX_SAFE_INTEGER:()=>te.YM,asc:()=>te.dt,getPercentWithPrecision:()=>te.eJ,getPixelPrecision:()=>te.M9,getPrecision:()=>te.p8,getPrecisionSafe:()=>te.ZB,isNumeric:()=>te.kE,isRadianAroundZero:()=>te.mW,linearMap:()=>te.NU,nice:()=>te.kx,numericToNumber:()=>te.FK,parseDate:()=>te.sG,quantile:()=>te.VR,quantity:()=>te.Xd,quantityExponent:()=>te.xW,reformIntervals:()=>te.nR,remRadian:()=>te.wW,round:()=>te.NM});var le={};z.r(le),z.d(le,{format:()=>xe.WU,parse:()=>te.sG});var ye={};z.r(ye),z.d(ye,{Arc:()=>Vt.Z,BezierCurve:()=>Ot.Z,BoundingRect:()=>Yn.Z,Circle:()=>Ee.Z,CompoundPath:()=>hn.Z,Ellipse:()=>Ve.Z,Group:()=>we.Z,Image:()=>Te.ZP,IncrementalDisplayable:()=>an.Z,Line:()=>_t.Z,LinearGradient:()=>Vn.Z,Polygon:()=>$e.Z,Polyline:()=>lt.Z,RadialGradient:()=>ar.Z,Rect:()=>St.Z,Ring:()=>We.Z,Sector:()=>He.C,Text:()=>Ae.ZP,clipPointsByRect:()=>fe.clipPointsByRect,clipRectByRect:()=>fe.clipRectByRect,createIcon:()=>fe.createIcon,extendPath:()=>fe.extendPath,extendShape:()=>fe.extendShape,getShapeClass:()=>fe.getShapeClass,getTransform:()=>fe.getTransform,initProps:()=>ge.KZ,makeImage:()=>fe.makeImage,makePath:()=>fe.makePath,mergePath:()=>fe.mergePath,registerShape:()=>fe.registerShape,resizePath:()=>fe.resizePath,updateProps:()=>ge.D});var ve={};z.r(ve),z.d(ve,{addCommas:()=>vr.OD,capitalFirst:()=>vr.ew,encodeHTML:()=>Qn.F1,formatTime:()=>vr.mr,formatTpl:()=>vr.kF,getTextRect:()=>un,getTooltipMarker:()=>vr.A0,normalizeCssArray:()=>vr.MY,toCamelCase:()=>vr.zW,truncateText:()=>$t.aF});var be={};z.r(be),z.d(be,{bind:()=>K.bind,clone:()=>K.clone,curry:()=>K.curry,defaults:()=>K.defaults,each:()=>K.each,extend:()=>K.extend,filter:()=>K.filter,indexOf:()=>K.indexOf,inherits:()=>K.inherits,isArray:()=>K.isArray,isFunction:()=>K.isFunction,isObject:()=>K.isObject,isString:()=>K.isString,map:()=>K.map,merge:()=>K.merge,reduce:()=>K.reduce});var Ce=z(5433),he=z(9447),j=z(9899),X=z(9521),re=z(1005),U=z(3241),ee=z(7806),$=z(3481),ie=z(8221),K=z(628),b=z(312),Y=z(357),Q=z(405),F=z(4174),q=z(2565),G=z(1725),W=z(634),J=z(143),V=z(7282),P=z(1081),T=z(9178),R=z(4550),E=z(6869);function M(fr){return(0,Q.Z)(null,fr)}var A={isDimensionStacked:J.M,enableDataStack:J.BM,getStackedDimension:J.IR};function O(fr,tt){var it=tt;tt instanceof G.Z||(it=new G.Z(tt));var at=F.aG(it);return at.setExtent(fr[0],fr[1]),F.Jk(at,it),at}function B(fr){K.mixin(fr,q.W)}function ue(fr,tt){return(0,P.Lr)(fr,null,null,"normal"!==(tt=tt||{}).state)}var ae=z(5199),oe=z(5730),de=z(119),te=z(4785),xe=z(999),fe=z(2429),ge=z(3802),we=z(8539),Te=z(6766),Ae=z(8208),Ee=z(9359),Ve=z(6743),He=z(9770),We=z(495),$e=z(3186),lt=z(7834),St=z(3160),_t=z(4110),Ot=z(6146),Vt=z(8234),an=z(3520),hn=z(1115),Vn=z(5910),ar=z(641),Yn=z(7021),vr=z(9706),Qn=z(2425),$t=z(7969);function un(fr,tt,it,at,je,vt,ht,Pt){return new Ae.ZP({style:{text:fr,font:tt,align:it,verticalAlign:at,padding:je,rich:vt,overflow:ht?"truncate":null,lineHeight:Pt}}).getBoundingRect()}var On=z(169),jn=z(6592),Je=z(9012);function Dt(fr){var tt=he.Z.extend(fr);return he.Z.registerClass(tt),tt}function Gt(fr){var tt=j.Z.extend(fr);return j.Z.registerClass(tt),tt}function Rt(fr){var tt=X.Z.extend(fr);return X.Z.registerClass(tt),tt}function fn(fr){var tt=re.Z.extend(fr);return re.Z.registerClass(tt),tt}var hr=z(6840);(0,ae.D)(hr.T)},5199:(Bt,Qe,z)=>{z.d(Qe,{D:()=>re});var ce=z(5433),Se=z(9899),le=z(1005),ye=z(9447),ve=z(9521),be=z(628),Ce=z(5831),he=z(7806),j=[],X={registerPreprocessor:ce.ds,registerProcessor:ce.Pu,registerPostInit:ce.sq,registerPostUpdate:ce.Br,registerUpdateLifecycle:ce.YK,registerAction:ce.zl,registerCoordinateSystem:ce.RS,registerLayout:ce.qR,registerVisual:ce.Og,registerTransform:ce.OB,registerLoading:ce.yn,registerMap:ce.je,registerImpl:Ce.M,PRIORITY:ce.Hr,ComponentModel:ye.Z,ComponentView:Se.Z,SeriesModel:ve.Z,ChartView:le.Z,registerComponentModel:function(U){ye.Z.registerClass(U)},registerComponentView:function(U){Se.Z.registerClass(U)},registerSeriesModel:function(U){ve.Z.registerClass(U)},registerChartView:function(U){le.Z.registerClass(U)},registerSubTypeDefaulter:function(U,ee){ye.Z.registerSubTypeDefaulter(U,ee)},registerPainter:function(U,ee){(0,he.registerPainter)(U,ee)}};function re(U){(0,be.isArray)(U)?(0,be.each)(U,function(ee){re(ee)}):(0,be.indexOf)(j,U)>=0||(j.push(U),(0,be.isFunction)(U)&&(U={install:U}),U.install(X))}},6840:(Bt,Qe,z)=>{z.d(Qe,{T:()=>G});var ce=z(1266),Se=z(7021),le=z(3802),ye=z(7282),ve=z(4785),be=z(9778),Ce=z(7521),he=z(628),j=z(1593),X=z(1081);function re(W){if(W){for(var J=[],V=0;V<W.length;V++)J.push(W[V].slice());return J}}function U(W,J){var V=W.label,P=J&&J.getTextGuideLine();return{dataIndex:W.dataIndex,dataType:W.dataType,seriesIndex:W.seriesModel.seriesIndex,text:W.label.style.text,rect:W.hostRect,labelRect:W.rect,align:V.style.align,verticalAlign:V.style.verticalAlign,labelLinePoints:re(P&&P.shape.points)}}var ee=["align","verticalAlign","width","height","fontSize"],$=new be.ZP,ie=(0,ce.Yf)(),K=(0,ce.Yf)();function b(W,J,V){for(var P=0;P<V.length;P++){var T=V[P];null!=J[T]&&(W[T]=J[T])}}var Y=["x","y","rotation"];const F=function(){function W(){this._labelList=[],this._chartViewList=[]}return W.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},W.prototype._addLabel=function(J,V,P,T,R){var E=T.style,A=T.__hostTarget.textConfig||{},O=T.getComputedTransform(),B=T.getBoundingRect().plain();Se.Z.applyTransform(B,B,O),O?$.setLocalTransform(O):($.x=$.y=$.rotation=$.originX=$.originY=0,$.scaleX=$.scaleY=1);var ae,ue=T.__hostTarget;if(ue){ae=ue.getBoundingRect().plain();var oe=ue.getComputedTransform();Se.Z.applyTransform(ae,ae,oe)}var de=ae&&ue.getTextGuideLine();this._labelList.push({label:T,labelLine:de,seriesModel:P,dataIndex:J,dataType:V,layoutOption:R,computedLayoutOption:null,rect:B,hostRect:ae,priority:ae?ae.width*ae.height:0,defaultAttr:{ignore:T.ignore,labelGuideIgnore:de&&de.ignore,x:$.x,y:$.y,scaleX:$.scaleX,scaleY:$.scaleY,rotation:$.rotation,style:{x:E.x,y:E.y,align:E.align,verticalAlign:E.verticalAlign,width:E.width,height:E.height,fontSize:E.fontSize},cursor:T.cursor,attachedPos:A.position,attachedRot:A.rotation}})},W.prototype.addLabelsOfSeries=function(J){var V=this;this._chartViewList.push(J);var P=J.__model,T=P.get("labelLayout");!(0,he.isFunction)(T)&&!(0,he.keys)(T).length||J.group.traverse(function(R){if(R.ignore)return!0;var E=R.getTextContent(),M=(0,ye.A)(R);E&&!E.disableLabelLayout&&V._addLabel(M.dataIndex,M.dataType,P,E,T)})},W.prototype.updateLayoutConfig=function(J){var V=J.getWidth(),P=J.getHeight();function T(we,Te){return function(){(0,Ce.d)(we,Te)}}for(var R=0;R<this._labelList.length;R++){var E=this._labelList[R],M=E.label,A=M.__hostTarget,O=E.defaultAttr,B=void 0;B=(0,he.isFunction)(E.layoutOption)?E.layoutOption(U(E,A)):E.layoutOption,E.computedLayoutOption=B=B||{};var ue=Math.PI/180;A&&A.setTextConfig({local:!1,position:null!=B.x||null!=B.y?null:O.attachedPos,rotation:null!=B.rotate?B.rotate*ue:O.attachedRot,offset:[B.dx||0,B.dy||0]});var ae=!1;if(null!=B.x?(M.x=(0,ve.GM)(B.x,V),M.setStyle("x",0),ae=!0):(M.x=O.x,M.setStyle("x",O.style.x)),null!=B.y?(M.y=(0,ve.GM)(B.y,P),M.setStyle("y",0),ae=!0):(M.y=O.y,M.setStyle("y",O.style.y)),B.labelLinePoints){var oe=A.getTextGuideLine();oe&&(oe.setShape({points:B.labelLinePoints}),ae=!1)}ie(M).needsUpdateLabelLine=ae,M.rotation=null!=B.rotate?B.rotate*ue:O.rotation,M.scaleX=O.scaleX,M.scaleY=O.scaleY;for(var te=0;te<ee.length;te++){var xe=ee[te];M.setStyle(xe,null!=B[xe]?B[xe]:O.style[xe])}if(B.draggable){if(M.draggable=!0,M.cursor="move",A){var fe=E.seriesModel;null!=E.dataIndex&&(fe=E.seriesModel.getData(E.dataType).getItemModel(E.dataIndex)),M.on("drag",T(A,fe.getModel("labelLine")))}}else M.off("drag"),M.cursor=O.cursor}},W.prototype.layout=function(J){var V=J.getWidth(),P=J.getHeight(),T=(0,j.VT)(this._labelList),R=(0,he.filter)(T,function(A){return"shiftX"===A.layoutOption.moveOverlap}),E=(0,he.filter)(T,function(A){return"shiftY"===A.layoutOption.moveOverlap});(0,j.WE)(R,0,V),(0,j.GI)(E,0,P);var M=(0,he.filter)(T,function(A){return A.layoutOption.hideOverlap});(0,j.yl)(M)},W.prototype.processLabelsOverall=function(){var J=this;(0,he.each)(this._chartViewList,function(V){var P=V.__model,T=V.ignoreLabelLineUpdate,R=P.isAnimationEnabled();V.group.traverse(function(E){if(E.ignore&&!E.forceLabelAnimation)return!0;var M=!T,A=E.getTextContent();!M&&A&&(M=ie(A).needsUpdateLabelLine),M&&J._updateLabelLine(E,P),R&&J._animateLabels(E,P)})})},W.prototype._updateLabelLine=function(J,V){var P=J.getTextContent(),T=(0,ye.A)(J),R=T.dataIndex;if(P&&null!=R){var E=V.getData(T.dataType),M=E.getItemModel(R),A={},O=E.getItemVisual(R,"style"),B=E.getVisual("drawType");A.stroke=O[B];var ue=M.getModel("labelLine");(0,Ce.Iu)(J,(0,Ce.$x)(M),A),(0,Ce.d)(J,ue)}},W.prototype._animateLabels=function(J,V){var P=J.getTextContent(),T=J.getTextGuideLine();if(P&&(J.forceLabelAnimation||!P.ignore&&!P.invisible&&!J.disableLabelAnimation&&!(0,le.eq)(J))){var E=(R=ie(P)).oldLayout,M=(0,ye.A)(J),A=M.dataIndex,O={x:P.x,y:P.y,rotation:P.rotation},B=V.getData(M.dataType);if(E){P.attr(E);var ae=J.prevStates;ae&&((0,he.indexOf)(ae,"select")>=0&&P.attr(R.oldLayoutSelect),(0,he.indexOf)(ae,"emphasis")>=0&&P.attr(R.oldLayoutEmphasis)),(0,le.D)(P,O,V,A)}else if(P.attr(O),!(0,X.qA)(P).valueAnimation){var ue=(0,he.retrieve2)(P.style.opacity,1);P.style.opacity=0,(0,le.KZ)(P,{style:{opacity:ue}},V,A)}if(R.oldLayout=O,P.states.select){var oe=R.oldLayoutSelect={};b(oe,O,Y),b(oe,P.states.select,Y)}if(P.states.emphasis){var de=R.oldLayoutEmphasis={};b(de,O,Y),b(de,P.states.emphasis,Y)}(0,X.tD)(P,A,B,V,V)}if(T&&!T.ignore&&!T.invisible){var R=K(T),te={points:T.shape.points};(E=R.oldLayout)?(T.attr({shape:E}),(0,le.D)(T,{shape:te},V)):(T.setShape(te),T.style.strokePercent=0,(0,le.KZ)(T,{style:{strokePercent:1}},V)),R.oldLayout=te}},W}();var q=(0,ce.Yf)();function G(W){W.registerUpdateLifecycle("series:beforeupdate",function(J,V,P){var T=q(V).labelManager;T||(T=q(V).labelManager=new F),T.clearLabels()}),W.registerUpdateLifecycle("series:layoutlabels",function(J,V,P){var T=q(V).labelManager;P.updatedSeries.forEach(function(R){T.addLabelsOfSeries(V.getViewOfSeriesModel(R))}),T.updateLayoutConfig(V),T.layout(V),T.processLabelsOverall()})}},7521:(Bt,Qe,z)=>{z.d(Qe,{$x:()=>ue,Iu:()=>B,_A:()=>M,d:()=>P,qK:()=>E});var ce=z(7564),Se=z(126),le=z(7834),ye=z(7349),ve=z(3416),be=z(9969),Ce=z(628),he=z(3481),j=z(8221),X=z(6869),re=2*Math.PI,U=ye.Z.CMD,ee=["top","right","bottom","left"];function $(ae,oe,de,te,xe){var fe=de.width,ge=de.height;switch(ae){case"top":te.set(de.x+fe/2,de.y-oe),xe.set(0,-1);break;case"bottom":te.set(de.x+fe/2,de.y+ge+oe),xe.set(0,1);break;case"left":te.set(de.x-oe,de.y+ge/2),xe.set(-1,0);break;case"right":te.set(de.x+fe+oe,de.y+ge/2),xe.set(1,0)}}function ie(ae,oe,de,te,xe,fe,ge,we,Te){ge-=ae,we-=oe;var Ae=Math.sqrt(ge*ge+we*we),Ee=(ge/=Ae)*de+ae,Ve=(we/=Ae)*de+oe;if(Math.abs(te-xe)%re<1e-4)return Te[0]=Ee,Te[1]=Ve,Ae-de;if(fe){var He=te;te=(0,ve.m)(xe),xe=(0,ve.m)(He)}else te=(0,ve.m)(te),xe=(0,ve.m)(xe);te>xe&&(xe+=re);var We=Math.atan2(we,ge);if(We<0&&(We+=re),We>=te&&We<=xe||We+re>=te&&We+re<=xe)return Te[0]=Ee,Te[1]=Ve,Ae-de;var $e=de*Math.cos(te)+ae,lt=de*Math.sin(te)+oe,St=de*Math.cos(xe)+ae,_t=de*Math.sin(xe)+oe,Ot=($e-ge)*($e-ge)+(lt-we)*(lt-we),Vt=(St-ge)*(St-ge)+(_t-we)*(_t-we);return Ot<Vt?(Te[0]=$e,Te[1]=lt,Math.sqrt(Ot)):(Te[0]=St,Te[1]=_t,Math.sqrt(Vt))}function K(ae,oe,de,te,xe,fe,ge,we){var Te=xe-ae,Ae=fe-oe,Ee=de-ae,Ve=te-oe,He=Math.sqrt(Ee*Ee+Ve*Ve),$e=(Te*(Ee/=He)+Ae*(Ve/=He))/He;we&&($e=Math.min(Math.max($e,0),1));var lt=ge[0]=ae+($e*=He)*Ee,St=ge[1]=oe+$e*Ve;return Math.sqrt((lt-xe)*(lt-xe)+(St-fe)*(St-fe))}function b(ae,oe,de,te,xe,fe,ge){de<0&&(ae+=de,de=-de),te<0&&(oe+=te,te=-te);var we=ae+de,Te=oe+te,Ae=ge[0]=Math.min(Math.max(xe,ae),we),Ee=ge[1]=Math.min(Math.max(fe,oe),Te);return Math.sqrt((Ae-xe)*(Ae-xe)+(Ee-fe)*(Ee-fe))}var Y=[];function Q(ae,oe,de){var te=b(oe.x,oe.y,oe.width,oe.height,ae.x,ae.y,Y);return de.set(Y[0],Y[1]),te}function F(ae,oe,de){for(var we,Te,te=0,xe=0,fe=0,ge=0,Ae=1/0,Ee=oe.data,Ve=ae.x,He=ae.y,We=0;We<Ee.length;){var $e=Ee[We++];1===We&&(fe=te=Ee[We],ge=xe=Ee[We+1]);var lt=Ae;switch($e){case U.M:te=fe=Ee[We++],xe=ge=Ee[We++];break;case U.L:lt=K(te,xe,Ee[We],Ee[We+1],Ve,He,Y,!0),te=Ee[We++],xe=Ee[We++];break;case U.C:lt=(0,be.t1)(te,xe,Ee[We++],Ee[We++],Ee[We++],Ee[We++],Ee[We],Ee[We+1],Ve,He,Y),te=Ee[We++],xe=Ee[We++];break;case U.Q:lt=(0,be.Wr)(te,xe,Ee[We++],Ee[We++],Ee[We],Ee[We+1],Ve,He,Y),te=Ee[We++],xe=Ee[We++];break;case U.A:var St=Ee[We++],_t=Ee[We++],Ot=Ee[We++],Vt=Ee[We++],an=Ee[We++],hn=Ee[We++];We+=1;var Vn=!!(1-Ee[We++]);we=Math.cos(an)*Ot+St,Te=Math.sin(an)*Vt+_t,We<=1&&(fe=we,ge=Te),lt=ie(St,_t,Vt,an,an+hn,Vn,(Ve-St)*Vt/Ot+St,He,Y),te=Math.cos(an+hn)*Ot+St,xe=Math.sin(an+hn)*Vt+_t;break;case U.R:lt=b(fe=te=Ee[We++],ge=xe=Ee[We++],Ee[We++],Ee[We++],Ve,He,Y);break;case U.Z:lt=K(te,xe,fe,ge,Ve,He,Y,!0),te=fe,xe=ge}lt<Ae&&(Ae=lt,de.set(Y[0],Y[1]))}return Ae}var q=new ce.Z,G=new ce.Z,W=new ce.Z,J=new ce.Z,V=new ce.Z;function P(ae,oe){if(ae){var de=ae.getTextGuideLine(),te=ae.getTextContent();if(te&&de){var xe=ae.textGuideLineConfig||{},fe=[[0,0],[0,0],[0,0]],ge=xe.candidates||ee,we=te.getBoundingRect().clone();we.applyTransform(te.getComputedTransform());var Te=1/0,Ae=xe.anchor,Ee=ae.getComputedTransform(),Ve=Ee&&(0,he.invert)([],Ee),He=oe.get("length2")||0;Ae&&W.copy(Ae);for(var We=0;We<ge.length;We++){$(ge[We],0,we,q,J),ce.Z.scaleAndAdd(G,q,J,He),G.transform(Ve);var lt=ae.getBoundingRect(),St=Ae?Ae.distance(G):ae instanceof Se.ZP?F(G,ae.path,W):Q(G,lt,W);St<Te&&(Te=St,G.transform(Ee),W.transform(Ee),W.toArray(fe[0]),G.toArray(fe[1]),q.toArray(fe[2]))}E(fe,oe.get("minTurnAngle")),de.setShape({points:fe})}}}var T=[],R=new ce.Z;function E(ae,oe){if(oe<=180&&oe>0){oe=oe/180*Math.PI,q.fromArray(ae[0]),G.fromArray(ae[1]),W.fromArray(ae[2]),ce.Z.sub(J,q,G),ce.Z.sub(V,W,G);var de=J.len(),te=V.len();if(!(de<.001||te<.001)){J.scale(1/de),V.scale(1/te);var xe=J.dot(V);if(Math.cos(oe)<xe){var ge=K(G.x,G.y,W.x,W.y,q.x,q.y,T,!1);R.fromArray(T),R.scaleAndAdd(V,ge/Math.tan(Math.PI-oe));var we=W.x!==G.x?(R.x-G.x)/(W.x-G.x):(R.y-G.y)/(W.y-G.y);if(isNaN(we))return;we<0?ce.Z.copy(R,G):we>1&&ce.Z.copy(R,W),R.toArray(ae[1])}}}}function M(ae,oe,de){if(de<=180&&de>0){de=de/180*Math.PI,q.fromArray(ae[0]),G.fromArray(ae[1]),W.fromArray(ae[2]),ce.Z.sub(J,G,q),ce.Z.sub(V,W,G);var te=J.len(),xe=V.len();if(!(te<.001||xe<.001)&&(J.scale(1/te),V.scale(1/xe),J.dot(oe)<Math.cos(de))){var we=K(G.x,G.y,W.x,W.y,q.x,q.y,T,!1);R.fromArray(T);var Te=Math.PI/2,Ee=Te+Math.acos(V.dot(oe))-de;if(Ee>=Te)ce.Z.copy(R,W);else{R.scaleAndAdd(V,we/Math.tan(Math.PI/2-Ee));var Ve=W.x!==G.x?(R.x-G.x)/(W.x-G.x):(R.y-G.y)/(W.y-G.y);if(isNaN(Ve))return;Ve<0?ce.Z.copy(R,G):Ve>1&&ce.Z.copy(R,W)}R.toArray(ae[1])}}}function A(ae,oe,de,te){var xe="normal"===de,fe=xe?ae:ae.ensureState(de);fe.ignore=oe;var ge=te.get("smooth");ge&&!0===ge&&(ge=.3),fe.shape=fe.shape||{},ge>0&&(fe.shape.smooth=ge);var we=te.getModel("lineStyle").getLineStyle();xe?ae.useStyle(we):fe.style=we}function O(ae,oe){var de=oe.smooth,te=oe.points;if(te)if(ae.moveTo(te[0][0],te[0][1]),de>0&&te.length>=3){var xe=j.dist(te[0],te[1]),fe=j.dist(te[1],te[2]);if(!xe||!fe)return ae.lineTo(te[1][0],te[1][1]),void ae.lineTo(te[2][0],te[2][1]);var ge=Math.min(xe,fe)*de,we=j.lerp([],te[1],te[0],ge/xe),Te=j.lerp([],te[1],te[2],ge/fe),Ae=j.lerp([],we,Te,.5);ae.bezierCurveTo(we[0],we[1],we[0],we[1],Ae[0],Ae[1]),ae.bezierCurveTo(Te[0],Te[1],Te[0],Te[1],te[2][0],te[2][1])}else for(var Ee=1;Ee<te.length;Ee++)ae.lineTo(te[Ee][0],te[Ee][1])}function B(ae,oe,de){var te=ae.getTextGuideLine(),xe=ae.getTextContent();if(xe){for(var fe=oe.normal,ge=fe.get("show"),we=xe.ignore,Te=0;Te<X.qc.length;Te++){var Ae=X.qc[Te],Ee=oe[Ae],Ve="normal"===Ae;if(Ee){var He=Ee.get("show");if((Ve?we:(0,Ce.retrieve2)(xe.states[Ae]&&xe.states[Ae].ignore,we))||!(0,Ce.retrieve2)(He,ge)){var $e=Ve?te:te&&te.states[Ae];$e&&($e.ignore=!0);continue}te||(te=new le.Z,ae.setTextGuideLine(te),!Ve&&(we||!ge)&&A(te,!0,"normal",oe.normal),ae.stateProxy&&(te.stateProxy=ae.stateProxy)),A(te,!1,Ae,Ee)}}if(te){(0,Ce.defaults)(te.style,de),te.style.fill=null;var lt=fe.get("showAbove");(ae.textGuideLineConfig=ae.textGuideLineConfig||{}).showAbove=lt||!1,te.buildPath=O}}else te&&ae.removeTextGuideLine()}function ue(ae,oe){for(var de={normal:ae.getModel(oe=oe||"labelLine")},te=0;te<X.L1.length;te++){var xe=X.L1[te];de[xe]=ae.getModel([xe,oe])}return de}},1593:(Bt,Qe,z)=>{z.d(Qe,{GI:()=>be,VT:()=>le,WE:()=>ve,yl:()=>Ce});var ce=z(6217),Se=z(7021);function le(he){for(var j=[],X=0;X<he.length;X++){var re=he[X];if(!re.defaultAttr.ignore){var U=re.label,ee=U.getComputedTransform(),$=U.getBoundingRect(),ie=!ee||ee[1]<1e-5&&ee[2]<1e-5,K=U.style.margin||0,b=$.clone();b.applyTransform(ee),b.x-=K/2,b.y-=K/2,b.width+=K,b.height+=K;var Y=ie?new ce.Z($,ee):null;j.push({label:U,labelLine:re.labelLine,rect:b,localRect:$,obb:Y,priority:re.priority,defaultAttr:re.defaultAttr,layoutOption:re.computedLayoutOption,axisAligned:ie,transform:ee})}}return j}function ye(he,j,X,re,U,ee){var $=he.length;if(!($<2)){he.sort(function(B,ue){return B.rect[j]-ue.rect[j]});for(var K,ie=0,b=!1,Y=[],Q=0,F=0;F<$;F++){var q=he[F],G=q.rect;(K=G[j]-ie)<0&&(G[j]-=K,q.label[j]-=K,b=!0);var W=Math.max(-K,0);Y.push(W),Q+=W,ie=G[j]+G[X]}Q>0&&ee&&M(-Q/$,0,$);var P,T,J=he[0],V=he[$-1];return R(),P<0&&A(-P,.8),T<0&&A(T,.8),R(),E(P,T,1),E(T,P,-1),R(),P<0&&O(-P),T<0&&O(T),b}function R(){P=J.rect[j]-re,T=U-V.rect[j]-V.rect[X]}function E(B,ue,ae){if(B<0){var oe=Math.min(ue,-B);if(oe>0){M(oe*ae,0,$);var de=oe+B;de<0&&A(-de*ae,1)}else A(-B*ae,1)}}function M(B,ue,ae){0!==B&&(b=!0);for(var oe=ue;oe<ae;oe++){var de=he[oe];de.rect[j]+=B,de.label[j]+=B}}function A(B,ue){for(var ae=[],oe=0,de=1;de<$;de++){var te=he[de-1].rect,xe=Math.max(he[de].rect[j]-te[j]-te[X],0);ae.push(xe),oe+=xe}if(oe){var fe=Math.min(Math.abs(B)/oe,ue);if(B>0)for(de=0;de<$-1;de++)M(ae[de]*fe,0,de+1);else for(de=$-1;de>0;de--)M(-ae[de-1]*fe,de,$)}}function O(B){var ue=B<0?-1:1;B=Math.abs(B);for(var ae=Math.ceil(B/($-1)),oe=0;oe<$-1;oe++)if(ue>0?M(ae,0,oe+1):M(-ae,$-oe-1,$),(B-=ae)<=0)return}}function ve(he,j,X,re){return ye(he,"x","width",j,X,re)}function be(he,j,X,re){return ye(he,"y","height",j,X,re)}function Ce(he){var j=[];he.sort(function(W,J){return J.priority-W.priority});var X=new Se.Z(0,0,0,0);function re(W){if(!W.ignore){var J=W.ensureState("emphasis");null==J.ignore&&(J.ignore=!1)}W.ignore=!0}for(var U=0;U<he.length;U++){var ee=he[U],$=ee.axisAligned,ie=ee.localRect,K=ee.transform,b=ee.label,Y=ee.labelLine;X.copy(ee.rect),X.width-=.1,X.height-=.1,X.x+=.05,X.y+=.05;for(var Q=ee.obb,F=!1,q=0;q<j.length;q++){var G=j[q];if(X.intersect(G.rect)){if($&&G.axisAligned){F=!0;break}if(G.obb||(G.obb=new ce.Z(G.localRect,G.transform)),Q||(Q=new ce.Z(ie,K)),Q.intersect(G.obb)){F=!0;break}}}F?(re(b),Y&&re(Y)):(b.attr("ignore",ee.defaultAttr.ignore),Y&&Y.attr("ignore",ee.defaultAttr.labelGuideIgnore),j.push(ee))}}},1081:(Bt,Qe,z)=>{z.d(Qe,{Lr:()=>re,k3:()=>X,nC:()=>U,ni:()=>j,pe:()=>q,qA:()=>F,qT:()=>Q,tD:()=>G});var ce=z(8208),Se=z(628),le=z(6869),ye=z(1266),ve=z(3802),be={};function Ce(W,J){for(var V=0;V<le.L1.length;V++){var P=le.L1[V],T=J[P],R=W.ensureState(P);R.style=R.style||{},R.style.text=T}var E=W.currentStates.slice();W.clearStates(!0),W.setStyle({text:J.normal}),W.useStates(E,!0)}function he(W,J,V){var M,P=W.labelFetcher,T=W.labelDataIndex,R=W.labelDimIndex,E=J.normal;P&&(M=P.getFormattedLabel(T,"normal",null,R,E&&E.get("formatter"),null!=V?{interpolatedValue:V}:null)),null==M&&(M=(0,Se.isFunction)(W.defaultText)?W.defaultText(T,W,V):W.defaultText);for(var A={normal:M},O=0;O<le.L1.length;O++){var B=le.L1[O],ue=J[B];A[B]=(0,Se.retrieve2)(P?P.getFormattedLabel(T,B,null,R,ue&&ue.get("formatter")):null,M)}return A}function j(W,J,V,P){V=V||be;for(var T=W instanceof ce.ZP,R=!1,E=0;E<le.qc.length;E++)if((M=J[le.qc[E]])&&M.getShallow("show")){R=!0;break}var A=T?W:W.getTextContent();if(R){T||(A||(A=new ce.ZP,W.setTextContent(A)),W.stateProxy&&(A.stateProxy=W.stateProxy));var O=he(V,J),B=J.normal,ue=!!B.getShallow("show"),ae=re(B,P&&P.normal,V,!1,!T);for(ae.text=O.normal,T||W.setTextConfig(U(B,V,!1)),E=0;E<le.L1.length;E++){var M,oe=le.L1[E];if(M=J[oe]){var de=A.ensureState(oe),te=!!(0,Se.retrieve2)(M.getShallow("show"),ue);te!==ue&&(de.ignore=!te),de.style=re(M,P&&P[oe],V,!0,!T),de.style.text=O[oe],T||(W.ensureState(oe).textConfig=U(M,V,!0))}}A.silent=!!B.getShallow("silent"),null!=A.style.x&&(ae.x=A.style.x),null!=A.style.y&&(ae.y=A.style.y),A.ignore=!ue,A.useStyle(ae),A.dirty(),V.enableTextSetter&&(F(A).setLabelText=function(fe){var ge=he(V,J,fe);Ce(A,ge)})}else A&&(A.ignore=!0);W.dirty()}function X(W,J){for(var V={normal:W.getModel(J=J||"label")},P=0;P<le.L1.length;P++){var T=le.L1[P];V[T]=W.getModel([T,J])}return V}function re(W,J,V,P,T){var R={};return function ee(W,J,V,P,T){V=V||be;var A,R=J.ecModel,E=R&&R.option.textStyle,M=function $(W){for(var J;W&&W!==W.ecModel;){var V=(W.option||be).rich;if(V){J=J||{};for(var P=(0,Se.keys)(V),T=0;T<P.length;T++)J[P[T]]=1}W=W.parentModel}return J}(J);if(M)for(var O in A={},M)if(M.hasOwnProperty(O)){var B=J.getModel(["rich",O]);Y(A[O]={},B,E,V,P,T,!1,!0)}A&&(W.rich=A);var ue=J.get("overflow");ue&&(W.overflow=ue);var ae=J.get("minMargin");null!=ae&&(W.margin=ae),Y(W,J,E,V,P,T,!0,!1)}(R,W,V,P,T),J&&(0,Se.extend)(R,J),R}function U(W,J,V){J=J||{};var T,P={},R=W.getShallow("rotate"),E=(0,Se.retrieve2)(W.getShallow("distance"),V?null:5),M=W.getShallow("offset");return"outside"===(T=W.getShallow("position")||(V?null:"inside"))&&(T=J.defaultOutsidePosition||"top"),null!=T&&(P.position=T),null!=M&&(P.offset=M),null!=R&&(R*=Math.PI/180,P.rotation=R),null!=E&&(P.distance=E),P.outsideFill="inherit"===W.get("color")?J.inheritColor||null:"auto",P}var ie=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],K=["align","lineHeight","width","height","tag","verticalAlign"],b=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function Y(W,J,V,P,T,R,E,M){V=!T&&V||be;var A=P&&P.inheritColor,O=J.getShallow("color"),B=J.getShallow("textBorderColor"),ue=(0,Se.retrieve2)(J.getShallow("opacity"),V.opacity);("inherit"===O||"auto"===O)&&(O=A||null),("inherit"===B||"auto"===B)&&(B=A||null),R||(O=O||V.color,B=B||V.textBorderColor),null!=O&&(W.fill=O),null!=B&&(W.stroke=B);var ae=(0,Se.retrieve2)(J.getShallow("textBorderWidth"),V.textBorderWidth);null!=ae&&(W.lineWidth=ae);var oe=(0,Se.retrieve2)(J.getShallow("textBorderType"),V.textBorderType);null!=oe&&(W.lineDash=oe);var de=(0,Se.retrieve2)(J.getShallow("textBorderDashOffset"),V.textBorderDashOffset);null!=de&&(W.lineDashOffset=de),!T&&null==ue&&!M&&(ue=P&&P.defaultOpacity),null!=ue&&(W.opacity=ue),!T&&!R&&null==W.fill&&P.inheritColor&&(W.fill=P.inheritColor);for(var te=0;te<ie.length;te++)null!=(fe=(0,Se.retrieve2)(J.getShallow(xe=ie[te]),V[xe]))&&(W[xe]=fe);for(te=0;te<K.length;te++)null!=(fe=J.getShallow(xe=K[te]))&&(W[xe]=fe);if(null==W.verticalAlign){var ge=J.getShallow("baseline");null!=ge&&(W.verticalAlign=ge)}if(!E||!P.disableBox){for(te=0;te<b.length;te++){var xe,fe;null!=(fe=J.getShallow(xe=b[te]))&&(W[xe]=fe)}var we=J.getShallow("borderType");null!=we&&(W.borderDash=we),("auto"===W.backgroundColor||"inherit"===W.backgroundColor)&&A&&(W.backgroundColor=A),("auto"===W.borderColor||"inherit"===W.borderColor)&&A&&(W.borderColor=A)}}function Q(W,J){var V=J&&J.getModel("textStyle");return(0,Se.trim)([W.fontStyle||V&&V.getShallow("fontStyle")||"",W.fontWeight||V&&V.getShallow("fontWeight")||"",(W.fontSize||V&&V.getShallow("fontSize")||12)+"px",W.fontFamily||V&&V.getShallow("fontFamily")||"sans-serif"].join(" "))}var F=(0,ye.Yf)();function q(W,J,V,P){if(W){var T=F(W);T.prevValue=T.value,T.value=V;var R=J.normal;T.valueAnimation=R.get("valueAnimation"),T.valueAnimation&&(T.precision=R.get("precision"),T.defaultInterpolatedText=P,T.statesModels=J)}}function G(W,J,V,P,T){var R=F(W);if(R.valueAnimation&&R.prevValue!==R.value){var E=R.defaultInterpolatedText,M=(0,Se.retrieve2)(R.interpolatedValue,R.prevValue),A=R.value;W.percent=0,(null==R.prevValue?ve.KZ:ve.D)(W,{percent:1},P,J,null,function O(B){var ue=(0,ye.pk)(V,R.precision,M,A,B);R.interpolatedValue=1===B?null:ue;var ae=he({labelDataIndex:J,labelFetcher:T,defaultText:E?E(ue):ue+""},R.statesModels,ue);Ce(W,ae)})}}},2154:(Bt,Qe,z)=>{z.d(Qe,{Bk:()=>K,G_:()=>$,Ge:()=>X,Gk:()=>j,My:()=>U,bK:()=>ie});var ce=z(628),Se=z(4785),le=z(143),ye=z(5103),ve=z(3133),be="__ec_stack_";function Ce(F){return F.get("stack")||be+F.seriesIndex}function he(F){return F.dim+F.index}function j(F){var q=[],G=F.axis,W="axis0";if("category"===G.type){for(var J=G.getBandWidth(),V=0;V<F.count;V++)q.push((0,ce.defaults)({bandWidth:J,axisKey:W,stackId:be+V},F));var P=ee(q),T=[];for(V=0;V<F.count;V++){var R=P[W][be+V];R.offsetCenter=R.offset+R.width/2,T.push(R)}return T}}function X(F,q){var G=[];return q.eachSeriesByType(F,function(W){b(W)&&G.push(W)}),G}function U(F){var q=function re(F){var q={};(0,ce.each)(F,function(R){var M=R.coordinateSystem.getBaseAxis();if("time"===M.type||"value"===M.type)for(var A=R.getData(),O=M.dim+"_"+M.index,B=A.getDimensionIndex(A.mapDimension(M.dim)),ue=A.getStore(),ae=0,oe=ue.count();ae<oe;++ae){var de=ue.get(B,ae);q[O]?q[O].push(de):q[O]=[de]}});var G={};for(var W in q)if(q.hasOwnProperty(W)){var J=q[W];if(J){J.sort(function(R,E){return R-E});for(var V=null,P=1;P<J.length;++P){var T=J[P]-J[P-1];T>0&&(V=null===V?T:Math.min(V,T))}G[W]=V}}return G}(F),G=[];return(0,ce.each)(F,function(W){var T,V=W.coordinateSystem.getBaseAxis(),P=V.getExtent();if("category"===V.type)T=V.getBandWidth();else if("value"===V.type||"time"===V.type){var E=q[V.dim+"_"+V.index],M=Math.abs(P[1]-P[0]),A=V.scale.getExtent(),O=Math.abs(A[1]-A[0]);T=E?M/O*E:M}else{var B=W.getData();T=Math.abs(P[1]-P[0])/B.count()}var ue=(0,Se.GM)(W.get("barWidth"),T),ae=(0,Se.GM)(W.get("barMaxWidth"),T),oe=(0,Se.GM)(W.get("barMinWidth")||(Y(W)?.5:1),T),de=W.get("barGap"),te=W.get("barCategoryGap");G.push({bandWidth:T,barWidth:ue,barMaxWidth:ae,barMinWidth:oe,barGap:de,barCategoryGap:te,axisKey:he(V),stackId:Ce(W)})}),ee(G)}function ee(F){var q={};(0,ce.each)(F,function(W,J){var V=W.axisKey,P=W.bandWidth,T=q[V]||{bandWidth:P,remainedWidth:P,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},R=T.stacks;q[V]=T;var E=W.stackId;R[E]||T.autoWidthCount++,R[E]=R[E]||{width:0,maxWidth:0};var M=W.barWidth;M&&!R[E].width&&(R[E].width=M,M=Math.min(T.remainedWidth,M),T.remainedWidth-=M);var A=W.barMaxWidth;A&&(R[E].maxWidth=A);var O=W.barMinWidth;O&&(R[E].minWidth=O);var B=W.barGap;null!=B&&(T.gap=B);var ue=W.barCategoryGap;null!=ue&&(T.categoryGap=ue)});var G={};return(0,ce.each)(q,function(W,J){G[J]={};var V=W.stacks,P=W.bandWidth,T=W.categoryGap;if(null==T){var R=(0,ce.keys)(V).length;T=Math.max(35-4*R,15)+"%"}var E=(0,Se.GM)(T,P),M=(0,Se.GM)(W.gap,1),A=W.remainedWidth,O=W.autoWidthCount,B=(A-E)/(O+(O-1)*M);B=Math.max(B,0),(0,ce.each)(V,function(de){var te=de.maxWidth,xe=de.minWidth;if(de.width){var fe=de.width;te&&(fe=Math.min(fe,te)),xe&&(fe=Math.max(fe,xe)),de.width=fe,A-=fe+M*fe,O--}else fe=B,te&&te<fe&&(fe=Math.min(te,A)),xe&&xe>fe&&(fe=xe),fe!==B&&(de.width=fe,A-=fe+M*fe,O--)}),B=(A-E)/(O+(O-1)*M),B=Math.max(B,0);var ae,ue=0;(0,ce.each)(V,function(de,te){de.width||(de.width=B),ae=de,ue+=de.width*(1+M)}),ae&&(ue-=ae.width*M);var oe=-ue/2;(0,ce.each)(V,function(de,te){G[J][te]=G[J][te]||{bandWidth:P,offset:oe,width:de.width},oe+=de.width*(1+M)})}),G}function $(F,q,G){if(F&&q){var W=F[he(q)];return null!=W&&null!=G?W[Ce(G)]:W}}function ie(F,q){var G=X(F,q),W=U(G);(0,ce.each)(G,function(J){var V=J.getData(),T=J.coordinateSystem.getBaseAxis(),R=Ce(J),E=W[he(T)][R];V.setLayout({bandWidth:E.bandWidth,offset:E.offset,size:E.width})})}function K(F){return{seriesType:F,plan:(0,ye.Z)(),reset:function(q){if(b(q)){var G=q.getData(),W=q.coordinateSystem,J=W.getBaseAxis(),V=W.getOtherAxis(J),P=G.getDimensionIndex(G.mapDimension(V.dim)),T=G.getDimensionIndex(G.mapDimension(J.dim)),R=q.get("showBackground",!0),E=G.mapDimension(V.dim),M=G.getCalculationInfo("stackResultDimension"),A=(0,le.M)(G,E)&&!!G.getCalculationInfo("stackedOnSeries"),O=V.isHorizontal(),B=function Q(F,q){return q.toGlobalCoord(q.dataToCoord("log"===q.type?1:0))}(0,V),ue=Y(q),ae=q.get("barMinHeight")||0,oe=M&&G.getDimensionIndex(M),de=G.getLayout("size"),te=G.getLayout("offset");return{progress:function(xe,fe){for(var He,ge=xe.count,we=ue&&(0,ve.o)(3*ge),Te=ue&&R&&(0,ve.o)(3*ge),Ae=ue&&(0,ve.o)(ge),Ee=W.master.getRect(),Ve=O?Ee.width:Ee.height,We=fe.getStore(),$e=0;null!=(He=xe.next());){var lt=We.get(A?oe:P,He),St=We.get(T,He),_t=B,Ot=void 0;A&&(Ot=+lt-We.get(P,He));var Vt=void 0,an=void 0,hn=void 0,Vn=void 0;if(O){var ar=W.dataToPoint([lt,St]);A&&(_t=W.dataToPoint([Ot,St])[0]),Vt=_t,an=ar[1]+te,hn=ar[0]-_t,Vn=de,Math.abs(hn)<ae&&(hn=(hn<0?-1:1)*ae)}else ar=W.dataToPoint([St,lt]),A&&(_t=W.dataToPoint([St,Ot])[1]),Vt=ar[0]+te,an=_t,hn=de,Vn=ar[1]-_t,Math.abs(Vn)<ae&&(Vn=(Vn<=0?-1:1)*ae);ue?(we[$e]=Vt,we[$e+1]=an,we[$e+2]=O?hn:Vn,Te&&(Te[$e]=O?Ee.x:Vt,Te[$e+1]=O?an:Ee.y,Te[$e+2]=Ve),Ae[He]=He):fe.setItemLayout(He,{x:Vt,y:an,width:hn,height:Vn}),$e+=3}ue&&fe.setLayout({largePoints:we,largeDataIndices:Ae,largeBackgroundPoints:Te,valueAxisHorizontal:O})}}}}}}function b(F){return F.coordinateSystem&&"cartesian2d"===F.coordinateSystem.type}function Y(F){return F.pipelineContext&&F.pipelineContext.large}},960:(Bt,Qe,z)=>{z.d(Qe,{s:()=>ve,y:()=>le});var ce=z(628),Se=z(1266);function le(be,Ce){function he(j,X){var re=[];return j.eachComponent({mainType:"series",subType:be,query:X},function(U){re.push(U.seriesIndex)}),re}(0,ce.each)([[be+"ToggleSelect","toggleSelect"],[be+"Select","select"],[be+"UnSelect","unselect"]],function(j){Ce(j[0],function(X,re,U){X=(0,ce.extend)({},X),U.dispatchAction((0,ce.extend)(X,{type:j[1],seriesIndex:he(re,X)}))})})}function ye(be,Ce,he,j,X){var re=be+Ce;he.isSilent(re)||j.eachComponent({mainType:"series",subType:"pie"},function(U){for(var ee=U.seriesIndex,$=U.option.selectedMap,ie=X.selected,K=0;K<ie.length;K++)if(ie[K].seriesIndex===ee){var b=U.getData(),Y=(0,Se.gO)(b,X.fromActionPayload);he.trigger(re,{type:re,seriesId:U.id,name:(0,ce.isArray)(Y)?b.getName(Y[0]):b.getName(Y),selected:(0,ce.isString)($)?$:(0,ce.extend)({},$)})}})}function ve(be,Ce,he){be.on("selectchanged",function(j){var X=he.getModel();j.isFromClick?(ye("map","selectchanged",Ce,X,j),ye("pie","selectchanged",Ce,X,j)):"select"===j.fromAction?(ye("map","selected",Ce,X,j),ye("pie","selected",Ce,X,j)):"unselect"===j.fromAction&&(ye("map","unselected",Ce,X,j),ye("pie","unselected",Ce,X,j))})}},9447:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>re});var ce=z(5845),Se=z(628),le=z(1725),ye=z(2015),ve=z(1087),be=z(1266),Ce=z(634),he=(0,be.Yf)(),j=function(U){function ee($,ie,K){var b=U.call(this,$,ie,K)||this;return b.uid=ye.Kr("ec_cpt_model"),b}return(0,ce.ZT)(ee,U),ee.prototype.init=function($,ie,K){this.mergeDefaultAndTheme($,K)},ee.prototype.mergeDefaultAndTheme=function($,ie){var K=Ce.YD(this),b=K?Ce.tE($):{},Y=ie.getTheme();Se.merge($,Y.get(this.mainType)),Se.merge($,this.getDefaultOption()),K&&Ce.dt($,b,K)},ee.prototype.mergeOption=function($,ie){Se.merge(this.option,$,!0);var K=Ce.YD(this);K&&Ce.dt(this.option,$,K)},ee.prototype.optionUpdated=function($,ie){},ee.prototype.getDefaultOption=function(){var $=this.constructor;if(!(0,ve.PT)($))return $.defaultOption;var ie=he(this);if(!ie.defaultOption){for(var K=[],b=$;b;){var Y=b.prototype.defaultOption;Y&&K.push(Y),b=b.superClass}for(var Q={},F=K.length-1;F>=0;F--)Q=Se.merge(Q,K[F],!0);ie.defaultOption=Q}return ie.defaultOption},ee.prototype.getReferringComponents=function($,ie){var b=$+"Id";return(0,be.HZ)(this.ecModel,$,{index:this.get($+"Index",!0),id:this.get(b,!0)},ie)},ee.prototype.getBoxLayoutParams=function(){var $=this;return{left:$.get("left"),top:$.get("top"),right:$.get("right"),bottom:$.get("bottom"),width:$.get("width"),height:$.get("height")}},ee.prototype.getZLevelKey=function(){return""},ee.prototype.setZLevel=function($){this.option.zlevel=$},ee.protoInitialize=(($=ee.prototype).type="component",$.id="",$.name="",$.mainType="",$.subType="",void($.componentIndex=0)),ee;var $}(le.Z);(0,ve.pw)(j,le.Z),(0,ve.au)(j),ye.cj(j),ye.jS(j,function X(U){var ee=[];return Se.each(j.getClassesByMainType(U),function($){ee=ee.concat($.dependencies||$.prototype.dependencies||[])}),ee=Se.map(ee,function($){return(0,ve.u9)($).main}),"dataset"!==U&&Se.indexOf(ee,"dataset")<=0&&ee.unshift("dataset"),ee});const re=j},1725:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>Y});var ce=z(169),Se=z(1087),ve=(0,z(5632).Z)([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),be=function(){function Q(){}return Q.prototype.getAreaStyle=function(F,q){return ve(this,F,q)},Q}(),Ce=z(1081),he=z(8208),j=["textStyle","color"],X=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],re=new he.ZP;const ee=function(){function Q(){}return Q.prototype.getTextColor=function(F){var q=this.ecModel;return this.getShallow("color")||(!F&&q?q.get(j):null)},Q.prototype.getFont=function(){return(0,Ce.qT)({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},Q.prototype.getTextRect=function(F){for(var q={text:F,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},G=0;G<X.length;G++)q[X[G]]=this.getShallow(X[G]);return re.useStyle(q),re.update(),re.getBoundingRect()},Q}();var $=z(3331),ie=z(7327),K=z(628),b=function(){function Q(F,q,G){this.parentModel=q,this.ecModel=G,this.option=F}return Q.prototype.init=function(F,q,G){for(var W=[],J=3;J<arguments.length;J++)W[J-3]=arguments[J]},Q.prototype.mergeOption=function(F,q){(0,K.merge)(this.option,F,!0)},Q.prototype.get=function(F,q){return null==F?this.option:this._doGet(this.parsePath(F),!q&&this.parentModel)},Q.prototype.getShallow=function(F,q){var G=this.option,W=null==G?G:G[F];if(null==W&&!q){var J=this.parentModel;J&&(W=J.getShallow(F))}return W},Q.prototype.getModel=function(F,q){var G=null!=F,W=G?this.parsePath(F):null;return new Q(G?this._doGet(W):this.option,q=q||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(W)),this.ecModel)},Q.prototype.isEmpty=function(){return null==this.option},Q.prototype.restoreData=function(){},Q.prototype.clone=function(){return new(0,this.constructor)((0,K.clone)(this.option))},Q.prototype.parsePath=function(F){return"string"==typeof F?F.split("."):F},Q.prototype.resolveParentPath=function(F){return F},Q.prototype.isAnimationEnabled=function(){if(!ce.Z.node&&this.option){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},Q.prototype._doGet=function(F,q){var G=this.option;if(!F)return G;for(var W=0;W<F.length&&(!F[W]||null!=(G=G&&"object"==typeof G?G[F[W]]:null));W++);return null==G&&q&&(G=q._doGet(this.resolveParentPath(F),q.parentModel)),G},Q}();(0,Se.dm)(b),(0,Se.Qj)(b),(0,K.mixin)(b,$.K),(0,K.mixin)(b,ie.D),(0,K.mixin)(b,be),(0,K.mixin)(b,ee);const Y=b},9521:(Bt,Qe,z)=>{z.d(Qe,{V:()=>ie,Z:()=>V});var ce=z(5845),Se=z(628),le=z(169),ye=z(1266),ve=z(9447),be=z(1769),Ce=z(4756),he=z(634),j=z(6861),X=z(1087),re=z(8003),U=z(1549),ee=ye.Yf();function $(P,T){return P.getName(T)||P.getId(T)}var ie="__universalTransitionEnabled",K=function(P){function T(){var R=null!==P&&P.apply(this,arguments)||this;return R._selectedDataIndicesMap={},R}return(0,ce.ZT)(T,P),T.prototype.init=function(R,E,M){this.seriesIndex=this.componentIndex,this.dataTask=(0,j.v)({count:Q,reset:F}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(R,M),(ee(this).sourceManager=new re.U(this)).prepareSource();var O=this.getInitialData(R,M);G(O,this),this.dataTask.context.data=O,ee(this).dataBeforeProcessed=O,b(this),this._initSelectedMapFromData(O)},T.prototype.mergeDefaultAndTheme=function(R,E){var M=(0,he.YD)(this),A=M?(0,he.tE)(R):{},O=this.subType;ve.Z.hasClass(O)&&(O+="Series"),Se.merge(R,E.getTheme().get(this.subType)),Se.merge(R,this.getDefaultOption()),ye.Cc(R,"label",["show"]),this.fillDataTextStyle(R.data),M&&(0,he.dt)(R,A,M)},T.prototype.mergeOption=function(R,E){R=Se.merge(this.option,R,!0),this.fillDataTextStyle(R.data);var M=(0,he.YD)(this);M&&(0,he.dt)(this.option,R,M);var A=ee(this).sourceManager;A.dirty(),A.prepareSource();var O=this.getInitialData(R,E);G(O,this),this.dataTask.dirty(),this.dataTask.context.data=O,ee(this).dataBeforeProcessed=O,b(this),this._initSelectedMapFromData(O)},T.prototype.fillDataTextStyle=function(R){if(R&&!Se.isTypedArray(R))for(var E=["show"],M=0;M<R.length;M++)R[M]&&R[M].label&&ye.Cc(R[M],"label",E)},T.prototype.getInitialData=function(R,E){},T.prototype.appendData=function(R){this.getRawData().appendData(R.data)},T.prototype.getData=function(R){var E=J(this);if(E){var M=E.context.data;return null==R?M:M.getLinkedData(R)}return ee(this).data},T.prototype.getAllData=function(){var R=this.getData();return R&&R.getLinkedDataAll?R.getLinkedDataAll():[{data:R}]},T.prototype.setData=function(R){var E=J(this);if(E){var M=E.context;M.outputData=R,E!==this.dataTask&&(M.data=R)}ee(this).data=R},T.prototype.getEncode=function(){var R=this.get("encode",!0);if(R)return Se.createHashMap(R)},T.prototype.getSourceManager=function(){return ee(this).sourceManager},T.prototype.getSource=function(){return this.getSourceManager().getSource()},T.prototype.getRawData=function(){return ee(this).dataBeforeProcessed},T.prototype.getColorBy=function(){return this.get("colorBy")||"series"},T.prototype.isColorBySeries=function(){return"series"===this.getColorBy()},T.prototype.getBaseAxis=function(){var R=this.coordinateSystem;return R&&R.getBaseAxis&&R.getBaseAxis()},T.prototype.formatTooltip=function(R,E,M){return(0,U.w)({series:this,dataIndex:R,multipleSeries:E})},T.prototype.isAnimationEnabled=function(){var R=this.ecModel;if(le.Z.node&&(!R||!R.ssr))return!1;var E=this.getShallow("animation");return E&&this.getData().count()>this.getShallow("animationThreshold")&&(E=!1),!!E},T.prototype.restoreData=function(){this.dataTask.dirty()},T.prototype.getColorFromPalette=function(R,E,M){var A=this.ecModel,O=be._.prototype.getColorFromPalette.call(this,R,E,M);return O||(O=A.getColorFromPalette(R,E,M)),O},T.prototype.coordDimToDataDim=function(R){return this.getRawData().mapDimensionsAll(R)},T.prototype.getProgressive=function(){return this.get("progressive")},T.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},T.prototype.select=function(R,E){this._innerSelect(this.getData(E),R)},T.prototype.unselect=function(R,E){var M=this.option.selectedMap;if(M){var A=this.option.selectedMode,O=this.getData(E);if("series"===A||"all"===M)return this.option.selectedMap={},void(this._selectedDataIndicesMap={});for(var B=0;B<R.length;B++){var ae=$(O,R[B]);M[ae]=!1,this._selectedDataIndicesMap[ae]=-1}}},T.prototype.toggleSelect=function(R,E){for(var M=[],A=0;A<R.length;A++)M[0]=R[A],this.isSelected(R[A],E)?this.unselect(M,E):this.select(M,E)},T.prototype.getSelectedDataIndices=function(){if("all"===this.option.selectedMap)return[].slice.call(this.getData().getIndices());for(var R=this._selectedDataIndicesMap,E=Se.keys(R),M=[],A=0;A<E.length;A++){var O=R[E[A]];O>=0&&M.push(O)}return M},T.prototype.isSelected=function(R,E){var M=this.option.selectedMap;if(!M)return!1;var A=this.getData(E);return("all"===M||M[$(A,R)])&&!A.getItemModel(R).get(["select","disabled"])},T.prototype.isUniversalTransitionEnabled=function(){if(this[ie])return!0;var R=this.option.universalTransition;return!!R&&(!0===R||R&&R.enabled)},T.prototype._innerSelect=function(R,E){var M,A,O=this.option,B=O.selectedMode,ue=E.length;if(B&&ue)if("series"===B)O.selectedMap="all";else if("multiple"===B){Se.isObject(O.selectedMap)||(O.selectedMap={});for(var ae=O.selectedMap,oe=0;oe<ue;oe++){var de=E[oe];ae[te=$(R,de)]=!0,this._selectedDataIndicesMap[te]=R.getRawIndex(de)}}else if("single"===B||!0===B){var xe=E[ue-1],te=$(R,xe);O.selectedMap=((M={})[te]=!0,M),this._selectedDataIndicesMap=((A={})[te]=R.getRawIndex(xe),A)}},T.prototype._initSelectedMapFromData=function(R){if(!this.option.selectedMap){var E=[];R.hasItemOption&&R.each(function(M){var A=R.getRawDataItem(M);A&&A.selected&&E.push(M)}),E.length>0&&this._innerSelect(R,E)}},T.registerClass=function(R){return ve.Z.registerClass(R)},T.protoInitialize=((R=T.prototype).type="series.__base__",R.seriesIndex=0,R.ignoreStyleOnData=!1,R.hasSymbolVisual=!1,R.defaultSymbol="circle",R.visualStyleAccessPath="itemStyle",void(R.visualDrawType="fill")),T;var R}(ve.Z);function b(P){var T=P.name;ye.yu(P)||(P.name=function Y(P){var T=P.getRawData(),R=T.mapDimensionsAll("seriesName"),E=[];return Se.each(R,function(M){var A=T.getDimensionInfo(M);A.displayName&&E.push(A.displayName)}),E.join(" ")}(P)||T)}function Q(P){return P.model.getRawData().count()}function F(P){var T=P.model;return T.setData(T.getRawData().cloneShallow()),q}function q(P,T){T.outputData&&P.end>T.outputData.count()&&T.model.getRawData().cloneShallow(T.outputData)}function G(P,T){Se.each(Se.concatArray(P.CHANGABLE_METHODS,P.DOWNSAMPLE_METHODS),function(R){P.wrapMethod(R,Se.curry(W,T))})}function W(P,T){var R=J(P);return R&&R.setOutputEnd((T||this).count()),T}function J(P){var T=(P.ecModel||{}).scheduler,R=T&&T.getPipeline(P.uid);if(R){var E=R.currentTask;if(E){var M=E.agentStubMap;M&&(E=M.get(P.uid))}return E}}Se.mixin(K,Ce.X),Se.mixin(K,be._),(0,X.pw)(K,ve.Z);const V=K},157:(Bt,Qe,z)=>{z.d(Qe,{R:()=>ye,f:()=>le});var ce=z(628),Se=(0,ce.createHashMap)();function le(ve,be){(0,ce.assert)(null==Se.get(ve)&&be),Se.set(ve,be)}function ye(ve,be,Ce){var he=Se.get(be);if(!he)return Ce;var j=he(ve);return j?Ce.concat(j):Ce}},4756:(Bt,Qe,z)=>{z.d(Qe,{X:()=>ve,f:()=>be});var ce=z(628),Se=z(67),le=z(9706),ye=/\{@(.+?)\}/g,ve=function(){function Ce(){}return Ce.prototype.getDataParams=function(he,j){var X=this.getData(j),re=this.getRawValue(he,j),U=X.getRawIndex(he),ee=X.getName(he),$=X.getRawDataItem(he),ie=X.getItemVisual(he,"style"),K=ie&&ie[X.getItemVisual(he,"drawType")||"fill"],b=ie&&ie.stroke,Y=this.mainType,Q="series"===Y,F=X.userOutput&&X.userOutput.get();return{componentType:Y,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:Q?this.subType:null,seriesIndex:this.seriesIndex,seriesId:Q?this.id:null,seriesName:Q?this.name:null,name:ee,dataIndex:U,data:$,dataType:j,value:re,color:K,borderColor:b,dimensionNames:F?F.fullDimensions:null,encode:F?F.encode:null,$vars:["seriesName","name","value"]}},Ce.prototype.getFormattedLabel=function(he,j,X,re,U,ee){j=j||"normal";var $=this.getData(X),ie=this.getDataParams(he,X);return ee&&(ie.value=ee.interpolatedValue),null!=re&&ce.isArray(ie.value)&&(ie.value=ie.value[re]),U||(U=$.getItemModel(he).get("normal"===j?["label","formatter"]:[j,"label","formatter"])),ce.isFunction(U)?(ie.status=j,ie.dimensionIndex=re,U(ie)):ce.isString(U)?(0,le.kF)(U,ie).replace(ye,function(Y,Q){var F=Q.length,q=Q;"["===q.charAt(0)&&"]"===q.charAt(F-1)&&(q=+q.slice(1,F-1));var G=(0,Se.hk)($,he,q);if(ee&&ce.isArray(ee.interpolatedValue)){var W=$.getDimensionIndex(q);W>=0&&(G=ee.interpolatedValue[W])}return null!=G?G+"":""}):void 0},Ce.prototype.getRawValue=function(he,j){return(0,Se.hk)(this.getData(j),he)},Ce.prototype.formatTooltip=function(he,j,X){},Ce}();function be(Ce){var he,j;return ce.isObject(Ce)?Ce.type&&(j=Ce):he=Ce,{text:he,frag:j}}},7327:(Bt,Qe,z)=>{z.d(Qe,{D:()=>ye,t:()=>Se});var ce=z(5632),Se=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],le=(0,ce.Z)(Se),ye=function(){function ve(){}return ve.prototype.getItemStyle=function(be,Ce){return le(this,be,Ce)},ve}()},3331:(Bt,Qe,z)=>{z.d(Qe,{K:()=>ye,v:()=>Se});var ce=z(5632),Se=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],le=(0,ce.Z)(Se),ye=function(){function ve(){}return ve.prototype.getLineStyle=function(be){return le(this,be)},ve}()},5632:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>Se});var ce=z(628);function Se(le,ye){for(var ve=0;ve<le.length;ve++)le[ve][1]||(le[ve][1]=le[ve][0]);return ye=ye||!1,function(be,Ce,he){for(var j={},X=0;X<le.length;X++){var re=le[X][1];if(!(Ce&&ce.indexOf(Ce,re)>=0||he&&ce.indexOf(he,re)<0)){var U=be.getShallow(re,ye);null!=U&&(j[le[X][0]]=U)}}return j}}},1769:(Bt,Qe,z)=>{z.d(Qe,{_:()=>ye,i:()=>ve});var ce=z(1266),Se=(0,ce.Yf)(),le=(0,ce.Yf)(),ye=function(){function j(){}return j.prototype.getColorFromPalette=function(X,re,U){var ee=(0,ce.kF)(this.get("color",!0)),$=this.get("colorLayer",!0);return Ce(this,Se,ee,$,X,re,U)},j.prototype.clearColorPalette=function(){!function he(j,X){X(j).paletteIdx=0,X(j).paletteNameMap={}}(this,Se)},j}();function ve(j,X,re,U){var ee=(0,ce.kF)(j.get(["aria","decal","decals"]));return Ce(j,le,ee,null,X,re,U)}function Ce(j,X,re,U,ee,$,ie){var K=X($=$||j),b=K.paletteIdx||0,Y=K.paletteNameMap=K.paletteNameMap||{};if(Y.hasOwnProperty(ee))return Y[ee];var Q=null!=ie&&U?function be(j,X){for(var re=j.length,U=0;U<re;U++)if(j[U].length>X)return j[U];return j[re-1]}(U,ie):re;if((Q=Q||re)&&Q.length){var F=Q[b];return ee&&(Y[ee]=F),K.paletteIdx=(b+1)%Q.length,F}}},1659:(Bt,Qe,z)=>{z.d(Qe,{N:()=>W});var ce=z(6704),Se=z(628),le=z(908),ye=z(6801),ve=z(7072),be=z(9012),Ce=z(7021),he=z(2369),j=z(5730);function X(J,V,P){var T=j.qW.createCanvas(),R=V.getWidth(),E=V.getHeight(),M=T.style;return M&&(M.position="absolute",M.left="0",M.top="0",M.width=R+"px",M.height=E+"px",T.setAttribute("data-zr-dom-id",J)),T.width=R*P,T.height=E*P,T}const U=function(J){function V(P,T,R){var M,E=J.call(this)||this;E.motionBlur=!1,E.lastFrameAlpha=.7,E.dpr=1,E.virtual=!1,E.config={},E.incremental=!1,E.zlevel=0,E.maxRepaintRectCount=5,E.__dirty=!0,E.__firstTimePaint=!0,E.__used=!1,E.__drawIndex=0,E.__startIndex=0,E.__endIndex=0,E.__prevStartIndex=null,E.__prevEndIndex=null,R=R||ce.KL,"string"==typeof P?M=X(P,T,R):Se.isObject(P)&&(P=(M=P).id),E.id=P,E.dom=M;var A=M.style;return A&&(Se.disableUserSelect(M),M.onselectstart=function(){return!1},A.padding="0",A.margin="0",A.borderWidth="0"),E.painter=T,E.dpr=R,E}return(0,le.ZT)(V,J),V.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},V.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},V.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},V.prototype.setUnpainted=function(){this.__firstTimePaint=!0},V.prototype.createBackBuffer=function(){var P=this.dpr;this.domBack=X("back-"+this.id,this.painter,P),this.ctxBack=this.domBack.getContext("2d"),1!==P&&this.ctxBack.scale(P,P)},V.prototype.createRepaintRects=function(P,T,R,E){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var fe,M=[],A=this.maxRepaintRectCount,O=!1,B=new Ce.Z(0,0,0,0);function ue(we){if(we.isFinite()&&!we.isZero())if(0===M.length)(Te=new Ce.Z(0,0,0,0)).copy(we),M.push(Te);else{for(var Ae=!1,Ee=1/0,Ve=0,He=0;He<M.length;++He){var We=M[He];if(We.intersect(we)){var $e=new Ce.Z(0,0,0,0);$e.copy(We),$e.union(we),M[He]=$e,Ae=!0;break}if(O){B.copy(we),B.union(We);var Ot=B.width*B.height-we.width*we.height-We.width*We.height;Ot<Ee&&(Ee=Ot,Ve=He)}}var Te;O&&(M[Ve].union(we),Ae=!0),Ae||((Te=new Ce.Z(0,0,0,0)).copy(we),M.push(Te)),O||(O=M.length>=A)}}for(var ae=this.__startIndex;ae<this.__endIndex;++ae)if(oe=P[ae]){var de=oe.shouldBePainted(R,E,!0,!0);(te=oe.__isRendered&&(oe.__dirty&he.YV||!de)?oe.getPrevPaintRect():null)&&ue(te);var xe=de&&(oe.__dirty&he.YV||!oe.__isRendered)?oe.getPaintRect():null;xe&&ue(xe)}for(ae=this.__prevStartIndex;ae<this.__prevEndIndex;++ae){var oe,te;de=(oe=T[ae]).shouldBePainted(R,E,!0,!0),!oe||de&&oe.__zr||!oe.__isRendered||(te=oe.getPrevPaintRect())&&ue(te)}do{for(fe=!1,ae=0;ae<M.length;)if(M[ae].isZero())M.splice(ae,1);else{for(var ge=ae+1;ge<M.length;)M[ae].intersect(M[ge])?(fe=!0,M[ae].union(M[ge]),M.splice(ge,1)):ge++;ae++}}while(fe);return this._paintRects=M,M},V.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},V.prototype.resize=function(P,T){var R=this.dpr,E=this.dom,M=E.style,A=this.domBack;M&&(M.width=P+"px",M.height=T+"px"),E.width=P*R,E.height=T*R,A&&(A.width=P*R,A.height=T*R,1!==R&&this.ctxBack.scale(R,R))},V.prototype.clear=function(P,T,R){var E=this.dom,M=this.ctx,A=E.width,O=E.height;T=T||this.clearColor;var B=this.motionBlur&&!P,ue=this.lastFrameAlpha,ae=this.dpr,oe=this;B&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(E,0,0,A/ae,O/ae));var de=this.domBack;function te(xe,fe,ge,we){if(M.clearRect(xe,fe,ge,we),T&&"transparent"!==T){var Te=void 0;Se.isGradientObject(T)?(Te=T.__canvasGradient||(0,ve.ZF)(M,T,{x:0,y:0,width:ge,height:we}),T.__canvasGradient=Te):Se.isImagePatternObject(T)&&(T.scaleX=T.scaleX||ae,T.scaleY=T.scaleY||ae,Te=(0,be.RZ)(M,T,{dirty:function(){oe.setUnpainted(),oe.__painter.refresh()}})),M.save(),M.fillStyle=Te||T,M.fillRect(xe,fe,ge,we),M.restore()}B&&(M.save(),M.globalAlpha=ue,M.drawImage(de,xe,fe,ge,we),M.restore())}!R||B?te(0,0,A,O):R.length&&Se.each(R,function(xe){te(xe.x*ae,xe.y*ae,xe.width*ae,xe.height*ae)})},V}(ye.Z);var ee=z(2036),$=z(169),K=314159,b=.01;const G=function(){function J(V,P,T,R){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var E=!V.nodeName||"CANVAS"===V.nodeName.toUpperCase();this._opts=T=Se.extend({},T||{}),this.dpr=T.devicePixelRatio||ce.KL,this._singleCanvas=E,this.root=V,V.style&&(Se.disableUserSelect(V),V.innerHTML=""),this.storage=P;var A=this._zlevelList;this._prevDisplayList=[];var O=this._layers;if(E){var ue=V,ae=ue.width,oe=ue.height;null!=T.width&&(ae=T.width),null!=T.height&&(oe=T.height),this.dpr=T.devicePixelRatio||1,ue.width=ae*this.dpr,ue.height=oe*this.dpr,this._width=ae,this._height=oe;var de=new U(ue,this,this.dpr);de.__builtin__=!0,de.initContext(),O[K]=de,de.zlevel=K,A.push(K),this._domRoot=V}else{this._width=(0,ve.ap)(V,0,T),this._height=(0,ve.ap)(V,1,T);var B=this._domRoot=function F(J,V){var P=document.createElement("div");return P.style.cssText=["position:relative","width:"+J+"px","height:"+V+"px","padding:0","margin:0","border-width:0"].join(";")+";",P}(this._width,this._height);V.appendChild(B)}}return J.prototype.getType=function(){return"canvas"},J.prototype.isSingleCanvas=function(){return this._singleCanvas},J.prototype.getViewportRoot=function(){return this._domRoot},J.prototype.getViewportRootOffset=function(){var V=this.getViewportRoot();if(V)return{offsetLeft:V.offsetLeft||0,offsetTop:V.offsetTop||0}},J.prototype.refresh=function(V){var P=this.storage.getDisplayList(!0),T=this._prevDisplayList,R=this._zlevelList;this._redrawId=Math.random(),this._paintList(P,T,V,this._redrawId);for(var E=0;E<R.length;E++){var A=this._layers[R[E]];!A.__builtin__&&A.refresh&&A.refresh(0===E?this._backgroundColor:null)}return this._opts.useDirtyRect&&(this._prevDisplayList=P.slice()),this},J.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},J.prototype._paintHoverList=function(V){var P=V.length,T=this._hoverlayer;if(T&&T.clear(),P){for(var E,R={inHover:!0,viewWidth:this._width,viewHeight:this._height},M=0;M<P;M++){var A=V[M];A.__inHover&&(T||(T=this._hoverlayer=this.getLayer(1e5)),E||(E=T.ctx).save(),(0,be.Dm)(E,A,R,M===P-1))}E&&E.restore()}},J.prototype.getHoverLayer=function(){return this.getLayer(1e5)},J.prototype.paintOne=function(V,P){(0,be.RV)(V,P)},J.prototype._paintList=function(V,P,T,R){if(this._redrawId===R){T=T||!1,this._updateLayerStatus(V);var E=this._doPaintList(V,P,T),M=E.finished,A=E.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),A&&this._paintHoverList(V),M)this.eachLayer(function(B){B.afterBrush&&B.afterBrush()});else{var O=this;(0,ee.Z)(function(){O._paintList(V,P,T,R)})}}},J.prototype._compositeManually=function(){var V=this.getLayer(K).ctx,P=this._domRoot.width,T=this._domRoot.height;V.clearRect(0,0,P,T),this.eachBuiltinLayer(function(R){R.virtual&&V.drawImage(R.dom,0,0,P,T)})},J.prototype._doPaintList=function(V,P,T){for(var R=this,E=[],M=this._opts.useDirtyRect,A=0;A<this._zlevelList.length;A++){var B=this._layers[this._zlevelList[A]];B.__builtin__&&B!==this._hoverlayer&&(B.__dirty||T)&&E.push(B)}for(var ue=!0,ae=!1,oe=function(xe){var fe=E[xe],ge=fe.ctx,we=M&&fe.createRepaintRects(V,P,de._width,de._height),Te=T?fe.__startIndex:fe.__drawIndex,Ae=!T&&fe.incremental&&Date.now,Ee=Ae&&Date.now(),Ve=fe.zlevel===de._zlevelList[0]?de._backgroundColor:null;if(fe.__startIndex===fe.__endIndex)fe.clear(!1,Ve,we);else if(Te===fe.__startIndex){var He=V[Te];(!He.incremental||!He.notClear||T)&&fe.clear(!1,Ve,we)}-1===Te&&(console.error("For some unknown reason. drawIndex is -1"),Te=fe.__startIndex);var We,$e=function(Ot){var Vt={inHover:!1,allClipped:!1,prevEl:null,viewWidth:R._width,viewHeight:R._height};for(We=Te;We<fe.__endIndex;We++){var an=V[We];if(an.__inHover&&(ae=!0),R._doPaintEl(an,fe,M,Ot,Vt,We===fe.__endIndex-1),Ae&&Date.now()-Ee>15)break}Vt.prevElClipPaths&&ge.restore()};if(we)if(0===we.length)We=fe.__endIndex;else for(var lt=de.dpr,St=0;St<we.length;++St){var _t=we[St];ge.save(),ge.beginPath(),ge.rect(_t.x*lt,_t.y*lt,_t.width*lt,_t.height*lt),ge.clip(),$e(_t),ge.restore()}else ge.save(),$e(),ge.restore();fe.__drawIndex=We,fe.__drawIndex<fe.__endIndex&&(ue=!1)},de=this,te=0;te<E.length;te++)oe(te);return $.Z.wxa&&Se.each(this._layers,function(xe){xe&&xe.ctx&&xe.ctx.draw&&xe.ctx.draw()}),{finished:ue,needsRefreshHover:ae}},J.prototype._doPaintEl=function(V,P,T,R,E,M){var A=P.ctx;if(T){var O=V.getPaintRect();(!R||O&&O.intersect(R))&&((0,be.Dm)(A,V,E,M),V.setPrevPaintRect(O))}else(0,be.Dm)(A,V,E,M)},J.prototype.getLayer=function(V,P){this._singleCanvas&&!this._needsManuallyCompositing&&(V=K);var T=this._layers[V];return T||((T=new U("zr_"+V,this,this.dpr)).zlevel=V,T.__builtin__=!0,this._layerConfig[V]?Se.merge(T,this._layerConfig[V],!0):this._layerConfig[V-b]&&Se.merge(T,this._layerConfig[V-b],!0),P&&(T.virtual=P),this.insertLayer(V,T),T.initContext()),T},J.prototype.insertLayer=function(V,P){var T=this._layers,R=this._zlevelList,E=R.length,M=this._domRoot,A=null,O=-1;if(!T[V]&&function Q(J){return!(!J||!J.__builtin__&&("function"!=typeof J.resize||"function"!=typeof J.refresh))}(P)){if(E>0&&V>R[0]){for(O=0;O<E-1&&!(R[O]<V&&R[O+1]>V);O++);A=T[R[O]]}if(R.splice(O+1,0,V),T[V]=P,!P.virtual)if(A){var B=A.dom;B.nextSibling?M.insertBefore(P.dom,B.nextSibling):M.appendChild(P.dom)}else M.firstChild?M.insertBefore(P.dom,M.firstChild):M.appendChild(P.dom);P.__painter=this}},J.prototype.eachLayer=function(V,P){for(var T=this._zlevelList,R=0;R<T.length;R++){var E=T[R];V.call(P,this._layers[E],E)}},J.prototype.eachBuiltinLayer=function(V,P){for(var T=this._zlevelList,R=0;R<T.length;R++){var E=T[R],M=this._layers[E];M.__builtin__&&V.call(P,M,E)}},J.prototype.eachOtherLayer=function(V,P){for(var T=this._zlevelList,R=0;R<T.length;R++){var E=T[R],M=this._layers[E];M.__builtin__||V.call(P,M,E)}},J.prototype.getLayers=function(){return this._layers},J.prototype._updateLayerStatus=function(V){function P(ae){E&&(E.__endIndex!==ae&&(E.__dirty=!0),E.__endIndex=ae)}if(this.eachBuiltinLayer(function(ae,oe){ae.__dirty=ae.__used=!1}),this._singleCanvas)for(var T=1;T<V.length;T++)if((R=V[T]).zlevel!==V[T-1].zlevel||R.incremental){this._needsManuallyCompositing=!0;break}var A,O,E=null,M=0;for(O=0;O<V.length;O++){var R,B=(R=V[O]).zlevel,ue=void 0;A!==B&&(A=B,M=0),R.incremental?((ue=this.getLayer(B+.001,this._needsManuallyCompositing)).incremental=!0,M=1):ue=this.getLayer(B+(M>0?b:0),this._needsManuallyCompositing),ue.__builtin__||Se.logError("ZLevel "+B+" has been used by unkown layer "+ue.id),ue!==E&&(ue.__used=!0,ue.__startIndex!==O&&(ue.__dirty=!0),ue.__startIndex=O,ue.__drawIndex=ue.incremental?-1:O,P(O),E=ue),R.__dirty&he.YV&&!R.__inHover&&(ue.__dirty=!0,ue.incremental&&ue.__drawIndex<0&&(ue.__drawIndex=O))}P(O),this.eachBuiltinLayer(function(ae,oe){!ae.__used&&ae.getElementCount()>0&&(ae.__dirty=!0,ae.__startIndex=ae.__endIndex=ae.__drawIndex=0),ae.__dirty&&ae.__drawIndex<0&&(ae.__drawIndex=ae.__startIndex)})},J.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},J.prototype._clearLayer=function(V){V.clear()},J.prototype.setBackgroundColor=function(V){this._backgroundColor=V,Se.each(this._layers,function(P){P.setUnpainted()})},J.prototype.configLayer=function(V,P){if(P){var T=this._layerConfig;T[V]?Se.merge(T[V],P,!0):T[V]=P;for(var R=0;R<this._zlevelList.length;R++){var E=this._zlevelList[R];E!==V&&E!==V+b||Se.merge(this._layers[E],T[V],!0)}}},J.prototype.delLayer=function(V){var P=this._layers,T=this._zlevelList,R=P[V];!R||(R.dom.parentNode.removeChild(R.dom),delete P[V],T.splice(Se.indexOf(T,V),1))},J.prototype.resize=function(V,P){if(this._domRoot.style){var T=this._domRoot;T.style.display="none";var R=this._opts,E=this.root;if(null!=V&&(R.width=V),null!=P&&(R.height=P),V=(0,ve.ap)(E,0,R),P=(0,ve.ap)(E,1,R),T.style.display="",this._width!==V||P!==this._height){for(var M in T.style.width=V+"px",T.style.height=P+"px",this._layers)this._layers.hasOwnProperty(M)&&this._layers[M].resize(V,P);this.refresh(!0)}this._width=V,this._height=P}else{if(null==V||null==P)return;this._width=V,this._height=P,this.getLayer(K).resize(V,P)}return this},J.prototype.clearLayer=function(V){var P=this._layers[V];P&&P.clear()},J.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},J.prototype.getRenderedCanvas=function(V){if(this._singleCanvas&&!this._compositeManually)return this._layers[K].dom;var P=new U("image",this,(V=V||{}).pixelRatio||this.dpr);P.initContext(),P.clear(!1,V.backgroundColor||this._backgroundColor);var T=P.ctx;if(V.pixelRatio<=this.dpr){this.refresh();var R=P.dom.width,E=P.dom.height;this.eachLayer(function(ae){ae.__builtin__?T.drawImage(ae.dom,0,0,R,E):ae.renderToCanvas&&(T.save(),ae.renderToCanvas(T),T.restore())})}else for(var M={inHover:!1,viewWidth:this._width,viewHeight:this._height},A=this.storage.getDisplayList(!0),O=0,B=A.length;O<B;O++)(0,be.Dm)(T,A[O],M,O===B-1);return P.dom},J.prototype.getWidth=function(){return this._width},J.prototype.getHeight=function(){return this._height},J}();function W(J){J.registerPainter("canvas",G)}},5543:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>he});var ce=z(5845),Se=z(4785),le=z(9706),ye=z(8512),ve=z(7331),be=Se.NM,Ce=function(j){function X(){var re=null!==j&&j.apply(this,arguments)||this;return re.type="interval",re._interval=0,re._intervalPrecision=2,re}return(0,ce.ZT)(X,j),X.prototype.parse=function(re){return re},X.prototype.contain=function(re){return ve.XS(re,this._extent)},X.prototype.normalize=function(re){return ve.Fv(re,this._extent)},X.prototype.scale=function(re){return ve.bA(re,this._extent)},X.prototype.setExtent=function(re,U){var ee=this._extent;isNaN(re)||(ee[0]=parseFloat(re)),isNaN(U)||(ee[1]=parseFloat(U))},X.prototype.unionExtent=function(re){var U=this._extent;re[0]<U[0]&&(U[0]=re[0]),re[1]>U[1]&&(U[1]=re[1]),this.setExtent(U[0],U[1])},X.prototype.getInterval=function(){return this._interval},X.prototype.setInterval=function(re){this._interval=re,this._niceExtent=this._extent.slice(),this._intervalPrecision=ve.lb(re)},X.prototype.getTicks=function(re){var U=this._interval,ee=this._extent,$=this._niceExtent,ie=this._intervalPrecision,K=[];if(!U)return K;ee[0]<$[0]&&K.push(re?{value:be($[0]-U,ie)}:{value:ee[0]});for(var Y=$[0];Y<=$[1]&&(K.push({value:Y}),(Y=be(Y+U,ie))!==K[K.length-1].value);)if(K.length>1e4)return[];var Q=K.length?K[K.length-1].value:$[1];return ee[1]>Q&&K.push(re?{value:be(Q+U,ie)}:{value:ee[1]}),K},X.prototype.getMinorTicks=function(re){for(var U=this.getTicks(!0),ee=[],$=this.getExtent(),ie=1;ie<U.length;ie++){for(var b=U[ie-1],Y=0,Q=[],q=(U[ie].value-b.value)/re;Y<re-1;){var G=be(b.value+(Y+1)*q);G>$[0]&&G<$[1]&&Q.push(G),Y++}ee.push(Q)}return ee},X.prototype.getLabel=function(re,U){if(null==re)return"";var ee=U&&U.precision;null==ee?ee=Se.p8(re.value)||0:"auto"===ee&&(ee=this._intervalPrecision);var $=be(re.value,ee,!0);return le.OD($)},X.prototype.calcNiceTicks=function(re,U,ee){re=re||5;var $=this._extent,ie=$[1]-$[0];if(isFinite(ie)){ie<0&&(ie=-ie,$.reverse());var K=ve.Qf($,re,U,ee);this._intervalPrecision=K.intervalPrecision,this._interval=K.interval,this._niceExtent=K.niceTickExtent}},X.prototype.calcNiceExtent=function(re){var U=this._extent;if(U[0]===U[1])if(0!==U[0]){var ee=Math.abs(U[0]);re.fixMax||(U[1]+=ee/2),U[0]-=ee/2}else U[1]=1;isFinite(U[1]-U[0])||(U[0]=0,U[1]=1),this.calcNiceTicks(re.splitNumber,re.minInterval,re.maxInterval);var ie=this._interval;re.fixMin||(U[0]=be(Math.floor(U[0]/ie)*ie)),re.fixMax||(U[1]=be(Math.ceil(U[1]/ie)*ie))},X.prototype.setNiceExtent=function(re,U){this._niceExtent=[re,U]},X.type="interval",X}(ye.Z);ye.Z.registerClass(Ce);const he=Ce},3156:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>Ce});var ce=z(5845),Se=z(8512),le=z(9567),ye=z(7331),ve=z(628),be=function(he){function j(X){var re=he.call(this,X)||this;re.type="ordinal";var U=re.getSetting("ordinalMeta");return U||(U=new le.Z({})),(0,ve.isArray)(U)&&(U=new le.Z({categories:(0,ve.map)(U,function(ee){return(0,ve.isObject)(ee)?ee.value:ee})})),re._ordinalMeta=U,re._extent=re.getSetting("extent")||[0,U.categories.length-1],re}return(0,ce.ZT)(j,he),j.prototype.parse=function(X){return null==X?NaN:(0,ve.isString)(X)?this._ordinalMeta.getOrdinal(X):Math.round(X)},j.prototype.contain=function(X){return X=this.parse(X),ye.XS(X,this._extent)&&null!=this._ordinalMeta.categories[X]},j.prototype.normalize=function(X){return X=this._getTickNumber(this.parse(X)),ye.Fv(X,this._extent)},j.prototype.scale=function(X){return X=Math.round(ye.bA(X,this._extent)),this.getRawOrdinalNumber(X)},j.prototype.getTicks=function(){for(var X=[],re=this._extent,U=re[0];U<=re[1];)X.push({value:U}),U++;return X},j.prototype.getMinorTicks=function(X){},j.prototype.setSortInfo=function(X){if(null!=X){for(var re=X.ordinalNumbers,U=this._ordinalNumbersByTick=[],ee=this._ticksByOrdinalNumber=[],$=0,ie=this._ordinalMeta.categories.length,K=Math.min(ie,re.length);$<K;++$){var b=re[$];U[$]=b,ee[b]=$}for(var Y=0;$<ie;++$){for(;null!=ee[Y];)Y++;U.push(Y),ee[Y]=$}}else this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null},j.prototype._getTickNumber=function(X){var re=this._ticksByOrdinalNumber;return re&&X>=0&&X<re.length?re[X]:X},j.prototype.getRawOrdinalNumber=function(X){var re=this._ordinalNumbersByTick;return re&&X>=0&&X<re.length?re[X]:X},j.prototype.getLabel=function(X){if(!this.isBlank()){var re=this.getRawOrdinalNumber(X.value),U=this._ordinalMeta.categories[re];return null==U?"":U+""}},j.prototype.count=function(){return this._extent[1]-this._extent[0]+1},j.prototype.unionExtentFromData=function(X,re){this.unionExtent(X.getApproximateExtent(re))},j.prototype.isInExtentRange=function(X){return X=this._getTickNumber(X),this._extent[0]<=X&&this._extent[1]>=X},j.prototype.getOrdinalMeta=function(){return this._ordinalMeta},j.prototype.calcNiceTicks=function(){},j.prototype.calcNiceExtent=function(){},j.type="ordinal",j}(Se.Z);Se.Z.registerClass(be);const Ce=be},8512:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>le});var ce=z(1087),Se=function(){function ye(ve){this._setting=ve||{},this._extent=[1/0,-1/0]}return ye.prototype.getSetting=function(ve){return this._setting[ve]},ye.prototype.unionExtent=function(ve){var be=this._extent;ve[0]<be[0]&&(be[0]=ve[0]),ve[1]>be[1]&&(be[1]=ve[1])},ye.prototype.unionExtentFromData=function(ve,be){this.unionExtent(ve.getApproximateExtent(be))},ye.prototype.getExtent=function(){return this._extent.slice()},ye.prototype.setExtent=function(ve,be){var Ce=this._extent;isNaN(ve)||(Ce[0]=ve),isNaN(be)||(Ce[1]=be)},ye.prototype.isInExtentRange=function(ve){return this._extent[0]<=ve&&this._extent[1]>=ve},ye.prototype.isBlank=function(){return this._isBlank},ye.prototype.setBlank=function(ve){this._isBlank=ve},ye}();ce.au(Se);const le=Se},9020:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>Q});var ce=z(5845),Se=z(4785),le=z(999),ye=z(7331),ve=z(5543),be=z(8512),Ce=z(628),j=function(F){function q(G){var W=F.call(this,G)||this;return W.type="time",W}return(0,ce.ZT)(q,F),q.prototype.getLabel=function(G){var W=this.getSetting("useUTC");return(0,le.WU)(G.value,le.V8[(0,le.xC)((0,le.Tj)(this._minLevelUnit))]||le.V8.second,W,this.getSetting("locale"))},q.prototype.getFormattedLabel=function(G,W,J){var V=this.getSetting("useUTC"),P=this.getSetting("locale");return(0,le.k7)(G,W,J,P,V)},q.prototype.getTicks=function(){var W=this._extent,J=[];if(!this._interval)return J;J.push({value:W[0],level:0});var V=this.getSetting("useUTC"),P=function Y(F,q,G,W){var V=le.FW,P=0;function T(Ve,He,We,$e,lt,St,_t){for(var Ot=new Date(He),Vt=He,an=Ot[$e]();Vt<We&&Vt<=W[1];)_t.push({value:Vt}),Ot[lt](an+=Ve),Vt=Ot.getTime();_t.push({value:Vt,notAdd:!0})}function R(Ve,He,We){var $e=[],lt=!He.length;if(!function re(F,q,G,W){var J=Se.sG(q),V=Se.sG(G),P=function(ue){return(0,le.q5)(J,ue,W)===(0,le.q5)(V,ue,W)},T=function(){return P("year")},R=function(){return T()&&P("month")},E=function(){return R()&&P("day")},M=function(){return E()&&P("hour")},A=function(){return M()&&P("minute")},O=function(){return A()&&P("second")};switch(F){case"year":return T();case"month":return R();case"day":return E();case"hour":return M();case"minute":return A();case"second":return O();case"millisecond":return O()&&P("millisecond")}}((0,le.Tj)(Ve),W[0],W[1],G)){lt&&(He=[{value:b(new Date(W[0]),Ve,G)},{value:W[1]}]);for(var St=0;St<He.length-1;St++){var _t=He[St].value,Ot=He[St+1].value;if(_t!==Ot){var Vt=void 0,an=void 0,hn=void 0;switch(Ve){case"year":Vt=Math.max(1,Math.round(q/le.s2/365)),an=(0,le.sx)(G),hn=(0,le.xL)(G);break;case"half-year":case"quarter":case"month":Vt=ee(q),an=(0,le.CW)(G),hn=(0,le.vh)(G);break;case"week":case"half-week":case"day":Vt=U(q),an=(0,le.xz)(G),hn=(0,le.f5)(G),!0;break;case"half-day":case"quarter-day":case"hour":Vt=$(q),an=(0,le.Wp)(G),hn=(0,le.En)(G);break;case"minute":Vt=ie(q,!0),an=(0,le.fn)(G),hn=(0,le.eN)(G);break;case"second":Vt=ie(q,!1),an=(0,le.MV)(G),hn=(0,le.rM)(G);break;case"millisecond":Vt=K(q),an=(0,le.RZ)(G),hn=(0,le.cb)(G)}T(Vt,_t,Ot,an,hn,0,$e),"year"===Ve&&We.length>1&&0===St&&We.unshift({value:We[0].value-Vt})}}for(St=0;St<$e.length;St++)We.push($e[St]);return $e}}for(var E=[],M=[],A=0,O=0,B=0;B<V.length&&P++<1e4;++B){var ue=(0,le.Tj)(V[B]);if((0,le.$K)(V[B])&&(R(V[B],E[E.length-1]||[],M),ue!==(V[B+1]?(0,le.Tj)(V[B+1]):null))){if(M.length){O=A,M.sort(function(Ve,He){return Ve.value-He.value});for(var oe=[],de=0;de<M.length;++de){var te=M[de].value;(0===de||M[de-1].value!==te)&&(oe.push(M[de]),te>=W[0]&&te<=W[1]&&A++)}var xe=(W[1]-W[0])/q;if(A>1.5*xe&&O>xe/1.5||(E.push(oe),A>xe||F===V[B]))break}M=[]}}var fe=(0,Ce.filter)((0,Ce.map)(E,function(Ve){return(0,Ce.filter)(Ve,function(He){return He.value>=W[0]&&He.value<=W[1]&&!He.notAdd})}),function(Ve){return Ve.length>0}),ge=[],we=fe.length-1;for(B=0;B<fe.length;++B)for(var Te=fe[B],Ae=0;Ae<Te.length;++Ae)ge.push({value:Te[Ae].value,level:we-B});ge.sort(function(Ve,He){return Ve.value-He.value});var Ee=[];for(B=0;B<ge.length;++B)(0===B||ge[B].value!==ge[B-1].value)&&Ee.push(ge[B]);return Ee}(this._minLevelUnit,this._approxInterval,V,W);return(J=J.concat(P)).push({value:W[1],level:0}),J},q.prototype.calcNiceExtent=function(G){var W=this._extent;if(W[0]===W[1]&&(W[0]-=le.s2,W[1]+=le.s2),W[1]===-1/0&&W[0]===1/0){var J=new Date;W[1]=+new Date(J.getFullYear(),J.getMonth(),J.getDate()),W[0]=W[1]-le.s2}this.calcNiceTicks(G.splitNumber,G.minInterval,G.maxInterval)},q.prototype.calcNiceTicks=function(G,W,J){var V=this._extent;this._approxInterval=(V[1]-V[0])/(G=G||10),null!=W&&this._approxInterval<W&&(this._approxInterval=W),null!=J&&this._approxInterval>J&&(this._approxInterval=J);var T=X.length,R=Math.min(function(F,q,G,W){for(;G<W;){var J=G+W>>>1;F[J][1]<q?G=J+1:W=J}return G}(X,this._approxInterval,0,T),T-1);this._interval=X[R][1],this._minLevelUnit=X[Math.max(R-1,0)][0]},q.prototype.parse=function(G){return(0,Ce.isNumber)(G)?G:+Se.sG(G)},q.prototype.contain=function(G){return ye.XS(this.parse(G),this._extent)},q.prototype.normalize=function(G){return ye.Fv(this.parse(G),this._extent)},q.prototype.scale=function(G){return ye.bA(G,this._extent)},q.type="time",q}(ve.Z),X=[["second",le.WT],["minute",le.yR],["hour",le.dV],["quarter-day",6*le.dV],["half-day",12*le.dV],["day",1.2*le.s2],["half-week",3.5*le.s2],["week",7*le.s2],["month",31*le.s2],["quarter",95*le.s2],["half-year",le.P5/2],["year",le.P5]];function U(F,q){return(F/=le.s2)>16?16:F>7.5?7:F>3.5?4:F>1.5?2:1}function ee(F){return(F/=30*le.s2)>6?6:F>3?3:F>2?2:1}function $(F){return(F/=le.dV)>12?12:F>6?6:F>3.5?4:F>2?2:1}function ie(F,q){return(F/=q?le.yR:le.WT)>30?30:F>20?20:F>15?15:F>10?10:F>5?5:F>2?2:1}function K(F){return Se.kx(F,!0)}function b(F,q,G){var W=new Date(F);switch((0,le.Tj)(q)){case"year":case"month":W[(0,le.vh)(G)](0);case"day":W[(0,le.f5)(G)](1);case"hour":W[(0,le.En)(G)](0);case"minute":W[(0,le.eN)(G)](0);case"second":W[(0,le.rM)(G)](0),W[(0,le.cb)(G)](0)}return W.getTime()}be.Z.registerClass(j);const Q=j},7331:(Bt,Qe,z)=>{z.d(Qe,{Fv:()=>X,Qf:()=>ye,XS:()=>j,bA:()=>re,lM:()=>le,lb:()=>be,r1:()=>ve});var ce=z(4785);function le(U){return"interval"===U.type||"log"===U.type}function ye(U,ee,$,ie){var K={},Y=K.interval=(0,ce.kx)((U[1]-U[0])/ee,!0);null!=$&&Y<$&&(Y=K.interval=$),null!=ie&&Y>ie&&(Y=K.interval=ie);var Q=K.intervalPrecision=be(Y);return function he(U,ee){!isFinite(U[0])&&(U[0]=ee[0]),!isFinite(U[1])&&(U[1]=ee[1]),Ce(U,0,ee),Ce(U,1,ee),U[0]>U[1]&&(U[0]=U[1])}(K.niceTickExtent=[(0,ce.NM)(Math.ceil(U[0]/Y)*Y,Q),(0,ce.NM)(Math.floor(U[1]/Y)*Y,Q)],U),K}function ve(U){var ee=Math.pow(10,(0,ce.xW)(U)),$=U/ee;return $?2===$?$=3:3===$?$=5:$*=2:$=1,(0,ce.NM)($*ee)}function be(U){return(0,ce.p8)(U)+2}function Ce(U,ee,$){U[ee]=Math.max(Math.min(U[ee],$[1]),$[0])}function j(U,ee){return U>=ee[0]&&U<=ee[1]}function X(U,ee){return ee[1]===ee[0]?.5:(U-ee[0])/(ee[1]-ee[0])}function re(U,ee){return U*(ee[1]-ee[0])+ee[0]}},1087:(Bt,Qe,z)=>{z.d(Qe,{PT:()=>he,Qj:()=>ee,au:()=>K,dm:()=>j,pw:()=>re,u9:()=>be});var ce=z(5845),Se=z(628),ye="___EC__COMPONENT__CONTAINER___",ve="___EC__EXTENDED_CLASS___";function be(b){var Y={main:"",sub:""};if(b){var Q=b.split(".");Y.main=Q[0]||"",Y.sub=Q[1]||""}return Y}function he(b){return!(!b||!b[ve])}function j(b,Y){b.$constructor=b,b.extend=function(Q){var q,F=this;return function X(b){return Se.isFunction(b)&&/^class\s/.test(Function.prototype.toString.call(b))}(F)?q=function(G){function W(){return G.apply(this,arguments)||this}return(0,ce.ZT)(W,G),W}(F):(q=function(){(Q.$constructor||F).apply(this,arguments)},Se.inherits(q,this)),Se.extend(q.prototype,Q),q[ve]=!0,q.extend=this.extend,q.superCall=$,q.superApply=ie,q.superClass=F,q}}function re(b,Y){b.extend=Y.extend}var U=Math.round(10*Math.random());function ee(b){var Y=["__\0is_clz",U++].join("_");b.prototype[Y]=!0,b.isInstance=function(Q){return!(!Q||!Q[Y])}}function $(b,Y){for(var Q=[],F=2;F<arguments.length;F++)Q[F-2]=arguments[F];return this.superClass.prototype[Y].apply(b,Q)}function ie(b,Y,Q){return this.superClass.prototype[Y].apply(b,Q)}function K(b){var Y={};b.registerClass=function(F){var q=F.type||F.prototype.type;if(q){(function Ce(b){Se.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(b),'componentType "'+b+'" illegal')})(q),F.prototype.type=q;var G=be(q);if(G.sub){if(G.sub!==ye){var W=function Q(F){var q=Y[F.main];return(!q||!q[ye])&&((q=Y[F.main]={})[ye]=!0),q}(G);W[G.sub]=F}}else Y[G.main]=F}return F},b.getClass=function(F,q,G){var W=Y[F];if(W&&W[ye]&&(W=q?W[q]:null),G&&!W)throw new Error(q?"Component "+F+"."+(q||"")+" is used but not imported.":F+".type should be specified.");return W},b.getClassesByMainType=function(F){var q=be(F),G=[],W=Y[q.main];return W&&W[ye]?Se.each(W,function(J,V){V!==ye&&G.push(J)}):G.push(W),G},b.hasClass=function(F){var q=be(F);return!!Y[q.main]},b.getAllClassMainTypes=function(){var F=[];return Se.each(Y,function(q,G){F.push(G)}),F},b.hasSubTypes=function(F){var q=be(F),G=Y[q.main];return G&&G[ye]}}},2015:(Bt,Qe,z)=>{z.d(Qe,{Kr:()=>ye,ZL:()=>Ce,cj:()=>ve,jS:()=>be});var ce=z(628),Se=z(1087),le=Math.round(10*Math.random());function ye(he){return[he||"",le++].join("_")}function ve(he){var j={};he.registerSubTypeDefaulter=function(X,re){var U=(0,Se.u9)(X);j[U.main]=re},he.determineSubType=function(X,re){var U=re.type;if(!U){var ee=(0,Se.u9)(X).main;he.hasSubTypes(X)&&j[ee]&&(U=j[ee](re))}return U}}function be(he,j){function re(ee,$){return ee[$]||(ee[$]={predecessor:[],successor:[]}),ee[$]}he.topologicalTravel=function(ee,$,ie,K){if(ee.length){var b=function X(ee){var $={},ie=[];return ce.each(ee,function(K){var b=re($,K),Q=function U(ee,$){var ie=[];return ce.each(ee,function(K){ce.indexOf($,K)>=0&&ie.push(K)}),ie}(b.originalDeps=j(K),ee);b.entryCount=Q.length,0===b.entryCount&&ie.push(K),ce.each(Q,function(F){ce.indexOf(b.predecessor,F)<0&&b.predecessor.push(F);var q=re($,F);ce.indexOf(q.successor,F)<0&&q.successor.push(K)})}),{graph:$,noEntryList:ie}}($),Y=b.graph,Q=b.noEntryList,F={};for(ce.each(ee,function(P){F[P]=!0});Q.length;){var q=Q.pop(),G=Y[q],W=!!F[q];W&&(ie.call(K,q,G.originalDeps.slice()),delete F[q]),ce.each(G.successor,W?V:J)}ce.each(F,function(){throw new Error("")})}function J(P){Y[P].entryCount--,0===Y[P].entryCount&&Q.push(P)}function V(P){F[P]=!0,J(P)}}}function Ce(he,j){return ce.merge(ce.merge({},he,!0),j,!0)}},8177:(Bt,Qe,z)=>{z.d(Qe,{I:()=>$});var ce=Math.round(9*Math.random()),Se="function"==typeof Object.defineProperty;const ye=function(){function F(){this._id="__ec_inner_"+ce++}return F.prototype.get=function(q){return this._guard(q)[this._id]},F.prototype.set=function(q,G){var W=this._guard(q);return Se?Object.defineProperty(W,this._id,{value:G,enumerable:!1,configurable:!0}):W[this._id]=G,this},F.prototype.delete=function(q){return!!this.has(q)&&(delete this._guard(q)[this._id],!0)},F.prototype.has=function(q){return!!this._guard(q)[this._id]},F.prototype._guard=function(q){if(q!==Object(q))throw TypeError("Value of WeakMap is not a non-null object.");return q},F}();var ve=z(7148),be=z(628),Ce=z(4785),he=z(4550),j=z(9012),X=z(5730),re=new ye,U=new ve.ZP(100),ee=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function $(F,q){if("none"===F)return null;var G=q.getDevicePixelRatio(),W=q.getZr(),J="svg"===W.painter.type;F.dirty&&re.delete(F);var V=re.get(F);if(V)return V;var P=(0,be.defaults)(F,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});"none"===P.backgroundColor&&(P.backgroundColor=null);var T={repeat:"repeat"};return function R(E){for(var M=[G],A=!0,O=0;O<ee.length;++O){var B=P[ee[O]];if(null!=B&&!(0,be.isArray)(B)&&!(0,be.isString)(B)&&!(0,be.isNumber)(B)&&"boolean"!=typeof B){A=!1;break}M.push(B)}var ue;if(A){ue=M.join(",")+(J?"-svg":"");var ae=U.get(ue);ae&&(J?E.svgElement=ae:E.image=ae)}var Ae,oe=K(P.dashArrayX),de=function b(F){if(!F||"object"==typeof F&&0===F.length)return[0,0];if((0,be.isNumber)(F)){var q=Math.ceil(F);return[q,q]}var G=(0,be.map)(F,function(W){return Math.ceil(W)});return F.length%2?G.concat(G):G}(P.dashArrayY),te=ie(P.symbol),xe=function Y(F){return(0,be.map)(F,function(q){return Q(q)})}(oe),fe=Q(de),ge=!J&&X.qW.createCanvas(),we=J&&{tag:"g",attrs:{},key:"dcl",children:[]},Te=function Ee(){for(var He=1,We=0,$e=xe.length;We<$e;++We)He=(0,Ce.nl)(He,xe[We]);var lt=1;for(We=0,$e=te.length;We<$e;++We)lt=(0,Ce.nl)(lt,te[We].length);He*=lt;var St=fe*xe.length*te.length;return{width:Math.max(1,Math.min(He,P.maxTileWidth)),height:Math.max(1,Math.min(St,P.maxTileHeight))}}();ge&&(ge.width=Te.width*G,ge.height=Te.height*G,Ae=ge.getContext("2d")),function Ve(){Ae&&(Ae.clearRect(0,0,ge.width,ge.height),P.backgroundColor&&(Ae.fillStyle=P.backgroundColor,Ae.fillRect(0,0,ge.width,ge.height)));for(var He=0,We=0;We<de.length;++We)He+=de[We];if(!(He<=0))for(var $e=-fe,lt=0,St=0,_t=0;$e<Te.height;){if(lt%2==0){for(var Ot=St/2%te.length,Vt=0,an=0,hn=0;Vt<2*Te.width;){var Vn=0;for(We=0;We<oe[_t].length;++We)Vn+=oe[_t][We];if(Vn<=0)break;if(an%2==0){var ar=.5*(1-P.symbolSize);On(Vt+oe[_t][an]*ar,$e+de[lt]*ar,oe[_t][an]*P.symbolSize,de[lt]*P.symbolSize,te[Ot][hn/2%te[Ot].length])}Vt+=oe[_t][an],++hn,++an===oe[_t].length&&(an=0)}++_t===oe.length&&(_t=0)}$e+=de[lt],++St,++lt===de.length&&(lt=0)}function On(jn,Je,Dt,Gt,Rt){var fn=J?1:G,hr=(0,he.th)(Rt,jn*fn,Je*fn,Dt*fn,Gt*fn,P.color,P.symbolKeepAspect);if(J){var fr=W.painter.renderOneToVNode(hr);fr&&we.children.push(fr)}else(0,j.RV)(Ae,hr)}}(),A&&U.put(ue,ge||we),E.image=ge,E.svgElement=we,E.svgWidth=Te.width,E.svgHeight=Te.height}(T),T.rotation=P.rotation,T.scaleX=T.scaleY=J?1:1/G,re.set(F,T),F.dirty=!1,T}function ie(F){if(!F||0===F.length)return[["rect"]];if((0,be.isString)(F))return[[F]];for(var q=!0,G=0;G<F.length;++G)if(!(0,be.isString)(F[G])){q=!1;break}if(q)return ie([F]);var W=[];for(G=0;G<F.length;++G)(0,be.isString)(F[G])?W.push([F[G]]):W.push(F[G]);return W}function K(F){if(!F||0===F.length)return[[0,0]];if((0,be.isNumber)(F))return[[q=Math.ceil(F),q]];for(var G=!0,W=0;W<F.length;++W)if(!(0,be.isNumber)(F[W])){G=!1;break}if(G)return K([F]);var J=[];for(W=0;W<F.length;++W)if((0,be.isNumber)(F[W])){var q=Math.ceil(F[W]);J.push([q,q])}else q=(0,be.map)(F[W],function(T){return Math.ceil(T)}),J.push(q.length%2==1?q.concat(q):q);return J}function Q(F){for(var q=0,G=0;G<F.length;++G)q+=F[G];return F.length%2==1?2*q:q}},4649:(Bt,Qe,z)=>{function ce(Se,le,ye){for(var ve;Se&&(!le(Se)||(ve=Se,!ye));)Se=Se.__hostTarget||Se.parent;return ve}z.d(Qe,{o:()=>ce})},9706:(Bt,Qe,z)=>{z.d(Qe,{A0:()=>ee,Lz:()=>K,MI:()=>b,MY:()=>Ce,OD:()=>ve,ew:()=>ie,kF:()=>re,mr:()=>$,uX:()=>he,wx:()=>U,zW:()=>be});var ce=z(628),Se=z(2425),le=z(4785),ye=z(999);function ve(Y){if(!(0,le.kE)(Y))return ce.isString(Y)?Y:"-";var Q=(Y+"").split(".");return Q[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(Q.length>1?"."+Q[1]:"")}function be(Y,Q){return Y=(Y||"").toLowerCase().replace(/-(.)/g,function(F,q){return q.toUpperCase()}),Q&&Y&&(Y=Y.charAt(0).toUpperCase()+Y.slice(1)),Y}var Ce=ce.normalizeCssArray;function he(Y,Q,F){function G(R){return R&&ce.trim(R)?R:"-"}function W(R){return!(null==R||isNaN(R)||!isFinite(R))}var J="time"===Q,V=Y instanceof Date;if(J||V){var P=J?(0,le.sG)(Y):Y;if(!isNaN(+P))return(0,ye.WU)(P,"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}",F);if(V)return"-"}if("ordinal"===Q)return ce.isStringSafe(Y)?G(Y):ce.isNumber(Y)&&W(Y)?Y+"":"-";var T=(0,le.FK)(Y);return W(T)?ve(T):ce.isStringSafe(Y)?G(Y):"boolean"==typeof Y?Y+"":"-"}var j=["a","b","c","d","e","f","g"],X=function(Y,Q){return"{"+Y+(Q??"")+"}"};function re(Y,Q,F){ce.isArray(Q)||(Q=[Q]);var q=Q.length;if(!q)return"";for(var G=Q[0].$vars||[],W=0;W<G.length;W++){var J=j[W];Y=Y.replace(X(J),X(J,0))}for(var V=0;V<q;V++)for(var P=0;P<G.length;P++){var T=Q[V][G[P]];Y=Y.replace(X(j[P],V),F?(0,Se.F1)(T):T)}return Y}function U(Y,Q,F){return ce.each(Q,function(q,G){Y=Y.replace("{"+G+"}",F?(0,Se.F1)(q):q)}),Y}function ee(Y,Q){var F=ce.isString(Y)?{color:Y,extraCssText:Q}:Y||{},q=F.color,G=F.type;Q=F.extraCssText;var W=F.renderMode||"html";return q?"html"===W?"subItem"===G?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+(0,Se.F1)(q)+";"+(Q||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+(0,Se.F1)(q)+";"+(Q||"")+'"></span>':{renderMode:W,content:"{"+(F.markerId||"markerX")+"|}  ",style:"subItem"===G?{width:4,height:4,borderRadius:2,backgroundColor:q}:{width:10,height:10,borderRadius:5,backgroundColor:q}}:""}function $(Y,Q,F){("week"===Y||"month"===Y||"quarter"===Y||"half-year"===Y||"year"===Y)&&(Y="MM-dd\nyyyy");var q=(0,le.sG)(Q),G=F?"getUTC":"get",W=q[G+"FullYear"](),J=q[G+"Month"]()+1,V=q[G+"Date"](),P=q[G+"Hours"](),T=q[G+"Minutes"](),R=q[G+"Seconds"](),E=q[G+"Milliseconds"]();return Y.replace("MM",(0,ye.vk)(J,2)).replace("M",J).replace("yyyy",W).replace("yy",(0,ye.vk)(W%100+"",2)).replace("dd",(0,ye.vk)(V,2)).replace("d",V).replace("hh",(0,ye.vk)(P,2)).replace("h",P).replace("mm",(0,ye.vk)(T,2)).replace("m",T).replace("ss",(0,ye.vk)(R,2)).replace("s",R).replace("SSS",(0,ye.vk)(E,3))}function ie(Y){return Y&&Y.charAt(0).toUpperCase()+Y.substr(1)}function K(Y,Q){return Q=Q||"transparent",ce.isString(Y)?Y:ce.isObject(Y)&&Y.colorStops&&(Y.colorStops[0]||{}).color||Q}function b(Y,Q){if("_blank"===Q||"blank"===Q){var F=window.open();F.opener=null,F.location.href=Y}else window.open(Y,Q)}},2429:(Bt,Qe,z)=>{z.r(Qe),z.d(Qe,{Arc:()=>Y.Z,BezierCurve:()=>b.Z,BoundingRect:()=>G.Z,Circle:()=>j.Z,CompoundPath:()=>Q.Z,Ellipse:()=>X.Z,Group:()=>Ce.Z,Image:()=>be.ZP,IncrementalDisplayable:()=>V.Z,Line:()=>K.Z,LinearGradient:()=>F.Z,OrientedBoundingRect:()=>W.Z,Path:()=>ye.ZP,Point:()=>J.Z,Polygon:()=>ee.Z,Polyline:()=>$.Z,RadialGradient:()=>q.Z,Rect:()=>ie.Z,Ring:()=>U.Z,Sector:()=>re.C,Text:()=>he.ZP,applyTransform:()=>He,clipPointsByRect:()=>_t,clipRectByRect:()=>Ot,createIcon:()=>Vt,extendPath:()=>ae,extendShape:()=>B,getShapeClass:()=>de,getTransform:()=>Ve,groupTransition:()=>St,initProps:()=>E.KZ,isElementRemoved:()=>E.eq,lineLineIntersect:()=>hn,linePolygonIntersect:()=>an,makeImage:()=>xe,makePath:()=>te,mergePath:()=>ge,registerShape:()=>oe,removeElement:()=>E.bX,removeElementWithFadeOut:()=>E.XD,resizePath:()=>we,setTooltipConfig:()=>Yn,subPixelOptimize:()=>Ee,subPixelOptimizeLine:()=>Te,subPixelOptimizeRect:()=>Ae,transformDirection:()=>We,traverseElements:()=>Qn,updateProps:()=>E.D});var ce=z(9441),Se=z(3481),le=z(8221),ye=z(126),ve=z(9778),be=z(6766),Ce=z(8539),he=z(8208),j=z(9359),X=z(6743),re=z(9770),U=z(495),ee=z(3186),$=z(7834),ie=z(3160),K=z(4110),b=z(6146),Y=z(8234),Q=z(1115),F=z(5910),q=z(641),G=z(7021),W=z(6217),J=z(7564),V=z(3520),P=z(5333),T=z(628),R=z(7282),E=z(3802),M=Math.max,A=Math.min,O={};function B($t){return ye.ZP.extend($t)}var ue=ce.Pc;function ae($t,un){return ue($t,un)}function oe($t,un){O[$t]=un}function de($t){if(O.hasOwnProperty($t))return O[$t]}function te($t,un,On,jn){var Je=ce.iR($t,un);return On&&("center"===jn&&(On=fe(On,Je.getBoundingRect())),we(Je,On)),Je}function xe($t,un,On){var jn=new be.ZP({style:{image:$t,x:un.x,y:un.y,width:un.width,height:un.height},onload:function(Je){"center"===On&&jn.setStyle(fe(un,{width:Je.width,height:Je.height}))}});return jn}function fe($t,un){var Je,On=un.width/un.height,jn=$t.height*On;return Je=jn<=$t.width?$t.height:(jn=$t.width)/On,{x:$t.x+$t.width/2-jn/2,y:$t.y+$t.height/2-Je/2,width:jn,height:Je}}var ge=ce.AA;function we($t,un){if($t.applyTransform){var jn=$t.getBoundingRect().calculateTransform(un);$t.applyTransform(jn)}}function Te($t,un){return P._3($t,$t,{lineWidth:un}),$t}function Ae($t){return P.Pw($t.shape,$t.shape,$t.style),$t}var Ee=P.vu;function Ve($t,un){for(var On=Se.identity([]);$t&&$t!==un;)Se.mul(On,$t.getLocalTransform(),On),$t=$t.parent;return On}function He($t,un,On){return un&&!(0,T.isArrayLike)(un)&&(un=ve.ZP.getLocalTransform(un)),On&&(un=Se.invert([],un)),le.applyTransform([],$t,un)}function We($t,un,On){var jn=0===un[4]||0===un[5]||0===un[0]?1:Math.abs(2*un[4]/un[0]),Je=0===un[4]||0===un[5]||0===un[2]?1:Math.abs(2*un[4]/un[2]),Dt=["left"===$t?-jn:"right"===$t?jn:0,"top"===$t?-Je:"bottom"===$t?Je:0];return Dt=He(Dt,un,On),Math.abs(Dt[0])>Math.abs(Dt[1])?Dt[0]>0?"right":"left":Dt[1]>0?"bottom":"top"}function $e($t){return!$t.isGroup}function St($t,un,On){if($t&&un){var Dt=function jn(Gt){var Rt={};return Gt.traverse(function(fn){$e(fn)&&fn.anid&&(Rt[fn.anid]=fn)}),Rt}($t);un.traverse(function(Gt){if($e(Gt)&&Gt.anid){var Rt=Dt[Gt.anid];if(Rt){var fn=Je(Gt);Gt.attr(Je(Rt)),(0,E.D)(Gt,fn,On,(0,R.A)(Gt).dataIndex)}}})}function Je(Gt){var Rt={x:Gt.x,y:Gt.y,rotation:Gt.rotation};return function lt($t){return null!=$t.shape}(Gt)&&(Rt.shape=(0,T.extend)({},Gt.shape)),Rt}}function _t($t,un){return(0,T.map)($t,function(On){var jn=On[0];jn=M(jn,un.x),jn=A(jn,un.x+un.width);var Je=On[1];return Je=M(Je,un.y),[jn,Je=A(Je,un.y+un.height)]})}function Ot($t,un){var On=M($t.x,un.x),jn=A($t.x+$t.width,un.x+un.width),Je=M($t.y,un.y),Dt=A($t.y+$t.height,un.y+un.height);if(jn>=On&&Dt>=Je)return{x:On,y:Je,width:jn-On,height:Dt-Je}}function Vt($t,un,On){var jn=(0,T.extend)({rectHover:!0},un),Je=jn.style={strokeNoScale:!0};if(On=On||{x:-1,y:-1,width:2,height:2},$t)return 0===$t.indexOf("image://")?(Je.image=$t.slice(8),(0,T.defaults)(Je,On),new be.ZP(jn)):te($t.replace("path://",""),jn,On,"center")}function an($t,un,On,jn,Je){for(var Dt=0,Gt=Je[Je.length-1];Dt<Je.length;Dt++){var Rt=Je[Dt];if(hn($t,un,On,jn,Rt[0],Rt[1],Gt[0],Gt[1]))return!0;Gt=Rt}}function hn($t,un,On,jn,Je,Dt,Gt,Rt){var fn=On-$t,hr=jn-un,fr=Gt-Je,tt=Rt-Dt,it=Vn(fr,tt,fn,hr);if(function ar($t){return $t<=1e-6&&$t>=-1e-6}(it))return!1;var at=$t-Je,je=un-Dt,vt=Vn(at,je,fn,hr)/it;if(vt<0||vt>1)return!1;var ht=Vn(at,je,fr,tt)/it;return!(ht<0||ht>1)}function Vn($t,un,On,jn){return $t*jn-On*un}function Yn($t){var un=$t.itemTooltipOption,On=$t.componentModel,jn=$t.itemName,Je=(0,T.isString)(un)?{formatter:un}:un,Dt=On.mainType,Gt=On.componentIndex,Rt={componentType:Dt,name:jn,$vars:["name"]};Rt[Dt+"Index"]=Gt;var fn=$t.formatterParamsExtra;fn&&(0,T.each)((0,T.keys)(fn),function(fr){(0,T.hasOwn)(Rt,fr)||(Rt[fr]=fn[fr],Rt.$vars.push(fr))});var hr=(0,R.A)($t.el);hr.componentMainType=Dt,hr.componentIndex=Gt,hr.tooltipConfig={name:jn,option:(0,T.defaults)({content:jn,formatterParams:Rt},Je)}}function vr($t,un){var On;$t.isGroup&&(On=un($t)),On||$t.traverse(un)}function Qn($t,un){if($t)if((0,T.isArray)($t))for(var On=0;On<$t.length;On++)vr($t[On],un);else vr($t,un)}oe("circle",j.Z),oe("ellipse",X.Z),oe("sector",re.C),oe("ring",U.Z),oe("polygon",ee.Z),oe("polyline",$.Z),oe("rect",ie.Z),oe("line",K.Z),oe("bezierCurve",b.Z),oe("arc",Y.Z)},7282:(Bt,Qe,z)=>{z.d(Qe,{A:()=>Se,Q:()=>le});var Se=(0,z(1266).Yf)(),le=function(ye,ve,be,Ce){if(Ce){var he=Se(Ce);he.dataIndex=be,he.dataType=ve,he.seriesIndex=ye,"group"===Ce.type&&Ce.traverse(function(j){var X=Se(j);X.seriesIndex=ye,X.dataIndex=be,X.dataType=ve})}}},634:(Bt,Qe,z)=>{z.d(Qe,{BZ:()=>j,ME:()=>ee,QM:()=>ie,QT:()=>Q,YD:()=>K,dt:()=>b,gN:()=>be,lq:()=>U,p$:()=>$,tE:()=>Y});var ce=z(628),Se=z(7021),le=z(4785),ye=z(9706),ve=ce.each,be=["left","right","top","bottom","width","height"],Ce=[["width","left","right"],["height","top","bottom"]];function he(F,q,G,W,J){var V=0,P=0;null==W&&(W=1/0),null==J&&(J=1/0);var T=0;q.eachChild(function(R,E){var B,ue,M=R.getBoundingRect(),A=q.childAt(E+1),O=A&&A.getBoundingRect();if("horizontal"===F){var ae=M.width+(O?-O.x+M.x:0);(B=V+ae)>W||R.newline?(V=0,B=ae,P+=T+G,T=M.height):T=Math.max(T,M.height)}else{var oe=M.height+(O?-O.y+M.y:0);(ue=P+oe)>J||R.newline?(V+=T+G,P=0,ue=oe,T=M.width):T=Math.max(T,M.width)}R.newline||(R.x=V,R.y=P,R.markRedraw(),"horizontal"===F?V=B+G:P=ue+G)})}var j=he;function U(F,q,G){var W=q.width,J=q.height,V=(0,le.GM)(F.left,W),P=(0,le.GM)(F.top,J),T=(0,le.GM)(F.right,W),R=(0,le.GM)(F.bottom,J);return(isNaN(V)||isNaN(parseFloat(F.left)))&&(V=0),(isNaN(T)||isNaN(parseFloat(F.right)))&&(T=W),(isNaN(P)||isNaN(parseFloat(F.top)))&&(P=0),(isNaN(R)||isNaN(parseFloat(F.bottom)))&&(R=J),G=ye.MY(G||0),{width:Math.max(T-V-G[1]-G[3],0),height:Math.max(R-P-G[0]-G[2],0)}}function ee(F,q,G){G=ye.MY(G||0);var W=q.width,J=q.height,V=(0,le.GM)(F.left,W),P=(0,le.GM)(F.top,J),T=(0,le.GM)(F.right,W),R=(0,le.GM)(F.bottom,J),E=(0,le.GM)(F.width,W),M=(0,le.GM)(F.height,J),A=G[2]+G[0],O=G[1]+G[3],B=F.aspect;switch(isNaN(E)&&(E=W-T-O-V),isNaN(M)&&(M=J-R-A-P),null!=B&&(isNaN(E)&&isNaN(M)&&(B>W/J?E=.8*W:M=.8*J),isNaN(E)&&(E=B*M),isNaN(M)&&(M=E/B)),isNaN(V)&&(V=W-T-E-O),isNaN(P)&&(P=J-R-M-A),F.left||F.right){case"center":V=W/2-E/2-G[3];break;case"right":V=W-E-O}switch(F.top||F.bottom){case"middle":case"center":P=J/2-M/2-G[0];break;case"bottom":P=J-M-A}V=V||0,P=P||0,isNaN(E)&&(E=W-O-V-(T||0)),isNaN(M)&&(M=J-A-P-(R||0));var ue=new Se.Z(V+G[3],P+G[0],E,M);return ue.margin=G,ue}function $(F,q,G,W,J,V){var E,P=!J||!J.hv||J.hv[0],T=!J||!J.hv||J.hv[1],R=J&&J.boundingMode||"all";if((V=V||F).x=F.x,V.y=F.y,!P&&!T)return!1;if("raw"===R)E="group"===F.type?new Se.Z(0,0,+q.width||0,+q.height||0):F.getBoundingRect();else if(E=F.getBoundingRect(),F.needLocalTransform()){var M=F.getLocalTransform();(E=E.clone()).applyTransform(M)}var A=ee(ce.defaults({width:E.width,height:E.height},q),G,W),O=P?A.x-E.x:0,B=T?A.y-E.y:0;return"raw"===R?(V.x=O,V.y=B):(V.x+=O,V.y+=B),V===F&&F.markRedraw(),!0}function ie(F,q){return null!=F[Ce[q][0]]||null!=F[Ce[q][1]]&&null!=F[Ce[q][2]]}function K(F){var q=F.layoutMode||F.constructor.layoutMode;return ce.isObject(q)?q:q?{type:q}:null}function b(F,q,G){var W=G&&G.ignoreSize;!ce.isArray(W)&&(W=[W,W]);var J=P(Ce[0],0),V=P(Ce[1],1);function P(M,A){var O={},B=0,ue={},ae=0;if(ve(M,function(xe){ue[xe]=F[xe]}),ve(M,function(xe){T(q,xe)&&(O[xe]=ue[xe]=q[xe]),R(O,xe)&&B++,R(ue,xe)&&ae++}),W[A])return R(q,M[1])?ue[M[2]]=null:R(q,M[2])&&(ue[M[1]]=null),ue;if(2===ae||!B)return ue;if(B>=2)return O;for(var de=0;de<M.length;de++){var te=M[de];if(!T(O,te)&&T(F,te)){O[te]=F[te];break}}return O}function T(M,A){return M.hasOwnProperty(A)}function R(M,A){return null!=M[A]&&"auto"!==M[A]}function E(M,A,O){ve(M,function(B){A[B]=O[B]})}E(Ce[0],F,J),E(Ce[1],F,V)}function Y(F){return Q({},F)}function Q(F,q){return q&&F&&ve(be,function(G){q.hasOwnProperty(G)&&(F[G]=q[G])}),F}ce.curry(he,"vertical"),ce.curry(he,"horizontal")},5577:(Bt,Qe,z)=>{z.d(Qe,{Sh:()=>he,ZK:()=>be,_y:()=>re});var Se={},le=typeof console<"u"&&console.warn&&console.log;function be(U,ee){!function ye(U,ee,$){if(le){if($){if(Se[ee])return;Se[ee]=!0}console[U]("[ECharts] "+ee)}}("warn",U,ee)}function he(U){}function re(U){throw new Error(U)}},1266:(Bt,Qe,z)=>{z.d(Qe,{C4:()=>X,C6:()=>ae,Cc:()=>he,Co:()=>re,HZ:()=>de,IL:()=>xe,O0:()=>T,P$:()=>te,Td:()=>j,U5:()=>q,U9:()=>fe,XI:()=>E,Yf:()=>A,ab:()=>U,g0:()=>P,gO:()=>M,iP:()=>oe,kF:()=>Ce,lY:()=>V,pk:()=>we,pm:()=>B,pv:()=>ge,yu:()=>J,zH:()=>ue});var ce=z(628),Se=z(169),le=z(4785);function ye(Te,Ae,Ee){return(Ae-Te)*Ee+Te}var ve="series\0";function Ce(Te){return Te instanceof Array?Te:null==Te?[]:[Te]}function he(Te,Ae,Ee){if(Te){Te[Ae]=Te[Ae]||{},Te.emphasis=Te.emphasis||{},Te.emphasis[Ae]=Te.emphasis[Ae]||{};for(var Ve=0,He=Ee.length;Ve<He;Ve++){var We=Ee[Ve];!Te.emphasis[Ae].hasOwnProperty(We)&&Te[Ae].hasOwnProperty(We)&&(Te.emphasis[Ae][We]=Te[Ae][We])}}}var j=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function X(Te){return!(0,ce.isObject)(Te)||(0,ce.isArray)(Te)||Te instanceof Date?Te:Te.value}function re(Te){return(0,ce.isObject)(Te)&&!(Te instanceof Array)}function U(Te,Ae,Ee){var Ve="normalMerge"===Ee,He="replaceMerge"===Ee,We="replaceAll"===Ee;Te=Te||[],Ae=(Ae||[]).slice();var $e=(0,ce.createHashMap)();(0,ce.each)(Ae,function(St,_t){(0,ce.isObject)(St)||(Ae[_t]=null)});var lt=function ee(Te,Ae,Ee){var Ve=[];if("replaceAll"===Ee)return Ve;for(var He=0;He<Te.length;He++){var We=Te[He];We&&null!=We.id&&Ae.set(We.id,He),Ve.push({existing:"replaceMerge"===Ee||V(We)?null:We,newOption:null,keyInfo:null,brandNew:null})}return Ve}(Te,$e,Ee);return(Ve||He)&&function $(Te,Ae,Ee,Ve){(0,ce.each)(Ve,function(He,We){if(He&&null!=He.id){var $e=F(He.id),lt=Ee.get($e);if(null!=lt){var St=Te[lt];(0,ce.assert)(!St.newOption,'Duplicated option on id "'+$e+'".'),St.newOption=He,St.existing=Ae[lt],Ve[We]=null}}})}(lt,Te,$e,Ae),Ve&&function ie(Te,Ae){(0,ce.each)(Ae,function(Ee,Ve){if(Ee&&null!=Ee.name)for(var He=0;He<Te.length;He++){var We=Te[He].existing;if(!Te[He].newOption&&We&&(null==We.id||null==Ee.id)&&!V(Ee)&&!V(We)&&Q("name",We,Ee))return Te[He].newOption=Ee,void(Ae[Ve]=null)}})}(lt,Ae),Ve||He?function K(Te,Ae,Ee){(0,ce.each)(Ae,function(Ve){if(Ve){for(var He,We=0;(He=Te[We])&&(He.newOption||V(He.existing)||He.existing&&null!=Ve.id&&!Q("id",Ve,He.existing));)We++;He?(He.newOption=Ve,He.brandNew=Ee):Te.push({newOption:Ve,brandNew:Ee,existing:null,keyInfo:null}),We++}})}(lt,Ae,He):We&&function b(Te,Ae){(0,ce.each)(Ae,function(Ee){Te.push({newOption:Ee,brandNew:!0,existing:null,keyInfo:null})})}(lt,Ae),function Y(Te){var Ae=(0,ce.createHashMap)();(0,ce.each)(Te,function(Ee){var Ve=Ee.existing;Ve&&Ae.set(Ve.id,Ee)}),(0,ce.each)(Te,function(Ee){var Ve=Ee.newOption;(0,ce.assert)(!Ve||null==Ve.id||!Ae.get(Ve.id)||Ae.get(Ve.id)===Ee,"id duplicates: "+(Ve&&Ve.id)),Ve&&null!=Ve.id&&Ae.set(Ve.id,Ee),!Ee.keyInfo&&(Ee.keyInfo={})}),(0,ce.each)(Te,function(Ee,Ve){var He=Ee.existing,We=Ee.newOption,$e=Ee.keyInfo;if((0,ce.isObject)(We)){if($e.name=null!=We.name?F(We.name):He?He.name:ve+Ve,He)$e.id=F(He.id);else if(null!=We.id)$e.id=F(We.id);else{var lt=0;do{$e.id="\0"+$e.name+"\0"+lt++}while(Ae.get($e.id))}Ae.set($e.id,Ee)}})}(lt),lt}function Q(Te,Ae,Ee){var Ve=q(Ae[Te],null),He=q(Ee[Te],null);return null!=Ve&&null!=He&&Ve===He}function F(Te){return q(Te,"")}function q(Te,Ae){return null==Te?Ae:(0,ce.isString)(Te)?Te:(0,ce.isNumber)(Te)||(0,ce.isStringSafe)(Te)?Te+"":Ae}function J(Te){var Ae=Te.name;return!(!Ae||!Ae.indexOf(ve))}function V(Te){return Te&&null!=Te.id&&0===F(Te.id).indexOf("\0_ec_\0")}function P(Te){return"\0_ec_\0"+Te}function T(Te,Ae,Ee){(0,ce.each)(Te,function(Ve){var He=Ve.newOption;(0,ce.isObject)(He)&&(Ve.keyInfo.mainType=Ae,Ve.keyInfo.subType=function R(Te,Ae,Ee,Ve){return Ae.type?Ae.type:Ee?Ee.subType:Ve.determineSubType(Te,Ae)}(Ae,He,Ve.existing,Ee))})}function E(Te,Ae){var Ee={},Ve={};return He(Te||[],Ee),He(Ae||[],Ve,Ee),[We(Ee),We(Ve)];function He($e,lt,St){for(var _t=0,Ot=$e.length;_t<Ot;_t++){var Vt=q($e[_t].seriesId,null);if(null==Vt)return;for(var an=Ce($e[_t].dataIndex),hn=St&&St[Vt],Vn=0,ar=an.length;Vn<ar;Vn++){var Yn=an[Vn];hn&&hn[Yn]?hn[Yn]=null:(lt[Vt]||(lt[Vt]={}))[Yn]=1}}}function We($e,lt){var St=[];for(var _t in $e)if($e.hasOwnProperty(_t)&&null!=$e[_t])if(lt)St.push(+_t);else{var Ot=We($e[_t],!0);Ot.length&&St.push({seriesId:_t,dataIndex:Ot})}return St}}function M(Te,Ae){return null!=Ae.dataIndexInside?Ae.dataIndexInside:null!=Ae.dataIndex?(0,ce.isArray)(Ae.dataIndex)?(0,ce.map)(Ae.dataIndex,function(Ee){return Te.indexOfRawIndex(Ee)}):Te.indexOfRawIndex(Ae.dataIndex):null!=Ae.name?(0,ce.isArray)(Ae.name)?(0,ce.map)(Ae.name,function(Ee){return Te.indexOfName(Ee)}):Te.indexOfName(Ae.name):void 0}function A(){var Te="__ec_inner_"+O++;return function(Ae){return Ae[Te]||(Ae[Te]={})}}var O=(0,le.jj)();function B(Te,Ae,Ee){var Ve=ue(Ae,Ee),We=Ve.queryOptionMap,lt=Ve.others,St=Ee?Ee.defaultMainType:null;return!Ve.mainTypeSpecified&&St&&We.set(St,{}),We.each(function(_t,Ot){var Vt=de(Te,Ot,_t,{useDefault:St===Ot,enableAll:!Ee||null==Ee.enableAll||Ee.enableAll,enableNone:!Ee||null==Ee.enableNone||Ee.enableNone});lt[Ot+"Models"]=Vt.models,lt[Ot+"Model"]=Vt.models[0]}),lt}function ue(Te,Ae){var Ee;if((0,ce.isString)(Te)){var Ve={};Ve[Te+"Index"]=0,Ee=Ve}else Ee=Te;var He=(0,ce.createHashMap)(),We={},$e=!1;return(0,ce.each)(Ee,function(lt,St){if("dataIndex"!==St&&"dataIndexInside"!==St){var _t=St.match(/^(\w+)(Index|Id|Name)$/)||[],Ot=_t[1],Vt=(_t[2]||"").toLowerCase();!Ot||!Vt||Ae&&Ae.includeMainTypes&&(0,ce.indexOf)(Ae.includeMainTypes,Ot)<0||($e=$e||!!Ot,(He.get(Ot)||He.set(Ot,{}))[Vt]=lt)}else We[St]=lt}),{mainTypeSpecified:$e,queryOptionMap:He,others:We}}var ae={useDefault:!0,enableAll:!1,enableNone:!1},oe={useDefault:!1,enableAll:!0,enableNone:!0};function de(Te,Ae,Ee,Ve){Ve=Ve||ae;var He=Ee.index,We=Ee.id,$e=Ee.name,lt={models:null,specified:null!=He||null!=We||null!=$e};if(!lt.specified){var St=void 0;return lt.models=Ve.useDefault&&(St=Te.getComponent(Ae))?[St]:[],lt}return"none"===He||!1===He?((0,ce.assert)(Ve.enableNone,'`"none"` or `false` is not a valid value on index option.'),lt.models=[],lt):("all"===He&&((0,ce.assert)(Ve.enableAll,'`"all"` is not a valid value on index option.'),He=We=$e=null),lt.models=Te.queryComponents({mainType:Ae,index:He,id:We,name:$e}),lt)}function te(Te,Ae,Ee){Te.setAttribute?Te.setAttribute(Ae,Ee):Te[Ae]=Ee}function xe(Te,Ae){return Te.getAttribute?Te.getAttribute(Ae):Te[Ae]}function fe(Te){return"auto"===Te?Se.Z.domSupported?"html":"richText":Te||"html"}function ge(Te,Ae){var Ee=(0,ce.createHashMap)(),Ve=[];return(0,ce.each)(Te,function(He){var We=Ae(He);(Ee.get(We)||(Ve.push(We),Ee.set(We,[]))).push(He)}),{keys:Ve,buckets:Ee}}function we(Te,Ae,Ee,Ve,He){var We=null==Ae||"auto"===Ae;if(null==Ve)return Ve;if((0,ce.isNumber)(Ve)){var $e=ye(Ee||0,Ve,He);return(0,le.NM)($e,We?Math.max((0,le.p8)(Ee||0),(0,le.p8)(Ve)):Ae)}if((0,ce.isString)(Ve))return He<1?Ee:Ve;for(var lt=[],St=Ee,_t=Ve,Ot=Math.max(St?St.length:0,_t.length),Vt=0;Vt<Ot;++Vt){var an=Te.getDimensionInfo(Vt);if(an&&"ordinal"===an.type)lt[Vt]=(He<1&&St?St:_t)[Vt];else{var hn=St&&St[Vt]?St[Vt]:0,Vn=_t[Vt];$e=ye(hn,Vn,He),lt[Vt]=(0,le.NM)($e,We?Math.max((0,le.p8)(hn),(0,le.p8)(Vn)):Ae)}}return lt}},4785:(Bt,Qe,z)=>{z.d(Qe,{FK:()=>V,GM:()=>be,HD:()=>ee,M9:()=>re,NM:()=>Ce,NU:()=>ve,S$:()=>$,VR:()=>W,Xd:()=>F,YM:()=>ie,ZB:()=>X,dt:()=>he,eJ:()=>U,jj:()=>T,kE:()=>P,kx:()=>G,mW:()=>b,nR:()=>J,nl:()=>E,p8:()=>j,sG:()=>Q,wW:()=>K,xW:()=>q});var ce=z(628);function ve(M,A,O,B){var ue=A[0],ae=A[1],oe=O[0],de=O[1],te=ae-ue,xe=de-oe;if(0===te)return 0===xe?oe:(oe+de)/2;if(B)if(te>0){if(M<=ue)return oe;if(M>=ae)return de}else{if(M>=ue)return oe;if(M<=ae)return de}else{if(M===ue)return oe;if(M===ae)return de}return(M-ue)/te*xe+oe}function be(M,A){switch(M){case"center":case"middle":M="50%";break;case"left":case"top":M="0%";break;case"right":case"bottom":M="100%"}return ce.isString(M)?function ye(M){return M.replace(/^\s+|\s+$/g,"")}(M).match(/%$/)?parseFloat(M)/100*A:parseFloat(M):null==M?NaN:+M}function Ce(M,A,O){return null==A&&(A=10),A=Math.min(Math.max(0,A),20),M=(+M).toFixed(A),O?M:+M}function he(M){return M.sort(function(A,O){return A-O}),M}function j(M){if(M=+M,isNaN(M))return 0;if(M>1e-14)for(var A=1,O=0;O<15;O++,A*=10)if(Math.round(M*A)/A===M)return O;return X(M)}function X(M){var A=M.toString().toLowerCase(),O=A.indexOf("e"),B=O>0?+A.slice(O+1):0,ue=O>0?O:A.length,ae=A.indexOf(".");return Math.max(0,(ae<0?0:ue-1-ae)-B)}function re(M,A){var O=Math.log,B=Math.LN10,ue=Math.floor(O(M[1]-M[0])/B),ae=Math.round(O(Math.abs(A[1]-A[0]))/B),oe=Math.min(Math.max(-ue+ae,0),20);return isFinite(oe)?oe:20}function U(M,A,O){return M[A]&&ee(M,O)[A]||0}function ee(M,A){var O=ce.reduce(M,function(Te,Ae){return Te+(isNaN(Ae)?0:Ae)},0);if(0===O)return[];for(var B=Math.pow(10,A),ue=ce.map(M,function(Te){return(isNaN(Te)?0:Te)/O*B*100}),ae=100*B,oe=ce.map(ue,function(Te){return Math.floor(Te)}),de=ce.reduce(oe,function(Te,Ae){return Te+Ae},0),te=ce.map(ue,function(Te,Ae){return Te-oe[Ae]});de<ae;){for(var xe=Number.NEGATIVE_INFINITY,fe=null,ge=0,we=te.length;ge<we;++ge)te[ge]>xe&&(xe=te[ge],fe=ge);++oe[fe],te[fe]=0,++de}return ce.map(oe,function(Te){return Te/B})}function $(M,A){var O=Math.max(j(M),j(A)),B=M+A;return O>20?B:Ce(B,O)}var ie=9007199254740991;function K(M){var A=2*Math.PI;return(M%A+A)%A}function b(M){return M>-1e-4&&M<1e-4}var Y=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Q(M){if(M instanceof Date)return M;if(ce.isString(M)){var A=Y.exec(M);if(!A)return new Date(NaN);if(A[8]){var O=+A[4]||0;return"Z"!==A[8].toUpperCase()&&(O-=+A[8].slice(0,3)),new Date(Date.UTC(+A[1],+(A[2]||1)-1,+A[3]||1,O,+(A[5]||0),+A[6]||0,A[7]?+A[7].substring(0,3):0))}return new Date(+A[1],+(A[2]||1)-1,+A[3]||1,+A[4]||0,+(A[5]||0),+A[6]||0,A[7]?+A[7].substring(0,3):0)}return null==M?new Date(NaN):new Date(Math.round(M))}function F(M){return Math.pow(10,q(M))}function q(M){if(0===M)return 0;var A=Math.floor(Math.log(M)/Math.LN10);return M/Math.pow(10,A)>=10&&A++,A}function G(M,A){var O=q(M),B=Math.pow(10,O),ue=M/B;return M=(A?ue<1.5?1:ue<2.5?2:ue<4?3:ue<7?5:10:ue<1?1:ue<2?2:ue<3?3:ue<5?5:10)*B,O>=-20?+M.toFixed(O<0?-O:0):M}function W(M,A){var O=(M.length-1)*A+1,B=Math.floor(O),ue=+M[B-1],ae=O-B;return ae?ue+ae*(M[B]-ue):ue}function J(M){M.sort(function(te,xe){return de(te,xe,0)?-1:1});for(var A=-1/0,O=1,B=0;B<M.length;){for(var ue=M[B].interval,ae=M[B].close,oe=0;oe<2;oe++)ue[oe]<=A&&(ue[oe]=A,ae[oe]=oe?1:1-O),A=ue[oe],O=ae[oe];ue[0]===ue[1]&&ae[0]*ae[1]!=1?M.splice(B,1):B++}return M;function de(te,xe,fe){return te.interval[fe]<xe.interval[fe]||te.interval[fe]===xe.interval[fe]&&(te.close[fe]-xe.close[fe]==(fe?-1:1)||!fe&&de(te,xe,1))}}function V(M){var A=parseFloat(M);return A==M&&(0!==A||!ce.isString(M)||M.indexOf("x")<=0)?A:NaN}function P(M){return!isNaN(V(M))}function T(){return Math.round(9*Math.random())}function R(M,A){return 0===A?M:R(A,M%A)}function E(M,A){return null==M?A:null==A?M:M*A/R(M,A)}},6869:(Bt,Qe,z)=>{z.d(Qe,{$l:()=>Vn,Av:()=>fn,C5:()=>Qn,CX:()=>U,Gl:()=>ae,Hg:()=>F,Ib:()=>jn,JQ:()=>q,Ki:()=>Y,L1:()=>$,MA:()=>we,Mh:()=>Ve,Nj:()=>Rt,RW:()=>fr,SJ:()=>lt,SX:()=>He,T5:()=>_t,UL:()=>an,VP:()=>We,WO:()=>Gt,XX:()=>$e,aG:()=>tt,ci:()=>vr,e9:()=>at,fD:()=>Ee,iK:()=>G,k5:()=>On,oJ:()=>hn,og:()=>Yn,qc:()=>ie,th:()=>hr,vF:()=>$t,wU:()=>ee,xp:()=>it,xr:()=>ar,yx:()=>Q,zI:()=>Vt,zr:()=>K});var ce=z(7148),Se=z(628),le=z(7282),ye=z(312),ve=z(1266),be=z(126),Ce=1,he={},j=(0,ve.Yf)(),X=(0,ve.Yf)(),U=1,ee=2,$=["emphasis","blur","select"],ie=["normal","emphasis","blur","select"],K=10,Y="highlight",Q="downplay",F="select",q="unselect",G="toggleSelect";function W(je){return null!=je&&"none"!==je}var J=new ce.ZP(100);function V(je){if((0,Se.isString)(je)){var vt=J.get(je);return vt||(vt=ye.lift(je,-.1),J.put(je,vt)),vt}if((0,Se.isGradientObject)(je)){var ht=(0,Se.extend)({},je);return ht.colorStops=(0,Se.map)(je.colorStops,function(Pt){return{offset:Pt.offset,color:ye.lift(Pt.color,-.1)}}),ht}return je}function P(je,vt,ht){je.onHoverStateChange&&(je.hoverState||0)!==ht&&je.onHoverStateChange(vt),je.hoverState=ht}function T(je){P(je,"emphasis",ee)}function R(je){je.hoverState===ee&&P(je,"normal",0)}function E(je){P(je,"blur",U)}function M(je){je.hoverState===U&&P(je,"normal",0)}function A(je){je.selected=!0}function O(je){je.selected=!1}function B(je,vt,ht){vt(je,ht)}function ue(je,vt,ht){B(je,vt,ht),je.isGroup&&je.traverse(function(Pt){B(Pt,vt,ht)})}function ae(je,vt){switch(vt){case"emphasis":je.hoverState=ee;break;case"normal":je.hoverState=0;break;case"blur":je.hoverState=U;break;case"select":je.selected=!0}}function ge(je,vt){var ht=this.states[je];if(this.style){if("emphasis"===je)return function te(je,vt,ht,Pt){var tn=ht&&(0,Se.indexOf)(ht,"select")>=0,In=!1;if(je instanceof be.ZP){var Dn=j(je),or=tn&&Dn.selectFill||Dn.normalFill,mi=tn&&Dn.selectStroke||Dn.normalStroke;if(W(or)||W(mi)){var sr=(Pt=Pt||{}).style||{};"inherit"===sr.fill?(In=!0,Pt=(0,Se.extend)({},Pt),(sr=(0,Se.extend)({},sr)).fill=or):!W(sr.fill)&&W(or)?(In=!0,Pt=(0,Se.extend)({},Pt),(sr=(0,Se.extend)({},sr)).fill=V(or)):!W(sr.stroke)&&W(mi)&&(In||(Pt=(0,Se.extend)({},Pt),sr=(0,Se.extend)({},sr)),sr.stroke=V(mi)),Pt.style=sr}}return Pt&&null==Pt.z2&&(In||(Pt=(0,Se.extend)({},Pt)),Pt.z2=je.z2+(je.z2EmphasisLift??K)),Pt}(this,0,vt,ht);if("blur"===je)return function fe(je,vt,ht){var Pt=(0,Se.indexOf)(je.currentStates,vt)>=0,tn=je.style.opacity,In=Pt?null:function de(je,vt,ht,Pt){for(var tn=je.style,In={},Dn=0;Dn<vt.length;Dn++){var or=vt[Dn];In[or]=tn[or]??(Pt&&Pt[or])}for(Dn=0;Dn<je.animators.length;Dn++){var sr=je.animators[Dn];sr.__fromStateTransition&&sr.__fromStateTransition.indexOf(ht)<0&&"style"===sr.targetName&&sr.saveTo(In,vt)}return In}(je,["opacity"],vt,{opacity:1}),Dn=(ht=ht||{}).style||{};return null==Dn.opacity&&(ht=(0,Se.extend)({},ht),Dn=(0,Se.extend)({opacity:Pt?tn:.1*In.opacity},Dn),ht.style=Dn),ht}(this,je,ht);if("select"===je)return function xe(je,vt,ht){return ht&&null==ht.z2&&((ht=(0,Se.extend)({},ht)).z2=je.z2+(je.z2SelectLift??9)),ht}(this,0,ht)}return ht}function we(je){je.stateProxy=ge;var vt=je.getTextContent(),ht=je.getTextGuideLine();vt&&(vt.stateProxy=ge),ht&&(ht.stateProxy=ge)}function Te(je,vt){!St(je,vt)&&!je.__highByOuter&&ue(je,T)}function Ae(je,vt){!St(je,vt)&&!je.__highByOuter&&ue(je,R)}function Ee(je,vt){je.__highByOuter|=1<<(vt||0),ue(je,T)}function Ve(je,vt){!(je.__highByOuter&=~(1<<(vt||0)))&&ue(je,R)}function He(je){ue(je,E)}function We(je){ue(je,M)}function $e(je){ue(je,A)}function lt(je){ue(je,O)}function St(je,vt){return je.__highDownSilentOnTouch&&vt.zrByTouch}function _t(je){var vt=je.getModel(),ht=[],Pt=[];vt.eachComponent(function(tn,In){var Dn=X(In),or="series"===tn,mi=or?je.getViewOfSeriesModel(In):je.getViewOfComponentModel(In);!or&&Pt.push(mi),Dn.isBlured&&(mi.group.traverse(function(sr){M(sr)}),or&&ht.push(In)),Dn.isBlured=!1}),(0,Se.each)(Pt,function(tn){tn&&tn.toggleBlurSeries&&tn.toggleBlurSeries(ht,!1,vt)})}function Ot(je,vt,ht,Pt){var tn=Pt.getModel();function In(sr,Ji){for(var ra=0;ra<Ji.length;ra++){var Yl=sr.getItemGraphicEl(Ji[ra]);Yl&&We(Yl)}}if(ht=ht||"coordinateSystem",null!=je&&vt&&"none"!==vt){var Dn=tn.getSeriesByIndex(je),or=Dn.coordinateSystem;or&&or.master&&(or=or.master);var mi=[];tn.eachSeries(function(sr){var Ji=Dn===sr,ra=sr.coordinateSystem;if(ra&&ra.master&&(ra=ra.master),!("series"===ht&&!Ji||"coordinateSystem"===ht&&!(ra&&or?ra===or:Ji)||"series"===vt&&Ji)){if(Pt.getViewOfSeriesModel(sr).group.traverse(function(ua){E(ua)}),(0,Se.isArrayLike)(vt))In(sr.getData(),vt);else if((0,Se.isObject)(vt))for(var Sa=(0,Se.keys)(vt),qa=0;qa<Sa.length;qa++)In(sr.getData(Sa[qa]),vt[Sa[qa]]);mi.push(sr),X(sr).isBlured=!0}}),tn.eachComponent(function(sr,Ji){if("series"!==sr){var ra=Pt.getViewOfComponentModel(Ji);ra&&ra.toggleBlurSeries&&ra.toggleBlurSeries(mi,!0,tn)}})}}function Vt(je,vt,ht){if(null!=je&&null!=vt){var Pt=ht.getModel().getComponent(je,vt);if(Pt){X(Pt).isBlured=!0;var tn=ht.getViewOfComponentModel(Pt);!tn||!tn.focusBlurEnabled||tn.group.traverse(function(In){E(In)})}}}function an(je,vt,ht){var Pt=je.seriesIndex,tn=je.getData(vt.dataType);if(tn){var In=(0,ve.gO)(tn,vt);In=((0,Se.isArray)(In)?In[0]:In)||0;var Dn=tn.getItemGraphicEl(In);if(!Dn)for(var or=tn.count(),mi=0;!Dn&&mi<or;)Dn=tn.getItemGraphicEl(mi++);if(Dn){var sr=(0,le.A)(Dn);Ot(Pt,sr.focus,sr.blurScope,ht)}else{var Ji=je.get(["emphasis","focus"]),ra=je.get(["emphasis","blurScope"]);null!=Ji&&Ot(Pt,Ji,ra,ht)}}}function hn(je,vt,ht,Pt){var tn={focusSelf:!1,dispatchers:null};if(null==je||"series"===je||null==vt||null==ht)return tn;var In=Pt.getModel().getComponent(je,vt);if(!In)return tn;var Dn=Pt.getViewOfComponentModel(In);if(!Dn||!Dn.findHighDownDispatchers)return tn;for(var mi,or=Dn.findHighDownDispatchers(ht),sr=0;sr<or.length;sr++)if("self"===(0,le.A)(or[sr]).focus){mi=!0;break}return{focusSelf:mi,dispatchers:or}}function Vn(je,vt,ht){var Pt=(0,le.A)(je),tn=hn(Pt.componentMainType,Pt.componentIndex,Pt.componentHighDownName,ht),In=tn.dispatchers;In?(tn.focusSelf&&Vt(Pt.componentMainType,Pt.componentIndex,ht),(0,Se.each)(In,function(or){return Te(or,vt)})):(Ot(Pt.seriesIndex,Pt.focus,Pt.blurScope,ht),"self"===Pt.focus&&Vt(Pt.componentMainType,Pt.componentIndex,ht),Te(je,vt))}function ar(je,vt,ht){_t(ht);var Pt=(0,le.A)(je),tn=hn(Pt.componentMainType,Pt.componentIndex,Pt.componentHighDownName,ht).dispatchers;tn?(0,Se.each)(tn,function(In){return Ae(In,vt)}):Ae(je,vt)}function Yn(je,vt,ht){if(tt(vt)){var Pt=vt.dataType,tn=je.getData(Pt),In=(0,ve.gO)(tn,vt);(0,Se.isArray)(In)||(In=[In]),je[vt.type===G?"toggleSelect":vt.type===F?"select":"unselect"](In,Pt)}}function vr(je){var vt=je.getAllData();(0,Se.each)(vt,function(ht){var tn=ht.type;ht.data.eachItemGraphicEl(function(In,Dn){je.isSelected(Dn,tn)?$e(In):lt(In)})})}function Qn(je){var vt=[];return je.eachSeries(function(ht){var Pt=ht.getAllData();(0,Se.each)(Pt,function(tn){var Dn=tn.type,or=ht.getSelectedDataIndices();if(or.length>0){var mi={dataIndex:or,seriesIndex:ht.seriesIndex};null!=Dn&&(mi.dataType=Dn),vt.push(mi)}})}),vt}function $t(je,vt,ht){Rt(je,!0),ue(je,we),jn(je,vt,ht)}function On(je,vt,ht,Pt){Pt?function un(je){Rt(je,!1)}(je):$t(je,vt,ht)}function jn(je,vt,ht){var Pt=(0,le.A)(je);null!=vt?(Pt.focus=vt,Pt.blurScope=ht):Pt.focus&&(Pt.focus=null)}var Je=["emphasis","blur","select"],Dt={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function Gt(je,vt,ht,Pt){ht=ht||"itemStyle";for(var tn=0;tn<Je.length;tn++){var In=Je[tn],Dn=vt.getModel([In,ht]);je.ensureState(In).style=Pt?Pt(Dn):Dn[Dt[ht]]()}}function Rt(je,vt){var ht=!1===vt,Pt=je;je.highDownSilentOnTouch&&(Pt.__highDownSilentOnTouch=je.highDownSilentOnTouch),(!ht||Pt.__highDownDispatcher)&&(Pt.__highByOuter=Pt.__highByOuter||0,Pt.__highDownDispatcher=!ht)}function fn(je){return!(!je||!je.__highDownDispatcher)}function hr(je,vt,ht){var Pt=(0,le.A)(je);Pt.componentMainType=vt.mainType,Pt.componentIndex=vt.componentIndex,Pt.componentHighDownName=ht}function fr(je){var vt=he[je];return null==vt&&Ce<=32&&(vt=he[je]=Ce++),vt}function tt(je){var vt=je.type;return vt===F||vt===q||vt===G}function it(je){var vt=je.type;return vt===Y||vt===Q}function at(je){var vt=j(je);vt.normalFill=je.style.fill,vt.normalStroke=je.style.stroke;var ht=je.states.select||{};vt.selectFill=ht.style&&ht.style.fill||null,vt.selectStroke=ht.style&&ht.style.stroke||null}},4550:(Bt,Qe,z)=>{z.d(Qe,{Cq:()=>q,Pw:()=>K,th:()=>Q,zp:()=>F});var ce=z(628),Se=z(126),le=z(4110),ye=z(3160),ve=z(9359),be=z(2429),Ce=z(7021),he=z(1790),j=z(4785),X=Se.ZP.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(G,W){var J=W.cx,V=W.cy,P=W.width/2,T=W.height/2;G.moveTo(J,V-T),G.lineTo(J+P,V+T),G.lineTo(J-P,V+T),G.closePath()}}),re=Se.ZP.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(G,W){var J=W.cx,V=W.cy,P=W.width/2,T=W.height/2;G.moveTo(J,V-T),G.lineTo(J+P,V),G.lineTo(J,V+T),G.lineTo(J-P,V),G.closePath()}}),U=Se.ZP.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(G,W){var J=W.x,V=W.y,P=W.width/5*3,T=Math.max(P,W.height),R=P/2,E=R*R/(T-R),M=V-T+R+E,A=Math.asin(E/R),O=Math.cos(A)*R,B=Math.sin(A),ue=Math.cos(A),ae=.6*R,oe=.7*R;G.moveTo(J-O,M+E),G.arc(J,M,R,Math.PI-A,2*Math.PI+A),G.bezierCurveTo(J+O-B*ae,M+E+ue*ae,J,V-oe,J,V),G.bezierCurveTo(J,V-oe,J-O+B*ae,M+E+ue*ae,J-O,M+E),G.closePath()}}),ee=Se.ZP.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(G,W){var J=W.height,P=W.x,T=W.y,R=W.width/3*2;G.moveTo(P,T),G.lineTo(P+R,T+J),G.lineTo(P,T+J/4*3),G.lineTo(P-R,T+J),G.lineTo(P,T),G.closePath()}}),ie={line:function(G,W,J,V,P){P.x1=G,P.y1=W+V/2,P.x2=G+J,P.y2=W+V/2},rect:function(G,W,J,V,P){P.x=G,P.y=W,P.width=J,P.height=V},roundRect:function(G,W,J,V,P){P.x=G,P.y=W,P.width=J,P.height=V,P.r=Math.min(J,V)/4},square:function(G,W,J,V,P){var T=Math.min(J,V);P.x=G,P.y=W,P.width=T,P.height=T},circle:function(G,W,J,V,P){P.cx=G+J/2,P.cy=W+V/2,P.r=Math.min(J,V)/2},diamond:function(G,W,J,V,P){P.cx=G+J/2,P.cy=W+V/2,P.width=J,P.height=V},pin:function(G,W,J,V,P){P.x=G+J/2,P.y=W+V/2,P.width=J,P.height=V},arrow:function(G,W,J,V,P){P.x=G+J/2,P.y=W+V/2,P.width=J,P.height=V},triangle:function(G,W,J,V,P){P.cx=G+J/2,P.cy=W+V/2,P.width=J,P.height=V}},K={};(0,ce.each)({line:le.Z,rect:ye.Z,roundRect:ye.Z,square:ye.Z,circle:ve.Z,diamond:re,pin:U,arrow:ee,triangle:X},function(G,W){K[W]=new G});var b=Se.ZP.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(G,W,J){var V=(0,he.wI)(G,W,J),P=this.shape;return P&&"pin"===P.symbolType&&"inside"===W.position&&(V.y=J.y+.4*J.height),V},buildPath:function(G,W,J){var V=W.symbolType;if("none"!==V){var P=K[V];P||(P=K[V="rect"]),ie[V](W.x,W.y,W.width,W.height,P.shape),P.buildPath(G,P.shape,J)}}});function Y(G,W){if("image"!==this.type){var J=this.style;this.__isEmptyBrush?(J.stroke=G,J.fill=W||"#fff",J.lineWidth=2):"line"===this.shape.symbolType?J.stroke=G:J.fill=G,this.markRedraw()}}function Q(G,W,J,V,P,T,R){var M,E=0===G.indexOf("empty");return E&&(G=G.substr(5,1).toLowerCase()+G.substr(6)),(M=0===G.indexOf("image://")?be.makeImage(G.slice(8),new Ce.Z(W,J,V,P),R?"center":"cover"):0===G.indexOf("path://")?be.makePath(G.slice(7),{},new Ce.Z(W,J,V,P),R?"center":"cover"):new b({shape:{symbolType:G,x:W,y:J,width:V,height:P}})).__isEmptyBrush=E,M.setColor=Y,T&&M.setColor(T),M}function F(G){return(0,ce.isArray)(G)||(G=[+G,+G]),[G[0]||0,G[1]||0]}function q(G,W){if(null!=G)return(0,ce.isArray)(G)||(G=[G,G]),[(0,j.GM)(G[0],W[0])||0,(0,j.GM)((0,ce.retrieve2)(G[1],G[0]),W[1])||0]}},357:(Bt,Qe,z)=>{z.d(Qe,{P2:()=>ye,T9:()=>ve,ZH:()=>be});var ce="\0__throttleOriginMethod",Se="\0__throttleRate",le="\0__throttleType";function ye(Ce,he,j){var X,$,ie,K,b,re=0,U=0,ee=null;function Y(){U=(new Date).getTime(),ee=null,Ce.apply(ie,K||[])}he=he||0;var Q=function(){for(var F=[],q=0;q<arguments.length;q++)F[q]=arguments[q];X=(new Date).getTime(),ie=this,K=F;var G=b||he,W=b||j;b=null,$=X-(W?re:U)-G,clearTimeout(ee),W?ee=setTimeout(Y,G):$>=0?Y():ee=setTimeout(Y,-$),re=X};return Q.clear=function(){ee&&(clearTimeout(ee),ee=null)},Q.debounceNextCall=function(F){b=F},Q}function ve(Ce,he,j,X){var re=Ce[he];if(re){var U=re[ce]||re;if(re[Se]!==j||re[le]!==X){if(null==j||!X)return Ce[he]=U;(re=Ce[he]=ye(U,j,"debounce"===X))[ce]=U,re[le]=X,re[Se]=j}return re}}function be(Ce,he){var j=Ce[he];j&&j[ce]&&(j.clear&&j.clear(),Ce[he]=j[ce])}},999:(Bt,Qe,z)=>{z.d(Qe,{$K:()=>b,CW:()=>J,En:()=>B,FW:()=>$,MV:()=>R,P5:()=>j,RZ:()=>E,Tj:()=>K,V8:()=>U,WT:()=>ve,WU:()=>Q,Wp:()=>P,cb:()=>oe,dV:()=>Ce,eN:()=>ue,f5:()=>O,fn:()=>T,k7:()=>F,q5:()=>G,rM:()=>ae,s2:()=>he,sx:()=>W,vh:()=>A,vk:()=>ie,xC:()=>Y,xL:()=>M,xz:()=>V,yR:()=>be});var ce=z(628),Se=z(4785),le=z(5514),ye=z(1725),ve=1e3,be=60*ve,Ce=60*be,he=24*Ce,j=365*he,X={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},re="{yyyy}-{MM}-{dd}",U={year:"{yyyy}",month:"{yyyy}-{MM}",day:re,hour:re+" "+X.hour,minute:re+" "+X.minute,second:re+" "+X.second,millisecond:X.none},ee=["year","month","day","hour","minute","second","millisecond"],$=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function ie(de,te){return"0000".substr(0,te-(de+="").length)+de}function K(de){switch(de){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return de}}function b(de){return de===K(de)}function Y(de){switch(de){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function Q(de,te,xe,fe){var ge=Se.sG(de),we=ge[W(xe)](),Te=ge[J(xe)]()+1,Ae=Math.floor((Te-1)/3)+1,Ee=ge[V(xe)](),Ve=ge["get"+(xe?"UTC":"")+"Day"](),He=ge[P(xe)](),We=(He-1)%12+1,$e=ge[T(xe)](),lt=ge[R(xe)](),St=ge[E(xe)](),Ot=(fe instanceof ye.Z?fe:(0,le.G8)(fe||le.sO)||(0,le.Li)()).getModel("time"),Vt=Ot.get("month"),an=Ot.get("monthAbbr"),hn=Ot.get("dayOfWeek"),Vn=Ot.get("dayOfWeekAbbr");return(te||"").replace(/{yyyy}/g,we+"").replace(/{yy}/g,we%100+"").replace(/{Q}/g,Ae+"").replace(/{MMMM}/g,Vt[Te-1]).replace(/{MMM}/g,an[Te-1]).replace(/{MM}/g,ie(Te,2)).replace(/{M}/g,Te+"").replace(/{dd}/g,ie(Ee,2)).replace(/{d}/g,Ee+"").replace(/{eeee}/g,hn[Ve]).replace(/{ee}/g,Vn[Ve]).replace(/{e}/g,Ve+"").replace(/{HH}/g,ie(He,2)).replace(/{H}/g,He+"").replace(/{hh}/g,ie(We+"",2)).replace(/{h}/g,We+"").replace(/{mm}/g,ie($e,2)).replace(/{m}/g,$e+"").replace(/{ss}/g,ie(lt,2)).replace(/{s}/g,lt+"").replace(/{SSS}/g,ie(St,3)).replace(/{S}/g,St+"")}function F(de,te,xe,fe,ge){var we=null;if(ce.isString(xe))we=xe;else if(ce.isFunction(xe))we=xe(de.value,te,{level:de.level});else{var Te=ce.extend({},X);if(de.level>0)for(var Ae=0;Ae<ee.length;++Ae)Te[ee[Ae]]="{primary|"+Te[ee[Ae]]+"}";var Ee=xe?!1===xe.inherit?xe:ce.defaults(xe,Te):Te,Ve=q(de.value,ge);if(Ee[Ve])we=Ee[Ve];else if(Ee.inherit){for(Ae=$.indexOf(Ve)-1;Ae>=0;--Ae)if(Ee[Ve]){we=Ee[Ve];break}we=we||Te.none}if(ce.isArray(we)){var We=null==de.level?0:de.level>=0?de.level:we.length+de.level;we=we[We=Math.min(We,we.length-1)]}}return Q(new Date(de.value),we,ge,fe)}function q(de,te){var xe=Se.sG(de),fe=xe[J(te)]()+1,ge=xe[V(te)](),we=xe[P(te)](),Te=xe[T(te)](),Ae=xe[R(te)](),Ve=0===xe[E(te)](),He=Ve&&0===Ae,We=He&&0===Te,$e=We&&0===we,lt=$e&&1===ge;return lt&&1===fe?"year":lt?"month":$e?"day":We?"hour":He?"minute":Ve?"second":"millisecond"}function G(de,te,xe){var fe=ce.isNumber(de)?Se.sG(de):de;switch(te=te||q(de,xe)){case"year":return fe[W(xe)]();case"half-year":return fe[J(xe)]()>=6?1:0;case"quarter":return Math.floor((fe[J(xe)]()+1)/4);case"month":return fe[J(xe)]();case"day":return fe[V(xe)]();case"half-day":return fe[P(xe)]()/24;case"hour":return fe[P(xe)]();case"minute":return fe[T(xe)]();case"second":return fe[R(xe)]();case"millisecond":return fe[E(xe)]()}}function W(de){return de?"getUTCFullYear":"getFullYear"}function J(de){return de?"getUTCMonth":"getMonth"}function V(de){return de?"getUTCDate":"getDate"}function P(de){return de?"getUTCHours":"getHours"}function T(de){return de?"getUTCMinutes":"getMinutes"}function R(de){return de?"getUTCSeconds":"getSeconds"}function E(de){return de?"getUTCMilliseconds":"getMilliseconds"}function M(de){return de?"setUTCFullYear":"setFullYear"}function A(de){return de?"setUTCMonth":"setMonth"}function O(de){return de?"setUTCDate":"setDate"}function B(de){return de?"setUTCHours":"setHours"}function ue(de){return de?"setUTCMinutes":"setMinutes"}function ae(de){return de?"setUTCSeconds":"setSeconds"}function oe(de){return de?"setUTCMilliseconds":"setMilliseconds"}},4367:(Bt,Qe,z)=>{z.d(Qe,{J5:()=>Ce,RA:()=>he,Wc:()=>X,XD:()=>ye,cy:()=>le,f7:()=>Se,fY:()=>j,hL:()=>be,qb:()=>ve});var Se=(0,z(628).createHashMap)(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),le="original",ye="arrayRows",ve="objectRows",be="keyedColumns",Ce="typedArray",he="unknown",j="column",X="row"},3133:(Bt,Qe,z)=>{z.d(Qe,{o:()=>ye});var ce=z(628),Se=typeof Float32Array<"u",le=Se?Float32Array:Array;function ye(ve){return(0,ce.isArray)(ve)?Se?new Float32Array(ve):ve:new le(ve)}},1005:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>Y});var ce=z(628),Se=z(8539),le=z(2015),ye=z(1087),ve=z(1266),be=z(6869),Ce=z(6861),he=z(5103),j=z(2429),X=ve.Yf(),re=(0,he.Z)(),U=function(){function Q(){this.group=new Se.Z,this.uid=le.Kr("viewChart"),this.renderTask=(0,Ce.v)({plan:ie,reset:K}),this.renderTask.context={view:this}}return Q.prototype.init=function(F,q){},Q.prototype.render=function(F,q,G,W){},Q.prototype.highlight=function(F,q,G,W){var J=F.getData(W&&W.dataType);!J||$(J,W,"emphasis")},Q.prototype.downplay=function(F,q,G,W){var J=F.getData(W&&W.dataType);!J||$(J,W,"normal")},Q.prototype.remove=function(F,q){this.group.removeAll()},Q.prototype.dispose=function(F,q){},Q.prototype.updateView=function(F,q,G,W){this.render(F,q,G,W)},Q.prototype.updateLayout=function(F,q,G,W){this.render(F,q,G,W)},Q.prototype.updateVisual=function(F,q,G,W){this.render(F,q,G,W)},Q.prototype.eachRendered=function(F){(0,j.traverseElements)(this.group,F)},Q.markUpdateMethod=function(F,q){X(F).updateMethod=q},Q.protoInitialize=void(Q.prototype.type="chart"),Q}();function ee(Q,F,q){Q&&(0,be.Av)(Q)&&("emphasis"===F?be.fD:be.Mh)(Q,q)}function $(Q,F,q){var G=ve.gO(Q,F),W=F&&null!=F.highlightKey?(0,be.RW)(F.highlightKey):null;null!=G?(0,ce.each)(ve.kF(G),function(J){ee(Q.getItemGraphicEl(J),q,W)}):Q.eachItemGraphicEl(function(J){ee(J,q,W)})}function ie(Q){return re(Q.model)}function K(Q){var F=Q.model,q=Q.ecModel,G=Q.api,W=Q.payload,J=F.pipelineContext.progressiveRender,V=Q.view,P=W&&X(W).updateMethod,T=J?"incrementalPrepareRender":P&&V[P]?P:"render";return"render"!==T&&V[T](F,q,G,W),b[T]}ye.dm(U,["dispose"]),ye.au(U);var b={incrementalPrepareRender:{progress:function(Q,F){F.view.incrementalRender(Q,F.model,F.ecModel,F.api,F.payload)}},render:{forceFirstProgress:!0,progress:function(Q,F){F.view.render(F.model,F.ecModel,F.api,F.payload)}}};const Y=U},9899:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>ve});var ce=z(8539),Se=z(2015),le=z(1087),ye=function(){function be(){this.group=new ce.Z,this.uid=Se.Kr("viewComponent")}return be.prototype.init=function(Ce,he){},be.prototype.render=function(Ce,he,j,X){},be.prototype.dispose=function(Ce,he){},be.prototype.updateView=function(Ce,he,j,X){},be.prototype.updateLayout=function(Ce,he,j,X){},be.prototype.updateVisual=function(Ce,he,j,X){},be.prototype.toggleBlurSeries=function(Ce,he,j){},be.prototype.eachRendered=function(Ce){var he=this.group;he&&he.traverse(Ce)},be}();le.dm(ye),le.au(ye);const ve=ye},5018:(Bt,Qe,z)=>{function ce(ye,ve,be){switch(be){case"color":return ye.getItemVisual(ve,"style")[ye.getVisual("drawType")];case"opacity":return ye.getItemVisual(ve,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return ye.getItemVisual(ve,be)}}function Se(ye,ve){switch(ve){case"color":return ye.getVisual("style")[ye.getVisual("drawType")];case"opacity":return ye.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return ye.getVisual(ve)}}function le(ye,ve,be,Ce){switch(be){case"color":ye.ensureUniqueItemVisual(ve,"style")[ye.getVisual("drawType")]=Ce,ye.setItemVisual(ve,"colorFromPalette",!1);break;case"opacity":ye.ensureUniqueItemVisual(ve,"style").opacity=Ce;break;case"symbol":case"symbolSize":case"liftZ":ye.setItemVisual(ve,be,Ce)}}z.d(Qe,{LZ:()=>le,Or:()=>ce,UL:()=>Se})},1386:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>W});var ce=z(9778),Se=z(6062),le=z(7021),ye=z(6801),ve=z(1790),be=z(628),Ce=z(6704),he=z(312),j=z(2369),X="__zr_normal__",re=ce.dN.concat(["ignore"]),U=(0,be.reduce)(ce.dN,function(J,V){return J[V]=!0,J},{ignore:!1}),ee={},$=new le.Z(0,0,0,0),ie=function(){function J(V){this.id=(0,be.guid)(),this.animators=[],this.currentStates=[],this.states={},this._init(V)}return J.prototype._init=function(V){this.attr(V)},J.prototype.drift=function(V,P,T){switch(this.draggable){case"horizontal":P=0;break;case"vertical":V=0}var R=this.transform;R||(R=this.transform=[1,0,0,1,0,0]),R[4]+=V,R[5]+=P,this.decomposeTransform(),this.markRedraw()},J.prototype.beforeUpdate=function(){},J.prototype.afterUpdate=function(){},J.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},J.prototype.updateInnerText=function(V){var P=this._textContent;if(P&&(!P.ignore||V)){this.textConfig||(this.textConfig={});var T=this.textConfig,R=T.local,E=P.innerTransformable,M=void 0,A=void 0,O=!1;E.parent=R?this:null;var B=!1;if(E.copyTransform(P),null!=T.position){var ue=$;ue.copy(T.layoutRect?T.layoutRect:this.getBoundingRect()),R||ue.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(ee,T,ue):(0,ve.wI)(ee,T,ue),E.x=ee.x,E.y=ee.y,M=ee.align,A=ee.verticalAlign;var ae=T.origin;if(ae&&null!=T.rotation){var oe=void 0,de=void 0;"center"===ae?(oe=.5*ue.width,de=.5*ue.height):(oe=(0,ve.GM)(ae[0],ue.width),de=(0,ve.GM)(ae[1],ue.height)),B=!0,E.originX=-E.x+oe+(R?0:ue.x),E.originY=-E.y+de+(R?0:ue.y)}}null!=T.rotation&&(E.rotation=T.rotation);var te=T.offset;te&&(E.x+=te[0],E.y+=te[1],B||(E.originX=-te[0],E.originY=-te[1]));var xe=T.inside??("string"==typeof T.position&&T.position.indexOf("inside")>=0),fe=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),ge=void 0,we=void 0,Te=void 0;xe&&this.canBeInsideText()?(we=T.insideStroke,(null==(ge=T.insideFill)||"auto"===ge)&&(ge=this.getInsideTextFill()),(null==we||"auto"===we)&&(we=this.getInsideTextStroke(ge),Te=!0)):(we=T.outsideStroke,(null==(ge=T.outsideFill)||"auto"===ge)&&(ge=this.getOutsideFill()),(null==we||"auto"===we)&&(we=this.getOutsideStroke(ge),Te=!0)),((ge=ge||"#000")!==fe.fill||we!==fe.stroke||Te!==fe.autoStroke||M!==fe.align||A!==fe.verticalAlign)&&(O=!0,fe.fill=ge,fe.stroke=we,fe.autoStroke=Te,fe.align=M,fe.verticalAlign=A,P.setDefaultTextStyle(fe)),P.__dirty|=j.YV,O&&P.dirtyStyle(!0)}},J.prototype.canBeInsideText=function(){return!0},J.prototype.getInsideTextFill=function(){return"#fff"},J.prototype.getInsideTextStroke=function(V){return"#000"},J.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?Ce.GD:Ce.vU},J.prototype.getOutsideStroke=function(V){var P=this.__zr&&this.__zr.getBackgroundColor(),T="string"==typeof P&&(0,he.parse)(P);T||(T=[255,255,255,1]);for(var R=T[3],E=this.__zr.isDarkMode(),M=0;M<3;M++)T[M]=T[M]*R+(E?0:255)*(1-R);return T[3]=1,(0,he.stringify)(T,"rgba")},J.prototype.traverse=function(V,P){},J.prototype.attrKV=function(V,P){"textConfig"===V?this.setTextConfig(P):"textContent"===V?this.setTextContent(P):"clipPath"===V?this.setClipPath(P):"extra"===V?(this.extra=this.extra||{},(0,be.extend)(this.extra,P)):this[V]=P},J.prototype.hide=function(){this.ignore=!0,this.markRedraw()},J.prototype.show=function(){this.ignore=!1,this.markRedraw()},J.prototype.attr=function(V,P){if("string"==typeof V)this.attrKV(V,P);else if((0,be.isObject)(V))for(var R=(0,be.keys)(V),E=0;E<R.length;E++){var M=R[E];this.attrKV(M,V[M])}return this.markRedraw(),this},J.prototype.saveCurrentToNormalState=function(V){this._innerSaveToNormal(V);for(var P=this._normalState,T=0;T<this.animators.length;T++){var R=this.animators[T],E=R.__fromStateTransition;if(!(R.getLoop()||E&&E!==X)){var M=R.targetName;R.saveTo(M?P[M]:P)}}},J.prototype._innerSaveToNormal=function(V){var P=this._normalState;P||(P=this._normalState={}),V.textConfig&&!P.textConfig&&(P.textConfig=this.textConfig),this._savePrimaryToNormal(V,P,re)},J.prototype._savePrimaryToNormal=function(V,P,T){for(var R=0;R<T.length;R++){var E=T[R];null!=V[E]&&!(E in P)&&(P[E]=this[E])}},J.prototype.hasState=function(){return this.currentStates.length>0},J.prototype.getState=function(V){return this.states[V]},J.prototype.ensureState=function(V){var P=this.states;return P[V]||(P[V]={}),P[V]},J.prototype.clearStates=function(V){this.useState(X,!1,V)},J.prototype.useState=function(V,P,T,R){var E=V===X;if(this.hasState()||!E){var A=this.currentStates,O=this.stateTransition;if(!((0,be.indexOf)(A,V)>=0)||!P&&1!==A.length){var B;if(this.stateProxy&&!E&&(B=this.stateProxy(V)),B||(B=this.states&&this.states[V]),!B&&!E)return void(0,be.logError)("State "+V+" not exists.");E||this.saveCurrentToNormalState(B);var ue=!!(B&&B.hoverLayer||R);ue&&this._toggleHoverLayerFlag(!0),this._applyStateObj(V,B,this._normalState,P,!T&&!this.__inHover&&O&&O.duration>0,O);var ae=this._textContent,oe=this._textGuide;return ae&&ae.useState(V,P,T,ue),oe&&oe.useState(V,P,T,ue),E?(this.currentStates=[],this._normalState={}):P?this.currentStates.push(V):this.currentStates=[V],this._updateAnimationTargets(),this.markRedraw(),!ue&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~j.YV),B}}},J.prototype.useStates=function(V,P,T){if(V.length){var R=[],E=this.currentStates,M=V.length,A=M===E.length;if(A)for(var O=0;O<M;O++)if(V[O]!==E[O]){A=!1;break}if(A)return;for(O=0;O<M;O++){var B=V[O],ue=void 0;this.stateProxy&&(ue=this.stateProxy(B,V)),ue||(ue=this.states[B]),ue&&R.push(ue)}var ae=R[M-1],oe=!!(ae&&ae.hoverLayer||T);oe&&this._toggleHoverLayerFlag(!0);var de=this._mergeStates(R),te=this.stateTransition;this.saveCurrentToNormalState(de),this._applyStateObj(V.join(","),de,this._normalState,!1,!P&&!this.__inHover&&te&&te.duration>0,te);var xe=this._textContent,fe=this._textGuide;xe&&xe.useStates(V,P,oe),fe&&fe.useStates(V,P,oe),this._updateAnimationTargets(),this.currentStates=V.slice(),this.markRedraw(),!oe&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~j.YV)}else this.clearStates()},J.prototype._updateAnimationTargets=function(){for(var V=0;V<this.animators.length;V++){var P=this.animators[V];P.targetName&&P.changeTarget(this[P.targetName])}},J.prototype.removeState=function(V){var P=(0,be.indexOf)(this.currentStates,V);if(P>=0){var T=this.currentStates.slice();T.splice(P,1),this.useStates(T)}},J.prototype.replaceState=function(V,P,T){var R=this.currentStates.slice(),E=(0,be.indexOf)(R,V),M=(0,be.indexOf)(R,P)>=0;E>=0?M?R.splice(E,1):R[E]=P:T&&!M&&R.push(P),this.useStates(R)},J.prototype.toggleState=function(V,P){P?this.useState(V,!0):this.removeState(V)},J.prototype._mergeStates=function(V){for(var T,P={},R=0;R<V.length;R++){var E=V[R];(0,be.extend)(P,E),E.textConfig&&(0,be.extend)(T=T||{},E.textConfig)}return T&&(P.textConfig=T),P},J.prototype._applyStateObj=function(V,P,T,R,E,M){var A=!(P&&R);P&&P.textConfig?(this.textConfig=(0,be.extend)({},R?this.textConfig:T.textConfig),(0,be.extend)(this.textConfig,P.textConfig)):A&&T.textConfig&&(this.textConfig=T.textConfig);for(var O={},B=!1,ue=0;ue<re.length;ue++){var ae=re[ue],oe=E&&U[ae];P&&null!=P[ae]?oe?(B=!0,O[ae]=P[ae]):this[ae]=P[ae]:A&&null!=T[ae]&&(oe?(B=!0,O[ae]=T[ae]):this[ae]=T[ae])}if(!E)for(ue=0;ue<this.animators.length;ue++){var de=this.animators[ue],te=de.targetName;de.getLoop()||de.__changeFinalValue(te?(P||T)[te]:P||T)}B&&this._transitionState(V,O,M)},J.prototype._attachComponent=function(V){if((!V.__zr||V.__hostTarget)&&V!==this){var P=this.__zr;P&&V.addSelfToZr(P),V.__zr=P,V.__hostTarget=this}},J.prototype._detachComponent=function(V){V.__zr&&V.removeSelfFromZr(V.__zr),V.__zr=null,V.__hostTarget=null},J.prototype.getClipPath=function(){return this._clipPath},J.prototype.setClipPath=function(V){this._clipPath&&this._clipPath!==V&&this.removeClipPath(),this._attachComponent(V),this._clipPath=V,this.markRedraw()},J.prototype.removeClipPath=function(){var V=this._clipPath;V&&(this._detachComponent(V),this._clipPath=null,this.markRedraw())},J.prototype.getTextContent=function(){return this._textContent},J.prototype.setTextContent=function(V){var P=this._textContent;P!==V&&(P&&P!==V&&this.removeTextContent(),V.innerTransformable=new ce.ZP,this._attachComponent(V),this._textContent=V,this.markRedraw())},J.prototype.setTextConfig=function(V){this.textConfig||(this.textConfig={}),(0,be.extend)(this.textConfig,V),this.markRedraw()},J.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},J.prototype.removeTextContent=function(){var V=this._textContent;V&&(V.innerTransformable=null,this._detachComponent(V),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},J.prototype.getTextGuideLine=function(){return this._textGuide},J.prototype.setTextGuideLine=function(V){this._textGuide&&this._textGuide!==V&&this.removeTextGuideLine(),this._attachComponent(V),this._textGuide=V,this.markRedraw()},J.prototype.removeTextGuideLine=function(){var V=this._textGuide;V&&(this._detachComponent(V),this._textGuide=null,this.markRedraw())},J.prototype.markRedraw=function(){this.__dirty|=j.YV;var V=this.__zr;V&&(this.__inHover?V.refreshHover():V.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},J.prototype.dirty=function(){this.markRedraw()},J.prototype._toggleHoverLayerFlag=function(V){this.__inHover=V;var P=this._textContent,T=this._textGuide;P&&(P.__inHover=V),T&&(T.__inHover=V)},J.prototype.addSelfToZr=function(V){if(this.__zr!==V){this.__zr=V;var P=this.animators;if(P)for(var T=0;T<P.length;T++)V.animation.addAnimator(P[T]);this._clipPath&&this._clipPath.addSelfToZr(V),this._textContent&&this._textContent.addSelfToZr(V),this._textGuide&&this._textGuide.addSelfToZr(V)}},J.prototype.removeSelfFromZr=function(V){if(this.__zr){this.__zr=null;var P=this.animators;if(P)for(var T=0;T<P.length;T++)V.animation.removeAnimator(P[T]);this._clipPath&&this._clipPath.removeSelfFromZr(V),this._textContent&&this._textContent.removeSelfFromZr(V),this._textGuide&&this._textGuide.removeSelfFromZr(V)}},J.prototype.animate=function(V,P,T){var E=new Se.Z(V?this[V]:this,P,T);return V&&(E.targetName=V),this.addAnimator(E,V),E},J.prototype.addAnimator=function(V,P){var T=this.__zr,R=this;V.during(function(){R.updateDuringAnimation(P)}).done(function(){var E=R.animators,M=(0,be.indexOf)(E,V);M>=0&&E.splice(M,1)}),this.animators.push(V),T&&T.animation.addAnimator(V),T&&T.wakeUp()},J.prototype.updateDuringAnimation=function(V){this.markRedraw()},J.prototype.stopAnimation=function(V,P){for(var T=this.animators,R=T.length,E=[],M=0;M<R;M++){var A=T[M];V&&V!==A.scope?E.push(A):A.stop(P)}return this.animators=E,this},J.prototype.animateTo=function(V,P,T){K(this,V,P,T)},J.prototype.animateFrom=function(V,P,T){K(this,V,P,T,!0)},J.prototype._transitionState=function(V,P,T,R){for(var E=K(this,P,T,R),M=0;M<E.length;M++)E[M].__fromStateTransition=V},J.prototype.getBoundingRect=function(){return null},J.prototype.getPaintRect=function(){return null},J.initDefaultProps=function(){var V=J.prototype;function R(E,M,A,O){function B(ue,ae){Object.defineProperty(ae,0,{get:function(){return ue[A]},set:function(oe){ue[A]=oe}}),Object.defineProperty(ae,1,{get:function(){return ue[O]},set:function(oe){ue[O]=oe}})}Object.defineProperty(V,E,{get:function(){return this[M]||B(this,this[M]=[]),this[M]},set:function(ue){this[A]=ue[0],this[O]=ue[1],this[M]=ue,B(this,ue)}})}V.type="element",V.name="",V.ignore=V.silent=V.isGroup=V.draggable=V.dragging=V.ignoreClip=V.__inHover=!1,V.__dirty=j.YV,Object.defineProperty&&(R("position","_legacyPos","x","y"),R("scale","_legacyScale","scaleX","scaleY"),R("origin","_legacyOrigin","originX","originY"))}(),J}();function K(J,V,P,T,R){var E=[];G(J,"",J,V,P=P||{},T,E,R);var M=E.length,A=!1,O=P.done,B=P.aborted,ue=function(){A=!0,--M<=0&&(A?O&&O():B&&B())},ae=function(){--M<=0&&(A?O&&O():B&&B())};M||O&&O(),E.length>0&&P.during&&E[0].during(function(te,xe){P.during(xe)});for(var oe=0;oe<E.length;oe++){var de=E[oe];ue&&de.done(ue),ae&&de.aborted(ae),P.force&&de.duration(P.duration),de.start(P.easing)}return E}function b(J,V,P){for(var T=0;T<P;T++)J[T]=V[T]}function Q(J,V,P){if((0,be.isArrayLike)(V[P]))if((0,be.isArrayLike)(J[P])||(J[P]=[]),(0,be.isTypedArray)(V[P])){var T=V[P].length;J[P].length!==T&&(J[P]=new V[P].constructor(T),b(J[P],V[P],T))}else{var R=V[P],E=J[P],M=R.length;if(function Y(J){return(0,be.isArrayLike)(J[0])}(R))for(var A=R[0].length,O=0;O<M;O++)E[O]?b(E[O],R[O],A):E[O]=Array.prototype.slice.call(R[O]);else b(E,R,M);E.length=R.length}else J[P]=V[P]}function G(J,V,P,T,R,E,M,A){for(var O=(0,be.keys)(T),B=R.duration,ue=R.delay,ae=R.additive,oe=R.setToFinal,de=!(0,be.isObject)(E),te=J.animators,xe=[],fe=0;fe<O.length;fe++){var we=T[ge=O[fe]];if(null!=we&&null!=P[ge]&&(de||E[ge]))if(!(0,be.isObject)(we)||(0,be.isArrayLike)(we)||(0,be.isGradientObject)(we))xe.push(ge);else{if(V){A||(P[ge]=we,J.updateDuringAnimation(V));continue}G(J,ge,P[ge],we,R,E&&E[ge],M,A)}else A||(P[ge]=we,J.updateDuringAnimation(V),xe.push(ge))}var Te=xe.length;if(!ae&&Te)for(var Ae=0;Ae<te.length;Ae++)if((Ee=te[Ae]).targetName===V&&Ee.stopTracks(xe)){var He=(0,be.indexOf)(te,Ee);te.splice(He,1)}if(R.force||(xe=(0,be.filter)(xe,function(St){return!function F(J,V){return J===V||(0,be.isArrayLike)(J)&&(0,be.isArrayLike)(V)&&function q(J,V){var P=J.length;if(P!==V.length)return!1;for(var T=0;T<P;T++)if(J[T]!==V[T])return!1;return!0}(J,V)}(T[St],P[St])}),Te=xe.length),Te>0||R.force&&!M.length){var Ee,We=void 0,$e=void 0,lt=void 0;if(A)for($e={},oe&&(We={}),Ae=0;Ae<Te;Ae++)$e[ge=xe[Ae]]=P[ge],oe?We[ge]=T[ge]:P[ge]=T[ge];else if(oe)for(lt={},Ae=0;Ae<Te;Ae++){var ge;lt[ge=xe[Ae]]=(0,Se.V)(P[ge]),Q(P,T,ge)}(Ee=new Se.Z(P,!1,!1,ae?(0,be.filter)(te,function(_t){return _t.targetName===V}):null)).targetName=V,R.scope&&(Ee.scope=R.scope),oe&&We&&Ee.whenWithKeys(0,We,xe),lt&&Ee.whenWithKeys(0,lt,xe),Ee.whenWithKeys(B??500,A?$e:T,xe).delay(ue||0),J.addAnimator(Ee,V),M.push(Ee)}}(0,be.mixin)(ie,ye.Z),(0,be.mixin)(ie,ce.ZP);const W=ie},6062:(Bt,Qe,z)=>{z.d(Qe,{V:()=>b,Z:()=>O});var ce={linear:function(B){return B},quadraticIn:function(B){return B*B},quadraticOut:function(B){return B*(2-B)},quadraticInOut:function(B){return(B*=2)<1?.5*B*B:-.5*(--B*(B-2)-1)},cubicIn:function(B){return B*B*B},cubicOut:function(B){return--B*B*B+1},cubicInOut:function(B){return(B*=2)<1?.5*B*B*B:.5*((B-=2)*B*B+2)},quarticIn:function(B){return B*B*B*B},quarticOut:function(B){return 1- --B*B*B*B},quarticInOut:function(B){return(B*=2)<1?.5*B*B*B*B:-.5*((B-=2)*B*B*B-2)},quinticIn:function(B){return B*B*B*B*B},quinticOut:function(B){return--B*B*B*B*B+1},quinticInOut:function(B){return(B*=2)<1?.5*B*B*B*B*B:.5*((B-=2)*B*B*B*B+2)},sinusoidalIn:function(B){return 1-Math.cos(B*Math.PI/2)},sinusoidalOut:function(B){return Math.sin(B*Math.PI/2)},sinusoidalInOut:function(B){return.5*(1-Math.cos(Math.PI*B))},exponentialIn:function(B){return 0===B?0:Math.pow(1024,B-1)},exponentialOut:function(B){return 1===B?1:1-Math.pow(2,-10*B)},exponentialInOut:function(B){return 0===B?0:1===B?1:(B*=2)<1?.5*Math.pow(1024,B-1):.5*(2-Math.pow(2,-10*(B-1)))},circularIn:function(B){return 1-Math.sqrt(1-B*B)},circularOut:function(B){return Math.sqrt(1- --B*B)},circularInOut:function(B){return(B*=2)<1?-.5*(Math.sqrt(1-B*B)-1):.5*(Math.sqrt(1-(B-=2)*B)+1)},elasticIn:function(B){var ue,ae=.1;return 0===B?0:1===B?1:(!ae||ae<1?(ae=1,ue=.1):ue=.4*Math.asin(1/ae)/(2*Math.PI),-ae*Math.pow(2,10*(B-=1))*Math.sin((B-ue)*(2*Math.PI)/.4))},elasticOut:function(B){var ue,ae=.1;return 0===B?0:1===B?1:(!ae||ae<1?(ae=1,ue=.1):ue=.4*Math.asin(1/ae)/(2*Math.PI),ae*Math.pow(2,-10*B)*Math.sin((B-ue)*(2*Math.PI)/.4)+1)},elasticInOut:function(B){var ue,ae=.1;return 0===B?0:1===B?1:(!ae||ae<1?(ae=1,ue=.1):ue=.4*Math.asin(1/ae)/(2*Math.PI),(B*=2)<1?ae*Math.pow(2,10*(B-=1))*Math.sin((B-ue)*(2*Math.PI)/.4)*-.5:ae*Math.pow(2,-10*(B-=1))*Math.sin((B-ue)*(2*Math.PI)/.4)*.5+1)},backIn:function(B){return B*B*(2.70158*B-1.70158)},backOut:function(B){return--B*B*(2.70158*B+1.70158)+1},backInOut:function(B){var ue=2.5949095;return(B*=2)<1?B*B*((ue+1)*B-ue)*.5:.5*((B-=2)*B*((ue+1)*B+ue)+2)},bounceIn:function(B){return 1-ce.bounceOut(1-B)},bounceOut:function(B){return B<1/2.75?7.5625*B*B:B<2/2.75?7.5625*(B-=1.5/2.75)*B+.75:B<2.5/2.75?7.5625*(B-=2.25/2.75)*B+.9375:7.5625*(B-=2.625/2.75)*B+.984375},bounceInOut:function(B){return B<.5?.5*ce.bounceIn(2*B):.5*ce.bounceOut(2*B-1)+.5}};const Se=ce;var le=z(628),ye=z(6410);const be=function(){function B(ue){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=ue.life||1e3,this._delay=ue.delay||0,this.loop=ue.loop||!1,this.onframe=ue.onframe||le.noop,this.ondestroy=ue.ondestroy||le.noop,this.onrestart=ue.onrestart||le.noop,ue.easing&&this.setEasing(ue.easing)}return B.prototype.step=function(ue,ae){if(this._inited||(this._startTime=ue+this._delay,this._inited=!0),!this._paused){var oe=this._life,de=ue-this._startTime-this._pausedTime,te=de/oe;te<0&&(te=0),te=Math.min(te,1);var xe=this.easingFunc,fe=xe?xe(te):te;if(this.onframe(fe),1===te){if(!this.loop)return!0;this._startTime=ue-de%oe,this._pausedTime=0,this.onrestart()}return!1}this._pausedTime+=ae},B.prototype.pause=function(){this._paused=!0},B.prototype.resume=function(){this._paused=!1},B.prototype.setEasing=function(ue){this.easing=ue,this.easingFunc=(0,le.isFunction)(ue)?ue:Se[ue]||(0,ye.H)(ue)},B}();var Ce=z(312),he=z(8541),j=Array.prototype.slice;function X(B,ue,ae){return(ue-B)*ae+B}function re(B,ue,ae,oe){for(var de=ue.length,te=0;te<de;te++)B[te]=X(ue[te],ae[te],oe);return B}function ee(B,ue,ae,oe){for(var de=ue.length,te=0;te<de;te++)B[te]=ue[te]+ae[te]*oe;return B}function $(B,ue,ae,oe){for(var de=ue.length,te=de&&ue[0].length,xe=0;xe<de;xe++){B[xe]||(B[xe]=[]);for(var fe=0;fe<te;fe++)B[xe][fe]=ue[xe][fe]+ae[xe][fe]*oe}return B}function ie(B,ue){for(var ae=B.length,oe=ue.length,de=ae>oe?ue:B,te=Math.min(ae,oe),xe=de[te-1]||{color:[0,0,0,0],offset:0},fe=te;fe<Math.max(ae,oe);fe++)de.push({offset:xe.offset,color:xe.color.slice()})}function K(B,ue,ae){var oe=B,de=ue;if(oe.push&&de.push){var te=oe.length,xe=de.length;if(te!==xe)if(te>xe)oe.length=xe;else for(var ge=te;ge<xe;ge++)oe.push(1===ae?de[ge]:j.call(de[ge]));var we=oe[0]&&oe[0].length;for(ge=0;ge<oe.length;ge++)if(1===ae)isNaN(oe[ge])&&(oe[ge]=de[ge]);else for(var Te=0;Te<we;Te++)isNaN(oe[ge][Te])&&(oe[ge][Te]=de[ge][Te])}}function b(B){if((0,le.isArrayLike)(B)){var ue=B.length;if((0,le.isArrayLike)(B[0])){for(var ae=[],oe=0;oe<ue;oe++)ae.push(j.call(B[oe]));return ae}return j.call(B)}return B}function Y(B){return B[0]=Math.floor(B[0])||0,B[1]=Math.floor(B[1])||0,B[2]=Math.floor(B[2])||0,B[3]=B[3]??1,"rgba("+B.join(",")+")"}function T(B){return 4===B||5===B}function R(B){return 1===B||2===B}var E=[0,0,0,0],M=function(){function B(ue){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=ue}return B.prototype.isFinished=function(){return this._finished},B.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},B.prototype.needsAnimate=function(){return this.keyframes.length>=1},B.prototype.getAdditiveTrack=function(){return this._additiveTrack},B.prototype.addKeyframe=function(ue,ae,oe){this._needsSort=!0;var de=this.keyframes,te=de.length,xe=!1,fe=6,ge=ae;if((0,le.isArrayLike)(ae)){var we=function Q(B){return(0,le.isArrayLike)(B&&B[0])?2:1}(ae);fe=we,(1===we&&!(0,le.isNumber)(ae[0])||2===we&&!(0,le.isNumber)(ae[0][0]))&&(xe=!0)}else if((0,le.isNumber)(ae)&&!(0,le.eqNaN)(ae))fe=0;else if((0,le.isString)(ae))if(isNaN(+ae)){var Te=Ce.parse(ae);Te&&(ge=Te,fe=3)}else fe=0;else if((0,le.isGradientObject)(ae)){var Ae=(0,le.extend)({},ge);Ae.colorStops=(0,le.map)(ae.colorStops,function(Ve){return{offset:Ve.offset,color:Ce.parse(Ve.color)}}),(0,he.I1)(ae)?fe=4:(0,he.gO)(ae)&&(fe=5),ge=Ae}0===te?this.valType=fe:(fe!==this.valType||6===fe)&&(xe=!0),this.discrete=this.discrete||xe;var Ee={time:ue,value:ge,rawValue:ae,percent:0};return oe&&(Ee.easing=oe,Ee.easingFunc=(0,le.isFunction)(oe)?oe:Se[oe]||(0,ye.H)(oe)),de.push(Ee),Ee},B.prototype.prepare=function(ue,ae){var oe=this.keyframes;this._needsSort&&oe.sort(function(We,$e){return We.time-$e.time});for(var de=this.valType,te=oe.length,xe=oe[te-1],fe=this.discrete,ge=R(de),we=T(de),Te=0;Te<te;Te++){var Ae=oe[Te],Ee=Ae.value,Ve=xe.value;Ae.percent=Ae.time/ue,fe||(ge&&Te!==te-1?K(Ee,Ve,de):we&&ie(Ee.colorStops,Ve.colorStops))}if(!fe&&5!==de&&ae&&this.needsAnimate()&&ae.needsAnimate()&&de===ae.valType&&!ae._finished){this._additiveTrack=ae;var He=oe[0].value;for(Te=0;Te<te;Te++)0===de?oe[Te].additiveValue=oe[Te].value-He:3===de?oe[Te].additiveValue=ee([],oe[Te].value,He,-1):R(de)&&(oe[Te].additiveValue=1===de?ee([],oe[Te].value,He,-1):$([],oe[Te].value,He,-1))}},B.prototype.step=function(ue,ae){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var Te,Ve,He,oe=null!=this._additiveTrack,de=oe?"additiveValue":"value",te=this.valType,xe=this.keyframes,fe=xe.length,ge=this.propName,we=3===te,Ae=this._lastFr,Ee=Math.min;if(1===fe)Ve=He=xe[0];else{if(ae<0)Te=0;else if(ae<this._lastFrP){for(Te=Ee(Ae+1,fe-1);Te>=0&&!(xe[Te].percent<=ae);Te--);Te=Ee(Te,fe-2)}else{for(Te=Ae;Te<fe&&!(xe[Te].percent>ae);Te++);Te=Ee(Te-1,fe-2)}He=xe[Te+1],Ve=xe[Te]}if(Ve&&He){this._lastFr=Te,this._lastFrP=ae;var $e=He.percent-Ve.percent,lt=0===$e?1:Ee((ae-Ve.percent)/$e,1);He.easingFunc&&(lt=He.easingFunc(lt));var St=oe?this._additiveValue:we?E:ue[ge];if((R(te)||we)&&!St&&(St=this._additiveValue=[]),this.discrete)ue[ge]=lt<1?Ve.rawValue:He.rawValue;else if(R(te))1===te?re(St,Ve[de],He[de],lt):function U(B,ue,ae,oe){for(var de=ue.length,te=de&&ue[0].length,xe=0;xe<de;xe++){B[xe]||(B[xe]=[]);for(var fe=0;fe<te;fe++)B[xe][fe]=X(ue[xe][fe],ae[xe][fe],oe)}}(St,Ve[de],He[de],lt);else if(T(te)){var _t=Ve[de],Ot=He[de],Vt=4===te;ue[ge]={type:Vt?"linear":"radial",x:X(_t.x,Ot.x,lt),y:X(_t.y,Ot.y,lt),colorStops:(0,le.map)(_t.colorStops,function(hn,Vn){var ar=Ot.colorStops[Vn];return{offset:X(hn.offset,ar.offset,lt),color:Y(re([],hn.color,ar.color,lt))}}),global:Ot.global},Vt?(ue[ge].x2=X(_t.x2,Ot.x2,lt),ue[ge].y2=X(_t.y2,Ot.y2,lt)):ue[ge].r=X(_t.r,Ot.r,lt)}else if(we)re(St,Ve[de],He[de],lt),oe||(ue[ge]=Y(St));else{var an=X(Ve[de],He[de],lt);oe?this._additiveValue=an:ue[ge]=an}oe&&this._addToTarget(ue)}}},B.prototype._addToTarget=function(ue){var ae=this.valType,oe=this.propName,de=this._additiveValue;0===ae?ue[oe]=ue[oe]+de:3===ae?(Ce.parse(ue[oe],E),ee(E,E,de,1),ue[oe]=Y(E)):1===ae?ee(ue[oe],ue[oe],de,1):2===ae&&$(ue[oe],ue[oe],de,1)},B}();const O=function(){function B(ue,ae,oe,de){this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=ue,this._loop=ae,ae&&de?(0,le.logError)("Can' use additive animation on looped animation."):(this._additiveAnimators=de,this._allowDiscrete=oe)}return B.prototype.getMaxTime=function(){return this._maxTime},B.prototype.getDelay=function(){return this._delay},B.prototype.getLoop=function(){return this._loop},B.prototype.getTarget=function(){return this._target},B.prototype.changeTarget=function(ue){this._target=ue},B.prototype.when=function(ue,ae,oe){return this.whenWithKeys(ue,ae,(0,le.keys)(ae),oe)},B.prototype.whenWithKeys=function(ue,ae,oe,de){for(var te=this._tracks,xe=0;xe<oe.length;xe++){var fe=oe[xe],ge=te[fe];if(!ge){ge=te[fe]=new M(fe);var we=void 0,Te=this._getAdditiveTrack(fe);if(Te){var Ae=Te.keyframes,Ee=Ae[Ae.length-1];we=Ee&&Ee.value,3===Te.valType&&we&&(we=Y(we))}else we=this._target[fe];if(null==we)continue;ue>0&&ge.addKeyframe(0,b(we),de),this._trackKeys.push(fe)}ge.addKeyframe(ue,b(ae[fe]),de)}return this._maxTime=Math.max(this._maxTime,ue),this},B.prototype.pause=function(){this._clip.pause(),this._paused=!0},B.prototype.resume=function(){this._clip.resume(),this._paused=!1},B.prototype.isPaused=function(){return!!this._paused},B.prototype.duration=function(ue){return this._maxTime=ue,this._force=!0,this},B.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var ue=this._doneCbs;if(ue)for(var ae=ue.length,oe=0;oe<ae;oe++)ue[oe].call(this)},B.prototype._abortedCallback=function(){this._setTracksFinished();var ue=this.animation,ae=this._abortedCbs;if(ue&&ue.removeClip(this._clip),this._clip=null,ae)for(var oe=0;oe<ae.length;oe++)ae[oe].call(this)},B.prototype._setTracksFinished=function(){for(var ue=this._tracks,ae=this._trackKeys,oe=0;oe<ae.length;oe++)ue[ae[oe]].setFinished()},B.prototype._getAdditiveTrack=function(ue){var ae,oe=this._additiveAnimators;if(oe)for(var de=0;de<oe.length;de++){var te=oe[de].getTrack(ue);te&&(ae=te)}return ae},B.prototype.start=function(ue){if(!(this._started>0)){this._started=1;for(var ae=this,oe=[],de=this._maxTime||0,te=0;te<this._trackKeys.length;te++){var xe=this._trackKeys[te],fe=this._tracks[xe],ge=this._getAdditiveTrack(xe),we=fe.keyframes,Te=we.length;if(fe.prepare(de,ge),fe.needsAnimate())if(!this._allowDiscrete&&fe.discrete){var Ae=we[Te-1];Ae&&(ae._target[fe.propName]=Ae.rawValue),fe.setFinished()}else oe.push(fe)}if(oe.length||this._force){var Ee=new be({life:de,loop:this._loop,delay:this._delay||0,onframe:function(Ve){ae._started=2;var He=ae._additiveAnimators;if(He){for(var We=!1,$e=0;$e<He.length;$e++)if(He[$e]._clip){We=!0;break}We||(ae._additiveAnimators=null)}for($e=0;$e<oe.length;$e++)oe[$e].step(ae._target,Ve);var lt=ae._onframeCbs;if(lt)for($e=0;$e<lt.length;$e++)lt[$e](ae._target,Ve)},ondestroy:function(){ae._doneCallback()}});this._clip=Ee,this.animation&&this.animation.addClip(Ee),ue&&Ee.setEasing(ue)}else this._doneCallback();return this}},B.prototype.stop=function(ue){this._clip&&(ue&&this._clip.onframe(1),this._abortedCallback())},B.prototype.delay=function(ue){return this._delay=ue,this},B.prototype.during=function(ue){return ue&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(ue)),this},B.prototype.done=function(ue){return ue&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(ue)),this},B.prototype.aborted=function(ue){return ue&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(ue)),this},B.prototype.getClip=function(){return this._clip},B.prototype.getTrack=function(ue){return this._tracks[ue]},B.prototype.getTracks=function(){var ue=this;return(0,le.map)(this._trackKeys,function(ae){return ue._tracks[ae]})},B.prototype.stopTracks=function(ue,ae){if(!ue.length||!this._clip)return!0;for(var oe=this._tracks,de=this._trackKeys,te=0;te<ue.length;te++){var xe=oe[ue[te]];xe&&!xe.isFinished()&&(ae?xe.step(this._target,1):1===this._started&&xe.step(this._target,0),xe.setFinished())}var fe=!0;for(te=0;te<de.length;te++)if(!oe[de[te]].isFinished()){fe=!1;break}return fe&&this._abortedCallback(),fe},B.prototype.saveTo=function(ue,ae,oe){if(ue){ae=ae||this._trackKeys;for(var de=0;de<ae.length;de++){var te=ae[de],xe=this._tracks[te];if(xe&&!xe.isFinished()){var fe=xe.keyframes,ge=fe[oe?0:fe.length-1];ge&&(ue[te]=b(ge.rawValue))}}}},B.prototype.__changeFinalValue=function(ue,ae){ae=ae||(0,le.keys)(ue);for(var oe=0;oe<ae.length;oe++){var de=ae[oe],te=this._tracks[de];if(te){var xe=te.keyframes;if(xe.length>1){var fe=xe.pop();te.addKeyframe(fe.time,ue[de]),te.prepare(this._maxTime,te.getAdditiveTrack())}}}},B}()},6410:(Bt,Qe,z)=>{z.d(Qe,{H:()=>ye});var ce=z(9969),Se=z(628),le=/cubic-bezier\(([0-9,\.e ]+)\)/;function ye(ve){var be=ve&&le.exec(ve);if(be){var Ce=be[1].split(","),he=+(0,Se.trim)(Ce[0]),j=+(0,Se.trim)(Ce[1]),X=+(0,Se.trim)(Ce[2]),re=+(0,Se.trim)(Ce[3]);if(isNaN(he+j+X+re))return;var U=[];return function(ee){return ee<=0?0:ee>=1?1:(0,ce.kD)(0,he,X,1,ee,U)&&(0,ce.af)(0,j,re,1,U[0])}}}},2036:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>le});const le=z(169).Z.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(ye){return setTimeout(ye,16)}},9411:(Bt,Qe,z)=>{z.d(Qe,{a:()=>le});var ce=z(628);function le(ye){var ve=ye.style,be=ve.lineDash&&ve.lineWidth>0&&function Se(ye,ve){return ye&&"solid"!==ye&&ve>0?"dashed"===ye?[4*ve,2*ve]:"dotted"===ye?[ve]:(0,ce.isNumber)(ye)?[ye]:(0,ce.isArray)(ye)?ye:null:null}(ve.lineDash,ve.lineWidth),Ce=ve.lineDashOffset;if(be){var he=ve.strokeNoScale&&ye.getLineScale?ye.getLineScale():1;he&&1!==he&&(be=(0,ce.map)(be,function(j){return j/he}),Ce/=he)}return[be,Ce]}},9012:(Bt,Qe,z)=>{z.d(Qe,{Dm:()=>te,RV:()=>de,RZ:()=>Y});var ce=z(9563),Se=z(7349),le=z(6790),ye=z(7072),ve=z(126),be=z(6766),Ce=z(491),he=z(628),j=z(9411),X=z(2369),re=z(5730),U=new Se.Z(!0);function ee(fe){var ge=fe.stroke;return!(null==ge||"none"===ge||!(fe.lineWidth>0))}function $(fe){return"string"==typeof fe&&"none"!==fe}function ie(fe){var ge=fe.fill;return null!=ge&&"none"!==ge}function K(fe,ge){if(null!=ge.fillOpacity&&1!==ge.fillOpacity){var we=fe.globalAlpha;fe.globalAlpha=ge.fillOpacity*ge.opacity,fe.fill(),fe.globalAlpha=we}else fe.fill()}function b(fe,ge){if(null!=ge.strokeOpacity&&1!==ge.strokeOpacity){var we=fe.globalAlpha;fe.globalAlpha=ge.strokeOpacity*ge.opacity,fe.stroke(),fe.globalAlpha=we}else fe.stroke()}function Y(fe,ge,we){var Te=(0,le.Gq)(ge.image,ge.__image,we);if((0,le.v5)(Te)){var Ae=fe.createPattern(Te,ge.repeat||"repeat");if("function"==typeof DOMMatrix&&Ae&&Ae.setTransform){var Ee=new DOMMatrix;Ee.translateSelf(ge.x||0,ge.y||0),Ee.rotateSelf(0,0,(ge.rotation||0)*he.RADIAN_TO_DEGREE),Ee.scaleSelf(ge.scaleX||1,ge.scaleY||1),Ae.setTransform(Ee)}return Ae}}var G=["shadowBlur","shadowOffsetX","shadowOffsetY"],W=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function J(fe,ge,we,Te,Ae){var Ee=!1;if(!Te&&ge===(we=we||{}))return!1;if(Te||ge.opacity!==we.opacity){ae(fe,Ae),Ee=!0;var Ve=Math.max(Math.min(ge.opacity,1),0);fe.globalAlpha=isNaN(Ve)?ce.tj.opacity:Ve}(Te||ge.blend!==we.blend)&&(Ee||(ae(fe,Ae),Ee=!0),fe.globalCompositeOperation=ge.blend||ce.tj.blend);for(var He=0;He<G.length;He++){var We=G[He];(Te||ge[We]!==we[We])&&(Ee||(ae(fe,Ae),Ee=!0),fe[We]=fe.dpr*(ge[We]||0))}return(Te||ge.shadowColor!==we.shadowColor)&&(Ee||(ae(fe,Ae),Ee=!0),fe.shadowColor=ge.shadowColor||ce.tj.shadowColor),Ee}function V(fe,ge,we,Te,Ae){var Ee=oe(ge,Ae.inHover),Ve=Te?null:we&&oe(we,Ae.inHover)||{};if(Ee===Ve)return!1;var He=J(fe,Ee,Ve,Te,Ae);if((Te||Ee.fill!==Ve.fill)&&(He||(ae(fe,Ae),He=!0),$(Ee.fill)&&(fe.fillStyle=Ee.fill)),(Te||Ee.stroke!==Ve.stroke)&&(He||(ae(fe,Ae),He=!0),$(Ee.stroke)&&(fe.strokeStyle=Ee.stroke)),(Te||Ee.opacity!==Ve.opacity)&&(He||(ae(fe,Ae),He=!0),fe.globalAlpha=Ee.opacity??1),ge.hasStroke()){var $e=Ee.lineWidth/(Ee.strokeNoScale&&ge.getLineScale?ge.getLineScale():1);fe.lineWidth!==$e&&(He||(ae(fe,Ae),He=!0),fe.lineWidth=$e)}for(var lt=0;lt<W.length;lt++){var St=W[lt],_t=St[0];(Te||Ee[_t]!==Ve[_t])&&(He||(ae(fe,Ae),He=!0),fe[_t]=Ee[_t]||St[1])}return He}function T(fe,ge){var we=ge.transform,Te=fe.dpr||1;we?fe.setTransform(Te*we[0],Te*we[1],Te*we[2],Te*we[3],Te*we[4],Te*we[5]):fe.setTransform(Te,0,0,Te,0,0)}function ae(fe,ge){ge.batchFill&&fe.fill(),ge.batchStroke&&fe.stroke(),ge.batchFill="",ge.batchStroke=""}function oe(fe,ge){return ge&&fe.__hoverStyle||fe.style}function de(fe,ge){te(fe,ge,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function te(fe,ge,we,Te){var Ae=ge.transform;if(!ge.shouldBePainted(we.viewWidth,we.viewHeight,!1,!1))return ge.__dirty&=~X.YV,void(ge.__isRendered=!1);var Ee=ge.__clipPaths,Ve=we.prevElClipPaths,He=!1,We=!1;if((!Ve||(0,ye.cF)(Ee,Ve))&&(Ve&&Ve.length&&(ae(fe,we),fe.restore(),We=He=!0,we.prevElClipPaths=null,we.allClipped=!1,we.prevEl=null),Ee&&Ee.length&&(ae(fe,we),fe.save(),function R(fe,ge,we){for(var Te=!1,Ae=0;Ae<fe.length;Ae++){var Ee=fe[Ae];Te=Te||Ee.isZeroArea(),T(ge,Ee),ge.beginPath(),Ee.buildPath(ge,Ee.shape),ge.clip()}we.allClipped=Te}(Ee,fe,we),He=!0),we.prevElClipPaths=Ee),we.allClipped)ge.__isRendered=!1;else{ge.beforeBrush&&ge.beforeBrush(),ge.innerBeforeBrush();var $e=we.prevEl;$e||(We=He=!0);var lt=ge instanceof ve.ZP&&ge.autoBatch&&function ue(fe){var ge=ie(fe),we=ee(fe);return!(fe.lineDash||!(+ge^+we)||ge&&"string"!=typeof fe.fill||we&&"string"!=typeof fe.stroke||fe.strokePercent<1||fe.strokeOpacity<1||fe.fillOpacity<1)}(ge.style);He||function E(fe,ge){return fe&&ge?fe[0]!==ge[0]||fe[1]!==ge[1]||fe[2]!==ge[2]||fe[3]!==ge[3]||fe[4]!==ge[4]||fe[5]!==ge[5]:!(!fe&&!ge)}(Ae,$e.transform)?(ae(fe,we),T(fe,ge)):lt||ae(fe,we);var St=oe(ge,we.inHover);ge instanceof ve.ZP?(1!==we.lastDrawType&&(We=!0,we.lastDrawType=1),V(fe,ge,$e,We,we),(!lt||!we.batchFill&&!we.batchStroke)&&fe.beginPath(),function Q(fe,ge,we,Te){var Ae,Ee=ee(we),Ve=ie(we),He=we.strokePercent,We=He<1,$e=!ge.path;(!ge.silent||We)&&$e&&ge.createPathProxy();var lt=ge.path||U,St=ge.__dirty;if(!Te){var _t=we.fill,Ot=we.stroke,Vt=Ve&&!!_t.colorStops,an=Ee&&!!Ot.colorStops,hn=Ve&&!!_t.image,Vn=Ee&&!!Ot.image,ar=void 0,Yn=void 0,vr=void 0,Qn=void 0,$t=void 0;(Vt||an)&&($t=ge.getBoundingRect()),Vt&&(ar=St?(0,ye.ZF)(fe,_t,$t):ge.__canvasFillGradient,ge.__canvasFillGradient=ar),an&&(Yn=St?(0,ye.ZF)(fe,Ot,$t):ge.__canvasStrokeGradient,ge.__canvasStrokeGradient=Yn),hn&&(vr=St||!ge.__canvasFillPattern?Y(fe,_t,ge):ge.__canvasFillPattern,ge.__canvasFillPattern=vr),Vn&&(Qn=St||!ge.__canvasStrokePattern?Y(fe,Ot,ge):ge.__canvasStrokePattern,ge.__canvasStrokePattern=vr),Vt?fe.fillStyle=ar:hn&&(vr?fe.fillStyle=vr:Ve=!1),an?fe.strokeStyle=Yn:Vn&&(Qn?fe.strokeStyle=Qn:Ee=!1)}var On,jn,un=ge.getGlobalScale();lt.setScale(un[0],un[1],ge.segmentIgnoreThreshold),fe.setLineDash&&we.lineDash&&(On=(Ae=(0,j.a)(ge))[0],jn=Ae[1]);var Je=!0;($e||St&X.RH)&&(lt.setDPR(fe.dpr),We?lt.setContext(null):(lt.setContext(fe),Je=!1),lt.reset(),ge.buildPath(lt,ge.shape,Te),lt.toStatic(),ge.pathUpdated()),Je&&lt.rebuildPath(fe,We?He:1),On&&(fe.setLineDash(On),fe.lineDashOffset=jn),Te||(we.strokeFirst?(Ee&&b(fe,we),Ve&&K(fe,we)):(Ve&&K(fe,we),Ee&&b(fe,we))),On&&fe.setLineDash([])}(fe,ge,St,lt),lt&&(we.batchFill=St.fill||"",we.batchStroke=St.stroke||"")):ge instanceof Ce.Z?(3!==we.lastDrawType&&(We=!0,we.lastDrawType=3),V(fe,ge,$e,We,we),function q(fe,ge,we){var Te,Ae=we.text;if(null!=Ae&&(Ae+=""),Ae){fe.font=we.font||re.Uo,fe.textAlign=we.textAlign,fe.textBaseline=we.textBaseline;var Ee=void 0,Ve=void 0;fe.setLineDash&&we.lineDash&&(Ee=(Te=(0,j.a)(ge))[0],Ve=Te[1]),Ee&&(fe.setLineDash(Ee),fe.lineDashOffset=Ve),we.strokeFirst?(ee(we)&&fe.strokeText(Ae,we.x,we.y),ie(we)&&fe.fillText(Ae,we.x,we.y)):(ie(we)&&fe.fillText(Ae,we.x,we.y),ee(we)&&fe.strokeText(Ae,we.x,we.y)),Ee&&fe.setLineDash([])}}(fe,ge,St)):ge instanceof be.ZP?(2!==we.lastDrawType&&(We=!0,we.lastDrawType=2),function P(fe,ge,we,Te,Ae){J(fe,oe(ge,Ae.inHover),we&&oe(we,Ae.inHover),Te,Ae)}(fe,ge,$e,We,we),function F(fe,ge,we){var Te=ge.__image=(0,le.Gq)(we.image,ge.__image,ge,ge.onload);if(Te&&(0,le.v5)(Te)){var Ae=we.x||0,Ee=we.y||0,Ve=ge.getWidth(),He=ge.getHeight(),We=Te.width/Te.height;if(null==Ve&&null!=He?Ve=He*We:null==He&&null!=Ve?He=Ve/We:null==Ve&&null==He&&(Ve=Te.width,He=Te.height),we.sWidth&&we.sHeight)fe.drawImage(Te,$e=we.sx||0,lt=we.sy||0,we.sWidth,we.sHeight,Ae,Ee,Ve,He);else if(we.sx&&we.sy){var $e,lt;fe.drawImage(Te,$e=we.sx,lt=we.sy,Ve-$e,He-lt,Ae,Ee,Ve,He)}else fe.drawImage(Te,Ae,Ee,Ve,He)}}(fe,ge,St)):ge.getTemporalDisplayables&&(4!==we.lastDrawType&&(We=!0,we.lastDrawType=4),function xe(fe,ge,we){var Te=ge.getDisplayables(),Ae=ge.getTemporalDisplayables();fe.save();var Ve,He,Ee={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:we.viewWidth,viewHeight:we.viewHeight,inHover:we.inHover};for(Ve=ge.getCursor(),He=Te.length;Ve<He;Ve++)(We=Te[Ve]).beforeBrush&&We.beforeBrush(),We.innerBeforeBrush(),te(fe,We,Ee,Ve===He-1),We.innerAfterBrush(),We.afterBrush&&We.afterBrush(),Ee.prevEl=We;for(var $e=0,lt=Ae.length;$e<lt;$e++){var We;(We=Ae[$e]).beforeBrush&&We.beforeBrush(),We.innerBeforeBrush(),te(fe,We,Ee,$e===lt-1),We.innerAfterBrush(),We.afterBrush&&We.afterBrush(),Ee.prevEl=We}ge.clearTemporalDisplayables(),ge.notClear=!0,fe.restore()}(fe,ge,we)),lt&&Te&&ae(fe,we),ge.innerAfterBrush(),ge.afterBrush&&ge.afterBrush(),we.prevEl=ge,ge.__dirty=0,ge.__isRendered=!0}}},7072:(Bt,Qe,z)=>{function ce(he){return isFinite(he)}function ye(he,j,X){for(var re="radial"===j.type?function le(he,j,X){var re=X.width,U=X.height,ee=Math.min(re,U),$=j.x??.5,ie=j.y??.5,K=j.r??.5;return j.global||($=$*re+X.x,ie=ie*U+X.y,K*=ee),$=ce($)?$:.5,ie=ce(ie)?ie:.5,K=K>=0&&ce(K)?K:.5,he.createRadialGradient($,ie,0,$,ie,K)}(he,j,X):function Se(he,j,X){var re=j.x??0,U=j.x2??1,ee=j.y??0,$=j.y2??0;return j.global||(re=re*X.width+X.x,U=U*X.width+X.x,ee=ee*X.height+X.y,$=$*X.height+X.y),re=ce(re)?re:0,U=ce(U)?U:1,ee=ce(ee)?ee:0,$=ce($)?$:0,he.createLinearGradient(re,ee,U,$)}(he,j,X),U=j.colorStops,ee=0;ee<U.length;ee++)re.addColorStop(U[ee].offset,U[ee].color);return re}function ve(he,j){if(he===j||!he&&!j)return!1;if(!he||!j||he.length!==j.length)return!0;for(var X=0;X<he.length;X++)if(he[X]!==j[X])return!0;return!1}function be(he){return parseInt(he,10)}function Ce(he,j,X){var re=["width","height"][j],U=["clientWidth","clientHeight"][j],ee=["paddingLeft","paddingTop"][j],$=["paddingRight","paddingBottom"][j];if(null!=X[re]&&"auto"!==X[re])return parseFloat(X[re]);var ie=document.defaultView.getComputedStyle(he);return(he[U]||be(ie[re])||be(he.style[re]))-(be(ie[ee])||0)-(be(ie[$])||0)|0}z.d(Qe,{ZF:()=>ye,ap:()=>Ce,cF:()=>ve})},6704:(Bt,Qe,z)=>{z.d(Qe,{Ak:()=>ve,GD:()=>Ce,KL:()=>ye,iv:()=>he,vU:()=>be});var Se=1;z(169).Z.hasGlobalWindow&&(Se=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var ye=Se,ve=.4,be="#333",Ce="#ccc",he="#eee"},4443:(Bt,Qe,z)=>{function ce(Se,le,ye,ve,be,Ce,he){if(0===be)return!1;var X,j=be;if(he>le+j&&he>ve+j||he<le-j&&he<ve-j||Ce>Se+j&&Ce>ye+j||Ce<Se-j&&Ce<ye-j)return!1;if(Se===ye)return Math.abs(Ce-Se)<=j/2;var U=(X=(le-ve)/(Se-ye))*Ce-he+(Se*ve-ye*le)/(Se-ye);return U*U/(X*X+1)<=j/2*j/2}z.d(Qe,{m:()=>ce})},1995:(Bt,Qe,z)=>{z.d(Qe,{X:()=>ye});var ce=z(7703);function le(ve,be){return Math.abs(ve-be)<1e-8}function ye(ve,be,Ce){var he=0,j=ve[0];if(!j)return!1;for(var X=1;X<ve.length;X++){var re=ve[X];he+=(0,ce.Z)(j[0],j[1],re[0],re[1],be,Ce),j=re}var U=ve[0];return(!le(j[0],U[0])||!le(j[1],U[1]))&&(he+=(0,ce.Z)(j[0],j[1],U[0],U[1],be,Ce)),0!==he}},7014:(Bt,Qe,z)=>{z.d(Qe,{m:()=>Se});var ce=z(9969);function Se(le,ye,ve,be,Ce,he,j,X,re){if(0===j)return!1;var U=j;return!(re>ye+U&&re>be+U&&re>he+U||re<ye-U&&re<be-U&&re<he-U||X>le+U&&X>ve+U&&X>Ce+U||X<le-U&&X<ve-U&&X<Ce-U)&&(0,ce.Wr)(le,ye,ve,be,Ce,he,X,re,null)<=U/2}},1790:(Bt,Qe,z)=>{z.d(Qe,{Dp:()=>X,GM:()=>U,M3:()=>he,dz:()=>ve,lP:()=>Ce,mU:()=>j,wI:()=>ee});var ce=z(7021),Se=z(7148),le=z(5730),ye={};function ve($,ie){var K=ye[ie=ie||le.Uo];K||(K=ye[ie]=new Se.ZP(500));var b=K.get($);return null==b&&(b=le.qW.measureText($,ie).width,K.put($,b)),b}function be($,ie,K,b){var Y=ve($,ie),Q=X(ie),F=he(0,Y,K),q=j(0,Q,b);return new ce.Z(F,q,Y,Q)}function Ce($,ie,K,b){var Y=(($||"")+"").split("\n");if(1===Y.length)return be(Y[0],ie,K,b);for(var F=new ce.Z(0,0,0,0),q=0;q<Y.length;q++){var G=be(Y[q],ie,K,b);0===q?F.copy(G):F.union(G)}return F}function he($,ie,K){return"right"===K?$-=ie:"center"===K&&($-=ie/2),$}function j($,ie,K){return"middle"===K?$-=ie/2:"bottom"===K&&($-=ie),$}function X($){return ve("\u56fd",$)}function U($,ie){return"string"==typeof $?$.lastIndexOf("%")>=0?parseFloat($)/100*ie:parseFloat($):$}function ee($,ie,K){var b=ie.position||"inside",Y=null!=ie.distance?ie.distance:5,Q=K.height,F=K.width,q=Q/2,G=K.x,W=K.y,J="left",V="top";if(b instanceof Array)G+=U(b[0],K.width),W+=U(b[1],K.height),J=null,V=null;else switch(b){case"left":G-=Y,W+=q,J="right",V="middle";break;case"right":G+=Y+F,W+=q,V="middle";break;case"top":G+=F/2,W-=Y,J="center",V="bottom";break;case"bottom":G+=F/2,W+=Q+Y,J="center";break;case"inside":G+=F/2,W+=q,J="center",V="middle";break;case"insideLeft":G+=Y,W+=q,V="middle";break;case"insideRight":G+=F-Y,W+=q,J="right",V="middle";break;case"insideTop":G+=F/2,W+=Y,J="center";break;case"insideBottom":G+=F/2,W+=Q-Y,J="center",V="bottom";break;case"insideTopLeft":G+=Y,W+=Y;break;case"insideTopRight":G+=F-Y,W+=Y,J="right";break;case"insideBottomLeft":G+=Y,W+=Q-Y,V="bottom";break;case"insideBottomRight":G+=F-Y,W+=Q-Y,J="right",V="bottom"}return($=$||{}).x=G,$.y=W,$.align=J,$.verticalAlign=V,$}},3416:(Bt,Qe,z)=>{z.d(Qe,{m:()=>Se});var ce=2*Math.PI;function Se(le){return(le%=ce)<0&&(le+=ce),le}},7703:(Bt,Qe,z)=>{function ce(Se,le,ye,ve,be,Ce){if(Ce>le&&Ce>ve||Ce<le&&Ce<ve||ve===le)return 0;var he=(Ce-le)/(ve-le),j=ve<le?1:-1;(1===he||0===he)&&(j=ve<le?.5:-.5);var X=he*(ye-Se)+Se;return X===be?1/0:X>be?j:0}z.d(Qe,{Z:()=>ce})},7021:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>U});var ce=z(3481),Se=z(7564),le=Math.min,ye=Math.max,ve=new Se.Z,be=new Se.Z,Ce=new Se.Z,he=new Se.Z,j=new Se.Z,X=new Se.Z;const U=function(){function ee($,ie,K,b){K<0&&($+=K,K=-K),b<0&&(ie+=b,b=-b),this.x=$,this.y=ie,this.width=K,this.height=b}return ee.prototype.union=function($){var ie=le($.x,this.x),K=le($.y,this.y);this.width=isFinite(this.x)&&isFinite(this.width)?ye($.x+$.width,this.x+this.width)-ie:$.width,this.height=isFinite(this.y)&&isFinite(this.height)?ye($.y+$.height,this.y+this.height)-K:$.height,this.x=ie,this.y=K},ee.prototype.applyTransform=function($){ee.applyTransform(this,this,$)},ee.prototype.calculateTransform=function($){var K=$.width/this.width,b=$.height/this.height,Y=ce.create();return ce.translate(Y,Y,[-this.x,-this.y]),ce.scale(Y,Y,[K,b]),ce.translate(Y,Y,[$.x,$.y]),Y},ee.prototype.intersect=function($,ie){if(!$)return!1;$ instanceof ee||($=ee.create($));var K=this,b=K.x,Y=K.x+K.width,Q=K.y,F=K.y+K.height,q=$.x,G=$.x+$.width,W=$.y,J=$.y+$.height,V=!(Y<q||G<b||F<W||J<Q);if(ie){var P=1/0,T=0,R=Math.abs(Y-q),E=Math.abs(G-b),M=Math.abs(F-W),A=Math.abs(J-Q),O=Math.min(R,E),B=Math.min(M,A);Y<q||G<b?O>T&&(T=O,Se.Z.set(X,R<E?-R:E,0)):O<P&&(P=O,Se.Z.set(j,R<E?R:-E,0)),F<W||J<Q?B>T&&(T=B,Se.Z.set(X,0,M<A?-M:A)):O<P&&(P=O,Se.Z.set(j,0,M<A?M:-A))}return ie&&Se.Z.copy(ie,V?j:X),V},ee.prototype.contain=function($,ie){var K=this;return $>=K.x&&$<=K.x+K.width&&ie>=K.y&&ie<=K.y+K.height},ee.prototype.clone=function(){return new ee(this.x,this.y,this.width,this.height)},ee.prototype.copy=function($){ee.copy(this,$)},ee.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},ee.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},ee.prototype.isZero=function(){return 0===this.width||0===this.height},ee.create=function($){return new ee($.x,$.y,$.width,$.height)},ee.copy=function($,ie){$.x=ie.x,$.y=ie.y,$.width=ie.width,$.height=ie.height},ee.applyTransform=function($,ie,K){if(K){if(K[1]<1e-5&&K[1]>-1e-5&&K[2]<1e-5&&K[2]>-1e-5){var b=K[0],Y=K[3],F=K[5];return $.x=ie.x*b+K[4],$.y=ie.y*Y+F,$.width=ie.width*b,$.height=ie.height*Y,$.width<0&&($.x+=$.width,$.width=-$.width),void($.height<0&&($.y+=$.height,$.height=-$.height))}ve.x=Ce.x=ie.x,ve.y=he.y=ie.y,be.x=he.x=ie.x+ie.width,be.y=Ce.y=ie.y+ie.height,ve.transform(K),he.transform(K),be.transform(K),Ce.transform(K),$.x=le(ve.x,be.x,Ce.x,he.x),$.y=le(ve.y,be.y,Ce.y,he.y);var q=ye(ve.x,be.x,Ce.x,he.x),G=ye(ve.y,be.y,Ce.y,he.y);$.width=q-$.x,$.height=G-$.y}else $!==ie&&ee.copy($,ie)},ee}()},6801:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>Se});const Se=function(){function le(ye){ye&&(this._$eventProcessor=ye)}return le.prototype.on=function(ye,ve,be,Ce){this._$handlers||(this._$handlers={});var he=this._$handlers;if("function"==typeof ve&&(Ce=be,be=ve,ve=null),!be||!ye)return this;var j=this._$eventProcessor;null!=ve&&j&&j.normalizeQuery&&(ve=j.normalizeQuery(ve)),he[ye]||(he[ye]=[]);for(var X=0;X<he[ye].length;X++)if(he[ye][X].h===be)return this;var re={h:be,query:ve,ctx:Ce||this,callAtLast:be.zrEventfulCallAtLast},U=he[ye].length-1,ee=he[ye][U];return ee&&ee.callAtLast?he[ye].splice(U,0,re):he[ye].push(re),this},le.prototype.isSilent=function(ye){var ve=this._$handlers;return!ve||!ve[ye]||!ve[ye].length},le.prototype.off=function(ye,ve){var be=this._$handlers;if(!be)return this;if(!ye)return this._$handlers={},this;if(ve){if(be[ye]){for(var Ce=[],he=0,j=be[ye].length;he<j;he++)be[ye][he].h!==ve&&Ce.push(be[ye][he]);be[ye]=Ce}be[ye]&&0===be[ye].length&&delete be[ye]}else delete be[ye];return this},le.prototype.trigger=function(ye){for(var ve=[],be=1;be<arguments.length;be++)ve[be-1]=arguments[be];if(!this._$handlers)return this;var Ce=this._$handlers[ye],he=this._$eventProcessor;if(Ce)for(var j=ve.length,X=Ce.length,re=0;re<X;re++){var U=Ce[re];if(!he||!he.filter||null==U.query||he.filter(ye,U.query))switch(j){case 0:U.h.call(U.ctx);break;case 1:U.h.call(U.ctx,ve[0]);break;case 2:U.h.call(U.ctx,ve[0],ve[1]);break;default:U.h.apply(U.ctx,ve)}}return he&&he.afterTrigger&&he.afterTrigger(ye),this},le.prototype.triggerWithContext=function(ye){for(var ve=[],be=1;be<arguments.length;be++)ve[be-1]=arguments[be];if(!this._$handlers)return this;var Ce=this._$handlers[ye],he=this._$eventProcessor;if(Ce)for(var j=ve.length,X=ve[j-1],re=Ce.length,U=0;U<re;U++){var ee=Ce[U];if(!he||!he.filter||null==ee.query||he.filter(ye,ee.query))switch(j){case 0:ee.h.call(X);break;case 1:ee.h.call(X,ve[0]);break;case 2:ee.h.call(X,ve[0],ve[1]);break;default:ee.h.apply(X,ve.slice(1,j-1))}}return he&&he.afterTrigger&&he.afterTrigger(ye),this},le}()},7148:(Bt,Qe,z)=>{z.d(Qe,{ZP:()=>ye});var ce=function ve(be){this.value=be},Se=function(){function ve(){this._len=0}return ve.prototype.insert=function(be){var Ce=new ce(be);return this.insertEntry(Ce),Ce},ve.prototype.insertEntry=function(be){this.head?(this.tail.next=be,be.prev=this.tail,be.next=null,this.tail=be):this.head=this.tail=be,this._len++},ve.prototype.remove=function(be){var Ce=be.prev,he=be.next;Ce?Ce.next=he:this.head=he,he?he.prev=Ce:this.tail=Ce,be.next=be.prev=null,this._len--},ve.prototype.len=function(){return this._len},ve.prototype.clear=function(){this.head=this.tail=null,this._len=0},ve}();const ye=function(){function ve(be){this._list=new Se,this._maxSize=10,this._map={},this._maxSize=be}return ve.prototype.put=function(be,Ce){var he=this._list,j=this._map,X=null;if(null==j[be]){var re=he.len(),U=this._lastRemovedEntry;if(re>=this._maxSize&&re>0){var ee=he.head;he.remove(ee),delete j[ee.key],X=ee.value,this._lastRemovedEntry=ee}U?U.value=Ce:U=new ce(Ce),U.key=be,he.insertEntry(U),j[be]=U}return X},ve.prototype.get=function(be){var Ce=this._map[be],he=this._list;if(null!=Ce)return Ce!==he.tail&&(he.remove(Ce),he.insertEntry(Ce)),Ce.value},ve.prototype.clear=function(){this._list.clear(),this._map={}},ve.prototype.len=function(){return this._list.len()},ve}()},6217:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>Ce});var ce=z(7564),Se=[0,0],le=[0,0],ye=new ce.Z,ve=new ce.Z;const Ce=function(){function he(j,X){this._corners=[],this._axes=[],this._origin=[0,0];for(var re=0;re<4;re++)this._corners[re]=new ce.Z;for(re=0;re<2;re++)this._axes[re]=new ce.Z;j&&this.fromBoundingRect(j,X)}return he.prototype.fromBoundingRect=function(j,X){var re=this._corners,U=this._axes,ee=j.x,$=j.y,ie=ee+j.width,K=$+j.height;if(re[0].set(ee,$),re[1].set(ie,$),re[2].set(ie,K),re[3].set(ee,K),X)for(var b=0;b<4;b++)re[b].transform(X);for(ce.Z.sub(U[0],re[1],re[0]),ce.Z.sub(U[1],re[3],re[0]),U[0].normalize(),U[1].normalize(),b=0;b<2;b++)this._origin[b]=U[b].dot(re[0])},he.prototype.intersect=function(j,X){var re=!0,U=!X;return ye.set(1/0,1/0),ve.set(0,0),!this._intersectCheckOneSide(this,j,ye,ve,U,1)&&(re=!1,U)||!this._intersectCheckOneSide(j,this,ye,ve,U,-1)&&(re=!1,U)||U||ce.Z.copy(X,re?ye:ve),re},he.prototype._intersectCheckOneSide=function(j,X,re,U,ee,$){for(var ie=!0,K=0;K<2;K++){var b=this._axes[K];if(this._getProjMinMaxOnAxis(K,j._corners,Se),this._getProjMinMaxOnAxis(K,X._corners,le),Se[1]<le[0]||Se[0]>le[1]){if(ie=!1,ee)return ie;var Y=Math.abs(le[0]-Se[1]),Q=Math.abs(Se[0]-le[1]);Math.min(Y,Q)>U.len()&&ce.Z.scale(U,b,Y<Q?-Y*$:Q*$)}else re&&(Y=Math.abs(le[0]-Se[1]),Q=Math.abs(Se[0]-le[1]),Math.min(Y,Q)<re.len()&&ce.Z.scale(re,b,Y<Q?Y*$:-Q*$))}return ie},he.prototype._getProjMinMaxOnAxis=function(j,X,re){for(var U=this._axes[j],ee=this._origin,$=X[0].dot(U)+ee[j],ie=$,K=$,b=1;b<X.length;b++){var Y=X[b].dot(U)+ee[j];ie=Math.min(Y,ie),K=Math.max(Y,K)}re[0]=ie,re[1]=K},he}()},7349:(Bt,Qe,z)=>{z.d(Qe,{L:()=>W,Z:()=>V});var ce=z(8221),Se=z(7021),le=z(6704),ye=z(9110),ve=z(9969),be={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Ce=[],he=[],j=[],X=[],re=[],U=[],ee=Math.min,$=Math.max,ie=Math.cos,K=Math.sin,b=Math.abs,Y=Math.PI,Q=2*Y,F=typeof Float32Array<"u",q=[];function G(P){return Math.round(P/Y*1e8)/1e8%2*Y}function W(P,T){var R=G(P[0]);R<0&&(R+=Q);var M=P[1];M+=R-P[0],!T&&M-R>=Q?M=R+Q:T&&R-M>=Q?M=R-Q:!T&&R>M?M=R+(Q-G(R-M)):T&&R<M&&(M=R-(Q-G(M-R))),P[0]=R,P[1]=M}const V=function(){function P(T){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,T&&(this._saveData=!1),this._saveData&&(this.data=[])}return P.prototype.increaseVersion=function(){this._version++},P.prototype.getVersion=function(){return this._version},P.prototype.setScale=function(T,R,E){(E=E||0)>0&&(this._ux=b(E/le.KL/T)||0,this._uy=b(E/le.KL/R)||0)},P.prototype.setDPR=function(T){this.dpr=T},P.prototype.setContext=function(T){this._ctx=T},P.prototype.getContext=function(){return this._ctx},P.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},P.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},P.prototype.moveTo=function(T,R){return this._drawPendingPt(),this.addData(be.M,T,R),this._ctx&&this._ctx.moveTo(T,R),this._x0=T,this._y0=R,this._xi=T,this._yi=R,this},P.prototype.lineTo=function(T,R){var E=b(T-this._xi),M=b(R-this._yi),A=E>this._ux||M>this._uy;if(this.addData(be.L,T,R),this._ctx&&A&&this._ctx.lineTo(T,R),A)this._xi=T,this._yi=R,this._pendingPtDist=0;else{var O=E*E+M*M;O>this._pendingPtDist&&(this._pendingPtX=T,this._pendingPtY=R,this._pendingPtDist=O)}return this},P.prototype.bezierCurveTo=function(T,R,E,M,A,O){return this._drawPendingPt(),this.addData(be.C,T,R,E,M,A,O),this._ctx&&this._ctx.bezierCurveTo(T,R,E,M,A,O),this._xi=A,this._yi=O,this},P.prototype.quadraticCurveTo=function(T,R,E,M){return this._drawPendingPt(),this.addData(be.Q,T,R,E,M),this._ctx&&this._ctx.quadraticCurveTo(T,R,E,M),this._xi=E,this._yi=M,this},P.prototype.arc=function(T,R,E,M,A,O){return this._drawPendingPt(),q[0]=M,q[1]=A,W(q,O),this.addData(be.A,T,R,E,E,M=q[0],(A=q[1])-M,0,O?0:1),this._ctx&&this._ctx.arc(T,R,E,M,A,O),this._xi=ie(A)*E+T,this._yi=K(A)*E+R,this},P.prototype.arcTo=function(T,R,E,M,A){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(T,R,E,M,A),this},P.prototype.rect=function(T,R,E,M){return this._drawPendingPt(),this._ctx&&this._ctx.rect(T,R,E,M),this.addData(be.R,T,R,E,M),this},P.prototype.closePath=function(){this._drawPendingPt(),this.addData(be.Z);var T=this._ctx,R=this._x0,E=this._y0;return T&&T.closePath(),this._xi=R,this._yi=E,this},P.prototype.fill=function(T){T&&T.fill(),this.toStatic()},P.prototype.stroke=function(T){T&&T.stroke(),this.toStatic()},P.prototype.len=function(){return this._len},P.prototype.setData=function(T){var R=T.length;(!this.data||this.data.length!==R)&&F&&(this.data=new Float32Array(R));for(var E=0;E<R;E++)this.data[E]=T[E];this._len=R},P.prototype.appendPath=function(T){T instanceof Array||(T=[T]);for(var R=T.length,E=0,M=this._len,A=0;A<R;A++)E+=T[A].len();for(F&&this.data instanceof Float32Array&&(this.data=new Float32Array(M+E)),A=0;A<R;A++)for(var O=T[A].data,B=0;B<O.length;B++)this.data[M++]=O[B];this._len=M},P.prototype.addData=function(T,R,E,M,A,O,B,ue,ae){if(this._saveData){var oe=this.data;this._len+arguments.length>oe.length&&(this._expandData(),oe=this.data);for(var de=0;de<arguments.length;de++)oe[this._len++]=arguments[de]}},P.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},P.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var T=[],R=0;R<this._len;R++)T[R]=this.data[R];this.data=T}},P.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var T=this.data;T instanceof Array&&(T.length=this._len,F&&this._len>11&&(this.data=new Float32Array(T)))}},P.prototype.getBoundingRect=function(){j[0]=j[1]=re[0]=re[1]=Number.MAX_VALUE,X[0]=X[1]=U[0]=U[1]=-Number.MAX_VALUE;var O,T=this.data,R=0,E=0,M=0,A=0;for(O=0;O<this._len;){var B=T[O++],ue=1===O;switch(ue&&(M=R=T[O],A=E=T[O+1]),B){case be.M:R=M=T[O++],E=A=T[O++],re[0]=M,re[1]=A,U[0]=M,U[1]=A;break;case be.L:(0,ye.u4)(R,E,T[O],T[O+1],re,U),R=T[O++],E=T[O++];break;case be.C:(0,ye.H9)(R,E,T[O++],T[O++],T[O++],T[O++],T[O],T[O+1],re,U),R=T[O++],E=T[O++];break;case be.Q:(0,ye.mJ)(R,E,T[O++],T[O++],T[O],T[O+1],re,U),R=T[O++],E=T[O++];break;case be.A:var ae=T[O++],oe=T[O++],de=T[O++],te=T[O++],xe=T[O++],fe=T[O++]+xe;O+=1;var ge=!T[O++];ue&&(M=ie(xe)*de+ae,A=K(xe)*te+oe),(0,ye.qL)(ae,oe,de,te,xe,fe,ge,re,U),R=ie(fe)*de+ae,E=K(fe)*te+oe;break;case be.R:M=R=T[O++],A=E=T[O++];var we=T[O++],Te=T[O++];(0,ye.u4)(M,A,M+we,A+Te,re,U);break;case be.Z:R=M,E=A}ce.min(j,j,re),ce.max(X,X,U)}return 0===O&&(j[0]=j[1]=X[0]=X[1]=0),new Se.Z(j[0],j[1],X[0]-j[0],X[1]-j[1])},P.prototype._calculateLength=function(){var T=this.data,R=this._len,E=this._ux,M=this._uy,A=0,O=0,B=0,ue=0;this._pathSegLen||(this._pathSegLen=[]);for(var ae=this._pathSegLen,oe=0,de=0,te=0;te<R;){var xe=T[te++],fe=1===te;fe&&(B=A=T[te],ue=O=T[te+1]);var ge=-1;switch(xe){case be.M:A=B=T[te++],O=ue=T[te++];break;case be.L:var we=T[te++],Ee=(Te=T[te++])-O;(b(Ae=we-A)>E||b(Ee)>M||te===R-1)&&(ge=Math.sqrt(Ae*Ae+Ee*Ee),A=we,O=Te);break;case be.C:var Ve=T[te++],He=T[te++],Te=(we=T[te++],T[te++]),We=T[te++],$e=T[te++];ge=(0,ve.Ci)(A,O,Ve,He,we,Te,We,$e,10),A=We,O=$e;break;case be.Q:Ve=T[te++],He=T[te++],we=T[te++],Te=T[te++],ge=(0,ve.wQ)(A,O,Ve,He,we,Te,10),A=we,O=Te;break;case be.A:var lt=T[te++],St=T[te++],_t=T[te++],Ot=T[te++],Vt=T[te++],an=T[te++],hn=an+Vt;te+=1,te++,fe&&(B=ie(Vt)*_t+lt,ue=K(Vt)*Ot+St),ge=$(_t,Ot)*ee(Q,Math.abs(an)),A=ie(hn)*_t+lt,O=K(hn)*Ot+St;break;case be.R:B=A=T[te++],ue=O=T[te++],ge=2*T[te++]+2*T[te++];break;case be.Z:var Ae=B-A;Ee=ue-O,ge=Math.sqrt(Ae*Ae+Ee*Ee),A=B,O=ue}ge>=0&&(ae[de++]=ge,oe+=ge)}return this._pathLen=oe,oe},P.prototype.rebuildPath=function(T,R){var B,ue,ae,oe,de,te,fe,Ae,Ve,He,E=this.data,M=this._ux,A=this._uy,O=this._len,xe=R<1,we=0,Te=0,Ee=0;if(!xe||(this._pathSegLen||this._calculateLength(),fe=this._pathSegLen,Ae=R*this._pathLen))e:for(var We=0;We<O;){var $e=E[We++],lt=1===We;switch(lt&&(B=ae=E[We],ue=oe=E[We+1]),$e!==be.L&&Ee>0&&(T.lineTo(Ve,He),Ee=0),$e){case be.M:B=ae=E[We++],ue=oe=E[We++],T.moveTo(ae,oe);break;case be.L:de=E[We++],te=E[We++];var St=b(de-ae),_t=b(te-oe);if(St>M||_t>A){if(xe){if(we+(Ot=fe[Te++])>Ae){T.lineTo(ae*(1-(Vt=(Ae-we)/Ot))+de*Vt,oe*(1-Vt)+te*Vt);break e}we+=Ot}T.lineTo(de,te),ae=de,oe=te,Ee=0}else{var an=St*St+_t*_t;an>Ee&&(Ve=de,He=te,Ee=an)}break;case be.C:var hn=E[We++],Vn=E[We++],ar=E[We++],Yn=E[We++],vr=E[We++],Qn=E[We++];if(xe){if(we+(Ot=fe[Te++])>Ae){(0,ve.Vz)(ae,hn,ar,vr,Vt=(Ae-we)/Ot,Ce),(0,ve.Vz)(oe,Vn,Yn,Qn,Vt,he),T.bezierCurveTo(Ce[1],he[1],Ce[2],he[2],Ce[3],he[3]);break e}we+=Ot}T.bezierCurveTo(hn,Vn,ar,Yn,vr,Qn),ae=vr,oe=Qn;break;case be.Q:if(hn=E[We++],Vn=E[We++],ar=E[We++],Yn=E[We++],xe){if(we+(Ot=fe[Te++])>Ae){(0,ve.Lx)(ae,hn,ar,Vt=(Ae-we)/Ot,Ce),(0,ve.Lx)(oe,Vn,Yn,Vt,he),T.quadraticCurveTo(Ce[1],he[1],Ce[2],he[2]);break e}we+=Ot}T.quadraticCurveTo(hn,Vn,ar,Yn),ae=ar,oe=Yn;break;case be.A:var $t=E[We++],un=E[We++],On=E[We++],jn=E[We++],Je=E[We++],Dt=E[We++],Gt=E[We++],Rt=!E[We++],fn=On>jn?On:jn,hr=b(On-jn)>.001,fr=Je+Dt,tt=!1;if(xe&&(we+(Ot=fe[Te++])>Ae&&(fr=Je+Dt*(Ae-we)/Ot,tt=!0),we+=Ot),hr&&T.ellipse?T.ellipse($t,un,On,jn,Gt,Je,fr,Rt):T.arc($t,un,fn,Je,fr,Rt),tt)break e;lt&&(B=ie(Je)*On+$t,ue=K(Je)*jn+un),ae=ie(fr)*On+$t,oe=K(fr)*jn+un;break;case be.R:B=ae=E[We],ue=oe=E[We+1],de=E[We++],te=E[We++];var it=E[We++],at=E[We++];if(xe){if(we+(Ot=fe[Te++])>Ae){var je=Ae-we;T.moveTo(de,te),T.lineTo(de+ee(je,it),te),(je-=it)>0&&T.lineTo(de+it,te+ee(je,at)),(je-=at)>0&&T.lineTo(de+$(it-je,0),te+at),(je-=it)>0&&T.lineTo(de,te+$(at-je,0));break e}we+=Ot}T.rect(de,te,it,at);break;case be.Z:if(xe){var Ot;if(we+(Ot=fe[Te++])>Ae){var Vt;T.lineTo(ae*(1-(Vt=(Ae-we)/Ot))+B*Vt,oe*(1-Vt)+ue*Vt);break e}we+=Ot}T.closePath(),ae=B,oe=ue}}},P.prototype.clone=function(){var T=new P,R=this.data;return T.data=R.slice?R.slice():Array.prototype.slice.call(R),T._len=this._len,T},P.CMD=be,P.initDefaultProps=((T=P.prototype)._saveData=!0,T._ux=0,T._uy=0,T._pendingPtDist=0,void(T._version=0)),P;var T}()},7564:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>Se});const Se=function(){function le(ye,ve){this.x=ye||0,this.y=ve||0}return le.prototype.copy=function(ye){return this.x=ye.x,this.y=ye.y,this},le.prototype.clone=function(){return new le(this.x,this.y)},le.prototype.set=function(ye,ve){return this.x=ye,this.y=ve,this},le.prototype.equal=function(ye){return ye.x===this.x&&ye.y===this.y},le.prototype.add=function(ye){return this.x+=ye.x,this.y+=ye.y,this},le.prototype.scale=function(ye){this.x*=ye,this.y*=ye},le.prototype.scaleAndAdd=function(ye,ve){this.x+=ye.x*ve,this.y+=ye.y*ve},le.prototype.sub=function(ye){return this.x-=ye.x,this.y-=ye.y,this},le.prototype.dot=function(ye){return this.x*ye.x+this.y*ye.y},le.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},le.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},le.prototype.normalize=function(){var ye=this.len();return this.x/=ye,this.y/=ye,this},le.prototype.distance=function(ye){var ve=this.x-ye.x,be=this.y-ye.y;return Math.sqrt(ve*ve+be*be)},le.prototype.distanceSquare=function(ye){var ve=this.x-ye.x,be=this.y-ye.y;return ve*ve+be*be},le.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},le.prototype.transform=function(ye){if(ye){var ve=this.x,be=this.y;return this.x=ye[0]*ve+ye[2]*be+ye[4],this.y=ye[1]*ve+ye[3]*be+ye[5],this}},le.prototype.toArray=function(ye){return ye[0]=this.x,ye[1]=this.y,ye},le.prototype.fromArray=function(ye){this.x=ye[0],this.y=ye[1]},le.set=function(ye,ve,be){ye.x=ve,ye.y=be},le.copy=function(ye,ve){ye.x=ve.x,ye.y=ve.y},le.len=function(ye){return Math.sqrt(ye.x*ye.x+ye.y*ye.y)},le.lenSquare=function(ye){return ye.x*ye.x+ye.y*ye.y},le.dot=function(ye,ve){return ye.x*ve.x+ye.y*ve.y},le.add=function(ye,ve,be){ye.x=ve.x+be.x,ye.y=ve.y+be.y},le.sub=function(ye,ve,be){ye.x=ve.x-be.x,ye.y=ve.y-be.y},le.scale=function(ye,ve,be){ye.x=ve.x*be,ye.y=ve.y*be},le.scaleAndAdd=function(ye,ve,be,Ce){ye.x=ve.x+be.x*Ce,ye.y=ve.y+be.y*Ce},le.lerp=function(ye,ve,be,Ce){var he=1-Ce;ye.x=he*ve.x+Ce*be.x,ye.y=he*ve.y+Ce*be.y},le}()},9778:(Bt,Qe,z)=>{z.d(Qe,{ZP:()=>ee,dN:()=>re,kY:()=>U});var ce=z(3481),Se=z(8221),le=ce.identity;function ve($){return $>5e-5||$<-5e-5}var be=[],Ce=[],he=ce.create(),j=Math.abs,X=function(){function $(){}return $.prototype.getLocalTransform=function(ie){return $.getLocalTransform(this,ie)},$.prototype.setPosition=function(ie){this.x=ie[0],this.y=ie[1]},$.prototype.setScale=function(ie){this.scaleX=ie[0],this.scaleY=ie[1]},$.prototype.setSkew=function(ie){this.skewX=ie[0],this.skewY=ie[1]},$.prototype.setOrigin=function(ie){this.originX=ie[0],this.originY=ie[1]},$.prototype.needLocalTransform=function(){return ve(this.rotation)||ve(this.x)||ve(this.y)||ve(this.scaleX-1)||ve(this.scaleY-1)||ve(this.skewX)||ve(this.skewY)},$.prototype.updateTransform=function(){var ie=this.parent&&this.parent.transform,K=this.needLocalTransform(),b=this.transform;K||ie?(b=b||ce.create(),K?this.getLocalTransform(b):le(b),ie&&(K?ce.mul(b,ie,b):ce.copy(b,ie)),this.transform=b,this._resolveGlobalScaleRatio(b)):b&&le(b)},$.prototype._resolveGlobalScaleRatio=function(ie){var K=this.globalScaleRatio;if(null!=K&&1!==K){this.getGlobalScale(be);var b=be[0]<0?-1:1,Y=be[1]<0?-1:1,Q=((be[0]-b)*K+b)/be[0]||0,F=((be[1]-Y)*K+Y)/be[1]||0;ie[0]*=Q,ie[1]*=Q,ie[2]*=F,ie[3]*=F}this.invTransform=this.invTransform||ce.create(),ce.invert(this.invTransform,ie)},$.prototype.getComputedTransform=function(){for(var ie=this,K=[];ie;)K.push(ie),ie=ie.parent;for(;ie=K.pop();)ie.updateTransform();return this.transform},$.prototype.setLocalTransform=function(ie){if(ie){var K=ie[0]*ie[0]+ie[1]*ie[1],b=ie[2]*ie[2]+ie[3]*ie[3],Y=Math.atan2(ie[1],ie[0]),Q=Math.PI/2+Y-Math.atan2(ie[3],ie[2]);b=Math.sqrt(b)*Math.cos(Q),K=Math.sqrt(K),this.skewX=Q,this.skewY=0,this.rotation=-Y,this.x=+ie[4],this.y=+ie[5],this.scaleX=K,this.scaleY=b,this.originX=0,this.originY=0}},$.prototype.decomposeTransform=function(){if(this.transform){var ie=this.parent,K=this.transform;ie&&ie.transform&&(ce.mul(Ce,ie.invTransform,K),K=Ce);var b=this.originX,Y=this.originY;(b||Y)&&(he[4]=b,he[5]=Y,ce.mul(Ce,K,he),Ce[4]-=b,Ce[5]-=Y,K=Ce),this.setLocalTransform(K)}},$.prototype.getGlobalScale=function(ie){var K=this.transform;return ie=ie||[],K?(ie[0]=Math.sqrt(K[0]*K[0]+K[1]*K[1]),ie[1]=Math.sqrt(K[2]*K[2]+K[3]*K[3]),K[0]<0&&(ie[0]=-ie[0]),K[3]<0&&(ie[1]=-ie[1]),ie):(ie[0]=1,ie[1]=1,ie)},$.prototype.transformCoordToLocal=function(ie,K){var b=[ie,K],Y=this.invTransform;return Y&&Se.applyTransform(b,b,Y),b},$.prototype.transformCoordToGlobal=function(ie,K){var b=[ie,K],Y=this.transform;return Y&&Se.applyTransform(b,b,Y),b},$.prototype.getLineScale=function(){var ie=this.transform;return ie&&j(ie[0]-1)>1e-10&&j(ie[3]-1)>1e-10?Math.sqrt(j(ie[0]*ie[3]-ie[2]*ie[1])):1},$.prototype.copyTransform=function(ie){U(this,ie)},$.getLocalTransform=function(ie,K){K=K||[];var b=ie.originX||0,Y=ie.originY||0,Q=ie.scaleX,F=ie.scaleY,q=ie.anchorX,G=ie.anchorY,W=ie.rotation||0,J=ie.x,V=ie.y,P=ie.skewX?Math.tan(ie.skewX):0,T=ie.skewY?Math.tan(-ie.skewY):0;if(b||Y||q||G){var R=b+q,E=Y+G;K[4]=-R*Q-P*E*F,K[5]=-E*F-T*R*Q}else K[4]=K[5]=0;return K[0]=Q,K[3]=F,K[1]=T*Q,K[2]=P*F,W&&ce.rotate(K,K,W),K[4]+=b+J,K[5]+=Y+V,K},$.initDefaultProps=((ie=$.prototype).scaleX=ie.scaleY=ie.globalScaleRatio=1,void(ie.x=ie.y=ie.originX=ie.originY=ie.skewX=ie.skewY=ie.rotation=ie.anchorX=ie.anchorY=0)),$;var ie}(),re=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function U($,ie){for(var K=0;K<re.length;K++){var b=re[K];$[b]=ie[b]}}const ee=X},9110:(Bt,Qe,z)=>{z.d(Qe,{H9:()=>ie,mJ:()=>K,qL:()=>b,u4:()=>U,zk:()=>re});var ce=z(8221),Se=z(9969),le=Math.min,ye=Math.max,ve=Math.sin,be=Math.cos,Ce=2*Math.PI,he=ce.create(),j=ce.create(),X=ce.create();function re(Y,Q,F){if(0!==Y.length){for(var q=Y[0],G=q[0],W=q[0],J=q[1],V=q[1],P=1;P<Y.length;P++)G=le(G,(q=Y[P])[0]),W=ye(W,q[0]),J=le(J,q[1]),V=ye(V,q[1]);Q[0]=G,Q[1]=J,F[0]=W,F[1]=V}}function U(Y,Q,F,q,G,W){G[0]=le(Y,F),G[1]=le(Q,q),W[0]=ye(Y,F),W[1]=ye(Q,q)}var ee=[],$=[];function ie(Y,Q,F,q,G,W,J,V,P,T){var R=Se.pP,E=Se.af,M=R(Y,F,G,J,ee);P[0]=1/0,P[1]=1/0,T[0]=-1/0,T[1]=-1/0;for(var A=0;A<M;A++){var O=E(Y,F,G,J,ee[A]);P[0]=le(O,P[0]),T[0]=ye(O,T[0])}for(M=R(Q,q,W,V,$),A=0;A<M;A++){var B=E(Q,q,W,V,$[A]);P[1]=le(B,P[1]),T[1]=ye(B,T[1])}P[0]=le(Y,P[0]),T[0]=ye(Y,T[0]),P[0]=le(J,P[0]),T[0]=ye(J,T[0]),P[1]=le(Q,P[1]),T[1]=ye(Q,T[1]),P[1]=le(V,P[1]),T[1]=ye(V,T[1])}function K(Y,Q,F,q,G,W,J,V){var P=Se.QC,T=Se.Zm,R=ye(le(P(Y,F,G),1),0),E=ye(le(P(Q,q,W),1),0),M=T(Y,F,G,R),A=T(Q,q,W,E);J[0]=le(Y,G,M),J[1]=le(Q,W,A),V[0]=ye(Y,G,M),V[1]=ye(Q,W,A)}function b(Y,Q,F,q,G,W,J,V,P){var T=ce.min,R=ce.max,E=Math.abs(G-W);if(E%Ce<1e-4&&E>1e-4)return V[0]=Y-F,V[1]=Q-q,P[0]=Y+F,void(P[1]=Q+q);if(he[0]=be(G)*F+Y,he[1]=ve(G)*q+Q,j[0]=be(W)*F+Y,j[1]=ve(W)*q+Q,T(V,he,j),R(P,he,j),(G%=Ce)<0&&(G+=Ce),(W%=Ce)<0&&(W+=Ce),G>W&&!J?W+=Ce:G<W&&J&&(G+=Ce),J){var M=W;W=G,G=M}for(var A=0;A<W;A+=Math.PI/2)A>G&&(X[0]=be(A)*F+Y,X[1]=ve(A)*q+Q,T(V,X,V),R(P,X,P))}},9969:(Bt,Qe,z)=>{z.d(Qe,{AZ:()=>q,Ci:()=>Q,Jz:()=>G,Lx:()=>J,QC:()=>W,Vz:()=>b,Wr:()=>V,X_:()=>$,Zm:()=>F,af:()=>ee,kD:()=>ie,pP:()=>K,t1:()=>Y,wQ:()=>P});var ce=z(8221),Se=Math.pow,le=Math.sqrt,be=le(3),Ce=1/3,he=(0,ce.create)(),j=(0,ce.create)(),X=(0,ce.create)();function re(T){return T>-1e-8&&T<1e-8}function U(T){return T>1e-8||T<-1e-8}function ee(T,R,E,M,A){var O=1-A;return O*O*(O*T+3*A*R)+A*A*(A*M+3*O*E)}function $(T,R,E,M,A){var O=1-A;return 3*(((R-T)*O+2*(E-R)*A)*O+(M-E)*A*A)}function ie(T,R,E,M,A,O){var B=M+3*(R-E)-T,ue=3*(E-2*R+T),ae=3*(R-T),oe=T-A,de=ue*ue-3*B*ae,te=ue*ae-9*B*oe,xe=ae*ae-3*ue*oe,fe=0;if(re(de)&&re(te))re(ue)?O[0]=0:(ge=-ae/ue)>=0&&ge<=1&&(O[fe++]=ge);else{var we=te*te-4*de*xe;if(re(we)){var Te=te/de,Ae=-Te/2;(ge=-ue/B+Te)>=0&&ge<=1&&(O[fe++]=ge),Ae>=0&&Ae<=1&&(O[fe++]=Ae)}else if(we>0){var Ee=le(we),Ve=de*ue+1.5*B*(-te+Ee),He=de*ue+1.5*B*(-te-Ee);(ge=(-ue-((Ve=Ve<0?-Se(-Ve,Ce):Se(Ve,Ce))+(He=He<0?-Se(-He,Ce):Se(He,Ce))))/(3*B))>=0&&ge<=1&&(O[fe++]=ge)}else{var We=(2*de*ue-3*B*te)/(2*le(de*de*de)),$e=Math.acos(We)/3,lt=le(de),St=Math.cos($e),ge=(-ue-2*lt*St)/(3*B),_t=(Ae=(-ue+lt*(St+be*Math.sin($e)))/(3*B),(-ue+lt*(St-be*Math.sin($e)))/(3*B));ge>=0&&ge<=1&&(O[fe++]=ge),Ae>=0&&Ae<=1&&(O[fe++]=Ae),_t>=0&&_t<=1&&(O[fe++]=_t)}}return fe}function K(T,R,E,M,A){var O=6*E-12*R+6*T,B=9*R+3*M-3*T-9*E,ue=3*R-3*T,ae=0;if(re(B))U(O)&&(oe=-ue/O)>=0&&oe<=1&&(A[ae++]=oe);else{var de=O*O-4*B*ue;if(re(de))A[0]=-O/(2*B);else if(de>0){var oe,te=le(de),xe=(-O-te)/(2*B);(oe=(-O+te)/(2*B))>=0&&oe<=1&&(A[ae++]=oe),xe>=0&&xe<=1&&(A[ae++]=xe)}}return ae}function b(T,R,E,M,A,O){var B=(R-T)*A+T,ue=(E-R)*A+R,ae=(M-E)*A+E,oe=(ue-B)*A+B,de=(ae-ue)*A+ue,te=(de-oe)*A+oe;O[0]=T,O[1]=B,O[2]=oe,O[3]=te,O[4]=te,O[5]=de,O[6]=ae,O[7]=M}function Y(T,R,E,M,A,O,B,ue,ae,oe,de){var te,ge,we,Te,Ae,xe=.005,fe=1/0;he[0]=ae,he[1]=oe;for(var Ee=0;Ee<1;Ee+=.05)j[0]=ee(T,E,A,B,Ee),j[1]=ee(R,M,O,ue,Ee),(Te=(0,ce.distSquare)(he,j))<fe&&(te=Ee,fe=Te);fe=1/0;for(var Ve=0;Ve<32&&!(xe<1e-4);Ve++)we=te+xe,j[0]=ee(T,E,A,B,ge=te-xe),j[1]=ee(R,M,O,ue,ge),Te=(0,ce.distSquare)(j,he),ge>=0&&Te<fe?(te=ge,fe=Te):(X[0]=ee(T,E,A,B,we),X[1]=ee(R,M,O,ue,we),Ae=(0,ce.distSquare)(X,he),we<=1&&Ae<fe?(te=we,fe=Ae):xe*=.5);return de&&(de[0]=ee(T,E,A,B,te),de[1]=ee(R,M,O,ue,te)),le(fe)}function Q(T,R,E,M,A,O,B,ue,ae){for(var oe=T,de=R,te=0,xe=1/ae,fe=1;fe<=ae;fe++){var ge=fe*xe,we=ee(T,E,A,B,ge),Te=ee(R,M,O,ue,ge),Ae=we-oe,Ee=Te-de;te+=Math.sqrt(Ae*Ae+Ee*Ee),oe=we,de=Te}return te}function F(T,R,E,M){var A=1-M;return A*(A*T+2*M*R)+M*M*E}function q(T,R,E,M){return 2*((1-M)*(R-T)+M*(E-R))}function G(T,R,E,M,A){var O=T-2*R+E,B=2*(R-T),ue=T-M,ae=0;if(re(O))U(B)&&(oe=-ue/B)>=0&&oe<=1&&(A[ae++]=oe);else{var de=B*B-4*O*ue;if(re(de))(oe=-B/(2*O))>=0&&oe<=1&&(A[ae++]=oe);else if(de>0){var oe,te=le(de),xe=(-B-te)/(2*O);(oe=(-B+te)/(2*O))>=0&&oe<=1&&(A[ae++]=oe),xe>=0&&xe<=1&&(A[ae++]=xe)}}return ae}function W(T,R,E){var M=T+E-2*R;return 0===M?.5:(T-R)/M}function J(T,R,E,M,A){var O=(R-T)*M+T,B=(E-R)*M+R,ue=(B-O)*M+O;A[0]=T,A[1]=O,A[2]=ue,A[3]=ue,A[4]=B,A[5]=E}function V(T,R,E,M,A,O,B,ue,ae){var oe,de=.005,te=1/0;he[0]=B,he[1]=ue;for(var xe=0;xe<1;xe+=.05)j[0]=F(T,E,A,xe),j[1]=F(R,M,O,xe),(fe=(0,ce.distSquare)(he,j))<te&&(oe=xe,te=fe);te=1/0;for(var ge=0;ge<32&&!(de<1e-4);ge++){var we=oe-de,Te=oe+de;j[0]=F(T,E,A,we),j[1]=F(R,M,O,we);var fe=(0,ce.distSquare)(j,he);if(we>=0&&fe<te)oe=we,te=fe;else{X[0]=F(T,E,A,Te),X[1]=F(R,M,O,Te);var Ae=(0,ce.distSquare)(X,he);Te<=1&&Ae<te?(oe=Te,te=Ae):de*=.5}}return ae&&(ae[0]=F(T,E,A,oe),ae[1]=F(R,M,O,oe)),le(te)}function P(T,R,E,M,A,O,B){for(var ue=T,ae=R,oe=0,de=1/B,te=1;te<=B;te++){var xe=te*de,fe=F(T,E,A,xe),ge=F(R,M,O,xe),we=fe-ue,Te=ge-ae;oe+=Math.sqrt(we*we+Te*Te),ue=fe,ae=ge}return oe}},2425:(Bt,Qe,z)=>{z.d(Qe,{F1:()=>$,UK:()=>re,A4:()=>he,YB:()=>Ce});var ce=z(169),Se=Math.log(2);function le(ie,K,b,Y,Q,F){var q=Y+"-"+Q,G=ie.length;if(F.hasOwnProperty(q))return F[q];if(1===K){var W=Math.round(Math.log((1<<G)-1&~Q)/Se);return ie[b][W]}for(var J=Y|1<<b,V=b+1;Y&1<<V;)V++;for(var P=0,T=0,R=0;T<G;T++){var E=1<<T;E&Q||(P+=(R%2?-1:1)*ie[b][T]*le(ie,K-1,V,J,Q|E,F),R++)}return F[q]=P,P}function ye(ie,K){var b=[[ie[0],ie[1],1,0,0,0,-K[0]*ie[0],-K[0]*ie[1]],[0,0,0,ie[0],ie[1],1,-K[1]*ie[0],-K[1]*ie[1]],[ie[2],ie[3],1,0,0,0,-K[2]*ie[2],-K[2]*ie[3]],[0,0,0,ie[2],ie[3],1,-K[3]*ie[2],-K[3]*ie[3]],[ie[4],ie[5],1,0,0,0,-K[4]*ie[4],-K[4]*ie[5]],[0,0,0,ie[4],ie[5],1,-K[5]*ie[4],-K[5]*ie[5]],[ie[6],ie[7],1,0,0,0,-K[6]*ie[6],-K[6]*ie[7]],[0,0,0,ie[6],ie[7],1,-K[7]*ie[6],-K[7]*ie[7]]],Y={},Q=le(b,8,0,0,0,Y);if(0!==Q){for(var F=[],q=0;q<8;q++)for(var G=0;G<8;G++)null==F[G]&&(F[G]=0),F[G]+=((q+G)%2?-1:1)*le(b,7,0===q?1:0,1<<q,1<<G,Y)/Q*K[q];return function(W,J,V){var P=J*F[6]+V*F[7]+1;W[0]=(J*F[0]+V*F[1]+F[2])/P,W[1]=(J*F[3]+V*F[4]+F[5])/P}}}var ve="___zrEVENTSAVED",be=[];function Ce(ie,K,b,Y,Q){return he(be,K,Y,Q,!0)&&he(ie,b,be[0],be[1])}function he(ie,K,b,Y,Q){if(K.getBoundingClientRect&&ce.Z.domSupported&&!re(K)){var F=K[ve]||(K[ve]={}),q=function j(ie,K){var b=K.markers;if(b)return b;b=K.markers=[];for(var Y=["left","right"],Q=["top","bottom"],F=0;F<4;F++){var q=document.createElement("div"),W=F%2,J=(F>>1)%2;q.style.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",Y[W]+":0",Q[J]+":0",Y[1-W]+":auto",Q[1-J]+":auto",""].join("!important;"),ie.appendChild(q),b.push(q)}return b}(K,F),G=function X(ie,K,b){for(var Y=b?"invTrans":"trans",Q=K[Y],F=K.srcCoords,q=[],G=[],W=!0,J=0;J<4;J++){var V=ie[J].getBoundingClientRect(),P=2*J,T=V.left,R=V.top;q.push(T,R),W=W&&F&&T===F[P]&&R===F[P+1],G.push(ie[J].offsetLeft,ie[J].offsetTop)}return W&&Q?Q:(K.srcCoords=q,K[Y]=b?ye(G,q):ye(q,G))}(q,F,Q);if(G)return G(ie,b,Y),!0}return!1}function re(ie){return"CANVAS"===ie.nodeName.toUpperCase()}var U=/([&<>"'])/g,ee={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function $(ie){return null==ie?"":(ie+"").replace(U,function(K,b){return ee[b]})}},169:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>ve});var ce=function be(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1},le=new function be(){this.browser=new ce,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"};"object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?(le.wxa=!0,le.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?le.worker=!0:typeof navigator>"u"?(le.node=!0,le.svgSupported=!0):function ye(be,Ce){var he=Ce.browser,j=be.match(/Firefox\/([\d.]+)/),X=be.match(/MSIE\s([\d.]+)/)||be.match(/Trident\/.+?rv:(([\d.]+))/),re=be.match(/Edge?\/([\d.]+)/),U=/micromessenger/i.test(be);j&&(he.firefox=!0,he.version=j[1]),X&&(he.ie=!0,he.version=X[1]),re&&(he.edge=!0,he.version=re[1],he.newEdge=+re[1].split(".")[0]>18),U&&(he.weChat=!0),Ce.svgSupported=typeof SVGRect<"u",Ce.touchEventsSupported="ontouchstart"in window&&!he.ie&&!he.edge,Ce.pointerEventsSupported="onpointerdown"in window&&(he.edge||he.ie&&+he.version>=11),Ce.domSupported=typeof document<"u";var ee=document.documentElement.style;Ce.transform3dSupported=(he.ie&&"transition"in ee||he.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in ee)&&!("OTransition"in ee),Ce.transformSupported=Ce.transform3dSupported||he.ie&&+he.version>=9}(navigator.userAgent,le);const ve=le},1170:(Bt,Qe,z)=>{z.d(Qe,{OD:()=>j,Oo:()=>re,eV:()=>be,iP:()=>he,sT:()=>ee,x1:()=>$,xg:()=>U});var ce=z(169),Se=z(2425),le=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ye=[],ve=ce.Z.browser.firefox&&+ce.Z.browser.version.split(".")[0]<39;function be(ie,K,b,Y){return b=b||{},Y?Ce(ie,K,b):ve&&null!=K.layerX&&K.layerX!==K.offsetX?(b.zrX=K.layerX,b.zrY=K.layerY):null!=K.offsetX?(b.zrX=K.offsetX,b.zrY=K.offsetY):Ce(ie,K,b),b}function Ce(ie,K,b){if(ce.Z.domSupported&&ie.getBoundingClientRect){var Y=K.clientX,Q=K.clientY;if((0,Se.UK)(ie)){var F=ie.getBoundingClientRect();return b.zrX=Y-F.left,void(b.zrY=Q-F.top)}if((0,Se.A4)(ye,ie,Y,Q))return b.zrX=ye[0],void(b.zrY=ye[1])}b.zrX=b.zrY=0}function he(ie){return ie||window.event}function j(ie,K,b){if(null!=(K=he(K)).zrX)return K;var Y=K.type;if(Y&&Y.indexOf("touch")>=0){var q="touchend"!==Y?K.targetTouches[0]:K.changedTouches[0];q&&be(ie,q,K,b)}else{be(ie,K,K,b);var F=function X(ie){var K=ie.wheelDelta;if(K)return K;var b=ie.deltaX,Y=ie.deltaY;return null==b||null==Y?K:3*Math.abs(0!==Y?Y:b)*(Y>0?-1:Y<0?1:b>0?-1:1)}(K);K.zrDelta=F?F/120:-(K.detail||0)/3}var G=K.button;return null==K.which&&void 0!==G&&le.test(K.type)&&(K.which=1&G?1:2&G?3:4&G?2:0),K}function re(ie,K,b,Y){ie.addEventListener(K,b,Y)}function U(ie,K,b,Y){ie.removeEventListener(K,b,Y)}var ee=function(ie){ie.preventDefault(),ie.stopPropagation(),ie.cancelBubble=!0};function $(ie){return 2===ie.which||3===ie.which}},3481:(Bt,Qe,z)=>{function ce(){return[1,0,0,1,0,0]}function Se(X){return X[0]=1,X[1]=0,X[2]=0,X[3]=1,X[4]=0,X[5]=0,X}function le(X,re){return X[0]=re[0],X[1]=re[1],X[2]=re[2],X[3]=re[3],X[4]=re[4],X[5]=re[5],X}function ye(X,re,U){var $=re[1]*U[0]+re[3]*U[1],ie=re[0]*U[2]+re[2]*U[3],K=re[1]*U[2]+re[3]*U[3],b=re[0]*U[4]+re[2]*U[5]+re[4],Y=re[1]*U[4]+re[3]*U[5]+re[5];return X[0]=re[0]*U[0]+re[2]*U[1],X[1]=$,X[2]=ie,X[3]=K,X[4]=b,X[5]=Y,X}function ve(X,re,U){return X[0]=re[0],X[1]=re[1],X[2]=re[2],X[3]=re[3],X[4]=re[4]+U[0],X[5]=re[5]+U[1],X}function be(X,re,U){var ee=re[0],$=re[2],ie=re[4],K=re[1],b=re[3],Y=re[5],Q=Math.sin(U),F=Math.cos(U);return X[0]=ee*F+K*Q,X[1]=-ee*Q+K*F,X[2]=$*F+b*Q,X[3]=-$*Q+F*b,X[4]=F*ie+Q*Y,X[5]=F*Y-Q*ie,X}function Ce(X,re,U){var ee=U[0],$=U[1];return X[0]=re[0]*ee,X[1]=re[1]*$,X[2]=re[2]*ee,X[3]=re[3]*$,X[4]=re[4]*ee,X[5]=re[5]*$,X}function he(X,re){var U=re[0],ee=re[2],$=re[4],ie=re[1],K=re[3],b=re[5],Y=U*K-ie*ee;return Y?(X[0]=K*(Y=1/Y),X[1]=-ie*Y,X[2]=-ee*Y,X[3]=U*Y,X[4]=(ee*b-K*$)*Y,X[5]=(ie*$-U*b)*Y,X):null}function j(X){var re=[1,0,0,1,0,0];return le(re,X),re}z.r(Qe),z.d(Qe,{clone:()=>j,copy:()=>le,create:()=>ce,identity:()=>Se,invert:()=>he,mul:()=>ye,rotate:()=>be,scale:()=>Ce,translate:()=>ve})},5730:(Bt,Qe,z)=>{z.d(Qe,{Uo:()=>le,g2:()=>X,n5:()=>ce,qW:()=>j,rk:()=>Se});var re,U,ce=12,Se="sans-serif",le=ce+"px "+Se,he=function Ce(re){var U={};if(typeof JSON>"u")return U;for(var ee=0;ee<re.length;ee++){var $=String.fromCharCode(ee+32),ie=(re.charCodeAt(ee)-20)/100;U[$]=ie}return U}("007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N"),j={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(ee,$){if(!re){var ie=j.createCanvas();re=ie&&ie.getContext("2d")}if(re)return U!==$&&(U=re.font=$||le),re.measureText(ee);ee=ee||"";var K=/^([0-9]*?)px$/.exec($=$||le),b=+(K&&K[1])||ce,Y=0;if($.indexOf("mono")>=0)Y=b*ee.length;else for(var Q=0;Q<ee.length;Q++){var F=he[ee[Q]];Y+=null==F?b:F*b}return{width:Y}},loadImage:function(re,U,ee){var $=new Image;return $.onload=U,$.onerror=ee,$.src=re,$}};function X(re){for(var U in j)re[U]&&(j[U]=re[U])}},9995:(Bt,Qe,z)=>{function ve(U,ee,$,ie){var K=ee+1;if(K===$)return 1;if(ie(U[K++],U[ee])<0){for(;K<$&&ie(U[K],U[K-1])<0;)K++;!function be(U,ee,$){for($--;ee<$;){var ie=U[ee];U[ee++]=U[$],U[$--]=ie}}(U,ee,K)}else for(;K<$&&ie(U[K],U[K-1])>=0;)K++;return K-ee}function Ce(U,ee,$,ie,K){for(ie===ee&&ie++;ie<$;ie++){for(var F,b=U[ie],Y=ee,Q=ie;Y<Q;)K(b,U[F=Y+Q>>>1])<0?Q=F:Y=F+1;var q=ie-Y;switch(q){case 3:U[Y+3]=U[Y+2];case 2:U[Y+2]=U[Y+1];case 1:U[Y+1]=U[Y];break;default:for(;q>0;)U[Y+q]=U[Y+q-1],q--}U[Y]=b}}function he(U,ee,$,ie,K,b){var Y=0,Q=0,F=1;if(b(U,ee[$+K])>0){for(Q=ie-K;F<Q&&b(U,ee[$+K+F])>0;)Y=F,(F=1+(F<<1))<=0&&(F=Q);F>Q&&(F=Q),Y+=K,F+=K}else{for(Q=K+1;F<Q&&b(U,ee[$+K-F])<=0;)Y=F,(F=1+(F<<1))<=0&&(F=Q);F>Q&&(F=Q);var q=Y;Y=K-F,F=K-q}for(Y++;Y<F;){var G=Y+(F-Y>>>1);b(U,ee[$+G])>0?Y=G+1:F=G}return F}function j(U,ee,$,ie,K,b){var Y=0,Q=0,F=1;if(b(U,ee[$+K])<0){for(Q=K+1;F<Q&&b(U,ee[$+K-F])<0;)Y=F,(F=1+(F<<1))<=0&&(F=Q);F>Q&&(F=Q);var q=Y;Y=K-F,F=K-q}else{for(Q=ie-K;F<Q&&b(U,ee[$+K+F])>=0;)Y=F,(F=1+(F<<1))<=0&&(F=Q);F>Q&&(F=Q),Y+=K,F+=K}for(Y++;Y<F;){var G=Y+(F-Y>>>1);b(U,ee[$+G])<0?F=G:Y=G+1}return F}function re(U,ee,$,ie){$||($=0),ie||(ie=U.length);var K=ie-$;if(!(K<2)){var b=0;if(K<32)return void Ce(U,$,ie,$+(b=ve(U,$,ie,ee)),ee);var Y=function X(U,ee){var Y,Q,$=7,F=0,q=[];function V(R){var E=Y[R],M=Q[R],A=Y[R+1],O=Q[R+1];Q[R]=M+O,R===F-3&&(Y[R+1]=Y[R+2],Q[R+1]=Q[R+2]),F--;var B=j(U[A],U,E,M,0,ee);E+=B,0!=(M-=B)&&0!==(O=he(U[E+M-1],U,A,O,O-1,ee))&&(M<=O?function P(R,E,M,A){var O=0;for(O=0;O<E;O++)q[O]=U[R+O];var B=0,ue=M,ae=R;if(U[ae++]=U[ue++],0!=--A)if(1!==E){for(var de,te,xe,oe=$;;){de=0,te=0,xe=!1;do{if(ee(U[ue],q[B])<0){if(U[ae++]=U[ue++],te++,de=0,0==--A){xe=!0;break}}else if(U[ae++]=q[B++],de++,te=0,1==--E){xe=!0;break}}while((de|te)<oe);if(xe)break;do{if(0!==(de=j(U[ue],q,B,E,0,ee))){for(O=0;O<de;O++)U[ae+O]=q[B+O];if(ae+=de,B+=de,(E-=de)<=1){xe=!0;break}}if(U[ae++]=U[ue++],0==--A){xe=!0;break}if(0!==(te=he(q[B],U,ue,A,0,ee))){for(O=0;O<te;O++)U[ae+O]=U[ue+O];if(ae+=te,ue+=te,0==(A-=te)){xe=!0;break}}if(U[ae++]=q[B++],1==--E){xe=!0;break}oe--}while(de>=7||te>=7);if(xe)break;oe<0&&(oe=0),oe+=2}if(($=oe)<1&&($=1),1===E){for(O=0;O<A;O++)U[ae+O]=U[ue+O];U[ae+A]=q[B]}else{if(0===E)throw new Error;for(O=0;O<E;O++)U[ae+O]=q[B+O]}}else{for(O=0;O<A;O++)U[ae+O]=U[ue+O];U[ae+A]=q[B]}else for(O=0;O<E;O++)U[ae+O]=q[B+O]}(E,M,A,O):function T(R,E,M,A){var O=0;for(O=0;O<A;O++)q[O]=U[M+O];var B=R+E-1,ue=A-1,ae=M+A-1,oe=0,de=0;if(U[ae--]=U[B--],0!=--E)if(1!==A){for(var te=$;;){var xe=0,fe=0,ge=!1;do{if(ee(q[ue],U[B])<0){if(U[ae--]=U[B--],xe++,fe=0,0==--E){ge=!0;break}}else if(U[ae--]=q[ue--],fe++,xe=0,1==--A){ge=!0;break}}while((xe|fe)<te);if(ge)break;do{if(0!=(xe=E-j(q[ue],U,R,E,E-1,ee))){for(E-=xe,de=1+(ae-=xe),oe=1+(B-=xe),O=xe-1;O>=0;O--)U[de+O]=U[oe+O];if(0===E){ge=!0;break}}if(U[ae--]=q[ue--],1==--A){ge=!0;break}if(0!=(fe=A-he(U[B],q,0,A,A-1,ee))){for(A-=fe,de=1+(ae-=fe),oe=1+(ue-=fe),O=0;O<fe;O++)U[de+O]=q[oe+O];if(A<=1){ge=!0;break}}if(U[ae--]=U[B--],0==--E){ge=!0;break}te--}while(xe>=7||fe>=7);if(ge)break;te<0&&(te=0),te+=2}if(($=te)<1&&($=1),1===A){for(de=1+(ae-=E),oe=1+(B-=E),O=E-1;O>=0;O--)U[de+O]=U[oe+O];U[ae]=q[ue]}else{if(0===A)throw new Error;for(oe=ae-(A-1),O=0;O<A;O++)U[oe+O]=q[O]}}else{for(de=1+(ae-=E),oe=1+(B-=E),O=E-1;O>=0;O--)U[de+O]=U[oe+O];U[ae]=q[ue]}else for(oe=ae-(A-1),O=0;O<A;O++)U[oe+O]=q[O]}(E,M,A,O))}return Y=[],Q=[],{mergeRuns:function W(){for(;F>1;){var R=F-2;if(R>=1&&Q[R-1]<=Q[R]+Q[R+1]||R>=2&&Q[R-2]<=Q[R]+Q[R-1])Q[R-1]<Q[R+1]&&R--;else if(Q[R]>Q[R+1])break;V(R)}},forceMergeRuns:function J(){for(;F>1;){var R=F-2;R>0&&Q[R-1]<Q[R+1]&&R--,V(R)}},pushRun:function G(R,E){Y[F]=R,Q[F]=E,F+=1}}}(U,ee),Q=function ye(U){for(var ee=0;U>=32;)ee|=1&U,U>>=1;return U+ee}(K);do{if((b=ve(U,$,ie,ee))<Q){var F=K;F>Q&&(F=Q),Ce(U,$,$+F,$+b,ee),b=F}Y.pushRun($,b),Y.mergeRuns(),K-=b,$+=b}while(0!==K);Y.forceMergeRuns()}}z.d(Qe,{Z:()=>re})},628:(Bt,Qe,z)=>{z.r(Qe),z.d(Qe,{HashMap:()=>ar,RADIAN_TO_DEGREE:()=>jn,assert:()=>Ot,bind:()=>B,clone:()=>K,concatArray:()=>vr,createCanvas:()=>q,createHashMap:()=>Yn,createObject:()=>Qn,curry:()=>ue,defaults:()=>F,disableUserSelect:()=>$t,each:()=>P,eqNaN:()=>He,extend:()=>Q,filter:()=>E,find:()=>M,guid:()=>$,hasOwn:()=>un,indexOf:()=>G,inherits:()=>W,isArray:()=>ae,isArrayLike:()=>V,isBuiltInObject:()=>ge,isDom:()=>Te,isFunction:()=>oe,isGradientObject:()=>Ae,isImagePatternObject:()=>Ee,isNumber:()=>xe,isObject:()=>fe,isPrimitive:()=>Vn,isRegExp:()=>Ve,isString:()=>de,isStringSafe:()=>te,isTypedArray:()=>we,keys:()=>A,logError:()=>ie,map:()=>T,merge:()=>b,mergeAll:()=>Y,mixin:()=>J,noop:()=>On,normalizeCssArray:()=>_t,reduce:()=>R,retrieve:()=>We,retrieve2:()=>$e,retrieve3:()=>lt,setAsPrimitive:()=>hn,slice:()=>St,trim:()=>Vt});var ce=z(5730),Se=R(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(Je,Dt){return Je["[object "+Dt+"]"]=!0,Je},{}),le=R(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(Je,Dt){return Je["[object "+Dt+"Array]"]=!0,Je},{}),ye=Object.prototype.toString,ve=Array.prototype,be=ve.forEach,Ce=ve.filter,he=ve.slice,j=ve.map,X=function(){}.constructor,re=X?X.prototype:null,U="__proto__",ee=2311;function $(){return ee++}function ie(){for(var Je=[],Dt=0;Dt<arguments.length;Dt++)Je[Dt]=arguments[Dt];typeof console<"u"&&console.error.apply(console,Je)}function K(Je){if(null==Je||"object"!=typeof Je)return Je;var Dt=Je,Gt=ye.call(Je);if("[object Array]"===Gt){if(!Vn(Je)){Dt=[];for(var Rt=0,fn=Je.length;Rt<fn;Rt++)Dt[Rt]=K(Je[Rt])}}else if(le[Gt]){if(!Vn(Je)){var hr=Je.constructor;if(hr.from)Dt=hr.from(Je);else for(Dt=new hr(Je.length),Rt=0,fn=Je.length;Rt<fn;Rt++)Dt[Rt]=Je[Rt]}}else if(!Se[Gt]&&!Vn(Je)&&!Te(Je))for(var fr in Dt={},Je)Je.hasOwnProperty(fr)&&fr!==U&&(Dt[fr]=K(Je[fr]));return Dt}function b(Je,Dt,Gt){if(!fe(Dt)||!fe(Je))return Gt?K(Dt):Je;for(var Rt in Dt)if(Dt.hasOwnProperty(Rt)&&Rt!==U){var fn=Je[Rt],hr=Dt[Rt];!fe(hr)||!fe(fn)||ae(hr)||ae(fn)||Te(hr)||Te(fn)||ge(hr)||ge(fn)||Vn(hr)||Vn(fn)?(Gt||!(Rt in Je))&&(Je[Rt]=K(Dt[Rt])):b(fn,hr,Gt)}return Je}function Y(Je,Dt){for(var Gt=Je[0],Rt=1,fn=Je.length;Rt<fn;Rt++)Gt=b(Gt,Je[Rt],Dt);return Gt}function Q(Je,Dt){if(Object.assign)Object.assign(Je,Dt);else for(var Gt in Dt)Dt.hasOwnProperty(Gt)&&Gt!==U&&(Je[Gt]=Dt[Gt]);return Je}function F(Je,Dt,Gt){for(var Rt=A(Dt),fn=0;fn<Rt.length;fn++){var hr=Rt[fn];(Gt?null!=Dt[hr]:null==Je[hr])&&(Je[hr]=Dt[hr])}return Je}var q=ce.qW.createCanvas;function G(Je,Dt){if(Je){if(Je.indexOf)return Je.indexOf(Dt);for(var Gt=0,Rt=Je.length;Gt<Rt;Gt++)if(Je[Gt]===Dt)return Gt}return-1}function W(Je,Dt){var Gt=Je.prototype;function Rt(){}for(var fn in Rt.prototype=Dt.prototype,Je.prototype=new Rt,Gt)Gt.hasOwnProperty(fn)&&(Je.prototype[fn]=Gt[fn]);Je.prototype.constructor=Je,Je.superClass=Dt}function J(Je,Dt,Gt){if(Je="prototype"in Je?Je.prototype:Je,Dt="prototype"in Dt?Dt.prototype:Dt,Object.getOwnPropertyNames)for(var Rt=Object.getOwnPropertyNames(Dt),fn=0;fn<Rt.length;fn++){var hr=Rt[fn];"constructor"!==hr&&(Gt?null!=Dt[hr]:null==Je[hr])&&(Je[hr]=Dt[hr])}else F(Je,Dt,Gt)}function V(Je){return!(!Je||"string"==typeof Je)&&"number"==typeof Je.length}function P(Je,Dt,Gt){if(Je&&Dt)if(Je.forEach&&Je.forEach===be)Je.forEach(Dt,Gt);else if(Je.length===+Je.length)for(var Rt=0,fn=Je.length;Rt<fn;Rt++)Dt.call(Gt,Je[Rt],Rt,Je);else for(var hr in Je)Je.hasOwnProperty(hr)&&Dt.call(Gt,Je[hr],hr,Je)}function T(Je,Dt,Gt){if(!Je)return[];if(!Dt)return St(Je);if(Je.map&&Je.map===j)return Je.map(Dt,Gt);for(var Rt=[],fn=0,hr=Je.length;fn<hr;fn++)Rt.push(Dt.call(Gt,Je[fn],fn,Je));return Rt}function R(Je,Dt,Gt,Rt){if(Je&&Dt){for(var fn=0,hr=Je.length;fn<hr;fn++)Gt=Dt.call(Rt,Gt,Je[fn],fn,Je);return Gt}}function E(Je,Dt,Gt){if(!Je)return[];if(!Dt)return St(Je);if(Je.filter&&Je.filter===Ce)return Je.filter(Dt,Gt);for(var Rt=[],fn=0,hr=Je.length;fn<hr;fn++)Dt.call(Gt,Je[fn],fn,Je)&&Rt.push(Je[fn]);return Rt}function M(Je,Dt,Gt){if(Je&&Dt)for(var Rt=0,fn=Je.length;Rt<fn;Rt++)if(Dt.call(Gt,Je[Rt],Rt,Je))return Je[Rt]}function A(Je){if(!Je)return[];if(Object.keys)return Object.keys(Je);var Dt=[];for(var Gt in Je)Je.hasOwnProperty(Gt)&&Dt.push(Gt);return Dt}var B=re&&oe(re.bind)?re.call.bind(re.bind):function O(Je,Dt){for(var Gt=[],Rt=2;Rt<arguments.length;Rt++)Gt[Rt-2]=arguments[Rt];return function(){return Je.apply(Dt,Gt.concat(he.call(arguments)))}};function ue(Je){for(var Dt=[],Gt=1;Gt<arguments.length;Gt++)Dt[Gt-1]=arguments[Gt];return function(){return Je.apply(this,Dt.concat(he.call(arguments)))}}function ae(Je){return Array.isArray?Array.isArray(Je):"[object Array]"===ye.call(Je)}function oe(Je){return"function"==typeof Je}function de(Je){return"string"==typeof Je}function te(Je){return"[object String]"===ye.call(Je)}function xe(Je){return"number"==typeof Je}function fe(Je){var Dt=typeof Je;return"function"===Dt||!!Je&&"object"===Dt}function ge(Je){return!!Se[ye.call(Je)]}function we(Je){return!!le[ye.call(Je)]}function Te(Je){return"object"==typeof Je&&"number"==typeof Je.nodeType&&"object"==typeof Je.ownerDocument}function Ae(Je){return null!=Je.colorStops}function Ee(Je){return null!=Je.image}function Ve(Je){return"[object RegExp]"===ye.call(Je)}function He(Je){return Je!=Je}function We(){for(var Je=[],Dt=0;Dt<arguments.length;Dt++)Je[Dt]=arguments[Dt];for(var Gt=0,Rt=Je.length;Gt<Rt;Gt++)if(null!=Je[Gt])return Je[Gt]}function $e(Je,Dt){return Je??Dt}function lt(Je,Dt,Gt){return Je??Dt??Gt}function St(Je){for(var Dt=[],Gt=1;Gt<arguments.length;Gt++)Dt[Gt-1]=arguments[Gt];return he.apply(Je,Dt)}function _t(Je){if("number"==typeof Je)return[Je,Je,Je,Je];var Dt=Je.length;return 2===Dt?[Je[0],Je[1],Je[0],Je[1]]:3===Dt?[Je[0],Je[1],Je[2],Je[1]]:Je}function Ot(Je,Dt){if(!Je)throw new Error(Dt)}function Vt(Je){return null==Je?null:"function"==typeof Je.trim?Je.trim():Je.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var an="__ec_primitive__";function hn(Je){Je[an]=!0}function Vn(Je){return Je[an]}var ar=function(){function Je(Dt){this.data={};var Gt=ae(Dt);this.data={};var Rt=this;function fn(hr,fr){Gt?Rt.set(hr,fr):Rt.set(fr,hr)}Dt instanceof Je?Dt.each(fn):Dt&&P(Dt,fn)}return Je.prototype.get=function(Dt){return this.data.hasOwnProperty(Dt)?this.data[Dt]:null},Je.prototype.set=function(Dt,Gt){return this.data[Dt]=Gt},Je.prototype.each=function(Dt,Gt){for(var Rt in this.data)this.data.hasOwnProperty(Rt)&&Dt.call(Gt,this.data[Rt],Rt)},Je.prototype.keys=function(){return A(this.data)},Je.prototype.removeKey=function(Dt){delete this.data[Dt]},Je}();function Yn(Je){return new ar(Je)}function vr(Je,Dt){for(var Gt=new Je.constructor(Je.length+Dt.length),Rt=0;Rt<Je.length;Rt++)Gt[Rt]=Je[Rt];var fn=Je.length;for(Rt=0;Rt<Dt.length;Rt++)Gt[Rt+fn]=Dt[Rt];return Gt}function Qn(Je,Dt){var Gt;if(Object.create)Gt=Object.create(Je);else{var Rt=function(){};Rt.prototype=Je,Gt=new Rt}return Dt&&Q(Gt,Dt),Gt}function $t(Je){var Dt=Je.style;Dt.webkitUserSelect="none",Dt.userSelect="none",Dt.webkitTapHighlightColor="rgba(0,0,0,0)",Dt["-webkit-touch-callout"]="none"}function un(Je,Dt){return Je.hasOwnProperty(Dt)}function On(){}var jn=180/Math.PI},8221:(Bt,Qe,z)=>{function ce(P,T){return null==P&&(P=0),null==T&&(T=0),[P,T]}function Se(P,T){return P[0]=T[0],P[1]=T[1],P}function le(P){return[P[0],P[1]]}function ye(P,T,R){return P[0]=T,P[1]=R,P}function ve(P,T,R){return P[0]=T[0]+R[0],P[1]=T[1]+R[1],P}function be(P,T,R,E){return P[0]=T[0]+R[0]*E,P[1]=T[1]+R[1]*E,P}function Ce(P,T,R){return P[0]=T[0]-R[0],P[1]=T[1]-R[1],P}function he(P){return Math.sqrt(X(P))}z.r(Qe),z.d(Qe,{add:()=>ve,applyTransform:()=>W,clone:()=>le,copy:()=>Se,create:()=>ce,dist:()=>Y,distSquare:()=>F,distance:()=>b,distanceSquare:()=>Q,div:()=>ee,dot:()=>$,len:()=>he,lenSquare:()=>X,length:()=>j,lengthSquare:()=>re,lerp:()=>G,max:()=>V,min:()=>J,mul:()=>U,negate:()=>q,normalize:()=>K,scale:()=>ie,scaleAndAdd:()=>be,set:()=>ye,sub:()=>Ce});var j=he;function X(P){return P[0]*P[0]+P[1]*P[1]}var re=X;function U(P,T,R){return P[0]=T[0]*R[0],P[1]=T[1]*R[1],P}function ee(P,T,R){return P[0]=T[0]/R[0],P[1]=T[1]/R[1],P}function $(P,T){return P[0]*T[0]+P[1]*T[1]}function ie(P,T,R){return P[0]=T[0]*R,P[1]=T[1]*R,P}function K(P,T){var R=he(T);return 0===R?(P[0]=0,P[1]=0):(P[0]=T[0]/R,P[1]=T[1]/R),P}function b(P,T){return Math.sqrt((P[0]-T[0])*(P[0]-T[0])+(P[1]-T[1])*(P[1]-T[1]))}var Y=b;function Q(P,T){return(P[0]-T[0])*(P[0]-T[0])+(P[1]-T[1])*(P[1]-T[1])}var F=Q;function q(P,T){return P[0]=-T[0],P[1]=-T[1],P}function G(P,T,R,E){return P[0]=T[0]+E*(R[0]-T[0]),P[1]=T[1]+E*(R[1]-T[1]),P}function W(P,T,R){var E=T[0],M=T[1];return P[0]=R[0]*E+R[2]*M+R[4],P[1]=R[1]*E+R[3]*M+R[5],P}function J(P,T,R){return P[0]=Math.min(T[0],R[0]),P[1]=Math.min(T[1],R[1]),P}function V(P,T,R){return P[0]=Math.max(T[0],R[0]),P[1]=Math.max(T[1],R[1]),P}},1115:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>ye});var ce=z(908),Se=z(126);const ye=function(ve){function be(){var Ce=null!==ve&&ve.apply(this,arguments)||this;return Ce.type="compound",Ce}return(0,ce.ZT)(be,ve),be.prototype._updatePathDirty=function(){for(var Ce=this.shape.paths,he=this.shapeChanged(),j=0;j<Ce.length;j++)he=he||Ce[j].shapeChanged();he&&this.dirtyShape()},be.prototype.beforeBrush=function(){this._updatePathDirty();for(var Ce=this.shape.paths||[],he=this.getGlobalScale(),j=0;j<Ce.length;j++)Ce[j].path||Ce[j].createPathProxy(),Ce[j].path.setScale(he[0],he[1],Ce[j].segmentIgnoreThreshold)},be.prototype.buildPath=function(Ce,he){for(var j=he.paths||[],X=0;X<j.length;X++)j[X].buildPath(Ce,j[X].shape,!0)},be.prototype.afterBrush=function(){for(var Ce=this.shape.paths||[],he=0;he<Ce.length;he++)Ce[he].pathUpdated()},be.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Se.ZP.prototype.getBoundingRect.call(this)},be}(Se.ZP)},9563:(Bt,Qe,z)=>{z.d(Qe,{ZP:()=>ie,ik:()=>he,tj:()=>Ce});var ce=z(908),Se=z(1386),le=z(7021),ye=z(628),ve=z(2369),be="__zr_style_"+Math.round(10*Math.random()),Ce={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},he={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Ce[be]=!0;var j=["z","z2","invisible"],X=["invisible"],re=function(K){function b(Y){return K.call(this,Y)||this}return(0,ce.ZT)(b,K),b.prototype._init=function(Y){for(var Q=(0,ye.keys)(Y),F=0;F<Q.length;F++){var q=Q[F];"style"===q?this.useStyle(Y[q]):K.prototype.attrKV.call(this,q,Y[q])}this.style||this.useStyle({})},b.prototype.beforeBrush=function(){},b.prototype.afterBrush=function(){},b.prototype.innerBeforeBrush=function(){},b.prototype.innerAfterBrush=function(){},b.prototype.shouldBePainted=function(Y,Q,F,q){var G=this.transform;if(this.ignore||this.invisible||0===this.style.opacity||this.culling&&function $(K,b,Y){return U.copy(K.getBoundingRect()),K.transform&&U.applyTransform(K.transform),ee.width=b,ee.height=Y,!U.intersect(ee)}(this,Y,Q)||G&&!G[0]&&!G[3])return!1;if(F&&this.__clipPaths)for(var W=0;W<this.__clipPaths.length;++W)if(this.__clipPaths[W].isZeroArea())return!1;if(q&&this.parent)for(var J=this.parent;J;){if(J.ignore)return!1;J=J.parent}return!0},b.prototype.contain=function(Y,Q){return this.rectContain(Y,Q)},b.prototype.traverse=function(Y,Q){Y.call(Q,this)},b.prototype.rectContain=function(Y,Q){var F=this.transformCoordToLocal(Y,Q);return this.getBoundingRect().contain(F[0],F[1])},b.prototype.getPaintRect=function(){var Y=this._paintRect;if(!this._paintRect||this.__dirty){var Q=this.transform,F=this.getBoundingRect(),q=this.style,G=q.shadowBlur||0,W=q.shadowOffsetX||0,J=q.shadowOffsetY||0;Y=this._paintRect||(this._paintRect=new le.Z(0,0,0,0)),Q?le.Z.applyTransform(Y,F,Q):Y.copy(F),(G||W||J)&&(Y.width+=2*G+Math.abs(W),Y.height+=2*G+Math.abs(J),Y.x=Math.min(Y.x,Y.x+W-G),Y.y=Math.min(Y.y,Y.y+J-G));var V=this.dirtyRectTolerance;Y.isZero()||(Y.x=Math.floor(Y.x-V),Y.y=Math.floor(Y.y-V),Y.width=Math.ceil(Y.width+1+2*V),Y.height=Math.ceil(Y.height+1+2*V))}return Y},b.prototype.setPrevPaintRect=function(Y){Y?(this._prevPaintRect=this._prevPaintRect||new le.Z(0,0,0,0),this._prevPaintRect.copy(Y)):this._prevPaintRect=null},b.prototype.getPrevPaintRect=function(){return this._prevPaintRect},b.prototype.animateStyle=function(Y){return this.animate("style",Y)},b.prototype.updateDuringAnimation=function(Y){"style"===Y?this.dirtyStyle():this.markRedraw()},b.prototype.attrKV=function(Y,Q){"style"!==Y?K.prototype.attrKV.call(this,Y,Q):this.style?this.setStyle(Q):this.useStyle(Q)},b.prototype.setStyle=function(Y,Q){return"string"==typeof Y?this.style[Y]=Q:(0,ye.extend)(this.style,Y),this.dirtyStyle(),this},b.prototype.dirtyStyle=function(Y){Y||this.markRedraw(),this.__dirty|=ve.SE,this._rect&&(this._rect=null)},b.prototype.dirty=function(){this.dirtyStyle()},b.prototype.styleChanged=function(){return!!(this.__dirty&ve.SE)},b.prototype.styleUpdated=function(){this.__dirty&=~ve.SE},b.prototype.createStyle=function(Y){return(0,ye.createObject)(Ce,Y)},b.prototype.useStyle=function(Y){Y[be]||(Y=this.createStyle(Y)),this.__inHover?this.__hoverStyle=Y:this.style=Y,this.dirtyStyle()},b.prototype.isStyleObject=function(Y){return Y[be]},b.prototype._innerSaveToNormal=function(Y){K.prototype._innerSaveToNormal.call(this,Y);var Q=this._normalState;Y.style&&!Q.style&&(Q.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(Y,Q,j)},b.prototype._applyStateObj=function(Y,Q,F,q,G,W){K.prototype._applyStateObj.call(this,Y,Q,F,q,G,W);var V,J=!(Q&&q);if(Q&&Q.style?G?q?V=Q.style:(V=this._mergeStyle(this.createStyle(),F.style),this._mergeStyle(V,Q.style)):(V=this._mergeStyle(this.createStyle(),q?this.style:F.style),this._mergeStyle(V,Q.style)):J&&(V=F.style),V)if(G){var P=this.style;if(this.style=this.createStyle(J?{}:P),J)for(var T=(0,ye.keys)(P),R=0;R<T.length;R++)(E=T[R])in V&&(V[E]=V[E],this.style[E]=P[E]);var M=(0,ye.keys)(V);for(R=0;R<M.length;R++)this.style[E=M[R]]=this.style[E];this._transitionState(Y,{style:V},W,this.getAnimationStyleProps())}else this.useStyle(V);var A=this.__inHover?X:j;for(R=0;R<A.length;R++){var E=A[R];Q&&null!=Q[E]?this[E]=Q[E]:J&&null!=F[E]&&(this[E]=F[E])}},b.prototype._mergeStates=function(Y){for(var F,Q=K.prototype._mergeStates.call(this,Y),q=0;q<Y.length;q++){var G=Y[q];G.style&&this._mergeStyle(F=F||{},G.style)}return F&&(Q.style=F),Q},b.prototype._mergeStyle=function(Y,Q){return(0,ye.extend)(Y,Q),Y},b.prototype.getAnimationStyleProps=function(){return he},b.initDefaultProps=((Y=b.prototype).type="displayable",Y.invisible=!1,Y.z=0,Y.z2=0,Y.zlevel=0,Y.culling=!1,Y.cursor="pointer",Y.rectHover=!1,Y.incremental=!1,Y._rect=null,Y.dirtyRectTolerance=0,void(Y.__dirty=ve.YV|ve.SE)),b;var Y}(Se.Z),U=new le.Z(0,0,0,0),ee=new le.Z(0,0,0,0);const ie=re},9660:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>Se});const Se=function(){function le(ye){this.colorStops=ye||[]}return le.prototype.addColorStop=function(ye,ve){this.colorStops.push({offset:ye,color:ve})},le}()},8539:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>be});var ce=z(908),Se=z(628),le=z(1386),ye=z(7021),ve=function(Ce){function he(j){var X=Ce.call(this)||this;return X.isGroup=!0,X._children=[],X.attr(j),X}return(0,ce.ZT)(he,Ce),he.prototype.childrenRef=function(){return this._children},he.prototype.children=function(){return this._children.slice()},he.prototype.childAt=function(j){return this._children[j]},he.prototype.childOfName=function(j){for(var X=this._children,re=0;re<X.length;re++)if(X[re].name===j)return X[re]},he.prototype.childCount=function(){return this._children.length},he.prototype.add=function(j){return j&&j!==this&&j.parent!==this&&(this._children.push(j),this._doAdd(j)),this},he.prototype.addBefore=function(j,X){if(j&&j!==this&&j.parent!==this&&X&&X.parent===this){var re=this._children,U=re.indexOf(X);U>=0&&(re.splice(U,0,j),this._doAdd(j))}return this},he.prototype.replace=function(j,X){var re=Se.indexOf(this._children,j);return re>=0&&this.replaceAt(X,re),this},he.prototype.replaceAt=function(j,X){var re=this._children,U=re[X];if(j&&j!==this&&j.parent!==this&&j!==U){re[X]=j,U.parent=null;var ee=this.__zr;ee&&U.removeSelfFromZr(ee),this._doAdd(j)}return this},he.prototype._doAdd=function(j){j.parent&&j.parent.remove(j),j.parent=this;var X=this.__zr;X&&X!==j.__zr&&j.addSelfToZr(X),X&&X.refresh()},he.prototype.remove=function(j){var X=this.__zr,re=this._children,U=Se.indexOf(re,j);return U<0||(re.splice(U,1),j.parent=null,X&&j.removeSelfFromZr(X),X&&X.refresh()),this},he.prototype.removeAll=function(){for(var j=this._children,X=this.__zr,re=0;re<j.length;re++){var U=j[re];X&&U.removeSelfFromZr(X),U.parent=null}return j.length=0,this},he.prototype.eachChild=function(j,X){for(var re=this._children,U=0;U<re.length;U++)j.call(X,re[U],U);return this},he.prototype.traverse=function(j,X){for(var re=0;re<this._children.length;re++){var U=this._children[re],ee=j.call(X,U);U.isGroup&&!ee&&U.traverse(j,X)}return this},he.prototype.addSelfToZr=function(j){Ce.prototype.addSelfToZr.call(this,j);for(var X=0;X<this._children.length;X++)this._children[X].addSelfToZr(j)},he.prototype.removeSelfFromZr=function(j){Ce.prototype.removeSelfFromZr.call(this,j);for(var X=0;X<this._children.length;X++)this._children[X].removeSelfFromZr(j)},he.prototype.getBoundingRect=function(j){for(var X=new ye.Z(0,0,0,0),re=j||this._children,U=[],ee=null,$=0;$<re.length;$++){var ie=re[$];if(!ie.ignore&&!ie.invisible){var K=ie.getBoundingRect(),b=ie.getLocalTransform(U);b?(ye.Z.applyTransform(X,K,b),(ee=ee||X.clone()).union(X)):(ee=ee||K.clone()).union(K)}}return ee||X},he}(le.Z);ve.prototype.type="group";const be=ve},6766:(Bt,Qe,z)=>{z.d(Qe,{ZP:()=>j});var ce=z(908),Se=z(9563),le=z(7021),ye=z(628),ve=(0,ye.defaults)({x:0,y:0},Se.tj),be={style:(0,ye.defaults)({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},Se.ik.style)},he=function(X){function re(){return null!==X&&X.apply(this,arguments)||this}return(0,ce.ZT)(re,X),re.prototype.createStyle=function(U){return(0,ye.createObject)(ve,U)},re.prototype._getSize=function(U){var ee=this.style,$=ee[U];if(null!=$)return $;var ie=function Ce(X){return!!(X&&"string"!=typeof X&&X.width&&X.height)}(ee.image)?ee.image:this.__image;if(!ie)return 0;var K="width"===U?"height":"width",b=ee[K];return null==b?ie[U]:ie[U]/ie[K]*b},re.prototype.getWidth=function(){return this._getSize("width")},re.prototype.getHeight=function(){return this._getSize("height")},re.prototype.getAnimationStyleProps=function(){return be},re.prototype.getBoundingRect=function(){var U=this.style;return this._rect||(this._rect=new le.Z(U.x||0,U.y||0,this.getWidth(),this.getHeight())),this._rect},re}(Se.ZP);he.prototype.type="image";const j=he},3520:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>be});var ce=z(908),Se=z(9563),le=z(7021),ye=[];const be=function(Ce){function he(){var j=null!==Ce&&Ce.apply(this,arguments)||this;return j.notClear=!0,j.incremental=!0,j._displayables=[],j._temporaryDisplayables=[],j._cursor=0,j}return(0,ce.ZT)(he,Ce),he.prototype.traverse=function(j,X){j.call(X,this)},he.prototype.useStyle=function(){this.style={}},he.prototype.getCursor=function(){return this._cursor},he.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},he.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},he.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},he.prototype.addDisplayable=function(j,X){X?this._temporaryDisplayables.push(j):this._displayables.push(j),this.markRedraw()},he.prototype.addDisplayables=function(j,X){X=X||!1;for(var re=0;re<j.length;re++)this.addDisplayable(j[re],X)},he.prototype.getDisplayables=function(){return this._displayables},he.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},he.prototype.eachPendingDisplayable=function(j){for(var X=this._cursor;X<this._displayables.length;X++)j&&j(this._displayables[X]);for(X=0;X<this._temporaryDisplayables.length;X++)j&&j(this._temporaryDisplayables[X])},he.prototype.update=function(){this.updateTransform();for(var j=this._cursor;j<this._displayables.length;j++)(X=this._displayables[j]).parent=this,X.update(),X.parent=null;for(j=0;j<this._temporaryDisplayables.length;j++){var X;(X=this._temporaryDisplayables[j]).parent=this,X.update(),X.parent=null}},he.prototype.getBoundingRect=function(){if(!this._rect){for(var j=new le.Z(1/0,1/0,-1/0,-1/0),X=0;X<this._displayables.length;X++){var re=this._displayables[X],U=re.getBoundingRect().clone();re.needLocalTransform()&&U.applyTransform(re.getLocalTransform(ye)),j.union(U)}this._rect=j}return this._rect},he.prototype.contain=function(j,X){var re=this.transformCoordToLocal(j,X);if(this.getBoundingRect().contain(re[0],re[1]))for(var ee=0;ee<this._displayables.length;ee++)if(this._displayables[ee].contain(j,X))return!0;return!1},he}(Se.ZP)},5910:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>ye});var ce=z(908);const ye=function(ve){function be(Ce,he,j,X,re,U){var ee=ve.call(this,re)||this;return ee.x=Ce??0,ee.y=he??0,ee.x2=j??1,ee.y2=X??0,ee.type="linear",ee.global=U||!1,ee}return(0,ce.ZT)(be,ve),be}(z(9660).Z)},126:(Bt,Qe,z)=>{z.d(Qe,{$t:()=>M,ZP:()=>ue});var ce=z(908),Se=z(9563),le=z(7349),ye=z(4443),ve=z(9969);function be(ae,oe,de,te,xe,fe,ge,we,Te,Ae,Ee){if(0===Te)return!1;var Ve=Te;return!(Ee>oe+Ve&&Ee>te+Ve&&Ee>fe+Ve&&Ee>we+Ve||Ee<oe-Ve&&Ee<te-Ve&&Ee<fe-Ve&&Ee<we-Ve||Ae>ae+Ve&&Ae>de+Ve&&Ae>xe+Ve&&Ae>ge+Ve||Ae<ae-Ve&&Ae<de-Ve&&Ae<xe-Ve&&Ae<ge-Ve)&&ve.t1(ae,oe,de,te,xe,fe,ge,we,Ae,Ee,null)<=Ve/2}var Ce=z(7014),he=z(3416),j=2*Math.PI;function X(ae,oe,de,te,xe,fe,ge,we,Te){if(0===ge)return!1;var Ae=ge;we-=ae,Te-=oe;var Ee=Math.sqrt(we*we+Te*Te);if(Ee-Ae>de||Ee+Ae<de)return!1;if(Math.abs(te-xe)%j<1e-4)return!0;if(fe){var Ve=te;te=(0,he.m)(xe),xe=(0,he.m)(Ve)}else te=(0,he.m)(te),xe=(0,he.m)(xe);te>xe&&(xe+=j);var He=Math.atan2(Te,we);return He<0&&(He+=j),He>=te&&He<=xe||He+j>=te&&He+j<=xe}var re=z(7703),U=le.Z.CMD,ee=2*Math.PI,K=[-1,-1,-1],b=[-1,-1];function Y(){var ae=b[0];b[0]=b[1],b[1]=ae}function Q(ae,oe,de,te,xe,fe,ge,we,Te,Ae){if(Ae>oe&&Ae>te&&Ae>fe&&Ae>we||Ae<oe&&Ae<te&&Ae<fe&&Ae<we)return 0;var Ee=ve.kD(oe,te,fe,we,Ae,K);if(0===Ee)return 0;for(var Ve=0,He=-1,We=void 0,$e=void 0,lt=0;lt<Ee;lt++){var St=K[lt],_t=0===St||1===St?.5:1;ve.af(ae,de,xe,ge,St)<Te||(He<0&&(He=ve.pP(oe,te,fe,we,b),b[1]<b[0]&&He>1&&Y(),We=ve.af(oe,te,fe,we,b[0]),He>1&&($e=ve.af(oe,te,fe,we,b[1]))),Ve+=2===He?St<b[0]?We<oe?_t:-_t:St<b[1]?$e<We?_t:-_t:we<$e?_t:-_t:St<b[0]?We<oe?_t:-_t:we<We?_t:-_t)}return Ve}function F(ae,oe,de,te,xe,fe,ge,we){if(we>oe&&we>te&&we>fe||we<oe&&we<te&&we<fe)return 0;var Te=ve.Jz(oe,te,fe,we,K);if(0===Te)return 0;var Ae=ve.QC(oe,te,fe);if(Ae>=0&&Ae<=1){for(var Ee=0,Ve=ve.Zm(oe,te,fe,Ae),He=0;He<Te;He++){var We=0===K[He]||1===K[He]?.5:1;ve.Zm(ae,de,xe,K[He])<ge||(Ee+=K[He]<Ae?Ve<oe?We:-We:fe<Ve?We:-We)}return Ee}return We=0===K[0]||1===K[0]?.5:1,ve.Zm(ae,de,xe,K[0])<ge?0:fe<oe?We:-We}function q(ae,oe,de,te,xe,fe,ge,we){if((we-=oe)>de||we<-de)return 0;var Te=Math.sqrt(de*de-we*we);K[0]=-Te,K[1]=Te;var Ae=Math.abs(te-xe);if(Ae<1e-4)return 0;if(Ae>=ee-1e-4){te=0,xe=ee;var Ee=fe?1:-1;return ge>=K[0]+ae&&ge<=K[1]+ae?Ee:0}if(te>xe){var Ve=te;te=xe,xe=Ve}te<0&&(te+=ee,xe+=ee);for(var He=0,We=0;We<2;We++){var $e=K[We];if($e+ae>ge){var lt=Math.atan2(we,$e);Ee=fe?1:-1,lt<0&&(lt=ee+lt),(lt>=te&&lt<=xe||lt+ee>=te&&lt+ee<=xe)&&(lt>Math.PI/2&&lt<1.5*Math.PI&&(Ee=-Ee),He+=Ee)}}return He}function G(ae,oe,de,te,xe){for(var He,We,fe=ae.data,ge=ae.len(),we=0,Te=0,Ae=0,Ee=0,Ve=0,$e=0;$e<ge;){var lt=fe[$e++],St=1===$e;switch(lt===U.M&&$e>1&&(de||(we+=(0,re.Z)(Te,Ae,Ee,Ve,te,xe))),St&&(Ee=Te=fe[$e],Ve=Ae=fe[$e+1]),lt){case U.M:Te=Ee=fe[$e++],Ae=Ve=fe[$e++];break;case U.L:if(de){if(ye.m(Te,Ae,fe[$e],fe[$e+1],oe,te,xe))return!0}else we+=(0,re.Z)(Te,Ae,fe[$e],fe[$e+1],te,xe)||0;Te=fe[$e++],Ae=fe[$e++];break;case U.C:if(de){if(be(Te,Ae,fe[$e++],fe[$e++],fe[$e++],fe[$e++],fe[$e],fe[$e+1],oe,te,xe))return!0}else we+=Q(Te,Ae,fe[$e++],fe[$e++],fe[$e++],fe[$e++],fe[$e],fe[$e+1],te,xe)||0;Te=fe[$e++],Ae=fe[$e++];break;case U.Q:if(de){if(Ce.m(Te,Ae,fe[$e++],fe[$e++],fe[$e],fe[$e+1],oe,te,xe))return!0}else we+=F(Te,Ae,fe[$e++],fe[$e++],fe[$e],fe[$e+1],te,xe)||0;Te=fe[$e++],Ae=fe[$e++];break;case U.A:var _t=fe[$e++],Ot=fe[$e++],Vt=fe[$e++],an=fe[$e++],hn=fe[$e++],Vn=fe[$e++];$e+=1;var ar=!!(1-fe[$e++]);He=Math.cos(hn)*Vt+_t,We=Math.sin(hn)*an+Ot,St?(Ee=He,Ve=We):we+=(0,re.Z)(Te,Ae,He,We,te,xe);var Yn=(te-_t)*an/Vt+_t;if(de){if(X(_t,Ot,an,hn,hn+Vn,ar,oe,Yn,xe))return!0}else we+=q(_t,Ot,an,hn,hn+Vn,ar,Yn,xe);Te=Math.cos(hn+Vn)*Vt+_t,Ae=Math.sin(hn+Vn)*an+Ot;break;case U.R:if(Ee=Te=fe[$e++],Ve=Ae=fe[$e++],He=Ee+fe[$e++],We=Ve+fe[$e++],de){if(ye.m(Ee,Ve,He,Ve,oe,te,xe)||ye.m(He,Ve,He,We,oe,te,xe)||ye.m(He,We,Ee,We,oe,te,xe)||ye.m(Ee,We,Ee,Ve,oe,te,xe))return!0}else we+=(0,re.Z)(He,Ve,He,We,te,xe),we+=(0,re.Z)(Ee,We,Ee,Ve,te,xe);break;case U.Z:if(de){if(ye.m(Te,Ae,Ee,Ve,oe,te,xe))return!0}else we+=(0,re.Z)(Te,Ae,Ee,Ve,te,xe);Te=Ee,Ae=Ve}}return!de&&!function ie(ae,oe){return Math.abs(ae-oe)<1e-4}(Ae,Ve)&&(we+=(0,re.Z)(Te,Ae,Ee,Ve,te,xe)||0),0!==we}var V=z(628),P=z(312),T=z(6704),R=z(2369),E=z(9778),M=(0,V.defaults)({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Se.tj),A={style:(0,V.defaults)({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},Se.ik.style)},O=E.dN.concat(["invisible","culling","z","z2","zlevel","parent"]);const ue=function(ae){function oe(de){return ae.call(this,de)||this}return(0,ce.ZT)(oe,ae),oe.prototype.update=function(){var de=this;ae.prototype.update.call(this);var te=this.style;if(te.decal){var xe=this._decalEl=this._decalEl||new oe;xe.buildPath===oe.prototype.buildPath&&(xe.buildPath=function(Te){de.buildPath(Te,de.shape)}),xe.silent=!0;var fe=xe.style;for(var ge in te)fe[ge]!==te[ge]&&(fe[ge]=te[ge]);fe.fill=te.fill?te.decal:null,fe.decal=null,fe.shadowColor=null,te.strokeFirst&&(fe.stroke=null);for(var we=0;we<O.length;++we)xe[O[we]]=this[O[we]];xe.__dirty|=R.YV}else this._decalEl&&(this._decalEl=null)},oe.prototype.getDecalElement=function(){return this._decalEl},oe.prototype._init=function(de){var te=(0,V.keys)(de);this.shape=this.getDefaultShape();var xe=this.getDefaultStyle();xe&&this.useStyle(xe);for(var fe=0;fe<te.length;fe++){var ge=te[fe],we=de[ge];"style"===ge?this.style?(0,V.extend)(this.style,we):this.useStyle(we):"shape"===ge?(0,V.extend)(this.shape,we):ae.prototype.attrKV.call(this,ge,we)}this.style||this.useStyle({})},oe.prototype.getDefaultStyle=function(){return null},oe.prototype.getDefaultShape=function(){return{}},oe.prototype.canBeInsideText=function(){return this.hasFill()},oe.prototype.getInsideTextFill=function(){var de=this.style.fill;if("none"!==de){if((0,V.isString)(de)){var te=(0,P.lum)(de,0);return te>.5?T.vU:te>.2?T.iv:T.GD}if(de)return T.GD}return T.vU},oe.prototype.getInsideTextStroke=function(de){var te=this.style.fill;if((0,V.isString)(te)){var xe=this.__zr;if(!(!xe||!xe.isDarkMode())==(0,P.lum)(de,0)<T.Ak)return te}},oe.prototype.buildPath=function(de,te,xe){},oe.prototype.pathUpdated=function(){this.__dirty&=~R.RH},oe.prototype.getUpdatedPathProxy=function(de){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,de),this.path},oe.prototype.createPathProxy=function(){this.path=new le.Z(!1)},oe.prototype.hasStroke=function(){var de=this.style,te=de.stroke;return!(null==te||"none"===te||!(de.lineWidth>0))},oe.prototype.hasFill=function(){var te=this.style.fill;return null!=te&&"none"!==te},oe.prototype.getBoundingRect=function(){var de=this._rect,te=this.style,xe=!de;if(xe){var fe=!1;this.path||(fe=!0,this.createPathProxy());var ge=this.path;(fe||this.__dirty&R.RH)&&(ge.beginPath(),this.buildPath(ge,this.shape,!1),this.pathUpdated()),de=ge.getBoundingRect()}if(this._rect=de,this.hasStroke()&&this.path&&this.path.len()>0){var we=this._rectStroke||(this._rectStroke=de.clone());if(this.__dirty||xe){we.copy(de);var Te=te.strokeNoScale?this.getLineScale():1,Ae=te.lineWidth;this.hasFill()||(Ae=Math.max(Ae,this.strokeContainThreshold??4)),Te>1e-10&&(we.width+=Ae/Te,we.height+=Ae/Te,we.x-=Ae/Te/2,we.y-=Ae/Te/2)}return we}return de},oe.prototype.contain=function(de,te){var xe=this.transformCoordToLocal(de,te),fe=this.getBoundingRect(),ge=this.style;if(fe.contain(de=xe[0],te=xe[1])){var we=this.path;if(this.hasStroke()){var Te=ge.lineWidth,Ae=ge.strokeNoScale?this.getLineScale():1;if(Ae>1e-10&&(this.hasFill()||(Te=Math.max(Te,this.strokeContainThreshold)),function J(ae,oe,de,te){return G(ae,oe,!0,de,te)}(we,Te/Ae,de,te)))return!0}if(this.hasFill())return function W(ae,oe,de){return G(ae,0,!1,oe,de)}(we,de,te)}return!1},oe.prototype.dirtyShape=function(){this.__dirty|=R.RH,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},oe.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},oe.prototype.animateShape=function(de){return this.animate("shape",de)},oe.prototype.updateDuringAnimation=function(de){"style"===de?this.dirtyStyle():"shape"===de?this.dirtyShape():this.markRedraw()},oe.prototype.attrKV=function(de,te){"shape"===de?this.setShape(te):ae.prototype.attrKV.call(this,de,te)},oe.prototype.setShape=function(de,te){var xe=this.shape;return xe||(xe=this.shape={}),"string"==typeof de?xe[de]=te:(0,V.extend)(xe,de),this.dirtyShape(),this},oe.prototype.shapeChanged=function(){return!!(this.__dirty&R.RH)},oe.prototype.createStyle=function(de){return(0,V.createObject)(M,de)},oe.prototype._innerSaveToNormal=function(de){ae.prototype._innerSaveToNormal.call(this,de);var te=this._normalState;de.shape&&!te.shape&&(te.shape=(0,V.extend)({},this.shape))},oe.prototype._applyStateObj=function(de,te,xe,fe,ge,we){ae.prototype._applyStateObj.call(this,de,te,xe,fe,ge,we);var Ae,Te=!(te&&fe);if(te&&te.shape?ge?fe?Ae=te.shape:(Ae=(0,V.extend)({},xe.shape),(0,V.extend)(Ae,te.shape)):(Ae=(0,V.extend)({},fe?this.shape:xe.shape),(0,V.extend)(Ae,te.shape)):Te&&(Ae=xe.shape),Ae)if(ge){this.shape=(0,V.extend)({},this.shape);for(var Ee={},Ve=(0,V.keys)(Ae),He=0;He<Ve.length;He++){var We=Ve[He];"object"==typeof Ae[We]?this.shape[We]=Ae[We]:Ee[We]=Ae[We]}this._transitionState(de,{shape:Ee},we)}else this.shape=Ae,this.dirtyShape()},oe.prototype._mergeStates=function(de){for(var xe,te=ae.prototype._mergeStates.call(this,de),fe=0;fe<de.length;fe++){var ge=de[fe];ge.shape&&this._mergeStyle(xe=xe||{},ge.shape)}return xe&&(te.shape=xe),te},oe.prototype.getAnimationStyleProps=function(){return A},oe.prototype.isZeroArea=function(){return!1},oe.extend=function(de){var te=function(fe){function ge(we){var Te=fe.call(this,we)||this;return de.init&&de.init.call(Te,we),Te}return(0,ce.ZT)(ge,fe),ge.prototype.getDefaultStyle=function(){return(0,V.clone)(de.style)},ge.prototype.getDefaultShape=function(){return(0,V.clone)(de.shape)},ge}(oe);for(var xe in de)"function"==typeof de[xe]&&(te.prototype[xe]=de[xe]);return te},oe.initDefaultProps=((de=oe.prototype).type="path",de.strokeContainThreshold=5,de.segmentIgnoreThreshold=0,de.subPixelOptimize=!1,de.autoBatch=!1,void(de.__dirty=R.YV|R.SE|R.RH)),oe;var de}(Se.ZP)},641:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>ye});var ce=z(908);const ye=function(ve){function be(Ce,he,j,X,re){var U=ve.call(this,X)||this;return U.x=Ce??.5,U.y=he??.5,U.r=j??.5,U.type="radial",U.global=re||!1,U}return(0,ce.ZT)(be,ve),be}(z(9660).Z)},491:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>j});var ce=z(908),Se=z(9563),le=z(1790),ye=z(126),ve=z(628),be=z(5730),Ce=(0,ve.defaults)({strokeFirst:!0,font:be.Uo,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},ye.$t),he=function(X){function re(){return null!==X&&X.apply(this,arguments)||this}return(0,ce.ZT)(re,X),re.prototype.hasStroke=function(){var U=this.style,ee=U.stroke;return null!=ee&&"none"!==ee&&U.lineWidth>0},re.prototype.hasFill=function(){var ee=this.style.fill;return null!=ee&&"none"!==ee},re.prototype.createStyle=function(U){return(0,ve.createObject)(Ce,U)},re.prototype.setBoundingRect=function(U){this._rect=U},re.prototype.getBoundingRect=function(){var U=this.style;if(!this._rect){var ee=U.text;null!=ee?ee+="":ee="";var $=(0,le.lP)(ee,U.font,U.textAlign,U.textBaseline);if($.x+=U.x||0,$.y+=U.y||0,this.hasStroke()){var ie=U.lineWidth;$.x-=ie/2,$.y-=ie/2,$.width+=ie,$.height+=ie}this._rect=$}return this._rect},re.initDefaultProps=void(re.prototype.dirtyRectTolerance=10),re}(Se.ZP);he.prototype.type="tspan";const j=he},8208:(Bt,Qe,z)=>{z.d(Qe,{VG:()=>Y,Y1:()=>F,ZP:()=>R});var ce=z(908),Se=z(7969),le=z(491),ye=z(628),ve=z(1790),be=z(6766),Ce=z(3160),he=z(7021),j=z(9563),X=z(5730),re={fill:"#000"},ee={style:(0,ye.defaults)({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},j.ik.style)},$=function(E){function M(A){var O=E.call(this)||this;return O.type="text",O._children=[],O._defaultStyle=re,O.attr(A),O}return(0,ce.ZT)(M,E),M.prototype.childrenRef=function(){return this._children},M.prototype.update=function(){E.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var A=0;A<this._children.length;A++){var O=this._children[A];O.zlevel=this.zlevel,O.z=this.z,O.z2=this.z2,O.culling=this.culling,O.cursor=this.cursor,O.invisible=this.invisible}},M.prototype.updateTransform=function(){var A=this.innerTransformable;A?(A.updateTransform(),A.transform&&(this.transform=A.transform)):E.prototype.updateTransform.call(this)},M.prototype.getLocalTransform=function(A){var O=this.innerTransformable;return O?O.getLocalTransform(A):E.prototype.getLocalTransform.call(this,A)},M.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),E.prototype.getComputedTransform.call(this)},M.prototype._updateSubTexts=function(){this._childCursor=0,function q(E){G(E),(0,ye.each)(E.rich,G)}(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},M.prototype.addSelfToZr=function(A){E.prototype.addSelfToZr.call(this,A);for(var O=0;O<this._children.length;O++)this._children[O].__zr=A},M.prototype.removeSelfFromZr=function(A){E.prototype.removeSelfFromZr.call(this,A);for(var O=0;O<this._children.length;O++)this._children[O].__zr=null},M.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var A=new he.Z(0,0,0,0),O=this._children,B=[],ue=null,ae=0;ae<O.length;ae++){var oe=O[ae],de=oe.getBoundingRect(),te=oe.getLocalTransform(B);te?(A.copy(de),A.applyTransform(te),(ue=ue||A.clone()).union(A)):(ue=ue||de.clone()).union(de)}this._rect=ue||A}return this._rect},M.prototype.setDefaultTextStyle=function(A){this._defaultStyle=A||re},M.prototype.setTextContent=function(A){},M.prototype._mergeStyle=function(A,O){if(!O)return A;var B=O.rich,ue=A.rich||B&&{};return(0,ye.extend)(A,O),B&&ue?(this._mergeRich(ue,B),A.rich=ue):ue&&(A.rich=ue),A},M.prototype._mergeRich=function(A,O){for(var B=(0,ye.keys)(O),ue=0;ue<B.length;ue++){var ae=B[ue];A[ae]=A[ae]||{},(0,ye.extend)(A[ae],O[ae])}},M.prototype.getAnimationStyleProps=function(){return ee},M.prototype._getOrCreateChild=function(A){var O=this._children[this._childCursor];return(!O||!(O instanceof A))&&(O=new A),this._children[this._childCursor++]=O,O.__zr=this.__zr,O.parent=this,O},M.prototype._updatePlainTexts=function(){var A=this.style,O=A.font||X.Uo,B=A.padding,ue=P(A),ae=(0,Se.NY)(ue,A),oe=T(A),de=!!A.backgroundColor,te=ae.outerHeight,xe=ae.outerWidth,fe=ae.contentWidth,ge=ae.lines,we=ae.lineHeight,Te=this._defaultStyle,Ae=A.x||0,Ee=A.y||0,Ve=A.align||Te.align||"left",He=A.verticalAlign||Te.verticalAlign||"top",We=Ae,$e=(0,ve.mU)(Ee,ae.contentHeight,He);if(oe||B){var lt=(0,ve.M3)(Ae,xe,Ve),St=(0,ve.mU)(Ee,te,He);oe&&this._renderBackground(A,A,lt,St,xe,te)}$e+=we/2,B&&(We=V(Ae,Ve,B),"top"===He?$e+=B[0]:"bottom"===He&&($e-=B[2]));for(var _t=0,Ot=!1,Vt=(J("fill"in A?A.fill:(Ot=!0,Te.fill))),an=(W("stroke"in A?A.stroke:de||Te.autoStroke&&!Ot?null:(_t=2,Te.stroke))),hn=A.textShadowBlur>0,Vn=null!=A.width&&("truncate"===A.overflow||"break"===A.overflow||"breakAll"===A.overflow),ar=ae.calculatedLineHeight,Yn=0;Yn<ge.length;Yn++){var vr=this._getOrCreateChild(le.Z),Qn=vr.createStyle();vr.useStyle(Qn),Qn.text=ge[Yn],Qn.x=We,Qn.y=$e,Ve&&(Qn.textAlign=Ve),Qn.textBaseline="middle",Qn.opacity=A.opacity,Qn.strokeFirst=!0,hn&&(Qn.shadowBlur=A.textShadowBlur||0,Qn.shadowColor=A.textShadowColor||"transparent",Qn.shadowOffsetX=A.textShadowOffsetX||0,Qn.shadowOffsetY=A.textShadowOffsetY||0),Qn.stroke=an,Qn.fill=Vt,an&&(Qn.lineWidth=A.lineWidth||_t,Qn.lineDash=A.lineDash,Qn.lineDashOffset=A.lineDashOffset||0),Qn.font=O,Q(Qn,A),$e+=we,Vn&&vr.setBoundingRect(new he.Z((0,ve.M3)(Qn.x,A.width,Qn.textAlign),(0,ve.mU)(Qn.y,ar,Qn.textBaseline),fe,ar))}},M.prototype._updateRichTexts=function(){var A=this.style,O=P(A),B=(0,Se.$F)(O,A),ue=B.width,ae=B.outerWidth,oe=B.outerHeight,de=A.padding,xe=A.y||0,fe=this._defaultStyle,we=A.verticalAlign||fe.verticalAlign,Te=(0,ve.M3)(A.x||0,ae,A.align||fe.align),Ae=(0,ve.mU)(xe,oe,we),Ee=Te,Ve=Ae;de&&(Ee+=de[3],Ve+=de[0]);var He=Ee+ue;T(A)&&this._renderBackground(A,A,Te,Ae,ae,oe);for(var We=!!A.backgroundColor,$e=0;$e<B.lines.length;$e++){for(var lt=B.lines[$e],St=lt.tokens,_t=St.length,Ot=lt.lineHeight,Vt=lt.width,an=0,hn=Ee,Vn=He,ar=_t-1,Yn=void 0;an<_t&&(!(Yn=St[an]).align||"left"===Yn.align);)this._placeToken(Yn,A,Ot,Ve,hn,"left",We),Vt-=Yn.width,hn+=Yn.width,an++;for(;ar>=0&&"right"===(Yn=St[ar]).align;)this._placeToken(Yn,A,Ot,Ve,Vn,"right",We),Vt-=Yn.width,Vn-=Yn.width,ar--;for(hn+=(ue-(hn-Ee)-(He-Vn)-Vt)/2;an<=ar;)this._placeToken(Yn=St[an],A,Ot,Ve,hn+Yn.width/2,"center",We),hn+=Yn.width,an++;Ve+=Ot}},M.prototype._placeToken=function(A,O,B,ue,ae,oe,de){var te=O.rich[A.styleName]||{};te.text=A.text;var xe=A.verticalAlign,fe=ue+B/2;"top"===xe?fe=ue+A.height/2:"bottom"===xe&&(fe=ue+B-A.height/2),!A.isLineHolder&&T(te)&&this._renderBackground(te,O,"right"===oe?ae-A.width:"center"===oe?ae-A.width/2:ae,fe-A.height/2,A.width,A.height);var we=!!te.backgroundColor,Te=A.textPadding;Te&&(ae=V(ae,oe,Te),fe-=A.height/2-Te[0]-A.innerHeight/2);var Ae=this._getOrCreateChild(le.Z),Ee=Ae.createStyle();Ae.useStyle(Ee);var Ve=this._defaultStyle,He=!1,We=0,$e=J("fill"in te?te.fill:"fill"in O?O.fill:(He=!0,Ve.fill)),lt=W("stroke"in te?te.stroke:"stroke"in O?O.stroke:we||de||Ve.autoStroke&&!He?null:(We=2,Ve.stroke)),St=te.textShadowBlur>0||O.textShadowBlur>0;Ee.text=A.text,Ee.x=ae,Ee.y=fe,St&&(Ee.shadowBlur=te.textShadowBlur||O.textShadowBlur||0,Ee.shadowColor=te.textShadowColor||O.textShadowColor||"transparent",Ee.shadowOffsetX=te.textShadowOffsetX||O.textShadowOffsetX||0,Ee.shadowOffsetY=te.textShadowOffsetY||O.textShadowOffsetY||0),Ee.textAlign=oe,Ee.textBaseline="middle",Ee.font=A.font||X.Uo,Ee.opacity=(0,ye.retrieve3)(te.opacity,O.opacity,1),Q(Ee,te),lt&&(Ee.lineWidth=(0,ye.retrieve3)(te.lineWidth,O.lineWidth,We),Ee.lineDash=(0,ye.retrieve2)(te.lineDash,O.lineDash),Ee.lineDashOffset=O.lineDashOffset||0,Ee.stroke=lt),$e&&(Ee.fill=$e);var _t=A.contentWidth,Ot=A.contentHeight;Ae.setBoundingRect(new he.Z((0,ve.M3)(Ee.x,_t,Ee.textAlign),(0,ve.mU)(Ee.y,Ot,Ee.textBaseline),_t,Ot))},M.prototype._renderBackground=function(A,O,B,ue,ae,oe){var Ae,Ee,He,de=A.backgroundColor,te=A.borderWidth,xe=A.borderColor,fe=de&&de.image,ge=de&&!fe,we=A.borderRadius,Te=this;if(ge||A.lineHeight||te&&xe){(Ae=this._getOrCreateChild(Ce.Z)).useStyle(Ae.createStyle()),Ae.style.fill=null;var Ve=Ae.shape;Ve.x=B,Ve.y=ue,Ve.width=ae,Ve.height=oe,Ve.r=we,Ae.dirtyShape()}if(ge)(He=Ae.style).fill=de||null,He.fillOpacity=(0,ye.retrieve2)(A.fillOpacity,1);else if(fe){(Ee=this._getOrCreateChild(be.ZP)).onload=function(){Te.dirtyStyle()};var We=Ee.style;We.image=de.image,We.x=B,We.y=ue,We.width=ae,We.height=oe}te&&xe&&((He=Ae.style).lineWidth=te,He.stroke=xe,He.strokeOpacity=(0,ye.retrieve2)(A.strokeOpacity,1),He.lineDash=A.borderDash,He.lineDashOffset=A.borderDashOffset||0,Ae.strokeContainThreshold=0,Ae.hasFill()&&Ae.hasStroke()&&(He.strokeFirst=!0,He.lineWidth*=2));var $e=(Ae||Ee).style;$e.shadowBlur=A.shadowBlur||0,$e.shadowColor=A.shadowColor||"transparent",$e.shadowOffsetX=A.shadowOffsetX||0,$e.shadowOffsetY=A.shadowOffsetY||0,$e.opacity=(0,ye.retrieve3)(A.opacity,O.opacity,1)},M.makeFont=function(A){var O="";return F(A)&&(O=[A.fontStyle,A.fontWeight,Y(A.fontSize),A.fontFamily||"sans-serif"].join(" ")),O&&(0,ye.trim)(O)||A.textFont||A.font},M}(j.ZP),ie={left:!0,right:1,center:1},K={top:1,bottom:1,middle:1},b=["fontStyle","fontWeight","fontSize","fontFamily"];function Y(E){return"string"!=typeof E||-1===E.indexOf("px")&&-1===E.indexOf("rem")&&-1===E.indexOf("em")?isNaN(+E)?X.n5+"px":E+"px":E}function Q(E,M){for(var A=0;A<b.length;A++){var O=b[A],B=M[O];null!=B&&(E[O]=B)}}function F(E){return null!=E.fontSize||E.fontFamily||E.fontWeight}function G(E){if(E){E.font=$.makeFont(E);var M=E.align;"middle"===M&&(M="center"),E.align=null==M||ie[M]?M:"left";var A=E.verticalAlign;"center"===A&&(A="middle"),E.verticalAlign=null==A||K[A]?A:"top",E.padding&&(E.padding=(0,ye.normalizeCssArray)(E.padding))}}function W(E,M){return null==E||M<=0||"transparent"===E||"none"===E?null:E.image||E.colorStops?"#000":E}function J(E){return null==E||"none"===E?null:E.image||E.colorStops?"#000":E}function V(E,M,A){return"right"===M?E-A[1]:"center"===M?E+A[3]/2-A[1]/2:E+A[3]}function P(E){var M=E.text;return null!=M&&(M+=""),M}function T(E){return!!(E.backgroundColor||E.lineHeight||E.borderWidth&&E.borderColor)}const R=$},2369:(Bt,Qe,z)=>{z.d(Qe,{RH:()=>le,SE:()=>Se,YV:()=>ce});var ce=1,Se=2,le=4},6790:(Bt,Qe,z)=>{z.d(Qe,{Gq:()=>ve,ko:()=>ye,v5:()=>Ce});var ce=z(7148),Se=z(5730),le=new ce.ZP(50);function ye(he){if("string"==typeof he){var j=le.get(he);return j&&j.image}return he}function ve(he,j,X,re,U){if(he){if("string"==typeof he){if(j&&j.__zrImageSrc===he||!X)return j;var ee=le.get(he),$={hostEl:X,cb:re,cbPayload:U};return ee?!Ce(j=ee.image)&&ee.pending.push($):((j=Se.qW.loadImage(he,be,be)).__zrImageSrc=he,le.put(he,j.__cachedImgObj={image:j,pending:[$]})),j}return he}return j}function be(){var he=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var j=0;j<he.pending.length;j++){var X=he.pending[j],re=X.cb;re&&re(this,X.cbPayload),X.hostEl.dirty()}he.pending.length=0}function Ce(he){return he&&he.width&&he.height}},7969:(Bt,Qe,z)=>{z.d(Qe,{$F:()=>ee,NY:()=>j,aF:()=>ve});var ce=z(6790),Se=z(628),le=z(1790),ye=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function ve(Q,F,q,G,W){if(!F)return"";var J=(Q+"").split("\n");W=be(F,q,G,W);for(var V=0,P=J.length;V<P;V++)J[V]=Ce(J[V],W);return J.join("\n")}function be(Q,F,q,G){var W=(0,Se.extend)({},G=G||{});W.font=F,q=(0,Se.retrieve2)(q,"..."),W.maxIterations=(0,Se.retrieve2)(G.maxIterations,2);var J=W.minChar=(0,Se.retrieve2)(G.minChar,0);W.cnCharWidth=(0,le.dz)("\u56fd",F);var V=W.ascCharWidth=(0,le.dz)("a",F);W.placeholder=(0,Se.retrieve2)(G.placeholder,"");for(var P=Q=Math.max(0,Q-1),T=0;T<J&&P>=V;T++)P-=V;var R=(0,le.dz)(q,F);return R>P&&(q="",R=0),P=Q-R,W.ellipsis=q,W.ellipsisWidth=R,W.contentWidth=P,W.containerWidth=Q,W}function Ce(Q,F){var q=F.containerWidth,G=F.font,W=F.contentWidth;if(!q)return"";var J=(0,le.dz)(Q,G);if(J<=q)return Q;for(var V=0;;V++){if(J<=W||V>=F.maxIterations){Q+=F.ellipsis;break}var P=0===V?he(Q,W,F.ascCharWidth,F.cnCharWidth):J>0?Math.floor(Q.length*W/J):0;Q=Q.substr(0,P),J=(0,le.dz)(Q,G)}return""===Q&&(Q=F.placeholder),Q}function he(Q,F,q,G){for(var W=0,J=0,V=Q.length;J<V&&W<F;J++){var P=Q.charCodeAt(J);W+=0<=P&&P<=127?q:G}return J}function j(Q,F){null!=Q&&(Q+="");var M,q=F.overflow,G=F.padding,W=F.font,J="truncate"===q,V=(0,le.Dp)(W),P=(0,Se.retrieve2)(F.lineHeight,V),T=!!F.backgroundColor,R="truncate"===F.lineOverflow,E=F.width,A=(M=null==E||"break"!==q&&"breakAll"!==q?Q?Q.split("\n"):[]:Q?Y(Q,F.font,E,"breakAll"===q,0).lines:[]).length*P,O=(0,Se.retrieve2)(F.height,A);if(A>O&&R){var B=Math.floor(O/P);M=M.slice(0,B)}if(Q&&J&&null!=E)for(var ue=be(E,W,F.ellipsis,{minChar:F.truncateMinChar,placeholder:F.placeholder}),ae=0;ae<M.length;ae++)M[ae]=Ce(M[ae],ue);var oe=O,de=0;for(ae=0;ae<M.length;ae++)de=Math.max((0,le.dz)(M[ae],W),de);null==E&&(E=de);var te=de;return G&&(oe+=G[0]+G[2],te+=G[1]+G[3],E+=G[1]+G[3]),T&&(te=E),{lines:M,height:O,outerWidth:te,outerHeight:oe,lineHeight:P,calculatedLineHeight:V,contentWidth:de,contentHeight:A,width:E}}var X=function Q(){},re=function Q(F){this.tokens=[],F&&(this.tokens=F)},U=function Q(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]};function ee(Q,F){var q=new U;if(null!=Q&&(Q+=""),!Q)return q;for(var T,G=F.width,W=F.height,J=F.overflow,V="break"!==J&&"breakAll"!==J||null==G?null:{width:G,accumWidth:0,breakAll:"breakAll"===J},P=ye.lastIndex=0;null!=(T=ye.exec(Q));){var R=T.index;R>P&&$(q,Q.substring(P,R),F,V),$(q,T[2],F,V,T[1]),P=ye.lastIndex}P<Q.length&&$(q,Q.substring(P,Q.length),F,V);var E=[],M=0,A=0,O=F.padding,B="truncate"===J,ue="truncate"===F.lineOverflow;function ae(Ot,Vt,an){Ot.width=Vt,Ot.lineHeight=an,M+=an,A=Math.max(A,Vt)}e:for(var oe=0;oe<q.lines.length;oe++){for(var de=q.lines[oe],te=0,xe=0,fe=0;fe<de.tokens.length;fe++){var we=(ge=de.tokens[fe]).styleName&&F.rich[ge.styleName]||{},Te=ge.textPadding=we.padding,Ae=Te?Te[1]+Te[3]:0,Ee=ge.font=we.font||F.font;ge.contentHeight=(0,le.Dp)(Ee);var Ve=(0,Se.retrieve2)(we.height,ge.contentHeight);if(ge.innerHeight=Ve,Te&&(Ve+=Te[0]+Te[2]),ge.height=Ve,ge.lineHeight=(0,Se.retrieve3)(we.lineHeight,F.lineHeight,Ve),ge.align=we&&we.align||F.align,ge.verticalAlign=we&&we.verticalAlign||"middle",ue&&null!=W&&M+ge.lineHeight>W){fe>0?(de.tokens=de.tokens.slice(0,fe),ae(de,xe,te),q.lines=q.lines.slice(0,oe+1)):q.lines=q.lines.slice(0,oe);break e}var He=we.width,We=null==He||"auto"===He;if("string"==typeof He&&"%"===He.charAt(He.length-1))ge.percentWidth=He,E.push(ge),ge.contentWidth=(0,le.dz)(ge.text,Ee);else{if(We){var $e=we.backgroundColor,lt=$e&&$e.image;lt&&(lt=ce.ko(lt),ce.v5(lt)&&(ge.width=Math.max(ge.width,lt.width*Ve/lt.height)))}var St=B&&null!=G?G-xe:null;null!=St&&St<ge.width?!We||St<Ae?(ge.text="",ge.width=ge.contentWidth=0):(ge.text=ve(ge.text,St-Ae,Ee,F.ellipsis,{minChar:F.truncateMinChar}),ge.width=ge.contentWidth=(0,le.dz)(ge.text,Ee)):ge.contentWidth=(0,le.dz)(ge.text,Ee)}ge.width+=Ae,xe+=ge.width,we&&(te=Math.max(te,ge.lineHeight))}ae(de,xe,te)}for(q.outerWidth=q.width=(0,Se.retrieve2)(G,A),q.outerHeight=q.height=(0,Se.retrieve2)(W,M),q.contentHeight=M,q.contentWidth=A,O&&(q.outerWidth+=O[1]+O[3],q.outerHeight+=O[0]+O[2]),oe=0;oe<E.length;oe++){var ge;(ge=E[oe]).width=parseInt(ge.percentWidth,10)/100*q.width}return q}function $(Q,F,q,G,W){var E,M,J=""===F,V=W&&q.rich[W]||{},P=Q.lines,T=V.font||q.font,R=!1;if(G){var A=V.padding,O=A?A[1]+A[3]:0;if(null!=V.width&&"auto"!==V.width){var B=(0,le.GM)(V.width,G.width)+O;P.length>0&&B+G.accumWidth>G.width&&(E=F.split("\n"),R=!0),G.accumWidth=B}else{var ue=Y(F,T,G.width,G.breakAll,G.accumWidth);G.accumWidth=ue.accumWidth+O,M=ue.linesWidths,E=ue.lines}}else E=F.split("\n");for(var ae=0;ae<E.length;ae++){var oe=E[ae],de=new X;if(de.styleName=W,de.text=oe,de.isLineHolder=!oe&&!J,de.width="number"==typeof V.width?V.width:M?M[ae]:(0,le.dz)(oe,T),ae||R)P.push(new re([de]));else{var te=(P[P.length-1]||(P[0]=new re)).tokens,xe=te.length;1===xe&&te[0].isLineHolder?te[0]=de:(oe||!xe||J)&&te.push(de)}}}var K=(0,Se.reduce)(",&?/;] ".split(""),function(Q,F){return Q[F]=!0,Q},{});function b(Q){return!function ie(Q){var F=Q.charCodeAt(0);return F>=33&&F<=383}(Q)||!!K[Q]}function Y(Q,F,q,G,W){for(var J=[],V=[],P="",T="",R=0,E=0,M=0;M<Q.length;M++){var A=Q.charAt(M);if("\n"!==A){var O=(0,le.dz)(A,F),B=!G&&!b(A);(J.length?E+O>q:W+E+O>q)?E?(P||T)&&(B?(P||(P=T,T="",E=R=0),J.push(P),V.push(E-R),T+=A,P="",E=R+=O):(T&&(P+=T,T="",R=0),J.push(P),V.push(E),P=A,E=O)):B?(J.push(T),V.push(R),T=A,R=O):(J.push(A),V.push(O)):(E+=O,B?(T+=A,R+=O):(T&&(P+=T,T="",R=0),P+=A))}else T&&(P+=T,E+=R),J.push(P),V.push(E),P="",T="",R=0,E=0}return!J.length&&!P&&(P=Q,T="",R=0),T&&(P+=T),P&&(J.push(P),V.push(E)),1===J.length&&(E+=W),{accumWidth:E,lines:J,linesWidths:V}}},7146:(Bt,Qe,z)=>{z.d(Qe,{L:()=>le});var ce=z(8221);function le(ye,ve,be){var Ce=ve.smooth,he=ve.points;if(he&&he.length>=2){if(Ce){var j=function Se(ye,ve,be,Ce){var U,ee,$,ie,he=[],j=[],X=[],re=[];if(Ce){$=[1/0,1/0],ie=[-1/0,-1/0];for(var K=0,b=ye.length;K<b;K++)(0,ce.min)($,$,ye[K]),(0,ce.max)(ie,ie,ye[K]);(0,ce.min)($,$,Ce[0]),(0,ce.max)(ie,ie,Ce[1])}for(K=0,b=ye.length;K<b;K++){var Y=ye[K];if(be)U=ye[K?K-1:b-1],ee=ye[(K+1)%b];else{if(0===K||K===b-1){he.push((0,ce.clone)(ye[K]));continue}U=ye[K-1],ee=ye[K+1]}(0,ce.sub)(j,ee,U),(0,ce.scale)(j,j,ve);var Q=(0,ce.distance)(Y,U),F=(0,ce.distance)(Y,ee),q=Q+F;0!==q&&(Q/=q,F/=q),(0,ce.scale)(X,j,-Q),(0,ce.scale)(re,j,F);var G=(0,ce.add)([],Y,X),W=(0,ce.add)([],Y,re);Ce&&((0,ce.max)(G,G,$),(0,ce.min)(G,G,ie),(0,ce.max)(W,W,$),(0,ce.min)(W,W,ie)),he.push(G),he.push(W)}return be&&he.push(he.shift()),he}(he,Ce,be,ve.smoothConstraint);ye.moveTo(he[0][0],he[0][1]);for(var X=he.length,re=0;re<(be?X:X-1);re++){var U=j[2*re],ee=j[2*re+1],$=he[(re+1)%X];ye.bezierCurveTo(U[0],U[1],ee[0],ee[1],$[0],$[1])}}else{ye.moveTo(he[0][0],he[0][1]),re=1;for(var ie=he.length;re<ie;re++)ye.lineTo(he[re][0],he[re][1])}be&&ye.closePath()}}},5333:(Bt,Qe,z)=>{z.d(Qe,{Pw:()=>le,_3:()=>Se,vu:()=>ye});var ce=Math.round;function Se(ve,be,Ce){if(be){var he=be.x1,j=be.x2,X=be.y1,re=be.y2;ve.x1=he,ve.x2=j,ve.y1=X,ve.y2=re;var U=Ce&&Ce.lineWidth;return U&&(ce(2*he)===ce(2*j)&&(ve.x1=ve.x2=ye(he,U,!0)),ce(2*X)===ce(2*re)&&(ve.y1=ve.y2=ye(X,U,!0))),ve}}function le(ve,be,Ce){if(be){var he=be.x,j=be.y,X=be.width,re=be.height;ve.x=he,ve.y=j,ve.width=X,ve.height=re;var U=Ce&&Ce.lineWidth;return U&&(ve.x=ye(he,U,!0),ve.y=ye(j,U,!0),ve.width=Math.max(ye(he+X,U,!1)-ve.x,0===X?0:1),ve.height=Math.max(ye(j+re,U,!1)-ve.y,0===re?0:1)),ve}}function ye(ve,be,Ce){if(!be)return ve;var he=ce(2*ve);return(he+ce(be))%2==0?he/2:(he+(Ce?1:-1))/2}},8234:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>ve});var ce=z(908),Se=z(126),le=function be(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},ye=function(be){function Ce(he){return be.call(this,he)||this}return(0,ce.ZT)(Ce,be),Ce.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},Ce.prototype.getDefaultShape=function(){return new le},Ce.prototype.buildPath=function(he,j){var X=j.cx,re=j.cy,U=Math.max(j.r,0),ee=j.startAngle,$=j.endAngle,ie=j.clockwise,K=Math.cos(ee),b=Math.sin(ee);he.moveTo(K*U+X,b*U+re),he.arc(X,re,U,ee,$,!ie)},Ce}(Se.ZP);ye.prototype.type="arc";const ve=ye},6146:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>j});var ce=z(908),Se=z(126),le=z(8221),ye=z(9969),ve=[],be=function X(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1};function Ce(X,re,U){return null!=X.cpx2||null!=X.cpy2?[(U?ye.X_:ye.af)(X.x1,X.cpx1,X.cpx2,X.x2,re),(U?ye.X_:ye.af)(X.y1,X.cpy1,X.cpy2,X.y2,re)]:[(U?ye.AZ:ye.Zm)(X.x1,X.cpx1,X.x2,re),(U?ye.AZ:ye.Zm)(X.y1,X.cpy1,X.y2,re)]}var he=function(X){function re(U){return X.call(this,U)||this}return(0,ce.ZT)(re,X),re.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},re.prototype.getDefaultShape=function(){return new be},re.prototype.buildPath=function(U,ee){var $=ee.x1,ie=ee.y1,K=ee.x2,b=ee.y2,Y=ee.cpx1,Q=ee.cpy1,F=ee.cpx2,q=ee.cpy2,G=ee.percent;0!==G&&(U.moveTo($,ie),null==F||null==q?(G<1&&((0,ye.Lx)($,Y,K,G,ve),Y=ve[1],K=ve[2],(0,ye.Lx)(ie,Q,b,G,ve),Q=ve[1],b=ve[2]),U.quadraticCurveTo(Y,Q,K,b)):(G<1&&((0,ye.Vz)($,Y,F,K,G,ve),Y=ve[1],F=ve[2],K=ve[3],(0,ye.Vz)(ie,Q,q,b,G,ve),Q=ve[1],q=ve[2],b=ve[3]),U.bezierCurveTo(Y,Q,F,q,K,b)))},re.prototype.pointAt=function(U){return Ce(this.shape,U,!1)},re.prototype.tangentAt=function(U){var ee=Ce(this.shape,U,!0);return le.normalize(ee,ee)},re}(Se.ZP);he.prototype.type="bezier-curve";const j=he},9359:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>ve});var ce=z(908),Se=z(126),le=function be(){this.cx=0,this.cy=0,this.r=0},ye=function(be){function Ce(he){return be.call(this,he)||this}return(0,ce.ZT)(Ce,be),Ce.prototype.getDefaultShape=function(){return new le},Ce.prototype.buildPath=function(he,j){he.moveTo(j.cx+j.r,j.cy),he.arc(j.cx,j.cy,j.r,0,2*Math.PI)},Ce}(Se.ZP);ye.prototype.type="circle";const ve=ye},6743:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>ve});var ce=z(908),Se=z(126),le=function be(){this.cx=0,this.cy=0,this.rx=0,this.ry=0},ye=function(be){function Ce(he){return be.call(this,he)||this}return(0,ce.ZT)(Ce,be),Ce.prototype.getDefaultShape=function(){return new le},Ce.prototype.buildPath=function(he,j){var X=.5522848,re=j.cx,U=j.cy,ee=j.rx,$=j.ry,ie=ee*X,K=$*X;he.moveTo(re-ee,U),he.bezierCurveTo(re-ee,U-K,re-ie,U-$,re,U-$),he.bezierCurveTo(re+ie,U-$,re+ee,U-K,re+ee,U),he.bezierCurveTo(re+ee,U+K,re+ie,U+$,re,U+$),he.bezierCurveTo(re-ie,U+$,re-ee,U+K,re-ee,U),he.closePath()},Ce}(Se.ZP);ye.prototype.type="ellipse";const ve=ye},4110:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>Ce});var ce=z(908),Se=z(126),le=z(5333),ye={},ve=function he(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1},be=function(he){function j(X){return he.call(this,X)||this}return(0,ce.ZT)(j,he),j.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},j.prototype.getDefaultShape=function(){return new ve},j.prototype.buildPath=function(X,re){var U,ee,$,ie;if(this.subPixelOptimize){var K=(0,le._3)(ye,re,this.style);U=K.x1,ee=K.y1,$=K.x2,ie=K.y2}else U=re.x1,ee=re.y1,$=re.x2,ie=re.y2;var b=re.percent;0!==b&&(X.moveTo(U,ee),b<1&&($=U*(1-b)+$*b,ie=ee*(1-b)+ie*b),X.lineTo($,ie))},j.prototype.pointAt=function(X){var re=this.shape;return[re.x1*(1-X)+re.x2*X,re.y1*(1-X)+re.y2*X]},j}(Se.ZP);be.prototype.type="line";const Ce=be},3186:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>be});var ce=z(908),Se=z(126),le=z(7146),ye=function Ce(){this.points=null,this.smooth=0,this.smoothConstraint=null},ve=function(Ce){function he(j){return Ce.call(this,j)||this}return(0,ce.ZT)(he,Ce),he.prototype.getDefaultShape=function(){return new ye},he.prototype.buildPath=function(j,X){le.L(j,X,!0)},he}(Se.ZP);ve.prototype.type="polygon";const be=ve},7834:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>be});var ce=z(908),Se=z(126),le=z(7146),ye=function Ce(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null},ve=function(Ce){function he(j){return Ce.call(this,j)||this}return(0,ce.ZT)(he,Ce),he.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},he.prototype.getDefaultShape=function(){return new ye},he.prototype.buildPath=function(j,X){le.L(j,X,!1)},he}(Se.ZP);ve.prototype.type="polyline";const be=ve},3160:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>he});var ce=z(908),Se=z(126),ye=z(5333),ve=function j(){this.x=0,this.y=0,this.width=0,this.height=0},be={},Ce=function(j){function X(re){return j.call(this,re)||this}return(0,ce.ZT)(X,j),X.prototype.getDefaultShape=function(){return new ve},X.prototype.buildPath=function(re,U){var ee,$,ie,K;if(this.subPixelOptimize){var b=(0,ye.Pw)(be,U,this.style);ee=b.x,$=b.y,ie=b.width,K=b.height,b.r=U.r,U=b}else ee=U.x,$=U.y,ie=U.width,K=U.height;U.r?function le(j,X){var K,b,Y,Q,F,re=X.x,U=X.y,ee=X.width,$=X.height,ie=X.r;ee<0&&(re+=ee,ee=-ee),$<0&&(U+=$,$=-$),"number"==typeof ie?K=b=Y=Q=ie:ie instanceof Array?1===ie.length?K=b=Y=Q=ie[0]:2===ie.length?(K=Y=ie[0],b=Q=ie[1]):3===ie.length?(K=ie[0],b=Q=ie[1],Y=ie[2]):(K=ie[0],b=ie[1],Y=ie[2],Q=ie[3]):K=b=Y=Q=0,K+b>ee&&(K*=ee/(F=K+b),b*=ee/F),Y+Q>ee&&(Y*=ee/(F=Y+Q),Q*=ee/F),b+Y>$&&(b*=$/(F=b+Y),Y*=$/F),K+Q>$&&(K*=$/(F=K+Q),Q*=$/F),j.moveTo(re+K,U),j.lineTo(re+ee-b,U),0!==b&&j.arc(re+ee-b,U+b,b,-Math.PI/2,0),j.lineTo(re+ee,U+$-Y),0!==Y&&j.arc(re+ee-Y,U+$-Y,Y,0,Math.PI/2),j.lineTo(re+Q,U+$),0!==Q&&j.arc(re+Q,U+$-Q,Q,Math.PI/2,Math.PI),j.lineTo(re,U+K),0!==K&&j.arc(re+K,U+K,K,Math.PI,1.5*Math.PI)}(re,U):re.rect(ee,$,ie,K)},X.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},X}(Se.ZP);Ce.prototype.type="rect";const he=Ce},495:(Bt,Qe,z)=>{z.d(Qe,{Z:()=>ve});var ce=z(908),Se=z(126),le=function be(){this.cx=0,this.cy=0,this.r=0,this.r0=0},ye=function(be){function Ce(he){return be.call(this,he)||this}return(0,ce.ZT)(Ce,be),Ce.prototype.getDefaultShape=function(){return new le},Ce.prototype.buildPath=function(he,j){var X=j.cx,re=j.cy,U=2*Math.PI;he.moveTo(X+j.r,re),he.arc(X,re,j.r,0,U,!1),he.moveTo(X+j.r0,re),he.arc(X,re,j.r0,0,U,!0)},Ce}(Se.ZP);ye.prototype.type="ring";const ve=ye},9770:(Bt,Qe,z)=>{z.d(Qe,{C:()=>q});var ce=z(908),Se=z(126),le=z(628),ye=Math.PI,ve=2*ye,be=Math.sin,Ce=Math.cos,he=Math.acos,j=Math.atan2,X=Math.abs,re=Math.sqrt,U=Math.max,ee=Math.min,$=1e-4;function K(G,W,J,V,P,T,R){var E=G-J,M=W-V,A=(R?T:-T)/re(E*E+M*M),O=A*M,B=-A*E,ue=G+O,ae=W+B,oe=J+O,de=V+B,te=(ue+oe)/2,xe=(ae+de)/2,fe=oe-ue,ge=de-ae,we=fe*fe+ge*ge,Te=P-T,Ae=ue*de-oe*ae,Ee=(ge<0?-1:1)*re(U(0,Te*Te*we-Ae*Ae)),Ve=(Ae*ge-fe*Ee)/we,He=(-Ae*fe-ge*Ee)/we,We=(Ae*ge+fe*Ee)/we,$e=(-Ae*fe+ge*Ee)/we,lt=Ve-te,St=He-xe,_t=We-te,Ot=$e-xe;return lt*lt+St*St>_t*_t+Ot*Ot&&(Ve=We,He=$e),{cx:Ve,cy:He,x0:-O,y0:-B,x1:Ve*(P/Te-1),y1:He*(P/Te-1)}}var Q=function G(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.cornerRadius=0},F=function(G){function W(J){return G.call(this,J)||this}return(0,ce.ZT)(W,G),W.prototype.getDefaultShape=function(){return new Q},W.prototype.buildPath=function(J,V){!function Y(G,W){var J,V=U(W.r,0),P=U(W.r0||0,0),T=V>0;if(T||P>0){if(T||(V=P,P=0),P>V){var E=V;V=P,P=E}var M=W.startAngle,A=W.endAngle;if(!isNaN(M)&&!isNaN(A)){var O=W.cx,B=W.cy,ue=!!W.clockwise,ae=X(A-M),oe=ae>ve&&ae%ve;if(oe>$&&(ae=oe),V>$)if(ae>ve-$)G.moveTo(O+V*Ce(M),B+V*be(M)),G.arc(O,B,V,M,A,!ue),P>$&&(G.moveTo(O+P*Ce(A),B+P*be(A)),G.arc(O,B,P,A,M,ue));else{var de=void 0,te=void 0,xe=void 0,fe=void 0,ge=void 0,we=void 0,Te=void 0,Ae=void 0,Ee=void 0,Ve=void 0,He=void 0,We=void 0,$e=void 0,lt=void 0,St=void 0,_t=void 0,Ot=V*Ce(M),Vt=V*be(M),an=P*Ce(A),hn=P*be(A),Vn=ae>$;if(Vn){var ar=W.cornerRadius;ar&&(J=function b(G){var W;if((0,le.isArray)(G)){var J=G.length;if(!J)return G;W=1===J?[G[0],G[0],0,0]:2===J?[G[0],G[0],G[1],G[1]]:3===J?G.concat(G[2]):G}else W=[G,G,G,G];return W}(ar),de=J[0],te=J[1],xe=J[2],fe=J[3]);var Yn=X(V-P)/2;if(ge=ee(Yn,xe),we=ee(Yn,fe),Te=ee(Yn,de),Ae=ee(Yn,te),He=Ee=U(ge,we),We=Ve=U(Te,Ae),(Ee>$||Ve>$)&&($e=V*Ce(A),lt=V*be(A),St=P*Ce(M),_t=P*be(M),ae<ye)){var vr=function ie(G,W,J,V,P,T,R,E){var M=J-G,A=V-W,O=R-P,B=E-T,ue=B*M-O*A;if(!(ue*ue<$))return[G+(ue=(O*(W-T)-B*(G-P))/ue)*M,W+ue*A]}(Ot,Vt,St,_t,$e,lt,an,hn);if(vr){var Qn=Ot-vr[0],$t=Vt-vr[1],un=$e-vr[0],On=lt-vr[1],jn=1/be(he((Qn*un+$t*On)/(re(Qn*Qn+$t*$t)*re(un*un+On*On)))/2),Je=re(vr[0]*vr[0]+vr[1]*vr[1]);He=ee(Ee,(V-Je)/(jn+1)),We=ee(Ve,(P-Je)/(jn-1))}}}if(Vn)if(He>$){var Dt=ee(xe,He),Gt=ee(fe,He),Rt=K(St,_t,Ot,Vt,V,Dt,ue),fn=K($e,lt,an,hn,V,Gt,ue);G.moveTo(O+Rt.cx+Rt.x0,B+Rt.cy+Rt.y0),He<Ee&&Dt===Gt?G.arc(O+Rt.cx,B+Rt.cy,He,j(Rt.y0,Rt.x0),j(fn.y0,fn.x0),!ue):(Dt>0&&G.arc(O+Rt.cx,B+Rt.cy,Dt,j(Rt.y0,Rt.x0),j(Rt.y1,Rt.x1),!ue),G.arc(O,B,V,j(Rt.cy+Rt.y1,Rt.cx+Rt.x1),j(fn.cy+fn.y1,fn.cx+fn.x1),!ue),Gt>0&&G.arc(O+fn.cx,B+fn.cy,Gt,j(fn.y1,fn.x1),j(fn.y0,fn.x0),!ue))}else G.moveTo(O+Ot,B+Vt),G.arc(O,B,V,M,A,!ue);else G.moveTo(O+Ot,B+Vt);P>$&&Vn?We>$?(Dt=ee(de,We),Rt=K(an,hn,$e,lt,P,-(Gt=ee(te,We)),ue),fn=K(Ot,Vt,St,_t,P,-Dt,ue),G.lineTo(O+Rt.cx+Rt.x0,B+Rt.cy+Rt.y0),We<Ve&&Dt===Gt?G.arc(O+Rt.cx,B+Rt.cy,We,j(Rt.y0,Rt.x0),j(fn.y0,fn.x0),!ue):(Gt>0&&G.arc(O+Rt.cx,B+Rt.cy,Gt,j(Rt.y0,Rt.x0),j(Rt.y1,Rt.x1),!ue),G.arc(O,B,P,j(Rt.cy+Rt.y1,Rt.cx+Rt.x1),j(fn.cy+fn.y1,fn.cx+fn.x1),ue),Dt>0&&G.arc(O+fn.cx,B+fn.cy,Dt,j(fn.y1,fn.x1),j(fn.y0,fn.x0),!ue))):(G.lineTo(O+an,B+hn),G.arc(O,B,P,A,M,ue)):G.lineTo(O+an,B+hn)}else G.moveTo(O,B);G.closePath()}}}(J,V)},W.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},W}(Se.ZP);F.prototype.type="sector";const q=F},8541:(Bt,Qe,z)=>{z.d(Qe,{Cv:()=>b,Gk:()=>J,H3:()=>G,I1:()=>F,Pn:()=>j,R:()=>Q,gA:()=>V,gO:()=>q,i2:()=>$,jY:()=>U,m1:()=>W,mU:()=>ee,n1:()=>ie,oF:()=>P,qV:()=>re,ut:()=>ve,zT:()=>Ce});var ce=z(628),Se=z(312),le=z(169),ye=Math.round;function ve(T){var R;if(T&&"transparent"!==T){if("string"==typeof T&&T.indexOf("rgba")>-1){var E=(0,Se.parse)(T);E&&(T="rgb("+E[0]+","+E[1]+","+E[2]+")",R=E[3])}}else T="none";return{color:T,opacity:R??1}}function Ce(T){return T<1e-4&&T>-1e-4}function he(T){return ye(1e3*T)/1e3}function j(T){return ye(1e4*T)/1e4}function re(T){return"matrix("+he(T[0])+","+he(T[1])+","+he(T[2])+","+he(T[3])+","+j(T[4])+","+j(T[5])+")"}var U={left:"start",right:"end",center:"middle",middle:"middle"};function ee(T,R,E){return"top"===E?T+=R/2:"bottom"===E&&(T-=R/2),T}function $(T){return T&&(T.shadowBlur||T.shadowOffsetX||T.shadowOffsetY)}function ie(T){var R=T.style,E=T.getGlobalScale();return[R.shadowColor,(R.shadowBlur||0).toFixed(2),(R.shadowOffsetX||0).toFixed(2),(R.shadowOffsetY||0).toFixed(2),E[0],E[1]].join(",")}function b(T){return T&&!!T.image}function Q(T){return b(T)||function Y(T){return T&&!!T.svgElement}(T)}function F(T){return"linear"===T.type}function q(T){return"radial"===T.type}function G(T){return T&&("linear"===T.type||"radial"===T.type)}function W(T){return"url(#"+T+")"}function J(T){var R=T.getGlobalScale(),E=Math.max(R[0],R[1]);return Math.max(Math.ceil(Math.log(E)/Math.log(10)),1)}function V(T){var R=T.x||0,E=T.y||0,M=(T.rotation||0)*ce.RADIAN_TO_DEGREE,A=(0,ce.retrieve2)(T.scaleX,1),O=(0,ce.retrieve2)(T.scaleY,1),B=T.skewX||0,ue=T.skewY||0,ae=[];return(R||E)&&ae.push("translate("+R+"px,"+E+"px)"),M&&ae.push("rotate("+M+")"),(1!==A||1!==O)&&ae.push("scale("+A+","+O+")"),(B||ue)&&ae.push("skew("+ye(B*ce.RADIAN_TO_DEGREE)+"deg, "+ye(ue*ce.RADIAN_TO_DEGREE)+"deg)"),ae.join(" ")}var P=le.Z.hasGlobalWindow&&(0,ce.isFunction)(window.btoa)?function(T){return window.btoa(unescape(T))}:typeof Buffer<"u"?function(T){return Buffer.from(T).toString("base64")}:function(T){return null}},312:(Bt,Qe,z)=>{z.r(Qe),z.d(Qe,{fastLerp:()=>F,fastMapToColor:()=>q,lerp:()=>G,lift:()=>Y,lum:()=>T,mapToColor:()=>W,modifyAlpha:()=>V,modifyHSL:()=>J,parse:()=>ie,random:()=>R,stringify:()=>P,toHex:()=>Q});var ce=z(7148),Se={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function le(E){return(E=Math.round(E))<0?0:E>255?255:E}function ve(E){return E<0?0:E>1?1:E}function be(E){var M=E;return M.length&&"%"===M.charAt(M.length-1)?le(parseFloat(M)/100*255):le(parseInt(M,10))}function Ce(E){var M=E;return M.length&&"%"===M.charAt(M.length-1)?ve(parseFloat(M)/100):ve(parseFloat(M))}function he(E,M,A){return A<0?A+=1:A>1&&(A-=1),6*A<1?E+(M-E)*A*6:2*A<1?M:3*A<2?E+(M-E)*(2/3-A)*6:E}function j(E,M,A){return E+(M-E)*A}function X(E,M,A,O,B){return E[0]=M,E[1]=A,E[2]=O,E[3]=B,E}function re(E,M){return E[0]=M[0],E[1]=M[1],E[2]=M[2],E[3]=M[3],E}var U=new ce.ZP(20),ee=null;function $(E,M){ee&&re(ee,M),ee=U.put(E,ee||M.slice())}function ie(E,M){if(E){M=M||[];var A=U.get(E);if(A)return re(M,A);var O=(E+="").replace(/ /g,"").toLowerCase();if(O in Se)return re(M,Se[O]),$(E,M),M;var ue,B=O.length;if("#"===O.charAt(0))return 4===B||5===B?(ue=parseInt(O.slice(1,4),16))>=0&&ue<=4095?(X(M,(3840&ue)>>4|(3840&ue)>>8,240&ue|(240&ue)>>4,15&ue|(15&ue)<<4,5===B?parseInt(O.slice(4),16)/15:1),$(E,M),M):void X(M,0,0,0,1):7===B||9===B?(ue=parseInt(O.slice(1,7),16))>=0&&ue<=16777215?(X(M,(16711680&ue)>>16,(65280&ue)>>8,255&ue,9===B?parseInt(O.slice(7),16)/255:1),$(E,M),M):void X(M,0,0,0,1):void 0;var ae=O.indexOf("("),oe=O.indexOf(")");if(-1!==ae&&oe+1===B){var de=O.substr(0,ae),te=O.substr(ae+1,oe-(ae+1)).split(","),xe=1;switch(de){case"rgba":if(4!==te.length)return 3===te.length?X(M,+te[0],+te[1],+te[2],1):X(M,0,0,0,1);xe=Ce(te.pop());case"rgb":return te.length>=3?(X(M,be(te[0]),be(te[1]),be(te[2]),3===te.length?xe:Ce(te[3])),$(E,M),M):void X(M,0,0,0,1);case"hsla":return 4!==te.length?void X(M,0,0,0,1):(te[3]=Ce(te[3]),K(te,M),$(E,M),M);case"hsl":return 3!==te.length?void X(M,0,0,0,1):(K(te,M),$(E,M),M);default:return}}X(M,0,0,0,1)}}function K(E,M){var A=(parseFloat(E[0])%360+360)%360/360,O=Ce(E[1]),B=Ce(E[2]),ue=B<=.5?B*(O+1):B+O-B*O,ae=2*B-ue;return X(M=M||[],le(255*he(ae,ue,A+1/3)),le(255*he(ae,ue,A)),le(255*he(ae,ue,A-1/3)),1),4===E.length&&(M[3]=E[3]),M}function Y(E,M){var A=ie(E);if(A){for(var O=0;O<3;O++)A[O]=M<0?A[O]*(1-M)|0:(255-A[O])*M+A[O]|0,A[O]>255?A[O]=255:A[O]<0&&(A[O]=0);return P(A,4===A.length?"rgba":"rgb")}}function Q(E){var M=ie(E);if(M)return((1<<24)+(M[0]<<16)+(M[1]<<8)+ +M[2]).toString(16).slice(1)}function F(E,M,A){if(M&&M.length&&E>=0&&E<=1){A=A||[];var O=E*(M.length-1),B=Math.floor(O),ue=Math.ceil(O),ae=M[B],oe=M[ue],de=O-B;return A[0]=le(j(ae[0],oe[0],de)),A[1]=le(j(ae[1],oe[1],de)),A[2]=le(j(ae[2],oe[2],de)),A[3]=ve(j(ae[3],oe[3],de)),A}}var q=F;function G(E,M,A){if(M&&M.length&&E>=0&&E<=1){var O=E*(M.length-1),B=Math.floor(O),ue=Math.ceil(O),ae=ie(M[B]),oe=ie(M[ue]),de=O-B,te=P([le(j(ae[0],oe[0],de)),le(j(ae[1],oe[1],de)),le(j(ae[2],oe[2],de)),ve(j(ae[3],oe[3],de))],"rgba");return A?{color:te,leftIndex:B,rightIndex:ue,value:O}:te}}var W=G;function J(E,M,A,O){var B=ie(E);if(E)return B=function b(E){if(E){var de,te,M=E[0]/255,A=E[1]/255,O=E[2]/255,B=Math.min(M,A,O),ue=Math.max(M,A,O),ae=ue-B,oe=(ue+B)/2;if(0===ae)de=0,te=0;else{te=oe<.5?ae/(ue+B):ae/(2-ue-B);var xe=((ue-M)/6+ae/2)/ae,fe=((ue-A)/6+ae/2)/ae,ge=((ue-O)/6+ae/2)/ae;M===ue?de=ge-fe:A===ue?de=1/3+xe-ge:O===ue&&(de=2/3+fe-xe),de<0&&(de+=1),de>1&&(de-=1)}var we=[360*de,te,oe];return null!=E[3]&&we.push(E[3]),we}}(B),null!=M&&(B[0]=function ye(E){return(E=Math.round(E))<0?0:E>360?360:E}(M)),null!=A&&(B[1]=Ce(A)),null!=O&&(B[2]=Ce(O)),P(K(B),"rgba")}function V(E,M){var A=ie(E);if(A&&null!=M)return A[3]=ve(M),P(A,"rgba")}function P(E,M){if(E&&E.length){var A=E[0]+","+E[1]+","+E[2];return("rgba"===M||"hsva"===M||"hsla"===M)&&(A+=","+E[3]),M+"("+A+")"}}function T(E,M){var A=ie(E);return A?(.299*A[0]+.587*A[1]+.114*A[2])*A[3]/255+(1-A[3])*M:0}function R(){return P([Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random())],"rgb")}},9441:(Bt,Qe,z)=>{z.d(Qe,{U5:()=>R,iR:()=>V,Pc:()=>P,AA:()=>T});var ce=z(908),Se=z(126),le=z(7349),ye=z(8221),ve=le.Z.CMD,be=[[],[],[]],Ce=Math.sqrt,he=Math.atan2;function j(E,M){if(M){var B,ue,ae,oe,de,te,A=E.data,O=E.len(),xe=ve.M,fe=ve.C,ge=ve.L,we=ve.R,Te=ve.A,Ae=ve.Q;for(ae=0,oe=0;ae<O;){switch(B=A[ae++],oe=ae,ue=0,B){case xe:case ge:ue=1;break;case fe:ue=3;break;case Ae:ue=2;break;case Te:var Ee=M[4],Ve=M[5],He=Ce(M[0]*M[0]+M[1]*M[1]),We=Ce(M[2]*M[2]+M[3]*M[3]),$e=he(-M[1]/We,M[0]/He);A[ae]*=He,A[ae++]+=Ee,A[ae]*=We,A[ae++]+=Ve,A[ae++]*=He,A[ae++]*=We,A[ae++]+=$e,A[ae++]+=$e,oe=ae+=2;break;case we:te[0]=A[ae++],te[1]=A[ae++],(0,ye.applyTransform)(te,te,M),A[oe++]=te[0],A[oe++]=te[1],te[0]+=A[ae++],te[1]+=A[ae++],(0,ye.applyTransform)(te,te,M),A[oe++]=te[0],A[oe++]=te[1]}for(de=0;de<ue;de++){var lt=be[de];lt[0]=A[ae++],lt[1]=A[ae++],(0,ye.applyTransform)(lt,lt,M),A[oe++]=lt[0],A[oe++]=lt[1]}}E.increaseVersion()}}var X=z(628),re=Math.sqrt,U=Math.sin,ee=Math.cos,$=Math.PI;function ie(E){return Math.sqrt(E[0]*E[0]+E[1]*E[1])}function K(E,M){return(E[0]*M[0]+E[1]*M[1])/(ie(E)*ie(M))}function b(E,M){return(E[0]*M[1]<E[1]*M[0]?-1:1)*Math.acos(K(E,M))}function Y(E,M,A,O,B,ue,ae,oe,de,te,xe){var fe=de*($/180),ge=ee(fe)*(E-A)/2+U(fe)*(M-O)/2,we=-1*U(fe)*(E-A)/2+ee(fe)*(M-O)/2,Te=ge*ge/(ae*ae)+we*we/(oe*oe);Te>1&&(ae*=re(Te),oe*=re(Te));var Ae=(B===ue?-1:1)*re((ae*ae*(oe*oe)-ae*ae*(we*we)-oe*oe*(ge*ge))/(ae*ae*(we*we)+oe*oe*(ge*ge)))||0,Ee=Ae*ae*we/oe,Ve=Ae*-oe*ge/ae,He=(E+A)/2+ee(fe)*Ee-U(fe)*Ve,We=(M+O)/2+U(fe)*Ee+ee(fe)*Ve,$e=b([1,0],[(ge-Ee)/ae,(we-Ve)/oe]),lt=[(ge-Ee)/ae,(we-Ve)/oe],St=[(-1*ge-Ee)/ae,(-1*we-Ve)/oe],_t=b(lt,St);if(K(lt,St)<=-1&&(_t=$),K(lt,St)>=1&&(_t=0),_t<0){var Ot=Math.round(_t/$*1e6)/1e6;_t=2*$+Ot%2*$}xe.addData(te,He,We,ae,oe,$e,_t,fe,ue)}var Q=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,F=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g,G=function(E){function M(){return null!==E&&E.apply(this,arguments)||this}return(0,ce.ZT)(M,E),M.prototype.applyTransform=function(A){},M}(Se.ZP);function W(E){return null!=E.setData}function J(E,M){var A=function q(E){var M=new le.Z;if(!E)return M;var ae,A=0,O=0,B=A,ue=O,oe=le.Z.CMD,de=E.match(Q);if(!de)return M;for(var te=0;te<de.length;te++){for(var xe=de[te],fe=xe.charAt(0),ge=void 0,we=xe.match(F)||[],Te=we.length,Ae=0;Ae<Te;Ae++)we[Ae]=parseFloat(we[Ae]);for(var Ee=0;Ee<Te;){var Ve=void 0,He=void 0,We=void 0,$e=void 0,lt=void 0,St=void 0,_t=void 0,Ot=A,Vt=O,an=void 0,hn=void 0;switch(fe){case"l":A+=we[Ee++],O+=we[Ee++],M.addData(ge=oe.L,A,O);break;case"L":A=we[Ee++],O=we[Ee++],M.addData(ge=oe.L,A,O);break;case"m":A+=we[Ee++],O+=we[Ee++],M.addData(ge=oe.M,A,O),B=A,ue=O,fe="l";break;case"M":A=we[Ee++],O=we[Ee++],M.addData(ge=oe.M,A,O),B=A,ue=O,fe="L";break;case"h":A+=we[Ee++],M.addData(ge=oe.L,A,O);break;case"H":A=we[Ee++],M.addData(ge=oe.L,A,O);break;case"v":O+=we[Ee++],M.addData(ge=oe.L,A,O);break;case"V":O=we[Ee++],M.addData(ge=oe.L,A,O);break;case"C":M.addData(ge=oe.C,we[Ee++],we[Ee++],we[Ee++],we[Ee++],we[Ee++],we[Ee++]),A=we[Ee-2],O=we[Ee-1];break;case"c":M.addData(ge=oe.C,we[Ee++]+A,we[Ee++]+O,we[Ee++]+A,we[Ee++]+O,we[Ee++]+A,we[Ee++]+O),A+=we[Ee-2],O+=we[Ee-1];break;case"S":Ve=A,He=O,an=M.len(),hn=M.data,ae===oe.C&&(Ve+=A-hn[an-4],He+=O-hn[an-3]),Ot=we[Ee++],Vt=we[Ee++],A=we[Ee++],O=we[Ee++],M.addData(ge=oe.C,Ve,He,Ot,Vt,A,O);break;case"s":Ve=A,He=O,an=M.len(),hn=M.data,ae===oe.C&&(Ve+=A-hn[an-4],He+=O-hn[an-3]),Ot=A+we[Ee++],Vt=O+we[Ee++],A+=we[Ee++],O+=we[Ee++],M.addData(ge=oe.C,Ve,He,Ot,Vt,A,O);break;case"Q":Ot=we[Ee++],Vt=we[Ee++],A=we[Ee++],O=we[Ee++],M.addData(ge=oe.Q,Ot,Vt,A,O);break;case"q":Ot=we[Ee++]+A,Vt=we[Ee++]+O,A+=we[Ee++],O+=we[Ee++],M.addData(ge=oe.Q,Ot,Vt,A,O);break;case"T":Ve=A,He=O,an=M.len(),hn=M.data,ae===oe.Q&&(Ve+=A-hn[an-4],He+=O-hn[an-3]),A=we[Ee++],O=we[Ee++],M.addData(ge=oe.Q,Ve,He,A,O);break;case"t":Ve=A,He=O,an=M.len(),hn=M.data,ae===oe.Q&&(Ve+=A-hn[an-4],He+=O-hn[an-3]),A+=we[Ee++],O+=we[Ee++],M.addData(ge=oe.Q,Ve,He,A,O);break;case"A":We=we[Ee++],$e=we[Ee++],lt=we[Ee++],St=we[Ee++],_t=we[Ee++],Y(Ot=A,Vt=O,A=we[Ee++],O=we[Ee++],St,_t,We,$e,lt,ge=oe.A,M);break;case"a":We=we[Ee++],$e=we[Ee++],lt=we[Ee++],St=we[Ee++],_t=we[Ee++],Y(Ot=A,Vt=O,A+=we[Ee++],O+=we[Ee++],St,_t,We,$e,lt,ge=oe.A,M)}}("z"===fe||"Z"===fe)&&(M.addData(ge=oe.Z),A=B,O=ue),ae=ge}return M.toStatic(),M}(E),O=(0,X.extend)({},M);return O.buildPath=function(B){var ue;W(B)?(B.setData(A.data),(ue=B.getContext())&&B.rebuildPath(ue,1)):A.rebuildPath(ue=B,1)},O.applyTransform=function(B){j(A,B),this.dirtyShape()},O}function V(E,M){return new G(J(E,M))}function P(E,M){var A=J(E,M);return function(B){function ue(ae){var oe=B.call(this,ae)||this;return oe.applyTransform=A.applyTransform,oe.buildPath=A.buildPath,oe}return(0,ce.ZT)(ue,B),ue}(G)}function T(E,M){for(var A=[],O=E.length,B=0;B<O;B++)A.push(E[B].getUpdatedPathProxy(!0));var ae=new Se.ZP(M);return ae.createPathProxy(),ae.buildPath=function(oe){if(W(oe)){oe.appendPath(A);var de=oe.getContext();de&&oe.rebuildPath(de,1)}},ae}function R(E,M){M=M||{};var A=new Se.ZP;return E.shape&&A.setShape(E.shape),A.setStyle(E.style),M.bakeTransform?j(A.path,E.getComputedTransform()):M.toLocal?A.setLocalTransform(E.getComputedTransform()):A.copyTransform(E),A.buildPath=E.buildPath,A.applyTransform=A.applyTransform,A.z=E.z,A.z2=E.z2,A.zlevel=E.zlevel,A}},7806:(Bt,Qe,z)=>{z.r(Qe),z.d(Qe,{dispose:()=>Gt,disposeAll:()=>Rt,getInstance:()=>fn,init:()=>Dt,registerPainter:()=>hr,version:()=>fr});var ce=z(169),Se=z(628),le=z(908),ye=z(8221),ve=function tt(it,at){this.target=it,this.topTarget=at&&at.topTarget},be=function(){function tt(it){this.handler=it,it.on("mousedown",this._dragStart,this),it.on("mousemove",this._drag,this),it.on("mouseup",this._dragEnd,this)}return tt.prototype._dragStart=function(it){for(var at=it.target;at&&!at.draggable;)at=at.parent||at.__hostTarget;at&&(this._draggingTarget=at,at.dragging=!0,this._x=it.offsetX,this._y=it.offsetY,this.handler.dispatchToElement(new ve(at,it),"dragstart",it.event))},tt.prototype._drag=function(it){var at=this._draggingTarget;if(at){var je=it.offsetX,vt=it.offsetY,ht=je-this._x,Pt=vt-this._y;this._x=je,this._y=vt,at.drift(ht,Pt,it),this.handler.dispatchToElement(new ve(at,it),"drag",it.event);var tn=this.handler.findHover(je,vt,at).target,In=this._dropTarget;this._dropTarget=tn,at!==tn&&(In&&tn!==In&&this.handler.dispatchToElement(new ve(In,it),"dragleave",it.event),tn&&tn!==In&&this.handler.dispatchToElement(new ve(tn,it),"dragenter",it.event))}},tt.prototype._dragEnd=function(it){var at=this._draggingTarget;at&&(at.dragging=!1),this.handler.dispatchToElement(new ve(at,it),"dragend",it.event),this._dropTarget&&this.handler.dispatchToElement(new ve(this._dropTarget,it),"drop",it.event),this._draggingTarget=null,this._dropTarget=null},tt}();const Ce=be;var he=z(6801),j=z(1170),X=function(){function tt(){this._track=[]}return tt.prototype.recognize=function(it,at,je){return this._doTrack(it,at,je),this._recognize(it)},tt.prototype.clear=function(){return this._track.length=0,this},tt.prototype._doTrack=function(it,at,je){var vt=it.touches;if(vt){for(var ht={points:[],touches:[],target:at,event:it},Pt=0,tn=vt.length;Pt<tn;Pt++){var In=vt[Pt],Dn=j.eV(je,In,{});ht.points.push([Dn.zrX,Dn.zrY]),ht.touches.push(In)}this._track.push(ht)}},tt.prototype._recognize=function(it){for(var at in ee)if(ee.hasOwnProperty(at)){var je=ee[at](this._track,it);if(je)return je}},tt}();function re(tt){var it=tt[1][0]-tt[0][0],at=tt[1][1]-tt[0][1];return Math.sqrt(it*it+at*at)}var ee={pinch:function(tt,it){var at=tt.length;if(at){var je=(tt[at-1]||{}).points,vt=(tt[at-2]||{}).points||je;if(vt&&vt.length>1&&je&&je.length>1){var ht=re(je)/re(vt);!isFinite(ht)&&(ht=1),it.pinchScale=ht;var Pt=function U(tt){return[(tt[0][0]+tt[1][0])/2,(tt[0][1]+tt[1][1])/2]}(je);return it.pinchX=Pt[0],it.pinchY=Pt[1],{type:"pinch",target:tt[0].target,event:it}}}}},$=z(7021);function b(){j.sT(this.event)}var Y=function(tt){function it(){var at=null!==tt&&tt.apply(this,arguments)||this;return at.handler=null,at}return(0,le.ZT)(it,tt),it.prototype.dispose=function(){},it.prototype.setCursor=function(){},it}(he.Z),Q=function tt(it,at){this.x=it,this.y=at},F=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],q=new $.Z(0,0,0,0),G=function(tt){function it(at,je,vt,ht,Pt){var tn=tt.call(this)||this;return tn._hovered=new Q(0,0),tn.storage=at,tn.painter=je,tn.painterRoot=ht,tn._pointerSize=Pt,vt=vt||new Y,tn.proxy=null,tn.setHandlerProxy(vt),tn._draggingMgr=new Ce(tn),tn}return(0,le.ZT)(it,tt),it.prototype.setHandlerProxy=function(at){this.proxy&&this.proxy.dispose(),at&&(Se.each(F,function(je){at.on&&at.on(je,this[je],this)},this),at.handler=this),this.proxy=at},it.prototype.mousemove=function(at){var je=at.zrX,vt=at.zrY,ht=V(this,je,vt),Pt=this._hovered,tn=Pt.target;tn&&!tn.__zr&&(tn=(Pt=this.findHover(Pt.x,Pt.y)).target);var In=this._hovered=ht?new Q(je,vt):this.findHover(je,vt),Dn=In.target,or=this.proxy;or.setCursor&&or.setCursor(Dn?Dn.cursor:"default"),tn&&Dn!==tn&&this.dispatchToElement(Pt,"mouseout",at),this.dispatchToElement(In,"mousemove",at),Dn&&Dn!==tn&&this.dispatchToElement(In,"mouseover",at)},it.prototype.mouseout=function(at){var je=at.zrEventControl;"only_globalout"!==je&&this.dispatchToElement(this._hovered,"mouseout",at),"no_globalout"!==je&&this.trigger("globalout",{type:"globalout",event:at})},it.prototype.resize=function(){this._hovered=new Q(0,0)},it.prototype.dispatch=function(at,je){var vt=this[at];vt&&vt.call(this,je)},it.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},it.prototype.setCursorStyle=function(at){var je=this.proxy;je.setCursor&&je.setCursor(at)},it.prototype.dispatchToElement=function(at,je,vt){var ht=(at=at||{}).target;if(!ht||!ht.silent){for(var Pt="on"+je,tn=function K(tt,it,at){return{type:tt,event:at,target:it.target,topTarget:it.topTarget,cancelBubble:!1,offsetX:at.zrX,offsetY:at.zrY,gestureEvent:at.gestureEvent,pinchX:at.pinchX,pinchY:at.pinchY,pinchScale:at.pinchScale,wheelDelta:at.zrDelta,zrByTouch:at.zrByTouch,which:at.which,stop:b}}(je,at,vt);ht&&(ht[Pt]&&(tn.cancelBubble=!!ht[Pt].call(ht,tn)),ht.trigger(je,tn),ht=ht.__hostTarget?ht.__hostTarget:ht.parent,!tn.cancelBubble););tn.cancelBubble||(this.trigger(je,tn),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(In){"function"==typeof In[Pt]&&In[Pt].call(In,tn),In.trigger&&In.trigger(je,tn)}))}},it.prototype.findHover=function(at,je,vt){var ht=this.storage.getDisplayList(),Pt=new Q(at,je);if(J(ht,Pt,at,je,vt),this._pointerSize&&!Pt.target){for(var tn=[],In=this._pointerSize,Dn=In/2,or=new $.Z(at-Dn,je-Dn,In,In),mi=ht.length-1;mi>=0;mi--){var sr=ht[mi];sr!==vt&&!sr.ignore&&!sr.ignoreCoarsePointer&&(!sr.parent||!sr.parent.ignoreCoarsePointer)&&(q.copy(sr.getBoundingRect()),sr.transform&&q.applyTransform(sr.transform),q.intersect(or)&&tn.push(sr))}if(tn.length)for(var ra=Math.PI/12,Yl=2*Math.PI,xs=0;xs<Dn;xs+=4)for(var Sa=0;Sa<Yl;Sa+=ra)if(J(tn,Pt,at+xs*Math.cos(Sa),je+xs*Math.sin(Sa),vt),Pt.target)return Pt}return Pt},it.prototype.processGesture=function(at,je){this._gestureMgr||(this._gestureMgr=new X);var vt=this._gestureMgr;"start"===je&&vt.clear();var ht=vt.recognize(at,this.findHover(at.zrX,at.zrY,null).target,this.proxy.dom);if("end"===je&&vt.clear(),ht){var Pt=ht.type;at.gestureEvent=Pt;var tn=new Q;tn.target=ht.target,this.dispatchToElement(tn,Pt,ht.event)}},it}(he.Z);function W(tt,it,at){if(tt[tt.rectHover?"rectContain":"contain"](it,at)){for(var je=tt,vt=void 0,ht=!1;je;){if(je.ignoreClip&&(ht=!0),!ht){var Pt=je.getClipPath();if(Pt&&!Pt.contain(it,at))return!1;je.silent&&(vt=!0)}je=je.__hostTarget||je.parent}return!vt||"silent"}return!1}function J(tt,it,at,je,vt){for(var ht=tt.length-1;ht>=0;ht--){var Pt=tt[ht],tn=void 0;if(Pt!==vt&&!Pt.ignore&&(tn=W(Pt,at,je))&&(!it.topTarget&&(it.topTarget=Pt),"silent"!==tn)){it.target=Pt;break}}}function V(tt,it,at){var je=tt.painter;return it<0||it>je.getWidth()||at<0||at>je.getHeight()}Se.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(tt){G.prototype[tt]=function(it){var ht,Pt,at=it.zrX,je=it.zrY,vt=V(this,at,je);if(("mouseup"!==tt||!vt)&&(Pt=(ht=this.findHover(at,je)).target),"mousedown"===tt)this._downEl=Pt,this._downPoint=[it.zrX,it.zrY],this._upEl=Pt;else if("mouseup"===tt)this._upEl=Pt;else if("click"===tt){if(this._downEl!==this._upEl||!this._downPoint||ye.dist(this._downPoint,[it.zrX,it.zrY])>4)return;this._downPoint=null}this.dispatchToElement(ht,tt,it)}});const P=G;var T=z(9995),R=z(2369),E=!1;function M(){E||(E=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function A(tt,it){return tt.zlevel===it.zlevel?tt.z===it.z?tt.z2-it.z2:tt.z-it.z:tt.zlevel-it.zlevel}var O=function(){function tt(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=A}return tt.prototype.traverse=function(it,at){for(var je=0;je<this._roots.length;je++)this._roots[je].traverse(it,at)},tt.prototype.getDisplayList=function(it,at){at=at||!1;var je=this._displayList;return(it||!je.length)&&this.updateDisplayList(at),je},tt.prototype.updateDisplayList=function(it){this._displayListLen=0;for(var at=this._roots,je=this._displayList,vt=0,ht=at.length;vt<ht;vt++)this._updateAndAddDisplayable(at[vt],null,it);je.length=this._displayListLen,(0,T.Z)(je,A)},tt.prototype._updateAndAddDisplayable=function(it,at,je){if(!it.ignore||je){it.beforeUpdate(),it.update(),it.afterUpdate();var vt=it.getClipPath();if(it.ignoreClip)at=null;else if(vt){at=at?at.slice():[];for(var ht=vt,Pt=it;ht;)ht.parent=Pt,ht.updateTransform(),at.push(ht),Pt=ht,ht=ht.getClipPath()}if(it.childrenRef){for(var tn=it.childrenRef(),In=0;In<tn.length;In++){var Dn=tn[In];it.__dirty&&(Dn.__dirty|=R.YV),this._updateAndAddDisplayable(Dn,at,je)}it.__dirty=0}else{var or=it;at&&at.length?or.__clipPaths=at:or.__clipPaths&&or.__clipPaths.length>0&&(or.__clipPaths=[]),isNaN(or.z)&&(M(),or.z=0),isNaN(or.z2)&&(M(),or.z2=0),isNaN(or.zlevel)&&(M(),or.zlevel=0),this._displayList[this._displayListLen++]=or}var mi=it.getDecalElement&&it.getDecalElement();mi&&this._updateAndAddDisplayable(mi,at,je);var sr=it.getTextGuideLine();sr&&this._updateAndAddDisplayable(sr,at,je);var Ji=it.getTextContent();Ji&&this._updateAndAddDisplayable(Ji,at,je)}},tt.prototype.addRoot=function(it){it.__zr&&it.__zr.storage===this||this._roots.push(it)},tt.prototype.delRoot=function(it){if(it instanceof Array)for(var at=0,je=it.length;at<je;at++)this.delRoot(it[at]);else{var vt=Se.indexOf(this._roots,it);vt>=0&&this._roots.splice(vt,1)}},tt.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},tt.prototype.getRoots=function(){return this._roots},tt.prototype.dispose=function(){this._displayList=null,this._roots=null},tt}();const B=O;var ue=z(2036),ae=z(6062);function oe(){return(new Date).getTime()}var de=function(tt){function it(at){var je=tt.call(this)||this;return je._running=!1,je._time=0,je._pausedTime=0,je._pauseStart=0,je._paused=!1,je.stage=(at=at||{}).stage||{},je}return(0,le.ZT)(it,tt),it.prototype.addClip=function(at){at.animation&&this.removeClip(at),this._head?(this._tail.next=at,at.prev=this._tail,at.next=null,this._tail=at):this._head=this._tail=at,at.animation=this},it.prototype.addAnimator=function(at){at.animation=this;var je=at.getClip();je&&this.addClip(je)},it.prototype.removeClip=function(at){if(at.animation){var je=at.prev,vt=at.next;je?je.next=vt:this._head=vt,vt?vt.prev=je:this._tail=je,at.next=at.prev=at.animation=null}},it.prototype.removeAnimator=function(at){var je=at.getClip();je&&this.removeClip(je),at.animation=null},it.prototype.update=function(at){for(var je=oe()-this._pausedTime,vt=je-this._time,ht=this._head;ht;){var Pt=ht.next;ht.step(je,vt)&&(ht.ondestroy(),this.removeClip(ht)),ht=Pt}this._time=je,at||(this.trigger("frame",vt),this.stage.update&&this.stage.update())},it.prototype._startLoop=function(){var at=this;this._running=!0,(0,ue.Z)(function je(){at._running&&((0,ue.Z)(je),!at._paused&&at.update())})},it.prototype.start=function(){this._running||(this._time=oe(),this._pausedTime=0,this._startLoop())},it.prototype.stop=function(){this._running=!1},it.prototype.pause=function(){this._paused||(this._pauseStart=oe(),this._paused=!0)},it.prototype.resume=function(){this._paused&&(this._pausedTime+=oe()-this._pauseStart,this._paused=!1)},it.prototype.clear=function(){for(var at=this._head;at;){var je=at.next;at.prev=at.next=at.animation=null,at=je}this._head=this._tail=null},it.prototype.isFinished=function(){return null==this._head},it.prototype.animate=function(at,je){je=je||{},this.start();var vt=new ae.Z(at,je.loop);return this.addAnimator(vt),vt},it}(he.Z);const te=de;var tt,at,fe=ce.Z.domSupported,ge=(at={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},{mouse:tt=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touch:["touchstart","touchend","touchmove"],pointer:Se.map(tt,function(vt){var ht=vt.replace("mouse","pointer");return at.hasOwnProperty(ht)?ht:vt})}),we_mouse=["mousemove","mouseup"],we_pointer=["pointermove","pointerup"],Te=!1;function Ae(tt){var it=tt.pointerType;return"pen"===it||"touch"===it}function Ve(tt){tt&&(tt.zrByTouch=!0)}function We(tt,it){for(var at=it,je=!1;at&&9!==at.nodeType&&!(je=at.domBelongToZr||at!==it&&at===tt.painterRoot);)at=at.parentNode;return je}var $e=function tt(it,at){this.stopPropagation=Se.noop,this.stopImmediatePropagation=Se.noop,this.preventDefault=Se.noop,this.type=at.type,this.target=this.currentTarget=it.dom,this.pointerType=at.pointerType,this.clientX=at.clientX,this.clientY=at.clientY},lt={mousedown:function(tt){tt=(0,j.OD)(this.dom,tt),this.__mayPointerCapture=[tt.zrX,tt.zrY],this.trigger("mousedown",tt)},mousemove:function(tt){tt=(0,j.OD)(this.dom,tt);var it=this.__mayPointerCapture;it&&(tt.zrX!==it[0]||tt.zrY!==it[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",tt)},mouseup:function(tt){tt=(0,j.OD)(this.dom,tt),this.__togglePointerCapture(!1),this.trigger("mouseup",tt)},mouseout:function(tt){We(this,(tt=(0,j.OD)(this.dom,tt)).toElement||tt.relatedTarget)||(this.__pointerCapturing&&(tt.zrEventControl="no_globalout"),this.trigger("mouseout",tt))},wheel:function(tt){Te=!0,tt=(0,j.OD)(this.dom,tt),this.trigger("mousewheel",tt)},mousewheel:function(tt){Te||(tt=(0,j.OD)(this.dom,tt),this.trigger("mousewheel",tt))},touchstart:function(tt){Ve(tt=(0,j.OD)(this.dom,tt)),this.__lastTouchMoment=new Date,this.handler.processGesture(tt,"start"),lt.mousemove.call(this,tt),lt.mousedown.call(this,tt)},touchmove:function(tt){Ve(tt=(0,j.OD)(this.dom,tt)),this.handler.processGesture(tt,"change"),lt.mousemove.call(this,tt)},touchend:function(tt){Ve(tt=(0,j.OD)(this.dom,tt)),this.handler.processGesture(tt,"end"),lt.mouseup.call(this,tt),+new Date-+this.__lastTouchMoment<300&&lt.click.call(this,tt)},pointerdown:function(tt){lt.mousedown.call(this,tt)},pointermove:function(tt){Ae(tt)||lt.mousemove.call(this,tt)},pointerup:function(tt){lt.mouseup.call(this,tt)},pointerout:function(tt){Ae(tt)||lt.mouseout.call(this,tt)}};Se.each(["click","dblclick","contextmenu"],function(tt){lt[tt]=function(it){it=(0,j.OD)(this.dom,it),this.trigger(tt,it)}});var St={pointermove:function(tt){Ae(tt)||St.mousemove.call(this,tt)},pointerup:function(tt){St.mouseup.call(this,tt)},mousemove:function(tt){this.trigger("mousemove",tt)},mouseup:function(tt){var it=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",tt),it&&(tt.zrEventControl="only_globalout",this.trigger("mouseout",tt))}};function Vt(tt,it,at,je){tt.mounted[it]=at,tt.listenerOpts[it]=je,(0,j.Oo)(tt.domTarget,it,at,je)}function an(tt){var it=tt.mounted;for(var at in it)it.hasOwnProperty(at)&&(0,j.xg)(tt.domTarget,at,it[at],tt.listenerOpts[at]);tt.mounted={}}var hn=function tt(it,at){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=it,this.domHandlers=at},Vn=function(tt){function it(at,je){var vt=tt.call(this)||this;return vt.__pointerCapturing=!1,vt.dom=at,vt.painterRoot=je,vt._localHandlerScope=new hn(at,lt),fe&&(vt._globalHandlerScope=new hn(document,St)),function _t(tt,it){var at=it.domHandlers;ce.Z.pointerEventsSupported?Se.each(ge.pointer,function(je){Vt(it,je,function(vt){at[je].call(tt,vt)})}):(ce.Z.touchEventsSupported&&Se.each(ge.touch,function(je){Vt(it,je,function(vt){at[je].call(tt,vt),function Ee(tt){tt.touching=!0,null!=tt.touchTimer&&(clearTimeout(tt.touchTimer),tt.touchTimer=null),tt.touchTimer=setTimeout(function(){tt.touching=!1,tt.touchTimer=null},700)}(it)})}),Se.each(ge.mouse,function(je){Vt(it,je,function(vt){vt=(0,j.iP)(vt),it.touching||at[je].call(tt,vt)})}))}(vt,vt._localHandlerScope),vt}return(0,le.ZT)(it,tt),it.prototype.dispose=function(){an(this._localHandlerScope),fe&&an(this._globalHandlerScope)},it.prototype.setCursor=function(at){this.dom.style&&(this.dom.style.cursor=at||"default")},it.prototype.__togglePointerCapture=function(at){if(this.__mayPointerCapture=null,fe&&+this.__pointerCapturing^+at){this.__pointerCapturing=at;var je=this._globalHandlerScope;at?function Ot(tt,it){function at(je){Vt(it,je,function vt(ht){ht=(0,j.iP)(ht),We(tt,ht.target)||(ht=function He(tt,it){return(0,j.OD)(tt.dom,new $e(tt,it),!0)}(tt,ht),it.domHandlers[je].call(tt,ht))},{capture:!0})}ce.Z.pointerEventsSupported?Se.each(we_pointer,at):ce.Z.touchEventsSupported||Se.each(we_mouse,at)}(this,je):an(je)}},it}(he.Z);const ar=Vn;var Yn=z(312),vr=z(6704),Qn=z(8539),$t={},un={},Je=function(){function tt(it,at,je){var vt=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,je=je||{},this.dom=at,this.id=it;var ht=new B,Pt=je.renderer||"canvas";$t[Pt]||(Pt=Se.keys($t)[0]),je.useDirtyRect=je.useDirtyRect??!1;var tn=new $t[Pt](at,ht,je,it),In=je.ssr||tn.ssrOnly;this.storage=ht,this.painter=tn;var Ji,Dn=ce.Z.node||ce.Z.worker||In?null:new ar(tn.getViewportRoot(),tn.root),or=je.useCoarsePointer;(null==or||"auto"===or?ce.Z.touchEventsSupported:!!or)&&(Ji=Se.retrieve2(je.pointerSize,44)),this.handler=new P(ht,tn,Dn,tn.root,Ji),this.animation=new te({stage:{update:In?null:function(){return vt._flush(!0)}}}),In||this.animation.start()}return tt.prototype.add=function(it){!it||(this.storage.addRoot(it),it.addSelfToZr(this),this.refresh())},tt.prototype.remove=function(it){!it||(this.storage.delRoot(it),it.removeSelfFromZr(this),this.refresh())},tt.prototype.configLayer=function(it,at){this.painter.configLayer&&this.painter.configLayer(it,at),this.refresh()},tt.prototype.setBackgroundColor=function(it){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(it),this.refresh(),this._backgroundColor=it,this._darkMode=function jn(tt){if(!tt)return!1;if("string"==typeof tt)return(0,Yn.lum)(tt,1)<vr.Ak;if(tt.colorStops){for(var it=tt.colorStops,at=0,je=it.length,vt=0;vt<je;vt++)at+=(0,Yn.lum)(it[vt].color,1);return(at/=je)<vr.Ak}return!1}(it)},tt.prototype.getBackgroundColor=function(){return this._backgroundColor},tt.prototype.setDarkMode=function(it){this._darkMode=it},tt.prototype.isDarkMode=function(){return this._darkMode},tt.prototype.refreshImmediately=function(it){it||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},tt.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},tt.prototype.flush=function(){this._flush(!1)},tt.prototype._flush=function(it){var at,je=oe();this._needsRefresh&&(at=!0,this.refreshImmediately(it)),this._needsRefreshHover&&(at=!0,this.refreshHoverImmediately());var vt=oe();at?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:vt-je})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},tt.prototype.setSleepAfterStill=function(it){this._sleepAfterStill=it},tt.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},tt.prototype.refreshHover=function(){this._needsRefreshHover=!0},tt.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&"canvas"===this.painter.getType()&&this.painter.refreshHover()},tt.prototype.resize=function(it){this.painter.resize((it=it||{}).width,it.height),this.handler.resize()},tt.prototype.clearAnimation=function(){this.animation.clear()},tt.prototype.getWidth=function(){return this.painter.getWidth()},tt.prototype.getHeight=function(){return this.painter.getHeight()},tt.prototype.setCursorStyle=function(it){this.handler.setCursorStyle(it)},tt.prototype.findHover=function(it,at){return this.handler.findHover(it,at)},tt.prototype.on=function(it,at,je){return this.handler.on(it,at,je),this},tt.prototype.off=function(it,at){this.handler.off(it,at)},tt.prototype.trigger=function(it,at){this.handler.trigger(it,at)},tt.prototype.clear=function(){for(var it=this.storage.getRoots(),at=0;at<it.length;at++)it[at]instanceof Qn.Z&&it[at].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},tt.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,function On(tt){delete un[tt]}(this.id)},tt}();function Dt(tt,it){var at=new Je(Se.guid(),tt,it);return un[at.id]=at,at}function Gt(tt){tt.dispose()}function Rt(){for(var tt in un)un.hasOwnProperty(tt)&&un[tt].dispose();un={}}function fn(tt){return un[tt]}function hr(tt,it){$t[tt]=it}var fr="5.4.0"},5071:(Bt,Qe,z)=>{function ce(e){return"function"==typeof e}function Se(e){const t=e(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const le=Se(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ye(e,n){if(e){const t=e.indexOf(n);0<=t&&e.splice(t,1)}}class ve{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(ce(r))try{r()}catch(s){n=s instanceof le?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{he(s)}catch(d){n=n??[],d instanceof le?n=[...n,...d.errors]:n.push(d)}}if(n)throw new le(n)}}add(n){var t;if(n&&n!==this)if(this.closed)he(n);else{if(n instanceof ve){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(n)}}_hasParent(n){const{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){const{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&ye(t,n)}remove(n){const{_finalizers:t}=this;t&&ye(t,n),n instanceof ve&&n._removeParent(this)}}ve.EMPTY=(()=>{const e=new ve;return e.closed=!0,e})();const be=ve.EMPTY;function Ce(e){return e instanceof ve||e&&"closed"in e&&ce(e.remove)&&ce(e.add)&&ce(e.unsubscribe)}function he(e){ce(e)?e():e.unsubscribe()}const j={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},X={setTimeout(e,n,...t){const{delegate:r}=X;return r?.setTimeout?r.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){const{delegate:n}=X;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function re(e){X.setTimeout(()=>{const{onUnhandledError:n}=j;if(!n)throw e;n(e)})}function U(){}const ee=K("C",void 0,void 0);function K(e,n,t){return{kind:e,value:n,error:t}}let b=null;function Y(e){if(j.useDeprecatedSynchronousErrorHandling){const n=!b;if(n&&(b={errorThrown:!1,error:null}),e(),n){const{errorThrown:t,error:r}=b;if(b=null,t)throw r}}else e()}class F extends ve{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,Ce(n)&&n.add(this)):this.destination=R}static create(n,t,r){return new J(n,t,r)}next(n){this.isStopped?T(function ie(e){return K("N",e,void 0)}(n),this):this._next(n)}error(n){this.isStopped?T(function $(e){return K("E",void 0,e)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?T(ee,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const q=Function.prototype.bind;function G(e,n){return q.call(e,n)}class W{constructor(n){this.partialObserver=n}next(n){const{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(r){V(r)}}error(n){const{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(r){V(r)}else V(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){V(t)}}}class J extends F{constructor(n,t,r){let i;if(super(),ce(n)||!n)i={next:n??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&j.useDeprecatedNextContext?(s=Object.create(n),s.unsubscribe=()=>this.unsubscribe(),i={next:n.next&&G(n.next,s),error:n.error&&G(n.error,s),complete:n.complete&&G(n.complete,s)}):i=n}this.destination=new W(i)}}function V(e){j.useDeprecatedSynchronousErrorHandling?function Q(e){j.useDeprecatedSynchronousErrorHandling&&b&&(b.errorThrown=!0,b.error=e)}(e):re(e)}function T(e,n){const{onStoppedNotification:t}=j;t&&X.setTimeout(()=>t(e,n))}const R={closed:!0,next:U,error:function P(e){throw e},complete:U},E="function"==typeof Symbol&&Symbol.observable||"@@observable";function M(e){return e}function O(e){return 0===e.length?M:1===e.length?e[0]:function(t){return e.reduce((r,i)=>i(r),t)}}let B=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new e;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function oe(e){return e&&e instanceof F||function ae(e){return e&&ce(e.next)&&ce(e.error)&&ce(e.complete)}(e)&&Ce(e)}(t)?t:new J(t,r,i);return Y(()=>{const{operator:d,source:p}=this;s.add(d?d.call(s,p):p?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=ue(r))((i,s)=>{const d=new J({next:p=>{try{t(p)}catch(v){s(v),d.unsubscribe()}},error:s,complete:i});this.subscribe(d)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[E](){return this}pipe(...t){return O(t)(this)}toPromise(t){return new(t=ue(t))((r,i)=>{let s;this.subscribe(d=>s=d,d=>i(d),()=>r(s))})}}return e.create=n=>new e(n),e})();function ue(e){var n;return null!==(n=e??j.Promise)&&void 0!==n?n:Promise}const de=Se(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let te=(()=>{class e extends B{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new xe(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new de}next(t){Y(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Y(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Y(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?be:(this.currentObservers=null,s.push(t),new ve(()=>{this.currentObservers=null,ye(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new B;return t.source=this,t}}return e.create=(n,t)=>new xe(n,t),e})();class xe extends te{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,n)}error(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,n)}complete(){var n,t;null===(t=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===t||t.call(n)}_subscribe(n){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(n))&&void 0!==r?r:be}}function fe(e){return ce(e?.lift)}function ge(e){return n=>{if(fe(n))return n.lift(function(t){try{return e(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function we(e,n,t,r,i){return new Te(e,n,t,r,i)}class Te extends F{constructor(n,t,r,i,s,d){super(n),this.onFinalize=s,this.shouldUnsubscribe=d,this._next=t?function(p){try{t(p)}catch(v){n.error(v)}}:super._next,this._error=i?function(p){try{i(p)}catch(v){n.error(v)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(p){n.error(p)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function Ae(e,n){return ge((t,r)=>{let i=0;t.subscribe(we(r,s=>{r.next(e.call(n,s,i++))}))})}function Qn(e){return this instanceof Qn?(this.v=e,this):new Qn(e)}function $t(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(e,n||[]),s=[];return i={},d("next"),d("throw"),d("return"),i[Symbol.asyncIterator]=function(){return this},i;function d(k){r[k]&&(i[k]=function(H){return new Promise(function(ne,pe){s.push([k,H,ne,pe])>1||p(k,H)})})}function p(k,H){try{!function v(k){k.value instanceof Qn?Promise.resolve(k.value.v).then(_,C):S(s[0][2],k)}(r[k](H))}catch(ne){S(s[0][3],ne)}}function _(k){p("next",k)}function C(k){p("throw",k)}function S(k,H){k(H),s.shift(),s.length&&p(s[0][0],s[0][1])}}function On(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function hn(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=e[s]&&function(d){return new Promise(function(p,v){!function i(s,d,p,v){Promise.resolve(v).then(function(_){s({value:_,done:p})},d)}(p,v,(d=e[s](d)).done,d.value)})}}}const fr=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function tt(e){return ce(e?.then)}function it(e){return ce(e[E])}function at(e){return Symbol.asyncIterator&&ce(e?.[Symbol.asyncIterator])}function je(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const ht=function vt(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Pt(e){return ce(e?.[ht])}function tn(e){return $t(this,arguments,function*(){const t=e.getReader();try{for(;;){const{value:r,done:i}=yield Qn(t.read());if(i)return yield Qn(void 0);yield yield Qn(r)}}finally{t.releaseLock()}})}function In(e){return ce(e?.getReader)}function Dn(e){if(e instanceof B)return e;if(null!=e){if(it(e))return function or(e){return new B(n=>{const t=e[E]();if(ce(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(fr(e))return function mi(e){return new B(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}(e);if(tt(e))return function sr(e){return new B(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,re)})}(e);if(at(e))return ra(e);if(Pt(e))return function Ji(e){return new B(n=>{for(const t of e)if(n.next(t),n.closed)return;n.complete()})}(e);if(In(e))return function Yl(e){return ra(tn(e))}(e)}throw je(e)}function ra(e){return new B(n=>{(function xs(e,n){var t,r,i,s;return function _t(e,n,t,r){return new(t||(t=Promise))(function(s,d){function p(C){try{_(r.next(C))}catch(S){d(S)}}function v(C){try{_(r.throw(C))}catch(S){d(S)}}function _(C){C.done?s(C.value):function i(s){return s instanceof t?s:new t(function(d){d(s)})}(C.value).then(p,v)}_((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function*(){try{for(t=On(e);!(r=yield t.next()).done;)if(n.next(r.value),n.closed)return}catch(d){i={error:d}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}n.complete()})})(e,n).catch(t=>n.error(t))})}function Sa(e,n,t,r=0,i=!1){const s=n.schedule(function(){t(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(s),!i)return s}function ua(e,n,t=1/0){return ce(n)?ua((r,i)=>Ae((s,d)=>n(r,s,i,d))(Dn(e(r,i))),t):("number"==typeof n&&(t=n),ge((r,i)=>function qa(e,n,t,r,i,s,d,p){const v=[];let _=0,C=0,S=!1;const k=()=>{S&&!v.length&&!_&&n.complete()},H=pe=>_<r?ne(pe):v.push(pe),ne=pe=>{s&&n.next(pe),_++;let Me=!1;Dn(t(pe,C++)).subscribe(we(n,Re=>{i?.(Re),s?H(Re):n.next(Re)},()=>{Me=!0},void 0,()=>{if(Me)try{for(_--;v.length&&_<r;){const Re=v.shift();d?Sa(n,d,()=>ne(Re)):ne(Re)}k()}catch(Re){n.error(Re)}}))};return e.subscribe(we(n,H,()=>{S=!0,k()})),()=>{p?.()}}(r,i,e,t)))}function Xs(e=1/0){return ua(M,e)}const La=new B(e=>e.complete());function lc(e){return e&&ce(e.schedule)}function Of(e){return e[e.length-1]}function ku(e){return ce(Of(e))?e.pop():void 0}function td(e){return lc(Of(e))?e.pop():void 0}function ug(e,n=0){return ge((t,r)=>{t.subscribe(we(r,i=>Sa(r,e,()=>r.next(i),n),()=>Sa(r,e,()=>r.complete(),n),i=>Sa(r,e,()=>r.error(i),n)))})}function cg(e,n=0){return ge((t,r)=>{r.add(e.schedule(()=>t.subscribe(r),n))})}function $s(e,n){if(!e)throw new Error("Iterable cannot be null");return new B(t=>{Sa(t,n,()=>{const r=e[Symbol.asyncIterator]();Sa(t,n,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Pn(e,n){return n?function ai(e,n){if(null!=e){if(it(e))return function dg(e,n){return Dn(e).pipe(cg(n),ug(n))}(e,n);if(fr(e))return function Jy(e,n){return new B(t=>{let r=0;return n.schedule(function(){r===e.length?t.complete():(t.next(e[r++]),t.closed||this.schedule())})})}(e,n);if(tt(e))return function qy(e,n){return Dn(e).pipe(cg(n),ug(n))}(e,n);if(at(e))return $s(e,n);if(Pt(e))return function Tt(e,n){return new B(t=>{let r;return Sa(t,n,()=>{r=e[ht](),Sa(t,n,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(d){return void t.error(d)}s?t.complete():t.next(i)},0,!0)}),()=>ce(r?.return)&&r.return()})}(e,n);if(In(e))return function Zi(e,n){return $s(tn(e),n)}(e,n)}throw je(e)}(e,n):Dn(e)}function Oa(...e){const n=td(e),t=function lg(e,n){return"number"==typeof Of(e)?e.pop():n}(e,1/0),r=e;return r.length?1===r.length?Dn(r[0]):Xs(t)(Pn(r,n)):La}function kf(e={}){const{connector:n=(()=>new te),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return s=>{let d,p,v,_=0,C=!1,S=!1;const k=()=>{p?.unsubscribe(),p=void 0},H=()=>{k(),d=v=void 0,C=S=!1},ne=()=>{const pe=d;H(),pe?.unsubscribe()};return ge((pe,Me)=>{_++,!S&&!C&&k();const Re=v=v??n();Me.add(()=>{_--,0===_&&!S&&!C&&(p=wn(ne,i))}),Re.subscribe(Me),!d&&_>0&&(d=new J({next:Fe=>Re.next(Fe),error:Fe=>{S=!0,k(),p=wn(H,t,Fe),Re.error(Fe)},complete:()=>{C=!0,k(),p=wn(H,r),Re.complete()}}),Dn(pe).subscribe(d))})(s)}}function wn(e,n,...t){if(!0===n)return void e();if(!1===n)return;const r=new J({next:()=>{r.unsubscribe(),e()}});return n(...t).subscribe(r)}function _n(e){for(let n in e)if(e[n]===_n)return n;throw Error("Could not find renamed property on target object.")}function Mr(e,n){for(const t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function Ut(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Ut).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const t=n.indexOf("\n");return-1===t?n:n.substring(0,t)}function nd(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const Dl=_n({__forward_ref__:_n});function Wr(e){return e.__forward_ref__=Wr,e.toString=function(){return Ut(this())},e}function qt(e){return Nf(e)?e():e}function Nf(e){return"function"==typeof e&&e.hasOwnProperty(Dl)&&e.__forward_ref__===Wr}class Jt extends Error{constructor(n,t){super(function Xl(e,n){return`NG0${Math.abs(e)}${n?": "+n.trim():""}`}(n,t)),this.code=n}}function Pr(e){return"string"==typeof e?e:null==e?"":String(e)}function id(e,n){throw new Jt(-201,!1)}function Jo(e,n){null==e&&function Ii(e,n,t,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${t} ${r} ${n} <=Actual]`))}(n,e,null,"!=")}function yn(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function pr(e){return{providers:e.providers||[],imports:e.imports||[]}}function cc(e){return Is(e,dc)||Is(e,za)}function Is(e,n){return e.hasOwnProperty(n)?e[n]:null}function zf(e){return e&&(e.hasOwnProperty(dh)||e.hasOwnProperty(Vo))?e[dh]:null}const dc=_n({\u0275prov:_n}),dh=_n({\u0275inj:_n}),za=_n({ngInjectableDef:_n}),Vo=_n({ngInjectorDef:_n});var Jn=(()=>((Jn=Jn||{})[Jn.Default=0]="Default",Jn[Jn.Host=1]="Host",Jn[Jn.Self=2]="Self",Jn[Jn.SkipSelf=4]="SkipSelf",Jn[Jn.Optional=8]="Optional",Jn))();let hh;function es(e){const n=hh;return hh=e,n}function fg(e,n,t){const r=cc(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Jn.Optional?null:void 0!==n?n:void id(Ut(e))}function Tl(e){return{toString:e}.toString()}var ts=(()=>((ts=ts||{})[ts.OnPush=0]="OnPush",ts[ts.Default=1]="Default",ts))(),zo=(()=>{return(e=zo||(zo={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",zo;var e})();const Mi=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),uo={},ei=[],hc=_n({\u0275cmp:_n}),ad=_n({\u0275dir:_n}),ql=_n({\u0275pipe:_n}),fc=_n({\u0275mod:_n}),Ho=_n({\u0275fac:_n}),Nu=_n({__NG_ELEMENT_ID__:_n});let pc=0;function qn(e){return Tl(()=>{const t=!0===e.standalone,r={},i={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===ts.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&e.dependencies||null,getStandaloneInjector:null,selectors:e.selectors||ei,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||zo.Emulated,id:"c"+pc++,styles:e.styles||ei,_:null,setInput:null,schemas:e.schemas||null,tView:null},s=e.dependencies,d=e.features;return i.inputs=Jl(e.inputs,r),i.outputs=Jl(e.outputs),d&&d.forEach(p=>p(i)),i.directiveDefs=s?()=>("function"==typeof s?s():s).map(Gf).filter(Uo):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(va).filter(Uo):null,i})}function Gf(e){return Ti(e)||pa(e)}function Uo(e){return null!==e}function er(e){return Tl(()=>({type:e.type,bootstrap:e.bootstrap||ei,declarations:e.declarations||ei,imports:e.imports||ei,exports:e.exports||ei,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Jl(e,n){if(null==e)return uo;const t={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,n&&(n[i]=s)}return t}const Sn=qn;function Ti(e){return e[hc]||null}function pa(e){return e[ad]||null}function va(e){return e[ql]||null}function Do(e,n){const t=e[fc]||null;if(!t&&!0===n)throw new Error(`Type ${Ut(e)} does not have '\u0275mod' property.`);return t}function ea(e){return Array.isArray(e)&&"object"==typeof e[1]}function co(e){return Array.isArray(e)&&!0===e[1]}function Ne(e){return 0!=(8&e.flags)}function Ge(e){return 2==(2&e.flags)}function Le(e){return 1==(1&e.flags)}function ze(e){return null!==e.template}function Ze(e){return 0!=(256&e[2])}function To(e,n){return e.hasOwnProperty(Ho)?e[Ho]:null}class jf{constructor(n,t,r){this.previousValue=n,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Xi(){return is}function is(e){return e.type.prototype.ngOnChanges&&(e.setInput=ma),ga}function ga(){const e=yg(this),n=e?.current;if(n){const t=e.previous;if(t===uo)e.previous=n;else for(let r in n)t[r]=n[r];e.current=null,this.ngOnChanges(n)}}function ma(e,n,t,r){const i=yg(e)||function Zf(e,n){return e[_g]=n}(e,{previous:uo,current:null}),s=i.current||(i.current={}),d=i.previous,p=this.declaredInputs[t],v=d[p];s[p]=new jf(v&&v.currentValue,n,d===uo),e[r]=n}Xi.ngInherit=!0;const _g="__ngSimpleChanges__";function yg(e){return e[_g]||null}function Ga(e){for(;Array.isArray(e);)e=e[0];return e}function $f(e,n){return Ga(n[e])}function ki(e,n){return Ga(n[e.index])}function yi(e,n){return e.data[n]}function as(e,n){const t=n[e];return ea(t)?t:t[0]}function bg(e){return 64==(64&e[2])}function fo(e,n){return null==n?null:e[n]}function Dw(e){e[18]=0}function u0(e,n){e[5]+=n;let t=e,r=e[3];for(;null!==r&&(1===n&&1===t[5]||-1===n&&0===t[5]);)r[5]+=n,t=r,r=r[3]}const Or={lFrame:Aw(null),bindingsEnabled:!0};function h0(){return Or.bindingsEnabled}function cn(){return Or.lFrame.lView}function fi(){return Or.lFrame.tView}function Tr(e){return Or.lFrame.contextLView=e,e[8]}function Er(e){return Or.lFrame.contextLView=null,e}function Ei(){let e=ka();for(;null!==e&&64===e.type;)e=e.parent;return e}function ka(){return Or.lFrame.currentTNode}function Wo(e,n){const t=Or.lFrame;t.currentTNode=e,t.isParent=n}function Cg(){return Or.lFrame.isParent}function p0(){Or.lFrame.isParent=!1}function jo(){const e=Or.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function vh(){return Or.lFrame.bindingIndex++}function Eo(e){const n=Or.lFrame,t=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,t}function EP(e,n){const t=Or.lFrame;t.bindingIndex=t.bindingRootIndex=e,g0(n)}function g0(e){Or.lFrame.currentDirectiveIndex=e}function Kf(e){const n=Or.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}function Ew(){return Or.lFrame.currentQueryIndex}function Qf(e){Or.lFrame.currentQueryIndex=e}function IP(e){const n=e[1];return 2===n.type?n.declTNode:1===n.type?e[6]:null}function wg(e,n,t){if(t&Jn.SkipSelf){let i=n,s=e;for(;!(i=i.parent,null!==i||t&Jn.Host||(i=IP(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;n=i,e=s}const r=Or.lFrame=m0();return r.currentTNode=n,r.lView=e,!0}function ld(e){const n=m0(),t=e[1];Or.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function m0(){const e=Or.lFrame,n=null===e?null:e.child;return null===n?Aw(e):n}function Aw(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function _c(){const e=Or.lFrame;return Or.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Sg=_c;function Dg(){const e=_c();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function os(){return Or.lFrame.selectedIndex}function Hu(e){Or.lFrame.selectedIndex=e}function Ta(){const e=Or.lFrame;return yi(e.tView,e.selectedIndex)}function qf(){Or.lFrame.currentNamespace="svg"}function Mg(e,n){for(let t=n.directiveStart,r=n.directiveEnd;t<r;t++){const s=e.data[t].type.prototype,{ngAfterContentInit:d,ngAfterContentChecked:p,ngAfterViewInit:v,ngAfterViewChecked:_,ngOnDestroy:C}=s;d&&(e.contentHooks||(e.contentHooks=[])).push(-t,d),p&&((e.contentHooks||(e.contentHooks=[])).push(t,p),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(t,p)),v&&(e.viewHooks||(e.viewHooks=[])).push(-t,v),_&&((e.viewHooks||(e.viewHooks=[])).push(t,_),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(t,_)),null!=C&&(e.destroyHooks||(e.destroyHooks=[])).push(t,C)}}function Tg(e,n,t){Lw(e,n,3,t)}function Jf(e,n,t,r){(3&e[2])===t&&Lw(e,n,t,r)}function Eg(e,n){let t=e[2];(3&t)===n&&(t&=2047,t+=1,e[2]=t)}function Lw(e,n,t,r){const s=r??-1,d=n.length-1;let p=0;for(let v=void 0!==r?65535&e[18]:0;v<d;v++)if("number"==typeof n[v+1]){if(p=n[v],null!=r&&p>=r)break}else n[v]<0&&(e[18]+=65536),(p<s||-1==s)&&(tl(e,t,n,v),e[18]=(4294901760&e[18])+v+2),v++}function tl(e,n,t,r){const i=t[r]<0,s=t[r+1],p=e[i?-t[r]:t[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===n){e[2]+=2048;try{s.call(p)}finally{}}}else try{s.call(p)}finally{}}class ep{constructor(n,t,r){this.factory=n,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function np(e,n,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],d=t[r++],p=t[r++];e.setAttribute(n,d,p,s)}else{const s=i,d=t[++r];kw(s)?e.setProperty(n,s,d):e.setAttribute(n,s,d),r++}}return r}function Ow(e){return 3===e||4===e||6===e}function kw(e){return 64===e.charCodeAt(0)}function Ig(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let t=-1;for(let r=0;r<n.length;r++){const i=n[r];"number"==typeof i?t=i:0===t||Nw(e,t,i,null,-1===t||2===t?n[++r]:null)}}return e}function Nw(e,n,t,r,i){let s=0,d=e.length;if(-1===n)d=-1;else for(;s<e.length;){const p=e[s++];if("number"==typeof p){if(p===n){d=-1;break}if(p>n){d=s-1;break}}}for(;s<e.length;){const p=e[s];if("number"==typeof p)break;if(p===t){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==d&&(e.splice(d,0,n),s=d+1),e.splice(s++,0,t),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}function Fw(e){return-1!==e}function mh(e){return 32767&e}function _h(e,n){let t=function NP(e){return e>>16}(e),r=n;for(;t>0;)r=r[15],t--;return r}let _0=!0;function rp(e){const n=_0;return _0=e,n}let FP=0;const au={};function cd(e,n){const t=ap(e,n);if(-1!==t)return t;const r=n[1];r.firstCreatePass&&(e.injectorIndex=n.length,b0(r.data,e),b0(n,null),b0(r.blueprint,null));const i=op(e,n),s=e.injectorIndex;if(Fw(i)){const d=mh(i),p=_h(i,n),v=p[1].data;for(let _=0;_<8;_++)n[s+_]=p[d+_]|v[d+_]}return n[s+8]=i,s}function b0(e,n){e.push(0,0,0,0,0,0,0,0,n)}function ap(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function op(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let t=0,r=null,i=n;for(;null!==i;){if(r=C0(i),null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function dd(e,n,t){!function Bw(e,n,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Nu)&&(r=t[Nu]),null==r&&(r=t[Nu]=FP++);const i=255&r;n.data[e+(i>>5)]|=1<<i}(e,n,t)}function Pg(e,n,t){if(t&Jn.Optional||void 0!==e)return e;id()}function Rg(e,n,t,r){if(t&Jn.Optional&&void 0===r&&(r=null),0==(t&(Jn.Self|Jn.Host))){const i=e[9],s=es(void 0);try{return i?i.get(n,r,t&Jn.Optional):fg(n,r,t&Jn.Optional)}finally{es(s)}}return Pg(r,0,t)}function Vw(e,n,t,r=Jn.Default,i){if(null!==e){if(1024&n[2]){const d=function Hw(e,n,t,r,i){let s=e,d=n;for(;null!==s&&null!==d&&1024&d[2]&&!(256&d[2]);){const p=lp(s,d,t,r|Jn.Self,au);if(p!==au)return p;let v=s.parent;if(!v){const _=d[21];if(_){const C=_.get(t,au,r);if(C!==au)return C}v=C0(d),d=d[15]}s=v}return i}(e,n,t,r,au);if(d!==au)return d}const s=lp(e,n,t,r,au);if(s!==au)return s}return Rg(n,t,r,i)}function lp(e,n,t,r,i){const s=function zw(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(Nu)?e[Nu]:void 0;return"number"==typeof n?n>=0?255&n:Og:n}(t);if("function"==typeof s){if(!wg(n,e,r))return r&Jn.Host?Pg(i,0,r):Rg(n,t,r,i);try{const d=s(r);if(null!=d||r&Jn.Optional)return d;id()}finally{Sg()}}else if("number"==typeof s){let d=null,p=ap(e,n),v=-1,_=r&Jn.Host?n[16][6]:null;for((-1===p||r&Jn.SkipSelf)&&(v=-1===p?op(e,n):n[p+8],-1!==v&&cp(r,!1)?(d=n[1],p=mh(v),n=_h(v,n)):p=-1);-1!==p;){const C=n[1];if(Lg(s,p,C.data)){const S=BP(p,n,t,d,r,_);if(S!==au)return S}v=n[p+8],-1!==v&&cp(r,n[1].data[p+8]===_)&&Lg(s,p,n)?(d=C,p=mh(v),n=_h(v,n)):p=-1}}return i}function BP(e,n,t,r,i,s){const d=n[1],p=d.data[e+8],C=hd(p,d,t,null==r?Ge(p)&&_0:r!=d&&0!=(3&p.type),i&Jn.Host&&s===p);return null!==C?up(n,d,C,p):au}function hd(e,n,t,r,i){const s=e.providerIndexes,d=n.data,p=1048575&s,v=e.directiveStart,C=s>>20,k=i?p+C:e.directiveEnd;for(let H=r?p:p+C;H<k;H++){const ne=d[H];if(H<v&&t===ne||H>=v&&ne.type===t)return H}if(i){const H=d[v];if(H&&ze(H)&&H.type===t)return v}return null}function up(e,n,t,r){let i=e[t];const s=n.data;if(function ca(e){return e instanceof ep}(i)){const d=i;d.resolving&&function e0(e,n){const t=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new Jt(-200,`Circular dependency in DI detected for ${e}${t}`)}(function _i(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Pr(e)}(s[t]));const p=rp(d.canSeeViewProviders);d.resolving=!0;const v=d.injectImpl?es(d.injectImpl):null;wg(e,r,Jn.Default);try{i=e[t]=d.factory(void 0,s,e,r),n.firstCreatePass&&t>=r.directiveStart&&function Rw(e,n,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=n.type.prototype;if(r){const d=is(n);(t.preOrderHooks||(t.preOrderHooks=[])).push(e,d),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e,d)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-e,i),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(e,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e,s))}(t,s[t],n)}finally{null!==v&&es(v),rp(p),d.resolving=!1,Sg()}}return i}function Lg(e,n,t){return!!(t[n+(e>>5)]&1<<e)}function cp(e,n){return!(e&Jn.Self||e&Jn.Host&&n)}class fd{constructor(n,t){this._tNode=n,this._lView=t}get(n,t,r){return Vw(this._tNode,this._lView,n,r,t)}}function Og(){return new fd(Ei(),cn())}function ta(e){return Tl(()=>{const n=e.prototype.constructor,t=n[Ho]||x0(n),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const s=i[Ho]||x0(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function x0(e){return Nf(e)?()=>{const n=x0(qt(e));return n&&n()}:To(e)}function C0(e){const n=e[1],t=n.type;return 2===t?n.declTNode:1===t?e[6]:null}function Ls(e){return function sp(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const t=e.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(Ow(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===n)return t[i+1];i+=2}}}return null}(Ei(),e)}const pd="__parameters__";function vd(e,n,t){return Tl(()=>{const r=function w0(e){return function(...t){if(e){const r=e(...t);for(const i in r)this[i]=r[i]}}}(n);function i(...s){if(this instanceof i)return r.apply(this,s),this;const d=new i(...s);return p.annotation=d,p;function p(v,_,C){const S=v.hasOwnProperty(pd)?v[pd]:Object.defineProperty(v,pd,{value:[]})[pd];for(;S.length<=C;)S.push(null);return(S[C]=S[C]||[]).push(d),v}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class sn{constructor(n,t){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=yn({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ss(e,n){void 0===n&&(n=e);for(let t=0;t<e.length;t++){let r=e[t];Array.isArray(r)?(n===e&&(n=e.slice(0,t)),Ss(r,n)):n!==e&&n.push(r)}return n}function ss(e,n){e.forEach(t=>Array.isArray(t)?ss(t,n):n(t))}function bc(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function Uu(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function fp(e,n){const t=[];for(let r=0;r<e;r++)t.push(n);return t}function Os(e,n,t){let r=Ds(e,n);return r>=0?e[1|r]=t:(r=~r,function jP(e,n,t,r){let i=e.length;if(i==n)e.push(t,r);else if(1===i)e.push(r,e[0]),e[0]=t;else{for(i--,e.push(e[i-1],e[i]);i>n;)e[i]=e[i-2],i--;e[n]=t,e[n+1]=r}}(e,r,n,t)),r}function gd(e,n){const t=Ds(e,n);if(t>=0)return e[1|t]}function Ds(e,n){return function xc(e,n,t){let r=0,i=e.length>>t;for(;i!==r;){const s=r+(i-r>>1),d=e[s<<t];if(n===d)return s<<t;d>n?i=s:r=s+1}return~(i<<t)}(e,n,1)}const yh={},Bg="__NG_DI_FLAG__",pp="ngTempTokenPath",Xw=/\n/gm,Kw="__source";let vp;function bh(e){const n=vp;return vp=e,n}function KP(e,n=Jn.Default){if(void 0===vp)throw new Jt(-203,!1);return null===vp?fg(e,void 0,n):vp.get(e,n&Jn.Optional?null:void 0,n)}function Lt(e,n=Jn.Default){return(function Hf(){return hh}()||KP)(qt(e),n)}function oa(e,n=Jn.Default){return"number"!=typeof n&&(n=0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)),Lt(e,n)}function Vg(e){const n=[];for(let t=0;t<e.length;t++){const r=qt(e[t]);if(Array.isArray(r)){if(0===r.length)throw new Jt(900,!1);let i,s=Jn.Default;for(let d=0;d<r.length;d++){const p=r[d],v=qw(p);"number"==typeof v?-1===v?i=p.token:s|=v:i=p}n.push(Lt(i,s))}else n.push(Lt(r))}return n}function gp(e,n){return e[Bg]=n,e.prototype[Bg]=n,e}function qw(e){return e[Bg]}const _p=gp(vd("Inject",e=>({token:e})),-1),rl=gp(vd("Optional"),8),ou=gp(vd("SkipSelf"),4);let bp,Ug;function Gu(e){return function R0(){if(void 0===Ug&&(Ug=null,Mi.trustedTypes))try{Ug=Mi.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Ug}()?.createHTML(e)||e}class Cc{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class k0 extends Cc{getTypeName(){return"HTML"}}class s2 extends Cc{getTypeName(){return"Style"}}class lS extends Cc{getTypeName(){return"Script"}}class l2 extends Cc{getTypeName(){return"URL"}}class u2 extends Cc{getTypeName(){return"ResourceURL"}}function ks(e){return e instanceof Cc?e.changingThisBreaksApplicationSecurity:e}function il(e,n){const t=function Cp(e){return e instanceof Cc&&e.getTypeName()||null}(e);if(null!=t&&t!==n){if("ResourceURL"===t&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===n}class wp{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const t=(new window.DOMParser).parseFromString(Gu(n),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(n):(t.removeChild(t.firstChild),t)}catch{return null}}}class h2{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const r=this.inertDocument.createElement("body");t.appendChild(r)}}getInertBodyElement(n){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Gu(n),t;const r=this.inertDocument.createElement("body");return r.innerHTML=Gu(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(n){const t=n.attributes;for(let i=t.length-1;0<i;i--){const d=t.item(i).name;("xmlns:ns1"===d||0===d.indexOf("ns1:"))&&n.removeAttribute(d)}let r=n.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const p2=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function jg(e){return(e=String(e)).match(p2)?e:"unsafe:"+e}function Wu(e){const n={};for(const t of e.split(","))n[t]=!0;return n}function Ch(...e){const n={};for(const t of e)for(const r in t)t.hasOwnProperty(r)&&(n[r]=!0);return n}const dS=Wu("area,br,col,hr,img,wbr"),Zg=Wu("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),F0=Wu("rp,rt"),B0=Ch(dS,Ch(Zg,Wu("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ch(F0,Wu("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ch(F0,Zg)),su=Wu("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Yg=Ch(su,Wu("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Wu("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),m2=Wu("script,style,template");class _2{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let t=n.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(n){const t=n.nodeName.toLowerCase();if(!B0.hasOwnProperty(t))return this.sanitizedSomething=!0,!m2.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=n.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),d=s.name,p=d.toLowerCase();if(!Yg.hasOwnProperty(p)){this.sanitizedSomething=!0;continue}let v=s.value;su[p]&&(v=jg(v)),this.buf.push(" ",d,'="',hS(v),'"')}return this.buf.push(">"),!0}endElement(n){const t=n.nodeName.toLowerCase();B0.hasOwnProperty(t)&&!dS.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(n){this.buf.push(hS(n))}checkClobberedElement(n,t){if(t&&(n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return t}}const y2=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,b2=/([^\#-~ |!])/g;function hS(e){return e.replace(/&/g,"&amp;").replace(y2,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(b2,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Xg;function V0(e,n){let t=null;try{Xg=Xg||function cS(e){const n=new h2(e);return function f2(){try{return!!(new window.DOMParser).parseFromString(Gu(""),"text/html")}catch{return!1}}()?new wp(n):n}(e);let r=n?String(n):"";t=Xg.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=Xg.getInertBodyElement(r)}while(r!==s);return Gu((new _2).sanitizeChildren(Sp(t)||t))}finally{if(t){const r=Sp(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function Sp(e){return"content"in e&&function fS(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Ri=(()=>((Ri=Ri||{})[Ri.NONE=0]="NONE",Ri[Ri.HTML=1]="HTML",Ri[Ri.STYLE=2]="STYLE",Ri[Ri.SCRIPT=3]="SCRIPT",Ri[Ri.URL=4]="URL",Ri[Ri.RESOURCE_URL=5]="RESOURCE_URL",Ri))();function $g(e){const n=function Dp(){const e=cn();return e&&e[12]}();return n?n.sanitize(Ri.URL,e)||"":il(e,"URL")?ks(e):jg(Pr(e))}const z0=new sn("ENVIRONMENT_INITIALIZER"),wh=new sn("INJECTOR",-1),_S=new sn("INJECTOR_DEF_TYPES");class Mp{get(n,t=yh){if(t===yh){const r=new Error(`NullInjectorError: No provider for ${Ut(n)}!`);throw r.name="NullInjectorError",r}return t}}function H0(...e){return{\u0275providers:yS(0,e)}}function yS(e,...n){const t=[],r=new Set;let i;return ss(n,s=>{const d=s;Tp(d,t,[],r)&&(i||(i=[]),i.push(d))}),void 0!==i&&bS(i,t),t}function bS(e,n){for(let t=0;t<e.length;t++){const{providers:i}=e[t];ss(i,s=>{n.push(s)})}}function Tp(e,n,t,r){if(!(e=qt(e)))return!1;let i=null,s=zf(e);const d=!s&&Ti(e);if(s||d){if(d&&!d.standalone)return!1;i=e}else{const v=e.ngModule;if(s=zf(v),!s)return!1;i=v}const p=r.has(i);if(d){if(p)return!1;if(r.add(i),d.dependencies){const v="function"==typeof d.dependencies?d.dependencies():d.dependencies;for(const _ of v)Tp(_,n,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!p){let _;r.add(i);try{ss(s.imports,C=>{Tp(C,n,t,r)&&(_||(_=[]),_.push(C))})}finally{}void 0!==_&&bS(_,n)}if(!p){const _=To(i)||(()=>new i);n.push({provide:i,useFactory:_,deps:ei},{provide:_S,useValue:i,multi:!0},{provide:z0,useValue:()=>Lt(i),multi:!0})}const v=s.providers;null==v||p||ss(v,C=>{n.push(C)})}}return i!==e&&void 0!==e.providers}const xS=_n({provide:String,useValue:_n});function bd(e){return null!==e&&"object"==typeof e&&xS in e}function ju(e){return"function"==typeof e}const qg=new sn("Set Injector scope."),Jg={},em={};let to;function tm(){return void 0===to&&(to=new Mp),to}class Zu{}class CS extends Zu{constructor(n,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Dh(n,d=>this.processProvider(d)),this.records.set(wh,Sc(void 0,this)),i.has("environment")&&this.records.set(Zu,Sc(void 0,this));const s=this.records.get(qg);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(_S.multi,ei,Jn.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();for(const n of this._onDestroyHooks)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(n){this._onDestroyHooks.push(n)}runInContext(n){this.assertNotDestroyed();const t=bh(this),r=es(void 0);try{return n()}finally{bh(t),es(r)}}get(n,t=yh,r=Jn.Default){this.assertNotDestroyed();const i=bh(this),s=es(void 0);try{if(!(r&Jn.SkipSelf)){let p=this.records.get(n);if(void 0===p){const v=function D2(e){return"function"==typeof e||"object"==typeof e&&e instanceof sn}(n)&&cc(n);p=v&&this.injectableDefInScope(v)?Sc(nm(n),Jg):null,this.records.set(n,p)}if(null!=p)return this.hydrate(n,p)}return(r&Jn.Self?tm():this.parent).get(n,t=r&Jn.Optional&&t===yh?null:t)}catch(d){if("NullInjectorError"===d.name){if((d[pp]=d[pp]||[]).unshift(Ut(n)),i)throw d;return function mp(e,n,t,r){const i=e[pp];throw n[Kw]&&i.unshift(n[Kw]),e.message=function QP(e,n,t,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=Ut(n);if(Array.isArray(n))i=n.map(Ut).join(" -> ");else if("object"==typeof n){let s=[];for(let d in n)if(n.hasOwnProperty(d)){let p=n[d];s.push(d+":"+("string"==typeof p?JSON.stringify(p):Ut(p)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${e.replace(Xw,"\n  ")}`}("\n"+e.message,i,t,r),e.ngTokenPath=i,e[pp]=null,e}(d,n,"R3InjectorError",this.source)}throw d}finally{es(s),bh(i)}}resolveInjectorInitializers(){const n=bh(this),t=es(void 0);try{const r=this.get(z0.multi,ei,Jn.Self);for(const i of r)i()}finally{bh(n),es(t)}}toString(){const n=[],t=this.records;for(const r of t.keys())n.push(Ut(r));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Jt(205,!1)}processProvider(n){let t=ju(n=qt(n))?n:qt(n&&n.provide);const r=function wS(e){return bd(e)?Sc(void 0,e.useValue):Sc(SS(e),Jg)}(n);if(ju(n)||!0!==n.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Sc(void 0,Jg,!0),i.factory=()=>Vg(i.multi),this.records.set(t,i)),t=n,i.multi.push(n)}this.records.set(t,r)}hydrate(n,t){return t.value===Jg&&(t.value=em,t.value=t.factory()),"object"==typeof t.value&&t.value&&function W0(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(n){if(!n.providedIn)return!1;const t=qt(n.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function nm(e){const n=cc(e),t=null!==n?n.factory:To(e);if(null!==t)return t;if(e instanceof sn)throw new Jt(204,!1);if(e instanceof Function)return function w2(e){const n=e.length;if(n>0)throw fp(n,"?"),new Jt(204,!1);const t=function Va(e){const n=e&&(e[dc]||e[za]);if(n){const t=function Da(e){if(e.hasOwnProperty("name"))return e.name;const n=(""+e).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),n}return null}(e);return null!==t?()=>t.factory(e):()=>new e}(e);throw new Jt(204,!1)}function SS(e,n,t){let r;if(ju(e)){const i=qt(e);return To(i)||nm(i)}if(bd(e))r=()=>qt(e.useValue);else if(function wc(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...Vg(e.deps||[]));else if(function Sh(e){return!(!e||!e.useExisting)}(e))r=()=>Lt(qt(e.useExisting));else{const i=qt(e&&(e.useClass||e.provide));if(!function S2(e){return!!e.deps}(e))return To(i)||nm(i);r=()=>new i(...Vg(e.deps))}return r}function Sc(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function Ep(e){return!!e.\u0275providers}function Dh(e,n){for(const t of e)Array.isArray(t)?Dh(t,n):Ep(t)?Dh(t.\u0275providers,n):n(t)}class rm{}class M2{resolveComponentFactory(n){throw function MS(e){const n=Error(`No component factory found for ${Ut(e)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=e,n}(n)}}let xd=(()=>{class e{}return e.NULL=new M2,e})();function ES(){return Mh(Ei(),cn())}function Mh(e,n){return new Nr(ki(e,n))}let Nr=(()=>{class e{constructor(t){this.nativeElement=t}}return e.__NG_ELEMENT_ID__=ES,e})();function T2(e){return e instanceof Nr?e.nativeElement:e}class Ap{}let lu=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>function E2(){const e=cn(),t=as(Ei().index,e);return(ea(t)?t:e)[11]}(),e})(),A2=(()=>{class e{}return e.\u0275prov=yn({token:e,providedIn:"root",factory:()=>null}),e})();class Dc{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const AS=new Dc("14.2.4"),j0={};function Cd(e){return e.ngOriginalError}class uu{constructor(){this._console=console}handleError(n){const t=this._findOriginalError(n);this._console.error("ERROR",n),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(n){let t=n&&Cd(n);for(;t&&Cd(t);)t=Cd(t);return t||null}}const J0=new Map;let B2=0;const lm="__ngContext__";function Io(e,n){ea(n)?(e[lm]=n[20],function eb(e){J0.set(e[20],e)}(n)):e[lm]=n}function cu(e){return e instanceof Function?e():e}var us=(()=>((us=us||{})[us.Important=1]="Important",us[us.DashCase=2]="DashCase",us))();function db(e,n){return undefined(e,n)}function Rp(e){const n=e[3];return co(n)?n[3]:n}function hb(e){return Lp(e[13])}function fb(e){return Lp(e[4])}function Lp(e){for(;null!==e&&!co(e);)e=e[4];return e}function Ph(e,n,t,r,i){if(null!=r){let s,d=!1;co(r)?s=r:ea(r)&&(d=!0,r=r[0]);const p=Ga(r);0===e&&null!==t?null==i?yb(n,t,p):Tc(n,t,p,i||null,!0):1===e&&null!==t?Tc(n,t,p,i||null,!0):2===e?function YS(e,n,t){const r=fm(e,n);r&&function tR(e,n,t,r){e.removeChild(n,t,r)}(e,r,n,t)}(n,p,d):3===e&&n.destroyNode(p),null!=s&&function iR(e,n,t,r,i){const s=t[7];s!==Ga(t)&&Ph(n,e,r,s,i);for(let p=10;p<t.length;p++){const v=t[p];wd(v[1],v,e,n,r,s)}}(n,e,s,t,i)}}function vb(e,n,t){return e.createElement(n,t)}function VS(e,n){const t=e[9],r=t.indexOf(n),i=n[3];512&n[2]&&(n[2]&=-513,u0(i,-1)),t.splice(r,1)}function gb(e,n){if(e.length<=10)return;const t=10+n,r=e[t];if(r){const i=r[17];null!==i&&i!==e&&VS(i,r),n>0&&(e[t-1][4]=r[4]);const s=Uu(e,10+n);!function Y2(e,n){wd(e,n,n[11],2,null,null),n[0]=null,n[6]=null}(r[1],r);const d=s[19];null!==d&&d.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function zS(e,n){if(!(128&n[2])){const t=n[11];t.destroyNode&&wd(e,n,t,3,null,null),function K2(e){let n=e[13];if(!n)return mb(e[1],e);for(;n;){let t=null;if(ea(n))t=n[13];else{const r=n[10];r&&(t=r)}if(!t){for(;n&&!n[4]&&n!==e;)ea(n)&&mb(n[1],n),n=n[3];null===n&&(n=e),ea(n)&&mb(n[1],n),t=n&&n[4]}n=t}}(n)}}function mb(e,n){if(!(128&n[2])){n[2]&=-65,n[2]|=128,function eR(e,n){let t;if(null!=e&&null!=(t=e.destroyHooks))for(let r=0;r<t.length;r+=2){const i=n[t[r]];if(!(i instanceof ep)){const s=t[r+1];if(Array.isArray(s))for(let d=0;d<s.length;d+=2){const p=i[s[d]],v=s[d+1];try{v.call(p)}finally{}}else try{s.call(i)}finally{}}}}(e,n),function J2(e,n){const t=e.cleanup,r=n[7];let i=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const d=t[s+1],p="function"==typeof d?d(n):Ga(n[d]),v=r[i=t[s+2]],_=t[s+3];"boolean"==typeof _?p.removeEventListener(t[s],v,_):_>=0?r[i=_]():r[i=-_].unsubscribe(),s+=2}else{const d=r[i=t[s+1]];t[s].call(d)}if(null!==r){for(let s=i+1;s<r.length;s++)(0,r[s])();n[7]=null}}(e,n),1===n[1].type&&n[11].destroy();const t=n[17];if(null!==t&&co(n[3])){t!==n[3]&&VS(t,n);const r=n[19];null!==r&&r.detachView(e)}!function c5(e){J0.delete(e[20])}(n)}}function HS(e,n,t){return function _b(e,n,t){let r=n;for(;null!==r&&40&r.type;)r=(n=r).parent;if(null===r)return t[0];if(2&r.flags){const i=e.data[r.directiveStart].encapsulation;if(i===zo.None||i===zo.Emulated)return null}return ki(r,t)}(e,n.parent,t)}function Tc(e,n,t,r,i){e.insertBefore(n,t,r,i)}function yb(e,n,t){e.appendChild(n,t)}function hm(e,n,t,r,i){null!==r?Tc(e,n,t,r,i):yb(e,n,t)}function fm(e,n){return e.parentNode(n)}function US(e,n,t){return WS(e,n,t)}let WS=function GS(e,n,t){return 40&e.type?ki(e,t):null};function pm(e,n,t,r){const i=HS(e,r,n),s=n[11],p=US(r.parent||n[6],r,n);if(null!=i)if(Array.isArray(t))for(let v=0;v<t.length;v++)hm(s,i,t[v],p,!1);else hm(s,i,t,p,!1)}function vm(e,n){if(null!==n){const t=n.type;if(3&t)return ki(n,e);if(4&t)return xb(-1,e[n.index]);if(8&t){const r=n.child;if(null!==r)return vm(e,r);{const i=e[n.index];return co(i)?xb(-1,i):Ga(i)}}if(32&t)return db(n,e)()||Ga(e[n.index]);{const r=ZS(e,n);return null!==r?Array.isArray(r)?r[0]:vm(Rp(e[16]),r):vm(e,n.next)}}return null}function ZS(e,n){return null!==n?e[16][6].projection[n.projection]:null}function xb(e,n){const t=10+e+1;if(t<n.length){const r=n[t],i=r[1].firstChild;if(null!==i)return vm(r,i)}return n[7]}function Cb(e,n,t,r,i,s,d){for(;null!=t;){const p=r[t.index],v=t.type;if(d&&0===n&&(p&&Io(Ga(p),r),t.flags|=4),64!=(64&t.flags))if(8&v)Cb(e,n,t.child,r,i,s,!1),Ph(n,e,i,p,s);else if(32&v){const _=db(t,r);let C;for(;C=_();)Ph(n,e,i,C,s);Ph(n,e,i,p,s)}else 16&v?XS(e,n,r,t,i,s):Ph(n,e,i,p,s);t=d?t.projectionNext:t.next}}function wd(e,n,t,r,i,s){Cb(t,r,e.firstChild,n,i,s,!1)}function XS(e,n,t,r,i,s){const d=t[16],v=d[6].projection[r.projection];if(Array.isArray(v))for(let _=0;_<v.length;_++)Ph(n,e,i,v[_],s);else Cb(e,n,v,d[3],i,s,!0)}function $S(e,n,t){e.setAttribute(n,"style",t)}function Yu(e,n,t){""===t?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}function gm(e,n,t){let r=e.length;for(;;){const i=e.indexOf(n,t);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const s=n.length;if(i+s===r||e.charCodeAt(i+s)<=32)return i}t=i+1}}const mm="ng-template";function KS(e,n,t){let r=0;for(;r<e.length;){let i=e[r++];if(t&&"class"===i){if(i=e[r],-1!==gm(i.toLowerCase(),n,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===n)return!0;return!1}}return!1}function wb(e){return 4===e.type&&e.value!==mm}function QS(e,n,t){return n===(4!==e.type||t?e.value:mm)}function oR(e,n,t){let r=4;const i=e.attrs||[],s=function lR(e){for(let n=0;n<e.length;n++)if(Ow(e[n]))return n;return e.length}(i);let d=!1;for(let p=0;p<n.length;p++){const v=n[p];if("number"!=typeof v){if(!d)if(4&r){if(r=2|1&r,""!==v&&!QS(e,v,t)||""===v&&1===n.length){if(al(r))return!1;d=!0}}else{const _=8&r?v:n[++p];if(8&r&&null!==e.attrs){if(!KS(e.attrs,_,t)){if(al(r))return!1;d=!0}continue}const S=sR(8&r?"class":v,i,wb(e),t);if(-1===S){if(al(r))return!1;d=!0;continue}if(""!==_){let k;k=S>s?"":i[S+1].toLowerCase();const H=8&r?k:null;if(H&&-1!==gm(H,_,0)||2&r&&_!==k){if(al(r))return!1;d=!0}}}}else{if(!d&&!al(r)&&!al(v))return!1;if(d&&al(v))continue;d=!1,r=v|1&r}}return al(r)||d}function al(e){return 0==(1&e)}function sR(e,n,t,r){if(null===n)return-1;let i=0;if(r||!t){let s=!1;for(;i<n.length;){const d=n[i];if(d===e)return i;if(3===d||6===d)s=!0;else{if(1===d||2===d){let p=n[++i];for(;"string"==typeof p;)p=n[++i];continue}if(4===d)break;if(0===d){i+=4;continue}}i+=s?1:2}return-1}return function uR(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){const r=e[t];if("number"==typeof r)return-1;if(r===n)return t;t++}return-1}(n,e)}function qS(e,n,t=!1){for(let r=0;r<n.length;r++)if(oR(e,n[r],t))return!0;return!1}function cR(e,n){e:for(let t=0;t<n.length;t++){const r=n[t];if(e.length===r.length){for(let i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function JS(e,n){return e?":not("+n.trim()+")":n}function dR(e){let n=e[0],t=1,r=2,i="",s=!1;for(;t<e.length;){let d=e[t];if("string"==typeof d)if(2&r){const p=e[++t];i+="["+d+(p.length>0?'="'+p+'"':"")+"]"}else 8&r?i+="."+d:4&r&&(i+=" "+d);else""!==i&&!al(d)&&(n+=JS(s,i),i=""),r=d,s=s||!al(r);t++}return""!==i&&(n+=JS(s,i)),n}const zr={};function Et(e){Rh(fi(),cn(),os()+e,!1)}function Rh(e,n,t,r){if(!r)if(3==(3&n[2])){const s=e.preOrderCheckHooks;null!==s&&Tg(n,s,t)}else{const s=e.preOrderHooks;null!==s&&Jf(n,s,0,t)}Hu(t)}function nD(e,n=null,t=null,r){const i=rD(e,n,t,r);return i.resolveInjectorInitializers(),i}function rD(e,n=null,t=null,r,i=new Set){const s=[t||ei,H0(e)];return r=r||("object"==typeof e?void 0:Ut(e)),new CS(s,n||tm(),r||null,i)}let Wa=(()=>{class e{static create(t,r){if(Array.isArray(t))return nD({name:""},r,t,"");{const i=t.name??"";return nD({name:i},t.parent,t.providers,i)}}}return e.THROW_IF_NOT_FOUND=yh,e.NULL=new Mp,e.\u0275prov=yn({token:e,providedIn:"any",factory:()=>Lt(wh)}),e.__NG_ELEMENT_ID__=-1,e})();function Xe(e,n=Jn.Default){const t=cn();return null===t?Lt(e,n):Vw(Ei(),t,qt(e),n)}function Xu(){throw new Error("invalid")}function Fp(e,n){return e<<17|n<<2}function Ns(e){return e>>17&32767}function wm(e){return 2|e}function Al(e){return(131068&e)>>2}function Lb(e,n){return-131069&e|n<<2}function Ob(e){return 1|e}function SD(e,n){const t=e.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],s=t[r+1];if(-1!==s){const d=e.data[s];Qf(i),d.contentQueries(2,n[s],s)}}}function Am(e,n,t,r,i,s,d,p,v,_,C){const S=n.blueprint.slice();return S[0]=i,S[2]=76|r,(null!==C||e&&1024&e[2])&&(S[2]|=1024),Dw(S),S[3]=S[15]=e,S[8]=t,S[10]=d||e&&e[10],S[11]=p||e&&e[11],S[12]=v||e&&e[12]||null,S[9]=_||e&&e[9]||null,S[6]=s,S[20]=function RS(){return B2++}(),S[21]=C,S[16]=2==n.type?e[16]:S,S}function Md(e,n,t,r,i){let s=e.data[n];if(null===s)s=function Im(e,n,t,r,i){const s=ka(),d=Cg(),v=e.data[n]=function LR(e,n,t,r,i,s){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,d?s:s&&s.parent,t,n,r,i);return null===e.firstChild&&(e.firstChild=v),null!==s&&(d?null==s.child&&null!==v.parent&&(s.child=v):null===s.next&&(s.next=v)),v}(e,n,t,r,i),function TP(){return Or.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const d=function Js(){const e=Or.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();s.injectorIndex=null===d?-1:d.injectorIndex}return Wo(s,!0),s}function Lh(e,n,t,r){if(0===t)return-1;const i=n.length;for(let s=0;s<t;s++)n.push(r),e.blueprint.push(r),e.data.push(null);return i}function Vb(e,n,t){ld(n);try{const r=e.viewQuery;null!==r&&km(1,r,t);const i=e.template;null!==i&&Oh(e,n,i,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&SD(e,n),e.staticViewQueries&&km(2,e.viewQuery,t);const s=e.components;null!==s&&function PR(e,n){for(let t=0;t<n.length;t++)ZR(e,n[t])}(n,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{n[2]&=-5,Dg()}}function Pm(e,n,t,r){const i=n[2];if(128!=(128&i)){ld(n);try{Dw(n),function Mw(e){return Or.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==t&&Oh(e,n,t,2,r);const d=3==(3&i);if(d){const _=e.preOrderCheckHooks;null!==_&&Tg(n,_,null)}else{const _=e.preOrderHooks;null!==_&&Jf(n,_,0,null),Eg(n,0)}if(function WR(e){for(let n=hb(e);null!==n;n=fb(n)){if(!n[2])continue;const t=n[9];for(let r=0;r<t.length;r++){const i=t[r],s=i[3];0==(512&i[2])&&u0(s,1),i[2]|=512}}}(n),function GR(e){for(let n=hb(e);null!==n;n=fb(n))for(let t=10;t<n.length;t++){const r=n[t],i=r[1];bg(r)&&Pm(i,r,i.template,r[8])}}(n),null!==e.contentQueries&&SD(e,n),d){const _=e.contentCheckHooks;null!==_&&Tg(n,_)}else{const _=e.contentHooks;null!==_&&Jf(n,_,1),Eg(n,1)}!function wD(e,n){const t=e.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)Hu(~i);else{const s=i,d=t[++r],p=t[++r];EP(d,s),p(2,n[s])}}}finally{Hu(-1)}}(e,n);const p=e.components;null!==p&&function IR(e,n){for(let t=0;t<n.length;t++)jR(e,n[t])}(n,p);const v=e.viewQuery;if(null!==v&&km(2,v,r),d){const _=e.viewCheckHooks;null!==_&&Tg(n,_)}else{const _=e.viewHooks;null!==_&&Jf(n,_,2),Eg(n,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[2]&=-41,512&n[2]&&(n[2]&=-513,u0(n[3],-1))}finally{Dg()}}}function Oh(e,n,t,r,i){const s=os(),d=2&r;try{Hu(-1),d&&n.length>22&&Rh(e,n,22,!1),t(r,i)}finally{Hu(s)}}function DD(e,n,t){if(Ne(n)){const i=n.directiveEnd;for(let s=n.directiveStart;s<i;s++){const d=e.data[s];d.contentQueries&&d.contentQueries(1,t[s],s)}}}function zb(e,n,t){!h0()||(function NR(e,n,t,r){const i=t.directiveStart,s=t.directiveEnd;e.firstCreatePass||cd(t,n),Io(r,n);const d=t.initialInputs;for(let p=i;p<s;p++){const v=e.data[p],_=ze(v);_&&zR(n,t,v);const C=up(n,e,p,t);Io(C,n),null!==d&&HR(0,p-i,C,v,0,d),_&&(as(t.index,n)[8]=C)}}(e,n,t,ki(t,n)),128==(128&t.flags)&&function RD(e,n,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,d=function AP(){return Or.lFrame.currentDirectiveIndex}();try{Hu(s);for(let p=r;p<i;p++){const v=e.data[p],_=n[p];g0(p),(null!==v.hostBindings||0!==v.hostVars||null!==v.hostAttrs)&&LD(v,_)}}finally{Hu(-1),g0(d)}}(e,n,t))}function Hb(e,n,t=ki){const r=n.localNames;if(null!==r){let i=n.index+1;for(let s=0;s<r.length;s+=2){const d=r[s+1],p=-1===d?t(n,e):e[d];e[i++]=p}}}function MD(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=Ub(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):n}function Ub(e,n,t,r,i,s,d,p,v,_){const C=22+r,S=C+i,k=function _a(e,n){const t=[];for(let r=0;r<n;r++)t.push(r<e?null:zr);return t}(C,S),H="function"==typeof _?_():_;return k[1]={type:e,blueprint:k,template:t,queries:null,viewQuery:p,declTNode:n,data:k.slice().fill(null,C),bindingStartIndex:C,expandoStartIndex:S,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof d?d():d,firstChild:null,schemas:v,consts:H,incompleteFirstPass:!1}}function ED(e,n,t,r){const i=FD(n);null===t?i.push(r):(i.push(t),e.firstCreatePass&&$b(e).push(r,i.length-1))}function AD(e,n,t){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(n,i):t[r]=[n,i]}return t}function ID(e,n){const r=n.directiveEnd,i=e.data,s=n.attrs,d=[];let p=null,v=null;for(let _=n.directiveStart;_<r;_++){const C=i[_],S=C.inputs,k=null===s||wb(n)?null:UR(S,s);d.push(k),p=AD(S,_,p),v=AD(C.outputs,_,v)}null!==p&&(p.hasOwnProperty("class")&&(n.flags|=16),p.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=d,n.inputs=p,n.outputs=v}function cs(e,n,t,r,i,s,d,p){const v=ki(n,t);let C,_=n.inputs;!p&&null!=_&&(C=_[r])?(Kb(e,t,C,r,i),Ge(n)&&Gb(t,n.index)):3&n.type&&(r=function OR(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=d?d(i,n.value||"",r):i,s.setProperty(v,r,i))}function Gb(e,n){const t=as(n,e);16&t[2]||(t[2]|=32)}function Rm(e,n,t,r){let i=!1;if(h0()){const s=function FR(e,n,t){const r=e.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const d=r[s];qS(t,d.selectors,!1)&&(i||(i=[]),dd(cd(t,n),e,d.type),ze(d)?(OD(e,t),i.unshift(d)):i.push(d))}return i}(e,n,t),d=null===r?null:{"":-1};if(null!==s){i=!0,kD(t,e.data.length,s.length);for(let C=0;C<s.length;C++){const S=s[C];S.providersResolver&&S.providersResolver(S)}let p=!1,v=!1,_=Lh(e,n,s.length,null);for(let C=0;C<s.length;C++){const S=s[C];t.mergedAttrs=Ig(t.mergedAttrs,S.hostAttrs),ND(e,t,n,_,S),VR(_,S,d),null!==S.contentQueries&&(t.flags|=8),(null!==S.hostBindings||null!==S.hostAttrs||0!==S.hostVars)&&(t.flags|=128);const k=S.type.prototype;!p&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(t.index),p=!0),!v&&(k.ngOnChanges||k.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t.index),v=!0),_++}ID(e,t)}d&&function BR(e,n,t){if(n){const r=e.localNames=[];for(let i=0;i<n.length;i+=2){const s=t[n[i+1]];if(null==s)throw new Jt(-301,!1);r.push(n[i],s)}}}(t,r,d)}return t.mergedAttrs=Ig(t.mergedAttrs,t.attrs),i}function jb(e,n,t,r,i,s){const d=s.hostBindings;if(d){let p=e.hostBindingOpCodes;null===p&&(p=e.hostBindingOpCodes=[]);const v=~n.index;(function PD(e){let n=e.length;for(;n>0;){const t=e[--n];if("number"==typeof t&&t<0)return t}return 0})(p)!=v&&p.push(v),p.push(r,i,d)}}function LD(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function OD(e,n){n.flags|=2,(e.components||(e.components=[])).push(n.index)}function VR(e,n,t){if(t){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)t[n.exportAs[r]]=e;ze(n)&&(t[""]=e)}}function kD(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}function ND(e,n,t,r,i){e.data[r]=i;const s=i.factory||(i.factory=To(i.type)),d=new ep(s,ze(i),Xe);e.blueprint[r]=d,t[r]=d,jb(e,n,0,r,Lh(e,t,i.hostVars,zr),i)}function zR(e,n,t){const r=ki(n,e),i=MD(t),s=e[10],d=Om(e,Am(e,i,null,t.onPush?32:16,r,n,s,s.createRenderer(r,t),null,null,null));e[n.index]=d}function hu(e,n,t,r,i,s){const d=ki(e,n);!function Lm(e,n,t,r,i,s,d){if(null==s)e.removeAttribute(n,i,t);else{const p=null==d?Pr(s):d(s,r||"",i);e.setAttribute(n,i,p,t)}}(n[11],d,s,e.value,t,r,i)}function HR(e,n,t,r,i,s){const d=s[n];if(null!==d){const p=r.setInput;for(let v=0;v<d.length;){const _=d[v++],C=d[v++],S=d[v++];null!==p?r.setInput(t,S,_,C):t[C]=S}}}function UR(e,n){let t=null,r=0;for(;r<n.length;){const i=n[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===t&&(t=[]),t.push(i,e[i],n[r+1])),r+=2}else r+=2;else r+=4}return t}function Zb(e,n,t,r){return new Array(e,!0,!1,n,null,0,r,t,null,null)}function jR(e,n){const t=as(n,e);if(bg(t)){const r=t[1];48&t[2]?Pm(r,t,r.template,t[8]):t[5]>0&&Yb(t)}}function Yb(e){for(let r=hb(e);null!==r;r=fb(r))for(let i=10;i<r.length;i++){const s=r[i];if(bg(s))if(512&s[2]){const d=s[1];Pm(d,s,d.template,s[8])}else s[5]>0&&Yb(s)}const t=e[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=as(t[r],e);bg(i)&&i[5]>0&&Yb(i)}}function ZR(e,n){const t=as(n,e),r=t[1];(function YR(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])})(r,t),Vb(r,t,t[8])}function Om(e,n){return e[13]?e[14][4]=n:e[13]=n,e[14]=n,n}function Xb(e){for(;e;){e[2]|=32;const n=Rp(e);if(Ze(e)&&!n)return e;e=n}return null}function Vp(e,n,t,r=!0){const i=n[10];i.begin&&i.begin();try{Pm(e,n,e.template,t)}catch(d){throw r&&VD(n,d),d}finally{i.end&&i.end()}}function km(e,n,t){Qf(0),n(e,t)}function FD(e){return e[7]||(e[7]=[])}function $b(e){return e.cleanup||(e.cleanup=[])}function BD(e,n,t){return(null===e||ze(e))&&(t=function xP(e){for(;Array.isArray(e);){if("object"==typeof e[1])return e;e=e[0]}return null}(t[n.index])),t[11]}function VD(e,n){const t=e[9],r=t?t.get(uu,null):null;r&&r.handleError(n)}function Kb(e,n,t,r,i){for(let s=0;s<t.length;){const d=t[s++],p=t[s++],v=n[d],_=e.data[d];null!==_.setInput?_.setInput(v,i,r,p):v[p]=i}}function $u(e,n,t){const r=$f(n,e);!function BS(e,n,t){e.setValue(n,t)}(e[11],r,t)}function Nm(e,n,t){let r=t?e.styles:null,i=t?e.classes:null,s=0;if(null!==n)for(let d=0;d<n.length;d++){const p=n[d];"number"==typeof p?s=p:1==s?i=nd(i,p):2==s&&(r=nd(r,p+": "+n[++d]+";"))}t?e.styles=r:e.stylesWithoutHost=r,t?e.classes=i:e.classesWithoutHost=i}function Fm(e,n,t,r,i=!1){for(;null!==t;){const s=n[t.index];if(null!==s&&r.push(Ga(s)),co(s))for(let p=10;p<s.length;p++){const v=s[p],_=v[1].firstChild;null!==_&&Fm(v[1],v,_,r)}const d=t.type;if(8&d)Fm(e,n,t.child,r);else if(32&d){const p=db(t,n);let v;for(;v=p();)r.push(v)}else if(16&d){const p=ZS(n,t);if(Array.isArray(p))r.push(...p);else{const v=Rp(n[16]);Fm(v[1],v,p,r,!0)}}t=i?t.projectionNext:t.next}return r}class kh{constructor(n,t){this._lView=n,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,t=n[1];return Fm(t,n,t.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(co(n)){const t=n[8],r=t?t.indexOf(this):-1;r>-1&&(gb(n,r),Uu(t,r))}this._attachedToViewContainer=!1}zS(this._lView[1],this._lView)}onDestroy(n){ED(this._lView[1],this._lView,null,n)}markForCheck(){Xb(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Vp(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Jt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function $2(e,n){wd(e,n,n[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Jt(902,!1);this._appRef=n}}class XR extends kh{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;Vp(n[1],n,n[8],!1)}checkNoChanges(){}get context(){return null}}class Qb extends xd{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const t=Ti(n);return new zp(t,this.ngModule)}}function zD(e){const n=[];for(let t in e)e.hasOwnProperty(t)&&n.push({propName:e[t],templateName:t});return n}class HD{constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,r){const i=this.injector.get(n,j0,r);return i!==j0||t===j0?i:this.parentInjector.get(n,t,r)}}class zp extends rm{constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=function hR(e){return e.map(dR).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return zD(this.componentDef.inputs)}get outputs(){return zD(this.componentDef.outputs)}create(n,t,r,i){let s=(i=i||this.ngModule)instanceof Zu?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const d=s?new HD(n,s):n,p=d.get(Ap,null);if(null===p)throw new Jt(407,!1);const v=d.get(A2,null),_=p.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",S=r?function RR(e,n,t){return e.selectRootElement(n,t===zo.ShadowDom)}(_,r,this.componentDef.encapsulation):vb(p.createRenderer(null,this.componentDef),C,function $R(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(C)),k=this.componentDef.onPush?288:272,H=Ub(0,null,null,1,0,null,null,null,null,null),ne=Am(null,H,null,k,null,null,p,_,v,d,null);let pe,Me;ld(ne);try{const Re=function qR(e,n,t,r,i,s){const d=t[1];t[22]=e;const v=Md(d,22,2,"#host",null),_=v.mergedAttrs=n.hostAttrs;null!==_&&(Nm(v,_,!0),null!==e&&(np(i,e,_),null!==v.classes&&Yu(i,e,v.classes),null!==v.styles&&$S(i,e,v.styles)));const C=r.createRenderer(e,n),S=Am(t,MD(n),null,n.onPush?32:16,t[22],v,r,C,s||null,null,null);return d.firstCreatePass&&(dd(cd(v,t),d,n.type),OD(d,v),kD(v,t.length,1)),Om(t,S),t[22]=S}(S,this.componentDef,ne,p,_);if(S)if(r)np(_,S,["ng-version",AS.full]);else{const{attrs:Fe,classes:Oe}=function eD(e){const n=[],t=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&n.push(s,e[++r]):8===i&&t.push(s);else{if(!al(i))break;i=s}r++}return{attrs:n,classes:t}}(this.componentDef.selectors[0]);Fe&&np(_,S,Fe),Oe&&Oe.length>0&&Yu(_,S,Oe.join(" "))}if(Me=yi(H,22),void 0!==t){const Fe=Me.projection=[];for(let Oe=0;Oe<this.ngContentSelectors.length;Oe++){const Be=t[Oe];Fe.push(null!=Be?Array.from(Be):null)}}pe=function JR(e,n,t,r){const i=t[1],s=function kR(e,n,t){const r=Ei();e.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),ND(e,r,n,Lh(e,n,1,null),t),ID(e,r));const i=up(n,e,r.directiveStart,r);Io(i,n);const s=ki(r,n);return s&&Io(s,n),i}(i,t,n);if(e[8]=t[8]=s,null!==r)for(const p of r)p(s,n);if(n.contentQueries){const p=Ei();n.contentQueries(1,s,p.directiveStart)}const d=Ei();return!i.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(Hu(d.index),jb(t[1],d,0,d.directiveStart,d.directiveEnd,n),LD(n,s)),s}(Re,this.componentDef,ne,[eL]),Vb(H,ne,null)}finally{Dg()}return new QR(this.componentType,pe,Mh(Me,ne),ne,Me)}}class QR extends class DS{}{constructor(n,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new XR(i),this.componentType=n}setInput(n,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[n])){const s=this._rootLView;Kb(s[1],s,i,n,t),Gb(s,this._tNode.index)}}get injector(){return new fd(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function eL(){const e=Ei();Mg(cn()[1],e)}function Xn(e){let n=function UD(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),t=!0;const r=[e];for(;n;){let i;if(ze(e))i=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Jt(903,!1);i=n.\u0275dir}if(i){if(t){r.push(i);const d=e;d.inputs=Bm(e.inputs),d.declaredInputs=Bm(e.declaredInputs),d.outputs=Bm(e.outputs);const p=i.hostBindings;p&&iL(e,p);const v=i.viewQuery,_=i.contentQueries;if(v&&nL(e,v),_&&rL(e,_),Mr(e.inputs,i.inputs),Mr(e.declaredInputs,i.declaredInputs),Mr(e.outputs,i.outputs),ze(i)&&i.data.animation){const C=e.data;C.animation=(C.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let d=0;d<s.length;d++){const p=s[d];p&&p.ngInherit&&p(e),p===Xn&&(t=!1)}}n=Object.getPrototypeOf(n)}!function tL(e){let n=0,t=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=n+=i.hostVars,i.hostAttrs=Ig(i.hostAttrs,t=Ig(t,i.hostAttrs))}}(r)}function Bm(e){return e===uo?{}:e===ei?[]:e}function nL(e,n){const t=e.viewQuery;e.viewQuery=t?(r,i)=>{n(r,i),t(r,i)}:n}function rL(e,n){const t=e.contentQueries;e.contentQueries=t?(r,i,s)=>{n(r,i,s),t(r,i,s)}:n}function iL(e,n){const t=e.hostBindings;e.hostBindings=t?(r,i)=>{n(r,i),t(r,i)}:n}let Hp=null;function Ku(){if(!Hp){const e=Mi.Symbol;if(e&&e.iterator)Hp=e.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<n.length;++t){const r=n[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Hp=r)}}}return Hp}function Nh(e){return!!ex(e)&&(Array.isArray(e)||!(e instanceof Map)&&Ku()in e)}function ex(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function fu(e,n,t){return e[n]=t}function Po(e,n,t){return!Object.is(e[n],t)&&(e[n]=t,!0)}function Rc(e,n,t,r){const i=Po(e,n,t);return Po(e,n+1,r)||i}function Hr(e,n,t,r){const i=cn();return Po(i,vh(),n)&&(fi(),hu(Ta(),i,e,n,t,r)),Hr}function Vh(e,n,t,r){return Po(e,vh(),t)?n+Pr(t)+r:zr}function Td(e,n,t,r,i,s){const p=Rc(e,function zu(){return Or.lFrame.bindingIndex}(),t,i);return Eo(2),p?n+Pr(t)+r+Pr(i)+s:zr}function nr(e,n,t,r,i,s,d,p){const v=cn(),_=fi(),C=e+22,S=_.firstCreatePass?function dL(e,n,t,r,i,s,d,p,v){const _=n.consts,C=Md(n,e,4,d||null,fo(_,p));Rm(n,t,C,fo(_,v)),Mg(n,C);const S=C.tViews=Ub(2,C,r,i,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,_);return null!==n.queries&&(n.queries.template(n,C),S.queries=n.queries.embeddedTView(C)),C}(C,_,v,n,t,r,i,s,d):_.data[C];Wo(S,!1);const k=v[11].createComment("");pm(_,v,k,S),Io(k,v),Om(v,v[C]=Zb(k,v,k,S)),Le(S)&&zb(_,v,S),null!=d&&Hb(v,S,p)}function pi(e){return function Kn(e,n){return e[n]}(function el(){return Or.lFrame.contextLView}(),22+e)}function At(e,n,t){const r=cn();return Po(r,vh(),n)&&cs(fi(),Ta(),r,e,n,r[11],t,!1),At}function nx(e,n,t,r,i){const d=i?"class":"style";Kb(e,t,n.inputs[d],d,r)}function st(e,n,t,r){const i=cn(),s=fi(),d=22+e,p=i[11],v=i[d]=vb(p,n,function Pw(){return Or.lFrame.currentNamespace}()),_=s.firstCreatePass?function hL(e,n,t,r,i,s,d){const p=n.consts,_=Md(n,e,2,i,fo(p,s));return Rm(n,t,_,fo(p,d)),null!==_.attrs&&Nm(_,_.attrs,!1),null!==_.mergedAttrs&&Nm(_,_.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,_),_}(d,s,i,0,n,t,r):s.data[d];Wo(_,!0);const C=_.mergedAttrs;null!==C&&np(p,v,C);const S=_.classes;null!==S&&Yu(p,v,S);const k=_.styles;return null!==k&&$S(p,v,k),64!=(64&_.flags)&&pm(s,i,v,_),0===function ph(){return Or.lFrame.elementDepthCount}()&&Io(v,i),function xg(){Or.lFrame.elementDepthCount++}(),Le(_)&&(zb(s,i,_),DD(s,_,i)),null!==r&&Hb(i,_),st}function dt(){let e=Ei();Cg()?p0():(e=e.parent,Wo(e,!1));const n=e;!function d0(){Or.lFrame.elementDepthCount--}();const t=fi();return t.firstCreatePass&&(Mg(t,e),Ne(e)&&t.queries.elementEnd(e)),null!=n.classesWithoutHost&&function Ag(e){return 0!=(16&e.flags)}(n)&&nx(t,n,cn(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function kP(e){return 0!=(32&e.flags)}(n)&&nx(t,n,cn(),n.stylesWithoutHost,!1),dt}function Rn(e,n,t,r){return st(e,n,t,r),dt(),Rn}function Bi(e,n,t){const r=cn(),i=fi(),s=e+22,d=i.firstCreatePass?function QD(e,n,t,r,i){const s=n.consts,d=fo(s,r),p=Md(n,e,8,"ng-container",d);return null!==d&&Nm(p,d,!0),Rm(n,t,p,fo(s,i)),null!==n.queries&&n.queries.elementStart(n,p),p}(s,i,r,n,t):i.data[s];Wo(d,!0);const p=r[s]=r[11].createComment("");return pm(i,r,p,d),Io(p,r),Le(d)&&(zb(i,r,d),DD(i,d,r)),null!=t&&Hb(r,d),Bi}function Vi(){let e=Ei();const n=fi();return Cg()?p0():(e=e.parent,Wo(e,!1)),n.firstCreatePass&&(Mg(n,e),Ne(e)&&n.queries.elementEnd(e)),Vi}function na(){return cn()}function Gp(e){return!!e&&"function"==typeof e.then}const ix=function rx(e){return!!e&&"function"==typeof e.subscribe};function Yt(e,n,t,r){const i=cn(),s=fi(),d=Ei();return eM(s,i,i[11],d,e,n,0,r),Yt}function zm(e,n){const t=Ei(),r=cn(),i=fi();return eM(i,r,BD(Kf(i.data),t,r),t,e,n),zm}function eM(e,n,t,r,i,s,d,p){const v=Le(r),C=e.firstCreatePass&&$b(e),S=n[8],k=FD(n);let H=!0;if(3&r.type||p){const Me=ki(r,n),Re=p?p(Me):Me,Fe=k.length,Oe=p?nt=>p(Ga(nt[r.index])):r.index;let Be=null;if(!p&&v&&(Be=function JD(e,n,t,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const d=i[s];if(d===t&&i[s+1]===r){const p=n[7],v=i[s+2];return p.length>v?p[v]:null}"string"==typeof d&&(s+=2)}return null}(e,n,i,r.index)),null!==Be)(Be.__ngLastListenerFn__||Be).__ngNextListenerFn__=s,Be.__ngLastListenerFn__=s,H=!1;else{s=nM(r,n,S,s,!1);const nt=t.listen(Re,i,s);k.push(s,nt),C&&C.push(i,Oe,Fe,Fe+1)}}else s=nM(r,n,S,s,!1);const ne=r.outputs;let pe;if(H&&null!==ne&&(pe=ne[i])){const Me=pe.length;if(Me)for(let Re=0;Re<Me;Re+=2){const rt=n[pe[Re]][pe[Re+1]].subscribe(s),Ct=k.length;k.push(s,rt),C&&C.push(i,r.index,Ct,-(Ct+1))}}}function tM(e,n,t,r){try{return!1!==t(r)}catch(i){return VD(e,i),!1}}function nM(e,n,t,r,i){return function s(d){if(d===Function)return r;Xb(2&e.flags?as(e.index,n):n);let v=tM(n,0,r,d),_=s.__ngNextListenerFn__;for(;_;)v=tM(n,0,_,d)&&v,_=_.__ngNextListenerFn__;return i&&!1===v&&(d.preventDefault(),d.returnValue=!1),v}}function zn(e=1){return function Iw(e){return(Or.lFrame.contextLView=function PP(e,n){for(;e>0;)n=n[15],e--;return n}(e,Or.lFrame.contextLView))[8]}(e)}function fL(e,n){let t=null;const r=function _m(e){const n=e.attrs;if(null!=n){const t=n.indexOf(5);if(0==(1&t))return n[t+1]}return null}(e);for(let i=0;i<n.length;i++){const s=n[i];if("*"!==s){if(null===r?qS(e,s,!0):cR(r,s))return i}else t=i}return t}function Ui(e){const n=cn()[16][6];if(!n.projection){const r=n.projection=fp(e?e.length:1,null),i=r.slice();let s=n.child;for(;null!==s;){const d=e?fL(s,e):0;null!==d&&(i[d]?i[d].projectionNext=s:r[d]=s,i[d]=s),s=s.next}}}function jr(e,n=0,t){const r=cn(),i=fi(),s=Md(i,22+e,16,null,t||null);null===s.projection&&(s.projection=n),p0(),64!=(64&s.flags)&&function rR(e,n,t){XS(n[11],0,n,t,HS(e,t,n),US(t.parent||n[6],t,n))}(i,r,s)}function ox(e,n,t,r,i){const s=e[t+1],d=null===n;let p=r?Ns(s):Al(s),v=!1;for(;0!==p&&(!1===v||d);){const C=e[p+1];pM(e[p],n)&&(v=!0,e[p+1]=r?Ob(C):wm(C)),p=r?Ns(C):Al(C)}v&&(e[t+1]=r?wm(s):Ob(s))}function pM(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&Ds(e,n)>=0}const ja={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function pL(e){return e.substring(ja.key,ja.keyEnd)}function sx(e,n){const t=ja.textEnd;return t===n?-1:(n=ja.keyEnd=function lx(e,n,t){for(;n<t&&e.charCodeAt(n)>32;)n++;return n}(e,ja.key=n,t),Pl(e,n,t))}function Pl(e,n,t){for(;n<t&&e.charCodeAt(n)<=32;)n++;return n}function no(e,n,t){return sl(e,n,t,!1),no}function bi(e,n){return sl(e,n,null,!0),bi}function pu(e,n){for(let t=function vM(e){return function Wp(e){ja.key=0,ja.keyEnd=0,ja.value=0,ja.valueEnd=0,ja.textEnd=e.length}(e),sx(e,Pl(e,0,ja.textEnd))}(n);t>=0;t=sx(n,t))Os(e,pL(n),!0)}function sl(e,n,t,r){const i=cn(),s=fi(),d=Eo(2);s.firstUpdatePass&&mM(s,e,d,r),n!==zr&&Po(i,d,n)&&Wm(s,s.data[os()],i,i[11],e,i[d+1]=function dx(e,n){return null==e||("string"==typeof n?e+=n:"object"==typeof e&&(e=Ut(ks(e)))),e}(n,t),r,d)}function gM(e,n){return n>=e.expandoStartIndex}function mM(e,n,t,r){const i=e.data;if(null===i[t+1]){const s=i[os()],d=gM(e,t);Zm(s,r)&&null===n&&!d&&(n=!1),n=function _L(e,n,t,r){const i=Kf(e);let s=r?n.residualClasses:n.residualStyles;if(null===i)0===(r?n.classBindings:n.styleBindings)&&(t=Hh(t=cx(null,e,n,t,r),n.attrs,r),s=null);else{const d=n.directiveStylingLast;if(-1===d||e[d]!==i)if(t=cx(i,e,n,t,r),null===s){let v=function yL(e,n,t){const r=t?n.classBindings:n.styleBindings;if(0!==Al(r))return e[Ns(r)]}(e,n,r);void 0!==v&&Array.isArray(v)&&(v=cx(null,e,n,v[1],r),v=Hh(v,n.attrs,r),function z5(e,n,t,r){e[Ns(t?n.classBindings:n.styleBindings)]=r}(e,n,r,v))}else s=function _M(e,n,t){let r;const i=n.directiveEnd;for(let s=1+n.directiveStylingLast;s<i;s++)r=Hh(r,e[s].hostAttrs,t);return Hh(r,n.attrs,t)}(e,n,r)}return void 0!==s&&(r?n.residualClasses=s:n.residualStyles=s),t}(i,s,n,r),function hM(e,n,t,r,i,s){let d=s?n.classBindings:n.styleBindings,p=Ns(d),v=Al(d);e[r]=t;let C,_=!1;if(Array.isArray(t)){const S=t;C=S[1],(null===C||Ds(S,C)>0)&&(_=!0)}else C=t;if(i)if(0!==v){const k=Ns(e[p+1]);e[r+1]=Fp(k,p),0!==k&&(e[k+1]=Lb(e[k+1],r)),e[p+1]=function pD(e,n){return 131071&e|n<<17}(e[p+1],r)}else e[r+1]=Fp(p,0),0!==p&&(e[p+1]=Lb(e[p+1],r)),p=r;else e[r+1]=Fp(v,0),0===p?p=r:e[v+1]=Lb(e[v+1],r),v=r;_&&(e[r+1]=wm(e[r+1])),ox(e,C,r,!0),ox(e,C,r,!1),function fM(e,n,t,r,i){const s=i?e.residualClasses:e.residualStyles;null!=s&&"string"==typeof n&&Ds(s,n)>=0&&(t[r+1]=Ob(t[r+1]))}(n,C,e,r,s),d=Fp(p,v),s?n.classBindings=d:n.styleBindings=d}(i,s,n,t,d,r)}}function cx(e,n,t,r,i){let s=null;const d=t.directiveEnd;let p=t.directiveStylingLast;for(-1===p?p=t.directiveStart:p++;p<d&&(s=n[p],r=Hh(r,s.hostAttrs,i),s!==e);)p++;return null!==e&&(t.directiveStylingLast=p),r}function Hh(e,n,t){const r=t?1:2;let i=-1;if(null!==n)for(let s=0;s<n.length;s++){const d=n[s];"number"==typeof d?i=d:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Os(e,d,!!t||n[++s]))}return void 0===e?null:e}function Wm(e,n,t,r,i,s,d,p){if(!(3&n.type))return;const v=e.data,_=v[p+1];Rl(function vD(e){return 1==(1&e)}(_)?jm(v,n,t,i,Al(_),d):void 0)||(Rl(s)||function Rb(e){return 2==(2&e)}(_)&&(s=jm(v,null,t,i,p,d)),function aR(e,n,t,r,i){if(n)i?e.addClass(t,r):e.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:us.DashCase;null==i?e.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=us.Important),e.setStyle(t,r,i,s))}}(r,d,$f(os(),t),i,s))}function jm(e,n,t,r,i,s){const d=null===n;let p;for(;i>0;){const v=e[i],_=Array.isArray(v),C=_?v[1]:v,S=null===C;let k=t[i+1];k===zr&&(k=S?ei:void 0);let H=S?gd(k,r):C===r?k:void 0;if(_&&!Rl(H)&&(H=gd(v,r)),Rl(H)&&(p=H,d))return p;const ne=e[i+1];i=d?Ns(ne):Al(ne)}if(null!==n){let v=s?n.residualClasses:n.residualStyles;null!=v&&(p=gd(v,r))}return p}function Rl(e){return void 0!==e}function Zm(e,n){return 0!=(e.flags&(n?16:32))}function Qt(e,n=""){const t=cn(),r=fi(),i=e+22,s=r.firstCreatePass?Md(r,i,1,n,null):r.data[i],d=t[i]=function pb(e,n){return e.createText(n)}(t[11],n);pm(r,t,d,s),Wo(s,!1)}function gu(e){return Za("",e,""),gu}function Za(e,n,t){const r=cn(),i=Vh(r,e,n,t);return i!==zr&&$u(r,os(),i),Za}function Ym(e,n,t,r,i){const s=cn(),d=Td(s,e,n,t,r,i);return d!==zr&&$u(s,os(),d),Ym}function hx(e,n,t){!function ll(e,n,t,r){const i=fi(),s=Eo(2);i.firstUpdatePass&&mM(i,null,s,r);const d=cn();if(t!==zr&&Po(d,s,t)){const p=i.data[os()];if(Zm(p,r)&&!gM(i,s)){let v=r?p.classesWithoutHost:p.stylesWithoutHost;null!==v&&(t=nd(v,t||"")),nx(i,p,d,t,r)}else!function kc(e,n,t,r,i,s,d,p){i===zr&&(i=ei);let v=0,_=0,C=0<i.length?i[0]:null,S=0<s.length?s[0]:null;for(;null!==C||null!==S;){const k=v<i.length?i[v+1]:void 0,H=_<s.length?s[_+1]:void 0;let pe,ne=null;C===S?(v+=2,_+=2,k!==H&&(ne=S,pe=H)):null===S||null!==C&&C<S?(v+=2,ne=C):(_+=2,ne=S,pe=H),null!==ne&&Wm(e,n,t,r,ne,pe,d,p),C=v<i.length?i[v]:null,S=_<s.length?s[_]:null}}(i,p,d,d[11],d[s+1],d[s+1]=function Gm(e,n,t){if(null==t||""===t)return ei;const r=[],i=ks(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)e(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&e(r,s,i[s]);else"string"==typeof i&&n(r,i);return r}(e,n,t),r,s)}}(Os,pu,Vh(cn(),e,n,t),!0)}function mu(e,n,t){const r=cn();return Po(r,vh(),n)&&cs(fi(),Ta(),r,e,n,r[11],t,!0),mu}function Uh(e,n,t){const r=cn();if(Po(r,vh(),n)){const s=fi(),d=Ta();cs(s,d,r,e,n,BD(Kf(s.data),d,r),t,!0)}return Uh}const Gh="en-US";let _u=Gh;function Ex(e,n,t,r,i){if(e=qt(e),Array.isArray(e))for(let s=0;s<e.length;s++)Ex(e[s],n,t,r,i);else{const s=fi(),d=cn();let p=ju(e)?e:qt(e.provide),v=SS(e);const _=Ei(),C=1048575&_.providerIndexes,S=_.directiveStart,k=_.providerIndexes>>20;if(ju(e)||!e.multi){const H=new ep(v,i,Xe),ne=Ax(p,n,i?C:C+k,S);-1===ne?(dd(cd(_,d),s,p),u_(s,e,n.length),n.push(p),_.directiveStart++,_.directiveEnd++,i&&(_.providerIndexes+=1048576),t.push(H),d.push(H)):(t[ne]=H,d[ne]=H)}else{const H=Ax(p,n,C+k,S),ne=Ax(p,n,C,C+k),pe=H>=0&&t[H],Me=ne>=0&&t[ne];if(i&&!Me||!i&&!pe){dd(cd(_,d),s,p);const Re=function cO(e,n,t,r,i){const s=new ep(e,t,Xe);return s.multi=[],s.index=n,s.componentProviders=0,cT(s,i,r&&!t),s}(i?uO:lO,t.length,i,r,v);!i&&Me&&(t[ne].providerFactory=Re),u_(s,e,n.length,0),n.push(p),_.directiveStart++,_.directiveEnd++,i&&(_.providerIndexes+=1048576),t.push(Re),d.push(Re)}else u_(s,e,H>-1?H:ne,cT(t[i?ne:H],v,!i&&r));!i&&r&&Me&&t[ne].componentProviders++}}}function u_(e,n,t,r){const i=ju(n),s=function G0(e){return!!e.useClass}(n);if(i||s){const v=(s?qt(n.useClass):n).prototype.ngOnDestroy;if(v){const _=e.destroyHooks||(e.destroyHooks=[]);if(!i&&n.multi){const C=_.indexOf(t);-1===C?_.push(t,[r,v]):_[C+1].push(r,v)}else _.push(t,v)}}}function cT(e,n,t){return t&&e.componentProviders++,e.multi.push(n)-1}function Ax(e,n,t,r){for(let i=t;i<r;i++)if(n[i]===e)return i;return-1}function lO(e,n,t,r){return c_(this.multi,[])}function uO(e,n,t,r){const i=this.multi;let s;if(this.providerFactory){const d=this.providerFactory.componentProviders,p=up(t,t[1],this.providerFactory.index,r);s=p.slice(0,d),c_(i,s);for(let v=d;v<p.length;v++)s.push(p[v])}else s=[],c_(i,s);return s}function c_(e,n){for(let t=0;t<e.length;t++)n.push((0,e[t])());return n}function Kr(e,n=[]){return t=>{t.providersResolver=(r,i)=>function uT(e,n,t){const r=fi();if(r.firstCreatePass){const i=ze(e);Ex(t,r.data,r.blueprint,i,!0),Ex(n,r.data,r.blueprint,i,!1)}}(r,i?i(e):e,n)}}class Pd{}class Qp{}class dT extends Pd{constructor(n,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Qb(this);const r=Do(n);this._bootstrapComponents=cu(r.bootstrap),this._r3Injector=rD(n,t,[{provide:Pd,useValue:this},{provide:xd,useValue:this.componentFactoryResolver}],Ut(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Px extends Qp{constructor(n){super(),this.moduleType=n}create(n){return new dT(this.moduleType,n)}}class dO extends Pd{constructor(n,t,r){super(),this.componentFactoryResolver=new Qb(this),this.instance=null;const i=new CS([...n,{provide:Pd,useValue:this},{provide:xd,useValue:this.componentFactoryResolver}],t||tm(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function qp(e,n,t=null){return new dO(e,n,t).injector}let hO=(()=>{class e{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=yS(0,t.type),i=r.length>0?qp([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,i)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return e.\u0275prov=yn({token:e,providedIn:"environment",factory:()=>new e(Lt(Zu))}),e})();function Rx(e){e.getStandaloneInjector=n=>n.get(hO).getOrCreateStandaloneInjector(e)}function Rd(e,n,t){const r=jo()+e,i=cn();return i[r]===zr?fu(i,r,t?n.call(t):n()):function Fh(e,n){return e[n]}(i,r)}function Bc(e,n,t,r){return function DO(e,n,t,r,i,s){const d=n+t;return Po(e,d,i)?fu(e,d+1,s?r.call(s,i):r(i)):cl(e,d+1)}(cn(),jo(),e,n,t,r)}function Zh(e,n,t,r,i){return function MO(e,n,t,r,i,s,d){const p=n+t;return Rc(e,p,i,s)?fu(e,p+2,d?r.call(d,i,s):r(i,s)):cl(e,p+2)}(cn(),jo(),e,n,t,r,i)}function cl(e,n){const t=e[n];return t===zr?void 0:t}function Vc(e){return n=>{setTimeout(e,void 0,n)}}const En=class RO extends te{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,t,r){let i=n,s=t||(()=>null),d=r;if(n&&"object"==typeof n){const v=n;i=v.next?.bind(v),s=v.error?.bind(v),d=v.complete?.bind(v)}this.__isAsync&&(s=Vc(s),i&&(i=Vc(i)),d&&(d=Vc(d)));const p=super.subscribe({next:i,error:s,complete:d});return n instanceof ve&&n.add(p),p}};function LO(){return this._results[Ku()]()}class Yh{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Ku(),r=Yh.prototype;r[t]||(r[t]=LO)}get changes(){return this._changes||(this._changes=new En)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,t){return this._results.reduce(n,t)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,t){const r=this;r.dirty=!1;const i=Ss(n);(this._changesDetected=!function D0(e,n,t){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let dl=(()=>{class e{}return e.__NG_ELEMENT_ID__=NO,e})();const OO=dl,kO=class extends OO{constructor(n,t,r){super(),this._declarationLView=n,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(n,t){const r=this._declarationTContainer.tViews,i=Am(this._declarationLView,r,n,16,null,r.declTNode,null,null,null,null,t||null);i[17]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[19];return null!==d&&(i[19]=d.createEmbeddedView(r)),Vb(r,i,n),new kh(i)}};function NO(){return ev(Ei(),cn())}function ev(e,n){return 4&e.type?new kO(n,e,Mh(e,n)):null}let Ro=(()=>{class e{}return e.__NG_ELEMENT_ID__=FO,e})();function FO(){return xT(Ei(),cn())}const hl=Ro,Fx=class extends hl{constructor(n,t,r){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=r}get element(){return Mh(this._hostTNode,this._hostLView)}get injector(){return new fd(this._hostTNode,this._hostLView)}get parentInjector(){const n=op(this._hostTNode,this._hostLView);if(Fw(n)){const t=_h(n,this._hostLView),r=mh(n);return new fd(t[1].data[r+8],t)}return new fd(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const t=Ld(this._lContainer);return null!==t&&t[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const d=n.createEmbeddedView(t||{},s);return this.insert(d,i),d}createComponent(n,t,r,i,s){const d=n&&!function hp(e){return"function"==typeof e}(n);let p;if(d)p=t;else{const S=t||{};p=S.index,r=S.injector,i=S.projectableNodes,s=S.environmentInjector||S.ngModuleRef}const v=d?n:new zp(Ti(n)),_=r||this.parentInjector;if(!s&&null==v.ngModule){const k=(d?_:this.parentInjector).get(Zu,null);k&&(s=k)}const C=v.create(_,i,void 0,s);return this.insert(C.hostView,p),C}insert(n,t){const r=n._lView,i=r[1];if(function wP(e){return co(e[3])}(r)){const C=this.indexOf(n);if(-1!==C)this.detach(C);else{const S=r[3],k=new Fx(S,S[6],S[3]);k.detach(k.indexOf(n))}}const s=this._adjustIndex(t),d=this._lContainer;!function Q2(e,n,t,r){const i=10+r,s=t.length;r>0&&(t[i-1][4]=n),r<s-10?(n[4]=t[i],bc(t,10+r,n)):(t.push(n),n[4]=null),n[3]=t;const d=n[17];null!==d&&t!==d&&function q2(e,n){const t=e[9];n[16]!==n[3][3][16]&&(e[2]=!0),null===t?e[9]=[n]:t.push(n)}(d,n);const p=n[19];null!==p&&p.insertView(e),n[2]|=64}(i,r,d,s);const p=xb(s,d),v=r[11],_=fm(v,d[7]);return null!==_&&function X2(e,n,t,r,i,s){r[0]=i,r[6]=n,wd(e,r,t,1,i,s)}(i,d[6],v,r,_,p),n.attachToViewContainerRef(),bc(v_(d),s,n),n}move(n,t){return this.insert(n,t)}indexOf(n){const t=Ld(this._lContainer);return null!==t?t.indexOf(n):-1}remove(n){const t=this._adjustIndex(n,-1),r=gb(this._lContainer,t);r&&(Uu(v_(this._lContainer),t),zS(r[1],r))}detach(n){const t=this._adjustIndex(n,-1),r=gb(this._lContainer,t);return r&&null!=Uu(v_(this._lContainer),t)?new kh(r):null}_adjustIndex(n,t=0){return n??this.length+t}};function Ld(e){return e[8]}function v_(e){return e[8]||(e[8]=[])}function xT(e,n){let t;const r=n[e.index];if(co(r))t=r;else{let i;if(8&e.type)i=Ga(r);else{const s=n[11];i=s.createComment("");const d=ki(e,n);Tc(s,fm(s,d),i,function nR(e,n){return e.nextSibling(n)}(s,d),!1)}n[e.index]=t=Zb(r,n,i,e),Om(n,t)}return new Fx(t,e,n)}class Bx{constructor(n){this.queryList=n,this.matches=null}clone(){return new Bx(this.queryList)}setDirty(){this.queryList.setDirty()}}class Vx{constructor(n=[]){this.queries=n}createEmbeddedView(n){const t=n.queries;if(null!==t){const r=null!==n.contentQueries?n.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const d=t.getByIndex(s);i.push(this.queries[d.indexInDeclarationView].clone())}return new Vx(i)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let t=0;t<this.queries.length;t++)null!==TT(n,t).matches&&this.queries[t].setDirty()}}class CT{constructor(n,t,r=null){this.predicate=n,this.flags=t,this.read=r}}class zx{constructor(n=[]){this.queries=n}elementStart(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,t)}elementEnd(n){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(n)}embeddedTView(n){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(n,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new zx(t):null}template(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,t)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Hx{constructor(n,t=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(n,t){this.isApplyingToNode(t)&&this.matchTNode(n,t)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,t){this.elementStart(n,t)}embeddedTView(n,t){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,t),new Hx(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=n.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(n,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(n,t,wT(t,s)),this.matchTNodeWithReadOption(n,t,hd(t,n,s,!1,!1))}else r===dl?4&t.type&&this.matchTNodeWithReadOption(n,t,-1):this.matchTNodeWithReadOption(n,t,hd(t,n,r,!1,!1))}matchTNodeWithReadOption(n,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Nr||i===Ro||i===dl&&4&t.type)this.addMatch(t.index,-2);else{const s=hd(t,n,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(n,t){null===this.matches?this.matches=[n,t]:this.matches.push(n,t)}}function wT(e,n){const t=e.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===n)return t[r+1];return null}function Y5(e,n,t,r){return-1===t?function Z5(e,n){return 11&e.type?Mh(e,n):4&e.type?ev(e,n):null}(n,e):-2===t?function HO(e,n,t){return t===Nr?Mh(n,e):t===dl?ev(n,e):t===Ro?xT(n,e):void 0}(e,n,r):up(e,e[1],t,n)}function ST(e,n,t,r){const i=n[19].queries[r];if(null===i.matches){const s=e.data,d=t.matches,p=[];for(let v=0;v<d.length;v+=2){const _=d[v];p.push(_<0?null:Y5(n,s[_],d[v+1],t.metadata.read))}i.matches=p}return i.matches}function g_(e,n,t,r){const i=e.queries.getByIndex(t),s=i.matches;if(null!==s){const d=ST(e,n,i,t);for(let p=0;p<s.length;p+=2){const v=s[p];if(v>0)r.push(d[p/2]);else{const _=s[p+1],C=n[-v];for(let S=10;S<C.length;S++){const k=C[S];k[17]===k[3]&&g_(k[1],k,_,r)}if(null!==C[9]){const S=C[9];for(let k=0;k<S.length;k++){const H=S[k];g_(H[1],H,_,r)}}}}}return r}function ur(e){const n=cn(),t=fi(),r=Ew();Qf(r+1);const i=TT(t,r);if(e.dirty&&function Sw(e){return 4==(4&e[2])}(n)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const s=i.crossesNgTemplate?g_(t,n,r,[]):ST(t,n,i,r);e.reset(s,T2),e.notifyOnChanges()}return!0}return!1}function Ai(e,n,t){const r=fi();r.firstCreatePass&&(MT(r,new CT(e,n,t),-1),2==(2&n)&&(r.staticViewQueries=!0)),DT(r,cn(),n)}function Li(e,n,t,r){const i=fi();if(i.firstCreatePass){const s=Ei();MT(i,new CT(n,t,r),s.index),function m_(e,n){const t=e.contentQueries||(e.contentQueries=[]);n!==(t.length?t[t.length-1]:-1)&&t.push(e.queries.length-1,n)}(i,e),2==(2&t)&&(i.staticContentQueries=!0)}DT(i,cn(),t)}function cr(){return function UO(e,n){return e[19].queries[n].queryList}(cn(),Ew())}function DT(e,n,t){const r=new Yh(4==(4&t));ED(e,n,r,r.destroy),null===n[19]&&(n[19]=new Vx),n[19].queries.push(new Bx(r))}function MT(e,n,t){null===e.queries&&(e.queries=new zx),e.queries.track(new Hx(n,t))}function TT(e,n){return e.queries.getByIndex(n)}function __(e,n){return ev(e,n)}function D_(...e){}const rv=new sn("Application Initializer");let iv=(()=>{class e{constructor(t){this.appInits=t,this.resolve=D_,this.reject=D_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(Gp(s))t.push(s);else if(ix(s)){const d=new Promise((p,v)=>{s.subscribe({complete:p,error:v})});t.push(d)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(Lt(rv,8))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const av=new sn("AppId",{providedIn:"root",factory:function NT(){return`${t1()}${t1()}${t1()}`}});function t1(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const FT=new sn("Platform Initializer"),Nd=new sn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),n1=new sn("appBootstrapListener"),fs=new sn("AnimationModuleType");let ok=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const yu=new sn("LocaleId",{providedIn:"root",factory:()=>oa(yu,Jn.Optional|Jn.SkipSelf)||function BT(){return typeof $localize<"u"&&$localize.locale||Gh}()});class lk{constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}}let bu=(()=>{class e{compileModuleSync(t){return new Px(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=cu(Do(t).declarations).reduce((d,p)=>{const v=Ti(p);return v&&d.push(new zp(v)),d},[]);return new lk(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const ck=(()=>Promise.resolve(0))();function M_(e){typeof Zone>"u"?ck.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class rr{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new En(!1),this.onMicrotaskEmpty=new En(!1),this.onStable=new En(!1),this.onError=new En(!1),typeof Zone>"u")throw new Jt(908,!1);Zone.assertZonePatched();const i=this;if(i._nesting=0,i._outer=i._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const s=Zone.AsyncStackTaggingZoneSpec;i._inner=i._inner.fork(new s("Angular"))}Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function HT(){let e=Mi.requestAnimationFrame,n=Mi.cancelAnimationFrame;if(typeof Zone<"u"&&e&&n){const t=e[Zone.__symbol__("OriginalDelegate")];t&&(e=t);const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function s1(e){const n=()=>{!function o1(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Mi,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,E_(e),e.isCheckStableRunning=!0,T_(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),E_(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,d,p)=>{try{return UT(e),t.invokeTask(i,s,d,p)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&n(),GT(e)}},onInvoke:(t,r,i,s,d,p,v)=>{try{return UT(e),t.invoke(i,s,d,p,v)}finally{e.shouldCoalesceRunChangeDetection&&n(),GT(e)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(e._hasPendingMicrotasks=s.microTask,E_(e),T_(e)):"macroTask"==s.change&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!rr.isInAngularZone())throw new Jt(909,!1)}static assertNotInAngularZone(){if(rr.isInAngularZone())throw new Jt(909,!1)}run(n,t,r){return this._inner.run(n,t,r)}runTask(n,t,r,i){const s=this._inner,d=s.scheduleEventTask("NgZoneEvent: "+i,n,dz,D_,D_);try{return s.runTask(d,t,r)}finally{s.cancelTask(d)}}runGuarded(n,t,r){return this._inner.runGuarded(n,t,r)}runOutsideAngular(n){return this._outer.run(n)}}const dz={};function T_(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function E_(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function UT(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function GT(e){e._nesting--,T_(e)}class dk{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new En,this.onMicrotaskEmpty=new En,this.onStable=new En,this.onError=new En}run(n,t,r){return n.apply(t,r)}runGuarded(n,t,r){return n.apply(t,r)}runOutsideAngular(n){return n()}runTask(n,t,r,i){return n.apply(t,r)}}const l1=new sn(""),A_=new sn("");let c1,u1=(()=>{class e{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,c1||(function hk(e){c1=e}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{rr.assertNotInAngularZone(),M_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())M_(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(d=>d.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return e.\u0275fac=function(t){return new(t||e)(Lt(rr),Lt(I_),Lt(A_))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})(),I_=(()=>{class e{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return c1?.findTestabilityInTree(this,t,r)??null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),zc=null;const WT=new sn("AllowMultipleToken"),P_=new sn("PlatformDestroyListeners");class jT{constructor(n,t){this.name=n,this.token=t}}function d1(e,n,t=[]){const r=`Platform: ${n}`,i=new sn(r);return(s=[])=>{let d=h1();if(!d||d.injector.get(WT,!1)){const p=[...t,...s,{provide:i,useValue:!0}];e?e(p):function vk(e){if(zc&&!zc.get(WT,!1))throw new Jt(400,!1);zc=e;const n=e.get($T);(function ZT(e){const n=e.get(FT,null);n&&n.forEach(t=>t())})(e)}(function XT(e=[],n){return Wa.create({name:n,providers:[{provide:qg,useValue:"platform"},{provide:P_,useValue:new Set([()=>zc=null])},...e]})}(p,r))}return function YT(e){const n=h1();if(!n)throw new Jt(401,!1);return n}()}}function h1(){return zc?.get($T)??null}let $T=(()=>{class e{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function QT(e,n){let t;return t="noop"===e?new dk:("zone.js"===e?void 0:e)||new rr(n),t}(r?.ngZone,function KT(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(r)),s=[{provide:rr,useValue:i}];return i.run(()=>{const d=Wa.create({providers:s,parent:this.injector,name:t.moduleType.name}),p=t.create(d),v=p.injector.get(uu,null);if(!v)throw new Jt(402,!1);return i.runOutsideAngular(()=>{const _=i.onError.subscribe({next:C=>{v.handleError(C)}});p.onDestroy(()=>{L_(this._modules,p),_.unsubscribe()})}),function qT(e,n,t){try{const r=t();return Gp(r)?r.catch(i=>{throw n.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw n.runOutsideAngular(()=>e.handleError(r)),r}}(v,i,()=>{const _=p.injector.get(iv);return _.runInitializers(),_.donePromise.then(()=>(function NM(e){Jo(e,"Expected localeId to be defined"),"string"==typeof e&&(_u=e.toLowerCase().replace(/_/g,"-"))}(p.injector.get(yu,Gh)||Gh),this._moduleDoBootstrap(p),p))})})}bootstrapModule(t,r=[]){const i=R_({},r);return function fk(e,n,t){const r=new Px(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(Fd);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new Jt(403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Jt(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(P_,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(Lt(Wa))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function R_(e,n){return Array.isArray(n)?n.reduce(R_,e):{...e,...n}}let Fd=(()=>{class e{constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new B(p=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{p.next(this._stable),p.complete()})}),d=new B(p=>{let v;this._zone.runOutsideAngular(()=>{v=this._zone.onStable.subscribe(()=>{rr.assertNotInAngularZone(),M_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,p.next(!0))})})});const _=this._zone.onUnstable.subscribe(()=>{rr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{p.next(!1)}))});return()=>{v.unsubscribe(),_.unsubscribe()}});this.isStable=Oa(s,d.pipe(kf()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof rm;if(!this._injector.get(iv).done)throw!i&&function Qs(e){const n=Ti(e)||pa(e)||va(e);return null!==n&&n.standalone}(t),new Jt(405,false);let d;d=i?t:this._injector.get(xd).resolveComponentFactory(t),this.componentTypes.push(d.componentType);const p=function pk(e){return e.isBoundToModule}(d)?void 0:this._injector.get(Pd),_=d.create(Wa.NULL,[],r||d.selector,p),C=_.location.nativeElement,S=_.injector.get(l1,null);return S?.registerApplication(C),_.onDestroy(()=>{this.detachView(_.hostView),L_(this.components,_),S?.unregisterApplication(C)}),this._loadComponent(_),_}tick(){if(this._runningTick)throw new Jt(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;L_(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(n1,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>L_(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Jt(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(t){return new(t||e)(Lt(rr),Lt(Zu),Lt(uu))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function L_(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}let eE=!0,da=(()=>{class e{}return e.__NG_ELEMENT_ID__=Bd,e})();function Bd(e){return function bk(e,n,t){if(Ge(e)&&!t){const r=as(e.index,n);return new kh(r,r)}return 47&e.type?new kh(n[16],n):null}(Ei(),cn(),16==(16&e))}class _1{constructor(){}supports(n){return Nh(n)}create(n){return new Dk(n)}}const Sk=(e,n)=>n;class Dk{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||Sk}forEachItem(n){let t;for(t=this._itHead;null!==t;t=t._next)n(t)}forEachOperation(n){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const d=!r||t&&t.currentIndex<lE(r,i,s)?t:r,p=lE(d,i,s),v=d.currentIndex;if(d===r)i--,r=r._nextRemoved;else if(t=t._next,null==d.previousIndex)i++;else{s||(s=[]);const _=p-i,C=v-i;if(_!=C){for(let k=0;k<_;k++){const H=k<s.length?s[k]:s[k]=0,ne=H+k;C<=ne&&ne<_&&(s[k]=H+1)}s[d.previousIndex]=C-_}}p!==v&&n(d,p,v)}}forEachPreviousItem(n){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachMovedItem(n){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}forEachIdentityChange(n){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)n(t)}diff(n){if(null==n&&(n=[]),!Nh(n))throw new Jt(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i,s,d,t=this._itHead,r=!1;if(Array.isArray(n)){this.length=n.length;for(let p=0;p<this.length;p++)s=n[p],d=this._trackByFn(p,s),null!==t&&Object.is(t.trackById,d)?(r&&(t=this._verifyReinsertion(t,s,d,p)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,d,p),r=!0),t=t._next}else i=0,function Jb(e,n){if(Array.isArray(e))for(let t=0;t<e.length;t++)n(e[t]);else{const t=e[Ku()]();let r;for(;!(r=t.next()).done;)n(r.value)}}(n,p=>{d=this._trackByFn(i,p),null!==t&&Object.is(t.trackById,d)?(r&&(t=this._verifyReinsertion(t,p,d,i)),Object.is(t.item,p)||this._addIdentityChange(t,p)):(t=this._mismatch(t,p,d,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,t,r,i){let s;return null===n?s=this._itTail:(s=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._reinsertAfter(n,s,i)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._moveAfter(n,s,i)):n=this._addAfter(new Mk(t,r),s,i),n}_verifyReinsertion(n,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?n=this._reinsertAfter(s,n._prev,i):n.currentIndex!=i&&(n.currentIndex=i,this._addToMoves(n,i)),n}_truncate(n){for(;null!==n;){const t=n._next;this._addToRemovals(this._unlink(n)),n=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const i=n._prevRemoved,s=n._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(n,t,r),this._addToMoves(n,r),n}_moveAfter(n,t,r){return this._unlink(n),this._insertAfter(n,t,r),this._addToMoves(n,r),n}_addAfter(n,t,r){return this._insertAfter(n,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,t,r){const i=null===t?this._itHead:t._next;return n._next=i,n._prev=t,null===i?this._itTail=n:i._prev=n,null===t?this._itHead=n:t._next=n,null===this._linkedRecords&&(this._linkedRecords=new sE),this._linkedRecords.put(n),n.currentIndex=r,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const t=n._prev,r=n._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,n}_addToMoves(n,t){return n.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new sE),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,t){return n.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class Mk{constructor(n,t){this.item=n,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Tk{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,n))return r;return null}remove(n){const t=n._prevDup,r=n._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class sE{constructor(){this.map=new Map}put(n){const t=n.trackById;let r=this.map.get(t);r||(r=new Tk,this.map.set(t,r)),r.add(n)}get(n,t){const i=this.map.get(n);return i?i.get(n,t):null}remove(n){const t=n.trackById;return this.map.get(t).remove(n)&&this.map.delete(t),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function lE(e,n,t){const r=e.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+n+i}class sv{constructor(){}supports(n){return n instanceof Map||ex(n)}create(){return new Ek}}class Ek{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let t;for(t=this._mapHead;null!==t;t=t._next)n(t)}forEachPreviousItem(n){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)n(t)}forEachChangedItem(n){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}diff(n){if(n){if(!(n instanceof Map||ex(n)))throw new Jt(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(n,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,t){if(n){const r=n._prev;return t._next=n,t._prev=r,n._prev=t,r&&(r._next=t),n===this._mapHead&&(this._mapHead=t),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(n,t){if(this._records.has(n)){const i=this._records.get(n);this._maybeAddToChanges(i,t);const s=i._prev,d=i._next;return s&&(s._next=d),d&&(d._prev=s),i._next=null,i._prev=null,i}const r=new F_(n);return this._records.set(n,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,t){Object.is(t,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=t,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,t){n instanceof Map?n.forEach(t):Object.keys(n).forEach(r=>t(n[r],r))}}class F_{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function y1(){return new B_([new _1])}let B_=(()=>{class e{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||y1()),deps:[[e,new ou,new rl]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new Jt(901,!1)}}return e.\u0275prov=yn({token:e,providedIn:"root",factory:y1}),e})();function cE(){return new lv([new sv])}let lv=(()=>{class e{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||cE()),deps:[[e,new ou,new rl]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new Jt(901,!1)}}return e.\u0275prov=yn({token:e,providedIn:"root",factory:cE}),e})();const V_=d1(null,"core",[]);let Pk=(()=>{class e{constructor(t){}}return e.\u0275fac=function(t){return new(t||e)(Lt(Fd))},e.\u0275mod=er({type:e}),e.\u0275inj=pr({}),e})();function fl(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}let $h=null;function Bs(){return $h}const Rr=new sn("DocumentToken");let z_=(()=>{class e{historyGo(t){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:function(){return function b1(){return Lt(C1)}()},providedIn:"platform"}),e})();const x1=new sn("Location Initialized");let C1=(()=>{class e extends z_{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Bs().getBaseHref(this._doc)}onPopState(t){const r=Bs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Bs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){hE()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){hE()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(Lt(Rr))},e.\u0275prov=yn({token:e,factory:function(){return function dv(){return new C1(Lt(Rr))}()},providedIn:"platform"}),e})();function hE(){return!!window.history.pushState}function w1(e,n){if(0==e.length)return n;if(0==n.length)return e;let t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,2==t?e+n.substring(1):1==t?e+n:e+"/"+n}function S1(e){const n=e.match(/#|\?|$/),t=n&&n.index||e.length;return e.slice(0,t-("/"===e[t-1]?1:0))+e.slice(t)}function Ju(e){return e&&"?"!==e[0]?"?"+e:e}let Uc=(()=>{class e{historyGo(t){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:function(){return oa(D1)},providedIn:"root"}),e})();const fE=new sn("appBaseHref");let D1=(()=>{class e extends Uc{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??oa(Rr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return w1(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ju(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const d=this.prepareExternalUrl(i+Ju(s));this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,s){const d=this.prepareExternalUrl(i+Ju(s));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return e.\u0275fac=function(t){return new(t||e)(Lt(z_),Lt(fE,8))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),M1=(()=>{class e extends Uc{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=w1(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let d=this.prepareExternalUrl(i+Ju(s));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,s){let d=this.prepareExternalUrl(i+Ju(s));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return e.\u0275fac=function(t){return new(t||e)(Lt(z_),Lt(fE,8))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})(),Ud=(()=>{class e{constructor(t){this._subject=new En,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=S1(pE(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ju(r))}normalize(t){return e.stripTrailingSlash(function Vk(e,n){return e&&n.startsWith(e)?n.substring(e.length):n}(this._baseHref,pE(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ju(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ju(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return e.normalizeQueryParams=Ju,e.joinWithSlash=w1,e.stripTrailingSlash=S1,e.\u0275fac=function(t){return new(t||e)(Lt(Uc))},e.\u0275prov=yn({token:e,factory:function(){return function Bk(){return new Ud(Lt(Uc))}()},providedIn:"root"}),e})();function pE(e){return e.replace(/\/index.html$/,"")}let Wd=(()=>{class e{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Nh(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Ut(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return e.\u0275fac=function(t){return new(t||e)(Xe(B_),Xe(lv),Xe(Nr),Xe(lu))},e.\u0275dir=Sn({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),e})();class hN{constructor(n,t,r,i){this.$implicit=n,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Gc=(()=>{class e{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,d)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new hN(i.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===s?void 0:s);else if(null!==s){const p=r.get(s);r.move(p,d),PE(p,i)}});for(let i=0,s=r.length;i<s;i++){const p=r.get(i).context;p.index=i,p.count=s,p.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{PE(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return e.\u0275fac=function(t){return new(t||e)(Xe(Ro),Xe(dl),Xe(B_))},e.\u0275dir=Sn({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function PE(e,n){e.context.$implicit=n.item}let zs=(()=>{class e{constructor(t,r){this._viewContainer=t,this._context=new pN,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){RE("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){RE("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return e.\u0275fac=function(t){return new(t||e)(Xe(Ro),Xe(dl))},e.\u0275dir=Sn({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class pN{constructor(){this.$implicit=null,this.ngIf=null}}function RE(e,n){if(n&&!n.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${Ut(n)}'.`)}class V1{constructor(n,t){this._viewContainerRef=n,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(n){n&&!this._created?this.create():!n&&this._created&&this.destroy()}}let Wc=(()=>{class e{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Sn({type:e,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),e})(),_v=(()=>{class e{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new V1(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return e.\u0275fac=function(t){return new(t||e)(Xe(Ro),Xe(dl),Xe(Wc,9))},e.\u0275dir=Sn({type:e,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),e})(),LE=(()=>{class e{constructor(t,r,i){i._addDefault(new V1(t,r))}}return e.\u0275fac=function(t){return new(t||e)(Xe(Ro),Xe(dl),Xe(Wc,9))},e.\u0275dir=Sn({type:e,selectors:[["","ngSwitchDefault",""]],standalone:!0}),e})(),H1=(()=>{class e{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split("."),d=-1===i.indexOf("-")?void 0:us.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,d):this._renderer.removeStyle(this._ngEl.nativeElement,i,d)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return e.\u0275fac=function(t){return new(t||e)(Xe(Nr),Xe(lv),Xe(lu))},e.\u0275dir=Sn({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),e})(),kl=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({}),e})();const VE="browser";let Z1=(()=>{class e{}return e.\u0275prov=yn({token:e,providedIn:"root",factory:()=>new RN(Lt(Rr),window)}),e})();class RN{constructor(n,t){this.document=n,this.window=t,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const t=function HE(e,n){const t=e.getElementById(n)||e.getElementsByName(n)[0];if(t)return t;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const d=s.getElementById(n)||s.querySelector(`[name="${n}"]`);if(d)return d}i=r.nextNode()}}return null}(this.document,n);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=n)}}scrollToElement(n){const t=n.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=yv(this.window.history)||yv(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function yv(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class qe extends class Ke extends class Fk{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Nk(e){$h||($h=e)}(new qe)}onAndCancel(n,t,r){return n.addEventListener(t,r,!1),()=>{n.removeEventListener(t,r,!1)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,t){return(t=t||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return"window"===t?window:"document"===t?n:"body"===t?n.body:null}getBaseHref(n){const t=function pt(){return ut=ut||document.querySelector("base"),ut?ut.getAttribute("href"):null}();return null==t?null:function wt(e){yt=yt||document.createElement("a"),yt.setAttribute("href",e);const n=yt.pathname;return"/"===n.charAt(0)?n:`/${n}`}(t)}resetBaseElement(){ut=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function cN(e,n){n=encodeURIComponent(n);for(const t of e.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===n)return decodeURIComponent(s)}return null}(document.cookie,n)}}let yt,ut=null;const kt=new sn("TRANSITION_ID"),jt=[{provide:rv,useFactory:function en(e,n,t){return()=>{t.get(iv).donePromise.then(()=>{const r=Bs(),i=n.querySelectorAll(`style[ng-transition="${e}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[kt,Rr,Wa],multi:!0}];let Fn=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();const Hn=new sn("EventManagerPlugins");let lr=(()=>{class e{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const d=i[s];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return e.\u0275fac=function(t){return new(t||e)(Lt(Hn),Lt(rr))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();class br{constructor(n){this._doc=n}addGlobalEventListener(n,t,r){const i=Bs().getGlobalEventTarget(this._doc,n);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Fr=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})(),xi=(()=>{class e extends Fr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const d=this._doc.createElement("style");d.textContent=s,i.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Oi),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Oi))}}return e.\u0275fac=function(t){return new(t||e)(Lt(Rr))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();function Oi(e){Bs().remove(e)}const Yr={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ir=/%COMP%/g;function ba(e,n,t){for(let r=0;r<n.length;r++){let i=n[r];Array.isArray(i)?ba(e,i,t):(i=i.replace(ir,e),t.push(i))}return t}function Aa(e){return n=>{if("__ngUnwrap__"===n)return e;!1===e(n)&&(n.preventDefault(),n.returnValue=!1)}}let gl=(()=>{class e{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Zo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case zo.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new K1(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case zo.ShadowDom:return new vZ(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=ba(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(Lt(lr),Lt(xi),Lt(av))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();class Zo{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,t){return t?document.createElementNS(Yr[t]||t,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,t){($1(n)?n.content:n).appendChild(t)}insertBefore(n,t,r){n&&($1(n)?n.content:n).insertBefore(t,r)}removeChild(n,t){n&&n.removeChild(t)}selectRootElement(n,t){let r="string"==typeof n?document.querySelector(n):n;if(!r)throw new Error(`The selector "${n}" did not match any elements`);return t||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,r,i){if(i){t=i+":"+t;const s=Yr[i];s?n.setAttributeNS(s,t,r):n.setAttribute(t,r)}else n.setAttribute(t,r)}removeAttribute(n,t,r){if(r){const i=Yr[r];i?n.removeAttributeNS(i,t):n.removeAttribute(`${r}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,r,i){i&(us.DashCase|us.Important)?n.style.setProperty(t,r,i&us.Important?"important":""):n.style[t]=r}removeStyle(n,t,r){r&us.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,r){n[t]=r}setValue(n,t){n.nodeValue=t}listen(n,t,r){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,t,Aa(r)):this.eventManager.addEventListener(n,t,Aa(r))}}function $1(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class K1 extends Zo{constructor(n,t,r,i){super(n),this.component=r;const s=ba(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function vo(e){return"_ngcontent-%COMP%".replace(ir,e)}(i+"-"+r.id),this.hostAttr=function sa(e){return"_nghost-%COMP%".replace(ir,e)}(i+"-"+r.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,t){const r=super.createElement(n,t);return super.setAttribute(r,this.contentAttr,""),r}}class vZ extends Zo{constructor(n,t,r,i){super(n),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=ba(i.id,i.styles,[]);for(let d=0;d<s.length;d++){const p=document.createElement("style");p.textContent=s[d],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,r){return super.insertBefore(this.nodeOrShadowRoot(n),t,r)}removeChild(n,t){return super.removeChild(this.nodeOrShadowRoot(n),t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let gZ=(()=>{class e extends br{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return e.\u0275fac=function(t){return new(t||e)(Lt(Rr))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();const Bz=["alt","control","meta","shift"],mZ={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_Z={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let yZ=(()=>{class e extends br{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,r,i){const s=e.parseEventName(r),d=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Bs().onAndCancel(t,s.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=e._normalizeKey(r.pop());let d="",p=r.indexOf("code");if(p>-1&&(r.splice(p,1),d="code."),Bz.forEach(_=>{const C=r.indexOf(_);C>-1&&(r.splice(C,1),d+=_+".")}),d+=s,0!=r.length||0===s.length)return null;const v={};return v.domEventName=i,v.fullKey=d,v}static matchEventFullKeyCode(t,r){let i=mZ[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Bz.forEach(d=>{d!==i&&(0,_Z[d])(t)&&(s+=d+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{e.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return e.\u0275fac=function(t){return new(t||e)(Lt(Rr))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();const zz=[{provide:Nd,useValue:VE},{provide:FT,useValue:function bZ(){qe.makeCurrent()},multi:!0},{provide:Rr,useFactory:function CZ(){return function P0(e){bp=e}(document),document},deps:[]}],wZ=d1(V_,"browser",zz),Hz=new sn(""),Uz=[{provide:A_,useClass:class dn{addToWindow(n){Mi.getAngularTestability=(r,i=!0)=>{const s=n.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},Mi.getAllAngularTestabilities=()=>n.getAllTestabilities(),Mi.getAllAngularRootElements=()=>n.getAllRootElements(),Mi.frameworkStabilizers||(Mi.frameworkStabilizers=[]),Mi.frameworkStabilizers.push(r=>{const i=Mi.getAllAngularTestabilities();let s=i.length,d=!1;const p=function(v){d=d||v,s--,0==s&&r(d)};i.forEach(function(v){v.whenStable(p)})})}findTestabilityInTree(n,t,r){return null==t?null:n.getTestability(t)??(r?Bs().isShadowRoot(t)?this.findTestabilityInTree(n,t.host,!0):this.findTestabilityInTree(n,t.parentElement,!0):null)}},deps:[]},{provide:l1,useClass:u1,deps:[rr,I_,A_]},{provide:u1,useClass:u1,deps:[rr,I_,A_]}],Gz=[{provide:qg,useValue:"root"},{provide:uu,useFactory:function xZ(){return new uu},deps:[]},{provide:Hn,useClass:gZ,multi:!0,deps:[Rr,rr,Nd]},{provide:Hn,useClass:yZ,multi:!0,deps:[Rr]},{provide:gl,useClass:gl,deps:[lr,xi,av]},{provide:Ap,useExisting:gl},{provide:Fr,useExisting:xi},{provide:xi,useClass:xi,deps:[Rr]},{provide:lr,useClass:lr,deps:[Hn,rr]},{provide:class LN{},useClass:Fn,deps:[]},[]];let Wz=(()=>{class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:av,useValue:t.appId},{provide:kt,useExisting:av},jt]}}}return e.\u0275fac=function(t){return new(t||e)(Lt(Hz,12))},e.\u0275mod=er({type:e}),e.\u0275inj=pr({providers:[...Gz,...Uz],imports:[kl,Pk]}),e})(),jz=(()=>{class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return e.\u0275fac=function(t){return new(t||e)(Lt(Rr))},e.\u0275prov=yn({token:e,factory:function(t){let r=null;return r=t?new t:function DZ(){return new jz(Lt(Rr))}(),r},providedIn:"root"}),e})();typeof window<"u"&&window;let UN=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:function(t){let r=null;return r=t?new(t||e):Lt(Xz),r},providedIn:"root"}),e})(),Xz=(()=>{class e extends UN{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case Ri.NONE:return r;case Ri.HTML:return il(r,"HTML")?ks(r):V0(this._doc,String(r)).toString();case Ri.STYLE:return il(r,"Style")?ks(r):r;case Ri.SCRIPT:if(il(r,"Script"))return ks(r);throw new Error("unsafe value used in a script context");case Ri.URL:return il(r,"URL")?ks(r):jg(String(r));case Ri.RESOURCE_URL:if(il(r,"ResourceURL"))return ks(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function uS(e){return new k0(e)}(t)}bypassSecurityTrustStyle(t){return function N0(e){return new s2(e)}(t)}bypassSecurityTrustScript(t){return function Wg(e){return new lS(e)}(t)}bypassSecurityTrustUrl(t){return function c2(e){return new l2(e)}(t)}bypassSecurityTrustResourceUrl(t){return function d2(e){return new u2(e)}(t)}}return e.\u0275fac=function(t){return new(t||e)(Lt(Rr))},e.\u0275prov=yn({token:e,factory:function(t){let r=null;return r=t?new t:function RZ(e){return new Xz(e.get(Rr))}(Lt(Wa)),r},providedIn:"root"}),e})();function $z(e,n,t,r,i,s,d){try{var p=e[s](d),v=p.value}catch(_){return void t(_)}p.done?n(v):Promise.resolve(v).then(r,i)}function GN(e){return function(){var n=this,t=arguments;return new Promise(function(r,i){var s=e.apply(n,t);function d(v){$z(s,r,i,d,p,"next",v)}function p(v){$z(s,r,i,d,p,"throw",v)}d(void 0)})}}function $n(...e){return Pn(e,td(e))}class LZ extends ve{constructor(n,t){super()}schedule(n,t=0){return this}}const $E={setInterval(e,n,...t){const{delegate:r}=$E;return r?.setInterval?r.setInterval(e,n,...t):setInterval(e,n,...t)},clearInterval(e){const{delegate:n}=$E;return(n?.clearInterval||clearInterval)(e)},delegate:void 0};class WN extends LZ{constructor(n,t){super(n,t),this.scheduler=n,this.work=t,this.pending=!1}schedule(n,t=0){var r;if(this.closed)return this;this.state=n;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(n,t,r=0){return $E.setInterval(n.flush.bind(n,this),r)}recycleAsyncId(n,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&$E.clearInterval(t)}execute(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(n,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,t){let i,r=!1;try{this.work(n)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:n,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ye(r,this),null!=n&&(this.id=this.recycleAsyncId(t,n,null)),this.delay=null,super.unsubscribe()}}}const Kz={now:()=>(Kz.delegate||Date).now(),delegate:void 0};class Q1{constructor(n,t=Q1.now){this.schedulerActionCtor=n,this.now=t}schedule(n,t=0,r){return new this.schedulerActionCtor(this,n).schedule(r,t)}}Q1.now=Kz.now;class jN extends Q1{constructor(n,t=Q1.now){super(n,t),this.actions=[],this._active=!1}flush(n){const{actions:t}=this;if(this._active)return void t.push(n);let r;this._active=!0;do{if(r=n.execute(n.state,n.delay))break}while(n=t.shift());if(this._active=!1,r){for(;n=t.shift();)n.unsubscribe();throw r}}}const q1=new jN(WN),OZ=q1,Qz={leading:!0,trailing:!1};function qz(e=0,n,t=OZ){let r=-1;return null!=n&&(lc(n)?t=n:r=n),new B(i=>{let s=function NZ(e){return e instanceof Date&&!isNaN(e)}(e)?+e-t.now():e;s<0&&(s=0);let d=0;return t.schedule(function(){i.closed||(i.next(d++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function ml(e,n){return ge((t,r)=>{let i=null,s=0,d=!1;const p=()=>d&&!i&&r.complete();t.subscribe(we(r,v=>{i?.unsubscribe();let _=0;const C=s++;Dn(e(v,C)).subscribe(i=we(r,S=>r.next(n?n(v,S,C,_++):S),()=>{i=null,p()}))},()=>{d=!0,p()}))})}class ZN{constructor(n){this.changes=n}static of(n){return new ZN(n)}notEmpty(n){if(this.changes[n]){const t=this.changes[n].currentValue;if(null!=t)return $n(t)}return La}has(n){return this.changes[n]?$n(this.changes[n].currentValue):La}notFirst(n){return this.changes[n]&&!this.changes[n].isFirstChange()?$n(this.changes[n].currentValue):La}notFirstAndEmpty(n){if(this.changes[n]&&!this.changes[n].isFirstChange()){const t=this.changes[n].currentValue;if(null!=t)return $n(t)}return La}}const Jz=new sn("NGX_ECHARTS_CONFIG");let J1=(()=>{class e{constructor(t,r,i){this.el=r,this.ngZone=i,this.autoResize=!0,this.loadingType="default",this.chartInit=new En,this.optionsError=new En,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartPieSelectChanged=this.createLazyEvent("pieselectchanged"),this.chartPieSelected=this.createLazyEvent("pieselected"),this.chartPieUnselected=this.createLazyEvent("pieunselected"),this.chartMapSelectChanged=this.createLazyEvent("mapselectchanged"),this.chartMapSelected=this.createLazyEvent("mapselected"),this.chartMapUnselected=this.createLazyEvent("mapunselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartFocusNodeAdjacency=this.createLazyEvent("focusnodeadjacency"),this.chartUnfocusNodeAdjacency=this.createLazyEvent("unfocusnodeadjacency"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.animationFrameID=null,this.resize$=new te,this.echarts=t.echarts}ngOnChanges(t){const r=ZN.of(t);r.notFirstAndEmpty("options").subscribe(i=>this.onOptionsChange(i)),r.notFirstAndEmpty("merge").subscribe(i=>this.setOption(i)),r.has("loading").subscribe(i=>this.toggleLoading(!!i)),r.notFirst("theme").subscribe(()=>this.refreshChart())}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe(function FZ(e,n=q1,t=Qz){const r=qz(e,n);return function kZ(e,n=Qz){return ge((t,r)=>{const{leading:i,trailing:s}=n;let d=!1,p=null,v=null,_=!1;const C=()=>{v?.unsubscribe(),v=null,s&&(H(),_&&r.complete())},S=()=>{v=null,_&&r.complete()},k=ne=>v=Dn(e(ne)).subscribe(we(r,C,S)),H=()=>{if(d){d=!1;const ne=p;p=null,r.next(ne),!_&&k(ne)}};t.subscribe(we(r,ne=>{d=!0,p=ne,(!v||v.closed)&&(i?H():k(ne))},()=>{_=!0,(!(s&&d&&v)||v.closed)&&r.complete()}))})}(()=>r,t)}(100,q1,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(()=>{this.animationFrameID=window.requestAnimationFrame(()=>this.resize$.next())})),this.resizeOb.observe(this.el.nativeElement))}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(t){this.chart&&(t?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading())}setOption(t,r){if(this.chart)try{this.chart.setOption(t,r)}catch(i){console.error(i),this.optionsError.emit(i)}}refreshChart(){var t=this;return GN(function*(){t.dispose(),yield t.initChart()})()}createChart(){const t=this.el.nativeElement;if(window&&window.getComputedStyle){const r=window.getComputedStyle(t,null).getPropertyValue("height");(!r||"0px"===r)&&(!t.style.height||"0px"===t.style.height)&&(t.style.height="400px")}return this.ngZone.runOutsideAngular(()=>("function"==typeof this.echarts?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:i})=>i(t,this.theme,this.initOpts)))}initChart(){var t=this;return GN(function*(){yield t.onOptionsChange(t.options),t.merge&&t.chart&&t.setOption(t.merge)})()}onOptionsChange(t){var r=this;return GN(function*(){!t||(r.chart||(r.chart=yield r.createChart(),r.chartInit.emit(r.chart)),r.setOption(r.options,!0))})()}createLazyEvent(t){return this.chartInit.pipe(ml(r=>new B(i=>(r.on(t,s=>this.ngZone.run(()=>i.next(s))),()=>{this.chart&&(this.chart.isDisposed()||r.off(t))}))))}}return e.\u0275fac=function(t){return new(t||e)(Xe(Jz),Xe(Nr),Xe(rr))},e.\u0275dir=Sn({type:e,selectors:[["echarts"],["","echarts",""]],inputs:{options:"options",theme:"theme",loading:"loading",initOpts:"initOpts",merge:"merge",autoResize:"autoResize",loadingType:"loadingType",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartPieSelectChanged:"chartPieSelectChanged",chartPieSelected:"chartPieSelected",chartPieUnselected:"chartPieUnselected",chartMapSelectChanged:"chartMapSelectChanged",chartMapSelected:"chartMapSelected",chartMapUnselected:"chartMapUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartFocusNodeAdjacency:"chartFocusNodeAdjacency",chartUnfocusNodeAdjacency:"chartUnfocusNodeAdjacency",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],features:[Xi]}),e})(),BZ=(()=>{class e{static forRoot(t){return{ngModule:e,providers:[{provide:Jz,useValue:t}]}}static forChild(){return{ngModule:e}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({}),e})();const{isArray:VZ}=Array,{getPrototypeOf:zZ,prototype:HZ,keys:UZ}=Object;function eH(e){if(1===e.length){const n=e[0];if(VZ(n))return{args:n,keys:null};if(function GZ(e){return e&&"object"==typeof e&&zZ(e)===HZ}(n)){const t=UZ(n);return{args:t.map(r=>n[r]),keys:t}}}return{args:e,keys:null}}const{isArray:WZ}=Array;function YN(e){return Ae(n=>function jZ(e,n){return WZ(n)?e(...n):e(n)}(e,n))}function tH(e,n){return e.reduce((t,r,i)=>(t[r]=n[i],t),{})}function nH(...e){const n=ku(e),{args:t,keys:r}=eH(e),i=new B(s=>{const{length:d}=t;if(!d)return void s.complete();const p=new Array(d);let v=d,_=d;for(let C=0;C<d;C++){let S=!1;Dn(t[C]).subscribe(we(s,k=>{S||(S=!0,_--),p[C]=k},()=>v--,void 0,()=>{(!v||!S)&&(_||s.next(r?tH(r,p):p),s.complete())}))}});return n?i.pipe(YN(n)):i}let rH=(()=>{class e{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return e.\u0275fac=function(t){return new(t||e)(Xe(lu),Xe(Nr))},e.\u0275dir=Sn({type:e}),e})(),bv=(()=>{class e extends rH{}return e.\u0275fac=function(){let n;return function(r){return(n||(n=ta(e)))(r||e)}}(),e.\u0275dir=Sn({type:e,features:[Xn]}),e})();const gs=new sn("NgValueAccessor"),YZ={provide:gs,useExisting:Wr(()=>eC),multi:!0},$Z=new sn("CompositionEventMode");let eC=(()=>{class e extends rH{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function XZ(){const e=Bs()?Bs().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return e.\u0275fac=function(t){return new(t||e)(Xe(lu),Xe(Nr),Xe($Z,8))},e.\u0275dir=Sn({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&Yt("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[Kr([YZ]),Xn]}),e})();function rf(e){return null==e||("string"==typeof e||Array.isArray(e))&&0===e.length}function aH(e){return null!=e&&"number"==typeof e.length}const Oo=new sn("NgValidators"),af=new sn("NgAsyncValidators"),QZ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Zc{static min(n){return oH(n)}static max(n){return sH(n)}static required(n){return function lH(e){return rf(e.value)?{required:!0}:null}(n)}static requiredTrue(n){return function uH(e){return!0===e.value?null:{required:!0}}(n)}static email(n){return function cH(e){return rf(e.value)||QZ.test(e.value)?null:{email:!0}}(n)}static minLength(n){return function dH(e){return n=>rf(n.value)||!aH(n.value)?null:n.value.length<e?{minlength:{requiredLength:e,actualLength:n.value.length}}:null}(n)}static maxLength(n){return function hH(e){return n=>aH(n.value)&&n.value.length>e?{maxlength:{requiredLength:e,actualLength:n.value.length}}:null}(n)}static pattern(n){return function fH(e){if(!e)return KE;let n,t;return"string"==typeof e?(t="","^"!==e.charAt(0)&&(t+="^"),t+=e,"$"!==e.charAt(e.length-1)&&(t+="$"),n=new RegExp(t)):(t=e.toString(),n=e),r=>{if(rf(r.value))return null;const i=r.value;return n.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(n)}static nullValidator(n){return null}static compose(n){return yH(n)}static composeAsync(n){return bH(n)}}function oH(e){return n=>{if(rf(n.value)||rf(e))return null;const t=parseFloat(n.value);return!isNaN(t)&&t<e?{min:{min:e,actual:n.value}}:null}}function sH(e){return n=>{if(rf(n.value)||rf(e))return null;const t=parseFloat(n.value);return!isNaN(t)&&t>e?{max:{max:e,actual:n.value}}:null}}function KE(e){return null}function pH(e){return null!=e}function vH(e){return Gp(e)?Pn(e):e}function gH(e){let n={};return e.forEach(t=>{n=null!=t?{...n,...t}:n}),0===Object.keys(n).length?null:n}function mH(e,n){return n.map(t=>t(e))}function _H(e){return e.map(n=>function qZ(e){return!e.validate}(n)?n:t=>n.validate(t))}function yH(e){if(!e)return null;const n=e.filter(pH);return 0==n.length?null:function(t){return gH(mH(t,n))}}function XN(e){return null!=e?yH(_H(e)):null}function bH(e){if(!e)return null;const n=e.filter(pH);return 0==n.length?null:function(t){return nH(mH(t,n).map(vH)).pipe(Ae(gH))}}function $N(e){return null!=e?bH(_H(e)):null}function xH(e,n){return null===e?[n]:Array.isArray(e)?[...e,n]:[e,n]}function CH(e){return e._rawValidators}function wH(e){return e._rawAsyncValidators}function KN(e){return e?Array.isArray(e)?e:[e]:[]}function QE(e,n){return Array.isArray(e)?e.includes(n):e===n}function SH(e,n){const t=KN(n);return KN(e).forEach(i=>{QE(t,i)||t.push(i)}),t}function DH(e,n){return KN(n).filter(t=>!QE(e,t))}class MH{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=XN(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=$N(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,t){return!!this.control&&this.control.hasError(n,t)}getError(n,t){return this.control?this.control.getError(n,t):null}}class Hs extends MH{get formDirective(){return null}get path(){return null}}class Yc extends MH{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class TH{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let sf=(()=>{class e extends TH{constructor(t){super(t)}}return e.\u0275fac=function(t){return new(t||e)(Xe(Yc,2))},e.\u0275dir=Sn({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&bi("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Xn]}),e})(),EH=(()=>{class e extends TH{constructor(t){super(t)}}return e.\u0275fac=function(t){return new(t||e)(Xe(Hs,10))},e.\u0275dir=Sn({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&bi("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Xn]}),e})();const tC="VALID",JE="INVALID",ey="PENDING",nC="DISABLED";function eF(e){return(eA(e)?e.validators:e)||null}function IH(e){return Array.isArray(e)?XN(e):e||null}function tF(e,n){return(eA(n)?n.asyncValidators:e)||null}function PH(e){return Array.isArray(e)?$N(e):e||null}function eA(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class OH{constructor(n,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=t,this._composedValidatorFn=IH(this._rawValidators),this._composedAsyncValidatorFn=PH(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===tC}get invalid(){return this.status===JE}get pending(){return this.status==ey}get disabled(){return this.status===nC}get enabled(){return this.status!==nC}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=IH(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=PH(n)}addValidators(n){this.setValidators(SH(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(SH(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(DH(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(DH(n,this._rawAsyncValidators))}hasValidator(n){return QE(this._rawValidators,n)}hasAsyncValidator(n){return QE(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=ey,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=nC,this.errors=null,this._forEachChild(r=>{r.disable({...n,onlySelf:!0})}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=tC,this._forEachChild(r=>{r.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===tC||this.status===ey)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?nC:tC}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=ey,this._hasOwnPendingAsyncValidator=!0;const t=vH(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,t={}){this.errors=n,this._updateControlsErrors(!1!==t.emitEvent)}get(n){let t=n;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(n,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[n]:null}hasError(n,t){return!!this.getError(n,t)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new En,this.statusChanges=new En}_calculateStatus(){return this._allControlsDisabled()?nC:this.errors?JE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ey)?ey:this._anyControlsHaveStatus(JE)?JE:tC}_anyControlsHaveStatus(n){return this._anyControls(t=>t.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){eA(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}}class tA extends OH{constructor(n,t,r){super(eF(t),tF(r,t)),this.controls=n,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,t){return this.controls[n]?this.controls[n]:(this.controls[n]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(n,t,r={}){this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(n,t={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(n,t,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],t&&this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,t={}){(function LH(e,n,t){e._forEachChild((r,i)=>{if(void 0===t[i])throw new Jt(1002,"")})})(this,0,n),Object.keys(n).forEach(r=>{(function RH(e,n,t){const r=e.controls;if(!(n?Object.keys(r):r).length)throw new Jt(1e3,"");if(!r[t])throw new Jt(1001,"")})(this,!0,r),this.controls[r].setValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(n,t={}){null!=n&&(Object.keys(n).forEach(r=>{const i=this.controls[r];i&&i.patchValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(n={},t={}){this._forEachChild((r,i)=>{r.reset(n[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(n,t,r)=>(n[r]=t.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&n(r,t)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&n(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(n,t){let r=n;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}function nA(e,n){return[...n.path,e]}function rC(e,n){nF(e,n),n.valueAccessor.writeValue(e.value),e.disabled&&n.valueAccessor.setDisabledState?.(!0),function l9(e,n){n.valueAccessor.registerOnChange(t=>{e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&kH(e,n)})}(e,n),function c9(e,n){const t=(r,i)=>{n.valueAccessor.writeValue(r),i&&n.viewToModelUpdate(r)};e.registerOnChange(t),n._registerOnDestroy(()=>{e._unregisterOnChange(t)})}(e,n),function u9(e,n){n.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&kH(e,n),"submit"!==e.updateOn&&e.markAsTouched()})}(e,n),function s9(e,n){if(n.valueAccessor.setDisabledState){const t=r=>{n.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(t),n._registerOnDestroy(()=>{e._unregisterOnDisabledChange(t)})}}(e,n)}function rA(e,n,t=!0){const r=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(r),n.valueAccessor.registerOnTouched(r)),aA(e,n),e&&(n._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function iA(e,n){e.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(n)})}function nF(e,n){const t=CH(e);null!==n.validator?e.setValidators(xH(t,n.validator)):"function"==typeof t&&e.setValidators([t]);const r=wH(e);null!==n.asyncValidator?e.setAsyncValidators(xH(r,n.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();iA(n._rawValidators,i),iA(n._rawAsyncValidators,i)}function aA(e,n){let t=!1;if(null!==e){if(null!==n.validator){const i=CH(e);if(Array.isArray(i)&&i.length>0){const s=i.filter(d=>d!==n.validator);s.length!==i.length&&(t=!0,e.setValidators(s))}}if(null!==n.asyncValidator){const i=wH(e);if(Array.isArray(i)&&i.length>0){const s=i.filter(d=>d!==n.asyncValidator);s.length!==i.length&&(t=!0,e.setAsyncValidators(s))}}}const r=()=>{};return iA(n._rawValidators,r),iA(n._rawAsyncValidators,r),t}function kH(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function NH(e,n){nF(e,n)}function rF(e,n){if(!e.hasOwnProperty("model"))return!1;const t=e.model;return!!t.isFirstChange()||!Object.is(n,t.currentValue)}function BH(e,n){e._syncPendingControls(),n.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function iF(e,n){if(!n)return null;let t,r,i;return Array.isArray(n),n.forEach(s=>{s.constructor===eC?t=s:function f9(e){return Object.getPrototypeOf(e.constructor)===bv}(s)?r=s:i=s}),i||r||t||null}const v9={provide:Hs,useExisting:Wr(()=>aC)},iC=(()=>Promise.resolve())();let aC=(()=>{class e extends Hs{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new En,this.form=new tA({},XN(t),$N(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){iC.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),rC(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){iC.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){iC.then(()=>{const r=this._findContainer(t.path),i=new tA({});NH(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){iC.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){iC.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,BH(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return e.\u0275fac=function(t){return new(t||e)(Xe(Oo,10),Xe(af,10))},e.\u0275dir=Sn({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&Yt("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Kr([v9]),Xn]}),e})();function VH(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}function zH(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const lf=class extends OH{constructor(n=null,t,r){super(eF(t),tF(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),eA(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=zH(n)?n.value:n)}setValue(n,t={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(n,t={}){this.setValue(n,t)}reset(n=this.defaultValue,t={}){this._applyFormState(n),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){VH(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){VH(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){zH(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},_9={provide:Yc,useExisting:Wr(()=>uf)},GH=(()=>Promise.resolve())();let uf=(()=>{class e extends Yc{constructor(t,r,i,s,d){super(),this._changeDetectorRef=d,this.control=new lf,this._registered=!1,this.update=new En,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=iF(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),rF(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){rC(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){GH.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&fl(r);GH.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?nA(t,this._parent):[t]}}return e.\u0275fac=function(t){return new(t||e)(Xe(Hs,9),Xe(Oo,10),Xe(af,10),Xe(gs,10),Xe(da,8))},e.\u0275dir=Sn({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Kr([_9]),Xn,Xi]}),e})(),WH=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Sn({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})();const y9={provide:gs,useExisting:Wr(()=>aF),multi:!0};let aF=(()=>{class e extends bv{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=ta(e)))(r||e)}}(),e.\u0275dir=Sn({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&Yt("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},features:[Kr([y9]),Xn]}),e})(),jH=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({}),e})();const oF=new sn("NgModelWithFormControlWarning"),w9={provide:Yc,useExisting:Wr(()=>sF)};let sF=(()=>{class e extends Yc{constructor(t,r,i,s){super(),this._ngModelWarningConfig=s,this.update=new En,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=iF(0,i)}set isDisabled(t){}ngOnChanges(t){if(this._isControlChanged(t)){const r=t.form.previousValue;r&&rA(r,this,!1),rC(this.form,this),this.form.updateValueAndValidity({emitEvent:!1})}rF(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&rA(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return e._ngModelWarningSentOnce=!1,e.\u0275fac=function(t){return new(t||e)(Xe(Oo,10),Xe(af,10),Xe(gs,10),Xe(oF,8))},e.\u0275dir=Sn({type:e,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Kr([w9]),Xn,Xi]}),e})();const S9={provide:Hs,useExisting:Wr(()=>ty)};let ty=(()=>{class e extends Hs{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new En,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(aA(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return rC(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){rA(t.control||null,t,!1),function p9(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,BH(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(rA(r||null,t),(e=>e instanceof lf)(i)&&(rC(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);NH(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function d9(e,n){return aA(e,n)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){nF(this.form,this),this._oldForm&&aA(this._oldForm,this)}_checkFormPresent(){}}return e.\u0275fac=function(t){return new(t||e)(Xe(Oo,10),Xe(af,10))},e.\u0275dir=Sn({type:e,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&Yt("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Kr([S9]),Xn,Xi]}),e})();const T9={provide:Yc,useExisting:Wr(()=>cF)};let cF=(()=>{class e extends Yc{constructor(t,r,i,s,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new En,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=iF(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),rF(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return nA(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return e._ngModelWarningSentOnce=!1,e.\u0275fac=function(t){return new(t||e)(Xe(Hs,13),Xe(Oo,10),Xe(af,10),Xe(gs,10),Xe(oF,8))},e.\u0275dir=Sn({type:e,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Kr([T9]),Xn,Xi]}),e})();function qH(e){return"number"==typeof e?e:parseFloat(e)}let xv=(()=>{class e{constructor(){this._validator=KE}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):KE,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Sn({type:e,features:[Xi]}),e})();const O9={provide:Oo,useExisting:Wr(()=>fF),multi:!0};let fF=(()=>{class e extends xv{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>qH(t),this.createValidator=t=>sH(t)}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=ta(e)))(r||e)}}(),e.\u0275dir=Sn({type:e,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&Hr("max",r._enabled?r.max:null)},inputs:{max:"max"},features:[Kr([O9]),Xn]}),e})();const k9={provide:Oo,useExisting:Wr(()=>pF),multi:!0};let pF=(()=>{class e extends xv{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>qH(t),this.createValidator=t=>oH(t)}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=ta(e)))(r||e)}}(),e.\u0275dir=Sn({type:e,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&Hr("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[Kr([k9]),Xn]}),e})(),r4=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({imports:[jH]}),e})(),i4=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({imports:[r4]}),e})(),a4=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:oF,useValue:t.warnOnNgModelWithFormControl}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({imports:[r4]}),e})();class Nl extends te{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){const{hasError:n,thrownError:t,_value:r}=this;if(n)throw t;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}}const oA=Se(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function mF(...e){const n=td(e),t=ku(e),{args:r,keys:i}=eH(e);if(0===r.length)return Pn([],n);const s=new B(function G9(e,n,t=M){return r=>{o4(n,()=>{const{length:i}=e,s=new Array(i);let d=i,p=i;for(let v=0;v<i;v++)o4(n,()=>{const _=Pn(e[v],n);let C=!1;_.subscribe(we(r,S=>{s[v]=S,C||(C=!0,p--),p||r.next(t(s.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,n,i?d=>tH(i,d):M));return t?s.pipe(YN(t)):s}function o4(e,n,t){e?Sa(t,e,n):n()}function sA(...e){return function W9(){return Xs(1)}()(Pn(e,td(e)))}function oC(e){return new B(n=>{Dn(e()).subscribe(n)})}function ny(e,n){const t=ce(e)?e:()=>e,r=i=>i.error(t());return new B(n?i=>n.schedule(r,0,i):r)}function _F(){return ge((e,n)=>{let t=null;e._refCount++;const r=we(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(t=null);const i=e._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),n.unsubscribe()});e.subscribe(r),r.closed||(t=e.connect())})}class s4 extends B{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,fe(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new ve;const t=this.getSubject();n.add(this.source.subscribe(we(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=ve.EMPTY)}return n}refCount(){return _F()(this)}}function go(e){return e<=0?()=>La:ge((n,t)=>{let r=0;n.subscribe(we(t,i=>{++r<=e&&(t.next(i),e<=r&&t.complete())}))})}function _l(...e){const n=td(e);return ge((t,r)=>{(n?sA(e,t,n):sA(e,t)).subscribe(r)})}function Ki(e,n){return ge((t,r)=>{let i=0;t.subscribe(we(r,s=>e.call(n,s,i++)&&r.next(s)))})}function lA(e){return ge((n,t)=>{let r=!1;n.subscribe(we(t,i=>{r=!0,t.next(i)},()=>{r||t.next(e),t.complete()}))})}function l4(e=j9){return ge((n,t)=>{let r=!1;n.subscribe(we(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(e())))})}function j9(){return new oA}function cf(e,n){const t=arguments.length>=2;return r=>r.pipe(e?Ki((i,s)=>e(i,s,r)):M,go(1),t?lA(n):l4(()=>new oA))}function df(e,n){return ce(n)?ua(e,n,1):ua(e,1)}function mo(e,n,t){const r=ce(e)||n||t?{next:e,error:n,complete:t}:e;return r?ge((i,s)=>{var d;null===(d=r.subscribe)||void 0===d||d.call(r);let p=!0;i.subscribe(we(s,v=>{var _;null===(_=r.next)||void 0===_||_.call(r,v),s.next(v)},()=>{var v;p=!1,null===(v=r.complete)||void 0===v||v.call(r),s.complete()},v=>{var _;p=!1,null===(_=r.error)||void 0===_||_.call(r,v),s.error(v)},()=>{var v,_;p&&(null===(v=r.unsubscribe)||void 0===v||v.call(r)),null===(_=r.finalize)||void 0===_||_.call(r)}))}):M}function Zd(e){return ge((n,t)=>{let s,r=null,i=!1;r=n.subscribe(we(t,void 0,void 0,d=>{s=Dn(e(d,Zd(e)(n))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Z9(e,n,t,r,i){return(s,d)=>{let p=t,v=n,_=0;s.subscribe(we(d,C=>{const S=_++;v=p?e(v,C,S):(p=!0,C),r&&d.next(v)},i&&(()=>{p&&d.next(v),d.complete()})))}}function u4(e,n){return ge(Z9(e,n,arguments.length>=2,!0))}function yF(e){return e<=0?()=>La:ge((n,t)=>{let r=[];n.subscribe(we(t,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function c4(e,n){const t=arguments.length>=2;return r=>r.pipe(e?Ki((i,s)=>e(i,s,r)):M,yF(1),t?lA(n):l4(()=>new oA))}function d4(e,n=!1){return ge((t,r)=>{let i=0;t.subscribe(we(r,s=>{const d=e(s,i++);(d||n)&&r.next(s),!d&&r.complete()}))})}function bF(e){return Ae(()=>e)}function uA(e){return ge((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}const li="primary",sC=Symbol("RouteTitle");class Y9{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ry(e){return new Y9(e)}function X9(e,n,t){const r=t.path.split("/");if(r.length>e.length||"full"===t.pathMatch&&(n.hasChildren()||r.length<e.length))return null;const i={};for(let s=0;s<r.length;s++){const d=r[s],p=e[s];if(d.startsWith(":"))i[d.substring(1)]=p;else if(d!==p.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function Xc(e,n){const t=e?Object.keys(e):void 0,r=n?Object.keys(n):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!h4(e[i],n[i]))return!1;return!0}function h4(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;const t=[...e].sort(),r=[...n].sort();return t.every((i,s)=>r[s]===i)}return e===n}function f4(e){return Array.prototype.concat.apply([],e)}function p4(e){return e.length>0?e[e.length-1]:null}function ms(e,n){for(const t in e)e.hasOwnProperty(t)&&n(e[t],t)}function hf(e){return ix(e)?e:Gp(e)?Pn(Promise.resolve(e)):$n(e)}const Q9={exact:function m4(e,n,t){if(!wv(e.segments,n.segments)||!cA(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children)if(!e.children[r]||!m4(e.children[r],n.children[r],t))return!1;return!0},subset:_4},v4={exact:function q9(e,n){return Xc(e,n)},subset:function J9(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>h4(e[t],n[t]))},ignored:()=>!0};function g4(e,n,t){return Q9[t.paths](e.root,n.root,t.matrixParams)&&v4[t.queryParams](e.queryParams,n.queryParams)&&!("exact"===t.fragment&&e.fragment!==n.fragment)}function _4(e,n,t){return y4(e,n,n.segments,t)}function y4(e,n,t,r){if(e.segments.length>t.length){const i=e.segments.slice(0,t.length);return!(!wv(i,t)||n.hasChildren()||!cA(i,t,r))}if(e.segments.length===t.length){if(!wv(e.segments,t)||!cA(e.segments,t,r))return!1;for(const i in n.children)if(!e.children[i]||!_4(e.children[i],n.children[i],r))return!1;return!0}{const i=t.slice(0,e.segments.length),s=t.slice(e.segments.length);return!!(wv(e.segments,i)&&cA(e.segments,i,r)&&e.children[li])&&y4(e.children[li],n,s,r)}}function cA(e,n,t){return n.every((r,i)=>v4[t](e[i].parameters,r.parameters))}class Cv{constructor(n,t,r){this.root=n,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ry(this.queryParams)),this._queryParamMap}toString(){return n7.serialize(this)}}class ci{constructor(n,t){this.segments=n,this.children=t,this.parent=null,ms(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return dA(this)}}class lC{constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ry(this.parameters)),this._parameterMap}toString(){return w4(this)}}function wv(e,n){return e.length===n.length&&e.every((t,r)=>t.path===n[r].path)}let b4=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:function(){return new CF},providedIn:"root"}),e})();class CF{parse(n){const t=new d7(n);return new Cv(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){const t=`/${uC(n.root,!0)}`,r=function a7(e){const n=Object.keys(e).map(t=>{const r=e[t];return Array.isArray(r)?r.map(i=>`${hA(t)}=${hA(i)}`).join("&"):`${hA(t)}=${hA(r)}`}).filter(t=>!!t);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${t}${r}${"string"==typeof n.fragment?`#${function r7(e){return encodeURI(e)}(n.fragment)}`:""}`}}const n7=new CF;function dA(e){return e.segments.map(n=>w4(n)).join("/")}function uC(e,n){if(!e.hasChildren())return dA(e);if(n){const t=e.children[li]?uC(e.children[li],!1):"",r=[];return ms(e.children,(i,s)=>{s!==li&&r.push(`${s}:${uC(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function t7(e,n){let t=[];return ms(e.children,(r,i)=>{i===li&&(t=t.concat(n(r,i)))}),ms(e.children,(r,i)=>{i!==li&&(t=t.concat(n(r,i)))}),t}(e,(r,i)=>i===li?[uC(e.children[li],!1)]:[`${i}:${uC(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[li]?`${dA(e)}/${t[0]}`:`${dA(e)}/(${t.join("//")})`}}function x4(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hA(e){return x4(e).replace(/%3B/gi,";")}function wF(e){return x4(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fA(e){return decodeURIComponent(e)}function C4(e){return fA(e.replace(/\+/g,"%20"))}function w4(e){return`${wF(e.path)}${function i7(e){return Object.keys(e).map(n=>`;${wF(n)}=${wF(e[n])}`).join("")}(e.parameters)}`}const o7=/^[^\/()?;=#]+/;function pA(e){const n=e.match(o7);return n?n[0]:""}const s7=/^[^=?&#]+/,u7=/^[^&#]+/;class d7{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ci([],{}):new ci([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(r[li]=new ci(n,t)),r}parseSegment(){const n=pA(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Jt(4009,!1);return this.capture(n),new lC(fA(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const t=pA(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=pA(this.remaining);i&&(r=i,this.capture(r))}n[fA(t)]=fA(r)}parseQueryParam(n){const t=function l7(e){const n=e.match(s7);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function c7(e){const n=e.match(u7);return n?n[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const i=C4(t),s=C4(r);if(n.hasOwnProperty(i)){let d=n[i];Array.isArray(d)||(d=[d],n[i]=d),d.push(s)}else n[i]=s}parseParens(n){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=pA(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Jt(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):n&&(s=li);const d=this.parseChildren();t[s]=1===Object.keys(d).length?d[li]:new ci([],d),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new Jt(4011,!1)}}function SF(e){return e.segments.length>0?new ci([],{[li]:e}):e}function vA(e){const n={};for(const r of Object.keys(e.children)){const s=vA(e.children[r]);(s.segments.length>0||s.hasChildren())&&(n[r]=s)}return function h7(e){if(1===e.numberOfChildren&&e.children[li]){const n=e.children[li];return new ci(e.segments.concat(n.segments),n.children)}return e}(new ci(e.segments,n))}function Sv(e){return e instanceof Cv}function v7(e,n,t,r,i){if(0===t.length)return iy(n.root,n.root,n.root,r,i);const s=function M4(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new D4(!0,0,e);let n=0,t=!1;const r=e.reduce((i,s,d)=>{if("object"==typeof s&&null!=s){if(s.outlets){const p={};return ms(s.outlets,(v,_)=>{p[_]="string"==typeof v?v.split("/"):v}),[...i,{outlets:p}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===d?(s.split("/").forEach((p,v)=>{0==v&&"."===p||(0==v&&""===p?t=!0:".."===p?n++:""!=p&&i.push(p))}),i):[...i,s]},[]);return new D4(t,n,r)}(t);return s.toRoot()?iy(n.root,n.root,new ci([],{}),r,i):function d(v){const _=function m7(e,n,t,r){if(e.isAbsolute)return new ay(n.root,!0,0);if(-1===r)return new ay(t,t===n.root,0);return function T4(e,n,t){let r=e,i=n,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Jt(4005,!1);i=r.segments.length}return new ay(r,!1,i-s)}(t,r+(cC(e.commands[0])?0:1),e.numberOfDoubleDots)}(s,n,e.snapshot?._urlSegment,v),C=_.processChildren?hC(_.segmentGroup,_.index,s.commands):MF(_.segmentGroup,_.index,s.commands);return iy(n.root,_.segmentGroup,C,r,i)}(e.snapshot?._lastPathIndex)}function cC(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function dC(e){return"object"==typeof e&&null!=e&&e.outlets}function iy(e,n,t,r,i){let d,s={};r&&ms(r,(v,_)=>{s[_]=Array.isArray(v)?v.map(C=>`${C}`):`${v}`}),d=e===n?t:S4(e,n,t);const p=SF(vA(d));return new Cv(p,s,i)}function S4(e,n,t){const r={};return ms(e.children,(i,s)=>{r[s]=i===n?t:S4(i,n,t)}),new ci(e.segments,r)}class D4{constructor(n,t,r){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=r,n&&r.length>0&&cC(r[0]))throw new Jt(4003,!1);const i=r.find(dC);if(i&&i!==p4(r))throw new Jt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ay{constructor(n,t,r){this.segmentGroup=n,this.processChildren=t,this.index=r}}function MF(e,n,t){if(e||(e=new ci([],{})),0===e.segments.length&&e.hasChildren())return hC(e,n,t);const r=function y7(e,n,t){let r=0,i=n;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=t.length)return s;const d=e.segments[i],p=t[r];if(dC(p))break;const v=`${p}`,_=r<t.length-1?t[r+1]:null;if(i>0&&void 0===v)break;if(v&&_&&"object"==typeof _&&void 0===_.outlets){if(!A4(v,_,d))return s;r+=2}else{if(!A4(v,{},d))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,n,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const s=new ci(e.segments.slice(0,r.pathIndex),{});return s.children[li]=new ci(e.segments.slice(r.pathIndex),e.children),hC(s,0,i)}return r.match&&0===i.length?new ci(e.segments,{}):r.match&&!e.hasChildren()?TF(e,n,t):r.match?hC(e,0,i):TF(e,n,t)}function hC(e,n,t){if(0===t.length)return new ci(e.segments,{});{const r=function _7(e){return dC(e[0])?e[0].outlets:{[li]:e}}(t),i={};return ms(r,(s,d)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[d]=MF(e.children[d],n,s))}),ms(e.children,(s,d)=>{void 0===r[d]&&(i[d]=s)}),new ci(e.segments,i)}}function TF(e,n,t){const r=e.segments.slice(0,n);let i=0;for(;i<t.length;){const s=t[i];if(dC(s)){const v=b7(s.outlets);return new ci(r,v)}if(0===i&&cC(t[0])){r.push(new lC(e.segments[n].path,E4(t[0]))),i++;continue}const d=dC(s)?s.outlets[li]:`${s}`,p=i<t.length-1?t[i+1]:null;d&&p&&cC(p)?(r.push(new lC(d,E4(p))),i+=2):(r.push(new lC(d,{})),i++)}return new ci(r,{})}function b7(e){const n={};return ms(e,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(n[r]=TF(new ci([],{}),0,t))}),n}function E4(e){const n={};return ms(e,(t,r)=>n[r]=`${t}`),n}function A4(e,n,t){return e==t.path&&Xc(n,t.parameters)}class Yd{constructor(n,t){this.id=n,this.url=t}}class EF extends Yd{constructor(n,t,r="imperative",i=null){super(n,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Dv extends Yd{constructor(n,t,r){super(n,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class gA extends Yd{constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class I4 extends Yd{constructor(n,t,r,i){super(n,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class x7 extends Yd{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class C7 extends Yd{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class w7 extends Yd{constructor(n,t,r,i,s){super(n,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class S7 extends Yd{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class D7 extends Yd{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class M7{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class T7{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class E7{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class A7{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class I7{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class P7{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class P4{constructor(n,t,r){this.routerEvent=n,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class R4{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){const t=AF(n,this._root);return t?t.children.map(r=>r.value):[]}firstChild(n){const t=AF(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){const t=IF(n,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return IF(n,this._root).map(t=>t.value)}}function AF(e,n){if(e===n.value)return n;for(const t of n.children){const r=AF(e,t);if(r)return r}return null}function IF(e,n){if(e===n.value)return[n];for(const t of n.children){const r=IF(e,t);if(r.length)return r.unshift(n),r}return[]}class Xd{constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}}function oy(e){const n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}class L4 extends R4{constructor(n,t){super(n),this.snapshot=t,PF(this,n)}toString(){return this.snapshot.toString()}}function O4(e,n){const t=function L7(e,n){const d=new mA([],{},{},"",{},li,n,null,e.root,-1,{});return new N4("",new Xd(d,[]))}(e,n),r=new Nl([new lC("",{})]),i=new Nl({}),s=new Nl({}),d=new Nl({}),p=new Nl(""),v=new Mv(r,i,d,p,s,li,n,t.root);return v.snapshot=t.root,new L4(new Xd(v,[]),t)}class Mv{constructor(n,t,r,i,s,d,p,v){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=d,this.component=p,this.title=this.data?.pipe(Ae(_=>_[sC]))??$n(void 0),this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ae(n=>ry(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ae(n=>ry(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function k4(e,n="emptyOnly"){const t=e.pathFromRoot;let r=0;if("always"!==n)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function O7(e){return e.reduce((n,t)=>({params:{...n.params,...t.params},data:{...n.data,...t.data},resolve:{...t.data,...n.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class mA{constructor(n,t,r,i,s,d,p,v,_,C,S,k){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=d,this.component=p,this.title=this.data?.[sC],this.routeConfig=v,this._urlSegment=_,this._lastPathIndex=C,this._correctedLastPathIndex=k??C,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ry(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ry(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class N4 extends R4{constructor(n,t){super(t),this.url=n,PF(this,t)}toString(){return F4(this._root)}}function PF(e,n){n.value._routerState=e,n.children.forEach(t=>PF(e,t))}function F4(e){const n=e.children.length>0?` { ${e.children.map(F4).join(", ")} } `:"";return`${e.value}${n}`}function RF(e){if(e.snapshot){const n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,Xc(n.queryParams,t.queryParams)||e.queryParams.next(t.queryParams),n.fragment!==t.fragment&&e.fragment.next(t.fragment),Xc(n.params,t.params)||e.params.next(t.params),function $9(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!Xc(e[t],n[t]))return!1;return!0}(n.url,t.url)||e.url.next(t.url),Xc(n.data,t.data)||e.data.next(t.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function LF(e,n){const t=Xc(e.params,n.params)&&function e7(e,n){return wv(e,n)&&e.every((t,r)=>Xc(t.parameters,n[r].parameters))}(e.url,n.url);return t&&!(!e.parent!=!n.parent)&&(!e.parent||LF(e.parent,n.parent))}function fC(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=n.value;const i=function N7(e,n,t){return n.children.map(r=>{for(const i of t.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return fC(e,r,i);return fC(e,r)})}(e,n,t);return new Xd(r,i)}{if(e.shouldAttach(n.value)){const s=e.retrieve(n.value);if(null!==s){const d=s.route;return d.value._futureSnapshot=n.value,d.children=n.children.map(p=>fC(e,p)),d}}const r=function F7(e){return new Mv(new Nl(e.url),new Nl(e.params),new Nl(e.queryParams),new Nl(e.fragment),new Nl(e.data),e.outlet,e.component,e)}(n.value),i=n.children.map(s=>fC(e,s));return new Xd(r,i)}}const OF="ngNavigationCancelingError";function B4(e,n){const{redirectTo:t,navigationBehaviorOptions:r}=Sv(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,i=V4(!1,0,n);return i.url=t,i.navigationBehaviorOptions=r,i}function V4(e,n,t){const r=new Error("NavigationCancelingError: "+(e||""));return r[OF]=!0,r.cancellationCode=n,t&&(r.url=t),r}function z4(e){return H4(e)&&Sv(e.url)}function H4(e){return e&&e[OF]}class B7{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new pC,this.attachRef=null}}let pC=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new B7,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const _A=!1;let kF=(()=>{class e{constructor(t,r,i,s,d){this.parentContexts=t,this.location=r,this.changeDetector=s,this.environmentInjector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new En,this.deactivateEvents=new En,this.attachEvents=new En,this.detachEvents=new En,this.name=i||li,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Jt(4012,_A);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Jt(4012,_A);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Jt(4012,_A);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Jt(4013,_A);this._activatedRoute=t;const i=this.location,d=t._futureSnapshot.component,p=this.parentContexts.getOrCreateContext(this.name).children,v=new V7(t,p,i.injector);if(r&&function z7(e){return!!e.resolveComponentFactory}(r)){const _=r.resolveComponentFactory(d);this.activated=i.createComponent(_,i.length,v)}else this.activated=i.createComponent(d,{index:i.length,injector:v,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(Xe(pC),Xe(Ro),Ls("name"),Xe(da),Xe(Zu))},e.\u0275dir=Sn({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),e})();class V7{constructor(n,t,r){this.route=n,this.childContexts=t,this.parent=r}get(n,t){return n===Mv?this.route:n===pC?this.childContexts:this.parent.get(n,t)}}let NF=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=qn({type:e,selectors:[["ng-component"]],standalone:!0,features:[Rx],decls:1,vars:0,template:function(t,r){1&t&&Rn(0,"router-outlet")},dependencies:[kF],encapsulation:2}),e})();function U4(e,n){return e.providers&&!e._injector&&(e._injector=qp(e.providers,n,`Route: ${e.path}`)),e._injector??n}function BF(e){const n=e.children&&e.children.map(BF),t=n?{...e,children:n}:{...e};return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==li&&(t.component=NF),t}function wu(e){return e.outlet||li}function G4(e,n){const t=e.filter(r=>wu(r)===n);return t.push(...e.filter(r=>wu(r)!==n)),t}function vC(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){const t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class j7{constructor(n,t,r,i){this.routeReuseStrategy=n,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(n){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,n),RF(this.futureState.root),this.activateChildRoutes(t,r,n)}deactivateChildRoutes(n,t,r){const i=oy(t);n.children.forEach(s=>{const d=s.value.outlet;this.deactivateRoutes(s,i[d],r),delete i[d]}),ms(i,(s,d)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(n,t,r){const i=n.value,s=t?t.value:null;if(i===s)if(i.component){const d=r.getContext(i.outlet);d&&this.deactivateChildRoutes(n,t,d.children)}else this.deactivateChildRoutes(n,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){const r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,s=oy(n);for(const d of Object.keys(s))this.deactivateRouteAndItsChildren(s[d],i);if(r&&r.outlet){const d=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:d,route:n,contexts:p})}}deactivateRouteAndOutlet(n,t){const r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,s=oy(n);for(const d of Object.keys(s))this.deactivateRouteAndItsChildren(s[d],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(n,t,r){const i=oy(t);n.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new P7(s.value.snapshot))}),n.children.length&&this.forwardEvent(new A7(n.value.snapshot))}activateRoutes(n,t,r){const i=n.value,s=t?t.value:null;if(RF(i),i===s)if(i.component){const d=r.getOrCreateContext(i.outlet);this.activateChildRoutes(n,t,d.children)}else this.activateChildRoutes(n,t,r);else if(i.component){const d=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),d.children.onOutletReAttached(p.contexts),d.attachRef=p.componentRef,d.route=p.route.value,d.outlet&&d.outlet.attach(p.componentRef,p.route.value),RF(p.route.value),this.activateChildRoutes(n,null,d.children)}else{const p=vC(i.snapshot),v=p?.get(xd)??null;d.attachRef=null,d.route=i,d.resolver=v,d.injector=p,d.outlet&&d.outlet.activateWith(i,d.injector),this.activateChildRoutes(n,null,d.children)}}else this.activateChildRoutes(n,null,r)}}class W4{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class yA{constructor(n,t){this.component=n,this.route=t}}function Z7(e,n,t){const r=e._root;return gC(r,n?n._root:null,t,[r.value])}function sy(e,n){const t=Symbol(),r=n.get(e,t);return r===t?"function"!=typeof e||function ch(e){return null!==cc(e)}(e)?n.get(e):e:r}function gC(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=oy(n);return e.children.forEach(d=>{(function X7(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,d=n?n.value:null,p=t?t.getContext(e.value.outlet):null;if(d&&s.routeConfig===d.routeConfig){const v=function $7(e,n,t){if("function"==typeof t)return t(e,n);switch(t){case"pathParamsChange":return!wv(e.url,n.url);case"pathParamsOrQueryParamsChange":return!wv(e.url,n.url)||!Xc(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!LF(e,n)||!Xc(e.queryParams,n.queryParams);default:return!LF(e,n)}}(d,s,s.routeConfig.runGuardsAndResolvers);v?i.canActivateChecks.push(new W4(r)):(s.data=d.data,s._resolvedData=d._resolvedData),gC(e,n,s.component?p?p.children:null:t,r,i),v&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new yA(p.outlet.component,d))}else d&&mC(n,p,i),i.canActivateChecks.push(new W4(r)),gC(e,null,s.component?p?p.children:null:t,r,i)})(d,s[d.value.outlet],t,r.concat([d.value]),i),delete s[d.value.outlet]}),ms(s,(d,p)=>mC(d,t.getContext(p),i)),i}function mC(e,n,t){const r=oy(e),i=e.value;ms(r,(s,d)=>{mC(s,i.component?n?n.children.getContext(d):null:n,t)}),t.canDeactivateChecks.push(new yA(i.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,i))}function _C(e){return"function"==typeof e}function VF(e){return e instanceof oA||"EmptyError"===e?.name}const bA=Symbol("INITIAL_VALUE");function ly(){return ml(e=>mF(e.map(n=>n.pipe(go(1),_l(bA)))).pipe(Ae(n=>{for(const t of n)if(!0!==t){if(t===bA)return bA;if(!1===t||t instanceof Cv)return t}return!0}),Ki(n=>n!==bA),go(1)))}function j4(e){return function A(...e){return O(e)}(mo(n=>{if(Sv(n))throw B4(0,n)}),Ae(n=>!0===n))}const zF={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Z4(e,n,t,r,i){const s=HF(e,n,t);return s.matched?function hY(e,n,t,r){const i=n.canMatch;return i&&0!==i.length?$n(i.map(d=>{const p=sy(d,e);return hf(function tY(e){return e&&_C(e.canMatch)}(p)?p.canMatch(n,t):e.runInContext(()=>p(n,t)))})).pipe(ly(),j4()):$n(!0)}(r=U4(n,r),n,t).pipe(Ae(d=>!0===d?s:{...zF})):$n(s)}function HF(e,n,t){if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||t.length>0)?{...zF}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(n.matcher||X9)(t,e,n);if(!i)return{...zF};const s={};ms(i.posParams,(p,v)=>{s[v]=p.path});const d=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:d,positionalParamSegments:i.posParams??{}}}function xA(e,n,t,r,i="corrected"){if(t.length>0&&function vY(e,n,t){return t.some(r=>CA(e,n,r)&&wu(r)!==li)}(e,t,r)){const d=new ci(n,function pY(e,n,t,r){const i={};i[li]=r,r._sourceSegment=e,r._segmentIndexShift=n.length;for(const s of t)if(""===s.path&&wu(s)!==li){const d=new ci([],{});d._sourceSegment=e,d._segmentIndexShift=n.length,i[wu(s)]=d}return i}(e,n,r,new ci(t,e.children)));return d._sourceSegment=e,d._segmentIndexShift=n.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function gY(e,n,t){return t.some(r=>CA(e,n,r))}(e,t,r)){const d=new ci(e.segments,function fY(e,n,t,r,i,s){const d={};for(const p of r)if(CA(e,t,p)&&!i[wu(p)]){const v=new ci([],{});v._sourceSegment=e,v._segmentIndexShift="legacy"===s?e.segments.length:n.length,d[wu(p)]=v}return{...i,...d}}(e,n,t,r,e.children,i));return d._sourceSegment=e,d._segmentIndexShift=n.length,{segmentGroup:d,slicedSegments:t}}const s=new ci(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=n.length,{segmentGroup:s,slicedSegments:t}}function CA(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path}function Y4(e,n,t,r){return!!(wu(e)===r||r!==li&&CA(n,t,e))&&("**"===e.path||HF(n,e,t).matched)}function X4(e,n,t){return 0===n.length&&!e.children[t]}const wA=!1;class SA{constructor(n){this.segmentGroup=n||null}}class $4{constructor(n){this.urlTree=n}}function yC(e){return ny(new SA(e))}function K4(e){return ny(new $4(e))}class bY{constructor(n,t,r,i,s){this.injector=n,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const n=xA(this.urlTree.root,[],[],this.config).segmentGroup,t=new ci(n.segments,n.children);return this.expandSegmentGroup(this.injector,this.config,t,li).pipe(Ae(s=>this.createUrlTree(vA(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Zd(s=>{if(s instanceof $4)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof SA?this.noMatchError(s):s}))}match(n){return this.expandSegmentGroup(this.injector,this.config,n.root,li).pipe(Ae(i=>this.createUrlTree(vA(i),n.queryParams,n.fragment))).pipe(Zd(i=>{throw i instanceof SA?this.noMatchError(i):i}))}noMatchError(n){return new Jt(4002,wA)}createUrlTree(n,t,r){const i=SF(n);return new Cv(i,t,r)}expandSegmentGroup(n,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(n,t,r).pipe(Ae(s=>new ci([],s))):this.expandSegment(n,r,t,r.segments,i,!0)}expandChildren(n,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return Pn(i).pipe(df(s=>{const d=r.children[s],p=G4(t,s);return this.expandSegmentGroup(n,p,d,s).pipe(Ae(v=>({segment:v,outlet:s})))}),u4((s,d)=>(s[d.outlet]=d.segment,s),{}),c4())}expandSegment(n,t,r,i,s,d){return Pn(r).pipe(df(p=>this.expandSegmentAgainstRoute(n,t,r,p,i,s,d).pipe(Zd(_=>{if(_ instanceof SA)return $n(null);throw _}))),cf(p=>!!p),Zd((p,v)=>{if(VF(p))return X4(t,i,s)?$n(new ci([],{})):yC(t);throw p}))}expandSegmentAgainstRoute(n,t,r,i,s,d,p){return Y4(i,t,s,d)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(n,t,i,s,d):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,t,r,i,s,d):yC(t):yC(t)}expandSegmentAgainstRouteUsingRedirect(n,t,r,i,s,d){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,r,i,d):this.expandRegularSegmentAgainstRouteUsingRedirect(n,t,r,i,s,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?K4(s):this.lineralizeSegments(r,s).pipe(ua(d=>{const p=new ci(d,{});return this.expandSegment(n,p,t,d,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,t,r,i,s,d){const{matched:p,consumedSegments:v,remainingSegments:_,positionalParamSegments:C}=HF(t,i,s);if(!p)return yC(t);const S=this.applyRedirectCommands(v,i.redirectTo,C);return i.redirectTo.startsWith("/")?K4(S):this.lineralizeSegments(i,S).pipe(ua(k=>this.expandSegment(n,t,r,k.concat(_),d,!1)))}matchSegmentAgainstRoute(n,t,r,i,s){return"**"===r.path?(n=U4(r,n),r.loadChildren?(r._loadedRoutes?$n({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(n,r)).pipe(Ae(p=>(r._loadedRoutes=p.routes,r._loadedInjector=p.injector,new ci(i,{})))):$n(new ci(i,{}))):Z4(t,r,i,n).pipe(ml(({matched:d,consumedSegments:p,remainingSegments:v})=>d?this.getChildConfig(n=r._injector??n,r,i).pipe(ua(C=>{const S=C.injector??n,k=C.routes,{segmentGroup:H,slicedSegments:ne}=xA(t,p,v,k),pe=new ci(H.segments,H.children);if(0===ne.length&&pe.hasChildren())return this.expandChildren(S,k,pe).pipe(Ae(Oe=>new ci(p,Oe)));if(0===k.length&&0===ne.length)return $n(new ci(p,{}));const Me=wu(r)===s;return this.expandSegment(S,pe,k,ne,Me?li:s,!0).pipe(Ae(Fe=>new ci(p.concat(Fe.segments),Fe.children)))})):yC(t)))}getChildConfig(n,t,r){return t.children?$n({routes:t.children,injector:n}):t.loadChildren?void 0!==t._loadedRoutes?$n({routes:t._loadedRoutes,injector:t._loadedInjector}):function dY(e,n,t,r){const i=n.canLoad;return void 0===i||0===i.length?$n(!0):$n(i.map(d=>{const p=sy(d,e);return hf(function Q7(e){return e&&_C(e.canLoad)}(p)?p.canLoad(n,t):e.runInContext(()=>p(n,t)))})).pipe(ly(),j4())}(n,t,r).pipe(ua(i=>i?this.configLoader.loadChildren(n,t).pipe(mo(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function _Y(e){return ny(V4(wA,3))}())):$n({routes:[],injector:n})}lineralizeSegments(n,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return $n(r);if(i.numberOfChildren>1||!i.children[li])return ny(new Jt(4e3,wA));i=i.children[li]}}applyRedirectCommands(n,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,r)}applyRedirectCreateUrlTree(n,t,r,i){const s=this.createSegmentGroup(n,t.root,r,i);return new Cv(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){const r={};return ms(n,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[s]=t[p]}else r[s]=i}),r}createSegmentGroup(n,t,r,i){const s=this.createSegments(n,t.segments,r,i);let d={};return ms(t.children,(p,v)=>{d[v]=this.createSegmentGroup(n,p,r,i)}),new ci(s,d)}createSegments(n,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(n,s,i):this.findOrReturn(s,r))}findPosParam(n,t,r){const i=r[t.path.substring(1)];if(!i)throw new Jt(4001,wA);return i}findOrReturn(n,t){let r=0;for(const i of t){if(i.path===n.path)return t.splice(r),i;r++}return n}}class CY{}class DY{constructor(n,t,r,i,s,d,p,v){this.injector=n,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=p,this.urlSerializer=v}recognize(){const n=xA(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,li).pipe(Ae(t=>{if(null===t)return null;const r=new mA([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},li,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Xd(r,t),s=new N4(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(n){const t=n.value,r=k4(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),n.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(n,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,t,r):this.processSegment(n,t,r,r.segments,i)}processChildren(n,t,r){return Pn(Object.keys(r.children)).pipe(df(i=>{const s=r.children[i],d=G4(t,i);return this.processSegmentGroup(n,d,s,i)}),u4((i,s)=>i&&s?(i.push(...s),i):null),d4(i=>null!==i),lA(null),c4(),Ae(i=>{if(null===i)return null;const s=Q4(i);return function MY(e){e.sort((n,t)=>n.value.outlet===li?-1:t.value.outlet===li?1:n.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(n,t,r,i,s){return Pn(t).pipe(df(d=>this.processSegmentAgainstRoute(d._injector??n,d,r,i,s)),cf(d=>!!d),Zd(d=>{if(VF(d))return X4(r,i,s)?$n([]):$n(null);throw d}))}processSegmentAgainstRoute(n,t,r,i,s){if(t.redirectTo||!Y4(t,r,i,s))return $n(null);let d;if("**"===t.path){const p=i.length>0?p4(i).parameters:{},v=J4(r)+i.length;d=$n({snapshot:new mA(i,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tU(t),wu(t),t.component??t._loadedComponent??null,t,q4(r),v,nU(t),v),consumedSegments:[],remainingSegments:[]})}else d=Z4(r,t,i,n).pipe(Ae(({matched:p,consumedSegments:v,remainingSegments:_,parameters:C})=>{if(!p)return null;const S=J4(r)+v.length;return{snapshot:new mA(v,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tU(t),wu(t),t.component??t._loadedComponent??null,t,q4(r),S,nU(t),S),consumedSegments:v,remainingSegments:_}}));return d.pipe(ml(p=>{if(null===p)return $n(null);const{snapshot:v,consumedSegments:_,remainingSegments:C}=p;n=t._injector??n;const S=t._loadedInjector??n,k=function TY(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(t),{segmentGroup:H,slicedSegments:ne}=xA(r,_,C,k.filter(Me=>void 0===Me.redirectTo),this.relativeLinkResolution);if(0===ne.length&&H.hasChildren())return this.processChildren(S,k,H).pipe(Ae(Me=>null===Me?null:[new Xd(v,Me)]));if(0===k.length&&0===ne.length)return $n([new Xd(v,[])]);const pe=wu(t)===s;return this.processSegment(S,k,H,ne,pe?li:s).pipe(Ae(Me=>null===Me?null:[new Xd(v,Me)]))}))}}function EY(e){const n=e.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function Q4(e){const n=[],t=new Set;for(const r of e){if(!EY(r)){n.push(r);continue}const i=n.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):n.push(r)}for(const r of t){const i=Q4(r.children);n.push(new Xd(r.value,i))}return n.filter(r=>!t.has(r))}function q4(e){let n=e;for(;n._sourceSegment;)n=n._sourceSegment;return n}function J4(e){let n=e,t=n._segmentIndexShift??0;for(;n._sourceSegment;)n=n._sourceSegment,t+=n._segmentIndexShift??0;return t-1}function tU(e){return e.data||{}}function nU(e){return e.resolve||{}}function rU(e){return"string"==typeof e.title||null===e.title}function UF(e){return ml(n=>{const t=e(n);return t?Pn(t).pipe(Ae(()=>n)):$n(n)})}let iU=(()=>{class e{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===li);return r}getResolvedTitleForRoute(t){return t.data[sC]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:function(){return oa(aU)},providedIn:"root"}),e})(),aU=(()=>{class e extends iU{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return e.\u0275fac=function(t){return new(t||e)(Lt(jz))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class NY{}class BY extends class FY{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}}{}const MA=new sn("",{providedIn:"root",factory:()=>({})}),GF=new sn("ROUTES");let WF=(()=>{class e{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return $n(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=hf(t.loadComponent()).pipe(mo(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),uA(()=>{this.componentLoaders.delete(t)})),i=new s4(r,()=>new te).pipe(_F());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return $n({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(Ae(p=>{this.onLoadEndListener&&this.onLoadEndListener(r);let v,_,C=!1;Array.isArray(p)?_=p:(v=p.create(t).injector,_=f4(v.get(GF,[],Jn.Self|Jn.Optional)));return{routes:_.map(BF),injector:v}}),uA(()=>{this.childrenLoaders.delete(r)})),d=new s4(s,()=>new te).pipe(_F());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return hf(t()).pipe(ua(r=>r instanceof Qp||Array.isArray(r)?$n(r):Pn(this.compiler.compileModuleAsync(r))))}}return e.\u0275fac=function(t){return new(t||e)(Lt(Wa),Lt(bu))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class zY{}class HY{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,t){return n}}function UY(e){throw e}function GY(e,n,t){return n.parse("/")}const WY={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},jY={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function sU(){const e=oa(b4),n=oa(pC),t=oa(Ud),r=oa(Wa),i=oa(bu),s=oa(GF,{optional:!0})??[],d=oa(MA,{optional:!0})??{},p=oa(aU),v=oa(iU,{optional:!0}),_=oa(zY,{optional:!0}),C=oa(NY,{optional:!0}),S=new _s(null,e,n,t,r,i,f4(s));return _&&(S.urlHandlingStrategy=_),C&&(S.routeReuseStrategy=C),S.titleStrategy=v??p,function ZY(e,n){e.errorHandler&&(n.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(n.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(n.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(n.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(n.urlUpdateStrategy=e.urlUpdateStrategy),e.canceledNavigationResolution&&(n.canceledNavigationResolution=e.canceledNavigationResolution)}(d,S),S}let _s=(()=>{class e{constructor(t,r,i,s,d,p,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new te,this.errorHandler=UY,this.malformedUriErrorHandler=GY,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>$n(void 0),this.urlHandlingStrategy=new HY,this.routeReuseStrategy=new BY,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=d.get(WF),this.configLoader.onLoadEndListener=k=>this.triggerEvent(new T7(k)),this.configLoader.onLoadStartListener=k=>this.triggerEvent(new M7(k)),this.ngModule=d.get(Pd),this.console=d.get(ok);const S=d.get(rr);this.isNgZoneEnabled=S instanceof rr&&rr.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function K9(){return new Cv(new ci([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=O4(this.currentUrlTree,this.rootComponentType),this.transitions=new Nl({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ki(i=>0!==i.id),Ae(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),ml(i=>{let s=!1,d=!1;return $n(i).pipe(mo(p=>{this.currentNavigation={id:p.id,initialUrl:p.rawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ml(p=>{const v=this.browserUrlTree.toString(),_=!this.navigated||p.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||_)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return lU(p.source)&&(this.browserUrlTree=p.extractedUrl),$n(p).pipe(ml(S=>{const k=this.transitions.getValue();return r.next(new EF(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),k!==this.transitions.getValue()?La:Promise.resolve(S)}),function xY(e,n,t,r){return ml(i=>function yY(e,n,t,r,i){return new bY(e,n,t,r,i).apply()}(e,n,t,i.extractedUrl,r).pipe(Ae(s=>({...i,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),mo(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},i.urlAfterRedirects=S.urlAfterRedirects}),function IY(e,n,t,r,i,s){return ua(d=>function SY(e,n,t,r,i,s,d="emptyOnly",p="legacy"){return new DY(e,n,t,r,i,d,p,s).recognize().pipe(ml(v=>null===v?function wY(e){return new B(n=>n.error(e))}(new CY):$n(v)))}(e,n,t,d.urlAfterRedirects,r.serialize(d.urlAfterRedirects),r,i,s).pipe(Ae(p=>({...d,targetSnapshot:p}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),mo(S=>{if(i.targetSnapshot=S.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const H=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(H,S)}this.browserUrlTree=S.urlAfterRedirects}const k=new x7(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(k)}));if(_&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:k,extractedUrl:H,source:ne,restoredState:pe,extras:Me}=p,Re=new EF(k,this.serializeUrl(H),ne,pe);r.next(Re);const Fe=O4(H,this.rootComponentType).snapshot;return $n(i={...p,targetSnapshot:Fe,urlAfterRedirects:H,extras:{...Me,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=p.rawUrl,p.resolve(null),La}),mo(p=>{const v=new C7(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(v)}),Ae(p=>i={...p,guards:Z7(p.targetSnapshot,p.currentSnapshot,this.rootContexts)}),function rY(e,n){return ua(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:d}}=t;return 0===d.length&&0===s.length?$n({...t,guardsResult:!0}):function iY(e,n,t,r){return Pn(e).pipe(ua(i=>function cY(e,n,t,r,i){const s=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return s&&0!==s.length?$n(s.map(p=>{const v=vC(n)??i,_=sy(p,v);return hf(function eY(e){return e&&_C(e.canDeactivate)}(_)?_.canDeactivate(e,n,t,r):v.runInContext(()=>_(e,n,t,r))).pipe(cf())})).pipe(ly()):$n(!0)}(i.component,i.route,t,n,r)),cf(i=>!0!==i,!0))}(d,r,i,e).pipe(ua(p=>p&&function K7(e){return"boolean"==typeof e}(p)?function aY(e,n,t,r){return Pn(n).pipe(df(i=>sA(function sY(e,n){return null!==e&&n&&n(new E7(e)),$n(!0)}(i.route.parent,r),function oY(e,n){return null!==e&&n&&n(new I7(e)),$n(!0)}(i.route,r),function uY(e,n,t){const r=n[n.length-1],s=n.slice(0,n.length-1).reverse().map(d=>function Y7(e){const n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null}(d)).filter(d=>null!==d).map(d=>oC(()=>$n(d.guards.map(v=>{const _=vC(d.node)??t,C=sy(v,_);return hf(function J7(e){return e&&_C(e.canActivateChild)}(C)?C.canActivateChild(r,e):_.runInContext(()=>C(r,e))).pipe(cf())})).pipe(ly())));return $n(s).pipe(ly())}(e,i.path,t),function lY(e,n,t){const r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||0===r.length)return $n(!0);const i=r.map(s=>oC(()=>{const d=vC(n)??t,p=sy(s,d);return hf(function q7(e){return e&&_C(e.canActivate)}(p)?p.canActivate(n,e):d.runInContext(()=>p(n,e))).pipe(cf())}));return $n(i).pipe(ly())}(e,i.route,t))),cf(i=>!0!==i,!0))}(r,s,e,n):$n(p)),Ae(p=>({...t,guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),mo(p=>{if(i.guardsResult=p.guardsResult,Sv(p.guardsResult))throw B4(0,p.guardsResult);const v=new w7(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(v)}),Ki(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",3),!1)),UF(p=>{if(p.guards.canActivateChecks.length)return $n(p).pipe(mo(v=>{const _=new S7(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(_)}),ml(v=>{let _=!1;return $n(v).pipe(function PY(e,n){return ua(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return $n(t);let s=0;return Pn(i).pipe(df(d=>function RY(e,n,t,r){const i=e.routeConfig,s=e._resolve;return void 0!==i?.title&&!rU(i)&&(s[sC]=i.title),function LY(e,n,t,r){const i=function OY(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===i.length)return $n({});const s={};return Pn(i).pipe(ua(d=>function kY(e,n,t,r){const i=vC(n)??r,s=sy(e,i);return hf(s.resolve?s.resolve(n,t):i.runInContext(()=>s(n,t)))}(e[d],n,t,r).pipe(cf(),mo(p=>{s[d]=p}))),yF(1),bF(s),Zd(d=>VF(d)?La:ny(d)))}(s,e,n,r).pipe(Ae(d=>(e._resolvedData=d,e.data=k4(e,t).resolve,i&&rU(i)&&(e.data[sC]=i.title),null)))}(d.route,r,e,n)),mo(()=>s++),yF(1),ua(d=>s===i.length?$n(t):La))})}(this.paramsInheritanceStrategy,this.ngModule.injector),mo({next:()=>_=!0,complete:()=>{_||(this.restoreHistory(v),this.cancelNavigationTransition(v,"",2))}}))}),mo(v=>{const _=new D7(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(_)}))}),UF(p=>{const v=_=>{const C=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&C.push(this.configLoader.loadComponent(_.routeConfig).pipe(mo(S=>{_.component=S}),Ae(()=>{})));for(const S of _.children)C.push(...v(S));return C};return mF(v(p.targetSnapshot.root)).pipe(lA(),go(1))}),UF(()=>this.afterPreactivation()),Ae(p=>{const v=function k7(e,n,t){const r=fC(e,n._root,t?t._root:void 0);return new L4(r,n)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return i={...p,targetRouterState:v}}),mo(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((e,n,t)=>Ae(r=>(new j7(n,r.targetRouterState,r.currentRouterState,t).activate(e),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),mo({next(){s=!0},complete(){s=!0}}),uA(()=>{s||d||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Zd(p=>{if(d=!0,H4(p)){z4(p)||(this.navigated=!0,this.restoreHistory(i,!0));const v=new gA(i.id,this.serializeUrl(i.extractedUrl),p.message,p.cancellationCode);if(r.next(v),z4(p)){const _=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),C={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||lU(i.source)};this.scheduleNavigation(_,"imperative",null,C,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const v=new I4(i.id,this.serializeUrl(i.extractedUrl),p,i.targetSnapshot??void 0);r.next(v);try{i.resolve(this.errorHandler(p))}catch(_){i.reject(_)}}return La}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const p={...s};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(i.state=p)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(BF),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:d,queryParamsHandling:p,preserveFragment:v}=r,_=i||this.routerState.root,C=v?this.currentUrlTree.fragment:d;let S=null;switch(p){case"merge":S={...this.currentUrlTree.queryParams,...s};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=s||null}return null!==S&&(S=this.removeEmptyProps(S)),v7(_,this.currentUrlTree,t,S,C??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Sv(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function YY(e){for(let n=0;n<e.length;n++){if(null==e[n])throw new Jt(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...WY}:!1===r?{...jY}:r,Sv(t))return g4(this.currentUrlTree,t,i);const s=this.parseUrl(t);return g4(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Dv(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,d){if(this.disposed)return Promise.resolve(!1);let p,v,_;d?(p=d.resolve,v=d.reject,_=d.promise):_=new Promise((k,H)=>{p=k,v=H});const C=++this.navigationId;let S;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),S=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):S=0,this.setTransition({id:C,targetPageId:S,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:p,reject:v,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(k=>Promise.reject(k))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const s=new gA(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return e.\u0275fac=function(t){Xu()},e.\u0275prov=yn({token:e,factory:function(){return sU()},providedIn:"root"}),e})();function lU(e){return"imperative"!==e}let Tv=(()=>{class e{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new te,this.subscription=t.events.subscribe(s=>{s instanceof Dv&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=fl(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=fl(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=fl(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,s,d){return!!(0!==t||r||i||s||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return e.\u0275fac=function(t){return new(t||e)(Xe(_s),Xe(Mv),Xe(Uc))},e.\u0275dir=Sn({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&Yt("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&Hr("target",r.target)("href",r.href,$g)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Xi]}),e})();class uU{}let KY=(()=>{class e{constructor(t,r,i,s,d){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(Ki(t=>t instanceof Dv),df(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=qp(s.providers,t,`Route: ${s.path}`));const d=s._injector??t,p=s._loadedInjector??d;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(d,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(p,s.children??s._loadedRoutes))}return Pn(i).pipe(Xs())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):$n(null);const s=i.pipe(ua(d=>null===d?$n(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));return r.loadComponent&&!r._loadedComponent?Pn([s,this.loader.loadComponent(r)]).pipe(Xs()):s})}}return e.\u0275fac=function(t){return new(t||e)(Lt(_s),Lt(bu),Lt(Zu),Lt(uU),Lt(WF))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const ZF=new sn("");let cU=(()=>{class e{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof EF?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Dv&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof P4&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new P4(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){Xu()},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();function uy(e,n){return{\u0275kind:e,\u0275providers:n}}function YF(e){return[{provide:GF,multi:!0,useValue:e}]}function hU(){const e=oa(Wa);return n=>{const t=e.get(Fd);if(n!==t.components[0])return;const r=e.get(_s),i=e.get(fU);1===e.get(XF)&&r.initialNavigation(),e.get(pU,null,Jn.Optional)?.setUpPreloading(),e.get(ZF,null,Jn.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const fU=new sn("",{factory:()=>new te}),XF=new sn("",{providedIn:"root",factory:()=>1});const pU=new sn("");function eX(e){return uy(0,[{provide:pU,useExisting:KY},{provide:uU,useExisting:e}])}const vU=new sn("ROUTER_FORROOT_GUARD"),tX=[Ud,{provide:b4,useClass:CF},{provide:_s,useFactory:sU},pC,{provide:Mv,useFactory:function dU(e){return e.routerState.root},deps:[_s]},WF];function nX(){return new jT("Router",_s)}let gU=(()=>{class e{constructor(t){}static forRoot(t,r){return{ngModule:e,providers:[tX,[],YF(t),{provide:vU,useFactory:oX,deps:[[_s,new rl,new ou]]},{provide:MA,useValue:r||{}},r?.useHash?{provide:Uc,useClass:M1}:{provide:Uc,useClass:D1},{provide:ZF,useFactory:()=>{const e=oa(_s),n=oa(Z1),t=oa(MA);return t.scrollOffset&&n.setOffset(t.scrollOffset),new cU(e,n,t)}},r?.preloadingStrategy?eX(r.preloadingStrategy).\u0275providers:[],{provide:jT,multi:!0,useFactory:nX},r?.initialNavigation?sX(r):[],[{provide:mU,useFactory:hU},{provide:n1,multi:!0,useExisting:mU}]]}}static forChild(t){return{ngModule:e,providers:[YF(t)]}}}return e.\u0275fac=function(t){return new(t||e)(Lt(vU,8))},e.\u0275mod=er({type:e}),e.\u0275inj=pr({imports:[NF]}),e})();function oX(e){return"guarded"}function sX(e){return["disabled"===e.initialNavigation?uy(3,[{provide:rv,multi:!0,useFactory:()=>{const n=oa(_s);return()=>{n.setUpLocationChangeListener()}}},{provide:XF,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?uy(2,[{provide:XF,useValue:0},{provide:rv,multi:!0,deps:[Wa],useFactory:n=>{const t=n.get(x1,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(s=>{const d=n.get(_s),p=n.get(fU);(function i(s){n.get(_s).events.pipe(Ki(p=>p instanceof Dv||p instanceof gA||p instanceof I4),Ae(p=>p instanceof Dv||p instanceof gA&&(0===p.code||1===p.code)&&null),Ki(p=>null!==p),go(1)).subscribe(()=>{s()})})(()=>{s(!0),r=!0}),d.afterPreactivation=()=>(s(!0),r||p.closed?$n(void 0):p),d.initialNavigation()}))}}]).\u0275providers:[]]}const mU=new sn(""),uX=function(e){return{"background-image":e}},cX=["*"];let dX=(()=>{class e{constructor(){this.title="",this.imgURL=""}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=qn({type:e,selectors:[["app-home-card"]],inputs:{title:"title",imgURL:"imgURL"},ngContentSelectors:cX,decls:6,vars:4,consts:[[1,"card",3,"ngStyle"],[1,"card-content"],[1,"title"],[1,"content"]],template:function(t,r){1&t&&(Ui(),st(0,"div",0)(1,"div",1)(2,"h2",2),Qt(3),dt(),st(4,"div",3),jr(5),dt()()()),2&t&&(At("ngStyle",Bc(2,uX,"url("+r.imgURL+")")),Et(3),Za(" ",r.title," "))},dependencies:[H1],styles:['.card[_ngcontent-%COMP%]{--transition-duration: .25s;--transform-transition: transform var(--transition-duration) ease;color:var(--clr-neutral-100);background-size:cover;width:var(--card-width);aspect-ratio:1;border-radius:.25rem;padding:1rem 0 0;overflow:hidden;position:relative;transition:var(--transform-transition);box-shadow:#00000030 0 10px 20px,#0000003b 0 6px 6px}.card[_ngcontent-%COMP%]:before{content:"";position:absolute;background:rgb(0,0,0);opacity:.5;pointer-events:none;width:var(--card-width);aspect-ratio:1;border-radius:.25rem;padding:1rem 0 0;top:0}.card-content[_ngcontent-%COMP%]{--padding: 1.1rem;height:100%;padding:var(--padding);padding-top:3rem;background:linear-gradient(hsla(0deg,0%,0%,0),hsla(0deg,0%,0%,.75) 50%,hsl(0deg,0%,0%))}.title[_ngcontent-%COMP%]{position:relative;width:max-content;font-size:1rem}.title[_ngcontent-%COMP%]:after{content:"";position:absolute;height:4px;width:calc(100% + var(--padding));left:calc(var(--padding) * -1);bottom:0;background-color:var(--clr-accent-400)}@media (hover){.title[_ngcontent-%COMP%]:after{transform-origin:left;transform:scaleX(0);transition:var(--transform-transition)}.card-content[_ngcontent-%COMP%]{transform:translateY(55%);transition:var(--transform-transition)}.card[_ngcontent-%COMP%]:hover, .card[_ngcontent-%COMP%]:focus-within{transform:scale(1.025)}.card[_ngcontent-%COMP%]:hover:before{opacity:0}.card[_ngcontent-%COMP%]:hover   .title[_ngcontent-%COMP%]:after, .card[_ngcontent-%COMP%]:focus-within   .title[_ngcontent-%COMP%]:after{transform:scaleX(1);transition-delay:var(--transition-duration)}.card[_ngcontent-%COMP%]:hover   .card-content[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]:focus-within   .card-content[_ngcontent-%COMP%]{transform:translateY(0)}}@media (prefers-reduced-motion: reduce){*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important;scroll-behavior:auto!important;transition-delay:0ms!important}}']}),e})(),hX=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=qn({type:e,selectors:[["app-home"]],decls:30,vars:0,consts:[[1,"translate-animation"],[1,"home-container","horizontal-flex"],["routerLink","/sampling"],["title","Sampling"],["href","https://clementpla.github.io/SegmentationMetricTutorial/main/classification"],["imgURL","assets/images/home-cards/metric.jpg","title","Classification Metrics"],["routerLink","/fourierTransform"],["title","Fourier Transform 2D","imgURL","assets/images/home-cards/fourierTransform.jpg"],["routerLink","/spatialFiltering"],["title","Spatial Filtering","imgURL","assets/images/home-cards/spatial_filtering.jpg"],["routerLink","/spectralFiltering"],["title","Spectral Filtering","imgURL",""],["routerLink","/colorspaces"],["title","Colorspaces","imgURL","assets/images/home-cards/colorspace.jpg"],["routerLink","/morphology"],["title","Morphology","imgURL","assets/images/home-cards/morphology.jpg"],["routerLink","/histogram"],["title","Image Histogram","imgURL","assets/images/home-cards/histogram.jpg"],["href","https://clementpla.github.io/SegmentationMetricTutorial/main/segmentation"],["imgURL","assets/images/home-cards/segmentation_metrics.jpg","title","Segmentation Metrics"],["routerLink","/weightLoss"],["title","Weights & Loss","imgURL","assets/images/home-cards/weight_loss.png"]],template:function(t,r){1&t&&(st(0,"div",0)(1,"h2"),Qt(2,"1D"),dt(),st(3,"div",1)(4,"a",2),Rn(5,"app-home-card",3),dt(),st(6,"a",4),Rn(7,"app-home-card",5),dt()(),st(8,"h2"),Qt(9,"2D"),dt(),st(10,"div",1)(11,"a",6),Rn(12,"app-home-card",7),dt(),st(13,"a",8),Rn(14,"app-home-card",9),dt(),st(15,"a",10),Rn(16,"app-home-card",11),dt(),st(17,"a",12),Rn(18,"app-home-card",13),dt(),st(19,"a",14),Rn(20,"app-home-card",15),dt(),st(21,"a",16),Rn(22,"app-home-card",17),dt(),st(23,"a",18),Rn(24,"app-home-card",19),dt()(),st(25,"h2"),Qt(26,"Machine Learning"),dt(),st(27,"div",1)(28,"a",20),Rn(29,"app-home-card",21),dt()()())},dependencies:[Tv,dX],styles:["a[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit}.home-container[_ngcontent-%COMP%]{gap:1em;margin:1em 5em}@keyframes rotate{0%{transform:rotateY(90deg);opacity:.1}to{transform:rotateY(0);opacity:1}}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(n){animation-name:rotate;animation-duration:.2s;animation-direction:normal;animation-fill-mode:both;animation-timing-function:ease-out}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(1n){animation-delay:.1s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(2n){animation-delay:.2s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(3n){animation-delay:.3s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(4n){animation-delay:.4s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(5n){animation-delay:.5s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(6n){animation-delay:.6s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(7n){animation-delay:.7s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(8n){animation-delay:.8s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(9n){animation-delay:.9s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(10n){animation-delay:1s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(11n){animation-delay:1.1s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(12n){animation-delay:1.2s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(13n){animation-delay:1.3s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(14n){animation-delay:1.4s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(15n){animation-delay:1.5s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(16n){animation-delay:1.6s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(17n){animation-delay:1.7s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(18n){animation-delay:1.8s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(19n){animation-delay:1.9s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(20n){animation-delay:2s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(21n){animation-delay:2.1s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(22n){animation-delay:2.2s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(23n){animation-delay:2.3s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(24n){animation-delay:2.4s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(25n){animation-delay:2.5s}h2[_ngcontent-%COMP%]{border:solid white 2px;width:-moz-fit-content;width:fit-content;margin:1em;padding:0 1em;border-radius:2em}@media (max-width: 768px){.home-container[_ngcontent-%COMP%]{gap:1em;margin:0 1em}}"]}),e})();class $F{attach(n){return this._attachedHost=n,n.attach(this)}detach(){let n=this._attachedHost;null!=n&&(this._attachedHost=null,n.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(n){this._attachedHost=n}}class IA extends $F{constructor(n,t,r,i){super(),this.component=n,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class PA extends $F{constructor(n,t,r,i){super(),this.templateRef=n,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(n,t=this.context){return this.context=t,super.attach(n)}detach(){return this.context=void 0,super.detach()}}class fX extends $F{constructor(n){super(),this.element=n instanceof Nr?n.nativeElement:n}}class KF{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(n){return n instanceof IA?(this._attachedPortal=n,this.attachComponentPortal(n)):n instanceof PA?(this._attachedPortal=n,this.attachTemplatePortal(n)):this.attachDomPortal&&n instanceof fX?(this._attachedPortal=n,this.attachDomPortal(n)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(n){this._disposeFn=n}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class pX extends KF{constructor(n,t,r,i,s){super(),this.outletElement=n,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=d=>{const p=d.element,v=this._document.createComment("dom-portal");p.parentNode.insertBefore(v,p),this.outletElement.appendChild(p),this._attachedPortal=d,super.setDisposeFn(()=>{v.parentNode&&v.parentNode.replaceChild(p,v)})},this._document=s}attachComponentPortal(n){const r=(n.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(n.component);let i;return n.viewContainerRef?(i=n.viewContainerRef.createComponent(r,n.viewContainerRef.length,n.injector||n.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(n.injector||this._defaultInjector||Wa.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=n,i}attachTemplatePortal(n){let t=n.viewContainerRef,r=t.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=n,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(n){return n.hostView.rootNodes[0]}}let QF,RA=(()=>{class e extends KF{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new En,this.attachDomPortal=s=>{const d=s.element,p=this._document.createComment("dom-portal");s.setAttachedHost(this),d.parentNode.insertBefore(p,d),this._getRootNode().appendChild(d),this._attachedPortal=s,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(d,p)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),d=r.createComponent(s,r.length,t.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(d.hostView.rootNodes[0]),super.setDisposeFn(()=>d.destroy()),this._attachedPortal=t,this._attachedRef=d,this.attached.emit(d),d}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return e.\u0275fac=function(t){return new(t||e)(Xe(xd),Xe(Ro),Xe(Rr))},e.\u0275dir=Sn({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Xn]}),e})(),cy=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({}),e})();try{QF=typeof Intl<"u"&&Intl.v8BreakIterator}catch{QF=!1}let dy,ys=(()=>{class e{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function zE(e){return e===VE}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!QF)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return e.\u0275fac=function(t){return new(t||e)(Lt(Nd))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const _U=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function yU(){if(dy)return dy;if("object"!=typeof document||!document)return dy=new Set(_U),dy;let e=document.createElement("input");return dy=new Set(_U.filter(n=>(e.setAttribute("type",n),e.type===n))),dy}let bC,LA,Ev,qF;function xC(e){return function vX(){if(null==bC&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>bC=!0}))}finally{bC=bC||!1}return bC}()?e:!!e.capture}function bU(){if(null==Ev){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Ev=!1,Ev;if("scrollBehavior"in document.documentElement.style)Ev=!0;else{const e=Element.prototype.scrollTo;Ev=!!e&&!/\{\s*\[native code\]\s*\}/.test(e.toString())}}return Ev}function CC(){if("object"!=typeof document||!document)return 0;if(null==LA){const e=document.createElement("div"),n=e.style;e.dir="rtl",n.width="1px",n.overflow="auto",n.visibility="hidden",n.pointerEvents="none",n.position="absolute";const t=document.createElement("div"),r=t.style;r.width="2px",r.height="1px",e.appendChild(t),document.body.appendChild(e),LA=0,0===e.scrollLeft&&(e.scrollLeft=1,LA=0===e.scrollLeft?1:2),e.remove()}return LA}function xU(e){if(function gX(){if(null==qF){const e=typeof document<"u"?document.head:null;qF=!(!e||!e.createShadowRoot&&!e.attachShadow)}return qF}()){const n=e.getRootNode?e.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}function JF(){let e=typeof document<"u"&&document?document.activeElement:null;for(;e&&e.shadowRoot;){const n=e.shadowRoot.activeElement;if(n===e)break;e=n}return e}function Av(e){return e.composedPath?e.composedPath()[0]:e.target}function eB(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Su(e,...n){return n.length?n.some(t=>e[t]):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}function fy(e,n=q1){return ge((t,r)=>{let i=null,s=null,d=null;const p=()=>{if(i){i.unsubscribe(),i=null;const _=s;s=null,r.next(_)}};function v(){const _=d+e,C=n.now();if(C<_)return i=this.schedule(void 0,_-C),void r.add(i);p()}t.subscribe(we(r,_=>{s=_,d=n.now(),i||(i=n.schedule(v,e),r.add(i))},()=>{p(),r.complete()},void 0,()=>{s=i=null}))})}function SU(e){return Ki((n,t)=>e<=t)}function MC(e,n=M){return e=e??EX,ge((t,r)=>{let i,s=!0;t.subscribe(we(r,d=>{const p=n(d);(s||!e(i,p))&&(s=!1,i=p,r.next(d))}))})}function EX(e,n){return e===n}function zi(e){return ge((n,t)=>{Dn(e).subscribe(we(t,()=>t.complete(),U)),!t.closed&&n.subscribe(t)})}function Br(e){return null!=e&&"false"!=`${e}`}function Du(e,n=0){return function AX(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}(e)?Number(e):n}function OA(e){return Array.isArray(e)?e:[e]}function _o(e){return null==e?"":"string"==typeof e?e:`${e}px`}function $d(e){return e instanceof Nr?e.nativeElement:e}let DU=(()=>{class e{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),IX=(()=>{class e{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=$d(t);return new B(i=>{const d=this._observeElement(r).subscribe(i);return()=>{d.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new te,i=this._mutationObserverFactory.create(s=>r.next(s));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return e.\u0275fac=function(t){return new(t||e)(Lt(DU))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),MU=(()=>{class e{constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new En,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Br(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Du(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(fy(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(Xe(IX),Xe(Nr),Xe(rr))},e.\u0275dir=Sn({type:e,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),e})(),iB=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({providers:[DU]}),e})();const TU=new Set;let py,PX=(()=>{class e{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):LX}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function RX(e){if(!TU.has(e))try{py||(py=document.createElement("style"),py.setAttribute("type","text/css"),document.head.appendChild(py)),py.sheet&&(py.sheet.insertRule(`@media ${e} {body{ }}`,0),TU.add(e))}catch(n){console.error(n)}}(t),this._matchMedia(t)}}return e.\u0275fac=function(t){return new(t||e)(Lt(ys))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function LX(e){return{matches:"all"===e||""===e,media:e,addListener:()=>{},removeListener:()=>{}}}let OX=(()=>{class e{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new te}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return EU(OA(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=mF(EU(OA(t)).map(d=>this._registerQuery(d).observable));return s=sA(s.pipe(go(1)),s.pipe(SU(1),fy(0))),s.pipe(Ae(d=>{const p={matches:!1,breakpoints:{}};return d.forEach(({matches:v,query:_})=>{p.matches=p.matches||v,p.breakpoints[_]=v}),p}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new B(d=>{const p=v=>this._zone.run(()=>d.next(v));return r.addListener(p),()=>{r.removeListener(p)}}).pipe(_l(r),Ae(({matches:d})=>({query:t,matches:d})),zi(this._destroySubject)),mql:r};return this._queries.set(t,s),s}}return e.\u0275fac=function(t){return new(t||e)(Lt(PX),Lt(rr))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function EU(e){return e.map(n=>n.split(",")).reduce((n,t)=>n.concat(t)).map(n=>n.trim())}class FX extends class PU{constructor(n){this._items=n,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new te,this._typeaheadSubscription=ve.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new te,this.change=new te,n instanceof Yh&&n.changes.subscribe(t=>{if(this._activeItem){const i=t.toArray().indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}})}skipPredicate(n){return this._skipPredicateFn=n,this}withWrap(n=!0){return this._wrap=n,this}withVerticalOrientation(n=!0){return this._vertical=n,this}withHorizontalOrientation(n){return this._horizontal=n,this}withAllowedModifierKeys(n){return this._allowedModifierKeys=n,this}withTypeAhead(n=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(mo(t=>this._pressedLetters.push(t)),fy(n),Ki(()=>this._pressedLetters.length>0),Ae(()=>this._pressedLetters.join(""))).subscribe(t=>{const r=this._getItemsArray();for(let i=1;i<r.length+1;i++){const s=(this._activeItemIndex+i)%r.length,d=r[s];if(!this._skipPredicateFn(d)&&0===d.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(n=!0){return this._homeAndEnd=n,this}setActiveItem(n){const t=this._activeItem;this.updateActiveItem(n),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(n){const t=n.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!n[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;default:return void((i||Su(n,"shiftKey"))&&(n.key&&1===n.key.length?this._letterKeyStream.next(n.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],n.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(n){const t=this._getItemsArray(),r="number"==typeof n?n:t.indexOf(n);this._activeItem=t[r]??null,this._activeItemIndex=r}_setActiveItemByDelta(n){this._wrap?this._setActiveInWrapMode(n):this._setActiveInDefaultMode(n)}_setActiveInWrapMode(n){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const i=(this._activeItemIndex+n*r+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(n){this._setActiveItemByIndex(this._activeItemIndex+n,n)}_setActiveItemByIndex(n,t){const r=this._getItemsArray();if(r[n]){for(;this._skipPredicateFn(r[n]);)if(!r[n+=t])return;this.setActiveItem(n)}}_getItemsArray(){return this._items instanceof Yh?this._items.toArray():this._items}}{setActiveItem(n){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(n),this.activeItem&&this.activeItem.setActiveStyles()}}let TC=(()=>{class e{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function zX(e){return!!(e.offsetWidth||e.offsetHeight||"function"==typeof e.getClientRects&&e.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function VX(e){try{return e.frameElement}catch{return null}}(function XX(e){return e.ownerDocument&&e.ownerDocument.defaultView||window}(t));if(r&&(-1===LU(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),s=LU(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function ZX(e){let n=e.nodeName.toLowerCase(),t="input"===n&&e.type;return"text"===t||"password"===t||"select"===n||"textarea"===n}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==s:"video"===i?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function YX(e){return!function UX(e){return function WX(e){return"input"==e.nodeName.toLowerCase()}(e)&&"hidden"==e.type}(e)&&(function HX(e){let n=e.nodeName.toLowerCase();return"input"===n||"select"===n||"button"===n||"textarea"===n}(e)||function GX(e){return function jX(e){return"a"==e.nodeName.toLowerCase()}(e)&&e.hasAttribute("href")}(e)||e.hasAttribute("contenteditable")||RU(e))}(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}}return e.\u0275fac=function(t){return new(t||e)(Lt(ys))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function RU(e){if(!e.hasAttribute("tabindex")||void 0===e.tabIndex)return!1;let n=e.getAttribute("tabindex");return!(!n||isNaN(parseInt(n,10)))}function LU(e){if(!RU(e))return null;const n=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(n)?-1:n}class $X{constructor(n,t,r,i,s=!1){this._element=n,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(n){this._enabled=n,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}destroy(){const n=this._startAnchor,t=this._endAnchor;n&&(n.removeEventListener("focus",this.startAnchorListener),n.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(n){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(n)))})}focusFirstTabbableElementWhenReady(n){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(n)))})}focusLastTabbableElementWhenReady(n){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(n)))})}_getRegionBoundary(n){const t=this._element.querySelectorAll(`[cdk-focus-region-${n}], [cdkFocusRegion${n}], [cdk-focus-${n}]`);return"start"==n?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(n){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return r?.focus(n),!!r}return t.focus(n),!0}return this.focusFirstTabbableElement(n)}focusFirstTabbableElement(n){const t=this._getRegionBoundary("start");return t&&t.focus(n),!!t}focusLastTabbableElement(n){const t=this._getRegionBoundary("end");return t&&t.focus(n),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const t=n.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const t=n.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const n=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,n),n.classList.add("cdk-visually-hidden"),n.classList.add("cdk-focus-trap-anchor"),n.setAttribute("aria-hidden","true"),n}_toggleAnchorTabIndex(n,t){n?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(n){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_executeOnStable(n){this._ngZone.isStable?n():this._ngZone.onStable.pipe(go(1)).subscribe(n)}}let kA=(()=>{class e{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new $X(t,this._checker,this._ngZone,this._document,r)}}return e.\u0275fac=function(t){return new(t||e)(Lt(TC),Lt(rr),Lt(Rr))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function OU(e){return 0===e.buttons||0===e.offsetX&&0===e.offsetY}function kU(e){const n=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!(!n||-1!==n.identifier||null!=n.radiusX&&1!==n.radiusX||null!=n.radiusY&&1!==n.radiusY)}const KX=new sn("cdk-input-modality-detector-options"),QX={ignoreKeys:[18,17,224,91,16]},vy=xC({passive:!0,capture:!0});let qX=(()=>{class e{constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Nl(null),this._lastTouchMs=0,this._onKeydown=d=>{this._options?.ignoreKeys?.some(p=>p===d.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Av(d))},this._onMousedown=d=>{Date.now()-this._lastTouchMs<650||(this._modality.next(OU(d)?"keyboard":"mouse"),this._mostRecentTarget=Av(d))},this._onTouchstart=d=>{kU(d)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Av(d))},this._options={...QX,...s},this.modalityDetected=this._modality.pipe(SU(1)),this.modalityChanged=this.modalityDetected.pipe(MC()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,vy),i.addEventListener("mousedown",this._onMousedown,vy),i.addEventListener("touchstart",this._onTouchstart,vy)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,vy),document.removeEventListener("mousedown",this._onMousedown,vy),document.removeEventListener("touchstart",this._onTouchstart,vy))}}return e.\u0275fac=function(t){return new(t||e)(Lt(ys),Lt(rr),Lt(Rr),Lt(KX,8))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const JX=new sn("liveAnnouncerElement",{providedIn:"root",factory:function e$(){return null}}),t$=new sn("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let n$=(()=>{class e{constructor(t,r,i,s){this._ngZone=r,this._defaultOptions=s,this._document=i,this._liveElement=t||this._createLiveElement()}announce(t,...r){const i=this._defaultOptions;let s,d;return 1===r.length&&"number"==typeof r[0]?d=r[0]:[s,d]=r,this.clear(),clearTimeout(this._previousTimeout),s||(s=i&&i.politeness?i.politeness:"polite"),null==d&&i&&(d=i.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(p=>this._currentResolve=p)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof d&&(this._previousTimeout=setTimeout(()=>this.clear(),d)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",r=this._document.getElementsByClassName(t),i=this._document.createElement("div");for(let s=0;s<r.length;s++)r[s].remove();return i.classList.add(t),i.classList.add("cdk-visually-hidden"),i.setAttribute("aria-atomic","true"),i.setAttribute("aria-live","polite"),this._document.body.appendChild(i),i}}return e.\u0275fac=function(t){return new(t||e)(Lt(JX,8),Lt(rr),Lt(Rr),Lt(t$,8))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const r$=new sn("cdk-focus-monitor-default-options"),NA=xC({passive:!0,capture:!0});let nc=(()=>{class e{constructor(t,r,i,s,d){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new te,this._rootNodeFocusAndBlurListener=p=>{for(let _=Av(p);_;_=_.parentElement)"focus"===p.type?this._onFocus(p,_):this._onBlur(p,_)},this._document=s,this._detectionMode=d?.detectionMode||0}monitor(t,r=!1){const i=$d(t);if(!this._platform.isBrowser||1!==i.nodeType)return $n(null);const s=xU(i)||this._getDocument(),d=this._elementInfo.get(i);if(d)return r&&(d.checkChildren=!0),d.subject;const p={checkChildren:r,subject:new te,rootNode:s};return this._elementInfo.set(i,p),this._registerGlobalListeners(p),p.subject}stopMonitoring(t){const r=$d(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=$d(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([p,v])=>this._originChanged(p,r,v)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=Av(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,NA),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,NA)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(zi(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,NA),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,NA),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let d=0;d<s.length;d++)if(s[d].contains(r))return!0;return!1}}return e.\u0275fac=function(t){return new(t||e)(Lt(rr),Lt(ys),Lt(qX),Lt(Rr,8),Lt(r$,8))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const FU="cdk-high-contrast-black-on-white",BU="cdk-high-contrast-white-on-black",aB="cdk-high-contrast-active";let VU=(()=>{class e{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=oa(OX).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(aB,FU,BU),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(aB,FU):2===r&&t.add(aB,BU)}}}return e.\u0275fac=function(t){return new(t||e)(Lt(ys),Lt(Rr))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),i$=(()=>{class e{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return e.\u0275fac=function(t){return new(t||e)(Lt(VU))},e.\u0275mod=er({type:e}),e.\u0275inj=pr({imports:[iB]}),e})();const a$=new sn("cdk-dir-doc",{providedIn:"root",factory:function o$(){return oa(Rr)}}),s$=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let $c=(()=>{class e{constructor(t){if(this.value="ltr",this.change=new En,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function l$(e){const n=e?.toLowerCase()||"";return"auto"===n&&typeof navigator<"u"&&navigator?.language?s$.test(navigator.language)?"rtl":"ltr":"rtl"===n?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return e.\u0275fac=function(t){return new(t||e)(Lt(a$,8))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),EC=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({}),e})();function u$(e,n){if(1&e&&Rn(0,"mat-pseudo-checkbox",4),2&e){const t=zn();At("state",t.selected?"checked":"unchecked")("disabled",t.disabled)}}function c$(e,n){if(1&e&&(st(0,"span",5),Qt(1),dt()),2&e){const t=zn();Et(1),Za("(",t.group.label,")")}}const d$=["*"],f$=new sn("mat-sanity-checks",{providedIn:"root",factory:function h$(){return!0}});let oi=(()=>{class e{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!eB()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return e.\u0275fac=function(t){return new(t||e)(Lt(VU),Lt(f$,8),Lt(Rr))},e.\u0275mod=er({type:e}),e.\u0275inj=pr({imports:[EC,EC]}),e})();function FA(e){return class extends e{constructor(...n){super(...n),this._disabled=!1}get disabled(){return this._disabled}set disabled(n){this._disabled=Br(n)}}}function ff(e,n){return class extends e{constructor(...t){super(...t),this.defaultColor=n,this.color=n}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function Pv(e){return class extends e{constructor(...n){super(...n),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(n){this._disableRipple=Br(n)}}}function AC(e,n=0){return class extends e{constructor(...t){super(...t),this._tabIndex=n,this.defaultTabIndex=n}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Du(t):this.defaultTabIndex}}}function UU(e){return class extends e{constructor(...n){super(...n),this.errorState=!1}updateErrorState(){const n=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==n&&(this.errorState=s,this.stateChanges.next())}}}let oB=(()=>{class e{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),BA=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({imports:[oi,oi]}),e})();class m${constructor(n,t,r,i=!1){this._renderer=n,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const WU={enterDuration:225,exitDuration:150},sB=xC({passive:!0}),jU=["mousedown","touchstart"],ZU=["mouseup","mouseleave","touchend","touchcancel"];class y${constructor(n,t,r,i){this._target=n,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=$d(r))}fadeInRipple(n,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...WU,...r.animation};r.centered&&(n=i.left+i.width/2,t=i.top+i.height/2);const d=r.radius||function b$(e,n,t){const r=Math.max(Math.abs(e-t.left),Math.abs(e-t.right)),i=Math.max(Math.abs(n-t.top),Math.abs(n-t.bottom));return Math.sqrt(r*r+i*i)}(n,t,i),p=n-i.left,v=t-i.top,_=s.enterDuration,C=document.createElement("div");C.classList.add("mat-ripple-element"),C.style.left=p-d+"px",C.style.top=v-d+"px",C.style.height=2*d+"px",C.style.width=2*d+"px",null!=r.color&&(C.style.backgroundColor=r.color),C.style.transitionDuration=`${_}ms`,this._containerElement.appendChild(C);const S=window.getComputedStyle(C),H=S.transitionDuration,ne="none"===S.transitionProperty||"0s"===H||"0s, 0s"===H,pe=new m$(this,C,r,ne);C.style.transform="scale3d(1, 1, 1)",pe.state=0,r.persistent||(this._mostRecentTransientRipple=pe);let Me=null;return!ne&&(_||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Re=()=>this._finishRippleTransition(pe),Fe=()=>this._destroyRipple(pe);C.addEventListener("transitionend",Re),C.addEventListener("transitioncancel",Fe),Me={onTransitionEnd:Re,onTransitionCancel:Fe}}),this._activeRipples.set(pe,Me),(ne||!_)&&this._finishRippleTransition(pe),pe}fadeOutRipple(n){if(2===n.state||3===n.state)return;const t=n.element,r={...WU,...n.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",n.state=2,(n._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(n)}fadeOutAll(){this._getActiveRipples().forEach(n=>n.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(n=>{n.config.persistent||n.fadeOut()})}setupTriggerEvents(n){const t=$d(n);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(jU))}handleEvent(n){"mousedown"===n.type?this._onMousedown(n):"touchstart"===n.type?this._onTouchStart(n):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(ZU),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(n){0===n.state?this._startFadeOutTransition(n):2===n.state&&this._destroyRipple(n)}_startFadeOutTransition(n){const t=n===this._mostRecentTransientRipple,{persistent:r}=n.config;n.state=1,!r&&(!t||!this._isPointerDown)&&n.fadeOut()}_destroyRipple(n){const t=this._activeRipples.get(n)??null;this._activeRipples.delete(n),this._activeRipples.size||(this._containerRect=null),n===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),n.state=3,null!==t&&(n.element.removeEventListener("transitionend",t.onTransitionEnd),n.element.removeEventListener("transitioncancel",t.onTransitionCancel)),n.element.remove()}_onMousedown(n){const t=OU(n),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(n.clientX,n.clientY,this._target.rippleConfig))}_onTouchStart(n){if(!this._target.rippleDisabled&&!kU(n)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=n.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(n=>{!n.config.persistent&&(1===n.state||n.config.terminateOnPointerUp&&0===n.state)&&n.fadeOut()}))}_registerEvents(n){this._ngZone.runOutsideAngular(()=>{n.forEach(t=>{this._triggerElement.addEventListener(t,this,sB)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(jU.forEach(n=>{this._triggerElement.removeEventListener(n,this,sB)}),this._pointerUpEventsRegistered&&ZU.forEach(n=>{this._triggerElement.removeEventListener(n,this,sB)}))}}const x$=new sn("mat-ripple-global-options");let Rv=(()=>{class e{constructor(t,r,i,s,d){this._elementRef=t,this._animationMode=d,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new y$(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return e.\u0275fac=function(t){return new(t||e)(Xe(Nr),Xe(rr),Xe(ys),Xe(x$,8),Xe(fs,8))},e.\u0275dir=Sn({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&bi("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),e})(),gy=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({imports:[oi,oi]}),e})(),YU=(()=>{class e{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1}}return e.\u0275fac=function(t){return new(t||e)(Xe(fs,8))},e.\u0275cmp=qn({type:e,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(t,r){2&t&&bi("mat-pseudo-checkbox-indeterminate","indeterminate"===r.state)("mat-pseudo-checkbox-checked","checked"===r.state)("mat-pseudo-checkbox-disabled",r.disabled)("_mat-animation-noopable","NoopAnimations"===r._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(t,r){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}'],encapsulation:2,changeDetection:0}),e})(),lB=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({imports:[oi]}),e})();const XU=new sn("MAT_OPTION_PARENT_COMPONENT"),$U=new sn("MatOptgroup");let C$=0;class w${constructor(n,t=!1){this.source=n,this.isUserInput=t}}let S$=(()=>{class e{constructor(t,r,i,s){this._element=t,this._changeDetectorRef=r,this._parent=i,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+C$++,this.onSelectionChange=new En,this._stateChanges=new te}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=Br(t)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(t,r){const i=this._getHostElement();"function"==typeof i.focus&&i.focus(r)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!Su(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue=t,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new w$(this,t))}}return e.\u0275fac=function(t){Xu()},e.\u0275dir=Sn({type:e,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),e})(),uB=(()=>{class e extends S${constructor(t,r,i,s){super(t,r,i,s)}}return e.\u0275fac=function(t){return new(t||e)(Xe(Nr),Xe(da),Xe(XU,8),Xe($U,8))},e.\u0275cmp=qn({type:e,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(t,r){1&t&&Yt("click",function(){return r._selectViaInteraction()})("keydown",function(s){return r._handleKeydown(s)}),2&t&&(mu("id",r.id),Hr("tabindex",r._getTabIndex())("aria-selected",r._getAriaSelected())("aria-disabled",r.disabled.toString()),bi("mat-selected",r.selected)("mat-option-multiple",r.multiple)("mat-active",r.active)("mat-option-disabled",r.disabled))},exportAs:["matOption"],features:[Xn],ngContentSelectors:d$,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(t,r){1&t&&(Ui(),nr(0,u$,1,2,"mat-pseudo-checkbox",0),st(1,"span",1),jr(2),dt(),nr(3,c$,2,1,"span",2),Rn(4,"div",3)),2&t&&(At("ngIf",r.multiple),Et(3),At("ngIf",r.group&&r.group._inert),Et(1),At("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},dependencies:[Rv,zs,YU],styles:['.mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.mat-option.mat-active::before{content:""}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{right:auto;left:16px}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}'],encapsulation:2,changeDetection:0}),e})();function KU(e,n,t){if(t.length){let r=n.toArray(),i=t.toArray(),s=0;for(let d=0;d<e+1;d++)r[d].group&&r[d].group===i[s]&&s++;return s}return 0}let QU=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({imports:[gy,kl,oi,lB]}),e})();const M$=["mat-button",""],T$=["*"],A$=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],I$=ff(FA(Pv(class{constructor(e){this._elementRef=e}})));let Fl=(()=>{class e extends I${constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of A$)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return e.\u0275fac=function(t){return new(t||e)(Xe(Nr),Xe(nc),Xe(fs,8))},e.\u0275cmp=qn({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&Ai(Rv,5),2&t){let i;ur(i=cr())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(Hr("disabled",r.disabled||null),bi("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Xn],attrs:M$,ngContentSelectors:T$,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(Ui(),st(0,"span",0),jr(1),dt(),Rn(2,"span",1)(3,"span",2)),2&t&&(Et(2),bi("mat-button-ripple-round",r.isRoundButton||r.isIconButton),At("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},dependencies:[Rv],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),e})(),qU=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({imports:[gy,oi,oi]}),e})(),JU=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({imports:[oi,oi]}),e})();const P$=["addListener","removeListener"],R$=["addEventListener","removeEventListener"],L$=["on","off"];function Bl(e,n,t,r){if(ce(t)&&(r=t,t=void 0),r)return Bl(e,n,t).pipe(YN(r));const[i,s]=function N$(e){return ce(e.addEventListener)&&ce(e.removeEventListener)}(e)?R$.map(d=>p=>e[d](n,p,t)):function O$(e){return ce(e.addListener)&&ce(e.removeListener)}(e)?P$.map(eG(e,n)):function k$(e){return ce(e.on)&&ce(e.off)}(e)?L$.map(eG(e,n)):[];if(!i&&fr(e))return ua(d=>Bl(d,n,t))(Dn(e));if(!i)throw new TypeError("Invalid event target");return new B(d=>{const p=(...v)=>d.next(1<v.length?v:v[0]);return i(p),()=>s(p)})}function eG(e,n){return t=>r=>e[t](n,r)}const PC={schedule(e){let n=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=PC;r&&(n=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=n(s=>{t=void 0,e(s)});return new ve(()=>t?.(i))},requestAnimationFrame(...e){const{delegate:n}=PC;return(n?.requestAnimationFrame||requestAnimationFrame)(...e)},cancelAnimationFrame(...e){const{delegate:n}=PC;return(n?.cancelAnimationFrame||cancelAnimationFrame)(...e)},delegate:void 0};new class B$ extends jN{flush(n){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;n=n||r.shift();do{if(i=n.execute(n.state,n.delay))break}while((n=r[0])&&n.id===t&&r.shift());if(this._active=!1,i){for(;(n=r[0])&&n.id===t&&r.shift();)n.unsubscribe();throw i}}}(class F$ extends WN{constructor(n,t){super(n,t),this.scheduler=n,this.work=t}requestAsyncId(n,t,r=0){return null!==r&&r>0?super.requestAsyncId(n,t,r):(n.actions.push(this),n._scheduled||(n._scheduled=PC.requestAnimationFrame(()=>n.flush(void 0))))}recycleAsyncId(n,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(n,t,r);const{actions:s}=n;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(PC.cancelAnimationFrame(t),n._scheduled=void 0)}});let cB,z$=1;const VA={};function tG(e){return e in VA&&(delete VA[e],!0)}const H$={setImmediate(e){const n=z$++;return VA[n]=!0,cB||(cB=Promise.resolve()),cB.then(()=>tG(n)&&e()),n},clearImmediate(e){tG(e)}},{setImmediate:U$,clearImmediate:G$}=H$,zA={setImmediate(...e){const{delegate:n}=zA;return(n?.setImmediate||U$)(...e)},clearImmediate(e){const{delegate:n}=zA;return(n?.clearImmediate||G$)(e)},delegate:void 0};new class j$ extends jN{flush(n){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;n=n||r.shift();do{if(i=n.execute(n.state,n.delay))break}while((n=r[0])&&n.id===t&&r.shift());if(this._active=!1,i){for(;(n=r[0])&&n.id===t&&r.shift();)n.unsubscribe();throw i}}}(class W$ extends WN{constructor(n,t){super(n,t),this.scheduler=n,this.work=t}requestAsyncId(n,t,r=0){return null!==r&&r>0?super.requestAsyncId(n,t,r):(n.actions.push(this),n._scheduled||(n._scheduled=zA.setImmediate(n.flush.bind(n,void 0))))}recycleAsyncId(n,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(n,t,r);const{actions:s}=n;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(zA.clearImmediate(t),n._scheduled=void 0)}});function nG(e,n=q1){return function Y$(e){return ge((n,t)=>{let r=!1,i=null,s=null,d=!1;const p=()=>{if(s?.unsubscribe(),s=null,r){r=!1;const _=i;i=null,t.next(_)}d&&t.complete()},v=()=>{s=null,d&&t.complete()};n.subscribe(we(t,_=>{r=!0,i=_,s||Dn(e(_)).subscribe(s=we(t,p,v))},()=>{d=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>qz(e,n))}let dB=(()=>{class e{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new te,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new B(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(nG(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):$n()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Ki(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=$d(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Bl(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return e.\u0275fac=function(t){return new(t||e)(Lt(rr),Lt(ys),Lt(Rr,8))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),hB=(()=>{class e{constructor(t,r,i,s){this.elementRef=t,this.scrollDispatcher=r,this.ngZone=i,this.dir=s,this._destroyed=new te,this._elementScrolled=new B(d=>this.ngZone.runOutsideAngular(()=>Bl(this.elementRef.nativeElement,"scroll").pipe(zi(this._destroyed)).subscribe(d)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const r=this.elementRef.nativeElement,i=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=i?t.end:t.start),null==t.right&&(t.right=i?t.start:t.end),null!=t.bottom&&(t.top=r.scrollHeight-r.clientHeight-t.bottom),i&&0!=CC()?(null!=t.left&&(t.right=r.scrollWidth-r.clientWidth-t.left),2==CC()?t.left=t.right:1==CC()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=r.scrollWidth-r.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const r=this.elementRef.nativeElement;bU()?r.scrollTo(t):(null!=t.top&&(r.scrollTop=t.top),null!=t.left&&(r.scrollLeft=t.left))}measureScrollOffset(t){const r="left",i="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const d=this.dir&&"rtl"==this.dir.value;return"start"==t?t=d?i:r:"end"==t&&(t=d?r:i),d&&2==CC()?t==r?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:d&&1==CC()?t==r?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==r?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return e.\u0275fac=function(t){return new(t||e)(Xe(Nr),Xe(dB),Xe(rr),Xe($c,8))},e.\u0275dir=Sn({type:e,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),e})(),RC=(()=>{class e{constructor(t,r,i){this._platform=t,this._change=new te,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(nG(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return e.\u0275fac=function(t){return new(t||e)(Lt(ys),Lt(rr),Lt(Rr,8))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),LC=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({}),e})(),rG=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({imports:[EC,LC,EC,LC]}),e})();const iG=bU();class K${constructor(n,t){this._viewportRuler=n,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const n=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=n.style.left||"",this._previousHTMLStyles.top=n.style.top||"",n.style.left=_o(-this._previousScrollPosition.left),n.style.top=_o(-this._previousScrollPosition.top),n.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const n=this._document.documentElement,r=n.style,i=this._document.body.style,s=r.scrollBehavior||"",d=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,n.classList.remove("cdk-global-scrollblock"),iG&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),iG&&(r.scrollBehavior=s,i.scrollBehavior=d)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class Q${constructor(n,t,r,i){this._scrollDispatcher=n,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(n){this._overlayRef=n}enable(){if(this._scrollSubscription)return;const n=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=n.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=n.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class aG{enable(){}disable(){}attach(){}}function fB(e,n){return n.some(t=>e.bottom<t.top||e.top>t.bottom||e.right<t.left||e.left>t.right)}function oG(e,n){return n.some(t=>e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right)}class q${constructor(n,t,r,i){this._scrollDispatcher=n,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(n){this._overlayRef=n}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();fB(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let J$=(()=>{class e{constructor(t,r,i,s){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new aG,this.close=d=>new Q$(this._scrollDispatcher,this._ngZone,this._viewportRuler,d),this.block=()=>new K$(this._viewportRuler,this._document),this.reposition=d=>new q$(this._scrollDispatcher,this._viewportRuler,this._ngZone,d),this._document=s}}return e.\u0275fac=function(t){return new(t||e)(Lt(dB),Lt(RC),Lt(rr),Lt(Rr))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class HA{constructor(n){if(this.scrollStrategy=new aG,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,n){const t=Object.keys(n);for(const r of t)void 0!==n[r]&&(this[r]=n[r])}}}class eK{constructor(n,t){this.connectionPair=n,this.scrollableViewProperties=t}}let sG=(()=>{class e{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return e.\u0275fac=function(t){return new(t||e)(Lt(Rr))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),tK=(()=>{class e extends sG{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const s=this._attachedOverlays;for(let d=s.length-1;d>-1;d--)if(s[d]._keydownEvents.observers.length>0){const p=s[d]._keydownEvents;this._ngZone?this._ngZone.run(()=>p.next(i)):p.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return e.\u0275fac=function(t){return new(t||e)(Lt(Rr),Lt(rr,8))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),nK=(()=>{class e extends sG{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Av(s)},this._clickListener=s=>{const d=Av(s),p="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:d;this._pointerDownEventTarget=null;const v=this._attachedOverlays.slice();for(let _=v.length-1;_>-1;_--){const C=v[_];if(C._outsidePointerEvents.observers.length<1||!C.hasAttached())continue;if(C.overlayElement.contains(d)||C.overlayElement.contains(p))break;const S=C._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>S.next(s)):S.next(s)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return e.\u0275fac=function(t){return new(t||e)(Lt(Rr),Lt(ys),Lt(rr,8))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),UA=(()=>{class e{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||eB()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(t),eB()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return e.\u0275fac=function(t){return new(t||e)(Lt(Rr),Lt(ys))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class OC{constructor(n,t,r,i,s,d,p,v,_,C=!1){this._portalOutlet=n,this._host=t,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=d,this._document=p,this._location=v,this._outsideClickDispatcher=_,this._animationsDisabled=C,this._backdropElement=null,this._backdropClick=new te,this._attachments=new te,this._detachments=new te,this._locationChanges=ve.EMPTY,this._backdropClickHandler=S=>this._backdropClick.next(S),this._backdropTransitionendHandler=S=>{this._disposeBackdrop(S.target)},this._keydownEvents=new te,this._outsidePointerEvents=new te,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(n){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(n);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(go(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const n=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),n}dispose(){const n=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,n&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(n){n!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=n,this.hasAttached()&&(n.attach(this),this.updatePosition()))}updateSize(n){this._config={...this._config,...n},this._updateElementSize()}setDirection(n){this._config={...this._config,direction:n},this._updateElementDirection()}addPanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!0)}removePanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!1)}getDirection(){const n=this._config.direction;return n?"string"==typeof n?n:n.value:"ltr"}updateScrollStrategy(n){n!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=n,this.hasAttached()&&(n.attach(this),n.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const n=this._pane.style;n.width=_o(this._config.width),n.height=_o(this._config.height),n.minWidth=_o(this._config.minWidth),n.minHeight=_o(this._config.minHeight),n.maxWidth=_o(this._config.maxWidth),n.maxHeight=_o(this._config.maxHeight)}_togglePointerEvents(n){this._pane.style.pointerEvents=n?"":"none"}_attachBackdrop(){const n="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(n)})}):this._backdropElement.classList.add(n)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const n=this._backdropElement;if(n){if(this._animationsDisabled)return void this._disposeBackdrop(n);n.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{n.addEventListener("transitionend",this._backdropTransitionendHandler)}),n.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(n)},500))}}_toggleClasses(n,t,r){const i=OA(t||[]).filter(s=>!!s);i.length&&(r?n.classList.add(...i):n.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const n=this._ngZone.onStable.pipe(zi(Oa(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),n.unsubscribe())})})}_disposeScrollStrategy(){const n=this._scrollStrategy;n&&(n.disable(),n.detach&&n.detach())}_disposeBackdrop(n){n&&(n.removeEventListener("click",this._backdropClickHandler),n.removeEventListener("transitionend",this._backdropTransitionendHandler),n.remove(),this._backdropElement===n&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const lG="cdk-overlay-connected-position-bounding-box",rK=/([A-Za-z%]+)$/;class iK{constructor(n,t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new te,this._resizeSubscription=ve.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(n)}get positions(){return this._preferredPositions}attach(n){this._validatePositions(),n.hostElement.classList.add(lG),this._overlayRef=n,this._boundingBox=n.hostElement,this._pane=n.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const n=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let d;for(let p of this._preferredPositions){let v=this._getOriginPoint(n,i,p),_=this._getOverlayPoint(v,t,p),C=this._getOverlayFit(_,t,r,p);if(C.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(p,v);this._canFitWithFlexibleDimensions(C,_,r)?s.push({position:p,origin:v,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(v,p)}):(!d||d.overlayFit.visibleArea<C.visibleArea)&&(d={overlayFit:C,overlayPoint:_,originPoint:v,position:p,overlayRect:t})}if(s.length){let p=null,v=-1;for(const _ of s){const C=_.boundingBoxRect.width*_.boundingBoxRect.height*(_.position.weight||1);C>v&&(v=C,p=_)}return this._isPushed=!1,void this._applyPosition(p.position,p.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(d.position,d.originPoint);this._applyPosition(d.position,d.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Lv(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(lG),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const n=this._lastPosition;if(n){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,n);this._applyPosition(n,t)}else this.apply()}withScrollableContainers(n){return this._scrollables=n,this}withPositions(n){return this._preferredPositions=n,-1===n.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(n){return this._viewportMargin=n,this}withFlexibleDimensions(n=!0){return this._hasFlexibleDimensions=n,this}withGrowAfterOpen(n=!0){return this._growAfterOpen=n,this}withPush(n=!0){return this._canPush=n,this}withLockedPosition(n=!0){return this._positionLocked=n,this}setOrigin(n){return this._origin=n,this}withDefaultOffsetX(n){return this._offsetX=n,this}withDefaultOffsetY(n){return this._offsetY=n,this}withTransformOriginOn(n){return this._transformOriginSelector=n,this}_getOriginPoint(n,t,r){let i,s;if("center"==r.originX)i=n.left+n.width/2;else{const d=this._isRtl()?n.right:n.left,p=this._isRtl()?n.left:n.right;i="start"==r.originX?d:p}return t.left<0&&(i-=t.left),s="center"==r.originY?n.top+n.height/2:"top"==r.originY?n.top:n.bottom,t.top<0&&(s-=t.top),{x:i,y:s}}_getOverlayPoint(n,t,r){let i,s;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:n.x+i,y:n.y+s}}_getOverlayFit(n,t,r,i){const s=cG(t);let{x:d,y:p}=n,v=this._getOffset(i,"x"),_=this._getOffset(i,"y");v&&(d+=v),_&&(p+=_);let k=0-p,H=p+s.height-r.height,ne=this._subtractOverflows(s.width,0-d,d+s.width-r.width),pe=this._subtractOverflows(s.height,k,H),Me=ne*pe;return{visibleArea:Me,isCompletelyWithinViewport:s.width*s.height===Me,fitsInViewportVertically:pe===s.height,fitsInViewportHorizontally:ne==s.width}}_canFitWithFlexibleDimensions(n,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,s=r.right-t.x,d=uG(this._overlayRef.getConfig().minHeight),p=uG(this._overlayRef.getConfig().minWidth),_=n.fitsInViewportHorizontally||null!=p&&p<=s;return(n.fitsInViewportVertically||null!=d&&d<=i)&&_}return!1}_pushOverlayOnScreen(n,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:n.x+this._previousPushAmount.x,y:n.y+this._previousPushAmount.y};const i=cG(t),s=this._viewportRect,d=Math.max(n.x+i.width-s.width,0),p=Math.max(n.y+i.height-s.height,0),v=Math.max(s.top-r.top-n.y,0),_=Math.max(s.left-r.left-n.x,0);let C=0,S=0;return C=i.width<=s.width?_||-d:n.x<this._viewportMargin?s.left-r.left-n.x:0,S=i.height<=s.height?v||-p:n.y<this._viewportMargin?s.top-r.top-n.y:0,this._previousPushAmount={x:C,y:S},{x:n.x+C,y:n.y+S}}_applyPosition(n,t){if(this._setTransformOrigin(n),this._setOverlayElementStyles(t,n),this._setBoundingBoxStyles(t,n),n.panelClass&&this._addPanelClasses(n.panelClass),this._lastPosition=n,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new eK(n,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(n){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=n.overlayY;r="center"===n.overlayX?"center":this._isRtl()?"start"===n.overlayX?"right":"left":"start"===n.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(n,t){const r=this._viewportRect,i=this._isRtl();let s,d,p,C,S,k;if("top"===t.overlayY)d=n.y,s=r.height-d+this._viewportMargin;else if("bottom"===t.overlayY)p=r.height-n.y+2*this._viewportMargin,s=r.height-p+this._viewportMargin;else{const H=Math.min(r.bottom-n.y+r.top,n.y),ne=this._lastBoundingBoxSize.height;s=2*H,d=n.y-H,s>ne&&!this._isInitialRender&&!this._growAfterOpen&&(d=n.y-ne/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)k=r.width-n.x+this._viewportMargin,C=n.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)S=n.x,C=r.right-n.x;else{const H=Math.min(r.right-n.x+r.left,n.x),ne=this._lastBoundingBoxSize.width;C=2*H,S=n.x-H,C>ne&&!this._isInitialRender&&!this._growAfterOpen&&(S=n.x-ne/2)}return{top:d,left:S,bottom:p,right:k,width:C,height:s}}_setBoundingBoxStyles(n,t){const r=this._calculateBoundingBoxRect(n,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,d=this._overlayRef.getConfig().maxWidth;i.height=_o(r.height),i.top=_o(r.top),i.bottom=_o(r.bottom),i.width=_o(r.width),i.left=_o(r.left),i.right=_o(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=_o(s)),d&&(i.maxWidth=_o(d))}this._lastBoundingBoxSize=r,Lv(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Lv(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Lv(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(n,t){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,d=this._overlayRef.getConfig();if(i){const C=this._viewportRuler.getViewportScrollPosition();Lv(r,this._getExactOverlayY(t,n,C)),Lv(r,this._getExactOverlayX(t,n,C))}else r.position="static";let p="",v=this._getOffset(t,"x"),_=this._getOffset(t,"y");v&&(p+=`translateX(${v}px) `),_&&(p+=`translateY(${_}px)`),r.transform=p.trim(),d.maxHeight&&(i?r.maxHeight=_o(d.maxHeight):s&&(r.maxHeight="")),d.maxWidth&&(i?r.maxWidth=_o(d.maxWidth):s&&(r.maxWidth="")),Lv(this._pane.style,r)}_getExactOverlayY(n,t,r){let i={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,n);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===n.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=_o(s.y),i}_getExactOverlayX(n,t,r){let d,i={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,n);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),d=this._isRtl()?"end"===n.overlayX?"left":"right":"end"===n.overlayX?"right":"left","right"===d?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=_o(s.x),i}_getScrollVisibility(){const n=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:oG(n,r),isOriginOutsideView:fB(n,r),isOverlayClipped:oG(t,r),isOverlayOutsideView:fB(t,r)}}_subtractOverflows(n,...t){return t.reduce((r,i)=>r-Math.max(i,0),n)}_getNarrowedViewportRect(){const n=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+n-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:n-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(n,t){return"x"===t?n.offsetX??this._offsetX:n.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(n){this._pane&&OA(n).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(n=>{this._pane.classList.remove(n)}),this._appliedPanelClasses=[])}_getOriginRect(){const n=this._origin;if(n instanceof Nr)return n.nativeElement.getBoundingClientRect();if(n instanceof Element)return n.getBoundingClientRect();const t=n.width||0,r=n.height||0;return{top:n.y,bottom:n.y+r,left:n.x,right:n.x+t,height:r,width:t}}}function Lv(e,n){for(let t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}function uG(e){if("number"!=typeof e&&null!=e){const[n,t]=e.split(rK);return t&&"px"!==t?null:parseFloat(n)}return e||null}function cG(e){return{top:Math.floor(e.top),right:Math.floor(e.right),bottom:Math.floor(e.bottom),left:Math.floor(e.left),width:Math.floor(e.width),height:Math.floor(e.height)}}const dG="cdk-global-overlay-wrapper";class aK{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(n){const t=n.getConfig();this._overlayRef=n,this._width&&!t.width&&n.updateSize({width:this._width}),this._height&&!t.height&&n.updateSize({height:this._height}),n.hostElement.classList.add(dG),this._isDisposed=!1}top(n=""){return this._bottomOffset="",this._topOffset=n,this._alignItems="flex-start",this}left(n=""){return this._xOffset=n,this._xPosition="left",this}bottom(n=""){return this._topOffset="",this._bottomOffset=n,this._alignItems="flex-end",this}right(n=""){return this._xOffset=n,this._xPosition="right",this}start(n=""){return this._xOffset=n,this._xPosition="start",this}end(n=""){return this._xOffset=n,this._xPosition="end",this}width(n=""){return this._overlayRef?this._overlayRef.updateSize({width:n}):this._width=n,this}height(n=""){return this._overlayRef?this._overlayRef.updateSize({height:n}):this._height=n,this}centerHorizontally(n=""){return this.left(n),this._xPosition="center",this}centerVertically(n=""){return this.top(n),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const n=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:d,maxHeight:p}=r,v=!("100%"!==i&&"100vw"!==i||d&&"100%"!==d&&"100vw"!==d),_=!("100%"!==s&&"100vh"!==s||p&&"100%"!==p&&"100vh"!==p),C=this._xPosition,S=this._xOffset,k="rtl"===this._overlayRef.getConfig().direction;let H="",ne="",pe="";v?pe="flex-start":"center"===C?(pe="center",k?ne=S:H=S):k?"left"===C||"end"===C?(pe="flex-end",H=S):("right"===C||"start"===C)&&(pe="flex-start",ne=S):"left"===C||"start"===C?(pe="flex-start",H=S):("right"===C||"end"===C)&&(pe="flex-end",ne=S),n.position=this._cssPosition,n.marginLeft=v?"0":H,n.marginTop=_?"0":this._topOffset,n.marginBottom=this._bottomOffset,n.marginRight=v?"0":ne,t.justifyContent=pe,t.alignItems=_?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const n=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(dG),r.justifyContent=r.alignItems=n.marginTop=n.marginBottom=n.marginLeft=n.marginRight=n.position="",this._overlayRef=null,this._isDisposed=!0}}let oK=(()=>{class e{constructor(t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s}global(){return new aK}flexibleConnectedTo(t){return new iK(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return e.\u0275fac=function(t){return new(t||e)(Lt(RC),Lt(Rr),Lt(ys),Lt(UA))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),sK=0,rc=(()=>{class e{constructor(t,r,i,s,d,p,v,_,C,S,k,H){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=s,this._keyboardDispatcher=d,this._injector=p,this._ngZone=v,this._document=_,this._directionality=C,this._location=S,this._outsideClickDispatcher=k,this._animationsModuleType=H}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),d=new HA(t);return d.direction=d.direction||this._directionality.value,new OC(s,r,i,d,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+sK++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Fd)),new pX(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return e.\u0275fac=function(t){return new(t||e)(Lt(J$),Lt(UA),Lt(xd),Lt(oK),Lt(tK),Lt(Wa),Lt(rr),Lt(Rr),Lt($c),Lt(Ud),Lt(nK),Lt(fs,8))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();const lK=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],hG=new sn("cdk-connected-overlay-scroll-strategy");let fG=(()=>{class e{constructor(t){this.elementRef=t}}return e.\u0275fac=function(t){return new(t||e)(Xe(Nr))},e.\u0275dir=Sn({type:e,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),e})(),pG=(()=>{class e{constructor(t,r,i,s,d){this._overlay=t,this._dir=d,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=ve.EMPTY,this._attachSubscription=ve.EMPTY,this._detachSubscription=ve.EMPTY,this._positionSubscription=ve.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new En,this.positionChange=new En,this.attach=new En,this.detach=new En,this.overlayKeydown=new En,this.overlayOutsideClick=new En,this._templatePortal=new PA(r,i),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=Br(t)}get lockPosition(){return this._lockPosition}set lockPosition(t){this._lockPosition=Br(t)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(t){this._flexibleDimensions=Br(t)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(t){this._growAfterOpen=Br(t)}get push(){return this._push}set push(t){this._push=Br(t)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=lK);const t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(r=>{this.overlayKeydown.next(r),27===r.keyCode&&!this.disableClose&&!Su(r)&&(r.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(r=>{this.overlayOutsideClick.next(r)})}_buildConfig(){const t=this._position=this.positionStrategy||this._createPositionStrategy(),r=new HA({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(r.width=this.width),(this.height||0===this.height)&&(r.height=this.height),(this.minWidth||0===this.minWidth)&&(r.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(r.minHeight=this.minHeight),this.backdropClass&&(r.backdropClass=this.backdropClass),this.panelClass&&(r.panelClass=this.panelClass),r}_updatePositionStrategy(t){const r=this.positions.map(i=>({originX:i.originX,originY:i.originY,overlayX:i.overlayX,overlayY:i.overlayY,offsetX:i.offsetX||this.offsetX,offsetY:i.offsetY||this.offsetY,panelClass:i.panelClass||void 0}));return t.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(r).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const t=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(t),t}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof fG?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(d4(()=>this.positionChange.observers.length>0)).subscribe(t=>{this.positionChange.emit(t),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(Xe(rc),Xe(dl),Xe(Ro),Xe(hG),Xe($c,8))},e.\u0275dir=Sn({type:e,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[Xi]}),e})();const cK={provide:hG,deps:[rc],useFactory:function uK(e){return()=>e.scrollStrategies.reposition()}};let pB=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({providers:[rc,cK],imports:[EC,cy,rG,rG]}),e})();function dK(e,n){}class GA{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let vG=(()=>{class e extends KF{constructor(t,r,i,s,d,p,v,_){super(),this._elementRef=t,this._focusTrapFactory=r,this._config=s,this._interactivityChecker=d,this._ngZone=p,this._overlayRef=v,this._focusMonitor=_,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=C=>{this._portalOutlet.hasAttached();const S=this._portalOutlet.attachDomPortal(C);return this._contentAttached(),S},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=i}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),r}attachTemplatePortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let r=null;if("string"==typeof t?r=this._document.querySelector(t):"boolean"==typeof t?r=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(r=t),this._config.restoreFocus&&r&&"function"==typeof r.focus){const i=JF(),s=this._elementRef.nativeElement;(!i||i===this._document.body||i===s||s.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=JF();return t===r||t.contains(r)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=JF())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return e.\u0275fac=function(t){return new(t||e)(Xe(Nr),Xe(kA),Xe(Rr,8),Xe(GA),Xe(TC),Xe(rr),Xe(OC),Xe(nc))},e.\u0275cmp=qn({type:e,selectors:[["cdk-dialog-container"]],viewQuery:function(t,r){if(1&t&&Ai(RA,7),2&t){let i;ur(i=cr())&&(r._portalOutlet=i.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,r){2&t&&Hr("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[Xn],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,r){1&t&&nr(0,dK,0,0,"ng-template",0)},dependencies:[RA],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),e})();class vB{constructor(n,t){this.overlayRef=n,this.config=t,this.closed=new te,this.disableClose=t.disableClose,this.backdropClick=n.backdropClick(),this.keydownEvents=n.keydownEvents(),this.outsidePointerEvents=n.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(r=>{27===r.keyCode&&!this.disableClose&&!Su(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(n,t){if(this.containerInstance){const r=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this.overlayRef.dispose(),r.next(n),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(n="",t=""){return this.overlayRef.updateSize({width:n,height:t}),this}addPanelClass(n){return this.overlayRef.addPanelClass(n),this}removePanelClass(n){return this.overlayRef.removePanelClass(n),this}}const gG=new sn("DialogScrollStrategy"),hK=new sn("DialogData"),fK=new sn("DefaultDialogConfig"),vK={provide:gG,deps:[rc],useFactory:function pK(e){return()=>e.scrollStrategies.block()}};let gK=0,mG=(()=>{class e{constructor(t,r,i,s,d,p){this._overlay=t,this._injector=r,this._defaultOptions=i,this._parentDialog=s,this._overlayContainer=d,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new te,this._afterOpenedAtThisLevel=new te,this._ariaHiddenElements=new Map,this.afterAllClosed=oC(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(_l(void 0))),this._scrollStrategy=p}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(t,r){(r={...this._defaultOptions||new GA,...r}).id=r.id||"cdk-dialog-"+gK++,r.id&&this.getDialogById(r.id);const s=this._getOverlayConfig(r),d=this._overlay.create(s),p=new vB(d,r),v=this._attachContainer(d,p,r);return p.containerInstance=v,this._attachDialogContent(t,p,v,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(p),p.closed.subscribe(()=>this._removeOpenDialog(p,!0)),this.afterOpened.next(p),p}closeAll(){gB(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){gB(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),gB(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const r=new HA({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachContainer(t,r,i){const s=i.injector||i.viewContainerRef?.injector,d=[{provide:GA,useValue:i},{provide:vB,useValue:r},{provide:OC,useValue:t}];let p;i.container?"function"==typeof i.container?p=i.container:(p=i.container.type,d.push(...i.container.providers(i))):p=vG;const v=new IA(p,i.viewContainerRef,Wa.create({parent:s||this._injector,providers:d}),i.componentFactoryResolver);return t.attach(v).instance}_attachDialogContent(t,r,i,s){if(t instanceof dl){const d=this._createInjector(s,r,i,void 0);let p={$implicit:s.data,dialogRef:r};s.templateContext&&(p={...p,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),i.attachTemplatePortal(new PA(t,null,p,d))}else{const d=this._createInjector(s,r,i,this._injector),p=i.attachComponentPortal(new IA(t,s.viewContainerRef,d,s.componentFactoryResolver));r.componentInstance=p.instance}}_createInjector(t,r,i,s){const d=t.injector||t.viewContainerRef?.injector,p=[{provide:hK,useValue:t.data},{provide:vB,useValue:r}];return t.providers&&("function"==typeof t.providers?p.push(...t.providers(r,t,i)):p.push(...t.providers)),t.direction&&(!d||!d.get($c,null,Jn.Optional))&&p.push({provide:$c,useValue:{value:t.direction,change:$n()}}),Wa.create({parent:d||s,providers:p})}_removeOpenDialog(t,r){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,d)=>{s?d.setAttribute("aria-hidden",s):d.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let i=r.length-1;i>-1;i--){const s=r[i];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return e.\u0275fac=function(t){return new(t||e)(Lt(rc),Lt(Wa),Lt(fK,8),Lt(e,12),Lt(UA),Lt(gG))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();function gB(e,n){let t=e.length;for(;t--;)n(e[t])}let mK=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({providers:[mG,vK],imports:[pB,cy,i$,cy]}),e})();class _G{}const Kd="*";function Qd(e,n){return{type:7,name:e,definitions:n,options:{}}}function Vl(e,n=null){return{type:4,styles:n,timings:e}}function yG(e,n=null){return{type:3,steps:e,options:n}}function bG(e,n=null){return{type:2,steps:e,options:n}}function xa(e){return{type:6,styles:e,offset:null}}function yl(e,n,t){return{type:0,name:e,styles:n,options:t}}function xG(e){return{type:5,steps:e}}function bl(e,n,t=null){return{type:1,expr:e,animation:n,options:t}}function mB(e=null){return{type:9,options:e}}function _B(e,n,t=null){return{type:11,selector:e,animation:n,options:t}}function CG(e){Promise.resolve().then(e)}class kC{constructor(n=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=n+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){CG(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const t="start"==n?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class wG{constructor(n){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=n;let t=0,r=0,i=0;const s=this.players.length;0==s?CG(()=>this._onFinish()):this.players.forEach(d=>{d.onDone(()=>{++t==s&&this._onFinish()}),d.onDestroy(()=>{++r==s&&this._onDestroy()}),d.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((d,p)=>Math.max(d,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const t=n*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const n=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const t="start"==n?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function yK(e,n){}const my={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},bK={dialogContainer:Qd("dialogContainer",[yl("void, exit",xa({opacity:0,transform:"scale(0.7)"})),yl("enter",xa({transform:"none"})),bl("* => enter",yG([Vl("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",xa({transform:"none",opacity:1})),_B("@*",mB(),{optional:!0})]),my),bl("* => void, * => exit",yG([Vl("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",xa({opacity:0})),_B("@*",mB(),{optional:!0})]),my)])};class WA{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=my.params.enterAnimationDuration,this.exitAnimationDuration=my.params.exitAnimationDuration}}let xK=(()=>{class e extends vG{constructor(t,r,i,s,d,p,v,_){super(t,r,i,s,d,p,v,_),this._animationStateChanged=new En}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}}return e.\u0275fac=function(t){return new(t||e)(Xe(Nr),Xe(kA),Xe(Rr,8),Xe(WA),Xe(TC),Xe(rr),Xe(OC),Xe(nc))},e.\u0275cmp=qn({type:e,selectors:[["ng-component"]],features:[Xn],decls:0,vars:0,template:function(t,r){},encapsulation:2}),e})(),CK=(()=>{class e extends xK{constructor(t,r,i,s,d,p,v,_,C){super(t,r,i,s,d,p,v,C),this._changeDetectorRef=_,this._state="enter"}_onAnimationDone({toState:t,totalTime:r}){"enter"===t?this._openAnimationDone(r):"exit"===t&&this._animationStateChanged.next({state:"closed",totalTime:r})}_onAnimationStart({toState:t,totalTime:r}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:r}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:r})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||my.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||my.params.exitAnimationDuration}}}}return e.\u0275fac=function(t){return new(t||e)(Xe(Nr),Xe(kA),Xe(Rr,8),Xe(WA),Xe(TC),Xe(rr),Xe(OC),Xe(da),Xe(nc))},e.\u0275cmp=qn({type:e,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(t,r){1&t&&zm("@dialogContainer.start",function(s){return r._onAnimationStart(s)})("@dialogContainer.done",function(s){return r._onAnimationDone(s)}),2&t&&(mu("id",r._config.id),Hr("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),Uh("@dialogContainer",r._getAnimationState()))},features:[Xn],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,r){1&t&&nr(0,yK,0,0,"ng-template",0)},dependencies:[RA],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[bK.dialogContainer]}}),e})();class wK{constructor(n,t,r){this._ref=n,this._containerInstance=r,this._afterOpened=new te,this._beforeClosed=new te,this._state=0,this.disableClose=t.disableClose,this.id=n.id,r._animationStateChanged.pipe(Ki(i=>"opened"===i.state),go(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),r._animationStateChanged.pipe(Ki(i=>"closed"===i.state),go(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),n.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Oa(this.backdropClick(),this.keydownEvents().pipe(Ki(i=>27===i.keyCode&&!this.disableClose&&!Su(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),function SK(e,n,t){e._closeInteractionType=n,e.close(t)}(this,"keydown"===i.type?"keyboard":"mouse"))})}close(n){this._result=n,this._containerInstance._animationStateChanged.pipe(Ki(t=>"closing"===t.state),go(1)).subscribe(t=>{this._beforeClosed.next(n),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(n){let t=this._ref.config.positionStrategy;return n&&(n.left||n.right)?n.left?t.left(n.left):t.right(n.right):t.centerHorizontally(),n&&(n.top||n.bottom)?n.top?t.top(n.top):t.bottom(n.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(n="",t=""){return this._ref.updateSize(n,t),this}addPanelClass(n){return this._ref.addPanelClass(n),this}removePanelClass(n){return this._ref.removePanelClass(n),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const DK=new sn("MatDialogData"),MK=new sn("mat-dialog-default-options"),SG=new sn("mat-dialog-scroll-strategy"),EK={provide:SG,deps:[rc],useFactory:function TK(e){return()=>e.scrollStrategies.block()}};let AK=0,IK=(()=>{class e{constructor(t,r,i,s,d,p,v,_,C,S){this._overlay=t,this._defaultOptions=i,this._parentDialog=s,this._dialogRefConstructor=v,this._dialogContainerType=_,this._dialogDataToken=C,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new te,this._afterOpenedAtThisLevel=new te,this._idPrefix="mat-dialog-",this.afterAllClosed=oC(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(_l(void 0))),this._scrollStrategy=p,this._dialog=r.get(mG)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,r){let i;(r={...this._defaultOptions||new WA,...r}).id=r.id||`${this._idPrefix}${AK++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...r,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:WA,useValue:r},{provide:GA,useValue:r}]},templateContext:()=>({dialogRef:i}),providers:(d,p,v)=>(i=new this._dialogRefConstructor(d,r,v),i.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:v},{provide:this._dialogDataToken,useValue:p.data},{provide:this._dialogRefConstructor,useValue:i}])});return i.componentInstance=s.componentInstance,this.openDialogs.push(i),this.afterOpened.next(i),i.afterClosed().subscribe(()=>{const d=this.openDialogs.indexOf(i);d>-1&&(this.openDialogs.splice(d,1),this.openDialogs.length||this._getAfterAllClosed().next())}),i}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}}return e.\u0275fac=function(t){Xu()},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})(),DG=(()=>{class e extends IK{constructor(t,r,i,s,d,p,v,_){super(t,r,s,p,v,d,wK,CK,DK,_)}}return e.\u0275fac=function(t){return new(t||e)(Lt(rc),Lt(Wa),Lt(Ud,8),Lt(MK,8),Lt(SG),Lt(e,12),Lt(UA),Lt(fs,8))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})(),PK=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({providers:[DG,EK],imports:[mK,pB,cy,oi,oi]}),e})();class RK{}class vf{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?this.lazyInit="string"==typeof n?()=>{this.headers=new Map,n.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),d=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(d):this.headers.set(s,[d])}})}:()=>{this.headers=new Map,Object.keys(n).forEach(t=>{let r=n[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const t=this.headers.get(n.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,t){return this.clone({name:n,value:t,op:"a"})}set(n,t){return this.clone({name:n,value:t,op:"s"})}delete(n,t){return this.clone({name:n,value:t,op:"d"})}maybeSetNormalizedName(n,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,n)}init(){this.lazyInit&&(this.lazyInit instanceof vf?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(t=>{this.headers.set(t,n.headers.get(t)),this.normalizedNames.set(t,n.normalizedNames.get(t))})}clone(n){const t=new vf;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof vf?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([n]),t}applyUpdate(n){const t=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(n.name,t);const i=("a"===n.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=n.value;if(s){let d=this.headers.get(t);if(!d)return;d=d.filter(p=>-1===s.indexOf(p)),0===d.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,d)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>n(this.normalizedNames.get(t),this.headers.get(t)))}}class LK{encodeKey(n){return MG(n)}encodeValue(n){return MG(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const kK=/%(\d[a-f0-9])/gi,NK={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function MG(e){return encodeURIComponent(e).replace(kK,(n,t)=>NK[t]??n)}function jA(e){return`${e}`}class gf{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new LK,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function OK(e,n){const t=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[d,p]=-1==s?[n.decodeKey(i),""]:[n.decodeKey(i.slice(0,s)),n.decodeValue(i.slice(s+1))],v=t.get(d)||[];v.push(p),t.set(d,v)}),t}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(t=>{const r=n.fromObject[t],i=Array.isArray(r)?r.map(jA):[jA(r)];this.map.set(t,i)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const t=this.map.get(n);return t?t[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,t){return this.clone({param:n,value:t,op:"a"})}appendAll(n){const t=[];return Object.keys(n).forEach(r=>{const i=n[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(n,t){return this.clone({param:n,value:t,op:"s"})}delete(n,t){return this.clone({param:n,value:t,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const t=this.encoder.encodeKey(n);return this.map.get(n).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const t=new gf({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(n),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const t=("a"===n.op?this.map.get(n.param):void 0)||[];t.push(jA(n.value)),this.map.set(n.param,t);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let r=this.map.get(n.param)||[];const i=r.indexOf(jA(n.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class FK{constructor(){this.map=new Map}set(n,t){return this.map.set(n,t),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function TG(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function EG(e){return typeof Blob<"u"&&e instanceof Blob}function AG(e){return typeof FormData<"u"&&e instanceof FormData}class NC{constructor(n,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function BK(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new vf),this.context||(this.context=new FK),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=t;else{const p=t.indexOf("?");this.urlWithParams=t+(-1===p?"?":p<t.length-1?"&":"")+d}}else this.params=new gf,this.urlWithParams=t}serializeBody(){return null===this.body?null:TG(this.body)||EG(this.body)||AG(this.body)||function VK(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof gf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||AG(this.body)?null:EG(this.body)?this.body.type||null:TG(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof gf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const t=n.method||this.method,r=n.url||this.url,i=n.responseType||this.responseType,s=void 0!==n.body?n.body:this.body,d=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,p=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let v=n.headers||this.headers,_=n.params||this.params;const C=n.context??this.context;return void 0!==n.setHeaders&&(v=Object.keys(n.setHeaders).reduce((S,k)=>S.set(k,n.setHeaders[k]),v)),n.setParams&&(_=Object.keys(n.setParams).reduce((S,k)=>S.set(k,n.setParams[k]),_)),new NC(t,r,s,{params:_,headers:v,context:C,reportProgress:p,responseType:i,withCredentials:d})}}var bs=(()=>((bs=bs||{})[bs.Sent=0]="Sent",bs[bs.UploadProgress=1]="UploadProgress",bs[bs.ResponseHeader=2]="ResponseHeader",bs[bs.DownloadProgress=3]="DownloadProgress",bs[bs.Response=4]="Response",bs[bs.User=5]="User",bs))();class bB extends class zK{constructor(n,t=200,r="OK"){this.headers=n.headers||new vf,this.status=void 0!==n.status?n.status:t,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(n={}){super(n),this.type=bs.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new bB({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}function xB(e,n){return{body:n,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let PG=(()=>{class e{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof NC)s=t;else{let v,_;v=i.headers instanceof vf?i.headers:new vf(i.headers),i.params&&(_=i.params instanceof gf?i.params:new gf({fromObject:i.params})),s=new NC(t,r,void 0!==i.body?i.body:null,{headers:v,context:i.context,params:_,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const d=$n(s).pipe(df(v=>this.handler.handle(v)));if(t instanceof NC||"events"===i.observe)return d;const p=d.pipe(Ki(v=>v instanceof bB));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return p.pipe(Ae(v=>{if(null!==v.body&&!(v.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return v.body}));case"blob":return p.pipe(Ae(v=>{if(null!==v.body&&!(v.body instanceof Blob))throw new Error("Response is not a Blob.");return v.body}));case"text":return p.pipe(Ae(v=>{if(null!==v.body&&"string"!=typeof v.body)throw new Error("Response is not a string.");return v.body}));default:return p.pipe(Ae(v=>v.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new gf).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,xB(i,r))}post(t,r,i={}){return this.request("POST",t,xB(i,r))}put(t,r,i={}){return this.request("PUT",t,xB(i,r))}}return e.\u0275fac=function(t){return new(t||e)(Lt(RK))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();const UK=["*"];let ZA;function FC(e){return function GK(){if(void 0===ZA&&(ZA=null,typeof window<"u")){const e=window;void 0!==e.trustedTypes&&(ZA=e.trustedTypes.createPolicy("angular#components",{createHTML:n=>n}))}return ZA}()?.createHTML(e)||e}function RG(e){return Error(`Unable to find icon with the name "${e}"`)}function LG(e){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${e}".`)}function OG(e){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${e}".`)}class Ov{constructor(n,t,r){this.url=n,this.svgText=t,this.options=r}}let YA=(()=>{class e{constructor(t,r,i,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,s){return this._addSvgIconConfig(t,r,new Ov(i,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,s){const d=this._sanitizer.sanitize(Ri.HTML,i);if(!d)throw OG(i);const p=FC(d);return this._addSvgIconConfig(t,r,new Ov("",p,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new Ov(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const s=this._sanitizer.sanitize(Ri.HTML,r);if(!s)throw OG(r);const d=FC(s);return this._addSvgIconSetConfig(t,new Ov("",d,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(Ri.RESOURCE_URL,t);if(!r)throw LG(t);const i=this._cachedIconsByUrl.get(r);return i?$n(XA(i)):this._loadSvgIconFromConfig(new Ov(t,null)).pipe(mo(s=>this._cachedIconsByUrl.set(r,s)),Ae(s=>XA(s)))}getNamedSvgIcon(t,r=""){const i=kG(r,t);let s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);const d=this._iconSetConfigs.get(r);return d?this._getSvgFromIconSetConfigs(t,d):ny(RG(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?$n(XA(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Ae(r=>XA(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?$n(i):nH(r.filter(d=>!d.svgText).map(d=>this._loadSvgIconSetFromConfig(d).pipe(Zd(p=>{const _=`Loading icon set URL: ${this._sanitizer.sanitize(Ri.RESOURCE_URL,d.url)} failed: ${p.message}`;return this._errorHandler.handleError(new Error(_)),$n(null)})))).pipe(Ae(()=>{const d=this._extractIconWithNameFromAnySet(t,r);if(!d)throw RG(t);return d}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const d=this._svgElementFromConfig(s),p=this._extractSvgIconFromSet(d,t,s.options);if(p)return p}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(mo(r=>t.svgText=r),Ae(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?$n(null):this._fetchIcon(t).pipe(mo(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const s=t.querySelector(`[id="${r}"]`);if(!s)return null;const d=s.cloneNode(!0);if(d.removeAttribute("id"),"svg"===d.nodeName.toLowerCase())return this._setSvgAttributes(d,i);if("symbol"===d.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(d),i);const p=this._svgElementFromString(FC("<svg></svg>"));return p.appendChild(d),this._setSvgAttributes(p,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(FC("<svg></svg>")),i=t.attributes;for(let s=0;s<i.length;s++){const{name:d,value:p}=i[s];"id"!==d&&r.setAttribute(d,p)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:i}=t,s=i?.withCredentials??!1;if(!this._httpClient)throw function WK(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const d=this._sanitizer.sanitize(Ri.RESOURCE_URL,r);if(!d)throw LG(r);const p=this._inProgressUrlFetches.get(d);if(p)return p;const v=this._httpClient.get(d,{responseType:"text",withCredentials:s}).pipe(Ae(_=>FC(_)),uA(()=>this._inProgressUrlFetches.delete(d)),kf());return this._inProgressUrlFetches.set(d,v),v}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(kG(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const s=this._resolvers[i](r,t);if(s)return ZK(s)?new Ov(s.url,null,s.options):new Ov(s,null)}}}return e.\u0275fac=function(t){return new(t||e)(Lt(PG,8),Lt(UN),Lt(Rr,8),Lt(uu))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function XA(e){return e.cloneNode(!0)}function kG(e,n){return e+":"+n}function ZK(e){return!(!e.url||!e.options)}const YK=ff(class{constructor(e){this._elementRef=e}}),XK=new sn("MAT_ICON_DEFAULT_OPTIONS"),$K=new sn("mat-icon-location",{providedIn:"root",factory:function KK(){const e=oa(Rr),n=e?e.location:null;return{getPathname:()=>n?n.pathname+n.search:""}}}),NG=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],QK=NG.map(e=>`[${e}]`).join(", "),qK=/^url\(['"]?#(.*?)['"]?\)$/;let qd=(()=>{class e extends YK{constructor(t,r,i,s,d,p){super(t),this._iconRegistry=r,this._location=s,this._errorHandler=d,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=ve.EMPTY,p&&(p.color&&(this.color=this.defaultColor=p.color),p.fontSet&&(this.fontSet=p.fontSet)),i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Br(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(d=>{s.setAttribute(d.name,`url('${t}#${d.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(QK),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)NG.forEach(d=>{const p=r[s],v=p.getAttribute(d),_=v?v.match(qK):null;if(_){let C=i.get(p);C||(C=[],i.set(p,C)),C.push({name:d,value:_[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(go(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${s.message}`))})}}}return e.\u0275fac=function(t){return new(t||e)(Xe(Nr),Xe(YA),Ls("aria-hidden"),Xe($K),Xe(uu),Xe(XK,8))},e.\u0275cmp=qn({type:e,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(Hr("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),bi("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Xn],ngContentSelectors:UK,decls:1,vars:0,template:function(t,r){1&t&&(Ui(),jr(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),e})(),FG=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({imports:[oi,oi]}),e})();const BG=xC({passive:!0});let JK=(()=>{class e{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return La;const r=$d(t),i=this._monitoredElements.get(r);if(i)return i.subject;const s=new te,d="cdk-text-field-autofilled",p=v=>{"cdk-text-field-autofill-start"!==v.animationName||r.classList.contains(d)?"cdk-text-field-autofill-end"===v.animationName&&r.classList.contains(d)&&(r.classList.remove(d),this._ngZone.run(()=>s.next({target:v.target,isAutofilled:!1}))):(r.classList.add(d),this._ngZone.run(()=>s.next({target:v.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",p,BG),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:s,unlisten:()=>{r.removeEventListener("animationstart",p,BG)}}),s}stopMonitoring(t){const r=$d(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}}return e.\u0275fac=function(t){return new(t||e)(Lt(ys),Lt(rr))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),VG=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({}),e})();const eQ=["connectionContainer"],tQ=["inputContainer"],nQ=["label"];function rQ(e,n){1&e&&(Bi(0),st(1,"div",14),Rn(2,"div",15)(3,"div",16)(4,"div",17),dt(),st(5,"div",18),Rn(6,"div",15)(7,"div",16)(8,"div",17),dt(),Vi())}function iQ(e,n){if(1&e){const t=na();st(0,"div",19),Yt("cdkObserveContent",function(){return Tr(t),Er(zn().updateOutlineGap())}),jr(1,1),dt()}2&e&&At("cdkObserveContentDisabled","outline"!=zn().appearance)}function aQ(e,n){if(1&e&&(Bi(0),jr(1,2),st(2,"span"),Qt(3),dt(),Vi()),2&e){const t=zn(2);Et(3),gu(t._control.placeholder)}}function oQ(e,n){1&e&&jr(0,3,["*ngSwitchCase","true"])}function sQ(e,n){1&e&&(st(0,"span",23),Qt(1," *"),dt())}function lQ(e,n){if(1&e){const t=na();st(0,"label",20,21),Yt("cdkObserveContent",function(){return Tr(t),Er(zn().updateOutlineGap())}),nr(2,aQ,4,1,"ng-container",12),nr(3,oQ,1,0,"ng-content",12),nr(4,sQ,2,0,"span",22),dt()}if(2&e){const t=zn();bi("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),At("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),Hr("for",t._control.id)("aria-owns",t._control.id),Et(2),At("ngSwitchCase",!1),Et(1),At("ngSwitchCase",!0),Et(1),At("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function uQ(e,n){1&e&&(st(0,"div",24),jr(1,4),dt())}function cQ(e,n){if(1&e&&(st(0,"div",25),Rn(1,"span",26),dt()),2&e){const t=zn();Et(1),bi("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function dQ(e,n){1&e&&(st(0,"div"),jr(1,5),dt()),2&e&&At("@transitionMessages",zn()._subscriptAnimationState)}function hQ(e,n){if(1&e&&(st(0,"div",30),Qt(1),dt()),2&e){const t=zn(2);At("id",t._hintLabelId),Et(1),gu(t.hintLabel)}}function fQ(e,n){if(1&e&&(st(0,"div",27),nr(1,hQ,2,2,"div",28),jr(2,6),Rn(3,"div",29),jr(4,7),dt()),2&e){const t=zn();At("@transitionMessages",t._subscriptAnimationState),Et(1),At("ngIf",t.hintLabel)}}const pQ=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],vQ=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],gQ=new sn("MatError"),mQ={transitionMessages:Qd("transitionMessages",[yl("enter",xa({opacity:1,transform:"translateY(0%)"})),bl("void => enter",[xa({opacity:0,transform:"translateY(-5px)"}),Vl("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let $A=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Sn({type:e}),e})();const _Q=new sn("MatHint");let _y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Sn({type:e,selectors:[["mat-label"]]}),e})(),yQ=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Sn({type:e,selectors:[["mat-placeholder"]]}),e})();const zG=new sn("MatPrefix");let bQ=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Sn({type:e,selectors:[["","matPrefix",""]],features:[Kr([{provide:zG,useExisting:e}])]}),e})();const HG=new sn("MatSuffix");let xQ=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Sn({type:e,selectors:[["","matSuffix",""]],features:[Kr([{provide:HG,useExisting:e}])]}),e})(),UG=0;const wQ=ff(class{constructor(e){this._elementRef=e}},"primary"),SQ=new sn("MAT_FORM_FIELD_DEFAULT_OPTIONS"),KA=new sn("MatFormField");let BC=(()=>{class e extends wQ{constructor(t,r,i,s,d,p,v){super(t),this._changeDetectorRef=r,this._dir=i,this._defaults=s,this._platform=d,this._ngZone=p,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new te,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+UG++,this._labelId="mat-form-field-label-"+UG++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==v,this.appearance=s?.appearance||"legacy",s&&(this._hideRequiredMarker=Boolean(s.hideRequiredMarker),s.color&&(this.color=this.defaultColor=s.color))}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults?.appearance||"legacy","outline"===this._appearance&&r!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Br(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(_l(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(zi(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(zi(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),Oa(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(_l(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(_l(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(zi(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Bl(this._label.nativeElement,"transitionend").pipe(go(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,i=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,r=this._connectionContainerRef.nativeElement,i=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const C=r.querySelectorAll(`${i}, ${s}`);for(let S=0;S<C.length;S++)C[S].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let d=0,p=0;const v=r.querySelectorAll(i),_=r.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const C=r.getBoundingClientRect();if(0===C.width&&0===C.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const S=this._getStartEnd(C),k=t.children,H=this._getStartEnd(k[0].getBoundingClientRect());let ne=0;for(let pe=0;pe<k.length;pe++)ne+=k[pe].offsetWidth;d=Math.abs(H-S)-5,p=ne>0?.75*ne+10:0}for(let C=0;C<v.length;C++)v[C].style.width=`${d}px`;for(let C=0;C<_.length;C++)_[C].style.width=`${p}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}}return e.\u0275fac=function(t){return new(t||e)(Xe(Nr),Xe(da),Xe($c,8),Xe(SQ,8),Xe(ys),Xe(rr),Xe(fs,8))},e.\u0275cmp=qn({type:e,selectors:[["mat-form-field"]],contentQueries:function(t,r,i){if(1&t&&(Li(i,$A,5),Li(i,$A,7),Li(i,_y,5),Li(i,_y,7),Li(i,yQ,5),Li(i,gQ,5),Li(i,_Q,5),Li(i,zG,5),Li(i,HG,5)),2&t){let s;ur(s=cr())&&(r._controlNonStatic=s.first),ur(s=cr())&&(r._controlStatic=s.first),ur(s=cr())&&(r._labelChildNonStatic=s.first),ur(s=cr())&&(r._labelChildStatic=s.first),ur(s=cr())&&(r._placeholderChild=s.first),ur(s=cr())&&(r._errorChildren=s),ur(s=cr())&&(r._hintChildren=s),ur(s=cr())&&(r._prefixChildren=s),ur(s=cr())&&(r._suffixChildren=s)}},viewQuery:function(t,r){if(1&t&&(Ai(eQ,7),Ai(tQ,5),Ai(nQ,5)),2&t){let i;ur(i=cr())&&(r._connectionContainerRef=i.first),ur(i=cr())&&(r._inputContainerRef=i.first),ur(i=cr())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,r){2&t&&bi("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[Kr([{provide:KA,useExisting:e}]),Xn],ngContentSelectors:vQ,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,r){1&t&&(Ui(pQ),st(0,"div",0)(1,"div",1,2),Yt("click",function(s){return r._control.onContainerClick&&r._control.onContainerClick(s)}),nr(3,rQ,9,0,"ng-container",3),nr(4,iQ,2,1,"div",4),st(5,"div",5,6),jr(7),st(8,"span",7),nr(9,lQ,5,16,"label",8),dt()(),nr(10,uQ,2,0,"div",9),dt(),nr(11,cQ,2,4,"div",10),st(12,"div",11),nr(13,dQ,2,1,"div",12),nr(14,fQ,5,2,"div",13),dt()()),2&t&&(Et(3),At("ngIf","outline"==r.appearance),Et(1),At("ngIf",r._prefixChildren.length),Et(5),At("ngIf",r._hasFloatingLabel()),Et(1),At("ngIf",r._suffixChildren.length),Et(1),At("ngIf","outline"!=r.appearance),Et(1),At("ngSwitch",r._getDisplayedMessages()),Et(1),At("ngSwitchCase","error"),Et(1),At("ngSwitchCase","hint"))},dependencies:[zs,Wc,_v,MU],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[mQ.transitionMessages]},changeDetection:0}),e})(),QA=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({imports:[kl,oi,iB,oi]}),e})();const CB=new sn("MAT_INPUT_VALUE_ACCESSOR"),DQ=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let MQ=0;const TQ=UU(class{constructor(e,n,t,r){this._defaultErrorStateMatcher=e,this._parentForm=n,this._parentFormGroup=t,this.ngControl=r,this.stateChanges=new te}});let wB=(()=>{class e extends TQ{constructor(t,r,i,s,d,p,v,_,C,S){super(p,s,d,i),this._elementRef=t,this._platform=r,this._autofillMonitor=_,this._formField=S,this._uid="mat-input-"+MQ++,this.focused=!1,this.stateChanges=new te,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(ne=>yU().has(ne)),this._iOSKeyupListener=ne=>{const pe=ne.target;!pe.value&&0===pe.selectionStart&&0===pe.selectionEnd&&(pe.setSelectionRange(1,1),pe.setSelectionRange(0,0))};const k=this._elementRef.nativeElement,H=k.nodeName.toLowerCase();this._inputValueAccessor=v||k,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&C.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===H,this._isTextarea="textarea"===H,this._isInFormField=!!S,this._isNativeSelect&&(this.controlType=k.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Br(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Zc.required)??!1}set required(t){this._required=Br(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&yU().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Br(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const t=this._formField,r=t&&"legacy"===t.appearance&&!t._hasLabel?.()?null:this.placeholder;if(r!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=r,r?i.setAttribute("placeholder",r):i.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){DQ.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return e.\u0275fac=function(t){return new(t||e)(Xe(Nr),Xe(ys),Xe(Yc,10),Xe(aC,8),Xe(ty,8),Xe(oB),Xe(CB,10),Xe(JK),Xe(rr),Xe(KA,8))},e.\u0275dir=Sn({type:e,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,r){1&t&&Yt("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&t&&(mu("disabled",r.disabled)("required",r.required),Hr("id",r.id)("data-placeholder",r.placeholder)("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required),bi("mat-input-server",r._isServer)("mat-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[Kr([{provide:$A,useExisting:e}]),Xn,Xi]}),e})(),WG=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({providers:[oB],imports:[VG,QA,oi,VG,QA]}),e})();class qA{constructor(n=!1,t,r=!0,i){this._multiple=n,this._emitChanges=r,this.compareWith=i,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new te,t&&t.length&&(n?t.forEach(s=>this._markSelected(s)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...n){this._verifyValueAssignment(n),n.forEach(r=>this._markSelected(r));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...n){this._verifyValueAssignment(n),n.forEach(r=>this._unmarkSelected(r));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...n){this._verifyValueAssignment(n);const t=this.selected,r=new Set(n);n.forEach(s=>this._markSelected(s)),t.filter(s=>!r.has(s)).forEach(s=>this._unmarkSelected(s));const i=this._hasQueuedChanges();return this._emitChangeEvent(),i}toggle(n){return this.isSelected(n)?this.deselect(n):this.select(n)}clear(n=!0){this._unmarkAll();const t=this._hasQueuedChanges();return n&&this._emitChangeEvent(),t}isSelected(n){if(this.compareWith){for(const t of this._selection)if(this.compareWith(t,n))return!0;return!1}return this._selection.has(n)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(n){this._multiple&&this.selected&&this._selected.sort(n)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(n){this.isSelected(n)||(this._multiple||this._unmarkAll(),this.isSelected(n)||this._selection.add(n),this._emitChanges&&this._selectedToEmit.push(n))}_unmarkSelected(n){this.isSelected(n)&&(this._selection.delete(n),this._emitChanges&&this._deselectedToEmit.push(n))}_unmarkAll(){this.isEmpty()||this._selection.forEach(n=>this._unmarkSelected(n))}_verifyValueAssignment(n){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}let SB=(()=>{class e{constructor(){this._listeners=[]}notify(t,r){for(let i of this._listeners)i(t,r)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(r=>t!==r)}}ngOnDestroy(){this._listeners=[]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),zQ=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({imports:[gy,oi,oi]}),e})();const KG={transformPanel:Qd("transformPanel",[bl("void => enter-dropdown",Vl("120ms cubic-bezier(0, 0, 0.2, 1)",xG([xa({opacity:0,transform:"scale(1, 0.8)"}),xa({opacity:1,transform:"scale(1, 1)"})]))),bl("void => enter-dialog",Vl("150ms cubic-bezier(0, 0, 0.2, 1)",xG([xa({opacity:0,transform:"scale(0.7)"}),xa({transform:"none",opacity:1})]))),bl("* => void",Vl("100ms linear",xa({opacity:0})))]),fadeInCalendar:Qd("fadeInCalendar",[yl("void",xa({opacity:0})),yl("enter",xa({opacity:1})),bl("void => *",Vl("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])},qG=function(e){return{active:e}};function nq(e,n){if(1&e){const t=na();st(0,"button",2),Yt("click",function(){const s=Tr(t).$implicit;return Er(zn().select(s))}),dt()}if(2&e){const t=n.$implicit,r=zn();no("background-color",t),At("ngClass",Bc(3,qG,r.selectedColor===t))}}function rq(e,n){if(1&e){const t=na();st(0,"button",2),Yt("click",function(){const s=Tr(t).$implicit;return Er(zn().select(s))}),dt()}if(2&e){const t=n.$implicit,r=zn();no("background-color",t),At("ngClass",Bc(3,qG,r.selectedColor===t))}}const iq=["button"],aq=/^\s+/,oq=/\s+$/,by=Math.round,sq=(Math,Math,Math,/[^0-9]/g),JG=["#ffffff","#ffff00","#ff00ff","#ff0000","#c0c0c0","#808080","#808000","#800080","#800000","#00ffff","#00ff00","#008080","#008000","#0000ff","#000080","#000000"];function eW(e,n,t){const r=e.getImageData(n,t,1,1).data;return{r:r[0],g:r[1],b:r[2]}}function kv(e){return 1==e.length?"0"+e:""+e}function uq(e){return Math.round(255*parseFloat(e)).toString(16)}function tW(e){return zl(e)/255}function zl(e){return parseInt(e,16)}function nW(e,n,t,r){var i=[kv(by(e).toString(16)),kv(by(n).toString(16)),kv(by(t).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}const mf="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",DB="[\\s|\\(]+("+mf+")[,|\\s]+("+mf+")[,|\\s]+("+mf+")\\s*\\)?",MB="[\\s|\\(]+("+mf+")[,|\\s]+("+mf+")[,|\\s]+("+mf+")[,|\\s]+("+mf+")\\s*\\)?",Nv={CSS_UNIT:new RegExp(mf),rgb:new RegExp("rgb"+DB),rgba:new RegExp("rgba"+MB),hsl:new RegExp("hsl"+DB),hsla:new RegExp("hsla"+MB),hsv:new RegExp("hsv"+DB),hsva:new RegExp("hsva"+MB),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function TB(e){let n;return e=e.replace(aq,"").replace(oq,"").toLowerCase(),(n=Nv.rgb.exec(e))?{r:n[1],g:n[2],b:n[3],a:1}:(n=Nv.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Nv.hex8.exec(e))?{r:zl(n[1]),g:zl(n[2]),b:zl(n[3]),a:tW(n[4])}:(n=Nv.hex6.exec(e))?{r:zl(n[1]),g:zl(n[2]),b:zl(n[3]),a:1}:(n=Nv.hex4.exec(e))?{r:zl(n[1]+""+n[1]),g:zl(n[2]+""+n[2]),b:zl(n[3]+""+n[3]),a:tW(n[4]+""+n[4])}:(n=Nv.hex3.exec(e))?{r:zl(n[1]+""+n[1]),g:zl(n[2]+""+n[2]),b:zl(n[3]+""+n[3]),a:1}:null}class Fv{constructor(n,t,r,i){this.r=n>255?255:n,this.g=t>255?255:t,this.b=r>255?255:r,this.a=null!=i?i>1?1:i:1,this.roundA=Math.round(this.a),this.hex=nW(this.r,this.g,this.b),this.rgba=this.toRgba()}toHex(n){return nW(this.r,this.g,this.b,n)}toRgba(){return`rgba(${this.r},${this.g},${this.b},${this.a})`}toHexString(n){return"#"+this.toHex(n)}toRgbString(){return 1===this.a?"rgb("+Math.round(this.r)+", "+Math.round(this.g)+", "+Math.round(this.b)+")":"rgba("+Math.round(this.r)+", "+Math.round(this.g)+", "+Math.round(this.b)+", "+this.roundA+")"}toHex8(n){return function lq(e,n,t,r,i){var s=[kv(by(e).toString(16)),kv(by(n).toString(16)),kv(by(t).toString(16)),kv(uq(r))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}(this.r,this.g,this.b,this.a,n)}toHex8String(n){return"#"+this.toHex8(n)}toString(n){let r;return n||!(this.a<1&&this.a>=0)||"hex"!==n&&"hex6"!==n&&"hex3"!==n&&"hex4"!==n&&"hex8"!==n?("rgb"===n&&(r=this.toRgbString()),("hex"===n||"hex6"===n)&&(r=this.toHexString()),"hex3"===n&&(r=this.toHexString(!0)),"hex4"===n&&(r=this.toHex8String(!0)),"hex8"===n&&(r=this.toHex8String()),r||this.toHexString()):this.toRgbString()}}let rW=(()=>{class e{constructor(t,r){this.zone=t,this.colorChanged=new En,this.x=0,this.y=0,this.drag=!1,this._destroyed=new te,this.elementId=r}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}ngAfterViewInit(){this.canvas=document.getElementById(this.elementId),this.ctx=this.canvas.getContext("2d"),this.width=this.canvas.width,this.height=this.canvas.height,this.draw()}draw(){this.ctx.clearRect(0,0,this.width,this.height),this.ctx.rect(0,0,this.width,this.height),this.fillGradient(),0!=this.y&&this.redrawIndicator(this.x,this.y)}onMousedown(t){this.drag=!0,this.changeColor(t),this.zone.runOutsideAngular(()=>{this.canvas.addEventListener("mousemove",this.onMousemove.bind(this))})}onMousemove(t){this.drag&&this.zone.run(()=>{this.changeColor(t)})}onMouseup(t){this.drag=!1,this.canvas.removeEventListener("mousemove",this.onMousemove)}emitChange(t){this.colorChanged.emit(t)}}return e.\u0275fac=function(t){Xu()},e.\u0275dir=Sn({type:e,inputs:{color:"color"},outputs:{colorChanged:"colorChanged"}}),e})(),hq=(()=>{class e extends rW{constructor(t){super(t,"color-strip"),this.zone=t}ngOnInit(){}ngAfterViewInit(){super.ngAfterViewInit()}fillGradient(){const t=this.ctx.createLinearGradient(0,0,0,this.height);t.addColorStop(0,"rgba(255, 0, 0, 1)"),t.addColorStop(.17,"rgba(255, 255, 0, 1)"),t.addColorStop(.34,"rgba(0, 255, 0, 1)"),t.addColorStop(.51,"rgba(0, 255, 255, 1)"),t.addColorStop(.68,"rgba(0, 0, 255, 1)"),t.addColorStop(.85,"rgba(255, 0, 255, 1)"),t.addColorStop(1,"rgba(255, 0, 0, 1)"),this.ctx.fillStyle=t,this.ctx.fill()}redrawIndicator(t,r){this.ctx.beginPath(),this.ctx.strokeStyle="white",this.ctx.lineWidth=2,this.ctx.arc(7.5,r,7.5,0,2*Math.PI,!1),this.ctx.stroke(),this.ctx.closePath()}changeColor(t){this.x=t.offsetX,this.y=t.offsetY,this.draw();const{r,g:i,b:s}=eW(this.ctx,t.offsetX,t.offsetY);this.emitChange(new Fv(r,i,s))}}return e.\u0275fac=function(t){return new(t||e)(Xe(rr))},e.\u0275cmp=qn({type:e,selectors:[["ngx-mat-color-slider"]],features:[Xn],decls:1,vars:0,consts:[["id","color-strip","width","15","height","200",1,"zone-strip",3,"mousedown","mouseup"]],template:function(t,r){1&t&&(st(0,"canvas",0),Yt("mousedown",function(s){return r.onMousedown(s)})("mouseup",function(s){return r.onMouseup(s)}),dt())}}),e})(),fq=(()=>{class e{constructor(){}onInput(t){this._formatInput(t.target)}_formatInput(t){let r=Number(t.value.replace(sq,""));r=isNaN(r)?0:r,t.value=r}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Sn({type:e,selectors:[["","ngxMatNumericColorInput",""]],hostBindings:function(t,r){1&t&&Yt("input",function(s){return r.onInput(s)})}}),e})(),vq=(()=>{class e extends rW{constructor(t){super(t,"color-block"),this.zone=t,this._resetBaseColor=!0,this.formGroup=new tA({r:new lf(null,[Zc.required]),g:new lf(null,[Zc.required]),b:new lf(null,[Zc.required]),a:new lf(null,[Zc.required]),hex:new lf(null,[Zc.required,Zc.pattern(Nv.hex6)])})}get rCtrl(){return this.formGroup.get("r")}get gCtrl(){return this.formGroup.get("g")}get bCtrl(){return this.formGroup.get("b")}get aCtrl(){return this.formGroup.get("a")}get hexCtrl(){return this.formGroup.get("hex")}ngOnInit(){Oa(this.rCtrl.valueChanges,this.gCtrl.valueChanges,this.bCtrl.valueChanges,this.aCtrl.valueChanges).pipe(zi(this._destroyed),fy(400)).subscribe(i=>{const s=new Fv(Number(this.rCtrl.value),Number(this.gCtrl.value),Number(this.bCtrl.value),Number(this.aCtrl.value));this.emitChange(s)}),this.hexCtrl.valueChanges.pipe(zi(this._destroyed),fy(400),MC()).subscribe(i=>{const s=TB(i);if(null!=s){const d=new Fv(s.r,s.g,s.b,s.a);this.emitChange(d)}})}ngOnChanges(t){t.color&&t.color.currentValue&&(this.updateForm(t.color.currentValue),this._resetBaseColor&&(this._baseColor=t.color.currentValue),this._resetBaseColor=!0,t.color.firstChange||this.draw())}updateForm(t){const r={emitEvent:!1};this.rCtrl.setValue(t.r,r),this.gCtrl.setValue(t.g,r),this.bCtrl.setValue(t.b,r),this.aCtrl.setValue(t.a,r),this.hexCtrl.setValue(t.hex,r)}redrawIndicator(t,r){this.ctx.beginPath(),this.ctx.strokeStyle="white",this.ctx.arc(t,r,5,0,2*Math.PI,!1),this.ctx.stroke(),this.ctx.closePath()}fillGradient(){this.ctx.fillStyle=this._baseColor?this._baseColor.rgba:"rgba(255,255,255,1)",this.ctx.fillRect(0,0,this.width,this.height);const t=this.ctx.createLinearGradient(0,0,this.width,0);t.addColorStop(0,"rgba(255,255,255,1)"),t.addColorStop(1,"rgba(255,255,255,0)"),this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.width,this.height);const r=this.ctx.createLinearGradient(0,0,0,this.height);r.addColorStop(0,"rgba(0,0,0,0)"),r.addColorStop(1,"rgba(0,0,0,1)"),this.ctx.fillStyle=r,this.ctx.fillRect(0,0,this.width,this.height)}onSliderColorChanged(t){this._baseColor=t,this.color=t,this.fillGradient(),this.emitChange(t)}changeColor(t){this.x=t.offsetX,this.y=t.offsetY,this._resetBaseColor=!1,this.draw();const{r,g:i,b:s}=eW(this.ctx,t.offsetX,t.offsetY);this.emitChange(new Fv(r,i,s))}}return e.\u0275fac=function(t){return new(t||e)(Xe(rr))},e.\u0275cmp=qn({type:e,selectors:[["ngx-mat-color-canvas"]],hostAttrs:[1,"ngx-mat-color-canvas"],features:[Xn,Xi],decls:30,vars:3,consts:[[3,"formGroup"],[1,"color-canvas-row"],[1,"zone-canvas"],["id","color-block","width","200","height","200",1,"zone-block",3,"mousedown","mouseup"],[3,"colorChanged"],[1,"zone-inputs"],["matInput","","formControlName","r","ngxMatNumericColorInput","","autocomplete","off"],["matInput","","formControlName","g","ngxMatNumericColorInput","","autocomplete","off"],["matInput","","formControlName","b","ngxMatNumericColorInput","","autocomplete","off"],["mat-mini-fab","",1,"preview"],["matPrefix","",1,"symbol"],["matInput","","formControlName","hex","autocomplete","off"],["matInput","","formControlName","a","type","number","min","0","max","1","step","0.1","autocomplete","off"]],template:function(t,r){1&t&&(st(0,"form",0)(1,"div",1)(2,"div",2)(3,"canvas",3),Yt("mousedown",function(s){return r.onMousedown(s)})("mouseup",function(s){return r.onMouseup(s)}),dt(),st(4,"ngx-mat-color-slider",4),Yt("colorChanged",function(s){return r.onSliderColorChanged(s)}),dt()(),st(5,"div",5)(6,"mat-form-field")(7,"mat-label"),Qt(8,"R"),dt(),Rn(9,"input",6),dt(),st(10,"mat-form-field")(11,"mat-label"),Qt(12,"G"),dt(),Rn(13,"input",7),dt(),st(14,"mat-form-field")(15,"mat-label"),Qt(16,"B"),dt(),Rn(17,"input",8),dt()()(),st(18,"div",1),Rn(19,"button",9),st(20,"mat-form-field")(21,"mat-label"),Qt(22,"HEX6"),dt(),st(23,"mat-label",10),Qt(24,"#\xa0"),dt(),Rn(25,"input",11),dt(),st(26,"mat-form-field")(27,"mat-label"),Qt(28,"A"),dt(),Rn(29,"input",12),dt()()()),2&t&&(At("formGroup",r.formGroup),Et(19),no("background-color",(null==r.color?null:r.color.rgba)||"transparent"))},dependencies:[BC,_y,bQ,wB,Fl,WH,eC,aF,sf,EH,pF,fF,ty,cF,hq,fq],styles:[".ngx-mat-color-canvas .color-canvas-row{display:flex}.ngx-mat-color-canvas .color-canvas-row:first-of-type{height:200px;margin-bottom:12px}.ngx-mat-color-canvas .color-canvas-row:first-of-type .card{height:180px}.ngx-mat-color-canvas .color-canvas-row canvas:hover{cursor:crosshair}.ngx-mat-color-canvas .color-canvas-row .zone{display:flex}.ngx-mat-color-canvas .color-canvas-row .zone-canvas{height:200px}.ngx-mat-color-canvas .color-canvas-row .zone-canvas .zone-block{border:1px solid rgba(0,0,0,.12)}.ngx-mat-color-canvas .color-canvas-row .zone-strip{flex-basis:auto;margin-left:10px}.ngx-mat-color-canvas .color-canvas-row .zone-inputs{display:flex;width:40px;height:200px;flex-direction:column;margin-left:16px;margin-top:12px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2){display:flex}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .preview{min-width:40px;min-height:40px;height:40px;width:40px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-form-field{margin-left:16px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-form-field:first-of-type{width:170px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-form-field:first-of-type .symbol{font-weight:bold;color:#0000008a}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-form-field:last-of-type{width:40px}.ngx-mat-color-canvas .mat-form-field-label{font-weight:bold}\n"],encapsulation:2}),e})(),gq=(()=>{class e{constructor(){this.colorChanged=new En,this.colors1=JG.slice(0,8),this.colors2=JG.slice(8,16)}set color(t){t&&(this.selectedColor=t.toHexString())}ngOnInit(){}select(t){this.selectedColor=t;const{r,g:i,b:s,a:d}=TB(t);this.colorChanged.emit(new Fv(r,i,s,d))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=qn({type:e,selectors:[["ngx-mat-color-collection"]],hostAttrs:[1,"ngx-mat-color-collection"],inputs:{color:"color"},outputs:{colorChanged:"colorChanged"},decls:4,vars:2,consts:[[1,"color-collection-row"],["mat-mini-fab","","class","btn-color",3,"background-color","ngClass","click",4,"ngFor","ngForOf"],["mat-mini-fab","",1,"btn-color",3,"ngClass","click"]],template:function(t,r){1&t&&(st(0,"div",0),nr(1,nq,1,5,"button",1),dt(),st(2,"div",0),nr(3,rq,1,5,"button",1),dt()),2&t&&(Et(1),At("ngForOf",r.colors1),Et(2),At("ngForOf",r.colors2))},dependencies:[Wd,Gc,Fl],styles:[".ngx-mat-color-collection .btn-color{height:20px;width:20px;margin-right:11px;box-shadow:none;opacity:.3}.ngx-mat-color-collection .btn-color.active{box-shadow:0 3px 5px -1px #0003,0 6px 10px #00000024,0 1px 18px #0000001f;opacity:1}\n"],encapsulation:2}),e})(),iW=(()=>{class e{constructor(){this.colorChanged=new En}ngOnInit(){}handleColorChanged(t){this.colorChanged.emit(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=qn({type:e,selectors:[["ngx-mat-color-palette"]],hostAttrs:[1,"ngx-mat-color-palette"],inputs:{color:"color"},outputs:{colorChanged:"colorChanged"},decls:2,vars:2,consts:[[3,"color","colorChanged"]],template:function(t,r){1&t&&(st(0,"ngx-mat-color-canvas",0),Yt("colorChanged",function(s){return r.handleColorChanged(s)}),dt(),st(1,"ngx-mat-color-collection",0),Yt("colorChanged",function(s){return r.handleColorChanged(s)}),dt()),2&t&&(At("color",r.color),Et(1),At("color",r.color))},dependencies:[vq,gq],styles:[".ngx-mat-color-palette .actions{margin-top:10px;display:flex}.ngx-mat-color-palette .actions .left{display:flex;flex-direction:column;margin-right:15px}.ngx-mat-color-palette .actions .left .preview{flex:2 1 auto;margin-bottom:10px}.ngx-mat-color-palette .actions .right{display:flex;width:40px;flex-direction:column}\n"],encapsulation:2}),e})(),EB=(()=>{class e{constructor(){}sameColor(t,r){return null==t&&null==r||null!=t&&null!=r&&t.rgba===r.rgba}format(t,r){return t.toString(r)}parse(t){const r=TB(t);return r?new Fv(r.r,r.g,r.b,r.a):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();const mq={display:{colorInput:"hex"}},aW=new sn("mat-color-formats"),oW=new sn("ngx-mat-colorpicker-scroll-strategy"),yq={provide:oW,deps:[rc],useFactory:function _q(e){return()=>e.scrollStrategies.reposition()}},bq=ff(class{constructor(e){this._elementRef=e}});let sW=(()=>{class e extends bq{constructor(t){super(t)}}return e.\u0275fac=function(t){return new(t||e)(Xe(Nr))},e.\u0275cmp=qn({type:e,selectors:[["ngx-mat-color-picker-content"]],viewQuery:function(t,r){if(1&t&&Ai(iW,5),2&t){let i;ur(i=cr())&&(r._palette=i.first)}},hostAttrs:[1,"ngx-mat-colorpicker-content"],hostVars:3,hostBindings:function(t,r){2&t&&(Uh("@transformPanel","enter"),bi("ngx-mat-colorpicker-content-touch",r.picker.touchUi))},inputs:{color:"color"},exportAs:["ngxMatColorPickerContent"],features:[Xn],decls:1,vars:1,consts:[[3,"color","colorChanged"]],template:function(t,r){1&t&&(st(0,"ngx-mat-color-palette",0),Yt("colorChanged",function(s){return r.picker.select(s)}),dt()),2&t&&At("color",r.picker._selected)},dependencies:[iW],styles:[".ngx-mat-colorpicker-content{display:block;border-radius:4px;box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f;background-color:#fff;color:#000000de;padding:16px}.ngx-mat-colorpicker-content .ngx-mat-color-palette{width:296px;height:354px}.ngx-mat-colorpicker-content-touch{display:block;max-height:80vh;overflow:auto}.ngx-mat-colorpicker-content-touch .ngx-mat-color-palette{min-width:250px;min-height:312px;max-width:750px;max-height:788px}@media all and (orientation: landscape){.mat-colorpicker-content-touch .ngx-mat-color-palette{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-colorpicker-content-touch .ngx-mat-color-palette{width:80vw;height:100vw}}\n"],encapsulation:2,data:{animation:[KG.transformPanel,KG.fadeInCalendar]},changeDetection:0}),e})(),xq=(()=>{class e{constructor(t,r,i,s,d,p,v,_){this._dialog=t,this._overlay=r,this._zone=i,this._adapter=s,this._dir=d,this._document=v,this._viewContainerRef=_,this.openedStream=new En,this.closedStream=new En,this._touchUi=!1,this._opened=!1,this._defaultColor="primary",this._validSelected=null,this._disabledChange=new te,this._focusedElementBeforeOpen=null,this._inputSubscription=ve.EMPTY,this._selectedChanged=new te,this._scrollStrategy=p}get disabled(){return void 0===this._disabled&&this._pickerInput?this._pickerInput.disabled:!!this._disabled}set disabled(t){const r=Br(t);r!==this._disabled&&(this._disabled=r,this._disabledChange.next(r))}get touchUi(){return this._touchUi}set touchUi(t){this._touchUi=Br(t)}get opened(){return this._opened}set opened(t){t?this.open():this.close()}get defaultColor(){return this._defaultColor}set defaultColor(t){this._defaultColor=t}get color(){return this._color||(this._pickerInput?this._pickerInput.getThemePalette():void 0)}set color(t){this._color=t}get _selected(){return this._validSelected}set _selected(t){this._validSelected=t}ngOnInit(){}ngOnDestroy(){this.close(),this._inputSubscription.unsubscribe(),this._disabledChange.complete(),this._popupRef&&(this._popupRef.dispose(),this._popupComponentRef=null)}select(t){let r=this._selected;this._selected=t,this._adapter.sameColor(r,this._selected)||this._selectedChanged.next(t)}registerInput(t){if(this._pickerInput)throw Error("A ColorPicker can only be associated with a single input.");this._pickerInput=t,this._inputSubscription=this._pickerInput._valueChange.subscribe(r=>this._selected=r)}open(){if(!this._opened&&!this.disabled){if(!this._pickerInput)throw Error("Attempted to open an ColorPicker with no associated input.");this._document&&(this._focusedElementBeforeOpen=this._document.activeElement),this.touchUi?this._openAsDialog():this._openAsPopup(),this._opened=!0,this.openedStream.emit()}}_openAsDialog(){this._dialogRef&&this._dialogRef.close(),this._dialogRef=this._dialog.open(sW,{direction:this._dir?this._dir.value:"ltr",viewContainerRef:this._viewContainerRef,panelClass:"ngx-mat-colorpicker-dialog"}),this._dialogRef.afterClosed().subscribe(()=>this.close()),this._dialogRef.componentInstance.picker=this,this._setColor()}_openAsPopup(){this._portal||(this._portal=new IA(sW,this._viewContainerRef)),this._popupRef||this._createPopup(),this._popupRef.hasAttached()||(this._popupComponentRef=this._popupRef.attach(this._portal),this._popupComponentRef.instance.picker=this,this._setColor(),this._zone.onStable.asObservable().pipe(go(1)).subscribe(()=>{this._popupRef.updatePosition()}))}_createPopup(){const t=new HA({positionStrategy:this._createPopupPositionStrategy(),hasBackdrop:!0,backdropClass:"mat-overlay-transparent-backdrop",direction:this._dir,scrollStrategy:this._scrollStrategy(),panelClass:"mat-colorpicker-popup"});this._popupRef=this._overlay.create(t),this._popupRef.overlayElement.setAttribute("role","dialog"),Oa(this._popupRef.backdropClick(),this._popupRef.detachments(),this._popupRef.keydownEvents().pipe(Ki(r=>27===r.keyCode||this._pickerInput&&r.altKey&&38===r.keyCode))).subscribe(r=>{r&&r.preventDefault(),this.close()})}close(){if(!this._opened)return;this._popupRef&&this._popupRef.hasAttached()&&this._popupRef.detach(),this._dialogRef&&(this._dialogRef.close(),this._dialogRef=null),this._portal&&this._portal.isAttached&&this._portal.detach();const t=()=>{this._opened&&(this._opened=!1,this.closedStream.emit(),this._focusedElementBeforeOpen=null)};this._focusedElementBeforeOpen&&"function"==typeof this._focusedElementBeforeOpen.focus?(this._focusedElementBeforeOpen.focus(),setTimeout(t)):t()}_setColor(){const t=this.color;this._popupComponentRef&&(this._popupComponentRef.instance.color=t),this._dialogRef&&(this._dialogRef.componentInstance.color=t)}_createPopupPositionStrategy(){return this._overlay.position().flexibleConnectedTo(this._pickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".ngx-mat-colorpicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition().withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}])}}return e.\u0275fac=function(t){return new(t||e)(Xe(DG),Xe(rc),Xe(rr),Xe(EB),Xe($c,8),Xe(oW),Xe(Rr,8),Xe(Ro))},e.\u0275cmp=qn({type:e,selectors:[["ngx-mat-color-picker"]],inputs:{disabled:"disabled",touchUi:"touchUi",opened:"opened",defaultColor:"defaultColor",color:"color"},outputs:{openedStream:"opened",closedStream:"closed"},exportAs:["ngxMatColorPicker"],decls:0,vars:0,template:function(t,r){},encapsulation:2,changeDetection:0}),e})();class nI{constructor(n,t){this.target=n,this.targetElement=t,this.value=this.target.value}}const Cq={provide:gs,useExisting:Wr(()=>AB),multi:!0},wq={provide:Oo,useExisting:Wr(()=>AB),multi:!0};let AB=(()=>{class e{constructor(t,r,i,s){if(this._elementRef=t,this._formField=r,this._colorFormats=i,this._adapter=s,this.colorChange=new En,this.colorInput=new En,this._disabledChange=new En,this._valueChange=new En,this._onTouched=()=>{},this._cvaOnChange=()=>{},this._validatorOnChange=()=>{},this._pickerSubscription=ve.EMPTY,this._validator=Zc.compose([]),this._lastValueValid=!1,!this._colorFormats)throw function dq(e){return Error(`NgxMatColorPicker: No provider found for ${e}. You must define MAT_COLOR_FORMATS in your module`)}("MAT_COLOR_FORMATS")}set ngxMatColorPicker(t){!t||(this._picker=t,this._picker.registerInput(this),this._pickerSubscription.unsubscribe(),this._pickerSubscription=this._picker._selectedChanged.subscribe(r=>{this.value=r,this._cvaOnChange(r),this._onTouched(),this.colorInput.emit(new nI(this,this._elementRef.nativeElement)),this.colorChange.emit(new nI(this,this._elementRef.nativeElement))}))}get disabled(){return!!this._disabled}set disabled(t){const r=Br(t),i=this._elementRef.nativeElement;this._disabled!==r&&(this._disabled=r,this._disabledChange.emit(r)),r&&i.blur&&i.blur()}get value(){return this._value}set value(t){const r=this.value;this._value=t,this._formatValue(t),this._adapter.sameColor(r,t)||this._valueChange.emit(t)}getThemePalette(){return this._formField?this._formField.color:void 0}registerOnValidatorChange(t){this._validatorOnChange=t}validate(t){return this._validator?this._validator(t):null}getPopupConnectionElementRef(){return this.getConnectedOverlayOrigin()}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}ngOnInit(){}ngOnDestroy(){this._pickerSubscription.unsubscribe(),this._valueChange.complete(),this._disabledChange.complete()}writeValue(t){this.value=t}registerOnChange(t){this._cvaOnChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_onChange(){this.colorChange.emit(new nI(this,this._elementRef.nativeElement))}_onKeydown(t){this._picker&&t.altKey&&40===t.keyCode&&!this._elementRef.nativeElement.readOnly&&(this._picker.open(),t.preventDefault())}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(t){this._elementRef.nativeElement.value=t?this._adapter.format(t,this._colorFormats.display.colorInput):""}_onInput(t){const r=this._lastValueValid,i=this._adapter.parse(t);this._adapter.sameColor(i,this._value)?r!==this._lastValueValid&&this._validatorOnChange():(this._value=i,this._cvaOnChange(i),this._valueChange.emit(i),this.colorInput.emit(new nI(this,this._elementRef.nativeElement)))}}return e.\u0275fac=function(t){return new(t||e)(Xe(Nr),Xe(BC,8),Xe(aW,8),Xe(EB))},e.\u0275dir=Sn({type:e,selectors:[["input","ngxMatColorPicker",""]],hostVars:3,hostBindings:function(t,r){1&t&&Yt("input",function(s){return r._onInput(s.target.value)})("change",function(){return r._onChange()})("blur",function(){return r._onBlur()})("keydown",function(s){return r._onKeydown(s)}),2&t&&(mu("disabled",r.disabled),Hr("aria-haspopup",r._picker?"dialog":null)("aria-owns",(null==r._picker?null:r._picker.opened)&&r._picker.id||null))},inputs:{ngxMatColorPicker:"ngxMatColorPicker",disabled:"disabled",value:"value"},outputs:{colorChange:"colorChange",colorInput:"colorInput"},exportAs:["ngxMatColorPickerInput"],features:[Kr([Cq,wq,{provide:CB,useExisting:e}])]}),e})(),Sq=(()=>{class e{constructor(t){this._cd=t,this._stateChanges=ve.EMPTY}get disabled(){if(null==this._disabled&&this.picker)return this.picker.disabled}set disabled(t){this._disabled=t}ngOnInit(){}ngOnChanges(t){t.picker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}open(t){this.picker&&!this.disabled&&(this.picker.open(),t.stopPropagation())}_watchStateChanges(){const t=this.picker?this.picker._disabledChange:$n(),r=this.picker&&this.picker._pickerInput?this.picker._pickerInput._disabledChange:$n(),i=this.picker?Oa(this.picker.openedStream,this.picker.closedStream):$n();this._stateChanges.unsubscribe(),this._stateChanges=Oa(t,r,i).subscribe(()=>this._cd.markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(Xe(da))},e.\u0275cmp=qn({type:e,selectors:[["ngx-mat-color-toggle"]],viewQuery:function(t,r){if(1&t&&Ai(iq,5),2&t){let i;ur(i=cr())&&(r._button=i.first)}},hostAttrs:[1,"ngx-mat-color-toggle"],hostVars:7,hostBindings:function(t,r){1&t&&Yt("focus",function(){return r._button.focus()}),2&t&&(Hr("tabindex",-1),bi("ngx-mat-color-toggle-active",r.picker&&r.picker.opened)("mat-accent",r.picker&&"accent"===r.picker.color)("mat-warn",r.picker&&"warn"===r.picker.color))},inputs:{picker:["for","picker"],tabIndex:"tabIndex",disabled:"disabled"},exportAs:["ngxMatColorPickerToggle"],features:[Xi],decls:4,vars:5,consts:[["mat-icon-button","","type","button",3,"disabled","click"],["button",""]],template:function(t,r){1&t&&(st(0,"button",0,1),Yt("click",function(s){return r.open(s)}),st(2,"mat-icon"),Qt(3,"palette"),dt()()),2&t&&(At("disabled",r.disabled),Hr("aria-haspopup",r.picker?"dialog":null)("tabindex",r.disabled?-1:r.tabIndex),Et(2),no("color",null==r.picker||null==r.picker._selected?null:r.picker._selected.rgba))},dependencies:[Fl,qd],styles:[".mat-form-field-appearance-legacy .mat-form-field-prefix .ngx-mat-color-toggle-default-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .ngx-mat-color-toggle-default-icon{width:1em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .ngx-mat-color-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .ngx-mat-color-toggle-default-icon{display:block;width:1.5em;height:1.5em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .ngx-mat-color-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .ngx-mat-color-toggle-default-icon{margin:auto}\n"],encapsulation:2}),e})(),Dq=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({providers:[EB,yq],imports:[kl,WG,qU,JU,zQ,i4,a4,PK,cy,FG]}),e})();const lW=["*"],Mq=["content"];function Tq(e,n){if(1&e){const t=na();st(0,"div",2),Yt("click",function(){return Tr(t),Er(zn()._onBackdropClicked())}),dt()}2&e&&bi("mat-drawer-shown",zn()._isShowingBackdrop())}function Eq(e,n){1&e&&(st(0,"mat-drawer-content"),jr(1,2),dt())}const Aq=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Iq=["mat-drawer","mat-drawer-content","*"],Pq={transformDrawer:Qd("transform",[yl("open, open-instant",xa({transform:"none",visibility:"visible"})),yl("void",xa({"box-shadow":"none",visibility:"hidden"})),bl("void => open-instant",Vl("0ms")),bl("void <=> open, open-instant => void",Vl("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},Rq=new sn("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function Lq(){return!1}}),uW=new sn("MAT_DRAWER_CONTAINER");let IB=(()=>{class e extends hB{constructor(t,r,i,s,d){super(i,s,d),this._changeDetectorRef=t,this._container=r}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return e.\u0275fac=function(t){return new(t||e)(Xe(da),Xe(Wr(()=>RB)),Xe(Nr),Xe(dB),Xe(rr))},e.\u0275cmp=qn({type:e,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,r){2&t&&no("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px")},features:[Kr([{provide:hB,useExisting:e}]),Xn],ngContentSelectors:lW,decls:1,vars:0,template:function(t,r){1&t&&(Ui(),jr(0))},encapsulation:2,changeDetection:0}),e})(),PB=(()=>{class e{constructor(t,r,i,s,d,p,v,_){this._elementRef=t,this._focusTrapFactory=r,this._focusMonitor=i,this._platform=s,this._ngZone=d,this._interactivityChecker=p,this._doc=v,this._container=_,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new te,this._animationEnd=new te,this._animationState="void",this.openedChange=new En(!0),this._openedStream=this.openedChange.pipe(Ki(C=>C),Ae(()=>{})),this.openedStart=this._animationStarted.pipe(Ki(C=>C.fromState!==C.toState&&0===C.toState.indexOf("open")),bF(void 0)),this._closedStream=this.openedChange.pipe(Ki(C=>!C),Ae(()=>{})),this.closedStart=this._animationStarted.pipe(Ki(C=>C.fromState!==C.toState&&"void"===C.toState),bF(void 0)),this._destroyed=new te,this.onPositionChanged=new En,this._modeChanged=new te,this.openedChange.subscribe(C=>{C?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{Bl(this._elementRef.nativeElement,"keydown").pipe(Ki(C=>27===C.keyCode&&!this.disableClose&&!Su(C)),zi(this._destroyed)).subscribe(C=>this._ngZone.run(()=>{this.close(),C.stopPropagation(),C.preventDefault()}))}),this._animationEnd.pipe(MC((C,S)=>C.fromState===S.fromState&&C.toState===S.toState)).subscribe(C=>{const{fromState:S,toState:k}=C;(0===k.indexOf("open")&&"void"===S||"void"===k&&0===S.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=Br(t)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(t){("true"===t||"false"===t||null==t)&&(t=Br(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle(Br(t))}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_takeFocus(){if(!this._focusTrap)return;const t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{!r&&"function"==typeof this._elementRef.nativeElement.focus&&t.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(t){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,r){t&&r&&(this._openedVia=r);const i=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),i}_setOpen(t,r,i){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",r&&this._restoreFocus(i)),this._updateFocusTrapState(),new Promise(s=>{this.openedChange.pipe(go(1)).subscribe(d=>s(d?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(t){const r=this._elementRef.nativeElement,i=r.parentNode;"end"===t?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),i.insertBefore(this._anchor,r)),i.appendChild(r)):this._anchor&&this._anchor.parentNode.insertBefore(r,this._anchor)}}return e.\u0275fac=function(t){return new(t||e)(Xe(Nr),Xe(kA),Xe(nc),Xe(ys),Xe(rr),Xe(TC),Xe(Rr,8),Xe(uW,8))},e.\u0275cmp=qn({type:e,selectors:[["mat-drawer"]],viewQuery:function(t,r){if(1&t&&Ai(Mq,5),2&t){let i;ur(i=cr())&&(r._content=i.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,r){1&t&&zm("@transform.start",function(s){return r._animationStarted.next(s)})("@transform.done",function(s){return r._animationEnd.next(s)}),2&t&&(Hr("align",null),Uh("@transform",r._animationState),bi("mat-drawer-end","end"===r.position)("mat-drawer-over","over"===r.mode)("mat-drawer-push","push"===r.mode)("mat-drawer-side","side"===r.mode)("mat-drawer-opened",r.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:lW,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,r){1&t&&(Ui(),st(0,"div",0,1),jr(2),dt())},dependencies:[hB],encapsulation:2,data:{animation:[Pq.transformDrawer]},changeDetection:0}),e})(),RB=(()=>{class e{constructor(t,r,i,s,d,p=!1,v){this._dir=t,this._element=r,this._ngZone=i,this._changeDetectorRef=s,this._animationMode=v,this._drawers=new Yh,this.backdropClick=new En,this._destroyed=new te,this._doCheckSubject=new te,this._contentMargins={left:null,right:null},this._contentMarginChanges=new te,t&&t.change.pipe(zi(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),d.change().pipe(zi(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=p}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=Br(t)}get hasBackdrop(){return this._backdropOverride??(!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode)}set hasBackdrop(t){this._backdropOverride=null==t?null:Br(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(_l(this._allDrawers),zi(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(r=>!r._container||r._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(_l(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(fy(10),zi(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,r=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const i=this._left._getWidth();t+=i,r-=i}if(this._right&&this._right.opened)if("side"==this._right.mode)r+=this._right._getWidth();else if("push"==this._right.mode){const i=this._right._getWidth();r+=i,t-=i}t=t||null,r=r||null,(t!==this._contentMargins.left||r!==this._contentMargins.right)&&(this._contentMargins={left:t,right:r},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(Ki(r=>r.fromState!==r.toState),zi(this._drawers.changes)).subscribe(r=>{"open-instant"!==r.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(zi(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){!t||t.onPositionChanged.pipe(zi(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(go(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(zi(Oa(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const r=this._element.nativeElement.classList,i="mat-drawer-container-has-open";t?r.add(i):r.remove(i)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return e.\u0275fac=function(t){return new(t||e)(Xe($c,8),Xe(Nr),Xe(rr),Xe(da),Xe(RC),Xe(Rq),Xe(fs,8))},e.\u0275cmp=qn({type:e,selectors:[["mat-drawer-container"]],contentQueries:function(t,r,i){if(1&t&&(Li(i,IB,5),Li(i,PB,5)),2&t){let s;ur(s=cr())&&(r._content=s.first),ur(s=cr())&&(r._allDrawers=s)}},viewQuery:function(t,r){if(1&t&&Ai(IB,5),2&t){let i;ur(i=cr())&&(r._userContent=i.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,r){2&t&&bi("mat-drawer-container-explicit-backdrop",r._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[Kr([{provide:uW,useExisting:e}])],ngContentSelectors:Iq,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,r){1&t&&(Ui(Aq),nr(0,Tq,1,2,"div",0),jr(1),jr(2,1),nr(3,Eq,2,0,"mat-drawer-content",1)),2&t&&(At("ngIf",r.hasBackdrop),Et(3),At("ngIf",!r._content))},dependencies:[zs,IB],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),e})(),Oq=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({imports:[kl,oi,LC,LC,oi]}),e})();const kq=["*",[["mat-toolbar-row"]]],Nq=["*","mat-toolbar-row"],Fq=ff(class{constructor(e){this._elementRef=e}});let LB=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Sn({type:e,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),e})(),OB=(()=>{class e extends Fq{constructor(t,r,i){super(t),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return e.\u0275fac=function(t){return new(t||e)(Xe(Nr),Xe(ys),Xe(Rr))},e.\u0275cmp=qn({type:e,selectors:[["mat-toolbar"]],contentQueries:function(t,r,i){if(1&t&&Li(i,LB,5),2&t){let s;ur(s=cr())&&(r._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&bi("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[Xn],ngContentSelectors:Nq,decls:2,vars:0,template:function(t,r){1&t&&(Ui(kq),jr(0),jr(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),e})(),Bq=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({imports:[oi,oi]}),e})();function Vq(e,n){if(1&e){const t=na();st(0,"button",10),Yt("click",function(){return Tr(t),zn(),Er(pi(12).toggle())}),st(1,"mat-icon"),Qt(2,"menu"),dt()()}}function zq(e,n){if(1&e){const t=na();st(0,"button",10),Yt("click",function(){return Tr(t),zn(),Er(pi(16).toggle())}),st(1,"mat-icon"),Qt(2,"menu"),dt()()}}const Hq=["*",[["","drawerLeft",""]],[["","drawerRight",""]],[["","centerContent",""]]],Uq=["*","[drawerLeft]","[drawerRight]","[centerContent]"];let kB=(()=>{class e{constructor(){this.leftDrawer=!0,this.rightDrawer=!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=qn({type:e,selectors:[["app-tutorial-template"]],inputs:{leftDrawer:"leftDrawer",rightDrawer:"rightDrawer"},ngContentSelectors:Uq,decls:21,vars:4,consts:[["color","primary"],["mat-icon-button","","class","example-icon",3,"click",4,"ngIf"],["routerLink","/home",1,"show-smallscreen"],["mat-icon-button","",1,"example-icon"],["mode","side",3,"opened"],["drawerLeft",""],[1,"vertical-flex","drawer"],["mode","side","position","end",3,"opened"],["drawerRight",""],[1,"horizontal-flex","drawer-container"],["mat-icon-button","",1,"example-icon",3,"click"]],template:function(t,r){1&t&&(Ui(Hq),st(0,"mat-toolbar",0)(1,"mat-toolbar-row"),nr(2,Vq,3,0,"button",1),st(3,"a",2)(4,"button",3)(5,"mat-icon"),Qt(6,"home"),dt()()(),st(7,"span"),jr(8),dt(),nr(9,zq,3,0,"button",1),dt()(),st(10,"mat-drawer-container")(11,"mat-drawer",4,5)(13,"div",6),jr(14,1),dt()(),st(15,"mat-drawer",7,8),Rn(17,"div",6),jr(18,2),dt(),st(19,"div",9),jr(20,3),dt()()),2&t&&(Et(2),At("ngIf",r.leftDrawer),Et(7),At("ngIf",r.rightDrawer),Et(2),At("opened",r.leftDrawer),Et(4),At("opened",r.rightDrawer))},dependencies:[zs,PB,RB,Fl,OB,LB,qd,Tv],styles:["mat-drawer[_ngcontent-%COMP%]{max-width:50vw}mat-toolbar-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100%;text-align:center}.loading[_ngcontent-%COMP%]{position:fixed;z-index:100;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#000c;width:100vw;height:100vh;justify-content:center;align-items:center;display:flex}.drawer[_ngcontent-%COMP%]{padding:1em .25em;align-items:center}.drawer-container[_ngcontent-%COMP%]{gap:1em;justify-content:center;align-items:center;margin-top:1em}[_nghost-%COMP%]     h2{text-align:center;margin:1ch}"]}),e})();function Wq(e,n){return function(t,r){n(t,r,e)}}function jq(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)}const iI=new sn("OpenCV config object token");let hW=(()=>{let e=class{constructor(t,r){this._ngZone=r,this.cvState=new Nl({ready:!1,error:!1,loading:!0,state:"loading"}),t||(t={}),this.configModule=this.generateConfigModule(t),this.loadOpenCv()}loadOpenCv(){this.cvState.next(this.newState("loading")),window.Module=this.configModule;const t=document.createElement("script");t.setAttribute("async",""),t.setAttribute("type","text/javascript"),t.addEventListener("error",()=>{const i=new Error("Failed to load "+this.configModule.scriptUrl);this.cvState.next(this.newState("error")),this.cvState.error(i)},{passive:!0}),t.src=this.configModule.scriptUrl;const r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(t,r):document.head.appendChild(t)}newState(t){const r={ready:!1,loading:!1,error:!1,state:""};return Object.keys(r).forEach(i=>{"state"!==i&&(i===t?(r[i]=!0,r.state=i):r[i]=!1)}),r}generateConfigModule(t){return{scriptUrl:t.openCVDirPath?`${t.openCVDirPath}/opencv.js`:"/assets/opencv/opencv.js",wasmBinaryFile:"opencv_js.wasm",usingWasm:!0,onRuntimeInitialized:()=>{this._ngZone.run(()=>{console.log("openCV Ready"),this.cvState.next(this.newState("ready")),t.runOnOpenCVInit&&t.runOnOpenCVInit()})}}}};return e.\u0275fac=function(t){return new(t||e)(Lt(iI),Lt(rr))},e.\u0275prov=yn({factory:function(){return new e(Lt(iI),Lt(rr))},token:e,providedIn:"root"}),e=function Gq(e,n,t,r){var d,i=arguments.length,s=i<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,n,t,r);else for(var p=e.length-1;p>=0;p--)(d=e[p])&&(s=(i<3?d(s):i>3?d(n,t,s):d(n,t))||s);return i>3&&s&&Object.defineProperty(n,t,s),s}([Wq(0,_p(iI)),jq("design:paramtypes",[Object,rr])],e),e})();var fW;let Cy=fW=class{static forRoot(n){return{ngModule:fW,providers:[{provide:iI,useValue:n}]}}};Cy.\u0275fac=function(n){return new(n||Cy)},Cy.\u0275mod=er({type:Cy}),Cy.\u0275inj=pr({providers:[hW]});let FB=(()=>{class e{constructor(){this.showImagePreset=!1}toggleImagePreset(){this.showImagePreset=!this.showImagePreset}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Yq(e,n){if(1&e&&(qf(),Rn(0,"circle",4)),2&e){const t=zn(),r=pi(1);no("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(r)),Hr("r",t._getCircleRadius())}}function Xq(e,n){if(1&e&&(qf(),Rn(0,"circle",4)),2&e){const t=zn(),r=pi(1);no("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(r)),Hr("r",t._getCircleRadius())}}const Kq=ff(class{constructor(e){this._elementRef=e}},"primary"),Qq=new sn("mat-progress-spinner-default-options",{providedIn:"root",factory:function qq(){return{diameter:100}}});class Jd extends Kq{constructor(n,t,r,i,s,d,p,v){super(n),this._document=r,this._diameter=100,this._value=0,this._resizeSubscription=ve.EMPTY,this.mode="determinate";const _=Jd._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),_.has(r.head)||_.set(r.head,new Set([100])),this._noopAnimations="NoopAnimations"===i&&!!s&&!s._forceAnimations,"mat-spinner"===n.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.color&&(this.color=this.defaultColor=s.color),s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),t.isBrowser&&t.SAFARI&&p&&d&&v&&(this._resizeSubscription=p.change(150).subscribe(()=>{"indeterminate"===this.mode&&v.run(()=>d.markForCheck())}))}get diameter(){return this._diameter}set diameter(n){this._diameter=Du(n),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(n){this._strokeWidth=Du(n)}get value(){return"determinate"===this.mode?this._value:0}set value(n){this._value=Math.max(0,Math.min(100,Du(n)))}ngOnInit(){const n=this._elementRef.nativeElement;this._styleRoot=xU(n)||this._document.head,this._attachStyleNode(),n.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const n=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${n} ${n}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(n){const t=50*(n.currentScale??1);return`${t}% ${t}%`}_attachStyleNode(){const n=this._styleRoot,t=this._diameter,r=Jd._diameters;let i=r.get(n);if(!i||!i.has(t)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),n.appendChild(s),i||(i=new Set,r.set(n,i)),i.add(t)}}_getAnimationText(){const n=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*n).replace(/END_VALUE/g,""+.2*n).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Jd._diameters=new WeakMap,Jd.\u0275fac=function(n){return new(n||Jd)(Xe(Nr),Xe(ys),Xe(Rr,8),Xe(fs,8),Xe(Qq),Xe(da),Xe(RC),Xe(rr))},Jd.\u0275cmp=qn({type:Jd,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(n,t){2&n&&(Hr("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),no("width",t.diameter,"px")("height",t.diameter,"px"),bi("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[Xn],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(n,t){1&n&&(qf(),st(0,"svg",0,1),nr(2,Yq,1,11,"circle",2),nr(3,Xq,1,9,"circle",3),dt()),2&n&&(no("width",t.diameter,"px")("height",t.diameter,"px"),At("ngSwitch","indeterminate"===t.mode),Hr("viewBox",t._getViewBox()),Et(2),At("ngSwitchCase",!0),Et(1),At("ngSwitchCase",!1))},dependencies:[Wc,_v],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let eJ=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({imports:[oi,kl,oi]}),e})(),tJ=(()=>{class e{constructor(t){this.uiservice=t,this.loadingEvent=new En,this.showPresetEvent=new En}ngOnInit(){}loading(t){t.target.files&&t.target.files[0]&&this.loadingEvent.emit(t.target.files[0])}toggleShowImagePreset(){this.uiservice.toggleImagePreset()}}return e.\u0275fac=function(t){return new(t||e)(Xe(FB))},e.\u0275cmp=qn({type:e,selectors:[["app-loading-buttons"]],outputs:{loadingEvent:"loadingEvent",showPresetEvent:"showPresetEvent"},decls:6,vars:0,consts:[["type","button","mat-raised-button","","color","primary",3,"click"],["hidden","","type","file","accept","images/*",3,"change"],["fileInput",""]],template:function(t,r){if(1&t){const i=na();st(0,"button",0),Yt("click",function(){return r.toggleShowImagePreset()}),Qt(1,"Show preset"),dt(),st(2,"button",0),Yt("click",function(){return Tr(i),Er(pi(5).click())}),Qt(3," Load image\n"),dt(),st(4,"input",1,2),Yt("change",function(d){return r.loading(d)}),dt()}},dependencies:[Fl]}),e})();const nJ=JSON.parse('[{"name":"Fourier Transform","content":[{"name":"House","url":"assets/image_presets/House.jpeg"},{"name":"Moon","url":"assets/image_presets/Moon.jpeg"},{"name":"CT Scan","url":"assets/image_presets/CTandstripes.jpeg"},{"name":"X Ray","url":"assets/image_presets/XrayBar.jpeg"}]},{"name":"Morphological Operations","content":[{"name":"Hello","url":"assets/image_presets/Hello.jpeg"},{"name":"Tree","url":"assets/image_presets/arbre_binaire.jpeg"},{"name":"Little Guy","url":"assets/image_presets/bonhomme_morpho.jpeg"}]},{"name":"Color images","content":[{"name":"Peppers","url":"assets/image_presets/poivron.jpeg"},{"name":"Butterfly","url":"assets/image_presets/papillon.jpg"},{"name":"Homomorphic Flower","url":"assets/image_presets/hibiscus_homomorphic.jpg"}]}]');function rJ(e,n){if(1&e){const t=na();st(0,"div",3)(1,"button",4),Yt("click",function(){const s=Tr(t).$implicit;return Er(zn(2).loadSelectedImage(s.url))}),Qt(2),dt(),Rn(3,"div",5)(4,"img",6),dt()}if(2&e){const t=n.$implicit;Et(2),Za(" ",t.name," "),Et(2),At("src",t.url,$g)}}function iJ(e,n){if(1&e&&(st(0,"div")(1,"p"),Qt(2),dt(),nr(3,rJ,5,2,"div",2),dt()),2&e){const t=n.$implicit;Et(2),gu(t.name),Et(1),At("ngForOf",t.content)}}let aJ=(()=>{class e{constructor(t){this.uiservice=t,this.presetEvent=new En,this.images_presets=nJ}ngOnInit(){}loadSelectedImage(t){this.uiservice.toggleImagePreset(),this.presetEvent.emit(t)}}return e.\u0275fac=function(t){return new(t||e)(Xe(FB))},e.\u0275cmp=qn({type:e,selectors:[["app-image-presets"]],outputs:{presetEvent:"presetEvent"},decls:5,vars:1,consts:[["mat-button","","color","primary",3,"click"],[4,"ngFor","ngForOf"],["class","horizontal-align",4,"ngFor","ngForOf"],[1,"horizontal-align"],["mat-button","",3,"click"],[1,"filler"],["alt","image.name","width","32px","height","32px",1,"rounded",3,"src"]],template:function(t,r){1&t&&(st(0,"button",0),Yt("click",function(){return r.uiservice.toggleImagePreset()}),Qt(1,"\nClose "),st(2,"mat-icon"),Qt(3,"close"),dt()(),nr(4,iJ,4,2,"div",1)),2&t&&(Et(4),At("ngForOf",r.images_presets))},dependencies:[Gc,Fl,qd],styles:[".horizontal-align[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:row}.horizontal-align[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:first-child{align-self:flex-start}.filler[_ngcontent-%COMP%]{flex-grow:1}.horizontal-align[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:last-child{align-self:flex-end}.rounded[_ngcontent-%COMP%]{border-radius:50%}"]}),e})();const pW=["outputCanvas"],vW=["inputCanvas"];function oJ(e,n){1&e&&(st(0,"div",12),Rn(1,"mat-spinner",13),dt()),2&e&&(Et(1),At("diameter",300))}function sJ(e,n){if(1&e){const t=na();st(0,"button",14),Yt("click",function(){return Tr(t),zn(),Er(pi(13).toggle())}),st(1,"mat-icon"),Qt(2,"menu"),dt()()}}function lJ(e,n){if(1&e){const t=na();st(0,"button",14),Yt("click",function(){return Tr(t),zn(),Er(pi(18).toggle())}),st(1,"mat-icon"),Qt(2,"menu"),dt()()}}function uJ(e,n){if(1&e){const t=na();Bi(0),st(1,"app-loading-buttons",15),Yt("loadingEvent",function(i){return Tr(t),Er(zn().loadSelectedFile(i))}),dt(),Rn(2,"hr"),st(3,"button",16),Yt("click",function(){return Tr(t),Er(zn().drawCanvasContained.clearCanvas())}),Qt(4," Clear "),dt(),Rn(5,"hr"),jr(6,3),Vi()}}function cJ(e,n){if(1&e){const t=na();Bi(0),st(1,"app-image-presets",17),Yt("presetEvent",function(i){return Tr(t),Er(zn().loadSelectedFileFromPath(i))}),dt(),Vi()}}const dJ=["*",[["","drawerRight",""]],[["","centerContent",""]],[["","drawerLeft",""]]],hJ=["*","[drawerRight]","[centerContent]","[drawerLeft]"];let Mu=(()=>{class e extends kB{constructor(t,r){super(),this.ngxOpenCv=t,this.uiservice=r,this.sideMenuContext=!0}ngAfterContentInit(){this.ngxOpenCv.cvState.subscribe(t=>{this.cvState=t.state})}loadSelectedFileFromPath(t){const r=new Image;r.onerror=i=>{console.log("Loading failed")},r.src=t,r.onload=()=>{this.drawCanvasContained.drawImage(r)}}loadSelectedFile(t){var r=new FileReader;r.onload=i=>{const s=new Image;s.onerror=d=>{console.log("Loading failed")},s.src=i.target.result,s.onload=()=>{this.drawCanvasContained.drawImage(s)}},r.readAsDataURL(t)}clearCanvas(){this.drawCanvasContained.clearCanvas()}updateProfile(){const t=this.outputCanvas.getProfile();this.profileOptions={legend:{data:["Profile"],align:"left"},tooltip:{},xAxis:{data:Array.from(Array(t.length).keys()),silent:!1,splitLine:{show:!1}},yAxis:[{type:"value"}],series:[{symbol:"none",name:"profile",type:"line",areaStyle:{},data:t}],animationEasing:"elasticOut",animationDelayUpdate:r=>5*r}}toggleImagePresets(){this.sideMenuContext=!this.sideMenuContext}}return e.\u0275fac=function(t){return new(t||e)(Xe(hW),Xe(FB))},e.\u0275cmp=qn({type:e,selectors:[["app-tutorial-template-images"]],contentQueries:function(t,r,i){if(1&t&&(Li(i,pW,5),Li(i,vW,5)),2&t){let s;ur(s=cr())&&(r.outputCanvasContained=s.first),ur(s=cr())&&(r.drawCanvasContained=s.first)}},viewQuery:function(t,r){if(1&t&&(Ai(pW,5),Ai(vW,5)),2&t){let i;ur(i=cr())&&(r.outputCanvas=i.first),ur(i=cr())&&(r.drawCanvas=i.first)}},features:[Xn],ngContentSelectors:hJ,decls:23,vars:7,consts:[["class","loading",4,"ngIf"],["color","primary"],["mat-icon-button","","class","example-icon",3,"click",4,"ngIf"],["routerLink","/home",1,"show-smallscreen"],["mat-icon-button","",1,"example-icon"],["mode","side",3,"opened"],["drawerLeft",""],[1,"vertical-flex","drawer"],[4,"ngIf"],["mode","side","position","end",3,"opened"],["drawerRight",""],[1,"horizontal-flex","drawer-container"],[1,"loading"],["color","primary",3,"diameter"],["mat-icon-button","",1,"example-icon",3,"click"],[3,"loadingEvent"],["mat-raised-button","","color","warn",1,"fillWidth",3,"click"],[3,"presetEvent"]],template:function(t,r){1&t&&(Ui(dJ),nr(0,oJ,2,1,"div",0),st(1,"mat-toolbar",1)(2,"mat-toolbar-row"),nr(3,sJ,3,0,"button",2),st(4,"a",3)(5,"button",4)(6,"mat-icon"),Qt(7,"home"),dt()()(),st(8,"span"),jr(9),dt(),nr(10,lJ,3,0,"button",2),dt()(),st(11,"mat-drawer-container")(12,"mat-drawer",5,6)(14,"div",7),nr(15,uJ,7,0,"ng-container",8),nr(16,cJ,2,0,"ng-container",8),dt()(),st(17,"mat-drawer",9,10),Rn(19,"div",7),jr(20,1),dt(),st(21,"div",11),jr(22,2),dt()()),2&t&&(At("ngIf","loading"==r.cvState),Et(3),At("ngIf",r.leftDrawer),Et(7),At("ngIf",r.rightDrawer),Et(2),At("opened",r.leftDrawer),Et(3),At("ngIf",!r.uiservice.showImagePreset),Et(1),At("ngIf",r.uiservice.showImagePreset),Et(1),At("opened",r.rightDrawer))},dependencies:[Jd,zs,PB,RB,Fl,OB,LB,qd,Tv,tJ,aJ],styles:["mat-drawer[_ngcontent-%COMP%]{max-width:50vw}mat-toolbar-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100%;text-align:center}.loading[_ngcontent-%COMP%]{position:fixed;z-index:100;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#000c;width:100vw;height:100vh;justify-content:center;align-items:center;display:flex}.drawer[_ngcontent-%COMP%]{padding:1em .25em;align-items:center}.drawer-container[_ngcontent-%COMP%]{gap:1em;justify-content:center;align-items:center;margin-top:1em}[_nghost-%COMP%]     h2{text-align:center;margin:1ch}"]}),e})();const fJ=["trigger"],pJ=["panel"];function vJ(e,n){if(1&e&&(st(0,"span",8),Qt(1),dt()),2&e){const t=zn();Et(1),gu(t.placeholder)}}function gJ(e,n){if(1&e&&(st(0,"span",12),Qt(1),dt()),2&e){const t=zn(2);Et(1),gu(t.triggerValue)}}function mJ(e,n){1&e&&jr(0,0,["*ngSwitchCase","true"])}function _J(e,n){1&e&&(st(0,"span",9),nr(1,gJ,2,1,"span",10),nr(2,mJ,1,0,"ng-content",11),dt()),2&e&&(At("ngSwitch",!!zn().customTrigger),Et(2),At("ngSwitchCase",!0))}function yJ(e,n){if(1&e){const t=na();st(0,"div",13)(1,"div",14,15),Yt("@transformPanel.done",function(i){return Tr(t),Er(zn()._panelDoneAnimatingStream.next(i.toState))})("keydown",function(i){return Tr(t),Er(zn()._handleKeydown(i))}),jr(3,1),dt()()}if(2&e){const t=zn();At("@transformPanelWrap",void 0),Et(1),hx("mat-select-panel ",t._getPanelTheme(),""),no("transform-origin",t._transformOrigin)("font-size",t._triggerFontSize,"px"),At("ngClass",t.panelClass)("@transformPanel",t.multiple?"showing-multiple":"showing"),Hr("id",t.id+"-panel")("aria-multiselectable",t.multiple)("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby())}}const bJ=[[["mat-select-trigger"]],"*"],xJ=["mat-select-trigger","*"],gW={transformPanelWrap:Qd("transformPanelWrap",[bl("* => void",_B("@transformPanel",[mB()],{optional:!0}))]),transformPanel:Qd("transformPanel",[yl("void",xa({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),yl("showing",xa({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),yl("showing-multiple",xa({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),bl("void => *",Vl("120ms cubic-bezier(0, 0, 0.2, 1)")),bl("* => void",Vl("100ms 25ms linear",xa({opacity:0})))])};let mW=0;const yW=new sn("mat-select-scroll-strategy"),DJ=new sn("MAT_SELECT_CONFIG"),MJ={provide:yW,deps:[rc],useFactory:function SJ(e){return()=>e.scrollStrategies.reposition()}};class TJ{constructor(n,t){this.source=n,this.value=t}}const EJ=Pv(AC(FA(UU(class{constructor(e,n,t,r,i){this._elementRef=e,this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=r,this.ngControl=i,this.stateChanges=new te}})))),AJ=new sn("MatSelectTrigger");let IJ=(()=>{class e extends EJ{constructor(t,r,i,s,d,p,v,_,C,S,k,H,ne,pe){super(d,s,v,_,S),this._viewportRuler=t,this._changeDetectorRef=r,this._ngZone=i,this._dir=p,this._parentFormField=C,this._liveAnnouncer=ne,this._defaultOptions=pe,this._panelOpen=!1,this._compareWith=(Me,Re)=>Me===Re,this._uid="mat-select-"+mW++,this._triggerAriaLabelledBy=null,this._destroy=new te,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+mW++,this._panelDoneAnimatingStream=new te,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=oC(()=>{const Me=this.options;return Me?Me.changes.pipe(_l(Me),ml(()=>Oa(...Me.map(Re=>Re.onSelectionChange)))):this._ngZone.onStable.pipe(go(1),ml(()=>this.optionSelectionChanges))}),this.openedChange=new En,this._openedStream=this.openedChange.pipe(Ki(Me=>Me),Ae(()=>{})),this._closedStream=this.openedChange.pipe(Ki(Me=>!Me),Ae(()=>{})),this.selectionChange=new En,this.valueChange=new En,this.ngControl&&(this.ngControl.valueAccessor=this),null!=pe?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=pe.typeaheadDebounceInterval),this._scrollStrategyFactory=H,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(k)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(Zc.required)??!1}set required(t){this._required=Br(t),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(t){this._multiple=Br(t)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(t){this._disableOptionCentering=Br(t)}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this._assignValue(t)&&this._onChange(t)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(t){this._typeaheadDebounceInterval=Du(t)}get id(){return this._id}set id(t){this._id=t||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new qA(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(MC(),zi(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(zi(this._destroy)).subscribe(t=>{t.added.forEach(r=>r.select()),t.removed.forEach(r=>r.deselect())}),this.options.changes.pipe(_l(null),zi(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const t=this._getTriggerAriaLabelledby(),r=this.ngControl;if(t!==this._triggerAriaLabelledBy){const i=this._elementRef.nativeElement;this._triggerAriaLabelledBy=t,t?i.setAttribute("aria-labelledby",t):i.removeAttribute("aria-labelledby")}r&&(this._previousControl!==r.control&&(void 0!==this._previousControl&&null!==r.disabled&&r.disabled!==this.disabled&&(this.disabled=r.disabled),this._previousControl=r.control),this.updateErrorState())}ngOnChanges(t){(t.disabled||t.userAriaDescribedBy)&&this.stateChanges.next(),t.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(t){this._assignValue(t)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const t=this._selectionModel.selected.map(r=>r.viewValue);return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))}_handleClosedKeydown(t){const r=t.keyCode,i=40===r||38===r||37===r||39===r,s=13===r||32===r,d=this._keyManager;if(!d.isTyping()&&s&&!Su(t)||(this.multiple||t.altKey)&&i)t.preventDefault(),this.open();else if(!this.multiple){const p=this.selected;d.onKeydown(t);const v=this.selected;v&&p!==v&&this._liveAnnouncer.announce(v.viewValue,1e4)}}_handleOpenKeydown(t){const r=this._keyManager,i=t.keyCode,s=40===i||38===i,d=r.isTyping();if(s&&t.altKey)t.preventDefault(),this.close();else if(d||13!==i&&32!==i||!r.activeItem||Su(t))if(!d&&this._multiple&&65===i&&t.ctrlKey){t.preventDefault();const p=this.options.some(v=>!v.disabled&&!v.selected);this.options.forEach(v=>{v.disabled||(p?v.select():v.deselect())})}else{const p=r.activeItemIndex;r.onKeydown(t),this._multiple&&s&&t.shiftKey&&r.activeItem&&r.activeItemIndex!==p&&r.activeItem._selectViaInteraction()}else t.preventDefault(),r.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(go(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(t){if(this._selectionModel.selected.forEach(r=>r.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&t)Array.isArray(t),t.forEach(r=>this._selectOptionByValue(r)),this._sortValues();else{const r=this._selectOptionByValue(t);r?this._keyManager.updateActiveItem(r):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(t){const r=this.options.find(i=>{if(this._selectionModel.isSelected(i))return!1;try{return null!=i.value&&this._compareWith(i.value,t)}catch{return!1}});return r&&this._selectionModel.select(r),r}_assignValue(t){return!!(t!==this._value||this._multiple&&Array.isArray(t))&&(this.options&&this._setSelectionByValue(t),this._value=t,!0)}_initKeyManager(){this._keyManager=new FX(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(zi(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(zi(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const t=Oa(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(zi(t)).subscribe(r=>{this._onSelect(r.source,r.isUserInput),r.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),Oa(...this.options.map(r=>r._stateChanges)).pipe(zi(t)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(t,r){const i=this._selectionModel.isSelected(t);null!=t.value||this._multiple?(i!==t.selected&&(t.selected?this._selectionModel.select(t):this._selectionModel.deselect(t)),r&&this._keyManager.setActiveItem(t),this.multiple&&(this._sortValues(),r&&this.focus())):(t.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(t.value)),i!==this._selectionModel.isSelected(t)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const t=this.options.toArray();this._selectionModel.sort((r,i)=>this.sortComparator?this.sortComparator(r,i,t):t.indexOf(r)-t.indexOf(i)),this.stateChanges.next()}}_propagateChanges(t){let r=null;r=this.multiple?this.selected.map(i=>i.value):this.selected?this.selected.value:t,this._value=r,this.valueChange.emit(r),this._onChange(r),this.selectionChange.emit(this._getChangeEvent(r)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(t){this._elementRef.nativeElement.focus(t)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const t=this._parentFormField?.getLabelId();return this.ariaLabelledby?(t?t+" ":"")+this.ariaLabelledby:t}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const t=this._parentFormField?.getLabelId();let r=(t?t+" ":"")+this._valueId;return this.ariaLabelledby&&(r+=" "+this.ariaLabelledby),r}_panelDoneAnimating(t){this.openedChange.emit(t)}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return e.\u0275fac=function(t){return new(t||e)(Xe(RC),Xe(da),Xe(rr),Xe(oB),Xe(Nr),Xe($c,8),Xe(aC,8),Xe(ty,8),Xe(KA,8),Xe(Yc,10),Ls("tabindex"),Xe(yW),Xe(n$),Xe(DJ,8))},e.\u0275dir=Sn({type:e,viewQuery:function(t,r){if(1&t&&(Ai(fJ,5),Ai(pJ,5),Ai(pG,5)),2&t){let i;ur(i=cr())&&(r.trigger=i.first),ur(i=cr())&&(r.panel=i.first),ur(i=cr())&&(r._overlayDir=i.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[Xn,Xi]}),e})(),bW=(()=>{class e extends IJ{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(t,r,i){const s=this._getItemHeight();return Math.min(Math.max(0,s*t-r+s/2),i)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(zi(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(go(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(t){const r=KU(t,this.options,this.optionGroups),i=this._getItemHeight();this.panel.nativeElement.scrollTop=0===t&&1===r?0:function D$(e,n,t,r){return e<t?e:e+n>t+r?Math.max(0,e-r+n):t}((t+r)*i,i,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(t){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(t)}_getChangeEvent(t){return new TJ(this,t)}_calculateOverlayOffsetX(){const t=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),r=this._viewportRuler.getViewportSize(),i=this._isRtl(),s=this.multiple?56:32;let d;if(this.multiple)d=40;else if(this.disableOptionCentering)d=16;else{let _=this._selectionModel.selected[0]||this.options.first;d=_&&_.group?32:16}i||(d*=-1);const p=0-(t.left+d-(i?s:0)),v=t.right+d-r.width+(i?0:s);p>0?d+=p+8:v>0&&(d-=v+8),this._overlayDir.offsetX=Math.round(d),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(t,r,i){const s=this._getItemHeight(),d=(s-this._triggerRect.height)/2,p=Math.floor(256/s);let v;return this.disableOptionCentering?0:(v=0===this._scrollTop?t*s:this._scrollTop===i?(t-(this._getItemCount()-p))*s+(s-(this._getItemCount()*s-256)%s):r-s/2,Math.round(-1*v-d))}_checkOverlayWithinViewport(t){const r=this._getItemHeight(),i=this._viewportRuler.getViewportSize(),s=this._triggerRect.top-8,d=i.height-this._triggerRect.bottom-8,p=Math.abs(this._offsetY),_=Math.min(this._getItemCount()*r,256)-p-this._triggerRect.height;_>d?this._adjustPanelUp(_,d):p>s?this._adjustPanelDown(p,s,t):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(t,r){const i=Math.round(t-r);this._scrollTop-=i,this._offsetY-=i,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(t,r,i){const s=Math.round(t-r);if(this._scrollTop+=s,this._offsetY+=s,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=i)return this._scrollTop=i,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const t=this._getItemHeight(),r=this._getItemCount(),i=Math.min(r*t,256),d=r*t-i;let p;p=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),p+=KU(p,this.options,this.optionGroups);const v=i/2;this._scrollTop=this._calculateOverlayScroll(p,v,d),this._offsetY=this._calculateOverlayOffsetY(p,v,d),this._checkOverlayWithinViewport(d)}_getOriginBasedOnOption(){const t=this._getItemHeight(),r=(t-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-r+t/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=ta(e)))(r||e)}}(),e.\u0275cmp=qn({type:e,selectors:[["mat-select"]],contentQueries:function(t,r,i){if(1&t&&(Li(i,AJ,5),Li(i,uB,5),Li(i,$U,5)),2&t){let s;ur(s=cr())&&(r.customTrigger=s.first),ur(s=cr())&&(r.options=s),ur(s=cr())&&(r.optionGroups=s)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:19,hostBindings:function(t,r){1&t&&Yt("keydown",function(s){return r._handleKeydown(s)})("focus",function(){return r._onFocus()})("blur",function(){return r._onBlur()}),2&t&&(Hr("id",r.id)("tabindex",r.tabIndex)("aria-controls",r.panelOpen?r.id+"-panel":null)("aria-expanded",r.panelOpen)("aria-label",r.ariaLabel||null)("aria-required",r.required.toString())("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-activedescendant",r._getAriaActiveDescendant()),bi("mat-select-disabled",r.disabled)("mat-select-invalid",r.errorState)("mat-select-required",r.required)("mat-select-empty",r.empty)("mat-select-multiple",r.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[Kr([{provide:$A,useExisting:e},{provide:XU,useExisting:e}]),Xn],ngContentSelectors:xJ,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(t,r){if(1&t&&(Ui(bJ),st(0,"div",0,1),Yt("click",function(){return r.toggle()}),st(3,"div",2),nr(4,vJ,2,1,"span",3),nr(5,_J,3,2,"span",4),dt(),st(6,"div",5),Rn(7,"div",6),dt()(),nr(8,yJ,4,14,"ng-template",7),Yt("backdropClick",function(){return r.close()})("attach",function(){return r._onAttached()})("detach",function(){return r.close()})),2&t){const i=pi(1);Hr("aria-owns",r.panelOpen?r.id+"-panel":null),Et(3),At("ngSwitch",r.empty),Hr("id",r._valueId),Et(1),At("ngSwitchCase",!0),Et(1),At("ngSwitchCase",!1),Et(3),At("cdkConnectedOverlayPanelClass",r._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",r._scrollStrategy)("cdkConnectedOverlayOrigin",i)("cdkConnectedOverlayOpen",r.panelOpen)("cdkConnectedOverlayPositions",r._positions)("cdkConnectedOverlayMinWidth",null==r._triggerRect?null:r._triggerRect.width)("cdkConnectedOverlayOffsetY",r._offsetY)}},dependencies:[Wd,Wc,_v,LE,pG,fG],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[gW.transformPanelWrap,gW.transformPanel]},changeDetection:0}),e})(),PJ=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({providers:[MJ],imports:[kl,pB,QU,oi,LC,QA,QU,oi]}),e})();function xW(e,n,t,r,i){var s=t-e,d=r-n,p=1;s<0&&(p=-1,s=-s);var v=2*s-d,_=e;for(let C=n;C<r;C++)i.push({x:_,y:C}),v>0?(_+=p,v+=2*(s-d)):v+=2*s}function CW(e,n,t,r,i){var s=t-e,d=r-n,p=1;d<0&&(p=-1,d=-d);var v=2*d-s,_=n;for(let C=e;C<t;C++)i.push({x:C,y:_}),v>0?(_+=p,v+=2*(d-s)):v+=2*d}const OJ=["input"],kJ=function(e){return{enterDuration:e}},NJ=["*"],FJ=new sn("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let BJ=0;const VJ={provide:gs,useExisting:Wr(()=>VB),multi:!0};class zJ{constructor(n,t){this.source=n,this.checked=t}}const HJ=AC(ff(Pv(FA(class{constructor(e){this._elementRef=e}}))));let UJ=(()=>{class e extends HJ{constructor(t,r,i,s,d,p,v){super(t),this._focusMonitor=r,this._changeDetectorRef=i,this.defaults=d,this._onChange=_=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new En,this.toggleChange=new En,this.tabIndex=parseInt(s)||0,this.color=this.defaultColor=d.color||"accent",this._noopAnimations="NoopAnimations"===p,this.id=this._uniqueId=`${v}${++BJ}`}get required(){return this._required}set required(t){this._required=Br(t)}get checked(){return this._checked}set checked(t){this._checked=Br(t),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?this._focused=!0:t||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return e.\u0275fac=function(t){Xu()},e.\u0275dir=Sn({type:e,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[Xn]}),e})(),VB=(()=>{class e extends UJ{constructor(t,r,i,s,d,p){super(t,r,i,s,d,p,"mat-slide-toggle-")}_createChangeEvent(t){return new zJ(this,t)}_onChangeEvent(t){t.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(t){t.stopPropagation()}focus(t,r){r?this._focusMonitor.focusVia(this._inputElement,r,t):this._inputElement.nativeElement.focus(t)}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(Xe(Nr),Xe(nc),Xe(da),Ls("tabindex"),Xe(FJ),Xe(fs,8))},e.\u0275cmp=qn({type:e,selectors:[["mat-slide-toggle"]],viewQuery:function(t,r){if(1&t&&Ai(OJ,5),2&t){let i;ur(i=cr())&&(r._inputElement=i.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:13,hostBindings:function(t,r){2&t&&(mu("id",r.id),Hr("tabindex",null)("aria-label",null)("aria-labelledby",null)("name",null),bi("mat-checked",r.checked)("mat-disabled",r.disabled)("mat-slide-toggle-label-before","before"==r.labelPosition)("_mat-animation-noopable",r._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[Kr([VJ]),Xn],ngContentSelectors:NJ,decls:14,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(t,r){if(1&t&&(Ui(),st(0,"label",0,1)(2,"span",2)(3,"input",3,4),Yt("change",function(s){return r._onChangeEvent(s)})("click",function(s){return r._onInputClick(s)}),dt(),st(5,"span",5),Rn(6,"span",6),st(7,"span",7),Rn(8,"span",8),dt()()(),st(9,"span",9,10),Yt("cdkObserveContent",function(){return r._onLabelTextChange()}),st(11,"span",11),Qt(12,"\xa0"),dt(),jr(13),dt()()),2&t){const i=pi(1),s=pi(10);Hr("for",r.inputId),Et(2),bi("mat-slide-toggle-bar-no-side-margin",!s.textContent||!s.textContent.trim()),Et(1),At("id",r.inputId)("required",r.required)("tabIndex",r.tabIndex)("checked",r.checked)("disabled",r.disabled),Hr("name",r.name)("aria-checked",r.checked)("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby)("aria-describedby",r.ariaDescribedby),Et(4),At("matRippleTrigger",i)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",Bc(18,kJ,r._noopAnimations?0:150))}},dependencies:[Rv,MU],styles:['.mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%;display:block}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.mat-slide-toggle-input:focus~.mat-slide-toggle-thumb-container .mat-focus-indicator::before{content:""}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}'],encapsulation:2,changeDetection:0}),e})(),wW=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({}),e})(),jJ=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({imports:[wW,gy,oi,iB,wW,oi]}),e})();const ZJ=["canvas"],YJ=["canvasUI"];function XJ(e,n){if(1&e&&(st(0,"p",10),Qt(1),dt()),2&e){const t=zn();Et(1),gu(t.title)}}function $J(e,n){if(1&e){const t=na();st(0,"span",11)(1,"mat-slide-toggle",12),Yt("ngModelChange",function(i){return Tr(t),Er(zn().isBWChecked=i)})("change",function(){return Tr(t),Er(zn().BWToggle())}),Qt(2,"B&W"),dt()()}if(2&e){const t=zn();Et(1),At("ngModel",t.isBWChecked)}}function KJ(e,n){if(1&e){const t=na();st(0,"span",13)(1,"mat-slide-toggle",12),Yt("ngModelChange",function(i){return Tr(t),Er(zn().profile=i)})("change",function(){return Tr(t),Er(zn().updateCanvasUI())}),Qt(2,"profile"),dt()()}if(2&e){const t=zn();Et(1),At("ngModel",t.profile)}}function QJ(e,n){if(1&e&&(st(0,"div",14,15),Rn(2,"div",16),st(3,"mat-icon"),Qt(4,"brush"),dt()()),2&e){const t=zn();no("top",t.cursorPosition.y,"px")("left",t.cursorPosition.x,"px")("width",t.getCursorTransform(),"px"),Et(2),no("border-color",t.drawColor)}}function qJ(e,n){if(1&e){const t=na();Bi(0),st(1,"div",17),Yt("mousedown",function(i){return Tr(t),Er(zn().startHandleDrag(i,1))})("touchstart",function(i){return Tr(t),Er(zn().startHandleDrag(i,1))})("touchstop",function(){return Tr(t),Er(zn().stopHandleDrag())})("mouseup",function(){return Tr(t),Er(zn().stopHandleDrag())}),st(2,"p",18),Qt(3),dt()(),st(4,"div",19),Yt("mousedown",function(i){return Tr(t),Er(zn().startHandleDrag(i,2))})("touchstart",function(i){return Tr(t),Er(zn().startHandleDrag(i,2))})("mouseup",function(){return Tr(t),Er(zn().stopHandleDrag())})("touchstop",function(){return Tr(t),Er(zn().stopHandleDrag())}),st(5,"p",18),Qt(6),dt()(),Vi()}if(2&e){const t=zn();Et(1),no("top",t.profileHandle1Pos.y,"px")("left",t.profileHandle1Pos.x,"px"),Et(2),Ym("(",t.getHandlePos(1).x.toFixed(0),",",t.getHandlePos(1).y.toFixed(0),")"),Et(1),no("top",t.profileHandle2Pos.y,"px")("left",t.profileHandle2Pos.x,"px"),Et(2),Ym("(",t.getHandlePos(2).x.toFixed(0),",",t.getHandlePos(2).y.toFixed(0),")")}}const JJ=function(e){return{BWFilter:e}};let Sy=(()=>{class e{constructor(){this.drawingEnded=new En,this.width=256,this.height=this.width,this.brushRadius=10,this.drawColor="white",this.drawable=!0,this.title="",this.BWOption=!1,this.OnlyBW=!1,this.profileChanged=new En,this.profileOption=!1,this.BWSet=new En,this.profile=!1,this.isBWChecked=!1,this.cursorPosition={x:0,y:0},this.startDrawing=!1,this.profileHandle1Drag=!1,this.profileHandle2Drag=!1,this.profileHandle1Pos={x:50,y:100},this.profileHandle2Pos={x:150,y:100}}ngOnInit(){const t=this.canvas.nativeElement;this.ctx=t.getContext("2d",{alpha:!1}),this.ctx.imageSmoothingEnabled=!1,this.height=this.width,t.width=this.width,t.height=this.height,this.ctx.canvas.width=this.width,this.ctx.canvas.height=this.height;const r=this.canvasUI.nativeElement;this.ctxUI=r.getContext("2d",{alpha:!0}),r.width=this.width,r.height=this.height,this.drawable&&this.captureEvents(t),this.ctx.fillRect(0,0,this.width,this.height)}BWToggle(){this.BWSet.emit()}ngAfterViewInit(){this.updateCanvasUI()}setCanvasDimensions(t,r){this.height=r,this.width=t,this.ctx.canvas.width=t,this.ctx.canvas.height=r}getArray(){return this.ctx.getImageData(0,0,this.width,this.height).data}getCanvas(){return this.ctx.canvas}getCtx(){return this.ctx}clearCanvas(){this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.width,this.height),this.drawingEnded.emit()}drawImage(t){this.ctx.drawImage(t,0,0,this.width,this.height),this.profile&&this.updateCanvasUI(),this.drawingEnded.emit()}drawMat(t){cv.imshow(this.getCanvas(),t),this.updateCanvasUI()}drawMatWithoutEvent(t){cv.imshow(this.getCanvas(),t)}drawArray(t,r=this.width,i=this.height,s=0,d=0){var p=new ImageData(t,r,i);this.ctx.putImageData(p,s,d),this.profile&&this.updateCanvasUI(),this.drawingEnded.emit()}drawCroppedArray(t,r=this.width,i=this.height,s=0,d=0,p=0,v=0,_=r,C=i){var S=new ImageData(t,r,i);this.ctx.putImageData(S,s,d,p,v,_,C),this.profile&&this.updateCanvasUI(),this.drawingEnded.emit()}draw(t,r=null){this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y),r?this.ctx.lineTo(r.x,r.y):this.ctx.lineTo(t.x,t.y),this.ctx.lineWidth=this.brushRadius,this.ctx.strokeStyle=this.drawColor,this.ctx.lineCap="round",this.ctx.stroke()}draw_callback(){this.drawingEnded.emit(!0)}captureEvents(t){const r=Bl(t,"touchstart"),i=Bl(t,"mousedown"),s=Bl(t,"mousemove"),d=Oa(r,i),v=Oa(Bl(t,"touchmove"),s),_=Bl(t,"touchend"),C=Bl(t,"mouseup"),k=Oa(_,Bl(t,"mouseleave"),C);let H=!1;v.subscribe({next:ne=>{const pe=t.getBoundingClientRect();var Me=this.getClientPosition(ne);this.cursorPosition.x=Me.clientX-pe.left,this.cursorPosition.y=Me.clientY-pe.top}}),d.pipe(ml(ne=>{const pe=t.getBoundingClientRect(),Me=this.getCoord(ne,pe);return H=!0,this.initialPos=Me,this.startDrawing=!0,this.draw(Me),this.draw_callback(),v.pipe(zi(k),function RJ(){return ge((e,n)=>{let t,r=!1;e.subscribe(we(n,i=>{const s=t;t=i,r&&n.next([s,i]),r=!0}))})}())})).subscribe({next:ne=>{const pe=t.getBoundingClientRect();var Me=this.getCoord(ne[0],pe);const Re=this.getCoord(ne[1],pe);this.startDrawing&&(this.startDrawing=!1,Me=this.initialPos),this.draw(Me,Re),this.draw_callback()}}),k.subscribe(ne=>{H&&(this.updateCanvasUI(),this.draw_callback()),H=!1})}getClientPosition(t){return t.preventDefault(),"touches"in t?{clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}:{clientX:t.clientX,clientY:t.clientY}}getCoord(t,r){var i=this.getClientPosition(t);return{x:this.width/r.width*(i.clientX-r.left),y:this.height/r.height*(i.clientY-r.top)}}getCursorTransform(){return this.canvas.nativeElement.getBoundingClientRect().width/this.width*this.brushRadius}startHandleDrag(t,r){1==r?(this.profileHandle1Drag=!0,this.profileHandle2Drag=!1):(this.profileHandle1Drag=!1,this.profileHandle2Drag=!0)}stopHandleDrag(){this.profileHandle1Drag=!1,this.profileHandle2Drag=!1}updateHandleDragPos(t){const i=this.ctxUI.canvas.getBoundingClientRect();var s=this.getClientPosition(t);this.profileHandle1Drag?(this.profileHandle1Pos.x=s.clientX-i.left,this.profileHandle1Pos.y=s.clientY-i.top,this.updateCanvasUI()):this.profileHandle2Drag&&(this.profileHandle2Pos.x=s.clientX-i.left,this.profileHandle2Pos.y=s.clientY-i.top,this.updateCanvasUI())}updateCanvasUI(){if(this.profile){this.ctxUI.beginPath();let t=this.scaleCoordinates(this.profileHandle1Pos),r=this.scaleCoordinates(this.profileHandle2Pos);this.ctxUI.moveTo(t.x,t.y),this.ctxUI.lineTo(r.x,r.y),this.ctxUI.lineWidth=1,this.ctxUI.strokeStyle="blue",this.ctxUI.globalCompositeOperation="copy",this.ctxUI.setLineDash([2,4]),this.ctxUI.stroke(),this.updateProfile(t,r),this.profileChanged.emit()}}scaleCoordinates(t){const i=this.ctxUI.canvas.getBoundingClientRect();return{x:t.x*(this.width/i.width),y:t.y*(this.height/i.height)}}getHandlePos(t){return this.scaleCoordinates(1==t?this.profileHandle1Pos:this.profileHandle2Pos)}getProfile(){return this.profileArray}updateProfile(t,r){let i=function LJ(e,n){let t=new Array;var r=Math.round(e.x),i=Math.round(e.y),s=Math.round(n.x),d=Math.round(n.y);return Math.abs(d-i)<Math.abs(s-r)?r>s?CW(s,d,r,i,t):CW(r,i,s,d,t):i>d?xW(s,d,r,i,t):xW(r,i,s,d,t),t}(t,r);this.profileArray=new Array;let s=this.getArray();i.forEach(d=>{this.profileArray.push(s[4*(this.width*d.y+d.x)])})}isBW(){return this.isBWChecked}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=qn({type:e,selectors:[["app-draw-canvas"]],viewQuery:function(t,r){if(1&t&&(Ai(ZJ,7),Ai(YJ,7)),2&t){let i;ur(i=cr())&&(r.canvas=i.first),ur(i=cr())&&(r.canvasUI=i.first)}},inputs:{width:"width",brushRadius:"brushRadius",drawColor:"drawColor",drawable:"drawable",title:"title",BWOption:"BWOption",OnlyBW:"OnlyBW",profileOption:"profileOption"},outputs:{drawingEnded:"drawingEnded",profileChanged:"profileChanged",BWSet:"BWSet"},decls:10,vars:12,consts:[[1,"canvas-container",3,"mousemove"],["class","title",4,"ngIf"],["class","BW-toggle toggle",4,"ngIf"],["class","Profile-toggle toggle",4,"ngIf"],["class","cursor",3,"top","left","width",4,"ngIf"],["id","canvasVisu",3,"ngClass"],["canvas",""],["id","canvasUI"],["canvasUI",""],[4,"ngIf"],[1,"title"],[1,"BW-toggle","toggle"],["color","primary",3,"ngModel","ngModelChange","change"],[1,"Profile-toggle","toggle"],[1,"cursor"],["cursor",""],[1,"cursor-radius"],[1,"handle",3,"mousedown","touchstart","touchstop","mouseup"],[1,"noselect"],[1,"handle",3,"mousedown","touchstart","mouseup","touchstop"]],template:function(t,r){1&t&&(st(0,"div",0),Yt("mousemove",function(s){return r.updateHandleDragPos(s)}),nr(1,XJ,2,1,"p",1),nr(2,$J,3,1,"span",2),nr(3,KJ,3,1,"span",3),nr(4,QJ,5,8,"div",4),Rn(5,"canvas",5,6)(7,"canvas",7,8),nr(9,qJ,7,12,"ng-container",9),dt()),2&t&&(no("cursor",r.drawable?"none":"default"),Et(1),At("ngIf",r.title),Et(1),At("ngIf",r.BWOption),Et(1),At("ngIf",r.profileOption),Et(1),At("ngIf",r.drawable),Et(1),At("ngClass",Bc(10,JJ,r.isBWChecked||r.OnlyBW)),Et(2),no("opacity",r.profile?100:0,"%"),Et(2),At("ngIf",r.profile))},dependencies:[Wd,zs,sf,uf,VB,qd],styles:[".canvas-container[_ngcontent-%COMP%]{overflow:hidden;position:relative;width:100%;aspect-ratio:1;cursor:none;box-shadow:#0000003d 0 3px 8px}.toggle[_ngcontent-%COMP%]{position:absolute;color:#fff;z-index:10;background-color:#7f7f7f80;border-radius:3px;margin:5px;padding:0 5px}.BW-toggle[_ngcontent-%COMP%]{top:0;right:0}.Profile-toggle[_ngcontent-%COMP%]{bottom:0;right:0}.title[_ngcontent-%COMP%]{position:absolute;top:0;left:0;z-index:10;pointer-events:none;margin:5px;background-color:#7f7f7f80;color:#fff;padding:0 5px;border-radius:3px}.canvas-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{width:100%;aspect-ratio:1}.canvas-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:absolute;height:inherit}.cursor[_ngcontent-%COMP%]{z-index:5;position:absolute;aspect-ratio:1;transform:translate(-50%,-50%);pointer-events:none;transform-origin:top left}.cursor[_ngcontent-%COMP%] > .cursor-radius[_ngcontent-%COMP%]{position:relative;width:inherit;aspect-ratio:1;border-radius:50%;border-style:dashed;border-width:1px;pointer-events:none;transform-origin:center;animation:rotation 20s infinite linear;background:radial-gradient(circle,white 0%,white 5%,rgba(100,100,100,.5) 3%,rgba(100,100,100,.5) 100%)}.cursor[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translateY(-75%)}@keyframes rotation{0%{transform:rotate(0)}to{transform:rotate(359deg)}}.BWFilter[_ngcontent-%COMP%]{filter:grayscale(1)}.handle[_ngcontent-%COMP%]{--width: 24px;width:var(--width);aspect-ratio:1;border-radius:100%;position:absolute;cursor:move;border:solid rgba(255,255,255,.25) 1px;transform:translate(-50%,-50%);font-size:smaller;transform-origin:top left;z-index:21;display:flex;justify-content:center;text-align:center;background:radial-gradient(circle at calc(var(--width) / 2) calc(var(--width) / 2),#5cabff,#000);box-shadow:#0000004d 0 19px 38px,#00000038 0 15px 12px}.handle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:relative;top:-24px}#canvasUI[_ngcontent-%COMP%]{pointer-events:none}.handle[_ngcontent-%COMP%]:hover{border:dashed white 1px}"]}),e})();const eee=["sliderWrapper"],Tu=xC({passive:!1}),aee={provide:gs,useExisting:Wr(()=>SW),multi:!0};class oee{}const see=AC(ff(FA(class{constructor(e){this._elementRef=e}}),"accent"));let SW=(()=>{class e extends see{constructor(t,r,i,s,d,p,v,_){super(t),this._focusMonitor=r,this._changeDetectorRef=i,this._dir=s,this._ngZone=p,this._animationMode=_,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new En,this.input=new En,this.valueChange=new En,this.onTouched=()=>{},this._percent=0,this._isSliding=null,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=()=>{},this._dirChangeSubscription=ve.EMPTY,this._pointerDown=C=>{this.disabled||this._isSliding||!zC(C)&&0!==C.button||this._ngZone.run(()=>{this._touchId=zC(C)?function lee(e,n){for(let t=0;t<e.touches.length;t++){const r=e.touches[t].target;if(n===r||n.contains(r))return e.touches[t].identifier}}(C,this._elementRef.nativeElement):void 0;const S=MW(C,this._touchId);if(S){const k=this.value;this._isSliding="pointer",this._lastPointerEvent=C,this._focusHostElement(),this._onMouseenter(),this._bindGlobalEvents(C),this._focusHostElement(),this._updateValueFromPosition(S),this._valueOnSlideStart=k,C.cancelable&&C.preventDefault(),k!=this.value&&this._emitInputEvent()}})},this._pointerMove=C=>{if("pointer"===this._isSliding){const S=MW(C,this._touchId);if(S){C.cancelable&&C.preventDefault();const k=this.value;this._lastPointerEvent=C,this._updateValueFromPosition(S),k!=this.value&&this._emitInputEvent()}}},this._pointerUp=C=>{"pointer"===this._isSliding&&(!zC(C)||"number"!=typeof this._touchId||zB(C.changedTouches,this._touchId))&&(C.cancelable&&C.preventDefault(),this._removeGlobalEvents(),this._isSliding=null,this._touchId=void 0,this._valueOnSlideStart!=this.value&&!this.disabled&&this._emitChangeEvent(),this._valueOnSlideStart=this._lastPointerEvent=null)},this._windowBlur=()=>{this._lastPointerEvent&&this._pointerUp(this._lastPointerEvent)},this._document=v,this.tabIndex=parseInt(d)||0,p.runOutsideAngular(()=>{const C=t.nativeElement;C.addEventListener("mousedown",this._pointerDown,Tu),C.addEventListener("touchstart",this._pointerDown,Tu)})}get invert(){return this._invert}set invert(t){this._invert=Br(t)}get max(){return this._max}set max(t){this._max=Du(t,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(t){this._min=Du(t,this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(t){this._step=Du(t,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(t){this._thumbLabel=Br(t)}get tickInterval(){return this._tickInterval}set tickInterval(t){this._tickInterval="auto"===t?"auto":"number"==typeof t||"string"==typeof t?Du(t,this._tickInterval):0}get value(){return null===this._value&&(this.value=this._min),this._value}set value(t){if(t!==this._value){let r=Du(t,0);this._roundToDecimal&&r!==this.min&&r!==this.max&&(r=parseFloat(r.toFixed(this._roundToDecimal))),this._value=r,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(t){this._vertical=Br(t)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(t){this._focusHostElement(t)}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}_shouldInvertAxis(){return this.vertical?!this.invert:this.invert}_isMinValue(){return 0===this.percent}_getThumbGap(){return this.disabled?7:this._isMinValue()&&!this.thumbLabel?this._isActive?10:7:0}_getTrackBackgroundStyles(){const r=this.vertical?`1, ${1-this.percent}, 1`:1-this.percent+", 1, 1";return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"-":""}${this._getThumbGap()}px) scale3d(${r})`}}_getTrackFillStyles(){const t=this.percent,i=this.vertical?`1, ${t}, 1`:`${t}, 1, 1`;return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"":"-"}${this._getThumbGap()}px) scale3d(${i})`,display:0===t?"none":""}}_getTicksContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"-":""}${this._tickIntervalPercent/2*100}%)`}}_getTicksStyles(){let t=100*this._tickIntervalPercent,p={backgroundSize:this.vertical?`2px ${t}%`:`${t}% 2px`,transform:`translateZ(0) translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"":"-"}${t/2}%)${this.vertical||"rtl"!=this._getDirection()?"":" rotate(180deg)"}`};if(this._isMinValue()&&this._getThumbGap()){const v=this._shouldInvertAxis();let _;_=this.vertical?v?"Bottom":"Top":v?"Right":"Left",p[`padding${_}`]=`${this._getThumbGap()}px`}return p}_getThumbContainerStyles(){const t=this._shouldInvertAxis();return{transform:`translate${this.vertical?"Y":"X"}(-${100*(("rtl"!=this._getDirection()||this.vertical?t:!t)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){const t=this._shouldInvertAxis();return"rtl"!=this._getDirection()||this.vertical?t:!t}_getDirection(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{this._isActive=!!t&&"keyboard"!==t,this._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){const t=this._elementRef.nativeElement;t.removeEventListener("mousedown",this._pointerDown,Tu),t.removeEventListener("touchstart",this._pointerDown,Tu),this._lastPointerEvent=null,this._removeGlobalEvents(),this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(t){if(this.disabled||Su(t)||this._isSliding&&"keyboard"!==this._isSliding)return;const r=this.value;switch(t.keyCode){case 33:this._increment(10);break;case 34:this._increment(-10);break;case 35:this.value=this.max;break;case 36:this.value=this.min;break;case 37:this._increment("rtl"==this._getDirection()?1:-1);break;case 38:this._increment(1);break;case 39:this._increment("rtl"==this._getDirection()?-1:1);break;case 40:this._increment(-1);break;default:return}r!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding="keyboard",t.preventDefault()}_onKeyup(){"keyboard"===this._isSliding&&(this._isSliding=null)}_getWindow(){return this._document.defaultView||window}_bindGlobalEvents(t){const r=this._document,i=zC(t),d=i?"touchend":"mouseup";r.addEventListener(i?"touchmove":"mousemove",this._pointerMove,Tu),r.addEventListener(d,this._pointerUp,Tu),i&&r.addEventListener("touchcancel",this._pointerUp,Tu);const p=this._getWindow();typeof p<"u"&&p&&p.addEventListener("blur",this._windowBlur)}_removeGlobalEvents(){const t=this._document;t.removeEventListener("mousemove",this._pointerMove,Tu),t.removeEventListener("mouseup",this._pointerUp,Tu),t.removeEventListener("touchmove",this._pointerMove,Tu),t.removeEventListener("touchend",this._pointerUp,Tu),t.removeEventListener("touchcancel",this._pointerUp,Tu);const r=this._getWindow();typeof r<"u"&&r&&r.removeEventListener("blur",this._windowBlur)}_increment(t){const r=this._clamp(this.value||0,this.min,this.max);this.value=this._clamp(r+this.step*t,this.min,this.max)}_updateValueFromPosition(t){if(!this._sliderDimensions)return;let d=this._clamp(((this.vertical?t.y:t.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(d=1-d),0===d)this.value=this.min;else if(1===d)this.value=this.max;else{const p=this._calculateValue(d),v=Math.round((p-this.min)/this.step)*this.step+this.min;this.value=this._clamp(v,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(!this.tickInterval||!this._sliderDimensions)return;let t;if("auto"==this.tickInterval){let r=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width;t=Math.ceil(30/(r*this.step/(this.max-this.min)))*this.step/r}else t=this.tickInterval*this.step/(this.max-this.min);this._tickIntervalPercent=DW(t)?t:0}_createChangeEvent(t=this.value){let r=new oee;return r.source=this,r.value=t,r}_calculatePercentage(t){const r=((t||0)-this.min)/(this.max-this.min);return DW(r)?r:0}_calculateValue(t){return this.min+t*(this.max-this.min)}_clamp(t,r=0,i=1){return Math.max(r,Math.min(t,i))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(t){this._elementRef.nativeElement.focus(t)}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(t){this.value=t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}}return e.\u0275fac=function(t){return new(t||e)(Xe(Nr),Xe(nc),Xe(da),Xe($c,8),Ls("tabindex"),Xe(rr),Xe(Rr),Xe(fs,8))},e.\u0275cmp=qn({type:e,selectors:[["mat-slider"]],viewQuery:function(t,r){if(1&t&&Ai(eee,5),2&t){let i;ur(i=cr())&&(r._sliderWrapper=i.first)}},hostAttrs:["role","slider",1,"mat-slider","mat-focus-indicator"],hostVars:29,hostBindings:function(t,r){1&t&&Yt("focus",function(){return r._onFocus()})("blur",function(){return r._onBlur()})("keydown",function(s){return r._onKeydown(s)})("keyup",function(){return r._onKeyup()})("mouseenter",function(){return r._onMouseenter()})("selectstart",function(s){return s.preventDefault()}),2&t&&(mu("tabIndex",r.tabIndex),Hr("aria-disabled",r.disabled)("aria-valuemax",r.max)("aria-valuemin",r.min)("aria-valuenow",r.value)("aria-valuetext",r.valueText??r.displayValue)("aria-orientation",r.vertical?"vertical":"horizontal"),bi("mat-slider-disabled",r.disabled)("mat-slider-has-ticks",r.tickInterval)("mat-slider-horizontal",!r.vertical)("mat-slider-axis-inverted",r._shouldInvertAxis())("mat-slider-invert-mouse-coords",r._shouldInvertMouseCoords())("mat-slider-sliding",r._isSliding)("mat-slider-thumb-label-showing",r.thumbLabel)("mat-slider-vertical",r.vertical)("mat-slider-min-value",r._isMinValue())("mat-slider-hide-last-tick",r.disabled||r._isMinValue()&&r._getThumbGap()&&r._shouldInvertAxis())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{disabled:"disabled",color:"color",tabIndex:"tabIndex",invert:"invert",max:"max",min:"min",step:"step",thumbLabel:"thumbLabel",tickInterval:"tickInterval",value:"value",displayWith:"displayWith",valueText:"valueText",vertical:"vertical"},outputs:{change:"change",input:"input",valueChange:"valueChange"},exportAs:["matSlider"],features:[Kr([aee]),Xn],decls:13,vars:6,consts:[[1,"mat-slider-wrapper"],["sliderWrapper",""],[1,"mat-slider-track-wrapper"],[1,"mat-slider-track-background",3,"ngStyle"],[1,"mat-slider-track-fill",3,"ngStyle"],[1,"mat-slider-ticks-container",3,"ngStyle"],[1,"mat-slider-ticks",3,"ngStyle"],[1,"mat-slider-thumb-container",3,"ngStyle"],[1,"mat-slider-focus-ring"],[1,"mat-slider-thumb"],[1,"mat-slider-thumb-label"],[1,"mat-slider-thumb-label-text"]],template:function(t,r){1&t&&(st(0,"div",0,1)(2,"div",2),Rn(3,"div",3)(4,"div",4),dt(),st(5,"div",5),Rn(6,"div",6),dt(),st(7,"div",7),Rn(8,"div",8)(9,"div",9),st(10,"div",10)(11,"span",11),Qt(12),dt()()()()),2&t&&(Et(3),At("ngStyle",r._getTrackBackgroundStyles()),Et(1),At("ngStyle",r._getTrackFillStyles()),Et(1),At("ngStyle",r._getTicksContainerStyles()),Et(1),At("ngStyle",r._getTicksStyles()),Et(1),At("ngStyle",r._getThumbContainerStyles()),Et(5),gu(r.displayValue))},dependencies:[H1],styles:['.mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:none;vertical-align:middle}.mat-slider:not(.mat-slider-disabled):active,.mat-slider.mat-slider-sliding:not(.mat-slider-disabled){cursor:grabbing}.mat-slider-wrapper{-webkit-print-color-adjust:exact;color-adjust:exact;position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{-webkit-background-clip:content-box;background-clip:content-box;background-repeat:repeat;box-sizing:border-box;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb{cursor:grab}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid rgba(0,0,0,0);border-radius:50%;transform:scale(0.7);transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-radius 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.cdk-high-contrast-active .mat-slider-thumb-label{outline:solid 1px}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-sliding .mat-slider-track-fill,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-thumb-container{transition-duration:0ms}.mat-slider-has-ticks .mat-slider-wrapper::after{content:"";position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(0.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.cdk-high-contrast-active .mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(0.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.cdk-high-contrast-active .mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(0.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-track-fill,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after{transition:none}'],encapsulation:2,changeDetection:0}),e})();function DW(e){return!isNaN(e)&&isFinite(e)}function zC(e){return"t"===e.type[0]}function MW(e,n){let t;return t=zC(e)?"number"==typeof n?zB(e.touches,n)||zB(e.changedTouches,n):e.touches[0]||e.changedTouches[0]:e,t?{x:t.clientX,y:t.clientY}:void 0}function zB(e,n){for(let t=0;t<e.length;t++)if(e[t].identifier===n)return e[t]}let uee=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({imports:[kl,oi,oi]}),e})(),_f=(()=>{class e{constructor(){this.min=1,this.max=100,this.step=1,this.value=15,this.title="",this.change=new En,this.input=new En,this.valueChange=new En}ngOnInit(){}onChange(t){t.value&&this.valueChange.emit(t.value)}onInput(t){this.input.emit(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=qn({type:e,selectors:[["app-labelled-sliders"]],inputs:{min:"min",max:"max",step:"step",value:"value",title:"title"},outputs:{change:"change",input:"input",valueChange:"valueChange"},decls:7,vars:6,consts:[[1,"vertical-flex"],["appearance","fill"],["matInput","","type","text","readonly","true",3,"value"],["thumbLabel","","tickInterval","auto",3,"min","max","step","value","valueChange","change","input"],["slider",""]],template:function(t,r){if(1&t&&(st(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),Qt(3),dt(),Rn(4,"input",2),dt(),st(5,"mat-slider",3,4),Yt("valueChange",function(s){return r.value=s})("change",function(s){return r.onChange(s)})("input",function(s){return r.onInput(s)}),dt()()),2&t){const i=pi(6);Et(3),gu(r.title),Et(1),At("value",i.value),Et(1),At("min",r.min)("max",r.max)("step",r.step)("value",r.value)}},dependencies:[BC,_y,wB,SW]}),e})();const cee=["canvas1"],dee=["canvas2"],hee=["canvas3"],fee=["picker"];let pee=(()=>{class e extends Mu{constructor(){super(...arguments),this.color="warn",this.colorCtr=new lf(null),this.colorspace="RGB"}ngAfterViewInit(){this.pickerInput.select(new Fv(255,255,255)),this.updateColorSpace()}updateInput(){let t=cv.imread(this.canvas1.getCanvas(),cv.IMREAD_GRAYSCALE),r=cv.imread(this.canvas2.getCanvas(),cv.IMREAD_GRAYSCALE),i=cv.imread(this.canvas3.getCanvas(),cv.IMREAD_GRAYSCALE);cv.cvtColor(t,t,cv.COLOR_RGB2GRAY),cv.cvtColor(r,r,cv.COLOR_RGB2GRAY),cv.cvtColor(i,i,cv.COLOR_RGB2GRAY);let s=new cv.MatVector,d=new cv.Mat;switch(this.colorspace){case"RGB":s.push_back(t),s.push_back(r),s.push_back(i),cv.merge(s,d);break;case"YCrCb":s.push_back(t),s.push_back(r),s.push_back(i),cv.merge(s,d),cv.cvtColor(d,d,cv.COLOR_YCrCb2RGB);break;case"LAB":s.push_back(t),s.push_back(r),s.push_back(i),cv.merge(s,d),cv.cvtColor(d,d,cv.COLOR_Lab2RGB);break;case"HSV":t.convertTo(t,cv.CV_32FC1),cv.convertScaleAbs(t,t,179/255,0),s.push_back(t),s.push_back(r),s.push_back(i),cv.merge(s,d),cv.cvtColor(d,d,cv.COLOR_HSV2RGB)}cv.imshow(this.drawCanvas.getCanvas(),d),t.delete(),r.delete(),i.delete(),d.delete(),s.delete(),this.updateColorSpace()}updateColorSpace(){let t=cv.imread(this.drawCanvas.getCanvas()),r=new cv.MatVector;switch(this.colorspace){case"RGB":this.canvas1.title="R",this.canvas2.title="G",this.canvas3.title="B";break;case"LAB":this.canvas1.title="L",this.canvas2.title="A",this.canvas3.title="B",cv.cvtColor(t,t,cv.COLOR_RGB2Lab);break;case"HSV":this.canvas1.title="H",this.canvas2.title="S",this.canvas3.title="V",cv.cvtColor(t,t,cv.COLOR_RGB2HSV);break;case"YCrCb":this.canvas1.title="Y",this.canvas2.title="Cr",this.canvas3.title="Cb",cv.cvtColor(t,t,cv.COLOR_RGB2YCrCb)}cv.split(t,r),"HSV"==this.colorspace&&cv.convertScaleAbs(r.get(0),r.get(0),1.42),cv.imshow(this.canvas1.getCanvas(),r.get(0)),cv.imshow(this.canvas2.getCanvas(),r.get(1)),cv.imshow(this.canvas3.getCanvas(),r.get(2)),t.delete(),r.delete()}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=ta(e)))(r||e)}}(),e.\u0275cmp=qn({type:e,selectors:[["app-color-spaces"]],viewQuery:function(t,r){if(1&t&&(Ai(cee,5),Ai(dee,5),Ai(hee,5),Ai(fee,5)),2&t){let i;ur(i=cr())&&(r.canvas1=i.first),ur(i=cr())&&(r.canvas2=i.first),ur(i=cr())&&(r.canvas3=i.first),ur(i=cr())&&(r.pickerInput=i.first)}},features:[Xn],decls:38,vars:23,consts:[[3,"rightDrawer"],["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],["title","Brush Size"],["brushSizeSlider",""],[1,"fillWidth"],["matInput","",3,"ngxMatColorPicker","formControl"],["matSuffix","",3,"for"],[3,"color"],["picker",""],["appearance","standard",1,"fillWidth"],[3,"ngModel","ngModelChange","selectionChange"],["value","RGB"],["value","HSV"],["value","LAB"],["value","YCrCb"],["ngProjectAs","[centerContent]",5,["","centerContent",""]],["title","Canvas",1,"main-canvas",3,"width","drawColor","drawable","brushRadius","BWOption","drawingEnded"],["inputCanvas",""],[1,"horizontal-flex","canvas-grid"],["title","Red",1,"grid-item",3,"width","drawColor","drawable","brushRadius","drawingEnded"],["canvas1",""],["title","Green",1,"grid-item",3,"width","drawColor","drawable","brushRadius","drawingEnded"],["canvas2",""],["title","Blue",1,"grid-item",3,"width","drawColor","drawable","brushRadius","drawingEnded"],["canvas3",""]],template:function(t,r){if(1&t&&(st(0,"app-tutorial-template-images",0),Qt(1," Colorspaces "),Bi(2,1),Rn(3,"app-labelled-sliders",2,3)(5,"hr"),st(6,"h2"),Qt(7,"Brush color"),dt(),st(8,"mat-form-field",4),Rn(9,"input",5)(10,"ngx-mat-color-toggle",6)(11,"ngx-mat-color-picker",7,8),dt(),Rn(13,"hr"),st(14,"h2"),Qt(15,"Colorspace"),dt(),st(16,"mat-form-field",9)(17,"mat-label"),Qt(18,"Choose a colorspace"),dt(),st(19,"mat-select",10),Yt("ngModelChange",function(s){return r.colorspace=s})("selectionChange",function(){return r.updateColorSpace()}),st(20,"mat-option",11),Qt(21,"RGB"),dt(),st(22,"mat-option",12),Qt(23,"HSV"),dt(),st(24,"mat-option",13),Qt(25,"LAB"),dt(),st(26,"mat-option",14),Qt(27,"YCrCb"),dt()()(),Vi(),Bi(28,15),st(29,"app-draw-canvas",16,17),Yt("drawingEnded",function(){return r.updateColorSpace()}),dt(),st(31,"div",18)(32,"app-draw-canvas",19,20),Yt("drawingEnded",function(){return r.updateInput()}),dt(),st(34,"app-draw-canvas",21,22),Yt("drawingEnded",function(){return r.updateInput()}),dt(),st(36,"app-draw-canvas",23,24),Yt("drawingEnded",function(){return r.updateInput()}),dt()(),Vi(),dt()),2&t){const i=pi(4),s=pi(12);At("rightDrawer",!1),Et(9),At("ngxMatColorPicker",s)("formControl",r.colorCtr),Et(1),At("for",s),Et(1),At("color",r.color),Et(8),At("ngModel",r.colorspace),Et(10),At("width",256)("drawColor",null==r.colorCtr.value?null:r.colorCtr.value.rgba)("drawable",!0)("brushRadius",i.value)("BWOption",!0),Et(3),At("width",256)("drawColor",null==r.colorCtr.value?null:r.colorCtr.value.rgba)("drawable",!0)("brushRadius",i.value),Et(2),At("width",256)("drawColor",null==r.colorCtr.value?null:r.colorCtr.value.rgba)("drawable",!0)("brushRadius",i.value),Et(2),At("width",256)("drawColor",null==r.colorCtr.value?null:r.colorCtr.value.rgba)("drawable",!0)("brushRadius",i.value)}},dependencies:[BC,_y,xQ,bW,uB,eC,sf,sF,uf,Sq,AB,xq,wB,Sy,_f,Mu],styles:[".options-bar[_ngcontent-%COMP%]{gap:2em;align-items:center;padding:0 2em}.options-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:80%}.brush-slider[_ngcontent-%COMP%]{font-size:small}.main-canvas[_ngcontent-%COMP%]{border:solid 1px white;margin:1em;border-radius:.25em;overflow:hidden;aspect-ratio:1;min-width:256px;width:33%;box-shadow:#00000040 0 54px 55px,#0000001f 0 -12px 30px,#0000001f 0 4px 6px,#0000002b 0 12px 13px,#00000017 0 -3px 5px}.grid-item[_ngcontent-%COMP%]{margin:auto;min-width:256px;box-shadow:#26394d 0 20px 30px -10px}.canvas-grid[_ngcontent-%COMP%]{gap:.5em;flex-direction:row;flex-wrap:wrap}"]}),e})();const vee=["button"],gee=["*"],TW=new sn("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),EW=new sn("MatButtonToggleGroup"),mee={provide:gs,useExisting:Wr(()=>HC),multi:!0};let AW=0;class IW{constructor(n,t){this.source=n,this.value=t}}let HC=(()=>{class e{constructor(t,r){this._changeDetector=t,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+AW++,this.valueChange=new En,this.change=new En,this.appearance=r&&r.appearance?r.appearance:"standard"}get name(){return this._name}set name(t){this._name=t,this._markButtonsForCheck()}get vertical(){return this._vertical}set vertical(t){this._vertical=Br(t)}get value(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t.map(r=>r.value):t[0]?t[0].value:void 0}set value(t){this._setSelectionByValue(t),this.valueChange.emit(this.value)}get selected(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t:t[0]||null}get multiple(){return this._multiple}set multiple(t){this._multiple=Br(t),this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(t){this._disabled=Br(t),this._markButtonsForCheck()}ngOnInit(){this._selectionModel=new qA(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(t=>t.checked))}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_emitChangeEvent(t){const r=new IW(t,this.value);this._controlValueAccessorChangeFn(r.value),this.change.emit(r)}_syncButtonToggle(t,r,i=!1,s=!1){!this.multiple&&this.selected&&!t.checked&&(this.selected.checked=!1),this._selectionModel?r?this._selectionModel.select(t):this._selectionModel.deselect(t):s=!0,s?Promise.resolve().then(()=>this._updateModelValue(t,i)):this._updateModelValue(t,i)}_isSelected(t){return this._selectionModel&&this._selectionModel.isSelected(t)}_isPrechecked(t){return!(typeof this._rawValue>"u")&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(r=>null!=t.value&&r===t.value):t.value===this._rawValue)}_setSelectionByValue(t){this._rawValue=t,this._buttonToggles&&(this.multiple&&t?(Array.isArray(t),this._clearSelection(),t.forEach(r=>this._selectValue(r))):(this._clearSelection(),this._selectValue(t)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(t=>t.checked=!1)}_selectValue(t){const r=this._buttonToggles.find(i=>null!=i.value&&i.value===t);r&&(r.checked=!0,this._selectionModel.select(r))}_updateModelValue(t,r){r&&this._emitChangeEvent(t),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(t=>t._markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(Xe(da),Xe(TW,8))},e.\u0275dir=Sn({type:e,selectors:[["mat-button-toggle-group"]],contentQueries:function(t,r,i){if(1&t&&Li(i,UC,5),2&t){let s;ur(s=cr())&&(r._buttonToggles=s)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(t,r){2&t&&(Hr("aria-disabled",r.disabled),bi("mat-button-toggle-vertical",r.vertical)("mat-button-toggle-group-appearance-standard","standard"===r.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[Kr([mee,{provide:EW,useExisting:e}])]}),e})();const _ee=Pv(class{});let UC=(()=>{class e extends _ee{constructor(t,r,i,s,d,p){super(),this._changeDetectorRef=r,this._elementRef=i,this._focusMonitor=s,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new En;const v=Number(d);this.tabIndex=v||0===v?v:null,this.buttonToggleGroup=t,this.appearance=p&&p.appearance?p.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(t){this._appearance=t}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(t){const r=Br(t);r!==this._checked&&(this._checked=r,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(t){this._disabled=Br(t)}ngOnInit(){const t=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+AW++,t&&(t._isPrechecked(this)?this.checked=!0:t._isSelected(this)!==this._checked&&t._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const t=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),t&&t._isSelected(this)&&t._syncButtonToggle(this,!1,!1,!0)}focus(t){this._buttonElement.nativeElement.focus(t)}_onButtonClick(){const t=!!this._isSingleSelector()||!this._checked;t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new IW(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}}return e.\u0275fac=function(t){return new(t||e)(Xe(EW,8),Xe(da),Xe(Nr),Xe(nc),Ls("tabindex"),Xe(TW,8))},e.\u0275cmp=qn({type:e,selectors:[["mat-button-toggle"]],viewQuery:function(t,r){if(1&t&&Ai(vee,5),2&t){let i;ur(i=cr())&&(r._buttonElement=i.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(t,r){1&t&&Yt("focus",function(){return r.focus()}),2&t&&(Hr("aria-label",null)("aria-labelledby",null)("id",r.id)("name",null),bi("mat-button-toggle-standalone",!r.buttonToggleGroup)("mat-button-toggle-checked",r.checked)("mat-button-toggle-disabled",r.disabled)("mat-button-toggle-appearance-standard","standard"===r.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[Xn],ngContentSelectors:gee,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(t,r){if(1&t&&(Ui(),st(0,"button",0,1),Yt("click",function(){return r._onButtonClick()}),st(2,"span",2),jr(3),dt()(),Rn(4,"span",3)(5,"span",4)),2&t){const i=pi(1);At("id",r.buttonId)("disabled",r.disabled||null),Hr("tabindex",r.disabled?-1:r.tabIndex)("aria-pressed",r.checked)("name",r._getButtonName())("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby),Et(5),At("matRippleTrigger",i)("matRippleDisabled",r.disableRipple||r.disabled)}},dependencies:[Rv],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),e})(),yee=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({imports:[oi,gy,oi]}),e})();function bee(e,n){if(1&e){const t=na();Bi(0),st(1,"app-labelled-sliders",21),Yt("valueChange",function(i){return Tr(t),Er(zn().gaussStdX=i)})("valueChange",function(){return Tr(t),Er(zn().drawGaussian())}),dt(),st(2,"app-labelled-sliders",22),Yt("valueChange",function(i){return Tr(t),Er(zn().gaussStdY=i)})("valueChange",function(){return Tr(t),Er(zn().drawGaussian())}),dt(),Vi()}if(2&e){const t=zn();Et(1),At("min",.5)("max",128)("step",.5)("value",t.gaussStdX),Et(1),At("min",.5)("max",128)("step",.5)("value",t.gaussStdY)}}function xee(e,n){if(1&e){const t=na();st(0,"app-labelled-sliders",23),Yt("valueChange",function(i){return Tr(t),Er(zn().gaussStdY=i)})("valueChange",function(i){return Tr(t),Er(zn().gaussStdX=i)})("valueChange",function(){return Tr(t),Er(zn().drawGaussian())}),dt()}if(2&e){const t=zn();At("min",.5)("max",128)("step",.5)("value",t.gaussStdY)("value",t.gaussStdX)}}let Cee=(()=>{class e extends Mu{constructor(){super(...arguments),this.angle=0,this.frequency=25,this.magLog=!0,this.brushSize=10,this.gaussStdX=10,this.gaussStdY=10,this.repsentationNorm="logAmplitudeOne"}drawGaussian(){var t=this.drawCanvas.width,r=this.drawCanvas.height,i=new Uint8ClampedArray(t*r*4);for(let s=0;s<r;s++)for(let d=0;d<t;d++){const p=4*(s*t+d);let v=255*Math.exp(-Math.pow((d-r/2)/(Math.sqrt(2)*this.gaussStdY),2)-Math.pow((s-t/2)/(Math.sqrt(2)*this.gaussStdX),2));i[p]=v,i[p+1]=v,i[p+2]=v,i[p+3]=255}this.drawCanvas.drawArray(i)}drawSin(){var t=this.drawCanvas.width,r=this.drawCanvas.height,i=new Uint8ClampedArray(t*r*4);for(let s=0;s<r;s++)for(let d=0;d<t;d++){const p=4*(s*t+d),v=Math.PI*this.angle/180,_=s*Math.cos(v)*this.frequency/r+d*Math.sin(v)*this.frequency/t,C=Math.round(127*(1+Math.sin(2*Math.PI*_)));i[p]=C,i[p+1]=C,i[p+2]=C,i[p+3]=255}this.drawCanvas.drawArray(i)}updateFFT(){let t=cv.imread(this.drawCanvas.getCanvas());cv.cvtColor(t,t,cv.COLOR_RGBA2GRAY,0);let r=cv.getOptimalDFTSize(t.rows),i=cv.getOptimalDFTSize(t.cols),s=cv.Scalar.all(0),d=new cv.Mat;cv.copyMakeBorder(t,d,0,r-t.rows,0,i-t.cols,cv.BORDER_CONSTANT,s);let p=new cv.Mat;d.convertTo(p,cv.CV_32F);let v=new cv.MatVector,_=new cv.Mat,C=new cv.Mat.zeros(d.rows,d.cols,cv.CV_32F);v.push_back(p),v.push_back(C),cv.merge(v,_),cv.dft(_,_,cv.DFT_SCALE),cv.split(_,v),cv.magnitude(v.get(0),v.get(1),v.get(0));let S=v.get(0),k=new cv.Mat.ones(S.rows,S.cols,S.type());switch(this.repsentationNorm){case"logAmplitudeOne":cv.add(S,k,S),cv.log(S,S);break;case"logAmplitude":cv.log(S,S)}let H=new cv.Rect(0,0,-2&S.cols,-2&S.rows);S=S.roi(H);let ne=S.cols/2,pe=S.rows/2,Me=new cv.Mat,Re=new cv.Rect(0,0,ne,pe),Fe=new cv.Rect(ne,0,ne,pe),Oe=new cv.Rect(0,pe,ne,pe),Be=new cv.Rect(ne,pe,ne,pe),nt=S.roi(Re),rt=S.roi(Fe),Ct=S.roi(Oe),mt=S.roi(Be);nt.copyTo(Me),mt.copyTo(nt),Me.copyTo(mt),rt.copyTo(Me),Ct.copyTo(rt),Me.copyTo(Ct),cv.normalize(S,S,0,1,cv.NORM_MINMAX),this.outputCanvas.drawMat(S),t.delete(),d.delete(),v.delete(),_.delete(),k.delete(),Me.delete()}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=ta(e)))(r||e)}}(),e.\u0275cmp=qn({type:e,selectors:[["app-fast-fourier-transform"]],features:[Xn],decls:36,vars:18,consts:[["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],["name","representationNorm",3,"ngModel","ngModelChange","change"],["value","amplitude"],["value","logAmplitude"],["value","logAmplitudeOne"],["title","Brush Size"],["brushSizeSlider",""],["mat-raised-button","","color","primary",1,"fillWidth",3,"click"],["color","primary","labelPosition","before",1,"example-margin"],["toggleAxis",""],[4,"ngIf","ngIfElse"],["singleGaussAxis",""],["title","Angle","thumbLabel","","tickInterval","auto",3,"min","max","step","value","valueChange"],["title","Frequency","thumbLabel","","tickInterval","auto",3,"min","max","step","value","valueChange"],["ngProjectAs","[drawerRight]",5,["","drawerRight",""]],["echarts","",1,"profile-graph",3,"options"],["ngProjectAs","[centerContent]",5,["","centerContent",""]],["title","Canvas",1,"canvas",3,"width","drawable","OnlyBW","brushRadius","drawingEnded"],["inputCanvas",""],["title","Fourier Transform",1,"canvas",3,"drawable","profileOption","profileChanged"],["outputCanvas",""],["title","Gaussian STD X","thumbLabel","","tickInterval","auto",3,"min","max","step","value","valueChange"],["title","Gaussian STD Y","thumbLabel","","tickInterval","auto",3,"min","max","step","value","valueChange"],["title","Gaussian STD","thumbLabel","","tickInterval","auto",3,"min","max","step","value","valueChange"]],template:function(t,r){if(1&t&&(st(0,"app-tutorial-template-images"),Qt(1," Fourier Transform "),Bi(2,0),st(3,"mat-button-toggle-group",1),Yt("ngModelChange",function(s){return r.repsentationNorm=s})("change",function(){return r.updateFFT()}),st(4,"mat-button-toggle",2),Qt(5,"A"),dt(),st(6,"mat-button-toggle",3),Qt(7,"log(A)"),dt(),st(8,"mat-button-toggle",4),Qt(9,"log(1+A)"),dt()(),Rn(10,"hr")(11,"app-labelled-sliders",5,6)(13,"hr"),st(14,"button",7),Yt("click",function(){return r.drawGaussian()}),Qt(15," Draw Gaussian "),dt(),st(16,"mat-slide-toggle",8,9),Qt(18," Independant axis "),dt(),nr(19,bee,3,8,"ng-container",10),nr(20,xee,1,5,"ng-template",null,11,__),Rn(22,"hr"),st(23,"button",7),Yt("click",function(){return r.drawSin()}),Qt(24," Draw sin(x) "),dt(),st(25,"app-labelled-sliders",12),Yt("valueChange",function(s){return r.angle=s})("valueChange",function(){return r.drawSin()}),dt(),st(26,"app-labelled-sliders",13),Yt("valueChange",function(s){return r.frequency=s})("valueChange",function(){return r.drawSin()}),dt(),Vi(),Bi(27,14),st(28,"h2"),Qt(29,"Profile"),dt(),Rn(30,"div",15),Vi(),Bi(31,16),st(32,"app-draw-canvas",17,18),Yt("drawingEnded",function(){return r.updateFFT()}),dt(),st(34,"app-draw-canvas",19,20),Yt("profileChanged",function(){return r.updateProfile()}),dt(),Vi(),dt()),2&t){const i=pi(12),s=pi(17),d=pi(21);Et(3),At("ngModel",r.repsentationNorm),Et(16),At("ngIf",s.checked)("ngIfElse",d),Et(6),At("min",0)("max",180)("step",2.5)("value",r.angle),Et(1),At("min",0)("max",256)("step",1)("value",r.frequency),Et(4),At("options",r.profileOptions),Et(2),At("width",256)("drawable",!0)("OnlyBW",!0)("brushRadius",i.value),Et(2),At("drawable",!1)("profileOption",!0)}},dependencies:[J1,HC,UC,zs,sf,uf,VB,Fl,Sy,_f,Mu],styles:[".drawer-content[_ngcontent-%COMP%]{margin:1em auto;gap:1em}.canvas[_ngcontent-%COMP%]{width:45%;min-width:256px}.profile-graph[_ngcontent-%COMP%]{width:256px}"]}),e})();var oI=z(8775);let wee=(()=>{class e extends Mu{constructor(){super(...arguments),this.tileGridSize=8,this.clipLimit=20,this.colorspace="LAB"}updateHistogram(){let t=cv.imread(this.drawCanvas.getCanvas());if(this.outputCanvas.isBWChecked=this.drawCanvas.isBW(),this.drawCanvas.isBW()){cv.cvtColor(t,t,cv.COLOR_RGBA2GRAY);var r=this.getHistogramFromGrayMat(t)}else r=this.getHistogramFromColorMat(t);this.inputHistoOptions=this.updateHistoChart(r),t.delete();let i=cv.imread(this.outputCanvas.getCanvas());this.outputCanvas.isBW()?(cv.cvtColor(i,i,cv.COLOR_RGBA2GRAY),r=this.getHistogramFromGrayMat(i)):r=this.getHistogramFromColorMat(i),this.outputHistoOptions=this.updateHistoChart(r),i.delete()}updateHistoChart(t){let r={legend:{data:["Histogram"],align:"left",textStyle:{color:"white"}},tooltip:{},xAxis:{data:Array.from(Array(t[0].length).keys()),silent:!1,splitLine:{show:!1}},yAxis:{},animationEasing:"exponentialIn",animationDuration:500};return 1==t.length?r.series=[{name:"Histogram",type:"line",symbol:"none",areaStyle:{color:new oI.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(220, 220, 220)"},{offset:1,color:"rgb(150, 150, 150)"}])},data:t[0],dimensions:["R"],itemStyle:{color:"rgb(220, 220, 220)"}}]:(r.legend={data:["R","G","B"],align:"left",textStyle:{color:"white"}},r.series=[{name:"R",type:"line",symbol:"none",itemStyle:{color:"rgb(220, 100, 100)"},areaStyle:{color:new oI.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(255, 68, 100)"},{offset:1,color:"rgb(180, 68, 100)"}])},data:t[0]},{name:"G",type:"line",symbol:"none",itemStyle:{color:"rgb(100, 220, 100)"},areaStyle:{color:new oI.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(68, 255, 100)"},{offset:1,color:"rgb(68, 180, 100)"}])},data:t[1]},{name:"B",type:"line",symbol:"none",itemStyle:{color:"rgb(100, 100, 220)"},areaStyle:{color:new oI.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(68, 100, 255)"},{offset:1,color:"rgb(68, 100, 180)"}])},data:t[2]}]),r}getHistogramFromColorMat(t){let r=new Array,i=new cv.MatVector;cv.split(t,i);let s=new cv.Mat,d=new cv.Mat,p=new cv.Mat,v=[256],_=[0,255],C=new cv.Mat;cv.calcHist(i,[0],C,s,v,_,!1),cv.calcHist(i,[1],C,d,v,_,!1),cv.calcHist(i,[2],C,p,v,_,!1),r.push(s.data32F),r.push(d.data32F),r.push(p.data32F);for(let S=0;S<3;S++)for(let k=0;k<256;k++){let H=r[S];H[k]/=t.rows*t.cols,r[S]=Array.from(H)}return C.delete(),i.delete(),s.delete(),d.delete(),p.delete(),r}getHistogramFromGrayMat(t){let r=new Array,i=new cv.MatVector;i.push_back(t);let s=new cv.Mat,v=new cv.Mat;cv.calcHist(i,[0],v,s,[256],[0,255],!1),r.push(s.data32F);for(let _=0;_<256;_++){let C=r[0];C[_]/=t.rows*t.cols,r[0]=Array.from(C)}return v.delete(),i.delete(),s.delete(),r}equalizeHistogram(){let t=cv.imread(this.drawCanvas.getCanvas());if(this.drawCanvas.isBW())cv.cvtColor(t,t,cv.COLOR_RGB2GRAY),cv.equalizeHist(t,t);else switch(this.colorspace){case"RGB":{let r=new cv.MatVector;cv.split(t,r),cv.equalizeHist(r.get(0),r.get(0)),cv.equalizeHist(r.get(1),r.get(1)),cv.equalizeHist(r.get(2),r.get(2)),cv.merge(r,t),r.delete();break}case"LAB":{cv.cvtColor(t,t,cv.COLOR_RGB2Lab);let r=new cv.MatVector;cv.split(t,r),cv.equalizeHist(r.get(0),r.get(0)),cv.merge(r,t),cv.cvtColor(t,t,cv.COLOR_Lab2RGB),r.delete();break}case"HSV":{cv.cvtColor(t,t,cv.COLOR_RGB2HSV);let r=new cv.MatVector;cv.split(t,r),cv.equalizeHist(r.get(2),r.get(2)),cv.merge(r,t),cv.cvtColor(t,t,cv.COLOR_HSV2RGB),r.delete();break}}this.outputCanvas.drawMat(t),this.updateHistogram(),t.delete()}CLAHE(){let t=cv.imread(this.drawCanvas.getCanvas()),r=new cv.Size(this.tileGridSize,this.tileGridSize),i=new cv.CLAHE(this.clipLimit,r);if(this.drawCanvas.isBW())cv.cvtColor(t,t,cv.COLOR_RGB2GRAY),i.apply(t,t);else switch(this.colorspace){case"RGB":{let s=new cv.MatVector;cv.split(t,s),i.apply(s.get(0),s.get(0)),i.apply(s.get(1),s.get(1)),i.apply(s.get(2),s.get(2)),cv.merge(s,t),s.delete();break}case"LAB":{cv.cvtColor(t,t,cv.COLOR_RGB2Lab);let s=new cv.MatVector;cv.split(t,s),i.apply(s.get(0),s.get(0)),cv.merge(s,t),cv.cvtColor(t,t,cv.COLOR_Lab2RGB),s.delete();break}case"HSV":{cv.cvtColor(t,t,cv.COLOR_RGB2HSV);let s=new cv.MatVector;cv.split(t,s),i.apply(s.get(2),s.get(2)),cv.merge(s,t),cv.cvtColor(t,t,cv.COLOR_HSV2RGB),s.delete();break}}this.outputCanvas.drawMat(t),this.updateHistogram(),t.delete(),i.delete()}ngAfterViewInit(){this.ngxOpenCv.cvState.subscribe(t=>{this.cvState=t.state,t.ready&&this.updateHistogram()})}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=ta(e)))(r||e)}}(),e.\u0275cmp=qn({type:e,selectors:[["app-image-histogram"]],features:[Xn],decls:41,vars:19,consts:[["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],["name","Colorspace","aria-label","Color space",3,"ngModel","ngModelChange"],["value","RGB"],["value","LAB"],["value","HSV"],["mat-raised-button","","color","primary",1,"fillWidth",3,"click"],[3,"min","max","step","title","value","valueChange"],["ngProjectAs","[drawerRight]",5,["","drawerRight",""]],["echarts","",1,"histo-graph",3,"options"],["ngProjectAs","[centerContent]",5,["","centerContent",""]],["title","Image",1,"canvas",3,"width","drawable","BWOption","drawingEnded","BWSet"],["inputCanvas",""],["title","Result",1,"canvas",3,"width","drawable","BWOption","BWSet"],["outputCanvas",""]],template:function(t,r){1&t&&(st(0,"app-tutorial-template-images"),Qt(1," Histogram and equalization "),Bi(2,0),st(3,"h3"),Qt(4,"Colorspace"),dt(),st(5,"mat-button-toggle-group",1),Yt("ngModelChange",function(s){return r.colorspace=s}),st(6,"mat-button-toggle",2)(7,"b"),Qt(8,"RGB"),dt()(),st(9,"mat-button-toggle",3)(10,"b"),Qt(11,"L"),dt(),Qt(12,"AB"),dt(),st(13,"mat-button-toggle",4),Qt(14,"HS"),st(15,"b"),Qt(16,"V"),dt()()(),Rn(17,"hr"),st(18,"button",5),Yt("click",function(){return r.equalizeHistogram()}),Qt(19," Histogram equalization "),dt(),Rn(20,"hr"),st(21,"h3"),Qt(22," Contrast Limited "),Rn(23,"br"),Qt(24," Adaptive Histogram "),Rn(25,"br"),Qt(26," Equalization "),dt(),st(27,"app-labelled-sliders",6),Yt("valueChange",function(s){return r.tileGridSize=s})("valueChange",function(){return r.CLAHE()}),dt(),st(28,"app-labelled-sliders",6),Yt("valueChange",function(s){return r.clipLimit=s})("valueChange",function(){return r.CLAHE()}),dt(),st(29,"button",5),Yt("click",function(){return r.CLAHE()}),Qt(30," CLAHE "),dt(),Vi(),Bi(31,7),Rn(32,"div",8),st(33,"h2"),Qt(34,"Result canvas"),dt(),Rn(35,"div",8),Vi(),Bi(36,9),st(37,"app-draw-canvas",10,11),Yt("drawingEnded",function(){return r.updateHistogram()})("BWSet",function(){return r.updateHistogram()}),dt(),st(39,"app-draw-canvas",12,13),Yt("BWSet",function(){return r.updateHistogram()}),dt(),Vi(),dt()),2&t&&(Et(5),At("ngModel",r.colorspace),Et(22),At("min",4)("max",48)("step",2)("title","Tile Grid size")("value",r.tileGridSize),Et(1),At("min",4)("max",48)("step",2)("title","Clip Limit")("value",r.clipLimit),Et(4),At("options",r.inputHistoOptions),Et(3),At("options",r.outputHistoOptions),Et(2),At("width",1024)("drawable",!1)("BWOption",!0),Et(2),At("width",1024)("drawable",!1)("BWOption",!0))},dependencies:[J1,HC,UC,sf,uf,Fl,Sy,_f,Mu],styles:[".canvas[_ngcontent-%COMP%]{width:45%;min-width:256px}.histo-graph[_ngcontent-%COMP%]{min-width:350px;aspect-ratio:1}"]}),e})();function HB(e=0,n=1){let t=1-Math.random(),r=Math.random();return Math.sqrt(-2*Math.log(t))*Math.cos(2*Math.PI*r)*n+e}function sI(e,n={x:0,y:0},t={x:1,y:1}){let r=new Array(e);for(let i=0;i<e;i++)r[i]={x:HB(n.x,t.x),y:HB(n.y,t.y)};return r}function PW(e,n,t){let r=new Array(t),i=(n-e)/(t-1);for(let s=0;s<t;s++)r[s]=e+i*s;return r}var bt=z(3786),RW=z(5199),Dee=(z(5433),z(1659)),Mee=z(4664),Tee=z(6840);function LW(e,n,t){"object"==typeof n&&(t=n,n=null);var i,r=this;if(!(e instanceof Function))for(var s in i=[],e)e.hasOwnProperty(s)&&i.push(s);var d=function(v){if(r.apply(this,arguments),e instanceof Function?OW(this,e.call(this,v)):Eee(this,e,i),this.constructor===d)for(var _=d.__initializers__,C=0;C<_.length;C++)_[C].apply(this,arguments)};d.__super__=r,d.__initializers__=r.__initializers__?r.__initializers__.slice():[],n&&d.__initializers__.push(n);var p=function(){};return p.prototype=r.prototype,d.prototype=new p,d.prototype.constructor=d,OW(d.prototype,t),d.extend=r.extend,d.derive=r.extend,d}function OW(e,n){if(n)for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])}function Eee(e,n,t){for(var r=0;r<t.length;r++){var i=t[r];e[i]=n[i]}}(0,RW.D)([Dee.N,Mee.N]),(0,RW.D)(Tee.T);const Aee={extend:LW,derive:LW};function Iee(e,n){this.action=e,this.context=n}var Pee={trigger:function(e){if(this.hasOwnProperty("__handlers__")&&this.__handlers__.hasOwnProperty(e)){var n=this.__handlers__[e],t=n.length,r=-1,i=arguments;switch(i.length){case 1:for(;++r<t;)n[r].action.call(n[r].context);return;case 2:for(;++r<t;)n[r].action.call(n[r].context,i[1]);return;case 3:for(;++r<t;)n[r].action.call(n[r].context,i[1],i[2]);return;case 4:for(;++r<t;)n[r].action.call(n[r].context,i[1],i[2],i[3]);return;case 5:for(;++r<t;)n[r].action.call(n[r].context,i[1],i[2],i[3],i[4]);return;default:for(;++r<t;)n[r].action.apply(n[r].context,Array.prototype.slice.call(i,1));return}}},on:function(e,n,t){if(e&&n){var r=this.__handlers__||(this.__handlers__={});if(r[e]){if(this.has(e,n))return}else r[e]=[];var i=new Iee(n,t||this);return r[e].push(i),this}},once:function(e,n,t){if(e&&n){var r=this;return this.on(e,function i(){r.off(e,i),n.apply(this,arguments)},t)}},before:function(e,n,t){if(e&&n)return this.on(e="before"+e,n,t)},after:function(e,n,t){if(e&&n)return this.on(e="after"+e,n,t)},success:function(e,n){return this.once("success",e,n)},error:function(e,n){return this.once("error",e,n)},off:function(e,n){var t=this.__handlers__||(this.__handlers__={});if(n){if(t[e]){for(var r=t[e],i=[],s=0;s<r.length;s++)n&&r[s].action!==n&&i.push(r[s]);t[e]=i}return this}t[e]=[]},has:function(e,n){var t=this.__handlers__;if(!t||!t[e])return!1;for(var r=t[e],i=0;i<r.length;i++)if(r[i].action===n)return!0}};const UB=Pee;var Ree=0,Oee=Array.prototype.forEach,GC={genGUID:function(){return++Ree},relative2absolute:function(e,n){if(!n||e.match(/^\//))return e;for(var t=e.split("/"),r=n.split("/"),i=t[0];"."===i||".."===i;)".."===i&&r.pop(),t.shift(),i=t[0];return r.join("/")+"/"+t.join("/")},extend:function(e,n){if(n)for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e},defaults:function(e,n){if(n)for(var t in n)void 0===e[t]&&(e[t]=n[t]);return e},extendWithPropList:function(e,n,t){if(n)for(var r=0;r<t.length;r++){var i=t[r];e[i]=n[i]}return e},defaultsWithPropList:function(e,n,t){if(n)for(var r=0;r<t.length;r++){var i=t[r];null==e[i]&&(e[i]=n[i])}return e},each:function(e,n,t){if(e&&n)if(e.forEach&&e.forEach===Oee)e.forEach(n,t);else if(e.length===+e.length)for(var r=0,i=e.length;r<i;r++)n.call(t,e[r],r,e);else for(var s in e)e.hasOwnProperty(s)&&n.call(t,e[s],s,e)},isObject:function(e){return e===Object(e)},isArray:function(e){return Array.isArray(e)},isArrayLike:function(e){return!!e&&e.length===+e.length},clone:function(e){if(GC.isObject(e)){if(GC.isArray(e))return e.slice();if(GC.isArrayLike(e)){for(var n=new e.constructor(e.length),t=0;t<e.length;t++)n[t]=e[t];return n}return GC.extend({},e)}return e}};const Yo=GC;var lI=function(){this.__uid__=Yo.genGUID()};lI.__initializers__=[function(e){Yo.extend(this,e)}],Yo.extend(lI,Aee),Yo.extend(lI.prototype,UB);const Us=lI;var kW=["OES_texture_float","OES_texture_half_float","OES_texture_float_linear","OES_texture_half_float_linear","OES_standard_derivatives","OES_vertex_array_object","OES_element_index_uint","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","EXT_texture_filter_anisotropic","EXT_shader_texture_lod","WEBGL_draw_buffers","EXT_frag_depth","EXT_sRGB","ANGLE_instanced_arrays"],NW=["MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE"];const Nee=function kee(e){for(var n={},t={},r=0;r<kW.length;r++)d(kW[r]);for(r=0;r<NW.length;r++){var s=NW[r];t[s]=e.getParameter(e[s])}function d(p){if(e.getExtension){var v=e.getExtension(p);v||(v=e.getExtension("MOZ_"+p)),v||(v=e.getExtension("WEBKIT_"+p)),n[p]=v}}this.getExtension=function(p){return p in n||d(p),n[p]},this.getParameter=function(p){return t[p]}},Bee={get:function Fee(e){var n=new XMLHttpRequest;n.open("get",e.url),n.responseType=e.responseType||"text",e.onprogress&&(n.onprogress=function(t){t.lengthComputable?e.onprogress(t.loaded/t.total,t.loaded,t.total):e.onprogress(null)}),n.onload=function(t){n.status>=400?e.onerror&&e.onerror():e.onload&&e.onload(n.response)},e.onerror&&(n.onerror=e.onerror),n.send(null)}};var GB,Gs={supportWebGL:function(){if(null==GB)try{var e=document.createElement("canvas");if(!e.getContext("webgl")&&!e.getContext("experimental-webgl"))throw new Error}catch{GB=!1}return GB}};Gs.Int8Array=typeof Int8Array>"u"?Array:Int8Array,Gs.Uint8Array=typeof Uint8Array>"u"?Array:Uint8Array,Gs.Uint16Array=typeof Uint16Array>"u"?Array:Uint16Array,Gs.Uint32Array=typeof Uint32Array>"u"?Array:Uint32Array,Gs.Int16Array=typeof Int16Array>"u"?Array:Int16Array,Gs.Float32Array=typeof Float32Array>"u"?Array:Float32Array,Gs.Float64Array=typeof Float64Array>"u"?Array:Float64Array;var Bv={};typeof window<"u"?Bv=window:typeof global<"u"&&(Bv=global),Gs.requestAnimationFrame=Bv.requestAnimationFrame||Bv.msRequestAnimationFrame||Bv.mozRequestAnimationFrame||Bv.webkitRequestAnimationFrame||function(e){setTimeout(e,16)},Gs.createCanvas=function(){return document.createElement("canvas")},Gs.createImage=function(){return new Bv.Image},Gs.request={get:Bee.get},Gs.addEventListener=function(e,n,t,r){e.addEventListener(n,t,r)},Gs.removeEventListener=function(e,n,t){e.removeEventListener(n,t)};const oo=Gs;var ko=function(){this.head=null,this.tail=null,this._length=0};ko.prototype.insert=function(e){var n=new ko.Entry(e);return this.insertEntry(n),n},ko.prototype.insertAt=function(e,n){if(!(e<0)){for(var t=this.head,r=0;t&&r!=e;)t=t.next,r++;if(t){var i=new ko.Entry(n),s=t.prev;s?(s.next=i,i.prev=s):this.head=i,i.next=t,t.prev=i}else this.insert(n)}},ko.prototype.insertBeforeEntry=function(e,n){var t=new ko.Entry(e),r=n.prev;r?(r.next=t,t.prev=r):this.head=t,t.next=n,n.prev=t,this._length++},ko.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,this.tail=e):this.head=this.tail=e,this._length++},ko.prototype.remove=function(e){var n=e.prev,t=e.next;n?n.next=t:this.head=t,t?t.prev=n:this.tail=n,e.next=e.prev=null,this._length--},ko.prototype.removeAt=function(e){if(!(e<0)){for(var n=this.head,t=0;n&&t!=e;)n=n.next,t++;if(n)return this.remove(n),n.value}},ko.prototype.getHead=function(){if(this.head)return this.head.value},ko.prototype.getTail=function(){if(this.tail)return this.tail.value},ko.prototype.getAt=function(e){if(!(e<0)){for(var n=this.head,t=0;n&&t!=e;)n=n.next,t++;return n.value}},ko.prototype.indexOf=function(e){for(var n=this.head,t=0;n;){if(n.value===e)return t;n=n.next,t++}},ko.prototype.length=function(){return this._length},ko.prototype.isEmpty=function(){return 0===this._length},ko.prototype.forEach=function(e,n){for(var t=this.head,r=0,i=typeof n<"u";t;)i?e.call(n,t.value,r):e(t.value,r),t=t.next,r++},ko.prototype.clear=function(){this.tail=this.head=null,this._length=0},ko.Entry=function(e){this.value=e,this.next=null,this.prev=null};const Vee=ko;var Dy=function(e){this._list=new Vee,this._map={},this._maxSize=e||10};Dy.prototype.setMaxSize=function(e){this._maxSize=e},Dy.prototype.put=function(e,n){if(!this._map.hasOwnProperty(e)){var t=this._list.length();if(t>=this._maxSize&&t>0){var r=this._list.head;this._list.remove(r),delete this._map[r.key]}var i=this._list.insert(n);i.key=e,this._map[e]=i}},Dy.prototype.get=function(e){var n=this._map[e];if(this._map.hasOwnProperty(e))return n!==this._list.tail&&(this._list.remove(n),this._list.insertEntry(n)),n.value},Dy.prototype.remove=function(e){var n=this._map[e];typeof n<"u"&&(delete this._map[e],this._list.remove(n))},Dy.prototype.clear=function(){this._list.clear(),this._map={}};const FW=Dy;var Ca={},BW={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ic(e){return(e=Math.round(e))<0?0:e>255?255:e}function WC(e){return e<0?0:e>1?1:e}function WB(e){return e.length&&"%"===e.charAt(e.length-1)?ic(parseFloat(e)/100*255):ic(parseInt(e,10))}function My(e){return e.length&&"%"===e.charAt(e.length-1)?WC(parseFloat(e)/100):WC(parseFloat(e))}function jB(e,n,t){return t<0?t+=1:t>1&&(t-=1),6*t<1?e+(n-e)*t*6:2*t<1?n:3*t<2?e+(n-e)*(2/3-t)*6:e}function yf(e,n,t){return e+(n-e)*t}function ac(e,n,t,r,i){return e[0]=n,e[1]=t,e[2]=r,e[3]=i,e}function ZB(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e}var VW=new FW(20),uI=null;function Ty(e,n){uI&&ZB(uI,n),uI=VW.put(e,uI||n.slice())}function YB(e,n){var t=(parseFloat(e[0])%360+360)%360/360,r=My(e[1]),i=My(e[2]),s=i<=.5?i*(r+1):i+r-i*r,d=2*i-s;return ac(n=n||[],ic(255*jB(d,s,t+1/3)),ic(255*jB(d,s,t)),ic(255*jB(d,s,t-1/3)),1),4===e.length&&(n[3]=e[3]),n}Ca.parse=function(e,n){if(e){n=n||[];var t=VW.get(e);if(t)return ZB(n,t);var i,r=(e+="").replace(/ /g,"").toLowerCase();if(r in BW)return ZB(n,BW[r]),Ty(e,n),n;if("#"===r.charAt(0))return 4===r.length?(i=parseInt(r.substr(1),16))>=0&&i<=4095?(ac(n,(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1),Ty(e,n),n):void ac(n,0,0,0,1):7===r.length?(i=parseInt(r.substr(1),16))>=0&&i<=16777215?(ac(n,(16711680&i)>>16,(65280&i)>>8,255&i,1),Ty(e,n),n):void ac(n,0,0,0,1):void 0;var s=r.indexOf("("),d=r.indexOf(")");if(-1!==s&&d+1===r.length){var p=r.substr(0,s),v=r.substr(s+1,d-(s+1)).split(","),_=1;switch(p){case"rgba":if(4!==v.length)return void ac(n,0,0,0,1);_=My(v.pop());case"rgb":return 3!==v.length?void ac(n,0,0,0,1):(ac(n,WB(v[0]),WB(v[1]),WB(v[2]),_),Ty(e,n),n);case"hsla":return 4!==v.length?void ac(n,0,0,0,1):(v[3]=My(v[3]),YB(v,n),Ty(e,n),n);case"hsl":return 3!==v.length?void ac(n,0,0,0,1):(YB(v,n),Ty(e,n),n);default:return}}ac(n,0,0,0,1)}},Ca.parseToFloat=function(e,n){if(n=Ca.parse(e,n))return n[0]/=255,n[1]/=255,n[2]/=255,n},Ca.lift=function(e,n){var t=Ca.parse(e);if(t){for(var r=0;r<3;r++)t[r]=n<0?t[r]*(1-n)|0:(255-t[r])*n+t[r]|0;return Ca.stringify(t,4===t.length?"rgba":"rgb")}},Ca.toHex=function(e){var n=Ca.parse(e);if(n)return((1<<24)+(n[0]<<16)+(n[1]<<8)+ +n[2]).toString(16).slice(1)},Ca.fastLerp=function(e,n,t){if(n&&n.length&&e>=0&&e<=1){t=t||[];var r=e*(n.length-1),i=Math.floor(r),s=Math.ceil(r),d=n[i],p=n[s],v=r-i;return t[0]=ic(yf(d[0],p[0],v)),t[1]=ic(yf(d[1],p[1],v)),t[2]=ic(yf(d[2],p[2],v)),t[3]=WC(yf(d[3],p[3],v)),t}},Ca.fastMapToColor=Ca.fastLerp,Ca.lerp=function(e,n,t){if(n&&n.length&&e>=0&&e<=1){var r=e*(n.length-1),i=Math.floor(r),s=Math.ceil(r),d=Ca.parse(n[i]),p=Ca.parse(n[s]),v=r-i,_=Ca.stringify([ic(yf(d[0],p[0],v)),ic(yf(d[1],p[1],v)),ic(yf(d[2],p[2],v)),WC(yf(d[3],p[3],v))],"rgba");return t?{color:_,leftIndex:i,rightIndex:s,value:r}:_}},Ca.mapToColor=Ca.lerp,Ca.modifyHSL=function(e,n,t,r){if(e=Ca.parse(e))return e=function Hee(e){if(e){var v,_,n=e[0]/255,t=e[1]/255,r=e[2]/255,i=Math.min(n,t,r),s=Math.max(n,t,r),d=s-i,p=(s+i)/2;if(0===d)v=0,_=0;else{_=p<.5?d/(s+i):d/(2-s-i);var C=((s-n)/6+d/2)/d,S=((s-t)/6+d/2)/d,k=((s-r)/6+d/2)/d;n===s?v=k-S:t===s?v=1/3+C-k:r===s&&(v=2/3+S-C),v<0&&(v+=1),v>1&&(v-=1)}var H=[360*v,_,p];return null!=e[3]&&H.push(e[3]),H}}(e),null!=n&&(e[0]=function zee(e){return(e=Math.round(e))<0?0:e>360?360:e}(n)),null!=t&&(e[1]=My(t)),null!=r&&(e[2]=My(r)),Ca.stringify(YB(e),"rgba")},Ca.modifyAlpha=function(e,n){if((e=Ca.parse(e))&&null!=n)return e[3]=WC(n),Ca.stringify(e,"rgba")},Ca.stringify=function(e,n){if(e&&e.length){var t=e[0]+","+e[1]+","+e[2];return("rgba"===n||"hsva"===n||"hsla"===n)&&(t+=","+e[3]),n+"("+t+")"}};var Uee=Ca.parseToFloat,XB={};function zW(e){var n=Object.keys(e);n.sort();for(var t=[],r=0;r<n.length;r++){var i=n[r],s=e[i];t.push(null===s?i:i+" "+s.toString())}return t.join("\n")}var Wee=Us.extend(function(){return{name:"",depthTest:!0,depthMask:!0,transparent:!1,blend:null,autoUpdateTextureStatus:!0,uniforms:{},vertexDefines:{},fragmentDefines:{},_textureStatus:{},_enabledUniforms:null}},function(){this.name||(this.name="MATERIAL_"+this.__uid__),this.shader&&this.attachShader(this.shader,!0)},{precision:"highp",setUniform:function(e,n){void 0===n&&console.warn('Uniform value "'+e+'" is undefined');var t=this.uniforms[e];t&&("string"==typeof n&&(n=Uee(n)||n),t.value=n,this.autoUpdateTextureStatus&&"t"===t.type&&(n?this.enableTexture(e):this.disableTexture(e)))},setUniforms:function(e){for(var n in e)this.setUniform(n,e[n])},isUniformEnabled:function(e){return this._enabledUniforms.indexOf(e)>=0},getEnabledUniforms:function(){return this._enabledUniforms},getTextureUniforms:function(){return this._textureUniforms},set:function(e,n){if("object"==typeof e)for(var t in e)this.setUniform(t,e[t]);else this.setUniform(e,n)},get:function(e){var n=this.uniforms[e];if(n)return n.value},attachShader:function(e,n){var t=this.uniforms;this.uniforms=e.createUniforms(),this.shader=e;var r=this.uniforms;this._enabledUniforms=Object.keys(r),this._enabledUniforms.sort(),this._textureUniforms=this._enabledUniforms.filter(function(_){var C=this.uniforms[_].type;return"t"===C||"tv"===C},this);var i=this.vertexDefines,s=this.fragmentDefines;if(this.vertexDefines=Yo.clone(e.vertexDefines),this.fragmentDefines=Yo.clone(e.fragmentDefines),n){for(var d in t)r[d]&&(r[d].value=t[d].value);Yo.defaults(this.vertexDefines,i),Yo.defaults(this.fragmentDefines,s)}var p={};for(var v in e.textures)p[v]={shaderType:e.textures[v].shaderType,type:e.textures[v].type,enabled:!(!n||!this._textureStatus[v])&&this._textureStatus[v].enabled};this._textureStatus=p,this._programKey=""},clone:function(){var e=new this.constructor({name:this.name,shader:this.shader});for(var n in this.uniforms)e.uniforms[n].value=this.uniforms[n].value;return e.depthTest=this.depthTest,e.depthMask=this.depthMask,e.transparent=this.transparent,e.blend=this.blend,e.vertexDefines=Yo.clone(this.vertexDefines),e.fragmentDefines=Yo.clone(this.fragmentDefines),e.enableTexture(this.getEnabledTextures()),e.precision=this.precision,e},define:function(e,n,t){var r=this.vertexDefines,i=this.fragmentDefines;"vertex"!==e&&"fragment"!==e&&"both"!==e&&arguments.length<3&&(t=n,n=e,e="both"),t=t??null,("vertex"===e||"both"===e)&&r[n]!==t&&(r[n]=t,this._programKey=""),("fragment"===e||"both"===e)&&i[n]!==t&&(i[n]=t,"both"!==e&&(this._programKey=""))},undefine:function(e,n){"vertex"!==e&&"fragment"!==e&&"both"!==e&&arguments.length<2&&(n=e,e="both"),("vertex"===e||"both"===e)&&this.isDefined("vertex",n)&&(delete this.vertexDefines[n],this._programKey=""),("fragment"===e||"both"===e)&&this.isDefined("fragment",n)&&(delete this.fragmentDefines[n],"both"!==e&&(this._programKey=""))},isDefined:function(e,n){switch(e){case"vertex":return void 0!==this.vertexDefines[n];case"fragment":return void 0!==this.fragmentDefines[n]}},getDefine:function(e,n){switch(e){case"vertex":return this.vertexDefines[n];case"fragment":return this.fragmentDefines[n]}},enableTexture:function(e){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.enableTexture(e[n]);else{var t=this._textureStatus[e];t&&(t.enabled||(t.enabled=!0,this._programKey=""))}},enableTexturesAll:function(){var e=this._textureStatus;for(var n in e)e[n].enabled=!0;this._programKey=""},disableTexture:function(e){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.disableTexture(e[n]);else{var t=this._textureStatus[e];t&&(!t.enabled||(t.enabled=!1,this._programKey=""))}},disableTexturesAll:function(){var e=this._textureStatus;for(var n in e)e[n].enabled=!1;this._programKey=""},isTextureEnabled:function(e){var n=this._textureStatus;return!!n[e]&&n[e].enabled},getEnabledTextures:function(){var e=[],n=this._textureStatus;for(var t in n)n[t].enabled&&e.push(t);return e},dirtyDefines:function(){this._programKey=""},getProgramKey:function(){return this._programKey||(this._programKey=function Gee(e,n,t){t.sort();for(var r=[],i=0;i<t.length;i++)r.push(t[i]);var d=zW(e)+"\n"+zW(n)+"\n"+r.join("\n");if(XB[d])return XB[d];var p=Yo.genGUID();return XB[d]=p,p}(this.vertexDefines,this.fragmentDefines,this.getEnabledTextures())),this._programKey}});const Eu=Wee;var e,cI=1e-6,Xo=Array,Ey=Math.random,Gr={create:function(){var e=new Xo(2);return e[0]=0,e[1]=0,e},clone:function(e){var n=new Xo(2);return n[0]=e[0],n[1]=e[1],n},fromValues:function(e,n){var t=new Xo(2);return t[0]=e,t[1]=n,t},copy:function(e,n){return e[0]=n[0],e[1]=n[1],e},set:function(e,n,t){return e[0]=n,e[1]=t,e},add:function(e,n,t){return e[0]=n[0]+t[0],e[1]=n[1]+t[1],e},subtract:function(e,n,t){return e[0]=n[0]-t[0],e[1]=n[1]-t[1],e}};Gr.sub=Gr.subtract,Gr.multiply=function(e,n,t){return e[0]=n[0]*t[0],e[1]=n[1]*t[1],e},Gr.mul=Gr.multiply,Gr.divide=function(e,n,t){return e[0]=n[0]/t[0],e[1]=n[1]/t[1],e},Gr.div=Gr.divide,Gr.min=function(e,n,t){return e[0]=Math.min(n[0],t[0]),e[1]=Math.min(n[1],t[1]),e},Gr.max=function(e,n,t){return e[0]=Math.max(n[0],t[0]),e[1]=Math.max(n[1],t[1]),e},Gr.scale=function(e,n,t){return e[0]=n[0]*t,e[1]=n[1]*t,e},Gr.scaleAndAdd=function(e,n,t,r){return e[0]=n[0]+t[0]*r,e[1]=n[1]+t[1]*r,e},Gr.distance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1];return Math.sqrt(t*t+r*r)},Gr.dist=Gr.distance,Gr.squaredDistance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1];return t*t+r*r},Gr.sqrDist=Gr.squaredDistance,Gr.length=function(e){var n=e[0],t=e[1];return Math.sqrt(n*n+t*t)},Gr.len=Gr.length,Gr.squaredLength=function(e){var n=e[0],t=e[1];return n*n+t*t},Gr.sqrLen=Gr.squaredLength,Gr.negate=function(e,n){return e[0]=-n[0],e[1]=-n[1],e},Gr.inverse=function(e,n){return e[0]=1/n[0],e[1]=1/n[1],e},Gr.normalize=function(e,n){var t=n[0],r=n[1],i=t*t+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=n[0]*i,e[1]=n[1]*i),e},Gr.dot=function(e,n){return e[0]*n[0]+e[1]*n[1]},Gr.cross=function(e,n,t){var r=n[0]*t[1]-n[1]*t[0];return e[0]=e[1]=0,e[2]=r,e},Gr.lerp=function(e,n,t,r){var i=n[0],s=n[1];return e[0]=i+r*(t[0]-i),e[1]=s+r*(t[1]-s),e},Gr.random=function(e,n){n=n||1;var t=2*GLMAT_RANDOM()*Math.PI;return e[0]=Math.cos(t)*n,e[1]=Math.sin(t)*n,e},Gr.transformMat2=function(e,n,t){var r=n[0],i=n[1];return e[0]=t[0]*r+t[2]*i,e[1]=t[1]*r+t[3]*i,e},Gr.transformMat2d=function(e,n,t){var r=n[0],i=n[1];return e[0]=t[0]*r+t[2]*i+t[4],e[1]=t[1]*r+t[3]*i+t[5],e},Gr.transformMat3=function(e,n,t){var r=n[0],i=n[1];return e[0]=t[0]*r+t[3]*i+t[6],e[1]=t[1]*r+t[4]*i+t[7],e},Gr.transformMat4=function(e,n,t){var r=n[0],i=n[1];return e[0]=t[0]*r+t[4]*i+t[12],e[1]=t[1]*r+t[5]*i+t[13],e},Gr.forEach=(e=Gr.create(),function(n,t,r,i,s,d){var p,v;for(t||(t=2),r||(r=0),v=i?Math.min(i*t+r,n.length):n.length,p=r;p<v;p+=t)e[0]=n[p],e[1]=n[p+1],s(e,e,d),n[p]=e[0],n[p+1]=e[1];return n});const mr=Gr;var ni=function(e,n){this.array=mr.fromValues(e=e||0,n=n||0),this._dirty=!0};if(ni.prototype={constructor:ni,add:function(e){return mr.add(this.array,this.array,e.array),this._dirty=!0,this},set:function(e,n){return this.array[0]=e,this.array[1]=n,this._dirty=!0,this},setArray:function(e){return this.array[0]=e[0],this.array[1]=e[1],this._dirty=!0,this},clone:function(){return new ni(this.x,this.y)},copy:function(e){return mr.copy(this.array,e.array),this._dirty=!0,this},cross:function(e,n){return mr.cross(e.array,this.array,n.array),e._dirty=!0,this},dist:function(e){return mr.dist(this.array,e.array)},distance:function(e){return mr.distance(this.array,e.array)},div:function(e){return mr.div(this.array,this.array,e.array),this._dirty=!0,this},divide:function(e){return mr.divide(this.array,this.array,e.array),this._dirty=!0,this},dot:function(e){return mr.dot(this.array,e.array)},len:function(){return mr.len(this.array)},length:function(){return mr.length(this.array)},lerp:function(e,n,t){return mr.lerp(this.array,e.array,n.array,t),this._dirty=!0,this},min:function(e){return mr.min(this.array,this.array,e.array),this._dirty=!0,this},max:function(e){return mr.max(this.array,this.array,e.array),this._dirty=!0,this},mul:function(e){return mr.mul(this.array,this.array,e.array),this._dirty=!0,this},multiply:function(e){return mr.multiply(this.array,this.array,e.array),this._dirty=!0,this},negate:function(){return mr.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return mr.normalize(this.array,this.array),this._dirty=!0,this},random:function(e){return mr.random(this.array,e),this._dirty=!0,this},scale:function(e){return mr.scale(this.array,this.array,e),this._dirty=!0,this},scaleAndAdd:function(e,n){return mr.scaleAndAdd(this.array,this.array,e.array,n),this._dirty=!0,this},sqrDist:function(e){return mr.sqrDist(this.array,e.array)},squaredDistance:function(e){return mr.squaredDistance(this.array,e.array)},sqrLen:function(){return mr.sqrLen(this.array)},squaredLength:function(){return mr.squaredLength(this.array)},sub:function(e){return mr.sub(this.array,this.array,e.array),this._dirty=!0,this},subtract:function(e){return mr.subtract(this.array,this.array,e.array),this._dirty=!0,this},transformMat2:function(e){return mr.transformMat2(this.array,this.array,e.array),this._dirty=!0,this},transformMat2d:function(e){return mr.transformMat2d(this.array,this.array,e.array),this._dirty=!0,this},transformMat3:function(e){return mr.transformMat3(this.array,this.array,e.array),this._dirty=!0,this},transformMat4:function(e){return mr.transformMat4(this.array,this.array,e.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Object.defineProperty){var HW=ni.prototype;Object.defineProperty(HW,"x",{get:function(){return this.array[0]},set:function(e){this.array[0]=e,this._dirty=!0}}),Object.defineProperty(HW,"y",{get:function(){return this.array[1]},set:function(e){this.array[1]=e,this._dirty=!0}})}ni.add=function(e,n,t){return mr.add(e.array,n.array,t.array),e._dirty=!0,e},ni.set=function(e,n,t){return mr.set(e.array,n,t),e._dirty=!0,e},ni.copy=function(e,n){return mr.copy(e.array,n.array),e._dirty=!0,e},ni.cross=function(e,n,t){return mr.cross(e.array,n.array,t.array),e._dirty=!0,e},ni.distance=ni.dist=function(e,n){return mr.distance(e.array,n.array)},ni.divide=ni.div=function(e,n,t){return mr.divide(e.array,n.array,t.array),e._dirty=!0,e},ni.dot=function(e,n){return mr.dot(e.array,n.array)},ni.len=function(e){return mr.length(e.array)},ni.lerp=function(e,n,t,r){return mr.lerp(e.array,n.array,t.array,r),e._dirty=!0,e},ni.min=function(e,n,t){return mr.min(e.array,n.array,t.array),e._dirty=!0,e},ni.max=function(e,n,t){return mr.max(e.array,n.array,t.array),e._dirty=!0,e},ni.multiply=ni.mul=function(e,n,t){return mr.multiply(e.array,n.array,t.array),e._dirty=!0,e},ni.negate=function(e,n){return mr.negate(e.array,n.array),e._dirty=!0,e},ni.normalize=function(e,n){return mr.normalize(e.array,n.array),e._dirty=!0,e},ni.random=function(e,n){return mr.random(e.array,n),e._dirty=!0,e},ni.scale=function(e,n,t){return mr.scale(e.array,n.array,t),e._dirty=!0,e},ni.scaleAndAdd=function(e,n,t,r){return mr.scaleAndAdd(e.array,n.array,t.array,r),e._dirty=!0,e},ni.squaredDistance=ni.sqrDist=function(e,n){return mr.sqrDist(e.array,n.array)},ni.squaredLength=ni.sqrLen=function(e){return mr.sqrLen(e.array)},ni.subtract=ni.sub=function(e,n,t){return mr.subtract(e.array,n.array,t.array),e._dirty=!0,e},ni.transformMat2=function(e,n,t){return mr.transformMat2(e.array,n.array,t.array),e._dirty=!0,e},ni.transformMat2d=function(e,n,t){return mr.transformMat2d(e.array,n.array,t.array),e._dirty=!0,e},ni.transformMat3=function(e,n,t){return mr.transformMat3(e.array,n.array,t.array),e._dirty=!0,e},ni.transformMat4=function(e,n,t){return mr.transformMat4(e.array,n.array,t.array),e._dirty=!0,e};const Hl=ni;var WW={};function jee(e){for(var n=e.split("\n"),t=0,r=n.length;t<r;t++)n[t]=t+1+": "+n[t];return n.join("\n")}function jW(e,n,t){if(!e.getShaderParameter(n,e.COMPILE_STATUS))return[e.getShaderInfoLog(n),jee(t)].join("\n")}var ZW=new oo.Float32Array(16),Zee=Us.extend({uniformSemantics:{},attributes:{}},function(){this._locations={},this._textureSlot=0,this._program=null},{bind:function(e){this._textureSlot=0,e.gl.useProgram(this._program)},hasUniform:function(e){return null!=this._locations[e]},useTextureSlot:function(e,n,t){n&&(e.gl.activeTexture(e.gl.TEXTURE0+t),n.isRenderable()?n.bind(e):n.unbind(e))},currentTextureSlot:function(){return this._textureSlot},resetTextureSlot:function(e){this._textureSlot=e||0},takeCurrentTextureSlot:function(e,n){var t=this._textureSlot;return this.useTextureSlot(e,n,t),this._textureSlot++,t},setUniform:function(e,n,t,r){var s=this._locations[t];if(null==s)return!1;switch(n){case"m4":if(!(r instanceof Float32Array)){for(var d=0;d<r.length;d++)ZW[d]=r[d];r=ZW}e.uniformMatrix4fv(s,!1,r);break;case"2i":e.uniform2i(s,r[0],r[1]);break;case"2f":e.uniform2f(s,r[0],r[1]);break;case"3i":e.uniform3i(s,r[0],r[1],r[2]);break;case"3f":e.uniform3f(s,r[0],r[1],r[2]);break;case"4i":e.uniform4i(s,r[0],r[1],r[2],r[3]);break;case"4f":e.uniform4f(s,r[0],r[1],r[2],r[3]);break;case"1i":e.uniform1i(s,r);break;case"1f":e.uniform1f(s,r);break;case"1fv":e.uniform1fv(s,r);break;case"1iv":e.uniform1iv(s,r);break;case"2iv":e.uniform2iv(s,r);break;case"2fv":e.uniform2fv(s,r);break;case"3iv":e.uniform3iv(s,r);break;case"3fv":e.uniform3fv(s,r);break;case"4iv":e.uniform4iv(s,r);break;case"4fv":e.uniform4fv(s,r);break;case"m2":case"m2v":e.uniformMatrix2fv(s,!1,r);break;case"m3":case"m3v":e.uniformMatrix3fv(s,!1,r);break;case"m4v":if(Array.isArray(r)&&Array.isArray(r[0])){var p=new oo.Float32Array(16*r.length),v=0;for(d=0;d<r.length;d++)for(var _=r[d],C=0;C<16;C++)p[v++]=_[C];e.uniformMatrix4fv(s,!1,p)}else e.uniformMatrix4fv(s,!1,r)}return!0},setUniformOfSemantic:function(e,n,t){var r=this.uniformSemantics[n];return!!r&&this.setUniform(e,r.type,r.symbol,t)},enableAttributes:function(e,n,t){var d,r=e.gl,i=this._program,s=this._locations;(d=t?t.__enabledAttributeList:WW[e.__uid__])||(d=t?t.__enabledAttributeList=[]:WW[e.__uid__]=[]);for(var p=[],v=0;v<n.length;v++){var _=n[v];if(this.attributes[_]){var C=s[_];if(null==C){if(-1===(C=r.getAttribLocation(i,_))){p[v]=-1;continue}s[_]=C}p[v]=C,d[C]=d[C]?2:1}else p[v]=-1}for(v=0;v<d.length;v++)switch(d[v]){case 1:r.enableVertexAttribArray(v),d[v]=3;break;case 2:d[v]=3;break;case 3:r.disableVertexAttribArray(v),d[v]=0}return p},getAttribLocation:function(e,n){var t=this._locations,r=t[n];return null==r&&(r=e.getAttribLocation(this._program,n),t[n]=r),r},buildProgram:function(e,n,t,r){var i=e.createShader(e.VERTEX_SHADER),s=e.createProgram();e.shaderSource(i,t),e.compileShader(i);var d=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(d,r),e.compileShader(d);var p=jW(e,i,t);if(p||(p=jW(e,d,r)))return p;if(e.attachShader(s,i),e.attachShader(s,d),n.attributeSemantics.POSITION)e.bindAttribLocation(s,0,n.attributeSemantics.POSITION.symbol);else{var v=Object.keys(this.attributes);e.bindAttribLocation(s,0,v[0])}if(e.linkProgram(s),e.deleteShader(i),e.deleteShader(d),this._program=s,this.vertexCode=t,this.fragmentCode=r,!e.getProgramParameter(s,e.LINK_STATUS))return"Could not link program\n"+e.getProgramInfoLog(s);for(var _=0;_<n.uniforms.length;_++){var C=n.uniforms[_];this._locations[C]=e.getUniformLocation(s,C)}}});const Yee=Zee;var Xee=/for\s*?\(int\s*?_idx_\s*\=\s*([\w-]+)\;\s*_idx_\s*<\s*([\w-]+);\s*_idx_\s*\+\+\s*\)\s*\{\{([\s\S]+?)(?=\}\})\}\}/g;function YW(e,n,t){var i={};for(var s in t)i[s+"_COUNT"]=t[s];return e.replace(Xee,function r(d,p,v,_){var C="";isNaN(p)&&(p=p in n?n[p]:i[p]),isNaN(v)&&(v=v in n?n[v]:i[v]);for(var S=parseInt(p);S<parseInt(v);S++)C+="{"+_.replace(/float\s*\(\s*_idx_\s*\)/g,S.toFixed(1)).replace(/_idx_/g,S)+"}";return C})}function KB(e,n,t){var r=[];if(n)for(var i in n){var s=n[i];s>0&&r.push("#define "+i.toUpperCase()+"_COUNT "+s)}if(t)for(var d=0;d<t.length;d++)r.push("#define "+(p=t[d]).toUpperCase()+"_ENABLED");for(var p in e){var v=e[p];r.push(null===v?"#define "+p:"#define "+p+" "+v.toString())}return r.join("\n")}function XW(e){this._renderer=e,this._cache={}}XW.prototype.getProgram=function(e,n,t){var r=this._cache,i=e.isSkinnedMesh&&e.isSkinnedMesh(),s=e.isInstancedMesh&&e.isInstancedMesh(),d="s"+n.shader.shaderID+"m"+n.getProgramKey();if(t&&(d+="se"+t.getProgramKey(e.lightGroup)),i&&(d+=",sk"+e.joints.length),s&&(d+=",is"),Be=r[d])return Be;var p=t?t.getLightsNumbers(e.lightGroup):{},v=this._renderer,_=v.gl,C=n.getEnabledTextures(),S="";if(i){var k={SKINNING:null,JOINT_COUNT:e.joints.length};e.joints.length>v.getMaxJointNumber()&&(k.USE_SKIN_MATRICES_TEXTURE=null),S+="\n"+KB(k)+"\n"}s&&(S+="\n#define INSTANCING\n");var H=S+KB(n.vertexDefines,p,C),ne=S+KB(n.fragmentDefines,p,C),pe=H+"\n"+n.shader.vertex,Me=["OES_standard_derivatives","EXT_shader_texture_lod"].filter(function(rt){return null!=v.getGLExtension(rt)});Me.indexOf("EXT_shader_texture_lod")>=0&&(ne+="\n#define SUPPORT_TEXTURE_LOD"),Me.indexOf("OES_standard_derivatives")>=0&&(ne+="\n#define SUPPORT_STANDARD_DERIVATIVES");var Be,Re=function $ee(e){for(var n=[],t=0;t<e.length;t++)n.push("#extension GL_"+e[t]+" : enable");return n.join("\n")}(Me)+"\n"+function Kee(e){return["precision",e,"float"].join(" ")+";\n"+["precision",e,"int"].join(" ")+";\n"+["precision",e,"sampler2D"].join(" ")+";\n"}(n.precision)+"\n"+ne+"\n"+n.shader.fragment,Fe=YW(pe,n.vertexDefines,p),Oe=YW(Re,n.fragmentDefines,p);(Be=new Yee).uniformSemantics=n.shader.uniformSemantics,Be.attributes=n.shader.attributes;var nt=Be.buildProgram(_,n.shader,Fe,Oe);return Be.__error=nt,r[d]=Be,Be};const Qee=XW;var $W=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g,qee=/attribute\s+(float|int|vec2|vec3|vec4)\s+([\s\S]*?);/g,KW=/#define\s+(\w+)?(\s+[\d-.]+)?\s*;?\s*\n/g,Jee={bool:"1i",int:"1i",sampler2D:"t",samplerCube:"t",float:"1f",vec2:"2f",vec3:"3f",vec4:"4f",ivec2:"2i",ivec3:"3i",ivec4:"4i",mat2:"m2",mat3:"m3",mat4:"m4"};function eh(e){for(var n=[],t=0;t<e;t++)n[t]=0;return n}var QW={bool:function(){return!0},int:function(){return 0},float:function(){return 0},sampler2D:function(){return null},samplerCube:function(){return null},vec2:function(){return eh(2)},vec3:function(){return eh(3)},vec4:function(){return eh(4)},ivec2:function(){return eh(2)},ivec3:function(){return eh(3)},ivec4:function(){return eh(4)},mat2:function(){return eh(4)},mat3:function(){return eh(9)},mat4:function(){return eh(16)},array:function(){return[]}},QB=["POSITION","NORMAL","BINORMAL","TANGENT","TEXCOORD","TEXCOORD_0","TEXCOORD_1","COLOR","JOINT","WEIGHT"],qW=["SKIN_MATRIX","VIEWPORT_SIZE","VIEWPORT","DEVICEPIXELRATIO","WINDOW_SIZE","NEAR","FAR","TIME"],JW=["WORLD","VIEW","PROJECTION","WORLDVIEW","VIEWPROJECTION","WORLDVIEWPROJECTION","WORLDINVERSE","VIEWINVERSE","PROJECTIONINVERSE","WORLDVIEWINVERSE","VIEWPROJECTIONINVERSE","WORLDVIEWPROJECTIONINVERSE","WORLDTRANSPOSE","VIEWTRANSPOSE","PROJECTIONTRANSPOSE","WORLDVIEWTRANSPOSE","VIEWPROJECTIONTRANSPOSE","WORLDVIEWPROJECTIONTRANSPOSE","WORLDINVERSETRANSPOSE","VIEWINVERSETRANSPOSE","PROJECTIONINVERSETRANSPOSE","WORLDVIEWINVERSETRANSPOSE","VIEWPROJECTIONINVERSETRANSPOSE","WORLDVIEWPROJECTIONINVERSETRANSPOSE"],ete={vec4:4,vec3:3,vec2:2,float:1},qB={},e8={};function t8(e){return e.replace(/[ \t]*\/\/.*\n/g,"").replace(/[ \t]*\/\*[\s\S]*?\*\//g,"")}function Ay(){console.error("Wrong uniform/attributes syntax")}function n8(e,n){for(var t=/[,=\(\):]/,r=n.replace(/:\s*\[\s*(.*)\s*\]/g,"="+e+"($1)").replace(/\s+/g,"").split(/(?=[,=\(\):])/g),i=[],s=0;s<r.length;s++)r[s].match(t)?i.push(r[s].charAt(0),r[s].slice(1)):i.push(r[s]);var pe,k=0,H={},ne=null;function Me(Oe){Oe||Ay();var Be=Oe.match(/\[(.*?)\]/);pe=Oe.replace(/\[(.*?)\]/,""),H[pe]={},Be&&(H[pe].isArray=!0,H[pe].arraySize=Be[1])}for(Me((r=i)[0]),s=1;s<r.length;s++){var Re=r[s];if(Re){if("="===Re){if(0!==k&&3!==k){Ay();break}k=1;continue}if(":"===Re){k=4;continue}if(","===Re){if(2===k){if(!(ne instanceof Array)){Ay();break}ne.push(+r[++s])}else k=5;continue}if(")"===Re){H[pe].value=new oo.Float32Array(ne),ne=null,k=5;continue}if("("===Re){if(2!==k){Ay();break}if(!(ne instanceof Array)){Ay();break}ne.push(+r[++s]);continue}if(Re.indexOf("vec")>=0){if(1!==k&&4!==k){Ay();break}k=2,ne=[];continue}if(1===k){H[pe].value="bool"===e?"true"===Re:parseFloat(Re),ne=null;continue}if(4===k){var Fe=Re;QB.indexOf(Fe)>=0||qW.indexOf(Fe)>=0||JW.indexOf(Fe)>=0?H[pe].semantic=Fe:"ignore"===Fe||"unconfigurable"===Fe?H[pe].ignore=!0:H[pe].value="bool"===e?"true"===Fe:parseFloat(Fe);continue}Me(Re),k=0}}return H}function yo(e,n){"object"==typeof e&&(n=e.fragment,e=e.vertex),e=t8(e),n=t8(n),this._shaderID=function tte(e,n){var t="vertex:"+e+"fragment:"+n;if(qB[t])return qB[t];var r=Yo.genGUID();return qB[t]=r,e8[r]={vertex:e,fragment:n},r}(e,n),this._vertexCode=yo.parseImport(e),this._fragmentCode=yo.parseImport(n),this.attributeSemantics={},this.matrixSemantics={},this.uniformSemantics={},this.matrixSemanticKeys=[],this.uniformTemplates={},this.attributes={},this.textures={},this.vertexDefines={},this.fragmentDefines={},this._parseAttributes(),this._parseUniforms(),this._parseDefines()}yo.prototype={constructor:yo,createUniforms:function(){var e={};for(var n in this.uniformTemplates){var t=this.uniformTemplates[n];e[n]={type:t.type,value:t.value()}}return e},_parseImport:function(){this._vertexCode=yo.parseImport(this.vertex),this._fragmentCode=yo.parseImport(this.fragment)},_addSemanticUniform:function(e,n,t){if(QB.indexOf(t)>=0)this.attributeSemantics[t]={symbol:e,type:n};else if(JW.indexOf(t)>=0){var r=!1,i=t;t.match(/TRANSPOSE$/)&&(r=!0,i=t.slice(0,-9)),this.matrixSemantics[t]={symbol:e,type:n,isTranspose:r,semanticNoTranspose:i}}else qW.indexOf(t)>=0&&(this.uniformSemantics[t]={symbol:e,type:n})},_addMaterialUniform:function(e,n,t,r,i,s){s[e]={type:t,value:i?QW.array:r||QW[n],semantic:null}},_parseUniforms:function(){var e={},n=this;function r(s){return null!=s?function(){return s}:null}function i(s,d,p){var v=n8(d,p),_=[];for(var C in v){var S=v[C],k=S.semantic,H=C,ne=Jee[d],pe=r(v[C].value);v[C].isArray&&(H+="["+v[C].arraySize+"]",ne+="v"),_.push(H),n._uniformList.push(C),S.ignore||(("sampler2D"===d||"samplerCube"===d)&&(n.textures[C]={shaderType:"fragment",type:d}),k?n._addSemanticUniform(C,ne,k):n._addMaterialUniform(C,d,ne,pe,v[C].isArray,e))}return _.length>0?"uniform "+d+" "+_.join(",")+";\n":""}this._uniformList=[],this._vertexCode=this._vertexCode.replace($W,i),this._fragmentCode=this._fragmentCode.replace($W,i),n.matrixSemanticKeys=Object.keys(this.matrixSemantics),this.uniformTemplates=e},_parseAttributes:function(){var e={},n=this;this._vertexCode=this._vertexCode.replace(qee,function t(r,i,s){var d=n8(i,s),p=ete[i]||1,v=[];for(var _ in d){var C=d[_].semantic;if(e[_]={type:"float",size:p,semantic:C||null},C){if(QB.indexOf(C)<0)throw new Error('Unkown semantic "'+C+'"');n.attributeSemantics[C]={symbol:_,type:i}}v.push(_)}return"attribute "+i+" "+v.join(",")+";\n"}),this.attributes=e},_parseDefines:function(){var e=this;function t(r,i,s){var d=e.fragmentDefines;return d[i]||(d[i]="false"!==s&&("true"===s||(s?isNaN(parseFloat(s))?s.trim():parseFloat(s):null))),""}this._vertexCode=this._vertexCode.replace(KW,t),this._fragmentCode=this._fragmentCode.replace(KW,t)},clone:function(){var e=e8[this._shaderID];return new yo(e.vertex,e.fragment)}},Object.defineProperty&&(Object.defineProperty(yo.prototype,"shaderID",{get:function(){return this._shaderID}}),Object.defineProperty(yo.prototype,"vertex",{get:function(){return this._vertexCode}}),Object.defineProperty(yo.prototype,"fragment",{get:function(){return this._fragmentCode}}),Object.defineProperty(yo.prototype,"uniforms",{get:function(){return this._uniformList}}));var nte=/(@import)\s*([0-9a-zA-Z_\-\.]*)/g;yo.parseImport=function(e){return e.replace(nte,function(i,t,r){return(i=yo.source(r))?yo.parseImport(i):(console.error('Shader chunk "'+r+'" not existed in library'),"")})};var rte=/(@export)\s*([0-9a-zA-Z_\-\.]*)\s*\n([\s\S]*?)@end/g;yo.import=function(e){e.replace(rte,function(n,t,r,s){if(s=s.replace(/(^[\s\t\xa0\u3000]+)|([\u3000\xa0\s\t]+\x24)/g,"")){for(var _,d=r.split("."),p=yo.codes,v=0;v<d.length-1;)p[_=d[v++]]||(p[_]={}),p=p[_];p[_=d[v]]=s}return s})},yo.codes={},yo.source=function(e){for(var n=e.split("."),t=yo.codes,r=0;t&&r<n.length;)t=t[n[r++]];return"string"!=typeof t?(console.error('Shader "'+e+'" not existed in library'),""):t};const Gn=yo,r8="@export clay.prez.vertex\nuniform mat4 WVP : WORLDVIEWPROJECTION;\nattribute vec3 pos : POSITION;\nattribute vec2 uv : TEXCOORD_0;\nuniform vec2 uvRepeat : [1.0, 1.0];\nuniform vec2 uvOffset : [0.0, 0.0];\n@import clay.chunk.skinning_header\n@import clay.chunk.instancing_header\nvarying vec2 v_Texcoord;\nvoid main()\n{\n vec4 P = vec4(pos, 1.0);\n#ifdef SKINNING\n @import clay.chunk.skin_matrix\n P = skinMatrixWS * P;\n#endif\n#ifdef INSTANCING\n @import clay.chunk.instancing_matrix\n P = instanceMat * P;\n#endif\n gl_Position = WVP * P;\n v_Texcoord = uv * uvRepeat + uvOffset;\n}\n@end\n@export clay.prez.fragment\nuniform sampler2D alphaMap;\nuniform float alphaCutoff: 0.0;\nvarying vec2 v_Texcoord;\nvoid main()\n{\n if (alphaCutoff > 0.0) {\n if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {\n discard;\n }\n }\n gl_FragColor = vec4(0.0,0.0,0.0,1.0);\n}\n@end";var Qi={create:function(){var e=new Xo(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},clone:function(e){var n=new Xo(16);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n},copy:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},transpose:function(e,n){if(e===n){var t=n[1],r=n[2],i=n[3],s=n[6],d=n[7],p=n[11];e[1]=n[4],e[2]=n[8],e[3]=n[12],e[4]=t,e[6]=n[9],e[7]=n[13],e[8]=r,e[9]=s,e[11]=n[14],e[12]=i,e[13]=d,e[14]=p}else e[0]=n[0],e[1]=n[4],e[2]=n[8],e[3]=n[12],e[4]=n[1],e[5]=n[5],e[6]=n[9],e[7]=n[13],e[8]=n[2],e[9]=n[6],e[10]=n[10],e[11]=n[14],e[12]=n[3],e[13]=n[7],e[14]=n[11],e[15]=n[15];return e},invert:function(e,n){var t=n[0],r=n[1],i=n[2],s=n[3],d=n[4],p=n[5],v=n[6],_=n[7],C=n[8],S=n[9],k=n[10],H=n[11],ne=n[12],pe=n[13],Me=n[14],Re=n[15],Fe=t*p-r*d,Oe=t*v-i*d,Be=t*_-s*d,nt=r*v-i*p,rt=r*_-s*p,Ct=i*_-s*v,mt=C*pe-S*ne,Ft=C*Me-k*ne,nn=C*Re-H*ne,Xt=S*Me-k*pe,pn=S*Re-H*pe,mn=k*Re-H*Me,on=Fe*mn-Oe*pn+Be*Xt+nt*nn-rt*Ft+Ct*mt;return on?(e[0]=(p*mn-v*pn+_*Xt)*(on=1/on),e[1]=(i*pn-r*mn-s*Xt)*on,e[2]=(pe*Ct-Me*rt+Re*nt)*on,e[3]=(k*rt-S*Ct-H*nt)*on,e[4]=(v*nn-d*mn-_*Ft)*on,e[5]=(t*mn-i*nn+s*Ft)*on,e[6]=(Me*Be-ne*Ct-Re*Oe)*on,e[7]=(C*Ct-k*Be+H*Oe)*on,e[8]=(d*pn-p*nn+_*mt)*on,e[9]=(r*nn-t*pn-s*mt)*on,e[10]=(ne*rt-pe*Be+Re*Fe)*on,e[11]=(S*Be-C*rt-H*Fe)*on,e[12]=(p*Ft-d*Xt-v*mt)*on,e[13]=(t*Xt-r*Ft+i*mt)*on,e[14]=(pe*Oe-ne*nt-Me*Fe)*on,e[15]=(C*nt-S*Oe+k*Fe)*on,e):null},adjoint:function(e,n){var t=n[0],r=n[1],i=n[2],s=n[3],d=n[4],p=n[5],v=n[6],_=n[7],C=n[8],S=n[9],k=n[10],H=n[11],ne=n[12],pe=n[13],Me=n[14],Re=n[15];return e[0]=p*(k*Re-H*Me)-S*(v*Re-_*Me)+pe*(v*H-_*k),e[1]=-(r*(k*Re-H*Me)-S*(i*Re-s*Me)+pe*(i*H-s*k)),e[2]=r*(v*Re-_*Me)-p*(i*Re-s*Me)+pe*(i*_-s*v),e[3]=-(r*(v*H-_*k)-p*(i*H-s*k)+S*(i*_-s*v)),e[4]=-(d*(k*Re-H*Me)-C*(v*Re-_*Me)+ne*(v*H-_*k)),e[5]=t*(k*Re-H*Me)-C*(i*Re-s*Me)+ne*(i*H-s*k),e[6]=-(t*(v*Re-_*Me)-d*(i*Re-s*Me)+ne*(i*_-s*v)),e[7]=t*(v*H-_*k)-d*(i*H-s*k)+C*(i*_-s*v),e[8]=d*(S*Re-H*pe)-C*(p*Re-_*pe)+ne*(p*H-_*S),e[9]=-(t*(S*Re-H*pe)-C*(r*Re-s*pe)+ne*(r*H-s*S)),e[10]=t*(p*Re-_*pe)-d*(r*Re-s*pe)+ne*(r*_-s*p),e[11]=-(t*(p*H-_*S)-d*(r*H-s*S)+C*(r*_-s*p)),e[12]=-(d*(S*Me-k*pe)-C*(p*Me-v*pe)+ne*(p*k-v*S)),e[13]=t*(S*Me-k*pe)-C*(r*Me-i*pe)+ne*(r*k-i*S),e[14]=-(t*(p*Me-v*pe)-d*(r*Me-i*pe)+ne*(r*v-i*p)),e[15]=t*(p*k-v*S)-d*(r*k-i*S)+C*(r*v-i*p),e},determinant:function(e){var n=e[0],t=e[1],r=e[2],i=e[3],s=e[4],d=e[5],p=e[6],v=e[7],_=e[8],C=e[9],S=e[10],k=e[11],H=e[12],ne=e[13],pe=e[14],Me=e[15];return(n*d-t*s)*(S*Me-k*pe)-(n*p-r*s)*(C*Me-k*ne)+(n*v-i*s)*(C*pe-S*ne)+(t*p-r*d)*(_*Me-k*H)-(t*v-i*d)*(_*pe-S*H)+(r*v-i*p)*(_*ne-C*H)},multiply:function(e,n,t){var r=n[0],i=n[1],s=n[2],d=n[3],p=n[4],v=n[5],_=n[6],C=n[7],S=n[8],k=n[9],H=n[10],ne=n[11],pe=n[12],Me=n[13],Re=n[14],Fe=n[15],Oe=t[0],Be=t[1],nt=t[2],rt=t[3];return e[0]=Oe*r+Be*p+nt*S+rt*pe,e[1]=Oe*i+Be*v+nt*k+rt*Me,e[2]=Oe*s+Be*_+nt*H+rt*Re,e[3]=Oe*d+Be*C+nt*ne+rt*Fe,e[4]=(Oe=t[4])*r+(Be=t[5])*p+(nt=t[6])*S+(rt=t[7])*pe,e[5]=Oe*i+Be*v+nt*k+rt*Me,e[6]=Oe*s+Be*_+nt*H+rt*Re,e[7]=Oe*d+Be*C+nt*ne+rt*Fe,e[8]=(Oe=t[8])*r+(Be=t[9])*p+(nt=t[10])*S+(rt=t[11])*pe,e[9]=Oe*i+Be*v+nt*k+rt*Me,e[10]=Oe*s+Be*_+nt*H+rt*Re,e[11]=Oe*d+Be*C+nt*ne+rt*Fe,e[12]=(Oe=t[12])*r+(Be=t[13])*p+(nt=t[14])*S+(rt=t[15])*pe,e[13]=Oe*i+Be*v+nt*k+rt*Me,e[14]=Oe*s+Be*_+nt*H+rt*Re,e[15]=Oe*d+Be*C+nt*ne+rt*Fe,e},multiplyAffine:function(e,n,t){var r=n[0],i=n[1],s=n[2],d=n[4],p=n[5],v=n[6],_=n[8],C=n[9],S=n[10],k=n[12],H=n[13],ne=n[14],pe=t[0],Me=t[1],Re=t[2];return e[0]=pe*r+Me*d+Re*_,e[1]=pe*i+Me*p+Re*C,e[2]=pe*s+Me*v+Re*S,e[4]=(pe=t[4])*r+(Me=t[5])*d+(Re=t[6])*_,e[5]=pe*i+Me*p+Re*C,e[6]=pe*s+Me*v+Re*S,e[8]=(pe=t[8])*r+(Me=t[9])*d+(Re=t[10])*_,e[9]=pe*i+Me*p+Re*C,e[10]=pe*s+Me*v+Re*S,e[12]=(pe=t[12])*r+(Me=t[13])*d+(Re=t[14])*_+k,e[13]=pe*i+Me*p+Re*C+H,e[14]=pe*s+Me*v+Re*S+ne,e}};Qi.mul=Qi.multiply,Qi.mulAffine=Qi.multiplyAffine,Qi.translate=function(e,n,t){var d,p,v,_,C,S,k,H,ne,pe,Me,Re,r=t[0],i=t[1],s=t[2];return n===e?(e[12]=n[0]*r+n[4]*i+n[8]*s+n[12],e[13]=n[1]*r+n[5]*i+n[9]*s+n[13],e[14]=n[2]*r+n[6]*i+n[10]*s+n[14],e[15]=n[3]*r+n[7]*i+n[11]*s+n[15]):(p=n[1],v=n[2],_=n[3],C=n[4],S=n[5],k=n[6],H=n[7],ne=n[8],pe=n[9],Me=n[10],Re=n[11],e[0]=d=n[0],e[1]=p,e[2]=v,e[3]=_,e[4]=C,e[5]=S,e[6]=k,e[7]=H,e[8]=ne,e[9]=pe,e[10]=Me,e[11]=Re,e[12]=d*r+C*i+ne*s+n[12],e[13]=p*r+S*i+pe*s+n[13],e[14]=v*r+k*i+Me*s+n[14],e[15]=_*r+H*i+Re*s+n[15]),e},Qi.scale=function(e,n,t){var r=t[0],i=t[1],s=t[2];return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=n[3]*r,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=n[7]*i,e[8]=n[8]*s,e[9]=n[9]*s,e[10]=n[10]*s,e[11]=n[11]*s,e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e},Qi.rotate=function(e,n,t,r){var v,_,C,S,k,H,ne,pe,Me,Re,Fe,Oe,Be,nt,rt,Ct,mt,Ft,nn,Xt,pn,mn,on,Cn,i=r[0],s=r[1],d=r[2],p=Math.sqrt(i*i+s*s+d*d);return Math.abs(p)<cI?null:(i*=p=1/p,s*=p,d*=p,v=Math.sin(t),_=Math.cos(t),k=n[1],H=n[2],ne=n[3],Me=n[5],Re=n[6],Fe=n[7],Be=n[9],nt=n[10],rt=n[11],nn=i*s*(C=1-_)-d*v,Xt=s*s*C+_,pn=d*s*C+i*v,mn=i*d*C+s*v,on=s*d*C-i*v,Cn=d*d*C+_,e[0]=(S=n[0])*(Ct=i*i*C+_)+(pe=n[4])*(mt=s*i*C+d*v)+(Oe=n[8])*(Ft=d*i*C-s*v),e[1]=k*Ct+Me*mt+Be*Ft,e[2]=H*Ct+Re*mt+nt*Ft,e[3]=ne*Ct+Fe*mt+rt*Ft,e[4]=S*nn+pe*Xt+Oe*pn,e[5]=k*nn+Me*Xt+Be*pn,e[6]=H*nn+Re*Xt+nt*pn,e[7]=ne*nn+Fe*Xt+rt*pn,e[8]=S*mn+pe*on+Oe*Cn,e[9]=k*mn+Me*on+Be*Cn,e[10]=H*mn+Re*on+nt*Cn,e[11]=ne*mn+Fe*on+rt*Cn,n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e)},Qi.rotateX=function(e,n,t){var r=Math.sin(t),i=Math.cos(t),s=n[4],d=n[5],p=n[6],v=n[7],_=n[8],C=n[9],S=n[10],k=n[11];return n!==e&&(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[4]=s*i+_*r,e[5]=d*i+C*r,e[6]=p*i+S*r,e[7]=v*i+k*r,e[8]=_*i-s*r,e[9]=C*i-d*r,e[10]=S*i-p*r,e[11]=k*i-v*r,e},Qi.rotateY=function(e,n,t){var r=Math.sin(t),i=Math.cos(t),s=n[0],d=n[1],p=n[2],v=n[3],_=n[8],C=n[9],S=n[10],k=n[11];return n!==e&&(e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[0]=s*i-_*r,e[1]=d*i-C*r,e[2]=p*i-S*r,e[3]=v*i-k*r,e[8]=s*r+_*i,e[9]=d*r+C*i,e[10]=p*r+S*i,e[11]=v*r+k*i,e},Qi.rotateZ=function(e,n,t){var r=Math.sin(t),i=Math.cos(t),s=n[0],d=n[1],p=n[2],v=n[3],_=n[4],C=n[5],S=n[6],k=n[7];return n!==e&&(e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[0]=s*i+_*r,e[1]=d*i+C*r,e[2]=p*i+S*r,e[3]=v*i+k*r,e[4]=_*i-s*r,e[5]=C*i-d*r,e[6]=S*i-p*r,e[7]=k*i-v*r,e},Qi.fromRotationTranslation=function(e,n,t){var r=n[0],i=n[1],s=n[2],d=n[3],p=r+r,v=i+i,_=s+s,C=r*p,S=r*v,k=r*_,H=i*v,ne=i*_,pe=s*_,Me=d*p,Re=d*v,Fe=d*_;return e[0]=1-(H+pe),e[1]=S+Fe,e[2]=k-Re,e[3]=0,e[4]=S-Fe,e[5]=1-(C+pe),e[6]=ne+Me,e[7]=0,e[8]=k+Re,e[9]=ne-Me,e[10]=1-(C+H),e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},Qi.fromQuat=function(e,n){var t=n[0],r=n[1],i=n[2],s=n[3],d=t+t,p=r+r,v=i+i,_=t*d,C=r*d,S=r*p,k=i*d,H=i*p,ne=i*v,pe=s*d,Me=s*p,Re=s*v;return e[0]=1-S-ne,e[1]=C+Re,e[2]=k-Me,e[3]=0,e[4]=C-Re,e[5]=1-_-ne,e[6]=H+pe,e[7]=0,e[8]=k+Me,e[9]=H-pe,e[10]=1-_-S,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},Qi.frustum=function(e,n,t,r,i,s,d){var p=1/(t-n),v=1/(i-r),_=1/(s-d);return e[0]=2*s*p,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*v,e[6]=0,e[7]=0,e[8]=(t+n)*p,e[9]=(i+r)*v,e[10]=(d+s)*_,e[11]=-1,e[12]=0,e[13]=0,e[14]=d*s*2*_,e[15]=0,e},Qi.perspective=function(e,n,t,r,i){var s=1/Math.tan(n/2),d=1/(r-i);return e[0]=s/t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*d,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*d,e[15]=0,e},Qi.ortho=function(e,n,t,r,i,s,d){var p=1/(n-t),v=1/(r-i),_=1/(s-d);return e[0]=-2*p,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*v,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*_,e[11]=0,e[12]=(n+t)*p,e[13]=(i+r)*v,e[14]=(d+s)*_,e[15]=1,e},Qi.lookAt=function(e,n,t,r){var i,s,d,p,v,_,C,S,k,H,ne=n[0],pe=n[1],Me=n[2],Re=r[0],Fe=r[1],Oe=r[2],Be=t[0],nt=t[1],rt=t[2];return Math.abs(ne-Be)<cI&&Math.abs(pe-nt)<cI&&Math.abs(Me-rt)<cI?Qi.identity(e):(C=ne-Be,S=pe-nt,k=Me-rt,i=Fe*(k*=H=1/Math.sqrt(C*C+S*S+k*k))-Oe*(S*=H),s=Oe*(C*=H)-Re*k,d=Re*S-Fe*C,(H=Math.sqrt(i*i+s*s+d*d))?(i*=H=1/H,s*=H,d*=H):(i=0,s=0,d=0),p=S*d-k*s,v=k*i-C*d,_=C*s-S*i,(H=Math.sqrt(p*p+v*v+_*_))?(p*=H=1/H,v*=H,_*=H):(p=0,v=0,_=0),e[0]=i,e[1]=p,e[2]=C,e[3]=0,e[4]=s,e[5]=v,e[6]=S,e[7]=0,e[8]=d,e[9]=_,e[10]=k,e[11]=0,e[12]=-(i*ne+s*pe+d*Me),e[13]=-(p*ne+v*pe+_*Me),e[14]=-(C*ne+S*pe+k*Me),e[15]=1,e)},Qi.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))};const Tn=Qi;var Cr={create:function(){var e=new Xo(3);return e[0]=0,e[1]=0,e[2]=0,e},clone:function(e){var n=new Xo(3);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n},fromValues:function(e,n,t){var r=new Xo(3);return r[0]=e,r[1]=n,r[2]=t,r},copy:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e},set:function(e,n,t,r){return e[0]=n,e[1]=t,e[2]=r,e},add:function(e,n,t){return e[0]=n[0]+t[0],e[1]=n[1]+t[1],e[2]=n[2]+t[2],e},subtract:function(e,n,t){return e[0]=n[0]-t[0],e[1]=n[1]-t[1],e[2]=n[2]-t[2],e}};Cr.sub=Cr.subtract,Cr.multiply=function(e,n,t){return e[0]=n[0]*t[0],e[1]=n[1]*t[1],e[2]=n[2]*t[2],e},Cr.mul=Cr.multiply,Cr.divide=function(e,n,t){return e[0]=n[0]/t[0],e[1]=n[1]/t[1],e[2]=n[2]/t[2],e},Cr.div=Cr.divide,Cr.min=function(e,n,t){return e[0]=Math.min(n[0],t[0]),e[1]=Math.min(n[1],t[1]),e[2]=Math.min(n[2],t[2]),e},Cr.max=function(e,n,t){return e[0]=Math.max(n[0],t[0]),e[1]=Math.max(n[1],t[1]),e[2]=Math.max(n[2],t[2]),e},Cr.scale=function(e,n,t){return e[0]=n[0]*t,e[1]=n[1]*t,e[2]=n[2]*t,e},Cr.scaleAndAdd=function(e,n,t,r){return e[0]=n[0]+t[0]*r,e[1]=n[1]+t[1]*r,e[2]=n[2]+t[2]*r,e},Cr.distance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1],i=n[2]-e[2];return Math.sqrt(t*t+r*r+i*i)},Cr.dist=Cr.distance,Cr.squaredDistance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1],i=n[2]-e[2];return t*t+r*r+i*i},Cr.sqrDist=Cr.squaredDistance,Cr.length=function(e){var n=e[0],t=e[1],r=e[2];return Math.sqrt(n*n+t*t+r*r)},Cr.len=Cr.length,Cr.squaredLength=function(e){var n=e[0],t=e[1],r=e[2];return n*n+t*t+r*r},Cr.sqrLen=Cr.squaredLength,Cr.negate=function(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e},Cr.inverse=function(e,n){return e[0]=1/n[0],e[1]=1/n[1],e[2]=1/n[2],e},Cr.normalize=function(e,n){var t=n[0],r=n[1],i=n[2],s=t*t+r*r+i*i;return s>0&&(s=1/Math.sqrt(s),e[0]=n[0]*s,e[1]=n[1]*s,e[2]=n[2]*s),e},Cr.dot=function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]},Cr.cross=function(e,n,t){var r=n[0],i=n[1],s=n[2],d=t[0],p=t[1],v=t[2];return e[0]=i*v-s*p,e[1]=s*d-r*v,e[2]=r*p-i*d,e},Cr.lerp=function(e,n,t,r){var i=n[0],s=n[1],d=n[2];return e[0]=i+r*(t[0]-i),e[1]=s+r*(t[1]-s),e[2]=d+r*(t[2]-d),e},Cr.random=function(e,n){n=n||1;var t=2*Ey()*Math.PI,r=2*Ey()-1,i=Math.sqrt(1-r*r)*n;return e[0]=Math.cos(t)*i,e[1]=Math.sin(t)*i,e[2]=r*n,e},Cr.transformMat4=function(e,n,t){var r=n[0],i=n[1],s=n[2],d=t[3]*r+t[7]*i+t[11]*s+t[15];return e[0]=(t[0]*r+t[4]*i+t[8]*s+t[12])/(d=d||1),e[1]=(t[1]*r+t[5]*i+t[9]*s+t[13])/d,e[2]=(t[2]*r+t[6]*i+t[10]*s+t[14])/d,e},Cr.transformMat3=function(e,n,t){var r=n[0],i=n[1],s=n[2];return e[0]=r*t[0]+i*t[3]+s*t[6],e[1]=r*t[1]+i*t[4]+s*t[7],e[2]=r*t[2]+i*t[5]+s*t[8],e},Cr.transformQuat=function(e,n,t){var r=n[0],i=n[1],s=n[2],d=t[0],p=t[1],v=t[2],_=t[3],C=_*r+p*s-v*i,S=_*i+v*r-d*s,k=_*s+d*i-p*r,H=-d*r-p*i-v*s;return e[0]=C*_+H*-d+S*-v-k*-p,e[1]=S*_+H*-p+k*-d-C*-v,e[2]=k*_+H*-v+C*-p-S*-d,e},Cr.rotateX=function(e,n,t,r){var i=[],s=[];return i[0]=n[0]-t[0],i[1]=n[1]-t[1],i[2]=n[2]-t[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=s[0]+t[0],e[1]=s[1]+t[1],e[2]=s[2]+t[2],e},Cr.rotateY=function(e,n,t,r){var i=[],s=[];return i[0]=n[0]-t[0],i[1]=n[1]-t[1],i[2]=n[2]-t[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=s[0]+t[0],e[1]=s[1]+t[1],e[2]=s[2]+t[2],e},Cr.rotateZ=function(e,n,t,r){var i=[],s=[];return i[0]=n[0]-t[0],i[1]=n[1]-t[1],i[2]=n[2]-t[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],e[0]=s[0]+t[0],e[1]=s[1]+t[1],e[2]=s[2]+t[2],e},Cr.forEach=function(){var e=Cr.create();return function(n,t,r,i,s,d){var p,v;for(t||(t=3),r||(r=0),v=i?Math.min(i*t+r,n.length):n.length,p=r;p<v;p+=t)e[0]=n[p],e[1]=n[p+1],e[2]=n[p+2],s(e,e,d),n[p]=e[0],n[p+1]=e[1],n[p+2]=e[2];return n}}(),Cr.angle=function(e,n){var t=Cr.fromValues(e[0],e[1],e[2]),r=Cr.fromValues(n[0],n[1],n[2]);Cr.normalize(t,t),Cr.normalize(r,r);var i=Cr.dot(t,r);return i>1?0:Math.acos(i)};const Mt=Cr;Gn.import(r8);var ha=Tn.create,i8={};function a8(e){return e.material}function ite(e,n,t){return n.uniforms[t].value}function ate(e,n,t,r){return t!==r}function ote(e){return!0}function o8(){}var s8={float:5126,byte:5120,ubyte:5121,short:5122,ushort:5123};function ste(e,n,t){this.availableAttributes=e,this.availableAttributeSymbols=n,this.indicesBuffer=t,this.vao=null}function lte(e){var n,t;this.bind=function(r){n||((n=oo.createCanvas()).width=n.height=1,n.getContext("2d"));var i=r.gl,s=!t;s&&(t=i.createTexture()),i.bindTexture(i.TEXTURE_2D,t),s&&i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n)},this.unbind=function(r){r.gl.bindTexture(r.gl.TEXTURE_2D,null)},this.isRenderable=function(){return!0}}var bf=Us.extend(function(){return{canvas:null,_width:100,_height:100,devicePixelRatio:typeof window<"u"&&window.devicePixelRatio||1,clearColor:[0,0,0,0],clearBit:17664,alpha:!0,depth:!0,stencil:!1,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!1,throwError:!0,gl:null,viewport:{},maxJointNumber:20,__currentFrameBuffer:null,_viewportStack:[],_clearStack:[],_sceneRendering:null}},function(){this.canvas||(this.canvas=oo.createCanvas());var e=this.canvas;try{var n={alpha:this.alpha,depth:this.depth,stencil:this.stencil,antialias:this.antialias,premultipliedAlpha:this.premultipliedAlpha,preserveDrawingBuffer:this.preserveDrawingBuffer};if(this.gl=e.getContext("webgl",n)||e.getContext("experimental-webgl",n),!this.gl)throw new Error;this._glinfo=new Nee(this.gl),this.gl.targetRenderer&&console.error("Already created a renderer"),this.gl.targetRenderer=this,this.resize()}catch(t){throw"Error creating WebGL Context "+t}this._programMgr=new Qee(this),this._placeholderTexture=new lte(this)},{resize:function(e,n){var t=this.canvas,r=this.devicePixelRatio;null!=e?(t.style&&(t.style.width=e+"px",t.style.height=n+"px"),t.width=e*r,t.height=n*r,this._width=e,this._height=n):(this._width=t.width/r,this._height=t.height/r),this.setViewport(0,0,this._width,this._height)},getWidth:function(){return this._width},getHeight:function(){return this._height},getViewportAspect:function(){var e=this.viewport;return e.width/e.height},setDevicePixelRatio:function(e){this.devicePixelRatio=e,this.resize(this._width,this._height)},getDevicePixelRatio:function(){return this.devicePixelRatio},getGLExtension:function(e){return this._glinfo.getExtension(e)},getGLParameter:function(e){return this._glinfo.getParameter(e)},setViewport:function(e,n,t,r,i){if("object"==typeof e){var s=e;e=s.x,n=s.y,t=s.width,r=s.height,i=s.devicePixelRatio}this.gl.viewport(e*(i=i||this.devicePixelRatio),n*i,t*i,r*i),this.viewport={x:e,y:n,width:t,height:r,devicePixelRatio:i}},saveViewport:function(){this._viewportStack.push(this.viewport)},restoreViewport:function(){this._viewportStack.length>0&&this.setViewport(this._viewportStack.pop())},saveClear:function(){this._clearStack.push({clearBit:this.clearBit,clearColor:this.clearColor})},restoreClear:function(){if(this._clearStack.length>0){var e=this._clearStack.pop();this.clearColor=e.clearColor,this.clearBit=e.clearBit}},bindSceneRendering:function(e){this._sceneRendering=e},render:function(e,n,t,r){var i=this.gl,s=this.clearColor;if(this.clearBit){i.colorMask(!0,!0,!0,!0),i.depthMask(!0);var d=this.viewport,p=!1,v=d.devicePixelRatio;(d.width!==this._width||d.height!==this._height||v&&v!==this.devicePixelRatio||d.x||d.y)&&(p=!0,i.enable(i.SCISSOR_TEST),i.scissor(d.x*v,d.y*v,d.width*v,d.height*v)),i.clearColor(s[0],s[1],s[2],s[3]),i.clear(this.clearBit),p&&i.disable(i.SCISSOR_TEST)}if(t||e.update(!1),e.updateLights(),n=n||e.getMainCamera()){n.update();var _=e.updateRenderList(n,!0);this._sceneRendering=e;var C=_.opaque,S=_.transparent,k=e.material;e.trigger("beforerender",this,e,n,_),r?(this.renderPreZ(C,e,n),i.depthFunc(i.LEQUAL)):i.depthFunc(i.LESS);for(var H=ha(),ne=Mt.create(),pe=0;pe<S.length;pe++){var Me=S[pe];Tn.multiplyAffine(H,n.viewMatrix.array,Me.worldTransform.array),Mt.transformMat4(ne,Me.position.array,H),Me.__depth=ne[2]}this.renderPass(C,n,{getMaterial:function(Re){return k||Re.material},sortCompare:this.opaqueSortCompare}),this.renderPass(S,n,{getMaterial:function(Re){return k||Re.material},sortCompare:this.transparentSortCompare}),e.trigger("afterrender",this,e,n,_),this._sceneRendering=null}else console.error("Can't find camera in the scene.")},getProgram:function(e,n,t){return this._programMgr.getProgram(e,n=n||e.material,t)},validateProgram:function(e){if(e.__error){var n=e.__error;if(i8[e.__uid__])return;if(i8[e.__uid__]=!0,this.throwError)throw new Error(n);this.trigger("error",n)}},updatePrograms:function(e,n,t){var r=t&&t.getMaterial||a8;n=n||null;for(var i=0;i<e.length;i++){var s=e[i],d=r.call(this,s);if(i>0){var p=e[i-1];if((s.joints?s.joints.length:0)===(p.joints?p.joints.length:0)&&s.material===p.material&&s.lightGroup===p.lightGroup){s.__program=p.__program;continue}}var C=this._programMgr.getProgram(s,d,n);this.validateProgram(C),s.__program=C}},renderPass:function(e,n,t){this.trigger("beforerenderpass",this,e,n,t),(t=t||{}).getMaterial=t.getMaterial||a8,t.getUniform=t.getUniform||ite,t.isMaterialChanged=t.isMaterialChanged||ate,t.beforeRender=t.beforeRender||o8,t.afterRender=t.afterRender||o8;var r=t.ifRender||ote;this.updatePrograms(e,this._sceneRendering,t),t.sortCompare&&e.sort(t.sortCompare);var i=this.viewport,s=i.devicePixelRatio,d=[i.x*s,i.y*s,i.width*s,i.height*s],p=this.devicePixelRatio,v=this.__currentFrameBuffer?[this.__currentFrameBuffer.getTextureWidth(),this.__currentFrameBuffer.getTextureHeight()]:[this._width*p,this._height*p],_=[d[2],d[3]],C=Date.now();n?(Tn.copy(fa.VIEW,n.viewMatrix.array),Tn.copy(fa.PROJECTION,n.projectionMatrix.array),Tn.copy(fa.VIEWINVERSE,n.worldTransform.array)):(Tn.identity(fa.VIEW),Tn.identity(fa.PROJECTION),Tn.identity(fa.VIEWINVERSE)),Tn.multiply(fa.VIEWPROJECTION,fa.PROJECTION,fa.VIEW),Tn.invert(fa.PROJECTIONINVERSE,fa.PROJECTION),Tn.invert(fa.VIEWPROJECTIONINVERSE,fa.VIEWPROJECTION);for(var H,ne,pe,Me,Re,Fe,Oe,Be,nt,rt,Ct,mt,S=this.gl,k=this._sceneRendering,nn=0;nn<e.length;nn++){var mn,Xt=e[nn],pn=null!=Xt.worldTransform;if(r(Xt)){pn&&(mn=Xt.isSkinnedMesh&&Xt.isSkinnedMesh()?Xt.offsetMatrix?Xt.offsetMatrix.array:fa.IDENTITY:Xt.worldTransform.array);var on=Xt.geometry,Cn=t.getMaterial.call(this,Xt),Ht=Xt.__program,ln=Cn.shader,Zt=on.__uid__+"-"+Ht.__uid__,Zn=Zt!==rt;rt=Zt,pn&&(Tn.copy(fa.WORLD,mn),Tn.multiply(fa.WORLDVIEWPROJECTION,fa.VIEWPROJECTION,mn),Tn.multiplyAffine(fa.WORLDVIEW,fa.VIEW,mn),(ln.matrixSemantics.WORLDINVERSE||ln.matrixSemantics.WORLDINVERSETRANSPOSE)&&Tn.invert(fa.WORLDINVERSE,mn),(ln.matrixSemantics.WORLDVIEWINVERSE||ln.matrixSemantics.WORLDVIEWINVERSETRANSPOSE)&&Tn.invert(fa.WORLDVIEWINVERSE,fa.WORLDVIEW),(ln.matrixSemantics.WORLDVIEWPROJECTIONINVERSE||ln.matrixSemantics.WORLDVIEWPROJECTIONINVERSETRANSPOSE)&&Tn.invert(fa.WORLDVIEWPROJECTIONINVERSE,fa.WORLDVIEWPROJECTION)),Xt.beforeRender&&Xt.beforeRender(this),t.beforeRender.call(this,Xt,Cn,H);var An=Ht!==ne;An?(Ht.bind(this),Ht.setUniformOfSemantic(S,"VIEWPORT",d),Ht.setUniformOfSemantic(S,"WINDOW_SIZE",v),n&&(Ht.setUniformOfSemantic(S,"NEAR",n.near),Ht.setUniformOfSemantic(S,"FAR",n.far)),Ht.setUniformOfSemantic(S,"DEVICEPIXELRATIO",s),Ht.setUniformOfSemantic(S,"TIME",C),Ht.setUniformOfSemantic(S,"VIEWPORT_SIZE",_),k&&k.setLightUniforms(Ht,Xt.lightGroup,this)):Ht=ne,(An||t.isMaterialChanged(Xt,pe,Cn,H))&&(Cn.depthTest!==Me&&(Cn.depthTest?S.enable(S.DEPTH_TEST):S.disable(S.DEPTH_TEST),Me=Cn.depthTest),Cn.depthMask!==Re&&(S.depthMask(Cn.depthMask),Re=Cn.depthMask),Cn.transparent!==nt&&(Cn.transparent?S.enable(S.BLEND):S.disable(S.BLEND),nt=Cn.transparent),Cn.transparent&&(Cn.blend?Cn.blend(S):(S.blendEquationSeparate(S.FUNC_ADD,S.FUNC_ADD),S.blendFuncSeparate(S.SRC_ALPHA,S.ONE_MINUS_SRC_ALPHA,S.ONE,S.ONE_MINUS_SRC_ALPHA))),mt=this._bindMaterial(Xt,Cn,Ht,pe||null,H||null,ne||null,t.getUniform),H=Cn);var ri=ln.matrixSemanticKeys;if(pn)for(var kr=0;kr<ri.length;kr++){var gi=ri[kr],Dr=ln.matrixSemantics[gi],qr=fa[gi];Dr.isTranspose&&Tn.transpose(qr,fa[Dr.semanticNoTranspose]),Ht.setUniform(S,Dr.type,Dr.symbol,qr)}Xt.cullFace!==Oe&&S.cullFace(Oe=Xt.cullFace),Xt.frontFace!==Be&&S.frontFace(Be=Xt.frontFace),Xt.culling!==Fe&&((Fe=Xt.culling)?S.enable(S.CULL_FACE):S.disable(S.CULL_FACE)),this._updateSkeleton(Xt,Ht,mt),Zn&&(Ct=this._bindVAO(null,ln,on,Ht)),this._renderObject(Xt,Ct,Ht),t.afterRender(this,Xt),Xt.afterRender&&Xt.afterRender(this),ne=Ht,pe=Xt}}this.trigger("afterrenderpass",this,e,n,t)},getMaxJointNumber:function(){return this.maxJointNumber},_updateSkeleton:function(e,n,t){var r=this.gl,i=e.skeleton;if(i)if(i.update(),e.joints.length>this.getMaxJointNumber()){var s=i.getSubSkinMatricesTexture(e.__uid__,e.joints);n.useTextureSlot(this,s,t),n.setUniform(r,"1i","skinMatricesTexture",t),n.setUniform(r,"1f","skinMatricesTextureSize",s.width)}else{var d=i.getSubSkinMatrices(e.__uid__,e.joints);n.setUniformOfSemantic(r,"SKIN_MATRIX",d)}},_renderObject:function(e,n,t){var r=this.gl,i=e.geometry,s=e.mode;null==s&&(s=4);var d=null,p=e.isInstancedMesh&&e.isInstancedMesh();if(!p||(d=this.getGLExtension("ANGLE_instanced_arrays"))){var v;if(p&&(v=this._bindInstancedAttributes(e,t,d)),n.indicesBuffer){var S=this.getGLExtension("OES_element_index_uint")&&i.indices instanceof Uint32Array?r.UNSIGNED_INT:r.UNSIGNED_SHORT;p?d.drawElementsInstancedANGLE(s,n.indicesBuffer.count,S,0,e.getInstanceCount()):r.drawElements(s,n.indicesBuffer.count,S,0)}else p?d.drawArraysInstancedANGLE(s,0,i.vertexCount,e.getInstanceCount()):r.drawArrays(s,0,i.vertexCount);if(p)for(var k=0;k<v.length;k++)r.disableVertexAttribArray(v[k])}else console.warn("Device not support ANGLE_instanced_arrays extension")},_bindInstancedAttributes:function(e,n,t){for(var r=this.gl,i=e.getInstancedAttributesBuffers(this),s=[],d=0;d<i.length;d++){var p=i[d],v=n.getAttribLocation(r,p.symbol);if(!(v<0)){var _=s8[p.type]||r.FLOAT;r.enableVertexAttribArray(v),r.bindBuffer(r.ARRAY_BUFFER,p.buffer),r.vertexAttribPointer(v,p.size,_,!1,0,0),t.vertexAttribDivisorANGLE(v,p.divisor),s.push(v)}}return s},_bindMaterial:function(e,n,t,r,i,s,d){for(var p=this.gl,v=s===t,_=t.currentTextureSlot(),C=n.getEnabledUniforms(),S=n.getTextureUniforms(),k=this._placeholderTexture,H=0;H<S.length;H++){var pe=d(e,n,ne=S[H]);if("t"===(Me=n.uniforms[ne].type)&&pe)pe.__slot=-1;else if("tv"===Me)for(var Re=0;Re<pe.length;Re++)pe[Re]&&(pe[Re].__slot=-1)}for(k.__slot=-1,H=0;H<C.length;H++){var ne,Me,Fe=n.uniforms[ne=C[H]],Oe=(pe=d(e,n,ne),"t"===(Me=Fe.type));if(Oe&&(!pe||!pe.isRenderable())&&(pe=k),i&&v){var Be=d(r,i,ne);if(Oe&&(!Be||!Be.isRenderable())&&(Be=k),Be===pe){if(Oe)t.takeCurrentTextureSlot(this,null);else if("tv"===Me&&pe)for(Re=0;Re<pe.length;Re++)t.takeCurrentTextureSlot(this,null);continue}}if(null!=pe)if(Oe)if(pe.__slot<0){var nt=t.currentTextureSlot();t.setUniform(p,"1i",ne,nt)&&(t.takeCurrentTextureSlot(this,pe),pe.__slot=nt)}else t.setUniform(p,"1i",ne,pe.__slot);else if(Array.isArray(pe)){if(0===pe.length)continue;if("tv"===Me){if(!t.hasUniform(ne))continue;var Ct=[];for(Re=0;Re<pe.length;Re++){var mt=pe[Re];mt.__slot<0?(nt=t.currentTextureSlot(),Ct.push(nt),t.takeCurrentTextureSlot(this,mt),mt.__slot=nt):Ct.push(mt.__slot)}t.setUniform(p,"1iv",ne,Ct)}else t.setUniform(p,Fe.type,ne,pe)}else t.setUniform(p,Fe.type,ne,pe)}var Ft=t.currentTextureSlot();return t.resetTextureSlot(_),Ft},_bindVAO:function(e,n,t,r){var i=!t.dynamic,s=this.gl,d=this.__uid__+"-"+r.__uid__,p=t.__vaoCache[d];if(!p){var v=t.getBufferChunks(this);if(!v||!v.length)return;for(var _=v[0],C=_.attributeBuffers,Be=_.indicesBuffer,Oe=[],S=[],k=0;k<C.length;k++){var Me,pe=(H=C[k]).semantic;if(pe){var Re=n.attributeSemantics[pe];Me=Re&&Re.symbol}else Me=H.name;Me&&r.attributes[Me]&&(Oe.push(H),S.push(Me))}p=new ste(Oe,S,Be),i&&(t.__vaoCache[d]=p)}var Fe=!0;if(e&&i&&(null==p.vao?p.vao=e.createVertexArrayOES():Fe=!1,e.bindVertexArrayOES(p.vao)),Oe=p.availableAttributes,Be=p.indicesBuffer,Fe){var nt=r.enableAttributes(this,p.availableAttributeSymbols,e&&i&&p);for(k=0;k<Oe.length;k++){var rt=nt[k];if(-1!==rt){var H,mt=(H=Oe[k]).size,Ft=s8[H.type]||s.FLOAT;s.bindBuffer(s.ARRAY_BUFFER,H.buffer),s.vertexAttribPointer(rt,mt,Ft,!1,0,0)}}t.isUseIndices()&&s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,Be.buffer)}return p},renderPreZ:function(e,n,t){var r=this.gl,i=this._prezMaterial||new Eu({shader:new Gn(Gn.source("clay.prez.vertex"),Gn.source("clay.prez.fragment"))});this._prezMaterial=i,r.colorMask(!1,!1,!1,!1),r.depthMask(!0),this.renderPass(e,t,{ifRender:function(s){return!s.ignorePreZ},isMaterialChanged:function(s,d){var p=s.material,v=d.material;return p.get("diffuseMap")!==v.get("diffuseMap")||(p.get("alphaCutoff")||0)!==(v.get("alphaCutoff")||0)},getUniform:function(s,d,p){return"alphaMap"===p?s.material.get("diffuseMap"):"alphaCutoff"===p?s.material.isDefined("fragment","ALPHA_TEST")&&s.material.get("diffuseMap")&&s.material.get("alphaCutoff")||0:"uvRepeat"===p?s.material.get("uvRepeat"):"uvOffset"===p?s.material.get("uvOffset"):d.get(p)},getMaterial:function(){return i},sort:this.opaqueSortCompare}),r.colorMask(!0,!0,!0,!0),r.depthMask(!0)},disposeScene:function(e){this.disposeNode(e,!0,!0),e.dispose()},disposeNode:function(e,n,t){e.getParent()&&e.getParent().remove(e);var r={};e.traverse(function(i){var s=i.material;if(i.geometry&&n&&i.geometry.dispose(this),t&&s&&!r[s.__uid__]){for(var d=s.getTextureUniforms(),p=0;p<d.length;p++){var v=d[p],_=s.uniforms[v].value,C=s.uniforms[v].type;if(_)if("t"===C)_.dispose&&_.dispose(this);else if("tv"===C)for(var S=0;S<_.length;S++)_[S]&&_[S].dispose&&_[S].dispose(this)}r[s.__uid__]=!0}i.dispose&&i.dispose(this)},this)},disposeGeometry:function(e){e.dispose(this)},disposeTexture:function(e){e.dispose(this)},disposeFrameBuffer:function(e){e.dispose(this)},dispose:function(){},screenToNDC:function(e,n,t){t||(t=new Hl),n=this._height-n;var r=this.viewport,i=t.array;return i[0]=(e-r.x)/r.width,i[0]=2*i[0]-1,i[1]=(n-r.y)/r.height,i[1]=2*i[1]-1,t}});bf.opaqueSortCompare=bf.prototype.opaqueSortCompare=function(e,n){return e.renderOrder===n.renderOrder?e.__program===n.__program?e.material===n.material?e.geometry.__uid__-n.geometry.__uid__:e.material.__uid__-n.material.__uid__:e.__program&&n.__program?e.__program.__uid__-n.__program.__uid__:0:e.renderOrder-n.renderOrder},bf.transparentSortCompare=bf.prototype.transparentSortCompare=function(e,n){return e.renderOrder===n.renderOrder?e.__depth===n.__depth?e.__program===n.__program?e.material===n.material?e.geometry.__uid__-n.geometry.__uid__:e.material.__uid__-n.material.__uid__:e.__program&&n.__program?e.__program.__uid__-n.__program.__uid__:0:e.__depth-n.__depth:e.renderOrder-n.renderOrder};var fa={IDENTITY:ha(),WORLD:ha(),VIEW:ha(),PROJECTION:ha(),WORLDVIEW:ha(),VIEWPROJECTION:ha(),WORLDVIEWPROJECTION:ha(),WORLDINVERSE:ha(),VIEWINVERSE:ha(),PROJECTIONINVERSE:ha(),WORLDVIEWINVERSE:ha(),VIEWPROJECTIONINVERSE:ha(),WORLDVIEWPROJECTIONINVERSE:ha(),WORLDTRANSPOSE:ha(),VIEWTRANSPOSE:ha(),PROJECTIONTRANSPOSE:ha(),WORLDVIEWTRANSPOSE:ha(),VIEWPROJECTIONTRANSPOSE:ha(),WORLDVIEWPROJECTIONTRANSPOSE:ha(),WORLDINVERSETRANSPOSE:ha(),VIEWINVERSETRANSPOSE:ha(),PROJECTIONINVERSETRANSPOSE:ha(),WORLDVIEWINVERSETRANSPOSE:ha(),VIEWPROJECTIONINVERSETRANSPOSE:ha(),WORLDVIEWPROJECTIONINVERSETRANSPOSE:ha()};bf.COLOR_BUFFER_BIT=16384,bf.DEPTH_BUFFER_BIT=256,bf.STENCIL_BUFFER_BIT=1024;const jC=bf;var wr=function(e,n,t){this.array=Mt.fromValues(e=e||0,n=n||0,t=t||0),this._dirty=!0};wr.prototype={constructor:wr,add:function(e){return Mt.add(this.array,this.array,e.array),this._dirty=!0,this},set:function(e,n,t){return this.array[0]=e,this.array[1]=n,this.array[2]=t,this._dirty=!0,this},setArray:function(e){return this.array[0]=e[0],this.array[1]=e[1],this.array[2]=e[2],this._dirty=!0,this},clone:function(){return new wr(this.x,this.y,this.z)},copy:function(e){return Mt.copy(this.array,e.array),this._dirty=!0,this},cross:function(e,n){return Mt.cross(this.array,e.array,n.array),this._dirty=!0,this},dist:function(e){return Mt.dist(this.array,e.array)},distance:function(e){return Mt.distance(this.array,e.array)},div:function(e){return Mt.div(this.array,this.array,e.array),this._dirty=!0,this},divide:function(e){return Mt.divide(this.array,this.array,e.array),this._dirty=!0,this},dot:function(e){return Mt.dot(this.array,e.array)},len:function(){return Mt.len(this.array)},length:function(){return Mt.length(this.array)},lerp:function(e,n,t){return Mt.lerp(this.array,e.array,n.array,t),this._dirty=!0,this},min:function(e){return Mt.min(this.array,this.array,e.array),this._dirty=!0,this},max:function(e){return Mt.max(this.array,this.array,e.array),this._dirty=!0,this},mul:function(e){return Mt.mul(this.array,this.array,e.array),this._dirty=!0,this},multiply:function(e){return Mt.multiply(this.array,this.array,e.array),this._dirty=!0,this},negate:function(){return Mt.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return Mt.normalize(this.array,this.array),this._dirty=!0,this},random:function(e){return Mt.random(this.array,e),this._dirty=!0,this},scale:function(e){return Mt.scale(this.array,this.array,e),this._dirty=!0,this},scaleAndAdd:function(e,n){return Mt.scaleAndAdd(this.array,this.array,e.array,n),this._dirty=!0,this},sqrDist:function(e){return Mt.sqrDist(this.array,e.array)},squaredDistance:function(e){return Mt.squaredDistance(this.array,e.array)},sqrLen:function(){return Mt.sqrLen(this.array)},squaredLength:function(){return Mt.squaredLength(this.array)},sub:function(e){return Mt.sub(this.array,this.array,e.array),this._dirty=!0,this},subtract:function(e){return Mt.subtract(this.array,this.array,e.array),this._dirty=!0,this},transformMat3:function(e){return Mt.transformMat3(this.array,this.array,e.array),this._dirty=!0,this},transformMat4:function(e){return Mt.transformMat4(this.array,this.array,e.array),this._dirty=!0,this},transformQuat:function(e){return Mt.transformQuat(this.array,this.array,e.array),this._dirty=!0,this},applyProjection:function(e){var n=this.array;if(0===(e=e.array)[15]){var t=-1/n[2];n[0]=e[0]*n[0]*t,n[1]=e[5]*n[1]*t,n[2]=(e[10]*n[2]+e[14])*t}else n[0]=e[0]*n[0]+e[12],n[1]=e[5]*n[1]+e[13],n[2]=e[10]*n[2]+e[14];return this._dirty=!0,this},eulerFromQuat:function(e,n){wr.eulerFromQuat(this,e,n)},eulerFromMat3:function(e,n){wr.eulerFromMat3(this,e,n)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var dI=Object.defineProperty;if(dI){var JB=wr.prototype;dI(JB,"x",{get:function(){return this.array[0]},set:function(e){this.array[0]=e,this._dirty=!0}}),dI(JB,"y",{get:function(){return this.array[1]},set:function(e){this.array[1]=e,this._dirty=!0}}),dI(JB,"z",{get:function(){return this.array[2]},set:function(e){this.array[2]=e,this._dirty=!0}})}function Au(e,n,t){return e<n?n:e>t?t:e}wr.add=function(e,n,t){return Mt.add(e.array,n.array,t.array),e._dirty=!0,e},wr.set=function(e,n,t,r){Mt.set(e.array,n,t,r),e._dirty=!0},wr.copy=function(e,n){return Mt.copy(e.array,n.array),e._dirty=!0,e},wr.cross=function(e,n,t){return Mt.cross(e.array,n.array,t.array),e._dirty=!0,e},wr.distance=wr.dist=function(e,n){return Mt.distance(e.array,n.array)},wr.divide=wr.div=function(e,n,t){return Mt.divide(e.array,n.array,t.array),e._dirty=!0,e},wr.dot=function(e,n){return Mt.dot(e.array,n.array)},wr.len=function(e){return Mt.length(e.array)},wr.lerp=function(e,n,t,r){return Mt.lerp(e.array,n.array,t.array,r),e._dirty=!0,e},wr.min=function(e,n,t){return Mt.min(e.array,n.array,t.array),e._dirty=!0,e},wr.max=function(e,n,t){return Mt.max(e.array,n.array,t.array),e._dirty=!0,e},wr.multiply=wr.mul=function(e,n,t){return Mt.multiply(e.array,n.array,t.array),e._dirty=!0,e},wr.negate=function(e,n){return Mt.negate(e.array,n.array),e._dirty=!0,e},wr.normalize=function(e,n){return Mt.normalize(e.array,n.array),e._dirty=!0,e},wr.random=function(e,n){return Mt.random(e.array,n),e._dirty=!0,e},wr.scale=function(e,n,t){return Mt.scale(e.array,n.array,t),e._dirty=!0,e},wr.scaleAndAdd=function(e,n,t,r){return Mt.scaleAndAdd(e.array,n.array,t.array,r),e._dirty=!0,e},wr.squaredDistance=wr.sqrDist=function(e,n){return Mt.sqrDist(e.array,n.array)},wr.squaredLength=wr.sqrLen=function(e){return Mt.sqrLen(e.array)},wr.subtract=wr.sub=function(e,n,t){return Mt.subtract(e.array,n.array,t.array),e._dirty=!0,e},wr.transformMat3=function(e,n,t){return Mt.transformMat3(e.array,n.array,t.array),e._dirty=!0,e},wr.transformMat4=function(e,n,t){return Mt.transformMat4(e.array,n.array,t.array),e._dirty=!0,e},wr.transformQuat=function(e,n,t){return Mt.transformQuat(e.array,n.array,t.array),e._dirty=!0,e};var Gi=Math.atan2,Iu=Math.asin,Iy=Math.abs;wr.eulerFromQuat=function(e,n,k){e._dirty=!0;var r=e.array,i=(n=n.array)[0],s=n[1],d=n[2],p=n[3],v=i*i,_=s*s,C=d*d,S=p*p;switch(k=(k||"XYZ").toUpperCase()){case"XYZ":r[0]=Gi(2*(i*p-s*d),S-v-_+C),r[1]=Iu(Au(2*(i*d+s*p),-1,1)),r[2]=Gi(2*(d*p-i*s),S+v-_-C);break;case"YXZ":r[0]=Iu(Au(2*(i*p-s*d),-1,1)),r[1]=Gi(2*(i*d+s*p),S-v-_+C),r[2]=Gi(2*(i*s+d*p),S-v+_-C);break;case"ZXY":r[0]=Iu(Au(2*(i*p+s*d),-1,1)),r[1]=Gi(2*(s*p-d*i),S-v-_+C),r[2]=Gi(2*(d*p-i*s),S-v+_-C);break;case"ZYX":r[0]=Gi(2*(i*p+d*s),S-v-_+C),r[1]=Iu(Au(2*(s*p-i*d),-1,1)),r[2]=Gi(2*(i*s+d*p),S+v-_-C);break;case"YZX":r[0]=Gi(2*(i*p-d*s),S-v+_-C),r[1]=Gi(2*(s*p-i*d),S+v-_-C),r[2]=Iu(Au(2*(i*s+d*p),-1,1));break;case"XZY":r[0]=Gi(2*(i*p+s*d),S-v+_-C),r[1]=Gi(2*(i*d+s*p),S+v-_-C),r[2]=Iu(Au(2*(d*p-i*s),-1,1));break;default:console.warn("Unkown order: "+k)}return e},wr.eulerFromMat3=function(e,n,ne){var r=n.array,i=r[0],s=r[3],d=r[6],p=r[1],v=r[4],_=r[7],C=r[2],S=r[5],k=r[8],H=e.array;switch(ne=(ne||"XYZ").toUpperCase()){case"XYZ":H[1]=Iu(Au(d,-1,1)),Iy(d)<.99999?(H[0]=Gi(-_,k),H[2]=Gi(-s,i)):(H[0]=Gi(S,v),H[2]=0);break;case"YXZ":H[0]=Iu(-Au(_,-1,1)),Iy(_)<.99999?(H[1]=Gi(d,k),H[2]=Gi(p,v)):(H[1]=Gi(-C,i),H[2]=0);break;case"ZXY":H[0]=Iu(Au(S,-1,1)),Iy(S)<.99999?(H[1]=Gi(-C,k),H[2]=Gi(-s,v)):(H[1]=0,H[2]=Gi(p,i));break;case"ZYX":H[1]=Iu(-Au(C,-1,1)),Iy(C)<.99999?(H[0]=Gi(S,k),H[2]=Gi(p,i)):(H[0]=0,H[2]=Gi(-s,v));break;case"YZX":H[2]=Iu(Au(p,-1,1)),Iy(p)<.99999?(H[0]=Gi(-_,v),H[1]=Gi(-C,i)):(H[0]=0,H[1]=Gi(d,k));break;case"XZY":H[2]=Iu(-Au(s,-1,1)),Iy(s)<.99999?(H[0]=Gi(S,v),H[1]=Gi(d,i)):(H[0]=Gi(-_,k),H[1]=0);break;default:console.warn("Unkown order: "+ne)}return e._dirty=!0,e},Object.defineProperties(wr,{POSITIVE_X:{get:function(){return new wr(1,0,0)}},NEGATIVE_X:{get:function(){return new wr(-1,0,0)}},POSITIVE_Y:{get:function(){return new wr(0,1,0)}},NEGATIVE_Y:{get:function(){return new wr(0,-1,0)}},POSITIVE_Z:{get:function(){return new wr(0,0,1)}},NEGATIVE_Z:{get:function(){return new wr(0,0,-1)}},UP:{get:function(){return new wr(0,1,0)}},ZERO:{get:function(){return new wr}}});const Ln=wr;var e3=1e-5,hI=function(e,n){this.origin=e||new Ln,this.direction=n||new Ln};hI.prototype={constructor:hI,intersectPlane:function(e,n){var t=e.normal.array,r=e.distance,i=this.origin.array,s=this.direction.array,d=Mt.dot(t,s);if(0===d)return null;n||(n=new Ln);var p=(Mt.dot(t,i)-r)/d;return Mt.scaleAndAdd(n.array,i,s,-p),n._dirty=!0,n},mirrorAgainstPlane:function(e){var n=Mt.dot(e.normal.array,this.direction.array);Mt.scaleAndAdd(this.direction.array,this.direction.array,e.normal.array,2*-n),this.direction._dirty=!0},distanceToPoint:function(){var e=Mt.create();return function(n){Mt.sub(e,n,this.origin.array);var t=Mt.dot(e,this.direction.array);if(t<0)return Mt.distance(this.origin.array,n);var r=Mt.lenSquared(e);return Math.sqrt(r-t*t)}}(),intersectSphere:function(){var e=Mt.create();return function(n,t,r){var i=this.origin.array,s=this.direction.array;Mt.sub(e,n=n.array,i);var d=Mt.dot(e,s),v=Mt.squaredLength(e)-d*d,_=t*t;if(!(v>_)){var C=Math.sqrt(_-v),S=d-C,k=d+C;return r||(r=new Ln),S<0?k<0?null:(Mt.scaleAndAdd(r.array,i,s,k),r):(Mt.scaleAndAdd(r.array,i,s,S),r)}}}(),intersectBoundingBox:function(e,n){var _,C,S,k,H,ne,t=this.direction.array,r=this.origin.array,i=e.min.array,s=e.max.array,d=1/t[0],p=1/t[1],v=1/t[2];if(d>=0?(_=(i[0]-r[0])*d,C=(s[0]-r[0])*d):(C=(i[0]-r[0])*d,_=(s[0]-r[0])*d),p>=0?(S=(i[1]-r[1])*p,k=(s[1]-r[1])*p):(k=(i[1]-r[1])*p,S=(s[1]-r[1])*p),_>k||S>C||((S>_||_!=_)&&(_=S),(k<C||C!=C)&&(C=k),v>=0?(H=(i[2]-r[2])*v,ne=(s[2]-r[2])*v):(ne=(i[2]-r[2])*v,H=(s[2]-r[2])*v),_>ne||H>C)||((H>_||_!=_)&&(_=H),(ne<C||C!=C)&&(C=ne),C<0))return null;var pe=_>=0?_:C;return n||(n=new Ln),Mt.scaleAndAdd(n.array,r,t,pe),n},intersectTriangle:function(){var e=Mt.create(),n=Mt.create(),t=Mt.create(),r=Mt.create();return function(i,s,d,p,v,_){var C=this.direction.array,S=this.origin.array;d=d.array,Mt.sub(e,s=s.array,i=i.array),Mt.sub(n,d,i),Mt.cross(r,n,C);var k=Mt.dot(e,r);if(p){if(k>-e3)return null}else if(k>-e3&&k<e3)return null;Mt.sub(t,S,i);var H=Mt.dot(r,t)/k;if(H<0||H>1)return null;Mt.cross(r,e,t);var ne=Mt.dot(C,r)/k;if(ne<0||ne>1||H+ne>1)return null;Mt.cross(r,e,n);var pe=-Mt.dot(t,r)/k;return pe<0?null:(v||(v=new Ln),_&&Ln.set(_,1-H-ne,H,ne),Mt.scaleAndAdd(v.array,S,C,pe),v)}}(),applyTransform:function(e){Ln.add(this.direction,this.direction,this.origin),Ln.transformMat4(this.origin,this.origin,e),Ln.transformMat4(this.direction,this.direction,e),Ln.sub(this.direction,this.direction,this.origin),Ln.normalize(this.direction,this.direction)},copy:function(e){Ln.copy(this.origin,e.origin),Ln.copy(this.direction,e.direction)},clone:function(){var e=new hI;return e.copy(this),e}};const fI=hI;var Xr={create:function(){var e=new Xo(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},clone:function(e){var n=new Xo(4);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n},fromValues:function(e,n,t,r){var i=new Xo(4);return i[0]=e,i[1]=n,i[2]=t,i[3]=r,i},copy:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e},set:function(e,n,t,r,i){return e[0]=n,e[1]=t,e[2]=r,e[3]=i,e},add:function(e,n,t){return e[0]=n[0]+t[0],e[1]=n[1]+t[1],e[2]=n[2]+t[2],e[3]=n[3]+t[3],e},subtract:function(e,n,t){return e[0]=n[0]-t[0],e[1]=n[1]-t[1],e[2]=n[2]-t[2],e[3]=n[3]-t[3],e}};Xr.sub=Xr.subtract,Xr.multiply=function(e,n,t){return e[0]=n[0]*t[0],e[1]=n[1]*t[1],e[2]=n[2]*t[2],e[3]=n[3]*t[3],e},Xr.mul=Xr.multiply,Xr.divide=function(e,n,t){return e[0]=n[0]/t[0],e[1]=n[1]/t[1],e[2]=n[2]/t[2],e[3]=n[3]/t[3],e},Xr.div=Xr.divide,Xr.min=function(e,n,t){return e[0]=Math.min(n[0],t[0]),e[1]=Math.min(n[1],t[1]),e[2]=Math.min(n[2],t[2]),e[3]=Math.min(n[3],t[3]),e},Xr.max=function(e,n,t){return e[0]=Math.max(n[0],t[0]),e[1]=Math.max(n[1],t[1]),e[2]=Math.max(n[2],t[2]),e[3]=Math.max(n[3],t[3]),e},Xr.scale=function(e,n,t){return e[0]=n[0]*t,e[1]=n[1]*t,e[2]=n[2]*t,e[3]=n[3]*t,e},Xr.scaleAndAdd=function(e,n,t,r){return e[0]=n[0]+t[0]*r,e[1]=n[1]+t[1]*r,e[2]=n[2]+t[2]*r,e[3]=n[3]+t[3]*r,e},Xr.distance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1],i=n[2]-e[2],s=n[3]-e[3];return Math.sqrt(t*t+r*r+i*i+s*s)},Xr.dist=Xr.distance,Xr.squaredDistance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1],i=n[2]-e[2],s=n[3]-e[3];return t*t+r*r+i*i+s*s},Xr.sqrDist=Xr.squaredDistance,Xr.length=function(e){var n=e[0],t=e[1],r=e[2],i=e[3];return Math.sqrt(n*n+t*t+r*r+i*i)},Xr.len=Xr.length,Xr.squaredLength=function(e){var n=e[0],t=e[1],r=e[2],i=e[3];return n*n+t*t+r*r+i*i},Xr.sqrLen=Xr.squaredLength,Xr.negate=function(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e[3]=-n[3],e},Xr.inverse=function(e,n){return e[0]=1/n[0],e[1]=1/n[1],e[2]=1/n[2],e[3]=1/n[3],e},Xr.normalize=function(e,n){var t=n[0],r=n[1],i=n[2],s=n[3],d=t*t+r*r+i*i+s*s;return d>0&&(d=1/Math.sqrt(d),e[0]=n[0]*d,e[1]=n[1]*d,e[2]=n[2]*d,e[3]=n[3]*d),e},Xr.dot=function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]+e[3]*n[3]},Xr.lerp=function(e,n,t,r){var i=n[0],s=n[1],d=n[2],p=n[3];return e[0]=i+r*(t[0]-i),e[1]=s+r*(t[1]-s),e[2]=d+r*(t[2]-d),e[3]=p+r*(t[3]-p),e},Xr.random=function(e,n){return n=n||1,e[0]=Ey(),e[1]=Ey(),e[2]=Ey(),e[3]=Ey(),Xr.normalize(e,e),Xr.scale(e,e,n),e},Xr.transformMat4=function(e,n,t){var r=n[0],i=n[1],s=n[2],d=n[3];return e[0]=t[0]*r+t[4]*i+t[8]*s+t[12]*d,e[1]=t[1]*r+t[5]*i+t[9]*s+t[13]*d,e[2]=t[2]*r+t[6]*i+t[10]*s+t[14]*d,e[3]=t[3]*r+t[7]*i+t[11]*s+t[15]*d,e},Xr.transformQuat=function(e,n,t){var r=n[0],i=n[1],s=n[2],d=t[0],p=t[1],v=t[2],_=t[3],C=_*r+p*s-v*i,S=_*i+v*r-d*s,k=_*s+d*i-p*r,H=-d*r-p*i-v*s;return e[0]=C*_+H*-d+S*-v-k*-p,e[1]=S*_+H*-p+k*-d-C*-v,e[2]=k*_+H*-v+C*-p-S*-d,e},Xr.forEach=function(){var e=Xr.create();return function(n,t,r,i,s,d){var p,v;for(t||(t=4),r||(r=0),v=i?Math.min(i*t+r,n.length):n.length,p=r;p<v;p+=t)e[0]=n[p],e[1]=n[p+1],e[2]=n[p+2],e[3]=n[p+3],s(e,e,d),n[p]=e[0],n[p+1]=e[1],n[p+2]=e[2],n[p+3]=e[3];return n}}();const Wn=Xr;var bo={create:function(){var e=new Xo(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromMat4:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[4],e[4]=n[5],e[5]=n[6],e[6]=n[8],e[7]=n[9],e[8]=n[10],e},clone:function(e){var n=new Xo(9);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n},copy:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},transpose:function(e,n){if(e===n){var t=n[1],r=n[2],i=n[5];e[1]=n[3],e[2]=n[6],e[3]=t,e[5]=n[7],e[6]=r,e[7]=i}else e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8];return e},invert:function(e,n){var t=n[0],r=n[1],i=n[2],s=n[3],d=n[4],p=n[5],v=n[6],_=n[7],C=n[8],S=C*d-p*_,k=-C*s+p*v,H=_*s-d*v,ne=t*S+r*k+i*H;return ne?(e[0]=S*(ne=1/ne),e[1]=(-C*r+i*_)*ne,e[2]=(p*r-i*d)*ne,e[3]=k*ne,e[4]=(C*t-i*v)*ne,e[5]=(-p*t+i*s)*ne,e[6]=H*ne,e[7]=(-_*t+r*v)*ne,e[8]=(d*t-r*s)*ne,e):null},adjoint:function(e,n){var t=n[0],r=n[1],i=n[2],s=n[3],d=n[4],p=n[5],v=n[6],_=n[7],C=n[8];return e[0]=d*C-p*_,e[1]=i*_-r*C,e[2]=r*p-i*d,e[3]=p*v-s*C,e[4]=t*C-i*v,e[5]=i*s-t*p,e[6]=s*_-d*v,e[7]=r*v-t*_,e[8]=t*d-r*s,e},determinant:function(e){var i=e[3],s=e[4],d=e[5],p=e[6],v=e[7],_=e[8];return e[0]*(_*s-d*v)+e[1]*(-_*i+d*p)+e[2]*(v*i-s*p)},multiply:function(e,n,t){var r=n[0],i=n[1],s=n[2],d=n[3],p=n[4],v=n[5],_=n[6],C=n[7],S=n[8],k=t[0],H=t[1],ne=t[2],pe=t[3],Me=t[4],Re=t[5],Fe=t[6],Oe=t[7],Be=t[8];return e[0]=k*r+H*d+ne*_,e[1]=k*i+H*p+ne*C,e[2]=k*s+H*v+ne*S,e[3]=pe*r+Me*d+Re*_,e[4]=pe*i+Me*p+Re*C,e[5]=pe*s+Me*v+Re*S,e[6]=Fe*r+Oe*d+Be*_,e[7]=Fe*i+Oe*p+Be*C,e[8]=Fe*s+Oe*v+Be*S,e}};bo.mul=bo.multiply,bo.translate=function(e,n,t){var r=n[0],i=n[1],s=n[2],d=n[3],p=n[4],v=n[5],_=n[6],C=n[7],S=n[8],k=t[0],H=t[1];return e[0]=r,e[1]=i,e[2]=s,e[3]=d,e[4]=p,e[5]=v,e[6]=k*r+H*d+_,e[7]=k*i+H*p+C,e[8]=k*s+H*v+S,e},bo.rotate=function(e,n,t){var r=n[0],i=n[1],s=n[2],d=n[3],p=n[4],v=n[5],_=n[6],C=n[7],S=n[8],k=Math.sin(t),H=Math.cos(t);return e[0]=H*r+k*d,e[1]=H*i+k*p,e[2]=H*s+k*v,e[3]=H*d-k*r,e[4]=H*p-k*i,e[5]=H*v-k*s,e[6]=_,e[7]=C,e[8]=S,e},bo.scale=function(e,n,t){var r=t[0],i=t[1];return e[0]=r*n[0],e[1]=r*n[1],e[2]=r*n[2],e[3]=i*n[3],e[4]=i*n[4],e[5]=i*n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e},bo.fromMat2d=function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=0,e[3]=n[2],e[4]=n[3],e[5]=0,e[6]=n[4],e[7]=n[5],e[8]=1,e},bo.fromQuat=function(e,n){var t=n[0],r=n[1],i=n[2],s=n[3],d=t+t,p=r+r,v=i+i,_=t*d,C=r*d,S=r*p,k=i*d,H=i*p,ne=i*v,pe=s*d,Me=s*p,Re=s*v;return e[0]=1-S-ne,e[3]=C-Re,e[6]=k+Me,e[1]=C+Re,e[4]=1-_-ne,e[7]=H-pe,e[2]=k-Me,e[5]=H+pe,e[8]=1-_-S,e},bo.normalFromMat4=function(e,n){var t=n[0],r=n[1],i=n[2],s=n[3],d=n[4],p=n[5],v=n[6],_=n[7],C=n[8],S=n[9],k=n[10],H=n[11],ne=n[12],pe=n[13],Me=n[14],Re=n[15],Fe=t*p-r*d,Oe=t*v-i*d,Be=t*_-s*d,nt=r*v-i*p,rt=r*_-s*p,Ct=i*_-s*v,mt=C*pe-S*ne,Ft=C*Me-k*ne,nn=C*Re-H*ne,Xt=S*Me-k*pe,pn=S*Re-H*pe,mn=k*Re-H*Me,on=Fe*mn-Oe*pn+Be*Xt+nt*nn-rt*Ft+Ct*mt;return on?(e[0]=(p*mn-v*pn+_*Xt)*(on=1/on),e[1]=(v*nn-d*mn-_*Ft)*on,e[2]=(d*pn-p*nn+_*mt)*on,e[3]=(i*pn-r*mn-s*Xt)*on,e[4]=(t*mn-i*nn+s*Ft)*on,e[5]=(r*nn-t*pn-s*mt)*on,e[6]=(pe*Ct-Me*rt+Re*nt)*on,e[7]=(Me*Be-ne*Ct-Re*Oe)*on,e[8]=(ne*rt-pe*Be+Re*Fe)*on,e):null},bo.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))};const ui=bo;var wi={create:function(){var e=new Xo(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}};wi.rotationTo=function(){var e=Mt.create(),n=Mt.fromValues(1,0,0),t=Mt.fromValues(0,1,0);return function(r,i,s){var d=Mt.dot(i,s);return d<-.999999?(Mt.cross(e,n,i),Mt.length(e)<1e-6&&Mt.cross(e,t,i),Mt.normalize(e,e),wi.setAxisAngle(r,e,Math.PI),r):d>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(Mt.cross(e,i,s),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+d,wi.normalize(r,r))}}(),wi.setAxes=function(){var e=ui.create();return function(n,t,r,i){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-t[0],e[5]=-t[1],e[8]=-t[2],wi.normalize(n,wi.fromMat3(n,e))}}(),wi.clone=Wn.clone,wi.fromValues=Wn.fromValues,wi.copy=Wn.copy,wi.set=Wn.set,wi.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},wi.setAxisAngle=function(e,n,t){t*=.5;var r=Math.sin(t);return e[0]=r*n[0],e[1]=r*n[1],e[2]=r*n[2],e[3]=Math.cos(t),e},wi.add=Wn.add,wi.multiply=function(e,n,t){var r=n[0],i=n[1],s=n[2],d=n[3],p=t[0],v=t[1],_=t[2],C=t[3];return e[0]=r*C+d*p+i*_-s*v,e[1]=i*C+d*v+s*p-r*_,e[2]=s*C+d*_+r*v-i*p,e[3]=d*C-r*p-i*v-s*_,e},wi.mul=wi.multiply,wi.scale=Wn.scale,wi.rotateX=function(e,n,t){t*=.5;var r=n[0],i=n[1],s=n[2],d=n[3],p=Math.sin(t),v=Math.cos(t);return e[0]=r*v+d*p,e[1]=i*v+s*p,e[2]=s*v-i*p,e[3]=d*v-r*p,e},wi.rotateY=function(e,n,t){t*=.5;var r=n[0],i=n[1],s=n[2],d=n[3],p=Math.sin(t),v=Math.cos(t);return e[0]=r*v-s*p,e[1]=i*v+d*p,e[2]=s*v+r*p,e[3]=d*v-i*p,e},wi.rotateZ=function(e,n,t){t*=.5;var r=n[0],i=n[1],s=n[2],d=n[3],p=Math.sin(t),v=Math.cos(t);return e[0]=r*v+i*p,e[1]=i*v-r*p,e[2]=s*v+d*p,e[3]=d*v-s*p,e},wi.calculateW=function(e,n){var t=n[0],r=n[1],i=n[2];return e[0]=t,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-t*t-r*r-i*i)),e},wi.dot=Wn.dot,wi.lerp=Wn.lerp,wi.slerp=function(e,n,t,r){var k,H,ne,pe,Me,i=n[0],s=n[1],d=n[2],p=n[3],v=t[0],_=t[1],C=t[2],S=t[3];return(H=i*v+s*_+d*C+p*S)<0&&(H=-H,v=-v,_=-_,C=-C,S=-S),1-H>1e-6?(k=Math.acos(H),ne=Math.sin(k),pe=Math.sin((1-r)*k)/ne,Me=Math.sin(r*k)/ne):(pe=1-r,Me=r),e[0]=pe*i+Me*v,e[1]=pe*s+Me*_,e[2]=pe*d+Me*C,e[3]=pe*p+Me*S,e},wi.invert=function(e,n){var t=n[0],r=n[1],i=n[2],s=n[3],d=t*t+r*r+i*i+s*s,p=d?1/d:0;return e[0]=-t*p,e[1]=-r*p,e[2]=-i*p,e[3]=s*p,e},wi.conjugate=function(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e[3]=n[3],e},wi.length=Wn.length,wi.len=wi.length,wi.squaredLength=Wn.squaredLength,wi.sqrLen=wi.squaredLength,wi.normalize=Wn.normalize,wi.fromMat3=function(e,n){var r,t=n[0]+n[4]+n[8];if(t>0)r=Math.sqrt(t+1),e[3]=.5*r,e[0]=(n[5]-n[7])*(r=.5/r),e[1]=(n[6]-n[2])*r,e[2]=(n[1]-n[3])*r;else{var i=0;n[4]>n[0]&&(i=1),n[8]>n[3*i+i]&&(i=2);var s=(i+1)%3,d=(i+2)%3;r=Math.sqrt(n[3*i+i]-n[3*s+s]-n[3*d+d]+1),e[i]=.5*r,e[3]=(n[3*s+d]-n[3*d+s])*(r=.5/r),e[s]=(n[3*s+i]+n[3*i+s])*r,e[d]=(n[3*d+i]+n[3*i+d])*r}return e};const Ir=wi;var la=function(){this._axisX=new Ln,this._axisY=new Ln,this._axisZ=new Ln,this.array=Tn.create(),this._dirty=!0};la.prototype={constructor:la,setArray:function(e){for(var n=0;n<this.array.length;n++)this.array[n]=e[n];return this._dirty=!0,this},adjoint:function(){return Tn.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return(new la).copy(this)},copy:function(e){return Tn.copy(this.array,e.array),this._dirty=!0,this},determinant:function(){return Tn.determinant(this.array)},fromQuat:function(e){return Tn.fromQuat(this.array,e.array),this._dirty=!0,this},fromRotationTranslation:function(e,n){return Tn.fromRotationTranslation(this.array,e.array,n.array),this._dirty=!0,this},fromMat2d:function(e){return la.fromMat2d(this,e),this},frustum:function(e,n,t,r,i,s){return Tn.frustum(this.array,e,n,t,r,i,s),this._dirty=!0,this},identity:function(){return Tn.identity(this.array),this._dirty=!0,this},invert:function(){return Tn.invert(this.array,this.array),this._dirty=!0,this},lookAt:function(e,n,t){return Tn.lookAt(this.array,e.array,n.array,t.array),this._dirty=!0,this},mul:function(e){return Tn.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return Tn.mul(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return Tn.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return Tn.multiply(this.array,e.array,this.array),this._dirty=!0,this},ortho:function(e,n,t,r,i,s){return Tn.ortho(this.array,e,n,t,r,i,s),this._dirty=!0,this},perspective:function(e,n,t,r){return Tn.perspective(this.array,e,n,t,r),this._dirty=!0,this},rotate:function(e,n){return Tn.rotate(this.array,this.array,e,n.array),this._dirty=!0,this},rotateX:function(e){return Tn.rotateX(this.array,this.array,e),this._dirty=!0,this},rotateY:function(e){return Tn.rotateY(this.array,this.array,e),this._dirty=!0,this},rotateZ:function(e){return Tn.rotateZ(this.array,this.array,e),this._dirty=!0,this},scale:function(e){return Tn.scale(this.array,this.array,e.array),this._dirty=!0,this},translate:function(e){return Tn.translate(this.array,this.array,e.array),this._dirty=!0,this},transpose:function(){return Tn.transpose(this.array,this.array),this._dirty=!0,this},decomposeMatrix:function(){var e=Mt.create(),n=Mt.create(),t=Mt.create(),r=ui.create();return function(i,s,d){var p=this.array;Mt.set(e,p[0],p[1],p[2]),Mt.set(n,p[4],p[5],p[6]),Mt.set(t,p[8],p[9],p[10]);var v=Mt.length(e),_=Mt.length(n),C=Mt.length(t);this.determinant()<0&&(v=-v),i&&i.set(v,_,C),d.set(p[12],p[13],p[14]),ui.fromMat4(r,p),r[0]/=v,r[1]/=v,r[2]/=v,r[3]/=_,r[4]/=_,r[5]/=_,r[6]/=C,r[7]/=C,r[8]/=C,Ir.fromMat3(s.array,r),Ir.normalize(s.array,s.array),s._dirty=!0,d._dirty=!0}}(),toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var pI=Object.defineProperty;if(pI){var t3=la.prototype;pI(t3,"z",{get:function(){var e=this.array;return this._axisZ.set(e[8],e[9],e[10]),this._axisZ},set:function(e){var n=this.array;n[8]=(e=e.array)[0],n[9]=e[1],n[10]=e[2],this._dirty=!0}}),pI(t3,"y",{get:function(){var e=this.array;return this._axisY.set(e[4],e[5],e[6]),this._axisY},set:function(e){var n=this.array;n[4]=(e=e.array)[0],n[5]=e[1],n[6]=e[2],this._dirty=!0}}),pI(t3,"x",{get:function(){var e=this.array;return this._axisX.set(e[0],e[1],e[2]),this._axisX},set:function(e){var n=this.array;n[0]=(e=e.array)[0],n[1]=e[1],n[2]=e[2],this._dirty=!0}})}la.adjoint=function(e,n){return Tn.adjoint(e.array,n.array),e._dirty=!0,e},la.copy=function(e,n){return Tn.copy(e.array,n.array),e._dirty=!0,e},la.determinant=function(e){return Tn.determinant(e.array)},la.identity=function(e){return Tn.identity(e.array),e._dirty=!0,e},la.ortho=function(e,n,t,r,i,s,d){return Tn.ortho(e.array,n,t,r,i,s,d),e._dirty=!0,e},la.perspective=function(e,n,t,r,i){return Tn.perspective(e.array,n,t,r,i),e._dirty=!0,e},la.lookAt=function(e,n,t,r){return Tn.lookAt(e.array,n.array,t.array,r.array),e._dirty=!0,e},la.invert=function(e,n){return Tn.invert(e.array,n.array),e._dirty=!0,e},la.multiply=la.mul=function(e,n,t){return Tn.mul(e.array,n.array,t.array),e._dirty=!0,e},la.fromQuat=function(e,n){return Tn.fromQuat(e.array,n.array),e._dirty=!0,e},la.fromRotationTranslation=function(e,n,t){return Tn.fromRotationTranslation(e.array,n.array,t.array),e._dirty=!0,e},la.fromMat2d=function(r,t){return r._dirty=!0,(r=r.array)[0]=(t=t.array)[0],r[4]=t[2],r[12]=t[4],r[1]=t[1],r[5]=t[3],r[13]=t[5],r},la.rotate=function(e,n,t,r){return Tn.rotate(e.array,n.array,t,r.array),e._dirty=!0,e},la.rotateX=function(e,n,t){return Tn.rotateX(e.array,n.array,t),e._dirty=!0,e},la.rotateY=function(e,n,t){return Tn.rotateY(e.array,n.array,t),e._dirty=!0,e},la.rotateZ=function(e,n,t){return Tn.rotateZ(e.array,n.array,t),e._dirty=!0,e},la.scale=function(e,n,t){return Tn.scale(e.array,n.array,t.array),e._dirty=!0,e},la.transpose=function(e,n){return Tn.transpose(e.array,n.array),e._dirty=!0,e},la.translate=function(e,n,t){return Tn.translate(e.array,n.array,t.array),e._dirty=!0,e};const tr=la;var Fi=function(e,n,t,r){this.array=Ir.fromValues(e=e||0,n=n||0,t=t||0,r=void 0===r?1:r),this._dirty=!0};Fi.prototype={constructor:Fi,add:function(e){return Ir.add(this.array,this.array,e.array),this._dirty=!0,this},calculateW:function(){return Ir.calculateW(this.array,this.array),this._dirty=!0,this},set:function(e,n,t,r){return this.array[0]=e,this.array[1]=n,this.array[2]=t,this.array[3]=r,this._dirty=!0,this},setArray:function(e){return this.array[0]=e[0],this.array[1]=e[1],this.array[2]=e[2],this.array[3]=e[3],this._dirty=!0,this},clone:function(){return new Fi(this.x,this.y,this.z,this.w)},conjugate:function(){return Ir.conjugate(this.array,this.array),this._dirty=!0,this},copy:function(e){return Ir.copy(this.array,e.array),this._dirty=!0,this},dot:function(e){return Ir.dot(this.array,e.array)},fromMat3:function(e){return Ir.fromMat3(this.array,e.array),this._dirty=!0,this},fromMat4:function(){var e=ui.create();return function(n){return ui.fromMat4(e,n.array),ui.transpose(e,e),Ir.fromMat3(this.array,e),this._dirty=!0,this}}(),identity:function(){return Ir.identity(this.array),this._dirty=!0,this},invert:function(){return Ir.invert(this.array,this.array),this._dirty=!0,this},len:function(){return Ir.len(this.array)},length:function(){return Ir.length(this.array)},lerp:function(e,n,t){return Ir.lerp(this.array,e.array,n.array,t),this._dirty=!0,this},mul:function(e){return Ir.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return Ir.multiply(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return Ir.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return Ir.multiply(this.array,e.array,this.array),this._dirty=!0,this},normalize:function(){return Ir.normalize(this.array,this.array),this._dirty=!0,this},rotateX:function(e){return Ir.rotateX(this.array,this.array,e),this._dirty=!0,this},rotateY:function(e){return Ir.rotateY(this.array,this.array,e),this._dirty=!0,this},rotateZ:function(e){return Ir.rotateZ(this.array,this.array,e),this._dirty=!0,this},rotationTo:function(e,n){return Ir.rotationTo(this.array,e.array,n.array),this._dirty=!0,this},setAxes:function(e,n,t){return Ir.setAxes(this.array,e.array,n.array,t.array),this._dirty=!0,this},setAxisAngle:function(e,n){return Ir.setAxisAngle(this.array,e.array,n),this._dirty=!0,this},slerp:function(e,n,t){return Ir.slerp(this.array,e.array,n.array,t),this._dirty=!0,this},sqrLen:function(){return Ir.sqrLen(this.array)},squaredLength:function(){return Ir.squaredLength(this.array)},fromEuler:function(e,n){return Fi.fromEuler(this,e,n)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var ZC=Object.defineProperty;if(ZC){var vI=Fi.prototype;ZC(vI,"x",{get:function(){return this.array[0]},set:function(e){this.array[0]=e,this._dirty=!0}}),ZC(vI,"y",{get:function(){return this.array[1]},set:function(e){this.array[1]=e,this._dirty=!0}}),ZC(vI,"z",{get:function(){return this.array[2]},set:function(e){this.array[2]=e,this._dirty=!0}}),ZC(vI,"w",{get:function(){return this.array[3]},set:function(e){this.array[3]=e,this._dirty=!0}})}Fi.add=function(e,n,t){return Ir.add(e.array,n.array,t.array),e._dirty=!0,e},Fi.set=function(e,n,t,r,i){Ir.set(e.array,n,t,r,i),e._dirty=!0},Fi.copy=function(e,n){return Ir.copy(e.array,n.array),e._dirty=!0,e},Fi.calculateW=function(e,n){return Ir.calculateW(e.array,n.array),e._dirty=!0,e},Fi.conjugate=function(e,n){return Ir.conjugate(e.array,n.array),e._dirty=!0,e},Fi.identity=function(e){return Ir.identity(e.array),e._dirty=!0,e},Fi.invert=function(e,n){return Ir.invert(e.array,n.array),e._dirty=!0,e},Fi.dot=function(e,n){return Ir.dot(e.array,n.array)},Fi.len=function(e){return Ir.length(e.array)},Fi.lerp=function(e,n,t,r){return Ir.lerp(e.array,n.array,t.array,r),e._dirty=!0,e},Fi.slerp=function(e,n,t,r){return Ir.slerp(e.array,n.array,t.array,r),e._dirty=!0,e},Fi.multiply=Fi.mul=function(e,n,t){return Ir.multiply(e.array,n.array,t.array),e._dirty=!0,e},Fi.rotateX=function(e,n,t){return Ir.rotateX(e.array,n.array,t),e._dirty=!0,e},Fi.rotateY=function(e,n,t){return Ir.rotateY(e.array,n.array,t),e._dirty=!0,e},Fi.rotateZ=function(e,n,t){return Ir.rotateZ(e.array,n.array,t),e._dirty=!0,e},Fi.setAxisAngle=function(e,n,t){return Ir.setAxisAngle(e.array,n.array,t),e._dirty=!0,e},Fi.normalize=function(e,n){return Ir.normalize(e.array,n.array),e._dirty=!0,e},Fi.squaredLength=Fi.sqrLen=function(e){return Ir.sqrLen(e.array)},Fi.fromMat3=function(e,n){return Ir.fromMat3(e.array,n.array),e._dirty=!0,e},Fi.setAxes=function(e,n,t,r){return Ir.setAxes(e.array,n.array,t.array,r.array),e._dirty=!0,e},Fi.rotationTo=function(e,n,t){return Ir.rotationTo(e.array,n.array,t.array),e._dirty=!0,e},Fi.fromEuler=function(e,n,C){e._dirty=!0,n=n.array;var r=e.array,i=Math.cos(n[0]/2),s=Math.cos(n[1]/2),d=Math.cos(n[2]/2),p=Math.sin(n[0]/2),v=Math.sin(n[1]/2),_=Math.sin(n[2]/2);switch(C=(C||"XYZ").toUpperCase()){case"XYZ":r[0]=p*s*d+i*v*_,r[1]=i*v*d-p*s*_,r[2]=i*s*_+p*v*d,r[3]=i*s*d-p*v*_;break;case"YXZ":r[0]=p*s*d+i*v*_,r[1]=i*v*d-p*s*_,r[2]=i*s*_-p*v*d,r[3]=i*s*d+p*v*_;break;case"ZXY":r[0]=p*s*d-i*v*_,r[1]=i*v*d+p*s*_,r[2]=i*s*_+p*v*d,r[3]=i*s*d-p*v*_;break;case"ZYX":r[0]=p*s*d-i*v*_,r[1]=i*v*d+p*s*_,r[2]=i*s*_-p*v*d,r[3]=i*s*d+p*v*_;break;case"YZX":r[0]=p*s*d+i*v*_,r[1]=i*v*d+p*s*_,r[2]=i*s*_-p*v*d,r[3]=i*s*d-p*v*_;break;case"XZY":r[0]=p*s*d-i*v*_,r[1]=i*v*d-p*s*_,r[2]=i*s*_+p*v*d,r[3]=i*s*d+p*v*_}};const l8=Fi;var xf=Mt.set,gI=Mt.copy,mI=function(e,n){this.min=e||new Ln(1/0,1/0,1/0),this.max=n||new Ln(-1/0,-1/0,-1/0),this.vertices=null};mI.prototype={constructor:mI,updateFromVertices:function(e){if(e.length>0){var n=this.min,t=this.max,r=n.array,i=t.array;gI(r,e[0]),gI(i,e[0]);for(var s=1;s<e.length;s++){var d=e[s];d[0]<r[0]&&(r[0]=d[0]),d[1]<r[1]&&(r[1]=d[1]),d[2]<r[2]&&(r[2]=d[2]),d[0]>i[0]&&(i[0]=d[0]),d[1]>i[1]&&(i[1]=d[1]),d[2]>i[2]&&(i[2]=d[2])}n._dirty=!0,t._dirty=!0}},union:function(e){var n=this.min,t=this.max;return Mt.min(n.array,n.array,e.min.array),Mt.max(t.array,t.array,e.max.array),n._dirty=!0,t._dirty=!0,this},intersection:function(e){var n=this.min,t=this.max;return Mt.max(n.array,n.array,e.min.array),Mt.min(t.array,t.array,e.max.array),n._dirty=!0,t._dirty=!0,this},intersectBoundingBox:function(e){var n=this.min.array,t=this.max.array,r=e.min.array,i=e.max.array;return!(n[0]>i[0]||n[1]>i[1]||n[2]>i[2]||t[0]<r[0]||t[1]<r[1]||t[2]<r[2])},containBoundingBox:function(e){var n=this.min.array,t=this.max.array,r=e.min.array,i=e.max.array;return n[0]<=r[0]&&n[1]<=r[1]&&n[2]<=r[2]&&t[0]>=i[0]&&t[1]>=i[1]&&t[2]>=i[2]},containPoint:function(e){var n=this.min.array,t=this.max.array,r=e.array;return n[0]<=r[0]&&n[1]<=r[1]&&n[2]<=r[2]&&t[0]>=r[0]&&t[1]>=r[1]&&t[2]>=r[2]},isFinite:function(){var e=this.min.array,n=this.max.array;return isFinite(e[0])&&isFinite(e[1])&&isFinite(e[2])&&isFinite(n[0])&&isFinite(n[1])&&isFinite(n[2])},applyTransform:function(e){this.transformFrom(this,e)},transformFrom:function(){var e=Mt.create(),n=Mt.create(),t=Mt.create(),r=Mt.create(),i=Mt.create(),s=Mt.create();return function(d,p){var v=d.min.array,_=d.max.array,C=p.array;return e[0]=C[0]*v[0],e[1]=C[1]*v[0],e[2]=C[2]*v[0],n[0]=C[0]*_[0],n[1]=C[1]*_[0],n[2]=C[2]*_[0],t[0]=C[4]*v[1],t[1]=C[5]*v[1],t[2]=C[6]*v[1],r[0]=C[4]*_[1],r[1]=C[5]*_[1],r[2]=C[6]*_[1],i[0]=C[8]*v[2],i[1]=C[9]*v[2],i[2]=C[10]*v[2],s[0]=C[8]*_[2],s[1]=C[9]*_[2],s[2]=C[10]*_[2],_=this.max.array,(v=this.min.array)[0]=Math.min(e[0],n[0])+Math.min(t[0],r[0])+Math.min(i[0],s[0])+C[12],v[1]=Math.min(e[1],n[1])+Math.min(t[1],r[1])+Math.min(i[1],s[1])+C[13],v[2]=Math.min(e[2],n[2])+Math.min(t[2],r[2])+Math.min(i[2],s[2])+C[14],_[0]=Math.max(e[0],n[0])+Math.max(t[0],r[0])+Math.max(i[0],s[0])+C[12],_[1]=Math.max(e[1],n[1])+Math.max(t[1],r[1])+Math.max(i[1],s[1])+C[13],_[2]=Math.max(e[2],n[2])+Math.max(t[2],r[2])+Math.max(i[2],s[2])+C[14],this.min._dirty=!0,this.max._dirty=!0,this}}(),applyProjection:function(e){var n=this.min.array,t=this.max.array,r=e.array,i=n[0],s=n[1],d=n[2],p=t[0],v=t[1],_=n[2],C=t[0],S=t[1],k=t[2];if(1===r[15])n[0]=r[0]*i+r[12],n[1]=r[5]*s+r[13],t[2]=r[10]*d+r[14],t[0]=r[0]*C+r[12],t[1]=r[5]*S+r[13],n[2]=r[10]*k+r[14];else{var H=-1/d;n[0]=r[0]*i*H,n[1]=r[5]*s*H,t[2]=(r[10]*d+r[14])*H,t[0]=r[0]*p*(H=-1/_),t[1]=r[5]*v*H,n[2]=(r[10]*k+r[14])*(H=-1/k)}return this.min._dirty=!0,this.max._dirty=!0,this},updateVertices:function(){var e=this.vertices;if(!e){e=[];for(var n=0;n<8;n++)e[n]=Mt.fromValues(0,0,0);this.vertices=e}var t=this.min.array,r=this.max.array;return xf(e[0],t[0],t[1],t[2]),xf(e[1],t[0],r[1],t[2]),xf(e[2],r[0],t[1],t[2]),xf(e[3],r[0],r[1],t[2]),xf(e[4],t[0],t[1],r[2]),xf(e[5],t[0],r[1],r[2]),xf(e[6],r[0],t[1],r[2]),xf(e[7],r[0],r[1],r[2]),this},copy:function(e){var n=this.min,t=this.max;return gI(n.array,e.min.array),gI(t.array,e.max.array),n._dirty=!0,t._dirty=!0,this},clone:function(){var e=new mI;return e.copy(this),e}};const Ws=mI;var ute=0,cte=Us.extend({name:"",position:null,rotation:null,scale:null,worldTransform:null,localTransform:null,autoUpdateLocalTransform:!0,_parent:null,_scene:null,_needsUpdateWorldTransform:!0,_inIterating:!1,__depth:0},function(){this.name||(this.name=(this.type||"NODE")+"_"+ute++),this.position||(this.position=new Ln),this.rotation||(this.rotation=new l8),this.scale||(this.scale=new Ln(1,1,1)),this.worldTransform=new tr,this.localTransform=new tr,this._children=[]},{target:null,invisible:!1,isSkinnedMesh:function(){return!1},isRenderable:function(){return!1},setName:function(e){var n=this._scene;if(n){var t=n._nodeRepository;delete t[this.name],t[e]=this}this.name=e},add:function(e){var n=e._parent;if(n!==this){n&&n.remove(e),e._parent=this,this._children.push(e);var t=this._scene;t&&t!==e.scene&&e.traverse(this._addSelfToScene,this),e._needsUpdateWorldTransform=!0}},remove:function(e){var n=this._children,t=n.indexOf(e);t<0||(n.splice(t,1),e._parent=null,this._scene&&e.traverse(this._removeSelfFromScene,this))},removeAll:function(){for(var e=this._children,n=0;n<e.length;n++)e[n]._parent=null,this._scene&&e[n].traverse(this._removeSelfFromScene,this);this._children=[]},getScene:function(){return this._scene},getParent:function(){return this._parent},_removeSelfFromScene:function(e){e._scene.removeFromScene(e),e._scene=null},_addSelfToScene:function(e){this._scene.addToScene(e),e._scene=this._scene},isAncestor:function(e){for(var n=e._parent;n;){if(n===this)return!0;n=n._parent}return!1},children:function(){return this._children.slice()},childAt:function(e){return this._children[e]},getChildByName:function(e){for(var n=this._children,t=0;t<n.length;t++)if(n[t].name===e)return n[t]},getDescendantByName:function(e){for(var n=this._children,t=0;t<n.length;t++){var r=n[t];if(r.name===e)return r;var i=r.getDescendantByName(e);if(i)return i}},queryNode:function(e){if(e){for(var n=e.split("/"),t=this,r=0;r<n.length;r++){var i=n[r];if(i){for(var s=!1,d=t._children,p=0;p<d.length;p++){var v=d[p];if(v.name===i){t=v,s=!0;break}}if(!s)return}}return t}},getPath:function(e){if(!this._parent)return"/";for(var n=this._parent,t=this.name;n._parent&&(t=n.name+"/"+t,n._parent!=e);)n=n._parent;return!n._parent&&e?null:t},traverse:function(e,n){e.call(n,this);for(var t=this._children,r=0,i=t.length;r<i;r++)t[r].traverse(e,n)},eachChild:function(e,n){for(var t=this._children,r=0,i=t.length;r<i;r++)e.call(n,t[r],r)},setLocalTransform:function(e){Tn.copy(this.localTransform.array,e.array),this.decomposeLocalTransform()},decomposeLocalTransform:function(e){this.localTransform.decomposeMatrix(e?null:this.scale,this.rotation,this.position)},setWorldTransform:function(e){Tn.copy(this.worldTransform.array,e.array),this.decomposeWorldTransform()},decomposeWorldTransform:function(){var e=Tn.create();return function(n){var t=this.localTransform,r=this.worldTransform;this._parent?(Tn.invert(e,this._parent.worldTransform.array),Tn.multiply(t.array,e,r.array)):Tn.copy(t.array,r.array),t.decomposeMatrix(n?null:this.scale,this.rotation,this.position)}}(),transformNeedsUpdate:function(){return this.position._dirty||this.rotation._dirty||this.scale._dirty},updateLocalTransform:function(){var e=this.position,n=this.rotation,t=this.scale;if(this.transformNeedsUpdate()){var r=this.localTransform.array;Tn.fromRotationTranslation(r,n.array,e.array),Tn.scale(r,r,t.array),n._dirty=!1,t._dirty=!1,e._dirty=!1,this._needsUpdateWorldTransform=!0}},_updateWorldTransformTopDown:function(){var e=this.localTransform.array,n=this.worldTransform.array;this._parent?Tn.multiplyAffine(n,this._parent.worldTransform.array,e):Tn.copy(n,e)},updateWorldTransform:function(){for(var e=this;e&&e.getParent()&&e.getParent().transformNeedsUpdate();)e=e.getParent();e.update()},update:function(e){this.autoUpdateLocalTransform?this.updateLocalTransform():e=!0,(e||this._needsUpdateWorldTransform)&&(this._updateWorldTransformTopDown(),e=!0,this._needsUpdateWorldTransform=!1);for(var n=this._children,t=0,r=n.length;t<r;t++)n[t].update(e)},getBoundingBox:function(){function e(i){return!i.invisible&&i.geometry}var n=new Ws,t=new tr,r=new tr;return function(i,s){return s=s||new Ws,i=i||e,this._parent?tr.invert(r,this._parent.worldTransform):tr.identity(r),this.traverse(function(d){d.geometry&&d.geometry.boundingBox&&(n.copy(d.geometry.boundingBox),tr.multiply(t,r,d.worldTransform),n.applyTransform(t),s.union(n))},this,e),s}}(),getWorldPosition:function(e){this.transformNeedsUpdate()&&this.updateWorldTransform();var n=this.worldTransform.array;if(e){var t=e.array;return t[0]=n[12],t[1]=n[13],t[2]=n[14],e}return new Ln(n[12],n[13],n[14])},clone:function(){var e=new this.constructor,n=this._children;e.setName(this.name),e.position.copy(this.position),e.rotation.copy(this.rotation),e.scale.copy(this.scale);for(var t=0;t<n.length;t++)e.add(n[t].clone());return e},rotateAround:function(){var e=new Ln,n=new tr;return function(t,r,i){e.copy(this.position).subtract(t);var s=this.localTransform;s.identity(),s.translate(t),s.rotate(i,r),n.fromRotationTranslation(this.rotation,e),s.multiply(n),s.scale(this.scale),this.decomposeLocalTransform(),this._needsUpdateWorldTransform=!0}}(),lookAt:function(){var e=new tr;return function(n,t){e.lookAt(this.position,n,t||this.localTransform.y).invert(),this.setLocalTransform(e),this.target=n}}()});const Kc=cte;var Ul=Kc.extend({material:null,geometry:null,mode:4,_renderInfo:null},{__program:null,lightGroup:0,renderOrder:0,culling:!0,cullFace:1029,frontFace:2305,frustumCulling:!0,receiveShadow:!0,castShadow:!0,ignorePicking:!1,ignorePreZ:!1,ignoreGBuffer:!1,isRenderable:function(){return this.geometry&&this.material&&this.material.shader&&!this.invisible&&this.geometry.vertexCount>0},beforeRender:function(e){},afterRender:function(e,n){},getBoundingBox:function(e,n){return n=Kc.prototype.getBoundingBox.call(this,e,n),this.geometry&&this.geometry.boundingBox&&n.union(this.geometry.boundingBox),n},clone:function(){var e=["castShadow","receiveShadow","mode","culling","cullFace","frontFace","frustumCulling","renderOrder","lineWidth","ignorePicking","ignorePreZ","ignoreGBuffer"];return function(){var n=Kc.prototype.clone.call(this);n.geometry=this.geometry,n.material=this.material;for(var t=0;t<e.length;t++){var r=e[t];n[r]!==this[r]&&(n[r]=this[r])}return n}}()});Ul.POINTS=0,Ul.LINES=1,Ul.LINE_LOOP=2,Ul.LINE_STRIP=3,Ul.TRIANGLES=4,Ul.TRIANGLE_STRIP=5,Ul.TRIANGLE_FAN=6,Ul.BACK=1029,Ul.FRONT=1028,Ul.FRONT_AND_BACK=1032,Ul.CW=2304,Ul.CCW=2305;const n3=Ul;var r3=Us.extend({scene:null,camera:null,renderer:null},function(){this._ray=new fI,this._ndc=new Hl},{pick:function(e,n,t){return this.pickAll(e,n,[],t)[0]||null},pickAll:function(e,n,t,r){return this.renderer.screenToNDC(e,n,this._ndc),this.camera.castRay(this._ndc,this._ray),this._intersectNode(this.scene,t=t||[],r||!1),t.sort(this._intersectionCompareFunc),t},_intersectNode:function(e,n,t){e instanceof n3&&e.isRenderable()&&(!e.ignorePicking||t)&&(4===e.mode&&e.geometry.isUseIndices()||e.geometry.pickByRay||e.geometry.pick)&&this._intersectRenderable(e,n);for(var r=0;r<e._children.length;r++)this._intersectNode(e._children[r],n,t)},_intersectRenderable:function(){var e=new Ln,n=new Ln,t=new Ln,r=new fI,i=new tr;return function(s,d){var p=s.isSkinnedMesh();r.copy(this._ray),tr.invert(i,s.worldTransform),p||r.applyTransform(i);var v=s.geometry,_=p?s.skeleton.boundingBox:v.boundingBox;if(!_||r.intersectBoundingBox(_)){if(v.pick)return void v.pick(this._ndc.x,this._ndc.y,this.renderer,this.camera,s,d);if(v.pickByRay)return void v.pickByRay(r,s,d);var S,Me,C=1029===s.cullFace&&2305===s.frontFace||1028===s.cullFace&&2304===s.frontFace,k=v.indices,H=v.attributes.position,ne=v.attributes.weight,pe=v.attributes.joint,Re=[];if(H&&H.value&&k){if(p){Me=s.skeleton.getSubSkinMatrices(s.__uid__,s.joints);for(var Fe=0;Fe<s.joints.length;Fe++){Re[Fe]=Re[Fe]||[];for(var Oe=0;Oe<16;Oe++)Re[Fe][Oe]=Me[16*Fe+Oe]}var Be=[],nt=[],rt=[],Ct=[],mt=[],Ft=v.attributes.skinnedPosition;for((!Ft||!Ft.value)&&(v.createAttribute("skinnedPosition","f",3),(Ft=v.attributes.skinnedPosition).init(v.vertexCount)),Fe=0;Fe<v.vertexCount;Fe++){for(H.get(Fe,Be),ne.get(Fe,nt),pe.get(Fe,rt),nt[3]=1-nt[0]-nt[1]-nt[2],Mt.set(Ct,0,0,0),Oe=0;Oe<4;Oe++)rt[Oe]>=0&&nt[Oe]>1e-4&&(Mt.transformMat4(mt,Be,Re[rt[Oe]]),Mt.scaleAndAdd(Ct,Ct,mt,nt[Oe]));Ft.set(Fe,Ct)}}for(Fe=0;Fe<k.length;Fe+=3){var nn=k[Fe],Xt=k[Fe+1],pn=k[Fe+2],mn=p?v.attributes.skinnedPosition:H;if(mn.get(nn,e.array),mn.get(Xt,n.array),mn.get(pn,t.array),S=C?r.intersectTriangle(e,n,t,s.culling):r.intersectTriangle(e,t,n,s.culling)){var on=new Ln;p?Ln.copy(on,S):Ln.transformMat4(on,S,s.worldTransform),d.push(new r3.Intersection(S,on,s,[nn,Xt,pn],Fe/3,Ln.dist(on,this._ray.origin)))}}}}}}(),_intersectionCompareFunc:function(e,n){return e.distance-n.distance}});r3.Intersection=function(e,n,t,r,i,s){this.point=e,this.pointWorld=n,this.target=t,this.triangle=r,this.triangleIndex=i,this.distance=s};const dte=r3;var YC="__dt__",_I=function(){this._contextId=0,this._caches=[],this._context={}};(_I.prototype={use:function(e,n){var t=this._caches;t[e]||(t[e]={},n&&(t[e]=n())),this._contextId=e,this._context=t[e]},put:function(e,n){this._context[e]=n},get:function(e){return this._context[e]},dirty:function(e){this.put(YC+(e=e||""),!0)},dirtyAll:function(e){for(var n=YC+(e=e||""),t=this._caches,r=0;r<t.length;r++)t[r]&&(t[r][n]=!0)},fresh:function(e){this.put(YC+(e=e||""),!1)},freshAll:function(e){for(var n=YC+(e=e||""),t=this._caches,r=0;r<t.length;r++)t[r]&&(t[r][n]=!1)},isDirty:function(e){var n=YC+(e=e||""),t=this._context;return!t.hasOwnProperty(n)||!0===t[n]},deleteContext:function(e){delete this._caches[e],this._context={}},delete:function(e){delete this._context[e]},clearAll:function(){this._caches={}},getContext:function(){return this._context},eachContext:function(e,n){Object.keys(this._caches).forEach(function(r){e&&e.call(n,r)})},miss:function(e){return!this._context.hasOwnProperty(e)}}).constructor=_I;const a3=_I;var di=Us.extend({width:512,height:512,type:5121,format:6408,wrapS:10497,wrapT:10497,minFilter:9987,magFilter:9729,useMipmap:!0,anisotropic:1,flipY:!0,sRGB:!0,unpackAlignment:4,premultiplyAlpha:!1,dynamic:!1,NPOT:!1,__used:0},function(){this._cache=new a3},{getWebGLTexture:function(e){var n=e.gl,t=this._cache;return t.use(e.__uid__),t.miss("webgl_texture")&&t.put("webgl_texture",n.createTexture()),this.dynamic?this.update(e):t.isDirty()&&(this.update(e),t.fresh()),t.get("webgl_texture")},bind:function(){},unbind:function(){},dirty:function(){this._cache&&this._cache.dirtyAll()},update:function(e){},updateCommon:function(e){var n=e.gl;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,this.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,this.unpackAlignment),6402===this.format&&(this.useMipmap=!1);var t=e.getGLExtension("EXT_sRGB");this.format===di.SRGB&&!t&&(this.format=di.RGB),this.format===di.SRGB_ALPHA&&!t&&(this.format=di.RGBA),this.NPOT=!this.isPowerOfTwo()},getAvailableWrapS:function(){return this.NPOT?33071:this.wrapS},getAvailableWrapT:function(){return this.NPOT?33071:this.wrapT},getAvailableMinFilter:function(){var e=this.minFilter;return this.NPOT||!this.useMipmap?9984===e||9986===e?9728:9987===e||9985===e?9729:e:e},getAvailableMagFilter:function(){return this.magFilter},nextHighestPowerOfTwo:function(e){--e;for(var n=1;n<32;n<<=1)e|=e>>n;return e+1},dispose:function(e){var n=this._cache;n.use(e.__uid__);var t=n.get("webgl_texture");t&&e.gl.deleteTexture(t),n.deleteContext(e.__uid__)},isRenderable:function(){},isPowerOfTwo:function(){}});Object.defineProperty(di.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e}}),Object.defineProperty(di.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e}}),di.BYTE=5120,di.UNSIGNED_BYTE=5121,di.SHORT=5122,di.UNSIGNED_SHORT=5123,di.INT=5124,di.UNSIGNED_INT=5125,di.FLOAT=5126,di.HALF_FLOAT=36193,di.UNSIGNED_INT_24_8_WEBGL=34042,di.DEPTH_COMPONENT=6402,di.DEPTH_STENCIL=34041,di.ALPHA=6406,di.RGB=6407,di.RGBA=6408,di.LUMINANCE=6409,di.LUMINANCE_ALPHA=6410,di.SRGB=35904,di.SRGB_ALPHA=35906,di.COMPRESSED_RGB_S3TC_DXT1_EXT=33776,di.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777,di.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778,di.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779,di.NEAREST=9728,di.LINEAR=9729,di.NEAREST_MIPMAP_NEAREST=9984,di.LINEAR_MIPMAP_NEAREST=9985,di.NEAREST_MIPMAP_LINEAR=9986,di.LINEAR_MIPMAP_LINEAR=9987,di.REPEAT=10497,di.CLAMP_TO_EDGE=33071,di.MIRRORED_REPEAT=33648;const dr=di;var Gl=n3.extend({skeleton:null,joints:null},function(){this.joints||(this.joints=[])},{offsetMatrix:null,isInstancedMesh:function(){return!1},isSkinnedMesh:function(){return!!(this.skeleton&&this.joints&&this.joints.length>0)},clone:function(){var e=n3.prototype.clone.call(this);return e.skeleton=this.skeleton,this.joints&&(e.joints=this.joints.slice()),e}});Gl.POINTS=0,Gl.LINES=1,Gl.LINE_LOOP=2,Gl.LINE_STRIP=3,Gl.TRIANGLES=4,Gl.TRIANGLE_STRIP=5,Gl.TRIANGLE_FAN=6,Gl.BACK=1029,Gl.FRONT=1028,Gl.FRONT_AND_BACK=1032,Gl.CW=2304,Gl.CCW=2305;const Vv=Gl;var yI={isPowerOfTwo:function(e){return 0==(e&e-1)},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))}};const u8=yI;var c8=u8.isPowerOfTwo;function d8(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))}var o3=dr.extend(function(){return{image:null,pixels:null,mipmaps:[],convertToPOT:!1}},{textureType:"texture2D",update:function(e){var n=e.gl;n.bindTexture(n.TEXTURE_2D,this._cache.get("webgl_texture")),this.updateCommon(e);var t=this.format,r=this.type,i=!(!this.convertToPOT||this.mipmaps.length||!this.image||this.wrapS!==dr.REPEAT&&this.wrapT!==dr.REPEAT||!this.NPOT);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,i?this.wrapS:this.getAvailableWrapS()),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,i?this.wrapT:this.getAvailableWrapT()),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,i?this.magFilter:this.getAvailableMagFilter()),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,i?this.minFilter:this.getAvailableMinFilter());var s=e.getGLExtension("EXT_texture_filter_anisotropic");if(s&&this.anisotropic>1&&n.texParameterf(n.TEXTURE_2D,s.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),36193===r&&(e.getGLExtension("OES_texture_half_float")||(r=5126)),this.mipmaps.length)for(var p=this.width,v=this.height,_=0;_<this.mipmaps.length;_++)this._updateTextureData(n,this.mipmaps[_],_,p,v,t,r,!1),p/=2,v/=2;else this._updateTextureData(n,this,0,this.width,this.height,t,r,i),this.useMipmap&&(!this.NPOT||i)&&n.generateMipmap(n.TEXTURE_2D);n.bindTexture(n.TEXTURE_2D,null)},_updateTextureData:function(e,n,t,r,i,s,d,p){if(n.image){var v=n.image;p&&(this._potCanvas=function hte(e,n){var t=d8(e.width),r=d8(e.height);return(n=n||document.createElement("canvas")).width=t,n.height=r,n.getContext("2d").drawImage(e.image,0,0,t,r),n}(this,this._potCanvas),v=this._potCanvas),e.texImage2D(e.TEXTURE_2D,t,s,s,d,v)}else s<=dr.COMPRESSED_RGBA_S3TC_DXT5_EXT&&s>=dr.COMPRESSED_RGB_S3TC_DXT1_EXT?e.compressedTexImage2D(e.TEXTURE_2D,t,s,r,i,0,n.pixels):e.texImage2D(e.TEXTURE_2D,t,s,r,i,0,s,d,n.pixels)},generateMipmap:function(e){var n=e.gl;this.useMipmap&&!this.NPOT&&(n.bindTexture(n.TEXTURE_2D,this._cache.get("webgl_texture")),n.generateMipmap(n.TEXTURE_2D))},isPowerOfTwo:function(){return c8(this.width)&&c8(this.height)},isRenderable:function(){return this.image?this.image.width>0&&this.image.height>0:!(!this.width||!this.height)},bind:function(e){e.gl.bindTexture(e.gl.TEXTURE_2D,this.getWebGLTexture(e))},unbind:function(e){e.gl.bindTexture(e.gl.TEXTURE_2D,null)},load:function(e,n){var t=oo.createImage();n&&(t.crossOrigin=n);var r=this;return t.onload=function(){r.dirty(),r.trigger("success",r)},t.onerror=function(){r.trigger("error",r)},t.src=e,this.image=t,this}});Object.defineProperty(o3.prototype,"width",{get:function(){return this.image?this.image.width:this._width},set:function(e){this.image?console.warn("Texture from image can't set width"):(this._width!==e&&this.dirty(),this._width=e)}}),Object.defineProperty(o3.prototype,"height",{get:function(){return this.image?this.image.height:this._height},set:function(e){this.image?console.warn("Texture from image can't set height"):(this._height!==e&&this.dirty(),this._height=e)}});const $r=o3;function h8(e){return{byte:oo.Int8Array,ubyte:oo.Uint8Array,short:oo.Int16Array,ushort:oo.Uint16Array}[e]||oo.Float32Array}function s3(e){return"attr_"+e}function Py(e,n,t,r){switch(this.name=e,this.type=n,this.size=t,this.semantic=r||"",this.value=null,t){case 1:this.get=function(i){return this.value[i]},this.set=function(i,s){this.value[i]=s},this.copy=function(i,s){this.value[i]=this.value[i]};break;case 2:this.get=function(i,s){var d=this.value;return s[0]=d[2*i],s[1]=d[2*i+1],s},this.set=function(i,s){var d=this.value;d[2*i]=s[0],d[2*i+1]=s[1]},this.copy=function(i,s){var d=this.value;d[i*=2]=d[s*=2],d[i+1]=d[s+1]};break;case 3:this.get=function(i,s){var d=3*i,p=this.value;return s[0]=p[d],s[1]=p[d+1],s[2]=p[d+2],s},this.set=function(i,s){var d=3*i,p=this.value;p[d]=s[0],p[d+1]=s[1],p[d+2]=s[2]},this.copy=function(i,s){var d=this.value;d[i*=3]=d[s*=3],d[i+1]=d[s+1],d[i+2]=d[s+2]};break;case 4:this.get=function(i,s){var d=this.value,p=4*i;return s[0]=d[p],s[1]=d[p+1],s[2]=d[p+2],s[3]=d[p+3],s},this.set=function(i,s){var d=this.value,p=4*i;d[p]=s[0],d[p+1]=s[1],d[p+2]=s[2],d[p+3]=s[3]},this.copy=function(i,s){var d=this.value;d[i*=4]=d[s*=4],d[i+1]=d[s+1],d[i+2]=d[s+2],d[i+3]=d[s+3]}}}function f8(e,n,t,r,i){this.name=e,this.type=n,this.buffer=t,this.size=r,this.semantic=i,this.symbol="",this.needsRemove=!1}function p8(e){this.buffer=e,this.count=0}Py.prototype.init=function(e){if(!this.value||this.value.length!==e*this.size){var n=h8(this.type);this.value=new n(e*this.size)}},Py.prototype.fromArray=function(e){var t,n=h8(this.type);if(e[0]&&e[0].length){var r=0,i=this.size;t=new n(e.length*i);for(var s=0;s<e.length;s++)for(var d=0;d<i;d++)t[r++]=e[s][d]}else t=new n(e);this.value=t},Py.prototype.clone=function(e){var n=new Py(this.name,this.type,this.size,this.semantic);return e&&console.warn("todo"),n};var th=Us.extend(function(){return{attributes:{},indices:null,dynamic:!0,_enabledAttributes:null,__used:0}},function(){this._cache=new a3,this._attributeList=Object.keys(this.attributes),this.__vaoCache={}},{mainAttribute:"",pick:null,pickByRay:null,dirty:function(){for(var e=this.getEnabledAttributes(),n=0;n<e.length;n++)this.dirtyAttribute(e[n]);this.dirtyIndices(),this._enabledAttributes=null,this._cache.dirty("any")},dirtyIndices:function(){this._cache.dirtyAll("indices")},dirtyAttribute:function(e){this._cache.dirtyAll(s3(e)),this._cache.dirtyAll("attributes")},getTriangleIndices:function(e,n){if(e<this.triangleCount&&e>=0){n||(n=[]);var t=this.indices;return n[0]=t[3*e],n[1]=t[3*e+1],n[2]=t[3*e+2],n}},setTriangleIndices:function(e,n){var t=this.indices;t[3*e]=n[0],t[3*e+1]=n[1],t[3*e+2]=n[2]},isUseIndices:function(){return!!this.indices},initIndicesFromArray:function(e){var n,t=this.vertexCount>65535?oo.Uint32Array:oo.Uint16Array;if(e[0]&&e[0].length){var r=0;n=new t(3*e.length);for(var s=0;s<e.length;s++)for(var d=0;d<3;d++)n[r++]=e[s][d]}else n=new t(e);this.indices=n},createAttribute:function(e,n,t,r){var i=new Py(e,n,t,r);return this.attributes[e]&&this.removeAttribute(e),this.attributes[e]=i,this._attributeList.push(e),i},removeAttribute:function(e){var n=this._attributeList,t=n.indexOf(e);return t>=0&&(n.splice(t,1),delete this.attributes[e],!0)},getAttribute:function(e){return this.attributes[e]},getEnabledAttributes:function(){var e=this._enabledAttributes,n=this._attributeList;if(e)return e;for(var t=[],r=this.vertexCount,i=0;i<n.length;i++){var s=n[i],d=this.attributes[s];d.value&&d.value.length===r*d.size&&t.push(s)}return this._enabledAttributes=t,t},getBufferChunks:function(e){var n=this._cache;n.use(e.__uid__);var t=n.isDirty("attributes"),r=n.isDirty("indices");if(t||r){this._updateBuffer(e.gl,t,r);for(var i=this.getEnabledAttributes(),s=0;s<i.length;s++)n.fresh(s3(i[s]));n.fresh("attributes"),n.fresh("indices")}return n.fresh("any"),n.get("chunks")},_updateBuffer:function(e,n,t){var r=this._cache,i=r.get("chunks"),s=!1;i||((i=[])[0]={attributeBuffers:[],indicesBuffer:null},r.put("chunks",i),s=!0);var d=i[0],p=d.attributeBuffers,v=d.indicesBuffer;if(n||s){var _=this.getEnabledAttributes(),C={};if(!s)for(var S=0;S<p.length;S++)C[p[S].name]=p[S];for(var k=0;k<_.length;k++){var pe,Me,H=_[k],ne=this.attributes[H];s||(pe=C[H]),Me=pe?pe.buffer:e.createBuffer(),r.isDirty(s3(H))&&(e.bindBuffer(e.ARRAY_BUFFER,Me),e.bufferData(e.ARRAY_BUFFER,ne.value,this.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW)),p[k]=new f8(H,ne.type,Me,ne.size,ne.semantic)}for(S=k;S<p.length;S++)e.deleteBuffer(p[S].buffer);p.length=k}this.isUseIndices()&&(t||s)&&(v||(v=new p8(e.createBuffer()),d.indicesBuffer=v),v.count=this.indices.length,e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,v.buffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,this.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW))},dispose:function(e){var n=this._cache;n.use(e.__uid__);var t=n.get("chunks");if(t)for(var r=0;r<t.length;r++){for(var i=t[r],s=0;s<i.attributeBuffers.length;s++)e.gl.deleteBuffer(i.attributeBuffers[s].buffer);i.indicesBuffer&&e.gl.deleteBuffer(i.indicesBuffer.buffer)}if(this.__vaoCache){var p=e.getGLExtension("OES_vertex_array_object");for(var v in this.__vaoCache){var _=this.__vaoCache[v].vao;_&&p.deleteVertexArrayOES(_)}}this.__vaoCache={},n.deleteContext(e.__uid__)}});Object.defineProperty&&(Object.defineProperty(th.prototype,"vertexCount",{enumerable:!1,get:function(){var e=this.attributes[this.mainAttribute];return e||(e=this.attributes[this._attributeList[0]]),e&&e.value?e.value.length/e.size:0}}),Object.defineProperty(th.prototype,"triangleCount",{enumerable:!1,get:function(){var e=this.indices;return e?e.length/3:0}})),th.STATIC_DRAW=35044,th.DYNAMIC_DRAW=35048,th.STREAM_DRAW=35040,th.AttributeBuffer=f8,th.IndicesBuffer=p8,th.Attribute=Py;const zv=th;var js=Mt.create,Ry=Mt.add,Hv=Mt.set,Qc=zv.Attribute,Uv=zv.extend(function(){return{attributes:{position:new Qc("position","float",3,"POSITION"),texcoord0:new Qc("texcoord0","float",2,"TEXCOORD_0"),texcoord1:new Qc("texcoord1","float",2,"TEXCOORD_1"),normal:new Qc("normal","float",3,"NORMAL"),tangent:new Qc("tangent","float",4,"TANGENT"),color:new Qc("color","float",4,"COLOR"),weight:new Qc("weight","float",3,"WEIGHT"),joint:new Qc("joint","float",4,"JOINT"),barycentric:new Qc("barycentric","float",3,null)},boundingBox:null}},{mainAttribute:"position",updateBoundingBox:function(){var e=this.boundingBox;e||(e=this.boundingBox=new Ws);var n=this.attributes.position.value;if(n&&n.length){var t=e.min,r=e.max,i=t.array,s=r.array;Mt.set(i,n[0],n[1],n[2]),Mt.set(s,n[0],n[1],n[2]);for(var d=3;d<n.length;){var p=n[d++],v=n[d++],_=n[d++];p<i[0]&&(i[0]=p),v<i[1]&&(i[1]=v),_<i[2]&&(i[2]=_),p>s[0]&&(s[0]=p),v>s[1]&&(s[1]=v),_>s[2]&&(s[2]=_)}t._dirty=!0,r._dirty=!0}},generateVertexNormals:function(){if(this.vertexCount){var e=this.indices,n=this.attributes,t=n.position.value,r=n.normal.value;if(r&&r.length===t.length)for(var i=0;i<r.length;i++)r[i]=0;else r=n.normal.value=new oo.Float32Array(t.length);for(var k,H,ne,s=js(),d=js(),p=js(),v=js(),_=js(),C=js(),S=e?e.length:this.vertexCount,pe=0;pe<S;)for(e?(k=e[pe++],H=e[pe++],ne=e[pe++]):(k=pe++,H=pe++,ne=pe++),Hv(s,t[3*k],t[3*k+1],t[3*k+2]),Hv(d,t[3*H],t[3*H+1],t[3*H+2]),Hv(p,t[3*ne],t[3*ne+1],t[3*ne+2]),Mt.sub(v,s,d),Mt.sub(_,d,p),Mt.cross(C,v,_),i=0;i<3;i++)r[3*k+i]=r[3*k+i]+C[i],r[3*H+i]=r[3*H+i]+C[i],r[3*ne+i]=r[3*ne+i]+C[i];for(i=0;i<r.length;)Hv(C,r[i],r[i+1],r[i+2]),Mt.normalize(C,C),r[i++]=C[0],r[i++]=C[1],r[i++]=C[2];this.dirty()}},generateFaceNormals:function(){if(this.vertexCount){this.isUniqueVertex()||this.generateUniqueVertex();var e=this.indices,n=this.attributes,t=n.position.value,r=n.normal.value,i=js(),s=js(),d=js(),p=js(),v=js(),_=js();r||(r=n.normal.value=new Float32Array(t.length));for(var S,k,H,C=e?e.length:this.vertexCount,ne=0;ne<C;){e?(S=e[ne++],k=e[ne++],H=e[ne++]):(S=ne++,k=ne++,H=ne++),Hv(i,t[3*S],t[3*S+1],t[3*S+2]),Hv(s,t[3*k],t[3*k+1],t[3*k+2]),Hv(d,t[3*H],t[3*H+1],t[3*H+2]),Mt.sub(p,i,s),Mt.sub(v,s,d),Mt.cross(_,p,v),Mt.normalize(_,_);for(var pe=0;pe<3;pe++)r[3*S+pe]=_[pe],r[3*k+pe]=_[pe],r[3*H+pe]=_[pe]}this.dirty()}},generateTangents:function(){if(this.vertexCount){var e=this.vertexCount,n=this.attributes;n.tangent.value||(n.tangent.value=new Float32Array(4*e));var t=n.texcoord0.value,r=n.position.value,i=n.tangent.value,s=n.normal.value;if(!t)return void console.warn("Geometry without texcoords can't generate tangents.");for(var d=[],p=[],v=0;v<e;v++)d[v]=[0,0,0],p[v]=[0,0,0];var H,ne,pe,_=[0,0,0],C=[0,0,0],S=this.indices,k=S?S.length:this.vertexCount;for(v=0;v<k;){S?(H=S[v++],ne=S[v++],pe=S[v++]):(H=v++,ne=v++,pe=v++);var Me=t[2*H],Oe=t[2*H+1],rt=r[3*H],Ft=r[3*H+1],pn=r[3*H+2],Cn=r[3*ne]-rt,Ht=r[3*pe]-rt,ln=r[3*ne+1]-Ft,Zt=r[3*pe+1]-Ft,Zn=r[3*ne+2]-pn,An=r[3*pe+2]-pn,ri=t[2*ne]-Me,kr=t[2*pe]-Me,gi=t[2*ne+1]-Oe,Dr=t[2*pe+1]-Oe,qr=1/(ri*Dr-gi*kr);_[0]=(Dr*Cn-gi*Ht)*qr,_[1]=(Dr*ln-gi*Zt)*qr,_[2]=(Dr*Zn-gi*An)*qr,C[0]=(ri*Ht-kr*Cn)*qr,C[1]=(ri*Zt-kr*ln)*qr,C[2]=(ri*An-kr*Zn)*qr,Ry(d[H],d[H],_),Ry(d[ne],d[ne],_),Ry(d[pe],d[pe],_),Ry(p[H],p[H],C),Ry(p[ne],p[ne],C),Ry(p[pe],p[pe],C)}var Qa=js(),ii=js(),Wi=js();for(v=0;v<e;v++){Wi[0]=s[3*v],Wi[1]=s[3*v+1],Wi[2]=s[3*v+2];var ji=d[v];Mt.scale(Qa,Wi,Mt.dot(Wi,ji)),Mt.sub(Qa,ji,Qa),Mt.normalize(Qa,Qa),Mt.cross(ii,Wi,ji),i[4*v]=Qa[0],i[4*v+1]=Qa[1],i[4*v+2]=Qa[2],i[4*v+3]=Mt.dot(ii,p[v])<0?-1:1}this.dirty()}},isUniqueVertex:function(){return!this.isUseIndices()||this.vertexCount===this.indices.length},generateUniqueVertex:function(){if(this.vertexCount&&this.indices){this.indices.length>65535&&(this.indices=new oo.Uint32Array(this.indices));for(var e=this.attributes,n=this.indices,t=this.getEnabledAttributes(),r={},i=0;i<t.length;i++)r[s=t[i]]=e[s].value,e[s].init(this.indices.length);for(var d=0,p=0;p<n.length;p++){var v=n[p];for(i=0;i<t.length;i++)for(var s,_=e[s=t[i]].value,C=e[s].size,S=0;S<C;S++)_[d*C+S]=r[s][v*C+S];n[p]=d,d++}this.dirty()}},generateBarycentric:function(){if(this.vertexCount){this.isUniqueVertex()||this.generateUniqueVertex();var e=this.attributes,n=e.barycentric.value,t=this.indices;if(!n||n.length!==3*t.length){n=e.barycentric.value=new Float32Array(3*t.length);for(var r=0;r<(t?t.length:this.vertexCount/3);)for(var i=0;i<3;i++)n[3*(t?t[r++]:3*r+i)+i]=1;this.dirty()}}},applyTransform:function(e){var n=this.attributes,t=n.position.value,r=n.normal.value,i=n.tangent.value;e=e.array;var s=Tn.create();Tn.invert(s,e),Tn.transpose(s,s);var d=Mt.transformMat4,p=Mt.forEach;p(t,3,0,null,d,e),r&&p(r,3,0,null,d,s),i&&p(i,4,0,null,d,s),this.boundingBox&&this.updateBoundingBox()},dispose:function(e){var n=this._cache;n.use(e.__uid__);var t=n.get("chunks");if(t)for(var r=0;r<t.length;r++){for(var i=t[r],s=0;s<i.attributeBuffers.length;s++)e.gl.deleteBuffer(i.attributeBuffers[s].buffer);i.indicesBuffer&&e.gl.deleteBuffer(i.indicesBuffer.buffer)}if(this.__vaoCache){var p=e.getGLExtension("OES_vertex_array_object");for(var v in this.__vaoCache){var _=this.__vaoCache[v].vao;_&&p.deleteVertexArrayOES(_)}}this.__vaoCache={},n.deleteContext(e.__uid__)}});Uv.STATIC_DRAW=zv.STATIC_DRAW,Uv.DYNAMIC_DRAW=zv.DYNAMIC_DRAW,Uv.STREAM_DRAW=zv.STREAM_DRAW,Uv.AttributeBuffer=zv.AttributeBuffer,Uv.IndicesBuffer=zv.IndicesBuffer,Uv.Attribute=Qc;const Si=Uv;var oc="uniform vec3 ",XC="uniform float ",Ly="@export clay.header.",Oy="@end",$o=":unconfigurable;";const pte=[Ly+"directional_light",oc+"directionalLightDirection[DIRECTIONAL_LIGHT_COUNT]"+$o,oc+"directionalLightColor[DIRECTIONAL_LIGHT_COUNT]"+$o,Oy,Ly+"ambient_light",oc+"ambientLightColor[AMBIENT_LIGHT_COUNT]"+$o,Oy,Ly+"ambient_sh_light",oc+"ambientSHLightColor[AMBIENT_SH_LIGHT_COUNT]"+$o,oc+"ambientSHLightCoefficients[AMBIENT_SH_LIGHT_COUNT * 9]"+$o,"vec3 calcAmbientSHLight(int idx, vec3 N) {\n int offset = 9 * idx;\n return ambientSHLightCoefficients[0]\n + ambientSHLightCoefficients[1] * N.x\n + ambientSHLightCoefficients[2] * N.y\n + ambientSHLightCoefficients[3] * N.z\n + ambientSHLightCoefficients[4] * N.x * N.z\n + ambientSHLightCoefficients[5] * N.z * N.y\n + ambientSHLightCoefficients[6] * N.y * N.x\n + ambientSHLightCoefficients[7] * (3.0 * N.z * N.z - 1.0)\n + ambientSHLightCoefficients[8] * (N.x * N.x - N.y * N.y);\n}",Oy,Ly+"ambient_cubemap_light",oc+"ambientCubemapLightColor[AMBIENT_CUBEMAP_LIGHT_COUNT]"+$o,"uniform samplerCube ambientCubemapLightCubemap[AMBIENT_CUBEMAP_LIGHT_COUNT]"+$o,"uniform sampler2D ambientCubemapLightBRDFLookup[AMBIENT_CUBEMAP_LIGHT_COUNT]"+$o,Oy,Ly+"point_light",oc+"pointLightPosition[POINT_LIGHT_COUNT]"+$o,XC+"pointLightRange[POINT_LIGHT_COUNT]"+$o,oc+"pointLightColor[POINT_LIGHT_COUNT]"+$o,Oy,Ly+"spot_light",oc+"spotLightPosition[SPOT_LIGHT_COUNT]"+$o,oc+"spotLightDirection[SPOT_LIGHT_COUNT]"+$o,XC+"spotLightRange[SPOT_LIGHT_COUNT]"+$o,XC+"spotLightUmbraAngleCosine[SPOT_LIGHT_COUNT]"+$o,XC+"spotLightPenumbraAngleCosine[SPOT_LIGHT_COUNT]"+$o,XC+"spotLightFalloffFactor[SPOT_LIGHT_COUNT]"+$o,oc+"spotLightColor[SPOT_LIGHT_COUNT]"+$o,Oy].join("\n");Gn.import(pte);var vte=Kc.extend(function(){return{color:[1,1,1],intensity:1,castShadow:!0,shadowResolution:512,group:0}},{type:"",clone:function(){var e=Kc.prototype.clone.call(this);return e.color=Array.prototype.slice.call(this.color),e.intensity=this.intensity,e.castShadow=this.castShadow,e.shadowResolution=this.shadowResolution,e}});const sc=vte;var bI=function(e,n){this.normal=e||new Ln(0,1,0),this.distance=n||0};bI.prototype={constructor:bI,distanceToPoint:function(e){return Mt.dot(e.array,this.normal.array)-this.distance},projectPoint:function(e,n){n||(n=new Ln);var t=this.distanceToPoint(e);return Mt.scaleAndAdd(n.array,e.array,this.normal.array,-t),n._dirty=!0,n},normalize:function(){var e=1/Mt.len(this.normal.array);Mt.scale(this.normal.array,e),this.distance*=e},intersectFrustum:function(e){for(var n=e.vertices,t=this.normal.array,r=Mt.dot(n[0].array,t)>this.distance,i=1;i<8;i++)if(Mt.dot(n[i].array,t)>this.distance!=r)return!0},intersectLine:function(){var e=Mt.create();return function(n,t,r){var i=this.distanceToPoint(n),s=this.distanceToPoint(t);if(i>0&&s>0||i<0&&s<0)return null;var d=this.normal.array,p=this.distance,v=n.array;Mt.sub(e,t.array,n.array),Mt.normalize(e,e);var _=Mt.dot(d,e);if(0===_)return null;r||(r=new Ln);var C=(Mt.dot(d,v)-p)/_;return Mt.scaleAndAdd(r.array,v,e,-C),r._dirty=!0,r}}(),applyTransform:function(){var e=Tn.create(),n=Wn.create(),t=Wn.create();return t[3]=1,function(r){r=r.array,Mt.scale(t,this.normal.array,this.distance),Wn.transformMat4(t,t,r),this.distance=Mt.dot(t,this.normal.array),Tn.invert(e,r),Tn.transpose(e,e),n[3]=0,Mt.copy(n,this.normal.array),Wn.transformMat4(n,n,e),Mt.copy(this.normal.array,n)}}(),copy:function(e){Mt.copy(this.normal.array,e.normal.array),this.normal._dirty=!0,this.distance=e.distance},clone:function(){var e=new bI;return e.copy(this),e}};const v8=bI;var $a=Mt.set,g8=Mt.copy,m8=Mt.transformMat4,l3=Math.min,u3=Math.max,_8=function(){this.planes=[];for(var e=0;e<6;e++)this.planes.push(new v8);for(this.boundingBox=new Ws,this.vertices=[],e=0;e<8;e++)this.vertices[e]=Mt.fromValues(0,0,0)};_8.prototype={setFromProjection:function(e){var n=this.planes,t=e.array,r=t[0],i=t[1],s=t[2],d=t[3],p=t[4],v=t[5],_=t[6],C=t[7],S=t[8],k=t[9],H=t[10],ne=t[11],pe=t[12],Me=t[13],Re=t[14],Fe=t[15];$a(n[0].normal.array,d-r,C-p,ne-S),n[0].distance=-(Fe-pe),n[0].normalize(),$a(n[1].normal.array,d+r,C+p,ne+S),n[1].distance=-(Fe+pe),n[1].normalize(),$a(n[2].normal.array,d+i,C+v,ne+k),n[2].distance=-(Fe+Me),n[2].normalize(),$a(n[3].normal.array,d-i,C-v,ne-k),n[3].distance=-(Fe-Me),n[3].normalize(),$a(n[4].normal.array,d-s,C-_,ne-H),n[4].distance=-(Fe-Re),n[4].normalize(),$a(n[5].normal.array,d+s,C+_,ne+H),n[5].distance=-(Fe+Re),n[5].normalize();var Oe=this.boundingBox,Be=this.vertices;if(0===Fe){var nt=v/r,rt=-Re/(H-1),Ct=-Re/(H+1),mt=-Ct/v,Ft=-rt/v;Oe.min.set(-mt*nt,-mt,Ct),Oe.max.set(mt*nt,mt,rt),$a(Be[0],-mt*nt,-mt,Ct),$a(Be[1],-mt*nt,mt,Ct),$a(Be[2],mt*nt,-mt,Ct),$a(Be[3],mt*nt,mt,Ct),$a(Be[4],-Ft*nt,-Ft,rt),$a(Be[5],-Ft*nt,Ft,rt),$a(Be[6],Ft*nt,-Ft,rt),$a(Be[7],Ft*nt,Ft,rt)}else{var nn=(-1-pe)/r,Xt=(1-pe)/r,pn=(1-Me)/v,mn=(-1-Me)/v,on=(-1-Re)/H,Cn=(1-Re)/H;Oe.min.set(Math.min(nn,Xt),Math.min(mn,pn),Math.min(Cn,on)),Oe.max.set(Math.max(Xt,nn),Math.max(pn,mn),Math.max(on,Cn));var Ht=Oe.min.array,ln=Oe.max.array;$a(Be[0],Ht[0],Ht[1],Ht[2]),$a(Be[1],Ht[0],ln[1],Ht[2]),$a(Be[2],ln[0],Ht[1],Ht[2]),$a(Be[3],ln[0],ln[1],Ht[2]),$a(Be[4],Ht[0],Ht[1],ln[2]),$a(Be[5],Ht[0],ln[1],ln[2]),$a(Be[6],ln[0],Ht[1],ln[2]),$a(Be[7],ln[0],ln[1],ln[2])}},getTransformedBoundingBox:function(){var e=Mt.create();return function(n,t){var r=this.vertices,i=t.array,s=n.min,d=n.max,p=s.array,v=d.array,_=r[0];m8(e,_,i),g8(p,e),g8(v,e);for(var C=1;C<8;C++)m8(e,_=r[C],i),p[0]=l3(e[0],p[0]),p[1]=l3(e[1],p[1]),p[2]=l3(e[2],p[2]),v[0]=u3(e[0],v[0]),v[1]=u3(e[1],v[1]),v[2]=u3(e[2],v[2]);return s._dirty=!0,d._dirty=!0,n}}()};const c3=_8;var gte=Kc.extend(function(){return{projectionMatrix:new tr,invProjectionMatrix:new tr,viewMatrix:new tr,frustum:new c3}},function(){this.update(!0)},{update:function(e){Kc.prototype.update.call(this,e),tr.invert(this.viewMatrix,this.worldTransform),this.updateProjectionMatrix(),tr.invert(this.invProjectionMatrix,this.projectionMatrix),this.frustum.setFromProjection(this.projectionMatrix)},setViewMatrix:function(e){tr.copy(this.viewMatrix,e),tr.invert(this.worldTransform,e),this.decomposeWorldTransform()},decomposeProjectionMatrix:function(){},setProjectionMatrix:function(e){tr.copy(this.projectionMatrix,e),tr.invert(this.invProjectionMatrix,e),this.decomposeProjectionMatrix()},updateProjectionMatrix:function(){},castRay:function(){var e=Wn.create();return function(n,t){var r=void 0!==t?t:new fI,i=n.array[0],s=n.array[1];return Wn.set(e,i,s,-1,1),Wn.transformMat4(e,e,this.invProjectionMatrix.array),Wn.transformMat4(e,e,this.worldTransform.array),Mt.scale(r.origin.array,e,1/e[3]),Wn.set(e,i,s,1,1),Wn.transformMat4(e,e,this.invProjectionMatrix.array),Wn.transformMat4(e,e,this.worldTransform.array),Mt.scale(e,e,1/e[3]),Mt.sub(r.direction.array,e,r.origin.array),Mt.normalize(r.direction.array,r.direction.array),r.direction._dirty=!0,r.origin._dirty=!0,r}}()});const ky=gte;var mte=Tn.create(),y8=Tn.create(),d3={};function _te(e){var n=[],t=Object.keys(e);t.sort();for(var r=0;r<t.length;r++){var i=t[r];n.push(i+" "+e[i])}var s=n.join("\n");if(d3[s])return d3[s];var d=Yo.genGUID();return d3[s]=d,d}function xI(){this.opaque=[],this.transparent=[],this._opaqueCount=0,this._transparentCount=0}xI.prototype.startCount=function(){this._opaqueCount=0,this._transparentCount=0},xI.prototype.add=function(e,n){n?this.transparent[this._transparentCount++]=e:this.opaque[this._opaqueCount++]=e},xI.prototype.endCount=function(){this.transparent.length=this._transparentCount,this.opaque.length=this._opaqueCount};var yte=Kc.extend(function(){return{material:null,lights:[],viewBoundingBoxLastFrame:new Ws,shadowUniforms:{},_cameraList:[],_lightUniforms:{},_previousLightNumber:{},_lightNumber:{},_lightProgramKeys:{},_nodeRepository:{},_renderLists:new FW(20)}},function(){this._scene=this},{addToScene:function(e){e instanceof ky?(this._cameraList.length>0&&console.warn("Found multiple camera in one scene. Use the fist one."),this._cameraList.push(e)):e instanceof sc&&this.lights.push(e),e.name&&(this._nodeRepository[e.name]=e)},removeFromScene:function(e){var n;e instanceof ky?(n=this._cameraList.indexOf(e))>=0&&this._cameraList.splice(n,1):e instanceof sc&&(n=this.lights.indexOf(e))>=0&&this.lights.splice(n,1),e.name&&delete this._nodeRepository[e.name]},getNode:function(e){return this._nodeRepository[e]},setMainCamera:function(e){var n=this._cameraList.indexOf(e);n>=0&&this._cameraList.splice(n,1),this._cameraList.unshift(e)},getMainCamera:function(){return this._cameraList[0]},getLights:function(){return this.lights},updateLights:function(){var e=this.lights;this._previousLightNumber=this._lightNumber;for(var n={},t=0;t<e.length;t++){var r=e[t];if(!r.invisible){var i=r.group;n[i]||(n[i]={}),n[i][r.type]=n[i][r.type]||0,n[i][r.type]++}}for(var s in this._lightNumber=n,n)this._lightProgramKeys[s]=_te(n[s]);this._updateLightUniforms()},cloneNode:function(e){var n=e.clone(),t={};return function r(i,s){t[i.__uid__]=s;for(var d=0;d<i._children.length;d++)r(i._children[d],s._children[d])}(e,n),n.traverse(function(i){i.skeleton&&(i.skeleton=i.skeleton.clone(t)),i.material&&(i.material=i.material.clone())}),n},updateRenderList:function(e,n){var t=e.__uid__,r=this._renderLists.get(t);return r||(r=new xI,this._renderLists.put(t,r)),r.startCount(),n&&(this.viewBoundingBoxLastFrame.min.set(1/0,1/0,1/0),this.viewBoundingBoxLastFrame.max.set(-1/0,-1/0,-1/0)),this._doUpdateRenderList(this,e,this.material&&this.material.transparent||!1,r,n),r.endCount(),r},getRenderList:function(e){return this._renderLists.get(e.__uid__)},_doUpdateRenderList:function(e,n,t,r,i){if(!e.invisible)for(var s=0;s<e._children.length;s++){var d=e._children[s];if(d.isRenderable()){var p=d.isSkinnedMesh()?mte:d.worldTransform.array,v=d.geometry;Tn.multiplyAffine(y8,n.viewMatrix.array,p),(i&&!v.boundingBox||!this.isFrustumCulled(d,n,y8))&&r.add(d,d.material.transparent||t)}d._children.length>0&&this._doUpdateRenderList(d,n,t,r,i)}},isFrustumCulled:function(){var e=new Ws,n=new tr;return function(t,r,i){var s=t.boundingBox;if(s||(s=t.skeleton&&t.skeleton.boundingBox?t.skeleton.boundingBox:t.geometry.boundingBox),!s)return!1;if(n.array=i,e.transformFrom(s,n),t.castShadow&&this.viewBoundingBoxLastFrame.union(e),t.frustumCulling){if(!e.intersectBoundingBox(r.frustum.boundingBox))return!0;n.array=r.projectionMatrix.array,e.max.array[2]>0&&e.min.array[2]<0&&(e.max.array[2]=-1e-20),e.applyProjection(n);var d=e.min.array,p=e.max.array;if(p[0]<-1||d[0]>1||p[1]<-1||d[1]>1||p[2]<-1||d[2]>1)return!0}return!1}}(),_updateLightUniforms:function(){var e=this.lights;e.sort(bte);var n=this._lightUniforms;for(var t in n)for(var r in n[t])n[t][r].value.length=0;for(var i=0;i<e.length;i++){var s=e[i];if(!s.invisible)for(var r in t=s.group,s.uniformTemplates){var d=s.uniformTemplates[r],p=d.value(s);if(null!=p){n[t]||(n[t]={}),n[t][r]||(n[t][r]={type:"",value:[]});var v=n[t][r];switch(v.type=d.type+"v",d.type){case"1i":case"1f":case"t":v.value.push(p);break;case"2f":case"3f":case"4f":for(var _=0;_<p.length;_++)v.value.push(p[_]);break;default:console.error("Unkown light uniform type "+d.type)}}}}},getLightGroups:function(){var e=[];for(var n in this._lightNumber)e.push(n);return e},getNumberChangedLightGroups:function(){var e=[];for(var n in this._lightNumber)this.isLightNumberChanged(n)&&e.push(n);return e},isLightNumberChanged:function(e){var n=this._previousLightNumber,t=this._lightNumber;for(var r in t[e])if(!n[e]||t[e][r]!==n[e][r])return!0;for(var r in n[e])if(!t[e]||t[e][r]!==n[e][r])return!0;return!1},getLightsNumbers:function(e){return this._lightNumber[e]},getProgramKey:function(e){return this._lightProgramKeys[e]},setLightUniforms:function(){function e(n,t,r){for(var i in n){var s=n[i];if("tv"===s.type){if(!t.hasUniform(i))continue;for(var d=[],p=0;p<s.value.length;p++){var _=t.takeCurrentTextureSlot(r,s.value[p]);d.push(_)}t.setUniform(r.gl,"1iv",i,d)}else t.setUniform(r.gl,s.type,i,s.value)}}return function(n,t,r){e(this._lightUniforms[t],n,r),e(this.shadowUniforms,n,r)}}(),dispose:function(){this.material=null,this._opaqueList=[],this._transparentList=[],this.lights=[],this._lightUniforms={},this._lightNumber={},this._nodeRepository={}}});function bte(e,n){if(n.castShadow&&!e.castShadow)return!0}const Cf=yte;var xte=z(7148),CI=u8.isPowerOfTwo,Cte=["px","nx","py","ny","pz","nz"],h3=dr.extend(function(){return{image:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},pixels:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},mipmaps:[]}},{textureType:"textureCube",update:function(e){var n=e.gl;n.bindTexture(n.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),this.updateCommon(e);var t=this.format,r=this.type;n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_WRAP_S,this.getAvailableWrapS()),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_WRAP_T,this.getAvailableWrapT()),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_MAG_FILTER,this.getAvailableMagFilter()),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_MIN_FILTER,this.getAvailableMinFilter());var i=e.getGLExtension("EXT_texture_filter_anisotropic");if(i&&this.anisotropic>1&&n.texParameterf(n.TEXTURE_CUBE_MAP,i.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),36193===r&&(e.getGLExtension("OES_texture_half_float")||(r=5126)),this.mipmaps.length)for(var d=this.width,p=this.height,v=0;v<this.mipmaps.length;v++)this._updateTextureData(n,this.mipmaps[v],v,d,p,t,r),d/=2,p/=2;else this._updateTextureData(n,this,0,this.width,this.height,t,r),!this.NPOT&&this.useMipmap&&n.generateMipmap(n.TEXTURE_CUBE_MAP);n.bindTexture(n.TEXTURE_CUBE_MAP,null)},_updateTextureData:function(e,n,t,r,i,s,d){for(var p=0;p<6;p++){var v=Cte[p],_=n.image&&n.image[v];_?e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+p,t,s,s,d,_):e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+p,t,s,r,i,0,s,d,n.pixels&&n.pixels[v])}},generateMipmap:function(e){var n=e.gl;this.useMipmap&&!this.NPOT&&(n.bindTexture(n.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),n.generateMipmap(n.TEXTURE_CUBE_MAP))},bind:function(e){e.gl.bindTexture(e.gl.TEXTURE_CUBE_MAP,this.getWebGLTexture(e))},unbind:function(e){e.gl.bindTexture(e.gl.TEXTURE_CUBE_MAP,null)},isPowerOfTwo:function(){return this.image.px?CI(this.image.px.width)&&CI(this.image.px.height):CI(this.width)&&CI(this.height)},isRenderable:function(){return this.image.px?Ny(this.image.px)&&Ny(this.image.nx)&&Ny(this.image.py)&&Ny(this.image.ny)&&Ny(this.image.pz)&&Ny(this.image.nz):!(!this.width||!this.height)},load:function(e,n){var t=0,r=this;return Yo.each(e,function(i,s){var d=oo.createImage();n&&(d.crossOrigin=n),d.onload=function(){0==--t&&(r.dirty(),r.trigger("success",r))},d.onerror=function(){t--},t++,d.src=i,r.image[s]=d}),this}});function Ny(e){return e.width>0&&e.height>0}Object.defineProperty(h3.prototype,"width",{get:function(){return this.image&&this.image.px?this.image.px.width:this._width},set:function(e){this.image&&this.image.px?console.warn("Texture from image can't set width"):(this._width!==e&&this.dirty(),this._width=e)}}),Object.defineProperty(h3.prototype,"height",{get:function(){return this.image&&this.image.px?this.image.px.height:this._height},set:function(e){this.image&&this.image.px?console.warn("Texture from image can't set height"):(this._height!==e&&this.dirty(),this._height=e)}});const $C=h3;var wte=ky.extend({fov:50,aspect:1,near:.1,far:2e3},{updateProjectionMatrix:function(){var e=this.fov/180*Math.PI;this.projectionMatrix.perspective(e,this.aspect,this.near,this.far)},decomposeProjectionMatrix:function(){var e=this.projectionMatrix.array,n=2*Math.atan(1/e[5]);this.fov=n/Math.PI*180,this.aspect=e[5]/e[0],this.near=e[14]/(e[10]-1),this.far=e[14]/(e[10]+1)},clone:function(){var e=ky.prototype.clone.call(this);return e.fov=this.fov,e.aspect=this.aspect,e.near=this.near,e.far=this.far,e}});const No=wte;var wI="framebuffer",nh="renderbuffer",b8=nh+"_width",x8=nh+"_height",f3=nh+"_attached",p3="depthtexture_attached",Gv=36160,KC=36161,QC=36096,qC=Us.extend({depthBuffer:!0,viewport:null,_width:0,_height:0,_textures:null,_boundRenderer:null},function(){this._cache=new a3,this._textures={}},{getTextureWidth:function(){return this._width},getTextureHeight:function(){return this._height},bind:function(e){if(e.__currentFrameBuffer){if(e.__currentFrameBuffer===this)return;console.warn("Renderer already bound with another framebuffer. Unbind it first")}e.__currentFrameBuffer=this;var n=e.gl;n.bindFramebuffer(Gv,this._getFrameBufferGL(e)),this._boundRenderer=e;var t=this._cache;t.put("viewport",e.viewport);var i,s,r=!1;for(var d in this._textures){r=!0;var p=this._textures[d];p&&(i=p.texture.width,s=p.texture.height,this._doAttach(e,p.texture,d,p.target))}this._width=i,this._height=s,!r&&this.depthBuffer&&console.error("Must attach texture before bind, or renderbuffer may have incorrect width and height."),this.viewport?e.setViewport(this.viewport):e.setViewport(0,0,i,s,1);var v=t.get("attached_textures");if(v)for(var d in v)this._textures[d]||this._doDetach(n,d,v[d]);if(!t.get(p3)&&this.depthBuffer){t.miss(nh)&&t.put(nh,n.createRenderbuffer());var C=t.get(nh);(i!==t.get(b8)||s!==t.get(x8))&&(n.bindRenderbuffer(KC,C),n.renderbufferStorage(KC,n.DEPTH_COMPONENT16,i,s),t.put(b8,i),t.put(x8,s),n.bindRenderbuffer(KC,null)),t.get(f3)||(n.framebufferRenderbuffer(Gv,QC,KC,C),t.put(f3,!0))}},unbind:function(e){e.__currentFrameBuffer=null,e.gl.bindFramebuffer(Gv,null),this._boundRenderer=null,this._cache.use(e.__uid__);var t=this._cache.get("viewport");t&&e.setViewport(t),this.updateMipmap(e)},updateMipmap:function(e){var n=e.gl;for(var t in this._textures){var r=this._textures[t];if(r){var i=r.texture;if(!i.NPOT&&i.useMipmap&&i.minFilter===dr.LINEAR_MIPMAP_LINEAR){var s="textureCube"===i.textureType?34067:3553;n.bindTexture(s,i.getWebGLTexture(e)),n.generateMipmap(s),n.bindTexture(s,null)}}}},checkStatus:function(e){return e.checkFramebufferStatus(Gv)},_getFrameBufferGL:function(e){var n=this._cache;return n.use(e.__uid__),n.miss(wI)&&n.put(wI,e.gl.createFramebuffer()),n.get(wI)},attach:function(e,n,t){if(!e.width)throw new Error("The texture attached to color buffer is not a valid.");n=n||36064,t=t||3553;var s,r=this._boundRenderer;if(r&&r.gl){var d=this._cache;d.use(r.__uid__),s=d.get("attached_textures")}var p=this._textures[n];if(!p||p.target!==t||p.texture!==e||!s||null==s[n]){var v=!0;r&&(v=this._doAttach(r,e,n,t),this.viewport||r.setViewport(0,0,e.width,e.height,1)),v&&(this._textures[n]=this._textures[n]||{},this._textures[n].texture=e,this._textures[n].target=t)}},_doAttach:function(e,n,t,r){var i=e.gl,s=n.getWebGLTexture(e),d=this._cache.get("attached_textures");if(d&&d[t]){var p=d[t];if(p.texture===n&&p.target===r)return}var v=!0;if(((t=+t)===QC||33306===t)&&(e.getGLExtension("WEBGL_depth_texture")||(console.error("Depth texture is not supported by the browser"),v=!1),6402!==n.format&&34041!==n.format&&(console.error("The texture attached to depth buffer is not a valid."),v=!1),v)){var C=this._cache.get(nh);C&&(i.framebufferRenderbuffer(Gv,QC,KC,null),i.deleteRenderbuffer(C),this._cache.put(nh,!1)),this._cache.put(f3,!1),this._cache.put(p3,!0)}return i.framebufferTexture2D(Gv,t,r,s,0),d||this._cache.put("attached_textures",d={}),d[t]=d[t]||{},d[t].texture=n,d[t].target=r,v},_doDetach:function(e,n,t){e.framebufferTexture2D(Gv,n,t,null,0);var r=this._cache.get("attached_textures");r&&r[n]&&(r[n]=null),(n===QC||33306===n)&&this._cache.put(p3,!1)},detach:function(e,n){this._textures[e]=null,this._boundRenderer&&(this._cache.use(this._boundRenderer.__uid__),this._doDetach(this._boundRenderer.gl,e,n))},dispose:function(e){var n=e.gl,t=this._cache;t.use(e.__uid__);var r=t.get(nh);r&&n.deleteRenderbuffer(r);var i=t.get(wI);i&&n.deleteFramebuffer(i),t.deleteContext(e.__uid__),this._textures={}}});qC.DEPTH_ATTACHMENT=QC,qC.COLOR_ATTACHMENT0=36064,qC.STENCIL_ATTACHMENT=36128,qC.DEPTH_STENCIL_ATTACHMENT=33306;const Ko=qC;var Ste=["px","nx","py","ny","pz","nz"],Dte=Us.extend(function(){var e={position:new Ln,far:1e3,near:.1,texture:null,shadowMapPass:null},n=e._cameras={px:new No({fov:90}),nx:new No({fov:90}),py:new No({fov:90}),ny:new No({fov:90}),pz:new No({fov:90}),nz:new No({fov:90})};return n.px.lookAt(Ln.POSITIVE_X,Ln.NEGATIVE_Y),n.nx.lookAt(Ln.NEGATIVE_X,Ln.NEGATIVE_Y),n.py.lookAt(Ln.POSITIVE_Y,Ln.POSITIVE_Z),n.ny.lookAt(Ln.NEGATIVE_Y,Ln.NEGATIVE_Z),n.pz.lookAt(Ln.POSITIVE_Z,Ln.NEGATIVE_Y),n.nz.lookAt(Ln.NEGATIVE_Z,Ln.NEGATIVE_Y),e._frameBuffer=new Ko,e},{getCamera:function(e){return this._cameras[e]},render:function(e,n,t){var r=e.gl;t||n.update();for(var i=this.texture.width,s=2*Math.atan(i/(i-.5))/Math.PI*180,d=0;d<6;d++){var v=this._cameras[Ste[d]];if(Ln.copy(v.position,this.position),v.far=this.far,v.near=this.near,v.fov=s,this.shadowMapPass){v.update();var _=n.getBoundingBox();_.applyTransform(v.viewMatrix),n.viewBoundingBoxLastFrame.copy(_),this.shadowMapPass.render(e,n,v,!0)}this._frameBuffer.attach(this.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+d),this._frameBuffer.bind(e),e.render(n,v,!0),this._frameBuffer.unbind(e)}},dispose:function(e){this._frameBuffer.dispose(e)}});const v3=Dte;var Mte=Si.extend({dynamic:!1,widthSegments:1,heightSegments:1},function(){this.build()},{build:function(){for(var e=this.heightSegments,n=this.widthSegments,t=this.attributes,r=[],i=[],s=[],d=[],p=0;p<=e;p++)for(var v=p/e,_=0;_<=n;_++){var C=_/n;if(r.push([2*C-1,2*v-1,0]),i&&i.push([C,v]),s&&s.push([0,0,1]),_<n&&p<e){var S=_+p*(n+1);d.push([S,S+1,S+n+1]),d.push([S+n+1,S+1,S+n+2])}}t.position.fromArray(r),t.texcoord0.fromArray(i),t.normal.fromArray(s),this.initIndicesFromArray(d),this.boundingBox=new Ws,this.boundingBox.min.set(-1,-1,0),this.boundingBox.max.set(1,1,0)}});const SI=Mte;var Ia=new tr,Tte=Si.extend({dynamic:!1,widthSegments:1,heightSegments:1,depthSegments:1,inside:!1},function(){this.build()},{build:function(){var e={px:Fy("px",this.depthSegments,this.heightSegments),nx:Fy("nx",this.depthSegments,this.heightSegments),py:Fy("py",this.widthSegments,this.depthSegments),ny:Fy("ny",this.widthSegments,this.depthSegments),pz:Fy("pz",this.widthSegments,this.heightSegments),nz:Fy("nz",this.widthSegments,this.heightSegments)},n=["position","texcoord0","normal"],t=0,r=0;for(var i in e)t+=e[i].vertexCount,r+=e[i].indices.length;for(var s=0;s<n.length;s++)this.attributes[n[s]].init(t);this.indices=new oo.Uint16Array(r);var d=0,p=0;for(var i in e){var v=e[i];for(s=0;s<n.length;s++)for(var _=n[s],C=v.attributes[_].value,S=v.attributes[_].size,k="normal"===_,H=0;H<C.length;H++){var ne=C[H];this.inside&&k&&(ne=-ne),this.attributes[_].value[H+S*p]=ne}var pe=v.indices.length;for(H=0;H<v.indices.length;H++)this.indices[H+d]=p+v.indices[this.inside?pe-H-1:H];d+=v.indices.length,p+=v.vertexCount}this.boundingBox=new Ws,this.boundingBox.max.set(1,1,1),this.boundingBox.min.set(-1,-1,-1)}});function Fy(e,n,t){Ia.identity();var r=new SI({widthSegments:n,heightSegments:t});switch(e){case"px":tr.translate(Ia,Ia,Ln.POSITIVE_X),tr.rotateY(Ia,Ia,Math.PI/2);break;case"nx":tr.translate(Ia,Ia,Ln.NEGATIVE_X),tr.rotateY(Ia,Ia,-Math.PI/2);break;case"py":tr.translate(Ia,Ia,Ln.POSITIVE_Y),tr.rotateX(Ia,Ia,-Math.PI/2);break;case"ny":tr.translate(Ia,Ia,Ln.NEGATIVE_Y),tr.rotateX(Ia,Ia,Math.PI/2);break;case"pz":tr.translate(Ia,Ia,Ln.POSITIVE_Z);break;case"nz":tr.translate(Ia,Ia,Ln.NEGATIVE_Z),tr.rotateY(Ia,Ia,Math.PI)}return r.applyTransform(Ia),r}const w8=Tte;Gn.import("@export clay.skybox.vertex\n#define SHADER_NAME skybox\nuniform mat4 world : WORLD;\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nattribute vec3 position : POSITION;\nvarying vec3 v_WorldPosition;\nvoid main()\n{\n v_WorldPosition = (world * vec4(position, 1.0)).xyz;\n gl_Position = worldViewProjection * vec4(position, 1.0);\n}\n@end\n@export clay.skybox.fragment\n#define PI 3.1415926\nuniform mat4 viewInverse : VIEWINVERSE;\n#ifdef EQUIRECTANGULAR\nuniform sampler2D environmentMap;\n#else\nuniform samplerCube environmentMap;\n#endif\nuniform float lod: 0.0;\nvarying vec3 v_WorldPosition;\n@import clay.util.rgbm\n@import clay.util.srgb\n@import clay.util.ACES\nvoid main()\n{\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(v_WorldPosition - eyePos);\n#ifdef EQUIRECTANGULAR\n float phi = acos(V.y);\n float theta = atan(-V.x, V.z) + PI * 0.5;\n vec2 uv = vec2(theta / 2.0 / PI, phi / PI);\n vec4 texel = decodeHDR(texture2D(environmentMap, fract(uv)));\n#else\n #if defined(LOD) || defined(SUPPORT_TEXTURE_LOD)\n vec4 texel = decodeHDR(textureCubeLodEXT(environmentMap, V, lod));\n #else\n vec4 texel = decodeHDR(textureCube(environmentMap, V));\n #endif\n#endif\n#ifdef SRGB_DECODE\n texel = sRGBToLinear(texel);\n#endif\n#ifdef TONEMAPPING\n texel.rgb = ACESToneMapping(texel.rgb);\n#endif\n#ifdef SRGB_ENCODE\n texel = linearTosRGB(texel);\n#endif\n gl_FragColor = encodeHDR(vec4(texel.rgb, 1.0));\n}\n@end");var Ate=Vv.extend(function(){var e=new Gn({vertex:Gn.source("clay.skybox.vertex"),fragment:Gn.source("clay.skybox.fragment")}),n=new Eu({shader:e,depthMask:!1});return{scene:null,geometry:new w8,material:n,environmentMap:null,culling:!1,_dummyCamera:new No}},function(){var e=this.scene;e&&this.attachScene(e),this.environmentMap&&this.setEnvironmentMap(this.environmentMap)},{attachScene:function(e){this.scene&&this.detachScene(),e.skybox=this,this.scene=e,e.on("beforerender",this._beforeRenderScene,this)},detachScene:function(){this.scene&&(this.scene.off("beforerender",this._beforeRenderScene),this.scene.skybox=null),this.scene=null},dispose:function(e){this.detachScene(),this.geometry.dispose(e)},setEnvironmentMap:function(e){"texture2D"===e.textureType?(this.material.define("EQUIRECTANGULAR"),e.minFilter=dr.LINEAR):this.material.undefine("EQUIRECTANGULAR"),this.material.set("environmentMap",e)},getEnvironmentMap:function(){return this.material.get("environmentMap")},_beforeRenderScene:function(e,n,t){this.renderSkybox(e,t)},renderSkybox:function(e,n){var t=this._dummyCamera;t.aspect=e.getViewportAspect(),t.fov=n.fov||50,t.updateProjectionMatrix(),tr.invert(t.invProjectionMatrix,t.projectionMatrix),t.worldTransform.copy(n.worldTransform),t.viewMatrix.copy(n.viewMatrix),this.position.copy(n.getWorldPosition()),this.update(),e.gl.disable(e.gl.BLEND),this.material.get("lod")>0?this.material.define("fragment","LOD"):this.material.undefine("fragment","LOD"),e.renderPass([this],t)}});const DI=Ate,S8=DI;function g3(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}var kte=g3("DXT1"),Nte=g3("DXT3"),Fte=g3("DXT5"),Yte={parse:function(e,n){var t=new Int32Array(e,0,31);if(542327876!==t[0]||4&!t(20))return null;var v,_,r=t(21),i=t[4],s=t[3],d=512&t[28],p=131072&t[2];switch(r){case kte:v=8,_=dr.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case Nte:v=16,_=dr.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case Fte:v=16,_=dr.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return null}var C=t[1]+4,S=d?6:1,k=1;p&&(k=Math.max(1,t[7]));for(var H=[],ne=0;ne<S;ne++){var pe=i,Me=s;H[ne]=new $r({width:pe,height:Me,format:_});for(var Re=[],Fe=0;Fe<k;Fe++){var Oe=Math.max(4,pe)/4*Math.max(4,Me)/4*v,Be=new Uint8Array(e,C,Oe);C+=Oe,pe*=.5,Me*=.5,Re[Fe]=Be}H[ne].pixels=Re[0],p&&(H[ne].mipmaps=Re)}if(!n)return H[0];n.width=H[0].width,n.height=H[0].height,n.format=H[0].format,n.pixels=H[0].pixels,n.mipmaps=H[0].mipmaps}};const Xte=Yte;var MI=String.fromCharCode;function Qte(e,n,t,r){if(e[3]>0){var i=Math.pow(2,e[3]-128-8+r);n[t+0]=e[0]*i,n[t+1]=e[1]*i,n[t+2]=e[2]*i}else n[t+0]=0,n[t+1]=0,n[t+2]=0;return n[t+3]=1,n}function Jte(e,n){n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3]}function D8(e,n,t,r){for(var i=0,s=0,d=r;d>0;)if(e[s][0]=n[t++],e[s][1]=n[t++],e[s][2]=n[t++],e[s][3]=n[t++],1===e[s][0]&&1===e[s][1]&&1===e[s][2]){for(var p=e[s][3]<<i>>>0;p>0;p--)Jte(e[s-1],e[s]),s++,d--;i+=8}else s++,d--,i=0;return t}function ene(e,n,t,r){if(r<8|r>32767)return D8(e,n,t,r);if(2!=(i=n[t++]))return D8(e,n,t-1,r);if(e[0][1]=n[t++],e[0][2]=n[t++],i=n[t++],(e[0][2]<<8>>>0|i)>>>0!==r)return null;for(var i=0;i<4;i++)for(var s=0;s<r;){var d=n[t++];if(d>128){d=(127&d)>>>0;for(var p=n[t++];d--;)e[s++][i]=p}else for(;d--;)e[s++][i]=n[t++]}return t}var tne={parseRGBE:function(e,n,t){null==t&&(t=0);var r=new Uint8Array(e),i=r.length;if("#?"===function qte(e,n,t){for(var r="",i=n;i<t;i++)r+=MI(e[i]);return r}(r,0,2)){for(var s=2;s<i&&("\n"!==MI(r[s])||"\n"!==MI(r[s+1]));s++);if(!(s>=i)){s+=2;for(var d="";s<i;s++){var p=MI(r[s]);if("\n"===p)break;d+=p}var v=d.split(" "),_=parseInt(v[1]),C=parseInt(v[3]);if(C&&_){for(var S=s+1,k=[],H=0;H<C;H++){k[H]=[];for(var ne=0;ne<4;ne++)k[H][ne]=0}for(var pe=new Float32Array(C*_*4),Me=0,Re=0;Re<_;Re++){if(!(S=ene(k,r,S,C)))return null;for(H=0;H<C;H++)Qte(k[H],pe,Me,t),Me+=4}return n||(n=new $r),n.width=C,n.height=_,n.pixels=pe,n.type=dr.FLOAT,n}}}},parseRGBEFromPNG:function(e){}};const nne=tne;var TI={loadTexture:function(e,n,t,r){var i;if("function"==typeof n?(r=t=n,n={}):n=n||{},"string"==typeof e){if(e.match(/.hdr$/)||"hdr"===n.fileType)return i=new $r({width:0,height:0,sRGB:!1}),TI._fetchTexture(e,function(s){nne.parseRGBE(s,i,n.exposure),i.dirty(),t&&t(i)},r),i;e.match(/.dds$/)||"dds"===n.fileType?(i=new $r({width:0,height:0}),TI._fetchTexture(e,function(s){Xte.parse(s,i),i.dirty(),t&&t(i)},r)):((i=new $r).load(e),i.success(t),i.error(r))}else"object"==typeof e&&typeof e.px<"u"&&((i=new $C).load(e),i.success(t),i.error(r));return i},loadPanorama:function(e,n,t,r,i,s){var d=this;"function"==typeof r?(s=i=r,r={}):r=r||{},TI.loadTexture(n,r,function(p){p.flipY=r.flipY||!1,d.panoramaToCubeMap(e,p,t,r),p.dispose(e),i&&i(t)},s)},panoramaToCubeMap:function(e,n,t,r){var i=new v3,s=new S8({scene:new Cf});return s.setEnvironmentMap(n),(r=r||{}).encodeRGBM&&s.material.define("fragment","RGBM_ENCODE"),t.sRGB=n.sRGB,i.texture=t,i.render(e,s.scene),i.texture=null,i.dispose(e),t},heightToNormal:function(e,n){var t=document.createElement("canvas"),r=t.width=e.width,i=t.height=e.height,s=t.getContext("2d");s.drawImage(e,0,0,r,i),n=n||!1;for(var d=s.getImageData(0,0,r,i),p=s.createImageData(r,i),v=0;v<d.data.length;v+=4){if(n){var C=d.data[v+1],S=d.data[v+2];if(Math.abs(d.data[v]-C)+Math.abs(C-S)>20)return console.warn("Given image is not a height map"),e}var H,ne,pe,Me;v%(4*r)==0?(H=d.data[v],pe=d.data[v+4]):v%(4*r)==4*(r-1)?(H=d.data[v-4],pe=d.data[v]):(H=d.data[v-4],pe=d.data[v+4]),v<4*r?(ne=d.data[v],Me=d.data[v+4*r]):v>r*(i-1)*4?(ne=d.data[v-4*r],Me=d.data[v]):(ne=d.data[v-4*r],Me=d.data[v+4*r]),p.data[v]=H-pe+127,p.data[v+1]=ne-Me+127,p.data[v+2]=255,p.data[v+3]=255}return s.putImageData(p,0,0),t},isHeightImage:function(e,n,t){if(!e||!e.width||!e.height)return!1;var r=document.createElement("canvas"),i=r.getContext("2d"),s=n||32;t=t||20,r.width=r.height=s,i.drawImage(e,0,0,s,s);for(var d=i.getImageData(0,0,s,s),p=0;p<d.data.length;p+=4){var _=d.data[p+1],C=d.data[p+2];if(Math.abs(d.data[p]-_)+Math.abs(_-C)>t)return!1}return!0},_fetchTexture:function(e,n,t){oo.request.get({url:e,responseType:"arraybuffer",onload:n,onerror:t})},createChessboard:function(e,n,t,r){e=e||512,n=n||64,t=t||"black",r=r||"white";var i=Math.ceil(e/n),s=document.createElement("canvas");s.width=e,s.height=e;var d=s.getContext("2d");d.fillStyle=r,d.fillRect(0,0,e,e),d.fillStyle=t;for(var p=0;p<i;p++)for(var v=0;v<i;v++)(v%2?p%2:p%2-1)&&d.fillRect(p*n,v*n,n,n);return new $r({image:s,anisotropic:8})},createBlank:function(e){var n=document.createElement("canvas");n.width=1,n.height=1;var t=n.getContext("2d");return t.fillStyle=e,t.fillRect(0,0,1,1),new $r({image:n})}};const Wv=TI;var m3=["mousedown","mouseup","mousemove","mouseover","mouseout","click","dblclick","contextmenu"];function _3(e){return"_on"+e}var y3=function(e){var n=this;this._texture=new $r({anisotropic:32,flipY:!1,surface:this,dispose:function(t){n.dispose(),$r.prototype.dispose.call(this,t)}}),m3.forEach(function(t){this[_3(t)]=function(r){!r.triangle||this._meshes.forEach(function(i){this.dispatchEvent(t,i,r.triangle,r.point)},this)}},this),this._meshes=[],e&&this.setECharts(e),this.onupdate=null};y3.prototype={constructor:y3,getTexture:function(){return this._texture},setECharts:function(e){this._chart=e;var n=e.getDom();if(n instanceof HTMLCanvasElement){var t=this,r=e.getZr(),i=r.__oldRefreshImmediately||r.refreshImmediately;r.refreshImmediately=function(){i.call(this),t._texture.dirty(),t.onupdate&&t.onupdate()},r.__oldRefreshImmediately=i}else console.error("ECharts must init on canvas if it is used as texture."),n=document.createElement("canvas");this._texture.image=n,this._texture.dirty(),this.onupdate&&this.onupdate()},dispatchEvent:function(){var e=new Ln,n=new Ln,t=new Ln,r=new Hl,i=new Hl,s=new Hl,d=new Hl,p=new Ln;return function(v,_,C,S){var k=_.geometry,H=k.attributes.position,ne=k.attributes.texcoord0,pe=Ln.dot,Me=Ln.cross;H.get(C[0],e.array),H.get(C[1],n.array),H.get(C[2],t.array),ne.get(C[0],r.array),ne.get(C[1],i.array),ne.get(C[2],s.array),Me(p,n,t);var Re=pe(e,p),Fe=pe(S,p)/Re;Me(p,t,e);var Oe=pe(S,p)/Re;Me(p,e,n);var Be=pe(S,p)/Re;Hl.scale(d,r,Fe),Hl.scaleAndAdd(d,d,i,Oe),Hl.scaleAndAdd(d,d,s,Be);var nt=d.x*this._chart.getWidth(),rt=d.y*this._chart.getHeight();this._chart.getZr().handler.dispatch(v,{zrX:nt,zrY:rt})}}(),attachToMesh:function(e){this._meshes.indexOf(e)>=0||(m3.forEach(function(n){e.on(n,this[_3(n)],this)},this),this._meshes.push(e))},detachFromMesh:function(e){var n=this._meshes.indexOf(e);n>=0&&this._meshes.splice(n,1),m3.forEach(function(t){e.off(t,this[_3(t)])},this)},dispose:function(){this._meshes.forEach(function(e){this.detachFromMesh(e)},this)}};const rne=y3;var ine=ky.extend({left:-1,right:1,near:-1,far:1,top:1,bottom:-1},{updateProjectionMatrix:function(){this.projectionMatrix.ortho(this.left,this.right,this.bottom,this.top,this.near,this.far)},decomposeProjectionMatrix:function(){var e=this.projectionMatrix.array;this.left=(-1-e[12])/e[0],this.right=(1-e[12])/e[0],this.top=(1-e[13])/e[5],this.bottom=(-1-e[13])/e[5],this.near=-(-1-e[14])/e[10],this.far=-(1-e[14])/e[10]},clone:function(){var e=ky.prototype.clone.call(this);return e.left=this.left,e.right=this.right,e.near=this.near,e.far=this.far,e.top=this.top,e.bottom=this.bottom,e}});const By=ine;Gn.import("\n@export clay.compositor.vertex\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nattribute vec3 position : POSITION;\nattribute vec2 texcoord : TEXCOORD_0;\nvarying vec2 v_Texcoord;\nvoid main()\n{\n v_Texcoord = texcoord;\n gl_Position = worldViewProjection * vec4(position, 1.0);\n}\n@end");var one=new SI,M8=new Vv({geometry:one,frustumCulling:!1}),sne=new By,lne=Us.extend(function(){return{fragment:"",outputs:null,material:null,blendWithPrevious:!1,clearColor:!1,clearDepth:!0}},function(){var e=new Gn(Gn.source("clay.compositor.vertex"),this.fragment),n=new Eu({shader:e});n.enableTexturesAll(),this.material=n},{setUniform:function(e,n){this.material.setUniform(e,n)},getUniform:function(e){var n=this.material.uniforms[e];if(n)return n.value},attachOutput:function(e,n){this.outputs||(this.outputs={}),this.outputs[n=n||36064]=e},detachOutput:function(e){for(var n in this.outputs)this.outputs[n]===e&&(this.outputs[n]=null)},bind:function(e,n){if(this.outputs)for(var t in this.outputs){var r=this.outputs[t];r&&n.attach(r,t)}n&&n.bind(e)},unbind:function(e,n){n.unbind(e)},render:function(e,n){var t=e.gl;if(n){this.bind(e,n);var r=e.getGLExtension("EXT_draw_buffers");if(r&&this.outputs){var i=[];for(var s in this.outputs)(s=+s)>=t.COLOR_ATTACHMENT0&&s<=t.COLOR_ATTACHMENT0+8&&i.push(s);r.drawBuffersEXT(i)}}this.trigger("beforerender",this,e);var d=this.clearDepth?t.DEPTH_BUFFER_BIT:0;if(t.depthMask(!0),this.clearColor){d|=t.COLOR_BUFFER_BIT,t.colorMask(!0,!0,!0,!0);var p=this.clearColor;Array.isArray(p)&&t.clearColor(p[0],p[1],p[2],p[3])}t.clear(d),this.blendWithPrevious?(t.enable(t.BLEND),this.material.transparent=!0):(t.disable(t.BLEND),this.material.transparent=!1),this.renderQuad(e),this.trigger("afterrender",this,e),n&&this.unbind(e,n)},renderQuad:function(e){M8.material=this.material,e.renderPass([M8],sne)},dispose:function(e){}});const so=lne;var jv={},b3=["px","nx","py","ny","pz","nz"];jv.prefilterEnvironmentMap=function(e,n,t,r,i){(!i||!r)&&(r=jv.generateNormalDistribution(),i=jv.integrateBRDF(e,r));var s=(t=t||{}).width||64,d=t.height||64,p=t.type||n.type,v=new $C({width:s,height:d,type:p,flipY:!1,mipmaps:[]});v.isPowerOfTwo()||console.warn("Width and height must be power of two to enable mipmap.");var _=Math.min(s,d),C=Math.log(_)/Math.log(2)+1,S=new Eu({shader:new Gn({vertex:Gn.source("clay.skybox.vertex"),fragment:"#define SHADER_NAME prefilter\n#define SAMPLE_NUMBER 1024\n#define PI 3.14159265358979\nuniform mat4 viewInverse : VIEWINVERSE;\nuniform samplerCube environmentMap;\nuniform sampler2D normalDistribution;\nuniform float roughness : 0.5;\nvarying vec2 v_Texcoord;\nvarying vec3 v_WorldPosition;\n@import clay.util.rgbm\nvec3 importanceSampleNormal(float i, float roughness, vec3 N) {\n vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;\n vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);\n vec3 tangentX = normalize(cross(N, upVector));\n vec3 tangentZ = cross(N, tangentX);\n return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);\n}\nvoid main() {\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(v_WorldPosition - eyePos);\n vec3 N = V;\n vec3 prefilteredColor = vec3(0.0);\n float totalWeight = 0.0;\n float fMaxSampleNumber = float(SAMPLE_NUMBER);\n for (int i = 0; i < SAMPLE_NUMBER; i++) {\n vec3 H = importanceSampleNormal(float(i) / fMaxSampleNumber, roughness, N);\n vec3 L = reflect(-V, H);\n float NoL = clamp(dot(N, L), 0.0, 1.0);\n if (NoL > 0.0) {\n prefilteredColor += decodeHDR(textureCube(environmentMap, L)).rgb * NoL;\n totalWeight += NoL;\n }\n }\n gl_FragColor = encodeHDR(vec4(prefilteredColor / totalWeight, 1.0));\n}\n"})});S.set("normalDistribution",r),t.encodeRGBM&&S.define("fragment","RGBM_ENCODE"),t.decodeRGBM&&S.define("fragment","RGBM_DECODE");var H,k=new Cf;if("texture2D"===n.textureType){var ne=new $C({width:s,height:d,type:p===dr.FLOAT?dr.HALF_FLOAT:p});Wv.panoramaToCubeMap(e,n,ne,{encodeRGBM:t.decodeRGBM}),n=ne}(H=new DI({scene:k,material:S})).material.set("environmentMap",n);var pe=new v3({texture:v});t.encodeRGBM&&(p=v.type=dr.UNSIGNED_BYTE);for(var Me=new $r({width:s,height:d,type:p}),Re=new Ko({depthBuffer:!1}),Fe=oo[p===dr.UNSIGNED_BYTE?"Uint8Array":"Float32Array"],Oe=0;Oe<C;Oe++){v.mipmaps[Oe]={pixels:{}},H.material.set("roughness",Oe/(C-1));for(var Be=Me.width,nt=2*Math.atan(Be/(Be-.5))/Math.PI*180,rt=0;rt<b3.length;rt++){var Ct=new Fe(Me.width*Me.height*4);Re.attach(Me),Re.bind(e);var mt=pe.getCamera(b3[rt]);mt.fov=nt,e.render(k,mt),e.gl.readPixels(0,0,Me.width,Me.height,dr.RGBA,p,Ct),Re.unbind(e),v.mipmaps[Oe].pixels[b3[rt]]=Ct}Me.width/=2,Me.height/=2,Me.dirty()}return Re.dispose(e),Me.dispose(e),H.dispose(e),r.dispose(e),{environmentMap:v,brdfLookup:i,normalDistribution:r,maxMipmapLevel:C}},jv.integrateBRDF=function(e,n){n=n||jv.generateNormalDistribution();var t=new Ko({depthBuffer:!1}),r=new so({fragment:"#define SAMPLE_NUMBER 1024\n#define PI 3.14159265358979\nuniform sampler2D normalDistribution;\nuniform vec2 viewportSize : [512, 256];\nconst vec3 N = vec3(0.0, 0.0, 1.0);\nconst float fSampleNumber = float(SAMPLE_NUMBER);\nvec3 importanceSampleNormal(float i, float roughness, vec3 N) {\n vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;\n vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);\n vec3 tangentX = normalize(cross(N, upVector));\n vec3 tangentZ = cross(N, tangentX);\n return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);\n}\nfloat G_Smith(float roughness, float NoV, float NoL) {\n float k = roughness * roughness / 2.0;\n float G1V = NoV / (NoV * (1.0 - k) + k);\n float G1L = NoL / (NoL * (1.0 - k) + k);\n return G1L * G1V;\n}\nvoid main() {\n vec2 uv = gl_FragCoord.xy / viewportSize;\n float NoV = uv.x;\n float roughness = uv.y;\n vec3 V;\n V.x = sqrt(1.0 - NoV * NoV);\n V.y = 0.0;\n V.z = NoV;\n float A = 0.0;\n float B = 0.0;\n for (int i = 0; i < SAMPLE_NUMBER; i++) {\n vec3 H = importanceSampleNormal(float(i) / fSampleNumber, roughness, N);\n vec3 L = reflect(-V, H);\n float NoL = clamp(L.z, 0.0, 1.0);\n float NoH = clamp(H.z, 0.0, 1.0);\n float VoH = clamp(dot(V, H), 0.0, 1.0);\n if (NoL > 0.0) {\n float G = G_Smith(roughness, NoV, NoL);\n float G_Vis = G * VoH / (NoH * NoV);\n float Fc = pow(1.0 - VoH, 5.0);\n A += (1.0 - Fc) * G_Vis;\n B += Fc * G_Vis;\n }\n }\n gl_FragColor = vec4(vec2(A, B) / fSampleNumber, 0.0, 1.0);\n}\n"}),i=new $r({width:512,height:256,type:dr.HALF_FLOAT,wrapS:dr.CLAMP_TO_EDGE,wrapT:dr.CLAMP_TO_EDGE,minFilter:dr.NEAREST,magFilter:dr.NEAREST,useMipmap:!1});return r.setUniform("normalDistribution",n),r.setUniform("viewportSize",[512,256]),r.attachOutput(i),r.render(e,t),t.dispose(e),i},jv.generateNormalDistribution=function(t,r){for(var i=new $r({width:t=t||256,height:r=r||1024,type:dr.FLOAT,minFilter:dr.NEAREST,magFilter:dr.NEAREST,wrapS:dr.CLAMP_TO_EDGE,wrapT:dr.CLAMP_TO_EDGE,useMipmap:!1}),s=new Float32Array(r*t*4),d=[],p=0;p<t;p++){for(var v=p/t,_=v*v,C=0;C<r;C++){var S=(C<<16|C>>>16)>>>0;S=(((16711935&(S=((252645135&(S=((858993459&(S=((1431655765&S)<<1|(2863311530&S)>>>1)>>>0))<<2|(3435973836&S)>>>2)>>>0))<<4|(4042322160&S)>>>4)>>>0))<<8|(4278255360&S)>>>8)>>>0)/4294967296;var k=Math.sqrt((1-S)/(1+(_*_-1)*S));d[C]=k}for(C=0;C<r;C++){var H=4*(C*t+p),ne=(k=d[C],Math.sqrt(1-k*k)),Me=2*Math.PI*(C/r);s[H]=ne*Math.cos(Me),s[H+1]=k,s[H+2]=ne*Math.sin(Me),s[H+3]=1}}return i.pixels=s,i};const EI=jv;var dne=sc.extend({cubemap:null,castShadow:!1,_normalDistribution:null,_brdfLookup:null},{type:"AMBIENT_CUBEMAP_LIGHT",prefilter:function(e,n){if(e.getGLExtension("EXT_shader_texture_lod")){this._brdfLookup||(this._normalDistribution=EI.generateNormalDistribution(),this._brdfLookup=EI.integrateBRDF(e,this._normalDistribution));var t=this.cubemap;if(!t.__prefiltered){var r=EI.prefilterEnvironmentMap(e,t,{encodeRGBM:!0,width:n,height:n},this._normalDistribution,this._brdfLookup);this.cubemap=r.environmentMap,this.cubemap.__prefiltered=!0,t.dispose(e)}}else console.warn("Device not support textureCubeLodEXT")},getBRDFLookup:function(){return this._brdfLookup},uniformTemplates:{ambientCubemapLightColor:{type:"3f",value:function(e){var n=e.color,t=e.intensity;return[n[0]*t,n[1]*t,n[2]*t]}},ambientCubemapLightCubemap:{type:"t",value:function(e){return e.cubemap}},ambientCubemapLightBRDFLookup:{type:"t",value:function(e){return e._brdfLookup}}}});const hne=dne;var fne=sc.extend({castShadow:!1,coefficients:[]},function(){this._coefficientsTmpArr=new oo.Float32Array(27)},{type:"AMBIENT_SH_LIGHT",uniformTemplates:{ambientSHLightColor:{type:"3f",value:function(e){var n=e.color,t=e.intensity;return[n[0]*t,n[1]*t,n[2]*t]}},ambientSHLightCoefficients:{type:"3f",value:function(e){for(var n=e._coefficientsTmpArr,t=0;t<e.coefficients.length;t++)n[t]=e.coefficients[t];return n}}}});const pne=fne;var T8={},Zv=["px","nx","py","ny","pz","nz"];function vne(e,n){var t=e[0],r=e[1],i=e[2];return 0===n?1:1===n?t:2===n?r:3===n?i:4===n?t*i:5===n?r*i:6===n?t*r:7===n?3*i*i-1:t*t-r*r}var gne={px:[2,1,0,-1,-1,1],nx:[2,1,0,1,-1,-1],py:[0,2,1,1,-1,-1],ny:[0,2,1,1,1,1],pz:[0,1,2,-1,-1,-1],nz:[0,1,2,1,-1,1]};T8.projectEnvironmentMap=function(e,n,t){(t=t||{}).lod=t.lod||0;var r,i=new Cf,s=64;"texture2D"===n.textureType?r=new S8({scene:i,environmentMap:n}):(s=n.image&&n.image.px?n.image.px.width:n.width,r=new DI({scene:i,environmentMap:n}));var d=Math.ceil(s/Math.pow(2,t.lod)),p=Math.ceil(s/Math.pow(2,t.lod)),v=new $r({width:d,height:p}),_=new Ko;r.material.define("fragment","RGBM_ENCODE"),t.decodeRGBM&&r.material.define("fragment","RGBM_DECODE"),r.material.set("lod",t.lod);for(var C=new v3({texture:v}),S={},k=0;k<Zv.length;k++){S[Zv[k]]=new Uint8Array(d*p*4);var H=C.getCamera(Zv[k]);H.fov=90,_.attach(v),_.bind(e),e.render(i,H),e.gl.readPixels(0,0,d,p,dr.RGBA,dr.UNSIGNED_BYTE,S[Zv[k]]),_.unbind(e)}return r.dispose(e),_.dispose(e),v.dispose(e),function mne(e,n,t,r){for(var i=new oo.Float32Array(27),s=Mt.create(),d=Mt.create(),p=Mt.create(),v=0;v<9;v++){for(var _=Mt.create(),C=0;C<Zv.length;C++){for(var S=n[Zv[C]],k=Mt.create(),H=0,ne=0,pe=gne[Zv[C]],Me=0;Me<r;Me++)for(var Re=0;Re<t;Re++){s[0]=Re/(t-1)*2-1,s[1]=Me/(r-1)*2-1,s[2]=-1,Mt.normalize(s,s),p[0]=s[pe[0]]*pe[3],p[1]=s[pe[1]]*pe[4],p[2]=s[pe[2]]*pe[5],d[0]=S[ne++]/255,d[1]=S[ne++]/255,d[2]=S[ne++]/255;var Fe=S[ne++]/255*8.12;d[0]*=Fe,d[1]*=Fe,d[2]*=Fe,Mt.scaleAndAdd(k,k,d,vne(p,v)*-s[2]),H+=-s[2]}Mt.scaleAndAdd(_,_,k,1/H)}i[3*v]=_[0]/6,i[3*v+1]=_[1]/6,i[3*v+2]=_[2]/6}return i}(0,S,d,p)};const _ne=T8;var yne={firstNotNull:function(){for(var e=0,n=arguments.length;e<n;e++)if(null!=arguments[e])return arguments[e]},queryDataIndex:function(e,n){return null!=n.dataIndexInside?n.dataIndexInside:null!=n.dataIndex?bt.D5.isArray(n.dataIndex)?bt.D5.map(n.dataIndex,function(t){return e.indexOfRawIndex(t)}):e.indexOfRawIndex(n.dataIndex):null!=n.name?bt.D5.isArray(n.name)?bt.D5.map(n.name,function(t){return e.indexOfName(t)}):e.indexOfName(n.name):void 0}};const Qr=yne;var bne=Si.extend({dynamic:!1,widthSegments:40,heightSegments:20,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI,radius:1},function(){this.build()},{build:function(){var e=this.heightSegments,n=this.widthSegments,t=this.attributes.position,r=this.attributes.texcoord0,i=this.attributes.normal,s=(n+1)*(e+1);t.init(s),r.init(s),i.init(s);var v,_,C,S,k,H,ne,Oe,d=s>65535?Uint32Array:Uint16Array,p=this.indices=new d(n*e*6),pe=this.phiStart,Me=this.phiLength,Re=this.thetaStart,Fe=this.thetaLength,Be=[],nt=[],rt=0,Ct=1/(Oe=this.radius);for(ne=0;ne<=e;ne++)for(H=0;H<=n;H++)S=H/n,k=ne/e,v=-Oe*Math.cos(pe+S*Me)*Math.sin(Re+k*Fe),_=Oe*Math.cos(Re+k*Fe),C=Oe*Math.sin(pe+S*Me)*Math.sin(Re+k*Fe),Be[0]=v,Be[1]=_,Be[2]=C,nt[0]=S,nt[1]=k,t.set(rt,Be),r.set(rt,nt),Be[0]*=Ct,Be[1]*=Ct,Be[2]*=Ct,i.set(rt,Be),rt++;var Ft,nn,Xt,pn=n+1,mn=0;for(ne=0;ne<e;ne++)for(H=0;H<n;H++)Ft=ne*pn+H,Xt=(ne+1)*pn+H+1,nn=(ne+1)*pn+H,p[mn++]=ne*pn+H+1,p[mn++]=Ft,p[mn++]=Xt,p[mn++]=Ft,p[mn++]=nn,p[mn++]=Xt;this.boundingBox=new Ws,this.boundingBox.max.set(Oe,Oe,Oe),this.boundingBox.min.set(-Oe,-Oe,-Oe)}});const xne=bne;var Cne=sc.extend({castShadow:!1},{type:"AMBIENT_LIGHT",uniformTemplates:{ambientLightColor:{type:"3f",value:function(e){var n=e.color,t=e.intensity;return[n[0]*t,n[1]*t,n[2]*t]}}}});const wne=Cne;var Sne=sc.extend({shadowBias:.001,shadowSlopeScale:2,shadowCascade:1,cascadeSplitLogFactor:.2},{type:"DIRECTIONAL_LIGHT",uniformTemplates:{directionalLightDirection:{type:"3f",value:function(e){return e.__dir=e.__dir||new Ln,e.__dir.copy(e.worldTransform.z).normalize().negate().array}},directionalLightColor:{type:"3f",value:function(e){var n=e.color,t=e.intensity;return[n[0]*t,n[1]*t,n[2]*t]}}},clone:function(){var e=sc.prototype.clone.call(this);return e.shadowBias=this.shadowBias,e.shadowSlopeScale=this.shadowSlopeScale,e}});const Dne=Sne;var Mne=sc.extend({range:100,castShadow:!1},{type:"POINT_LIGHT",uniformTemplates:{pointLightPosition:{type:"3f",value:function(e){return e.getWorldPosition().array}},pointLightRange:{type:"1f",value:function(e){return e.range}},pointLightColor:{type:"3f",value:function(e){var n=e.color,t=e.intensity;return[n[0]*t,n[1]*t,n[2]*t]}}},clone:function(){var e=sc.prototype.clone.call(this);return e.range=this.range,e}});const Tne=Mne;var Ene=sc.extend({range:20,umbraAngle:30,penumbraAngle:45,falloffFactor:2,shadowBias:.001,shadowSlopeScale:2},{type:"SPOT_LIGHT",uniformTemplates:{spotLightPosition:{type:"3f",value:function(e){return e.getWorldPosition().array}},spotLightRange:{type:"1f",value:function(e){return e.range}},spotLightUmbraAngleCosine:{type:"1f",value:function(e){return Math.cos(e.umbraAngle*Math.PI/180)}},spotLightPenumbraAngleCosine:{type:"1f",value:function(e){return Math.cos(e.penumbraAngle*Math.PI/180)}},spotLightFalloffFactor:{type:"1f",value:function(e){return e.falloffFactor}},spotLightDirection:{type:"3f",value:function(e){return e.__dir=e.__dir||new Ln,e.__dir.copy(e.worldTransform.z).negate().array}},spotLightColor:{type:"3f",value:function(e){var n=e.color,t=e.intensity;return[n[0]*t,n[1]*t,n[2]*t]}}},clone:function(){var e=sc.prototype.clone.call(this);return e.range=this.range,e.umbraAngle=this.umbraAngle,e.penumbraAngle=this.penumbraAngle,e.falloffFactor=this.falloffFactor,e.shadowBias=this.shadowBias,e.shadowSlopeScale=this.shadowSlopeScale,e}});const Ane=Ene;var hi=function(e,n,t,r){this.array=Wn.fromValues(e=e||0,n=n||0,t=t||0,r=r||0),this._dirty=!0};hi.prototype={constructor:hi,add:function(e){return Wn.add(this.array,this.array,e.array),this._dirty=!0,this},set:function(e,n,t,r){return this.array[0]=e,this.array[1]=n,this.array[2]=t,this.array[3]=r,this._dirty=!0,this},setArray:function(e){return this.array[0]=e[0],this.array[1]=e[1],this.array[2]=e[2],this.array[3]=e[3],this._dirty=!0,this},clone:function(){return new hi(this.x,this.y,this.z,this.w)},copy:function(e){return Wn.copy(this.array,e.array),this._dirty=!0,this},dist:function(e){return Wn.dist(this.array,e.array)},distance:function(e){return Wn.distance(this.array,e.array)},div:function(e){return Wn.div(this.array,this.array,e.array),this._dirty=!0,this},divide:function(e){return Wn.divide(this.array,this.array,e.array),this._dirty=!0,this},dot:function(e){return Wn.dot(this.array,e.array)},len:function(){return Wn.len(this.array)},length:function(){return Wn.length(this.array)},lerp:function(e,n,t){return Wn.lerp(this.array,e.array,n.array,t),this._dirty=!0,this},min:function(e){return Wn.min(this.array,this.array,e.array),this._dirty=!0,this},max:function(e){return Wn.max(this.array,this.array,e.array),this._dirty=!0,this},mul:function(e){return Wn.mul(this.array,this.array,e.array),this._dirty=!0,this},multiply:function(e){return Wn.multiply(this.array,this.array,e.array),this._dirty=!0,this},negate:function(){return Wn.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return Wn.normalize(this.array,this.array),this._dirty=!0,this},random:function(e){return Wn.random(this.array,e),this._dirty=!0,this},scale:function(e){return Wn.scale(this.array,this.array,e),this._dirty=!0,this},scaleAndAdd:function(e,n){return Wn.scaleAndAdd(this.array,this.array,e.array,n),this._dirty=!0,this},sqrDist:function(e){return Wn.sqrDist(this.array,e.array)},squaredDistance:function(e){return Wn.squaredDistance(this.array,e.array)},sqrLen:function(){return Wn.sqrLen(this.array)},squaredLength:function(){return Wn.squaredLength(this.array)},sub:function(e){return Wn.sub(this.array,this.array,e.array),this._dirty=!0,this},subtract:function(e){return Wn.subtract(this.array,this.array,e.array),this._dirty=!0,this},transformMat4:function(e){return Wn.transformMat4(this.array,this.array,e.array),this._dirty=!0,this},transformQuat:function(e){return Wn.transformQuat(this.array,this.array,e.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var JC=Object.defineProperty;if(JC){var AI=hi.prototype;JC(AI,"x",{get:function(){return this.array[0]},set:function(e){this.array[0]=e,this._dirty=!0}}),JC(AI,"y",{get:function(){return this.array[1]},set:function(e){this.array[1]=e,this._dirty=!0}}),JC(AI,"z",{get:function(){return this.array[2]},set:function(e){this.array[2]=e,this._dirty=!0}}),JC(AI,"w",{get:function(){return this.array[3]},set:function(e){this.array[3]=e,this._dirty=!0}})}hi.add=function(e,n,t){return Wn.add(e.array,n.array,t.array),e._dirty=!0,e},hi.set=function(e,n,t,r,i){Wn.set(e.array,n,t,r,i),e._dirty=!0},hi.copy=function(e,n){return Wn.copy(e.array,n.array),e._dirty=!0,e},hi.distance=hi.dist=function(e,n){return Wn.distance(e.array,n.array)},hi.divide=hi.div=function(e,n,t){return Wn.divide(e.array,n.array,t.array),e._dirty=!0,e},hi.dot=function(e,n){return Wn.dot(e.array,n.array)},hi.len=function(e){return Wn.length(e.array)},hi.lerp=function(e,n,t,r){return Wn.lerp(e.array,n.array,t.array,r),e._dirty=!0,e},hi.min=function(e,n,t){return Wn.min(e.array,n.array,t.array),e._dirty=!0,e},hi.max=function(e,n,t){return Wn.max(e.array,n.array,t.array),e._dirty=!0,e},hi.multiply=hi.mul=function(e,n,t){return Wn.multiply(e.array,n.array,t.array),e._dirty=!0,e},hi.negate=function(e,n){return Wn.negate(e.array,n.array),e._dirty=!0,e},hi.normalize=function(e,n){return Wn.normalize(e.array,n.array),e._dirty=!0,e},hi.random=function(e,n){return Wn.random(e.array,n),e._dirty=!0,e},hi.scale=function(e,n,t){return Wn.scale(e.array,n.array,t),e._dirty=!0,e},hi.scaleAndAdd=function(e,n,t,r){return Wn.scaleAndAdd(e.array,n.array,t.array,r),e._dirty=!0,e},hi.squaredDistance=hi.sqrDist=function(e,n){return Wn.sqrDist(e.array,n.array)},hi.squaredLength=hi.sqrLen=function(e){return Wn.sqrLen(e.array)},hi.subtract=hi.sub=function(e,n,t){return Wn.subtract(e.array,n.array,t.array),e._dirty=!0,e},hi.transformMat4=function(e,n,t){return Wn.transformMat4(e.array,n.array,t.array),e._dirty=!0,e},hi.transformQuat=function(e,n,t){return Wn.transformQuat(e.array,n.array,t.array),e._dirty=!0,e};const Ine=hi;var Es={create:function(){var e=new Xo(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},clone:function(e){var n=new Xo(4);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n},copy:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},transpose:function(e,n){if(e===n){var t=n[1];e[1]=n[2],e[2]=t}else e[0]=n[0],e[1]=n[2],e[2]=n[1],e[3]=n[3];return e},invert:function(e,n){var t=n[0],r=n[1],i=n[2],s=n[3],d=t*s-i*r;return d?(e[0]=s*(d=1/d),e[1]=-r*d,e[2]=-i*d,e[3]=t*d,e):null},adjoint:function(e,n){var t=n[0];return e[0]=n[3],e[1]=-n[1],e[2]=-n[2],e[3]=t,e},determinant:function(e){return e[0]*e[3]-e[2]*e[1]},multiply:function(e,n,t){var r=n[0],i=n[1],s=n[2],d=n[3],p=t[0],v=t[1],_=t[2],C=t[3];return e[0]=r*p+s*v,e[1]=i*p+d*v,e[2]=r*_+s*C,e[3]=i*_+d*C,e}};Es.mul=Es.multiply,Es.rotate=function(e,n,t){var r=n[0],i=n[1],s=n[2],d=n[3],p=Math.sin(t),v=Math.cos(t);return e[0]=r*v+s*p,e[1]=i*v+d*p,e[2]=r*-p+s*v,e[3]=i*-p+d*v,e},Es.scale=function(e,n,t){var i=n[1],s=n[2],d=n[3],p=t[0],v=t[1];return e[0]=n[0]*p,e[1]=i*p,e[2]=s*v,e[3]=d*v,e},Es.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},Es.LDU=function(e,n,t,r){return e[2]=r[2]/r[0],t[0]=r[0],t[1]=r[1],t[3]=r[3]-e[2]*t[1],[e,n,t]};const Fa=Es;var Zs=function(){this.array=Fa.create(),this._dirty=!0};Zs.prototype={constructor:Zs,setArray:function(e){for(var n=0;n<this.array.length;n++)this.array[n]=e[n];return this._dirty=!0,this},clone:function(){return(new Zs).copy(this)},copy:function(e){return Fa.copy(this.array,e.array),this._dirty=!0,this},adjoint:function(){return Fa.adjoint(this.array,this.array),this._dirty=!0,this},determinant:function(){return Fa.determinant(this.array)},identity:function(){return Fa.identity(this.array),this._dirty=!0,this},invert:function(){return Fa.invert(this.array,this.array),this._dirty=!0,this},mul:function(e){return Fa.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return Fa.mul(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return Fa.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return Fa.multiply(this.array,e.array,this.array),this._dirty=!0,this},rotate:function(e){return Fa.rotate(this.array,this.array,e),this._dirty=!0,this},scale:function(e){return Fa.scale(this.array,this.array,e.array),this._dirty=!0,this},transpose:function(){return Fa.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Zs.adjoint=function(e,n){return Fa.adjoint(e.array,n.array),e._dirty=!0,e},Zs.copy=function(e,n){return Fa.copy(e.array,n.array),e._dirty=!0,e},Zs.determinant=function(e){return Fa.determinant(e.array)},Zs.identity=function(e){return Fa.identity(e.array),e._dirty=!0,e},Zs.invert=function(e,n){return Fa.invert(e.array,n.array),e._dirty=!0,e},Zs.multiply=Zs.mul=function(e,n,t){return Fa.mul(e.array,n.array,t.array),e._dirty=!0,e},Zs.rotate=function(e,n,t){return Fa.rotate(e.array,n.array,t),e._dirty=!0,e},Zs.scale=function(e,n,t){return Fa.scale(e.array,n.array,t.array),e._dirty=!0,e},Zs.transpose=function(e,n){return Fa.transpose(e.array,n.array),e._dirty=!0,e};const Pne=Zs;var xl={create:function(){var e=new Xo(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},clone:function(e){var n=new Xo(6);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n},copy:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},invert:function(e,n){var t=n[0],r=n[1],i=n[2],s=n[3],d=n[4],p=n[5],v=t*s-r*i;return v?(e[0]=s*(v=1/v),e[1]=-r*v,e[2]=-i*v,e[3]=t*v,e[4]=(i*p-s*d)*v,e[5]=(r*d-t*p)*v,e):null},determinant:function(e){return e[0]*e[3]-e[1]*e[2]},multiply:function(e,n,t){var r=n[0],i=n[1],s=n[2],d=n[3],p=n[4],v=n[5],_=t[0],C=t[1],S=t[2],k=t[3],H=t[4],ne=t[5];return e[0]=r*_+s*C,e[1]=i*_+d*C,e[2]=r*S+s*k,e[3]=i*S+d*k,e[4]=r*H+s*ne+p,e[5]=i*H+d*ne+v,e}};xl.mul=xl.multiply,xl.rotate=function(e,n,t){var r=n[0],i=n[1],s=n[2],d=n[3],p=n[4],v=n[5],_=Math.sin(t),C=Math.cos(t);return e[0]=r*C+s*_,e[1]=i*C+d*_,e[2]=r*-_+s*C,e[3]=i*-_+d*C,e[4]=p,e[5]=v,e},xl.scale=function(e,n,t){var i=n[1],s=n[2],d=n[3],p=n[4],v=n[5],_=t[0],C=t[1];return e[0]=n[0]*_,e[1]=i*_,e[2]=s*C,e[3]=d*C,e[4]=p,e[5]=v,e},xl.translate=function(e,n,t){var r=n[0],i=n[1],s=n[2],d=n[3],p=n[4],v=n[5],_=t[0],C=t[1];return e[0]=r,e[1]=i,e[2]=s,e[3]=d,e[4]=r*_+s*C+p,e[5]=i*_+d*C+v,e},xl.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)};const lo=xl;var Cl=function(){this.array=lo.create(),this._dirty=!0};Cl.prototype={constructor:Cl,setArray:function(e){for(var n=0;n<this.array.length;n++)this.array[n]=e[n];return this._dirty=!0,this},clone:function(){return(new Cl).copy(this)},copy:function(e){return lo.copy(this.array,e.array),this._dirty=!0,this},determinant:function(){return lo.determinant(this.array)},identity:function(){return lo.identity(this.array),this._dirty=!0,this},invert:function(){return lo.invert(this.array,this.array),this._dirty=!0,this},mul:function(e){return lo.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return lo.mul(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return lo.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return lo.multiply(this.array,e.array,this.array),this._dirty=!0,this},rotate:function(e){return lo.rotate(this.array,this.array,e),this._dirty=!0,this},scale:function(e){return lo.scale(this.array,this.array,e.array),this._dirty=!0,this},translate:function(e){return lo.translate(this.array,this.array,e.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Cl.copy=function(e,n){return lo.copy(e.array,n.array),e._dirty=!0,e},Cl.determinant=function(e){return lo.determinant(e.array)},Cl.identity=function(e){return lo.identity(e.array),e._dirty=!0,e},Cl.invert=function(e,n){return lo.invert(e.array,n.array),e._dirty=!0,e},Cl.multiply=Cl.mul=function(e,n,t){return lo.mul(e.array,n.array,t.array),e._dirty=!0,e},Cl.rotate=function(e,n,t){return lo.rotate(e.array,n.array,t),e._dirty=!0,e},Cl.scale=function(e,n,t){return lo.scale(e.array,n.array,t.array),e._dirty=!0,e},Cl.translate=function(e,n,t){return lo.translate(e.array,n.array,t.array),e._dirty=!0,e};const Rne=Cl;var xo=function(){this.array=ui.create(),this._dirty=!0};xo.prototype={constructor:xo,setArray:function(e){for(var n=0;n<this.array.length;n++)this.array[n]=e[n];return this._dirty=!0,this},adjoint:function(){return ui.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return(new xo).copy(this)},copy:function(e){return ui.copy(this.array,e.array),this._dirty=!0,this},determinant:function(){return ui.determinant(this.array)},fromMat2d:function(e){return ui.fromMat2d(this.array,e.array),this._dirty=!0,this},fromMat4:function(e){return ui.fromMat4(this.array,e.array),this._dirty=!0,this},fromQuat:function(e){return ui.fromQuat(this.array,e.array),this._dirty=!0,this},identity:function(){return ui.identity(this.array),this._dirty=!0,this},invert:function(){return ui.invert(this.array,this.array),this._dirty=!0,this},mul:function(e){return ui.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return ui.mul(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return ui.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return ui.multiply(this.array,e.array,this.array),this._dirty=!0,this},rotate:function(e){return ui.rotate(this.array,this.array,e),this._dirty=!0,this},scale:function(e){return ui.scale(this.array,this.array,e.array),this._dirty=!0,this},translate:function(e){return ui.translate(this.array,this.array,e.array),this._dirty=!0,this},normalFromMat4:function(e){return ui.normalFromMat4(this.array,e.array),this._dirty=!0,this},transpose:function(){return ui.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},xo.adjoint=function(e,n){return ui.adjoint(e.array,n.array),e._dirty=!0,e},xo.copy=function(e,n){return ui.copy(e.array,n.array),e._dirty=!0,e},xo.determinant=function(e){return ui.determinant(e.array)},xo.identity=function(e){return ui.identity(e.array),e._dirty=!0,e},xo.invert=function(e,n){return ui.invert(e.array,n.array),e},xo.multiply=xo.mul=function(e,n,t){return ui.mul(e.array,n.array,t.array),e._dirty=!0,e},xo.fromMat2d=function(e,n){return ui.fromMat2d(e.array,n.array),e._dirty=!0,e},xo.fromMat4=function(e,n){return ui.fromMat4(e.array,n.array),e._dirty=!0,e},xo.fromQuat=function(e,n){return ui.fromQuat(e.array,n.array),e._dirty=!0,e},xo.normalFromMat4=function(e,n){return ui.normalFromMat4(e.array,n.array),e._dirty=!0,e},xo.rotate=function(e,n,t){return ui.rotate(e.array,n.array,t),e._dirty=!0,e},xo.scale=function(e,n,t){return ui.scale(e.array,n.array,t.array),e._dirty=!0,e},xo.transpose=function(e,n){return ui.transpose(e.array,n.array),e._dirty=!0,e},xo.translate=function(e,n,t){return ui.translate(e.array,n.array,t.array),e._dirty=!0,e};const Lne=xo;var One=z(6062),kne={_animators:null,getAnimators:function(){return this._animators=this._animators||[],this._animators},animate:function(e,n){var r;if(this._animators=this._animators||[],e){for(var i=e.split("."),s=this,d=0,p=i.length;d<p;d++)!s||(s=s[i[d]]);s&&(r=s)}else r=this;if(null==r)throw new Error("Target "+e+" not exists");var v=this._animators,_=new One.Z(r,n),C=this;return _.during(function(){C.__zr&&C.__zr.refresh()}).done(function(){var S=v.indexOf(_);S>=0&&v.splice(S,1)}),v.push(_),this.__zr&&this.__zr.animation.addAnimator(_),_},stopAnimation:function(e){this._animators=this._animators||[];for(var n=this._animators,t=n.length,r=0;r<t;r++)n[r].stop(e);return n.length=0,this},addAnimatorsToZr:function(e){if(this._animators)for(var n=0;n<this._animators.length;n++)e.animation.addAnimator(this._animators[n])},removeAnimatorsFromZr:function(e){if(this._animators)for(var n=0;n<this._animators.length;n++)e.animation.removeAnimator(this._animators[n])}};const E8="\n@export clay.util.rand\nhighp float rand(vec2 uv) {\n const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n highp float dt = dot(uv.xy, vec2(a,b)), sn = mod(dt, 3.141592653589793);\n return fract(sin(sn) * c);\n}\n@end\n@export clay.util.calculate_attenuation\nuniform float attenuationFactor : 5.0;\nfloat lightAttenuation(float dist, float range)\n{\n float attenuation = 1.0;\n attenuation = dist*dist/(range*range+1.0);\n float att_s = attenuationFactor;\n attenuation = 1.0/(attenuation*att_s+1.0);\n att_s = 1.0/(att_s+1.0);\n attenuation = attenuation - att_s;\n attenuation /= 1.0 - att_s;\n return clamp(attenuation, 0.0, 1.0);\n}\n@end\n@export clay.util.edge_factor\n#ifdef SUPPORT_STANDARD_DERIVATIVES\nfloat edgeFactor(float width)\n{\n vec3 d = fwidth(v_Barycentric);\n vec3 a3 = smoothstep(vec3(0.0), d * width, v_Barycentric);\n return min(min(a3.x, a3.y), a3.z);\n}\n#else\nfloat edgeFactor(float width)\n{\n return 1.0;\n}\n#endif\n@end\n@export clay.util.encode_float\nvec4 encodeFloat(const in float depth)\n{\n const vec4 bitShifts = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n const vec4 bit_mask = vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n vec4 res = fract(depth * bitShifts);\n res -= res.xxyz * bit_mask;\n return res;\n}\n@end\n@export clay.util.decode_float\nfloat decodeFloat(const in vec4 color)\n{\n const vec4 bitShifts = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n return dot(color, bitShifts);\n}\n@end\n@export clay.util.float\n@import clay.util.encode_float\n@import clay.util.decode_float\n@end\n@export clay.util.rgbm_decode\nvec3 RGBMDecode(vec4 rgbm, float range) {\n return range * rgbm.rgb * rgbm.a;\n}\n@end\n@export clay.util.rgbm_encode\nvec4 RGBMEncode(vec3 color, float range) {\n if (dot(color, color) == 0.0) {\n return vec4(0.0);\n }\n vec4 rgbm;\n color /= range;\n rgbm.a = clamp(max(max(color.r, color.g), max(color.b, 1e-6)), 0.0, 1.0);\n rgbm.a = ceil(rgbm.a * 255.0) / 255.0;\n rgbm.rgb = color / rgbm.a;\n return rgbm;\n}\n@end\n@export clay.util.rgbm\n@import clay.util.rgbm_decode\n@import clay.util.rgbm_encode\nvec4 decodeHDR(vec4 color)\n{\n#if defined(RGBM_DECODE) || defined(RGBM)\n return vec4(RGBMDecode(color, 8.12), 1.0);\n#else\n return color;\n#endif\n}\nvec4 encodeHDR(vec4 color)\n{\n#if defined(RGBM_ENCODE) || defined(RGBM)\n return RGBMEncode(color.xyz, 8.12);\n#else\n return color;\n#endif\n}\n@end\n@export clay.util.srgb\nvec4 sRGBToLinear(in vec4 value) {\n return vec4(mix(pow(value.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), value.rgb * 0.0773993808, vec3(lessThanEqual(value.rgb, vec3(0.04045)))), value.w);\n}\nvec4 linearTosRGB(in vec4 value) {\n return vec4(mix(pow(value.rgb, vec3(0.41666)) * 1.055 - vec3(0.055), value.rgb * 12.92, vec3(lessThanEqual(value.rgb, vec3(0.0031308)))), value.w);\n}\n@end\n@export clay.chunk.skinning_header\n#ifdef SKINNING\nattribute vec3 weight : WEIGHT;\nattribute vec4 joint : JOINT;\n#ifdef USE_SKIN_MATRICES_TEXTURE\nuniform sampler2D skinMatricesTexture : ignore;\nuniform float skinMatricesTextureSize: ignore;\nmat4 getSkinMatrix(sampler2D tex, float idx) {\n float j = idx * 4.0;\n float x = mod(j, skinMatricesTextureSize);\n float y = floor(j / skinMatricesTextureSize) + 0.5;\n vec2 scale = vec2(skinMatricesTextureSize);\n return mat4(\n texture2D(tex, vec2(x + 0.5, y) / scale),\n texture2D(tex, vec2(x + 1.5, y) / scale),\n texture2D(tex, vec2(x + 2.5, y) / scale),\n texture2D(tex, vec2(x + 3.5, y) / scale)\n );\n}\nmat4 getSkinMatrix(float idx) {\n return getSkinMatrix(skinMatricesTexture, idx);\n}\n#else\nuniform mat4 skinMatrix[JOINT_COUNT] : SKIN_MATRIX;\nmat4 getSkinMatrix(float idx) {\n return skinMatrix[int(idx)];\n}\n#endif\n#endif\n@end\n@export clay.chunk.skin_matrix\nmat4 skinMatrixWS = getSkinMatrix(joint.x) * weight.x;\nif (weight.y > 1e-4)\n{\n skinMatrixWS += getSkinMatrix(joint.y) * weight.y;\n}\nif (weight.z > 1e-4)\n{\n skinMatrixWS += getSkinMatrix(joint.z) * weight.z;\n}\nfloat weightW = 1.0-weight.x-weight.y-weight.z;\nif (weightW > 1e-4)\n{\n skinMatrixWS += getSkinMatrix(joint.w) * weightW;\n}\n@end\n@export clay.chunk.instancing_header\n#ifdef INSTANCING\nattribute vec4 instanceMat1;\nattribute vec4 instanceMat2;\nattribute vec4 instanceMat3;\n#endif\n@end\n@export clay.chunk.instancing_matrix\nmat4 instanceMat = mat4(\n vec4(instanceMat1.xyz, 0.0),\n vec4(instanceMat2.xyz, 0.0),\n vec4(instanceMat3.xyz, 0.0),\n vec4(instanceMat1.w, instanceMat2.w, instanceMat3.w, 1.0)\n);\n@end\n@export clay.util.parallax_correct\nvec3 parallaxCorrect(in vec3 dir, in vec3 pos, in vec3 boxMin, in vec3 boxMax) {\n vec3 first = (boxMax - pos) / dir;\n vec3 second = (boxMin - pos) / dir;\n vec3 further = max(first, second);\n float dist = min(further.x, min(further.y, further.z));\n vec3 fixedPos = pos + dir * dist;\n vec3 boxCenter = (boxMax + boxMin) * 0.5;\n return normalize(fixedPos - boxCenter);\n}\n@end\n@export clay.util.clamp_sample\nvec4 clampSample(const in sampler2D texture, const in vec2 coord)\n{\n#ifdef STEREO\n float eye = step(0.5, coord.x) * 0.5;\n vec2 coordClamped = clamp(coord, vec2(eye, 0.0), vec2(0.5 + eye, 1.0));\n#else\n vec2 coordClamped = clamp(coord, vec2(0.0), vec2(1.0));\n#endif\n return texture2D(texture, coordClamped);\n}\n@end\n@export clay.util.ACES\nvec3 ACESToneMapping(vec3 color)\n{\n const float A = 2.51;\n const float B = 0.03;\n const float C = 2.43;\n const float D = 0.59;\n const float E = 0.14;\n return (color * (A * color + B)) / (color * (C * color + D) + E);\n}\n@end";function A8(e){return e instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof Image}Object.assign(Kc.prototype,kne),Gn.import(E8),Gn.import(r8),Gn.import("\n@export ecgl.common.transformUniforms\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;\nuniform mat4 world : WORLD;\n@end\n\n@export ecgl.common.attributes\nattribute vec3 position : POSITION;\nattribute vec2 texcoord : TEXCOORD_0;\nattribute vec3 normal : NORMAL;\n@end\n\n@export ecgl.common.uv.header\nuniform vec2 uvRepeat : [1.0, 1.0];\nuniform vec2 uvOffset : [0.0, 0.0];\nuniform vec2 detailUvRepeat : [1.0, 1.0];\nuniform vec2 detailUvOffset : [0.0, 0.0];\n\nvarying vec2 v_Texcoord;\nvarying vec2 v_DetailTexcoord;\n@end\n\n@export ecgl.common.uv.main\nv_Texcoord = texcoord * uvRepeat + uvOffset;\nv_DetailTexcoord = texcoord * detailUvRepeat + detailUvOffset;\n@end\n\n@export ecgl.common.uv.fragmentHeader\nvarying vec2 v_Texcoord;\nvarying vec2 v_DetailTexcoord;\n@end\n\n\n@export ecgl.common.albedo.main\n\n vec4 albedoTexel = vec4(1.0);\n#ifdef DIFFUSEMAP_ENABLED\n albedoTexel = texture2D(diffuseMap, v_Texcoord);\n #ifdef SRGB_DECODE\n albedoTexel = sRGBToLinear(albedoTexel);\n #endif\n#endif\n\n#ifdef DETAILMAP_ENABLED\n vec4 detailTexel = texture2D(detailMap, v_DetailTexcoord);\n #ifdef SRGB_DECODE\n detailTexel = sRGBToLinear(detailTexel);\n #endif\n albedoTexel.rgb = mix(albedoTexel.rgb, detailTexel.rgb, detailTexel.a);\n albedoTexel.a = detailTexel.a + (1.0 - detailTexel.a) * albedoTexel.a;\n#endif\n\n@end\n\n@export ecgl.common.wireframe.vertexHeader\n\n#ifdef WIREFRAME_QUAD\nattribute vec4 barycentric;\nvarying vec4 v_Barycentric;\n#elif defined(WIREFRAME_TRIANGLE)\nattribute vec3 barycentric;\nvarying vec3 v_Barycentric;\n#endif\n\n@end\n\n@export ecgl.common.wireframe.vertexMain\n\n#if defined(WIREFRAME_QUAD) || defined(WIREFRAME_TRIANGLE)\n v_Barycentric = barycentric;\n#endif\n\n@end\n\n\n@export ecgl.common.wireframe.fragmentHeader\n\nuniform float wireframeLineWidth : 1;\nuniform vec4 wireframeLineColor: [0, 0, 0, 0.5];\n\n#ifdef WIREFRAME_QUAD\nvarying vec4 v_Barycentric;\nfloat edgeFactor () {\n vec4 d = fwidth(v_Barycentric);\n vec4 a4 = smoothstep(vec4(0.0), d * wireframeLineWidth, v_Barycentric);\n return min(min(min(a4.x, a4.y), a4.z), a4.w);\n}\n#elif defined(WIREFRAME_TRIANGLE)\nvarying vec3 v_Barycentric;\nfloat edgeFactor () {\n vec3 d = fwidth(v_Barycentric);\n vec3 a3 = smoothstep(vec3(0.0), d * wireframeLineWidth, v_Barycentric);\n return min(min(a3.x, a3.y), a3.z);\n}\n#endif\n\n@end\n\n\n@export ecgl.common.wireframe.fragmentMain\n\n#if defined(WIREFRAME_QUAD) || defined(WIREFRAME_TRIANGLE)\n if (wireframeLineWidth > 0.) {\n vec4 lineColor = wireframeLineColor;\n#ifdef SRGB_DECODE\n lineColor = sRGBToLinear(lineColor);\n#endif\n\n gl_FragColor.rgb = mix(gl_FragColor.rgb, lineColor.rgb, (1.0 - edgeFactor()) * lineColor.a);\n }\n#endif\n@end\n\n\n\n\n@export ecgl.common.bumpMap.header\n\n#ifdef BUMPMAP_ENABLED\nuniform sampler2D bumpMap;\nuniform float bumpScale : 1.0;\n\n\nvec3 bumpNormal(vec3 surfPos, vec3 surfNormal, vec3 baseNormal)\n{\n vec2 dSTdx = dFdx(v_Texcoord);\n vec2 dSTdy = dFdy(v_Texcoord);\n\n float Hll = bumpScale * texture2D(bumpMap, v_Texcoord).x;\n float dHx = bumpScale * texture2D(bumpMap, v_Texcoord + dSTdx).x - Hll;\n float dHy = bumpScale * texture2D(bumpMap, v_Texcoord + dSTdy).x - Hll;\n\n vec3 vSigmaX = dFdx(surfPos);\n vec3 vSigmaY = dFdy(surfPos);\n vec3 vN = surfNormal;\n\n vec3 R1 = cross(vSigmaY, vN);\n vec3 R2 = cross(vN, vSigmaX);\n\n float fDet = dot(vSigmaX, R1);\n\n vec3 vGrad = sign(fDet) * (dHx * R1 + dHy * R2);\n return normalize(abs(fDet) * baseNormal - vGrad);\n\n}\n#endif\n\n@end\n\n@export ecgl.common.normalMap.vertexHeader\n\n#ifdef NORMALMAP_ENABLED\nattribute vec4 tangent : TANGENT;\nvarying vec3 v_Tangent;\nvarying vec3 v_Bitangent;\n#endif\n\n@end\n\n@export ecgl.common.normalMap.vertexMain\n\n#ifdef NORMALMAP_ENABLED\n if (dot(tangent, tangent) > 0.0) {\n v_Tangent = normalize((worldInverseTranspose * vec4(tangent.xyz, 0.0)).xyz);\n v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);\n }\n#endif\n\n@end\n\n\n@export ecgl.common.normalMap.fragmentHeader\n\n#ifdef NORMALMAP_ENABLED\nuniform sampler2D normalMap;\nvarying vec3 v_Tangent;\nvarying vec3 v_Bitangent;\n#endif\n\n@end\n\n@export ecgl.common.normalMap.fragmentMain\n#ifdef NORMALMAP_ENABLED\n if (dot(v_Tangent, v_Tangent) > 0.0) {\n vec3 normalTexel = texture2D(normalMap, v_DetailTexcoord).xyz;\n if (dot(normalTexel, normalTexel) > 0.0) { N = normalTexel * 2.0 - 1.0;\n mat3 tbn = mat3(v_Tangent, v_Bitangent, v_Normal);\n N = normalize(tbn * N);\n }\n }\n#endif\n@end\n\n\n\n@export ecgl.common.vertexAnimation.header\n\n#ifdef VERTEX_ANIMATION\nattribute vec3 prevPosition;\nattribute vec3 prevNormal;\nuniform float percent;\n#endif\n\n@end\n\n@export ecgl.common.vertexAnimation.main\n\n#ifdef VERTEX_ANIMATION\n vec3 pos = mix(prevPosition, position, percent);\n vec3 norm = mix(prevNormal, normal, percent);\n#else\n vec3 pos = position;\n vec3 norm = normal;\n#endif\n\n@end\n\n\n@export ecgl.common.ssaoMap.header\n#ifdef SSAOMAP_ENABLED\nuniform sampler2D ssaoMap;\nuniform vec4 viewport : VIEWPORT;\n#endif\n@end\n\n@export ecgl.common.ssaoMap.main\n float ao = 1.0;\n#ifdef SSAOMAP_ENABLED\n ao = texture2D(ssaoMap, (gl_FragCoord.xy - viewport.xy) / viewport.zw).r;\n#endif\n@end\n\n\n\n\n@export ecgl.common.diffuseLayer.header\n\n#if (LAYER_DIFFUSEMAP_COUNT > 0)\nuniform float layerDiffuseIntensity[LAYER_DIFFUSEMAP_COUNT];\nuniform sampler2D layerDiffuseMap[LAYER_DIFFUSEMAP_COUNT];\n#endif\n\n@end\n\n@export ecgl.common.emissiveLayer.header\n\n#if (LAYER_EMISSIVEMAP_COUNT > 0)\nuniform float layerEmissionIntensity[LAYER_EMISSIVEMAP_COUNT];\nuniform sampler2D layerEmissiveMap[LAYER_EMISSIVEMAP_COUNT];\n#endif\n\n@end\n\n@export ecgl.common.layers.header\n@import ecgl.common.diffuseLayer.header\n@import ecgl.common.emissiveLayer.header\n@end\n\n@export ecgl.common.diffuseLayer.main\n\n#if (LAYER_DIFFUSEMAP_COUNT > 0)\n for (int _idx_ = 0; _idx_ < LAYER_DIFFUSEMAP_COUNT; _idx_++) {{\n float intensity = layerDiffuseIntensity[_idx_];\n vec4 texel2 = texture2D(layerDiffuseMap[_idx_], v_Texcoord);\n #ifdef SRGB_DECODE\n texel2 = sRGBToLinear(texel2);\n #endif\n albedoTexel.rgb = mix(albedoTexel.rgb, texel2.rgb * intensity, texel2.a);\n albedoTexel.a = texel2.a + (1.0 - texel2.a) * albedoTexel.a;\n }}\n#endif\n\n@end\n\n@export ecgl.common.emissiveLayer.main\n\n#if (LAYER_EMISSIVEMAP_COUNT > 0)\n for (int _idx_ = 0; _idx_ < LAYER_EMISSIVEMAP_COUNT; _idx_++)\n {{\n vec4 texel2 = texture2D(layerEmissiveMap[_idx_], v_Texcoord) * layerEmissionIntensity[_idx_];\n #ifdef SRGB_DECODE\n texel2 = sRGBToLinear(texel2);\n #endif\n float intensity = layerEmissionIntensity[_idx_];\n gl_FragColor.rgb += texel2.rgb * texel2.a * intensity;\n }}\n#endif\n\n@end\n"),Gn.import("@export ecgl.color.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\n@import ecgl.common.uv.header\n\nattribute vec2 texcoord : TEXCOORD_0;\nattribute vec3 position: POSITION;\n\n@import ecgl.common.wireframe.vertexHeader\n\n#ifdef VERTEX_COLOR\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n#endif\n\n#ifdef VERTEX_ANIMATION\nattribute vec3 prevPosition;\nuniform float percent : 1.0;\n#endif\n\n#ifdef ATMOSPHERE_ENABLED\nattribute vec3 normal: NORMAL;\nuniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;\nvarying vec3 v_Normal;\n#endif\n\nvoid main()\n{\n#ifdef VERTEX_ANIMATION\n vec3 pos = mix(prevPosition, position, percent);\n#else\n vec3 pos = position;\n#endif\n\n gl_Position = worldViewProjection * vec4(pos, 1.0);\n\n @import ecgl.common.uv.main\n\n#ifdef VERTEX_COLOR\n v_Color = a_Color;\n#endif\n\n#ifdef ATMOSPHERE_ENABLED\n v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);\n#endif\n\n @import ecgl.common.wireframe.vertexMain\n\n}\n\n@end\n\n@export ecgl.color.fragment\n\n#define LAYER_DIFFUSEMAP_COUNT 0\n#define LAYER_EMISSIVEMAP_COUNT 0\n\nuniform sampler2D diffuseMap;\nuniform sampler2D detailMap;\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\n#ifdef ATMOSPHERE_ENABLED\nuniform mat4 viewTranspose: VIEWTRANSPOSE;\nuniform vec3 glowColor;\nuniform float glowPower;\nvarying vec3 v_Normal;\n#endif\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\n\n@import ecgl.common.layers.header\n\n@import ecgl.common.uv.fragmentHeader\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.util.srgb\n\nvoid main()\n{\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(color);\n#else\n gl_FragColor = color;\n#endif\n\n#ifdef VERTEX_COLOR\n gl_FragColor *= v_Color;\n#endif\n\n @import ecgl.common.albedo.main\n\n @import ecgl.common.diffuseLayer.main\n\n gl_FragColor *= albedoTexel;\n\n#ifdef ATMOSPHERE_ENABLED\n float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);\n gl_FragColor.rgb += glowColor * atmoIntensity;\n#endif\n\n @import ecgl.common.emissiveLayer.main\n\n @import ecgl.common.wireframe.fragmentMain\n\n}\n@end"),Gn.import("/**\n * http: */\n\n@export ecgl.lambert.vertex\n\n@import ecgl.common.transformUniforms\n\n@import ecgl.common.uv.header\n\n\n@import ecgl.common.attributes\n\n@import ecgl.common.wireframe.vertexHeader\n\n#ifdef VERTEX_COLOR\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n#endif\n\n\n@import ecgl.common.vertexAnimation.header\n\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nvoid main()\n{\n @import ecgl.common.uv.main\n\n @import ecgl.common.vertexAnimation.main\n\n\n gl_Position = worldViewProjection * vec4(pos, 1.0);\n\n v_Normal = normalize((worldInverseTranspose * vec4(norm, 0.0)).xyz);\n v_WorldPosition = (world * vec4(pos, 1.0)).xyz;\n\n#ifdef VERTEX_COLOR\n v_Color = a_Color;\n#endif\n\n @import ecgl.common.wireframe.vertexMain\n}\n\n@end\n\n\n@export ecgl.lambert.fragment\n\n#define LAYER_DIFFUSEMAP_COUNT 0\n#define LAYER_EMISSIVEMAP_COUNT 0\n\n#define NORMAL_UP_AXIS 1\n#define NORMAL_FRONT_AXIS 2\n\n@import ecgl.common.uv.fragmentHeader\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nuniform sampler2D diffuseMap;\nuniform sampler2D detailMap;\n\n@import ecgl.common.layers.header\n\nuniform float emissionIntensity: 1.0;\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nuniform mat4 viewInverse : VIEWINVERSE;\n\n#ifdef ATMOSPHERE_ENABLED\nuniform mat4 viewTranspose: VIEWTRANSPOSE;\nuniform vec3 glowColor;\nuniform float glowPower;\n#endif\n\n#ifdef AMBIENT_LIGHT_COUNT\n@import clay.header.ambient_light\n#endif\n#ifdef AMBIENT_SH_LIGHT_COUNT\n@import clay.header.ambient_sh_light\n#endif\n\n#ifdef DIRECTIONAL_LIGHT_COUNT\n@import clay.header.directional_light\n#endif\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\n\n\n@import ecgl.common.ssaoMap.header\n\n@import ecgl.common.bumpMap.header\n\n@import clay.util.srgb\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.plugin.compute_shadow_map\n\nvoid main()\n{\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(color);\n#else\n gl_FragColor = color;\n#endif\n\n#ifdef VERTEX_COLOR\n #ifdef SRGB_DECODE\n gl_FragColor *= sRGBToLinear(v_Color);\n #else\n gl_FragColor *= v_Color;\n #endif\n#endif\n\n @import ecgl.common.albedo.main\n\n @import ecgl.common.diffuseLayer.main\n\n gl_FragColor *= albedoTexel;\n\n vec3 N = v_Normal;\n#ifdef DOUBLE_SIDED\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(eyePos - v_WorldPosition);\n\n if (dot(N, V) < 0.0) {\n N = -N;\n }\n#endif\n\n float ambientFactor = 1.0;\n\n#ifdef BUMPMAP_ENABLED\n N = bumpNormal(v_WorldPosition, v_Normal, N);\n ambientFactor = dot(v_Normal, N);\n#endif\n\n vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);\n\n vec3 diffuseColor = vec3(0.0, 0.0, 0.0);\n\n @import ecgl.common.ssaoMap.main\n\n#ifdef AMBIENT_LIGHT_COUNT\n for(int i = 0; i < AMBIENT_LIGHT_COUNT; i++)\n {\n diffuseColor += ambientLightColor[i] * ambientFactor * ao;\n }\n#endif\n#ifdef AMBIENT_SH_LIGHT_COUNT\n for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)\n {{\n diffuseColor += calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_] * ao;\n }}\n#endif\n#ifdef DIRECTIONAL_LIGHT_COUNT\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];\n if(shadowEnabled)\n {\n computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);\n }\n#endif\n for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)\n {\n vec3 lightDirection = -directionalLightDirection[i];\n vec3 lightColor = directionalLightColor[i];\n\n float shadowContrib = 1.0;\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n if (shadowEnabled)\n {\n shadowContrib = shadowContribsDir[i];\n }\n#endif\n\n float ndl = dot(N, normalize(lightDirection)) * shadowContrib;\n\n diffuseColor += lightColor * clamp(ndl, 0.0, 1.0);\n }\n#endif\n\n gl_FragColor.rgb *= diffuseColor;\n\n#ifdef ATMOSPHERE_ENABLED\n float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);\n gl_FragColor.rgb += glowColor * atmoIntensity;\n#endif\n\n @import ecgl.common.emissiveLayer.main\n\n @import ecgl.common.wireframe.fragmentMain\n}\n\n@end"),Gn.import("@export ecgl.realistic.vertex\n\n@import ecgl.common.transformUniforms\n\n@import ecgl.common.uv.header\n\n@import ecgl.common.attributes\n\n\n@import ecgl.common.wireframe.vertexHeader\n\n#ifdef VERTEX_COLOR\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n#endif\n\n#ifdef NORMALMAP_ENABLED\nattribute vec4 tangent : TANGENT;\nvarying vec3 v_Tangent;\nvarying vec3 v_Bitangent;\n#endif\n\n@import ecgl.common.vertexAnimation.header\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nvoid main()\n{\n\n @import ecgl.common.uv.main\n\n @import ecgl.common.vertexAnimation.main\n\n gl_Position = worldViewProjection * vec4(pos, 1.0);\n\n v_Normal = normalize((worldInverseTranspose * vec4(norm, 0.0)).xyz);\n v_WorldPosition = (world * vec4(pos, 1.0)).xyz;\n\n#ifdef VERTEX_COLOR\n v_Color = a_Color;\n#endif\n\n#ifdef NORMALMAP_ENABLED\n v_Tangent = normalize((worldInverseTranspose * vec4(tangent.xyz, 0.0)).xyz);\n v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);\n#endif\n\n @import ecgl.common.wireframe.vertexMain\n\n}\n\n@end\n\n\n\n@export ecgl.realistic.fragment\n\n#define LAYER_DIFFUSEMAP_COUNT 0\n#define LAYER_EMISSIVEMAP_COUNT 0\n#define PI 3.14159265358979\n#define ROUGHNESS_CHANEL 0\n#define METALNESS_CHANEL 1\n\n#define NORMAL_UP_AXIS 1\n#define NORMAL_FRONT_AXIS 2\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\n\n@import ecgl.common.uv.fragmentHeader\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nuniform sampler2D diffuseMap;\n\nuniform sampler2D detailMap;\nuniform sampler2D metalnessMap;\nuniform sampler2D roughnessMap;\n\n@import ecgl.common.layers.header\n\nuniform float emissionIntensity: 1.0;\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nuniform float metalness : 0.0;\nuniform float roughness : 0.5;\n\nuniform mat4 viewInverse : VIEWINVERSE;\n\n#ifdef ATMOSPHERE_ENABLED\nuniform mat4 viewTranspose: VIEWTRANSPOSE;\nuniform vec3 glowColor;\nuniform float glowPower;\n#endif\n\n#ifdef AMBIENT_LIGHT_COUNT\n@import clay.header.ambient_light\n#endif\n\n#ifdef AMBIENT_SH_LIGHT_COUNT\n@import clay.header.ambient_sh_light\n#endif\n\n#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT\n@import clay.header.ambient_cubemap_light\n#endif\n\n#ifdef DIRECTIONAL_LIGHT_COUNT\n@import clay.header.directional_light\n#endif\n\n@import ecgl.common.normalMap.fragmentHeader\n\n@import ecgl.common.ssaoMap.header\n\n@import ecgl.common.bumpMap.header\n\n@import clay.util.srgb\n\n@import clay.util.rgbm\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.plugin.compute_shadow_map\n\nvec3 F_Schlick(float ndv, vec3 spec) {\n return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);\n}\n\nfloat D_Phong(float g, float ndh) {\n float a = pow(8192.0, g);\n return (a + 2.0) / 8.0 * pow(ndh, a);\n}\n\nvoid main()\n{\n vec4 albedoColor = color;\n\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(eyePos - v_WorldPosition);\n#ifdef VERTEX_COLOR\n #ifdef SRGB_DECODE\n albedoColor *= sRGBToLinear(v_Color);\n #else\n albedoColor *= v_Color;\n #endif\n#endif\n\n @import ecgl.common.albedo.main\n\n @import ecgl.common.diffuseLayer.main\n\n albedoColor *= albedoTexel;\n\n float m = metalness;\n\n#ifdef METALNESSMAP_ENABLED\n float m2 = texture2D(metalnessMap, v_DetailTexcoord)[METALNESS_CHANEL];\n m = clamp(m2 + (m - 0.5) * 2.0, 0.0, 1.0);\n#endif\n\n vec3 baseColor = albedoColor.rgb;\n albedoColor.rgb = baseColor * (1.0 - m);\n vec3 specFactor = mix(vec3(0.04), baseColor, m);\n\n float g = 1.0 - roughness;\n\n#ifdef ROUGHNESSMAP_ENABLED\n float g2 = 1.0 - texture2D(roughnessMap, v_DetailTexcoord)[ROUGHNESS_CHANEL];\n g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);\n#endif\n\n vec3 N = v_Normal;\n\n#ifdef DOUBLE_SIDED\n if (dot(N, V) < 0.0) {\n N = -N;\n }\n#endif\n\n float ambientFactor = 1.0;\n\n#ifdef BUMPMAP_ENABLED\n N = bumpNormal(v_WorldPosition, v_Normal, N);\n ambientFactor = dot(v_Normal, N);\n#endif\n\n@import ecgl.common.normalMap.fragmentMain\n\n vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);\n\n vec3 diffuseTerm = vec3(0.0);\n vec3 specularTerm = vec3(0.0);\n\n float ndv = clamp(dot(N, V), 0.0, 1.0);\n vec3 fresnelTerm = F_Schlick(ndv, specFactor);\n\n @import ecgl.common.ssaoMap.main\n\n#ifdef AMBIENT_LIGHT_COUNT\n for(int _idx_ = 0; _idx_ < AMBIENT_LIGHT_COUNT; _idx_++)\n {{\n diffuseTerm += ambientLightColor[_idx_] * ambientFactor * ao;\n }}\n#endif\n\n#ifdef AMBIENT_SH_LIGHT_COUNT\n for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)\n {{\n diffuseTerm += calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_] * ao;\n }}\n#endif\n\n#ifdef DIRECTIONAL_LIGHT_COUNT\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];\n if(shadowEnabled)\n {\n computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);\n }\n#endif\n for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++)\n {{\n vec3 L = -directionalLightDirection[_idx_];\n vec3 lc = directionalLightColor[_idx_];\n\n vec3 H = normalize(L + V);\n float ndl = clamp(dot(N, normalize(L)), 0.0, 1.0);\n float ndh = clamp(dot(N, H), 0.0, 1.0);\n\n float shadowContrib = 1.0;\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n if (shadowEnabled)\n {\n shadowContrib = shadowContribsDir[_idx_];\n }\n#endif\n\n vec3 li = lc * ndl * shadowContrib;\n\n diffuseTerm += li;\n specularTerm += li * fresnelTerm * D_Phong(g, ndh);\n }}\n#endif\n\n\n#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT\n vec3 L = reflect(-V, N);\n L = vec3(L.x, L[NORMAL_UP_AXIS], L[NORMAL_FRONT_AXIS]);\n float rough2 = clamp(1.0 - g, 0.0, 1.0);\n float bias2 = rough2 * 5.0;\n vec2 brdfParam2 = texture2D(ambientCubemapLightBRDFLookup[0], vec2(rough2, ndv)).xy;\n vec3 envWeight2 = specFactor * brdfParam2.x + brdfParam2.y;\n vec3 envTexel2;\n for(int _idx_ = 0; _idx_ < AMBIENT_CUBEMAP_LIGHT_COUNT; _idx_++)\n {{\n envTexel2 = RGBMDecode(textureCubeLodEXT(ambientCubemapLightCubemap[_idx_], L, bias2), 8.12);\n specularTerm += ambientCubemapLightColor[_idx_] * envTexel2 * envWeight2 * ao;\n }}\n#endif\n\n gl_FragColor.rgb = albedoColor.rgb * diffuseTerm + specularTerm;\n gl_FragColor.a = albedoColor.a;\n\n#ifdef ATMOSPHERE_ENABLED\n float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);\n gl_FragColor.rgb += glowColor * atmoIntensity;\n#endif\n\n#ifdef SRGB_ENCODE\n gl_FragColor = linearTosRGB(gl_FragColor);\n#endif\n\n @import ecgl.common.emissiveLayer.main\n\n @import ecgl.common.wireframe.fragmentMain\n}\n\n@end"),Gn.import("@export ecgl.hatching.vertex\n\n@import ecgl.realistic.vertex\n\n@end\n\n\n@export ecgl.hatching.fragment\n\n#define NORMAL_UP_AXIS 1\n#define NORMAL_FRONT_AXIS 2\n\n@import ecgl.common.uv.fragmentHeader\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nuniform vec4 color : [0.0, 0.0, 0.0, 1.0];\nuniform vec4 paperColor : [1.0, 1.0, 1.0, 1.0];\n\nuniform mat4 viewInverse : VIEWINVERSE;\n\n#ifdef AMBIENT_LIGHT_COUNT\n@import clay.header.ambient_light\n#endif\n#ifdef AMBIENT_SH_LIGHT_COUNT\n@import clay.header.ambient_sh_light\n#endif\n\n#ifdef DIRECTIONAL_LIGHT_COUNT\n@import clay.header.directional_light\n#endif\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\n\n\n@import ecgl.common.ssaoMap.header\n\n@import ecgl.common.bumpMap.header\n\n@import clay.util.srgb\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.plugin.compute_shadow_map\n\nuniform sampler2D hatch1;\nuniform sampler2D hatch2;\nuniform sampler2D hatch3;\nuniform sampler2D hatch4;\nuniform sampler2D hatch5;\nuniform sampler2D hatch6;\n\nfloat shade(in float tone) {\n vec4 c = vec4(1. ,1., 1., 1.);\n float step = 1. / 6.;\n vec2 uv = v_DetailTexcoord;\n if (tone <= step / 2.0) {\n c = mix(vec4(0.), texture2D(hatch6, uv), 12. * tone);\n }\n else if (tone <= step) {\n c = mix(texture2D(hatch6, uv), texture2D(hatch5, uv), 6. * tone);\n }\n if(tone > step && tone <= 2. * step){\n c = mix(texture2D(hatch5, uv), texture2D(hatch4, uv) , 6. * (tone - step));\n }\n if(tone > 2. * step && tone <= 3. * step){\n c = mix(texture2D(hatch4, uv), texture2D(hatch3, uv), 6. * (tone - 2. * step));\n }\n if(tone > 3. * step && tone <= 4. * step){\n c = mix(texture2D(hatch3, uv), texture2D(hatch2, uv), 6. * (tone - 3. * step));\n }\n if(tone > 4. * step && tone <= 5. * step){\n c = mix(texture2D(hatch2, uv), texture2D(hatch1, uv), 6. * (tone - 4. * step));\n }\n if(tone > 5. * step){\n c = mix(texture2D(hatch1, uv), vec4(1.), 6. * (tone - 5. * step));\n }\n\n return c.r;\n}\n\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main()\n{\n#ifdef SRGB_DECODE\n vec4 inkColor = sRGBToLinear(color);\n#else\n vec4 inkColor = color;\n#endif\n\n#ifdef VERTEX_COLOR\n #ifdef SRGB_DECODE\n inkColor *= sRGBToLinear(v_Color);\n #else\n inkColor *= v_Color;\n #endif\n#endif\n\n vec3 N = v_Normal;\n#ifdef DOUBLE_SIDED\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(eyePos - v_WorldPosition);\n\n if (dot(N, V) < 0.0) {\n N = -N;\n }\n#endif\n\n float tone = 0.0;\n\n float ambientFactor = 1.0;\n\n#ifdef BUMPMAP_ENABLED\n N = bumpNormal(v_WorldPosition, v_Normal, N);\n ambientFactor = dot(v_Normal, N);\n#endif\n\n vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);\n\n @import ecgl.common.ssaoMap.main\n\n#ifdef AMBIENT_LIGHT_COUNT\n for(int i = 0; i < AMBIENT_LIGHT_COUNT; i++)\n {\n tone += dot(ambientLightColor[i], w) * ambientFactor * ao;\n }\n#endif\n#ifdef AMBIENT_SH_LIGHT_COUNT\n for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)\n {{\n tone += dot(calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_], w) * ao;\n }}\n#endif\n#ifdef DIRECTIONAL_LIGHT_COUNT\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];\n if(shadowEnabled)\n {\n computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);\n }\n#endif\n for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)\n {\n vec3 lightDirection = -directionalLightDirection[i];\n float lightTone = dot(directionalLightColor[i], w);\n\n float shadowContrib = 1.0;\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n if (shadowEnabled)\n {\n shadowContrib = shadowContribsDir[i];\n }\n#endif\n\n float ndl = dot(N, normalize(lightDirection)) * shadowContrib;\n\n tone += lightTone * clamp(ndl, 0.0, 1.0);\n }\n#endif\n\n gl_FragColor = mix(inkColor, paperColor, shade(clamp(tone, 0.0, 1.0)));\n }\n@end\n"),Gn.import("@export ecgl.sm.depth.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nattribute vec3 position : POSITION;\nattribute vec2 texcoord : TEXCOORD_0;\n\n#ifdef VERTEX_ANIMATION\nattribute vec3 prevPosition;\nuniform float percent : 1.0;\n#endif\n\nvarying vec4 v_ViewPosition;\nvarying vec2 v_Texcoord;\n\nvoid main(){\n\n#ifdef VERTEX_ANIMATION\n vec3 pos = mix(prevPosition, position, percent);\n#else\n vec3 pos = position;\n#endif\n\n v_ViewPosition = worldViewProjection * vec4(pos, 1.0);\n gl_Position = v_ViewPosition;\n\n v_Texcoord = texcoord;\n\n}\n@end\n\n\n\n@export ecgl.sm.depth.fragment\n\n@import clay.sm.depth.fragment\n\n@end");var jne=Cf.prototype.addToScene,Zne=Cf.prototype.removeFromScene;Cf.prototype.addToScene=function(e){if(jne.call(this,e),this.__zr){var n=this.__zr;e.traverse(function(t){t.__zr=n,t.addAnimatorsToZr&&t.addAnimatorsToZr(n)})}},Cf.prototype.removeFromScene=function(e){Zne.call(this,e),e.traverse(function(n){var t=n.__zr;n.__zr=null,t&&n.removeAnimatorsFromZr&&n.removeAnimatorsFromZr(t)})},Eu.prototype.setTextureImage=function(e,n,t,r){if(this.shader){var d,i=t.getZr(),s=this;return s.autoUpdateTextureStatus=!1,s.disableTexture(e),function Gne(e){return!e||"none"===e}(n)||(d=Sr.loadTexture(n,t,r,function(p){s.enableTexture(e),i&&i.refresh()}),s.set(e,d)),d}};var Sr={};Sr.Renderer=jC,Sr.Node=Kc,Sr.Mesh=Vv,Sr.Shader=Gn,Sr.Material=Eu,Sr.Texture=dr,Sr.Texture2D=$r,Sr.Geometry=Si,Sr.SphereGeometry=xne,Sr.PlaneGeometry=SI,Sr.CubeGeometry=w8,Sr.AmbientLight=wne,Sr.DirectionalLight=Dne,Sr.PointLight=Tne,Sr.SpotLight=Ane,Sr.PerspectiveCamera=No,Sr.OrthographicCamera=By,Sr.Vector2=Hl,Sr.Vector3=Ln,Sr.Vector4=Ine,Sr.Quaternion=l8,Sr.Matrix2=Pne,Sr.Matrix2d=Rne,Sr.Matrix3=Lne,Sr.Matrix4=tr,Sr.Plane=v8,Sr.Ray=fI,Sr.BoundingBox=Ws,Sr.Frustum=c3;var II=null;function I8(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))}function P8(e){if((e.wrapS===dr.REPEAT||e.wrapT===dr.REPEAT)&&e.image){var n=I8(e.width),t=I8(e.height);if(n!==e.width||t!==e.height){var r=document.createElement("canvas");r.width=n,r.height=t,r.getContext("2d").drawImage(e.image,0,0,n,t),e.image=r}}}Sr.loadTexture=function(e,n,t,r){"function"==typeof t&&(r=t,t={}),t=t||{};for(var i=Object.keys(t).sort(),s="",d=0;d<i.length;d++)s+=i[d]+"_"+t[i[d]]+"_";var p=n.__textureCache=n.__textureCache||new xte.ZP(20);if(function Wne(e){return e.getZr&&e.setOption}(e)){if(_=p.get(s+(v=e.__textureid__)))_.texture.surface.setECharts(e),r&&r(_.texture);else{var C=new rne(e);for(C.onupdate=function(){n.getZr().refresh()},_={texture:C.getTexture()},d=0;d<i.length;d++)_.texture[i[d]]=t[i[d]];e.__textureid__=v=e.__textureid__||"__ecgl_ec__"+_.texture.__uid__,p.put(s+v,_),r&&r(_.texture)}return _.texture}if(A8(e)){var v,_;if(!(_=p.get(s+(v=e.__textureid__)))){for(_={texture:new Sr.Texture2D({image:e})},d=0;d<i.length;d++)_.texture[i[d]]=t[i[d]];e.__textureid__=v=e.__textureid__||"__ecgl_image__"+_.texture.__uid__,p.put(s+v,_),P8(_.texture),r&&r(_.texture)}return _.texture}if(_=p.get(s+e))_.callbacks?_.callbacks.push(r):r&&r(_.texture);else if(e.match(/.hdr$|^data:application\/octet-stream/)){_={callbacks:[r]};var S=Wv.loadTexture(e,{exposure:t.exposure,fileType:"hdr"},function(){S.dirty(),_.callbacks.forEach(function(ne){ne&&ne(S)}),_.callbacks=null});_.texture=S,p.put(s+e,_)}else{for(S=new Sr.Texture2D({image:new Image}),d=0;d<i.length;d++)S[i[d]]=t[i[d]];_={texture:S,callbacks:[r]};var k=S.image;k.onload=function(){S.image=k,P8(S),S.dirty(),_.callbacks.forEach(function(pe){pe&&pe(S)}),_.callbacks=null},k.crossOrigin="Anonymous",k.src=e,S.image=function Yne(){return null!==II||(II=Wv.createBlank("rgba(255,255,255,0)").image),II}(),p.put(s+e,_)}return _.texture},Sr.createAmbientCubemap=function(e,n,t,r){var i=(e=e||{}).texture,s=Qr.firstNotNull(e.exposure,1),d=new hne({intensity:Qr.firstNotNull(e.specularIntensity,1)}),p=new pne({intensity:Qr.firstNotNull(e.diffuseIntensity,1),coefficients:[.844,.712,.691,-.037,.083,.167,.343,.288,.299,-.041,-.021,-.009,-.003,-.041,-.064,-.011,-.007,-.004,-.031,.034,.081,-.06,-.049,-.06,.046,.056,.05]});return d.cubemap=Sr.loadTexture(i,t,{exposure:s},function(){d.cubemap.flipY=!1,d.prefilter(n,32),p.coefficients=_ne.projectEnvironmentMap(n,d.cubemap,{lod:1}),r&&r()}),{specular:d,diffuse:p}},Sr.createBlankTexture=Wv.createBlank,Sr.isImage=A8,Sr.additiveBlend=function(e){e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)},Sr.parseColor=function(e,n){return e instanceof Array?(n||(n=[]),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e.length>3?e[3]:1,n):((n=bt.$_.parse(e||"#000",n)||[0,0,0,0])[0]/=255,n[1]/=255,n[2]/=255,n)},Sr.directionFromAlphaBeta=function(e,n){var t=e/180*Math.PI+Math.PI/2,r=-n/180*Math.PI+Math.PI/2,i=[],s=Math.sin(t);return i[0]=s*Math.cos(r),i[1]=-Math.cos(t),i[2]=s*Math.sin(r),i},Sr.getShadowResolution=function(e){var n=1024;switch(e){case"low":n=512;break;case"medium":break;case"high":n=2048;break;case"ultra":n=4096}return n},Sr.COMMON_SHADERS=["lambert","color","realistic","hatching","shadow"],Sr.createShader=function(e){"ecgl.shadow"===e&&(e="ecgl.displayShadow");var n=Gn.source(e+".vertex"),t=Gn.source(e+".fragment");n||console.error("Vertex shader of '%s' not exits",e),t||console.error("Fragment shader of '%s' not exits",e);var r=new Gn(n,t);return r.name=e,r},Sr.createMaterial=function(e,n){n instanceof Array||(n=[n]);var t=Sr.createShader(e),r=new Eu({shader:t});return n.forEach(function(i){"string"==typeof i&&r.define(i)}),r},Sr.setMaterialFromModel=function(e,n,t,r){n.autoUpdateTextureStatus=!1;var i=t.getModel(e+"Material"),s=i.get("detailTexture"),d=Qr.firstNotNull(i.get("textureTiling"),1),p=Qr.firstNotNull(i.get("textureOffset"),0);"number"==typeof d&&(d=[d,d]),"number"==typeof p&&(p=[p,p]);var v=d[0]>1||d[1]>1?Sr.Texture.REPEAT:Sr.Texture.CLAMP_TO_EDGE,_={anisotropic:8,wrapS:v,wrapT:v};if("realistic"===e){var C=i.get("roughness"),S=i.get("metalness");null!=S?isNaN(S)&&(n.setTextureImage("metalnessMap",S,r,_),S=Qr.firstNotNull(i.get("metalnessAdjust"),.5)):S=0,null!=C?isNaN(C)&&(n.setTextureImage("roughnessMap",C,r,_),C=Qr.firstNotNull(i.get("roughnessAdjust"),.5)):C=.5;var k=i.get("normalTexture");n.setTextureImage("detailMap",s,r,_),n.setTextureImage("normalMap",k,r,_),n.set({roughness:C,metalness:S,detailUvRepeat:d,detailUvOffset:p})}else if("lambert"===e)n.setTextureImage("detailMap",s,r,_),n.set({detailUvRepeat:d,detailUvOffset:p});else if("color"===e)n.setTextureImage("detailMap",s,r,_),n.set({detailUvRepeat:d,detailUvOffset:p});else if("hatching"===e){for(var H=i.get("hatchingTextures")||[],ne=0;ne<6;ne++)n.setTextureImage("hatch"+(ne+1),H[ne],r,{anisotropic:8,wrapS:Sr.Texture.REPEAT,wrapT:Sr.Texture.REPEAT});n.set({detailUvRepeat:d,detailUvOffset:p})}},Sr.updateVertexAnimation=function(e,n,t,r){var i=r.get("animation"),s=r.get("animationDurationUpdate"),d=r.get("animationEasingUpdate"),p=t.shadowDepthMaterial;if(i&&n&&s>0&&n.geometry.vertexCount===t.geometry.vertexCount){t.material.define("vertex","VERTEX_ANIMATION"),t.ignorePreZ=!0,p&&p.define("vertex","VERTEX_ANIMATION");for(var v=0;v<e.length;v++)t.geometry.attributes[e[v][0]].value=n.geometry.attributes[e[v][1]].value;t.geometry.dirty(),t.__percent=0,t.material.set("percent",0),t.stopAnimation(),t.animate().when(s,{__percent:1}).during(function(){t.material.set("percent",t.__percent),p&&p.set("percent",t.__percent)}).done(function(){t.ignorePreZ=!1,t.material.undefine("vertex","VERTEX_ANIMATION"),p&&p.undefine("vertex","VERTEX_ANIMATION")}).start(d)}else t.material.undefine("vertex","VERTEX_ANIMATION"),p&&p.undefine("vertex","VERTEX_ANIMATION")};const ot=Sr;var x3=z(2036),qi=function(e,n){this.id=e,this.zr=n;try{this.renderer=new jC({clearBit:0,devicePixelRatio:n.painter.dpr,preserveDrawingBuffer:!0,premultipliedAlpha:!0}),this.renderer.resize(n.painter.getWidth(),n.painter.getHeight())}catch(r){return this.renderer=null,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute; left: 0; top: 0; right: 0; bottom: 0;",this.dom.className="ecgl-nowebgl",this.dom.innerHTML="Sorry, your browser does not support WebGL",void console.error(r)}this.onglobalout=this.onglobalout.bind(this),n.on("globalout",this.onglobalout),this.dom=this.renderer.canvas;var t=this.dom.style;t.position="absolute",t.left="0",t.top="0",this.views=[],this._picking=new dte({renderer:this.renderer}),this._viewsToDispose=[],this._accumulatingId=0,this._zrEventProxy=new bt.Q.Rect({shape:{x:-1,y:-1,width:2,height:2},__isGLToZRProxy:!0}),this._backgroundColor=null,this._disposed=!1};function R8(e){var n=e.__zr;e.__zr=null,n&&e.removeAnimatorsFromZr&&e.removeAnimatorsFromZr(n)}qi.prototype.setUnpainted=function(){},qi.prototype.addView=function(e){if(e.layer!==this){var n=this._viewsToDispose.indexOf(e);n>=0&&this._viewsToDispose.splice(n,1),this.views.push(e),e.layer=this;var t=this.zr;e.scene.traverse(function(r){r.__zr=t,r.addAnimatorsToZr&&r.addAnimatorsToZr(t)})}},qi.prototype.removeView=function(e){if(e.layer===this){var n=this.views.indexOf(e);n>=0&&(this.views.splice(n,1),e.scene.traverse(R8,this),e.layer=null,this._viewsToDispose.push(e))}},qi.prototype.removeViewsAll=function(){this.views.forEach(function(e){e.scene.traverse(R8,this),e.layer=null,this._viewsToDispose.push(e)},this),this.views.length=0},qi.prototype.resize=function(e,n){this.renderer.resize(e,n)},qi.prototype.clear=function(){var e=this.renderer.gl,n=this._backgroundColor||[0,0,0,0];e.clearColor(n[0],n[1],n[2],n[3]),e.depthMask(!0),e.colorMask(!0,!0,!0,!0),e.clear(e.DEPTH_BUFFER_BIT|e.COLOR_BUFFER_BIT)},qi.prototype.clearDepth=function(){var e=this.renderer.gl;e.clear(e.DEPTH_BUFFER_BIT)},qi.prototype.clearColor=function(){var e=this.renderer.gl;e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},qi.prototype.needsRefresh=function(){this.zr.refresh()},qi.prototype.refresh=function(e){this._backgroundColor=e?ot.parseColor(e):[0,0,0,0],this.renderer.clearColor=this._backgroundColor;for(var n=0;n<this.views.length;n++)this.views[n].prepareRender(this.renderer);for(this._doRender(!1),this._trackAndClean(),n=0;n<this._viewsToDispose.length;n++)this._viewsToDispose[n].dispose(this.renderer);this._viewsToDispose.length=0,this._startAccumulating()},qi.prototype.renderToCanvas=function(e){this._startAccumulating(!0),e.drawImage(this.dom,0,0,e.canvas.width,e.canvas.height)},qi.prototype._doRender=function(e){this.clear(),this.renderer.saveViewport();for(var n=0;n<this.views.length;n++)this.views[n].render(this.renderer,e);this.renderer.restoreViewport()},qi.prototype._stopAccumulating=function(){this._accumulatingId=0,clearTimeout(this._accumulatingTimeout)};var Xne=1;function PI(e){for(var n=0;n<e.length;n++)e[n].__used__=0}function RI(e,n){for(var t=0;t<n.length;t++)n[t].__used__||n[t].dispose(e)}function LI(e,n){e.__used__=e.__used__||0,e.__used__++,1===e.__used__&&n.push(e)}function $ne(e,n,t){var r,i;e.traverse(function(d){if(d.isRenderable()){var p=d.geometry,v=d.material;if(v!==r)for(var _=v.getTextureUniforms(),C=0;C<_.length;C++){var k=v.uniforms[_[C]].value;if(k)if(k instanceof dr)LI(k,n);else if(k instanceof Array)for(var H=0;H<k.length;H++)k[H]instanceof dr&&LI(k[H],n)}p!==i&&LI(p,t),r=v,i=p}});for(var s=0;s<e.lights.length;s++)e.lights[s].cubemap&&LI(e.lights[s].cubemap,n)}qi.prototype._startAccumulating=function(e){var n=this;this._stopAccumulating();for(var t=!1,r=0;r<this.views.length;r++)t=this.views[r].needsAccumulate()||t;function i(s){if(n._accumulatingId&&s===n._accumulatingId){for(var d=!0,p=0;p<n.views.length;p++)d=n.views[p].isAccumulateFinished()&&t;d||(n._doRender(!0),e?i(s):(0,x3.Z)(function(){i(s)}))}}t&&(this._accumulatingId=Xne++,e?i(n._accumulatingId):this._accumulatingTimeout=setTimeout(function(){i(n._accumulatingId)},50))},qi.prototype._trackAndClean=function(){var e=[],n=[];this._textureList&&(PI(this._textureList),PI(this._geometriesList));for(var t=0;t<this.views.length;t++)$ne(this.views[t].scene,e,n);this._textureList&&(RI(this.renderer,this._textureList),RI(this.renderer,this._geometriesList)),this._textureList=e,this._geometriesList=n},qi.prototype.dispose=function(){this._disposed||(this._stopAccumulating(),this._textureList&&(PI(this._textureList),PI(this._geometriesList),RI(this.renderer,this._textureList),RI(this.renderer,this._geometriesList)),this.zr.off("globalout",this.onglobalout),this._disposed=!0)},qi.prototype.onmousedown=function(e){if(!e.target||!e.target.__isGLToZRProxy){var n=this.pickObject((e=e.event).offsetX,e.offsetY);n&&(this._dispatchEvent("mousedown",e,n),this._dispatchDataEvent("mousedown",e,n)),this._downX=e.offsetX,this._downY=e.offsetY}},qi.prototype.onmousemove=function(e){if(!e.target||!e.target.__isGLToZRProxy){var n=this.pickObject((e=e.event).offsetX,e.offsetY),t=n&&n.target,r=this._hovered;this._hovered=n,r&&t!==r.target&&(r.relatedTarget=t,this._dispatchEvent("mouseout",e,r),this.zr.setCursorStyle("default")),this._dispatchEvent("mousemove",e,n),n&&(this.zr.setCursorStyle("pointer"),(!r||t!==r.target)&&this._dispatchEvent("mouseover",e,n)),this._dispatchDataEvent("mousemove",e,n)}},qi.prototype.onmouseup=function(e){if(!e.target||!e.target.__isGLToZRProxy){var n=this.pickObject((e=e.event).offsetX,e.offsetY);n&&(this._dispatchEvent("mouseup",e,n),this._dispatchDataEvent("mouseup",e,n)),this._upX=e.offsetX,this._upY=e.offsetY}},qi.prototype.onclick=qi.prototype.dblclick=function(e){if(!e.target||!e.target.__isGLToZRProxy){var n=this._upX-this._downX,t=this._upY-this._downY;if(!(Math.sqrt(n*n+t*t)>20)){var r=this.pickObject((e=e.event).offsetX,e.offsetY);r&&(this._dispatchEvent(e.type,e,r),this._dispatchDataEvent(e.type,e,r));var i=this._clickToSetFocusPoint(e);i&&i.view.setDOFFocusOnPoint(i.distance)&&this.zr.refresh()}}},qi.prototype._clickToSetFocusPoint=function(e){for(var n=this.renderer,t=n.viewport,r=this.views.length-1;r>=0;r--){var i=this.views[r];if(i.hasDOF()&&i.containPoint(e.offsetX,e.offsetY)){this._picking.scene=i.scene,this._picking.camera=i.camera,n.viewport=i.viewport;var s=this._picking.pick(e.offsetX,e.offsetY,!0);if(s)return s.view=i,s}}n.viewport=t},qi.prototype.onglobalout=function(e){var n=this._hovered;n&&this._dispatchEvent("mouseout",e,{target:n.target})},qi.prototype.pickObject=function(e,n){for(var t=[],r=this.renderer,i=r.viewport,s=0;s<this.views.length;s++){var d=this.views[s];d.containPoint(e,n)&&(this._picking.scene=d.scene,this._picking.camera=d.camera,r.viewport=d.viewport,this._picking.pickAll(e,n,t))}return r.viewport=i,t.sort(function(p,v){return p.distance-v.distance}),t[0]},qi.prototype._dispatchEvent=function(e,n,t){t||(t={});var r=t.target;for(t.cancelBubble=!1,t.event=n,t.type=e,t.offsetX=n.offsetX,t.offsetY=n.offsetY;r&&(r.trigger(e,t),r=r.getParent(),!t.cancelBubble););this._dispatchToView(e,t)},qi.prototype._dispatchDataEvent=function(e,n,t){var r=t&&t.target,i=r&&r.dataIndex,s=r&&r.seriesIndex,d=r&&r.eventData,p=!1,v=this._zrEventProxy;v.x=n.offsetX,v.y=n.offsetY,v.update();var _={target:v};const C=bt._y.getECData(v);"mousemove"===e&&(null!=i?i!==this._lastDataIndex&&(parseInt(this._lastDataIndex,10)>=0&&(C.dataIndex=this._lastDataIndex,C.seriesIndex=this._lastSeriesIndex,this.zr.handler.dispatchToElement(_,"mouseout",n)),p=!0):null!=d&&d!==this._lastEventData&&(null!=this._lastEventData&&(C.eventData=this._lastEventData,this.zr.handler.dispatchToElement(_,"mouseout",n)),p=!0),this._lastEventData=d,this._lastDataIndex=i,this._lastSeriesIndex=s),C.eventData=d,C.dataIndex=i,C.seriesIndex=s,(null!=d||parseInt(i,10)>=0&&parseInt(s,10)>=0)&&(this.zr.handler.dispatchToElement(_,e,n),p&&this.zr.handler.dispatchToElement(_,"mouseover",n))},qi.prototype._dispatchToView=function(e,n){for(var t=0;t<this.views.length;t++)this.views[t].containPoint(n.offsetX,n.offsetY)&&this.views[t].trigger(e,n)},Object.assign(qi.prototype,UB);const L8=qi;var Kne=["bar3D","line3D","map3D","scatter3D","surface","lines3D","scatterGL","scatter3D"];function ew(e,n){if(e&&e[n]&&(e[n].normal||e[n].emphasis)){var t=e[n].normal,r=e[n].emphasis;t&&(e[n]=t),r&&(e.emphasis=e.emphasis||{},e.emphasis[n]=r)}}function OI(e){!e||(e instanceof Array||(e=[e]),bt.D5.each(e,function(n){if(n.axisLabel){var t=n.axisLabel;Object.assign(t,t.textStyle),t.textStyle=null}}))}function O8(e){this._layers={},this._zr=e}O8.prototype.update=function(e,n){var t=this,r=n.getZr();if(r.getWidth()&&r.getHeight()){for(var d in this._layers)this._layers[d].removeViewsAll();e.eachComponent(function(p,v){if("series"!==p){var _=n.getViewOfComponentModel(v),C=v.coordinateSystem;if(_.__ecgl__){if(C){if(!C.viewGL)return void console.error("Can't find viewGL in coordinateSystem of component "+v.id);S=C.viewGL}else{if(!v.viewGL)return void console.error("Can't find viewGL of component "+v.id);S=C.viewGL}var S=C.viewGL,k=i(v);k.addView(S),_.afterRender&&_.afterRender(v,e,n,k),s(_.groupGL,v.get("silent"))}}}),e.eachSeries(function(p){var v=n.getViewOfSeriesModel(p),_=p.coordinateSystem;if(v.__ecgl__){if(_&&!_.viewGL&&!v.viewGL)return void console.error("Can't find viewGL of series "+v.id);var C=_&&_.viewGL||v.viewGL,S=i(p);S.addView(C),v.afterRender&&v.afterRender(p,e,n,S),s(v.groupGL,p.get("silent"))}})}else console.warn("Dom has no width or height");function i(p){var v;r.setSleepAfterStill(0),v=p.get("zlevel");var _=t._layers,C=_[v];if(!C){if(C=_[v]=new L8("gl-"+v,r),r.painter.isSingleCanvas()){C.virtual=!0;var S=new bt.Q.Image({z:1e4,style:{image:C.renderer.canvas},silent:!0});C.__hostImage=S,r.add(S)}r.painter.insertLayer(v,C)}return C.__hostImage&&C.__hostImage.setStyle({width:C.renderer.getWidth(),height:C.renderer.getHeight()}),C}function s(p,v){p&&p.traverse(function(_){_.isRenderable&&_.isRenderable()&&(_.ignorePicking=null!=_.$ignorePicking?_.$ignorePicking:v)})}},bt.sq(function(e){var n=e.getZr(),t=n.painter.dispose;n.painter.dispose=function(){"function"==typeof this.eachOtherLayer&&this.eachOtherLayer(function(r){r instanceof L8&&r.dispose()}),t.call(this)},n.painter.getRenderedCanvas=function(r){if(r=r||{},this._singleCanvas)return this._layers[0].dom;var i=document.createElement("canvas"),s=r.pixelRatio||this.dpr;i.width=this.getWidth()*s,i.height=this.getHeight()*s;var d=i.getContext("2d");d.dpr=s,d.clearRect(0,0,i.width,i.height),r.backgroundColor&&(d.fillStyle=r.backgroundColor,d.fillRect(0,0,i.width,i.height));var _,p=this.storage.getDisplayList(!0),v={},C=this;function S(pe,Me){var Re=C._zlevelList;null==pe&&(pe=-1/0);for(var Fe,Oe=0;Oe<Re.length;Oe++){var Be=Re[Oe],nt=C._layers[Be];if(!nt.__builtin__&&Be>pe&&Be<Me){Fe=nt;break}}Fe&&Fe.renderToCanvas&&(d.save(),Fe.renderToCanvas(d),d.restore())}for(var k={ctx:d},H=0;H<p.length;H++){var ne=p[H];ne.zlevel!==_&&(S(_,ne.zlevel),_=ne.zlevel),this._doPaintEl(ne,k,!0,null,v)}return S(_,1/0),i}}),bt.Br(function(e,n){var t=n.getZr();(t.__egl=t.__egl||new O8(t)).update(e,n)}),bt.ds(function qne(e){bt.D5.each(e.series,function(n){bt.D5.indexOf(Kne,n.type)>=0&&(function Qne(e){ew(e,"itemStyle"),ew(e,"lineStyle"),ew(e,"areaStyle"),ew(e,"label")}(n),"mapbox"===n.coordinateSystem&&(n.coordinateSystem="mapbox3D",e.mapbox3D=e.mapbox))}),OI(e.xAxis3D),OI(e.yAxis3D),OI(e.zAxis3D),OI(e.grid3D),ew(e.geo3D)});const kI={defaultOption:{viewControl:{projection:"perspective",autoRotate:!1,autoRotateDirection:"cw",autoRotateSpeed:10,autoRotateAfterStill:3,damping:.8,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,panMouseButton:"middle",rotateMouseButton:"left",distance:150,minDistance:40,maxDistance:400,orthographicSize:150,maxOrthographicSize:400,minOrthographicSize:20,center:[0,0,0],alpha:0,beta:0,minAlpha:-90,maxAlpha:90}},setView:function(e){e=e||{},this.option.viewControl=this.option.viewControl||{},null!=e.alpha&&(this.option.viewControl.alpha=e.alpha),null!=e.beta&&(this.option.viewControl.beta=e.beta),null!=e.distance&&(this.option.viewControl.distance=e.distance),null!=e.center&&(this.option.viewControl.center=e.center)}},Vy={defaultOption:{postEffect:{enable:!1,bloom:{enable:!0,intensity:.1},depthOfField:{enable:!1,focalRange:20,focalDistance:50,blurRadius:10,fstop:2.8,quality:"medium"},screenSpaceAmbientOcclusion:{enable:!1,radius:2,quality:"medium",intensity:1},screenSpaceReflection:{enable:!1,quality:"medium",maxRoughness:.8},colorCorrection:{enable:!0,exposure:0,brightness:0,contrast:1,saturation:1,lookupTexture:""},edge:{enable:!1},FXAA:{enable:!1}},temporalSuperSampling:{enable:"auto"}}},zy={defaultOption:{light:{main:{shadow:!1,shadowQuality:"high",color:"#fff",intensity:1,alpha:0,beta:0},ambient:{color:"#fff",intensity:.2},ambientCubemap:{texture:null,exposure:1,diffuseIntensity:.5,specularIntensity:.5}}}};var NI=bt.tF.extend({type:"grid3D",dependencies:["xAxis3D","yAxis3D","zAxis3D"],defaultOption:{show:!0,zlevel:-10,left:0,top:0,width:"100%",height:"100%",environment:"auto",boxWidth:100,boxHeight:100,boxDepth:100,axisPointer:{show:!0,lineStyle:{color:"rgba(0, 0, 0, 0.8)",width:1},label:{show:!0,formatter:null,margin:8,textStyle:{fontSize:14,color:"#fff",backgroundColor:"rgba(0,0,0,0.5)",padding:3,borderRadius:3}}},axisLine:{show:!0,lineStyle:{color:"#333",width:2,type:"solid"}},axisTick:{show:!0,inside:!1,length:3,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,margin:8,textStyle:{fontSize:12}},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}},light:{main:{alpha:30,beta:40},ambient:{intensity:.4}},viewControl:{alpha:20,beta:40,autoRotate:!1,distance:200,minDistance:40,maxDistance:400}}});bt.D5.merge(NI.prototype,kI),bt.D5.merge(NI.prototype,Vy),bt.D5.merge(NI.prototype,zy);const Jne=NI;var FI=z(1081),tw=Qr.firstNotNull,k8={left:0,middle:1,right:2};function N8(e){return e instanceof Array||(e=[e,e]),e}var F8=Us.extend(function(){return{zr:null,viewGL:null,_center:new Ln,minDistance:.5,maxDistance:1.5,maxOrthographicSize:300,minOrthographicSize:30,minAlpha:-90,maxAlpha:90,minBeta:-1/0,maxBeta:1/0,autoRotateAfterStill:0,autoRotateDirection:"cw",autoRotateSpeed:60,damping:.8,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,panMouseButton:"middle",rotateMouseButton:"left",_mode:"rotate",_camera:null,_needsUpdate:!1,_rotating:!1,_phi:0,_theta:0,_mouseX:0,_mouseY:0,_rotateVelocity:new Hl,_panVelocity:new Hl,_distance:500,_zoomSpeed:0,_stillTimeout:0,_animators:[]}},function(){["_mouseDownHandler","_mouseWheelHandler","_mouseMoveHandler","_mouseUpHandler","_pinchHandler","_contextMenuHandler","_update"].forEach(function(e){this[e]=this[e].bind(this)},this)},{init:function(){var e=this.zr;e&&(e.on("mousedown",this._mouseDownHandler),e.on("globalout",this._mouseUpHandler),e.on("mousewheel",this._mouseWheelHandler),e.on("pinch",this._pinchHandler),e.animation.on("frame",this._update),e.dom.addEventListener("contextmenu",this._contextMenuHandler))},dispose:function(){var e=this.zr;e&&(e.off("mousedown",this._mouseDownHandler),e.off("mousemove",this._mouseMoveHandler),e.off("mouseup",this._mouseUpHandler),e.off("mousewheel",this._mouseWheelHandler),e.off("pinch",this._pinchHandler),e.off("globalout",this._mouseUpHandler),e.dom.removeEventListener("contextmenu",this._contextMenuHandler),e.animation.off("frame",this._update)),this.stopAllAnimation()},getDistance:function(){return this._distance},setDistance:function(e){this._distance=e,this._needsUpdate=!0},getOrthographicSize:function(){return this._orthoSize},setOrthographicSize:function(e){this._orthoSize=e,this._needsUpdate=!0},getAlpha:function(){return this._theta/Math.PI*180},getBeta:function(){return-this._phi/Math.PI*180},getCenter:function(){return this._center.toArray()},setAlpha:function(e){e=Math.max(Math.min(this.maxAlpha,e),this.minAlpha),this._theta=e/180*Math.PI,this._needsUpdate=!0},setBeta:function(e){e=Math.max(Math.min(this.maxBeta,e),this.minBeta),this._phi=-e/180*Math.PI,this._needsUpdate=!0},setCenter:function(e){this._center.setArray(e)},setViewGL:function(e){this.viewGL=e},getCamera:function(){return this.viewGL.camera},setFromViewControlModel:function(e,n){var t=(n=n||{}).baseDistance||0,r=n.baseOrthoSize||1,i=e.get("projection");"perspective"!==i&&"orthographic"!==i&&"isometric"!==i&&(i="perspective"),this._projection=i,this.viewGL.setProjection(i);var s=e.get("distance")+t,d=e.get("orthographicSize")+r;[["damping",.8],["autoRotate",!1],["autoRotateAfterStill",3],["autoRotateDirection","cw"],["autoRotateSpeed",10],["minDistance",30],["maxDistance",400],["minOrthographicSize",30],["maxOrthographicSize",300],["minAlpha",-90],["maxAlpha",90],["minBeta",-1/0],["maxBeta",1/0],["rotateSensitivity",1],["zoomSensitivity",1],["panSensitivity",1],["panMouseButton","left"],["rotateMouseButton","middle"]].forEach(function(k){this[k[0]]=tw(e.get(k[0]),k[1])},this),this.minDistance+=t,this.maxDistance+=t,this.minOrthographicSize+=r,this.maxOrthographicSize+=r;var p=e.ecModel,v={};["animation","animationDurationUpdate","animationEasingUpdate"].forEach(function(k){v[k]=tw(e.get(k),p&&p.get(k))});var _=tw(n.alpha,e.get("alpha"))||0,C=tw(n.beta,e.get("beta"))||0,S=tw(n.center,e.get("center"))||[0,0,0];v.animation&&v.animationDurationUpdate>0&&this._notFirst?this.animateTo({alpha:_,beta:C,center:S,distance:s,orthographicSize:d,easing:v.animationEasingUpdate,duration:v.animationDurationUpdate}):(this.setDistance(s),this.setAlpha(_),this.setBeta(C),this.setCenter(S),this.setOrthographicSize(d)),this._notFirst=!0,this._validateProperties()},_validateProperties:function(){},animateTo:function(e){var n=this.zr,t=this,r={},i={};return null!=e.distance&&(r.distance=this.getDistance(),i.distance=e.distance),null!=e.orthographicSize&&(r.orthographicSize=this.getOrthographicSize(),i.orthographicSize=e.orthographicSize),null!=e.alpha&&(r.alpha=this.getAlpha(),i.alpha=e.alpha),null!=e.beta&&(r.beta=this.getBeta(),i.beta=e.beta),null!=e.center&&(r.center=this.getCenter(),i.center=e.center),this._addAnimator(n.animation.animate(r).when(e.duration||1e3,i).during(function(){null!=r.alpha&&t.setAlpha(r.alpha),null!=r.beta&&t.setBeta(r.beta),null!=r.distance&&t.setDistance(r.distance),null!=r.center&&t.setCenter(r.center),null!=r.orthographicSize&&t.setOrthographicSize(r.orthographicSize),t._needsUpdate=!0})).start(e.easing||"linear")},stopAllAnimation:function(){for(var e=0;e<this._animators.length;e++)this._animators[e].stop();this._animators.length=0},update:function(){this._needsUpdate=!0,this._update(20)},_isAnimating:function(){return this._animators.length>0},_update:function(e){if(this._rotating){var n=("cw"===this.autoRotateDirection?1:-1)*this.autoRotateSpeed/180*Math.PI;this._phi-=n*e/1e3,this._needsUpdate=!0}else this._rotateVelocity.len()>0&&(this._needsUpdate=!0);(Math.abs(this._zoomSpeed)>.1||this._panVelocity.len()>0)&&(this._needsUpdate=!0),this._needsUpdate&&(e=Math.min(e,50),this._updateDistanceOrSize(e),this._updatePan(e),this._updateRotate(e),this._updateTransform(),this.getCamera().update(),this.zr&&this.zr.refresh(),this.trigger("update"),this._needsUpdate=!1)},_updateRotate:function(e){var n=this._rotateVelocity;this._phi=n.y*e/20+this._phi,this._theta=n.x*e/20+this._theta,this.setAlpha(this.getAlpha()),this.setBeta(this.getBeta()),this._vectorDamping(n,Math.pow(this.damping,e/16))},_updateDistanceOrSize:function(e){"perspective"===this._projection?this._setDistance(this._distance+this._zoomSpeed*e/20):this._setOrthoSize(this._orthoSize+this._zoomSpeed*e/20),this._zoomSpeed*=Math.pow(this.damping,e/16)},_setDistance:function(e){this._distance=Math.max(Math.min(e,this.maxDistance),this.minDistance)},_setOrthoSize:function(e){this._orthoSize=Math.max(Math.min(e,this.maxOrthographicSize),this.minOrthographicSize);var n=this.getCamera(),t=this._orthoSize,r=t/this.viewGL.viewport.height*this.viewGL.viewport.width;n.left=-r/2,n.right=r/2,n.top=t/2,n.bottom=-t/2},_updatePan:function(e){var n=this._panVelocity,t=this._distance,r=this.getCamera(),i=r.worldTransform.y;this._center.scaleAndAdd(r.worldTransform.x,-n.x*t/200).scaleAndAdd(i,-n.y*t/200),this._vectorDamping(n,0)},_updateTransform:function(){var e=this.getCamera(),n=new Ln,t=this._theta+Math.PI/2,r=this._phi+Math.PI/2,i=Math.sin(t);n.x=i*Math.cos(r),n.y=-Math.cos(t),n.z=i*Math.sin(r),e.position.copy(this._center).scaleAndAdd(n,this._distance),e.rotation.identity().rotateY(-this._phi).rotateX(-this._theta)},_startCountingStill:function(){clearTimeout(this._stillTimeout);var e=this.autoRotateAfterStill,n=this;!isNaN(e)&&e>0&&(this._stillTimeout=setTimeout(function(){n._rotating=!0},1e3*e))},_vectorDamping:function(e,n){var t=e.len();(t*=n)<1e-4&&(t=0),e.normalize().scale(t)},_decomposeTransform:function(){if(this.getCamera()){this.getCamera().updateWorldTransform();var e=this.getCamera().worldTransform.z,n=Math.asin(e.y),t=Math.atan2(e.x,e.z);this._theta=n,this._phi=-t,this.setBeta(this.getBeta()),this.setAlpha(this.getAlpha()),this.getCamera().aspect?this._setDistance(this.getCamera().position.dist(this._center)):this._setOrthoSize(this.getCamera().top-this.getCamera().bottom)}},_mouseDownHandler:function(e){e.target||this._isAnimating()||this.viewGL&&!this.viewGL.containPoint(e.offsetX,e.offsetY)||(this.zr.on("mousemove",this._mouseMoveHandler),this.zr.on("mouseup",this._mouseUpHandler),e.event.targetTouches?1===e.event.targetTouches.length&&(this._mode="rotate"):this._mode=e.event.button===k8[this.rotateMouseButton]?"rotate":e.event.button===k8[this.panMouseButton]?"pan":"",this._rotateVelocity.set(0,0),this._rotating=!1,this.autoRotate&&this._startCountingStill(),this._mouseX=e.offsetX,this._mouseY=e.offsetY)},_mouseMoveHandler:function(e){if(!(e.target&&e.target.__isGLToZRProxy||this._isAnimating())){var n=N8(this.panSensitivity),t=N8(this.rotateSensitivity);"rotate"===this._mode?(this._rotateVelocity.y=(e.offsetX-this._mouseX)/this.zr.getHeight()*2*t[0],this._rotateVelocity.x=(e.offsetY-this._mouseY)/this.zr.getWidth()*2*t[1]):"pan"===this._mode&&(this._panVelocity.x=(e.offsetX-this._mouseX)/this.zr.getWidth()*n[0]*400,this._panVelocity.y=(-e.offsetY+this._mouseY)/this.zr.getHeight()*n[1]*400),this._mouseX=e.offsetX,this._mouseY=e.offsetY,e.event.preventDefault()}},_mouseWheelHandler:function(e){this._isAnimating()||this._zoomHandler(e,e.event.wheelDelta||-e.event.detail)},_pinchHandler:function(e){this._isAnimating()||(this._zoomHandler(e,e.pinchScale>1?1:-1),this._mode="")},_zoomHandler:function(e,n){var i;0!==n&&(this.viewGL&&!this.viewGL.containPoint(e.offsetX,e.offsetY)||(i="perspective"===this._projection?Math.max(Math.max(Math.min(this._distance-this.minDistance,this.maxDistance-this._distance))/20,.5):Math.max(Math.max(Math.min(this._orthoSize-this.minOrthographicSize,this.maxOrthographicSize-this._orthoSize))/20,.5),this._zoomSpeed=(n>0?-1:1)*i*this.zoomSensitivity,this._rotating=!1,this.autoRotate&&"rotate"===this._mode&&this._startCountingStill(),e.event.preventDefault()))},_mouseUpHandler:function(){this.zr.off("mousemove",this._mouseMoveHandler),this.zr.off("mouseup",this._mouseUpHandler)},_isRightMouseButtonUsed:function(){return"right"===this.rotateMouseButton||"right"===this.panMouseButton},_contextMenuHandler:function(e){this._isRightMouseButtonUsed()&&e.preventDefault()},_addAnimator:function(e){var n=this._animators;return n.push(e),e.done(function(){var t=n.indexOf(e);t>=0&&n.splice(t,1)}),e}});Object.defineProperty(F8.prototype,"autoRotate",{get:function(e){return this._autoRotate},set:function(e){this._autoRotate=e,this._rotating=e}});const BI=F8,nw={convertToDynamicArray:function(e){e&&this.resetOffset();var n=this.attributes;for(var t in n)n[t].value=e||!n[t].value?[]:Array.prototype.slice.call(n[t].value);this.indices=e||!this.indices?[]:Array.prototype.slice.call(this.indices)},convertToTypedArray:function(){var e=this.attributes;for(var n in e)e[n].value=e[n].value&&e[n].value.length>0?new Float32Array(e[n].value):null;this.indices&&this.indices.length>0&&(this.indices=this.vertexCount>65535?new Uint32Array(this.indices):new Uint16Array(this.indices)),this.dirty()}},Ka={vec2:mr,vec3:Mt,vec4:Wn,mat2:Fa,mat2d:lo,mat3:ui,mat4:Tn,quat:Ir};var C3=Ka.vec3,B8=[[0,0],[1,1]],V8=Si.extend(function(){return{segmentScale:1,dynamic:!0,useNativeLine:!0,attributes:{position:new Si.Attribute("position","float",3,"POSITION"),positionPrev:new Si.Attribute("positionPrev","float",3),positionNext:new Si.Attribute("positionNext","float",3),prevPositionPrev:new Si.Attribute("prevPositionPrev","float",3),prevPosition:new Si.Attribute("prevPosition","float",3),prevPositionNext:new Si.Attribute("prevPositionNext","float",3),offset:new Si.Attribute("offset","float",1),color:new Si.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._triangleOffset=0,this._itemVertexOffsets=[]},setVertexCount:function(e){var n=this.attributes;this.vertexCount!==e&&(n.position.init(e),n.color.init(e),this.useNativeLine||(n.positionPrev.init(e),n.positionNext.init(e),n.offset.init(e)),e>65535?this.indices instanceof Uint16Array&&(this.indices=new Uint32Array(this.indices)):this.indices instanceof Uint32Array&&(this.indices=new Uint16Array(this.indices)))},setTriangleCount:function(e){this.triangleCount!==e&&(this.indices=0===e?null:this.vertexCount>65535?new Uint32Array(3*e):new Uint16Array(3*e))},_getCubicCurveApproxStep:function(e,n,t,r){return 1/(C3.dist(e,n)+C3.dist(t,n)+C3.dist(r,t)+1)*this.segmentScale},getCubicCurveVertexCount:function(e,n,t,r){var i=this._getCubicCurveApproxStep(e,n,t,r),s=Math.ceil(1/i);return this.useNativeLine?2*s:2*s+2},getCubicCurveTriangleCount:function(e,n,t,r){var i=this._getCubicCurveApproxStep(e,n,t,r),s=Math.ceil(1/i);return this.useNativeLine?0:2*s},getLineVertexCount:function(){return this.getPolylineVertexCount(B8)},getLineTriangleCount:function(){return this.getPolylineTriangleCount(B8)},getPolylineVertexCount:function(e){var n;return n="number"==typeof e?e:"number"!=typeof e[0]?e.length:e.length/3,this.useNativeLine?2*(n-1):2*(n-1)+2},getPolylineTriangleCount:function(e){var n;return n="number"==typeof e?e:"number"!=typeof e[0]?e.length:e.length/3,this.useNativeLine?0:2*Math.max(n-1,0)},addCubicCurve:function(e,n,t,r,i,s){null==s&&(s=1);var d=e[0],p=e[1],v=e[2],_=n[0],C=n[1],S=n[2],k=t[0],H=t[1],ne=t[2],pe=r[0],Me=r[1],Re=r[2],Fe=this._getCubicCurveApproxStep(e,n,t,r),Oe=Fe*Fe,Be=Oe*Fe,nt=3*Fe,rt=3*Oe,Ct=6*Oe,mt=6*Be,Ft=d-2*_+k,nn=p-2*C+H,Xt=v-2*S+ne,pn=3*(_-k)-d+pe,mn=3*(C-H)-p+Me,on=3*(S-ne)-v+Re,Cn=d,Ht=p,ln=v,Zt=(_-d)*nt+Ft*rt+pn*Be,Zn=(C-p)*nt+nn*rt+mn*Be,An=(S-v)*nt+Xt*rt+on*Be,ri=Ft*Ct+pn*mt,kr=nn*Ct+mn*mt,gi=Xt*Ct+on*mt,Dr=pn*mt,qr=mn*mt,Qa=on*mt,ii=0,Wi=0,ji=Math.ceil(1/Fe),Ra=new Float32Array(3*(ji+1)),Ba=(Ra=[],0);for(Wi=0;Wi<ji+1;Wi++)Ra[Ba++]=Cn,Ra[Ba++]=Ht,Ra[Ba++]=ln,Cn+=Zt,Ht+=Zn,ln+=An,Zt+=ri,Zn+=kr,An+=gi,ri+=Dr,kr+=qr,gi+=Qa,(ii+=Fe)>1&&(Cn=Zt>0?Math.min(Cn,pe):Math.max(Cn,pe),Ht=Zn>0?Math.min(Ht,Me):Math.max(Ht,Me),ln=An>0?Math.min(ln,Re):Math.max(ln,Re));return this.addPolyline(Ra,i,s)},addLine:function(e,n,t,r){return this.addPolyline([e,n],t,r)},addPolyline:function(e,n,t,r,i){if(e.length){var s="number"!=typeof e[0];if(null==i&&(i=s?e.length:e.length/3),!(i<2)){null==r&&(r=0),null==t&&(t=1),this._itemVertexOffsets.push(this._vertexOffset);var ne,pe,d=(s="number"!=typeof e[0])?"number"!=typeof n[0]:n.length/4===i,p=this.attributes.position,v=this.attributes.positionPrev,_=this.attributes.positionNext,C=this.attributes.color,S=this.attributes.offset,k=this.indices,H=this._vertexOffset;t=Math.max(t,.01);for(var Me=r;Me<i;Me++){if(s)ne=e[Me],pe=d?n[Me]:n;else{var Re=3*Me;if((ne=ne||[])[0]=e[Re],ne[1]=e[Re+1],ne[2]=e[Re+2],d){var Fe=4*Me;(pe=pe||[])[0]=n[Fe],pe[1]=n[Fe+1],pe[2]=n[Fe+2],pe[3]=n[Fe+3]}else pe=n}if(this.useNativeLine?Me>1&&(p.copy(H,H-1),C.copy(H,H-1),H++):(Me<i-1&&(v.set(H+2,ne),v.set(H+3,ne)),Me>0&&(_.set(H-2,ne),_.set(H-1,ne)),p.set(H,ne),p.set(H+1,ne),C.set(H,pe),C.set(H+1,pe),S.set(H,t/2),S.set(H+1,-t/2),H+=2),this.useNativeLine)C.set(H,pe),p.set(H,ne),H++;else if(Me>0){var Oe=3*this._triangleOffset;(k=this.indices)[Oe]=H-4,k[Oe+1]=H-3,k[Oe+2]=H-2,k[Oe+3]=H-3,k[Oe+4]=H-1,k[Oe+5]=H-2,this._triangleOffset+=2}}if(!this.useNativeLine){var Be=this._vertexOffset,nt=this._vertexOffset+2*i;v.copy(Be,Be+2),v.copy(Be+1,Be+3),_.copy(nt-1,nt-3),_.copy(nt-2,nt-4)}return this._vertexOffset=H,this._vertexOffset}}},setItemColor:function(e,n){for(var r=e<this._itemVertexOffsets.length-1?this._itemVertexOffsets[e+1]:this._vertexOffset,i=this._itemVertexOffsets[e];i<r;i++)this.attributes.color.set(i,n);this.dirty("color")},currentTriangleOffset:function(){return this._triangleOffset},currentVertexOffset:function(){return this._vertexOffset}});bt.D5.defaults(V8.prototype,nw);const Yv=V8;function VI(e,n,t,r,i,s,d){this._zr=e,this._x=0,this._y=0,this._rowHeight=0,this.width=r,this.height=i,this.offsetX=n,this.offsetY=t,this.dpr=d,this.gap=s}function z8(e){(e=e||{}).width=e.width||512,e.height=e.height||512,e.devicePixelRatio=e.devicePixelRatio||1,e.gap=e.gap??2;var n=document.createElement("canvas");n.width=e.width*e.devicePixelRatio,n.height=e.height*e.devicePixelRatio,this._canvas=n,this._texture=new $r({image:n,flipY:!1});var t=this;this._zr=bt.x_.init(n);var r=this._zr.refreshImmediately;this._zr.refreshImmediately=function(){r.call(this),t._texture.dirty(),t.onupdate&&t.onupdate()},this._dpr=e.devicePixelRatio,this._coords={},this.onupdate=e.onupdate,this._gap=e.gap,this._textureAtlasNodes=[new VI(this._zr,0,0,e.width,e.height,this._gap,this._dpr)],this._nodeWidth=e.width,this._nodeHeight=e.height,this._currentNodeIdx=0}VI.prototype={constructor:VI,clear:function(){this._x=0,this._y=0,this._rowHeight=0},add:function(e,n,t){var r=e.getBoundingRect();null==n&&(n=r.width),null==t&&(t=r.height),this._fitElement(e,n*=this.dpr,t*=this.dpr);var i=this._x,s=this._y,d=this.width*this.dpr,p=this.height*this.dpr,v=this.gap;if(i+n+v>d&&(i=this._x=0,this._y=s+=this._rowHeight+v,this._rowHeight=0),this._x+=n+v,this._rowHeight=Math.max(this._rowHeight,t),s+t+v>p)return null;e.x+=this.offsetX*this.dpr+i,e.y+=this.offsetY*this.dpr+s,this._zr.add(e);var _=[this.offsetX/this.width,this.offsetY/this.height];return[[i/d+_[0],s/p+_[1]],[(i+n)/d+_[0],(s+t)/p+_[1]]]},_fitElement:function(e,n,t){var r=e.getBoundingRect(),i=n/r.width,s=t/r.height;e.x=-r.x*i,e.y=-r.y*s,e.scaleX=i,e.scaleY=s,e.update()}},z8.prototype={clear:function(){for(var e=0;e<this._textureAtlasNodes.length;e++)this._textureAtlasNodes[e].clear();this._currentNodeIdx=0,this._zr.clear(),this._coords={}},getWidth:function(){return this._width},getHeight:function(){return this._height},getTexture:function(){return this._texture},getDevicePixelRatio:function(){return this._dpr},getZr:function(){return this._zr},_getCurrentNode:function(){return this._textureAtlasNodes[this._currentNodeIdx]},_expand:function(){if(this._currentNodeIdx++,this._textureAtlasNodes[this._currentNodeIdx])return this._textureAtlasNodes[this._currentNodeIdx];var e=4096/this._dpr,t=this._textureAtlasNodes.length,r=t*this._nodeWidth%e,i=Math.floor(t*this._nodeWidth/e)*this._nodeHeight;if(!(i>=e)){var s=(r+this._nodeWidth)*this._dpr,d=(i+this._nodeHeight)*this._dpr;try{this._zr.resize({width:s,height:d})}catch{this._canvas.width=s,this._canvas.height=d}var p=new VI(this._zr,r,i,this._nodeWidth,this._nodeHeight,this._gap,this._dpr);return this._textureAtlasNodes.push(p),p}},add:function(e,n,t){if(this._coords[e.id])return this._coords[e.id];var r=this._getCurrentNode().add(e,n,t);if(!r){var i=this._expand();if(!i)return;r=i.add(e,n,t)}return this._coords[e.id]=r,r},getCoordsScale:function(){var e=this._dpr;return[this._nodeWidth/this._canvas.width*e,this._nodeHeight/this._canvas.height*e]},getCoords:function(e){return this._coords[e]},dispose:function(){this._zr.dispose()}};const w3=z8;function S3(){}S3.prototype={constructor:S3,setScene:function(e){this._scene=e,this._skybox&&this._skybox.attachScene(this._scene)},initLight:function(e){this._lightRoot=e,this.mainLight=new ot.DirectionalLight({shadowBias:.005}),this.ambientLight=new ot.AmbientLight,e.add(this.mainLight),e.add(this.ambientLight)},dispose:function(){this._lightRoot&&(this._lightRoot.remove(this.mainLight),this._lightRoot.remove(this.ambientLight))},updateLight:function(e){var n=this.mainLight,t=this.ambientLight,r=e.getModel("light"),i=r.getModel("main"),s=r.getModel("ambient");n.intensity=i.get("intensity"),t.intensity=s.get("intensity"),n.color=ot.parseColor(i.get("color")).slice(0,3),t.color=ot.parseColor(s.get("color")).slice(0,3);var d=i.get("alpha")||0,p=i.get("beta")||0;n.position.setArray(ot.directionFromAlphaBeta(d,p)),n.lookAt(ot.Vector3.ZERO),n.castShadow=i.get("shadow"),n.shadowResolution=ot.getShadowResolution(i.get("shadowQuality"))},updateAmbientCubemap:function(e,n,t){var r=n.getModel("light.ambientCubemap"),i=r.get("texture");if(i){this._cubemapLightsCache=this._cubemapLightsCache||{};var s=this._cubemapLightsCache[i];if(!s){var d=this;s=this._cubemapLightsCache[i]=ot.createAmbientCubemap(r.option,e,t,function(){d._isSkyboxFromAmbientCubemap&&d._skybox.setEnvironmentMap(s.specular.cubemap),t.getZr().refresh()})}this._lightRoot.add(s.diffuse),this._lightRoot.add(s.specular),this._currentCubemapLights=s}else this._currentCubemapLights&&(this._lightRoot.remove(this._currentCubemapLights.diffuse),this._lightRoot.remove(this._currentCubemapLights.specular),this._currentCubemapLights=null)},updateSkybox:function(e,n,t){var r=n.get("environment"),i=this,d=function s(){return i._skybox=i._skybox||new DI,i._skybox}();if(r&&"none"!==r)if("auto"===r)this._isSkyboxFromAmbientCubemap=!0,this._currentCubemapLights?(d.setEnvironmentMap(this._currentCubemapLights.specular.cubemap),this._scene&&d.attachScene(this._scene),d.material.set("lod",3)):this._skybox&&this._skybox.detachScene();else if("object"==typeof r&&r.colorStops||"string"==typeof r&&bt.$_.parse(r)){this._isSkyboxFromAmbientCubemap=!1;var v=new ot.Texture2D({anisotropic:8,flipY:!1});d.setEnvironmentMap(v);var _=v.image=document.createElement("canvas");_.width=_.height=16;var C=_.getContext("2d"),S=new bt.Q.Rect({shape:{x:0,y:0,width:16,height:16},style:{fill:r}});bt.z$(C,S),d.attachScene(this._scene)}else this._isSkyboxFromAmbientCubemap=!1,v=ot.loadTexture(r,t,{anisotropic:8,flipY:!1}),d.setEnvironmentMap(v),d.attachScene(this._scene);else this._skybox&&this._skybox.detachScene(this._scene),this._skybox=null;var k=n.coordinateSystem;if(this._skybox)if(!k||!k.viewGL||"auto"===r||r.match&&r.match(/.hdr$/))this._skybox.material.undefine("fragment","SRGB_DECODE");else{var H=k.viewGL.isLinearSpace()?"define":"undefine";this._skybox.material[H]("fragment","SRGB_DECODE")}}};const Hy=S3;var Xv=Ka.vec3,H8=Si.extend(function(){return{segmentScale:1,useNativeLine:!0,attributes:{position:new Si.Attribute("position","float",3,"POSITION"),normal:new Si.Attribute("normal","float",3,"NORMAL"),color:new Si.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setQuadCount:function(e){var n=this.attributes,t=this.getQuadVertexCount()*e,r=this.getQuadTriangleCount()*e;this.vertexCount!==t&&(n.position.init(t),n.normal.init(t),n.color.init(t)),this.triangleCount!==r&&(this.indices=t>65535?new Uint32Array(3*r):new Uint16Array(3*r))},getQuadVertexCount:function(){return 4},getQuadTriangleCount:function(){return 2},addQuad:function(){var e=Xv.create(),n=Xv.create(),t=Xv.create(),r=[0,3,1,3,2,1];return function(i,s){var d=this.attributes.position,p=this.attributes.normal,v=this.attributes.color;Xv.sub(e,i[1],i[0]),Xv.sub(n,i[2],i[1]),Xv.cross(t,e,n),Xv.normalize(t,t);for(var _=0;_<4;_++)d.set(this._vertexOffset+_,i[_]),v.set(this._vertexOffset+_,s),p.set(this._vertexOffset+_,t);var C=3*this._faceOffset;for(_=0;_<6;_++)this.indices[C+_]=r[_]+this._vertexOffset;this._vertexOffset+=4,this._faceOffset+=2}}()});bt.D5.defaults(H8.prototype,nw);const ere=H8;var D3=Qr.firstNotNull,tre={x:0,y:2,z:1};function zI(e,n,t){this.rootNode=new ot.Node;var r=new ot.Mesh({geometry:new Yv({useNativeLine:!1}),material:n,castShadow:!1,ignorePicking:!0,$ignorePicking:!0,renderOrder:1}),i=new ot.Mesh({geometry:new ere,material:t,castShadow:!1,culling:!1,ignorePicking:!0,$ignorePicking:!0,renderOrder:0});this.rootNode.add(i),this.rootNode.add(r),this.faceInfo=e,this.plane=new ot.Plane,this.linesMesh=r,this.quadsMesh=i}zI.prototype.update=function(e,n,t){var r=e.coordinateSystem,i=[r.getAxis(this.faceInfo[0]),r.getAxis(this.faceInfo[1])],s=this.linesMesh.geometry,d=this.quadsMesh.geometry;s.convertToDynamicArray(!0),d.convertToDynamicArray(!0),this._updateSplitLines(s,i,e,t),this._udpateSplitAreas(d,i,e,t),s.convertToTypedArray(),d.convertToTypedArray();var p=r.getAxis(this.faceInfo[2]);!function nre(e,n,t,r){var i=[0,0,0],s=r<0?t.getExtentMin():t.getExtentMax();i[tre[t.dim]]=s,e.position.setArray(i),e.rotation.identity(),n.distance=-Math.abs(s),n.normal.set(0,0,0),"x"===t.dim?(e.rotation.rotateY(r*Math.PI/2),n.normal.x=-r):"z"===t.dim?(e.rotation.rotateX(-r*Math.PI/2),n.normal.y=-r):(r>0&&e.rotation.rotateY(Math.PI),n.normal.z=-r)}(this.rootNode,this.plane,p,this.faceInfo[3])},zI.prototype._updateSplitLines=function(e,n,t,r){var i=r.getDevicePixelRatio();n.forEach(function(s,d){var p=s.model,v=n[1-d].getExtent();if(!s.scale.isBlank()){var _=p.getModel("splitLine",t.getModel("splitLine"));if(_.get("show")){var C=_.getModel("lineStyle"),S=C.get("color"),k=D3(C.get("opacity"),1),H=D3(C.get("width"),1);S=bt.D5.isArray(S)?S:[S];for(var ne=s.getTicksCoords({tickModel:_}),pe=0,Me=0;Me<ne.length;Me++){var Re=ne[Me].coord,Fe=ot.parseColor(S[pe%S.length]);Fe[3]*=k;var Oe=[0,0,0],Be=[0,0,0];Oe[d]=Be[d]=Re,Oe[1-d]=v[0],Be[1-d]=v[1],e.addLine(Oe,Be,Fe,H*i),pe++}}}})},zI.prototype._udpateSplitAreas=function(e,n,t,r){n.forEach(function(i,s){var d=i.model,p=n[1-s].getExtent();if(!i.scale.isBlank()){var v=d.getModel("splitArea",t.getModel("splitArea"));if(v.get("show")){var _=v.getModel("areaStyle"),C=_.get("color"),S=D3(_.get("opacity"),1);C=bt.D5.isArray(C)?C:[C];for(var k=i.getTicksCoords({tickModel:v,clamp:!0}),H=0,ne=[0,0,0],pe=[0,0,0],Me=0;Me<k.length;Me++){var Fe=[0,0,0],Oe=[0,0,0];if(Fe[s]=Oe[s]=k[Me].coord,Fe[1-s]=p[0],Oe[1-s]=p[1],0!==Me){var Be=ot.parseColor(C[H%C.length]);Be[3]*=S,e.addQuad([ne,Fe,Oe,pe],Be),ne=Fe,pe=Oe,H++}else ne=Fe,pe=Oe}}}})};const rre=zI;var U8=[0,1,2,0,2,3],G8=Si.extend(function(){return{attributes:{position:new Si.Attribute("position","float",3,"POSITION"),texcoord:new Si.Attribute("texcoord","float",2,"TEXCOORD_0"),offset:new Si.Attribute("offset","float",2),color:new Si.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setSpriteCount:function(e){this._spriteCount=e;var n=4*e,t=2*e;this.vertexCount!==n&&(this.attributes.position.init(n),this.attributes.offset.init(n),this.attributes.color.init(n)),this.triangleCount!==t&&(this.indices=n>65535?new Uint32Array(3*t):new Uint16Array(3*t))},setSpriteAlign:function(e,n,t,r,i){var s,d,p,v;switch(null==t&&(t="left"),null==r&&(r="top"),i=i||0,t){case"left":s=i,p=n[0]+i;break;case"center":case"middle":s=-n[0]/2,p=n[0]/2;break;case"right":s=-n[0]-i,p=-i}switch(r){case"bottom":d=i,v=n[1]+i;break;case"middle":d=-n[1]/2,v=n[1]/2;break;case"top":d=-n[1]-i,v=-i}var _=4*e,C=this.attributes.offset;C.set(_,[s,v]),C.set(_+1,[p,v]),C.set(_+2,[p,d]),C.set(_+3,[s,d])},addSprite:function(e,n,t,r,i,s){var d=this._vertexOffset;this.setSprite(this._vertexOffset/4,e,n,t,r,i,s);for(var p=0;p<U8.length;p++)this.indices[3*this._faceOffset+p]=U8[p]+d;return this._faceOffset+=2,this._vertexOffset+=4,d/4},setSprite:function(e,n,t,r,i,s,d){for(var p=4*e,v=this.attributes,_=0;_<4;_++)v.position.set(p+_,n);var C=v.texcoord;C.set(p,[r[0][0],r[0][1]]),C.set(p+1,[r[1][0],r[0][1]]),C.set(p+2,[r[1][0],r[1][1]]),C.set(p+3,[r[0][0],r[1][1]]),this.setSpriteAlign(e,t,i,s,d)}});bt.D5.defaults(G8.prototype,nw);const ire=G8;ot.Shader.import("@export ecgl.labels.vertex\n\nattribute vec3 position: POSITION;\nattribute vec2 texcoord: TEXCOORD_0;\nattribute vec2 offset;\n#ifdef VERTEX_COLOR\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n#endif\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform vec4 viewport : VIEWPORT;\n\nvarying vec2 v_Texcoord;\n\nvoid main()\n{\n vec4 proj = worldViewProjection * vec4(position, 1.0);\n\n vec2 screen = (proj.xy / abs(proj.w) + 1.0) * 0.5 * viewport.zw;\n\n screen += offset;\n\n proj.xy = (screen / viewport.zw - 0.5) * 2.0 * abs(proj.w);\n gl_Position = proj;\n#ifdef VERTEX_COLOR\n v_Color = a_Color;\n#endif\n v_Texcoord = texcoord;\n}\n@end\n\n\n@export ecgl.labels.fragment\n\nuniform vec3 color : [1.0, 1.0, 1.0];\nuniform float alpha : 1.0;\nuniform sampler2D textureAtlas;\nuniform vec2 uvScale: [1.0, 1.0];\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\nvarying float v_Miter;\n\nvarying vec2 v_Texcoord;\n\nvoid main()\n{\n gl_FragColor = vec4(color, alpha) * texture2D(textureAtlas, v_Texcoord * uvScale);\n#ifdef VERTEX_COLOR\n gl_FragColor *= v_Color;\n#endif\n}\n\n@end");const M3=ot.Mesh.extend(function(){return{geometry:new ire({dynamic:!0}),material:new ot.Material({shader:ot.createShader("ecgl.labels"),transparent:!0,depthMask:!1}),culling:!1,castShadow:!1,ignorePicking:!0}});var $v=Qr.firstNotNull,Kv={x:0,y:2,z:1};function T3(e,n){var t=new ot.Mesh({geometry:new Yv({useNativeLine:!1}),material:n,castShadow:!1,ignorePicking:!0,renderOrder:2}),r=new M3;r.material.depthMask=!1;var i=new ot.Node;i.add(t),i.add(r),this.rootNode=i,this.dim=e,this.linesMesh=t,this.labelsMesh=r,this.axisLineCoords=null,this.labelElements=[]}var E3={x:"y",y:"x",z:"y"};T3.prototype.update=function(e,n,t){var i=e.coordinateSystem.getAxis(this.dim),s=this.linesMesh.geometry,d=this.labelsMesh.geometry;s.convertToDynamicArray(!0),d.convertToDynamicArray(!0);var p=i.model,v=i.getExtent(),Xt=t.getDevicePixelRatio(),_=p.getModel("axisLine",e.getModel("axisLine")),C=p.getModel("axisTick",e.getModel("axisTick")),S=p.getModel("axisLabel",e.getModel("axisLabel")),k=_.get("lineStyle.color");if(_.get("show")){var H=_.getModel("lineStyle"),pe=[0,0,0];(ne=[0,0,0])[Me=Kv[i.dim]]=v[0],pe[Me]=v[1],this.axisLineCoords=[ne,pe];var Re=ot.parseColor(k),Fe=$v(H.get("width"),1),Oe=$v(H.get("opacity"),1);Re[3]*=Oe,s.addLine(ne,pe,Re,Fe*Xt)}if(C.get("show")){var Be=C.getModel("lineStyle"),nt=ot.parseColor($v(Be.get("color"),k));Fe=$v(Be.get("width"),1),nt[3]*=$v(Be.get("opacity"),1);for(var rt=i.getTicksCoords(),Ct=C.get("length"),mt=0;mt<rt.length;mt++){var ne,nn=Kv[E3[i.dim]];(ne=[0,0,0])[Me=Kv[i.dim]]=(pe=[0,0,0])[Me]=Ft=rt[mt].coord,pe[nn]=Ct,s.addLine(ne,pe,nt,Fe*Xt)}}if(this.labelElements=[],Xt=t.getDevicePixelRatio(),S.get("show")){rt=i.getTicksCoords();var pn=p.get("data"),mn=S.get("margin"),on=i.getViewLabels();for(mt=0;mt<on.length;mt++){var Cn=on[mt].tickValue,Ht=on[mt].formattedLabel,ln=on[mt].rawLabel,Ft=i.dataToCoord(Cn);nn=Kv[E3[i.dim]],(Zt=[0,0,0])[Me=Kv[i.dim]]=Zt[Me]=Ft,Zt[nn]=mn;var Zn=S;pn&&pn[Cn]&&pn[Cn].textStyle&&(Zn=new bt.Hn(pn[Cn].textStyle,S,p.ecModel));var An=$v(Zn.get("color"),k),ri=new bt.Q.Text({style:(0,FI.Lr)(Zn,{text:Ht,fill:"function"==typeof An?An("category"===i.type?ln:"value"===i.type?Cn+"":Cn,mt):An,verticalAlign:"top",align:"left"})}),kr=n.add(ri),gi=ri.getBoundingRect();d.addSprite(Zt,[gi.width*Xt,gi.height*Xt],kr),this.labelElements.push(ri)}}if(p.get("name")){var Dr=p.getModel("nameTextStyle"),Zt=[0,0,0],Me=Kv[i.dim],qr=(nn=Kv[E3[i.dim]],$v(Dr.get("color"),k)),Qa=Dr.get("borderColor");Fe=Dr.get("borderWidth"),Zt[Me]=Zt[Me]=(v[0]+v[1])/2,Zt[nn]=p.get("nameGap"),ri=new bt.Q.Text({style:(0,FI.Lr)(Dr,{text:p.get("name"),fill:qr,stroke:Qa,lineWidth:Fe})}),kr=n.add(ri),gi=ri.getBoundingRect(),d.addSprite(Zt,[gi.width*Xt,gi.height*Xt],kr),ri.__idx=this.labelElements.length,this.nameLabelElement=ri}this.labelsMesh.material.set("textureAtlas",n.getTexture()),this.labelsMesh.material.set("uvScale",n.getCoordsScale()),s.convertToTypedArray(),d.convertToTypedArray()},T3.prototype.setSpriteAlign=function(e,n,t){for(var r=t.getDevicePixelRatio(),i=this.labelsMesh.geometry,s=0;s<this.labelElements.length;s++){var p=this.labelElements[s].getBoundingRect();i.setSpriteAlign(s,[p.width*r,p.height*r],e,n)}var v=this.nameLabelElement;v&&(p=v.getBoundingRect(),i.setSpriteAlign(v.__idx,[p.width*r,p.height*r],e,n),i.dirty()),this.textAlign=e,this.textVerticalAlign=n};const ore=T3,HI="@export ecgl.lines3D.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nattribute vec3 position: POSITION;\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n\nvoid main()\n{\n gl_Position = worldViewProjection * vec4(position, 1.0);\n v_Color = a_Color;\n}\n\n@end\n\n@export ecgl.lines3D.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nvarying vec4 v_Color;\n\n@import clay.util.srgb\n\nvoid main()\n{\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(color * v_Color);\n#else\n gl_FragColor = color * v_Color;\n#endif\n}\n@end\n\n\n\n@export ecgl.lines3D.clipNear\n\nvec4 clipNear(vec4 p1, vec4 p2) {\n float n = (p1.w - near) / (p1.w - p2.w);\n return vec4(mix(p1.xy, p2.xy, n), -near, near);\n}\n\n@end\n\n@export ecgl.lines3D.expandLine\n#ifdef VERTEX_ANIMATION\n vec4 prevProj = worldViewProjection * vec4(mix(prevPositionPrev, positionPrev, percent), 1.0);\n vec4 currProj = worldViewProjection * vec4(mix(prevPosition, position, percent), 1.0);\n vec4 nextProj = worldViewProjection * vec4(mix(prevPositionNext, positionNext, percent), 1.0);\n#else\n vec4 prevProj = worldViewProjection * vec4(positionPrev, 1.0);\n vec4 currProj = worldViewProjection * vec4(position, 1.0);\n vec4 nextProj = worldViewProjection * vec4(positionNext, 1.0);\n#endif\n\n if (currProj.w < 0.0) {\n if (nextProj.w > 0.0) {\n currProj = clipNear(currProj, nextProj);\n }\n else if (prevProj.w > 0.0) {\n currProj = clipNear(currProj, prevProj);\n }\n }\n\n vec2 prevScreen = (prevProj.xy / abs(prevProj.w) + 1.0) * 0.5 * viewport.zw;\n vec2 currScreen = (currProj.xy / abs(currProj.w) + 1.0) * 0.5 * viewport.zw;\n vec2 nextScreen = (nextProj.xy / abs(nextProj.w) + 1.0) * 0.5 * viewport.zw;\n\n vec2 dir;\n float len = offset;\n if (position == positionPrev) {\n dir = normalize(nextScreen - currScreen);\n }\n else if (position == positionNext) {\n dir = normalize(currScreen - prevScreen);\n }\n else {\n vec2 dirA = normalize(currScreen - prevScreen);\n vec2 dirB = normalize(nextScreen - currScreen);\n\n vec2 tanget = normalize(dirA + dirB);\n\n float miter = 1.0 / max(dot(tanget, dirA), 0.5);\n len *= miter;\n dir = tanget;\n }\n\n dir = vec2(-dir.y, dir.x) * len;\n currScreen += dir;\n\n currProj.xy = (currScreen / viewport.zw - 0.5) * 2.0 * abs(currProj.w);\n@end\n\n\n@export ecgl.meshLines3D.vertex\n\nattribute vec3 position: POSITION;\nattribute vec3 positionPrev;\nattribute vec3 positionNext;\nattribute float offset;\nattribute vec4 a_Color : COLOR;\n\n#ifdef VERTEX_ANIMATION\nattribute vec3 prevPosition;\nattribute vec3 prevPositionPrev;\nattribute vec3 prevPositionNext;\nuniform float percent : 1.0;\n#endif\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform vec4 viewport : VIEWPORT;\nuniform float near : NEAR;\n\nvarying vec4 v_Color;\n\n@import ecgl.common.wireframe.vertexHeader\n\n@import ecgl.lines3D.clipNear\n\nvoid main()\n{\n @import ecgl.lines3D.expandLine\n\n gl_Position = currProj;\n\n v_Color = a_Color;\n\n @import ecgl.common.wireframe.vertexMain\n}\n@end\n\n\n@export ecgl.meshLines3D.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nvarying vec4 v_Color;\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.util.srgb\n\nvoid main()\n{\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(color * v_Color);\n#else\n gl_FragColor = color * v_Color;\n#endif\n\n @import ecgl.common.wireframe.fragmentMain\n}\n\n@end";var W8=Qr.firstNotNull;ot.Shader.import(HI);var Qv={x:0,y:2,z:1};const sre=bt.Ir.extend({type:"grid3D",__ecgl__:!0,init:function(e,n){var i=new ot.Material({shader:ot.createShader("ecgl.color"),depthMask:!1,transparent:!0}),s=new ot.Material({shader:ot.createShader("ecgl.meshLines3D"),depthMask:!1,transparent:!0});i.define("fragment","DOUBLE_SIDED"),i.define("both","VERTEX_COLOR"),this.groupGL=new ot.Node,this._control=new BI({zr:n.getZr()}),this._control.init(),this._faces=[["y","z","x",-1,"left"],["y","z","x",1,"right"],["x","y","z",-1,"bottom"],["x","y","z",1,"top"],["x","z","y",-1,"far"],["x","z","y",1,"near"]].map(function(p){var v=new rre(p,s,i);return this.groupGL.add(v.rootNode),v},this),this._axes=["x","y","z"].map(function(p){var v=new ore(p,s);return this.groupGL.add(v.rootNode),v},this);var d=n.getDevicePixelRatio();this._axisLabelSurface=new w3({width:256,height:256,devicePixelRatio:d}),this._axisLabelSurface.onupdate=function(){n.getZr().refresh()},this._axisPointerLineMesh=new ot.Mesh({geometry:new Yv({useNativeLine:!1}),material:s,castShadow:!1,ignorePicking:!0,renderOrder:3}),this.groupGL.add(this._axisPointerLineMesh),this._axisPointerLabelsSurface=new w3({width:128,height:128,devicePixelRatio:d}),this._axisPointerLabelsMesh=new M3({ignorePicking:!0,renderOrder:4,castShadow:!1}),this._axisPointerLabelsMesh.material.set("textureAtlas",this._axisPointerLabelsSurface.getTexture()),this.groupGL.add(this._axisPointerLabelsMesh),this._lightRoot=new ot.Node,this._sceneHelper=new Hy,this._sceneHelper.initLight(this._lightRoot)},render:function(e,n,t){this._model=e,this._api=t;var r=e.coordinateSystem;r.viewGL.add(this._lightRoot),e.get("show")?r.viewGL.add(this.groupGL):r.viewGL.remove(this.groupGL);var i=this._control;i.setViewGL(r.viewGL);var s=e.getModel("viewControl");i.setFromViewControlModel(s,0),this._axisLabelSurface.clear(),i.off("update"),e.get("show")&&(this._faces.forEach(function(d){d.update(e,n,t)},this),this._axes.forEach(function(d){d.update(e,this._axisLabelSurface,t)},this)),i.on("update",this._onCameraChange.bind(this,e,t),this),this._sceneHelper.setScene(r.viewGL.scene),this._sceneHelper.updateLight(e),r.viewGL.setPostEffect(e.getModel("postEffect"),t),r.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling")),this._initMouseHandler(e)},afterRender:function(e,n,t,r){var i=r.renderer;this._sceneHelper.updateAmbientCubemap(i,e,t),this._sceneHelper.updateSkybox(i,e,t)},showAxisPointer:function(e,n,t,r){this._doShowAxisPointer(),this._updateAxisPointer(r.value)},hideAxisPointer:function(e,n,t,r){this._doHideAxisPointer()},_initMouseHandler:function(e){var t=e.coordinateSystem.viewGL;e.get("show")&&e.get("axisPointer.show")?t.on("mousemove",this._updateAxisPointerOnMousePosition,this):t.off("mousemove",this._updateAxisPointerOnMousePosition)},_updateAxisPointerOnMousePosition:function(e){if(!e.target){for(var s,t=this._model.coordinateSystem,r=t.viewGL,i=r.castRay(e.offsetX,e.offsetY,new ot.Ray),d=0;d<this._faces.length;d++){var p=this._faces[d];if(!p.rootNode.invisible){p.plane.normal.dot(r.camera.worldTransform.z)<0&&p.plane.normal.negate();var v=i.intersectPlane(p.plane);if(v){var _=t.getAxis(p.faceInfo[0]),C=t.getAxis(p.faceInfo[1]),k=Qv[p.faceInfo[1]];_.contain(v.array[Qv[p.faceInfo[0]]])&&C.contain(v.array[k])&&(s=v)}}}if(s){var H=t.pointToData(s.array,[],!0);this._updateAxisPointer(H),this._doShowAxisPointer()}else this._doHideAxisPointer()}},_onCameraChange:function(e,n){e.get("show")&&(this._updateFaceVisibility(),this._updateAxisLinePosition());var t=this._control;n.dispatchAction({type:"grid3DChangeCamera",alpha:t.getAlpha(),beta:t.getBeta(),distance:t.getDistance(),center:t.getCenter(),from:this.uid,grid3DId:e.id})},_updateFaceVisibility:function(){var e=this._control.getCamera(),n=new ot.Vector3;e.update();for(var t=0;t<this._faces.length/2;t++){for(var r=[],i=0;i<2;i++)this._faces[2*t+i].rootNode.getWorldPosition(n),n.transformMat4(e.viewMatrix),r[i]=n.z;var d=r[0]>r[1]?0:1,v=this._faces[2*t+1-d];this._faces[2*t+d].rootNode.invisible=!0,v.rootNode.invisible=!1}},_updateAxisLinePosition:function(){var e=this._model.coordinateSystem,n=e.getAxis("x"),t=e.getAxis("y"),r=e.getAxis("z"),i=r.getExtentMax(),s=r.getExtentMin(),d=n.getExtentMin(),p=n.getExtentMax(),v=t.getExtentMax(),_=t.getExtentMin(),C=this._axes[0].rootNode,S=this._axes[1].rootNode,k=this._axes[2].rootNode,H=this._faces,ne=H[4].rootNode.invisible?_:v,pe=H[2].rootNode.invisible?i:s,Me=H[0].rootNode.invisible?d:p,Re=H[2].rootNode.invisible?i:s,Fe=H[0].rootNode.invisible?p:d,Oe=H[4].rootNode.invisible?_:v;C.rotation.identity(),S.rotation.identity(),k.rotation.identity(),H[4].rootNode.invisible&&(this._axes[0].flipped=!0,C.rotation.rotateX(Math.PI)),H[0].rootNode.invisible&&(this._axes[1].flipped=!0,S.rotation.rotateZ(Math.PI)),H[4].rootNode.invisible&&(this._axes[2].flipped=!0,k.rotation.rotateY(Math.PI)),C.position.set(0,pe,ne),S.position.set(Me,Re,0),k.position.set(Fe,0,Oe),C.update(),S.update(),k.update(),this._updateAxisLabelAlign()},_updateAxisLabelAlign:function(){var e=this._control.getCamera(),n=[new ot.Vector4,new ot.Vector4],t=new ot.Vector4;this.groupGL.getWorldPosition(t),t.w=1,t.transformMat4(e.viewMatrix).transformMat4(e.projectionMatrix),t.x/=t.w,t.y/=t.w,this._axes.forEach(function(r){for(var i=r.axisLineCoords,d=0;d<n.length;d++)n[d].setArray(i[d]),n[d].w=1,n[d].transformMat4(r.rootNode.worldTransform).transformMat4(e.viewMatrix).transformMat4(e.projectionMatrix),n[d].x/=n[d].w,n[d].y/=n[d].w;var S,k,_=(n[1].x+n[0].x)/2,C=(n[1].y+n[0].y)/2;Math.abs((n[1].y-n[0].y)/(n[1].x-n[0].x))<.5?(S="center",k=C>t.y?"bottom":"top"):(k="middle",S=_>t.x?"left":"right"),r.setSpriteAlign(S,k,this._api)},this)},_doShowAxisPointer:function(){!this._axisPointerLineMesh.invisible||(this._axisPointerLineMesh.invisible=!1,this._axisPointerLabelsMesh.invisible=!1,this._api.getZr().refresh())},_doHideAxisPointer:function(){this._axisPointerLineMesh.invisible||(this._axisPointerLineMesh.invisible=!0,this._axisPointerLabelsMesh.invisible=!0,this._api.getZr().refresh())},_updateAxisPointer:function(e){var n=this._model.coordinateSystem,t=n.dataToPoint(e),i=this._axisPointerLineMesh.geometry,s=this._model.getModel("axisPointer"),d=this._api.getDevicePixelRatio();function p(mt){return Qr.firstNotNull(mt.model.get("axisPointer.show"),s.get("show"))}function v(mt){var nn=mt.model.getModel("axisPointer",s).getModel("lineStyle"),Xt=ot.parseColor(nn.get("color")),pn=W8(nn.get("width"),1),mn=W8(nn.get("opacity"),1);return Xt[3]*=mn,{color:Xt,lineWidth:pn}}i.convertToDynamicArray(!0);for(var _=0;_<this._faces.length;_++){var C=this._faces[_];if(!C.rootNode.invisible){for(var S=C.faceInfo,k=S[3]<0?n.getAxis(S[2]).getExtentMin():n.getAxis(S[2]).getExtentMax(),H=Qv[S[2]],ne=0;ne<2;ne++){var pe=S[ne],Me=S[1-ne],Re=n.getAxis(pe),Fe=n.getAxis(Me);if(p(Re)){var nt=Qv[pe],rt=Qv[Me];(Oe=[0,0,0])[nt]=(Be=[0,0,0])[nt]=t[nt],Oe[H]=Be[H]=k,Oe[rt]=Fe.getExtentMin(),Be[rt]=Fe.getExtentMax();var Ct=v(Re);i.addLine(Oe,Be,Ct.color,Ct.lineWidth*d)}}if(p(n.getAxis(S[2]))){var Be,Oe=t.slice();(Be=t.slice())[H]=k,Ct=v(n.getAxis(S[2])),i.addLine(Oe,Be,Ct.color,Ct.lineWidth*d)}}}i.convertToTypedArray(),this._updateAxisPointerLabelsMesh(e),this._api.getZr().refresh()},_updateAxisPointerLabelsMesh:function(e){var n=this._model,t=this._axisPointerLabelsMesh,r=this._axisPointerLabelsSurface,i=n.coordinateSystem,s=n.getModel("axisPointer");t.geometry.convertToDynamicArray(!0),r.clear();var d={x:"y",y:"x",z:"y"};this._axes.forEach(function(p,v){var _=i.getAxis(p.dim),S=_.model.getModel("axisPointer",s),k=S.getModel("label"),H=S.get("lineStyle.color");if(k.get("show")&&S.get("show")){var ne=e[v],pe=k.get("formatter"),Me=_.scale.getLabel({value:ne});if(null!=pe)Me=pe(Me,e);else if("interval"===_.scale.type||"log"===_.scale.type){var Re=bt.Rx.getPrecisionSafe(_.scale.getTicks()[0]);Me=ne.toFixed(Re+2)}var Fe=k.get("color"),Oe=new bt.Q.Text({style:(0,FI.Lr)(k,{text:Me,fill:Fe||H,align:"left",verticalAlign:"top"})}),Be=r.add(Oe),nt=Oe.getBoundingRect(),rt=this._api.getDevicePixelRatio(),Ct=p.rootNode.position.toArray();Ct[Qv[d[p.dim]]]+=(p.flipped?-1:1)*k.get("margin"),Ct[Qv[p.dim]]=_.dataToCoord(e[v]),t.geometry.addSprite(Ct,[nt.width*rt,nt.height*rt],Be,p.textAlign,p.textVerticalAlign)}},this),r.getZr().refreshImmediately(),t.material.set("uvScale",r.getCoordsScale()),t.geometry.convertToTypedArray()},dispose:function(){this.groupGL.removeAll(),this._control.dispose(),this._axisLabelSurface.dispose(),this._axisPointerLabelsSurface.dispose()}});var j8=z(8540);function UI(e){j8.Z.call(this,e),this.type="cartesian3D",this.dimensions=["x","y","z"],this.size=[0,0,0]}UI.prototype={constructor:UI,model:null,containPoint:function(e){return this.getAxis("x").contain(e[0])&&this.getAxis("y").contain(e[2])&&this.getAxis("z").contain(e[1])},containData:function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])&&this.getAxis("z").containData(e[2])},dataToPoint:function(e,n,t){return(n=n||[])[0]=this.getAxis("x").dataToCoord(e[0],t),n[2]=this.getAxis("y").dataToCoord(e[1],t),n[1]=this.getAxis("z").dataToCoord(e[2],t),n},pointToData:function(e,n,t){return(n=n||[])[0]=this.getAxis("x").coordToData(e[0],t),n[1]=this.getAxis("y").coordToData(e[2],t),n[2]=this.getAxis("z").coordToData(e[1],t),n}},bt.D5.inherits(UI,j8.Z);const Z8=UI;function GI(e,n,t){bt.RD.call(this,e,n,t)}GI.prototype={constructor:GI,getExtentMin:function(){var e=this._extent;return Math.min(e[0],e[1])},getExtentMax:function(){var e=this._extent;return Math.max(e[0],e[1])},calculateCategoryInterval:function(){return Math.floor(this.scale.count()/8)}},bt.D5.inherits(GI,bt.RD);const lre=GI;var WI=z(634),A3=function(){this._pool={},this._allocatedTextures=[]};A3.prototype={constructor:A3,get:function(e){var n=X8(e);this._pool.hasOwnProperty(n)||(this._pool[n]=[]);var t=this._pool[n];if(!t.length){var r=new $r(e);return this._allocatedTextures.push(r),r}return t.pop()},put:function(e){var n=X8(e);this._pool.hasOwnProperty(n)||(this._pool[n]=[]),this._pool[n].push(e)},clear:function(e){for(var n=0;n<this._allocatedTextures.length;n++)this._allocatedTextures[n].dispose(e);this._pool={},this._allocatedTextures=[]}};var Y8={width:512,height:512,type:5121,format:6408,wrapS:33071,wrapT:33071,minFilter:9987,magFilter:9729,useMipmap:!0,anisotropic:1,flipY:!0,unpackAlignment:4,premultiplyAlpha:!1},I3=Object.keys(Y8);function X8(e){Yo.defaultsWithPropList(e,Y8,I3),function ure(e){var n=function cre(e,n){return 0==(e&e-1)&&0==(n&n-1)}(e.width,e.height);6402===e.format&&(e.useMipmap=!1),(!n||!e.useMipmap)&&(9984==e.minFilter||9986==e.minFilter?e.minFilter=9728:(9987==e.minFilter||9985==e.minFilter)&&(e.minFilter=9729)),n||(e.wrapS=33071,e.wrapT=33071)}(e);for(var n="",t=0;t<I3.length;t++)n+=e[I3[t]].toString();return n}const $8=A3;var wf=["px","nx","py","ny","pz","nz"];function P3(e,n,t){return"alphaMap"===t?e.material.get("diffuseMap"):"alphaCutoff"===t?e.material.isDefined("fragment","ALPHA_TEST")&&e.material.get("diffuseMap")&&e.material.get("alphaCutoff")||0:"uvRepeat"===t?e.material.get("uvRepeat"):"uvOffset"===t?e.material.get("uvOffset"):n.get(t)}function K8(e,n){var t=e.material,r=n.material;return t.get("diffuseMap")!==r.get("diffuseMap")||(t.get("alphaCutoff")||0)!==(r.get("alphaCutoff")||0)}Gn.import("@export clay.sm.depth.vertex\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nattribute vec3 position : POSITION;\nattribute vec2 texcoord : TEXCOORD_0;\nuniform vec2 uvRepeat = vec2(1.0, 1.0);\nuniform vec2 uvOffset = vec2(0.0, 0.0);\n@import clay.chunk.skinning_header\n@import clay.chunk.instancing_header\nvarying vec4 v_ViewPosition;\nvarying vec2 v_Texcoord;\nvoid main(){\n vec4 P = vec4(position, 1.0);\n#ifdef SKINNING\n @import clay.chunk.skin_matrix\n P = skinMatrixWS * P;\n#endif\n#ifdef INSTANCING\n @import clay.chunk.instancing_matrix\n P = instanceMat * P;\n#endif\n v_ViewPosition = worldViewProjection * P;\n gl_Position = v_ViewPosition;\n v_Texcoord = texcoord * uvRepeat + uvOffset;\n}\n@end\n@export clay.sm.depth.fragment\nvarying vec4 v_ViewPosition;\nvarying vec2 v_Texcoord;\nuniform float bias : 0.001;\nuniform float slopeScale : 1.0;\nuniform sampler2D alphaMap;\nuniform float alphaCutoff: 0.0;\n@import clay.util.encode_float\nvoid main(){\n float depth = v_ViewPosition.z / v_ViewPosition.w;\n if (alphaCutoff > 0.0) {\n if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {\n discard;\n }\n }\n#ifdef USE_VSM\n depth = depth * 0.5 + 0.5;\n float moment1 = depth;\n float moment2 = depth * depth;\n #ifdef SUPPORT_STANDARD_DERIVATIVES\n float dx = dFdx(depth);\n float dy = dFdy(depth);\n moment2 += 0.25*(dx*dx+dy*dy);\n #endif\n gl_FragColor = vec4(moment1, moment2, 0.0, 1.0);\n#else\n #ifdef SUPPORT_STANDARD_DERIVATIVES\n float dx = dFdx(depth);\n float dy = dFdy(depth);\n depth += sqrt(dx*dx + dy*dy) * slopeScale + bias;\n #else\n depth += bias;\n #endif\n gl_FragColor = encodeFloat(depth * 0.5 + 0.5);\n#endif\n}\n@end\n@export clay.sm.debug_depth\nuniform sampler2D depthMap;\nvarying vec2 v_Texcoord;\n@import clay.util.decode_float\nvoid main() {\n vec4 tex = texture2D(depthMap, v_Texcoord);\n#ifdef USE_VSM\n gl_FragColor = vec4(tex.rgb, 1.0);\n#else\n float depth = decodeFloat(tex);\n gl_FragColor = vec4(depth, depth, depth, 1.0);\n#endif\n}\n@end\n@export clay.sm.distance.vertex\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform mat4 world : WORLD;\nattribute vec3 position : POSITION;\n@import clay.chunk.skinning_header\nvarying vec3 v_WorldPosition;\nvoid main (){\n vec4 P = vec4(position, 1.0);\n#ifdef SKINNING\n @import clay.chunk.skin_matrix\n P = skinMatrixWS * P;\n#endif\n#ifdef INSTANCING\n @import clay.chunk.instancing_matrix\n P = instanceMat * P;\n#endif\n gl_Position = worldViewProjection * P;\n v_WorldPosition = (world * P).xyz;\n}\n@end\n@export clay.sm.distance.fragment\nuniform vec3 lightPosition;\nuniform float range : 100;\nvarying vec3 v_WorldPosition;\n@import clay.util.encode_float\nvoid main(){\n float dist = distance(lightPosition, v_WorldPosition);\n#ifdef USE_VSM\n gl_FragColor = vec4(dist, dist * dist, 0.0, 0.0);\n#else\n dist = dist / range;\n gl_FragColor = encodeFloat(dist);\n#endif\n}\n@end\n@export clay.plugin.shadow_map_common\n@import clay.util.decode_float\nfloat tapShadowMap(sampler2D map, vec2 uv, float z){\n vec4 tex = texture2D(map, uv);\n return step(z, decodeFloat(tex) * 2.0 - 1.0);\n}\nfloat pcf(sampler2D map, vec2 uv, float z, float textureSize, vec2 scale) {\n float shadowContrib = tapShadowMap(map, uv, z);\n vec2 offset = vec2(1.0 / textureSize) * scale;\n#ifdef PCF_KERNEL_SIZE\n for (int _idx_ = 0; _idx_ < PCF_KERNEL_SIZE; _idx_++) {{\n shadowContrib += tapShadowMap(map, uv + offset * pcfKernel[_idx_], z);\n }}\n return shadowContrib / float(PCF_KERNEL_SIZE + 1);\n#else\n shadowContrib += tapShadowMap(map, uv+vec2(offset.x, 0.0), z);\n shadowContrib += tapShadowMap(map, uv+vec2(offset.x, offset.y), z);\n shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, offset.y), z);\n shadowContrib += tapShadowMap(map, uv+vec2(0.0, offset.y), z);\n shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, 0.0), z);\n shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, -offset.y), z);\n shadowContrib += tapShadowMap(map, uv+vec2(offset.x, -offset.y), z);\n shadowContrib += tapShadowMap(map, uv+vec2(0.0, -offset.y), z);\n return shadowContrib / 9.0;\n#endif\n}\nfloat pcf(sampler2D map, vec2 uv, float z, float textureSize) {\n return pcf(map, uv, z, textureSize, vec2(1.0));\n}\nfloat chebyshevUpperBound(vec2 moments, float z){\n float p = 0.0;\n z = z * 0.5 + 0.5;\n if (z <= moments.x) {\n p = 1.0;\n }\n float variance = moments.y - moments.x * moments.x;\n variance = max(variance, 0.0000001);\n float mD = moments.x - z;\n float pMax = variance / (variance + mD * mD);\n pMax = clamp((pMax-0.4)/(1.0-0.4), 0.0, 1.0);\n return max(p, pMax);\n}\nfloat computeShadowContrib(\n sampler2D map, mat4 lightVPM, vec3 position, float textureSize, vec2 scale, vec2 offset\n) {\n vec4 posInLightSpace = lightVPM * vec4(position, 1.0);\n posInLightSpace.xyz /= posInLightSpace.w;\n float z = posInLightSpace.z;\n if(all(greaterThan(posInLightSpace.xyz, vec3(-0.99, -0.99, -1.0))) &&\n all(lessThan(posInLightSpace.xyz, vec3(0.99, 0.99, 1.0)))){\n vec2 uv = (posInLightSpace.xy+1.0) / 2.0;\n #ifdef USE_VSM\n vec2 moments = texture2D(map, uv * scale + offset).xy;\n return chebyshevUpperBound(moments, z);\n #else\n return pcf(map, uv * scale + offset, z, textureSize, scale);\n #endif\n }\n return 1.0;\n}\nfloat computeShadowContrib(sampler2D map, mat4 lightVPM, vec3 position, float textureSize) {\n return computeShadowContrib(map, lightVPM, position, textureSize, vec2(1.0), vec2(0.0));\n}\nfloat computeShadowContribOmni(samplerCube map, vec3 direction, float range)\n{\n float dist = length(direction);\n vec4 shadowTex = textureCube(map, direction);\n#ifdef USE_VSM\n vec2 moments = shadowTex.xy;\n float variance = moments.y - moments.x * moments.x;\n float mD = moments.x - dist;\n float p = variance / (variance + mD * mD);\n if(moments.x + 0.001 < dist){\n return clamp(p, 0.0, 1.0);\n }else{\n return 1.0;\n }\n#else\n return step(dist, (decodeFloat(shadowTex) + 0.0002) * range);\n#endif\n}\n@end\n@export clay.plugin.compute_shadow_map\n#if defined(SPOT_LIGHT_SHADOWMAP_COUNT) || defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT) || defined(POINT_LIGHT_SHADOWMAP_COUNT)\n#ifdef SPOT_LIGHT_SHADOWMAP_COUNT\nuniform sampler2D spotLightShadowMaps[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\nuniform mat4 spotLightMatrices[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\nuniform float spotLightShadowMapSizes[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\n#endif\n#ifdef DIRECTIONAL_LIGHT_SHADOWMAP_COUNT\n#if defined(SHADOW_CASCADE)\nuniform sampler2D directionalLightShadowMaps[1]:unconfigurable;\nuniform mat4 directionalLightMatrices[SHADOW_CASCADE]:unconfigurable;\nuniform float directionalLightShadowMapSizes[1]:unconfigurable;\nuniform float shadowCascadeClipsNear[SHADOW_CASCADE]:unconfigurable;\nuniform float shadowCascadeClipsFar[SHADOW_CASCADE]:unconfigurable;\n#else\nuniform sampler2D directionalLightShadowMaps[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\nuniform mat4 directionalLightMatrices[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\nuniform float directionalLightShadowMapSizes[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\n#endif\n#endif\n#ifdef POINT_LIGHT_SHADOWMAP_COUNT\nuniform samplerCube pointLightShadowMaps[POINT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\n#endif\nuniform bool shadowEnabled : true;\n#ifdef PCF_KERNEL_SIZE\nuniform vec2 pcfKernel[PCF_KERNEL_SIZE];\n#endif\n@import clay.plugin.shadow_map_common\n#if defined(SPOT_LIGHT_SHADOWMAP_COUNT)\nvoid computeShadowOfSpotLights(vec3 position, inout float shadowContribs[SPOT_LIGHT_COUNT] ) {\n float shadowContrib;\n for(int _idx_ = 0; _idx_ < SPOT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{\n shadowContrib = computeShadowContrib(\n spotLightShadowMaps[_idx_], spotLightMatrices[_idx_], position,\n spotLightShadowMapSizes[_idx_]\n );\n shadowContribs[_idx_] = shadowContrib;\n }}\n for(int _idx_ = SPOT_LIGHT_SHADOWMAP_COUNT; _idx_ < SPOT_LIGHT_COUNT; _idx_++){{\n shadowContribs[_idx_] = 1.0;\n }}\n}\n#endif\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n#ifdef SHADOW_CASCADE\nvoid computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){\n float depth = (2.0 * gl_FragCoord.z - gl_DepthRange.near - gl_DepthRange.far)\n / (gl_DepthRange.far - gl_DepthRange.near);\n float shadowContrib;\n shadowContribs[0] = 1.0;\n for (int _idx_ = 0; _idx_ < SHADOW_CASCADE; _idx_++) {{\n if (\n depth >= shadowCascadeClipsNear[_idx_] &&\n depth <= shadowCascadeClipsFar[_idx_]\n ) {\n shadowContrib = computeShadowContrib(\n directionalLightShadowMaps[0], directionalLightMatrices[_idx_], position,\n directionalLightShadowMapSizes[0],\n vec2(1.0 / float(SHADOW_CASCADE), 1.0),\n vec2(float(_idx_) / float(SHADOW_CASCADE), 0.0)\n );\n shadowContribs[0] = shadowContrib;\n }\n }}\n for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{\n shadowContribs[_idx_] = 1.0;\n }}\n}\n#else\nvoid computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){\n float shadowContrib;\n for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_++) {{\n shadowContrib = computeShadowContrib(\n directionalLightShadowMaps[_idx_], directionalLightMatrices[_idx_], position,\n directionalLightShadowMapSizes[_idx_]\n );\n shadowContribs[_idx_] = shadowContrib;\n }}\n for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{\n shadowContribs[_idx_] = 1.0;\n }}\n}\n#endif\n#endif\n#if defined(POINT_LIGHT_SHADOWMAP_COUNT)\nvoid computeShadowOfPointLights(vec3 position, inout float shadowContribs[POINT_LIGHT_COUNT] ){\n vec3 lightPosition;\n vec3 direction;\n for(int _idx_ = 0; _idx_ < POINT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{\n lightPosition = pointLightPosition[_idx_];\n direction = position - lightPosition;\n shadowContribs[_idx_] = computeShadowContribOmni(pointLightShadowMaps[_idx_], direction, pointLightRange[_idx_]);\n }}\n for(int _idx_ = POINT_LIGHT_SHADOWMAP_COUNT; _idx_ < POINT_LIGHT_COUNT; _idx_++) {{\n shadowContribs[_idx_] = 1.0;\n }}\n}\n#endif\n#endif\n@end");var qc=Us.extend(function(){return{softShadow:qc.PCF,shadowBlur:1,lightFrustumBias:"auto",kernelPCF:new Float32Array([1,0,1,1,-1,1,0,1,-1,0,-1,-1,1,-1,0,-1]),precision:"highp",_lastRenderNotCastShadow:!1,_frameBuffer:new Ko,_textures:{},_shadowMapNumber:{POINT_LIGHT:0,DIRECTIONAL_LIGHT:0,SPOT_LIGHT:0},_depthMaterials:{},_distanceMaterials:{},_receivers:[],_lightsCastShadow:[],_lightCameras:{},_lightMaterials:{},_texturePool:new $8}},function(){this._gaussianPassH=new so({fragment:Gn.source("clay.compositor.gaussian_blur")}),this._gaussianPassV=new so({fragment:Gn.source("clay.compositor.gaussian_blur")}),this._gaussianPassH.setUniform("blurSize",this.shadowBlur),this._gaussianPassH.setUniform("blurDir",0),this._gaussianPassV.setUniform("blurSize",this.shadowBlur),this._gaussianPassV.setUniform("blurDir",1),this._outputDepthPass=new so({fragment:Gn.source("clay.sm.debug_depth")})},{render:function(e,n,t,r){t||(t=n.getMainCamera()),this.trigger("beforerender",this,e,n,t),this._renderShadowPass(e,n,t,r),this.trigger("afterrender",this,e,n,t)},renderDebug:function(e,n){e.saveClear();var t=e.viewport,r=0,s=n||t.width/4,d=s;for(var p in this.softShadow===qc.VSM?this._outputDepthPass.material.define("fragment","USE_VSM"):this._outputDepthPass.material.undefine("fragment","USE_VSM"),this._textures){var v=this._textures[p];e.setViewport(r,0,s*v.width/v.height,d),this._outputDepthPass.setUniform("depthMap",v),this._outputDepthPass.render(e),r+=s*v.width/v.height}e.setViewport(t),e.restoreClear()},_updateReceivers:function(e,n){if(n.receiveShadow?(this._receivers.push(n),n.material.set("shadowEnabled",1),n.material.set("pcfKernel",this.kernelPCF)):n.material.set("shadowEnabled",0),this.softShadow===qc.VSM)n.material.define("fragment","USE_VSM"),n.material.undefine("fragment","PCF_KERNEL_SIZE");else{n.material.undefine("fragment","USE_VSM");var t=this.kernelPCF;t&&t.length?n.material.define("fragment","PCF_KERNEL_SIZE",t.length/2):n.material.undefine("fragment","PCF_KERNEL_SIZE")}},_update:function(e,n){var t=this;n.traverse(function(s){s.isRenderable()&&t._updateReceivers(e,s)});for(var r=0;r<n.lights.length;r++){var i=n.lights[r];i.castShadow&&!i.invisible&&this._lightsCastShadow.push(i)}},_renderShadowPass:function(e,n,t,r){for(var i in this._shadowMapNumber)this._shadowMapNumber[i]=0;this._lightsCastShadow.length=0,this._receivers.length=0;var s=e.gl;if(r||n.update(),t&&t.update(),n.updateLights(),this._update(e,n),this._lightsCastShadow.length||!this._lastRenderNotCastShadow){this._lastRenderNotCastShadow=0===this._lightsCastShadow,s.enable(s.DEPTH_TEST),s.depthMask(!0),s.disable(s.BLEND),s.clearColor(1,1,1,1);for(var k,d=[],p=[],v=[],_=[],C=[],S=[],H=0;H<this._lightsCastShadow.length;H++){var ne=this._lightsCastShadow[H];if("DIRECTIONAL_LIGHT"===ne.type){if(k){console.warn("Only one direectional light supported with shadow cascade");continue}if(ne.shadowCascade>4){console.warn("Support at most 4 cascade");continue}ne.shadowCascade>1&&(k=ne),this.renderDirectionalLightShadow(e,n,t,ne,C,_,v)}else"SPOT_LIGHT"===ne.type?this.renderSpotLightShadow(e,n,ne,p,d):"POINT_LIGHT"===ne.type&&this.renderPointLightShadow(e,n,ne,S);this._shadowMapNumber[ne.type]++}for(var pe in this._shadowMapNumber){var Me=this._shadowMapNumber[pe],Re=pe+"_SHADOWMAP_COUNT";for(H=0;H<this._receivers.length;H++)(Oe=this._receivers[H].material).fragmentDefines[Re]!==Me&&(Me>0?Oe.define("fragment",Re,Me):Oe.isDefined("fragment",Re)&&Oe.undefine("fragment",Re))}for(H=0;H<this._receivers.length;H++){var Oe=this._receivers[H].material;k?Oe.define("fragment","SHADOW_CASCADE",k.shadowCascade):Oe.undefine("fragment","SHADOW_CASCADE")}var Be=n.shadowUniforms;if(v.length>0){var rt=v.map(nt);if(Be.directionalLightShadowMaps={value:v,type:"tv"},Be.directionalLightMatrices={value:_,type:"m4v"},Be.directionalLightShadowMapSizes={value:rt,type:"1fv"},k){var Ct=C.slice(),mt=C.slice();Ct.pop(),mt.shift(),Ct.reverse(),mt.reverse(),_.reverse(),Be.shadowCascadeClipsNear={value:Ct,type:"1fv"},Be.shadowCascadeClipsFar={value:mt,type:"1fv"}}}if(d.length>0){var Ft=d.map(nt);(Be=n.shadowUniforms).spotLightShadowMaps={value:d,type:"tv"},Be.spotLightMatrices={value:p,type:"m4v"},Be.spotLightShadowMapSizes={value:Ft,type:"1fv"}}S.length>0&&(Be.pointLightShadowMaps={value:S,type:"tv"})}function nt(nn){return nn.height}},renderDirectionalLightShadow:function(){var e=new c3,n=new tr,t=new Ws,r=new tr,i=new tr,s=new tr,d=new tr;return function(p,v,_,C,S,k,H){var ne=this._getDepthMaterial(C),pe={getMaterial:function(gi){return gi.shadowDepthMaterial||ne},isMaterialChanged:K8,getUniform:P3,ifRender:function(gi){return gi.castShadow},sortCompare:jC.opaqueSortCompare};if(!v.viewBoundingBoxLastFrame.isFinite()){var Me=v.getBoundingBox();v.viewBoundingBoxLastFrame.copy(Me).applyTransform(_.viewMatrix)}var Re=Math.min(-v.viewBoundingBoxLastFrame.min.z,_.far),Fe=Math.max(-v.viewBoundingBoxLastFrame.max.z,_.near),Oe=this._getDirectionalLightCamera(C,v,_),Be=s.array;d.copy(Oe.projectionMatrix),Tn.invert(i.array,Oe.worldTransform.array),Tn.multiply(i.array,i.array,_.worldTransform.array),Tn.multiply(Be,d.array,i.array);for(var nt=[],rt=_ instanceof No,Ct=(_.near+_.far)/(_.near-_.far),mt=2*_.near*_.far/(_.near-_.far),Ft=0;Ft<=C.shadowCascade;Ft++){var pn=Fe*Math.pow(Re/Fe,Ft/C.shadowCascade)*C.cascadeSplitLogFactor+(Fe+(Re-Fe)*Ft/C.shadowCascade)*(1-C.cascadeSplitLogFactor);nt.push(pn),S.push(-(-pn*Ct+mt)/-pn)}var mn=this._getTexture(C,C.shadowCascade);H.push(mn);var on=p.viewport,Cn=p.gl;for(this._frameBuffer.attach(mn),this._frameBuffer.bind(p),Cn.clear(Cn.COLOR_BUFFER_BIT|Cn.DEPTH_BUFFER_BIT),Ft=0;Ft<C.shadowCascade;Ft++){var Ht=nt[Ft],ln=nt[Ft+1];rt?Tn.perspective(n.array,_.fov/180*Math.PI,_.aspect,Ht,ln):Tn.ortho(n.array,_.left,_.right,_.bottom,_.top,Ht,ln),e.setFromProjection(n),e.getTransformedBoundingBox(t,i),t.applyProjection(d);var Zt=t.min.array,Zn=t.max.array;Zt[0]=Math.max(Zt[0],-1),Zt[1]=Math.max(Zt[1],-1),Zn[0]=Math.min(Zn[0],1),Zn[1]=Math.min(Zn[1],1),r.ortho(Zt[0],Zn[0],Zt[1],Zn[1],1,-1),Oe.projectionMatrix.multiplyLeft(r);var An=C.shadowResolution||512;p.setViewport((C.shadowCascade-Ft-1)*An,0,An,An,1);var ri=v.updateRenderList(Oe);p.renderPass(ri.opaque,Oe,pe),this.softShadow===qc.VSM&&this._gaussianFilter(p,mn,mn.width);var kr=new tr;kr.copy(Oe.viewMatrix).multiplyLeft(Oe.projectionMatrix),k.push(kr.array),Oe.projectionMatrix.copy(d)}this._frameBuffer.unbind(p),p.setViewport(on)}}(),renderSpotLightShadow:function(e,n,t,r,i){var s=this._getTexture(t),d=this._getSpotLightCamera(t),p=e.gl;this._frameBuffer.attach(s),this._frameBuffer.bind(e),p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT);var v=this._getDepthMaterial(t),_={getMaterial:function(k){return k.shadowDepthMaterial||v},isMaterialChanged:K8,getUniform:P3,ifRender:function(k){return k.castShadow},sortCompare:jC.opaqueSortCompare},C=n.updateRenderList(d);e.renderPass(C.opaque,d,_),this._frameBuffer.unbind(e),this.softShadow===qc.VSM&&this._gaussianFilter(e,s,s.width);var S=new tr;S.copy(d.worldTransform).invert().multiplyLeft(d.projectionMatrix),i.push(s),r.push(S.array)},renderPointLightShadow:function(e,n,t,r){var i=this._getTexture(t),s=e.gl;r.push(i);var d=this._getDepthMaterial(t),p={getMaterial:function(Fe){return Fe.shadowDepthMaterial||d},getUniform:P3,sortCompare:jC.opaqueSortCompare},v={px:[],py:[],pz:[],nx:[],ny:[],nz:[]},_=new Ws,C=t.getWorldPosition().array,S=new Ws,k=t.range;S.min.setArray(C),S.max.setArray(C);var H=new Ln(k,k,k);S.max.add(H),S.min.sub(H);var ne={px:!1,py:!1,pz:!1,nx:!1,ny:!1,nz:!1};n.traverse(function(Fe){if(Fe.isRenderable()&&Fe.castShadow){var Oe=Fe.geometry;if(!Oe.boundingBox){for(var Be=0;Be<wf.length;Be++)v[wf[Be]].push(Fe);return}if(_.transformFrom(Oe.boundingBox,Fe.worldTransform),!_.intersectBoundingBox(S))return;for(_.updateVertices(),Be=0;Be<wf.length;Be++)ne[wf[Be]]=!1;for(Be=0;Be<8;Be++){var nt=_.vertices[Be],rt=nt[0]-C[0],Ct=nt[1]-C[1],mt=nt[2]-C[2],Ft=Math.abs(rt),nn=Math.abs(Ct),Xt=Math.abs(mt);Ft>nn?Ft>Xt?ne[rt>0?"px":"nx"]=!0:ne[mt>0?"pz":"nz"]=!0:nn>Xt?ne[Ct>0?"py":"ny"]=!0:ne[mt>0?"pz":"nz"]=!0}for(Be=0;Be<wf.length;Be++)ne[wf[Be]]&&v[wf[Be]].push(Fe)}});for(var pe=0;pe<6;pe++){var Me=wf[pe],Re=this._getPointLightCamera(t,Me);this._frameBuffer.attach(i,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+pe),this._frameBuffer.bind(e),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),e.renderPass(v[Me],Re,p)}this._frameBuffer.unbind(e)},_getDepthMaterial:function(e){var n=this._lightMaterials[e.__uid__],t="POINT_LIGHT"===e.type;if(!n){var r=t?"clay.sm.distance.":"clay.sm.depth.";n=new Eu({precision:this.precision,shader:new Gn(Gn.source(r+"vertex"),Gn.source(r+"fragment"))}),this._lightMaterials[e.__uid__]=n}return null!=e.shadowSlopeScale&&n.setUniform("slopeScale",e.shadowSlopeScale),null!=e.shadowBias&&n.setUniform("bias",e.shadowBias),this.softShadow===qc.VSM?n.define("fragment","USE_VSM"):n.undefine("fragment","USE_VSM"),t&&(n.set("lightPosition",e.getWorldPosition().array),n.set("range",e.range)),n},_gaussianFilter:function(e,n,t){var i=this._texturePool.get({width:t,height:t,type:dr.FLOAT});this._frameBuffer.attach(i),this._frameBuffer.bind(e),this._gaussianPassH.setUniform("texture",n),this._gaussianPassH.setUniform("textureWidth",t),this._gaussianPassH.render(e),this._frameBuffer.attach(n),this._gaussianPassV.setUniform("texture",i),this._gaussianPassV.setUniform("textureHeight",t),this._gaussianPassV.render(e),this._frameBuffer.unbind(e),this._texturePool.put(i)},_getTexture:function(e,n){var t=e.__uid__,r=this._textures[t],i=e.shadowResolution||512;return n=n||1,r||((r="POINT_LIGHT"===e.type?new $C:new $r).width=i*n,r.height=i,this.softShadow===qc.VSM?(r.type=dr.FLOAT,r.anisotropic=4):(r.minFilter=9728,r.magFilter=9728,r.useMipmap=!1),this._textures[t]=r),r},_getPointLightCamera:function(e,n){this._lightCameras.point||(this._lightCameras.point={px:new No,nx:new No,py:new No,ny:new No,pz:new No,nz:new No});var t=this._lightCameras.point[n];switch(t.far=e.range,t.fov=90,t.position.set(0,0,0),n){case"px":t.lookAt(Ln.POSITIVE_X,Ln.NEGATIVE_Y);break;case"nx":t.lookAt(Ln.NEGATIVE_X,Ln.NEGATIVE_Y);break;case"py":t.lookAt(Ln.POSITIVE_Y,Ln.POSITIVE_Z);break;case"ny":t.lookAt(Ln.NEGATIVE_Y,Ln.NEGATIVE_Z);break;case"pz":t.lookAt(Ln.POSITIVE_Z,Ln.NEGATIVE_Y);break;case"nz":t.lookAt(Ln.NEGATIVE_Z,Ln.NEGATIVE_Y)}return e.getWorldPosition(t.position),t.update(),t},_getDirectionalLightCamera:function(){var e=new tr,n=new Ws,t=new Ws;return function(r,i,s){this._lightCameras.directional||(this._lightCameras.directional=new By);var d=this._lightCameras.directional;n.copy(i.viewBoundingBoxLastFrame),n.intersection(s.frustum.boundingBox),d.position.copy(n.min).add(n.max).scale(.5).transformMat4(s.worldTransform),d.rotation.copy(r.rotation),d.scale.copy(r.scale),d.updateWorldTransform(),tr.invert(e,d.worldTransform),tr.multiply(e,e,s.worldTransform),t.copy(n).applyTransform(e);var p=t.min.array,v=t.max.array;return d.position.set((p[0]+v[0])/2,(p[1]+v[1])/2,v[2]).transformMat4(d.worldTransform),d.near=0,d.far=-p[2]+v[2],isNaN(this.lightFrustumBias)?d.far*=4:d.far+=this.lightFrustumBias,d.left=p[0],d.right=v[0],d.top=v[1],d.bottom=p[1],d.update(!0),d}}(),_getSpotLightCamera:function(e){this._lightCameras.spot||(this._lightCameras.spot=new No);var n=this._lightCameras.spot;return n.fov=2*e.penumbraAngle,n.far=e.range,n.worldTransform.copy(e.worldTransform),n.updateProjectionMatrix(),Tn.invert(n.viewMatrix.array,n.worldTransform.array),n},dispose:function(e){var n=e.gl||e;for(var t in this._frameBuffer&&this._frameBuffer.dispose(n),this._textures)this._textures[t].dispose(n);this._texturePool.clear(e.gl),this._depthMaterials={},this._distanceMaterials={},this._textures={},this._lightCameras={},this._shadowMapNumber={POINT_LIGHT:0,DIRECTIONAL_LIGHT:0,SPOT_LIGHT:0},this._meshMaterials={};for(var r=0;r<this._receivers.length;r++){var i=this._receivers[r];if(i.material){var s=i.material;s.undefine("fragment","POINT_LIGHT_SHADOW_COUNT"),s.undefine("fragment","DIRECTIONAL_LIGHT_SHADOW_COUNT"),s.undefine("fragment","AMBIENT_LIGHT_SHADOW_COUNT"),s.set("shadowEnabled",0)}}this._receivers=[],this._lightsCastShadow=[]}});qc.VSM=1,qc.PCF=2;const hre=qc;var fre=Us.extend(function(){return{name:"",inputLinks:{},outputLinks:{},_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}},{updateParameter:function(e,n){var d,p,t=this.outputs[e],r=t.parameters,i=t._parametersCopy;if(i||(i=t._parametersCopy={}),r)for(var s in r)"width"!==s&&"height"!==s&&(i[s]=r[s]);return d=r.width instanceof Function?r.width.call(this,n):r.width,p=r.height instanceof Function?r.height.call(this,n):r.height,(i.width!==d||i.height!==p)&&this._outputTextures[e]&&this._outputTextures[e].dispose(n.gl),i.width=d,i.height=p,i},setParameter:function(e,n){},getParameter:function(e){},setParameters:function(e){for(var n in e)this.setParameter(n,e[n])},render:function(){},getOutput:function(e,n){if(null==n)return this._outputTextures[n=e];var t=this.outputs[n];return t?this._rendered?t.outputLastFrame?this._prevOutputTextures[n]:this._outputTextures[n]:this._rendering?(this._prevOutputTextures[n]||(this._prevOutputTextures[n]=this._compositor.allocateTexture(t.parameters||{})),this._prevOutputTextures[n]):(this.render(e),this._outputTextures[n]):void 0},removeReference:function(e){this._outputReferences[e]--,0===this._outputReferences[e]&&(this.outputs[e].keepLastFrame?(this._prevOutputTextures[e]&&this._compositor.releaseTexture(this._prevOutputTextures[e]),this._prevOutputTextures[e]=this._outputTextures[e]):this._compositor.releaseTexture(this._outputTextures[e]))},link:function(e,n,t){this.inputLinks[e]={node:n,pin:t},n.outputLinks[t]||(n.outputLinks[t]=[]),n.outputLinks[t].push({node:this,pin:e}),this.pass.material.enableTexture(e)},clear:function(){this.inputLinks={},this.outputLinks={}},updateReference:function(e){if(!this._rendering){for(var n in this._rendering=!0,this.inputLinks){var t=this.inputLinks[n];t.node.updateReference(t.pin)}this._rendering=!1}e&&this._outputReferences[e]++},beforeFrame:function(){for(var e in this._rendered=!1,this.outputLinks)this._outputReferences[e]=0},afterFrame:function(){for(var e in this.outputLinks)this._outputReferences[e]>0&&(this.outputs[e].keepLastFrame?(this._prevOutputTextures[e]&&this._compositor.releaseTexture(this._prevOutputTextures[e]),this._prevOutputTextures[e]=this._outputTextures[e]):this._compositor.releaseTexture(this._outputTextures[e]))}});const rw=fre;var pre=Us.extend(function(){return{nodes:[]}},{dirty:function(){this._dirty=!0},addNode:function(e){this.nodes.indexOf(e)>=0||(this.nodes.push(e),this._dirty=!0)},removeNode:function(e){"string"==typeof e&&(e=this.getNodeByName(e));var n=this.nodes.indexOf(e);n>=0&&(this.nodes.splice(n,1),this._dirty=!0)},getNodeByName:function(e){for(var n=0;n<this.nodes.length;n++)if(this.nodes[n].name===e)return this.nodes[n]},update:function(){for(var e=0;e<this.nodes.length;e++)this.nodes[e].clear();for(e=0;e<this.nodes.length;e++){var n=this.nodes[e];if(n.inputs)for(var t in n.inputs)if(n.inputs[t]){if(n.pass&&!n.pass.material.isUniformEnabled(t)){console.warn("Pin "+n.name+"."+t+" not used.");continue}var r=n.inputs[t],i=this.findPin(r);i?n.link(t,i.node,i.pin):console.warn("string"==typeof r?"Node "+r+" not exist":"Pin of "+r.node+"."+r.pin+" not exist")}}},findPin:function(e){var n;if(("string"==typeof e||e instanceof rw)&&(e={node:e}),"string"==typeof e.node)for(var t=0;t<this.nodes.length;t++){var r=this.nodes[t];r.name===e.node&&(n=r)}else n=e.node;if(n){var i=e.pin;if(i||n.outputs&&(i=Object.keys(n.outputs)[0]),n.outputs[i])return{node:n,pin:i}}}});const Q8=pre;var vre=Q8.extend(function(){return{_outputs:[],_texturePool:new $8,_frameBuffer:new Ko({depthBuffer:!1})}},{addNode:function(e){Q8.prototype.addNode.call(this,e),e._compositor=this},render:function(e,n){if(this._dirty){this.update(),this._dirty=!1,this._outputs.length=0;for(var t=0;t<this.nodes.length;t++)this.nodes[t].outputs||this._outputs.push(this.nodes[t])}for(t=0;t<this.nodes.length;t++)this.nodes[t].beforeFrame();for(t=0;t<this._outputs.length;t++)this._outputs[t].updateReference();for(t=0;t<this._outputs.length;t++)this._outputs[t].render(e,n);for(t=0;t<this.nodes.length;t++)this.nodes[t].afterFrame()},allocateTexture:function(e){return this._texturePool.get(e)},releaseTexture:function(e){this._texturePool.put(e)},getFrameBuffer:function(){return this._frameBuffer},dispose:function(e){this._texturePool.clear(e)}});const gre=vre;var mre=rw.extend({name:"scene",scene:null,camera:null,autoUpdateScene:!0,preZ:!1},function(){this.frameBuffer=new Ko},{render:function(e){this._rendering=!0;var t,n=e.gl;if(this.trigger("beforerender"),this.outputs){var r=this.frameBuffer;for(var i in this.outputs){var s=this.updateParameter(i,e),d=this.outputs[i],p=this._compositor.allocateTexture(s);this._outputTextures[i]=p,"string"==typeof(v=d.attachment||n.COLOR_ATTACHMENT0)&&(v=n[v]),r.attach(p,v)}r.bind(e);var _=e.getGLExtension("EXT_draw_buffers");if(_){var C=[];for(var v in this.outputs)(v=parseInt(v))>=n.COLOR_ATTACHMENT0&&v<=n.COLOR_ATTACHMENT0+8&&C.push(v);_.drawBuffersEXT(C)}e.saveClear(),e.clearBit=16640,t=e.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ),e.restoreClear(),r.unbind(e)}else t=e.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ);this.trigger("afterrender",t),this._rendering=!1,this._rendered=!0}});const _re=mre,bre=rw.extend(function(){return{texture:null,outputs:{color:{}}}},function(){},{getOutput:function(e,n){return this.texture},beforeFrame:function(){},afterFrame:function(){}});var xre=rw.extend(function(){return{name:"",inputs:{},outputs:null,shader:"",inputLinks:{},outputLinks:{},pass:null,_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}},function(){var e=new so({fragment:this.shader});this.pass=e},{render:function(e,n){this.trigger("beforerender",e),this._rendering=!0;var t=e.gl;for(var r in this.inputLinks){var s=(i=this.inputLinks[r]).node.getOutput(e,i.pin);this.pass.setUniform(r,s)}if(this.outputs){this.pass.outputs={};var d={};for(var p in this.outputs){var v=this.updateParameter(p,e);isNaN(v.width)&&this.updateParameter(p,e);var _=this.outputs[p],C=this._compositor.allocateTexture(v);this._outputTextures[p]=C,"string"==typeof(S=_.attachment||t.COLOR_ATTACHMENT0)&&(S=t[S]),d[S]=C}for(var S in this._compositor.getFrameBuffer().bind(e),d)this._compositor.getFrameBuffer().attach(d[S],S);this.pass.render(e),this._compositor.getFrameBuffer().updateMipmap(e)}else this.pass.outputs=null,this._compositor.getFrameBuffer().unbind(e),this.pass.render(e,n);for(var r in this.inputLinks){var i;(i=this.inputLinks[r]).node.removeReference(i.pin)}this._rendering=!1,this._rendered=!0,this.trigger("afterrender",e)},updateParameter:function(e,n){var d,p,t=this.outputs[e],r=t.parameters,i=t._parametersCopy;if(i||(i=t._parametersCopy={}),r)for(var s in r)"width"!==s&&"height"!==s&&(i[s]=r[s]);return d="function"==typeof r.width?r.width.call(this,n):r.width,p="function"==typeof r.height?r.height.call(this,n):r.height,d=Math.ceil(d),p=Math.ceil(p),(i.width!==d||i.height!==p)&&this._outputTextures[e]&&this._outputTextures[e].dispose(n),i.width=d,i.height=p,i},setParameter:function(e,n){this.pass.setUniform(e,n)},getParameter:function(e){return this.pass.getUniform(e)},setParameters:function(e){for(var n in e)this.setParameter(n,e[n])},define:function(e,n){this.pass.material.define("fragment",e,n)},undefine:function(e){this.pass.material.undefine("fragment",e)},removeReference:function(e){this._outputReferences[e]--,0===this._outputReferences[e]&&(this.outputs[e].keepLastFrame?(this._prevOutputTextures[e]&&this._compositor.releaseTexture(this._prevOutputTextures[e]),this._prevOutputTextures[e]=this._outputTextures[e]):this._compositor.releaseTexture(this._outputTextures[e]))},clear:function(){rw.prototype.clear.call(this),this.pass.material.disableTexturesAll()}});const Cre=xre,q8="@export clay.compositor.kernel.gaussian_9\nfloat gaussianKernel[9];\ngaussianKernel[0] = 0.07;\ngaussianKernel[1] = 0.09;\ngaussianKernel[2] = 0.12;\ngaussianKernel[3] = 0.14;\ngaussianKernel[4] = 0.16;\ngaussianKernel[5] = 0.14;\ngaussianKernel[6] = 0.12;\ngaussianKernel[7] = 0.09;\ngaussianKernel[8] = 0.07;\n@end\n@export clay.compositor.kernel.gaussian_13\nfloat gaussianKernel[13];\ngaussianKernel[0] = 0.02;\ngaussianKernel[1] = 0.03;\ngaussianKernel[2] = 0.06;\ngaussianKernel[3] = 0.08;\ngaussianKernel[4] = 0.11;\ngaussianKernel[5] = 0.13;\ngaussianKernel[6] = 0.14;\ngaussianKernel[7] = 0.13;\ngaussianKernel[8] = 0.11;\ngaussianKernel[9] = 0.08;\ngaussianKernel[10] = 0.06;\ngaussianKernel[11] = 0.03;\ngaussianKernel[12] = 0.02;\n@end\n@export clay.compositor.gaussian_blur\n#define SHADER_NAME gaussian_blur\nuniform sampler2D texture;varying vec2 v_Texcoord;\nuniform float blurSize : 2.0;\nuniform vec2 textureSize : [512.0, 512.0];\nuniform float blurDir : 0.0;\n@import clay.util.rgbm\n@import clay.util.clamp_sample\nvoid main (void)\n{\n @import clay.compositor.kernel.gaussian_9\n vec2 off = blurSize / textureSize;\n off *= vec2(1.0 - blurDir, blurDir);\n vec4 sum = vec4(0.0);\n float weightAll = 0.0;\n for (int i = 0; i < 9; i++) {\n float w = gaussianKernel[i];\n vec4 texel = decodeHDR(clampSample(texture, v_Texcoord + float(i - 4) * off));\n sum += texel * w;\n weightAll += w;\n }\n gl_FragColor = encodeHDR(sum / max(weightAll, 0.01));\n}\n@end\n",J8="\n@export clay.compositor.lut\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform sampler2D lookup;\nvoid main()\n{\n vec4 tex = texture2D(texture, v_Texcoord);\n float blueColor = tex.b * 63.0;\n vec2 quad1;\n quad1.y = floor(floor(blueColor) / 8.0);\n quad1.x = floor(blueColor) - (quad1.y * 8.0);\n vec2 quad2;\n quad2.y = floor(ceil(blueColor) / 8.0);\n quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n vec2 texPos1;\n texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);\n texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);\n vec2 texPos2;\n texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);\n texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);\n vec4 newColor1 = texture2D(lookup, texPos1);\n vec4 newColor2 = texture2D(lookup, texPos2);\n vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n gl_FragColor = vec4(newColor.rgb, tex.w);\n}\n@end",e6="@export clay.compositor.output\n#define OUTPUT_ALPHA\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\n@import clay.util.rgbm\nvoid main()\n{\n vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));\n gl_FragColor.rgb = tex.rgb;\n#ifdef OUTPUT_ALPHA\n gl_FragColor.a = tex.a;\n#else\n gl_FragColor.a = 1.0;\n#endif\n gl_FragColor = encodeHDR(gl_FragColor);\n#ifdef PREMULTIPLY_ALPHA\n gl_FragColor.rgb *= gl_FragColor.a;\n#endif\n}\n@end",t6="@export clay.compositor.bright\nuniform sampler2D texture;\nuniform float threshold : 1;\nuniform float scale : 1.0;\nuniform vec2 textureSize: [512, 512];\nvarying vec2 v_Texcoord;\nconst vec3 lumWeight = vec3(0.2125, 0.7154, 0.0721);\n@import clay.util.rgbm\nvec4 median(vec4 a, vec4 b, vec4 c)\n{\n return a + b + c - min(min(a, b), c) - max(max(a, b), c);\n}\nvoid main()\n{\n vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));\n#ifdef ANTI_FLICKER\n vec3 d = 1.0 / textureSize.xyx * vec3(1.0, 1.0, 0.0);\n vec4 s1 = decodeHDR(texture2D(texture, v_Texcoord - d.xz));\n vec4 s2 = decodeHDR(texture2D(texture, v_Texcoord + d.xz));\n vec4 s3 = decodeHDR(texture2D(texture, v_Texcoord - d.zy));\n vec4 s4 = decodeHDR(texture2D(texture, v_Texcoord + d.zy));\n texel = median(median(texel, s1, s2), s3, s4);\n#endif\n float lum = dot(texel.rgb , lumWeight);\n vec4 color;\n if (lum > threshold && texel.a > 0.0)\n {\n color = vec4(texel.rgb * scale, texel.a * scale);\n }\n else\n {\n color = vec4(0.0);\n }\n gl_FragColor = encodeHDR(color);\n}\n@end\n",n6="@export clay.compositor.downsample\nuniform sampler2D texture;\nuniform vec2 textureSize : [512, 512];\nvarying vec2 v_Texcoord;\n@import clay.util.rgbm\nfloat brightness(vec3 c)\n{\n return max(max(c.r, c.g), c.b);\n}\n@import clay.util.clamp_sample\nvoid main()\n{\n vec4 d = vec4(-1.0, -1.0, 1.0, 1.0) / textureSize.xyxy;\n#ifdef ANTI_FLICKER\n vec3 s1 = decodeHDR(clampSample(texture, v_Texcoord + d.xy)).rgb;\n vec3 s2 = decodeHDR(clampSample(texture, v_Texcoord + d.zy)).rgb;\n vec3 s3 = decodeHDR(clampSample(texture, v_Texcoord + d.xw)).rgb;\n vec3 s4 = decodeHDR(clampSample(texture, v_Texcoord + d.zw)).rgb;\n float s1w = 1.0 / (brightness(s1) + 1.0);\n float s2w = 1.0 / (brightness(s2) + 1.0);\n float s3w = 1.0 / (brightness(s3) + 1.0);\n float s4w = 1.0 / (brightness(s4) + 1.0);\n float oneDivideSum = 1.0 / (s1w + s2w + s3w + s4w);\n vec4 color = vec4(\n (s1 * s1w + s2 * s2w + s3 * s3w + s4 * s4w) * oneDivideSum,\n 1.0\n );\n#else\n vec4 color = decodeHDR(clampSample(texture, v_Texcoord + d.xy));\n color += decodeHDR(clampSample(texture, v_Texcoord + d.zy));\n color += decodeHDR(clampSample(texture, v_Texcoord + d.xw));\n color += decodeHDR(clampSample(texture, v_Texcoord + d.zw));\n color *= 0.25;\n#endif\n gl_FragColor = encodeHDR(color);\n}\n@end",r6="\n@export clay.compositor.upsample\n#define HIGH_QUALITY\nuniform sampler2D texture;\nuniform vec2 textureSize : [512, 512];\nuniform float sampleScale: 0.5;\nvarying vec2 v_Texcoord;\n@import clay.util.rgbm\n@import clay.util.clamp_sample\nvoid main()\n{\n#ifdef HIGH_QUALITY\n vec4 d = vec4(1.0, 1.0, -1.0, 0.0) / textureSize.xyxy * sampleScale;\n vec4 s;\n s = decodeHDR(clampSample(texture, v_Texcoord - d.xy));\n s += decodeHDR(clampSample(texture, v_Texcoord - d.wy)) * 2.0;\n s += decodeHDR(clampSample(texture, v_Texcoord - d.zy));\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zw)) * 2.0;\n s += decodeHDR(clampSample(texture, v_Texcoord )) * 4.0;\n s += decodeHDR(clampSample(texture, v_Texcoord + d.xw)) * 2.0;\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));\n s += decodeHDR(clampSample(texture, v_Texcoord + d.wy)) * 2.0;\n s += decodeHDR(clampSample(texture, v_Texcoord + d.xy));\n gl_FragColor = encodeHDR(s / 16.0);\n#else\n vec4 d = vec4(-1.0, -1.0, +1.0, +1.0) / textureSize.xyxy;\n vec4 s;\n s = decodeHDR(clampSample(texture, v_Texcoord + d.xy));\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));\n s += decodeHDR(clampSample(texture, v_Texcoord + d.xw));\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zw));\n gl_FragColor = encodeHDR(s / 4.0);\n#endif\n}\n@end",a6="@export clay.compositor.hdr.composite\n#define TONEMAPPING\nuniform sampler2D texture;\n#ifdef BLOOM_ENABLED\nuniform sampler2D bloom;\n#endif\n#ifdef LENSFLARE_ENABLED\nuniform sampler2D lensflare;\nuniform sampler2D lensdirt;\n#endif\n#ifdef LUM_ENABLED\nuniform sampler2D lum;\n#endif\n#ifdef LUT_ENABLED\nuniform sampler2D lut;\n#endif\n#ifdef COLOR_CORRECTION\nuniform float brightness : 0.0;\nuniform float contrast : 1.0;\nuniform float saturation : 1.0;\n#endif\n#ifdef VIGNETTE\nuniform float vignetteDarkness: 1.0;\nuniform float vignetteOffset: 1.0;\n#endif\nuniform float exposure : 1.0;\nuniform float bloomIntensity : 0.25;\nuniform float lensflareIntensity : 1;\nvarying vec2 v_Texcoord;\n@import clay.util.srgb\nvec3 ACESToneMapping(vec3 color)\n{\n const float A = 2.51;\n const float B = 0.03;\n const float C = 2.43;\n const float D = 0.59;\n const float E = 0.14;\n return (color * (A * color + B)) / (color * (C * color + D) + E);\n}\nfloat eyeAdaption(float fLum)\n{\n return mix(0.2, fLum, 0.5);\n}\n#ifdef LUT_ENABLED\nvec3 lutTransform(vec3 color) {\n float blueColor = color.b * 63.0;\n vec2 quad1;\n quad1.y = floor(floor(blueColor) / 8.0);\n quad1.x = floor(blueColor) - (quad1.y * 8.0);\n vec2 quad2;\n quad2.y = floor(ceil(blueColor) / 8.0);\n quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n vec2 texPos1;\n texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);\n texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);\n vec2 texPos2;\n texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);\n texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);\n vec4 newColor1 = texture2D(lut, texPos1);\n vec4 newColor2 = texture2D(lut, texPos2);\n vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n return newColor.rgb;\n}\n#endif\n@import clay.util.rgbm\nvoid main()\n{\n vec4 texel = vec4(0.0);\n vec4 originalTexel = vec4(0.0);\n#ifdef TEXTURE_ENABLED\n texel = decodeHDR(texture2D(texture, v_Texcoord));\n originalTexel = texel;\n#endif\n#ifdef BLOOM_ENABLED\n vec4 bloomTexel = decodeHDR(texture2D(bloom, v_Texcoord));\n texel.rgb += bloomTexel.rgb * bloomIntensity;\n texel.a += bloomTexel.a * bloomIntensity;\n#endif\n#ifdef LENSFLARE_ENABLED\n texel += decodeHDR(texture2D(lensflare, v_Texcoord)) * texture2D(lensdirt, v_Texcoord) * lensflareIntensity;\n#endif\n texel.a = min(texel.a, 1.0);\n#ifdef LUM_ENABLED\n float fLum = texture2D(lum, vec2(0.5, 0.5)).r;\n float adaptedLumDest = 3.0 / (max(0.1, 1.0 + 10.0*eyeAdaption(fLum)));\n float exposureBias = adaptedLumDest * exposure;\n#else\n float exposureBias = exposure;\n#endif\n#ifdef TONEMAPPING\n texel.rgb *= exposureBias;\n texel.rgb = ACESToneMapping(texel.rgb);\n#endif\n texel = linearTosRGB(texel);\n#ifdef LUT_ENABLED\n texel.rgb = lutTransform(clamp(texel.rgb,vec3(0.0),vec3(1.0)));\n#endif\n#ifdef COLOR_CORRECTION\n texel.rgb = clamp(texel.rgb + vec3(brightness), 0.0, 1.0);\n texel.rgb = clamp((texel.rgb - vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);\n float lum = dot(texel.rgb, vec3(0.2125, 0.7154, 0.0721));\n texel.rgb = mix(vec3(lum), texel.rgb, saturation);\n#endif\n#ifdef VIGNETTE\n vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(vignetteOffset);\n texel.rgb = mix(texel.rgb, vec3(1.0 - vignetteDarkness), dot(uv, uv));\n#endif\n gl_FragColor = encodeHDR(texel);\n#ifdef DEBUG\n #if DEBUG == 1\n gl_FragColor = encodeHDR(decodeHDR(texture2D(texture, v_Texcoord)));\n #elif DEBUG == 2\n gl_FragColor = encodeHDR(decodeHDR(texture2D(bloom, v_Texcoord)) * bloomIntensity);\n #elif DEBUG == 3\n gl_FragColor = encodeHDR(decodeHDR(texture2D(lensflare, v_Texcoord) * lensflareIntensity));\n #endif\n#endif\n if (originalTexel.a <= 0.01 && gl_FragColor.a > 1e-5) {\n gl_FragColor.a = dot(gl_FragColor.rgb, vec3(0.2125, 0.7154, 0.0721));\n }\n#ifdef PREMULTIPLY_ALPHA\n gl_FragColor.rgb *= gl_FragColor.a;\n#endif\n}\n@end",o6="@export clay.compositor.blend\n#define SHADER_NAME blend\n#ifdef TEXTURE1_ENABLED\nuniform sampler2D texture1;\nuniform float weight1 : 1.0;\n#endif\n#ifdef TEXTURE2_ENABLED\nuniform sampler2D texture2;\nuniform float weight2 : 1.0;\n#endif\n#ifdef TEXTURE3_ENABLED\nuniform sampler2D texture3;\nuniform float weight3 : 1.0;\n#endif\n#ifdef TEXTURE4_ENABLED\nuniform sampler2D texture4;\nuniform float weight4 : 1.0;\n#endif\n#ifdef TEXTURE5_ENABLED\nuniform sampler2D texture5;\nuniform float weight5 : 1.0;\n#endif\n#ifdef TEXTURE6_ENABLED\nuniform sampler2D texture6;\nuniform float weight6 : 1.0;\n#endif\nvarying vec2 v_Texcoord;\n@import clay.util.rgbm\nvoid main()\n{\n vec4 tex = vec4(0.0);\n#ifdef TEXTURE1_ENABLED\n tex += decodeHDR(texture2D(texture1, v_Texcoord)) * weight1;\n#endif\n#ifdef TEXTURE2_ENABLED\n tex += decodeHDR(texture2D(texture2, v_Texcoord)) * weight2;\n#endif\n#ifdef TEXTURE3_ENABLED\n tex += decodeHDR(texture2D(texture3, v_Texcoord)) * weight3;\n#endif\n#ifdef TEXTURE4_ENABLED\n tex += decodeHDR(texture2D(texture4, v_Texcoord)) * weight4;\n#endif\n#ifdef TEXTURE5_ENABLED\n tex += decodeHDR(texture2D(texture5, v_Texcoord)) * weight5;\n#endif\n#ifdef TEXTURE6_ENABLED\n tex += decodeHDR(texture2D(texture6, v_Texcoord)) * weight6;\n#endif\n gl_FragColor = encodeHDR(tex);\n}\n@end",s6="@export clay.compositor.fxaa\nuniform sampler2D texture;\nuniform vec4 viewport : VIEWPORT;\nvarying vec2 v_Texcoord;\n#define FXAA_REDUCE_MIN (1.0/128.0)\n#define FXAA_REDUCE_MUL (1.0/8.0)\n#define FXAA_SPAN_MAX 8.0\n@import clay.util.rgbm\nvoid main()\n{\n vec2 resolution = 1.0 / viewport.zw;\n vec3 rgbNW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ) ).xyz;\n vec3 rgbNE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ) ).xyz;\n vec3 rgbSW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ) ).xyz;\n vec3 rgbSE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ) ).xyz;\n vec4 rgbaM = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution ) );\n vec3 rgbM = rgbaM.xyz;\n float opacity = rgbaM.w;\n vec3 luma = vec3( 0.299, 0.587, 0.114 );\n float lumaNW = dot( rgbNW, luma );\n float lumaNE = dot( rgbNE, luma );\n float lumaSW = dot( rgbSW, luma );\n float lumaSE = dot( rgbSE, luma );\n float lumaM = dot( rgbM, luma );\n float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );\n float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );\n vec2 dir;\n dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n dir.y = ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );\n float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );\n dir = min( vec2( FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n dir * rcpDirMin)) * resolution;\n vec3 rgbA = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 1.0 / 3.0 - 0.5 ) ) ).xyz;\n rgbA += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 2.0 / 3.0 - 0.5 ) ) ).xyz;\n rgbA *= 0.5;\n vec3 rgbB = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * -0.5 ) ).xyz;\n rgbB += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * 0.5 ) ).xyz;\n rgbB *= 0.25;\n rgbB += rgbA * 0.5;\n float lumaB = dot( rgbB, luma );\n if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) )\n {\n gl_FragColor = vec4( rgbA, opacity );\n }\n else {\n gl_FragColor = vec4( rgbB, opacity );\n }\n}\n@end";!function Tre(e){e.import("@export clay.compositor.coloradjust\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float brightness : 0.0;\nuniform float contrast : 1.0;\nuniform float exposure : 0.0;\nuniform float gamma : 1.0;\nuniform float saturation : 1.0;\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\nvoid main()\n{\n vec4 tex = texture2D( texture, v_Texcoord);\n vec3 color = clamp(tex.rgb + vec3(brightness), 0.0, 1.0);\n color = clamp( (color-vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);\n color = clamp( color * pow(2.0, exposure), 0.0, 1.0);\n color = clamp( pow(color, vec3(gamma)), 0.0, 1.0);\n float luminance = dot( color, w );\n color = mix(vec3(luminance), color, saturation);\n gl_FragColor = vec4(color, tex.a);\n}\n@end\n@export clay.compositor.brightness\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float brightness : 0.0;\nvoid main()\n{\n vec4 tex = texture2D( texture, v_Texcoord);\n vec3 color = tex.rgb + vec3(brightness);\n gl_FragColor = vec4(color, tex.a);\n}\n@end\n@export clay.compositor.contrast\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float contrast : 1.0;\nvoid main()\n{\n vec4 tex = texture2D( texture, v_Texcoord);\n vec3 color = (tex.rgb-vec3(0.5))*contrast+vec3(0.5);\n gl_FragColor = vec4(color, tex.a);\n}\n@end\n@export clay.compositor.exposure\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float exposure : 0.0;\nvoid main()\n{\n vec4 tex = texture2D(texture, v_Texcoord);\n vec3 color = tex.rgb * pow(2.0, exposure);\n gl_FragColor = vec4(color, tex.a);\n}\n@end\n@export clay.compositor.gamma\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float gamma : 1.0;\nvoid main()\n{\n vec4 tex = texture2D(texture, v_Texcoord);\n vec3 color = pow(tex.rgb, vec3(gamma));\n gl_FragColor = vec4(color, tex.a);\n}\n@end\n@export clay.compositor.saturation\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float saturation : 1.0;\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\nvoid main()\n{\n vec4 tex = texture2D(texture, v_Texcoord);\n vec3 color = tex.rgb;\n float luminance = dot(color, w);\n color = mix(vec3(luminance), color, saturation);\n gl_FragColor = vec4(color, tex.a);\n}\n@end"),e.import(q8),e.import("@export clay.compositor.hdr.log_lum\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\n@import clay.util.rgbm\nvoid main()\n{\n vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));\n float luminance = dot(tex.rgb, w);\n luminance = log(luminance + 0.001);\n gl_FragColor = encodeHDR(vec4(vec3(luminance), 1.0));\n}\n@end\n@export clay.compositor.hdr.lum_adaption\nvarying vec2 v_Texcoord;\nuniform sampler2D adaptedLum;\nuniform sampler2D currentLum;\nuniform float frameTime : 0.02;\n@import clay.util.rgbm\nvoid main()\n{\n float fAdaptedLum = decodeHDR(texture2D(adaptedLum, vec2(0.5, 0.5))).r;\n float fCurrentLum = exp(encodeHDR(texture2D(currentLum, vec2(0.5, 0.5))).r);\n fAdaptedLum += (fCurrentLum - fAdaptedLum) * (1.0 - pow(0.98, 30.0 * frameTime));\n gl_FragColor = encodeHDR(vec4(vec3(fAdaptedLum), 1.0));\n}\n@end\n@export clay.compositor.lum\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\nvoid main()\n{\n vec4 tex = texture2D( texture, v_Texcoord );\n float luminance = dot(tex.rgb, w);\n gl_FragColor = vec4(vec3(luminance), 1.0);\n}\n@end"),e.import(J8),e.import("@export clay.compositor.vignette\n#define OUTPUT_ALPHA\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float darkness: 1;\nuniform float offset: 1;\n@import clay.util.rgbm\nvoid main()\n{\n vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));\n gl_FragColor.rgb = texel.rgb;\n vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(offset);\n gl_FragColor = encodeHDR(vec4(mix(texel.rgb, vec3(1.0 - darkness), dot(uv, uv)), texel.a));\n}\n@end"),e.import(e6),e.import(t6),e.import(n6),e.import(r6),e.import(a6),e.import("@export clay.compositor.lensflare\n#define SAMPLE_NUMBER 8\nuniform sampler2D texture;\nuniform sampler2D lenscolor;\nuniform vec2 textureSize : [512, 512];\nuniform float dispersal : 0.3;\nuniform float haloWidth : 0.4;\nuniform float distortion : 1.0;\nvarying vec2 v_Texcoord;\n@import clay.util.rgbm\nvec4 textureDistorted(\n in vec2 texcoord,\n in vec2 direction,\n in vec3 distortion\n) {\n return vec4(\n decodeHDR(texture2D(texture, texcoord + direction * distortion.r)).r,\n decodeHDR(texture2D(texture, texcoord + direction * distortion.g)).g,\n decodeHDR(texture2D(texture, texcoord + direction * distortion.b)).b,\n 1.0\n );\n}\nvoid main()\n{\n vec2 texcoord = -v_Texcoord + vec2(1.0); vec2 textureOffset = 1.0 / textureSize;\n vec2 ghostVec = (vec2(0.5) - texcoord) * dispersal;\n vec2 haloVec = normalize(ghostVec) * haloWidth;\n vec3 distortion = vec3(-textureOffset.x * distortion, 0.0, textureOffset.x * distortion);\n vec4 result = vec4(0.0);\n for (int i = 0; i < SAMPLE_NUMBER; i++)\n {\n vec2 offset = fract(texcoord + ghostVec * float(i));\n float weight = length(vec2(0.5) - offset) / length(vec2(0.5));\n weight = pow(1.0 - weight, 10.0);\n result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;\n }\n result *= texture2D(lenscolor, vec2(length(vec2(0.5) - texcoord)) / length(vec2(0.5)));\n float weight = length(vec2(0.5) - fract(texcoord + haloVec)) / length(vec2(0.5));\n weight = pow(1.0 - weight, 10.0);\n vec2 offset = fract(texcoord + haloVec);\n result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;\n gl_FragColor = result;\n}\n@end"),e.import(o6),e.import(s6)}(Gn);var Ere=/^#source\((.*?)\)/;function Ire(e,n,t){var i,s,d,S,r=e.type||"filter";if("filter"===r){var p=e.shader.trim(),v=Ere.exec(p);if(v?i=Gn.source(v[1].trim()):"#"===p.charAt(0)&&(i=n.shaders[p.substr(1)]),i||(i=p),!i)return}if(e.inputs)for(var _ in s={},e.inputs)s[_]="string"==typeof e.inputs[_]?e.inputs[_]:{node:e.inputs[_].node,pin:e.inputs[_].pin};if(e.outputs)for(var _ in d={},e.outputs){var C=e.outputs[_];d[_]={},null!=C.attachment&&(d[_].attachment=C.attachment),null!=C.keepLastFrame&&(d[_].keepLastFrame=C.keepLastFrame),null!=C.outputLastFrame&&(d[_].outputLastFrame=C.outputLastFrame),C.parameters&&(d[_].parameters=R3(C.parameters))}if(S="scene"===r?new _re({name:e.name,scene:t.scene,camera:t.camera,outputs:d}):"texture"===r?new bre({name:e.name,outputs:d}):new Cre({name:e.name,shader:i,inputs:s,outputs:d})){if(e.parameters)for(var _ in e.parameters)"string"==typeof(k=e.parameters[_])?"#"===(k=k.trim()).charAt(0)?k=n.textures[k.substr(1)]:S.on("beforerender",Ore(_,l6(k))):"function"==typeof k&&S.on("beforerender",k),S.setParameter(_,k);if(e.defines&&S.pass)for(var _ in e.defines){var k;S.pass.material.define("fragment",_,k=e.defines[_])}}return S}function Pre(e,n){return e}function Rre(e,n){return n}function R3(e){var n={};if(!e)return n;["type","minFilter","magFilter","wrapS","wrapT","flipY","useMipmap"].forEach(function(r){var i=e[r];null!=i&&("string"==typeof i&&(i=dr[i]),n[r]=i)});var t=e.scale||1;return["width","height"].forEach(function(r){if(null!=e[r]){var i=e[r];"string"==typeof i?(i=i.trim(),n[r]=function kre(e,n,t){return t=t||1,function(r){var i=r.getDevicePixelRatio(),s=r.getWidth()*t,d=r.getHeight()*t;return n(s,d,i)}}(0,l6(i),t)):n[r]=i}}),n.width||(n.width=Pre),n.height||(n.height=Rre),null!=e.useMipmap&&(n.useMipmap=e.useMipmap),n}function Ore(e,n){return function(t){var r=t.getDevicePixelRatio(),i=t.getWidth(),s=t.getHeight(),d=n(i,s,r);this.setParameter(e,d)}}function l6(e){var n=/^expr\((.*)\)$/.exec(e);if(n)try{var t=new Function("width","height","dpr","return "+n[1]);return t(1,1),t}catch{throw new Error("Invalid expression.")}}const Uy=function Fre(e,n){for(var t=0,r=1/n,i=e;i>0;)t+=r*(i%n),i=Math.floor(i/n),r/=n;return t};function u6(e){for(var n=new Uint8Array(e*e*4),t=0,r=new Ln,i=0;i<e;i++)for(var s=0;s<e;s++)r.set(2*Math.random()-1,2*Math.random()-1,0).normalize(),n[t++]=255*(.5*r.x+.5),n[t++]=255*(.5*r.y+.5),n[t++]=0,n[t++]=255;return n}function c6(e){return new $r({pixels:u6(e),wrapS:dr.REPEAT,wrapT:dr.REPEAT,width:e,height:e})}function Vre(e,n,t){var r=new Float32Array(3*e);n=n||0;for(var i=0;i<e;i++){var s=Uy(i+n,2)*(t?1:2)*Math.PI,d=Uy(i+n,3)*Math.PI,p=Math.random(),v=Math.cos(s)*Math.sin(d)*p,_=Math.cos(d)*p,C=Math.sin(s)*Math.sin(d)*p;r[3*i]=v,r[3*i+1]=_,r[3*i+2]=C}return r}function rh(e){e=e||{},this._ssaoPass=new so({fragment:Gn.source("ecgl.ssao.estimate")}),this._blurPass=new so({fragment:Gn.source("ecgl.ssao.blur")}),this._framebuffer=new Ko({depthBuffer:!1}),this._ssaoTexture=new $r,this._blurTexture=new $r,this._blurTexture2=new $r,this._depthTex=e.depthTexture,this._normalTex=e.normalTexture,this.setNoiseSize(4),this.setKernelSize(e.kernelSize||12),null!=e.radius&&this.setParameter("radius",e.radius),null!=e.power&&this.setParameter("power",e.power),this._normalTex||(this._ssaoPass.material.disableTexture("normalTex"),this._blurPass.material.disableTexture("normalTex")),this._depthTex||this._blurPass.material.disableTexture("depthTex"),this._blurPass.material.setUniform("normalTex",this._normalTex),this._blurPass.material.setUniform("depthTex",this._depthTex)}Gn.import("@export ecgl.ssao.estimate\n\nuniform sampler2D depthTex;\n\nuniform sampler2D normalTex;\n\nuniform sampler2D noiseTex;\n\nuniform vec2 depthTexSize;\n\nuniform vec2 noiseTexSize;\n\nuniform mat4 projection;\n\nuniform mat4 projectionInv;\n\nuniform mat4 viewInverseTranspose;\n\nuniform vec3 kernel[KERNEL_SIZE];\n\nuniform float radius : 1;\n\nuniform float power : 1;\n\nuniform float bias: 1e-2;\n\nuniform float intensity: 1.0;\n\nvarying vec2 v_Texcoord;\n\nfloat ssaoEstimator(in vec3 originPos, in mat3 kernelBasis) {\n float occlusion = 0.0;\n\n for (int i = 0; i < KERNEL_SIZE; i++) {\n vec3 samplePos = kernel[i];\n#ifdef NORMALTEX_ENABLED\n samplePos = kernelBasis * samplePos;\n#endif\n samplePos = samplePos * radius + originPos;\n\n vec4 texCoord = projection * vec4(samplePos, 1.0);\n texCoord.xy /= texCoord.w;\n\n vec4 depthTexel = texture2D(depthTex, texCoord.xy * 0.5 + 0.5);\n\n float sampleDepth = depthTexel.r * 2.0 - 1.0;\n if (projection[3][3] == 0.0) {\n sampleDepth = projection[3][2] / (sampleDepth * projection[2][3] - projection[2][2]);\n }\n else {\n sampleDepth = (sampleDepth - projection[3][2]) / projection[2][2];\n }\n \n float rangeCheck = smoothstep(0.0, 1.0, radius / abs(originPos.z - sampleDepth));\n occlusion += rangeCheck * step(samplePos.z, sampleDepth - bias);\n }\n#ifdef NORMALTEX_ENABLED\n occlusion = 1.0 - occlusion / float(KERNEL_SIZE);\n#else\n occlusion = 1.0 - clamp((occlusion / float(KERNEL_SIZE) - 0.6) * 2.5, 0.0, 1.0);\n#endif\n return pow(occlusion, power);\n}\n\nvoid main()\n{\n\n vec4 depthTexel = texture2D(depthTex, v_Texcoord);\n\n#ifdef NORMALTEX_ENABLED\n vec4 tex = texture2D(normalTex, v_Texcoord);\n if (dot(tex.rgb, tex.rgb) == 0.0) {\n gl_FragColor = vec4(1.0);\n return;\n }\n vec3 N = tex.rgb * 2.0 - 1.0;\n N = (viewInverseTranspose * vec4(N, 0.0)).xyz;\n\n vec2 noiseTexCoord = depthTexSize / vec2(noiseTexSize) * v_Texcoord;\n vec3 rvec = texture2D(noiseTex, noiseTexCoord).rgb * 2.0 - 1.0;\n vec3 T = normalize(rvec - N * dot(rvec, N));\n vec3 BT = normalize(cross(N, T));\n mat3 kernelBasis = mat3(T, BT, N);\n#else\n if (depthTexel.r > 0.99999) {\n gl_FragColor = vec4(1.0);\n return;\n }\n mat3 kernelBasis;\n#endif\n\n float z = depthTexel.r * 2.0 - 1.0;\n\n vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, z, 1.0);\n vec4 p4 = projectionInv * projectedPos;\n\n vec3 position = p4.xyz / p4.w;\n\n float ao = ssaoEstimator(position, kernelBasis);\n ao = clamp(1.0 - (1.0 - ao) * intensity, 0.0, 1.0);\n gl_FragColor = vec4(vec3(ao), 1.0);\n}\n\n@end\n\n\n@export ecgl.ssao.blur\n#define SHADER_NAME SSAO_BLUR\n\nuniform sampler2D ssaoTexture;\n\n#ifdef NORMALTEX_ENABLED\nuniform sampler2D normalTex;\n#endif\n\nvarying vec2 v_Texcoord;\n\nuniform vec2 textureSize;\nuniform float blurSize : 1.0;\n\nuniform int direction: 0.0;\n\n#ifdef DEPTHTEX_ENABLED\nuniform sampler2D depthTex;\nuniform mat4 projection;\nuniform float depthRange : 0.5;\n\nfloat getLinearDepth(vec2 coord)\n{\n float depth = texture2D(depthTex, coord).r * 2.0 - 1.0;\n return projection[3][2] / (depth * projection[2][3] - projection[2][2]);\n}\n#endif\n\nvoid main()\n{\n float kernel[5];\n kernel[0] = 0.122581;\n kernel[1] = 0.233062;\n kernel[2] = 0.288713;\n kernel[3] = 0.233062;\n kernel[4] = 0.122581;\n\n vec2 off = vec2(0.0);\n if (direction == 0) {\n off[0] = blurSize / textureSize.x;\n }\n else {\n off[1] = blurSize / textureSize.y;\n }\n\n vec2 coord = v_Texcoord;\n\n float sum = 0.0;\n float weightAll = 0.0;\n\n#ifdef NORMALTEX_ENABLED\n vec3 centerNormal = texture2D(normalTex, v_Texcoord).rgb * 2.0 - 1.0;\n#endif\n#if defined(DEPTHTEX_ENABLED)\n float centerDepth = getLinearDepth(v_Texcoord);\n#endif\n\n for (int i = 0; i < 5; i++) {\n vec2 coord = clamp(v_Texcoord + vec2(float(i) - 2.0) * off, vec2(0.0), vec2(1.0));\n\n float w = kernel[i];\n#ifdef NORMALTEX_ENABLED\n vec3 normal = texture2D(normalTex, coord).rgb * 2.0 - 1.0;\n w *= clamp(dot(normal, centerNormal), 0.0, 1.0);\n#endif\n#ifdef DEPTHTEX_ENABLED\n float d = getLinearDepth(coord);\n w *= (1.0 - smoothstep(abs(centerDepth - d) / depthRange, 0.0, 1.0));\n#endif\n\n weightAll += w;\n sum += texture2D(ssaoTexture, coord).r * w;\n }\n\n gl_FragColor = vec4(vec3(sum / weightAll), 1.0);\n}\n\n@end\n"),rh.prototype.setDepthTexture=function(e){this._depthTex=e},rh.prototype.setNormalTexture=function(e){this._normalTex=e,this._ssaoPass.material[e?"enableTexture":"disableTexture"]("normalTex"),this.setKernelSize(this._kernelSize)},rh.prototype.update=function(e,n,t){var r=e.getWidth(),i=e.getHeight(),s=this._ssaoPass,d=this._blurPass;s.setUniform("kernel",this._kernels[t%this._kernels.length]),s.setUniform("depthTex",this._depthTex),null!=this._normalTex&&s.setUniform("normalTex",this._normalTex),s.setUniform("depthTexSize",[this._depthTex.width,this._depthTex.height]);var p=new tr;tr.transpose(p,n.worldTransform),s.setUniform("projection",n.projectionMatrix.array),s.setUniform("projectionInv",n.invProjectionMatrix.array),s.setUniform("viewInverseTranspose",p.array);var v=this._ssaoTexture,_=this._blurTexture,C=this._blurTexture2;v.width=r/2,v.height=i/2,_.width=r,_.height=i,C.width=r,C.height=i,this._framebuffer.attach(v),this._framebuffer.bind(e),e.gl.clearColor(1,1,1,1),e.gl.clear(e.gl.COLOR_BUFFER_BIT),s.render(e),d.setUniform("textureSize",[r/2,i/2]),d.setUniform("projection",n.projectionMatrix.array),this._framebuffer.attach(_),d.setUniform("direction",0),d.setUniform("ssaoTexture",v),d.render(e),this._framebuffer.attach(C),d.setUniform("textureSize",[r,i]),d.setUniform("direction",1),d.setUniform("ssaoTexture",_),d.render(e),this._framebuffer.unbind(e);var S=e.clearColor;e.gl.clearColor(S[0],S[1],S[2],S[3])},rh.prototype.getTargetTexture=function(){return this._blurTexture2},rh.prototype.setParameter=function(e,n){"noiseTexSize"===e?this.setNoiseSize(n):"kernelSize"===e?this.setKernelSize(n):"intensity"===e?this._ssaoPass.material.set("intensity",n):this._ssaoPass.setUniform(e,n)},rh.prototype.setKernelSize=function(e){this._kernelSize=e,this._ssaoPass.material.define("fragment","KERNEL_SIZE",e),this._kernels=this._kernels||[];for(var n=0;n<30;n++)this._kernels[n]=Vre(e,n*e,!!this._normalTex)},rh.prototype.setNoiseSize=function(e){var n=this._ssaoPass.getUniform("noiseTex");n?(n.data=u6(e),n.width=n.height=e,n.dirty()):(n=c6(e),this._ssaoPass.setUniform("noiseTex",c6(e))),this._ssaoPass.setUniform("noiseTexSize",[e,e])},rh.prototype.dispose=function(e){this._blurTexture.dispose(e),this._ssaoTexture.dispose(e),this._blurTexture2.dispose(e)};const zre=rh;function ih(e){e=e||{},this._ssrPass=new so({fragment:Gn.source("ecgl.ssr.main"),clearColor:[0,0,0,0]}),this._blurPass1=new so({fragment:Gn.source("ecgl.ssr.blur"),clearColor:[0,0,0,0]}),this._blurPass2=new so({fragment:Gn.source("ecgl.ssr.blur"),clearColor:[0,0,0,0]}),this._blendPass=new so({fragment:Gn.source("clay.compositor.blend")}),this._blendPass.material.disableTexturesAll(),this._blendPass.material.enableTexture(["texture1","texture2"]),this._ssrPass.setUniform("gBufferTexture1",e.normalTexture),this._ssrPass.setUniform("gBufferTexture2",e.depthTexture),this._blurPass1.setUniform("gBufferTexture1",e.normalTexture),this._blurPass1.setUniform("gBufferTexture2",e.depthTexture),this._blurPass2.setUniform("gBufferTexture1",e.normalTexture),this._blurPass2.setUniform("gBufferTexture2",e.depthTexture),this._blurPass2.material.define("fragment","VERTICAL"),this._blurPass2.material.define("fragment","BLEND"),this._ssrTexture=new $r({type:dr.HALF_FLOAT}),this._texture2=new $r({type:dr.HALF_FLOAT}),this._texture3=new $r({type:dr.HALF_FLOAT}),this._prevTexture=new $r({type:dr.HALF_FLOAT}),this._currentTexture=new $r({type:dr.HALF_FLOAT}),this._frameBuffer=new Ko({depthBuffer:!1}),this._normalDistribution=null,this._totalSamples=256,this._samplePerFrame=4,this._ssrPass.material.define("fragment","SAMPLE_PER_FRAME",this._samplePerFrame),this._ssrPass.material.define("fragment","TOTAL_SAMPLES",this._totalSamples),this._downScale=1}Gn.import("@export ecgl.ssr.main\n\n#define SHADER_NAME SSR\n#define MAX_ITERATION 20;\n#define SAMPLE_PER_FRAME 5;\n#define TOTAL_SAMPLES 128;\n\nuniform sampler2D sourceTexture;\nuniform sampler2D gBufferTexture1;\nuniform sampler2D gBufferTexture2;\nuniform sampler2D gBufferTexture3;\nuniform samplerCube specularCubemap;\nuniform float specularIntensity: 1;\n\nuniform mat4 projection;\nuniform mat4 projectionInv;\nuniform mat4 toViewSpace;\nuniform mat4 toWorldSpace;\n\nuniform float maxRayDistance: 200;\n\nuniform float pixelStride: 16;\nuniform float pixelStrideZCutoff: 50; \nuniform float screenEdgeFadeStart: 0.9; \nuniform float eyeFadeStart : 0.2; uniform float eyeFadeEnd: 0.8; \nuniform float minGlossiness: 0.2; uniform float zThicknessThreshold: 1;\n\nuniform float nearZ;\nuniform vec2 viewportSize : VIEWPORT_SIZE;\n\nuniform float jitterOffset: 0;\n\nvarying vec2 v_Texcoord;\n\n#ifdef DEPTH_DECODE\n@import clay.util.decode_float\n#endif\n\n#ifdef PHYSICALLY_CORRECT\nuniform sampler2D normalDistribution;\nuniform float sampleOffset: 0;\nuniform vec2 normalDistributionSize;\n\nvec3 transformNormal(vec3 H, vec3 N) {\n vec3 upVector = N.y > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);\n vec3 tangentX = normalize(cross(N, upVector));\n vec3 tangentZ = cross(N, tangentX);\n return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);\n}\nvec3 importanceSampleNormalGGX(float i, float roughness, vec3 N) {\n float p = fract((i + sampleOffset) / float(TOTAL_SAMPLES));\n vec3 H = texture2D(normalDistribution,vec2(roughness, p)).rgb;\n return transformNormal(H, N);\n}\nfloat G_Smith(float g, float ndv, float ndl) {\n float roughness = 1.0 - g;\n float k = roughness * roughness / 2.0;\n float G1V = ndv / (ndv * (1.0 - k) + k);\n float G1L = ndl / (ndl * (1.0 - k) + k);\n return G1L * G1V;\n}\nvec3 F_Schlick(float ndv, vec3 spec) {\n return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);\n}\n#endif\n\nfloat fetchDepth(sampler2D depthTexture, vec2 uv)\n{\n vec4 depthTexel = texture2D(depthTexture, uv);\n return depthTexel.r * 2.0 - 1.0;\n}\n\nfloat linearDepth(float depth)\n{\n if (projection[3][3] == 0.0) {\n return projection[3][2] / (depth * projection[2][3] - projection[2][2]);\n }\n else {\n return (depth - projection[3][2]) / projection[2][2];\n }\n}\n\nbool rayIntersectDepth(float rayZNear, float rayZFar, vec2 hitPixel)\n{\n if (rayZFar > rayZNear)\n {\n float t = rayZFar; rayZFar = rayZNear; rayZNear = t;\n }\n float cameraZ = linearDepth(fetchDepth(gBufferTexture2, hitPixel));\n return rayZFar <= cameraZ && rayZNear >= cameraZ - zThicknessThreshold;\n}\n\n\nbool traceScreenSpaceRay(\n vec3 rayOrigin, vec3 rayDir, float jitter,\n out vec2 hitPixel, out vec3 hitPoint, out float iterationCount\n)\n{\n float rayLength = ((rayOrigin.z + rayDir.z * maxRayDistance) > -nearZ)\n ? (-nearZ - rayOrigin.z) / rayDir.z : maxRayDistance;\n\n vec3 rayEnd = rayOrigin + rayDir * rayLength;\n\n vec4 H0 = projection * vec4(rayOrigin, 1.0);\n vec4 H1 = projection * vec4(rayEnd, 1.0);\n\n float k0 = 1.0 / H0.w, k1 = 1.0 / H1.w;\n\n vec3 Q0 = rayOrigin * k0, Q1 = rayEnd * k1;\n\n vec2 P0 = (H0.xy * k0 * 0.5 + 0.5) * viewportSize;\n vec2 P1 = (H1.xy * k1 * 0.5 + 0.5) * viewportSize;\n\n P1 += dot(P1 - P0, P1 - P0) < 0.0001 ? 0.01 : 0.0;\n vec2 delta = P1 - P0;\n\n bool permute = false;\n if (abs(delta.x) < abs(delta.y)) {\n permute = true;\n delta = delta.yx;\n P0 = P0.yx;\n P1 = P1.yx;\n }\n float stepDir = sign(delta.x);\n float invdx = stepDir / delta.x;\n\n vec3 dQ = (Q1 - Q0) * invdx;\n float dk = (k1 - k0) * invdx;\n\n vec2 dP = vec2(stepDir, delta.y * invdx);\n\n float strideScaler = 1.0 - min(1.0, -rayOrigin.z / pixelStrideZCutoff);\n float pixStride = 1.0 + strideScaler * pixelStride;\n\n dP *= pixStride; dQ *= pixStride; dk *= pixStride;\n\n vec4 pqk = vec4(P0, Q0.z, k0);\n vec4 dPQK = vec4(dP, dQ.z, dk);\n\n pqk += dPQK * jitter;\n float rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);\n float rayZNear;\n\n bool intersect = false;\n\n vec2 texelSize = 1.0 / viewportSize;\n\n iterationCount = 0.0;\n\n for (int i = 0; i < MAX_ITERATION; i++)\n {\n pqk += dPQK;\n\n rayZNear = rayZFar;\n rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);\n\n hitPixel = permute ? pqk.yx : pqk.xy;\n hitPixel *= texelSize;\n\n intersect = rayIntersectDepth(rayZNear, rayZFar, hitPixel);\n\n iterationCount += 1.0;\n\n dPQK *= 1.2;\n\n if (intersect) {\n break;\n }\n }\n\n Q0.xy += dQ.xy * iterationCount;\n Q0.z = pqk.z;\n hitPoint = Q0 / pqk.w;\n\n return intersect;\n}\n\nfloat calculateAlpha(\n float iterationCount, float reflectivity,\n vec2 hitPixel, vec3 hitPoint, float dist, vec3 rayDir\n)\n{\n float alpha = clamp(reflectivity, 0.0, 1.0);\n alpha *= 1.0 - (iterationCount / float(MAX_ITERATION));\n vec2 hitPixelNDC = hitPixel * 2.0 - 1.0;\n float maxDimension = min(1.0, max(abs(hitPixelNDC.x), abs(hitPixelNDC.y)));\n alpha *= 1.0 - max(0.0, maxDimension - screenEdgeFadeStart) / (1.0 - screenEdgeFadeStart);\n\n float _eyeFadeStart = eyeFadeStart;\n float _eyeFadeEnd = eyeFadeEnd;\n if (_eyeFadeStart > _eyeFadeEnd) {\n float tmp = _eyeFadeEnd;\n _eyeFadeEnd = _eyeFadeStart;\n _eyeFadeStart = tmp;\n }\n\n float eyeDir = clamp(rayDir.z, _eyeFadeStart, _eyeFadeEnd);\n alpha *= 1.0 - (eyeDir - _eyeFadeStart) / (_eyeFadeEnd - _eyeFadeStart);\n\n alpha *= 1.0 - clamp(dist / maxRayDistance, 0.0, 1.0);\n\n return alpha;\n}\n\n@import clay.util.rand\n\n@import clay.util.rgbm\n\nvoid main()\n{\n vec4 normalAndGloss = texture2D(gBufferTexture1, v_Texcoord);\n\n if (dot(normalAndGloss.rgb, vec3(1.0)) == 0.0) {\n discard;\n }\n\n float g = normalAndGloss.a;\n#if !defined(PHYSICALLY_CORRECT)\n if (g <= minGlossiness) {\n discard;\n }\n#endif\n\n float reflectivity = (g - minGlossiness) / (1.0 - minGlossiness);\n\n vec3 N = normalize(normalAndGloss.rgb * 2.0 - 1.0);\n N = normalize((toViewSpace * vec4(N, 0.0)).xyz);\n\n vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, fetchDepth(gBufferTexture2, v_Texcoord), 1.0);\n vec4 pos = projectionInv * projectedPos;\n vec3 rayOrigin = pos.xyz / pos.w;\n vec3 V = -normalize(rayOrigin);\n\n float ndv = clamp(dot(N, V), 0.0, 1.0);\n float iterationCount;\n float jitter = rand(fract(v_Texcoord + jitterOffset));\n\n#ifdef PHYSICALLY_CORRECT\n vec4 color = vec4(vec3(0.0), 1.0);\n vec4 albedoMetalness = texture2D(gBufferTexture3, v_Texcoord);\n vec3 albedo = albedoMetalness.rgb;\n float m = albedoMetalness.a;\n vec3 diffuseColor = albedo * (1.0 - m);\n vec3 spec = mix(vec3(0.04), albedo, m);\n\n float jitter2 = rand(fract(v_Texcoord)) * float(TOTAL_SAMPLES);\n\n for (int i = 0; i < SAMPLE_PER_FRAME; i++) {\n vec3 H = importanceSampleNormalGGX(float(i) + jitter2, 1.0 - g, N);\n vec3 rayDir = normalize(reflect(-V, H));\n#else\n vec3 rayDir = normalize(reflect(-V, N));\n#endif\n vec2 hitPixel;\n vec3 hitPoint;\n\n bool intersect = traceScreenSpaceRay(rayOrigin, rayDir, jitter, hitPixel, hitPoint, iterationCount);\n\n float dist = distance(rayOrigin, hitPoint);\n\n vec3 hitNormal = texture2D(gBufferTexture1, hitPixel).rgb * 2.0 - 1.0;\n hitNormal = normalize((toViewSpace * vec4(hitNormal, 0.0)).xyz);\n#ifdef PHYSICALLY_CORRECT\n float ndl = clamp(dot(N, rayDir), 0.0, 1.0);\n float vdh = clamp(dot(V, H), 0.0, 1.0);\n float ndh = clamp(dot(N, H), 0.0, 1.0);\n vec3 litTexel = vec3(0.0);\n if (dot(hitNormal, rayDir) < 0.0 && intersect) {\n litTexel = texture2D(sourceTexture, hitPixel).rgb;\n litTexel *= pow(clamp(1.0 - dist / 200.0, 0.0, 1.0), 3.0);\n\n }\n else {\n #ifdef SPECULARCUBEMAP_ENABLED\n vec3 rayDirW = normalize(toWorldSpace * vec4(rayDir, 0.0)).rgb;\n litTexel = RGBMDecode(textureCubeLodEXT(specularCubemap, rayDirW, 0.0), 8.12).rgb * specularIntensity;\n#endif\n }\n color.rgb += ndl * litTexel * (\n F_Schlick(ndl, spec) * G_Smith(g, ndv, ndl) * vdh / (ndh * ndv + 0.001)\n );\n }\n color.rgb /= float(SAMPLE_PER_FRAME);\n#else\n #if !defined(SPECULARCUBEMAP_ENABLED)\n if (dot(hitNormal, rayDir) >= 0.0) {\n discard;\n }\n if (!intersect) {\n discard;\n }\n#endif\n float alpha = clamp(calculateAlpha(iterationCount, reflectivity, hitPixel, hitPoint, dist, rayDir), 0.0, 1.0);\n vec4 color = texture2D(sourceTexture, hitPixel);\n color.rgb *= alpha;\n\n#ifdef SPECULARCUBEMAP_ENABLED\n vec3 rayDirW = normalize(toWorldSpace * vec4(rayDir, 0.0)).rgb;\n alpha = alpha * (intersect ? 1.0 : 0.0);\n float bias = (1.0 -g) * 5.0;\n color.rgb += (1.0 - alpha)\n * RGBMDecode(textureCubeLodEXT(specularCubemap, rayDirW, bias), 8.12).rgb\n * specularIntensity;\n#endif\n\n#endif\n\n gl_FragColor = encodeHDR(color);\n}\n@end\n\n@export ecgl.ssr.blur\n\nuniform sampler2D texture;\nuniform sampler2D gBufferTexture1;\nuniform sampler2D gBufferTexture2;\nuniform mat4 projection;\nuniform float depthRange : 0.05;\n\nvarying vec2 v_Texcoord;\n\nuniform vec2 textureSize;\nuniform float blurSize : 1.0;\n\n#ifdef BLEND\n #ifdef SSAOTEX_ENABLED\nuniform sampler2D ssaoTex;\n #endif\nuniform sampler2D sourceTexture;\n#endif\n\nfloat getLinearDepth(vec2 coord)\n{\n float depth = texture2D(gBufferTexture2, coord).r * 2.0 - 1.0;\n return projection[3][2] / (depth * projection[2][3] - projection[2][2]);\n}\n\n@import clay.util.rgbm\n\n\nvoid main()\n{\n @import clay.compositor.kernel.gaussian_9\n\n vec4 centerNTexel = texture2D(gBufferTexture1, v_Texcoord);\n float g = centerNTexel.a;\n float maxBlurSize = clamp(1.0 - g, 0.0, 1.0) * blurSize;\n#ifdef VERTICAL\n vec2 off = vec2(0.0, maxBlurSize / textureSize.y);\n#else\n vec2 off = vec2(maxBlurSize / textureSize.x, 0.0);\n#endif\n\n vec2 coord = v_Texcoord;\n\n vec4 sum = vec4(0.0);\n float weightAll = 0.0;\n\n vec3 cN = centerNTexel.rgb * 2.0 - 1.0;\n float cD = getLinearDepth(v_Texcoord);\n for (int i = 0; i < 9; i++) {\n vec2 coord = clamp((float(i) - 4.0) * off + v_Texcoord, vec2(0.0), vec2(1.0));\n float w = gaussianKernel[i]\n * clamp(dot(cN, texture2D(gBufferTexture1, coord).rgb * 2.0 - 1.0), 0.0, 1.0);\n float d = getLinearDepth(coord);\n w *= (1.0 - smoothstep(abs(cD - d) / depthRange, 0.0, 1.0));\n\n weightAll += w;\n sum += decodeHDR(texture2D(texture, coord)) * w;\n }\n\n#ifdef BLEND\n float aoFactor = 1.0;\n #ifdef SSAOTEX_ENABLED\n aoFactor = texture2D(ssaoTex, v_Texcoord).r;\n #endif\n gl_FragColor = encodeHDR(\n sum / weightAll * aoFactor + decodeHDR(texture2D(sourceTexture, v_Texcoord))\n );\n#else\n gl_FragColor = encodeHDR(sum / weightAll);\n#endif\n}\n\n@end"),ih.prototype.setAmbientCubemap=function(e,n){this._ssrPass.material.set("specularCubemap",e),this._ssrPass.material.set("specularIntensity",n),this._ssrPass.material[e&&n?"enableTexture":"disableTexture"]("specularCubemap")},ih.prototype.update=function(e,n,t,r){var i=e.getWidth(),s=e.getHeight(),d=this._ssrTexture,p=this._texture2,v=this._texture3;d.width=this._prevTexture.width=this._currentTexture.width=i/this._downScale,d.height=this._prevTexture.height=this._currentTexture.height=s/this._downScale,p.width=v.width=i,p.height=v.height=s;var _=this._frameBuffer,C=this._ssrPass,S=this._blurPass1,k=this._blurPass2,H=this._blendPass,ne=new tr,pe=new tr;if(tr.transpose(ne,n.worldTransform),tr.transpose(pe,n.viewMatrix),C.setUniform("sourceTexture",t),C.setUniform("projection",n.projectionMatrix.array),C.setUniform("projectionInv",n.invProjectionMatrix.array),C.setUniform("toViewSpace",ne.array),C.setUniform("toWorldSpace",pe.array),C.setUniform("nearZ",n.near),C.setUniform("jitterOffset",r/this._totalSamples*this._samplePerFrame),C.setUniform("sampleOffset",r*this._samplePerFrame),S.setUniform("textureSize",[d.width,d.height]),k.setUniform("textureSize",[i,s]),k.setUniform("sourceTexture",t),S.setUniform("projection",n.projectionMatrix.array),k.setUniform("projection",n.projectionMatrix.array),_.attach(d),_.bind(e),C.render(e),this._physicallyCorrect&&(_.attach(this._currentTexture),H.setUniform("texture1",this._prevTexture),H.setUniform("texture2",d),H.material.set({weight1:r>=1?.95:0,weight2:r>=1?.05:1}),H.render(e)),_.attach(p),S.setUniform("texture",this._physicallyCorrect?this._currentTexture:d),S.render(e),_.attach(v),k.setUniform("texture",p),k.render(e),_.unbind(e),this._physicallyCorrect){var Re=this._prevTexture;this._prevTexture=this._currentTexture,this._currentTexture=Re}},ih.prototype.getTargetTexture=function(){return this._texture3},ih.prototype.setParameter=function(e,n){"maxIteration"===e?this._ssrPass.material.define("fragment","MAX_ITERATION",n):this._ssrPass.setUniform(e,n)},ih.prototype.setPhysicallyCorrect=function(e){e?(this._normalDistribution||(this._normalDistribution=EI.generateNormalDistribution(64,this._totalSamples)),this._ssrPass.material.define("fragment","PHYSICALLY_CORRECT"),this._ssrPass.material.set("normalDistribution",this._normalDistribution),this._ssrPass.material.set("normalDistributionSize",[64,this._totalSamples])):this._ssrPass.material.undefine("fragment","PHYSICALLY_CORRECT"),this._physicallyCorrect=e},ih.prototype.setSSAOTexture=function(e){var n=this._blurPass2;e?(n.material.enableTexture("ssaoTex"),n.material.set("ssaoTex",e)):n.material.disableTexture("ssaoTex")},ih.prototype.isFinished=function(e){return!this._physicallyCorrect||e>this._totalSamples/this._samplePerFrame},ih.prototype.dispose=function(e){this._ssrTexture.dispose(e),this._texture2.dispose(e),this._texture3.dispose(e),this._prevTexture.dispose(e),this._currentTexture.dispose(e),this._frameBuffer.dispose(e)};const Ure=ih,d6=[0,0,-.321585265978,-.154972575841,.458126042375,.188473391593,.842080129861,.527766490688,.147304551086,-.659453822776,-.331943915203,-.940619700594,.0479226680259,.54812163202,.701581552186,-.709825561388,-.295436780218,.940589268233,-.901489676764,.237713156085,.973570876096,-.109899459384,-.866792314779,-.451805525005,.330975007087,.800048655954,-.344275183665,.381779221166,-.386139432542,-.437418421534,-.576478634965,-.0148463392551,.385798197415,-.262426961053,-.666302061145,.682427250835,-.628010632582,-.732836215494,.10163141741,-.987658134403,.711995289051,-.320024291314,.0296005138058,.950296523438,.0130612307608,-.351024443122,-.879596633704,-.10478487883,.435712737232,.504254490347,.779203817497,.206477676721,.388264289969,-.896736162545,-.153106280781,-.629203242522,-.245517550697,.657969239148,.126830499058,.26862328493,-.634888119007,-.302301223431,.617074219636,.779817204925];function L3(e,n,t,r,i){var s=e.gl;n.setUniform(s,"1i",t,i),s.activeTexture(s.TEXTURE0+i),r.isRenderable()?r.bind(e):r.unbind(e)}function Wre(e,n,t,r,i){var s,d,p,v,_=e.gl;return function(C,S,k){if(!v||v.material!==C.material){var H=C.material,ne=C.__program,pe=H.get("roughness");null==pe&&(pe=1);var Me=H.get("normalMap")||n,Re=H.get("roughnessMap"),Fe=H.get("bumpMap"),Oe=H.get("uvRepeat"),Be=H.get("uvOffset"),nt=H.get("detailUvRepeat"),rt=H.get("detailUvOffset"),Ct=!!Fe&&H.isTextureEnabled("bumpMap"),mt=!!Re&&H.isTextureEnabled("roughnessMap"),Ft=H.isDefined("fragment","DOUBLE_SIDED");Fe=Fe||t,Re=Re||r,k!==S?(S.set("normalMap",Me),S.set("bumpMap",Fe),S.set("roughnessMap",Re),S.set("useBumpMap",Ct),S.set("useRoughnessMap",mt),S.set("doubleSide",Ft),null!=Oe&&S.set("uvRepeat",Oe),null!=Be&&S.set("uvOffset",Be),null!=nt&&S.set("detailUvRepeat",nt),null!=rt&&S.set("detailUvOffset",rt),S.set("roughness",pe)):(ne.setUniform(_,"1f","roughness",pe),s!==Me&&L3(e,ne,"normalMap",Me,0),d!==Fe&&Fe&&L3(e,ne,"bumpMap",Fe,1),p!==Re&&Re&&L3(e,ne,"roughnessMap",Re,2),null!=Oe&&ne.setUniform(_,"2f","uvRepeat",Oe),null!=Be&&ne.setUniform(_,"2f","uvOffset",Be),null!=nt&&ne.setUniform(_,"2f","detailUvRepeat",nt),null!=rt&&ne.setUniform(_,"2f","detailUvOffset",rt),ne.setUniform(_,"1i","useBumpMap",+Ct),ne.setUniform(_,"1i","useRoughnessMap",+mt),ne.setUniform(_,"1i","doubleSide",+Ft)),s=Me,d=Fe,p=Re,v=C}}}function Gy(e){e=e||{},this._depthTex=new $r({format:dr.DEPTH_COMPONENT,type:dr.UNSIGNED_INT}),this._normalTex=new $r({type:dr.HALF_FLOAT}),this._framebuffer=new Ko,this._framebuffer.attach(this._normalTex),this._framebuffer.attach(this._depthTex,Ko.DEPTH_ATTACHMENT),this._normalMaterial=new Eu({shader:new Gn(Gn.source("ecgl.normal.vertex"),Gn.source("ecgl.normal.fragment"))}),this._normalMaterial.enableTexture(["normalMap","bumpMap","roughnessMap"]),this._defaultNormalMap=Wv.createBlank("#000"),this._defaultBumpMap=Wv.createBlank("#000"),this._defaultRoughessMap=Wv.createBlank("#000"),this._debugPass=new so({fragment:Gn.source("clay.compositor.output")}),this._debugPass.setUniform("texture",this._normalTex),this._debugPass.material.undefine("fragment","OUTPUT_ALPHA")}Gn.import("@export ecgl.normal.vertex\n\n@import ecgl.common.transformUniforms\n\n@import ecgl.common.uv.header\n\n@import ecgl.common.attributes\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\n@import ecgl.common.normalMap.vertexHeader\n\n@import ecgl.common.vertexAnimation.header\n\nvoid main()\n{\n\n @import ecgl.common.vertexAnimation.main\n\n @import ecgl.common.uv.main\n\n v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);\n v_WorldPosition = (world * vec4(pos, 1.0)).xyz;\n\n @import ecgl.common.normalMap.vertexMain\n\n gl_Position = worldViewProjection * vec4(pos, 1.0);\n\n}\n\n\n@end\n\n\n@export ecgl.normal.fragment\n\n#define ROUGHNESS_CHANEL 0\n\nuniform bool useBumpMap;\nuniform bool useRoughnessMap;\nuniform bool doubleSide;\nuniform float roughness;\n\n@import ecgl.common.uv.fragmentHeader\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nuniform mat4 viewInverse : VIEWINVERSE;\n\n@import ecgl.common.normalMap.fragmentHeader\n@import ecgl.common.bumpMap.header\n\nuniform sampler2D roughnessMap;\n\nvoid main()\n{\n vec3 N = v_Normal;\n \n bool flipNormal = false;\n if (doubleSide) {\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(eyePos - v_WorldPosition);\n\n if (dot(N, V) < 0.0) {\n flipNormal = true;\n }\n }\n\n @import ecgl.common.normalMap.fragmentMain\n\n if (useBumpMap) {\n N = bumpNormal(v_WorldPosition, v_Normal, N);\n }\n\n float g = 1.0 - roughness;\n\n if (useRoughnessMap) {\n float g2 = 1.0 - texture2D(roughnessMap, v_DetailTexcoord)[ROUGHNESS_CHANEL];\n g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);\n }\n\n if (flipNormal) {\n N = -N;\n }\n\n gl_FragColor.rgb = (N.xyz + 1.0) * 0.5;\n gl_FragColor.a = g;\n}\n@end"),Gy.prototype.getDepthTexture=function(){return this._depthTex},Gy.prototype.getNormalTexture=function(){return this._normalTex},Gy.prototype.update=function(e,n,t){var r=e.getWidth(),i=e.getHeight(),s=this._depthTex,d=this._normalTex,p=this._normalMaterial;s.width=r,s.height=i,d.width=r,d.height=i;var v=n.getRenderList(t).opaque;this._framebuffer.bind(e),e.gl.clearColor(0,0,0,0),e.gl.clear(e.gl.COLOR_BUFFER_BIT|e.gl.DEPTH_BUFFER_BIT),e.gl.disable(e.gl.BLEND),e.renderPass(v,t,{getMaterial:function(){return p},ifRender:function(_){return _.renderNormal},beforeRender:Wre(e,this._defaultNormalMap,this._defaultBumpMap,this._defaultRoughessMap),sort:e.opaqueSortCompare}),this._framebuffer.unbind(e)},Gy.prototype.renderDebug=function(e){this._debugPass.render(e)},Gy.prototype.dispose=function(e){this._depthTex.dispose(e),this._normalTex.dispose(e)};const jre=Gy;function iw(e){e=e||{},this._edgePass=new so({fragment:Gn.source("ecgl.edge")}),this._edgePass.setUniform("normalTexture",e.normalTexture),this._edgePass.setUniform("depthTexture",e.depthTexture),this._targetTexture=new $r({type:dr.HALF_FLOAT}),this._frameBuffer=new Ko,this._frameBuffer.attach(this._targetTexture)}iw.prototype.update=function(e,n,t,r){var i=e.getWidth(),s=e.getHeight(),d=this._targetTexture;d.width=i,d.height=s;var p=this._frameBuffer;p.bind(e),this._edgePass.setUniform("projectionInv",n.invProjectionMatrix.array),this._edgePass.setUniform("textureSize",[i,s]),this._edgePass.setUniform("texture",t),this._edgePass.render(e),p.unbind(e)},iw.prototype.getTargetTexture=function(){return this._targetTexture},iw.prototype.setParameter=function(e,n){this._edgePass.setUniform(e,n)},iw.prototype.dispose=function(e){this._targetTexture.dispose(e),this._frameBuffer.dispose(e)};const Zre=iw,Yre={type:"compositor",nodes:[{name:"source",type:"texture",outputs:{color:{}}},{name:"source_half",shader:"#source(clay.compositor.downsample)",inputs:{texture:"source"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"bright",shader:"#source(clay.compositor.bright)",inputs:{texture:"source_half"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{threshold:2,scale:4,textureSize:"expr([width * 1.0 / 2, height / 2])"}},{name:"bright_downsample_4",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 2, height / 2] )"}},{name:"bright_downsample_8",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_4"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 4, height / 4] )"}},{name:"bright_downsample_16",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_8"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 8, height / 8] )"}},{name:"bright_downsample_32",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_16"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 32)",height:"expr(height * 1.0 / 32)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 16, height / 16] )"}},{name:"bright_upsample_16_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_32"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 32, height / 32] )"}},{name:"bright_upsample_16_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_16_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 16, height * 1.0 / 16] )"}},{name:"bright_upsample_8_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_16"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 16, height * 1.0 / 16] )"}},{name:"bright_upsample_8_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_8_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 8, height * 1.0 / 8] )"}},{name:"bright_upsample_8_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_8_blur_v",texture2:"bright_upsample_16_blur_v"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_4_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_8"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 8, height * 1.0 / 8] )"}},{name:"bright_upsample_4_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_4_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 4, height * 1.0 / 4] )"}},{name:"bright_upsample_4_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_4_blur_v",texture2:"bright_upsample_8_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_2_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_4"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 4, height * 1.0 / 4] )"}},{name:"bright_upsample_2_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_2_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 2, height * 1.0 / 2] )"}},{name:"bright_upsample_2_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_2_blur_v",texture2:"bright_upsample_4_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_full_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 2, height * 1.0 / 2] )"}},{name:"bright_upsample_full_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_full_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"bloom_composite",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_full_blur_v",texture2:"bright_upsample_2_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"coc",shader:"#source(ecgl.dof.coc)",outputs:{color:{parameters:{minFilter:"NEAREST",magFilter:"NEAREST",width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},parameters:{focalDist:50,focalRange:30}},{name:"dof_far_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"source",coc:"coc"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"dof_near_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"source",coc:"coc"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"},defines:{BLUR_NEARFIELD:null}},{name:"dof_coc_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"coc"},outputs:{color:{parameters:{minFilter:"NEAREST",magFilter:"NEAREST",width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"},defines:{BLUR_COC:null}},{name:"dof_composite",shader:"#source(ecgl.dof.composite)",inputs:{original:"source",blurred:"dof_far_blur",nearfield:"dof_near_blur",coc:"coc",nearcoc:"dof_coc_blur"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}}},{name:"composite",shader:"#source(clay.compositor.hdr.composite)",inputs:{texture:"source",bloom:"bloom_composite"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},defines:{}},{name:"FXAA",shader:"#source(clay.compositor.fxaa)",inputs:{texture:"composite"}}]};function h6(e,n){return{color:{parameters:{width:e,height:n}}}}Gn.import(q8),Gn.import(J8),Gn.import(e6),Gn.import(t6),Gn.import(n6),Gn.import(r6),Gn.import(a6),Gn.import(o6),Gn.import(s6),Gn.import("@export ecgl.dof.coc\n\nuniform sampler2D depth;\n\nuniform float zNear: 0.1;\nuniform float zFar: 2000;\n\nuniform float focalDistance: 3;\nuniform float focalRange: 1;\nuniform float focalLength: 30;\nuniform float fstop: 2.8;\n\nvarying vec2 v_Texcoord;\n\n@import clay.util.encode_float\n\nvoid main()\n{\n float z = texture2D(depth, v_Texcoord).r * 2.0 - 1.0;\n\n float dist = 2.0 * zNear * zFar / (zFar + zNear - z * (zFar - zNear));\n\n float aperture = focalLength / fstop;\n\n float coc;\n\n float uppper = focalDistance + focalRange;\n float lower = focalDistance - focalRange;\n if (dist <= uppper && dist >= lower) {\n coc = 0.5;\n }\n else {\n float focalAdjusted = dist > uppper ? uppper : lower;\n\n coc = abs(aperture * (focalLength * (dist - focalAdjusted)) / (dist * (focalAdjusted - focalLength)));\n coc = clamp(coc, 0.0, 2.0) / 2.00001;\n\n if (dist < lower) {\n coc = -coc;\n }\n coc = coc * 0.5 + 0.5;\n }\n\n gl_FragColor = encodeFloat(coc);\n}\n@end\n\n\n@export ecgl.dof.composite\n\n#define DEBUG 0\n\nuniform sampler2D original;\nuniform sampler2D blurred;\nuniform sampler2D nearfield;\nuniform sampler2D coc;\nuniform sampler2D nearcoc;\nvarying vec2 v_Texcoord;\n\n@import clay.util.rgbm\n@import clay.util.float\n\nvoid main()\n{\n vec4 blurredColor = texture2D(blurred, v_Texcoord);\n vec4 originalColor = texture2D(original, v_Texcoord);\n\n float fCoc = decodeFloat(texture2D(coc, v_Texcoord));\n\n fCoc = abs(fCoc * 2.0 - 1.0);\n\n float weight = smoothstep(0.0, 1.0, fCoc);\n \n#ifdef NEARFIELD_ENABLED\n vec4 nearfieldColor = texture2D(nearfield, v_Texcoord);\n float fNearCoc = decodeFloat(texture2D(nearcoc, v_Texcoord));\n fNearCoc = abs(fNearCoc * 2.0 - 1.0);\n\n gl_FragColor = encodeHDR(\n mix(\n nearfieldColor, mix(originalColor, blurredColor, weight),\n pow(1.0 - fNearCoc, 4.0)\n )\n );\n#else\n gl_FragColor = encodeHDR(mix(originalColor, blurredColor, weight));\n#endif\n\n}\n\n@end\n\n\n\n@export ecgl.dof.diskBlur\n\n#define POISSON_KERNEL_SIZE 16;\n\nuniform sampler2D texture;\nuniform sampler2D coc;\nvarying vec2 v_Texcoord;\n\nuniform float blurRadius : 10.0;\nuniform vec2 textureSize : [512.0, 512.0];\n\nuniform vec2 poissonKernel[POISSON_KERNEL_SIZE];\n\nuniform float percent;\n\nfloat nrand(const in vec2 n) {\n return fract(sin(dot(n.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\n@import clay.util.rgbm\n@import clay.util.float\n\n\nvoid main()\n{\n vec2 offset = blurRadius / textureSize;\n\n float rnd = 6.28318 * nrand(v_Texcoord + 0.07 * percent );\n float cosa = cos(rnd);\n float sina = sin(rnd);\n vec4 basis = vec4(cosa, -sina, sina, cosa);\n\n#if !defined(BLUR_NEARFIELD) && !defined(BLUR_COC)\n offset *= abs(decodeFloat(texture2D(coc, v_Texcoord)) * 2.0 - 1.0);\n#endif\n\n#ifdef BLUR_COC\n float cocSum = 0.0;\n#else\n vec4 color = vec4(0.0);\n#endif\n\n\n float weightSum = 0.0;\n\n for (int i = 0; i < POISSON_KERNEL_SIZE; i++) {\n vec2 ofs = poissonKernel[i];\n\n ofs = vec2(dot(ofs, basis.xy), dot(ofs, basis.zw));\n\n vec2 uv = v_Texcoord + ofs * offset;\n vec4 texel = texture2D(texture, uv);\n\n float w = 1.0;\n#ifdef BLUR_COC\n float fCoc = decodeFloat(texel) * 2.0 - 1.0;\n cocSum += clamp(fCoc, -1.0, 0.0) * w;\n#else\n texel = texel;\n #if !defined(BLUR_NEARFIELD)\n float fCoc = decodeFloat(texture2D(coc, uv)) * 2.0 - 1.0;\n w *= abs(fCoc);\n #endif\n texel.rgb *= texel.a;\n color += texel * w;\n#endif\n\n weightSum += w;\n }\n\n#ifdef BLUR_COC\n gl_FragColor = encodeFloat(clamp(cocSum / weightSum, -1.0, 0.0) * 0.5 + 0.5);\n#else\n color /= weightSum;\n color.rgb /= (color.a + 0.0001);\n gl_FragColor = color;\n#endif\n}\n\n@end"),Gn.import("@export ecgl.edge\n\nuniform sampler2D texture;\n\nuniform sampler2D normalTexture;\nuniform sampler2D depthTexture;\n\nuniform mat4 projectionInv;\n\nuniform vec2 textureSize;\n\nuniform vec4 edgeColor: [0,0,0,0.8];\n\nvarying vec2 v_Texcoord;\n\nvec3 packColor(vec2 coord) {\n float z = texture2D(depthTexture, coord).r * 2.0 - 1.0;\n vec4 p = vec4(v_Texcoord * 2.0 - 1.0, z, 1.0);\n vec4 p4 = projectionInv * p;\n\n return vec3(\n texture2D(normalTexture, coord).rg,\n -p4.z / p4.w / 5.0\n );\n}\n\nvoid main() {\n vec2 cc = v_Texcoord;\n vec3 center = packColor(cc);\n\n float size = clamp(1.0 - (center.z - 10.0) / 100.0, 0.0, 1.0) * 0.5;\n float dx = size / textureSize.x;\n float dy = size / textureSize.y;\n\n vec2 coord;\n vec3 topLeft = packColor(cc+vec2(-dx, -dy));\n vec3 top = packColor(cc+vec2(0.0, -dy));\n vec3 topRight = packColor(cc+vec2(dx, -dy));\n vec3 left = packColor(cc+vec2(-dx, 0.0));\n vec3 right = packColor(cc+vec2(dx, 0.0));\n vec3 bottomLeft = packColor(cc+vec2(-dx, dy));\n vec3 bottom = packColor(cc+vec2(0.0, dy));\n vec3 bottomRight = packColor(cc+vec2(dx, dy));\n\n vec3 v = -topLeft-2.0*top-topRight+bottomLeft+2.0*bottom+bottomRight;\n vec3 h = -bottomLeft-2.0*left-topLeft+bottomRight+2.0*right+topRight;\n\n float edge = sqrt(dot(h, h) + dot(v, v));\n\n edge = smoothstep(0.8, 1.0, edge);\n\n gl_FragColor = mix(texture2D(texture, v_Texcoord), vec4(edgeColor.rgb, 1.0), edgeColor.a * edge);\n}\n@end");var O3=["composite","FXAA"];function si(){this._sourceTexture=new $r({type:dr.HALF_FLOAT}),this._depthTexture=new $r({format:dr.DEPTH_COMPONENT,type:dr.UNSIGNED_INT}),this._framebuffer=new Ko,this._framebuffer.attach(this._sourceTexture),this._framebuffer.attach(this._depthTexture,Ko.DEPTH_ATTACHMENT),this._normalPass=new jre,this._compositor=function Are(e,n){var t=new gre;n=n||{};var r={textures:{},parameters:{}};for(var s in e.parameters)r.parameters[s]=R3(e.parameters[s]);return function Lre(e,n,t,r){if(e.textures){var i={},s=0,d=!1,p=t.textureRootPath;Yo.each(e.textures,function(v,_){var C,S=v.path,k=R3(v.parameters);if(Array.isArray(S)&&6===S.length)p&&(S=S.map(function(H){return Yo.relative2absolute(H,p)})),C=new $C(k);else{if("string"!=typeof S)return;p&&(S=Yo.relative2absolute(S,p)),C=new $r(k)}C.load(S),s++,C.once("success",function(){i[_]=C,0==--s&&(r(i),d=!0)})}),0===s&&!d&&r(i)}else r({})}(e,0,n,function(p){r.textures=p,function(p,v){for(var _=0;_<e.nodes.length;_++){var S=Ire(e.nodes[_],r,n);S&&t.addNode(S)}}()}),t}(Yre);var e=this._compositor.getNodeByName("source");e.texture=this._sourceTexture;var n=this._compositor.getNodeByName("coc");this._sourceNode=e,this._cocNode=n,this._compositeNode=this._compositor.getNodeByName("composite"),this._fxaaNode=this._compositor.getNodeByName("FXAA"),this._dofBlurNodes=["dof_far_blur","dof_near_blur","dof_coc_blur"].map(function(r){return this._compositor.getNodeByName(r)},this),this._dofBlurKernel=0,this._dofBlurKernelSize=new Float32Array(0),this._finalNodesChain=O3.map(function(r){return this._compositor.getNodeByName(r)},this);var t={normalTexture:this._normalPass.getNormalTexture(),depthTexture:this._normalPass.getDepthTexture()};this._ssaoPass=new zre(t),this._ssrPass=new Ure(t),this._edgePass=new Zre(t)}si.prototype.resize=function(r,i,t){i*=t=t||1;var s=this._sourceTexture,d=this._depthTexture;s.width=r*=t,s.height=i,d.width=r,d.height=i;var p={getWidth:function(){return r},getHeight:function(){return i},getDevicePixelRatio:function(){return t}};function v(_,C){if("function"==typeof _[C]){var S=_[C].__original||_[C];_[C]=function(k){return S.call(this,p)},_[C].__original=S}}this._compositor.nodes.forEach(function(_){for(var C in _.outputs){var S=_.outputs[C].parameters;S&&(v(S,"width"),v(S,"height"))}for(var k in _.parameters)v(_.parameters,k)}),this._width=r,this._height=i,this._dpr=t},si.prototype.getWidth=function(){return this._width},si.prototype.getHeight=function(){return this._height},si.prototype._ifRenderNormalPass=function(){return this._enableSSAO||this._enableEdge||this._enableSSR},si.prototype._getPrevNode=function(e){for(var n=O3.indexOf(e.name)-1,t=this._finalNodesChain[n];t&&!this._compositor.getNodeByName(t.name);)t=this._finalNodesChain[n-=1];return t},si.prototype._getNextNode=function(e){for(var n=O3.indexOf(e.name)+1,t=this._finalNodesChain[n];t&&!this._compositor.getNodeByName(t.name);)t=this._finalNodesChain[n+=1];return t},si.prototype._addChainNode=function(e){var n=this._getPrevNode(e),t=this._getNextNode(e);!n||(e.inputs.texture=n.name,t?(e.outputs=h6(this.getWidth.bind(this),this.getHeight.bind(this)),t.inputs.texture=e.name):e.outputs=null,this._compositor.addNode(e))},si.prototype._removeChainNode=function(e){var n=this._getPrevNode(e),t=this._getNextNode(e);!n||(t?(n.outputs=h6(this.getWidth.bind(this),this.getHeight.bind(this)),t.inputs.texture=n.name):n.outputs=null,this._compositor.removeNode(e))},si.prototype.updateNormal=function(e,n,t,r){this._ifRenderNormalPass()&&this._normalPass.update(e,n,t)},si.prototype.updateSSAO=function(e,n,t,r){this._ssaoPass.update(e,t,r)},si.prototype.enableSSAO=function(){this._enableSSAO=!0},si.prototype.disableSSAO=function(){this._enableSSAO=!1},si.prototype.enableSSR=function(){this._enableSSR=!0},si.prototype.disableSSR=function(){this._enableSSR=!1},si.prototype.getSSAOTexture=function(){return this._ssaoPass.getTargetTexture()},si.prototype.getSourceFrameBuffer=function(){return this._framebuffer},si.prototype.getSourceTexture=function(){return this._sourceTexture},si.prototype.disableFXAA=function(){this._removeChainNode(this._fxaaNode)},si.prototype.enableFXAA=function(){this._addChainNode(this._fxaaNode)},si.prototype.enableBloom=function(){this._compositeNode.inputs.bloom="bloom_composite",this._compositor.dirty()},si.prototype.disableBloom=function(){this._compositeNode.inputs.bloom=null,this._compositor.dirty()},si.prototype.enableDOF=function(){this._compositeNode.inputs.texture="dof_composite",this._compositor.dirty()},si.prototype.disableDOF=function(){this._compositeNode.inputs.texture="source",this._compositor.dirty()},si.prototype.enableColorCorrection=function(){this._compositeNode.define("COLOR_CORRECTION"),this._enableColorCorrection=!0},si.prototype.disableColorCorrection=function(){this._compositeNode.undefine("COLOR_CORRECTION"),this._enableColorCorrection=!1},si.prototype.enableEdge=function(){this._enableEdge=!0},si.prototype.disableEdge=function(){this._enableEdge=!1},si.prototype.setBloomIntensity=function(e){this._compositeNode.setParameter("bloomIntensity",e)},si.prototype.setSSAOParameter=function(e,n){switch(e){case"quality":this._ssaoPass.setParameter("kernelSize",{low:6,medium:12,high:32,ultra:62}[n]||12);break;case"radius":this._ssaoPass.setParameter(e,n),this._ssaoPass.setParameter("bias",n/200);break;case"intensity":this._ssaoPass.setParameter(e,n)}},si.prototype.setDOFParameter=function(e,n){switch(e){case"focalDistance":case"focalRange":case"fstop":this._cocNode.setParameter(e,n);break;case"blurRadius":for(var t=0;t<this._dofBlurNodes.length;t++)this._dofBlurNodes[t].setParameter("blurRadius",n);break;case"quality":var r={low:4,medium:8,high:16,ultra:32}[n]||8;for(this._dofBlurKernelSize=r,t=0;t<this._dofBlurNodes.length;t++)this._dofBlurNodes[t].pass.material.define("POISSON_KERNEL_SIZE",r);this._dofBlurKernel=new Float32Array(2*r)}},si.prototype.setSSRParameter=function(e,n){if(null!=n)switch(e){case"quality":var r={low:32,medium:16,high:8,ultra:4}[n]||16;this._ssrPass.setParameter("maxIteration",{low:10,medium:15,high:30,ultra:80}[n]||20),this._ssrPass.setParameter("pixelStride",r);break;case"maxRoughness":this._ssrPass.setParameter("minGlossiness",Math.max(Math.min(1-n,1),0));break;case"physical":this.setPhysicallyCorrectSSR(n);break;default:console.warn("Unkown SSR parameter "+e)}},si.prototype.setPhysicallyCorrectSSR=function(e){this._ssrPass.setPhysicallyCorrect(e)},si.prototype.setEdgeColor=function(e){var n=ot.parseColor(e);this._edgePass.setParameter("edgeColor",n)},si.prototype.setExposure=function(e){this._compositeNode.setParameter("exposure",Math.pow(2,e))},si.prototype.setColorLookupTexture=function(e,n){this._compositeNode.pass.material.setTextureImage("lut",this._enableColorCorrection?e:"none",n,{minFilter:ot.Texture.NEAREST,magFilter:ot.Texture.NEAREST,flipY:!1})},si.prototype.setColorCorrection=function(e,n){this._compositeNode.setParameter(e,n)},si.prototype.isSSREnabled=function(){return this._enableSSR},si.prototype.composite=function(e,n,t,r,i){var s=this._sourceTexture,d=s;this._enableEdge&&(this._edgePass.update(e,t,s,i),s=d=this._edgePass.getTargetTexture()),this._enableSSR&&(this._ssrPass.update(e,t,s,i),d=this._ssrPass.getTargetTexture(),this._ssrPass.setSSAOTexture(this._enableSSAO?this._ssaoPass.getTargetTexture():null)),this._sourceNode.texture=d,this._cocNode.setParameter("depth",this._depthTexture);for(var p=this._dofBlurKernel,v=this._dofBlurKernelSize,C=i%Math.floor(d6.length/2/v),S=0;S<2*v;S++)p[S]=d6[S+C*v*2];for(S=0;S<this._dofBlurNodes.length;S++)this._dofBlurNodes[S].setParameter("percent",i/30),this._dofBlurNodes[S].setParameter("poissonKernel",p);this._cocNode.setParameter("zNear",t.near),this._cocNode.setParameter("zFar",t.far),this._compositor.render(e,r)},si.prototype.dispose=function(e){this._sourceTexture.dispose(e),this._depthTexture.dispose(e),this._framebuffer.dispose(e),this._compositor.dispose(e),this._normalPass.dispose(e),this._ssaoPass.dispose(e)};const Kre=si;function k3(e){for(var n=[],t=0;t<30;t++)n.push([Uy(t,2),Uy(t,3)]);this._haltonSequence=n,this._frame=0,this._sourceTex=new $r,this._sourceFb=new Ko,this._sourceFb.attach(this._sourceTex),this._prevFrameTex=new $r,this._outputTex=new $r;var r=this._blendPass=new so({fragment:Gn.source("clay.compositor.blend")});r.material.disableTexturesAll(),r.material.enableTexture(["texture1","texture2"]),this._blendFb=new Ko({depthBuffer:!1}),this._outputPass=new so({fragment:Gn.source("clay.compositor.output"),blendWithPrevious:!0}),this._outputPass.material.define("fragment","OUTPUT_ALPHA"),this._outputPass.material.blend=function(i){i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD),i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA)}}k3.prototype={constructor:k3,jitterProjection:function(e,n){var t=e.viewport,r=t.devicePixelRatio||e.getDevicePixelRatio(),i=t.width*r,s=t.height*r,d=this._haltonSequence[this._frame%this._haltonSequence.length],p=new tr;p.array[12]=(2*d[0]-1)/i,p.array[13]=(2*d[1]-1)/s,tr.mul(n.projectionMatrix,p,n.projectionMatrix),tr.invert(n.invProjectionMatrix,n.projectionMatrix)},resetFrame:function(){this._frame=0},getFrame:function(){return this._frame},getSourceFrameBuffer:function(){return this._sourceFb},getOutputTexture:function(){return this._outputTex},resize:function(e,n){this._prevFrameTex.width=e,this._prevFrameTex.height=n,this._outputTex.width=e,this._outputTex.height=n,this._sourceTex.width=e,this._sourceTex.height=n,this._prevFrameTex.dirty(),this._outputTex.dirty(),this._sourceTex.dirty()},isFinished:function(){return this._frame>=this._haltonSequence.length},render:function(e,n,t){var r=this._blendPass;0===this._frame?(r.setUniform("weight1",0),r.setUniform("weight2",1)):(r.setUniform("weight1",.9),r.setUniform("weight2",.1)),r.setUniform("texture1",this._prevFrameTex),r.setUniform("texture2",n||this._sourceTex),this._blendFb.attach(this._outputTex),this._blendFb.bind(e),r.render(e),this._blendFb.unbind(e),t||(this._outputPass.setUniform("texture",this._outputTex),this._outputPass.render(e));var i=this._prevFrameTex;this._prevFrameTex=this._outputTex,this._outputTex=i,this._frame++},dispose:function(e){this._sourceFb.dispose(e),this._blendFb.dispose(e),this._prevFrameTex.dispose(e),this._outputTex.dispose(e),this._sourceTex.dispose(e),this._outputPass.dispose(e),this._blendPass.dispose(e)}};const Qre=k3;function wa(e){e=e||"perspective",this.layer=null,this.scene=new Cf,this.rootNode=this.scene,this.viewport={x:0,y:0,width:0,height:0},this.setProjection(e),this._compositor=new Kre,this._temporalSS=new Qre,this._shadowMapPass=new hre;for(var n=[],t=0,r=0;r<30;r++){for(var i=[],s=0;s<6;s++)i.push(4*Uy(t,2)-2),i.push(4*Uy(t,3)-2),t++;n.push(i)}this._pcfKernels=n,this.scene.on("beforerender",function(d,p,v){this.needsTemporalSS()&&this._temporalSS.jitterProjection(d,v)},this)}wa.prototype.setProjection=function(e){var n=this.camera;n&&n.update(),"perspective"===e?this.camera instanceof No||(this.camera=new No,n&&this.camera.setLocalTransform(n.localTransform)):this.camera instanceof By||(this.camera=new By,n&&this.camera.setLocalTransform(n.localTransform)),this.camera.near=.1,this.camera.far=2e3},wa.prototype.setViewport=function(e,n,t,r,i){this.camera instanceof No&&(this.camera.aspect=t/r),i=i||1,this.viewport.x=e,this.viewport.y=n,this.viewport.width=t,this.viewport.height=r,this.viewport.devicePixelRatio=i,this._compositor.resize(t*i,r*i),this._temporalSS.resize(t*i,r*i)},wa.prototype.containPoint=function(e,n){var t=this.viewport;return n=this.layer.renderer.getHeight()-n,e>=t.x&&n>=t.y&&e<=t.x+t.width&&n<=t.y+t.height};var f6=new Hl;wa.prototype.castRay=function(e,n,t){var r=this.layer.renderer,i=r.viewport;return r.viewport=this.viewport,r.screenToNDC(e,n,f6),this.camera.castRay(f6,t),r.viewport=i,t},wa.prototype.prepareRender=function(){this.scene.update(),this.camera.update(),this.scene.updateLights();var e=this.scene.updateRenderList(this.camera);this._needsSortProgressively=!1;for(var n=0;n<e.transparent.length;n++){var r=e.transparent[n].geometry;r.needsSortVerticesProgressively&&r.needsSortVerticesProgressively()&&(this._needsSortProgressively=!0),r.needsSortTrianglesProgressively&&r.needsSortTrianglesProgressively()&&(this._needsSortProgressively=!0)}this._frame=0,this._temporalSS.resetFrame()},wa.prototype.render=function(e,n){this._doRender(e,n,this._frame),this._frame++},wa.prototype.needsAccumulate=function(){return this.needsTemporalSS()||this._needsSortProgressively},wa.prototype.needsTemporalSS=function(){var e=this._enableTemporalSS;return"auto"===e&&(e=this._enablePostEffect),e},wa.prototype.hasDOF=function(){return this._enableDOF},wa.prototype.isAccumulateFinished=function(){return this.needsTemporalSS()?this._temporalSS.isFinished():this._frame>30},wa.prototype._doRender=function(e,n,t){var r=this.scene,i=this.camera;this._updateTransparent(e,r,i,t=t||0),n||(this._shadowMapPass.kernelPCF=this._pcfKernels[0],this._shadowMapPass.render(e,r,i,!0)),this._updateShadowPCFKernel(t);var s=e.clearColor;if(e.gl.clearColor(s[0],s[1],s[2],s[3]),this._enablePostEffect&&(this.needsTemporalSS()&&this._temporalSS.jitterProjection(e,i),this._compositor.updateNormal(e,r,i,this._temporalSS.getFrame())),this._updateSSAO(e,r,i,this._temporalSS.getFrame()),this._enablePostEffect)(d=this._compositor.getSourceFrameBuffer()).bind(e),e.gl.clear(e.gl.DEPTH_BUFFER_BIT|e.gl.COLOR_BUFFER_BIT),e.render(r,i,!0,!0),d.unbind(e),this.needsTemporalSS()&&n?(this._compositor.composite(e,r,i,this._temporalSS.getSourceFrameBuffer(),this._temporalSS.getFrame()),e.setViewport(this.viewport),this._temporalSS.render(e)):(e.setViewport(this.viewport),this._compositor.composite(e,r,i,null,0));else if(this.needsTemporalSS()&&n){var d;(d=this._temporalSS.getSourceFrameBuffer()).bind(e),e.saveClear(),e.clearBit=e.gl.DEPTH_BUFFER_BIT|e.gl.COLOR_BUFFER_BIT,e.render(r,i,!0,!0),e.restoreClear(),d.unbind(e),e.setViewport(this.viewport),this._temporalSS.render(e)}else e.setViewport(this.viewport),e.render(r,i,!0,!0)},wa.prototype._updateTransparent=function(e,n,t,r){for(var i=new Ln,s=new tr,d=t.getWorldPosition(),p=n.getRenderList(t).transparent,v=0;v<p.length;v++){var _=p[v],C=_.geometry;tr.invert(s,_.worldTransform),Ln.transformMat4(i,d,s),C.needsSortTriangles&&C.needsSortTriangles()&&C.doSortTriangles(i,r),C.needsSortVertices&&C.needsSortVertices()&&C.doSortVertices(i,r)}},wa.prototype._updateSSAO=function(e,n,t){var r=this._enableSSAO&&this._enablePostEffect;r&&this._compositor.updateSSAO(e,n,t,this._temporalSS.getFrame());for(var i=n.getRenderList(t),s=0;s<i.opaque.length;s++){var d=i.opaque[s];d.renderNormal&&d.material[r?"enableTexture":"disableTexture"]("ssaoMap"),r&&d.material.set("ssaoMap",this._compositor.getSSAOTexture())}},wa.prototype._updateShadowPCFKernel=function(e){for(var n=this._pcfKernels[e%this._pcfKernels.length],r=this.scene.getRenderList(this.camera).opaque,i=0;i<r.length;i++)r[i].receiveShadow&&(r[i].material.set("pcfKernel",n),r[i].material.define("fragment","PCF_KERNEL_SIZE",n.length/2))},wa.prototype.dispose=function(e){this._compositor.dispose(e.gl),this._temporalSS.dispose(e.gl),this._shadowMapPass.dispose(e)},wa.prototype.setPostEffect=function(e,n){var t=this._compositor;this._enablePostEffect=e.get("enable");var r=e.getModel("bloom"),i=e.getModel("edge"),s=e.getModel("DOF",e.getModel("depthOfField")),d=e.getModel("SSAO",e.getModel("screenSpaceAmbientOcclusion")),p=e.getModel("SSR",e.getModel("screenSpaceReflection")),v=e.getModel("FXAA"),_=e.getModel("colorCorrection");r.get("enable")?t.enableBloom():t.disableBloom(),s.get("enable")?t.enableDOF():t.disableDOF(),p.get("enable")?t.enableSSR():t.disableSSR(),_.get("enable")?t.enableColorCorrection():t.disableColorCorrection(),i.get("enable")?t.enableEdge():t.disableEdge(),v.get("enable")?t.enableFXAA():t.disableFXAA(),this._enableDOF=s.get("enable"),this._enableSSAO=d.get("enable"),this._enableSSAO?t.enableSSAO():t.disableSSAO(),t.setBloomIntensity(r.get("intensity")),t.setEdgeColor(i.get("color")),t.setColorLookupTexture(_.get("lookupTexture"),n),t.setExposure(_.get("exposure")),["radius","quality","intensity"].forEach(function(C){t.setSSAOParameter(C,d.get(C))}),["quality","maxRoughness","physical"].forEach(function(C){t.setSSRParameter(C,p.get(C))}),["quality","focalDistance","focalRange","blurRadius","fstop"].forEach(function(C){t.setDOFParameter(C,s.get(C))}),["brightness","contrast","saturation"].forEach(function(C){t.setColorCorrection(C,_.get(C))})},wa.prototype.setDOFFocusOnPoint=function(e){if(this._enablePostEffect)return e>this.camera.far||e<this.camera.near?void 0:(this._compositor.setDOFParameter("focalDistance",e),!0)},wa.prototype.setTemporalSuperSampling=function(e){this._enableTemporalSS=e.get("enable")},wa.prototype.isLinearSpace=function(){return this._enablePostEffect},wa.prototype.setRootNode=function(e){if(this.rootNode!==e){for(var n=this.rootNode.children(),t=0;t<n.length;t++)e.add(n[t]);e!==this.scene&&this.scene.add(e),this.rootNode=e}},wa.prototype.add=function(e){this.rootNode.add(e)},wa.prototype.remove=function(e){this.rootNode.remove(e)},wa.prototype.removeAll=function(e){this.rootNode.removeAll(e)},Object.assign(wa.prototype,UB);const Sf=wa;function qre(e,n){var t=e.getBoxLayoutParams(),r=(0,WI.ME)(t,{width:n.getWidth(),height:n.getHeight()});r.y=n.getHeight()-r.y-r.height,this.viewGL.setViewport(r.x,r.y,r.width,r.height,n.getDevicePixelRatio());var i=e.get("boxWidth"),s=e.get("boxHeight"),d=e.get("boxDepth");this.getAxis("x").setExtent(-i/2,i/2),this.getAxis("y").setExtent(d/2,-d/2),this.getAxis("z").setExtent(-s/2,s/2),this.size=[i,s,d]}function Jre(e,n){var t={};e.eachSeries(function(i){if(i.coordinateSystem===this){var s=i.getData();["x","y","z"].forEach(function(d){s.mapDimensionsAll(d,!0).forEach(function(p){!function r(i,s){t[i]=t[i]||[1/0,-1/0],t[i][0]=Math.min(s[0],t[i][0]),t[i][1]=Math.max(s[1],t[i][1])}(d,s.getDataExtent(p,!0))})})}},this),["xAxis3D","yAxis3D","zAxis3D"].forEach(function(i){e.eachComponent(i,function(s){var d=i.charAt(0),p=s.getReferringComponents("grid3D").models[0],v=p.coordinateSystem;if(v===this){var _=v.getAxis(d);if(!_){var C=bt._y.createScale(t[d]||[1/0,-1/0],s);(_=new lre(d,C)).type=s.get("type"),_.onBand="category"===_.type&&s.get("boundaryGap"),_.inverse=s.get("inverse"),s.axis=_,_.model=s,_.getLabelModel=function(){return s.getModel("axisLabel",p.getModel("axisLabel"))},_.getTickModel=function(){return s.getModel("axisTick",p.getModel("axisTick"))},v.addAxis(_)}}},this)},this),this.resize(this.model,n)}var eie={dimensions:Z8.prototype.dimensions,create:function(e,n){var t=[];e.eachComponent("grid3D",function(s){s.__viewGL=s.__viewGL||new Sf;var d=new Z8;d.model=s,d.viewGL=s.__viewGL,s.coordinateSystem=d,t.push(d),d.resize=qre,d.update=Jre});var r=["xAxis3D","yAxis3D","zAxis3D"];return e.eachSeries(function(s){if("cartesian3D"===s.get("coordinateSystem")){if(null==(d=s.getReferringComponents("grid3D").models[0])){var p=function i(s,d){return r.map(function(p){var v=s.getReferringComponents(p).models[0];return null==v&&(v=d.getComponent(p)),v})}(s,e),d=p[0].getCoordSysModel();p.forEach(function(C){C.getCoordSysModel()})}s.coordinateSystem=d.coordinateSystem}}),t}};const tie=eie;var p6=bt.tF.extend({type:"cartesian3DAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid3D",index:this.option.gridIndex,id:this.option.gridId})[0]}});bt._y.mixinAxisModelCommonMethods(p6);const nie=p6;var v6={show:!0,grid3DIndex:0,inverse:!1,name:"",nameLocation:"middle",nameTextStyle:{fontSize:16},nameGap:20,axisPointer:{},axisLine:{},axisTick:{},axisLabel:{},splitArea:{}},rie=bt.D5.merge({boundaryGap:!0,axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"},axisPointer:{label:{show:!1}}},v6),N3=bt.D5.merge({boundaryGap:[0,0],splitNumber:5,axisPointer:{label:{}}},v6),iie=bt.D5.defaults({scale:!0,min:"dataMin",max:"dataMax"},N3),g6=bt.D5.defaults({logBase:10},N3);g6.scale=!0;const aie={categoryAxis3D:rie,valueAxis3D:N3,timeAxis3D:iie,logAxis3D:g6};var oie=z(9567),sie=["value","category","time","log"];function uie(e,n){return n.type||(n.data?"category":"value")}(0,bt.D$)(function cie(e){e.registerComponentModel(Jne),e.registerComponentView(sre),e.registerCoordinateSystem("grid3D",tie),["x","y","z"].forEach(function(n){!function lie(e,n,t,r,i){sie.forEach(function(s){var d=t.extend({type:n+"Axis3D."+s,__ordinalMeta:null,mergeDefaultAndTheme:function(p,v){var _=v.getTheme();bt.D5.merge(p,_.get(s+"Axis3D")),bt.D5.merge(p,this.getDefaultOption()),p.type=r(n,p)},optionUpdated:function(){"category"===this.option.type&&(this.__ordinalMeta=oie.Z.createByAxisModel(this))},getCategories:function(){if("category"===this.option.type)return this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:bt.D5.merge(bt.D5.clone(aie[s+"Axis3D"]),i||{},!0)});e.registerComponentModel(d)}),e.registerSubTypeDefaulter(n+"Axis3D",bt.D5.curry(r,n))}(e,n,nie,uie,{name:n.toUpperCase()});const t=e.ComponentView.extend({type:n+"Axis3D"});e.registerComponentView(t)}),e.registerAction({type:"grid3DChangeCamera",event:"grid3dcamerachanged",update:"series:updateCamera"},function(n,t){t.eachComponent({mainType:"grid3D",query:n},function(r){r.setView(n)})}),e.registerAction({type:"grid3DShowAxisPointer",event:"grid3dshowaxispointer",update:"grid3D:showAxisPointer"},function(n,t){}),e.registerAction({type:"grid3DHideAxisPointer",event:"grid3dhideaxispointer",update:"grid3D:hideAxisPointer"},function(n,t){})});const Wy={defaultOption:{shading:null,realisticMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},lambertMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},colorMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},hatchingMaterial:{textureTiling:1,textureOffset:0,paperColor:"#fff"}}},m6={getFilledRegions:function(e,n){var r,t=(e||[]).slice();if("string"==typeof n?r=(n=bt.FU(n))&&n.geoJson:n&&n.features&&(r=n),!r)return[];for(var i={},s=r.features,d=0;d<t.length;d++)i[t[d].name]=t[d];for(d=0;d<s.length;d++){var p=s[d].properties.name;i[p]||t.push({name:p})}return t},defaultOption:{show:!0,zlevel:-10,map:"",left:0,top:0,width:"100%",height:"100%",boxWidth:100,boxHeight:10,boxDepth:"auto",regionHeight:3,environment:"auto",groundPlane:{show:!1,color:"#aaa"},shading:"lambert",light:{main:{alpha:40,beta:30}},viewControl:{alpha:40,beta:0,distance:100,orthographicSize:60,minAlpha:5,minBeta:-80,maxBeta:80},label:{show:!1,distance:2,textStyle:{fontSize:20,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:4}},itemStyle:{color:"#fff",borderWidth:0,borderColor:"#333"},emphasis:{itemStyle:{color:"#639fc0"},label:{show:!0}}}};var jy=bt.tF.extend({type:"geo3D",layoutMode:"box",coordinateSystem:null,optionUpdated:function(){var e=this.option;e.regions=this.getFilledRegions(e.regions,e.map);var n=bt._y.createDimensions(e.data||[],{coordDimensions:["value"],encodeDefine:this.get("encode"),dimensionsDefine:this.get("dimensions")}),t=new bt.aV(n,this);t.initData(e.regions);var r={};t.each(function(i){var s=t.getName(i),d=t.getItemModel(i);r[s]=d}),this._regionModelMap=r,this._data=t},getData:function(){return this._data},getRegionModel:function(e){var n=this.getData().getName(e);return this._regionModelMap[n]||new bt.Hn(null,this)},getRegionPolygonCoords:function(e){var n=this.getData().getName(e),t=this.coordinateSystem.getRegion(n);return t?t.geometries:[]},getFormattedLabel:function(e,n){var t=this._data.getName(e),r=this.getRegionModel(e),i=r.get("normal"===n?["label","formatter"]:["emphasis","label","formatter"]);null==i&&(i=r.get(["label","formatter"]));var s={name:t};return"function"==typeof i?(s.status=n,i(s)):"string"==typeof i?i.replace("{a}",s.seriesName??""):t},defaultOption:{regions:[]}});bt.D5.merge(jy.prototype,m6),bt.D5.merge(jy.prototype,kI),bt.D5.merge(jy.prototype,Vy),bt.D5.merge(jy.prototype,zy),bt.D5.merge(jy.prototype,Wy);const die=jy,hie=_6;function _6(e,n,t){t=t||2;var p,v,_,C,S,k,H,r=n&&n.length,i=r?n[0]*t:e.length,s=y6(e,0,i,t,!0),d=[];if(!s)return d;if(r&&(s=function mie(e,n,t,r){var s,d,_,i=[];for(s=0,d=n.length;s<d;s++)(_=y6(e,n[s]*r,s<d-1?n[s+1]*r:e.length,r,!1))===_.next&&(_.steiner=!0),i.push(wie(_));for(i.sort(_ie),s=0;s<i.length;s++)yie(i[s],t),t=aw(t,t.next);return t}(e,n,s,t)),e.length>80*t){p=_=e[0],v=C=e[1];for(var ne=t;ne<i;ne+=t)(S=e[ne])<p&&(p=S),(k=e[ne+1])<v&&(v=k),S>_&&(_=S),k>C&&(C=k);H=Math.max(_-p,C-v)}return ow(s,d,t,p,v,H),d}function y6(e,n,t,r,i){var s,d;if(i===V3(e,n,t,r)>0)for(s=n;s<t;s+=r)d=C6(s,e[s],e[s+1],d);else for(s=t-r;s>=n;s-=r)d=C6(s,e[s],e[s+1],d);return d&&qv(d,d.next)&&(lw(d),d=d.next),d}function aw(e,n){if(!e)return e;n||(n=e);var r,t=e;do{if(r=!1,t.steiner||!qv(t,t.next)&&0!==Ys(t.prev,t,t.next))t=t.next;else{if(lw(t),(t=n=t.prev)===t.next)return null;r=!0}}while(r||t!==n);return n}function ow(e,n,t,r,i,s,d){if(e){!d&&s&&function xie(e,n,t,r){var i=e;do{null===i.z&&(i.z=F3(i.x,i.y,n,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function Cie(e){var n,t,r,i,s,d,p,v,_=1;do{for(t=e,e=null,s=null,d=0;t;){for(d++,r=t,p=0,n=0;n<_&&(p++,r=r.nextZ);n++);for(v=_;p>0||v>0&&r;)0!==p&&(0===v||!r||t.z<=r.z)?(i=t,t=t.nextZ,p--):(i=r,r=r.nextZ,v--),s?s.nextZ=i:e=i,i.prevZ=s,s=i;t=r}s.nextZ=null,_*=2}while(d>1)}(i)}(e,r,i,s);for(var v,_,p=e;e.prev!==e.next;)if(v=e.prev,_=e.next,s?pie(e,r,i,s):fie(e))n.push(v.i/t),n.push(e.i/t),n.push(_.i/t),lw(e),e=_.next,p=_.next;else if((e=_)===p){d?1===d?ow(e=vie(e,n,t),n,t,r,i,s,2):2===d&&gie(e,n,t,r,i,s):ow(aw(e),n,t,r,i,s,1);break}}}function fie(e){var n=e.prev,t=e,r=e.next;if(Ys(n,t,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(jI(n.x,n.y,t.x,t.y,r.x,r.y,i.x,i.y)&&Ys(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function pie(e,n,t,r){var i=e.prev,s=e,d=e.next;if(Ys(i,s,d)>=0)return!1;for(var _=i.x>s.x?i.x>d.x?i.x:d.x:s.x>d.x?s.x:d.x,C=i.y>s.y?i.y>d.y?i.y:d.y:s.y>d.y?s.y:d.y,S=F3(i.x<s.x?i.x<d.x?i.x:d.x:s.x<d.x?s.x:d.x,i.y<s.y?i.y<d.y?i.y:d.y:s.y<d.y?s.y:d.y,n,t,r),k=F3(_,C,n,t,r),H=e.nextZ;H&&H.z<=k;){if(H!==e.prev&&H!==e.next&&jI(i.x,i.y,s.x,s.y,d.x,d.y,H.x,H.y)&&Ys(H.prev,H,H.next)>=0)return!1;H=H.nextZ}for(H=e.prevZ;H&&H.z>=S;){if(H!==e.prev&&H!==e.next&&jI(i.x,i.y,s.x,s.y,d.x,d.y,H.x,H.y)&&Ys(H.prev,H,H.next)>=0)return!1;H=H.prevZ}return!0}function vie(e,n,t){var r=e;do{var i=r.prev,s=r.next.next;!qv(i,s)&&b6(i,r,r.next,s)&&sw(i,s)&&sw(s,i)&&(n.push(i.i/t),n.push(r.i/t),n.push(s.i/t),lw(r),lw(r.next),r=e=s),r=r.next}while(r!==e);return r}function gie(e,n,t,r,i,s){var d=e;do{for(var p=d.next.next;p!==d.prev;){if(d.i!==p.i&&Sie(d,p)){var v=x6(d,p);return d=aw(d,d.next),v=aw(v,v.next),ow(d,n,t,r,i,s),void ow(v,n,t,r,i,s)}p=p.next}d=d.next}while(d!==e)}function _ie(e,n){return e.x-n.x}function yie(e,n){if(n=function bie(e,n){var d,t=n,r=e.x,i=e.y,s=-1/0;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){var p=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=r&&p>s){if(s=p,p===r){if(i===t.y)return t;if(i===t.next.y)return t.next}d=t.x<t.next.x?t:t.next}}t=t.next}while(t!==n);if(!d)return null;if(r===s)return d.prev;var k,v=d,_=d.x,C=d.y,S=1/0;for(t=d.next;t!==v;)r>=t.x&&t.x>=_&&r!==t.x&&jI(i<C?r:s,i,_,C,i<C?s:r,i,t.x,t.y)&&((k=Math.abs(i-t.y)/(r-t.x))<S||k===S&&t.x>d.x)&&sw(t,e)&&(d=t,S=k),t=t.next;return d}(e,n),n){var t=x6(n,e);aw(t,t.next)}}function F3(e,n,t,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-t)/i)|e<<8))|e<<4))|e<<2))|e<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-r)/i)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function wie(e){var n=e,t=e;do{n.x<t.x&&(t=n),n=n.next}while(n!==e);return t}function jI(e,n,t,r,i,s,d,p){return(i-d)*(n-p)-(e-d)*(s-p)>=0&&(e-d)*(r-p)-(t-d)*(n-p)>=0&&(t-d)*(s-p)-(i-d)*(r-p)>=0}function Sie(e,n){return e.next.i!==n.i&&e.prev.i!==n.i&&!function Die(e,n){var t=e;do{if(t.i!==e.i&&t.next.i!==e.i&&t.i!==n.i&&t.next.i!==n.i&&b6(t,t.next,e,n))return!0;t=t.next}while(t!==e);return!1}(e,n)&&sw(e,n)&&sw(n,e)&&function Mie(e,n){var t=e,r=!1,i=(e.x+n.x)/2,s=(e.y+n.y)/2;do{t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next}while(t!==e);return r}(e,n)}function Ys(e,n,t){return(n.y-e.y)*(t.x-n.x)-(n.x-e.x)*(t.y-n.y)}function qv(e,n){return e.x===n.x&&e.y===n.y}function b6(e,n,t,r){return!!(qv(e,n)&&qv(t,r)||qv(e,r)&&qv(t,n))||Ys(e,n,t)>0!=Ys(e,n,r)>0&&Ys(t,r,e)>0!=Ys(t,r,n)>0}function sw(e,n){return Ys(e.prev,e,e.next)<0?Ys(e,n,e.next)>=0&&Ys(e,e.prev,n)>=0:Ys(e,n,e.prev)<0||Ys(e,e.next,n)<0}function x6(e,n){var t=new B3(e.i,e.x,e.y),r=new B3(n.i,n.x,n.y),i=e.next,s=n.prev;return e.next=n,n.prev=e,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function C6(e,n,t,r){var i=new B3(e,n,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function lw(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function B3(e,n,t){this.i=e,this.x=n,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function V3(e,n,t,r){for(var i=0,s=n,d=t-r;s<t;s+=r)i+=(e[d]-e[s])*(e[s+1]+e[d+1]),d=s;return i}function z3(e,n,t){var r=e[n];e[n]=e[t],e[t]=r}function w6(e,n,t,r,i){var s=t,d=e[n];z3(e,n,r);for(var p=t;p<r;p++)i(e[p],d)<0&&(z3(e,p,s),s++);return z3(e,r,s),s}function ZI(e,n,t,r){if(t<r){var s=w6(e,Math.floor((t+r)/2),t,r,n);ZI(e,n,t,s-1),ZI(e,n,s+1,r)}}function H3(){this._parts=[]}_6.deviation=function(e,n,t,r){var i=n&&n.length,d=Math.abs(V3(e,0,i?n[0]*t:e.length,t));if(i)for(var p=0,v=n.length;p<v;p++)d-=Math.abs(V3(e,n[p]*t,p<v-1?n[p+1]*t:e.length,t));var S=0;for(p=0;p<r.length;p+=3){var k=r[p]*t,H=r[p+1]*t,ne=r[p+2]*t;S+=Math.abs((e[k]-e[ne])*(e[H+1]-e[k+1])-(e[k]-e[H])*(e[ne+1]-e[k+1]))}return 0===d&&0===S?0:Math.abs((S-d)/d)},H3.prototype.step=function(e,n,t){var r=e.length;if(0===t){this._parts=[],this._sorted=!1;var i=Math.floor(r/2);this._parts.push({pivot:i,left:0,right:r-1}),this._currentSortPartIdx=0}if(!this._sorted){var s=this._parts;if(0===s.length)return this._sorted=!0,!0;if(s.length<512){for(var d=0;d<s.length;d++)s[d].pivot=w6(e,s[d].pivot,s[d].left,s[d].right,n);var p=[];for(d=0;d<s.length;d++){var v,_;(_=s[d].pivot-1)>(v=s[d].left)&&p.push({pivot:Math.floor((_+v)/2),left:v,right:_}),(_=s[d].right)>(v=s[d].pivot+1)&&p.push({pivot:Math.floor((_+v)/2),left:v,right:_})}s=this._parts=p}else for(d=0;d<Math.floor(s.length/10);d++){var C=s.length-1-this._currentSortPartIdx;if(ZI(e,n,s[C].left,s[C].right),this._currentSortPartIdx++,this._currentSortPartIdx===s.length)return this._sorted=!0,!0}return!1}},H3.sort=ZI;const YI=H3;var Zy=Ka.vec3,S6=Zy.create(),D6=Zy.create(),M6=Zy.create();const U3={needsSortTriangles:function(){return this.indices&&this.sortTriangles},needsSortTrianglesProgressively:function(){return this.needsSortTriangles()&&this.triangleCount>=2e4},doSortTriangles:function(e,n){var t=this.indices;if(0===n){var r=this.attributes.position;e=e.array,(!this._triangleZList||this._triangleZList.length!==this.triangleCount)&&(this._triangleZList=new Float32Array(this.triangleCount),this._sortedTriangleIndices=new Uint32Array(this.triangleCount),this._indicesTmp=new t.constructor(t.length),this._triangleZListTmp=new Float32Array(this.triangleCount));for(var s,i=0,d=0;d<t.length;){r.get(t[d++],S6),r.get(t[d++],D6),r.get(t[d++],M6);var p=Zy.sqrDist(S6,e),v=Zy.sqrDist(D6,e),_=Zy.sqrDist(M6,e),C=Math.min(p,v);C=Math.min(C,_),3===d?(s=C,C=0):C-=s,this._triangleZList[i++]=C}}var S=this._sortedTriangleIndices;for(d=0;d<S.length;d++)S[d]=d;if(this.triangleCount<2e4)0===n&&this._simpleSort(!0);else for(d=0;d<3;d++)this._progressiveQuickSort(3*n+d);var k=this._indicesTmp,H=this._triangleZListTmp,ne=this._triangleZList;for(d=0;d<this.triangleCount;d++){var pe=3*S[d],Me=3*d;k[Me++]=t[pe++],k[Me++]=t[pe++],k[Me]=t[pe],H[d]=ne[S[d]]}var Re=this._indicesTmp;this._indicesTmp=this.indices,this.indices=Re,Re=this._triangleZListTmp,this._triangleZListTmp=this._triangleZList,this._triangleZList=Re,this.dirtyIndices()},_simpleSort:function(e){var n=this._triangleZList,t=this._sortedTriangleIndices;function r(i,s){return n[s]-n[i]}e?Array.prototype.sort.call(t,r):YI.sort(t,r,0,t.length-1)},_progressiveQuickSort:function(e){var n=this._triangleZList,t=this._sortedTriangleIndices;this._quickSort=this._quickSort||new YI,this._quickSort.step(t,function(r,i){return n[i]-n[r]},e)}};function Fo(e,n){const t=e.getItemVisual(n,"style");if(t)return t[e.getVisual("drawType")]}function Bo(e,n){const t=e.getItemVisual(n,"style");return t&&t.opacity}function Jv(e,n,t){this._labelsMesh=new M3,this._labelTextureSurface=new w3({width:512,height:512,devicePixelRatio:t.getDevicePixelRatio(),onupdate:function(){t.getZr().refresh()}}),this._api=t,this._labelsMesh.material.set("textureAtlas",this._labelTextureSurface.getTexture())}Jv.prototype.getLabelPosition=function(e,n,t){return[0,0,0]},Jv.prototype.getLabelDistance=function(e,n,t){return 0},Jv.prototype.getMesh=function(){return this._labelsMesh},Jv.prototype.updateData=function(e,n,t){null==n&&(n=0),null==t&&(t=e.count()),(!this._labelsVisibilitiesBits||this._labelsVisibilitiesBits.length!==t-n)&&(this._labelsVisibilitiesBits=new Uint8Array(t-n));for(var r=["label","show"],i=["emphasis","label","show"],s=n;s<t;s++){var d=e.getItemModel(s),p=d.get(r),v=d.get(i);null==v&&(v=p),this._labelsVisibilitiesBits[s-n]=(p?1:0)|(v?2:0)}this._start=n,this._end=t,this._data=e},Jv.prototype.updateLabels=function(e){if(this._data){for(var n=(e=e||[]).length>0,t={},r=0;r<e.length;r++)t[e[r]]=!0;this._labelsMesh.geometry.convertToDynamicArray(!0),this._labelTextureSurface.clear();for(var i=["label"],s=["emphasis","label"],d=this._data.hostModel,p=this._data,v=d.getModel(i),_=d.getModel(s,v),C={left:"right",right:"left",top:"center",bottom:"center"},S={left:"middle",right:"middle",top:"bottom",bottom:"top"},k=this._start;k<this._end;k++){var H=!1;if(n&&t[k]&&(H=!0),this._labelsVisibilitiesBits[k-this._start]&(H?2:1)){var Me=p.getItemModel(k).getModel(H?s:i,H?_:v),Re=Me.get("distance")||0,Fe=Me.get("position"),Oe=this._api.getDevicePixelRatio(),Be=d.getFormattedLabel(k,H?"emphasis":"normal");if(null==Be||""===Be)return;var nt=new bt.Q.Text({style:(0,FI.Lr)(Me,{text:Be,fill:Me.get("color")||Fo(p,k)||"#000",align:"left",verticalAlign:"top",opacity:Qr.firstNotNull(Me.get("opacity"),Bo(p,k),1)})}),rt=nt.getBoundingRect();rt.height*=1.2;var mt=this._labelTextureSurface.add(nt),Ft=C[Fe]||"center",nn=S[Fe]||"bottom";this._labelsMesh.geometry.addSprite(this.getLabelPosition(k,Fe,Re),[rt.width*Oe,rt.height*Oe],mt,Ft,nn,this.getLabelDistance(k,Fe,Re)*Oe)}}this._labelsMesh.material.set("uvScale",this._labelTextureSurface.getCoordsScale()),this._labelTextureSurface.getZr().refreshImmediately(),this._labelsMesh.geometry.convertToTypedArray(),this._labelsMesh.geometry.dirty()}},Jv.prototype.dispose=function(){this._labelTextureSurface.dispose()};const G3=Jv;var wl=Ka.vec3;function W3(e){this.rootNode=new ot.Node,this._triangulationResults={},this._shadersMap=ot.COMMON_SHADERS.filter(function(t){return"shadow"!==t}).reduce(function(t,r){return t[r]=ot.createShader("ecgl."+r),t},{}),this._linesShader=ot.createShader("ecgl.meshLines3D");var n={};ot.COMMON_SHADERS.forEach(function(t){n[t]=new ot.Material({shader:ot.createShader("ecgl."+t)})}),this._groundMaterials=n,this._groundMesh=new ot.Mesh({geometry:new ot.PlaneGeometry({dynamic:!0}),castShadow:!1,renderNormal:!0,$ignorePicking:!0}),this._groundMesh.rotation.rotateX(-Math.PI/2),this._labelsBuilder=new G3(512,512,e),this._labelsBuilder.getMesh().renderOrder=100,this._labelsBuilder.getMesh().material.depthTest=!1,this.rootNode.add(this._labelsBuilder.getMesh()),this._initMeshes(),this._api=e}ot.Shader.import(HI),W3.prototype={constructor:W3,extrudeY:!0,update:function(e,n,t,r,i){var s=e.getData();null==r&&(r=0),null==i&&(i=s.count()),this._startIndex=r,this._endIndex=i-1,this._triangulation(e,r,i);var d=this._getShader(e.get("shading"));this._prepareMesh(e,d,t,r,i),this.rootNode.updateWorldTransform(),this._updateRegionMesh(e,t,r,i);var p=e.coordinateSystem;"geo3D"===p.type&&this._updateGroundPlane(e,p,t);var v=this;this._labelsBuilder.updateData(s,r,i),this._labelsBuilder.getLabelPosition=function(_,C,S){var k=s.getName(_),ne=S;if("geo3D"===p.type){var pe=p.getRegion(k);return pe?(H=pe.getCenter(),p.dataToPoint([H[0],H[1],ne])):[NaN,NaN,NaN]}var Re=v._triangulationResults[_-v._startIndex],H=v.extrudeY?[(Re.max[0]+Re.min[0])/2,Re.max[1]+ne,(Re.max[2]+Re.min[2])/2]:[(Re.max[0]+Re.min[0])/2,(Re.max[1]+Re.min[1])/2,Re.max[2]+ne]},this._data=s,this._labelsBuilder.updateLabels(),this._updateDebugWireframe(e),this._lastHoverDataIndex=0},_initMeshes:function(){var e=this,t=function n(){var i=new ot.Mesh({name:"Polygon",material:new ot.Material({shader:e._shadersMap.lambert}),geometry:new ot.Geometry({sortTriangles:!0,dynamic:!0}),culling:!1,ignorePicking:!0,renderNormal:!0});return Object.assign(i.geometry,U3),i}(),r=new ot.Mesh({material:new ot.Material({shader:this._linesShader}),castShadow:!1,ignorePicking:!0,$ignorePicking:!0,geometry:new Yv({useNativeLine:!1})});this.rootNode.add(t),this.rootNode.add(r),t.material.define("both","VERTEX_COLOR"),t.material.define("fragment","DOUBLE_SIDED"),this._polygonMesh=t,this._linesMesh=r,this.rootNode.add(this._groundMesh)},_getShader:function(e){var n=this._shadersMap[e];return n||(n=this._shadersMap.lambert),n.__shading=e,n},_prepareMesh:function(e,n,t,r,i){for(var s=0,d=0,p=0,v=0,_=r;_<i;_++){var C=this._getRegionPolygonInfo(_),S=this._getRegionLinesInfo(_,e,this._linesMesh.geometry);s+=C.vertexCount,d+=C.triangleCount,p+=S.vertexCount,v+=S.triangleCount}var k=this._polygonMesh,H=k.geometry;["position","normal","texcoord0","color"].forEach(function(ne){H.attributes[ne].init(s)}),H.indices=s>65535?new Uint32Array(3*d):new Uint16Array(3*d),k.material.shader!==n&&k.material.attachShader(n,!0),ot.setMaterialFromModel(n.__shading,k.material,e,t),p>0&&(this._linesMesh.geometry.resetOffset(),this._linesMesh.geometry.setVertexCount(p),this._linesMesh.geometry.setTriangleCount(v)),this._dataIndexOfVertex=new Uint32Array(s),this._vertexRangeOfDataIndex=new Uint32Array(2*(i-r))},_updateRegionMesh:function(e,n,t,r){for(var i=e.getData(),s=0,d=0,p=!1,rt=this._polygonMesh,v=this._linesMesh,_=t;_<r;_++){var C=e.getRegionModel(_),S=C.getModel("itemStyle"),k=Qr.firstNotNull(Fo(i,_),S.get("color"),"#fff"),H=Qr.firstNotNull(Bo(i,_),S.get("opacity"),1),ne=ot.parseColor(k),pe=ot.parseColor(S.get("borderColor"));ne[3]*=H,pe[3]*=H;var Me=ne[3]<.99;rt.material.set("color",[1,1,1,1]),p=p||Me;for(var Re=Qr.firstNotNull(C.get("height",!0),e.get("regionHeight")),Fe=this._updatePolygonGeometry(e,rt.geometry,_,Re,s,d,ne),Oe=s;Oe<Fe.vertexOffset;Oe++)this._dataIndexOfVertex[Oe]=_;this._vertexRangeOfDataIndex[2*(_-t)]=s,this._vertexRangeOfDataIndex[2*(_-t)+1]=Fe.vertexOffset,s=Fe.vertexOffset,d=Fe.triangleOffset;var Be=S.get("borderWidth"),nt=Be>0;nt&&(Be*=n.getDevicePixelRatio(),this._updateLinesGeometry(v.geometry,e,_,Re,Be,e.coordinateSystem.transform)),v.invisible=!nt,v.material.set({color:pe})}(rt=this._polygonMesh).material.transparent=p,rt.material.depthMask=!p,rt.geometry.updateBoundingBox(),rt.frontFace=this.extrudeY?ot.Mesh.CCW:ot.Mesh.CW,rt.material.get("normalMap")&&rt.geometry.generateTangents(),rt.seriesIndex=e.seriesIndex,rt.on("mousemove",this._onmousemove,this),rt.on("mouseout",this._onmouseout,this)},_updateDebugWireframe:function(e){var n=e.getModel("debug.wireframe");if(n.get("show")){var t=ot.parseColor(n.get("lineStyle.color")||"rgba(0,0,0,0.5)"),r=Qr.firstNotNull(n.get("lineStyle.width"),1),i=this._polygonMesh;i.geometry.generateBarycentric(),i.material.define("both","WIREFRAME_TRIANGLE"),i.material.set("wireframeLineColor",t),i.material.set("wireframeLineWidth",r)}},_onmousemove:function(e){var n=this._dataIndexOfVertex[e.triangle[0]];null==n&&(n=-1),n!==this._lastHoverDataIndex&&(this.downplay(this._lastHoverDataIndex),this.highlight(n),this._labelsBuilder.updateLabels([n])),this._lastHoverDataIndex=n,this._polygonMesh.dataIndex=n},_onmouseout:function(e){e.target&&(this.downplay(this._lastHoverDataIndex),this._lastHoverDataIndex=-1,this._polygonMesh.dataIndex=-1),this._labelsBuilder.updateLabels([])},_updateGroundPlane:function(e,n,t){var r=e.getModel("groundPlane",e);if(this._groundMesh.invisible=!r.get("show",!0),!this._groundMesh.invisible){var i=e.get("shading"),s=this._groundMaterials[i];s||(s=this._groundMaterials.lambert),ot.setMaterialFromModel(i,s,r,t),s.get("normalMap")&&this._groundMesh.geometry.generateTangents(),this._groundMesh.material=s,this._groundMesh.material.set("color",ot.parseColor(r.get("color"))),this._groundMesh.scale.set(n.size[0],n.size[2],1)}},_triangulation:function(e,n,t){this._triangulationResults=[];for(var r=[1/0,1/0,1/0],i=[-1/0,-1/0,-1/0],s=e.coordinateSystem,d=n;d<t;d++){for(var p=[],v=e.getRegionPolygonCoords(d),_=0;_<v.length;_++){var C=v[_].exterior,S=v[_].interiors,k=[],H=[];if(!(C.length<3)){for(var ne=0,pe=0;pe<C.length;pe++)k[ne++]=(Me=C[pe])[0],k[ne++]=Me[1];for(pe=0;pe<S.length;pe++)if(!(S[pe].length<3)){for(var Re=k.length/2,Fe=0;Fe<S[pe].length;Fe++){var Me;k.push((Me=S[pe][Fe])[0]),k.push(Me[1])}H.push(Re)}var Oe=hie(k,H),Be=new Float64Array(k.length/2*3),nt=[],rt=[1/0,1/0,1/0],Ct=[-1/0,-1/0,-1/0],mt=0;for(pe=0;pe<k.length;)wl.set(nt,k[pe++],0,k[pe++]),s&&s.transform&&wl.transformMat4(nt,nt,s.transform),wl.min(rt,rt,nt),wl.max(Ct,Ct,nt),Be[mt++]=nt[0],Be[mt++]=nt[1],Be[mt++]=nt[2];wl.min(r,r,rt),wl.max(i,i,Ct),p.push({points:Be,indices:Oe,min:rt,max:Ct})}}this._triangulationResults.push(p)}this._geoBoundingBox=[r,i]},_getRegionPolygonInfo:function(e){for(var n=this._triangulationResults[e-this._startIndex],t=0,r=0,i=0;i<n.length;i++)t+=n[i].points.length/3,r+=n[i].indices.length/3;return{vertexCount:2*t+4*t,triangleCount:2*r+2*t}},_updatePolygonGeometry:function(e,n,t,r,i,s,d){var p=e.get("projectUVOnGround"),v=n.attributes.position,_=n.attributes.normal,C=n.attributes.texcoord0,S=n.attributes.color,k=this._triangulationResults[t-this._startIndex],H=S.value&&d,ne=n.indices,pe=this.extrudeY?1:2,Me=this.extrudeY?2:1,Re=[this.rootNode.worldTransform.x.len(),this.rootNode.worldTransform.y.len(),this.rootNode.worldTransform.z.len()],Fe=wl.mul([],this._geoBoundingBox[0],Re),Oe=wl.mul([],this._geoBoundingBox[1],Re),Be=Math.max(Oe[0]-Fe[0],Oe[2]-Fe[2]);function rt(Wi,ji,Ra){var Ba=i;!function nt(Wi,ji,Ra){for(var Ba=Wi.points,Cw=Ba.length,So=[],ed=[],As=0;As<Cw;As+=3)So[0]=Ba[As],So[pe]=ji,So[Me]=Ba[As+2],ed[0]=(Ba[As]*Re[0]-Fe[0])/Be,ed[1]=(Ba[As+2]*Re[Me]-Fe[2])/Be,v.set(i,So),H&&S.set(i,d),C.set(i++,ed)}(Wi,ji);for(var Cw=Wi.indices.length,So=0;So<Cw;So++)ne[3*s+So]=Wi.indices[So]+Ba;s+=Wi.indices.length/3}for(var Ct=this.extrudeY?[0,1,0]:[0,0,1],mt=wl.negate([],Ct),Ft=0;Ft<k.length;Ft++){var nn=i,Xt=k[Ft];rt(Xt,0),rt(Xt,r);for(var pn=Xt.points.length/3,mn=0;mn<pn;mn++)_.set(nn+mn,mt),_.set(nn+mn+pn,Ct);var on=[0,3,1,1,3,2],Cn=[[],[],[],[]],Ht=[],ln=[],Zt=[],Zn=[],An=0;for(mn=0;mn<pn;mn++){for(var ri=(mn+1)%pn,kr=(Xt.points[3*ri]-Xt.points[3*mn])*Re[0],gi=(Xt.points[3*ri+2]-Xt.points[3*mn+2])*Re[Me],Dr=Math.sqrt(kr*kr+gi*gi),qr=0;qr<4;qr++){var Qa=0===qr||3===qr,ii=3*(Qa?mn:ri);Cn[qr][0]=Xt.points[ii],Cn[qr][pe]=qr>1?r:0,Cn[qr][Me]=Xt.points[ii+2],v.set(i+qr,Cn[qr]),p?(Zn[0]=(Xt.points[ii]*Re[0]-Fe[0])/Be,Zn[1]=(Xt.points[ii+2]*Re[Me]-Fe[Me])/Be):(Zn[0]=(Qa?An:An+Dr)/Be,Zn[1]=(Cn[qr][pe]*Re[pe]-Fe[pe])/Be),C.set(i+qr,Zn)}for(wl.sub(Ht,Cn[1],Cn[0]),wl.sub(ln,Cn[3],Cn[0]),wl.cross(Zt,Ht,ln),wl.normalize(Zt,Zt),qr=0;qr<4;qr++)_.set(i+qr,Zt),H&&S.set(i+qr,d);for(qr=0;qr<6;qr++)ne[3*s+qr]=on[qr]+i;i+=4,s+=2,An+=Dr}}return n.dirty(),{vertexOffset:i,triangleOffset:s}},_getRegionLinesInfo:function(e,n,t){var r=0,i=0;return n.getRegionModel(e).getModel("itemStyle").get("borderWidth")>0&&n.getRegionPolygonCoords(e).forEach(function(_){var C=_.exterior,S=_.interiors;r+=t.getPolylineVertexCount(C),i+=t.getPolylineTriangleCount(C);for(var k=0;k<S.length;k++)r+=t.getPolylineVertexCount(S[k]),i+=t.getPolylineTriangleCount(S[k])},this),{vertexCount:r,triangleCount:i}},_updateLinesGeometry:function(e,n,t,r,i,s){function d(_){for(var C=new Float64Array(3*_.length),S=0,k=[],H=0;H<_.length;H++)k[0]=_[H][0],k[1]=r+.1,k[2]=_[H][1],s&&wl.transformMat4(k,k,s),C[S++]=k[0],C[S++]=k[1],C[S++]=k[2];return C}var p=[1,1,1,1];n.getRegionPolygonCoords(t).forEach(function(_){var S=_.interiors;e.addPolyline(d(_.exterior),p,i);for(var k=0;k<S.length;k++)e.addPolyline(d(S[k]),p,i)})},highlight:function(e){var n=this._data;if(n){var r=n.getItemModel(e).getModel(["emphasis","itemStyle"]),i=r.get("color"),s=Qr.firstNotNull(r.get("opacity"),Bo(n,e),1);if(null==i){var d=Fo(n,e);i=bt.$_.lift(d,-.4)}null==s&&(s=Bo(n,e));var p=ot.parseColor(i);p[3]*=s,this._setColorOfDataIndex(n,e,p)}},downplay:function(e){var n=this._data;if(n){var t=n.getItemModel(e),r=Qr.firstNotNull(Fo(n,e),t.get(["itemStyle","color"]),"#fff"),i=Qr.firstNotNull(Bo(n,e),t.get(["itemStyle","opacity"]),1),s=ot.parseColor(r);s[3]*=i,this._setColorOfDataIndex(n,e,s)}},dispose:function(){this._labelsBuilder.dispose()},_setColorOfDataIndex:function(e,n,t){if(!(n<this._startIndex&&n>this._endIndex)){for(var r=this._vertexRangeOfDataIndex[2*(n-=this._startIndex)];r<this._vertexRangeOfDataIndex[2*n+1];r++)this._polygonMesh.geometry.attributes.color.set(r,t);this._polygonMesh.geometry.dirty(),this._api.getZr().refresh()}}};const XI=W3,Aie=bt.Ir.extend({type:"geo3D",__ecgl__:!0,init:function(e,n){this._geo3DBuilder=new XI(n),this.groupGL=new ot.Node,this._lightRoot=new ot.Node,this._sceneHelper=new Hy(this._lightRoot),this._sceneHelper.initLight(this._lightRoot),this._control=new BI({zr:n.getZr()}),this._control.init()},render:function(e,n,t){this.groupGL.add(this._geo3DBuilder.rootNode);var r=e.coordinateSystem;if(r&&r.viewGL){r.viewGL.add(this._lightRoot),e.get("show")?r.viewGL.add(this.groupGL):r.viewGL.remove(this.groupGL);var i=this._control;i.setViewGL(r.viewGL);var s=e.getModel("viewControl");i.setFromViewControlModel(s,0),this._sceneHelper.setScene(r.viewGL.scene),this._sceneHelper.updateLight(e),r.viewGL.setPostEffect(e.getModel("postEffect"),t),r.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling")),this._geo3DBuilder.update(e,n,t,0,e.getData().count());var d=r.viewGL.isLinearSpace()?"define":"undefine";this._geo3DBuilder.rootNode.traverse(function(p){p.material&&p.material[d]("fragment","SRGB_DECODE")}),i.off("update"),i.on("update",function(){t.dispatchAction({type:"geo3DChangeCamera",alpha:i.getAlpha(),beta:i.getBeta(),distance:i.getDistance(),center:i.getCenter(),from:this.uid,geo3DId:e.id})}),i.update()}},afterRender:function(e,n,t,r){var i=r.renderer;this._sceneHelper.updateAmbientCubemap(i,e,t),this._sceneHelper.updateSkybox(i,e,t)},dispose:function(){this._control.dispose(),this._geo3DBuilder.dispose()}});var Iie=z(776),Pie={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]},Lie=Ka.vec3,Yy=Ka.mat4,Oie=[Iie.Z,function Rie(e,n){if("world"===e){var t=Pie[n.name];t&&n.setCenter([t[0],t[1]])}}];function j3(e,n,t,r,i){this.name=e,this.map=n,this.regionHeight=0,this.regions=[],this._nameCoordMap={},this.loadGeoJson(t,r,i),this.transform=Yy.identity(new Float64Array(16)),this.invTransform=Yy.identity(new Float64Array(16)),this.extrudeY=!0}j3.prototype={constructor:j3,type:"geo3D",dimensions:["lng","lat","alt"],containPoint:function(){},loadGeoJson:function(e,n,t){var r=bt.Nu||bt.pQ;try{this.regions=e?r(e):[]}catch(_){throw"Invalid geoJson format\n"+_}n=n||{},t=t||{};for(var i=this.regions,s={},d=0;d<i.length;d++){var p=i[d].name;i[d].name=p=t[p]||p,s[p]=i[d],this.addGeoCoord(p,i[d].getCenter());var v=n[p];v&&i[d].transformTo(v.left,v.top,v.width,v.height)}this._regionsMap=s,this._geoRect=null,Oie.forEach(function(_){_(this)},this)},getGeoBoundingRect:function(){if(this._geoRect)return this._geoRect;for(var e,n=this.regions,t=0;t<n.length;t++){var r=n[t].getBoundingRect();(e=e||r.clone()).union(r)}return this._geoRect=e||new bt.Q.BoundingRect(0,0,0,0)},addGeoCoord:function(e,n){this._nameCoordMap[e]=n},getRegion:function(e){return this._regionsMap[e]},getRegionByCoord:function(e){for(var n=this.regions,t=0;t<n.length;t++)if(n[t].contain(e))return n[t]},setSize:function(e,n,t){this.size=[e,n,t];var r=this.getGeoBoundingRect(),i=e/r.width,s=-t/r.height,d=-e/2-r.x*i,p=t/2-r.y*s,v=this.extrudeY?[d,0,p]:[d,p,0],_=this.extrudeY?[i,1,s]:[i,s,1],C=this.transform;Yy.identity(C),Yy.translate(C,C,v),Yy.scale(C,C,_),Yy.invert(this.invTransform,C)},dataToPoint:function(e,n){n=n||[];var t=this.extrudeY?1:2,r=this.extrudeY?2:1,i=e[2];return isNaN(i)&&(i=0),n[0]=e[0],n[r]=e[1],n[t]=this.altitudeAxis?this.altitudeAxis.dataToCoord(i):0,n[t]+=this.regionHeight,Lie.transformMat4(n,n,this.transform),n},pointToData:function(e,n){}};const A6=j3;function kie(e,n){var t=e.getBoxLayoutParams(),r=(0,WI.ME)(t,{width:n.getWidth(),height:n.getHeight()});r.y=n.getHeight()-r.y-r.height,this.viewGL.setViewport(r.x,r.y,r.width,r.height,n.getDevicePixelRatio());var i=this.getGeoBoundingRect(),s=i.width/i.height*(e.get("aspectScale")||.75),d=e.get("boxWidth"),p=e.get("boxDepth"),v=e.get("boxHeight");null==v&&(v=5),isNaN(d)&&isNaN(p)&&(d=100),isNaN(p)?p=d/s:isNaN(d)&&(d=p/s),this.setSize(d,v,p),this.regionHeight=e.get("regionHeight"),this.altitudeAxis&&this.altitudeAxis.setExtent(0,Math.max(v-this.regionHeight,0))}function Nie(e,n){var t=[1/0,-1/0];if(e.eachSeries(function(i){if(i.coordinateSystem===this&&"series.map3D"!==i.type){var s=i.getData(),d=i.coordDimToDataDim("alt"),p=d&&d[0];if(p){var v=s.getDataExtent(p,!0);t[0]=Math.min(t[0],v[0]),t[1]=Math.max(t[1],v[1])}}},this),t&&isFinite(t[1]-t[0])){var r=bt._y.createScale(t,{type:"value",min:"dataMin",max:"dataMax"});this.altitudeAxis=new bt.RD("altitude",r),this.resize(this.model,n)}}var I6=0,P6={dimensions:A6.prototype.dimensions,create:function(e,n){var t=[];if(!bt.FU)throw new Error("geo3D component depends on geo component");function r(i,s){var d=P6.createGeo3D(i);i.__viewGL=i.__viewGL||new Sf,d.viewGL=i.__viewGL,i.coordinateSystem=d,d.model=i,t.push(d),d.resize=kie,d.resize(i,n),d.update=Nie}return e.eachComponent("geo3D",function(i,s){r(i)}),e.eachSeriesByType("map3D",function(i,s){var d=i.get("coordinateSystem");null==d&&(d="geo3D"),"geo3D"===d&&r(i)}),e.eachSeries(function(i){if("geo3D"===i.get("coordinateSystem")){if("series.map3D"===i.type)return;var s=i.getReferringComponents("geo3D").models[0];if(s||(s=e.getComponent("geo3D")),!s)throw new Error('geo "'+Qr.firstNotNull(i.get("geo3DIndex"),i.get("geo3DId"),0)+'" not found');i.coordinateSystem=s.coordinateSystem}}),t},createGeo3D:function(e){var t,n=e.get("map");return"string"==typeof n?(t=n,n=bt.FU(n)):n&&n.features&&(n={geoJson:n}),null==t&&(t="GEO_ANONYMOUS_"+I6++),new A6(t+I6++,t,n&&n.geoJson,n&&n.specialAreas,e.get("nameMap"))}};const R6=P6;function L6(e){e.registerComponentModel(die),e.registerComponentView(Aie),e.registerAction({type:"geo3DChangeCamera",event:"geo3dcamerachanged",update:"series:updateCamera"},function(n,t){t.eachComponent({mainType:"geo3D",query:n},function(r){r.setView(n)})}),e.registerCoordinateSystem("geo3D",R6)}function O6(e,n){e.id=e.id||e.name||n+""}(0,bt.D$)(L6);var eg=bt.tF.extend({type:"globe",layoutMode:"box",coordinateSystem:null,init:function(){eg.superApply(this,"init",arguments),bt.D5.each(this.option.layers,function(e,n){bt.D5.merge(e,this.defaultLayerOption),O6(e,n)},this)},mergeOption:function(e){var n=this.option.layers;function t(d){return bt.D5.reduce(d,function(p,v,_){return O6(v,_),p[v.id]=v,p},{})}if(this.option.layers=null,eg.superApply(this,"mergeOption",arguments),n&&n.length){var r=t(e.layers),i=t(n);for(var s in r)i[s]?bt.D5.merge(i[s],r[s],!0):n.push(e.layers[s]);this.option.layers=n}bt.D5.each(this.option.layers,function(d){bt.D5.merge(d,this.defaultLayerOption)},this)},optionUpdated:function(){this.updateDisplacementHash()},defaultLayerOption:{show:!0,type:"overlay"},defaultOption:{show:!0,zlevel:-10,left:0,top:0,width:"100%",height:"100%",environment:"auto",baseColor:"#fff",baseTexture:"",heightTexture:"",displacementTexture:"",displacementScale:0,displacementQuality:"medium",globeRadius:100,globeOuterRadius:150,shading:"lambert",light:{main:{time:""}},atmosphere:{show:!1,offset:5,color:"#ffffff",glowPower:6,innerGlowPower:2},viewControl:{autoRotate:!0,panSensitivity:0,targetCoord:null},layers:[]},setDisplacementData:function(e,n,t){this.displacementData=e,this.displacementWidth=n,this.displacementHeight=t},getDisplacementTexture:function(){return this.get("displacementTexture")||this.get("heightTexture")},getDisplacemenScale:function(){var e=this.getDisplacementTexture(),n=this.get("displacementScale");return(!e||"none"===e)&&(n=0),n},hasDisplacement:function(){return this.getDisplacemenScale()>0},_displacementChanged:!0,_displacementScale:0,updateDisplacementHash:function(){var e=this.getDisplacementTexture(),n=this.getDisplacemenScale();this._displacementChanged=this._displacementTexture!==e||this._displacementScale!==n,this._displacementTexture=e,this._displacementScale=n},isDisplacementChanged:function(){return this._displacementChanged}});bt.D5.merge(eg.prototype,kI),bt.D5.merge(eg.prototype,Vy),bt.D5.merge(eg.prototype,zy),bt.D5.merge(eg.prototype,Wy);const Fie=eg;var k6=Math.PI,Pu=Math.sin,ah=Math.cos,N6=Math.tan,F6=Math.asin,B6=Math.atan2,tg=k6/180,$I=23.4397*tg;function Gie(e,n){return B6(Pu(e)*ah($I)-N6(n)*Pu($I),ah(e))}function Wie(e,n){return F6(Pu(n)*ah($I)+ah(n)*Pu($I)*Pu(e))}function jie(e,n,t){return B6(Pu(e),ah(e)*Pu(n)-N6(t)*ah(n))}function Zie(e,n,t){return F6(Pu(n)*Pu(t)+ah(n)*ah(t)*ah(e))}var V6={};V6.getPosition=function(e,n,t){var r=tg*-t,i=tg*n,s=function Uie(e){return function Hie(e){return e.valueOf()/864e5-.5+2440588}(e)-2451545}(e),d=function Kie(e){var n=function Xie(e){return tg*(357.5291+.98560028*e)}(e),t=function $ie(e){return e+tg*(1.9148*Pu(e)+.02*Pu(2*e)+3e-4*Pu(3*e))+102.9372*tg+k6}(n);return{dec:Wie(t,0),ra:Gie(t,0)}}(s),p=function Yie(e,n){return tg*(280.16+360.9856235*e)-n}(s,r)-d.ra;return{azimuth:jie(p,i,d.dec),altitude:Zie(p,i,d.dec)}};const Qie=V6;ot.Shader.import(E8),ot.Shader.import("@export ecgl.atmosphere.vertex\nattribute vec3 position: POSITION;\nattribute vec3 normal : NORMAL;\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform mat4 normalMatrix : WORLDINVERSETRANSPOSE;\n\nvarying vec3 v_Normal;\n\nvoid main() {\n v_Normal = normalize((normalMatrix * vec4(normal, 0.0)).xyz);\n gl_Position = worldViewProjection * vec4(position, 1.0);\n}\n@end\n\n\n@export ecgl.atmosphere.fragment\nuniform mat4 viewTranspose: VIEWTRANSPOSE;\nuniform float glowPower;\nuniform vec3 glowColor;\n\nvarying vec3 v_Normal;\n\nvoid main() {\n float intensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);\n gl_FragColor = vec4(glowColor, intensity * intensity);\n}\n@end");const Jie=bt.Ir.extend({type:"globe",__ecgl__:!0,_displacementScale:0,init:function(e,n){this.groupGL=new ot.Node,this._sphereGeometry=new ot.SphereGeometry({widthSegments:200,heightSegments:100,dynamic:!0}),this._overlayGeometry=new ot.SphereGeometry({widthSegments:80,heightSegments:40}),this._planeGeometry=new ot.PlaneGeometry,this._earthMesh=new ot.Mesh({renderNormal:!0}),this._atmosphereMesh=new ot.Mesh,this._atmosphereGeometry=new ot.SphereGeometry({widthSegments:80,heightSegments:40}),this._atmosphereMaterial=new ot.Material({shader:new ot.Shader(ot.Shader.source("ecgl.atmosphere.vertex"),ot.Shader.source("ecgl.atmosphere.fragment")),transparent:!0}),this._atmosphereMesh.geometry=this._atmosphereGeometry,this._atmosphereMesh.material=this._atmosphereMaterial,this._atmosphereMesh.frontFace=ot.Mesh.CW,this._lightRoot=new ot.Node,this._sceneHelper=new Hy,this._sceneHelper.initLight(this._lightRoot),this.groupGL.add(this._atmosphereMesh),this.groupGL.add(this._earthMesh),this._control=new BI({zr:n.getZr()}),this._control.init(),this._layerMeshes={}},render:function(e,n,t){var r=e.coordinateSystem,i=e.get("shading");r.viewGL.add(this._lightRoot),e.get("show")?r.viewGL.add(this.groupGL):r.viewGL.remove(this.groupGL),this._sceneHelper.setScene(r.viewGL.scene),r.viewGL.setPostEffect(e.getModel("postEffect"),t),r.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling"));var s=this._earthMesh;s.geometry=this._sphereGeometry;var d="ecgl."+i;(!s.material||s.material.shader.name!==d)&&(s.material=ot.createMaterial(d)),ot.setMaterialFromModel(i,s.material,e,t),["roughnessMap","metalnessMap","detailMap","normalMap"].forEach(function(S){var k=s.material.get(S);k&&(k.flipY=!1)}),s.material.set("color",ot.parseColor(e.get("baseColor")));var p=.99*r.radius;if(s.scale.set(p,p,p),e.get("atmosphere.show")){s.material.define("both","ATMOSPHERE_ENABLED"),this._atmosphereMesh.invisible=!1,this._atmosphereMaterial.setUniforms({glowPower:e.get("atmosphere.glowPower")||6,glowColor:e.get("atmosphere.color")||"#ffffff"}),s.material.setUniforms({glowPower:e.get("atmosphere.innerGlowPower")||2,glowColor:e.get("atmosphere.color")||"#ffffff"});var v=e.get("atmosphere.offset")||5;this._atmosphereMesh.scale.set(p+v,p+v,p+v)}else s.material.undefine("both","ATMOSPHERE_ENABLED"),this._atmosphereMesh.invisible=!0;var _=s.material.setTextureImage("diffuseMap",e.get("baseTexture"),t,{flipY:!1,anisotropic:8});_&&_.surface&&_.surface.attachToMesh(s);var C=s.material.setTextureImage("bumpMap",e.get("heightTexture"),t,{flipY:!1,anisotropic:8});C&&C.surface&&C.surface.attachToMesh(s),s.material[e.get("postEffect.enable")?"define":"undefine"]("fragment","SRGB_DECODE"),this._updateLight(e,t),this._displaceVertices(e,t),this._updateViewControl(e,t),this._updateLayers(e,t)},afterRender:function(e,n,t,r){var i=r.renderer;this._sceneHelper.updateAmbientCubemap(i,e,t),this._sceneHelper.updateSkybox(i,e,t)},_updateLayers:function(e,n){var t=e.coordinateSystem,r=e.get("layers"),i=t.radius,s=[],d=[],p=[],v=[];bt.D5.each(r,function(H){var ne=new bt.Hn(H),pe=ne.get("type"),Me=ot.loadTexture(ne.get("texture"),n,{flipY:!1,anisotropic:8});if(Me.surface&&Me.surface.attachToMesh(this._earthMesh),"blend"===pe){var Re=ne.get("blendTo"),Fe=Qr.firstNotNull(ne.get("intensity"),1);"emission"===Re?(p.push(Me),v.push(Fe)):(s.push(Me),d.push(Fe))}else{var Oe=ne.get("id"),Be=this._layerMeshes[Oe];Be||(Be=this._layerMeshes[Oe]=new ot.Mesh({geometry:this._overlayGeometry,castShadow:!1,ignorePicking:!0})),"lambert"===ne.get("shading")?(Be.material=Be.__lambertMaterial||new ot.Material({autoUpdateTextureStatus:!1,shader:ot.createShader("ecgl.lambert"),transparent:!0,depthMask:!1}),Be.__lambertMaterial=Be.material):(Be.material=Be.__colorMaterial||new ot.Material({autoUpdateTextureStatus:!1,shader:ot.createShader("ecgl.color"),transparent:!0,depthMask:!1}),Be.__colorMaterial=Be.material),Be.material.enableTexture("diffuseMap");var rt=ne.get("distance"),Ct=i+(rt??t.radius/100);Be.scale.set(Ct,Ct,Ct),i=Ct;var mt=this._blankTexture||(this._blankTexture=ot.createBlankTexture("rgba(255, 255, 255, 0)"));Be.material.set("diffuseMap",mt),ot.loadTexture(ne.get("texture"),n,{flipY:!1,anisotropic:8},function(Ft){Ft.surface&&Ft.surface.attachToMesh(Be),Be.material.set("diffuseMap",Ft),n.getZr().refresh()}),ne.get("show")?this.groupGL.add(Be):this.groupGL.remove(Be)}},this);var _=this._earthMesh.material;_.define("fragment","LAYER_DIFFUSEMAP_COUNT",s.length),_.define("fragment","LAYER_EMISSIVEMAP_COUNT",p.length),_.set("layerDiffuseMap",s),_.set("layerDiffuseIntensity",d),_.set("layerEmissiveMap",p),_.set("layerEmissionIntensity",v);var C=e.getModel("debug.wireframe");if(C.get("show")){_.define("both","WIREFRAME_TRIANGLE");var S=ot.parseColor(C.get("lineStyle.color")||"rgba(0,0,0,0.5)"),k=Qr.firstNotNull(C.get("lineStyle.width"),1);_.set("wireframeLineWidth",k),_.set("wireframeLineColor",S)}else _.undefine("both","WIREFRAME_TRIANGLE")},_updateViewControl:function(e,n){var t=e.coordinateSystem,r=e.getModel("viewControl"),s=this,p=this._control;p.setViewGL(t.viewGL);var _,C,v=r.get("targetCoord");null!=v&&(C=v[0]+90,_=v[1]),p.setFromViewControlModel(r,{baseDistance:t.radius,alpha:_,beta:C}),p.off("update"),p.on("update",function(){n.dispatchAction(function d(){return{type:"globeChangeCamera",alpha:p.getAlpha(),beta:p.getBeta(),distance:p.getDistance()-t.radius,center:p.getCenter(),from:s.uid,globeId:e.id}}())})},_displaceVertices:function(e,n){var t=e.get("displacementQuality"),r=e.get("debug.wireframe.show"),i=e.coordinateSystem;if(e.isDisplacementChanged()||t!==this._displacementQuality||r!==this._showDebugWireframe){this._displacementQuality=t,this._showDebugWireframe=r;var s=this._sphereGeometry,d={low:100,medium:200,high:400,ultra:800}[t]||200,p=d/2;(s.widthSegments!==d||r)&&(s.widthSegments=d,s.heightSegments=p,s.build()),this._doDisplaceVertices(s,i),r&&s.generateBarycentric()}},_doDisplaceVertices:function(e,n){var t=e.attributes.position.value,r=e.attributes.texcoord0.value,i=e.__originalPosition;(!i||i.length!==t.length)&&((i=new Float32Array(t.length)).set(t),e.__originalPosition=i);for(var s=n.displacementWidth,d=n.displacementHeight,p=n.displacementData,v=0;v<e.vertexCount;v++){var _=3*v,C=2*v,S=i[_+1],k=i[_+2],H=i[_+3],ne=r[C++],pe=r[C++],Me=Math.round(ne*(s-1)),Re=Math.round(pe*(d-1)),Oe=p?p[Re*s+Me]:0;t[_+1]=S+S*Oe,t[_+2]=k+k*Oe,t[_+3]=H+H*Oe}e.generateVertexNormals(),e.dirty(),e.updateBoundingBox()},_updateLight:function(e,n){var t=this._earthMesh;this._sceneHelper.updateLight(e);var r=this._sceneHelper.mainLight,i=e.get("light.main.time")||new Date,s=Qie.getPosition(bt.Rx.parseDate(i),0,0),d=Math.cos(s.altitude);r.position.y=-d*Math.cos(s.azimuth),r.position.x=Math.sin(s.altitude),r.position.z=d*Math.sin(s.azimuth),r.lookAt(t.getWorldPosition())},dispose:function(e,n){this.groupGL.removeAll(),this._control.dispose()}});var eae=Ka.vec3;function Z3(e){this.radius=e,this.viewGL=null,this.displacementData=null}Z3.prototype={constructor:Z3,dimensions:["lng","lat","alt"],type:"globe",containPoint:function(){},setDisplacementData:function(e,n,t){this.displacementData=e,this.displacementWidth=n,this.displacementHeight=t},_getDisplacementScale:function(e,n){var r=(90-n)/180*(this.displacementHeight-1),i=Math.round((e+180)/360*(this.displacementWidth-1))+Math.round(r)*this.displacementWidth;return this.displacementData[i]},dataToPoint:function(e,n){var t=e[0],r=e[1],i=e[2]||0,s=this.radius;this.displacementData&&(s*=1+this._getDisplacementScale(t,r)),this.altitudeAxis&&(s+=this.altitudeAxis.dataToCoord(i)),t=t*Math.PI/180,r=r*Math.PI/180;var d=Math.cos(r)*s;return(n=n||[])[0]=-d*Math.cos(t+Math.PI),n[1]=Math.sin(r)*s,n[2]=d*Math.sin(t+Math.PI),n},pointToData:function(e,n){var t=e[0],r=e[1],i=e[2],s=eae.len(e);t/=s,i/=s;var d=Math.asin(r/=s),p=Math.atan2(i,-t);p<0&&(p=2*Math.PI+p);var v=180*d/Math.PI,_=180*p/Math.PI-180;return(n=n||[])[0]=_,n[1]=v,n[2]=s-this.radius,this.altitudeAxis&&(n[2]=this.altitudeAxis.coordToData(n[2])),n}};const z6=Z3;function nae(e,n){var t=e.getBoxLayoutParams(),r=(0,WI.ME)(t,{width:n.getWidth(),height:n.getHeight()});r.y=n.getHeight()-r.y-r.height,this.viewGL.setViewport(r.x,r.y,r.width,r.height,n.getDevicePixelRatio()),this.radius=e.get("globeRadius");var i=e.get("globeOuterRadius");this.altitudeAxis&&this.altitudeAxis.setExtent(0,i-this.radius)}function rae(e,n){var t=[1/0,-1/0];if(e.eachSeries(function(i){if(i.coordinateSystem===this){var s=i.getData(),d=i.coordDimToDataDim("alt"),p=d&&d[0];if(p){var v=s.getDataExtent(p,!0);t[0]=Math.min(t[0],v[0]),t[1]=Math.max(t[1],v[1])}}},this),t&&isFinite(t[1]-t[0])){var r=bt._y.createScale(t,{type:"value",min:"dataMin",max:"dataMax"});this.altitudeAxis=new bt.RD("altitude",r),this.resize(this.model,n)}}var iae={dimensions:z6.prototype.dimensions,create:function(e,n){var t=[];return e.eachComponent("globe",function(r){r.__viewGL=r.__viewGL||new Sf;var i=new z6;i.viewGL=r.__viewGL,r.coordinateSystem=i,i.model=r,t.push(i),i.resize=nae,i.resize(r,n),i.update=rae}),e.eachSeries(function(r){if("globe"===r.get("coordinateSystem")){var i=r.getReferringComponents("globe").models[0];if(i||(i=e.getComponent("globe")),!i)throw new Error('globe "'+Qr.firstNotNull(r.get("globe3DIndex"),r.get("globe3DId"),0)+'" not found');r.coordinateSystem=i.coordinateSystem}}),e.eachComponent("globe",function(r,i){var s=r.coordinateSystem,d=r.getDisplacementTexture(),p=r.getDisplacemenScale();if(r.isDisplacementChanged()){if(r.hasDisplacement()){var v=!0;ot.loadTexture(d,n,function(_){var S=function tae(e,n){var t=document.createElement("canvas"),r=t.getContext("2d"),i=e.width,s=e.height;t.width=i,t.height=s,r.drawImage(e,0,0,i,s);for(var d=r.getImageData(0,0,i,s).data,p=new Float32Array(d.length/4),v=0;v<d.length/4;v++)p[v]=d[4*v]/255*n;return{data:p,width:i,height:s}}(_.image,p);r.setDisplacementData(S.data,S.width,S.height),v||n.dispatchAction({type:"globeUpdateDisplacment"})}),v=!1}else s.setDisplacementData(null,0,0);s.setDisplacementData(r.displacementData,r.displacementWidth,r.displacementHeight)}}),t}};const aae=iae;(0,bt.D$)(function oae(e){e.registerComponentModel(Fie),e.registerComponentView(Jie),e.registerCoordinateSystem("globe",aae),e.registerAction({type:"globeChangeCamera",event:"globecamerachanged",update:"series:updateCamera"},function(n,t){t.eachComponent({mainType:"globe",query:n},function(r){r.setView(n)})}),e.registerAction({type:"globeUpdateDisplacment",event:"globedisplacementupdated",update:"update"},function(n,t){})});var H6=["zoom","center","pitch","bearing"],Y3=bt.tF.extend({type:"mapbox3D",layoutMode:"box",coordinateSystem:null,defaultOption:{zlevel:-10,style:"mapbox://styles/mapbox/light-v9",center:[0,0],zoom:0,pitch:0,bearing:0,light:{main:{alpha:20,beta:30}},altitudeScale:1,boxHeight:"auto"},getMapboxCameraOption:function(){var e=this;return H6.reduce(function(n,t){return n[t]=e.get(t),n},{})},setMapboxCameraOption:function(e){null!=e&&H6.forEach(function(n){null!=e[n]&&(this.option[n]=e[n])},this)},getMapbox:function(){return this._mapbox},setMapbox:function(e){this._mapbox=e}});bt.D5.merge(Y3.prototype,Vy),bt.D5.merge(Y3.prototype,zy);const sae=Y3;function Df(e,n){if(this.id=e,this.zr=n,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;",!mapboxgl)throw new Error("Mapbox GL library must be included. See https://www.mapbox.com/mapbox-gl-js/api/");this._mapbox=new mapboxgl.Map({container:this.dom}),this._initEvents()}Df.prototype.setUnpainted=function(){},Df.prototype.resize=function(){this._mapbox.resize()},Df.prototype.getMapbox=function(){return this._mapbox},Df.prototype.clear=function(){},Df.prototype.refresh=function(){this._mapbox.resize()};var U6=["mousedown","mouseup","click","dblclick","mousemove","mousewheel","wheel","touchstart","touchend","touchmove","touchcancel"];Df.prototype._initEvents=function(){var e=this._mapbox.getCanvasContainer();this._handlers=this._handlers||{contextmenu:function(n){return n.preventDefault(),!1}},U6.forEach(function(n){this._handlers[n]=function(t){var r={};for(var i in t)r[i]=t[i];r.bubbles=!1;var s=new t.constructor(t.type,r);e.dispatchEvent(s)},this.zr.dom.addEventListener(n,this._handlers[n])},this),this.zr.dom.addEventListener("contextmenu",this._handlers.contextmenu)},Df.prototype.dispose=function(){U6.forEach(function(e){this.zr.dom.removeEventListener(e,this._handlers[e])},this)};const lae=Df,G6="\n@export ecgl.displayShadow.vertex\n\n@import ecgl.common.transformUniforms\n\n@import ecgl.common.uv.header\n\n@import ecgl.common.attributes\n\nvarying vec3 v_WorldPosition;\n\nvarying vec3 v_Normal;\n\nvoid main()\n{\n @import ecgl.common.uv.main\n v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);\n\n v_WorldPosition = (world * vec4(position, 1.0)).xyz;\n gl_Position = worldViewProjection * vec4(position, 1.0);\n}\n\n@end\n\n\n@export ecgl.displayShadow.fragment\n\n@import ecgl.common.uv.fragmentHeader\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nuniform float roughness: 0.2;\n\n#ifdef DIRECTIONAL_LIGHT_COUNT\n@import clay.header.directional_light\n#endif\n\n@import ecgl.common.ssaoMap.header\n\n@import clay.plugin.compute_shadow_map\n\nvoid main()\n{\n float shadow = 1.0;\n\n @import ecgl.common.ssaoMap.main\n\n#if defined(DIRECTIONAL_LIGHT_COUNT) && defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];\n if(shadowEnabled)\n {\n computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);\n }\n for (int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++) {\n shadow = min(shadow, shadowContribsDir[i] * 0.5 + 0.5);\n }\n#endif\n\n shadow *= 0.5 + ao * 0.5;\n shadow = clamp(shadow, 0.0, 1.0);\n\n gl_FragColor = vec4(vec3(0.0), 1.0 - shadow);\n}\n\n@end";ot.Shader.import(G6);const uae=bt.Ir.extend({type:"mapbox3D",__ecgl__:!0,init:function(e,n){var t=n.getZr();this._zrLayer=new lae("mapbox3D",t),t.painter.insertLayer(-1e3,this._zrLayer),this._lightRoot=new ot.Node,this._sceneHelper=new Hy(this._lightRoot),this._sceneHelper.initLight(this._lightRoot);var r=this._zrLayer.getMapbox(),i=this._dispatchInteractAction.bind(this,n,r);["zoom","rotate","drag","pitch","rotate","move"].forEach(function(s){r.on(s,i)}),this._groundMesh=new ot.Mesh({geometry:new ot.PlaneGeometry,material:new ot.Material({shader:new ot.Shader({vertex:ot.Shader.source("ecgl.displayShadow.vertex"),fragment:ot.Shader.source("ecgl.displayShadow.fragment")}),depthMask:!1}),renderOrder:-100,culling:!1,castShadow:!1,$ignorePicking:!0,renderNormal:!0})},render:function(e,n,t){var r=this._zrLayer.getMapbox(),i=e.get("style"),s=JSON.stringify(i);s!==this._oldStyleStr&&i&&r.setStyle(i),this._oldStyleStr=s,r.setCenter(e.get("center")),r.setZoom(e.get("zoom")),r.setPitch(e.get("pitch")),r.setBearing(e.get("bearing")),e.setMapbox(r);var d=e.coordinateSystem;d.viewGL.scene.add(this._lightRoot),d.viewGL.add(this._groundMesh),this._updateGroundMesh(),this._sceneHelper.setScene(d.viewGL.scene),this._sceneHelper.updateLight(e),d.viewGL.setPostEffect(e.getModel("postEffect"),t),d.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling")),this._mapbox3DModel=e},afterRender:function(e,n,t,r){var i=r.renderer;this._sceneHelper.updateAmbientCubemap(i,e,t),this._sceneHelper.updateSkybox(i,e,t),e.coordinateSystem.viewGL.scene.traverse(function(s){s.material&&(s.material.define("fragment","NORMAL_UP_AXIS",2),s.material.define("fragment","NORMAL_FRONT_AXIS",1))})},updateCamera:function(e,n,t,r){e.coordinateSystem.setCameraOption(r),this._updateGroundMesh(),t.getZr().refresh()},_dispatchInteractAction:function(e,n,t){e.dispatchAction({type:"mapbox3DChangeCamera",pitch:n.getPitch(),zoom:n.getZoom(),center:n.getCenter().toArray(),bearing:n.getBearing(),mapbox3DId:this._mapbox3DModel&&this._mapbox3DModel.id})},_updateGroundMesh:function(){if(this._mapbox3DModel){var e=this._mapbox3DModel.coordinateSystem,n=e.dataToPoint(e.center);this._groundMesh.position.set(n[0],n[1],-.001);var t=new ot.Plane(new ot.Vector3(0,0,1),0),r=e.viewGL.camera.castRay(new ot.Vector2(-1,-1)),i=e.viewGL.camera.castRay(new ot.Vector2(1,1)),s=r.intersectPlane(t),d=i.intersectPlane(t),p=s.dist(d)/e.viewGL.rootNode.scale.x;this._groundMesh.scale.set(p,p,1)}},dispose:function(e,n){this._zrLayer&&this._zrLayer.dispose(),n.getZr().painter.delLayer(-1e3)}});var Mf=Ka.mat4,X3=.6435011087932844,Sl=Math.PI;function $3(){this.width=0,this.height=0,this.altitudeScale=1,this.boxHeight="auto",this.bearing=0,this.pitch=0,this.center=[0,0],this.zoom=0,this.maxPitch=60,this.zoomOffset=0}$3.prototype={constructor:$3,dimensions:["lng","lat","alt"],containPoint:function(){},setCameraOption:function(e){this.bearing=e.bearing,this.pitch=e.pitch,this.center=e.center,this.zoom=e.zoom,this._origin||(this._origin=this.projectOnTileWithScale(this.center,512)),null==this._initialZoom&&(this._initialZoom=this.zoom),this.updateTransform()},updateTransform:function(){if(this.height){var e=.5/Math.tan(X3/2)*this.height*.1,n=Math.max(Math.min(this.pitch,this.maxPitch),0)/180*Math.PI,t=X3/2,r=Math.PI/2+n,i=Math.sin(t)*e/Math.sin(Math.PI-r-t),d=1.1*(Math.cos(Math.PI/2-n)*i+e);this.pitch>50&&(d=1e3),Mf.perspective(p=[],X3,this.width/this.height,1,d),this.viewGL.camera.projectionMatrix.setArray(p),this.viewGL.camera.decomposeProjectionMatrix();var p=Mf.identity([]),v=this.dataToPoint(this.center);Mf.scale(p,p,[1,-1,1]),Mf.translate(p,p,[0,0,-e]),Mf.rotateX(p,p,n),Mf.rotateZ(p,p,-this.bearing/180*Math.PI),Mf.translate(p,p,[-v[0]*this.getScale()*.1,-v[1]*this.getScale()*.1,0]),this.viewGL.camera.viewMatrix.array=p;var _=[];Mf.invert(_,p),this.viewGL.camera.worldTransform.array=_,this.viewGL.camera.decomposeWorldTransform();var S,C=512*this.getScale();S=this.altitudeExtent&&!isNaN(this.boxHeight)?this.boxHeight/(this.altitudeExtent[1]-this.altitudeExtent[0])*this.getScale()/Math.pow(2,this._initialZoom-this.zoomOffset):C/(2*Math.PI*6378e3*Math.abs(Math.cos(this.center[1]*(Math.PI/180))))*this.altitudeScale*.1,this.viewGL.rootNode.scale.set(.1*this.getScale(),.1*this.getScale(),S)}},getScale:function(){return Math.pow(2,this.zoom-this.zoomOffset)},projectOnTile:function(e,n){return this.projectOnTileWithScale(e,512*this.getScale(),n)},projectOnTileWithScale:function(e,n,t){var p=n*(e[0]*Sl/180+Sl)/(2*Sl),v=n*(Sl-Math.log(Math.tan(Sl/4+e[1]*Sl/180*.5)))/(2*Sl);return(t=t||[])[0]=p,t[1]=v,t},unprojectFromTile:function(e,n){return this.unprojectOnTileWithScale(e,512*this.getScale(),n)},unprojectOnTileWithScale:function(e,n,t){var s=e[0]/n*(2*Sl)-Sl,d=2*(Math.atan(Math.exp(Sl-e[1]/n*(2*Sl)))-Sl/4);return(t=t||[])[0]=180*s/Sl,t[1]=180*d/Sl,t},dataToPoint:function(e,n){return(n=this.projectOnTileWithScale(e,512,n))[0]-=this._origin[0],n[1]-=this._origin[1],n[2]=isNaN(e[2])?0:e[2],isNaN(e[2])||(n[2]=e[2],this.altitudeExtent&&(n[2]-=this.altitudeExtent[0])),n}};const KI=$3;function cw(){KI.apply(this,arguments)}function W6(e,n,t){function r(s,d){var p=d.getWidth(),v=d.getHeight(),_=d.getDevicePixelRatio();this.viewGL.setViewport(0,0,p,v,_),this.width=p,this.height=v,this.altitudeScale=s.get("altitudeScale"),this.boxHeight=s.get("boxHeight")}function i(s,d){if("auto"!==this.model.get("boxHeight")){var p=[1/0,-1/0];s.eachSeries(function(v){if(v.coordinateSystem===this){var _=v.getData(),C=v.coordDimToDataDim("alt")[0];if(C){var S=_.getDataExtent(C,!0);p[0]=Math.min(p[0],S[0]),p[1]=Math.max(p[1],S[1])}}},this),p&&isFinite(p[1]-p[0])&&(this.altitudeExtent=p)}}return{dimensions:n.prototype.dimensions,create:function(s,d){var p=[];return s.eachComponent(e,function(v){var _=v.__viewGL;_||(_=v.__viewGL=new Sf).setRootNode(new ot.Node);var C=new n;C.viewGL=v.__viewGL,C.resize=r,C.resize(v,d),p.push(C),v.coordinateSystem=C,C.model=v,C.update=i}),s.eachSeries(function(v){if(v.get("coordinateSystem")===e){var _=v.getReferringComponents(e).models[0];if(_||(_=s.getComponent(e)),!_)throw new Error(e+' "'+Qr.firstNotNull(v.get(e+"Index"),v.get(e+"Id"),0)+'" not found');v.coordinateSystem=_.coordinateSystem}}),t&&t(p,s,d),p}}}(cw.prototype=new KI).constructor=cw,cw.prototype.type="mapbox3D";var dae=W6("mapbox3D",cw,function(e){e.forEach(function(n){n.setCameraOption(n.model.getMapboxCameraOption())})});const hae=dae;(0,bt.D$)(function fae(e){e.registerComponentModel(sae),e.registerComponentView(uae),e.registerCoordinateSystem("mapbox3D",hae),e.registerAction({type:"mapbox3DChangeCamera",event:"mapbox3dcamerachanged",update:"mapbox3D:updateCamera"},function(n,t){t.eachComponent({mainType:"mapbox3D",query:n},function(r){r.setMapboxCameraOption(n)})})});var j6=["zoom","center","pitch","bearing"],K3=bt.tF.extend({type:"maptalks3D",layoutMode:"box",coordinateSystem:null,defaultOption:{zlevel:-10,urlTemplate:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/">CARTO</a>',center:[0,0],zoom:0,pitch:0,bearing:0,light:{main:{alpha:20,beta:30}},altitudeScale:1,boxHeight:"auto"},getMaptalksCameraOption:function(){var e=this;return j6.reduce(function(n,t){return n[t]=e.get(t),n},{})},setMaptalksCameraOption:function(e){null!=e&&j6.forEach(function(n){null!=e[n]&&(this.option[n]=e[n])},this)},getMaptalks:function(){return this._maptalks},setMaptalks:function(e){this._maptalks=e}});bt.D5.merge(K3.prototype,Vy),bt.D5.merge(K3.prototype,zy);const pae=K3;function Tf(e,n,t,r){if(this.id=e,this.zr=n,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;",!maptalks)throw new Error("Maptalks library must be included. See https://maptalks.org");this._maptalks=new maptalks.Map(this.dom,{center:t,zoom:r,doubleClickZoom:!1,fog:!1}),this._initEvents()}Tf.prototype.setUnpainted=function(){},Tf.prototype.resize=function(){this._maptalks.checkSize()},Tf.prototype.getMaptalks=function(){return this._maptalks},Tf.prototype.clear=function(){},Tf.prototype.refresh=function(){this._maptalks.checkSize()};var Z6=["mousedown","mouseup","click","dblclick","mousemove","mousewheel","DOMMouseScroll","touchstart","touchend","touchmove","touchcancel"];Tf.prototype._initEvents=function(){var e=this.dom;this._handlers=this._handlers||{contextmenu:function(n){return n.preventDefault(),!1}},Z6.forEach(function(n){this._handlers[n]=function(t){var r={};for(var i in t)r[i]=t[i];r.bubbles=!1;var s=new t.constructor(t.type,r);"mousewheel"===n||"DOMMouseScroll"===n?e.dispatchEvent(s):e.firstElementChild.dispatchEvent(s)},this.zr.dom.addEventListener(n,this._handlers[n])},this),this.zr.dom.addEventListener("contextmenu",this._handlers.contextmenu)},Tf.prototype.dispose=function(){Z6.forEach(function(e){this.zr.dom.removeEventListener(e,this._handlers[e])},this),this._maptalks.remove()};const vae=Tf;ot.Shader.import(G6);const gae=bt.Ir.extend({type:"maptalks3D",__ecgl__:!0,init:function(e,n){this._groundMesh=new ot.Mesh({geometry:new ot.PlaneGeometry,material:new ot.Material({shader:new ot.Shader({vertex:ot.Shader.source("ecgl.displayShadow.vertex"),fragment:ot.Shader.source("ecgl.displayShadow.fragment")}),depthMask:!1}),renderOrder:-100,culling:!1,castShadow:!1,$ignorePicking:!0,renderNormal:!0})},_initMaptalksLayer:function(e,n){var t=n.getZr();this._zrLayer=new vae("maptalks3D",t,e.get("center"),e.get("zoom")),t.painter.insertLayer(-1e3,this._zrLayer),this._lightRoot=new ot.Node,this._sceneHelper=new Hy(this._lightRoot),this._sceneHelper.initLight(this._lightRoot);var r=this._zrLayer.getMaptalks(),i=this._dispatchInteractAction.bind(this,n,r);["zoomend","zooming","zoomstart","dragrotating","pitch","pitchend","movestart","moving","moveend","resize","touchstart","touchmove","touchend","animating"].forEach(function(s){r.on(s,i)})},render:function(e,n,t){this._zrLayer||this._initMaptalksLayer(e,t);var r=this._zrLayer.getMaptalks(),i=e.get("urlTemplate"),s=r.getBaseLayer();i!==this._oldUrlTemplate&&(s?s.setOptions({urlTemplate:i,attribution:e.get("attribution")}):(s=new maptalks.TileLayer("maptalks-echarts-gl-baselayer",{urlTemplate:i,subdomains:["a","b","c"],attribution:e.get("attribution")}),r.setBaseLayer(s))),this._oldUrlTemplate=i,r.setCenter(e.get("center")),r.setZoom(e.get("zoom"),{animation:!1}),r.setPitch(e.get("pitch")),r.setBearing(e.get("bearing")),e.setMaptalks(r);var d=e.coordinateSystem;d.viewGL.scene.add(this._lightRoot),d.viewGL.add(this._groundMesh),this._updateGroundMesh(),this._sceneHelper.setScene(d.viewGL.scene),this._sceneHelper.updateLight(e),d.viewGL.setPostEffect(e.getModel("postEffect"),t),d.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling")),this._maptalks3DModel=e},afterRender:function(e,n,t,r){var i=r.renderer;this._sceneHelper.updateAmbientCubemap(i,e,t),this._sceneHelper.updateSkybox(i,e,t),e.coordinateSystem.viewGL.scene.traverse(function(s){s.material&&(s.material.define("fragment","NORMAL_UP_AXIS",2),s.material.define("fragment","NORMAL_FRONT_AXIS",1))})},updateCamera:function(e,n,t,r){e.coordinateSystem.setCameraOption(r),this._updateGroundMesh(),t.getZr().refresh()},_dispatchInteractAction:function(e,n,t){e.dispatchAction({type:"maptalks3DChangeCamera",pitch:n.getPitch(),zoom:_ae(n.getResolution())+1,center:n.getCenter().toArray(),bearing:n.getBearing(),maptalks3DId:this._maptalks3DModel&&this._maptalks3DModel.id})},_updateGroundMesh:function(){if(this._maptalks3DModel){var e=this._maptalks3DModel.coordinateSystem,n=e.dataToPoint(e.center);this._groundMesh.position.set(n[0],n[1],-.001);var t=new ot.Plane(new ot.Vector3(0,0,1),0),r=e.viewGL.camera.castRay(new ot.Vector2(-1,-1)),i=e.viewGL.camera.castRay(new ot.Vector2(1,1)),s=r.intersectPlane(t),d=i.intersectPlane(t),p=s.dist(d)/e.viewGL.rootNode.scale.x;this._groundMesh.scale.set(p,p,1)}},dispose:function(e,n){this._zrLayer&&this._zrLayer.dispose(),n.getZr().painter.delLayer(-1e3)}}),mae=12756274*Math.PI/(256*Math.pow(2,20));function _ae(e){return 19-Math.log(e/mae)/Math.LN2}function dw(){KI.apply(this,arguments),this.maxPitch=85,this.zoomOffset=1}(dw.prototype=new KI).constructor=dw,dw.prototype.type="maptalks3D";var yae=W6("maptalks3D",dw,function(e){e.forEach(function(n){n.setCameraOption(n.model.getMaptalksCameraOption())})});const bae=yae;(0,bt.D$)(function xae(e){e.registerComponentModel(pae),e.registerComponentView(gae),e.registerCoordinateSystem("maptalks3D",bae),e.registerAction({type:"maptalks3DChangeCamera",event:"maptalks3dcamerachanged",update:"maptalks3D:updateCamera"},function(n,t){t.eachComponent({mainType:"maptalks3D",query:n},function(r){r.setMaptalksCameraOption(n)})})});var Cae=Ka.vec3,wae=bt._y.dataStack.isDimensionStacked;function Q3(e,n,t){for(var r=e.getDataExtent(n),i=e.getDataExtent(t),s=r[1]-r[0]||r[0],d=i[1]-i[0]||i[0],v=new Uint8Array(2500),_=0;_<e.count();_++){var C=e.get(n,_),S=e.get(t,_),k=Math.floor((C-r[0])/s*49),ne=50*Math.floor((S-i[0])/d*49)+k;v[ne]=v[ne]||1}var pe=0;for(_=0;_<v.length;_++)v[_]&&pe++;return pe/v.length}var Y6=Ka.vec3,Tae=bt._y.dataStack.isDimensionStacked;function q3(e,n){var t=Tae(e,n[2]);return{dimension:t?e.getCalculationInfo("stackResultDimension"):n[2],isStacked:t}}function Pae(e){e.registerLayout(function(n,t){n.eachSeriesByType("bar3D",function(r){var i=r.coordinateSystem,s=i&&i.type;"globe"===s?function Eae(e,n){var t=e.getData(),r=e.get("minHeight")||0,i=e.get("barSize"),s=["lng","lat","alt"].map(function(_){return e.coordDimToDataDim(_)[0]});if(null==i){var d=n.radius*Math.PI,p=Q3(t,s[0],s[1]);i=[d/Math.sqrt(t.count()/p),d/Math.sqrt(t.count()/p)]}else bt.D5.isArray(i)||(i=[i,i]);var v=q3(t,s);t.each(s,function(_,C,S,k){var H=t.get(v.dimension,k),ne=v.isStacked?H-S:n.altitudeAxis.scale.getExtent()[0],pe=Math.max(n.altitudeAxis.dataToCoord(S),r),Me=n.dataToPoint([_,C,ne]),Re=n.dataToPoint([_,C,H]),Fe=Y6.sub([],Re,Me);Y6.normalize(Fe,Fe),t.setItemLayout(k,[Me,Fe,[i[0],pe,i[1]]])}),t.setLayout("orient",Ln.UP.array)}(r,i):"cartesian3D"===s?function Dae(e,n){var t=e.getData(),r=e.get("barSize");if(null==r){var s,d,i=n.size,p=n.getAxis("x"),v=n.getAxis("y");s="category"===p.type?.7*p.getBandWidth():.6*Math.round(i[0]/Math.sqrt(t.count())),d="category"===v.type?.7*v.getBandWidth():.6*Math.round(i[1]/Math.sqrt(t.count())),r=[s,d]}else bt.D5.isArray(r)||(r=[r,r]);var _=n.getAxis("z").scale.getExtent(),C=function Sae(e){var n=e[0],t=e[1];return!(n>0&&t>0||n<0&&t<0)}(_),S=["x","y","z"].map(function(ne){return e.coordDimToDataDim(ne)[0]}),k=wae(t,S[2]),H=k?t.getCalculationInfo("stackResultDimension"):S[2];t.each(S,function(ne,pe,Me,Re){var Fe=t.get(H,Re),Be=n.dataToPoint([ne,pe,k?Fe-Me:C?0:_[0]]),nt=n.dataToPoint([ne,pe,Fe]),rt=Cae.dist(Be,nt),Ct=[0,nt[1]<Be[1]?-1:1,0];0===Math.abs(rt)&&(rt=.1),t.setItemLayout(Re,[Be,Ct,[r[0],rt,r[1]]])}),t.setLayout("orient",[1,0,0])}(r,i):"geo3D"===s?function Aae(e,n){var t=e.getData(),r=e.get("barSize"),i=e.get("minHeight")||0,s=["lng","lat","alt"].map(function(C){return e.coordDimToDataDim(C)[0]});if(null==r){var d=Math.min(n.size[0],n.size[2]),p=Q3(t,s[0],s[1]);r=[d/Math.sqrt(t.count()/p),d/Math.sqrt(t.count()/p)]}else bt.D5.isArray(r)||(r=[r,r]);var v=[0,1,0],_=q3(t,s);t.each(s,function(C,S,k,H){var ne=t.get(_.dimension,H),pe=_.isStacked?ne-k:n.altitudeAxis.scale.getExtent()[0],Me=Math.max(n.altitudeAxis.dataToCoord(k),i),Re=n.dataToPoint([C,S,pe]);t.setItemLayout(H,[Re,v,[r[0],Me,r[1]]])}),t.setLayout("orient",[1,0,0])}(r,i):("mapbox3D"===s||"maptalks3D"===s)&&function Iae(e,n){var t=e.getData(),r=e.coordDimToDataDim("lng")[0],i=e.coordDimToDataDim("lat")[0],s=e.coordDimToDataDim("alt")[0],d=e.get("barSize"),p=e.get("minHeight")||0;if(null==d){var v=t.getDataExtent(r),_=t.getDataExtent(i),C=n.dataToPoint([v[0],_[0]]),S=n.dataToPoint([v[1],_[1]]),k=Math.min(Math.abs(C[0]-S[0]),Math.abs(C[1]-S[1]))||1,H=Q3(t,r,i);d=[k/Math.sqrt(t.count()/H),k/Math.sqrt(t.count()/H)]}else bt.D5.isArray(d)||(d=[d,d]),d[0]/=n.getScale()/16,d[1]/=n.getScale()/16;var ne=[0,0,1],pe=[r,i,s],Me=q3(t,pe);t.each(pe,function(Re,Fe,Oe,Be){var nt=t.get(Me.dimension,Be),Ct=n.dataToPoint([Re,Fe,Me.isStacked?nt-Oe:0]),mt=n.dataToPoint([Re,Fe,nt]),Ft=Math.max(mt[2]-Ct[2],p);t.setItemLayout(Be,[Ct,ne,[d[0],Ft,d[1]]])}),t.setLayout("orient",[1,0,0])}(r,i)})})}var J3={getFormattedLabel:function(e,n,t,r,i){t=t||"normal";var d=e.getData(r).getItemModel(n),p=e.getDataParams(n,r);null!=i&&p.value instanceof Array&&(p.value=p.value[i]);var _,v=d.get("normal"===t?["label","formatter"]:["emphasis","label","formatter"]);return null==v&&(v=d.get(["label","formatter"])),"function"==typeof v?(p.status=t,_=v(p)):"string"==typeof v&&(_=bt.WU.formatTpl(v,p)),_},normalizeToArray:function(e){return e instanceof Array?e:null==e?[]:[e]}};const $y=J3;function hw(e,n,t){var i=e.getData(),s=e.getRawValue(n),d=bt.D5.isArray(s)?function r(S){var H=[],ne=function Rae(e,n){var t=[];return bt.D5.each(e.dimensions,function(r){var i=e.getDimensionInfo(r),d=i.otherDims[n];null!=d&&!1!==d&&(t[d]=i.name)}),t}(i,"tooltip");function pe(Me,Re){var Fe=i.getDimensionInfo(Re);if(Fe&&!1!==Fe.otherDims.tooltip){var Oe=Fe.type,Be="- "+(Fe.tooltipName||Fe.name)+": "+("ordinal"===Oe?Me+"":"time"===Oe?t?"":bt.WU.formatTime("yyyy/MM/dd hh:mm:ss",Me):bt.WU.addCommas(Me));Be&&H.push(bt.WU.encodeHTML(Be))}}return ne.length?bt.D5.each(ne,function(Me){pe(i.get(Me,n),Me)}):bt.D5.each(S,pe),"<br/>"+H.join("<br/>")}(s):bt.WU.encodeHTML(bt.WU.addCommas(s)),p=i.getName(n),v=Fo(i,n);bt.D5.isObject(v)&&v.colorStops&&(v=(v.colorStops[0]||{}).color);var _=bt.WU.getTooltipMarker(v=v||"transparent"),C=e.name;return"\0-"===C&&(C=""),C=C?bt.WU.encodeHTML(C)+(t?": ":"<br/>"):"",t?_+C+d:C+_+(p?bt.WU.encodeHTML(p)+": "+d:d)}function QI(e,n,t){t=t||e.getSource();var r=n||bt.wL(e.get("coordinateSystem"))||["x","y","z"],i=bt._y.createDimensions(t,{dimensionsDefine:t.dimensionsDefine||e.get("dimensions"),encodeDefine:t.encodeDefine||e.get("encode"),coordDimensions:r.map(function(p){var v=e.getReferringComponents(p+"Axis3D").models[0];return{type:v&&"category"===v.get("type")?"ordinal":"float",name:p}})});"cartesian3D"===e.get("coordinateSystem")&&i.forEach(function(p){if(r.indexOf(p.coordDim)>=0){var v=e.getReferringComponents(p.coordDim+"Axis3D").models[0];v&&"category"===v.get("type")&&(p.ordinalMeta=v.getOrdinalMeta())}});var s=bt._y.dataStack.enableDataStack(e,i,{byIndex:!0,stackedCoordDimension:"z"}),d=new bt.aV(i,e);return d.setCalculationInfo(s),d.initData(t),d}var X6=bt.wJ.extend({type:"series.bar3D",dependencies:["globe"],visualStyleAccessPathvisu:"itemStyle",getInitialData:function(e,n){return QI(this)},getFormattedLabel:function(e,n,t,r){var i=$y.getFormattedLabel(this,e,n,t,r);return null==i&&(i=this.getData().get("z",e)),i},formatTooltip:function(e){return hw(this,e)},defaultOption:{coordinateSystem:"cartesian3D",globeIndex:0,grid3DIndex:0,zlevel:-10,bevelSize:0,bevelSmoothness:2,onGridPlane:"xy",shading:"color",minHeight:0,itemStyle:{opacity:1},label:{show:!1,distance:2,textStyle:{fontSize:14,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:3}},emphasis:{label:{show:!0}},animationDurationUpdate:500}});bt.D5.merge(X6.prototype,Wy);const Lae=X6;var Pa=Ka.vec3,Oae=Ka.mat3,eV=Si.extend(function(){return{attributes:{position:new Si.Attribute("position","float",3,"POSITION"),normal:new Si.Attribute("normal","float",3,"NORMAL"),color:new Si.Attribute("color","float",4,"COLOR"),prevPosition:new Si.Attribute("prevPosition","float",3),prevNormal:new Si.Attribute("prevNormal","float",3)},dynamic:!0,enableNormal:!1,bevelSize:1,bevelSegments:0,_dataIndices:null,_vertexOffset:0,_triangleOffset:0}},{resetOffset:function(){this._vertexOffset=0,this._triangleOffset=0},setBarCount:function(e){var n=this.enableNormal,t=this.getBarVertexCount()*e,r=this.getBarTriangleCount()*e;this.vertexCount!==t&&(this.attributes.position.init(t),n?this.attributes.normal.init(t):this.attributes.normal.value=null,this.attributes.color.init(t)),this.triangleCount!==r&&(this.indices=t>65535?new Uint32Array(3*r):new Uint16Array(3*r),this._dataIndices=new Uint32Array(t))},getBarVertexCount:function(){var e=this.bevelSize>0?this.bevelSegments:0;return e>0?this._getBevelBarVertexCount(e):this.enableNormal?24:8},getBarTriangleCount:function(){var e=this.bevelSize>0?this.bevelSegments:0;return e>0?this._getBevelBarTriangleCount(e):12},_getBevelBarVertexCount:function(e){return 4*(e+1)*(e+1)*2},_getBevelBarTriangleCount:function(e){return(4*e+3+1)*(2*e+1)*2+4},setColor:function(e,n){for(var t=this.getBarVertexCount(),i=t*(e+1),s=t*e;s<i;s++)this.attributes.color.set(s,n);this.dirtyAttribute("color")},getDataIndexOfVertex:function(e){return this._dataIndices?this._dataIndices[e]:null},addBar:function(){for(var e=Pa.create,n=Pa.scaleAndAdd,t=e(),r=e(),i=e(),s=e(),d=e(),p=e(),v=e(),_=[],C=[],S=0;S<8;S++)_[S]=e();var k=[[0,1,5,4],[2,3,7,6],[4,5,6,7],[3,2,1,0],[0,4,7,3],[1,2,6,5]],H=[0,1,2,0,2,3],ne=[];for(S=0;S<k.length;S++)for(var pe=k[S],Me=0;Me<2;Me++){for(var Re=[],Fe=0;Fe<3;Fe++)Re.push(pe[H[3*Me+Fe]]);ne.push(Re)}return function(Oe,Be,nt,rt,Ct,mt){var Ft=this._vertexOffset;if(this.bevelSize>0&&this.bevelSegments>0)this._addBevelBar(Oe,Be,nt,rt,this.bevelSize,this.bevelSegments,Ct);else{Pa.copy(i,Be),Pa.normalize(i,i),Pa.cross(s,nt,i),Pa.normalize(s,s),Pa.cross(r,i,s),Pa.normalize(s,s),Pa.negate(d,r),Pa.negate(p,i),Pa.negate(v,s),n(_[0],Oe,r,rt[0]/2),n(_[0],_[0],s,rt[2]/2),n(_[1],Oe,r,rt[0]/2),n(_[1],_[1],v,rt[2]/2),n(_[2],Oe,d,rt[0]/2),n(_[2],_[2],v,rt[2]/2),n(_[3],Oe,d,rt[0]/2),n(_[3],_[3],s,rt[2]/2),n(t,Oe,i,rt[1]),n(_[4],t,r,rt[0]/2),n(_[4],_[4],s,rt[2]/2),n(_[5],t,r,rt[0]/2),n(_[5],_[5],v,rt[2]/2),n(_[6],t,d,rt[0]/2),n(_[6],_[6],v,rt[2]/2),n(_[7],t,d,rt[0]/2),n(_[7],_[7],s,rt[2]/2);var nn=this.attributes;if(this.enableNormal){C[0]=r,C[1]=d,C[2]=i,C[3]=p,C[4]=s,C[5]=v;for(var Xt=this._vertexOffset,pn=0;pn<k.length;pn++){for(var mn=3*this._triangleOffset,on=0;on<6;on++)this.indices[mn++]=Xt+H[on];Xt+=4,this._triangleOffset+=2}for(pn=0;pn<k.length;pn++){var Cn=C[pn];for(on=0;on<4;on++)nn.position.set(this._vertexOffset,_[k[pn][on]]),nn.normal.set(this._vertexOffset,Cn),nn.color.set(this._vertexOffset++,Ct)}}else{for(pn=0;pn<ne.length;pn++){for(mn=3*this._triangleOffset,on=0;on<3;on++)this.indices[mn+on]=ne[pn][on]+this._vertexOffset;this._triangleOffset++}for(pn=0;pn<_.length;pn++)nn.position.set(this._vertexOffset,_[pn]),nn.color.set(this._vertexOffset++,Ct)}}var ln=this._vertexOffset;for(pn=Ft;pn<ln;pn++)this._dataIndices[pn]=mt}}(),_addBevelBar:function(){var e=Pa.create(),n=Pa.create(),t=Pa.create(),r=Oae.create(),i=[],s=[1,-1,-1,1],d=[1,1,-1,-1],p=[2,0];return function(v,_,C,S,k,H,ne){Pa.copy(n,_),Pa.normalize(n,n),Pa.cross(t,C,n),Pa.normalize(t,t),Pa.cross(e,n,t),Pa.normalize(t,t),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=n[0],r[4]=n[1],r[5]=n[2],r[6]=t[0],r[7]=t[1],r[8]=t[2],k=Math.min(S[0],S[2])/2*k;for(var pe=0;pe<3;pe++)i[pe]=Math.max(S[pe]-2*k,0);var Me=(S[0]-i[0])/2,Re=(S[1]-i[1])/2,Fe=(S[2]-i[2])/2,Oe=[],Be=[],nt=this._vertexOffset,rt=[];for(pe=0;pe<2;pe++){rt[pe]=rt[pe]=[];for(var Ct=0;Ct<=H;Ct++)for(var mt=0;mt<4;mt++){(0===Ct&&0===pe||1===pe&&Ct===H)&&rt[pe].push(nt);for(var Ft=0;Ft<=H;Ft++){var nn=Ft/H*Math.PI/2+Math.PI/2*mt,Xt=Ct/H*Math.PI/2+Math.PI/2*pe;Be[0]=Me*Math.cos(nn)*Math.sin(Xt),Be[1]=Re*Math.cos(Xt),Be[2]=Fe*Math.sin(nn)*Math.sin(Xt),Oe[0]=Be[0]+s[mt]*i[0]/2,Oe[1]=Be[1]+Re+p[pe]*i[1]/2,Oe[2]=Be[2]+d[mt]*i[2]/2,Math.abs(Me-Re)<1e-6&&Math.abs(Re-Fe)<1e-6||(Be[0]/=Me*Me,Be[1]/=Re*Re,Be[2]/=Fe*Fe),Pa.normalize(Be,Be),Pa.transformMat3(Oe,Oe,r),Pa.transformMat3(Be,Be,r),Pa.add(Oe,Oe,v),this.attributes.position.set(nt,Oe),this.enableNormal&&this.attributes.normal.set(nt,Be),this.attributes.color.set(nt,ne),nt++}}}var pn=4*H+3,mn=2*H+1,on=pn+1;for(mt=0;mt<mn;mt++)for(pe=0;pe<=pn;pe++){var Cn=mt*on+pe+this._vertexOffset,Ht=mt*on+(pe+1)%on+this._vertexOffset,ln=(mt+1)*on+(pe+1)%on+this._vertexOffset,Zt=(mt+1)*on+pe+this._vertexOffset;this.setTriangleIndices(this._triangleOffset++,[ln,Cn,Ht]),this.setTriangleIndices(this._triangleOffset++,[ln,Zt,Cn])}this.setTriangleIndices(this._triangleOffset++,[rt[0][0],rt[0][2],rt[0][1]]),this.setTriangleIndices(this._triangleOffset++,[rt[0][0],rt[0][3],rt[0][2]]),this.setTriangleIndices(this._triangleOffset++,[rt[1][0],rt[1][1],rt[1][2]]),this.setTriangleIndices(this._triangleOffset++,[rt[1][0],rt[1][2],rt[1][3]]),this._vertexOffset=nt}}()});bt.D5.defaults(eV.prototype,nw),bt.D5.defaults(eV.prototype,U3);const kae=eV;var Nae=Ka.vec3;const Fae=bt.TA.extend({type:"bar3D",__ecgl__:!0,init:function(e,n){this.groupGL=new ot.Node,this._api=n,this._labelsBuilder=new G3(256,256,n);var t=this;this._labelsBuilder.getLabelPosition=function(r,i,s){if(t._data){var d=t._data.getItemLayout(r);return Nae.scaleAndAdd([],d[0],d[1],s+d[2][1])}return[0,0]},this._labelsBuilder.getMesh().renderOrder=100},render:function(e,n,t){var r=this._prevBarMesh;this._prevBarMesh=this._barMesh,this._barMesh=r,this._barMesh||(this._barMesh=new ot.Mesh({geometry:new kae,shadowDepthMaterial:new ot.Material({shader:new ot.Shader(ot.Shader.source("ecgl.sm.depth.vertex"),ot.Shader.source("ecgl.sm.depth.fragment"))}),culling:"cartesian3D"===e.coordinateSystem.type,renderOrder:10,renderNormal:!0})),this.groupGL.remove(this._prevBarMesh),this.groupGL.add(this._barMesh),this.groupGL.add(this._labelsBuilder.getMesh());var i=e.coordinateSystem;if(this._doRender(e,t),i&&i.viewGL){i.viewGL.add(this.groupGL);var s=i.viewGL.isLinearSpace()?"define":"undefine";this._barMesh.material[s]("fragment","SRGB_DECODE")}this._data=e.getData(),this._labelsBuilder.updateData(this._data),this._labelsBuilder.updateLabels(),this._updateAnimation(e)},_updateAnimation:function(e){ot.updateVertexAnimation([["prevPosition","position"],["prevNormal","normal"]],this._prevBarMesh,this._barMesh,e)},_doRender:function(e,n){var t=e.getData(),r=e.get("shading"),i="color"!==r,s=this,d=this._barMesh,p="ecgl."+r;(!d.material||d.material.shader.name!==p)&&(d.material=ot.createMaterial(p,["VERTEX_COLOR"])),ot.setMaterialFromModel(r,d.material,e,n),d.geometry.enableNormal=i,d.geometry.resetOffset();var v=e.get("bevelSize"),_=e.get("bevelSmoothness");d.geometry.bevelSegments=_,d.geometry.bevelSize=v;var C=[],S=new Float32Array(4*t.count()),k=0,Me=0,H=!1;t.each(function(Fe){if(t.hasValue(Fe)){var Oe=Fo(t,Fe),Be=Bo(t,Fe);null==Be&&(Be=1),ot.parseColor(Oe,C),C[3]*=Be,S[k++]=C[0],S[k++]=C[1],S[k++]=C[2],S[k++]=C[3],C[3]>0&&(Me++,C[3]<.99&&(H=!0))}}),d.geometry.setBarCount(Me);var ne=t.getLayout("orient"),pe=this._barIndexOfData=new Int32Array(t.count());Me=0,t.each(function(Fe){if(t.hasValue(Fe)){var Oe=t.getItemLayout(Fe),Be=Oe[0],nt=Oe[1],rt=Oe[2],Ct=4*Fe;C[0]=S[Ct++],C[1]=S[Ct++],C[2]=S[Ct++],C[3]=S[Ct++],C[3]>0&&(s._barMesh.geometry.addBar(Be,nt,ne,rt,C,Fe),pe[Fe]=Me++)}else pe[Fe]=-1}),d.geometry.dirty(),d.geometry.updateBoundingBox();var Re=d.material;Re.transparent=H,Re.depthMask=!H,d.geometry.sortTriangles=H,this._initHandler(e,n)},_initHandler:function(e,n){var t=e.getData(),r=this._barMesh,i="cartesian3D"===e.coordinateSystem.type;r.seriesIndex=e.seriesIndex;var s=-1;r.off("mousemove"),r.off("mouseout"),r.on("mousemove",function(d){var p=r.geometry.getDataIndexOfVertex(d.triangle[0]);p!==s&&(this._downplay(s),this._highlight(p),this._labelsBuilder.updateLabels([p]),i&&n.dispatchAction({type:"grid3DShowAxisPointer",value:[t.get("x",p),t.get("y",p),t.get("z",p,!0)]})),s=p,r.dataIndex=p},this),r.on("mouseout",function(d){this._downplay(s),this._labelsBuilder.updateLabels(),s=-1,r.dataIndex=-1,i&&n.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_highlight:function(e){var n=this._data;if(n){var t=this._barIndexOfData[e];if(!(t<0)){var i=n.getItemModel(e).getModel("emphasis.itemStyle"),s=i.get("color"),d=i.get("opacity");if(null==s){var p=Fo(n,e);s=bt.$_.lift(p,-.4)}null==d&&(d=Bo(n,e));var v=ot.parseColor(s);v[3]*=d,this._barMesh.geometry.setColor(t,v),this._api.getZr().refresh()}}},_downplay:function(e){var n=this._data;if(n){var t=this._barIndexOfData[e];if(!(t<0)){var r=Fo(n,e),i=Bo(n,e),s=ot.parseColor(r);s[3]*=i,this._barMesh.geometry.setColor(t,s),this._api.getZr().refresh()}}},highlight:function(e,n,t,r){this._toggleStatus("highlight",e,n,t,r)},downplay:function(e,n,t,r){this._toggleStatus("downplay",e,n,t,r)},_toggleStatus:function(e,n,t,r,i){var s=n.getData(),d=Qr.queryDataIndex(s,i),p=this;null!=d?bt.D5.each($y.normalizeToArray(d),function(v){"highlight"===e?this._highlight(v):this._downplay(v)},this):s.each(function(v){"highlight"===e?p._highlight(v):p._downplay(v)})},remove:function(){this.groupGL.removeAll()},dispose:function(){this._labelsBuilder.dispose(),this.groupGL.removeAll()}});(0,bt.D$)(function Bae(e){e.registerChartView(Fae),e.registerSeriesModel(Lae),Pae(e),e.registerProcessor(function(n,t){n.eachSeriesByType("bar3d",function(r){var i=r.getData();i.filterSelf(function(s){return i.hasValue(s)})})})});var Vae=bt.wJ.extend({type:"series.line3D",dependencies:["grid3D"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",getInitialData:function(e,n){return QI(this)},formatTooltip:function(e){return hw(this,e)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,grid3DIndex:0,lineStyle:{width:2},animationDurationUpdate:500}});const zae=Vae;var Hae=z(4443),Uae=Ka.vec3;ot.Shader.import(HI);const Gae=bt.TA.extend({type:"line3D",__ecgl__:!0,init:function(e,n){this.groupGL=new ot.Node,this._api=n},render:function(e,n,t){var r=this._prevLine3DMesh;this._prevLine3DMesh=this._line3DMesh,this._line3DMesh=r,this._line3DMesh||(this._line3DMesh=new ot.Mesh({geometry:new Yv({useNativeLine:!1,sortTriangles:!0}),material:new ot.Material({shader:ot.createShader("ecgl.meshLines3D")}),renderOrder:10}),this._line3DMesh.geometry.pick=this._pick.bind(this)),this.groupGL.remove(this._prevLine3DMesh),this.groupGL.add(this._line3DMesh);var i=e.coordinateSystem;if(i&&i.viewGL){i.viewGL.add(this.groupGL);var s=i.viewGL.isLinearSpace()?"define":"undefine";this._line3DMesh.material[s]("fragment","SRGB_DECODE")}this._doRender(e,t),this._data=e.getData(),this._camera=i.viewGL.camera,this.updateCamera(),this._updateAnimation(e)},updateCamera:function(){this._updateNDCPosition()},_doRender:function(e,n){var t=e.getData(),r=this._line3DMesh;r.geometry.resetOffset();var i=t.getLayout("points"),s=[],d=new Float32Array(i.length/3*4),p=0,v=!1;t.each(function(S){var k=Fo(t,S),H=Bo(t,S);null==H&&(H=1),ot.parseColor(k,s),s[3]*=H,d[p++]=s[0],d[p++]=s[1],d[p++]=s[2],d[p++]=s[3],s[3]<.99&&(v=!0)}),r.geometry.setVertexCount(r.geometry.getPolylineVertexCount(i)),r.geometry.setTriangleCount(r.geometry.getPolylineTriangleCount(i)),r.geometry.addPolyline(i,d,Qr.firstNotNull(e.get("lineStyle.width"),1)),r.geometry.dirty(),r.geometry.updateBoundingBox();var _=r.material;_.transparent=v,_.depthMask=!v;var C=e.getModel("debug.wireframe");C.get("show")?(r.geometry.createAttribute("barycentric","float",3),r.geometry.generateBarycentric(),r.material.set("both","WIREFRAME_TRIANGLE"),r.material.set("wireframeLineColor",ot.parseColor(C.get("lineStyle.color")||"rgba(0,0,0,0.5)")),r.material.set("wireframeLineWidth",Qr.firstNotNull(C.get("lineStyle.width"),1))):r.material.set("both","WIREFRAME_TRIANGLE"),this._points=i,this._initHandler(e,n)},_updateAnimation:function(e){ot.updateVertexAnimation([["prevPosition","position"],["prevPositionPrev","positionPrev"],["prevPositionNext","positionNext"]],this._prevLine3DMesh,this._line3DMesh,e)},_initHandler:function(e,n){var t=e.getData(),r=e.coordinateSystem,i=this._line3DMesh,s=-1;i.seriesIndex=e.seriesIndex,i.off("mousemove"),i.off("mouseout"),i.on("mousemove",function(d){var p=r.pointToData(d.point.array),v=t.indicesOfNearest("x",p[0])[0];v!==s&&(n.dispatchAction({type:"grid3DShowAxisPointer",value:[t.get("x",v),t.get("y",v),t.get("z",v)]}),i.dataIndex=v),s=v},this),i.on("mouseout",function(d){s=-1,i.dataIndex=-1,n.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_updateNDCPosition:function(){var e=new tr,n=this._camera;tr.multiply(e,n.projectionMatrix,n.viewMatrix);var t=this._positionNDC,r=this._points,i=r.length/3;(!t||t.length/2!==i)&&(t=this._positionNDC=new Float32Array(2*i));for(var s=[],d=0;d<i;d++){var p=3*d,v=2*d;s[0]=r[p],s[1]=r[p+1],s[2]=r[p+2],s[3]=1,Uae.transformMat4(s,s,e.array),t[v]=s[0]/s[3],t[v+1]=s[1]/s[3]}},_pick:function(e,n,t,r,i,s){var d=this._positionNDC,v=this._data.hostModel.get("lineStyle.width"),_=-1,k=.5*t.viewport.width,H=.5*t.viewport.height;e=(e+1)*k,n=(n+1)*H;for(var ne=1;ne<d.length/2;ne++){var pe=(d[2*(ne-1)]+1)*k,Me=(d[2*(ne-1)+1]+1)*H,Re=(d[2*ne]+1)*k,Fe=(d[2*ne+1]+1)*H;Hae.m(pe,Me,Re,Fe,v,e,n)&&(_=(pe-e)*(pe-e)+(Me-n)*(Me-n)<(Re-e)*(Re-e)+(Fe-n)*(Fe-n)?ne-1:ne)}if(_>=0){var nt=3*_,rt=new Ln(this._points[nt],this._points[nt+1],this._points[nt+2]);s.push({dataIndex:_,point:rt,pointWorld:rt.clone(),target:this._line3DMesh,distance:this._camera.getWorldPosition().dist(rt)})}},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}});(0,bt.D$)(function Wae(e){e.registerChartView(Gae),e.registerSeriesModel(zae),e.registerLayout(function(n,t){n.eachSeriesByType("line3D",function(r){var i=r.getData(),s=r.coordinateSystem;if(s){if("cartesian3D"!==s.type)return;var d=new Float32Array(3*i.count()),p=[],v=[],C=s.dimensions.map(function(S){return r.coordDimToDataDim(S)[0]});s&&i.each(C,function(S,k,H,ne){p[0]=S,p[1]=k,p[2]=H,s.dataToPoint(p,v),d[3*ne]=v[0],d[3*ne+1]=v[1],d[3*ne+2]=v[2]}),i.setLayout("points",d)}})})});const jae=bt.wJ.extend({type:"series.scatter3D",dependencies:["globe","grid3D","geo3D"],visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,getInitialData:function(e,n){return QI(this)},getFormattedLabel:function(e,n,t,r){var i=$y.getFormattedLabel(this,e,n,t,r);if(null==i){var s=this.getData();i=s.get(s.dimensions[s.dimensions.length-1],e)}return i},formatTooltip:function(e){return hw(this,e)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,progressive:1e5,progressiveThreshold:1e5,grid3DIndex:0,globeIndex:0,symbol:"circle",symbolSize:10,blendMode:"source-over",label:{show:!1,position:"right",distance:5,textStyle:{fontSize:14,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:3}},itemStyle:{opacity:.8},emphasis:{label:{show:!0}},animationDurationUpdate:500}});function tV(e,r,t){(r=r||document.createElement("canvas")).width=e,r.height=e;var i=r.getContext("2d");return t&&t(i),r}var nV={getMarginByStyle:function(e){var n=e.minMargin||0,t=0;e.stroke&&"none"!==e.stroke&&(t=e.lineWidth??1);var r=e.shadowBlur||0,i=e.shadowOffsetX||0,s=e.shadowOffsetY||0,d={};return d.left=Math.max(t/2,-i+r,n),d.right=Math.max(t/2,i+r,n),d.top=Math.max(t/2,-s+r,n),d.bottom=Math.max(t/2,s+r,n),d},createSymbolSprite:function(e,n,t,r){var i=function Zae(e,n,t,r){bt.D5.isArray(n)||(n=[n,n]);var i=nV.getMarginByStyle(t,r),s=n[0]+i.left+i.right,d=n[1]+i.top+i.bottom,p=bt._y.createSymbol(e,0,0,n[0],n[1]),v=Math.max(s,d);p.x=i.left,p.y=i.top,s>d?p.y+=(v-d)/2:p.x+=(v-s)/2;var _=p.getBoundingRect();return p.x-=_.x,p.y-=_.y,p.setStyle(t),p.update(),p.__size=v,p}(e,n,t),s=nV.getMarginByStyle(t);return{image:tV(i.__size,r,function(d){bt.z$(d,i)}),margin:s}},createSDFFromCanvas:function(e,n,t,r){return tV(n,r,function(i){var d=e.getContext("2d").getImageData(0,0,e.width,e.height);i.putImageData(function Yae(e,n,t){var r=n.width,i=n.height,s=e.canvas.width,d=e.canvas.height,p=r/s,v=i/d;function _(Re){return Re<128?1:-1}function C(Re,Fe){var Oe=1/0;Re=Math.floor(Re*p),Fe=Math.floor(Fe*v);for(var rt=_(n.data[4*(Fe*r+Re)]),Ct=Math.max(Fe-t,0);Ct<Math.min(Fe+t,i);Ct++)for(var mt=Math.max(Re-t,0);mt<Math.min(Re+t,r);mt++){var Xt=mt-Re,pn=Ct-Fe;if(rt!==_(n.data[4*(Ct*r+mt)])){var mn=Xt*Xt+pn*pn;mn<Oe&&(Oe=mn)}}return rt*Math.sqrt(Oe)}for(var S=e.createImageData(s,d),k=0;k<d;k++)for(var H=0;H<s;H++){var pe=C(H,k)/t*.5+.5,Me=4*(k*s+H);S.data[Me++]=255*(1-pe),S.data[Me++]=255*(1-pe),S.data[Me++]=255*(1-pe),S.data[Me++]=255}return S}(i,d,t),0,0)})},createSimpleSprite:function(e,n){return tV(e,n,function(t){var r=e/2;t.beginPath(),t.arc(r,r,60,0,2*Math.PI,!1),t.closePath();var i=t.createRadialGradient(r,r,0,r,r,r);i.addColorStop(0,"rgba(255, 255, 255, 1)"),i.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),i.addColorStop(1,"rgba(255, 255, 255, 0)"),t.fillStyle=i,t.fill()})}};const $6=nV;var K6=Ka.vec3;const Xae={needsSortVertices:function(){return this.sortVertices},needsSortVerticesProgressively:function(){return this.needsSortVertices()&&this.vertexCount>=2e4},doSortVertices:function(e,n){var t=this.indices,r=K6.create();if(!t){t=this.indices=this.vertexCount>65535?new Uint32Array(this.vertexCount):new Uint16Array(this.vertexCount);for(var i=0;i<t.length;i++)t[i]=i}if(0===n){var p,s=this.attributes.position,d=(e=e.array,0);for((!this._zList||this._zList.length!==this.vertexCount)&&(this._zList=new Float32Array(this.vertexCount)),i=0;i<this.vertexCount;i++){s.get(i,r);var v=K6.sqrDist(r,e);isNaN(v)&&(v=1e7,d++),0===i?(p=v,v=0):v-=p,this._zList[i]=v}this._noneCount=d}if(this.vertexCount<2e4)0===n&&this._simpleSort(this._noneCount/this.vertexCount>.05);else for(i=0;i<3;i++)this._progressiveQuickSort(3*n+i);this.dirtyIndices()},_simpleSort:function(e){var n=this._zList,t=this.indices;function r(i,s){return n[s]-n[i]}e?Array.prototype.sort.call(t,r):YI.sort(t,r,0,t.length-1)},_progressiveQuickSort:function(e){var n=this._zList,t=this.indices;this._quickSort=this._quickSort||new YI,this._quickSort.step(t,function(r,i){return n[i]-n[r]},e)}};var rV=Ka.vec4;ot.Shader.import("@export ecgl.sdfSprite.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform float elapsedTime : 0;\n\nattribute vec3 position : POSITION;\n\n#ifdef VERTEX_SIZE\nattribute float size;\n#else\nuniform float u_Size;\n#endif\n\n#ifdef VERTEX_COLOR\nattribute vec4 a_FillColor: COLOR;\nvarying vec4 v_Color;\n#endif\n\n#ifdef VERTEX_ANIMATION\nattribute vec3 prevPosition;\nattribute float prevSize;\nuniform float percent : 1.0;\n#endif\n\n\n#ifdef POSITIONTEXTURE_ENABLED\nuniform sampler2D positionTexture;\n#endif\n\nvarying float v_Size;\n\nvoid main()\n{\n\n#ifdef POSITIONTEXTURE_ENABLED\n gl_Position = worldViewProjection * vec4(texture2D(positionTexture, position.xy).xy, -10.0, 1.0);\n#else\n\n #ifdef VERTEX_ANIMATION\n vec3 pos = mix(prevPosition, position, percent);\n #else\n vec3 pos = position;\n #endif\n gl_Position = worldViewProjection * vec4(pos, 1.0);\n#endif\n\n#ifdef VERTEX_SIZE\n#ifdef VERTEX_ANIMATION\n v_Size = mix(prevSize, size, percent);\n#else\n v_Size = size;\n#endif\n#else\n v_Size = u_Size;\n#endif\n\n#ifdef VERTEX_COLOR\n v_Color = a_FillColor;\n #endif\n\n gl_PointSize = v_Size;\n}\n\n@end\n\n@export ecgl.sdfSprite.fragment\n\nuniform vec4 color: [1, 1, 1, 1];\nuniform vec4 strokeColor: [1, 1, 1, 1];\nuniform float smoothing: 0.07;\n\nuniform float lineWidth: 0.0;\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\n\nvarying float v_Size;\n\nuniform sampler2D sprite;\n\n@import clay.util.srgb\n\nvoid main()\n{\n gl_FragColor = color;\n\n vec4 _strokeColor = strokeColor;\n\n#ifdef VERTEX_COLOR\n gl_FragColor *= v_Color;\n #endif\n\n#ifdef SPRITE_ENABLED\n float d = texture2D(sprite, gl_PointCoord).r;\n gl_FragColor.a *= smoothstep(0.5 - smoothing, 0.5 + smoothing, d);\n\n if (lineWidth > 0.0) {\n float sLineWidth = lineWidth / 2.0;\n\n float outlineMaxValue0 = 0.5 + sLineWidth;\n float outlineMaxValue1 = 0.5 + sLineWidth + smoothing;\n float outlineMinValue0 = 0.5 - sLineWidth - smoothing;\n float outlineMinValue1 = 0.5 - sLineWidth;\n\n if (d <= outlineMaxValue1 && d >= outlineMinValue0) {\n float a = _strokeColor.a;\n if (d <= outlineMinValue1) {\n a = a * smoothstep(outlineMinValue0, outlineMinValue1, d);\n }\n else {\n a = a * smoothstep(outlineMaxValue1, outlineMaxValue0, d);\n }\n gl_FragColor.rgb = mix(gl_FragColor.rgb * gl_FragColor.a, _strokeColor.rgb, a);\n gl_FragColor.a = gl_FragColor.a * (1.0 - a) + a;\n }\n }\n#endif\n\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(gl_FragColor);\n#endif\n}\n@end");var Kae=ot.Mesh.extend(function(){var e=new ot.Geometry({dynamic:!0,attributes:{color:new ot.Geometry.Attribute("color","float",4,"COLOR"),position:new ot.Geometry.Attribute("position","float",3,"POSITION"),size:new ot.Geometry.Attribute("size","float",1),prevPosition:new ot.Geometry.Attribute("prevPosition","float",3),prevSize:new ot.Geometry.Attribute("prevSize","float",1)}});Object.assign(e,Xae);var n=new ot.Material({shader:ot.createShader("ecgl.sdfSprite"),transparent:!0,depthMask:!1});n.enableTexture("sprite"),n.define("both","VERTEX_COLOR"),n.define("both","VERTEX_SIZE");var t=new ot.Texture2D({image:document.createElement("canvas"),flipY:!1});return n.set("sprite",t),e.pick=this._pick.bind(this),{geometry:e,material:n,mode:ot.Mesh.POINTS,sizeScale:1}},{_pick:function(e,n,t,r,i,s){var d=this._positionNDC;if(d)for(var p=t.viewport,v=2/p.width,_=2/p.height,C=this.geometry.vertexCount-1;C>=0;C--){var S,k=d[2*(S=this.geometry.indices?this.geometry.indices[C]:C)],H=d[2*S+1],pe=this.geometry.attributes.size.get(S)/this.sizeScale/2;if(e>k-pe*v&&e<k+pe*v&&n>H-pe*_&&n<H+pe*_){var Me=new ot.Vector3,Re=new ot.Vector3;this.geometry.attributes.position.get(S,Me.array),ot.Vector3.transformMat4(Re,Me,this.worldTransform),s.push({vertexIndex:S,point:Me,pointWorld:Re,target:this,distance:Re.distance(r.getWorldPosition())})}}},updateNDCPosition:function(e,n,t){var r=this._positionNDC,i=this.geometry;(!r||r.length/2!==i.vertexCount)&&(r=this._positionNDC=new Float32Array(2*i.vertexCount));for(var s=rV.create(),d=0;d<i.vertexCount;d++)i.attributes.position.get(d,s),s[3]=1,rV.transformMat4(s,s,e.array),rV.scale(s,s,1/s[3]),r[2*d]=s[0],r[2*d+1]=s[1]}});const Qae=Kae;function iV(e,n){this.rootNode=new ot.Node,this.is2D=e,this._labelsBuilder=new G3(256,256,n),this._labelsBuilder.getMesh().renderOrder=100,this.rootNode.add(this._labelsBuilder.getMesh()),this._api=n,this._spriteImageCanvas=document.createElement("canvas"),this._startDataIndex=0,this._endDataIndex=0,this._sizeScale=1}iV.prototype={constructor:iV,highlightOnMouseover:!0,update:function(e,n,t,r,i){var s=this._prevMesh;this._prevMesh=this._mesh,this._mesh=s;var d=e.getData();if(null==r&&(r=0),null==i&&(i=d.count()),this._startDataIndex=r,this._endDataIndex=i-1,!this._mesh){var p=this._prevMesh&&this._prevMesh.material;this._mesh=new Qae({renderOrder:10,frustumCulling:!1}),p&&(this._mesh.material=p)}p=this._mesh.material;var v=this._mesh.geometry,_=v.attributes;this.rootNode.remove(this._prevMesh),this.rootNode.add(this._mesh),this._setPositionTextureToMesh(this._mesh,this._positionTexture);var C=this._getSymbolInfo(e,r,i),S=t.getDevicePixelRatio(),k=e.getModel("itemStyle").getItemStyle(),H=e.get("large"),ne=1;C.maxSize>2?(ne=this._updateSymbolSprite(e,k,C,S),p.enableTexture("sprite")):p.disableTexture("sprite"),_.position.init(i-r);var pe=[];if(H){p.undefine("VERTEX_SIZE"),p.undefine("VERTEX_COLOR");var Me=function Tie(e){const n=e.getVisual("style");if(n)return n[e.getVisual("drawType")]}(d),Re=function Eie(e){return e.getVisual("style").opacity}(d);ot.parseColor(Me,pe),pe[3]*=Re,p.set({color:pe,u_Size:C.maxSize*this._sizeScale})}else p.set({color:[1,1,1,1]}),p.define("VERTEX_SIZE"),p.define("VERTEX_COLOR"),_.size.init(i-r),_.color.init(i-r),this._originalOpacity=new Float32Array(i-r);for(var Fe=d.getLayout("points"),Oe=_.position.value,nt=0;nt<i-r;nt++){var rt=3*nt,Ct=2*nt;if(this.is2D?(Oe[rt]=Fe[Ct],Oe[rt+1]=Fe[Ct+1],Oe[rt+2]=-10):(Oe[rt]=Fe[rt],Oe[rt+1]=Fe[rt+1],Oe[rt+2]=Fe[rt+2]),!H){Me=Fo(d,nt),Re=Bo(d,nt),ot.parseColor(Me,pe),pe[3]*=Re,_.color.set(nt,pe);var mt=d.getItemVisual(nt,"symbolSize");mt=mt instanceof Array?Math.max(mt[0],mt[1]):mt,isNaN(mt)&&(mt=0),_.size.value[nt]=mt*ne*this._sizeScale,this._originalOpacity[nt]=pe[3]}}this._mesh.sizeScale=ne,v.updateBoundingBox(),v.dirty(),this._updateMaterial(e,k);var Ft=e.coordinateSystem;Ft&&Ft.viewGL&&p[Ft.viewGL.isLinearSpace()?"define":"undefine"]("fragment","SRGB_DECODE"),H||this._updateLabelBuilder(e,r,i),this._updateHandler(e,n,t),this._updateAnimation(e),this._api=t},getPointsMesh:function(){return this._mesh},updateLabels:function(e){this._labelsBuilder.updateLabels(e)},hideLabels:function(){this.rootNode.remove(this._labelsBuilder.getMesh())},showLabels:function(){this.rootNode.add(this._labelsBuilder.getMesh())},dispose:function(){this._labelsBuilder.dispose()},_updateSymbolSprite:function(e,n,t,r){t.maxSize=Math.min(2*t.maxSize,200);var i=[];return t.aspect>1?(i[0]=t.maxSize,i[1]=t.maxSize/t.aspect):(i[1]=t.maxSize,i[0]=t.maxSize*t.aspect),i[0]=i[0]||1,i[1]=i[1]||1,(this._symbolType!==t.type||!function qae(e,n){return e&&n&&e[0]===n[0]&&e[1]===n[1]}(this._symbolSize,i)||this._lineWidth!==n.lineWidth)&&($6.createSymbolSprite(t.type,i,{fill:"#fff",lineWidth:n.lineWidth,stroke:"transparent",shadowColor:"transparent",minMargin:Math.min(i[0]/2,10)},this._spriteImageCanvas),$6.createSDFFromCanvas(this._spriteImageCanvas,Math.min(this._spriteImageCanvas.width,32),20,this._mesh.material.get("sprite").image),this._symbolType=t.type,this._symbolSize=i,this._lineWidth=n.lineWidth),this._spriteImageCanvas.width/t.maxSize*r},_updateMaterial:function(e,n){var t="lighter"===e.get("blendMode")?ot.additiveBlend:null,r=this._mesh.material;r.blend=t,r.set("lineWidth",n.lineWidth/20);var i=ot.parseColor(n.stroke);r.set("strokeColor",i),r.transparent=!0,r.depthMask=!1,r.depthTest=!this.is2D,r.sortVertices=!this.is2D},_updateLabelBuilder:function(e,d,t){var r=e.getData(),i=this._mesh.geometry,s=i.attributes.position.value,p=this._mesh.sizeScale;this._labelsBuilder.updateData(r,d=this._startDataIndex,t),this._labelsBuilder.getLabelPosition=function(v,_,C){var S=3*(v-d);return[s[S],s[S+1],s[S+2]]},this._labelsBuilder.getLabelDistance=function(v,_,C){return i.attributes.size.get(v-d)/p/2+C},this._labelsBuilder.updateLabels()},_updateAnimation:function(e){ot.updateVertexAnimation([["prevPosition","position"],["prevSize","size"]],this._prevMesh,this._mesh,e)},_updateHandler:function(e,n,t){var v,r=e.getData(),i=this._mesh,s=this,d=-1,p=e.coordinateSystem&&"cartesian3D"===e.coordinateSystem.type;p&&(v=e.coordinateSystem.model),i.seriesIndex=e.seriesIndex,i.off("mousemove"),i.off("mouseout"),i.on("mousemove",function(_){var C=_.vertexIndex+s._startDataIndex;C!==d&&(this.highlightOnMouseover&&(this.downplay(r,d),this.highlight(r,C),this._labelsBuilder.updateLabels([C])),p&&t.dispatchAction({type:"grid3DShowAxisPointer",value:[r.get(e.coordDimToDataDim("x")[0],C),r.get(e.coordDimToDataDim("y")[0],C),r.get(e.coordDimToDataDim("z")[0],C)],grid3DIndex:v.componentIndex})),i.dataIndex=C,d=C},this),i.on("mouseout",function(_){this.highlightOnMouseover&&(this.downplay(r,_.vertexIndex+s._startDataIndex),this._labelsBuilder.updateLabels()),d=-1,i.dataIndex=-1,p&&t.dispatchAction({type:"grid3DHideAxisPointer",grid3DIndex:v.componentIndex})},this)},updateLayout:function(e,n,t){var r=e.getData();if(this._mesh){var i=this._mesh.geometry.attributes.position.value,s=r.getLayout("points");if(this.is2D)for(var d=0;d<s.length/2;d++){var p=3*d,v=2*d;i[p]=s[v],i[p+1]=s[v+1],i[p+2]=-10}else for(d=0;d<s.length;d++)i[d]=s[d];this._mesh.geometry.dirty(),t.getZr().refresh()}},updateView:function(e){if(this._mesh){var n=new tr;tr.mul(n,e.viewMatrix,this._mesh.worldTransform),tr.mul(n,e.projectionMatrix,n),this._mesh.updateNDCPosition(n,this.is2D,this._api)}},highlight:function(e,n){if(!(n>this._endDataIndex||n<this._startDataIndex)){var r=e.getItemModel(n).getModel("emphasis.itemStyle"),i=r.get("color"),s=r.get("opacity");if(null==i){var d=Fo(e,n);i=bt.$_.lift(d,-.4)}null==s&&(s=Bo(e,n));var p=ot.parseColor(i);p[3]*=s,this._mesh.geometry.attributes.color.set(n-this._startDataIndex,p),this._mesh.geometry.dirtyAttribute("color"),this._api.getZr().refresh()}},downplay:function(e,n){if(!(n>this._endDataIndex||n<this._startDataIndex)){var t=Fo(e,n),r=Bo(e,n),i=ot.parseColor(t);i[3]*=r,this._mesh.geometry.attributes.color.set(n-this._startDataIndex,i),this._mesh.geometry.dirtyAttribute("color"),this._api.getZr().refresh()}},fadeOutAll:function(e){if(this._originalOpacity){for(var n=this._mesh.geometry,t=0;t<n.vertexCount;t++)n.attributes.color.value[4*t+3]=this._originalOpacity[t]*e;n.dirtyAttribute("color"),this._api.getZr().refresh()}},fadeInAll:function(){this.fadeOutAll(1)},setPositionTexture:function(e){this._mesh&&this._setPositionTextureToMesh(this._mesh,e),this._positionTexture=e},removePositionTexture:function(){this._positionTexture=null,this._mesh&&this._setPositionTextureToMesh(this._mesh,null)},setSizeScale:function(e){if(e!==this._sizeScale){if(this._mesh){var n=this._mesh.material.get("u_Size");this._mesh.material.set("u_Size",n/this._sizeScale*e);var t=this._mesh.geometry.attributes;if(t.size.value)for(var r=0;r<t.size.value.length;r++)t.size.value[r]=t.size.value[r]/this._sizeScale*e}this._sizeScale=e}},_setPositionTextureToMesh:function(e,n){n&&e.material.set("positionTexture",n),e.material[n?"enableTexture":"disableTexture"]("positionTexture")},_getSymbolInfo:function(e,n,t){if(e.get("large"))return(r=Qr.firstNotNull(e.get("symbolSize"),1))instanceof Array?(_=Math.max(r[0],r[1]),s=r[0]/r[1]):(_=r,s=1),{maxSize:r,type:e.get("symbol"),aspect:s};for(var s,i=e.getData(),p=i.getItemVisual(0,"symbol")||"circle",_=0,C=n;C<t;C++){var k,r=i.getItemVisual(C,"symbolSize"),S=i.getItemVisual(C,"symbol");if(r instanceof Array)k=r[0]/r[1],_=Math.max(Math.max(r[0],r[1]),_);else{if(isNaN(r))continue;k=1,_=Math.max(r,_)}p=S,s=k}return{maxSize:_,type:p,aspect:s}}};const fw=iV,Jae=bt.TA.extend({type:"scatter3D",hasSymbolVisual:!0,__ecgl__:!0,init:function(e,n){this.groupGL=new ot.Node,this._pointsBuilderList=[],this._currentStep=0},render:function(e,n,t){if(this.groupGL.removeAll(),e.getData().count()){var r=e.coordinateSystem;if(r&&r.viewGL){r.viewGL.add(this.groupGL),this._camera=r.viewGL.camera;var i=this._pointsBuilderList[0];i||(i=this._pointsBuilderList[0]=new fw(!1,t)),this._pointsBuilderList.length=1,this.groupGL.add(i.rootNode),i.update(e,n,t),i.updateView(r.viewGL.camera)}}},incrementalPrepareRender:function(e,n,t){var r=e.coordinateSystem;r&&r.viewGL&&(r.viewGL.add(this.groupGL),this._camera=r.viewGL.camera),this.groupGL.removeAll(),this._currentStep=0},incrementalRender:function(e,n,t,r){if(!(e.end<=e.start)){var i=this._pointsBuilderList[this._currentStep];i||(i=new fw(!1,r),this._pointsBuilderList[this._currentStep]=i),this.groupGL.add(i.rootNode),i.update(n,t,r,e.start,e.end),i.updateView(n.coordinateSystem.viewGL.camera),this._currentStep++}},updateCamera:function(){this._pointsBuilderList.forEach(function(e){e.updateView(this._camera)},this)},highlight:function(e,n,t,r){this._toggleStatus("highlight",e,n,t,r)},downplay:function(e,n,t,r){this._toggleStatus("downplay",e,n,t,r)},_toggleStatus:function(e,n,t,r,i){var s=n.getData(),d=Qr.queryDataIndex(s,i),p="highlight"===e;null!=d?bt.D5.each($y.normalizeToArray(d),function(v){for(var _=0;_<this._pointsBuilderList.length;_++){var C=this._pointsBuilderList[_];p?C.highlight(s,v):C.downplay(s,v)}},this):s.each(function(v){for(var _=0;_<this._pointsBuilderList.length;_++){var C=this._pointsBuilderList[_];p?C.highlight(s,v):C.downplay(s,v)}})},dispose:function(){this._pointsBuilderList.forEach(function(e){e.dispose()}),this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});(0,bt.D$)(function eoe(e){e.registerChartView(Jae),e.registerSeriesModel(jae),e.registerLayout({seriesType:"scatter3D",reset:function(n){var t=n.coordinateSystem;if(t){var r=t.dimensions;if(r.length<3)return;var i=r.map(function(p){return n.coordDimToDataDim(p)[0]}),s=[],d=[];return{progress:function(p,v){for(var _=new Float32Array(3*(p.end-p.start)),C=p.start;C<p.end;C++){var S=3*(C-p.start);s[0]=v.get(i[0],C),s[1]=v.get(i[1],C),s[2]=v.get(i[2],C),t.dataToPoint(s,d),_[S]=d[0],_[S+1]=d[1],_[S+2]=d[2]}v.setLayout("points",_)}}}}})});var Co=Ka.vec3,J6=Ka.vec2,oh=Co.normalize,qI=Co.cross,ej=Co.sub,aV=Co.add,Ef=Co.create,Af=Ef(),Ru=Ef(),If=Ef(),pw=Ef(),tj=[],nj=[];function toe(e,n){J6.copy(tj,e[0]),J6.copy(nj,e[1]);var t=[],r=t[0]=Ef(),i=t[1]=Ef(),s=t[2]=Ef(),d=t[3]=Ef();n.dataToPoint(tj,r),n.dataToPoint(nj,d),oh(Af,r),ej(Ru,d,r),oh(Ru,Ru),qI(If,Ru,Af),oh(If,If),qI(Ru,Af,If),aV(i,Af,Ru),oh(i,i),oh(Af,d),ej(Ru,r,d),oh(Ru,Ru),qI(If,Ru,Af),oh(If,If),qI(Ru,Af,If),aV(s,Af,Ru),oh(s,s),aV(pw,r,d),oh(pw,pw);var p=Co.dot(r,pw),v=Co.dot(pw,i),_=(Math.max(Co.len(r),Co.len(d))-p)/v*2;return Co.scaleAndAdd(i,r,i,_),Co.scaleAndAdd(s,d,s,_),t}function rj(e,n){for(var t=new Float32Array(3*e.length),r=0,i=[],s=0;s<e.length;s++)n.dataToPoint(e[s],i),t[r++]=i[0],t[r++]=i[1],t[r++]=i[2];return t}function ij(e){var n=[];return e.each(function(t){var r=e.getItemModel(t),i=r.option instanceof Array?r.option:r.getShallow("coords",!0);n.push(i)}),{coordsList:n}}function aj(e,n,t){var r=e.getData(),i=e.get("polyline"),s=ij(r);r.setLayout("lineType",i?"polyline":"cubicBezier"),r.each(function(d){var p=s.coordsList[d],v=i?rj(p,n):function noe(e,n,t){var r=[],i=r[0]=Co.create(),s=r[1]=Co.create(),d=r[2]=Co.create(),p=r[3]=Co.create();n.dataToPoint(e[0],i),n.dataToPoint(e[1],p);var v=Co.dist(i,p);return Co.lerp(s,i,p,.3),Co.lerp(d,i,p,.3),Co.scaleAndAdd(s,s,t,Math.min(.1*v,10)),Co.scaleAndAdd(d,d,t,Math.min(.1*v,10)),r}(p,n,t);r.setItemLayout(d,v)})}function ioe(e,n){e.eachSeriesByType("lines3D",function(t){var r=t.coordinateSystem;"globe"===r.type?function roe(e,n){var t=e.getData(),r=e.get("polyline");t.setLayout("lineType",r?"polyline":"cubicBezier");var i=ij(t);t.each(function(s){t.setItemLayout(s,(r?rj:toe)(i.coordsList[s],n))})}(t,r):"geo3D"===r.type?aj(t,r,[0,1,0]):("mapbox3D"===r.type||"maptalks3D"===r.type)&&aj(t,r,[0,0,1])})}const aoe=bt.wJ.extend({type:"series.lines3D",dependencies:["globe"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",getInitialData:function(e,n){var t=new bt.aV(["value"],this);return t.hasItemOption=!1,t.initData(e.data,[],function(r,i,s,d){if(r instanceof Array)return NaN;t.hasItemOption=!0;var p=r.value;return null!=p?p instanceof Array?p[d]:p:void 0}),t},defaultOption:{coordinateSystem:"globe",globeIndex:0,geo3DIndex:0,zlevel:-10,polyline:!1,effect:{show:!1,period:4,trailWidth:4,trailLength:.2,spotIntensity:6},silent:!0,blendMode:"source-over",lineStyle:{width:1,opacity:.5}}});var oj=Ka.vec3;function soe(e){return e>0?1:-1}ot.Shader.import("@export ecgl.trail2.vertex\nattribute vec3 position: POSITION;\nattribute vec3 positionPrev;\nattribute vec3 positionNext;\nattribute float offset;\nattribute float dist;\nattribute float distAll;\nattribute float start;\n\nattribute vec4 a_Color : COLOR;\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform vec4 viewport : VIEWPORT;\nuniform float near : NEAR;\n\nuniform float speed : 0;\nuniform float trailLength: 0.3;\nuniform float time;\nuniform float period: 1000;\n\nuniform float spotSize: 1;\n\nvarying vec4 v_Color;\nvarying float v_Percent;\nvarying float v_SpotPercent;\n\n@import ecgl.common.wireframe.vertexHeader\n\n@import ecgl.lines3D.clipNear\n\nvoid main()\n{\n @import ecgl.lines3D.expandLine\n\n gl_Position = currProj;\n\n v_Color = a_Color;\n\n @import ecgl.common.wireframe.vertexMain\n\n#ifdef CONSTANT_SPEED\n float t = mod((speed * time + start) / distAll, 1. + trailLength) - trailLength;\n#else\n float t = mod((time + start) / period, 1. + trailLength) - trailLength;\n#endif\n\n float trailLen = distAll * trailLength;\n\n v_Percent = (dist - t * distAll) / trailLen;\n\n v_SpotPercent = spotSize / distAll;\n\n }\n@end\n\n\n@export ecgl.trail2.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\nuniform float spotIntensity: 5;\n\nvarying vec4 v_Color;\nvarying float v_Percent;\nvarying float v_SpotPercent;\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.util.srgb\n\nvoid main()\n{\n if (v_Percent > 1.0 || v_Percent < 0.0) {\n discard;\n }\n\n float fade = v_Percent;\n\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(color * v_Color);\n#else\n gl_FragColor = color * v_Color;\n#endif\n\n @import ecgl.common.wireframe.fragmentMain\n\n if (v_Percent > (1.0 - v_SpotPercent)) {\n gl_FragColor.rgb *= spotIntensity;\n }\n\n gl_FragColor.a *= fade;\n}\n\n@end");const loe=ot.Mesh.extend(function(){var e=new ot.Material({shader:new ot.Shader(ot.Shader.source("ecgl.trail2.vertex"),ot.Shader.source("ecgl.trail2.fragment")),transparent:!0,depthMask:!1}),n=new Yv({dynamic:!0});return n.createAttribute("dist","float",1),n.createAttribute("distAll","float",1),n.createAttribute("start","float",1),{geometry:n,material:e,culling:!1,$ignorePicking:!0}},{updateData:function(e,n,t){var r=e.hostModel,i=this.geometry,s=r.getModel("effect"),d=s.get("trailWidth")*n.getDevicePixelRatio(),p=s.get("trailLength"),v=r.get("effect.constantSpeed"),_=1e3*r.get("effect.period"),C=null!=v;C?this.material.set("speed",v/1e3):this.material.set("period",_),this.material[C?"define":"undefine"]("vertex","CONSTANT_SPEED");var S=r.get("polyline");i.trailLength=p,this.material.set("trailLength",p),i.resetOffset(),["position","positionPrev","positionNext"].forEach(function(Ct){i.attributes[Ct].value=t.attributes[Ct].value}),["dist","distAll","start","offset","color"].forEach(function(Ct){i.attributes[Ct].init(i.vertexCount)}),i.indices=t.indices;var H=[],ne=s.get("trailColor"),pe=s.get("trailOpacity"),Me=null!=ne,Re=null!=pe;this.updateWorldTransform();var Fe=this.worldTransform.x.len(),Oe=this.worldTransform.y.len(),Be=this.worldTransform.z.len(),nt=0,rt=0;e.each(function(Ct){var mt=e.getItemLayout(Ct),Ft=Re?pe:Bo(e,Ct),nn=Fo(e,Ct);null==Ft&&(Ft=1),(H=ot.parseColor(Me?ne:nn,H))[3]*=Ft;for(var Xt=S?t.getPolylineVertexCount(mt):t.getCubicCurveVertexCount(mt[0],mt[1],mt[2],mt[3]),pn=0,mn=[],on=[],Cn=nt;Cn<nt+Xt;Cn++)i.attributes.position.get(Cn,mn),mn[0]*=Fe,mn[1]*=Oe,mn[2]*=Be,Cn>nt&&(pn+=oj.dist(mn,on)),i.attributes.dist.set(Cn,pn),oj.copy(on,mn);rt=Math.max(rt,pn);var Ht=Math.random()*(C?pn:_);for(Cn=nt;Cn<nt+Xt;Cn++)i.attributes.distAll.set(Cn,pn),i.attributes.start.set(Cn,Ht),i.attributes.offset.set(Cn,soe(t.attributes.offset.get(Cn))*d/2),i.attributes.color.set(Cn,H);nt+=Xt}),this.material.set("spotSize",.1*rt*p),this.material.set("spotIntensity",s.get("spotIntensity")),i.dirty()},setAnimationTime:function(e){this.material.set("time",e)}});ot.Shader.import(HI);const coe=bt.TA.extend({type:"lines3D",__ecgl__:!0,init:function(e,n){this.groupGL=new ot.Node,this._meshLinesMaterial=new ot.Material({shader:ot.createShader("ecgl.meshLines3D"),transparent:!0,depthMask:!1}),this._linesMesh=new ot.Mesh({geometry:new Yv,material:this._meshLinesMaterial,$ignorePicking:!0}),this._trailMesh=new loe},render:function(e,n,t){this.groupGL.add(this._linesMesh);var r=e.coordinateSystem,i=e.getData();if(r&&r.viewGL){r.viewGL.add(this.groupGL),this._updateLines(e,n,t);var d=r.viewGL.isLinearSpace()?"define":"undefine";this._linesMesh.material[d]("fragment","SRGB_DECODE"),this._trailMesh.material[d]("fragment","SRGB_DECODE")}var p=this._trailMesh;if(p.stopAnimation(),e.get("effect.show")){this.groupGL.add(p),p.updateData(i,t,this._linesMesh.geometry),p.__time=p.__time||0;var v=36e5;this._curveEffectsAnimator=p.animate("",{loop:!0}).when(v,{__time:v}).during(function(){p.setAnimationTime(p.__time)}).start()}else this.groupGL.remove(p),this._curveEffectsAnimator=null;this._linesMesh.material.blend=this._trailMesh.material.blend="lighter"===e.get("blendMode")?ot.additiveBlend:null},pauseEffect:function(){this._curveEffectsAnimator&&this._curveEffectsAnimator.pause()},resumeEffect:function(){this._curveEffectsAnimator&&this._curveEffectsAnimator.resume()},toggleEffect:function(){var e=this._curveEffectsAnimator;e&&(e.isPaused()?e.resume():e.pause())},_updateLines:function(e,n,t){var r=e.getData(),i=e.coordinateSystem,s=this._linesMesh.geometry,d=e.get("polyline");s.expandLine=!0;var p=function uoe(e){return null!=e.radius?e.radius:null!=e.size?Math.max(e.size[0],e.size[1],e.size[2]):100}(i);s.segmentScale=p/20;var v="lineStyle.width".split("."),_=t.getDevicePixelRatio(),C=0;r.each(function(ne){var Me=r.getItemModel(ne).get(v);null==Me&&(Me=1),r.setItemVisual(ne,"lineWidth",Me),C=Math.max(Me,C)}),s.useNativeLine=!1;var S=0,k=0;r.each(function(ne){var pe=r.getItemLayout(ne);d?(S+=s.getPolylineVertexCount(pe),k+=s.getPolylineTriangleCount(pe)):(S+=s.getCubicCurveVertexCount(pe[0],pe[1],pe[2],pe[3]),k+=s.getCubicCurveTriangleCount(pe[0],pe[1],pe[2],pe[3]))}),s.setVertexCount(S),s.setTriangleCount(k),s.resetOffset();var H=[];r.each(function(ne){var pe=r.getItemLayout(ne),Me=Fo(r,ne),Re=Bo(r,ne),Fe=r.getItemVisual(ne,"lineWidth")*_;null==Re&&(Re=1),(H=ot.parseColor(Me,H))[3]*=Re,d?s.addPolyline(pe,H,Fe):s.addCubicCurve(pe[0],pe[1],pe[2],pe[3],H,Fe)}),s.dirty()},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}});function sj(e,n){for(var t=[],r=0;r<n.length;r++)t.push(e.dataToPoint(n[r]));return t}(0,bt.D$)(function doe(e){e.registerChartView(coe),e.registerSeriesModel(aoe),e.registerLayout(ioe),e.registerAction({type:"lines3DPauseEffect",event:"lines3deffectpaused",update:"series.lines3D:pauseEffect"},function(){}),e.registerAction({type:"lines3DResumeEffect",event:"lines3deffectresumed",update:"series.lines3D:resumeEffect"},function(){}),e.registerAction({type:"lines3DToggleEffect",event:"lines3deffectchanged",update:"series.lines3D:toggleEffect"},function(){})});var lj=bt.wJ.extend({type:"series.polygons3D",getRegionModel:function(e){return this.getData().getItemModel(e)},getRegionPolygonCoords:function(e){var n=this.coordinateSystem,t=this.getData().getItemModel(e),r=t.option instanceof Array?t.option:t.getShallow("coords");t.get("multiPolygon")||(r=[r]);for(var i=[],s=0;s<r.length;s++){for(var d=[],p=1;p<r[s].length;p++)d.push(sj(n,r[s][p]));i.push({exterior:sj(n,r[s][0]),interiors:d})}return i},getInitialData:function(e){var n=new bt.aV(["value"],this);return n.hasItemOption=!1,n.initData(e.data,[],function(t,r,i,s){if(t instanceof Array)return NaN;n.hasItemOption=!0;var d=t.value;return null!=d?d instanceof Array?d[s]:d:void 0}),n},defaultOption:{show:!0,data:null,multiPolygon:!1,progressiveThreshold:1e3,progressive:1e3,zlevel:-10,label:{show:!1,distance:2,textStyle:{fontSize:20,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:4}},itemStyle:{color:"#fff",borderWidth:0,borderColor:"#333"},emphasis:{itemStyle:{color:"#639fc0"},label:{show:!0}}}});bt.D5.merge(lj.prototype,Wy);const hoe=lj,foe=bt.TA.extend({type:"polygons3D",__ecgl__:!0,init:function(e,n){this.groupGL=new ot.Node,this._geo3DBuilderList=[],this._currentStep=0},render:function(e,n,t){this.groupGL.removeAll();var r=e.coordinateSystem;r&&r.viewGL&&r.viewGL.add(this.groupGL);var i=this._geo3DBuilderList[0];i||((i=new XI(t)).extrudeY="mapbox3D"!==r.type&&"maptalks3D"!==r.type,this._geo3DBuilderList[0]=i),this._updateShaderDefines(r,i),i.update(e,n,t),this._geo3DBuilderList.length=1,this.groupGL.add(i.rootNode)},incrementalPrepareRender:function(e,n,t){this.groupGL.removeAll();var r=e.coordinateSystem;r&&r.viewGL&&r.viewGL.add(this.groupGL),this._currentStep=0},incrementalRender:function(e,n,t,r){var i=this._geo3DBuilderList[this._currentStep],s=n.coordinateSystem;i||((i=new XI(r)).extrudeY="mapbox3D"!==s.type&&"maptalks3D"!==s.type,this._geo3DBuilderList[this._currentStep]=i),i.update(n,t,r,e.start,e.end),this.groupGL.add(i.rootNode),this._updateShaderDefines(s,i),this._currentStep++},_updateShaderDefines:function(e,n){var t=e.viewGL.isLinearSpace()?"define":"undefine";n.rootNode.traverse(function(r){r.material&&(r.material[t]("fragment","SRGB_DECODE"),("mapbox3D"===e.type||"maptalks3D"===e.type)&&(r.material.define("fragment","NORMAL_UP_AXIS",2),r.material.define("fragment","NORMAL_FRONT_AXIS",1)))})},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll(),this._geo3DBuilderList.forEach(function(e){e.dispose()})}});(0,bt.D$)(function poe(e){e.registerChartView(foe),e.registerSeriesModel(hoe)});var uj=bt.wJ.extend({type:"series.surface",dependencies:["globe","grid3D","geo3D"],visualStyleAccessPath:"itemStyle",formatTooltip:function(e){return hw(this,e)},getInitialData:function(e,n){var t=e.data;function r(ln){return!(isNaN(ln.min)||isNaN(ln.max)||isNaN(ln.step))}function i(ln){var Zt=bt.Rx.getPrecisionSafe;return Math.max(Zt(ln.min),Zt(ln.max),Zt(ln.step))+1}if(!t)if(e.parametric){var Be=e.parametricEquation||{},nt=Be.u||{},rt=Be.v||{};["u","v"].forEach(function(Zt){r(Be[Zt])}),["x","y","z"].forEach(function(Zt){});var Ct=Math.floor((nt.max+nt.step-nt.min)/nt.step),mt=Math.floor((rt.max+rt.step-rt.min)/rt.step);t=new Float32Array(Ct*mt*5);for(var Ft=i(nt),nn=i(rt),k=0,H=0;H<mt;H++)for(var ne=0;ne<Ct;ne++){var pn=H*rt.step+rt.min,mn=bt.Rx.round(Math.min(ne*nt.step+nt.min,nt.max),Ft),on=bt.Rx.round(Math.min(pn,rt.max),nn),pe=Be.x(mn,on),Me=Be.y(mn,on),Oe=Be.z(mn,on);t[k++]=pe,t[k++]=Me,t[k++]=Oe,t[k++]=mn,t[k++]=on}}else{var s=e.equation||{},d=s.x||{},p=s.y||{};if(["x","y"].forEach(function(ln){r(s[ln])}),"function"!=typeof s.z)return;var v=Math.floor((d.max+d.step-d.min)/d.step),_=Math.floor((p.max+p.step-p.min)/p.step);t=new Float32Array(v*_*3);var C=i(d),S=i(p);for(k=0,H=0;H<_;H++)for(ne=0;ne<v;ne++){pe=ne*d.step+d.min,Me=H*p.step+p.min;var Re=bt.Rx.round(Math.min(pe,d.max),C),Fe=bt.Rx.round(Math.min(Me,p.max),S);Oe=s.z(Re,Fe),t[k++]=Re,t[k++]=Fe,t[k++]=Oe}}var Cn=["x","y","z"];return e.parametric&&Cn.push("u","v"),QI(this,Cn,t)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,grid3DIndex:0,shading:"lambert",parametric:!1,wireframe:{show:!0,lineStyle:{color:"rgba(0,0,0,0.5)",width:1}},equation:{x:{min:-1,max:1,step:.1},y:{min:-1,max:1,step:.1},z:null},parametricEquation:{u:{min:-1,max:1,step:.1},v:{min:-1,max:1,step:.1},x:null,y:null,z:null},dataShape:null,itemStyle:{},animationDurationUpdate:500}});bt.D5.merge(uj.prototype,Wy);const voe=uj;var ng=Ka.vec3;function goe(e){return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])}const moe=bt.TA.extend({type:"surface",__ecgl__:!0,init:function(e,n){this.groupGL=new ot.Node},render:function(e,n,t){var r=this._prevSurfaceMesh;this._prevSurfaceMesh=this._surfaceMesh,this._surfaceMesh=r,this._surfaceMesh||(this._surfaceMesh=this._createSurfaceMesh()),this.groupGL.remove(this._prevSurfaceMesh),this.groupGL.add(this._surfaceMesh);var i=e.coordinateSystem,s=e.get("shading"),d=e.getData(),p="ecgl."+s;if((!this._surfaceMesh.material||this._surfaceMesh.material.shader.name!==p)&&(this._surfaceMesh.material=ot.createMaterial(p,["VERTEX_COLOR","DOUBLE_SIDED"])),ot.setMaterialFromModel(s,this._surfaceMesh.material,e,t),i&&i.viewGL){i.viewGL.add(this.groupGL);var v=i.viewGL.isLinearSpace()?"define":"undefine";this._surfaceMesh.material[v]("fragment","SRGB_DECODE")}var _=e.get("parametric"),C=e.get("dataShape");C||(C=this._getDataShape(d,_));var S=e.getModel("wireframe"),k=S.get("lineStyle.width"),H=S.get("show")&&k>0;this._updateSurfaceMesh(this._surfaceMesh,e,C,H);var ne=this._surfaceMesh.material;H?(ne.define("WIREFRAME_QUAD"),ne.set("wireframeLineWidth",k),ne.set("wireframeLineColor",ot.parseColor(S.get("lineStyle.color")))):ne.undefine("WIREFRAME_QUAD"),this._initHandler(e,t),this._updateAnimation(e)},_updateAnimation:function(e){ot.updateVertexAnimation([["prevPosition","position"],["prevNormal","normal"]],this._prevSurfaceMesh,this._surfaceMesh,e)},_createSurfaceMesh:function(){var e=new ot.Mesh({geometry:new ot.Geometry({dynamic:!0,sortTriangles:!0}),shadowDepthMaterial:new ot.Material({shader:new ot.Shader(ot.Shader.source("ecgl.sm.depth.vertex"),ot.Shader.source("ecgl.sm.depth.fragment"))}),culling:!1,renderOrder:10,renderNormal:!0});return e.geometry.createAttribute("barycentric","float",4),e.geometry.createAttribute("prevPosition","float",3),e.geometry.createAttribute("prevNormal","float",3),Object.assign(e.geometry,U3),e},_initHandler:function(e,n){var t=e.getData(),r=this._surfaceMesh,i=e.coordinateSystem;r.seriesIndex=e.seriesIndex;var d=-1;r.off("mousemove"),r.off("mouseout"),r.on("mousemove",function(p){var v=function s(p,v){for(var _=1/0,C=-1,S=[],k=0;k<p.length;k++){r.geometry.attributes.position.get(p[k],S);var H=ng.dist(v.array,S);H<_&&(_=H,C=p[k])}return C}(p.triangle,p.point);if(v>=0){var _=[];r.geometry.attributes.position.get(v,_);for(var C=i.pointToData(_),S=1/0,k=-1,H=[],ne=0;ne<t.count();ne++){H[0]=t.get("x",ne),H[1]=t.get("y",ne),H[2]=t.get("z",ne);var pe=ng.squaredDistance(H,C);pe<S&&(k=ne,S=pe)}k!==d&&n.dispatchAction({type:"grid3DShowAxisPointer",value:C}),d=k,r.dataIndex=k}else r.dataIndex=-1},this),r.on("mouseout",function(p){d=-1,r.dataIndex=-1,n.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_updateSurfaceMesh:function(e,n,t,r){var i=e.geometry,s=n.getData(),d=s.getLayout("points"),p=0;s.each(function(So){s.hasValue(So)||p++});var v=p||r,_=i.attributes.position,C=i.attributes.normal,S=i.attributes.texcoord0,k=i.attributes.barycentric,H=i.attributes.color,ne=t[0],pe=t[1],Re="color"!==n.get("shading");if(v){var Fe=(ne-1)*(pe-1)*4;_.init(Fe),r&&k.init(Fe)}else _.value=new Float32Array(d);H.init(i.vertexCount),S.init(i.vertexCount);var Oe=[0,3,1,1,3,2],Be=[[1,1,0,0],[0,1,0,1],[1,0,0,1],[1,0,1,0]],nt=i.indices=new(i.vertexCount>65535?Uint32Array:Uint16Array)((ne-1)*(pe-1)*6),rt=function(So,ed,As){As[1]=So*pe+ed,As[0]=So*pe+ed+1,As[3]=(So+1)*pe+ed+1,As[2]=(So+1)*pe+ed},Ct=!1;if(v){var mt=[],Ft=[],nn=0;Re?C.init(i.vertexCount):C.value=null;for(var Xt=[[],[],[]],pn=[],mn=[],on=ng.create(),Cn=function(So,ed,As){var FV=3*ed;return As[0]=So[FV],As[1]=So[FV+1],As[2]=So[FV+2],As},Ht=new Float32Array(d.length),ln=new Float32Array(d.length/3*4),Zt=0;Zt<s.count();Zt++)if(s.hasValue(Zt)){var Ra=ot.parseColor(Fo(s,Zt));null!=(Zn=Bo(s,Zt))&&(Ra[3]*=Zn),Ra[3]<.99&&(Ct=!0);for(var An=0;An<4;An++)ln[4*Zt+An]=Ra[An]}var ri=[1e7,1e7,1e7];for(Zt=0;Zt<ne-1;Zt++)for(var kr=0;kr<pe-1;kr++){var Dr=4*(Zt*(pe-1)+kr);rt(Zt,kr,mt);var qr=!1;for(An=0;An<4;An++)Cn(d,mt[An],Ft),goe(Ft)&&(qr=!0);for(An=0;An<4;An++)qr?_.set(Dr+An,ri):(Cn(d,mt[An],Ft),_.set(Dr+An,Ft)),r&&k.set(Dr+An,Be[An]);for(An=0;An<6;An++)nt[nn++]=Oe[An]+Dr;if(Re&&!qr)for(An=0;An<2;An++){for(var Qa=3*An,ii=0;ii<3;ii++)Cn(d,Wi=mt[Oe[Qa]+ii],Xt[ii]);for(ng.sub(pn,Xt[0],Xt[1]),ng.sub(mn,Xt[1],Xt[2]),ng.cross(on,pn,mn),ii=0;ii<3;ii++){var ji=3*mt[Oe[Qa]+ii];Ht[ji]=Ht[ji]+on[0],Ht[ji+1]=Ht[ji+1]+on[1],Ht[ji+2]=Ht[ji+2]+on[2]}}}if(Re)for(Zt=0;Zt<Ht.length/3;Zt++)Cn(Ht,Zt,on),ng.normalize(on,on),Ht[3*Zt]=on[0],Ht[3*Zt+1]=on[1],Ht[3*Zt+2]=on[2];Ra=[];var Ba=[];for(Zt=0;Zt<ne-1;Zt++)for(kr=0;kr<pe-1;kr++)for(Dr=4*(Zt*(pe-1)+kr),rt(Zt,kr,mt),An=0;An<4;An++){for(ii=0;ii<4;ii++)Ra[ii]=ln[4*mt[An]+ii];var Wi;H.set(Dr+An,Ra),Re&&(Cn(Ht,mt[An],on),C.set(Dr+An,on)),Ba[0]=(Wi=mt[An])%pe/(pe-1),Ba[1]=Math.floor(Wi/pe)/(ne-1),S.set(Dr+An,Ba)}}else{for(Ba=[],Zt=0;Zt<s.count();Zt++){var Zn;Ba[0]=Zt%pe/(pe-1),Ba[1]=Math.floor(Zt/pe)/(ne-1),Ra=ot.parseColor(Fo(s,Zt)),null!=(Zn=Bo(s,Zt))&&(Ra[3]*=Zn),Ra[3]<.99&&(Ct=!0),H.set(Zt,Ra),S.set(Zt,Ba)}mt=[];var Cw=0;for(Zt=0;Zt<ne-1;Zt++)for(kr=0;kr<pe-1;kr++)for(rt(Zt,kr,mt),An=0;An<6;An++)nt[Cw++]=mt[Oe[An]];Re?i.generateVertexNormals():C.value=null}e.material.get("normalMap")&&i.generateTangents(),i.updateBoundingBox(),i.dirty(),e.material.transparent=Ct,e.material.depthMask=!Ct},_getDataShape:function(e,n){for(var t=-1/0,r=0,i=0,d=!1,p=n?"u":"x",v=e.count(),_=0;_<v;_++){var C=e.get(p,_);C<t&&(i=0,r++),t=C,i++}if((!r||1===i)&&(d=!0),!d)return[r+1,i];for(var S=Math.floor(Math.sqrt(v));S>0;){if(Math.floor(v/S)===v/S)return[S,v/S];S--}return[S=Math.floor(Math.sqrt(v)),S]},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function cj(e,n){for(var t=[],r=0;r<n.length;r++)t.push(e.dataToPoint(n[r]));return t}(0,bt.D$)(function _oe(e){e.registerChartView(moe),e.registerSeriesModel(voe),e.registerLayout(function(n,t){n.eachSeriesByType("surface",function(r){var i=r.coordinateSystem,s=r.getData(),d=new Float32Array(3*s.count()),p=[NaN,NaN,NaN];if(i&&"cartesian3D"===i.type){var _=i.dimensions.map(function(C){return r.coordDimToDataDim(C)[0]});s.each(_,function(C,S,k,H){var ne;ne=s.hasValue(H)?i.dataToPoint([C,S,k]):p,d[3*H]=ne[0],d[3*H+1]=ne[1],d[3*H+2]=ne[2]})}s.setLayout("points",d)})})});var Ky=bt.wJ.extend({type:"series.map3D",layoutMode:"box",coordinateSystem:null,visualStyleAccessPath:"itemStyle",optionUpdated:function(e){e=e||{};var n=this.get("coordinateSystem");null!=n&&"geo3D"!==n&&(this.get("groundPlane.show")&&(this.option.groundPlane.show=!1),this._geo=null)},getInitialData:function(e){e.data=this.getFilledRegions(e.data,e.map);var n=bt._y.createDimensions(e.data,{coordDimensions:["value"]}),t=new bt.aV(n,this);t.initData(e.data);var r={};return t.each(function(i){var s=t.getName(i),d=t.getItemModel(i);r[s]=d}),this._regionModelMap=r,t},formatTooltip:function(e){return hw(this,e)},getRegionModel:function(e){var n=this.getData().getName(e);return this._regionModelMap[n]||new bt.Hn(null,this)},getRegionPolygonCoords:function(e){var n=this.coordinateSystem,t=this.getData().getName(e);if(n.transform)return(r=n.getRegion(t))?r.geometries:[];this._geo||(this._geo=R6.createGeo3D(this));for(var r=this._geo.getRegion(t),i=[],s=0;s<r.geometries.length;s++){var d=r.geometries[s],p=[],v=cj(n,d.exterior);if(p&&p.length)for(var _=0;_<d.interiors.length;_++)p.push(cj(n,p[_]));i.push({interiors:p,exterior:v})}return i},getFormattedLabel:function(e,n){var t=$y.getFormattedLabel(this,e,n);return null==t&&(t=this.getData().getName(e)),t},defaultOption:{coordinateSystem:"geo3D",data:null}});bt.D5.merge(Ky.prototype,m6),bt.D5.merge(Ky.prototype,kI),bt.D5.merge(Ky.prototype,Vy),bt.D5.merge(Ky.prototype,zy),bt.D5.merge(Ky.prototype,Wy);const yoe=Ky,boe=bt.TA.extend({type:"map3D",__ecgl__:!0,init:function(e,n){this._geo3DBuilder=new XI(n),this.groupGL=new ot.Node},render:function(e,n,t){var r=e.coordinateSystem;if(r&&r.viewGL){if(this.groupGL.add(this._geo3DBuilder.rootNode),r.viewGL.add(this.groupGL),"geo3D"===r.type){this._sceneHelper||(this._sceneHelper=new Hy,this._sceneHelper.initLight(this.groupGL)),this._sceneHelper.setScene(r.viewGL.scene),this._sceneHelper.updateLight(e),r.viewGL.setPostEffect(e.getModel("postEffect"),t),r.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling"));var s=this._control;s||(s=this._control=new BI({zr:t.getZr()}),this._control.init());var d=e.getModel("viewControl");s.setViewGL(r.viewGL),s.setFromViewControlModel(d,0),s.off("update"),s.on("update",function(){t.dispatchAction({type:"map3DChangeCamera",alpha:s.getAlpha(),beta:s.getBeta(),distance:s.getDistance(),from:this.uid,map3DId:e.id})}),this._geo3DBuilder.extrudeY=!0}else this._control&&(this._control.dispose(),this._control=null),this._sceneHelper&&(this._sceneHelper.dispose(),this._sceneHelper=null),e.getData().getLayout("geo3D"),this._geo3DBuilder.extrudeY=!1;this._geo3DBuilder.update(e,n,t,0,e.getData().count());var p=r.viewGL.isLinearSpace()?"define":"undefine";this._geo3DBuilder.rootNode.traverse(function(v){v.material&&v.material[p]("fragment","SRGB_DECODE")})}},afterRender:function(e,n,t,r){var i=r.renderer,s=e.coordinateSystem;s&&"geo3D"===s.type&&(this._sceneHelper.updateAmbientCubemap(i,e,t),this._sceneHelper.updateSkybox(i,e,t))},dispose:function(){this.groupGL.removeAll(),this._control.dispose(),this._geo3DBuilder.dispose()}});(0,bt.D$)(function xoe(e){L6(e),e.registerChartView(boe),e.registerSeriesModel(yoe),e.registerAction({type:"map3DChangeCamera",event:"map3dcamerachanged",update:"series:updateCamera"},function(n,t){t.eachComponent({mainType:"series",subType:"map3D",query:n},function(r){r.setView(n)})})});const Coe=bt.wJ.extend({type:"series.scatterGL",dependencies:["grid","polar","geo","singleAxis"],visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,getInitialData:function(){return bt._y.createList(this)},defaultOption:{coordinateSystem:"cartesian2d",zlevel:10,progressive:1e5,progressiveThreshold:1e5,large:!1,symbol:"circle",symbolSize:10,zoomScale:0,blendMode:"source-over",itemStyle:{opacity:.8},postEffect:{enable:!1,colorCorrection:{exposure:0,brightness:0,contrast:1,saturation:1,enable:!0}}}});var dj=z(3481),hj=z(8221);function Pf(e){this.viewGL=e}Pf.prototype.reset=function(e,n){this._updateCamera(n.getWidth(),n.getHeight(),n.getDevicePixelRatio()),this._viewTransform=dj.create(),this.updateTransform(e,n)},Pf.prototype.updateTransform=function(e,n){var t=e.coordinateSystem;t.getRoamTransform&&(dj.invert(this._viewTransform,t.getRoamTransform()),this._setCameraTransform(this._viewTransform),n.getZr().refresh())},Pf.prototype.dataToPoint=function(e,n,t){t=e.dataToPoint(n,null,t);var r=this._viewTransform;r&&hj.applyTransform(t,t,r)},Pf.prototype.removeTransformInPoint=function(e){return this._viewTransform&&hj.applyTransform(e,e,this._viewTransform),e},Pf.prototype.getZoom=function(){if(this._viewTransform){var e=this._viewTransform;return 1/Math.max(Math.sqrt(e[0]*e[0]+e[1]*e[1]),Math.sqrt(e[2]*e[2]+e[3]*e[3]))}return 1},Pf.prototype._setCameraTransform=function(e){var n=this.viewGL.camera;n.position.set(e[4],e[5],0),n.scale.set(Math.sqrt(e[0]*e[0]+e[1]*e[1]),Math.sqrt(e[2]*e[2]+e[3]*e[3]),1)},Pf.prototype._updateCamera=function(e,n,t){this.viewGL.setViewport(0,0,e,n,t);var r=this.viewGL.camera;r.left=r.top=0,r.bottom=n,r.right=e,r.near=0,r.far=100};const fj=Pf,woe=bt.TA.extend({type:"scatterGL",__ecgl__:!0,init:function(e,n){this.groupGL=new ot.Node,this.viewGL=new Sf("orthographic"),this.viewGL.add(this.groupGL),this._pointsBuilderList=[],this._currentStep=0,this._sizeScale=1,this._glViewHelper=new fj(this.viewGL)},render:function(e,n,t){if(this.groupGL.removeAll(),this._glViewHelper.reset(e,t),e.getData().count()){var r=this._pointsBuilderList[0];r||(r=this._pointsBuilderList[0]=new fw(!0,t)),this._pointsBuilderList.length=1,this.groupGL.add(r.rootNode),this._removeTransformInPoints(e.getData().getLayout("points")),r.update(e,n,t),this.viewGL.setPostEffect(e.getModel("postEffect"),t)}},incrementalPrepareRender:function(e,n,t){this.groupGL.removeAll(),this._glViewHelper.reset(e,t),this._currentStep=0,this.viewGL.setPostEffect(e.getModel("postEffect"),t)},incrementalRender:function(e,n,t,r){if(!(e.end<=e.start)){var i=this._pointsBuilderList[this._currentStep];i||(i=new fw(!0,r),this._pointsBuilderList[this._currentStep]=i),this.groupGL.add(i.rootNode),this._removeTransformInPoints(n.getData().getLayout("points")),i.setSizeScale(this._sizeScale),i.update(n,t,r,e.start,e.end),r.getZr().refresh(),this._currentStep++}},updateTransform:function(e,n,t){if(e.coordinateSystem.getRoamTransform){this._glViewHelper.updateTransform(e,t);var r=this._glViewHelper.getZoom(),i=Math.max((e.get("zoomScale")||0)*(r-1)+1,0);this._sizeScale=i,this._pointsBuilderList.forEach(function(s){s.setSizeScale(i)})}},_removeTransformInPoints:function(e){if(e)for(var n=[],t=0;t<e.length;t+=2)n[0]=e[t],n[1]=e[t+1],this._glViewHelper.removeTransformInPoint(n),e[t]=n[0],e[t+1]=n[1]},dispose:function(){this.groupGL.removeAll(),this._pointsBuilderList.forEach(function(e){e.dispose()})},remove:function(){this.groupGL.removeAll()}});(0,bt.D$)(function Soe(e){e.registerChartView(woe),e.registerSeriesModel(Coe),e.registerLayout({seriesType:"scatterGL",reset:function(n){var i,t=n.coordinateSystem,r=n.getData();if(t){var s=t.dimensions.map(function(p){return r.mapDimension(p)}).slice(0,2),d=[];1===s.length?i=function(p){for(var v=new Float32Array(2*(p.end-p.start)),_=p.start;_<p.end;_++){var C=2*(_-p.start),S=r.get(s[0],_),k=t.dataToPoint(S);v[C]=k[0],v[C+1]=k[1]}r.setLayout("points",v)}:2===s.length&&(i=function(p){for(var v=new Float32Array(2*(p.end-p.start)),_=p.start;_<p.end;_++){var C=2*(_-p.start),S=r.get(s[0],_),k=r.get(s[1],_);d[0]=S,d[1]=k,d=t.dataToPoint(d),v[C]=d[0],v[C+1]=d[1]}r.setLayout("points",v)})}return{progress:i}}})});var Doe=z(5297);const Toe=z(4844).Z;var vw=bt.wJ.extend({type:"series.graphGL",visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,init:function(e){vw.superApply(this,"init",arguments),this.legendDataProvider=function(){return this._categoriesData},this._updateCategoriesData()},mergeOption:function(e){vw.superApply(this,"mergeOption",arguments),this._updateCategoriesData()},getFormattedLabel:function(e,n,t,r){var i=$y.getFormattedLabel(this,e,n,t,r);if(null==i){var s=this.getData();i=s.get(s.dimensions[s.dimensions.length-1],e)}return i},getInitialData:function(e,n){var t=e.edges||e.links||[],r=e.data||e.nodes||[],i=this;if(r&&t)return function Eoe(e,n,t,r,i){for(var s=new Doe.ZP(r),d=0;d<e.length;d++)s.addNode(Qr.firstNotNull(e[d].id,e[d].name,d),d);var p=[],v=[],_=0;for(d=0;d<n.length;d++){var C=n[d],S=C.source,k=C.target;s.addEdge(S,k,_)&&(v.push(C),p.push(Qr.firstNotNull(C.id,S+" > "+k)),_++)}var H,ne=bt._y.createDimensions(e,{coordDimensions:["value"]});(H=new bt.aV(ne,t)).initData(e);var pe=new bt.aV(["value"],t);return pe.initData(v,p),i&&i(H,pe),Toe({mainData:H,struct:s,structAttr:"graph",datas:{node:H,edge:pe},datasAttr:{node:"data",edge:"edgeData"}}),s.update(),s}(r,t,this,!0,function s(d,p){d.wrapMethod("getItemModel",function(S){const ne=i._categoriesModels[S.getShallow("category")];return ne&&(ne.parentModel=S.parentModel,S.parentModel=ne),S});const v=n.getModel([]).getModel;function _(S,k){const H=v.call(this,S,k);return H.resolveParentPath=C,H}function C(S){if(S&&("label"===S[0]||"label"===S[1])){const k=S.slice();return"label"===S[0]?k[0]="edgeLabel":"label"===S[1]&&(k[1]="edgeLabel"),k}return S}p.wrapMethod("getItemModel",function(S){return S.resolveParentPath=C,S.getModel=_,S})}).data},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(e,n,t){if("edge"===t){var r=this.getData(),i=this.getDataParams(e,t),s=r.graph.getEdgeByIndex(e),d=r.getName(s.node1.dataIndex),p=r.getName(s.node2.dataIndex),v=[];return null!=d&&v.push(d),null!=p&&v.push(p),v=bt.WU.encodeHTML(v.join(" > ")),i.value&&(v+=" : "+bt.WU.encodeHTML(i.value)),v}return vw.superApply(this,"formatTooltip",arguments)},_updateCategoriesData:function(){var e=(this.option.categories||[]).map(function(t){return null!=t.value?t:Object.assign({value:0},t)}),n=new bt.aV(["value"],this);n.initData(e),this._categoriesData=n,this._categoriesModels=n.mapArray(function(t){return n.getItemModel(t,!0)})},setView:function(e){null!=e.zoom&&(this.option.zoom=e.zoom),null!=e.offset&&(this.option.offset=e.offset)},setNodePosition:function(e){for(var n=0;n<e.length/2;n++){var t=e[2*n],r=e[2*n+1],i=this.getData().getRawDataItem(n);i.x=t,i.y=r}},isAnimationEnabled:function(){return vw.superCall(this,"isAnimationEnabled")&&!("force"===this.get("layout")&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:10,z:2,legendHoverLink:!0,layout:"forceAtlas2",forceAtlas2:{initLayout:null,GPU:!0,steps:1,maxSteps:1e3,repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,edgeWeightInfluence:1,edgeWeight:[1,4],nodeWeight:[1,4],preventOverlap:!1,gravityCenter:null},focusNodeAdjacency:!0,focusNodeAdjacencyOn:"mouseover",left:"center",top:"center",symbol:"circle",symbolSize:5,roam:!1,center:null,zoom:1,label:{show:!1,formatter:"{b}",position:"right",distance:5,textStyle:{fontSize:14}},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}},animation:!1}});const Aoe=vw;var wo=Ka.vec2,pj=[[0,0],[1,1]],vj=Si.extend(function(){return{segmentScale:4,dynamic:!0,useNativeLine:!0,attributes:{position:new Si.Attribute("position","float",2,"POSITION"),normal:new Si.Attribute("normal","float",2),offset:new Si.Attribute("offset","float",1),color:new Si.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0,this._itemVertexOffsets=[]},setVertexCount:function(e){var n=this.attributes;this.vertexCount!==e&&(n.position.init(e),n.color.init(e),this.useNativeLine||(n.offset.init(e),n.normal.init(e)),e>65535?this.indices instanceof Uint16Array&&(this.indices=new Uint32Array(this.indices)):this.indices instanceof Uint32Array&&(this.indices=new Uint16Array(this.indices)))},setTriangleCount:function(e){this.triangleCount!==e&&(this.indices=0===e?null:this.vertexCount>65535?new Uint32Array(3*e):new Uint16Array(3*e))},_getCubicCurveApproxStep:function(e,n,t,r){return 1/(wo.dist(e,n)+wo.dist(t,n)+wo.dist(r,t)+1)*this.segmentScale},getCubicCurveVertexCount:function(e,n,t,r){var i=this._getCubicCurveApproxStep(e,n,t,r),s=Math.ceil(1/i);return this.useNativeLine?2*s:2*s+2},getCubicCurveTriangleCount:function(e,n,t,r){var i=this._getCubicCurveApproxStep(e,n,t,r),s=Math.ceil(1/i);return this.useNativeLine?0:2*s},getLineVertexCount:function(){return this.getPolylineVertexCount(pj)},getLineTriangleCount:function(){return this.getPolylineTriangleCount(pj)},getPolylineVertexCount:function(e){var n;return n="number"==typeof e?e:"number"!=typeof e[0]?e.length:e.length/2,this.useNativeLine?2*(n-1):2*(n-1)+2},getPolylineTriangleCount:function(e){var n;return n="number"==typeof e?e:"number"!=typeof e[0]?e.length:e.length/2,this.useNativeLine?0:2*(n-1)},addCubicCurve:function(e,n,t,r,i,s){null==s&&(s=1);var d=e[0],p=e[1],v=n[0],_=n[1],C=t[0],S=t[1],k=r[0],H=r[1],ne=this._getCubicCurveApproxStep(e,n,t,r),pe=ne*ne,Me=pe*ne,Re=3*ne,Fe=3*pe,Oe=6*pe,Be=6*Me,nt=d-2*v+C,rt=p-2*_+S,Ct=3*(v-C)-d+k,mt=3*(_-S)-p+H,Ft=d,nn=p,Xt=(v-d)*Re+nt*Fe+Ct*Me,pn=(_-p)*Re+rt*Fe+mt*Me,mn=nt*Oe+Ct*Be,on=rt*Oe+mt*Be,Cn=Ct*Be,Ht=mt*Be,ln=0,Zt=0,Zn=Math.ceil(1/ne),An=new Float32Array(3*(Zn+1)),ri=(An=[],0);for(Zt=0;Zt<Zn+1;Zt++)An[ri++]=Ft,An[ri++]=nn,Ft+=Xt,nn+=pn,Xt+=mn,pn+=on,mn+=Cn,on+=Ht,(ln+=ne)>1&&(Ft=Xt>0?Math.min(Ft,k):Math.max(Ft,k),nn=pn>0?Math.min(nn,H):Math.max(nn,H));this.addPolyline(An,i,s)},addLine:function(e,n,t,r){this.addPolyline([e,n],t,r)},addPolyline:function(){var e=wo.create(),n=wo.create(),t=wo.create(),r=wo.create(),i=[],s=[],d=[];return function(p,v,_,C,S){if(p.length){var k="number"!=typeof p[0];if(null==S&&(S=k?p.length:p.length/2),!(S<2)){null==C&&(C=0),null==_&&(_=1),this._itemVertexOffsets.push(this._vertexOffset);for(var Be,H=k?"number"!=typeof v[0]:v.length/4===S,ne=this.attributes.position,pe=this.attributes.color,Me=this.attributes.offset,Re=this.attributes.normal,Fe=this.indices,Oe=this._vertexOffset,nt=0;nt<S;nt++){if(k)i=p[nt+C],Be=H?v[nt+C]:v;else if((i=i||[])[0]=p[rt=2*nt+C],i[1]=p[rt+1],H){var Ct=4*nt+C;(Be=Be||[])[0]=v[Ct],Be[1]=v[Ct+1],Be[2]=v[Ct+2],Be[3]=v[Ct+3]}else Be=v;if(this.useNativeLine)nt>1&&(ne.copy(Oe,Oe-1),pe.copy(Oe,Oe-1),Oe++);else{var mt,rt;if(nt<S-1)if(k?wo.copy(s,p[nt+1]):((s=s||[])[0]=p[rt=2*(nt+1)+C],s[1]=p[rt+1]),nt>0){wo.sub(e,i,d),wo.sub(n,s,i),wo.normalize(e,e),wo.normalize(n,n),wo.add(r,e,n),wo.normalize(r,r);var Ft=_/2*Math.min(1/wo.dot(e,r),2);t[0]=-r[1],t[1]=r[0],mt=Ft}else wo.sub(e,s,i),wo.normalize(e,e),t[0]=-e[1],t[1]=e[0],mt=_/2;else wo.sub(e,i,d),wo.normalize(e,e),t[0]=-e[1],t[1]=e[0],mt=_/2;Re.set(Oe,t),Re.set(Oe+1,t),Me.set(Oe,mt),Me.set(Oe+1,-mt),wo.copy(d,i),ne.set(Oe,i),ne.set(Oe+1,i),pe.set(Oe,Be),pe.set(Oe+1,Be),Oe+=2}if(this.useNativeLine)pe.set(Oe,Be),ne.set(Oe,i),Oe++;else if(nt>0){var nn=3*this._faceOffset;(Fe=this.indices)[nn]=Oe-4,Fe[nn+1]=Oe-3,Fe[nn+2]=Oe-2,Fe[nn+3]=Oe-3,Fe[nn+4]=Oe-1,Fe[nn+5]=Oe-2,this._faceOffset+=2}}this._vertexOffset=Oe}}}}(),setItemColor:function(e,n){for(var r=e<this._itemVertexOffsets.length-1?this._itemVertexOffsets[e+1]:this._vertexOffset,i=this._itemVertexOffsets[e];i<r;i++)this.attributes.color.set(i,n);this.dirty("color")}});bt.D5.defaults(vj.prototype,nw);const gj=vj;ot.Shader.import("@export ecgl.forceAtlas2.updateNodeRepulsion\n\n#define NODE_COUNT 0\n\nuniform sampler2D positionTex;\n\nuniform vec2 textureSize;\nuniform float gravity;\nuniform float scaling;\nuniform vec2 gravityCenter;\n\nuniform bool strongGravityMode;\nuniform bool preventOverlap;\n\nvarying vec2 v_Texcoord;\n\nvoid main() {\n\n vec4 n0 = texture2D(positionTex, v_Texcoord);\n\n vec2 force = vec2(0.0);\n for (int i = 0; i < NODE_COUNT; i++) {\n vec2 uv = vec2(\n mod(float(i), textureSize.x) / (textureSize.x - 1.0),\n floor(float(i) / textureSize.x) / (textureSize.y - 1.0)\n );\n vec4 n1 = texture2D(positionTex, uv);\n\n vec2 dir = n0.xy - n1.xy;\n float d2 = dot(dir, dir);\n\n if (d2 > 0.0) {\n float factor = 0.0;\n if (preventOverlap) {\n float d = sqrt(d2);\n d = d - n0.w - n1.w;\n if (d > 0.0) {\n factor = scaling * n0.z * n1.z / (d * d);\n }\n else if (d < 0.0) {\n factor = scaling * 100.0 * n0.z * n1.z;\n }\n }\n else {\n factor = scaling * n0.z * n1.z / d2;\n }\n force += dir * factor;\n }\n }\n\n vec2 dir = gravityCenter - n0.xy;\n float d = 1.0;\n if (!strongGravityMode) {\n d = length(dir);\n }\n\n force += dir * n0.z * gravity / (d + 1.0);\n\n gl_FragColor = vec4(force, 0.0, 1.0);\n}\n@end\n\n@export ecgl.forceAtlas2.updateEdgeAttraction.vertex\n\nattribute vec2 node1;\nattribute vec2 node2;\nattribute float weight;\n\nuniform sampler2D positionTex;\nuniform float edgeWeightInfluence;\nuniform bool preventOverlap;\nuniform bool linLogMode;\n\nuniform vec2 windowSize: WINDOW_SIZE;\n\nvarying vec2 v_Force;\n\nvoid main() {\n\n vec4 n0 = texture2D(positionTex, node1);\n vec4 n1 = texture2D(positionTex, node2);\n\n vec2 dir = n1.xy - n0.xy;\n float d = length(dir);\n float w;\n if (edgeWeightInfluence == 0.0) {\n w = 1.0;\n }\n else if (edgeWeightInfluence == 1.0) {\n w = weight;\n }\n else {\n w = pow(weight, edgeWeightInfluence);\n }\n vec2 offset = vec2(1.0 / windowSize.x, 1.0 / windowSize.y);\n vec2 scale = vec2((windowSize.x - 1.0) / windowSize.x, (windowSize.y - 1.0) / windowSize.y);\n vec2 pos = node1 * scale * 2.0 - 1.0;\n gl_Position = vec4(pos + offset, 0.0, 1.0);\n gl_PointSize = 1.0;\n\n float factor;\n if (preventOverlap) {\n d = d - n1.w - n0.w;\n }\n if (d <= 0.0) {\n v_Force = vec2(0.0);\n return;\n }\n\n if (linLogMode) {\n factor = w * log(d) / d;\n }\n else {\n factor = w;\n }\n v_Force = dir * factor;\n}\n@end\n\n@export ecgl.forceAtlas2.updateEdgeAttraction.fragment\n\nvarying vec2 v_Force;\n\nvoid main() {\n gl_FragColor = vec4(v_Force, 0.0, 0.0);\n}\n@end\n\n@export ecgl.forceAtlas2.calcWeightedSum.vertex\n\nattribute vec2 node;\n\nvarying vec2 v_NodeUv;\n\nvoid main() {\n\n v_NodeUv = node;\n gl_Position = vec4(0.0, 0.0, 0.0, 1.0);\n gl_PointSize = 1.0;\n}\n@end\n\n@export ecgl.forceAtlas2.calcWeightedSum.fragment\n\nvarying vec2 v_NodeUv;\n\nuniform sampler2D positionTex;\nuniform sampler2D forceTex;\nuniform sampler2D forcePrevTex;\n\nvoid main() {\n vec2 force = texture2D(forceTex, v_NodeUv).rg;\n vec2 forcePrev = texture2D(forcePrevTex, v_NodeUv).rg;\n\n float mass = texture2D(positionTex, v_NodeUv).z;\n float swing = length(force - forcePrev) * mass;\n float traction = length(force + forcePrev) * 0.5 * mass;\n\n gl_FragColor = vec4(swing, traction, 0.0, 0.0);\n}\n@end\n\n@export ecgl.forceAtlas2.calcGlobalSpeed\n\nuniform sampler2D globalSpeedPrevTex;\nuniform sampler2D weightedSumTex;\nuniform float jitterTolerence;\n\nvoid main() {\n vec2 weightedSum = texture2D(weightedSumTex, vec2(0.5)).xy;\n float prevGlobalSpeed = texture2D(globalSpeedPrevTex, vec2(0.5)).x;\n float globalSpeed = jitterTolerence * jitterTolerence\n * weightedSum.y / weightedSum.x;\n if (prevGlobalSpeed > 0.0) {\n globalSpeed = min(globalSpeed / prevGlobalSpeed, 1.5) * prevGlobalSpeed;\n }\n gl_FragColor = vec4(globalSpeed, 0.0, 0.0, 1.0);\n}\n@end\n\n@export ecgl.forceAtlas2.updatePosition\n\nuniform sampler2D forceTex;\nuniform sampler2D forcePrevTex;\nuniform sampler2D positionTex;\nuniform sampler2D globalSpeedTex;\n\nvarying vec2 v_Texcoord;\n\nvoid main() {\n vec2 force = texture2D(forceTex, v_Texcoord).xy;\n vec2 forcePrev = texture2D(forcePrevTex, v_Texcoord).xy;\n vec4 node = texture2D(positionTex, v_Texcoord);\n\n float globalSpeed = texture2D(globalSpeedTex, vec2(0.5)).r;\n float swing = length(force - forcePrev);\n float speed = 0.1 * globalSpeed / (0.1 + globalSpeed * sqrt(swing));\n\n float df = length(force);\n if (df > 0.0) {\n speed = min(df * speed, 10.0) / df;\n\n gl_FragColor = vec4(node.xy + speed * force, node.zw);\n }\n else {\n gl_FragColor = node;\n }\n}\n@end\n\n@export ecgl.forceAtlas2.edges.vertex\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nattribute vec2 node;\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n\nuniform sampler2D positionTex;\n\nvoid main()\n{\n gl_Position = worldViewProjection * vec4(\n texture2D(positionTex, node).xy, -10.0, 1.0\n );\n v_Color = a_Color;\n}\n@end\n\n@export ecgl.forceAtlas2.edges.fragment\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\nvarying vec4 v_Color;\nvoid main() {\n gl_FragColor = color * v_Color;\n}\n@end");var oV={repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,scaling:1,edgeWeightInfluence:1,jitterTolerence:.1,preventOverlap:!1,dissuadeHubs:!1,gravityCenter:null};function Qo(e){var n={type:ot.Texture.FLOAT,minFilter:ot.Texture.NEAREST,magFilter:ot.Texture.NEAREST};this._positionSourceTex=new ot.Texture2D(n),this._positionSourceTex.flipY=!1,this._positionTex=new ot.Texture2D(n),this._positionPrevTex=new ot.Texture2D(n),this._forceTex=new ot.Texture2D(n),this._forcePrevTex=new ot.Texture2D(n),this._weightedSumTex=new ot.Texture2D(n),this._weightedSumTex.width=this._weightedSumTex.height=1,this._globalSpeedTex=new ot.Texture2D(n),this._globalSpeedPrevTex=new ot.Texture2D(n),this._globalSpeedTex.width=this._globalSpeedTex.height=1,this._globalSpeedPrevTex.width=this._globalSpeedPrevTex.height=1,this._nodeRepulsionPass=new so({fragment:ot.Shader.source("ecgl.forceAtlas2.updateNodeRepulsion")}),this._positionPass=new so({fragment:ot.Shader.source("ecgl.forceAtlas2.updatePosition")}),this._globalSpeedPass=new so({fragment:ot.Shader.source("ecgl.forceAtlas2.calcGlobalSpeed")}),this._copyPass=new so({fragment:ot.Shader.source("clay.compositor.output")});var t=function(r){r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ONE)};this._edgeForceMesh=new ot.Mesh({geometry:new ot.Geometry({attributes:{node1:new ot.Geometry.Attribute("node1","float",2),node2:new ot.Geometry.Attribute("node2","float",2),weight:new ot.Geometry.Attribute("weight","float",1)},dynamic:!0,mainAttribute:"node1"}),material:new ot.Material({transparent:!0,shader:ot.createShader("ecgl.forceAtlas2.updateEdgeAttraction"),blend:t,depthMask:!1,depthText:!1}),mode:ot.Mesh.POINTS}),this._weightedSumMesh=new ot.Mesh({geometry:new ot.Geometry({attributes:{node:new ot.Geometry.Attribute("node","float",2)},dynamic:!0,mainAttribute:"node"}),material:new ot.Material({transparent:!0,shader:ot.createShader("ecgl.forceAtlas2.calcWeightedSum"),blend:t,depthMask:!1,depthText:!1}),mode:ot.Mesh.POINTS}),this._framebuffer=new Ko({depthBuffer:!1}),this._dummyCamera=new ot.OrthographicCamera({left:-1,right:1,top:1,bottom:-1,near:0,far:100}),this._globalSpeed=0}Qo.prototype.updateOption=function(e){for(var n in oV)this[n]=oV[n];var t=this._nodes.length;if(this.jitterTolerence=t>5e4?10:t>5e3?1:.1,this.scaling=t>100?2:10,e)for(var n in oV)null!=e[n]&&(this[n]=e[n]);if(this.repulsionByDegree)for(var r=this._positionSourceTex.pixels,i=0;i<this._nodes.length;i++)r[4*i+2]=(this._nodes[i].degree||0)+1},Qo.prototype._updateGravityCenter=function(e){var n=this._nodes,t=this._edges;if(this.gravityCenter)this._gravityCenter=this.gravityCenter;else{for(var r=[1/0,1/0],i=[-1/0,-1/0],s=0;s<n.length;s++)r[0]=Math.min(n[s].x,r[0]),r[1]=Math.min(n[s].y,r[1]),i[0]=Math.max(n[s].x,i[0]),i[1]=Math.max(n[s].y,i[1]);this._gravityCenter=[.5*(r[0]+i[0]),.5*(r[1]+i[1])]}for(s=0;s<t.length;s++){var d=t[s].node1,p=t[s].node2;n[d].degree=(n[d].degree||0)+1,n[p].degree=(n[p].degree||0)+1}},Qo.prototype.initData=function(e,n){this._nodes=e,this._edges=n,this._updateGravityCenter();var t=Math.ceil(Math.sqrt(e.length)),r=t,i=new Float32Array(t*r*4);this._resize(t,r);for(var s=0,d=0;d<e.length;d++){var p=e[d];i[s++]=p.x||0,i[s++]=p.y||0,i[s++]=p.mass||1,i[s++]=p.size||1}this._positionSourceTex.pixels=i;var v=this._edgeForceMesh.geometry,_=n.length;v.attributes.node1.init(2*_),v.attributes.node2.init(2*_),v.attributes.weight.init(2*_);var C=[];for(d=0;d<n.length;d++){var S=v.attributes,k=n[d].weight;null==k&&(k=1),S.node1.set(d,this.getNodeUV(n[d].node1,C)),S.node2.set(d,this.getNodeUV(n[d].node2,C)),S.weight.set(d,k),S.node1.set(d+_,this.getNodeUV(n[d].node2,C)),S.node2.set(d+_,this.getNodeUV(n[d].node1,C)),S.weight.set(d+_,k)}var H=this._weightedSumMesh.geometry;for(H.attributes.node.init(e.length),d=0;d<e.length;d++)H.attributes.node.set(d,this.getNodeUV(d,C));v.dirty(),H.dirty(),this._nodeRepulsionPass.material.define("fragment","NODE_COUNT",e.length),this._nodeRepulsionPass.material.setUniform("textureSize",[t,r]),this._inited=!1,this._frame=0},Qo.prototype.getNodes=function(){return this._nodes},Qo.prototype.getEdges=function(){return this._edges},Qo.prototype.step=function(e){this._inited||(this._initFromSource(e),this._inited=!0),this._frame++,this._framebuffer.attach(this._forceTex),this._framebuffer.bind(e);var n=this._nodeRepulsionPass;n.setUniform("strongGravityMode",this.strongGravityMode),n.setUniform("gravity",this.gravity),n.setUniform("gravityCenter",this._gravityCenter),n.setUniform("scaling",this.scaling),n.setUniform("preventOverlap",this.preventOverlap),n.setUniform("positionTex",this._positionPrevTex),n.render(e);var t=this._edgeForceMesh;t.material.set("linLogMode",this.linLogMode),t.material.set("edgeWeightInfluence",this.edgeWeightInfluence),t.material.set("preventOverlap",this.preventOverlap),t.material.set("positionTex",this._positionPrevTex),e.gl.enable(e.gl.BLEND),e.renderPass([t],this._dummyCamera),this._framebuffer.attach(this._weightedSumTex),e.gl.clearColor(0,0,0,0),e.gl.clear(e.gl.COLOR_BUFFER_BIT),e.gl.enable(e.gl.BLEND);var r=this._weightedSumMesh;r.material.set("positionTex",this._positionPrevTex),r.material.set("forceTex",this._forceTex),r.material.set("forcePrevTex",this._forcePrevTex),e.renderPass([r],this._dummyCamera),this._framebuffer.attach(this._globalSpeedTex);var i=this._globalSpeedPass;i.setUniform("globalSpeedPrevTex",this._globalSpeedPrevTex),i.setUniform("weightedSumTex",this._weightedSumTex),i.setUniform("jitterTolerence",this.jitterTolerence),e.gl.disable(e.gl.BLEND),i.render(e);var s=this._positionPass;this._framebuffer.attach(this._positionTex),s.setUniform("globalSpeedTex",this._globalSpeedTex),s.setUniform("positionTex",this._positionPrevTex),s.setUniform("forceTex",this._forceTex),s.setUniform("forcePrevTex",this._forcePrevTex),s.render(e),this._framebuffer.unbind(e),this._swapTexture()},Qo.prototype.update=function(e,n,t){null==n&&(n=1),n=Math.max(n,1);for(var r=0;r<n;r++)this.step(e);t&&t()},Qo.prototype.getNodePositionTexture=function(){return this._inited?this._positionPrevTex:this._positionSourceTex},Qo.prototype.getNodeUV=function(e,n){var t=this._positionTex.width,r=this._positionTex.height;return(n=n||[])[0]=e%t/(t-1),n[1]=Math.floor(e/t)/(r-1)||0,n},Qo.prototype.getNodePosition=function(e,n){var t=this._positionArr,r=this._positionTex.width,i=this._positionTex.height,s=r*i;(!t||t.length!==4*s)&&(t=this._positionArr=new Float32Array(4*s)),this._framebuffer.bind(e),this._framebuffer.attach(this._positionPrevTex),e.gl.readPixels(0,0,r,i,e.gl.RGBA,e.gl.FLOAT,t),this._framebuffer.unbind(e),n||(n=new Float32Array(2*this._nodes.length));for(var d=0;d<this._nodes.length;d++)n[2*d]=t[4*d],n[2*d+1]=t[4*d+1];return n},Qo.prototype.getTextureData=function(e,n){var t=this["_"+n+"Tex"],r=t.width,i=t.height;this._framebuffer.bind(e),this._framebuffer.attach(t);var s=new Float32Array(r*i*4);return e.gl.readPixels(0,0,r,i,e.gl.RGBA,e.gl.FLOAT,s),this._framebuffer.unbind(e),s},Qo.prototype.getTextureSize=function(){return{width:this._positionTex.width,height:this._positionTex.height}},Qo.prototype.isFinished=function(e){return this._frame>e},Qo.prototype._swapTexture=function(){var e=this._positionPrevTex;this._positionPrevTex=this._positionTex,this._positionTex=e,e=this._forcePrevTex,this._forcePrevTex=this._forceTex,this._forceTex=e,e=this._globalSpeedPrevTex,this._globalSpeedPrevTex=this._globalSpeedTex,this._globalSpeedTex=e},Qo.prototype._initFromSource=function(e){this._framebuffer.attach(this._positionPrevTex),this._framebuffer.bind(e),this._copyPass.setUniform("texture",this._positionSourceTex),this._copyPass.render(e),e.gl.clearColor(0,0,0,0),this._framebuffer.attach(this._forcePrevTex),e.gl.clear(e.gl.COLOR_BUFFER_BIT),this._framebuffer.attach(this._globalSpeedPrevTex),e.gl.clear(e.gl.COLOR_BUFFER_BIT),this._framebuffer.unbind(e)},Qo.prototype._resize=function(e,n){["_positionSourceTex","_positionTex","_positionPrevTex","_forceTex","_forcePrevTex"].forEach(function(t){this[t].width=e,this[t].height=n,this[t].dirty()},this)},Qo.prototype.dispose=function(e){this._framebuffer.dispose(e),this._copyPass.dispose(e),this._nodeRepulsionPass.dispose(e),this._positionPass.dispose(e),this._globalSpeedPass.dispose(e),this._edgeForceMesh.geometry.dispose(e),this._weightedSumMesh.geometry.dispose(e),this._positionSourceTex.dispose(e),this._positionTex.dispose(e),this._positionPrevTex.dispose(e),this._forceTex.dispose(e),this._forcePrevTex.dispose(e),this._weightedSumTex.dispose(e),this._globalSpeedTex.dispose(e),this._globalSpeedPrevTex.dispose(e)};const sV=Qo;var gw=function Poe(){var e_create=function(){return new Float32Array(2)},e_dist=function(v,_){var C=_[0]-v[0],S=_[1]-v[1];return Math.sqrt(C*C+S*S)},e_len=function(v){var _=v[0],C=v[1];return Math.sqrt(_*_+C*C)},e_scaleAndAdd=function(v,_,C,S){return v[0]=_[0]+C[0]*S,v[1]=_[1]+C[1]*S,v},e_add=function(v,_,C){return v[0]=_[0]+C[0],v[1]=_[1]+C[1],v},e_sub=function(v,_,C){return v[0]=_[0]-C[0],v[1]=_[1]-C[1],v},e_copy=function(v,_){return v[0]=_[0],v[1]=_[1],v},e_set=function(v,_,C){return v[0]=_,v[1]=C,v};function n(){this.subRegions=[],this.nSubRegions=0,this.node=null,this.mass=0,this.centerOfMass=null,this.bbox=new Float32Array(4),this.size=0}var t=n.prototype;function r(){this.position=new Float32Array(2),this.force=e_create(),this.forcePrev=e_create(),this.mass=1,this.inDegree=0,this.outDegree=0}function i(v,_){this.source=v,this.target=_,this.weight=1}function s(){this.autoSettings=!0,this.barnesHutOptimize=!0,this.barnesHutTheta=1.5,this.repulsionByDegree=!0,this.linLogMode=!1,this.strongGravityMode=!1,this.gravity=1,this.scaling=1,this.edgeWeightInfluence=1,this.jitterTolerence=.1,this.preventOverlap=!1,this.dissuadeHubs=!1,this.rootRegion=new n,this.rootRegion.centerOfMass=e_create(),this.nodes=[],this.edges=[],this.bbox=new Float32Array(4),this.gravityCenter=null,this._massArr=null,this._swingingArr=null,this._sizeArr=null,this._globalSpeed=0}t.beforeUpdate=function(){for(var v=0;v<this.nSubRegions;v++)this.subRegions[v].beforeUpdate();this.mass=0,this.centerOfMass&&(this.centerOfMass[0]=0,this.centerOfMass[1]=0),this.nSubRegions=0,this.node=null},t.afterUpdate=function(){this.subRegions.length=this.nSubRegions;for(var v=0;v<this.nSubRegions;v++)this.subRegions[v].afterUpdate()},t.addNode=function(v){if(0===this.nSubRegions){if(null==this.node)return void(this.node=v);this._addNodeToSubRegion(this.node),this.node=null}this._addNodeToSubRegion(v),this._updateCenterOfMass(v)},t.findSubRegion=function(v,_){for(var C=0;C<this.nSubRegions;C++){var S=this.subRegions[C];if(S.contain(v,_))return S}},t.contain=function(v,_){return this.bbox[0]<=v&&this.bbox[2]>=v&&this.bbox[1]<=_&&this.bbox[3]>=_},t.setBBox=function(v,_,C,S){this.bbox[0]=v,this.bbox[1]=_,this.bbox[2]=C,this.bbox[3]=S,this.size=(C-v+S-_)/2},t._newSubRegion=function(){var v=this.subRegions[this.nSubRegions];return v||(v=new n,this.subRegions[this.nSubRegions]=v),this.nSubRegions++,v},t._addNodeToSubRegion=function(v){var _=this.findSubRegion(v.position[0],v.position[1]),C=this.bbox;if(!_){var H=(C[2]-C[0])/2,ne=(C[3]-C[1])/2,pe=v.position[0]>=(C[0]+C[2])/2?1:0,Me=v.position[1]>=(C[1]+C[3])/2?1:0;(_=this._newSubRegion()).setBBox(pe*H+C[0],Me*ne+C[1],(pe+1)*H+C[0],(Me+1)*ne+C[1])}_.addNode(v)},t._updateCenterOfMass=function(v){null==this.centerOfMass&&(this.centerOfMass=new Float32Array(2));var _=this.centerOfMass[0]*this.mass,C=this.centerOfMass[1]*this.mass;_+=v.position[0]*v.mass,C+=v.position[1]*v.mass,this.mass+=v.mass,this.centerOfMass[0]=_/this.mass,this.centerOfMass[1]=C/this.mass};var v,d=s.prototype;d.initNodes=function(v,_,C){var S=_.length;this.nodes.length=0;for(var k=typeof C<"u",H=0;H<S;H++){var ne=new r;ne.position[0]=v[2*H],ne.position[1]=v[2*H+1],ne.mass=_[H],k&&(ne.size=C[H]),this.nodes.push(ne)}this._massArr=_,this._swingingArr=new Float32Array(S),k&&(this._sizeArr=C)},d.initEdges=function(v,_){var C=v.length/2;this.edges.length=0;for(var S=0;S<C;S++){var ne=this.nodes[v[2*S]],pe=this.nodes[v[2*S+1]];if(!ne||!pe)return void console.error("Node not exists, try initNodes before initEdges");ne.outDegree++,pe.inDegree++;var Me=new i(ne,pe);_&&(Me.weight=_[S]),this.edges.push(Me)}},d.updateSettings=function(){if(this.repulsionByDegree)for(var v=0;v<this.nodes.length;v++)(_=this.nodes[v]).mass=_.inDegree+_.outDegree+1;else for(v=0;v<this.nodes.length;v++){var _;(_=this.nodes[v]).mass=this._massArr[v]}},d.update=function(){var v=this.nodes.length;if(this.updateSettings(),this.updateBBox(),this.barnesHutOptimize){this.rootRegion.setBBox(this.bbox[0],this.bbox[1],this.bbox[2],this.bbox[3]),this.rootRegion.beforeUpdate();for(var _=0;_<v;_++)this.rootRegion.addNode(this.nodes[_]);this.rootRegion.afterUpdate()}for(_=0;_<v;_++)e_copy((C=this.nodes[_]).forcePrev,C.force),e_set(C.force,0,0);for(_=0;_<v;_++){var S=this.nodes[_];if(this.barnesHutOptimize)this.applyRegionToNodeRepulsion(this.rootRegion,S);else for(var k=_+1;k<v;k++)this.applyNodeToNodeRepulsion(S,this.nodes[k],!1);this.gravity>0&&(this.strongGravityMode?this.applyNodeStrongGravity(S):this.applyNodeGravity(S))}for(_=0;_<this.edges.length;_++)this.applyEdgeAttraction(this.edges[_]);var ne=0,pe=0,Me=e_create();for(_=0;_<v;_++)ne+=(Re=e_dist((C=this.nodes[_]).force,C.forcePrev))*C.mass,e_add(Me,C.force,C.forcePrev),pe+=.5*e_len(Me)*C.mass,this._swingingArr[_]=Re;var Oe=this.jitterTolerence*this.jitterTolerence*pe/ne;for(this._globalSpeed>0&&(Oe=Math.min(Oe/this._globalSpeed,1.5)*this._globalSpeed),this._globalSpeed=Oe,_=0;_<v;_++){var C=this.nodes[_],Re=this._swingingArr[_],Be=.1*Oe/(1+Oe*Math.sqrt(Re)),nt=e_len(C.force);nt>0&&(Be=Math.min(nt*Be,10)/nt,e_scaleAndAdd(C.position,C.position,C.force,Be))}},d.applyRegionToNodeRepulsion=(v=e_create(),function(C,S){if(C.node)this.applyNodeToNodeRepulsion(C.node,S,!0);else{e_sub(v,S.position,C.centerOfMass);var k=v[0]*v[0]+v[1]*v[1];if(k>this.barnesHutTheta*C.size*C.size)e_scaleAndAdd(S.force,S.force,v,this.scaling*S.mass*C.mass/k);else for(var ne=0;ne<C.nSubRegions;ne++)this.applyRegionToNodeRepulsion(C.subRegions[ne],S)}}),d.applyNodeToNodeRepulsion=function(){var v=e_create();return function(C,S,k){if(C!=S){e_sub(v,C.position,S.position);var H=v[0]*v[0]+v[1]*v[1];if(0!==H){var ne;if(this.preventOverlap){var pe=Math.sqrt(H);if((pe=pe-C.size-S.size)>0)ne=this.scaling*C.mass*S.mass/(pe*pe);else{if(!(pe<0))return;ne=100*this.scaling*C.mass*S.mass}}else ne=this.scaling*C.mass*S.mass/H;e_scaleAndAdd(C.force,C.force,v,ne),e_scaleAndAdd(S.force,S.force,v,-ne)}}}}(),d.applyEdgeAttraction=function(){var v=e_create();return function(C){var S=C.source,k=C.target;e_sub(v,S.position,k.position);var ne,pe,H=e_len(v);ne=0===this.edgeWeightInfluence?1:1===this.edgeWeightInfluence?C.weight:Math.pow(C.weight,this.edgeWeightInfluence),this.preventOverlap&&(H=H-S.size-k.size)<=0||(pe=this.linLogMode?-ne*Math.log(H+1)/(H+1):-ne,e_scaleAndAdd(S.force,S.force,v,pe),e_scaleAndAdd(k.force,k.force,v,-pe))}}(),d.applyNodeGravity=function(){var v=e_create();return function(_){e_sub(v,this.gravityCenter,_.position);var C=e_len(v);e_scaleAndAdd(_.force,_.force,v,this.gravity*_.mass/(C+1))}}(),d.applyNodeStrongGravity=function(){var v=e_create();return function(_){e_sub(v,this.gravityCenter,_.position),e_scaleAndAdd(_.force,_.force,v,this.gravity*_.mass)}}(),d.updateBBox=function(){for(var v=1/0,_=1/0,C=-1/0,S=-1/0,k=0;k<this.nodes.length;k++){var H=this.nodes[k].position;v=Math.min(v,H[0]),_=Math.min(_,H[1]),C=Math.max(C,H[0]),S=Math.max(S,H[1])}this.bbox[0]=v,this.bbox[1]=_,this.bbox[2]=C,this.bbox[3]=S},d.getGlobalSpeed=function(){return this._globalSpeed};var p=null;self.onmessage=function(v){switch(v.data.cmd){case"init":(p=new s).initNodes(v.data.nodesPosition,v.data.nodesMass,v.data.nodesSize),p.initEdges(v.data.edges,v.data.edgesWeight);break;case"updateConfig":if(p)for(var _ in v.data.config)p[_]=v.data.config[_];break;case"update":var C=v.data.steps;if(p){for(var S=0;S<C;S++)p.update();var k=p.nodes.length,H=new Float32Array(2*k);for(S=0;S<k;S++){var ne=p.nodes[S];H[2*S]=ne.position[0],H[2*S+1]=ne.position[1]}self.postMessage({buffer:H.buffer,globalSpeed:p.getGlobalSpeed()},[H.buffer])}else{var pe=new Float32Array;self.postMessage({buffer:pe.buffer,globalSpeed:p.getGlobalSpeed()},[pe.buffer])}}}}.toString();gw=gw.slice(gw.indexOf("{")+1,gw.lastIndexOf("}"));var mw={barnesHutOptimize:!0,barnesHutTheta:1.5,repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,scaling:1,edgeWeightInfluence:1,jitterTolerence:.1,preventOverlap:!1,dissuadeHubs:!1,gravityCenter:null},Wl=function(e){for(var n in mw)this[n]=mw[n];if(e)for(var n in e)this[n]=e[n];this._nodes=[],this._edges=[],this._disposed=!1,this._positionTex=new $r({type:dr.FLOAT,flipY:!1,minFilter:dr.NEAREST,magFilter:dr.NEAREST})};Wl.prototype.initData=function(e,n){var t=new Blob([gw]),r=window.URL.createObjectURL(t);this._worker=new Worker(r),this._worker.onmessage=this._$onupdate.bind(this),this._nodes=e,this._edges=n,this._frame=0;for(var i=e.length,s=n.length,d=new Float32Array(2*i),p=new Float32Array(i),v=new Float32Array(i),_=new Float32Array(2*s),C=new Float32Array(s),S=0;S<e.length;S++){var k=e[S];d[2*S]=k.x,d[2*S+1]=k.y,p[S]=k.mass??1,v[S]=k.size??1}for(S=0;S<n.length;S++){var H=n[S],pe=H.node2;_[2*S]=H.node1,_[2*S+1]=pe,C[S]=H.weight??1}var Me=Math.ceil(Math.sqrt(e.length)),Re=Me,Fe=new Float32Array(Me*Re*4),Oe=this._positionTex;Oe.width=Me,Oe.height=Re,Oe.pixels=Fe,this._worker.postMessage({cmd:"init",nodesPosition:d,nodesMass:p,nodesSize:v,edges:_,edgesWeight:C}),this._globalSpeed=1/0},Wl.prototype.updateOption=function(e){var n={};for(var t in mw)n[t]=mw[t];var r=this._nodes,i=this._edges,s=r.length;if(n.jitterTolerence=s>5e4?10:s>5e3?1:.1,n.scaling=s>100?2:10,n.barnesHutOptimize=s>1e3,e)for(var t in mw)null!=e[t]&&(n[t]=e[t]);if(!n.gravityCenter){for(var d=[1/0,1/0],p=[-1/0,-1/0],v=0;v<r.length;v++)d[0]=Math.min(r[v].x,d[0]),d[1]=Math.min(r[v].y,d[1]),p[0]=Math.max(r[v].x,p[0]),p[1]=Math.max(r[v].y,p[1]);n.gravityCenter=[.5*(d[0]+p[0]),.5*(d[1]+p[1])]}for(v=0;v<i.length;v++){var _=i[v].node1,C=i[v].node2;r[_].degree=(r[_].degree||0)+1,r[C].degree=(r[C].degree||0)+1}this._worker&&this._worker.postMessage({cmd:"updateConfig",config:n})},Wl.prototype.update=function(e,n,t){null==n&&(n=1),n=Math.max(n,1),this._frame+=n,this._onupdate=t,this._worker&&this._worker.postMessage({cmd:"update",steps:Math.round(n)})},Wl.prototype._$onupdate=function(e){if(!this._disposed){var n=new Float32Array(e.data.buffer);this._globalSpeed=e.data.globalSpeed,this._positionArr=n,this._updateTexture(n),this._onupdate&&this._onupdate()}},Wl.prototype.getNodePositionTexture=function(){return this._positionTex},Wl.prototype.getNodeUV=function(e,n){var t=this._positionTex.width,r=this._positionTex.height;return(n=n||[])[0]=e%t/(t-1),n[1]=Math.floor(e/t)/(r-1),n},Wl.prototype.getNodes=function(){return this._nodes},Wl.prototype.getEdges=function(){return this._edges},Wl.prototype.isFinished=function(e){return this._frame>e},Wl.prototype.getNodePosition=function(e,n){if(n||(n=new Float32Array(2*this._nodes.length)),this._positionArr)for(var t=0;t<this._positionArr.length;t++)n[t]=this._positionArr[t];return n},Wl.prototype._updateTexture=function(e){for(var n=this._positionTex.pixels,t=0,r=0;r<e.length;)n[t++]=e[r++],n[t++]=e[r++],n[t++]=1,n[t++]=1;this._positionTex.dirty()},Wl.prototype.dispose=function(e){this._disposed=!0,this._worker=null};const mj=Wl;var Roe=Us.extend(function(){return{zr:null,viewGL:null,minZoom:.2,maxZoom:5,_needsUpdate:!1,_dx:0,_dy:0,_zoom:1}},function(){this._mouseDownHandler=this._mouseDownHandler.bind(this),this._mouseWheelHandler=this._mouseWheelHandler.bind(this),this._mouseMoveHandler=this._mouseMoveHandler.bind(this),this._mouseUpHandler=this._mouseUpHandler.bind(this),this._update=this._update.bind(this)},{init:function(){var e=this.zr;e.on("mousedown",this._mouseDownHandler),e.on("mousewheel",this._mouseWheelHandler),e.on("globalout",this._mouseUpHandler),e.animation.on("frame",this._update)},setTarget:function(e){this._target=e},setZoom:function(e){this._zoom=Math.max(Math.min(e,this.maxZoom),this.minZoom),this._needsUpdate=!0},setOffset:function(e){this._dx=e[0],this._dy=e[1],this._needsUpdate=!0},getZoom:function(){return this._zoom},getOffset:function(){return[this._dx,this._dy]},_update:function(){if(this._target&&this._needsUpdate){var e=this._target,n=this._zoom;e.position.x=this._dx,e.position.y=this._dy,e.scale.set(n,n,n),this.zr.refresh(),this._needsUpdate=!1,this.trigger("update")}},_mouseDownHandler:function(e){if(!e.target){var n=e.offsetX,t=e.offsetY;if(!this.viewGL||this.viewGL.containPoint(n,t)){this.zr.on("mousemove",this._mouseMoveHandler),this.zr.on("mouseup",this._mouseUpHandler);var r=this._convertPos(n,t);this._x=r.x,this._y=r.y}}},_convertPos:function(e,n){var t=this.viewGL.camera,r=this.viewGL.viewport;return{x:(e-r.x)/r.width*(t.right-t.left)+t.left,y:(n-r.y)/r.height*(t.bottom-t.top)+t.top}},_mouseMoveHandler:function(e){var n=this._convertPos(e.offsetX,e.offsetY);this._dx+=n.x-this._x,this._dy+=n.y-this._y,this._x=n.x,this._y=n.y,this._needsUpdate=!0},_mouseUpHandler:function(e){this.zr.off("mousemove",this._mouseMoveHandler),this.zr.off("mouseup",this._mouseUpHandler)},_mouseWheelHandler:function(e){var n=(e=e.event).wheelDelta||-e.detail;if(0!==n){var t=e.offsetX,r=e.offsetY;if(!this.viewGL||this.viewGL.containPoint(t,r)){var i=n>0?1.1:.9,s=Math.max(Math.min(this._zoom*i,this.maxZoom),this.minZoom);i=s/this._zoom;var d=this._convertPos(t,r),v=(d.y-this._dy)*(i-1);this._dx-=(d.x-this._dx)*(i-1),this._dy-=v,this._zoom=s,this._needsUpdate=!0}}},dispose:function(){var e=this.zr;e.off("mousedown",this._mouseDownHandler),e.off("mousemove",this._mouseMoveHandler),e.off("mouseup",this._mouseUpHandler),e.off("mousewheel",this._mouseWheelHandler),e.off("globalout",this._mouseUpHandler),e.animation.off("frame",this._update)}});const Loe=Roe;var JI=Ka.vec2;ot.Shader.import("@export ecgl.lines2D.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nattribute vec2 position: POSITION;\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n\n#ifdef POSITIONTEXTURE_ENABLED\nuniform sampler2D positionTexture;\n#endif\n\nvoid main()\n{\n gl_Position = worldViewProjection * vec4(position, -10.0, 1.0);\n\n v_Color = a_Color;\n}\n\n@end\n\n@export ecgl.lines2D.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nvarying vec4 v_Color;\n\nvoid main()\n{\n gl_FragColor = color * v_Color;\n}\n@end\n\n\n@export ecgl.meshLines2D.vertex\n\nattribute vec2 position: POSITION;\nattribute vec2 normal;\nattribute float offset;\nattribute vec4 a_Color : COLOR;\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform vec4 viewport : VIEWPORT;\n\nvarying vec4 v_Color;\nvarying float v_Miter;\n\nvoid main()\n{\n vec4 p2 = worldViewProjection * vec4(position + normal, -10.0, 1.0);\n gl_Position = worldViewProjection * vec4(position, -10.0, 1.0);\n\n p2.xy /= p2.w;\n gl_Position.xy /= gl_Position.w;\n\n vec2 N = normalize(p2.xy - gl_Position.xy);\n gl_Position.xy += N * offset / viewport.zw * 2.0;\n\n gl_Position.xy *= gl_Position.w;\n\n v_Color = a_Color;\n}\n@end\n\n\n@export ecgl.meshLines2D.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nvarying vec4 v_Color;\nvarying float v_Miter;\n\nvoid main()\n{\n gl_FragColor = color * v_Color;\n}\n\n@end");var koe=1;const Noe=bt.TA.extend({type:"graphGL",__ecgl__:!0,init:function(e,n){this.groupGL=new ot.Node,this.viewGL=new Sf("orthographic"),this.viewGL.camera.left=this.viewGL.camera.right=0,this.viewGL.add(this.groupGL),this._pointsBuilder=new fw(!0,n),this._forceEdgesMesh=new ot.Mesh({material:new ot.Material({shader:ot.createShader("ecgl.forceAtlas2.edges"),transparent:!0,depthMask:!1,depthTest:!1}),$ignorePicking:!0,geometry:new ot.Geometry({attributes:{node:new ot.Geometry.Attribute("node","float",2),color:new ot.Geometry.Attribute("color","float",4,"COLOR")},dynamic:!0,mainAttribute:"node"}),renderOrder:-1,mode:ot.Mesh.LINES}),this._edgesMesh=new ot.Mesh({material:new ot.Material({shader:ot.createShader("ecgl.meshLines2D"),transparent:!0,depthMask:!1,depthTest:!1}),$ignorePicking:!0,geometry:new gj({useNativeLine:!1,dynamic:!0}),renderOrder:-1,culling:!1}),this._layoutId=0,this._control=new Loe({zr:n.getZr(),viewGL:this.viewGL}),this._control.setTarget(this.groupGL),this._control.init(),this._clickHandler=this._clickHandler.bind(this)},render:function(e,n,t){this.groupGL.add(this._pointsBuilder.rootNode),this._model=e,this._api=t,this._initLayout(e,n,t),this._pointsBuilder.update(e,n,t),this._forceLayoutInstance instanceof sV||this.groupGL.remove(this._forceEdgesMesh),this._updateCamera(e,t),this._control.off("update"),this._control.on("update",function(){t.dispatchAction({type:"graphGLRoam",seriesId:e.id,zoom:this._control.getZoom(),offset:this._control.getOffset()}),this._pointsBuilder.updateView(this.viewGL.camera)},this),this._control.setZoom(Qr.firstNotNull(e.get("zoom"),1)),this._control.setOffset(e.get("offset")||[0,0]);var r=this._pointsBuilder.getPointsMesh();if(r.off("mousemove",this._mousemoveHandler),r.off("mouseout",this._mouseOutHandler,this),t.getZr().off("click",this._clickHandler),this._pointsBuilder.highlightOnMouseover=!0,e.get("focusNodeAdjacency")){var i=e.get("focusNodeAdjacencyOn");"click"===i?t.getZr().on("click",this._clickHandler):"mouseover"===i&&(r.on("mousemove",this._mousemoveHandler,this),r.on("mouseout",this._mouseOutHandler,this),this._pointsBuilder.highlightOnMouseover=!1)}this._lastMouseOverDataIndex=-1},_clickHandler:function(e){if(!this._layouting){var n=this._pointsBuilder.getPointsMesh().dataIndex;this._api.dispatchAction(n>=0?{type:"graphGLFocusNodeAdjacency",seriesId:this._model.id,dataIndex:n}:{type:"graphGLUnfocusNodeAdjacency",seriesId:this._model.id})}},_mousemoveHandler:function(e){if(!this._layouting){var n=this._pointsBuilder.getPointsMesh().dataIndex;n>=0?n!==this._lastMouseOverDataIndex&&this._api.dispatchAction({type:"graphGLFocusNodeAdjacency",seriesId:this._model.id,dataIndex:n}):this._mouseOutHandler(e),this._lastMouseOverDataIndex=n}},_mouseOutHandler:function(e){this._layouting||(this._api.dispatchAction({type:"graphGLUnfocusNodeAdjacency",seriesId:this._model.id}),this._lastMouseOverDataIndex=-1)},_updateForceEdgesGeometry:function(e,n){var t=this._forceEdgesMesh.geometry,r=n.getEdgeData(),i=0,s=this._forceLayoutInstance,d=2*r.count();t.attributes.node.init(d),t.attributes.color.init(d),r.each(function(p){var v=e[p];t.attributes.node.set(i,s.getNodeUV(v.node1)),t.attributes.node.set(i+1,s.getNodeUV(v.node2));var _=Fo(r,v.dataIndex),C=ot.parseColor(_);C[3]*=Qr.firstNotNull(Bo(r,v.dataIndex),1),t.attributes.color.set(i,C),t.attributes.color.set(i+1,C),i+=2}),t.dirty()},_updateMeshLinesGeometry:function(){var n=this._model.getEdgeData(),e=this._edgesMesh.geometry,t=(n=this._model.getEdgeData(),this._model.getData().getLayout("points"));e.resetOffset(),e.setVertexCount(n.count()*e.getLineVertexCount()),e.setTriangleCount(n.count()*e.getLineTriangleCount());var r=[],i=[],s=["lineStyle","width"];this._originalEdgeColors=new Float32Array(4*n.count()),this._edgeIndicesMap=new Float32Array(n.count()),n.each(function(d){var p=n.graph.getEdgeByIndex(d),v=2*p.node1.dataIndex,_=2*p.node2.dataIndex;r[0]=t[v],r[1]=t[v+1],i[0]=t[_],i[1]=t[_+1];var C=Fo(n,p.dataIndex),S=ot.parseColor(C);S[3]*=Qr.firstNotNull(Bo(n,p.dataIndex),1);var k=n.getItemModel(p.dataIndex),H=Qr.firstNotNull(k.get(s),1)*this._api.getDevicePixelRatio();e.addLine(r,i,S,H);for(var ne=0;ne<4;ne++)this._originalEdgeColors[4*p.dataIndex+ne]=S[ne];this._edgeIndicesMap[p.dataIndex]=d},this),e.dirty()},_updateForceNodesGeometry:function(e){for(var n=this._pointsBuilder.getPointsMesh(),t=[],r=0;r<e.count();r++)this._forceLayoutInstance.getNodeUV(r,t),n.geometry.attributes.position.set(r,t);n.geometry.dirty("position")},_initLayout:function(e,n,t){var r=e.get("layout"),i=e.getGraph(),s=e.getBoxLayoutParams(),d=(0,WI.ME)(s,{width:t.getWidth(),height:t.getHeight()});"force"===r&&(r="forceAtlas2"),this.stopLayout(e,n,t,{beforeLayout:!0});var p=e.getData(),v=e.getData();if("forceAtlas2"===r){var _=e.getModel("forceAtlas2"),C=this._forceLayoutInstance,S=[],k=[],H=p.getDataExtent("value"),ne=v.getDataExtent("value"),pe=Qr.firstNotNull(_.get("edgeWeight"),1),Me=Qr.firstNotNull(_.get("nodeWeight"),1);"number"==typeof pe&&(pe=[pe,pe]),"number"==typeof Me&&(Me=[Me,Me]);var Re=0,Fe={},Oe=new Float32Array(2*p.count());if(i.eachNode(function(nt){var mt,Ft,rt=nt.dataIndex,Ct=p.get("value",rt);if(p.hasItemOption){var nn=p.getItemModel(rt);mt=nn.get("x"),Ft=nn.get("y")}null==mt&&(mt=d.x+Math.random()*d.width,Ft=d.y+Math.random()*d.height),Oe[2*Re]=mt,Oe[2*Re+1]=Ft,Fe[nt.id]=Re++;var Xt=bt.Rx.linearMap(Ct,H,Me);isNaN(Xt)&&(Xt=isNaN(Me[0])?1:Me[0]),S.push({x:mt,y:Ft,mass:Xt,size:p.getItemVisual(rt,"symbolSize")})}),p.setLayout("points",Oe),i.eachEdge(function(nt){var rt=nt.dataIndex,Ct=p.get("value",rt),mt=bt.Rx.linearMap(Ct,ne,pe);isNaN(mt)&&(mt=isNaN(pe[0])?1:pe[0]),k.push({node1:Fe[nt.node1.id],node2:Fe[nt.node2.id],weight:mt,dataIndex:rt})}),!C){var Be=_.get("GPU");this._forceLayoutInstance&&(Be&&!(this._forceLayoutInstance instanceof sV)||!Be&&!(this._forceLayoutInstance instanceof mj))&&(this._forceLayoutInstanceToDispose=this._forceLayoutInstance),C=this._forceLayoutInstance=Be?new sV:new mj}C.initData(S,k),C.updateOption(_.option),this._updateForceEdgesGeometry(C.getEdges(),e),this._updatePositionTexture(),t.dispatchAction({type:"graphGLStartLayout",from:this.uid})}else Oe=new Float32Array(2*p.count()),Re=0,i.eachNode(function(Ct){var Ft,nn;if(p.hasItemOption){var Xt=p.getItemModel(Ct.dataIndex);Ft=Xt.get("x"),nn=Xt.get("y")}Oe[Re++]=Ft,Oe[Re++]=nn}),p.setLayout("points",Oe),this._updateAfterLayout(e,n,t)},_updatePositionTexture:function(){var e=this._forceLayoutInstance.getNodePositionTexture();this._pointsBuilder.setPositionTexture(e),this._forceEdgesMesh.material.set("positionTex",e)},startLayout:function(e,n,s,r){if(!r||null==r.from||r.from===this.uid){var i=this.viewGL,d=(s=this._api,this._forceLayoutInstance),p=this._model.getData(),v=this._model.getModel("forceAtlas2");if(d&&(this.groupGL.remove(this._edgesMesh),this.groupGL.add(this._forceEdgesMesh),this._forceLayoutInstance)){this._updateForceNodesGeometry(e.getData()),this._pointsBuilder.hideLabels();var _=this,C=this._layoutId=koe++,S=v.getShallow("maxSteps"),k=v.getShallow("steps"),H=0,ne=Math.max(2*k,20),pe=function(Me){if(Me===_._layoutId){if(d.isFinished(S))return s.dispatchAction({type:"graphGLStopLayout",from:_.uid}),void s.dispatchAction({type:"graphGLFinishLayout",points:p.getLayout("points"),from:_.uid});d.update(i.layer.renderer,k,function(){_._updatePositionTexture(),(H+=k)>=ne&&(_._syncNodePosition(e),H=0),s.getZr().refresh(),(0,x3.Z)(function(){pe(Me)})})}};(0,x3.Z)(function(){_._forceLayoutInstanceToDispose&&(_._forceLayoutInstanceToDispose.dispose(i.layer.renderer),_._forceLayoutInstanceToDispose=null),pe(C)}),this._layouting=!0}}},stopLayout:function(e,n,t,r){r&&null!=r.from&&r.from!==this.uid||(this._layoutId=0,this.groupGL.remove(this._forceEdgesMesh),this.groupGL.add(this._edgesMesh),this._forceLayoutInstance&&(!this.viewGL.layer||(r&&r.beforeLayout||(this._syncNodePosition(e),this._updateAfterLayout(e,n,t)),this._api.getZr().refresh(),this._layouting=!1)))},_syncNodePosition:function(e){var n=this._forceLayoutInstance.getNodePosition(this.viewGL.layer.renderer);e.getData().setLayout("points",n),e.setNodePosition(n)},_updateAfterLayout:function(e,n,t){this._updateMeshLinesGeometry(),this._pointsBuilder.removePositionTexture(),this._pointsBuilder.updateLayout(e,n,t),this._pointsBuilder.updateView(this.viewGL.camera),this._pointsBuilder.updateLabels(),this._pointsBuilder.showLabels()},focusNodeAdjacency:function(e,n,t,r){var i=this._model.getData();this._downplayAll();var p=[],v=i.graph.getNodeByIndex(r.dataIndex);p.push(v),v.edges.forEach(function(C){C.dataIndex<0||(C.node1!==v&&p.push(C.node1),C.node2!==v&&p.push(C.node2))},this),this._pointsBuilder.fadeOutAll(.05),this._fadeOutEdgesAll(.05),p.forEach(function(C){this._pointsBuilder.highlight(i,C.dataIndex)},this),this._pointsBuilder.updateLabels(p.map(function(C){return C.dataIndex}));var _=[];v.edges.forEach(function(C){C.dataIndex>=0&&(this._highlightEdge(C.dataIndex),_.push(C))},this),this._focusNodes=p,this._focusEdges=_},unfocusNodeAdjacency:function(e,n,t,r){this._downplayAll(),this._pointsBuilder.fadeInAll(),this._fadeInEdgesAll(),this._pointsBuilder.updateLabels()},_highlightEdge:function(e){var n=this._model.getEdgeData().getItemModel(e),t=ot.parseColor(n.get("emphasis.lineStyle.color")||n.get("lineStyle.color")),r=Qr.firstNotNull(n.get("emphasis.lineStyle.opacity"),n.get("lineStyle.opacity"),1);t[3]*=r,this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[e],t)},_downplayAll:function(){this._focusNodes&&this._focusNodes.forEach(function(e){this._pointsBuilder.downplay(this._model.getData(),e.dataIndex)},this),this._focusEdges&&this._focusEdges.forEach(function(e){this._downplayEdge(e.dataIndex)},this)},_downplayEdge:function(e){var n=this._getColor(e,[]);this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[e],n)},_setEdgeFade:function(){var e=[];return function(n,t){this._getColor(n,e),e[3]*=t,this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[n],e)}}(),_getColor:function(e,n){for(var t=0;t<4;t++)n[t]=this._originalEdgeColors[4*e+t];return n},_fadeOutEdgesAll:function(e){this._model.getData().graph.eachEdge(function(t){this._setEdgeFade(t.dataIndex,e)},this)},_fadeInEdgesAll:function(){this._fadeOutEdgesAll(1)},_updateCamera:function(e,n){this.viewGL.setViewport(0,0,n.getWidth(),n.getHeight(),n.getDevicePixelRatio());for(var t=this.viewGL.camera,i=e.getData().getLayout("points"),s=JI.create(1/0,1/0),d=JI.create(-1/0,-1/0),p=[],v=0;v<i.length;)p[0]=i[v++],p[1]=i[v++],JI.min(s,s,p),JI.max(d,d,p);var _=(d[1]+s[1])/2,C=(d[0]+s[0])/2;if(!(C>t.left&&C<t.right&&_<t.bottom&&_>t.top)){var S=Math.max(d[0]-s[0],10),k=S/n.getWidth()*n.getHeight();k*=1.4,s[0]-=.2*(S*=1.4),t.left=s[0],t.top=_-k/2,t.bottom=_+k/2,t.right=S+s[0],t.near=0,t.far=100}},dispose:function(){this._forceLayoutInstance&&this._forceLayoutInstance.dispose(this.viewGL.layer.renderer),this.groupGL.removeAll(),this._layoutId=-1,this._pointsBuilder.dispose()},remove:function(){this.groupGL.removeAll(),this._control.dispose()}});function eP(e){return e instanceof Array||(e=[e,e]),e}(0,bt.D$)(function Foe(e){function n(){}e.registerChartView(Noe),e.registerSeriesModel(Aoe),e.registerVisual(function(t){const r={};t.eachSeriesByType("graphGL",function(i){var s=i.getCategoriesData(),d=i.getData(),p={};s.each(function(v){var _=s.getName(v);p["ec-"+_]=v;var C=s.getItemModel(v),S=C.getModel("itemStyle").getItemStyle();S.fill||(S.fill=i.getColorFromPalette(_,r)),s.setItemVisual(v,"style",S);var k=["symbol","symbolSize","symbolKeepAspect"];for(let ne=0;ne<k.length;ne++){var H=C.getShallow(k[ne],!0);null!=H&&s.setItemVisual(v,k[ne],H)}}),s.count()&&d.each(function(v){let C=d.getItemModel(v).getShallow("category");if(null!=C){"string"==typeof C&&(C=p["ec-"+C]);var S=s.getItemVisual(C,"style"),k=d.ensureUniqueItemVisual(v,"style");bt.D5.extend(k,S);var H=["symbol","symbolSize","symbolKeepAspect"];for(let ne=0;ne<H.length;ne++)d.setItemVisual(v,H[ne],s.getItemVisual(C,H[ne]))}})})}),e.registerVisual(function(t){t.eachSeriesByType("graphGL",function(r){var i=r.getGraph(),s=r.getEdgeData(),d=eP(r.get("edgeSymbol")),p=eP(r.get("edgeSymbolSize"));s.setVisual("drawType","stroke"),s.setVisual("fromSymbol",d&&d[0]),s.setVisual("toSymbol",d&&d[1]),s.setVisual("fromSymbolSize",p&&p[0]),s.setVisual("toSymbolSize",p&&p[1]),s.setVisual("style",r.getModel("lineStyle").getLineStyle()),s.each(function(v){var _=s.getItemModel(v),C=i.getEdgeByIndex(v),S=eP(_.getShallow("symbol",!0)),k=eP(_.getShallow("symbolSize",!0)),H=_.getModel("lineStyle").getLineStyle(),ne=s.ensureUniqueItemVisual(v,"style");switch(bt.D5.extend(ne,H),ne.stroke){case"source":var pe=C.node1.getVisual("style");ne.stroke=pe&&pe.fill;break;case"target":pe=C.node2.getVisual("style"),ne.stroke=pe&&pe.fill}S[0]&&C.setVisual("fromSymbol",S[0]),S[1]&&C.setVisual("toSymbol",S[1]),k[0]&&C.setVisual("fromSymbolSize",k[0]),k[1]&&C.setVisual("toSymbolSize",k[1])})})}),e.registerAction({type:"graphGLRoam",event:"graphglroam",update:"series.graphGL:roam"},function(t,r){r.eachComponent({mainType:"series",query:t},function(i){i.setView(t)})}),e.registerAction({type:"graphGLStartLayout",event:"graphgllayoutstarted",update:"series.graphGL:startLayout"},n),e.registerAction({type:"graphGLStopLayout",event:"graphgllayoutstopped",update:"series.graphGL:stopLayout"},n),e.registerAction({type:"graphGLFocusNodeAdjacency",event:"graphGLFocusNodeAdjacency",update:"series.graphGL:focusNodeAdjacency"},n),e.registerAction({type:"graphGLUnfocusNodeAdjacency",event:"graphGLUnfocusNodeAdjacency",update:"series.graphGL:unfocusNodeAdjacency"},n)});const Boe=bt.wJ.extend({type:"series.flowGL",dependencies:["geo","grid","bmap"],visualStyleAccessPath:"itemStyle",getInitialData:function(e,n){var t=this.get("coordinateSystem"),r="geo"===t?["lng","lat"]:bt.wL(t)||["x","y"];r.push("vx","vy");var i=bt._y.createDimensions(this.getSource(),{coordDimensions:r,encodeDefine:this.get("encode"),dimensionsDefine:this.get("dimensions")}),s=new bt.aV(i,this);return s.initData(this.getSource()),s},defaultOption:{coordinateSystem:"cartesian2d",zlevel:10,supersampling:1,particleType:"point",particleDensity:128,particleSize:1,particleSpeed:1,particleTrail:2,colorTexture:null,gridWidth:"auto",gridHeight:"auto",itemStyle:{color:"#fff",opacity:.8}}});var Voe=Si.extend(function(){return{dynamic:!0,attributes:{position:new Si.Attribute("position","float",3,"POSITION")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setLineCount:function(e){var t=4*e,r=2*e;this.vertexCount!==t&&this.attributes.position.init(t),this.triangleCount!==r&&(this.indices=0===r?null:this.vertexCount>65535?new Uint32Array(3*r):new Uint16Array(3*r))},addLine:function(e){var n=this._vertexOffset;this.attributes.position.set(n,[e[0],e[1],1]),this.attributes.position.set(n+1,[e[0],e[1],-1]),this.attributes.position.set(n+2,[e[0],e[1],2]),this.attributes.position.set(n+3,[e[0],e[1],-2]),this.setTriangleIndices(this._faceOffset++,[n,n+1,n+2]),this.setTriangleIndices(this._faceOffset++,[n+1,n+2,n+3]),this._vertexOffset+=4}});const zoe=Voe;Gn.import("@export ecgl.vfParticle.particle.fragment\n\nuniform sampler2D particleTexture;\nuniform sampler2D spawnTexture;\nuniform sampler2D velocityTexture;\n\nuniform float deltaTime;\nuniform float elapsedTime;\n\nuniform float speedScaling : 1.0;\n\nuniform vec2 textureSize;\nuniform vec4 region : [0, 0, 1, 1];\nuniform float firstFrameTime;\n\nvarying vec2 v_Texcoord;\n\n\nvoid main()\n{\n vec4 p = texture2D(particleTexture, v_Texcoord);\n bool spawn = false;\n if (p.w <= 0.0) {\n p = texture2D(spawnTexture, fract(v_Texcoord + elapsedTime / 10.0));\n p.w -= firstFrameTime;\n spawn = true;\n }\n vec2 v = texture2D(velocityTexture, fract(p.xy * region.zw + region.xy)).xy;\n v = (v - 0.5) * 2.0;\n p.z = length(v);\n p.xy += v * deltaTime / 10.0 * speedScaling;\n p.w -= deltaTime;\n\n if (spawn || p.xy != fract(p.xy)) {\n p.z = 0.0;\n }\n p.xy = fract(p.xy);\n\n gl_FragColor = p;\n}\n@end\n\n@export ecgl.vfParticle.renderPoints.vertex\n\n#define PI 3.1415926\n\nattribute vec2 texcoord : TEXCOORD_0;\n\nuniform sampler2D particleTexture;\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nuniform float size : 1.0;\n\nvarying float v_Mag;\nvarying vec2 v_Uv;\n\nvoid main()\n{\n vec4 p = texture2D(particleTexture, texcoord);\n\n if (p.w > 0.0 && p.z > 1e-5) {\n gl_Position = worldViewProjection * vec4(p.xy * 2.0 - 1.0, 0.0, 1.0);\n }\n else {\n gl_Position = vec4(100000.0, 100000.0, 100000.0, 1.0);\n }\n\n v_Mag = p.z;\n v_Uv = p.xy;\n\n gl_PointSize = size;\n}\n\n@end\n\n@export ecgl.vfParticle.renderPoints.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\nuniform sampler2D gradientTexture;\nuniform sampler2D colorTexture;\nuniform sampler2D spriteTexture;\n\nvarying float v_Mag;\nvarying vec2 v_Uv;\n\nvoid main()\n{\n gl_FragColor = color;\n#ifdef SPRITETEXTURE_ENABLED\n gl_FragColor *= texture2D(spriteTexture, gl_PointCoord);\n if (color.a == 0.0) {\n discard;\n }\n#endif\n#ifdef GRADIENTTEXTURE_ENABLED\n gl_FragColor *= texture2D(gradientTexture, vec2(v_Mag, 0.5));\n#endif\n#ifdef COLORTEXTURE_ENABLED\n gl_FragColor *= texture2D(colorTexture, v_Uv);\n#endif\n}\n\n@end\n\n@export ecgl.vfParticle.renderLines.vertex\n\n#define PI 3.1415926\n\nattribute vec3 position : POSITION;\n\nuniform sampler2D particleTexture;\nuniform sampler2D prevParticleTexture;\n\nuniform float size : 1.0;\nuniform vec4 vp: VIEWPORT;\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nvarying float v_Mag;\nvarying vec2 v_Uv;\n\n@import clay.util.rand\n\nvoid main()\n{\n vec4 p = texture2D(particleTexture, position.xy);\n vec4 p2 = texture2D(prevParticleTexture, position.xy);\n\n p.xy = p.xy * 2.0 - 1.0;\n p2.xy = p2.xy * 2.0 - 1.0;\n\n if (p.w > 0.0 && p.z > 1e-5) {\n vec2 dir = normalize(p.xy - p2.xy);\n vec2 norm = vec2(dir.y / vp.z, -dir.x / vp.w) * sign(position.z) * size;\n if (abs(position.z) == 2.0) {\n gl_Position = vec4(p.xy + norm, 0.0, 1.0);\n v_Uv = p.xy;\n v_Mag = p.z;\n }\n else {\n gl_Position = vec4(p2.xy + norm, 0.0, 1.0);\n v_Mag = p2.z;\n v_Uv = p2.xy;\n }\n gl_Position = worldViewProjection * gl_Position;\n }\n else {\n gl_Position = vec4(100000.0, 100000.0, 100000.0, 1.0);\n }\n}\n\n@end\n\n@export ecgl.vfParticle.renderLines.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\nuniform sampler2D gradientTexture;\nuniform sampler2D colorTexture;\n\nvarying float v_Mag;\nvarying vec2 v_Uv;\n\nvoid main()\n{\n gl_FragColor = color;\n #ifdef GRADIENTTEXTURE_ENABLED\n gl_FragColor *= texture2D(gradientTexture, vec2(v_Mag, 0.5));\n#endif\n#ifdef COLORTEXTURE_ENABLED\n gl_FragColor *= texture2D(colorTexture, v_Uv);\n#endif\n}\n\n@end\n");var lV=function(){this.motionBlurFactor=.99,this.vectorFieldTexture=new $r({type:dr.FLOAT,flipY:!1}),this.particleLife=[5,20],this._particleType="point",this._particleSize=1,this.particleColor=[1,1,1,1],this.particleSpeedScaling=1,this._thisFrameTexture=null,this._particlePass=null,this._spawnTexture=null,this._particleTexture0=null,this._particleTexture1=null,this._particlePointsMesh=null,this._surfaceFrameBuffer=null,this._elapsedTime=0,this._scene=null,this._camera=null,this._lastFrameTexture=null,this._supersampling=1,this._downsampleTextures=[],this._width=512,this._height=512,this.init()};lV.prototype={constructor:lV,init:function(){var e={type:dr.FLOAT,minFilter:dr.NEAREST,magFilter:dr.NEAREST,useMipmap:!1};this._spawnTexture=new $r(e),this._particleTexture0=new $r(e),this._particleTexture1=new $r(e),this._frameBuffer=new Ko({depthBuffer:!1}),this._particlePass=new so({fragment:Gn.source("ecgl.vfParticle.particle.fragment")}),this._particlePass.setUniform("velocityTexture",this.vectorFieldTexture),this._particlePass.setUniform("spawnTexture",this._spawnTexture),this._downsamplePass=new so({fragment:Gn.source("clay.compositor.downsample")});var n=new Vv({renderOrder:10,material:new Eu({shader:new Gn(Gn.source("ecgl.vfParticle.renderPoints.vertex"),Gn.source("ecgl.vfParticle.renderPoints.fragment"))}),mode:Vv.POINTS,geometry:new Si({dynamic:!0,mainAttribute:"texcoord0"})}),t=new Vv({renderOrder:10,material:new Eu({shader:new Gn(Gn.source("ecgl.vfParticle.renderLines.vertex"),Gn.source("ecgl.vfParticle.renderLines.fragment"))}),geometry:new zoe,culling:!1}),r=new Vv({material:new Eu({shader:new Gn(Gn.source("ecgl.color.vertex"),Gn.source("ecgl.color.fragment"))}),geometry:new SI});r.material.enableTexture("diffuseMap"),this._particlePointsMesh=n,this._particleLinesMesh=t,this._lastFrameFullQuadMesh=r,this._camera=new By,this._thisFrameTexture=new $r,this._lastFrameTexture=new $r},setParticleDensity:function(e,n){for(var r=new Float32Array(e*n*4),i=0,s=this.particleLife,d=0;d<e;d++)for(var p=0;p<n;p++,i++){r[4*i]=Math.random(),r[4*i+1]=Math.random(),r[4*i+2]=Math.random();var v=(s[1]-s[0])*Math.random()+s[0];r[4*i+3]=v}"line"===this._particleType?this._setLineGeometry(e,n):this._setPointsGeometry(e,n),this._spawnTexture.width=e,this._spawnTexture.height=n,this._spawnTexture.pixels=r,this._particleTexture0.width=this._particleTexture1.width=e,this._particleTexture0.height=this._particleTexture1.height=n,this._particlePass.setUniform("textureSize",[e,n])},_setPointsGeometry:function(e,n){var r=this._particlePointsMesh.geometry,i=r.attributes;i.texcoord0.init(e*n);for(var s=0,d=0;d<e;d++)for(var p=0;p<n;p++,s++)i.texcoord0.value[2*s]=d/e,i.texcoord0.value[2*s+1]=p/n;r.dirty()},_setLineGeometry:function(e,n){var t=e*n,r=this._getParticleMesh().geometry;r.setLineCount(t),r.resetOffset();for(var i=0;i<e;i++)for(var s=0;s<n;s++)r.addLine([i/e,s/n]);r.dirty()},_getParticleMesh:function(){return"line"===this._particleType?this._particleLinesMesh:this._particlePointsMesh},update:function(e,n,t,r){var i=this._getParticleMesh(),s=this._frameBuffer,d=this._particlePass;r&&this._updateDownsampleTextures(e,n),i.material.set("size",this._particleSize*this._supersampling),i.material.set("color",this.particleColor),d.setUniform("speedScaling",this.particleSpeedScaling),s.attach(this._particleTexture1),d.setUniform("firstFrameTime",r?(this.particleLife[1]+this.particleLife[0])/2:0),d.setUniform("particleTexture",this._particleTexture0),d.setUniform("deltaTime",t),d.setUniform("elapsedTime",this._elapsedTime),d.render(e,s),i.material.set("particleTexture",this._particleTexture1),i.material.set("prevParticleTexture",this._particleTexture0),s.attach(this._thisFrameTexture),s.bind(e),e.gl.clear(e.gl.DEPTH_BUFFER_BIT|e.gl.COLOR_BUFFER_BIT);var p=this._lastFrameFullQuadMesh;p.material.set("diffuseMap",this._lastFrameTexture),p.material.set("color",[1,1,1,this.motionBlurFactor]),this._camera.update(!0),e.renderPass([p,i],this._camera),s.unbind(e),this._downsample(e),this._swapTexture(),this._elapsedTime+=t},_downsample:function(e){var n=this._downsampleTextures;if(0!==n.length)for(var t=0,r=this._thisFrameTexture,i=n[t];i;)this._frameBuffer.attach(i),this._downsamplePass.setUniform("texture",r),this._downsamplePass.setUniform("textureSize",[r.width,r.height]),this._downsamplePass.render(e,this._frameBuffer),r=i,i=n[++t]},getSurfaceTexture:function(){var e=this._downsampleTextures;return e.length>0?e[e.length-1]:this._lastFrameTexture},setRegion:function(e){this._particlePass.setUniform("region",e)},resize:function(e,n){this._lastFrameTexture.width=e*this._supersampling,this._lastFrameTexture.height=n*this._supersampling,this._thisFrameTexture.width=e*this._supersampling,this._thisFrameTexture.height=n*this._supersampling,this._width=e,this._height=n},setParticleSize:function(e){var n=this._getParticleMesh();if(e<=2)return n.material.disableTexture("spriteTexture"),void(n.material.transparent=!1);this._spriteTexture||(this._spriteTexture=new $r),(!this._spriteTexture.image||this._spriteTexture.image.width!==e)&&(this._spriteTexture.image=function Uoe(e){var n=document.createElement("canvas");n.width=n.height=e;var t=n.getContext("2d");return t.fillStyle="#fff",t.arc(e/2,e/2,e/2,0,2*Math.PI),t.fill(),n}(e),this._spriteTexture.dirty()),n.material.transparent=!0,n.material.enableTexture("spriteTexture"),n.material.set("spriteTexture",this._spriteTexture),this._particleSize=e},setGradientTexture:function(e){var n=this._getParticleMesh().material;n[e?"enableTexture":"disableTexture"]("gradientTexture"),n.setUniform("gradientTexture",e)},setColorTextureImage:function(e,n){this._getParticleMesh().material.setTextureImage("colorTexture",e,n,{flipY:!0})},setParticleType:function(e){this._particleType=e},clearFrame:function(e){var n=this._frameBuffer;n.attach(this._lastFrameTexture),n.bind(e),e.gl.clear(e.gl.DEPTH_BUFFER_BIT|e.gl.COLOR_BUFFER_BIT),n.unbind(e)},setSupersampling:function(e){this._supersampling=e,this.resize(this._width,this._height)},_updateDownsampleTextures:function(e,n){for(var t=this._downsampleTextures,r=Math.max(Math.floor(Math.log(this._supersampling/n.getDevicePixelRatio())/Math.log(2)),0),i=2,s=this._width*this._supersampling,d=this._height*this._supersampling,p=0;p<r;p++)t[p]=t[p]||new $r,t[p].width=s/i,t[p].height=d/i,i*=2;for(;p<t.length;p++)t[p].dispose(e);t.length=r},_swapTexture:function(){var e=this._particleTexture0;this._particleTexture0=this._particleTexture1,this._particleTexture1=e,e=this._thisFrameTexture,this._thisFrameTexture=this._lastFrameTexture,this._lastFrameTexture=e},dispose:function(e){e.disposeFrameBuffer(this._frameBuffer),e.disposeTexture(this.vectorFieldTexture),e.disposeTexture(this._spawnTexture),e.disposeTexture(this._particleTexture0),e.disposeTexture(this._particleTexture1),e.disposeTexture(this._thisFrameTexture),e.disposeTexture(this._lastFrameTexture),e.disposeGeometry(this._particleLinesMesh.geometry),e.disposeGeometry(this._particlePointsMesh.geometry),e.disposeGeometry(this._lastFrameFullQuadMesh.geometry),this._spriteTexture&&e.disposeTexture(this._spriteTexture),this._particlePass.dispose(e),this._downsamplePass.dispose(e),this._downsampleTextures.forEach(function(n){n.dispose(e)})}};const Goe=lV,Woe=bt.TA.extend({type:"flowGL",__ecgl__:!0,init:function(e,n){this.viewGL=new Sf("orthographic"),this.groupGL=new ot.Node,this.viewGL.add(this.groupGL),this._particleSurface=new Goe;var t=new ot.Mesh({geometry:new ot.PlaneGeometry,material:new ot.Material({shader:new ot.Shader({vertex:ot.Shader.source("ecgl.color.vertex"),fragment:ot.Shader.source("ecgl.color.fragment")}),transparent:!0})});t.material.enableTexture("diffuseMap"),this.groupGL.add(t),this._planeMesh=t},render:function(e,n,t){var r=this._particleSurface;r.setParticleType(e.get("particleType")),r.setSupersampling(e.get("supersampling")),this._updateData(e,t),this._updateCamera(t.getWidth(),t.getHeight(),t.getDevicePixelRatio());var i=Qr.firstNotNull(e.get("particleDensity"),128);r.setParticleDensity(i,i);var s=this._planeMesh,d=+new Date,p=this,v=!0;s.__percent=0,s.stopAnimation(),s.animate("",{loop:!0}).when(1e5,{__percent:1}).during(function(){var S=+new Date,k=Math.min(S-d,20);d+=k,p._renderer&&(r.update(p._renderer,t,k/1e3,v),s.material.set("diffuseMap",r.getSurfaceTexture())),v=!1}).start();var _=e.getModel("itemStyle"),C=ot.parseColor(_.get("color"));C[3]*=Qr.firstNotNull(_.get("opacity"),1),s.material.set("color",C),r.setColorTextureImage(e.get("colorTexture"),t),r.setParticleSize(e.get("particleSize")),r.particleSpeedScaling=e.get("particleSpeed"),r.motionBlurFactor=1-Math.pow(.1,e.get("particleTrail"))},updateTransform:function(e,n,t){this._updateData(e,t)},afterRender:function(e,n,t,r){this._renderer=r.renderer},_updateData:function(e,n){var t=e.coordinateSystem,r=t.dimensions.map(function(Fe){return e.coordDimToDataDim(Fe)[0]}),i=e.getData(),s=i.getDataExtent(r[0]),d=i.getDataExtent(r[1]),p=e.get("gridWidth"),v=e.get("gridHeight");null!=p&&"auto"!==p||(p=Math.round(Math.sqrt((s[1]-s[0])/(d[1]-d[0])*i.count()))),(null==v||"auto"===v)&&(v=Math.ceil(i.count()/p));var C=this._particleSurface.vectorFieldTexture,S=C.pixels;if(S&&S.length===v*p*4)for(var k=0;k<S.length;k++)S[k]=0;else S=C.pixels=new Float32Array(p*v*4);var H=0,ne=1/0,pe=new Float32Array(2*i.count()),Me=0,Re=[[1/0,1/0],[-1/0,-1/0]];i.each([r[0],r[1],"vx","vy"],function(Fe,Oe,Be,nt){var rt=t.dataToPoint([Fe,Oe]);pe[Me++]=rt[0],pe[Me++]=rt[1],Re[0][0]=Math.min(rt[0],Re[0][0]),Re[0][1]=Math.min(rt[1],Re[0][1]),Re[1][0]=Math.max(rt[0],Re[1][0]),Re[1][1]=Math.max(rt[1],Re[1][1]);var Ct=Math.sqrt(Be*Be+nt*nt);H=Math.max(H,Ct),ne=Math.min(ne,Ct)}),i.each(["vx","vy"],function(Fe,Oe,Be){var nt=Math.round((pe[2*Be]-Re[0][0])/(Re[1][0]-Re[0][0])*(p-1)),Ct=4*((v-1-Math.round((pe[2*Be+1]-Re[0][1])/(Re[1][1]-Re[0][1])*(v-1)))*p+nt);S[Ct]=Fe/H*.5+.5,S[Ct+1]=Oe/H*.5+.5,S[Ct+3]=1}),C.width=p,C.height=v,"bmap"===e.get("coordinateSystem")&&this._fillEmptyPixels(C),C.dirty(),this._updatePlanePosition(Re[0],Re[1],e,n),this._updateGradientTexture(i.getVisual("visualMeta"),[ne,H])},_fillEmptyPixels:function(e){var n=e.pixels,t=e.width,r=e.height;function i(pe,Me,Re){pe=Math.max(Math.min(pe,t-1),0);var Fe=4*((Me=Math.max(Math.min(Me,r-1),0))*(t-1)+pe);return 0!==n[Fe+3]&&(Re[0]=n[Fe],Re[1]=n[Fe+1],!0)}function s(pe,Me,Re){Re[0]=pe[0]+Me[0],Re[1]=pe[1]+Me[1]}for(var d=[],p=[],v=[],_=[],C=[],S=0,k=0;k<r;k++)for(var H=0;H<t;H++){var ne=4*(k*(t-1)+H);0===n[ne+3]&&(S=d[0]=d[1]=0,i(H-1,k,p)&&(S++,s(p,d,d)),i(H+1,k,v)&&(S++,s(v,d,d)),i(H,k-1,_)&&(S++,s(_,d,d)),i(H,k+1,C)&&(S++,s(C,d,d)),d[0]/=S,d[1]/=S,n[ne]=d[0],n[ne+1]=d[1]),n[ne+3]=1}},_updateGradientTexture:function(e,n){if(e&&e.length){this._gradientTexture=this._gradientTexture||new ot.Texture2D({image:document.createElement("canvas")});var t=this._gradientTexture,r=t.image;r.width=200,r.height=1;var i=r.getContext("2d"),s=i.createLinearGradient(0,.5,r.width,.5);e[0].stops.forEach(function(d){var p;n[1]===n[0]?p=0:(p=d.value/n[1],p=Math.min(Math.max(p,0),1)),s.addColorStop(p,d.color)}),i.fillStyle=s,i.fillRect(0,0,r.width,r.height),t.dirty(),this._particleSurface.setGradientTexture(this._gradientTexture)}else this._particleSurface.setGradientTexture(null)},_updatePlanePosition:function(e,n,t,r){var i=this._limitInViewportAndFullFill(e,n,t,r);e=i.leftTop,n=i.rightBottom,this._particleSurface.setRegion(i.region),this._planeMesh.position.set((e[0]+n[0])/2,r.getHeight()-(e[1]+n[1])/2,0);var s=n[0]-e[0],d=n[1]-e[1];this._planeMesh.scale.set(s/2,d/2,1),this._particleSurface.resize(Math.max(Math.min(s,2048),1),Math.max(Math.min(d,2048),1)),this._renderer&&this._particleSurface.clearFrame(this._renderer)},_limitInViewportAndFullFill:function(e,n,t,r){var i=[Math.max(e[0],0),Math.max(e[1],0)],s=[Math.min(n[0],r.getWidth()),Math.min(n[1],r.getHeight())];if("bmap"===t.get("coordinateSystem")){var d=t.getData().getDataExtent(t.coordDimToDataDim("lng")[0]);Math.floor(d[1]-d[0])>=359&&(i[0]>0&&(i[0]=0),s[0]<r.getWidth()&&(s[0]=r.getWidth()))}var v=n[0]-e[0],_=n[1]-e[1],S=s[1]-i[1];return{leftTop:i,rightBottom:s,region:[(i[0]-e[0])/v,1-S/_-(i[1]-e[1])/_,(s[0]-i[0])/v,S/_]}},_updateCamera:function(e,n,t){this.viewGL.setViewport(0,0,e,n,t);var r=this.viewGL.camera;r.left=r.bottom=0,r.top=n,r.right=e,r.near=0,r.far=100,r.position.z=10},remove:function(){this._planeMesh.stopAnimation(),this.groupGL.removeAll()},dispose:function(){this._renderer&&this._particleSurface.dispose(this._renderer),this.groupGL.removeAll()}});(0,bt.D$)(function joe(e){e.registerChartView(Woe),e.registerSeriesModel(Boe)});var _j=z(628),uV=bt.wJ.extend({type:"series.linesGL",dependencies:["grid","geo"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",streamEnabled:!0,init:function(e){var n=this._processFlatCoordsArray(e.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(e.data=new Float32Array(n.count)),uV.superApply(this,"init",arguments)},mergeOption:function(e){var n=this._processFlatCoordsArray(e.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(e.data=new Float32Array(n.count)),uV.superApply(this,"mergeOption",arguments)},appendData:function(e){var n=this._processFlatCoordsArray(e.data);n.flatCoords&&(this._flatCoords?(this._flatCoords=(0,_j.concatArray)(this._flatCoords,n.flatCoords),this._flatCoordsOffset=(0,_j.concatArray)(this._flatCoordsOffset,n.flatCoordsOffset)):(this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset),e.data=new Float32Array(n.count)),this.getRawData().appendData(e.data)},_getCoordsFromItemModel:function(e){var n=this.getData().getItemModel(e);return n.option instanceof Array?n.option:n.getShallow("coords")},getLineCoordsCount:function(e){return this._flatCoordsOffset?this._flatCoordsOffset[2*e+1]:this._getCoordsFromItemModel(e).length},getLineCoords:function(e,n){if(this._flatCoordsOffset){for(var t=this._flatCoordsOffset[2*e],r=this._flatCoordsOffset[2*e+1],i=0;i<r;i++)n[i]=n[i]||[],n[i][0]=this._flatCoords[t+2*i],n[i][1]=this._flatCoords[t+2*i+1];return r}var s=this._getCoordsFromItemModel(e);for(i=0;i<s.length;i++)n[i]=n[i]||[],n[i][0]=s[i][0],n[i][1]=s[i][1];return s.length},_processFlatCoordsArray:function(e){var n=0;if(this._flatCoords&&(n=this._flatCoords.length),"number"==typeof e[0]){for(var t=e.length,r=new Uint32Array(t),i=new Float64Array(t),s=0,d=0,p=0,v=0;v<t;){p++;var _=e[v++];r[d++]=s+n,r[d++]=_;for(var C=0;C<_;C++){var S=e[v++],k=e[v++];i[s++]=S,i[s++]=k}}return{flatCoordsOffset:new Uint32Array(r.buffer,0,d),flatCoords:i,count:p}}return{flatCoordsOffset:null,flatCoords:null,count:e.length}},getInitialData:function(e,n){var t=new bt.aV(["value"],this);return t.hasItemOption=!1,t.initData(e.data,[],function(r,i,s,d){if(r instanceof Array)return NaN;t.hasItemOption=!0;var p=r.value;return null!=p?p instanceof Array?p[d]:p:void 0}),t},defaultOption:{coordinateSystem:"geo",zlevel:10,progressive:1e4,progressiveThreshold:5e4,blendMode:"source-over",lineStyle:{opacity:.8},postEffect:{enable:!1,colorCorrection:{exposure:0,brightness:0,contrast:1,saturation:1,enable:!0}}}});const Zoe=uV,Yoe=bt.TA.extend({type:"linesGL",__ecgl__:!0,init:function(e,n){this.groupGL=new ot.Node,this.viewGL=new Sf("orthographic"),this.viewGL.add(this.groupGL),this._glViewHelper=new fj(this.viewGL),this._nativeLinesShader=ot.createShader("ecgl.lines3D"),this._meshLinesShader=ot.createShader("ecgl.meshLines3D"),this._linesMeshes=[],this._currentStep=0},render:function(e,n,t){this.groupGL.removeAll(),this._glViewHelper.reset(e,t);var r=this._linesMeshes[0];r||(r=this._linesMeshes[0]=this._createLinesMesh(e)),this._linesMeshes.length=1,this.groupGL.add(r),this._updateLinesMesh(e,r,0,e.getData().count()),this.viewGL.setPostEffect(e.getModel("postEffect"),t)},incrementalPrepareRender:function(e,n,t){this.groupGL.removeAll(),this._glViewHelper.reset(e,t),this._currentStep=0,this.viewGL.setPostEffect(e.getModel("postEffect"),t)},incrementalRender:function(e,n,t,r){var i=this._linesMeshes[this._currentStep];i||(i=this._createLinesMesh(n),this._linesMeshes[this._currentStep]=i),this._updateLinesMesh(n,i,e.start,e.end),this.groupGL.add(i),r.getZr().refresh(),this._currentStep++},updateTransform:function(e,n,t){e.coordinateSystem.getRoamTransform&&this._glViewHelper.updateTransform(e,t)},_createLinesMesh:function(e){return new ot.Mesh({$ignorePicking:!0,material:new ot.Material({shader:ot.createShader("ecgl.lines3D"),transparent:!0,depthMask:!1,depthTest:!1}),geometry:new gj({segmentScale:10,useNativeLine:!0,dynamic:!1}),mode:ot.Mesh.LINES,culling:!1})},_updateLinesMesh:function(e,n,t,r){var i=e.getData();n.material.blend="lighter"===e.get("blendMode")?ot.additiveBlend:null;var s=e.get("lineStyle.curveness")||0,d=e.get("polyline"),p=n.geometry,v=e.coordinateSystem,_=Qr.firstNotNull(e.get("lineStyle.width"),1);_>1?(n.material.shader!==this._meshLinesShader&&n.material.attachShader(this._meshLinesShader),n.mode=ot.Mesh.TRIANGLES):(n.material.shader!==this._nativeLinesShader&&n.material.attachShader(this._nativeLinesShader),n.mode=ot.Mesh.LINES),t=t||0,r=r||i.count(),p.resetOffset();var C=0,S=0,k=[],H=[],ne=[],pe=[],Me=[];function Oe(){H[0]=.7*k[0]+.3*pe[0]-(k[1]-pe[1])*s,H[1]=.7*k[1]+.3*pe[1]-(pe[0]-k[0])*s,ne[0]=.3*k[0]+.7*pe[0]-(k[1]-pe[1])*s,ne[1]=.3*k[1]+.7*pe[1]-(pe[0]-k[0])*s}if(d||0!==s)for(var Be=t;Be<r;Be++)if(d){var nt=e.getLineCoordsCount(Be);C+=p.getPolylineVertexCount(nt),S+=p.getPolylineTriangleCount(nt)}else e.getLineCoords(Be,Me),this._glViewHelper.dataToPoint(v,Me[0],k),this._glViewHelper.dataToPoint(v,Me[1],pe),Oe(),C+=p.getCubicCurveVertexCount(k,H,ne,pe),S+=p.getCubicCurveTriangleCount(k,H,ne,pe);else{var rt=r-t;C+=rt*p.getLineVertexCount(),S+=rt*p.getLineVertexCount()}p.setVertexCount(C),p.setTriangleCount(S);var Ct=t,mt=[];for(Be=t;Be<r;Be++){ot.parseColor(Fo(i,Ct),mt);var Ft=Qr.firstNotNull(Bo(i,Ct),1);mt[3]*=Ft,nt=e.getLineCoords(Be,Me);for(var nn=0;nn<nt;nn++)this._glViewHelper.dataToPoint(v,Me[nn],Me[nn]);d?p.addPolyline(Me,mt,_,0,nt):0!==s?(k=Me[0],pe=Me[1],Oe(),p.addCubicCurve(k,H,ne,pe,mt,_)):p.addPolyline(Me,mt,_,0,2),Ct++}},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function tP(e,n,t){return Math.min(Math.max(e,n),t)}(0,bt.D$)(function Xoe(e){e.registerChartView(Yoe),e.registerSeriesModel(Zoe)});let $oe=(()=>{class e{constructor(){this.x_range=[-10,10],this.y_range=[-10,10],this.w_max=5,this.w_min=0,this.b_max=20,this.b_min=-20,this.lin_separability=!0,this.positiveBorder=[[this.x_range[0],this.y_range[0]],[this.x_range[1],this.y_range[1]],[this.x_range[1],this.y_range[0]],[this.x_range[0],this.y_range[0]]],this.negativeBorder=[[this.x_range[0],this.y_range[0]],[this.x_range[1],this.y_range[1]],[this.x_range[1],this.y_range[1]],[this.x_range[0],this.y_range[1]],[this.x_range[0],this.y_range[0]]],this.w=1,this.b=0,this.data_chart={legend:{align:"left"},tooltip:{},xAxis:{min:this.x_range[0],max:this.x_range[1]},yAxis:{min:this.y_range[0],max:this.y_range[1]},series:[{type:"scatter",encode:{tooltip:[0,1]},symbolSize:5,color:"green"},{type:"scatter",encode:{tooltip:[0,1]},symbolSize:5,color:"red"},{type:"line",data:this.positiveBorder,showSymbol:!1,areaStyle:{color:"green",opacity:.3},color:"black",z:-1},{type:"line",data:this.negativeBorder,showSymbol:!1,areaStyle:{color:"red",opacity:.3},lineStyle:{width:0},z:-1}],animationEasing:"elasticOut",animationDelayUpdate:t=>t},this.option_3d_graph={tooltip:{},visualMap:{show:!0,dimension:2,min:0,max:75,inRange:{color:["#313695","#4575b4","#74add1","#abd9e9","#fee090","#fdae61","#f46d43","#d73027","#a50026"]}},xAxis3D:{type:"value",name:"W"},yAxis3D:{type:"value",name:"b"},zAxis3D:{type:"value",name:"loss",axisLabel:{show:!1}},grid3D:{viewControl:{projection:"orthographic"}},series:[{type:"surface",tooltip:{show:!1},wireframe:{show:!0},data:[]},{type:"scatter3D",data:[[this.w,this.b,this.compute_loss(this.w,this.b)]],symbolSize:20}]},this.nPoints=100}ngOnInit(){this.distribute_points(),this.update_fx()}distribute_points(){this.lin_separability?(this.ptClass1=sI(this.nPoints,{x:5,y:-5},{x:4,y:4}),this.ptClass2=sI(this.nPoints,{x:-5,y:5},{x:4,y:4})):(this.ptClass1=sI(this.nPoints,{x:0,y:0},{x:1,y:1}),this.ptClass2=sI(this.nPoints,{x:0,y:0},{x:.1,y:.1}),this.ptClass2.forEach(i=>{let s=Math.sqrt(i.x*i.x+i.y*i.y);i.x=i.x*(5+5/s),i.y=i.y*(5+5/s)}));let t={data:this.ptClass1.map(i=>({value:[tP(i.x,this.x_range[0],this.x_range[1]),tP(i.y,this.y_range[0],this.y_range[1])]}))},r={data:this.ptClass2.map(i=>({value:[tP(i.x,this.x_range[0],this.x_range[1]),tP(i.y,this.y_range[0],this.y_range[1])]}))};Array.isArray(this.data_chart.series)&&(this.data_chart.series[0].data=t.data,this.data_chart.series[1].data=r.data),this.loss_3d_data=this.get_3D_data(),this.option_3d_graph.series[0].data=this.loss_3d_data,this.update_charts()}update_charts(){this.echartInstance?.setOption(this.data_chart),this.echartInstance3D?.setOption(this.option_3d_graph)}get_3D_data(){let t=new Array;for(let i=0;i<=50;i++)for(let s=0;s<=50;s++){let d=this.w_min+i*(this.w_max-this.w_min)/50,p=this.b_min+s*(this.b_max-this.b_min)/50,v=this.compute_loss(d,p);t.push([d,p,v])}return t}onChartInit(t){this.echartInstance=t}onChartInit3D(t){this.echartInstance3D=t}update_b(t){t.value&&(this.b=t.value),this.update_fx()}update_w(t){t.value&&(this.w=t.value),this.update_fx()}update_fx(){let t=[this.x_range[0],this.w*this.x_range[0]+this.b],r=[this.x_range[1],this.w*this.x_range[1]+this.b];this.positiveBorder[0]=t,this.positiveBorder[1]=r,this.negativeBorder[0]=t,this.negativeBorder[1]=r,this.option_3d_graph.series[1].data=[[this.w,this.b,this.compute_loss(this.w,this.b)]],this.update_charts()}compute_loss_v2(t,r){let i=0,s=Math.sqrt(1+t*t);for(let d=0;d<this.nPoints;d++){let p=this.ptClass1[d],v=this.ptClass2[d];i+=Math.abs(p.y+p.x*t+r)/s,i+=Math.abs(v.y+v.x*t+r)/s}return i/this.nPoints}compute_loss(t,r){let i=0;Math.sqrt(1+t*t);for(let d=0;d<this.nPoints;d++){let p=this.ptClass1[d],v=this.ptClass2[d];i+=+(p.y-p.x*t-r>0),i+=+(v.y-v.x*t-r<0)}return 100*i/(2*this.nPoints)}change_points_distributions(t){this.lin_separability="linear"==t.value,this.distribute_points(),this.update_fx()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=qn({type:e,selectors:[["app-weights-loss"]],decls:16,vars:12,consts:[[3,"rightDrawer"],["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],["title","Slope",3,"max","min","step","value","input"],["title","Intercept",3,"max","min","step","value","input"],["name","fontStyle","aria-label","Font Style",3,"change"],["value","linear",3,"checked"],["value","non_linear"],["ngProjectAs","[centerContent]",5,["","centerContent",""]],["echarts","",1,"graph",3,"options","chartInit"]],template:function(t,r){1&t&&(st(0,"app-tutorial-template",0),Bi(1,1),st(2,"h3"),Qt(3," Tunable parameters "),dt(),st(4,"app-labelled-sliders",2),Yt("input",function(s){return r.update_w(s)}),dt(),st(5,"app-labelled-sliders",3),Yt("input",function(s){return r.update_b(s)}),dt(),st(6,"h3"),Qt(7," Samples distribution "),dt(),st(8,"mat-button-toggle-group",4),Yt("change",function(s){return r.change_points_distributions(s)}),st(9,"mat-button-toggle",5),Qt(10,"Linear"),dt(),st(11,"mat-button-toggle",6),Qt(12,"Circular"),dt()(),Vi(),Bi(13,7),st(14,"div",8),Yt("chartInit",function(s){return r.onChartInit(s)}),dt(),st(15,"div",8),Yt("chartInit",function(s){return r.onChartInit3D(s)}),dt(),Vi(),dt()),2&t&&(At("rightDrawer",!1),Et(4),At("max",r.w_max)("min",r.w_min)("step",.1)("value",r.w),Et(1),At("max",r.b_max)("min",r.b_min)("step",.1)("value",r.b),Et(4),At("checked",r.lin_separability),Et(5),At("options",r.data_chart),Et(1),At("options",r.option_3d_graph))},dependencies:[J1,HC,UC,_f,kB],styles:[".graph[_ngcontent-%COMP%]{aspect-ratio:1;width:30vw;background-color:#fff;border-radius:.25em;border-color:#000;margin:5%}.label-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:0 20px}.parameter-adjusting[_ngcontent-%COMP%]{margin:5px;border-radius:.5em;box-shadow:#0e1e251f 0 2px 4px,#0e1e2552 0 2px 16px}"]}),e})();const yj=new sn("CdkAccordion");let Koe=0,Qoe=(()=>{class e{constructor(t,r,i){this.accordion=t,this._changeDetectorRef=r,this._expansionDispatcher=i,this._openCloseAllSubscription=ve.EMPTY,this.closed=new En,this.opened=new En,this.destroyed=new En,this.expandedChange=new En,this.id="cdk-accordion-child-"+Koe++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=i.listen((s,d)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===d&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(t){t=Br(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=Br(t)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}}return e.\u0275fac=function(t){return new(t||e)(Xe(yj,12),Xe(da),Xe(SB))},e.\u0275dir=Sn({type:e,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[Kr([{provide:yj,useValue:void 0}])]}),e})(),qoe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({}),e})();const Joe=["body"];function ese(e,n){}const tse=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],nse=["mat-expansion-panel-header","*","mat-action-row"];function rse(e,n){1&e&&Rn(0,"span",2),2&e&&At("@indicatorRotate",zn()._getExpandedState())}const ise=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],ase=["mat-panel-title","mat-panel-description","*"],bj=new sn("MAT_ACCORDION"),xj="225ms cubic-bezier(0.4,0.0,0.2,1)",Cj={indicatorRotate:Qd("indicatorRotate",[yl("collapsed, void",xa({transform:"rotate(0deg)"})),yl("expanded",xa({transform:"rotate(180deg)"})),bl("expanded <=> collapsed, void => collapsed",Vl(xj))]),bodyExpansion:Qd("bodyExpansion",[yl("collapsed, void",xa({height:"0px",visibility:"hidden"})),yl("expanded",xa({height:"*",visibility:"visible"})),bl("expanded <=> collapsed, void => collapsed",Vl(xj))])},wj=new sn("MAT_EXPANSION_PANEL");let ose=(()=>{class e{constructor(t,r){this._template=t,this._expansionPanel=r}}return e.\u0275fac=function(t){return new(t||e)(Xe(dl),Xe(wj,8))},e.\u0275dir=Sn({type:e,selectors:[["ng-template","matExpansionPanelContent",""]]}),e})(),sse=0;const Sj=new sn("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let nP=(()=>{class e extends Qoe{constructor(t,r,i,s,d,p,v){super(t,r,i),this._viewContainerRef=s,this._animationMode=p,this._hideToggle=!1,this.afterExpand=new En,this.afterCollapse=new En,this._inputChanges=new te,this._headerId="mat-expansion-panel-header-"+sse++,this._bodyAnimationDone=new te,this.accordion=t,this._document=d,this._bodyAnimationDone.pipe(MC((_,C)=>_.fromState===C.fromState&&_.toState===C.toState)).subscribe(_=>{"void"!==_.fromState&&("expanded"===_.toState?this.afterExpand.emit():"collapsed"===_.toState&&this.afterCollapse.emit())}),v&&(this.hideToggle=v.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=Br(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(_l(null),Ki(()=>this.expanded&&!this._portal),go(1)).subscribe(()=>{this._portal=new PA(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,r=this._body.nativeElement;return t===r||r.contains(t)}return!1}}return e.\u0275fac=function(t){return new(t||e)(Xe(bj,12),Xe(da),Xe(SB),Xe(Ro),Xe(Rr),Xe(fs,8),Xe(Sj,8))},e.\u0275cmp=qn({type:e,selectors:[["mat-expansion-panel"]],contentQueries:function(t,r,i){if(1&t&&Li(i,ose,5),2&t){let s;ur(s=cr())&&(r._lazyContent=s.first)}},viewQuery:function(t,r){if(1&t&&Ai(Joe,5),2&t){let i;ur(i=cr())&&(r._body=i.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(t,r){2&t&&bi("mat-expanded",r.expanded)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[Kr([{provide:bj,useValue:void 0},{provide:wj,useExisting:e}]),Xn,Xi],ngContentSelectors:nse,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(t,r){1&t&&(Ui(tse),jr(0),st(1,"div",0,1),Yt("@bodyExpansion.done",function(s){return r._bodyAnimationDone.next(s)}),st(3,"div",2),jr(4,1),nr(5,ese,0,0,"ng-template",3),dt(),jr(6,2),dt()),2&t&&(Et(1),At("@bodyExpansion",r._getExpandedState())("id",r.id),Hr("aria-labelledby",r._headerId),Et(4),At("cdkPortalOutlet",r._portal))},dependencies:[RA],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[Cj.bodyExpansion]},changeDetection:0}),e})();class lse{}const use=AC(lse);let cV=(()=>{class e extends use{constructor(t,r,i,s,d,p,v){super(),this.panel=t,this._element=r,this._focusMonitor=i,this._changeDetectorRef=s,this._animationMode=p,this._parentChangeSubscription=ve.EMPTY;const _=t.accordion?t.accordion._stateChanges.pipe(Ki(C=>!(!C.hideToggle&&!C.togglePosition))):La;this.tabIndex=parseInt(v||"")||0,this._parentChangeSubscription=Oa(t.opened,t.closed,_,t._inputChanges.pipe(Ki(C=>!!(C.hideToggle||C.disabled||C.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(Ki(()=>t._containsFocus())).subscribe(()=>i.focusVia(r,"program")),d&&(this.expandedHeight=d.expandedHeight,this.collapsedHeight=d.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:Su(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,r){t?this._focusMonitor.focusVia(this._element,t,r):this._element.nativeElement.focus(r)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return e.\u0275fac=function(t){return new(t||e)(Xe(nP,1),Xe(Nr),Xe(nc),Xe(da),Xe(Sj,8),Xe(fs,8),Ls("tabindex"))},e.\u0275cmp=qn({type:e,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(t,r){1&t&&Yt("click",function(){return r._toggle()})("keydown",function(s){return r._keydown(s)}),2&t&&(Hr("id",r.panel._headerId)("tabindex",r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),no("height",r._getHeaderHeight()),bi("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[Xn],ngContentSelectors:ase,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(t,r){1&t&&(Ui(ise),st(0,"span",0),jr(1),jr(2,1),jr(3,2),dt(),nr(4,rse,1,1,"span",1)),2&t&&(bi("mat-content-hide-toggle",!r._showToggle()),Et(4),At("ngIf",r._showToggle()))},dependencies:[zs],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[Cj.indicatorRotate]},changeDetection:0}),e})(),dV=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Sn({type:e,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),e})(),cse=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({imports:[kl,oi,qoe,cy]}),e})();const dse=["canvas"];function hse(e,n){1&e&&(st(0,"mat-icon"),Qt(1,"visibility"),dt())}function fse(e,n){1&e&&(st(0,"mat-icon"),Qt(1,"visibility_off"),dt())}function pse(e,n){if(1&e&&(st(0,"td"),Qt(1),dt()),2&e){const t=n.index,r=zn().index,i=zn();Et(1),Za(" ",i.getFormattedValue(r,t)," ")}}const Dj=function(){return[]};function vse(e,n){if(1&e&&(st(0,"tr"),nr(1,pse,2,1,"td",17),dt()),2&e){const t=zn();Et(1),At("ngForOf",Rd(1,Dj).constructor(t.kernel.size))}}const gse=function(e,n){return{activated:e,deactivated:n}};let mse=(()=>{class e{constructor(){this.updateFilters=new En}ngOnInit(){this.kernel.delete=!1;const t=this.canvas.nativeElement;this.ctx=t.getContext("2d",{alpha:!1}),t.width=this.kernel.size,t.height=this.kernel.size,this.ctx.canvas.width=this.kernel.size,this.ctx.canvas.height=this.kernel.size,this.drawFilter()}delete(t){t.stopPropagation(),this.kernel.delete=!0,this.updateFilters.emit()}toggleActive(t){t.stopPropagation(),this.kernel.active=!this.kernel.active,this.updateFilters.emit()}drawFilter(){let t=new Uint8ClampedArray(this.kernel.size*this.kernel.size*4);for(let i=0;i<this.kernel.size;i++)for(let s=0;s<this.kernel.size;s++){const d=this.kernel.element[i*this.kernel.size+s];t[4*i*this.kernel.size+4*s]=d,t[4*i*this.kernel.size+4*s+1]=d,t[4*i*this.kernel.size+4*s+2]=d,t[4*i*this.kernel.size+4*s+3]=255}let r=new ImageData(t,this.kernel.size,this.kernel.size);this.ctx.putImageData(r,0,0)}getFormattedValue(t,r){return(this.kernel.element[t*this.kernel.size+r]/255).toFixed(0)}updateFilter(){this.updateFilters.emit(!0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=qn({type:e,selectors:[["app-structural-element"]],viewQuery:function(t,r){if(1&t&&Ai(dse,7),2&t){let i;ur(i=cr())&&(r.canvas=i.first)}},inputs:{kernel:"kernel"},outputs:{updateFilters:"updateFilters"},decls:35,vars:9,consts:[[3,"ngClass"],["panelH",""],["mat-mini-fab","","color","accent",1,"action-button",3,"click"],[4,"ngIf"],["appearance","fill",3,"click"],[3,"ngModel","ngModelChange"],["value","erosion"],["value","dilation"],["value","opening"],["value","closing"],["value","tophat"],["value","gradient"],["value","skeletonize"],["mat-mini-fab","","color","warn",1,"action-button",3,"click"],[1,"vertical-flex","center"],[1,"rounded-table"],[3,"mouseenter"],[4,"ngFor","ngForOf"],["canvas",""]],template:function(t,r){if(1&t){const i=na();st(0,"mat-expansion-panel",0,1)(2,"mat-expansion-panel-header")(3,"mat-panel-title")(4,"button",2),Yt("click",function(d){return r.toggleActive(d)}),nr(5,hse,2,0,"mat-icon",3),nr(6,fse,2,0,"mat-icon",3),dt(),st(7,"span")(8,"mat-form-field",4),Yt("click",function(){return Tr(i),Er(pi(1).toggle())}),st(9,"mat-label"),Qt(10,"Operation"),dt(),st(11,"mat-select",5),Yt("ngModelChange",function(d){return r.kernel.morphOp=d})("ngModelChange",function(){return r.updateFilter()}),st(12,"mat-option",6),Qt(13,"Erosion"),dt(),st(14,"mat-option",7),Qt(15,"Dilation"),dt(),st(16,"mat-option",8),Qt(17,"Opening"),dt(),st(18,"mat-option",9),Qt(19,"Closing"),dt(),st(20,"mat-option",10),Qt(21,"Top Hat"),dt(),st(22,"mat-option",11),Qt(23,"Gradient"),dt(),st(24,"mat-option",12),Qt(25,"Skeletonize"),dt()()()(),st(26,"button",13),Yt("click",function(d){return r.delete(d)}),st(27,"mat-icon"),Qt(28,"close"),dt()()()(),st(29,"div",14)(30,"div",15)(31,"table",16),Yt("mouseenter",function(){return r.drawFilter()}),nr(32,vse,2,2,"tr",17),dt()(),Rn(33,"canvas",null,18),dt()()}2&t&&(At("ngClass",Zh(5,gse,r.kernel.active,!r.kernel.active)),Et(5),At("ngIf",r.kernel.active),Et(1),At("ngIf",!r.kernel.active),Et(5),At("ngModel",r.kernel.morphOp),Et(21),At("ngForOf",Rd(8,Dj).constructor(r.kernel.size)))},dependencies:[BC,_y,bW,uB,Wd,Gc,zs,sf,uf,nP,cV,dV,Fl,qd],styles:["mat-expansion-panel-header[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content}canvas[_ngcontent-%COMP%]{width:128px;aspect-ratio:1;image-rendering:-webkit-crisp-edges;image-rendering:pixelated;image-rendering:crisp-edges;box-shadow:#0000001f 0 1px 3px,#0000003d 0 1px 2px;border-radius:.5em}.title-span[_ngcontent-%COMP%]{margin:auto}tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#646464}.horizontal-flex[_ngcontent-%COMP%]{width:100%}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#6f9b75}td[_ngcontent-%COMP%]{font-size:small}.center[_ngcontent-%COMP%]{align-items:center;gap:1em}.deactivated[_ngcontent-%COMP%]:not(button){filter:brightness(.7);border:solid white 1px}.rounded-table[_ngcontent-%COMP%]{overflow:hidden;box-shadow:#0000001f 0 1px 3px,#0000003d 0 1px 2px;aspect-ratio:1;overflow:scroll}button[_ngcontent-%COMP%]{transform:scale(.5)}"]}),e})();const _se=["elementCanvasVisu"];function yse(e,n){if(1&e){const t=na();st(0,"app-structural-element",19),Yt("updateFilters",function(){return Tr(t),Er(zn().updateFilters())}),dt()}2&e&&At("kernel",n.$implicit)}let bse=(()=>{class e extends Mu{constructor(){super(...arguments),this.listKernels=new Array,this.ksize=3,this.structuralElementType="circle",this.width=256}ngAfterViewInit(){this.cleanFilterList(),this.updateVisu()}updateVisu(){this.ngxOpenCv.cvState.subscribe(t=>{if(this.cvState=t.state,t.ready){let r=this.getStructuringMat(this.ksize,this.structuralElementType);cv.convertScaleAbs(r,r,255);let i=32-this.ksize;cv.copyMakeBorder(r,r,i,i,i,i,cv.BORDER_CONSTANT),cv.imshow(this.eltCanvasVisu.nativeElement,r),r.delete()}})}applyFilter(){let t=cv.imread(this.drawCanvas.getCanvas()),r=new cv.Point(-1,-1),i=new cv.Mat;cv.cvtColor(t,i,cv.COLOR_RGB2GRAY),this.listKernels.forEach(s=>{if(!s.active)return;const d=s.size;let p=cv.matFromArray(d,d,cv.CV_8UC1,s.element);switch(s.morphOp){case"erosion":cv.erode(i,i,p,r,1,cv.BORDER_CONSTANT,cv.morphologyDefaultBorderValue());break;case"dilation":cv.dilate(i,i,p,r,1,cv.BORDER_CONSTANT,cv.morphologyDefaultBorderValue());break;case"opening":cv.morphologyEx(i,i,cv.MORPH_OPEN,p,r,1,cv.BORDER_CONSTANT,cv.morphologyDefaultBorderValue());break;case"closing":cv.morphologyEx(i,i,cv.MORPH_CLOSE,p);break;case"gradient":cv.morphologyEx(i,i,cv.MORPH_GRADIENT,p);break;case"tophat":cv.morphologyEx(i,i,cv.MORPH_TOPHAT,p);break;case"skeletonize":for(var v=new cv.Mat(this.width,this.width,cv.CV_8UC1,new cv.Scalar(0)),_=new cv.Mat,C=new cv.Mat,S=!1,k=50;!S&&k>0;)cv.erode(i,C,p),cv.dilate(C,_,p),cv.subtract(i,_,_),cv.bitwise_or(v,_,v),C.copyTo(i),S=0==cv.norm(i),k--;v.copyTo(i),v.delete(),_.delete(),C.delete()}p.delete()}),this.outputCanvas.drawMat(i),i.delete(),t.delete()}updateFilters(){this.listKernels=this.listKernels.filter(t=>!t.delete),this.applyFilter()}cleanFilterList(){this.listKernels=new Array}getStructuringMat(t,r){let i=new cv.Size(t,t);switch(r){case"circle":var s=cv.getStructuringElement(cv.MORPH_ELLIPSE,i);break;case"square":s=cv.getStructuringElement(cv.MORPH_RECT,i);break;case"cross":s=cv.getStructuringElement(cv.MORPH_CROSS,i)}return s}addFilter(){let t=this.getStructuringMat(this.ksize,this.structuralElementType);cv.convertScaleAbs(t,t,255);let r="erosion",i=this.listKernels.length;i>0&&(r=this.listKernels[i-1].morphOp);const s=new Uint8ClampedArray(t.data,t.cols,t.rows);this.listKernels.push({morphOp:r,size:this.ksize,element:s,active:!0,delete:!1}),t.delete(),this.updateFilters()}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=ta(e)))(r||e)}}(),e.\u0275cmp=qn({type:e,selectors:[["app-morpho-tools"]],viewQuery:function(t,r){if(1&t&&Ai(_se,7),2&t){let i;ur(i=cr())&&(r.eltCanvasVisu=i.first)}},features:[Xn],decls:35,vars:16,consts:[["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],["title","Brush Size"],["brushSizeSlider",""],[3,"min","max","step","title","value","valueChange"],[3,"ngModel","ngModelChange","change"],["value","circle"],["value","square"],["value","cross"],[1,"structuralElementVisu"],["elementCanvasVisu",""],["mat-raised-button","","color","primary",1,"fillWidth",3,"click"],["ngProjectAs","[drawerRight]",5,["","drawerRight",""]],["echarts","",1,"profile-graph",3,"options"],[3,"kernel","updateFilters",4,"ngFor","ngForOf"],["ngProjectAs","[centerContent]",5,["","centerContent",""]],["title","Canvas",1,"canvas",3,"width","drawable","BWOption","OnlyBW","brushRadius","drawingEnded"],["inputCanvas",""],["title","Result",1,"canvas",3,"width","profileOption","drawable","profileChanged"],["outputCanvas",""],[3,"kernel","updateFilters"]],template:function(t,r){if(1&t&&(st(0,"app-tutorial-template-images"),Qt(1," Morphological Transformations "),Bi(2,0),Rn(3,"app-labelled-sliders",1,2)(5,"hr"),st(6,"app-labelled-sliders",3),Yt("valueChange",function(s){return r.ksize=s})("valueChange",function(){return r.updateVisu()}),dt(),st(7,"span")(8,"mat-button-toggle-group",4),Yt("ngModelChange",function(s){return r.structuralElementType=s})("change",function(){return r.updateVisu()}),st(9,"mat-button-toggle",5)(10,"mat-icon"),Qt(11,"toll"),dt()(),st(12,"mat-button-toggle",6)(13,"mat-icon"),Qt(14,"crop_square"),dt()(),st(15,"mat-button-toggle",7)(16,"mat-icon"),Qt(17,"games"),dt()()()(),Rn(18,"canvas",8,9),st(20,"button",10),Yt("click",function(){return r.addFilter()}),Qt(21," Add "),dt(),Vi(),Bi(22,11),st(23,"h2"),Qt(24,"Profile"),dt(),Rn(25,"div",12),st(26,"h2"),Qt(27,"Active filters"),dt(),Rn(28,"hr"),nr(29,yse,1,1,"app-structural-element",13),Vi(),Bi(30,14),st(31,"app-draw-canvas",15,16),Yt("drawingEnded",function(){return r.applyFilter()}),dt(),st(33,"app-draw-canvas",17,18),Yt("profileChanged",function(){return r.updateProfile()}),dt(),Vi(),dt()),2&t){const i=pi(4);Et(6),At("min",3)("max",25)("step",2)("title","Element size")("value",r.ksize),Et(2),At("ngModel",r.structuralElementType),Et(17),At("options",r.profileOptions),Et(4),At("ngForOf",r.listKernels),Et(2),At("width",r.width)("drawable",!0)("BWOption",!1)("OnlyBW",!0)("brushRadius",i.value),Et(2),At("width",r.width)("profileOption",!0)("drawable",!1)}},dependencies:[J1,HC,UC,Gc,sf,uf,Fl,qd,Sy,_f,mse,Mu],styles:[".canvas[_ngcontent-%COMP%]{width:45%;min-width:256px;image-rendering:-webkit-crisp-edges;image-rendering:pixelated;image-rendering:crisp-edges}.structuralElementVisu[_ngcontent-%COMP%]{width:128px;aspect-ratio:1;image-rendering:-webkit-crisp-edges;image-rendering:pixelated;image-rendering:crisp-edges;margin:1em}.profile-graph[_ngcontent-%COMP%]{min-width:300px;padding:0 .5em}"]}),e})(),xse=(()=>{class e{constructor(){this.n_points=1e3,this.t_start=0,this.t_stop=10,this.t_basis=PW(this.t_start,this.t_stop,this.n_points),this.fe=1,this.original_data=Array(this.n_points),this.sampled_data=Array(this.n_points),this.original_fft=Array(this.n_points),this.sampled_fft=Array(this.n_points)}ngOnInit(){this.fillData();let t={xAxis:{min:this.t_start,max:this.t_stop},yAxis:{min:-3,max:5.5}};this.original_graph=Object.assign({},t),this.original_graph.series=[{data:this.original_data,type:"line",showSymbol:!1},{data:this.sampled_data,type:"line",showSymbol:!1}],this.sampled_graph=Object.assign({},t),this.sampled_graph.series=[{data:this.sampled_data,type:"line",showSymbol:!0}]}fillData(){for(let t=0;t<this.n_points;t++){let r=this.t_basis[t];this.original_data[t]=[r,this.signal(r)]}this.resample_signal()}resample_signal(){let r=Math.round(this.t_stop/(1/this.fe)),i=PW(this.t_start,this.t_stop,r+1);this.sampled_data=new Array(r+1);for(let s=0;s<=r;s++){let d=i[s];this.sampled_data[s]=[d,this.signal(d)]}}signal(t){return(5*Math.sin(t)+Math.sin(5*t)+.5*Math.sin(25*t))*Math.exp(.2*-t)}update_fe(t){t&&(this.fe=t,this.resample_signal(),Array.isArray(this.sampled_graph.series)&&(this.sampled_graph.series[0].data=this.sampled_data,this.echartInstanceSampledGraph?.setOption(this.sampled_graph)))}onSampledChartInit(t){this.echartInstanceSampledGraph=t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=qn({type:e,selectors:[["app-sampling"]],decls:10,vars:6,consts:[[3,"rightDrawer"],["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],["title","Sampling frequency",3,"value","input"],["ngProjectAs","[centerContent]",5,["","centerContent",""]],[1,"grid-2x2"],["echarts","",1,"graph",3,"options"],["echarts","",1,"graph",3,"options","chartInit"]],template:function(t,r){1&t&&(st(0,"app-tutorial-template",0),Qt(1," Sampling Frequency and Nyquist-Shannon Theorem "),Bi(2,1),st(3,"app-labelled-sliders",2),Yt("input",function(s){return r.update_fe(s.value)}),dt(),Vi(),Bi(4,3),st(5,"div",4),Rn(6,"div",5),st(7,"div",6),Yt("chartInit",function(s){return r.onSampledChartInit(s)}),dt(),Rn(8,"div",5)(9,"div",5),dt(),Vi(),dt()),2&t&&(At("rightDrawer",!1),Et(3),At("value",r.fe),Et(3),At("options",r.original_graph),Et(1),At("options",r.sampled_graph),Et(1),At("options",r.original_fft_graph),Et(1),At("options",r.sampled_fft_graph))},dependencies:[J1,_f,kB],styles:[".graph[_ngcontent-%COMP%]{width:30vw;height:40vh;background-color:#fff;border:solid black 2px;margin:2px}.grid-2x2[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr)}"]}),e})();class rg{static getGaussianKernel(n,t,r=1,i=1){const s=((n=n%2==0?n+1:n)-1)/2,d=((t=t%2==0?t+1:t)-1)/2,p=Math.sqrt(2);let v=new Array;for(let C=0;C<n;C++)for(let S=0;S<t;S++){const k=Math.exp(-Math.pow((C-s)/(p*r),2)-Math.pow((S-d)/(p*i),2));v.push(k)}const _=v.reduce((C,S)=>C+S,0);return v=v.map(C=>C/_),{width:n,height:t,active:!0,mat:[v],name:"Gaussian"}}static getMeanKernel(n,t){return{width:n,height:t,active:!0,mat:[new Array(n*t).fill(1/(n*t))],name:"Mean"}}static getSobelKernels(){return{width:3,height:3,active:!0,mat:[[1,0,-1,2,0,-2,1,0,-1],[1,2,1,0,0,0,-1,-2,-1]],name:"Sobel"}}static getPrewittKernels(){return{width:3,height:3,active:!0,mat:[[1,0,-1,1,0,-1,1,0,-1],[1,1,1,0,0,0,-1,-1,-1]],name:"Prewitt"}}static getLaplacianKernel(){return{width:3,height:3,active:!0,mat:[[-1,-1,-1,-1,8,-1,-1,-1,-1]],name:"Laplacian"}}static getAdditiveKernel(n){return{width:1,height:1,active:!0,mat:[[n]],name:"Add"}}static getMultiplicativeKernel(n){return{width:1,height:1,active:!0,mat:[[n]],name:"Multiply"}}}const Cse=["canvas"];function wse(e,n){1&e&&(st(0,"mat-icon"),Qt(1,"visibility"),dt())}function Sse(e,n){1&e&&(st(0,"mat-icon"),Qt(1,"visibility_off"),dt())}function Dse(e,n){if(1&e&&(st(0,"td"),Qt(1),dt()),2&e){const t=n.index,r=zn().index,i=zn().$implicit,s=zn();Et(1),Za(" ",i[r*s.kernel.width+t].toFixed(2)," ")}}const Mj=function(){return[]};function Mse(e,n){if(1&e&&(st(0,"tr"),nr(1,Dse,2,1,"td",10),dt()),2&e){const t=zn(2);Et(1),At("ngForOf",Rd(1,Mj).constructor(t.kernel.width))}}function Tse(e,n){if(1&e){const t=na();st(0,"div",8)(1,"table",9),Yt("mouseenter",function(){const s=Tr(t).$implicit;return Er(zn().drawFilter(s))}),nr(2,Mse,2,2,"tr",10),dt()()}if(2&e){const t=zn();Et(2),At("ngForOf",Rd(1,Mj).constructor(t.kernel.height))}}const Ese=function(e,n){return{activated:e,deactivated:n}};let Ase=(()=>{class e{constructor(){this.updateFilters=new En}ngOnInit(){this.kernel.delete=!1;const t=this.canvas.nativeElement;this.ctx=t.getContext("2d"),this.width=this.kernel.width,this.height=this.kernel.height,t.width=this.width,t.height=this.height,this.ctx.canvas.width=this.width,this.ctx.canvas.height=this.height,this.drawFilter(this.kernel.mat[0])}delete(t){t.stopPropagation(),this.kernel.delete=!0,this.updateFilters.emit()}toggleActive(t){t.stopPropagation(),this.kernel.active=!this.kernel.active,this.updateFilters.emit()}drawFilter(t){let r=new Uint8ClampedArray(4*t.length),i=t.reduce(function(p,v){return p>v?p:v}),s=t.reduce(function(p,v){return p<v?p:v});s==i&&(s=0,i=1);for(let p=0;p<t.length;p++){const v=4*p,_=Math.round(255*(t[p]-s)/(i-s));r[v]=_,r[v+1]=_,r[v+2]=_,r[v+3]=255}let d=new ImageData(r,this.kernel.width,this.kernel.height);this.ctx.putImageData(d,0,0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=qn({type:e,selectors:[["app-kernel-element"]],viewQuery:function(t,r){if(1&t&&Ai(Cse,7),2&t){let i;ur(i=cr())&&(r.canvas=i.first)}},inputs:{kernel:"kernel"},outputs:{updateFilters:"updateFilters"},decls:15,vars:8,consts:[[3,"ngClass"],["mat-mini-fab","","color","accent",1,"action-button",3,"click"],[4,"ngIf"],[1,"title-span"],["mat-mini-fab","","color","warn",1,"action-button",3,"click"],[1,"vertical-flex","center"],["class","rounded-table",4,"ngFor","ngForOf"],["canvas",""],[1,"rounded-table"],[3,"mouseenter"],[4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(st(0,"mat-expansion-panel",0)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"button",1),Yt("click",function(s){return r.toggleActive(s)}),nr(4,wse,2,0,"mat-icon",2),nr(5,Sse,2,0,"mat-icon",2),dt(),st(6,"span",3),Qt(7),dt(),st(8,"button",4),Yt("click",function(s){return r.delete(s)}),st(9,"mat-icon"),Qt(10,"close"),dt()()()(),st(11,"div",5),nr(12,Tse,3,2,"div",6),Rn(13,"canvas",null,7),dt()()),2&t&&(At("ngClass",Zh(5,Ese,r.kernel.active,!r.kernel.active)),Et(4),At("ngIf",r.kernel.active),Et(1),At("ngIf",!r.kernel.active),Et(2),Za(" ",r.kernel.name," "),Et(5),At("ngForOf",r.kernel.mat))},dependencies:[Wd,Gc,zs,nP,cV,dV,Fl,qd],styles:["canvas[_ngcontent-%COMP%]{width:128px;aspect-ratio:1;image-rendering:-webkit-crisp-edges;image-rendering:pixelated;image-rendering:crisp-edges;box-shadow:#0000001f 0 1px 3px,#0000003d 0 1px 2px;border-radius:.5em}.title-span[_ngcontent-%COMP%]{margin:auto}tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#646464}.horizontal-flex[_ngcontent-%COMP%]{width:100%}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#6f9b75}td[_ngcontent-%COMP%]{font-size:small}.center[_ngcontent-%COMP%]{align-items:center;gap:1em}.deactivated[_ngcontent-%COMP%]:not(button){filter:brightness(.7);border:solid white 1px}.rounded-table[_ngcontent-%COMP%]{border-radius:.75em;overflow:hidden;box-shadow:#0000001f 0 1px 3px,#0000003d 0 1px 2px}button[_ngcontent-%COMP%]{transform:scale(.5)}"]}),e})();function Ise(e,n){if(1&e){const t=na();st(0,"button",25),Yt("click",function(){return Tr(t),Er(zn().cleanFilterList())}),Qt(1," Clear "),dt()}}function Pse(e,n){if(1&e){const t=na();st(0,"app-kernel-element",26),Yt("updateFilters",function(){return Tr(t),Er(zn().updateFilters())}),dt()}2&e&&At("kernel",n.$implicit)}const Rse=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:hX},{path:"fourierTransform",component:Cee},{path:"spatialFiltering",component:(()=>{class e extends Mu{updateFilters(){this.listKernels=this.listKernels.filter(t=>!t.delete),this.applyFilter()}ngAfterContentInit(){super.ngAfterContentInit(),this.listKernels=new Array}laplacianFilter(){this.listKernels.push(rg.getLaplacianKernel()),this.applyFilter()}gaussianBlur(t,r,i){this.listKernels.push(rg.getGaussianKernel(t,t,r,i)),this.applyFilter()}meanFilter(t){this.listKernels.push(rg.getMeanKernel(t,t)),this.applyFilter()}prewittFilter(){this.listKernels.push(rg.getPrewittKernels()),this.applyFilter()}sobelFilter(){this.listKernels.push(rg.getSobelKernels()),this.applyFilter()}additiveFilter(t){this.listKernels.push(rg.getAdditiveKernel(t)),this.applyFilter()}multiplyFilter(t){this.listKernels.push(rg.getMultiplicativeKernel(t)),this.applyFilter()}cleanFilterList(){this.listKernels=new Array,this.applyFilter()}applyFilter(){let t=cv.imread(this.drawCanvas.getCanvas()),r=new cv.Mat;t.convertTo(r,cv.CV_32F,1/255),cv.cvtColor(r,r,cv.COLOR_RGB2GRAY),this.listKernels.forEach(i=>{if(i.active)if("Add"==i.name)r.convertTo(r,-1,1,i.mat[0][0]);else if("Multiply"==i.name)r.convertTo(r,-1,i.mat[0][0],0);else if(2==i.mat.length){let s=cv.matFromArray(i.width,i.height,cv.CV_32F,i.mat[0]),d=new cv.Mat;cv.filter2D(r,d,-1,s),cv.pow(d,2,d),s=cv.matFromArray(i.width,i.height,cv.CV_32F,i.mat[1]);let p=new cv.Mat;cv.filter2D(r,p,-1,s),cv.pow(p,2,p),cv.add(d,p,r),cv.pow(r,.5,r),s.delete(),d.delete(),p.delete()}else{let s=cv.matFromArray(i.width,i.height,cv.CV_32F,i.mat[0]);cv.filter2D(r,r,-1,s),s.delete()}}),cv.convertScaleAbs(r,r,255),cv.imshow(this.outputCanvas.getCanvas(),r),t.delete(),r.delete()}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=ta(e)))(r||e)}}(),e.\u0275cmp=qn({type:e,selectors:[["app-spatial-filtering"]],features:[Xn],decls:99,vars:32,consts:[["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],["title","Brush Size"],["brushSizeSlider",""],[1,"filter-name"],["mat-mini-fab","","color","accent",1,"action-button",3,"click"],["title","Addition factor",3,"max","min","value","step"],["additiveFilterSlider",""],["mat-raised-button","","color","primary",1,"add-button",3,"click"],["title","Multiplication factor",3,"max","min","value","step"],["multiplyFilterSlider",""],["title","Kernel size",3,"max","min","value","step"],["meanFilterSlider",""],["gaussSizeSlider",""],["title","STD X",3,"max","min","value","step"],["gaussSTDSliderX",""],["title","STD Y",3,"max","min","value","step"],["gaussSDTSliderY",""],["ngProjectAs","[drawerRight]",5,["","drawerRight",""]],["mat-raised-button","","color","warn","class","fillWidth",3,"click",4,"ngIf"],[3,"kernel","updateFilters",4,"ngFor","ngForOf"],["ngProjectAs","[centerContent]",5,["","centerContent",""]],["title","Canvas",1,"canvas",3,"width","drawable","BWOption","brushRadius","drawingEnded"],["inputCanvas",""],["title","Filtered canvas",1,"canvas",3,"width","drawable"],["outputCanvas",""],["mat-raised-button","","color","warn",1,"fillWidth",3,"click"],[3,"kernel","updateFilters"]],template:function(t,r){if(1&t){const i=na();st(0,"app-tutorial-template-images"),Qt(1," Spatial filtering "),Bi(2,0),Rn(3,"app-labelled-sliders",1,2)(5,"hr"),st(6,"mat-expansion-panel")(7,"mat-expansion-panel-header")(8,"mat-panel-title")(9,"span",3)(10,"button",4),Yt("click",function(d){Tr(i);const p=pi(15);return r.additiveFilter(p.value),Er(d.stopPropagation())}),st(11,"mat-icon"),Qt(12," add "),dt()(),Qt(13," Brightness "),dt()()(),Rn(14,"app-labelled-sliders",5,6),st(16,"button",7),Yt("click",function(){Tr(i);const d=pi(15);return Er(r.additiveFilter(d.value))}),Qt(17," Add "),dt()(),st(18,"mat-expansion-panel")(19,"mat-expansion-panel-header")(20,"mat-panel-title")(21,"span",3)(22,"button",4),Yt("click",function(d){Tr(i);const p=pi(27);return r.multiplyFilter(p.value),Er(d.stopPropagation())}),st(23,"mat-icon"),Qt(24," add "),dt()(),Qt(25," Contrast "),dt()()(),Rn(26,"app-labelled-sliders",8,9),st(28,"button",7),Yt("click",function(){Tr(i);const d=pi(27);return Er(r.multiplyFilter(d.value))}),Qt(29," Add "),dt()(),st(30,"mat-expansion-panel")(31,"mat-expansion-panel-header")(32,"mat-panel-title")(33,"span",3)(34,"button",4),Yt("click",function(d){Tr(i);const p=pi(39);return r.meanFilter(p.value),Er(d.stopPropagation())}),st(35,"mat-icon"),Qt(36," add "),dt()(),Qt(37," Mean blur "),dt()()(),Rn(38,"app-labelled-sliders",10,11),st(40,"button",7),Yt("click",function(){Tr(i);const d=pi(39);return Er(r.meanFilter(d.value))}),Qt(41," Add "),dt()(),st(42,"mat-expansion-panel")(43,"mat-expansion-panel-header")(44,"mat-panel-title")(45,"span",3)(46,"button",4),Yt("click",function(d){Tr(i);const p=pi(51),v=pi(53),_=pi(55);return r.gaussianBlur(p.value,v.value,_.value),Er(d.stopPropagation())}),st(47,"mat-icon"),Qt(48," add "),dt()(),Qt(49," Gaussian blur "),dt()()(),Rn(50,"app-labelled-sliders",10,12)(52,"app-labelled-sliders",13,14)(54,"app-labelled-sliders",15,16),st(56,"button",7),Yt("click",function(){Tr(i);const d=pi(51),p=pi(53),v=pi(55);return Er(r.gaussianBlur(d.value,p.value,v.value))}),Qt(57," Add "),dt()(),st(58,"mat-expansion-panel")(59,"mat-expansion-panel-header")(60,"mat-panel-title")(61,"span",3)(62,"button",4),Yt("click",function(d){return r.prewittFilter(),d.stopPropagation()}),st(63,"mat-icon"),Qt(64," add "),dt()(),Qt(65," Prewitt Filter "),dt()()(),st(66,"button",7),Yt("click",function(){return r.prewittFilter()}),Qt(67," Add "),dt()(),st(68,"mat-expansion-panel")(69,"mat-expansion-panel-header")(70,"mat-panel-title")(71,"span",3)(72,"button",4),Yt("click",function(d){return r.sobelFilter(),d.stopPropagation()}),st(73,"mat-icon"),Qt(74," add "),dt()(),Qt(75," Sobel Filter "),dt()()(),st(76,"button",7),Yt("click",function(){return r.sobelFilter()}),Qt(77," Add "),dt()(),st(78,"mat-expansion-panel")(79,"mat-expansion-panel-header")(80,"mat-panel-title")(81,"span",3)(82,"button",4),Yt("click",function(d){return r.laplacianFilter(),d.stopPropagation()}),st(83,"mat-icon"),Qt(84," add "),dt()(),Qt(85," Laplacian Filter "),dt()()(),st(86,"button",7),Yt("click",function(){return r.laplacianFilter()}),Qt(87," Add "),dt()(),Vi(),Bi(88,17),st(89,"h2"),Qt(90,"Active filters"),dt(),nr(91,Ise,2,0,"button",18),Rn(92,"hr"),nr(93,Pse,1,1,"app-kernel-element",19),Vi(),Bi(94,20),st(95,"app-draw-canvas",21,22),Yt("drawingEnded",function(){return r.applyFilter()}),dt(),Rn(97,"app-draw-canvas",23,24),Vi(),dt()}if(2&t){const i=pi(4);Et(14),At("max",1)("min",-1)("value",0)("step",.1),Et(12),At("max",5)("min",0)("value",1)("step",.1),Et(12),At("max",9)("min",3)("value",3)("step",2),Et(12),At("max",15)("min",3)("value",9)("step",2),Et(2),At("max",15)("min",0)("value",2)("step",.5),Et(2),At("max",15)("min",0)("value",2)("step",.5),Et(37),At("ngIf",r.listKernels.length),Et(2),At("ngForOf",r.listKernels),Et(2),At("width",512)("drawable",!0)("BWOption",!0)("brushRadius",i.value),Et(2),At("width",512)("drawable",!1)}},dependencies:[Gc,zs,nP,cV,dV,Fl,qd,Sy,Ase,_f,Mu],styles:[".filter-name[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{transform:scale(.5)}.add-button[_ngcontent-%COMP%]{width:100%}mat-expansion-panel[_ngcontent-%COMP%]{width:100%}.canvas[_ngcontent-%COMP%]{width:45%;min-width:256px}"]}),e})()},{path:"colorspaces",component:pee},{path:"morphology",component:bse},{path:"histogram",component:wee},{path:"weightLoss",component:$oe},{path:"sampling",component:xse},{path:"spectralFiltering",component:(()=>{class e extends Mu{constructor(){super(...arguments),this.width=256}updateFFT(){let t=cv.imread(this.drawCanvas.getCanvas());cv.cvtColor(t,t,cv.COLOR_RGBA2GRAY,0);let r=cv.getOptimalDFTSize(t.rows),i=cv.getOptimalDFTSize(t.cols),s=cv.Scalar.all(0),d=new cv.Mat;cv.copyMakeBorder(t,d,0,r-t.rows,0,i-t.cols,cv.BORDER_CONSTANT,s);let p=new cv.Mat;d.convertTo(p,cv.CV_32F);let v=new cv.MatVector,_=new cv.Mat,C=new cv.Mat.zeros(d.rows,d.cols,cv.CV_32F);v.push_back(p),v.push_back(C),cv.merge(v,_),cv.dft(_,_,cv.DFT_SCALE),cv.split(_,v),cv.magnitude(v.get(0),v.get(1),v.get(0));let S=v.get(0),k=new cv.Mat.ones(S.rows,S.cols,S.type());cv.add(S,k,S),cv.log(S,S);let H=new cv.Rect(0,0,-2&S.cols,-2&S.rows);S=S.roi(H);let ne=S.cols/2,pe=S.rows/2,Me=new cv.Mat,Re=new cv.Rect(0,0,ne,pe),Fe=new cv.Rect(ne,0,ne,pe),Oe=new cv.Rect(0,pe,ne,pe),Be=new cv.Rect(ne,pe,ne,pe),nt=S.roi(Re),rt=S.roi(Fe),Ct=S.roi(Oe),mt=S.roi(Be);nt.copyTo(Me),mt.copyTo(nt),Me.copyTo(mt),rt.copyTo(Me),Ct.copyTo(rt),Me.copyTo(Ct),cv.normalize(S,S,0,1,cv.NORM_MINMAX),this.outputCanvas.drawMat(S),t.delete(),d.delete(),v.delete(),_.delete(),k.delete(),Me.delete()}updateIFFT(){let t=cv.imread(this.drawCanvas.getCanvas());cv.cvtColor(t,t,cv.COLOR_RGBA2GRAY,0);let r=cv.getOptimalDFTSize(t.rows),i=cv.getOptimalDFTSize(t.cols),s=cv.Scalar.all(0),d=new cv.Mat;cv.copyMakeBorder(t,d,0,r-t.rows,0,i-t.cols,cv.BORDER_CONSTANT,s);let p=new cv.Mat;d.convertTo(p,cv.CV_32F);let v=new cv.MatVector,_=new cv.Mat,C=new cv.Mat.zeros(d.rows,d.cols,cv.CV_32F);v.push_back(p),v.push_back(C),cv.merge(v,_),cv.dft(_,_);let S=cv.imread(this.outputCanvas.getCanvas());cv.cvtColor(S,S,cv.COLOR_RGBA2GRAY,0);let k=new cv.Rect(0,0,-2&S.cols,-2&S.rows);S=S.roi(k);let H=S.cols/2,ne=S.rows/2,pe=new cv.Mat,Me=new cv.Rect(0,0,H,ne),Re=new cv.Rect(H,0,H,ne),Fe=new cv.Rect(0,ne,H,ne),Oe=new cv.Rect(H,ne,H,ne),Be=S.roi(Me),nt=S.roi(Re),rt=S.roi(Fe),Ct=S.roi(Oe);Be.copyTo(pe),Ct.copyTo(Be),pe.copyTo(Ct),nt.copyTo(pe),rt.copyTo(nt),pe.copyTo(rt);let mt=new cv.Mat;cv.threshold(S,mt,0,1,cv.THRESH_BINARY),mt.convertTo(mt,cv.CV_32F),cv.split(_,v),console.log(_.type(),mt.type()),cv.multiply(v.get(0),mt,v.get(0)),cv.multiply(v.get(1),mt,v.get(1)),cv.merge(v,_),cv.dft(_,_,cv.DFT_INVERSE),cv.split(_,v),cv.magnitude(v.get(0),v.get(1),v.get(0));let Ft=v.get(0);cv.normalize(Ft,Ft,0,1,cv.NORM_MINMAX),this.drawCanvas.drawMat(Ft)}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=ta(e)))(r||e)}}(),e.\u0275cmp=qn({type:e,selectors:[["app-spectral-filtering"]],features:[Xn],decls:11,vars:8,consts:[["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],["title","Brush Size"],["brushSizeSlider",""],["ngProjectAs","[centerContent]",5,["","centerContent",""]],["title","Canvas",1,"canvas",3,"width","drawable","BWOption","brushRadius","drawingEnded"],["inputCanvas",""],["title","Fourier space",1,"canvas",3,"width","drawColor","drawable","brushRadius","drawingEnded"],["outputCanvas",""]],template:function(t,r){if(1&t&&(st(0,"app-tutorial-template-images"),Qt(1," Spectral filtering "),Bi(2,0),Rn(3,"app-labelled-sliders",1,2)(5,"hr"),Vi(),Bi(6,3),st(7,"app-draw-canvas",4,5),Yt("drawingEnded",function(){return r.updateFFT()}),dt(),st(9,"app-draw-canvas",6,7),Yt("drawingEnded",function(){return r.updateIFFT()}),dt(),Vi(),dt()),2&t){const i=pi(4);Et(7),At("width",r.width)("drawable",!0)("BWOption",!0)("brushRadius",i.value),Et(2),At("width",r.width)("drawColor","black")("drawable",!0)("brushRadius",i.value)}},dependencies:[Sy,_f,Mu],styles:[".canvas[_ngcontent-%COMP%]{width:45%;min-width:256px}"]}),e})()}];let Lse=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({imports:[gU.forRoot(Rse),gU]}),e})(),Ose=(()=>{class e{constructor(){this.title="cv-toolbox"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=qn({type:e,selectors:[["app-root"]],decls:6,vars:0,consts:[[1,"hide-smallscreen"],["routerLink","/home"]],template:function(t,r){1&t&&(st(0,"mat-toolbar",0)(1,"h1")(2,"a",1),Qt(3," Home"),dt()()(),st(4,"div"),Rn(5,"router-outlet"),dt())},dependencies:[OB,kF,Tv],styles:["a[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit}h1[_ngcontent-%COMP%]{text-align:center;width:100%}"]}),e})();function Tj(e){return new Jt(3e3,!1)}function vle(){return typeof window<"u"&&typeof window.document<"u"}function hV(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Rf(e){switch(e.length){case 0:return new kC;case 1:return e[0];default:return new wG(e)}}function Ej(e,n,t,r,i=new Map,s=new Map){const d=[],p=[];let v=-1,_=null;if(r.forEach(C=>{const S=C.get("offset"),k=S==v,H=k&&_||new Map;C.forEach((ne,pe)=>{let Me=pe,Re=ne;if("offset"!==pe)switch(Me=n.normalizePropertyName(Me,d),Re){case"!":Re=i.get(pe);break;case Kd:Re=s.get(pe);break;default:Re=n.normalizeStyleValue(pe,Me,Re,d)}H.set(Me,Re)}),k||p.push(H),_=H,v=S}),d.length)throw function rle(e){return new Jt(3502,!1)}();return p}function fV(e,n,t,r){switch(n){case"start":e.onStart(()=>r(t&&pV(t,"start",e)));break;case"done":e.onDone(()=>r(t&&pV(t,"done",e)));break;case"destroy":e.onDestroy(()=>r(t&&pV(t,"destroy",e)))}}function pV(e,n,t){const s=vV(e.element,e.triggerName,e.fromState,e.toState,n||e.phaseName,t.totalTime??e.totalTime,!!t.disabled),d=e._data;return null!=d&&(s._data=d),s}function vV(e,n,t,r,i="",s=0,d){return{element:e,triggerName:n,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!d}}function jl(e,n,t){let r=e.get(n);return r||e.set(n,r=t),r}function Aj(e){const n=e.indexOf(":");return[e.substring(1,n),e.slice(n+1)]}let gV=(e,n)=>!1,Ij=(e,n,t)=>[],Pj=null;function mV(e){const n=e.parentNode||e.host;return n===Pj?null:n}(hV()||typeof Element<"u")&&(vle()?(Pj=(()=>document.documentElement)(),gV=(e,n)=>{for(;n;){if(n===e)return!0;n=mV(n)}return!1}):gV=(e,n)=>e.contains(n),Ij=(e,n,t)=>{if(t)return Array.from(e.querySelectorAll(n));const r=e.querySelector(n);return r?[r]:[]});let ig=null,Rj=!1;const Lj=gV,Oj=Ij;let kj=(()=>{class e{validateStyleProperty(t){return function mle(e){ig||(ig=function _le(){return typeof document<"u"?document.body:null}()||{},Rj=!!ig.style&&"WebkitAppearance"in ig.style);let n=!0;return ig.style&&!function gle(e){return"ebkit"==e.substring(1,6)}(e)&&(n=e in ig.style,!n&&Rj&&(n="Webkit"+e.charAt(0).toUpperCase()+e.slice(1)in ig.style)),n}(t)}matchesElement(t,r){return!1}containsElement(t,r){return Lj(t,r)}getParentElement(t){return mV(t)}query(t,r,i){return Oj(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,d,p=[],v){return new kC(i,s)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})(),_V=(()=>{class e{}return e.NOOP=new kj,e})();const yV="ng-enter",rP="ng-leave",iP="ng-trigger",aP=".ng-trigger",Fj="ng-animating",bV=".ng-animating";function sh(e){if("number"==typeof e)return e;const n=e.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:xV(parseFloat(n[1]),n[2])}function xV(e,n){return"s"===n?1e3*e:e}function oP(e,n,t){return e.hasOwnProperty("duration")?e:function xle(e,n,t){let i,s=0,d="";if("string"==typeof e){const p=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return n.push(Tj()),{duration:0,delay:0,easing:""};i=xV(parseFloat(p[1]),p[2]);const v=p[3];null!=v&&(s=xV(parseFloat(v),p[4]));const _=p[5];_&&(d=_)}else i=e;if(!t){let p=!1,v=n.length;i<0&&(n.push(function kse(){return new Jt(3100,!1)}()),p=!0),s<0&&(n.push(function Nse(){return new Jt(3101,!1)}()),p=!0),p&&n.splice(v,0,Tj())}return{duration:i,delay:s,easing:d}}(e,n,t)}function _w(e,n={}){return Object.keys(e).forEach(t=>{n[t]=e[t]}),n}function Bj(e){const n=new Map;return Object.keys(e).forEach(t=>{n.set(t,e[t])}),n}function Lf(e,n=new Map,t){if(t)for(let[r,i]of t)n.set(r,i);for(let[r,i]of e)n.set(r,i);return n}function zj(e,n,t){return t?n+":"+t+";":""}function Hj(e){let n="";for(let t=0;t<e.style.length;t++){const r=e.style.item(t);n+=zj(0,r,e.style.getPropertyValue(r))}for(const t in e.style)e.style.hasOwnProperty(t)&&!t.startsWith("_")&&(n+=zj(0,Dle(t),e.style[t]));e.setAttribute("style",n)}function Jc(e,n,t){e.style&&(n.forEach((r,i)=>{const s=wV(i);t&&!t.has(i)&&t.set(i,e.style[s]),e.style[s]=r}),hV()&&Hj(e))}function ag(e,n){e.style&&(n.forEach((t,r)=>{const i=wV(r);e.style[i]=""}),hV()&&Hj(e))}function yw(e){return Array.isArray(e)?1==e.length?e[0]:bG(e):e}const CV=new RegExp("{{\\s*(.+?)\\s*}}","g");function Uj(e){let n=[];if("string"==typeof e){let t;for(;t=CV.exec(e);)n.push(t[1]);CV.lastIndex=0}return n}function bw(e,n,t){const r=e.toString(),i=r.replace(CV,(s,d)=>{let p=n[d];return null==p&&(t.push(function Bse(e){return new Jt(3003,!1)}()),p=""),p.toString()});return i==r?e:i}function sP(e){const n=[];let t=e.next();for(;!t.done;)n.push(t.value),t=e.next();return n}const Sle=/-+([a-z0-9])/g;function wV(e){return e.replace(Sle,(...n)=>n[1].toUpperCase())}function Dle(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Zl(e,n,t){switch(n.type){case 7:return e.visitTrigger(n,t);case 0:return e.visitState(n,t);case 1:return e.visitTransition(n,t);case 2:return e.visitSequence(n,t);case 3:return e.visitGroup(n,t);case 4:return e.visitAnimate(n,t);case 5:return e.visitKeyframes(n,t);case 6:return e.visitStyle(n,t);case 8:return e.visitReference(n,t);case 9:return e.visitAnimateChild(n,t);case 10:return e.visitAnimateRef(n,t);case 11:return e.visitQuery(n,t);case 12:return e.visitStagger(n,t);default:throw function Vse(e){return new Jt(3004,!1)}()}}function Gj(e,n){return window.getComputedStyle(e)[n]}function Ple(e,n){const t=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(r=>function Rle(e,n,t){if(":"==e[0]){const v=function Lle(e,n){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return n.push(function Jse(e){return new Jt(3016,!1)}()),"* => *"}}(e,t);if("function"==typeof v)return void n.push(v);e=v}const r=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function qse(e){return new Jt(3015,!1)}()),n;const i=r[1],s=r[2],d=r[3];n.push(Wj(i,d));"<"==s[0]&&!("*"==i&&"*"==d)&&n.push(Wj(d,i))}(r,t,n)):t.push(e),t}const dP=new Set(["true","1"]),hP=new Set(["false","0"]);function Wj(e,n){const t=dP.has(e)||hP.has(e),r=dP.has(n)||hP.has(n);return(i,s)=>{let d="*"==e||e==i,p="*"==n||n==s;return!d&&t&&"boolean"==typeof i&&(d=i?dP.has(e):hP.has(e)),!p&&r&&"boolean"==typeof s&&(p=s?dP.has(n):hP.has(n)),d&&p}}const Ole=new RegExp("s*:selfs*,?","g");function SV(e,n,t,r){return new kle(e).build(n,t,r)}class kle{constructor(n){this._driver=n}build(n,t,r){const i=new Ble(t);return this._resetContextStyleTimingState(i),Zl(this,yw(n),i)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles=new Map,n.collectedStyles.set("",new Map),n.currentTime=0}visitTrigger(n,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],d=[];return"@"==n.name.charAt(0)&&t.errors.push(function Hse(){return new Jt(3006,!1)}()),n.definitions.forEach(p=>{if(this._resetContextStyleTimingState(t),0==p.type){const v=p,_=v.name;_.toString().split(/\s*,\s*/).forEach(C=>{v.name=C,s.push(this.visitState(v,t))}),v.name=_}else if(1==p.type){const v=this.visitTransition(p,t);r+=v.queryCount,i+=v.depCount,d.push(v)}else t.errors.push(function Use(){return new Jt(3007,!1)}())}),{type:7,name:n.name,states:s,transitions:d,queryCount:r,depCount:i,options:null}}visitState(n,t){const r=this.visitStyle(n.styles,t),i=n.options&&n.options.params||null;if(r.containsDynamicStyles){const s=new Set,d=i||{};r.styles.forEach(p=>{p instanceof Map&&p.forEach(v=>{Uj(v).forEach(_=>{d.hasOwnProperty(_)||s.add(_)})})}),s.size&&(sP(s.values()),t.errors.push(function Gse(e,n){return new Jt(3008,!1)}()))}return{type:0,name:n.name,style:r,options:i?{params:i}:null}}visitTransition(n,t){t.queryCount=0,t.depCount=0;const r=Zl(this,yw(n.animation),t);return{type:1,matchers:Ple(n.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:og(n.options)}}visitSequence(n,t){return{type:2,steps:n.steps.map(r=>Zl(this,r,t)),options:og(n.options)}}visitGroup(n,t){const r=t.currentTime;let i=0;const s=n.steps.map(d=>{t.currentTime=r;const p=Zl(this,d,t);return i=Math.max(i,t.currentTime),p});return t.currentTime=i,{type:3,steps:s,options:og(n.options)}}visitAnimate(n,t){const r=function zle(e,n){if(e.hasOwnProperty("duration"))return e;if("number"==typeof e)return DV(oP(e,n).duration,0,"");const t=e;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=DV(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=oP(t,n);return DV(i.duration,i.delay,i.easing)}(n.timings,t.errors);t.currentAnimateTimings=r;let i,s=n.styles?n.styles:xa({});if(5==s.type)i=this.visitKeyframes(s,t);else{let d=n.styles,p=!1;if(!d){p=!0;const _={};r.easing&&(_.easing=r.easing),d=xa(_)}t.currentTime+=r.duration+r.delay;const v=this.visitStyle(d,t);v.isEmptyStep=p,i=v}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(n,t){const r=this._makeStyleAst(n,t);return this._validateStyleAst(r,t),r}_makeStyleAst(n,t){const r=[],i=Array.isArray(n.styles)?n.styles:[n.styles];for(let p of i)"string"==typeof p?p===Kd?r.push(p):t.errors.push(new Jt(3002,!1)):r.push(Bj(p));let s=!1,d=null;return r.forEach(p=>{if(p instanceof Map&&(p.has("easing")&&(d=p.get("easing"),p.delete("easing")),!s))for(let v of p.values())if(v.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:d,offset:n.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(n,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),n.styles.forEach(d=>{"string"!=typeof d&&d.forEach((p,v)=>{const _=t.collectedStyles.get(t.currentQuerySelector),C=_.get(v);let S=!0;C&&(s!=i&&s>=C.startTime&&i<=C.endTime&&(t.errors.push(function jse(e,n,t,r,i){return new Jt(3010,!1)}()),S=!1),s=C.startTime),S&&_.set(v,{startTime:s,endTime:i}),t.options&&function wle(e,n,t){const r=n.params||{},i=Uj(e);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function Fse(e){return new Jt(3001,!1)}())})}(p,t.options,t.errors)})})}visitKeyframes(n,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Zse(){return new Jt(3011,!1)}()),r;let s=0;const d=[];let p=!1,v=!1,_=0;const C=n.steps.map(Re=>{const Fe=this._makeStyleAst(Re,t);let Oe=null!=Fe.offset?Fe.offset:function Vle(e){if("string"==typeof e)return null;let n=null;if(Array.isArray(e))e.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;n=parseFloat(r.get("offset")),r.delete("offset")}});else if(e instanceof Map&&e.has("offset")){const t=e;n=parseFloat(t.get("offset")),t.delete("offset")}return n}(Fe.styles),Be=0;return null!=Oe&&(s++,Be=Fe.offset=Oe),v=v||Be<0||Be>1,p=p||Be<_,_=Be,d.push(Be),Fe});v&&t.errors.push(function Yse(){return new Jt(3012,!1)}()),p&&t.errors.push(function Xse(){return new Jt(3200,!1)}());const S=n.steps.length;let k=0;s>0&&s<S?t.errors.push(function $se(){return new Jt(3202,!1)}()):0==s&&(k=1/(S-1));const H=S-1,ne=t.currentTime,pe=t.currentAnimateTimings,Me=pe.duration;return C.forEach((Re,Fe)=>{const Oe=k>0?Fe==H?1:k*Fe:d[Fe],Be=Oe*Me;t.currentTime=ne+pe.delay+Be,pe.duration=Be,this._validateStyleAst(Re,t),Re.offset=Oe,r.styles.push(Re)}),r}visitReference(n,t){return{type:8,animation:Zl(this,yw(n.animation),t),options:og(n.options)}}visitAnimateChild(n,t){return t.depCount++,{type:9,options:og(n.options)}}visitAnimateRef(n,t){return{type:10,animation:this.visitReference(n.animation,t),options:og(n.options)}}visitQuery(n,t){const r=t.currentQuerySelector,i=n.options||{};t.queryCount++,t.currentQuery=n;const[s,d]=function Nle(e){const n=!!e.split(/\s*,\s*/).find(t=>":self"==t);return n&&(e=e.replace(Ole,"")),e=e.replace(/@\*/g,aP).replace(/@\w+/g,t=>aP+"-"+t.slice(1)).replace(/:animating/g,bV),[e,n]}(n.selector);t.currentQuerySelector=r.length?r+" "+s:s,jl(t.collectedStyles,t.currentQuerySelector,new Map);const p=Zl(this,yw(n.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:d,animation:p,originalSelector:n.selector,options:og(n.options)}}visitStagger(n,t){t.currentQuery||t.errors.push(function Kse(){return new Jt(3013,!1)}());const r="full"===n.timings?{duration:0,delay:0,easing:"full"}:oP(n.timings,t.errors,!0);return{type:12,animation:Zl(this,yw(n.animation),t),timings:r,options:null}}}class Ble{constructor(n){this.errors=n,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function og(e){return e?(e=_w(e)).params&&(e.params=function Fle(e){return e?_w(e):null}(e.params)):e={},e}function DV(e,n,t){return{duration:e,delay:n,easing:t}}function MV(e,n,t,r,i,s,d=null,p=!1){return{type:1,element:e,keyframes:n,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:d,subTimeline:p}}class fP{constructor(){this._map=new Map}get(n){return this._map.get(n)||[]}append(n,t){let r=this._map.get(n);r||this._map.set(n,r=[]),r.push(...t)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const Gle=new RegExp(":enter","g"),jle=new RegExp(":leave","g");function TV(e,n,t,r,i,s=new Map,d=new Map,p,v,_=[]){return(new Zle).buildKeyframes(e,n,t,r,i,s,d,p,v,_)}class Zle{buildKeyframes(n,t,r,i,s,d,p,v,_,C=[]){_=_||new fP;const S=new EV(n,t,_,i,s,C,[]);S.options=v;const k=v.delay?sh(v.delay):0;S.currentTimeline.delayNextStep(k),S.currentTimeline.setStyles([d],null,S.errors,v),Zl(this,r,S);const H=S.timelines.filter(ne=>ne.containsAnimation());if(H.length&&p.size){let ne;for(let pe=H.length-1;pe>=0;pe--){const Me=H[pe];if(Me.element===t){ne=Me;break}}ne&&!ne.allowOnlyTimelineStyles()&&ne.setStyles([p],null,S.errors,v)}return H.length?H.map(ne=>ne.buildKeyframes()):[MV(t,[],[],[],0,k,"",!1)]}visitTrigger(n,t){}visitState(n,t){}visitTransition(n,t){}visitAnimateChild(n,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(n.options),s=t.currentTimeline.currentTime,d=this._visitSubInstructions(r,i,i.options);s!=d&&t.transformIntoNewTimeline(d)}t.previousNode=n}visitAnimateRef(n,t){const r=t.createSubContext(n.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],t,r),this.visitReference(n.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=n}_applyAnimationRefDelays(n,t,r){for(const i of n){const s=i?.delay;if(s){const d="number"==typeof s?s:sh(bw(s,i?.params??{},t.errors));r.delayNextStep(d)}}}_visitSubInstructions(n,t,r){let s=t.currentTimeline.currentTime;const d=null!=r.duration?sh(r.duration):null,p=null!=r.delay?sh(r.delay):null;return 0!==d&&n.forEach(v=>{const _=t.appendInstructionToTimeline(v,d,p);s=Math.max(s,_.duration+_.delay)}),s}visitReference(n,t){t.updateOptions(n.options,!0),Zl(this,n.animation,t),t.previousNode=n}visitSequence(n,t){const r=t.subContextCount;let i=t;const s=n.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=pP);const d=sh(s.delay);i.delayNextStep(d)}n.steps.length&&(n.steps.forEach(d=>Zl(this,d,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=n}visitGroup(n,t){const r=[];let i=t.currentTimeline.currentTime;const s=n.options&&n.options.delay?sh(n.options.delay):0;n.steps.forEach(d=>{const p=t.createSubContext(n.options);s&&p.delayNextStep(s),Zl(this,d,p),i=Math.max(i,p.currentTimeline.currentTime),r.push(p.currentTimeline)}),r.forEach(d=>t.currentTimeline.mergeTimelineCollectedStyles(d)),t.transformIntoNewTimeline(i),t.previousNode=n}_visitTiming(n,t){if(n.dynamic){const r=n.strValue;return oP(t.params?bw(r,t.params,t.errors):r,t.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,t){const r=t.currentAnimateTimings=this._visitTiming(n.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=n.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=n}visitStyle(n,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||n.easing;n.isEmptyStep?r.applyEmptyStep(s):r.setStyles(n.styles,s,t.errors,t.options),t.previousNode=n}visitKeyframes(n,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,p=t.createSubContext().currentTimeline;p.easing=r.easing,n.styles.forEach(v=>{p.forwardTime((v.offset||0)*s),p.setStyles(v.styles,v.easing,t.errors,t.options),p.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(p),t.transformIntoNewTimeline(i+s),t.previousNode=n}visitQuery(n,t){const r=t.currentTimeline.currentTime,i=n.options||{},s=i.delay?sh(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=pP);let d=r;const p=t.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=p.length;let v=null;p.forEach((_,C)=>{t.currentQueryIndex=C;const S=t.createSubContext(n.options,_);s&&S.delayNextStep(s),_===t.element&&(v=S.currentTimeline),Zl(this,n.animation,S),S.currentTimeline.applyStylesToKeyframe(),d=Math.max(d,S.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(d),v&&(t.currentTimeline.mergeTimelineCollectedStyles(v),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=n}visitStagger(n,t){const r=t.parentContext,i=t.currentTimeline,s=n.timings,d=Math.abs(s.duration),p=d*(t.currentQueryTotal-1);let v=d*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":v=p-v;break;case"full":v=r.currentStaggerTime}const C=t.currentTimeline;v&&C.delayNextStep(v);const S=C.currentTime;Zl(this,n.animation,t),t.previousNode=n,r.currentStaggerTime=i.currentTime-S+(i.startTime-r.currentTimeline.startTime)}}const pP={};class EV{constructor(n,t,r,i,s,d,p,v){this._driver=n,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=d,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=pP,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=v||new vP(this._driver,t,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,t){if(!n)return;const r=n;let i=this.options;null!=r.duration&&(i.duration=sh(r.duration)),null!=r.delay&&(i.delay=sh(r.delay));const s=r.params;if(s){let d=i.params;d||(d=this.options.params={}),Object.keys(s).forEach(p=>{(!t||!d.hasOwnProperty(p))&&(d[p]=bw(s[p],d,this.errors))})}}_copyOptions(){const n={};if(this.options){const t=this.options.params;if(t){const r=n.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return n}createSubContext(n=null,t,r){const i=t||this.element,s=new EV(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(n),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(n){return this.previousNode=pP,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,t,r){const i={duration:t??n.duration,delay:this.currentTimeline.currentTime+(r??0)+n.delay,easing:""},s=new Yle(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,i,n.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,t,r,i,s,d){let p=[];if(i&&p.push(this.element),n.length>0){n=(n=n.replace(Gle,"."+this._enterClassName)).replace(jle,"."+this._leaveClassName);let _=this._driver.query(this.element,n,1!=r);0!==r&&(_=r<0?_.slice(_.length+r,_.length):_.slice(0,r)),p.push(..._)}return!s&&0==p.length&&d.push(function Qse(e){return new Jt(3014,!1)}()),p}}class vP{constructor(n,t,r,i){this._driver=n,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+n),t&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,t){return this.applyStylesToKeyframe(),new vP(this._driver,n,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,t){this._localTimelineStyles.set(n,t),this._globalTimelineStyles.set(n,t),this._styleSummary.set(n,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Kd),this._currentKeyframe.set(t,Kd);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},d=function Xle(e,n){const t=new Map;let r;return e.forEach(i=>{if("*"===i){r=r||n.keys();for(let s of r)t.set(s,Kd)}else Lf(i,t)}),t}(n,this._globalTimelineStyles);for(let[p,v]of d){const _=bw(v,s,r);this._pendingStyles.set(p,_),this._localTimelineStyles.has(p)||this._backFill.set(p,this._globalTimelineStyles.get(p)??Kd),this._updateStyle(p,_)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((n,t)=>{this._currentKeyframe.set(t,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,n)}))}snapshotCurrentStyles(){for(let[n,t]of this._localTimelineStyles)this._pendingStyles.set(n,t),this._updateStyle(n,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let t in this._currentKeyframe)n.push(t);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((p,v)=>{const _=Lf(p,new Map,this._backFill);_.forEach((C,S)=>{"!"===C?n.add(S):C===Kd&&t.add(S)}),r||_.set("offset",v/this.duration),i.push(_)});const s=n.size?sP(n.values()):[],d=t.size?sP(t.values()):[];if(r){const p=i[0],v=new Map(p);p.set("offset",0),v.set("offset",1),i=[p,v]}return MV(this.element,i,s,d,this.duration,this.startTime,this.easing,!1)}}class Yle extends vP{constructor(n,t,r,i,s,d,p=!1){super(n,t,d.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=p,this.timings={duration:d.duration,delay:d.delay,easing:d.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],d=r+t,p=t/d,v=Lf(n[0]);v.set("offset",0),s.push(v);const _=Lf(n[0]);_.set("offset",Yj(p)),s.push(_);const C=n.length-1;for(let S=1;S<=C;S++){let k=Lf(n[S]);const H=k.get("offset");k.set("offset",Yj((t+H*r)/d)),s.push(k)}r=d,t=0,i="",n=s}return MV(this.element,n,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function Yj(e,n=3){const t=Math.pow(10,n-1);return Math.round(e*t)/t}class AV{}const $le=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Kle extends AV{normalizePropertyName(n,t){return wV(n)}normalizeStyleValue(n,t,r,i){let s="";const d=r.toString().trim();if($le.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const p=r.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&i.push(function zse(e,n){return new Jt(3005,!1)}())}return d+s}}function Xj(e,n,t,r,i,s,d,p,v,_,C,S,k){return{type:0,element:e,triggerName:n,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:d,timelines:p,queriedElements:v,preStyleProps:_,postStyleProps:C,totalTime:S,errors:k}}const IV={};class $j{constructor(n,t,r){this._triggerName=n,this.ast=t,this._stateStyles=r}match(n,t,r,i){return function Qle(e,n,t,r,i){return e.some(s=>s(n,t,r,i))}(this.ast.matchers,n,t,r,i)}buildStyles(n,t,r){let i=this._stateStyles.get("*");return void 0!==n&&(i=this._stateStyles.get(n?.toString())||i),i?i.buildStyles(t,r):new Map}build(n,t,r,i,s,d,p,v,_,C){const S=[],k=this.ast.options&&this.ast.options.params||IV,ne=this.buildStyles(r,p&&p.params||IV,S),pe=v&&v.params||IV,Me=this.buildStyles(i,pe,S),Re=new Set,Fe=new Map,Oe=new Map,Be="void"===i,nt={params:qle(pe,k),delay:this.ast.options?.delay},rt=C?[]:TV(n,t,this.ast.animation,s,d,ne,Me,nt,_,S);let Ct=0;if(rt.forEach(Ft=>{Ct=Math.max(Ft.duration+Ft.delay,Ct)}),S.length)return Xj(t,this._triggerName,r,i,Be,ne,Me,[],[],Fe,Oe,Ct,S);rt.forEach(Ft=>{const nn=Ft.element,Xt=jl(Fe,nn,new Set);Ft.preStyleProps.forEach(mn=>Xt.add(mn));const pn=jl(Oe,nn,new Set);Ft.postStyleProps.forEach(mn=>pn.add(mn)),nn!==t&&Re.add(nn)});const mt=sP(Re.values());return Xj(t,this._triggerName,r,i,Be,ne,Me,rt,mt,Fe,Oe,Ct)}}function qle(e,n){const t=_w(n);for(const r in e)e.hasOwnProperty(r)&&null!=e[r]&&(t[r]=e[r]);return t}class Jle{constructor(n,t,r){this.styles=n,this.defaultParams=t,this.normalizer=r}buildStyles(n,t){const r=new Map,i=_w(this.defaultParams);return Object.keys(n).forEach(s=>{const d=n[s];null!==d&&(i[s]=d)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((d,p)=>{d&&(d=bw(d,i,t));const v=this.normalizer.normalizePropertyName(p,t);d=this.normalizer.normalizeStyleValue(p,v,d,t),r.set(v,d)})}),r}}class tue{constructor(n,t,r){this.name=n,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new Jle(i.style,i.options&&i.options.params||{},r))}),Kj(this.states,"true","1"),Kj(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new $j(n,i,this.states))}),this.fallbackTransition=function nue(e,n,t){return new $j(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(d,p)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,t,r,i){return this.transitionFactories.find(d=>d.match(n,t,r,i))||null}matchStyles(n,t,r){return this.fallbackTransition.buildStyles(n,t,r)}}function Kj(e,n,t){e.has(n)?e.has(t)||e.set(t,e.get(n)):e.has(t)&&e.set(n,e.get(t))}const rue=new fP;class iue{constructor(n,t,r){this.bodyNode=n,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(n,t){const r=[],s=SV(this._driver,t,r,[]);if(r.length)throw function ile(e){return new Jt(3503,!1)}();this._animations.set(n,s)}_buildPlayer(n,t,r){const i=n.element,s=Ej(0,this._normalizer,0,n.keyframes,t,r);return this._driver.animate(i,s,n.duration,n.delay,n.easing,[],!0)}create(n,t,r={}){const i=[],s=this._animations.get(n);let d;const p=new Map;if(s?(d=TV(this._driver,t,s,yV,rP,new Map,new Map,r,rue,i),d.forEach(C=>{const S=jl(p,C.element,new Map);C.postStyleProps.forEach(k=>S.set(k,null))})):(i.push(function ale(){return new Jt(3300,!1)}()),d=[]),i.length)throw function ole(e){return new Jt(3504,!1)}();p.forEach((C,S)=>{C.forEach((k,H)=>{C.set(H,this._driver.computeStyle(S,H,Kd))})});const _=Rf(d.map(C=>{const S=p.get(C.element);return this._buildPlayer(C,new Map,S)}));return this._playersById.set(n,_),_.onDestroy(()=>this.destroy(n)),this.players.push(_),_}destroy(n){const t=this._getPlayer(n);t.destroy(),this._playersById.delete(n);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(n){const t=this._playersById.get(n);if(!t)throw function sle(e){return new Jt(3301,!1)}();return t}listen(n,t,r,i){const s=vV(t,"","","");return fV(this._getPlayer(n),r,s,i),()=>{}}command(n,t,r,i){if("register"==r)return void this.register(n,i[0]);if("create"==r)return void this.create(n,t,i[0]||{});const s=this._getPlayer(n);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(n)}}}const Qj="ng-animate-queued",PV="ng-animate-disabled",uue=[],qj={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},cue={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Lu="__ng_removed";class RV{constructor(n,t=""){this.namespaceId=t;const r=n&&n.hasOwnProperty("value");if(this.value=function pue(e){return e??null}(r?n.value:n),r){const s=_w(n);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(n){const t=n.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const xw="void",LV=new RV(xw);class due{constructor(n,t,r){this.id=n,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+n,Ou(t,this._hostClassName)}listen(n,t,r,i){if(!this._triggers.has(t))throw function lle(e,n){return new Jt(3302,!1)}();if(null==r||0==r.length)throw function ule(e){return new Jt(3303,!1)}();if(!function vue(e){return"start"==e||"done"==e}(r))throw function cle(e,n){return new Jt(3400,!1)}();const s=jl(this._elementListeners,n,[]),d={name:t,phase:r,callback:i};s.push(d);const p=jl(this._engine.statesByElement,n,new Map);return p.has(t)||(Ou(n,iP),Ou(n,iP+"-"+t),p.set(t,LV)),()=>{this._engine.afterFlush(()=>{const v=s.indexOf(d);v>=0&&s.splice(v,1),this._triggers.has(t)||p.delete(t)})}}register(n,t){return!this._triggers.has(n)&&(this._triggers.set(n,t),!0)}_getTrigger(n){const t=this._triggers.get(n);if(!t)throw function dle(e){return new Jt(3401,!1)}();return t}trigger(n,t,r,i=!0){const s=this._getTrigger(t),d=new OV(this.id,t,n);let p=this._engine.statesByElement.get(n);p||(Ou(n,iP),Ou(n,iP+"-"+t),this._engine.statesByElement.set(n,p=new Map));let v=p.get(t);const _=new RV(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&v&&_.absorbOptions(v.options),p.set(t,_),v||(v=LV),_.value!==xw&&v.value===_.value){if(!function _ue(e,n){const t=Object.keys(e),r=Object.keys(n);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!n.hasOwnProperty(s)||e[s]!==n[s])return!1}return!0}(v.params,_.params)){const pe=[],Me=s.matchStyles(v.value,v.params,pe),Re=s.matchStyles(_.value,_.params,pe);pe.length?this._engine.reportError(pe):this._engine.afterFlush(()=>{ag(n,Me),Jc(n,Re)})}return}const k=jl(this._engine.playersByElement,n,[]);k.forEach(pe=>{pe.namespaceId==this.id&&pe.triggerName==t&&pe.queued&&pe.destroy()});let H=s.matchTransition(v.value,_.value,n,_.params),ne=!1;if(!H){if(!i)return;H=s.fallbackTransition,ne=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:t,transition:H,fromState:v,toState:_,player:d,isFallbackTransition:ne}),ne||(Ou(n,Qj),d.onStart(()=>{Qy(n,Qj)})),d.onDone(()=>{let pe=this.players.indexOf(d);pe>=0&&this.players.splice(pe,1);const Me=this._engine.playersByElement.get(n);if(Me){let Re=Me.indexOf(d);Re>=0&&Me.splice(Re,1)}}),this.players.push(d),k.push(d),d}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(t=>t.delete(n)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const t=this._engine.playersByElement.get(n);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,t){const r=this._engine.driver.query(n,aP,!0);r.forEach(i=>{if(i[Lu])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(d=>d.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(n,t,r,i){const s=this._engine.statesByElement.get(n),d=new Map;if(s){const p=[];if(s.forEach((v,_)=>{if(d.set(_,v.value),this._triggers.has(_)){const C=this.trigger(n,_,xw,i);C&&p.push(C)}}),p.length)return this._engine.markElementAsRemoved(this.id,n,!0,t,d),r&&Rf(p).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const t=this._elementListeners.get(n),r=this._engine.statesByElement.get(n);if(t&&r){const i=new Set;t.forEach(s=>{const d=s.name;if(i.has(d))return;i.add(d);const v=this._triggers.get(d).fallbackTransition,_=r.get(d)||LV,C=new RV(xw),S=new OV(this.id,d,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:d,transition:v,fromState:_,toState:C,player:S,isFallbackTransition:!0})})}}removeNode(n,t){const r=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,t),this.triggerLeaveAnimation(n,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(n):[];if(s&&s.length)i=!0;else{let d=n;for(;d=d.parentNode;)if(r.statesByElement.get(d)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(n),i)r.markElementAsRemoved(this.id,n,!1,t);else{const s=n[Lu];(!s||s===qj)&&(r.afterFlush(()=>this.clearElementCache(n)),r.destroyInnerAnimations(n),r._onRemovalComplete(n,t))}}insertNode(n,t){Ou(n,this._hostClassName)}drainQueuedTransitions(n){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,d=this._elementListeners.get(s);d&&d.forEach(p=>{if(p.name==r.triggerName){const v=vV(s,r.triggerName,r.fromState.value,r.toState.value);v._data=n,fV(r.player,p.phase,v,p.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,d=i.transition.ast.depCount;return 0==s||0==d?s-d:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(n){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}elementContainsData(n){let t=!1;return this._elementListeners.has(n)&&(t=!0),t=!!this._queue.find(r=>r.element===n)||t,t}}class hue{constructor(n,t,r){this.bodyNode=n,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(n,t){this.onRemovalComplete(n,t)}get queuedPlayers(){const n=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&n.push(r)})}),n}createNamespace(n,t){const r=new due(n,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[n]=r}_balanceNamespaceList(n,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let d=!1,p=this.driver.getParentElement(t);for(;p;){const v=i.get(p);if(v){const _=r.indexOf(v);r.splice(_+1,0,n),d=!0;break}p=this.driver.getParentElement(p)}d||r.unshift(n)}else r.push(n);return i.set(t,n),n}register(n,t){let r=this._namespaceLookup[n];return r||(r=this.createNamespace(n,t)),r}registerTrigger(n,t,r){let i=this._namespaceLookup[n];i&&i.register(t,r)&&this.totalAnimations++}destroy(n,t){if(!n)return;const r=this._fetchNamespace(n);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[n];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const t=new Set,r=this.statesByElement.get(n);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(n,t,r,i){if(gP(t)){const s=this._fetchNamespace(n);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(n,t,r,i){if(!gP(t))return;const s=t[Lu];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const d=this.collectedLeaveElements.indexOf(t);d>=0&&this.collectedLeaveElements.splice(d,1)}if(n){const d=this._fetchNamespace(n);d&&d.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,t){t?this.disabledNodes.has(n)||(this.disabledNodes.add(n),Ou(n,PV)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),Qy(n,PV))}removeNode(n,t,r,i){if(gP(t)){const s=n?this._fetchNamespace(n):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(n,t,!1,i),r){const d=this.namespacesByHostElement.get(t);d&&d.id!==n&&d.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(n,t,r,i,s){this.collectedLeaveElements.push(t),t[Lu]={namespaceId:n,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(n,t,r,i,s){return gP(t)?this._fetchNamespace(n).listen(t,r,i,s):()=>{}}_buildInstruction(n,t,r,i,s){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,r,i,n.fromState.options,n.toState.options,t,s)}destroyInnerAnimations(n){let t=this.driver.query(n,aP,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(n,bV,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(n){const t=this.playersByElement.get(n);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(n){const t=this.playersByQueriedElement.get(n);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return Rf(this.players).onDone(()=>n());n()})}processLeaveNode(n){const t=n[Lu];if(t&&t.setForRemoval){if(n[Lu]=qj,t.namespaceId){this.destroyInnerAnimations(n);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(n)}this._onRemovalComplete(n,t.setForRemoval)}n.classList?.contains(PV)&&this.markElementAsDisabled(n,!1),this.driver.query(n,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(n=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ou(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,n)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Rf(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(n){throw function hle(e){return new Jt(3402,!1)}()}_flushAnimations(n,t){const r=new fP,i=[],s=new Map,d=[],p=new Map,v=new Map,_=new Map,C=new Set;this.disabledNodes.forEach(Ht=>{C.add(Ht);const ln=this.driver.query(Ht,".ng-animate-queued",!0);for(let Zt=0;Zt<ln.length;Zt++)C.add(ln[Zt])});const S=this.bodyNode,k=Array.from(this.statesByElement.keys()),H=tZ(k,this.collectedEnterElements),ne=new Map;let pe=0;H.forEach((Ht,ln)=>{const Zt=yV+pe++;ne.set(ln,Zt),Ht.forEach(Zn=>Ou(Zn,Zt))});const Me=[],Re=new Set,Fe=new Set;for(let Ht=0;Ht<this.collectedLeaveElements.length;Ht++){const ln=this.collectedLeaveElements[Ht],Zt=ln[Lu];Zt&&Zt.setForRemoval&&(Me.push(ln),Re.add(ln),Zt.hasAnimation?this.driver.query(ln,".ng-star-inserted",!0).forEach(Zn=>Re.add(Zn)):Fe.add(ln))}const Oe=new Map,Be=tZ(k,Array.from(Re));Be.forEach((Ht,ln)=>{const Zt=rP+pe++;Oe.set(ln,Zt),Ht.forEach(Zn=>Ou(Zn,Zt))}),n.push(()=>{H.forEach((Ht,ln)=>{const Zt=ne.get(ln);Ht.forEach(Zn=>Qy(Zn,Zt))}),Be.forEach((Ht,ln)=>{const Zt=Oe.get(ln);Ht.forEach(Zn=>Qy(Zn,Zt))}),Me.forEach(Ht=>{this.processLeaveNode(Ht)})});const nt=[],rt=[];for(let Ht=this._namespaceList.length-1;Ht>=0;Ht--)this._namespaceList[Ht].drainQueuedTransitions(t).forEach(Zt=>{const Zn=Zt.player,An=Zt.element;if(nt.push(Zn),this.collectedEnterElements.length){const ii=An[Lu];if(ii&&ii.setForMove){if(ii.previousTriggersValues&&ii.previousTriggersValues.has(Zt.triggerName)){const Wi=ii.previousTriggersValues.get(Zt.triggerName),ji=this.statesByElement.get(Zt.element);if(ji&&ji.has(Zt.triggerName)){const Ra=ji.get(Zt.triggerName);Ra.value=Wi,ji.set(Zt.triggerName,Ra)}}return void Zn.destroy()}}const ri=!S||!this.driver.containsElement(S,An),kr=Oe.get(An),gi=ne.get(An),Dr=this._buildInstruction(Zt,r,gi,kr,ri);if(Dr.errors&&Dr.errors.length)return void rt.push(Dr);if(ri)return Zn.onStart(()=>ag(An,Dr.fromStyles)),Zn.onDestroy(()=>Jc(An,Dr.toStyles)),void i.push(Zn);if(Zt.isFallbackTransition)return Zn.onStart(()=>ag(An,Dr.fromStyles)),Zn.onDestroy(()=>Jc(An,Dr.toStyles)),void i.push(Zn);const qr=[];Dr.timelines.forEach(ii=>{ii.stretchStartingKeyframe=!0,this.disabledNodes.has(ii.element)||qr.push(ii)}),Dr.timelines=qr,r.append(An,Dr.timelines),d.push({instruction:Dr,player:Zn,element:An}),Dr.queriedElements.forEach(ii=>jl(p,ii,[]).push(Zn)),Dr.preStyleProps.forEach((ii,Wi)=>{if(ii.size){let ji=v.get(Wi);ji||v.set(Wi,ji=new Set),ii.forEach((Ra,Ba)=>ji.add(Ba))}}),Dr.postStyleProps.forEach((ii,Wi)=>{let ji=_.get(Wi);ji||_.set(Wi,ji=new Set),ii.forEach((Ra,Ba)=>ji.add(Ba))})});if(rt.length){const Ht=[];rt.forEach(ln=>{Ht.push(function fle(e,n){return new Jt(3505,!1)}())}),nt.forEach(ln=>ln.destroy()),this.reportError(Ht)}const Ct=new Map,mt=new Map;d.forEach(Ht=>{const ln=Ht.element;r.has(ln)&&(mt.set(ln,ln),this._beforeAnimationBuild(Ht.player.namespaceId,Ht.instruction,Ct))}),i.forEach(Ht=>{const ln=Ht.element;this._getPreviousPlayers(ln,!1,Ht.namespaceId,Ht.triggerName,null).forEach(Zn=>{jl(Ct,ln,[]).push(Zn),Zn.destroy()})});const Ft=Me.filter(Ht=>rZ(Ht,v,_)),nn=new Map;eZ(nn,this.driver,Fe,_,Kd).forEach(Ht=>{rZ(Ht,v,_)&&Ft.push(Ht)});const pn=new Map;H.forEach((Ht,ln)=>{eZ(pn,this.driver,new Set(Ht),v,"!")}),Ft.forEach(Ht=>{const ln=nn.get(Ht),Zt=pn.get(Ht);nn.set(Ht,new Map([...Array.from(ln?.entries()??[]),...Array.from(Zt?.entries()??[])]))});const mn=[],on=[],Cn={};d.forEach(Ht=>{const{element:ln,player:Zt,instruction:Zn}=Ht;if(r.has(ln)){if(C.has(ln))return Zt.onDestroy(()=>Jc(ln,Zn.toStyles)),Zt.disabled=!0,Zt.overrideTotalTime(Zn.totalTime),void i.push(Zt);let An=Cn;if(mt.size>1){let kr=ln;const gi=[];for(;kr=kr.parentNode;){const Dr=mt.get(kr);if(Dr){An=Dr;break}gi.push(kr)}gi.forEach(Dr=>mt.set(Dr,An))}const ri=this._buildAnimation(Zt.namespaceId,Zn,Ct,s,pn,nn);if(Zt.setRealPlayer(ri),An===Cn)mn.push(Zt);else{const kr=this.playersByElement.get(An);kr&&kr.length&&(Zt.parentPlayer=Rf(kr)),i.push(Zt)}}else ag(ln,Zn.fromStyles),Zt.onDestroy(()=>Jc(ln,Zn.toStyles)),on.push(Zt),C.has(ln)&&i.push(Zt)}),on.forEach(Ht=>{const ln=s.get(Ht.element);if(ln&&ln.length){const Zt=Rf(ln);Ht.setRealPlayer(Zt)}}),i.forEach(Ht=>{Ht.parentPlayer?Ht.syncPlayerEvents(Ht.parentPlayer):Ht.destroy()});for(let Ht=0;Ht<Me.length;Ht++){const ln=Me[Ht],Zt=ln[Lu];if(Qy(ln,rP),Zt&&Zt.hasAnimation)continue;let Zn=[];if(p.size){let ri=p.get(ln);ri&&ri.length&&Zn.push(...ri);let kr=this.driver.query(ln,bV,!0);for(let gi=0;gi<kr.length;gi++){let Dr=p.get(kr[gi]);Dr&&Dr.length&&Zn.push(...Dr)}}const An=Zn.filter(ri=>!ri.destroyed);An.length?gue(this,ln,An):this.processLeaveNode(ln)}return Me.length=0,mn.forEach(Ht=>{this.players.push(Ht),Ht.onDone(()=>{Ht.destroy();const ln=this.players.indexOf(Ht);this.players.splice(ln,1)}),Ht.play()}),mn}elementContainsData(n,t){let r=!1;const i=t[Lu];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(n).elementContainsData(t)||r}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,t,r,i,s){let d=[];if(t){const p=this.playersByQueriedElement.get(n);p&&(d=p)}else{const p=this.playersByElement.get(n);if(p){const v=!s||s==xw;p.forEach(_=>{_.queued||!v&&_.triggerName!=i||d.push(_)})}}return(r||i)&&(d=d.filter(p=>!(r&&r!=p.namespaceId||i&&i!=p.triggerName))),d}_beforeAnimationBuild(n,t,r){const s=t.element,d=t.isRemovalTransition?void 0:n,p=t.isRemovalTransition?void 0:t.triggerName;for(const v of t.timelines){const _=v.element,C=_!==s,S=jl(r,_,[]);this._getPreviousPlayers(_,C,d,p,t.toState).forEach(H=>{const ne=H.getRealPlayer();ne.beforeDestroy&&ne.beforeDestroy(),H.destroy(),S.push(H)})}ag(s,t.fromStyles)}_buildAnimation(n,t,r,i,s,d){const p=t.triggerName,v=t.element,_=[],C=new Set,S=new Set,k=t.timelines.map(ne=>{const pe=ne.element;C.add(pe);const Me=pe[Lu];if(Me&&Me.removedBeforeQueried)return new kC(ne.duration,ne.delay);const Re=pe!==v,Fe=function mue(e){const n=[];return nZ(e,n),n}((r.get(pe)||uue).map(Ct=>Ct.getRealPlayer())).filter(Ct=>!!Ct.element&&Ct.element===pe),Oe=s.get(pe),Be=d.get(pe),nt=Ej(0,this._normalizer,0,ne.keyframes,Oe,Be),rt=this._buildPlayer(ne,nt,Fe);if(ne.subTimeline&&i&&S.add(pe),Re){const Ct=new OV(n,p,pe);Ct.setRealPlayer(rt),_.push(Ct)}return rt});_.forEach(ne=>{jl(this.playersByQueriedElement,ne.element,[]).push(ne),ne.onDone(()=>function fue(e,n,t){let r=e.get(n);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&e.delete(n)}return r}(this.playersByQueriedElement,ne.element,ne))}),C.forEach(ne=>Ou(ne,Fj));const H=Rf(k);return H.onDestroy(()=>{C.forEach(ne=>Qy(ne,Fj)),Jc(v,t.toStyles)}),S.forEach(ne=>{jl(i,ne,[]).push(H)}),H}_buildPlayer(n,t,r){return t.length>0?this.driver.animate(n.element,t,n.duration,n.delay,n.easing,r):new kC(n.duration,n.delay)}}class OV{constructor(n,t,r){this.namespaceId=n,this.triggerName=t,this.element=r,this._player=new kC,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>fV(n,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const t=this._player;t.triggerCallback&&n.onStart(()=>t.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,t){jl(this._queuedCallbacks,n,[]).push(t)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const t=this._player;t.triggerCallback&&t.triggerCallback(n)}}function gP(e){return e&&1===e.nodeType}function Jj(e,n){const t=e.style.display;return e.style.display=n??"none",t}function eZ(e,n,t,r,i){const s=[];t.forEach(v=>s.push(Jj(v)));const d=[];r.forEach((v,_)=>{const C=new Map;v.forEach(S=>{const k=n.computeStyle(_,S,i);C.set(S,k),(!k||0==k.length)&&(_[Lu]=cue,d.push(_))}),e.set(_,C)});let p=0;return t.forEach(v=>Jj(v,s[p++])),d}function tZ(e,n){const t=new Map;if(e.forEach(p=>t.set(p,[])),0==n.length)return t;const i=new Set(n),s=new Map;function d(p){if(!p)return 1;let v=s.get(p);if(v)return v;const _=p.parentNode;return v=t.has(_)?_:i.has(_)?1:d(_),s.set(p,v),v}return n.forEach(p=>{const v=d(p);1!==v&&t.get(v).push(p)}),t}function Ou(e,n){e.classList?.add(n)}function Qy(e,n){e.classList?.remove(n)}function gue(e,n,t){Rf(t).onDone(()=>e.processLeaveNode(n))}function nZ(e,n){for(let t=0;t<e.length;t++){const r=e[t];r instanceof wG?nZ(r.players,n):n.push(r)}}function rZ(e,n,t){const r=t.get(e);if(!r)return!1;let i=n.get(e);return i?r.forEach(s=>i.add(s)):n.set(e,r),t.delete(e),!0}class mP{constructor(n,t,r){this.bodyNode=n,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new hue(n,t,r),this._timelineEngine=new iue(n,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(n,t,r,i,s){const d=n+"-"+i;let p=this._triggerCache[d];if(!p){const v=[],C=SV(this._driver,s,v,[]);if(v.length)throw function nle(e,n){return new Jt(3404,!1)}();p=function eue(e,n,t){return new tue(e,n,t)}(i,C,this._normalizer),this._triggerCache[d]=p}this._transitionEngine.registerTrigger(t,i,p)}register(n,t){this._transitionEngine.register(n,t)}destroy(n,t){this._transitionEngine.destroy(n,t)}onInsert(n,t,r,i){this._transitionEngine.insertNode(n,t,r,i)}onRemove(n,t,r,i){this._transitionEngine.removeNode(n,t,i||!1,r)}disableAnimations(n,t){this._transitionEngine.markElementAsDisabled(n,t)}process(n,t,r,i){if("@"==r.charAt(0)){const[s,d]=Aj(r);this._timelineEngine.command(s,t,d,i)}else this._transitionEngine.trigger(n,t,r,i)}listen(n,t,r,i,s){if("@"==r.charAt(0)){const[d,p]=Aj(r);return this._timelineEngine.listen(d,t,p,s)}return this._transitionEngine.listen(n,t,r,i,s)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let bue=(()=>{class e{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=e.initialStylesByElement.get(t);s||e.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Jc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Jc(this._element,this._initialStyles),this._endStyles&&(Jc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(ag(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ag(this._element,this._endStyles),this._endStyles=null),Jc(this._element,this._initialStyles),this._state=3)}}return e.initialStylesByElement=new WeakMap,e})();function kV(e){let n=null;return e.forEach((t,r)=>{(function xue(e){return"display"===e||"position"===e})(r)&&(n=n||new Map,n.set(r,t))}),n}class iZ{constructor(n,t,r,i){this.element=n,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(n){const t=[];return n.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(n,t,r){return n.animate(this._convertKeyframesToObject(t),r)}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&n.set(i,this._finished?r:Gj(this.element,i))}),this.currentSnapshot=n}triggerCallback(n){const t="start"===n?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Cue{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}matchesElement(n,t){return!1}containsElement(n,t){return Lj(n,t)}getParentElement(n){return mV(n)}query(n,t,r){return Oj(n,t,r)}computeStyle(n,t,r){return window.getComputedStyle(n)[t]}animate(n,t,r,i,s,d=[]){const v={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(v.easing=s);const _=new Map,C=d.filter(H=>H instanceof iZ);(function Mle(e,n){return 0===e||0===n})(r,i)&&C.forEach(H=>{H.currentSnapshot.forEach((ne,pe)=>_.set(pe,ne))});let S=function Cle(e){return e.length?e[0]instanceof Map?e:e.map(n=>Bj(n)):[]}(t).map(H=>Lf(H));S=function Tle(e,n,t){if(t.size&&n.length){let r=n[0],i=[];if(t.forEach((s,d)=>{r.has(d)||i.push(d),r.set(d,s)}),i.length)for(let s=1;s<n.length;s++){let d=n[s];i.forEach(p=>d.set(p,Gj(e,p)))}}return n}(n,S,_);const k=function yue(e,n){let t=null,r=null;return Array.isArray(n)&&n.length?(t=kV(n[0]),n.length>1&&(r=kV(n[n.length-1]))):n instanceof Map&&(t=kV(n)),t||r?new bue(e,t,r):null}(n,S);return new iZ(n,S,v,k)}}let wue=(()=>{class e extends _G{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:zo.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?bG(t):t;return aZ(this._renderer,null,r,"register",[i]),new Sue(r,this._renderer)}}return e.\u0275fac=function(t){return new(t||e)(Lt(Ap),Lt(Rr))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();class Sue extends class _K{}{constructor(n,t){super(),this._id=n,this._renderer=t}create(n,t){return new Due(this._id,n,t||{},this._renderer)}}class Due{constructor(n,t,r,i){this.id=n,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(n,t){return this._renderer.listen(this.element,`@@${this.id}:${n}`,t)}_command(n,...t){return aZ(this._renderer,this.element,this.id,n,t)}onDone(n){this._listen("done",n)}onStart(n){this._listen("start",n)}onDestroy(n){this._listen("destroy",n)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(n){this._command("setPosition",n)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function aZ(e,n,t,r,i){return e.setProperty(n,`@@${t}:${r}`,i)}const oZ="@.disabled";let Mue=(()=>{class e{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,d)=>{const p=d?.parentNode(s);p&&d.removeChild(p,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let C=this._rendererCache.get(s);return C||(C=new sZ("",s,this.engine),this._rendererCache.set(s,C)),C}const d=r.id,p=r.id+"-"+this._currentId;this._currentId++,this.engine.register(p,t);const v=C=>{Array.isArray(C)?C.forEach(v):this.engine.registerTrigger(d,p,t,C.name,C)};return r.data.animation.forEach(v),new Tue(this,p,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[d,p]=s;d(p)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return e.\u0275fac=function(t){return new(t||e)(Lt(Ap),Lt(mP),Lt(rr))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();class sZ{constructor(n,t,r){this.namespaceId=n,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(n,t){return this.delegate.createElement(n,t)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,t){this.delegate.appendChild(n,t),this.engine.onInsert(this.namespaceId,t,n,!1)}insertBefore(n,t,r,i=!0){this.delegate.insertBefore(n,t,r),this.engine.onInsert(this.namespaceId,t,n,i)}removeChild(n,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(n,t){return this.delegate.selectRootElement(n,t)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,t,r,i){this.delegate.setAttribute(n,t,r,i)}removeAttribute(n,t,r){this.delegate.removeAttribute(n,t,r)}addClass(n,t){this.delegate.addClass(n,t)}removeClass(n,t){this.delegate.removeClass(n,t)}setStyle(n,t,r,i){this.delegate.setStyle(n,t,r,i)}removeStyle(n,t,r){this.delegate.removeStyle(n,t,r)}setProperty(n,t,r){"@"==t.charAt(0)&&t==oZ?this.disableAnimations(n,!!r):this.delegate.setProperty(n,t,r)}setValue(n,t){this.delegate.setValue(n,t)}listen(n,t,r){return this.delegate.listen(n,t,r)}disableAnimations(n,t){this.engine.disableAnimations(n,t)}}class Tue extends sZ{constructor(n,t,r,i){super(t,r,i),this.factory=n,this.namespaceId=t}setProperty(n,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==oZ?this.disableAnimations(n,r=void 0===r||!!r):this.engine.process(this.namespaceId,n,t.slice(1),r):this.delegate.setProperty(n,t,r)}listen(n,t,r){if("@"==t.charAt(0)){const i=function Eue(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(n);let s=t.slice(1),d="";return"@"!=s.charAt(0)&&([s,d]=function Aue(e){const n=e.indexOf(".");return[e.substring(0,n),e.slice(n+1)]}(s)),this.engine.listen(this.namespaceId,i,s,d,p=>{this.factory.scheduleListenerCallback(p._data||-1,r,p)})}return this.delegate.listen(n,t,r)}}let Iue=(()=>{class e extends mP{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return e.\u0275fac=function(t){return new(t||e)(Lt(Rr),Lt(_V),Lt(AV),Lt(Fd))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();const lZ=[{provide:_G,useClass:wue},{provide:AV,useFactory:function Pue(){return new Kle}},{provide:mP,useClass:Iue},{provide:Ap,useFactory:function Rue(e,n,t){return new Mue(e,n,t)},deps:[gl,mP,rr]}],NV=[{provide:_V,useFactory:()=>new Cue},{provide:fs,useValue:"BrowserAnimations"},...lZ],uZ=[{provide:_V,useClass:kj},{provide:fs,useValue:"NoopAnimations"},...lZ];let Lue=(()=>{class e{static withConfig(t){return{ngModule:e,providers:t.disableAnimations?uZ:NV}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({providers:NV,imports:[Wz]}),e})(),Nue=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({imports:[BA,oi,BA,oi]}),e})(),dZ=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({imports:[oi,oi]}),e})(),Kue=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e}),e.\u0275inj=pr({imports:[BA,gy,oi,lB,kl,BA,oi,lB,dZ]}),e})();const Que={openCVDirPath:"assets/opencv/"};let que=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=er({type:e,bootstrap:[Ose]}),e.\u0275inj=pr({providers:[{provide:aW,useValue:mq}],imports:[BZ.forRoot({echarts:()=>Promise.resolve().then(z.bind(z,8775))}),JU,eJ,PJ,yee,kl,a4,QA,i4,Dq,cse,Cy.forRoot(Que),jJ,Kue,dZ,WG,Oq,qU,Nue,Bq,Wz,FG,uee,Lse,Lue]}),e})();(function yk(){eE=!1})(),wZ().bootstrapModule(que).catch(e=>console.error(e))},5845:(Bt,Qe,z)=>{z.d(Qe,{ZT:()=>Se});var ce=function(T,R){return(ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,M){E.__proto__=M}||function(E,M){for(var A in M)Object.prototype.hasOwnProperty.call(M,A)&&(E[A]=M[A])})(T,R)};function Se(T,R){if("function"!=typeof R&&null!==R)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function E(){this.constructor=T}ce(T,R),T.prototype=null===R?Object.create(R):(E.prototype=R.prototype,new E)}},908:(Bt,Qe,z)=>{z.d(Qe,{ZT:()=>Se});var ce=function(T,R){return(ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,M){E.__proto__=M}||function(E,M){for(var A in M)Object.prototype.hasOwnProperty.call(M,A)&&(E[A]=M[A])})(T,R)};function Se(T,R){if("function"!=typeof R&&null!==R)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function E(){this.constructor=T}ce(T,R),T.prototype=null===R?Object.create(R):(E.prototype=R.prototype,new E)}}},Bt=>{Bt(Bt.s=5071)}]);