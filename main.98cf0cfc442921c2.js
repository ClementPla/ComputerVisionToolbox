"use strict";(self.webpackChunkcv_toolbox=self.webpackChunkcv_toolbox||[]).push([[179],{8775:(Vt,Qe,H)=>{H.r(Qe),H.d(Qe,{Axis:()=>Se.RD,ChartView:()=>Se.TA,ComponentModel:()=>Se.tF,ComponentView:()=>Se.Ir,List:()=>Se.aV,Model:()=>Se.Hn,PRIORITY:()=>Se.Hr,SeriesModel:()=>Se.wJ,color:()=>Se.$_,connect:()=>Se.$j,dataTool:()=>Se.Ok,dependencies:()=>Se.HO,disConnect:()=>Se.eU,disconnect:()=>Se.zP,dispose:()=>Se.B9,env:()=>Se.OB,extendChartView:()=>Se.Zy,extendComponentModel:()=>Se.tv,extendComponentView:()=>Se.Sp,extendSeriesModel:()=>Se.Zr,format:()=>Se.WU,getCoordinateSystemDimensions:()=>Se.wL,getInstanceByDom:()=>Se.JE,getInstanceById:()=>Se.rp,getMap:()=>Se.FU,graphic:()=>Se.Q,helper:()=>Se._y,init:()=>Se.S1,innerDrawElementOnCanvas:()=>Se.z$,matrix:()=>Se.pI,number:()=>Se.Rx,parseGeoJSON:()=>Se.Nu,parseGeoJson:()=>Se.pQ,registerAction:()=>Se.zl,registerCoordinateSystem:()=>Se.RS,registerLayout:()=>Se.qR,registerLoading:()=>Se.yn,registerLocale:()=>Se.I2,registerMap:()=>Se.je,registerPostInit:()=>Se.sq,registerPostUpdate:()=>Se.Br,registerPreprocessor:()=>Se.ds,registerProcessor:()=>Se.Pu,registerTheme:()=>Se.aW,registerTransform:()=>Se.rV,registerUpdateLifecycle:()=>Se.YK,registerVisual:()=>Se.Og,setCanvasCreator:()=>Se.jQ,setPlatformAPI:()=>Se.g2,throttle:()=>Se.P2,time:()=>Se.XV,use:()=>Se.D$,util:()=>Se.D5,vector:()=>Se.xr,version:()=>Se.i8,zrUtil:()=>Se.gf,zrender:()=>Se.x_});var ue=H(5199),Se=H(3786),le=H(1659),ye=H(8541),ge=H(126),be=H(6766),Ce=H(1790),he=H(491),j=Math.sin,X=Math.cos,re=Math.PI,U=2*Math.PI,ee=180/re;const ie=function(){function c(){}return c.prototype.reset=function(s){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,s||4)},c.prototype.moveTo=function(s,a){this._add("M",s,a)},c.prototype.lineTo=function(s,a){this._add("L",s,a)},c.prototype.bezierCurveTo=function(s,a,l,u,h,p){this._add("C",s,a,l,u,h,p)},c.prototype.quadraticCurveTo=function(s,a,l,u){this._add("Q",s,a,l,u)},c.prototype.arc=function(s,a,l,u,h,p){this.ellipse(s,a,l,l,0,u,h,p)},c.prototype.ellipse=function(s,a,l,u,h,p,v,m){var L,y=v-p,x=!m,w=Math.abs(y),D=(0,ye.zT)(w-U)||(x?y>=U:-y>=U),I=y>0?y%U:y%U+U;L=!!D||!(0,ye.zT)(w)&&I>=re==!!x;var N=s+l*X(p),Z=a+u*j(p);this._start&&this._add("M",N,Z);var se=Math.round(h*ee);if(D){var _e=1/this._p,me=(x?1:-1)*(U-_e);this._add("A",l,u,se,1,+x,s+l*X(p+me),a+u*j(p+me)),_e>.01&&this._add("A",l,u,se,0,+x,N,Z)}else{var De=s+l*X(v),Pe=a+u*j(v);this._add("A",l,u,se,+L,+x,De,Pe)}},c.prototype.rect=function(s,a,l,u){this._add("M",s,a),this._add("l",l,0),this._add("l",0,u),this._add("l",-l,0),this._add("Z")},c.prototype.closePath=function(){this._d.length>0&&this._add("Z")},c.prototype._add=function(s,a,l,u,h,p,v,m,y){for(var x=[],w=this._p,D=1;D<arguments.length;D++){var I=arguments[D];if(isNaN(I))return void(this._invalid=!0);x.push(Math.round(I*w)/w)}this._d.push(s+x.join(" ")),this._start="Z"===s},c.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},c.prototype.getStr=function(){return this._str},c}();var K=H(9411),b=H(628),Y="none",Q=Math.round,G=["lineCap","miterLimit","lineJoin"],W=(0,b.map)(G,function(c){return"stroke-"+c.toLowerCase()});var V=H(2425),P="http://www.w3.org/2000/svg",T="http://www.w3.org/1999/xlink";function M(c){return document.createElementNS(P,c)}function A(c,s,a,l,u){return{tag:c,attrs:a||{},children:l,text:u,key:s}}function ce(c,s){var a=(s=s||{}).newline?"\n":"";return function l(u){var h=u.children,p=u.tag;return function O(c,s){var a=[];if(s)for(var l in s){var u=s[l],h=l;!1!==u&&(!0!==u&&null!=u&&(h+='="'+u+'"'),a.push(h))}return"<"+c+" "+a.join(" ")+">"}(p,u.attrs)+(0,V.F1)(u.text)+(h?""+a+(0,b.map)(h,function(m){return l(m)}).join(a)+a:"")+function B(c){return"</"+c+">"}(p)}(c)}function oe(c){return{zrId:c,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssClassIdx:0,cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function de(c,s,a,l){return A("svg","root",{width:c,height:s,xmlns:P,"xmlns:xlink":T,version:"1.1",baseProfile:"full",viewBox:!!l&&"0 0 "+c+" "+s},a)}var ne=H(6790),xe=H(9778),fe=H(7349),ve=H(1115),we=H(6410),Te={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},Ae="transform-origin";function Ee(c,s,a){var l=(0,b.extend)({},c.shape);(0,b.extend)(l,s),c.buildPath(a,l);var u=new ie;return u.reset((0,ye.Gk)(c)),a.rebuildPath(u,1),u.generateStr(),u.getStr()}function Ve(c,s){var a=s.originX,l=s.originY;(a||l)&&(c[Ae]=a+"px "+l+"px")}var He={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function We(c,s){var a=s.zrId+"-ani-"+s.cssAnimIdx++;return s.cssAnims[a]=c,a}function ct(c){return(0,b.isString)(c)?Te[c]?"cubic-bezier("+Te[c]+")":(0,we.H)(c)?c:"":""}function St(c,s,a,l){var u=c.animators,h=u.length,p=[];if(c instanceof ve.Z){var v=function $e(c,s,a){var h,p,u={};if((0,b.each)(c.shape.paths,function(m){var y=oe(a.zrId);y.animation=!0,St(m,{},y,!0);var x=y.cssAnims,w=y.cssNodes,D=(0,b.keys)(x),I=D.length;if(I){var L=x[p=D[I-1]];for(var N in L){var Z=L[N];u[N]=u[N]||{d:""},u[N].d+=Z.d||""}for(var se in w){var _e=w[se].animation;_e.indexOf(p)>=0&&(h=_e)}}}),h){s.d=!1;var v=We(u,a);return h.replace(p,v)}}(c,s,a);if(v)p.push(v);else if(!h)return}else if(!h)return;for(var m={},y=0;y<h;y++){var x=u[y],w=[x.getMaxTime()/1e3+"s"],D=ct(x.getClip().easing),I=x.getDelay();w.push(D||"linear"),I&&w.push(I/1e3+"s"),x.getLoop()&&w.push("infinite");var L=w.join(" ");m[L]=m[L]||[L,[]],m[L][1].push(x)}function N(_e){var me=_e[1],De=me.length,Pe={},Ie={},ke={},Ue="animation-timing-function";function Ye(or,wi,mi){for(var Bi=or.getTracks(),ao=or.getMaxTime(),go=0;go<Bi.length;go++){var la=Bi[go];if(la.needsAnimate()){var ba=la.keyframes,Aa=la.propName;if(mi&&(Aa=mi(Aa)),Aa)for(var ms=0;ms<ba.length;ms++){var ml=ba[ms],Yo=Math.round(ml.time/ao*100)+"%",ry=ct(ml.easing),au=ml.rawValue;((0,b.isString)(au)||(0,b.isNumber)(au))&&(wi[Yo]=wi[Yo]||{},wi[Yo][Aa]=ml.rawValue,ry&&(wi[Yo][Ue]=ry))}}}}for(var Ke=0;Ke<De;Ke++)(ut=(Je=me[Ke]).targetName)?"shape"===ut&&Ye(Je,Ie):!l&&Ye(Je,Pe);for(var pt in Pe){var yt={};(0,xe.kY)(yt,c),(0,b.extend)(yt,Pe[pt]);var wt=(0,ye.gA)(yt),kt=Pe[pt][Ue];ke[pt]=wt?{transform:wt}:{},Ve(ke[pt],yt),kt&&(ke[pt][Ue]=kt)}var en,Yt=!0;for(var pt in Ie){ke[pt]=ke[pt]||{};var dn=!en;kt=Ie[pt][Ue],dn&&(en=new fe.Z);var Fn=en.len();en.reset(),ke[pt].d=Ee(c,Ie[pt],en);var zn=en.len();if(!dn&&Fn!==zn){Yt=!1;break}kt&&(ke[pt][Ue]=kt)}if(!Yt)for(var pt in ke)delete ke[pt].d;if(!l)for(Ke=0;Ke<De;Ke++){var Je,ut;"style"===(ut=(Je=me[Ke]).targetName)&&Ye(Je,ke,function(Bi){return He[Bi]})}var Fr,dr=(0,b.keys)(ke),br=!0;for(Ke=1;Ke<dr.length;Ke++){var Ci=dr[Ke-1];if(ke[Ci][Ae]!==ke[dr[Ke]][Ae]){br=!1;break}Fr=ke[Ci][Ae]}if(br&&Fr){for(var pt in ke)ke[pt][Ae]&&delete ke[pt][Ae];s[Ae]=Fr}if((0,b.filter)(dr,function(or){return(0,b.keys)(ke[or]).length>0}).length)return We(ke,a)+" "+_e[0]+" both"}for(var Z in m)(v=N(m[Z]))&&p.push(v);if(p.length){var se=a.zrId+"-cls-"+a.cssClassIdx++;a.cssNodes["."+se]={animation:p.join(",")},s.class=se}}var _t=H(8208),Ot=H(5730),Ht=Math.round;function an(c){return c&&(0,b.isString)(c.src)}function hn(c){return c&&(0,b.isFunction)(c.toDataURL)}function Vn(c,s,a,l){(function J(c,s,a,l){var u=s.opacity??1;if(a instanceof be.ZP)c("opacity",u);else{if(function F(c){var s=c.fill;return null!=s&&s!==Y}(s)){var h=(0,ye.ut)(s.fill);c("fill",h.color);var p=null!=s.fillOpacity?s.fillOpacity*h.opacity*u:h.opacity*u;(l||p<1)&&c("fill-opacity",p)}else c("fill",Y);if(function q(c){var s=c.stroke;return null!=s&&s!==Y}(s)){var v=(0,ye.ut)(s.stroke);c("stroke",v.color);var m=s.strokeNoScale?a.getLineScale():1,y=m?(s.lineWidth||0)/m:0,x=null!=s.strokeOpacity?s.strokeOpacity*v.opacity*u:v.opacity*u,w=s.strokeFirst;if((l||1!==y)&&c("stroke-width",y),(l||w)&&c("paint-order",w?"stroke":"fill"),(l||x<1)&&c("stroke-opacity",x),s.lineDash){var D=(0,K.a)(a),I=D[0],L=D[1];I&&(L=Q(L||0),c("stroke-dasharray",I.join(",")),(L||l)&&c("stroke-dashoffset",L))}else l&&c("stroke-dasharray",Y);for(var N=0;N<G.length;N++){var Z=G[N];if(l||s[Z]!==ge.$t[Z]){var se=s[Z]||ge.$t[Z];se&&c(W[N],se)}}}else l&&c("stroke",Y)}})(function(u,h){var p="fill"===u||"stroke"===u;p&&(0,ye.H3)(h)?function fr(c,s,a,l){var h,u=c[a],p={gradientUnits:u.global?"userSpaceOnUse":"objectBoundingBox"};if((0,ye.I1)(u))h="linearGradient",p.x1=u.x,p.y1=u.y,p.x2=u.x2,p.y2=u.y2;else{if(!(0,ye.gO)(u))return;h="radialGradient",p.cx=(0,b.retrieve2)(u.x,.5),p.cy=(0,b.retrieve2)(u.y,.5),p.r=(0,b.retrieve2)(u.r,.5)}for(var v=u.colorStops,m=[],y=0,x=v.length;y<x;++y){var w=100*(0,ye.Pn)(v[y].offset)+"%",I=(0,ye.ut)(v[y].color),N=I.opacity,Z={offset:w};Z["stop-color"]=I.color,N<1&&(Z["stop-opacity"]=N),m.push(A("stop",y+"",Z))}var _e=ce(A(h,"",p,m)),me=l.gradientCache,De=me[_e];De||(De=l.zrId+"-g"+l.gradientIdx++,me[_e]=De,p.id=De,l.defs[De]=A(h,De,p,m)),s[a]=(0,ye.m1)(De)}(s,c,u,l):p&&(0,ye.R)(h)?function pr(c,s,a,l){var p,u=c.style[a],h={patternUnits:"userSpaceOnUse"};if((0,ye.Cv)(u)){var v=u.imageWidth,m=u.imageHeight,y=void 0,x=u.image;if((0,b.isString)(x)?y=x:an(x)?y=x.src:hn(x)&&(y=x.toDataURL()),typeof Image>"u"){var w="Image width/height must been given explictly in svg-ssr renderer.";(0,b.assert)(v,w),(0,b.assert)(m,w)}else if(null==v||null==m){var D=function(_e,me){if(_e){var De=_e.elm,Pe=_e.attrs.width=v||me.width,Ie=_e.attrs.height=m||me.height;De&&(De.setAttribute("width",Pe),De.setAttribute("height",Ie))}},I=(0,ne.Gq)(y,null,c,function(_e){D(L,_e),D(p,_e)});I&&I.width&&I.height&&(v=v||I.width,m=m||I.height)}p=A("image","img",{href:y,width:v,height:m}),h.width=v,h.height=m}else u.svgElement&&(p=(0,b.clone)(u.svgElement),h.width=u.svgWidth,h.height=u.svgHeight);if(p){h.patternTransform=(0,ye.gA)(u);var L=A("pattern","",h,[p]),N=ce(L),Z=l.patternCache,se=Z[N];se||(se=l.zrId+"-p"+l.patternIdx++,Z[N]=se,h.id=se,L=l.defs[se]=A("pattern",se,h,[p])),s[a]=(0,ye.m1)(se)}}(a,c,u,l):c[u]=h},s,a,!1),function fn(c,s,a){var l=c.style;if((0,ye.i2)(l)){var u=(0,ye.n1)(c),h=a.shadowCache,p=h[u];if(!p){var v=c.getGlobalScale(),m=v[0],y=v[1];if(!m||!y)return;var x=l.shadowOffsetX||0,w=l.shadowOffsetY||0,D=l.shadowBlur,I=(0,ye.ut)(l.shadowColor),L=I.opacity,N=I.color,_e=D/2/m+" "+D/2/y;p=a.zrId+"-s"+a.shadowIdx++,a.defs[p]=A("filter",p,{id:p,x:"-100%",y:"-100%",width:"300%",height:"300%"},[A("feDropShadow","",{dx:x/m,dy:w/y,stdDeviation:_e,"flood-color":N,"flood-opacity":L})]),h[u]=p}s.filter=(0,ye.m1)(p)}}(a,c,l)}function sr(c){return(0,ye.zT)(c[0]-1)&&(0,ye.zT)(c[1])&&(0,ye.zT)(c[2])&&(0,ye.zT)(c[3]-1)}function gr(c,s,a){if(s&&(!function $n(c){return(0,ye.zT)(c[4])&&(0,ye.zT)(c[5])}(s)||!sr(s))){var l=a?10:1e4;c.transform=sr(s)?"translate("+Ht(s[4]*l)/l+" "+Ht(s[5]*l)/l+")":(0,ye.qV)(s)}}function er(c,s,a){for(var l=c.points,u=[],h=0;h<l.length;h++)u.push(Ht(l[h][0]*a)/a),u.push(Ht(l[h][1]*a)/a);s.points=u.join(" ")}function Kt(c){return!c.smooth}var On={circle:[function cn(c){var s=(0,b.map)(c,function(a){return"string"==typeof a?[a,a]:a});return function(a,l,u){for(var h=0;h<s.length;h++){var p=s[h],v=a[p[0]];null!=v&&(l[p[1]]=Ht(v*u)/u)}}}(["cx","cy","r"])],polyline:[er,Kt],polygon:[er,Kt]};function et(c,s){var a=c.style,l=c.shape,u=On[c.type],h={},p=s.animation,v="path",m=c.style.strokePercent,y=s.compress&&(0,ye.Gk)(c)||4;if(!u||s.willUpdate||u[1]&&!u[1](l)||p&&function jn(c){for(var s=c.animators,a=0;a<s.length;a++)if("shape"===s[a].targetName)return!0;return!1}(c)||m<1){c.path||c.createPathProxy();var w=c.path;c.shapeChanged()&&(w.beginPath(),c.buildPath(w,c.shape),c.pathUpdated());var D=w.getVersion(),I=c,L=I.__svgPathBuilder;(I.__svgPathVersion!==D||!L||m!==I.__svgPathStrokePercent)&&(L||(L=I.__svgPathBuilder=new ie),L.reset(y),w.rebuildPath(L,m),L.generateStr(),I.__svgPathVersion=D,I.__svgPathStrokePercent=m),h.d=L.getStr()}else{v=c.type;var x=Math.pow(10,y);u[0](l,h,x)}return gr(h,c.transform),Vn(h,a,c,s),s.animation&&St(c,h,s),A(v,c.id+"",h)}function Rt(c,s){return c instanceof ge.ZP?et(c,s):c instanceof be.ZP?function Tt(c,s){var a=c.style,l=a.image;if(l&&!(0,b.isString)(l)&&(an(l)?l=l.src:hn(l)&&(l=l.toDataURL())),l){var u=a.x||0,h=a.y||0,m={href:l,width:a.width,height:a.height};return u&&(m.x=u),h&&(m.y=h),gr(m,c.transform),Vn(m,a,c,s),s.animation&&St(c,m,s),A("image",c.id+"",m)}}(c,s):c instanceof he.Z?function jt(c,s){var a=c.style,l=a.text;if(null!=l&&(l+=""),l&&!isNaN(a.x)&&!isNaN(a.y)){var u=a.font||Ot.Uo,h=a.x||0,p=(0,ye.mU)(a.y||0,(0,Ce.Dp)(u),a.textBaseline),m={"dominant-baseline":"central","text-anchor":ye.jY[a.textAlign]||a.textAlign};if((0,_t.Y1)(a)){var y="",x=a.fontStyle,w=(0,_t.VG)(a.fontSize);if(!parseFloat(w))return;var I=a.fontWeight;y+="font-size:"+w+";font-family:"+(a.fontFamily||Ot.rk)+";",x&&"normal"!==x&&(y+="font-style:"+x+";"),I&&"normal"!==I&&(y+="font-weight:"+I+";"),m.style=y}else m.style="font: "+u;return l.match(/\s/)&&(m["xml:space"]="preserve"),h&&(m.x=h),p&&(m.y=p),gr(m,c.transform),Vn(m,a,c,s),s.animation&&St(c,m,s),A("text",c.id+"",m,void 0,l)}}(c,s):void 0}function rt(c,s,a){var l=a.clipPathCache,u=a.defs,h=l[c.id];if(!h){var p={id:h=a.zrId+"-c"+a.clipPathIdx++};l[c.id]=h,u[h]=A("clipPath",h,p,[et(c,a)])}s["clip-path"]=(0,ye.m1)(h)}function ot(c){return document.createTextNode(c)}function je(c,s,a){c.insertBefore(s,a)}function gt(c,s){c.removeChild(s)}function ht(c,s){c.appendChild(s)}function Pt(c){return c.parentNode}function tn(c){return c.nextSibling}function Tn(c,s){c.textContent=s}var Cs=A("","");function Sa(c){return void 0===c}function Ja(c){return void 0!==c}function ua(c,s,a){for(var l={},u=s;u<=a;++u){var h=c[u].key;void 0!==h&&(l[h]=u)}return l}function $s(c,s){return c.tag===s.tag&&c.key===s.key}function La(c){var s,a=c.children,l=c.tag;if(Ja(l)){var u=c.elm=M(l);if(hu(Cs,c),(0,b.isArray)(a))for(s=0;s<a.length;++s){var h=a[s];null!=h&&ht(u,La(h))}else Ja(c.text)&&!(0,b.isObject)(c.text)&&ht(u,ot(c.text))}else c.elm=ot(c.text);return c.elm}function fh(c,s,a,l,u){for(;l<=u;++l){var h=a[l];null!=h&&je(c,La(h),s)}}function ph(c,s,a,l){for(;a<=l;++a){var u=s[a];null!=u&&(Ja(u.tag)?gt(Pt(u.elm),u.elm):gt(c,u.elm))}}function hu(c,s){var a,l=s.elm,u=c&&c.attrs||{},h=s.attrs||{};if(u!==h){for(a in h){var p=h[a];u[a]!==p&&(!0===p?l.setAttribute(a,""):!1===p?l.removeAttribute(a):120!==a.charCodeAt(0)?l.setAttribute(a,p):"xmlns:xlink"===a||"xmlns"===a?l.setAttributeNS("http://www.w3.org/2000/xmlns/",a,p):58===a.charCodeAt(3)?l.setAttributeNS("http://www.w3.org/XML/1998/namespace",a,p):58===a.charCodeAt(5)?l.setAttributeNS(T,a,p):l.setAttribute(a,p))}for(a in u)a in h||l.removeAttribute(a)}}function Bc(c,s){var a=s.elm=c.elm,l=c.children,u=s.children;c!==s&&(hu(c,s),Sa(s.text)?Ja(l)&&Ja(u)?l!==u&&function Ff(c,s,a){for(var w,D,I,l=0,u=0,h=s.length-1,p=s[0],v=s[h],m=a.length-1,y=a[0],x=a[m];l<=h&&u<=m;)null==p?p=s[++l]:null==v?v=s[--h]:null==y?y=a[++u]:null==x?x=a[--m]:$s(p,y)?(Bc(p,y),p=s[++l],y=a[++u]):$s(v,x)?(Bc(v,x),v=s[--h],x=a[--m]):$s(p,x)?(Bc(p,x),je(c,p.elm,tn(v.elm)),p=s[++l],x=a[--m]):$s(v,y)?(Bc(v,y),je(c,v.elm,p.elm),v=s[--h],y=a[++u]):(Sa(w)&&(w=ua(s,l,h)),Sa(D=w[y.key])||(I=s[D]).tag!==y.tag?je(c,La(y),p.elm):(Bc(I,y),s[D]=void 0,je(c,I.elm,p.elm)),y=a[++u]);(l<=h||u<=m)&&(l>h?fh(c,null==a[m+1]?null:a[m+1].elm,a,u,m):ph(c,s,l,h))}(a,l,u):Ja(u)?(Ja(c.text)&&Tn(a,""),fh(a,null,u,0,u.length-1)):Ja(l)?ph(a,l,0,l.length-1):Ja(c.text)&&Tn(a,""):c.text!==s.text&&(Ja(l)&&ph(a,l,0,l.length-1),Tn(a,s.text)))}var hv=H(7072),fv=0;const t0=function(){function c(s,a,l){if(this.type="svg",this.refreshHover=function(){},this.configLayer=function(){},this.storage=a,this._opts=l=(0,b.extend)({},l),this.root=s,this._id="zr"+fv++,this._oldVNode=de(l.width,l.height),s&&!l.ssr){var u=this._viewport=document.createElement("div");u.style.cssText="position:relative;overflow:hidden";var h=this._svgDom=this._oldVNode.elm=M("svg");hu(null,this._oldVNode),u.appendChild(h),s.appendChild(u)}this.resize(l.width,l.height)}return c.prototype.getType=function(){return this.type},c.prototype.getViewportRoot=function(){return this._viewport},c.prototype.getViewportRootOffset=function(){var s=this.getViewportRoot();if(s)return{offsetLeft:s.offsetLeft||0,offsetTop:s.offsetTop||0}},c.prototype.getSvgDom=function(){return this._svgDom},c.prototype.refresh=function(){if(this.root){var s=this.renderToVNode({willUpdate:!0});s.attrs.style="position:absolute;left:0;top:0;user-select:none",function id(c,s){if($s(c,s))Bc(c,s);else{var a=c.elm,l=Pt(a);La(s),null!==l&&(je(l,s.elm,tn(a)),ph(l,[c],0,0))}}(this._oldVNode,s),this._oldVNode=s}},c.prototype.renderOneToVNode=function(s){return Rt(s,oe(this._id))},c.prototype.renderToVNode=function(s){s=s||{};var a=this.storage.getDisplayList(!0),l=this._backgroundColor,u=this._width,h=this._height,p=oe(this._id);p.animation=s.animation,p.willUpdate=s.willUpdate,p.compress=s.compress;var v=[];if(l&&"none"!==l){var m=(0,ye.ut)(l);this._bgVNode=A("rect","bg",{width:u,height:h,x:"0",y:"0",id:"0",fill:m.color,"fill-opacity":m.opacity}),v.push(this._bgVNode)}else this._bgVNode=null;var w=s.compress?null:this._mainVNode=A("g","main",{},[]);this._paintList(a,p,w?w.children:v),w&&v.push(w);var D=(0,b.map)((0,b.keys)(p.defs),function(N){return p.defs[N]});if(D.length&&v.push(A("defs","defs",{},D)),s.animation){var I=function ae(c,s,a){var l=(a=a||{}).newline?"\n":"",u=" {"+l,h=l+"}",p=(0,b.map)((0,b.keys)(c),function(m){return m+u+(0,b.map)((0,b.keys)(c[m]),function(y){return y+":"+c[m][y]+";"}).join(l)+h}).join(l),v=(0,b.map)((0,b.keys)(s),function(m){return"@keyframes "+m+u+(0,b.map)((0,b.keys)(s[m]),function(y){return y+u+(0,b.map)((0,b.keys)(s[m][y]),function(x){var w=s[m][y][x];return"d"===x&&(w='path("'+w+'")'),x+":"+w+";"}).join(l)+h}).join(l)+h}).join(l);return p||v?["<![CDATA[",p,v,"]]>"].join(l):""}(p.cssNodes,p.cssAnims,{newline:!0});if(I){var L=A("style","stl",{},[],I);v.push(L)}}return de(u,h,v,s.useViewBox)},c.prototype.renderToString=function(s){return ce(this.renderToVNode({animation:(0,b.retrieve2)((s=s||{}).cssAnimation,!0),willUpdate:!1,compress:!0,useViewBox:(0,b.retrieve2)(s.useViewBox,!0)}),{newline:!0})},c.prototype.setBackgroundColor=function(s){this._backgroundColor=s;var a=this._bgVNode;if(a&&a.elm){var l=(0,ye.ut)(s),h=l.opacity;a.elm.setAttribute("fill",l.color),h<1&&a.elm.setAttribute("fill-opacity",h)}},c.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},c.prototype._paintList=function(s,a,l){for(var v,m,u=s.length,h=[],p=0,y=0,x=0;x<u;x++){var w=s[x];if(!w.invisible){var D=w.__clipPaths,I=D&&D.length||0,L=m&&m.length||0,N=void 0;for(N=Math.max(I-1,L-1);N>=0&&(!D||!m||D[N]!==m[N]);N--);for(var Z=L-1;Z>N;Z--)v=h[--p-1];for(var se=N+1;se<I;se++){var _e={};rt(D[se],_e,a);var me=A("g","clip-g-"+y++,_e,[]);(v?v.children:l).push(me),h[p++]=me,v=me}m=D;var De=Rt(w,a);De&&(v?v.children:l).push(De)}}},c.prototype.resize=function(s,a){var l=this._opts,u=this.root,h=this._viewport;if(null!=s&&(l.width=s),null!=a&&(l.height=a),u&&h&&(h.style.display="none",s=(0,hv.ap)(u,0,l),a=(0,hv.ap)(u,1,l),h.style.display=""),this._width!==s||this._height!==a){if(this._width=s,this._height=a,h){var p=h.style;p.width=s+"px",p.height=a+"px"}var v=this._svgDom;v&&(v.setAttribute("width",s),v.setAttribute("height",a))}},c.prototype.getWidth=function(){return this._width},c.prototype.getHeight=function(){return this._height},c.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},c.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},c.prototype.toDataURL=function(s){var a=encodeURIComponent(this.renderToString()),l="data:image/svg+xml;";return s?(a=(0,ye.oF)(a))&&l+"base64,"+a:l+"charset=UTF-8,"+a},c}();var At=H(5845),Ks=H(405),Xi=H(9521),si=H(4550),Rn=H(8539);const Bf=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.hasSymbolVisual=!0,a}return(0,At.ZT)(s,c),s.prototype.getInitialData=function(a){return(0,Ks.Z)(null,this,{useEncodeDefaulter:!0})},s.prototype.getLegendIcon=function(a){var l=new Rn.Z,u=(0,si.th)("line",0,a.itemHeight/2,a.itemWidth,0,a.lineStyle.stroke,!1);l.add(u),u.setStyle(a.lineStyle);var h=this.getData().getVisual("symbol"),p=this.getData().getVisual("symbolRotate"),v="none"===h?"circle":h,m=.8*a.itemHeight,y=(0,si.th)(v,(a.itemWidth-m)/2,(a.itemHeight-m)/2,m,m,a.itemStyle.fill);return l.add(y),y.setStyle(a.itemStyle),y.rotation=("inherit"===a.iconRotate?p:a.iconRotate||0)*Math.PI/180,y.setOrigin([a.itemWidth/2,a.itemHeight/2]),v.indexOf("empty")>-1&&(y.style.stroke=y.style.fill,y.style.fill="#fff",y.style.lineWidth=2),l},s.type="series.line",s.dependencies=["grid","polar"],s.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},s}(Xi.Z);var Sn=H(3802),_n=H(2429),Tr=H(7282),Wt=H(6869),ad=H(67);function El(c,s){var a=c.mapDimensionsAll("defaultedLabel"),l=a.length;if(1===l){var u=(0,ad.hk)(c,s,a[0]);return null!=u?u+"":null}if(l){for(var h=[],p=0;p<a.length;p++)h.push((0,ad.hk)(c,s,a[p]));return h.join(" ")}}function zr(c,s){var a=c.mapDimensionsAll("defaultedLabel");if(!(0,b.isArray)(s))return s+"";for(var l=[],u=0;u<a.length;u++){var h=c.getDimensionIndex(a[u]);h>=0&&l.push(s[h])}return l.join(" ")}var qt=H(1081);function vv(c,s){this.parent.drift(c,s)}const Jt=function(c){function s(a,l,u,h){var p=c.call(this)||this;return p.updateData(a,l,u,h),p}return(0,At.ZT)(s,c),s.prototype._createSymbol=function(a,l,u,h,p){this.removeAll();var v=(0,si.th)(a,-1,-1,2,2,null,p);v.attr({z2:100,culling:!0,scaleX:h[0]/2,scaleY:h[1]/2}),v.drift=vv,this._symbolType=a,this.add(v)},s.prototype.stopSymbolAnimation=function(a){this.childAt(0).stopAnimation(null,a)},s.prototype.getSymbolType=function(){return this._symbolType},s.prototype.getSymbolPath=function(){return this.childAt(0)},s.prototype.highlight=function(){(0,Wt.fD)(this.childAt(0))},s.prototype.downplay=function(){(0,Wt.Mh)(this.childAt(0))},s.prototype.setZ=function(a,l){var u=this.childAt(0);u.zlevel=a,u.z=l},s.prototype.setDraggable=function(a,l){var u=this.childAt(0);u.draggable=a,u.cursor=!l&&a?"move":u.cursor},s.prototype.updateData=function(a,l,u,h){this.silent=!1;var p=a.getItemVisual(l,"symbol")||"circle",v=a.hostModel,m=s.getSymbolSize(a,l),y=p!==this._symbolType,x=h&&h.disableAnimation;if(y){var w=a.getItemVisual(l,"symbolKeepAspect");this._createSymbol(p,a,l,m,w)}else{(D=this.childAt(0)).silent=!1;var I={scaleX:m[0]/2,scaleY:m[1]/2};x?D.attr(I):Sn.D(D,I,v,l),(0,Sn.Zi)(D)}if(this._updateCommon(a,l,m,u,h),y){var D=this.childAt(0);x||(I={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:D.style.opacity}},D.scaleX=D.scaleY=0,D.style.opacity=0,Sn.KZ(D,I,v,l))}x&&this.childAt(0).stopAnimation("leave")},s.prototype._updateCommon=function(a,l,u,h,p){var y,x,w,D,I,L,N,Z,se,v=this.childAt(0),m=a.hostModel;if(h&&(y=h.emphasisItemStyle,x=h.blurItemStyle,w=h.selectItemStyle,D=h.focus,I=h.blurScope,N=h.labelStatesModels,Z=h.hoverScale,se=h.cursorStyle,L=h.emphasisDisabled),!h||a.hasItemOption){var _e=h&&h.itemModel?h.itemModel:a.getItemModel(l),me=_e.getModel("emphasis");y=me.getModel("itemStyle").getItemStyle(),w=_e.getModel(["select","itemStyle"]).getItemStyle(),x=_e.getModel(["blur","itemStyle"]).getItemStyle(),D=me.get("focus"),I=me.get("blurScope"),L=me.get("disabled"),N=(0,qt.k3)(_e),Z=me.getShallow("scale"),se=_e.getShallow("cursor")}var De=a.getItemVisual(l,"symbolRotate");v.attr("rotation",(De||0)*Math.PI/180||0);var Pe=(0,si.Cq)(a.getItemVisual(l,"symbolOffset"),u);Pe&&(v.x=Pe[0],v.y=Pe[1]),se&&v.attr("cursor",se);var Ie=a.getItemVisual(l,"style"),ke=Ie.fill;if(v instanceof be.ZP){var Ue=v.style;v.useStyle((0,b.extend)({image:Ue.image,x:Ue.x,y:Ue.y,width:Ue.width,height:Ue.height},Ie))}else v.useStyle(v.__isEmptyBrush?(0,b.extend)({},Ie):Ie),v.style.decal=null,v.setColor(ke,p&&p.symbolInnerColor),v.style.strokeNoScale=!0;var Ye=a.getItemVisual(l,"liftZ"),Ke=this._z2;null!=Ye?null==Ke&&(this._z2=v.z2,v.z2+=Ye):null!=Ke&&(v.z2=Ke,this._z2=null);var Je=p&&p.useNameLabel;(0,qt.ni)(v,N,{labelFetcher:m,labelDataIndex:l,defaultText:function ut(wt){return Je?a.getName(wt):El(a,wt)},inheritColor:ke,defaultOpacity:Ie.opacity}),this._sizeX=u[0]/2,this._sizeY=u[1]/2;var pt=v.ensureState("emphasis");pt.style=y,v.ensureState("select").style=w,v.ensureState("blur").style=x;var yt=null==Z||!0===Z?Math.max(1.1,3/this._sizeY):isFinite(Z)&&Z>0?+Z:1;pt.scaleX=this._sizeX*yt,pt.scaleY=this._sizeY*yt,this.setSymbolScale(1),(0,Wt.k5)(this,D,I,L)},s.prototype.setSymbolScale=function(a){this.scaleX=this.scaleY=a},s.prototype.fadeOut=function(a,l,u){var h=this.childAt(0),p=(0,Tr.A)(this).dataIndex,v=u&&u.animation;if(this.silent=h.silent=!0,u&&u.fadeLabel){var m=h.getTextContent();m&&Sn.bX(m,{style:{opacity:0}},l,{dataIndex:p,removeOpt:v,cb:function(){h.removeTextContent()}})}else h.removeTextContent();Sn.bX(h,{style:{opacity:0},scaleX:0,scaleY:0},l,{dataIndex:p,cb:a,removeOpt:v})},s.getSymbolSize=function(a,l){return(0,si.zp)(a.getItemVisual(l,"symbolSize"))},s}(Rn.Z);function ql(c,s,a,l){return s&&!isNaN(s[0])&&!isNaN(s[1])&&!(l.isIgnore&&l.isIgnore(a))&&!(l.clipShape&&!l.clipShape.contain(s[0],s[1]))&&"none"!==c.getItemVisual(a,"symbol")}function Pr(c){return null!=c&&!(0,b.isObject)(c)&&(c={isIgnore:c}),c||{}}function bi(c){var s=c.hostModel,a=s.getModel("emphasis");return{emphasisItemStyle:a.getModel("itemStyle").getItemStyle(),blurItemStyle:s.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:s.getModel(["select","itemStyle"]).getItemStyle(),focus:a.get("focus"),blurScope:a.get("blurScope"),emphasisDisabled:a.get("disabled"),hoverScale:a.get("scale"),labelStatesModels:(0,qt.k3)(s),cursorStyle:s.get("cursor")}}const od=function(){function c(s){this.group=new Rn.Z,this._SymbolCtor=s||Jt}return c.prototype.updateData=function(s,a){this._progressiveEls=null,a=Pr(a);var l=this.group,u=s.hostModel,h=this._data,p=this._SymbolCtor,v=a.disableAnimation,m=bi(s),y={disableAnimation:v},x=a.getSymbolPoint||function(w){return s.getItemLayout(w)};h||l.removeAll(),s.diff(h).add(function(w){var D=x(w);if(ql(s,D,w,a)){var I=new p(s,w,m,y);I.setPosition(D),s.setItemGraphicEl(w,I),l.add(I)}}).update(function(w,D){var I=h.getItemGraphicEl(D),L=x(w);if(ql(s,L,w,a)){var N=s.getItemVisual(w,"symbol")||"circle",Z=I&&I.getSymbolType&&I.getSymbolType();if(!I||Z&&Z!==N)l.remove(I),(I=new p(s,w,m,y)).setPosition(L);else{I.updateData(s,w,m,y);var se={x:L[0],y:L[1]};v?I.attr(se):Sn.D(I,se,u)}l.add(I),s.setItemGraphicEl(w,I)}else l.remove(I)}).remove(function(w){var D=h.getItemGraphicEl(w);D&&D.fadeOut(function(){l.remove(D)},u)}).execute(),this._getSymbolPoint=x,this._data=s},c.prototype.updateLayout=function(){var s=this,a=this._data;a&&a.eachItemGraphicEl(function(l,u){var h=s._getSymbolPoint(u);l.setPosition(h),l.markRedraw()})},c.prototype.incrementalPrepareUpdate=function(s){this._seriesScope=bi(s),this._data=null,this.group.removeAll()},c.prototype.incrementalUpdate=function(s,a,l){function u(m){m.isGroup||(m.incremental=!0,m.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[],l=Pr(l);for(var h=s.start;h<s.end;h++){var p=a.getItemLayout(h);if(ql(a,p,h,l)){var v=new this._SymbolCtor(a,h,this._seriesScope);v.traverse(u),v.setPosition(p),this.group.add(v),a.setItemGraphicEl(h,v),this._progressiveEls.push(v)}}},c.prototype.eachRendered=function(s){_n.traverseElements(this._progressiveEls||this.group,s)},c.prototype.remove=function(s){var a=this.group,l=this._data;l&&s?l.eachItemGraphicEl(function(u){u.fadeOut(function(){a.remove(u)},l.hostModel)}):a.removeAll()},c}();var Jl=H(143);function sd(c,s,a){var l=c.getBaseAxis(),u=c.getOtherAxis(l),h=function es(c,s){var a=0,l=c.scale.getExtent();return"start"===s?a=l[0]:"end"===s?a=l[1]:(0,b.isNumber)(s)&&!isNaN(s)?a=s:l[0]>0?a=l[0]:l[1]<0&&(a=l[1]),a}(u,a),p=l.dim,v=u.dim,m=s.mapDimension(v),y=s.mapDimension(p),x="x"===v||"radius"===v?1:0,w=(0,b.map)(c.dimensions,function(L){return s.mapDimension(L)}),D=!1,I=s.getCalculationInfo("stackResultDimension");return(0,Jl.M)(s,w[0])&&(D=!0,w[0]=I),(0,Jl.M)(s,w[1])&&(D=!0,w[1]=I),{dataDimsForPoint:w,valueStart:h,valueAxisDim:v,baseAxisDim:p,stacked:!!D,valueDim:m,baseDim:y,baseDataOffset:x,stackedOverDimension:s.getCalculationInfo("stackedOverDimension")}}function zf(c,s,a,l){var u=NaN;c.stacked&&(u=a.get(a.getCalculationInfo("stackedOverDimension"),l)),isNaN(u)&&(u=c.valueStart);var h=c.baseDataOffset,p=[];return p[h]=a.get(c.baseDim,l),p[1-h]=u,s.dataToPoint(p)}var Qs=H(3133),Hf=H(5910),xn=H(1266),ws=H(9969),ec=Math.min,tc=Math.max;function fu(c,s){return isNaN(c)||isNaN(s)}function Uf(c,s,a,l,u,h,p,v,m){for(var y,x,w,D,I,L,N=a,Z=0;Z<l;Z++){var se=s[2*N],_e=s[2*N+1];if(N>=u||N<0)break;if(fu(se,_e)){if(m){N+=h;continue}break}if(N===a)c[h>0?"moveTo":"lineTo"](se,_e),w=se,D=_e;else{var me=se-y,De=_e-x;if(me*me+De*De<.5){N+=h;continue}if(p>0){for(var Pe=N+h,Ie=s[2*Pe],ke=s[2*Pe+1];Ie===se&&ke===_e&&Z<l;)Z++,Ie=s[2*(Pe+=h)],ke=s[2*Pe+1],me=(se=s[2*(N+=h)])-y,De=(_e=s[2*N+1])-x;var Ue=Z+1;if(m)for(;fu(Ie,ke)&&Ue<l;)Ue++,Ie=s[2*(Pe+=h)],ke=s[2*Pe+1];var Ye=.5,Ke=0,Je=0,ut=void 0,pt=void 0;if(Ue>=l||fu(Ie,ke))I=se,L=_e;else{Ke=Ie-y,Je=ke-x;var yt=se-y,wt=Ie-se,kt=_e-x,en=ke-_e,Yt=void 0,dn=void 0;if("x"===v){var Fn=Ke>0?1:-1;I=se-Fn*(Yt=Math.abs(yt))*p,L=_e,ut=se+Fn*(dn=Math.abs(wt))*p,pt=_e}else if("y"===v){var zn=Je>0?1:-1;I=se,L=_e-zn*(Yt=Math.abs(kt))*p,ut=se,pt=_e+zn*(dn=Math.abs(en))*p}else Yt=Math.sqrt(yt*yt+kt*kt),I=se-Ke*p*(1-(Ye=(dn=Math.sqrt(wt*wt+en*en))/(dn+Yt))),L=_e-Je*p*(1-Ye),pt=_e+Je*p*Ye,ut=ec(ut=se+Ke*p*Ye,tc(Ie,se)),pt=ec(pt,tc(ke,_e)),ut=tc(ut,ec(Ie,se)),L=_e-(Je=(pt=tc(pt,ec(ke,_e)))-_e)*Yt/dn,I=ec(I=se-(Ke=ut-se)*Yt/dn,tc(y,se)),L=ec(L,tc(x,_e)),ut=se+(Ke=se-(I=tc(I,ec(y,se))))*dn/Yt,pt=_e+(Je=_e-(L=tc(L,ec(x,_e))))*dn/Yt}c.bezierCurveTo(w,D,I,L,se,_e),w=ut,D=pt}else c.lineTo(se,_e)}y=se,x=_e,N+=h}return Z}var o0=function c(){this.smooth=0,this.smoothConstraint=!0},ts=function(c){function s(a){var l=c.call(this,a)||this;return l.type="ec-polyline",l}return(0,At.ZT)(s,c),s.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},s.prototype.getDefaultShape=function(){return new o0},s.prototype.buildPath=function(a,l){var u=l.points,h=0,p=u.length/2;if(l.connectNulls){for(;p>0&&fu(u[2*p-2],u[2*p-1]);p--);for(;h<p&&fu(u[2*h],u[2*h+1]);h++);}for(;h<p;)h+=Uf(a,u,h,p,p,1,l.smooth,l.smoothMonotone,l.connectNulls)+1},s.prototype.getPointOn=function(a,l){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var v,m,h=this.path.data,p=fe.Z.CMD,y="x"===l,x=[],w=0;w<h.length;){var I=void 0,L=void 0,N=void 0,Z=void 0,se=void 0,_e=void 0,me=void 0;switch(h[w++]){case p.M:v=h[w++],m=h[w++];break;case p.L:if(I=h[w++],L=h[w++],(me=y?(a-v)/(I-v):(a-m)/(L-m))<=1&&me>=0){var De=y?(L-m)*me+m:(I-v)*me+v;return y?[a,De]:[De,a]}v=I,m=L;break;case p.C:I=h[w++],L=h[w++],N=h[w++],Z=h[w++],se=h[w++],_e=h[w++];var Pe=y?(0,ws.kD)(v,I,N,se,a,x):(0,ws.kD)(m,L,Z,_e,a,x);if(Pe>0)for(var Ie=0;Ie<Pe;Ie++){var ke=x[Ie];if(ke<=1&&ke>=0)return De=y?(0,ws.af)(m,L,Z,_e,ke):(0,ws.af)(v,I,N,se,ke),y?[a,De]:[De,a]}v=se,m=_e}}},s}(ge.ZP),Ii=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,At.ZT)(s,c),s}(o0),s0=function(c){function s(a){var l=c.call(this,a)||this;return l.type="ec-polygon",l}return(0,At.ZT)(s,c),s.prototype.getDefaultShape=function(){return new Ii},s.prototype.buildPath=function(a,l){var u=l.points,h=l.stackedOnPoints,p=0,v=u.length/2,m=l.smoothMonotone;if(l.connectNulls){for(;v>0&&fu(u[2*v-2],u[2*v-1]);v--);for(;p<v&&fu(u[2*p],u[2*p+1]);p++);}for(;p<v;){var y=Uf(a,u,p,v,v,1,l.smooth,m,l.connectNulls);Uf(a,h,p+y-1,y,v,-1,l.stackedOnSmooth,m,l.connectNulls),p+=y+1,a.closePath()}},s}(ge.ZP),ia=H(1005),Mi=H(3160),yn=H(9770),It=H(4785);function ur(c,s,a,l,u){var h=c.getArea(),p=h.x,v=h.y,m=h.width,y=h.height,x=a.get(["lineStyle","width"])||2;p-=x/2,v-=x/2,m+=x,y+=x,p=Math.floor(p),m=Math.round(m);var w=new Mi.Z({shape:{x:p,y:v,width:m,height:y}});if(s){var D=c.getBaseAxis(),I=D.isHorizontal(),L=D.inverse;I?(L&&(w.shape.x+=m),w.shape.width=0):(L||(w.shape.y+=y),w.shape.height=0);var N=(0,b.isFunction)(u)?function(Z){u(Z,w)}:null;Sn.KZ(w,{shape:{width:m,height:y,x:p,y:v}},a,null,l,N)}return w}function pu(c,s,a){var l=c.getArea(),u=(0,It.NM)(l.r0,1),h=(0,It.NM)(l.r,1),p=new yn.C({shape:{cx:(0,It.NM)(c.cx,1),cy:(0,It.NM)(c.cy,1),r0:u,r:h,startAngle:l.startAngle,endAngle:l.endAngle,clockwise:l.clockwise}});return s&&("angle"===c.getBaseAxis().dim?p.shape.endAngle=l.startAngle:p.shape.r=u,Sn.KZ(p,{shape:{endAngle:l.endAngle,r:h}},a)),p}function gh(c,s,a,l,u){return c?"polar"===c.type?pu(c,s,a):"cartesian2d"===c.type?ur(c,s,a,l,u):null:null}function Rs(c,s){return c.type===s}var Va=H(9706),Da=H(312);function Gf(c,s){if(c.length===s.length){for(var a=0;a<c.length;a++)if(c[a]!==s[a])return;return!0}}function gu(c){for(var s=1/0,a=1/0,l=-1/0,u=-1/0,h=0;h<c.length;){var p=c[h++],v=c[h++];isNaN(p)||(s=Math.min(p,s),l=Math.max(p,l)),isNaN(v)||(a=Math.min(v,a),u=Math.max(v,u))}return[[s,a],[l,u]]}function vh(c,s){var a=gu(c),l=a[0],u=a[1],h=gu(s),p=h[0],v=h[1];return Math.max(Math.abs(l[0]-p[0]),Math.abs(l[1]-p[1]),Math.abs(u[0]-v[0]),Math.abs(u[1]-v[1]))}function za(c){return b.isNumber(c)?c:c?.5:0}function nr(c,s,a,l){var u=s.getBaseAxis(),h="x"===u.dim||"radius"===u.dim?0:1,p=[],v=0,m=[],y=[],x=[],w=[];if(l){for(v=0;v<c.length;v+=2)!isNaN(c[v])&&!isNaN(c[v+1])&&w.push(c[v],c[v+1]);c=w}for(v=0;v<c.length-2;v+=2)switch(x[0]=c[v+2],x[1]=c[v+3],y[0]=c[v],y[1]=c[v+1],p.push(y[0],y[1]),a){case"end":m[h]=x[h],m[1-h]=y[1-h],p.push(m[0],m[1]);break;case"middle":var I=[];m[h]=I[h]=(y[h]+x[h])/2,m[1-h]=y[1-h],I[1-h]=x[1-h],p.push(m[0],m[1]),p.push(I[0],I[1]);break;default:m[h]=y[h],m[1-h]=x[1-h],p.push(m[0],m[1])}return p.push(c[v++],c[v++]),p}function Mw(c,s){return isNaN(c)||isNaN(s)}function rs(c,s){return[c[2*s],c[2*s+1]]}function _v(c){if(c.get(["endLabel","show"]))return!0;for(var s=0;s<Wt.L1.length;s++)if(c.get([Wt.L1[s],"endLabel","show"]))return!0;return!1}function zo(c,s,a,l){if(Rs(s,"cartesian2d")){var u=l.getModel("endLabel"),h=u.get("valueAnimation"),p=l.getData(),v={lastFrameIndex:0},m=_v(l)?function(I,L){c._endLabelOnDuring(I,L,p,v,h,u,s)}:null,y=s.getBaseAxis().isHorizontal(),x=ur(s,a,l,function(){var I=c._endLabel;I&&a&&null!=v.originalX&&I.attr({x:v.originalX,y:v.originalY})},m);if(!l.get("clip",!0)){var w=x.shape,D=Math.max(w.width,w.height);y?(w.y-=D,w.height+=2*D):(w.x-=D,w.width+=2*D)}return m&&m(1,x),x}return pu(s,a,l)}const jf=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,At.ZT)(s,c),s.prototype.init=function(){var a=new Rn.Z,l=new od;this.group.add(l.group),this._symbolDraw=l,this._lineGroup=a},s.prototype.render=function(a,l,u){var h=this,p=a.coordinateSystem,v=this.group,m=a.getData(),y=a.getModel("lineStyle"),x=a.getModel("areaStyle"),w=m.getLayout("points")||[],D="polar"===p.type,I=this._coordSys,L=this._symbolDraw,N=this._polyline,Z=this._polygon,se=this._lineGroup,_e=a.get("animation"),me=!x.isEmpty(),De=x.get("origin"),Pe=sd(p,m,De),Ie=me&&function Vo(c,s,a){if(!a.valueDim)return[];for(var l=s.count(),u=(0,Qs.o)(2*l),h=0;h<l;h++){var p=zf(a,c,s,h);u[2*h]=p[0],u[2*h+1]=p[1]}return u}(p,m,Pe),ke=a.get("showSymbol"),Ue=a.get("connectNulls"),Ye=ke&&!D&&function ns(c,s,a){var l=c.get("showAllSymbol"),u="auto"===l;if(!l||u){var h=a.getAxesByScale("ordinal")[0];if(h&&(!u||!function mv(c,s){var a=c.getExtent(),l=Math.abs(a[1]-a[0])/c.scale.count();isNaN(l)&&(l=0);for(var u=s.count(),h=Math.max(1,Math.round(u/5)),p=0;p<u;p+=h)if(1.5*Jt.getSymbolSize(s,p)[c.isHorizontal()?1:0]>l)return!1;return!0}(h,s))){var p=s.mapDimension(h.dim),v={};return b.each(h.getViewLabels(),function(m){var y=h.scale.getRawOrdinalNumber(m.tickValue);v[y]=1}),function(m){return!v.hasOwnProperty(s.get(p,m))}}}}(a,m,p),Ke=this._data;Ke&&Ke.eachItemGraphicEl(function(Oi,Yr){Oi.__temp&&(v.remove(Oi),Ke.setItemGraphicEl(Yr,null))}),ke||L.remove(),v.add(se);var ut,Je=!D&&a.get("step");p&&p.getArea&&a.get("clip",!0)&&(null!=(ut=p.getArea()).width?(ut.x-=.1,ut.y-=.1,ut.width+=.2,ut.height+=.2):ut.r0&&(ut.r0-=.5,ut.r+=.5)),this._clipShapeForSymbol=ut;var pt=function Wf(c,s,a){var l=c.getVisual("visualMeta");if(l&&l.length&&c.count()&&"cartesian2d"===s.type){for(var u,h,p=l.length-1;p>=0;p--){var v=c.getDimensionInfo(l[p].dimension);if("x"===(u=v&&v.coordDim)||"y"===u){h=l[p];break}}if(h){var m=s.getAxis(u),y=b.map(h.stops,function(me){return{coord:m.toGlobalCoord(m.dataToCoord(me.value)),color:me.color}}),x=y.length,w=h.outerColors.slice();x&&y[0].coord>y[x-1].coord&&(y.reverse(),w.reverse());var D=function mh(c,s){var u,h,a=[],l=c.length;function p(x,w,D){var I=x.coord;return{coord:D,color:(0,Da.lerp)((D-I)/(w.coord-I),[x.color,w.color])}}for(var v=0;v<l;v++){var m=c[v],y=m.coord;if(y<0)u=m;else{if(y>s){h?a.push(p(h,m,s)):u&&a.push(p(u,m,0),p(u,m,s));break}u&&(a.push(p(u,m,0)),u=null),a.push(m),h=m}}return a}(y,"x"===u?a.getWidth():a.getHeight()),I=D.length;if(!I&&x)return y[0].coord<0?w[1]?w[1]:y[x-1].color:w[0]?w[0]:y[0].color;var N=D[0].coord-10,Z=D[I-1].coord+10,se=Z-N;if(se<.001)return"transparent";b.each(D,function(me){me.offset=(me.coord-N)/se}),D.push({offset:I?D[I-1].offset:.5,color:w[1]||"transparent"}),D.unshift({offset:I?D[0].offset:.5,color:w[0]||"transparent"});var _e=new Hf.Z(0,0,0,0,D,!0);return _e[u]=N,_e[u+"2"]=Z,_e}}}(m,p,u)||m.getVisual("style")[m.getVisual("drawType")];if(N&&I.type===p.type&&Je===this._step){me&&!Z?Z=this._newPolygon(w,Ie):Z&&!me&&(se.remove(Z),Z=this._polygon=null),D||this._initOrUpdateEndLabel(a,p,(0,Va.Lz)(pt));var yt=se.getClipPath();if(yt){var wt=zo(this,p,!1,a);Sn.KZ(yt,{shape:wt.shape},a)}else se.setClipPath(zo(this,p,!0,a));ke&&L.updateData(m,{isIgnore:Ye,clipShape:ut,disableAnimation:!0,getSymbolPoint:function(Oi){return[w[2*Oi],w[2*Oi+1]]}}),(!Gf(this._stackedOnPoints,Ie)||!Gf(this._points,w))&&(_e?this._doUpdateAnimation(m,Ie,p,u,Je,De,Ue):(Je&&(w=nr(w,p,Je,Ue),Ie&&(Ie=nr(Ie,p,Je,Ue))),N.setShape({points:w}),Z&&Z.setShape({points:w,stackedOnPoints:Ie})))}else ke&&L.updateData(m,{isIgnore:Ye,clipShape:ut,disableAnimation:!0,getSymbolPoint:function(Oi){return[w[2*Oi],w[2*Oi+1]]}}),_e&&this._initSymbolLabelAnimation(m,p,ut),Je&&(w=nr(w,p,Je,Ue),Ie&&(Ie=nr(Ie,p,Je,Ue))),N=this._newPolyline(w),me?Z=this._newPolygon(w,Ie):Z&&(se.remove(Z),Z=this._polygon=null),D||this._initOrUpdateEndLabel(a,p,(0,Va.Lz)(pt)),se.setClipPath(zo(this,p,!0,a));var kt=a.getModel("emphasis"),en=kt.get("focus"),Yt=kt.get("blurScope"),dn=kt.get("disabled");N.useStyle(b.defaults(y.getLineStyle(),{fill:"none",stroke:pt,lineJoin:"bevel"})),(0,Wt.WO)(N,a,"lineStyle"),N.style.lineWidth>0&&"bolder"===a.get(["emphasis","lineStyle","width"])&&(N.getState("emphasis").style.lineWidth=+N.style.lineWidth+1),(0,Tr.A)(N).seriesIndex=a.seriesIndex,(0,Wt.k5)(N,en,Yt,dn);var zn=za(a.get("smooth")),dr=a.get("smoothMonotone");if(N.setShape({smooth:zn,smoothMonotone:dr,connectNulls:Ue}),Z){var br=m.getCalculationInfo("stackedOnSeries"),Fr=0;Z.useStyle(b.defaults(x.getAreaStyle(),{fill:pt,opacity:.7,lineJoin:"bevel",decal:m.getVisual("style").decal})),br&&(Fr=za(br.get("smooth"))),Z.setShape({smooth:zn,stackedOnSmooth:Fr,smoothMonotone:dr,connectNulls:Ue}),(0,Wt.WO)(Z,a,"areaStyle"),(0,Tr.A)(Z).seriesIndex=a.seriesIndex,(0,Wt.k5)(Z,en,Yt,dn)}var Ci=function(Oi){h._changePolyState(Oi)};m.eachItemGraphicEl(function(Oi){Oi&&(Oi.onHoverStateChange=Ci)}),this._polyline.onHoverStateChange=Ci,this._data=m,this._coordSys=p,this._stackedOnPoints=Ie,this._points=w,this._step=Je,this._valueOrigin=De,a.get("triggerLineEvent")&&(this.packEventData(a,N),Z&&this.packEventData(a,Z))},s.prototype.packEventData=function(a,l){(0,Tr.A)(l).eventData={componentType:"series",componentSubType:"line",componentIndex:a.componentIndex,seriesIndex:a.seriesIndex,seriesName:a.name,seriesType:"line"}},s.prototype.highlight=function(a,l,u,h){var p=a.getData(),v=xn.gO(p,h);if(this._changePolyState("emphasis"),!(v instanceof Array)&&null!=v&&v>=0){var m=p.getLayout("points"),y=p.getItemGraphicEl(v);if(!y){var x=m[2*v],w=m[2*v+1];if(isNaN(x)||isNaN(w)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(x,w))return;var D=a.get("zlevel")||0,I=a.get("z")||0;(y=new Jt(p,v)).x=x,y.y=w,y.setZ(D,I);var L=y.getSymbolPath().getTextContent();L&&(L.zlevel=D,L.z=I,L.z2=this._polyline.z2+1),y.__temp=!0,p.setItemGraphicEl(v,y),y.stopSymbolAnimation(!0),this.group.add(y)}y.highlight()}else ia.Z.prototype.highlight.call(this,a,l,u,h)},s.prototype.downplay=function(a,l,u,h){var p=a.getData(),v=xn.gO(p,h);if(this._changePolyState("normal"),null!=v&&v>=0){var m=p.getItemGraphicEl(v);m&&(m.__temp?(p.setItemGraphicEl(v,null),this.group.remove(m)):m.downplay())}else ia.Z.prototype.downplay.call(this,a,l,u,h)},s.prototype._changePolyState=function(a){var l=this._polygon;(0,Wt.Gl)(this._polyline,a),l&&(0,Wt.Gl)(l,a)},s.prototype._newPolyline=function(a){var l=this._polyline;return l&&this._lineGroup.remove(l),l=new ts({shape:{points:a},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(l),this._polyline=l,l},s.prototype._newPolygon=function(a,l){var u=this._polygon;return u&&this._lineGroup.remove(u),u=new s0({shape:{points:a,stackedOnPoints:l},segmentIgnoreThreshold:2}),this._lineGroup.add(u),this._polygon=u,u},s.prototype._initSymbolLabelAnimation=function(a,l,u){var h,p,v=l.getBaseAxis(),m=v.inverse;"cartesian2d"===l.type?(h=v.isHorizontal(),p=!1):"polar"===l.type&&(h="angle"===v.dim,p=!0);var y=a.hostModel,x=y.get("animationDuration");b.isFunction(x)&&(x=x(null));var w=y.get("animationDelay")||0,D=b.isFunction(w)?w(null):w;a.eachItemGraphicEl(function(I,L){var N=I;if(N){var se=void 0,_e=void 0,me=void 0;if(u)if(p){var De=u,Pe=l.pointToCoord([I.x,I.y]);h?(se=De.startAngle,_e=De.endAngle,me=-Pe[1]/180*Math.PI):(se=De.r0,_e=De.r,me=Pe[0])}else h?(se=u.x,_e=u.x+u.width,me=I.x):(se=u.y+u.height,_e=u.y,me=I.y);var ke=_e===se?0:(me-se)/(_e-se);m&&(ke=1-ke);var Ue=b.isFunction(w)?w(L):x*ke+D,Ye=N.getSymbolPath(),Ke=Ye.getTextContent();N.attr({scaleX:0,scaleY:0}),N.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:Ue}),Ke&&Ke.animateFrom({style:{opacity:0}},{duration:300,delay:Ue}),Ye.disableLabelAnimation=!0}})},s.prototype._initOrUpdateEndLabel=function(a,l,u){var h=a.getModel("endLabel");if(_v(a)){var p=a.getData(),v=this._polyline,m=p.getLayout("points");if(!m)return v.removeTextContent(),void(this._endLabel=null);var y=this._endLabel;y||((y=this._endLabel=new _t.ZP({z2:200})).ignoreClip=!0,v.setTextContent(this._endLabel),v.disableLabelAnimation=!0);var x=function Il(c){for(var s=c.length/2;s>0&&Mw(c[2*s-2],c[2*s-1]);s--);return s-1}(m);x>=0&&((0,qt.ni)(v,(0,qt.k3)(a,"endLabel"),{inheritColor:u,labelFetcher:a,labelDataIndex:x,defaultText:function(w,D,I){return null!=I?zr(p,I):El(p,w)},enableTextSetter:!0},function Ti(c,s){var a=s.getBaseAxis(),l=a.isHorizontal(),u=a.inverse,h=l?u?"right":"left":"center",p=l?"middle":u?"top":"bottom";return{normal:{align:c.get("align")||h,verticalAlign:c.get("verticalAlign")||p}}}(h,l)),v.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},s.prototype._endLabelOnDuring=function(a,l,u,h,p,v,m){var y=this._endLabel,x=this._polyline;if(y){a<1&&null==h.originalX&&(h.originalX=y.x,h.originalY=y.y);var w=u.getLayout("points"),D=u.hostModel,I=D.get("connectNulls"),L=v.get("precision"),N=v.get("distance")||0,Z=m.getBaseAxis(),se=Z.isHorizontal(),_e=Z.inverse,me=l.shape,De=_e?se?me.x:me.y+me.height:se?me.x+me.width:me.y,Pe=(se?N:0)*(_e?-1:1),Ie=(se?0:-N)*(_e?-1:1),ke=se?"x":"y",Ue=function l0(c,s,a){for(var h,p,l=c.length/2,u="x"===a?0:1,v=0,m=-1,y=0;y<l;y++)if(p=c[2*y+u],!isNaN(p)&&!isNaN(c[2*y+1-u])){if(0===y){h=p;continue}if(h<=s&&p>=s||h>=s&&p<=s){m=y;break}v=y,h=p}return{range:[v,m],t:(s-h)/(p-h)}}(w,De,ke),Ye=Ue.range,Ke=Ye[1]-Ye[0],Je=void 0;if(Ke>=1){if(Ke>1&&!I){var ut=rs(w,Ye[0]);y.attr({x:ut[0]+Pe,y:ut[1]+Ie}),p&&(Je=D.getRawValue(Ye[0]))}else{(ut=x.getPointOn(De,ke))&&y.attr({x:ut[0]+Pe,y:ut[1]+Ie});var pt=D.getRawValue(Ye[0]),yt=D.getRawValue(Ye[1]);p&&(Je=xn.pk(u,L,pt,yt,Ue.t))}h.lastFrameIndex=Ye[0]}else{var wt=1===a||h.lastFrameIndex>0?Ye[0]:0;ut=rs(w,wt),p&&(Je=D.getRawValue(wt)),y.attr({x:ut[0]+Pe,y:ut[1]+Ie})}p&&(0,qt.qA)(y).setLabelText(Je)}},s.prototype._doUpdateAnimation=function(a,l,u,h,p,v,m){var y=this._polyline,x=this._polygon,w=a.hostModel,D=function Al(c,s,a,l,u,h,p,v){for(var m=function a0(c,s){var a=[];return s.diff(c).add(function(l){a.push({cmd:"+",idx:l})}).update(function(l,u){a.push({cmd:"=",idx:u,idx1:l})}).remove(function(l){a.push({cmd:"-",idx:l})}).execute(),a}(c,s),y=[],x=[],w=[],D=[],I=[],L=[],N=[],Z=sd(u,s,p),se=c.getLayout("points")||[],_e=s.getLayout("points")||[],me=0;me<m.length;me++){var De=m[me],Pe=!0,Ie=void 0,ke=void 0;switch(De.cmd){case"=":var Ue=se[Ie=2*De.idx],Ye=se[Ie+1],Ke=_e[ke=2*De.idx1],Je=_e[ke+1];(isNaN(Ue)||isNaN(Ye))&&(Ue=Ke,Ye=Je),y.push(Ue,Ye),x.push(Ke,Je),w.push(a[Ie],a[Ie+1]),D.push(l[ke],l[ke+1]),N.push(s.getRawIndex(De.idx1));break;case"+":var ut=De.idx,pt=Z.dataDimsForPoint,yt=u.dataToPoint([s.get(pt[0],ut),s.get(pt[1],ut)]);ke=2*ut,y.push(yt[0],yt[1]),x.push(_e[ke],_e[ke+1]);var wt=zf(Z,u,s,ut);w.push(wt[0],wt[1]),D.push(l[ke],l[ke+1]),N.push(s.getRawIndex(ut));break;case"-":Pe=!1}Pe&&(I.push(De),L.push(L.length))}L.sort(function(Ci,Oi){return N[Ci]-N[Oi]});var kt=y.length,en=(0,Qs.o)(kt),Yt=(0,Qs.o)(kt),dn=(0,Qs.o)(kt),Fn=(0,Qs.o)(kt),zn=[];for(me=0;me<L.length;me++){var dr=L[me],br=2*me,Fr=2*dr;en[br]=y[Fr],en[br+1]=y[Fr+1],Yt[br]=x[Fr],Yt[br+1]=x[Fr+1],dn[br]=w[Fr],dn[br+1]=w[Fr+1],Fn[br]=D[Fr],Fn[br+1]=D[Fr+1],zn[me]=I[dr]}return{current:en,next:Yt,stackedOnCurrent:dn,stackedOnNext:Fn,status:zn}}(this._data,a,this._stackedOnPoints,l,this._coordSys,0,this._valueOrigin),I=D.current,L=D.stackedOnCurrent,N=D.next,Z=D.stackedOnNext;if(p&&(I=nr(D.current,u,p,m),L=nr(D.stackedOnCurrent,u,p,m),N=nr(D.next,u,p,m),Z=nr(D.stackedOnNext,u,p,m)),vh(I,N)>3e3||x&&vh(L,Z)>3e3)return y.stopAnimation(),y.setShape({points:N}),void(x&&(x.stopAnimation(),x.setShape({points:N,stackedOnPoints:Z})));y.shape.__points=D.current,y.shape.points=I;var se={shape:{points:N}};D.current!==I&&(se.shape.__points=D.next),y.stopAnimation(),Sn.D(y,se,w),x&&(x.setShape({points:I,stackedOnPoints:L}),x.stopAnimation(),Sn.D(x,{shape:{stackedOnPoints:Z}},w),y.shape.points!==x.shape.points&&(x.shape.points=y.shape.points));for(var _e=[],me=D.status,De=0;De<me.length;De++)if("="===me[De].cmd){var Ie=a.getItemGraphicEl(me[De].idx1);Ie&&_e.push({el:Ie,ptIdx:De})}y.animators&&y.animators.length&&y.animators[0].during(function(){x&&x.dirtyShape();for(var ke=y.shape.__points,Ue=0;Ue<_e.length;Ue++){var Ye=_e[Ue].el,Ke=2*_e[Ue].ptIdx;Ye.x=ke[Ke],Ye.y=ke[Ke+1],Ye.markRedraw()}})},s.prototype.remove=function(a){var l=this.group,u=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),u&&u.eachItemGraphicEl(function(h,p){h.__temp&&(l.remove(h),u.setItemGraphicEl(p,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},s.type="line",s}(ia.Z);var co=H(5103);function ni(c,s){return{seriesType:c,plan:(0,co.Z)(),reset:function(a){var l=a.getData(),u=a.coordinateSystem,p=s||a.pipelineContext.large;if(u){var v=(0,b.map)(u.dimensions,function(I){return l.mapDimension(I)}).slice(0,2),m=v.length,y=l.getCalculationInfo("stackResultDimension");(0,Jl.M)(l,v[0])&&(v[0]=y),(0,Jl.M)(l,v[1])&&(v[1]=y);var x=l.getStore(),w=l.getDimensionIndex(v[0]),D=l.getDimensionIndex(v[1]);return m&&{progress:function(I,L){for(var Z=p&&(0,Qs.o)((I.end-I.start)*m),se=[],_e=[],me=I.start,De=0;me<I.end;me++){var Pe=void 0;if(1===m){var Ie=x.get(w,me);Pe=u.dataToPoint(Ie,null,_e)}else se[0]=x.get(w,me),se[1]=x.get(D,me),Pe=u.dataToPoint(se,null,_e);p?(Z[De++]=Pe[0],Z[De++]=Pe[1]):L.setItemLayout(me,Pe.slice())}p&&L.setLayout("points",Z)}}}}}}var vu={average:function(c){for(var s=0,a=0,l=0;l<c.length;l++)isNaN(c[l])||(s+=c[l],a++);return 0===a?NaN:s/a},sum:function(c){for(var s=0,a=0;a<c.length;a++)s+=c[a]||0;return s},max:function(c){for(var s=-1/0,a=0;a<c.length;a++)c[a]>s&&(s=c[a]);return isFinite(s)?s:NaN},min:function(c){for(var s=1/0,a=0;a<c.length;a++)c[a]<s&&(s=c[a]);return isFinite(s)?s:NaN},nearest:function(c){return c[0]}},ld=function(c){return Math.round(c.length/2)};function nc(c){return{seriesType:c,reset:function(s,a,l){var u=s.getData(),h=s.get("sampling"),p=s.coordinateSystem,v=u.count();if(v>10&&"cartesian2d"===p.type&&h){var m=p.getBaseAxis(),y=p.getOtherAxis(m),x=m.getExtent(),w=l.getDevicePixelRatio(),D=Math.abs(x[1]-x[0])*(w||1),I=Math.round(v/D);if(isFinite(I)&&I>1){"lttb"===h&&s.setData(u.lttbDownSample(u.mapDimension(y.dim),1/I));var L=void 0;(0,b.isString)(h)?L=vu[h]:(0,b.isFunction)(h)&&(L=h),L&&s.setData(u.downSample(u.mapDimension(y.dim),1/I,L,ld))}}}}}var Ho=H(2154),Vc=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.getInitialData=function(a,l){return(0,Ks.Z)(null,this,{useEncodeDefaulter:!0})},s.prototype.getMarkerPosition=function(a){var l=this.coordinateSystem;if(l&&l.clampData){var u=l.dataToPoint(l.clampData(a)),h=this.getData(),p=h.getLayout("offset"),v=h.getLayout("size");return u[l.getBaseAxis().isHorizontal()?0:1]+=p+v/2,u}return[NaN,NaN]},s.type="series.__base_bar__",s.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},s}(Xi.Z);Xi.Z.registerClass(Vc);const _u=Vc;var Zn=H(2015);const Zf=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.getInitialData=function(){return(0,Ks.Z)(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},s.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},s.prototype.getProgressiveThreshold=function(){var a=this.get("progressiveThreshold"),l=this.get("largeThreshold");return l>a&&(a=l),a},s.prototype.brushSelector=function(a,l,u){return u.rect(l.getItemLayout(a))},s.type="series.bar",s.dependencies=["grid","polar"],s.defaultOption=(0,Zn.ZL)(_u.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),s}(_u);var Uo=H(357),tr=function c(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0};const rc=function(c){function s(a){var l=c.call(this,a)||this;return l.type="sausage",l}return(0,At.ZT)(s,c),s.prototype.getDefaultShape=function(){return new tr},s.prototype.buildPath=function(a,l){var u=l.cx,h=l.cy,p=Math.max(l.r0||0,0),v=Math.max(l.r,0),m=.5*(v-p),y=p+m,x=l.startAngle,w=l.endAngle,D=l.clockwise,I=2*Math.PI,L=D?w-x<I:x-w<I;L||(x=w-(D?I:-I));var N=Math.cos(x),Z=Math.sin(x),se=Math.cos(w),_e=Math.sin(w);L?(a.moveTo(N*p+u,Z*p+h),a.arc(N*y+u,Z*y+h,m,-Math.PI+x,x,!D)):a.moveTo(N*v+u,Z*v+h),a.arc(u,h,v,x,w,!D),a.arc(se*y+u,_e*y+h,m,w-2*Math.PI,w-Math.PI,!D),0!==p&&a.arc(u,h,p,w,x,D)},s}(ge.ZP);function Ei(c,s,a){return s*Math.sin(c)*(a?-1:1)}function pa(c,s,a){return s*Math.cos(c)*(a?1:-1)}var ga=Math.max,qs=Math.min,To=function(c){function s(){var a=c.call(this)||this;return a.type=s.type,a._isFirstFrame=!0,a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u,h){this._model=a,this._removeOnRenderedListener(u),this._updateDrawMode(a);var p=a.get("coordinateSystem");("cartesian2d"===p||"polar"===p)&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(a,l,u):this._renderNormal(a,l,u,h))},s.prototype.incrementalPrepareRender=function(a){this._clear(),this._updateDrawMode(a),this._updateLargeClip(a)},s.prototype.incrementalRender=function(a,l){this._progressiveEls=[],this._incrementalRenderLarge(a,l)},s.prototype.eachRendered=function(a){(0,_n.traverseElements)(this._progressiveEls||this.group,a)},s.prototype._updateDrawMode=function(a){var l=a.pipelineContext.large;(null==this._isLargeDraw||l!==this._isLargeDraw)&&(this._isLargeDraw=l,this._clear())},s.prototype._renderNormal=function(a,l,u,h){var w,p=this.group,v=a.getData(),m=this._data,y=a.coordinateSystem,x=y.getBaseAxis();"cartesian2d"===y.type?w=x.isHorizontal():"polar"===y.type&&(w="angle"===x.dim);var D=a.isAnimationEnabled()?a:null,I=function Pi(c,s){var a=c.get("realtimeSort",!0),l=s.getBaseAxis();if(a&&"category"===l.type&&"cartesian2d"===s.type)return{baseAxis:l,otherAxis:s.getOtherAxis(l)}}(a,y);I&&this._enableRealtimeSort(I,v,u);var L=a.get("clip",!0)||I,N=function Mo(c,s){var a=c.getArea&&c.getArea();if(Rs(c,"cartesian2d")){var l=c.getBaseAxis();if("category"!==l.type||!l.onBand){var u=s.getLayout("bandWidth");l.isHorizontal()?(a.x-=u,a.width+=2*u):(a.y-=u,a.height+=2*u)}}return a}(y,v);p.removeClipPath();var Z=a.get("roundCap",!0),se=a.get("showBackground",!0),_e=a.getModel("backgroundStyle"),me=_e.get("borderRadius")||0,De=[],Pe=this._backgroundEls,Ie=h&&h.isInitSort,ke=h&&"changeAxisOrder"===h.type;function Ue(Je){var ut=ac[y.type](v,Je),pt=function sc(c,s,a){return new("polar"===c.type?yn.C:Mi.Z)({shape:Ss(s,a,c),silent:!0,z2:0})}(y,w,ut);return pt.useStyle(_e.getItemStyle()),"cartesian2d"===y.type&&pt.setShape("r",me),De[Je]=pt,pt}v.diff(m).add(function(Je){var ut=v.getItemModel(Je),pt=ac[y.type](v,Je,ut);if(se&&Ue(Je),v.hasValue(Je)&&aa[y.type](pt)){var yt=!1;L&&(yt=Nn[y.type](N,pt));var wt=Lr[y.type](a,v,Je,pt,w,D,x.model,!1,Z);I&&(wt.forceLabelAnimation=!0),cd(wt,v,Je,ut,pt,a,w,"polar"===y.type),Ie?wt.attr({shape:pt}):I?eo(I,D,wt,pt,Je,w,!1,!1):(0,Sn.KZ)(wt,{shape:pt},a,Je),v.setItemGraphicEl(Je,wt),p.add(wt),wt.ignore=yt}}).update(function(Je,ut){var pt=v.getItemModel(Je),yt=ac[y.type](v,Je,pt);if(se){var wt=void 0;0===Pe.length?wt=Ue(ut):((wt=Pe[ut]).useStyle(_e.getItemStyle()),"cartesian2d"===y.type&&wt.setShape("r",me),De[Je]=wt);var kt=ac[y.type](v,Je),en=Ss(w,kt,y);(0,Sn.D)(wt,{shape:en},D,Je)}var Yt=m.getItemGraphicEl(ut);if(v.hasValue(Je)&&aa[y.type](yt)){var dn=!1;if(L&&(dn=Nn[y.type](N,yt))&&p.remove(Yt),Yt?(0,Sn.Zi)(Yt):Yt=Lr[y.type](a,v,Je,yt,w,D,x.model,!!Yt,Z),I&&(Yt.forceLabelAnimation=!0),ke){var Fn=Yt.getTextContent();if(Fn){var zn=(0,qt.qA)(Fn);null!=zn.prevValue&&(zn.prevValue=zn.value)}}else cd(Yt,v,Je,pt,yt,a,w,"polar"===y.type);Ie?Yt.attr({shape:yt}):I?eo(I,D,Yt,yt,Je,w,!0,ke):(0,Sn.D)(Yt,{shape:yt},a,Je,null),v.setItemGraphicEl(Je,Yt),Yt.ignore=dn,p.add(Yt)}else p.remove(Yt)}).remove(function(Je){var ut=m.getItemGraphicEl(Je);ut&&(0,Sn.XD)(ut,a,Je)}).execute();var Ye=this._backgroundGroup||(this._backgroundGroup=new Rn.Z);Ye.removeAll();for(var Ke=0;Ke<De.length;++Ke)Ye.add(De[Ke]);p.add(Ye),this._backgroundEls=De,this._data=v},s.prototype._renderLarge=function(a,l,u){this._clear(),Ua(a,this.group),this._updateLargeClip(a)},s.prototype._incrementalRenderLarge=function(a,l){this._removeBackground(),Ua(l,this.group,this._progressiveEls,!0)},s.prototype._updateLargeClip=function(a){var l=a.get("clip",!0)&&gh(a.coordinateSystem,!1,a),u=this.group;l?u.setClipPath(l):u.removeClipPath()},s.prototype._enableRealtimeSort=function(a,l,u){var h=this;if(l.count()){var p=a.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(l,a,u),this._isFirstFrame=!1;else{var v=function(m){var y=l.getItemGraphicEl(m),x=y&&y.shape;return x&&Math.abs(p.isHorizontal()?x.height:x.width)||0};this._onRendered=function(){h._updateSortWithinSameData(l,v,p,u)},u.getZr().on("rendered",this._onRendered)}}},s.prototype._dataSort=function(a,l,u){var h=[];return a.each(a.mapDimension(l.dim),function(p,v){var m=u(v);h.push({dataIndex:v,mappedValue:m=m??NaN,ordinalNumber:p})}),h.sort(function(p,v){return v.mappedValue-p.mappedValue}),{ordinalNumbers:(0,b.map)(h,function(p){return p.ordinalNumber})}},s.prototype._isOrderChangedWithinSameData=function(a,l,u){for(var h=u.scale,p=a.mapDimension(u.dim),v=Number.MAX_VALUE,m=0,y=h.getOrdinalMeta().categories.length;m<y;++m){var x=a.rawIndexOf(p,h.getRawOrdinalNumber(m)),w=x<0?Number.MIN_VALUE:l(a.indexOfRawIndex(x));if(w>v)return!0;v=w}return!1},s.prototype._isOrderDifferentInView=function(a,l){for(var u=l.scale,h=u.getExtent(),p=Math.max(0,h[0]),v=Math.min(h[1],u.getOrdinalMeta().categories.length-1);p<=v;++p)if(a.ordinalNumbers[p]!==u.getRawOrdinalNumber(p))return!0},s.prototype._updateSortWithinSameData=function(a,l,u,h){if(this._isOrderChangedWithinSameData(a,l,u)){var p=this._dataSort(a,u,l);this._isOrderDifferentInView(p,u)&&(this._removeOnRenderedListener(h),h.dispatchAction({type:"changeAxisOrder",componentType:u.dim+"Axis",axisId:u.index,sortInfo:p}))}},s.prototype._dispatchInitSort=function(a,l,u){var h=l.baseAxis,p=this._dataSort(a,h,function(v){return a.get(a.mapDimension(l.otherAxis.dim),v)});u.dispatchAction({type:"changeAxisOrder",componentType:h.dim+"Axis",isInitSort:!0,axisId:h.index,sortInfo:p})},s.prototype.remove=function(a,l){this._clear(this._model),this._removeOnRenderedListener(l)},s.prototype.dispose=function(a,l){this._removeOnRenderedListener(l)},s.prototype._removeOnRenderedListener=function(a){this._onRendered&&(a.getZr().off("rendered",this._onRendered),this._onRendered=null)},s.prototype._clear=function(a){var l=this.group,u=this._data;a&&a.isAnimationEnabled()&&u&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],u.eachItemGraphicEl(function(h){(0,Sn.XD)(h,a,(0,Tr.A)(h).dataIndex)})):l.removeAll(),this._data=null,this._isFirstFrame=!0},s.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},s.type="bar",s}(ia.Z),Nn={cartesian2d:function(c,s){var a=s.width<0?-1:1,l=s.height<0?-1:1;a<0&&(s.x+=s.width,s.width=-s.width),l<0&&(s.y+=s.height,s.height=-s.height);var u=c.x+c.width,h=c.y+c.height,p=ga(s.x,c.x),v=qs(s.x+s.width,u),m=ga(s.y,c.y),y=qs(s.y+s.height,h),x=v<p,w=y<m;return s.x=x&&p>u?v:p,s.y=w&&m>h?y:m,s.width=x?0:v-p,s.height=w?0:y-m,a<0&&(s.x+=s.width,s.width=-s.width),l<0&&(s.y+=s.height,s.height=-s.height),x||w},polar:function(c,s){var a=s.r0<=s.r?1:-1;if(a<0){var l=s.r;s.r=s.r0,s.r0=l}var u=qs(s.r,c.r),h=ga(s.r0,c.r0);s.r=u,s.r0=h;var p=u-h<0;return a<0&&(l=s.r,s.r=s.r0,s.r0=l),p}},Lr={cartesian2d:function(c,s,a,l,u,h,p,v,m){var y=new Mi.Z({shape:(0,b.extend)({},l),z2:1});return y.__dataIndex=a,y.name="item",h&&(y.shape[u?"height":"width"]=0),y},polar:function(c,s,a,l,u,h,p,v,m){var y=!u&&m?rc:yn.C,x=new y({shape:l,z2:1});x.name="item";var w=Hr(u);if(x.calculateTextPosition=function Dn(c,s){var a=(s=s||{}).isRoundCap;return function(l,u,h){var p=u.position;if(!p||p instanceof Array)return(0,Ce.wI)(l,u,h);var v=c(p),m=null!=u.distance?u.distance:5,y=this.shape,x=y.cx,w=y.cy,D=y.r,I=y.r0,L=(D+I)/2,N=y.startAngle,Z=y.endAngle,se=(N+Z)/2,_e=a?Math.abs(D-I)/2:0,me=Math.cos,De=Math.sin,Pe=x+D*me(N),Ie=w+D*De(N),ke="left",Ue="top";switch(v){case"startArc":Pe=x+(I-m)*me(se),Ie=w+(I-m)*De(se),ke="center",Ue="top";break;case"insideStartArc":Pe=x+(I+m)*me(se),Ie=w+(I+m)*De(se),ke="center",Ue="bottom";break;case"startAngle":Pe=x+L*me(N)+Ei(N,m+_e,!1),Ie=w+L*De(N)+pa(N,m+_e,!1),ke="right",Ue="middle";break;case"insideStartAngle":Pe=x+L*me(N)+Ei(N,-m+_e,!1),Ie=w+L*De(N)+pa(N,-m+_e,!1),ke="left",Ue="middle";break;case"middle":Pe=x+L*me(se),Ie=w+L*De(se),ke="center",Ue="middle";break;case"endArc":Pe=x+(D+m)*me(se),Ie=w+(D+m)*De(se),ke="center",Ue="bottom";break;case"insideEndArc":Pe=x+(D-m)*me(se),Ie=w+(D-m)*De(se),ke="center",Ue="top";break;case"endAngle":Pe=x+L*me(Z)+Ei(Z,m+_e,!0),Ie=w+L*De(Z)+pa(Z,m+_e,!0),ke="left",Ue="middle";break;case"insideEndAngle":Pe=x+L*me(Z)+Ei(Z,-m+_e,!0),Ie=w+L*De(Z)+pa(Z,-m+_e,!0),ke="right",Ue="middle";break;default:return(0,Ce.wI)(l,u,h)}return(l=l||{}).x=Pe,l.y=Ie,l.align=ke,l.verticalAlign=Ue,l}}(w,{isRoundCap:y===rc}),h){var I=u?"r":"endAngle",L={};x.shape[I]=u?0:l.startAngle,L[I]=l[I],(v?Sn.D:Sn.KZ)(x,{shape:L},h)}return x}};function eo(c,s,a,l,u,h,p,v){var m,y;h?(y={x:l.x,width:l.width},m={y:l.y,height:l.height}):(y={y:l.y,height:l.height},m={x:l.x,width:l.width}),v||(p?Sn.D:Sn.KZ)(a,{shape:m},s,u,null),(p?Sn.D:Sn.KZ)(a,{shape:y},s?c.baseAxis.model:null,u)}function ic(c,s){for(var a=0;a<s.length;a++)if(!isFinite(c[s[a]]))return!0;return!1}var Ha=["x","y","width","height"],Pl=["cx","cy","r","startAngle","endAngle"],aa={cartesian2d:function(c){return!ic(c,Ha)},polar:function(c){return!ic(c,Pl)}},ac={cartesian2d:function(c,s,a){var l=c.getItemLayout(s),u=a?function oc(c,s){var a=c.get(["itemStyle","borderColor"]);if(!a||"none"===a)return 0;var l=c.get(["itemStyle","borderWidth"])||0,u=isNaN(s.width)?Number.MAX_VALUE:Math.abs(s.width),h=isNaN(s.height)?Number.MAX_VALUE:Math.abs(s.height);return Math.min(l,u,h)}(a,l):0,h=l.width>0?1:-1,p=l.height>0?1:-1;return{x:l.x+h*u/2,y:l.y+p*u/2,width:l.width-h*u,height:l.height-p*u}},polar:function(c,s,a){var l=c.getItemLayout(s);return{cx:l.cx,cy:l.cy,r0:l.r0,r:l.r,startAngle:l.startAngle,endAngle:l.endAngle,clockwise:l.clockwise}}};function Hr(c){return a=c?"Arc":"Angle",function(l){switch(l){case"start":case"insideStart":case"end":case"insideEnd":return l+a;default:return l}};var a}function cd(c,s,a,l,u,h,p,v){var m=s.getItemVisual(a,"style");v||c.setShape("r",l.get(["itemStyle","borderRadius"])||0),c.useStyle(m);var y=l.getShallow("cursor");y&&c.attr("cursor",y);var x=v?p?u.r>=u.r0?"endArc":"startArc":u.endAngle>=u.startAngle?"endAngle":"startAngle":p?u.height>=0?"bottom":"top":u.width>=0?"right":"left",w=(0,qt.k3)(l);(0,qt.ni)(c,w,{labelFetcher:h,labelDataIndex:a,defaultText:El(h.getData(),a),inheritColor:m.fill,defaultOpacity:m.opacity,defaultOutsidePosition:x});var D=c.getTextContent();if(v&&D){var I=l.get(["label","position"]);c.textConfig.inside="middle"===I||null,function Go(c,s,a,l){if((0,b.isNumber)(l))c.setTextConfig({rotation:l});else if((0,b.isArray)(s))c.setTextConfig({rotation:0});else{var m,u=c.shape,h=u.clockwise?u.startAngle:u.endAngle,p=u.clockwise?u.endAngle:u.startAngle,v=(h+p)/2,y=a(s);switch(y){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":m=v;break;case"startAngle":case"insideStartAngle":m=h;break;case"endAngle":case"insideEndAngle":m=p;break;default:return void c.setTextConfig({rotation:0})}var x=1.5*Math.PI-m;"middle"===y&&x>Math.PI/2&&x<1.5*Math.PI&&(x-=Math.PI),c.setTextConfig({rotation:x})}}(c,"outside"===I?x:I,Hr(p),l.get(["label","rotate"]))}(0,qt.pe)(D,w,h.getRawValue(a),function(N){return zr(s,N)});var L=l.getModel(["emphasis"]);(0,Wt.k5)(c,L.get("focus"),L.get("blurScope"),L.get("disabled")),(0,Wt.WO)(c,l),function yu(c){return null!=c.startAngle&&null!=c.endAngle&&c.startAngle===c.endAngle}(u)&&(c.style.fill="none",c.style.stroke="none",(0,b.each)(c.states,function(N){N.style&&(N.style.fill=N.style.stroke="none")}))}var Yf=function c(){},Js=function(c){function s(a){var l=c.call(this,a)||this;return l.type="largeBar",l}return(0,At.ZT)(s,c),s.prototype.getDefaultShape=function(){return new Yf},s.prototype.buildPath=function(a,l){for(var u=l.points,h=this.baseDimIdx,p=1-this.baseDimIdx,v=[],m=[],y=this.barWidth,x=0;x<u.length;x+=3)m[h]=y,m[p]=u[x+2],v[h]=u[x+h],v[p]=u[x+p],a.rect(v[0],v[1],m[0],m[1])},s}(ge.ZP);function Ua(c,s,a,l){var u=c.getData(),h=u.getLayout("valueAxisHorizontal")?1:0,p=u.getLayout("largeDataIndices"),v=u.getLayout("size"),m=c.getModel("backgroundStyle"),y=u.getLayout("largeBackgroundPoints");if(y){var x=new Js({shape:{points:y},incremental:!!l,silent:!0,z2:0});x.baseDimIdx=h,x.largeDataIndices=p,x.barWidth=v,x.useStyle(m.getItemStyle()),s.add(x),a&&a.push(x)}var w=new Js({shape:{points:u.getLayout("largePoints")},incremental:!!l,ignoreCoarsePointer:!0,z2:1});w.baseDimIdx=h,w.largeDataIndices=p,w.barWidth=v,s.add(w),w.useStyle(u.getVisual("style")),(0,Tr.A)(w).seriesIndex=c.seriesIndex,c.get("silent")||(w.on("mousedown",zc),w.on("mousemove",zc)),a&&a.push(w)}var zc=(0,Uo.P2)(function(c){var a=function bu(c,s,a){for(var l=c.baseDimIdx,u=1-l,h=c.shape.points,p=c.largeDataIndices,v=[],m=[],y=c.barWidth,x=0,w=h.length/3;x<w;x++){var D=3*x;if(m[l]=y,m[u]=h[D+2],v[l]=h[D+l],v[u]=h[D+u],m[u]<0&&(v[u]+=m[u],m[u]=-m[u]),s>=v[0]&&s<=v[0]+m[0]&&a>=v[1]&&a<=v[1]+m[1])return p[x]}return-1}(this,c.offsetX,c.offsetY);(0,Tr.A)(this).dataIndex=a>=0?a:null},30,!1);function Ss(c,s,a){if(Rs(a,"cartesian2d")){var l=s,u=a.getArea();return{x:c?l.x:u.x,y:c?u.y:l.y,width:c?l.width:u.width,height:c?u.height:l.height}}return{cx:(u=a.getArea()).cx,cy:u.cy,r0:c?u.r0:s.r0,r:c?u.r:s.r,startAngle:c?s.startAngle:0,endAngle:c?s.endAngle:2*Math.PI}}const Hc=To;var xv=H(960),Br=H(634),is=2*Math.PI,ud=Math.PI/180;function lc(c,s){return Br.ME(c.getBoxLayoutParams(),{width:s.getWidth(),height:s.getHeight()})}function xu(c,s){var a=lc(c,s),l=c.get("center"),u=c.get("radius");b.isArray(u)||(u=[0,u]),b.isArray(l)||(l=[l,l]);var x,w,h=(0,It.GM)(a.width,s.getWidth()),p=(0,It.GM)(a.height,s.getHeight()),v=Math.min(h,p),m=(0,It.GM)(u[0],v/2),y=(0,It.GM)(u[1],v/2),D=c.coordinateSystem;if(D){var I=D.dataToPoint(l);x=I[0]||0,w=I[1]||0}else x=(0,It.GM)(l[0],h)+a.x,w=(0,It.GM)(l[1],p)+a.y;return{cx:x,cy:w,r0:m,r:y}}function Uc(c,s,a){s.eachSeriesByType(c,function(l){var u=l.getData(),h=u.mapDimension("value"),p=lc(l,a),v=xu(l,a),m=v.cx,y=v.cy,x=v.r,w=v.r0,D=-l.get("startAngle")*ud,I=l.get("minAngle")*ud,L=0;u.each(h,function(Ke){!isNaN(Ke)&&L++});var N=u.getSum(h),Z=Math.PI/(N||L)*2,se=l.get("clockwise"),_e=l.get("roseType"),me=l.get("stillShowZeroSum"),De=u.getDataExtent(h);De[0]=0;var Pe=is,Ie=0,ke=D,Ue=se?1:-1;if(u.setLayout({viewRect:p,r:x}),u.each(h,function(Ke,Je){var ut;if(isNaN(Ke))u.setItemLayout(Je,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:se,cx:m,cy:y,r0:w,r:_e?NaN:x});else{(ut="area"!==_e?0===N&&me?Z:Ke*Z:is/L)<I?(ut=I,Pe-=I):Ie+=Ke;var pt=ke+Ue*ut;u.setItemLayout(Je,{angle:ut,startAngle:ke,endAngle:pt,clockwise:se,cx:m,cy:y,r0:w,r:_e?(0,It.NU)(Ke,De,[w,x]):x}),ke=pt}}),Pe<is&&L)if(Pe<=.001){var Ye=is/L;u.each(h,function(Ke,Je){if(!isNaN(Ke)){var ut=u.getItemLayout(Je);ut.angle=Ye,ut.startAngle=D+Ue*Je*Ye,ut.endAngle=D+Ue*(Je+1)*Ye}})}else Z=Pe/Ie,ke=D,u.each(h,function(Ke,Je){if(!isNaN(Ke)){var ut=u.getItemLayout(Je),pt=ut.angle===I?I:Ke*Z;ut.startAngle=ke,ut.endAngle=ke+Ue*pt,ke+=Ue*pt}})})}function Ma(c){return{seriesType:c,reset:function(s,a){var l=a.findComponents({mainType:"legend"});if(l&&l.length){var u=s.getData();u.filterSelf(function(h){for(var p=u.getName(h),v=0;v<l.length;v++)if(!l[v].isSelected(p))return!1;return!0})}}}}var Ls=H(7834),na=H(7564),uo=H(7521),Ne=H(1593),Ge=Math.PI/180;function Le(c,s,a,l,u,h,p,v,m,y){if(!(c.length<2)){for(var D=c.length,I=0;I<D;I++)"outer"===c[I].position&&"labelLine"===c[I].labelAlignTo&&(c[I].linePoints[1][0]+=c[I].label.x-y,c[I].label.x=y);(0,Ne.GI)(c,m,m+p)&&function w(N){for(var Z={list:[],maxY:0},se={list:[],maxY:0},_e=0;_e<N.length;_e++)if("none"===N[_e].labelAlignTo){var me=N[_e],De=me.label.y>a?se:Z,Pe=Math.abs(me.label.y-a);if(Pe>=De.maxY){var Ie=me.label.x-s-me.len2*u,ke=l+me.len,Ue=Math.abs(Ie)<ke?Math.sqrt(Pe*Pe/(1-Ie*Ie/ke/ke)):ke;De.rB=Ue,De.maxY=Pe}De.list.push(me)}x(Z),x(se)}(c)}function x(N){for(var Z=N.rB,se=Z*Z,_e=0;_e<N.list.length;_e++){var me=N.list[_e],De=Math.abs(me.label.y-a),Pe=l+me.len,Ie=Pe*Pe,ke=Math.sqrt((1-Math.abs(De*De/se))*Ie),Ue=s+(ke+me.len2)*u;Ze(me,me.targetTextWidth-(Ue-me.label.x)*u,!0),me.label.x=Ue}}}function Ze(c,s,a){if(void 0===a&&(a=!1),null==c.labelStyleWidth){var l=c.label,u=l.style,h=c.rect,p=u.backgroundColor,v=u.padding,m=v?v[1]+v[3]:0,y=u.overflow,x=h.width+(p?0:m);if(s<x||a){var w=h.height;if(y&&y.match("break")){l.setStyle("backgroundColor",null),l.setStyle("width",s-m);var D=l.getBoundingRect();l.setStyle("width",Math.ceil(D.width)),l.setStyle("backgroundColor",p)}else{var I=s-m;l.setStyle("width",s<x?I:a?I>c.unconstrainedWidth?null:I:null)}var N=l.getBoundingRect();h.width=N.width,h.height=N.height+((l.style.margin||0)+2.1),h.y-=(h.height-w)/2}}}function tt(c){return"center"===c.position}function Zt(c,s,a){var l=c.get("borderRadius");if(null==l)return a?{cornerRadius:0}:null;(0,b.isArray)(l)||(l=[l,l,l,l]);var u=Math.abs(s.r||0-s.r0||0);return{cornerRadius:(0,b.map)(l,function(h){return(0,Ce.GM)(h,u)})}}var Ut=function(c){function s(a,l,u){var h=c.call(this)||this;h.z2=2;var p=new _t.ZP;return h.setTextContent(p),h.updateData(a,l,u,!0),h}return(0,At.ZT)(s,c),s.prototype.updateData=function(a,l,u,h){var p=this,v=a.hostModel,m=a.getItemModel(l),y=m.getModel("emphasis"),x=a.getItemLayout(l),w=(0,b.extend)(Zt(m.getModel("itemStyle"),x,!0),x);if(isNaN(w.startAngle))p.setShape(w);else{if(h){p.setShape(w);var D=v.getShallow("animationType");v.ecModel.ssr?(Sn.KZ(p,{scaleX:0,scaleY:0},v,{dataIndex:l,isFrom:!0}),p.originX=w.cx,p.originY=w.cy):"scale"===D?(p.shape.r=x.r0,Sn.KZ(p,{shape:{r:x.r}},v,l)):null!=u?(p.setShape({startAngle:u,endAngle:u}),Sn.KZ(p,{shape:{startAngle:x.startAngle,endAngle:x.endAngle}},v,l)):(p.shape.endAngle=x.startAngle,Sn.D(p,{shape:{endAngle:x.endAngle}},v,l))}else(0,Sn.Zi)(p),Sn.D(p,{shape:w},v,l);p.useStyle(a.getItemVisual(l,"style")),(0,Wt.WO)(p,m);var I=(x.startAngle+x.endAngle)/2,L=v.get("selectedOffset"),N=Math.cos(I)*L,Z=Math.sin(I)*L,se=m.getShallow("cursor");se&&p.attr("cursor",se),this._updateLabel(v,a,l),p.ensureState("emphasis").shape=(0,b.extend)({r:x.r+(y.get("scale")&&y.get("scaleSize")||0)},Zt(y.getModel("itemStyle"),x)),(0,b.extend)(p.ensureState("select"),{x:N,y:Z,shape:Zt(m.getModel(["select","itemStyle"]),x)}),(0,b.extend)(p.ensureState("blur"),{shape:Zt(m.getModel(["blur","itemStyle"]),x)});var _e=p.getTextGuideLine(),me=p.getTextContent();_e&&(0,b.extend)(_e.ensureState("select"),{x:N,y:Z}),(0,b.extend)(me.ensureState("select"),{x:N,y:Z}),(0,Wt.k5)(this,y.get("focus"),y.get("blurScope"),y.get("disabled"))}},s.prototype._updateLabel=function(a,l,u){var h=this,p=l.getItemModel(u),v=p.getModel("labelLine"),m=l.getItemVisual(u,"style"),y=m&&m.fill,x=m&&m.opacity;(0,qt.ni)(h,(0,qt.k3)(p),{labelFetcher:l.hostModel,labelDataIndex:u,inheritColor:y,defaultOpacity:x,defaultText:a.getFormattedLabel(u,"normal")||l.getName(u)});var w=h.getTextContent();h.setTextConfig({position:null,rotation:null}),w.attr({z2:10});var D=a.get(["label","position"]);if("outside"!==D&&"outer"!==D)h.removeTextGuideLine();else{var I=this.getTextGuideLine();I||(I=new Ls.Z,this.setTextGuideLine(I)),(0,uo.Iu)(this,(0,uo.$x)(p),{stroke:y,opacity:(0,b.retrieve3)(v.get(["lineStyle","opacity"]),x,1)})}},s}(yn.C);const En=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.ignoreLabelLineUpdate=!0,a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u,h){var y,p=a.getData(),v=this._data,m=this.group;if(!v&&p.count()>0){for(var x=p.getItemLayout(0),w=1;isNaN(x&&x.startAngle)&&w<p.count();++w)x=p.getItemLayout(w);x&&(y=x.startAngle)}if(this._emptyCircleSector&&m.remove(this._emptyCircleSector),0===p.count()&&a.get("showEmptyCircle")){var D=new yn.C({shape:xu(a,u)});D.useStyle(a.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=D,m.add(D)}p.diff(v).add(function(I){var L=new Ut(p,I,y);p.setItemGraphicEl(I,L),m.add(L)}).update(function(I,L){var N=v.getItemGraphicEl(L);N.updateData(p,I,y),N.off("click"),m.add(N),p.setItemGraphicEl(I,N)}).remove(function(I){var L=v.getItemGraphicEl(I);Sn.XD(L,a,I)}).execute(),function ft(c){var l,u,s=c.getData(),a=[],h=!1,p=(c.get("minShowLabelAngle")||0)*Ge,v=s.getLayout("viewRect"),m=s.getLayout("r"),y=v.width,x=v.x,w=v.y,D=v.height;function I(Ie){Ie.ignore=!0}s.each(function(Ie){var ke=s.getItemGraphicEl(Ie),Ue=ke.shape,Ye=ke.getTextContent(),Ke=ke.getTextGuideLine(),Je=s.getItemModel(Ie),ut=Je.getModel("label"),pt=ut.get("position")||Je.get(["emphasis","label","position"]),yt=ut.get("distanceToLabelLine"),wt=ut.get("alignTo"),kt=(0,It.GM)(ut.get("edgeDistance"),y),en=ut.get("bleedMargin"),Yt=Je.getModel("labelLine"),dn=Yt.get("length");dn=(0,It.GM)(dn,y);var Fn=Yt.get("length2");if(Fn=(0,It.GM)(Fn,y),Math.abs(Ue.endAngle-Ue.startAngle)<p)return(0,b.each)(Ye.states,I),(0,b.each)(Ke.states,I),void(Ye.ignore=Ke.ignore=!0);if(function L(Ie){if(!Ie.ignore)return!0;for(var ke in Ie.states)if(!1===Ie.states[ke].ignore)return!0;return!1}(Ye)){var Fr,Ci,Oi,Yr,zn=(Ue.startAngle+Ue.endAngle)/2,dr=Math.cos(zn),br=Math.sin(zn);l=Ue.cx,u=Ue.cy;var or="inside"===pt||"inner"===pt;if("center"===pt)Fr=Ue.cx,Ci=Ue.cy,Yr="center";else{var wi=(or?(Ue.r+Ue.r0)/2*dr:Ue.r*dr)+l,mi=(or?(Ue.r+Ue.r0)/2*br:Ue.r*br)+u;if(Fr=wi+3*dr,Ci=mi+3*br,!or){var Bi=wi+dr*(dn+m-Ue.r),ao=mi+br*(dn+m-Ue.r),go=Bi+(dr<0?-1:1)*Fn;Fr="edge"===wt?dr<0?x+kt:x+y-kt:go+(dr<0?-yt:yt),Ci=ao,Oi=[[wi,mi],[Bi,ao],[go,ao]]}Yr=or?"center":"edge"===wt?dr>0?"right":"left":dr>0?"left":"right"}var ba=Math.PI,Aa=0,ms=ut.get("rotate");if((0,b.isNumber)(ms))Aa=ms*(ba/180);else if("center"===pt)Aa=0;else if("radial"===ms||!0===ms)Aa=dr<0?-zn+ba:-zn;else if("tangential"===ms&&"outside"!==pt&&"outer"!==pt){var Yo=Math.atan2(dr,br);Yo<0&&(Yo=2*ba+Yo),br>0&&(Yo=ba+Yo),Aa=Yo-ba}if(h=!!Aa,Ye.x=Fr,Ye.y=Ci,Ye.rotation=Aa,Ye.setStyle({verticalAlign:"middle"}),or){Ye.setStyle({align:Yr});var J1=Ye.states.select;J1&&(J1.x+=Ye.x,J1.y+=Ye.y)}else{var au=Ye.getBoundingRect().clone();au.applyTransform(Ye.getComputedTransform());var q1=(Ye.style.margin||0)+2.1;au.y-=q1/2,au.height+=q1,a.push({label:Ye,labelLine:Ke,position:pt,len:dn,len2:Fn,minTurnAngle:Yt.get("minTurnAngle"),maxSurfaceAngle:Yt.get("maxSurfaceAngle"),surfaceNormal:new na.Z(dr,br),linePoints:Oi,textAlign:Yr,labelDistance:yt,labelAlignTo:wt,edgeDistance:kt,bleedMargin:en,rect:au,unconstrainedWidth:au.width,labelStyleWidth:Ye.style.width})}ke.setTextConfig({inside:or})}}),!h&&c.get("avoidLabelOverlap")&&function ze(c,s,a,l,u,h,p,v){for(var m=[],y=[],x=Number.MAX_VALUE,w=-Number.MAX_VALUE,D=0;D<c.length;D++){var I=c[D].label;tt(c[D])||(I.x<s?(x=Math.min(x,I.x),m.push(c[D])):(w=Math.max(w,I.x),y.push(c[D])))}for(D=0;D<c.length;D++)if(!tt(L=c[D])&&L.linePoints){if(null!=L.labelStyleWidth)continue;I=L.label;var Z,N=L.linePoints;L.targetTextWidth=Z="edge"===L.labelAlignTo?I.x<s?N[2][0]-L.labelDistance-p-L.edgeDistance:p+u-L.edgeDistance-N[2][0]-L.labelDistance:"labelLine"===L.labelAlignTo?I.x<s?x-p-L.bleedMargin:p+u-w-L.bleedMargin:I.x<s?I.x-p-L.bleedMargin:p+u-I.x-L.bleedMargin,Ze(L,Z)}for(Le(y,s,a,l,1,0,h,0,v,w),Le(m,s,a,l,-1,0,h,0,v,x),D=0;D<c.length;D++){var L;if(!tt(L=c[D])&&L.linePoints){var _e=(I=L.label).style.padding,Pe=L.rect.width+(I.style.backgroundColor?0:_e?_e[1]+_e[3]:0),Ie=(N=L.linePoints)[1][0]-N[2][0];"edge"===L.labelAlignTo?N[2][0]=I.x<s?p+L.edgeDistance+Pe+L.labelDistance:p+u-L.edgeDistance-Pe-L.labelDistance:(N[2][0]=I.x<s?I.x+L.labelDistance:I.x-L.labelDistance,N[1][0]=N[2][0]+Ie),N[1][1]=N[2][1]=I.y}}}(a,l,u,m,y,D,x,w);for(var N=0;N<a.length;N++){var Z=a[N],se=Z.label,_e=Z.labelLine,me=isNaN(se.x)||isNaN(se.y);if(se){se.setStyle({align:Z.textAlign}),me&&((0,b.each)(se.states,I),se.ignore=!0);var De=se.states.select;De&&(De.x+=se.x,De.y+=se.y)}if(_e){var Pe=Z.linePoints;me||!Pe?((0,b.each)(_e.states,I),_e.ignore=!0):((0,uo.qK)(Pe,Z.minTurnAngle),(0,uo._A)(Pe,Z.surfaceNormal,Z.maxSurfaceAngle),_e.setShape({points:Pe}),se.__hostTarget.textGuideLineConfig={anchor:new na.Z(Pe[0][0],Pe[0][1])})}}}(a),"expansion"!==a.get("animationTypeUpdate")&&(this._data=p)},s.prototype.dispose=function(){},s.prototype.containPoint=function(a,l){var h=l.getData().getItemLayout(0);if(h){var p=a[0]-h.cx,v=a[1]-h.cy,m=Math.sqrt(p*p+v*v);return m<=h.r&&m>=h.r0}},s.type="pie",s}(ia.Z);var dt=H(9178),xt=H(3241);function vt(c,s,a){s=(0,b.isArray)(s)&&{coordDimensions:s}||(0,b.extend)({encodeDefine:c.getEncode()},s);var l=c.getSource(),u=(0,dt.Z)(l,s).dimensions,h=new xt.Z(u,c);return h.initData(l,a),h}var Nt=H(6153);const gn=function(){function c(s,a){this._getDataWithEncodedVisual=s,this._getRawData=a}return c.prototype.getAllNames=function(){var s=this._getRawData();return s.mapArray(s.getName)},c.prototype.containName=function(s){return this._getRawData().indexOfName(s)>=0},c.prototype.indexOfName=function(s){return this._getDataWithEncodedVisual().indexOfName(s)},c.prototype.getItemVisual=function(s,a){return this._getDataWithEncodedVisual().getItemVisual(s,a)},c}(),Bn=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,At.ZT)(s,c),s.prototype.init=function(a){c.prototype.init.apply(this,arguments),this.legendVisualProvider=new gn(b.bind(this.getData,this),b.bind(this.getRawData,this)),this._defaultLabelLine(a)},s.prototype.mergeOption=function(){c.prototype.mergeOption.apply(this,arguments)},s.prototype.getInitialData=function(){var a=vt(this,{coordDimensions:["value"],encodeDefaulter:b.curry(Nt.Ss,this)}),l=[];return a.each(a.mapDimension("value"),function(u){l.push(u)}),this.seats=(0,It.HD)(l,a.hostModel.get("percentPrecision")),a},s.prototype.getDataParams=function(a){var l=c.prototype.getDataParams.call(this,a);return l.percent=this.seats[a],l.$vars.push("percent"),l},s.prototype._defaultLabelLine=function(a){xn.Cc(a,"labelLine",["show"]);var l=a.labelLine,u=a.emphasis.labelLine;l.show=l.show&&a.label.show,u.show=u.show&&a.emphasis.label.show},s.type="series.pie",s.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},s}(Xi.Z),_r=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.hasSymbolVisual=!0,a}return(0,At.ZT)(s,c),s.prototype.getInitialData=function(a,l){return(0,Ks.Z)(null,this,{useEncodeDefaulter:!0})},s.prototype.getProgressive=function(){return this.option.progressive??(this.option.large?5e3:this.get("progressive"))},s.prototype.getProgressiveThreshold=function(){return this.option.progressiveThreshold??(this.option.large?1e4:this.get("progressiveThreshold"))},s.prototype.brushSelector=function(a,l,u){return u.point(l.getItemLayout(a))},s.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},s.type="series.scatter",s.dependencies=["grid","polar","geo","singleAxis","calendar"],s.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},s}(Xi.Z);var yr=H(7021),$i=function c(){},as=function(c){function s(a){var l=c.call(this,a)||this;return l._off=0,l.hoverDataIdx=-1,l}return(0,At.ZT)(s,c),s.prototype.getDefaultShape=function(){return new $i},s.prototype.reset=function(){this.notClear=!1,this._off=0},s.prototype.buildPath=function(a,l){var w,u=l.points,h=l.size,p=this.symbolProxy,v=p.shape,m=a.getContext?a.getContext():a,x=this.softClipShape;if(m&&h[0]<4)this._ctx=m;else{for(this._ctx=null,w=this._off;w<u.length;){var D=u[w++],I=u[w++];isNaN(D)||isNaN(I)||x&&!x.contain(D,I)||(v.x=D-h[0]/2,v.y=I-h[1]/2,v.width=h[0],v.height=h[1],p.buildPath(a,v,!0))}this.incremental&&(this._off=w,this.notClear=!0)}},s.prototype.afterBrush=function(){var v,a=this.shape,l=a.points,u=a.size,h=this._ctx,p=this.softClipShape;if(h){for(v=this._off;v<l.length;){var m=l[v++],y=l[v++];isNaN(m)||isNaN(y)||p&&!p.contain(m,y)||h.fillRect(m-u[0]/2,y-u[1]/2,u[0],u[1])}this.incremental&&(this._off=v,this.notClear=!0)}},s.prototype.findDataIndex=function(a,l){for(var u=this.shape,h=u.points,p=u.size,v=Math.max(p[0],4),m=Math.max(p[1],4),y=h.length/2-1;y>=0;y--){var x=2*y,w=h[x]-v/2,D=h[x+1]-m/2;if(a>=w&&l>=D&&a<=w+v&&l<=D+m)return y}return-1},s.prototype.contain=function(a,l){var u=this.transformCoordToLocal(a,l);return this.getBoundingRect().contain(a=u[0],l=u[1])?(this.hoverDataIdx=this.findDataIndex(a,l))>=0:(this.hoverDataIdx=-1,!1)},s.prototype.getBoundingRect=function(){var a=this._rect;if(!a){for(var l=this.shape,u=l.points,h=l.size,p=h[0],v=h[1],m=1/0,y=1/0,x=-1/0,w=-1/0,D=0;D<u.length;){var I=u[D++],L=u[D++];m=Math.min(I,m),x=Math.max(I,x),y=Math.min(L,y),w=Math.max(L,w)}a=this._rect=new yr.Z(m-p/2,y-v/2,x-m+p,w-y+v)}return a},s}(ge.ZP);const Xf=function(){function c(){this.group=new Rn.Z}return c.prototype.updateData=function(s,a){this._clear();var l=this._create();l.setShape({points:s.getLayout("points")}),this._setCommon(l,s,a)},c.prototype.updateLayout=function(s){var a=s.getLayout("points");this.group.eachChild(function(l){null!=l.startIndex&&(a=new Float32Array(a.buffer,4*l.startIndex*2,2*(l.endIndex-l.startIndex))),l.setShape("points",a),l.reset()})},c.prototype.incrementalPrepareUpdate=function(s){this._clear()},c.prototype.incrementalUpdate=function(s,a,l){var u=this._newAdded[0],h=a.getLayout("points"),p=u&&u.shape.points;if(p&&p.length<2e4){var v=p.length,m=new Float32Array(v+h.length);m.set(p),m.set(h,v),u.endIndex=s.end,u.setShape({points:m})}else{this._newAdded=[];var y=this._create();y.startIndex=s.start,y.endIndex=s.end,y.incremental=!0,y.setShape({points:h}),this._setCommon(y,a,l)}},c.prototype.eachRendered=function(s){this._newAdded[0]&&s(this._newAdded[0])},c.prototype._create=function(){var s=new as({cursor:"default"});return s.ignoreCoarsePointer=!0,this.group.add(s),this._newAdded.push(s),s},c.prototype._setCommon=function(s,a,l){var u=a.hostModel;l=l||{};var h=a.getVisual("symbolSize");s.setShape("size",h instanceof Array?h:[h,h]),s.softClipShape=l.clipShape||null,s.symbolProxy=(0,si.th)(a.getVisual("symbol"),0,0,0,0),s.setColor=s.symbolProxy.setColor;var p=s.shape.size[0]<4;s.useStyle(u.getModel("itemStyle").getItemStyle(p?["color","shadowBlur","shadowColor"]:["color"]));var v=a.getVisual("style"),m=v&&v.fill;m&&s.setColor(m);var y=(0,Tr.A)(s);y.seriesIndex=u.seriesIndex,s.on("mousemove",function(x){y.dataIndex=null;var w=s.hoverDataIdx;w>=0&&(y.dataIndex=w+(s.startIndex||0))})},c.prototype.remove=function(){this._clear()},c.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},c}(),os=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u){var h=a.getData();this._updateSymbolDraw(h,a).updateData(h,{clipShape:this._getClipShape(a)}),this._finished=!0},s.prototype.incrementalPrepareRender=function(a,l,u){var h=a.getData();this._updateSymbolDraw(h,a).incrementalPrepareUpdate(h),this._finished=!1},s.prototype.incrementalRender=function(a,l,u){this._symbolDraw.incrementalUpdate(a,l.getData(),{clipShape:this._getClipShape(l)}),this._finished=a.end===l.getData().count()},s.prototype.updateTransform=function(a,l,u){var h=a.getData();if(this.group.dirty(),!this._finished||h.count()>1e4)return{update:!0};var p=ni("").reset(a,l,u);p.progress&&p.progress({start:0,end:h.count(),count:h.count()},h),this._symbolDraw.updateLayout(h)},s.prototype.eachRendered=function(a){this._symbolDraw&&this._symbolDraw.eachRendered(a)},s.prototype._getClipShape=function(a){var l=a.coordinateSystem,u=l&&l.getArea&&l.getArea();return a.get("clip",!0)?u:null},s.prototype._updateSymbolDraw=function(a,l){var u=this._symbolDraw,p=l.pipelineContext.large;return(!u||p!==this._isLargeDraw)&&(u&&u.remove(),u=this._symbolDraw=p?new Xf:new od,this._isLargeDraw=p,this.group.removeAll()),this.group.add(u.group),u},s.prototype.remove=function(a,l){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},s.prototype.dispose=function(){},s.type="scatter",s}(ia.Z);var va=H(9899),ma=H(9447);const wv=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,At.ZT)(s,c),s.type="grid",s.dependencies=["xAxis","yAxis"],s.layoutMode="box",s.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},s}(ma.Z);var $f=H(2565),Kf=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,At.ZT)(s,c),s.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",xn.C6).models[0]},s.type="cartesian2dAxis",s}(ma.Z);b.mixin(Kf,$f.W);var Os={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},c0=b.merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},Os),u0=b.merge({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},Os);const MP={category:c0,value:u0,time:b.merge({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},u0),log:b.defaults({logBase:10},u0)};var Ga=H(9567),TP={value:1,category:1,time:1,log:1};function Qf(c,s,a,l){(0,b.each)(TP,function(u,h){var p=(0,b.merge)((0,b.merge)({},MP[h],!0),l,!0),v=function(m){function y(){var x=null!==m&&m.apply(this,arguments)||this;return x.type=s+"Axis."+h,x}return(0,At.ZT)(y,m),y.prototype.mergeDefaultAndTheme=function(x,w){var D=(0,Br.YD)(this),I=D?(0,Br.tE)(x):{},L=w.getTheme();(0,b.merge)(x,L.get(h+"Axis")),(0,b.merge)(x,this.getDefaultOption()),x.type=qf(x),D&&(0,Br.dt)(x,I,D)},y.prototype.optionUpdated=function(){"category"===this.option.type&&(this.__ordinalMeta=Ga.Z.createByAxisModel(this))},y.prototype.getCategories=function(x){var w=this.option;if("category"===w.type)return x?w.data:this.__ordinalMeta.categories},y.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},y.type=s+"Axis."+h,y.defaultOption=p,y}(a);c.registerComponentModel(v)}),c.registerSubTypeDefaulter(s+"Axis",qf)}function qf(c){return c.type||(c.data?"category":"value")}var ki=H(4174),EP=H(8540),xi=H(3481),Jn=H(8221),ss=["x","y"];function Tw(c){return"interval"===c.type||"time"===c.type}const AP=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type="cartesian2d",a.dimensions=ss,a}return(0,At.ZT)(s,c),s.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var a=this.getAxis("x").scale,l=this.getAxis("y").scale;if(Tw(a)&&Tw(l)){var u=a.getExtent(),h=l.getExtent(),p=this.dataToPoint([u[0],h[0]]),v=this.dataToPoint([u[1],h[1]]),m=u[1]-u[0],y=h[1]-h[0];if(m&&y){var x=(v[0]-p[0])/m,w=(v[1]-p[1])/y,L=this._transform=[x,0,0,w,p[0]-u[0]*x,p[1]-h[0]*w];this._invTransform=(0,xi.invert)([],L)}}},s.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},s.prototype.containPoint=function(a){var l=this.getAxis("x"),u=this.getAxis("y");return l.contain(l.toLocalCoord(a[0]))&&u.contain(u.toLocalCoord(a[1]))},s.prototype.containData=function(a){return this.getAxis("x").containData(a[0])&&this.getAxis("y").containData(a[1])},s.prototype.containZone=function(a,l){var u=this.dataToPoint(a),h=this.dataToPoint(l),p=this.getArea(),v=new yr.Z(u[0],u[1],h[0]-u[0],h[1]-u[1]);return p.intersect(v)},s.prototype.dataToPoint=function(a,l,u){u=u||[];var h=a[0],p=a[1];if(this._transform&&null!=h&&isFinite(h)&&null!=p&&isFinite(p))return(0,Jn.applyTransform)(u,a,this._transform);var v=this.getAxis("x"),m=this.getAxis("y");return u[0]=v.toGlobalCoord(v.dataToCoord(h,l)),u[1]=m.toGlobalCoord(m.dataToCoord(p,l)),u},s.prototype.clampData=function(a,l){var u=this.getAxis("x").scale,h=this.getAxis("y").scale,p=u.getExtent(),v=h.getExtent(),m=u.parse(a[0]),y=h.parse(a[1]);return(l=l||[])[0]=Math.min(Math.max(Math.min(p[0],p[1]),m),Math.max(p[0],p[1])),l[1]=Math.min(Math.max(Math.min(v[0],v[1]),y),Math.max(v[0],v[1])),l},s.prototype.pointToData=function(a,l){var u=[];if(this._invTransform)return(0,Jn.applyTransform)(u,a,this._invTransform);var h=this.getAxis("x"),p=this.getAxis("y");return u[0]=h.coordToData(h.toLocalCoord(a[0]),l),u[1]=p.coordToData(p.toLocalCoord(a[1]),l),u},s.prototype.getOtherAxis=function(a){return this.getAxis("x"===a.dim?"y":"x")},s.prototype.getArea=function(){var a=this.getAxis("x").getGlobalExtent(),l=this.getAxis("y").getGlobalExtent(),u=Math.min(a[0],a[1]),h=Math.min(l[0],l[1]),p=Math.max(a[0],a[1])-u,v=Math.max(l[0],l[1])-h;return new yr.Z(u,h,p,v)},s}(EP.Z);var fo=H(6592);const h0=function(c){function s(a,l,u,h,p){var v=c.call(this,a,l,u)||this;return v.index=0,v.type=h||"value",v.position=p||"bottom",v}return(0,At.ZT)(s,c),s.prototype.isHorizontal=function(){var a=this.position;return"top"===a||"bottom"===a},s.prototype.getGlobalExtent=function(a){var l=this.getExtent();return l[0]=this.toGlobalCoord(l[0]),l[1]=this.toGlobalCoord(l[1]),a&&l[0]>l[1]&&l.reverse(),l},s.prototype.pointToData=function(a,l){return this.coordToData(this.toLocalCoord(a["x"===this.dim?0:1]),l)},s.prototype.setCategorySortInfo=function(a){if("category"!==this.type)return!1;this.model.option.categorySortInfo=a,this.scale.setSortInfo(a)},s}(fo.Z);function Or(c,s,a){a=a||{};var l=c.coordinateSystem,u=s.axis,h={},p=u.getAxesOnZeroOf()[0],v=u.position,m=p?"onZero":v,y=u.dim,x=l.getRect(),w=[x.x,x.x+x.width,x.y,x.y+x.height],D={left:0,right:1,top:0,bottom:1,onZero:2},I=s.get("offset")||0,L="x"===y?[w[2]-I,w[3]+I]:[w[0]-I,w[1]+I];if(p){var N=p.toGlobalCoord(p.dataToCoord(0));L[D.onZero]=Math.max(Math.min(N,L[1]),L[0])}h.position=["y"===y?L[D[m]]:w[0],"x"===y?L[D[m]]:w[3]],h.rotation=Math.PI/2*("x"===y?0:1),h.labelDirection=h.tickDirection=h.nameDirection={top:-1,bottom:1,left:-1,right:1}[v],h.labelOffset=p?L[D[v]]-L[D.onZero]:0,s.get(["axisTick","inside"])&&(h.tickDirection=-h.tickDirection),b.retrieve(a.labelInside,s.get(["axisLabel","inside"]))&&(h.labelDirection=-h.labelDirection);var se=s.get(["axisLabel","rotate"]);return h.labelRotate="top"===m?-se:se,h.z2=1,h}function f0(c){return"cartesian2d"===c.get("coordinateSystem")}function IP(c){var s={xAxisModel:null,yAxisModel:null};return b.each(s,function(a,l){var u=l.replace(/Model$/,""),h=c.getReferringComponents(u,xn.C6).models[0];s[l]=h}),s}var yh=H(7331),Dv=H(5543),p0=Math.log;function g0(c,s,a){var l=Dv.Z.prototype,u=l.getTicks.call(a),h=l.getTicks.call(a,!0),p=u.length-1,v=l.getInterval.call(a),m=(0,ki.Xv)(c,s),y=m.extent,x=m.fixMin,w=m.fixMax;if("log"===c.type){var D=p0(c.base);y=[p0(y[0])/D,p0(y[1])/D]}c.setExtent(y[0],y[1]),c.calcNiceExtent({splitNumber:p,fixMin:x,fixMax:w});var I=l.getExtent.call(c);x&&(y[0]=I[0]),w&&(y[1]=I[1]);var L=l.getInterval.call(c),N=y[0],Z=y[1];if(x&&w)L=(Z-N)/p;else if(x)for(Z=y[0]+L*p;Z<y[1]&&isFinite(Z)&&isFinite(y[1]);)L=(0,yh.r1)(L),Z=y[0]+L*p;else if(w)for(N=y[1]-L*p;N>y[0]&&isFinite(N)&&isFinite(y[0]);)L=(0,yh.r1)(L),N=y[1]-L*p;else{c.getTicks().length-1>p&&(L=(0,yh.r1)(L));var _e=L*p;Z=Math.ceil(y[1]/L)*L,(N=(0,It.NM)(Z-_e))<0&&y[0]>=0?(N=0,Z=(0,It.NM)(_e)):Z>0&&y[1]<=0&&(Z=0,N=-(0,It.NM)(_e))}var me=(u[0].value-h[0].value)/v,De=(u[p].value-h[p].value)/v;l.setExtent.call(c,N+L*me,Z+L*De),l.setInterval.call(c,L),(me||De)&&l.setNiceExtent.call(c,N+L,Z-L)}function v0(c,s){return c.getCoordSysModel()===s}function un(c,s,a,l){a.getAxesOnZeroOf=function(){return h?[h]:[]};var h,u=c[s],p=a.model,v=p.get(["axisLine","onZero"]),m=p.get(["axisLine","onZeroAxisIndex"]);if(v){if(null!=m)vi(u[m])&&(h=u[m]);else for(var y in u)if(u.hasOwnProperty(y)&&vi(u[y])&&!l[x(u[y])]){h=u[y];break}h&&(l[x(h)]=!0)}function x(w){return w.dim+"_"+w.index}}function vi(c){return c&&"category"!==c.type&&"time"!==c.type&&(0,ki.Yb)(c)}const Qr=function(){function c(s,a,l){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=ss,this._initCartesian(s,a,l),this.model=s}return c.prototype.getRect=function(){return this._rect},c.prototype.update=function(s,a){var l=this._axesMap;function u(p){var v,m=(0,b.keys)(p),y=m.length;if(y){for(var x=[],w=y-1;w>=0;w--){var I=p[+m[w]],L=I.model,N=I.scale;(0,yh.lM)(N)&&L.get("alignTicks")&&null==L.get("interval")?x.push(I):((0,ki.Jk)(N,L),(0,yh.lM)(N)&&(v=I))}x.length&&(v||(v=x.pop(),(0,ki.Jk)(v.scale,v.model)),(0,b.each)(x,function(Z){g0(Z.scale,Z.model,v.scale)}))}}this._updateScale(s,this.model),u(l.x),u(l.y);var h={};(0,b.each)(l.x,function(p){un(l,"y",p,h)}),(0,b.each)(l.y,function(p){un(l,"x",p,h)}),this.resize(this.model,a)},c.prototype.resize=function(s,a,l){var u=s.getBoxLayoutParams(),h=!l&&s.get("containLabel"),p=(0,Br.ME)(u,{width:a.getWidth(),height:a.getHeight()});this._rect=p;var v=this._axesList;function m(){(0,b.each)(v,function(y){var x=y.isHorizontal(),w=x?[0,p.width]:[0,p.height],D=y.inverse?1:0;y.setExtent(w[D],w[1-D]),function Kr(c,s){var a=c.getExtent(),l=a[0]+a[1];c.toGlobalCoord="x"===c.dim?function(u){return u+s}:function(u){return l-u+s},c.toLocalCoord="x"===c.dim?function(u){return u-s}:function(u){return l-u+s}}(y,x?p.x:p.y)})}m(),h&&((0,b.each)(v,function(y){if(!y.model.get(["axisLabel","inside"])){var x=(0,ki.Do)(y);if(x){var w=y.isHorizontal()?"height":"width",D=y.model.get(["axisLabel","margin"]);p[w]-=x[w]+D,"top"===y.position?p.y+=x.height+D:"left"===y.position&&(p.x+=x.width+D)}}}),m()),(0,b.each)(this._coordsList,function(y){y.calcAffineTransform()})},c.prototype.getAxis=function(s,a){var l=this._axesMap[s];if(null!=l)return l[a||0]},c.prototype.getAxes=function(){return this._axesList.slice()},c.prototype.getCartesian=function(s,a){if(null!=s&&null!=a)return this._coordsMap["x"+s+"y"+a];(0,b.isObject)(s)&&(a=s.yAxisIndex,s=s.xAxisIndex);for(var u=0,h=this._coordsList;u<h.length;u++)if(h[u].getAxis("x").index===s||h[u].getAxis("y").index===a)return h[u]},c.prototype.getCartesians=function(){return this._coordsList.slice()},c.prototype.convertToPixel=function(s,a,l){var u=this._findConvertTarget(a);return u.cartesian?u.cartesian.dataToPoint(l):u.axis?u.axis.toGlobalCoord(u.axis.dataToCoord(l)):null},c.prototype.convertFromPixel=function(s,a,l){var u=this._findConvertTarget(a);return u.cartesian?u.cartesian.pointToData(l):u.axis?u.axis.coordToData(u.axis.toLocalCoord(l)):null},c.prototype._findConvertTarget=function(s){var v,m,a=s.seriesModel,l=s.xAxisModel||a&&a.getReferringComponents("xAxis",xn.C6).models[0],u=s.yAxisModel||a&&a.getReferringComponents("yAxis",xn.C6).models[0],h=s.gridModel;return a?(0,b.indexOf)(this._coordsList,v=a.coordinateSystem)<0&&(v=null):l&&u?v=this.getCartesian(l.componentIndex,u.componentIndex):l?m=this.getAxis("x",l.componentIndex):u?m=this.getAxis("y",u.componentIndex):h&&h.coordinateSystem===this&&(v=this._coordsList[0]),{cartesian:v,axis:m}},c.prototype.containPoint=function(s){var a=this._coordsList[0];if(a)return a.containPoint(s)},c.prototype._initCartesian=function(s,a,l){var u=this,h=this,p={left:!1,right:!1,top:!1,bottom:!1},v={x:{},y:{}},m={x:0,y:0};if(a.eachComponent("xAxis",y("x"),this),a.eachComponent("yAxis",y("y"),this),!m.x||!m.y)return this._axesMap={},void(this._axesList=[]);function y(x){return function(w,D){if(v0(w,s)){var I=w.get("position");"x"===x?"top"!==I&&"bottom"!==I&&(I=p.bottom?"top":"bottom"):"left"!==I&&"right"!==I&&(I=p.left?"right":"left"),p[I]=!0;var L=new h0(x,(0,ki.aG)(w),[0,0],w.get("type"),I);L.onBand="category"===L.type&&w.get("boundaryGap"),L.inverse=w.get("inverse"),w.axis=L,L.model=w,L.grid=h,L.index=D,h._axesList.push(L),v[x][D]=L,m[x]++}}}this._axesMap=v,(0,b.each)(v.x,function(x,w){(0,b.each)(v.y,function(D,I){var L="x"+w+"y"+I,N=new AP(L);N.master=u,N.model=s,u._coordsMap[L]=N,u._coordsList.push(N),N.addAxis(x),N.addAxis(D)})})},c.prototype._updateScale=function(s,a){function l(u,h){(0,b.each)((0,ki.PY)(u,h.dim),function(p){h.scale.unionExtentFromData(u,p)})}(0,b.each)(this._axesList,function(u){if(u.scale.setExtent(1/0,-1/0),"category"===u.type){var h=u.model.get("categorySortInfo");u.scale.setSortInfo(h)}}),s.eachSeries(function(u){if(f0(u)){var h=IP(u),p=h.xAxisModel,v=h.yAxisModel;if(!v0(p,a)||!v0(v,a))return;var m=this.getCartesian(p.componentIndex,v.componentIndex),y=u.getData(),x=m.getAxis("x"),w=m.getAxis("y");l(y,x),l(y,w)}},this)},c.prototype.getTooltipAxes=function(s){var a=[],l=[];return(0,b.each)(this.getCartesians(),function(u){var h=null!=s&&"auto"!==s?u.getAxis(s):u.getBaseAxis(),p=u.getOtherAxis(h);(0,b.indexOf)(a,h)<0&&a.push(h),(0,b.indexOf)(l,p)<0&&l.push(p)}),{baseAxes:a,otherAxes:l}},c.create=function(s,a){var l=[];return s.eachComponent("grid",function(u,h){var p=new c(u,s,a);p.name="grid_"+h,p.resize(u,a,!0),u.coordinateSystem=p,l.push(p)}),s.eachSeries(function(u){if(f0(u)){var h=IP(u),p=h.xAxisModel,v=h.yAxisModel,m=p.getCoordSysModel();u.coordinateSystem=m.coordinateSystem.getCartesian(p.componentIndex,v.componentIndex)}}),l},c.dimensions=ss,c}();var Ai=H(4110),ka=H(1725),el=Math.PI,Wo=function(){function c(s,a){this.group=new Rn.Z,this.opt=a,this.axisModel=s,(0,b.defaults)(a,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var l=new Rn.Z({x:a.position[0],y:a.position[1],rotation:a.rotation});l.updateTransform(),this._transformGroup=l}return c.prototype.hasBuilder=function(s){return!!Mv[s]},c.prototype.add=function(s){Mv[s](this.opt,this.axisModel,this.group,this._transformGroup)},c.prototype.getGroup=function(){return this.group},c.innerTextLayout=function(s,a,l){var h,p,u=(0,It.wW)(a-s);return(0,It.mW)(u)?(p=l>0?"top":"bottom",h="center"):(0,It.mW)(u-el)?(p=l>0?"bottom":"top",h="center"):(p="middle",h=u>0&&u<el?l>0?"right":"left":l>0?"left":"right"),{rotation:u,textAlign:h,textVerticalAlign:p}},c.makeAxisEventDataBase=function(s){var a={componentType:s.mainType,componentIndex:s.componentIndex};return a[s.mainType+"Index"]=s.componentIndex,a},c.isLabelSilent=function(s){var a=s.get("tooltip");return s.get("silent")||!(s.get("triggerEvent")||a&&a.show)},c}(),Mv={axisLine:function(c,s,a,l){var u=s.get(["axisLine","show"]);if("auto"===u&&c.handleAutoShown&&(u=c.handleAutoShown("axisLine")),u){var h=s.axis.getExtent(),p=l.transform,v=[h[0],0],m=[h[1],0],y=v[0]>m[0];p&&((0,Jn.applyTransform)(v,v,p),(0,Jn.applyTransform)(m,m,p));var x=(0,b.extend)({lineCap:"round"},s.getModel(["axisLine","lineStyle"]).getLineStyle()),w=new Ai.Z({shape:{x1:v[0],y1:v[1],x2:m[0],y2:m[1]},style:x,strokeContainThreshold:c.strokeContainThreshold||5,silent:!0,z2:1});_n.subPixelOptimizeLine(w.shape,w.style.lineWidth),w.anid="line",a.add(w);var D=s.get(["axisLine","symbol"]);if(null!=D){var I=s.get(["axisLine","symbolSize"]);(0,b.isString)(D)&&(D=[D,D]),((0,b.isString)(I)||(0,b.isNumber)(I))&&(I=[I,I]);var L=(0,si.Cq)(s.get(["axisLine","symbolOffset"])||0,I),N=I[0],Z=I[1];(0,b.each)([{rotate:c.rotation+Math.PI/2,offset:L[0],r:0},{rotate:c.rotation-Math.PI/2,offset:L[1],r:Math.sqrt((v[0]-m[0])*(v[0]-m[0])+(v[1]-m[1])*(v[1]-m[1]))}],function(se,_e){if("none"!==D[_e]&&null!=D[_e]){var me=(0,si.th)(D[_e],-N/2,-Z/2,N,Z,x.stroke,!0),De=se.r+se.offset,Pe=y?m:v;me.attr({rotation:se.rotate,x:Pe[0]+De*Math.cos(c.rotation),y:Pe[1]-De*Math.sin(c.rotation),silent:!0,z2:11}),a.add(me)}})}}},axisTickLabel:function(c,s,a,l){var u=function Gc(c,s,a,l){var u=a.axis,h=a.getModel("axisTick"),p=h.get("show");if("auto"===p&&l.handleAutoShown&&(p=l.handleAutoShown("axisTick")),p&&!u.scale.isBlank()){for(var v=h.getModel("lineStyle"),m=l.tickDirection*h.get("length"),x=jo(u.getTicksCoords(),s.transform,m,(0,b.defaults)(v.getLineStyle(),{stroke:a.get(["axisLine","lineStyle","color"])}),"ticks"),w=0;w<x.length;w++)c.add(x[w]);return x}}(a,l,s,c),h=function bh(c,s,a,l){var u=a.axis;if((0,b.retrieve)(l.axisLabelShow,a.get(["axisLabel","show"]))&&!u.scale.isBlank()){var p=a.getModel("axisLabel"),v=p.get("margin"),m=u.getViewLabels(),y=((0,b.retrieve)(l.labelRotate,p.get("rotate"))||0)*el/180,x=Wo.innerTextLayout(l.rotation,y,l.labelDirection),w=a.getCategories&&a.getCategories(!0),D=[],I=Wo.isLabelSilent(a),L=a.get("triggerEvent");return(0,b.each)(m,function(N,Z){var se="ordinal"===u.scale.type?u.scale.getRawOrdinalNumber(N.tickValue):N.tickValue,_e=N.formattedLabel,me=N.rawLabel,De=p;if(w&&w[se]){var Pe=w[se];(0,b.isObject)(Pe)&&Pe.textStyle&&(De=new ka.Z(Pe.textStyle,p,a.ecModel))}var Ie=De.getTextColor()||a.get(["axisLine","lineStyle","color"]),ke=u.dataToCoord(se),Ue=new _t.ZP({x:ke,y:l.labelOffset+l.labelDirection*v,rotation:x.rotation,silent:I,z2:10+(N.level||0),style:(0,qt.Lr)(De,{text:_e,align:De.getShallow("align",!0)||x.textAlign,verticalAlign:De.getShallow("verticalAlign",!0)||De.getShallow("baseline",!0)||x.textVerticalAlign,fill:(0,b.isFunction)(Ie)?Ie("category"===u.type?me:"value"===u.type?se+"":se,Z):Ie})});if(Ue.anid="label_"+se,L){var Ye=Wo.makeAxisEventDataBase(a);Ye.targetType="axisLabel",Ye.value=me,Ye.tickIndex=Z,"category"===u.type&&(Ye.dataIndex=se),(0,Tr.A)(Ue).eventData=Ye}s.add(Ue),Ue.updateTransform(),D.push(Ue),c.add(Ue),Ue.decomposeTransform()}),D}}(a,l,s,c);if(function ZV(c,s,a){if(!(0,ki.WY)(c.axis)){var l=c.get(["axisLabel","showMinLabel"]),u=c.get(["axisLabel","showMaxLabel"]),h=(s=s||[])[0],p=s[1],v=s[s.length-1],m=s[s.length-2],y=(a=a||[])[0],x=a[1],w=a[a.length-1],D=a[a.length-2];!1===l?(tl(h),tl(y)):RP(h,p)&&(l?(tl(p),tl(x)):(tl(h),tl(y))),!1===u?(tl(v),tl(w)):RP(m,v)&&(u?(tl(m),tl(D)):(tl(v),tl(w)))}}(s,h,u),function Aw(c,s,a,l){var u=a.axis,h=a.getModel("minorTick");if(h.get("show")&&!u.scale.isBlank()){var p=u.getMinorTicksCoords();if(p.length)for(var v=h.getModel("lineStyle"),m=l*h.get("length"),y=(0,b.defaults)(v.getLineStyle(),(0,b.defaults)(a.getModel("axisTick").getLineStyle(),{stroke:a.get(["axisLine","lineStyle","color"])})),x=0;x<p.length;x++)for(var w=jo(p[x],s.transform,m,y,"minorticks_"+x),D=0;D<w.length;D++)c.add(w[D])}}(a,l,s,c.tickDirection),s.get(["axisLabel","hideOverlap"])){var p=(0,Ne.VT)((0,b.map)(h,function(v){return{label:v,priority:v.z2,defaultAttr:{ignore:v.ignore}}}));(0,Ne.yl)(p)}},axisName:function(c,s,a,l){var u=(0,b.retrieve)(c.axisName,s.get("name"));if(u){var D,L,h=s.get("nameLocation"),p=c.nameDirection,v=s.getModel("nameTextStyle"),m=s.get("nameGap")||0,y=s.axis.getExtent(),x=y[0]>y[1]?-1:1,w=["start"===h?y[0]-x*m:"end"===h?y[1]+x*m:(y[0]+y[1])/2,_0(h)?c.labelOffset+p*m:0],I=s.get("nameRotate");null!=I&&(I=I*el/180),_0(h)?D=Wo.innerTextLayout(c.rotation,I??c.rotation,p):(D=function m0(c,s,a,l){var h,p,u=(0,It.wW)(a-c),v=l[0]>l[1],m="start"===s&&!v||"start"!==s&&v;return(0,It.mW)(u-el/2)?(p=m?"bottom":"top",h="center"):(0,It.mW)(u-1.5*el)?(p=m?"top":"bottom",h="center"):(p="middle",h=u<1.5*el&&u>el/2?m?"left":"right":m?"right":"left"),{rotation:u,textAlign:h,textVerticalAlign:p}}(c.rotation,h,I||0,y),null!=(L=c.axisNameAvailableWidth)&&(L=Math.abs(L/Math.sin(D.rotation)),!isFinite(L)&&(L=null)));var N=v.getFont(),Z=s.get("nameTruncate",!0)||{},se=Z.ellipsis,_e=(0,b.retrieve)(c.nameTruncateMaxWidth,Z.maxWidth,L),me=new _t.ZP({x:w[0],y:w[1],rotation:D.rotation,silent:Wo.isLabelSilent(s),style:(0,qt.Lr)(v,{text:u,font:N,overflow:"truncate",width:_e,ellipsis:se,fill:v.getTextColor()||s.get(["axisLine","lineStyle","color"]),align:v.get("align")||D.textAlign,verticalAlign:v.get("verticalAlign")||D.textVerticalAlign}),z2:1});if(_n.setTooltipConfig({el:me,componentModel:s,itemName:u}),me.__fullText=u,me.anid="name",s.get("triggerEvent")){var De=Wo.makeAxisEventDataBase(s);De.targetType="axisName",De.name=u,(0,Tr.A)(me).eventData=De}l.add(me),me.updateTransform(),a.add(me),me.decomposeTransform()}}};function tl(c){c&&(c.ignore=!0)}function RP(c,s){var a=c&&c.getBoundingRect().clone(),l=s&&s.getBoundingRect().clone();if(a&&l){var u=xi.identity([]);return xi.rotate(u,u,-c.rotation),a.applyTransform(xi.mul([],u,c.getLocalTransform())),l.applyTransform(xi.mul([],u,s.getLocalTransform())),a.intersect(l)}}function _0(c){return"middle"===c||"center"===c}function jo(c,s,a,l,u){for(var h=[],p=[],v=[],m=0;m<c.length;m++){var y=c[m].coord;p[0]=y,p[1]=0,v[0]=y,v[1]=a,s&&((0,Jn.applyTransform)(p,p,s),(0,Jn.applyTransform)(v,v,s));var x=new Ai.Z({shape:{x1:p[0],y1:p[1],x2:v[0],y2:v[1]},style:l,z2:2,autoBatch:!0,silent:!0});_n.subPixelOptimizeLine(x.shape,x.style.lineWidth),x.anid=u+"_"+c[m].tickValue,h.push(x)}return h}const Ao=Wo;function Jf(c,s){return"all"===c||(0,b.isArray)(c)&&(0,b.indexOf)(c,s)>=0||c===s}function Pw(c){var s=ep(c);if(s){var a=s.axisPointerModel,l=s.axis.scale,u=a.option,h=a.get("status"),p=a.get("value");null!=p&&(p=l.parse(p));var v=Tv(a);null==h&&(u.status=v?"show":"hide");var m=l.getExtent().slice();m[0]>m[1]&&m.reverse(),(null==p||p>m[1])&&(p=m[1]),p<m[0]&&(p=m[0]),u.value=p,v&&(u.status=s.axis.scale.isBlank()?"hide":"show")}}function ep(c){var s=(c.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return s&&s.axesInfo[dd(c)]}function Tv(c){return!!c.get(["handle","show"])}function dd(c){return c.type+"||"+c.id}var b0={};const Cu=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u,h){this.axisPointerClass&&Pw(a),c.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(a,u,!0)},s.prototype.updateAxisPointer=function(a,l,u,h){this._doUpdateAxisPointerClass(a,u,!1)},s.prototype.remove=function(a,l){var u=this._axisPointer;u&&u.remove(l)},s.prototype.dispose=function(a,l){this._disposeAxisPointer(l),c.prototype.dispose.apply(this,arguments)},s.prototype._doUpdateAxisPointerClass=function(a,l,u){var h=s.getAxisPointerClass(this.axisPointerClass);if(h){var p=function NP(c){var s=ep(c);return s&&s.axisPointerModel}(a);p?(this._axisPointer||(this._axisPointer=new h)).render(a,p,l,u):this._disposeAxisPointer(l)}},s.prototype._disposeAxisPointer=function(a){this._axisPointer&&this._axisPointer.dispose(a),this._axisPointer=null},s.registerAxisPointerClass=function(a,l){b0[a]=l},s.getAxisPointerClass=function(a){return a&&b0[a]},s.type="axis",s}(va.Z);var Ev=(0,xn.Yf)();function Av(c,s,a,l){var u=a.axis;if(!u.scale.isBlank()){var h=a.getModel("splitArea"),p=h.getModel("areaStyle"),v=p.get("color"),m=l.coordinateSystem.getRect(),y=u.getTicksCoords({tickModel:h,clamp:!0});if(y.length){var x=v.length,w=Ev(c).splitAreaColors,D=b.createHashMap(),I=0;if(w)for(var L=0;L<y.length;L++){var N=w.get(y[L].tickValue);if(null!=N){I=(N+(x-1)*L)%x;break}}var Z=u.toGlobalCoord(y[0].coord),se=p.getAreaStyle();for(v=b.isArray(v)?v:[v],L=1;L<y.length;L++){var _e=u.toGlobalCoord(y[L].coord),me=void 0,De=void 0,Pe=void 0,Ie=void 0;u.isHorizontal()?(De=m.y,Ie=m.height,Z=(me=Z)+(Pe=_e-me)):(me=m.x,Pe=m.width,Z=(De=Z)+(Ie=_e-De));var ke=y[L-1].tickValue;null!=ke&&D.set(ke,I),s.add(new Mi.Z({anid:null!=ke?"area_"+ke:null,shape:{x:me,y:De,width:Pe,height:Ie},style:b.defaults({fill:v[I]},se),autoBatch:!0,silent:!0})),I=(I+1)%x}Ev(c).splitAreaColors=D}}}function Lw(c){Ev(c).splitAreaColors=null}var FP=["axisLine","axisTickLabel","axisName"],ls=["splitArea","splitLine","minorSplitLine"],Wc=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.axisPointerClass="CartesianAxisPointer",a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u,h){this.group.removeAll();var p=this._axisGroup;if(this._axisGroup=new Rn.Z,this.group.add(this._axisGroup),a.get("show")){var v=a.getCoordSysModel(),m=Or(v,a),y=new Ao(a,b.extend({handleAutoShown:function(w){for(var D=v.coordinateSystem.getCartesians(),I=0;I<D.length;I++)if((0,yh.lM)(D[I].getOtherAxis(a.axis).scale))return!0;return!1}},m));b.each(FP,y.add,y),this._axisGroup.add(y.getGroup()),b.each(ls,function(w){a.get([w,"show"])&&Ta[w](this,this._axisGroup,a,v)},this),h&&"changeAxisOrder"===h.type&&h.isInitSort||_n.groupTransition(p,this._axisGroup,a),c.prototype.render.call(this,a,l,u,h)}},s.prototype.remove=function(){Lw(this)},s.type="cartesianAxis",s}(Cu),Ta={splitLine:function(c,s,a,l){var u=a.axis;if(!u.scale.isBlank()){var h=a.getModel("splitLine"),p=h.getModel("lineStyle"),v=p.get("color");v=b.isArray(v)?v:[v];for(var m=l.coordinateSystem.getRect(),y=u.isHorizontal(),x=0,w=u.getTicksCoords({tickModel:h}),D=[],I=[],L=p.getLineStyle(),N=0;N<w.length;N++){var Z=u.toGlobalCoord(w[N].coord);y?(D[0]=Z,D[1]=m.y,I[0]=Z,I[1]=m.y+m.height):(D[0]=m.x,D[1]=Z,I[0]=m.x+m.width,I[1]=Z);var se=x++%v.length,me=new Ai.Z({anid:null!=w[N].tickValue?"line_"+w[N].tickValue:null,autoBatch:!0,shape:{x1:D[0],y1:D[1],x2:I[0],y2:I[1]},style:b.defaults({stroke:v[se]},L),silent:!0});_n.subPixelOptimizeLine(me.shape,L.lineWidth),s.add(me)}}},minorSplitLine:function(c,s,a,l){var u=a.axis,p=a.getModel("minorSplitLine").getModel("lineStyle"),v=l.coordinateSystem.getRect(),m=u.isHorizontal(),y=u.getMinorTicksCoords();if(y.length)for(var x=[],w=[],D=p.getLineStyle(),I=0;I<y.length;I++)for(var L=0;L<y[I].length;L++){var N=u.toGlobalCoord(y[I][L].coord);m?(x[0]=N,x[1]=v.y,w[0]=N,w[1]=v.y+v.height):(x[0]=v.x,x[1]=N,w[0]=v.x+v.width,w[1]=N);var Z=new Ai.Z({anid:"minor_line_"+y[I][L].tickValue,autoBatch:!0,shape:{x1:x[0],y1:x[1],x2:w[0],y2:w[1]},style:D,silent:!0});_n.subPixelOptimizeLine(Z.shape,D.lineWidth),s.add(Z)}},splitArea:function(c,s,a,l){Av(c,s,a,l)}},xh=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.type="xAxis",s}(Wc),BP=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=xh.type,a}return(0,At.ZT)(s,c),s.type="yAxis",s}(Wc),zP=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type="grid",a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l){this.group.removeAll(),a.get("show")&&this.group.add(new Mi.Z({shape:a.coordinateSystem.getRect(),style:(0,b.defaults)({fill:a.get("backgroundColor")},a.getItemStyle()),silent:!0,z2:-1}))},s.type="grid",s}(va.Z),Ow={offset:0};function kw(c){c.registerComponentView(zP),c.registerComponentModel(wv),c.registerCoordinateSystem("cartesian2d",Qr),Qf(c,"x",Kf,Ow),Qf(c,"y",Kf,Ow),c.registerComponentView(xh),c.registerComponentView(BP),c.registerPreprocessor(function(s){s.xAxis&&s.yAxis&&!s.grid&&(s.grid={})})}function Pv(c){c.eachSeriesByType("radar",function(s){var a=s.getData(),l=[],u=s.coordinateSystem;if(u){var h=u.getIndicatorAxes();b.each(h,function(p,v){a.each(a.mapDimension(h[v].dim),function(m,y){l[y]=l[y]||[];var x=u.dataToPoint(m,v);l[y][v]=tp(x)?x:Rv(u)})}),a.each(function(p){var v=b.find(l[p],function(m){return tp(m)})||Rv(u);l[p].push(v.slice()),a.setItemLayout(p,l[p])})}})}function tp(c){return!isNaN(c[0])&&!isNaN(c[1])}function Rv(c){return[c.cx,c.cy]}function Nw(c){var s=c.polar;if(s){b.isArray(s)||(s=[s]);var a=[];b.each(s,function(l,u){l.indicator?(l.type&&!l.shape&&(l.shape=l.type),c.radar=c.radar||[],b.isArray(c.radar)||(c.radar=[c.radar]),c.radar.push(l)):a.push(l)}),c.polar=a}b.each(c.series,function(l){l&&"radar"===l.type&&l.polarIndex&&(l.radarIndex=l.polarIndex)})}var nl=H(3186);const np=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u){var h=a.coordinateSystem,p=this.group,v=a.getData(),m=this._data;function y(D,I){var L=D.getItemVisual(I,"symbol")||"circle";if("none"!==L){var N=si.zp(D.getItemVisual(I,"symbolSize")),Z=si.th(L,-1,-1,2,2),se=D.getItemVisual(I,"symbolRotate")||0;return Z.attr({style:{strokeNoScale:!0},z2:100,scaleX:N[0]/2,scaleY:N[1]/2,rotation:se*Math.PI/180||0}),Z}}function x(D,I,L,N,Z,se){L.removeAll();for(var _e=0;_e<I.length-1;_e++){var me=y(N,Z);me&&(me.__dimIdx=_e,D[_e]?(me.setPosition(D[_e]),_n[se?"initProps":"updateProps"](me,{x:I[_e][0],y:I[_e][1]},a,Z)):me.setPosition(I[_e]),L.add(me))}}function w(D){return b.map(D,function(I){return[h.cx,h.cy]})}v.diff(m).add(function(D){var I=v.getItemLayout(D);if(I){var L=new nl.Z,N=new Ls.Z,Z={shape:{points:I}};L.shape.points=w(I),N.shape.points=w(I),Sn.KZ(L,Z,a,D),Sn.KZ(N,Z,a,D);var se=new Rn.Z,_e=new Rn.Z;se.add(N),se.add(L),se.add(_e),x(N.shape.points,I,_e,v,D,!0),v.setItemGraphicEl(D,se)}}).update(function(D,I){var L=m.getItemGraphicEl(I),N=L.childAt(0),Z=L.childAt(1),se=L.childAt(2),_e={shape:{points:v.getItemLayout(D)}};!_e.shape.points||(x(N.shape.points,_e.shape.points,se,v,D,!1),(0,Sn.Zi)(Z),(0,Sn.Zi)(N),Sn.D(N,_e,a),Sn.D(Z,_e,a),v.setItemGraphicEl(D,L))}).remove(function(D){p.remove(m.getItemGraphicEl(D))}).execute(),v.eachItemGraphicEl(function(D,I){var L=v.getItemModel(I),N=D.childAt(0),Z=D.childAt(1),se=D.childAt(2),_e=v.getItemVisual(I,"style"),me=_e.fill;p.add(D),N.useStyle(b.defaults(L.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:me})),(0,Wt.WO)(N,L,"lineStyle"),(0,Wt.WO)(Z,L,"areaStyle");var De=L.getModel("areaStyle"),Pe=De.isEmpty()&&De.parentModel.isEmpty();Z.ignore=Pe,b.each(["emphasis","select","blur"],function(Ue){var Ye=L.getModel([Ue,"areaStyle"]),Ke=Ye.isEmpty()&&Ye.parentModel.isEmpty();Z.ensureState(Ue).ignore=Ke&&Pe}),Z.useStyle(b.defaults(De.getAreaStyle(),{fill:me,opacity:.7,decal:_e.decal}));var Ie=L.getModel("emphasis"),ke=Ie.getModel("itemStyle").getItemStyle();se.eachChild(function(Ue){if(Ue instanceof be.ZP){var Ye=Ue.style;Ue.useStyle(b.extend({image:Ye.image,x:Ye.x,y:Ye.y,width:Ye.width,height:Ye.height},_e))}else Ue.useStyle(_e),Ue.setColor(me),Ue.style.strokeNoScale=!0;Ue.ensureState("emphasis").style=b.clone(ke);var Je=v.getStore().get(v.getDimensionIndex(Ue.__dimIdx),I);(null==Je||isNaN(Je))&&(Je=""),(0,qt.ni)(Ue,(0,qt.k3)(L),{labelFetcher:v.hostModel,labelDataIndex:I,labelDimIndex:Ue.__dimIdx,defaultText:Je,inheritColor:me,defaultOpacity:_e.opacity})}),(0,Wt.k5)(D,Ie.get("focus"),Ie.get("blurScope"),Ie.get("disabled"))}),this._data=v},s.prototype.remove=function(){this.group.removeAll(),this._data=null},s.type="radar",s}(ia.Z);var da=H(4974);const rp=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.hasSymbolVisual=!0,a}return(0,At.ZT)(s,c),s.prototype.init=function(a){c.prototype.init.apply(this,arguments),this.legendVisualProvider=new gn(b.bind(this.getData,this),b.bind(this.getRawData,this))},s.prototype.getInitialData=function(a,l){return vt(this,{generateCoord:"indicator_",generateCoordCount:1/0})},s.prototype.formatTooltip=function(a,l,u){var h=this.getData(),v=this.coordinateSystem.getIndicatorAxes(),m=this.getData().getName(a),y=""===m?this.name:m,x=(0,da.jT)(this,a);return(0,da.TX)("section",{header:y,sortBlocks:!0,blocks:b.map(v,function(w){var D=h.get(h.mapDimension(w.dim),a);return(0,da.TX)("nameValue",{markerType:"subItem",markerColor:x,name:w.name,value:D,sortParam:D})})})},s.prototype.getTooltipPosition=function(a){if(null!=a)for(var l=this.getData(),u=this.coordinateSystem,h=l.getValues(b.map(u.dimensions,function(y){return l.mapDimension(y)}),a),p=0,v=h.length;p<v;p++)if(!isNaN(h[p])){var m=u.getIndicatorAxes();return u.coordToPoint(m[p].dataToCoord(h[p]),p)}},s.type="series.radar",s.dependencies=["radar"],s.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},s}(Xi.Z);var hd=MP.value;function Lv(c,s){return b.defaults({show:s},c)}const YV=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.optionUpdated=function(){var a=this.get("boundaryGap"),l=this.get("splitNumber"),u=this.get("scale"),h=this.get("axisLine"),p=this.get("axisTick"),v=this.get("axisLabel"),m=this.get("axisName"),y=this.get(["axisName","show"]),x=this.get(["axisName","formatter"]),w=this.get("axisNameGap"),D=this.get("triggerEvent"),I=b.map(this.get("indicator")||[],function(L){null!=L.max&&L.max>0&&!L.min?L.min=0:null!=L.min&&L.min<0&&!L.max&&(L.max=0);var N=m;null!=L.color&&(N=b.defaults({color:L.color},m));var Z=b.merge(b.clone(L),{boundaryGap:a,splitNumber:l,scale:u,axisLine:h,axisTick:p,axisLabel:v,name:L.text,showName:y,nameLocation:"end",nameGap:w,nameTextStyle:N,triggerEvent:D},!1);b.isString(x)?Z.name=x.replace("{value}",Z.name??""):b.isFunction(x)&&(Z.name=x(Z.name,Z));var _e=new ka.Z(Z,null,this.ecModel);return b.mixin(_e,$f.W.prototype),_e.mainType="radar",_e.componentIndex=this.componentIndex,_e},this);this._indicatorModels=I},s.prototype.getIndicatorModels=function(){return this._indicatorModels},s.type="radar",s.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:b.merge({lineStyle:{color:"#bbb"}},hd.axisLine),axisLabel:Lv(hd.axisLabel,!1),axisTick:Lv(hd.axisTick,!1),splitLine:Lv(hd.splitLine,!0),splitArea:Lv(hd.splitArea,!0),indicator:[]},s}(ma.Z);var Ch=H(9359),ip=H(495),Fw=["axisLine","axisTickLabel","axisName"];const Ov=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u){this.group.removeAll(),this._buildAxes(a),this._buildSplitLineAndArea(a)},s.prototype._buildAxes=function(a){var l=a.coordinateSystem,u=l.getIndicatorAxes(),h=b.map(u,function(p){var v=p.model.get("showName")?p.name:"";return new Ao(p.model,{axisName:v,position:[l.cx,l.cy],rotation:p.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})});b.each(h,function(p){b.each(Fw,p.add,p),this.group.add(p.getGroup())},this)},s.prototype._buildSplitLineAndArea=function(a){var l=a.coordinateSystem,u=l.getIndicatorAxes();if(u.length){var h=a.get("shape"),p=a.getModel("splitLine"),v=a.getModel("splitArea"),m=p.getModel("lineStyle"),y=v.getModel("areaStyle"),x=p.get("show"),w=v.get("show"),D=m.get("color"),I=y.get("color"),L=b.isArray(D)?D:[D],N=b.isArray(I)?I:[I],Z=[],se=[];if("circle"===h)for(var me=u[0].getTicksCoords(),De=l.cx,Pe=l.cy,Ie=0;Ie<me.length;Ie++)x&&Z[_e(Z,L,Ie)].push(new Ch.Z({shape:{cx:De,cy:Pe,r:me[Ie].coord}})),w&&Ie<me.length-1&&se[_e(se,N,Ie)].push(new ip.Z({shape:{cx:De,cy:Pe,r0:me[Ie].coord,r:me[Ie+1].coord}}));else{var Ue,Ye=b.map(u,function(wt,kt){var en=wt.getTicksCoords();return Ue=null==Ue?en.length-1:Math.min(en.length-1,Ue),b.map(en,function(Yt){return l.coordToPoint(Yt.coord,kt)})}),Ke=[];for(Ie=0;Ie<=Ue;Ie++){for(var Je=[],ut=0;ut<u.length;ut++)Je.push(Ye[ut][Ie]);Je[0]&&Je.push(Je[0].slice()),x&&Z[_e(Z,L,Ie)].push(new Ls.Z({shape:{points:Je}})),w&&Ke&&se[_e(se,N,Ie-1)].push(new nl.Z({shape:{points:Je.concat(Ke)}})),Ke=Je.slice().reverse()}}var pt=m.getLineStyle(),yt=y.getAreaStyle();b.each(se,function(wt,kt){this.group.add(_n.mergePath(wt,{style:b.defaults({stroke:"none",fill:N[kt%N.length]},yt),silent:!0}))},this),b.each(Z,function(wt,kt){this.group.add(_n.mergePath(wt,{style:b.defaults({fill:"none",stroke:L[kt%L.length]},pt),silent:!0}))},this)}function _e(wt,kt,en){var Yt=en%kt.length;return wt[Yt]=wt[Yt]||[],Yt}},s.type="radar",s}(va.Z),zw=function(c){function s(a,l,u){var h=c.call(this,a,l,u)||this;return h.type="value",h.angle=0,h.name="",h}return(0,At.ZT)(s,c),s}(fo.Z),GP=function(){function c(s,a,l){this.dimensions=[],this._model=s,this._indicatorAxes=(0,b.map)(s.getIndicatorModels(),function(u,h){var p="indicator_"+h,v=new zw(p,new Dv.Z);return v.name=u.get("name"),v.model=u,u.axis=v,this.dimensions.push(p),v},this),this.resize(s,l)}return c.prototype.getIndicatorAxes=function(){return this._indicatorAxes},c.prototype.dataToPoint=function(s,a){return this.coordToPoint(this._indicatorAxes[a].dataToCoord(s),a)},c.prototype.coordToPoint=function(s,a){var u=this._indicatorAxes[a].angle;return[this.cx+s*Math.cos(u),this.cy-s*Math.sin(u)]},c.prototype.pointToData=function(s){var a=s[0]-this.cx,l=s[1]-this.cy,u=Math.sqrt(a*a+l*l);a/=u,l/=u;for(var v,h=Math.atan2(-l,a),p=1/0,m=-1,y=0;y<this._indicatorAxes.length;y++){var x=this._indicatorAxes[y],w=Math.abs(h-x.angle);w<p&&(v=x,m=y,p=w)}return[m,+(v&&v.coordToData(u))]},c.prototype.resize=function(s,a){var l=s.get("center"),u=a.getWidth(),h=a.getHeight(),p=Math.min(u,h)/2;this.cx=It.GM(l[0],u),this.cy=It.GM(l[1],h),this.startAngle=s.get("startAngle")*Math.PI/180;var v=s.get("radius");((0,b.isString)(v)||(0,b.isNumber)(v))&&(v=[0,v]),this.r0=It.GM(v[0],p),this.r=It.GM(v[1],p),(0,b.each)(this._indicatorAxes,function(m,y){m.setExtent(this.r0,this.r);var x=this.startAngle+y*Math.PI*2/this._indicatorAxes.length;x=Math.atan2(Math.sin(x),Math.cos(x)),m.angle=x},this)},c.prototype.update=function(s,a){var l=this._indicatorAxes,u=this._model;(0,b.each)(l,function(v){v.scale.setExtent(1/0,-1/0)}),s.eachSeriesByType("radar",function(v,m){if("radar"===v.get("coordinateSystem")&&s.getComponent("radar",v.get("radarIndex"))===u){var y=v.getData();(0,b.each)(l,function(x){x.scale.unionExtentFromData(y,y.mapDimension(x.dim))})}},this);var h=u.get("splitNumber"),p=new Dv.Z;p.setExtent(0,h),p.setInterval(1),(0,b.each)(l,function(v,m){g0(v.scale,v.model,p)})},c.prototype.convertToPixel=function(s,a,l){return console.warn("Not implemented."),null},c.prototype.convertFromPixel=function(s,a,l){return console.warn("Not implemented."),null},c.prototype.containPoint=function(s){return console.warn("Not implemented."),!1},c.create=function(s,a){var l=[];return s.eachComponent("radar",function(u){var h=new c(u,s,a);l.push(h),u.coordinateSystem=h}),s.eachSeriesByType("radar",function(u){"radar"===u.get("coordinateSystem")&&(u.coordinateSystem=l[u.get("radarIndex")||0])}),l},c.dimensions=[],c}();function Sh(c){c.registerCoordinateSystem("radar",GP),c.registerComponentModel(YV),c.registerComponentView(Ov),c.registerVisual({seriesType:"radar",reset:function(s){var a=s.getData();a.each(function(l){a.setItemVisual(l,"legendIcon","roundRect")}),a.setVisual("legendIcon","roundRect")}})}var ap=H(6801),rl=H(1170),op=H(5433),C0="\0_ec_interaction_mutex";function Hw(c,s){return!!fd(c)[s]}function fd(c){return c[C0]||(c[C0]={})}function sp(c,s,a,l,u){c.pointerChecker&&c.pointerChecker(l,u.originX,u.originY)&&(rl.sT(l.event),lp(c,s,a,l,u))}function lp(c,s,a,l,u){u.isAvailableBehavior=(0,b.bind)(pd,null,a,l),c.trigger(s,u)}function pd(c,s,a){var l=a[c];return!c||l&&(!(0,b.isString)(l)||s.event[l+"Key"])}op.zl({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},b.noop);const cp=function(c){function s(a){var l=c.call(this)||this;l._zr=a;var u=(0,b.bind)(l._mousedownHandler,l),h=(0,b.bind)(l._mousemoveHandler,l),p=(0,b.bind)(l._mouseupHandler,l),v=(0,b.bind)(l._mousewheelHandler,l),m=(0,b.bind)(l._pinchHandler,l);return l.enable=function(y,x){this.disable(),this._opt=(0,b.defaults)((0,b.clone)(x)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==y&&(y=!0),(!0===y||"move"===y||"pan"===y)&&(a.on("mousedown",u),a.on("mousemove",h),a.on("mouseup",p)),(!0===y||"scale"===y||"zoom"===y)&&(a.on("mousewheel",v),a.on("pinch",m))},l.disable=function(){a.off("mousedown",u),a.off("mousemove",h),a.off("mouseup",p),a.off("mousewheel",v),a.off("pinch",m)},l}return(0,At.ZT)(s,c),s.prototype.isDragging=function(){return this._dragging},s.prototype.isPinching=function(){return this._pinching},s.prototype.setPointerChecker=function(a){this.pointerChecker=a},s.prototype.dispose=function(){this.disable()},s.prototype._mousedownHandler=function(a){if(!rl.x1(a)){for(var l=a.target;l;){if(l.draggable)return;l=l.__hostTarget||l.parent}var u=a.offsetX,h=a.offsetY;this.pointerChecker&&this.pointerChecker(a,u,h)&&(this._x=u,this._y=h,this._dragging=!0)}},s.prototype._mousemoveHandler=function(a){if(this._dragging&&pd("moveOnMouseMove",a,this._opt)&&"pinch"!==a.gestureEvent&&!Hw(this._zr,"globalPan")){var l=a.offsetX,u=a.offsetY,h=this._x,p=this._y,v=l-h,m=u-p;this._x=l,this._y=u,this._opt.preventDefaultMouseMove&&rl.sT(a.event),lp(this,"pan","moveOnMouseMove",a,{dx:v,dy:m,oldX:h,oldY:p,newX:l,newY:u,isAvailableBehavior:null})}},s.prototype._mouseupHandler=function(a){rl.x1(a)||(this._dragging=!1)},s.prototype._mousewheelHandler=function(a){var l=pd("zoomOnMouseWheel",a,this._opt),u=pd("moveOnMouseWheel",a,this._opt),h=a.wheelDelta,p=Math.abs(h),v=a.offsetX,m=a.offsetY;if(0!==h&&(l||u)){if(l){var y=p>3?1.4:p>1?1.2:1.1;sp(this,"zoom","zoomOnMouseWheel",a,{scale:h>0?y:1/y,originX:v,originY:m,isAvailableBehavior:null})}if(u){var w=Math.abs(h);sp(this,"scrollMove","moveOnMouseWheel",a,{scrollDelta:(h>0?1:-1)*(w>3?.4:w>1?.15:.05),originX:v,originY:m,isAvailableBehavior:null})}}},s.prototype._pinchHandler=function(a){Hw(this._zr,"globalPan")||sp(this,"zoom",null,a,{scale:a.pinchScale>1?1.1:1/1.1,originX:a.pinchX,originY:a.pinchY,isAvailableBehavior:null})},s}(ap.Z);function kv(c,s,a){var l=c.target;l.x+=s,l.y+=a,l.dirty()}function Nv(c,s,a,l){var u=c.target,h=c.zoomLimit,p=c.zoom=c.zoom||1;if(p*=s,h){var v=h.min||0;p=Math.max(Math.min(h.max||1/0,p),v)}var y=p/c.zoom;c.zoom=p,u.x-=(a-u.x)*(y-1),u.y-=(l-u.y)*(y-1),u.scaleX*=y,u.scaleY*=y,u.dirty()}var Uw={axisPointer:1,tooltip:1,brush:1};function up(c,s,a){var l=s.getComponentByElement(c.topTarget),u=l&&l.coordinateSystem;return l&&l!==a&&!Uw.hasOwnProperty(l.mainType)&&u&&u.model!==a}var jP=H(6743),gd=H(9441),dp=H(641);function Gw(c){(0,b.isString)(c)&&(c=(new DOMParser).parseFromString(c,"text/xml"));var a=c;for(9===a.nodeType&&(a=a.firstChild);"svg"!==a.nodeName.toLowerCase()||1!==a.nodeType;)a=a.nextSibling;return a}var Fv,hp={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},vd=(0,b.keys)(hp),Bv={"alignment-baseline":"textBaseline","stop-color":"stopColor"},Gi=(0,b.keys)(Bv),S0=function(){function c(){this._defs={},this._root=null}return c.prototype.parse=function(s,a){a=a||{};var l=Gw(s);this._defsUsePending=[];var u=new Rn.Z;this._root=u;var x,w,h=[],p=l.getAttribute("viewBox")||"",v=parseFloat(l.getAttribute("width")||a.width),m=parseFloat(l.getAttribute("height")||a.height);isNaN(v)&&(v=null),isNaN(m)&&(m=null),po(l,u,null,!0,!1);for(var y=l.firstChild;y;)this._parseNode(y,u,h,null,!1,!1),y=y.nextSibling;if(function XV(c,s){for(var a=0;a<s.length;a++){var l=s[a];l[0].style[l[1]]=c[l[2]]}}(this._defs,this._defsUsePending),this._defsUsePending=[],p){var D=on(p);D.length>=4&&(x={x:parseFloat(D[0]||0),y:parseFloat(D[1]||0),width:parseFloat(D[2]),height:parseFloat(D[3])})}if(x&&null!=v&&null!=m&&(w=$P(x,{x:0,y:0,width:v,height:m}),!a.ignoreViewBox)){var I=u;(u=new Rn.Z).add(I),I.scaleX=I.scaleY=w.scale,I.x=w.x,I.y=w.y}return!a.ignoreRootClip&&null!=v&&null!=m&&u.setClipPath(new Mi.Z({shape:{x:0,y:0,width:v,height:m}})),{root:u,width:v,height:m,viewBoxRect:x,viewBoxTransform:w,named:h}},c.prototype._parseNode=function(s,a,l,u,h,p){var m,v=s.nodeName.toLowerCase(),y=u;if("defs"===v&&(h=!0),"text"===v&&(p=!0),"defs"===v||"switch"===v)m=a;else{if(!h){var x=Fv[v];if(x&&(0,b.hasOwn)(Fv,v)){m=x.call(this,s,a);var w=s.getAttribute("name");if(w){var D={name:w,namedFrom:null,svgNodeTagLower:v,el:m};l.push(D),"g"===v&&(y=D)}else u&&l.push({name:u.name,namedFrom:u,svgNodeTagLower:v,el:m});a.add(m)}}var I=Ww[v];if(I&&(0,b.hasOwn)(Ww,v)){var L=I.call(this,s),N=s.getAttribute("id");N&&(this._defs[N]=L)}}if(m&&m.isGroup)for(var Z=s.firstChild;Z;)1===Z.nodeType?this._parseNode(Z,m,l,y,h,p):3===Z.nodeType&&p&&this._parseText(Z,m),Z=Z.nextSibling},c.prototype._parseText=function(s,a){var l=new he.Z({style:{text:s.textContent},silent:!0,x:this._textX||0,y:this._textY||0});Io(a,l),po(s,l,this._defsUsePending,!1,!1),function jw(c,s){var a=s.__selfStyle;if(a){var l=a.textBaseline,u=l;l&&"auto"!==l&&"baseline"!==l?"before-edge"===l||"text-before-edge"===l?u="top":"after-edge"===l||"text-after-edge"===l?u="bottom":("central"===l||"mathematical"===l)&&(u="middle"):u="alphabetic",c.style.textBaseline=u}var h=s.__inheritedStyle;if(h){var p=h.textAlign,v=p;p&&("middle"===p&&(v="center"),c.style.textAlign=v)}}(l,a);var u=l.style,h=u.fontSize;h&&h<9&&(u.fontSize=9,l.scaleX*=h/9,l.scaleY*=h/9);var p=(u.fontSize||u.fontFamily)&&[u.fontStyle,u.fontWeight,(u.fontSize||12)+"px",u.fontFamily||"sans-serif"].join(" ");u.font=p;var v=l.getBoundingRect();return this._textX+=v.width,a.add(l),l},c.internalField=void(Fv={g:function(s,a){var l=new Rn.Z;return Io(a,l),po(s,l,this._defsUsePending,!1,!1),l},rect:function(s,a){var l=new Mi.Z;return Io(a,l),po(s,l,this._defsUsePending,!1,!1),l.setShape({x:parseFloat(s.getAttribute("x")||"0"),y:parseFloat(s.getAttribute("y")||"0"),width:parseFloat(s.getAttribute("width")||"0"),height:parseFloat(s.getAttribute("height")||"0")}),l.silent=!0,l},circle:function(s,a){var l=new Ch.Z;return Io(a,l),po(s,l,this._defsUsePending,!1,!1),l.setShape({cx:parseFloat(s.getAttribute("cx")||"0"),cy:parseFloat(s.getAttribute("cy")||"0"),r:parseFloat(s.getAttribute("r")||"0")}),l.silent=!0,l},line:function(s,a){var l=new Ai.Z;return Io(a,l),po(s,l,this._defsUsePending,!1,!1),l.setShape({x1:parseFloat(s.getAttribute("x1")||"0"),y1:parseFloat(s.getAttribute("y1")||"0"),x2:parseFloat(s.getAttribute("x2")||"0"),y2:parseFloat(s.getAttribute("y2")||"0")}),l.silent=!0,l},ellipse:function(s,a){var l=new jP.Z;return Io(a,l),po(s,l,this._defsUsePending,!1,!1),l.setShape({cx:parseFloat(s.getAttribute("cx")||"0"),cy:parseFloat(s.getAttribute("cy")||"0"),rx:parseFloat(s.getAttribute("rx")||"0"),ry:parseFloat(s.getAttribute("ry")||"0")}),l.silent=!0,l},polygon:function(s,a){var u,l=s.getAttribute("points");l&&(u=md(l));var h=new nl.Z({shape:{points:u||[]},silent:!0});return Io(a,h),po(s,h,this._defsUsePending,!1,!1),h},polyline:function(s,a){var u,l=s.getAttribute("points");l&&(u=md(l));var h=new Ls.Z({shape:{points:u||[]},silent:!0});return Io(a,h),po(s,h,this._defsUsePending,!1,!1),h},image:function(s,a){var l=new be.ZP;return Io(a,l),po(s,l,this._defsUsePending,!1,!1),l.setStyle({image:s.getAttribute("xlink:href")||s.getAttribute("href"),x:+s.getAttribute("x"),y:+s.getAttribute("y"),width:+s.getAttribute("width"),height:+s.getAttribute("height")}),l.silent=!0,l},text:function(s,a){var l=s.getAttribute("x")||"0",u=s.getAttribute("y")||"0",h=s.getAttribute("dx")||"0",p=s.getAttribute("dy")||"0";this._textX=parseFloat(l)+parseFloat(h),this._textY=parseFloat(u)+parseFloat(p);var v=new Rn.Z;return Io(a,v),po(s,v,this._defsUsePending,!1,!0),v},tspan:function(s,a){var l=s.getAttribute("x"),u=s.getAttribute("y");null!=l&&(this._textX=parseFloat(l)),null!=u&&(this._textY=parseFloat(u));var h=s.getAttribute("dx")||"0",p=s.getAttribute("dy")||"0",v=new Rn.Z;return Io(a,v),po(s,v,this._defsUsePending,!1,!0),this._textX+=parseFloat(h),this._textY+=parseFloat(p),v},path:function(s,a){var l=s.getAttribute("d")||"",u=(0,gd.iR)(l);return Io(a,u),po(s,u,this._defsUsePending,!1,!1),u.silent=!0,u}}),c}(),Ww={lineargradient:function(c){var s=parseInt(c.getAttribute("x1")||"0",10),a=parseInt(c.getAttribute("y1")||"0",10),l=parseInt(c.getAttribute("x2")||"10",10),u=parseInt(c.getAttribute("y2")||"0",10),h=new Hf.Z(s,a,l,u);return D0(c,h),Ds(c,h),h},radialgradient:function(c){var s=parseInt(c.getAttribute("cx")||"0",10),a=parseInt(c.getAttribute("cy")||"0",10),l=parseInt(c.getAttribute("r")||"0",10),u=new dp.Z(s,a,l);return D0(c,u),Ds(c,u),u}};function D0(c,s){"userSpaceOnUse"===c.getAttribute("gradientUnits")&&(s.global=!0)}function Ds(c,s){for(var a=c.firstChild;a;){if(1===a.nodeType&&"stop"===a.nodeName.toLocaleLowerCase()){var u,l=a.getAttribute("offset");u=l&&l.indexOf("%")>0?parseInt(l,10)/100:l?parseFloat(l):0;var h={};XP(a,h,h);var p=h.stopColor||a.getAttribute("stop-color")||"#000000";s.colorStops.push({offset:u,color:p})}a=a.nextSibling}}function Io(c,s){c&&c.__inheritedStyle&&(s.__inheritedStyle||(s.__inheritedStyle={}),(0,b.defaults)(s.__inheritedStyle,c.__inheritedStyle))}function md(c){for(var s=on(c),a=[],l=0;l<s.length;l+=2){var u=parseFloat(s[l]),h=parseFloat(s[l+1]);a.push([u,h])}return a}function po(c,s,a,l,u){var h=s,p=h.__inheritedStyle=h.__inheritedStyle||{},v={};1===c.nodeType&&(function KV(c,s){var a=c.getAttribute("transform");if(a){a=a.replace(/,/g," ");var l=[],u=null;a.replace($V,function(w,D,I){return l.push(D,I),""});for(var h=l.length-1;h>0;h-=2){var v=l[h-1],m=on(l[h]);switch(u=u||xi.create(),v){case"translate":xi.translate(u,u,[parseFloat(m[0]),parseFloat(m[1]||"0")]);break;case"scale":xi.scale(u,u,[parseFloat(m[0]),parseFloat(m[1]||m[0])]);break;case"rotate":xi.rotate(u,u,-parseFloat(m[0])*Zw);break;case"skewX":var y=Math.tan(parseFloat(m[0])*Zw);xi.mul(u,[1,0,y,1,0,0],u);break;case"skewY":var x=Math.tan(parseFloat(m[0])*Zw);xi.mul(u,[1,x,0,1,0,0],u);break;case"matrix":u[0]=parseFloat(m[0]),u[1]=parseFloat(m[1]),u[2]=parseFloat(m[2]),u[3]=parseFloat(m[3]),u[4]=parseFloat(m[4]),u[5]=parseFloat(m[5])}}s.setLocalTransform(u)}}(c,s),XP(c,p,v),l||function QV(c,s,a){for(var l=0;l<vd.length;l++)null!=(h=c.getAttribute(u=vd[l]))&&(s[hp[u]]=h);for(l=0;l<Gi.length;l++){var u,h;null!=(h=c.getAttribute(u=Gi[l]))&&(a[Bv[u]]=h)}}(c,p,v)),h.style=h.style||{},null!=p.fill&&(h.style.fill=_d(h,"fill",p.fill,a)),null!=p.stroke&&(h.style.stroke=_d(h,"stroke",p.stroke,a)),(0,b.each)(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(m){null!=p[m]&&(h.style[m]=parseFloat(p[m]))}),(0,b.each)(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(m){null!=p[m]&&(h.style[m]=p[m])}),u&&(h.__selfStyle=v),p.lineDash&&(h.style.lineDash=(0,b.map)(on(p.lineDash),function(m){return parseFloat(m)})),("hidden"===p.visibility||"collapse"===p.visibility)&&(h.invisible=!0),"none"===p.display&&(h.ignore=!0)}var M0=/^url\(\s*#(.*?)\)/;function _d(c,s,a,l){var u=a&&a.match(M0);if(!u)return"none"===a&&(a=null),a;var h=(0,b.trim)(u[1]);l.push([c,s,h])}var ZP=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function on(c){return c.match(ZP)||[]}var $V=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,Zw=Math.PI/180,YP=/([^\s:;]+)\s*:\s*([^:;]+)/g;function XP(c,s,a){var l=c.getAttribute("style");if(l){YP.lastIndex=0;for(var u;null!=(u=YP.exec(l));){var h=u[1],p=(0,b.hasOwn)(hp,h)?hp[h]:null;p&&(s[p]=u[2]);var v=(0,b.hasOwn)(Bv,h)?Bv[h]:null;v&&(a[v]=u[2])}}}function $P(c,s){var u=Math.min(s.width/c.width,s.height/c.height);return{scale:u,x:-(c.x+c.width/2)*u+(s.x+s.width/2),y:-(c.y+c.height/2)*u+(s.y+s.height/2)}}for(var KP=H(2224),qV=(0,b.createHashMap)(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),to=function(){function c(s,a){this.type="geoSVG",this._usedGraphicMap=(0,b.createHashMap)(),this._freedGraphics=[],this._mapName=s,this._parsedXML=Gw(a)}return c.prototype.load=function(){var s=this._firstGraphic;if(!s){s=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(s),this._boundingRect=this._firstGraphic.boundingRect.clone();var a=function pp(c){var s=[],a=(0,b.createHashMap)();return(0,b.each)(c,function(l){if(null==l.namedFrom){var u=new KP.Im(l.name,l.el);s.push(u),a.set(l.name,u)}}),{regions:s,regionsMap:a}}(s.named),u=a.regionsMap;this._regions=a.regions,this._regionsMap=u}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},c.prototype._buildGraphic=function(s){var a,l;try{a=s&&function fp(c,s){return(new S0).parse(c,s)}(s,{ignoreViewBox:!0,ignoreRootClip:!0})||{},(0,b.assert)(null!=(l=a.root))}catch(Z){throw new Error("Invalid svg format\n"+Z.message)}var u=new Rn.Z;u.add(l),u.isGeoSVGGraphicRoot=!0;var h=a.width,p=a.height,v=a.viewBoxRect,m=this._boundingRect;if(!m){var y=void 0,x=void 0,w=void 0,D=void 0;if(null!=h?(y=0,w=h):v&&(y=v.x,w=v.width),null!=p?(x=0,D=p):v&&(x=v.y,D=v.height),null==y||null==x){var I=l.getBoundingRect();null==y&&(y=I.x,w=I.width),null==x&&(x=I.y,D=I.height)}m=this._boundingRect=new yr.Z(y,x,w,D)}if(v){var L=$P(v,m);l.scaleX=l.scaleY=L.scale,l.x=L.x,l.y=L.y}u.setClipPath(new Mi.Z({shape:m.plain()}));var N=[];return(0,b.each)(a.named,function(Z){null!=qV.get(Z.svgNodeTagLower)&&(N.push(Z),function T0(c){c.silent=!1,c.isGroup&&c.traverse(function(s){s.silent=!1})}(Z.el))}),{root:u,boundingRect:m,named:N}},c.prototype.useGraphic=function(s){var a=this._usedGraphicMap,l=a.get(s);return l||(l=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),a.set(s,l),l)},c.prototype.freeGraphic=function(s){var a=this._usedGraphicMap,l=a.get(s);l&&(a.removeKey(s),this._freedGraphics.push(l))},c}(),JV=H(119),E0=[126,25],cs=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],Su=0;Su<cs.length;Su++)for(var jc=0;jc<cs[Su].length;jc++)cs[Su][jc][0]/=10.5,cs[Su][jc][1]/=-14,cs[Su][jc][0]+=E0[0],cs[Su][jc][1]+=E0[1];var Yw=H(776),QP=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],t5=function(){function c(s,a,l){this.type="geoJSON",this._parsedMap=(0,b.createHashMap)(),this._mapName=s,this._specialAreas=l,this._geoJSON=function ks(c){return(0,b.isString)(c)?typeof JSON<"u"&&JSON.parse?JSON.parse(c):new Function("return ("+c+");")():c}(a)}return c.prototype.load=function(s,a){var l=this._parsedMap.get(a=a||"name");if(!l){var u=this._parseToRegions(a);l=this._parsedMap.set(a,{regions:u,boundingRect:Xw(u)})}var h=(0,b.createHashMap)(),p=[];return(0,b.each)(l.regions,function(v){var m=v.name;s&&(0,b.hasOwn)(s,m)&&(v=v.cloneShallow(m=s[m])),p.push(v),h.set(m,v)}),{regions:p,boundingRect:l.boundingRect||new yr.Z(0,0,0,0),regionsMap:h}},c.prototype._parseToRegions=function(s){var u,a=this._mapName,l=this._geoJSON;try{u=l?(0,JV.Z)(l,s):[]}catch(h){throw new Error("Invalid geoJson format\n"+h.message)}return function gp(c,s){if("china"===c){for(var a=0;a<s.length;a++)if("\u5357\u6d77\u8bf8\u5c9b"===s[a].name)return;s.push(new KP.Ni("\u5357\u6d77\u8bf8\u5c9b",b.map(cs,function(l){return{type:"polygon",exterior:l}}),E0))}}(a,u),(0,b.each)(u,function(h){var p=h.name;(0,Yw.Z)(a,h),function qP(c,s){"china"===c&&"\u53f0\u6e7e"===s.name&&s.geometries.push({type:"polygon",exterior:QP[0]})}(a,h);var v=this._specialAreas&&this._specialAreas[p];v&&h.transformTo(v.left,v.top,v.width,v.height)},this),u},c.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},c}();function Xw(c){for(var s,a=0;a<c.length;a++){var l=c[a].getBoundingRect();(s=s||l.clone()).union(l)}return s}var yd=(0,b.createHashMap)();const Ts_getGeoResource=function(c){return yd.get(c)},Ts_load=function(c,s,a){var l=yd.get(c);if(l)return l.load(s,a)};var A0=H(8177),Du=H(9563),I0=["rect","circle","line","ellipse","polygon","polyline","path"],JP=b.createHashMap(I0),e2=b.createHashMap(I0.concat(["g"])),t2=b.createHashMap(I0.concat(["g"])),$w=(0,xn.Yf)();function Vv(c){var s=c.getItemStyle(),a=c.get("areaColor");return null!=a&&(s.fill=a),s}function zv(c){var s=c.style;s&&(s.stroke=s.stroke||s.fill,s.fill=null)}function n2(c,s,a,l){var u=l.getModel("itemStyle"),h=l.getModel(["emphasis","itemStyle"]),p=l.getModel(["blur","itemStyle"]),v=l.getModel(["select","itemStyle"]),m=Vv(u),y=Vv(h),x=Vv(v),w=Vv(p),D=c.data;if(D){var I=D.getItemVisual(a,"style"),L=D.getItemVisual(a,"decal");c.isVisualEncodedByVisualMap&&I.fill&&(m.fill=I.fill),L&&(m.decal=(0,A0.I)(L,c.api))}s.setStyle(m),s.style.strokeNoScale=!0,s.ensureState("emphasis").style=y,s.ensureState("select").style=x,s.ensureState("blur").style=w,(0,Wt.MA)(s)}function Dh(c,s,a,l,u,h,p){var v=c.data,m=c.isGeo,y=v&&isNaN(v.get(v.mapDimension("value"),h)),x=v&&v.getItemLayout(h);if(m||y||x&&x.showLabel){var w=m?a:h,D=void 0;(!v||h>=0)&&(D=u);var I=p?{normal:{align:"center",verticalAlign:"middle"}}:null;(0,qt.ni)(s,(0,qt.k3)(l),{labelFetcher:D,labelDataIndex:w,defaultText:a},I);var L=s.getTextContent();if(L&&($w(L).ignore=L.ignore,s.textConfig&&p)){var N=s.getBoundingRect().clone();s.textConfig.layoutRect=N,s.textConfig.position=[(p[0]-N.x)/N.width*100+"%",(p[1]-N.y)/N.height*100+"%"]}s.disableLabelAnimation=!0}else s.removeTextContent(),s.removeTextConfig(),s.disableLabelAnimation=null}function Uv(c,s,a,l,u,h){c.data?c.data.setItemGraphicEl(h,s):(0,Tr.A)(s).eventData={componentType:"geo",componentIndex:u.componentIndex,geoIndex:u.componentIndex,name:a,region:l&&l.option||{}}}function vp(c,s,a,l,u){c.data||_n.setTooltipConfig({el:s,componentModel:u,itemName:a,itemTooltipOption:l.get("tooltip")})}function Kw(c,s,a,l,u){s.highDownSilentOnTouch=!!u.get("selectedMode");var h=l.getModel("emphasis"),p=h.get("focus");return(0,Wt.k5)(s,p,h.get("blurScope"),h.get("disabled")),c.isGeo&&(0,Wt.th)(s,u,a),p}function Qw(c,s,a){var u,l=[];function h(){u=[]}function p(){u.length&&(l.push(u),u=[])}var v=s({polygonStart:h,polygonEnd:p,lineStart:h,lineEnd:p,point:function(m,y){isFinite(m)&&isFinite(y)&&u.push([m,y])},sphere:function(){}});return!a&&v.polygonStart(),b.each(c,function(m){v.lineStart();for(var y=0;y<m.length;y++)v.point(m[y][0],m[y][1]);v.lineEnd()}),!a&&v.polygonEnd(),l}const qw=function(){function c(s){var a=new Rn.Z;this.uid=(0,Zn.Kr)("ec_map_draw"),this._controller=new cp(s.getZr()),this._controllerHost={target:a},this.group=a,a.add(this._regionsGroup=new Rn.Z),a.add(this._svgGroup=new Rn.Z)}return c.prototype.draw=function(s,a,l,u,h){var p="geo"===s.mainType,v=s.getData&&s.getData();p&&a.eachComponent({mainType:"series",subType:"map"},function(se){!v&&se.getHostGeoModel()===s&&(v=se.getData())});var m=s.coordinateSystem,y=this._regionsGroup,x=this.group,w=m.getTransformInfo(),D=w.raw,I=w.roam;!y.childAt(0)||h?(x.x=I.x,x.y=I.y,x.scaleX=I.scaleX,x.scaleY=I.scaleY,x.dirty()):Sn.D(x,I,s);var N=v&&v.getVisual("visualMeta")&&v.getVisual("visualMeta").length>0,Z={api:l,geo:m,mapOrGeoModel:s,data:v,isVisualEncodedByVisualMap:N,isGeo:p,transformInfoRaw:D};"geoJSON"===m.resourceType?this._buildGeoJSON(Z):"geoSVG"===m.resourceType&&this._buildSVG(Z),this._updateController(s,a,l),this._updateMapSelectHandler(s,y,l,u)},c.prototype._buildGeoJSON=function(s){var a=this._regionsGroupByName=b.createHashMap(),l=b.createHashMap(),u=this._regionsGroup,h=s.transformInfoRaw,p=s.mapOrGeoModel,v=s.data,m=s.geo.projection,y=m&&m.stream;function x(I,L){return L&&(I=L(I)),I&&[I[0]*h.scaleX+h.x,I[1]*h.scaleY+h.y]}function w(I){for(var L=[],N=!y&&m&&m.project,Z=0;Z<I.length;++Z){var se=x(I[Z],N);se&&L.push(se)}return L}function D(I){return{shape:{points:w(I)}}}u.removeAll(),b.each(s.geo.regions,function(I){var L=I.name,N=a.get(L),Z=l.get(L)||{},se=Z.dataIdx,_e=Z.regionModel;N||(N=a.set(L,new Rn.Z),u.add(N),se=v?v.indexOfName(L):null,_e=s.isGeo?p.getRegionModel(L):v?v.getItemModel(se):null,l.set(L,{dataIdx:se,regionModel:_e}));var me=[],De=[];b.each(I.geometries,function(ke){if("polygon"===ke.type){var Ue=[ke.exterior].concat(ke.interiors||[]);y&&(Ue=Qw(Ue,y)),b.each(Ue,function(Ke){me.push(new nl.Z(D(Ke)))})}else{var Ye=ke.points;y&&(Ye=Qw(Ye,y,!0)),b.each(Ye,function(Ke){De.push(new Ls.Z(D(Ke)))})}});var Pe=x(I.getCenter(),m&&m.project);function Ie(ke,Ue){if(ke.length){var Ye=new ve.Z({culling:!0,segmentIgnoreThreshold:1,shape:{paths:ke}});N.add(Ye),n2(s,Ye,se,_e),Dh(s,Ye,L,_e,p,se,Pe),Ue&&(zv(Ye),b.each(Ye.states,zv))}}Ie(me),Ie(De,!0)}),a.each(function(I,L){var N=l.get(L),se=N.regionModel;Uv(s,I,L,se,p,N.dataIdx),vp(s,I,L,se,p),Kw(s,I,L,se,p)},this)},c.prototype._buildSVG=function(s){var a=s.geo.map,l=s.transformInfoRaw;this._svgGroup.x=l.x,this._svgGroup.y=l.y,this._svgGroup.scaleX=l.scaleX,this._svgGroup.scaleY=l.scaleY,this._svgResourceChanged(a)&&(this._freeSVG(),this._useSVG(a));var u=this._svgDispatcherMap=b.createHashMap(),h=!1;b.each(this._svgGraphicRecord.named,function(p){var v=p.name,m=s.mapOrGeoModel,y=s.data,x=p.svgNodeTagLower,w=p.el,D=y?y.indexOfName(v):null,I=m.getRegionModel(v);null!=JP.get(x)&&w instanceof Du.ZP&&n2(s,w,D,I),w instanceof Du.ZP&&(w.culling=!0),w.z2EmphasisLift=0,p.namedFrom||(null!=t2.get(x)&&Dh(s,w,v,I,m,D,null),Uv(s,w,v,I,m,D),vp(s,w,v,I,m),null==e2.get(x))||("self"===Kw(s,w,v,I,m)&&(h=!0),(u.get(v)||u.set(v,[])).push(w))},this),this._enableBlurEntireSVG(h,s)},c.prototype._enableBlurEntireSVG=function(s,a){if(s&&a.isGeo){var u=a.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle().opacity;this._svgGraphicRecord.root.traverse(function(h){if(!h.isGroup){(0,Wt.MA)(h);var p=h.ensureState("blur").style||{};null==p.opacity&&null!=u&&(p.opacity=u),h.ensureState("emphasis")}})}},c.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},c.prototype.findHighDownDispatchers=function(s,a){if(null==s)return[];var l=a.coordinateSystem;if("geoJSON"===l.resourceType){var u=this._regionsGroupByName;if(u){var h=u.get(s);return h?[h]:[]}}else if("geoSVG"===l.resourceType)return this._svgDispatcherMap&&this._svgDispatcherMap.get(s)||[]},c.prototype._svgResourceChanged=function(s){return this._svgMapName!==s},c.prototype._useSVG=function(s){var a=Ts_getGeoResource(s);if(a&&"geoSVG"===a.type){var l=a.useGraphic(this.uid);this._svgGroup.add(l.root),this._svgGraphicRecord=l,this._svgMapName=s}},c.prototype._freeSVG=function(){var s=this._svgMapName;if(null!=s){var a=Ts_getGeoResource(s);a&&"geoSVG"===a.type&&a.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},c.prototype._updateController=function(s,a,l){var u=s.coordinateSystem,h=this._controller,p=this._controllerHost;p.zoomLimit=s.get("scaleLimit"),p.zoom=u.getZoom(),h.enable(s.get("roam")||!1);var v=s.mainType;function m(){var y={type:"geoRoam",componentType:v};return y[v+"Id"]=s.id,y}h.off("pan").on("pan",function(y){this._mouseDownFlag=!1,kv(p,y.dx,y.dy),l.dispatchAction(b.extend(m(),{dx:y.dx,dy:y.dy,animation:{duration:0}}))},this),h.off("zoom").on("zoom",function(y){this._mouseDownFlag=!1,Nv(p,y.scale,y.originX,y.originY),l.dispatchAction(b.extend(m(),{zoom:y.scale,originX:y.originX,originY:y.originY,animation:{duration:0}}))},this),h.setPointerChecker(function(y,x,w){return u.containPoint([x,w])&&!up(y,l,s)})},c.prototype.resetForLabelLayout=function(){this.group.traverse(function(s){var a=s.getTextContent();a&&(a.ignore=$w(a).ignore)})},c.prototype._updateMapSelectHandler=function(s,a,l,u){var h=this;a.off("mousedown"),a.off("click"),s.get("selectedMode")&&(a.on("mousedown",function(){h._mouseDownFlag=!0}),a.on("click",function(p){!h._mouseDownFlag||(h._mouseDownFlag=!1)}))},c}(),mp=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u,h){if(!h||"mapToggleSelect"!==h.type||h.from!==this.uid){var p=this.group;if(p.removeAll(),!a.getHostGeoModel()){if(this._mapDraw&&h&&"geoRoam"===h.type&&this._mapDraw.resetForLabelLayout(),h&&"geoRoam"===h.type&&"series"===h.componentType&&h.seriesId===a.id)(v=this._mapDraw)&&p.add(v.group);else if(a.needsDrawMap){var v=this._mapDraw||new qw(u);p.add(v.group),v.draw(a,l,u,this,h),this._mapDraw=v}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;a.get("showLegendSymbol")&&l.getComponent("legend")&&this._renderSymbols(a,l,u)}}},s.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},s.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},s.prototype._renderSymbols=function(a,l,u){var h=a.originalData,p=this.group;h.each(h.mapDimension("value"),function(v,m){if(!isNaN(v)){var y=h.getItemLayout(m);if(y&&y.point){var x=y.point,w=y.offset,D=new Ch.Z({style:{fill:a.getData().getVisual("style").fill},shape:{cx:x[0]+9*w,cy:x[1],r:3},silent:!0,z2:8+(w?0:Wt.zr+1)});if(!w){var I=a.mainSeries.getData(),L=h.getName(m),N=I.indexOfName(L),Z=h.getItemModel(m),se=Z.getModel("label"),_e=I.getItemGraphicEl(N);(0,qt.ni)(D,(0,qt.k3)(Z),{labelFetcher:{getFormattedLabel:function(me,De){return a.getFormattedLabel(N,De)}},defaultText:L}),D.disableLabelAnimation=!0,se.get("position")||D.setTextConfig({position:"bottom"}),_e.onHoverStateChange=function(me){(0,Wt.Gl)(D,me)}}p.add(D)}}})},s.type="map",s}(ia.Z),r2=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.needsDrawMap=!1,a.seriesGroup=[],a.getTooltipPosition=function(l){if(null!=l){var u=this.getData().getName(l),h=this.coordinateSystem,p=h.getRegion(u);return p&&h.dataToPoint(p.getCenter())}},a}return(0,At.ZT)(s,c),s.prototype.getInitialData=function(a){for(var l=vt(this,{coordDimensions:["value"],encodeDefaulter:b.curry(Nt.Ss,this)}),u=b.createHashMap(),h=[],p=0,v=l.count();p<v;p++){var m=l.getName(p);u.set(m,!0)}var y=Ts_load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return b.each(y.regions,function(x){var w=x.name;u.get(w)||h.push(w)}),l.appendValues([],h),l},s.prototype.getHostGeoModel=function(){var a=this.option.geoIndex;return null!=a?this.ecModel.getComponent("geo",a):null},s.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},s.prototype.getRawValue=function(a){var l=this.getData();return l.get(l.mapDimension("value"),a)},s.prototype.getRegionModel=function(a){var l=this.getData();return l.getItemModel(l.indexOfName(a))},s.prototype.formatTooltip=function(a,l,u){for(var h=this.getData(),p=this.getRawValue(a),v=h.getName(a),m=this.seriesGroup,y=[],x=0;x<m.length;x++){var w=m[x].originalData.indexOfName(v),D=h.mapDimension("value");isNaN(m[x].originalData.get(D,w))||y.push(m[x].name)}return(0,da.TX)("section",{header:y.join(", "),noHeader:!y.length,blocks:[(0,da.TX)("nameValue",{name:v,value:p})]})},s.prototype.setZoom=function(a){this.option.zoom=a},s.prototype.setCenter=function(a){this.option.center=a},s.prototype.getLegendIcon=function(a){var l=a.icon||"roundRect",u=(0,si.th)(l,0,0,a.itemWidth,a.itemHeight,a.itemStyle.fill);return u.setStyle(a.itemStyle),u.style.stroke="none",l.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),u},s.type="series.map",s.dependencies=["geo"],s.layoutMode="box",s.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},s}(Xi.Z);function eS(c){var s={};c.eachSeriesByType("map",function(a){var l=a.getHostGeoModel(),u=l?"o"+l.id:"i"+a.getMapType();(s[u]=s[u]||[]).push(a)}),b.each(s,function(a,l){for(var u=function Lt(c,s){var a={};return b.each(c,function(l){l.each(l.mapDimension("value"),function(u,h){var p="ec-"+l.getName(h);a[p]=a[p]||[],isNaN(u)||a[p].push(u)})}),c[0].map(c[0].mapDimension("value"),function(l,u){for(var h="ec-"+c[0].getName(u),p=0,v=1/0,m=-1/0,y=a[h].length,x=0;x<y;x++)v=Math.min(v,a[h][x]),m=Math.max(m,a[h][x]),p+=a[h][x];return 0===y?NaN:"min"===s?v:"max"===s?m:"average"===s?p/y:p})}(b.map(a,function(p){return p.getData()}),a[0].get("mapValueCalculation")),h=0;h<a.length;h++)a[h].originalData=a[h].getData();for(h=0;h<a.length;h++)a[h].seriesGroup=a,a[h].needsDrawMap=0===h&&!a[h].getHostGeoModel(),a[h].setData(u.cloneShallow()),a[h].mainSeries=a[0]})}function oa(c){var s={};c.eachSeriesByType("map",function(a){var l=a.getMapType();if(!a.getHostGeoModel()&&!s[l]){var u={};b.each(a.seriesGroup,function(p){var v=p.coordinateSystem,m=p.originalData;p.get("showLegendSymbol")&&c.getComponent("legend")&&m.each(m.mapDimension("value"),function(y,x){var w=m.getName(x),D=v.getRegion(w);if(D&&!isNaN(y)){var I=u[w]||0,L=v.dataToPoint(D.getCenter());u[w]=I+1,m.setItemLayout(x,{point:L,offset:I})}})});var h=a.getData();h.each(function(p){var v=h.getName(p),m=h.getItemLayout(p)||{};m.showLabel=!u[v],h.setItemLayout(p,m)}),s[l]=!0}})}var Gv=Jn.applyTransform;function tS(c){var s=c.seriesModel;return s?s.coordinateSystem:null}const yp=function(c){function s(a){var l=c.call(this)||this;return l.type="view",l.dimensions=["x","y"],l._roamTransformable=new xe.ZP,l._rawTransformable=new xe.ZP,l.name=a,l}return(0,At.ZT)(s,c),s.prototype.setBoundingRect=function(a,l,u,h){return this._rect=new yr.Z(a,l,u,h),this._rect},s.prototype.getBoundingRect=function(){return this._rect},s.prototype.setViewRect=function(a,l,u,h){this._transformTo(a,l,u,h),this._viewRect=new yr.Z(a,l,u,h)},s.prototype._transformTo=function(a,l,u,h){var p=this.getBoundingRect(),v=this._rawTransformable;v.transform=p.calculateTransform(new yr.Z(a,l,u,h));var m=v.parent;v.parent=null,v.decomposeTransform(),v.parent=m,this._updateTransform()},s.prototype.setCenter=function(a,l){!a||(this._center=[(0,It.GM)(a[0],l.getWidth()),(0,It.GM)(a[1],l.getHeight())],this._updateCenterAndZoom())},s.prototype.setZoom=function(a){a=a||1;var l=this.zoomLimit;l&&(null!=l.max&&(a=Math.min(l.max,a)),null!=l.min&&(a=Math.max(l.min,a))),this._zoom=a,this._updateCenterAndZoom()},s.prototype.getDefaultCenter=function(){var a=this.getBoundingRect();return[a.x+a.width/2,a.y+a.height/2]},s.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},s.prototype.getZoom=function(){return this._zoom||1},s.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},s.prototype._updateCenterAndZoom=function(){var a=this._rawTransformable.getLocalTransform(),l=this._roamTransformable,u=this.getDefaultCenter(),h=this.getCenter(),p=this.getZoom();h=Jn.applyTransform([],h,a),u=Jn.applyTransform([],u,a),l.originX=h[0],l.originY=h[1],l.x=u[0]-h[0],l.y=u[1]-h[1],l.scaleX=l.scaleY=p,this._updateTransform()},s.prototype._updateTransform=function(){var a=this._roamTransformable,l=this._rawTransformable;l.parent=a,a.updateTransform(),l.updateTransform(),xi.copy(this.transform||(this.transform=[]),l.transform||xi.create()),this._rawTransform=l.getLocalTransform(),this.invTransform=this.invTransform||[],xi.invert(this.invTransform,this.transform),this.decomposeTransform()},s.prototype.getTransformInfo=function(){var a=this._rawTransformable,l=this._roamTransformable,u=new xe.ZP;return u.transform=l.transform,u.decomposeTransform(),{roam:{x:u.x,y:u.y,scaleX:u.scaleX,scaleY:u.scaleY},raw:{x:a.x,y:a.y,scaleX:a.scaleX,scaleY:a.scaleY}}},s.prototype.getViewRect=function(){return this._viewRect},s.prototype.getViewRectAfterRoam=function(){var a=this.getBoundingRect().clone();return a.applyTransform(this.transform),a},s.prototype.dataToPoint=function(a,l,u){var h=l?this._rawTransform:this.transform;return u=u||[],h?Gv(u,a,h):Jn.copy(u,a)},s.prototype.pointToData=function(a){var l=this.invTransform;return l?Gv([],a,l):[a[0],a[1]]},s.prototype.convertToPixel=function(a,l,u){var h=tS(l);return h===this?h.dataToPoint(u):null},s.prototype.convertFromPixel=function(a,l,u){var h=tS(l);return h===this?h.pointToData(u):null},s.prototype.containPoint=function(a){return this.getViewRectAfterRoam().contain(a[0],a[1])},s.dimensions=["x","y"],s}(xe.ZP);var a2={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},bp=["lng","lat"],il=function(c){function s(a,l,u){var h=c.call(this,a)||this;h.dimensions=bp,h.type="geo",h._nameCoordMap=b.createHashMap(),h.map=l;var D,p=u.projection,v=Ts_load(l,u.nameMap,u.nameProperty),m=Ts_getGeoResource(l),x=(h.resourceType=m?m.type:null,h.regions=v.regions),w=a2[m.type];if(h._regionsMap=v.regionsMap,h.regions=v.regions,h.projection=p,p)for(var I=0;I<x.length;I++){var L=x[I].getBoundingRect(p);(D=D||L.clone()).union(L)}else D=v.boundingRect;return h.setBoundingRect(D.x,D.y,D.width,D.height),h.aspectScale=p?1:b.retrieve2(u.aspectScale,w.aspectScale),h._invertLongitute=!p&&w.invertLongitute,h}return(0,At.ZT)(s,c),s.prototype._transformTo=function(a,l,u,h){var p=this.getBoundingRect(),v=this._invertLongitute;p=p.clone(),v&&(p.y=-p.y-p.height);var m=this._rawTransformable;m.transform=p.calculateTransform(new yr.Z(a,l,u,h));var y=m.parent;m.parent=null,m.decomposeTransform(),m.parent=y,v&&(m.scaleY=-m.scaleY),this._updateTransform()},s.prototype.getRegion=function(a){return this._regionsMap.get(a)},s.prototype.getRegionByCoord=function(a){for(var l=this.regions,u=0;u<l.length;u++){var h=l[u];if("geoJSON"===h.type&&h.contain(a))return l[u]}},s.prototype.addGeoCoord=function(a,l){this._nameCoordMap.set(a,l)},s.prototype.getGeoCoord=function(a){var l=this._regionsMap.get(a);return this._nameCoordMap.get(a)||l&&l.getCenter()},s.prototype.dataToPoint=function(a,l,u){if(b.isString(a)&&(a=this.getGeoCoord(a)),a){var h=this.projection;return h&&(a=h.project(a)),a&&this.projectedToPoint(a,l,u)}},s.prototype.pointToData=function(a){var l=this.projection;return l&&(a=l.unproject(a)),a&&this.pointToProjected(a)},s.prototype.pointToProjected=function(a){return c.prototype.pointToData.call(this,a)},s.prototype.projectedToPoint=function(a,l,u){return c.prototype.dataToPoint.call(this,a,l,u)},s.prototype.convertToPixel=function(a,l,u){var h=P0(l);return h===this?h.dataToPoint(u):null},s.prototype.convertFromPixel=function(a,l,u){var h=P0(l);return h===this?h.pointToData(u):null},s}(yp);function P0(c){var s=c.geoModel,a=c.seriesModel;return s?s.coordinateSystem:a?a.coordinateSystem||(a.getReferringComponents("geo",xn.C6).models[0]||{}).coordinateSystem:null}b.mixin(il,yp);const uc=il;function nS(c,s){var a=c.get("boundingCoords");if(null!=a){var l=a[0],u=a[1];if(isFinite(l[0])&&isFinite(l[1])&&isFinite(u[0])&&isFinite(u[1])){var h=this.projection;if(h){var p=l[0],v=l[1],m=u[0],y=u[1];l=[1/0,1/0],u=[-1/0,-1/0];var x=function(Ie,ke,Ue,Ye){for(var Ke=Ue-Ie,Je=Ye-ke,ut=0;ut<=100;ut++){var pt=ut/100,yt=h.project([Ie+Ke*pt,ke+Je*pt]);Jn.min(l,l,yt),Jn.max(u,u,yt)}};x(p,v,m,v),x(m,v,m,y),x(m,y,p,y),x(p,y,m,v)}this.setBoundingRect(l[0],l[1],u[0]-l[0],u[1]-l[1])}}var _e,me,De,w=this.getBoundingRect(),D=c.get("layoutCenter"),I=c.get("layoutSize"),L=s.getWidth(),N=s.getHeight(),Z=w.width/w.height*this.aspectScale,se=!1;if(D&&I&&(_e=[It.GM(D[0],L),It.GM(D[1],N)],me=It.GM(I,Math.min(L,N)),!isNaN(_e[0])&&!isNaN(_e[1])&&!isNaN(me)&&(se=!0)),se)De={},Z>1?(De.width=me,De.height=me/Z):(De.height=me,De.width=me*Z),De.y=_e[1]-De.height/2,De.x=_e[0]-De.width/2;else{var Pe=c.getBoxLayoutParams();Pe.aspect=Z,De=Br.ME(Pe,{width:L,height:N})}this.setViewRect(De.x,De.y,De.width,De.height),this.setCenter(c.get("center"),s),this.setZoom(c.get("zoom"))}const R0=new(function(){function c(){this.dimensions=bp}return c.prototype.create=function(s,a){var l=[];function u(p){return{nameProperty:p.get("nameProperty"),aspectScale:p.get("aspectScale"),projection:p.get("projection")}}s.eachComponent("geo",function(p,v){var m=p.get("map"),y=new uc(m+v,m,b.extend({nameMap:p.get("nameMap")},u(p)));y.zoomLimit=p.get("scaleLimit"),l.push(y),p.coordinateSystem=y,y.model=p,y.resize=nS,y.resize(p,a)}),s.eachSeries(function(p){if("geo"===p.get("coordinateSystem")){var m=p.get("geoIndex")||0;p.coordinateSystem=l[m]}});var h={};return s.eachSeriesByType("map",function(p){if(!p.getHostGeoModel()){var v=p.getMapType();h[v]=h[v]||[],h[v].push(p)}}),b.each(h,function(p,v){var m=b.map(p,function(x){return x.get("nameMap")}),y=new uc(v,v,b.extend({nameMap:b.mergeAll(m)},u(p[0])));y.zoomLimit=b.retrieve.apply(null,b.map(p,function(x){return x.get("scaleLimit")})),l.push(y),y.resize=nS,y.resize(p[0],a),b.each(p,function(x){x.coordinateSystem=y,function rS(c,s){b.each(s.get("geoCoord"),function(a,l){c.addGeoCoord(l,a)})}(y,x)})}),l},c.prototype.getFilledRegions=function(s,a,l,u){for(var h=(s||[]).slice(),p=b.createHashMap(),v=0;v<h.length;v++)p.set(h[v].name,h[v]);var m=Ts_load(a,l,u);return b.each(m.regions,function(y){var x=y.name;!p.get(x)&&h.push({name:x})}),h},c}()),s2=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.init=function(a,l,u){var h=Ts_getGeoResource(a.map);if(h&&"geoJSON"===h.type){var p=a.itemStyle=a.itemStyle||{};"color"in p||(p.color="#eee")}this.mergeDefaultAndTheme(a,u),xn.Cc(a,"label",["show"])},s.prototype.optionUpdated=function(){var a=this,l=this.option;l.regions=R0.getFilledRegions(l.regions,l.map,l.nameMap,l.nameProperty);var u={};this._optionModelMap=b.reduce(l.regions||[],function(h,p){var v=p.name;return v&&(h.set(v,new ka.Z(p,a,a.ecModel)),p.selected&&(u[v]=!0)),h},b.createHashMap()),l.selectedMap||(l.selectedMap=u)},s.prototype.getRegionModel=function(a){return this._optionModelMap.get(a)||new ka.Z(null,this,this.ecModel)},s.prototype.getFormattedLabel=function(a,l){var h=this.getRegionModel(a).get("normal"===l?["label","formatter"]:["emphasis","label","formatter"]),p={name:a};return b.isFunction(h)?(p.status=l,h(p)):b.isString(h)?h.replace("{a}",a??""):void 0},s.prototype.setZoom=function(a){this.option.zoom=a},s.prototype.setCenter=function(a){this.option.center=a},s.prototype.select=function(a){var l=this.option,u=l.selectedMode;u&&("multiple"!==u&&(l.selectedMap=null),(l.selectedMap||(l.selectedMap={}))[a]=!0)},s.prototype.unSelect=function(a){var l=this.option.selectedMap;l&&(l[a]=!1)},s.prototype.toggleSelected=function(a){this[this.isSelected(a)?"unSelect":"select"](a)},s.prototype.isSelected=function(a){var l=this.option.selectedMap;return!(!l||!l[a])},s.type="geo",s.layoutMode="box",s.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},s}(ma.Z);function bd(c,s){return c.pointToProjected?c.pointToProjected(s):c.pointToData(s)}function xd(c,s,a,l){var u=c.getZoom(),h=c.getCenter(),p=s.zoom,v=c.projectedToPoint?c.projectedToPoint(h):c.dataToPoint(h);if(null!=s.dx&&null!=s.dy&&(v[0]-=s.dx,v[1]-=s.dy,c.setCenter(bd(c,v),l)),null!=p){if(a){var m=a.min||0;p=Math.max(Math.min(u*p,a.max||1/0),m)/u}c.scaleX*=p,c.scaleY*=p;var w=(s.originY-c.y)*(p-1);c.x-=(s.originX-c.x)*(p-1),c.y-=w,c.updateTransform(),c.setCenter(bd(c,v),l),c.setZoom(p*u)}return{center:c.getCenter(),zoom:c.getZoom()}}var L0=H(4649);const iS=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.focusBlurEnabled=!0,a}return(0,At.ZT)(s,c),s.prototype.init=function(a,l){this._api=l},s.prototype.render=function(a,l,u,h){if(this._model=a,!a.get("show"))return this._mapDraw&&this._mapDraw.remove(),void(this._mapDraw=null);this._mapDraw||(this._mapDraw=new qw(u));var p=this._mapDraw;p.draw(a,l,u,this,h),p.group.on("click",this._handleRegionClick,this),p.group.silent=a.get("silent"),this.group.add(p.group),this.updateSelectStatus(a,l,u)},s.prototype._handleRegionClick=function(a){var l;(0,L0.o)(a.target,function(u){return null!=(l=(0,Tr.A)(u).eventData)},!0),l&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:l.name})},s.prototype.updateSelectStatus=function(a,l,u){var h=this;this._mapDraw.group.traverse(function(p){var v=(0,Tr.A)(p).eventData;if(v)return h._model.isSelected(v.name)?u.enterSelect(p):u.leaveSelect(p),!0})},s.prototype.findHighDownDispatchers=function(a){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(a,this._model)},s.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},s.type="geo",s}(va.Z);function l2(c,s,a){!function(c,s,a){if(s.svg){var l=new to(c,s.svg);yd.set(c,l)}else{var u=s.geoJson||s.geoJSON;u&&!s.features?a=s.specialAreas:u=s,l=new t5(c,u,a),yd.set(c,l)}}(c,s,a)}function c2(c){function s(a,l){l.update="geo:updateSelectStatus",c.registerAction(l,function(u,h){var p={},v=[];return h.eachComponent({mainType:"geo",query:u},function(m){m[a](u.name),(0,b.each)(m.coordinateSystem.regions,function(w){p[w.name]=m.isSelected(w.name)||!1});var x=[];(0,b.each)(p,function(w,D){p[D]&&x.push(D)}),v.push({geoIndex:m.componentIndex,name:x})}),{selected:p,allSelected:v,name:u.name}})}c.registerCoordinateSystem("geo",R0),c.registerComponentModel(s2),c.registerComponentView(iS),c.registerImpl("registerMap",l2),c.registerImpl("getMap",function(a){return function(c){var s=yd.get(c);return s&&"geoJSON"===s.type&&s.getMapForUser()}(a)}),s("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),s("select",{type:"geoSelect",event:"geoselected"}),s("unSelect",{type:"geoUnSelect",event:"geounselected"}),c.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(a,l,u){var h=a.componentType||"series";l.eachComponent({mainType:h,query:a},function(p){var v=p.coordinateSystem;if("geo"===v.type){var m=xd(v,a,p.get("scaleLimit"),u);p.setCenter&&p.setCenter(m.center),p.setZoom&&p.setZoom(m.zoom),"series"===h&&(0,b.each)(p.seriesGroup,function(y){y.setCenter(m.center),y.setZoom(m.zoom)})}})})}var aS=H(6146);function jv(c,s){var a=c.isExpand?c.children:[],l=c.parentNode.children,u=c.hierNode.i?l[c.hierNode.i-1]:null;if(a.length){!function lS(c){for(var s=c.children,a=s.length,l=0,u=0;--a>=0;){var h=s[a];h.hierNode.prelim+=l,h.hierNode.modifier+=l,l+=h.hierNode.shift+(u+=h.hierNode.change)}}(c);var h=(a[0].hierNode.prelim+a[a.length-1].hierNode.prelim)/2;u?(c.hierNode.prelim=u.hierNode.prelim+s(c,u),c.hierNode.modifier=c.hierNode.prelim-h):c.hierNode.prelim=h}else u&&(c.hierNode.prelim=u.hierNode.prelim+s(c,u));c.parentNode.hierNode.defaultAncestor=function a5(c,s,a,l){if(s){for(var u=c,h=c,p=h.parentNode.children[0],v=s,m=u.hierNode.modifier,y=h.hierNode.modifier,x=p.hierNode.modifier,w=v.hierNode.modifier;v=Cp(v),h=O0(h),v&&h;){u=Cp(u),p=O0(p),u.hierNode.ancestor=c;var D=v.hierNode.prelim+w-h.hierNode.prelim-y+l(v,h);D>0&&(Zv(cS(v,c,a),c,D),y+=D,m+=D),w+=v.hierNode.modifier,y+=h.hierNode.modifier,m+=u.hierNode.modifier,x+=p.hierNode.modifier}v&&!Cp(u)&&(u.hierNode.thread=v,u.hierNode.modifier+=w-m),h&&!O0(p)&&(p.hierNode.thread=h,p.hierNode.modifier+=y-x,a=c)}return a}(c,u,c.parentNode.hierNode.defaultAncestor||l[0],s)}function oS(c){c.setLayout({x:c.hierNode.prelim+c.parentNode.hierNode.modifier},!0),c.hierNode.modifier+=c.parentNode.hierNode.modifier}function sS(c){return arguments.length?c:k0}function Th(c,s){return c-=Math.PI/2,{x:s*Math.cos(c),y:s*Math.sin(c)}}function Cp(c){var s=c.children;return s.length&&c.isExpand?s[s.length-1]:c.hierNode.thread}function O0(c){var s=c.children;return s.length&&c.isExpand?s[0]:c.hierNode.thread}function cS(c,s,a){return c.hierNode.ancestor.parentNode===s.parentNode?c.hierNode.ancestor:a}function Zv(c,s,a){var l=a/(s.hierNode.i-c.hierNode.i);s.hierNode.change-=l,s.hierNode.shift+=a,s.hierNode.modifier+=a,s.hierNode.prelim+=a,c.hierNode.change+=l}function k0(c,s){return c.parentNode===s.parentNode?1:2}var Zc=H(9110),h2=function c(){this.parentPoint=[],this.childPoints=[]},f2=function(c){function s(a){return c.call(this,a)||this}return(0,At.ZT)(s,c),s.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},s.prototype.getDefaultShape=function(){return new h2},s.prototype.buildPath=function(a,l){var u=l.childPoints,h=u.length,p=l.parentPoint,v=u[0],m=u[h-1];if(1===h)return a.moveTo(p[0],p[1]),void a.lineTo(v[0],v[1]);var y=l.orient,x="TB"===y||"BT"===y?0:1,w=1-x,D=(0,It.GM)(l.forkPosition,1),I=[];I[x]=p[x],I[w]=p[w]+(m[w]-p[w])*D,a.moveTo(p[0],p[1]),a.lineTo(I[0],I[1]),a.moveTo(v[0],v[1]),I[x]=v[x],a.lineTo(I[0],I[1]),I[x]=m[x],a.lineTo(I[0],I[1]),a.lineTo(m[0],m[1]);for(var L=1;L<h-1;L++){var N=u[L];a.moveTo(N[0],N[1]),I[x]=N[x],a.lineTo(I[0],I[1])}},s}(ge.ZP);function wp(c,s){var a=c.getItemLayout(s);return a&&!isNaN(a.x)&&!isNaN(a.y)}function Yv(c,s,a,l,u){var h=!a,p=c.tree.getNodeByDataIndex(s),v=p.getModel(),m=p.getVisual("style").fill,y=!1===p.isExpand&&0!==p.children.length?m:"#fff",x=c.tree.root,w=p.parentNode===x?p:p.parentNode||p,D=c.getItemGraphicEl(w.dataIndex),I=w.getLayout(),L=D?{x:D.__oldX,y:D.__oldY,rawX:D.__radialOldRawX,rawY:D.__radialOldRawY}:I,N=p.getLayout();h?((a=new Jt(c,s,null,{symbolInnerColor:y,useNameLabel:!0})).x=L.x,a.y=L.y):a.updateData(c,s,null,{symbolInnerColor:y,useNameLabel:!0}),a.__radialOldRawX=a.__radialRawX,a.__radialOldRawY=a.__radialRawY,a.__radialRawX=N.rawX,a.__radialRawY=N.rawY,l.add(a),c.setItemGraphicEl(s,a),a.__oldX=a.x,a.__oldY=a.y,Sn.D(a,{x:N.x,y:N.y},u);var Z=a.getSymbolPath();if("radial"===u.get("layout")){var se=x.children[0],_e=se.getLayout(),me=se.children.length,De=void 0,Pe=void 0;if(N.x===_e.x&&!0===p.isExpand&&se.children.length){var Ie={x:(se.children[0].getLayout().x+se.children[me-1].getLayout().x)/2,y:(se.children[0].getLayout().y+se.children[me-1].getLayout().y)/2};(De=Math.atan2(Ie.y-_e.y,Ie.x-_e.x))<0&&(De=2*Math.PI+De),(Pe=Ie.x<_e.x)&&(De-=Math.PI)}else(De=Math.atan2(N.y-_e.y,N.x-_e.x))<0&&(De=2*Math.PI+De),0===p.children.length||0!==p.children.length&&!1===p.isExpand?(Pe=N.x<_e.x)&&(De-=Math.PI):(Pe=N.x>_e.x)||(De-=Math.PI);var ke=Pe?"left":"right",Ue=v.getModel("label"),Ye=Ue.get("rotate"),Ke=Ye*(Math.PI/180),Je=Z.getTextContent();Je&&(Z.setTextConfig({position:Ue.get("position")||ke,rotation:null==Ye?-De:Ke,origin:"center"}),Je.setStyle("verticalAlign","middle"))}var ut=v.get(["emphasis","focus"]),pt="relative"===ut?b.concatArray(p.getAncestorsIndices(),p.getDescendantIndices()):"ancestor"===ut?p.getAncestorsIndices():"descendant"===ut?p.getDescendantIndices():null;pt&&((0,Tr.A)(a).focus=pt),function uS(c,s,a,l,u,h,p,v){var m=s.getModel(),y=c.get("edgeShape"),x=c.get("layout"),w=c.getOrient(),D=c.get(["lineStyle","curveness"]),I=c.get("edgeForkPosition"),L=m.getModel("lineStyle").getLineStyle(),N=l.__edge;if("curve"===y)s.parentNode&&s.parentNode!==a&&(N||(N=l.__edge=new aS.Z({shape:B0(x,w,D,u,u)})),Sn.D(N,{shape:B0(x,w,D,h,p)},c));else if("polyline"===y&&"orthogonal"===x&&s!==a&&s.children&&0!==s.children.length&&!0===s.isExpand){for(var Z=s.children,se=[],_e=0;_e<Z.length;_e++){var me=Z[_e].getLayout();se.push([me.x,me.y])}N||(N=l.__edge=new f2({shape:{parentPoint:[p.x,p.y],childPoints:[[p.x,p.y]],orient:w,forkPosition:I}})),Sn.D(N,{shape:{parentPoint:[p.x,p.y],childPoints:se}},c)}N&&("polyline"!==y||s.isExpand)&&(N.useStyle(b.defaults({strokeNoScale:!0,fill:null},L)),(0,Wt.WO)(N,m,"lineStyle"),(0,Wt.MA)(N),v.add(N))}(u,p,x,a,L,I,N,l),a.__edge&&(a.onHoverStateChange=function(yt){if("blur"!==yt){var wt=p.parentNode&&c.getItemGraphicEl(p.parentNode.dataIndex);wt&&wt.hoverState===Wt.CX||(0,Wt.Gl)(a.__edge,yt)}})}function N0(c,s,a,l,u){var p=F0(s.tree.root,c),v=p.source,m=p.sourceLayout,y=s.getItemGraphicEl(c.dataIndex);if(y){var x=s.getItemGraphicEl(v.dataIndex),D=y.__edge||(!1===v.isExpand||1===v.children.length?x.__edge:void 0),I=l.get("edgeShape"),L=l.get("layout"),N=l.get("orient"),Z=l.get(["lineStyle","curveness"]);D&&("curve"===I?Sn.bX(D,{shape:B0(L,N,Z,m,m),style:{opacity:0}},l,{cb:function(){a.remove(D)},removeOpt:u}):"polyline"===I&&"orthogonal"===l.get("layout")&&Sn.bX(D,{shape:{parentPoint:[m.x,m.y],childPoints:[[m.x,m.y]]},style:{opacity:0}},l,{cb:function(){a.remove(D)},removeOpt:u}))}}function F0(c,s){for(var l,a=s.parentNode===c?s:s.parentNode||s;null==(l=a.getLayout());)a=a.parentNode===c?a:a.parentNode||a;return{source:a,sourceLayout:l}}function Mu(c,s,a,l,u){var h=c.tree.getNodeByDataIndex(s),v=F0(c.tree.root,h).sourceLayout,m={duration:u.get("animationDurationUpdate"),easing:u.get("animationEasingUpdate")};Sn.bX(a,{x:v.x+1,y:v.y+1},u,{cb:function(){l.remove(a),c.setItemGraphicEl(s,null)},removeOpt:m}),a.fadeOut(null,c.hostModel,{fadeLabel:!0,animation:m}),h.children.forEach(function(y){N0(y,c,l,u,m)}),N0(h,c,l,u,m)}function B0(c,s,a,l,u){var h,p,v,m,y,x,w,D;if("radial"===c){x=u.rawX,D=u.rawY;var I=Th(y=l.rawX,w=l.rawY),L=Th(y,w+(D-w)*a),N=Th(x,D+(w-D)*a),Z=Th(x,D);return{x1:I.x||0,y1:I.y||0,x2:Z.x||0,y2:Z.y||0,cpx1:L.x||0,cpy1:L.y||0,cpx2:N.x||0,cpy2:N.y||0}}return y=l.x,w=l.y,x=u.x,D=u.y,("LR"===s||"RL"===s)&&(h=y+(x-y)*a,p=w,v=x+(y-x)*a,m=D),("TB"===s||"BT"===s)&&(h=y,p=w+(D-w)*a,v=x,m=D+(w-D)*a),{x1:y,y1:w,x2:x,y2:D,cpx1:h,cpy1:p,cpx2:v,cpy2:m}}const p2=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a._mainGroup=new Rn.Z,a}return(0,At.ZT)(s,c),s.prototype.init=function(a,l){this._controller=new cp(l.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},s.prototype.render=function(a,l,u){var h=a.getData(),p=a.layoutInfo,v=this._mainGroup;"radial"===a.get("layout")?(v.x=p.x+p.width/2,v.y=p.y+p.height/2):(v.x=p.x,v.y=p.y),this._updateViewCoordSys(a,u),this._updateController(a,l,u);var y=this._data;h.diff(y).add(function(x){wp(h,x)&&Yv(h,x,null,v,a)}).update(function(x,w){var D=y.getItemGraphicEl(w);wp(h,x)?Yv(h,x,D,v,a):D&&Mu(y,w,D,v,a)}).remove(function(x){var w=y.getItemGraphicEl(x);w&&Mu(y,x,w,v,a)}).execute(),this._nodeScaleRatio=a.get("nodeScaleRatio"),this._updateNodeAndLinkScale(a),!0===a.get("expandAndCollapse")&&h.eachItemGraphicEl(function(x,w){x.off("click").on("click",function(){u.dispatchAction({type:"treeExpandAndCollapse",seriesId:a.id,dataIndex:w})})}),this._data=h},s.prototype._updateViewCoordSys=function(a,l){var u=a.getData(),h=[];u.each(function(w){var D=u.getItemLayout(w);D&&!isNaN(D.x)&&!isNaN(D.y)&&h.push([+D.x,+D.y])});var p=[],v=[];Zc.zk(h,p,v);var m=this._min,y=this._max;v[0]-p[0]==0&&(p[0]=m?m[0]:p[0]-1,v[0]=y?y[0]:v[0]+1),v[1]-p[1]==0&&(p[1]=m?m[1]:p[1]-1,v[1]=y?y[1]:v[1]+1);var x=a.coordinateSystem=new yp;x.zoomLimit=a.get("scaleLimit"),x.setBoundingRect(p[0],p[1],v[0]-p[0],v[1]-p[1]),x.setCenter(a.get("center"),l),x.setZoom(a.get("zoom")),this.group.attr({x:x.x,y:x.y,scaleX:x.scaleX,scaleY:x.scaleY}),this._min=p,this._max=v},s.prototype._updateController=function(a,l,u){var h=this,p=this._controller,v=this._controllerHost,m=this.group;p.setPointerChecker(function(y,x,w){var D=m.getBoundingRect();return D.applyTransform(m.transform),D.contain(x,w)&&!up(y,u,a)}),p.enable(a.get("roam")),v.zoomLimit=a.get("scaleLimit"),v.zoom=a.coordinateSystem.getZoom(),p.off("pan").off("zoom").on("pan",function(y){kv(v,y.dx,y.dy),u.dispatchAction({seriesId:a.id,type:"treeRoam",dx:y.dx,dy:y.dy})}).on("zoom",function(y){Nv(v,y.scale,y.originX,y.originY),u.dispatchAction({seriesId:a.id,type:"treeRoam",zoom:y.scale,originX:y.originX,originY:y.originY}),h._updateNodeAndLinkScale(a),u.updateLabelLayout()})},s.prototype._updateNodeAndLinkScale=function(a){var l=a.getData(),u=this._getNodeGlobalScale(a);l.eachItemGraphicEl(function(h,p){h.setSymbolScale(u)})},s.prototype._getNodeGlobalScale=function(a){var l=a.coordinateSystem;if("view"!==l.type)return 1;var u=this._nodeScaleRatio,h=l.scaleX||1;return((l.getZoom()-1)*u+1)/h},s.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},s.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},s.type="tree",s}(ia.Z);var dS=H(4844),g2=function(){function c(s,a){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=s||"",this.hostTree=a}return c.prototype.isRemoved=function(){return this.dataIndex<0},c.prototype.eachNode=function(s,a,l){b.isFunction(s)&&(l=a,a=s,s=null),b.isString(s=s||{})&&(s={order:s});var p,u=s.order||"preorder",h=this[s.attr||"children"];"preorder"===u&&(p=a.call(l,this));for(var v=0;!p&&v<h.length;v++)h[v].eachNode(s,a,l);"postorder"===u&&a.call(l,this)},c.prototype.updateDepthAndHeight=function(s){var a=0;this.depth=s;for(var l=0;l<this.children.length;l++){var u=this.children[l];u.updateDepthAndHeight(s+1),u.height>a&&(a=u.height)}this.height=a+1},c.prototype.getNodeById=function(s){if(this.getId()===s)return this;for(var a=0,l=this.children,u=l.length;a<u;a++){var h=l[a].getNodeById(s);if(h)return h}},c.prototype.contains=function(s){if(s===this)return!0;for(var a=0,l=this.children,u=l.length;a<u;a++){var h=l[a].contains(s);if(h)return h}},c.prototype.getAncestors=function(s){for(var a=[],l=s?this:this.parentNode;l;)a.push(l),l=l.parentNode;return a.reverse(),a},c.prototype.getAncestorsIndices=function(){for(var s=[],a=this;a;)s.push(a.dataIndex),a=a.parentNode;return s.reverse(),s},c.prototype.getDescendantIndices=function(){var s=[];return this.eachNode(function(a){s.push(a.dataIndex)}),s},c.prototype.getValue=function(s){var a=this.hostTree.data;return a.getStore().get(a.getDimensionIndex(s||"value"),this.dataIndex)},c.prototype.setLayout=function(s,a){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,s,a)},c.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},c.prototype.getModel=function(s){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(s)},c.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},c.prototype.setVisual=function(s,a){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,s,a)},c.prototype.getVisual=function(s){return this.hostTree.data.getItemVisual(this.dataIndex,s)},c.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},c.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},c.prototype.getChildIndex=function(){if(this.parentNode){for(var s=this.parentNode.children,a=0;a<s.length;++a)if(s[a]===this)return a;return-1}return-1},c.prototype.isAncestorOf=function(s){for(var a=s.parentNode;a;){if(a===this)return!0;a=a.parentNode}return!1},c.prototype.isDescendantOf=function(s){return s!==this&&s.isAncestorOf(this)},c}();const al=function(){function c(s){this.type="tree",this._nodes=[],this.hostModel=s}return c.prototype.eachNode=function(s,a,l){this.root.eachNode(s,a,l)},c.prototype.getNodeByDataIndex=function(s){var a=this.data.getRawIndex(s);return this._nodes[a]},c.prototype.getNodeById=function(s){return this.root.getNodeById(s)},c.prototype.update=function(){for(var s=this.data,a=this._nodes,l=0,u=a.length;l<u;l++)a[l].dataIndex=-1;for(l=0,u=s.count();l<u;l++)a[s.getRawIndex(l)].dataIndex=l},c.prototype.clearLayouts=function(){this.data.clearItemLayouts()},c.createTree=function(s,a,l){var u=new c(a),h=[],p=1;!function v(x,w){var D=x.value;p=Math.max(p,b.isArray(D)?D.length:1),h.push(x);var I=new g2((0,xn.U5)(x.name,""),u);w?function Ns(c,s){c.parentNode!==s&&(s.children.push(c),c.parentNode=s)}(I,w):u.root=I,u._nodes.push(I);var L=x.children;if(L)for(var N=0;N<L.length;N++)v(L[N],I)}(s),u.root.updateDepthAndHeight(0);var m=(0,dt.Z)(h,{coordDimensions:["value"],dimensionsCount:p}).dimensions,y=new xt.Z(m,a);return y.initData(h),l&&l(y),(0,dS.Z)({mainData:y,struct:u,structAttr:"tree"}),u.update(),u},c}();function Sp(c,s,a){if(c&&b.indexOf(s,c.type)>=0){var l=a.getData().tree.root,u=c.targetNode;if(b.isString(u)&&(u=l.getNodeById(u)),u&&l.contains(u))return{node:u};var h=c.targetNodeId;if(null!=h&&(u=l.getNodeById(h)))return{node:u}}}function hS(c){for(var s=[];c;)(c=c.parentNode)&&s.push(c);return s.reverse()}function V0(c,s){var a=hS(c);return b.indexOf(a,s)>=0}function Xv(c,s){for(var a=[];c;){var l=c.dataIndex;a.push({name:c.name,dataIndex:l,value:s.getRawValue(l)}),c=c.parentNode}return a.reverse(),a}const _2=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.hasSymbolVisual=!0,a.ignoreStyleOnData=!0,a}return(0,At.ZT)(s,c),s.prototype.getInitialData=function(a){var l={name:a.name,children:a.data},h=new ka.Z(a.leaves||{},this,this.ecModel),p=al.createTree(l,this,function v(w){w.wrapMethod("getItemModel",function(D,I){var L=p.getNodeByDataIndex(I);return L&&L.children.length&&L.isExpand||(D.parentModel=h),D})}),m=0;p.eachNode("preorder",function(w){w.depth>m&&(m=w.depth)});var x=a.expandAndCollapse&&a.initialTreeDepth>=0?a.initialTreeDepth:m;return p.root.eachNode("preorder",function(w){var D=w.hostTree.data.getRawDataItem(w.dataIndex);w.isExpand=D&&null!=D.collapsed?!D.collapsed:w.depth<=x}),p.data},s.prototype.getOrient=function(){var a=this.get("orient");return"horizontal"===a?a="LR":"vertical"===a&&(a="TB"),a},s.prototype.setZoom=function(a){this.option.zoom=a},s.prototype.setCenter=function(a){this.option.center=a},s.prototype.formatTooltip=function(a,l,u){for(var h=this.getData().tree,p=h.root.children[0],v=h.getNodeByDataIndex(a),m=v.getValue(),y=v.name;v&&v!==p;)y=v.parentNode.name+"."+y,v=v.parentNode;return(0,da.TX)("nameValue",{name:y,value:m,noValue:isNaN(m)||null==m})},s.prototype.getDataParams=function(a){var l=c.prototype.getDataParams.apply(this,arguments),u=this.getData().tree.getNodeByDataIndex(a);return l.treeAncestors=Xv(u,this),l.collapsed=!u.isExpand,l},s.type="series.tree",s.layoutMode="box",s.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},s}(Xi.Z);function Dp(c,s){for(var l,a=[c];l=a.pop();)if(s(l),l.isExpand){var u=l.children;if(u.length)for(var h=u.length-1;h>=0;h--)a.push(u[h])}}function y2(c,s){c.eachSeriesByType("tree",function(a){!function b2(c,s){var a=function r5(c,s){return Br.ME(c.getBoxLayoutParams(),{width:s.getWidth(),height:s.getHeight()})}(c,s);c.layoutInfo=a;var l=c.get("layout"),u=0,h=0,p=null;"radial"===l?(u=2*Math.PI,h=Math.min(a.height,a.width)/2,p=sS(function(me,De){return(me.parentNode===De.parentNode?1:2)/me.depth})):(u=a.width,h=a.height,p=sS());var v=c.getData().tree.root,m=v.children[0];if(m){(function d2(c){var s=c;s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var l,u,a=[s];l=a.pop();)if(u=l.children,l.isExpand&&u.length)for(var p=u.length-1;p>=0;p--){var v=u[p];v.hierNode={defaultAncestor:null,ancestor:v,prelim:0,modifier:0,change:0,shift:0,i:p,thread:null},a.push(v)}})(v),function fS(c,s,a){for(var h,l=[c],u=[];h=l.pop();)if(u.push(h),h.isExpand){var p=h.children;if(p.length)for(var v=0;v<p.length;v++)l.push(p[v])}for(;h=u.pop();)s(h,a)}(m,jv,p),v.hierNode.modifier=-m.hierNode.prelim,Dp(m,oS);var y=m,x=m,w=m;Dp(m,function(me){var De=me.getLayout().x;De<y.getLayout().x&&(y=me),De>x.getLayout().x&&(x=me),me.depth>w.depth&&(w=me)});var D=y===x?1:p(y,x)/2,I=D-y.getLayout().x,L=0,N=0,Z=0,se=0;if("radial"===l)L=u/(x.getLayout().x+D+I),N=h/(w.depth-1||1),Dp(m,function(me){var De=Th(Z=(me.getLayout().x+I)*L,se=(me.depth-1)*N);me.setLayout({x:De.x,y:De.y,rawX:Z,rawY:se},!0)});else{var _e=c.getOrient();"RL"===_e||"LR"===_e?(N=h/(x.getLayout().x+D+I),L=u/(w.depth-1||1),Dp(m,function(me){se=(me.getLayout().x+I)*N,me.setLayout({x:Z="LR"===_e?(me.depth-1)*L:u-(me.depth-1)*L,y:se},!0)})):("TB"===_e||"BT"===_e)&&(L=u/(x.getLayout().x+D+I),N=h/(w.depth-1||1),Dp(m,function(me){Z=(me.getLayout().x+I)*L,me.setLayout({x:Z,y:se="TB"===_e?(me.depth-1)*N:h-(me.depth-1)*N},!0)}))}}}(a,s)})}function x2(c){c.eachSeriesByType("tree",function(s){var a=s.getData();a.tree.eachNode(function(u){var p=u.getModel().getModel("itemStyle").getItemStyle(),v=a.ensureUniqueItemVisual(u.dataIndex,"style");(0,b.extend)(v,p)})})}var Eh=["treemapZoomToNode","treemapRender","treemapMove"],Kv=H(1769);function z0(c){var s=c.getData(),l={};s.tree.eachNode(function(u){for(var h=u;h&&h.depth>1;)h=h.parentNode;var p=(0,Kv.i)(c.ecModel,h.name||h.dataIndex+"",l);u.setVisual("decal",p)})}function C2(c){var s=0;b.each(c.children,function(l){C2(l);var u=l.value;b.isArray(u)&&(u=u[0]),s+=u});var a=c.value;b.isArray(a)&&(a=a[0]),(null==a||isNaN(a))&&(a=s),a<0&&(a=0),b.isArray(c.value)?c.value[0]=a:c.value=a}const H0=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.preventUsingHoverLayer=!0,a}return(0,At.ZT)(s,c),s.prototype.getInitialData=function(a,l){var u={name:a.name,children:a.data};C2(u);var h=a.levels||[],p=this.designatedVisualItemStyle={},v=new ka.Z({itemStyle:p},this,l);h=a.levels=function l5(c,s){var a=(0,xn.kF)(s.get("color")),l=(0,xn.kF)(s.get(["aria","decal","decals"]));if(a){var u,h;b.each(c=c||[],function(v){var m=new ka.Z(v),y=m.get("color"),x=m.get("decal");(m.get(["itemStyle","color"])||y&&"none"!==y)&&(u=!0),(m.get(["itemStyle","decal"])||x&&"none"!==x)&&(h=!0)});var p=c[0]||(c[0]={});return u||(p.color=a.slice()),!h&&l&&(p.decal=l.slice()),c}}(h,l);var m=b.map(h||[],function(w){return new ka.Z(w,v,l)},this),y=al.createTree(u,this,function x(w){w.wrapMethod("getItemModel",function(D,I){var L=y.getNodeByDataIndex(I);return D.parentModel=(L?m[L.depth]:null)||v,D})});return y.data},s.prototype.optionUpdated=function(){this.resetViewRoot()},s.prototype.formatTooltip=function(a,l,u){var h=this.getData(),p=this.getRawValue(a),v=h.getName(a);return(0,da.TX)("nameValue",{name:v,value:p})},s.prototype.getDataParams=function(a){var l=c.prototype.getDataParams.apply(this,arguments),u=this.getData().tree.getNodeByDataIndex(a);return l.treeAncestors=Xv(u,this),l.treePathInfo=l.treeAncestors,l},s.prototype.setLayoutInfo=function(a){this.layoutInfo=this.layoutInfo||{},b.extend(this.layoutInfo,a)},s.prototype.mapIdToIndex=function(a){var l=this._idIndexMap;l||(l=this._idIndexMap=b.createHashMap(),this._idIndexMapCount=0);var u=l.get(a);return null==u&&l.set(a,u=this._idIndexMapCount++),u},s.prototype.getViewRoot=function(){return this._viewRoot},s.prototype.resetViewRoot=function(a){a?this._viewRoot=a:a=this._viewRoot;var l=this.getRawData().tree.root;(!a||a!==l&&!l.contains(a))&&(this._viewRoot=l)},s.prototype.enableAriaDecal=function(){z0(this)},s.type="series.treemap",s.layoutMode="box",s.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25b6",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},s}(Xi.Z);var dc=H(2650);function D2(c,s,a,l,u,h){var p=[[u?c:c-5,s],[c+a,s],[c+a,s+l],[u?c:c-5,s+l]];return!h&&p.splice(2,0,[c+a+5,s+l/2]),!u&&p.push([c,s+l/2]),p}function M2(c,s,a){(0,Tr.A)(c).eventData={componentType:"series",componentSubType:"treemap",componentIndex:s.componentIndex,seriesIndex:s.seriesIndex,seriesName:s.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:a&&a.dataIndex,name:a&&a.name},treePathInfo:a&&Xv(a,s)}}const T2=function(){function c(s){this.group=new Rn.Z,s.add(this.group)}return c.prototype.render=function(s,a,l,u){var h=s.getModel("breadcrumb"),p=this.group;if(p.removeAll(),h.get("show")&&l){var v=h.getModel("itemStyle"),m=h.getModel("emphasis"),y=v.getModel("textStyle"),x=m.getModel(["itemStyle","textStyle"]),w={pos:{left:h.get("left"),right:h.get("right"),top:h.get("top"),bottom:h.get("bottom")},box:{width:a.getWidth(),height:a.getHeight()},emptyItemWidth:h.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(l,w,y),this._renderContent(s,w,v,m,y,x,u),Br.p$(p,w.pos,w.box)}},c.prototype._prepare=function(s,a,l){for(var u=s;u;u=u.parentNode){var h=(0,xn.U5)(u.getModel().get("name"),""),p=l.getTextRect(h),v=Math.max(p.width+16,a.emptyItemWidth);a.totalWidth+=v+8,a.renderList.push({node:u,text:h,width:v})}},c.prototype._renderContent=function(s,a,l,u,h,p,v){for(var m=0,y=a.emptyItemWidth,x=s.get(["breadcrumb","height"]),w=Br.lq(a.pos,a.box),D=a.totalWidth,I=a.renderList,L=u.getModel("itemStyle").getItemStyle(),N=I.length-1;N>=0;N--){var Z=I[N],se=Z.node,_e=Z.width,me=Z.text;D>w.width&&(D-=_e-y,_e=y,me=null);var De=new nl.Z({shape:{points:D2(m,0,_e,x,N===I.length-1,0===N)},style:(0,b.defaults)(l.getItemStyle(),{lineJoin:"bevel"}),textContent:new _t.ZP({style:(0,qt.Lr)(h,{text:me})}),textConfig:{position:"inside"},z2:1e4*Wt.zr,onclick:(0,b.curry)(v,se)});De.disableLabelAnimation=!0,De.getTextContent().ensureState("emphasis").style=(0,qt.Lr)(p,{text:me}),De.ensureState("emphasis").style=L,(0,Wt.k5)(De,u.get("focus"),u.get("blurScope"),u.get("disabled")),this.group.add(De),M2(De,s,se),m+=_e+8}},c.prototype.remove=function(){this.group.removeAll()},c}();var gS=function(){function c(){this._storage=[],this._elExistsMap={}}return c.prototype.add=function(s,a,l,u,h){return!this._elExistsMap[s.id]&&(this._elExistsMap[s.id]=!0,this._storage.push({el:s,target:a,duration:l,delay:u,easing:h}),!0)},c.prototype.finished=function(s){return this._finishedCallback=s,this},c.prototype.start=function(){for(var s=this,a=this._storage.length,l=function(){--a<=0&&(s._storage.length=0,s._elExistsMap={},s._finishedCallback&&s._finishedCallback())},u=0,h=this._storage.length;u<h;u++){var p=this._storage[u];p.el.animateTo(p.target,{duration:p.duration,delay:p.delay,easing:p.easing,setToFinal:!0,done:l,aborted:l})}return this},c}(),U0=H(5632),Mp=Rn.Z,vS=Mi.Z,_S="upperLabel",Jv=10*Wt.zr,yS=2*Wt.zr,E2=3*Wt.zr,Cd=(0,U0.Z)([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),bS=function(c){var s=Cd(c);return s.stroke=s.fill=s.lineWidth=null,s},em=(0,xn.Yf)();const G0=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a._state="ready",a._storage={nodeGroup:[],background:[],content:[]},a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u,h){var p=l.findComponents({mainType:"series",subType:"treemap",query:h});if(!((0,b.indexOf)(p,a)<0)){this.seriesModel=a,this.api=u,this.ecModel=l;var m=Sp(h,["treemapZoomToNode","treemapRootToNode"],a),y=h&&h.type,x=a.layoutInfo,w=!this._oldTree,D=this._storage,I="treemapRootToNode"===y&&m&&D?{rootNodeGroup:D.nodeGroup[m.node.getRawIndex()],direction:h.direction}:null,L=this._giveContainerGroup(x),N=a.get("animation"),Z=this._doRender(L,a,I);!N||w||y&&"treemapZoomToNode"!==y&&"treemapRootToNode"!==y?Z.renderFinally():this._doAnimation(L,Z,a,I),this._resetController(u),this._renderBreadcrumb(a,u,m)}},s.prototype._giveContainerGroup=function(a){var l=this._containerGroup;return l||(l=this._containerGroup=new Mp,this._initEvents(l),this.group.add(l)),l.x=a.x,l.y=a.y,l},s.prototype._doRender=function(a,l,u){var h=l.getData().tree,p=this._oldTree,v={nodeGroup:[],background:[],content:[]},m={nodeGroup:[],background:[],content:[]},y=this._storage,x=[];function w(Z,se,_e,me){return function u5(c,s,a,l,u,h,p,v,m,y){if(p){var x=p.getLayout(),w=c.getData(),D=p.getModel();if(w.setItemGraphicEl(p.dataIndex,null),x&&x.isInView){var I=x.width,L=x.height,N=x.borderWidth,Z=x.invisible,se=p.getRawIndex(),_e=v&&v.getRawIndex(),me=p.viewChildren,De=x.upperHeight,Pe=me&&me.length,Ie=D.getModel("itemStyle"),ke=D.getModel(["emphasis","itemStyle"]),Ue=D.getModel(["blur","itemStyle"]),Ye=D.getModel(["select","itemStyle"]),Ke=Ie.get("borderRadius")||0,Je=Fr("nodeGroup",Mp);if(Je){if(m.add(Je),Je.x=x.x||0,Je.y=x.y||0,Je.markRedraw(),em(Je).nodeWidth=I,em(Je).nodeHeight=L,x.isAboveViewRoot)return Je;var ut=Fr("background",vS,y,yS);ut&&function dn(Yr,or,wi){var mi=(0,Tr.A)(or);if(mi.dataIndex=p.dataIndex,mi.seriesIndex=c.seriesIndex,or.setShape({x:0,y:0,width:I,height:L,r:Ke}),Z)zn(or);else{or.invisible=!1;var Bi=p.getVisual("style"),ao=Bi.stroke,go=bS(Ie);go.fill=ao;var la=Cd(ke);la.fill=ke.get("borderColor");var ba=Cd(Ue);ba.fill=Ue.get("borderColor");var Aa=Cd(Ye);Aa.fill=Ye.get("borderColor"),wi?dr(or,ao,Bi.opacity,{x:N,y:0,width:I-2*N,height:De}):or.removeTextContent(),or.setStyle(go),or.ensureState("emphasis").style=la,or.ensureState("blur").style=ba,or.ensureState("select").style=Aa,(0,Wt.MA)(or)}Yr.add(or)}(Je,ut,Pe&&x.upperLabelHeight);var pt=D.getModel("emphasis"),yt=pt.get("focus"),wt=pt.get("blurScope"),kt=pt.get("disabled"),en="ancestor"===yt?p.getAncestorsIndices():"descendant"===yt?p.getDescendantIndices():yt;if(Pe)(0,Wt.Av)(Je)&&(0,Wt.Nj)(Je,!1),ut&&((0,Wt.Nj)(ut,!kt),w.setItemGraphicEl(p.dataIndex,ut),(0,Wt.Ib)(ut,en,wt));else{var Yt=Fr("content",vS,y,E2);Yt&&function Fn(Yr,or){var wi=(0,Tr.A)(or);wi.dataIndex=p.dataIndex,wi.seriesIndex=c.seriesIndex;var mi=Math.max(I-2*N,0),Bi=Math.max(L-2*N,0);if(or.culling=!0,or.setShape({x:N,y:N,width:mi,height:Bi,r:Ke}),Z)zn(or);else{or.invisible=!1;var ao=p.getVisual("style"),go=ao.fill,la=bS(Ie);la.fill=go,la.decal=ao.decal;var ba=Cd(ke),Aa=Cd(Ue),ms=Cd(Ye);dr(or,go,ao.opacity,null),or.setStyle(la),or.ensureState("emphasis").style=ba,or.ensureState("blur").style=Aa,or.ensureState("select").style=ms,(0,Wt.MA)(or)}Yr.add(or)}(Je,Yt),ut.disableMorphing=!0,ut&&(0,Wt.Av)(ut)&&(0,Wt.Nj)(ut,!1),(0,Wt.Nj)(Je,!kt),w.setItemGraphicEl(p.dataIndex,Je),(0,Wt.Ib)(Je,en,wt)}return Je}}}function zn(Yr){!Yr.invisible&&h.push(Yr)}function dr(Yr,or,wi,mi){var Bi=D.getModel(mi?_S:"label"),ao=(0,xn.U5)(D.get("name"),null),go=Bi.getShallow("show");(0,qt.ni)(Yr,(0,qt.k3)(D,mi?_S:"label"),{defaultText:go?ao:null,inheritColor:or,defaultOpacity:wi,labelFetcher:c,labelDataIndex:p.dataIndex});var la=Yr.getTextContent();if(la){var ba=la.style,Aa=(0,b.normalizeCssArray)(ba.padding||0);mi&&(Yr.setTextConfig({layoutRect:mi}),la.disableLabelLayout=!0),la.beforeUpdate=function(){var ml=Math.max((mi?mi.width:Yr.shape.width)-Aa[1]-Aa[3],0),Yo=Math.max((mi?mi.height:Yr.shape.height)-Aa[0]-Aa[2],0);(ba.width!==ml||ba.height!==Yo)&&la.setStyle({width:ml,height:Yo})},ba.truncateMinChar=2,ba.lineOverflow="truncate",br(ba,mi,x);var ms=la.getState("emphasis");br(ms?ms.style:null,mi,x)}}function br(Yr,or,wi){var mi=Yr?Yr.text:null;if(!or&&wi.isLeafRoot&&null!=mi){var Bi=c.get("drillDownIcon",!0);Yr.text=Bi?Bi+" "+mi:mi}}function Fr(Yr,or,wi,mi){var Bi=null!=_e&&a[Yr][_e],ao=u[Yr];return Bi?(a[Yr][_e]=null,function Ci(Yr,or){var wi=Yr[se]={};or instanceof Mp?(wi.oldX=or.x,wi.oldY=or.y):wi.oldShape=(0,b.extend)({},or.shape)}(ao,Bi)):Z||((Bi=new or)instanceof Du.ZP&&(Bi.z2=function Tp(c,s){return c*Jv+s}(wi,mi)),function Oi(Yr,or){var wi=Yr[se]={},mi=p.parentNode,Bi=or instanceof Rn.Z;if(mi&&(!l||"drillDown"===l.direction)){var ao=0,go=0,la=u.background[mi.getRawIndex()];!l&&la&&la.oldShape&&(ao=la.oldShape.width,go=la.oldShape.height),Bi?(wi.oldX=0,wi.oldY=go):wi.oldShape={x:ao,y:go,width:0,height:0}}wi.fadein=!Bi}(ao,Bi)),s[Yr][se]=Bi}}(l,m,y,u,v,x,Z,se,_e,me)}!function I(Z,se,_e,me,De){function Pe(ke){return ke.getId()}function Ie(ke,Ue){var Ye=null!=ke?Z[ke]:null,Ke=null!=Ue?se[Ue]:null,Je=w(Ye,Ke,_e,De);Je&&I(Ye&&Ye.viewChildren||[],Ke&&Ke.viewChildren||[],Je,me,De+1)}me?(se=Z,(0,b.each)(Z,function(ke,Ue){!ke.isRemoved()&&Ie(Ue,Ue)})):new dc.Z(se,Z,Pe,Pe).add(Ie).update(Ie).remove((0,b.curry)(Ie,null)).execute()}(h.root?[h.root]:[],p&&p.root?[p.root]:[],a,h===p||!p,0);var D=function L(Z){var se={nodeGroup:[],background:[],content:[]};return Z&&(0,b.each)(Z,function(_e,me){var De=se[me];(0,b.each)(_e,function(Pe){Pe&&(De.push(Pe),em(Pe).willDelete=!0)})}),se}(y);return this._oldTree=h,this._storage=m,{lastsForAnimation:v,willDeleteEls:D,renderFinally:function N(){(0,b.each)(D,function(Z){(0,b.each)(Z,function(se){se.parent&&se.parent.remove(se)})}),(0,b.each)(x,function(Z){Z.invisible=!0,Z.dirty()})}}},s.prototype._doAnimation=function(a,l,u,h){var p=u.get("animationDurationUpdate"),v=u.get("animationEasing"),m=((0,b.isFunction)(p)?0:p)||0,y=((0,b.isFunction)(v)?null:v)||"cubicOut",x=function qv(){return new gS}();(0,b.each)(l.willDeleteEls,function(w,D){(0,b.each)(w,function(I,L){if(!I.invisible){var Z,N=I.parent,se=em(N);if(h&&"drillDown"===h.direction)Z=N===h.rootNodeGroup?{shape:{x:0,y:0,width:se.nodeWidth,height:se.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var _e=0,me=0;se.willDelete||(_e=se.nodeWidth/2,me=se.nodeHeight/2),Z="nodeGroup"===D?{x:_e,y:me,style:{opacity:0}}:{shape:{x:_e,y:me,width:0,height:0},style:{opacity:0}}}Z&&x.add(I,Z,m,0,y)}})}),(0,b.each)(this._storage,function(w,D){(0,b.each)(w,function(I,L){var N=l.lastsForAnimation[D][L],Z={};!N||(I instanceof Rn.Z?null!=N.oldX&&(Z.x=I.x,Z.y=I.y,I.x=N.oldX,I.y=N.oldY):(N.oldShape&&(Z.shape=(0,b.extend)({},I.shape),I.setShape(N.oldShape)),N.fadein?(I.setStyle("opacity",0),Z.style={opacity:1}):1!==I.style.opacity&&(Z.style={opacity:1})),x.add(I,Z,m,0,y))})},this),this._state="animating",x.finished((0,b.bind)(function(){this._state="ready",l.renderFinally()},this)).start()},s.prototype._resetController=function(a){var l=this._controller;l||((l=this._controller=new cp(a.getZr())).enable(this.seriesModel.get("roam")),l.on("pan",(0,b.bind)(this._onPan,this)),l.on("zoom",(0,b.bind)(this._onZoom,this)));var u=new yr.Z(0,0,a.getWidth(),a.getHeight());l.setPointerChecker(function(h,p,v){return u.contain(p,v)})},s.prototype._clearController=function(){var a=this._controller;a&&(a.dispose(),a=null)},s.prototype._onPan=function(a){if("animating"!==this._state&&(Math.abs(a.dx)>3||Math.abs(a.dy)>3)){var l=this.seriesModel.getData().tree.root;if(!l)return;var u=l.getLayout();if(!u)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:u.x+a.dx,y:u.y+a.dy,width:u.width,height:u.height}})}},s.prototype._onZoom=function(a){var l=a.originX,u=a.originY;if("animating"!==this._state){var h=this.seriesModel.getData().tree.root;if(!h)return;var p=h.getLayout();if(!p)return;var v=new yr.Z(p.x,p.y,p.width,p.height),m=this.seriesModel.layoutInfo;l-=m.x,u-=m.y;var y=xi.create();xi.translate(y,y,[-l,-u]),xi.scale(y,y,[a.scale,a.scale]),xi.translate(y,y,[l,u]),v.applyTransform(y),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:v.x,y:v.y,width:v.width,height:v.height}})}},s.prototype._initEvents=function(a){var l=this;a.on("click",function(u){if("ready"===l._state){var h=l.seriesModel.get("nodeClick",!0);if(h){var p=l.findTarget(u.offsetX,u.offsetY);if(p){var v=p.node;if(v.getLayout().isLeafRoot)l._rootToNode(p);else if("zoomToNode"===h)l._zoomToNode(p);else if("link"===h){var m=v.hostTree.data.getItemModel(v.dataIndex),y=m.get("link",!0),x=m.get("target",!0)||"blank";y&&(0,Va.MI)(y,x)}}}}},this)},s.prototype._renderBreadcrumb=function(a,l,u){var h=this;u||(u=null!=a.get("leafDepth",!0)?{node:a.getViewRoot()}:this.findTarget(l.getWidth()/2,l.getHeight()/2))||(u={node:a.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new T2(this.group))).render(a,l,u.node,function(p){"animating"!==h._state&&(V0(a.getViewRoot(),p)?h._rootToNode({node:p}):h._zoomToNode({node:p}))})},s.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},s.prototype.dispose=function(){this._clearController()},s.prototype._zoomToNode=function(a){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:a.node})},s.prototype._rootToNode=function(a){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:a.node})},s.prototype.findTarget=function(a,l){var u;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(p){var v=this._storage.background[p.getRawIndex()];if(v){var m=v.transformCoordToLocal(a,l),y=v.shape;if(!(y.x<=m[0]&&m[0]<=y.x+y.width&&y.y<=m[1]&&m[1]<=y.y+y.height))return!1;u={node:p,offsetX:m[0],offsetY:m[1]}}},this),u},s.type="treemap",s}(ia.Z);var Ah=b.each,xS=b.isObject,W0=function(){function c(s){var a=s.mappingMethod,l=s.type,u=this.option=b.clone(s);this.type=l,this.mappingMethod=a,this._normalizeData=rm[a];var h=c.visualHandlers[l];this.applyVisual=h.applyVisual,this.getColorMapper=h.getColorMapper,this._normalizedToVisual=h._normalizedToVisual[a],"piecewise"===a?(Ap(u),function CS(c){var s=c.pieceList;c.hasSpecialVisual=!1,b.each(s,function(a,l){a.originIndex=l,null!=a.visual&&(c.hasSpecialVisual=!0)})}(u)):"category"===a?u.categories?function wS(c){var s=c.categories,a=c.categoryMap={},l=c.visual;if(Ah(s,function(p,v){a[p]=v}),!b.isArray(l)){var u=[];b.isObject(l)?Ah(l,function(p,v){u[a[v]??-1]=p}):u[-1]=l,l=nm(c,u)}for(var h=s.length-1;h>=0;h--)null==l[h]&&(delete a[s[h]],s.pop())}(u):Ap(u,!0):(b.assert("linear"!==a||u.dataExtent),Ap(u))}return c.prototype.mapValueToVisual=function(s){var a=this._normalizeData(s);return this._normalizedToVisual(a,s)},c.prototype.getNormalizer=function(){return b.bind(this._normalizeData,this)},c.listVisualTypes=function(){return b.keys(c.visualHandlers)},c.isValidType=function(s){return c.visualHandlers.hasOwnProperty(s)},c.eachVisual=function(s,a,l){b.isObject(s)?b.each(s,a,l):a.call(l,s)},c.mapVisual=function(s,a,l){var u,h=b.isArray(s)?[]:b.isObject(s)?{}:(u=!0,null);return c.eachVisual(s,function(p,v){var m=a.call(l,p,v);u?h=m:h[v]=m}),h},c.retrieveVisuals=function(s){var l,a={};return s&&Ah(c.visualHandlers,function(u,h){s.hasOwnProperty(h)&&(a[h]=s[h],l=!0)}),l?a:null},c.prepareVisualTypes=function(s){if(b.isArray(s))s=s.slice();else{if(!xS(s))return[];var a=[];Ah(s,function(l,u){a.push(u)}),s=a}return s.sort(function(l,u){return"color"===u&&"color"!==l&&0===l.indexOf("color")?1:-1}),s},c.dependsOn=function(s,a){return"color"===a?!(!s||0!==s.indexOf(a)):s===a},c.findPieceIndex=function(s,a,l){for(var u,h=1/0,p=0,v=a.length;p<v;p++){var m=a[p].value;if(null!=m){if(m===s||b.isString(m)&&m===s+"")return p;l&&D(m,p)}}for(p=0,v=a.length;p<v;p++){var y=a[p],x=y.interval,w=y.close;if(x){if(x[0]===-1/0){if(im(w[1],s,x[1]))return p}else if(x[1]===1/0){if(im(w[0],x[0],s))return p}else if(im(w[0],x[0],s)&&im(w[1],s,x[1]))return p;l&&D(x[0],p),l&&D(x[1],p)}}if(l)return s===1/0?a.length-1:s===-1/0?0:u;function D(I,L){var N=Math.abs(I-s);N<h&&(h=N,u=L)}},c.visualHandlers={color:{applyVisual:wd("color"),getColorMapper:function(){var s=this.option;return b.bind("category"===s.mappingMethod?function(a,l){return!l&&(a=this._normalizeData(a)),Ih.call(this,a)}:function(a,l,u){var h=!!u;return!l&&(a=this._normalizeData(a)),u=Da.fastLerp(a,s.parsedVisual,u),h?u:Da.stringify(u,"rgba")},this)},_normalizedToVisual:{linear:function(s){return Da.stringify(Da.fastLerp(s,this.option.parsedVisual),"rgba")},category:Ih,piecewise:function(s,a){var l=Z0.call(this,a);return null==l&&(l=Da.stringify(Da.fastLerp(s,this.option.parsedVisual),"rgba")),l},fixed:Tu}},colorHue:j0(function(s,a){return Da.modifyHSL(s,a)}),colorSaturation:j0(function(s,a){return Da.modifyHSL(s,null,a)}),colorLightness:j0(function(s,a){return Da.modifyHSL(s,null,null,a)}),colorAlpha:j0(function(s,a){return Da.modifyAlpha(s,a)}),decal:{applyVisual:wd("decal"),_normalizedToVisual:{linear:null,category:Ih,piecewise:null,fixed:null}},opacity:{applyVisual:wd("opacity"),_normalizedToVisual:Xc([0,1])},liftZ:{applyVisual:wd("liftZ"),_normalizedToVisual:{linear:Tu,category:Tu,piecewise:Tu,fixed:Tu}},symbol:{applyVisual:function(s,a,l){l("symbol",this.mapValueToVisual(s))},_normalizedToVisual:{linear:SS,category:Ih,piecewise:function(s,a){var l=Z0.call(this,a);return null==l&&(l=SS.call(this,s)),l},fixed:Tu}},symbolSize:{applyVisual:wd("symbolSize"),_normalizedToVisual:Xc([0,1])}},c}();function Ap(c,s){var a=c.visual,l=[];b.isObject(a)?Ah(a,function(h){l.push(h)}):null!=a&&l.push(a),!s&&1===l.length&&!{color:1,symbol:1}.hasOwnProperty(c.type)&&(l[1]=l[0]),nm(c,l)}function j0(c){return{applyVisual:function(s,a,l){var u=this.mapValueToVisual(s);l("color",c(a("color"),u))},_normalizedToVisual:Xc([0,1])}}function SS(c){var s=this.option.visual;return s[Math.round((0,It.NU)(c,[0,1],[0,s.length-1],!0))]||{}}function wd(c){return function(s,a,l){l(c,this.mapValueToVisual(s))}}function Ih(c){var s=this.option.visual;return s[this.option.loop&&-1!==c?c%s.length:c]}function Tu(){return this.option.visual[0]}function Xc(c){return{linear:function(s){return(0,It.NU)(s,c,this.option.visual,!0)},category:Ih,piecewise:function(s,a){var l=Z0.call(this,a);return null==l&&(l=(0,It.NU)(s,c,this.option.visual,!0)),l},fixed:Tu}}function Z0(c){var s=this.option,a=s.pieceList;if(s.hasSpecialVisual){var u=a[W0.findPieceIndex(c,a)];if(u&&u.visual)return u.visual[this.type]}}function nm(c,s){return c.visual=s,"color"===c.type&&(c.parsedVisual=b.map(s,function(a){return Da.parse(a)||[0,0,0,1]})),s}var rm={linear:function(c){return(0,It.NU)(c,this.option.dataExtent,[0,1],!0)},piecewise:function(c){var s=this.option.pieceList,a=W0.findPieceIndex(c,s,!0);if(null!=a)return(0,It.NU)(a,[0,s.length-1],[0,1],!0)},category:function(c){return(this.option.categories?this.option.categoryMap[c]:c)??-1},fixed:b.noop};function im(c,s,a){return c?s<=a:s<a}const no=W0;var $c=(0,xn.Yf)();const DS={seriesType:"treemap",reset:function(c){var a=c.getData().tree.root;a.isRemoved()||om(a,{},c.getViewRoot().getAncestors(),c)}};function om(c,s,a,l){var u=c.getModel(),h=c.getLayout(),p=c.hostTree.data;if(h&&!h.invisible&&h.isInView){var D,v=u.getModel("itemStyle"),m=function I2(c,s,a){var l=(0,b.extend)({},s),u=a.designatedVisualItemStyle;return(0,b.each)(["color","colorAlpha","colorSaturation"],function(h){u[h]=s[h];var p=c.get(h);u[h]=null,null!=p&&(l[h]=p)}),l}(v,s,l),y=p.ensureUniqueItemVisual(c.dataIndex,"style"),x=v.get("borderColor"),w=v.get("borderColorSaturation");null!=w&&(x=function TS(c,s){return null!=s?(0,Da.modifyHSL)(s,null,null,c):null}(w,D=MS(m))),y.stroke=x;var I=c.viewChildren;if(I&&I.length){var L=function P2(c,s,a,l,u,h){if(h&&h.length){var p=Y0(s,"color")||null!=u.color&&"none"!==u.color&&(Y0(s,"colorAlpha")||Y0(s,"colorSaturation"));if(p){var v=s.get("visualMin"),m=s.get("visualMax"),y=a.dataExtent.slice();null!=v&&v<y[0]&&(y[0]=v),null!=m&&m>y[1]&&(y[1]=m);var x=s.get("colorMappingBy"),w={type:p.name,dataExtent:y,visual:p.range};"color"!==w.type||"index"!==x&&"id"!==x?w.mappingMethod="linear":(w.mappingMethod="category",w.loop=!0);var D=new no(w);return $c(D).drColorMappingBy=x,D}}}(0,u,h,0,m,I);(0,b.each)(I,function(N,Z){if(N.depth>=a.length||N===a[N.depth]){var se=function R2(c,s,a,l,u,h){var p=(0,b.extend)({},s);if(u){var v=u.type,m="color"===v&&$c(u).drColorMappingBy,y="index"===m?l:"id"===m?h.mapIdToIndex(a.getId()):a.getValue(c.get("visualDimension"));p[v]=u.mapValueToVisual(y)}return p}(u,m,N,Z,L,l);om(N,se,a,l)}})}else D=MS(m),y.fill=D}}function MS(c){var s=Eu(c,"color");if(s){var a=Eu(c,"colorAlpha"),l=Eu(c,"colorSaturation");return l&&(s=(0,Da.modifyHSL)(s,null,null,l)),a&&(s=(0,Da.modifyAlpha)(s,a)),s}}function Eu(c,s){var a=c[s];if(null!=a&&"none"!==a)return a}function Y0(c,s){var a=c.get(s);return(0,b.isArray)(a)&&a.length?{name:s,range:a}:null}var Ip=Math.max,Ph=Math.min,ES=b.retrieve,sm=b.each,AS=["itemStyle","borderWidth"],IS=["itemStyle","gapWidth"],d5=["upperLabel","show"],L2=["upperLabel","height"];const Sd={seriesType:"treemap",reset:function(c,s,a,l){var u=a.getWidth(),h=a.getHeight(),p=c.option,v=Br.ME(c.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()}),m=p.size||[],y=(0,It.GM)(ES(v.width,m[0]),u),x=(0,It.GM)(ES(v.height,m[1]),h),w=l&&l.type,I=Sp(l,["treemapZoomToNode","treemapRootToNode"],c),L="treemapRender"===w||"treemapMove"===w?l.rootRect:null,N=c.getViewRoot(),Z=hS(N);if("treemapMove"!==w){var se="treemapZoomToNode"===w?function k2(c,s,a,l,u){var h=(s||{}).node,p=[l,u];if(!h||h===a)return p;for(var v,m=l*u,y=m*c.option.zoomToNodeRatio;v=h.parentNode;){for(var x=0,w=v.children,D=0,I=w.length;D<I;D++)x+=w[D].getValue();var L=h.getValue();if(0===L)return p;y*=x/L;var N=v.getModel(),Z=N.get(AS);(y+=4*Z*Z+(3*Z+Math.max(Z,RS(N)))*Math.pow(y,.5))>It.YM&&(y=It.YM),h=v}y<m&&(y=m);var _e=Math.pow(y/m,.5);return[l*_e,u*_e]}(c,I,N,y,x):L?[L.width,L.height]:[y,x],_e=p.sort;_e&&"asc"!==_e&&"desc"!==_e&&(_e="desc");var me={squareRatio:p.squareRatio,sort:_e,leafDepth:p.leafDepth};N.hostTree.clearLayouts();var De={x:0,y:0,width:se[0],height:se[1],area:se[0]*se[1]};N.setLayout(De),PS(N,me,!1,0),De=N.getLayout(),sm(Z,function(Ie,ke){var Ue=(Z[ke+1]||N).getValue();Ie.setLayout(b.extend({dataExtent:[Ue,Ue],borderWidth:0,upperHeight:0},De))})}var Pe=c.getData().tree.root;Pe.setLayout(function N2(c,s,a){if(s)return{x:s.x,y:s.y};var l={x:0,y:0};if(!a)return l;var u=a.node,h=u.getLayout();if(!h)return l;for(var p=[h.width/2,h.height/2],v=u;v;){var m=v.getLayout();p[0]+=m.x,p[1]+=m.y,v=v.parentNode}return{x:c.width/2-p[0],y:c.height/2-p[1]}}(v,L,I),!0),c.setLayoutInfo(v),Au(Pe,new yr.Z(-v.x,-v.y,u,h),Z,N,0)}};function PS(c,s,a,l){var u,h;if(!c.isRemoved()){var p=c.getLayout();u=p.width,h=p.height;var v=c.getModel(),m=v.get(AS),y=v.get(IS)/2,x=RS(v),w=Math.max(m,x),D=m-y,I=w-y;c.setLayout({borderWidth:m,upperHeight:w,upperLabelHeight:x},!0);var L=(u=Ip(u-2*D,0))*(h=Ip(h-D-I,0)),N=function Rh(c,s,a,l,u,h){var p=c.children||[],v=l.sort;"asc"!==v&&"desc"!==v&&(v=null);var m=null!=l.leafDepth&&l.leafDepth<=h;if(u&&!m)return c.viewChildren=[];p=b.filter(p,function(I){return!I.isRemoved()}),function O2(c,s){s&&c.sort(function(a,l){var u="asc"===s?a.getValue()-l.getValue():l.getValue()-a.getValue();return 0===u?"asc"===s?a.dataIndex-l.dataIndex:l.dataIndex-a.dataIndex:u})}(p,v);var y=function h5(c,s,a){for(var l=0,u=0,h=s.length;u<h;u++)l+=s[u].getValue();var v,p=c.get("visualDimension");return s&&s.length?"value"===p&&a?(v=[s[s.length-1].getValue(),s[0].getValue()],"asc"===a&&v.reverse()):(v=[1/0,-1/0],sm(s,function(m){var y=m.getValue(p);y<v[0]&&(v[0]=y),y>v[1]&&(v[1]=y)})):v=[NaN,NaN],{sum:l,dataExtent:v}}(s,p,v);if(0===y.sum)return c.viewChildren=[];if(y.sum=function kr(c,s,a,l,u){if(!l)return a;for(var h=c.get("visibleMin"),p=u.length,v=p,m=p-1;m>=0;m--){var y=u["asc"===l?p-m-1:m].getValue();y/a*s<h&&(v=m,a-=y)}return u.splice("asc"===l?0:v,p-v),a}(s,a,y.sum,v,p),0===y.sum)return c.viewChildren=[];for(var x=0,w=p.length;x<w;x++){var D=p[x].getValue()/y.sum*a;p[x].setLayout({area:D})}return m&&(p.length&&c.setLayout({isLeafRoot:!0},!0),p.length=0),c.viewChildren=p,c.setLayout({dataExtent:y.dataExtent},!0),p}(c,v,L,s,a,l);if(N.length){var Z={x:D,y:I,width:u,height:h},se=Ph(u,h),_e=1/0,me=[];me.area=0;for(var De=0,Pe=N.length;De<Pe;){var Ie=N[De];me.push(Ie),me.area+=Ie.getLayout().area;var ke=Pp(me,se,s.squareRatio);ke<=_e?(De++,_e=ke):(me.area-=me.pop().getLayout().area,hc(me,se,Z,y,!1),se=Ph(Z.width,Z.height),me.length=me.area=0,_e=1/0)}if(me.length&&hc(me,se,Z,y,!0),!a){var Ue=v.get("childrenVisibleMin");null!=Ue&&L<Ue&&(a=!0)}for(De=0,Pe=N.length;De<Pe;De++)PS(N[De],s,a,l+1)}}}function Pp(c,s,a){for(var l=0,u=1/0,h=0,p=void 0,v=c.length;h<v;h++)(p=c[h].getLayout().area)&&(p<u&&(u=p),p>l&&(l=p));var m=c.area*c.area,y=s*s*a;return m?Ip(y*l/m,m/(y*u)):1/0}function hc(c,s,a,l,u){var h=s===a.width?0:1,p=1-h,v=["x","y"],m=["width","height"],y=a[v[h]],x=s?c.area/s:0;(u||x>a[m[p]])&&(x=a[m[p]]);for(var w=0,D=c.length;w<D;w++){var I=c[w],L={},N=x?I.getLayout().area/x:0,Z=L[m[p]]=Ip(x-2*l,0),se=a[v[h]]+a[m[h]]-y,_e=w===D-1||se<N?se:N,me=L[m[h]]=Ip(_e-2*l,0);L[v[p]]=a[v[p]]+Ph(l,Z/2),L[v[h]]=y+Ph(l,me/2),y+=_e,I.setLayout(L,!0)}a[v[p]]+=x,a[m[p]]-=x}function Au(c,s,a,l,u){var h=c.getLayout(),p=a[u],v=p&&p===c;if(!(p&&!v||u===a.length&&c!==l)){c.setLayout({isInView:!0,invisible:!v&&!s.intersect(h),isAboveViewRoot:v},!0);var m=new yr.Z(s.x-h.x,s.y-h.y,s.width,s.height);sm(c.viewChildren||[],function(y){Au(y,m,a,l,u+1)})}}function RS(c){return c.get(d5)?c.get(L2):0}function F2(c){var s=c.findComponents({mainType:"legend"});!s||!s.length||c.eachSeriesByType("graph",function(a){var l=a.getCategoriesData(),h=a.getGraph().data,p=l.mapArray(l.getName);h.filterSelf(function(v){var y=h.getItemModel(v).getShallow("category");if(null!=y){(0,b.isNumber)(y)&&(y=p[y]);for(var x=0;x<s.length;x++)if(!s[x].isSelected(y))return!1}return!0})})}function B2(c){var s={};c.eachSeriesByType("graph",function(a){var l=a.getCategoriesData(),u=a.getData(),h={};l.each(function(p){var v=l.getName(p);h["ec-"+v]=p;var m=l.getItemModel(p),y=m.getModel("itemStyle").getItemStyle();y.fill||(y.fill=a.getColorFromPalette(v,s)),l.setItemVisual(p,"style",y);for(var x=["symbol","symbolSize","symbolKeepAspect"],w=0;w<x.length;w++){var D=m.getShallow(x[w],!0);null!=D&&l.setItemVisual(p,x[w],D)}}),l.count()&&u.each(function(p){var m=u.getItemModel(p).getShallow("category");if(null!=m){(0,b.isString)(m)&&(m=h["ec-"+m]);var y=l.getItemVisual(m,"style"),x=u.ensureUniqueItemVisual(p,"style");(0,b.extend)(x,y);for(var w=["symbol","symbolSize","symbolKeepAspect"],D=0;D<w.length;D++)u.setItemVisual(p,w[D],l.getItemVisual(m,w[D]))}})})}function Lh(c){return c instanceof Array||(c=[c,c]),c}function f5(c){c.eachSeriesByType("graph",function(s){var a=s.getGraph(),l=s.getEdgeData(),u=Lh(s.get("edgeSymbol")),h=Lh(s.get("edgeSymbolSize"));l.setVisual("fromSymbol",u&&u[0]),l.setVisual("toSymbol",u&&u[1]),l.setVisual("fromSymbolSize",h&&h[0]),l.setVisual("toSymbolSize",h&&h[1]),l.setVisual("style",s.getModel("lineStyle").getLineStyle()),l.each(function(p){var v=l.getItemModel(p),m=a.getEdgeByIndex(p),y=Lh(v.getShallow("symbol",!0)),x=Lh(v.getShallow("symbolSize",!0)),w=v.getModel("lineStyle").getLineStyle(),D=l.ensureUniqueItemVisual(p,"style");switch((0,b.extend)(D,w),D.stroke){case"source":var I=m.node1.getVisual("style");D.stroke=I&&I.fill;break;case"target":I=m.node2.getVisual("style"),D.stroke=I&&I.fill}y[0]&&m.setVisual("fromSymbol",y[0]),y[1]&&m.setVisual("toSymbol",y[1]),x[0]&&m.setVisual("fromSymbolSize",x[0]),x[1]&&m.setVisual("toSymbolSize",x[1])})})}var Oh=function(c){return c.get("autoCurveness")||null},V2=function(c,s){var a=Oh(c),l=20,u=[];if(b.isNumber(a))l=a;else if(b.isArray(a))return void(c.__curvenessList=a);s>l&&(l=s);var h=l%2?l+2:l+3;u=[];for(var p=0;p<h;p++)u.push((p%2?p+1:p)/10*(p%2?-1:1));c.__curvenessList=u},lm=function(c,s,a){var l=[c.id,c.dataIndex].join("."),u=[s.id,s.dataIndex].join(".");return[a.uid,l,u].join("--\x3e")},z2=function(c){var s=c.split("--\x3e");return[s[0],s[2],s[1]].join("--\x3e")},$0=function(c,s){var a=s.__edgeMap;return a[c]?a[c].length:0};function cm(c,s,a,l){var u=Oh(s),h=b.isArray(u);if(!u)return null;var p=function(c,s){var a=lm(c.node1,c.node2,s);return s.__edgeMap[a]}(c,s);if(!p)return null;for(var v=-1,m=0;m<p.length;m++)if(p[m]===a){v=m;break}var y=function(c,s){return $0(lm(c.node1,c.node2,s),s)+$0(lm(c.node2,c.node1,s),s)}(c,s);V2(s,y),c.lineStyle=c.lineStyle||{};var x=lm(c.node1,c.node2,s),w=s.__curvenessList,D=h||y%2?0:1;if(p.isForward)return w[D+v];var I=z2(x),L=$0(I,s),N=w[v+L+D];return l?h?u&&0===u[0]?(L+D)%2?N:-N:((L%2?0:1)+D)%2?N:-N:(L+D)%2?N:-N:w[v+L+D]}function Q0(c){var s=c.coordinateSystem;if(!s||"view"===s.type){var a=c.getGraph();a.eachNode(function(l){var u=l.getModel();l.setLayout([+u.get("x"),+u.get("y")])}),um(a,c)}}function um(c,s){c.eachEdge(function(a,l){var u=b.retrieve3(a.getModel().get(["lineStyle","curveness"]),-cm(a,s,l,!0),0),h=Jn.clone(a.node1.getLayout()),p=Jn.clone(a.node2.getLayout()),v=[h,p];+u&&v.push([(h[0]+p[0])/2-(h[1]-p[1])*u,(h[1]+p[1])/2-(p[0]-h[0])*u]),a.setLayout(v)})}function q0(c,s){c.eachSeriesByType("graph",function(a){var l=a.get("layout"),u=a.coordinateSystem;if(u&&"view"!==u.type){var h=a.getData(),p=[];(0,b.each)(u.dimensions,function(D){p=p.concat(h.mapDimensionsAll(D))});for(var v=0;v<h.count();v++){for(var m=[],y=!1,x=0;x<p.length;x++){var w=h.get(p[x],v);isNaN(w)||(y=!0),m.push(w)}h.setItemLayout(v,y?u.dataToPoint(m):[NaN,NaN])}um(h.graph,a)}else(!l||"none"===l)&&Q0(a)})}function Rp(c){var s=c.coordinateSystem;if("view"!==s.type)return 1;var a=c.option.nodeScaleRatio,l=s.scaleX;return((s.getZoom()-1)*a+1)/l}function Dd(c){var s=c.getVisual("symbolSize");return s instanceof Array&&(s=(s[0]+s[1])/2),+s}var fc=Math.PI,J0=[];function eb(c,s,a,l){var u=c.coordinateSystem;if(!u||"view"===u.type){var h=u.getBoundingRect(),p=c.getData(),v=p.graph,m=h.width/2+h.x,y=h.height/2+h.y,x=Math.min(h.width,h.height)/2,w=p.count();if(p.setLayout({cx:m,cy:y}),w){if(a){var D=u.pointToData(l),N=[D[0]-m,D[1]-y];Jn.normalize(N,N),Jn.scale(N,N,x),a.setLayout([m+N[0],y+N[1]],!0),tb(a,c.get(["circular","rotateLabel"]),m,y)}H2[s](c,v,p,x,m,y,w),v.eachEdge(function(se,_e){var Ie,me=b.retrieve3(se.getModel().get(["lineStyle","curveness"]),cm(se,c,_e),0),De=Jn.clone(se.node1.getLayout()),Pe=Jn.clone(se.node2.getLayout());+me&&(Ie=[m*(me*=3)+(De[0]+Pe[0])/2*(1-me),y*me+(De[1]+Pe[1])/2*(1-me)]),se.setLayout([De,Pe,Ie])})}}}var H2={value:function(c,s,a,l,u,h,p){var v=0,m=a.getSum("value"),y=2*Math.PI/(m||p);s.eachNode(function(x){var w=x.getValue("value"),D=y*(m?w:1)/2;v+=D,x.setLayout([l*Math.cos(v)+u,l*Math.sin(v)+h]),v+=D})},symbolSize:function(c,s,a,l,u,h,p){var v=0;J0.length=p;var m=Rp(c);s.eachNode(function(w){var D=Dd(w);isNaN(D)&&(D=2),D<0&&(D=0),D*=m;var I=Math.asin(D/2/l);isNaN(I)&&(I=fc/2),J0[w.dataIndex]=I,v+=2*I});var y=(2*fc-v)/p/2,x=0;s.eachNode(function(w){var D=y+J0[w.dataIndex];x+=D,(!w.getLayout()||!w.getLayout().fixed)&&w.setLayout([l*Math.cos(x)+u,l*Math.sin(x)+h]),x+=D})}};function tb(c,s,a,l){var u=c.getGraphicEl();if(u){var p=c.getModel().get(["label","rotate"])||0,v=u.getSymbolPath();if(s){var m=c.getLayout(),y=Math.atan2(m[1]-l,m[0]-a);y<0&&(y=2*Math.PI+y);var x=m[0]<a;x&&(y-=Math.PI);var w=x?"left":"right";v.setTextConfig({rotation:-y,position:w,origin:"center"});var D=v.ensureState("emphasis");b.extend(D.textConfig||(D.textConfig={}),{position:w})}else v.setTextConfig({rotation:p*=Math.PI/180})}}function U2(c){c.eachSeriesByType("graph",function(s){"circular"===s.get("layout")&&eb(s,"symbolSize")})}var kh=Jn.scaleAndAdd;function W2(c){c.eachSeriesByType("graph",function(s){var a=s.coordinateSystem;if(!a||"view"===a.type)if("force"===s.get("layout")){var l=s.preservedPoints||{},u=s.getGraph(),h=u.data,p=u.edgeData,v=s.getModel("force"),m=v.get("initLayout");s.preservedPoints?h.each(function(me){var De=h.getId(me);h.setItemLayout(me,l[De]||[NaN,NaN])}):m&&"none"!==m?"circular"===m&&eb(s,"value"):Q0(s);var y=h.getDataExtent("value"),x=p.getDataExtent("value"),w=v.get("repulsion"),D=v.get("edgeLength"),I=b.isArray(w)?w:[w,w],L=b.isArray(D)?D:[D,D];L=[L[1],L[0]];var N=h.mapArray("value",function(me,De){var Pe=h.getItemLayout(De),Ie=(0,It.NU)(me,y,I);return isNaN(Ie)&&(Ie=(I[0]+I[1])/2),{w:Ie,rep:Ie,fixed:h.getItemModel(De).get("fixed"),p:!Pe||isNaN(Pe[0])||isNaN(Pe[1])?null:Pe}}),Z=p.mapArray("value",function(me,De){var Pe=u.getEdgeByIndex(De),Ie=(0,It.NU)(me,x,L);isNaN(Ie)&&(Ie=(L[0]+L[1])/2);var ke=Pe.getModel(),Ue=b.retrieve3(Pe.getModel().get(["lineStyle","curveness"]),-cm(Pe,s,De,!0),0);return{n1:N[Pe.node1.dataIndex],n2:N[Pe.node2.dataIndex],d:Ie,curveness:Ue,ignoreForceLayout:ke.get("ignoreForceLayout")}}),se=a.getBoundingRect(),_e=function G2(c,s,a){for(var l=c,u=s,h=a.rect,p=h.width,v=h.height,m=[h.x+p/2,h.y+v/2],y=a.gravity??.1,x=0;x<l.length;x++){var w=l[x];w.p||(w.p=Jn.create(p*(Math.random()-.5)+m[0],v*(Math.random()-.5)+m[1])),w.pp=Jn.clone(w.p),w.edges=null}var L,N,D=a.friction??.6,I=D;return{warmUp:function(){I=.8*D},setFixed:function(Z){l[Z].fixed=!0},setUnfixed:function(Z){l[Z].fixed=!1},beforeStep:function(Z){L=Z},afterStep:function(Z){N=Z},step:function(Z){L&&L(l,u);for(var se=[],_e=l.length,me=0;me<u.length;me++){var De=u[me];if(!De.ignoreForceLayout){Jn.sub(se,(Ie=De.n2).p,(Pe=De.n1).p);var ke=Jn.len(se)-De.d,Ue=Ie.w/(Pe.w+Ie.w);isNaN(Ue)&&(Ue=0),Jn.normalize(se,se),!Pe.fixed&&kh(Pe.p,Pe.p,se,Ue*ke*I),!Ie.fixed&&kh(Ie.p,Ie.p,se,-(1-Ue)*ke*I)}}for(me=0;me<_e;me++)(Ye=l[me]).fixed||(Jn.sub(se,m,Ye.p),kh(Ye.p,Ye.p,se,y*I));for(me=0;me<_e;me++)for(var Pe=l[me],Ke=me+1;Ke<_e;Ke++){var Ie;Jn.sub(se,(Ie=l[Ke]).p,Pe.p),0===(ke=Jn.len(se))&&(Jn.set(se,Math.random()-.5,Math.random()-.5),ke=1);var Je=(Pe.rep+Ie.rep)/ke/ke;!Pe.fixed&&kh(Pe.pp,Pe.pp,se,Je),!Ie.fixed&&kh(Ie.pp,Ie.pp,se,-Je)}var ut=[];for(me=0;me<_e;me++){var Ye;(Ye=l[me]).fixed||(Jn.sub(ut,Ye.p,Ye.pp),kh(Ye.p,Ye.p,ut,I),Jn.copy(Ye.pp,Ye.p))}var pt=(I*=.992)<.01;N&&N(l,u,pt),Z&&Z(pt)}}}(N,Z,{rect:se,gravity:v.get("gravity"),friction:v.get("friction")});_e.beforeStep(function(me,De){for(var Pe=0,Ie=me.length;Pe<Ie;Pe++)me[Pe].fixed&&Jn.copy(me[Pe].p,u.getNodeByIndex(Pe).getLayout())}),_e.afterStep(function(me,De,Pe){for(var Ie=0,ke=me.length;Ie<ke;Ie++)me[Ie].fixed||u.getNodeByIndex(Ie).setLayout(me[Ie].p),l[h.getId(Ie)]=me[Ie].p;for(Ie=0,ke=De.length;Ie<ke;Ie++){var Ue=De[Ie],Ye=u.getEdgeByIndex(Ie),Ke=Ue.n1.p,Je=Ue.n2.p,ut=Ye.getLayout();(ut=ut?ut.slice():[])[0]=ut[0]||[],ut[1]=ut[1]||[],Jn.copy(ut[0],Ke),Jn.copy(ut[1],Je),+Ue.curveness&&(ut[2]=[(Ke[0]+Je[0])/2-(Ke[1]-Je[1])*Ue.curveness,(Ke[1]+Je[1])/2-(Je[0]-Ke[0])*Ue.curveness]),Ye.setLayout(ut)}}),s.forceLayout=_e,s.preservedPoints=l,_e.step()}else s.forceLayout=null})}function j2(c,s){var a=[];return c.eachSeriesByType("graph",function(l){var u=l.get("coordinateSystem");if(!u||"view"===u){var h=l.getData(),p=h.mapArray(function(Z){var se=h.getItemModel(Z);return[+se.get("x"),+se.get("y")]}),v=[],m=[];Zc.zk(p,v,m),m[0]-v[0]==0&&(m[0]+=1,v[0]-=1),m[1]-v[1]==0&&(m[1]+=1,v[1]-=1);var y=(m[0]-v[0])/(m[1]-v[1]),x=function nb(c,s,a){var l=(0,b.extend)(c.getBoxLayoutParams(),{aspect:a});return(0,Br.ME)(l,{width:s.getWidth(),height:s.getHeight()})}(l,s,y);isNaN(y)&&(v=[x.x,x.y],m=[x.x+x.width,x.y+x.height]);var w=m[0]-v[0],D=m[1]-v[1],I=x.width,L=x.height,N=l.coordinateSystem=new yp;N.zoomLimit=l.get("scaleLimit"),N.setBoundingRect(v[0],v[1],w,D),N.setViewRect(x.x,x.y,I,L),N.setCenter(l.get("center"),s),N.setZoom(l.get("zoom")),a.push(N)}}),a}var kS=Ai.Z.prototype,rb=aS.Z.prototype,ib=function c(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1};function ab(c){return isNaN(+c.cpx1)||isNaN(+c.cpy1)}!function(c){(0,At.ZT)(function s(){return null!==c&&c.apply(this,arguments)||this},c)}(ib);const ob=function(c){function s(a){var l=c.call(this,a)||this;return l.type="ec-line",l}return(0,At.ZT)(s,c),s.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},s.prototype.getDefaultShape=function(){return new ib},s.prototype.buildPath=function(a,l){ab(l)?kS.buildPath.call(this,a,l):rb.buildPath.call(this,a,l)},s.prototype.pointAt=function(a){return ab(this.shape)?kS.pointAt.call(this,a):rb.pointAt.call(this,a)},s.prototype.tangentAt=function(a){var l=this.shape,u=ab(l)?[l.x2-l.x1,l.y2-l.y1]:rb.tangentAt.call(this,a);return Jn.normalize(u,u)},s}(ge.ZP);var dm=["fromSymbol","toSymbol"];function hm(c){return"_"+c+"Type"}function Po(c,s,a){var l=s.getItemVisual(a,c);if(l&&"none"!==l){var u=s.getItemVisual(a,c+"Size"),h=s.getItemVisual(a,c+"Rotate"),p=s.getItemVisual(a,c+"Offset"),v=s.getItemVisual(a,c+"KeepAspect"),m=si.zp(u),y=si.Cq(p||0,m),x=si.th(l,-m[0]/2+y[0],-m[1]/2+y[1],m[0],m[1],null,v);return x.__specifiedRotation=null==h||isNaN(h)?void 0:+h*Math.PI/180||0,x.name=c,x}}function fm(c,s){c.x1=s[0][0],c.y1=s[0][1],c.x2=s[1][0],c.y2=s[1][1],c.percent=1;var a=s[2];a?(c.cpx1=a[0],c.cpy1=a[1]):(c.cpx1=NaN,c.cpy1=NaN)}const sb=function(c){function s(a,l,u){var h=c.call(this)||this;return h._createLine(a,l,u),h}return(0,At.ZT)(s,c),s.prototype._createLine=function(a,l,u){var h=a.hostModel,v=function Lp(c){var s=new ob({name:"line",subPixelOptimize:!0});return fm(s.shape,c),s}(a.getItemLayout(l));v.shape.percent=0,Sn.KZ(v,{shape:{percent:1}},h,l),this.add(v),(0,b.each)(dm,function(m){var y=Po(m,a,l);this.add(y),this[hm(m)]=a.getItemVisual(l,m)},this),this._updateCommonStl(a,l,u)},s.prototype.updateData=function(a,l,u){var h=a.hostModel,p=this.childOfName("line"),v=a.getItemLayout(l),m={shape:{}};fm(m.shape,v),Sn.D(p,m,h,l),(0,b.each)(dm,function(y){var x=a.getItemVisual(l,y),w=hm(y);if(this[w]!==x){this.remove(this.childOfName(y));var D=Po(y,a,l);this.add(D)}this[w]=x},this),this._updateCommonStl(a,l,u)},s.prototype.getLinePath=function(){return this.childAt(0)},s.prototype._updateCommonStl=function(a,l,u){var h=a.hostModel,p=this.childOfName("line"),v=u&&u.emphasisLineStyle,m=u&&u.blurLineStyle,y=u&&u.selectLineStyle,x=u&&u.labelStatesModels,w=u&&u.emphasisDisabled,D=u&&u.focus,I=u&&u.blurScope;if(!u||a.hasItemOption){var L=a.getItemModel(l),N=L.getModel("emphasis");v=N.getModel("lineStyle").getLineStyle(),m=L.getModel(["blur","lineStyle"]).getLineStyle(),y=L.getModel(["select","lineStyle"]).getLineStyle(),w=N.get("disabled"),D=N.get("focus"),I=N.get("blurScope"),x=(0,qt.k3)(L)}var Z=a.getItemVisual(l,"style"),se=Z.stroke;p.useStyle(Z),p.style.fill=null,p.style.strokeNoScale=!0,p.ensureState("emphasis").style=v,p.ensureState("blur").style=m,p.ensureState("select").style=y,(0,b.each)(dm,function(Ie){var ke=this.childOfName(Ie);if(ke){ke.setColor(se),ke.style.opacity=Z.opacity;for(var Ue=0;Ue<Wt.L1.length;Ue++){var Ye=Wt.L1[Ue],Ke=p.getState(Ye);if(Ke){var Je=Ke.style||{},ut=ke.ensureState(Ye),pt=ut.style||(ut.style={});null!=Je.stroke&&(pt[ke.__isEmptyBrush?"stroke":"fill"]=Je.stroke),null!=Je.opacity&&(pt.opacity=Je.opacity)}}ke.markRedraw()}},this);var _e=h.getRawValue(l);(0,qt.ni)(this,x,{labelDataIndex:l,labelFetcher:{getFormattedLabel:function(Ie,ke){return h.getFormattedLabel(Ie,ke,a.dataType)}},inheritColor:se||"#000",defaultOpacity:Z.opacity,defaultText:(null==_e?a.getName(l):isFinite(_e)?(0,It.NM)(_e):_e)+""});var me=this.getTextContent();if(me){var De=x.normal;me.__align=me.style.align,me.__verticalAlign=me.style.verticalAlign,me.__position=De.get("position")||"middle";var Pe=De.get("distance");(0,b.isArray)(Pe)||(Pe=[Pe,Pe]),me.__labelDistance=Pe}this.setTextConfig({position:null,local:!0,inside:!1}),(0,Wt.k5)(this,D,I,w)},s.prototype.highlight=function(){(0,Wt.fD)(this)},s.prototype.downplay=function(){(0,Wt.Mh)(this)},s.prototype.updateLayout=function(a,l){this.setLinePoints(a.getItemLayout(l))},s.prototype.setLinePoints=function(a){var l=this.childOfName("line");fm(l.shape,a),l.dirty()},s.prototype.beforeUpdate=function(){var a=this,l=a.childOfName("fromSymbol"),u=a.childOfName("toSymbol"),h=a.getTextContent();if(l||u||h&&!h.ignore){for(var p=1,v=this.parent;v;)v.scaleX&&(p/=v.scaleX),v=v.parent;var m=a.childOfName("line");if(this.__dirty||m.__dirty){var y=m.shape.percent,x=m.pointAt(0),w=m.pointAt(y),D=Jn.sub([],w,x);if(Jn.normalize(D,D),l&&(l.setPosition(x),I(l,0),l.scaleX=l.scaleY=p*y,l.markRedraw()),u&&(u.setPosition(w),I(u,1),u.scaleX=u.scaleY=p*y,u.markRedraw()),h&&!h.ignore){h.x=h.y=0,h.originX=h.originY=0;var L=void 0,N=void 0,Z=h.__labelDistance,se=Z[0]*p,_e=Z[1]*p,me=y/2,De=m.tangentAt(me),Pe=[De[1],-De[0]],Ie=m.pointAt(me);Pe[1]>0&&(Pe[0]=-Pe[0],Pe[1]=-Pe[1]);var ke=De[0]<0?-1:1;if("start"!==h.__position&&"end"!==h.__position){var Ue=-Math.atan2(De[1],De[0]);w[0]<x[0]&&(Ue=Math.PI+Ue),h.rotation=Ue}var Ye=void 0;switch(h.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":Ye=-_e,N="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":Ye=_e,N="top";break;default:Ye=0,N="middle"}switch(h.__position){case"end":h.x=D[0]*se+w[0],h.y=D[1]*_e+w[1],L=D[0]>.8?"left":D[0]<-.8?"right":"center",N=D[1]>.8?"top":D[1]<-.8?"bottom":"middle";break;case"start":h.x=-D[0]*se+x[0],h.y=-D[1]*_e+x[1],L=D[0]>.8?"right":D[0]<-.8?"left":"center",N=D[1]>.8?"bottom":D[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":h.x=se*ke+x[0],h.y=x[1]+Ye,L=De[0]<0?"right":"left",h.originX=-se*ke,h.originY=-Ye;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":h.x=Ie[0],h.y=Ie[1]+Ye,L="center",h.originY=-Ye;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":h.x=-se*ke+w[0],h.y=w[1]+Ye,L=De[0]>=0?"right":"left",h.originX=se*ke,h.originY=-Ye}h.scaleX=h.scaleY=p,h.setStyle({verticalAlign:h.__verticalAlign||N,align:h.__align||L})}}}function I(Ke,Je){var ut=Ke.__specifiedRotation;if(null==ut){var pt=m.tangentAt(Je);Ke.attr("rotation",(1===Je?-1:1)*Math.PI/2-Math.atan2(pt[1],pt[0]))}else Ke.attr("rotation",ut)}},s}(Rn.Z);function lb(c){var s=c.hostModel,a=s.getModel("emphasis");return{lineStyle:s.getModel("lineStyle").getLineStyle(),emphasisLineStyle:a.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:s.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:s.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:a.get("disabled"),blurScope:a.get("blurScope"),focus:a.get("focus"),labelStatesModels:(0,qt.k3)(s)}}function FS(c){return isNaN(c[0])||isNaN(c[1])}function pm(c){return c&&!FS(c[0])&&!FS(c[1])}const cb=function(){function c(s){this.group=new Rn.Z,this._LineCtor=s||sb}return c.prototype.updateData=function(s){var a=this;this._progressiveEls=null;var l=this,u=l.group,h=l._lineData;l._lineData=s,h||u.removeAll();var p=lb(s);s.diff(h).add(function(v){a._doAdd(s,v,p)}).update(function(v,m){a._doUpdate(h,s,m,v,p)}).remove(function(v){u.remove(h.getItemGraphicEl(v))}).execute()},c.prototype.updateLayout=function(){var s=this._lineData;!s||s.eachItemGraphicEl(function(a,l){a.updateLayout(s,l)},this)},c.prototype.incrementalPrepareUpdate=function(s){this._seriesScope=lb(s),this._lineData=null,this.group.removeAll()},c.prototype.incrementalUpdate=function(s,a){function l(v){!v.isGroup&&!function Y2(c){return c.animators&&c.animators.length>0}(v)&&(v.incremental=!0,v.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[];for(var u=s.start;u<s.end;u++)if(pm(a.getItemLayout(u))){var p=new this._LineCtor(a,u,this._seriesScope);p.traverse(l),this.group.add(p),a.setItemGraphicEl(u,p),this._progressiveEls.push(p)}},c.prototype.remove=function(){this.group.removeAll()},c.prototype.eachRendered=function(s){_n.traverseElements(this._progressiveEls||this.group,s)},c.prototype._doAdd=function(s,a,l){if(pm(s.getItemLayout(a))){var h=new this._LineCtor(s,a,l);s.setItemGraphicEl(a,h),this.group.add(h)}},c.prototype._doUpdate=function(s,a,l,u,h){var p=s.getItemGraphicEl(l);pm(a.getItemLayout(u))?(p?p.updateData(a,u,h):p=new this._LineCtor(a,u,h),a.setItemGraphicEl(u,p),this.group.add(p)):this.group.remove(p)},c}();var ub=[],gm=[],db=[],Nh=ws.Zm,Iu=Jn.distSquare,pc=Math.abs;function BS(c,s,a){for(var v,l=c[0],u=c[1],h=c[2],p=1/0,m=a*a,y=.1,x=.1;x<=.9;x+=.1)ub[0]=Nh(l[0],u[0],h[0],x),ub[1]=Nh(l[1],u[1],h[1],x),(w=pc(Iu(ub,s)-m))<p&&(p=w,v=x);for(var D=0;D<32;D++){var I=v+y;gm[0]=Nh(l[0],u[0],h[0],v),gm[1]=Nh(l[1],u[1],h[1],v),db[0]=Nh(l[0],u[0],h[0],I),db[1]=Nh(l[1],u[1],h[1],I);var w=Iu(gm,s)-m;if(pc(w)<.01)break;var L=Iu(db,s)-m;y/=2,w<0?L>=0?v+=y:v-=y:L>=0?v-=y:v+=y}return v}function hb(c,s){var a=[],l=ws.Lx,u=[[],[],[]],h=[[],[]],p=[];s/=2,c.eachEdge(function(v,m){var y=v.getLayout(),x=v.getVisual("fromSymbol"),w=v.getVisual("toSymbol");y.__original||(y.__original=[Jn.clone(y[0]),Jn.clone(y[1])],y[2]&&y.__original.push(Jn.clone(y[2])));var D=y.__original;if(null!=y[2]){if(Jn.copy(u[0],D[0]),Jn.copy(u[1],D[2]),Jn.copy(u[2],D[1]),x&&"none"!==x){var I=Dd(v.node1),L=BS(u,D[0],I*s);l(u[0][0],u[1][0],u[2][0],L,a),u[0][0]=a[3],u[1][0]=a[4],l(u[0][1],u[1][1],u[2][1],L,a),u[0][1]=a[3],u[1][1]=a[4]}w&&"none"!==w&&(I=Dd(v.node2),L=BS(u,D[1],I*s),l(u[0][0],u[1][0],u[2][0],L,a),u[1][0]=a[1],u[2][0]=a[2],l(u[0][1],u[1][1],u[2][1],L,a),u[1][1]=a[1],u[2][1]=a[2]),Jn.copy(y[0],u[0]),Jn.copy(y[1],u[2]),Jn.copy(y[2],u[1])}else Jn.copy(h[0],D[0]),Jn.copy(h[1],D[1]),Jn.sub(p,h[1],h[0]),Jn.normalize(p,p),x&&"none"!==x&&(I=Dd(v.node1),Jn.scaleAndAdd(h[0],h[0],p,I*s)),w&&"none"!==w&&(I=Dd(v.node2),Jn.scaleAndAdd(h[1],h[1],p,-I*s)),Jn.copy(y[0],h[0]),Jn.copy(y[1],h[1])})}function X2(c){return"view"===c.type}const VS=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.init=function(a,l){var u=new od,h=new cb,p=this.group;this._controller=new cp(l.getZr()),this._controllerHost={target:p},p.add(u.group),p.add(h.group),this._symbolDraw=u,this._lineDraw=h,this._firstRender=!0},s.prototype.render=function(a,l,u){var h=this,p=a.coordinateSystem;this._model=a;var v=this._symbolDraw,m=this._lineDraw,y=this.group;if(X2(p)){var x={x:p.x,y:p.y,scaleX:p.scaleX,scaleY:p.scaleY};this._firstRender?y.attr(x):Sn.D(y,x,a)}hb(a.getGraph(),Rp(a));var w=a.getData();v.updateData(w);var D=a.getEdgeData();m.updateData(D),this._updateNodeAndLinkScale(),this._updateController(a,l,u),clearTimeout(this._layoutTimeout);var I=a.forceLayout,L=a.get(["force","layoutAnimation"]);I&&this._startForceLayoutIteration(I,L);var N=a.get("layout");w.graph.eachNode(function(me){var De=me.dataIndex,Pe=me.getGraphicEl(),Ie=me.getModel();if(Pe){Pe.off("drag").off("dragend");var ke=Ie.get("draggable");ke&&Pe.on("drag",function(Ye){switch(N){case"force":I.warmUp(),!h._layouting&&h._startForceLayoutIteration(I,L),I.setFixed(De),w.setItemLayout(De,[Pe.x,Pe.y]);break;case"circular":w.setItemLayout(De,[Pe.x,Pe.y]),me.setLayout({fixed:!0},!0),eb(a,"symbolSize",me,[Ye.offsetX,Ye.offsetY]),h.updateLayout(a);break;default:w.setItemLayout(De,[Pe.x,Pe.y]),um(a.getGraph(),a),h.updateLayout(a)}}).on("dragend",function(){I&&I.setUnfixed(De)}),Pe.setDraggable(ke&&!!I,!!Ie.get("cursor")),"adjacency"===Ie.get(["emphasis","focus"])&&((0,Tr.A)(Pe).focus=me.getAdjacentDataIndices())}}),w.graph.eachEdge(function(me){var De=me.getGraphicEl(),Pe=me.getModel().get(["emphasis","focus"]);!De||"adjacency"===Pe&&((0,Tr.A)(De).focus={edge:[me.dataIndex],node:[me.node1.dataIndex,me.node2.dataIndex]})});var Z="circular"===a.get("layout")&&a.get(["circular","rotateLabel"]),se=w.getLayout("cx"),_e=w.getLayout("cy");w.graph.eachNode(function(me){tb(me,Z,se,_e)}),this._firstRender=!1},s.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},s.prototype._startForceLayoutIteration=function(a,l){var u=this;!function h(){a.step(function(p){u.updateLayout(u._model),(u._layouting=!p)&&(l?u._layoutTimeout=setTimeout(h,16):h())})}()},s.prototype._updateController=function(a,l,u){var h=this,p=this._controller,v=this._controllerHost,m=this.group;p.setPointerChecker(function(y,x,w){var D=m.getBoundingRect();return D.applyTransform(m.transform),D.contain(x,w)&&!up(y,u,a)}),X2(a.coordinateSystem)?(p.enable(a.get("roam")),v.zoomLimit=a.get("scaleLimit"),v.zoom=a.coordinateSystem.getZoom(),p.off("pan").off("zoom").on("pan",function(y){kv(v,y.dx,y.dy),u.dispatchAction({seriesId:a.id,type:"graphRoam",dx:y.dx,dy:y.dy})}).on("zoom",function(y){Nv(v,y.scale,y.originX,y.originY),u.dispatchAction({seriesId:a.id,type:"graphRoam",zoom:y.scale,originX:y.originX,originY:y.originY}),h._updateNodeAndLinkScale(),hb(a.getGraph(),Rp(a)),h._lineDraw.updateLayout(),u.updateLabelLayout()})):p.disable()},s.prototype._updateNodeAndLinkScale=function(){var a=this._model,l=a.getData(),u=Rp(a);l.eachItemGraphicEl(function(h,p){h&&h.setSymbolScale(u)})},s.prototype.updateLayout=function(a){hb(a.getGraph(),Rp(a)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},s.prototype.remove=function(a,l){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},s.type="graph",s}(ia.Z);var _5=H(5297),ds=H(9506);function vm(c,s,a,l,u){for(var h=new _5.ZP(l),p=0;p<c.length;p++)h.addNode(b.retrieve(c[p].id,c[p].name,p),p);var v=[],m=[],y=0;for(p=0;p<s.length;p++){var x=s[p],w=x.source,D=x.target;h.addEdge(w,D,y)&&(m.push(x),v.push(b.retrieve((0,xn.U5)(x.id,null),w+" > "+D)),y++)}var L,I=a.get("coordinateSystem");if("cartesian2d"===I||"polar"===I)L=(0,Ks.Z)(c,a);else{var N=ds.Z.get(I),Z=N&&N.dimensions||[];b.indexOf(Z,"value")<0&&Z.concat(["value"]);var se=(0,dt.Z)(c,{coordDimensions:Z,encodeDefine:a.getEncode()}).dimensions;(L=new xt.Z(se,a)).initData(c)}var _e=new xt.Z(["value"],a);return _e.initData(m,v),u&&u(L,_e),(0,dS.Z)({mainData:L,struct:h,structAttr:"graph",datas:{node:L,edge:_e},datasAttr:{node:"data",edge:"edgeData"}}),h.update(),h}var fb=H(1549);const zS=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.hasSymbolVisual=!0,a}return(0,At.ZT)(s,c),s.prototype.init=function(a){c.prototype.init.apply(this,arguments);var l=this;function u(){return l._categoriesData}this.legendVisualProvider=new gn(u,u),this.fillDataTextStyle(a.edges||a.links),this._updateCategoriesData()},s.prototype.mergeOption=function(a){c.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(a.edges||a.links),this._updateCategoriesData()},s.prototype.mergeDefaultAndTheme=function(a){c.prototype.mergeDefaultAndTheme.apply(this,arguments),(0,xn.Cc)(a,"edgeLabel",["show"])},s.prototype.getInitialData=function(a,l){var u=a.edges||a.links||[],h=a.data||a.nodes||[],p=this;if(h&&u){!function OS(c){!Oh(c)||(c.__curvenessList=[],c.__edgeMap={},V2(c))}(this);var v=vm(h,u,this,!0,function m(y,x){y.wrapMethod("getItemModel",function(L){var se=p._categoriesModels[L.getShallow("category")];return se&&(se.parentModel=L.parentModel,L.parentModel=se),L});var w=ka.Z.prototype.getModel;function D(L,N){var Z=w.call(this,L,N);return Z.resolveParentPath=I,Z}function I(L){if(L&&("label"===L[0]||"label"===L[1])){var N=L.slice();return"label"===L[0]?N[0]="edgeLabel":"label"===L[1]&&(N[1]="edgeLabel"),N}return L}x.wrapMethod("getItemModel",function(L){return L.resolveParentPath=I,L.getModel=D,L})});return b.each(v.edges,function(y){!function K0(c,s,a,l){if(Oh(a)){var u=lm(c,s,a),h=a.__edgeMap,p=h[z2(u)];h[u]&&!p?h[u].isForward=!0:p&&h[u]&&(p.isForward=!0,h[u].isForward=!1),h[u]=h[u]||[],h[u].push(l)}}(y.node1,y.node2,this,y.dataIndex)},this),v.data}},s.prototype.getGraph=function(){return this.getData().graph},s.prototype.getEdgeData=function(){return this.getGraph().edgeData},s.prototype.getCategoriesData=function(){return this._categoriesData},s.prototype.formatTooltip=function(a,l,u){if("edge"===u){var h=this.getData(),p=this.getDataParams(a,u),v=h.graph.getEdgeByIndex(a),m=h.getName(v.node1.dataIndex),y=h.getName(v.node2.dataIndex),x=[];return null!=m&&x.push(m),null!=y&&x.push(y),(0,da.TX)("nameValue",{name:x.join(" > "),value:p.value,noValue:null==p.value})}return(0,fb.w)({series:this,dataIndex:a,multipleSeries:l})},s.prototype._updateCategoriesData=function(){var a=b.map(this.option.categories||[],function(u){return null!=u.value?u:b.extend({value:0},u)}),l=new xt.Z(["value"],this);l.initData(a),this._categoriesData=l,this._categoriesModels=l.mapArray(function(u){return l.getItemModel(u)})},s.prototype.setZoom=function(a){this.option.zoom=a},s.prototype.setCenter=function(a){this.option.center=a},s.prototype.isAnimationEnabled=function(){return c.prototype.isAnimationEnabled.call(this)&&!("force"===this.get("layout")&&this.get(["force","layoutAnimation"]))},s.type="series.graph",s.dependencies=["grid","polar","geo","singleAxis","calendar"],s.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},s}(Xi.Z);var K2={type:"graphRoam",event:"graphRoam",update:"none"},Q2=function c(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0};const pb=function(c){function s(a){var l=c.call(this,a)||this;return l.type="pointer",l}return(0,At.ZT)(s,c),s.prototype.getDefaultShape=function(){return new Q2},s.prototype.buildPath=function(a,l){var u=Math.cos,h=Math.sin,p=l.r,v=l.width,m=l.angle,y=l.x-u(m)*v*(v>=p/3?1:2),x=l.y-h(m)*v*(v>=p/3?1:2);m=l.angle-Math.PI/2,a.moveTo(y,x),a.lineTo(l.x+u(m)*v,l.y+h(m)*v),a.lineTo(l.x+u(l.angle)*p,l.y+h(l.angle)*p),a.lineTo(l.x-u(m)*v,l.y-h(m)*v),a.lineTo(y,x)},s}(ge.ZP);function kp(c,s){var a=null==c?"":c+"";return s&&((0,b.isString)(s)?a=s.replace("{value}",a):(0,b.isFunction)(s)&&(a=s(c))),a}const Fh=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u){this.group.removeAll();var h=a.get(["axisLine","lineStyle","color"]),p=function gb(c,s){var a=c.get("center"),l=s.getWidth(),u=s.getHeight(),h=Math.min(l,u);return{cx:(0,It.GM)(a[0],s.getWidth()),cy:(0,It.GM)(a[1],s.getHeight()),r:(0,It.GM)(c.get("radius"),h/2)}}(a,u);this._renderMain(a,l,u,h,p),this._data=a.getData()},s.prototype.dispose=function(){},s.prototype._renderMain=function(a,l,u,h,p){var v=this.group,m=a.get("clockwise"),y=-a.get("startAngle")/180*Math.PI,x=-a.get("endAngle")/180*Math.PI,w=a.getModel("axisLine"),I=w.get("roundCap")?rc:yn.C,L=w.get("show"),N=w.getModel("lineStyle"),Z=N.get("width"),se=[y,x];(0,fe.L)(se,!m);for(var _e=(x=se[1])-(y=se[0]),me=y,De=0;L&&De<h.length;De++){var Ie=new I({shape:{startAngle:me,endAngle:x=y+_e*Math.min(Math.max(h[De][0],0),1),cx:p.cx,cy:p.cy,clockwise:m,r0:p.r-Z,r:p.r},silent:!0});Ie.setStyle({fill:h[De][1]}),Ie.setStyle(N.getLineStyle(["color","width"])),v.add(Ie),me=x}var ke=function(Ue){if(Ue<=0)return h[0][1];var Ye;for(Ye=0;Ye<h.length;Ye++)if(h[Ye][0]>=Ue&&(0===Ye?0:h[Ye-1][0])<Ue)return h[Ye][1];return h[Ye-1][1]};this._renderTicks(a,l,u,ke,p,y,x,m,Z),this._renderTitleAndDetail(a,l,u,ke,p),this._renderAnchor(a,p),this._renderPointer(a,l,u,ke,p,y,x,m,Z)},s.prototype._renderTicks=function(a,l,u,h,p,v,m,y,x){for(var yt,wt,w=this.group,D=p.cx,I=p.cy,L=p.r,N=+a.get("min"),Z=+a.get("max"),se=a.getModel("splitLine"),_e=a.getModel("axisTick"),me=a.getModel("axisLabel"),De=a.get("splitNumber"),Pe=_e.get("splitNumber"),Ie=(0,It.GM)(se.get("length"),L),ke=(0,It.GM)(_e.get("length"),L),Ue=v,Ye=(m-v)/De,Ke=Ye/Pe,Je=se.getModel("lineStyle").getLineStyle(),ut=_e.getModel("lineStyle").getLineStyle(),pt=se.get("distance"),kt=0;kt<=De;kt++){if(yt=Math.cos(Ue),wt=Math.sin(Ue),se.get("show")){var Yt=new Ai.Z({shape:{x1:yt*(L-(en=pt?pt+x:x))+D,y1:wt*(L-en)+I,x2:yt*(L-Ie-en)+D,y2:wt*(L-Ie-en)+I},style:Je,silent:!0});"auto"===Je.stroke&&Yt.setStyle({stroke:h(kt/De)}),w.add(Yt)}if(me.get("show")){var en=me.get("distance")+pt,dn=kp((0,It.NM)(kt/De*(Z-N)+N),me.get("formatter")),Fn=h(kt/De),zn=yt*(L-Ie-en)+D,dr=wt*(L-Ie-en)+I,br=me.get("rotate"),Fr=0;"radial"===br?(Fr=-Ue+2*Math.PI)>Math.PI/2&&(Fr+=Math.PI):"tangential"===br?Fr=-Ue-Math.PI/2:(0,b.isNumber)(br)&&(Fr=br*Math.PI/180),w.add(new _t.ZP(0===Fr?{style:(0,qt.Lr)(me,{text:dn,x:zn,y:dr,verticalAlign:wt<-.8?"top":wt>.8?"bottom":"middle",align:yt<-.4?"left":yt>.4?"right":"center"},{inheritColor:Fn}),silent:!0}:{style:(0,qt.Lr)(me,{text:dn,x:zn,y:dr,verticalAlign:"middle",align:"center"},{inheritColor:Fn}),silent:!0,originX:zn,originY:dr,rotation:Fr}))}if(_e.get("show")&&kt!==De){en=(en=_e.get("distance"))?en+x:x;for(var Ci=0;Ci<=Pe;Ci++){yt=Math.cos(Ue),wt=Math.sin(Ue);var Oi=new Ai.Z({shape:{x1:yt*(L-en)+D,y1:wt*(L-en)+I,x2:yt*(L-ke-en)+D,y2:wt*(L-ke-en)+I},silent:!0,style:ut});"auto"===ut.stroke&&Oi.setStyle({stroke:h((kt+Ci/Pe)/De)}),w.add(Oi),Ue+=Ke}Ue-=Ke}else Ue+=Ye}},s.prototype._renderPointer=function(a,l,u,h,p,v,m,y,x){var w=this.group,D=this._data,I=this._progressEls,L=[],N=a.get(["pointer","show"]),Z=a.getModel("progress"),se=Z.get("show"),_e=a.getData(),me=_e.mapDimension("value"),De=+a.get("min"),Pe=+a.get("max"),Ie=[De,Pe],ke=[v,m];function Ue(Ke,Je){var zn,pt=_e.getItemModel(Ke).getModel("pointer"),yt=(0,It.GM)(pt.get("width"),p.r),wt=(0,It.GM)(pt.get("length"),p.r),kt=a.get(["pointer","icon"]),en=pt.get("offsetCenter"),Yt=(0,It.GM)(en[0],p.r),dn=(0,It.GM)(en[1],p.r),Fn=pt.get("keepAspect");return(zn=kt?(0,si.th)(kt,Yt-yt/2,dn-wt,yt,wt,null,Fn):new pb({shape:{angle:-Math.PI/2,width:yt,r:wt,x:Yt,y:dn}})).rotation=-(Je+Math.PI/2),zn.x=p.cx,zn.y=p.cy,zn}function Ye(Ke,Je){var pt=Z.get("roundCap")?rc:yn.C,yt=Z.get("overlap"),wt=yt?Z.get("width"):x/_e.count(),Yt=new pt({shape:{startAngle:v,endAngle:Je,cx:p.cx,cy:p.cy,clockwise:y,r0:yt?p.r-wt:p.r-(Ke+1)*wt,r:yt?p.r:p.r-Ke*wt}});return yt&&(Yt.z2=Pe-_e.get(me,Ke)%Pe),Yt}(se||N)&&(_e.diff(D).add(function(Ke){var Je=_e.get(me,Ke);if(N){var ut=Ue(Ke,v);Sn.KZ(ut,{rotation:-((isNaN(+Je)?ke[0]:(0,It.NU)(Je,Ie,ke,!0))+Math.PI/2)},a),w.add(ut),_e.setItemGraphicEl(Ke,ut)}if(se){var pt=Ye(Ke,v),yt=Z.get("clip");Sn.KZ(pt,{shape:{endAngle:(0,It.NU)(Je,Ie,ke,yt)}},a),w.add(pt),(0,Tr.Q)(a.seriesIndex,_e.dataType,Ke,pt),L[Ke]=pt}}).update(function(Ke,Je){var ut=_e.get(me,Ke);if(N){var pt=D.getItemGraphicEl(Je),yt=pt?pt.rotation:v,wt=Ue(Ke,yt);wt.rotation=yt,Sn.D(wt,{rotation:-((isNaN(+ut)?ke[0]:(0,It.NU)(ut,Ie,ke,!0))+Math.PI/2)},a),w.add(wt),_e.setItemGraphicEl(Ke,wt)}if(se){var kt=I[Je],Yt=Ye(Ke,kt?kt.shape.endAngle:v),dn=Z.get("clip");Sn.D(Yt,{shape:{endAngle:(0,It.NU)(ut,Ie,ke,dn)}},a),w.add(Yt),(0,Tr.Q)(a.seriesIndex,_e.dataType,Ke,Yt),L[Ke]=Yt}}).execute(),_e.each(function(Ke){var Je=_e.getItemModel(Ke),ut=Je.getModel("emphasis"),pt=ut.get("focus"),yt=ut.get("blurScope"),wt=ut.get("disabled");if(N){var kt=_e.getItemGraphicEl(Ke),en=_e.getItemVisual(Ke,"style"),Yt=en.fill;if(kt instanceof be.ZP){var dn=kt.style;kt.useStyle((0,b.extend)({image:dn.image,x:dn.x,y:dn.y,width:dn.width,height:dn.height},en))}else kt.useStyle(en),"pointer"!==kt.type&&kt.setColor(Yt);kt.setStyle(Je.getModel(["pointer","itemStyle"]).getItemStyle()),"auto"===kt.style.fill&&kt.setStyle("fill",h((0,It.NU)(_e.get(me,Ke),Ie,[0,1],!0))),kt.z2EmphasisLift=0,(0,Wt.WO)(kt,Je),(0,Wt.k5)(kt,pt,yt,wt)}if(se){var Fn=L[Ke];Fn.useStyle(_e.getItemVisual(Ke,"style")),Fn.setStyle(Je.getModel(["progress","itemStyle"]).getItemStyle()),Fn.z2EmphasisLift=0,(0,Wt.WO)(Fn,Je),(0,Wt.k5)(Fn,pt,yt,wt)}}),this._progressEls=L)},s.prototype._renderAnchor=function(a,l){var u=a.getModel("anchor");if(u.get("show")){var p=u.get("size"),v=u.get("icon"),m=u.get("offsetCenter"),y=u.get("keepAspect"),x=(0,si.th)(v,l.cx-p/2+(0,It.GM)(m[0],l.r),l.cy-p/2+(0,It.GM)(m[1],l.r),p,p,null,y);x.z2=u.get("showAbove")?1:0,x.setStyle(u.getModel("itemStyle").getItemStyle()),this.group.add(x)}},s.prototype._renderTitleAndDetail=function(a,l,u,h,p){var v=this,m=a.getData(),y=m.mapDimension("value"),x=+a.get("min"),w=+a.get("max"),D=new Rn.Z,I=[],L=[],N=a.isAnimationEnabled(),Z=a.get(["pointer","showAbove"]);m.diff(this._data).add(function(se){I[se]=new _t.ZP({silent:!0}),L[se]=new _t.ZP({silent:!0})}).update(function(se,_e){I[se]=v._titleEls[_e],L[se]=v._detailEls[_e]}).execute(),m.each(function(se){var _e=m.getItemModel(se),me=m.get(y,se),De=new Rn.Z,Pe=h((0,It.NU)(me,[x,w],[0,1],!0)),Ie=_e.getModel("title");if(Ie.get("show")){var ke=Ie.get("offsetCenter"),Ue=p.cx+(0,It.GM)(ke[0],p.r),Ye=p.cy+(0,It.GM)(ke[1],p.r);(Ke=I[se]).attr({z2:Z?0:2,style:(0,qt.Lr)(Ie,{x:Ue,y:Ye,text:m.getName(se),align:"center",verticalAlign:"middle"},{inheritColor:Pe})}),De.add(Ke)}var Je=_e.getModel("detail");if(Je.get("show")){var ut=Je.get("offsetCenter"),pt=p.cx+(0,It.GM)(ut[0],p.r),yt=p.cy+(0,It.GM)(ut[1],p.r),wt=(0,It.GM)(Je.get("width"),p.r),kt=(0,It.GM)(Je.get("height"),p.r),en=a.get(["progress","show"])?m.getItemVisual(se,"style").fill:Pe,Ke=L[se],Yt=Je.get("formatter");Ke.attr({z2:Z?0:2,style:(0,qt.Lr)(Je,{x:pt,y:yt,text:kp(me,Yt),width:isNaN(wt)?null:wt,height:isNaN(kt)?null:kt,align:"center",verticalAlign:"middle"},{inheritColor:en})}),(0,qt.pe)(Ke,{normal:Je},me,function(Fn){return kp(Fn,Yt)}),N&&(0,qt.tD)(Ke,se,m,a,{getFormattedLabel:function(Fn,zn,dr,br,Fr,Ci){return kp(Ci?Ci.interpolatedValue:me,Yt)}}),De.add(Ke)}D.add(De)}),this.group.add(D),this._titleEls=I,this._detailEls=L},s.type="gauge",s}(ia.Z),HS=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.visualStyleAccessPath="itemStyle",a}return(0,At.ZT)(s,c),s.prototype.getInitialData=function(a,l){return vt(this,["value"])},s.type="series.gauge",s.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},s}(Xi.Z);var mb=["itemStyle","opacity"],eR=function(c){function s(a,l){var u=c.call(this)||this,h=u,p=new Ls.Z,v=new _t.ZP;return h.setTextContent(v),u.setTextGuideLine(p),u.updateData(a,l,!0),u}return(0,At.ZT)(s,c),s.prototype.updateData=function(a,l,u){var h=this,p=a.hostModel,v=a.getItemModel(l),m=a.getItemLayout(l),y=v.getModel("emphasis"),x=v.get(mb);x=x??1,u||(0,Sn.Zi)(h),h.useStyle(a.getItemVisual(l,"style")),h.style.lineJoin="round",u?(h.setShape({points:m.points}),h.style.opacity=0,Sn.KZ(h,{style:{opacity:x}},p,l)):Sn.D(h,{style:{opacity:x},shape:{points:m.points}},p,l),(0,Wt.WO)(h,v),this._updateLabel(a,l),(0,Wt.k5)(this,y.get("focus"),y.get("blurScope"),y.get("disabled"))},s.prototype._updateLabel=function(a,l){var u=this,h=this.getTextGuideLine(),p=u.getTextContent(),v=a.hostModel,m=a.getItemModel(l),x=a.getItemLayout(l).label,w=a.getItemVisual(l,"style"),D=w.fill;(0,qt.ni)(p,(0,qt.k3)(m),{labelFetcher:a.hostModel,labelDataIndex:l,defaultOpacity:w.opacity,defaultText:a.getName(l)},{normal:{align:x.textAlign,verticalAlign:x.verticalAlign}}),u.setTextConfig({local:!0,inside:!!x.inside,insideStroke:D,outsideFill:D});var I=x.linePoints;h.setShape({points:I}),u.textGuideLineConfig={anchor:I?new na.Z(I[0][0],I[0][1]):null},Sn.D(p,{style:{x:x.x,y:x.y}},v,l),p.attr({rotation:x.rotation,originX:x.x,originY:x.y,z2:10}),(0,uo.Iu)(u,(0,uo.$x)(m),{stroke:D})},s}(nl.Z);const nR=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.ignoreLabelLineUpdate=!0,a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u){var h=a.getData(),p=this._data,v=this.group;h.diff(p).add(function(m){var y=new eR(h,m);h.setItemGraphicEl(m,y),v.add(y)}).update(function(m,y){var x=p.getItemGraphicEl(y);x.updateData(h,m),v.add(x),h.setItemGraphicEl(m,x)}).remove(function(m){var y=p.getItemGraphicEl(m);Sn.XD(y,a,m)}).execute(),this._data=h},s.prototype.remove=function(){this.group.removeAll(),this._data=null},s.prototype.dispose=function(){},s.type="funnel",s}(ia.Z),iR=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.init=function(a){c.prototype.init.apply(this,arguments),this.legendVisualProvider=new gn(b.bind(this.getData,this),b.bind(this.getRawData,this)),this._defaultLabelLine(a)},s.prototype.getInitialData=function(a,l){return vt(this,{coordDimensions:["value"],encodeDefaulter:b.curry(Nt.Ss,this)})},s.prototype._defaultLabelLine=function(a){(0,xn.Cc)(a,"labelLine",["show"]);var l=a.labelLine,u=a.emphasis.labelLine;l.show=l.show&&a.label.show,u.show=u.show&&a.emphasis.label.show},s.prototype.getDataParams=function(a){var l=this.getData(),u=c.prototype.getDataParams.call(this,a),h=l.mapDimension("value"),p=l.getSum(h);return u.percent=p?+(l.get(h,a)/p*100).toFixed(2):0,u.$vars.push("percent"),u},s.type="series.funnel",s.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},s}(Xi.Z);function GS(c,s){c.eachSeriesByType("funnel",function(a){var l=a.getData(),u=l.mapDimension("value"),h=a.get("sort"),p=function aR(c,s){return Br.ME(c.getBoxLayoutParams(),{width:s.getWidth(),height:s.getHeight()})}(a,s),v=a.get("orient"),m=p.width,y=p.height,x=function US(c,s){for(var a=c.mapDimension("value"),l=c.mapArray(a,function(m){return m}),u=[],h="ascending"===s,p=0,v=c.count();p<v;p++)u[p]=p;return(0,b.isFunction)(s)?u.sort(s):"none"!==s&&u.sort(function(m,y){return h?l[m]-l[y]:l[y]-l[m]}),u}(l,h),w=p.x,D=p.y,I="horizontal"===v?[(0,It.GM)(a.get("minSize"),y),(0,It.GM)(a.get("maxSize"),y)]:[(0,It.GM)(a.get("minSize"),m),(0,It.GM)(a.get("maxSize"),m)],L=l.getDataExtent(u),N=a.get("min"),Z=a.get("max");null==N&&(N=Math.min(L[0],0)),null==Z&&(Z=L[1]);var se=a.get("funnelAlign"),_e=a.get("gap"),De=(("horizontal"===v?m:y)-_e*(l.count()-1))/l.count(),Pe=function(yt,wt){if("horizontal"===v){var kt=l.get(u,yt)||0,en=(0,It.NU)(kt,[N,Z],I,!0),Yt=void 0;switch(se){case"top":Yt=D;break;case"center":Yt=D+(y-en)/2;break;case"bottom":Yt=D+(y-en)}return[[wt,Yt],[wt,Yt+en]]}var zn,dn=l.get(u,yt)||0,Fn=(0,It.NU)(dn,[N,Z],I,!0);switch(se){case"left":zn=w;break;case"center":zn=w+(m-Fn)/2;break;case"right":zn=w+m-Fn}return[[zn,wt],[zn+Fn,wt]]};"ascending"===h&&(De=-De,_e=-_e,"horizontal"===v?w+=m:D+=y,x=x.reverse());for(var Ie=0;Ie<x.length;Ie++){var ke=x[Ie],Ue=x[Ie+1],Ye=l.getItemModel(ke);if("horizontal"===v){var Ke=Ye.get(["itemStyle","width"]);null==Ke?Ke=De:(Ke=(0,It.GM)(Ke,m),"ascending"===h&&(Ke=-Ke));var Je=Pe(ke,w),ut=Pe(Ue,w+Ke);w+=Ke+_e,l.setItemLayout(ke,{points:Je.concat(ut.slice().reverse())})}else{var pt=Ye.get(["itemStyle","height"]);null==pt?pt=De:(pt=(0,It.GM)(pt,y),"ascending"===h&&(pt=-pt)),Je=Pe(ke,D),ut=Pe(Ue,D+pt),D+=pt+_e,l.setItemLayout(ke,{points:Je.concat(ut.slice().reverse())})}}!function _b(c){var a=c.hostModel.get("orient");c.each(function(l){var w,D,I,L,u=c.getItemModel(l),p=u.getModel("label").get("position"),v=u.getModel("labelLine"),m=c.getItemLayout(l),y=m.points,x="inner"===p||"inside"===p||"center"===p||"insideLeft"===p||"insideRight"===p;if(x)"insideLeft"===p?(D=(y[0][0]+y[3][0])/2+5,I=(y[0][1]+y[3][1])/2,w="left"):"insideRight"===p?(D=(y[1][0]+y[2][0])/2-5,I=(y[1][1]+y[2][1])/2,w="right"):(D=(y[0][0]+y[1][0]+y[2][0]+y[3][0])/4,I=(y[0][1]+y[1][1]+y[2][1]+y[3][1])/4,w="center"),L=[[D,I],[D,I]];else{var N=void 0,Z=void 0,se=void 0,_e=void 0,me=v.get("length");"left"===p?(Z=(y[3][1]+y[0][1])/2,D=(se=(N=(y[3][0]+y[0][0])/2)-me)-5,w="right"):"right"===p?(Z=(y[1][1]+y[2][1])/2,D=(se=(N=(y[1][0]+y[2][0])/2)+me)+5,w="left"):"top"===p?(N=(y[3][0]+y[0][0])/2,I=(_e=(Z=(y[3][1]+y[0][1])/2)-me)-5,w="center"):"bottom"===p?(N=(y[1][0]+y[2][0])/2,I=(_e=(Z=(y[1][1]+y[2][1])/2)+me)+5,w="center"):"rightTop"===p?(N="horizontal"===a?y[3][0]:y[1][0],Z="horizontal"===a?y[3][1]:y[1][1],"horizontal"===a?(I=(_e=Z-me)-5,w="center"):(D=(se=N+me)+5,w="top")):"rightBottom"===p?(N=y[2][0],Z=y[2][1],"horizontal"===a?(I=(_e=Z+me)+5,w="center"):(D=(se=N+me)+5,w="bottom")):"leftTop"===p?(N=y[0][0],Z="horizontal"===a?y[0][1]:y[1][1],"horizontal"===a?(I=(_e=Z-me)-5,w="center"):(D=(se=N-me)-5,w="right")):"leftBottom"===p?(N="horizontal"===a?y[1][0]:y[3][0],Z="horizontal"===a?y[1][1]:y[2][1],"horizontal"===a?(I=(_e=Z+me)+5,w="center"):(D=(se=N-me)-5,w="right")):(N=(y[1][0]+y[2][0])/2,Z=(y[1][1]+y[2][1])/2,"horizontal"===a?(I=(_e=Z+me)+5,w="center"):(D=(se=N+me)+5,w="left")),"horizontal"===a?D=se=N:I=_e=Z,L=[[N,Z],[se,_e]]}m.label={linePoints:L,x:D,y:I,verticalAlign:"middle",textAlign:w,inside:x}})}(l)})}function bb(c,s,a,l){for(var u=[],h=0;h<a.length;h++){var p=a[h],v=c.get(c.mapDimension(p),s);lR(v,l.getAxis(p).type)||u.push(l.dataToPoint(v,p))}return u}function Pu(c,s,a,l,u){var h=bb(c,a,l,u),p=new Ls.Z({shape:{points:h},z2:10});return s.add(p),c.setItemGraphicEl(a,p),p}function xb(c){var s=c.get("smooth",!0);return!0===s&&(s=.3),s=(0,It.FK)(s),(0,b.eqNaN)(s)&&(s=0),{smooth:s}}function mm(c,s,a,l){c.useStyle(s.getItemVisual(a,"style")),c.style.fill=null,c.setShape("smooth",l.smooth);var u=s.getItemModel(a),h=u.getModel("emphasis");(0,Wt.WO)(c,u,"lineStyle"),(0,Wt.k5)(c,h.get("focus"),h.get("blurScope"),h.get("disabled"))}function lR(c,s){return"category"===s?null==c:null==c||isNaN(c)}const b5=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a._dataGroup=new Rn.Z,a._initialized=!1,a}return(0,At.ZT)(s,c),s.prototype.init=function(){this.group.add(this._dataGroup)},s.prototype.render=function(a,l,u,h){this._progressiveEls=null;var p=this._dataGroup,v=a.getData(),m=this._data,y=a.coordinateSystem,x=y.dimensions,w=xb(a);if(v.diff(m).add(function D(Z){mm(Pu(v,p,Z,x,y),v,Z,w)}).update(function I(Z,se){var _e=m.getItemGraphicEl(se),me=bb(v,Z,x,y);v.setItemGraphicEl(Z,_e),Sn.D(_e,{shape:{points:me}},a,Z),(0,Sn.Zi)(_e),mm(_e,v,Z,w)}).remove(function L(Z){var se=m.getItemGraphicEl(Z);p.remove(se)}).execute(),!this._initialized){this._initialized=!0;var N=function WS(c,s,a){var l=c.model,u=c.getRect(),h=new Mi.Z({shape:{x:u.x,y:u.y,width:u.width,height:u.height}}),p="horizontal"===l.get("layout")?"width":"height";return h.setShape(p,0),Sn.KZ(h,{shape:{width:u.width,height:u.height}},s,a),h}(y,a,function(){setTimeout(function(){p.removeClipPath()})});p.setClipPath(N)}this._data=v},s.prototype.incrementalPrepareRender=function(a,l,u){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},s.prototype.incrementalRender=function(a,l,u){for(var h=l.getData(),p=l.coordinateSystem,v=p.dimensions,m=xb(l),y=this._progressiveEls=[],x=a.start;x<a.end;x++){var w=Pu(h,this._dataGroup,x,v,p);w.incremental=!0,mm(w,h,x,m),y.push(w)}},s.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},s.type="parallel",s}(ia.Z);function cR(c){var s=c.ecModel.getComponent("parallel",c.get("parallelIndex"));if(s){var a={};return(0,b.each)(s.dimensions,function(l){var u=function jS(c){return+c.replace("dim","")}(l);a[l]=u}),a}}const ZS=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.visualStyleAccessPath="lineStyle",a.visualDrawType="stroke",a}return(0,At.ZT)(s,c),s.prototype.getInitialData=function(a,l){return(0,Ks.Z)(null,this,{useEncodeDefaulter:(0,b.bind)(cR,null,this)})},s.prototype.getRawIndicesByActiveState=function(a){var l=this.coordinateSystem,u=this.getData(),h=[];return l.eachActiveState(u,function(p,v){a===p&&h.push(u.getRawIndex(v))}),h},s.type="series.parallel",s.dependencies=["parallel"],s.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},s}(Xi.Z);var YS=["lineStyle","opacity"];const XS={seriesType:"parallel",reset:function(c,s){var a=c.coordinateSystem,l={normal:c.get(["lineStyle","opacity"]),active:c.get("activeOpacity"),inactive:c.get("inactiveOpacity")};return{progress:function(u,h){a.eachActiveState(h,function(p,v){var m=l[p];if("normal"===p&&h.hasItemOption){var y=h.getItemModel(v).get(YS,!0);null!=y&&(m=y)}h.ensureUniqueItemVisual(v,"style").opacity=m},u.start,u.end)}}}};function ym(c){(function bm(c){if(!c.parallel){var s=!1;b.each(c.series,function(a){a&&"parallel"===a.type&&(s=!0)}),s&&(c.parallel=[{}])}})(c),function $S(c){var s=xn.kF(c.parallelAxis);b.each(s,function(a){if(b.isObject(a)){var l=a.parallelIndex||0,u=xn.kF(c.parallel)[l];u&&u.parallelAxisDefault&&b.merge(a,u.parallelAxisDefault,!1)}})}(c)}var KS=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u){this._model=a,this._api=u,this._handlers||(this._handlers={},(0,b.each)(Sb,function(h,p){u.getZr().on(p,this._handlers[p]=(0,b.bind)(h,this))},this)),(0,Uo.T9)(this,"_throttledDispatchExpand",a.get("axisExpandRate"),"fixRate")},s.prototype.dispose=function(a,l){(0,Uo.ZH)(this,"_throttledDispatchExpand"),(0,b.each)(this._handlers,function(u,h){l.getZr().off(h,u)}),this._handlers=null},s.prototype._throttledDispatchExpand=function(a){this._dispatchExpand(a)},s.prototype._dispatchExpand=function(a){a&&this._api.dispatchAction((0,b.extend)({type:"parallelAxisExpand"},a))},s.type="parallel",s}(va.Z),Sb={mousedown:function(c){Md(this,"click")&&(this._mouseDownPoint=[c.offsetX,c.offsetY])},mouseup:function(c){var s=this._mouseDownPoint;if(Md(this,"click")&&s){var a=[c.offsetX,c.offsetY];if(Math.pow(s[0]-a[0],2)+Math.pow(s[1]-a[1],2)>5)return;var u=this._model.coordinateSystem.getSlidedAxisExpandWindow([c.offsetX,c.offsetY]);"none"!==u.behavior&&this._dispatchExpand({axisExpandWindow:u.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(c){if(!this._mouseDownPoint&&Md(this,"mousemove")){var s=this._model,a=s.coordinateSystem.getSlidedAxisExpandWindow([c.offsetX,c.offsetY]),l=a.behavior;"jump"===l&&this._throttledDispatchExpand.debounceNextCall(s.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===l?null:{axisExpandWindow:a.axisExpandWindow,animation:"jump"===l?null:{duration:0}})}}};function Md(c,s){var a=c._model;return a.get("axisExpandable")&&a.get("axisExpandTriggerOn")===s}const uR=KS,dR=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.init=function(){c.prototype.init.apply(this,arguments),this.mergeOption({})},s.prototype.mergeOption=function(a){a&&b.merge(this.option,a,!0),this._initDimensions()},s.prototype.contains=function(a,l){var u=a.get("parallelIndex");return null!=u&&l.getComponent("parallel",u)===this},s.prototype.setAxisExpand=function(a){b.each(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(l){a.hasOwnProperty(l)&&(this.option[l]=a[l])},this)},s.prototype._initDimensions=function(){var a=this.dimensions=[],l=this.parallelAxisIndex=[],u=b.filter(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(h){return(h.get("parallelIndex")||0)===this.componentIndex},this);b.each(u,function(h){a.push("dim"+h.get("dim")),l.push(h.componentIndex)})},s.type="parallel",s.dependencies=["parallelAxis"],s.layoutMode="box",s.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},s}(ma.Z),qS=function(c){function s(a,l,u,h,p){var v=c.call(this,a,l,u)||this;return v.type=h||"value",v.axisIndex=p,v}return(0,At.ZT)(s,c),s.prototype.isHorizontal=function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")},s}(fo.Z);function Kc(c,s,a,l,u,h){c=c||0;var p=a[1]-a[0];if(null!=u&&(u=Np(u,[0,p])),null!=h&&(h=Math.max(h,u??0)),"all"===l){var v=Math.abs(s[1]-s[0]);v=Np(v,[0,p]),u=h=Np(v,[u,h]),l=0}s[0]=Np(s[0],a),s[1]=Np(s[1],a);var m=xm(s,l);s[l]+=c;var w,y=u||0,x=a.slice();return m.sign<0?x[0]+=y:x[1]-=y,s[l]=Np(s[l],x),w=xm(s,l),null!=u&&(w.sign!==m.sign||w.span<u)&&(s[1-l]=s[l]+m.sign*u),w=xm(s,l),null!=h&&w.span>h&&(s[1-l]=s[l]+w.sign*h),s}function xm(c,s){var a=c[s]-c[1-s];return{span:Math.abs(a),sign:a>0?-1:a<0?1:s?-1:1}}function Np(c,s){return Math.min(null!=s[1]?s[1]:1/0,Math.max(null!=s[0]?s[0]:-1/0,c))}var Cm=b.each,JS=Math.min,Db=Math.max,eD=Math.floor,fR=Math.ceil,ol=It.NM,pR=Math.PI;function wm(c,s){return JS(Db(c,s[0]),s[1])}function gR(c,s){var a=s.layoutLength/(s.axisCount-1);return{position:a*c,axisNameAvailableWidth:a,axisLabelShow:!0}}function vR(c,s){var v,x,l=s.axisExpandWidth,h=s.axisCollapseWidth,p=s.winInnerIndices,m=h,y=!1;return c<p[0]?(v=c*h,x=h):c<=p[1]?(v=s.axisExpandWindow0Pos+c*l-s.axisExpandWindow[0],m=l,y=!0):(v=s.layoutLength-(s.axisCount-1-c)*h,x=h),{position:v,axisNameAvailableWidth:m,axisLabelShow:y,nameTruncateMaxWidth:x}}const mR=function(){function c(s,a,l){this.type="parallel",this._axesMap=b.createHashMap(),this._axesLayout={},this.dimensions=s.dimensions,this._model=s,this._init(s,a,l)}return c.prototype._init=function(s,a,l){var h=s.parallelAxisIndex;Cm(s.dimensions,function(p,v){var m=h[v],y=a.getComponent("parallelAxis",m),x=this._axesMap.set(p,new qS(p,ki.aG(y),[0,0],y.get("type"),m));x.onBand="category"===x.type&&y.get("boundaryGap"),x.inverse=y.get("inverse"),y.axis=x,x.model=y,x.coordinateSystem=y.coordinateSystem=this},this)},c.prototype.update=function(s,a){this._updateAxesFromSeries(this._model,s)},c.prototype.containPoint=function(s){var a=this._makeLayoutInfo(),l=a.axisBase,u=a.layoutBase,h=a.pixelDimIndex,p=s[1-h],v=s[h];return p>=l&&p<=l+a.axisLength&&v>=u&&v<=u+a.layoutLength},c.prototype.getModel=function(){return this._model},c.prototype._updateAxesFromSeries=function(s,a){a.eachSeries(function(l){if(s.contains(l,a)){var u=l.getData();Cm(this.dimensions,function(h){var p=this._axesMap.get(h);p.scale.unionExtentFromData(u,u.mapDimension(h)),ki.Jk(p.scale,p.model)},this)}},this)},c.prototype.resize=function(s,a){this._rect=Br.ME(s.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()}),this._layoutAxes()},c.prototype.getRect=function(){return this._rect},c.prototype._makeLayoutInfo=function(){var L,s=this._model,a=this._rect,l=["x","y"],u=["width","height"],h=s.get("layout"),p="horizontal"===h?0:1,v=a[u[p]],m=[0,v],y=this.dimensions.length,x=wm(s.get("axisExpandWidth"),m),w=wm(s.get("axisExpandCount")||0,[0,y]),D=s.get("axisExpandable")&&y>3&&y>w&&w>1&&x>0&&v>0,I=s.get("axisExpandWindow");I?(L=wm(I[1]-I[0],m),I[1]=I[0]+L):(L=wm(x*(w-1),m),(I=[x*(s.get("axisExpandCenter")||eD(y/2))-L/2])[1]=I[0]+L);var Z=(v-L)/(y-w);Z<3&&(Z=0);var se=[eD(ol(I[0]/x,1))+1,fR(ol(I[1]/x,1))-1];return{layout:h,pixelDimIndex:p,layoutBase:a[l[p]],layoutLength:v,axisBase:a[l[1-p]],axisLength:a[u[1-p]],axisExpandable:D,axisExpandWidth:x,axisCollapseWidth:Z,axisExpandWindow:I,axisCount:y,winInnerIndices:se,axisExpandWindow0Pos:Z/x*I[0]}},c.prototype._layoutAxes=function(){var s=this._rect,a=this._axesMap,l=this.dimensions,u=this._makeLayoutInfo(),h=u.layout;a.each(function(p){var v=[0,u.axisLength],m=p.inverse?1:0;p.setExtent(v[m],v[1-m])}),Cm(l,function(p,v){var m=(u.axisExpandable?vR:gR)(v,u),y={horizontal:{x:m.position,y:u.axisLength},vertical:{x:0,y:m.position}},w=[y[h].x+s.x,y[h].y+s.y],D={horizontal:pR/2,vertical:0}[h],I=xi.create();xi.rotate(I,I,D),xi.translate(I,I,w),this._axesLayout[p]={position:w,rotation:D,transform:I,axisNameAvailableWidth:m.axisNameAvailableWidth,axisLabelShow:m.axisLabelShow,nameTruncateMaxWidth:m.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},c.prototype.getAxis=function(s){return this._axesMap.get(s)},c.prototype.dataToPoint=function(s,a){return this.axisCoordToPoint(this._axesMap.get(a).dataToCoord(s),a)},c.prototype.eachActiveState=function(s,a,l,u){null==l&&(l=0),null==u&&(u=s.count());var h=this._axesMap,p=this.dimensions,v=[],m=[];b.each(p,function(Z){v.push(s.mapDimension(Z)),m.push(h.get(Z).model)});for(var y=this.hasAxisBrushed(),x=l;x<u;x++){var w=void 0;if(y){w="active";for(var D=s.getValues(v,x),I=0,L=p.length;I<L;I++)if("inactive"===m[I].getActiveState(D[I])){w="inactive";break}}else w="normal";a(w,x)}},c.prototype.hasAxisBrushed=function(){for(var s=this.dimensions,a=this._axesMap,l=!1,u=0,h=s.length;u<h;u++)"normal"!==a.get(s[u]).model.getActiveState()&&(l=!0);return l},c.prototype.axisCoordToPoint=function(s,a){return _n.applyTransform([s,0],this._axesLayout[a].transform)},c.prototype.getAxisLayout=function(s){return b.clone(this._axesLayout[s])},c.prototype.getSlidedAxisExpandWindow=function(s){var a=this._makeLayoutInfo(),l=a.pixelDimIndex,u=a.axisExpandWindow.slice(),h=u[1]-u[0],p=[0,a.axisExpandWidth*(a.axisCount-1)];if(!this.containPoint(s))return{behavior:"none",axisExpandWindow:u};var m,v=s[l]-a.layoutBase-a.axisExpandWindow0Pos,y="slide",x=a.axisCollapseWidth,w=this._model.get("axisExpandSlideTriggerArea"),D=null!=w[0];if(x)D&&x&&v<h*w[0]?(y="jump",m=v-h*w[2]):D&&x&&v>h*(1-w[0])?(y="jump",m=v-h*(1-w[2])):(m=v-h*w[1])>=0&&(m=v-h*(1-w[1]))<=0&&(m=0),(m*=a.axisExpandWidth/x)?Kc(m,u,p,"all"):y="none";else{var I=u[1]-u[0];(u=[Db(0,p[1]*v/I-I/2)])[1]=JS(p[1],u[0]+I),u[0]=u[1]-I}return{axisExpandWindow:u,behavior:y}},c}(),yR={create:function nD(c,s){var a=[];return c.eachComponent("parallel",function(l,u){var h=new mR(l,c,s);h.name="parallel_"+u,h.resize(l,s),l.coordinateSystem=h,h.model=l,a.push(h)}),c.eachSeries(function(l){if("parallel"===l.get("coordinateSystem")){var u=l.getReferringComponents("parallel",xn.C6).models[0];l.coordinateSystem=u.coordinateSystem}}),a}};var rD=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.activeIntervals=[],a}return(0,At.ZT)(s,c),s.prototype.getAreaSelectStyle=function(){return(0,U0.Z)([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},s.prototype.setActiveIntervals=function(a){var l=this.activeIntervals=b.clone(a);if(l)for(var u=l.length-1;u>=0;u--)It.dt(l[u])},s.prototype.getActiveState=function(a){var l=this.activeIntervals;if(!l.length)return"normal";if(null==a||isNaN(+a))return"inactive";if(1===l.length){var u=l[0];if(u[0]<=a&&a<=u[1])return"active"}else for(var h=0,p=l.length;h<p;h++)if(l[h][0]<=a&&a<=l[h][1])return"active";return"inactive"},s}(ma.Z);b.mixin(rD,$f.W);const Vr=rD;var Dt=!0,Bh=Math.min,Td=Math.max,bR=Math.pow,Mb="globalPan",wR={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},SR={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},DR={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},aD=0,oD=function(c){function s(a){var l=c.call(this)||this;return l._track=[],l._covers=[],l._handlers={},l._zr=a,l.group=new Rn.Z,l._uid="brushController_"+aD++,(0,b.each)(C5,function(u,h){this._handlers[h]=(0,b.bind)(u,this)},l),l}return(0,At.ZT)(s,c),s.prototype.enableBrush=function(a){return this._brushType&&this._doDisableBrush(),a.brushType&&this._doEnableBrush(a),this},s.prototype._doEnableBrush=function(a){var l=this._zr;this._enableGlobalPan||function WP(c,s,a){fd(c)[s]=a}(l,Mb,this._uid),(0,b.each)(this._handlers,function(u,h){l.on(h,u)}),this._brushType=a.brushType,this._brushOption=(0,b.merge)((0,b.clone)(DR),a,!0)},s.prototype._doDisableBrush=function(){var a=this._zr;(function cc(c,s,a){var l=fd(c);l[s]===a&&(l[s]=null)})(a,Mb,this._uid),(0,b.each)(this._handlers,function(l,u){a.off(u,l)}),this._brushType=this._brushOption=null},s.prototype.setPanels=function(a){if(a&&a.length){var l=this._panels={};(0,b.each)(a,function(u){l[u.panelId]=(0,b.clone)(u)})}else this._panels=null;return this},s.prototype.mount=function(a){this._enableGlobalPan=(a=a||{}).enableGlobalPan;var l=this.group;return this._zr.add(l),l.attr({x:a.x||0,y:a.y||0,rotation:a.rotation||0,scaleX:a.scaleX||1,scaleY:a.scaleY||1}),this._transform=l.getLocalTransform(),this},s.prototype.updateCovers=function(a){a=(0,b.map)(a,function(D){return(0,b.merge)((0,b.clone)(DR),D,!0)});var u=this._covers,h=this._covers=[],p=this,v=this._creatingCover;return new dc.Z(u,a,function y(D,I){return m(D.__brushOption,I)},m).add(x).update(x).remove(function w(D){u[D]!==v&&p.group.remove(u[D])}).execute(),this;function m(D,I){return(null!=D.id?D.id:"\0-brush-index-"+I)+"-"+D.brushType}function x(D,I){var L=a[D];if(null!=I&&u[I]===v)h[D]=u[I];else{var N=h[D]=null!=I?(u[I].__brushOption=L,u[I]):sD(p,Wa(p,L));Tb(p,N)}}},s.prototype.unmount=function(){return this.enableBrush(!1),Eb(this),this._zr.remove(this.group),this},s.prototype.dispose=function(){this.unmount(),this.off()},s}(ap.Z);function Wa(c,s){var a=Bp[s.brushType].createCover(c,s);return a.__brushOption=s,Dm(a,s),c.group.add(a),a}function sD(c,s){var a=lD(s);return a.endCreating&&(a.endCreating(c,s),Dm(s,s.__brushOption)),s}function Sm(c,s){var a=s.__brushOption;lD(s).updateCoverShape(c,s,a.range,a)}function Dm(c,s){var a=s.z;null==a&&(a=1e4),c.traverse(function(l){l.z=a,l.z2=a})}function Tb(c,s){lD(s).updateCommon(c,s),Sm(c,s)}function lD(c){return Bp[c.__brushOption.brushType]}function cD(c,s,a){var l=c._panels;if(!l)return Dt;var u,h=c._transform;return(0,b.each)(l,function(p){p.isTargetByCursor(s,a,h)&&(u=p)}),u}function MR(c,s){var a=c._panels;if(!a)return Dt;var l=s.__brushOption.panelId;return null!=l?a[l]:Dt}function Eb(c){var s=c._covers,a=s.length;return(0,b.each)(s,function(l){c.group.remove(l)},c),s.length=0,!!a}function Ru(c,s){var a=(0,b.map)(c._covers,function(l){var u=l.__brushOption,h=(0,b.clone)(u.range);return{brushType:u.brushType,panelId:u.panelId,range:h}});c.trigger("brush",{areas:a,isEnd:!!s.isEnd,removeOnClick:!!s.removeOnClick})}function uD(c){var s=c.length-1;return s<0&&(s=0),[c[0],c[s]]}function Ed(c,s,a,l){var u=new Rn.Z;return u.add(new Mi.Z({name:"main",style:Ab(a),silent:!0,draggable:!0,cursor:"move",drift:(0,b.curry)(hD,c,s,u,["n","s","w","e"]),ondragend:(0,b.curry)(Ru,s,{isEnd:!0})})),(0,b.each)(l,function(h){u.add(new Mi.Z({name:h.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:(0,b.curry)(hD,c,s,u,h),ondragend:(0,b.curry)(Ru,s,{isEnd:!0})}))}),u}function dD(c,s,a,l){var u=l.brushStyle.lineWidth||0,h=Td(u,6),p=a[0][0],v=a[1][0],m=p-u/2,y=v-u/2,x=a[0][1],w=a[1][1],D=x-h+u/2,I=w-h+u/2,L=x-p,N=w-v,Z=L+u,se=N+u;sl(c,s,"main",p,v,L,N),l.transformable&&(sl(c,s,"w",m,y,h,se),sl(c,s,"e",D,y,h,se),sl(c,s,"n",m,y,Z,h),sl(c,s,"s",m,I,Z,h),sl(c,s,"nw",m,y,h,h),sl(c,s,"ne",D,y,h,h),sl(c,s,"sw",m,I,h,h),sl(c,s,"se",D,I,h,h))}function Mm(c,s){var a=s.__brushOption,l=a.transformable,u=s.childAt(0);u.useStyle(Ab(a)),u.attr({silent:!l,cursor:l?"move":"default"}),(0,b.each)([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(h){var p=s.childOfName(h.join("")),v=1===h.length?Pb(c,h[0]):function ER(c,s){var a=[Pb(c,s[0]),Pb(c,s[1])];return("e"===a[0]||"w"===a[0])&&a.reverse(),a.join("")}(c,h);p&&p.attr({silent:!l,invisible:!l,cursor:l?SR[v]+"-resize":null})})}function sl(c,s,a,l,u,h,p){var v=s.childOfName(a);v&&v.setShape(function fD(c){var s=Bh(c[0][0],c[1][0]),a=Bh(c[0][1],c[1][1]);return{x:s,y:a,width:Td(c[0][0],c[1][0])-s,height:Td(c[0][1],c[1][1])-a}}(Lb(c,s,[[l,u],[l+h,u+p]])))}function Ab(c){return(0,b.defaults)({strokeNoScale:!0},c.brushStyle)}function Ib(c,s,a,l){var u=[Bh(c,a),Bh(s,l)],h=[Td(c,a),Td(s,l)];return[[u[0],h[0]],[u[1],h[1]]]}function Pb(c,s){var u=_n.transformDirection({w:"left",e:"right",n:"top",s:"bottom"}[s],function TR(c){return _n.getTransform(c.group)}(c));return{left:"w",right:"e",top:"n",bottom:"s"}[u]}function hD(c,s,a,l,u,h){var p=a.__brushOption,v=c.toRectRange(p.range),m=Rb(s,u,h);(0,b.each)(l,function(y){var x=wR[y];v[x[0]][x[1]]+=m[x[0]]}),p.range=c.fromRectRange(Ib(v[0][0],v[1][0],v[0][1],v[1][1])),Tb(s,a),Ru(s,{isEnd:!1})}function AR(c,s,a,l){var u=s.__brushOption.range,h=Rb(c,a,l);(0,b.each)(u,function(p){p[0]+=h[0],p[1]+=h[1]}),Tb(c,s),Ru(c,{isEnd:!1})}function Rb(c,s,a){var l=c.group,u=l.transformCoordToLocal(s,a),h=l.transformCoordToLocal(0,0);return[u[0]-h[0],u[1]-h[1]]}function Lb(c,s,a){var l=MR(c,s);return l&&l!==Dt?l.clipPath(a,c._transform):(0,b.clone)(a)}function Fp(c){var s=c.event;s.preventDefault&&s.preventDefault()}function gD(c,s,a){return c.childOfName("main").contain(s,a)}function Tm(c,s,a,l){var v,u=c._creatingCover,h=c._creatingPanel,p=c._brushOption;if(c._track.push(a.slice()),function x5(c){var s=c._track;if(!s.length)return!1;var a=s[s.length-1],l=s[0],u=a[0]-l[0],h=a[1]-l[1];return bR(u*u+h*h,.5)>6}(c)||u){if(h&&!u){"single"===p.brushMode&&Eb(c);var m=(0,b.clone)(p);m.brushType=vD(m.brushType,h),m.panelId=h===Dt?null:h.panelId,u=c._creatingCover=Wa(c,m),c._covers.push(u)}if(u){var y=Bp[vD(c._brushType,h)];u.__brushOption.range=y.getCreatingRange(Lb(c,u,c._track)),l&&(sD(c,u),y.updateCommon(c,u)),Sm(c,u),v={isEnd:l}}}else l&&"single"===p.brushMode&&p.removeOnClick&&cD(c,s,a)&&Eb(c)&&(v={isEnd:l,removeOnClick:!0});return v}function vD(c,s){return"auto"===c?s.defaultBrushType:c}var C5={mousedown:function(c){if(this._dragging)Xe(this,c);else if(!c.target||!c.target.draggable){Fp(c);var s=this.group.transformCoordToLocal(c.offsetX,c.offsetY);this._creatingCover=null,(this._creatingPanel=cD(this,c,s))&&(this._dragging=!0,this._track=[s.slice()])}},mousemove:function(c){var l=this.group.transformCoordToLocal(c.offsetX,c.offsetY);if(function pD(c,s,a){if(c._brushType&&!function gc(c,s,a){var l=c._zr;return s<0||s>l.getWidth()||a<0||a>l.getHeight()}(c,s.offsetX,s.offsetY)){var l=c._zr,u=c._covers,h=cD(c,s,a);if(!c._dragging)for(var p=0;p<u.length;p++){var v=u[p].__brushOption;if(h&&(h===Dt||v.panelId===h.panelId)&&Bp[v.brushType].contain(u[p],a[0],a[1]))return}h&&l.setCursorStyle("crosshair")}}(this,c,l),this._dragging){Fp(c);var u=Tm(this,c,l,!1);u&&Ru(this,u)}},mouseup:function(c){Xe(this,c)}};function Xe(c,s){if(c._dragging){Fp(s);var u=c.group.transformCoordToLocal(s.offsetX,s.offsetY),h=Tm(c,s,u,!0);c._dragging=!1,c._track=[],c._creatingCover=null,h&&Ru(c,h)}}var Bp={lineX:Vp(0),lineY:Vp(1),rect:{createCover:function(c,s){function a(l){return l}return Ed({toRectRange:a,fromRectRange:a},c,s,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(c){var s=uD(c);return Ib(s[1][0],s[1][1],s[0][0],s[0][1])},updateCoverShape:function(c,s,a,l){dD(c,s,a,l)},updateCommon:Mm,contain:gD},polygon:{createCover:function(c,s){var a=new Rn.Z;return a.add(new Ls.Z({name:"main",style:Ab(s),silent:!0})),a},getCreatingRange:function(c){return c},endCreating:function(c,s){s.remove(s.childAt(0)),s.add(new nl.Z({name:"main",draggable:!0,drift:(0,b.curry)(AR,c,s),ondragend:(0,b.curry)(Ru,c,{isEnd:!0})}))},updateCoverShape:function(c,s,a,l){s.childAt(0).setShape({points:Lb(c,s,a)})},updateCommon:Mm,contain:gD}};function Vp(c){return{createCover:function(s,a){return Ed({toRectRange:function(l){var u=[l,[0,100]];return c&&u.reverse(),u},fromRectRange:function(l){return l[c]}},s,a,[[["w"],["e"]],[["n"],["s"]]][c])},getCreatingRange:function(s){var a=uD(s);return[Bh(a[0][c],a[1][c]),Td(a[0][c],a[1][c])]},updateCoverShape:function(s,a,l,u){var h,p=MR(s,a);if(p!==Dt&&p.getLinearBrushOtherExtent)h=p.getLinearBrushOtherExtent(c);else{var v=s._zr;h=[0,[v.getWidth(),v.getHeight()][1-c]]}var m=[l,h];c&&m.reverse(),dD(s,a,m,u)},updateCommon:Mm,contain:gD}}const Fs=oD;function Ob(c){return c=Rl(c),function(s){return _n.clipPointsByRect(s,c)}}function mD(c,s){return c=Rl(c),function(a){var l=s??a,h=l?c.x:c.y;return[h,h+((l?c.width:c.height)||0)]}}function Em(c,s,a){var l=Rl(c);return function(u,h){return l.contain(h[0],h[1])&&!up(u,s,a)}}function Rl(c){return yr.Z.create(c)}var kb=["axisLine","axisTickLabel","axisName"];const S5=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.init=function(a,l){c.prototype.init.apply(this,arguments),(this._brushController=new Fs(l.getZr())).on("brush",b.bind(this._onBrush,this))},s.prototype.render=function(a,l,u,h){if(!function Nb(c,s,a){return a&&"axisAreaSelect"===a.type&&s.findComponents({mainType:"parallelAxis",query:a})[0]===c}(a,l,h)){this.axisModel=a,this.api=u,this.group.removeAll();var p=this._axisGroup;if(this._axisGroup=new Rn.Z,this.group.add(this._axisGroup),a.get("show")){var v=function yD(c,s){return s.getComponent("parallel",c.get("parallelIndex"))}(a,l),m=v.coordinateSystem,y=a.getAreaSelectStyle(),x=y.width,D=m.getAxisLayout(a.axis.dim),I=b.extend({strokeContainThreshold:x},D),L=new Ao(a,I);b.each(kb,L.add,L),this._axisGroup.add(L.getGroup()),this._refreshBrushController(I,y,a,v,x,u),_n.groupTransition(p,this._axisGroup,a)}}},s.prototype._refreshBrushController=function(a,l,u,h,p,v){var m=u.axis.getExtent(),y=m[1]-m[0],x=Math.min(30,.1*Math.abs(y)),w=yr.Z.create({x:m[0],y:-p/2,width:y,height:p});w.x-=x,w.width+=2*x,this._brushController.mount({enableGlobalPan:!0,rotation:a.rotation,x:a.position[0],y:a.position[1]}).setPanels([{panelId:"pl",clipPath:Ob(w),isTargetByCursor:Em(w,v,h),getLinearBrushOtherExtent:mD(w,0)}]).enableBrush({brushType:"lineX",brushStyle:l,removeOnClick:!0}).updateCovers(function w5(c){var s=c.axis;return b.map(c.activeIntervals,function(a){return{brushType:"lineX",panelId:"pl",range:[s.dataToCoord(a[0],!0),s.dataToCoord(a[1],!0)]}})}(u))},s.prototype._onBrush=function(a){var u=this.axisModel,h=u.axis,p=b.map(a.areas,function(v){return[h.coordToData(v.range[0],!0),h.coordToData(v.range[1],!0)]});(!u.option.realtime===a.isEnd||a.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:u.id,intervals:p})},s.prototype.dispose=function(){this._brushController.dispose()},s.type="parallelAxis",s}(va.Z);var Am={type:"axisAreaSelect",event:"axisAreaSelected"},Fb={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function Pm(c){c.registerComponentView(uR),c.registerComponentModel(dR),c.registerCoordinateSystem("parallel",yR),c.registerPreprocessor(ym),c.registerComponentModel(Vr),c.registerComponentView(S5),Qf(c,"parallel",Vr,Fb),function Im(c){c.registerAction(Am,function(s,a){a.eachComponent({mainType:"parallelAxis",query:s},function(l){l.axis.model.setActiveIntervals(s.intervals)})}),c.registerAction("parallelAxisExpand",function(s,a){a.eachComponent({mainType:"parallel",query:s},function(l){l.setAxisExpand(s)})})}(c)}var D5=function c(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0},IR=function(c){function s(a){return c.call(this,a)||this}return(0,At.ZT)(s,c),s.prototype.getDefaultShape=function(){return new D5},s.prototype.buildPath=function(a,l){var u=l.extent;a.moveTo(l.x1,l.y1),a.bezierCurveTo(l.cpx1,l.cpy1,l.cpx2,l.cpy2,l.x2,l.y2),"vertical"===l.orient?(a.lineTo(l.x2+u,l.y2),a.bezierCurveTo(l.cpx2+u,l.cpy2,l.cpx1+u,l.cpy1,l.x1+u,l.y1)):(a.lineTo(l.x2,l.y2+u),a.bezierCurveTo(l.cpx2,l.cpy2+u,l.cpx1,l.cpy1+u,l.x1,l.y1+u)),a.closePath()},s.prototype.highlight=function(){(0,Wt.fD)(this)},s.prototype.downplay=function(){(0,Wt.Mh)(this)},s}(ge.ZP);const LR=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a._focusAdjacencyDisabled=!1,a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u){var h=this,p=a.getGraph(),v=this.group,m=a.layoutInfo,y=m.width,x=m.height,w=a.getData(),D=a.getData("edge"),I=a.get("orient");this._model=a,v.removeAll(),v.x=m.x,v.y=m.y,p.eachEdge(function(L){var N=new IR,Z=(0,Tr.A)(N);Z.dataIndex=L.dataIndex,Z.seriesIndex=a.seriesIndex,Z.dataType="edge";var pt,yt,wt,kt,en,Yt,dn,Fn,se=L.getModel(),_e=se.getModel("lineStyle"),me=_e.get("curveness"),De=L.node1.getLayout(),Pe=L.node1.getModel(),Ie=Pe.get("localX"),ke=Pe.get("localY"),Ue=L.node2.getLayout(),Ye=L.node2.getModel(),Ke=Ye.get("localX"),Je=Ye.get("localY"),ut=L.getLayout();switch(N.shape.extent=Math.max(1,ut.dy),N.shape.orient=I,"vertical"===I?(en=pt=(null!=Ie?Ie*y:De.x)+ut.sy,Yt=(yt=(null!=ke?ke*x:De.y)+De.dy)*(1-me)+(kt=null!=Je?Je*x:Ue.y)*me,dn=wt=(null!=Ke?Ke*y:Ue.x)+ut.ty,Fn=yt*me+kt*(1-me)):(en=(pt=(null!=Ie?Ie*y:De.x)+De.dx)*(1-me)+(wt=null!=Ke?Ke*y:Ue.x)*me,Yt=yt=(null!=ke?ke*x:De.y)+ut.sy,dn=pt*me+wt*(1-me),Fn=kt=(null!=Je?Je*x:Ue.y)+ut.ty),N.setShape({x1:pt,y1:yt,x2:wt,y2:kt,cpx1:en,cpy1:Yt,cpx2:dn,cpy2:Fn}),N.useStyle(_e.getItemStyle()),N.style.fill){case"source":N.style.fill=L.node1.getVisual("color"),N.style.decal=L.node1.getVisual("style").decal;break;case"target":N.style.fill=L.node2.getVisual("color"),N.style.decal=L.node2.getVisual("style").decal;break;case"gradient":var zn=L.node1.getVisual("color"),dr=L.node2.getVisual("color");(0,b.isString)(zn)&&(0,b.isString)(dr)&&(N.style.fill=new Hf.Z(0,0,+("horizontal"===I),+("vertical"===I),[{color:zn,offset:0},{color:dr,offset:1}]))}var br=se.getModel("emphasis");(0,Wt.WO)(N,se,"lineStyle",function(Ci){return Ci.getItemStyle()}),v.add(N),D.setItemGraphicEl(L.dataIndex,N);var Fr=br.get("focus");(0,Wt.k5)(N,"adjacency"===Fr?L.getAdjacentDataIndices():Fr,br.get("blurScope"),br.get("disabled")),(0,Tr.A)(N).dataType="edge"}),p.eachNode(function(L){var N=L.getLayout(),Z=L.getModel(),se=Z.get("localX"),_e=Z.get("localY"),me=Z.getModel("emphasis"),De=new Mi.Z({shape:{x:null!=se?se*y:N.x,y:null!=_e?_e*x:N.y,width:N.dx,height:N.dy},style:Z.getModel("itemStyle").getItemStyle(),z2:10});(0,qt.ni)(De,(0,qt.k3)(Z),{labelFetcher:a,labelDataIndex:L.dataIndex,defaultText:L.id}),De.disableLabelAnimation=!0,De.setStyle("fill",L.getVisual("color")),De.setStyle("decal",L.getVisual("style").decal),(0,Wt.WO)(De,Z),v.add(De),w.setItemGraphicEl(L.dataIndex,De),(0,Tr.A)(De).dataType="node";var Pe=me.get("focus");(0,Wt.k5)(De,"adjacency"===Pe?L.getAdjacentDataIndices():Pe,me.get("blurScope"),me.get("disabled"))}),w.eachItemGraphicEl(function(L,N){w.getItemModel(N).get("draggable")&&(L.drift=function(se,_e){h._focusAdjacencyDisabled=!0,this.shape.x+=se,this.shape.y+=_e,this.dirty(),u.dispatchAction({type:"dragNode",seriesId:a.id,dataIndex:w.getRawIndex(N),localX:this.shape.x/y,localY:this.shape.y/x})},L.ondragend=function(){h._focusAdjacencyDisabled=!1},L.draggable=!0,L.cursor="move")}),!this._data&&a.isAnimationEnabled()&&v.setClipPath(function RR(c,s,a){var l=new Mi.Z({shape:{x:c.x-10,y:c.y-10,width:0,height:c.height+20}});return Sn.KZ(l,{shape:{width:c.width+20}},s,a),l}(v.getBoundingRect(),a,function(){v.removeClipPath()})),this._data=a.getData()},s.prototype.dispose=function(){},s.type="sankey",s}(ia.Z),M5=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.getInitialData=function(a,l){var u=a.edges||a.links,h=a.data||a.nodes,p=a.levels;this.levelModels=[];for(var v=this.levelModels,m=0;m<p.length;m++)null!=p[m].depth&&p[m].depth>=0&&(v[p[m].depth]=new ka.Z(p[m],this,l));if(h&&u)return vm(h,u,this,!0,function x(w,D){w.wrapMethod("getItemModel",function(I,L){var N=I.parentModel,Z=N.getData().getItemLayout(L);if(Z){var _e=N.levelModels[Z.depth];_e&&(I.parentModel=_e)}return I}),D.wrapMethod("getItemModel",function(I,L){var N=I.parentModel,se=N.getGraph().getEdgeByIndex(L).node1.getLayout();if(se){var me=N.levelModels[se.depth];me&&(I.parentModel=me)}return I})}).data},s.prototype.setNodePosition=function(a,l){var h=(this.option.data||this.option.nodes)[a];h.localX=l[0],h.localY=l[1]},s.prototype.getGraph=function(){return this.getData().graph},s.prototype.getEdgeData=function(){return this.getGraph().edgeData},s.prototype.formatTooltip=function(a,l,u){function h(I){return isNaN(I)||null==I}if("edge"===u){var p=this.getDataParams(a,u),v=p.data,m=p.value;return(0,da.TX)("nameValue",{name:v.source+" -- "+v.target,value:m,noValue:h(m)})}var w=this.getGraph().getNodeByIndex(a).getLayout().value,D=this.getDataParams(a,u).data.name;return(0,da.TX)("nameValue",{name:null!=D?D+"":null,value:w,noValue:h(w)})},s.prototype.optionUpdated=function(){},s.prototype.getDataParams=function(a,l){var u=c.prototype.getDataParams.call(this,a,l);if(null==u.value&&"node"===l){var p=this.getGraph().getNodeByIndex(a).getLayout().value;u.value=p}return u},s.type="series.sankey",s.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},s}(Xi.Z);function OR(c,s){c.eachSeriesByType("sankey",function(a){var l=a.get("nodeWidth"),u=a.get("nodeGap"),h=function T5(c,s){return Br.ME(c.getBoxLayoutParams(),{width:s.getWidth(),height:s.getHeight()})}(a,s);a.layoutInfo=h;var p=h.width,v=h.height,m=a.getGraph(),y=m.nodes,x=m.edges;!function CD(c){b.each(c,function(s){var a=vc(s.outEdges,zp),l=vc(s.inEdges,zp),u=s.getValue()||0,h=Math.max(a,l,u);s.setLayout({value:h},!0)})}(y),function xD(c,s,a,l,u,h,p,v,m){(function kR(c,s,a,l,u,h,p){for(var v=[],m=[],y=[],x=[],w=0,D=0;D<s.length;D++)v[D]=1;for(D=0;D<c.length;D++)m[D]=c[D].inEdges.length,0===m[D]&&y.push(c[D]);for(var I=-1;y.length;){for(var L=0;L<y.length;L++){var N=y[L],Z=N.hostGraph.data.getRawDataItem(N.dataIndex),se=null!=Z.depth&&Z.depth>=0;se&&Z.depth>I&&(I=Z.depth),N.setLayout({depth:se?Z.depth:w},!0),N.setLayout("vertical"===h?{dy:a}:{dx:a},!0);for(var _e=0;_e<N.outEdges.length;_e++){var me=N.outEdges[_e];v[s.indexOf(me)]=0;var Pe=me.node2;0==--m[c.indexOf(Pe)]&&x.indexOf(Pe)<0&&x.push(Pe)}}++w,y=x,x=[]}for(D=0;D<v.length;D++)if(1===v[D])throw new Error("Sankey is a DAG, the original data has cycle!");var ke=I>w-1?I:w-1;p&&"left"!==p&&function E5(c,s,a,l){if("right"===s){for(var u=[],h=c,p=0;h.length;){for(var v=0;v<h.length;v++){var m=h[v];m.setLayout({skNodeHeight:p},!0);for(var y=0;y<m.inEdges.length;y++){var x=m.inEdges[y];u.indexOf(x.node1)<0&&u.push(x.node1)}}h=u,u=[],++p}b.each(c,function(w){Rm(w)||w.setLayout({depth:Math.max(0,l-w.getLayout().skNodeHeight)},!0)})}else"justify"===s&&function A5(c,s){b.each(c,function(a){!Rm(a)&&!a.outEdges.length&&a.setLayout({depth:s},!0)})}(c,l)}(c,p,0,ke),function I5(c,s,a){b.each(c,function(l){var u=l.getLayout().depth*s;l.setLayout("vertical"===a?{y:u}:{x:u},!0)})}(c,"vertical"===h?(u-a)/ke:(l-a)/ke,h)})(c,s,a,u,h,v,m),function P5(c,s,a,l,u,h,p){var v=function R5(c,s){var a=[],l="vertical"===s?"y":"x",u=(0,xn.pv)(c,function(h){return h.getLayout()[l]});return u.keys.sort(function(h,p){return h-p}),b.each(u.keys,function(h){a.push(u.buckets.get(h))}),a}(c,p);(function L5(c,s,a,l,u,h){var p=1/0;b.each(c,function(v){var m=v.length,y=0;b.each(v,function(w){y+=w.getLayout().value});var x="vertical"===h?(l-(m-1)*u)/y:(a-(m-1)*u)/y;x<p&&(p=x)}),b.each(c,function(v){b.each(v,function(m,y){var x=m.getLayout().value*p;"vertical"===h?(m.setLayout({x:y},!0),m.setLayout({dx:x},!0)):(m.setLayout({y},!0),m.setLayout({dy:x},!0))})}),b.each(s,function(v){var m=+v.getValue()*p;v.setLayout({dy:m},!0)})})(v,s,a,l,u,p),wD(v,u,a,l,p);for(var m=1;h>0;h--)O5(v,m*=.99,p),wD(v,u,a,l,p),SD(v,m,p),wD(v,u,a,l,p)}(c,s,h,u,l,p,v),function zb(c,s){var a="vertical"===s?"x":"y";b.each(c,function(l){l.outEdges.sort(function(u,h){return u.node2.getLayout()[a]-h.node2.getLayout()[a]}),l.inEdges.sort(function(u,h){return u.node1.getLayout()[a]-h.node1.getLayout()[a]})}),b.each(c,function(l){var u=0,h=0;b.each(l.outEdges,function(p){p.setLayout({sy:u},!0),u+=p.getLayout().dy}),b.each(l.inEdges,function(p){p.setLayout({ty:h},!0),h+=p.getLayout().dy})})}(c,v)}(y,x,l,u,p,v,0!==b.filter(y,function(N){return 0===N.getLayout().value}).length?0:a.get("layoutIterations"),a.get("orient"),a.get("nodeAlign"))})}function Rm(c){var s=c.hostGraph.data.getRawDataItem(c.dataIndex);return null!=s.depth&&s.depth>=0}function wD(c,s,a,l,u){var h="vertical"===u?"x":"y";b.each(c,function(p){p.sort(function(N,Z){return N.getLayout()[h]-Z.getLayout()[h]});for(var v,m,y,x=0,w=p.length,D="vertical"===u?"dx":"dy",I=0;I<w;I++)(y=x-(m=p[I]).getLayout()[h])>0&&(v=m.getLayout()[h]+y,m.setLayout("vertical"===u?{x:v}:{y:v},!0)),x=m.getLayout()[h]+m.getLayout()[D]+s;if((y=x-s-("vertical"===u?l:a))>0)for(v=m.getLayout()[h]-y,m.setLayout("vertical"===u?{x:v}:{y:v},!0),x=v,I=w-2;I>=0;--I)(y=(m=p[I]).getLayout()[h]+m.getLayout()[D]+s-x)>0&&(v=m.getLayout()[h]-y,m.setLayout("vertical"===u?{x:v}:{y:v},!0)),x=m.getLayout()[h]})}function O5(c,s,a){b.each(c.slice().reverse(),function(l){b.each(l,function(u){if(u.outEdges.length){var h=vc(u.outEdges,k5,a)/vc(u.outEdges,zp);if(isNaN(h)){var p=u.outEdges.length;h=p?vc(u.outEdges,N5,a)/p:0}if("vertical"===a){var v=u.getLayout().x+(h-Ou(u,a))*s;u.setLayout({x:v},!0)}else{var m=u.getLayout().y+(h-Ou(u,a))*s;u.setLayout({y:m},!0)}}})})}function k5(c,s){return Ou(c.node2,s)*c.getValue()}function N5(c,s){return Ou(c.node2,s)}function Lu(c,s){return Ou(c.node1,s)*c.getValue()}function Vb(c,s){return Ou(c.node1,s)}function Ou(c,s){return"vertical"===s?c.getLayout().x+c.getLayout().dx/2:c.getLayout().y+c.getLayout().dy/2}function zp(c){return c.getValue()}function vc(c,s,a){for(var l=0,u=c.length,h=-1;++h<u;){var p=+s(c[h],a);isNaN(p)||(l+=p)}return l}function SD(c,s,a){b.each(c,function(l){b.each(l,function(u){if(u.inEdges.length){var h=vc(u.inEdges,Lu,a)/vc(u.inEdges,zp);if(isNaN(h)){var p=u.inEdges.length;h=p?vc(u.inEdges,Vb,a)/p:0}if("vertical"===a){var v=u.getLayout().x+(h-Ou(u,a))*s;u.setLayout({x:v},!0)}else{var m=u.getLayout().y+(h-Ou(u,a))*s;u.setLayout({y:m},!0)}}})})}function NR(c){c.eachSeriesByType("sankey",function(s){var l=s.getGraph().nodes;if(l.length){var u=1/0,h=-1/0;b.each(l,function(p){var v=p.getLayout().value;v<u&&(u=v),v>h&&(h=v)}),b.each(l,function(p){var m=new no({type:"color",mappingMethod:"linear",dataExtent:[u,h],visual:s.get("color")}).mapValueToVisual(p.getLayout().value),y=p.getModel().get(["itemStyle","color"]);null!=y?(p.setVisual("color",y),p.setVisual("style",{fill:y})):(p.setVisual("color",m),p.setVisual("style",{fill:m}))})}})}var Lm=H(1577),DD=function(){function c(){}return c.prototype.getInitialData=function(s,a){var l,m,u=a.getComponent("xAxis",this.get("xAxisIndex")),h=a.getComponent("yAxis",this.get("yAxisIndex")),p=u.get("type"),v=h.get("type");"category"===p?(s.layout="horizontal",l=u.getOrdinalMeta(),m=!0):"category"===v?(s.layout="vertical",l=h.getOrdinalMeta(),m=!0):s.layout=s.layout||"horizontal";var y=["x","y"],x="horizontal"===s.layout?0:1,w=this._baseAxisDim=y[x],D=y[1-x],I=[u,h],L=I[x].get("type"),N=I[1-x].get("type"),Z=s.data;if(Z&&m){var se=[];b.each(Z,function(De,Pe){var Ie;b.isArray(De)?(Ie=De.slice(),De.unshift(Pe)):b.isArray(De.value)?((Ie=b.extend({},De)).value=Ie.value.slice(),De.value.unshift(Pe)):Ie=De,se.push(Ie)}),s.data=se}var _e=this.defaultValueDimensions,me=[{name:w,type:(0,Lm.T)(L),ordinalMeta:l,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:D,type:(0,Lm.T)(N),dimsDef:_e.slice()}];return vt(this,{coordDimensions:me,dimensionsCount:_e.length+1,encodeDefaulter:b.curry(Nt.pY,me,this)})},c.prototype.getBaseAxis=function(){var s=this._baseAxisDim;return this.ecModel.getComponent(s+"Axis",this.get(s+"AxisIndex")).axis},c}(),MD=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],a.visualDrawType="stroke",a}return(0,At.ZT)(s,c),s.type="series.boxplot",s.dependencies=["xAxis","yAxis","grid"],s.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},s}(Xi.Z);(0,b.mixin)(MD,DD,!0);const TD=MD;var FR=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u){var h=a.getData(),p=this.group,v=this._data;this._data||p.removeAll();var m="horizontal"===a.get("layout")?1:0;h.diff(v).add(function(y){if(h.hasValue(y)){var w=Ad(h.getItemLayout(y),h,y,m,!0);h.setItemGraphicEl(y,w),p.add(w)}}).update(function(y,x){var w=v.getItemGraphicEl(x);if(h.hasValue(y)){var D=h.getItemLayout(y);w?((0,Sn.Zi)(w),km(D,w,h,y)):w=Ad(D,h,y,m),p.add(w),h.setItemGraphicEl(y,w)}else p.remove(w)}).remove(function(y){var x=v.getItemGraphicEl(y);x&&p.remove(x)}).execute(),this._data=h},s.prototype.remove=function(a){var l=this.group,u=this._data;this._data=null,u&&u.eachItemGraphicEl(function(h){h&&l.remove(h)})},s.type="boxplot",s}(ia.Z),BR=function c(){},Om=function(c){function s(a){var l=c.call(this,a)||this;return l.type="boxplotBoxPath",l}return(0,At.ZT)(s,c),s.prototype.getDefaultShape=function(){return new BR},s.prototype.buildPath=function(a,l){var u=l.points,h=0;for(a.moveTo(u[h][0],u[h][1]),h++;h<4;h++)a.lineTo(u[h][0],u[h][1]);for(a.closePath();h<u.length;h++)a.moveTo(u[h][0],u[h][1]),h++,a.lineTo(u[h][0],u[h][1])},s}(ge.ZP);function Ad(c,s,a,l,u){var h=c.ends,p=new Om({shape:{points:u?Vh(h,l,c):h}});return km(c,p,s,a,u),p}function km(c,s,a,l,u){(0,_n[u?"initProps":"updateProps"])(s,{shape:{points:c.ends}},a.hostModel,l),s.useStyle(a.getItemVisual(l,"style")),s.style.strokeNoScale=!0,s.z2=100;var v=a.getItemModel(l),m=v.getModel("emphasis");(0,Wt.WO)(s,v),(0,Wt.k5)(s,m.get("focus"),m.get("blurScope"),m.get("disabled"))}function Vh(c,s,a){return b.map(c,function(l){return(l=l.slice())[s]=a.initBaseline,l})}const Hb=FR;function Nm(c,s){}var zh=b.each;function ED(c){var s=function Ub(c){var s=[],a=[];return c.eachSeriesByType("boxplot",function(l){var u=l.getBaseAxis(),h=b.indexOf(a,u);h<0&&(a[h=a.length]=u,s[h]={axis:u,seriesModels:[]}),s[h].seriesModels.push(l)}),s}(c);zh(s,function(a){var l=a.seriesModels;!l.length||(function Gb(c){var v,s=c.axis,a=c.seriesModels,l=a.length,u=c.boxWidthList=[],h=c.boxOffsetList=[],p=[];if("category"===s.type)v=s.getBandWidth();else{var m=0;zh(a,function(L){m=Math.max(m,L.getData().count())});var y=s.getExtent();v=Math.abs(y[1]-y[0])/m}zh(a,function(L){var N=L.get("boxWidth");b.isArray(N)||(N=[N,N]),p.push([(0,It.GM)(N[0],v)||0,(0,It.GM)(N[1],v)||0])});var x=.8*v-2,w=x/l*.3,D=(x-w*(l-1))/l,I=D/2-x/2;zh(a,function(L,N){h.push(I),I+=w+D,u.push(Math.min(Math.max(D,p[N][0]),p[N][1]))})}(a),zh(l,function(u,h){!function AD(c,s,a){var l=c.coordinateSystem,u=c.getData(),h=a/2,p="horizontal"===c.get("layout")?0:1,v=1-p,m=["x","y"],y=u.mapDimension(m[p]),x=u.mapDimensionsAll(m[v]);if(!(null==y||x.length<5))for(var w=0;w<u.count();w++){var D=u.get(y,w),I=me(D,x[2],w),L=me(D,x[0],w),N=me(D,x[1],w),Z=me(D,x[3],w),se=me(D,x[4],w),_e=[];De(_e,N,!1),De(_e,Z,!0),_e.push(L,N,se,Z),Pe(_e,L),Pe(_e,se),Pe(_e,I),u.setItemLayout(w,{initBaseline:I[v],ends:_e})}function me(Ie,ke,Ue){var Je,Ye=u.get(ke,Ue),Ke=[];return Ke[p]=Ie,Ke[v]=Ye,isNaN(Ie)||isNaN(Ye)?Je=[NaN,NaN]:(Je=l.dataToPoint(Ke))[p]+=s,Je}function De(Ie,ke,Ue){var Ye=ke.slice(),Ke=ke.slice();Ye[p]+=h,Ke[p]-=h,Ue?Ie.push(Ye,Ke):Ie.push(Ke,Ye)}function Pe(Ie,ke){var Ue=ke.slice(),Ye=ke.slice();Ue[p]-=h,Ye[p]+=h,Ie.push(Ue,Ye)}}(u,a.boxOffsetList[h],a.boxWidthList[h])}))})}var _a=H(5577),ID=H(4367),VR={type:"echarts:boxplot",transform:function(s){var a=s.upstream;a.sourceFormat!==ID.XD&&(0,_a._y)("");var u=function Wb(c,s){for(var a=[],l=[],u=(s=s||{}).boundIQR,h="none"===u||0===u,p=0;p<c.length;p++){var v=(0,It.dt)(c[p].slice()),m=(0,It.VR)(v,.25),y=(0,It.VR)(v,.5),x=(0,It.VR)(v,.75),w=v[0],D=v[v.length-1],I=(u??1.5)*(x-m),L=h?w:Math.max(w,m-I),N=h?D:Math.min(D,x+I),Z=s.itemNameFormatter,se=(0,b.isFunction)(Z)?Z({value:p}):(0,b.isString)(Z)?Z.replace("{value}",p+""):p+"";a.push([se,L,m,y,x,N]);for(var _e=0;_e<v.length;_e++){var me=v[_e];(me<L||me>N)&&l.push([se,me])}}return{boxData:a,outliers:l}}(a.getRawData(),s.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:u.boxData},{data:u.outliers}]}},zR=["color","borderColor"],RD=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(a),this._isLargeDraw?this._renderLarge(a):this._renderNormal(a)},s.prototype.incrementalPrepareRender=function(a,l,u){this._clear(),this._updateDrawMode(a)},s.prototype.incrementalRender=function(a,l,u,h){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(a,l):this._incrementalRenderNormal(a,l)},s.prototype.eachRendered=function(a){_n.traverseElements(this._progressiveEls||this.group,a)},s.prototype._updateDrawMode=function(a){var l=a.pipelineContext.large;(null==this._isLargeDraw||l!==this._isLargeDraw)&&(this._isLargeDraw=l,this._clear())},s.prototype._renderNormal=function(a){var l=a.getData(),u=this._data,h=this.group,p=l.getLayout("isSimpleBox"),v=a.get("clip",!0),m=a.coordinateSystem,y=m.getArea&&m.getArea();this._data||h.removeAll(),l.diff(u).add(function(x){if(l.hasValue(x)){var w=l.getItemLayout(x);if(v&&jb(y,w))return;var D=hs(w,0,!0);Sn.KZ(D,{shape:{points:w.ends}},a,x),Zb(D,l,x,p),h.add(D),l.setItemGraphicEl(x,D)}}).update(function(x,w){var D=u.getItemGraphicEl(w);if(l.hasValue(x)){var I=l.getItemLayout(x);v&&jb(y,I)?h.remove(D):(D?(Sn.D(D,{shape:{points:I.ends}},a,x),(0,Sn.Zi)(D)):D=hs(I),Zb(D,l,x,p),h.add(D),l.setItemGraphicEl(x,D))}else h.remove(D)}).remove(function(x){var w=u.getItemGraphicEl(x);w&&h.remove(w)}).execute(),this._data=l},s.prototype._renderLarge=function(a){this._clear(),Yb(a,this.group);var l=a.get("clip",!0)?gh(a.coordinateSystem,!1,a):null;l?this.group.setClipPath(l):this.group.removeClipPath()},s.prototype._incrementalRenderNormal=function(a,l){for(var p,u=l.getData(),h=u.getLayout("isSimpleBox");null!=(p=a.next());){var m=hs(u.getItemLayout(p));Zb(m,u,p,h),m.incremental=!0,this.group.add(m),this._progressiveEls.push(m)}},s.prototype._incrementalRenderLarge=function(a,l){Yb(l,this.group,this._progressiveEls,!0)},s.prototype.remove=function(a){this._clear()},s.prototype._clear=function(){this.group.removeAll(),this._data=null},s.type="candlestick",s}(ia.Z),LD=function c(){},HR=function(c){function s(a){var l=c.call(this,a)||this;return l.type="normalCandlestickBox",l}return(0,At.ZT)(s,c),s.prototype.getDefaultShape=function(){return new LD},s.prototype.buildPath=function(a,l){var u=l.points;this.__simpleBox?(a.moveTo(u[4][0],u[4][1]),a.lineTo(u[6][0],u[6][1])):(a.moveTo(u[0][0],u[0][1]),a.lineTo(u[1][0],u[1][1]),a.lineTo(u[2][0],u[2][1]),a.lineTo(u[3][0],u[3][1]),a.closePath(),a.moveTo(u[4][0],u[4][1]),a.lineTo(u[5][0],u[5][1]),a.moveTo(u[6][0],u[6][1]),a.lineTo(u[7][0],u[7][1]))},s}(ge.ZP);function hs(c,s,a){var l=c.ends;return new HR({shape:{points:a?F5(l,c):l},z2:100})}function jb(c,s){for(var a=!0,l=0;l<s.ends.length;l++)if(c.contain(s.ends[l][0],s.ends[l][1])){a=!1;break}return a}function Zb(c,s,a,l){var u=s.getItemModel(a);c.useStyle(s.getItemVisual(a,"style")),c.style.strokeNoScale=!0,c.__simpleBox=l,(0,Wt.WO)(c,u)}function F5(c,s){return b.map(c,function(a){return(a=a.slice())[1]=s.initBaseline,a})}var UR=function c(){},Fm=function(c){function s(a){var l=c.call(this,a)||this;return l.type="largeCandlestickBox",l}return(0,At.ZT)(s,c),s.prototype.getDefaultShape=function(){return new UR},s.prototype.buildPath=function(a,l){for(var u=l.points,h=0;h<u.length;)if(this.__sign===u[h++]){var p=u[h++];a.moveTo(p,u[h++]),a.lineTo(p,u[h++])}else h+=3},s}(ge.ZP);function Yb(c,s,a,l){var u=c.getData(),h=u.getLayout("largePoints"),p=new Fm({shape:{points:h},__sign:1,ignoreCoarsePointer:!0});s.add(p);var v=new Fm({shape:{points:h},__sign:-1,ignoreCoarsePointer:!0});s.add(v),OD(1,p,c),OD(-1,v,c),l&&(p.incremental=!0,v.incremental=!0),a&&a.push(p,v)}function OD(c,s,a,l){var u=a.get(["itemStyle",c>0?"borderColor":"borderColor0"])||a.get(["itemStyle",c>0?"color":"color0"]),h=a.getModel("itemStyle").getItemStyle(zR);s.useStyle(h),s.style.fill=null,s.style.stroke=u}const GR=RD;var kD=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],a}return(0,At.ZT)(s,c),s.prototype.getShadowDim=function(){return"open"},s.prototype.brushSelector=function(a,l,u){var h=l.getItemLayout(a);return h&&u.rect(h.brushRect)},s.type="series.candlestick",s.dependencies=["xAxis","yAxis","grid"],s.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},s}(Xi.Z);(0,b.mixin)(kD,DD,!0);const ND=kD;function WR(c){!c||!b.isArray(c.series)||b.each(c.series,function(s){b.isObject(s)&&"k"===s.type&&(s.type="candlestick")})}var FD=["itemStyle","borderColor"],jR=["itemStyle","borderColor0"],ZR=["itemStyle","color"],BD=["itemStyle","color0"];const YR={seriesType:"candlestick",plan:(0,co.Z)(),performRawSeries:!0,reset:function(c,s){function a(h,p){return p.get(h>0?ZR:BD)}function l(h,p){return p.get(h>0?FD:jR)}if(!s.isSeriesFiltered(c))return!c.pipelineContext.large&&{progress:function(h,p){for(var v;null!=(v=h.next());){var m=p.getItemModel(v),y=p.getItemLayout(v).sign,x=m.getItemStyle();x.fill=a(y,m),x.stroke=l(y,m)||x.fill;var w=p.ensureUniqueItemVisual(v,"style");(0,b.extend)(w,x)}}}}};function Bm(c,s,a,l,u){return a>l?-1:a<l?1:s>0?c.get(u,s-1)<=l?1:-1:1}const $R={seriesType:"candlestick",plan:(0,co.Z)(),reset:function(c){var s=c.coordinateSystem,a=c.getData(),l=function XR(c,s){var l,a=c.getBaseAxis(),u="category"===a.type?a.getBandWidth():(l=a.getExtent(),Math.abs(l[1]-l[0])/s.count()),h=(0,It.GM)((0,b.retrieve2)(c.get("barMaxWidth"),u),u),p=(0,It.GM)((0,b.retrieve2)(c.get("barMinWidth"),1),u),v=c.get("barWidth");return null!=v?(0,It.GM)(v,u):Math.max(Math.min(u/2,h),p)}(c,a),p=["x","y"],v=a.getDimensionIndex(a.mapDimension(p[0])),m=(0,b.map)(a.mapDimensionsAll(p[1]),a.getDimensionIndex,a),y=m[0],x=m[1],w=m[2],D=m[3];if(a.setLayout({candleWidth:l,isSimpleBox:l<=1.3}),!(v<0||m.length<4))return{progress:c.pipelineContext.large?function L(N,Z){for(var me,Ie,se=(0,Qs.o)(4*N.count),_e=0,De=[],Pe=[],ke=Z.getStore();null!=(Ie=N.next());){var Ue=ke.get(v,Ie),Ye=ke.get(y,Ie),Ke=ke.get(x,Ie),Je=ke.get(w,Ie),ut=ke.get(D,Ie);isNaN(Ue)||isNaN(Je)||isNaN(ut)?(se[_e++]=NaN,_e+=3):(se[_e++]=Bm(ke,Ie,Ye,Ke,x),De[0]=Ue,De[1]=Je,me=s.dataToPoint(De,null,Pe),se[_e++]=me?me[0]:NaN,se[_e++]=me?me[1]:NaN,De[1]=ut,me=s.dataToPoint(De,null,Pe),se[_e++]=me?me[1]:NaN)}Z.setLayout("largePoints",se)}:function I(N,Z){for(var se,_e=Z.getStore();null!=(se=N.next());){var me=_e.get(v,se),De=_e.get(y,se),Pe=_e.get(x,se),Ie=_e.get(w,se),ke=_e.get(D,se),Ue=Math.min(De,Pe),Ye=Math.max(De,Pe),Ke=wt(Ue,me),Je=wt(Ye,me),ut=wt(Ie,me),pt=wt(ke,me),yt=[];kt(yt,Je,0),kt(yt,Ke,1),yt.push(Yt(pt),Yt(Je),Yt(ut),Yt(Ke)),Z.setItemLayout(se,{sign:Bm(_e,se,De,Pe,x),initBaseline:De>Pe?Je[1]:Ke[1],ends:yt,brushRect:(dn=Ie,Fn=ke,zn=me,dr=void 0,br=void 0,dr=wt(dn,zn),br=wt(Fn,zn),dr[0]-=l/2,br[0]-=l/2,{x:dr[0],y:dr[1],width:l,height:br[1]-dr[1]})})}var dn,Fn,zn,dr,br;function wt(dn,Fn){var zn=[];return zn[0]=Fn,zn[1]=dn,isNaN(Fn)||isNaN(dn)?[NaN,NaN]:s.dataToPoint(zn)}function kt(dn,Fn,zn){var dr=Fn.slice(),br=Fn.slice();dr[0]=(0,_n.subPixelOptimize)(dr[0]+l/2,1,!1),br[0]=(0,_n.subPixelOptimize)(br[0]-l/2,1,!0),zn?dn.push(dr,br):dn.push(br,dr)}function Yt(dn){return dn[0]=(0,_n.subPixelOptimize)(dn[0],1),dn}}}}};function Xb(c,s){var a=s.rippleEffectColor||s.color;c.eachChild(function(l){l.attr({z:s.z,zlevel:s.zlevel,style:{stroke:"stroke"===s.brushType?a:null,fill:"fill"===s.brushType?a:null}})})}const QR=function(c){function s(a,l){var u=c.call(this)||this,h=new Jt(a,l),p=new Rn.Z;return u.add(h),u.add(p),u.updateData(a,l),u}return(0,At.ZT)(s,c),s.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},s.prototype.startEffectAnimation=function(a){for(var l=a.symbolType,u=a.color,h=a.rippleNumber,p=this.childAt(1),v=0;v<h;v++){var m=(0,si.th)(l,-1,-1,2,2,u);m.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var y=-v/h*a.period+a.effectOffset;m.animate("",!0).when(a.period,{scaleX:a.rippleScale/2,scaleY:a.rippleScale/2}).delay(y).start(),m.animateStyle(!0).when(a.period,{opacity:0}).delay(y).start(),p.add(m)}Xb(p,a)},s.prototype.updateEffectAnimation=function(a){for(var l=this._effectCfg,u=this.childAt(1),h=["symbolType","period","rippleScale","rippleNumber"],p=0;p<h.length;p++){var v=h[p];if(l[v]!==a[v])return this.stopEffectAnimation(),void this.startEffectAnimation(a)}Xb(u,a)},s.prototype.highlight=function(){(0,Wt.fD)(this)},s.prototype.downplay=function(){(0,Wt.Mh)(this)},s.prototype.getSymbolType=function(){var a=this.childAt(0);return a&&a.getSymbolType()},s.prototype.updateData=function(a,l){var u=this,h=a.hostModel;this.childAt(0).updateData(a,l);var p=this.childAt(1),v=a.getItemModel(l),m=a.getItemVisual(l,"symbol"),y=(0,si.zp)(a.getItemVisual(l,"symbolSize")),x=a.getItemVisual(l,"style"),w=x&&x.fill,D=v.getModel("emphasis");p.setScale(y),p.traverse(function(Z){Z.setStyle("fill",w)});var I=(0,si.Cq)(a.getItemVisual(l,"symbolOffset"),y);I&&(p.x=I[0],p.y=I[1]);var L=a.getItemVisual(l,"symbolRotate");p.rotation=(L||0)*Math.PI/180||0;var N={};N.showEffectOn=h.get("showEffectOn"),N.rippleScale=v.get(["rippleEffect","scale"]),N.brushType=v.get(["rippleEffect","brushType"]),N.period=1e3*v.get(["rippleEffect","period"]),N.effectOffset=l/a.count(),N.z=h.getShallow("z")||0,N.zlevel=h.getShallow("zlevel")||0,N.symbolType=m,N.color=w,N.rippleEffectColor=v.get(["rippleEffect","color"]),N.rippleNumber=v.get(["rippleEffect","number"]),"render"===N.showEffectOn?(this._effectCfg?this.updateEffectAnimation(N):this.startEffectAnimation(N),this._effectCfg=N):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(Z){"emphasis"===Z?"render"!==N.showEffectOn&&u.startEffectAnimation(N):"normal"===Z&&"render"!==N.showEffectOn&&u.stopEffectAnimation()}),this._effectCfg=N,(0,Wt.k5)(this,D.get("focus"),D.get("blurScope"),D.get("disabled"))},s.prototype.fadeOut=function(a){a&&a()},s}(Rn.Z),$b=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.init=function(){this._symbolDraw=new od(QR)},s.prototype.render=function(a,l,u){var h=a.getData(),p=this._symbolDraw;p.updateData(h,{clipShape:this._getClipShape(a)}),this.group.add(p.group)},s.prototype._getClipShape=function(a){var l=a.coordinateSystem,u=l&&l.getArea&&l.getArea();return a.get("clip",!0)?u:null},s.prototype.updateTransform=function(a,l,u){var h=a.getData();this.group.dirty();var p=ni("").reset(a,l,u);p.progress&&p.progress({start:0,end:h.count(),count:h.count()},h),this._symbolDraw.updateLayout()},s.prototype._updateGroupTransform=function(a){var l=a.coordinateSystem;l&&l.getRoamTransform&&(this.group.transform=xi.clone(l.getRoamTransform()),this.group.decomposeTransform())},s.prototype.remove=function(a,l){this._symbolDraw&&this._symbolDraw.remove(!0)},s.type="effectScatter",s}(ia.Z),eL=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.hasSymbolVisual=!0,a}return(0,At.ZT)(s,c),s.prototype.getInitialData=function(a,l){return(0,Ks.Z)(null,this,{useEncodeDefaulter:!0})},s.prototype.brushSelector=function(a,l,u){return u.point(l.getItemLayout(a))},s.type="series.effectScatter",s.dependencies=["grid","polar"],s.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},s}(Xi.Z),Hp=function(c){function s(a,l,u){var h=c.call(this)||this;return h.add(h.createLine(a,l,u)),h._updateEffectSymbol(a,l),h}return(0,At.ZT)(s,c),s.prototype.createLine=function(a,l,u){return new sb(a,l,u)},s.prototype._updateEffectSymbol=function(a,l){var h=a.getItemModel(l).getModel("effect"),p=h.get("symbolSize"),v=h.get("symbol");b.isArray(p)||(p=[p,p]);var m=a.getItemVisual(l,"style"),y=h.get("color")||m&&m.stroke,x=this.childAt(1);this._symbolType!==v&&(this.remove(x),(x=(0,si.th)(v,-.5,-.5,1,1,y)).z2=100,x.culling=!0,this.add(x)),x&&(x.setStyle("shadowColor",y),x.setStyle(h.getItemStyle(["color"])),x.scaleX=p[0],x.scaleY=p[1],x.setColor(y),this._symbolType=v,this._symbolScale=p,this._updateEffectAnimation(a,h,l))},s.prototype._updateEffectAnimation=function(a,l,u){var h=this.childAt(1);if(h){var p=a.getItemLayout(u),v=1e3*l.get("period"),m=l.get("loop"),y=l.get("roundTrip"),x=l.get("constantSpeed"),w=b.retrieve(l.get("delay"),function(I){return I/a.count()*v/3});if(h.ignore=!0,this._updateAnimationPoints(h,p),x>0&&(v=this._getLineLength(h)/x*1e3),v!==this._period||m!==this._loop||y!==this._roundTrip){h.stopAnimation();var D=void 0;D=b.isFunction(w)?w(u):w,h.__t>0&&(D=-v*h.__t),this._animateSymbol(h,v,D,m,y)}this._period=v,this._loop=m,this._roundTrip=y}},s.prototype._animateSymbol=function(a,l,u,h,p){if(l>0){a.__t=0;var v=this,m=a.animate("",h).when(p?2*l:l,{__t:p?2:1}).delay(u).during(function(){v._updateSymbolPosition(a)});h||m.done(function(){v.remove(a)}),m.start()}},s.prototype._getLineLength=function(a){return Jn.dist(a.__p1,a.__cp1)+Jn.dist(a.__cp1,a.__p2)},s.prototype._updateAnimationPoints=function(a,l){a.__p1=l[0],a.__p2=l[1],a.__cp1=l[2]||[(l[0][0]+l[1][0])/2,(l[0][1]+l[1][1])/2]},s.prototype.updateData=function(a,l,u){this.childAt(0).updateData(a,l,u),this._updateEffectSymbol(a,l)},s.prototype._updateSymbolPosition=function(a){var l=a.__p1,u=a.__p2,h=a.__cp1,p=a.__t<1?a.__t:2-a.__t,v=[a.x,a.y],m=v.slice(),y=ws.Zm,x=ws.AZ;v[0]=y(l[0],h[0],u[0],p),v[1]=y(l[1],h[1],u[1],p);var w=a.__t<1?x(l[0],h[0],u[0],p):x(u[0],h[0],l[0],1-p),D=a.__t<1?x(l[1],h[1],u[1],p):x(u[1],h[1],l[1],1-p);a.rotation=-Math.atan2(D,w)-Math.PI/2,("line"===this._symbolType||"rect"===this._symbolType||"roundRect"===this._symbolType)&&(void 0!==a.__lastT&&a.__lastT<a.__t?(a.scaleY=1.05*Jn.dist(m,v),1===p&&(v[0]=m[0]+(v[0]-m[0])/2,v[1]=m[1]+(v[1]-m[1])/2)):a.scaleY=1===a.__lastT?2*Jn.dist(l,v):this._symbolScale[1]),a.__lastT=a.__t,a.ignore=!1,a.x=v[0],a.y=v[1]},s.prototype.updateLayout=function(a,l){this.childAt(0).updateLayout(a,l);var u=a.getItemModel(l).getModel("effect");this._updateEffectAnimation(a,u,l)},s}(Rn.Z),zm=function(c){function s(a,l,u){var h=c.call(this)||this;return h._createPolyline(a,l,u),h}return(0,At.ZT)(s,c),s.prototype._createPolyline=function(a,l,u){var h=a.getItemLayout(l),p=new Ls.Z({shape:{points:h}});this.add(p),this._updateCommonStl(a,l,u)},s.prototype.updateData=function(a,l,u){var h=a.hostModel,p=this.childAt(0),v={shape:{points:a.getItemLayout(l)}};Sn.D(p,v,h,l),this._updateCommonStl(a,l,u)},s.prototype._updateCommonStl=function(a,l,u){var h=this.childAt(0),p=a.getItemModel(l),v=u&&u.emphasisLineStyle,m=u&&u.focus,y=u&&u.blurScope,x=u&&u.emphasisDisabled;if(!u||a.hasItemOption){var w=p.getModel("emphasis");v=w.getModel("lineStyle").getLineStyle(),x=w.get("disabled"),m=w.get("focus"),y=w.get("blurScope")}h.useStyle(a.getItemVisual(l,"style")),h.style.fill=null,h.style.strokeNoScale=!0,h.ensureState("emphasis").style=v,(0,Wt.k5)(this,m,y,x)},s.prototype.updateLayout=function(a,l){this.childAt(0).setShape("points",a.getItemLayout(l))},s}(Rn.Z),zD=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a._lastFrame=0,a._lastFramePercent=0,a}return(0,At.ZT)(s,c),s.prototype.createLine=function(a,l,u){return new zm(a,l,u)},s.prototype._updateAnimationPoints=function(a,l){this._points=l;for(var u=[0],h=0,p=1;p<l.length;p++)h+=Jn.dist(l[p-1],l[p]),u.push(h);if(0!==h){for(p=0;p<u.length;p++)u[p]/=h;this._offsets=u,this._length=h}else this._length=0},s.prototype._getLineLength=function(){return this._length},s.prototype._updateSymbolPosition=function(a){var l=a.__t<1?a.__t:2-a.__t,u=this._points,h=this._offsets,p=u.length;if(h){var m,v=this._lastFrame;if(l<this._lastFramePercent){for(m=Math.min(v+1,p-1);m>=0&&!(h[m]<=l);m--);m=Math.min(m,p-2)}else{for(m=v;m<p&&!(h[m]>l);m++);m=Math.min(m-1,p-2)}var x=(l-h[m])/(h[m+1]-h[m]),w=u[m],D=u[m+1];a.x=w[0]*(1-x)+x*D[0],a.y=w[1]*(1-x)+x*D[1],a.rotation=-Math.atan2(a.__t<1?D[1]-w[1]:w[1]-D[1],a.__t<1?D[0]-w[0]:w[0]-D[0])-Math.PI/2,this._lastFrame=m,this._lastFramePercent=l,a.ignore=!1}},s}(Hp);var Qb=H(4443),HD=H(7014),UD=function c(){this.polyline=!1,this.curveness=0,this.segs=[]},qb=function(c){function s(a){var l=c.call(this,a)||this;return l._off=0,l.hoverDataIdx=-1,l}return(0,At.ZT)(s,c),s.prototype.reset=function(){this.notClear=!1,this._off=0},s.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},s.prototype.getDefaultShape=function(){return new UD},s.prototype.buildPath=function(a,l){var p,u=l.segs,h=l.curveness;if(l.polyline)for(p=this._off;p<u.length;){var v=u[p++];if(v>0){a.moveTo(u[p++],u[p++]);for(var m=1;m<v;m++)a.lineTo(u[p++],u[p++])}}else for(p=this._off;p<u.length;){var y=u[p++],x=u[p++],w=u[p++],D=u[p++];a.moveTo(y,x),h>0?a.quadraticCurveTo((y+w)/2-(x-D)*h,(x+D)/2-(w-y)*h,w,D):a.lineTo(w,D)}this.incremental&&(this._off=p,this.notClear=!0)},s.prototype.findDataIndex=function(a,l){var u=this.shape,h=u.segs,p=u.curveness,v=this.style.lineWidth;if(u.polyline)for(var m=0,y=0;y<h.length;){var x=h[y++];if(x>0)for(var w=h[y++],D=h[y++],I=1;I<x;I++){var L=h[y++],N=h[y++];if(Qb.m(w,D,L,N,v,a,l))return m}m++}else for(m=0,y=0;y<h.length;){if(w=h[y++],D=h[y++],L=h[y++],N=h[y++],p>0){if(HD.m(w,D,(w+L)/2-(D-N)*p,(D+N)/2-(L-w)*p,L,N,v,a,l))return m}else if(Qb.m(w,D,L,N,v,a,l))return m;m++}return-1},s.prototype.contain=function(a,l){var u=this.transformCoordToLocal(a,l);return this.getBoundingRect().contain(a=u[0],l=u[1])?(this.hoverDataIdx=this.findDataIndex(a,l))>=0:(this.hoverDataIdx=-1,!1)},s.prototype.getBoundingRect=function(){var a=this._rect;if(!a){for(var u=this.shape.segs,h=1/0,p=1/0,v=-1/0,m=-1/0,y=0;y<u.length;){var x=u[y++],w=u[y++];h=Math.min(x,h),v=Math.max(x,v),p=Math.min(w,p),m=Math.max(w,m)}a=this._rect=new yr.Z(h,p,v,m)}return a},s}(ge.ZP);const Hm=function(){function c(){this.group=new Rn.Z}return c.prototype.updateData=function(s){this._clear();var a=this._create();a.setShape({segs:s.getLayout("linesPoints")}),this._setCommon(a,s)},c.prototype.incrementalPrepareUpdate=function(s){this.group.removeAll(),this._clear()},c.prototype.incrementalUpdate=function(s,a){var l=this._newAdded[0],u=a.getLayout("linesPoints"),h=l&&l.shape.segs;if(h&&h.length<2e4){var p=h.length,v=new Float32Array(p+u.length);v.set(h),v.set(u,p),l.setShape({segs:v})}else{this._newAdded=[];var m=this._create();m.incremental=!0,m.setShape({segs:u}),this._setCommon(m,a),m.__startIndex=s.start}},c.prototype.remove=function(){this._clear()},c.prototype.eachRendered=function(s){this._newAdded[0]&&s(this._newAdded[0])},c.prototype._create=function(){var s=new qb({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(s),this.group.add(s),s},c.prototype._setCommon=function(s,a,l){var u=a.hostModel;s.setShape({polyline:u.get("polyline"),curveness:u.get(["lineStyle","curveness"])}),s.useStyle(u.getModel("lineStyle").getLineStyle()),s.style.strokeNoScale=!0;var h=a.getVisual("style");h&&h.stroke&&s.setStyle("stroke",h.stroke),s.setStyle("fill",null);var p=(0,Tr.A)(s);p.seriesIndex=u.seriesIndex,s.on("mousemove",function(v){p.dataIndex=null;var m=s.hoverDataIdx;m>0&&(p.dataIndex=m+s.__startIndex)})},c.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},c}(),Hh={seriesType:"lines",plan:(0,co.Z)(),reset:function(c){var s=c.coordinateSystem;if(s){var a=c.get("polyline"),l=c.pipelineContext.large;return{progress:function(u,h){var p=[];if(l){var v=void 0,m=u.end-u.start;if(a){for(var y=0,x=u.start;x<u.end;x++)y+=c.getLineCoordsCount(x);v=new Float32Array(m+2*y)}else v=new Float32Array(4*m);var w=0,D=[];for(x=u.start;x<u.end;x++){var I=c.getLineCoords(x,p);a&&(v[w++]=I);for(var L=0;L<I;L++)D=s.dataToPoint(p[L],!1,D),v[w++]=D[0],v[w++]=D[1]}h.setLayout("linesPoints",v)}else for(x=u.start;x<u.end;x++){var N=h.getItemModel(x),Z=(I=c.getLineCoords(x,p),[]);if(a)for(var se=0;se<I;se++)Z.push(s.dataToPoint(p[se]));else{Z[0]=s.dataToPoint(p[0]),Z[1]=s.dataToPoint(p[1]);var _e=N.get(["lineStyle","curveness"]);+_e&&(Z[2]=[(Z[0][0]+Z[1][0])/2-(Z[0][1]-Z[1][1])*_e,(Z[0][1]+Z[1][1])/2-(Z[1][0]-Z[0][0])*_e])}h.setItemLayout(x,Z)}}}}}},Jb=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u){var h=a.getData(),p=this._updateLineDraw(h,a),v=a.get("zlevel"),m=a.get(["effect","trailLength"]),y=u.getZr(),x="svg"===y.painter.getType();x||y.painter.getLayer(v).clear(!0),null!=this._lastZlevel&&!x&&y.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(a)&&m>0&&(x||y.configLayer(v,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(m/10+.9,1),0)})),p.updateData(h);var w=a.get("clip",!0)&&gh(a.coordinateSystem,!1,a);w?this.group.setClipPath(w):this.group.removeClipPath(),this._lastZlevel=v,this._finished=!0},s.prototype.incrementalPrepareRender=function(a,l,u){var h=a.getData();this._updateLineDraw(h,a).incrementalPrepareUpdate(h),this._clearLayer(u),this._finished=!1},s.prototype.incrementalRender=function(a,l,u){this._lineDraw.incrementalUpdate(a,l.getData()),this._finished=a.end===l.getData().count()},s.prototype.eachRendered=function(a){this._lineDraw&&this._lineDraw.eachRendered(a)},s.prototype.updateTransform=function(a,l,u){var h=a.getData(),p=a.pipelineContext;if(!this._finished||p.large||p.progressiveRender)return{update:!0};var v=Hh.reset(a,l,u);v.progress&&v.progress({start:0,end:h.count(),count:h.count()},h),this._lineDraw.updateLayout(),this._clearLayer(u)},s.prototype._updateLineDraw=function(a,l){var u=this._lineDraw,h=this._showEffect(l),p=!!l.get("polyline"),m=l.pipelineContext.large;return(!u||h!==this._hasEffet||p!==this._isPolyline||m!==this._isLargeDraw)&&(u&&u.remove(),u=this._lineDraw=m?new Hm:new cb(p?h?zD:zm:h?Hp:sb),this._hasEffet=h,this._isPolyline=p,this._isLargeDraw=m),this.group.add(u.group),u},s.prototype._showEffect=function(a){return!!a.get(["effect","show"])},s.prototype._clearLayer=function(a){var l=a.getZr();"svg"!==l.painter.getType()&&null!=this._lastZlevel&&l.painter.getLayer(this._lastZlevel).clear(!0)},s.prototype.remove=function(a,l){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(l)},s.prototype.dispose=function(a,l){this.remove(a,l)},s.type="lines",s}(ia.Z);var GD=typeof Uint32Array>"u"?Array:Uint32Array,nL=typeof Float64Array>"u"?Array:Float64Array;function WD(c){var s=c.data;s&&s[0]&&s[0][0]&&s[0][0].coord&&(c.data=(0,b.map)(s,function(a){var u={coords:[a[0].coord,a[1].coord]};return a[0].name&&(u.fromName=a[0].name),a[1].name&&(u.toName=a[1].name),(0,b.mergeAll)([u,a[0],a[1]])}))}const rL=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.visualStyleAccessPath="lineStyle",a.visualDrawType="stroke",a}return(0,At.ZT)(s,c),s.prototype.init=function(a){a.data=a.data||[],WD(a);var l=this._processFlatCoordsArray(a.data);this._flatCoords=l.flatCoords,this._flatCoordsOffset=l.flatCoordsOffset,l.flatCoords&&(a.data=new Float32Array(l.count)),c.prototype.init.apply(this,arguments)},s.prototype.mergeOption=function(a){if(WD(a),a.data){var l=this._processFlatCoordsArray(a.data);this._flatCoords=l.flatCoords,this._flatCoordsOffset=l.flatCoordsOffset,l.flatCoords&&(a.data=new Float32Array(l.count))}c.prototype.mergeOption.apply(this,arguments)},s.prototype.appendData=function(a){var l=this._processFlatCoordsArray(a.data);l.flatCoords&&(this._flatCoords?(this._flatCoords=(0,b.concatArray)(this._flatCoords,l.flatCoords),this._flatCoordsOffset=(0,b.concatArray)(this._flatCoordsOffset,l.flatCoordsOffset)):(this._flatCoords=l.flatCoords,this._flatCoordsOffset=l.flatCoordsOffset),a.data=new Float32Array(l.count)),this.getRawData().appendData(a.data)},s.prototype._getCoordsFromItemModel=function(a){var l=this.getData().getItemModel(a);return l.option instanceof Array?l.option:l.getShallow("coords")},s.prototype.getLineCoordsCount=function(a){return this._flatCoordsOffset?this._flatCoordsOffset[2*a+1]:this._getCoordsFromItemModel(a).length},s.prototype.getLineCoords=function(a,l){if(this._flatCoordsOffset){for(var u=this._flatCoordsOffset[2*a],h=this._flatCoordsOffset[2*a+1],p=0;p<h;p++)l[p]=l[p]||[],l[p][0]=this._flatCoords[u+2*p],l[p][1]=this._flatCoords[u+2*p+1];return h}var v=this._getCoordsFromItemModel(a);for(p=0;p<v.length;p++)l[p]=l[p]||[],l[p][0]=v[p][0],l[p][1]=v[p][1];return v.length},s.prototype._processFlatCoordsArray=function(a){var l=0;if(this._flatCoords&&(l=this._flatCoords.length),(0,b.isNumber)(a[0])){for(var u=a.length,h=new GD(u),p=new nL(u),v=0,m=0,y=0,x=0;x<u;){y++;var w=a[x++];h[m++]=v+l,h[m++]=w;for(var D=0;D<w;D++){var I=a[x++],L=a[x++];p[v++]=I,p[v++]=L}}return{flatCoordsOffset:new Uint32Array(h.buffer,0,m),flatCoords:p,count:y}}return{flatCoordsOffset:null,flatCoords:null,count:a.length}},s.prototype.getInitialData=function(a,l){var h=new xt.Z(["value"],this);return h.hasItemOption=!1,h.initData(a.data,[],function(p,v,m,y){if(p instanceof Array)return NaN;h.hasItemOption=!0;var x=p.value;return null!=x?x instanceof Array?x[y]:x:void 0}),h},s.prototype.formatTooltip=function(a,l,u){var p=this.getData().getItemModel(a),v=p.get("name");if(v)return v;var m=p.get("fromName"),y=p.get("toName"),x=[];return null!=m&&x.push(m),null!=y&&x.push(y),(0,da.TX)("nameValue",{name:x.join(" > ")})},s.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},s.prototype.getProgressive=function(){return this.option.progressive??(this.option.large?1e4:this.get("progressive"))},s.prototype.getProgressiveThreshold=function(){return this.option.progressiveThreshold??(this.option.large?2e4:this.get("progressiveThreshold"))},s.prototype.getZLevelKey=function(){var a=this.getModel("effect"),l=a.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:a.get("show")&&l>0?l+"":""},s.type="series.lines",s.dependencies=["grid","polar","geo","calendar"],s.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},s}(Xi.Z);function ex(c){return c instanceof Array||(c=[c,c]),c}const H5={seriesType:"lines",reset:function(c){var s=ex(c.get("symbol")),a=ex(c.get("symbolSize")),l=c.getData();return l.setVisual("fromSymbol",s&&s[0]),l.setVisual("toSymbol",s&&s[1]),l.setVisual("fromSymbolSize",a&&a[0]),l.setVisual("toSymbolSize",a&&a[1]),{dataEach:l.hasItemOption?function u(h,p){var v=h.getItemModel(p),m=ex(v.getShallow("symbol",!0)),y=ex(v.getShallow("symbolSize",!0));m[0]&&h.setItemVisual(p,"fromSymbol",m[0]),m[1]&&h.setItemVisual(p,"toSymbol",m[1]),y[0]&&h.setItemVisual(p,"fromSymbolSize",y[0]),y[1]&&h.setItemVisual(p,"toSymbolSize",y[1])}:null}}},jD=function(){function c(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var s=Ot.qW.createCanvas();this.canvas=s}return c.prototype.update=function(s,a,l,u,h,p){var v=this._getBrush(),m=this._getGradient(h,"inRange"),y=this._getGradient(h,"outOfRange"),x=this.pointSize+this.blurSize,w=this.canvas,D=w.getContext("2d"),I=s.length;w.width=a,w.height=l;for(var L=0;L<I;++L){var N=s[L],Z=N[0],se=N[1],me=u(N[2]);D.globalAlpha=me,D.drawImage(v,Z-x,se-x)}if(!w.width||!w.height)return w;for(var De=D.getImageData(0,0,w.width,w.height),Pe=De.data,Ie=0,ke=Pe.length,Ue=this.minOpacity,Ke=this.maxOpacity-Ue;Ie<ke;){me=Pe[Ie+3]/256;var Je=4*Math.floor(255*me);if(me>0){var ut=p(me)?m:y;me>0&&(me=me*Ke+Ue),Pe[Ie++]=ut[Je],Pe[Ie++]=ut[Je+1],Pe[Ie++]=ut[Je+2],Pe[Ie++]=ut[Je+3]*me*256}else Ie+=4}return D.putImageData(De,0,0),w},c.prototype._getBrush=function(){var s=this._brushCanvas||(this._brushCanvas=Ot.qW.createCanvas()),a=this.pointSize+this.blurSize,l=2*a;s.width=l,s.height=l;var u=s.getContext("2d");return u.clearRect(0,0,l,l),u.shadowOffsetX=l,u.shadowBlur=this.blurSize,u.shadowColor="#000",u.beginPath(),u.arc(-a,a,this.pointSize,0,2*Math.PI,!0),u.closePath(),u.fill(),s},c.prototype._getGradient=function(s,a){for(var l=this._gradientPixels,u=l[a]||(l[a]=new Uint8ClampedArray(1024)),h=[0,0,0,0],p=0,v=0;v<256;v++)s[a](v/255,!0,h),u[p++]=h[0],u[p++]=h[1],u[p++]=h[2],u[p++]=h[3];return u},c}();function Gm(c){var s=c.dimensions;return"lng"===s[0]&&"lat"===s[1]}const uL=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u){var h;l.eachComponent("visualMap",function(v){v.eachTargetSeries(function(m){m===a&&(h=v)})}),this._progressiveEls=null,this.group.removeAll();var p=a.coordinateSystem;"cartesian2d"===p.type||"calendar"===p.type?this._renderOnCartesianAndCalendar(a,u,0,a.getData().count()):Gm(p)&&this._renderOnGeo(p,a,h,u)},s.prototype.incrementalPrepareRender=function(a,l,u){this.group.removeAll()},s.prototype.incrementalRender=function(a,l,u,h){var p=l.coordinateSystem;p&&(Gm(p)?this.render(l,u,h):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(l,h,a.start,a.end,!0)))},s.prototype.eachRendered=function(a){_n.traverseElements(this._progressiveEls||this.group,a)},s.prototype._renderOnCartesianAndCalendar=function(a,l,u,h,p){var y,x,w,D,v=a.coordinateSystem,m=Rs(v,"cartesian2d");if(m){var I=v.getAxis("x"),L=v.getAxis("y");y=I.getBandWidth()+.5,x=L.getBandWidth()+.5,w=I.scale.getExtent(),D=L.scale.getExtent()}for(var N=this.group,Z=a.getData(),se=a.getModel(["emphasis","itemStyle"]).getItemStyle(),_e=a.getModel(["blur","itemStyle"]).getItemStyle(),me=a.getModel(["select","itemStyle"]).getItemStyle(),De=a.get(["itemStyle","borderRadius"]),Pe=(0,qt.k3)(a),Ie=a.getModel("emphasis"),ke=Ie.get("focus"),Ue=Ie.get("blurScope"),Ye=Ie.get("disabled"),Ke=m?[Z.mapDimension("x"),Z.mapDimension("y"),Z.mapDimension("value")]:[Z.mapDimension("time"),Z.mapDimension("value")],Je=u;Je<h;Je++){var ut=void 0,pt=Z.getItemVisual(Je,"style");if(m){var yt=Z.get(Ke[0],Je),wt=Z.get(Ke[1],Je);if(isNaN(Z.get(Ke[2],Je))||yt<w[0]||yt>w[1]||wt<D[0]||wt>D[1])continue;var kt=v.dataToPoint([yt,wt]);ut=new Mi.Z({shape:{x:kt[0]-y/2,y:kt[1]-x/2,width:y,height:x},style:pt})}else{if(isNaN(Z.get(Ke[1],Je)))continue;ut=new Mi.Z({z2:1,shape:v.dataToRect([Z.get(Ke[0],Je)]).contentShape,style:pt})}if(Z.hasItemOption){var en=Z.getItemModel(Je),Yt=en.getModel("emphasis");se=Yt.getModel("itemStyle").getItemStyle(),_e=en.getModel(["blur","itemStyle"]).getItemStyle(),me=en.getModel(["select","itemStyle"]).getItemStyle(),De=en.get(["itemStyle","borderRadius"]),ke=Yt.get("focus"),Ue=Yt.get("blurScope"),Ye=Yt.get("disabled"),Pe=(0,qt.k3)(en)}ut.shape.r=De;var dn=a.getRawValue(Je),Fn="-";dn&&null!=dn[2]&&(Fn=dn[2]+""),(0,qt.ni)(ut,Pe,{labelFetcher:a,labelDataIndex:Je,defaultOpacity:pt.opacity,defaultText:Fn}),ut.ensureState("emphasis").style=se,ut.ensureState("blur").style=_e,ut.ensureState("select").style=me,(0,Wt.k5)(ut,ke,Ue,Ye),ut.incremental=p,p&&(ut.states.emphasis.hoverLayer=!0),N.add(ut),Z.setItemGraphicEl(Je,ut),this._progressiveEls&&this._progressiveEls.push(ut)}},s.prototype._renderOnGeo=function(a,l,u,h){var p=u.targetVisuals.inRange,v=u.targetVisuals.outOfRange,m=l.getData(),y=this._hmLayer||this._hmLayer||new jD;y.blurSize=l.get("blurSize"),y.pointSize=l.get("pointSize"),y.minOpacity=l.get("minOpacity"),y.maxOpacity=l.get("maxOpacity");var x=a.getViewRect().clone(),w=a.getRoamTransform();x.applyTransform(w);var D=Math.max(x.x,0),I=Math.max(x.y,0),L=Math.min(x.width+x.x,h.getWidth()),N=Math.min(x.height+x.y,h.getHeight()),Z=L-D,se=N-I,_e=[m.mapDimension("lng"),m.mapDimension("lat"),m.mapDimension("value")],me=m.mapArray(_e,function(ke,Ue,Ye){var Ke=a.dataToPoint([ke,Ue]);return Ke[0]-=D,Ke[1]-=I,Ke.push(Ye),Ke}),De=u.getExtent(),Pe="visualMap.continuous"===u.type?function lL(c,s){var a=c[1]-c[0];return s=[(s[0]-c[0])/a,(s[1]-c[0])/a],function(l){return l>=s[0]&&l<=s[1]}}(De,u.option.range):function Gn(c,s,a){var l=c[1]-c[0],u=(s=b.map(s,function(p){return{interval:[(p.interval[0]-c[0])/l,(p.interval[1]-c[0])/l]}})).length,h=0;return function(p){var v;for(v=h;v<u;v++)if((m=s[v].interval)[0]<=p&&p<=m[1]){h=v;break}if(v===u)for(v=h-1;v>=0;v--){var m;if((m=s[v].interval)[0]<=p&&p<=m[1]){h=v;break}}return v>=0&&v<u&&a[v]}}(De,u.getPieceList(),u.option.selected);y.update(me,Z,se,p.color.getNormalizer(),{inRange:p.color.getColorMapper(),outOfRange:v.color.getColorMapper()},Pe);var Ie=new be.ZP({style:{width:Z,height:se,x:D,y:I,image:y.canvas},silent:!0});this.group.add(Ie)},s.type="heatmap",s}(ia.Z),hL=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.getInitialData=function(a,l){return(0,Ks.Z)(null,this,{generateCoord:"value"})},s.prototype.preventIncremental=function(){var a=ds.Z.get(this.get("coordinateSystem"));if(a&&a.dimensions)return"lng"===a.dimensions[0]&&"lat"===a.dimensions[1]},s.type="series.heatmap",s.dependencies=["grid","geo","calendar"],s.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},s}(Xi.Z);var pL=["itemStyle","borderWidth"],Gp=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],qc=new Ch.Z;function Uh(c,s,a,l){var u=c.getItemLayout(s),h=a.get("symbolRepeat"),p=a.get("symbolClip"),v=a.get("symbolPosition")||"start",y=(a.get("symbolRotate")||0)*Math.PI/180||0,x=a.get("symbolPatternSize")||2,w=a.isAnimationEnabled(),D={dataIndex:s,layout:u,itemModel:a,symbolType:c.getItemVisual(s,"symbol")||"circle",style:c.getItemVisual(s,"style"),symbolClip:p,symbolRepeat:h,symbolRepeatDirection:a.get("symbolRepeatDirection"),symbolPatternSize:x,rotation:y,animationModel:w?a:null,hoverScale:w&&a.get(["emphasis","scale"]),z2:a.getShallow("z",!0)||0};(function gL(c,s,a,l,u){var x,h=l.valueDim,p=c.get("symbolBoundingData"),v=l.coordSys.getOtherAxis(l.coordSys.getBaseAxis()),m=v.toGlobalCoord(v.dataToCoord(0)),y=1-+(a[h.wh]<=0);if(b.isArray(p)){var w=[tx(v,p[0])-m,tx(v,p[1])-m];w[1]<w[0]&&w.reverse(),x=w[y]}else x=null!=p?tx(v,p)-m:s?l.coordSysExtent[h.index][y]-m:a[h.wh];u.boundingLength=x,s&&(u.repeatCutLength=a[h.wh]),u.pxSign=x>0?1:-1})(a,h,u,l,D),function nx(c,s,a,l,u,h,p,v,m,y){var L,x=m.valueDim,w=m.categoryDim,D=Math.abs(a[w.wh]),I=c.getItemVisual(s,"symbolSize");(L=b.isArray(I)?I.slice():null==I?["100%","100%"]:[I,I])[w.index]=(0,It.GM)(L[w.index],D),L[x.index]=(0,It.GM)(L[x.index],l?D:Math.abs(h)),y.symbolSize=L,(y.symbolScale=[L[0]/v,L[1]/v])[x.index]*=(m.isHorizontal?-1:1)*p}(c,s,u,h,0,D.boundingLength,D.pxSign,x,l,D),function vL(c,s,a,l,u){var h=c.get(pL)||0;h&&(qc.attr({scaleX:s[0],scaleY:s[1],rotation:a}),qc.updateTransform(),h/=qc.getLineScale(),h*=s[l.valueDim.index]),u.valueLineWidth=h||0}(a,D.symbolScale,y,l,D);var I=D.symbolSize,L=(0,si.Cq)(a.get("symbolOffset"),I);return function _c(c,s,a,l,u,h,p,v,m,y,x,w){var D=x.categoryDim,I=x.valueDim,L=w.pxSign,N=Math.max(s[I.index]+v,0),Z=N;if(l){var se=Math.abs(m),_e=b.retrieve(c.get("symbolMargin"),"15%")+"",me=!1;_e.lastIndexOf("!")===_e.length-1&&(me=!0,_e=_e.slice(0,_e.length-1));var De=(0,It.GM)(_e,s[I.index]),Pe=Math.max(N+2*De,0),Ie=me?0:2*De,ke=(0,It.kE)(l),Ue=ke?l:rx((se+Ie)/Pe);Pe=N+2*(De=(se-Ue*N)/2/(me?Ue:Math.max(Ue-1,1))),Ie=me?0:2*De,!ke&&"fixed"!==l&&(Ue=y?rx((Math.abs(y)+Ie)/Pe):0),Z=Ue*Pe-Ie,w.repeatTimes=Ue,w.symbolMargin=De}var Ke=L*(Z/2),Je=w.pathPosition=[];Je[D.index]=a[D.wh]/2,Je[I.index]="start"===p?Ke:"end"===p?m-Ke:m/2,h&&(Je[0]+=h[0],Je[1]+=h[1]);var ut=w.bundlePosition=[];ut[D.index]=a[D.xy],ut[I.index]=a[I.xy];var pt=w.barRectShape=b.extend({},a);pt[I.wh]=L*Math.max(Math.abs(a[I.wh]),Math.abs(Je[I.index]+Ke)),pt[D.wh]=a[D.wh];var yt=w.clipShape={};yt[D.xy]=-a[D.xy],yt[D.wh]=x.ecSize[D.wh],yt[I.xy]=0,yt[I.wh]=a[I.wh]}(a,I,u,h,0,L,v,D.valueLineWidth,D.boundingLength,D.repeatCutLength,l,D),D}function tx(c,s){return c.toGlobalCoord(c.dataToCoord(c.scale.parse(s)))}function Gh(c){var s=c.symbolPatternSize,a=(0,si.th)(c.symbolType,-s/2,-s/2,s,s);return a.attr({culling:!0}),"image"!==a.type&&a.setStyle({strokeNoScale:!0}),a}function Ro(c,s,a,l){var u=c.__pictorialBundle,v=a.pathPosition,m=s.valueDim,y=a.repeatTimes||0,x=0,w=a.symbolSize[s.valueDim.index]+a.valueLineWidth+2*a.symbolMargin;for(Fu(c,function(N){N.__pictorialAnimationIndex=x,N.__pictorialRepeatTimes=y,x<y?Ll(N,null,L(x),a,l):Ll(N,null,{scaleX:0,scaleY:0},a,l,function(){u.remove(N)}),x++});x<y;x++){var D=Gh(a);D.__pictorialAnimationIndex=x,D.__pictorialRepeatTimes=y,u.add(D);var I=L(x);Ll(D,{x:I.x,y:I.y,scaleX:0,scaleY:0},{scaleX:I.scaleX,scaleY:I.scaleY,rotation:I.rotation},a,l)}function L(N){var Z=v.slice(),se=a.pxSign,_e=N;return("start"===a.symbolRepeatDirection?se>0:se<0)&&(_e=y-1-N),Z[m.index]=w*(_e-y/2+.5)+v[m.index],{x:Z[0],y:Z[1],scaleX:a.symbolScale[0],scaleY:a.symbolScale[1],rotation:a.rotation}}}function Nu(c,s,a,l){var u=c.__pictorialBundle,h=c.__pictorialMainPath;h?Ll(h,null,{x:a.pathPosition[0],y:a.pathPosition[1],scaleX:a.symbolScale[0],scaleY:a.symbolScale[1],rotation:a.rotation},a,l):(h=c.__pictorialMainPath=Gh(a),u.add(h),Ll(h,{x:a.pathPosition[0],y:a.pathPosition[1],scaleX:0,scaleY:0,rotation:a.rotation},{scaleX:a.symbolScale[0],scaleY:a.symbolScale[1]},a,l))}function Wp(c,s,a){var l=b.extend({},s.barRectShape),u=c.__pictorialBarRect;u?Ll(u,null,{shape:l},s,a):((u=c.__pictorialBarRect=new Mi.Z({z2:2,shape:l,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}})).disableMorphing=!0,c.add(u))}function Bs(c,s,a,l){if(a.symbolClip){var u=c.__pictorialClipPath,h=b.extend({},a.clipShape),p=s.valueDim,v=a.animationModel,m=a.dataIndex;if(u)Sn.D(u,{shape:h},v,m);else{h[p.wh]=0,u=new Mi.Z({shape:h}),c.__pictorialBundle.setClipPath(u),c.__pictorialClipPath=u;var y={};y[p.wh]=a.clipShape[p.wh],_n[l?"updateProps":"initProps"](u,{shape:y},v,m)}}}function Er(c,s){var a=c.getItemModel(s);return a.getAnimationDelayParams=Wh,a.isAnimationEnabled=jh,a}function Wh(c){return{index:c.__pictorialAnimationIndex,count:c.__pictorialRepeatTimes}}function jh(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function Id(c,s,a,l){var u=new Rn.Z,h=new Rn.Z;return u.add(h),u.__pictorialBundle=h,h.x=a.bundlePosition[0],h.y=a.bundlePosition[1],a.symbolRepeat?Ro(u,s,a):Nu(u,0,a),Wp(u,a,l),Bs(u,s,a,l),u.__pictorialShapeStr=Rd(c,a),u.__pictorialSymbolMeta=a,u}function Pd(c,s,a,l){var u=l.__pictorialBarRect;u&&u.removeTextContent();var h=[];Fu(l,function(p){h.push(p)}),l.__pictorialMainPath&&h.push(l.__pictorialMainPath),l.__pictorialClipPath&&(a=null),b.each(h,function(p){Sn.bX(p,{scaleX:0,scaleY:0},a,s,function(){l.parent&&l.parent.remove(l)})}),c.setItemGraphicEl(s,null)}function Rd(c,s){return[c.getItemVisual(s.dataIndex,"symbol")||"none",!!s.symbolRepeat,!!s.symbolClip].join(":")}function Fu(c,s,a){b.each(c.__pictorialBundle.children(),function(l){l!==c.__pictorialBarRect&&s.call(a,l)})}function Ll(c,s,a,l,u,h){s&&c.attr(s),l.symbolClip&&!u?a&&c.attr(a):a&&_n[u?"updateProps":"initProps"](c,a,l.animationModel,l.dataIndex,h)}function Ld(c,s,a){var l=a.dataIndex,u=a.itemModel,h=u.getModel("emphasis"),p=h.getModel("itemStyle").getItemStyle(),v=u.getModel(["blur","itemStyle"]).getItemStyle(),m=u.getModel(["select","itemStyle"]).getItemStyle(),y=u.getShallow("cursor"),x=h.get("focus"),w=h.get("blurScope"),D=h.get("scale");Fu(c,function(N){if(N instanceof be.ZP){var Z=N.style;N.useStyle(b.extend({image:Z.image,x:Z.x,y:Z.y,width:Z.width,height:Z.height},a.style))}else N.useStyle(a.style);var se=N.ensureState("emphasis");se.style=p,D&&(se.scaleX=1.1*N.scaleX,se.scaleY=1.1*N.scaleY),N.ensureState("blur").style=v,N.ensureState("select").style=m,y&&(N.cursor=y),N.z2=a.z2});var I=s.valueDim.posDesc[+(a.boundingLength>0)];(0,qt.ni)(c.__pictorialBarRect,(0,qt.k3)(u),{labelFetcher:s.seriesModel,labelDataIndex:l,defaultText:El(s.seriesModel.getData(),l),inheritColor:a.style.fill,defaultOpacity:a.style.opacity,defaultOutsidePosition:I}),(0,Wt.k5)(c,x,w,h.get("disabled"))}function rx(c){var s=Math.round(c);return Math.abs(c-s)<1e-4?s:Math.ceil(c)}const ZD=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u){var h=this.group,p=a.getData(),v=this._data,m=a.coordinateSystem,x=m.getBaseAxis().isHorizontal(),w=m.master.getRect(),D={ecSize:{width:u.getWidth(),height:u.getHeight()},seriesModel:a,coordSys:m,coordSysExtent:[[w.x,w.x+w.width],[w.y,w.y+w.height]],isHorizontal:x,valueDim:Gp[+x],categoryDim:Gp[1-+x]};return p.diff(v).add(function(I){if(p.hasValue(I)){var L=Er(p,I),N=Uh(p,I,L,D),Z=Id(p,D,N);p.setItemGraphicEl(I,Z),h.add(Z),Ld(Z,D,N)}}).update(function(I,L){var N=v.getItemGraphicEl(L);if(p.hasValue(I)){var Z=Er(p,I),se=Uh(p,I,Z,D),_e=Rd(p,se);N&&_e!==N.__pictorialShapeStr&&(h.remove(N),p.setItemGraphicEl(I,null),N=null),N?function Zh(c,s,a){Sn.D(c.__pictorialBundle,{x:a.bundlePosition[0],y:a.bundlePosition[1]},a.animationModel,a.dataIndex),a.symbolRepeat?Ro(c,s,a,!0):Nu(c,0,a,!0),Wp(c,a,!0),Bs(c,s,a,!0)}(N,D,se):N=Id(p,D,se,!0),p.setItemGraphicEl(I,N),N.__pictorialSymbolMeta=se,h.add(N),Ld(N,D,se)}else h.remove(N)}).remove(function(I){var L=v.getItemGraphicEl(I);L&&Pd(v,I,L.__pictorialSymbolMeta.animationModel,L)}).execute(),this._data=p,this.group},s.prototype.remove=function(a,l){var u=this.group,h=this._data;a.get("animation")?h&&h.eachItemGraphicEl(function(p){Pd(h,(0,Tr.A)(p).dataIndex,a,p)}):u.removeAll()},s.type="pictorialBar",s}(ia.Z),XD=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.hasSymbolVisual=!0,a.defaultSymbol="roundRect",a}return(0,At.ZT)(s,c),s.prototype.getInitialData=function(a){return a.stack=null,c.prototype.getInitialData.apply(this,arguments)},s.type="series.pictorialBar",s.dependencies=["grid"],s.defaultOption=(0,Zn.ZL)(_u.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),s}(_u),qD=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a._layers=[],a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u){var h=a.getData(),p=this,v=this.group,m=a.getLayerSeries(),y=h.getLayout("layoutInfo"),x=y.rect,w=y.boundaryGap;function D(Z){return Z.name}v.x=0,v.y=x.y+w[0];var I=new dc.Z(this._layersSeries||[],m,D,D),L=[];function N(Z,se,_e){var me=p._layers;if("remove"!==Z){for(var Ie,De=[],Pe=[],ke=m[se].indices,Ue=0;Ue<ke.length;Ue++){var Ye=h.getItemLayout(ke[Ue]),Ke=Ye.x,Je=Ye.y0,ut=Ye.y;De.push(Ke,Je),Pe.push(Ke,Je+ut),Ie=h.getItemVisual(ke[Ue],"style")}var pt,yt=h.getItemLayout(ke[0]),kt=a.getModel("label").get("margin"),en=a.getModel("emphasis");if("add"===Z){var Yt=L[se]=new Rn.Z;pt=new s0({shape:{points:De,stackedOnPoints:Pe,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),Yt.add(pt),v.add(Yt),a.isAnimationEnabled()&&pt.setClipPath(function QD(c,s,a){var l=new Mi.Z({shape:{x:c.x-10,y:c.y-10,width:0,height:c.height+20}});return Sn.KZ(l,{shape:{x:c.x-50,width:c.width+100,height:c.height+20}},s,a),l}(pt.getBoundingRect(),a,function(){pt.removeClipPath()}))}else pt=(Yt=me[_e]).childAt(0),v.add(Yt),L[se]=Yt,Sn.D(pt,{shape:{points:De,stackedOnPoints:Pe}},a),(0,Sn.Zi)(pt);(0,qt.ni)(pt,(0,qt.k3)(a),{labelDataIndex:ke[Ue-1],defaultText:h.getName(ke[Ue-1]),inheritColor:Ie.fill},{normal:{verticalAlign:"middle"}}),pt.setTextConfig({position:null,local:!0});var dn=pt.getTextContent();dn&&(dn.x=yt.x-kt,dn.y=yt.y0+yt.y/2),pt.useStyle(Ie),h.setItemGraphicEl(se,pt),(0,Wt.WO)(pt,a),(0,Wt.k5)(pt,en.get("focus"),en.get("blurScope"),en.get("disabled"))}else v.remove(me[se])}I.add((0,b.bind)(N,this,"add")).update((0,b.bind)(N,this,"update")).remove((0,b.bind)(N,this,"remove")).execute(),this._layersSeries=m,this._layers=L},s.type="themeRiver",s}(ia.Z),_L=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.init=function(a){c.prototype.init.apply(this,arguments),this.legendVisualProvider=new gn(b.bind(this.getData,this),b.bind(this.getRawData,this))},s.prototype.fixData=function(a){var l=a.length,u={},h=(0,xn.pv)(a,function(D){return u.hasOwnProperty(D[0]+"")||(u[D[0]+""]=-1),D[2]}),p=[];h.buckets.each(function(D,I){p.push({name:I,dataList:D})});for(var v=p.length,m=0;m<v;++m){for(var y=p[m].name,x=0;x<p[m].dataList.length;++x)u[w=p[m].dataList[x][0]+""]=m;for(var w in u)u.hasOwnProperty(w)&&u[w]!==m&&(u[w]=m,a[l]=[w,0,y],l++)}return a},s.prototype.getInitialData=function(a,l){for(var h=this.getReferringComponents("singleAxis",xn.C6).models[0].get("type"),p=b.filter(a.data,function(L){return void 0!==L[2]}),v=this.fixData(p||[]),m=[],y=this.nameMap=b.createHashMap(),x=0,w=0;w<v.length;++w)m.push(v[w][2]),y.get(v[w][2])||(y.set(v[w][2],x),x++);var D=(0,dt.Z)(v,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:(0,Lm.T)(h)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,I=new xt.Z(D,this);return I.initData(v),I},s.prototype.getLayerSeries=function(){for(var a=this.getData(),l=a.count(),u=[],h=0;h<l;++h)u[h]=h;var p=a.mapDimension("single"),v=(0,xn.pv)(u,function(y){return a.get("name",y)}),m=[];return v.buckets.each(function(y,x){y.sort(function(w,D){return a.get(p,w)-a.get(p,D)}),m.push({name:x,indices:y})}),m},s.prototype.getAxisTooltipData=function(a,l,u){b.isArray(a)||(a=a?[a]:[]);for(var y,h=this.getData(),p=this.getLayerSeries(),v=[],m=p.length,x=0;x<m;++x){for(var w=Number.MAX_VALUE,D=-1,I=p[x].indices.length,L=0;L<I;++L){var N=h.get(a[0],p[x].indices[L]),Z=Math.abs(N-l);Z<=w&&(y=N,w=Z,D=p[x].indices[L])}v.push(D)}return{dataIndices:v,nestestValue:y}},s.prototype.formatTooltip=function(a,l,u){var h=this.getData(),p=h.getName(a),v=h.get(h.mapDimension("value"),a);return(0,da.TX)("nameValue",{name:p,value:v})},s.type="series.themeRiver",s.dependencies=["singleAxis"],s.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},s}(Xi.Z);function ar(c,s){c.eachSeriesByType("themeRiver",function(a){var l=a.getData(),u=a.coordinateSystem,h={},p=u.getRect();h.rect=p;var v=a.get("boundaryGap"),m=u.getAxis();h.boundaryGap=v,"horizontal"===m.orient?(v[0]=It.GM(v[0],p.height),v[1]=It.GM(v[1],p.height),JD(l,a,p.height-v[0]-v[1])):(v[0]=It.GM(v[0],p.width),v[1]=It.GM(v[1],p.width),JD(l,a,p.width-v[0]-v[1])),l.setLayout("layoutInfo",h)})}function JD(c,s,a){if(c.count())for(var I,l=s.coordinateSystem,u=s.getLayerSeries(),h=c.mapDimension("single"),p=c.mapDimension("value"),v=b.map(u,function(Z){return b.map(Z.indices,function(se){var _e=l.dataToPoint(c.get(h,se));return _e[1]=c.get(p,se),_e})}),m=function li(c){for(var s=c.length,a=c[0].length,l=[],u=[],h=0,p=0;p<a;++p){for(var v=0,m=0;m<s;++m)v+=c[m][p][1];v>h&&(h=v),l.push(v)}for(var y=0;y<a;++y)u[y]=(h-l[y])/2;h=0;for(var x=0;x<a;++x){var w=l[x]+u[x];w>h&&(h=w)}return{y0:u,max:h}}(v),y=m.y0,x=a/m.max,w=u.length,D=u[0].indices.length,L=0;L<D;++L){c.setItemLayout(u[0].indices[L],{layerIndex:0,x:v[0][L][0],y0:I=y[L]*x,y:v[0][L][1]*x});for(var N=1;N<w;++N)c.setItemLayout(u[N].indices[L],{layerIndex:N,x:v[N][L][0],y0:I+=v[N-1][L][1]*x,y:v[N][L][1]*x})}}const nt=function(c){function s(a,l,u,h){var p=c.call(this)||this;p.z2=2,p.textConfig={inside:!0},(0,Tr.A)(p).seriesIndex=l.seriesIndex;var v=new _t.ZP({z2:4,silent:a.getModel().get(["label","silent"])});return p.setTextContent(v),p.updateData(!0,a,l,u,h),p}return(0,At.ZT)(s,c),s.prototype.updateData=function(a,l,u,h,p){this.node=l,l.piece=this,u=u||this._seriesModel,h=h||this._ecModel;var v=this;(0,Tr.A)(v).dataIndex=l.dataIndex;var m=l.getModel(),y=m.getModel("emphasis"),x=l.getLayout(),w=b.extend({},x);w.label=null;var D=l.getVisual("style");D.lineJoin="bevel";var I=l.getVisual("decal");I&&(D.decal=(0,A0.I)(I,p));var L=Zt(m.getModel("itemStyle"),w,!0);b.extend(w,L),b.each(Wt.L1,function(_e){var me=v.ensureState(_e),De=m.getModel([_e,"itemStyle"]);me.style=De.getItemStyle();var Pe=Zt(De,w);Pe&&(me.shape=Pe)}),a?(v.setShape(w),v.shape.r=x.r0,Sn.D(v,{shape:{r:x.r}},u,l.dataIndex)):(Sn.D(v,{shape:w},u),(0,Sn.Zi)(v)),v.useStyle(D),this._updateLabel(u);var N=m.getShallow("cursor");N&&v.attr("cursor",N),this._seriesModel=u||this._seriesModel,this._ecModel=h||this._ecModel;var Z=y.get("focus"),se="ancestor"===Z?l.getAncestorsIndices():"descendant"===Z?l.getDescendantIndices():Z;(0,Wt.k5)(this,se,y.get("blurScope"),y.get("disabled"))},s.prototype._updateLabel=function(a){var l=this,u=this.node.getModel(),h=u.getModel("label"),p=this.node.getLayout(),v=p.endAngle-p.startAngle,m=(p.startAngle+p.endAngle)/2,y=Math.cos(m),x=Math.sin(m),w=this,D=w.getTextContent(),I=this.node.dataIndex,L=h.get("minAngle")/180*Math.PI,N=h.get("show")&&!(null!=L&&Math.abs(v)<L);function Z(se,_e){return se.get(_e)??h.get(_e)}D.ignore=!N,b.each(Wt.qc,function(se){var _e=u.getModel("normal"===se?"label":[se,"label"]),me="normal"===se,De=me?D:D.ensureState(se),Pe=a.getFormattedLabel(I,se);me&&(Pe=Pe||l.node.name),De.style=(0,qt.Lr)(_e,{},null,"normal"!==se,!0),Pe&&(De.style.text=Pe);var Ie=_e.get("show");null!=Ie&&!me&&(De.ignore=!Ie);var ke=Z(_e,"position"),Ue=me?w:w.states[se],Ye=Ue.style.fill;Ue.textConfig={outsideFill:"inherit"===_e.get("color")?Ye:null,inside:"outside"!==ke};var Ke,Je=Z(_e,"distance")||0,ut=Z(_e,"align");"outside"===ke?(Ke=p.r+Je,ut=m>Math.PI/2?"right":"left"):ut&&"center"!==ut?"left"===ut?(Ke=p.r0+Je,m>Math.PI/2&&(ut="right")):"right"===ut&&(Ke=p.r-Je,m>Math.PI/2&&(ut="left")):(Ke=v===2*Math.PI&&0===p.r0?0:(p.r+p.r0)/2,ut="center"),De.style.align=ut,De.style.verticalAlign=Z(_e,"verticalAlign")||"middle",De.x=Ke*y+p.cx,De.y=Ke*x+p.cy;var pt=Z(_e,"rotate"),yt=0;"radial"===pt?(yt=-m)<-Math.PI/2&&(yt+=Math.PI):"tangential"===pt?(yt=Math.PI/2-m)>Math.PI/2?yt-=Math.PI:yt<-Math.PI/2&&(yt+=Math.PI):b.isNumber(pt)&&(yt=pt*Math.PI/180),De.rotation=yt}),D.dirtyStyle()},s}(yn.C);var Cn="sunburstRootToNode",eM="sunburstHighlight";const sa=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u,h){var p=this;this.seriesModel=a,this.api=u,this.ecModel=l;var v=a.getData(),m=v.tree.root,y=a.getViewRoot(),x=this.group,w=a.get("renderLabelForZeroData"),D=[];y.eachNode(function(_e){D.push(_e)}),function L(_e,me){function De(Ie){return Ie.getId()}function Pe(Ie,ke){!function N(_e,me){if(!w&&_e&&!_e.getValue()&&(_e=null),_e!==m&&me!==m)if(me&&me.piece)_e?(me.piece.updateData(!1,_e,a,l,u),v.setItemGraphicEl(_e.dataIndex,me.piece)):function Z(_e){!_e||_e.piece&&(x.remove(_e.piece),_e.piece=null)}(me);else if(_e){var De=new nt(_e,a,l,u);x.add(De),v.setItemGraphicEl(_e.dataIndex,De)}}(null==Ie?null:_e[Ie],null==ke?null:me[ke])}0===_e.length&&0===me.length||new dc.Z(me,_e,De,De).add(Pe).update(Pe).remove(b.curry(Pe,null)).execute()}(D,this._oldChildren||[]),function se(_e,me){me.depth>0?(p.virtualPiece?p.virtualPiece.updateData(!1,_e,a,l,u):(p.virtualPiece=new nt(_e,a,l,u),x.add(p.virtualPiece)),me.piece.off("click"),p.virtualPiece.on("click",function(De){p._rootToNode(me.parentNode)})):p.virtualPiece&&(x.remove(p.virtualPiece),p.virtualPiece=null)}(m,y),this._initEvents(),this._oldChildren=D},s.prototype._initEvents=function(){var a=this;this.group.off("click"),this.group.on("click",function(l){var u=!1;a.seriesModel.getViewRoot().eachNode(function(p){if(!u&&p.piece&&p.piece===l.target){var v=p.getModel().get("nodeClick");if("rootToNode"===v)a._rootToNode(p);else if("link"===v){var m=p.getModel(),y=m.get("link");if(y){var x=m.get("target",!0)||"_blank";(0,Va.MI)(y,x)}}u=!0}})})},s.prototype._rootToNode=function(a){a!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:Cn,from:this.uid,seriesId:this.seriesModel.id,targetNode:a})},s.prototype.containPoint=function(a,l){var h=l.getData().getItemLayout(0);if(h){var p=a[0]-h.cx,v=a[1]-h.cy,m=Math.sqrt(p*p+v*v);return m<=h.r&&m>=h.r0}},s.type="sunburst",s}(ia.Z);function ax(c){var s=0;b.each(c.children,function(l){ax(l);var u=l.value;b.isArray(u)&&(u=u[0]),s+=u});var a=c.value;b.isArray(a)&&(a=a[0]),(null==a||isNaN(a))&&(a=s),a<0&&(a=0),b.isArray(c.value)?c.value[0]=a:c.value=a}const ox=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.ignoreStyleOnData=!0,a}return(0,At.ZT)(s,c),s.prototype.getInitialData=function(a,l){var u={name:a.name,children:a.data};ax(u);var h=this._levelModels=b.map(a.levels||[],function(m){return new ka.Z(m,this,l)},this),p=al.createTree(u,this,function v(m){m.wrapMethod("getItemModel",function(y,x){var w=p.getNodeByDataIndex(x),D=h[w.depth];return D&&(y.parentModel=D),y})});return p.data},s.prototype.optionUpdated=function(){this.resetViewRoot()},s.prototype.getDataParams=function(a){var l=c.prototype.getDataParams.apply(this,arguments),u=this.getData().tree.getNodeByDataIndex(a);return l.treePathInfo=Xv(u,this),l},s.prototype.getLevelModel=function(a){return this._levelModels&&this._levelModels[a.depth]},s.prototype.getViewRoot=function(){return this._viewRoot},s.prototype.resetViewRoot=function(a){a?this._viewRoot=a:a=this._viewRoot;var l=this.getRawData().tree.root;(!a||a!==l&&!l.contains(a))&&(this._viewRoot=l)},s.prototype.enableAriaDecal=function(){z0(this)},s.type="series.sunburst",s.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},s}(Xi.Z);var zt=Math.PI/180;function jm(c,s,a){s.eachSeriesByType(c,function(l){var u=l.get("center"),h=l.get("radius");b.isArray(h)||(h=[0,h]),b.isArray(u)||(u=[u,u]);var p=a.getWidth(),v=a.getHeight(),m=Math.min(p,v),y=(0,It.GM)(u[0],p),x=(0,It.GM)(u[1],v),w=(0,It.GM)(h[0],m/2),D=(0,It.GM)(h[1],m/2),I=-l.get("startAngle")*zt,L=l.get("minAngle")*zt,N=l.getData().tree.root,Z=l.getViewRoot(),se=Z.depth,_e=l.get("sort");null!=_e&&nM(Z,_e);var me=0;b.each(Z.children,function(kt){!isNaN(kt.getValue())&&me++});var De=Z.getValue(),Pe=Math.PI/(De||me)*2,Ie=Z.depth>0,Ue=(D-w)/(Z.height-(Ie?-1:1)||1),Ye=l.get("clockwise"),Ke=l.get("stillShowZeroSum"),Je=Ye?1:-1,ut=function(kt,en){if(kt){var Yt=en;if(kt!==N){var dn=kt.getValue(),Fn=0===De&&Ke?Pe:dn*Pe;Fn<L&&(Fn=L),Yt=en+Je*Fn;var zn=kt.depth-se-(Ie?-1:1),dr=w+Ue*zn,br=w+Ue*(zn+1),Fr=l.getLevelModel(kt);if(Fr){var Ci=Fr.get("r0",!0),Oi=Fr.get("r",!0),Yr=Fr.get("radius",!0);null!=Yr&&(Ci=Yr[0],Oi=Yr[1]),null!=Ci&&(dr=(0,It.GM)(Ci,m/2)),null!=Oi&&(br=(0,It.GM)(Oi,m/2))}kt.setLayout({angle:Fn,startAngle:en,endAngle:Yt,clockwise:Ye,cx:y,cy:x,r0:dr,r:br})}if(kt.children&&kt.children.length){var or=0;b.each(kt.children,function(wi){or+=ut(wi,en+or)})}return Yt-en}};if(Ie){var wt=2*Math.PI;N.setLayout({angle:wt,startAngle:I,endAngle:I+wt,clockwise:Ye,cx:y,cy:x,r0:w,r:w+Ue})}ut(Z,I)})}function nM(c,s){var a=c.children||[];c.children=function rM(c,s){if(b.isFunction(s)){var a=b.map(c,function(u,h){var p=u.getValue();return{params:{depth:u.depth,height:u.height,dataIndex:u.dataIndex,getValue:function(){return p}},index:h}});return a.sort(function(u,h){return s(u.params,h.params)}),b.map(a,function(u){return c[u.index]})}var l="asc"===s;return c.sort(function(u,h){var p=(u.getValue()-h.getValue())*(l?1:-1);return 0===p?(u.dataIndex-h.dataIndex)*(l?-1:1):p})}(a,s),a.length&&b.each(c.children,function(l){nM(l,s)})}function iM(c){var s={};c.eachSeriesByType("sunburst",function(l){var u=l.getData(),h=u.tree;h.eachNode(function(p){var m=p.getModel().getModel("itemStyle").getItemStyle();m.fill||(m.fill=function a(l,u,h){for(var p=l;p&&p.depth>1;)p=p.parentNode;var v=u.getColorFromPalette(p.name||p.dataIndex+"",s);return l.depth>1&&(0,b.isString)(v)&&(v=(0,Da.lift)(v,(l.depth-1)/(h-1)*.5)),v}(p,l,h.root.height));var y=u.ensureUniqueItemVisual(p.dataIndex,"style");(0,b.extend)(y,m)})})}var Yn={color:"fill",borderColor:"stroke"},bL={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},zi=(0,xn.Yf)();const oM=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},s.prototype.getInitialData=function(a,l){return(0,Ks.Z)(null,this)},s.prototype.getDataParams=function(a,l,u){var h=c.prototype.getDataParams.call(this,a,l);return u&&(h.info=zi(u).info),h},s.type="series.custom",s.dependencies=["grid","polar","geo","singleAxis","calendar"],s.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},s}(Xi.Z);function sx(c,s){return s=s||[0,0],b.map(["x","y"],function(a,l){var u=this.getAxis(a),h=s[l],p=c[l]/2;return"category"===u.type?u.getBandWidth():Math.abs(u.dataToCoord(h-p)-u.dataToCoord(h+p))},this)}function lM(c,s){return s=s||[0,0],b.map([0,1],function(a){var l=s[a],u=c[a]/2,h=[],p=[];return h[a]=l-u,p[a]=l+u,h[1-a]=p[1-a]=s[1-a],Math.abs(this.dataToPoint(h)[a]-this.dataToPoint(p)[a])},this)}function uM(c,s){var a=this.getAxis(),l=s instanceof Array?s[0]:s,u=(c instanceof Array?c[0]:c)/2;return"category"===a.type?a.getBandWidth():Math.abs(a.dataToCoord(l-u)-a.dataToCoord(l+u))}function hM(c,s){return s=s||[0,0],b.map(["Radius","Angle"],function(a,l){var h=this["get"+a+"Axis"](),p=s[l],v=c[l]/2,m="category"===h.type?h.getBandWidth():Math.abs(h.dataToCoord(p-v)-h.dataToCoord(p+v));return"Angle"===a&&(m=m*Math.PI/180),m},this)}function gM(c,s,a,l){return c&&(c.legacy||!1!==c.legacy&&!a&&!l&&"tspan"!==s&&("text"===s||(0,b.hasOwn)(c,"text")))}function vM(c,s,a){var u,h,p,l=c;if("text"===s)p=l;else{p={},(0,b.hasOwn)(l,"text")&&(p.text=l.text),(0,b.hasOwn)(l,"rich")&&(p.rich=l.rich),(0,b.hasOwn)(l,"textFill")&&(p.fill=l.textFill),(0,b.hasOwn)(l,"textStroke")&&(p.stroke=l.textStroke),(0,b.hasOwn)(l,"fontFamily")&&(p.fontFamily=l.fontFamily),(0,b.hasOwn)(l,"fontSize")&&(p.fontSize=l.fontSize),(0,b.hasOwn)(l,"fontStyle")&&(p.fontStyle=l.fontStyle),(0,b.hasOwn)(l,"fontWeight")&&(p.fontWeight=l.fontWeight),h={type:"text",style:p,silent:!0},u={};var v=(0,b.hasOwn)(l,"textPosition");a?u.position=v?l.textPosition:"inside":v&&(u.position=l.textPosition),(0,b.hasOwn)(l,"textPosition")&&(u.position=l.textPosition),(0,b.hasOwn)(l,"textOffset")&&(u.offset=l.textOffset),(0,b.hasOwn)(l,"textRotation")&&(u.rotation=l.textRotation),(0,b.hasOwn)(l,"textDistance")&&(u.distance=l.textDistance)}return lx(p,c),(0,b.each)(p.rich,function(m){lx(m,m)}),{textConfig:u,textContent:h}}function lx(c,s){!s||(s.font=s.textFont||s.font,(0,b.hasOwn)(s,"textStrokeWidth")&&(c.lineWidth=s.textStrokeWidth),(0,b.hasOwn)(s,"textAlign")&&(c.align=s.textAlign),(0,b.hasOwn)(s,"textVerticalAlign")&&(c.verticalAlign=s.textVerticalAlign),(0,b.hasOwn)(s,"textLineHeight")&&(c.lineHeight=s.textLineHeight),(0,b.hasOwn)(s,"textWidth")&&(c.width=s.textWidth),(0,b.hasOwn)(s,"textHeight")&&(c.height=s.textHeight),(0,b.hasOwn)(s,"textBackgroundColor")&&(c.backgroundColor=s.textBackgroundColor),(0,b.hasOwn)(s,"textPadding")&&(c.padding=s.textPadding),(0,b.hasOwn)(s,"textBorderColor")&&(c.borderColor=s.textBorderColor),(0,b.hasOwn)(s,"textBorderWidth")&&(c.borderWidth=s.textBorderWidth),(0,b.hasOwn)(s,"textBorderRadius")&&(c.borderRadius=s.textBorderRadius),(0,b.hasOwn)(s,"textBoxShadowColor")&&(c.shadowColor=s.textBoxShadowColor),(0,b.hasOwn)(s,"textBoxShadowBlur")&&(c.shadowBlur=s.textBoxShadowBlur),(0,b.hasOwn)(s,"textBoxShadowOffsetX")&&(c.shadowOffsetX=s.textBoxShadowOffsetX),(0,b.hasOwn)(s,"textBoxShadowOffsetY")&&(c.shadowOffsetY=s.textBoxShadowOffsetY))}function mM(c,s,a){var l=c;l.textPosition=l.textPosition||a.position||"inside",null!=a.offset&&(l.textOffset=a.offset),null!=a.rotation&&(l.textRotation=a.rotation),null!=a.distance&&(l.textDistance=a.distance);var u=l.textPosition.indexOf("inside")>=0,h=c.fill||"#000";ja(l,s);var p=null==l.textFill;return u?p&&(l.textFill=a.insideFill||"#fff",!l.textStroke&&a.insideStroke&&(l.textStroke=a.insideStroke),!l.textStroke&&(l.textStroke=h),null==l.textStrokeWidth&&(l.textStrokeWidth=2)):(p&&(l.textFill=c.fill||a.outsideFill||"#000"),!l.textStroke&&a.outsideStroke&&(l.textStroke=a.outsideStroke)),l.text=s.text,l.rich=s.rich,(0,b.each)(s.rich,function(v){ja(v,v)}),l}function ja(c,s){!s||((0,b.hasOwn)(s,"fill")&&(c.textFill=s.fill),(0,b.hasOwn)(s,"stroke")&&(c.textStroke=s.fill),(0,b.hasOwn)(s,"lineWidth")&&(c.textStrokeWidth=s.lineWidth),(0,b.hasOwn)(s,"font")&&(c.font=s.font),(0,b.hasOwn)(s,"fontStyle")&&(c.fontStyle=s.fontStyle),(0,b.hasOwn)(s,"fontWeight")&&(c.fontWeight=s.fontWeight),(0,b.hasOwn)(s,"fontSize")&&(c.fontSize=s.fontSize),(0,b.hasOwn)(s,"fontFamily")&&(c.fontFamily=s.fontFamily),(0,b.hasOwn)(s,"align")&&(c.textAlign=s.align),(0,b.hasOwn)(s,"verticalAlign")&&(c.textVerticalAlign=s.verticalAlign),(0,b.hasOwn)(s,"lineHeight")&&(c.textLineHeight=s.lineHeight),(0,b.hasOwn)(s,"width")&&(c.textWidth=s.width),(0,b.hasOwn)(s,"height")&&(c.textHeight=s.height),(0,b.hasOwn)(s,"backgroundColor")&&(c.textBackgroundColor=s.backgroundColor),(0,b.hasOwn)(s,"padding")&&(c.textPadding=s.padding),(0,b.hasOwn)(s,"borderColor")&&(c.textBorderColor=s.borderColor),(0,b.hasOwn)(s,"borderWidth")&&(c.textBorderWidth=s.borderWidth),(0,b.hasOwn)(s,"borderRadius")&&(c.textBorderRadius=s.borderRadius),(0,b.hasOwn)(s,"shadowColor")&&(c.textBoxShadowColor=s.shadowColor),(0,b.hasOwn)(s,"shadowBlur")&&(c.textBoxShadowBlur=s.shadowBlur),(0,b.hasOwn)(s,"shadowOffsetX")&&(c.textBoxShadowOffsetX=s.shadowOffsetX),(0,b.hasOwn)(s,"shadowOffsetY")&&(c.textBoxShadowOffsetY=s.shadowOffsetY),(0,b.hasOwn)(s,"textShadowColor")&&(c.textShadowColor=s.textShadowColor),(0,b.hasOwn)(s,"textShadowBlur")&&(c.textShadowBlur=s.textShadowBlur),(0,b.hasOwn)(s,"textShadowOffsetX")&&(c.textShadowOffsetX=s.textShadowOffsetX),(0,b.hasOwn)(s,"textShadowOffsetY")&&(c.textShadowOffsetY=s.textShadowOffsetY))}var CL=H(6062),_M={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},cx=(0,b.keys)(_M),Zp=((0,b.reduce)(xe.dN,function(c,s){return c[s]=1,c},{}),xe.dN.join(", "),["","style","shape","extra"]),Ol=(0,xn.Yf)();function ux(c,s,a,l,u){var h=c+"Animation",p=(0,Sn.ke)(c,l,u)||{},v=Ol(s).userDuring;return p.duration>0&&(p.during=v?(0,b.bind)(yc,{el:s,userDuring:v}):null,p.setToFinal=!0,p.scope=c),(0,b.extend)(p,a[h]),p}function Zm(c,s,a,l){var u=(l=l||{}).dataIndex,h=l.isInit,p=l.clearStyle,v=a.isAnimationEnabled(),m=Ol(c),y=s.style;m.userDuring=s.during;var x={},w={};if(function bM(c,s,a){for(var l=0;l<cx.length;l++){var u=cx[l],h=_M[u],p=s[u];p&&(a[h[0]]=p[0],a[h[1]]=p[1])}for(l=0;l<xe.dN.length;l++){var v=xe.dN[l];null!=s[v]&&(a[v]=s[v])}}(0,s,w),cl("shape",s,w),cl("extra",s,w),!h&&v&&(function yM(c,s,a){for(var l=s.transition,u=Bu(l)?xe.dN:(0,xn.kF)(l||[]),h=0;h<u.length;h++){var p=u[h];"style"!==p&&"shape"!==p&&"extra"!==p&&(a[p]=c[p])}}(c,s,x),ll("shape",c,s,x),ll("extra",c,s,x),function DL(c,s,a,l){if(a){var h,u=c.style;if(u){var p=a.transition,v=s.transition;if(p&&!Bu(p)){var m=(0,xn.kF)(p);!h&&(h=l.style={});for(var y=0;y<m.length;y++)h[x=m[y]]=u[x]}else if(c.getAnimationStyleProps&&(Bu(v)||Bu(p)||(0,b.indexOf)(v,"style")>=0)){var D=c.getAnimationStyleProps(),I=D?D.style:null;if(I){!h&&(h=l.style={});var L=(0,b.keys)(a);for(y=0;y<L.length;y++){var x;I[x=L[y]]&&(h[x]=u[x])}}}}}}(c,s,y,x)),w.style=y,function W5(c,s,a){var l=s.style;if(!c.isGroup&&l){if(a){c.useStyle({});for(var u=c.animators,h=0;h<u.length;h++){var p=u[h];"style"===p.targetName&&p.changeTarget(c.style)}}c.setStyle(l)}s&&(s.style=null,s&&c.attr(s),s.style=l)}(c,w,p),function ui(c,s){(0,b.hasOwn)(s,"silent")&&(c.silent=s.silent),(0,b.hasOwn)(s,"ignore")&&(c.ignore=s.ignore),c instanceof Du.ZP&&(0,b.hasOwn)(s,"invisible")&&(c.invisible=s.invisible),c instanceof ge.ZP&&(0,b.hasOwn)(s,"autoBatch")&&(c.autoBatch=s.autoBatch)}(c,s),v)if(h){var D={};(0,b.each)(Zp,function(L){var N=L?s[L]:s;N&&N.enterFrom&&(L&&(D[L]=D[L]||{}),(0,b.extend)(L?D[L]:D,N.enterFrom))});var I=ux("enter",c,s,a,u);I.duration>0&&c.animateFrom(D,I)}else!function Za(c,s,a,l,u){if(u){var h=ux("update",c,s,l,a);h.duration>0&&c.animateFrom(u,h)}}(c,s,u||0,a,x);dx(c,s),y?c.dirty():c.markRedraw()}function dx(c,s){for(var a=Ol(c).leaveToProps,l=0;l<Zp.length;l++){var u=Zp[l],h=u?s[u]:s;h&&h.leaveTo&&(a||(a=Ol(c).leaveToProps={}),u&&(a[u]=a[u]||{}),(0,b.extend)(u?a[u]:a,h.leaveTo))}}function Ym(c,s,a,l){if(c){var u=c.parent,h=Ol(c).leaveToProps;if(h){var p=ux("update",c,s,a,0);p.done=function(){u.remove(c),l&&l()},c.animateTo(h,p)}else u.remove(c),l&&l()}}function Bu(c){return"all"===c}var ro={},SL={setTransform:function(c,s){return ro.el[c]=s,this},getTransform:function(c){return ro.el[c]},setShape:function(c,s){var a=ro.el;return(a.shape||(a.shape={}))[c]=s,a.dirtyShape&&a.dirtyShape(),this},getShape:function(c){var s=ro.el.shape;if(s)return s[c]},setStyle:function(c,s){var a=ro.el,l=a.style;return l&&(l[c]=s,a.dirtyStyle&&a.dirtyStyle()),this},getStyle:function(c){var s=ro.el.style;if(s)return s[c]},setExtra:function(c,s){return(ro.el.extra||(ro.el.extra={}))[c]=s,this},getExtra:function(c){var s=ro.el.extra;if(s)return s[c]}};function yc(){var c=this,s=c.el;if(s){var a=Ol(s).userDuring,l=c.userDuring;if(a!==l)return void(c.el=c.userDuring=null);ro.el=s,l(SL)}}function ll(c,s,a,l){var u=a[c];if(u){var p,h=s[c];if(h){var v=a.transition,m=u.transition;if(m)if(!p&&(p=l[c]={}),Bu(m))(0,b.extend)(p,h);else for(var y=(0,xn.kF)(m),x=0;x<y.length;x++)p[w=y[x]]=D=h[w];else if(Bu(v)||(0,b.indexOf)(v,c)>=0){!p&&(p=l[c]={});var I=(0,b.keys)(h);for(x=0;x<I.length;x++){var w,D;ML(u[w=I[x]],D=h[w])&&(p[w]=D)}}}}}function cl(c,s,a){var l=s[c];if(l)for(var u=a[c]={},h=(0,b.keys)(l),p=0;p<h.length;p++){var v=h[p];u[v]=(0,CL.V)(l[v])}}function ML(c,s){return(0,b.isArrayLike)(c)?c!==s:null!=c&&isFinite(c)}var xM=(0,xn.Yf)(),hx=["percent","easing","shape","style","extra"];function Yh(c){c.stopAnimation("keyframe"),c.attr(xM(c))}function Xm(c,s,a){if(a.isAnimationEnabled()&&s){if((0,b.isArray)(s))return void(0,b.each)(s,function(v){Xm(c,v,a)});var l=s.keyframes,u=s.duration;if(a&&null==u){var h=(0,Sn.ke)("enter",a,0);u=h&&h.duration}if(l&&u){var p=xM(c);(0,b.each)(Zp,function(v){var m;v&&!c[v]||(l.sort(function(x,w){return x.percent-w.percent}),(0,b.each)(l,function(x){var w=c.animators,D=v?x[v]:x;if(D){var I=(0,b.keys)(D);if(v||(I=(0,b.filter)(I,function(Z){return(0,b.indexOf)(hx,Z)<0})),I.length){m||((m=c.animate(v,s.loop,!0)).scope="keyframe");for(var L=0;L<w.length;L++)w[L]!==m&&w[L].targetName===m.targetName&&w[L].stopTracks(I);v&&(p[v]=p[v]||{});var N=v?p[v]:p;(0,b.each)(I,function(Z){N[Z]=((v?c[v]:c)||{})[Z]}),m.whenWithKeys(u*x.percent,D,I,x.easing)}}}),m&&m.delay(s.delay||0).duration(u).start(s.easing))})}}}var bc="emphasis",Vu="normal",$m="blur",Km="select",kl=[Vu,bc,$m,Km],fx={normal:["itemStyle"],emphasis:[bc,"itemStyle"],blur:[$m,"itemStyle"],select:[Km,"itemStyle"]},Qm={normal:["label"],emphasis:[bc,"label"],blur:[$m,"label"],select:[Km,"label"]},Bt=["x","y"],Ya={normal:{},emphasis:{},blur:{},select:{}},px={cartesian2d:function sM(c){var s=c.master.getRect();return{coordSys:{type:"cartesian2d",x:s.x,y:s.y,width:s.width,height:s.height},api:{coord:function(a){return c.dataToPoint(a)},size:b.bind(sx,c)}}},geo:function cM(c){var s=c.getBoundingRect();return{coordSys:{type:"geo",x:s.x,y:s.y,width:s.width,height:s.height,zoom:c.getZoom()},api:{coord:function(a){return c.dataToPoint(a)},size:b.bind(lM,c)}}},single:function dM(c){var s=c.getRect();return{coordSys:{type:"singleAxis",x:s.x,y:s.y,width:s.width,height:s.height},api:{coord:function(a){return c.dataToPoint(a)},size:(0,b.bind)(uM,c)}}},polar:function fM(c){var s=c.getRadiusAxis(),a=c.getAngleAxis(),l=s.getExtent();return l[0]>l[1]&&l.reverse(),{coordSys:{type:"polar",cx:c.cx,cy:c.cy,r:l[1],r0:l[0]},api:{coord:function(u){var h=s.dataToRadius(u[0]),p=a.dataToAngle(u[1]),v=c.coordToPoint([h,p]);return v.push(h,p*Math.PI/180),v},size:b.bind(hM,c)}}},calendar:function pM(c){var s=c.getRect(),a=c.getRangeInfo();return{coordSys:{type:"calendar",x:s.x,y:s.y,width:s.width,height:s.height,cellWidth:c.getCellWidth(),cellHeight:c.getCellHeight(),rangeInfo:{start:a.start,end:a.end,weeks:a.weeks,dayCount:a.allDay}},api:{coord:function(l,u){return c.dataToPoint(l,u)}}}}};function qm(c){return c instanceof ge.ZP}function Jm(c){return c instanceof Du.ZP}const SM=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u,h){this._progressiveEls=null;var p=this._data,v=a.getData(),m=this.group,y=DM(a,v,l,u);p||m.removeAll(),v.diff(p).add(function(w){vx(u,null,w,y(w,h),a,m,v)}).remove(function(w){var D=p.getItemGraphicEl(w);D&&Ym(D,zi(D).option,a)}).update(function(w,D){var I=p.getItemGraphicEl(D);vx(u,I,w,y(w,h),a,m,v)}).execute();var x=a.get("clip",!0)?gh(a.coordinateSystem,!1,a):null;x?m.setClipPath(x):m.removeClipPath(),this._data=v},s.prototype.incrementalPrepareRender=function(a,l,u){this.group.removeAll(),this._data=null},s.prototype.incrementalRender=function(a,l,u,h,p){var v=l.getData(),m=DM(l,v,u,h),y=this._progressiveEls=[];function x(I){I.isGroup||(I.incremental=!0,I.ensureState("emphasis").hoverLayer=!0)}for(var w=a.start;w<a.end;w++){var D=vx(null,null,w,m(w,p),l,this.group,v);D&&(D.traverse(x),y.push(D))}},s.prototype.eachRendered=function(a){_n.traverseElements(this._progressiveEls||this.group,a)},s.prototype.filterForExposedEvent=function(a,l,u,h){var p=l.element;if(null==p||u.name===p)return!0;for(;(u=u.__hostTarget||u.parent)&&u!==this.group;)if(u.name===p)return!0;return!1},s.type="custom",s}(ia.Z);function e_(c){var a,s=c.type;if("path"===s){var l=c.shape,u=null!=l.width&&null!=l.height?{x:l.x||0,y:l.y||0,width:l.width,height:l.height}:null,h=yx(l);a=_n.makePath(h,null,u,l.layout||"center"),zi(a).customPathData=h}else if("image"===s)a=new be.ZP({}),zi(a).customImagePath=c.style.image;else if("text"===s)a=new _t.ZP({});else if("group"===s)a=new Rn.Z;else{if("compoundPath"===s)throw new Error('"compoundPath" is not supported yet.');var p=_n.getShapeClass(s);p||(0,_a._y)(""),a=new p}return zi(a).customGraphicType=s,a.name=c.name,a.z2EmphasisLift=1,a.z2SelectLift=1,a}function t_(c,s,a,l,u,h,p){Yh(s);var v=u&&u.normal.cfg;v&&s.setTextConfig(v),l&&null==l.transition&&(l.transition=Bt);var m=l&&l.style;if(m){if("text"===s.type){var y=m;(0,b.hasOwn)(y,"textFill")&&(y.fill=y.textFill),(0,b.hasOwn)(y,"textStroke")&&(y.stroke=y.textStroke)}var x=void 0,w=qm(s)?m.decal:null;c&&w&&(w.dirty=!0,x=(0,A0.I)(w,c)),m.__decalPattern=x}Jm(s)&&m&&(x=m.__decalPattern)&&(m.decal=x),Zm(s,l,h,{dataIndex:a,isInit:p,clearStyle:!0}),Xm(s,l.keyframeAnimation,h)}function gx(c,s,a,l,u){var h=s.isGroup?null:s,p=u&&u[c].cfg;if(h){var v=h.ensureState(c);if(!1===l){var m=h.getState(c);m&&(m.style=null)}else v.style=l||null;p&&(v.textConfig=p),(0,Wt.MA)(h)}}function EL(c,s,a){var l=a===Vu,u=l?s:n_(s,a),h=u?u.z2:null;null!=h&&((l?c:c.ensureState(a)).z2=h||0)}function DM(c,s,a,l){var u=c.get("renderItem"),h=c.coordinateSystem,p={};h&&(p=h.prepareCustoms?h.prepareCustoms(h):px[h.type](h));for(var y,x,v=(0,b.defaults)({getWidth:l.getWidth,getHeight:l.getHeight,getZr:l.getZr,getDevicePixelRatio:l.getDevicePixelRatio,value:function De(yt,wt){return null==wt&&(wt=y),s.getStore().get(s.getDimensionIndex(yt||0),wt)},style:function Ie(yt,wt){null==wt&&(wt=y);var kt=s.getItemVisual(wt,"style"),en=kt&&kt.fill,Yt=kt&&kt.opacity,dn=_e(wt,Vu).getItemStyle();null!=en&&(dn.fill=en),null!=Yt&&(dn.opacity=Yt);var Fn={inheritColor:(0,b.isString)(en)?en:"#000"},zn=me(wt,Vu),dr=qt.Lr(zn,null,Fn,!1,!0);dr.text=zn.getShallow("show")?(0,b.retrieve2)(c.getFormattedLabel(wt,Vu),El(s,wt)):null;var br=qt.nC(zn,Fn,!1);return Ye(yt,dn),dn=mM(dn,dr,br),yt&&Ue(dn,yt),dn.legacy=!0,dn},ordinalRawValue:function Pe(yt,wt){null==wt&&(wt=y);var kt=s.getDimensionInfo(yt=yt||0);if(!kt){var en=s.getDimensionIndex(yt);return en>=0?s.getStore().get(en,wt):void 0}var Yt=s.get(kt.name,wt),dn=kt&&kt.ordinalMeta;return dn?dn.categories[Yt]:Yt},styleEmphasis:function ke(yt,wt){null==wt&&(wt=y);var kt=_e(wt,bc).getItemStyle(),en=me(wt,bc),Yt=qt.Lr(en,null,null,!0,!0);Yt.text=en.getShallow("show")?(0,b.retrieve3)(c.getFormattedLabel(wt,bc),c.getFormattedLabel(wt,Vu),El(s,wt)):null;var dn=qt.nC(en,null,!0);return Ye(yt,kt),kt=mM(kt,Yt,dn),yt&&Ue(kt,yt),kt.legacy=!0,kt},visual:function Ke(yt,wt){if(null==wt&&(wt=y),(0,b.hasOwn)(Yn,yt)){var kt=s.getItemVisual(wt,"style");return kt?kt[Yn[yt]]:null}if((0,b.hasOwn)(bL,yt))return s.getItemVisual(wt,yt)},barLayout:function Je(yt){if("cartesian2d"===h.type){var wt=h.getBaseAxis();return(0,Ho.Gk)((0,b.defaults)({axis:wt},yt))}},currentSeriesIndices:function ut(){return a.getCurrentSeriesIndices()},font:function pt(yt){return qt.qT(yt,a)}},p.api||{}),m={context:{},seriesId:c.id,seriesName:c.name,seriesIndex:c.seriesIndex,coordSys:p.coordSys,dataInsideLength:s.count(),encode:AL(c.getData())},w={},D={},I={},L={},N=0;N<kl.length;N++){var Z=kl[N];I[Z]=c.getModel(fx[Z]),L[Z]=c.getModel(Qm[Z])}function se(yt){return yt===y?x||(x=s.getItemModel(yt)):s.getItemModel(yt)}function _e(yt,wt){return s.hasItemOption?yt===y?w[wt]||(w[wt]=se(yt).getModel(fx[wt])):se(yt).getModel(fx[wt]):I[wt]}function me(yt,wt){return s.hasItemOption?yt===y?D[wt]||(D[wt]=se(yt).getModel(Qm[wt])):se(yt).getModel(Qm[wt]):L[wt]}return function(yt,wt){return y=yt,x=null,w={},D={},u&&u((0,b.defaults)({dataIndexInside:yt,dataIndex:s.getRawIndex(yt),actionType:wt?wt.type:null},m),v)};function Ue(yt,wt){for(var kt in wt)(0,b.hasOwn)(wt,kt)&&(yt[kt]=wt[kt])}function Ye(yt,wt){yt&&(yt.textFill&&(wt.textFill=yt.textFill),yt.textPosition&&(wt.textPosition=yt.textPosition))}}function AL(c){var s={};return(0,b.each)(c.dimensions,function(a){var l=c.getDimensionInfo(a);if(!l.isExtraCoord){var u=l.coordDim;(s[u]=s[u]||[])[l.coordDimIndex]=c.getDimensionIndex(a)}}),s}function vx(c,s,a,l,u,h,p){if(l){var v=mx(c,s,a,l,u,h);return v&&p.setItemGraphicEl(a,v),v&&(0,Wt.k5)(v,l.focus,l.blurScope,l.emphasisDisabled),v}h.remove(s)}function mx(c,s,a,l,u,h){var p=-1,v=s;s&&MM(s,l,u)&&(p=(0,b.indexOf)(h.childrenRef(),s),s=null);var m=!s,y=s;y?y.clearStates():(y=e_(l),v&&function CM(c,s){s.copyTransform(c),Jm(s)&&Jm(c)&&(s.setStyle(c.style),s.z=c.z,s.z2=c.z2,s.zlevel=c.zlevel,s.invisible=c.invisible,s.ignore=c.ignore,qm(s)&&qm(c)&&s.setShape(c.shape))}(v,y)),!1===l.morph?y.disableMorphing=!0:y.disableMorphing&&(y.disableMorphing=!1),Ya.normal.cfg=Ya.normal.conOpt=Ya.emphasis.cfg=Ya.emphasis.conOpt=Ya.blur.cfg=Ya.blur.conOpt=Ya.select.cfg=Ya.select.conOpt=null,Ya.isLegacy=!1,function PL(c,s,a,l,u,h){if(!c.isGroup){TM(a,null,h),TM(a,bc,h);var p=h.normal.conOpt;if(null!=p||null!=h.emphasis.conOpt||null!=h.select.conOpt||null!=h.blur.conOpt){var x=c.getTextContent();if(!1===p)x&&c.removeTextContent();else{p=h.normal.conOpt=p||{type:"text"},x?x.clearStates():(x=e_(p),c.setTextContent(x)),t_(null,x,s,p,null,l,u);for(var w=p&&p.style,D=0;D<kl.length;D++){var I=kl[D];if(I!==Vu)gx(I,x,0,_x(p,h[I].conOpt,I),null)}w?x.dirty():x.markRedraw()}}}}(y,a,l,u,m,Ya),function IL(c,s,a,l,u){var h=a.clipPath;if(!1===h)c&&c.getClipPath()&&c.removeClipPath();else if(h){var p=c.getClipPath();p&&MM(p,h,l)&&(p=null),p||(p=e_(h),c.setClipPath(p)),t_(null,p,s,h,null,l,u)}}(y,a,l,u,m),t_(c,y,a,l,Ya,u,m),(0,b.hasOwn)(l,"info")&&(zi(y).info=l.info);for(var x=0;x<kl.length;x++){var w=kl[x];if(w!==Vu)gx(w,y,0,_x(l,n_(l,w),w),Ya)}return function TL(c,s,a){if(!c.isGroup){var l=c,h=a.currentZLevel;l.z=a.currentZ,l.zlevel=h;var p=s.z2;null!=p&&(l.z2=p||0);for(var v=0;v<kl.length;v++)EL(l,s,kl[v])}}(y,l,u),"group"===l.type&&function RL(c,s,a,l,u){var h=l.children,p=h?h.length:0,v=l.$mergeChildren,m="byName"===v||l.diffChildrenByName,y=!1===v;if(p||m||y){if(m)return void function OL(c){new dc.Z(c.oldChildren,c.newChildren,EM,EM,c).add(AM).update(AM).remove(IM).execute()}({api:c,oldChildren:s.children()||[],newChildren:h||[],dataIndex:a,seriesModel:u,group:s});y&&s.removeAll();for(var x=0;x<p;x++){var w=h[x],D=s.childAt(x);w?(null==w.ignore&&(w.ignore=!1),mx(c,D,a,w,u,s)):D.ignore=!0}for(var I=s.childCount()-1;I>=x;I--){var L=s.childAt(I);LL(s,L,u)}}}(c,y,a,l,u),p>=0?h.replaceAt(y,p):h.add(y),y}function MM(c,s,a){var l=zi(c),u=s.type,h=s.shape,p=s.style;return a.isUniversalTransitionEnabled()||null!=u&&u!==l.customGraphicType||"path"===u&&function PM(c){return c&&((0,b.hasOwn)(c,"pathData")||(0,b.hasOwn)(c,"d"))}(h)&&yx(h)!==l.customPathData||"image"===u&&(0,b.hasOwn)(p,"image")&&p.image!==l.customImagePath}function TM(c,s,a){var l=s?n_(c,s):c,u=s?_x(c,l,bc):c.style,h=c.type,p=l?l.textConfig:null,v=c.textContent,m=v?s?n_(v,s):v:null;if(u&&(a.isLegacy||gM(u,h,!!p,!!m))){a.isLegacy=!0;var y=vM(u,h,!s);!p&&y.textConfig&&(p=y.textConfig),!m&&y.textContent&&(m=y.textContent)}!s&&m&&!m.type&&(m.type="text");var w=s?a[s]:a.normal;w.cfg=p,w.conOpt=m}function n_(c,s){return s?c?c[s]:null:c}function _x(c,s,a){var l=s&&s.style;return null==l&&a===bc&&c&&(l=c.styleEmphasis),l}function LL(c,s,a){s&&Ym(s,zi(c).option,a)}function EM(c,s){return(c&&c.name)??"e\0\0"+s}function AM(c,s){var a=this.context;mx(a.api,null!=s?a.oldChildren[s]:null,a.dataIndex,null!=c?a.newChildren[c]:null,a.seriesModel,a.group)}function IM(c){var s=this.context,a=s.oldChildren[c];a&&Ym(a,zi(a).option,s.seriesModel)}function yx(c){return c&&(c.pathData||c.d)}var zu=(0,xn.Yf)(),bx=b.clone,r_=b.bind;function xx(c,s,a,l){Nl(zu(a).lastProp,l)||(zu(a).lastProp=l,s?Sn.D(a,l,c):(a.stopAnimation(),a.attr(l)))}function Nl(c,s){if(b.isObject(c)&&b.isObject(s)){var a=!0;return b.each(s,function(l,u){a=a&&Nl(c[u],l)}),!!a}return c===s}function Xh(c,s){c[s.get(["label","show"])?"show":"hide"]()}function Jc(c){return{x:c.x||0,y:c.y||0,rotation:c.rotation||0}}function OM(c,s,a){var l=s.get("z"),u=s.get("zlevel");c&&c.traverse(function(h){"group"!==h.type&&(null!=l&&(h.z=l),null!=u&&(h.zlevel=u),h.silent=a)})}const Cx=function(){function c(){this._dragging=!1,this.animationThreshold=15}return c.prototype.render=function(s,a,l,u){var h=a.get("value"),p=a.get("status");if(this._axisModel=s,this._axisPointerModel=a,this._api=l,u||this._lastValue!==h||this._lastStatus!==p){this._lastValue=h,this._lastStatus=p;var v=this._group,m=this._handle;if(!p||"hide"===p)return v&&v.hide(),void(m&&m.hide());v&&v.show(),m&&m.show();var y={};this.makeElOption(y,h,s,a,l);var x=y.graphicKey;x!==this._lastGraphicKey&&this.clear(l),this._lastGraphicKey=x;var w=this._moveAnimation=this.determineAnimation(s,a);if(v){var D=b.curry(xx,a,w);this.updatePointerEl(v,y,D),this.updateLabelEl(v,y,D,a)}else v=this._group=new Rn.Z,this.createPointerEl(v,y,s,a),this.createLabelEl(v,y,s,a),l.getZr().add(v);OM(v,a,!0),this._renderHandle(h)}},c.prototype.remove=function(s){this.clear(s)},c.prototype.dispose=function(s){this.clear(s)},c.prototype.determineAnimation=function(s,a){var l=a.get("animation"),u=s.axis,h="category"===u.type,p=a.get("snap");if(!p&&!h)return!1;if("auto"===l||null==l){var v=this.animationThreshold;if(h&&u.getBandWidth()>v)return!0;if(p){var m=ep(s).seriesDataCount,y=u.getExtent();return Math.abs(y[0]-y[1])/m>v}return!1}return!0===l},c.prototype.makeElOption=function(s,a,l,u,h){},c.prototype.createPointerEl=function(s,a,l,u){var h=a.pointer;if(h){var p=zu(s).pointerEl=new _n[h.type](bx(a.pointer));s.add(p)}},c.prototype.createLabelEl=function(s,a,l,u){if(a.label){var h=zu(s).labelEl=new _t.ZP(bx(a.label));s.add(h),Xh(h,u)}},c.prototype.updatePointerEl=function(s,a,l){var u=zu(s).pointerEl;u&&a.pointer&&(u.setStyle(a.pointer.style),l(u,{shape:a.pointer.shape}))},c.prototype.updateLabelEl=function(s,a,l,u){var h=zu(s).labelEl;h&&(h.setStyle(a.label.style),l(h,{x:a.label.x,y:a.label.y}),Xh(h,u))},c.prototype._renderHandle=function(s){if(!this._dragging&&this.updateHandleTransform){var v,a=this._axisPointerModel,l=this._api.getZr(),u=this._handle,h=a.getModel("handle"),p=a.get("status");if(!h.get("show")||!p||"hide"===p)return u&&l.remove(u),void(this._handle=null);this._handle||(v=!0,u=this._handle=_n.createIcon(h.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(y){rl.sT(y.event)},onmousedown:r_(this._onHandleDragMove,this,0,0),drift:r_(this._onHandleDragMove,this),ondragend:r_(this._onHandleDragEnd,this)}),l.add(u)),OM(u,a,!1),u.setStyle(h.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var m=h.get("size");b.isArray(m)||(m=[m,m]),u.scaleX=m[0]/2,u.scaleY=m[1]/2,Uo.T9(this,"_doDispatchAxisPointer",h.get("throttle")||0,"fixRate"),this._moveHandleToValue(s,v)}},c.prototype._moveHandleToValue=function(s,a){xx(this._axisPointerModel,!a&&this._moveAnimation,this._handle,Jc(this.getHandleTransform(s,this._axisModel,this._axisPointerModel)))},c.prototype._onHandleDragMove=function(s,a){var l=this._handle;if(l){this._dragging=!0;var u=this.updateHandleTransform(Jc(l),[s,a],this._axisModel,this._axisPointerModel);this._payloadInfo=u,l.stopAnimation(),l.attr(Jc(u)),zu(l).lastProp=null,this._doDispatchAxisPointer()}},c.prototype._doDispatchAxisPointer=function(){if(this._handle){var a=this._payloadInfo,l=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:a.cursorPoint[0],y:a.cursorPoint[1],tooltipOption:a.tooltipOption,axesInfo:[{axisDim:l.axis.dim,axisIndex:l.componentIndex}]})}},c.prototype._onHandleDragEnd=function(){if(this._dragging=!1,this._handle){var a=this._axisPointerModel.get("value");this._moveHandleToValue(a),this._api.dispatchAction({type:"hideTip"})}},c.prototype.clear=function(s){this._lastValue=null,this._lastStatus=null;var a=s.getZr(),l=this._group,u=this._handle;a&&l&&(this._lastGraphicKey=null,l&&a.remove(l),u&&a.remove(u),this._group=null,this._handle=null,this._payloadInfo=null),Uo.ZH(this,"_doDispatchAxisPointer")},c.prototype.doClear=function(){},c.prototype.buildLabel=function(s,a,l){return{x:s[l=l||0],y:s[1-l],width:a[l],height:a[1-l]}},c}();function Hu(c){var l,s=c.get("type"),a=c.getModel(s+"Style");return"line"===s?(l=a.getLineStyle()).fill=null:"shadow"===s&&((l=a.getAreaStyle()).stroke=null),l}function kL(c,s,a,l,u){var p=NL(a.get("value"),s.axis,s.ecModel,a.get("seriesDataIndices"),{precision:a.get(["label","precision"]),formatter:a.get(["label","formatter"])}),v=a.getModel("label"),m=Va.MY(v.get("padding")||0),y=v.getFont(),x=Ce.lP(p,y),w=u.position,D=x.width+m[1]+m[3],I=x.height+m[0]+m[2],L=u.align;"right"===L&&(w[0]-=D),"center"===L&&(w[0]-=D/2);var N=u.verticalAlign;"bottom"===N&&(w[1]-=I),"middle"===N&&(w[1]-=I/2),function ps(c,s,a,l){var u=l.getWidth(),h=l.getHeight();c[0]=Math.min(c[0]+s,u)-s,c[1]=Math.min(c[1]+a,h)-a,c[0]=Math.max(c[0],0),c[1]=Math.max(c[1],0)}(w,D,I,l);var Z=v.get("backgroundColor");(!Z||"auto"===Z)&&(Z=s.get(["axisLine","lineStyle","color"])),c.label={x:w[0],y:w[1],style:(0,qt.Lr)(v,{text:p,font:y,fill:v.getTextColor(),padding:m,backgroundColor:Z}),z2:10}}function NL(c,s,a,l,u){c=s.scale.parse(c);var h=s.scale.getLabel({value:c},{precision:u.precision}),p=u.formatter;if(p){var v={value:ki.DX(s,{value:c}),axisDimension:s.dim,axisIndex:s.index,seriesData:[]};b.each(l,function(m){var y=a.getSeriesByIndex(m.seriesIndex),w=y&&y.getDataParams(m.dataIndexInside);w&&v.seriesData.push(w)}),b.isString(p)?h=p.replace("{value}",h):b.isFunction(p)&&(h=p(v))}return h}function i_(c,s,a){var l=xi.create();return xi.rotate(l,l,a.rotation),xi.translate(l,l,a.position),_n.applyTransform([c.dataToCoord(s),(a.labelOffset||0)+(a.labelDirection||1)*(a.labelMargin||0)],l)}function Sx(c,s,a,l,u,h){var p=Ao.innerTextLayout(a.rotation,0,a.labelDirection);a.labelMargin=u.get(["label","margin"]),kL(s,l,u,h,{position:i_(l.axis,c,a),align:p.textAlign,verticalAlign:p.textVerticalAlign})}function kM(c,s,a){return{x1:c[a=a||0],y1:c[1-a],x2:s[a],y2:s[1-a]}}function Hn(c,s,a){return{x:c[a=a||0],y:c[1-a],width:s[a],height:s[1-a]}}function NM(c,s,a,l,u,h){return{cx:c,cy:s,r0:a,r:l,startAngle:u,endAngle:h,clockwise:!0}}var FL=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,At.ZT)(s,c),s.prototype.makeElOption=function(a,l,u,h,p){var v=u.axis,m=v.grid,y=h.get("type"),x=FM(m,v).getOtherAxis(v).getGlobalExtent(),w=v.toGlobalCoord(v.dataToCoord(l,!0));if(y&&"none"!==y){var D=Hu(h),I=$h[y](v,w,x);I.style=D,a.graphicKey=I.type,a.pointer=I}Sx(l,a,Or(m.model,u),u,h,p)},s.prototype.getHandleTransform=function(a,l,u){var h=Or(l.axis.grid.model,l,{labelInside:!1});h.labelMargin=u.get(["handle","margin"]);var p=i_(l.axis,a,h);return{x:p[0],y:p[1],rotation:h.rotation+(h.labelDirection<0?Math.PI:0)}},s.prototype.updateHandleTransform=function(a,l,u,h){var p=u.axis,v=p.grid,m=p.getGlobalExtent(!0),y=FM(v,p).getOtherAxis(p).getGlobalExtent(),x="x"===p.dim?0:1,w=[a.x,a.y];w[x]+=l[x],w[x]=Math.min(m[1],w[x]),w[x]=Math.max(m[0],w[x]);var D=(y[1]+y[0])/2,I=[D,D];return I[x]=w[x],{x:w[0],y:w[1],rotation:a.rotation,cursorPoint:I,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][x]}},s}(Cx);function FM(c,s){var a={};return a[s.dim+"AxisIndex"]=s.index,c.getCartesian(a)}var $h={line:function(c,s,a){return{type:"Line",subPixelOptimize:!0,shape:kM([s,a[0]],[s,a[1]],BM(c))}},shadow:function(c,s,a){var l=Math.max(1,c.getBandWidth());return{type:"Rect",shape:Hn([s-l/2,a[0]],[l,a[1]-a[0]],BM(c))}}};function BM(c){return"x"===c.dim?0:1}const a_=FL,Ea=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.type="axisPointer",s.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},s}(ma.Z);var Es=H(169),xc=(0,xn.Yf)(),VM=b.each;function zM(c,s,a){if(!Es.Z.node){var l=s.getZr();xc(l).records||(xc(l).records={}),function HM(c,s){function a(l,u){c.on(l,function(h){var p=function BL(c){var s={showTip:[],hideTip:[]},a=function(l){var u=s[l.type];u?u.push(l):(l.dispatchAction=a,c.dispatchAction(l))};return{dispatchAction:a,pendings:s}}(s);VM(xc(c).records,function(v){v&&u(v,h,p.dispatchAction)}),function UM(c,s){var u,a=c.showTip.length,l=c.hideTip.length;a?u=c.showTip[a-1]:l&&(u=c.hideTip[l-1]),u&&(u.dispatchAction=null,s.dispatchAction(u))}(p.pendings,s)})}xc(c).initialized||(xc(c).initialized=!0,a("click",b.curry(Dx,"click")),a("mousemove",b.curry(Dx,"mousemove")),a("globalout",GM))}(l,s),(xc(l).records[c]||(xc(l).records[c]={})).handler=a}}function GM(c,s,a){c.handler("leave",null,a)}function Dx(c,s,a,l){s.handler(c,a,l)}function Mx(c,s){if(!Es.Z.node){var a=s.getZr();(xc(a).records||{})[c]&&(xc(a).records[c]=null)}}const Yp=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u){var h=l.getComponent("tooltip"),p=a.get("triggerOn")||h&&h.get("triggerOn")||"mousemove|click";zM("axisPointer",u,function(v,m,y){"none"!==p&&("leave"===v||p.indexOf(v)>=0)&&y({type:"updateAxisPointer",currTrigger:v,x:m&&m.offsetX,y:m&&m.offsetY})})},s.prototype.remove=function(a,l){Mx("axisPointer",l)},s.prototype.dispose=function(a,l){Mx("axisPointer",l)},s.type="axisPointer",s}(va.Z);function WM(c,s){var u,a=[],l=c.seriesIndex;if(null==l||!(u=s.getSeriesByIndex(l)))return{point:[]};var h=u.getData(),p=xn.gO(h,c);if(null==p||p<0||b.isArray(p))return{point:[]};var v=h.getItemGraphicEl(p),m=u.coordinateSystem;if(u.getTooltipPosition)a=u.getTooltipPosition(p)||[];else if(m&&m.dataToPoint)if(c.isStacked){var y=m.getBaseAxis(),w=m.getOtherAxis(y).dim,I="x"===w||"radius"===w?1:0,L=h.mapDimension(y.dim),N=[];N[I]=h.get(L,p),N[1-I]=h.get(h.getCalculationInfo("stackResultDimension"),p),a=m.dataToPoint(N)||[]}else a=m.dataToPoint(h.getValues(b.map(m.dimensions,function(se){return h.mapDimension(se)}),p))||[];else if(v){var Z=v.getBoundingRect().clone();Z.applyTransform(v.transform),a=[Z.x+Z.width/2,Z.y+Z.height/2]}return{point:a,el:v}}var jM=(0,xn.Yf)();function zL(c,s,a){var l=c.currTrigger,u=[c.x,c.y],h=c,p=c.dispatchAction||(0,b.bind)(a.dispatchAction,a),v=s.getComponent("axisPointer").coordSysAxesInfo;if(v){s_(u)&&(u=WM({seriesIndex:h.seriesIndex,dataIndex:h.dataIndex},s).point);var m=s_(u),y=h.axesInfo,x=v.axesInfo,w="leave"===l||s_(u),D={},I={},L={list:[],map:{}},N={showPointer:(0,b.curry)(YM,I),showTooltip:(0,b.curry)(XM,L)};(0,b.each)(v.coordSysMap,function(se,_e){var me=m||se.containPoint(u);(0,b.each)(v.coordSysAxesInfo[_e],function(De,Pe){var Ie=De.axis,ke=function UL(c,s){for(var a=0;a<(c||[]).length;a++){var l=c[a];if(s.axis.dim===l.axisDim&&s.axis.model.componentIndex===l.axisIndex)return l}}(y,De);if(!w&&me&&(!y||ke)){var Ue=ke&&ke.value;null==Ue&&!m&&(Ue=Ie.pointToData(u)),null!=Ue&&Xp(De,Ue,N,!1,D)}})});var Z={};return(0,b.each)(x,function(se,_e){var me=se.linkGroup;me&&!I[_e]&&(0,b.each)(me.axesInfo,function(De,Pe){var Ie=I[Pe];if(De!==se&&Ie){var ke=Ie.value;me.mapper&&(ke=se.axis.scale.parse(me.mapper(ke,$M(De),$M(se)))),Z[se.key]=ke}})}),(0,b.each)(Z,function(se,_e){Xp(x[_e],se,N,!0,D)}),function HL(c,s,a){var l=a.axesInfo=[];(0,b.each)(s,function(u,h){var p=u.axisPointerModel.option,v=c[h];v?(!u.useHandle&&(p.status="show"),p.value=v.value,p.seriesDataIndices=(v.payloadBatch||[]).slice()):!u.useHandle&&(p.status="hide"),"show"===p.status&&l.push({axisDim:u.axis.dim,axisIndex:u.axis.model.componentIndex,value:p.value})})}(I,x,D),function $p(c,s,a,l){if(!s_(s)&&c.list.length){var u=((c.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};l({type:"showTip",escapeConnect:!0,x:s[0],y:s[1],tooltipOption:a.tooltipOption,position:a.position,dataIndexInside:u.dataIndexInside,dataIndex:u.dataIndex,seriesIndex:u.seriesIndex,dataByCoordSys:c.list})}else l({type:"hideTip"})}(L,u,c,p),function Kp(c,s,a){var l=a.getZr(),u="axisPointerLastHighlights",h=jM(l)[u]||{},p=jM(l)[u]={};(0,b.each)(c,function(y,x){var w=y.axisPointerModel.option;"show"===w.status&&(0,b.each)(w.seriesDataIndices,function(D){p[D.seriesIndex+" | "+D.dataIndex]=D})});var v=[],m=[];(0,b.each)(h,function(y,x){!p[x]&&m.push(y)}),(0,b.each)(p,function(y,x){!h[x]&&v.push(y)}),m.length&&a.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:m}),v.length&&a.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:v})}(x,0,a),D}}function Xp(c,s,a,l,u){var h=c.axis;if(!h.scale.isBlank()&&h.containData(s)){if(!c.involveSeries)return void a.showPointer(c,s);var p=function ZM(c,s){var a=s.axis,l=a.dim,u=c,h=[],p=Number.MAX_VALUE,v=-1;return(0,b.each)(s.seriesModels,function(m,y){var w,D,x=m.getData().mapDimensionsAll(l);if(m.getAxisTooltipData){var I=m.getAxisTooltipData(x,c,a);D=I.dataIndices,w=I.nestestValue}else{if(!(D=m.getData().indicesOfNearest(x[0],c,"category"===a.type?.5:null)).length)return;w=m.getData().get(x[0],D[0])}if(null!=w&&isFinite(w)){var L=c-w,N=Math.abs(L);N<=p&&((N<p||L>=0&&v<0)&&(p=N,v=L,u=w,h.length=0),(0,b.each)(D,function(Z){h.push({seriesIndex:m.seriesIndex,dataIndexInside:Z,dataIndex:m.getData().getRawIndex(Z)})}))}}),{payloadBatch:h,snapToValue:u}}(s,c),v=p.payloadBatch,m=p.snapToValue;v[0]&&null==u.seriesIndex&&(0,b.extend)(u,v[0]),!l&&c.snap&&h.containData(m)&&null!=m&&(s=m),a.showPointer(c,s,v),a.showTooltip(c,p,m)}}function YM(c,s,a,l){c[s.key]={value:a,payloadBatch:l}}function XM(c,s,a,l){var u=a.payloadBatch,h=s.axis,p=h.model,v=s.axisPointerModel;if(s.triggerTooltip&&u.length){var m=s.coordSys.model,y=dd(m),x=c.map[y];x||(x=c.map[y]={coordSysId:m.id,coordSysIndex:m.componentIndex,coordSysType:m.type,coordSysMainType:m.mainType,dataByAxis:[]},c.list.push(x)),x.dataByAxis.push({axisDim:h.dim,axisIndex:p.componentIndex,axisType:p.type,axisId:p.id,value:l,valueLabelOpt:{precision:v.get(["label","precision"]),formatter:v.get(["label","formatter"])},seriesDataIndices:u.slice()})}}function $M(c){var s=c.axis.model,a={},l=a.axisDim=c.axis.dim;return a.axisIndex=a[l+"AxisIndex"]=s.componentIndex,a.axisName=a[l+"AxisName"]=s.name,a.axisId=a[l+"AxisId"]=s.id,a}function s_(c){return!c||null==c[0]||isNaN(c[0])||null==c[1]||isNaN(c[1])}function Kh(c){Cu.registerAxisPointerClass("CartesianAxisPointer",a_),c.registerComponentModel(Ea),c.registerComponentView(Yp),c.registerPreprocessor(function(s){if(s){(!s.axisPointer||0===s.axisPointer.length)&&(s.axisPointer={});var a=s.axisPointer.link;a&&!(0,b.isArray)(a)&&(s.axisPointer.link=[a])}}),c.registerProcessor(c.PRIORITY.PROCESSOR.STATISTIC,function(s,a){s.getComponent("axisPointer").coordSysAxesInfo=function LP(c,s){var a={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function Iw(c,s,a){var l=s.getComponent("tooltip"),u=s.getComponent("axisPointer"),h=u.get("link",!0)||[],p=[];(0,b.each)(a.getCoordinateSystems(),function(v){if(v.axisPointerEnabled){var m=dd(v.model),y=c.coordSysAxesInfo[m]={};c.coordSysMap[m]=v;var w=v.model.getModel("tooltip",l);if((0,b.each)(v.getAxes(),(0,b.curry)(N,!1,null)),v.getTooltipAxes&&l&&w.get("show")){var D="axis"===w.get("trigger"),I="cross"===w.get(["axisPointer","type"]),L=v.getTooltipAxes(w.get(["axisPointer","axis"]));(D||I)&&(0,b.each)(L.baseAxes,(0,b.curry)(N,!I||"cross",D)),I&&(0,b.each)(L.otherAxes,(0,b.curry)(N,"cross",!1))}}function N(Z,se,_e){var me=_e.model.getModel("axisPointer",u),De=me.get("show");if(De&&("auto"!==De||Z||Tv(me))){null==se&&(se=me.get("triggerTooltip")),me=Z?function OP(c,s,a,l,u,h){var p=s.getModel("axisPointer"),m={};(0,b.each)(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(D){m[D]=(0,b.clone)(p.get(D))}),m.snap="category"!==c.type&&!!h,"cross"===p.get("type")&&(m.type="line");var y=m.label||(m.label={});if(null==y.show&&(y.show=!1),"cross"===u){var x=p.get(["label","show"]);if(y.show=x??!0,!h){var w=m.lineStyle=p.get("crossStyle");w&&(0,b.defaults)(y,w.textStyle)}}return c.model.getModel("axisPointer",new ka.Z(m,a,l))}(_e,w,u,s,Z,se):me;var Pe=me.get("snap"),Ie=dd(_e.model),ke=se||Pe||"category"===_e.type,Ue=c.axesInfo[Ie]={key:Ie,axis:_e,coordSys:v,axisPointerModel:me,triggerTooltip:se,involveSeries:ke,snap:Pe,useHandle:Tv(me),seriesModels:[],linkGroup:null};y[Ie]=Ue,c.seriesInvolved=c.seriesInvolved||ke;var Ye=function y0(c,s){for(var a=s.model,l=s.dim,u=0;u<c.length;u++){var h=c[u]||{};if(Jf(h[l+"AxisId"],a.id)||Jf(h[l+"AxisIndex"],a.componentIndex)||Jf(h[l+"AxisName"],a.name))return u}}(h,_e);if(null!=Ye){var Ke=p[Ye]||(p[Ye]={axesInfo:{}});Ke.axesInfo[Ie]=Ue,Ke.mapper=h[Ye].mapper,Ue.linkGroup=Ke}}}})}(a,c,s),a.seriesInvolved&&function kP(c,s){s.eachSeries(function(a){var l=a.coordinateSystem,u=a.get(["tooltip","trigger"],!0),h=a.get(["tooltip","show"],!0);!l||"none"===u||!1===u||"item"===u||!1===h||!1===a.get(["axisPointer","show"],!0)||(0,b.each)(c.coordSysAxesInfo[dd(l.model)],function(p){var v=p.axis;l.getAxis(v.dim)===v&&(p.seriesModels.push(a),null==p.seriesDataCount&&(p.seriesDataCount=0),p.seriesDataCount+=a.getData().count())})})}(a,c),a}(s,a)}),c.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},zL)}var QM=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,At.ZT)(s,c),s.prototype.makeElOption=function(a,l,u,h,p){var v=u.axis;"angle"===v.dim&&(this.animationThreshold=Math.PI/18);var m=v.polar,x=m.getOtherAxis(v).getExtent(),w=v.dataToCoord(l),D=h.get("type");if(D&&"none"!==D){var I=Hu(h),L=qM[D](v,m,w,x);L.style=I,a.graphicKey=L.type,a.pointer=L}var Z=function GL(c,s,a,l,u){var h=s.axis,p=h.dataToCoord(c),v=l.getAngleAxis().getExtent()[0];v=v/180*Math.PI;var y,x,w,m=l.getRadiusAxis().getExtent();if("radius"===h.dim){var D=xi.create();xi.rotate(D,D,v),xi.translate(D,D,[l.cx,l.cy]),y=_n.applyTransform([p,-u],D);var I=s.getModel("axisLabel").get("rotate")||0,L=Ao.innerTextLayout(v,I*Math.PI/180,-1);x=L.textAlign,w=L.textVerticalAlign}else{var N=m[1];y=l.coordToPoint([N+u,p]);var Z=l.cx,se=l.cy;x=Math.abs(y[0]-Z)/N<.3?"center":y[0]>Z?"left":"right",w=Math.abs(y[1]-se)/N<.3?"middle":y[1]>se?"top":"bottom"}return{position:y,align:x,verticalAlign:w}}(l,u,0,m,h.get(["label","margin"]));kL(a,u,h,p,Z)},s}(Cx),qM={line:function(c,s,a,l){return"angle"===c.dim?{type:"Line",shape:kM(s.coordToPoint([l[0],a]),s.coordToPoint([l[1],a]))}:{type:"Circle",shape:{cx:s.cx,cy:s.cy,r:a}}},shadow:function(c,s,a,l){var u=Math.max(1,c.getBandWidth()),h=Math.PI/180;return"angle"===c.dim?{type:"Sector",shape:NM(s.cx,s.cy,l[0],l[1],(-a-u/2)*h,(u/2-a)*h)}:{type:"Sector",shape:NM(s.cx,s.cy,a-u/2,a+u/2,0,2*Math.PI)}}};const WL=QM,Y5=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.findAxisModel=function(a){var l;return this.ecModel.eachComponent(a,function(h){h.getCoordSysModel()===this&&(l=h)},this),l},s.type="polar",s.dependencies=["radiusAxis","angleAxis"],s.defaultOption={z:0,center:["50%","50%"],radius:"80%"},s}(ma.Z);var JM=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,At.ZT)(s,c),s.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",xn.C6).models[0]},s.type="polarAxis",s}(ma.Z);b.mixin(JM,$f.W);var X5=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.type="angleAxis",s}(JM),$5=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.type="radiusAxis",s}(JM),l_=function(c){function s(a,l){return c.call(this,"radius",a,l)||this}return(0,At.ZT)(s,c),s.prototype.pointToData=function(a,l){return this.polar.pointToData(a,l)["radius"===this.dim?0:1]},s}(fo.Z);l_.prototype.dataToRadius=fo.Z.prototype.dataToCoord,l_.prototype.radiusToData=fo.Z.prototype.coordToData;const c_=l_;var ZL=(0,xn.Yf)(),Tx=function(c){function s(a,l){return c.call(this,"angle",a,l||[0,360])||this}return(0,At.ZT)(s,c),s.prototype.pointToData=function(a,l){return this.polar.pointToData(a,l)["radius"===this.dim?0:1]},s.prototype.calculateCategoryInterval=function(){var a=this,l=a.getLabelModel(),u=a.scale,h=u.getExtent(),p=u.count();if(h[1]-h[0]<1)return 0;var v=h[0],m=a.dataToCoord(v+1)-a.dataToCoord(v),y=Math.abs(m),x=Ce.lP(null==v?"":v+"",l.getFont(),"center","top"),D=Math.max(x.height,7)/y;isNaN(D)&&(D=1/0);var I=Math.max(0,Math.floor(D)),L=ZL(a.model),N=L.lastAutoInterval,Z=L.lastTickCount;return null!=N&&null!=Z&&Math.abs(N-I)<=1&&Math.abs(Z-p)<=1&&N>I?I=N:(L.lastTickCount=p,L.lastAutoInterval=I),I},s}(fo.Z);Tx.prototype.dataToAngle=fo.Z.prototype.dataToCoord,Tx.prototype.angleToData=fo.Z.prototype.coordToData;const eT=Tx;var Qh=["radius","angle"];function tT(c){var s=c.seriesModel,a=c.polarModel;return a&&a.coordinateSystem||s&&s.coordinateSystem}const XL=function(){function c(s){this.dimensions=Qh,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new c_,this._angleAxis=new eT,this.axisPointerEnabled=!0,this.name=s||"",this._radiusAxis.polar=this._angleAxis.polar=this}return c.prototype.containPoint=function(s){var a=this.pointToCoord(s);return this._radiusAxis.contain(a[0])&&this._angleAxis.contain(a[1])},c.prototype.containData=function(s){return this._radiusAxis.containData(s[0])&&this._angleAxis.containData(s[1])},c.prototype.getAxis=function(s){return this["_"+s+"Axis"]},c.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},c.prototype.getAxesByScale=function(s){var a=[],l=this._angleAxis,u=this._radiusAxis;return l.scale.type===s&&a.push(l),u.scale.type===s&&a.push(u),a},c.prototype.getAngleAxis=function(){return this._angleAxis},c.prototype.getRadiusAxis=function(){return this._radiusAxis},c.prototype.getOtherAxis=function(s){var a=this._angleAxis;return s===a?this._radiusAxis:a},c.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},c.prototype.getTooltipAxes=function(s){var a=null!=s&&"auto"!==s?this.getAxis(s):this.getBaseAxis();return{baseAxes:[a],otherAxes:[this.getOtherAxis(a)]}},c.prototype.dataToPoint=function(s,a){return this.coordToPoint([this._radiusAxis.dataToRadius(s[0],a),this._angleAxis.dataToAngle(s[1],a)])},c.prototype.pointToData=function(s,a){var l=this.pointToCoord(s);return[this._radiusAxis.radiusToData(l[0],a),this._angleAxis.angleToData(l[1],a)]},c.prototype.pointToCoord=function(s){var a=s[0]-this.cx,l=s[1]-this.cy,u=this.getAngleAxis(),h=u.getExtent(),p=Math.min(h[0],h[1]),v=Math.max(h[0],h[1]);u.inverse?p=v-360:v=p+360;var m=Math.sqrt(a*a+l*l);a/=m,l/=m;for(var y=Math.atan2(-l,a)/Math.PI*180,x=y<p?1:-1;y<p||y>v;)y+=360*x;return[m,y]},c.prototype.coordToPoint=function(s){var a=s[0],l=s[1]/180*Math.PI;return[Math.cos(l)*a+this.cx,-Math.sin(l)*a+this.cy]},c.prototype.getArea=function(){var s=this.getAngleAxis(),l=this.getRadiusAxis().getExtent().slice();l[0]>l[1]&&l.reverse();var u=s.getExtent(),h=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:l[0],r:l[1],startAngle:-u[0]*h,endAngle:-u[1]*h,clockwise:s.inverse,contain:function(p,v){var m=p-this.cx,y=v-this.cy,x=m*m+y*y-1e-4,w=this.r,D=this.r0;return x<=w*w&&x>=D*D}}},c.prototype.convertToPixel=function(s,a,l){return tT(a)===this?this.dataToPoint(l):null},c.prototype.convertFromPixel=function(s,a,l){return tT(a)===this?this.pointToData(l):null},c}();function KL(c,s){var a=this,l=a.getAngleAxis(),u=a.getRadiusAxis();if(l.scale.setExtent(1/0,-1/0),u.scale.setExtent(1/0,-1/0),c.eachSeries(function(v){if(v.coordinateSystem===a){var m=v.getData();b.each((0,ki.PY)(m,"radius"),function(y){u.scale.unionExtentFromData(m,y)}),b.each((0,ki.PY)(m,"angle"),function(y){l.scale.unionExtentFromData(m,y)})}}),(0,ki.Jk)(l.scale,l.model),(0,ki.Jk)(u.scale,u.model),"category"===l.type&&!l.onBand){var h=l.getExtent(),p=360/l.scale.count();l.inverse?h[1]+=p:h[1]-=p,l.setExtent(h[0],h[1])}}function rT(c,s){if(c.type=s.get("type"),c.scale=(0,ki.aG)(s),c.onBand=s.get("boundaryGap")&&"category"===c.type,c.inverse=s.get("inverse"),function nT(c){return"angleAxis"===c.mainType}(s)){c.inverse=c.inverse!==s.get("clockwise");var a=s.get("startAngle");c.setExtent(a,a+(c.inverse?-360:360))}s.axis=c,c.model=s}const Qp={dimensions:Qh,create:function(c,s){var a=[];return c.eachComponent("polar",function(l,u){var h=new XL(u+"");h.update=KL;var p=h.getRadiusAxis(),v=h.getAngleAxis(),m=l.findAxisModel("radiusAxis"),y=l.findAxisModel("angleAxis");rT(p,m),rT(v,y),function $L(c,s,a){var l=s.get("center"),u=a.getWidth(),h=a.getHeight();c.cx=(0,It.GM)(l[0],u),c.cy=(0,It.GM)(l[1],h);var p=c.getRadiusAxis(),v=Math.min(u,h)/2,m=s.get("radius");null==m?m=[0,"100%"]:b.isArray(m)||(m=[0,m]);var y=[(0,It.GM)(m[0],v),(0,It.GM)(m[1],v)];p.inverse?p.setExtent(y[1],y[0]):p.setExtent(y[0],y[1])}(h,l,s),a.push(h),l.coordinateSystem=h,h.model=l}),c.eachSeries(function(l){if("polar"===l.get("coordinateSystem")){var u=l.getReferringComponents("polar",xn.C6).models[0];l.coordinateSystem=u.coordinateSystem}}),a}};var qL=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function qp(c,s,a){s[1]>s[0]&&(s=s.slice().reverse());var l=c.coordToPoint([s[0],a]),u=c.coordToPoint([s[1],a]);return{x1:l[0],y1:l[1],x2:u[0],y2:u[1]}}function u_(c){return c.getRadiusAxis().inverse?0:1}function Ex(c){var s=c[0],a=c[c.length-1];s&&a&&Math.abs(Math.abs(s.coord-a.coord)-360)<1e-4&&c.pop()}var JL=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.axisPointerClass="PolarAxisPointer",a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l){if(this.group.removeAll(),a.get("show")){var u=a.axis,h=u.polar,p=h.getRadiusAxis().getExtent(),v=u.getTicksCoords(),m=u.getMinorTicksCoords(),y=b.map(u.getViewLabels(),function(x){x=b.clone(x);var w=u.scale,D="ordinal"===w.type?w.getRawOrdinalNumber(x.tickValue):x.tickValue;return x.coord=u.dataToCoord(D),x});Ex(y),Ex(v),b.each(qL,function(x){a.get([x,"show"])&&(!u.scale.isBlank()||"axisLine"===x)&&iT[x](this.group,a,h,v,m,p,y)},this)}},s.type="angleAxis",s}(Cu),iT={axisLine:function(c,s,a,l,u,h){var y,p=s.getModel(["axisLine","lineStyle"]),v=u_(a),m=v?0:1;(y=0===h[m]?new Ch.Z({shape:{cx:a.cx,cy:a.cy,r:h[v]},style:p.getLineStyle(),z2:1,silent:!0}):new ip.Z({shape:{cx:a.cx,cy:a.cy,r:h[v],r0:h[m]},style:p.getLineStyle(),z2:1,silent:!0})).style.fill=null,c.add(y)},axisTick:function(c,s,a,l,u,h){var p=s.getModel("axisTick"),v=(p.get("inside")?-1:1)*p.get("length"),m=h[u_(a)],y=b.map(l,function(x){return new Ai.Z({shape:qp(a,[m,m+v],x.coord)})});c.add(_n.mergePath(y,{style:b.defaults(p.getModel("lineStyle").getLineStyle(),{stroke:s.get(["axisLine","lineStyle","color"])})}))},minorTick:function(c,s,a,l,u,h){if(u.length){for(var p=s.getModel("axisTick"),v=s.getModel("minorTick"),m=(p.get("inside")?-1:1)*v.get("length"),y=h[u_(a)],x=[],w=0;w<u.length;w++)for(var D=0;D<u[w].length;D++)x.push(new Ai.Z({shape:qp(a,[y,y+m],u[w][D].coord)}));c.add(_n.mergePath(x,{style:b.defaults(v.getModel("lineStyle").getLineStyle(),b.defaults(p.getLineStyle(),{stroke:s.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(c,s,a,l,u,h,p){var v=s.getCategories(!0),m=s.getModel("axisLabel"),y=m.get("margin"),x=s.get("triggerEvent");b.each(p,function(w,D){var I=m,L=w.tickValue,N=h[u_(a)],Z=a.coordToPoint([N+y,w.coord]),se=a.cx,_e=a.cy,me=Math.abs(Z[0]-se)/N<.3?"center":Z[0]>se?"left":"right",De=Math.abs(Z[1]-_e)/N<.3?"middle":Z[1]>_e?"top":"bottom";if(v&&v[L]){var Pe=v[L];b.isObject(Pe)&&Pe.textStyle&&(I=new ka.Z(Pe.textStyle,m,m.ecModel))}var Ie=new _t.ZP({silent:Ao.isLabelSilent(s),style:(0,qt.Lr)(I,{x:Z[0],y:Z[1],fill:I.getTextColor()||s.get(["axisLine","lineStyle","color"]),text:w.formattedLabel,align:me,verticalAlign:De})});if(c.add(Ie),x){var ke=Ao.makeAxisEventDataBase(s);ke.targetType="axisLabel",ke.value=w.rawLabel,(0,Tr.A)(Ie).eventData=ke}},this)},splitLine:function(c,s,a,l,u,h){var v=s.getModel("splitLine").getModel("lineStyle"),m=v.get("color"),y=0;m=m instanceof Array?m:[m];for(var x=[],w=0;w<l.length;w++){var D=y++%m.length;x[D]=x[D]||[],x[D].push(new Ai.Z({shape:qp(a,h,l[w].coord)}))}for(w=0;w<x.length;w++)c.add(_n.mergePath(x[w],{style:b.defaults({stroke:m[w%m.length]},v.getLineStyle()),silent:!0,z:s.get("z")}))},minorSplitLine:function(c,s,a,l,u,h){if(u.length){for(var v=s.getModel("minorSplitLine").getModel("lineStyle"),m=[],y=0;y<u.length;y++)for(var x=0;x<u[y].length;x++)m.push(new Ai.Z({shape:qp(a,h,u[y][x].coord)}));c.add(_n.mergePath(m,{style:v.getLineStyle(),silent:!0,z:s.get("z")}))}},splitArea:function(c,s,a,l,u,h){if(l.length){var v=s.getModel("splitArea").getModel("areaStyle"),m=v.get("color"),y=0;m=m instanceof Array?m:[m];for(var x=[],w=Math.PI/180,D=-l[0].coord*w,I=Math.min(h[0],h[1]),L=Math.max(h[0],h[1]),N=s.get("clockwise"),Z=1,se=l.length;Z<=se;Z++){var _e=Z===se?l[0].coord:l[Z].coord,me=y++%m.length;x[me]=x[me]||[],x[me].push(new yn.C({shape:{cx:a.cx,cy:a.cy,r0:I,r:L,startAngle:D,endAngle:-_e*w,clockwise:N},silent:!0})),D=-_e*w}for(Z=0;Z<x.length;Z++)c.add(_n.mergePath(x[Z],{style:b.defaults({fill:m[Z%m.length]},v.getAreaStyle()),silent:!0}))}}};const eO=JL;var Ax=["axisLine","axisTickLabel","axisName"],tO=["splitLine","splitArea","minorSplitLine"],aT=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.axisPointerClass="PolarAxisPointer",a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l){if(this.group.removeAll(),a.get("show")){var u=this._axisGroup,h=this._axisGroup=new Rn.Z;this.group.add(h);var p=a.axis,v=p.polar,m=v.getAngleAxis(),y=p.getTicksCoords(),x=p.getMinorTicksCoords(),w=m.getExtent()[0],D=p.getExtent(),I=function nO(c,s,a){return{position:[c.cx,c.cy],rotation:a/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:s.getModel("axisLabel").get("rotate"),z2:1}}(v,a,w),L=new Ao(a,I);b.each(Ax,L.add,L),h.add(L.getGroup()),_n.groupTransition(u,h,a),b.each(tO,function(N){a.get([N,"show"])&&!p.scale.isBlank()&&oT[N](this.group,a,v,w,D,y,x)},this)}},s.type="radiusAxis",s}(Cu),oT={splitLine:function(c,s,a,l,u,h){var v=s.getModel("splitLine").getModel("lineStyle"),m=v.get("color"),y=0;m=m instanceof Array?m:[m];for(var x=[],w=0;w<h.length;w++){var D=y++%m.length;x[D]=x[D]||[],x[D].push(new Ch.Z({shape:{cx:a.cx,cy:a.cy,r:Math.max(h[w].coord,0)}}))}for(w=0;w<x.length;w++)c.add(_n.mergePath(x[w],{style:b.defaults({stroke:m[w%m.length],fill:null},v.getLineStyle()),silent:!0}))},minorSplitLine:function(c,s,a,l,u,h,p){if(p.length){for(var m=s.getModel("minorSplitLine").getModel("lineStyle"),y=[],x=0;x<p.length;x++)for(var w=0;w<p[x].length;w++)y.push(new Ch.Z({shape:{cx:a.cx,cy:a.cy,r:p[x][w].coord}}));c.add(_n.mergePath(y,{style:b.defaults({fill:null},m.getLineStyle()),silent:!0}))}},splitArea:function(c,s,a,l,u,h){if(h.length){var v=s.getModel("splitArea").getModel("areaStyle"),m=v.get("color"),y=0;m=m instanceof Array?m:[m];for(var x=[],w=h[0].coord,D=1;D<h.length;D++){var I=y++%m.length;x[I]=x[I]||[],x[I].push(new yn.C({shape:{cx:a.cx,cy:a.cy,r0:w,r:h[D].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),w=h[D].coord}for(D=0;D<x.length;D++)c.add(_n.mergePath(x[D],{style:b.defaults({fill:m[D%m.length]},v.getAreaStyle()),silent:!0}))}}};const rO=aT;function sT(c){return c.get("stack")||"__ec_stack_"+c.seriesIndex}function d_(c,s){return s.dim+c.model.componentIndex}const aO=function iO(c,s,a){var l={},u=function lT(c){var s={};b.each(c,function(l,u){var h=l.getData(),p=l.coordinateSystem,v=p.getBaseAxis(),m=d_(p,v),y=v.getExtent(),x="category"===v.type?v.getBandWidth():Math.abs(y[1]-y[0])/h.count(),w=s[m]||{bandWidth:x,remainedWidth:x,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},D=w.stacks;s[m]=w;var I=sT(l);D[I]||w.autoWidthCount++,D[I]=D[I]||{width:0,maxWidth:0};var L=(0,It.GM)(l.get("barWidth"),x),N=(0,It.GM)(l.get("barMaxWidth"),x),Z=l.get("barGap"),se=l.get("barCategoryGap");L&&!D[I].width&&(L=Math.min(w.remainedWidth,L),D[I].width=L,w.remainedWidth-=L),N&&(D[I].maxWidth=N),null!=Z&&(w.gap=Z),null!=se&&(w.categoryGap=se)});var a={};return b.each(s,function(l,u){a[u]={};var h=l.stacks,v=(0,It.GM)(l.categoryGap,l.bandWidth),m=(0,It.GM)(l.gap,1),y=l.remainedWidth,x=l.autoWidthCount,w=(y-v)/(x+(x-1)*m);w=Math.max(w,0),b.each(h,function(N,Z){var se=N.maxWidth;se&&se<w&&(se=Math.min(se,y),N.width&&(se=Math.min(se,N.width)),y-=se,N.width=se,x--)}),w=(y-v)/(x+(x-1)*m),w=Math.max(w,0);var I,D=0;b.each(h,function(N,Z){N.width||(N.width=w),I=N,D+=N.width*(1+m)}),I&&(D-=I.width*m);var L=-D/2;b.each(h,function(N,Z){a[u][Z]=a[u][Z]||{offset:L,width:N.width},L+=N.width*(1+m)})}),a}(b.filter(s.getSeriesByType(c),function(h){return!s.isSeriesFiltered(h)&&h.coordinateSystem&&"polar"===h.coordinateSystem.type}));s.eachSeriesByType(c,function(h){if("polar"===h.coordinateSystem.type){var p=h.getData(),v=h.coordinateSystem,m=v.getBaseAxis(),y=d_(v,m),x=sT(h),w=u[y][x],D=w.offset,I=w.width,L=v.getOtherAxis(m),N=h.coordinateSystem.cx,Z=h.coordinateSystem.cy,se=h.get("barMinHeight")||0,_e=h.get("barMinAngle")||0;l[x]=l[x]||[];for(var me=p.mapDimension(L.dim),De=p.mapDimension(m.dim),Pe=(0,Jl.M)(p,me),Ie="radius"!==m.dim||!h.get("roundCap",!0),ke=L.dataToCoord(0),Ue=0,Ye=p.count();Ue<Ye;Ue++){var Ke=p.get(me,Ue),Je=p.get(De,Ue),ut=Ke>=0?"p":"n",pt=ke;Pe&&(l[x][Je]||(l[x][Je]={p:ke,n:ke}),pt=l[x][Je][ut]);var yt=void 0,wt=void 0,kt=void 0,en=void 0;if("radius"===L.dim){var Yt=L.dataToCoord(Ke)-ke,dn=m.dataToCoord(Je);Math.abs(Yt)<se&&(Yt=(Yt<0?-1:1)*se),yt=pt,wt=pt+Yt,en=(kt=dn-D)-I,Pe&&(l[x][Je][ut]=wt)}else{var Fn=L.dataToCoord(Ke,Ie)-ke,zn=m.dataToCoord(Je);Math.abs(Fn)<_e&&(Fn=(Fn<0?-1:1)*_e),wt=(yt=zn+D)+I,kt=pt,en=pt+Fn,Pe&&(l[x][Je][ut]=en)}p.setItemLayout(Ue,{cx:N,cy:Z,r0:yt,r:wt,startAngle:-kt*Math.PI/180,endAngle:-en*Math.PI/180,clockwise:kt>=en})}}})};var oO={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},sO={splitNumber:5},lO=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.type="polar",s}(va.Z);function Ix(c,s){s=s||{};var l=c.axis,u={},h=l.position,p=l.orient,v=c.coordinateSystem.getRect(),m=[v.x,v.x+v.width,v.y,v.y+v.height],y={horizontal:{top:m[2],bottom:m[3]},vertical:{left:m[0],right:m[1]}};u.position=["vertical"===p?y.vertical[h]:m[0],"horizontal"===p?y.horizontal[h]:m[3]],u.rotation=Math.PI/2*{horizontal:0,vertical:1}[p],u.labelDirection=u.tickDirection=u.nameDirection={top:-1,bottom:1,right:1,left:-1}[h],c.get(["axisTick","inside"])&&(u.tickDirection=-u.tickDirection),b.retrieve(s.labelInside,c.get(["axisLabel","inside"]))&&(u.labelDirection=-u.labelDirection);var D=s.rotate;return null==D&&(D=c.get(["axisLabel","rotate"])),u.labelRotation="top"===h?-D:D,u.z2=1,u}var uO=["axisLine","axisTickLabel","axisName"],dO=["splitArea","splitLine"],cT=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.axisPointerClass="SingleAxisPointer",a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u,h){var p=this.group;p.removeAll();var v=this._axisGroup;this._axisGroup=new Rn.Z;var m=Ix(a),y=new Ao(a,m);b.each(uO,y.add,y),p.add(this._axisGroup),p.add(y.getGroup()),b.each(dO,function(x){a.get([x,"show"])&&uT[x](this,this.group,this._axisGroup,a)},this),_n.groupTransition(v,this._axisGroup,a),c.prototype.render.call(this,a,l,u,h)},s.prototype.remove=function(){Lw(this)},s.type="singleAxis",s}(Cu),uT={splitLine:function(c,s,a,l){var u=l.axis;if(!u.scale.isBlank()){var h=l.getModel("splitLine"),p=h.getModel("lineStyle"),v=p.get("color");v=v instanceof Array?v:[v];for(var m=p.get("width"),y=l.coordinateSystem.getRect(),x=u.isHorizontal(),w=[],D=0,I=u.getTicksCoords({tickModel:h}),L=[],N=[],Z=0;Z<I.length;++Z){var se=u.toGlobalCoord(I[Z].coord);x?(L[0]=se,L[1]=y.y,N[0]=se,N[1]=y.y+y.height):(L[0]=y.x,L[1]=se,N[0]=y.x+y.width,N[1]=se);var _e=new Ai.Z({shape:{x1:L[0],y1:L[1],x2:N[0],y2:N[1]},silent:!0});_n.subPixelOptimizeLine(_e.shape,m);var me=D++%v.length;w[me]=w[me]||[],w[me].push(_e)}var De=p.getLineStyle(["color"]);for(Z=0;Z<w.length;++Z)s.add(_n.mergePath(w[Z],{style:b.defaults({stroke:v[Z%v.length]},De),silent:!0}))}},splitArea:function(c,s,a,l){Av(c,a,l,l)}};const hO=cT;var dT=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.getCoordSysModel=function(){return this},s.type="singleAxis",s.layoutMode="box",s.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},s}(ma.Z);(0,b.mixin)(dT,$f.W.prototype);const h_=dT,pO=function(c){function s(a,l,u,h,p){var v=c.call(this,a,l,u)||this;return v.type=h||"value",v.position=p||"bottom",v}return(0,At.ZT)(s,c),s.prototype.isHorizontal=function(){var a=this.position;return"top"===a||"bottom"===a},s.prototype.pointToData=function(a,l){return this.coordinateSystem.pointToData(a)[0]},s}(fo.Z);var hT=["single"];function f_(c){var s=c.seriesModel,a=c.singleAxisModel;return a&&a.coordinateSystem||s&&s.coordinateSystem}const fT=function(){function c(s,a,l){this.type="single",this.dimension="single",this.dimensions=hT,this.axisPointerEnabled=!0,this.model=s,this._init(s,a,l)}return c.prototype._init=function(s,a,l){var h=new pO(this.dimension,ki.aG(s),[0,0],s.get("type"),s.get("position"));h.onBand="category"===h.type&&s.get("boundaryGap"),h.inverse=s.get("inverse"),h.orient=s.get("orient"),s.axis=h,h.model=s,h.coordinateSystem=this,this._axis=h},c.prototype.update=function(s,a){s.eachSeries(function(l){if(l.coordinateSystem===this){var u=l.getData();(0,b.each)(u.mapDimensionsAll(this.dimension),function(h){this._axis.scale.unionExtentFromData(u,h)},this),ki.Jk(this._axis.scale,this._axis.model)}},this)},c.prototype.resize=function(s,a){this._rect=(0,Br.ME)({left:s.get("left"),top:s.get("top"),right:s.get("right"),bottom:s.get("bottom"),width:s.get("width"),height:s.get("height")},{width:a.getWidth(),height:a.getHeight()}),this._adjustAxis()},c.prototype.getRect=function(){return this._rect},c.prototype._adjustAxis=function(){var s=this._rect,a=this._axis,l=a.isHorizontal(),u=l?[0,s.width]:[0,s.height],h=a.inverse?1:0;a.setExtent(u[h],u[1-h]),this._updateAxisTransform(a,l?s.x:s.y)},c.prototype._updateAxisTransform=function(s,a){var l=s.getExtent(),u=l[0]+l[1],h=s.isHorizontal();s.toGlobalCoord=h?function(p){return p+a}:function(p){return u-p+a},s.toLocalCoord=h?function(p){return p-a}:function(p){return u-p+a}},c.prototype.getAxis=function(){return this._axis},c.prototype.getBaseAxis=function(){return this._axis},c.prototype.getAxes=function(){return[this._axis]},c.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},c.prototype.containPoint=function(s){var a=this.getRect(),l=this.getAxis();return"horizontal"===l.orient?l.contain(l.toLocalCoord(s[0]))&&s[1]>=a.y&&s[1]<=a.y+a.height:l.contain(l.toLocalCoord(s[1]))&&s[0]>=a.y&&s[0]<=a.y+a.height},c.prototype.pointToData=function(s){var a=this.getAxis();return[a.coordToData(a.toLocalCoord(s["horizontal"===a.orient?0:1]))]},c.prototype.dataToPoint=function(s){var a=this.getAxis(),l=this.getRect(),u=[],h="horizontal"===a.orient?0:1;return s instanceof Array&&(s=s[0]),u[h]=a.toGlobalCoord(a.dataToCoord(+s)),u[1-h]=0===h?l.y+l.height/2:l.x+l.width/2,u},c.prototype.convertToPixel=function(s,a,l){return f_(a)===this?this.dataToPoint(l):null},c.prototype.convertFromPixel=function(s,a,l){return f_(a)===this?this.pointToData(l):null},c}(),vO={create:function Rx(c,s){var a=[];return c.eachComponent("singleAxis",function(l,u){var h=new fT(l,c,s);h.name="single_"+u,h.resize(l,s),l.coordinateSystem=h,a.push(h)}),c.eachSeries(function(l){if("singleAxis"===l.get("coordinateSystem")){var u=l.getReferringComponents("singleAxis",xn.C6).models[0];l.coordinateSystem=u&&u.coordinateSystem}}),a},dimensions:hT};var p_=["x","y"],mO=["width","height"],Gr=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,At.ZT)(s,c),s.prototype.makeElOption=function(a,l,u,h,p){var v=u.axis,m=v.coordinateSystem,y=Lx(m,1-Jp(v)),x=m.dataToPoint(l)[0],w=h.get("type");if(w&&"none"!==w){var D=Hu(h),I=Od[w](v,x,y);I.style=D,a.graphicKey=I.type,a.pointer=I}Sx(l,a,Ix(u),u,h,p)},s.prototype.getHandleTransform=function(a,l,u){var h=Ix(l,{labelInside:!1});h.labelMargin=u.get(["handle","margin"]);var p=i_(l.axis,a,h);return{x:p[0],y:p[1],rotation:h.rotation+(h.labelDirection<0?Math.PI:0)}},s.prototype.updateHandleTransform=function(a,l,u,h){var p=u.axis,v=p.coordinateSystem,m=Jp(p),y=Lx(v,m),x=[a.x,a.y];x[m]+=l[m],x[m]=Math.min(y[1],x[m]),x[m]=Math.max(y[0],x[m]);var w=Lx(v,1-m),D=(w[1]+w[0])/2,I=[D,D];return I[m]=x[m],{x:x[0],y:x[1],rotation:a.rotation,cursorPoint:I,tooltipOption:{verticalAlign:"middle"}}},s}(Cx),Od={line:function(c,s,a){return{type:"Line",subPixelOptimize:!0,shape:kM([s,a[0]],[s,a[1]],Jp(c))}},shadow:function(c,s,a){var l=c.getBandWidth();return{type:"Rect",shape:Hn([s-l/2,a[0]],[l,a[1]-a[0]],Jp(c))}}};function Jp(c){return c.isHorizontal()?0:1}function Lx(c,s){var a=c.getRect();return[a[p_[s]],a[p_[s]]+a[mO[s]]]}const K5=Gr;var pT=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.type="single",s}(va.Z);function eg(c,s){var l,a=c.cellSize;1===(l=b.isArray(a)?a:c.cellSize=[a,a]).length&&(l[1]=l[0]);var u=b.map([0,1],function(h){return(0,Br.QM)(s,h)&&(l[h]="auto"),null!=l[h]&&"auto"!==l[h]});(0,Br.dt)(c,s,{type:"box",ignoreSize:u})}const yO=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.init=function(a,l,u){var h=(0,Br.tE)(a);c.prototype.init.apply(this,arguments),eg(a,h)},s.prototype.mergeOption=function(a){c.prototype.mergeOption.apply(this,arguments),eg(this.option,a)},s.prototype.getCellSize=function(){return this.option.cellSize},s.type="calendar",s.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},s}(ma.Z);var kx=H(5514);const gT=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u){var h=this.group;h.removeAll();var p=a.coordinateSystem,v=p.getRangeInfo(),m=p.getOrient(),y=l.getLocaleModel();this._renderDayRect(a,v,h),this._renderLines(a,v,m,h),this._renderYearText(a,v,m,h),this._renderMonthText(a,y,m,h),this._renderWeekText(a,y,v,m,h)},s.prototype._renderDayRect=function(a,l,u){for(var h=a.coordinateSystem,p=a.getModel("itemStyle").getItemStyle(),v=h.getCellWidth(),m=h.getCellHeight(),y=l.start.time;y<=l.end.time;y=h.getNextNDay(y,1).time){var x=h.dataToRect([y],!1).tl,w=new Mi.Z({shape:{x:x[0],y:x[1],width:v,height:m},cursor:"default",style:p});u.add(w)}},s.prototype._renderLines=function(a,l,u,h){var p=this,v=a.coordinateSystem,m=a.getModel(["splitLine","lineStyle"]).getLineStyle(),y=a.get(["splitLine","show"]),x=m.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var w=l.start,D=0;w.time<=l.end.time;D++){L(w.formatedDate),0===D&&(w=v.getDateInfo(l.start.y+"-"+l.start.m));var I=w.date;I.setMonth(I.getMonth()+1),w=v.getDateInfo(I)}function L(N){p._firstDayOfMonth.push(v.getDateInfo(N)),p._firstDayPoints.push(v.dataToRect([N],!1).tl);var Z=p._getLinePointsOfOneWeek(a,N,u);p._tlpoints.push(Z[0]),p._blpoints.push(Z[Z.length-1]),y&&p._drawSplitline(Z,m,h)}L(v.getNextNDay(l.end.time,1).formatedDate),y&&this._drawSplitline(p._getEdgesPoints(p._tlpoints,x,u),m,h),y&&this._drawSplitline(p._getEdgesPoints(p._blpoints,x,u),m,h)},s.prototype._getEdgesPoints=function(a,l,u){var h=[a[0].slice(),a[a.length-1].slice()],p="horizontal"===u?0:1;return h[0][p]=h[0][p]-l/2,h[1][p]=h[1][p]+l/2,h},s.prototype._drawSplitline=function(a,l,u){var h=new Ls.Z({z2:20,shape:{points:a},style:l});u.add(h)},s.prototype._getLinePointsOfOneWeek=function(a,l,u){for(var h=a.coordinateSystem,p=h.getDateInfo(l),v=[],m=0;m<7;m++){var y=h.getNextNDay(p.time,m),x=h.dataToRect([y.time],!1);v[2*y.day]=x.tl,v[2*y.day+1]=x["horizontal"===u?"bl":"tr"]}return v},s.prototype._formatterLabel=function(a,l){return(0,b.isString)(a)&&a?(0,Va.wx)(a,l):(0,b.isFunction)(a)?a(l):l.nameMap},s.prototype._yearTextPositionControl=function(a,l,u,h,p){var v=l[0],m=l[1],y=["center","bottom"];"bottom"===h?(m+=p,y=["center","top"]):"left"===h?v-=p:"right"===h?(v+=p,y=["center","top"]):m-=p;var x=0;return("left"===h||"right"===h)&&(x=Math.PI/2),{rotation:x,x:v,y:m,style:{align:y[0],verticalAlign:y[1]}}},s.prototype._renderYearText=function(a,l,u,h){var p=a.getModel("yearLabel");if(p.get("show")){var v=p.get("margin"),m=p.get("position");m||(m="horizontal"!==u?"top":"left");var y=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],x=(y[0][0]+y[1][0])/2,w=(y[0][1]+y[1][1])/2,D="horizontal"===u?0:1,I={top:[x,y[D][1]],bottom:[x,y[1-D][1]],left:[y[1-D][0],w],right:[y[D][0],w]},L=l.start.y;+l.end.y>+l.start.y&&(L=L+"-"+l.end.y);var N=p.get("formatter"),se=this._formatterLabel(N,{start:l.start.y,end:l.end.y,nameMap:L}),_e=new _t.ZP({z2:30,style:(0,qt.Lr)(p,{text:se})});_e.attr(this._yearTextPositionControl(_e,I[m],u,m,v)),h.add(_e)}},s.prototype._monthTextPositionControl=function(a,l,u,h,p){var v="left",m="top",y=a[0],x=a[1];return"horizontal"===u?(x+=p,l&&(v="center"),"start"===h&&(m="bottom")):(y+=p,l&&(m="middle"),"start"===h&&(v="right")),{x:y,y:x,align:v,verticalAlign:m}},s.prototype._renderMonthText=function(a,l,u,h){var p=a.getModel("monthLabel");if(p.get("show")){var v=p.get("nameMap"),m=p.get("margin"),y=p.get("position"),x=p.get("align"),w=[this._tlpoints,this._blpoints];(!v||(0,b.isString)(v))&&(v&&(l=(0,kx.G8)(v)||l),v=l.get(["time","monthAbbr"])||[]);var D="start"===y?0:1,I="horizontal"===u?0:1;m="start"===y?-m:m;for(var L="center"===x,N=0;N<w[D].length-1;N++){var Z=w[D][N].slice(),se=this._firstDayOfMonth[N];L&&(Z[I]=(this._firstDayPoints[N][I]+w[0][N+1][I])/2);var me=p.get("formatter"),De=v[+se.m-1],Pe={yyyy:se.y,yy:(se.y+"").slice(2),MM:se.m,M:+se.m,nameMap:De},Ie=this._formatterLabel(me,Pe),ke=new _t.ZP({z2:30,style:(0,b.extend)((0,qt.Lr)(p,{text:Ie}),this._monthTextPositionControl(Z,L,u,y,m))});h.add(ke)}}},s.prototype._weekTextPositionControl=function(a,l,u,h,p){var v="center",m="middle",y=a[0],x=a[1],w="start"===u;return"horizontal"===l?(y=y+h+(w?1:-1)*p[0]/2,v=w?"right":"left"):(x=x+h+(w?1:-1)*p[1]/2,m=w?"bottom":"top"),{x:y,y:x,align:v,verticalAlign:m}},s.prototype._renderWeekText=function(a,l,u,h,p){var v=a.getModel("dayLabel");if(v.get("show")){var m=a.coordinateSystem,y=v.get("position"),x=v.get("nameMap"),w=v.get("margin"),D=m.getFirstDayOfWeek();x&&!(0,b.isString)(x)||(x&&(l=(0,kx.G8)(x)||l),x=l.get(["time","dayOfWeekShort"])||(0,b.map)(l.get(["time","dayOfWeekAbbr"]),function(Pe){return Pe[0]}));var L=m.getNextNDay(u.end.time,7-u.lweek).time,N=[m.getCellWidth(),m.getCellHeight()];w=(0,It.GM)(w,Math.min(N[1],N[0])),"start"===y&&(L=m.getNextNDay(u.start.time,-(7+u.fweek)).time,w=-w);for(var Z=0;Z<7;Z++){var me,se=m.getNextNDay(L,Z),_e=m.dataToRect([se.time],!1).center;me=Math.abs((Z+D)%7);var De=new _t.ZP({z2:30,style:(0,b.extend)((0,qt.Lr)(v,{text:x[me]}),this._weekTextPositionControl(_e,h,y,w,N))});p.add(De)}}},s.type="calendar",s}(va.Z);var g_=864e5;function Fx(c){var s=c.calendarModel,a=c.seriesModel;return s?s.coordinateSystem:a?a.coordinateSystem:null}const bO=function(){function c(s,a,l){this.type="calendar",this.dimensions=c.dimensions,this.getDimensionsInfo=c.getDimensionsInfo,this._model=s}return c.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},c.prototype.getRangeInfo=function(){return this._rangeInfo},c.prototype.getModel=function(){return this._model},c.prototype.getRect=function(){return this._rect},c.prototype.getCellWidth=function(){return this._sw},c.prototype.getCellHeight=function(){return this._sh},c.prototype.getOrient=function(){return this._orient},c.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},c.prototype.getDateInfo=function(s){var a=(s=It.sG(s)).getFullYear(),l=s.getMonth()+1,u=l<10?"0"+l:""+l,h=s.getDate(),p=h<10?"0"+h:""+h,v=s.getDay();return{y:a+"",m:u,d:p,day:v=Math.abs((v+7-this.getFirstDayOfWeek())%7),time:s.getTime(),formatedDate:a+"-"+u+"-"+p,date:s}},c.prototype.getNextNDay=function(s,a){return 0===(a=a||0)||(s=new Date(this.getDateInfo(s).time)).setDate(s.getDate()+a),this.getDateInfo(s)},c.prototype.update=function(s,a){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var l=this._rangeInfo.weeks||1,u=["width","height"],h=this._model.getCellSize().slice(),p=this._model.getBoxLayoutParams(),v="horizontal"===this._orient?[l,7]:[7,l];b.each([0,1],function(w){x(h,w)&&(p[u[w]]=h[w]*v[w])});var m={width:a.getWidth(),height:a.getHeight()},y=this._rect=Br.ME(p,m);function x(w,D){return null!=w[D]&&"auto"!==w[D]}b.each([0,1],function(w){x(h,w)||(h[w]=y[u[w]]/v[w])}),this._sw=h[0],this._sh=h[1]},c.prototype.dataToPoint=function(s,a){b.isArray(s)&&(s=s[0]),null==a&&(a=!0);var l=this.getDateInfo(s),u=this._rangeInfo;if(a&&!(l.time>=u.start.time&&l.time<u.end.time+g_))return[NaN,NaN];var p=l.day,v=this._getRangeInfo([u.start.time,l.formatedDate]).nthWeek;return"vertical"===this._orient?[this._rect.x+p*this._sw+this._sw/2,this._rect.y+v*this._sh+this._sh/2]:[this._rect.x+v*this._sw+this._sw/2,this._rect.y+p*this._sh+this._sh/2]},c.prototype.pointToData=function(s){var a=this.pointToDate(s);return a&&a.time},c.prototype.dataToRect=function(s,a){var l=this.dataToPoint(s,a);return{contentShape:{x:l[0]-(this._sw-this._lineWidth)/2,y:l[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:l,tl:[l[0]-this._sw/2,l[1]-this._sh/2],tr:[l[0]+this._sw/2,l[1]-this._sh/2],br:[l[0]+this._sw/2,l[1]+this._sh/2],bl:[l[0]-this._sw/2,l[1]+this._sh/2]}},c.prototype.pointToDate=function(s){var a=Math.floor((s[0]-this._rect.x)/this._sw)+1,l=Math.floor((s[1]-this._rect.y)/this._sh)+1,u=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(l,a-1,u):this._getDateByWeeksAndDay(a,l-1,u)},c.prototype.convertToPixel=function(s,a,l){var u=Fx(a);return u===this?u.dataToPoint(l):null},c.prototype.convertFromPixel=function(s,a,l){var u=Fx(a);return u===this?u.pointToData(l):null},c.prototype.containPoint=function(s){return console.warn("Not implemented."),!1},c.prototype._initRangeOption=function(){var a,s=this._model.get("range");if(b.isArray(s)&&1===s.length&&(s=s[0]),b.isArray(s))a=s;else{var l=s.toString();if(/^\d{4}$/.test(l)&&(a=[l+"-01-01",l+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(l)){var u=this.getDateInfo(l),h=u.date;h.setMonth(h.getMonth()+1);var p=this.getNextNDay(h,-1);a=[u.formatedDate,p.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(l)&&(a=[l,l])}if(!a)return s;var v=this._getRangeInfo(a);return v.start.time>v.end.time&&a.reverse(),a},c.prototype._getRangeInfo=function(s){var l,a=[this.getDateInfo(s[0]),this.getDateInfo(s[1])];a[0].time>a[1].time&&(l=!0,a.reverse());var u=Math.floor(a[1].time/g_)-Math.floor(a[0].time/g_)+1,h=new Date(a[0].time),p=h.getDate(),v=a[1].date.getDate();h.setDate(p+u-1);var m=h.getDate();if(m!==v)for(var y=h.getTime()-a[1].time>0?1:-1;(m=h.getDate())!==v&&(h.getTime()-a[1].time)*y>0;)u-=y,h.setDate(m-y);var x=Math.floor((u+a[0].day+6)/7),w=l?1-x:x-1;return l&&a.reverse(),{range:[a[0].formatedDate,a[1].formatedDate],start:a[0],end:a[1],allDay:u,weeks:x,nthWeek:w,fweek:a[0].day,lweek:a[1].day}},c.prototype._getDateByWeeksAndDay=function(s,a,l){var u=this._getRangeInfo(l);if(s>u.weeks||0===s&&a<u.fweek||s===u.weeks&&a>u.lweek)return null;var h=7*(s-1)-u.fweek+a,p=new Date(u.start.time);return p.setDate(+u.start.d+h),this.getDateInfo(p)},c.create=function(s,a){var l=[];return s.eachComponent("calendar",function(u){var h=new c(u,s,a);l.push(h),u.coordinateSystem=h}),s.eachSeries(function(u){"calendar"===u.get("coordinateSystem")&&(u.coordinateSystem=l[u.get("calendarIndex")||0])}),l},c.dimensions=["time","value"],c}();function mT(c,s){var a;return b.each(s,function(l){null!=c[l]&&"auto"!==c[l]&&(a=!0)}),a}var wO=["transition","enterFrom","leaveTo"],yT=wO.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function v_(c,s,a){if(a&&(!c[a]&&s[a]&&(c[a]={}),c=c[a],s=s[a]),c&&s)for(var l=a?wO:yT,u=0;u<l.length;u++){var h=l[u];null==c[h]&&null!=s[h]&&(c[h]=s[h])}}var Q5=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.preventAutoZ=!0,a}return(0,At.ZT)(s,c),s.prototype.mergeOption=function(a,l){var u=this.option.elements;this.option.elements=null,c.prototype.mergeOption.call(this,a,l),this.option.elements=u},s.prototype.optionUpdated=function(a,l){var u=this.option,h=(l?u:a).elements,p=u.elements=l?[]:u.elements,v=[];this._flatten(h,v,null);var m=xn.ab(p,v,"normalMerge"),y=this._elOptionsToUpdate=[];b.each(m,function(x,w){var D=x.newOption;!D||(y.push(D),function CO(c,s){var a=c.existing;if(s.id=c.keyInfo.id,!s.type&&a&&(s.type=a.type),null==s.parentId){var l=s.parentOption;l?s.parentId=l.id:a&&(s.parentId=a.parentId)}s.parentOption=null}(x,D),function _T(c,s,a){var l=b.extend({},a),u=c[s],h=a.$action||"merge";"merge"===h?u?(b.merge(u,l,!0),(0,Br.dt)(u,l,{ignoreSize:!0}),(0,Br.QT)(a,u),v_(a,u),v_(a,u,"shape"),v_(a,u,"style"),v_(a,u,"extra"),a.clipPath=u.clipPath):c[s]=l:"replace"===h?c[s]=l:"remove"===h&&u&&(c[s]=null)}(p,w,D),function SO(c,s){if(c&&(c.hv=s.hv=[mT(s,["left","right"]),mT(s,["top","bottom"])],"group"===c.type)){var a=c,l=s;null==a.width&&(a.width=l.width=0),null==a.height&&(a.height=l.height=0)}}(p[w],D))},this),u.elements=b.filter(p,function(x){return x&&delete x.$action,null!=x})},s.prototype._flatten=function(a,l,u){b.each(a,function(h){if(h){u&&(h.parentOption=u),l.push(h);var p=h.children;p&&p.length&&this._flatten(p,l,h),delete h.children}},this)},s.prototype.useElOptionsToUpdate=function(){var a=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,a},s.type="graphic",s.defaultOption={elements:[]},s}(ma.Z),DO={path:null,compoundPath:null,group:Rn.Z,image:be.ZP,text:_t.ZP},ul=xn.Yf(),MO=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.init=function(){this._elMap=b.createHashMap()},s.prototype.render=function(a,l,u){a!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=a,this._updateElements(a),this._relocate(a,u)},s.prototype._updateElements=function(a){var l=a.useElOptionsToUpdate();if(l){var u=this._elMap,h=this.group,p=a.get("z"),v=a.get("zlevel");b.each(l,function(m){var y=xn.U5(m.id,null),x=null!=y?u.get(y):null,w=xn.U5(m.parentId,null),D=null!=w?u.get(w):h,I=m.type,L=m.style;"text"===I&&L&&m.hv&&m.hv[1]&&(L.textVerticalAlign=L.textBaseline=L.verticalAlign=L.align=null);var N=m.textContent,Z=m.textConfig;if(L&&gM(L,I,!!Z,!!N)){var se=vM(L,I,!0);!Z&&se.textConfig&&(Z=m.textConfig=se.textConfig),!N&&se.textContent&&(N=se.textContent)}var _e=function TO(c){return c=b.extend({},c),b.each(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(Br.gN),function(s){delete c[s]}),c}(m),me=m.$action||"merge",De="merge"===me,Pe="replace"===me;if(De){var ke=x;(Ie=!x)?ke=Fl(y,D,m.type,u):(ke&&(ul(ke).isNew=!1),Yh(ke)),ke&&(Zm(ke,_e,a,{isInit:Ie}),bT(ke,m,p,v))}else if(Pe){kd(x,m,u,a);var Ue=Fl(y,D,m.type,u);Ue&&(Zm(Ue,_e,a,{isInit:!0}),bT(Ue,m,p,v))}else"remove"===me&&(dx(x,m),kd(x,m,u,a));var Ye=u.get(y);if(Ye&&N)if(De){var Ke=Ye.getTextContent();Ke?Ke.attr(N):Ye.setTextContent(new _t.ZP(N))}else Pe&&Ye.setTextContent(new _t.ZP(N));if(Ye){var Je=m.clipPath;if(Je){var ut=Je.type,pt=void 0,Ie=!1;if(De){var yt=Ye.getClipPath();pt=(Ie=!yt||ul(yt).type!==ut)?eu(ut):yt}else Pe&&(Ie=!0,pt=eu(ut));Ye.setClipPath(pt),Zm(pt,Je,a,{isInit:Ie}),Xm(pt,Je.keyframeAnimation,a)}var wt=ul(Ye);Ye.setTextConfig(Z),wt.option=m,function EO(c,s,a){var l=(0,Tr.A)(c).eventData;!c.silent&&!c.ignore&&!l&&(l=(0,Tr.A)(c).eventData={componentType:"graphic",componentIndex:s.componentIndex,name:c.name}),l&&(l.info=a.info)}(Ye,a,m),_n.setTooltipConfig({el:Ye,componentModel:a,itemName:Ye.name,itemTooltipOption:m.tooltip}),Xm(Ye,m.keyframeAnimation,a)}})}},s.prototype._relocate=function(a,l){for(var u=a.option.elements,h=this.group,p=this._elMap,v=l.getWidth(),m=l.getHeight(),y=["x","y"],x=0;x<u.length;x++)if((I=null!=(D=xn.U5((w=u[x]).id,null))?p.get(D):null)&&I.isGroup){var N=(L=I.parent)===h,Z=ul(I),se=ul(L);Z.width=(0,It.GM)(Z.option.width,N?v:se.width)||0,Z.height=(0,It.GM)(Z.option.height,N?m:se.height)||0}for(x=u.length-1;x>=0;x--){var w,D,I;if(I=null!=(D=xn.U5((w=u[x]).id,null))?p.get(D):null){se=ul(L=I.parent);var L,me={},De=Br.p$(I,w,L===h?{width:v,height:m}:{width:se.width,height:se.height},null,{hv:w.hv,boundingMode:w.bounding},me);if(!ul(I).isNew&&De){for(var Pe=w.transition,Ie={},ke=0;ke<y.length;ke++){var Ue=y[ke],Ye=me[Ue];Pe&&(Bu(Pe)||b.indexOf(Pe,Ue)>=0)?Ie[Ue]=Ye:I[Ue]=Ye}(0,Sn.D)(I,Ie,a,0)}else I.attr(me)}}},s.prototype._clear=function(){var a=this,l=this._elMap;l.each(function(u){kd(u,ul(u).option,l,a._lastGraphicModel)}),this._elMap=b.createHashMap()},s.prototype.dispose=function(){this._clear()},s.type="graphic",s}(va.Z);function eu(c){var a=new(b.hasOwn(DO,c)?DO[c]:_n.getShapeClass(c))({});return ul(a).type=c,a}function Fl(c,s,a,l){var u=eu(a);return s.add(u),l.set(c,u),ul(u).id=c,ul(u).isNew=!0,u}function kd(c,s,a,l){c&&c.parent&&("group"===c.type&&c.traverse(function(h){kd(h,s,a,l)}),Ym(c,s,l),a.removeKey(ul(c).id))}function bT(c,s,a,l){c.isGroup||b.each([["cursor",Du.ZP.prototype.cursor],["zlevel",l||0],["z",a||0],["z2",0]],function(u){var h=u[0];b.hasOwn(s,h)?c[h]=b.retrieve2(s[h],u[1]):null==c[h]&&(c[h]=u[1])}),b.each(b.keys(s),function(u){if(0===u.indexOf("on")){var h=s[u];c[u]=b.isFunction(h)?h:null}}),b.hasOwn(s,"draggable")&&(c.draggable=s.draggable),null!=s.name&&(c.name=s.name),null!=s.id&&(c.id=s.id)}var xT=["x","y","radius","angle","single"],IO=["cartesian2d","polar","singleAxis"];function dl(c){return c+"Axis"}function Bx(c){var s=c.ecModel,a={infoList:[],infoMap:(0,b.createHashMap)()};return c.eachTargetAxis(function(l,u){var h=s.getComponent(dl(l),u);if(h){var p=h.getCoordSysModel();if(p){var v=p.uid,m=a.infoMap.get(v);m||(a.infoList.push(m={model:p,axisModels:[]}),a.infoMap.set(v,m)),m.axisModels.push(h)}}}),a}var m_=function(){function c(){this.indexList=[],this.indexMap=[]}return c.prototype.add=function(s){this.indexMap[s]||(this.indexList.push(s),this.indexMap[s]=!0)},c}();function wT(c){var s={};return(0,b.each)(["start","end","startValue","endValue","throttle"],function(a){c.hasOwnProperty(a)&&(s[a]=c[a])}),s}const __=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a._autoThrottle=!0,a._noTarget=!0,a._rangePropMode=["percent","percent"],a}return(0,At.ZT)(s,c),s.prototype.init=function(a,l,u){var h=wT(a);this.settledOption=h,this.mergeDefaultAndTheme(a,u),this._doInit(h)},s.prototype.mergeOption=function(a){var l=wT(a);(0,b.merge)(this.option,a,!0),(0,b.merge)(this.settledOption,l,!0),this._doInit(l)},s.prototype._doInit=function(a){var l=this.option;this._setDefaultThrottle(a),this._updateRangeUse(a);var u=this.settledOption;(0,b.each)([["start","startValue"],["end","endValue"]],function(h,p){"value"===this._rangePropMode[p]&&(l[h[0]]=u[h[0]]=null)},this),this._resetTarget()},s.prototype._resetTarget=function(){var a=this.get("orient",!0),l=this._targetAxisInfoMap=(0,b.createHashMap)();this._fillSpecifiedTargetAxis(l)?this._orient=a||this._makeAutoOrientByTargetAxis():(this._orient=a||"horizontal",this._fillAutoTargetAxisByOrient(l,this._orient)),this._noTarget=!0,l.each(function(h){h.indexList.length&&(this._noTarget=!1)},this)},s.prototype._fillSpecifiedTargetAxis=function(a){var l=!1;return(0,b.each)(xT,function(u){var h=this.getReferringComponents(dl(u),xn.iP);if(h.specified){l=!0;var p=new m_;(0,b.each)(h.models,function(v){p.add(v.componentIndex)}),a.set(u,p)}},this),l},s.prototype._fillAutoTargetAxisByOrient=function(a,l){var u=this.ecModel,h=!0;if(h){var p="vertical"===l?"y":"x";m(u.findComponents({mainType:p+"Axis"}),p)}function m(y,x){var w=y[0];if(w){var D=new m_;if(D.add(w.componentIndex),a.set(x,D),h=!1,"x"===x||"y"===x){var I=w.getReferringComponents("grid",xn.C6).models[0];I&&(0,b.each)(y,function(L){w.componentIndex!==L.componentIndex&&I===L.getReferringComponents("grid",xn.C6).models[0]&&D.add(L.componentIndex)})}}}h&&m(u.findComponents({mainType:"singleAxis",filter:function(x){return x.get("orient",!0)===l}}),"single"),h&&(0,b.each)(xT,function(y){if(h){var x=u.findComponents({mainType:dl(y),filter:function(D){return"category"===D.get("type",!0)}});if(x[0]){var w=new m_;w.add(x[0].componentIndex),a.set(y,w),h=!1}}},this)},s.prototype._makeAutoOrientByTargetAxis=function(){var a;return this.eachTargetAxis(function(l){!a&&(a=l)},this),"y"===a?"vertical":"horizontal"},s.prototype._setDefaultThrottle=function(a){if(a.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var l=this.ecModel.option;this.option.throttle=l.animation&&l.animationDurationUpdate>0?100:20}},s.prototype._updateRangeUse=function(a){var l=this._rangePropMode,u=this.get("rangeMode");(0,b.each)([["start","startValue"],["end","endValue"]],function(h,p){var v=null!=a[h[0]],m=null!=a[h[1]];v&&!m?l[p]="percent":!v&&m?l[p]="value":u?l[p]=u[p]:v&&(l[p]="percent")})},s.prototype.noTarget=function(){return this._noTarget},s.prototype.getFirstTargetAxisModel=function(){var a;return this.eachTargetAxis(function(l,u){null==a&&(a=this.ecModel.getComponent(dl(l),u))},this),a},s.prototype.eachTargetAxis=function(a,l){this._targetAxisInfoMap.each(function(u,h){(0,b.each)(u.indexList,function(p){a.call(l,h,p)})})},s.prototype.getAxisProxy=function(a,l){var u=this.getAxisModel(a,l);if(u)return u.__dzAxisProxy},s.prototype.getAxisModel=function(a,l){var u=this._targetAxisInfoMap.get(a);if(u&&u.indexMap[l])return this.ecModel.getComponent(dl(a),l)},s.prototype.setRawRange=function(a){var l=this.option,u=this.settledOption;(0,b.each)([["start","startValue"],["end","endValue"]],function(h){(null!=a[h[0]]||null!=a[h[1]])&&(l[h[0]]=u[h[0]]=a[h[0]],l[h[1]]=u[h[1]]=a[h[1]])},this),this._updateRangeUse(a)},s.prototype.setCalculatedRange=function(a){var l=this.option;(0,b.each)(["start","startValue","end","endValue"],function(u){l[u]=a[u]})},s.prototype.getPercentRange=function(){var a=this.findRepresentativeAxisProxy();if(a)return a.getDataPercentWindow()},s.prototype.getValueRange=function(a,l){if(null!=a||null!=l)return this.getAxisProxy(a,l).getDataValueWindow();var u=this.findRepresentativeAxisProxy();return u?u.getDataValueWindow():void 0},s.prototype.findRepresentativeAxisProxy=function(a){if(a)return a.__dzAxisProxy;for(var l,u=this._targetAxisInfoMap.keys(),h=0;h<u.length;h++)for(var p=u[h],v=this._targetAxisInfoMap.get(p),m=0;m<v.indexList.length;m++){var y=this.getAxisProxy(p,v.indexList[m]);if(y.hostedBy(this))return y;l||(l=y)}return l},s.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},s.prototype.getOrient=function(){return this._orient},s.type="dataZoom",s.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],s.defaultOption={z:4,filterMode:"filter",start:0,end:100},s}(ma.Z),NO=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.type="dataZoom.select",s}(__),Vx=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u,h){this.dataZoomModel=a,this.ecModel=l,this.api=u},s.type="dataZoom",s}(va.Z),tg=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.type="dataZoom.select",s}(Vx);var VO=H(7951),Uu=b.each,Mn=It.dt;const hl=function(){function c(s,a,l,u){this._dimName=s,this._axisIndex=a,this.ecModel=u,this._dataZoomModel=l}return c.prototype.hostedBy=function(s){return this._dataZoomModel===s},c.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},c.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},c.prototype.getTargetSeriesModels=function(){var s=[];return this.ecModel.eachSeries(function(a){if(function PO(c){var s=c.get("coordinateSystem");return(0,b.indexOf)(IO,s)>=0}(a)){var l=dl(this._dimName),u=a.getReferringComponents(l,xn.C6).models[0];u&&this._axisIndex===u.componentIndex&&s.push(a)}},this),s},c.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},c.prototype.getMinMaxSpan=function(){return b.clone(this._minMaxSpan)},c.prototype.calculateDataWindow=function(s){var y,a=this._dataExtent,u=this.getAxisModel().axis.scale,h=this._dataZoomModel.getRangePropMode(),p=[0,100],v=[],m=[];Uu(["start","end"],function(D,I){var L=s[D],N=s[D+"Value"];"percent"===h[I]?(null==L&&(L=p[I]),N=u.parse(It.NU(L,p,a))):(y=!0,N=null==N?a[I]:u.parse(N),L=It.NU(N,a,p)),m[I]=N,v[I]=L}),Mn(m),Mn(v);var x=this._minMaxSpan;function w(D,I,L,N,Z){var se=Z?"Span":"ValueSpan";Kc(0,D,L,"all",x["min"+se],x["max"+se]);for(var _e=0;_e<2;_e++)I[_e]=It.NU(D[_e],L,N,!0),Z&&(I[_e]=u.parse(I[_e]))}return y?w(m,v,a,p,!1):w(v,m,p,a,!0),{valueWindow:m,percentWindow:v}},c.prototype.reset=function(s){if(s===this._dataZoomModel){var a=this.getTargetSeriesModels();this._dataExtent=function qh(c,s,a){var l=[1/0,-1/0];Uu(a,function(p){(0,ki.AH)(l,p.getData(),s)});var u=c.getAxisModel(),h=(0,VO.Qw)(u.axis.scale,u,l).calculate();return[h.min,h.max]}(this,this._dimName,a),this._updateMinMaxSpan();var l=this.calculateDataWindow(s.settledOption);this._valueWindow=l.valueWindow,this._percentWindow=l.percentWindow,this._setAxisModel()}},c.prototype.filterData=function(s,a){if(s===this._dataZoomModel){var l=this._dimName,u=this.getTargetSeriesModels(),h=s.get("filterMode"),p=this._valueWindow;"none"!==h&&Uu(u,function(m){var y=m.getData(),x=y.mapDimensionsAll(l);if(x.length){if("weakFilter"===h){var w=y.getStore(),D=b.map(x,function(I){return y.getDimensionIndex(I)},y);y.filterSelf(function(I){for(var L,N,Z,se=0;se<x.length;se++){var _e=w.get(D[se],I),me=!isNaN(_e),De=_e<p[0],Pe=_e>p[1];if(me&&!De&&!Pe)return!0;me&&(Z=!0),De&&(L=!0),Pe&&(N=!0)}return Z&&L&&N})}else Uu(x,function(I){if("empty"===h)m.setData(y=y.map(I,function(N){return function v(m){return m>=p[0]&&m<=p[1]}(N)?N:NaN}));else{var L={};L[I]=p,y.selectRange(L)}});Uu(x,function(I){y.setApproximateExtent(p,I)})}})}},c.prototype._updateMinMaxSpan=function(){var s=this._minMaxSpan={},a=this._dataZoomModel,l=this._dataExtent;Uu(["min","max"],function(u){var h=a.get(u+"Span"),p=a.get(u+"ValueSpan");null!=p&&(p=this.getAxisModel().axis.scale.parse(p)),null!=p?h=It.NU(l[0]+p,l,[0,100],!0):null!=h&&(p=It.NU(h,[0,100],l,!0)-l[0]),s[u+"Span"]=h,s[u+"ValueSpan"]=p},this)},c.prototype._setAxisModel=function(){var s=this.getAxisModel(),a=this._percentWindow,l=this._valueWindow;if(a){var u=It.M9(l,[0,500]);u=Math.min(u,20);var h=s.axis.scale.rawExtentInfo;0!==a[0]&&h.setDeterminedMinMax("min",+l[0].toFixed(u)),100!==a[1]&&h.setDeterminedMinMax("max",+l[1].toFixed(u)),h.freeze()}},c}(),UO={getTargetSeries:function(c){function s(u){c.eachComponent("dataZoom",function(h){h.eachTargetAxis(function(p,v){var m=c.getComponent(dl(p),v);u(p,v,m,h)})})}s(function(u,h,p,v){p.__dzAxisProxy=null});var a=[];s(function(u,h,p,v){p.__dzAxisProxy||(p.__dzAxisProxy=new hl(u,h,v,c),a.push(p.__dzAxisProxy))});var l=(0,b.createHashMap)();return(0,b.each)(a,function(u){(0,b.each)(u.getTargetSeriesModels(),function(h){l.set(h.uid,h)})}),l},overallReset:function(c,s){c.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(l,u){a.getAxisProxy(l,u).reset(a)}),a.eachTargetAxis(function(l,u){a.getAxisProxy(l,u).filterData(a,s)})}),c.eachComponent("dataZoom",function(a){var l=a.findRepresentativeAxisProxy();if(l){var u=l.getDataPercentWindow(),h=l.getDataValueWindow();a.setCalculatedRange({start:u[0],end:u[1],startValue:h[0],endValue:h[1]})}})}};var ng=!1;function Lo(c){ng||(ng=!0,c.registerProcessor(c.PRIORITY.PROCESSOR.FILTER,UO),function GO(c){c.registerAction("dataZoom",function(s,a){var l=function CT(c,s){var h,a=(0,b.createHashMap)(),l=[],u=(0,b.createHashMap)();c.eachComponent({mainType:"dataZoom",query:s},function(x){u.get(x.uid)||v(x)});do{h=!1,c.eachComponent("dataZoom",p)}while(h);function p(x){!u.get(x.uid)&&function m(x){var w=!1;return x.eachTargetAxis(function(D,I){var L=a.get(D);L&&L[I]&&(w=!0)}),w}(x)&&(v(x),h=!0)}function v(x){u.set(x.uid,!0),l.push(x),function y(x){x.eachTargetAxis(function(w,D){(a.get(w)||a.set(w,[]))[D]=!0})}(x)}return l}(a,s);(0,b.each)(l,function(u){u.setRawRange({start:s.start,end:s.end,startValue:s.startValue,endValue:s.endValue})})})}(c),c.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function WO(c){c.registerComponentModel(NO),c.registerComponentView(tg),Lo(c)}var fl=function c(){},zx={};function Nd(c,s){zx[c]=s}function y_(c){return zx[c]}const jO=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.optionUpdated=function(){c.prototype.optionUpdated.apply(this,arguments);var a=this.ecModel;b.each(this.option.feature,function(l,u){var h=y_(u);h&&(h.getDefaultOption&&(h.defaultOption=h.getDefaultOption(a)),b.merge(l,h.defaultOption))})},s.type="toolbox",s.layoutMode={type:"box",ignoreSize:!0},s.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},s}(ma.Z);function YO(c,s){var a=Va.MY(s.get("padding")),l=s.getItemStyle(["color","opacity"]);return l.fill=s.get("backgroundColor"),new Mi.Z({shape:{x:c.x-a[3],y:c.y-a[0],width:c.width+a[1]+a[3],height:c.height+a[0]+a[2],r:s.get("borderRadius")},style:l,silent:!0,z2:-1})}const DT=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u,h){var p=this.group;if(p.removeAll(),a.get("show")){var v=+a.get("itemSize"),m="vertical"===a.get("orient"),y=a.get("feature")||{},x=this._features||(this._features={}),w=[];b.each(y,function(L,N){w.push(N)}),new dc.Z(this._featureNames||[],w).add(D).update(D).remove(b.curry(D,null)).execute(),this._featureNames=w,function ZO(c,s,a){var l=s.getBoxLayoutParams(),u=s.get("padding"),h={width:a.getWidth(),height:a.getHeight()},p=(0,Br.ME)(l,h,u);(0,Br.BZ)(s.get("orient"),c,s.get("itemGap"),p.width,p.height),(0,Br.p$)(c,l,h,u)}(p,a,u),p.add(YO(p.getBoundingRect(),a)),m||p.eachChild(function(L){var N=L.__title,Z=L.ensureState("emphasis"),se=Z.textConfig||(Z.textConfig={}),_e=L.getTextContent(),me=_e&&_e.ensureState("emphasis");if(me&&!b.isFunction(me)&&N){var De=me.style||(me.style={}),Pe=Ce.lP(N,_t.ZP.makeFont(De)),Ie=L.x+p.x,Ue=!1;L.y+p.y+v+Pe.height>u.getHeight()&&(se.position="top",Ue=!0);var Ye=Ue?-5-Pe.height:v+10;Ie+Pe.width/2>u.getWidth()?(se.position=["100%",Ye],De.align="right"):Ie-Pe.width/2<0&&(se.position=[0,Ye],De.align="left")}})}function D(L,N){var De,Z=w[L],se=w[N],_e=y[Z],me=new ka.Z(_e,a,a.ecModel);if(h&&null!=h.newTitle&&h.featureName===Z&&(_e.title=h.newTitle),Z&&!se){if(function Ux(c){return 0===c.indexOf("my")}(Z))De={onclick:me.option.onclick,featureName:Z};else{var Pe=y_(Z);if(!Pe)return;De=new Pe}x[Z]=De}else if(!(De=x[se]))return;De.uid=(0,Zn.Kr)("toolbox-feature"),De.model=me,De.ecModel=l,De.api=u;var Ie=De instanceof fl;Z||!se?!me.get("show")||Ie&&De.unusable?Ie&&De.remove&&De.remove(l,u):(function I(L,N,Z){var Pe,Ie,se=L.getModel("iconStyle"),_e=L.getModel(["emphasis","iconStyle"]),me=N instanceof fl&&N.getIcons?N.getIcons():L.get("icon"),De=L.get("title")||{};b.isString(me)?(Pe={})[Z]=me:Pe=me,b.isString(De)?(Ie={})[Z]=De:Ie=De;var ke=L.iconPaths={};b.each(Pe,function(Ue,Ye){var Ke=_n.createIcon(Ue,{},{x:-v/2,y:-v/2,width:v,height:v});Ke.setStyle(se.getItemStyle()),Ke.ensureState("emphasis").style=_e.getItemStyle();var ut=new _t.ZP({style:{text:Ie[Ye],align:_e.get("textAlign"),borderRadius:_e.get("textBorderRadius"),padding:_e.get("textPadding"),fill:null},ignore:!0});Ke.setTextContent(ut),_n.setTooltipConfig({el:Ke,componentModel:a,itemName:Ye,formatterParamsExtra:{title:Ie[Ye]}}),Ke.__title=Ie[Ye],Ke.on("mouseover",function(){var pt=_e.getItemStyle(),yt=m?null==a.get("right")&&"right"!==a.get("left")?"right":"left":null==a.get("bottom")&&"bottom"!==a.get("top")?"bottom":"top";ut.setStyle({fill:_e.get("textFill")||pt.fill||pt.stroke||"#000",backgroundColor:_e.get("textBackgroundColor")}),Ke.setTextConfig({position:_e.get("textPosition")||yt}),ut.ignore=!a.get("showTitle"),u.enterEmphasis(this)}).on("mouseout",function(){"emphasis"!==L.get(["iconStatus",Ye])&&u.leaveEmphasis(this),ut.hide()}),("emphasis"===L.get(["iconStatus",Ye])?Wt.fD:Wt.Mh)(Ke),p.add(Ke),Ke.on("click",b.bind(N.onclick,N,l,u,Ye)),ke[Ye]=Ke})}(me,De,Z),me.setIconStatus=function(ke,Ue){var Ye=this.option,Ke=this.iconPaths;Ye.iconStatus=Ye.iconStatus||{},Ye.iconStatus[ke]=Ue,Ke[ke]&&("emphasis"===Ue?Wt.fD:Wt.Mh)(Ke[ke])},De instanceof fl&&De.render&&De.render(me,l,u,h)):Ie&&De.dispose&&De.dispose(l,u)}},s.prototype.updateView=function(a,l,u,h){b.each(this._features,function(p){p instanceof fl&&p.updateView&&p.updateView(p.model,l,u,h)})},s.prototype.remove=function(a,l){b.each(this._features,function(u){u instanceof fl&&u.remove&&u.remove(a,l)}),this.group.removeAll()},s.prototype.dispose=function(a,l){b.each(this._features,function(u){u instanceof fl&&u.dispose&&u.dispose(a,l)})},s.type="toolbox",s}(va.Z),Wx=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,At.ZT)(s,c),s.prototype.onclick=function(a,l){var u=this.model,h=u.get("name")||a.get("title.0.text")||"echarts",p="svg"===l.getZr().painter.getType(),v=p?"svg":u.get("type",!0)||"png",m=l.getConnectedDataURL({type:v,backgroundColor:u.get("backgroundColor",!0)||a.get("backgroundColor")||"#fff",connectedBackgroundColor:u.get("connectedBackgroundColor"),excludeComponents:u.get("excludeComponents"),pixelRatio:u.get("pixelRatio")}),y=Es.Z.browser;if((0,b.isFunction)(MouseEvent)&&(y.newEdge||!y.ie&&!y.edge)){var x=document.createElement("a");x.download=h+"."+v,x.target="_blank",x.href=m;var w=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});x.dispatchEvent(w)}else if(window.navigator.msSaveOrOpenBlob||p){var D=m.split(","),I=D[0].indexOf("base64")>-1,L=p?decodeURIComponent(D[1]):D[1];I&&(L=window.atob(L));var N=h+"."+v;if(window.navigator.msSaveOrOpenBlob){for(var Z=L.length,se=new Uint8Array(Z);Z--;)se[Z]=L.charCodeAt(Z);var _e=new Blob([se]);window.navigator.msSaveOrOpenBlob(_e,N)}else{var me=document.createElement("iframe");document.body.appendChild(me);var De=me.contentWindow,Pe=De.document;Pe.open("image/svg+xml","replace"),Pe.write(L),Pe.close(),De.focus(),Pe.execCommand("SaveAs",!0,N),document.body.removeChild(me)}}else{var Ie=u.get("lang"),ke='<body style="margin:0;"><img src="'+m+'" style="max-width:100%;" title="'+(Ie&&Ie[0]||"")+'" /></body>',Ue=window.open();Ue.document.write(ke),Ue.document.title=h}},s.getDefaultOption=function(a){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:a.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:a.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},s}(fl);var MT="__ec_magicType_stack__",XO=[["line","bar"],["stack"]],TT=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,At.ZT)(s,c),s.prototype.getIcons=function(){var a=this.model,l=a.get("icon"),u={};return b.each(a.get("type"),function(h){l[h]&&(u[h]=l[h])}),u},s.getDefaultOption=function(a){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:a.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},s.prototype.onclick=function(a,l,u){var h=this.model,p=h.get(["seriesIndex",u]);if(b_[u]){var v={series:[]};b.each(XO,function(w){b.indexOf(w,u)>=0&&b.each(w,function(D){h.setIconStatus(D,"normal")})}),h.setIconStatus(u,"emphasis"),a.eachComponent({mainType:"series",query:null==p?null:{seriesIndex:p}},function(w){var L=b_[u](w.subType,w.id,w,h);L&&(b.defaults(L,w.option),v.series.push(L));var N=w.coordinateSystem;if(N&&"cartesian2d"===N.type&&("line"===u||"bar"===u)){var Z=N.getAxesByScale("ordinal")[0];if(Z){var _e=Z.dim+"Axis",De=w.getReferringComponents(_e,xn.C6).models[0].componentIndex;v[_e]=v[_e]||[];for(var Pe=0;Pe<=De;Pe++)v[_e][De]=v[_e][De]||{};v[_e][De].boundaryGap="bar"===u}}});var y,x=u;"stack"===u&&(y=b.merge({stack:h.option.title.tiled,tiled:h.option.title.stack},h.option.title),"emphasis"!==h.get(["iconStatus",u])&&(x="tiled")),l.dispatchAction({type:"changeMagicType",currentType:x,newOption:v,newTitle:y,featureName:"magicType"})}},s}(fl),b_={line:function(c,s,a,l){if("bar"===c)return b.merge({id:s,type:"line",data:a.get("data"),stack:a.get("stack"),markPoint:a.get("markPoint"),markLine:a.get("markLine")},l.get(["option","line"])||{},!0)},bar:function(c,s,a,l){if("line"===c)return b.merge({id:s,type:"bar",data:a.get("data"),stack:a.get("stack"),markPoint:a.get("markPoint"),markLine:a.get("markLine")},l.get(["option","bar"])||{},!0)},stack:function(c,s,a,l){var u=a.get("stack")===MT;if("line"===c||"bar"===c)return l.setIconStatus("stack",u?"normal":"emphasis"),b.merge({id:s,stack:u?"":MT},l.get(["option","stack"])||{},!0)}};op.zl({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(c,s){s.mergeOption(c.newOption)});const Kn=TT;var Wr=new Array(60).join("-");function $O(c){var s=[];return b.each(c,function(a,l){var u=a.categoryAxis,p=a.valueAxis.dim,v=[" "].concat(b.map(a.series,function(I){return I.name})),m=[u.model.getCategories()];b.each(a.series,function(I){var L=I.getRawData();m.push(I.getRawData().mapArray(L.mapDimension(p),function(N){return N}))});for(var y=[v.join("\t")],x=0;x<m[0].length;x++){for(var w=[],D=0;D<m.length;D++)w.push(m[D][x]);y.push(w.join("\t"))}s.push(y.join("\n"))}),s.join("\n\n"+Wr+"\n\n")}function ET(c){return b.map(c,function(s){var a=s.getRawData(),l=[s.name],u=[];return a.each(a.dimensions,function(){for(var h=arguments.length,p=arguments[h-1],v=a.getName(p),m=0;m<h-1;m++)u[m]=arguments[m];l.push((v?v+"\t":"")+u.join("\t"))}),l.join("\n")}).join("\n\n"+Wr+"\n\n")}function x_(c){return c.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var C_=new RegExp("[\t]+","g");var QO=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,At.ZT)(s,c),s.prototype.onclick=function(a,l){setTimeout(function(){l.dispatchAction({type:"hideTip"})});var u=l.getDom(),h=this.model;this._dom&&u.removeChild(this._dom);var p=document.createElement("div");p.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",p.style.backgroundColor=h.get("backgroundColor")||"#fff";var v=document.createElement("h4"),m=h.get("lang")||[];v.innerHTML=m[0]||h.get("title"),v.style.cssText="margin:10px 20px",v.style.color=h.get("textColor");var y=document.createElement("div"),x=document.createElement("textarea");y.style.cssText="overflow:auto";var w=h.get("optionToContent"),D=h.get("contentToOption"),I=function AT(c){var s=function Qn(c){var s={},a=[],l=[];return c.eachRawSeries(function(u){var h=u.coordinateSystem;if(!h||"cartesian2d"!==h.type&&"polar"!==h.type)a.push(u);else{var p=h.getBaseAxis();if("category"===p.type){var v=p.dim+"_"+p.index;s[v]||(s[v]={categoryAxis:p,valueAxis:h.getOtherAxis(p),series:[]},l.push({axisDim:p.dim,axisIndex:p.index})),s[v].series.push(u)}else a.push(u)}}),{seriesGroupByCategoryAxis:s,other:a,meta:l}}(c);return{value:b.filter([$O(s.seriesGroupByCategoryAxis),ET(s.other)],function(a){return!!a.replace(/[\n\t\s]/g,"")}).join("\n\n"+Wr+"\n\n"),meta:s.meta}}(a);if(b.isFunction(w)){var L=w(l.getOption());b.isString(L)?y.innerHTML=L:b.isDom(L)&&y.appendChild(L)}else{x.readOnly=h.get("readOnly");var N=x.style;N.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",N.color=h.get("textColor"),N.borderColor=h.get("textareaBorderColor"),N.backgroundColor=h.get("textareaColor"),x.value=I.value,y.appendChild(x)}var Z=I.meta,se=document.createElement("div");se.style.cssText="position:absolute;bottom:5px;left:0;right:0";var _e="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",me=document.createElement("div"),De=document.createElement("div");_e+=";background-color:"+h.get("buttonColor"),_e+=";color:"+h.get("buttonTextColor");var Pe=this;function Ie(){u.removeChild(p),Pe._dom=null}(0,rl.Oo)(me,"click",Ie),(0,rl.Oo)(De,"click",function(){if(null==D&&null!=w||null!=D&&null==w)Ie();else{var ke;try{ke=b.isFunction(D)?D(y,l.getOption()):function KO(c,s){var a=c.split(new RegExp("\n*"+Wr+"\n*","g")),l={series:[]};return b.each(a,function(u,h){if(function IT(c){if(c.slice(0,c.indexOf("\n")).indexOf("\t")>=0)return!0}(u)){var p=function gs(c){for(var s=c.split(/\n+/g),a=x_(s.shift()).split(C_),l=[],u=b.map(a,function(m){return{name:m,data:[]}}),h=0;h<s.length;h++){var p=x_(s[h]).split(C_);l.push(p.shift());for(var v=0;v<p.length;v++)u[v]&&(u[v].data[h]=p[v])}return{series:u,categories:l}}(u),v=s[h],m=v.axisDim+"Axis";v&&(l[m]=l[m]||[],l[m][v.axisIndex]={data:p.categories},l.series=l.series.concat(p.series))}else p=function Jh(c){for(var s=c.split(/\n+/g),a=x_(s.shift()),l=[],u=0;u<s.length;u++){var h=x_(s[u]);if(h){var p=h.split(C_),v="",m=void 0,y=!1;isNaN(p[0])?(y=!0,v=p[0],p=p.slice(1),l[u]={name:v,value:[]},m=l[u].value):m=l[u]=[];for(var x=0;x<p.length;x++)m.push(+p[x]);1===m.length&&(y?l[u].value=m[0]:l[u]=m[0])}}return{name:a,data:l}}(u),l.series.push(p)}),l}(x.value,Z)}catch(Ue){throw Ie(),new Error("Data view format error "+Ue)}ke&&l.dispatchAction({type:"changeDataView",newOption:ke}),Ie()}}),me.innerHTML=m[1],De.innerHTML=m[2],De.style.cssText=me.style.cssText=_e,!h.get("readOnly")&&se.appendChild(De),se.appendChild(me),p.appendChild(v),p.appendChild(y),p.appendChild(se),y.style.height=u.clientHeight-80+"px",u.appendChild(p),this._dom=p},s.prototype.remove=function(a,l){this._dom&&l.getDom().removeChild(this._dom)},s.prototype.dispose=function(a,l){this.remove(a,l)},s.getDefaultOption=function(a){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:a.getLocaleModel().get(["toolbox","dataView","title"]),lang:a.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},s}(fl);function ez(c,s){return b.map(c,function(a,l){var u=s&&s[l];if(b.isObject(u)&&!b.isArray(u)){b.isObject(a)&&!b.isArray(a)||(a={value:a});var p=null!=u.name&&null==a.name;return a=b.defaults(a,u),p&&delete a.name,a}return a})}op.zl({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(c,s){var a=[];b.each(c.newOption.series,function(l){var u=s.getSeriesByName(l.name)[0];if(u){var h=u.get("data");a.push({name:l.name,data:ez(l.data,h)})}else a.push(b.extend({type:"scatter"},l))}),s.mergeOption(b.defaults({series:a},c.newOption))});const tz=QO;var jx=b.each,Zx=(0,xn.Yf)();function w_(c){var s=Zx(c);return s.snapshots||(s.snapshots=[{}]),s.snapshots}var ek=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,At.ZT)(s,c),s.prototype.onclick=function(a,l){(function Yx(c){Zx(c).snapshots=null})(a),l.dispatchAction({type:"restore",from:this.uid})},s.getDefaultOption=function(a){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:a.getLocaleModel().get(["toolbox","restore","title"])}},s}(fl);op.zl({type:"restore",event:"restore",update:"prepareAndUpdate"},function(c,s){s.resetOption("recreate")});const tk=ek;var nk=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],Xx=function(){function c(s,a,l){var u=this;this._targetInfoList=[];var h=$x(a,s);(0,b.each)(D_,function(p,v){(!l||!l.include||(0,b.indexOf)(l.include,v)>=0)&&p(h,u._targetInfoList)})}return c.prototype.setOutputRanges=function(s,a){return this.matchOutputRanges(s,a,function(l,u,h){if((l.coordRanges||(l.coordRanges=[])).push(u),!l.coordRange){l.coordRange=u;var p=T_[l.brushType](0,h,u);l.__rangeOffset={offset:Kx[l.brushType](p.values,l.range,[1,1]),xyMinMax:p.xyMinMax}}}),s},c.prototype.matchOutputRanges=function(s,a,l){(0,b.each)(s,function(u){var h=this.findTargetInfo(u,a);h&&!0!==h&&(0,b.each)(h.coordSyses,function(p){var v=T_[u.brushType](1,p,u.range,!0);l(u,v.values,p,a)})},this)},c.prototype.setInputRanges=function(s,a){(0,b.each)(s,function(l){var u=this.findTargetInfo(l,a);if(l.range=l.range||[],u&&!0!==u){l.panelId=u.panelId;var h=T_[l.brushType](0,u.coordSys,l.coordRange),p=l.__rangeOffset;l.range=p?Kx[l.brushType](h.values,p.offset,function ik(c,s){var a=Qx(c),l=Qx(s),u=[a[0]/l[0],a[1]/l[1]];return isNaN(u[0])&&(u[0]=1),isNaN(u[1])&&(u[1]=1),u}(h.xyMinMax,p.xyMinMax)):h.values}},this)},c.prototype.makePanelOpts=function(s,a){return(0,b.map)(this._targetInfoList,function(l){var u=l.getPanelRect();return{panelId:l.panelId,defaultBrushType:a?a(l):null,clipPath:Ob(u),isTargetByCursor:Em(u,s,l.coordSysModel),getLinearBrushOtherExtent:mD(u)}})},c.prototype.controlSeries=function(s,a,l){var u=this.findTargetInfo(s,l);return!0===u||u&&(0,b.indexOf)(u.coordSyses,a.coordinateSystem)>=0},c.prototype.findTargetInfo=function(s,a){for(var l=this._targetInfoList,u=$x(a,s),h=0;h<l.length;h++){var p=l[h],v=s.panelId;if(v){if(p.panelId===v)return p}else for(var m=0;m<M_.length;m++)if(M_[m](u,p))return p}return!0},c}();function S_(c){return c[0]>c[1]&&c.reverse(),c}function $x(c,s){return(0,xn.pm)(c,s,{includeMainTypes:nk})}var D_={grid:function(c,s){var a=c.xAxisModels,l=c.yAxisModels,u=c.gridModels,h=(0,b.createHashMap)(),p={},v={};!a&&!l&&!u||((0,b.each)(a,function(m){var y=m.axis.grid.model;h.set(y.id,y),p[y.id]=!0}),(0,b.each)(l,function(m){var y=m.axis.grid.model;h.set(y.id,y),v[y.id]=!0}),(0,b.each)(u,function(m){h.set(m.id,m),p[m.id]=!0,v[m.id]=!0}),h.each(function(m){var x=[];(0,b.each)(m.coordinateSystem.getCartesians(),function(w,D){((0,b.indexOf)(a,w.getAxis("x").model)>=0||(0,b.indexOf)(l,w.getAxis("y").model)>=0)&&x.push(w)}),s.push({panelId:"grid--"+m.id,gridModel:m,coordSysModel:m,coordSys:x[0],coordSyses:x,getPanelRect:rk.grid,xAxisDeclared:p[m.id],yAxisDeclared:v[m.id]})}))},geo:function(c,s){(0,b.each)(c.geoModels,function(a){var l=a.coordinateSystem;s.push({panelId:"geo--"+a.id,geoModel:a,coordSysModel:a,coordSys:l,coordSyses:[l],getPanelRect:rk.geo})})}},M_=[function(c,s){var a=c.xAxisModel,l=c.yAxisModel,u=c.gridModel;return!u&&a&&(u=a.axis.grid.model),!u&&l&&(u=l.axis.grid.model),u&&u===s.gridModel},function(c,s){var a=c.geoModel;return a&&a===s.geoModel}],rk={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var c=this.coordSys,s=c.getBoundingRect().clone();return s.applyTransform(_n.getTransform(c)),s}},T_={lineX:(0,b.curry)(PT,0),lineY:(0,b.curry)(PT,1),rect:function(c,s,a,l){var u=c?s.pointToData([a[0][0],a[1][0]],l):s.dataToPoint([a[0][0],a[1][0]],l),h=c?s.pointToData([a[0][1],a[1][1]],l):s.dataToPoint([a[0][1],a[1][1]],l),p=[S_([u[0],h[0]]),S_([u[1],h[1]])];return{values:p,xyMinMax:p}},polygon:function(c,s,a,l){var u=[[1/0,-1/0],[1/0,-1/0]];return{values:(0,b.map)(a,function(p){var v=c?s.pointToData(p,l):s.dataToPoint(p,l);return u[0][0]=Math.min(u[0][0],v[0]),u[1][0]=Math.min(u[1][0],v[1]),u[0][1]=Math.max(u[0][1],v[0]),u[1][1]=Math.max(u[1][1],v[1]),v}),xyMinMax:u}}};function PT(c,s,a,l){var u=a.getAxis(["x","y"][c]),h=S_((0,b.map)([0,1],function(v){return s?u.coordToData(u.toLocalCoord(l[v]),!0):u.toGlobalCoord(u.dataToCoord(l[v]))})),p=[];return p[c]=h,p[1-c]=[NaN,NaN],{values:h,xyMinMax:p}}var Kx={lineX:(0,b.curry)(Fd,0),lineY:(0,b.curry)(Fd,1),rect:function(c,s,a){return[[c[0][0]-a[0]*s[0][0],c[0][1]-a[0]*s[0][1]],[c[1][0]-a[1]*s[1][0],c[1][1]-a[1]*s[1][1]]]},polygon:function(c,s,a){return(0,b.map)(c,function(l,u){return[l[0]-a[0]*s[u][0],l[1]-a[1]*s[u][1]]})}};function Fd(c,s,a,l){return[s[0]-l[c]*a[0],s[1]-l[c]*a[1]]}function Qx(c){return c?[c[0][1]-c[0][0],c[1][1]-c[1][0]]:[NaN,NaN]}const ig=Xx;var nz=H(157),qx=b.each,rz=(0,xn.g0)("toolbox-dataZoom_"),ak=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u,h){this._brushController||(this._brushController=new Fs(u.getZr()),this._brushController.on("brush",b.bind(this._onBrush,this)).mount()),function sk(c,s,a,l,u){var h=a._isZoomActive;l&&"takeGlobalCursor"===l.type&&(h="dataZoomSelect"===l.key&&l.dataZoomSelectActive),a._isZoomActive=h,c.setIconStatus("zoom",h?"emphasis":"normal");var v=new ig(E_(c),s,{include:["grid"]}).makePanelOpts(u,function(m){return m.xAxisDeclared&&!m.yAxisDeclared?"lineX":!m.xAxisDeclared&&m.yAxisDeclared?"lineY":"rect"});a._brushController.setPanels(v).enableBrush(!(!h||!v.length)&&{brushType:"auto",brushStyle:c.getModel("brushStyle").getItemStyle()})}(a,l,this,h,u),function RT(c,s){c.setIconStatus("back",function JO(c){return w_(c).length}(s)>1?"emphasis":"normal")}(a,l)},s.prototype.onclick=function(a,l,u){ok[u].call(this)},s.prototype.remove=function(a,l){this._brushController&&this._brushController.unmount()},s.prototype.dispose=function(a,l){this._brushController&&this._brushController.dispose()},s.prototype._onBrush=function(a){var l=a.areas;if(a.isEnd&&l.length){var u={},h=this.ecModel;this._brushController.updateCovers([]),new ig(E_(this.model),h,{include:["grid"]}).matchOutputRanges(l,h,function(y,x,w){if("cartesian2d"===w.type){var D=y.brushType;"rect"===D?(v("x",w,x[0]),v("y",w,x[1])):v({lineX:"x",lineY:"y"}[D],w,x)}}),function rg(c,s){var a=w_(c);jx(s,function(l,u){for(var h=a.length-1;h>=0&&!a[h][u];h--);if(h<0){var v=c.queryComponents({mainType:"dataZoom",subType:"select",id:u})[0];if(v){var m=v.getPercentRange();a[0][u]={dataZoomId:u,start:m[0],end:m[1]}}}}),a.push(s)}(h,u),this._dispatchZoomAction(u)}function v(y,x,w){var D=x.getAxis(y),I=D.model,L=function m(y,x,w){var D;return w.eachComponent({mainType:"dataZoom",subType:"select"},function(I){I.getAxisModel(y,x.componentIndex)&&(D=I)}),D}(y,I,h),N=L.findRepresentativeAxisProxy(I).getMinMaxSpan();(null!=N.minValueSpan||null!=N.maxValueSpan)&&(w=Kc(0,w.slice(),D.scale.getExtent(),0,N.minValueSpan,N.maxValueSpan)),L&&(u[L.id]={dataZoomId:L.id,startValue:w[0],endValue:w[1]})}},s.prototype._dispatchZoomAction=function(a){var l=[];qx(a,function(u,h){l.push(b.clone(u))}),l.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:l})},s.getDefaultOption=function(a){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:a.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},s}(fl),ok={zoom:function(){this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!this._isZoomActive})},back:function(){this._dispatchZoomAction(function qO(c){var s=w_(c),a=s[s.length-1];s.length>1&&s.pop();var l={};return jx(a,function(u,h){for(var p=s.length-1;p>=0;p--)if(u=s[p][h]){l[h]=u;break}}),l}(this.ecModel))}};function E_(c){var s={xAxisIndex:c.get("xAxisIndex",!0),yAxisIndex:c.get("yAxisIndex",!0),xAxisId:c.get("xAxisId",!0),yAxisId:c.get("yAxisId",!0)};return null==s.xAxisIndex&&null==s.xAxisId&&(s.xAxisIndex="all"),null==s.yAxisIndex&&null==s.yAxisId&&(s.yAxisIndex="all"),s}(0,nz.f)("dataZoom",function(c){var s=c.getComponent("toolbox",0),a=["feature","dataZoom"];if(s&&null!=s.get(a)){var l=s.getModel(a),u=[],h=E_(l),p=(0,xn.pm)(c,h);return qx(p.xAxisModels,function(m){return v(m,"xAxis","xAxisIndex")}),qx(p.yAxisModels,function(m){return v(m,"yAxis","yAxisIndex")}),u}function v(m,y,x){var w=m.componentIndex,D={type:"select",$fromToolbox:!0,filterMode:l.get("filterMode",!0)||"filter",id:rz+y+w};D[x]=w,u.push(D)}});const LT=ak,ck=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.type="tooltip",s.dependencies=["axisPointer"],s.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},s}(ma.Z);function Jx(c){var s=c.get("confine");return null!=s?!!s:"richText"===c.get("renderMode")}function kT(c){if(Es.Z.domSupported)for(var s=document.documentElement.style,a=0,l=c.length;a<l;a++)if(c[a]in s)return c[a]}var e1=kT(["transform","webkitTransform","OTransform","MozTransform","msTransform"]);function t1(c,s){if(!c)return s;s=(0,Va.zW)(s,!0);var a=c.indexOf(s);return(c=-1===a?s:"-"+c.slice(0,a)+"-"+s).toLowerCase()}var uk=t1(kT(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),"transition"),n1=t1(e1,"transform"),az="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Es.Z.transform3dSupported?"will-change:transform;":"");function dk(c,s,a){var l=c.toFixed(0)+"px",u=s.toFixed(0)+"px";if(!Es.Z.transformSupported)return a?"top:"+u+";left:"+l+";":[["top",u],["left",l]];var h=Es.Z.transform3dSupported,p="translate"+(h?"3d":"")+"("+l+","+u+(h?",0":"")+")";return a?"top:0;left:0;"+n1+":"+p+";":[["top",0],["left",0],[e1,p]]}function hk(c,s,a,l,u){var h=s&&s.painter;if(a){var p=h&&h.getViewportRoot();p&&(0,V.YB)(c,p,document.body,l,u)}else{c[0]=l,c[1]=u;var v=h&&h.getViewportRootOffset();v&&(c[0]+=v.offsetLeft,c[1]+=v.offsetTop)}c[2]=c[0]/s.getWidth(),c[3]=c[1]/s.getHeight()}const dz=function(){function c(s,a,l){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,Es.Z.wxa)return null;var u=document.createElement("div");u.domBelongToZr=!0,this.el=u;var h=this._zr=a.getZr(),p=this._appendToBody=l&&l.appendToBody;hk(this._styleCoord,h,p,a.getWidth()/2,a.getHeight()/2),p?document.body.appendChild(u):s.appendChild(u),this._container=s;var v=this;u.onmouseenter=function(){v._enterable&&(clearTimeout(v._hideTimeout),v._show=!0),v._inContent=!0},u.onmousemove=function(m){if(m=m||window.event,!v._enterable){var y=h.handler,x=h.painter.getViewportRoot();(0,rl.OD)(x,m,!0),y.dispatch("mousemove",m)}},u.onmouseleave=function(){v._inContent=!1,v._enterable&&v._show&&v.hideLater(v._hideDelay)}}return c.prototype.update=function(s){var a=this._container,l=function FT(c,s){var a=c.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(c);return a?s?a[s]:a:null}(a,"position"),u=a.style;"absolute"!==u.position&&"absolute"!==l&&(u.position="relative"),s.get("alwaysShowContent")&&this._moveIfResized(),this.el.className=s.get("className")||""},c.prototype.show=function(s,a){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var l=this.el,u=l.style,h=this._styleCoord;l.innerHTML?u.cssText=az+function cz(c,s,a){var l=[],u=c.get("transitionDuration"),h=c.get("backgroundColor"),p=c.get("shadowBlur"),v=c.get("shadowColor"),m=c.get("shadowOffsetX"),y=c.get("shadowOffsetY"),x=c.getModel("textStyle"),w=(0,da.d_)(c,"html");return l.push("box-shadow:"+m+"px "+y+"px "+p+"px "+v),s&&u&&l.push(function sz(c,s){var a="cubic-bezier(0.23,1,0.32,1)",l=" "+c/2+"s "+a,u="opacity"+l+",visibility"+l;return s||(l=" "+c+"s "+a,u+=Es.Z.transformSupported?","+n1+l:",left"+l+",top"+l),uk+":"+u}(u,a)),h&&l.push("background-color:"+h),(0,b.each)(["width","color","radius"],function(I){var L="border-"+I,N=(0,Va.zW)(L),Z=c.get(N);null!=Z&&l.push(L+":"+Z+("color"===I?"":"px"))}),l.push(function lz(c){var s=[],a=c.get("fontSize"),l=c.getTextColor();l&&s.push("color:"+l),s.push("font:"+c.getFont()),a&&s.push("line-height:"+Math.round(3*a/2)+"px");var u=c.get("textShadowColor"),h=c.get("textShadowBlur")||0,p=c.get("textShadowOffsetX")||0,v=c.get("textShadowOffsetY")||0;return u&&h&&s.push("text-shadow:"+p+"px "+v+"px "+h+"px "+u),(0,b.each)(["decoration","align"],function(m){var y=c.get(m);y&&s.push("text-"+m+":"+y)}),s.join(";")}(x)),null!=w&&l.push("padding:"+(0,Va.MY)(w).join("px ")+"px"),l.join(";")+";"}(s,!this._firstShow,this._longHide)+dk(h[0],h[1],!0)+"border-color:"+(0,Va.Lz)(a)+";"+(s.get("extraCssText")||"")+";pointer-events:"+(this._enterable?"auto":"none"):u.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},c.prototype.setContent=function(s,a,l,u,h){var p=this.el;if(null!=s){var v="";if((0,b.isString)(h)&&"item"===l.get("trigger")&&!Jx(l)&&(v=function oz(c,s,a){if(!(0,b.isString)(a)||"inside"===a)return"";var l=c.get("backgroundColor"),u=c.get("borderWidth");s=(0,Va.Lz)(s);var y,h=function BT(c){return"left"===c?"right":"right"===c?"left":"top"===c?"bottom":"top"}(a),p=Math.max(1.5*Math.round(u),6),v="",m=n1+":";(0,b.indexOf)(["left","right"],h)>-1?(v+="top:50%",m+="translateY(-50%) rotate("+(y="left"===h?-225:-45)+"deg)"):(v+="left:50%",m+="translateX(-50%) rotate("+(y="top"===h?225:45)+"deg)");var x=y*Math.PI/180,w=p+u,D=w*Math.abs(Math.cos(x))+w*Math.abs(Math.sin(x)),L=s+" solid "+u+"px;";return'<div style="'+["position:absolute;width:"+p+"px;height:"+p+"px;",(v+=";"+h+":-"+Math.round(100*((D-Math.SQRT2*u)/2+Math.SQRT2*u-(D-w)/2))/100+"px")+";"+m+";","border-bottom:"+L,"border-right:"+L,"background-color:"+l+";"].join("")+'"></div>'}(l,u,h)),(0,b.isString)(s))p.innerHTML=s+v;else if(s){p.innerHTML="",(0,b.isArray)(s)||(s=[s]);for(var m=0;m<s.length;m++)(0,b.isDom)(s[m])&&s[m].parentNode!==p&&p.appendChild(s[m]);if(v&&p.childNodes.length){var y=document.createElement("div");y.innerHTML=v,p.appendChild(y)}}}else p.innerHTML=""},c.prototype.setEnterable=function(s){this._enterable=s},c.prototype.getSize=function(){var s=this.el;return[s.offsetWidth,s.offsetHeight]},c.prototype.moveTo=function(s,a){var l=this._styleCoord;if(hk(l,this._zr,this._appendToBody,s,a),null!=l[0]&&null!=l[1]){var u=this.el.style,h=dk(l[0],l[1]);(0,b.each)(h,function(p){u[p[0]]=p[1]})}},c.prototype._moveIfResized=function(){var a=this._styleCoord[3];this.moveTo(this._styleCoord[2]*this._zr.getWidth(),a*this._zr.getHeight())},c.prototype.hide=function(){var s=this,a=this.el.style;a.visibility="hidden",a.opacity="0",Es.Z.transform3dSupported&&(a.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return s._longHide=!0},500)},c.prototype.hideLater=function(s){this._show&&(!this._inContent||!this._enterable)&&(s?(this._hideDelay=s,this._show=!1,this._hideTimeout=setTimeout((0,b.bind)(this.hide,this),s)):this.hide())},c.prototype.isShow=function(){return this._show},c.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},c}();function Bd(c){return Math.max(0,c)}function ag(c){var s=Bd(c.shadowBlur||0),a=Bd(c.shadowOffsetX||0),l=Bd(c.shadowOffsetY||0);return{left:Bd(s-a),right:Bd(s+a),top:Bd(s-l),bottom:Bd(s+l)}}function og(c,s,a,l){c[0]=a,c[1]=l,c[2]=c[0]/s.getWidth(),c[3]=c[1]/s.getHeight()}const sg=function(){function c(s){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=s.getZr(),og(this._styleCoord,this._zr,s.getWidth()/2,s.getHeight()/2)}return c.prototype.update=function(s){s.get("alwaysShowContent")&&this._moveIfResized()},c.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},c.prototype.setContent=function(s,a,l,u,h){var p=this;b.isObject(s)&&(0,_a._y)(""),this.el&&this._zr.remove(this.el);var v=l.getModel("textStyle");this.el=new _t.ZP({style:{rich:a.richTextStyles,text:s,lineHeight:22,borderWidth:1,borderColor:u,textShadowColor:v.get("textShadowColor"),fill:l.get(["textStyle","color"]),padding:(0,da.d_)(l,"richText"),verticalAlign:"top",align:"left"},z:l.get("z")}),b.each(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(y){p.el.style[y]=l.get(y)}),b.each(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(y){p.el.style[y]=v.get(y)||0}),this._zr.add(this.el);var m=this;this.el.on("mouseover",function(){m._enterable&&(clearTimeout(m._hideTimeout),m._show=!0),m._inContent=!0}),this.el.on("mouseout",function(){m._enterable&&m._show&&m.hideLater(m._hideDelay),m._inContent=!1})},c.prototype.setEnterable=function(s){this._enterable=s},c.prototype.getSize=function(){var s=this.el,a=this.el.getBoundingRect(),l=ag(s.style);return[a.width+l.left+l.right,a.height+l.top+l.bottom]},c.prototype.moveTo=function(s,a){var l=this.el;if(l){var u=this._styleCoord;og(u,this._zr,s,a),s=u[0],a=u[1];var h=l.style,p=Bd(h.borderWidth||0),v=ag(h);l.x=s+p+v.left,l.y=a+p+v.top,l.markRedraw()}},c.prototype._moveIfResized=function(){var a=this._styleCoord[3];this.moveTo(this._styleCoord[2]*this._zr.getWidth(),a*this._zr.getHeight())},c.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},c.prototype.hideLater=function(s){this._show&&(!this._inContent||!this._enterable)&&(s?(this._hideDelay=s,this._show=!1,this._hideTimeout=setTimeout(b.bind(this.hide,this),s)):this.hide())},c.prototype.isShow=function(){return this._show},c.prototype.dispose=function(){this._zr.remove(this.el)},c}();var VT=H(999),r1=H(4756),a1=new Mi.Z({shape:{x:-1,y:-1,width:2,height:2}});function Vd(c,s,a){var u,l=s.ecModel;a?(u=new ka.Z(a,l,l),u=new ka.Z(s.option,u,l)):u=s;for(var h=c.length-1;h>=0;h--){var p=c[h];p&&(p instanceof ka.Z&&(p=p.get("tooltip",!0)),(0,b.isString)(p)&&(p={formatter:p}),p&&(u=new ka.Z(p,u,l)))}return u}function o1(c,s){return c.dispatchAction||(0,b.bind)(s.dispatchAction,s)}function HT(c){return"center"===c||"middle"===c}const pk=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.init=function(a,l){if(!Es.Z.node&&l.getDom()){var u=a.getComponent("tooltip"),h=this._renderMode=(0,xn.U9)(u.get("renderMode"));this._tooltipContent="richText"===h?new sg(l):new dz(l.getDom(),l,{appendToBody:u.get("appendToBody",!0)})}},s.prototype.render=function(a,l,u){if(!Es.Z.node&&u.getDom()){this.group.removeAll(),this._tooltipModel=a,this._ecModel=l,this._api=u,this._alwaysShowContent=a.get("alwaysShowContent");var h=this._tooltipContent;h.update(a),h.setEnterable(a.get("enterable")),this._initGlobalListener(),this._keepShow(),"richText"!==this._renderMode&&a.get("transitionDuration")?(0,Uo.T9)(this,"_updatePosition",50,"fixRate"):(0,Uo.ZH)(this,"_updatePosition")}},s.prototype._initGlobalListener=function(){var l=this._tooltipModel.get("triggerOn");zM("itemTooltip",this._api,(0,b.bind)(function(u,h,p){"none"!==l&&(l.indexOf(u)>=0?this._tryShow(h,p):"leave"===u&&this._hide(p))},this))},s.prototype._keepShow=function(){var a=this._tooltipModel,l=this._ecModel,u=this._api,h=a.get("triggerOn");if(null!=this._lastX&&null!=this._lastY&&"none"!==h&&"click"!==h){var p=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!u.isDisposed()&&p.manuallyShowTip(a,l,u,{x:p._lastX,y:p._lastY,dataByCoordSys:p._lastDataByCoordSys})})}},s.prototype.manuallyShowTip=function(a,l,u,h){if(h.from!==this.uid&&!Es.Z.node&&u.getDom()){var p=o1(h,u);this._ticket="";var v=h.dataByCoordSys,m=function Cc(c,s,a){var l=(0,xn.zH)(c).queryOptionMap,u=l.keys()[0];if(u&&"series"!==u){var m,p=(0,xn.HZ)(s,u,l.get(u),{useDefault:!1,enableAll:!1,enableNone:!1}).models[0];if(p&&(a.getViewOfComponentModel(p).group.traverse(function(y){var x=(0,Tr.A)(y).tooltipConfig;if(x&&x.name===c.name)return m=y,!0}),m))return{componentMainType:u,componentIndex:p.componentIndex,el:m}}}(h,l,u);if(m){var y=m.el.getBoundingRect().clone();y.applyTransform(m.el.transform),this._tryShow({offsetX:y.x+y.width/2,offsetY:y.y+y.height/2,target:m.el,position:h.position,positionDefault:"bottom"},p)}else if(h.tooltip&&null!=h.x&&null!=h.y){var x=a1;x.x=h.x,x.y=h.y,x.update(),(0,Tr.A)(x).tooltipConfig={name:null,option:h.tooltip},this._tryShow({offsetX:h.x,offsetY:h.y,target:x},p)}else if(v)this._tryShow({offsetX:h.x,offsetY:h.y,position:h.position,dataByCoordSys:v,tooltipOption:h.tooltipOption},p);else if(null!=h.seriesIndex){if(this._manuallyAxisShowTip(a,l,u,h))return;var w=WM(h,l),D=w.point[0],I=w.point[1];null!=D&&null!=I&&this._tryShow({offsetX:D,offsetY:I,target:w.el,position:h.position,positionDefault:"bottom"},p)}else null!=h.x&&null!=h.y&&(u.dispatchAction({type:"updateAxisPointer",x:h.x,y:h.y}),this._tryShow({offsetX:h.x,offsetY:h.y,position:h.position,target:u.getZr().findHover(h.x,h.y).target},p))}},s.prototype.manuallyHideTip=function(a,l,u,h){!this._alwaysShowContent&&this._tooltipModel&&this._tooltipContent.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,h.from!==this.uid&&this._hide(o1(h,u))},s.prototype._manuallyAxisShowTip=function(a,l,u,h){var p=h.seriesIndex,v=h.dataIndex,m=l.getComponent("axisPointer").coordSysAxesInfo;if(null!=p&&null!=v&&null!=m){var y=l.getSeriesByIndex(p);if(y&&"axis"===Vd([y.getData().getItemModel(v),y,(y.coordinateSystem||{}).model],this._tooltipModel).get("trigger"))return u.dispatchAction({type:"updateAxisPointer",seriesIndex:p,dataIndex:v,position:h.position}),!0}},s.prototype._tryShow=function(a,l){var u=a.target;if(this._tooltipModel){this._lastX=a.offsetX,this._lastY=a.offsetY;var p=a.dataByCoordSys;if(p&&p.length)this._showAxisTooltip(p,a);else if(u){var v,m;this._lastDataByCoordSys=null,(0,L0.o)(u,function(y){return null!=(0,Tr.A)(y).dataIndex?(v=y,!0):null!=(0,Tr.A)(y).tooltipConfig?(m=y,!0):void 0},!0),v?this._showSeriesItemTooltip(a,v,l):m?this._showComponentItemTooltip(a,m,l):this._hide(l)}else this._lastDataByCoordSys=null,this._hide(l)}},s.prototype._showOrMove=function(a,l){var u=a.get("showDelay");l=(0,b.bind)(l,this),clearTimeout(this._showTimout),u>0?this._showTimout=setTimeout(l,u):l()},s.prototype._showAxisTooltip=function(a,l){var u=this._ecModel,h=this._tooltipModel,p=[l.offsetX,l.offsetY],v=Vd([l.tooltipOption],h),m=this._renderMode,y=[],x=(0,da.TX)("section",{blocks:[],noHeader:!0}),w=[],D=new da.iv;(0,b.each)(a,function(_e){(0,b.each)(_e.dataByAxis,function(me){var De=u.getComponent(me.axisDim+"Axis",me.axisIndex),Pe=me.value;if(De&&null!=Pe){var Ie=NL(Pe,De.axis,u,me.seriesDataIndices,me.valueLabelOpt),ke=(0,da.TX)("section",{header:Ie,noHeader:!(0,b.trim)(Ie),sortBlocks:!0,blocks:[]});x.blocks.push(ke),(0,b.each)(me.seriesDataIndices,function(Ue){var Ye=u.getSeriesByIndex(Ue.seriesIndex),Ke=Ue.dataIndexInside,Je=Ye.getDataParams(Ke);if(!(Je.dataIndex<0)){Je.axisDim=me.axisDim,Je.axisIndex=me.axisIndex,Je.axisType=me.axisType,Je.axisId=me.axisId,Je.axisValue=ki.DX(De.axis,{value:Pe}),Je.axisValueLabel=Ie,Je.marker=D.makeTooltipMarker("item",(0,Va.Lz)(Je.color),m);var ut=(0,r1.f)(Ye.formatTooltip(Ke,!0,null)),pt=ut.frag;if(pt){var yt=Vd([Ye],h).get("valueFormatter");ke.blocks.push(yt?(0,b.extend)({valueFormatter:yt},pt):pt)}ut.text&&w.push(ut.text),y.push(Je)}})}})}),x.blocks.reverse(),w.reverse();var I=l.position,L=v.get("order"),N=(0,da.BY)(x,D,m,L,u.get("useUTC"),v.get("textStyle"));N&&w.unshift(N);var se=w.join("richText"===m?"\n\n":"<br/>");this._showOrMove(v,function(){this._updateContentNotChangedOnAxis(a,y)?this._updatePosition(v,I,p[0],p[1],this._tooltipContent,y):this._showTooltipContent(v,se,y,Math.random()+"",p[0],p[1],I,null,D)})},s.prototype._showSeriesItemTooltip=function(a,l,u){var h=this._ecModel,p=(0,Tr.A)(l),v=p.seriesIndex,m=h.getSeriesByIndex(v),y=p.dataModel||m,x=p.dataIndex,w=p.dataType,D=y.getData(w),I=this._renderMode,L=a.positionDefault,N=Vd([D.getItemModel(x),y,m&&(m.coordinateSystem||{}).model],this._tooltipModel,L?{position:L}:null),Z=N.get("trigger");if(null==Z||"item"===Z){var se=y.getDataParams(x,w),_e=new da.iv;se.marker=_e.makeTooltipMarker("item",(0,Va.Lz)(se.color),I);var me=(0,r1.f)(y.formatTooltip(x,!1,w)),De=N.get("order"),Pe=N.get("valueFormatter"),Ie=me.frag,ke=Ie?(0,da.BY)(Pe?(0,b.extend)({valueFormatter:Pe},Ie):Ie,_e,I,De,h.get("useUTC"),N.get("textStyle")):me.text,Ue="item_"+y.name+"_"+x;this._showOrMove(N,function(){this._showTooltipContent(N,ke,se,Ue,a.offsetX,a.offsetY,a.position,a.target,_e)}),u({type:"showTip",dataIndexInside:x,dataIndex:D.getRawIndex(x),seriesIndex:v,from:this.uid})}},s.prototype._showComponentItemTooltip=function(a,l,u){var h=(0,Tr.A)(l),v=h.tooltipConfig.option||{};(0,b.isString)(v)&&(v={content:v,formatter:v});var y=[v],x=this._ecModel.getComponent(h.componentMainType,h.componentIndex);x&&y.push(x),y.push({formatter:v.content});var w=a.positionDefault,D=Vd(y,this._tooltipModel,w?{position:w}:null),I=D.get("content"),L=Math.random()+"",N=new da.iv;this._showOrMove(D,function(){var Z=(0,b.clone)(D.get("formatterParams")||{});this._showTooltipContent(D,I,Z,L,a.offsetX,a.offsetY,a.position,l,N)}),u({type:"showTip",from:this.uid})},s.prototype._showTooltipContent=function(a,l,u,h,p,v,m,y,x){if(this._ticket="",a.get("showContent")&&a.get("show")){var w=this._tooltipContent;w.setEnterable(a.get("enterable"));var D=a.get("formatter");m=m||a.get("position");var I=l,N=this._getNearestPoint([p,v],u,a.get("trigger"),a.get("borderColor")).color;if(D)if((0,b.isString)(D)){var Z=a.ecModel.get("useUTC"),se=(0,b.isArray)(u)?u[0]:u;I=D,se&&se.axisType&&se.axisType.indexOf("time")>=0&&(I=(0,VT.WU)(se.axisValue,I,Z)),I=(0,Va.kF)(I,u,!0)}else if((0,b.isFunction)(D)){var me=(0,b.bind)(function(De,Pe){De===this._ticket&&(w.setContent(Pe,x,a,N,m),this._updatePosition(a,m,p,v,w,u,y))},this);this._ticket=h,I=D(u,h,me)}else I=D;w.setContent(I,x,a,N,m),w.show(a,N),this._updatePosition(a,m,p,v,w,u,y)}},s.prototype._getNearestPoint=function(a,l,u,h){return"axis"===u||(0,b.isArray)(l)?{color:h||("html"===this._renderMode?"#fff":"none")}:(0,b.isArray)(l)?void 0:{color:h||l.color||l.borderColor}},s.prototype._updatePosition=function(a,l,u,h,p,v,m){var y=this._api.getWidth(),x=this._api.getHeight();l=l||a.get("position");var w=p.getSize(),D=a.get("align"),I=a.get("verticalAlign"),L=m&&m.getBoundingRect().clone();if(m&&L.applyTransform(m.transform),(0,b.isFunction)(l)&&(l=l([u,h],v,p.el,L,{viewSize:[y,x],contentSize:w.slice()})),(0,b.isArray)(l))u=(0,It.GM)(l[0],y),h=(0,It.GM)(l[1],x);else if((0,b.isObject)(l)){var N=l;N.width=w[0],N.height=w[1];var Z=(0,Br.ME)(N,{width:y,height:x});u=Z.x,h=Z.y,D=null,I=null}else if((0,b.isString)(l)&&m){var se=function fk(c,s,a,l){var u=a[0],h=a[1],p=Math.ceil(Math.SQRT2*l)+8,v=0,m=0,y=s.width,x=s.height;switch(c){case"inside":v=s.x+y/2-u/2,m=s.y+x/2-h/2;break;case"top":v=s.x+y/2-u/2,m=s.y-h-p;break;case"bottom":v=s.x+y/2-u/2,m=s.y+x+p;break;case"left":v=s.x-u-p,m=s.y+x/2-h/2;break;case"right":v=s.x+y+p,m=s.y+x/2-h/2}return[v,m]}(l,L,w,a.get("borderWidth"));u=se[0],h=se[1]}else se=function hz(c,s,a,l,u,h,p){var v=a.getSize(),m=v[0],y=v[1];return null!=h&&(c+m+h+2>l?c-=m+h:c+=h),null!=p&&(s+y+p>u?s-=y+p:s+=p),[c,s]}(u,h,p,y,x,D?null:20,I?null:20),u=se[0],h=se[1];D&&(u-=HT(D)?w[0]/2:"right"===D?w[0]:0),I&&(h-=HT(I)?w[1]/2:"bottom"===I?w[1]:0),Jx(a)&&(se=function Zo(c,s,a,l,u){var h=a.getSize(),p=h[0],v=h[1];return c=Math.min(c+p,l)-p,s=Math.min(s+v,u)-v,[c=Math.max(c,0),s=Math.max(s,0)]}(u,h,p,y,x),u=se[0],h=se[1]),p.moveTo(u,h)},s.prototype._updateContentNotChangedOnAxis=function(a,l){var u=this._lastDataByCoordSys,h=this._cbParamsList,p=!!u&&u.length===a.length;return p&&(0,b.each)(u,function(v,m){var y=v.dataByAxis||[],w=(a[m]||{}).dataByAxis||[];(p=p&&y.length===w.length)&&(0,b.each)(y,function(D,I){var L=w[I]||{},N=D.seriesDataIndices||[],Z=L.seriesDataIndices||[];(p=p&&D.value===L.value&&D.axisType===L.axisType&&D.axisId===L.axisId&&N.length===Z.length)&&(0,b.each)(N,function(se,_e){var me=Z[_e];p=p&&se.seriesIndex===me.seriesIndex&&se.dataIndex===me.dataIndex}),h&&(0,b.each)(D.seriesDataIndices,function(se){var _e=se.seriesIndex,me=l[_e],De=h[_e];me&&De&&De.data!==me.data&&(p=!1)})})}),this._lastDataByCoordSys=a,this._cbParamsList=l,!!p},s.prototype._hide=function(a){this._lastDataByCoordSys=null,a({type:"hideTip",from:this.uid})},s.prototype.dispose=function(a,l){Es.Z.node||!l.getDom()||((0,Uo.ZH)(this,"_updatePosition"),this._tooltipContent.dispose(),Mx("itemTooltip",l))},s.type="tooltip",s}(va.Z);var pz=["rect","polygon","keep","clear"];function gz(c,s){var a=(0,xn.kF)(c?c.brush:[]);if(a.length){var l=[];b.each(a,function(m){var y=m.hasOwnProperty("toolbox")?m.toolbox:[];y instanceof Array&&(l=l.concat(y))});var u=c&&c.toolbox;b.isArray(u)&&(u=u[0]),u||(c.toolbox=[u={feature:{}}]);var h=u.feature||(u.feature={}),p=h.brush||(h.brush={}),v=p.type||(p.type=[]);v.push.apply(v,l),function gk(c){var s={};b.each(c,function(a){s[a]=1}),c.length=0,b.each(s,function(a,l){c.push(l)})}(v),s&&!v.length&&v.push.apply(v,pz)}}var wc=H(5018),UT=b.each;function vk(c){if(c)for(var s in c)if(c.hasOwnProperty(s))return!0}function s1(c,s,a){var l={};return UT(s,function(h){var p=l[h]=function u(){var h=function(){};return h.prototype.__hidden=h.prototype,new h}();UT(c[h],function(v,m){if(no.isValidType(m)){var y={type:m,visual:v};a&&a(y,h),p[m]=new no(y),"opacity"===m&&((y=b.clone(y)).type="colorAlpha",p.__hidden.__alphaForOpacity=new no(y))}})}),l}function l1(c,s,a){var l;b.each(a,function(u){s.hasOwnProperty(u)&&vk(s[u])&&(l=!0)}),l&&b.each(a,function(u){s.hasOwnProperty(u)&&vk(s[u])?c[u]=b.clone(s[u]):delete c[u]})}var vs=H(1995),I_={lineX:WT(0),lineY:WT(1),rect:{point:function(c,s,a){return c&&a.boundingRect.contain(c[0],c[1])},rect:function(c,s,a){return c&&a.boundingRect.intersect(c)}},polygon:{point:function(c,s,a){return c&&a.boundingRect.contain(c[0],c[1])&&vs.X(a.range,c[0],c[1])},rect:function(c,s,a){var l=a.range;if(!c||l.length<=1)return!1;var u=c.x,h=c.y,p=c.width,v=c.height,m=l[0];return!!(vs.X(l,u,h)||vs.X(l,u+p,h)||vs.X(l,u,h+v)||vs.X(l,u+p,h+v)||yr.Z.create(c).contain(m[0],m[1])||(0,_n.linePolygonIntersect)(u,h,u+p,h,l)||(0,_n.linePolygonIntersect)(u,h,u,h+v,l)||(0,_n.linePolygonIntersect)(u+p,h,u+p,h+v,l)||(0,_n.linePolygonIntersect)(u,h+v,u+p,h+v,l))||void 0}}};function WT(c){var s=["x","y"],a=["width","height"];return{point:function(l,u,h){if(l)return rr(l[c],h.range)},rect:function(l,u,h){if(l){var p=h.range,v=[l[s[c]],l[s[c]]+l[a[c]]];return v[1]<v[0]&&v.reverse(),rr(v[0],p)||rr(v[1],p)||rr(p[0],v)||rr(p[1],v)}}}}function rr(c,s){return s[0]<=c&&c<=s[1]}var P_=["inBrush","outOfBrush"],c1="__ecBrushSelect",u1="__ecInBrushSelectEvent";function R_(c){c.eachComponent({mainType:"brush"},function(s){(s.brushTargetManager=new ig(s.option,c)).setInputRanges(s.areas,c)})}function jT(c,s,a){var u,h,l=[];c.eachComponent({mainType:"brush"},function(p){a&&"takeGlobalCursor"===a.type&&p.setBrushOption("brush"===a.key?a.brushOption:{brushType:!1})}),R_(c),c.eachComponent({mainType:"brush"},function(p,v){var m={brushId:p.id,brushIndex:v,brushName:p.name,areas:b.clone(p.areas),selected:[]};l.push(m);var y=p.option,x=y.brushLink,w=[],D=[],I=[],L=!1;v||(u=y.throttleType,h=y.throttleDelay);var N=b.map(p.areas,function(Pe){var Ie=h1[Pe.brushType],ke=b.defaults({boundingRect:Ie?Ie(Pe):void 0},Pe);return ke.selectors=function mk(c){var s=c.brushType,a={point:function(l){return I_[s].point(l,a,c)},rect:function(l){return I_[s].rect(l,a,c)}};return a}(ke),ke}),Z=s1(p.option,P_,function(Pe){Pe.mappingMethod="fixed"});function se(Pe){return"all"===x||!!w[Pe]}function _e(Pe){return!!Pe.length}b.isArray(x)&&b.each(x,function(Pe){w[Pe]=1}),c.eachSeries(function(Pe,Ie){var ke=I[Ie]=[];"parallel"===Pe.subType?function me(Pe,Ie){var ke=Pe.coordinateSystem;L=L||ke.hasAxisBrushed(),se(Ie)&&ke.eachActiveState(Pe.getData(),function(Ue,Ye){"active"===Ue&&(D[Ye]=1)})}(Pe,Ie):function De(Pe,Ie,ke){if(Pe.brushSelector&&!function L_(c,s){var a=c.option.seriesIndex;return null!=a&&"all"!==a&&(b.isArray(a)?b.indexOf(a,s)<0:s!==a)}(p,Ie)&&(b.each(N,function(Ye){p.brushTargetManager.controlSeries(Ye,Pe,c)&&ke.push(Ye),L=L||_e(ke)}),se(Ie)&&_e(ke))){var Ue=Pe.getData();Ue.each(function(Ye){d1(Pe,ke,Ue,Ye)&&(D[Ye]=1)})}}(Pe,Ie,ke)}),c.eachSeries(function(Pe,Ie){var ke={seriesId:Pe.id,seriesIndex:Ie,seriesName:Pe.name,dataIndex:[]};m.selected.push(ke);var Ue=I[Ie],Ye=Pe.getData(),Ke=se(Ie)?function(Je){return D[Je]?(ke.dataIndex.push(Ye.getRawIndex(Je)),"inBrush"):"outOfBrush"}:function(Je){return d1(Pe,Ue,Ye,Je)?(ke.dataIndex.push(Ye.getRawIndex(Je)),"inBrush"):"outOfBrush"};(se(Ie)?L:_e(Ue))&&function GT(c,s,a,l,u,h){var v,p={};function m(w){return(0,wc.Or)(a,v,w)}function y(w,D){(0,wc.LZ)(a,v,w,D)}function x(w,D){var I=a.getRawDataItem(v=null==h?w:D);if(!I||!1!==I.visualMap)for(var L=l.call(u,w),N=s[L],Z=p[L],se=0,_e=Z.length;se<_e;se++){var me=Z[se];N[me]&&N[me].applyVisual(w,m,y)}}b.each(c,function(w){var D=no.prepareVisualTypes(s[w]);p[w]=D}),null==h?a.each(x):a.each([h],x)}(P_,Z,Ye,Ke)})}),function ZT(c,s,a,l,u){if(u){var h=c.getZr();h[u1]||(h[c1]||(h[c1]=_k),Uo.T9(h,c1,a,s)(c,l))}}(s,u,h,l,a)}function _k(c,s){if(!c.isDisposed()){var a=c.getZr();a[u1]=!0,c.dispatchAction({type:"brushSelect",batch:s}),a[u1]=!1}}function d1(c,s,a,l){for(var u=0,h=s.length;u<h;u++){var p=s[u];if(c.brushSelector(l,a,p.selectors,p))return!0}}var h1={rect:function(c){return O_(c.range)},polygon:function(c){for(var s,a=c.range,l=0,u=a.length;l<u;l++){var h=a[l];h[0]<(s=s||[[1/0,-1/0],[1/0,-1/0]])[0][0]&&(s[0][0]=h[0]),h[0]>s[0][1]&&(s[0][1]=h[0]),h[1]<s[1][0]&&(s[1][0]=h[1]),h[1]>s[1][1]&&(s[1][1]=h[1])}return s&&O_(s)}};function O_(c){return new yr.Z(c[0][0],c[1][0],c[0][1]-c[0][0],c[1][1]-c[1][0])}const f1=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.init=function(a,l){this.ecModel=a,this.api=l,(this._brushController=new Fs(l.getZr())).on("brush",b.bind(this._onBrush,this)).mount()},s.prototype.render=function(a,l,u,h){this.model=a,this._updateController(a,l,u,h)},s.prototype.updateTransform=function(a,l,u,h){R_(l),this._updateController(a,l,u,h)},s.prototype.updateVisual=function(a,l,u,h){this.updateTransform(a,l,u,h)},s.prototype.updateView=function(a,l,u,h){this._updateController(a,l,u,h)},s.prototype._updateController=function(a,l,u,h){(!h||h.$from!==a.id)&&this._brushController.setPanels(a.brushTargetManager.makePanelOpts(u)).enableBrush(a.brushOption).updateCovers(a.areas.slice())},s.prototype.dispose=function(){this._brushController.dispose()},s.prototype._onBrush=function(a){var l=this.model.id,u=this.model.brushTargetManager.setOutputRanges(a.areas,this.ecModel);(!a.isEnd||a.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:l,areas:b.clone(u),$from:l}),a.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:l,areas:b.clone(u),$from:l})},s.type="brush",s}(va.Z);function k_(c,s){return b.merge({brushType:c.brushType,brushMode:c.brushMode,transformable:c.transformable,brushStyle:new ka.Z(c.brushStyle).getItemStyle(),removeOnClick:c.removeOnClick,z:c.z},s,!0)}const tu=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.areas=[],a.brushOption={},a}return(0,At.ZT)(s,c),s.prototype.optionUpdated=function(a,l){var u=this.option;!l&&l1(u,a,["inBrush","outOfBrush"]);var h=u.inBrush=u.inBrush||{};u.outOfBrush=u.outOfBrush||{color:"#ddd"},h.hasOwnProperty("liftZ")||(h.liftZ=5)},s.prototype.setAreas=function(a){!a||(this.areas=b.map(a,function(l){return k_(this.option,l)},this))},s.prototype.setBrushOption=function(a){this.brushOption=k_(this.option,a),this.brushType=this.brushOption.brushType},s.type="brush",s.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],s.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},s}(ma.Z);var bk=["rect","polygon","lineX","lineY","keep","clear"];const xk=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u){var h,p,v;l.eachComponent({mainType:"brush"},function(m){h=m.brushType,p=m.brushOption.brushMode||"single",v=v||!!m.areas.length}),this._brushType=h,this._brushMode=p,b.each(a.get("type",!0),function(m){a.setIconStatus(m,("keep"===m?"multiple"===p:"clear"===m?v:m===h)?"emphasis":"normal")})},s.prototype.updateView=function(a,l,u){this.render(a,l,u)},s.prototype.getIcons=function(){var a=this.model,l=a.get("icon",!0),u={};return b.each(a.get("type",!0),function(h){l[h]&&(u[h]=l[h])}),u},s.prototype.onclick=function(a,l,u){var h=this._brushType,p=this._brushMode;"clear"===u?(l.dispatchAction({type:"axisAreaSelect",intervals:[]}),l.dispatchAction({type:"brush",command:"clear",areas:[]})):l.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===u?h:h!==u&&u,brushMode:"keep"===u?"multiple"===p?"single":"multiple":p}})},s.getDefaultOption=function(a){return{show:!0,type:bk.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:a.getLocaleModel().get(["toolbox","brush","title"])}},s}(fl);var Ck=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.layoutMode={type:"box",ignoreSize:!0},a}return(0,At.ZT)(s,c),s.type="title",s.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},s}(ma.Z),wk=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u){if(this.group.removeAll(),a.get("show")){var h=this.group,p=a.getModel("textStyle"),v=a.getModel("subtextStyle"),m=a.get("textAlign"),y=b.retrieve2(a.get("textBaseline"),a.get("textVerticalAlign")),x=new _t.ZP({style:(0,qt.Lr)(p,{text:a.get("text"),fill:p.getTextColor()},{disableBox:!0}),z2:10}),w=x.getBoundingRect(),D=a.get("subtext"),I=new _t.ZP({style:(0,qt.Lr)(v,{text:D,fill:v.getTextColor(),y:w.height+a.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),L=a.get("link"),N=a.get("sublink"),Z=a.get("triggerEvent",!0);x.silent=!L&&!Z,I.silent=!N&&!Z,L&&x.on("click",function(){(0,Va.MI)(L,"_"+a.get("target"))}),N&&I.on("click",function(){(0,Va.MI)(N,"_"+a.get("subtarget"))}),(0,Tr.A)(x).eventData=(0,Tr.A)(I).eventData=Z?{componentType:"title",componentIndex:a.componentIndex}:null,h.add(x),D&&h.add(I);var se=h.getBoundingRect(),_e=a.getBoxLayoutParams();_e.width=se.width,_e.height=se.height;var me=(0,Br.ME)(_e,{width:u.getWidth(),height:u.getHeight()},a.get("padding"));m||("middle"===(m=a.get("left")||a.get("right"))&&(m="center"),"right"===m?me.x+=me.width:"center"===m&&(me.x+=me.width/2)),y||("center"===(y=a.get("top")||a.get("bottom"))&&(y="middle"),"bottom"===y?me.y+=me.height:"middle"===y&&(me.y+=me.height/2),y=y||"top"),h.x=me.x,h.y=me.y,h.markRedraw();var De={align:m,verticalAlign:y};x.setStyle(De),I.setStyle(De),se=h.getBoundingRect();var Pe=me.margin,Ie=a.getItemStyle(["color","opacity"]);Ie.fill=a.get("backgroundColor");var ke=new Mi.Z({shape:{x:se.x-Pe[3],y:se.y-Pe[0],width:se.width+Pe[1]+Pe[3],height:se.height+Pe[0]+Pe[2],r:a.get("borderRadius")},style:Ie,subPixelOptimize:!0,silent:!0});h.add(ke)}},s.type="title",s}(va.Z);const p1=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.layoutMode="box",a}return(0,At.ZT)(s,c),s.prototype.init=function(a,l,u){this.mergeDefaultAndTheme(a,u),this._initData()},s.prototype.mergeOption=function(a){c.prototype.mergeOption.apply(this,arguments),this._initData()},s.prototype.setCurrentIndex=function(a){null==a&&(a=this.option.currentIndex);var l=this._data.count();this.option.loop?a=(a%l+l)%l:(a>=l&&(a=l-1),a<0&&(a=0)),this.option.currentIndex=a},s.prototype.getCurrentIndex=function(){return this.option.currentIndex},s.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},s.prototype.setPlayState=function(a){this.option.autoPlay=!!a},s.prototype.getPlayState=function(){return!!this.option.autoPlay},s.prototype._initData=function(){var p,a=this.option,l=a.data||[],u=a.axisType,h=this._names=[];"category"===u?(p=[],(0,b.each)(l,function(y,x){var D,w=(0,xn.U5)((0,xn.C4)(y),"");(0,b.isObject)(y)?(D=(0,b.clone)(y)).value=x:D=x,p.push(D),h.push(w)})):p=l,(this._data=new xt.Z([{name:"value",type:{category:"ordinal",time:"time",value:"number"}[u]||"number"}],this)).initData(p,h)},s.prototype.getData=function(){return this._data},s.prototype.getCategories=function(){if("category"===this.get("axisType"))return this._names.slice()},s.type="timeline",s.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},s}(ma.Z);var KT=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.type="timeline.slider",s.defaultOption=(0,Zn.ZL)(p1.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),s}(p1);(0,b.mixin)(KT,r1.X.prototype);const QT=KT,g1=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.type="timeline",s}(va.Z),JT=function(c){function s(a,l,u,h){var p=c.call(this,a,l,u)||this;return p.type=h||"value",p}return(0,At.ZT)(s,c),s.prototype.getLabelModel=function(){return this.model.getModel("label")},s.prototype.isHorizontal=function(){return"horizontal"===this.model.get("orient")},s}(fo.Z);var eE=H(3156),tE=H(9020),N_=Math.PI,zd=(0,xn.Yf)();function v1(c,s,a,l,u,h){var p=s.get("color");if(u)u.setColor(p),a.add(u),h&&h.onUpdate(u);else{var v=c.get("symbol");(u=(0,si.th)(v,-1,-1,2,2,p)).setStyle("strokeNoScale",!0),a.add(u),h&&h.onCreate(u)}var m=s.getItemStyle(["color"]);u.setStyle(m),l=(0,b.merge)({rectHover:!0,z2:100},l,!0);var y=(0,si.zp)(c.get("symbolSize"));l.scaleX=y[0]/2,l.scaleY=y[1]/2;var x=(0,si.Cq)(c.get("symbolOffset"),y);x&&(l.x=(l.x||0)+x[0],l.y=(l.y||0)+x[1]);var w=c.get("symbolRotate");return l.rotation=(w||0)*Math.PI/180||0,u.attr(l),u.updateTransform(),u}function Dk(c,s,a,l,u,h){if(!c.dragging){var p=u.getModel("checkpointStyle"),v=l.dataToCoord(u.getData().get("value",a));if(h||!p.get("animation",!0))c.attr({x:v,y:0}),s&&s.attr({shape:{x2:v}});else{var m={duration:p.get("animationDuration",!0),easing:p.get("animationEasing",!0)};c.stopAnimation(null,!0),c.animateTo({x:v,y:0},m),s&&s.animateTo({shape:{x2:v}},m)}}}const Mk=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.init=function(a,l){this.api=l},s.prototype.render=function(a,l,u){if(this.model=a,this.api=u,this.ecModel=l,this.group.removeAll(),a.get("show",!0)){var h=this._layout(a,u),p=this._createGroup("_mainGroup"),v=this._createGroup("_labelGroup"),m=this._axis=this._createAxis(h,a);a.formatTooltip=function(y){var x=m.scale.getLabel({value:y});return(0,da.TX)("nameValue",{noName:!0,value:x})},(0,b.each)(["AxisLine","AxisTick","Control","CurrentPointer"],function(y){this["_render"+y](h,p,m,a)},this),this._renderAxisLabel(h,v,m,a),this._position(h,a)}this._doPlayStop(),this._updateTicksStatus()},s.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},s.prototype.dispose=function(){this._clearTimer()},s.prototype._layout=function(a,l){var v,u=a.get(["label","position"]),h=a.get("orient"),p=function Sk(c,s){return Br.ME(c.getBoxLayoutParams(),{width:s.getWidth(),height:s.getHeight()},c.get("padding"))}(a,l),m={horizontal:"center",vertical:(v=null==u||"auto"===u?"horizontal"===h?p.y+p.height/2<l.getHeight()/2?"-":"+":p.x+p.width/2<l.getWidth()/2?"+":"-":(0,b.isString)(u)?{horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[h][u]:u)>=0||"+"===v?"left":"right"},y={horizontal:v>=0||"+"===v?"top":"bottom",vertical:"middle"},x={horizontal:0,vertical:N_/2},w="vertical"===h?p.height:p.width,D=a.getModel("controlStyle"),I=D.get("show",!0),L=I?D.get("itemSize"):0,N=I?D.get("itemGap"):0,Z=L+N,se=a.get(["label","rotate"])||0;se=se*N_/180;var _e,me,De,Pe=D.get("position",!0),Ie=I&&D.get("showPlayBtn",!0),ke=I&&D.get("showPrevBtn",!0),Ue=I&&D.get("showNextBtn",!0),Ye=0,Ke=w;"left"===Pe||"bottom"===Pe?(Ie&&(_e=[0,0],Ye+=Z),ke&&(me=[Ye,0],Ye+=Z),Ue&&(De=[Ke-L,0],Ke-=Z)):(Ie&&(_e=[Ke-L,0],Ke-=Z),ke&&(me=[0,0],Ye+=Z),Ue&&(De=[Ke-L,0],Ke-=Z));var Je=[Ye,Ke];return a.get("inverse")&&Je.reverse(),{viewRect:p,mainLength:w,orient:h,rotation:x[h],labelRotation:se,labelPosOpt:v,labelAlign:a.get(["label","align"])||m[h],labelBaseline:a.get(["label","verticalAlign"])||a.get(["label","baseline"])||y[h],playPosition:_e,prevBtnPosition:me,nextBtnPosition:De,axisExtent:Je,controlSize:L,controlGap:N}},s.prototype._position=function(a,l){var u=this._mainGroup,h=this._labelGroup,p=a.viewRect;if("vertical"===a.orient){var v=xi.create(),m=p.x,y=p.y+p.height;xi.translate(v,v,[-m,-y]),xi.rotate(v,v,-N_/2),xi.translate(v,v,[m,y]),(p=p.clone()).applyTransform(v)}var x=_e(p),w=_e(u.getBoundingRect()),D=_e(h.getBoundingRect()),I=[u.x,u.y],L=[h.x,h.y];L[0]=I[0]=x[0][0];var Z,N=a.labelPosOpt;function se(De){De.originX=x[0][0]-De.x,De.originY=x[1][0]-De.y}function _e(De){return[[De.x,De.x+De.width],[De.y,De.y+De.height]]}function me(De,Pe,Ie,ke,Ue){De[ke]+=Ie[ke][Ue]-Pe[ke][Ue]}null==N||(0,b.isString)(N)?(me(I,w,x,1,Z="+"===N?0:1),me(L,D,x,1,1-Z)):(me(I,w,x,1,Z=N>=0?0:1),L[1]=I[1]+N),u.setPosition(I),h.setPosition(L),u.rotation=h.rotation=a.rotation,se(u),se(h)},s.prototype._createAxis=function(a,l){var u=l.getData(),h=l.get("axisType"),p=function nE(c,s){if(s=s||c.get("type"))switch(s){case"category":return new eE.Z({ordinalMeta:c.getCategories(),extent:[1/0,-1/0]});case"time":return new tE.Z({locale:c.ecModel.getLocaleModel(),useUTC:c.ecModel.get("useUTC")});default:return new Dv.Z}}(l,h);p.getTicks=function(){return u.mapArray(["value"],function(y){return{value:y}})};var v=u.getDataExtent("value");p.setExtent(v[0],v[1]),p.calcNiceTicks();var m=new JT("value",p,a.axisExtent,h);return m.model=l,m},s.prototype._createGroup=function(a){var l=this[a]=new Rn.Z;return this.group.add(l),l},s.prototype._renderAxisLine=function(a,l,u,h){var p=u.getExtent();if(h.get(["lineStyle","show"])){var v=new Ai.Z({shape:{x1:p[0],y1:0,x2:p[1],y2:0},style:(0,b.extend)({lineCap:"round"},h.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});l.add(v);var m=this._progressLine=new Ai.Z({shape:{x1:p[0],x2:this._currentPointer?this._currentPointer.x:p[0],y1:0,y2:0},style:(0,b.defaults)({lineCap:"round",lineWidth:v.style.lineWidth},h.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});l.add(m)}},s.prototype._renderAxisTick=function(a,l,u,h){var p=this,v=h.getData(),m=u.scale.getTicks();this._tickSymbols=[],(0,b.each)(m,function(y){var x=u.dataToCoord(y.value),w=v.getItemModel(y.value),D=w.getModel("itemStyle"),I=w.getModel(["emphasis","itemStyle"]),L=w.getModel(["progress","itemStyle"]),N={x,y:0,onclick:(0,b.bind)(p._changeTimeline,p,y.value)},Z=v1(w,D,l,N);Z.ensureState("emphasis").style=I.getItemStyle(),Z.ensureState("progress").style=L.getItemStyle(),(0,Wt.vF)(Z);var se=(0,Tr.A)(Z);w.get("tooltip")?(se.dataIndex=y.value,se.dataModel=h):se.dataIndex=se.dataModel=null,p._tickSymbols.push(Z)})},s.prototype._renderAxisLabel=function(a,l,u,h){var p=this;if(u.getLabelModel().get("show")){var m=h.getData(),y=u.getViewLabels();this._tickLabels=[],(0,b.each)(y,function(x){var w=x.tickValue,D=m.getItemModel(w),I=D.getModel("label"),L=D.getModel(["emphasis","label"]),N=D.getModel(["progress","label"]),Z=u.dataToCoord(x.tickValue),se=new _t.ZP({x:Z,y:0,rotation:a.labelRotation-a.rotation,onclick:(0,b.bind)(p._changeTimeline,p,w),silent:!1,style:(0,qt.Lr)(I,{text:x.formattedLabel,align:a.labelAlign,verticalAlign:a.labelBaseline})});se.ensureState("emphasis").style=(0,qt.Lr)(L),se.ensureState("progress").style=(0,qt.Lr)(N),l.add(se),(0,Wt.vF)(se),zd(se).dataIndex=w,p._tickLabels.push(se)})}},s.prototype._renderControl=function(a,l,u,h){var p=a.controlSize,v=a.rotation,m=h.getModel("controlStyle").getItemStyle(),y=h.getModel(["emphasis","controlStyle"]).getItemStyle(),x=h.getPlayState(),w=h.get("inverse",!0);function D(I,L,N,Z){if(I){var se=(0,Ce.GM)((0,b.retrieve2)(h.get(["controlStyle",L+"BtnSize"]),p),p),me=function rE(c,s,a,l){var u=l.style,h=_n.createIcon(c.get(["controlStyle",s]),l||{},new yr.Z(a[0],a[1],a[2],a[3]));return u&&h.setStyle(u),h}(h,L+"Icon",[0,-se/2,se,se],{x:I[0],y:I[1],originX:p/2,originY:0,rotation:Z?-v:0,rectHover:!0,style:m,onclick:N});me.ensureState("emphasis").style=y,l.add(me),(0,Wt.vF)(me)}}D(a.nextBtnPosition,"next",(0,b.bind)(this._changeTimeline,this,w?"-":"+")),D(a.prevBtnPosition,"prev",(0,b.bind)(this._changeTimeline,this,w?"+":"-")),D(a.playPosition,x?"stop":"play",(0,b.bind)(this._handlePlayClick,this,!x),!0)},s.prototype._renderCurrentPointer=function(a,l,u,h){var p=h.getData(),v=h.getCurrentIndex(),m=p.getItemModel(v).getModel("checkpointStyle"),y=this;this._currentPointer=v1(m,m,this._mainGroup,{},this._currentPointer,{onCreate:function(w){w.draggable=!0,w.drift=(0,b.bind)(y._handlePointerDrag,y),w.ondragend=(0,b.bind)(y._handlePointerDragend,y),Dk(w,y._progressLine,v,u,h,!0)},onUpdate:function(w){Dk(w,y._progressLine,v,u,h)}})},s.prototype._handlePlayClick=function(a){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:a,from:this.uid})},s.prototype._handlePointerDrag=function(a,l,u){this._clearTimer(),this._pointerChangeTimeline([u.offsetX,u.offsetY])},s.prototype._handlePointerDragend=function(a){this._pointerChangeTimeline([a.offsetX,a.offsetY],!0)},s.prototype._pointerChangeTimeline=function(a,l){var u=this._toAxisCoord(a)[0],p=It.dt(this._axis.getExtent().slice());u>p[1]&&(u=p[1]),u<p[0]&&(u=p[0]),this._currentPointer.x=u,this._currentPointer.markRedraw(),this._progressLine.shape.x2=u,this._progressLine.dirty();var v=this._findNearestTick(u),m=this.model;(l||v!==m.getCurrentIndex()&&m.get("realtime"))&&this._changeTimeline(v)},s.prototype._doPlayStop=function(){var a=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var l=a.model;a._changeTimeline(l.getCurrentIndex()+(l.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},s.prototype._toAxisCoord=function(a){var l=this._mainGroup.getLocalTransform();return _n.applyTransform(a,l,!0)},s.prototype._findNearestTick=function(a){var h,l=this.model.getData(),u=1/0,p=this._axis;return l.each(["value"],function(v,m){var y=p.dataToCoord(v),x=Math.abs(y-a);x<u&&(u=x,h=m)}),h},s.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},s.prototype._changeTimeline=function(a){var l=this.model.getCurrentIndex();"+"===a?a=l+1:"-"===a&&(a=l-1),this.api.dispatchAction({type:"timelineChange",currentIndex:a,from:this.uid})},s.prototype._updateTicksStatus=function(){var a=this.model.getCurrentIndex(),l=this._tickSymbols,u=this._tickLabels;if(l)for(var h=0;h<l.length;h++)l&&l[h]&&l[h].toggleState("progress",h<a);if(u)for(h=0;h<u.length;h++)u&&u[h]&&u[h].toggleState("progress",zd(u[h]).dataIndex<=a)},s.type="timeline.slider",s}(g1);function Cz(c){var s=c&&c.timeline;b.isArray(s)||(s=s?[s]:[]),b.each(s,function(a){!a||function iE(c){var s=c.type,a={number:"value",time:"time"};if(a[s]&&(c.axisType=a[s],delete c.type),Wi(c),Hd(c,"controlPosition")){var l=c.controlStyle||(c.controlStyle={});Hd(l,"position")||(l.position=c.controlPosition),"none"===l.position&&!Hd(l,"show")&&(l.show=!1,delete l.position),delete c.controlPosition}b.each(c.data||[],function(u){b.isObject(u)&&!b.isArray(u)&&(!Hd(u,"value")&&Hd(u,"name")&&(u.value=u.name),Wi(u))})}(a)})}function Wi(c){var s=c.itemStyle||(c.itemStyle={}),a=s.emphasis||(s.emphasis={}),l=c.label||c.label||{},u=l.normal||(l.normal={}),h={normal:1,emphasis:1};b.each(l,function(p,v){!h[v]&&!Hd(u,v)&&(u[v]=p)}),a.label&&!Hd(l,"emphasis")&&(l.emphasis=a.label,delete a.label)}function Hd(c,s){return c.hasOwnProperty(s)}function aE(c,s){if(!c)return!1;for(var a=(0,b.isArray)(c)?c:[c],l=0;l<a.length;l++)if(a[l]&&a[l][s])return!0;return!1}function m1(c){(0,xn.Cc)(c,"label",["show"])}var _1=(0,xn.Yf)(),Ek=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.createdBySelf=!1,a}return(0,At.ZT)(s,c),s.prototype.init=function(a,l,u){this.mergeDefaultAndTheme(a,u),this._mergeOption(a,u,!1,!0)},s.prototype.isAnimationEnabled=function(){if(Es.Z.node)return!1;var a=this.__hostSeries;return this.getShallow("animation")&&a&&a.isAnimationEnabled()},s.prototype.mergeOption=function(a,l){this._mergeOption(a,l,!1,!1)},s.prototype._mergeOption=function(a,l,u,h){var p=this.mainType;u||l.eachSeries(function(v){var m=v.get(this.mainType,!0),y=_1(v)[p];m&&m.data?(y?y._mergeOption(m,l,!0):(h&&m1(m),b.each(m.data,function(x){x instanceof Array?(m1(x[0]),m1(x[1])):m1(x)}),y=this.createMarkerModelFromSeries(m,this,l),b.extend(y,{mainType:this.mainType,seriesIndex:v.seriesIndex,name:v.name,createdBySelf:!0}),y.__hostSeries=v),_1(v)[p]=y):_1(v)[p]=null},this)},s.prototype.formatTooltip=function(a,l,u){var h=this.getData(),p=this.getRawValue(a),v=h.getName(a);return(0,da.TX)("section",{header:this.name,blocks:[(0,da.TX)("nameValue",{name:v,value:p,noName:!v,noValue:null==p})]})},s.prototype.getData=function(){return this._data},s.prototype.setData=function(a){this._data=a},s.getMarkerModelFromSeries=function(a,l){return _1(a)[l]},s.type="marker",s.dependencies=["series","grid","polar","geo"],s}(ma.Z);b.mixin(Ek,r1.X.prototype);const Ud=Ek,B_=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.createMarkerModelFromSeries=function(a,l,u){return new s(a,l,u)},s.type="markPoint",s.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},s}(Ud);var Wu=H(4066);function y1(c){return!(isNaN(parseFloat(c.x))&&isNaN(parseFloat(c.y)))}function Sc(c,s,a,l,u,h){var p=[],m=(0,Jl.M)(s,l)?s.getCalculationInfo("stackResultDimension"):l,y=sE(s,m,c),x=s.indicesOfNearest(m,y)[0];p[u]=s.get(a,x),p[h]=s.get(m,x);var w=s.get(l,x),D=It.p8(s.get(l,x));return(D=Math.min(D,20))>=0&&(p[h]=+p[h].toFixed(D)),[p,w]}var V_={min:(0,b.curry)(Sc,"min"),max:(0,b.curry)(Sc,"max"),average:(0,b.curry)(Sc,"average"),median:(0,b.curry)(Sc,"median")};function Gd(c,s){var a=c.getData(),l=c.coordinateSystem;if(s&&!function oE(c){return!isNaN(parseFloat(c.x))&&!isNaN(parseFloat(c.y))}(s)&&!(0,b.isArray)(s.coord)&&l){var u=l.dimensions,h=z_(s,a,l,c);if((s=(0,b.clone)(s)).type&&V_[s.type]&&h.baseAxis&&h.valueAxis){var p=(0,b.indexOf)(u,h.baseAxis.dim),v=(0,b.indexOf)(u,h.valueAxis.dim),m=V_[s.type](a,h.baseDataDim,h.valueDataDim,p,v);s.coord=m[0],s.value=m[1]}else{for(var y=[null!=s.xAxis?s.xAxis:s.radiusAxis,null!=s.yAxis?s.yAxis:s.angleAxis],x=0;x<2;x++)V_[y[x]]&&(y[x]=sE(a,a.mapDimension(u[x]),y[x]));s.coord=y}}return s}function z_(c,s,a,l){var u={};return null!=c.valueIndex||null!=c.valueDim?(u.valueDataDim=null!=c.valueIndex?s.getDimension(c.valueIndex):c.valueDim,u.valueAxis=a.getAxis(function Ik(c,s){var a=c.getData().getDimensionInfo(s);return a&&a.coordDim}(l,u.valueDataDim)),u.baseAxis=a.getOtherAxis(u.valueAxis),u.baseDataDim=s.mapDimension(u.baseAxis.dim)):(u.baseAxis=l.getBaseAxis(),u.valueAxis=a.getOtherAxis(u.baseAxis),u.baseDataDim=s.mapDimension(u.baseAxis.dim),u.valueDataDim=s.mapDimension(u.valueAxis.dim)),u}function Wd(c,s){return!(c&&c.containData&&s.coord&&!y1(s))||c.containData(s.coord)}function lg(c,s){return c?function(a,l,u,h){return(0,Wu.yQ)(h<2?a.coord&&a.coord[h]:a.value,s[h])}:function(a,l,u,h){return(0,Wu.yQ)(a.value,s[h])}}function sE(c,s,a){if("average"===a){var l=0,u=0;return c.each(s,function(h,p){isNaN(h)||(l+=h,u++)}),l/u}return"median"===a?c.getMedian(s):c.getDataExtent(s)["max"===a?1:0]}var lE=(0,xn.Yf)();const cE=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.init=function(){this.markerGroupMap=(0,b.createHashMap)()},s.prototype.render=function(a,l,u){var h=this,p=this.markerGroupMap;p.each(function(v){lE(v).keep=!1}),l.eachSeries(function(v){var m=Ud.getMarkerModelFromSeries(v,h.type);m&&h.renderSeries(v,m,l,u)}),p.each(function(v){!lE(v).keep&&h.group.remove(v.group)})},s.prototype.markKeep=function(a){lE(a).keep=!0},s.prototype.toggleBlurSeries=function(a,l){var u=this;(0,b.each)(a,function(h){var p=Ud.getMarkerModelFromSeries(h,u.type);p&&p.getData().eachItemGraphicEl(function(m){m&&(l?(0,Wt.SX)(m):(0,Wt.VP)(m))})})},s.type="marker",s}(va.Z);function x1(c,s,a){var l=s.coordinateSystem;c.each(function(u){var p,h=c.getItemModel(u),v=It.GM(h.get("x"),a.getWidth()),m=It.GM(h.get("y"),a.getHeight());if(isNaN(v)||isNaN(m)){if(s.getMarkerPosition)p=s.getMarkerPosition(c.getValues(c.dimensions,u));else if(l){var y=c.get(l.dimensions[0],u),x=c.get(l.dimensions[1],u);p=l.dataToPoint([y,x])}}else p=[v,m];isNaN(v)||(p[0]=v),isNaN(m)||(p[1]=m),c.setItemLayout(u,p)})}const Lk=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.updateTransform=function(a,l,u){l.eachSeries(function(h){var p=Ud.getMarkerModelFromSeries(h,"markPoint");p&&(x1(p.getData(),h,u),this.markerGroupMap.get(h.id).updateLayout())},this)},s.prototype.renderSeries=function(a,l,u,h){var p=a.coordinateSystem,v=a.id,m=a.getData(),y=this.markerGroupMap,x=y.get(v)||y.set(v,new od),w=function Rk(c,s,a){var l;l=c?(0,b.map)(c&&c.dimensions,function(v){var m=s.getData().getDimensionInfo(s.getData().mapDimension(v))||{};return(0,b.extend)((0,b.extend)({},m),{name:v,ordinalMeta:null})}):[{name:"value",type:"float"}];var u=new xt.Z(l,a),h=(0,b.map)(a.get("data"),(0,b.curry)(Gd,s));c&&(h=(0,b.filter)(h,(0,b.curry)(Wd,c)));var p=lg(!!c,l);return u.initData(h,null,p),u}(p,a,l);l.setData(w),x1(l.getData(),a,h),w.each(function(D){var I=w.getItemModel(D),L=I.getShallow("symbol"),N=I.getShallow("symbolSize"),Z=I.getShallow("symbolRotate"),se=I.getShallow("symbolOffset"),_e=I.getShallow("symbolKeepAspect");if((0,b.isFunction)(L)||(0,b.isFunction)(N)||(0,b.isFunction)(Z)||(0,b.isFunction)(se)){var me=l.getRawValue(D),De=l.getDataParams(D);(0,b.isFunction)(L)&&(L=L(me,De)),(0,b.isFunction)(N)&&(N=N(me,De)),(0,b.isFunction)(Z)&&(Z=Z(me,De)),(0,b.isFunction)(se)&&(se=se(me,De))}var Pe=I.getModel("itemStyle").getItemStyle(),Ie=(0,wc.UL)(m,"color");Pe.fill||(Pe.fill=Ie),w.setItemVisual(D,{symbol:L,symbolSize:N,symbolRotate:Z,symbolOffset:se,symbolKeepAspect:_e,style:Pe})}),x.updateData(w),this.group.add(x.group),w.eachItemGraphicEl(function(D){D.traverse(function(I){(0,Tr.A)(I).dataModel=l})}),this.markKeep(x),x.group.silent=l.get("silent")||a.get("silent")},s.type="markPoint",s}(cE),dE=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.createMarkerModelFromSeries=function(a,l,u){return new s(a,l,u)},s.type="markLine",s.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},s}(Ud);var cg=(0,xn.Yf)(),kk=function(c,s,a,l){var h,u=c.getData();if((0,b.isArray)(l))h=l;else{var p=l.type;if("min"===p||"max"===p||"average"===p||"median"===p||null!=l.xAxis||null!=l.yAxis){var v=void 0,m=void 0;if(null!=l.yAxis||null!=l.xAxis)v=s.getAxis(null!=l.yAxis?"y":"x"),m=(0,b.retrieve)(l.yAxis,l.xAxis);else{var y=z_(l,u,s,c);v=y.valueAxis,m=sE(u,(0,Jl.IR)(u,y.valueDataDim),p)}var w="x"===v.dim?0:1,D=1-w,I=(0,b.clone)(l),L={coord:[]};I.type=null,I.coord=[],I.coord[D]=-1/0,L.coord[D]=1/0;var N=a.get("precision");N>=0&&(0,b.isNumber)(m)&&(m=+m.toFixed(Math.min(N,20))),I.coord[w]=L.coord[w]=m,h=[I,L,{type:p,valueIndex:l.valueIndex,value:m}]}else h=[]}var Z=[Gd(c,h[0]),Gd(c,h[1]),(0,b.extend)({},h[2])];return Z[2].type=Z[2].type||null,(0,b.merge)(Z[2],Z[0]),(0,b.merge)(Z[2],Z[1]),Z};function H_(c){return!isNaN(c)&&!isFinite(c)}function C1(c,s,a,l){var u=1-c,h=l.dimensions[c];return H_(s[u])&&H_(a[u])&&s[c]===a[c]&&l.getAxis(h).containData(s[c])}function U_(c,s){if("cartesian2d"===c.type){var a=s[0].coord,l=s[1].coord;if(a&&l&&(C1(1,a,l,c)||C1(0,a,l,c)))return!0}return Wd(c,s[0])&&Wd(c,s[1])}function hE(c,s,a,l,u){var v,h=l.coordinateSystem,p=c.getItemModel(s),m=It.GM(p.get("x"),u.getWidth()),y=It.GM(p.get("y"),u.getHeight());if(isNaN(m)||isNaN(y)){if(l.getMarkerPosition)v=l.getMarkerPosition(c.getValues(c.dimensions,s));else{var w=c.get((x=h.dimensions)[0],s),D=c.get(x[1],s);v=h.dataToPoint([w,D])}if(Rs(h,"cartesian2d")){var x,I=h.getAxis("x"),L=h.getAxis("y");H_(c.get((x=h.dimensions)[0],s))?v[0]=I.toGlobalCoord(I.getExtent()[a?0:1]):H_(c.get(x[1],s))&&(v[1]=L.toGlobalCoord(L.getExtent()[a?0:1]))}isNaN(m)||(v[0]=m),isNaN(y)||(v[1]=y)}else v=[m,y];c.setItemLayout(s,v)}const Nk=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.updateTransform=function(a,l,u){l.eachSeries(function(h){var p=Ud.getMarkerModelFromSeries(h,"markLine");if(p){var v=p.getData(),m=cg(p).from,y=cg(p).to;m.each(function(x){hE(m,x,!0,h,u),hE(y,x,!1,h,u)}),v.each(function(x){v.setItemLayout(x,[m.getItemLayout(x),y.getItemLayout(x)])}),this.markerGroupMap.get(h.id).updateLayout()}},this)},s.prototype.renderSeries=function(a,l,u,h){var p=a.coordinateSystem,v=a.id,m=a.getData(),y=this.markerGroupMap,x=y.get(v)||y.set(v,new cb);this.group.add(x.group);var w=function ug(c,s,a){var l;l=c?(0,b.map)(c&&c.dimensions,function(y){var x=s.getData().getDimensionInfo(s.getData().mapDimension(y))||{};return(0,b.extend)((0,b.extend)({},x),{name:y,ordinalMeta:null})}):[{name:"value",type:"float"}];var u=new xt.Z(l,a),h=new xt.Z(l,a),p=new xt.Z([],a),v=(0,b.map)(a.get("data"),(0,b.curry)(kk,s,c,a));c&&(v=(0,b.filter)(v,(0,b.curry)(U_,c)));var m=lg(!!c,l);return u.initData((0,b.map)(v,function(y){return y[0]}),null,m),h.initData((0,b.map)(v,function(y){return y[1]}),null,m),p.initData((0,b.map)(v,function(y){return y[2]})),p.hasItemOption=!0,{from:u,to:h,line:p}}(p,a,l),D=w.from,I=w.to,L=w.line;cg(l).from=D,cg(l).to=I,l.setData(L);var N=l.get("symbol"),Z=l.get("symbolSize"),se=l.get("symbolRotate"),_e=l.get("symbolOffset");function me(De,Pe,Ie){var ke=De.getItemModel(Pe);hE(De,Pe,Ie,a,h);var Ue=ke.getModel("itemStyle").getItemStyle();null==Ue.fill&&(Ue.fill=(0,wc.UL)(m,"color")),De.setItemVisual(Pe,{symbolKeepAspect:ke.get("symbolKeepAspect"),symbolOffset:(0,b.retrieve2)(ke.get("symbolOffset",!0),_e[Ie?0:1]),symbolRotate:(0,b.retrieve2)(ke.get("symbolRotate",!0),se[Ie?0:1]),symbolSize:(0,b.retrieve2)(ke.get("symbolSize"),Z[Ie?0:1]),symbol:(0,b.retrieve2)(ke.get("symbol",!0),N[Ie?0:1]),style:Ue})}(0,b.isArray)(N)||(N=[N,N]),(0,b.isArray)(Z)||(Z=[Z,Z]),(0,b.isArray)(se)||(se=[se,se]),(0,b.isArray)(_e)||(_e=[_e,_e]),w.from.each(function(De){me(D,De,!0),me(I,De,!1)}),L.each(function(De){var Pe=L.getItemModel(De).getModel("lineStyle").getLineStyle();L.setItemLayout(De,[D.getItemLayout(De),I.getItemLayout(De)]),null==Pe.stroke&&(Pe.stroke=D.getItemVisual(De,"style").fill),L.setItemVisual(De,{fromSymbolKeepAspect:D.getItemVisual(De,"symbolKeepAspect"),fromSymbolOffset:D.getItemVisual(De,"symbolOffset"),fromSymbolRotate:D.getItemVisual(De,"symbolRotate"),fromSymbolSize:D.getItemVisual(De,"symbolSize"),fromSymbol:D.getItemVisual(De,"symbol"),toSymbolKeepAspect:I.getItemVisual(De,"symbolKeepAspect"),toSymbolOffset:I.getItemVisual(De,"symbolOffset"),toSymbolRotate:I.getItemVisual(De,"symbolRotate"),toSymbolSize:I.getItemVisual(De,"symbolSize"),toSymbol:I.getItemVisual(De,"symbol"),style:Pe})}),x.updateData(L),w.line.eachItemGraphicEl(function(De){(0,Tr.A)(De).dataModel=l,De.traverse(function(Pe){(0,Tr.A)(Pe).dataModel=l})}),this.markKeep(x),x.group.silent=l.get("silent")||a.get("silent")},s.type="markLine",s}(cE),Dz=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.createMarkerModelFromSeries=function(a,l,u){return new s(a,l,u)},s.type="markArea",s.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},s}(Ud);var G_=(0,xn.Yf)(),Bk=function(c,s,a,l){var u=Gd(c,l[0]),h=Gd(c,l[1]),p=u.coord,v=h.coord;p[0]=(0,b.retrieve)(p[0],-1/0),p[1]=(0,b.retrieve)(p[1],-1/0),v[0]=(0,b.retrieve)(v[0],1/0),v[1]=(0,b.retrieve)(v[1],1/0);var m=(0,b.mergeAll)([{},u,h]);return m.coord=[u.coord,h.coord],m.x0=u.x,m.y0=u.y,m.x1=h.x,m.y1=h.y,m};function pl(c){return!isNaN(c)&&!isFinite(c)}function Vk(c,s,a,l){var u=1-c;return pl(s[u])&&pl(a[u])}function Mz(c,s){var a=s.coord[0],l=s.coord[1],u={coord:a,x:s.x0,y:s.y0},h={coord:l,x:s.x1,y:s.y1};return Rs(c,"cartesian2d")?!(!a||!l||!Vk(1,a,l)&&!Vk(0,a,l))||function b1(c,s,a){return!(c&&c.containZone&&s.coord&&a.coord&&!y1(s)&&!y1(a))||c.containZone(s.coord,a.coord)}(c,u,h):Wd(c,u)||Wd(c,h)}function zk(c,s,a,l,u){var v,h=l.coordinateSystem,p=c.getItemModel(s),m=It.GM(p.get(a[0]),u.getWidth()),y=It.GM(p.get(a[1]),u.getHeight());if(isNaN(m)||isNaN(y)){if(l.getMarkerPosition)v=l.getMarkerPosition(c.getValues(a,s));else{var D=[x=c.get(a[0],s),w=c.get(a[1],s)];h.clampData&&h.clampData(D,D),v=h.dataToPoint(D,!0)}if(Rs(h,"cartesian2d")){var I=h.getAxis("x"),L=h.getAxis("y"),x=c.get(a[0],s),w=c.get(a[1],s);pl(x)?v[0]=I.toGlobalCoord(I.getExtent()["x0"===a[0]?0:1]):pl(w)&&(v[1]=L.toGlobalCoord(L.getExtent()["y0"===a[1]?0:1]))}isNaN(m)||(v[0]=m),isNaN(y)||(v[1]=y)}else v=[m,y];return v}var Hk=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];const Ez=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.updateTransform=function(a,l,u){l.eachSeries(function(h){var p=Ud.getMarkerModelFromSeries(h,"markArea");if(p){var v=p.getData();v.each(function(m){var y=(0,b.map)(Hk,function(w){return zk(v,m,w,h,u)});v.setItemLayout(m,y),v.getItemGraphicEl(m).setShape("points",y)})}},this)},s.prototype.renderSeries=function(a,l,u,h){var p=a.coordinateSystem,v=a.id,m=a.getData(),y=this.markerGroupMap,x=y.get(v)||y.set(v,{group:new Rn.Z});this.group.add(x.group),this.markKeep(x);var w=function Uk(c,s,a){var l,u;if(c){var p=(0,b.map)(c&&c.dimensions,function(y){var x=s.getData(),w=x.getDimensionInfo(x.mapDimension(y))||{};return(0,b.extend)((0,b.extend)({},w),{name:y,ordinalMeta:null})});u=(0,b.map)(["x0","y0","x1","y1"],function(y,x){return{name:y,type:p[x%2].type}}),l=new xt.Z(u,a)}else l=new xt.Z(u=[{name:"value",type:"float"}],a);var v=(0,b.map)(a.get("data"),(0,b.curry)(Bk,s,c,a));c&&(v=(0,b.filter)(v,(0,b.curry)(Mz,c)));var m=c?function(y,x,w,D){var I=y.coord[Math.floor(D/2)][D%2];return(0,Wu.yQ)(I,u[D])}:function(y,x,w,D){return(0,Wu.yQ)(y.value,u[D])};return l.initData(v,null,m),l.hasItemOption=!0,l}(p,a,l);l.setData(w),w.each(function(D){var I=(0,b.map)(Hk,function(Ue){return zk(w,D,Ue,a,h)}),L=p.getAxis("x").scale,N=p.getAxis("y").scale,Z=L.getExtent(),se=N.getExtent(),_e=[L.parse(w.get("x0",D)),L.parse(w.get("x1",D))],me=[N.parse(w.get("y0",D)),N.parse(w.get("y1",D))];It.dt(_e),It.dt(me),w.setItemLayout(D,{points:I,allClipped:!!(Z[0]>_e[1]||Z[1]<_e[0]||se[0]>me[1]||se[1]<me[0])});var Ie=w.getItemModel(D).getModel("itemStyle").getItemStyle(),ke=(0,wc.UL)(m,"color");Ie.fill||(Ie.fill=ke,(0,b.isString)(Ie.fill)&&(Ie.fill=Da.modifyAlpha(Ie.fill,.4))),Ie.stroke||(Ie.stroke=ke),w.setItemVisual(D,"style",Ie)}),w.diff(G_(x).data).add(function(D){var I=w.getItemLayout(D);if(!I.allClipped){var L=new nl.Z({shape:{points:I.points}});w.setItemGraphicEl(D,L),x.group.add(L)}}).update(function(D,I){var L=G_(x).data.getItemGraphicEl(I),N=w.getItemLayout(D);N.allClipped?L&&x.group.remove(L):(L?Sn.D(L,{shape:{points:N.points}},l,D):L=new nl.Z({shape:{points:N.points}}),w.setItemGraphicEl(D,L),x.group.add(L))}).remove(function(D){var I=G_(x).data.getItemGraphicEl(D);x.group.remove(I)}).execute(),w.eachItemGraphicEl(function(D,I){var L=w.getItemModel(I),N=w.getItemVisual(I,"style");D.useStyle(w.getItemVisual(I,"style")),(0,qt.ni)(D,(0,qt.k3)(L),{labelFetcher:l,labelDataIndex:I,defaultText:w.getName(I)||"",inheritColor:(0,b.isString)(N.fill)?Da.modifyAlpha(N.fill,1):"#000"}),(0,Wt.WO)(D,L),(0,Wt.k5)(D,null,null,L.get(["emphasis","disabled"])),(0,Tr.A)(D).dataModel=l}),G_(x).data=w,x.group.silent=l.get("silent")||a.get("silent")},s.type="markArea",s}(cE),pE=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.layoutMode={type:"box",ignoreSize:!0},a}return(0,At.ZT)(s,c),s.prototype.init=function(a,l,u){this.mergeDefaultAndTheme(a,u),a.selected=a.selected||{},this._updateSelector(a)},s.prototype.mergeOption=function(a,l){c.prototype.mergeOption.call(this,a,l),this._updateSelector(a)},s.prototype._updateSelector=function(a){var l=a.selector,u=this.ecModel;!0===l&&(l=a.selector=["all","inverse"]),b.isArray(l)&&b.each(l,function(h,p){b.isString(h)&&(h={type:h}),l[p]=b.merge(h,function(c,s){return"all"===s?{type:"all",title:c.getLocaleModel().get(["legend","selector","all"])}:"inverse"===s?{type:"inverse",title:c.getLocaleModel().get(["legend","selector","inverse"])}:void 0}(u,h.type))})},s.prototype.optionUpdated=function(){this._updateData(this.ecModel);var a=this._data;if(a[0]&&"single"===this.get("selectedMode")){for(var l=!1,u=0;u<a.length;u++){var h=a[u].get("name");if(this.isSelected(h)){this.select(h),l=!0;break}}!l&&this.select(a[0].get("name"))}},s.prototype._updateData=function(a){var l=[],u=[];a.eachRawSeries(function(v){var y;if(u.push(v.name),v.legendVisualProvider){var w=v.legendVisualProvider.getAllNames();a.isSeriesFiltered(v)||(u=u.concat(w)),w.length?l=l.concat(w):y=!0}else y=!0;y&&(0,xn.yu)(v)&&l.push(v.name)}),this._availableNames=u;var h=this.get("data")||l,p=b.map(h,function(v){return(b.isString(v)||b.isNumber(v))&&(v={name:v}),new ka.Z(v,this,this.ecModel)},this);this._data=p},s.prototype.getData=function(){return this._data},s.prototype.select=function(a){var l=this.option.selected;"single"===this.get("selectedMode")&&b.each(this._data,function(p){l[p.get("name")]=!1}),l[a]=!0},s.prototype.unSelect=function(a){"single"!==this.get("selectedMode")&&(this.option.selected[a]=!1)},s.prototype.toggleSelected=function(a){var l=this.option.selected;l.hasOwnProperty(a)||(l[a]=!0),this[l[a]?"unSelect":"select"](a)},s.prototype.allSelect=function(){var l=this.option.selected;b.each(this._data,function(u){l[u.get("name",!0)]=!0})},s.prototype.inverseSelect=function(){var l=this.option.selected;b.each(this._data,function(u){var h=u.get("name",!0);l.hasOwnProperty(h)||(l[h]=!0),l[h]=!l[h]})},s.prototype.isSelected=function(a){var l=this.option.selected;return!(l.hasOwnProperty(a)&&!l[a])&&b.indexOf(this._availableNames,a)>=0},s.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},s.type="legend.plain",s.dependencies=["series"],s.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},s}(ma.Z);var dg=b.curry,ef=b.each,Vs=Rn.Z;function Rr(c,s,a,l){S1(c,s,a,l),a.dispatchAction({type:"legendToggleSelect",name:c??s}),w1(c,s,a,l)}function W_(c){for(var a,s=c.getZr().storage.getDisplayList(),l=0,u=s.length;l<u&&!(a=s[l].states.emphasis);)l++;return a&&a.hoverLayer}function w1(c,s,a,l){W_(a)||a.dispatchAction({type:"highlight",seriesName:c,name:s,excludeSeriesId:l})}function S1(c,s,a,l){W_(a)||a.dispatchAction({type:"downplay",seriesName:c,name:s,excludeSeriesId:l})}const D1=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.newlineDisabled=!1,a}return(0,At.ZT)(s,c),s.prototype.init=function(){this.group.add(this._contentGroup=new Vs),this.group.add(this._selectorGroup=new Vs),this._isFirstRender=!0},s.prototype.getContentGroup=function(){return this._contentGroup},s.prototype.getSelectorGroup=function(){return this._selectorGroup},s.prototype.render=function(a,l,u){var h=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),a.get("show",!0)){var p=a.get("align"),v=a.get("orient");(!p||"auto"===p)&&(p="right"===a.get("left")&&"vertical"===v?"right":"left");var m=a.get("selector",!0),y=a.get("selectorPosition",!0);m&&(!y||"auto"===y)&&(y="horizontal"===v?"end":"start"),this.renderInner(p,a,l,u,m,v,y);var x=a.getBoxLayoutParams(),w={width:u.getWidth(),height:u.getHeight()},D=a.get("padding"),I=Br.ME(x,w,D),L=this.layoutInner(a,p,I,h,m,y),N=Br.ME(b.defaults({width:L.width,height:L.height},x),w,D);this.group.x=N.x-L.x,this.group.y=N.y-L.y,this.group.markRedraw(),this.group.add(this._backgroundEl=YO(L,a))}},s.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},s.prototype.renderInner=function(a,l,u,h,p,v,m){var y=this.getContentGroup(),x=b.createHashMap(),w=l.get("selectedMode"),D=[];u.eachRawSeries(function(I){!I.get("legendHoverLink")&&D.push(I.id)}),ef(l.getData(),function(I,L){var N=I.get("name");if(!this.newlineDisabled&&(""===N||"\n"===N)){var Z=new Vs;return Z.newline=!0,void y.add(Z)}var se=u.getSeriesByName(N)[0];if(!x.get(N))if(se){var _e=se.getData(),me=_e.getVisual("legendLineStyle")||{},De=_e.getVisual("legendIcon"),Pe=_e.getVisual("style");this._createItem(se,N,L,I,l,a,me,Pe,De,w,h).on("click",dg(Rr,N,null,h,D)).on("mouseover",dg(w1,se.name,null,h,D)).on("mouseout",dg(S1,se.name,null,h,D)),x.set(N,!0)}else u.eachRawSeries(function(ke){if(!x.get(N)&&ke.legendVisualProvider){var Ue=ke.legendVisualProvider;if(!Ue.containName(N))return;var Ye=Ue.indexOfName(N),Ke=Ue.getItemVisual(Ye,"style"),Je=Ue.getItemVisual(Ye,"legendIcon"),ut=(0,Da.parse)(Ke.fill);ut&&0===ut[3]&&(ut[3]=.2,Ke=b.extend(b.extend({},Ke),{fill:(0,Da.stringify)(ut,"rgba")})),this._createItem(ke,N,L,I,l,a,{},Ke,Je,w,h).on("click",dg(Rr,null,N,h,D)).on("mouseover",dg(w1,null,N,h,D)).on("mouseout",dg(S1,null,N,h,D)),x.set(N,!0)}},this)},this),p&&this._createSelector(p,l,h,v,m)},s.prototype._createSelector=function(a,l,u,h,p){var v=this.getSelectorGroup();ef(a,function(y){var x=y.type,w=new _t.ZP({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){u.dispatchAction({type:"all"===x?"legendAllSelect":"legendInverseSelect"})}});v.add(w);var D=l.getModel("selectorLabel"),I=l.getModel(["emphasis","selectorLabel"]);(0,qt.ni)(w,{normal:D,emphasis:I},{defaultText:y.title}),(0,Wt.vF)(w)})},s.prototype._createItem=function(a,l,u,h,p,v,m,y,x,w,D){var I=a.visualDrawType,L=p.get("itemWidth"),N=p.get("itemHeight"),Z=p.isSelected(l),se=h.get("symbolRotate"),_e=h.get("symbolKeepAspect"),me=h.get("icon"),De=function Gk(c,s,a,l,u,h,p){function v(Z,se){"auto"===Z.lineWidth&&(Z.lineWidth=se.lineWidth>0?2:0),ef(Z,function(_e,me){"inherit"===Z[me]&&(Z[me]=se[me])})}var m=s.getModel("itemStyle"),y=m.getItemStyle(),x=0===c.lastIndexOf("empty",0)?"fill":"stroke",w=m.getShallow("decal");y.decal=w&&"inherit"!==w?(0,A0.I)(w,p):l.decal,"inherit"===y.fill&&(y.fill=l[u]),"inherit"===y.stroke&&(y.stroke=l[x]),"inherit"===y.opacity&&(y.opacity=("fill"===u?l:a).opacity),v(y,l);var D=s.getModel("lineStyle"),I=D.getLineStyle();if(v(I,a),"auto"===y.fill&&(y.fill=l.fill),"auto"===y.stroke&&(y.stroke=l.fill),"auto"===I.stroke&&(I.stroke=l.fill),!h){var L=s.get("inactiveBorderWidth");y.lineWidth="auto"===L?l.lineWidth>0&&y[x]?2:0:y.lineWidth,y.fill=s.get("inactiveColor"),y.stroke=s.get("inactiveBorderColor"),I.stroke=D.get("inactiveColor"),I.lineWidth=D.get("inactiveWidth")}return{itemStyle:y,lineStyle:I}}(x=me||x||"roundRect",h,m,y,I,Z,D),Pe=new Vs,Ie=h.getModel("textStyle");if(!b.isFunction(a.getLegendIcon)||me&&"inherit"!==me){var ke="inherit"===me&&a.getData().getVisual("symbol")?"inherit"===se?a.getData().getVisual("symbolRotate"):se:0;Pe.add(function Wk(c){var s=c.icon||"roundRect",a=(0,si.th)(s,0,0,c.itemWidth,c.itemHeight,c.itemStyle.fill,c.symbolKeepAspect);return a.setStyle(c.itemStyle),a.rotation=(c.iconRotate||0)*Math.PI/180,a.setOrigin([c.itemWidth/2,c.itemHeight/2]),s.indexOf("empty")>-1&&(a.style.stroke=a.style.fill,a.style.fill="#fff",a.style.lineWidth=2),a}({itemWidth:L,itemHeight:N,icon:x,iconRotate:ke,itemStyle:De.itemStyle,lineStyle:De.lineStyle,symbolKeepAspect:_e}))}else Pe.add(a.getLegendIcon({itemWidth:L,itemHeight:N,icon:x,iconRotate:se,itemStyle:De.itemStyle,lineStyle:De.lineStyle,symbolKeepAspect:_e}));var Ue="left"===v?L+5:-5,Ye=v,Ke=p.get("formatter"),Je=l;b.isString(Ke)&&Ke?Je=Ke.replace("{name}",l??""):b.isFunction(Ke)&&(Je=Ke(l));var ut=h.get("inactiveColor");Pe.add(new _t.ZP({style:(0,qt.Lr)(Ie,{text:Je,x:Ue,y:N/2,fill:Z?Ie.getTextColor():ut,align:Ye,verticalAlign:"middle"})}));var pt=new Mi.Z({shape:Pe.getBoundingRect(),invisible:!0}),yt=h.getModel("tooltip");return yt.get("show")&&_n.setTooltipConfig({el:pt,componentModel:p,itemName:l,itemTooltipOption:yt.option}),Pe.add(pt),Pe.eachChild(function(wt){wt.silent=!0}),pt.silent=!w,this.getContentGroup().add(Pe),(0,Wt.vF)(Pe),Pe.__legendDataIndex=u,Pe},s.prototype.layoutInner=function(a,l,u,h,p,v){var m=this.getContentGroup(),y=this.getSelectorGroup();Br.BZ(a.get("orient"),m,a.get("itemGap"),u.width,u.height);var x=m.getBoundingRect(),w=[-x.x,-x.y];if(y.markRedraw(),m.markRedraw(),p){Br.BZ("horizontal",y,a.get("selectorItemGap",!0));var D=y.getBoundingRect(),I=[-D.x,-D.y],L=a.get("selectorButtonGap",!0),N=a.getOrient().index,Z=0===N?"width":"height",se=0===N?"height":"width",_e=0===N?"y":"x";"end"===v?I[N]+=x[Z]+L:w[N]+=D[Z]+L,I[1-N]+=x[se]/2-D[se]/2,y.x=I[0],y.y=I[1],m.x=w[0],m.y=w[1];var me={x:0,y:0};return me[Z]=x[Z]+L+D[Z],me[se]=Math.max(x[se],D[se]),me[_e]=Math.min(0,D[_e]+I[1-N]),me}return m.x=w[0],m.y=w[1],this.group.getBoundingRect()},s.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},s.type="legend.plain",s}(va.Z);function gE(c){var s=c.findComponents({mainType:"legend"});s&&s.length&&c.filterSeries(function(a){for(var l=0;l<s.length;l++)if(!s[l].isSelected(a.name))return!1;return!0})}function hg(c,s,a){var h,l={},u="toggleSelected"===c;return a.eachComponent("legend",function(p){u&&null!=h?p[h?"select":"unSelect"](s.name):"allSelect"===c||"inverseSelect"===c?p[c]():(p[c](s.name),h=p.isSelected(s.name));var v=p.getData();(0,b.each)(v,function(m){var y=m.get("name");if("\n"!==y&&""!==y){var x=p.isSelected(y);l[y]=l.hasOwnProperty(y)?l[y]&&x:x}})}),"allSelect"===c||"inverseSelect"===c?{selected:l}:{name:s.name,selected:l}}function T1(c){c.registerComponentModel(pE),c.registerComponentView(D1),c.registerProcessor(c.PRIORITY.PROCESSOR.SERIES_FILTER,gE),c.registerSubTypeDefaulter("legend",function(){return"plain"}),function M1(c){c.registerAction("legendToggleSelect","legendselectchanged",(0,b.curry)(hg,"toggleSelected")),c.registerAction("legendAllSelect","legendselectall",(0,b.curry)(hg,"allSelect")),c.registerAction("legendInverseSelect","legendinverseselect",(0,b.curry)(hg,"inverseSelect")),c.registerAction("legendSelect","legendselected",(0,b.curry)(hg,"select")),c.registerAction("legendUnSelect","legendunselected",(0,b.curry)(hg,"unSelect"))}(c)}function ju(c,s,a){var u=[1,1];u[c.getOrient().index]=0,(0,Br.dt)(s,a,{type:"box",ignoreSize:!!u})}const vE=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.setScrollDataIndex=function(a){this.option.scrollDataIndex=a},s.prototype.init=function(a,l,u){var h=(0,Br.tE)(a);c.prototype.init.call(this,a,l,u),ju(this,a,h)},s.prototype.mergeOption=function(a,l){c.prototype.mergeOption.call(this,a,l),ju(this,this.option,a)},s.type="legend.scroll",s.defaultOption=(0,Zn.ZL)(pE.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),s}(pE);var E1=Rn.Z,A1=["width","height"],jd=["x","y"];const Zk=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.newlineDisabled=!0,a._currentIndex=0,a}return(0,At.ZT)(s,c),s.prototype.init=function(){c.prototype.init.call(this),this.group.add(this._containerGroup=new E1),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new E1)},s.prototype.resetInner=function(){c.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},s.prototype.renderInner=function(a,l,u,h,p,v,m){var y=this;c.prototype.renderInner.call(this,a,l,u,h,p,v,m);var x=this._controllerGroup,w=l.get("pageIconSize",!0),D=b.isArray(w)?w:[w,w];L("pagePrev",0);var I=l.getModel("pageTextStyle");function L(N,Z){var se=N+"DataIndex",_e=_n.createIcon(l.get("pageIcons",!0)[l.getOrient().name][Z],{onclick:b.bind(y._pageGo,y,se,l,h)},{x:-D[0]/2,y:-D[1]/2,width:D[0],height:D[1]});_e.name=N,x.add(_e)}x.add(new _t.ZP({name:"pageText",style:{text:"xx/xx",fill:I.getTextColor(),font:I.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),L("pageNext",1)},s.prototype.layoutInner=function(a,l,u,h,p,v){var m=this.getSelectorGroup(),y=a.getOrient().index,x=A1[y],w=jd[y],D=A1[1-y],I=jd[1-y];p&&Br.BZ("horizontal",m,a.get("selectorItemGap",!0));var L=a.get("selectorButtonGap",!0),N=m.getBoundingRect(),Z=[-N.x,-N.y],se=b.clone(u);p&&(se[x]=u[x]-N[x]-L);var _e=this._layoutContentAndController(a,h,se,y,x,D,I,w);if(p){if("end"===v)Z[y]+=_e[x]+L;else{var me=N[x]+L;Z[y]-=me,_e[w]-=me}_e[x]+=N[x]+L,Z[1-y]+=_e[I]+_e[D]/2-N[D]/2,_e[D]=Math.max(_e[D],N[D]),_e[I]=Math.min(_e[I],N[I]+Z[1-y]),m.x=Z[0],m.y=Z[1],m.markRedraw()}return _e},s.prototype._layoutContentAndController=function(a,l,u,h,p,v,m,y){var x=this.getContentGroup(),w=this._containerGroup,D=this._controllerGroup;Br.BZ(a.get("orient"),x,a.get("itemGap"),h?u.width:null,h?null:u.height),Br.BZ("horizontal",D,a.get("pageButtonItemGap",!0));var I=x.getBoundingRect(),L=D.getBoundingRect(),N=this._showController=I[p]>u[p],Z=[-I.x,-I.y];l||(Z[h]=x[y]);var se=[0,0],_e=[-L.x,-L.y],me=b.retrieve2(a.get("pageButtonGap",!0),a.get("itemGap",!0));N&&("end"===a.get("pageButtonPosition",!0)?_e[h]+=u[p]-L[p]:se[h]+=L[p]+me),_e[1-h]+=I[v]/2-L[v]/2,x.setPosition(Z),w.setPosition(se),D.setPosition(_e);var Pe={x:0,y:0};if(Pe[p]=N?u[p]:I[p],Pe[v]=Math.max(I[v],L[v]),Pe[m]=Math.min(0,L[m]+_e[1-h]),w.__rectSize=u[p],N){var Ie={x:0,y:0};Ie[p]=Math.max(u[p]-L[p]-me,0),Ie[v]=Pe[v],w.setClipPath(new Mi.Z({shape:Ie})),w.__rectSize=Ie[p]}else D.eachChild(function(Ue){Ue.attr({invisible:!0,silent:!0})});var ke=this._getPageInfo(a);return null!=ke.pageIndex&&Sn.D(x,{x:ke.contentPosition[0],y:ke.contentPosition[1]},N?a:null),this._updatePageInfoView(a,ke),Pe},s.prototype._pageGo=function(a,l,u){var h=this._getPageInfo(l)[a];null!=h&&u.dispatchAction({type:"legendScroll",scrollDataIndex:h,legendId:l.id})},s.prototype._updatePageInfoView=function(a,l){var u=this._controllerGroup;b.each(["pagePrev","pageNext"],function(x){var D=null!=l[x+"DataIndex"],I=u.childOfName(x);I&&(I.setStyle("fill",a.get(D?"pageIconColor":"pageIconInactiveColor",!0)),I.cursor=D?"pointer":"default")});var h=u.childOfName("pageText"),p=a.get("pageFormatter"),v=l.pageIndex,m=null!=v?v+1:0,y=l.pageCount;h&&p&&h.setStyle("text",b.isString(p)?p.replace("{current}",null==m?"":m+"").replace("{total}",null==y?"":y+""):p({current:m,total:y}))},s.prototype._getPageInfo=function(a){var l=a.get("scrollDataIndex",!0),u=this.getContentGroup(),h=this._containerGroup.__rectSize,p=a.getOrient().index,v=A1[p],m=jd[p],y=this._findTargetItemIndex(l),x=u.children(),w=x[y],D=x.length,I=D?1:0,L={contentPosition:[u.x,u.y],pageCount:I,pageIndex:I-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!w)return L;var N=De(w);L.contentPosition[p]=-N.s;for(var Z=y+1,se=N,_e=N,me=null;Z<=D;++Z)(!(me=De(x[Z]))&&_e.e>se.s+h||me&&!Pe(me,se.s))&&(se=_e.i>se.i?_e:me)&&(null==L.pageNextDataIndex&&(L.pageNextDataIndex=se.i),++L.pageCount),_e=me;for(Z=y-1,se=N,_e=N,me=null;Z>=-1;--Z)(!(me=De(x[Z]))||!Pe(_e,me.s))&&se.i<_e.i&&(_e=se,null==L.pagePrevDataIndex&&(L.pagePrevDataIndex=se.i),++L.pageCount,++L.pageIndex),se=me;return L;function De(Ie){if(Ie){var ke=Ie.getBoundingRect(),Ue=ke[m]+Ie[m];return{s:Ue,e:Ue+ke[v],i:Ie.__legendDataIndex}}}function Pe(Ie,ke){return Ie.e>=ke&&Ie.s<=ke+h}},s.prototype._findTargetItemIndex=function(a){return this._showController?(this.getContentGroup().eachChild(function(p,v){var m=p.__legendDataIndex;null==h&&null!=m&&(h=v),m===a&&(l=v)}),l??h):0;var l,h},s.type="legend.scroll",s}(D1);function _E(c){(0,ue.D)(T1),c.registerComponentModel(vE),c.registerComponentView(Zk),function mE(c){c.registerAction("legendScroll","legendscroll",function(s,a){var l=s.scrollDataIndex;null!=l&&a.eachComponent({mainType:"legend",subType:"scroll",query:s},function(u){u.setScrollDataIndex(l)})})}(c)}const Na=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.type="dataZoom.inside",s.defaultOption=(0,Zn.ZL)(__.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),s}(__);var ri=(0,xn.Yf)();function ya(c,s,a){ri(c).coordSysRecordMap.each(function(l){var u=l.dataZoomInfoMap.get(s.uid);u&&(u.getRange=a)})}function Yk(c,s){if(s){c.removeKey(s.model.uid);var a=s.controller;a&&a.dispose()}}function $k(c,s){c.isDisposed()||c.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:s})}function Kk(c,s,a,l){return c.coordinateSystem.containPoint([a,l])}var Lz=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type="dataZoom.inside",a}return(0,At.ZT)(s,c),s.prototype.render=function(a,l,u){c.prototype.render.apply(this,arguments),a.noTarget()?this._clear():(this.range=a.getPercentRange(),ya(u,a,{pan:(0,b.bind)(yE.pan,this),zoom:(0,b.bind)(yE.zoom,this),scrollMove:(0,b.bind)(yE.scrollMove,this)}))},s.prototype.dispose=function(){this._clear(),c.prototype.dispose.apply(this,arguments)},s.prototype._clear=function(){(function Cr(c,s){for(var a=ri(c).coordSysRecordMap,l=a.keys(),u=0;u<l.length;u++){var p=a.get(l[u]),v=p.dataZoomInfoMap;if(v){var m=s.uid;v.get(m)&&(v.removeKey(m),v.keys().length||Yk(a,p))}}})(this.api,this.dataZoomModel),this.range=null},s.type="dataZoom.inside",s}(Vx),yE={zoom:function(c,s,a,l){var u=this.range,h=u.slice(),p=c.axisModels[0];if(p){var v=tf[s](null,[l.originX,l.originY],p,a,c),m=(v.signal>0?v.pixelStart+v.pixelLength-v.pixel:v.pixel-v.pixelStart)/v.pixelLength*(h[1]-h[0])+h[0],y=Math.max(1/l.scale,0);h[0]=(h[0]-m)*y+m,h[1]=(h[1]-m)*y+m;var x=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(Kc(0,h,[0,100],0,x.minSpan,x.maxSpan),this.range=h,u[0]!==h[0]||u[1]!==h[1])return h}},pan:fg(function(c,s,a,l,u,h){var p=tf[l]([h.oldX,h.oldY],[h.newX,h.newY],s,u,a);return p.signal*(c[1]-c[0])*p.pixel/p.pixelLength}),scrollMove:fg(function(c,s,a,l,u,h){return tf[l]([0,0],[h.scrollDelta,h.scrollDelta],s,u,a).signal*(c[1]-c[0])*h.scrollDelta})};function fg(c){return function(s,a,l,u){var h=this.range,p=h.slice(),v=s.axisModels[0];if(v&&(Kc(c(p,v,s,a,l,u),p,[0,100],"all"),this.range=p,h[0]!==p[0]||h[1]!==p[1]))return p}}var tf={grid:function(c,s,a,l,u){var h=a.axis,p={},v=u.model.coordinateSystem.getRect();return c=c||[0,0],"x"===h.dim?(p.pixel=s[0]-c[0],p.pixelLength=v.width,p.pixelStart=v.x,p.signal=h.inverse?1:-1):(p.pixel=s[1]-c[1],p.pixelLength=v.height,p.pixelStart=v.y,p.signal=h.inverse?-1:1),p},polar:function(c,s,a,l,u){var h=a.axis,p={},v=u.model.coordinateSystem,m=v.getRadiusAxis().getExtent(),y=v.getAngleAxis().getExtent();return c=c?v.pointToCoord(c):[0,0],s=v.pointToCoord(s),"radiusAxis"===a.mainType?(p.pixel=s[0]-c[0],p.pixelLength=m[1]-m[0],p.pixelStart=m[0],p.signal=h.inverse?1:-1):(p.pixel=s[1]-c[1],p.pixelLength=y[1]-y[0],p.pixelStart=y[0],p.signal=h.inverse?-1:1),p},singleAxis:function(c,s,a,l,u){var h=a.axis,p=u.model.coordinateSystem.getRect(),v={};return c=c||[0,0],"horizontal"===h.orient?(v.pixel=s[0]-c[0],v.pixelLength=p.width,v.pixelStart=p.x,v.signal=h.inverse?1:-1):(v.pixel=s[1]-c[1],v.pixelLength=p.height,v.pixelStart=p.y,v.signal=h.inverse?-1:1),v}};const j_=Lz;function zs(c){Lo(c),c.registerComponentModel(Na),c.registerComponentView(j_),function qk(c){c.registerProcessor(c.PRIORITY.PROCESSOR.FILTER,function(s,a){var l=ri(a),u=l.coordSysRecordMap||(l.coordSysRecordMap=(0,b.createHashMap)());u.each(function(h){h.dataZoomInfoMap=null}),s.eachComponent({mainType:"dataZoom",subType:"inside"},function(h){var p=Bx(h);(0,b.each)(p.infoList,function(v){var m=v.model.uid,y=u.get(m)||u.set(m,function Xk(c,s){var a={model:s,containsPoint:(0,b.curry)(Kk,s),dispatchAction:(0,b.curry)($k,c),dataZoomInfoMap:null,controller:null},l=a.controller=new cp(c.getZr());return(0,b.each)(["pan","zoom","scrollMove"],function(u){l.on(u,function(h){var p=[];a.dataZoomInfoMap.each(function(v){if(h.isAvailableBehavior(v.model.option)){var m=(v.getRange||{})[u],y=m&&m(v.dzReferCoordSysInfo,a.model.mainType,a.controller,h);!v.model.get("disabled",!0)&&y&&p.push({dataZoomId:v.model.id,start:y[0],end:y[1]})}}),p.length&&a.dispatchAction(p)})}),a}(a,v.model));(y.dataZoomInfoMap||(y.dataZoomInfoMap=(0,b.createHashMap)())).set(h.uid,{dzReferCoordSysInfo:v,model:h,getRange:null})})}),u.each(function(h){var v,p=h.controller,m=h.dataZoomInfoMap;if(m){var y=m.keys()[0];null!=y&&(v=m.get(y))}if(v){var x=function Qk(c){var s,a="type_",l={type_true:2,type_move:1,type_false:0,type_undefined:-1},u=!0;return c.each(function(h){var p=h.model,v=!p.get("disabled",!0)&&(!p.get("zoomLock",!0)||"move");l[a+v]>l[a+s]&&(s=v),u=u&&p.get("preventDefaultMouseMove",!0)}),{controlType:s,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!u}}}(m);p.enable(x.controlType,x.opt),p.setPointerChecker(h.containsPoint),Uo.T9(h,"dispatchAction",v.model.get("throttle",!0),"fixRate")}else Yk(u,h)})})}(c)}const Oz=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.type="dataZoom.slider",s.layoutMode="box",s.defaultOption=(0,Zn.ZL)(__.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),s}(__);var Z_=Mi.Z,pg="horizontal",xE="vertical",gl=["line","bar","candlestick","scatter"],R1={easing:"cubicOut",duration:100,delay:0};function CE(c){return"vertical"===c?"ns-resize":"ew-resize"}const rN=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a._displayables={},a}return(0,At.ZT)(s,c),s.prototype.init=function(a,l){this.api=l,this._onBrush=(0,b.bind)(this._onBrush,this),this._onBrushEnd=(0,b.bind)(this._onBrushEnd,this)},s.prototype.render=function(a,l,u,h){if(c.prototype.render.apply(this,arguments),Uo.T9(this,"_dispatchZoomAction",a.get("throttle"),"fixRate"),this._orient=a.getOrient(),!1!==a.get("show"))return a.noTarget()?(this._clear(),void this.group.removeAll()):((!h||"dataZoom"!==h.type||h.from!==this.uid)&&this._buildView(),void this._updateView());this.group.removeAll()},s.prototype.dispose=function(){this._clear(),c.prototype.dispose.apply(this,arguments)},s.prototype._clear=function(){Uo.ZH(this,"_dispatchZoomAction");var a=this.api.getZr();a.off("mousemove",this._onBrush),a.off("mouseup",this._onBrushEnd)},s.prototype._buildView=function(){var a=this.group;a.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var l=this._displayables.sliderGroup=new Rn.Z;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),a.add(l),this._positionGroup()},s.prototype._resetLocation=function(){var a=this.dataZoomModel,l=this.api,h=a.get("brushSelect")?7:0,p=this._findCoordRect(),v={width:l.getWidth(),height:l.getHeight()},m=this._orient===pg?{right:v.width-p.x-p.width,top:v.height-30-7-h,width:p.width,height:30}:{right:7,top:p.y,width:30,height:p.height},y=Br.tE(a.option);(0,b.each)(["right","top","width","height"],function(w){"ph"===y[w]&&(y[w]=m[w])});var x=Br.ME(y,v);this._location={x:x.x,y:x.y},this._size=[x.width,x.height],this._orient===xE&&this._size.reverse()},s.prototype._positionGroup=function(){var a=this.group,l=this._location,u=this._orient,h=this.dataZoomModel.getFirstTargetAxisModel(),p=h&&h.get("inverse"),v=this._displayables.sliderGroup,m=(this._dataShadowInfo||{}).otherAxisInverse;v.attr(u!==pg||p?u===pg&&p?{scaleY:m?1:-1,scaleX:-1}:u!==xE||p?{scaleY:m?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:m?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:m?1:-1,scaleX:1});var y=a.getBoundingRect([v]);a.x=l.x-y.x,a.y=l.y-y.y,a.markRedraw()},s.prototype._getViewExtent=function(){return[0,this._size[0]]},s.prototype._renderBackground=function(){var a=this.dataZoomModel,l=this._size,u=this._displayables.sliderGroup,h=a.get("brushSelect");u.add(new Z_({silent:!0,shape:{x:0,y:0,width:l[0],height:l[1]},style:{fill:a.get("backgroundColor")},z2:-40}));var p=new Z_({shape:{x:0,y:0,width:l[0],height:l[1]},style:{fill:"transparent"},z2:0,onclick:(0,b.bind)(this._onClickPanel,this)}),v=this.api.getZr();h?(p.on("mousedown",this._onBrushStart,this),p.cursor="crosshair",v.on("mousemove",this._onBrush),v.on("mouseup",this._onBrushEnd)):(v.off("mousemove",this._onBrush),v.off("mouseup",this._onBrushEnd)),u.add(p)},s.prototype._renderDataShadow=function(){var a=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],a){var l=this._size,u=this._shadowSize||[],h=a.series,p=h.getRawData(),v=h.getShadowDim&&h.getShadowDim(),m=v&&p.getDimensionInfo(v)?h.getShadowDim():a.otherDim;if(null!=m){var y=this._shadowPolygonPts,x=this._shadowPolylinePts;if(p!==this._shadowData||m!==this._shadowDim||l[0]!==u[0]||l[1]!==u[1]){var w=p.getDataExtent(m),D=.3*(w[1]-w[0]);w=[w[0]-D,w[1]+D];var De,I=[0,l[1]],N=[[l[0],0],[0,0]],Z=[],se=l[0]/(p.count()-1),_e=0,me=Math.round(p.count()/l[0]);p.each([m],function(Ye,Ke){if(me>0&&Ke%me)_e+=se;else{var Je=null==Ye||isNaN(Ye)||""===Ye,ut=Je?0:(0,It.NU)(Ye,w,I,!0);Je&&!De&&Ke?(N.push([N[N.length-1][0],0]),Z.push([Z[Z.length-1][0],0])):!Je&&De&&(N.push([_e,0]),Z.push([_e,0])),N.push([_e,ut]),Z.push([_e,ut]),_e+=se,De=Je}}),y=this._shadowPolygonPts=N,x=this._shadowPolylinePts=Z}this._shadowData=p,this._shadowDim=m,this._shadowSize=[l[0],l[1]];for(var Ke,Je,ut,pt,Pe=this.dataZoomModel,ke=0;ke<3;ke++){var Ue=(Ke=void 0,Je=void 0,void 0,void 0,Ke=Pe.getModel(1===ke?"selectedDataBackground":"dataBackground"),Je=new Rn.Z,ut=new nl.Z({shape:{points:y},segmentIgnoreThreshold:1,style:Ke.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),pt=new Ls.Z({shape:{points:x},segmentIgnoreThreshold:1,style:Ke.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19}),Je.add(ut),Je.add(pt),Je);this._displayables.sliderGroup.add(Ue),this._displayables.dataShadowSegs.push(Ue)}}}},s.prototype._prepareDataShadowInfo=function(){var a=this.dataZoomModel,l=a.get("showDataShadow");if(!1!==l){var u,h=this.ecModel;return a.eachTargetAxis(function(p,v){var m=a.getAxisProxy(p,v).getTargetSeriesModels();(0,b.each)(m,function(y){if(!(u||!0!==l&&(0,b.indexOf)(gl,y.get("type"))<0)){var D,x=h.getComponent(dl(p),v).axis,w=function nN(c){return{x:"y",y:"x",radius:"angle",angle:"radius"}[c]}(p),I=y.coordinateSystem;null!=w&&I.getOtherAxis&&(D=I.getOtherAxis(x).inverse),w=y.getData().mapDimension(w),u={thisAxis:x,series:y,thisDim:p,otherDim:w,otherAxisInverse:D}}},this)},this),u}},s.prototype._renderHandle=function(){var a=this.group,l=this._displayables,u=l.handles=[null,null],h=l.handleLabels=[null,null],p=this._displayables.sliderGroup,v=this._size,m=this.dataZoomModel,y=this.api,x=m.get("borderRadius")||0,w=m.get("brushSelect"),D=l.filler=new Z_({silent:w,style:{fill:m.get("fillerColor")},textConfig:{position:"inside"}});p.add(D),p.add(new Z_({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:v[0],height:v[1],r:x},style:{stroke:m.get("dataBackgroundColor")||m.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),(0,b.each)([0,1],function(me){var De=m.get("handleIcon");!si.Pw[De]&&De.indexOf("path://")<0&&De.indexOf("image://")<0&&(De="path://"+De);var Pe=(0,si.th)(De,-1,0,2,2,null,!0);Pe.attr({cursor:CE(this._orient),draggable:!0,drift:(0,b.bind)(this._onDragMove,this,me),ondragend:(0,b.bind)(this._onDragEnd,this),onmouseover:(0,b.bind)(this._showDataInfo,this,!0),onmouseout:(0,b.bind)(this._showDataInfo,this,!1),z2:5});var Ie=Pe.getBoundingRect(),ke=m.get("handleSize");this._handleHeight=(0,It.GM)(ke,this._size[1]),this._handleWidth=Ie.width/Ie.height*this._handleHeight,Pe.setStyle(m.getModel("handleStyle").getItemStyle()),Pe.style.strokeNoScale=!0,Pe.rectHover=!0,Pe.ensureState("emphasis").style=m.getModel(["emphasis","handleStyle"]).getItemStyle(),(0,Wt.vF)(Pe);var Ue=m.get("handleColor");null!=Ue&&(Pe.style.fill=Ue),p.add(u[me]=Pe);var Ye=m.getModel("textStyle");a.add(h[me]=new _t.ZP({silent:!0,invisible:!0,style:(0,qt.Lr)(Ye,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:Ye.getTextColor(),font:Ye.getFont()}),z2:10}))},this);var I=D;if(w){var L=(0,It.GM)(m.get("moveHandleSize"),v[1]),N=l.moveHandle=new Mi.Z({style:m.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:v[1]-.5,height:L}}),Z=.8*L,se=l.moveHandleIcon=(0,si.th)(m.get("moveHandleIcon"),-Z/2,-Z/2,Z,Z,"#fff",!0);se.silent=!0,se.y=v[1]+L/2-.5,N.ensureState("emphasis").style=m.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var _e=Math.min(v[1]/2,Math.max(L,10));(I=l.moveZone=new Mi.Z({invisible:!0,shape:{y:v[1]-_e,height:L+_e}})).on("mouseover",function(){y.enterEmphasis(N)}).on("mouseout",function(){y.leaveEmphasis(N)}),p.add(N),p.add(se),p.add(I)}I.attr({draggable:!0,cursor:CE(this._orient),drift:(0,b.bind)(this._onDragMove,this,"all"),ondragstart:(0,b.bind)(this._showDataInfo,this,!0),ondragend:(0,b.bind)(this._onDragEnd,this),onmouseover:(0,b.bind)(this._showDataInfo,this,!0),onmouseout:(0,b.bind)(this._showDataInfo,this,!1)})},s.prototype._resetInterval=function(){var a=this._range=this.dataZoomModel.getPercentRange(),l=this._getViewExtent();this._handleEnds=[(0,It.NU)(a[0],[0,100],l,!0),(0,It.NU)(a[1],[0,100],l,!0)]},s.prototype._updateInterval=function(a,l){var u=this.dataZoomModel,h=this._handleEnds,p=this._getViewExtent(),v=u.findRepresentativeAxisProxy().getMinMaxSpan(),m=[0,100];Kc(l,h,p,u.get("zoomLock")?"all":a,null!=v.minSpan?(0,It.NU)(v.minSpan,m,p,!0):null,null!=v.maxSpan?(0,It.NU)(v.maxSpan,m,p,!0):null);var y=this._range,x=this._range=(0,It.dt)([(0,It.NU)(h[0],p,m,!0),(0,It.NU)(h[1],p,m,!0)]);return!y||y[0]!==x[0]||y[1]!==x[1]},s.prototype._updateView=function(a){var l=this._displayables,u=this._handleEnds,h=(0,It.dt)(u.slice()),p=this._size;(0,b.each)([0,1],function(I){var N=this._handleHeight;l.handles[I].attr({scaleX:N/2,scaleY:N/2,x:u[I]+(I?-1:1),y:p[1]/2-N/2})},this),l.filler.setShape({x:h[0],y:0,width:h[1]-h[0],height:p[1]});var v={x:h[0],width:h[1]-h[0]};l.moveHandle&&(l.moveHandle.setShape(v),l.moveZone.setShape(v),l.moveZone.getBoundingRect(),l.moveHandleIcon&&l.moveHandleIcon.attr("x",v.x+v.width/2));for(var m=l.dataShadowSegs,y=[0,h[0],h[1],p[0]],x=0;x<m.length;x++){var w=m[x],D=w.getClipPath();D||(D=new Mi.Z,w.setClipPath(D)),D.setShape({x:y[x],y:0,width:y[x+1]-y[x],height:p[1]})}this._updateDataInfo(a)},s.prototype._updateDataInfo=function(a){var l=this.dataZoomModel,u=this._displayables,h=u.handleLabels,p=this._orient,v=["",""];if(l.get("showDetail")){var m=l.findRepresentativeAxisProxy();if(m){var y=m.getAxisModel().axis,x=this._range,w=a?m.calculateDataWindow({start:x[0],end:x[1]}).valueWindow:m.getDataValueWindow();v=[this._formatLabel(w[0],y),this._formatLabel(w[1],y)]}}var D=(0,It.dt)(this._handleEnds.slice());function I(L){var N=_n.getTransform(u.handles[L].parent,this.group),Z=_n.transformDirection(0===L?"right":"left",N),se=this._handleWidth/2+5,_e=_n.applyTransform([D[L]+(0===L?-se:se),this._size[1]/2],N);h[L].setStyle({x:_e[0],y:_e[1],verticalAlign:p===pg?"middle":Z,align:p===pg?Z:"center",text:v[L]})}I.call(this,0),I.call(this,1)},s.prototype._formatLabel=function(a,l){var u=this.dataZoomModel,h=u.get("labelFormatter"),p=u.get("labelPrecision");(null==p||"auto"===p)&&(p=l.getPixelPrecision());var v=null==a||isNaN(a)?"":"category"===l.type||"time"===l.type?l.scale.getLabel({value:Math.round(a)}):a.toFixed(Math.min(p,20));return(0,b.isFunction)(h)?h(a,v):(0,b.isString)(h)?h.replace("{value}",v):v},s.prototype._showDataInfo=function(a){var l=this._displayables,u=l.handleLabels;u[0].attr("invisible",!(a=this._dragging||a)),u[1].attr("invisible",!a),l.moveHandle&&this.api[a?"enterEmphasis":"leaveEmphasis"](l.moveHandle,1)},s.prototype._onDragMove=function(a,l,u,h){this._dragging=!0,rl.sT(h.event);var p=this._displayables.sliderGroup.getLocalTransform(),v=_n.applyTransform([l,u],p,!0),m=this._updateInterval(a,v[0]),y=this.dataZoomModel.get("realtime");this._updateView(!y),m&&y&&this._dispatchZoomAction(!0)},s.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction(!1)},s.prototype._onClickPanel=function(a){var l=this._size,u=this._displayables.sliderGroup.transformCoordToLocal(a.offsetX,a.offsetY);if(!(u[0]<0||u[0]>l[0]||u[1]<0||u[1]>l[1])){var h=this._handleEnds,v=this._updateInterval("all",u[0]-(h[0]+h[1])/2);this._updateView(),v&&this._dispatchZoomAction(!1)}},s.prototype._onBrushStart=function(a){this._brushStart=new na.Z(a.offsetX,a.offsetY),this._brushing=!0,this._brushStartTime=+new Date},s.prototype._onBrushEnd=function(a){if(this._brushing){var l=this._displayables.brushRect;if(this._brushing=!1,l){l.attr("ignore",!0);var u=l.shape;if(!(+new Date-this._brushStartTime<200&&Math.abs(u.width)<5)){var p=this._getViewExtent(),v=[0,100];this._range=(0,It.dt)([(0,It.NU)(u.x,p,v,!0),(0,It.NU)(u.x+u.width,p,v,!0)]),this._handleEnds=[u.x,u.x+u.width],this._updateView(),this._dispatchZoomAction(!1)}}}},s.prototype._onBrush=function(a){this._brushing&&(rl.sT(a.event),this._updateBrushRect(a.offsetX,a.offsetY))},s.prototype._updateBrushRect=function(a,l){var u=this._displayables,p=u.brushRect;p||(p=u.brushRect=new Z_({silent:!0,style:this.dataZoomModel.getModel("brushStyle").getItemStyle()}),u.sliderGroup.add(p)),p.attr("ignore",!1);var v=this._brushStart,m=this._displayables.sliderGroup,y=m.transformCoordToLocal(a,l),x=m.transformCoordToLocal(v.x,v.y),w=this._size;y[0]=Math.max(Math.min(w[0],y[0]),0),p.setShape({x:x[0],y:0,width:y[0]-x[0],height:w[1]})},s.prototype._dispatchZoomAction=function(a){var l=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:a?R1:null,start:l[0],end:l[1]})},s.prototype._findCoordRect=function(){var a,l=Bx(this.dataZoomModel).infoList;if(!a&&l.length){var u=l[0].model.coordinateSystem;a=u.getRect&&u.getRect()}if(!a){var h=this.api.getWidth(),p=this.api.getHeight();a={x:.2*h,y:.2*p,width:.6*h,height:.6*p}}return a},s.type="dataZoom.slider",s}(Vx);function nf(c){c.registerComponentModel(Oz),c.registerComponentView(rN),Lo(c)}var io={get:function(c,s,a){var l=b.clone((Ar[c]||{})[s]);return a&&b.isArray(l)?l[l.length-1]:l}},Ar={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};const Zr=io;var wE=no.mapVisual,Y_=no.eachVisual,ru=b.isArray,gg=b.each,Bl=It.dt,aN=It.NU;const X_=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.stateList=["inRange","outOfRange"],a.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],a.layoutMode={type:"box",ignoreSize:!0},a.dataBound=[-1/0,1/0],a.targetVisuals={},a.controllerVisuals={},a}return(0,At.ZT)(s,c),s.prototype.init=function(a,l,u){this.mergeDefaultAndTheme(a,u)},s.prototype.optionUpdated=function(a,l){!l&&l1(this.option,a,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},s.prototype.resetVisual=function(a){var l=this.stateList;a=b.bind(a,this),this.controllerVisuals=s1(this.option.controller,l,a),this.targetVisuals=s1(this.option.target,l,a)},s.prototype.getItemSymbol=function(){return null},s.prototype.getTargetSeriesIndices=function(){var a=this.option.seriesIndex,l=[];return null==a||"all"===a?this.ecModel.eachSeries(function(u,h){l.push(h)}):l=xn.kF(a),l},s.prototype.eachTargetSeries=function(a,l){b.each(this.getTargetSeriesIndices(),function(u){var h=this.ecModel.getSeriesByIndex(u);h&&a.call(l,h)},this)},s.prototype.isTargetSeries=function(a){var l=!1;return this.eachTargetSeries(function(u){u===a&&(l=!0)}),l},s.prototype.formatValueText=function(a,l,u){var y,h=this.option,p=h.precision,v=this.dataBound,m=h.formatter;u=u||["<",">"],b.isArray(a)&&(a=a.slice(),y=!0);var x=l?a:y?[w(a[0]),w(a[1])]:w(a);return b.isString(m)?m.replace("{value}",y?x[0]:x).replace("{value2}",y?x[1]:x):b.isFunction(m)?y?m(a[0],a[1]):m(a):y?a[0]===v[0]?u[0]+" "+x[1]:a[1]===v[1]?u[1]+" "+x[0]:x[0]+" - "+x[1]:x;function w(D){return D===v[0]?"min":D===v[1]?"max":(+D).toFixed(Math.min(p,20))}},s.prototype.resetExtent=function(){var a=this.option,l=Bl([a.min,a.max]);this._dataExtent=l},s.prototype.getDataDimensionIndex=function(a){var l=this.option.dimension;if(null!=l)return a.getDimensionIndex(l);for(var u=a.dimensions,h=u.length-1;h>=0;h--){var v=a.getDimensionInfo(u[h]);if(!v.isCalculationCoord)return v.storeDimIndex}},s.prototype.getExtent=function(){return this._dataExtent.slice()},s.prototype.completeVisualOption=function(){var a=this.ecModel,l=this.option,u={inRange:l.inRange,outOfRange:l.outOfRange},h=l.target||(l.target={}),p=l.controller||(l.controller={});b.merge(h,u),b.merge(p,u);var v=this.isCategory();function m(w){ru(l.color)&&!w.inRange&&(w.inRange={color:l.color.slice().reverse()}),w.inRange=w.inRange||{color:a.get("gradientColor")}}m.call(this,h),m.call(this,p),function y(w,D,I){var L=w[D],N=w[I];L&&!N&&(N=w[I]={},gg(L,function(Z,se){if(no.isValidType(se)){var _e=Zr.get(se,"inactive",v);null!=_e&&(N[se]=_e,"color"===se&&!N.hasOwnProperty("opacity")&&!N.hasOwnProperty("colorAlpha")&&(N.opacity=[0,0]))}}))}.call(this,h,"inRange","outOfRange"),function x(w){var D=(w.inRange||{}).symbol||(w.outOfRange||{}).symbol,I=(w.inRange||{}).symbolSize||(w.outOfRange||{}).symbolSize,L=this.get("inactiveColor"),Z=this.getItemSymbol()||"roundRect";gg(this.stateList,function(se){var _e=this.itemSize,me=w[se];me||(me=w[se]={color:v?L:[L]}),null==me.symbol&&(me.symbol=D&&b.clone(D)||(v?Z:[Z])),null==me.symbolSize&&(me.symbolSize=I&&b.clone(I)||(v?_e[0]:[_e[0],_e[0]])),me.symbol=wE(me.symbol,function(Ie){return"none"===Ie?Z:Ie});var De=me.symbolSize;if(null!=De){var Pe=-1/0;Y_(De,function(Ie){Ie>Pe&&(Pe=Ie)}),me.symbolSize=wE(De,function(Ie){return aN(Ie,[0,Pe],[0,_e[0]],!0)})}},this)}.call(this,p)},s.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},s.prototype.isCategory=function(){return!!this.option.categories},s.prototype.setSelected=function(a){},s.prototype.getSelected=function(){return null},s.prototype.getValueState=function(a){return null},s.prototype.getVisualMeta=function(a){return null},s.type="visualMap",s.dependencies=["series"],s.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},s}(ma.Z);var Qi=[20,140];function vg(c,s,a){if(a[0]===a[1])return a.slice();for(var u=(a[1]-a[0])/200,h=a[0],p=[],v=0;v<=200&&h<a[1];v++)p.push(h),h+=u;return p.push(a[1]),p}const sN=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.optionUpdated=function(a,l){c.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(u){u.mappingMethod="linear",u.dataExtent=this.getExtent()}),this._resetRange()},s.prototype.resetItemSize=function(){c.prototype.resetItemSize.apply(this,arguments);var a=this.itemSize;(null==a[0]||isNaN(a[0]))&&(a[0]=Qi[0]),(null==a[1]||isNaN(a[1]))&&(a[1]=Qi[1])},s.prototype._resetRange=function(){var a=this.getExtent(),l=this.option.range;!l||l.auto?(a.auto=1,this.option.range=a):b.isArray(l)&&(l[0]>l[1]&&l.reverse(),l[0]=Math.max(l[0],a[0]),l[1]=Math.min(l[1],a[1]))},s.prototype.completeVisualOption=function(){c.prototype.completeVisualOption.apply(this,arguments),b.each(this.stateList,function(a){var l=this.option.controller[a].symbolSize;l&&l[0]!==l[1]&&(l[0]=l[1]/3)},this)},s.prototype.setSelected=function(a){this.option.range=a.slice(),this._resetRange()},s.prototype.getSelected=function(){var a=this.getExtent(),l=It.dt((this.get("range")||[]).slice());return l[0]>a[1]&&(l[0]=a[1]),l[1]>a[1]&&(l[1]=a[1]),l[0]<a[0]&&(l[0]=a[0]),l[1]<a[0]&&(l[1]=a[0]),l},s.prototype.getValueState=function(a){var l=this.option.range,u=this.getExtent();return(l[0]<=u[0]||l[0]<=a)&&(l[1]>=u[1]||a<=l[1])?"inRange":"outOfRange"},s.prototype.findTargetDataIndices=function(a){var l=[];return this.eachTargetSeries(function(u){var h=[],p=u.getData();p.each(this.getDataDimensionIndex(p),function(v,m){a[0]<=v&&v<=a[1]&&h.push(m)},this),l.push({seriesId:u.id,dataIndex:h})},this),l},s.prototype.getVisualMeta=function(a){var l=vg(0,0,this.getExtent()),u=vg(0,0,this.option.range.slice()),h=[];function p(I,L){h.push({value:I,color:a(I,L)})}for(var v=0,m=0,y=u.length,x=l.length;m<x&&(!u.length||l[m]<=u[0]);m++)l[m]<u[v]&&p(l[m],"outOfRange");for(var w=1;v<y;v++,w=0)w&&h.length&&p(u[v],"outOfRange"),p(u[v],"inRange");for(w=1;m<x;m++)(!u.length||u[u.length-1]<l[m])&&(w&&(h.length&&p(h[h.length-1].value,"outOfRange"),w=0),p(l[m],"outOfRange"));var D=h.length;return{stops:h,outerColors:[D?h[0].color:"transparent",D?h[D-1].color:"transparent"]}},s.type="visualMap.continuous",s.defaultOption=(0,Zn.ZL)(X_.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),s}(X_),SE=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a.autoPositionValues={left:1,right:1,top:1,bottom:1},a}return(0,At.ZT)(s,c),s.prototype.init=function(a,l){this.ecModel=a,this.api=l},s.prototype.render=function(a,l,u,h){this.visualMapModel=a,!1!==a.get("show")?this.doRender(a,l,u,h):this.group.removeAll()},s.prototype.renderBackground=function(a){var l=this.visualMapModel,u=Va.MY(l.get("padding")||0),h=a.getBoundingRect();a.add(new Mi.Z({z2:-1,silent:!0,shape:{x:h.x-u[3],y:h.y-u[0],width:h.width+u[3]+u[1],height:h.height+u[0]+u[2]},style:{fill:l.get("backgroundColor"),stroke:l.get("borderColor"),lineWidth:l.get("borderWidth")}}))},s.prototype.getControllerVisual=function(a,l,u){var h=(u=u||{}).forceState,p=this.visualMapModel,v={};if("color"===l){var m=p.get("contentColor");v.color=m}function y(I){return v[I]}function x(I,L){v[I]=L}var w=p.controllerVisuals[h||p.getValueState(a)],D=no.prepareVisualTypes(w);return b.each(D,function(I){var L=w[I];u.convertOpacityToAlpha&&"opacity"===I&&(I="colorAlpha",L=w.__alphaForOpacity),no.dependsOn(I,l)&&L&&L.applyVisual(a,y,x)}),v[l]},s.prototype.positionGroup=function(a){var u=this.api;Br.p$(a,this.visualMapModel.getBoxLayoutParams(),{width:u.getWidth(),height:u.getHeight()})},s.prototype.doRender=function(a,l,u,h){},s.type="visualMap",s}(va.Z);var L1=[["left","right","width"],["top","bottom","height"]];function K_(c,s,a){var l=c.option,u=l.align;if(null!=u&&"auto"!==u)return u;for(var h={width:s.getWidth(),height:s.getHeight()},p="horizontal"===l.orient?1:0,v=L1[p],m=[0,null,10],y={},x=0;x<3;x++)y[L1[1-p][x]]=m[x],y[v[x]]=2===x?a[0]:l[v[x]];var w=[["x","width",3],["y","height",0]][p],D=(0,Br.ME)(y,h,l.padding);return v[(D.margin[w[2]]||0)+D[w[0]]+.5*D[w[1]]<.5*h[w[1]]?0:1]}function Zd(c,s){return b.each(c||[],function(a){null!=a.dataIndex&&(a.dataIndexInside=a.dataIndex,a.dataIndex=null),a.highlightKey="visualMap"+(s?s.componentIndex:"")}),c}var vl=It.NU,lN=b.each,O1=Math.min,k1=Math.max;function N1(c,s,a,l){return new nl.Z({shape:{points:c},draggable:!!a,cursor:s,drift:a,onmousemove:function(u){rl.sT(u.event)},ondragend:l})}function F1(c){return!!(c.get("hoverLinkOnHandle")??c.get("realtime"))}function mg(c){return"vertical"===c?"ns-resize":"ew-resize"}const _g=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a._shapes={},a._dataInterval=[],a._handleEnds=[],a._hoverLinkDataIndices=[],a}return(0,At.ZT)(s,c),s.prototype.doRender=function(a,l,u,h){this._api=u,(!h||"selectDataRange"!==h.type||h.from!==this.uid)&&this._buildView()},s.prototype._buildView=function(){this.group.removeAll();var a=this.visualMapModel,l=this.group;this._orient=a.get("orient"),this._useHandle=a.get("calculable"),this._resetInterval(),this._renderBar(l);var u=a.get("text");this._renderEndsText(l,u,0),this._renderEndsText(l,u,1),this._updateView(!0),this.renderBackground(l),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(l)},s.prototype._renderEndsText=function(a,l,u){if(l){var h=l[1-u];h=null!=h?h+"":"";var p=this.visualMapModel,v=p.get("textGap"),m=p.itemSize,y=this._shapes.mainGroup,x=this._applyTransform([m[0]/2,0===u?-v:m[1]+v],y),w=this._applyTransform(0===u?"bottom":"top",y),D=this._orient;this.group.add(new _t.ZP({style:(0,qt.Lr)(this.visualMapModel.textStyleModel,{x:x[0],y:x[1],verticalAlign:"horizontal"===D?"middle":w,align:"horizontal"===D?w:"center",text:h})}))}},s.prototype._renderBar=function(a){var l=this.visualMapModel,u=this._shapes,h=l.itemSize,p=this._orient,v=this._useHandle,m=K_(l,this.api,h),y=u.mainGroup=this._createBarGroup(m),x=new Rn.Z;y.add(x),x.add(u.outOfRange=N1()),x.add(u.inRange=N1(null,v?mg(this._orient):null,b.bind(this._dragHandle,this,"all",!1),b.bind(this._dragHandle,this,"all",!0))),x.setClipPath(new Mi.Z({shape:{x:0,y:0,width:h[0],height:h[1],r:3}}));var w=l.textStyleModel.getTextRect("\u56fd"),D=k1(w.width,w.height);v&&(u.handleThumbs=[],u.handleLabels=[],u.handleLabelPoints=[],this._createHandle(l,y,0,h,D,p),this._createHandle(l,y,1,h,D,p)),this._createIndicator(l,y,h,D,p),a.add(y)},s.prototype._createHandle=function(a,l,u,h,p,v){var m=b.bind(this._dragHandle,this,u,!1),y=b.bind(this._dragHandle,this,u,!0),x=(0,Ce.GM)(a.get("handleSize"),h[0]),w=(0,si.th)(a.get("handleIcon"),-x/2,-x/2,x,x,null,!0),D=mg(this._orient);w.attr({cursor:D,draggable:!0,drift:m,ondragend:y,onmousemove:function(se){rl.sT(se.event)}}),w.x=h[0]/2,w.useStyle(a.getModel("handleStyle").getItemStyle()),w.setStyle({strokeNoScale:!0,strokeFirst:!0}),w.style.lineWidth*=2,w.ensureState("emphasis").style=a.getModel(["emphasis","handleStyle"]).getItemStyle(),(0,Wt.Nj)(w,!0),l.add(w);var L=new _t.ZP({cursor:D,draggable:!0,drift:m,onmousemove:function(se){rl.sT(se.event)},ondragend:y,style:(0,qt.Lr)(this.visualMapModel.textStyleModel,{x:0,y:0,text:""})});L.ensureState("blur").style={opacity:.1},L.stateTransition={duration:200},this.group.add(L);var N=[x,0],Z=this._shapes;Z.handleThumbs[u]=w,Z.handleLabelPoints[u]=N,Z.handleLabels[u]=L},s.prototype._createIndicator=function(a,l,u,h,p){var v=(0,Ce.GM)(a.get("indicatorSize"),u[0]),m=(0,si.th)(a.get("indicatorIcon"),-v/2,-v/2,v,v,null,!0);m.attr({cursor:"move",invisible:!0,silent:!0,x:u[0]/2});var y=a.getModel("indicatorStyle").getItemStyle();if(m instanceof be.ZP){var x=m.style;m.useStyle(b.extend({image:x.image,x:x.x,y:x.y,width:x.width,height:x.height},y))}else m.useStyle(y);l.add(m);var D=new _t.ZP({silent:!0,invisible:!0,style:(0,qt.Lr)(this.visualMapModel.textStyleModel,{x:0,y:0,text:""})});this.group.add(D);var I=[("horizontal"===p?h/2:6)+u[0]/2,0],L=this._shapes;L.indicator=m,L.indicatorLabel=D,L.indicatorLabelPoint=I,this._firstShowIndicator=!0},s.prototype._dragHandle=function(a,l,u,h){if(this._useHandle){if(this._dragging=!l,!l){var p=this._applyTransform([u,h],this._shapes.mainGroup,!0);this._updateInterval(a,p[1]),this._hideIndicator(),this._updateView()}l===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),l?!this._hovering&&this._clearHoverLinkToSeries():F1(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[a],!1)}},s.prototype._resetInterval=function(){var a=this.visualMapModel,l=this._dataInterval=a.getSelected(),u=a.getExtent(),h=[0,a.itemSize[1]];this._handleEnds=[vl(l[0],u,h,!0),vl(l[1],u,h,!0)]},s.prototype._updateInterval=function(a,l){var u=this.visualMapModel,h=this._handleEnds,p=[0,u.itemSize[1]];Kc(l=l||0,h,p,a,0);var v=u.getExtent();this._dataInterval=[vl(h[0],p,v,!0),vl(h[1],p,v,!0)]},s.prototype._updateView=function(a){var l=this.visualMapModel,u=l.getExtent(),h=this._shapes,p=[0,l.itemSize[1]],v=a?p:this._handleEnds,m=this._createBarVisual(this._dataInterval,u,v,"inRange"),y=this._createBarVisual(u,u,p,"outOfRange");h.inRange.setStyle({fill:m.barColor}).setShape("points",m.barPoints),h.outOfRange.setStyle({fill:y.barColor}).setShape("points",y.barPoints),this._updateHandle(v,m)},s.prototype._createBarVisual=function(a,l,u,h){var p={forceState:h,convertOpacityToAlpha:!0},v=this._makeColorGradient(a,p),m=[this.getControllerVisual(a[0],"symbolSize",p),this.getControllerVisual(a[1],"symbolSize",p)],y=this._createBarPoints(u,m);return{barColor:new Hf.Z(0,0,0,1,v),barPoints:y,handlesColor:[v[0].color,v[v.length-1].color]}},s.prototype._makeColorGradient=function(a,l){var h=[],p=(a[1]-a[0])/100;h.push({color:this.getControllerVisual(a[0],"color",l),offset:0});for(var v=1;v<100;v++){var m=a[0]+p*v;if(m>a[1])break;h.push({color:this.getControllerVisual(m,"color",l),offset:v/100})}return h.push({color:this.getControllerVisual(a[1],"color",l),offset:1}),h},s.prototype._createBarPoints=function(a,l){var u=this.visualMapModel.itemSize;return[[u[0]-l[0],a[0]],[u[0],a[0]],[u[0],a[1]],[u[0]-l[1],a[1]]]},s.prototype._createBarGroup=function(a){var l=this._orient,u=this.visualMapModel.get("inverse");return new Rn.Z("horizontal"!==l||u?"horizontal"===l&&u?{scaleX:"bottom"===a?-1:1,rotation:-Math.PI/2}:"vertical"!==l||u?{scaleX:"left"===a?1:-1}:{scaleX:"left"===a?1:-1,scaleY:-1}:{scaleX:"bottom"===a?1:-1,rotation:Math.PI/2})},s.prototype._updateHandle=function(a,l){if(this._useHandle){var u=this._shapes,h=this.visualMapModel,p=u.handleThumbs,v=u.handleLabels,m=h.itemSize,y=h.getExtent();lN([0,1],function(x){var w=p[x];w.setStyle("fill",l.handlesColor[x]),w.y=a[x];var D=vl(a[x],[0,m[1]],y,!0),I=this.getControllerVisual(D,"symbolSize");w.scaleX=w.scaleY=I/m[0],w.x=m[0]-I/2;var L=_n.applyTransform(u.handleLabelPoints[x],_n.getTransform(w,this.group));v[x].setStyle({x:L[0],y:L[1],text:h.formatValueText(this._dataInterval[x]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",u.mainGroup):"center"})},this)}},s.prototype._showIndicator=function(a,l,u,h){var p=this.visualMapModel,v=p.getExtent(),m=p.itemSize,y=[0,m[1]],x=this._shapes,w=x.indicator;if(w){w.attr("invisible",!1);var I=this.getControllerVisual(a,"color",{convertOpacityToAlpha:!0}),L=this.getControllerVisual(a,"symbolSize"),N=vl(a,v,y,!0),Z=m[0]-L/2,se={x:w.x,y:w.y};w.y=N,w.x=Z;var _e=_n.applyTransform(x.indicatorLabelPoint,_n.getTransform(w,this.group)),me=x.indicatorLabel;me.attr("invisible",!1);var De=this._applyTransform("left",x.mainGroup),Ie="horizontal"===this._orient;me.setStyle({text:(u||"")+p.formatValueText(l),verticalAlign:Ie?De:"middle",align:Ie?"center":De});var ke={x:Z,y:N,style:{fill:I}},Ue={style:{x:_e[0],y:_e[1]}};if(p.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var Ye={duration:100,easing:"cubicInOut",additive:!0};w.x=se.x,w.y=se.y,w.animateTo(ke,Ye),me.animateTo(Ue,Ye)}else w.attr(ke),me.attr(Ue);this._firstShowIndicator=!1;var Ke=this._shapes.handleLabels;if(Ke)for(var Je=0;Je<Ke.length;Je++)this._api.enterBlur(Ke[Je])}},s.prototype._enableHoverLinkToSeries=function(){var a=this;this._shapes.mainGroup.on("mousemove",function(l){if(a._hovering=!0,!a._dragging){var u=a.visualMapModel.itemSize,h=a._applyTransform([l.offsetX,l.offsetY],a._shapes.mainGroup,!0,!0);h[1]=O1(k1(0,h[1]),u[1]),a._doHoverLinkToSeries(h[1],0<=h[0]&&h[0]<=u[0])}}).on("mouseout",function(){a._hovering=!1,!a._dragging&&a._clearHoverLinkToSeries()})},s.prototype._enableHoverLinkFromSeries=function(){var a=this.api.getZr();this.visualMapModel.option.hoverLink?(a.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),a.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},s.prototype._doHoverLinkToSeries=function(a,l){var u=this.visualMapModel;if(u.option.hoverLink){var p=[0,u.itemSize[1]],v=u.getExtent();a=O1(k1(p[0],a),p[1]);var m=function hN(c,s,a){var l=6,u=c.get("hoverLinkDataSize");return u&&(l=vl(u,s,a,!0)/2),l}(u,v,p),y=[a-m,a+m],x=vl(a,p,v,!0),w=[vl(y[0],p,v,!0),vl(y[1],p,v,!0)];y[0]<p[0]&&(w[0]=-1/0),y[1]>p[1]&&(w[1]=1/0),l&&(w[0]===-1/0?this._showIndicator(x,w[1],"< ",m):w[1]===1/0?this._showIndicator(x,w[0],"> ",m):this._showIndicator(x,x,"\u2248 ",m));var D=this._hoverLinkDataIndices,I=[];(l||F1(u))&&(I=this._hoverLinkDataIndices=u.findTargetDataIndices(w));var L=xn.XI(D,I);this._dispatchHighDown("downplay",Zd(L[0],u)),this._dispatchHighDown("highlight",Zd(L[1],u))}},s.prototype._hoverLinkFromSeriesMouseOver=function(a){var l;if((0,L0.o)(a.target,function(m){var y=(0,Tr.A)(m);if(null!=y.dataIndex)return l=y,!0},!0),l){var u=this.ecModel.getSeriesByIndex(l.seriesIndex),h=this.visualMapModel;if(h.isTargetSeries(u)){var p=u.getData(l.dataType),v=p.getStore().get(h.getDataDimensionIndex(p),l.dataIndex);isNaN(v)||this._showIndicator(v,v)}}},s.prototype._hideIndicator=function(){var a=this._shapes;a.indicator&&a.indicator.attr("invisible",!0),a.indicatorLabel&&a.indicatorLabel.attr("invisible",!0);var l=this._shapes.handleLabels;if(l)for(var u=0;u<l.length;u++)this._api.leaveBlur(l[u])},s.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var a=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",Zd(a,this.visualMapModel)),a.length=0},s.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var a=this.api.getZr();a.off("mouseover",this._hoverLinkFromSeriesMouseOver),a.off("mouseout",this._hideIndicator)},s.prototype._applyTransform=function(a,l,u,h){var p=_n.getTransform(l,h?null:this.group);return b.isArray(a)?_n.applyTransform(a,p,u):_n.transformDirection(a,p,u)},s.prototype._dispatchHighDown=function(a,l){l&&l.length&&this.api.dispatchAction({type:a,batch:l})},s.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},s.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},s.type="visualMap.continuous",s}(SE);var fN={type:"selectDataRange",event:"dataRangeSelected",update:"update"},pN=function(c,s){s.eachComponent({mainType:"visualMap",query:c},function(a){a.setSelected(c.selected)})},B1=[{createOnAllSeries:!0,reset:function(c,s){var a=[];return s.eachComponent("visualMap",function(l){var u=c.pipelineContext;!l.isTargetSeries(c)||u&&u.large||a.push(function vz(c,s,a,l){var u={};return b.each(c,function(h){var p=no.prepareVisualTypes(s[h]);u[h]=p}),{progress:function(p,v){var m;function y(Pe){return(0,wc.Or)(v,w,Pe)}function x(Pe,Ie){(0,wc.LZ)(v,w,Pe,Ie)}null!=l&&(m=v.getDimensionIndex(l));for(var w,D=v.getStore();null!=(w=p.next());){var I=v.getRawDataItem(w);if(!I||!1!==I.visualMap)for(var L=null!=l?D.get(m,w):w,N=a(L),Z=s[N],se=u[N],_e=0,me=se.length;_e<me;_e++){var De=se[_e];Z[De]&&Z[De].applyVisual(L,y,x)}}}}}(l.stateList,l.targetVisuals,b.bind(l.getValueState,l),l.getDataDimensionIndex(c.getData())))}),a}},{createOnAllSeries:!0,reset:function(c,s){var a=c.getData(),l=[];s.eachComponent("visualMap",function(u){if(u.isTargetSeries(c)){var h=u.getVisualMeta(b.bind(DE,null,c,u))||{stops:[],outerColors:[]},p=u.getDataDimensionIndex(a);p>=0&&(h.dimension=p,l.push(h))}}),c.getData().setVisual("visualMeta",l)}}];function DE(c,s,a,l){for(var u=s.targetVisuals[l],h=no.prepareVisualTypes(u),p={color:(0,wc.UL)(c.getData(),"color")},v=0,m=h.length;v<m;v++){var y=h[v],x=u["opacity"===y?"__alphaForOpacity":y];x&&x.applyVisual(a,w,D)}return p.color;function w(I){return p[I]}function D(I,L){p[I]=L}}var ME=b.each;function V1(c){var s=c&&c.visualMap;b.isArray(s)||(s=s?[s]:[]),ME(s,function(a){if(a){rf(a,"splitList")&&!rf(a,"pieces")&&(a.pieces=a.splitList,delete a.splitList);var l=a.pieces;l&&b.isArray(l)&&ME(l,function(u){b.isObject(u)&&(rf(u,"start")&&!rf(u,"min")&&(u.min=u.start),rf(u,"end")&&!rf(u,"max")&&(u.max=u.end))})}})}function rf(c,s){return c&&c.hasOwnProperty&&c.hasOwnProperty(s)}var TE=!1;function EE(c){TE||(TE=!0,c.registerSubTypeDefaulter("visualMap",function(s){return s.categories||(s.pieces?s.pieces.length>0:s.splitNumber>0)&&!s.calculable?"piecewise":"continuous"}),c.registerAction(fN,pN),(0,b.each)(B1,function(s){c.registerVisual(c.PRIORITY.VISUAL.COMPONENT,s)}),c.registerPreprocessor(V1))}function Q_(c){c.registerComponentModel(sN),c.registerComponentView(_g),EE(c)}var gN=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a._pieceList=[],a}return(0,At.ZT)(s,c),s.prototype.optionUpdated=function(a,l){c.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var u=this._mode=this._determineMode();this._pieceList=[],vN[this._mode].call(this,this._pieceList),this._resetSelected(a,l);var h=this.option.categories;this.resetVisual(function(p,v){"categories"===u?(p.mappingMethod="category",p.categories=b.clone(h)):(p.dataExtent=this.getExtent(),p.mappingMethod="piecewise",p.pieceList=b.map(this._pieceList,function(m){return m=b.clone(m),"inRange"!==v&&(m.visual=null),m}))})},s.prototype.completeVisualOption=function(){var a=this.option,l={},u=no.listVisualTypes(),h=this.isCategory();function p(v,m,y){return v&&v[m]&&v[m].hasOwnProperty(y)}b.each(a.pieces,function(v){b.each(u,function(m){v.hasOwnProperty(m)&&(l[m]=1)})}),b.each(l,function(v,m){var y=!1;b.each(this.stateList,function(x){y=y||p(a,x,m)||p(a.target,x,m)},this),!y&&b.each(this.stateList,function(x){(a[x]||(a[x]={}))[m]=Zr.get(m,"inRange"===x?"active":"inactive",h)})},this),c.prototype.completeVisualOption.apply(this,arguments)},s.prototype._resetSelected=function(a,l){var u=this.option,h=this._pieceList,p=(l?u:a).selected||{};if(u.selected=p,b.each(h,function(m,y){var x=this.getSelectedMapKey(m);p.hasOwnProperty(x)||(p[x]=!0)},this),"single"===u.selectedMode){var v=!1;b.each(h,function(m,y){var x=this.getSelectedMapKey(m);p[x]&&(v?p[x]=!1:v=!0)},this)}},s.prototype.getItemSymbol=function(){return this.get("itemSymbol")},s.prototype.getSelectedMapKey=function(a){return"categories"===this._mode?a.value+"":a.index+""},s.prototype.getPieceList=function(){return this._pieceList},s.prototype._determineMode=function(){var a=this.option;return a.pieces&&a.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},s.prototype.setSelected=function(a){this.option.selected=b.clone(a)},s.prototype.getValueState=function(a){var l=no.findPieceIndex(a,this._pieceList);return null!=l&&this.option.selected[this.getSelectedMapKey(this._pieceList[l])]?"inRange":"outOfRange"},s.prototype.findTargetDataIndices=function(a){var l=[],u=this._pieceList;return this.eachTargetSeries(function(h){var p=[],v=h.getData();v.each(this.getDataDimensionIndex(v),function(m,y){no.findPieceIndex(m,u)===a&&p.push(y)},this),l.push({seriesId:h.id,dataIndex:p})},this),l},s.prototype.getRepresentValue=function(a){var l;if(this.isCategory())l=a.value;else if(null!=a.value)l=a.value;else{var u=a.interval||[];l=u[0]===-1/0&&u[1]===1/0?0:(u[0]+u[1])/2}return l},s.prototype.getVisualMeta=function(a){if(!this.isCategory()){var l=[],u=["",""],h=this,v=this._pieceList.slice();if(v.length){var m=v[0].interval[0];m!==-1/0&&v.unshift({interval:[-1/0,m]}),(m=v[v.length-1].interval[1])!==1/0&&v.push({interval:[m,1/0]})}else v.push({interval:[-1/0,1/0]});var y=-1/0;return b.each(v,function(x){var w=x.interval;w&&(w[0]>y&&p([y,w[0]],"outOfRange"),p(w.slice()),y=w[1])},this),{stops:l,outerColors:u}}function p(x,w){var D=h.getRepresentValue({interval:x});w||(w=h.getValueState(D));var I=a(D,w);x[0]===-1/0?u[0]=I:x[1]===1/0?u[1]=I:l.push({value:x[0],color:I},{value:x[1],color:I})}},s.type="visualMap.piecewise",s.defaultOption=(0,Zn.ZL)(X_.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),s}(X_),vN={splitNumber:function(c){var s=this.option,a=Math.min(s.precision,20),l=this.getExtent(),u=s.splitNumber;u=Math.max(parseInt(u,10),1),s.splitNumber=u;for(var h=(l[1]-l[0])/u;+h.toFixed(a)!==h&&a<5;)a++;s.precision=a,h=+h.toFixed(a),s.minOpen&&c.push({interval:[-1/0,l[0]],close:[0,0]});for(var p=0,v=l[0];p<u;v+=h,p++)c.push({interval:[v,p===u-1?l[1]:v+h],close:[1,1]});s.maxOpen&&c.push({interval:[l[1],1/0],close:[0,0]}),(0,It.nR)(c),b.each(c,function(y,x){y.index=x,y.text=this.formatValueText(y.interval)},this)},categories:function(c){var s=this.option;b.each(s.categories,function(a){c.push({text:this.formatValueText(a,!0),value:a})},this),AE(s,c)},pieces:function(c){var s=this.option;b.each(s.pieces,function(a,l){b.isObject(a)||(a={value:a});var u={text:"",index:l};if(null!=a.label&&(u.text=a.label),a.hasOwnProperty("value")){var h=u.value=a.value;u.interval=[h,h],u.close=[1,1]}else{for(var p=u.interval=[],v=u.close=[0,0],m=[1,0,1],y=[-1/0,1/0],x=[],w=0;w<2;w++){for(var D=[["gte","gt","min"],["lte","lt","max"]][w],I=0;I<3&&null==p[w];I++)p[w]=a[D[I]],v[w]=m[I],x[w]=2===I;null==p[w]&&(p[w]=y[w])}x[0]&&p[1]===1/0&&(v[0]=0),x[1]&&p[0]===-1/0&&(v[1]=0),p[0]===p[1]&&v[0]&&v[1]&&(u.value=p[0])}u.visual=no.retrieveVisuals(a),c.push(u)},this),AE(s,c),(0,It.nR)(c),b.each(c,function(a){var l=a.close;a.text=a.text||this.formatValueText(null!=a.value?a.value:a.interval,!1,[["<","\u2264"][l[1]],[">","\u2265"][l[0]]])},this)}};function AE(c,s){var a=c.inverse;("vertical"===c.orient?!a:a)&&s.reverse()}const z1=gN,IE=function(c){function s(){var a=null!==c&&c.apply(this,arguments)||this;return a.type=s.type,a}return(0,At.ZT)(s,c),s.prototype.doRender=function(){var a=this.group;a.removeAll();var l=this.visualMapModel,u=l.get("textGap"),h=l.textStyleModel,p=h.getFont(),v=h.getTextColor(),m=this._getItemAlign(),y=l.itemSize,x=this._getViewData(),w=x.endsText,D=b.retrieve(l.get("showLabel",!0),!w);w&&this._renderEndsText(a,w[0],y,D,m),b.each(x.viewPieceList,function(I){var L=I.piece,N=new Rn.Z;N.onclick=b.bind(this._onItemClick,this,L),this._enableHoverLink(N,I.indexInModelPieceList);var Z=l.getRepresentValue(L);if(this._createItemSymbol(N,Z,[0,0,y[0],y[1]]),D){var se=this.visualMapModel.getValueState(Z);N.add(new _t.ZP({style:{x:"right"===m?-u:y[0]+u,y:y[1]/2,text:L.text,verticalAlign:"middle",align:m,font:p,fill:v,opacity:"outOfRange"===se?.5:1}}))}a.add(N)},this),w&&this._renderEndsText(a,w[1],y,D,m),Br.BZ(l.get("orient"),a,l.get("itemGap")),this.renderBackground(a),this.positionGroup(a)},s.prototype._enableHoverLink=function(a,l){var u=this;a.on("mouseover",function(){return h("highlight")}).on("mouseout",function(){return h("downplay")});var h=function(p){var v=u.visualMapModel;v.option.hoverLink&&u.api.dispatchAction({type:p,batch:Zd(v.findTargetDataIndices(l),v)})}},s.prototype._getItemAlign=function(){var a=this.visualMapModel,l=a.option;if("vertical"===l.orient)return K_(a,this.api,a.itemSize);var u=l.align;return(!u||"auto"===u)&&(u="left"),u},s.prototype._renderEndsText=function(a,l,u,h,p){if(l){var v=new Rn.Z;v.add(new _t.ZP({style:(0,qt.Lr)(this.visualMapModel.textStyleModel,{x:h?"right"===p?u[0]:0:u[0]/2,y:u[1]/2,verticalAlign:"middle",align:h?p:"center",text:l})})),a.add(v)}},s.prototype._getViewData=function(){var a=this.visualMapModel,l=b.map(a.getPieceList(),function(v,m){return{piece:v,indexInModelPieceList:m}}),u=a.get("text"),h=a.get("orient"),p=a.get("inverse");return("horizontal"===h?p:!p)?l.reverse():u&&(u=u.slice().reverse()),{viewPieceList:l,endsText:u}},s.prototype._createItemSymbol=function(a,l,u){a.add((0,si.th)(this.getControllerVisual(l,"symbol"),u[0],u[1],u[2],u[3],this.getControllerVisual(l,"color")))},s.prototype._onItemClick=function(a){var l=this.visualMapModel,u=l.option,h=u.selectedMode;if(h){var p=b.clone(u.selected),v=l.getSelectedMapKey(a);"single"===h||!0===h?(p[v]=!0,b.each(p,function(m,y){p[y]=y===v})):p[v]=!p[v],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:p})}},s.type="visualMap.piecewise",s}(SE);function PE(c){c.registerComponentModel(z1),c.registerComponentView(IE),EE(c)}var mN={label:{enabled:!0},decal:{show:!1}},Zu=(0,xn.Yf)(),_N={};function RE(c,s){var a=c.getModel("aria");if(a.get("enabled")){var l=b.clone(mN);b.merge(l.label,c.getLocaleModel().get("aria"),!1),b.merge(a.option,l,!1),function u(){if(a.getModel("decal").get("show")){var w=b.createHashMap();c.eachSeries(function(D){if(!D.isColorBySeries()){var I=w.get(D.type);I||w.set(D.type,I={}),Zu(D).scope=I}}),c.eachRawSeries(function(D){if(!c.isSeriesFiltered(D))if(b.isFunction(D.enableAriaDecal))D.enableAriaDecal();else{var I=D.getData();if(D.isColorBySeries()){var _e=(0,Kv.i)(D.ecModel,D.name,_N,c.getSeriesCount()),me=I.getVisual("decal");I.setVisual("decal",De(me,_e))}else{var L=D.getRawData(),N={},Z=Zu(D).scope;I.each(function(Pe){var Ie=I.getRawIndex(Pe);N[Ie]=Pe});var se=L.count();L.each(function(Pe){var Ie=N[Pe],ke=L.getName(Pe)||Pe+"",Ue=(0,Kv.i)(D.ecModel,ke,Z,se),Ye=I.getItemVisual(Ie,"decal");I.setItemVisual(Ie,"decal",De(Ye,Ue))})}}function De(Pe,Ie){var ke=Pe?b.extend(b.extend({},Ie),Pe):Ie;return ke.dirty=!0,ke}})}}(),function h(){var y=c.getLocaleModel().get("aria"),x=a.getModel("label");if(x.option=b.defaults(x.option,y),x.get("enabled")){var w=s.getZr().dom;if(x.get("description"))return void w.setAttribute("aria-label",x.get("description"));var Z,D=c.getSeriesCount(),I=x.get(["data","maxCount"])||10,L=x.get(["series","maxCount"])||10,N=Math.min(D,L);if(!(D<1)){var se=function v(){var y=c.get("title");return y&&y.length&&(y=y[0]),y&&y.text}();if(se)Z=p(x.get(["general","withTitle"]),{title:se});else Z=x.get(["general","withoutTitle"]);var me=[];Z+=p(x.get(D>1?["series","multiple","prefix"]:["series","single","prefix"]),{seriesCount:D}),c.eachSeries(function(Ue,Ye){if(Ye<N){var Ke=void 0,ut=Ue.get("name")?"withName":"withoutName";Ke=p(Ke=x.get(D>1?["series","multiple",ut]:["series","single",ut]),{seriesId:Ue.seriesIndex,seriesName:Ue.get("name"),seriesType:m(Ue.subType)});var pt=Ue.getData();pt.count()>I?Ke+=p(x.get(["data","partialData"]),{displayCnt:I}):Ke+=x.get(["data","allData"]);for(var wt=x.get(["data","separator","middle"]),kt=x.get(["data","separator","end"]),en=[],Yt=0;Yt<pt.count();Yt++)if(Yt<I){var dn=pt.getName(Yt),Fn=pt.getValues(Yt),zn=x.get(["data",dn?"withName":"withoutName"]);en.push(p(zn,{name:dn,value:Fn.join(wt)}))}Ke+=en.join(wt)+kt,me.push(Ke)}});var Pe=x.getModel(["series","multiple","separator"]),Ie=Pe.get("middle"),ke=Pe.get("end");Z+=me.join(Ie)+ke,w.setAttribute("aria-label",Z)}}}()}function p(y,x){if(!b.isString(y))return y;var w=y;return b.each(x,function(D,I){w=w.replace(new RegExp("\\{\\s*"+I+"\\s*\\}","g"),D)}),w}function m(y){return c.getLocaleModel().get(["series","typeNames"])[y]||"\u81ea\u5b9a\u4e49\u56fe"}}function LE(c){if(c&&c.aria){var s=c.aria;null!=s.show&&(s.enabled=s.show),s.label=s.label||{},b.each(["description","general","series","data"],function(a){null!=s[a]&&(s.label[a]=s[a])})}}var iu={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},OE=function(){function c(s){null==(this._condVal=(0,b.isString)(s)?new RegExp(s):(0,b.isRegExp)(s)?s:null)&&(0,_a._y)("")}return c.prototype.evaluate=function(s){var a=typeof s;return(0,b.isString)(a)?this._condVal.test(s):!!(0,b.isNumber)(a)&&this._condVal.test(s+"")},c}(),bN=function(){function c(){}return c.prototype.evaluate=function(){return this.value},c}(),Hs=function(){function c(){}return c.prototype.evaluate=function(){for(var s=this.children,a=0;a<s.length;a++)if(!s[a].evaluate())return!1;return!0},c}(),xN=function(){function c(){}return c.prototype.evaluate=function(){for(var s=this.children,a=0;a<s.length;a++)if(s[a].evaluate())return!0;return!1},c}(),kE=function(){function c(){}return c.prototype.evaluate=function(){return!this.child.evaluate()},c}(),U1=function(){function c(){}return c.prototype.evaluate=function(){for(var s=!!this.valueParser,l=(0,this.getValue)(this.valueGetterParam),u=s?this.valueParser(l):null,h=0;h<this.subCondList.length;h++)if(!this.subCondList[h].evaluate(s?u:l))return!1;return!0},c}();function Yu(c,s){if(!0===c||!1===c){var a=new bN;return a.value=c,a}return G1(c)||(0,_a._y)(""),c.and?yg("and",c,s):c.or?yg("or",c,s):c.not?function NE(c,s){var a=c.not;G1(a)||(0,_a._y)("");var u=new kE;return u.child=Yu(a,s),u.child||(0,_a._y)(""),u}(c,s):function Fz(c,s){for(var l=s.prepareGetValue(c),u=[],h=(0,b.keys)(c),p=c.parser,v=p?(0,Wu.o2)(p):null,m=0;m<h.length;m++){var y=h[m];if("parser"!==y&&!s.valueGetterAttrMap.get(y)){var x=(0,b.hasOwn)(iu,y)?iu[y]:y,w=c[y],D=v?v(w):w,I=(0,Wu.tR)(x,D)||"reg"===x&&new OE(D);I||(0,_a._y)(""),u.push(I)}}u.length||(0,_a._y)("");var L=new U1;return L.valueGetterParam=l,L.valueParser=v,L.getValue=s.getValue,L.subCondList=u,L}(c,s)}function yg(c,s,a){var l=s[c];(0,b.isArray)(l)||(0,_a._y)(""),l.length||(0,_a._y)("");var h="and"===c?new Hs:new xN;return h.children=(0,b.map)(l,function(p){return Yu(p,a)}),h.children.length||(0,_a._y)(""),h}function G1(c){return(0,b.isObject)(c)&&!(0,b.isArrayLike)(c)}var CN=function(){function c(s,a){this._cond=Yu(s,a)}return c.prototype.evaluate=function(){return this._cond.evaluate()},c}(),wN={type:"echarts:filter",transform:function(c){for(var a,s=c.upstream,l=function W1(c,s){return new CN(c,s)}(c.config,{valueGetterAttrMap:(0,b.createHashMap)({dimension:!0}),prepareGetValue:function(v){var y=v.dimension;(0,b.hasOwn)(v,"dimension")||(0,_a._y)("");var x=s.getDimensionInfo(y);return x||(0,_a._y)(""),{dimIdx:x.index}},getValue:function(v){return s.retrieveValueFromItem(a,v.dimIdx)}}),u=[],h=0,p=s.count();h<p;h++)a=s.getRawDataItem(h),l.evaluate()&&u.push(a);return{data:u}}},Vl={type:"echarts:sort",transform:function(c){var s=c.upstream,l="",u=(0,xn.kF)(c.config);u.length||(0,_a._y)(l);var h=[];(0,b.each)(u,function(x){var w=x.dimension,D=x.order,I=x.parser,L=x.incomparable;null==w&&(0,_a._y)(l),"asc"!==D&&"desc"!==D&&(0,_a._y)(l),L&&"min"!==L&&"max"!==L&&(0,_a._y)(""),"asc"!==D&&"desc"!==D&&(0,_a._y)("");var se=s.getDimensionInfo(w);se||(0,_a._y)(l);var _e=I?(0,Wu.o2)(I):null;I&&!_e&&(0,_a._y)(l),h.push({dimIdx:se.index,parser:_e,comparator:new Wu.ID(D,L)})});var p=s.sourceFormat;p!==ID.XD&&p!==ID.qb&&(0,_a._y)(l);for(var v=[],m=0,y=s.count();m<y;m++)v.push(s.getRawDataItem(m));return v.sort(function(x,w){for(var D=0;D<h.length;D++){var I=h[D],L=s.retrieveValueFromItem(x,I.dimIdx),N=s.retrieveValueFromItem(w,I.dimIdx);I.parser&&(L=I.parser(L),N=I.parser(N));var Z=I.comparator.evaluate(L,N);if(0!==Z)return Z}return 0}),{data:v}}},DN=H(4664),Dc=fe.Z.CMD;function af(c,s){return Math.abs(c-s)<1e-5}function j1(c){var u,pt,yt,wt,kt,en,Yt,dn,Fn,zn,dr,br,Fr,Ci,or,wi,mi,Bi,s=c.data,a=c.len(),l=[],h=0,p=0,v=0,m=0;function y(pt,yt){u&&u.length>2&&l.push(u),u=[pt,yt]}function x(pt,yt,wt,kt){af(pt,wt)&&af(yt,kt)||u.push(pt,yt,wt,kt,wt,kt)}for(var D,I,L,N,Z=0;Z<a;){var se=s[Z++],_e=1===Z;switch(_e&&(v=h=s[Z],m=p=s[Z+1],(se===Dc.L||se===Dc.C||se===Dc.Q)&&(u=[v,m])),se){case Dc.M:h=v=s[Z++],p=m=s[Z++],y(v,m);break;case Dc.L:x(h,p,D=s[Z++],I=s[Z++]),h=D,p=I;break;case Dc.C:u.push(s[Z++],s[Z++],s[Z++],s[Z++],h=s[Z++],p=s[Z++]);break;case Dc.Q:D=s[Z++],I=s[Z++],L=s[Z++],N=s[Z++],u.push(h+2/3*(D-h),p+2/3*(I-p),L+2/3*(D-L),N+2/3*(I-N),L,N),h=L,p=N;break;case Dc.A:var me=s[Z++],De=s[Z++],Pe=s[Z++],Ie=s[Z++],ke=s[Z++],Ue=s[Z++]+ke;Z+=1;var Ye=!s[Z++];D=Math.cos(ke)*Pe+me,I=Math.sin(ke)*Ie+De,_e?y(v=D,m=I):x(h,p,D,I),h=Math.cos(Ue)*Pe+me,p=Math.sin(Ue)*Ie+De;for(var Ke=(Ye?-1:1)*Math.PI/2,Je=ke;Ye?Je>Ue:Je<Ue;Je+=Ke){pt=Je,yt=Ye?Math.max(Je+Ke,Ue):Math.min(Je+Ke,Ue),wt=me,kt=De,en=Pe,Yt=Ie,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,dn=Math.abs(yt-pt),Fn=4*Math.tan(dn/4)/3,zn=yt<pt?-1:1,dr=Math.cos(pt),br=Math.sin(pt),Fr=Math.cos(yt),Ci=Math.sin(yt),u.push(dr*en+wt-(mi=en*Fn*zn)*br,br*Yt+kt+(Bi=Yt*Fn*zn)*dr,(or=Fr*en+wt)+mi*Ci,(wi=Ci*Yt+kt)-Bi*Fr,or,wi)}break;case Dc.R:v=h=s[Z++],m=p=s[Z++],D=v+s[Z++],I=m+s[Z++],y(D,m),x(D,m,D,I),x(D,I,v,I),x(v,I,v,m),x(v,m,D,m);break;case Dc.Z:u&&x(h,p,v,m),h=v,p=m}}return u&&u.length>2&&l.push(u),l}function Z1(c,s,a,l,u,h,p,v,m,y){if(af(c,a)&&af(s,l)&&af(u,p)&&af(h,v))m.push(p,v);else{var x=2/y,w=x*x,D=p-c,I=v-s,L=Math.sqrt(D*D+I*I);D/=L,I/=L;var N=a-c,Z=l-s,se=u-p,_e=h-v,me=N*N+Z*Z,De=se*se+_e*_e;if(me<w&&De<w)m.push(p,v);else{var Pe=D*N+I*Z,Ie=-D*se-I*_e;if(me-Pe*Pe<w&&Pe>=0&&De-Ie*Ie<w&&Ie>=0)m.push(p,v);else{var Ye=[],Ke=[];(0,ws.Vz)(c,a,u,p,.5,Ye),(0,ws.Vz)(s,l,h,v,.5,Ke),Z1(Ye[0],Ke[0],Ye[1],Ke[1],Ye[2],Ke[2],Ye[3],Ke[3],m,y),Z1(Ye[4],Ke[4],Ye[5],Ke[5],Ye[6],Ke[6],Ye[7],Ke[7],m,y)}}}}function FE(c,s,a){var h=Math.abs(c[s]/c[1-s]),p=Math.ceil(Math.sqrt(h*a)),v=Math.floor(a/p);0===v&&(v=1,p=a);for(var m=[],y=0;y<p;y++)m.push(v);var w=a-p*v;if(w>0)for(y=0;y<w;y++)m[y%p]+=1;return m}function BE(c,s,a){for(var l=c.r0,u=c.r,h=c.startAngle,v=Math.abs(c.endAngle-h),m=v*u,y=u-l,x=m>Math.abs(y),w=FE([m,y],x?0:1,s),D=(x?v:y)/w.length,I=0;I<w.length;I++)for(var L=(x?y:v)/w[I],N=0;N<w[I];N++){var Z={};x?(Z.startAngle=h+D*I,Z.endAngle=h+D*(I+1),Z.r0=l+L*N,Z.r=l+L*(N+1)):(Z.startAngle=h+L*N,Z.endAngle=h+L*(N+1),Z.r0=l+D*I,Z.r=l+D*(I+1)),Z.clockwise=c.clockwise,Z.cx=c.cx,Z.cy=c.cy,a.push(Z)}}function VE(c,s,a,l){return c*l-a*s}function EN(c,s,a,l,u,h,p,v){var m=a-c,y=l-s,x=p-u,w=v-h,D=VE(x,w,m,y);if(Math.abs(D)<1e-6)return null;var N=VE(c-u,s-h,x,w)/D;return N<0||N>1?null:new na.Z(N*m+c,N*y+s)}function AN(c,s,a){var l=new na.Z;na.Z.sub(l,a,s),l.normalize();var u=new na.Z;return na.Z.sub(u,c,s),u.dot(l)}function sf(c,s){var a=c[c.length-1];a&&a[0]===s[0]&&a[1]===s[1]||c.push(s)}function zE(c){var s=c.points,a=[],l=[];(0,Zc.zk)(s,a,l);var u=new yr.Z(a[0],a[1],l[0]-a[0],l[1]-a[1]),h=u.width,p=u.height,v=u.x,m=u.y,y=new na.Z,x=new na.Z;return h>p?(y.x=x.x=v+h/2,y.y=m,x.y=m+p):(y.y=x.y=m+p/2,y.x=v,x.x=v+h),function IN(c,s,a){for(var l=c.length,u=[],h=0;h<l;h++){var p=c[h],v=c[(h+1)%l],m=EN(p[0],p[1],v[0],v[1],s.x,s.y,a.x,a.y);m&&u.push({projPt:AN(m,s,a),pt:m,idx:h})}if(u.length<2)return[{points:c},{points:c}];u.sort(function(Z,se){return Z.projPt-se.projPt});var y=u[0],x=u[u.length-1];if(x.idx<y.idx){var w=y;y=x,x=w}var D=[y.pt.x,y.pt.y],I=[x.pt.x,x.pt.y],L=[D],N=[I];for(h=y.idx+1;h<=x.idx;h++)sf(L,c[h].slice());for(sf(L,I),sf(L,D),h=x.idx+1;h<=y.idx+l;h++)sf(N,c[h%l].slice());return sf(N,D),sf(N,I),[{points:L},{points:N}]}(s,y,x)}function q_(c,s,a,l){if(1===a)l.push(s);else{var u=Math.floor(a/2),h=c(s);q_(c,h[0],u,l),q_(c,h[1],a-u,l)}return l}function PN(c,s){s.setStyle(c.style),s.z=c.z,s.z2=c.z2,s.zlevel=c.zlevel}function Y1(c,s){var a=c.length,l=s.length;if(a===l)return[c,s];for(var u=[],h=[],p=a<l?c:s,v=Math.min(a,l),m=Math.abs(l-a)/6,x=Math.ceil(m/((v-2)/6))+1,w=[p[0],p[1]],D=m,I=2;I<v;){var L=p[I-2],N=p[I-1],Z=p[I++],se=p[I++],_e=p[I++],me=p[I++],De=p[I++],Pe=p[I++];if(D<=0)w.push(Z,se,_e,me,De,Pe);else{for(var Ie=Math.min(D,x-1)+1,ke=1;ke<=Ie;ke++){var Ue=ke/Ie;(0,ws.Vz)(L,Z,_e,De,Ue,u),(0,ws.Vz)(N,se,me,Pe,Ue,h),w.push(u[1],h[1],u[2],h[2],L=u[3],N=h[3]),Z=u[5],se=h[5],_e=u[6],me=h[6]}D-=Ie-1}}return p===c?[w,s]:[c,w]}function J_(c,s){for(var a=c.length,l=c[a-2],u=c[a-1],h=[],p=0;p<s.length;)h[p++]=l,h[p++]=u;return h}function kN(c){for(var s=0,a=0,l=0,u=c.length,h=0,p=u-2;h<u;p=h,h+=2){var v=c[p],m=c[p+1],y=c[h],x=c[h+1],w=v*x-y*m;s+=w,a+=(v+y)*w,l+=(m+x)*w}return 0===s?[c[0]||0,c[1]||0]:[a/s/3,l/s/3,s]}function zl(c,s,a,l){for(var u=(c.length-2)/6,h=1/0,p=0,v=c.length,m=v-2,y=0;y<u;y++){for(var x=6*y,w=0,D=0;D<v;D+=2){var I=0===D?x:(x+D-2)%m+2,_e=s[D]-l[0]-(c[I]-a[0]),me=s[D+1]-l[1]-(c[I+1]-a[1]);w+=_e*_e+me*me}w<h&&(h=w,p=y)}return p}function UE(c){for(var s=[],a=c.length,l=0;l<a;l+=2)s[l]=c[a-l-2],s[l+1]=c[a-l-1];return s}function ey(c){return c.__isCombineMorphing}var GE="__mOriginal_";function X1(c,s,a){var l=GE+s,u=c[l]||c[s];c[l]||(c[l]=c[s]);var h=a.replace,p=a.after,v=a.before;c[s]=function(){var y,m=arguments;return v&&v.apply(this,m),y=h?h.apply(this,m):u.apply(this,m),p&&p.apply(this,m),y}}function ty(c,s){var a=GE+s;c[a]&&(c[s]=c[a],c[a]=null)}function FN(c,s){for(var a=0;a<c.length;a++)for(var l=c[a],u=0;u<l.length;){var h=l[u],p=l[u+1];l[u++]=s[0]*h+s[2]*p+s[4],l[u++]=s[1]*h+s[3]*p+s[5]}}function BN(c,s){var a=c.getUpdatedPathProxy(),l=s.getUpdatedPathProxy(),u=function ON(c,s){for(var a,l,u,h=[],p=[],v=0;v<Math.max(c.length,s.length);v++){var m=c[v],y=s[v],x=void 0,w=void 0;m?y?(l=x=(a=Y1(m,y))[0],u=w=a[1]):(w=J_(u||m,m),x=m):(x=J_(l||y,y),w=y),h.push(x),p.push(w)}return[h,p]}(j1(a),j1(l)),h=u[0],p=u[1],v=c.getComputedTransform(),m=s.getComputedTransform();v&&FN(h,v),m&&FN(p,m),X1(s,"updateTransform",{replace:function y(){this.transform=null}}),s.transform=null;var x=function NN(c,s,a,l){for(var h,u=[],p=0;p<c.length;p++){var v=c[p],m=s[p],y=kN(v),x=kN(m);null==h&&(h=y[2]<0!=x[2]<0);var w=[],D=[],I=0,L=1/0,N=[],Z=v.length;h&&(v=UE(v));for(var se=6*zl(v,m,y,x),_e=Z-2,me=0;me<_e;me+=2){var De=(se+me)%_e+2;w[me+2]=v[De]-y[0],w[me+3]=v[De+1]-y[1]}if(w[0]=v[se]-y[0],w[1]=v[se+1]-y[1],a>0)for(var Pe=l/a,Ie=-l/2;Ie<=l/2;Ie+=Pe){var ke=Math.sin(Ie),Ue=Math.cos(Ie),Ye=0;for(me=0;me<v.length;me+=2){var Ke=w[me],Je=w[me+1],ut=m[me]-x[0],pt=m[me+1]-x[1],yt=ut*Ue-pt*ke,wt=ut*ke+pt*Ue;N[me]=yt,N[me+1]=wt;var kt=yt-Ke,en=wt-Je;Ye+=kt*kt+en*en}if(Ye<L){L=Ye,I=Ie;for(var Yt=0;Yt<N.length;Yt++)D[Yt]=N[Yt]}}else for(var dn=0;dn<Z;dn+=2)D[dn]=m[dn]-x[0],D[dn+1]=m[dn+1]-x[1];u.push({from:w,to:D,fromCp:y,toCp:x,rotation:-I})}return u}(h,p,10,Math.PI),w=[];X1(s,"buildPath",{replace:function(D){for(var I=s.__morphT,L=1-I,N=[],Z=0;Z<x.length;Z++){var se=x[Z],_e=se.from,me=se.to,De=se.rotation*I,Pe=se.fromCp,Ie=se.toCp,ke=Math.sin(De),Ue=Math.cos(De);(0,Jn.lerp)(N,Pe,Ie,I);for(var Ye=0;Ye<_e.length;Ye+=2){var yt=_e[Ye]*L+(ut=me[Ye])*I,wt=_e[Ye+1]*L+(pt=me[Ye+1])*I;w[Ye]=yt*Ue-wt*ke+N[0],w[Ye+1]=yt*ke+wt*Ue+N[1]}var kt=w[0],en=w[1];for(D.moveTo(kt,en),Ye=2;Ye<_e.length;){var ut=w[Ye++],pt=w[Ye++],Yt=w[Ye++],dn=w[Ye++],Fn=w[Ye++],zn=w[Ye++];kt===ut&&en===pt&&Yt===Fn&&dn===zn?D.lineTo(Fn,zn):D.bezierCurveTo(ut,pt,Yt,dn,Fn,zn),kt=Fn,en=zn}}}})}function $1(c,s,a){if(!c||!s)return s;var l=a.done,u=a.during;return BN(c,s),s.__morphT=0,s.animateTo({__morphT:1},(0,b.defaults)({during:function(p){s.dirtyShape(),u&&u(p)},done:function(){(function h(){ty(s,"buildPath"),ty(s,"updateTransform"),s.__morphT=-1,s.createPathProxy(),s.dirtyShape()})(),l&&l()}},a)),s}function VN(c,s,a,l,u,h){c=u===a?0:Math.round(32767*(c-a)/(u-a)),s=h===l?0:Math.round(32767*(s-l)/(h-l));for(var m,v=0,y=32768;y>0;y/=2){var x=0,w=0;(c&y)>0&&(x=1),(s&y)>0&&(w=1),v+=y*y*(3*x^w),0===w&&(1===x&&(c=y-1-c,s=y-1-s),m=c,c=s,s=m)}return v}function bg(c){var s=1/0,a=1/0,l=-1/0,u=-1/0,h=(0,b.map)(c,function(v){var m=v.getBoundingRect(),y=v.getComputedTransform(),x=m.x+m.width/2+(y?y[4]:0),w=m.y+m.height/2+(y?y[5]:0);return s=Math.min(x,s),a=Math.min(w,a),l=Math.max(x,l),u=Math.max(w,u),[x,w]});return(0,b.map)(h,function(v,m){return{cp:v,z:VN(v[0],v[1],s,a,l,u),path:c[m]}}).sort(function(v,m){return v.z-m.z}).map(function(v){return v.path})}function WE(c){return function LN(c,s){var u,a=[],l=c.shape;switch(c.type){case"rect":(function TN(c,s,a){for(var l=c.width,u=c.height,h=l>u,p=FE([l,u],h?0:1,s),v=h?"width":"height",m=h?"height":"width",y=h?"x":"y",x=h?"y":"x",w=c[v]/p.length,D=0;D<p.length;D++)for(var I=c[m]/p[D],L=0;L<p[D];L++){var N={};N[y]=D*w,N[x]=L*I,N[v]=w,N[m]=I,N.x+=c.x,N.y+=c.y,a.push(N)}})(l,s,a),u=Mi.Z;break;case"sector":BE(l,s,a),u=yn.C;break;case"circle":BE({r0:0,r:l.r,startAngle:0,endAngle:2*Math.PI,cx:l.cx,cy:l.cy},s,a),u=yn.C;break;default:var h=c.getComputedTransform(),p=h?Math.sqrt(Math.max(h[0]*h[0]+h[1]*h[1],h[2]*h[2]+h[3]*h[3])):1,v=(0,b.map)(function MN(c,s){var a=j1(c),l=[];s=s||1;for(var u=0;u<a.length;u++){var h=a[u],p=[],v=h[0],m=h[1];p.push(v,m);for(var y=2;y<h.length;){var x=h[y++],w=h[y++],D=h[y++],I=h[y++],L=h[y++],N=h[y++];Z1(v,m,x,w,D,I,L,N,p,s),v=L,m=N}l.push(p)}return l}(c.getUpdatedPathProxy(),p),function(se){return function RN(c){for(var s=[],a=0;a<c.length;)s.push([c[a++],c[a++]]);return s}(se)}),m=v.length;if(0===m)q_(zE,{points:v[0]},s,a);else if(m===s)for(var y=0;y<m;y++)a.push({points:v[y]});else{var x=0,w=(0,b.map)(v,function(se){var _e=[],me=[];(0,Zc.zk)(se,_e,me);var De=(me[1]-_e[1])*(me[0]-_e[0]);return x+=De,{poly:se,area:De}});w.sort(function(se,_e){return _e.area-se.area});var D=s;for(y=0;y<m;y++){var I=w[y];if(D<=0)break;var L=y===m-1?D:Math.ceil(I.area/x*s);L<0||(q_(zE,{points:I.poly},L,a),D-=L)}}u=nl.Z}if(!u)return function HE(c,s){for(var a=[],l=0;l<s;l++)a.push((0,gd.U5)(c));return a}(c,s);var N=[];for(y=0;y<a.length;y++){var Z=new u;Z.setShape(a[y]),PN(c,Z),N.push(Z)}return N}(c.path,c.count)}function Oo(c){return(0,b.isArray)(c[0])}function HN(c,s){for(var a=[],l=c.length,u=0;u<l;u++)a.push({one:c[u],many:[]});for(u=0;u<s.length;u++){var h=s[u].length,p=void 0;for(p=0;p<h;p++)a[p%l].many.push(s[u][p])}var v=0;for(u=l-1;u>=0;u--)if(!a[u].many.length){var m=a[v].many;if(m.length<=1){if(!v)return a;v=0}h=m.length;var y=Math.ceil(h/2);a[u].many=m.slice(y,h),a[v].many=m.slice(0,y),v++}return a}var K1={clone:function(c){for(var s=[],a=1-Math.pow(1-c.path.style.opacity,1/c.count),l=0;l<c.count;l++){var u=(0,gd.U5)(c.path);u.setStyle("opacity",a),s.push(u)}return s},split:null};function ZE(c,s,a,l,u,h){if(c.length&&s.length){var p=(0,Sn.ke)("update",l,u);if(p&&p.duration>0){var y,x,v=l.getModel("universalTransition").get("delay"),m=Object.assign({setToFinal:!0},p);Oo(c)&&(y=c,x=s),Oo(s)&&(y=s,x=c);for(var D=y?y===c:c.length>s.length,I=y?HN(x,y):HN(D?s:c,[D?c:s]),L=0,N=0;N<I.length;N++)L+=I[N].many.length;var Z=0;for(N=0;N<I.length;N++)w(I[N],D,Z,L),Z+=I[N].many.length}}function w(se,_e,me,De,Pe){var Ie=se.many,ke=se.one;if(1!==Ie.length||Pe)for(var Je=(0,b.defaults)({dividePath:K1[a],individualDelay:v&&function(en,Yt,dn,Fn){return v(en+me,De)}},m),ut=_e?function zN(c,s,a){var l=[];!function u(Pe){for(var Ie=0;Ie<Pe.length;Ie++){var ke=Pe[Ie];ey(ke)?u(ke.childrenRef()):ke instanceof ge.ZP&&l.push(ke)}}(c);var h=l.length;if(!h)return{fromIndividuals:[],toIndividuals:[],count:0};var v=(a.dividePath||WE)({path:s,count:h});if(v.length!==h)return console.error("Invalid morphing: unmatched splitted path"),{fromIndividuals:[],toIndividuals:[],count:0};l=bg(l),v=bg(v);for(var m=a.done,y=a.during,x=a.individualDelay,w=new xe.ZP,D=0;D<h;D++){var I=l[D],L=v[D];L.parent=s,L.copyTransform(w),x||BN(I,L)}function N(Pe){for(var Ie=0;Ie<v.length;Ie++)v[Ie].addSelfToZr(Pe)}function Z(){s.__isCombineMorphing=!1,s.__morphT=-1,s.childrenRef=null,ty(s,"addSelfToZr"),ty(s,"removeSelfFromZr")}s.__isCombineMorphing=!0,s.childrenRef=function(){return v},X1(s,"addSelfToZr",{after:function(Pe){N(Pe)}}),X1(s,"removeSelfFromZr",{after:function(Pe){for(var Ie=0;Ie<v.length;Ie++)v[Ie].removeSelfFromZr(Pe)}});var se=v.length;if(x){var _e=se,me=function(){0==--_e&&(Z(),m&&m())};for(D=0;D<se;D++){var De=x?(0,b.defaults)({delay:(a.delay||0)+x(D,se,l[D],v[D]),done:me},a):a;$1(l[D],v[D],De)}}else s.__morphT=0,s.animateTo({__morphT:1},(0,b.defaults)({during:function(Pe){for(var Ie=0;Ie<se;Ie++){var ke=v[Ie];ke.__morphT=s.__morphT,ke.dirtyShape()}y&&y(Pe)},done:function(){Z();for(var Pe=0;Pe<c.length;Pe++)ty(c[Pe],"updateTransform");m&&m()}},a));return s.__zr&&N(s.__zr),{fromIndividuals:l,toIndividuals:v,count:se}}(Ie,ke,Je):function Vz(c,s,a){var l=s.length,u=[],h=a.dividePath||WE;if(ey(c)){!function p(I){for(var L=0;L<I.length;L++){var N=I[L];ey(N)?p(N.childrenRef()):N instanceof ge.ZP&&u.push(N)}}(c.childrenRef());var v=u.length;if(v<l)for(var m=0,y=v;y<l;y++)u.push((0,gd.U5)(u[m++%v]));u.length=l}else{u=h({path:c,count:l});var x=c.getComputedTransform();for(y=0;y<u.length;y++)u[y].setLocalTransform(x);if(u.length!==l)return console.error("Invalid morphing: unmatched splitted path"),{fromIndividuals:[],toIndividuals:[],count:0}}u=bg(u),s=bg(s);var w=a.individualDelay;for(y=0;y<l;y++){var D=w?(0,b.defaults)({delay:(a.delay||0)+w(y,l,u[y],s[y])},a):a;$1(u[y],s[y],D)}return{fromIndividuals:u,toIndividuals:s,count:s.length}}(ke,Ie,Je),pt=ut.fromIndividuals,yt=ut.toIndividuals,wt=pt.length,kt=0;kt<wt;kt++)Ke=v?(0,b.defaults)({delay:v(kt,wt)},m):m,h(pt[kt],yt[kt],_e?Ie[kt]:se.one,_e?se.one:Ie[kt],Ke);else{var Ke,Ue=_e?Ie[0]:ke,Ye=_e?ke:Ie[0];ey(Ue)?w({many:[Ue],one:Ye},!0,me,De,!0):($1(Ue,Ye,Ke=v?(0,b.defaults)({delay:v(me,De)},m):m),h(Ue,Ye,Ue,Ye,Ke))}}}function Yd(c){if(!c)return[];if((0,b.isArray)(c)){for(var s=[],a=0;a<c.length;a++)s.push(Yd(c[a]));return s}var l=[];return c.traverse(function(u){u instanceof ge.ZP&&!u.disableMorphing&&!u.invisible&&!u.ignore&&l.push(u)}),l}var UN=(0,xn.Yf)();function GN(c){var s=[];return(0,b.each)(c,function(a){var l=a.data;if(!(l.count()>1e4))for(var u=l.getIndices(),h=function zz(c){for(var s=c.dimensions,a=0;a<s.length;a++){var l=c.getDimensionInfo(s[a]);if(l&&0===l.otherDims.itemGroupId)return s[a]}}(l),p=0;p<u.length;p++)s.push({data:l,dim:a.dim||h,divide:a.divide,dataIndex:p})}),s}function XE(c,s,a){c.traverse(function(l){l instanceof ge.ZP&&(0,Sn.KZ)(l,{style:{opacity:0}},s,{dataIndex:a,isFrom:!0})})}function Q1(c){if(c.parent){var s=c.getComputedTransform();c.setLocalTransform(s),c.parent.remove(c)}}function lf(c){c.stopAnimation(),c.isGroup&&c.traverse(function(s){s.stopAnimation()})}function $E(c,s,a){var l=GN(c),u=GN(s);function h(se,_e,me,De,Pe){(me||se)&&_e.animateFrom({style:me&&me!==se?(0,b.extend)((0,b.extend)({},me.style),se.style):se.style},Pe)}function p(se){for(var _e=0;_e<se.length;_e++)if(se[_e].dim)return se[_e].dim}var v=p(l),m=p(u),y=!1;function x(se,_e){return function(me){var De=me.data,Pe=me.dataIndex;if(_e)return De.getId(Pe);var Ie=De.hostModel&&De.hostModel.get("dataGroupId"),ke=se?v||m:m||v,Ue=ke&&De.getDimensionInfo(ke),Ye=Ue&&Ue.ordinalMeta;if(Ue){var Ke=De.get(Ue.name,Pe);return Ye&&Ye.categories[Ke]||Ke+""}var Je=De.getRawDataItem(Pe);return Je&&Je.groupId?Je.groupId+"":Ie||De.getId(Pe)}}var w=function ny(c,s){var a=c.length;if(a!==s.length)return!1;for(var l=0;l<a;l++){var u=c[l],h=s[l];if(u.data.getId(u.dataIndex)!==h.data.getId(h.dataIndex))return!1}return!0}(l,u),D={};if(!w)for(var I=0;I<u.length;I++){var L=u[I],N=L.data.getItemGraphicEl(L.dataIndex);N&&(D[N.id]=!0)}function Z(se,_e){var me=l[_e],De=u[se],Pe=De.data.hostModel,Ie=me.data.getItemGraphicEl(me.dataIndex),ke=De.data.getItemGraphicEl(De.dataIndex);Ie!==ke?Ie&&D[Ie.id]||ke&&(lf(ke),Ie?(lf(Ie),Q1(Ie),y=!0,ZE(Yd(Ie),Yd(ke),De.divide,Pe,se,h)):XE(ke,Pe,se)):ke&&function WN(c,s,a){var l=(0,Sn.ke)("update",a,s);l&&c.traverse(function(u){if(u instanceof Du.ZP){var h=(0,Sn._W)(u);h&&u.animateFrom({style:h},l)}})}(ke,De.dataIndex,Pe)}new dc.Z(l,u,x(!0,w),x(!1,w),null,"multiple").update(Z).updateManyToOne(function(se,_e){var me=u[se],De=me.data,Pe=De.hostModel,Ie=De.getItemGraphicEl(me.dataIndex),ke=(0,b.filter)((0,b.map)(_e,function(Ue){return l[Ue].data.getItemGraphicEl(l[Ue].dataIndex)}),function(Ue){return Ue&&Ue!==Ie&&!D[Ue.id]});Ie&&(lf(Ie),ke.length?((0,b.each)(ke,function(Ue){lf(Ue),Q1(Ue)}),y=!0,ZE(Yd(ke),Yd(Ie),me.divide,Pe,se,h)):XE(Ie,Pe,me.dataIndex))}).updateOneToMany(function(se,_e){var me=l[_e],De=me.data.getItemGraphicEl(me.dataIndex);if(!De||!D[De.id]){var Pe=(0,b.filter)((0,b.map)(se,function(ke){return u[ke].data.getItemGraphicEl(u[ke].dataIndex)}),function(ke){return ke&&ke!==De}),Ie=u[se[0]].data.hostModel;Pe.length&&((0,b.each)(Pe,function(ke){return lf(ke)}),De?(lf(De),Q1(De),y=!0,ZE(Yd(De),Yd(Pe),me.divide,Ie,se[0],h)):(0,b.each)(Pe,function(ke){return XE(ke,Ie,se[0])}))}}).updateManyToMany(function(se,_e){new dc.Z(_e,se,function(me){return l[me].data.getId(l[me].dataIndex)},function(me){return u[me].data.getId(u[me].dataIndex)}).update(function(me,De){Z(se[me],_e[De])}).execute()}).execute(),y&&(0,b.each)(s,function(se){var me=se.data.hostModel,De=me&&a.getViewOfSeriesModel(me),Pe=(0,Sn.ke)("update",me,0);De&&me.isAnimationEnabled()&&Pe&&Pe.duration>0&&De.group.traverse(function(Ie){Ie instanceof ge.ZP&&!Ie.animators.length&&Ie.animateFrom({style:{opacity:0}},Pe)})})}function KE(c){return c.getModel("universalTransition").get("seriesKey")||c.id}function jN(c){return(0,b.isArray)(c)?c.sort().join(","):c}function Xu(c){if(c.hostModel)return c.hostModel.getModel("universalTransition").get("divideShape")}function QE(c,s){for(var a=0;a<c.length;a++)if(null!=s.seriesIndex&&s.seriesIndex===c[a].seriesIndex||null!=s.seriesId&&s.seriesId===c[a].id)return a}var Gz=H(6840);(0,ue.D)([le.N]),(0,ue.D)([function n0(c){c.registerPainter("svg",t0)}]),(0,ue.D)([function mu(c){c.registerChartView(jf),c.registerSeriesModel(Bf),c.registerLayout(ni("line",!0)),c.registerVisual({seriesType:"line",reset:function(s){var a=s.getData(),l=s.getModel("lineStyle").getLineStyle();l&&!l.stroke&&(l.stroke=a.getVisual("style").fill),a.setVisual("legendLineStyle",l)}}),c.registerProcessor(c.PRIORITY.PROCESSOR.STATISTIC,nc("line"))},function Ui(c){c.registerChartView(Hc),c.registerSeriesModel(Zf),c.registerLayout(c.PRIORITY.VISUAL.LAYOUT,b.curry(Ho.bK,"bar")),c.registerLayout(c.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,(0,Ho.Bk)("bar")),c.registerProcessor(c.PRIORITY.PROCESSOR.STATISTIC,nc("bar")),c.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(s,a){a.eachComponent({mainType:s.componentType||"series",query:s},function(u){s.sortInfo&&u.axis.setCategorySortInfo(s.sortInfo)})})},function vr(c){c.registerChartView(En),c.registerSeriesModel(Bn),(0,xv.y)("pie",c.registerAction),c.registerLayout((0,b.curry)(Uc,"pie")),c.registerProcessor(Ma("pie")),c.registerProcessor(function kn(c){return{seriesType:c,reset:function(s,a){var l=s.getData();l.filterSelf(function(u){var h=l.mapDimension("value"),p=l.get(h,u);return!((0,b.isNumber)(p)&&!isNaN(p)&&p<0)})}}}("pie"))},function Iv(c){(0,ue.D)(kw),c.registerSeriesModel(_r),c.registerChartView(os),c.registerLayout(ni("scatter"))},function x0(c){(0,ue.D)(Sh),c.registerChartView(np),c.registerSeriesModel(rp),c.registerLayout(Pv),c.registerProcessor(Ma("radar")),c.registerPreprocessor(Nw)},function u2(c){(0,ue.D)(c2),c.registerChartView(mp),c.registerSeriesModel(r2),c.registerLayout(oa),c.registerProcessor(c.PRIORITY.PROCESSOR.STATISTIC,eS),(0,xv.y)("map",c.registerAction)},function Yc(c){c.registerChartView(p2),c.registerSeriesModel(_2),c.registerLayout(y2),c.registerVisual(x2),function $v(c){c.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(s,a){a.eachComponent({mainType:"series",subType:"tree",query:s},function(l){var u=s.dataIndex,p=l.getData().tree.getNodeByDataIndex(u);p.isExpand=!p.isExpand})}),c.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(s,a,l){a.eachComponent({mainType:"series",subType:"tree",query:s},function(u){var p=xd(u.coordinateSystem,s,void 0,l);u.setCenter&&u.setCenter(p.center),u.setZoom&&u.setZoom(p.zoom)})})}(c)},function X0(c){c.registerSeriesModel(H0),c.registerChartView(G0),c.registerVisual(DS),c.registerLayout(Sd),function pS(c){for(var s=0;s<Eh.length;s++)c.registerAction({type:Eh[s],update:"updateView"},b.noop);c.registerAction({type:"treemapRootToNode",update:"updateView"},function(a,l){l.eachComponent({mainType:"series",subType:"treemap",query:a},function u(h,p){var m=Sp(a,["treemapZoomToNode","treemapRootToNode"],h);if(m){var y=h.getViewRoot();y&&(a.direction=V0(y,m.node)?"rollUp":"drillDown"),h.resetViewRoot(m.node)}})})}(c)},function Op(c){c.registerChartView(VS),c.registerSeriesModel(zS),c.registerProcessor(F2),c.registerVisual(B2),c.registerVisual(f5),c.registerLayout(q0),c.registerLayout(c.PRIORITY.VISUAL.POST_CHART_LAYOUT,U2),c.registerLayout(W2),c.registerCoordinateSystem("graphView",{dimensions:yp.dimensions,create:j2}),c.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},b.noop),c.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},b.noop),c.registerAction(K2,function(s,a,l){a.eachComponent({mainType:"series",query:s},function(u){var p=xd(u.coordinateSystem,s,void 0,l);u.setCenter&&u.setCenter(p.center),u.setZoom&&u.setZoom(p.zoom)})})},function J2(c){c.registerChartView(Fh),c.registerSeriesModel(HS)},function yb(c){c.registerChartView(nR),c.registerSeriesModel(iR),c.registerLayout(GS),c.registerProcessor(Ma("funnel"))},function Bb(c){(0,ue.D)(Pm),c.registerChartView(b5),c.registerSeriesModel(ZS),c.registerVisual(c.PRIORITY.VISUAL.BRUSH,XS)},function ku(c){c.registerChartView(LR),c.registerSeriesModel(M5),c.registerLayout(OR),c.registerVisual(NR),c.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(s,a){a.eachComponent({mainType:"series",subType:"sankey",query:s},function(l){l.setNodePosition(s.dataIndex,[s.localX,s.localY])})})},function PD(c){c.registerSeriesModel(TD),c.registerChartView(Hb),c.registerVisual(Nm),c.registerLayout(ED),c.registerTransform(VR)},function B5(c){c.registerChartView(GR),c.registerSeriesModel(ND),c.registerPreprocessor(WR),c.registerVisual(YR),c.registerLayout($R)},function Vm(c){c.registerChartView($b),c.registerSeriesModel(eL),c.registerLayout(ni("effectScatter"))},function aL(c){c.registerChartView(Jb),c.registerSeriesModel(rL),c.registerLayout(Hh),c.registerVisual(H5)},function fL(c){c.registerChartView(uL),c.registerSeriesModel(hL)},function $D(c){c.registerChartView(ZD),c.registerSeriesModel(XD),c.registerLayout(c.PRIORITY.VISUAL.LAYOUT,(0,b.curry)(Ho.bK,"pictorialBar")),c.registerLayout(c.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,(0,Ho.Bk)("pictorialBar"))},function Mt(c){c.registerChartView(qD),c.registerSeriesModel(_L),c.registerLayout(ar),c.registerProcessor(Ma("themeRiver"))},function aM(c){c.registerChartView(sa),c.registerSeriesModel(ox),c.registerLayout((0,b.curry)(jm,"sunburst")),c.registerProcessor((0,b.curry)(Ma,"sunburst")),c.registerVisual(iM),function Fi(c){c.registerAction({type:Cn,update:"updateView"},function(s,a){a.eachComponent({mainType:"series",subType:"sunburst",query:s},function l(u,h){var p=Sp(s,[Cn],u);if(p){var v=u.getViewRoot();v&&(s.direction=V0(v,p.node)?"rollUp":"drillDown"),u.resetViewRoot(p.node)}})}),c.registerAction({type:eM,update:"none"},function(s,a,l){s=(0,b.extend)({},s),a.eachComponent({mainType:"series",subType:"sunburst",query:s},function u(h){var p=Sp(s,[eM],h);p&&(s.dataIndex=p.node.dataIndex)}),l.dispatchAction((0,b.extend)(s,{type:"highlight"}))}),c.registerAction({type:"sunburstUnhighlight",update:"updateView"},function(s,a,l){s=(0,b.extend)({},s),l.dispatchAction((0,b.extend)(s,{type:"downplay"}))})}(c)},function RM(c){c.registerChartView(SM),c.registerSeriesModel(oM)}]),(0,ue.D)(function KM(c){(0,ue.D)(kw),(0,ue.D)(Kh)}),(0,ue.D)(function cO(c){(0,ue.D)(Kh),Cu.registerAxisPointerClass("PolarAxisPointer",WL),c.registerCoordinateSystem("polar",Qp),c.registerComponentModel(Y5),c.registerComponentView(lO),Qf(c,"angle",X5,oO),Qf(c,"radius",$5,sO),c.registerComponentView(eO),c.registerComponentView(rO),c.registerLayout((0,b.curry)(aO,"bar"))}),(0,ue.D)(c2),(0,ue.D)(function Ox(c){(0,ue.D)(Kh),Cu.registerAxisPointerClass("SingleAxisPointer",K5),c.registerComponentView(pT),c.registerComponentView(hO),c.registerComponentModel(h_),Qf(c,"single",h_,h_.defaultOption),c.registerCoordinateSystem("single",vO)}),(0,ue.D)(Pm),(0,ue.D)(function xO(c){c.registerComponentModel(yO),c.registerComponentView(gT),c.registerCoordinateSystem("calendar",bO)}),(0,ue.D)(function AO(c){c.registerComponentModel(Q5),c.registerComponentView(MO),c.registerPreprocessor(function(s){var a=s.graphic;(0,b.isArray)(a)?s.graphic=a[0]&&a[0].elements?[s.graphic[0]]:[{elements:a}]:a&&!a.elements&&(s.graphic=[{elements:[a]}])})}),(0,ue.D)(function OT(c){c.registerComponentModel(jO),c.registerComponentView(DT),Nd("saveAsImage",Wx),Nd("magicType",Kn),Nd("dataView",tz),Nd("dataZoom",LT),Nd("restore",tk),(0,ue.D)(WO)}),(0,ue.D)(function fz(c){(0,ue.D)(Kh),c.registerComponentModel(ck),c.registerComponentView(pk),c.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},b.noop),c.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},b.noop)}),(0,ue.D)(Kh),(0,ue.D)(function XT(c){c.registerComponentView(f1),c.registerComponentModel(tu),c.registerPreprocessor(gz),c.registerVisual(c.PRIORITY.VISUAL.BRUSH,jT),c.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(s,a){a.eachComponent({mainType:"brush",query:s},function(l){l.setAreas(s.areas)})}),c.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},b.noop),c.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},b.noop),Nd("brush",xk)}),(0,ue.D)(function $T(c){c.registerComponentModel(Ck),c.registerComponentView(wk)}),(0,ue.D)(function Tk(c){c.registerComponentModel(QT),c.registerComponentView(Mk),c.registerSubTypeDefaulter("timeline",function(){return"slider"}),function xz(c){c.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(s,a,l){var u=a.getComponent("timeline");return u&&null!=s.currentIndex&&(u.setCurrentIndex(s.currentIndex),!u.get("loop",!0)&&u.isIndexMax()&&u.getPlayState()&&(u.setPlayState(!1),l.dispatchAction({type:"timelinePlayChange",playState:!1,from:s.from}))),a.resetOption("timeline",{replaceMerge:u.get("replaceMerge",!0)}),(0,b.defaults)({currentIndex:u.option.currentIndex},s)}),c.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(s,a){var l=a.getComponent("timeline");l&&null!=s.playState&&l.setPlayState(s.playState)})}(c),c.registerPreprocessor(Cz)}),(0,ue.D)(function Ok(c){c.registerComponentModel(B_),c.registerComponentView(Lk),c.registerPreprocessor(function(s){aE(s.series,"markPoint")&&(s.markPoint=s.markPoint||{})})}),(0,ue.D)(function Fk(c){c.registerComponentModel(dE),c.registerComponentView(Nk),c.registerPreprocessor(function(s){aE(s.series,"markLine")&&(s.markLine=s.markLine||{})})}),(0,ue.D)(function Az(c){c.registerComponentModel(Dz),c.registerComponentView(Ez),c.registerPreprocessor(function(s){aE(s.series,"markArea")&&(s.markArea=s.markArea||{})})}),(0,ue.D)(function As(c){(0,ue.D)(T1),(0,ue.D)(_E)}),(0,ue.D)(function iN(c){(0,ue.D)(zs),(0,ue.D)(nf)}),(0,ue.D)(zs),(0,ue.D)(nf),(0,ue.D)(function Nz(c){(0,ue.D)(Q_),(0,ue.D)(PE)}),(0,ue.D)(Q_),(0,ue.D)(PE),(0,ue.D)(function yN(c){c.registerPreprocessor(LE),c.registerVisual(c.PRIORITY.VISUAL.ARIA,RE)}),(0,ue.D)(function SN(c){c.registerTransform(wN),c.registerTransform(Vl)}),(0,ue.D)(DN.N),(0,ue.D)(function ZN(c){c.registerUpdateLifecycle("series:beforeupdate",function(s,a,l){(0,b.each)((0,xn.kF)(l.seriesTransition),function(u){(0,b.each)((0,xn.kF)(u.to),function(h){for(var p=l.updatedSeries,v=0;v<p.length;v++)(null!=h.seriesIndex&&h.seriesIndex===p[v].seriesIndex||null!=h.seriesId&&h.seriesId===p[v].id)&&(p[v][Xi.V]=!0)})})}),c.registerUpdateLifecycle("series:transition",function(s,a,l){var u=UN(a);if(u.oldSeries&&l.updatedSeries&&l.optionChanged){var h=l.seriesTransition;if(h)(0,b.each)((0,xn.kF)(h),function(D){!function Uz(c,s,a,l){var u=[],h=[];(0,b.each)((0,xn.kF)(c.from),function(p){var v=QE(s.oldSeries,p);v>=0&&u.push({data:s.oldData[v],divide:Xu(s.oldData[v]),dim:p.dimension})}),(0,b.each)((0,xn.kF)(c.to),function(p){var v=QE(a.updatedSeries,p);if(v>=0){var m=a.updatedSeries[v].getData();h.push({data:m,divide:Xu(m),dim:p.dimension})}}),u.length>0&&h.length>0&&$E(u,h,l)}(D,u,l,a)});else{var p=function Hz(c,s){var a=(0,b.createHashMap)(),l=(0,b.createHashMap)(),u=(0,b.createHashMap)();return(0,b.each)(c.oldSeries,function(p,v){var m=c.oldData[v],y=KE(p),x=jN(y);l.set(x,m),(0,b.isArray)(y)&&(0,b.each)(y,function(w){u.set(w,{data:m,key:x})})}),(0,b.each)(s.updatedSeries,function(p){if(p.isUniversalTransitionEnabled()&&p.isAnimationEnabled()){var v=p.getData(),m=KE(p),y=jN(m),x=l.get(y);if(x)a.set(y,{oldSeries:[{divide:Xu(x),data:x}],newSeries:[{divide:Xu(v),data:v}]});else if((0,b.isArray)(m)){var w=[];(0,b.each)(m,function(L){var N=l.get(L);N&&w.push({divide:Xu(N),data:N})}),w.length&&a.set(y,{oldSeries:w,newSeries:[{data:v,divide:Xu(v)}]})}else{var D=u.get(m);if(D){var I=a.get(D.key);I||(I={oldSeries:[{data:D.data,divide:Xu(D.data)}],newSeries:[]},a.set(D.key,I)),I.newSeries.push({data:v,divide:Xu(v)})}}}}),a}(u,l);(0,b.each)(p.keys(),function(D){var I=p.get(D);$E(I.oldSeries,I.newSeries,a)})}(0,b.each)(l.updatedSeries,function(D){D[Xi.V]&&(D[Xi.V]=!1)})}for(var v=s.getSeries(),m=u.oldSeries=[],y=u.oldData=[],x=0;x<v.length;x++){var w=v[x].getData();w.count()<1e4&&(m.push(v[x]),y.push(w))}})}),(0,ue.D)(Gz.T)},3802:(Vt,Qe,H)=>{H.d(Qe,{D:()=>be,KZ:()=>Ce,XD:()=>re,Zi:()=>U,_W:()=>ee,bX:()=>j,eq:()=>he,ke:()=>ye});var ue=H(628),le=(0,H(1266).Yf)();function ye($,ie,K,b,Y){var Q;if(ie&&ie.ecModel){var F=ie.ecModel.getUpdatePayload();Q=F&&F.animation}var G="update"===$;if(ie&&ie.isAnimationEnabled()){var W=void 0,J=void 0,V=void 0;return b?(W=(0,ue.retrieve2)(b.duration,200),J=(0,ue.retrieve2)(b.easing,"cubicOut"),V=0):(W=ie.getShallow(G?"animationDurationUpdate":"animationDuration"),J=ie.getShallow(G?"animationEasingUpdate":"animationEasing"),V=ie.getShallow(G?"animationDelayUpdate":"animationDelay")),Q&&(null!=Q.duration&&(W=Q.duration),null!=Q.easing&&(J=Q.easing),null!=Q.delay&&(V=Q.delay)),(0,ue.isFunction)(V)&&(V=V(K,Y)),(0,ue.isFunction)(W)&&(W=W(K)),{duration:W||0,delay:V,easing:J}}return null}function ge($,ie,K,b,Y,Q,F){var G,q=!1;(0,ue.isFunction)(Y)?(F=Q,Q=Y,Y=null):(0,ue.isObject)(Y)&&(Q=Y.cb,F=Y.during,q=Y.isFrom,G=Y.removeOpt,Y=Y.dataIndex);var W="leave"===$;W||ie.stopAnimation("leave");var J=ye($,b,Y,W?G||{}:null,b&&b.getAnimationDelayParams?b.getAnimationDelayParams(ie,Y):null);if(J&&J.duration>0){var R={duration:J.duration,delay:J.delay||0,easing:J.easing,done:Q,force:!!Q||!!F,setToFinal:!W,scope:$,during:F};q?ie.animateFrom(K,R):ie.animateTo(K,R)}else ie.stopAnimation(),!q&&ie.attr(K),F&&F(1),Q&&Q()}function be($,ie,K,b,Y,Q){ge("update",$,ie,K,b,Y,Q)}function Ce($,ie,K,b,Y,Q){ge("enter",$,ie,K,b,Y,Q)}function he($){if(!$.__zr)return!0;for(var ie=0;ie<$.animators.length;ie++)if("leave"===$.animators[ie].scope)return!0;return!1}function j($,ie,K,b,Y,Q){he($)||ge("leave",$,ie,K,b,Y,Q)}function X($,ie,K,b){$.removeTextContent(),$.removeTextGuideLine(),j($,{style:{opacity:0}},ie,K,b)}function re($,ie,K){function b(){$.parent&&$.parent.remove($)}$.isGroup?$.traverse(function(Y){Y.isGroup||X(Y,ie,K,b)}):X($,ie,K,b)}function U($){le($).oldStyle=$.style}function ee($){return le($).oldStyle}},5103:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>Se});var ue=H(1266);function Se(){var le=(0,ue.Yf)();return function(ye){var ge=le(ye),be=ye.pipelineContext,Ce=!!ge.large,he=!!ge.progressiveRender,j=ge.large=!(!be||!be.large),X=ge.progressiveRender=!(!be||!be.progressiveRender);return(Ce!==j||he!==X)&&"reset"}}},405:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>F});var ue=H(628),Se=H(3241),le=H(9178),ye=H(1577),ge=H(1266),be=H(9506),Ce=function q(G){this.coordSysDims=[],this.axisMap=(0,ue.createHashMap)(),this.categoryAxisMap=(0,ue.createHashMap)(),this.coordSysName=G},j={cartesian2d:function(q,G,W,J){var V=q.getReferringComponents("xAxis",ge.C6).models[0],P=q.getReferringComponents("yAxis",ge.C6).models[0];G.coordSysDims=["x","y"],W.set("x",V),W.set("y",P),X(V)&&(J.set("x",V),G.firstCategoryDimIndex=0),X(P)&&(J.set("y",P),null==G.firstCategoryDimIndex&&(G.firstCategoryDimIndex=1))},singleAxis:function(q,G,W,J){var V=q.getReferringComponents("singleAxis",ge.C6).models[0];G.coordSysDims=["single"],W.set("single",V),X(V)&&(J.set("single",V),G.firstCategoryDimIndex=0)},polar:function(q,G,W,J){var V=q.getReferringComponents("polar",ge.C6).models[0],P=V.findAxisModel("radiusAxis"),T=V.findAxisModel("angleAxis");G.coordSysDims=["radius","angle"],W.set("radius",P),W.set("angle",T),X(P)&&(J.set("radius",P),G.firstCategoryDimIndex=0),X(T)&&(J.set("angle",T),null==G.firstCategoryDimIndex&&(G.firstCategoryDimIndex=1))},geo:function(q,G,W,J){G.coordSysDims=["lng","lat"]},parallel:function(q,G,W,J){var V=q.ecModel,P=V.getComponent("parallel",q.get("parallelIndex")),T=G.coordSysDims=P.dimensions.slice();(0,ue.each)(P.parallelAxisIndex,function(R,E){var M=V.getComponent("parallelAxis",R),A=T[E];W.set(A,M),X(M)&&(J.set(A,M),null==G.firstCategoryDimIndex&&(G.firstCategoryDimIndex=E))})}};function X(q){return"category"===q.get("type")}var re=H(7079),U=H(143),ee=H(6153),$=H(4367);const F=function b(q,G,W){W=W||{};var V,J=G.getSourceManager(),P=!1;q?(P=!0,V=(0,re.nx)(q)):P=(V=J.getSource()).sourceFormat===$.cy;var T=function he(q){var G=q.get("coordinateSystem"),W=new Ce(G),J=j[G];if(J)return J(q,W,W.axisMap,W.categoryAxisMap),W}(G),R=function ie(q,G){var V,W=q.get("coordinateSystem"),J=be.Z.get(W);return G&&G.coordSysDims&&(V=ue.map(G.coordSysDims,function(P){var T={name:P},R=G.axisMap.get(P);if(R){var E=R.get("type");T.type=(0,ye.T)(E)}return T})),V||(V=J&&(J.getDimensionsInfo?J.getDimensionsInfo():J.dimensions.slice())||["x","y"]),V}(G,T),E=W.useEncodeDefaulter,M=ue.isFunction(E)?E:E?ue.curry(ee.pY,R,G):null,A={coordDimensions:R,generateCoord:W.generateCoord,encodeDefine:G.getEncode(),encodeDefaulter:M,canOmitUnusedDimensions:!P},O=(0,le.Z)(V,A),B=function K(q,G,W){var J,V;return W&&ue.each(q,function(P,T){var E=W.categoryAxisMap.get(P.coordDim);E&&(null==J&&(J=T),P.ordinalMeta=E.getOrdinalMeta(),G&&(P.createInvertedIndices=!0)),null!=P.otherDims.itemName&&(V=!0)}),!V&&null!=J&&(q[J].otherDims.itemName=0),J}(O.dimensions,W.createInvertedIndices,T),ce=P?null:J.getSharedDataStore(O),ae=(0,U.BM)(G,{schema:O,store:ce}),oe=new Se.Z(O,G);oe.setCalculationInfo(ae);var de=null!=B&&function Y(q){if(q.sourceFormat===$.cy){var G=function Q(q){for(var G=0;G<q.length&&null==q[G];)G++;return q[G]}(q.data||[]);return!ue.isArray((0,ge.C4)(G))}}(V)?function(ne,xe,fe,ve){return ve===B?fe:this.defaultDimValueGetter(ne,xe,fe,ve)}:null;return oe.hasItemOption=!1,oe.initData(P?V:ce,null,de),oe}},4664:(Vt,Qe,H)=>{H.d(Qe,{N:()=>he});var ue=H(5845),Se=H(9447),le=H(9899),ye=H(4367),ge=H(8003),be=function(j){function X(){var re=null!==j&&j.apply(this,arguments)||this;return re.type="dataset",re}return(0,ue.ZT)(X,j),X.prototype.init=function(re,U,ee){j.prototype.init.call(this,re,U,ee),this._sourceManager=new ge.U(this),(0,ge.t)(this)},X.prototype.mergeOption=function(re,U){j.prototype.mergeOption.call(this,re,U),(0,ge.t)(this)},X.prototype.optionUpdated=function(){this._sourceManager.dirty()},X.prototype.getSourceManager=function(){return this._sourceManager},X.type="dataset",X.defaultOption={seriesLayoutBy:ye.fY},X}(Se.Z),Ce=function(j){function X(){var re=null!==j&&j.apply(this,arguments)||this;return re.type="dataset",re}return(0,ue.ZT)(X,j),X.type="dataset",X}(le.Z);function he(j){j.registerComponentModel(be),j.registerComponentView(Ce)}},1549:(Vt,Qe,H)=>{H.d(Qe,{w:()=>ge});var ue=H(628),Se=H(4974),le=H(67),ye=H(1266);function ge(Ce){var b,Y,Q,F,he=Ce.series,j=Ce.dataIndex,X=Ce.multipleSeries,re=he.getData(),U=re.mapDimensionsAll("defaultedTooltip"),ee=U.length,$=he.getRawValue(j),ie=(0,ue.isArray)($),K=(0,Se.jT)(he,j);if(ee>1||ie&&!ee){var q=function be(Ce,he,j,X,re){var U=he.getData(),ee=(0,ue.reduce)(Ce,function(Y,Q,F){var q=U.getDimensionInfo(F);return Y||q&&!1!==q.tooltip&&null!=q.displayName},!1),$=[],ie=[],K=[];function b(Y,Q){var F=U.getDimensionInfo(Q);!F||!1===F.otherDims.tooltip||(ee?K.push((0,Se.TX)("nameValue",{markerType:"subItem",markerColor:re,name:F.displayName,value:Y,valueType:F.type})):($.push(Y),ie.push(F.type)))}return X.length?(0,ue.each)(X,function(Y){b((0,le.hk)(U,j,Y),Y)}):(0,ue.each)(Ce,b),{inlineValues:$,inlineValueTypes:ie,blocks:K}}($,he,j,U,K);b=q.inlineValues,Y=q.inlineValueTypes,Q=q.blocks,F=q.inlineValues[0]}else if(ee){var G=re.getDimensionInfo(U[0]);F=b=(0,le.hk)(re,j,U[0]),Y=G.type}else F=b=ie?$[0]:$;var W=(0,ye.yu)(he),J=W&&he.name||"",V=re.getName(j),P=X?J:V;return(0,Se.TX)("section",{header:J,noHeader:X||!W,sortParam:F,blocks:[(0,Se.TX)("nameValue",{markerType:"item",markerColor:K,name:P,noName:!(0,ue.trim)(P),value:b,valueType:Y})].concat(Q||[])})}},4974:(Vt,Qe,H)=>{H.d(Qe,{BY:()=>K,TX:()=>X,d_:()=>J,iv:()=>V,jT:()=>W});var ue=H(2425),Se=H(9706),le=H(628),ye=H(4066),ge=H(4785),be="line-height:1";function Ce(P,T){var R=P.color||"#6e7079",E=P.fontSize||12,M=P.fontWeight||"400",A=P.color||"#464646",O=P.fontSize||14,B=P.fontWeight||"900";return"html"===T?{nameStyle:"font-size:"+(0,ue.F1)(E+"")+"px;color:"+(0,ue.F1)(R)+";font-weight:"+(0,ue.F1)(M+""),valueStyle:"font-size:"+(0,ue.F1)(O+"")+"px;color:"+(0,ue.F1)(A)+";font-weight:"+(0,ue.F1)(B+"")}:{nameStyle:{fontSize:E,fill:R,fontWeight:M},valueStyle:{fontSize:O,fill:A,fontWeight:B}}}var he=[0,10,20,30],j=["","\n","\n\n","\n\n\n"];function X(P,T){return T.type=P,T}function re(P){return"section"===P.type}function U(P){return re(P)?$:ie}function ee(P){if(re(P)){var T=0,R=P.blocks.length,E=R>1||R>0&&!P.noHeader;return(0,le.each)(P.blocks,function(M){var A=ee(M);A>=T&&(T=A+ +(E&&(!A||re(M)&&!M.noHeader)))}),T}return 0}function $(P,T,R,E){var M=T.noHeader,A=function b(P){return{html:he[P],richText:j[P]}}(ee(T)),O=[],B=T.blocks||[];(0,le.assert)(!B||(0,le.isArray)(B)),B=B||[];var ce=P.orderMode;if(T.sortBlocks&&ce){B=B.slice();var ae={valueAsc:"asc",valueDesc:"desc"};if((0,le.hasOwn)(ae,ce)){var oe=new ye.ID(ae[ce],null);B.sort(function(fe,ve){return oe.evaluate(fe.sortParam,ve.sortParam)})}else"seriesDesc"===ce&&B.reverse()}(0,le.each)(B,function(fe,ve){var we=T.valueFormatter,Te=U(fe)(we?(0,le.extend)((0,le.extend)({},P),{valueFormatter:we}):P,fe,ve>0?A.html:0,E);null!=Te&&O.push(Te)});var de="richText"===P.renderMode?O.join(A.richText):Y(O.join(""),M?R:A.html);if(M)return de;var ne=(0,Se.uX)(T.header,"ordinal",P.useUTC),xe=Ce(E,P.renderMode).nameStyle;return"richText"===P.renderMode?q(P,ne,xe)+A.richText+de:Y('<div style="'+xe+";"+be+';">'+(0,ue.F1)(ne)+"</div>"+de,R)}function ie(P,T,R,E){var M=P.renderMode,A=T.noName,O=T.noValue,B=!T.markerType,ce=T.name,ae=P.useUTC,oe=T.valueFormatter||P.valueFormatter||function(Ve){return Ve=(0,le.isArray)(Ve)?Ve:[Ve],(0,le.map)(Ve,function(He,We){return(0,Se.uX)(He,(0,le.isArray)(xe)?xe[We]:xe,ae)})};if(!A||!O){var de=B?"":P.markupStyleCreator.makeTooltipMarker(T.markerType,T.markerColor||"#333",M),ne=A?"":(0,Se.uX)(ce,"ordinal",ae),xe=T.valueType,fe=O?[]:oe(T.value),ve=!B||!A,we=!B&&A,Te=Ce(E,M),Ae=Te.nameStyle,Ee=Te.valueStyle;return"richText"===M?(B?"":de)+(A?"":q(P,ne,Ae))+(O?"":function G(P,T,R,E,M){var A=[M];return R&&A.push({padding:[0,0,0,E?10:20],align:"right"}),P.markupStyleCreator.wrapRichTextStyle((0,le.isArray)(T)?T.join("  "):T,A)}(P,fe,ve,we,Ee)):Y((B?"":de)+(A?"":function Q(P,T,R){return'<span style="'+R+";"+(T?"margin-left:2px":"")+'">'+(0,ue.F1)(P)+"</span>"}(ne,!B,Ae))+(O?"":function F(P,T,R,E){var A=T?"float:right;margin-left:"+(R?"10px":"20px"):"";return P=(0,le.isArray)(P)?P:[P],'<span style="'+A+";"+E+'">'+(0,le.map)(P,function(O){return(0,ue.F1)(O)}).join("&nbsp;&nbsp;")+"</span>"}(fe,ve,we,Ee)),R)}}function K(P,T,R,E,M,A){if(P)return U(P)({useUTC:M,renderMode:R,orderMode:E,markupStyleCreator:T,valueFormatter:P.valueFormatter},P,0,A)}function Y(P,T){return'<div style="margin: '+T+"px 0 0;"+be+';">'+P+'<div style="clear:both"></div></div>'}function q(P,T,R){return P.markupStyleCreator.wrapRichTextStyle(T,R)}function W(P,T){var R=P.getData().getItemVisual(T,"style");return(0,Se.Lz)(R[P.visualDrawType])}function J(P,T){return P.get("padding")??("richText"===T?[8,10]:10)}var V=function(){function P(){this.richTextStyles={},this._nextStyleNameId=(0,ge.jj)()}return P.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},P.prototype.makeTooltipMarker=function(T,R,E){var M="richText"===E?this._generateStyleName():null,A=(0,Se.A0)({color:R,type:T,renderMode:E,markerId:M});return(0,le.isString)(A)?A:(this.richTextStyles[M]=A.style,A.content)},P.prototype.wrapRichTextStyle=function(T,R){var E={};(0,le.isArray)(R)?(0,le.each)(R,function(A){return(0,le.extend)(E,A)}):(0,le.extend)(E,R);var M=this._generateStyleName();return this.richTextStyles[M]=E,"{"+M+"|"+T+"}"},P}()},6592:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>V});var ue=H(628),Se=H(4785),le=H(1790),ye=H(1266),ge=H(4174),be=(0,ye.Yf)();function X(P,T){var A,O,R=ee(P,"labels"),E=(0,ge.rk)(T);return $(R,E)||(ue.isFunction(E)?A=F(P,E):(O="auto"===E?function K(P){return be(P).autoInterval??(be(P).autoInterval=P.calculateCategoryInterval())}(P):E,A=Q(P,O)),ie(R,E,{labels:A,labelCategoryInterval:O}))}function ee(P,T){return be(P)[T]||(be(P)[T]=[])}function $(P,T){for(var R=0;R<P.length;R++)if(P[R].key===T)return P[R].value}function ie(P,T,R){return P.push({key:T,value:R}),R}function Q(P,T,R){var E=(0,ge.J9)(P),M=P.scale,A=M.getExtent(),O=P.getLabelModel(),B=[],ce=Math.max((T||0)+1,1),ae=A[0],oe=M.count();0!==ae&&ce>1&&oe/ce>2&&(ae=Math.round(Math.ceil(ae/ce)*ce));var de=(0,ge.WY)(P),ne=O.get("showMinLabel")||de,xe=O.get("showMaxLabel")||de;ne&&ae!==A[0]&&ve(A[0]);for(var fe=ae;fe<=A[1];fe+=ce)ve(fe);function ve(we){var Te={value:we};B.push(R?we:{formattedLabel:E(Te),rawLabel:M.getLabel(Te),tickValue:we})}return xe&&fe-ce!==A[1]&&ve(A[1]),B}function F(P,T,R){var E=P.scale,M=(0,ge.J9)(P),A=[];return ue.each(E.getTicks(),function(O){var B=E.getLabel(O),ce=O.value;T(O.value,B)&&A.push(R?ce:{formattedLabel:M(O),rawLabel:B,tickValue:ce})}),A}var q=[0,1];function W(P,T){var M=(P[1]-P[0])/T/2;P[0]+=M,P[1]-=M}const V=function(){function P(T,R,E){this.onBand=!1,this.inverse=!1,this.dim=T,this.scale=R,this._extent=E||[0,0]}return P.prototype.contain=function(T){var R=this._extent,E=Math.min(R[0],R[1]),M=Math.max(R[0],R[1]);return T>=E&&T<=M},P.prototype.containData=function(T){return this.scale.contain(T)},P.prototype.getExtent=function(){return this._extent.slice()},P.prototype.getPixelPrecision=function(T){return(0,Se.M9)(T||this.scale.getExtent(),this._extent)},P.prototype.setExtent=function(T,R){var E=this._extent;E[0]=T,E[1]=R},P.prototype.dataToCoord=function(T,R){var E=this._extent,M=this.scale;return T=M.normalize(T),this.onBand&&"ordinal"===M.type&&W(E=E.slice(),M.count()),(0,Se.NU)(T,q,E,R)},P.prototype.coordToData=function(T,R){var E=this._extent,M=this.scale;this.onBand&&"ordinal"===M.type&&W(E=E.slice(),M.count());var A=(0,Se.NU)(T,E,q,R);return this.scale.scale(A)},P.prototype.pointToData=function(T,R){},P.prototype.getTicksCoords=function(T){var R=(T=T||{}).tickModel||this.getTickModel(),E=function he(P,T){return"category"===P.type?function re(P,T){var A,O,R=ee(P,"ticks"),E=(0,ge.rk)(T),M=$(R,E);if(M)return M;if((!T.get("show")||P.scale.isBlank())&&(A=[]),ue.isFunction(E))A=F(P,E,!0);else if("auto"===E){var B=X(P,P.getLabelModel());O=B.labelCategoryInterval,A=ue.map(B.labels,function(ce){return ce.tickValue})}else A=Q(P,O=E,!0);return ie(R,E,{ticks:A,tickCategoryInterval:O})}(P,T):{ticks:ue.map(P.scale.getTicks(),function(R){return R.value})}}(this,R),A=(0,ue.map)(E.ticks,function(B){return{coord:this.dataToCoord("ordinal"===this.scale.type?this.scale.getRawOrdinalNumber(B):B),tickValue:B}},this);return function J(P,T,R,E){var M=T.length;if(P.onBand&&!R&&M){var O,A=P.getExtent();if(1===M)T[0].coord=A[0],O=T[1]={coord:A[0]};else{var ae=(T[M-1].coord-T[0].coord)/(T[M-1].tickValue-T[0].tickValue);(0,ue.each)(T,function(xe){xe.coord-=ae/2});var oe=P.scale.getExtent();T.push(O={coord:T[M-1].coord+ae*(1+oe[1]-T[M-1].tickValue)})}var de=A[0]>A[1];ne(T[0].coord,A[0])&&(E?T[0].coord=A[0]:T.shift()),E&&ne(A[0],T[0].coord)&&T.unshift({coord:A[0]}),ne(A[1],O.coord)&&(E?O.coord=A[1]:T.pop()),E&&ne(O.coord,A[1])&&T.push({coord:A[1]})}function ne(xe,fe){return xe=(0,Se.NM)(xe),fe=(0,Se.NM)(fe),de?xe>fe:xe<fe}}(this,A,R.get("alignWithLabel"),T.clamp),A},P.prototype.getMinorTicksCoords=function(){if("ordinal"===this.scale.type)return[];var R=this.model.getModel("minorTick").get("splitNumber");R>0&&R<100||(R=5);var E=this.scale.getMinorTicks(R);return(0,ue.map)(E,function(A){return(0,ue.map)(A,function(O){return{coord:this.dataToCoord(O),tickValue:O}},this)},this)},P.prototype.getViewLabels=function(){return function Ce(P){return"category"===P.type?function j(P){var T=P.getLabelModel(),R=X(P,T);return!T.get("show")||P.scale.isBlank()?{labels:[],labelCategoryInterval:R.labelCategoryInterval}:R}(P):function U(P){var T=P.scale.getTicks(),R=(0,ge.J9)(P);return{labels:ue.map(T,function(E,M){return{level:E.level,formattedLabel:R(E,M),rawLabel:P.scale.getLabel(E),tickValue:E.value}})}}(P)}(this).labels},P.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},P.prototype.getTickModel=function(){return this.model.getModel("axisTick")},P.prototype.getBandWidth=function(){var T=this._extent,R=this.scale.getExtent(),E=R[1]-R[0]+(this.onBand?1:0);0===E&&(E=1);var M=Math.abs(T[1]-T[0]);return Math.abs(M)/E},P.prototype.calculateCategoryInterval=function(){return function b(P){var T=function Y(P){var T=P.getLabelModel();return{axisRotate:P.getRotate?P.getRotate():P.isHorizontal&&!P.isHorizontal()?90:0,labelRotate:T.get("rotate")||0,font:T.getFont()}}(P),R=(0,ge.J9)(P),E=(T.axisRotate-T.labelRotate)/180*Math.PI,M=P.scale,A=M.getExtent(),O=M.count();if(A[1]-A[0]<1)return 0;var B=1;O>40&&(B=Math.max(1,Math.floor(O/40)));for(var ce=A[0],ae=P.dataToCoord(ce+1)-P.dataToCoord(ce),oe=Math.abs(ae*Math.cos(E)),de=Math.abs(ae*Math.sin(E)),ne=0,xe=0;ce<=A[1];ce+=B){var ve,we=le.lP(R({value:ce}),T.font,"center","top");ve=1.3*we.height,ne=Math.max(ne,1.3*we.width,7),xe=Math.max(xe,ve,7)}var Te=ne/oe,Ae=xe/de;isNaN(Te)&&(Te=1/0),isNaN(Ae)&&(Ae=1/0);var Ee=Math.max(0,Math.floor(Math.min(Te,Ae))),Ve=be(P.model),He=P.getExtent(),We=Ve.lastAutoInterval,$e=Ve.lastTickCount;return null!=We&&null!=$e&&Math.abs(We-Ee)<=1&&Math.abs($e-O)<=1&&We>Ee&&Ve.axisExtent0===He[0]&&Ve.axisExtent1===He[1]?Ee=We:(Ve.lastTickCount=O,Ve.lastAutoInterval=Ee,Ve.axisExtent0=He[0],Ve.axisExtent1=He[1]),Ee}(this)},P}()},4174:(Vt,Qe,H)=>{H.d(Qe,{aG:()=>T,Do:()=>A,DX:()=>M,PY:()=>ae,rk:()=>B,Xv:()=>J,Yb:()=>R,J9:()=>E,Jk:()=>P,WY:()=>ce,AH:()=>oe});var ue=H(628),Se=H(3156),le=H(5543),ye=H(8512),ge=H(2154),be=H(7021),Ce=H(9020),he=H(5845),j=H(4785),X=H(7331),re=ye.Z.prototype,U=le.Z.prototype,ee=j.NM,$=Math.floor,ie=Math.ceil,K=Math.pow,b=Math.log,Y=function(de){function ne(){var xe=null!==de&&de.apply(this,arguments)||this;return xe.type="log",xe.base=10,xe._originalScale=new le.Z,xe._interval=0,xe}return(0,he.ZT)(ne,de),ne.prototype.getTicks=function(xe){var ve=this._extent,we=this._originalScale.getExtent(),Te=U.getTicks.call(this,xe);return ue.map(Te,function(Ae){var Ee=Ae.value,Ve=j.NM(K(this.base,Ee));return Ve=Ee===ve[0]&&this._fixMin?F(Ve,we[0]):Ve,{value:Ve=Ee===ve[1]&&this._fixMax?F(Ve,we[1]):Ve}},this)},ne.prototype.setExtent=function(xe,fe){var ve=b(this.base);xe=b(Math.max(0,xe))/ve,fe=b(Math.max(0,fe))/ve,U.setExtent.call(this,xe,fe)},ne.prototype.getExtent=function(){var xe=this.base,fe=re.getExtent.call(this);fe[0]=K(xe,fe[0]),fe[1]=K(xe,fe[1]);var we=this._originalScale.getExtent();return this._fixMin&&(fe[0]=F(fe[0],we[0])),this._fixMax&&(fe[1]=F(fe[1],we[1])),fe},ne.prototype.unionExtent=function(xe){this._originalScale.unionExtent(xe);var fe=this.base;xe[0]=b(xe[0])/b(fe),xe[1]=b(xe[1])/b(fe),re.unionExtent.call(this,xe)},ne.prototype.unionExtentFromData=function(xe,fe){this.unionExtent(xe.getApproximateExtent(fe))},ne.prototype.calcNiceTicks=function(xe){xe=xe||10;var fe=this._extent,ve=fe[1]-fe[0];if(!(ve===1/0||ve<=0)){var we=j.Xd(ve);for(xe/ve*we<=.5&&(we*=10);!isNaN(we)&&Math.abs(we)<1&&Math.abs(we)>0;)we*=10;var Ae=[j.NM(ie(fe[0]/we)*we),j.NM($(fe[1]/we)*we)];this._interval=we,this._niceExtent=Ae}},ne.prototype.calcNiceExtent=function(xe){U.calcNiceExtent.call(this,xe),this._fixMin=xe.fixMin,this._fixMax=xe.fixMax},ne.prototype.parse=function(xe){return xe},ne.prototype.contain=function(xe){return xe=b(xe)/b(this.base),X.XS(xe,this._extent)},ne.prototype.normalize=function(xe){return xe=b(xe)/b(this.base),X.Fv(xe,this._extent)},ne.prototype.scale=function(xe){return xe=X.bA(xe,this._extent),K(this.base,xe)},ne.type="log",ne}(ye.Z),Q=Y.prototype;function F(de,ne){return ee(de,j.p8(ne))}Q.getMinorTicks=U.getMinorTicks,Q.getLabel=U.getLabel,ye.Z.registerClass(Y);const q=Y;var G=H(143),W=H(7951);function J(de,ne){var xe=de.type,fe=(0,W.Qw)(de,ne,de.getExtent()).calculate();de.setBlank(fe.isBlank);var ve=fe.min,we=fe.max,Te=ne.ecModel;if(Te&&"time"===xe){var Ae=(0,ge.Ge)("bar",Te),Ee=!1;if(ue.each(Ae,function(We){Ee=Ee||We.getBaseAxis()===ne.axis}),Ee){var Ve=(0,ge.My)(Ae),He=function V(de,ne,xe,fe){var ve=xe.axis.getExtent(),we=ve[1]-ve[0],Te=(0,ge.G_)(fe,xe.axis);if(void 0===Te)return{min:de,max:ne};var Ae=1/0;ue.each(Te,function(ct){Ae=Math.min(ct.offset,Ae)});var Ee=-1/0;ue.each(Te,function(ct){Ee=Math.max(ct.offset+ct.width,Ee)}),Ae=Math.abs(Ae),Ee=Math.abs(Ee);var Ve=Ae+Ee,He=ne-de,$e=He/(1-(Ae+Ee)/we)-He;return{min:de-=$e*(Ae/Ve),max:ne+=$e*(Ee/Ve)}}(ve,we,ne,Ve);ve=He.min,we=He.max}}return{extent:[ve,we],fixMin:fe.minFixed,fixMax:fe.maxFixed}}function P(de,ne){var xe=ne,fe=J(de,xe),ve=fe.extent,we=xe.get("splitNumber");de instanceof q&&(de.base=xe.get("logBase"));var Te=de.type,Ae=xe.get("interval"),Ee="interval"===Te||"time"===Te;de.setExtent(ve[0],ve[1]),de.calcNiceExtent({splitNumber:we,fixMin:fe.fixMin,fixMax:fe.fixMax,minInterval:Ee?xe.get("minInterval"):null,maxInterval:Ee?xe.get("maxInterval"):null}),null!=Ae&&de.setInterval&&de.setInterval(Ae)}function T(de,ne){if(ne=ne||de.get("type"))switch(ne){case"category":return new Se.Z({ordinalMeta:de.getOrdinalMeta?de.getOrdinalMeta():de.getCategories(),extent:[1/0,-1/0]});case"time":return new Ce.Z({locale:de.ecModel.getLocaleModel(),useUTC:de.ecModel.get("useUTC")});default:return new(ye.Z.getClass(ne)||le.Z)}}function R(de){var ne=de.scale.getExtent(),xe=ne[0],fe=ne[1];return!(xe>0&&fe>0||xe<0&&fe<0)}function E(de){var fe,ne=de.getLabelModel().get("formatter"),xe="category"===de.type?de.scale.getExtent()[0]:null;return"time"===de.scale.type?(fe=ne,function(ve,we){return de.scale.getFormattedLabel(ve,we,fe)}):ue.isString(ne)?function(fe){return function(ve){var we=de.scale.getLabel(ve);return fe.replace("{value}",we??"")}}(ne):ue.isFunction(ne)?function(fe){return function(ve,we){return null!=xe&&(we=ve.value-xe),fe(M(de,ve),we,null!=ve.level?{level:ve.level}:null)}}(ne):function(fe){return de.scale.getLabel(fe)}}function M(de,ne){return"category"===de.type?de.scale.getLabel(ne):ne.value}function A(de){var xe=de.scale;if(de.model.get(["axisLabel","show"])&&!xe.isBlank()){var fe,ve,we=xe.getExtent();ve=xe instanceof Se.Z?xe.count():(fe=xe.getTicks()).length;var Ee,Te=de.getLabelModel(),Ae=E(de),Ve=1;ve>40&&(Ve=Math.ceil(ve/40));for(var He=0;He<ve;He+=Ve){var $e=Ae(fe?fe[He]:{value:we[0]+He},He),St=O(Te.getTextRect($e),Te.get("rotate")||0);Ee?Ee.union(St):Ee=St}return Ee}}function O(de,ne){var xe=ne*Math.PI/180,fe=de.width,ve=de.height,we=fe*Math.abs(Math.cos(xe))+Math.abs(ve*Math.sin(xe)),Te=fe*Math.abs(Math.sin(xe))+Math.abs(ve*Math.cos(xe));return new be.Z(de.x,de.y,we,Te)}function B(de){return de.get("interval")??"auto"}function ce(de){return"category"===de.type&&0===B(de.getLabelModel())}function ae(de,ne){var xe={};return ue.each(de.mapDimensionsAll(ne),function(fe){xe[(0,G.IR)(de,fe)]=!0}),ue.keys(xe)}function oe(de,ne,xe){ne&&ue.each(ae(ne,xe),function(fe){var ve=ne.getApproximateExtent(fe);ve[0]<de[0]&&(de[0]=ve[0]),ve[1]>de[1]&&(de[1]=ve[1])})}},2565:(Vt,Qe,H)=>{H.d(Qe,{W:()=>ue});var ue=function(){function Se(){}return Se.prototype.getNeedCrossZero=function(){return!this.option.scale},Se.prototype.getCoordSysModel=function(){},Se}()},8540:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>le});var ue=H(628);const le=function(){function ye(ge){this.type="cartesian",this._dimList=[],this._axes={},this.name=ge||""}return ye.prototype.getAxis=function(ge){return this._axes[ge]},ye.prototype.getAxes=function(){return ue.map(this._dimList,function(ge){return this._axes[ge]},this)},ye.prototype.getAxesByScale=function(ge){return ge=ge.toLowerCase(),ue.filter(this.getAxes(),function(be){return be.scale.type===ge})},ye.prototype.addAxis=function(ge){var be=ge.dim;this._axes[be]=ge,this._dimList.push(be)},ye}()},2224:(Vt,Qe,H)=>{H.d(Qe,{Im:()=>ie,Ni:()=>$,Qh:()=>U,jM:()=>ee});var ue=H(5845),Se=H(7021),le=H(8221),ye=H(1995),ge=H(3481),be=H(628),Ce=[];function he(K,b){for(var Y=0;Y<K.length;Y++)le.applyTransform(K[Y],K[Y],b)}function j(K,b,Y,Q){for(var F=0;F<K.length;F++){var q=K[F];Q&&(q=Q.project(q)),q&&isFinite(q[0])&&isFinite(q[1])&&(le.min(b,b,q),le.max(Y,Y,q))}}var re=function(){function K(b){this.name=b}return K.prototype.setCenter=function(b){this._center=b},K.prototype.getCenter=function(){var b=this._center;return b||(b=this._center=this.calcCenter()),b},K}(),U=function K(b,Y){this.type="polygon",this.exterior=b,this.interiors=Y},ee=function K(b){this.type="linestring",this.points=b},$=function(K){function b(Y,Q,F){var q=K.call(this,Y)||this;return q.type="geoJSON",q.geometries=Q,q._center=F&&[F[0],F[1]],q}return(0,ue.ZT)(b,K),b.prototype.calcCenter=function(){for(var Q,Y=this.geometries,F=0,q=0;q<Y.length;q++){var G=Y[q],W=G.exterior,J=W&&W.length;J>F&&(Q=G,F=J)}if(Q)return function X(K){for(var b=0,Y=0,Q=0,F=K.length,q=K[F-1][0],G=K[F-1][1],W=0;W<F;W++){var J=K[W][0],V=K[W][1],P=q*V-J*G;b+=P,Y+=(q+J)*P,Q+=(G+V)*P,q=J,G=V}return b?[Y/b/3,Q/b/3,b]:[K[0][0]||0,K[0][1]||0]}(Q.exterior);var V=this.getBoundingRect();return[V.x+V.width/2,V.y+V.height/2]},b.prototype.getBoundingRect=function(Y){var Q=this._rect;if(Q&&!Y)return Q;var F=[1/0,1/0],q=[-1/0,-1/0];return(0,be.each)(this.geometries,function(W){"polygon"===W.type?j(W.exterior,F,q,Y):(0,be.each)(W.points,function(J){j(J,F,q,Y)})}),isFinite(F[0])&&isFinite(F[1])&&isFinite(q[0])&&isFinite(q[1])||(F[0]=F[1]=q[0]=q[1]=0),Q=new Se.Z(F[0],F[1],q[0]-F[0],q[1]-F[1]),Y||(this._rect=Q),Q},b.prototype.contain=function(Y){var Q=this.getBoundingRect(),F=this.geometries;if(!Q.contain(Y[0],Y[1]))return!1;e:for(var q=0,G=F.length;q<G;q++){var W=F[q];if("polygon"===W.type){var V=W.interiors;if(ye.X(W.exterior,Y[0],Y[1])){for(var P=0;P<(V?V.length:0);P++)if(ye.X(V[P],Y[0],Y[1]))continue e;return!0}}}return!1},b.prototype.transformTo=function(Y,Q,F,q){var G=this.getBoundingRect(),W=G.width/G.height;F?q||(q=F/W):F=W*q;for(var J=new Se.Z(Y,Q,F,q),V=G.calculateTransform(J),P=this.geometries,T=0;T<P.length;T++){var R=P[T];"polygon"===R.type?(he(R.exterior,V),(0,be.each)(R.interiors,function(E){he(E,V)})):(0,be.each)(R.points,function(E){he(E,V)})}(G=this._rect).copy(J),this._center=[G.x+G.width/2,G.y+G.height/2]},b.prototype.cloneShallow=function(Y){null==Y&&(Y=this.name);var Q=new b(Y,this.geometries,this._center);return Q._rect=this._rect,Q.transformTo=null,Q},b}(re),ie=function(K){function b(Y,Q){var F=K.call(this,Y)||this;return F.type="geoSVG",F._elOnlyForCalculate=Q,F}return(0,ue.ZT)(b,K),b.prototype.calcCenter=function(){for(var Y=this._elOnlyForCalculate,Q=Y.getBoundingRect(),F=[Q.x+Q.width/2,Q.y+Q.height/2],q=ge.identity(Ce),G=Y;G&&!G.isGeoSVGGraphicRoot;)ge.mul(q,G.getLocalTransform(),q),G=G.parent;return ge.invert(q,q),le.applyTransform(F,F,q),F},b}(re)},776:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>Se});var ue={\u5357\u6d77\u8bf8\u5c9b:[32,80],\u5e7f\u4e1c:[0,-10],\u9999\u6e2f:[10,5],\u6fb3\u95e8:[-10,10],\u5929\u6d25:[5,5]};function Se(le,ye){if("china"===le){var ge=ue[ye.name];if(ge){var be=ye.getCenter();be[0]+=ge[0]/10.5,be[1]+=-ge[1]/14,ye.setCenter(be)}}}},119:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>be});var ue=H(628),Se=H(2224);function ye(Ce,he,j){for(var X=0;X<Ce.length;X++)Ce[X]=ge(Ce[X],he[X],j)}function ge(Ce,he,j){for(var X=[],re=he[0],U=he[1],ee=0;ee<Ce.length;ee+=2){var $=Ce.charCodeAt(ee)-64,ie=Ce.charCodeAt(ee+1)-64;$=$>>1^-(1&$),ie=ie>>1^-(1&ie),re=$+=re,U=ie+=U,X.push([$/j,ie/j])}return X}function be(Ce,he){return Ce=function le(Ce){if(!Ce.UTF8Encoding)return Ce;var he=Ce,j=he.UTF8Scale;return null==j&&(j=1024),ue.each(he.features,function(re){var U=re.geometry,ee=U.encodeOffsets,$=U.coordinates;if(ee)switch(U.type){case"LineString":U.coordinates=ge($,ee,j);break;case"Polygon":case"MultiLineString":ye($,ee,j);break;case"MultiPolygon":ue.each($,function(ie,K){return ye(ie,ee[K],j)})}}),he.UTF8Encoding=!1,he}(Ce),ue.map(ue.filter(Ce.features,function(j){return j.geometry&&j.properties&&j.geometry.coordinates.length>0}),function(j){var X=j.properties,re=j.geometry,U=[];switch(re.type){case"Polygon":var ee=re.coordinates;U.push(new Se.Qh(ee[0],ee.slice(1)));break;case"MultiPolygon":ue.each(re.coordinates,function(ie){ie[0]&&U.push(new Se.Qh(ie[0],ie.slice(1)))});break;case"LineString":U.push(new Se.jM([re.coordinates]));break;case"MultiLineString":U.push(new Se.jM(re.coordinates))}var $=new Se.Ni(X[he||"name"],U,X.cp);return $.properties=X,$})}},7951:(Vt,Qe,H)=>{H.d(Qe,{Qw:()=>be});var ue=H(628),Se=H(1790),le=function(){function he(j,X,re){this._prepareParams(j,X,re)}return he.prototype._prepareParams=function(j,X,re){re[1]<re[0]&&(re=[NaN,NaN]),this._dataMin=re[0],this._dataMax=re[1];var U=this._isOrdinal="ordinal"===j.type;this._needCrossZero="interval"===j.type&&X.getNeedCrossZero&&X.getNeedCrossZero();var ee=this._modelMinRaw=X.get("min",!0);(0,ue.isFunction)(ee)?this._modelMinNum=Ce(j,ee({min:re[0],max:re[1]})):"dataMin"!==ee&&(this._modelMinNum=Ce(j,ee));var $=this._modelMaxRaw=X.get("max",!0);if((0,ue.isFunction)($)?this._modelMaxNum=Ce(j,$({min:re[0],max:re[1]})):"dataMax"!==$&&(this._modelMaxNum=Ce(j,$)),U)this._axisDataLen=X.getCategories().length;else{var ie=X.get("boundaryGap"),K=(0,ue.isArray)(ie)?ie:[ie||0,ie||0];this._boundaryGapInner="boolean"==typeof K[0]||"boolean"==typeof K[1]?[0,0]:[(0,Se.GM)(K[0],1),(0,Se.GM)(K[1],1)]}},he.prototype.calculate=function(){var j=this._isOrdinal,X=this._dataMin,re=this._dataMax,U=this._axisDataLen,ee=this._boundaryGapInner,$=j?null:re-X||Math.abs(X),ie="dataMin"===this._modelMinRaw?X:this._modelMinNum,K="dataMax"===this._modelMaxRaw?re:this._modelMaxNum,b=null!=ie,Y=null!=K;null==ie&&(ie=j?U?0:NaN:X-ee[0]*$),null==K&&(K=j?U?U-1:NaN:re+ee[1]*$),(null==ie||!isFinite(ie))&&(ie=NaN),(null==K||!isFinite(K))&&(K=NaN);var Q=(0,ue.eqNaN)(ie)||(0,ue.eqNaN)(K)||j&&!U;this._needCrossZero&&(ie>0&&K>0&&!b&&(ie=0),ie<0&&K<0&&!Y&&(K=0));var F=this._determinedMin,q=this._determinedMax;return null!=F&&(ie=F,b=!0),null!=q&&(K=q,Y=!0),{min:ie,max:K,minFixed:b,maxFixed:Y,isBlank:Q}},he.prototype.modifyDataMinMax=function(j,X){this[ge[j]]=X},he.prototype.setDeterminedMinMax=function(j,X){this[ye[j]]=X},he.prototype.freeze=function(){this.frozen=!0},he}(),ye={min:"_determinedMin",max:"_determinedMax"},ge={min:"_dataMin",max:"_dataMax"};function be(he,j,X){var re=he.rawExtentInfo;return re||(re=new le(he,j,X),he.rawExtentInfo=re,re)}function Ce(he,j){return null==j?null:(0,ue.eqNaN)(j)?NaN:he.parse(j)}},9506:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>ye});var ue=H(628),Se={};const ye=function(){function ge(){this._coordinateSystems=[]}return ge.prototype.create=function(be,Ce){var he=[];ue.each(Se,function(j,X){var re=j.create(be,Ce);he=he.concat(re||[])}),this._coordinateSystems=he},ge.prototype.update=function(be,Ce){ue.each(this._coordinateSystems,function(he){he.update&&he.update(be,Ce)})},ge.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},ge.register=function(be,Ce){Se[be]=Ce},ge.get=function(be){return Se[be]},ge}()},5433:(Vt,Qe,H)=>{H.d(Qe,{Hr:()=>vh,$j:()=>ac,Ok:()=>uo,HO:()=>Uf,eU:()=>yu,zP:()=>Hr,B9:()=>cd,wL:()=>xv,JE:()=>oc,rp:()=>Yf,FU:()=>Ls,S1:()=>aa,zl:()=>Hc,RS:()=>Ui,qR:()=>Br,yn:()=>xu,I2:()=>zf.I2,je:()=>Ma,sq:()=>bu,Br:()=>Ss,ds:()=>Ua,Pu:()=>zc,aW:()=>Js,OB:()=>na,YK:()=>sc,Og:()=>is,jQ:()=>Uc,i8:()=>fu});var ue=H(5845),Se=H(7806),le=H(628),ye=H(169),ge=H(9995),be=H(6801),Ce=H(1266),he=H(1725),j=H(9447),X="";typeof navigator<"u"&&(X=navigator.platform||"");var re="rgba(0, 0, 0, 0.2)";const U={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:re,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:re,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:re,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:re,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:re,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:re,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:X.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var K,b,Y,ee=H(6153),$=H(157),ie=H(1769),Q="\0_ec_inner",V=function(Ne){function Ge(){return null!==Ne&&Ne.apply(this,arguments)||this}return(0,ue.ZT)(Ge,Ne),Ge.prototype.init=function(Le,ze,Ze,tt,ft,Zt){tt=tt||{},this.option=null,this._theme=new he.Z(tt),this._locale=new he.Z(ft),this._optionManager=Zt},Ge.prototype.setOption=function(Le,ze,Ze){var tt=M(ze);this._optionManager.setOption(Le,Ze,tt),this._resetOption(null,tt)},Ge.prototype.resetOption=function(Le,ze){return this._resetOption(Le,M(ze))},Ge.prototype._resetOption=function(Le,ze){var Ze=!1,tt=this._optionManager;if(!Le||"recreate"===Le){var ft=tt.mountOption("recreate"===Le);this.option&&"recreate"!==Le?(this.restoreData(),this._mergeOption(ft,ze)):Y(this,ft),Ze=!0}if(("timeline"===Le||"media"===Le)&&this.restoreData(),!Le||"recreate"===Le||"timeline"===Le){var Zt=tt.getTimelineOption(this);Zt&&(Ze=!0,this._mergeOption(Zt,ze))}if(!Le||"recreate"===Le||"media"===Le){var Ut=tt.getMediaOption(this);Ut.length&&(0,le.each)(Ut,function(vn){Ze=!0,this._mergeOption(vn,ze)},this)}return Ze},Ge.prototype.mergeOption=function(Le){this._mergeOption(Le,null)},Ge.prototype._mergeOption=function(Le,ze){var Ze=this.option,tt=this._componentsMap,ft=this._componentsCount,Zt=[],Ut=(0,le.createHashMap)(),vn=ze&&ze.replaceMergeMainTypeMap;(0,ee.md)(this),(0,le.each)(Le,function(dt,xt){null!=dt&&(j.Z.hasClass(xt)?xt&&(Zt.push(xt),Ut.set(xt,!0)):Ze[xt]=null==Ze[xt]?(0,le.clone)(dt):(0,le.merge)(Ze[xt],dt,!0))}),vn&&vn.each(function(dt,xt){j.Z.hasClass(xt)&&!Ut.get(xt)&&(Zt.push(xt),Ut.set(xt,!0))}),j.Z.topologicalTravel(Zt,j.Z.getAllClassMainTypes(),function En(dt){var xt=(0,$.R)(this,dt,Ce.kF(Le[dt])),vt=tt.get(dt),Nt=vt?vn&&vn.get(dt)?"replaceMerge":"normalMerge":"replaceAll",Qt=Ce.ab(vt,xt,Nt);Ce.O0(Qt,dt,j.Z),Ze[dt]=null,tt.set(dt,null),ft.set(dt,0);var kn,gn=[],bn=[],Bn=0;(0,le.each)(Qt,function(ei,_r){var yr=ei.existing,ho=ei.newOption;if(ho){var as=j.Z.getClass(dt,ei.keyInfo.subType,!("series"===dt));if(!as)return;if("tooltip"===dt){if(kn)return;kn=!0}if(yr&&yr.constructor===as)yr.name=ei.keyInfo.name,yr.mergeOption(ho,this),yr.optionUpdated(ho,!1);else{var Ki=(0,le.extend)({componentIndex:_r},ei.keyInfo);yr=new as(ho,this,this,Ki),(0,le.extend)(yr,Ki),ei.brandNew&&(yr.__requireNewView=!0),yr.init(ho,this,this),yr.optionUpdated(null,!0)}}else yr&&(yr.mergeOption({},this),yr.optionUpdated({},!1));yr?(gn.push(yr.option),bn.push(yr),Bn++):(gn.push(void 0),bn.push(void 0))},this),Ze[dt]=gn,tt.set(dt,bn),ft.set(dt,Bn),"series"===dt&&K(this)},this),this._seriesIndices||K(this)},Ge.prototype.getOption=function(){var Le=(0,le.clone)(this.option);return(0,le.each)(Le,function(ze,Ze){if(j.Z.hasClass(Ze)){for(var tt=Ce.kF(ze),ft=tt.length,Zt=!1,Ut=ft-1;Ut>=0;Ut--)tt[Ut]&&!Ce.lY(tt[Ut])?Zt=!0:(tt[Ut]=null,!Zt&&ft--);tt.length=ft,Le[Ze]=tt}}),delete Le[Q],Le},Ge.prototype.getTheme=function(){return this._theme},Ge.prototype.getLocaleModel=function(){return this._locale},Ge.prototype.setUpdatePayload=function(Le){this._payload=Le},Ge.prototype.getUpdatePayload=function(){return this._payload},Ge.prototype.getComponent=function(Le,ze){var Ze=this._componentsMap.get(Le);if(Ze){var tt=Ze[ze||0];if(tt)return tt;if(null==ze)for(var ft=0;ft<Ze.length;ft++)if(Ze[ft])return Ze[ft]}},Ge.prototype.queryComponents=function(Le){var ze=Le.mainType;if(!ze)return[];var Ut,Ze=Le.index,tt=Le.id,ft=Le.name,Zt=this._componentsMap.get(ze);return Zt&&Zt.length?(null!=Ze?(Ut=[],(0,le.each)(Ce.kF(Ze),function(vn){Zt[vn]&&Ut.push(Zt[vn])})):Ut=null!=tt?R("id",tt,Zt):null!=ft?R("name",ft,Zt):(0,le.filter)(Zt,function(vn){return!!vn}),E(Ut,Le)):[]},Ge.prototype.findComponents=function(Le){var Ze=Le.mainType,tt=function Zt(vn){var En=Ze+"Index",dt=Ze+"Id",xt=Ze+"Name";return!vn||null==vn[En]&&null==vn[dt]&&null==vn[xt]?null:{mainType:Ze,index:vn[En],id:vn[dt],name:vn[xt]}}(Le.query);return function Ut(vn){return Le.filter?(0,le.filter)(vn,Le.filter):vn}(E(tt?this.queryComponents(tt):(0,le.filter)(this._componentsMap.get(Ze),function(vn){return!!vn}),Le))},Ge.prototype.eachComponent=function(Le,ze,Ze){var tt=this._componentsMap;if((0,le.isFunction)(Le)){var ft=ze,Zt=Le;tt.each(function(dt,xt){for(var vt=0;dt&&vt<dt.length;vt++){var Nt=dt[vt];Nt&&Zt.call(ft,xt,Nt,Nt.componentIndex)}})}else for(var Ut=(0,le.isString)(Le)?tt.get(Le):(0,le.isObject)(Le)?this.findComponents(Le):null,vn=0;Ut&&vn<Ut.length;vn++){var En=Ut[vn];En&&ze.call(Ze,En,En.componentIndex)}},Ge.prototype.getSeriesByName=function(Le){var ze=Ce.U5(Le,null);return(0,le.filter)(this._componentsMap.get("series"),function(Ze){return!!Ze&&null!=ze&&Ze.name===ze})},Ge.prototype.getSeriesByIndex=function(Le){return this._componentsMap.get("series")[Le]},Ge.prototype.getSeriesByType=function(Le){return(0,le.filter)(this._componentsMap.get("series"),function(ze){return!!ze&&ze.subType===Le})},Ge.prototype.getSeries=function(){return(0,le.filter)(this._componentsMap.get("series"),function(Le){return!!Le})},Ge.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},Ge.prototype.eachSeries=function(Le,ze){b(this),(0,le.each)(this._seriesIndices,function(Ze){var tt=this._componentsMap.get("series")[Ze];Le.call(ze,tt,Ze)},this)},Ge.prototype.eachRawSeries=function(Le,ze){(0,le.each)(this._componentsMap.get("series"),function(Ze){Ze&&Le.call(ze,Ze,Ze.componentIndex)})},Ge.prototype.eachSeriesByType=function(Le,ze,Ze){b(this),(0,le.each)(this._seriesIndices,function(tt){var ft=this._componentsMap.get("series")[tt];ft.subType===Le&&ze.call(Ze,ft,tt)},this)},Ge.prototype.eachRawSeriesByType=function(Le,ze,Ze){return(0,le.each)(this.getSeriesByType(Le),ze,Ze)},Ge.prototype.isSeriesFiltered=function(Le){return b(this),null==this._seriesIndicesMap.get(Le.componentIndex)},Ge.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},Ge.prototype.filterSeries=function(Le,ze){b(this);var Ze=[];(0,le.each)(this._seriesIndices,function(tt){var ft=this._componentsMap.get("series")[tt];Le.call(ze,ft,tt)&&Ze.push(tt)},this),this._seriesIndices=Ze,this._seriesIndicesMap=(0,le.createHashMap)(Ze)},Ge.prototype.restoreData=function(Le){K(this);var ze=this._componentsMap,Ze=[];ze.each(function(tt,ft){j.Z.hasClass(ft)&&Ze.push(ft)}),j.Z.topologicalTravel(Ze,j.Z.getAllClassMainTypes(),function(tt){(0,le.each)(ze.get(tt),function(ft){ft&&("series"!==tt||!function P(Ne,Ge){if(Ge){var Le=Ge.seriesIndex,ze=Ge.seriesId,Ze=Ge.seriesName;return null!=Le&&Ne.componentIndex!==Le||null!=ze&&Ne.id!==ze||null!=Ze&&Ne.name!==Ze}}(ft,Le))&&ft.restoreData()})})},Ge.internalField=(K=function(Le){var ze=Le._seriesIndices=[];(0,le.each)(Le._componentsMap.get("series"),function(Ze){Ze&&ze.push(Ze.componentIndex)}),Le._seriesIndicesMap=(0,le.createHashMap)(ze)},b=function(Le){},void(Y=function(Le,ze){Le.option={},Le.option[Q]=1,Le._componentsMap=(0,le.createHashMap)({series:[]}),Le._componentsCount=(0,le.createHashMap)();var Ze=ze.aria;(0,le.isObject)(Ze)&&null==Ze.enabled&&(Ze.enabled=!0),function T(Ne,Ge){var Le=Ne.color&&!Ne.colorLayer;(0,le.each)(Ge,function(ze,Ze){"colorLayer"===Ze&&Le||j.Z.hasClass(Ze)||("object"==typeof ze?Ne[Ze]=Ne[Ze]?(0,le.merge)(Ne[Ze],ze,!1):(0,le.clone)(ze):null==Ne[Ze]&&(Ne[Ze]=ze))})}(ze,Le._theme.option),(0,le.merge)(ze,U,!1),Le._mergeOption(ze,null)})),Ge}(he.Z);function R(Ne,Ge,Le){if((0,le.isArray)(Ge)){var ze=(0,le.createHashMap)();return(0,le.each)(Ge,function(tt){null!=tt&&null!=Ce.U5(tt,null)&&ze.set(tt,!0)}),(0,le.filter)(Le,function(tt){return tt&&ze.get(tt[Ne])})}var Ze=Ce.U5(Ge,null);return(0,le.filter)(Le,function(tt){return tt&&null!=Ze&&tt[Ne]===Ze})}function E(Ne,Ge){return Ge.hasOwnProperty("subType")?(0,le.filter)(Ne,function(Le){return Le&&Le.subType===Ge.subType}):Ne}function M(Ne){var Ge=(0,le.createHashMap)();return Ne&&(0,le.each)(Ce.kF(Ne.replaceMerge),function(Le){Ge.set(Le,!0)}),{replaceMergeMainTypeMap:Ge}}(0,le.mixin)(V,ie._);const A=V;var O=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"];const ce=function Ne(Ge){le.each(O,function(Le){this[Le]=le.bind(Ge[Le],Ge)},this)};var ae=H(9506),oe=/^(min|max)?(.+)$/;function xe(Ne,Ge,Le){var ze={width:Ge,height:Le,aspectratio:Ge/Le},Ze=!0;return(0,le.each)(Ne,function(tt,ft){var Zt=ft.match(oe);if(Zt&&Zt[1]&&Zt[2]){var Ut=Zt[1],vn=Zt[2].toLowerCase();(function fe(Ne,Ge,Le){return"min"===Le?Ne>=Ge:"max"===Le?Ne<=Ge:Ne===Ge})(ze[vn],tt,Ut)||(Ze=!1)}}),Ze}const we=function(){function Ne(Ge){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=Ge}return Ne.prototype.setOption=function(Ge,Le,ze){Ge&&((0,le.each)((0,Ce.kF)(Ge.series),function(ft){ft&&ft.data&&(0,le.isTypedArray)(ft.data)&&(0,le.setAsPrimitive)(ft.data)}),(0,le.each)((0,Ce.kF)(Ge.dataset),function(ft){ft&&ft.source&&(0,le.isTypedArray)(ft.source)&&(0,le.setAsPrimitive)(ft.source)})),Ge=(0,le.clone)(Ge);var Ze=this._optionBackup,tt=function ne(Ne,Ge,Le){var Ze,tt,ze=[],ft=Ne.baseOption,Zt=Ne.timeline,Ut=Ne.options,vn=Ne.media,En=!!Ne.media,dt=!!(Ut||Zt||ft&&ft.timeline);function xt(vt){(0,le.each)(Ge,function(Nt){Nt(vt,Le)})}return ft?(tt=ft).timeline||(tt.timeline=Zt):((dt||En)&&(Ne.options=Ne.media=null),tt=Ne),En&&(0,le.isArray)(vn)&&(0,le.each)(vn,function(vt){vt&&vt.option&&(vt.query?ze.push(vt):Ze||(Ze=vt))}),xt(tt),(0,le.each)(Ut,function(vt){return xt(vt)}),(0,le.each)(ze,function(vt){return xt(vt.option)}),{baseOption:tt,timelineOptions:Ut||[],mediaDefault:Ze,mediaList:ze}}(Ge,Le,!Ze);this._newBaseOption=tt.baseOption,Ze?(tt.timelineOptions.length&&(Ze.timelineOptions=tt.timelineOptions),tt.mediaList.length&&(Ze.mediaList=tt.mediaList),tt.mediaDefault&&(Ze.mediaDefault=tt.mediaDefault)):this._optionBackup=tt},Ne.prototype.mountOption=function(Ge){var Le=this._optionBackup;return this._timelineOptions=Le.timelineOptions,this._mediaList=Le.mediaList,this._mediaDefault=Le.mediaDefault,this._currentMediaIndices=[],(0,le.clone)(Ge?Le.baseOption:this._newBaseOption)},Ne.prototype.getTimelineOption=function(Ge){var Le,ze=this._timelineOptions;if(ze.length){var Ze=Ge.getComponent("timeline");Ze&&(Le=(0,le.clone)(ze[Ze.getCurrentIndex()]))}return Le},Ne.prototype.getMediaOption=function(Ge){var Le=this._api.getWidth(),ze=this._api.getHeight(),Ze=this._mediaList,tt=this._mediaDefault,ft=[],Zt=[];if(!Ze.length&&!tt)return Zt;for(var Ut=0,vn=Ze.length;Ut<vn;Ut++)xe(Ze[Ut].query,Le,ze)&&ft.push(Ut);return!ft.length&&tt&&(ft=[-1]),ft.length&&!function ve(Ne,Ge){return Ne.join(",")===Ge.join(",")}(ft,this._currentMediaIndices)&&(Zt=(0,le.map)(ft,function(En){return(0,le.clone)(-1===En?tt.option:Ze[En].option)})),this._currentMediaIndices=ft,Zt},Ne}();var Te=le.each,Ae=le.isObject,Ee=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function Ve(Ne){var Ge=Ne&&Ne.itemStyle;if(Ge)for(var Le=0,ze=Ee.length;Le<ze;Le++){var Ze=Ee[Le],tt=Ge.normal,ft=Ge.emphasis;tt&&tt[Ze]&&(Ne[Ze]=Ne[Ze]||{},Ne[Ze].normal?le.merge(Ne[Ze].normal,tt[Ze]):Ne[Ze].normal=tt[Ze],tt[Ze]=null),ft&&ft[Ze]&&(Ne[Ze]=Ne[Ze]||{},Ne[Ze].emphasis?le.merge(Ne[Ze].emphasis,ft[Ze]):Ne[Ze].emphasis=ft[Ze],ft[Ze]=null)}}function He(Ne,Ge,Le){if(Ne&&Ne[Ge]&&(Ne[Ge].normal||Ne[Ge].emphasis)){var ze=Ne[Ge].normal,Ze=Ne[Ge].emphasis;ze&&(Le?(Ne[Ge].normal=Ne[Ge].emphasis=null,le.defaults(Ne[Ge],ze)):Ne[Ge]=ze),Ze&&(Ne.emphasis=Ne.emphasis||{},Ne.emphasis[Ge]=Ze,Ze.focus&&(Ne.emphasis.focus=Ze.focus),Ze.blurScope&&(Ne.emphasis.blurScope=Ze.blurScope))}}function We(Ne){He(Ne,"itemStyle"),He(Ne,"lineStyle"),He(Ne,"areaStyle"),He(Ne,"label"),He(Ne,"labelLine"),He(Ne,"upperLabel"),He(Ne,"edgeLabel")}function $e(Ne,Ge){var Le=Ae(Ne)&&Ne[Ge],ze=Ae(Le)&&Le.textStyle;if(ze)for(var Ze=0,tt=Ce.Td.length;Ze<tt;Ze++){var ft=Ce.Td[Ze];ze.hasOwnProperty(ft)&&(Le[ft]=ze[ft])}}function ct(Ne){Ne&&(We(Ne),$e(Ne,"label"),Ne.emphasis&&$e(Ne.emphasis,"label"))}function _t(Ne){return le.isArray(Ne)?Ne:Ne?[Ne]:[]}function Ot(Ne){return(le.isArray(Ne)?Ne[0]:Ne)||{}}function Vn(Ne){Ne&&(0,le.each)(sr,function(Ge){Ge[0]in Ne&&!(Ge[1]in Ne)&&(Ne[Ge[1]]=Ne[Ge[0]])})}var sr=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],$n=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],gr=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function er(Ne){var Ge=Ne&&Ne.itemStyle;if(Ge)for(var Le=0;Le<gr.length;Le++){var ze=gr[Le][1];null!=Ge[ze]&&(Ge[gr[Le][0]]=Ge[ze])}}function Kt(Ne){!Ne||"edge"===Ne.alignTo&&null!=Ne.margin&&null==Ne.edgeDistance&&(Ne.edgeDistance=Ne.margin)}function cn(Ne){!Ne||Ne.downplay&&!Ne.blur&&(Ne.blur=Ne.downplay)}function jn(Ne,Ge){if(Ne)for(var Le=0;Le<Ne.length;Le++)Ge(Ne[Le]),Ne[Le]&&jn(Ne[Le].children,Ge)}function et(Ne,Ge){(function Ht(Ne,Ge){Te(_t(Ne.series),function(ze){Ae(ze)&&function St(Ne){if(Ae(Ne)){Ve(Ne),We(Ne),$e(Ne,"label"),$e(Ne,"upperLabel"),$e(Ne,"edgeLabel"),Ne.emphasis&&($e(Ne.emphasis,"label"),$e(Ne.emphasis,"upperLabel"),$e(Ne.emphasis,"edgeLabel"));var Ge=Ne.markPoint;Ge&&(Ve(Ge),ct(Ge));var Le=Ne.markLine;Le&&(Ve(Le),ct(Le));var ze=Ne.markArea;ze&&ct(ze);var Ze=Ne.data;if("graph"===Ne.type){Ze=Ze||Ne.nodes;var tt=Ne.links||Ne.edges;if(tt&&!le.isTypedArray(tt))for(var ft=0;ft<tt.length;ft++)ct(tt[ft]);le.each(Ne.categories,function(vn){We(vn)})}if(Ze&&!le.isTypedArray(Ze))for(ft=0;ft<Ze.length;ft++)ct(Ze[ft]);if((Ge=Ne.markPoint)&&Ge.data){var Zt=Ge.data;for(ft=0;ft<Zt.length;ft++)ct(Zt[ft])}if((Le=Ne.markLine)&&Le.data){var Ut=Le.data;for(ft=0;ft<Ut.length;ft++)le.isArray(Ut[ft])?(ct(Ut[ft][0]),ct(Ut[ft][1])):ct(Ut[ft])}"gauge"===Ne.type?($e(Ne,"axisLabel"),$e(Ne,"title"),$e(Ne,"detail")):"treemap"===Ne.type?(He(Ne.breadcrumb,"itemStyle"),le.each(Ne.levels,function(vn){We(vn)})):"tree"===Ne.type&&We(Ne.leaves)}}(ze)});var Le=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];Ge&&Le.push("valueAxis","categoryAxis","logAxis","timeAxis"),Te(Le,function(ze){Te(_t(Ne[ze]),function(Ze){Ze&&($e(Ze,"axisLabel"),$e(Ze.axisPointer,"label"))})}),Te(_t(Ne.parallel),function(ze){var Ze=ze&&ze.parallelAxisDefault;$e(Ze,"axisLabel"),$e(Ze&&Ze.axisPointer,"label")}),Te(_t(Ne.calendar),function(ze){He(ze,"itemStyle"),$e(ze,"dayLabel"),$e(ze,"monthLabel"),$e(ze,"yearLabel")}),Te(_t(Ne.radar),function(ze){$e(ze,"name"),ze.name&&null==ze.axisName&&(ze.axisName=ze.name,delete ze.name),null!=ze.nameGap&&null==ze.axisNameGap&&(ze.axisNameGap=ze.nameGap,delete ze.nameGap)}),Te(_t(Ne.geo),function(ze){Ae(ze)&&(ct(ze),Te(_t(ze.regions),function(Ze){ct(Ze)}))}),Te(_t(Ne.timeline),function(ze){ct(ze),He(ze,"label"),He(ze,"itemStyle"),He(ze,"controlStyle",!0);var Ze=ze.data;le.isArray(Ze)&&le.each(Ze,function(tt){le.isObject(tt)&&(He(tt,"label"),He(tt,"itemStyle"))})}),Te(_t(Ne.toolbox),function(ze){He(ze,"iconStyle"),Te(ze.feature,function(Ze){He(Ze,"iconStyle")})}),$e(Ot(Ne.axisPointer),"label"),$e(Ot(Ne.tooltip).axisPointer,"label")})(Ne,Ge),Ne.series=(0,Ce.kF)(Ne.series),(0,le.each)(Ne.series,function(Le){if((0,le.isObject)(Le)){var ze=Le.type;if("line"===ze)null!=Le.clipOverflow&&(Le.clip=Le.clipOverflow);else if("pie"===ze||"gauge"===ze){if(null!=Le.clockWise&&(Le.clockwise=Le.clockWise),Kt(Le.label),(Ze=Le.data)&&!(0,le.isTypedArray)(Ze))for(var tt=0;tt<Ze.length;tt++)Kt(Ze[tt]);null!=Le.hoverOffset&&(Le.emphasis=Le.emphasis||{},(Le.emphasis.scaleSize=null)&&(Le.emphasis.scaleSize=Le.hoverOffset))}else if("gauge"===ze){var ft=function an(Ne,Ge){for(var Le=Ge.split(","),ze=Ne,Ze=0;Ze<Le.length&&null!=(ze=ze&&ze[Le[Ze]]);Ze++);return ze}(Le,"pointer.color");null!=ft&&function hn(Ne,Ge,Le,ze){for(var ft,Ze=Ge.split(","),tt=Ne,Zt=0;Zt<Ze.length-1;Zt++)null==tt[ft=Ze[Zt]]&&(tt[ft]={}),tt=tt[ft];(ze||null==tt[Ze[Zt]])&&(tt[Ze[Zt]]=Le)}(Le,"itemStyle.color",ft)}else if("bar"===ze){var Ze;if(er(Le),er(Le.backgroundStyle),er(Le.emphasis),(Ze=Le.data)&&!(0,le.isTypedArray)(Ze))for(tt=0;tt<Ze.length;tt++)"object"==typeof Ze[tt]&&(er(Ze[tt]),er(Ze[tt]&&Ze[tt].emphasis))}else if("sunburst"===ze){var Zt=Le.highlightPolicy;Zt&&(Le.emphasis=Le.emphasis||{},Le.emphasis.focus||(Le.emphasis.focus=Zt)),cn(Le),jn(Le.data,cn)}else"graph"===ze||"sankey"===ze?function On(Ne){!Ne||null!=Ne.focusNodeAdjacency&&(Ne.emphasis=Ne.emphasis||{},null==Ne.emphasis.focus&&(Ne.emphasis.focus="adjacency"))}(Le):"map"===ze&&(Le.mapType&&!Le.map&&(Le.map=Le.mapType),Le.mapLocation&&(0,le.defaults)(Le,Le.mapLocation));null!=Le.hoverAnimation&&(Le.emphasis=Le.emphasis||{},Le.emphasis&&null==Le.emphasis.scale&&(Le.emphasis.scale=Le.hoverAnimation)),Vn(Le)}}),Ne.dataRange&&(Ne.visualMap=Ne.dataRange),(0,le.each)($n,function(Le){var ze=Ne[Le];ze&&((0,le.isArray)(ze)||(ze=[ze]),(0,le.each)(ze,function(Ze){Vn(Ze)}))})}var Tt=H(4785);function Rt(Ne){(0,le.each)(Ne,function(Ge,Le){var ze=[],Ze=[NaN,NaN],tt=[Ge.stackResultDimension,Ge.stackedOverDimension],ft=Ge.data,Zt=Ge.isStackedByIndex,Ut=Ge.seriesModel.get("stackStrategy")||"samesign";ft.modify(tt,function(vn,En,dt){var vt,Nt,xt=ft.get(Ge.stackedDimension,dt);if(isNaN(xt))return Ze;Zt?Nt=ft.getRawIndex(dt):vt=ft.get(Ge.stackedByDimension,dt);for(var Qt=NaN,gn=Le-1;gn>=0;gn--){var bn=Ne[gn];if(Zt||(Nt=bn.data.rawIndexOf(bn.stackedByDimension,vt)),Nt>=0){var Bn=bn.data.getByRawIndex(bn.stackResultDimension,Nt);if("all"===Ut||"positive"===Ut&&Bn>0||"negative"===Ut&&Bn<0||"samesign"===Ut&&xt>=0&&Bn>0||"samesign"===Ut&&xt<=0&&Bn<0){xt=(0,Tt.S$)(xt,Bn),Qt=Bn;break}}}return ze[0]=xt,ze[1]=Qt,ze})})}var fn=H(9521),fr=H(9899),pr=H(1005),rt=H(3160),ot=H(6766),st=H(3802),je=H(126),gt=H(7282),ht=H(6869),Pt=H(357),tn=H(5632),Pn=H(7327),Tn=H(3331),lr=(0,Ce.Yf)(),yi={itemStyle:(0,tn.Z)(Pn.t,!0),lineStyle:(0,tn.Z)(Tn.v,!0)},cr={lineStyle:"stroke",itemStyle:"fill"};function ta(Ne,Ge){return Ne.visualStyleMapper||yi[Ge]||(console.warn("Unkown style type '"+Ge+"'."),yi.itemStyle)}function ra(Ne,Ge){return Ne.visualDrawType||cr[Ge]||(console.warn("Unkown style type '"+Ge+"'."),"fill")}var Ql={createOnAllSeries:!0,performRawSeries:!0,reset:function(Ne,Ge){var Le=Ne.getData(),ze=Ne.visualStyleAccessPath||"itemStyle",Ze=Ne.getModel(ze),ft=ta(Ne,ze)(Ze),Zt=Ze.getShallow("decal");Zt&&(Le.setVisual("decal",Zt),Zt.dirty=!0);var Ut=ra(Ne,ze),vn=ft[Ut],En=(0,le.isFunction)(vn)?vn:null;if(!ft[Ut]||En||"auto"===ft.fill||"auto"===ft.stroke){var xt=Ne.getColorFromPalette(Ne.name,null,Ge.getSeriesCount());ft[Ut]||(ft[Ut]=xt,Le.setVisual("colorFromPalette",!0)),ft.fill="auto"===ft.fill||(0,le.isFunction)(ft.fill)?xt:ft.fill,ft.stroke="auto"===ft.stroke||(0,le.isFunction)(ft.stroke)?xt:ft.stroke}if(Le.setVisual("style",ft),Le.setVisual("drawType",Ut),!Ge.isSeriesFiltered(Ne)&&En)return Le.setVisual("colorFromPalette",!1),{dataEach:function(vt,Nt){var Qt=Ne.getDataParams(Nt),gn=(0,le.extend)({},ft);gn[Ut]=En(Qt),vt.setItemVisual(Nt,"style",gn)}}}},Cs=new he.Z,Sa={createOnAllSeries:!0,performRawSeries:!0,reset:function(Ne,Ge){if(!Ne.ignoreStyleOnData&&!Ge.isSeriesFiltered(Ne)){var Le=Ne.getData(),ze=Ne.visualStyleAccessPath||"itemStyle",Ze=ta(Ne,ze),tt=Le.getVisual("drawType");return{dataEach:Le.hasItemOption?function(ft,Zt){var Ut=ft.getRawDataItem(Zt);if(Ut&&Ut[ze]){Cs.option=Ut[ze];var vn=Ze(Cs),En=ft.ensureUniqueItemVisual(Zt,"style");(0,le.extend)(En,vn),Cs.option.decal&&(ft.setItemVisual(Zt,"decal",Cs.option.decal),Cs.option.decal.dirty=!0),tt in vn&&ft.setItemVisual(Zt,"colorFromPalette",!1)}}:null}}}},Ja={performRawSeries:!0,overallReset:function(Ne){var Ge=(0,le.createHashMap)();Ne.eachSeries(function(Le){var ze=Le.getColorBy();if(!Le.isColorBySeries()){var Ze=Le.type+"-"+ze,tt=Ge.get(Ze);tt||Ge.set(Ze,tt={}),lr(Le).scope=tt}}),Ne.eachSeries(function(Le){if(!Le.isColorBySeries()&&!Ne.isSeriesFiltered(Le)){var ze=Le.getRawData(),Ze={},tt=Le.getData(),ft=lr(Le).scope,Ut=ra(Le,Le.visualStyleAccessPath||"itemStyle");tt.each(function(vn){var En=tt.getRawIndex(vn);Ze[En]=vn}),ze.each(function(vn){var En=Ze[vn];if(tt.getItemVisual(En,"colorFromPalette")){var xt=tt.ensureUniqueItemVisual(En,"style"),vt=ze.getName(vn)||vn+"",Nt=ze.count();xt[Ut]=Le.getColorFromPalette(vt,ft,Nt)}})}})}},ua=H(8539),$s=H(8208),La=H(8234),fh=Math.PI,hu=H(6861),Ff=H(2015),Bc=function(){function Ne(Ge,Le,ze,Ze){this._stageTaskMap=(0,le.createHashMap)(),this.ecInstance=Ge,this.api=Le,ze=this._dataProcessorHandlers=ze.slice(),Ze=this._visualHandlers=Ze.slice(),this._allHandlers=ze.concat(Ze)}return Ne.prototype.restoreData=function(Ge,Le){Ge.restoreData(Le),this._stageTaskMap.each(function(ze){var Ze=ze.overallTask;Ze&&Ze.dirty()})},Ne.prototype.getPerformArgs=function(Ge,Le){if(Ge.__pipeline){var ze=this._pipelineMap.get(Ge.__pipeline.id),Ze=ze.context,ft=!Le&&ze.progressiveEnabled&&(!Ze||Ze.progressiveRender)&&Ge.__idxInPipeline>ze.blockIndex?ze.step:null,Zt=Ze&&Ze.modDataCount;return{step:ft,modBy:null!=Zt?Math.ceil(Zt/ft):null,modDataCount:Zt}}},Ne.prototype.getPipeline=function(Ge){return this._pipelineMap.get(Ge)},Ne.prototype.updateStreamModes=function(Ge,Le){var ze=this._pipelineMap.get(Ge.uid),tt=Ge.getData().count(),ft=ze.progressiveEnabled&&Le.incrementalPrepareRender&&tt>=ze.threshold,Zt=Ge.get("large")&&tt>=Ge.get("largeThreshold"),Ut="mod"===Ge.get("progressiveChunkMode")?tt:null;Ge.pipelineContext=ze.context={progressiveRender:ft,modDataCount:Ut,large:Zt}},Ne.prototype.restorePipelines=function(Ge){var Le=this,ze=Le._pipelineMap=(0,le.createHashMap)();Ge.eachSeries(function(Ze){var tt=Ze.getProgressive(),ft=Ze.uid;ze.set(ft,{id:ft,head:null,tail:null,threshold:Ze.getProgressiveThreshold(),progressiveEnabled:tt&&!(Ze.preventIncremental&&Ze.preventIncremental()),blockIndex:-1,step:Math.round(tt||700),count:0}),Le._pipe(Ze,Ze.dataTask)})},Ne.prototype.prepareStageTasks=function(){var Ge=this._stageTaskMap,Le=this.api.getModel(),ze=this.api;(0,le.each)(this._allHandlers,function(Ze){var tt=Ge.get(Ze.uid)||Ge.set(Ze.uid,{});(0,le.assert)(!(Ze.reset&&Ze.overallReset),""),Ze.reset&&this._createSeriesStageTask(Ze,tt,Le,ze),Ze.overallReset&&this._createOverallStageTask(Ze,tt,Le,ze)},this)},Ne.prototype.prepareView=function(Ge,Le,ze,Ze){var tt=Ge.renderTask,ft=tt.context;ft.model=Le,ft.ecModel=ze,ft.api=Ze,tt.__block=!Ge.incrementalPrepareRender,this._pipe(Le,tt)},Ne.prototype.performDataProcessorTasks=function(Ge,Le){this._performStageTasks(this._dataProcessorHandlers,Ge,Le,{block:!0})},Ne.prototype.performVisualTasks=function(Ge,Le,ze){this._performStageTasks(this._visualHandlers,Ge,Le,ze)},Ne.prototype._performStageTasks=function(Ge,Le,ze,Ze){Ze=Ze||{};var tt=!1,ft=this;function Zt(Ut,vn){return Ut.setDirty&&(!Ut.dirtyMap||Ut.dirtyMap.get(vn.__pipeline.id))}(0,le.each)(Ge,function(Ut,vn){if(!Ze.visualType||Ze.visualType===Ut.visualType){var En=ft._stageTaskMap.get(Ut.uid),dt=En.seriesTaskMap,xt=En.overallTask;if(xt){var vt,Nt=xt.agentStubMap;Nt.each(function(gn){Zt(Ze,gn)&&(gn.dirty(),vt=!0)}),vt&&xt.dirty(),ft.updatePayload(xt,ze);var Qt=ft.getPerformArgs(xt,Ze.block);Nt.each(function(gn){gn.perform(Qt)}),xt.perform(Qt)&&(tt=!0)}else dt&&dt.each(function(gn,bn){Zt(Ze,gn)&&gn.dirty();var Bn=ft.getPerformArgs(gn,Ze.block);Bn.skip=!Ut.performRawSeries&&Le.isSeriesFiltered(gn.context.model),ft.updatePayload(gn,ze),gn.perform(Bn)&&(tt=!0)})}}),this.unfinished=tt||this.unfinished},Ne.prototype.performSeriesTasks=function(Ge){var Le;Ge.eachSeries(function(ze){Le=ze.dataTask.perform()||Le}),this.unfinished=Le||this.unfinished},Ne.prototype.plan=function(){this._pipelineMap.each(function(Ge){var Le=Ge.tail;do{if(Le.__block){Ge.blockIndex=Le.__idxInPipeline;break}Le=Le.getUpstream()}while(Le)})},Ne.prototype.updatePayload=function(Ge,Le){"remain"!==Le&&(Ge.context.payload=Le)},Ne.prototype._createSeriesStageTask=function(Ge,Le,ze,Ze){var tt=this,ft=Le.seriesTaskMap,Zt=Le.seriesTaskMap=(0,le.createHashMap)(),Ut=Ge.seriesType,vn=Ge.getTargetSeries;function En(dt){var xt=dt.uid,vt=Zt.set(xt,ft&&ft.get(xt)||(0,hu.v)({plan:gv,reset:t0,count:Ks}));vt.context={model:dt,ecModel:ze,api:Ze,useClearVisual:Ge.isVisual&&!Ge.isLayout,plan:Ge.plan,reset:Ge.reset,scheduler:tt},tt._pipe(dt,vt)}Ge.createOnAllSeries?ze.eachRawSeries(En):Ut?ze.eachRawSeriesByType(Ut,En):vn&&vn(ze,Ze).each(En)},Ne.prototype._createOverallStageTask=function(Ge,Le,ze,Ze){var tt=this,ft=Le.overallTask=Le.overallTask||(0,hu.v)({reset:id});ft.context={ecModel:ze,api:Ze,overallReset:Ge.overallReset,scheduler:tt};var Zt=ft.agentStubMap,Ut=ft.agentStubMap=(0,le.createHashMap)(),vn=Ge.seriesType,En=Ge.getTargetSeries,dt=!0,xt=!1;function Nt(Qt){var gn=Qt.uid,bn=Ut.set(gn,Zt&&Zt.get(gn)||(xt=!0,(0,hu.v)({reset:hv,onDirty:pv})));bn.context={model:Qt,overallProgress:dt},bn.agent=ft,bn.__block=dt,tt._pipe(Qt,bn)}(0,le.assert)(!Ge.createOnAllSeries,""),vn?ze.eachRawSeriesByType(vn,Nt):En?En(ze,Ze).each(Nt):(dt=!1,(0,le.each)(ze.getSeries(),Nt)),xt&&ft.dirty()},Ne.prototype._pipe=function(Ge,Le){var Ze=this._pipelineMap.get(Ge.uid);!Ze.head&&(Ze.head=Le),Ze.tail&&Ze.tail.pipe(Le),Ze.tail=Le,Le.__idxInPipeline=Ze.count++,Le.__pipeline=Ze},Ne.wrapStageHandler=function(Ge,Le){return(0,le.isFunction)(Ge)&&(Ge={overallReset:Ge,seriesType:Xi(Ge)}),Ge.uid=(0,Ff.Kr)("stageHandler"),Le&&(Ge.visualType=Le),Ge},Ne}();function id(Ne){Ne.overallReset(Ne.ecModel,Ne.api,Ne.payload)}function hv(Ne){return Ne.overallProgress&&fv}function fv(){this.agent.dirty(),this.getDownstream().dirty()}function pv(){this.agent&&this.agent.dirty()}function gv(Ne){return Ne.plan?Ne.plan(Ne.model,Ne.ecModel,Ne.api,Ne.payload):null}function t0(Ne){Ne.useClearVisual&&Ne.data.clearAllVisual();var Ge=Ne.resetDefines=(0,Ce.kF)(Ne.reset(Ne.model,Ne.ecModel,Ne.api,Ne.payload));return Ge.length>1?(0,le.map)(Ge,function(Le,ze){return At(ze)}):n0}var n0=At(0);function At(Ne){return function(Ge,Le){var ze=Le.data,Ze=Le.resetDefines[Ne];if(Ze&&Ze.dataEach)for(var tt=Ge.start;tt<Ge.end;tt++)Ze.dataEach(ze,tt);else Ze&&Ze.progress&&Ze.progress(Ge,ze)}}function Ks(Ne){return Ne.data.count()}function Xi(Ne){Oa=null;try{Ne(si,Rn)}catch{}return Oa}var Oa,si={},Rn={};function Bf(Ne,Ge){for(var Le in Ge.prototype)Ne[Le]=le.noop}Bf(si,A),Bf(Rn,ce),si.eachSeriesByType=si.eachRawSeriesByType=function(Ne){Oa=Ne},si.eachComponent=function(Ne){"series"===Ne.mainType&&Ne.subType&&(Oa=Ne.subType)};const Sn=Bc;var _n=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const Tr={color:_n,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],_n]};var Wt="#B9B8CE",ad="#100C2A",El=function(){return{axisLine:{lineStyle:{color:Wt}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},zr=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],qt={darkMode:!0,color:zr,backgroundColor:ad,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Wt}},textStyle:{color:Wt},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Wt}},dataZoom:{borderColor:"#71708A",textStyle:{color:Wt},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Wt}},timeline:{lineStyle:{color:Wt},label:{color:Wt},controlStyle:{color:Wt,borderColor:Wt}},calendar:{itemStyle:{color:ad},dayLabel:{color:Wt},monthLabel:{color:Wt},yearLabel:{color:Wt}},timeAxis:El(),logAxis:El(),valueAxis:El(),categoryAxis:El(),line:{symbol:"circle"},graph:{color:zr},gauge:{title:{color:Wt},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Wt},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};qt.categoryAxis.splitLine.show=!1;const Vf=qt;var vv=H(1087),Jt=function(){function Ne(){}return Ne.prototype.normalizeQuery=function(Ge){var Le={},ze={},Ze={};if(le.isString(Ge)){var tt=(0,vv.u9)(Ge);Le.mainType=tt.main||null,Le.subType=tt.sub||null}else{var ft=["Index","Name","Id"],Zt={name:1,dataIndex:1,dataType:1};le.each(Ge,function(Ut,vn){for(var En=!1,dt=0;dt<ft.length;dt++){var xt=ft[dt],vt=vn.lastIndexOf(xt);if(vt>0&&vt===vn.length-xt.length){var Nt=vn.slice(0,vt);"data"!==Nt&&(Le.mainType=Nt,Le[xt.toLowerCase()]=Ut,En=!0)}}Zt.hasOwnProperty(vn)&&(ze[vn]=Ut,En=!0),En||(Ze[vn]=Ut)})}return{cptQuery:Le,dataQuery:ze,otherQuery:Ze}},Ne.prototype.filter=function(Ge,Le){var ze=this.eventInfo;if(!ze)return!0;var Ze=ze.targetEl,tt=ze.packedEvent,ft=ze.model,Zt=ze.view;if(!ft||!Zt)return!0;var Ut=Le.cptQuery,vn=Le.dataQuery;return En(Ut,ft,"mainType")&&En(Ut,ft,"subType")&&En(Ut,ft,"index","componentIndex")&&En(Ut,ft,"name")&&En(Ut,ft,"id")&&En(vn,tt,"name")&&En(vn,tt,"dataIndex")&&En(vn,tt,"dataType")&&(!Zt.filterForExposedEvent||Zt.filterForExposedEvent(Ge,Le.otherQuery,Ze,tt));function En(dt,xt,vt,Nt){return null==dt[vt]||xt[Nt||vt]===dt[vt]}},Ne.prototype.afterTrigger=function(){this.eventInfo=null},Ne}(),ql=["symbol","symbolSize","symbolRotate","symbolOffset"],Pr=ql.concat(["symbolKeepAspect"]),bi={createOnAllSeries:!0,performRawSeries:!0,reset:function(Ne,Ge){var Le=Ne.getData();if(Ne.legendIcon&&Le.setVisual("legendIcon",Ne.legendIcon),Ne.hasSymbolVisual){for(var ze={},Ze={},tt=!1,ft=0;ft<ql.length;ft++){var Zt=ql[ft],Ut=Ne.get(Zt);(0,le.isFunction)(Ut)?(tt=!0,Ze[Zt]=Ut):ze[Zt]=Ut}if(ze.symbol=ze.symbol||Ne.defaultSymbol,Le.setVisual((0,le.extend)({legendIcon:Ne.legendIcon||ze.symbol,symbolKeepAspect:Ne.get("symbolKeepAspect")},ze)),!Ge.isSeriesFiltered(Ne)){var vn=(0,le.keys)(Ze);return{dataEach:tt?function En(dt,xt){for(var vt=Ne.getRawValue(xt),Nt=Ne.getDataParams(xt),Qt=0;Qt<vn.length;Qt++){var gn=vn[Qt];dt.setItemVisual(xt,gn,Ze[gn](vt,Nt))}}:null}}}}},r0={createOnAllSeries:!0,performRawSeries:!0,reset:function(Ne,Ge){if(Ne.hasSymbolVisual&&!Ge.isSeriesFiltered(Ne))return{dataEach:Ne.getData().hasItemOption?function ze(Ze,tt){for(var ft=Ze.getItemModel(tt),Zt=0;Zt<Pr.length;Zt++){var Ut=Pr[Zt],vn=ft.getShallow(Ut,!0);null!=vn&&Ze.setItemVisual(tt,Ut,vn)}}:null}}},od=H(5018),Jl=H(5577),sd=H(960),es=H(7664),zf=H(5514),Qs=H(4649),a0=H(8177);const xn=new be.Z;var ws=H(5730),ec=H(5831),tc=typeof window<"u",fu="5.4.0",Uf={zrender:"5.4.0"},vh={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:2e3,CHART:3e3,POST_CHART_LAYOUT:4600,COMPONENT:4e3,BRUSH:5e3,CHART_ITEM:4500,ARIA:6e3,DECAL:7e3}},za="__flagInMainProcess",Vo="__pendingUpdate",nr="__needsUpdateStatus",mh=/^[a-zA-Z0-9_]+$/,Wf="__connectUpdateStatus";function Il(Ne){return function(){for(var Ge=[],Le=0;Le<arguments.length;Le++)Ge[Le]=arguments[Le];if(!this.isDisposed())return l0(this,Ne,Ge)}}function rs(Ne){return function(){for(var Ge=[],Le=0;Le<arguments.length;Le++)Ge[Le]=arguments[Le];return l0(this,Ne,Ge)}}function l0(Ne,Ge,Le){return Le[0]=Le[0]&&Le[0].toLowerCase(),be.Z.prototype[Ge].apply(Ne,Le)}var _v=function(Ne){function Ge(){return null!==Ne&&Ne.apply(this,arguments)||this}return(0,ue.ZT)(Ge,Ne),Ge}(be.Z),zo=_v.prototype;zo.on=rs("on"),zo.off=rs("off");var Ti,yv,jf,co,ni,vu,ld,nc,mu,Ho,Vc,_u,Zn,_h,Zf,Uo,tr,bv,rc=function(Ne){function Ge(Le,ze,Ze){var tt=Ne.call(this,new Jt)||this;tt._chartsViews=[],tt._chartsMap={},tt._componentsViews=[],tt._componentsMap={},tt._pendingActions=[],Ze=Ze||{},(0,le.isString)(ze)&&(ze=Nn[ze]),tt._dom=Le;var dt=tt._zr=Se.init(Le,{renderer:Ze.renderer||"canvas",devicePixelRatio:Ze.devicePixelRatio,width:Ze.width,height:Ze.height,ssr:Ze.ssr,useDirtyRect:(0,le.retrieve2)(Ze.useDirtyRect,!1),useCoarsePointer:(0,le.retrieve2)(Ze.useCoarsePointer,"auto"),pointerSize:Ze.pointerSize});tt._ssr=Ze.ssr,tt._throttledZrFlush=(0,Pt.P2)((0,le.bind)(dt.flush,dt),17),(ze=(0,le.clone)(ze))&&et(ze,!0),tt._theme=ze,tt._locale=(0,zf.D0)(Ze.locale||zf.sO),tt._coordSysMgr=new ae.Z;var xt=tt._api=Zf(tt);function vt(Nt,Qt){return Nt.__prio-Qt.__prio}return(0,ge.Z)(To,vt),(0,ge.Z)(qs,vt),tt._scheduler=new Sn(tt,xt,qs,To),tt._messageCenter=new _v,tt._initEvents(),tt.resize=(0,le.bind)(tt.resize,tt),dt.animation.on("frame",tt._onframe,tt),Ho(dt,tt),Vc(dt,tt),(0,le.setAsPrimitive)(tt),tt}return(0,ue.ZT)(Ge,Ne),Ge.prototype._onframe=function(){if(!this._disposed){bv(this);var Le=this._scheduler;if(this[Vo]){var ze=this[Vo].silent;this[za]=!0;try{Ti(this),co.update.call(this,null,this[Vo].updateParams)}catch(Ut){throw this[za]=!1,this[Vo]=null,Ut}this._zr.flush(),this[za]=!1,this[Vo]=null,nc.call(this,ze),mu.call(this,ze)}else if(Le.unfinished){var Ze=1,tt=this._model,ft=this._api;Le.unfinished=!1;do{var Zt=+new Date;Le.performSeriesTasks(tt),Le.performDataProcessorTasks(tt),vu(this,tt),Le.performVisualTasks(tt),_h(this,this._model,ft,"remain",{}),Ze-=+new Date-Zt}while(Ze>0&&Le.unfinished);Le.unfinished||this._zr.flush()}}},Ge.prototype.getDom=function(){return this._dom},Ge.prototype.getId=function(){return this.id},Ge.prototype.getZr=function(){return this._zr},Ge.prototype.isSSR=function(){return this._ssr},Ge.prototype.setOption=function(Le,ze,Ze){if(!this[za]){if(this._disposed)return;var tt,ft,Zt;if((0,le.isObject)(ze)&&(Ze=ze.lazyUpdate,tt=ze.silent,ft=ze.replaceMerge,Zt=ze.transition,ze=ze.notMerge),this[za]=!0,!this._model||ze){var Ut=new we(this._api),vn=this._theme,En=this._model=new A;En.scheduler=this._scheduler,En.ssr=this._ssr,En.init(null,null,null,vn,this._locale,Ut)}this._model.setOption(Le,{replaceMerge:ft},Mo);var dt={seriesTransition:Zt,optionChanged:!0};if(Ze)this[Vo]={silent:tt,updateParams:dt},this[za]=!1,this.getZr().wakeUp();else{try{Ti(this),co.update.call(this,null,dt)}catch(xt){throw this[Vo]=null,this[za]=!1,xt}this._ssr||this._zr.flush(),this[Vo]=null,this[za]=!1,nc.call(this,tt),mu.call(this,tt)}}},Ge.prototype.setTheme=function(){(0,Jl.Sh)("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},Ge.prototype.getModel=function(){return this._model},Ge.prototype.getOption=function(){return this._model&&this._model.getOption()},Ge.prototype.getWidth=function(){return this._zr.getWidth()},Ge.prototype.getHeight=function(){return this._zr.getHeight()},Ge.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||tc&&window.devicePixelRatio||1},Ge.prototype.getRenderedCanvas=function(Le){return this.renderToCanvas(Le)},Ge.prototype.renderToCanvas=function(Le){return this._zr.painter.getRenderedCanvas({backgroundColor:(Le=Le||{}).backgroundColor||this._model.get("backgroundColor"),pixelRatio:Le.pixelRatio||this.getDevicePixelRatio()})},Ge.prototype.renderToSVGString=function(Le){return this._zr.painter.renderToString({useViewBox:(Le=Le||{}).useViewBox})},Ge.prototype.getSvgDataURL=function(){if(ye.Z.svgSupported){var Le=this._zr,ze=Le.storage.getDisplayList();return(0,le.each)(ze,function(Ze){Ze.stopAnimation(null,!0)}),Le.painter.toDataURL()}},Ge.prototype.getDataURL=function(Le){if(!this._disposed){var Ze=this._model,tt=[],ft=this;(0,le.each)((Le=Le||{}).excludeComponents,function(Ut){Ze.eachComponent({mainType:Ut},function(vn){var En=ft._componentsMap[vn.__viewId];En.group.ignore||(tt.push(En),En.group.ignore=!0)})});var Zt="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.renderToCanvas(Le).toDataURL("image/"+(Le&&Le.type||"png"));return(0,le.each)(tt,function(Ut){Ut.group.ignore=!1}),Zt}},Ge.prototype.getConnectedDataURL=function(Le){if(!this._disposed){var ze="svg"===Le.type,Ze=this.group,tt=Math.min,ft=Math.max,Zt=1/0;if(eo[Ze]){var Ut=Zt,vn=Zt,En=-Zt,dt=-Zt,xt=[],vt=Le&&Le.pixelRatio||this.getDevicePixelRatio();(0,le.each)(Pi,function(kn,vr){if(kn.group===Ze){var ei=ze?kn.getZr().painter.getSvgDom().innerHTML:kn.renderToCanvas((0,le.clone)(Le)),_r=kn.getDom().getBoundingClientRect();Ut=tt(_r.left,Ut),vn=tt(_r.top,vn),En=ft(_r.right,En),dt=ft(_r.bottom,dt),xt.push({dom:ei,left:_r.left,top:_r.top})}});var Nt=(En*=vt)-(Ut*=vt),Qt=(dt*=vt)-(vn*=vt),gn=ws.qW.createCanvas(),bn=Se.init(gn,{renderer:ze?"svg":"canvas"});if(bn.resize({width:Nt,height:Qt}),ze){var Bn="";return(0,le.each)(xt,function(kn){Bn+='<g transform="translate('+(kn.left-Ut)+","+(kn.top-vn)+')">'+kn.dom+"</g>"}),bn.painter.getSvgRoot().innerHTML=Bn,Le.connectedBackgroundColor&&bn.painter.setBackgroundColor(Le.connectedBackgroundColor),bn.refreshImmediately(),bn.painter.toDataURL()}return Le.connectedBackgroundColor&&bn.add(new rt.Z({shape:{x:0,y:0,width:Nt,height:Qt},style:{fill:Le.connectedBackgroundColor}})),(0,le.each)(xt,function(kn){var vr=new ot.ZP({style:{x:kn.left*vt-Ut,y:kn.top*vt-vn,image:kn.dom}});bn.add(vr)}),bn.refreshImmediately(),gn.toDataURL("image/"+(Le&&Le.type||"png"))}return this.getDataURL(Le)}},Ge.prototype.convertToPixel=function(Le,ze){return ni(this,"convertToPixel",Le,ze)},Ge.prototype.convertFromPixel=function(Le,ze){return ni(this,"convertFromPixel",Le,ze)},Ge.prototype.containPixel=function(Le,ze){if(!this._disposed){var tt,ft=Ce.pm(this._model,Le);return(0,le.each)(ft,function(Zt,Ut){Ut.indexOf("Models")>=0&&(0,le.each)(Zt,function(vn){var En=vn.coordinateSystem;if(En&&En.containPoint)tt=tt||!!En.containPoint(ze);else if("seriesModels"===Ut){var dt=this._chartsMap[vn.__viewId];dt&&dt.containPoint&&(tt=tt||dt.containPoint(ze,vn))}},this)},this),!!tt}},Ge.prototype.getVisual=function(Le,ze){var tt=Ce.pm(this._model,Le,{defaultMainType:"series"}),Zt=tt.seriesModel.getData(),Ut=tt.hasOwnProperty("dataIndexInside")?tt.dataIndexInside:tt.hasOwnProperty("dataIndex")?Zt.indexOfRawIndex(tt.dataIndex):null;return null!=Ut?(0,od.Or)(Zt,Ut,ze):(0,od.UL)(Zt,ze)},Ge.prototype.getViewOfComponentModel=function(Le){return this._componentsMap[Le.__viewId]},Ge.prototype.getViewOfSeriesModel=function(Le){return this._chartsMap[Le.__viewId]},Ge.prototype._initEvents=function(){var Le=this;(0,le.each)(Go,function(ze){var Ze=function(tt){var Ut,ft=Le.getModel(),Zt=tt.target;if("globalout"===ze?Ut={}:Zt&&(0,Qs.o)(Zt,function(Nt){var Qt=(0,gt.A)(Nt);if(Qt&&null!=Qt.dataIndex){var gn=Qt.dataModel||ft.getSeriesByIndex(Qt.seriesIndex);return Ut=gn&&gn.getDataParams(Qt.dataIndex,Qt.dataType)||{},!0}if(Qt.eventData)return Ut=(0,le.extend)({},Qt.eventData),!0},!0),Ut){var En=Ut.componentType,dt=Ut.componentIndex;("markLine"===En||"markPoint"===En||"markArea"===En)&&(En="series",dt=Ut.seriesIndex);var xt=En&&null!=dt&&ft.getComponent(En,dt),vt=xt&&Le["series"===xt.mainType?"_chartsMap":"_componentsMap"][xt.__viewId];Ut.event=tt,Ut.type=ze,Le._$eventProcessor.eventInfo={targetEl:Zt,packedEvent:Ut,model:xt,view:vt},Le.trigger(ze,Ut)}};Ze.zrEventfulCallAtLast=!0,Le._zr.on(ze,Ze,Le)}),(0,le.each)(ga,function(ze,Ze){Le._messageCenter.on(Ze,function(tt){this.trigger(Ze,tt)},Le)}),(0,le.each)(["selectchanged"],function(ze){Le._messageCenter.on(ze,function(Ze){this.trigger(ze,Ze)},Le)}),(0,sd.s)(this._messageCenter,this,this._api)},Ge.prototype.isDisposed=function(){return this._disposed},Ge.prototype.clear=function(){this._disposed||this.setOption({series:[]},!0)},Ge.prototype.dispose=function(){if(!this._disposed){this._disposed=!0,this.getDom()&&Ce.P$(this.getDom(),Pl,"");var ze=this,Ze=ze._api,tt=ze._model;(0,le.each)(ze._componentsViews,function(ft){ft.dispose(tt,Ze)}),(0,le.each)(ze._chartsViews,function(ft){ft.dispose(tt,Ze)}),ze._zr.dispose(),ze._dom=ze._model=ze._chartsMap=ze._componentsMap=ze._chartsViews=ze._componentsViews=ze._scheduler=ze._api=ze._zr=ze._throttledZrFlush=ze._theme=ze._coordSysMgr=ze._messageCenter=null,delete Pi[ze.id]}},Ge.prototype.resize=function(Le){if(!this[za]){if(this._disposed)return;this._zr.resize(Le);var ze=this._model;if(this._loadingFX&&this._loadingFX.resize(),ze){var Ze=ze.resetOption("media"),tt=Le&&Le.silent;this[Vo]&&(null==tt&&(tt=this[Vo].silent),Ze=!0,this[Vo]=null),this[za]=!0;try{Ze&&Ti(this),co.update.call(this,{type:"resize",animation:(0,le.extend)({duration:0},Le&&Le.animation)})}catch(ft){throw this[za]=!1,ft}this[za]=!1,nc.call(this,tt),mu.call(this,tt)}}},Ge.prototype.showLoading=function(Le,ze){if(!this._disposed&&((0,le.isObject)(Le)&&(ze=Le,Le=""),Le=Le||"default",this.hideLoading(),Lr[Le])){var Ze=Lr[Le](this._api,ze),tt=this._zr;this._loadingFX=Ze,tt.add(Ze)}},Ge.prototype.hideLoading=function(){this._disposed||(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},Ge.prototype.makeActionFromEvent=function(Le){var ze=(0,le.extend)({},Le);return ze.type=ga[Le.type],ze},Ge.prototype.dispatchAction=function(Le,ze){if(!this._disposed&&((0,le.isObject)(ze)||(ze={silent:!!ze}),pa[Le.type]&&this._model)){if(this[za])return void this._pendingActions.push(Le);var Ze=ze.silent;ld.call(this,Le,Ze);var tt=ze.flush;tt?this._zr.flush():!1!==tt&&ye.Z.browser.weChat&&this._throttledZrFlush(),nc.call(this,Ze),mu.call(this,Ze)}},Ge.prototype.updateLabelLayout=function(){xn.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},Ge.prototype.appendData=function(Le){if(!this._disposed){var ze=Le.seriesIndex;this.getModel().getSeriesByIndex(ze).appendData(Le),this._scheduler.unfinished=!0,this.getZr().wakeUp()}},Ge.internalField=function(){function Le(dt){dt.clearColorPalette(),dt.eachSeries(function(xt){xt.clearColorPalette()})}function Ze(dt){for(var xt=[],vt=dt.currentStates,Nt=0;Nt<vt.length;Nt++){var Qt=vt[Nt];"emphasis"===Qt||"blur"===Qt||"select"===Qt||xt.push(Qt)}dt.selected&&dt.states.select&&xt.push("select"),dt.hoverState===ht.wU&&dt.states.emphasis?xt.push("emphasis"):dt.hoverState===ht.CX&&dt.states.blur&&xt.push("blur"),dt.useStates(xt)}function Zt(dt,xt){if(!dt.preventAutoZ){var vt=dt.get("z")||0,Nt=dt.get("zlevel")||0;xt.eachRendered(function(Qt){return Ut(Qt,vt,Nt,-1/0),!0})}}function Ut(dt,xt,vt,Nt){var Qt=dt.getTextContent(),gn=dt.getTextGuideLine();if(dt.isGroup)for(var Bn=dt.childrenRef(),kn=0;kn<Bn.length;kn++)Nt=Math.max(Ut(Bn[kn],xt,vt,Nt),Nt);else dt.z=xt,dt.zlevel=vt,Nt=Math.max(dt.z2,Nt);if(Qt&&(Qt.z=xt,Qt.zlevel=vt,isFinite(Nt)&&(Qt.z2=Nt+2)),gn){var vr=dt.textGuideLineConfig;gn.z=xt,gn.zlevel=vt,isFinite(Nt)&&(gn.z2=Nt+(vr&&vr.showAbove?1:-1))}return Nt}function vn(dt,xt){xt.eachRendered(function(vt){if(!st.eq(vt)){var Nt=vt.getTextContent(),Qt=vt.getTextGuideLine();vt.stateTransition&&(vt.stateTransition=null),Nt&&Nt.stateTransition&&(Nt.stateTransition=null),Qt&&Qt.stateTransition&&(Qt.stateTransition=null),vt.hasState()?(vt.prevStates=vt.currentStates,vt.clearStates()):vt.prevStates&&(vt.prevStates=null)}})}function En(dt,xt){var vt=dt.getModel("stateAnimation"),Nt=dt.isAnimationEnabled(),Qt=vt.get("duration"),gn=Qt>0?{duration:Qt,delay:vt.get("delay"),easing:vt.get("easing")}:null;xt.eachRendered(function(bn){if(bn.states&&bn.states.emphasis){if(st.eq(bn))return;if(bn instanceof je.ZP&&(0,ht.e9)(bn),bn.__dirty){var Bn=bn.prevStates;Bn&&bn.useStates(Bn)}if(Nt){bn.stateTransition=gn;var kn=bn.getTextContent(),vr=bn.getTextGuideLine();kn&&(kn.stateTransition=gn),vr&&(vr.stateTransition=gn)}bn.__dirty&&Ze(bn)}})}Ti=function(dt){var xt=dt._scheduler;xt.restorePipelines(dt._model),xt.prepareStageTasks(),yv(dt,!0),yv(dt,!1),xt.plan()},yv=function(dt,xt){for(var vt=dt._model,Nt=dt._scheduler,Qt=xt?dt._componentsViews:dt._chartsViews,gn=xt?dt._componentsMap:dt._chartsMap,bn=dt._zr,Bn=dt._api,kn=0;kn<Qt.length;kn++)Qt[kn].__alive=!1;function vr(_r){var yr=_r.__requireNewView;_r.__requireNewView=!1;var ho="_ec_"+_r.id+"_"+_r.type,$i=!yr&&gn[ho];if(!$i){var as=(0,vv.u9)(_r.type);($i=new(xt?fr.Z.getClass(as.main,as.sub):pr.Z.getClass(as.sub))).init(vt,Bn),gn[ho]=$i,Qt.push($i),bn.add($i.group)}_r.__viewId=$i.__id=ho,$i.__alive=!0,$i.__model=_r,$i.group.__ecComponentInfo={mainType:_r.mainType,index:_r.componentIndex},!xt&&Nt.prepareView($i,_r,vt,Bn)}for(xt?vt.eachComponent(function(_r,yr){"series"!==_r&&vr(yr)}):vt.eachSeries(vr),kn=0;kn<Qt.length;){var ei=Qt[kn];ei.__alive?kn++:(!xt&&ei.renderTask.dispose(),bn.remove(ei.group),ei.dispose(vt,Bn),Qt.splice(kn,1),gn[ei.__id]===ei&&delete gn[ei.__id],ei.__id=ei.group.__ecComponentInfo=null)}},jf=function(dt,xt,vt,Nt,Qt){var gn=dt._model;if(gn.setUpdatePayload(vt),Nt){var bn={};bn[Nt+"Id"]=vt[Nt+"Id"],bn[Nt+"Index"]=vt[Nt+"Index"],bn[Nt+"Name"]=vt[Nt+"Name"];var Bn={mainType:Nt,query:bn};Qt&&(Bn.subType=Qt);var vr,kn=vt.excludeSeriesId;null!=kn&&(vr=(0,le.createHashMap)(),(0,le.each)(Ce.kF(kn),function(_r){var yr=Ce.U5(_r,null);null!=yr&&vr.set(yr,!0)})),gn&&gn.eachComponent(Bn,function(_r){if(!vr||null===vr.get(_r.id))if((0,ht.xp)(vt))if(_r instanceof fn.Z)vt.type===ht.Ki&&!vt.notBlur&&!_r.get(["emphasis","disabled"])&&(0,ht.UL)(_r,vt,dt._api);else{var ho=(0,ht.oJ)(_r.mainType,_r.componentIndex,vt.name,dt._api),as=ho.dispatchers;vt.type===ht.Ki&&ho.focusSelf&&!vt.notBlur&&(0,ht.zI)(_r.mainType,_r.componentIndex,dt._api),as&&(0,le.each)(as,function(Eo){vt.type===ht.Ki?(0,ht.fD)(Eo):(0,ht.Mh)(Eo)})}else(0,ht.aG)(vt)&&_r instanceof fn.Z&&((0,ht.og)(_r,vt,dt._api),(0,ht.ci)(_r),tr(dt))},dt),gn&&gn.eachComponent(Bn,function(_r){vr&&null!==vr.get(_r.id)||ei(dt["series"===Nt?"_chartsMap":"_componentsMap"][_r.__viewId])},dt)}else(0,le.each)([].concat(dt._componentsViews).concat(dt._chartsViews),ei);function ei(_r){_r&&_r.__alive&&_r[xt]&&_r[xt](_r.__model,gn,dt._api,vt)}},co={prepareAndUpdate:function(dt){Ti(this),co.update.call(this,dt,{optionChanged:null!=dt.newOption})},update:function(dt,xt){var vt=this._model,Nt=this._api,Qt=this._zr,gn=this._coordSysMgr,bn=this._scheduler;if(vt){vt.setUpdatePayload(dt),bn.restoreData(vt,dt),bn.performSeriesTasks(vt),gn.create(vt,Nt),bn.performDataProcessorTasks(vt,dt),vu(this,vt),gn.update(vt,Nt),Le(vt),bn.performVisualTasks(vt,dt),_u(this,vt,Nt,dt,xt);var Bn=vt.get("backgroundColor")||"transparent",kn=vt.get("darkMode");Qt.setBackgroundColor(Bn),null!=kn&&"auto"!==kn&&Qt.setDarkMode(kn),xn.trigger("afterupdate",vt,Nt)}},updateTransform:function(dt){var xt=this,vt=this._model,Nt=this._api;if(vt){vt.setUpdatePayload(dt);var Qt=[];vt.eachComponent(function(bn,Bn){if("series"!==bn){var kn=xt.getViewOfComponentModel(Bn);if(kn&&kn.__alive)if(kn.updateTransform){var vr=kn.updateTransform(Bn,vt,Nt,dt);vr&&vr.update&&Qt.push(kn)}else Qt.push(kn)}});var gn=(0,le.createHashMap)();vt.eachSeries(function(bn){var Bn=xt._chartsMap[bn.__viewId];if(Bn.updateTransform){var kn=Bn.updateTransform(bn,vt,Nt,dt);kn&&kn.update&&gn.set(bn.uid,1)}else gn.set(bn.uid,1)}),Le(vt),this._scheduler.performVisualTasks(vt,dt,{setDirty:!0,dirtyMap:gn}),_h(this,vt,Nt,dt,{},gn),xn.trigger("afterupdate",vt,Nt)}},updateView:function(dt){var xt=this._model;!xt||(xt.setUpdatePayload(dt),pr.Z.markUpdateMethod(dt,"updateView"),Le(xt),this._scheduler.performVisualTasks(xt,dt,{setDirty:!0}),_u(this,xt,this._api,dt,{}),xn.trigger("afterupdate",xt,this._api))},updateVisual:function(dt){var xt=this,vt=this._model;!vt||(vt.setUpdatePayload(dt),vt.eachSeries(function(Nt){Nt.getData().clearAllVisual()}),pr.Z.markUpdateMethod(dt,"updateVisual"),Le(vt),this._scheduler.performVisualTasks(vt,dt,{visualType:"visual",setDirty:!0}),vt.eachComponent(function(Nt,Qt){if("series"!==Nt){var gn=xt.getViewOfComponentModel(Qt);gn&&gn.__alive&&gn.updateVisual(Qt,vt,xt._api,dt)}}),vt.eachSeries(function(Nt){xt._chartsMap[Nt.__viewId].updateVisual(Nt,vt,xt._api,dt)}),xn.trigger("afterupdate",vt,this._api))},updateLayout:function(dt){co.update.call(this,dt)}},ni=function(dt,xt,vt,Nt){if(!dt._disposed)for(var bn,Qt=dt._model,gn=dt._coordSysMgr.getCoordinateSystems(),Bn=Ce.pm(Qt,vt),kn=0;kn<gn.length;kn++){var vr=gn[kn];if(vr[xt]&&null!=(bn=vr[xt](Qt,Bn,Nt)))return bn}},vu=function(dt,xt){var vt=dt._chartsMap,Nt=dt._scheduler;xt.eachSeries(function(Qt){Nt.updateStreamModes(Qt,vt[Qt.__viewId])})},ld=function(dt,xt){var vt=this,Nt=this.getModel(),Qt=dt.type,gn=dt.escapeConnect,bn=pa[Qt],Bn=bn.actionInfo,kn=(Bn.update||"update").split(":"),vr=kn.pop(),ei=null!=kn[0]&&(0,vv.u9)(kn[0]);this[za]=!0;var _r=[dt],yr=!1;dt.batch&&(yr=!0,_r=(0,le.map)(dt.batch,function(os){return(os=(0,le.defaults)((0,le.extend)({},os),dt)).batch=null,os}));var $i,ho=[],as=(0,ht.aG)(dt),Eo=(0,ht.xp)(dt);if(Eo&&(0,ht.T5)(this._api),(0,le.each)(_r,function(os){if(($i=($i=bn.action(os,vt._model,vt._api))||(0,le.extend)({},os)).type=Bn.event||$i.type,ho.push($i),Eo){var va=Ce.zH(dt),wv=va.mainTypeSpecified?va.queryOptionMap.keys()[0]:"series";jf(vt,vr,os,wv),tr(vt)}else as?(jf(vt,vr,os,"series"),tr(vt)):ei&&jf(vt,vr,os,ei.main,ei.sub)}),"none"!==vr&&!Eo&&!as&&!ei)try{this[Vo]?(Ti(this),co.update.call(this,dt),this[Vo]=null):co[vr].call(this,dt)}catch(os){throw this[za]=!1,os}if($i=yr?{type:Bn.event||Qt,escapeConnect:gn,batch:ho}:ho[0],this[za]=!1,!xt){var Xf=this._messageCenter;if(Xf.trigger($i.type,$i),as){var Ki={type:"selectchanged",escapeConnect:gn,selected:(0,ht.C5)(Nt),isFromClick:dt.isFromClick||!1,fromAction:dt.type,fromActionPayload:dt};Xf.trigger(Ki.type,Ki)}}},nc=function(dt){for(var xt=this._pendingActions;xt.length;){var vt=xt.shift();ld.call(this,vt,dt)}},mu=function(dt){!dt&&this.trigger("updated")},Ho=function(dt,xt){dt.on("rendered",function(vt){xt.trigger("rendered",vt),dt.animation.isFinished()&&!xt[Vo]&&!xt._scheduler.unfinished&&!xt._pendingActions.length&&xt.trigger("finished")})},Vc=function(dt,xt){dt.on("mouseover",function(vt){var Qt=(0,Qs.o)(vt.target,ht.Av);Qt&&((0,ht.$l)(Qt,vt,xt._api),tr(xt))}).on("mouseout",function(vt){var Qt=(0,Qs.o)(vt.target,ht.Av);Qt&&((0,ht.xr)(Qt,vt,xt._api),tr(xt))}).on("click",function(vt){var Qt=(0,Qs.o)(vt.target,function(Bn){return null!=(0,gt.A)(Bn).dataIndex},!0);if(Qt){var gn=Qt.selected?"unselect":"select",bn=(0,gt.A)(Qt);xt._api.dispatchAction({type:gn,dataType:bn.dataType,dataIndexInside:bn.dataIndex,seriesIndex:bn.seriesIndex,isFromClick:!0})}})},_u=function(dt,xt,vt,Nt,Qt){(function ze(dt){var xt=[],vt=[],Nt=!1;if(dt.eachComponent(function(Bn,kn){var vr=kn.get("zlevel")||0,ei=kn.get("z")||0,_r=kn.getZLevelKey();Nt=Nt||!!_r,("series"===Bn?vt:xt).push({zlevel:vr,z:ei,idx:kn.componentIndex,type:Bn,key:_r})}),Nt){var gn,bn,Qt=xt.concat(vt);(0,ge.Z)(Qt,function(Bn,kn){return Bn.zlevel===kn.zlevel?Bn.z-kn.z:Bn.zlevel-kn.zlevel}),(0,le.each)(Qt,function(Bn){var kn=dt.getComponent(Bn.type,Bn.idx),vr=Bn.zlevel,ei=Bn.key;null!=gn&&(vr=Math.max(gn,vr)),ei?(vr===gn&&ei!==bn&&vr++,bn=ei):bn&&(vr===gn&&vr++,bn=""),gn=vr,kn.setZLevel(vr)})}})(xt),Zn(dt,xt,vt,Nt,Qt),(0,le.each)(dt._chartsViews,function(gn){gn.__alive=!1}),_h(dt,xt,vt,Nt,Qt),(0,le.each)(dt._chartsViews,function(gn){gn.__alive||gn.remove(xt,vt)})},Zn=function(dt,xt,vt,Nt,Qt,gn){(0,le.each)(gn||dt._componentsViews,function(bn){var Bn=bn.__model;vn(0,bn),bn.render(Bn,xt,vt,Nt),Zt(Bn,bn),En(Bn,bn)})},_h=function(dt,xt,vt,Nt,Qt,gn){var bn=dt._scheduler;Qt=(0,le.extend)(Qt||{},{updatedSeries:xt.getSeries()}),xn.trigger("series:beforeupdate",xt,vt,Qt);var Bn=!1;xt.eachSeries(function(kn){var vr=dt._chartsMap[kn.__viewId];vr.__alive=!0;var ei=vr.renderTask;bn.updatePayload(ei,Nt),vn(0,vr),gn&&gn.get(kn.uid)&&ei.dirty(),ei.perform(bn.getPerformArgs(ei))&&(Bn=!0),vr.group.silent=!!kn.get("silent"),function ft(dt,xt){var vt=dt.get("blendMode")||null;xt.eachRendered(function(Nt){Nt.isGroup||(Nt.style.blend=vt)})}(kn,vr),(0,ht.ci)(kn)}),bn.unfinished=Bn||bn.unfinished,xn.trigger("series:layoutlabels",xt,vt,Qt),xn.trigger("series:transition",xt,vt,Qt),xt.eachSeries(function(kn){var vr=dt._chartsMap[kn.__viewId];Zt(kn,vr),En(kn,vr)}),function tt(dt,xt){var Qt=0;dt._zr.storage.traverse(function(gn){gn.isGroup||Qt++}),Qt>xt.get("hoverLayerThreshold")&&!ye.Z.node&&!ye.Z.worker&&xt.eachSeries(function(gn){if(!gn.preventUsingHoverLayer){var bn=dt._chartsMap[gn.__viewId];bn.__alive&&bn.eachRendered(function(Bn){Bn.states.emphasis&&(Bn.states.emphasis.hoverLayer=!0)})}})}(dt,xt),xn.trigger("series:afterupdate",xt,vt,Qt)},tr=function(dt){dt[nr]=!0,dt.getZr().wakeUp()},bv=function(dt){!dt[nr]||(dt.getZr().storage.traverse(function(xt){st.eq(xt)||Ze(xt)}),dt[nr]=!1)},Zf=function(dt){return new(function(xt){function vt(){return null!==xt&&xt.apply(this,arguments)||this}return(0,ue.ZT)(vt,xt),vt.prototype.getCoordinateSystems=function(){return dt._coordSysMgr.getCoordinateSystems()},vt.prototype.getComponentByElement=function(Nt){for(;Nt;){var Qt=Nt.__ecComponentInfo;if(null!=Qt)return dt._model.getComponent(Qt.mainType,Qt.index);Nt=Nt.parent}},vt.prototype.enterEmphasis=function(Nt,Qt){(0,ht.fD)(Nt,Qt),tr(dt)},vt.prototype.leaveEmphasis=function(Nt,Qt){(0,ht.Mh)(Nt,Qt),tr(dt)},vt.prototype.enterBlur=function(Nt){(0,ht.SX)(Nt),tr(dt)},vt.prototype.leaveBlur=function(Nt){(0,ht.VP)(Nt),tr(dt)},vt.prototype.enterSelect=function(Nt){(0,ht.XX)(Nt),tr(dt)},vt.prototype.leaveSelect=function(Nt){(0,ht.SJ)(Nt),tr(dt)},vt.prototype.getModel=function(){return dt.getModel()},vt.prototype.getViewOfComponentModel=function(Nt){return dt.getViewOfComponentModel(Nt)},vt.prototype.getViewOfSeriesModel=function(Nt){return dt.getViewOfSeriesModel(Nt)},vt}(ce))(dt)},Uo=function(dt){function xt(vt,Nt){for(var Qt=0;Qt<vt.length;Qt++)vt[Qt][Wf]=Nt}(0,le.each)(ga,function(vt,Nt){dt._messageCenter.on(Nt,function(Qt){if(eo[dt.group]&&0!==dt[Wf]){if(Qt&&Qt.escapeConnect)return;var gn=dt.makeActionFromEvent(Qt),bn=[];(0,le.each)(Pi,function(Bn){Bn!==dt&&Bn.group===dt.group&&bn.push(Bn)}),xt(bn,0),(0,le.each)(bn,function(Bn){1!==Bn[Wf]&&Bn.dispatchAction(gn)}),xt(bn,2)}})})}}(),Ge}(be.Z),Dn=rc.prototype;Dn.on=Il("on"),Dn.off=Il("off"),Dn.one=function(Ne,Ge,Le){var ze=this;(0,Jl.Sh)("ECharts#one is deprecated."),this.on.call(this,Ne,function Ze(){for(var tt=[],ft=0;ft<arguments.length;ft++)tt[ft]=arguments[ft];Ge&&Ge.apply&&Ge.apply(this,tt),ze.off(Ne,Ze)},Le)};var Go=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"],pa={},ga={},qs=[],Mo=[],To=[],Nn={},Lr={},Pi={},eo={},ic=+new Date-0,Ha=+new Date-0,Pl="_echarts_instance_";function aa(Ne,Ge,Le){var ze=!(Le&&Le.ssr);if(ze){var Ze=oc(Ne);if(Ze)return Ze}var tt=new rc(Ne,Ge,Le);return tt.id="ec_"+ic++,Pi[tt.id]=tt,ze&&Ce.P$(Ne,Pl,tt.id),Uo(tt),xn.trigger("afterinit",tt),tt}function ac(Ne){if((0,le.isArray)(Ne)){var Ge=Ne;Ne=null,(0,le.each)(Ge,function(Le){null!=Le.group&&(Ne=Le.group)}),Ne=Ne||"g_"+Ha++,(0,le.each)(Ge,function(Le){Le.group=Ne})}return eo[Ne]=!0,Ne}function yu(Ne){eo[Ne]=!1}var Hr=yu;function cd(Ne){(0,le.isString)(Ne)?Ne=Pi[Ne]:Ne instanceof rc||(Ne=oc(Ne)),Ne instanceof rc&&!Ne.isDisposed()&&Ne.dispose()}function oc(Ne){return Pi[Ce.IL(Ne,Pl)]}function Yf(Ne){return Pi[Ne]}function Js(Ne,Ge){Nn[Ne]=Ge}function Ua(Ne){(0,le.indexOf)(Mo,Ne)<0&&Mo.push(Ne)}function zc(Ne,Ge){lc(qs,Ne,Ge,2e3)}function bu(Ne){sc("afterinit",Ne)}function Ss(Ne){sc("afterupdate",Ne)}function sc(Ne,Ge){xn.on(Ne,Ge)}function Hc(Ne,Ge,Le){(0,le.isFunction)(Ge)&&(Le=Ge,Ge="");var ze=(0,le.isObject)(Ne)?Ne.type:[Ne,Ne={event:Ge}][0];Ne.event=(Ne.event||ze).toLowerCase(),!ga[Ge=Ne.event]&&((0,le.assert)(mh.test(ze)&&mh.test(Ge)),pa[ze]||(pa[ze]={action:Le,actionInfo:Ne}),ga[Ge]=ze)}function Ui(Ne,Ge){ae.Z.register(Ne,Ge)}function xv(Ne){var Ge=ae.Z.get(Ne);if(Ge)return Ge.getDimensionsInfo?Ge.getDimensionsInfo():Ge.dimensions.slice()}function Br(Ne,Ge){lc(To,Ne,Ge,1e3,"layout")}function is(Ne,Ge){lc(To,Ne,Ge,3e3,"visual")}var ud=[];function lc(Ne,Ge,Le,ze,Ze){if(((0,le.isFunction)(Ge)||(0,le.isObject)(Ge))&&(Le=Ge,Ge=ze),!((0,le.indexOf)(ud,Le)>=0)){ud.push(Le);var tt=Sn.wrapStageHandler(Le,Ze);tt.__prio=Ge,tt.__raw=Le,Ne.push(tt)}}function xu(Ne,Ge){Lr[Ne]=Ge}function Uc(Ne){(0,ws.g2)({createCanvas:Ne})}function Ma(Ne,Ge,Le){var ze=(0,ec.C)("registerMap");ze&&ze(Ne,Ge,Le)}function Ls(Ne){var Ge=(0,ec.C)("getMap");return Ge&&Ge(Ne)}var na=es.DA;is(2e3,Ql),is(4500,Sa),is(4500,Ja),is(2e3,bi),is(4500,r0),is(7e3,function Al(Ne,Ge){Ne.eachRawSeries(function(Le){if(!Ne.isSeriesFiltered(Le)){var ze=Le.getData();ze.hasItemVisual()&&ze.each(function(ft){var Zt=ze.getItemVisual(ft,"decal");Zt&&(ze.ensureUniqueItemVisual(ft,"style").decal=(0,a0.I)(Zt,Ge))});var Ze=ze.getVisual("decal");Ze&&(ze.getVisual("style").decal=(0,a0.I)(Ze,Ge))}})}),Ua(et),zc(900,function jt(Ne){var Ge=(0,le.createHashMap)();Ne.eachSeries(function(Le){var ze=Le.get("stack");if(ze){var Ze=Ge.get(ze)||Ge.set(ze,[]),tt=Le.getData(),ft={stackResultDimension:tt.getCalculationInfo("stackResultDimension"),stackedOverDimension:tt.getCalculationInfo("stackedOverDimension"),stackedDimension:tt.getCalculationInfo("stackedDimension"),stackedByDimension:tt.getCalculationInfo("stackedByDimension"),isStackedByIndex:tt.getCalculationInfo("isStackedByIndex"),data:tt,seriesModel:Le};if(!ft.stackedDimension||!ft.isStackedByIndex&&!ft.stackedByDimension)return;Ze.length&&tt.setCalculationInfo("stackedOnSeries",Ze[Ze.length-1].seriesModel),Ze.push(ft)}}),Ge.each(Rt)}),xu("default",function ph(Ne,Ge){le.defaults(Ge=Ge||{},{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var Le=new ua.Z,ze=new rt.Z({style:{fill:Ge.maskColor},zlevel:Ge.zlevel,z:1e4});Le.add(ze);var ft,Ze=new $s.ZP({style:{text:Ge.text,fill:Ge.textColor,fontSize:Ge.fontSize,fontWeight:Ge.fontWeight,fontStyle:Ge.fontStyle,fontFamily:Ge.fontFamily},zlevel:Ge.zlevel,z:10001}),tt=new rt.Z({style:{fill:"none"},textContent:Ze,textConfig:{position:"right",distance:10},zlevel:Ge.zlevel,z:10001});return Le.add(tt),Ge.showSpinner&&((ft=new La.Z({shape:{startAngle:-fh/2,endAngle:-fh/2+.1,r:Ge.spinnerRadius},style:{stroke:Ge.color,lineCap:"round",lineWidth:Ge.lineWidth},zlevel:Ge.zlevel,z:10001})).animateShape(!0).when(1e3,{endAngle:3*fh/2}).start("circularInOut"),ft.animateShape(!0).when(1e3,{startAngle:3*fh/2}).delay(300).start("circularInOut"),Le.add(ft)),Le.resize=function(){var Zt=Ze.getBoundingRect().width,Ut=Ge.showSpinner?Ge.spinnerRadius:0,vn=(Ne.getWidth()-2*Ut-(Ge.showSpinner&&Zt?10:0)-Zt)/2-(Ge.showSpinner&&Zt?0:5+Zt/2)+(Ge.showSpinner?0:Zt/2)+(Zt?0:Ut),En=Ne.getHeight()/2;Ge.showSpinner&&ft.setShape({cx:vn,cy:En}),tt.setShape({x:vn-Ut,y:En-Ut,width:2*Ut,height:2*Ut}),ze.setShape({x:0,y:0,width:Ne.getWidth(),height:Ne.getHeight()})},Le.resize(),Le}),Hc({type:ht.Ki,event:ht.Ki,update:ht.Ki},le.noop),Hc({type:ht.yx,event:ht.yx,update:ht.yx},le.noop),Hc({type:ht.Hg,event:ht.Hg,update:ht.Hg},le.noop),Hc({type:ht.JQ,event:ht.JQ,update:ht.JQ},le.noop),Hc({type:ht.iK,event:ht.iK,update:ht.iK},le.noop),Js("light",Tr),Js("dark",Vf);var uo={}},5831:(Vt,Qe,H)=>{H.d(Qe,{C:()=>le,M:()=>Se});var ue={};function Se(ye,ge){ue[ye]=ge}function le(ye){return ue[ye]}},5514:(Vt,Qe,H)=>{H.d(Qe,{sO:()=>re,D0:()=>ee,Li:()=>ie,G8:()=>$,I2:()=>U});var ue=H(1725),Se=H(169),ge=H(628),j={},X={},re=Se.Z.domSupported&&(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase().indexOf("ZH")>-1?"ZH":"EN";function U(K,b){K=K.toUpperCase(),X[K]=new ue.Z(b),j[K]=b}function ee(K){if((0,ge.isString)(K)){var b=j[K.toUpperCase()]||{};return"ZH"===K||"EN"===K?(0,ge.clone)(b):(0,ge.merge)((0,ge.clone)(b),(0,ge.clone)(j.EN),!1)}return(0,ge.merge)((0,ge.clone)(K),(0,ge.clone)(j.EN),!1)}function $(K){return X[K]}function ie(){return X.EN}U("EN",{time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}}),U("ZH",{time:{month:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],dayOfWeekAbbr:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53cd\u9009"}},toolbox:{brush:{title:{rect:"\u77e9\u5f62\u9009\u62e9",polygon:"\u5708\u9009",lineX:"\u6a2a\u5411\u9009\u62e9",lineY:"\u7eb5\u5411\u9009\u62e9",keep:"\u4fdd\u6301\u9009\u62e9",clear:"\u6e05\u9664\u9009\u62e9"}},dataView:{title:"\u6570\u636e\u89c6\u56fe",lang:["\u6570\u636e\u89c6\u56fe","\u5173\u95ed","\u5237\u65b0"]},dataZoom:{title:{zoom:"\u533a\u57df\u7f29\u653e",back:"\u533a\u57df\u7f29\u653e\u8fd8\u539f"}},magicType:{title:{line:"\u5207\u6362\u4e3a\u6298\u7ebf\u56fe",bar:"\u5207\u6362\u4e3a\u67f1\u72b6\u56fe",stack:"\u5207\u6362\u4e3a\u5806\u53e0",tiled:"\u5207\u6362\u4e3a\u5e73\u94fa"}},restore:{title:"\u8fd8\u539f"},saveAsImage:{title:"\u4fdd\u5b58\u4e3a\u56fe\u7247",lang:["\u53f3\u952e\u53e6\u5b58\u4e3a\u56fe\u7247"]}},series:{typeNames:{pie:"\u997c\u56fe",bar:"\u67f1\u72b6\u56fe",line:"\u6298\u7ebf\u56fe",scatter:"\u6563\u70b9\u56fe",effectScatter:"\u6d9f\u6f2a\u6563\u70b9\u56fe",radar:"\u96f7\u8fbe\u56fe",tree:"\u6811\u56fe",treemap:"\u77e9\u5f62\u6811\u56fe",boxplot:"\u7bb1\u578b\u56fe",candlestick:"K\u7ebf\u56fe",k:"K\u7ebf\u56fe",heatmap:"\u70ed\u529b\u56fe",map:"\u5730\u56fe",parallel:"\u5e73\u884c\u5750\u6807\u56fe",lines:"\u7ebf\u56fe",graph:"\u5173\u7cfb\u56fe",sankey:"\u6851\u57fa\u56fe",funnel:"\u6f0f\u6597\u56fe",gauge:"\u4eea\u8868\u76d8\u56fe",pictorialBar:"\u8c61\u5f62\u67f1\u56fe",themeRiver:"\u4e3b\u9898\u6cb3\u6d41\u56fe",sunburst:"\u65ed\u65e5\u56fe"}},aria:{general:{withTitle:"\u8fd9\u662f\u4e00\u4e2a\u5173\u4e8e\u201c{title}\u201d\u7684\u56fe\u8868\u3002",withoutTitle:"\u8fd9\u662f\u4e00\u4e2a\u56fe\u8868\uff0c"},series:{single:{prefix:"",withName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\uff0c\u8868\u793a{seriesName}\u3002",withoutName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\u3002"},multiple:{prefix:"\u5b83\u7531{seriesCount}\u4e2a\u56fe\u8868\u7cfb\u5217\u7ec4\u6210\u3002",withName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a\u8868\u793a{seriesName}\u7684{seriesType}\uff0c",withoutName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a{seriesType}\uff0c",separator:{middle:"\uff1b",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636e\u662f\u2014\u2014",partialData:"\u5176\u4e2d\uff0c\u524d{displayCnt}\u9879\u662f\u2014\u2014",withName:"{name}\u7684\u6570\u636e\u662f{value}",withoutName:"{value}",separator:{middle:"\uff0c",end:""}}}})},6861:(Vt,Qe,H)=>{H.d(Qe,{v:()=>Se});var ue=H(628);function Se(ge){return new le(ge)}var le=function(){function ge(be){this._reset=(be=be||{}).reset,this._plan=be.plan,this._count=be.count,this._onDirty=be.onDirty,this._dirty=!0}return ge.prototype.perform=function(be){var X,Ce=this._upstream,he=be&&be.skip;if(this._dirty&&Ce){var j=this.context;j.data=j.outputData=Ce.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!he&&(X=this._plan(this.context));var K,re=ie(this._modBy),U=this._modDataCount||0,ee=ie(be&&be.modBy),$=be&&be.modDataCount||0;function ie(W){return!(W>=1)&&(W=1),W}(re!==ee||U!==$)&&(X="reset"),(this._dirty||"reset"===X)&&(this._dirty=!1,K=this._doReset(he)),this._modBy=ee,this._modDataCount=$;var b=be&&be.step;if(this._dueEnd=Ce?Ce._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var Y=this._dueIndex,Q=Math.min(null!=b?this._dueIndex+b:1/0,this._dueEnd);if(!he&&(K||Y<Q)){var F=this._progress;if((0,ue.isArray)(F))for(var q=0;q<F.length;q++)this._doProgress(F[q],Y,Q,ee,$);else this._doProgress(F,Y,Q,ee,$)}this._dueIndex=Q,this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:Q}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()},ge.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},ge.prototype._doProgress=function(be,Ce,he,j,X){ye.reset(Ce,he,j,X),this._callingProgress=be,this._callingProgress({start:Ce,end:he,count:he-Ce,next:ye.next},this.context)},ge.prototype._doReset=function(be){var Ce,he;this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null,!be&&this._reset&&((Ce=this._reset(this.context))&&Ce.progress&&(he=Ce.forceFirstProgress,Ce=Ce.progress),(0,ue.isArray)(Ce)&&!Ce.length&&(Ce=null)),this._progress=Ce,this._modBy=this._modDataCount=null;var j=this._downstream;return j&&j.dirty(),he},ge.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},ge.prototype.pipe=function(be){(this._downstream!==be||this._dirty)&&(this._downstream=be,be._upstream=this,be.dirty())},ge.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},ge.prototype.getUpstream=function(){return this._upstream},ge.prototype.getDownstream=function(){return this._downstream},ge.prototype.setOutputEnd=function(be){this._outputDueEnd=this._settedOutputEnd=be},ge}(),ye=function(){var ge,be,Ce,he,j,X={reset:function(ee,$,ie,K){be=ee,ge=$,Ce=ie,he=K,j=Math.ceil(he/Ce),X.next=Ce>1&&he>0?U:re}};return X;function re(){return be<ge?be++:null}function U(){var ee=be%j*Ce+Math.ceil(be/j),$=be>=ge?null:ee<he?ee:be;return be++,$}}()},2650:(Vt,Qe,H)=>{function ue(ge){return null==ge?0:ge.length||1}function Se(ge){return ge}H.d(Qe,{Z:()=>ye});const ye=function(){function ge(be,Ce,he,j,X,re){this._old=be,this._new=Ce,this._oldKeyGetter=he||Se,this._newKeyGetter=j||Se,this.context=X,this._diffModeMultiple="multiple"===re}return ge.prototype.add=function(be){return this._add=be,this},ge.prototype.update=function(be){return this._update=be,this},ge.prototype.updateManyToOne=function(be){return this._updateManyToOne=be,this},ge.prototype.updateOneToMany=function(be){return this._updateOneToMany=be,this},ge.prototype.updateManyToMany=function(be){return this._updateManyToMany=be,this},ge.prototype.remove=function(be){return this._remove=be,this},ge.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},ge.prototype._executeOneToOne=function(){var be=this._old,Ce=this._new,he={},j=new Array(be.length),X=new Array(Ce.length);this._initIndexMap(be,null,j,"_oldKeyGetter"),this._initIndexMap(Ce,he,X,"_newKeyGetter");for(var re=0;re<be.length;re++){var U=j[re],ee=he[U],$=ue(ee);if($>1){var ie=ee.shift();1===ee.length&&(he[U]=ee[0]),this._update&&this._update(ie,re)}else 1===$?(he[U]=null,this._update&&this._update(ee,re)):this._remove&&this._remove(re)}this._performRestAdd(X,he)},ge.prototype._executeMultiple=function(){var Ce=this._new,he={},j={},X=[],re=[];this._initIndexMap(this._old,he,X,"_oldKeyGetter"),this._initIndexMap(Ce,j,re,"_newKeyGetter");for(var U=0;U<X.length;U++){var ee=X[U],$=he[ee],ie=j[ee],K=ue($),b=ue(ie);if(K>1&&1===b)this._updateManyToOne&&this._updateManyToOne(ie,$),j[ee]=null;else if(1===K&&b>1)this._updateOneToMany&&this._updateOneToMany(ie,$),j[ee]=null;else if(1===K&&1===b)this._update&&this._update(ie,$),j[ee]=null;else if(K>1&&b>1)this._updateManyToMany&&this._updateManyToMany(ie,$),j[ee]=null;else if(K>1)for(var Y=0;Y<K;Y++)this._remove&&this._remove($[Y]);else this._remove&&this._remove($)}this._performRestAdd(re,j)},ge.prototype._performRestAdd=function(be,Ce){for(var he=0;he<be.length;he++){var j=be[he],X=Ce[j],re=ue(X);if(re>1)for(var U=0;U<re;U++)this._add&&this._add(X[U]);else 1===re&&this._add&&this._add(X);Ce[j]=null}},ge.prototype._initIndexMap=function(be,Ce,he,j){for(var X=this._diffModeMultiple,re=0;re<be.length;re++){var U="_ec_"+this[j](be[re],re);if(X||(he[re]=U),Ce){var ee=Ce[U],$=ue(ee);0===$?(Ce[U]=re,X&&he.push(U)):1===$?Ce[U]=[ee,re]:ee.push(re)}}},ge}()},9762:(Vt,Qe,H)=>{H.d(Qe,{ZP:()=>K,hG:()=>Ce});var X,ue=H(628),Se=H(4066),le=H(7079),ye="undefined",ge=typeof Uint32Array===ye?Array:Uint32Array,be=typeof Uint16Array===ye?Array:Uint16Array,Ce=typeof Int32Array===ye?Array:Int32Array,he=typeof Float64Array===ye?Array:Float64Array,j={float:he,int:Ce,ordinal:Array,number:Array,time:he};function re(b){return b>65535?ge:be}function ee(b){var Y=b.constructor;return Y===Array?b.slice():new Y(b)}function $(b,Y,Q,F,q){var G=j[Q||"float"];if(q){var W=b[Y],J=W&&W.length;if(J!==F){for(var V=new G(F),P=0;P<J;P++)V[P]=W[P];b[Y]=V}}else b[Y]=new G(F)}const K=function(){function b(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=(0,ue.createHashMap)()}return b.prototype.initData=function(Y,Q,F){this._provider=Y,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var q=Y.getSource(),G=this.defaultDimValueGetter=X[q.sourceFormat];this._dimValueGetter=F||G,this._rawExtent=[],(0,le.QY)(q),this._dimensions=(0,ue.map)(Q,function(J){return{type:J.type,property:J.property}}),this._initDataFromProvider(0,Y.count())},b.prototype.getProvider=function(){return this._provider},b.prototype.getSource=function(){return this._provider.getSource()},b.prototype.ensureCalculationDimension=function(Y,Q){var F=this._calcDimNameToIdx,q=this._dimensions,G=F.get(Y);if(null!=G){if(q[G].type===Q)return G}else G=q.length;return q[G]={type:Q},F.set(Y,G),this._chunks[G]=new j[Q||"float"](this._rawCount),this._rawExtent[G]=[1/0,-1/0],G},b.prototype.collectOrdinalMeta=function(Y,Q){var F=this._chunks[Y],q=this._dimensions[Y],G=this._rawExtent,W=q.ordinalOffset||0,J=F.length;0===W&&(G[Y]=[1/0,-1/0]);for(var V=G[Y],P=W;P<J;P++){var T=F[P]=Q.parseAndCollect(F[P]);isNaN(T)||(V[0]=Math.min(T,V[0]),V[1]=Math.max(T,V[1]))}q.ordinalMeta=Q,q.ordinalOffset=J,q.type="ordinal"},b.prototype.getOrdinalMeta=function(Y){return this._dimensions[Y].ordinalMeta},b.prototype.getDimensionProperty=function(Y){var Q=this._dimensions[Y];return Q&&Q.property},b.prototype.appendData=function(Y){var Q=this._provider,F=this.count();Q.appendData(Y);var q=Q.count();return Q.persistent||(q+=F),F<q&&this._initDataFromProvider(F,q,!0),[F,q]},b.prototype.appendValues=function(Y,Q){for(var F=this._chunks,q=this._dimensions,G=q.length,W=this._rawExtent,J=this.count(),V=J+Math.max(Y.length,Q||0),P=0;P<G;P++)$(F,P,q[P].type,V,!0);for(var R=[],E=J;E<V;E++)for(var M=E-J,A=0;A<G;A++){var O=X.arrayRows.call(this,Y[M]||R,q[A].property,M,A);F[A][E]=O;var B=W[A];O<B[0]&&(B[0]=O),O>B[1]&&(B[1]=O)}return this._rawCount=this._count=V,{start:J,end:V}},b.prototype._initDataFromProvider=function(Y,Q,F){for(var q=this._provider,G=this._chunks,W=this._dimensions,J=W.length,V=this._rawExtent,P=(0,ue.map)(W,function(ae){return ae.property}),T=0;T<J;T++){var R=W[T];V[T]||(V[T]=[1/0,-1/0]),$(G,T,R.type,Q,F)}if(q.fillStorage)q.fillStorage(Y,Q,G,V);else for(var E=[],M=Y;M<Q;M++){E=q.getItem(M,E);for(var A=0;A<J;A++){var O=G[A],B=this._dimValueGetter(E,P[A],M,A);O[M]=B;var ce=V[A];B<ce[0]&&(ce[0]=B),B>ce[1]&&(ce[1]=B)}}!q.persistent&&q.clean&&q.clean(),this._rawCount=this._count=Q,this._extent=[]},b.prototype.count=function(){return this._count},b.prototype.get=function(Y,Q){if(!(Q>=0&&Q<this._count))return NaN;var F=this._chunks[Y];return F?F[this.getRawIndex(Q)]:NaN},b.prototype.getValues=function(Y,Q){var F=[],q=[];if(null==Q){Q=Y,Y=[];for(var G=0;G<this._dimensions.length;G++)q.push(G)}else q=Y;G=0;for(var W=q.length;G<W;G++)F.push(this.get(q[G],Q));return F},b.prototype.getByRawIndex=function(Y,Q){if(!(Q>=0&&Q<this._rawCount))return NaN;var F=this._chunks[Y];return F?F[Q]:NaN},b.prototype.getSum=function(Y){var F=0;if(this._chunks[Y])for(var q=0,G=this.count();q<G;q++){var W=this.get(Y,q);isNaN(W)||(F+=W)}return F},b.prototype.getMedian=function(Y){var Q=[];this.each([Y],function(G){isNaN(G)||Q.push(G)});var F=Q.sort(function(G,W){return G-W}),q=this.count();return 0===q?0:q%2==1?F[(q-1)/2]:(F[q/2]+F[q/2-1])/2},b.prototype.indexOfRawIndex=function(Y){if(Y>=this._rawCount||Y<0)return-1;if(!this._indices)return Y;var Q=this._indices,F=Q[Y];if(null!=F&&F<this._count&&F===Y)return Y;for(var q=0,G=this._count-1;q<=G;){var W=(q+G)/2|0;if(Q[W]<Y)q=W+1;else{if(!(Q[W]>Y))return W;G=W-1}}return-1},b.prototype.indicesOfNearest=function(Y,Q,F){var G=this._chunks[Y],W=[];if(!G)return W;null==F&&(F=1/0);for(var J=1/0,V=-1,P=0,T=0,R=this.count();T<R;T++){var M=Q-G[this.getRawIndex(T)],A=Math.abs(M);A<=F&&((A<J||A===J&&M>=0&&V<0)&&(J=A,V=M,P=0),M===V&&(W[P++]=T))}return W.length=P,W},b.prototype.getIndices=function(){var Y,Q=this._indices;if(Q){var q=this._count;if((F=Q.constructor)===Array){Y=new F(q);for(var G=0;G<q;G++)Y[G]=Q[G]}else Y=new F(Q.buffer,0,q)}else{var F;for(Y=new(F=re(this._rawCount))(this.count()),G=0;G<Y.length;G++)Y[G]=G}return Y},b.prototype.filter=function(Y,Q){if(!this._count)return this;for(var F=this.clone(),q=F.count(),W=new(re(F._rawCount))(q),J=[],V=Y.length,P=0,T=Y[0],R=F._chunks,E=0;E<q;E++){var M=void 0,A=F.getRawIndex(E);if(0===V)M=Q(E);else if(1===V)M=Q(R[T][A],E);else{for(var B=0;B<V;B++)J[B]=R[Y[B]][A];J[B]=E,M=Q.apply(null,J)}M&&(W[P++]=A)}return P<q&&(F._indices=W),F._count=P,F._extent=[],F._updateGetRawIdx(),F},b.prototype.selectRange=function(Y){var Q=this.clone(),F=Q._count;if(!F)return this;var q=(0,ue.keys)(Y),G=q.length;if(!G)return this;var W=Q.count(),V=new(re(Q._rawCount))(W),P=0,T=q[0],R=Y[T][0],E=Y[T][1],M=Q._chunks,A=!1;if(!Q._indices){var O=0;if(1===G){for(var B=M[q[0]],ce=0;ce<F;ce++)((ae=B[ce])>=R&&ae<=E||isNaN(ae))&&(V[P++]=O),O++;A=!0}else if(2===G){B=M[q[0]];var oe=M[q[1]],de=Y[q[1]][0],ne=Y[q[1]][1];for(ce=0;ce<F;ce++){var xe=oe[ce];((ae=B[ce])>=R&&ae<=E||isNaN(ae))&&(xe>=de&&xe<=ne||isNaN(xe))&&(V[P++]=O),O++}A=!0}}if(!A)if(1===G)for(ce=0;ce<W;ce++){var fe=Q.getRawIndex(ce);((ae=M[q[0]][fe])>=R&&ae<=E||isNaN(ae))&&(V[P++]=fe)}else for(ce=0;ce<W;ce++){for(var ve=!0,we=(fe=Q.getRawIndex(ce),0);we<G;we++){var ae,Te=q[we];((ae=M[Te][fe])<Y[Te][0]||ae>Y[Te][1])&&(ve=!1)}ve&&(V[P++]=Q.getRawIndex(ce))}return P<W&&(Q._indices=V),Q._count=P,Q._extent=[],Q._updateGetRawIdx(),Q},b.prototype.map=function(Y,Q){var F=this.clone(Y);return this._updateDims(F,Y,Q),F},b.prototype.modify=function(Y,Q){this._updateDims(this,Y,Q)},b.prototype._updateDims=function(Y,Q,F){for(var q=Y._chunks,G=[],W=Q.length,J=Y.count(),V=[],P=Y._rawExtent,T=0;T<Q.length;T++)P[Q[T]]=[1/0,-1/0];for(var R=0;R<J;R++){for(var E=Y.getRawIndex(R),M=0;M<W;M++)V[M]=q[Q[M]][E];V[W]=R;var A=F&&F.apply(null,V);if(null!=A)for("object"!=typeof A&&(G[0]=A,A=G),T=0;T<A.length;T++){var O=Q[T],B=A[T],ce=P[O],ae=q[O];ae&&(ae[E]=B),B<ce[0]&&(ce[0]=B),B>ce[1]&&(ce[1]=B)}}},b.prototype.lttbDownSample=function(Y,Q){var T,R,E,F=this.clone([Y],!0),G=F._chunks[Y],W=this.count(),J=0,V=Math.floor(1/Q),P=this.getRawIndex(0),M=new(re(this._rawCount))(Math.min(2*(Math.ceil(W/V)+2),W));M[J++]=P;for(var A=1;A<W-1;A+=V){for(var O=Math.min(A+V,W-1),B=Math.min(A+2*V,W),ce=(B+O)/2,ae=0,oe=O;oe<B;oe++){var ne=G[de=this.getRawIndex(oe)];isNaN(ne)||(ae+=ne)}ae/=B-O;var xe=A,fe=Math.min(A+V,W),ve=A-1,we=G[P];T=-1,E=xe;var Te=-1,Ae=0;for(oe=xe;oe<fe;oe++){var de;ne=G[de=this.getRawIndex(oe)],isNaN(ne)?(Ae++,Te<0&&(Te=de)):(R=Math.abs((ve-ce)*(ne-we)-(ve-oe)*(ae-we)))>T&&(T=R,E=de)}Ae>0&&Ae<fe-xe&&(M[J++]=Math.min(Te,E),E=Math.max(Te,E)),M[J++]=E,P=E}return M[J++]=this.getRawIndex(W-1),F._count=J,F._indices=M,F.getRawIndex=this._getRawIdx,F},b.prototype.downSample=function(Y,Q,F,q){for(var G=this.clone([Y],!0),W=G._chunks,J=[],V=Math.floor(1/Q),P=W[Y],T=this.count(),R=G._rawExtent[Y]=[1/0,-1/0],E=new(re(this._rawCount))(Math.ceil(T/V)),M=0,A=0;A<T;A+=V){V>T-A&&(J.length=V=T-A);for(var O=0;O<V;O++){var B=this.getRawIndex(A+O);J[O]=P[B]}var ce=F(J),ae=this.getRawIndex(Math.min(A+q(J,ce)||0,T-1));P[ae]=ce,ce<R[0]&&(R[0]=ce),ce>R[1]&&(R[1]=ce),E[M++]=ae}return G._count=M,G._indices=E,G._updateGetRawIdx(),G},b.prototype.each=function(Y,Q){if(this._count)for(var F=Y.length,q=this._chunks,G=0,W=this.count();G<W;G++){var J=this.getRawIndex(G);switch(F){case 0:Q(G);break;case 1:Q(q[Y[0]][J],G);break;case 2:Q(q[Y[0]][J],q[Y[1]][J],G);break;default:for(var V=0,P=[];V<F;V++)P[V]=q[Y[V]][J];P[V]=G,Q.apply(null,P)}}},b.prototype.getDataExtent=function(Y){var Q=this._chunks[Y],F=[1/0,-1/0];if(!Q)return F;var W,q=this.count();if(!this._indices)return this._rawExtent[Y].slice();if(W=this._extent[Y])return W.slice();for(var J=(W=F)[0],V=W[1],P=0;P<q;P++){var R=Q[this.getRawIndex(P)];R<J&&(J=R),R>V&&(V=R)}return this._extent[Y]=W=[J,V],W},b.prototype.getRawDataItem=function(Y){var Q=this.getRawIndex(Y);if(this._provider.persistent)return this._provider.getItem(Q);for(var F=[],q=this._chunks,G=0;G<q.length;G++)F.push(q[G][Q]);return F},b.prototype.clone=function(Y,Q){var F=new b,q=this._chunks,G=Y&&(0,ue.reduce)(Y,function(J,V){return J[V]=!0,J},{});if(G)for(var W=0;W<q.length;W++)F._chunks[W]=G[W]?ee(q[W]):q[W];else F._chunks=q;return this._copyCommonProps(F),Q||(F._indices=this._cloneIndices()),F._updateGetRawIdx(),F},b.prototype._copyCommonProps=function(Y){Y._count=this._count,Y._rawCount=this._rawCount,Y._provider=this._provider,Y._dimensions=this._dimensions,Y._extent=(0,ue.clone)(this._extent),Y._rawExtent=(0,ue.clone)(this._rawExtent)},b.prototype._cloneIndices=function(){if(this._indices){var Y=this._indices.constructor,Q=void 0;if(Y===Array){var F=this._indices.length;Q=new Y(F);for(var q=0;q<F;q++)Q[q]=this._indices[q]}else Q=new Y(this._indices);return Q}return null},b.prototype._getRawIdxIdentity=function(Y){return Y},b.prototype._getRawIdx=function(Y){return Y<this._count&&Y>=0?this._indices[Y]:-1},b.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},b.internalField=function(){function Y(Q,F,q,G){return(0,Se.yQ)(Q[G],this._dimensions[G])}X={arrayRows:Y,objectRows:function(Q,F,q,G){return(0,Se.yQ)(Q[F],this._dimensions[G])},keyedColumns:Y,original:function(Q,F,q,G){var W=Q&&(Q.value??Q);return(0,Se.yQ)(W instanceof Array?W[G]:W,this._dimensions[G])},typedArray:function(Q,F,q,G){return Q[G]}}}(),b}()},5297:(Vt,Qe,H)=>{H.d(Qe,{ZP:()=>Ce});var ue=H(628);function Se(he){return"_EC_"+he}var le=function(){function he(j){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=j||!1}return he.prototype.isDirected=function(){return this._directed},he.prototype.addNode=function(j,X){var re=this._nodesMap;if(!re[Se(j=null==j?""+X:""+j)]){var U=new ye(j,X);return U.hostGraph=this,this.nodes.push(U),re[Se(j)]=U,U}},he.prototype.getNodeByIndex=function(j){var X=this.data.getRawIndex(j);return this.nodes[X]},he.prototype.getNodeById=function(j){return this._nodesMap[Se(j)]},he.prototype.addEdge=function(j,X,re){var U=this._nodesMap,ee=this._edgesMap;if(ue.isNumber(j)&&(j=this.nodes[j]),ue.isNumber(X)&&(X=this.nodes[X]),j instanceof ye||(j=U[Se(j)]),X instanceof ye||(X=U[Se(X)]),j&&X){var $=j.id+"-"+X.id,ie=new ge(j,X,re);return ie.hostGraph=this,this._directed&&(j.outEdges.push(ie),X.inEdges.push(ie)),j.edges.push(ie),j!==X&&X.edges.push(ie),this.edges.push(ie),ee[$]=ie,ie}},he.prototype.getEdgeByIndex=function(j){var X=this.edgeData.getRawIndex(j);return this.edges[X]},he.prototype.getEdge=function(j,X){j instanceof ye&&(j=j.id),X instanceof ye&&(X=X.id);var re=this._edgesMap;return this._directed?re[j+"-"+X]:re[j+"-"+X]||re[X+"-"+j]},he.prototype.eachNode=function(j,X){for(var re=this.nodes,U=re.length,ee=0;ee<U;ee++)re[ee].dataIndex>=0&&j.call(X,re[ee],ee)},he.prototype.eachEdge=function(j,X){for(var re=this.edges,U=re.length,ee=0;ee<U;ee++)re[ee].dataIndex>=0&&re[ee].node1.dataIndex>=0&&re[ee].node2.dataIndex>=0&&j.call(X,re[ee],ee)},he.prototype.breadthFirstTraverse=function(j,X,re,U){if(X instanceof ye||(X=this._nodesMap[Se(X)]),X){for(var ee="out"===re?"outEdges":"in"===re?"inEdges":"edges",$=0;$<this.nodes.length;$++)this.nodes[$].__visited=!1;if(!j.call(U,X,null))for(var ie=[X];ie.length;){var K=ie.shift(),b=K[ee];for($=0;$<b.length;$++){var Y=b[$],Q=Y.node1===K?Y.node2:Y.node1;if(!Q.__visited){if(j.call(U,Q,K))return;ie.push(Q),Q.__visited=!0}}}}},he.prototype.update=function(){for(var j=this.data,X=this.edgeData,re=this.nodes,U=this.edges,ee=0,$=re.length;ee<$;ee++)re[ee].dataIndex=-1;for(ee=0,$=j.count();ee<$;ee++)re[j.getRawIndex(ee)].dataIndex=ee;for(X.filterSelf(function(ie){var K=U[X.getRawIndex(ie)];return K.node1.dataIndex>=0&&K.node2.dataIndex>=0}),ee=0,$=U.length;ee<$;ee++)U[ee].dataIndex=-1;for(ee=0,$=X.count();ee<$;ee++)U[X.getRawIndex(ee)].dataIndex=ee},he.prototype.clone=function(){for(var j=new he(this._directed),X=this.nodes,re=this.edges,U=0;U<X.length;U++)j.addNode(X[U].id,X[U].dataIndex);for(U=0;U<re.length;U++){var ee=re[U];j.addEdge(ee.node1.id,ee.node2.id,ee.dataIndex)}return j},he}(),ye=function(){function he(j,X){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=j??"",this.dataIndex=X??-1}return he.prototype.degree=function(){return this.edges.length},he.prototype.inDegree=function(){return this.inEdges.length},he.prototype.outDegree=function(){return this.outEdges.length},he.prototype.getModel=function(j){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(j)},he.prototype.getAdjacentDataIndices=function(){for(var j={edge:[],node:[]},X=0;X<this.edges.length;X++){var re=this.edges[X];re.dataIndex<0||(j.edge.push(re.dataIndex),j.node.push(re.node1.dataIndex,re.node2.dataIndex))}return j},he}(),ge=function(){function he(j,X,re){this.dataIndex=-1,this.node1=j,this.node2=X,this.dataIndex=re??-1}return he.prototype.getModel=function(j){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(j)},he.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},he}();function be(he,j){return{getValue:function(X){var re=this[he][j];return re.getStore().get(re.getDimensionIndex(X||"value"),this.dataIndex)},setVisual:function(X,re){this.dataIndex>=0&&this[he][j].setItemVisual(this.dataIndex,X,re)},getVisual:function(X){return this[he][j].getItemVisual(this.dataIndex,X)},setLayout:function(X,re){this.dataIndex>=0&&this[he][j].setItemLayout(this.dataIndex,X,re)},getLayout:function(){return this[he][j].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[he][j].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[he][j].getRawIndex(this.dataIndex)}}}ue.mixin(ye,be("hostGraph","data")),ue.mixin(ge,be("hostGraph","edgeData"));const Ce=le},9567:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>ge});var ue=H(628),Se=0;function ye(be){return(0,ue.isObject)(be)&&null!=be.value?be.value:be+""}const ge=function(){function be(Ce){this.categories=Ce.categories||[],this._needCollect=Ce.needCollect,this._deduplication=Ce.deduplication,this.uid=++Se}return be.createByAxisModel=function(Ce){var he=Ce.option,j=he.data,X=j&&(0,ue.map)(j,ye);return new be({categories:X,needCollect:!X,deduplication:!1!==he.dedplication})},be.prototype.getOrdinal=function(Ce){return this._getOrCreateMap().get(Ce)},be.prototype.parseAndCollect=function(Ce){var he,j=this._needCollect;if(!(0,ue.isString)(Ce)&&!j)return Ce;if(j&&!this._deduplication)return this.categories[he=this.categories.length]=Ce,he;var X=this._getOrCreateMap();return null==(he=X.get(Ce))&&(j?(this.categories[he=this.categories.length]=Ce,X.set(Ce,he)):he=NaN),he},be.prototype._getOrCreateMap=function(){return this._map||(this._map=(0,ue.createHashMap)(this.categories))},be}()},3241:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>R});var F,q,G,W,J,V,P,ue=H(628),Se=H(1725),le=H(2650),ye=H(67),ge=H(1577),be=H(7843),Ce=H(4367),he=H(1266),j=H(7282),X=H(7079),re=H(9762),U=H(4735),ee=ue.isObject,$=ue.map,ie=typeof Int32Array>"u"?Array:Int32Array,Y=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],Q=["_approximateExtent"];const R=function(){function E(M,A){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var O,B=!1;(0,U.bB)(M)?(O=M.dimensions,this._dimOmitted=M.isDimensionOmitted(),this._schema=M):(B=!0,O=M),O=O||["x","y"];for(var ce={},ae=[],oe={},de=!1,ne={},xe=0;xe<O.length;xe++){var fe=O[xe],ve=ue.isString(fe)?new be.Z({name:fe}):fe instanceof be.Z?fe:new be.Z(fe),we=ve.name;ve.type=ve.type||"float",ve.coordDim||(ve.coordDim=we,ve.coordDimIndex=0);var Te=ve.otherDims=ve.otherDims||{};ae.push(we),ce[we]=ve,null!=ne[we]&&(de=!0),ve.createInvertedIndices&&(oe[we]=[]),0===Te.itemName&&(this._nameDimIdx=xe),0===Te.itemId&&(this._idDimIdx=xe),B&&(ve.storeDimIndex=xe)}if(this.dimensions=ae,this._dimInfos=ce,this._initGetDimensionInfo(de),this.hostModel=A,this._invertedIndicesMap=oe,this._dimOmitted){var Ae=this._dimIdxToName=ue.createHashMap();ue.each(ae,function(Ee){Ae.set(ce[Ee].storeDimIndex,Ee)})}}return E.prototype.getDimension=function(M){var A=this._recognizeDimIndex(M);if(null==A)return M;if(A=M,!this._dimOmitted)return this.dimensions[A];var O=this._dimIdxToName.get(A);if(null!=O)return O;var B=this._schema.getSourceDimension(A);return B?B.name:void 0},E.prototype.getDimensionIndex=function(M){var A=this._recognizeDimIndex(M);if(null!=A)return A;if(null==M)return-1;var O=this._getDimInfo(M);return O?O.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(M):-1},E.prototype._recognizeDimIndex=function(M){if(ue.isNumber(M)||null!=M&&!isNaN(M)&&!this._getDimInfo(M)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(M)<0))return+M},E.prototype._getStoreDimIndex=function(M){return this.getDimensionIndex(M)},E.prototype.getDimensionInfo=function(M){return this._getDimInfo(this.getDimension(M))},E.prototype._initGetDimensionInfo=function(M){var A=this._dimInfos;this._getDimInfo=M?function(O){return A.hasOwnProperty(O)?A[O]:void 0}:function(O){return A[O]}},E.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},E.prototype.mapDimension=function(M,A){var O=this._dimSummary;if(null==A)return O.encodeFirstDimNotExtra[M];var B=O.encode[M];return B?B[A]:null},E.prototype.mapDimensionsAll=function(M){return(this._dimSummary.encode[M]||[]).slice()},E.prototype.getStore=function(){return this._store},E.prototype.initData=function(M,A,O){var ce,B=this;if(M instanceof re.ZP&&(ce=M),!ce){var ae=this.dimensions,oe=(0,X.Ld)(M)||ue.isArrayLike(M)?new ye.Pl(M,ae.length):M;ce=new re.ZP;var de=$(ae,function(ne){return{type:B._dimInfos[ne].type,property:ne}});ce.initData(oe,de,O)}this._store=ce,this._nameList=(A||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,ce.count()),this._dimSummary=(0,ge.y)(this,this._schema),this.userOutput=this._dimSummary.userOutput},E.prototype.appendData=function(M){var A=this._store.appendData(M);this._doInit(A[0],A[1])},E.prototype.appendValues=function(M,A){var O=this._store.appendValues(M,A.length),B=O.start,ce=O.end,ae=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),A)for(var oe=B;oe<ce;oe++)this._nameList[oe]=A[oe-B],ae&&P(this,oe)},E.prototype._updateOrdinalMeta=function(){for(var M=this._store,A=this.dimensions,O=0;O<A.length;O++){var B=this._dimInfos[A[O]];B.ordinalMeta&&M.collectOrdinalMeta(B.storeDimIndex,B.ordinalMeta)}},E.prototype._shouldMakeIdFromName=function(){var M=this._store.getProvider();return null==this._idDimIdx&&M.getSource().sourceFormat!==Ce.J5&&!M.fillStorage},E.prototype._doInit=function(M,A){if(!(M>=A)){var B=this._store.getProvider();this._updateOrdinalMeta();var ce=this._nameList,ae=this._idList;if(B.getSource().sourceFormat===Ce.cy&&!B.pure)for(var ne=[],xe=M;xe<A;xe++){var fe=B.getItem(xe,ne);if(!this.hasItemOption&&(0,he.Co)(fe)&&(this.hasItemOption=!0),fe){var ve=fe.name;null==ce[xe]&&null!=ve&&(ce[xe]=(0,he.U5)(ve,null));var we=fe.id;null==ae[xe]&&null!=we&&(ae[xe]=(0,he.U5)(we,null))}}if(this._shouldMakeIdFromName())for(xe=M;xe<A;xe++)P(this,xe);F(this)}},E.prototype.getApproximateExtent=function(M){return this._approximateExtent[M]||this._store.getDataExtent(this._getStoreDimIndex(M))},E.prototype.setApproximateExtent=function(M,A){A=this.getDimension(A),this._approximateExtent[A]=M.slice()},E.prototype.getCalculationInfo=function(M){return this._calculationInfo[M]},E.prototype.setCalculationInfo=function(M,A){ee(M)?ue.extend(this._calculationInfo,M):this._calculationInfo[M]=A},E.prototype.getName=function(M){var A=this.getRawIndex(M),O=this._nameList[A];return null==O&&null!=this._nameDimIdx&&(O=G(this,this._nameDimIdx,A)),null==O&&(O=""),O},E.prototype._getCategory=function(M,A){var O=this._store.get(M,A),B=this._store.getOrdinalMeta(M);return B?B.categories[O]:O},E.prototype.getId=function(M){return q(this,this.getRawIndex(M))},E.prototype.count=function(){return this._store.count()},E.prototype.get=function(M,A){var B=this._dimInfos[M];if(B)return this._store.get(B.storeDimIndex,A)},E.prototype.getByRawIndex=function(M,A){var B=this._dimInfos[M];if(B)return this._store.getByRawIndex(B.storeDimIndex,A)},E.prototype.getIndices=function(){return this._store.getIndices()},E.prototype.getDataExtent=function(M){return this._store.getDataExtent(this._getStoreDimIndex(M))},E.prototype.getSum=function(M){return this._store.getSum(this._getStoreDimIndex(M))},E.prototype.getMedian=function(M){return this._store.getMedian(this._getStoreDimIndex(M))},E.prototype.getValues=function(M,A){var O=this,B=this._store;return ue.isArray(M)?B.getValues($(M,function(ce){return O._getStoreDimIndex(ce)}),A):B.getValues(M)},E.prototype.hasValue=function(M){for(var A=this._dimSummary.dataDimIndicesOnCoord,O=0,B=A.length;O<B;O++)if(isNaN(this._store.get(A[O],M)))return!1;return!0},E.prototype.indexOfName=function(M){for(var A=0,O=this._store.count();A<O;A++)if(this.getName(A)===M)return A;return-1},E.prototype.getRawIndex=function(M){return this._store.getRawIndex(M)},E.prototype.indexOfRawIndex=function(M){return this._store.indexOfRawIndex(M)},E.prototype.rawIndexOf=function(M,A){var B=(M&&this._invertedIndicesMap[M])[A];return null==B||isNaN(B)?-1:B},E.prototype.indicesOfNearest=function(M,A,O){return this._store.indicesOfNearest(this._getStoreDimIndex(M),A,O)},E.prototype.each=function(M,A,O){ue.isFunction(M)&&(O=A,A=M,M=[]);var B=O||this,ce=$(W(M),this._getStoreDimIndex,this);this._store.each(ce,B?ue.bind(A,B):A)},E.prototype.filterSelf=function(M,A,O){ue.isFunction(M)&&(O=A,A=M,M=[]);var B=O||this,ce=$(W(M),this._getStoreDimIndex,this);return this._store=this._store.filter(ce,B?ue.bind(A,B):A),this},E.prototype.selectRange=function(M){var A=this,O={},B=ue.keys(M),ce=[];return ue.each(B,function(ae){var oe=A._getStoreDimIndex(ae);O[oe]=M[ae],ce.push(oe)}),this._store=this._store.selectRange(O),this},E.prototype.mapArray=function(M,A,O){ue.isFunction(M)&&(O=A,A=M,M=[]);var B=[];return this.each(M,function(){B.push(A&&A.apply(this,arguments))},O=O||this),B},E.prototype.map=function(M,A,O,B){var ce=O||B||this,ae=$(W(M),this._getStoreDimIndex,this),oe=V(this);return oe._store=this._store.map(ae,ce?ue.bind(A,ce):A),oe},E.prototype.modify=function(M,A,O,B){var ae=O||B||this,oe=$(W(M),this._getStoreDimIndex,this);this._store.modify(oe,ae?ue.bind(A,ae):A)},E.prototype.downSample=function(M,A,O,B){var ce=V(this);return ce._store=this._store.downSample(this._getStoreDimIndex(M),A,O,B),ce},E.prototype.lttbDownSample=function(M,A){var O=V(this);return O._store=this._store.lttbDownSample(this._getStoreDimIndex(M),A),O},E.prototype.getRawDataItem=function(M){return this._store.getRawDataItem(M)},E.prototype.getItemModel=function(M){var A=this.hostModel,O=this.getRawDataItem(M);return new Se.Z(O,A,A&&A.ecModel)},E.prototype.diff=function(M){var A=this;return new le.Z(M?M.getStore().getIndices():[],this.getStore().getIndices(),function(O){return q(M,O)},function(O){return q(A,O)})},E.prototype.getVisual=function(M){var A=this._visual;return A&&A[M]},E.prototype.setVisual=function(M,A){this._visual=this._visual||{},ee(M)?ue.extend(this._visual,M):this._visual[M]=A},E.prototype.getItemVisual=function(M,A){var O=this._itemVisuals[M];return(O&&O[A])??this.getVisual(A)},E.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},E.prototype.ensureUniqueItemVisual=function(M,A){var O=this._itemVisuals,B=O[M];B||(B=O[M]={});var ce=B[A];return null==ce&&(ce=this.getVisual(A),ue.isArray(ce)?ce=ce.slice():ee(ce)&&(ce=ue.extend({},ce)),B[A]=ce),ce},E.prototype.setItemVisual=function(M,A,O){var B=this._itemVisuals[M]||{};this._itemVisuals[M]=B,ee(A)?ue.extend(B,A):B[A]=O},E.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},E.prototype.setLayout=function(M,A){ee(M)?ue.extend(this._layout,M):this._layout[M]=A},E.prototype.getLayout=function(M){return this._layout[M]},E.prototype.getItemLayout=function(M){return this._itemLayouts[M]},E.prototype.setItemLayout=function(M,A,O){this._itemLayouts[M]=O?ue.extend(this._itemLayouts[M]||{},A):A},E.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},E.prototype.setItemGraphicEl=function(M,A){(0,j.Q)(this.hostModel&&this.hostModel.seriesIndex,this.dataType,M,A),this._graphicEls[M]=A},E.prototype.getItemGraphicEl=function(M){return this._graphicEls[M]},E.prototype.eachItemGraphicEl=function(M,A){ue.each(this._graphicEls,function(O,B){O&&M&&M.call(A,O,B)})},E.prototype.cloneShallow=function(M){return M||(M=new E(this._schema?this._schema:$(this.dimensions,this._getDimInfo,this),this.hostModel)),J(M,this),M._store=this._store,M},E.prototype.wrapMethod=function(M,A){var O=this[M];!ue.isFunction(O)||(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(M),this[M]=function(){var B=O.apply(this,arguments);return A.apply(this,[B].concat(ue.slice(arguments)))})},E.internalField=(F=function(M){var A=M._invertedIndicesMap;ue.each(A,function(O,B){var ce=M._dimInfos[B],ae=ce.ordinalMeta,oe=M._store;if(ae){O=A[B]=new ie(ae.categories.length);for(var de=0;de<O.length;de++)O[de]=-1;for(de=0;de<oe.count();de++)O[oe.get(ce.storeDimIndex,de)]=de}})},G=function(M,A,O){return(0,he.U5)(M._getCategory(A,O),null)},q=function(M,A){var O=M._idList[A];return null==O&&null!=M._idDimIdx&&(O=G(M,M._idDimIdx,A)),null==O&&(O="e\0\0"+A),O},W=function(M){return ue.isArray(M)||(M=null!=M?[M]:[]),M},V=function(M){var A=new E(M._schema?M._schema:$(M.dimensions,M._getDimInfo,M),M.hostModel);return J(A,M),A},J=function(M,A){ue.each(Y.concat(A.__wrappedMethods||[]),function(O){A.hasOwnProperty(O)&&(M[O]=A[O])}),M.__wrappedMethods=A.__wrappedMethods,ue.each(Q,function(O){M[O]=ue.clone(A[O])}),M._calculationInfo=ue.extend({},A._calculationInfo)},void(P=function(M,A){var O=M._nameList,B=M._idList,ce=M._nameDimIdx,ae=M._idDimIdx,oe=O[A],de=B[A];if(null==oe&&null!=ce&&(O[A]=oe=G(M,ce,A)),null==de&&null!=ae&&(B[A]=de=G(M,ae,A)),null==de&&null!=oe){var ne=M._nameRepeatCount,xe=ne[oe]=(ne[oe]||0)+1;de=oe,xe>1&&(de+="__ec__"+xe),B[A]=de}})),E}()},7843:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>le});var ue=H(628);const le=function ye(ge){this.otherDims={},null!=ge&&ue.extend(this,ge)}},7079:(Vt,Qe,H)=>{H.d(Qe,{Kp:()=>X,Ld:()=>be,ML:()=>j,QY:()=>ie,_P:()=>Ce,nx:()=>he});var ue=H(628),Se=H(4367),le=H(1266),ye=H(6153),ge=function K(b){this.data=b.data||(b.sourceFormat===Se.hL?{}:[]),this.sourceFormat=b.sourceFormat||Se.RA,this.seriesLayoutBy=b.seriesLayoutBy||Se.fY,this.startIndex=b.startIndex||0,this.dimensionsDetectedCount=b.dimensionsDetectedCount,this.metaRawOption=b.metaRawOption;var Y=this.dimensionsDefine=b.dimensionsDefine;if(Y)for(var Q=0;Q<Y.length;Q++){var F=Y[Q];null==F.type&&(0,ye.u7)(this,Q)===ye.Dq.Must&&(F.type="ordinal")}};function be(K){return K instanceof ge}function Ce(K,b,Y){Y=Y||X(K);var Q=b.seriesLayoutBy,F=function re(K,b,Y,Q,F){var q,G;if(!K)return{dimensionsDefine:ee(F),startIndex:G,dimensionsDetectedCount:q};if(b===Se.XD){var W=K;"auto"===Q||null==Q?$(function(V){null!=V&&"-"!==V&&((0,ue.isString)(V)?null==G&&(G=1):G=0)},Y,W,10):G=(0,ue.isNumber)(Q)?Q:Q?1:0,!F&&1===G&&(F=[],$(function(V,P){F[P]=null!=V?V+"":""},Y,W,1/0)),q=F?F.length:Y===Se.Wc?W.length:W[0]?W[0].length:null}else if(b===Se.qb)F||(F=function U(K){for(var Y,b=0;b<K.length&&!(Y=K[b++]););if(Y){var Q=[];return(0,ue.each)(Y,function(F,q){Q.push(q)}),Q}}(K));else if(b===Se.hL)F||(F=[],(0,ue.each)(K,function(V,P){F.push(P)}));else if(b===Se.cy){var J=(0,le.C4)(K[0]);q=(0,ue.isArray)(J)&&J.length||1}return{startIndex:G,dimensionsDefine:ee(F),dimensionsDetectedCount:q}}(K,Y,Q,b.sourceHeader,b.dimensions);return new ge({data:K,sourceFormat:Y,seriesLayoutBy:Q,dimensionsDefine:F.dimensionsDefine,startIndex:F.startIndex,dimensionsDetectedCount:F.dimensionsDetectedCount,metaRawOption:(0,ue.clone)(b)})}function he(K){return new ge({data:K,sourceFormat:(0,ue.isTypedArray)(K)?Se.J5:Se.cy})}function j(K){return new ge({data:K.data,sourceFormat:K.sourceFormat,seriesLayoutBy:K.seriesLayoutBy,dimensionsDefine:(0,ue.clone)(K.dimensionsDefine),startIndex:K.startIndex,dimensionsDetectedCount:K.dimensionsDetectedCount})}function X(K){var b=Se.RA;if((0,ue.isTypedArray)(K))b=Se.J5;else if((0,ue.isArray)(K)){0===K.length&&(b=Se.XD);for(var Y=0,Q=K.length;Y<Q;Y++){var F=K[Y];if(null!=F){if((0,ue.isArray)(F)){b=Se.XD;break}if((0,ue.isObject)(F)){b=Se.qb;break}}}}else if((0,ue.isObject)(K))for(var q in K)if((0,ue.hasOwn)(K,q)&&(0,ue.isArrayLike)(K[q])){b=Se.hL;break}return b}function ee(K){if(K){var b=(0,ue.createHashMap)();return(0,ue.map)(K,function(Y,Q){var F={name:(Y=(0,ue.isObject)(Y)?Y:{name:Y}).name,displayName:Y.displayName,type:Y.type};if(null==F.name)return F;F.name+="",null==F.displayName&&(F.displayName=F.name);var q=b.get(F.name);return q?F.name+="-"+q.count++:b.set(F.name,{count:1}),F})}}function $(K,b,Y,Q){if(b===Se.Wc)for(var F=0;F<Y.length&&F<Q;F++)K(Y[F]?Y[F][0]:null,F);else{var q=Y[0]||[];for(F=0;F<q.length&&F<Q;F++)K(q[F],F)}}function ie(K){var b=K.sourceFormat;return b===Se.qb||b===Se.hL}},4735:(Vt,Qe,H)=>{H.d(Qe,{Eo:()=>be,Jj:()=>j,Jl:()=>X,bB:()=>Ce,v5:()=>he});var ue=H(628),Se=H(1266),le=H(7079),ye=(0,Se.Yf)(),ge={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},be=function(){function re(U){this.dimensions=U.dimensions,this._dimOmitted=U.dimensionOmitted,this.source=U.source,this._fullDimCount=U.fullDimensionCount,this._updateDimOmitted(U.dimensionOmitted)}return re.prototype.isDimensionOmitted=function(){return this._dimOmitted},re.prototype._updateDimOmitted=function(U){this._dimOmitted=U,U&&(this._dimNameMap||(this._dimNameMap=j(this.source)))},re.prototype.getSourceDimensionIndex=function(U){return(0,ue.retrieve2)(this._dimNameMap.get(U),-1)},re.prototype.getSourceDimension=function(U){var ee=this.source.dimensionsDefine;if(ee)return ee[U]},re.prototype.makeStoreSchema=function(){for(var U=this._fullDimCount,ee=(0,le.QY)(this.source),$=!X(U),ie="",K=[],b=0,Y=0;b<U;b++){var Q=void 0,F=void 0,q=void 0,G=this.dimensions[Y];if(G&&G.storeDimIndex===b)Q=ee?G.name:null,F=G.type,q=G.ordinalMeta,Y++;else{var W=this.getSourceDimension(b);W&&(Q=ee?W.name:null,F=W.type)}K.push({property:Q,type:F,ordinalMeta:q}),ee&&null!=Q&&(!G||!G.isCalculationCoord)&&(ie+=$?Q.replace(/\`/g,"`1").replace(/\$/g,"`2"):Q),ie+="$",ie+=ge[F]||"f",q&&(ie+=q.uid),ie+="$"}var J=this.source;return{dimensions:K,hash:[J.seriesLayoutBy,J.startIndex,ie].join("$$")}},re.prototype.makeOutputDimensionNames=function(){for(var U=[],ee=0,$=0;ee<this._fullDimCount;ee++){var ie=void 0,K=this.dimensions[$];if(K&&K.storeDimIndex===ee)K.isCalculationCoord||(ie=K.name),$++;else{var b=this.getSourceDimension(ee);b&&(ie=b.name)}U.push(ie)}return U},re.prototype.appendCalculationDimension=function(U){this.dimensions.push(U),U.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},re}();function Ce(re){return re instanceof be}function he(re){for(var U=(0,ue.createHashMap)(),ee=0;ee<(re||[]).length;ee++){var $=re[ee],ie=(0,ue.isObject)($)?$.name:$;null!=ie&&null==U.get(ie)&&U.set(ie,ee)}return U}function j(re){var U=ye(re);return U.dimNameMap||(U.dimNameMap=he(re.dimensionsDefine))}function X(re){return re>30}},9178:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>X,q:()=>j});var ue=H(4367),Se=H(7843),le=H(628),ye=H(7079),ge=H(9762),be=H(1266),Ce=H(6153),he=H(4735);function j($,ie){return X($,ie).dimensions}function X($,ie){(0,ye.Ld)($)||($=(0,ye.nx)($));var K=(ie=ie||{}).coordDimensions||[],b=ie.dimensionsDefine||$.dimensionsDefine||[],Y=(0,le.createHashMap)(),Q=[],F=function U($,ie,K,b){var Y=Math.max($.dimensionsDetectedCount||1,ie.length,K.length,b||0);return(0,le.each)(ie,function(Q){var F;(0,le.isObject)(Q)&&(F=Q.dimsDef)&&(Y=Math.max(Y,F.length))}),Y}($,K,b,ie.dimensionsCount),q=ie.canOmitUnusedDimensions&&(0,he.Jl)(F),G=b===$.dimensionsDefine,W=G?(0,he.Jj)($):(0,he.v5)(b),J=ie.encodeDefine;!J&&ie.encodeDefaulter&&(J=ie.encodeDefaulter($,F));for(var V=(0,le.createHashMap)(J),P=new ge.hG(F),T=0;T<P.length;T++)P[T]=-1;function R(xe){var fe=P[xe];if(fe<0){var ve=b[xe],we=(0,le.isObject)(ve)?ve:{name:ve},Te=new Se.Z,Ae=we.name;return null!=Ae&&null!=W.get(Ae)&&(Te.name=Te.displayName=Ae),null!=we.type&&(Te.type=we.type),null!=we.displayName&&(Te.displayName=we.displayName),P[xe]=Q.length,Te.storeDimIndex=xe,Q.push(Te),Te}return Q[fe]}if(!q)for(T=0;T<F;T++)R(T);V.each(function(xe,fe){var ve=(0,be.kF)(xe).slice();if(1===ve.length&&!(0,le.isString)(ve[0])&&ve[0]<0)V.set(fe,!1);else{var we=V.set(fe,[]);(0,le.each)(ve,function(Te,Ae){var Ee=(0,le.isString)(Te)?W.get(Te):Te;null!=Ee&&Ee<F&&(we[Ae]=Ee,M(R(Ee),fe,Ae))})}});var E=0;function M(xe,fe,ve){null!=ue.f7.get(fe)?xe.otherDims[fe]=ve:(xe.coordDim=fe,xe.coordDimIndex=ve,Y.set(fe,!0))}(0,le.each)(K,function(xe){var fe,ve,we,Te;if((0,le.isString)(xe))fe=xe,Te={};else{fe=(Te=xe).name;var Ae=Te.ordinalMeta;Te.ordinalMeta=null,(Te=(0,le.extend)({},Te)).ordinalMeta=Ae,ve=Te.dimsDef,we=Te.otherDims,Te.name=Te.coordDim=Te.coordDimIndex=Te.dimsDef=Te.otherDims=null}var Ee=V.get(fe);if(!1!==Ee){if(!(Ee=(0,be.kF)(Ee)).length)for(var Ve=0;Ve<(ve&&ve.length||1);Ve++){for(;E<F&&null!=R(E).coordDim;)E++;E<F&&Ee.push(E++)}(0,le.each)(Ee,function(He,We){var $e=R(He);if(G&&null!=Te.type&&($e.type=Te.type),M((0,le.defaults)($e,Te),fe,We),null==$e.name&&ve){var ct=ve[We];!(0,le.isObject)(ct)&&(ct={name:ct}),$e.name=$e.displayName=ct.name,$e.defaultTooltip=ct.defaultTooltip}we&&(0,le.defaults)($e.otherDims,we)})}});var A=ie.generateCoord,O=ie.generateCoordCount,B=null!=O;O=A?O||1:0;var ce=A||"value";function ae(xe){null==xe.name&&(xe.name=xe.coordDim)}if(q)(0,le.each)(Q,function(xe){ae(xe)}),Q.sort(function(xe,fe){return xe.storeDimIndex-fe.storeDimIndex});else for(var oe=0;oe<F;oe++){var de=R(oe);null==de.coordDim&&(de.coordDim=ee(ce,Y,B),de.coordDimIndex=0,(!A||O<=0)&&(de.isExtraCoord=!0),O--),ae(de),null==de.type&&((0,Ce.u7)($,oe)===Ce.Dq.Must||de.isExtraCoord&&(null!=de.otherDims.itemName||null!=de.otherDims.seriesName))&&(de.type="ordinal")}return function re($){for(var ie=(0,le.createHashMap)(),K=0;K<$.length;K++){var b=$[K],Y=b.name,Q=ie.get(Y)||0;Q>0&&(b.name=Y+(Q-1)),Q++,ie.set(Y,Q)}}(Q),new he.Eo({source:$,dimensions:Q,fullDimensionCount:F,dimensionOmitted:q})}function ee($,ie,K){var b=ie.data;if(K||b.hasOwnProperty($)){for(var Y=0;b.hasOwnProperty($+Y);)Y++;$+=Y}return ie.set($,!0),$}},67:(Vt,Qe,H)=>{H.d(Qe,{Pl:()=>X,_j:()=>ee,a:()=>K,hk:()=>q,tB:()=>Q});var ge,be,Ce,he,j,ue=H(628),Se=H(1266),le=H(7079),ye=H(4367),X=function(){function W(J,V){var P=(0,le.Ld)(J)?J:(0,le.nx)(J);this._source=P;var T=this._data=P.data;P.sourceFormat===ye.J5&&(this._offset=0,this._dimSize=V,this._data=T),j(this,T,P)}return W.prototype.getSource=function(){return this._source},W.prototype.count=function(){return 0},W.prototype.getItem=function(J,V){},W.prototype.appendData=function(J){},W.prototype.clean=function(){},W.protoInitialize=((J=W.prototype).pure=!1,void(J.persistent=!0)),W.internalField=function(){var J;j=function(E,M,A){var O=A.sourceFormat,B=A.seriesLayoutBy,ce=A.startIndex,ae=A.dimensionsDefine,oe=he[F(O,B)];if((0,ue.extend)(E,oe),O===ye.J5)E.getItem=V,E.count=T,E.fillStorage=P;else{var de=ee(O,B);E.getItem=(0,ue.bind)(de,null,M,ce,ae);var ne=K(O,B);E.count=(0,ue.bind)(ne,null,M,ce,ae)}};var V=function(E,M){M=M||[];for(var A=this._data,O=this._dimSize,B=O*(E-=this._offset),ce=0;ce<O;ce++)M[ce]=A[B+ce];return M},P=function(E,M,A,O){for(var B=this._data,ce=this._dimSize,ae=0;ae<ce;ae++){for(var oe=O[ae],de=oe[0]??1/0,ne=oe[1]??-1/0,xe=M-E,fe=A[ae],ve=0;ve<xe;ve++){var we=B[ve*ce+ae];fe[E+ve]=we,we<de&&(de=we),we>ne&&(ne=we)}oe[0]=de,oe[1]=ne}},T=function(){return this._data?this._data.length/this._dimSize:0};function R(E){for(var M=0;M<E.length;M++)this._data.push(E[M])}(J={})[ye.XD+"_"+ye.fY]={pure:!0,appendData:R},J[ye.XD+"_"+ye.Wc]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},J[ye.qb]={pure:!0,appendData:R},J[ye.hL]={pure:!0,appendData:function(E){var M=this._data;(0,ue.each)(E,function(A,O){for(var B=M[O]||(M[O]=[]),ce=0;ce<(A||[]).length;ce++)B.push(A[ce])})}},J[ye.cy]={appendData:R},J[ye.J5]={persistent:!1,pure:!0,appendData:function(E){this._data=E},clean:function(){this._offset+=this.count(),this._data=null}},he=J}(),W;var J}(),re=function(W,J,V,P){return W[P]},U=((ge={})[ye.XD+"_"+ye.fY]=function(W,J,V,P){return W[P+J]},ge[ye.XD+"_"+ye.Wc]=function(W,J,V,P,T){P+=J;for(var R=T||[],E=W,M=0;M<E.length;M++){var A=E[M];R[M]=A?A[P]:null}return R},ge[ye.qb]=re,ge[ye.hL]=function(W,J,V,P,T){for(var R=T||[],E=0;E<V.length;E++){var A=W[V[E].name];R[E]=A?A[P]:null}return R},ge[ye.cy]=re,ge);function ee(W,J){return U[F(W,J)]}var $=function(W,J,V){return W.length},ie=((be={})[ye.XD+"_"+ye.fY]=function(W,J,V){return Math.max(0,W.length-J)},be[ye.XD+"_"+ye.Wc]=function(W,J,V){var P=W[0];return P?Math.max(0,P.length-J):0},be[ye.qb]=$,be[ye.hL]=function(W,J,V){var T=W[V[0].name];return T?T.length:0},be[ye.cy]=$,be);function K(W,J){return ie[F(W,J)]}var b=function(W,J,V){return W[J]},Y=((Ce={})[ye.XD]=b,Ce[ye.qb]=function(W,J,V){return W[V]},Ce[ye.hL]=b,Ce[ye.cy]=function(W,J,V){var P=(0,Se.C4)(W);return P instanceof Array?P[J]:P},Ce[ye.J5]=b,Ce);function Q(W){return Y[W]}function F(W,J){return W===ye.XD?W+"_"+J:W}function q(W,J,V){if(W){var P=W.getRawDataItem(J);if(null!=P){var T=W.getStore(),R=T.getSource().sourceFormat;if(null!=V){var E=W.getDimensionIndex(V),M=T.getDimensionProperty(E);return Q(R)(P,E,M)}var A=P;return R===ye.cy&&(A=(0,Se.C4)(P)),A}}}},143:(Vt,Qe,H)=>{H.d(Qe,{BM:()=>le,IR:()=>be,M:()=>ge});var ue=H(628),Se=H(4735);function le(Ce,he,j){var U,ee,$,X=(j=j||{}).byIndex,re=j.stackedCoordDimension;!function ye(Ce){return!(0,Se.bB)(Ce.schema)}(he)?(U=(ee=he.schema).dimensions,$=he.store):U=he;var K,b,Y,Q,ie=!(!Ce||!Ce.get("stack"));if((0,ue.each)(U,function(V,P){(0,ue.isString)(V)&&(U[P]=V={name:V}),ie&&!V.isExtraCoord&&(!X&&!K&&V.ordinalMeta&&(K=V),!b&&"ordinal"!==V.type&&"time"!==V.type&&(!re||re===V.coordDim)&&(b=V))}),b&&!X&&!K&&(X=!0),b){Y="__\0ecstackresult_"+Ce.id,Q="__\0ecstackedover_"+Ce.id,K&&(K.createInvertedIndices=!0);var F=b.coordDim,q=b.type,G=0;(0,ue.each)(U,function(V){V.coordDim===F&&G++});var W={name:Y,coordDim:F,coordDimIndex:G,type:q,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:U.length},J={name:Q,coordDim:Q,coordDimIndex:G+1,type:q,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:U.length+1};ee?($&&(W.storeDimIndex=$.ensureCalculationDimension(Q,q),J.storeDimIndex=$.ensureCalculationDimension(Y,q)),ee.appendCalculationDimension(W),ee.appendCalculationDimension(J)):(U.push(W),U.push(J))}return{stackedDimension:b&&b.name,stackedByDimension:K&&K.name,isStackedByIndex:X,stackedOverDimension:Q,stackResultDimension:Y}}function ge(Ce,he){return!!he&&he===Ce.getCalculationInfo("stackedDimension")}function be(Ce,he){return ge(Ce,he)?Ce.getCalculationInfo("stackResultDimension"):he}},4066:(Vt,Qe,H)=>{H.d(Qe,{ID:()=>j,o2:()=>be,tR:()=>re,yQ:()=>ye});var ue=H(4785),Se=H(628),le=H(5577);function ye(U,ee){var $=ee&&ee.type;return"ordinal"===$?U:("time"===$&&!(0,Se.isNumber)(U)&&null!=U&&"-"!==U&&(U=+(0,ue.sG)(U)),null==U||""===U?NaN:+U)}var ge=(0,Se.createHashMap)({number:function(U){return parseFloat(U)},time:function(U){return+(0,ue.sG)(U)},trim:function(U){return(0,Se.isString)(U)?(0,Se.trim)(U):U}});function be(U){return ge.get(U)}var Ce={lt:function(U,ee){return U<ee},lte:function(U,ee){return U<=ee},gt:function(U,ee){return U>ee},gte:function(U,ee){return U>=ee}},he=function(){function U(ee,$){(0,Se.isNumber)($)||(0,le._y)(""),this._opFn=Ce[ee],this._rvalFloat=(0,ue.FK)($)}return U.prototype.evaluate=function(ee){return(0,Se.isNumber)(ee)?this._opFn(ee,this._rvalFloat):this._opFn((0,ue.FK)(ee),this._rvalFloat)},U}(),j=function(){function U(ee,$){var ie="desc"===ee;this._resultLT=ie?1:-1,null==$&&($=ie?"min":"max"),this._incomparable="min"===$?-1/0:1/0}return U.prototype.evaluate=function(ee,$){var ie=(0,Se.isNumber)(ee)?ee:(0,ue.FK)(ee),K=(0,Se.isNumber)($)?$:(0,ue.FK)($),b=isNaN(ie),Y=isNaN(K);if(b&&(ie=this._incomparable),Y&&(K=this._incomparable),b&&Y){var Q=(0,Se.isString)(ee),F=(0,Se.isString)($);Q&&(ie=F?ee:0),F&&(K=Q?$:0)}return ie<K?this._resultLT:ie>K?-this._resultLT:0},U}(),X=function(){function U(ee,$){this._rval=$,this._isEQ=ee,this._rvalTypeof=typeof $,this._rvalFloat=(0,ue.FK)($)}return U.prototype.evaluate=function(ee){var $=ee===this._rval;if(!$){var ie=typeof ee;ie!==this._rvalTypeof&&("number"===ie||"number"===this._rvalTypeof)&&($=(0,ue.FK)(ee)===this._rvalFloat)}return this._isEQ?$:!$},U}();function re(U,ee){return"eq"===U||"ne"===U?new X("eq"===U,ee):(0,Se.hasOwn)(Ce,U)?new he(U,ee):null}},1577:(Vt,Qe,H)=>{H.d(Qe,{T:()=>be,y:()=>ye});var ue=H(628),Se=H(4367),le=function(){function he(j,X){this._encode=j,this._schema=X}return he.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},he.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},he}();function ye(he,j){var X={},re=X.encode={},U=(0,ue.createHashMap)(),ee=[],$=[],ie={};(0,ue.each)(he.dimensions,function(F){var q=he.getDimensionInfo(F),G=q.coordDim;if(G){var W=q.coordDimIndex;ge(re,G)[W]=F,q.isExtraCoord||(U.set(G,1),function Ce(he){return!("ordinal"===he||"time"===he)}(q.type)&&(ee[0]=F),ge(ie,G)[W]=he.getDimensionIndex(q.name)),q.defaultTooltip&&$.push(F)}Se.f7.each(function(J,V){var P=ge(re,V),T=q.otherDims[V];null!=T&&!1!==T&&(P[T]=q.name)})});var K=[],b={};U.each(function(F,q){var G=re[q];b[q]=G[0],K=K.concat(G)}),X.dataDimsOnCoord=K,X.dataDimIndicesOnCoord=(0,ue.map)(K,function(F){return he.getDimensionInfo(F).storeDimIndex}),X.encodeFirstDimNotExtra=b;var Y=re.label;Y&&Y.length&&(ee=Y.slice());var Q=re.tooltip;return Q&&Q.length?$=Q.slice():$.length||($=ee.slice()),re.defaultedLabel=ee,re.defaultedTooltip=$,X.userOutput=new le(ie,j),X}function ge(he,j){return he.hasOwnProperty(j)||(he[j]=[]),he[j]}function be(he){return"category"===he?"ordinal":"time"===he?"time":"float"}},4844:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>ee});var ue=H(628),le=(0,H(1266).Yf)();function ge($,ie){if(function X($){return le($).mainData===$}(this)){var K=(0,ue.extend)({},le(this).datas);K[this.dataType]=ie,re(ie,K,$)}else U(ie,this.dataType,le(this).mainData,$);return ie}function be($,ie){return $.struct&&$.struct.update(),ie}function Ce($,ie){return(0,ue.each)(le(ie).datas,function(K,b){K!==ie&&U(K.cloneShallow(),b,ie,$)}),ie}function he($){var ie=le(this).mainData;return null==$||null==ie?ie:le(ie).datas[$]}function j(){var $=le(this).mainData;return null==$?[{data:$}]:(0,ue.map)((0,ue.keys)(le($).datas),function(ie){return{type:ie,data:le($).datas[ie]}})}function re($,ie,K){le($).datas={},(0,ue.each)(ie,function(b,Y){U(b,Y,$,K)})}function U($,ie,K,b){le(K).datas[ie]=$,le($).mainData=K,$.dataType=ie,b.struct&&($[b.structAttr]=b.struct,b.struct[b.datasAttr[ie]]=$),$.getLinkedData=he,$.getLinkedDataAll=j}const ee=function ye($){var ie=$.mainData,K=$.datas;K||(K={main:ie},$.datasAttr={main:"data"}),$.datas=$.mainData=null,re(ie,K,$),(0,ue.each)(K,function(b){(0,ue.each)(ie.TRANSFERABLE_METHODS,function(Y){b.wrapMethod(Y,(0,ue.curry)(ge,$))})}),ie.wrapMethod("cloneShallow",(0,ue.curry)(Ce,$)),(0,ue.each)(ie.CHANGABLE_METHODS,function(b){ie.wrapMethod(b,(0,ue.curry)(be,$))}),(0,ue.assert)(K[ie.dataType]===ie)}},6153:(Vt,Qe,H)=>{H.d(Qe,{Dq:()=>ye,JT:()=>X,Ss:()=>he,Wd:()=>j,md:()=>be,pY:()=>Ce,u7:()=>re});var ue=H(1266),Se=H(628),le=H(4367),ye={Must:1,Might:2,Not:3},ge=(0,ue.Yf)();function be(ee){ge(ee).datasetMap=(0,Se.createHashMap)()}function Ce(ee,$,ie){var K={},b=j($);if(!b||!ee)return K;var W,J,Y=[],Q=[],q=ge($.ecModel).datasetMap,G=b.uid+"_"+ie.seriesLayoutBy;ee=ee.slice(),(0,Se.each)(ee,function(R,E){var M=(0,Se.isObject)(R)?R:ee[E]={name:R};"ordinal"===M.type&&null==W&&(W=E,J=T(M)),K[M.name]=[]});var V=q.get(G)||q.set(G,{categoryWayDim:J,valueWayDim:0});function P(R,E,M){for(var A=0;A<M;A++)R.push(E+A)}function T(R){var E=R.dimsDef;return E?E.length:1}return(0,Se.each)(ee,function(R,E){var M=R.name,A=T(R);if(null==W)P(K[M],O=V.valueWayDim,A),P(Q,O,A),V.valueWayDim+=A;else if(W===E)P(K[M],0,A),P(Y,0,A);else{var O;P(K[M],O=V.categoryWayDim,A),P(Q,O,A),V.categoryWayDim+=A}}),Y.length&&(K.itemName=Y),Q.length&&(K.seriesName=Q),K}function he(ee,$,ie){var K={};if(!j(ee))return K;var F,Y=$.sourceFormat,Q=$.dimensionsDefine;(Y===le.qb||Y===le.hL)&&(0,Se.each)(Q,function(W,J){"name"===((0,Se.isObject)(W)?W.name:W)&&(F=J)});var q=function(){for(var W={},J={},V=[],P=0,T=Math.min(5,ie);P<T;P++){var R=U($.data,Y,$.seriesLayoutBy,Q,$.startIndex,P);V.push(R);var E=R===ye.Not;if(E&&null==W.v&&P!==F&&(W.v=P),(null==W.n||W.n===W.v||!E&&V[W.n]===ye.Not)&&(W.n=P),M(W)&&V[W.n]!==ye.Not)return W;E||(R===ye.Might&&null==J.v&&P!==F&&(J.v=P),(null==J.n||J.n===J.v)&&(J.n=P))}function M(A){return null!=A.v&&null!=A.n}return M(W)?W:M(J)?J:null}();if(q){K.value=[q.v];var G=F??q.n;K.itemName=[G],K.seriesName=[G]}return K}function j(ee){if(!ee.get("data",!0))return(0,ue.HZ)(ee.ecModel,"dataset",{index:ee.get("datasetIndex",!0),id:ee.get("datasetId",!0)},ue.C6).models[0]}function X(ee){return ee.get("transform",!0)||ee.get("fromTransformResult",!0)?(0,ue.HZ)(ee.ecModel,"dataset",{index:ee.get("fromDatasetIndex",!0),id:ee.get("fromDatasetId",!0)},ue.C6).models:[]}function re(ee,$){return U(ee.data,ee.sourceFormat,ee.seriesLayoutBy,ee.dimensionsDefine,ee.startIndex,$)}function U(ee,$,ie,K,b,Y){var Q,q,G;if((0,Se.isTypedArray)(ee))return ye.Not;if(K){var W=K[Y];(0,Se.isObject)(W)?(q=W.name,G=W.type):(0,Se.isString)(W)&&(q=W)}if(null!=G)return"ordinal"===G?ye.Must:ye.Not;if($===le.XD){var J=ee;if(ie===le.Wc){for(var V=J[Y],P=0;P<(V||[]).length&&P<5;P++)if(null!=(Q=B(V[b+P])))return Q}else for(P=0;P<J.length&&P<5;P++){var T=J[b+P];if(T&&null!=(Q=B(T[Y])))return Q}}else if($===le.qb){var R=ee;if(!q)return ye.Not;for(P=0;P<R.length&&P<5;P++)if((E=R[P])&&null!=(Q=B(E[q])))return Q}else if($===le.hL){if(!q)return ye.Not;if(!(V=ee[q])||(0,Se.isTypedArray)(V))return ye.Not;for(P=0;P<V.length&&P<5;P++)if(null!=(Q=B(V[P])))return Q}else if($===le.cy){var A=ee;for(P=0;P<A.length&&P<5;P++){var E,O=(0,ue.C4)(E=A[P]);if(!(0,Se.isArray)(O))return ye.Not;if(null!=(Q=B(O[Y])))return Q}}function B(ce){var ae=(0,Se.isString)(ce);return null!=ce&&isFinite(ce)&&""!==ce?ae?ye.Might:ye.Not:ae&&"-"!==ce?ye.Must:void 0}return ye.Not}},8003:(Vt,Qe,H)=>{H.d(Qe,{U:()=>he,t:()=>j});var ue=H(628),Se=H(7079),le=H(4367),ye=H(6153),ge=H(7664),be=H(9762),Ce=H(67),he=function(){function U(ee){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=ee}return U.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},U.prototype._setLocalSource=function(ee,$){this._sourceList=ee,this._upstreamSignList=$,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},U.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},U.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},U.prototype._createSource=function(){this._setLocalSource([],[]);var K,b,ee=this._sourceHost,$=this._getUpstreamSourceManagers(),ie=!!$.length;if(X(ee)){var Y=ee,Q=void 0,F=void 0,q=void 0;if(ie){var G=$[0];G.prepareSource(),Q=(q=G.getSource()).data,F=q.sourceFormat,b=[G._getVersionSign()]}else Q=Y.get("data",!0),F=(0,ue.isTypedArray)(Q)?le.J5:le.cy,b=[];var W=this._getSourceMetaRawOption()||{},J=q&&q.metaRawOption||{},V=(0,ue.retrieve2)(W.seriesLayoutBy,J.seriesLayoutBy)||null,P=(0,ue.retrieve2)(W.sourceHeader,J.sourceHeader),T=(0,ue.retrieve2)(W.dimensions,J.dimensions);K=V!==J.seriesLayoutBy||!!P!=!!J.sourceHeader||T?[(0,Se._P)(Q,{seriesLayoutBy:V,sourceHeader:P,dimensions:T},F)]:[]}else{var E=ee;if(ie){var M=this._applyTransform($);K=M.sourceList,b=M.upstreamSignList}else{var A=E.get("source",!0);K=[(0,Se._P)(A,this._getSourceMetaRawOption(),null)],b=[]}}this._setLocalSource(K,b)},U.prototype._applyTransform=function(ee){var $=this._sourceHost,ie=$.get("transform",!0),K=$.get("fromTransformResult",!0);null!=K&&1!==ee.length&&re("");var Y,Q=[],F=[];return(0,ue.each)(ee,function(q){q.prepareSource();var G=q.getSource(K||0);null!=K&&!G&&re(""),Q.push(G),F.push(q._getVersionSign())}),ie?Y=(0,ge.vK)(ie,Q,{datasetIndex:$.componentIndex}):null!=K&&(Y=[(0,Se.ML)(Q[0])]),{sourceList:Y,upstreamSignList:F}},U.prototype._isDirty=function(){if(this._dirty)return!0;for(var ee=this._getUpstreamSourceManagers(),$=0;$<ee.length;$++){var ie=ee[$];if(ie._isDirty()||this._upstreamSignList[$]!==ie._getVersionSign())return!0}},U.prototype.getSource=function(ee){var $=this._sourceList[ee=ee||0];if(!$){var ie=this._getUpstreamSourceManagers();return ie[0]&&ie[0].getSource(ee)}return $},U.prototype.getSharedDataStore=function(ee){var $=ee.makeStoreSchema();return this._innerGetDataStore($.dimensions,ee.source,$.hash)},U.prototype._innerGetDataStore=function(ee,$,ie){var b=this._storeList,Y=b[0];Y||(Y=b[0]={});var Q=Y[ie];if(!Q){var F=this._getUpstreamSourceManagers()[0];X(this._sourceHost)&&F?Q=F._innerGetDataStore(ee,$,ie):(Q=new be.ZP).initData(new Ce.Pl($,ee.length),ee),Y[ie]=Q}return Q},U.prototype._getUpstreamSourceManagers=function(){var ee=this._sourceHost;if(X(ee)){var $=(0,ye.Wd)(ee);return $?[$.getSourceManager()]:[]}return(0,ue.map)((0,ye.JT)(ee),function(ie){return ie.getSourceManager()})},U.prototype._getSourceMetaRawOption=function(){var $,ie,K,ee=this._sourceHost;if(X(ee))$=ee.get("seriesLayoutBy",!0),ie=ee.get("sourceHeader",!0),K=ee.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var b=ee;$=b.get("seriesLayoutBy",!0),ie=b.get("sourceHeader",!0),K=b.get("dimensions",!0)}return{seriesLayoutBy:$,sourceHeader:ie,dimensions:K}},U}();function j(U){U.option.transform&&(0,ue.setAsPrimitive)(U.option.transform)}function X(U){return"series"===U.mainType}function re(U){throw new Error(U)}},7664:(Vt,Qe,H)=>{H.d(Qe,{DA:()=>ie,vK:()=>K});var ue=H(4367),Se=H(1266),le=H(628),ye=H(67),ge=H(4066),be=H(5577),Ce=H(7079),he=function(){function Q(){}return Q.prototype.getRawData=function(){throw new Error("not supported")},Q.prototype.getRawDataItem=function(F){throw new Error("not supported")},Q.prototype.cloneRawData=function(){},Q.prototype.getDimensionInfo=function(F){},Q.prototype.cloneAllDimensionInfo=function(){},Q.prototype.count=function(){},Q.prototype.retrieveValue=function(F,q){},Q.prototype.retrieveValueFromItem=function(F,q){},Q.prototype.convertValue=function(F,q){return(0,ge.yQ)(F,q)},Q}();function X(Q){return Y(Q.sourceFormat)||(0,be._y)(""),Q.data}function re(Q){var F=Q.sourceFormat,q=Q.data;if(Y(F)||(0,be._y)(""),F===ue.XD){for(var W=[],J=0,V=q.length;J<V;J++)W.push(q[J].slice());return W}if(F===ue.qb){for(W=[],J=0,V=q.length;J<V;J++)W.push((0,le.extend)({},q[J]));return W}}function U(Q,F,q){if(null!=q){if((0,le.isNumber)(q)||!isNaN(q)&&!(0,le.hasOwn)(F,q))return Q[q];if((0,le.hasOwn)(F,q))return F[q]}}function ee(Q){return(0,le.clone)(Q)}var $=(0,le.createHashMap)();function ie(Q){var F=(Q=(0,le.clone)(Q)).type;F||(0,be._y)("");var G=F.split(":");2!==G.length&&(0,be._y)("");var W=!1;"echarts"===G[0]&&(F=G[1],W=!0),Q.__isBuiltIn=W,$.set(F,Q)}function K(Q,F,q){var G=(0,Se.kF)(Q),W=G.length;W||(0,be._y)("");for(var V=0,P=W;V<P;V++)F=b(G[V],F),V!==P-1&&(F.length=Math.max(F.length,1));return F}function b(Q,F,q,G){F.length||(0,be._y)(""),(0,le.isObject)(Q)||(0,be._y)("");var V=$.get(Q.type);V||(0,be._y)("");var P=(0,le.map)(F,function(E){return function j(Q,F){var q=new he,G=Q.data,W=q.sourceFormat=Q.sourceFormat,J=Q.startIndex;Q.seriesLayoutBy!==ue.fY&&(0,be._y)("");var P=[],T={},R=Q.dimensionsDefine;if(R)(0,le.each)(R,function(ce,ae){var oe=ce.name,de={index:ae,name:oe,displayName:ce.displayName};P.push(de),null!=oe&&((0,le.hasOwn)(T,oe)&&(0,be._y)(""),T[oe]=de)});else for(var E=0;E<Q.dimensionsDetectedCount;E++)P.push({index:E});var M=(0,ye._j)(W,ue.fY);F.__isBuiltIn&&(q.getRawDataItem=function(ce){return M(G,J,P,ce)},q.getRawData=(0,le.bind)(X,null,Q)),q.cloneRawData=(0,le.bind)(re,null,Q);var A=(0,ye.a)(W,ue.fY);q.count=(0,le.bind)(A,null,G,J,P);var O=(0,ye.tB)(W);q.retrieveValue=function(ce,ae){var oe=M(G,J,P,ce);return B(oe,ae)};var B=q.retrieveValueFromItem=function(ce,ae){if(null!=ce){var oe=P[ae];if(oe)return O(ce,ae,oe.name)}};return q.getDimensionInfo=(0,le.bind)(U,null,P,T),q.cloneAllDimensionInfo=(0,le.bind)(ee,null,P),q}(E,V)}),T=(0,Se.kF)(V.transform({upstream:P[0],upstreamList:P,config:(0,le.clone)(Q.config)}));return(0,le.map)(T,function(E,M){(0,le.isObject)(E)||(0,be._y)(""),E.data||(0,be._y)(""),Y((0,Ce.Kp)(E.data))||(0,be._y)("");var B,ce=F[0];if(ce&&0===M&&!E.dimensions){var ae=ce.startIndex;ae&&(E.data=ce.data.slice(0,ae).concat(E.data)),B={seriesLayoutBy:ue.fY,sourceHeader:ae,dimensions:ce.metaRawOption.dimensions}}else B={seriesLayoutBy:ue.fY,sourceHeader:0,dimensions:E.dimensions};return(0,Ce._P)(E.data,B,null)})}function Y(Q){return Q===ue.XD||Q===ue.qb}},3786:(Vt,Qe,H)=>{H.d(Qe,{RD:()=>jn.Z,TA:()=>re.Z,tF:()=>he.Z,Ir:()=>j.Z,aV:()=>U.Z,Hn:()=>G.Z,Hr:()=>Ce.Hr,wJ:()=>X.Z,$_:()=>b,$j:()=>Ce.$j,Ok:()=>Ce.Ok,HO:()=>Ce.HO,eU:()=>Ce.eU,zP:()=>Ce.zP,B9:()=>Ce.B9,OB:()=>On.Z,Zy:()=>fn,tv:()=>Tt,Sp:()=>jt,Zr:()=>Rt,WU:()=>ge,wL:()=>Ce.wL,JE:()=>Ce.JE,rp:()=>Ce.rp,FU:()=>Ce.FU,Q:()=>ye,_y:()=>ue,S1:()=>Ce.S1,z$:()=>et.RV,pI:()=>$,Rx:()=>Se,Nu:()=>de.Z,pQ:()=>de.Z,zl:()=>Ce.zl,RS:()=>Ce.RS,qR:()=>Ce.qR,yn:()=>Ce.yn,I2:()=>Ce.I2,je:()=>Ce.je,sq:()=>Ce.sq,Br:()=>Ce.Br,ds:()=>Ce.ds,Pu:()=>Ce.Pu,aW:()=>Ce.aW,rV:()=>Ce.OB,YK:()=>Ce.YK,Og:()=>Ce.Og,jQ:()=>Ce.jQ,g2:()=>oe.g2,P2:()=>Y.P2,XV:()=>le,D$:()=>ae.D,D5:()=>be,xr:()=>ie,i8:()=>Ce.i8,gf:()=>K,x_:()=>ee});var ue={};H.r(ue),H.d(ue,{createDimensions:()=>T.q,createList:()=>M,createScale:()=>O,createSymbol:()=>R.th,createTextStyle:()=>ce,dataStack:()=>A,enableHoverEmphasis:()=>E.vF,getECData:()=>V.A,getLayoutRect:()=>W.ME,mixinAxisModelCommonMethods:()=>B});var Se={};H.r(Se),H.d(Se,{MAX_SAFE_INTEGER:()=>ne.YM,asc:()=>ne.dt,getPercentWithPrecision:()=>ne.eJ,getPixelPrecision:()=>ne.M9,getPrecision:()=>ne.p8,getPrecisionSafe:()=>ne.ZB,isNumeric:()=>ne.kE,isRadianAroundZero:()=>ne.mW,linearMap:()=>ne.NU,nice:()=>ne.kx,numericToNumber:()=>ne.FK,parseDate:()=>ne.sG,quantile:()=>ne.VR,quantity:()=>ne.Xd,quantityExponent:()=>ne.xW,reformIntervals:()=>ne.nR,remRadian:()=>ne.wW,round:()=>ne.NM});var le={};H.r(le),H.d(le,{format:()=>xe.WU,parse:()=>ne.sG});var ye={};H.r(ye),H.d(ye,{Arc:()=>Ht.Z,BezierCurve:()=>Ot.Z,BoundingRect:()=>$n.Z,Circle:()=>Ee.Z,CompoundPath:()=>hn.Z,Ellipse:()=>Ve.Z,Group:()=>we.Z,Image:()=>Te.ZP,IncrementalDisplayable:()=>an.Z,Line:()=>_t.Z,LinearGradient:()=>Vn.Z,Polygon:()=>$e.Z,Polyline:()=>ct.Z,RadialGradient:()=>sr.Z,Rect:()=>St.Z,Ring:()=>We.Z,Sector:()=>He.C,Text:()=>Ae.ZP,clipPointsByRect:()=>fe.clipPointsByRect,clipRectByRect:()=>fe.clipRectByRect,createIcon:()=>fe.createIcon,extendPath:()=>fe.extendPath,extendShape:()=>fe.extendShape,getShapeClass:()=>fe.getShapeClass,getTransform:()=>fe.getTransform,initProps:()=>ve.KZ,makeImage:()=>fe.makeImage,makePath:()=>fe.makePath,mergePath:()=>fe.mergePath,registerShape:()=>fe.registerShape,resizePath:()=>fe.resizePath,updateProps:()=>ve.D});var ge={};H.r(ge),H.d(ge,{addCommas:()=>gr.OD,capitalFirst:()=>gr.ew,encodeHTML:()=>er.F1,formatTime:()=>gr.mr,formatTpl:()=>gr.kF,getTextRect:()=>cn,getTooltipMarker:()=>gr.A0,normalizeCssArray:()=>gr.MY,toCamelCase:()=>gr.zW,truncateText:()=>Kt.aF});var be={};H.r(be),H.d(be,{bind:()=>K.bind,clone:()=>K.clone,curry:()=>K.curry,defaults:()=>K.defaults,each:()=>K.each,extend:()=>K.extend,filter:()=>K.filter,indexOf:()=>K.indexOf,inherits:()=>K.inherits,isArray:()=>K.isArray,isFunction:()=>K.isFunction,isObject:()=>K.isObject,isString:()=>K.isString,map:()=>K.map,merge:()=>K.merge,reduce:()=>K.reduce});var Ce=H(5433),he=H(9447),j=H(9899),X=H(9521),re=H(1005),U=H(3241),ee=H(7806),$=H(3481),ie=H(8221),K=H(628),b=H(312),Y=H(357),Q=H(405),F=H(4174),q=H(2565),G=H(1725),W=H(634),J=H(143),V=H(7282),P=H(1081),T=H(9178),R=H(4550),E=H(6869);function M(pr){return(0,Q.Z)(null,pr)}var A={isDimensionStacked:J.M,enableDataStack:J.BM,getStackedDimension:J.IR};function O(pr,rt){var ot=rt;rt instanceof G.Z||(ot=new G.Z(rt));var st=F.aG(ot);return st.setExtent(pr[0],pr[1]),F.Jk(st,ot),st}function B(pr){K.mixin(pr,q.W)}function ce(pr,rt){return(0,P.Lr)(pr,null,null,"normal"!==(rt=rt||{}).state)}var ae=H(5199),oe=H(5730),de=H(119),ne=H(4785),xe=H(999),fe=H(2429),ve=H(3802),we=H(8539),Te=H(6766),Ae=H(8208),Ee=H(9359),Ve=H(6743),He=H(9770),We=H(495),$e=H(3186),ct=H(7834),St=H(3160),_t=H(4110),Ot=H(6146),Ht=H(8234),an=H(3520),hn=H(1115),Vn=H(5910),sr=H(641),$n=H(7021),gr=H(9706),er=H(2425),Kt=H(7969);function cn(pr,rt,ot,st,je,gt,ht,Pt){return new Ae.ZP({style:{text:pr,font:rt,align:ot,verticalAlign:st,padding:je,rich:gt,overflow:ht?"truncate":null,lineHeight:Pt}}).getBoundingRect()}var On=H(169),jn=H(6592),et=H(9012);function Tt(pr){var rt=he.Z.extend(pr);return he.Z.registerClass(rt),rt}function jt(pr){var rt=j.Z.extend(pr);return j.Z.registerClass(rt),rt}function Rt(pr){var rt=X.Z.extend(pr);return X.Z.registerClass(rt),rt}function fn(pr){var rt=re.Z.extend(pr);return re.Z.registerClass(rt),rt}var fr=H(6840);(0,ae.D)(fr.T)},5199:(Vt,Qe,H)=>{H.d(Qe,{D:()=>re});var ue=H(5433),Se=H(9899),le=H(1005),ye=H(9447),ge=H(9521),be=H(628),Ce=H(5831),he=H(7806),j=[],X={registerPreprocessor:ue.ds,registerProcessor:ue.Pu,registerPostInit:ue.sq,registerPostUpdate:ue.Br,registerUpdateLifecycle:ue.YK,registerAction:ue.zl,registerCoordinateSystem:ue.RS,registerLayout:ue.qR,registerVisual:ue.Og,registerTransform:ue.OB,registerLoading:ue.yn,registerMap:ue.je,registerImpl:Ce.M,PRIORITY:ue.Hr,ComponentModel:ye.Z,ComponentView:Se.Z,SeriesModel:ge.Z,ChartView:le.Z,registerComponentModel:function(U){ye.Z.registerClass(U)},registerComponentView:function(U){Se.Z.registerClass(U)},registerSeriesModel:function(U){ge.Z.registerClass(U)},registerChartView:function(U){le.Z.registerClass(U)},registerSubTypeDefaulter:function(U,ee){ye.Z.registerSubTypeDefaulter(U,ee)},registerPainter:function(U,ee){(0,he.registerPainter)(U,ee)}};function re(U){(0,be.isArray)(U)?(0,be.each)(U,function(ee){re(ee)}):(0,be.indexOf)(j,U)>=0||(j.push(U),(0,be.isFunction)(U)&&(U={install:U}),U.install(X))}},6840:(Vt,Qe,H)=>{H.d(Qe,{T:()=>G});var ue=H(1266),Se=H(7021),le=H(3802),ye=H(7282),ge=H(4785),be=H(9778),Ce=H(7521),he=H(628),j=H(1593),X=H(1081);function re(W){if(W){for(var J=[],V=0;V<W.length;V++)J.push(W[V].slice());return J}}function U(W,J){var V=W.label,P=J&&J.getTextGuideLine();return{dataIndex:W.dataIndex,dataType:W.dataType,seriesIndex:W.seriesModel.seriesIndex,text:W.label.style.text,rect:W.hostRect,labelRect:W.rect,align:V.style.align,verticalAlign:V.style.verticalAlign,labelLinePoints:re(P&&P.shape.points)}}var ee=["align","verticalAlign","width","height","fontSize"],$=new be.ZP,ie=(0,ue.Yf)(),K=(0,ue.Yf)();function b(W,J,V){for(var P=0;P<V.length;P++){var T=V[P];null!=J[T]&&(W[T]=J[T])}}var Y=["x","y","rotation"];const F=function(){function W(){this._labelList=[],this._chartViewList=[]}return W.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},W.prototype._addLabel=function(J,V,P,T,R){var E=T.style,A=T.__hostTarget.textConfig||{},O=T.getComputedTransform(),B=T.getBoundingRect().plain();Se.Z.applyTransform(B,B,O),O?$.setLocalTransform(O):($.x=$.y=$.rotation=$.originX=$.originY=0,$.scaleX=$.scaleY=1);var ae,ce=T.__hostTarget;if(ce){ae=ce.getBoundingRect().plain();var oe=ce.getComputedTransform();Se.Z.applyTransform(ae,ae,oe)}var de=ae&&ce.getTextGuideLine();this._labelList.push({label:T,labelLine:de,seriesModel:P,dataIndex:J,dataType:V,layoutOption:R,computedLayoutOption:null,rect:B,hostRect:ae,priority:ae?ae.width*ae.height:0,defaultAttr:{ignore:T.ignore,labelGuideIgnore:de&&de.ignore,x:$.x,y:$.y,scaleX:$.scaleX,scaleY:$.scaleY,rotation:$.rotation,style:{x:E.x,y:E.y,align:E.align,verticalAlign:E.verticalAlign,width:E.width,height:E.height,fontSize:E.fontSize},cursor:T.cursor,attachedPos:A.position,attachedRot:A.rotation}})},W.prototype.addLabelsOfSeries=function(J){var V=this;this._chartViewList.push(J);var P=J.__model,T=P.get("labelLayout");!(0,he.isFunction)(T)&&!(0,he.keys)(T).length||J.group.traverse(function(R){if(R.ignore)return!0;var E=R.getTextContent(),M=(0,ye.A)(R);E&&!E.disableLabelLayout&&V._addLabel(M.dataIndex,M.dataType,P,E,T)})},W.prototype.updateLayoutConfig=function(J){var V=J.getWidth(),P=J.getHeight();function T(we,Te){return function(){(0,Ce.d)(we,Te)}}for(var R=0;R<this._labelList.length;R++){var E=this._labelList[R],M=E.label,A=M.__hostTarget,O=E.defaultAttr,B=void 0;B=(0,he.isFunction)(E.layoutOption)?E.layoutOption(U(E,A)):E.layoutOption,E.computedLayoutOption=B=B||{};var ce=Math.PI/180;A&&A.setTextConfig({local:!1,position:null!=B.x||null!=B.y?null:O.attachedPos,rotation:null!=B.rotate?B.rotate*ce:O.attachedRot,offset:[B.dx||0,B.dy||0]});var ae=!1;if(null!=B.x?(M.x=(0,ge.GM)(B.x,V),M.setStyle("x",0),ae=!0):(M.x=O.x,M.setStyle("x",O.style.x)),null!=B.y?(M.y=(0,ge.GM)(B.y,P),M.setStyle("y",0),ae=!0):(M.y=O.y,M.setStyle("y",O.style.y)),B.labelLinePoints){var oe=A.getTextGuideLine();oe&&(oe.setShape({points:B.labelLinePoints}),ae=!1)}ie(M).needsUpdateLabelLine=ae,M.rotation=null!=B.rotate?B.rotate*ce:O.rotation,M.scaleX=O.scaleX,M.scaleY=O.scaleY;for(var ne=0;ne<ee.length;ne++){var xe=ee[ne];M.setStyle(xe,null!=B[xe]?B[xe]:O.style[xe])}if(B.draggable){if(M.draggable=!0,M.cursor="move",A){var fe=E.seriesModel;null!=E.dataIndex&&(fe=E.seriesModel.getData(E.dataType).getItemModel(E.dataIndex)),M.on("drag",T(A,fe.getModel("labelLine")))}}else M.off("drag"),M.cursor=O.cursor}},W.prototype.layout=function(J){var V=J.getWidth(),P=J.getHeight(),T=(0,j.VT)(this._labelList),R=(0,he.filter)(T,function(A){return"shiftX"===A.layoutOption.moveOverlap}),E=(0,he.filter)(T,function(A){return"shiftY"===A.layoutOption.moveOverlap});(0,j.WE)(R,0,V),(0,j.GI)(E,0,P);var M=(0,he.filter)(T,function(A){return A.layoutOption.hideOverlap});(0,j.yl)(M)},W.prototype.processLabelsOverall=function(){var J=this;(0,he.each)(this._chartViewList,function(V){var P=V.__model,T=V.ignoreLabelLineUpdate,R=P.isAnimationEnabled();V.group.traverse(function(E){if(E.ignore&&!E.forceLabelAnimation)return!0;var M=!T,A=E.getTextContent();!M&&A&&(M=ie(A).needsUpdateLabelLine),M&&J._updateLabelLine(E,P),R&&J._animateLabels(E,P)})})},W.prototype._updateLabelLine=function(J,V){var P=J.getTextContent(),T=(0,ye.A)(J),R=T.dataIndex;if(P&&null!=R){var E=V.getData(T.dataType),M=E.getItemModel(R),A={},O=E.getItemVisual(R,"style"),B=E.getVisual("drawType");A.stroke=O[B];var ce=M.getModel("labelLine");(0,Ce.Iu)(J,(0,Ce.$x)(M),A),(0,Ce.d)(J,ce)}},W.prototype._animateLabels=function(J,V){var P=J.getTextContent(),T=J.getTextGuideLine();if(P&&(J.forceLabelAnimation||!P.ignore&&!P.invisible&&!J.disableLabelAnimation&&!(0,le.eq)(J))){var E=(R=ie(P)).oldLayout,M=(0,ye.A)(J),A=M.dataIndex,O={x:P.x,y:P.y,rotation:P.rotation},B=V.getData(M.dataType);if(E){P.attr(E);var ae=J.prevStates;ae&&((0,he.indexOf)(ae,"select")>=0&&P.attr(R.oldLayoutSelect),(0,he.indexOf)(ae,"emphasis")>=0&&P.attr(R.oldLayoutEmphasis)),(0,le.D)(P,O,V,A)}else if(P.attr(O),!(0,X.qA)(P).valueAnimation){var ce=(0,he.retrieve2)(P.style.opacity,1);P.style.opacity=0,(0,le.KZ)(P,{style:{opacity:ce}},V,A)}if(R.oldLayout=O,P.states.select){var oe=R.oldLayoutSelect={};b(oe,O,Y),b(oe,P.states.select,Y)}if(P.states.emphasis){var de=R.oldLayoutEmphasis={};b(de,O,Y),b(de,P.states.emphasis,Y)}(0,X.tD)(P,A,B,V,V)}if(T&&!T.ignore&&!T.invisible){var R=K(T),ne={points:T.shape.points};(E=R.oldLayout)?(T.attr({shape:E}),(0,le.D)(T,{shape:ne},V)):(T.setShape(ne),T.style.strokePercent=0,(0,le.KZ)(T,{style:{strokePercent:1}},V)),R.oldLayout=ne}},W}();var q=(0,ue.Yf)();function G(W){W.registerUpdateLifecycle("series:beforeupdate",function(J,V,P){var T=q(V).labelManager;T||(T=q(V).labelManager=new F),T.clearLabels()}),W.registerUpdateLifecycle("series:layoutlabels",function(J,V,P){var T=q(V).labelManager;P.updatedSeries.forEach(function(R){T.addLabelsOfSeries(V.getViewOfSeriesModel(R))}),T.updateLayoutConfig(V),T.layout(V),T.processLabelsOverall()})}},7521:(Vt,Qe,H)=>{H.d(Qe,{$x:()=>ce,Iu:()=>B,_A:()=>M,d:()=>P,qK:()=>E});var ue=H(7564),Se=H(126),le=H(7834),ye=H(7349),ge=H(3416),be=H(9969),Ce=H(628),he=H(3481),j=H(8221),X=H(6869),re=2*Math.PI,U=ye.Z.CMD,ee=["top","right","bottom","left"];function $(ae,oe,de,ne,xe){var fe=de.width,ve=de.height;switch(ae){case"top":ne.set(de.x+fe/2,de.y-oe),xe.set(0,-1);break;case"bottom":ne.set(de.x+fe/2,de.y+ve+oe),xe.set(0,1);break;case"left":ne.set(de.x-oe,de.y+ve/2),xe.set(-1,0);break;case"right":ne.set(de.x+fe+oe,de.y+ve/2),xe.set(1,0)}}function ie(ae,oe,de,ne,xe,fe,ve,we,Te){ve-=ae,we-=oe;var Ae=Math.sqrt(ve*ve+we*we),Ee=(ve/=Ae)*de+ae,Ve=(we/=Ae)*de+oe;if(Math.abs(ne-xe)%re<1e-4)return Te[0]=Ee,Te[1]=Ve,Ae-de;if(fe){var He=ne;ne=(0,ge.m)(xe),xe=(0,ge.m)(He)}else ne=(0,ge.m)(ne),xe=(0,ge.m)(xe);ne>xe&&(xe+=re);var We=Math.atan2(we,ve);if(We<0&&(We+=re),We>=ne&&We<=xe||We+re>=ne&&We+re<=xe)return Te[0]=Ee,Te[1]=Ve,Ae-de;var $e=de*Math.cos(ne)+ae,ct=de*Math.sin(ne)+oe,St=de*Math.cos(xe)+ae,_t=de*Math.sin(xe)+oe,Ot=($e-ve)*($e-ve)+(ct-we)*(ct-we),Ht=(St-ve)*(St-ve)+(_t-we)*(_t-we);return Ot<Ht?(Te[0]=$e,Te[1]=ct,Math.sqrt(Ot)):(Te[0]=St,Te[1]=_t,Math.sqrt(Ht))}function K(ae,oe,de,ne,xe,fe,ve,we){var Te=xe-ae,Ae=fe-oe,Ee=de-ae,Ve=ne-oe,He=Math.sqrt(Ee*Ee+Ve*Ve),$e=(Te*(Ee/=He)+Ae*(Ve/=He))/He;we&&($e=Math.min(Math.max($e,0),1));var ct=ve[0]=ae+($e*=He)*Ee,St=ve[1]=oe+$e*Ve;return Math.sqrt((ct-xe)*(ct-xe)+(St-fe)*(St-fe))}function b(ae,oe,de,ne,xe,fe,ve){de<0&&(ae+=de,de=-de),ne<0&&(oe+=ne,ne=-ne);var we=ae+de,Te=oe+ne,Ae=ve[0]=Math.min(Math.max(xe,ae),we),Ee=ve[1]=Math.min(Math.max(fe,oe),Te);return Math.sqrt((Ae-xe)*(Ae-xe)+(Ee-fe)*(Ee-fe))}var Y=[];function Q(ae,oe,de){var ne=b(oe.x,oe.y,oe.width,oe.height,ae.x,ae.y,Y);return de.set(Y[0],Y[1]),ne}function F(ae,oe,de){for(var we,Te,ne=0,xe=0,fe=0,ve=0,Ae=1/0,Ee=oe.data,Ve=ae.x,He=ae.y,We=0;We<Ee.length;){var $e=Ee[We++];1===We&&(fe=ne=Ee[We],ve=xe=Ee[We+1]);var ct=Ae;switch($e){case U.M:ne=fe=Ee[We++],xe=ve=Ee[We++];break;case U.L:ct=K(ne,xe,Ee[We],Ee[We+1],Ve,He,Y,!0),ne=Ee[We++],xe=Ee[We++];break;case U.C:ct=(0,be.t1)(ne,xe,Ee[We++],Ee[We++],Ee[We++],Ee[We++],Ee[We],Ee[We+1],Ve,He,Y),ne=Ee[We++],xe=Ee[We++];break;case U.Q:ct=(0,be.Wr)(ne,xe,Ee[We++],Ee[We++],Ee[We],Ee[We+1],Ve,He,Y),ne=Ee[We++],xe=Ee[We++];break;case U.A:var St=Ee[We++],_t=Ee[We++],Ot=Ee[We++],Ht=Ee[We++],an=Ee[We++],hn=Ee[We++];We+=1;var Vn=!!(1-Ee[We++]);we=Math.cos(an)*Ot+St,Te=Math.sin(an)*Ht+_t,We<=1&&(fe=we,ve=Te),ct=ie(St,_t,Ht,an,an+hn,Vn,(Ve-St)*Ht/Ot+St,He,Y),ne=Math.cos(an+hn)*Ot+St,xe=Math.sin(an+hn)*Ht+_t;break;case U.R:ct=b(fe=ne=Ee[We++],ve=xe=Ee[We++],Ee[We++],Ee[We++],Ve,He,Y);break;case U.Z:ct=K(ne,xe,fe,ve,Ve,He,Y,!0),ne=fe,xe=ve}ct<Ae&&(Ae=ct,de.set(Y[0],Y[1]))}return Ae}var q=new ue.Z,G=new ue.Z,W=new ue.Z,J=new ue.Z,V=new ue.Z;function P(ae,oe){if(ae){var de=ae.getTextGuideLine(),ne=ae.getTextContent();if(ne&&de){var xe=ae.textGuideLineConfig||{},fe=[[0,0],[0,0],[0,0]],ve=xe.candidates||ee,we=ne.getBoundingRect().clone();we.applyTransform(ne.getComputedTransform());var Te=1/0,Ae=xe.anchor,Ee=ae.getComputedTransform(),Ve=Ee&&(0,he.invert)([],Ee),He=oe.get("length2")||0;Ae&&W.copy(Ae);for(var We=0;We<ve.length;We++){$(ve[We],0,we,q,J),ue.Z.scaleAndAdd(G,q,J,He),G.transform(Ve);var ct=ae.getBoundingRect(),St=Ae?Ae.distance(G):ae instanceof Se.ZP?F(G,ae.path,W):Q(G,ct,W);St<Te&&(Te=St,G.transform(Ee),W.transform(Ee),W.toArray(fe[0]),G.toArray(fe[1]),q.toArray(fe[2]))}E(fe,oe.get("minTurnAngle")),de.setShape({points:fe})}}}var T=[],R=new ue.Z;function E(ae,oe){if(oe<=180&&oe>0){oe=oe/180*Math.PI,q.fromArray(ae[0]),G.fromArray(ae[1]),W.fromArray(ae[2]),ue.Z.sub(J,q,G),ue.Z.sub(V,W,G);var de=J.len(),ne=V.len();if(!(de<.001||ne<.001)){J.scale(1/de),V.scale(1/ne);var xe=J.dot(V);if(Math.cos(oe)<xe){var ve=K(G.x,G.y,W.x,W.y,q.x,q.y,T,!1);R.fromArray(T),R.scaleAndAdd(V,ve/Math.tan(Math.PI-oe));var we=W.x!==G.x?(R.x-G.x)/(W.x-G.x):(R.y-G.y)/(W.y-G.y);if(isNaN(we))return;we<0?ue.Z.copy(R,G):we>1&&ue.Z.copy(R,W),R.toArray(ae[1])}}}}function M(ae,oe,de){if(de<=180&&de>0){de=de/180*Math.PI,q.fromArray(ae[0]),G.fromArray(ae[1]),W.fromArray(ae[2]),ue.Z.sub(J,G,q),ue.Z.sub(V,W,G);var ne=J.len(),xe=V.len();if(!(ne<.001||xe<.001)&&(J.scale(1/ne),V.scale(1/xe),J.dot(oe)<Math.cos(de))){var we=K(G.x,G.y,W.x,W.y,q.x,q.y,T,!1);R.fromArray(T);var Te=Math.PI/2,Ee=Te+Math.acos(V.dot(oe))-de;if(Ee>=Te)ue.Z.copy(R,W);else{R.scaleAndAdd(V,we/Math.tan(Math.PI/2-Ee));var Ve=W.x!==G.x?(R.x-G.x)/(W.x-G.x):(R.y-G.y)/(W.y-G.y);if(isNaN(Ve))return;Ve<0?ue.Z.copy(R,G):Ve>1&&ue.Z.copy(R,W)}R.toArray(ae[1])}}}function A(ae,oe,de,ne){var xe="normal"===de,fe=xe?ae:ae.ensureState(de);fe.ignore=oe;var ve=ne.get("smooth");ve&&!0===ve&&(ve=.3),fe.shape=fe.shape||{},ve>0&&(fe.shape.smooth=ve);var we=ne.getModel("lineStyle").getLineStyle();xe?ae.useStyle(we):fe.style=we}function O(ae,oe){var de=oe.smooth,ne=oe.points;if(ne)if(ae.moveTo(ne[0][0],ne[0][1]),de>0&&ne.length>=3){var xe=j.dist(ne[0],ne[1]),fe=j.dist(ne[1],ne[2]);if(!xe||!fe)return ae.lineTo(ne[1][0],ne[1][1]),void ae.lineTo(ne[2][0],ne[2][1]);var ve=Math.min(xe,fe)*de,we=j.lerp([],ne[1],ne[0],ve/xe),Te=j.lerp([],ne[1],ne[2],ve/fe),Ae=j.lerp([],we,Te,.5);ae.bezierCurveTo(we[0],we[1],we[0],we[1],Ae[0],Ae[1]),ae.bezierCurveTo(Te[0],Te[1],Te[0],Te[1],ne[2][0],ne[2][1])}else for(var Ee=1;Ee<ne.length;Ee++)ae.lineTo(ne[Ee][0],ne[Ee][1])}function B(ae,oe,de){var ne=ae.getTextGuideLine(),xe=ae.getTextContent();if(xe){for(var fe=oe.normal,ve=fe.get("show"),we=xe.ignore,Te=0;Te<X.qc.length;Te++){var Ae=X.qc[Te],Ee=oe[Ae],Ve="normal"===Ae;if(Ee){var He=Ee.get("show");if((Ve?we:(0,Ce.retrieve2)(xe.states[Ae]&&xe.states[Ae].ignore,we))||!(0,Ce.retrieve2)(He,ve)){var $e=Ve?ne:ne&&ne.states[Ae];$e&&($e.ignore=!0);continue}ne||(ne=new le.Z,ae.setTextGuideLine(ne),!Ve&&(we||!ve)&&A(ne,!0,"normal",oe.normal),ae.stateProxy&&(ne.stateProxy=ae.stateProxy)),A(ne,!1,Ae,Ee)}}if(ne){(0,Ce.defaults)(ne.style,de),ne.style.fill=null;var ct=fe.get("showAbove");(ae.textGuideLineConfig=ae.textGuideLineConfig||{}).showAbove=ct||!1,ne.buildPath=O}}else ne&&ae.removeTextGuideLine()}function ce(ae,oe){for(var de={normal:ae.getModel(oe=oe||"labelLine")},ne=0;ne<X.L1.length;ne++){var xe=X.L1[ne];de[xe]=ae.getModel([xe,oe])}return de}},1593:(Vt,Qe,H)=>{H.d(Qe,{GI:()=>be,VT:()=>le,WE:()=>ge,yl:()=>Ce});var ue=H(6217),Se=H(7021);function le(he){for(var j=[],X=0;X<he.length;X++){var re=he[X];if(!re.defaultAttr.ignore){var U=re.label,ee=U.getComputedTransform(),$=U.getBoundingRect(),ie=!ee||ee[1]<1e-5&&ee[2]<1e-5,K=U.style.margin||0,b=$.clone();b.applyTransform(ee),b.x-=K/2,b.y-=K/2,b.width+=K,b.height+=K;var Y=ie?new ue.Z($,ee):null;j.push({label:U,labelLine:re.labelLine,rect:b,localRect:$,obb:Y,priority:re.priority,defaultAttr:re.defaultAttr,layoutOption:re.computedLayoutOption,axisAligned:ie,transform:ee})}}return j}function ye(he,j,X,re,U,ee){var $=he.length;if(!($<2)){he.sort(function(B,ce){return B.rect[j]-ce.rect[j]});for(var K,ie=0,b=!1,Y=[],Q=0,F=0;F<$;F++){var q=he[F],G=q.rect;(K=G[j]-ie)<0&&(G[j]-=K,q.label[j]-=K,b=!0);var W=Math.max(-K,0);Y.push(W),Q+=W,ie=G[j]+G[X]}Q>0&&ee&&M(-Q/$,0,$);var P,T,J=he[0],V=he[$-1];return R(),P<0&&A(-P,.8),T<0&&A(T,.8),R(),E(P,T,1),E(T,P,-1),R(),P<0&&O(-P),T<0&&O(T),b}function R(){P=J.rect[j]-re,T=U-V.rect[j]-V.rect[X]}function E(B,ce,ae){if(B<0){var oe=Math.min(ce,-B);if(oe>0){M(oe*ae,0,$);var de=oe+B;de<0&&A(-de*ae,1)}else A(-B*ae,1)}}function M(B,ce,ae){0!==B&&(b=!0);for(var oe=ce;oe<ae;oe++){var de=he[oe];de.rect[j]+=B,de.label[j]+=B}}function A(B,ce){for(var ae=[],oe=0,de=1;de<$;de++){var ne=he[de-1].rect,xe=Math.max(he[de].rect[j]-ne[j]-ne[X],0);ae.push(xe),oe+=xe}if(oe){var fe=Math.min(Math.abs(B)/oe,ce);if(B>0)for(de=0;de<$-1;de++)M(ae[de]*fe,0,de+1);else for(de=$-1;de>0;de--)M(-ae[de-1]*fe,de,$)}}function O(B){var ce=B<0?-1:1;B=Math.abs(B);for(var ae=Math.ceil(B/($-1)),oe=0;oe<$-1;oe++)if(ce>0?M(ae,0,oe+1):M(-ae,$-oe-1,$),(B-=ae)<=0)return}}function ge(he,j,X,re){return ye(he,"x","width",j,X,re)}function be(he,j,X,re){return ye(he,"y","height",j,X,re)}function Ce(he){var j=[];he.sort(function(W,J){return J.priority-W.priority});var X=new Se.Z(0,0,0,0);function re(W){if(!W.ignore){var J=W.ensureState("emphasis");null==J.ignore&&(J.ignore=!1)}W.ignore=!0}for(var U=0;U<he.length;U++){var ee=he[U],$=ee.axisAligned,ie=ee.localRect,K=ee.transform,b=ee.label,Y=ee.labelLine;X.copy(ee.rect),X.width-=.1,X.height-=.1,X.x+=.05,X.y+=.05;for(var Q=ee.obb,F=!1,q=0;q<j.length;q++){var G=j[q];if(X.intersect(G.rect)){if($&&G.axisAligned){F=!0;break}if(G.obb||(G.obb=new ue.Z(G.localRect,G.transform)),Q||(Q=new ue.Z(ie,K)),Q.intersect(G.obb)){F=!0;break}}}F?(re(b),Y&&re(Y)):(b.attr("ignore",ee.defaultAttr.ignore),Y&&Y.attr("ignore",ee.defaultAttr.labelGuideIgnore),j.push(ee))}}},1081:(Vt,Qe,H)=>{H.d(Qe,{Lr:()=>re,k3:()=>X,nC:()=>U,ni:()=>j,pe:()=>q,qA:()=>F,qT:()=>Q,tD:()=>G});var ue=H(8208),Se=H(628),le=H(6869),ye=H(1266),ge=H(3802),be={};function Ce(W,J){for(var V=0;V<le.L1.length;V++){var P=le.L1[V],T=J[P],R=W.ensureState(P);R.style=R.style||{},R.style.text=T}var E=W.currentStates.slice();W.clearStates(!0),W.setStyle({text:J.normal}),W.useStates(E,!0)}function he(W,J,V){var M,P=W.labelFetcher,T=W.labelDataIndex,R=W.labelDimIndex,E=J.normal;P&&(M=P.getFormattedLabel(T,"normal",null,R,E&&E.get("formatter"),null!=V?{interpolatedValue:V}:null)),null==M&&(M=(0,Se.isFunction)(W.defaultText)?W.defaultText(T,W,V):W.defaultText);for(var A={normal:M},O=0;O<le.L1.length;O++){var B=le.L1[O],ce=J[B];A[B]=(0,Se.retrieve2)(P?P.getFormattedLabel(T,B,null,R,ce&&ce.get("formatter")):null,M)}return A}function j(W,J,V,P){V=V||be;for(var T=W instanceof ue.ZP,R=!1,E=0;E<le.qc.length;E++)if((M=J[le.qc[E]])&&M.getShallow("show")){R=!0;break}var A=T?W:W.getTextContent();if(R){T||(A||(A=new ue.ZP,W.setTextContent(A)),W.stateProxy&&(A.stateProxy=W.stateProxy));var O=he(V,J),B=J.normal,ce=!!B.getShallow("show"),ae=re(B,P&&P.normal,V,!1,!T);for(ae.text=O.normal,T||W.setTextConfig(U(B,V,!1)),E=0;E<le.L1.length;E++){var M,oe=le.L1[E];if(M=J[oe]){var de=A.ensureState(oe),ne=!!(0,Se.retrieve2)(M.getShallow("show"),ce);ne!==ce&&(de.ignore=!ne),de.style=re(M,P&&P[oe],V,!0,!T),de.style.text=O[oe],T||(W.ensureState(oe).textConfig=U(M,V,!0))}}A.silent=!!B.getShallow("silent"),null!=A.style.x&&(ae.x=A.style.x),null!=A.style.y&&(ae.y=A.style.y),A.ignore=!ce,A.useStyle(ae),A.dirty(),V.enableTextSetter&&(F(A).setLabelText=function(fe){var ve=he(V,J,fe);Ce(A,ve)})}else A&&(A.ignore=!0);W.dirty()}function X(W,J){for(var V={normal:W.getModel(J=J||"label")},P=0;P<le.L1.length;P++){var T=le.L1[P];V[T]=W.getModel([T,J])}return V}function re(W,J,V,P,T){var R={};return function ee(W,J,V,P,T){V=V||be;var A,R=J.ecModel,E=R&&R.option.textStyle,M=function $(W){for(var J;W&&W!==W.ecModel;){var V=(W.option||be).rich;if(V){J=J||{};for(var P=(0,Se.keys)(V),T=0;T<P.length;T++)J[P[T]]=1}W=W.parentModel}return J}(J);if(M)for(var O in A={},M)if(M.hasOwnProperty(O)){var B=J.getModel(["rich",O]);Y(A[O]={},B,E,V,P,T,!1,!0)}A&&(W.rich=A);var ce=J.get("overflow");ce&&(W.overflow=ce);var ae=J.get("minMargin");null!=ae&&(W.margin=ae),Y(W,J,E,V,P,T,!0,!1)}(R,W,V,P,T),J&&(0,Se.extend)(R,J),R}function U(W,J,V){J=J||{};var T,P={},R=W.getShallow("rotate"),E=(0,Se.retrieve2)(W.getShallow("distance"),V?null:5),M=W.getShallow("offset");return"outside"===(T=W.getShallow("position")||(V?null:"inside"))&&(T=J.defaultOutsidePosition||"top"),null!=T&&(P.position=T),null!=M&&(P.offset=M),null!=R&&(R*=Math.PI/180,P.rotation=R),null!=E&&(P.distance=E),P.outsideFill="inherit"===W.get("color")?J.inheritColor||null:"auto",P}var ie=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],K=["align","lineHeight","width","height","tag","verticalAlign"],b=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function Y(W,J,V,P,T,R,E,M){V=!T&&V||be;var A=P&&P.inheritColor,O=J.getShallow("color"),B=J.getShallow("textBorderColor"),ce=(0,Se.retrieve2)(J.getShallow("opacity"),V.opacity);("inherit"===O||"auto"===O)&&(O=A||null),("inherit"===B||"auto"===B)&&(B=A||null),R||(O=O||V.color,B=B||V.textBorderColor),null!=O&&(W.fill=O),null!=B&&(W.stroke=B);var ae=(0,Se.retrieve2)(J.getShallow("textBorderWidth"),V.textBorderWidth);null!=ae&&(W.lineWidth=ae);var oe=(0,Se.retrieve2)(J.getShallow("textBorderType"),V.textBorderType);null!=oe&&(W.lineDash=oe);var de=(0,Se.retrieve2)(J.getShallow("textBorderDashOffset"),V.textBorderDashOffset);null!=de&&(W.lineDashOffset=de),!T&&null==ce&&!M&&(ce=P&&P.defaultOpacity),null!=ce&&(W.opacity=ce),!T&&!R&&null==W.fill&&P.inheritColor&&(W.fill=P.inheritColor);for(var ne=0;ne<ie.length;ne++)null!=(fe=(0,Se.retrieve2)(J.getShallow(xe=ie[ne]),V[xe]))&&(W[xe]=fe);for(ne=0;ne<K.length;ne++)null!=(fe=J.getShallow(xe=K[ne]))&&(W[xe]=fe);if(null==W.verticalAlign){var ve=J.getShallow("baseline");null!=ve&&(W.verticalAlign=ve)}if(!E||!P.disableBox){for(ne=0;ne<b.length;ne++){var xe,fe;null!=(fe=J.getShallow(xe=b[ne]))&&(W[xe]=fe)}var we=J.getShallow("borderType");null!=we&&(W.borderDash=we),("auto"===W.backgroundColor||"inherit"===W.backgroundColor)&&A&&(W.backgroundColor=A),("auto"===W.borderColor||"inherit"===W.borderColor)&&A&&(W.borderColor=A)}}function Q(W,J){var V=J&&J.getModel("textStyle");return(0,Se.trim)([W.fontStyle||V&&V.getShallow("fontStyle")||"",W.fontWeight||V&&V.getShallow("fontWeight")||"",(W.fontSize||V&&V.getShallow("fontSize")||12)+"px",W.fontFamily||V&&V.getShallow("fontFamily")||"sans-serif"].join(" "))}var F=(0,ye.Yf)();function q(W,J,V,P){if(W){var T=F(W);T.prevValue=T.value,T.value=V;var R=J.normal;T.valueAnimation=R.get("valueAnimation"),T.valueAnimation&&(T.precision=R.get("precision"),T.defaultInterpolatedText=P,T.statesModels=J)}}function G(W,J,V,P,T){var R=F(W);if(R.valueAnimation&&R.prevValue!==R.value){var E=R.defaultInterpolatedText,M=(0,Se.retrieve2)(R.interpolatedValue,R.prevValue),A=R.value;W.percent=0,(null==R.prevValue?ge.KZ:ge.D)(W,{percent:1},P,J,null,function O(B){var ce=(0,ye.pk)(V,R.precision,M,A,B);R.interpolatedValue=1===B?null:ce;var ae=he({labelDataIndex:J,labelFetcher:T,defaultText:E?E(ce):ce+""},R.statesModels,ce);Ce(W,ae)})}}},2154:(Vt,Qe,H)=>{H.d(Qe,{Bk:()=>K,G_:()=>$,Ge:()=>X,Gk:()=>j,My:()=>U,bK:()=>ie});var ue=H(628),Se=H(4785),le=H(143),ye=H(5103),ge=H(3133),be="__ec_stack_";function Ce(F){return F.get("stack")||be+F.seriesIndex}function he(F){return F.dim+F.index}function j(F){var q=[],G=F.axis,W="axis0";if("category"===G.type){for(var J=G.getBandWidth(),V=0;V<F.count;V++)q.push((0,ue.defaults)({bandWidth:J,axisKey:W,stackId:be+V},F));var P=ee(q),T=[];for(V=0;V<F.count;V++){var R=P[W][be+V];R.offsetCenter=R.offset+R.width/2,T.push(R)}return T}}function X(F,q){var G=[];return q.eachSeriesByType(F,function(W){b(W)&&G.push(W)}),G}function U(F){var q=function re(F){var q={};(0,ue.each)(F,function(R){var M=R.coordinateSystem.getBaseAxis();if("time"===M.type||"value"===M.type)for(var A=R.getData(),O=M.dim+"_"+M.index,B=A.getDimensionIndex(A.mapDimension(M.dim)),ce=A.getStore(),ae=0,oe=ce.count();ae<oe;++ae){var de=ce.get(B,ae);q[O]?q[O].push(de):q[O]=[de]}});var G={};for(var W in q)if(q.hasOwnProperty(W)){var J=q[W];if(J){J.sort(function(R,E){return R-E});for(var V=null,P=1;P<J.length;++P){var T=J[P]-J[P-1];T>0&&(V=null===V?T:Math.min(V,T))}G[W]=V}}return G}(F),G=[];return(0,ue.each)(F,function(W){var T,V=W.coordinateSystem.getBaseAxis(),P=V.getExtent();if("category"===V.type)T=V.getBandWidth();else if("value"===V.type||"time"===V.type){var E=q[V.dim+"_"+V.index],M=Math.abs(P[1]-P[0]),A=V.scale.getExtent(),O=Math.abs(A[1]-A[0]);T=E?M/O*E:M}else{var B=W.getData();T=Math.abs(P[1]-P[0])/B.count()}var ce=(0,Se.GM)(W.get("barWidth"),T),ae=(0,Se.GM)(W.get("barMaxWidth"),T),oe=(0,Se.GM)(W.get("barMinWidth")||(Y(W)?.5:1),T),de=W.get("barGap"),ne=W.get("barCategoryGap");G.push({bandWidth:T,barWidth:ce,barMaxWidth:ae,barMinWidth:oe,barGap:de,barCategoryGap:ne,axisKey:he(V),stackId:Ce(W)})}),ee(G)}function ee(F){var q={};(0,ue.each)(F,function(W,J){var V=W.axisKey,P=W.bandWidth,T=q[V]||{bandWidth:P,remainedWidth:P,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},R=T.stacks;q[V]=T;var E=W.stackId;R[E]||T.autoWidthCount++,R[E]=R[E]||{width:0,maxWidth:0};var M=W.barWidth;M&&!R[E].width&&(R[E].width=M,M=Math.min(T.remainedWidth,M),T.remainedWidth-=M);var A=W.barMaxWidth;A&&(R[E].maxWidth=A);var O=W.barMinWidth;O&&(R[E].minWidth=O);var B=W.barGap;null!=B&&(T.gap=B);var ce=W.barCategoryGap;null!=ce&&(T.categoryGap=ce)});var G={};return(0,ue.each)(q,function(W,J){G[J]={};var V=W.stacks,P=W.bandWidth,T=W.categoryGap;if(null==T){var R=(0,ue.keys)(V).length;T=Math.max(35-4*R,15)+"%"}var E=(0,Se.GM)(T,P),M=(0,Se.GM)(W.gap,1),A=W.remainedWidth,O=W.autoWidthCount,B=(A-E)/(O+(O-1)*M);B=Math.max(B,0),(0,ue.each)(V,function(de){var ne=de.maxWidth,xe=de.minWidth;if(de.width){var fe=de.width;ne&&(fe=Math.min(fe,ne)),xe&&(fe=Math.max(fe,xe)),de.width=fe,A-=fe+M*fe,O--}else fe=B,ne&&ne<fe&&(fe=Math.min(ne,A)),xe&&xe>fe&&(fe=xe),fe!==B&&(de.width=fe,A-=fe+M*fe,O--)}),B=(A-E)/(O+(O-1)*M),B=Math.max(B,0);var ae,ce=0;(0,ue.each)(V,function(de,ne){de.width||(de.width=B),ae=de,ce+=de.width*(1+M)}),ae&&(ce-=ae.width*M);var oe=-ce/2;(0,ue.each)(V,function(de,ne){G[J][ne]=G[J][ne]||{bandWidth:P,offset:oe,width:de.width},oe+=de.width*(1+M)})}),G}function $(F,q,G){if(F&&q){var W=F[he(q)];return null!=W&&null!=G?W[Ce(G)]:W}}function ie(F,q){var G=X(F,q),W=U(G);(0,ue.each)(G,function(J){var V=J.getData(),T=J.coordinateSystem.getBaseAxis(),R=Ce(J),E=W[he(T)][R];V.setLayout({bandWidth:E.bandWidth,offset:E.offset,size:E.width})})}function K(F){return{seriesType:F,plan:(0,ye.Z)(),reset:function(q){if(b(q)){var G=q.getData(),W=q.coordinateSystem,J=W.getBaseAxis(),V=W.getOtherAxis(J),P=G.getDimensionIndex(G.mapDimension(V.dim)),T=G.getDimensionIndex(G.mapDimension(J.dim)),R=q.get("showBackground",!0),E=G.mapDimension(V.dim),M=G.getCalculationInfo("stackResultDimension"),A=(0,le.M)(G,E)&&!!G.getCalculationInfo("stackedOnSeries"),O=V.isHorizontal(),B=function Q(F,q){return q.toGlobalCoord(q.dataToCoord("log"===q.type?1:0))}(0,V),ce=Y(q),ae=q.get("barMinHeight")||0,oe=M&&G.getDimensionIndex(M),de=G.getLayout("size"),ne=G.getLayout("offset");return{progress:function(xe,fe){for(var He,ve=xe.count,we=ce&&(0,ge.o)(3*ve),Te=ce&&R&&(0,ge.o)(3*ve),Ae=ce&&(0,ge.o)(ve),Ee=W.master.getRect(),Ve=O?Ee.width:Ee.height,We=fe.getStore(),$e=0;null!=(He=xe.next());){var ct=We.get(A?oe:P,He),St=We.get(T,He),_t=B,Ot=void 0;A&&(Ot=+ct-We.get(P,He));var Ht=void 0,an=void 0,hn=void 0,Vn=void 0;if(O){var sr=W.dataToPoint([ct,St]);A&&(_t=W.dataToPoint([Ot,St])[0]),Ht=_t,an=sr[1]+ne,hn=sr[0]-_t,Vn=de,Math.abs(hn)<ae&&(hn=(hn<0?-1:1)*ae)}else sr=W.dataToPoint([St,ct]),A&&(_t=W.dataToPoint([St,Ot])[1]),Ht=sr[0]+ne,an=_t,hn=de,Vn=sr[1]-_t,Math.abs(Vn)<ae&&(Vn=(Vn<=0?-1:1)*ae);ce?(we[$e]=Ht,we[$e+1]=an,we[$e+2]=O?hn:Vn,Te&&(Te[$e]=O?Ee.x:Ht,Te[$e+1]=O?an:Ee.y,Te[$e+2]=Ve),Ae[He]=He):fe.setItemLayout(He,{x:Ht,y:an,width:hn,height:Vn}),$e+=3}ce&&fe.setLayout({largePoints:we,largeDataIndices:Ae,largeBackgroundPoints:Te,valueAxisHorizontal:O})}}}}}}function b(F){return F.coordinateSystem&&"cartesian2d"===F.coordinateSystem.type}function Y(F){return F.pipelineContext&&F.pipelineContext.large}},960:(Vt,Qe,H)=>{H.d(Qe,{s:()=>ge,y:()=>le});var ue=H(628),Se=H(1266);function le(be,Ce){function he(j,X){var re=[];return j.eachComponent({mainType:"series",subType:be,query:X},function(U){re.push(U.seriesIndex)}),re}(0,ue.each)([[be+"ToggleSelect","toggleSelect"],[be+"Select","select"],[be+"UnSelect","unselect"]],function(j){Ce(j[0],function(X,re,U){X=(0,ue.extend)({},X),U.dispatchAction((0,ue.extend)(X,{type:j[1],seriesIndex:he(re,X)}))})})}function ye(be,Ce,he,j,X){var re=be+Ce;he.isSilent(re)||j.eachComponent({mainType:"series",subType:"pie"},function(U){for(var ee=U.seriesIndex,$=U.option.selectedMap,ie=X.selected,K=0;K<ie.length;K++)if(ie[K].seriesIndex===ee){var b=U.getData(),Y=(0,Se.gO)(b,X.fromActionPayload);he.trigger(re,{type:re,seriesId:U.id,name:(0,ue.isArray)(Y)?b.getName(Y[0]):b.getName(Y),selected:(0,ue.isString)($)?$:(0,ue.extend)({},$)})}})}function ge(be,Ce,he){be.on("selectchanged",function(j){var X=he.getModel();j.isFromClick?(ye("map","selectchanged",Ce,X,j),ye("pie","selectchanged",Ce,X,j)):"select"===j.fromAction?(ye("map","selected",Ce,X,j),ye("pie","selected",Ce,X,j)):"unselect"===j.fromAction&&(ye("map","unselected",Ce,X,j),ye("pie","unselected",Ce,X,j))})}},9447:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>re});var ue=H(5845),Se=H(628),le=H(1725),ye=H(2015),ge=H(1087),be=H(1266),Ce=H(634),he=(0,be.Yf)(),j=function(U){function ee($,ie,K){var b=U.call(this,$,ie,K)||this;return b.uid=ye.Kr("ec_cpt_model"),b}return(0,ue.ZT)(ee,U),ee.prototype.init=function($,ie,K){this.mergeDefaultAndTheme($,K)},ee.prototype.mergeDefaultAndTheme=function($,ie){var K=Ce.YD(this),b=K?Ce.tE($):{},Y=ie.getTheme();Se.merge($,Y.get(this.mainType)),Se.merge($,this.getDefaultOption()),K&&Ce.dt($,b,K)},ee.prototype.mergeOption=function($,ie){Se.merge(this.option,$,!0);var K=Ce.YD(this);K&&Ce.dt(this.option,$,K)},ee.prototype.optionUpdated=function($,ie){},ee.prototype.getDefaultOption=function(){var $=this.constructor;if(!(0,ge.PT)($))return $.defaultOption;var ie=he(this);if(!ie.defaultOption){for(var K=[],b=$;b;){var Y=b.prototype.defaultOption;Y&&K.push(Y),b=b.superClass}for(var Q={},F=K.length-1;F>=0;F--)Q=Se.merge(Q,K[F],!0);ie.defaultOption=Q}return ie.defaultOption},ee.prototype.getReferringComponents=function($,ie){var b=$+"Id";return(0,be.HZ)(this.ecModel,$,{index:this.get($+"Index",!0),id:this.get(b,!0)},ie)},ee.prototype.getBoxLayoutParams=function(){var $=this;return{left:$.get("left"),top:$.get("top"),right:$.get("right"),bottom:$.get("bottom"),width:$.get("width"),height:$.get("height")}},ee.prototype.getZLevelKey=function(){return""},ee.prototype.setZLevel=function($){this.option.zlevel=$},ee.protoInitialize=(($=ee.prototype).type="component",$.id="",$.name="",$.mainType="",$.subType="",void($.componentIndex=0)),ee;var $}(le.Z);(0,ge.pw)(j,le.Z),(0,ge.au)(j),ye.cj(j),ye.jS(j,function X(U){var ee=[];return Se.each(j.getClassesByMainType(U),function($){ee=ee.concat($.dependencies||$.prototype.dependencies||[])}),ee=Se.map(ee,function($){return(0,ge.u9)($).main}),"dataset"!==U&&Se.indexOf(ee,"dataset")<=0&&ee.unshift("dataset"),ee});const re=j},1725:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>Y});var ue=H(169),Se=H(1087),ge=(0,H(5632).Z)([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),be=function(){function Q(){}return Q.prototype.getAreaStyle=function(F,q){return ge(this,F,q)},Q}(),Ce=H(1081),he=H(8208),j=["textStyle","color"],X=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],re=new he.ZP;const ee=function(){function Q(){}return Q.prototype.getTextColor=function(F){var q=this.ecModel;return this.getShallow("color")||(!F&&q?q.get(j):null)},Q.prototype.getFont=function(){return(0,Ce.qT)({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},Q.prototype.getTextRect=function(F){for(var q={text:F,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},G=0;G<X.length;G++)q[X[G]]=this.getShallow(X[G]);return re.useStyle(q),re.update(),re.getBoundingRect()},Q}();var $=H(3331),ie=H(7327),K=H(628),b=function(){function Q(F,q,G){this.parentModel=q,this.ecModel=G,this.option=F}return Q.prototype.init=function(F,q,G){for(var W=[],J=3;J<arguments.length;J++)W[J-3]=arguments[J]},Q.prototype.mergeOption=function(F,q){(0,K.merge)(this.option,F,!0)},Q.prototype.get=function(F,q){return null==F?this.option:this._doGet(this.parsePath(F),!q&&this.parentModel)},Q.prototype.getShallow=function(F,q){var G=this.option,W=null==G?G:G[F];if(null==W&&!q){var J=this.parentModel;J&&(W=J.getShallow(F))}return W},Q.prototype.getModel=function(F,q){var G=null!=F,W=G?this.parsePath(F):null;return new Q(G?this._doGet(W):this.option,q=q||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(W)),this.ecModel)},Q.prototype.isEmpty=function(){return null==this.option},Q.prototype.restoreData=function(){},Q.prototype.clone=function(){return new(0,this.constructor)((0,K.clone)(this.option))},Q.prototype.parsePath=function(F){return"string"==typeof F?F.split("."):F},Q.prototype.resolveParentPath=function(F){return F},Q.prototype.isAnimationEnabled=function(){if(!ue.Z.node&&this.option){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},Q.prototype._doGet=function(F,q){var G=this.option;if(!F)return G;for(var W=0;W<F.length&&(!F[W]||null!=(G=G&&"object"==typeof G?G[F[W]]:null));W++);return null==G&&q&&(G=q._doGet(this.resolveParentPath(F),q.parentModel)),G},Q}();(0,Se.dm)(b),(0,Se.Qj)(b),(0,K.mixin)(b,$.K),(0,K.mixin)(b,ie.D),(0,K.mixin)(b,be),(0,K.mixin)(b,ee);const Y=b},9521:(Vt,Qe,H)=>{H.d(Qe,{V:()=>ie,Z:()=>V});var ue=H(5845),Se=H(628),le=H(169),ye=H(1266),ge=H(9447),be=H(1769),Ce=H(4756),he=H(634),j=H(6861),X=H(1087),re=H(8003),U=H(1549),ee=ye.Yf();function $(P,T){return P.getName(T)||P.getId(T)}var ie="__universalTransitionEnabled",K=function(P){function T(){var R=null!==P&&P.apply(this,arguments)||this;return R._selectedDataIndicesMap={},R}return(0,ue.ZT)(T,P),T.prototype.init=function(R,E,M){this.seriesIndex=this.componentIndex,this.dataTask=(0,j.v)({count:Q,reset:F}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(R,M),(ee(this).sourceManager=new re.U(this)).prepareSource();var O=this.getInitialData(R,M);G(O,this),this.dataTask.context.data=O,ee(this).dataBeforeProcessed=O,b(this),this._initSelectedMapFromData(O)},T.prototype.mergeDefaultAndTheme=function(R,E){var M=(0,he.YD)(this),A=M?(0,he.tE)(R):{},O=this.subType;ge.Z.hasClass(O)&&(O+="Series"),Se.merge(R,E.getTheme().get(this.subType)),Se.merge(R,this.getDefaultOption()),ye.Cc(R,"label",["show"]),this.fillDataTextStyle(R.data),M&&(0,he.dt)(R,A,M)},T.prototype.mergeOption=function(R,E){R=Se.merge(this.option,R,!0),this.fillDataTextStyle(R.data);var M=(0,he.YD)(this);M&&(0,he.dt)(this.option,R,M);var A=ee(this).sourceManager;A.dirty(),A.prepareSource();var O=this.getInitialData(R,E);G(O,this),this.dataTask.dirty(),this.dataTask.context.data=O,ee(this).dataBeforeProcessed=O,b(this),this._initSelectedMapFromData(O)},T.prototype.fillDataTextStyle=function(R){if(R&&!Se.isTypedArray(R))for(var E=["show"],M=0;M<R.length;M++)R[M]&&R[M].label&&ye.Cc(R[M],"label",E)},T.prototype.getInitialData=function(R,E){},T.prototype.appendData=function(R){this.getRawData().appendData(R.data)},T.prototype.getData=function(R){var E=J(this);if(E){var M=E.context.data;return null==R?M:M.getLinkedData(R)}return ee(this).data},T.prototype.getAllData=function(){var R=this.getData();return R&&R.getLinkedDataAll?R.getLinkedDataAll():[{data:R}]},T.prototype.setData=function(R){var E=J(this);if(E){var M=E.context;M.outputData=R,E!==this.dataTask&&(M.data=R)}ee(this).data=R},T.prototype.getEncode=function(){var R=this.get("encode",!0);if(R)return Se.createHashMap(R)},T.prototype.getSourceManager=function(){return ee(this).sourceManager},T.prototype.getSource=function(){return this.getSourceManager().getSource()},T.prototype.getRawData=function(){return ee(this).dataBeforeProcessed},T.prototype.getColorBy=function(){return this.get("colorBy")||"series"},T.prototype.isColorBySeries=function(){return"series"===this.getColorBy()},T.prototype.getBaseAxis=function(){var R=this.coordinateSystem;return R&&R.getBaseAxis&&R.getBaseAxis()},T.prototype.formatTooltip=function(R,E,M){return(0,U.w)({series:this,dataIndex:R,multipleSeries:E})},T.prototype.isAnimationEnabled=function(){var R=this.ecModel;if(le.Z.node&&(!R||!R.ssr))return!1;var E=this.getShallow("animation");return E&&this.getData().count()>this.getShallow("animationThreshold")&&(E=!1),!!E},T.prototype.restoreData=function(){this.dataTask.dirty()},T.prototype.getColorFromPalette=function(R,E,M){var A=this.ecModel,O=be._.prototype.getColorFromPalette.call(this,R,E,M);return O||(O=A.getColorFromPalette(R,E,M)),O},T.prototype.coordDimToDataDim=function(R){return this.getRawData().mapDimensionsAll(R)},T.prototype.getProgressive=function(){return this.get("progressive")},T.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},T.prototype.select=function(R,E){this._innerSelect(this.getData(E),R)},T.prototype.unselect=function(R,E){var M=this.option.selectedMap;if(M){var A=this.option.selectedMode,O=this.getData(E);if("series"===A||"all"===M)return this.option.selectedMap={},void(this._selectedDataIndicesMap={});for(var B=0;B<R.length;B++){var ae=$(O,R[B]);M[ae]=!1,this._selectedDataIndicesMap[ae]=-1}}},T.prototype.toggleSelect=function(R,E){for(var M=[],A=0;A<R.length;A++)M[0]=R[A],this.isSelected(R[A],E)?this.unselect(M,E):this.select(M,E)},T.prototype.getSelectedDataIndices=function(){if("all"===this.option.selectedMap)return[].slice.call(this.getData().getIndices());for(var R=this._selectedDataIndicesMap,E=Se.keys(R),M=[],A=0;A<E.length;A++){var O=R[E[A]];O>=0&&M.push(O)}return M},T.prototype.isSelected=function(R,E){var M=this.option.selectedMap;if(!M)return!1;var A=this.getData(E);return("all"===M||M[$(A,R)])&&!A.getItemModel(R).get(["select","disabled"])},T.prototype.isUniversalTransitionEnabled=function(){if(this[ie])return!0;var R=this.option.universalTransition;return!!R&&(!0===R||R&&R.enabled)},T.prototype._innerSelect=function(R,E){var M,A,O=this.option,B=O.selectedMode,ce=E.length;if(B&&ce)if("series"===B)O.selectedMap="all";else if("multiple"===B){Se.isObject(O.selectedMap)||(O.selectedMap={});for(var ae=O.selectedMap,oe=0;oe<ce;oe++){var de=E[oe];ae[ne=$(R,de)]=!0,this._selectedDataIndicesMap[ne]=R.getRawIndex(de)}}else if("single"===B||!0===B){var xe=E[ce-1],ne=$(R,xe);O.selectedMap=((M={})[ne]=!0,M),this._selectedDataIndicesMap=((A={})[ne]=R.getRawIndex(xe),A)}},T.prototype._initSelectedMapFromData=function(R){if(!this.option.selectedMap){var E=[];R.hasItemOption&&R.each(function(M){var A=R.getRawDataItem(M);A&&A.selected&&E.push(M)}),E.length>0&&this._innerSelect(R,E)}},T.registerClass=function(R){return ge.Z.registerClass(R)},T.protoInitialize=((R=T.prototype).type="series.__base__",R.seriesIndex=0,R.ignoreStyleOnData=!1,R.hasSymbolVisual=!1,R.defaultSymbol="circle",R.visualStyleAccessPath="itemStyle",void(R.visualDrawType="fill")),T;var R}(ge.Z);function b(P){var T=P.name;ye.yu(P)||(P.name=function Y(P){var T=P.getRawData(),R=T.mapDimensionsAll("seriesName"),E=[];return Se.each(R,function(M){var A=T.getDimensionInfo(M);A.displayName&&E.push(A.displayName)}),E.join(" ")}(P)||T)}function Q(P){return P.model.getRawData().count()}function F(P){var T=P.model;return T.setData(T.getRawData().cloneShallow()),q}function q(P,T){T.outputData&&P.end>T.outputData.count()&&T.model.getRawData().cloneShallow(T.outputData)}function G(P,T){Se.each(Se.concatArray(P.CHANGABLE_METHODS,P.DOWNSAMPLE_METHODS),function(R){P.wrapMethod(R,Se.curry(W,T))})}function W(P,T){var R=J(P);return R&&R.setOutputEnd((T||this).count()),T}function J(P){var T=(P.ecModel||{}).scheduler,R=T&&T.getPipeline(P.uid);if(R){var E=R.currentTask;if(E){var M=E.agentStubMap;M&&(E=M.get(P.uid))}return E}}Se.mixin(K,Ce.X),Se.mixin(K,be._),(0,X.pw)(K,ge.Z);const V=K},157:(Vt,Qe,H)=>{H.d(Qe,{R:()=>ye,f:()=>le});var ue=H(628),Se=(0,ue.createHashMap)();function le(ge,be){(0,ue.assert)(null==Se.get(ge)&&be),Se.set(ge,be)}function ye(ge,be,Ce){var he=Se.get(be);if(!he)return Ce;var j=he(ge);return j?Ce.concat(j):Ce}},4756:(Vt,Qe,H)=>{H.d(Qe,{X:()=>ge,f:()=>be});var ue=H(628),Se=H(67),le=H(9706),ye=/\{@(.+?)\}/g,ge=function(){function Ce(){}return Ce.prototype.getDataParams=function(he,j){var X=this.getData(j),re=this.getRawValue(he,j),U=X.getRawIndex(he),ee=X.getName(he),$=X.getRawDataItem(he),ie=X.getItemVisual(he,"style"),K=ie&&ie[X.getItemVisual(he,"drawType")||"fill"],b=ie&&ie.stroke,Y=this.mainType,Q="series"===Y,F=X.userOutput&&X.userOutput.get();return{componentType:Y,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:Q?this.subType:null,seriesIndex:this.seriesIndex,seriesId:Q?this.id:null,seriesName:Q?this.name:null,name:ee,dataIndex:U,data:$,dataType:j,value:re,color:K,borderColor:b,dimensionNames:F?F.fullDimensions:null,encode:F?F.encode:null,$vars:["seriesName","name","value"]}},Ce.prototype.getFormattedLabel=function(he,j,X,re,U,ee){j=j||"normal";var $=this.getData(X),ie=this.getDataParams(he,X);return ee&&(ie.value=ee.interpolatedValue),null!=re&&ue.isArray(ie.value)&&(ie.value=ie.value[re]),U||(U=$.getItemModel(he).get("normal"===j?["label","formatter"]:[j,"label","formatter"])),ue.isFunction(U)?(ie.status=j,ie.dimensionIndex=re,U(ie)):ue.isString(U)?(0,le.kF)(U,ie).replace(ye,function(Y,Q){var F=Q.length,q=Q;"["===q.charAt(0)&&"]"===q.charAt(F-1)&&(q=+q.slice(1,F-1));var G=(0,Se.hk)($,he,q);if(ee&&ue.isArray(ee.interpolatedValue)){var W=$.getDimensionIndex(q);W>=0&&(G=ee.interpolatedValue[W])}return null!=G?G+"":""}):void 0},Ce.prototype.getRawValue=function(he,j){return(0,Se.hk)(this.getData(j),he)},Ce.prototype.formatTooltip=function(he,j,X){},Ce}();function be(Ce){var he,j;return ue.isObject(Ce)?Ce.type&&(j=Ce):he=Ce,{text:he,frag:j}}},7327:(Vt,Qe,H)=>{H.d(Qe,{D:()=>ye,t:()=>Se});var ue=H(5632),Se=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],le=(0,ue.Z)(Se),ye=function(){function ge(){}return ge.prototype.getItemStyle=function(be,Ce){return le(this,be,Ce)},ge}()},3331:(Vt,Qe,H)=>{H.d(Qe,{K:()=>ye,v:()=>Se});var ue=H(5632),Se=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],le=(0,ue.Z)(Se),ye=function(){function ge(){}return ge.prototype.getLineStyle=function(be){return le(this,be)},ge}()},5632:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>Se});var ue=H(628);function Se(le,ye){for(var ge=0;ge<le.length;ge++)le[ge][1]||(le[ge][1]=le[ge][0]);return ye=ye||!1,function(be,Ce,he){for(var j={},X=0;X<le.length;X++){var re=le[X][1];if(!(Ce&&ue.indexOf(Ce,re)>=0||he&&ue.indexOf(he,re)<0)){var U=be.getShallow(re,ye);null!=U&&(j[le[X][0]]=U)}}return j}}},1769:(Vt,Qe,H)=>{H.d(Qe,{_:()=>ye,i:()=>ge});var ue=H(1266),Se=(0,ue.Yf)(),le=(0,ue.Yf)(),ye=function(){function j(){}return j.prototype.getColorFromPalette=function(X,re,U){var ee=(0,ue.kF)(this.get("color",!0)),$=this.get("colorLayer",!0);return Ce(this,Se,ee,$,X,re,U)},j.prototype.clearColorPalette=function(){!function he(j,X){X(j).paletteIdx=0,X(j).paletteNameMap={}}(this,Se)},j}();function ge(j,X,re,U){var ee=(0,ue.kF)(j.get(["aria","decal","decals"]));return Ce(j,le,ee,null,X,re,U)}function Ce(j,X,re,U,ee,$,ie){var K=X($=$||j),b=K.paletteIdx||0,Y=K.paletteNameMap=K.paletteNameMap||{};if(Y.hasOwnProperty(ee))return Y[ee];var Q=null!=ie&&U?function be(j,X){for(var re=j.length,U=0;U<re;U++)if(j[U].length>X)return j[U];return j[re-1]}(U,ie):re;if((Q=Q||re)&&Q.length){var F=Q[b];return ee&&(Y[ee]=F),K.paletteIdx=(b+1)%Q.length,F}}},1659:(Vt,Qe,H)=>{H.d(Qe,{N:()=>W});var ue=H(6704),Se=H(628),le=H(908),ye=H(6801),ge=H(7072),be=H(9012),Ce=H(7021),he=H(2369),j=H(5730);function X(J,V,P){var T=j.qW.createCanvas(),R=V.getWidth(),E=V.getHeight(),M=T.style;return M&&(M.position="absolute",M.left="0",M.top="0",M.width=R+"px",M.height=E+"px",T.setAttribute("data-zr-dom-id",J)),T.width=R*P,T.height=E*P,T}const U=function(J){function V(P,T,R){var M,E=J.call(this)||this;E.motionBlur=!1,E.lastFrameAlpha=.7,E.dpr=1,E.virtual=!1,E.config={},E.incremental=!1,E.zlevel=0,E.maxRepaintRectCount=5,E.__dirty=!0,E.__firstTimePaint=!0,E.__used=!1,E.__drawIndex=0,E.__startIndex=0,E.__endIndex=0,E.__prevStartIndex=null,E.__prevEndIndex=null,R=R||ue.KL,"string"==typeof P?M=X(P,T,R):Se.isObject(P)&&(P=(M=P).id),E.id=P,E.dom=M;var A=M.style;return A&&(Se.disableUserSelect(M),M.onselectstart=function(){return!1},A.padding="0",A.margin="0",A.borderWidth="0"),E.painter=T,E.dpr=R,E}return(0,le.ZT)(V,J),V.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},V.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},V.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},V.prototype.setUnpainted=function(){this.__firstTimePaint=!0},V.prototype.createBackBuffer=function(){var P=this.dpr;this.domBack=X("back-"+this.id,this.painter,P),this.ctxBack=this.domBack.getContext("2d"),1!==P&&this.ctxBack.scale(P,P)},V.prototype.createRepaintRects=function(P,T,R,E){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var fe,M=[],A=this.maxRepaintRectCount,O=!1,B=new Ce.Z(0,0,0,0);function ce(we){if(we.isFinite()&&!we.isZero())if(0===M.length)(Te=new Ce.Z(0,0,0,0)).copy(we),M.push(Te);else{for(var Ae=!1,Ee=1/0,Ve=0,He=0;He<M.length;++He){var We=M[He];if(We.intersect(we)){var $e=new Ce.Z(0,0,0,0);$e.copy(We),$e.union(we),M[He]=$e,Ae=!0;break}if(O){B.copy(we),B.union(We);var Ot=B.width*B.height-we.width*we.height-We.width*We.height;Ot<Ee&&(Ee=Ot,Ve=He)}}var Te;O&&(M[Ve].union(we),Ae=!0),Ae||((Te=new Ce.Z(0,0,0,0)).copy(we),M.push(Te)),O||(O=M.length>=A)}}for(var ae=this.__startIndex;ae<this.__endIndex;++ae)if(oe=P[ae]){var de=oe.shouldBePainted(R,E,!0,!0);(ne=oe.__isRendered&&(oe.__dirty&he.YV||!de)?oe.getPrevPaintRect():null)&&ce(ne);var xe=de&&(oe.__dirty&he.YV||!oe.__isRendered)?oe.getPaintRect():null;xe&&ce(xe)}for(ae=this.__prevStartIndex;ae<this.__prevEndIndex;++ae){var oe,ne;de=(oe=T[ae]).shouldBePainted(R,E,!0,!0),!oe||de&&oe.__zr||!oe.__isRendered||(ne=oe.getPrevPaintRect())&&ce(ne)}do{for(fe=!1,ae=0;ae<M.length;)if(M[ae].isZero())M.splice(ae,1);else{for(var ve=ae+1;ve<M.length;)M[ae].intersect(M[ve])?(fe=!0,M[ae].union(M[ve]),M.splice(ve,1)):ve++;ae++}}while(fe);return this._paintRects=M,M},V.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},V.prototype.resize=function(P,T){var R=this.dpr,E=this.dom,M=E.style,A=this.domBack;M&&(M.width=P+"px",M.height=T+"px"),E.width=P*R,E.height=T*R,A&&(A.width=P*R,A.height=T*R,1!==R&&this.ctxBack.scale(R,R))},V.prototype.clear=function(P,T,R){var E=this.dom,M=this.ctx,A=E.width,O=E.height;T=T||this.clearColor;var B=this.motionBlur&&!P,ce=this.lastFrameAlpha,ae=this.dpr,oe=this;B&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(E,0,0,A/ae,O/ae));var de=this.domBack;function ne(xe,fe,ve,we){if(M.clearRect(xe,fe,ve,we),T&&"transparent"!==T){var Te=void 0;Se.isGradientObject(T)?(Te=T.__canvasGradient||(0,ge.ZF)(M,T,{x:0,y:0,width:ve,height:we}),T.__canvasGradient=Te):Se.isImagePatternObject(T)&&(T.scaleX=T.scaleX||ae,T.scaleY=T.scaleY||ae,Te=(0,be.RZ)(M,T,{dirty:function(){oe.setUnpainted(),oe.__painter.refresh()}})),M.save(),M.fillStyle=Te||T,M.fillRect(xe,fe,ve,we),M.restore()}B&&(M.save(),M.globalAlpha=ce,M.drawImage(de,xe,fe,ve,we),M.restore())}!R||B?ne(0,0,A,O):R.length&&Se.each(R,function(xe){ne(xe.x*ae,xe.y*ae,xe.width*ae,xe.height*ae)})},V}(ye.Z);var ee=H(2036),$=H(169),K=314159,b=.01;const G=function(){function J(V,P,T,R){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var E=!V.nodeName||"CANVAS"===V.nodeName.toUpperCase();this._opts=T=Se.extend({},T||{}),this.dpr=T.devicePixelRatio||ue.KL,this._singleCanvas=E,this.root=V,V.style&&(Se.disableUserSelect(V),V.innerHTML=""),this.storage=P;var A=this._zlevelList;this._prevDisplayList=[];var O=this._layers;if(E){var ce=V,ae=ce.width,oe=ce.height;null!=T.width&&(ae=T.width),null!=T.height&&(oe=T.height),this.dpr=T.devicePixelRatio||1,ce.width=ae*this.dpr,ce.height=oe*this.dpr,this._width=ae,this._height=oe;var de=new U(ce,this,this.dpr);de.__builtin__=!0,de.initContext(),O[K]=de,de.zlevel=K,A.push(K),this._domRoot=V}else{this._width=(0,ge.ap)(V,0,T),this._height=(0,ge.ap)(V,1,T);var B=this._domRoot=function F(J,V){var P=document.createElement("div");return P.style.cssText=["position:relative","width:"+J+"px","height:"+V+"px","padding:0","margin:0","border-width:0"].join(";")+";",P}(this._width,this._height);V.appendChild(B)}}return J.prototype.getType=function(){return"canvas"},J.prototype.isSingleCanvas=function(){return this._singleCanvas},J.prototype.getViewportRoot=function(){return this._domRoot},J.prototype.getViewportRootOffset=function(){var V=this.getViewportRoot();if(V)return{offsetLeft:V.offsetLeft||0,offsetTop:V.offsetTop||0}},J.prototype.refresh=function(V){var P=this.storage.getDisplayList(!0),T=this._prevDisplayList,R=this._zlevelList;this._redrawId=Math.random(),this._paintList(P,T,V,this._redrawId);for(var E=0;E<R.length;E++){var A=this._layers[R[E]];!A.__builtin__&&A.refresh&&A.refresh(0===E?this._backgroundColor:null)}return this._opts.useDirtyRect&&(this._prevDisplayList=P.slice()),this},J.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},J.prototype._paintHoverList=function(V){var P=V.length,T=this._hoverlayer;if(T&&T.clear(),P){for(var E,R={inHover:!0,viewWidth:this._width,viewHeight:this._height},M=0;M<P;M++){var A=V[M];A.__inHover&&(T||(T=this._hoverlayer=this.getLayer(1e5)),E||(E=T.ctx).save(),(0,be.Dm)(E,A,R,M===P-1))}E&&E.restore()}},J.prototype.getHoverLayer=function(){return this.getLayer(1e5)},J.prototype.paintOne=function(V,P){(0,be.RV)(V,P)},J.prototype._paintList=function(V,P,T,R){if(this._redrawId===R){T=T||!1,this._updateLayerStatus(V);var E=this._doPaintList(V,P,T),M=E.finished,A=E.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),A&&this._paintHoverList(V),M)this.eachLayer(function(B){B.afterBrush&&B.afterBrush()});else{var O=this;(0,ee.Z)(function(){O._paintList(V,P,T,R)})}}},J.prototype._compositeManually=function(){var V=this.getLayer(K).ctx,P=this._domRoot.width,T=this._domRoot.height;V.clearRect(0,0,P,T),this.eachBuiltinLayer(function(R){R.virtual&&V.drawImage(R.dom,0,0,P,T)})},J.prototype._doPaintList=function(V,P,T){for(var R=this,E=[],M=this._opts.useDirtyRect,A=0;A<this._zlevelList.length;A++){var B=this._layers[this._zlevelList[A]];B.__builtin__&&B!==this._hoverlayer&&(B.__dirty||T)&&E.push(B)}for(var ce=!0,ae=!1,oe=function(xe){var fe=E[xe],ve=fe.ctx,we=M&&fe.createRepaintRects(V,P,de._width,de._height),Te=T?fe.__startIndex:fe.__drawIndex,Ae=!T&&fe.incremental&&Date.now,Ee=Ae&&Date.now(),Ve=fe.zlevel===de._zlevelList[0]?de._backgroundColor:null;if(fe.__startIndex===fe.__endIndex)fe.clear(!1,Ve,we);else if(Te===fe.__startIndex){var He=V[Te];(!He.incremental||!He.notClear||T)&&fe.clear(!1,Ve,we)}-1===Te&&(console.error("For some unknown reason. drawIndex is -1"),Te=fe.__startIndex);var We,$e=function(Ot){var Ht={inHover:!1,allClipped:!1,prevEl:null,viewWidth:R._width,viewHeight:R._height};for(We=Te;We<fe.__endIndex;We++){var an=V[We];if(an.__inHover&&(ae=!0),R._doPaintEl(an,fe,M,Ot,Ht,We===fe.__endIndex-1),Ae&&Date.now()-Ee>15)break}Ht.prevElClipPaths&&ve.restore()};if(we)if(0===we.length)We=fe.__endIndex;else for(var ct=de.dpr,St=0;St<we.length;++St){var _t=we[St];ve.save(),ve.beginPath(),ve.rect(_t.x*ct,_t.y*ct,_t.width*ct,_t.height*ct),ve.clip(),$e(_t),ve.restore()}else ve.save(),$e(),ve.restore();fe.__drawIndex=We,fe.__drawIndex<fe.__endIndex&&(ce=!1)},de=this,ne=0;ne<E.length;ne++)oe(ne);return $.Z.wxa&&Se.each(this._layers,function(xe){xe&&xe.ctx&&xe.ctx.draw&&xe.ctx.draw()}),{finished:ce,needsRefreshHover:ae}},J.prototype._doPaintEl=function(V,P,T,R,E,M){var A=P.ctx;if(T){var O=V.getPaintRect();(!R||O&&O.intersect(R))&&((0,be.Dm)(A,V,E,M),V.setPrevPaintRect(O))}else(0,be.Dm)(A,V,E,M)},J.prototype.getLayer=function(V,P){this._singleCanvas&&!this._needsManuallyCompositing&&(V=K);var T=this._layers[V];return T||((T=new U("zr_"+V,this,this.dpr)).zlevel=V,T.__builtin__=!0,this._layerConfig[V]?Se.merge(T,this._layerConfig[V],!0):this._layerConfig[V-b]&&Se.merge(T,this._layerConfig[V-b],!0),P&&(T.virtual=P),this.insertLayer(V,T),T.initContext()),T},J.prototype.insertLayer=function(V,P){var T=this._layers,R=this._zlevelList,E=R.length,M=this._domRoot,A=null,O=-1;if(!T[V]&&function Q(J){return!(!J||!J.__builtin__&&("function"!=typeof J.resize||"function"!=typeof J.refresh))}(P)){if(E>0&&V>R[0]){for(O=0;O<E-1&&!(R[O]<V&&R[O+1]>V);O++);A=T[R[O]]}if(R.splice(O+1,0,V),T[V]=P,!P.virtual)if(A){var B=A.dom;B.nextSibling?M.insertBefore(P.dom,B.nextSibling):M.appendChild(P.dom)}else M.firstChild?M.insertBefore(P.dom,M.firstChild):M.appendChild(P.dom);P.__painter=this}},J.prototype.eachLayer=function(V,P){for(var T=this._zlevelList,R=0;R<T.length;R++){var E=T[R];V.call(P,this._layers[E],E)}},J.prototype.eachBuiltinLayer=function(V,P){for(var T=this._zlevelList,R=0;R<T.length;R++){var E=T[R],M=this._layers[E];M.__builtin__&&V.call(P,M,E)}},J.prototype.eachOtherLayer=function(V,P){for(var T=this._zlevelList,R=0;R<T.length;R++){var E=T[R],M=this._layers[E];M.__builtin__||V.call(P,M,E)}},J.prototype.getLayers=function(){return this._layers},J.prototype._updateLayerStatus=function(V){function P(ae){E&&(E.__endIndex!==ae&&(E.__dirty=!0),E.__endIndex=ae)}if(this.eachBuiltinLayer(function(ae,oe){ae.__dirty=ae.__used=!1}),this._singleCanvas)for(var T=1;T<V.length;T++)if((R=V[T]).zlevel!==V[T-1].zlevel||R.incremental){this._needsManuallyCompositing=!0;break}var A,O,E=null,M=0;for(O=0;O<V.length;O++){var R,B=(R=V[O]).zlevel,ce=void 0;A!==B&&(A=B,M=0),R.incremental?((ce=this.getLayer(B+.001,this._needsManuallyCompositing)).incremental=!0,M=1):ce=this.getLayer(B+(M>0?b:0),this._needsManuallyCompositing),ce.__builtin__||Se.logError("ZLevel "+B+" has been used by unkown layer "+ce.id),ce!==E&&(ce.__used=!0,ce.__startIndex!==O&&(ce.__dirty=!0),ce.__startIndex=O,ce.__drawIndex=ce.incremental?-1:O,P(O),E=ce),R.__dirty&he.YV&&!R.__inHover&&(ce.__dirty=!0,ce.incremental&&ce.__drawIndex<0&&(ce.__drawIndex=O))}P(O),this.eachBuiltinLayer(function(ae,oe){!ae.__used&&ae.getElementCount()>0&&(ae.__dirty=!0,ae.__startIndex=ae.__endIndex=ae.__drawIndex=0),ae.__dirty&&ae.__drawIndex<0&&(ae.__drawIndex=ae.__startIndex)})},J.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},J.prototype._clearLayer=function(V){V.clear()},J.prototype.setBackgroundColor=function(V){this._backgroundColor=V,Se.each(this._layers,function(P){P.setUnpainted()})},J.prototype.configLayer=function(V,P){if(P){var T=this._layerConfig;T[V]?Se.merge(T[V],P,!0):T[V]=P;for(var R=0;R<this._zlevelList.length;R++){var E=this._zlevelList[R];E!==V&&E!==V+b||Se.merge(this._layers[E],T[V],!0)}}},J.prototype.delLayer=function(V){var P=this._layers,T=this._zlevelList,R=P[V];!R||(R.dom.parentNode.removeChild(R.dom),delete P[V],T.splice(Se.indexOf(T,V),1))},J.prototype.resize=function(V,P){if(this._domRoot.style){var T=this._domRoot;T.style.display="none";var R=this._opts,E=this.root;if(null!=V&&(R.width=V),null!=P&&(R.height=P),V=(0,ge.ap)(E,0,R),P=(0,ge.ap)(E,1,R),T.style.display="",this._width!==V||P!==this._height){for(var M in T.style.width=V+"px",T.style.height=P+"px",this._layers)this._layers.hasOwnProperty(M)&&this._layers[M].resize(V,P);this.refresh(!0)}this._width=V,this._height=P}else{if(null==V||null==P)return;this._width=V,this._height=P,this.getLayer(K).resize(V,P)}return this},J.prototype.clearLayer=function(V){var P=this._layers[V];P&&P.clear()},J.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},J.prototype.getRenderedCanvas=function(V){if(this._singleCanvas&&!this._compositeManually)return this._layers[K].dom;var P=new U("image",this,(V=V||{}).pixelRatio||this.dpr);P.initContext(),P.clear(!1,V.backgroundColor||this._backgroundColor);var T=P.ctx;if(V.pixelRatio<=this.dpr){this.refresh();var R=P.dom.width,E=P.dom.height;this.eachLayer(function(ae){ae.__builtin__?T.drawImage(ae.dom,0,0,R,E):ae.renderToCanvas&&(T.save(),ae.renderToCanvas(T),T.restore())})}else for(var M={inHover:!1,viewWidth:this._width,viewHeight:this._height},A=this.storage.getDisplayList(!0),O=0,B=A.length;O<B;O++)(0,be.Dm)(T,A[O],M,O===B-1);return P.dom},J.prototype.getWidth=function(){return this._width},J.prototype.getHeight=function(){return this._height},J}();function W(J){J.registerPainter("canvas",G)}},5543:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>he});var ue=H(5845),Se=H(4785),le=H(9706),ye=H(8512),ge=H(7331),be=Se.NM,Ce=function(j){function X(){var re=null!==j&&j.apply(this,arguments)||this;return re.type="interval",re._interval=0,re._intervalPrecision=2,re}return(0,ue.ZT)(X,j),X.prototype.parse=function(re){return re},X.prototype.contain=function(re){return ge.XS(re,this._extent)},X.prototype.normalize=function(re){return ge.Fv(re,this._extent)},X.prototype.scale=function(re){return ge.bA(re,this._extent)},X.prototype.setExtent=function(re,U){var ee=this._extent;isNaN(re)||(ee[0]=parseFloat(re)),isNaN(U)||(ee[1]=parseFloat(U))},X.prototype.unionExtent=function(re){var U=this._extent;re[0]<U[0]&&(U[0]=re[0]),re[1]>U[1]&&(U[1]=re[1]),this.setExtent(U[0],U[1])},X.prototype.getInterval=function(){return this._interval},X.prototype.setInterval=function(re){this._interval=re,this._niceExtent=this._extent.slice(),this._intervalPrecision=ge.lb(re)},X.prototype.getTicks=function(re){var U=this._interval,ee=this._extent,$=this._niceExtent,ie=this._intervalPrecision,K=[];if(!U)return K;ee[0]<$[0]&&K.push(re?{value:be($[0]-U,ie)}:{value:ee[0]});for(var Y=$[0];Y<=$[1]&&(K.push({value:Y}),(Y=be(Y+U,ie))!==K[K.length-1].value);)if(K.length>1e4)return[];var Q=K.length?K[K.length-1].value:$[1];return ee[1]>Q&&K.push(re?{value:be(Q+U,ie)}:{value:ee[1]}),K},X.prototype.getMinorTicks=function(re){for(var U=this.getTicks(!0),ee=[],$=this.getExtent(),ie=1;ie<U.length;ie++){for(var b=U[ie-1],Y=0,Q=[],q=(U[ie].value-b.value)/re;Y<re-1;){var G=be(b.value+(Y+1)*q);G>$[0]&&G<$[1]&&Q.push(G),Y++}ee.push(Q)}return ee},X.prototype.getLabel=function(re,U){if(null==re)return"";var ee=U&&U.precision;null==ee?ee=Se.p8(re.value)||0:"auto"===ee&&(ee=this._intervalPrecision);var $=be(re.value,ee,!0);return le.OD($)},X.prototype.calcNiceTicks=function(re,U,ee){re=re||5;var $=this._extent,ie=$[1]-$[0];if(isFinite(ie)){ie<0&&(ie=-ie,$.reverse());var K=ge.Qf($,re,U,ee);this._intervalPrecision=K.intervalPrecision,this._interval=K.interval,this._niceExtent=K.niceTickExtent}},X.prototype.calcNiceExtent=function(re){var U=this._extent;if(U[0]===U[1])if(0!==U[0]){var ee=Math.abs(U[0]);re.fixMax||(U[1]+=ee/2),U[0]-=ee/2}else U[1]=1;isFinite(U[1]-U[0])||(U[0]=0,U[1]=1),this.calcNiceTicks(re.splitNumber,re.minInterval,re.maxInterval);var ie=this._interval;re.fixMin||(U[0]=be(Math.floor(U[0]/ie)*ie)),re.fixMax||(U[1]=be(Math.ceil(U[1]/ie)*ie))},X.prototype.setNiceExtent=function(re,U){this._niceExtent=[re,U]},X.type="interval",X}(ye.Z);ye.Z.registerClass(Ce);const he=Ce},3156:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>Ce});var ue=H(5845),Se=H(8512),le=H(9567),ye=H(7331),ge=H(628),be=function(he){function j(X){var re=he.call(this,X)||this;re.type="ordinal";var U=re.getSetting("ordinalMeta");return U||(U=new le.Z({})),(0,ge.isArray)(U)&&(U=new le.Z({categories:(0,ge.map)(U,function(ee){return(0,ge.isObject)(ee)?ee.value:ee})})),re._ordinalMeta=U,re._extent=re.getSetting("extent")||[0,U.categories.length-1],re}return(0,ue.ZT)(j,he),j.prototype.parse=function(X){return null==X?NaN:(0,ge.isString)(X)?this._ordinalMeta.getOrdinal(X):Math.round(X)},j.prototype.contain=function(X){return X=this.parse(X),ye.XS(X,this._extent)&&null!=this._ordinalMeta.categories[X]},j.prototype.normalize=function(X){return X=this._getTickNumber(this.parse(X)),ye.Fv(X,this._extent)},j.prototype.scale=function(X){return X=Math.round(ye.bA(X,this._extent)),this.getRawOrdinalNumber(X)},j.prototype.getTicks=function(){for(var X=[],re=this._extent,U=re[0];U<=re[1];)X.push({value:U}),U++;return X},j.prototype.getMinorTicks=function(X){},j.prototype.setSortInfo=function(X){if(null!=X){for(var re=X.ordinalNumbers,U=this._ordinalNumbersByTick=[],ee=this._ticksByOrdinalNumber=[],$=0,ie=this._ordinalMeta.categories.length,K=Math.min(ie,re.length);$<K;++$){var b=re[$];U[$]=b,ee[b]=$}for(var Y=0;$<ie;++$){for(;null!=ee[Y];)Y++;U.push(Y),ee[Y]=$}}else this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null},j.prototype._getTickNumber=function(X){var re=this._ticksByOrdinalNumber;return re&&X>=0&&X<re.length?re[X]:X},j.prototype.getRawOrdinalNumber=function(X){var re=this._ordinalNumbersByTick;return re&&X>=0&&X<re.length?re[X]:X},j.prototype.getLabel=function(X){if(!this.isBlank()){var re=this.getRawOrdinalNumber(X.value),U=this._ordinalMeta.categories[re];return null==U?"":U+""}},j.prototype.count=function(){return this._extent[1]-this._extent[0]+1},j.prototype.unionExtentFromData=function(X,re){this.unionExtent(X.getApproximateExtent(re))},j.prototype.isInExtentRange=function(X){return X=this._getTickNumber(X),this._extent[0]<=X&&this._extent[1]>=X},j.prototype.getOrdinalMeta=function(){return this._ordinalMeta},j.prototype.calcNiceTicks=function(){},j.prototype.calcNiceExtent=function(){},j.type="ordinal",j}(Se.Z);Se.Z.registerClass(be);const Ce=be},8512:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>le});var ue=H(1087),Se=function(){function ye(ge){this._setting=ge||{},this._extent=[1/0,-1/0]}return ye.prototype.getSetting=function(ge){return this._setting[ge]},ye.prototype.unionExtent=function(ge){var be=this._extent;ge[0]<be[0]&&(be[0]=ge[0]),ge[1]>be[1]&&(be[1]=ge[1])},ye.prototype.unionExtentFromData=function(ge,be){this.unionExtent(ge.getApproximateExtent(be))},ye.prototype.getExtent=function(){return this._extent.slice()},ye.prototype.setExtent=function(ge,be){var Ce=this._extent;isNaN(ge)||(Ce[0]=ge),isNaN(be)||(Ce[1]=be)},ye.prototype.isInExtentRange=function(ge){return this._extent[0]<=ge&&this._extent[1]>=ge},ye.prototype.isBlank=function(){return this._isBlank},ye.prototype.setBlank=function(ge){this._isBlank=ge},ye}();ue.au(Se);const le=Se},9020:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>Q});var ue=H(5845),Se=H(4785),le=H(999),ye=H(7331),ge=H(5543),be=H(8512),Ce=H(628),j=function(F){function q(G){var W=F.call(this,G)||this;return W.type="time",W}return(0,ue.ZT)(q,F),q.prototype.getLabel=function(G){var W=this.getSetting("useUTC");return(0,le.WU)(G.value,le.V8[(0,le.xC)((0,le.Tj)(this._minLevelUnit))]||le.V8.second,W,this.getSetting("locale"))},q.prototype.getFormattedLabel=function(G,W,J){var V=this.getSetting("useUTC"),P=this.getSetting("locale");return(0,le.k7)(G,W,J,P,V)},q.prototype.getTicks=function(){var W=this._extent,J=[];if(!this._interval)return J;J.push({value:W[0],level:0});var V=this.getSetting("useUTC"),P=function Y(F,q,G,W){var V=le.FW,P=0;function T(Ve,He,We,$e,ct,St,_t){for(var Ot=new Date(He),Ht=He,an=Ot[$e]();Ht<We&&Ht<=W[1];)_t.push({value:Ht}),Ot[ct](an+=Ve),Ht=Ot.getTime();_t.push({value:Ht,notAdd:!0})}function R(Ve,He,We){var $e=[],ct=!He.length;if(!function re(F,q,G,W){var J=Se.sG(q),V=Se.sG(G),P=function(ce){return(0,le.q5)(J,ce,W)===(0,le.q5)(V,ce,W)},T=function(){return P("year")},R=function(){return T()&&P("month")},E=function(){return R()&&P("day")},M=function(){return E()&&P("hour")},A=function(){return M()&&P("minute")},O=function(){return A()&&P("second")};switch(F){case"year":return T();case"month":return R();case"day":return E();case"hour":return M();case"minute":return A();case"second":return O();case"millisecond":return O()&&P("millisecond")}}((0,le.Tj)(Ve),W[0],W[1],G)){ct&&(He=[{value:b(new Date(W[0]),Ve,G)},{value:W[1]}]);for(var St=0;St<He.length-1;St++){var _t=He[St].value,Ot=He[St+1].value;if(_t!==Ot){var Ht=void 0,an=void 0,hn=void 0;switch(Ve){case"year":Ht=Math.max(1,Math.round(q/le.s2/365)),an=(0,le.sx)(G),hn=(0,le.xL)(G);break;case"half-year":case"quarter":case"month":Ht=ee(q),an=(0,le.CW)(G),hn=(0,le.vh)(G);break;case"week":case"half-week":case"day":Ht=U(q),an=(0,le.xz)(G),hn=(0,le.f5)(G),!0;break;case"half-day":case"quarter-day":case"hour":Ht=$(q),an=(0,le.Wp)(G),hn=(0,le.En)(G);break;case"minute":Ht=ie(q,!0),an=(0,le.fn)(G),hn=(0,le.eN)(G);break;case"second":Ht=ie(q,!1),an=(0,le.MV)(G),hn=(0,le.rM)(G);break;case"millisecond":Ht=K(q),an=(0,le.RZ)(G),hn=(0,le.cb)(G)}T(Ht,_t,Ot,an,hn,0,$e),"year"===Ve&&We.length>1&&0===St&&We.unshift({value:We[0].value-Ht})}}for(St=0;St<$e.length;St++)We.push($e[St]);return $e}}for(var E=[],M=[],A=0,O=0,B=0;B<V.length&&P++<1e4;++B){var ce=(0,le.Tj)(V[B]);if((0,le.$K)(V[B])&&(R(V[B],E[E.length-1]||[],M),ce!==(V[B+1]?(0,le.Tj)(V[B+1]):null))){if(M.length){O=A,M.sort(function(Ve,He){return Ve.value-He.value});for(var oe=[],de=0;de<M.length;++de){var ne=M[de].value;(0===de||M[de-1].value!==ne)&&(oe.push(M[de]),ne>=W[0]&&ne<=W[1]&&A++)}var xe=(W[1]-W[0])/q;if(A>1.5*xe&&O>xe/1.5||(E.push(oe),A>xe||F===V[B]))break}M=[]}}var fe=(0,Ce.filter)((0,Ce.map)(E,function(Ve){return(0,Ce.filter)(Ve,function(He){return He.value>=W[0]&&He.value<=W[1]&&!He.notAdd})}),function(Ve){return Ve.length>0}),ve=[],we=fe.length-1;for(B=0;B<fe.length;++B)for(var Te=fe[B],Ae=0;Ae<Te.length;++Ae)ve.push({value:Te[Ae].value,level:we-B});ve.sort(function(Ve,He){return Ve.value-He.value});var Ee=[];for(B=0;B<ve.length;++B)(0===B||ve[B].value!==ve[B-1].value)&&Ee.push(ve[B]);return Ee}(this._minLevelUnit,this._approxInterval,V,W);return(J=J.concat(P)).push({value:W[1],level:0}),J},q.prototype.calcNiceExtent=function(G){var W=this._extent;if(W[0]===W[1]&&(W[0]-=le.s2,W[1]+=le.s2),W[1]===-1/0&&W[0]===1/0){var J=new Date;W[1]=+new Date(J.getFullYear(),J.getMonth(),J.getDate()),W[0]=W[1]-le.s2}this.calcNiceTicks(G.splitNumber,G.minInterval,G.maxInterval)},q.prototype.calcNiceTicks=function(G,W,J){var V=this._extent;this._approxInterval=(V[1]-V[0])/(G=G||10),null!=W&&this._approxInterval<W&&(this._approxInterval=W),null!=J&&this._approxInterval>J&&(this._approxInterval=J);var T=X.length,R=Math.min(function(F,q,G,W){for(;G<W;){var J=G+W>>>1;F[J][1]<q?G=J+1:W=J}return G}(X,this._approxInterval,0,T),T-1);this._interval=X[R][1],this._minLevelUnit=X[Math.max(R-1,0)][0]},q.prototype.parse=function(G){return(0,Ce.isNumber)(G)?G:+Se.sG(G)},q.prototype.contain=function(G){return ye.XS(this.parse(G),this._extent)},q.prototype.normalize=function(G){return ye.Fv(this.parse(G),this._extent)},q.prototype.scale=function(G){return ye.bA(G,this._extent)},q.type="time",q}(ge.Z),X=[["second",le.WT],["minute",le.yR],["hour",le.dV],["quarter-day",6*le.dV],["half-day",12*le.dV],["day",1.2*le.s2],["half-week",3.5*le.s2],["week",7*le.s2],["month",31*le.s2],["quarter",95*le.s2],["half-year",le.P5/2],["year",le.P5]];function U(F,q){return(F/=le.s2)>16?16:F>7.5?7:F>3.5?4:F>1.5?2:1}function ee(F){return(F/=30*le.s2)>6?6:F>3?3:F>2?2:1}function $(F){return(F/=le.dV)>12?12:F>6?6:F>3.5?4:F>2?2:1}function ie(F,q){return(F/=q?le.yR:le.WT)>30?30:F>20?20:F>15?15:F>10?10:F>5?5:F>2?2:1}function K(F){return Se.kx(F,!0)}function b(F,q,G){var W=new Date(F);switch((0,le.Tj)(q)){case"year":case"month":W[(0,le.vh)(G)](0);case"day":W[(0,le.f5)(G)](1);case"hour":W[(0,le.En)(G)](0);case"minute":W[(0,le.eN)(G)](0);case"second":W[(0,le.rM)(G)](0),W[(0,le.cb)(G)](0)}return W.getTime()}be.Z.registerClass(j);const Q=j},7331:(Vt,Qe,H)=>{H.d(Qe,{Fv:()=>X,Qf:()=>ye,XS:()=>j,bA:()=>re,lM:()=>le,lb:()=>be,r1:()=>ge});var ue=H(4785);function le(U){return"interval"===U.type||"log"===U.type}function ye(U,ee,$,ie){var K={},Y=K.interval=(0,ue.kx)((U[1]-U[0])/ee,!0);null!=$&&Y<$&&(Y=K.interval=$),null!=ie&&Y>ie&&(Y=K.interval=ie);var Q=K.intervalPrecision=be(Y);return function he(U,ee){!isFinite(U[0])&&(U[0]=ee[0]),!isFinite(U[1])&&(U[1]=ee[1]),Ce(U,0,ee),Ce(U,1,ee),U[0]>U[1]&&(U[0]=U[1])}(K.niceTickExtent=[(0,ue.NM)(Math.ceil(U[0]/Y)*Y,Q),(0,ue.NM)(Math.floor(U[1]/Y)*Y,Q)],U),K}function ge(U){var ee=Math.pow(10,(0,ue.xW)(U)),$=U/ee;return $?2===$?$=3:3===$?$=5:$*=2:$=1,(0,ue.NM)($*ee)}function be(U){return(0,ue.p8)(U)+2}function Ce(U,ee,$){U[ee]=Math.max(Math.min(U[ee],$[1]),$[0])}function j(U,ee){return U>=ee[0]&&U<=ee[1]}function X(U,ee){return ee[1]===ee[0]?.5:(U-ee[0])/(ee[1]-ee[0])}function re(U,ee){return U*(ee[1]-ee[0])+ee[0]}},1087:(Vt,Qe,H)=>{H.d(Qe,{PT:()=>he,Qj:()=>ee,au:()=>K,dm:()=>j,pw:()=>re,u9:()=>be});var ue=H(5845),Se=H(628),ye="___EC__COMPONENT__CONTAINER___",ge="___EC__EXTENDED_CLASS___";function be(b){var Y={main:"",sub:""};if(b){var Q=b.split(".");Y.main=Q[0]||"",Y.sub=Q[1]||""}return Y}function he(b){return!(!b||!b[ge])}function j(b,Y){b.$constructor=b,b.extend=function(Q){var q,F=this;return function X(b){return Se.isFunction(b)&&/^class\s/.test(Function.prototype.toString.call(b))}(F)?q=function(G){function W(){return G.apply(this,arguments)||this}return(0,ue.ZT)(W,G),W}(F):(q=function(){(Q.$constructor||F).apply(this,arguments)},Se.inherits(q,this)),Se.extend(q.prototype,Q),q[ge]=!0,q.extend=this.extend,q.superCall=$,q.superApply=ie,q.superClass=F,q}}function re(b,Y){b.extend=Y.extend}var U=Math.round(10*Math.random());function ee(b){var Y=["__\0is_clz",U++].join("_");b.prototype[Y]=!0,b.isInstance=function(Q){return!(!Q||!Q[Y])}}function $(b,Y){for(var Q=[],F=2;F<arguments.length;F++)Q[F-2]=arguments[F];return this.superClass.prototype[Y].apply(b,Q)}function ie(b,Y,Q){return this.superClass.prototype[Y].apply(b,Q)}function K(b){var Y={};b.registerClass=function(F){var q=F.type||F.prototype.type;if(q){(function Ce(b){Se.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(b),'componentType "'+b+'" illegal')})(q),F.prototype.type=q;var G=be(q);if(G.sub){if(G.sub!==ye){var W=function Q(F){var q=Y[F.main];return(!q||!q[ye])&&((q=Y[F.main]={})[ye]=!0),q}(G);W[G.sub]=F}}else Y[G.main]=F}return F},b.getClass=function(F,q,G){var W=Y[F];if(W&&W[ye]&&(W=q?W[q]:null),G&&!W)throw new Error(q?"Component "+F+"."+(q||"")+" is used but not imported.":F+".type should be specified.");return W},b.getClassesByMainType=function(F){var q=be(F),G=[],W=Y[q.main];return W&&W[ye]?Se.each(W,function(J,V){V!==ye&&G.push(J)}):G.push(W),G},b.hasClass=function(F){var q=be(F);return!!Y[q.main]},b.getAllClassMainTypes=function(){var F=[];return Se.each(Y,function(q,G){F.push(G)}),F},b.hasSubTypes=function(F){var q=be(F),G=Y[q.main];return G&&G[ye]}}},2015:(Vt,Qe,H)=>{H.d(Qe,{Kr:()=>ye,ZL:()=>Ce,cj:()=>ge,jS:()=>be});var ue=H(628),Se=H(1087),le=Math.round(10*Math.random());function ye(he){return[he||"",le++].join("_")}function ge(he){var j={};he.registerSubTypeDefaulter=function(X,re){var U=(0,Se.u9)(X);j[U.main]=re},he.determineSubType=function(X,re){var U=re.type;if(!U){var ee=(0,Se.u9)(X).main;he.hasSubTypes(X)&&j[ee]&&(U=j[ee](re))}return U}}function be(he,j){function re(ee,$){return ee[$]||(ee[$]={predecessor:[],successor:[]}),ee[$]}he.topologicalTravel=function(ee,$,ie,K){if(ee.length){var b=function X(ee){var $={},ie=[];return ue.each(ee,function(K){var b=re($,K),Q=function U(ee,$){var ie=[];return ue.each(ee,function(K){ue.indexOf($,K)>=0&&ie.push(K)}),ie}(b.originalDeps=j(K),ee);b.entryCount=Q.length,0===b.entryCount&&ie.push(K),ue.each(Q,function(F){ue.indexOf(b.predecessor,F)<0&&b.predecessor.push(F);var q=re($,F);ue.indexOf(q.successor,F)<0&&q.successor.push(K)})}),{graph:$,noEntryList:ie}}($),Y=b.graph,Q=b.noEntryList,F={};for(ue.each(ee,function(P){F[P]=!0});Q.length;){var q=Q.pop(),G=Y[q],W=!!F[q];W&&(ie.call(K,q,G.originalDeps.slice()),delete F[q]),ue.each(G.successor,W?V:J)}ue.each(F,function(){throw new Error("")})}function J(P){Y[P].entryCount--,0===Y[P].entryCount&&Q.push(P)}function V(P){F[P]=!0,J(P)}}}function Ce(he,j){return ue.merge(ue.merge({},he,!0),j,!0)}},8177:(Vt,Qe,H)=>{H.d(Qe,{I:()=>$});var ue=Math.round(9*Math.random()),Se="function"==typeof Object.defineProperty;const ye=function(){function F(){this._id="__ec_inner_"+ue++}return F.prototype.get=function(q){return this._guard(q)[this._id]},F.prototype.set=function(q,G){var W=this._guard(q);return Se?Object.defineProperty(W,this._id,{value:G,enumerable:!1,configurable:!0}):W[this._id]=G,this},F.prototype.delete=function(q){return!!this.has(q)&&(delete this._guard(q)[this._id],!0)},F.prototype.has=function(q){return!!this._guard(q)[this._id]},F.prototype._guard=function(q){if(q!==Object(q))throw TypeError("Value of WeakMap is not a non-null object.");return q},F}();var ge=H(7148),be=H(628),Ce=H(4785),he=H(4550),j=H(9012),X=H(5730),re=new ye,U=new ge.ZP(100),ee=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function $(F,q){if("none"===F)return null;var G=q.getDevicePixelRatio(),W=q.getZr(),J="svg"===W.painter.type;F.dirty&&re.delete(F);var V=re.get(F);if(V)return V;var P=(0,be.defaults)(F,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});"none"===P.backgroundColor&&(P.backgroundColor=null);var T={repeat:"repeat"};return function R(E){for(var M=[G],A=!0,O=0;O<ee.length;++O){var B=P[ee[O]];if(null!=B&&!(0,be.isArray)(B)&&!(0,be.isString)(B)&&!(0,be.isNumber)(B)&&"boolean"!=typeof B){A=!1;break}M.push(B)}var ce;if(A){ce=M.join(",")+(J?"-svg":"");var ae=U.get(ce);ae&&(J?E.svgElement=ae:E.image=ae)}var Ae,oe=K(P.dashArrayX),de=function b(F){if(!F||"object"==typeof F&&0===F.length)return[0,0];if((0,be.isNumber)(F)){var q=Math.ceil(F);return[q,q]}var G=(0,be.map)(F,function(W){return Math.ceil(W)});return F.length%2?G.concat(G):G}(P.dashArrayY),ne=ie(P.symbol),xe=function Y(F){return(0,be.map)(F,function(q){return Q(q)})}(oe),fe=Q(de),ve=!J&&X.qW.createCanvas(),we=J&&{tag:"g",attrs:{},key:"dcl",children:[]},Te=function Ee(){for(var He=1,We=0,$e=xe.length;We<$e;++We)He=(0,Ce.nl)(He,xe[We]);var ct=1;for(We=0,$e=ne.length;We<$e;++We)ct=(0,Ce.nl)(ct,ne[We].length);He*=ct;var St=fe*xe.length*ne.length;return{width:Math.max(1,Math.min(He,P.maxTileWidth)),height:Math.max(1,Math.min(St,P.maxTileHeight))}}();ve&&(ve.width=Te.width*G,ve.height=Te.height*G,Ae=ve.getContext("2d")),function Ve(){Ae&&(Ae.clearRect(0,0,ve.width,ve.height),P.backgroundColor&&(Ae.fillStyle=P.backgroundColor,Ae.fillRect(0,0,ve.width,ve.height)));for(var He=0,We=0;We<de.length;++We)He+=de[We];if(!(He<=0))for(var $e=-fe,ct=0,St=0,_t=0;$e<Te.height;){if(ct%2==0){for(var Ot=St/2%ne.length,Ht=0,an=0,hn=0;Ht<2*Te.width;){var Vn=0;for(We=0;We<oe[_t].length;++We)Vn+=oe[_t][We];if(Vn<=0)break;if(an%2==0){var sr=.5*(1-P.symbolSize);On(Ht+oe[_t][an]*sr,$e+de[ct]*sr,oe[_t][an]*P.symbolSize,de[ct]*P.symbolSize,ne[Ot][hn/2%ne[Ot].length])}Ht+=oe[_t][an],++hn,++an===oe[_t].length&&(an=0)}++_t===oe.length&&(_t=0)}$e+=de[ct],++St,++ct===de.length&&(ct=0)}function On(jn,et,Tt,jt,Rt){var fn=J?1:G,fr=(0,he.th)(Rt,jn*fn,et*fn,Tt*fn,jt*fn,P.color,P.symbolKeepAspect);if(J){var pr=W.painter.renderOneToVNode(fr);pr&&we.children.push(pr)}else(0,j.RV)(Ae,fr)}}(),A&&U.put(ce,ve||we),E.image=ve,E.svgElement=we,E.svgWidth=Te.width,E.svgHeight=Te.height}(T),T.rotation=P.rotation,T.scaleX=T.scaleY=J?1:1/G,re.set(F,T),F.dirty=!1,T}function ie(F){if(!F||0===F.length)return[["rect"]];if((0,be.isString)(F))return[[F]];for(var q=!0,G=0;G<F.length;++G)if(!(0,be.isString)(F[G])){q=!1;break}if(q)return ie([F]);var W=[];for(G=0;G<F.length;++G)(0,be.isString)(F[G])?W.push([F[G]]):W.push(F[G]);return W}function K(F){if(!F||0===F.length)return[[0,0]];if((0,be.isNumber)(F))return[[q=Math.ceil(F),q]];for(var G=!0,W=0;W<F.length;++W)if(!(0,be.isNumber)(F[W])){G=!1;break}if(G)return K([F]);var J=[];for(W=0;W<F.length;++W)if((0,be.isNumber)(F[W])){var q=Math.ceil(F[W]);J.push([q,q])}else q=(0,be.map)(F[W],function(T){return Math.ceil(T)}),J.push(q.length%2==1?q.concat(q):q);return J}function Q(F){for(var q=0,G=0;G<F.length;++G)q+=F[G];return F.length%2==1?2*q:q}},4649:(Vt,Qe,H)=>{function ue(Se,le,ye){for(var ge;Se&&(!le(Se)||(ge=Se,!ye));)Se=Se.__hostTarget||Se.parent;return ge}H.d(Qe,{o:()=>ue})},9706:(Vt,Qe,H)=>{H.d(Qe,{A0:()=>ee,Lz:()=>K,MI:()=>b,MY:()=>Ce,OD:()=>ge,ew:()=>ie,kF:()=>re,mr:()=>$,uX:()=>he,wx:()=>U,zW:()=>be});var ue=H(628),Se=H(2425),le=H(4785),ye=H(999);function ge(Y){if(!(0,le.kE)(Y))return ue.isString(Y)?Y:"-";var Q=(Y+"").split(".");return Q[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(Q.length>1?"."+Q[1]:"")}function be(Y,Q){return Y=(Y||"").toLowerCase().replace(/-(.)/g,function(F,q){return q.toUpperCase()}),Q&&Y&&(Y=Y.charAt(0).toUpperCase()+Y.slice(1)),Y}var Ce=ue.normalizeCssArray;function he(Y,Q,F){function G(R){return R&&ue.trim(R)?R:"-"}function W(R){return!(null==R||isNaN(R)||!isFinite(R))}var J="time"===Q,V=Y instanceof Date;if(J||V){var P=J?(0,le.sG)(Y):Y;if(!isNaN(+P))return(0,ye.WU)(P,"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}",F);if(V)return"-"}if("ordinal"===Q)return ue.isStringSafe(Y)?G(Y):ue.isNumber(Y)&&W(Y)?Y+"":"-";var T=(0,le.FK)(Y);return W(T)?ge(T):ue.isStringSafe(Y)?G(Y):"boolean"==typeof Y?Y+"":"-"}var j=["a","b","c","d","e","f","g"],X=function(Y,Q){return"{"+Y+(Q??"")+"}"};function re(Y,Q,F){ue.isArray(Q)||(Q=[Q]);var q=Q.length;if(!q)return"";for(var G=Q[0].$vars||[],W=0;W<G.length;W++){var J=j[W];Y=Y.replace(X(J),X(J,0))}for(var V=0;V<q;V++)for(var P=0;P<G.length;P++){var T=Q[V][G[P]];Y=Y.replace(X(j[P],V),F?(0,Se.F1)(T):T)}return Y}function U(Y,Q,F){return ue.each(Q,function(q,G){Y=Y.replace("{"+G+"}",F?(0,Se.F1)(q):q)}),Y}function ee(Y,Q){var F=ue.isString(Y)?{color:Y,extraCssText:Q}:Y||{},q=F.color,G=F.type;Q=F.extraCssText;var W=F.renderMode||"html";return q?"html"===W?"subItem"===G?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+(0,Se.F1)(q)+";"+(Q||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+(0,Se.F1)(q)+";"+(Q||"")+'"></span>':{renderMode:W,content:"{"+(F.markerId||"markerX")+"|}  ",style:"subItem"===G?{width:4,height:4,borderRadius:2,backgroundColor:q}:{width:10,height:10,borderRadius:5,backgroundColor:q}}:""}function $(Y,Q,F){("week"===Y||"month"===Y||"quarter"===Y||"half-year"===Y||"year"===Y)&&(Y="MM-dd\nyyyy");var q=(0,le.sG)(Q),G=F?"getUTC":"get",W=q[G+"FullYear"](),J=q[G+"Month"]()+1,V=q[G+"Date"](),P=q[G+"Hours"](),T=q[G+"Minutes"](),R=q[G+"Seconds"](),E=q[G+"Milliseconds"]();return Y.replace("MM",(0,ye.vk)(J,2)).replace("M",J).replace("yyyy",W).replace("yy",(0,ye.vk)(W%100+"",2)).replace("dd",(0,ye.vk)(V,2)).replace("d",V).replace("hh",(0,ye.vk)(P,2)).replace("h",P).replace("mm",(0,ye.vk)(T,2)).replace("m",T).replace("ss",(0,ye.vk)(R,2)).replace("s",R).replace("SSS",(0,ye.vk)(E,3))}function ie(Y){return Y&&Y.charAt(0).toUpperCase()+Y.substr(1)}function K(Y,Q){return Q=Q||"transparent",ue.isString(Y)?Y:ue.isObject(Y)&&Y.colorStops&&(Y.colorStops[0]||{}).color||Q}function b(Y,Q){if("_blank"===Q||"blank"===Q){var F=window.open();F.opener=null,F.location.href=Y}else window.open(Y,Q)}},2429:(Vt,Qe,H)=>{H.r(Qe),H.d(Qe,{Arc:()=>Y.Z,BezierCurve:()=>b.Z,BoundingRect:()=>G.Z,Circle:()=>j.Z,CompoundPath:()=>Q.Z,Ellipse:()=>X.Z,Group:()=>Ce.Z,Image:()=>be.ZP,IncrementalDisplayable:()=>V.Z,Line:()=>K.Z,LinearGradient:()=>F.Z,OrientedBoundingRect:()=>W.Z,Path:()=>ye.ZP,Point:()=>J.Z,Polygon:()=>ee.Z,Polyline:()=>$.Z,RadialGradient:()=>q.Z,Rect:()=>ie.Z,Ring:()=>U.Z,Sector:()=>re.C,Text:()=>he.ZP,applyTransform:()=>He,clipPointsByRect:()=>_t,clipRectByRect:()=>Ot,createIcon:()=>Ht,extendPath:()=>ae,extendShape:()=>B,getShapeClass:()=>de,getTransform:()=>Ve,groupTransition:()=>St,initProps:()=>E.KZ,isElementRemoved:()=>E.eq,lineLineIntersect:()=>hn,linePolygonIntersect:()=>an,makeImage:()=>xe,makePath:()=>ne,mergePath:()=>ve,registerShape:()=>oe,removeElement:()=>E.bX,removeElementWithFadeOut:()=>E.XD,resizePath:()=>we,setTooltipConfig:()=>$n,subPixelOptimize:()=>Ee,subPixelOptimizeLine:()=>Te,subPixelOptimizeRect:()=>Ae,transformDirection:()=>We,traverseElements:()=>er,updateProps:()=>E.D});var ue=H(9441),Se=H(3481),le=H(8221),ye=H(126),ge=H(9778),be=H(6766),Ce=H(8539),he=H(8208),j=H(9359),X=H(6743),re=H(9770),U=H(495),ee=H(3186),$=H(7834),ie=H(3160),K=H(4110),b=H(6146),Y=H(8234),Q=H(1115),F=H(5910),q=H(641),G=H(7021),W=H(6217),J=H(7564),V=H(3520),P=H(5333),T=H(628),R=H(7282),E=H(3802),M=Math.max,A=Math.min,O={};function B(Kt){return ye.ZP.extend(Kt)}var ce=ue.Pc;function ae(Kt,cn){return ce(Kt,cn)}function oe(Kt,cn){O[Kt]=cn}function de(Kt){if(O.hasOwnProperty(Kt))return O[Kt]}function ne(Kt,cn,On,jn){var et=ue.iR(Kt,cn);return On&&("center"===jn&&(On=fe(On,et.getBoundingRect())),we(et,On)),et}function xe(Kt,cn,On){var jn=new be.ZP({style:{image:Kt,x:cn.x,y:cn.y,width:cn.width,height:cn.height},onload:function(et){"center"===On&&jn.setStyle(fe(cn,{width:et.width,height:et.height}))}});return jn}function fe(Kt,cn){var et,On=cn.width/cn.height,jn=Kt.height*On;return et=jn<=Kt.width?Kt.height:(jn=Kt.width)/On,{x:Kt.x+Kt.width/2-jn/2,y:Kt.y+Kt.height/2-et/2,width:jn,height:et}}var ve=ue.AA;function we(Kt,cn){if(Kt.applyTransform){var jn=Kt.getBoundingRect().calculateTransform(cn);Kt.applyTransform(jn)}}function Te(Kt,cn){return P._3(Kt,Kt,{lineWidth:cn}),Kt}function Ae(Kt){return P.Pw(Kt.shape,Kt.shape,Kt.style),Kt}var Ee=P.vu;function Ve(Kt,cn){for(var On=Se.identity([]);Kt&&Kt!==cn;)Se.mul(On,Kt.getLocalTransform(),On),Kt=Kt.parent;return On}function He(Kt,cn,On){return cn&&!(0,T.isArrayLike)(cn)&&(cn=ge.ZP.getLocalTransform(cn)),On&&(cn=Se.invert([],cn)),le.applyTransform([],Kt,cn)}function We(Kt,cn,On){var jn=0===cn[4]||0===cn[5]||0===cn[0]?1:Math.abs(2*cn[4]/cn[0]),et=0===cn[4]||0===cn[5]||0===cn[2]?1:Math.abs(2*cn[4]/cn[2]),Tt=["left"===Kt?-jn:"right"===Kt?jn:0,"top"===Kt?-et:"bottom"===Kt?et:0];return Tt=He(Tt,cn,On),Math.abs(Tt[0])>Math.abs(Tt[1])?Tt[0]>0?"right":"left":Tt[1]>0?"bottom":"top"}function $e(Kt){return!Kt.isGroup}function St(Kt,cn,On){if(Kt&&cn){var Tt=function jn(jt){var Rt={};return jt.traverse(function(fn){$e(fn)&&fn.anid&&(Rt[fn.anid]=fn)}),Rt}(Kt);cn.traverse(function(jt){if($e(jt)&&jt.anid){var Rt=Tt[jt.anid];if(Rt){var fn=et(jt);jt.attr(et(Rt)),(0,E.D)(jt,fn,On,(0,R.A)(jt).dataIndex)}}})}function et(jt){var Rt={x:jt.x,y:jt.y,rotation:jt.rotation};return function ct(Kt){return null!=Kt.shape}(jt)&&(Rt.shape=(0,T.extend)({},jt.shape)),Rt}}function _t(Kt,cn){return(0,T.map)(Kt,function(On){var jn=On[0];jn=M(jn,cn.x),jn=A(jn,cn.x+cn.width);var et=On[1];return et=M(et,cn.y),[jn,et=A(et,cn.y+cn.height)]})}function Ot(Kt,cn){var On=M(Kt.x,cn.x),jn=A(Kt.x+Kt.width,cn.x+cn.width),et=M(Kt.y,cn.y),Tt=A(Kt.y+Kt.height,cn.y+cn.height);if(jn>=On&&Tt>=et)return{x:On,y:et,width:jn-On,height:Tt-et}}function Ht(Kt,cn,On){var jn=(0,T.extend)({rectHover:!0},cn),et=jn.style={strokeNoScale:!0};if(On=On||{x:-1,y:-1,width:2,height:2},Kt)return 0===Kt.indexOf("image://")?(et.image=Kt.slice(8),(0,T.defaults)(et,On),new be.ZP(jn)):ne(Kt.replace("path://",""),jn,On,"center")}function an(Kt,cn,On,jn,et){for(var Tt=0,jt=et[et.length-1];Tt<et.length;Tt++){var Rt=et[Tt];if(hn(Kt,cn,On,jn,Rt[0],Rt[1],jt[0],jt[1]))return!0;jt=Rt}}function hn(Kt,cn,On,jn,et,Tt,jt,Rt){var fn=On-Kt,fr=jn-cn,pr=jt-et,rt=Rt-Tt,ot=Vn(pr,rt,fn,fr);if(function sr(Kt){return Kt<=1e-6&&Kt>=-1e-6}(ot))return!1;var st=Kt-et,je=cn-Tt,gt=Vn(st,je,fn,fr)/ot;if(gt<0||gt>1)return!1;var ht=Vn(st,je,pr,rt)/ot;return!(ht<0||ht>1)}function Vn(Kt,cn,On,jn){return Kt*jn-On*cn}function $n(Kt){var cn=Kt.itemTooltipOption,On=Kt.componentModel,jn=Kt.itemName,et=(0,T.isString)(cn)?{formatter:cn}:cn,Tt=On.mainType,jt=On.componentIndex,Rt={componentType:Tt,name:jn,$vars:["name"]};Rt[Tt+"Index"]=jt;var fn=Kt.formatterParamsExtra;fn&&(0,T.each)((0,T.keys)(fn),function(pr){(0,T.hasOwn)(Rt,pr)||(Rt[pr]=fn[pr],Rt.$vars.push(pr))});var fr=(0,R.A)(Kt.el);fr.componentMainType=Tt,fr.componentIndex=jt,fr.tooltipConfig={name:jn,option:(0,T.defaults)({content:jn,formatterParams:Rt},et)}}function gr(Kt,cn){var On;Kt.isGroup&&(On=cn(Kt)),On||Kt.traverse(cn)}function er(Kt,cn){if(Kt)if((0,T.isArray)(Kt))for(var On=0;On<Kt.length;On++)gr(Kt[On],cn);else gr(Kt,cn)}oe("circle",j.Z),oe("ellipse",X.Z),oe("sector",re.C),oe("ring",U.Z),oe("polygon",ee.Z),oe("polyline",$.Z),oe("rect",ie.Z),oe("line",K.Z),oe("bezierCurve",b.Z),oe("arc",Y.Z)},7282:(Vt,Qe,H)=>{H.d(Qe,{A:()=>Se,Q:()=>le});var Se=(0,H(1266).Yf)(),le=function(ye,ge,be,Ce){if(Ce){var he=Se(Ce);he.dataIndex=be,he.dataType=ge,he.seriesIndex=ye,"group"===Ce.type&&Ce.traverse(function(j){var X=Se(j);X.seriesIndex=ye,X.dataIndex=be,X.dataType=ge})}}},634:(Vt,Qe,H)=>{H.d(Qe,{BZ:()=>j,ME:()=>ee,QM:()=>ie,QT:()=>Q,YD:()=>K,dt:()=>b,gN:()=>be,lq:()=>U,p$:()=>$,tE:()=>Y});var ue=H(628),Se=H(7021),le=H(4785),ye=H(9706),ge=ue.each,be=["left","right","top","bottom","width","height"],Ce=[["width","left","right"],["height","top","bottom"]];function he(F,q,G,W,J){var V=0,P=0;null==W&&(W=1/0),null==J&&(J=1/0);var T=0;q.eachChild(function(R,E){var B,ce,M=R.getBoundingRect(),A=q.childAt(E+1),O=A&&A.getBoundingRect();if("horizontal"===F){var ae=M.width+(O?-O.x+M.x:0);(B=V+ae)>W||R.newline?(V=0,B=ae,P+=T+G,T=M.height):T=Math.max(T,M.height)}else{var oe=M.height+(O?-O.y+M.y:0);(ce=P+oe)>J||R.newline?(V+=T+G,P=0,ce=oe,T=M.width):T=Math.max(T,M.width)}R.newline||(R.x=V,R.y=P,R.markRedraw(),"horizontal"===F?V=B+G:P=ce+G)})}var j=he;function U(F,q,G){var W=q.width,J=q.height,V=(0,le.GM)(F.left,W),P=(0,le.GM)(F.top,J),T=(0,le.GM)(F.right,W),R=(0,le.GM)(F.bottom,J);return(isNaN(V)||isNaN(parseFloat(F.left)))&&(V=0),(isNaN(T)||isNaN(parseFloat(F.right)))&&(T=W),(isNaN(P)||isNaN(parseFloat(F.top)))&&(P=0),(isNaN(R)||isNaN(parseFloat(F.bottom)))&&(R=J),G=ye.MY(G||0),{width:Math.max(T-V-G[1]-G[3],0),height:Math.max(R-P-G[0]-G[2],0)}}function ee(F,q,G){G=ye.MY(G||0);var W=q.width,J=q.height,V=(0,le.GM)(F.left,W),P=(0,le.GM)(F.top,J),T=(0,le.GM)(F.right,W),R=(0,le.GM)(F.bottom,J),E=(0,le.GM)(F.width,W),M=(0,le.GM)(F.height,J),A=G[2]+G[0],O=G[1]+G[3],B=F.aspect;switch(isNaN(E)&&(E=W-T-O-V),isNaN(M)&&(M=J-R-A-P),null!=B&&(isNaN(E)&&isNaN(M)&&(B>W/J?E=.8*W:M=.8*J),isNaN(E)&&(E=B*M),isNaN(M)&&(M=E/B)),isNaN(V)&&(V=W-T-E-O),isNaN(P)&&(P=J-R-M-A),F.left||F.right){case"center":V=W/2-E/2-G[3];break;case"right":V=W-E-O}switch(F.top||F.bottom){case"middle":case"center":P=J/2-M/2-G[0];break;case"bottom":P=J-M-A}V=V||0,P=P||0,isNaN(E)&&(E=W-O-V-(T||0)),isNaN(M)&&(M=J-A-P-(R||0));var ce=new Se.Z(V+G[3],P+G[0],E,M);return ce.margin=G,ce}function $(F,q,G,W,J,V){var E,P=!J||!J.hv||J.hv[0],T=!J||!J.hv||J.hv[1],R=J&&J.boundingMode||"all";if((V=V||F).x=F.x,V.y=F.y,!P&&!T)return!1;if("raw"===R)E="group"===F.type?new Se.Z(0,0,+q.width||0,+q.height||0):F.getBoundingRect();else if(E=F.getBoundingRect(),F.needLocalTransform()){var M=F.getLocalTransform();(E=E.clone()).applyTransform(M)}var A=ee(ue.defaults({width:E.width,height:E.height},q),G,W),O=P?A.x-E.x:0,B=T?A.y-E.y:0;return"raw"===R?(V.x=O,V.y=B):(V.x+=O,V.y+=B),V===F&&F.markRedraw(),!0}function ie(F,q){return null!=F[Ce[q][0]]||null!=F[Ce[q][1]]&&null!=F[Ce[q][2]]}function K(F){var q=F.layoutMode||F.constructor.layoutMode;return ue.isObject(q)?q:q?{type:q}:null}function b(F,q,G){var W=G&&G.ignoreSize;!ue.isArray(W)&&(W=[W,W]);var J=P(Ce[0],0),V=P(Ce[1],1);function P(M,A){var O={},B=0,ce={},ae=0;if(ge(M,function(xe){ce[xe]=F[xe]}),ge(M,function(xe){T(q,xe)&&(O[xe]=ce[xe]=q[xe]),R(O,xe)&&B++,R(ce,xe)&&ae++}),W[A])return R(q,M[1])?ce[M[2]]=null:R(q,M[2])&&(ce[M[1]]=null),ce;if(2===ae||!B)return ce;if(B>=2)return O;for(var de=0;de<M.length;de++){var ne=M[de];if(!T(O,ne)&&T(F,ne)){O[ne]=F[ne];break}}return O}function T(M,A){return M.hasOwnProperty(A)}function R(M,A){return null!=M[A]&&"auto"!==M[A]}function E(M,A,O){ge(M,function(B){A[B]=O[B]})}E(Ce[0],F,J),E(Ce[1],F,V)}function Y(F){return Q({},F)}function Q(F,q){return q&&F&&ge(be,function(G){q.hasOwnProperty(G)&&(F[G]=q[G])}),F}ue.curry(he,"vertical"),ue.curry(he,"horizontal")},5577:(Vt,Qe,H)=>{H.d(Qe,{Sh:()=>he,ZK:()=>be,_y:()=>re});var Se={},le=typeof console<"u"&&console.warn&&console.log;function be(U,ee){!function ye(U,ee,$){if(le){if($){if(Se[ee])return;Se[ee]=!0}console[U]("[ECharts] "+ee)}}("warn",U,ee)}function he(U){}function re(U){throw new Error(U)}},1266:(Vt,Qe,H)=>{H.d(Qe,{C4:()=>X,C6:()=>ae,Cc:()=>he,Co:()=>re,HZ:()=>de,IL:()=>xe,O0:()=>T,P$:()=>ne,Td:()=>j,U5:()=>q,U9:()=>fe,XI:()=>E,Yf:()=>A,ab:()=>U,g0:()=>P,gO:()=>M,iP:()=>oe,kF:()=>Ce,lY:()=>V,pk:()=>we,pm:()=>B,pv:()=>ve,yu:()=>J,zH:()=>ce});var ue=H(628),Se=H(169),le=H(4785);function ye(Te,Ae,Ee){return(Ae-Te)*Ee+Te}var ge="series\0";function Ce(Te){return Te instanceof Array?Te:null==Te?[]:[Te]}function he(Te,Ae,Ee){if(Te){Te[Ae]=Te[Ae]||{},Te.emphasis=Te.emphasis||{},Te.emphasis[Ae]=Te.emphasis[Ae]||{};for(var Ve=0,He=Ee.length;Ve<He;Ve++){var We=Ee[Ve];!Te.emphasis[Ae].hasOwnProperty(We)&&Te[Ae].hasOwnProperty(We)&&(Te.emphasis[Ae][We]=Te[Ae][We])}}}var j=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function X(Te){return!(0,ue.isObject)(Te)||(0,ue.isArray)(Te)||Te instanceof Date?Te:Te.value}function re(Te){return(0,ue.isObject)(Te)&&!(Te instanceof Array)}function U(Te,Ae,Ee){var Ve="normalMerge"===Ee,He="replaceMerge"===Ee,We="replaceAll"===Ee;Te=Te||[],Ae=(Ae||[]).slice();var $e=(0,ue.createHashMap)();(0,ue.each)(Ae,function(St,_t){(0,ue.isObject)(St)||(Ae[_t]=null)});var ct=function ee(Te,Ae,Ee){var Ve=[];if("replaceAll"===Ee)return Ve;for(var He=0;He<Te.length;He++){var We=Te[He];We&&null!=We.id&&Ae.set(We.id,He),Ve.push({existing:"replaceMerge"===Ee||V(We)?null:We,newOption:null,keyInfo:null,brandNew:null})}return Ve}(Te,$e,Ee);return(Ve||He)&&function $(Te,Ae,Ee,Ve){(0,ue.each)(Ve,function(He,We){if(He&&null!=He.id){var $e=F(He.id),ct=Ee.get($e);if(null!=ct){var St=Te[ct];(0,ue.assert)(!St.newOption,'Duplicated option on id "'+$e+'".'),St.newOption=He,St.existing=Ae[ct],Ve[We]=null}}})}(ct,Te,$e,Ae),Ve&&function ie(Te,Ae){(0,ue.each)(Ae,function(Ee,Ve){if(Ee&&null!=Ee.name)for(var He=0;He<Te.length;He++){var We=Te[He].existing;if(!Te[He].newOption&&We&&(null==We.id||null==Ee.id)&&!V(Ee)&&!V(We)&&Q("name",We,Ee))return Te[He].newOption=Ee,void(Ae[Ve]=null)}})}(ct,Ae),Ve||He?function K(Te,Ae,Ee){(0,ue.each)(Ae,function(Ve){if(Ve){for(var He,We=0;(He=Te[We])&&(He.newOption||V(He.existing)||He.existing&&null!=Ve.id&&!Q("id",Ve,He.existing));)We++;He?(He.newOption=Ve,He.brandNew=Ee):Te.push({newOption:Ve,brandNew:Ee,existing:null,keyInfo:null}),We++}})}(ct,Ae,He):We&&function b(Te,Ae){(0,ue.each)(Ae,function(Ee){Te.push({newOption:Ee,brandNew:!0,existing:null,keyInfo:null})})}(ct,Ae),function Y(Te){var Ae=(0,ue.createHashMap)();(0,ue.each)(Te,function(Ee){var Ve=Ee.existing;Ve&&Ae.set(Ve.id,Ee)}),(0,ue.each)(Te,function(Ee){var Ve=Ee.newOption;(0,ue.assert)(!Ve||null==Ve.id||!Ae.get(Ve.id)||Ae.get(Ve.id)===Ee,"id duplicates: "+(Ve&&Ve.id)),Ve&&null!=Ve.id&&Ae.set(Ve.id,Ee),!Ee.keyInfo&&(Ee.keyInfo={})}),(0,ue.each)(Te,function(Ee,Ve){var He=Ee.existing,We=Ee.newOption,$e=Ee.keyInfo;if((0,ue.isObject)(We)){if($e.name=null!=We.name?F(We.name):He?He.name:ge+Ve,He)$e.id=F(He.id);else if(null!=We.id)$e.id=F(We.id);else{var ct=0;do{$e.id="\0"+$e.name+"\0"+ct++}while(Ae.get($e.id))}Ae.set($e.id,Ee)}})}(ct),ct}function Q(Te,Ae,Ee){var Ve=q(Ae[Te],null),He=q(Ee[Te],null);return null!=Ve&&null!=He&&Ve===He}function F(Te){return q(Te,"")}function q(Te,Ae){return null==Te?Ae:(0,ue.isString)(Te)?Te:(0,ue.isNumber)(Te)||(0,ue.isStringSafe)(Te)?Te+"":Ae}function J(Te){var Ae=Te.name;return!(!Ae||!Ae.indexOf(ge))}function V(Te){return Te&&null!=Te.id&&0===F(Te.id).indexOf("\0_ec_\0")}function P(Te){return"\0_ec_\0"+Te}function T(Te,Ae,Ee){(0,ue.each)(Te,function(Ve){var He=Ve.newOption;(0,ue.isObject)(He)&&(Ve.keyInfo.mainType=Ae,Ve.keyInfo.subType=function R(Te,Ae,Ee,Ve){return Ae.type?Ae.type:Ee?Ee.subType:Ve.determineSubType(Te,Ae)}(Ae,He,Ve.existing,Ee))})}function E(Te,Ae){var Ee={},Ve={};return He(Te||[],Ee),He(Ae||[],Ve,Ee),[We(Ee),We(Ve)];function He($e,ct,St){for(var _t=0,Ot=$e.length;_t<Ot;_t++){var Ht=q($e[_t].seriesId,null);if(null==Ht)return;for(var an=Ce($e[_t].dataIndex),hn=St&&St[Ht],Vn=0,sr=an.length;Vn<sr;Vn++){var $n=an[Vn];hn&&hn[$n]?hn[$n]=null:(ct[Ht]||(ct[Ht]={}))[$n]=1}}}function We($e,ct){var St=[];for(var _t in $e)if($e.hasOwnProperty(_t)&&null!=$e[_t])if(ct)St.push(+_t);else{var Ot=We($e[_t],!0);Ot.length&&St.push({seriesId:_t,dataIndex:Ot})}return St}}function M(Te,Ae){return null!=Ae.dataIndexInside?Ae.dataIndexInside:null!=Ae.dataIndex?(0,ue.isArray)(Ae.dataIndex)?(0,ue.map)(Ae.dataIndex,function(Ee){return Te.indexOfRawIndex(Ee)}):Te.indexOfRawIndex(Ae.dataIndex):null!=Ae.name?(0,ue.isArray)(Ae.name)?(0,ue.map)(Ae.name,function(Ee){return Te.indexOfName(Ee)}):Te.indexOfName(Ae.name):void 0}function A(){var Te="__ec_inner_"+O++;return function(Ae){return Ae[Te]||(Ae[Te]={})}}var O=(0,le.jj)();function B(Te,Ae,Ee){var Ve=ce(Ae,Ee),We=Ve.queryOptionMap,ct=Ve.others,St=Ee?Ee.defaultMainType:null;return!Ve.mainTypeSpecified&&St&&We.set(St,{}),We.each(function(_t,Ot){var Ht=de(Te,Ot,_t,{useDefault:St===Ot,enableAll:!Ee||null==Ee.enableAll||Ee.enableAll,enableNone:!Ee||null==Ee.enableNone||Ee.enableNone});ct[Ot+"Models"]=Ht.models,ct[Ot+"Model"]=Ht.models[0]}),ct}function ce(Te,Ae){var Ee;if((0,ue.isString)(Te)){var Ve={};Ve[Te+"Index"]=0,Ee=Ve}else Ee=Te;var He=(0,ue.createHashMap)(),We={},$e=!1;return(0,ue.each)(Ee,function(ct,St){if("dataIndex"!==St&&"dataIndexInside"!==St){var _t=St.match(/^(\w+)(Index|Id|Name)$/)||[],Ot=_t[1],Ht=(_t[2]||"").toLowerCase();!Ot||!Ht||Ae&&Ae.includeMainTypes&&(0,ue.indexOf)(Ae.includeMainTypes,Ot)<0||($e=$e||!!Ot,(He.get(Ot)||He.set(Ot,{}))[Ht]=ct)}else We[St]=ct}),{mainTypeSpecified:$e,queryOptionMap:He,others:We}}var ae={useDefault:!0,enableAll:!1,enableNone:!1},oe={useDefault:!1,enableAll:!0,enableNone:!0};function de(Te,Ae,Ee,Ve){Ve=Ve||ae;var He=Ee.index,We=Ee.id,$e=Ee.name,ct={models:null,specified:null!=He||null!=We||null!=$e};if(!ct.specified){var St=void 0;return ct.models=Ve.useDefault&&(St=Te.getComponent(Ae))?[St]:[],ct}return"none"===He||!1===He?((0,ue.assert)(Ve.enableNone,'`"none"` or `false` is not a valid value on index option.'),ct.models=[],ct):("all"===He&&((0,ue.assert)(Ve.enableAll,'`"all"` is not a valid value on index option.'),He=We=$e=null),ct.models=Te.queryComponents({mainType:Ae,index:He,id:We,name:$e}),ct)}function ne(Te,Ae,Ee){Te.setAttribute?Te.setAttribute(Ae,Ee):Te[Ae]=Ee}function xe(Te,Ae){return Te.getAttribute?Te.getAttribute(Ae):Te[Ae]}function fe(Te){return"auto"===Te?Se.Z.domSupported?"html":"richText":Te||"html"}function ve(Te,Ae){var Ee=(0,ue.createHashMap)(),Ve=[];return(0,ue.each)(Te,function(He){var We=Ae(He);(Ee.get(We)||(Ve.push(We),Ee.set(We,[]))).push(He)}),{keys:Ve,buckets:Ee}}function we(Te,Ae,Ee,Ve,He){var We=null==Ae||"auto"===Ae;if(null==Ve)return Ve;if((0,ue.isNumber)(Ve)){var $e=ye(Ee||0,Ve,He);return(0,le.NM)($e,We?Math.max((0,le.p8)(Ee||0),(0,le.p8)(Ve)):Ae)}if((0,ue.isString)(Ve))return He<1?Ee:Ve;for(var ct=[],St=Ee,_t=Ve,Ot=Math.max(St?St.length:0,_t.length),Ht=0;Ht<Ot;++Ht){var an=Te.getDimensionInfo(Ht);if(an&&"ordinal"===an.type)ct[Ht]=(He<1&&St?St:_t)[Ht];else{var hn=St&&St[Ht]?St[Ht]:0,Vn=_t[Ht];$e=ye(hn,Vn,He),ct[Ht]=(0,le.NM)($e,We?Math.max((0,le.p8)(hn),(0,le.p8)(Vn)):Ae)}}return ct}},4785:(Vt,Qe,H)=>{H.d(Qe,{FK:()=>V,GM:()=>be,HD:()=>ee,M9:()=>re,NM:()=>Ce,NU:()=>ge,S$:()=>$,VR:()=>W,Xd:()=>F,YM:()=>ie,ZB:()=>X,dt:()=>he,eJ:()=>U,jj:()=>T,kE:()=>P,kx:()=>G,mW:()=>b,nR:()=>J,nl:()=>E,p8:()=>j,sG:()=>Q,wW:()=>K,xW:()=>q});var ue=H(628);function ge(M,A,O,B){var ce=A[0],ae=A[1],oe=O[0],de=O[1],ne=ae-ce,xe=de-oe;if(0===ne)return 0===xe?oe:(oe+de)/2;if(B)if(ne>0){if(M<=ce)return oe;if(M>=ae)return de}else{if(M>=ce)return oe;if(M<=ae)return de}else{if(M===ce)return oe;if(M===ae)return de}return(M-ce)/ne*xe+oe}function be(M,A){switch(M){case"center":case"middle":M="50%";break;case"left":case"top":M="0%";break;case"right":case"bottom":M="100%"}return ue.isString(M)?function ye(M){return M.replace(/^\s+|\s+$/g,"")}(M).match(/%$/)?parseFloat(M)/100*A:parseFloat(M):null==M?NaN:+M}function Ce(M,A,O){return null==A&&(A=10),A=Math.min(Math.max(0,A),20),M=(+M).toFixed(A),O?M:+M}function he(M){return M.sort(function(A,O){return A-O}),M}function j(M){if(M=+M,isNaN(M))return 0;if(M>1e-14)for(var A=1,O=0;O<15;O++,A*=10)if(Math.round(M*A)/A===M)return O;return X(M)}function X(M){var A=M.toString().toLowerCase(),O=A.indexOf("e"),B=O>0?+A.slice(O+1):0,ce=O>0?O:A.length,ae=A.indexOf(".");return Math.max(0,(ae<0?0:ce-1-ae)-B)}function re(M,A){var O=Math.log,B=Math.LN10,ce=Math.floor(O(M[1]-M[0])/B),ae=Math.round(O(Math.abs(A[1]-A[0]))/B),oe=Math.min(Math.max(-ce+ae,0),20);return isFinite(oe)?oe:20}function U(M,A,O){return M[A]&&ee(M,O)[A]||0}function ee(M,A){var O=ue.reduce(M,function(Te,Ae){return Te+(isNaN(Ae)?0:Ae)},0);if(0===O)return[];for(var B=Math.pow(10,A),ce=ue.map(M,function(Te){return(isNaN(Te)?0:Te)/O*B*100}),ae=100*B,oe=ue.map(ce,function(Te){return Math.floor(Te)}),de=ue.reduce(oe,function(Te,Ae){return Te+Ae},0),ne=ue.map(ce,function(Te,Ae){return Te-oe[Ae]});de<ae;){for(var xe=Number.NEGATIVE_INFINITY,fe=null,ve=0,we=ne.length;ve<we;++ve)ne[ve]>xe&&(xe=ne[ve],fe=ve);++oe[fe],ne[fe]=0,++de}return ue.map(oe,function(Te){return Te/B})}function $(M,A){var O=Math.max(j(M),j(A)),B=M+A;return O>20?B:Ce(B,O)}var ie=9007199254740991;function K(M){var A=2*Math.PI;return(M%A+A)%A}function b(M){return M>-1e-4&&M<1e-4}var Y=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Q(M){if(M instanceof Date)return M;if(ue.isString(M)){var A=Y.exec(M);if(!A)return new Date(NaN);if(A[8]){var O=+A[4]||0;return"Z"!==A[8].toUpperCase()&&(O-=+A[8].slice(0,3)),new Date(Date.UTC(+A[1],+(A[2]||1)-1,+A[3]||1,O,+(A[5]||0),+A[6]||0,A[7]?+A[7].substring(0,3):0))}return new Date(+A[1],+(A[2]||1)-1,+A[3]||1,+A[4]||0,+(A[5]||0),+A[6]||0,A[7]?+A[7].substring(0,3):0)}return null==M?new Date(NaN):new Date(Math.round(M))}function F(M){return Math.pow(10,q(M))}function q(M){if(0===M)return 0;var A=Math.floor(Math.log(M)/Math.LN10);return M/Math.pow(10,A)>=10&&A++,A}function G(M,A){var O=q(M),B=Math.pow(10,O),ce=M/B;return M=(A?ce<1.5?1:ce<2.5?2:ce<4?3:ce<7?5:10:ce<1?1:ce<2?2:ce<3?3:ce<5?5:10)*B,O>=-20?+M.toFixed(O<0?-O:0):M}function W(M,A){var O=(M.length-1)*A+1,B=Math.floor(O),ce=+M[B-1],ae=O-B;return ae?ce+ae*(M[B]-ce):ce}function J(M){M.sort(function(ne,xe){return de(ne,xe,0)?-1:1});for(var A=-1/0,O=1,B=0;B<M.length;){for(var ce=M[B].interval,ae=M[B].close,oe=0;oe<2;oe++)ce[oe]<=A&&(ce[oe]=A,ae[oe]=oe?1:1-O),A=ce[oe],O=ae[oe];ce[0]===ce[1]&&ae[0]*ae[1]!=1?M.splice(B,1):B++}return M;function de(ne,xe,fe){return ne.interval[fe]<xe.interval[fe]||ne.interval[fe]===xe.interval[fe]&&(ne.close[fe]-xe.close[fe]==(fe?-1:1)||!fe&&de(ne,xe,1))}}function V(M){var A=parseFloat(M);return A==M&&(0!==A||!ue.isString(M)||M.indexOf("x")<=0)?A:NaN}function P(M){return!isNaN(V(M))}function T(){return Math.round(9*Math.random())}function R(M,A){return 0===A?M:R(A,M%A)}function E(M,A){return null==M?A:null==A?M:M*A/R(M,A)}},6869:(Vt,Qe,H)=>{H.d(Qe,{$l:()=>Vn,Av:()=>fn,C5:()=>er,CX:()=>U,Gl:()=>ae,Hg:()=>F,Ib:()=>jn,JQ:()=>q,Ki:()=>Y,L1:()=>$,MA:()=>we,Mh:()=>Ve,Nj:()=>Rt,RW:()=>pr,SJ:()=>ct,SX:()=>He,T5:()=>_t,UL:()=>an,VP:()=>We,WO:()=>jt,XX:()=>$e,aG:()=>rt,ci:()=>gr,e9:()=>st,fD:()=>Ee,iK:()=>G,k5:()=>On,oJ:()=>hn,og:()=>$n,qc:()=>ie,th:()=>fr,vF:()=>Kt,wU:()=>ee,xp:()=>ot,xr:()=>sr,yx:()=>Q,zI:()=>Ht,zr:()=>K});var ue=H(7148),Se=H(628),le=H(7282),ye=H(312),ge=H(1266),be=H(126),Ce=1,he={},j=(0,ge.Yf)(),X=(0,ge.Yf)(),U=1,ee=2,$=["emphasis","blur","select"],ie=["normal","emphasis","blur","select"],K=10,Y="highlight",Q="downplay",F="select",q="unselect",G="toggleSelect";function W(je){return null!=je&&"none"!==je}var J=new ue.ZP(100);function V(je){if((0,Se.isString)(je)){var gt=J.get(je);return gt||(gt=ye.lift(je,-.1),J.put(je,gt)),gt}if((0,Se.isGradientObject)(je)){var ht=(0,Se.extend)({},je);return ht.colorStops=(0,Se.map)(je.colorStops,function(Pt){return{offset:Pt.offset,color:ye.lift(Pt.color,-.1)}}),ht}return je}function P(je,gt,ht){je.onHoverStateChange&&(je.hoverState||0)!==ht&&je.onHoverStateChange(gt),je.hoverState=ht}function T(je){P(je,"emphasis",ee)}function R(je){je.hoverState===ee&&P(je,"normal",0)}function E(je){P(je,"blur",U)}function M(je){je.hoverState===U&&P(je,"normal",0)}function A(je){je.selected=!0}function O(je){je.selected=!1}function B(je,gt,ht){gt(je,ht)}function ce(je,gt,ht){B(je,gt,ht),je.isGroup&&je.traverse(function(Pt){B(Pt,gt,ht)})}function ae(je,gt){switch(gt){case"emphasis":je.hoverState=ee;break;case"normal":je.hoverState=0;break;case"blur":je.hoverState=U;break;case"select":je.selected=!0}}function ve(je,gt){var ht=this.states[je];if(this.style){if("emphasis"===je)return function ne(je,gt,ht,Pt){var tn=ht&&(0,Se.indexOf)(ht,"select")>=0,Pn=!1;if(je instanceof be.ZP){var Tn=j(je),lr=tn&&Tn.selectFill||Tn.normalFill,yi=tn&&Tn.selectStroke||Tn.normalStroke;if(W(lr)||W(yi)){var cr=(Pt=Pt||{}).style||{};"inherit"===cr.fill?(Pn=!0,Pt=(0,Se.extend)({},Pt),(cr=(0,Se.extend)({},cr)).fill=lr):!W(cr.fill)&&W(lr)?(Pn=!0,Pt=(0,Se.extend)({},Pt),(cr=(0,Se.extend)({},cr)).fill=V(lr)):!W(cr.stroke)&&W(yi)&&(Pn||(Pt=(0,Se.extend)({},Pt),cr=(0,Se.extend)({},cr)),cr.stroke=V(yi)),Pt.style=cr}}return Pt&&null==Pt.z2&&(Pn||(Pt=(0,Se.extend)({},Pt)),Pt.z2=je.z2+(je.z2EmphasisLift??K)),Pt}(this,0,gt,ht);if("blur"===je)return function fe(je,gt,ht){var Pt=(0,Se.indexOf)(je.currentStates,gt)>=0,tn=je.style.opacity,Pn=Pt?null:function de(je,gt,ht,Pt){for(var tn=je.style,Pn={},Tn=0;Tn<gt.length;Tn++){var lr=gt[Tn];Pn[lr]=tn[lr]??(Pt&&Pt[lr])}for(Tn=0;Tn<je.animators.length;Tn++){var cr=je.animators[Tn];cr.__fromStateTransition&&cr.__fromStateTransition.indexOf(ht)<0&&"style"===cr.targetName&&cr.saveTo(Pn,gt)}return Pn}(je,["opacity"],gt,{opacity:1}),Tn=(ht=ht||{}).style||{};return null==Tn.opacity&&(ht=(0,Se.extend)({},ht),Tn=(0,Se.extend)({opacity:Pt?tn:.1*Pn.opacity},Tn),ht.style=Tn),ht}(this,je,ht);if("select"===je)return function xe(je,gt,ht){return ht&&null==ht.z2&&((ht=(0,Se.extend)({},ht)).z2=je.z2+(je.z2SelectLift??9)),ht}(this,0,ht)}return ht}function we(je){je.stateProxy=ve;var gt=je.getTextContent(),ht=je.getTextGuideLine();gt&&(gt.stateProxy=ve),ht&&(ht.stateProxy=ve)}function Te(je,gt){!St(je,gt)&&!je.__highByOuter&&ce(je,T)}function Ae(je,gt){!St(je,gt)&&!je.__highByOuter&&ce(je,R)}function Ee(je,gt){je.__highByOuter|=1<<(gt||0),ce(je,T)}function Ve(je,gt){!(je.__highByOuter&=~(1<<(gt||0)))&&ce(je,R)}function He(je){ce(je,E)}function We(je){ce(je,M)}function $e(je){ce(je,A)}function ct(je){ce(je,O)}function St(je,gt){return je.__highDownSilentOnTouch&&gt.zrByTouch}function _t(je){var gt=je.getModel(),ht=[],Pt=[];gt.eachComponent(function(tn,Pn){var Tn=X(Pn),lr="series"===tn,yi=lr?je.getViewOfSeriesModel(Pn):je.getViewOfComponentModel(Pn);!lr&&Pt.push(yi),Tn.isBlured&&(yi.group.traverse(function(cr){M(cr)}),lr&&ht.push(Pn)),Tn.isBlured=!1}),(0,Se.each)(Pt,function(tn){tn&&tn.toggleBlurSeries&&tn.toggleBlurSeries(ht,!1,gt)})}function Ot(je,gt,ht,Pt){var tn=Pt.getModel();function Pn(cr,ta){for(var ra=0;ra<ta.length;ra++){var Ql=cr.getItemGraphicEl(ta[ra]);Ql&&We(Ql)}}if(ht=ht||"coordinateSystem",null!=je&&gt&&"none"!==gt){var Tn=tn.getSeriesByIndex(je),lr=Tn.coordinateSystem;lr&&lr.master&&(lr=lr.master);var yi=[];tn.eachSeries(function(cr){var ta=Tn===cr,ra=cr.coordinateSystem;if(ra&&ra.master&&(ra=ra.master),!("series"===ht&&!ta||"coordinateSystem"===ht&&!(ra&&lr?ra===lr:ta)||"series"===gt&&ta)){if(Pt.getViewOfSeriesModel(cr).group.traverse(function(ua){E(ua)}),(0,Se.isArrayLike)(gt))Pn(cr.getData(),gt);else if((0,Se.isObject)(gt))for(var Sa=(0,Se.keys)(gt),Ja=0;Ja<Sa.length;Ja++)Pn(cr.getData(Sa[Ja]),gt[Sa[Ja]]);yi.push(cr),X(cr).isBlured=!0}}),tn.eachComponent(function(cr,ta){if("series"!==cr){var ra=Pt.getViewOfComponentModel(ta);ra&&ra.toggleBlurSeries&&ra.toggleBlurSeries(yi,!0,tn)}})}}function Ht(je,gt,ht){if(null!=je&&null!=gt){var Pt=ht.getModel().getComponent(je,gt);if(Pt){X(Pt).isBlured=!0;var tn=ht.getViewOfComponentModel(Pt);!tn||!tn.focusBlurEnabled||tn.group.traverse(function(Pn){E(Pn)})}}}function an(je,gt,ht){var Pt=je.seriesIndex,tn=je.getData(gt.dataType);if(tn){var Pn=(0,ge.gO)(tn,gt);Pn=((0,Se.isArray)(Pn)?Pn[0]:Pn)||0;var Tn=tn.getItemGraphicEl(Pn);if(!Tn)for(var lr=tn.count(),yi=0;!Tn&&yi<lr;)Tn=tn.getItemGraphicEl(yi++);if(Tn){var cr=(0,le.A)(Tn);Ot(Pt,cr.focus,cr.blurScope,ht)}else{var ta=je.get(["emphasis","focus"]),ra=je.get(["emphasis","blurScope"]);null!=ta&&Ot(Pt,ta,ra,ht)}}}function hn(je,gt,ht,Pt){var tn={focusSelf:!1,dispatchers:null};if(null==je||"series"===je||null==gt||null==ht)return tn;var Pn=Pt.getModel().getComponent(je,gt);if(!Pn)return tn;var Tn=Pt.getViewOfComponentModel(Pn);if(!Tn||!Tn.findHighDownDispatchers)return tn;for(var yi,lr=Tn.findHighDownDispatchers(ht),cr=0;cr<lr.length;cr++)if("self"===(0,le.A)(lr[cr]).focus){yi=!0;break}return{focusSelf:yi,dispatchers:lr}}function Vn(je,gt,ht){var Pt=(0,le.A)(je),tn=hn(Pt.componentMainType,Pt.componentIndex,Pt.componentHighDownName,ht),Pn=tn.dispatchers;Pn?(tn.focusSelf&&Ht(Pt.componentMainType,Pt.componentIndex,ht),(0,Se.each)(Pn,function(lr){return Te(lr,gt)})):(Ot(Pt.seriesIndex,Pt.focus,Pt.blurScope,ht),"self"===Pt.focus&&Ht(Pt.componentMainType,Pt.componentIndex,ht),Te(je,gt))}function sr(je,gt,ht){_t(ht);var Pt=(0,le.A)(je),tn=hn(Pt.componentMainType,Pt.componentIndex,Pt.componentHighDownName,ht).dispatchers;tn?(0,Se.each)(tn,function(Pn){return Ae(Pn,gt)}):Ae(je,gt)}function $n(je,gt,ht){if(rt(gt)){var Pt=gt.dataType,tn=je.getData(Pt),Pn=(0,ge.gO)(tn,gt);(0,Se.isArray)(Pn)||(Pn=[Pn]),je[gt.type===G?"toggleSelect":gt.type===F?"select":"unselect"](Pn,Pt)}}function gr(je){var gt=je.getAllData();(0,Se.each)(gt,function(ht){var tn=ht.type;ht.data.eachItemGraphicEl(function(Pn,Tn){je.isSelected(Tn,tn)?$e(Pn):ct(Pn)})})}function er(je){var gt=[];return je.eachSeries(function(ht){var Pt=ht.getAllData();(0,Se.each)(Pt,function(tn){var Tn=tn.type,lr=ht.getSelectedDataIndices();if(lr.length>0){var yi={dataIndex:lr,seriesIndex:ht.seriesIndex};null!=Tn&&(yi.dataType=Tn),gt.push(yi)}})}),gt}function Kt(je,gt,ht){Rt(je,!0),ce(je,we),jn(je,gt,ht)}function On(je,gt,ht,Pt){Pt?function cn(je){Rt(je,!1)}(je):Kt(je,gt,ht)}function jn(je,gt,ht){var Pt=(0,le.A)(je);null!=gt?(Pt.focus=gt,Pt.blurScope=ht):Pt.focus&&(Pt.focus=null)}var et=["emphasis","blur","select"],Tt={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function jt(je,gt,ht,Pt){ht=ht||"itemStyle";for(var tn=0;tn<et.length;tn++){var Pn=et[tn],Tn=gt.getModel([Pn,ht]);je.ensureState(Pn).style=Pt?Pt(Tn):Tn[Tt[ht]]()}}function Rt(je,gt){var ht=!1===gt,Pt=je;je.highDownSilentOnTouch&&(Pt.__highDownSilentOnTouch=je.highDownSilentOnTouch),(!ht||Pt.__highDownDispatcher)&&(Pt.__highByOuter=Pt.__highByOuter||0,Pt.__highDownDispatcher=!ht)}function fn(je){return!(!je||!je.__highDownDispatcher)}function fr(je,gt,ht){var Pt=(0,le.A)(je);Pt.componentMainType=gt.mainType,Pt.componentIndex=gt.componentIndex,Pt.componentHighDownName=ht}function pr(je){var gt=he[je];return null==gt&&Ce<=32&&(gt=he[je]=Ce++),gt}function rt(je){var gt=je.type;return gt===F||gt===q||gt===G}function ot(je){var gt=je.type;return gt===Y||gt===Q}function st(je){var gt=j(je);gt.normalFill=je.style.fill,gt.normalStroke=je.style.stroke;var ht=je.states.select||{};gt.selectFill=ht.style&&ht.style.fill||null,gt.selectStroke=ht.style&&ht.style.stroke||null}},4550:(Vt,Qe,H)=>{H.d(Qe,{Cq:()=>q,Pw:()=>K,th:()=>Q,zp:()=>F});var ue=H(628),Se=H(126),le=H(4110),ye=H(3160),ge=H(9359),be=H(2429),Ce=H(7021),he=H(1790),j=H(4785),X=Se.ZP.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(G,W){var J=W.cx,V=W.cy,P=W.width/2,T=W.height/2;G.moveTo(J,V-T),G.lineTo(J+P,V+T),G.lineTo(J-P,V+T),G.closePath()}}),re=Se.ZP.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(G,W){var J=W.cx,V=W.cy,P=W.width/2,T=W.height/2;G.moveTo(J,V-T),G.lineTo(J+P,V),G.lineTo(J,V+T),G.lineTo(J-P,V),G.closePath()}}),U=Se.ZP.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(G,W){var J=W.x,V=W.y,P=W.width/5*3,T=Math.max(P,W.height),R=P/2,E=R*R/(T-R),M=V-T+R+E,A=Math.asin(E/R),O=Math.cos(A)*R,B=Math.sin(A),ce=Math.cos(A),ae=.6*R,oe=.7*R;G.moveTo(J-O,M+E),G.arc(J,M,R,Math.PI-A,2*Math.PI+A),G.bezierCurveTo(J+O-B*ae,M+E+ce*ae,J,V-oe,J,V),G.bezierCurveTo(J,V-oe,J-O+B*ae,M+E+ce*ae,J-O,M+E),G.closePath()}}),ee=Se.ZP.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(G,W){var J=W.height,P=W.x,T=W.y,R=W.width/3*2;G.moveTo(P,T),G.lineTo(P+R,T+J),G.lineTo(P,T+J/4*3),G.lineTo(P-R,T+J),G.lineTo(P,T),G.closePath()}}),ie={line:function(G,W,J,V,P){P.x1=G,P.y1=W+V/2,P.x2=G+J,P.y2=W+V/2},rect:function(G,W,J,V,P){P.x=G,P.y=W,P.width=J,P.height=V},roundRect:function(G,W,J,V,P){P.x=G,P.y=W,P.width=J,P.height=V,P.r=Math.min(J,V)/4},square:function(G,W,J,V,P){var T=Math.min(J,V);P.x=G,P.y=W,P.width=T,P.height=T},circle:function(G,W,J,V,P){P.cx=G+J/2,P.cy=W+V/2,P.r=Math.min(J,V)/2},diamond:function(G,W,J,V,P){P.cx=G+J/2,P.cy=W+V/2,P.width=J,P.height=V},pin:function(G,W,J,V,P){P.x=G+J/2,P.y=W+V/2,P.width=J,P.height=V},arrow:function(G,W,J,V,P){P.x=G+J/2,P.y=W+V/2,P.width=J,P.height=V},triangle:function(G,W,J,V,P){P.cx=G+J/2,P.cy=W+V/2,P.width=J,P.height=V}},K={};(0,ue.each)({line:le.Z,rect:ye.Z,roundRect:ye.Z,square:ye.Z,circle:ge.Z,diamond:re,pin:U,arrow:ee,triangle:X},function(G,W){K[W]=new G});var b=Se.ZP.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(G,W,J){var V=(0,he.wI)(G,W,J),P=this.shape;return P&&"pin"===P.symbolType&&"inside"===W.position&&(V.y=J.y+.4*J.height),V},buildPath:function(G,W,J){var V=W.symbolType;if("none"!==V){var P=K[V];P||(P=K[V="rect"]),ie[V](W.x,W.y,W.width,W.height,P.shape),P.buildPath(G,P.shape,J)}}});function Y(G,W){if("image"!==this.type){var J=this.style;this.__isEmptyBrush?(J.stroke=G,J.fill=W||"#fff",J.lineWidth=2):"line"===this.shape.symbolType?J.stroke=G:J.fill=G,this.markRedraw()}}function Q(G,W,J,V,P,T,R){var M,E=0===G.indexOf("empty");return E&&(G=G.substr(5,1).toLowerCase()+G.substr(6)),(M=0===G.indexOf("image://")?be.makeImage(G.slice(8),new Ce.Z(W,J,V,P),R?"center":"cover"):0===G.indexOf("path://")?be.makePath(G.slice(7),{},new Ce.Z(W,J,V,P),R?"center":"cover"):new b({shape:{symbolType:G,x:W,y:J,width:V,height:P}})).__isEmptyBrush=E,M.setColor=Y,T&&M.setColor(T),M}function F(G){return(0,ue.isArray)(G)||(G=[+G,+G]),[G[0]||0,G[1]||0]}function q(G,W){if(null!=G)return(0,ue.isArray)(G)||(G=[G,G]),[(0,j.GM)(G[0],W[0])||0,(0,j.GM)((0,ue.retrieve2)(G[1],G[0]),W[1])||0]}},357:(Vt,Qe,H)=>{H.d(Qe,{P2:()=>ye,T9:()=>ge,ZH:()=>be});var ue="\0__throttleOriginMethod",Se="\0__throttleRate",le="\0__throttleType";function ye(Ce,he,j){var X,$,ie,K,b,re=0,U=0,ee=null;function Y(){U=(new Date).getTime(),ee=null,Ce.apply(ie,K||[])}he=he||0;var Q=function(){for(var F=[],q=0;q<arguments.length;q++)F[q]=arguments[q];X=(new Date).getTime(),ie=this,K=F;var G=b||he,W=b||j;b=null,$=X-(W?re:U)-G,clearTimeout(ee),W?ee=setTimeout(Y,G):$>=0?Y():ee=setTimeout(Y,-$),re=X};return Q.clear=function(){ee&&(clearTimeout(ee),ee=null)},Q.debounceNextCall=function(F){b=F},Q}function ge(Ce,he,j,X){var re=Ce[he];if(re){var U=re[ue]||re;if(re[Se]!==j||re[le]!==X){if(null==j||!X)return Ce[he]=U;(re=Ce[he]=ye(U,j,"debounce"===X))[ue]=U,re[le]=X,re[Se]=j}return re}}function be(Ce,he){var j=Ce[he];j&&j[ue]&&(j.clear&&j.clear(),Ce[he]=j[ue])}},999:(Vt,Qe,H)=>{H.d(Qe,{$K:()=>b,CW:()=>J,En:()=>B,FW:()=>$,MV:()=>R,P5:()=>j,RZ:()=>E,Tj:()=>K,V8:()=>U,WT:()=>ge,WU:()=>Q,Wp:()=>P,cb:()=>oe,dV:()=>Ce,eN:()=>ce,f5:()=>O,fn:()=>T,k7:()=>F,q5:()=>G,rM:()=>ae,s2:()=>he,sx:()=>W,vh:()=>A,vk:()=>ie,xC:()=>Y,xL:()=>M,xz:()=>V,yR:()=>be});var ue=H(628),Se=H(4785),le=H(5514),ye=H(1725),ge=1e3,be=60*ge,Ce=60*be,he=24*Ce,j=365*he,X={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},re="{yyyy}-{MM}-{dd}",U={year:"{yyyy}",month:"{yyyy}-{MM}",day:re,hour:re+" "+X.hour,minute:re+" "+X.minute,second:re+" "+X.second,millisecond:X.none},ee=["year","month","day","hour","minute","second","millisecond"],$=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function ie(de,ne){return"0000".substr(0,ne-(de+="").length)+de}function K(de){switch(de){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return de}}function b(de){return de===K(de)}function Y(de){switch(de){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function Q(de,ne,xe,fe){var ve=Se.sG(de),we=ve[W(xe)](),Te=ve[J(xe)]()+1,Ae=Math.floor((Te-1)/3)+1,Ee=ve[V(xe)](),Ve=ve["get"+(xe?"UTC":"")+"Day"](),He=ve[P(xe)](),We=(He-1)%12+1,$e=ve[T(xe)](),ct=ve[R(xe)](),St=ve[E(xe)](),Ot=(fe instanceof ye.Z?fe:(0,le.G8)(fe||le.sO)||(0,le.Li)()).getModel("time"),Ht=Ot.get("month"),an=Ot.get("monthAbbr"),hn=Ot.get("dayOfWeek"),Vn=Ot.get("dayOfWeekAbbr");return(ne||"").replace(/{yyyy}/g,we+"").replace(/{yy}/g,we%100+"").replace(/{Q}/g,Ae+"").replace(/{MMMM}/g,Ht[Te-1]).replace(/{MMM}/g,an[Te-1]).replace(/{MM}/g,ie(Te,2)).replace(/{M}/g,Te+"").replace(/{dd}/g,ie(Ee,2)).replace(/{d}/g,Ee+"").replace(/{eeee}/g,hn[Ve]).replace(/{ee}/g,Vn[Ve]).replace(/{e}/g,Ve+"").replace(/{HH}/g,ie(He,2)).replace(/{H}/g,He+"").replace(/{hh}/g,ie(We+"",2)).replace(/{h}/g,We+"").replace(/{mm}/g,ie($e,2)).replace(/{m}/g,$e+"").replace(/{ss}/g,ie(ct,2)).replace(/{s}/g,ct+"").replace(/{SSS}/g,ie(St,3)).replace(/{S}/g,St+"")}function F(de,ne,xe,fe,ve){var we=null;if(ue.isString(xe))we=xe;else if(ue.isFunction(xe))we=xe(de.value,ne,{level:de.level});else{var Te=ue.extend({},X);if(de.level>0)for(var Ae=0;Ae<ee.length;++Ae)Te[ee[Ae]]="{primary|"+Te[ee[Ae]]+"}";var Ee=xe?!1===xe.inherit?xe:ue.defaults(xe,Te):Te,Ve=q(de.value,ve);if(Ee[Ve])we=Ee[Ve];else if(Ee.inherit){for(Ae=$.indexOf(Ve)-1;Ae>=0;--Ae)if(Ee[Ve]){we=Ee[Ve];break}we=we||Te.none}if(ue.isArray(we)){var We=null==de.level?0:de.level>=0?de.level:we.length+de.level;we=we[We=Math.min(We,we.length-1)]}}return Q(new Date(de.value),we,ve,fe)}function q(de,ne){var xe=Se.sG(de),fe=xe[J(ne)]()+1,ve=xe[V(ne)](),we=xe[P(ne)](),Te=xe[T(ne)](),Ae=xe[R(ne)](),Ve=0===xe[E(ne)](),He=Ve&&0===Ae,We=He&&0===Te,$e=We&&0===we,ct=$e&&1===ve;return ct&&1===fe?"year":ct?"month":$e?"day":We?"hour":He?"minute":Ve?"second":"millisecond"}function G(de,ne,xe){var fe=ue.isNumber(de)?Se.sG(de):de;switch(ne=ne||q(de,xe)){case"year":return fe[W(xe)]();case"half-year":return fe[J(xe)]()>=6?1:0;case"quarter":return Math.floor((fe[J(xe)]()+1)/4);case"month":return fe[J(xe)]();case"day":return fe[V(xe)]();case"half-day":return fe[P(xe)]()/24;case"hour":return fe[P(xe)]();case"minute":return fe[T(xe)]();case"second":return fe[R(xe)]();case"millisecond":return fe[E(xe)]()}}function W(de){return de?"getUTCFullYear":"getFullYear"}function J(de){return de?"getUTCMonth":"getMonth"}function V(de){return de?"getUTCDate":"getDate"}function P(de){return de?"getUTCHours":"getHours"}function T(de){return de?"getUTCMinutes":"getMinutes"}function R(de){return de?"getUTCSeconds":"getSeconds"}function E(de){return de?"getUTCMilliseconds":"getMilliseconds"}function M(de){return de?"setUTCFullYear":"setFullYear"}function A(de){return de?"setUTCMonth":"setMonth"}function O(de){return de?"setUTCDate":"setDate"}function B(de){return de?"setUTCHours":"setHours"}function ce(de){return de?"setUTCMinutes":"setMinutes"}function ae(de){return de?"setUTCSeconds":"setSeconds"}function oe(de){return de?"setUTCMilliseconds":"setMilliseconds"}},4367:(Vt,Qe,H)=>{H.d(Qe,{J5:()=>Ce,RA:()=>he,Wc:()=>X,XD:()=>ye,cy:()=>le,f7:()=>Se,fY:()=>j,hL:()=>be,qb:()=>ge});var Se=(0,H(628).createHashMap)(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),le="original",ye="arrayRows",ge="objectRows",be="keyedColumns",Ce="typedArray",he="unknown",j="column",X="row"},3133:(Vt,Qe,H)=>{H.d(Qe,{o:()=>ye});var ue=H(628),Se=typeof Float32Array<"u",le=Se?Float32Array:Array;function ye(ge){return(0,ue.isArray)(ge)?Se?new Float32Array(ge):ge:new le(ge)}},1005:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>Y});var ue=H(628),Se=H(8539),le=H(2015),ye=H(1087),ge=H(1266),be=H(6869),Ce=H(6861),he=H(5103),j=H(2429),X=ge.Yf(),re=(0,he.Z)(),U=function(){function Q(){this.group=new Se.Z,this.uid=le.Kr("viewChart"),this.renderTask=(0,Ce.v)({plan:ie,reset:K}),this.renderTask.context={view:this}}return Q.prototype.init=function(F,q){},Q.prototype.render=function(F,q,G,W){},Q.prototype.highlight=function(F,q,G,W){var J=F.getData(W&&W.dataType);!J||$(J,W,"emphasis")},Q.prototype.downplay=function(F,q,G,W){var J=F.getData(W&&W.dataType);!J||$(J,W,"normal")},Q.prototype.remove=function(F,q){this.group.removeAll()},Q.prototype.dispose=function(F,q){},Q.prototype.updateView=function(F,q,G,W){this.render(F,q,G,W)},Q.prototype.updateLayout=function(F,q,G,W){this.render(F,q,G,W)},Q.prototype.updateVisual=function(F,q,G,W){this.render(F,q,G,W)},Q.prototype.eachRendered=function(F){(0,j.traverseElements)(this.group,F)},Q.markUpdateMethod=function(F,q){X(F).updateMethod=q},Q.protoInitialize=void(Q.prototype.type="chart"),Q}();function ee(Q,F,q){Q&&(0,be.Av)(Q)&&("emphasis"===F?be.fD:be.Mh)(Q,q)}function $(Q,F,q){var G=ge.gO(Q,F),W=F&&null!=F.highlightKey?(0,be.RW)(F.highlightKey):null;null!=G?(0,ue.each)(ge.kF(G),function(J){ee(Q.getItemGraphicEl(J),q,W)}):Q.eachItemGraphicEl(function(J){ee(J,q,W)})}function ie(Q){return re(Q.model)}function K(Q){var F=Q.model,q=Q.ecModel,G=Q.api,W=Q.payload,J=F.pipelineContext.progressiveRender,V=Q.view,P=W&&X(W).updateMethod,T=J?"incrementalPrepareRender":P&&V[P]?P:"render";return"render"!==T&&V[T](F,q,G,W),b[T]}ye.dm(U,["dispose"]),ye.au(U);var b={incrementalPrepareRender:{progress:function(Q,F){F.view.incrementalRender(Q,F.model,F.ecModel,F.api,F.payload)}},render:{forceFirstProgress:!0,progress:function(Q,F){F.view.render(F.model,F.ecModel,F.api,F.payload)}}};const Y=U},9899:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>ge});var ue=H(8539),Se=H(2015),le=H(1087),ye=function(){function be(){this.group=new ue.Z,this.uid=Se.Kr("viewComponent")}return be.prototype.init=function(Ce,he){},be.prototype.render=function(Ce,he,j,X){},be.prototype.dispose=function(Ce,he){},be.prototype.updateView=function(Ce,he,j,X){},be.prototype.updateLayout=function(Ce,he,j,X){},be.prototype.updateVisual=function(Ce,he,j,X){},be.prototype.toggleBlurSeries=function(Ce,he,j){},be.prototype.eachRendered=function(Ce){var he=this.group;he&&he.traverse(Ce)},be}();le.dm(ye),le.au(ye);const ge=ye},5018:(Vt,Qe,H)=>{function ue(ye,ge,be){switch(be){case"color":return ye.getItemVisual(ge,"style")[ye.getVisual("drawType")];case"opacity":return ye.getItemVisual(ge,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return ye.getItemVisual(ge,be)}}function Se(ye,ge){switch(ge){case"color":return ye.getVisual("style")[ye.getVisual("drawType")];case"opacity":return ye.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return ye.getVisual(ge)}}function le(ye,ge,be,Ce){switch(be){case"color":ye.ensureUniqueItemVisual(ge,"style")[ye.getVisual("drawType")]=Ce,ye.setItemVisual(ge,"colorFromPalette",!1);break;case"opacity":ye.ensureUniqueItemVisual(ge,"style").opacity=Ce;break;case"symbol":case"symbolSize":case"liftZ":ye.setItemVisual(ge,be,Ce)}}H.d(Qe,{LZ:()=>le,Or:()=>ue,UL:()=>Se})},1386:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>W});var ue=H(9778),Se=H(6062),le=H(7021),ye=H(6801),ge=H(1790),be=H(628),Ce=H(6704),he=H(312),j=H(2369),X="__zr_normal__",re=ue.dN.concat(["ignore"]),U=(0,be.reduce)(ue.dN,function(J,V){return J[V]=!0,J},{ignore:!1}),ee={},$=new le.Z(0,0,0,0),ie=function(){function J(V){this.id=(0,be.guid)(),this.animators=[],this.currentStates=[],this.states={},this._init(V)}return J.prototype._init=function(V){this.attr(V)},J.prototype.drift=function(V,P,T){switch(this.draggable){case"horizontal":P=0;break;case"vertical":V=0}var R=this.transform;R||(R=this.transform=[1,0,0,1,0,0]),R[4]+=V,R[5]+=P,this.decomposeTransform(),this.markRedraw()},J.prototype.beforeUpdate=function(){},J.prototype.afterUpdate=function(){},J.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},J.prototype.updateInnerText=function(V){var P=this._textContent;if(P&&(!P.ignore||V)){this.textConfig||(this.textConfig={});var T=this.textConfig,R=T.local,E=P.innerTransformable,M=void 0,A=void 0,O=!1;E.parent=R?this:null;var B=!1;if(E.copyTransform(P),null!=T.position){var ce=$;ce.copy(T.layoutRect?T.layoutRect:this.getBoundingRect()),R||ce.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(ee,T,ce):(0,ge.wI)(ee,T,ce),E.x=ee.x,E.y=ee.y,M=ee.align,A=ee.verticalAlign;var ae=T.origin;if(ae&&null!=T.rotation){var oe=void 0,de=void 0;"center"===ae?(oe=.5*ce.width,de=.5*ce.height):(oe=(0,ge.GM)(ae[0],ce.width),de=(0,ge.GM)(ae[1],ce.height)),B=!0,E.originX=-E.x+oe+(R?0:ce.x),E.originY=-E.y+de+(R?0:ce.y)}}null!=T.rotation&&(E.rotation=T.rotation);var ne=T.offset;ne&&(E.x+=ne[0],E.y+=ne[1],B||(E.originX=-ne[0],E.originY=-ne[1]));var xe=T.inside??("string"==typeof T.position&&T.position.indexOf("inside")>=0),fe=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),ve=void 0,we=void 0,Te=void 0;xe&&this.canBeInsideText()?(we=T.insideStroke,(null==(ve=T.insideFill)||"auto"===ve)&&(ve=this.getInsideTextFill()),(null==we||"auto"===we)&&(we=this.getInsideTextStroke(ve),Te=!0)):(we=T.outsideStroke,(null==(ve=T.outsideFill)||"auto"===ve)&&(ve=this.getOutsideFill()),(null==we||"auto"===we)&&(we=this.getOutsideStroke(ve),Te=!0)),((ve=ve||"#000")!==fe.fill||we!==fe.stroke||Te!==fe.autoStroke||M!==fe.align||A!==fe.verticalAlign)&&(O=!0,fe.fill=ve,fe.stroke=we,fe.autoStroke=Te,fe.align=M,fe.verticalAlign=A,P.setDefaultTextStyle(fe)),P.__dirty|=j.YV,O&&P.dirtyStyle(!0)}},J.prototype.canBeInsideText=function(){return!0},J.prototype.getInsideTextFill=function(){return"#fff"},J.prototype.getInsideTextStroke=function(V){return"#000"},J.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?Ce.GD:Ce.vU},J.prototype.getOutsideStroke=function(V){var P=this.__zr&&this.__zr.getBackgroundColor(),T="string"==typeof P&&(0,he.parse)(P);T||(T=[255,255,255,1]);for(var R=T[3],E=this.__zr.isDarkMode(),M=0;M<3;M++)T[M]=T[M]*R+(E?0:255)*(1-R);return T[3]=1,(0,he.stringify)(T,"rgba")},J.prototype.traverse=function(V,P){},J.prototype.attrKV=function(V,P){"textConfig"===V?this.setTextConfig(P):"textContent"===V?this.setTextContent(P):"clipPath"===V?this.setClipPath(P):"extra"===V?(this.extra=this.extra||{},(0,be.extend)(this.extra,P)):this[V]=P},J.prototype.hide=function(){this.ignore=!0,this.markRedraw()},J.prototype.show=function(){this.ignore=!1,this.markRedraw()},J.prototype.attr=function(V,P){if("string"==typeof V)this.attrKV(V,P);else if((0,be.isObject)(V))for(var R=(0,be.keys)(V),E=0;E<R.length;E++){var M=R[E];this.attrKV(M,V[M])}return this.markRedraw(),this},J.prototype.saveCurrentToNormalState=function(V){this._innerSaveToNormal(V);for(var P=this._normalState,T=0;T<this.animators.length;T++){var R=this.animators[T],E=R.__fromStateTransition;if(!(R.getLoop()||E&&E!==X)){var M=R.targetName;R.saveTo(M?P[M]:P)}}},J.prototype._innerSaveToNormal=function(V){var P=this._normalState;P||(P=this._normalState={}),V.textConfig&&!P.textConfig&&(P.textConfig=this.textConfig),this._savePrimaryToNormal(V,P,re)},J.prototype._savePrimaryToNormal=function(V,P,T){for(var R=0;R<T.length;R++){var E=T[R];null!=V[E]&&!(E in P)&&(P[E]=this[E])}},J.prototype.hasState=function(){return this.currentStates.length>0},J.prototype.getState=function(V){return this.states[V]},J.prototype.ensureState=function(V){var P=this.states;return P[V]||(P[V]={}),P[V]},J.prototype.clearStates=function(V){this.useState(X,!1,V)},J.prototype.useState=function(V,P,T,R){var E=V===X;if(this.hasState()||!E){var A=this.currentStates,O=this.stateTransition;if(!((0,be.indexOf)(A,V)>=0)||!P&&1!==A.length){var B;if(this.stateProxy&&!E&&(B=this.stateProxy(V)),B||(B=this.states&&this.states[V]),!B&&!E)return void(0,be.logError)("State "+V+" not exists.");E||this.saveCurrentToNormalState(B);var ce=!!(B&&B.hoverLayer||R);ce&&this._toggleHoverLayerFlag(!0),this._applyStateObj(V,B,this._normalState,P,!T&&!this.__inHover&&O&&O.duration>0,O);var ae=this._textContent,oe=this._textGuide;return ae&&ae.useState(V,P,T,ce),oe&&oe.useState(V,P,T,ce),E?(this.currentStates=[],this._normalState={}):P?this.currentStates.push(V):this.currentStates=[V],this._updateAnimationTargets(),this.markRedraw(),!ce&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~j.YV),B}}},J.prototype.useStates=function(V,P,T){if(V.length){var R=[],E=this.currentStates,M=V.length,A=M===E.length;if(A)for(var O=0;O<M;O++)if(V[O]!==E[O]){A=!1;break}if(A)return;for(O=0;O<M;O++){var B=V[O],ce=void 0;this.stateProxy&&(ce=this.stateProxy(B,V)),ce||(ce=this.states[B]),ce&&R.push(ce)}var ae=R[M-1],oe=!!(ae&&ae.hoverLayer||T);oe&&this._toggleHoverLayerFlag(!0);var de=this._mergeStates(R),ne=this.stateTransition;this.saveCurrentToNormalState(de),this._applyStateObj(V.join(","),de,this._normalState,!1,!P&&!this.__inHover&&ne&&ne.duration>0,ne);var xe=this._textContent,fe=this._textGuide;xe&&xe.useStates(V,P,oe),fe&&fe.useStates(V,P,oe),this._updateAnimationTargets(),this.currentStates=V.slice(),this.markRedraw(),!oe&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~j.YV)}else this.clearStates()},J.prototype._updateAnimationTargets=function(){for(var V=0;V<this.animators.length;V++){var P=this.animators[V];P.targetName&&P.changeTarget(this[P.targetName])}},J.prototype.removeState=function(V){var P=(0,be.indexOf)(this.currentStates,V);if(P>=0){var T=this.currentStates.slice();T.splice(P,1),this.useStates(T)}},J.prototype.replaceState=function(V,P,T){var R=this.currentStates.slice(),E=(0,be.indexOf)(R,V),M=(0,be.indexOf)(R,P)>=0;E>=0?M?R.splice(E,1):R[E]=P:T&&!M&&R.push(P),this.useStates(R)},J.prototype.toggleState=function(V,P){P?this.useState(V,!0):this.removeState(V)},J.prototype._mergeStates=function(V){for(var T,P={},R=0;R<V.length;R++){var E=V[R];(0,be.extend)(P,E),E.textConfig&&(0,be.extend)(T=T||{},E.textConfig)}return T&&(P.textConfig=T),P},J.prototype._applyStateObj=function(V,P,T,R,E,M){var A=!(P&&R);P&&P.textConfig?(this.textConfig=(0,be.extend)({},R?this.textConfig:T.textConfig),(0,be.extend)(this.textConfig,P.textConfig)):A&&T.textConfig&&(this.textConfig=T.textConfig);for(var O={},B=!1,ce=0;ce<re.length;ce++){var ae=re[ce],oe=E&&U[ae];P&&null!=P[ae]?oe?(B=!0,O[ae]=P[ae]):this[ae]=P[ae]:A&&null!=T[ae]&&(oe?(B=!0,O[ae]=T[ae]):this[ae]=T[ae])}if(!E)for(ce=0;ce<this.animators.length;ce++){var de=this.animators[ce],ne=de.targetName;de.getLoop()||de.__changeFinalValue(ne?(P||T)[ne]:P||T)}B&&this._transitionState(V,O,M)},J.prototype._attachComponent=function(V){if((!V.__zr||V.__hostTarget)&&V!==this){var P=this.__zr;P&&V.addSelfToZr(P),V.__zr=P,V.__hostTarget=this}},J.prototype._detachComponent=function(V){V.__zr&&V.removeSelfFromZr(V.__zr),V.__zr=null,V.__hostTarget=null},J.prototype.getClipPath=function(){return this._clipPath},J.prototype.setClipPath=function(V){this._clipPath&&this._clipPath!==V&&this.removeClipPath(),this._attachComponent(V),this._clipPath=V,this.markRedraw()},J.prototype.removeClipPath=function(){var V=this._clipPath;V&&(this._detachComponent(V),this._clipPath=null,this.markRedraw())},J.prototype.getTextContent=function(){return this._textContent},J.prototype.setTextContent=function(V){var P=this._textContent;P!==V&&(P&&P!==V&&this.removeTextContent(),V.innerTransformable=new ue.ZP,this._attachComponent(V),this._textContent=V,this.markRedraw())},J.prototype.setTextConfig=function(V){this.textConfig||(this.textConfig={}),(0,be.extend)(this.textConfig,V),this.markRedraw()},J.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},J.prototype.removeTextContent=function(){var V=this._textContent;V&&(V.innerTransformable=null,this._detachComponent(V),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},J.prototype.getTextGuideLine=function(){return this._textGuide},J.prototype.setTextGuideLine=function(V){this._textGuide&&this._textGuide!==V&&this.removeTextGuideLine(),this._attachComponent(V),this._textGuide=V,this.markRedraw()},J.prototype.removeTextGuideLine=function(){var V=this._textGuide;V&&(this._detachComponent(V),this._textGuide=null,this.markRedraw())},J.prototype.markRedraw=function(){this.__dirty|=j.YV;var V=this.__zr;V&&(this.__inHover?V.refreshHover():V.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},J.prototype.dirty=function(){this.markRedraw()},J.prototype._toggleHoverLayerFlag=function(V){this.__inHover=V;var P=this._textContent,T=this._textGuide;P&&(P.__inHover=V),T&&(T.__inHover=V)},J.prototype.addSelfToZr=function(V){if(this.__zr!==V){this.__zr=V;var P=this.animators;if(P)for(var T=0;T<P.length;T++)V.animation.addAnimator(P[T]);this._clipPath&&this._clipPath.addSelfToZr(V),this._textContent&&this._textContent.addSelfToZr(V),this._textGuide&&this._textGuide.addSelfToZr(V)}},J.prototype.removeSelfFromZr=function(V){if(this.__zr){this.__zr=null;var P=this.animators;if(P)for(var T=0;T<P.length;T++)V.animation.removeAnimator(P[T]);this._clipPath&&this._clipPath.removeSelfFromZr(V),this._textContent&&this._textContent.removeSelfFromZr(V),this._textGuide&&this._textGuide.removeSelfFromZr(V)}},J.prototype.animate=function(V,P,T){var E=new Se.Z(V?this[V]:this,P,T);return V&&(E.targetName=V),this.addAnimator(E,V),E},J.prototype.addAnimator=function(V,P){var T=this.__zr,R=this;V.during(function(){R.updateDuringAnimation(P)}).done(function(){var E=R.animators,M=(0,be.indexOf)(E,V);M>=0&&E.splice(M,1)}),this.animators.push(V),T&&T.animation.addAnimator(V),T&&T.wakeUp()},J.prototype.updateDuringAnimation=function(V){this.markRedraw()},J.prototype.stopAnimation=function(V,P){for(var T=this.animators,R=T.length,E=[],M=0;M<R;M++){var A=T[M];V&&V!==A.scope?E.push(A):A.stop(P)}return this.animators=E,this},J.prototype.animateTo=function(V,P,T){K(this,V,P,T)},J.prototype.animateFrom=function(V,P,T){K(this,V,P,T,!0)},J.prototype._transitionState=function(V,P,T,R){for(var E=K(this,P,T,R),M=0;M<E.length;M++)E[M].__fromStateTransition=V},J.prototype.getBoundingRect=function(){return null},J.prototype.getPaintRect=function(){return null},J.initDefaultProps=function(){var V=J.prototype;function R(E,M,A,O){function B(ce,ae){Object.defineProperty(ae,0,{get:function(){return ce[A]},set:function(oe){ce[A]=oe}}),Object.defineProperty(ae,1,{get:function(){return ce[O]},set:function(oe){ce[O]=oe}})}Object.defineProperty(V,E,{get:function(){return this[M]||B(this,this[M]=[]),this[M]},set:function(ce){this[A]=ce[0],this[O]=ce[1],this[M]=ce,B(this,ce)}})}V.type="element",V.name="",V.ignore=V.silent=V.isGroup=V.draggable=V.dragging=V.ignoreClip=V.__inHover=!1,V.__dirty=j.YV,Object.defineProperty&&(R("position","_legacyPos","x","y"),R("scale","_legacyScale","scaleX","scaleY"),R("origin","_legacyOrigin","originX","originY"))}(),J}();function K(J,V,P,T,R){var E=[];G(J,"",J,V,P=P||{},T,E,R);var M=E.length,A=!1,O=P.done,B=P.aborted,ce=function(){A=!0,--M<=0&&(A?O&&O():B&&B())},ae=function(){--M<=0&&(A?O&&O():B&&B())};M||O&&O(),E.length>0&&P.during&&E[0].during(function(ne,xe){P.during(xe)});for(var oe=0;oe<E.length;oe++){var de=E[oe];ce&&de.done(ce),ae&&de.aborted(ae),P.force&&de.duration(P.duration),de.start(P.easing)}return E}function b(J,V,P){for(var T=0;T<P;T++)J[T]=V[T]}function Q(J,V,P){if((0,be.isArrayLike)(V[P]))if((0,be.isArrayLike)(J[P])||(J[P]=[]),(0,be.isTypedArray)(V[P])){var T=V[P].length;J[P].length!==T&&(J[P]=new V[P].constructor(T),b(J[P],V[P],T))}else{var R=V[P],E=J[P],M=R.length;if(function Y(J){return(0,be.isArrayLike)(J[0])}(R))for(var A=R[0].length,O=0;O<M;O++)E[O]?b(E[O],R[O],A):E[O]=Array.prototype.slice.call(R[O]);else b(E,R,M);E.length=R.length}else J[P]=V[P]}function G(J,V,P,T,R,E,M,A){for(var O=(0,be.keys)(T),B=R.duration,ce=R.delay,ae=R.additive,oe=R.setToFinal,de=!(0,be.isObject)(E),ne=J.animators,xe=[],fe=0;fe<O.length;fe++){var we=T[ve=O[fe]];if(null!=we&&null!=P[ve]&&(de||E[ve]))if(!(0,be.isObject)(we)||(0,be.isArrayLike)(we)||(0,be.isGradientObject)(we))xe.push(ve);else{if(V){A||(P[ve]=we,J.updateDuringAnimation(V));continue}G(J,ve,P[ve],we,R,E&&E[ve],M,A)}else A||(P[ve]=we,J.updateDuringAnimation(V),xe.push(ve))}var Te=xe.length;if(!ae&&Te)for(var Ae=0;Ae<ne.length;Ae++)if((Ee=ne[Ae]).targetName===V&&Ee.stopTracks(xe)){var He=(0,be.indexOf)(ne,Ee);ne.splice(He,1)}if(R.force||(xe=(0,be.filter)(xe,function(St){return!function F(J,V){return J===V||(0,be.isArrayLike)(J)&&(0,be.isArrayLike)(V)&&function q(J,V){var P=J.length;if(P!==V.length)return!1;for(var T=0;T<P;T++)if(J[T]!==V[T])return!1;return!0}(J,V)}(T[St],P[St])}),Te=xe.length),Te>0||R.force&&!M.length){var Ee,We=void 0,$e=void 0,ct=void 0;if(A)for($e={},oe&&(We={}),Ae=0;Ae<Te;Ae++)$e[ve=xe[Ae]]=P[ve],oe?We[ve]=T[ve]:P[ve]=T[ve];else if(oe)for(ct={},Ae=0;Ae<Te;Ae++){var ve;ct[ve=xe[Ae]]=(0,Se.V)(P[ve]),Q(P,T,ve)}(Ee=new Se.Z(P,!1,!1,ae?(0,be.filter)(ne,function(_t){return _t.targetName===V}):null)).targetName=V,R.scope&&(Ee.scope=R.scope),oe&&We&&Ee.whenWithKeys(0,We,xe),ct&&Ee.whenWithKeys(0,ct,xe),Ee.whenWithKeys(B??500,A?$e:T,xe).delay(ce||0),J.addAnimator(Ee,V),M.push(Ee)}}(0,be.mixin)(ie,ye.Z),(0,be.mixin)(ie,ue.ZP);const W=ie},6062:(Vt,Qe,H)=>{H.d(Qe,{V:()=>b,Z:()=>O});var ue={linear:function(B){return B},quadraticIn:function(B){return B*B},quadraticOut:function(B){return B*(2-B)},quadraticInOut:function(B){return(B*=2)<1?.5*B*B:-.5*(--B*(B-2)-1)},cubicIn:function(B){return B*B*B},cubicOut:function(B){return--B*B*B+1},cubicInOut:function(B){return(B*=2)<1?.5*B*B*B:.5*((B-=2)*B*B+2)},quarticIn:function(B){return B*B*B*B},quarticOut:function(B){return 1- --B*B*B*B},quarticInOut:function(B){return(B*=2)<1?.5*B*B*B*B:-.5*((B-=2)*B*B*B-2)},quinticIn:function(B){return B*B*B*B*B},quinticOut:function(B){return--B*B*B*B*B+1},quinticInOut:function(B){return(B*=2)<1?.5*B*B*B*B*B:.5*((B-=2)*B*B*B*B+2)},sinusoidalIn:function(B){return 1-Math.cos(B*Math.PI/2)},sinusoidalOut:function(B){return Math.sin(B*Math.PI/2)},sinusoidalInOut:function(B){return.5*(1-Math.cos(Math.PI*B))},exponentialIn:function(B){return 0===B?0:Math.pow(1024,B-1)},exponentialOut:function(B){return 1===B?1:1-Math.pow(2,-10*B)},exponentialInOut:function(B){return 0===B?0:1===B?1:(B*=2)<1?.5*Math.pow(1024,B-1):.5*(2-Math.pow(2,-10*(B-1)))},circularIn:function(B){return 1-Math.sqrt(1-B*B)},circularOut:function(B){return Math.sqrt(1- --B*B)},circularInOut:function(B){return(B*=2)<1?-.5*(Math.sqrt(1-B*B)-1):.5*(Math.sqrt(1-(B-=2)*B)+1)},elasticIn:function(B){var ce,ae=.1;return 0===B?0:1===B?1:(!ae||ae<1?(ae=1,ce=.1):ce=.4*Math.asin(1/ae)/(2*Math.PI),-ae*Math.pow(2,10*(B-=1))*Math.sin((B-ce)*(2*Math.PI)/.4))},elasticOut:function(B){var ce,ae=.1;return 0===B?0:1===B?1:(!ae||ae<1?(ae=1,ce=.1):ce=.4*Math.asin(1/ae)/(2*Math.PI),ae*Math.pow(2,-10*B)*Math.sin((B-ce)*(2*Math.PI)/.4)+1)},elasticInOut:function(B){var ce,ae=.1;return 0===B?0:1===B?1:(!ae||ae<1?(ae=1,ce=.1):ce=.4*Math.asin(1/ae)/(2*Math.PI),(B*=2)<1?ae*Math.pow(2,10*(B-=1))*Math.sin((B-ce)*(2*Math.PI)/.4)*-.5:ae*Math.pow(2,-10*(B-=1))*Math.sin((B-ce)*(2*Math.PI)/.4)*.5+1)},backIn:function(B){return B*B*(2.70158*B-1.70158)},backOut:function(B){return--B*B*(2.70158*B+1.70158)+1},backInOut:function(B){var ce=2.5949095;return(B*=2)<1?B*B*((ce+1)*B-ce)*.5:.5*((B-=2)*B*((ce+1)*B+ce)+2)},bounceIn:function(B){return 1-ue.bounceOut(1-B)},bounceOut:function(B){return B<1/2.75?7.5625*B*B:B<2/2.75?7.5625*(B-=1.5/2.75)*B+.75:B<2.5/2.75?7.5625*(B-=2.25/2.75)*B+.9375:7.5625*(B-=2.625/2.75)*B+.984375},bounceInOut:function(B){return B<.5?.5*ue.bounceIn(2*B):.5*ue.bounceOut(2*B-1)+.5}};const Se=ue;var le=H(628),ye=H(6410);const be=function(){function B(ce){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=ce.life||1e3,this._delay=ce.delay||0,this.loop=ce.loop||!1,this.onframe=ce.onframe||le.noop,this.ondestroy=ce.ondestroy||le.noop,this.onrestart=ce.onrestart||le.noop,ce.easing&&this.setEasing(ce.easing)}return B.prototype.step=function(ce,ae){if(this._inited||(this._startTime=ce+this._delay,this._inited=!0),!this._paused){var oe=this._life,de=ce-this._startTime-this._pausedTime,ne=de/oe;ne<0&&(ne=0),ne=Math.min(ne,1);var xe=this.easingFunc,fe=xe?xe(ne):ne;if(this.onframe(fe),1===ne){if(!this.loop)return!0;this._startTime=ce-de%oe,this._pausedTime=0,this.onrestart()}return!1}this._pausedTime+=ae},B.prototype.pause=function(){this._paused=!0},B.prototype.resume=function(){this._paused=!1},B.prototype.setEasing=function(ce){this.easing=ce,this.easingFunc=(0,le.isFunction)(ce)?ce:Se[ce]||(0,ye.H)(ce)},B}();var Ce=H(312),he=H(8541),j=Array.prototype.slice;function X(B,ce,ae){return(ce-B)*ae+B}function re(B,ce,ae,oe){for(var de=ce.length,ne=0;ne<de;ne++)B[ne]=X(ce[ne],ae[ne],oe);return B}function ee(B,ce,ae,oe){for(var de=ce.length,ne=0;ne<de;ne++)B[ne]=ce[ne]+ae[ne]*oe;return B}function $(B,ce,ae,oe){for(var de=ce.length,ne=de&&ce[0].length,xe=0;xe<de;xe++){B[xe]||(B[xe]=[]);for(var fe=0;fe<ne;fe++)B[xe][fe]=ce[xe][fe]+ae[xe][fe]*oe}return B}function ie(B,ce){for(var ae=B.length,oe=ce.length,de=ae>oe?ce:B,ne=Math.min(ae,oe),xe=de[ne-1]||{color:[0,0,0,0],offset:0},fe=ne;fe<Math.max(ae,oe);fe++)de.push({offset:xe.offset,color:xe.color.slice()})}function K(B,ce,ae){var oe=B,de=ce;if(oe.push&&de.push){var ne=oe.length,xe=de.length;if(ne!==xe)if(ne>xe)oe.length=xe;else for(var ve=ne;ve<xe;ve++)oe.push(1===ae?de[ve]:j.call(de[ve]));var we=oe[0]&&oe[0].length;for(ve=0;ve<oe.length;ve++)if(1===ae)isNaN(oe[ve])&&(oe[ve]=de[ve]);else for(var Te=0;Te<we;Te++)isNaN(oe[ve][Te])&&(oe[ve][Te]=de[ve][Te])}}function b(B){if((0,le.isArrayLike)(B)){var ce=B.length;if((0,le.isArrayLike)(B[0])){for(var ae=[],oe=0;oe<ce;oe++)ae.push(j.call(B[oe]));return ae}return j.call(B)}return B}function Y(B){return B[0]=Math.floor(B[0])||0,B[1]=Math.floor(B[1])||0,B[2]=Math.floor(B[2])||0,B[3]=B[3]??1,"rgba("+B.join(",")+")"}function T(B){return 4===B||5===B}function R(B){return 1===B||2===B}var E=[0,0,0,0],M=function(){function B(ce){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=ce}return B.prototype.isFinished=function(){return this._finished},B.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},B.prototype.needsAnimate=function(){return this.keyframes.length>=1},B.prototype.getAdditiveTrack=function(){return this._additiveTrack},B.prototype.addKeyframe=function(ce,ae,oe){this._needsSort=!0;var de=this.keyframes,ne=de.length,xe=!1,fe=6,ve=ae;if((0,le.isArrayLike)(ae)){var we=function Q(B){return(0,le.isArrayLike)(B&&B[0])?2:1}(ae);fe=we,(1===we&&!(0,le.isNumber)(ae[0])||2===we&&!(0,le.isNumber)(ae[0][0]))&&(xe=!0)}else if((0,le.isNumber)(ae)&&!(0,le.eqNaN)(ae))fe=0;else if((0,le.isString)(ae))if(isNaN(+ae)){var Te=Ce.parse(ae);Te&&(ve=Te,fe=3)}else fe=0;else if((0,le.isGradientObject)(ae)){var Ae=(0,le.extend)({},ve);Ae.colorStops=(0,le.map)(ae.colorStops,function(Ve){return{offset:Ve.offset,color:Ce.parse(Ve.color)}}),(0,he.I1)(ae)?fe=4:(0,he.gO)(ae)&&(fe=5),ve=Ae}0===ne?this.valType=fe:(fe!==this.valType||6===fe)&&(xe=!0),this.discrete=this.discrete||xe;var Ee={time:ce,value:ve,rawValue:ae,percent:0};return oe&&(Ee.easing=oe,Ee.easingFunc=(0,le.isFunction)(oe)?oe:Se[oe]||(0,ye.H)(oe)),de.push(Ee),Ee},B.prototype.prepare=function(ce,ae){var oe=this.keyframes;this._needsSort&&oe.sort(function(We,$e){return We.time-$e.time});for(var de=this.valType,ne=oe.length,xe=oe[ne-1],fe=this.discrete,ve=R(de),we=T(de),Te=0;Te<ne;Te++){var Ae=oe[Te],Ee=Ae.value,Ve=xe.value;Ae.percent=Ae.time/ce,fe||(ve&&Te!==ne-1?K(Ee,Ve,de):we&&ie(Ee.colorStops,Ve.colorStops))}if(!fe&&5!==de&&ae&&this.needsAnimate()&&ae.needsAnimate()&&de===ae.valType&&!ae._finished){this._additiveTrack=ae;var He=oe[0].value;for(Te=0;Te<ne;Te++)0===de?oe[Te].additiveValue=oe[Te].value-He:3===de?oe[Te].additiveValue=ee([],oe[Te].value,He,-1):R(de)&&(oe[Te].additiveValue=1===de?ee([],oe[Te].value,He,-1):$([],oe[Te].value,He,-1))}},B.prototype.step=function(ce,ae){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var Te,Ve,He,oe=null!=this._additiveTrack,de=oe?"additiveValue":"value",ne=this.valType,xe=this.keyframes,fe=xe.length,ve=this.propName,we=3===ne,Ae=this._lastFr,Ee=Math.min;if(1===fe)Ve=He=xe[0];else{if(ae<0)Te=0;else if(ae<this._lastFrP){for(Te=Ee(Ae+1,fe-1);Te>=0&&!(xe[Te].percent<=ae);Te--);Te=Ee(Te,fe-2)}else{for(Te=Ae;Te<fe&&!(xe[Te].percent>ae);Te++);Te=Ee(Te-1,fe-2)}He=xe[Te+1],Ve=xe[Te]}if(Ve&&He){this._lastFr=Te,this._lastFrP=ae;var $e=He.percent-Ve.percent,ct=0===$e?1:Ee((ae-Ve.percent)/$e,1);He.easingFunc&&(ct=He.easingFunc(ct));var St=oe?this._additiveValue:we?E:ce[ve];if((R(ne)||we)&&!St&&(St=this._additiveValue=[]),this.discrete)ce[ve]=ct<1?Ve.rawValue:He.rawValue;else if(R(ne))1===ne?re(St,Ve[de],He[de],ct):function U(B,ce,ae,oe){for(var de=ce.length,ne=de&&ce[0].length,xe=0;xe<de;xe++){B[xe]||(B[xe]=[]);for(var fe=0;fe<ne;fe++)B[xe][fe]=X(ce[xe][fe],ae[xe][fe],oe)}}(St,Ve[de],He[de],ct);else if(T(ne)){var _t=Ve[de],Ot=He[de],Ht=4===ne;ce[ve]={type:Ht?"linear":"radial",x:X(_t.x,Ot.x,ct),y:X(_t.y,Ot.y,ct),colorStops:(0,le.map)(_t.colorStops,function(hn,Vn){var sr=Ot.colorStops[Vn];return{offset:X(hn.offset,sr.offset,ct),color:Y(re([],hn.color,sr.color,ct))}}),global:Ot.global},Ht?(ce[ve].x2=X(_t.x2,Ot.x2,ct),ce[ve].y2=X(_t.y2,Ot.y2,ct)):ce[ve].r=X(_t.r,Ot.r,ct)}else if(we)re(St,Ve[de],He[de],ct),oe||(ce[ve]=Y(St));else{var an=X(Ve[de],He[de],ct);oe?this._additiveValue=an:ce[ve]=an}oe&&this._addToTarget(ce)}}},B.prototype._addToTarget=function(ce){var ae=this.valType,oe=this.propName,de=this._additiveValue;0===ae?ce[oe]=ce[oe]+de:3===ae?(Ce.parse(ce[oe],E),ee(E,E,de,1),ce[oe]=Y(E)):1===ae?ee(ce[oe],ce[oe],de,1):2===ae&&$(ce[oe],ce[oe],de,1)},B}();const O=function(){function B(ce,ae,oe,de){this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=ce,this._loop=ae,ae&&de?(0,le.logError)("Can' use additive animation on looped animation."):(this._additiveAnimators=de,this._allowDiscrete=oe)}return B.prototype.getMaxTime=function(){return this._maxTime},B.prototype.getDelay=function(){return this._delay},B.prototype.getLoop=function(){return this._loop},B.prototype.getTarget=function(){return this._target},B.prototype.changeTarget=function(ce){this._target=ce},B.prototype.when=function(ce,ae,oe){return this.whenWithKeys(ce,ae,(0,le.keys)(ae),oe)},B.prototype.whenWithKeys=function(ce,ae,oe,de){for(var ne=this._tracks,xe=0;xe<oe.length;xe++){var fe=oe[xe],ve=ne[fe];if(!ve){ve=ne[fe]=new M(fe);var we=void 0,Te=this._getAdditiveTrack(fe);if(Te){var Ae=Te.keyframes,Ee=Ae[Ae.length-1];we=Ee&&Ee.value,3===Te.valType&&we&&(we=Y(we))}else we=this._target[fe];if(null==we)continue;ce>0&&ve.addKeyframe(0,b(we),de),this._trackKeys.push(fe)}ve.addKeyframe(ce,b(ae[fe]),de)}return this._maxTime=Math.max(this._maxTime,ce),this},B.prototype.pause=function(){this._clip.pause(),this._paused=!0},B.prototype.resume=function(){this._clip.resume(),this._paused=!1},B.prototype.isPaused=function(){return!!this._paused},B.prototype.duration=function(ce){return this._maxTime=ce,this._force=!0,this},B.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var ce=this._doneCbs;if(ce)for(var ae=ce.length,oe=0;oe<ae;oe++)ce[oe].call(this)},B.prototype._abortedCallback=function(){this._setTracksFinished();var ce=this.animation,ae=this._abortedCbs;if(ce&&ce.removeClip(this._clip),this._clip=null,ae)for(var oe=0;oe<ae.length;oe++)ae[oe].call(this)},B.prototype._setTracksFinished=function(){for(var ce=this._tracks,ae=this._trackKeys,oe=0;oe<ae.length;oe++)ce[ae[oe]].setFinished()},B.prototype._getAdditiveTrack=function(ce){var ae,oe=this._additiveAnimators;if(oe)for(var de=0;de<oe.length;de++){var ne=oe[de].getTrack(ce);ne&&(ae=ne)}return ae},B.prototype.start=function(ce){if(!(this._started>0)){this._started=1;for(var ae=this,oe=[],de=this._maxTime||0,ne=0;ne<this._trackKeys.length;ne++){var xe=this._trackKeys[ne],fe=this._tracks[xe],ve=this._getAdditiveTrack(xe),we=fe.keyframes,Te=we.length;if(fe.prepare(de,ve),fe.needsAnimate())if(!this._allowDiscrete&&fe.discrete){var Ae=we[Te-1];Ae&&(ae._target[fe.propName]=Ae.rawValue),fe.setFinished()}else oe.push(fe)}if(oe.length||this._force){var Ee=new be({life:de,loop:this._loop,delay:this._delay||0,onframe:function(Ve){ae._started=2;var He=ae._additiveAnimators;if(He){for(var We=!1,$e=0;$e<He.length;$e++)if(He[$e]._clip){We=!0;break}We||(ae._additiveAnimators=null)}for($e=0;$e<oe.length;$e++)oe[$e].step(ae._target,Ve);var ct=ae._onframeCbs;if(ct)for($e=0;$e<ct.length;$e++)ct[$e](ae._target,Ve)},ondestroy:function(){ae._doneCallback()}});this._clip=Ee,this.animation&&this.animation.addClip(Ee),ce&&Ee.setEasing(ce)}else this._doneCallback();return this}},B.prototype.stop=function(ce){this._clip&&(ce&&this._clip.onframe(1),this._abortedCallback())},B.prototype.delay=function(ce){return this._delay=ce,this},B.prototype.during=function(ce){return ce&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(ce)),this},B.prototype.done=function(ce){return ce&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(ce)),this},B.prototype.aborted=function(ce){return ce&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(ce)),this},B.prototype.getClip=function(){return this._clip},B.prototype.getTrack=function(ce){return this._tracks[ce]},B.prototype.getTracks=function(){var ce=this;return(0,le.map)(this._trackKeys,function(ae){return ce._tracks[ae]})},B.prototype.stopTracks=function(ce,ae){if(!ce.length||!this._clip)return!0;for(var oe=this._tracks,de=this._trackKeys,ne=0;ne<ce.length;ne++){var xe=oe[ce[ne]];xe&&!xe.isFinished()&&(ae?xe.step(this._target,1):1===this._started&&xe.step(this._target,0),xe.setFinished())}var fe=!0;for(ne=0;ne<de.length;ne++)if(!oe[de[ne]].isFinished()){fe=!1;break}return fe&&this._abortedCallback(),fe},B.prototype.saveTo=function(ce,ae,oe){if(ce){ae=ae||this._trackKeys;for(var de=0;de<ae.length;de++){var ne=ae[de],xe=this._tracks[ne];if(xe&&!xe.isFinished()){var fe=xe.keyframes,ve=fe[oe?0:fe.length-1];ve&&(ce[ne]=b(ve.rawValue))}}}},B.prototype.__changeFinalValue=function(ce,ae){ae=ae||(0,le.keys)(ce);for(var oe=0;oe<ae.length;oe++){var de=ae[oe],ne=this._tracks[de];if(ne){var xe=ne.keyframes;if(xe.length>1){var fe=xe.pop();ne.addKeyframe(fe.time,ce[de]),ne.prepare(this._maxTime,ne.getAdditiveTrack())}}}},B}()},6410:(Vt,Qe,H)=>{H.d(Qe,{H:()=>ye});var ue=H(9969),Se=H(628),le=/cubic-bezier\(([0-9,\.e ]+)\)/;function ye(ge){var be=ge&&le.exec(ge);if(be){var Ce=be[1].split(","),he=+(0,Se.trim)(Ce[0]),j=+(0,Se.trim)(Ce[1]),X=+(0,Se.trim)(Ce[2]),re=+(0,Se.trim)(Ce[3]);if(isNaN(he+j+X+re))return;var U=[];return function(ee){return ee<=0?0:ee>=1?1:(0,ue.kD)(0,he,X,1,ee,U)&&(0,ue.af)(0,j,re,1,U[0])}}}},2036:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>le});const le=H(169).Z.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(ye){return setTimeout(ye,16)}},9411:(Vt,Qe,H)=>{H.d(Qe,{a:()=>le});var ue=H(628);function le(ye){var ge=ye.style,be=ge.lineDash&&ge.lineWidth>0&&function Se(ye,ge){return ye&&"solid"!==ye&&ge>0?"dashed"===ye?[4*ge,2*ge]:"dotted"===ye?[ge]:(0,ue.isNumber)(ye)?[ye]:(0,ue.isArray)(ye)?ye:null:null}(ge.lineDash,ge.lineWidth),Ce=ge.lineDashOffset;if(be){var he=ge.strokeNoScale&&ye.getLineScale?ye.getLineScale():1;he&&1!==he&&(be=(0,ue.map)(be,function(j){return j/he}),Ce/=he)}return[be,Ce]}},9012:(Vt,Qe,H)=>{H.d(Qe,{Dm:()=>ne,RV:()=>de,RZ:()=>Y});var ue=H(9563),Se=H(7349),le=H(6790),ye=H(7072),ge=H(126),be=H(6766),Ce=H(491),he=H(628),j=H(9411),X=H(2369),re=H(5730),U=new Se.Z(!0);function ee(fe){var ve=fe.stroke;return!(null==ve||"none"===ve||!(fe.lineWidth>0))}function $(fe){return"string"==typeof fe&&"none"!==fe}function ie(fe){var ve=fe.fill;return null!=ve&&"none"!==ve}function K(fe,ve){if(null!=ve.fillOpacity&&1!==ve.fillOpacity){var we=fe.globalAlpha;fe.globalAlpha=ve.fillOpacity*ve.opacity,fe.fill(),fe.globalAlpha=we}else fe.fill()}function b(fe,ve){if(null!=ve.strokeOpacity&&1!==ve.strokeOpacity){var we=fe.globalAlpha;fe.globalAlpha=ve.strokeOpacity*ve.opacity,fe.stroke(),fe.globalAlpha=we}else fe.stroke()}function Y(fe,ve,we){var Te=(0,le.Gq)(ve.image,ve.__image,we);if((0,le.v5)(Te)){var Ae=fe.createPattern(Te,ve.repeat||"repeat");if("function"==typeof DOMMatrix&&Ae&&Ae.setTransform){var Ee=new DOMMatrix;Ee.translateSelf(ve.x||0,ve.y||0),Ee.rotateSelf(0,0,(ve.rotation||0)*he.RADIAN_TO_DEGREE),Ee.scaleSelf(ve.scaleX||1,ve.scaleY||1),Ae.setTransform(Ee)}return Ae}}var G=["shadowBlur","shadowOffsetX","shadowOffsetY"],W=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function J(fe,ve,we,Te,Ae){var Ee=!1;if(!Te&&ve===(we=we||{}))return!1;if(Te||ve.opacity!==we.opacity){ae(fe,Ae),Ee=!0;var Ve=Math.max(Math.min(ve.opacity,1),0);fe.globalAlpha=isNaN(Ve)?ue.tj.opacity:Ve}(Te||ve.blend!==we.blend)&&(Ee||(ae(fe,Ae),Ee=!0),fe.globalCompositeOperation=ve.blend||ue.tj.blend);for(var He=0;He<G.length;He++){var We=G[He];(Te||ve[We]!==we[We])&&(Ee||(ae(fe,Ae),Ee=!0),fe[We]=fe.dpr*(ve[We]||0))}return(Te||ve.shadowColor!==we.shadowColor)&&(Ee||(ae(fe,Ae),Ee=!0),fe.shadowColor=ve.shadowColor||ue.tj.shadowColor),Ee}function V(fe,ve,we,Te,Ae){var Ee=oe(ve,Ae.inHover),Ve=Te?null:we&&oe(we,Ae.inHover)||{};if(Ee===Ve)return!1;var He=J(fe,Ee,Ve,Te,Ae);if((Te||Ee.fill!==Ve.fill)&&(He||(ae(fe,Ae),He=!0),$(Ee.fill)&&(fe.fillStyle=Ee.fill)),(Te||Ee.stroke!==Ve.stroke)&&(He||(ae(fe,Ae),He=!0),$(Ee.stroke)&&(fe.strokeStyle=Ee.stroke)),(Te||Ee.opacity!==Ve.opacity)&&(He||(ae(fe,Ae),He=!0),fe.globalAlpha=Ee.opacity??1),ve.hasStroke()){var $e=Ee.lineWidth/(Ee.strokeNoScale&&ve.getLineScale?ve.getLineScale():1);fe.lineWidth!==$e&&(He||(ae(fe,Ae),He=!0),fe.lineWidth=$e)}for(var ct=0;ct<W.length;ct++){var St=W[ct],_t=St[0];(Te||Ee[_t]!==Ve[_t])&&(He||(ae(fe,Ae),He=!0),fe[_t]=Ee[_t]||St[1])}return He}function T(fe,ve){var we=ve.transform,Te=fe.dpr||1;we?fe.setTransform(Te*we[0],Te*we[1],Te*we[2],Te*we[3],Te*we[4],Te*we[5]):fe.setTransform(Te,0,0,Te,0,0)}function ae(fe,ve){ve.batchFill&&fe.fill(),ve.batchStroke&&fe.stroke(),ve.batchFill="",ve.batchStroke=""}function oe(fe,ve){return ve&&fe.__hoverStyle||fe.style}function de(fe,ve){ne(fe,ve,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function ne(fe,ve,we,Te){var Ae=ve.transform;if(!ve.shouldBePainted(we.viewWidth,we.viewHeight,!1,!1))return ve.__dirty&=~X.YV,void(ve.__isRendered=!1);var Ee=ve.__clipPaths,Ve=we.prevElClipPaths,He=!1,We=!1;if((!Ve||(0,ye.cF)(Ee,Ve))&&(Ve&&Ve.length&&(ae(fe,we),fe.restore(),We=He=!0,we.prevElClipPaths=null,we.allClipped=!1,we.prevEl=null),Ee&&Ee.length&&(ae(fe,we),fe.save(),function R(fe,ve,we){for(var Te=!1,Ae=0;Ae<fe.length;Ae++){var Ee=fe[Ae];Te=Te||Ee.isZeroArea(),T(ve,Ee),ve.beginPath(),Ee.buildPath(ve,Ee.shape),ve.clip()}we.allClipped=Te}(Ee,fe,we),He=!0),we.prevElClipPaths=Ee),we.allClipped)ve.__isRendered=!1;else{ve.beforeBrush&&ve.beforeBrush(),ve.innerBeforeBrush();var $e=we.prevEl;$e||(We=He=!0);var ct=ve instanceof ge.ZP&&ve.autoBatch&&function ce(fe){var ve=ie(fe),we=ee(fe);return!(fe.lineDash||!(+ve^+we)||ve&&"string"!=typeof fe.fill||we&&"string"!=typeof fe.stroke||fe.strokePercent<1||fe.strokeOpacity<1||fe.fillOpacity<1)}(ve.style);He||function E(fe,ve){return fe&&ve?fe[0]!==ve[0]||fe[1]!==ve[1]||fe[2]!==ve[2]||fe[3]!==ve[3]||fe[4]!==ve[4]||fe[5]!==ve[5]:!(!fe&&!ve)}(Ae,$e.transform)?(ae(fe,we),T(fe,ve)):ct||ae(fe,we);var St=oe(ve,we.inHover);ve instanceof ge.ZP?(1!==we.lastDrawType&&(We=!0,we.lastDrawType=1),V(fe,ve,$e,We,we),(!ct||!we.batchFill&&!we.batchStroke)&&fe.beginPath(),function Q(fe,ve,we,Te){var Ae,Ee=ee(we),Ve=ie(we),He=we.strokePercent,We=He<1,$e=!ve.path;(!ve.silent||We)&&$e&&ve.createPathProxy();var ct=ve.path||U,St=ve.__dirty;if(!Te){var _t=we.fill,Ot=we.stroke,Ht=Ve&&!!_t.colorStops,an=Ee&&!!Ot.colorStops,hn=Ve&&!!_t.image,Vn=Ee&&!!Ot.image,sr=void 0,$n=void 0,gr=void 0,er=void 0,Kt=void 0;(Ht||an)&&(Kt=ve.getBoundingRect()),Ht&&(sr=St?(0,ye.ZF)(fe,_t,Kt):ve.__canvasFillGradient,ve.__canvasFillGradient=sr),an&&($n=St?(0,ye.ZF)(fe,Ot,Kt):ve.__canvasStrokeGradient,ve.__canvasStrokeGradient=$n),hn&&(gr=St||!ve.__canvasFillPattern?Y(fe,_t,ve):ve.__canvasFillPattern,ve.__canvasFillPattern=gr),Vn&&(er=St||!ve.__canvasStrokePattern?Y(fe,Ot,ve):ve.__canvasStrokePattern,ve.__canvasStrokePattern=gr),Ht?fe.fillStyle=sr:hn&&(gr?fe.fillStyle=gr:Ve=!1),an?fe.strokeStyle=$n:Vn&&(er?fe.strokeStyle=er:Ee=!1)}var On,jn,cn=ve.getGlobalScale();ct.setScale(cn[0],cn[1],ve.segmentIgnoreThreshold),fe.setLineDash&&we.lineDash&&(On=(Ae=(0,j.a)(ve))[0],jn=Ae[1]);var et=!0;($e||St&X.RH)&&(ct.setDPR(fe.dpr),We?ct.setContext(null):(ct.setContext(fe),et=!1),ct.reset(),ve.buildPath(ct,ve.shape,Te),ct.toStatic(),ve.pathUpdated()),et&&ct.rebuildPath(fe,We?He:1),On&&(fe.setLineDash(On),fe.lineDashOffset=jn),Te||(we.strokeFirst?(Ee&&b(fe,we),Ve&&K(fe,we)):(Ve&&K(fe,we),Ee&&b(fe,we))),On&&fe.setLineDash([])}(fe,ve,St,ct),ct&&(we.batchFill=St.fill||"",we.batchStroke=St.stroke||"")):ve instanceof Ce.Z?(3!==we.lastDrawType&&(We=!0,we.lastDrawType=3),V(fe,ve,$e,We,we),function q(fe,ve,we){var Te,Ae=we.text;if(null!=Ae&&(Ae+=""),Ae){fe.font=we.font||re.Uo,fe.textAlign=we.textAlign,fe.textBaseline=we.textBaseline;var Ee=void 0,Ve=void 0;fe.setLineDash&&we.lineDash&&(Ee=(Te=(0,j.a)(ve))[0],Ve=Te[1]),Ee&&(fe.setLineDash(Ee),fe.lineDashOffset=Ve),we.strokeFirst?(ee(we)&&fe.strokeText(Ae,we.x,we.y),ie(we)&&fe.fillText(Ae,we.x,we.y)):(ie(we)&&fe.fillText(Ae,we.x,we.y),ee(we)&&fe.strokeText(Ae,we.x,we.y)),Ee&&fe.setLineDash([])}}(fe,ve,St)):ve instanceof be.ZP?(2!==we.lastDrawType&&(We=!0,we.lastDrawType=2),function P(fe,ve,we,Te,Ae){J(fe,oe(ve,Ae.inHover),we&&oe(we,Ae.inHover),Te,Ae)}(fe,ve,$e,We,we),function F(fe,ve,we){var Te=ve.__image=(0,le.Gq)(we.image,ve.__image,ve,ve.onload);if(Te&&(0,le.v5)(Te)){var Ae=we.x||0,Ee=we.y||0,Ve=ve.getWidth(),He=ve.getHeight(),We=Te.width/Te.height;if(null==Ve&&null!=He?Ve=He*We:null==He&&null!=Ve?He=Ve/We:null==Ve&&null==He&&(Ve=Te.width,He=Te.height),we.sWidth&&we.sHeight)fe.drawImage(Te,$e=we.sx||0,ct=we.sy||0,we.sWidth,we.sHeight,Ae,Ee,Ve,He);else if(we.sx&&we.sy){var $e,ct;fe.drawImage(Te,$e=we.sx,ct=we.sy,Ve-$e,He-ct,Ae,Ee,Ve,He)}else fe.drawImage(Te,Ae,Ee,Ve,He)}}(fe,ve,St)):ve.getTemporalDisplayables&&(4!==we.lastDrawType&&(We=!0,we.lastDrawType=4),function xe(fe,ve,we){var Te=ve.getDisplayables(),Ae=ve.getTemporalDisplayables();fe.save();var Ve,He,Ee={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:we.viewWidth,viewHeight:we.viewHeight,inHover:we.inHover};for(Ve=ve.getCursor(),He=Te.length;Ve<He;Ve++)(We=Te[Ve]).beforeBrush&&We.beforeBrush(),We.innerBeforeBrush(),ne(fe,We,Ee,Ve===He-1),We.innerAfterBrush(),We.afterBrush&&We.afterBrush(),Ee.prevEl=We;for(var $e=0,ct=Ae.length;$e<ct;$e++){var We;(We=Ae[$e]).beforeBrush&&We.beforeBrush(),We.innerBeforeBrush(),ne(fe,We,Ee,$e===ct-1),We.innerAfterBrush(),We.afterBrush&&We.afterBrush(),Ee.prevEl=We}ve.clearTemporalDisplayables(),ve.notClear=!0,fe.restore()}(fe,ve,we)),ct&&Te&&ae(fe,we),ve.innerAfterBrush(),ve.afterBrush&&ve.afterBrush(),we.prevEl=ve,ve.__dirty=0,ve.__isRendered=!0}}},7072:(Vt,Qe,H)=>{function ue(he){return isFinite(he)}function ye(he,j,X){for(var re="radial"===j.type?function le(he,j,X){var re=X.width,U=X.height,ee=Math.min(re,U),$=j.x??.5,ie=j.y??.5,K=j.r??.5;return j.global||($=$*re+X.x,ie=ie*U+X.y,K*=ee),$=ue($)?$:.5,ie=ue(ie)?ie:.5,K=K>=0&&ue(K)?K:.5,he.createRadialGradient($,ie,0,$,ie,K)}(he,j,X):function Se(he,j,X){var re=j.x??0,U=j.x2??1,ee=j.y??0,$=j.y2??0;return j.global||(re=re*X.width+X.x,U=U*X.width+X.x,ee=ee*X.height+X.y,$=$*X.height+X.y),re=ue(re)?re:0,U=ue(U)?U:1,ee=ue(ee)?ee:0,$=ue($)?$:0,he.createLinearGradient(re,ee,U,$)}(he,j,X),U=j.colorStops,ee=0;ee<U.length;ee++)re.addColorStop(U[ee].offset,U[ee].color);return re}function ge(he,j){if(he===j||!he&&!j)return!1;if(!he||!j||he.length!==j.length)return!0;for(var X=0;X<he.length;X++)if(he[X]!==j[X])return!0;return!1}function be(he){return parseInt(he,10)}function Ce(he,j,X){var re=["width","height"][j],U=["clientWidth","clientHeight"][j],ee=["paddingLeft","paddingTop"][j],$=["paddingRight","paddingBottom"][j];if(null!=X[re]&&"auto"!==X[re])return parseFloat(X[re]);var ie=document.defaultView.getComputedStyle(he);return(he[U]||be(ie[re])||be(he.style[re]))-(be(ie[ee])||0)-(be(ie[$])||0)|0}H.d(Qe,{ZF:()=>ye,ap:()=>Ce,cF:()=>ge})},6704:(Vt,Qe,H)=>{H.d(Qe,{Ak:()=>ge,GD:()=>Ce,KL:()=>ye,iv:()=>he,vU:()=>be});var Se=1;H(169).Z.hasGlobalWindow&&(Se=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var ye=Se,ge=.4,be="#333",Ce="#ccc",he="#eee"},4443:(Vt,Qe,H)=>{function ue(Se,le,ye,ge,be,Ce,he){if(0===be)return!1;var X,j=be;if(he>le+j&&he>ge+j||he<le-j&&he<ge-j||Ce>Se+j&&Ce>ye+j||Ce<Se-j&&Ce<ye-j)return!1;if(Se===ye)return Math.abs(Ce-Se)<=j/2;var U=(X=(le-ge)/(Se-ye))*Ce-he+(Se*ge-ye*le)/(Se-ye);return U*U/(X*X+1)<=j/2*j/2}H.d(Qe,{m:()=>ue})},1995:(Vt,Qe,H)=>{H.d(Qe,{X:()=>ye});var ue=H(7703);function le(ge,be){return Math.abs(ge-be)<1e-8}function ye(ge,be,Ce){var he=0,j=ge[0];if(!j)return!1;for(var X=1;X<ge.length;X++){var re=ge[X];he+=(0,ue.Z)(j[0],j[1],re[0],re[1],be,Ce),j=re}var U=ge[0];return(!le(j[0],U[0])||!le(j[1],U[1]))&&(he+=(0,ue.Z)(j[0],j[1],U[0],U[1],be,Ce)),0!==he}},7014:(Vt,Qe,H)=>{H.d(Qe,{m:()=>Se});var ue=H(9969);function Se(le,ye,ge,be,Ce,he,j,X,re){if(0===j)return!1;var U=j;return!(re>ye+U&&re>be+U&&re>he+U||re<ye-U&&re<be-U&&re<he-U||X>le+U&&X>ge+U&&X>Ce+U||X<le-U&&X<ge-U&&X<Ce-U)&&(0,ue.Wr)(le,ye,ge,be,Ce,he,X,re,null)<=U/2}},1790:(Vt,Qe,H)=>{H.d(Qe,{Dp:()=>X,GM:()=>U,M3:()=>he,dz:()=>ge,lP:()=>Ce,mU:()=>j,wI:()=>ee});var ue=H(7021),Se=H(7148),le=H(5730),ye={};function ge($,ie){var K=ye[ie=ie||le.Uo];K||(K=ye[ie]=new Se.ZP(500));var b=K.get($);return null==b&&(b=le.qW.measureText($,ie).width,K.put($,b)),b}function be($,ie,K,b){var Y=ge($,ie),Q=X(ie),F=he(0,Y,K),q=j(0,Q,b);return new ue.Z(F,q,Y,Q)}function Ce($,ie,K,b){var Y=(($||"")+"").split("\n");if(1===Y.length)return be(Y[0],ie,K,b);for(var F=new ue.Z(0,0,0,0),q=0;q<Y.length;q++){var G=be(Y[q],ie,K,b);0===q?F.copy(G):F.union(G)}return F}function he($,ie,K){return"right"===K?$-=ie:"center"===K&&($-=ie/2),$}function j($,ie,K){return"middle"===K?$-=ie/2:"bottom"===K&&($-=ie),$}function X($){return ge("\u56fd",$)}function U($,ie){return"string"==typeof $?$.lastIndexOf("%")>=0?parseFloat($)/100*ie:parseFloat($):$}function ee($,ie,K){var b=ie.position||"inside",Y=null!=ie.distance?ie.distance:5,Q=K.height,F=K.width,q=Q/2,G=K.x,W=K.y,J="left",V="top";if(b instanceof Array)G+=U(b[0],K.width),W+=U(b[1],K.height),J=null,V=null;else switch(b){case"left":G-=Y,W+=q,J="right",V="middle";break;case"right":G+=Y+F,W+=q,V="middle";break;case"top":G+=F/2,W-=Y,J="center",V="bottom";break;case"bottom":G+=F/2,W+=Q+Y,J="center";break;case"inside":G+=F/2,W+=q,J="center",V="middle";break;case"insideLeft":G+=Y,W+=q,V="middle";break;case"insideRight":G+=F-Y,W+=q,J="right",V="middle";break;case"insideTop":G+=F/2,W+=Y,J="center";break;case"insideBottom":G+=F/2,W+=Q-Y,J="center",V="bottom";break;case"insideTopLeft":G+=Y,W+=Y;break;case"insideTopRight":G+=F-Y,W+=Y,J="right";break;case"insideBottomLeft":G+=Y,W+=Q-Y,V="bottom";break;case"insideBottomRight":G+=F-Y,W+=Q-Y,J="right",V="bottom"}return($=$||{}).x=G,$.y=W,$.align=J,$.verticalAlign=V,$}},3416:(Vt,Qe,H)=>{H.d(Qe,{m:()=>Se});var ue=2*Math.PI;function Se(le){return(le%=ue)<0&&(le+=ue),le}},7703:(Vt,Qe,H)=>{function ue(Se,le,ye,ge,be,Ce){if(Ce>le&&Ce>ge||Ce<le&&Ce<ge||ge===le)return 0;var he=(Ce-le)/(ge-le),j=ge<le?1:-1;(1===he||0===he)&&(j=ge<le?.5:-.5);var X=he*(ye-Se)+Se;return X===be?1/0:X>be?j:0}H.d(Qe,{Z:()=>ue})},7021:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>U});var ue=H(3481),Se=H(7564),le=Math.min,ye=Math.max,ge=new Se.Z,be=new Se.Z,Ce=new Se.Z,he=new Se.Z,j=new Se.Z,X=new Se.Z;const U=function(){function ee($,ie,K,b){K<0&&($+=K,K=-K),b<0&&(ie+=b,b=-b),this.x=$,this.y=ie,this.width=K,this.height=b}return ee.prototype.union=function($){var ie=le($.x,this.x),K=le($.y,this.y);this.width=isFinite(this.x)&&isFinite(this.width)?ye($.x+$.width,this.x+this.width)-ie:$.width,this.height=isFinite(this.y)&&isFinite(this.height)?ye($.y+$.height,this.y+this.height)-K:$.height,this.x=ie,this.y=K},ee.prototype.applyTransform=function($){ee.applyTransform(this,this,$)},ee.prototype.calculateTransform=function($){var K=$.width/this.width,b=$.height/this.height,Y=ue.create();return ue.translate(Y,Y,[-this.x,-this.y]),ue.scale(Y,Y,[K,b]),ue.translate(Y,Y,[$.x,$.y]),Y},ee.prototype.intersect=function($,ie){if(!$)return!1;$ instanceof ee||($=ee.create($));var K=this,b=K.x,Y=K.x+K.width,Q=K.y,F=K.y+K.height,q=$.x,G=$.x+$.width,W=$.y,J=$.y+$.height,V=!(Y<q||G<b||F<W||J<Q);if(ie){var P=1/0,T=0,R=Math.abs(Y-q),E=Math.abs(G-b),M=Math.abs(F-W),A=Math.abs(J-Q),O=Math.min(R,E),B=Math.min(M,A);Y<q||G<b?O>T&&(T=O,Se.Z.set(X,R<E?-R:E,0)):O<P&&(P=O,Se.Z.set(j,R<E?R:-E,0)),F<W||J<Q?B>T&&(T=B,Se.Z.set(X,0,M<A?-M:A)):O<P&&(P=O,Se.Z.set(j,0,M<A?M:-A))}return ie&&Se.Z.copy(ie,V?j:X),V},ee.prototype.contain=function($,ie){var K=this;return $>=K.x&&$<=K.x+K.width&&ie>=K.y&&ie<=K.y+K.height},ee.prototype.clone=function(){return new ee(this.x,this.y,this.width,this.height)},ee.prototype.copy=function($){ee.copy(this,$)},ee.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},ee.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},ee.prototype.isZero=function(){return 0===this.width||0===this.height},ee.create=function($){return new ee($.x,$.y,$.width,$.height)},ee.copy=function($,ie){$.x=ie.x,$.y=ie.y,$.width=ie.width,$.height=ie.height},ee.applyTransform=function($,ie,K){if(K){if(K[1]<1e-5&&K[1]>-1e-5&&K[2]<1e-5&&K[2]>-1e-5){var b=K[0],Y=K[3],F=K[5];return $.x=ie.x*b+K[4],$.y=ie.y*Y+F,$.width=ie.width*b,$.height=ie.height*Y,$.width<0&&($.x+=$.width,$.width=-$.width),void($.height<0&&($.y+=$.height,$.height=-$.height))}ge.x=Ce.x=ie.x,ge.y=he.y=ie.y,be.x=he.x=ie.x+ie.width,be.y=Ce.y=ie.y+ie.height,ge.transform(K),he.transform(K),be.transform(K),Ce.transform(K),$.x=le(ge.x,be.x,Ce.x,he.x),$.y=le(ge.y,be.y,Ce.y,he.y);var q=ye(ge.x,be.x,Ce.x,he.x),G=ye(ge.y,be.y,Ce.y,he.y);$.width=q-$.x,$.height=G-$.y}else $!==ie&&ee.copy($,ie)},ee}()},6801:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>Se});const Se=function(){function le(ye){ye&&(this._$eventProcessor=ye)}return le.prototype.on=function(ye,ge,be,Ce){this._$handlers||(this._$handlers={});var he=this._$handlers;if("function"==typeof ge&&(Ce=be,be=ge,ge=null),!be||!ye)return this;var j=this._$eventProcessor;null!=ge&&j&&j.normalizeQuery&&(ge=j.normalizeQuery(ge)),he[ye]||(he[ye]=[]);for(var X=0;X<he[ye].length;X++)if(he[ye][X].h===be)return this;var re={h:be,query:ge,ctx:Ce||this,callAtLast:be.zrEventfulCallAtLast},U=he[ye].length-1,ee=he[ye][U];return ee&&ee.callAtLast?he[ye].splice(U,0,re):he[ye].push(re),this},le.prototype.isSilent=function(ye){var ge=this._$handlers;return!ge||!ge[ye]||!ge[ye].length},le.prototype.off=function(ye,ge){var be=this._$handlers;if(!be)return this;if(!ye)return this._$handlers={},this;if(ge){if(be[ye]){for(var Ce=[],he=0,j=be[ye].length;he<j;he++)be[ye][he].h!==ge&&Ce.push(be[ye][he]);be[ye]=Ce}be[ye]&&0===be[ye].length&&delete be[ye]}else delete be[ye];return this},le.prototype.trigger=function(ye){for(var ge=[],be=1;be<arguments.length;be++)ge[be-1]=arguments[be];if(!this._$handlers)return this;var Ce=this._$handlers[ye],he=this._$eventProcessor;if(Ce)for(var j=ge.length,X=Ce.length,re=0;re<X;re++){var U=Ce[re];if(!he||!he.filter||null==U.query||he.filter(ye,U.query))switch(j){case 0:U.h.call(U.ctx);break;case 1:U.h.call(U.ctx,ge[0]);break;case 2:U.h.call(U.ctx,ge[0],ge[1]);break;default:U.h.apply(U.ctx,ge)}}return he&&he.afterTrigger&&he.afterTrigger(ye),this},le.prototype.triggerWithContext=function(ye){for(var ge=[],be=1;be<arguments.length;be++)ge[be-1]=arguments[be];if(!this._$handlers)return this;var Ce=this._$handlers[ye],he=this._$eventProcessor;if(Ce)for(var j=ge.length,X=ge[j-1],re=Ce.length,U=0;U<re;U++){var ee=Ce[U];if(!he||!he.filter||null==ee.query||he.filter(ye,ee.query))switch(j){case 0:ee.h.call(X);break;case 1:ee.h.call(X,ge[0]);break;case 2:ee.h.call(X,ge[0],ge[1]);break;default:ee.h.apply(X,ge.slice(1,j-1))}}return he&&he.afterTrigger&&he.afterTrigger(ye),this},le}()},7148:(Vt,Qe,H)=>{H.d(Qe,{ZP:()=>ye});var ue=function ge(be){this.value=be},Se=function(){function ge(){this._len=0}return ge.prototype.insert=function(be){var Ce=new ue(be);return this.insertEntry(Ce),Ce},ge.prototype.insertEntry=function(be){this.head?(this.tail.next=be,be.prev=this.tail,be.next=null,this.tail=be):this.head=this.tail=be,this._len++},ge.prototype.remove=function(be){var Ce=be.prev,he=be.next;Ce?Ce.next=he:this.head=he,he?he.prev=Ce:this.tail=Ce,be.next=be.prev=null,this._len--},ge.prototype.len=function(){return this._len},ge.prototype.clear=function(){this.head=this.tail=null,this._len=0},ge}();const ye=function(){function ge(be){this._list=new Se,this._maxSize=10,this._map={},this._maxSize=be}return ge.prototype.put=function(be,Ce){var he=this._list,j=this._map,X=null;if(null==j[be]){var re=he.len(),U=this._lastRemovedEntry;if(re>=this._maxSize&&re>0){var ee=he.head;he.remove(ee),delete j[ee.key],X=ee.value,this._lastRemovedEntry=ee}U?U.value=Ce:U=new ue(Ce),U.key=be,he.insertEntry(U),j[be]=U}return X},ge.prototype.get=function(be){var Ce=this._map[be],he=this._list;if(null!=Ce)return Ce!==he.tail&&(he.remove(Ce),he.insertEntry(Ce)),Ce.value},ge.prototype.clear=function(){this._list.clear(),this._map={}},ge.prototype.len=function(){return this._list.len()},ge}()},6217:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>Ce});var ue=H(7564),Se=[0,0],le=[0,0],ye=new ue.Z,ge=new ue.Z;const Ce=function(){function he(j,X){this._corners=[],this._axes=[],this._origin=[0,0];for(var re=0;re<4;re++)this._corners[re]=new ue.Z;for(re=0;re<2;re++)this._axes[re]=new ue.Z;j&&this.fromBoundingRect(j,X)}return he.prototype.fromBoundingRect=function(j,X){var re=this._corners,U=this._axes,ee=j.x,$=j.y,ie=ee+j.width,K=$+j.height;if(re[0].set(ee,$),re[1].set(ie,$),re[2].set(ie,K),re[3].set(ee,K),X)for(var b=0;b<4;b++)re[b].transform(X);for(ue.Z.sub(U[0],re[1],re[0]),ue.Z.sub(U[1],re[3],re[0]),U[0].normalize(),U[1].normalize(),b=0;b<2;b++)this._origin[b]=U[b].dot(re[0])},he.prototype.intersect=function(j,X){var re=!0,U=!X;return ye.set(1/0,1/0),ge.set(0,0),!this._intersectCheckOneSide(this,j,ye,ge,U,1)&&(re=!1,U)||!this._intersectCheckOneSide(j,this,ye,ge,U,-1)&&(re=!1,U)||U||ue.Z.copy(X,re?ye:ge),re},he.prototype._intersectCheckOneSide=function(j,X,re,U,ee,$){for(var ie=!0,K=0;K<2;K++){var b=this._axes[K];if(this._getProjMinMaxOnAxis(K,j._corners,Se),this._getProjMinMaxOnAxis(K,X._corners,le),Se[1]<le[0]||Se[0]>le[1]){if(ie=!1,ee)return ie;var Y=Math.abs(le[0]-Se[1]),Q=Math.abs(Se[0]-le[1]);Math.min(Y,Q)>U.len()&&ue.Z.scale(U,b,Y<Q?-Y*$:Q*$)}else re&&(Y=Math.abs(le[0]-Se[1]),Q=Math.abs(Se[0]-le[1]),Math.min(Y,Q)<re.len()&&ue.Z.scale(re,b,Y<Q?Y*$:-Q*$))}return ie},he.prototype._getProjMinMaxOnAxis=function(j,X,re){for(var U=this._axes[j],ee=this._origin,$=X[0].dot(U)+ee[j],ie=$,K=$,b=1;b<X.length;b++){var Y=X[b].dot(U)+ee[j];ie=Math.min(Y,ie),K=Math.max(Y,K)}re[0]=ie,re[1]=K},he}()},7349:(Vt,Qe,H)=>{H.d(Qe,{L:()=>W,Z:()=>V});var ue=H(8221),Se=H(7021),le=H(6704),ye=H(9110),ge=H(9969),be={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Ce=[],he=[],j=[],X=[],re=[],U=[],ee=Math.min,$=Math.max,ie=Math.cos,K=Math.sin,b=Math.abs,Y=Math.PI,Q=2*Y,F=typeof Float32Array<"u",q=[];function G(P){return Math.round(P/Y*1e8)/1e8%2*Y}function W(P,T){var R=G(P[0]);R<0&&(R+=Q);var M=P[1];M+=R-P[0],!T&&M-R>=Q?M=R+Q:T&&R-M>=Q?M=R-Q:!T&&R>M?M=R+(Q-G(R-M)):T&&R<M&&(M=R-(Q-G(M-R))),P[0]=R,P[1]=M}const V=function(){function P(T){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,T&&(this._saveData=!1),this._saveData&&(this.data=[])}return P.prototype.increaseVersion=function(){this._version++},P.prototype.getVersion=function(){return this._version},P.prototype.setScale=function(T,R,E){(E=E||0)>0&&(this._ux=b(E/le.KL/T)||0,this._uy=b(E/le.KL/R)||0)},P.prototype.setDPR=function(T){this.dpr=T},P.prototype.setContext=function(T){this._ctx=T},P.prototype.getContext=function(){return this._ctx},P.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},P.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},P.prototype.moveTo=function(T,R){return this._drawPendingPt(),this.addData(be.M,T,R),this._ctx&&this._ctx.moveTo(T,R),this._x0=T,this._y0=R,this._xi=T,this._yi=R,this},P.prototype.lineTo=function(T,R){var E=b(T-this._xi),M=b(R-this._yi),A=E>this._ux||M>this._uy;if(this.addData(be.L,T,R),this._ctx&&A&&this._ctx.lineTo(T,R),A)this._xi=T,this._yi=R,this._pendingPtDist=0;else{var O=E*E+M*M;O>this._pendingPtDist&&(this._pendingPtX=T,this._pendingPtY=R,this._pendingPtDist=O)}return this},P.prototype.bezierCurveTo=function(T,R,E,M,A,O){return this._drawPendingPt(),this.addData(be.C,T,R,E,M,A,O),this._ctx&&this._ctx.bezierCurveTo(T,R,E,M,A,O),this._xi=A,this._yi=O,this},P.prototype.quadraticCurveTo=function(T,R,E,M){return this._drawPendingPt(),this.addData(be.Q,T,R,E,M),this._ctx&&this._ctx.quadraticCurveTo(T,R,E,M),this._xi=E,this._yi=M,this},P.prototype.arc=function(T,R,E,M,A,O){return this._drawPendingPt(),q[0]=M,q[1]=A,W(q,O),this.addData(be.A,T,R,E,E,M=q[0],(A=q[1])-M,0,O?0:1),this._ctx&&this._ctx.arc(T,R,E,M,A,O),this._xi=ie(A)*E+T,this._yi=K(A)*E+R,this},P.prototype.arcTo=function(T,R,E,M,A){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(T,R,E,M,A),this},P.prototype.rect=function(T,R,E,M){return this._drawPendingPt(),this._ctx&&this._ctx.rect(T,R,E,M),this.addData(be.R,T,R,E,M),this},P.prototype.closePath=function(){this._drawPendingPt(),this.addData(be.Z);var T=this._ctx,R=this._x0,E=this._y0;return T&&T.closePath(),this._xi=R,this._yi=E,this},P.prototype.fill=function(T){T&&T.fill(),this.toStatic()},P.prototype.stroke=function(T){T&&T.stroke(),this.toStatic()},P.prototype.len=function(){return this._len},P.prototype.setData=function(T){var R=T.length;(!this.data||this.data.length!==R)&&F&&(this.data=new Float32Array(R));for(var E=0;E<R;E++)this.data[E]=T[E];this._len=R},P.prototype.appendPath=function(T){T instanceof Array||(T=[T]);for(var R=T.length,E=0,M=this._len,A=0;A<R;A++)E+=T[A].len();for(F&&this.data instanceof Float32Array&&(this.data=new Float32Array(M+E)),A=0;A<R;A++)for(var O=T[A].data,B=0;B<O.length;B++)this.data[M++]=O[B];this._len=M},P.prototype.addData=function(T,R,E,M,A,O,B,ce,ae){if(this._saveData){var oe=this.data;this._len+arguments.length>oe.length&&(this._expandData(),oe=this.data);for(var de=0;de<arguments.length;de++)oe[this._len++]=arguments[de]}},P.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},P.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var T=[],R=0;R<this._len;R++)T[R]=this.data[R];this.data=T}},P.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var T=this.data;T instanceof Array&&(T.length=this._len,F&&this._len>11&&(this.data=new Float32Array(T)))}},P.prototype.getBoundingRect=function(){j[0]=j[1]=re[0]=re[1]=Number.MAX_VALUE,X[0]=X[1]=U[0]=U[1]=-Number.MAX_VALUE;var O,T=this.data,R=0,E=0,M=0,A=0;for(O=0;O<this._len;){var B=T[O++],ce=1===O;switch(ce&&(M=R=T[O],A=E=T[O+1]),B){case be.M:R=M=T[O++],E=A=T[O++],re[0]=M,re[1]=A,U[0]=M,U[1]=A;break;case be.L:(0,ye.u4)(R,E,T[O],T[O+1],re,U),R=T[O++],E=T[O++];break;case be.C:(0,ye.H9)(R,E,T[O++],T[O++],T[O++],T[O++],T[O],T[O+1],re,U),R=T[O++],E=T[O++];break;case be.Q:(0,ye.mJ)(R,E,T[O++],T[O++],T[O],T[O+1],re,U),R=T[O++],E=T[O++];break;case be.A:var ae=T[O++],oe=T[O++],de=T[O++],ne=T[O++],xe=T[O++],fe=T[O++]+xe;O+=1;var ve=!T[O++];ce&&(M=ie(xe)*de+ae,A=K(xe)*ne+oe),(0,ye.qL)(ae,oe,de,ne,xe,fe,ve,re,U),R=ie(fe)*de+ae,E=K(fe)*ne+oe;break;case be.R:M=R=T[O++],A=E=T[O++];var we=T[O++],Te=T[O++];(0,ye.u4)(M,A,M+we,A+Te,re,U);break;case be.Z:R=M,E=A}ue.min(j,j,re),ue.max(X,X,U)}return 0===O&&(j[0]=j[1]=X[0]=X[1]=0),new Se.Z(j[0],j[1],X[0]-j[0],X[1]-j[1])},P.prototype._calculateLength=function(){var T=this.data,R=this._len,E=this._ux,M=this._uy,A=0,O=0,B=0,ce=0;this._pathSegLen||(this._pathSegLen=[]);for(var ae=this._pathSegLen,oe=0,de=0,ne=0;ne<R;){var xe=T[ne++],fe=1===ne;fe&&(B=A=T[ne],ce=O=T[ne+1]);var ve=-1;switch(xe){case be.M:A=B=T[ne++],O=ce=T[ne++];break;case be.L:var we=T[ne++],Ee=(Te=T[ne++])-O;(b(Ae=we-A)>E||b(Ee)>M||ne===R-1)&&(ve=Math.sqrt(Ae*Ae+Ee*Ee),A=we,O=Te);break;case be.C:var Ve=T[ne++],He=T[ne++],Te=(we=T[ne++],T[ne++]),We=T[ne++],$e=T[ne++];ve=(0,ge.Ci)(A,O,Ve,He,we,Te,We,$e,10),A=We,O=$e;break;case be.Q:Ve=T[ne++],He=T[ne++],we=T[ne++],Te=T[ne++],ve=(0,ge.wQ)(A,O,Ve,He,we,Te,10),A=we,O=Te;break;case be.A:var ct=T[ne++],St=T[ne++],_t=T[ne++],Ot=T[ne++],Ht=T[ne++],an=T[ne++],hn=an+Ht;ne+=1,ne++,fe&&(B=ie(Ht)*_t+ct,ce=K(Ht)*Ot+St),ve=$(_t,Ot)*ee(Q,Math.abs(an)),A=ie(hn)*_t+ct,O=K(hn)*Ot+St;break;case be.R:B=A=T[ne++],ce=O=T[ne++],ve=2*T[ne++]+2*T[ne++];break;case be.Z:var Ae=B-A;Ee=ce-O,ve=Math.sqrt(Ae*Ae+Ee*Ee),A=B,O=ce}ve>=0&&(ae[de++]=ve,oe+=ve)}return this._pathLen=oe,oe},P.prototype.rebuildPath=function(T,R){var B,ce,ae,oe,de,ne,fe,Ae,Ve,He,E=this.data,M=this._ux,A=this._uy,O=this._len,xe=R<1,we=0,Te=0,Ee=0;if(!xe||(this._pathSegLen||this._calculateLength(),fe=this._pathSegLen,Ae=R*this._pathLen))e:for(var We=0;We<O;){var $e=E[We++],ct=1===We;switch(ct&&(B=ae=E[We],ce=oe=E[We+1]),$e!==be.L&&Ee>0&&(T.lineTo(Ve,He),Ee=0),$e){case be.M:B=ae=E[We++],ce=oe=E[We++],T.moveTo(ae,oe);break;case be.L:de=E[We++],ne=E[We++];var St=b(de-ae),_t=b(ne-oe);if(St>M||_t>A){if(xe){if(we+(Ot=fe[Te++])>Ae){T.lineTo(ae*(1-(Ht=(Ae-we)/Ot))+de*Ht,oe*(1-Ht)+ne*Ht);break e}we+=Ot}T.lineTo(de,ne),ae=de,oe=ne,Ee=0}else{var an=St*St+_t*_t;an>Ee&&(Ve=de,He=ne,Ee=an)}break;case be.C:var hn=E[We++],Vn=E[We++],sr=E[We++],$n=E[We++],gr=E[We++],er=E[We++];if(xe){if(we+(Ot=fe[Te++])>Ae){(0,ge.Vz)(ae,hn,sr,gr,Ht=(Ae-we)/Ot,Ce),(0,ge.Vz)(oe,Vn,$n,er,Ht,he),T.bezierCurveTo(Ce[1],he[1],Ce[2],he[2],Ce[3],he[3]);break e}we+=Ot}T.bezierCurveTo(hn,Vn,sr,$n,gr,er),ae=gr,oe=er;break;case be.Q:if(hn=E[We++],Vn=E[We++],sr=E[We++],$n=E[We++],xe){if(we+(Ot=fe[Te++])>Ae){(0,ge.Lx)(ae,hn,sr,Ht=(Ae-we)/Ot,Ce),(0,ge.Lx)(oe,Vn,$n,Ht,he),T.quadraticCurveTo(Ce[1],he[1],Ce[2],he[2]);break e}we+=Ot}T.quadraticCurveTo(hn,Vn,sr,$n),ae=sr,oe=$n;break;case be.A:var Kt=E[We++],cn=E[We++],On=E[We++],jn=E[We++],et=E[We++],Tt=E[We++],jt=E[We++],Rt=!E[We++],fn=On>jn?On:jn,fr=b(On-jn)>.001,pr=et+Tt,rt=!1;if(xe&&(we+(Ot=fe[Te++])>Ae&&(pr=et+Tt*(Ae-we)/Ot,rt=!0),we+=Ot),fr&&T.ellipse?T.ellipse(Kt,cn,On,jn,jt,et,pr,Rt):T.arc(Kt,cn,fn,et,pr,Rt),rt)break e;ct&&(B=ie(et)*On+Kt,ce=K(et)*jn+cn),ae=ie(pr)*On+Kt,oe=K(pr)*jn+cn;break;case be.R:B=ae=E[We],ce=oe=E[We+1],de=E[We++],ne=E[We++];var ot=E[We++],st=E[We++];if(xe){if(we+(Ot=fe[Te++])>Ae){var je=Ae-we;T.moveTo(de,ne),T.lineTo(de+ee(je,ot),ne),(je-=ot)>0&&T.lineTo(de+ot,ne+ee(je,st)),(je-=st)>0&&T.lineTo(de+$(ot-je,0),ne+st),(je-=ot)>0&&T.lineTo(de,ne+$(st-je,0));break e}we+=Ot}T.rect(de,ne,ot,st);break;case be.Z:if(xe){var Ot;if(we+(Ot=fe[Te++])>Ae){var Ht;T.lineTo(ae*(1-(Ht=(Ae-we)/Ot))+B*Ht,oe*(1-Ht)+ce*Ht);break e}we+=Ot}T.closePath(),ae=B,oe=ce}}},P.prototype.clone=function(){var T=new P,R=this.data;return T.data=R.slice?R.slice():Array.prototype.slice.call(R),T._len=this._len,T},P.CMD=be,P.initDefaultProps=((T=P.prototype)._saveData=!0,T._ux=0,T._uy=0,T._pendingPtDist=0,void(T._version=0)),P;var T}()},7564:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>Se});const Se=function(){function le(ye,ge){this.x=ye||0,this.y=ge||0}return le.prototype.copy=function(ye){return this.x=ye.x,this.y=ye.y,this},le.prototype.clone=function(){return new le(this.x,this.y)},le.prototype.set=function(ye,ge){return this.x=ye,this.y=ge,this},le.prototype.equal=function(ye){return ye.x===this.x&&ye.y===this.y},le.prototype.add=function(ye){return this.x+=ye.x,this.y+=ye.y,this},le.prototype.scale=function(ye){this.x*=ye,this.y*=ye},le.prototype.scaleAndAdd=function(ye,ge){this.x+=ye.x*ge,this.y+=ye.y*ge},le.prototype.sub=function(ye){return this.x-=ye.x,this.y-=ye.y,this},le.prototype.dot=function(ye){return this.x*ye.x+this.y*ye.y},le.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},le.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},le.prototype.normalize=function(){var ye=this.len();return this.x/=ye,this.y/=ye,this},le.prototype.distance=function(ye){var ge=this.x-ye.x,be=this.y-ye.y;return Math.sqrt(ge*ge+be*be)},le.prototype.distanceSquare=function(ye){var ge=this.x-ye.x,be=this.y-ye.y;return ge*ge+be*be},le.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},le.prototype.transform=function(ye){if(ye){var ge=this.x,be=this.y;return this.x=ye[0]*ge+ye[2]*be+ye[4],this.y=ye[1]*ge+ye[3]*be+ye[5],this}},le.prototype.toArray=function(ye){return ye[0]=this.x,ye[1]=this.y,ye},le.prototype.fromArray=function(ye){this.x=ye[0],this.y=ye[1]},le.set=function(ye,ge,be){ye.x=ge,ye.y=be},le.copy=function(ye,ge){ye.x=ge.x,ye.y=ge.y},le.len=function(ye){return Math.sqrt(ye.x*ye.x+ye.y*ye.y)},le.lenSquare=function(ye){return ye.x*ye.x+ye.y*ye.y},le.dot=function(ye,ge){return ye.x*ge.x+ye.y*ge.y},le.add=function(ye,ge,be){ye.x=ge.x+be.x,ye.y=ge.y+be.y},le.sub=function(ye,ge,be){ye.x=ge.x-be.x,ye.y=ge.y-be.y},le.scale=function(ye,ge,be){ye.x=ge.x*be,ye.y=ge.y*be},le.scaleAndAdd=function(ye,ge,be,Ce){ye.x=ge.x+be.x*Ce,ye.y=ge.y+be.y*Ce},le.lerp=function(ye,ge,be,Ce){var he=1-Ce;ye.x=he*ge.x+Ce*be.x,ye.y=he*ge.y+Ce*be.y},le}()},9778:(Vt,Qe,H)=>{H.d(Qe,{ZP:()=>ee,dN:()=>re,kY:()=>U});var ue=H(3481),Se=H(8221),le=ue.identity;function ge($){return $>5e-5||$<-5e-5}var be=[],Ce=[],he=ue.create(),j=Math.abs,X=function(){function $(){}return $.prototype.getLocalTransform=function(ie){return $.getLocalTransform(this,ie)},$.prototype.setPosition=function(ie){this.x=ie[0],this.y=ie[1]},$.prototype.setScale=function(ie){this.scaleX=ie[0],this.scaleY=ie[1]},$.prototype.setSkew=function(ie){this.skewX=ie[0],this.skewY=ie[1]},$.prototype.setOrigin=function(ie){this.originX=ie[0],this.originY=ie[1]},$.prototype.needLocalTransform=function(){return ge(this.rotation)||ge(this.x)||ge(this.y)||ge(this.scaleX-1)||ge(this.scaleY-1)||ge(this.skewX)||ge(this.skewY)},$.prototype.updateTransform=function(){var ie=this.parent&&this.parent.transform,K=this.needLocalTransform(),b=this.transform;K||ie?(b=b||ue.create(),K?this.getLocalTransform(b):le(b),ie&&(K?ue.mul(b,ie,b):ue.copy(b,ie)),this.transform=b,this._resolveGlobalScaleRatio(b)):b&&le(b)},$.prototype._resolveGlobalScaleRatio=function(ie){var K=this.globalScaleRatio;if(null!=K&&1!==K){this.getGlobalScale(be);var b=be[0]<0?-1:1,Y=be[1]<0?-1:1,Q=((be[0]-b)*K+b)/be[0]||0,F=((be[1]-Y)*K+Y)/be[1]||0;ie[0]*=Q,ie[1]*=Q,ie[2]*=F,ie[3]*=F}this.invTransform=this.invTransform||ue.create(),ue.invert(this.invTransform,ie)},$.prototype.getComputedTransform=function(){for(var ie=this,K=[];ie;)K.push(ie),ie=ie.parent;for(;ie=K.pop();)ie.updateTransform();return this.transform},$.prototype.setLocalTransform=function(ie){if(ie){var K=ie[0]*ie[0]+ie[1]*ie[1],b=ie[2]*ie[2]+ie[3]*ie[3],Y=Math.atan2(ie[1],ie[0]),Q=Math.PI/2+Y-Math.atan2(ie[3],ie[2]);b=Math.sqrt(b)*Math.cos(Q),K=Math.sqrt(K),this.skewX=Q,this.skewY=0,this.rotation=-Y,this.x=+ie[4],this.y=+ie[5],this.scaleX=K,this.scaleY=b,this.originX=0,this.originY=0}},$.prototype.decomposeTransform=function(){if(this.transform){var ie=this.parent,K=this.transform;ie&&ie.transform&&(ue.mul(Ce,ie.invTransform,K),K=Ce);var b=this.originX,Y=this.originY;(b||Y)&&(he[4]=b,he[5]=Y,ue.mul(Ce,K,he),Ce[4]-=b,Ce[5]-=Y,K=Ce),this.setLocalTransform(K)}},$.prototype.getGlobalScale=function(ie){var K=this.transform;return ie=ie||[],K?(ie[0]=Math.sqrt(K[0]*K[0]+K[1]*K[1]),ie[1]=Math.sqrt(K[2]*K[2]+K[3]*K[3]),K[0]<0&&(ie[0]=-ie[0]),K[3]<0&&(ie[1]=-ie[1]),ie):(ie[0]=1,ie[1]=1,ie)},$.prototype.transformCoordToLocal=function(ie,K){var b=[ie,K],Y=this.invTransform;return Y&&Se.applyTransform(b,b,Y),b},$.prototype.transformCoordToGlobal=function(ie,K){var b=[ie,K],Y=this.transform;return Y&&Se.applyTransform(b,b,Y),b},$.prototype.getLineScale=function(){var ie=this.transform;return ie&&j(ie[0]-1)>1e-10&&j(ie[3]-1)>1e-10?Math.sqrt(j(ie[0]*ie[3]-ie[2]*ie[1])):1},$.prototype.copyTransform=function(ie){U(this,ie)},$.getLocalTransform=function(ie,K){K=K||[];var b=ie.originX||0,Y=ie.originY||0,Q=ie.scaleX,F=ie.scaleY,q=ie.anchorX,G=ie.anchorY,W=ie.rotation||0,J=ie.x,V=ie.y,P=ie.skewX?Math.tan(ie.skewX):0,T=ie.skewY?Math.tan(-ie.skewY):0;if(b||Y||q||G){var R=b+q,E=Y+G;K[4]=-R*Q-P*E*F,K[5]=-E*F-T*R*Q}else K[4]=K[5]=0;return K[0]=Q,K[3]=F,K[1]=T*Q,K[2]=P*F,W&&ue.rotate(K,K,W),K[4]+=b+J,K[5]+=Y+V,K},$.initDefaultProps=((ie=$.prototype).scaleX=ie.scaleY=ie.globalScaleRatio=1,void(ie.x=ie.y=ie.originX=ie.originY=ie.skewX=ie.skewY=ie.rotation=ie.anchorX=ie.anchorY=0)),$;var ie}(),re=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function U($,ie){for(var K=0;K<re.length;K++){var b=re[K];$[b]=ie[b]}}const ee=X},9110:(Vt,Qe,H)=>{H.d(Qe,{H9:()=>ie,mJ:()=>K,qL:()=>b,u4:()=>U,zk:()=>re});var ue=H(8221),Se=H(9969),le=Math.min,ye=Math.max,ge=Math.sin,be=Math.cos,Ce=2*Math.PI,he=ue.create(),j=ue.create(),X=ue.create();function re(Y,Q,F){if(0!==Y.length){for(var q=Y[0],G=q[0],W=q[0],J=q[1],V=q[1],P=1;P<Y.length;P++)G=le(G,(q=Y[P])[0]),W=ye(W,q[0]),J=le(J,q[1]),V=ye(V,q[1]);Q[0]=G,Q[1]=J,F[0]=W,F[1]=V}}function U(Y,Q,F,q,G,W){G[0]=le(Y,F),G[1]=le(Q,q),W[0]=ye(Y,F),W[1]=ye(Q,q)}var ee=[],$=[];function ie(Y,Q,F,q,G,W,J,V,P,T){var R=Se.pP,E=Se.af,M=R(Y,F,G,J,ee);P[0]=1/0,P[1]=1/0,T[0]=-1/0,T[1]=-1/0;for(var A=0;A<M;A++){var O=E(Y,F,G,J,ee[A]);P[0]=le(O,P[0]),T[0]=ye(O,T[0])}for(M=R(Q,q,W,V,$),A=0;A<M;A++){var B=E(Q,q,W,V,$[A]);P[1]=le(B,P[1]),T[1]=ye(B,T[1])}P[0]=le(Y,P[0]),T[0]=ye(Y,T[0]),P[0]=le(J,P[0]),T[0]=ye(J,T[0]),P[1]=le(Q,P[1]),T[1]=ye(Q,T[1]),P[1]=le(V,P[1]),T[1]=ye(V,T[1])}function K(Y,Q,F,q,G,W,J,V){var P=Se.QC,T=Se.Zm,R=ye(le(P(Y,F,G),1),0),E=ye(le(P(Q,q,W),1),0),M=T(Y,F,G,R),A=T(Q,q,W,E);J[0]=le(Y,G,M),J[1]=le(Q,W,A),V[0]=ye(Y,G,M),V[1]=ye(Q,W,A)}function b(Y,Q,F,q,G,W,J,V,P){var T=ue.min,R=ue.max,E=Math.abs(G-W);if(E%Ce<1e-4&&E>1e-4)return V[0]=Y-F,V[1]=Q-q,P[0]=Y+F,void(P[1]=Q+q);if(he[0]=be(G)*F+Y,he[1]=ge(G)*q+Q,j[0]=be(W)*F+Y,j[1]=ge(W)*q+Q,T(V,he,j),R(P,he,j),(G%=Ce)<0&&(G+=Ce),(W%=Ce)<0&&(W+=Ce),G>W&&!J?W+=Ce:G<W&&J&&(G+=Ce),J){var M=W;W=G,G=M}for(var A=0;A<W;A+=Math.PI/2)A>G&&(X[0]=be(A)*F+Y,X[1]=ge(A)*q+Q,T(V,X,V),R(P,X,P))}},9969:(Vt,Qe,H)=>{H.d(Qe,{AZ:()=>q,Ci:()=>Q,Jz:()=>G,Lx:()=>J,QC:()=>W,Vz:()=>b,Wr:()=>V,X_:()=>$,Zm:()=>F,af:()=>ee,kD:()=>ie,pP:()=>K,t1:()=>Y,wQ:()=>P});var ue=H(8221),Se=Math.pow,le=Math.sqrt,be=le(3),Ce=1/3,he=(0,ue.create)(),j=(0,ue.create)(),X=(0,ue.create)();function re(T){return T>-1e-8&&T<1e-8}function U(T){return T>1e-8||T<-1e-8}function ee(T,R,E,M,A){var O=1-A;return O*O*(O*T+3*A*R)+A*A*(A*M+3*O*E)}function $(T,R,E,M,A){var O=1-A;return 3*(((R-T)*O+2*(E-R)*A)*O+(M-E)*A*A)}function ie(T,R,E,M,A,O){var B=M+3*(R-E)-T,ce=3*(E-2*R+T),ae=3*(R-T),oe=T-A,de=ce*ce-3*B*ae,ne=ce*ae-9*B*oe,xe=ae*ae-3*ce*oe,fe=0;if(re(de)&&re(ne))re(ce)?O[0]=0:(ve=-ae/ce)>=0&&ve<=1&&(O[fe++]=ve);else{var we=ne*ne-4*de*xe;if(re(we)){var Te=ne/de,Ae=-Te/2;(ve=-ce/B+Te)>=0&&ve<=1&&(O[fe++]=ve),Ae>=0&&Ae<=1&&(O[fe++]=Ae)}else if(we>0){var Ee=le(we),Ve=de*ce+1.5*B*(-ne+Ee),He=de*ce+1.5*B*(-ne-Ee);(ve=(-ce-((Ve=Ve<0?-Se(-Ve,Ce):Se(Ve,Ce))+(He=He<0?-Se(-He,Ce):Se(He,Ce))))/(3*B))>=0&&ve<=1&&(O[fe++]=ve)}else{var We=(2*de*ce-3*B*ne)/(2*le(de*de*de)),$e=Math.acos(We)/3,ct=le(de),St=Math.cos($e),ve=(-ce-2*ct*St)/(3*B),_t=(Ae=(-ce+ct*(St+be*Math.sin($e)))/(3*B),(-ce+ct*(St-be*Math.sin($e)))/(3*B));ve>=0&&ve<=1&&(O[fe++]=ve),Ae>=0&&Ae<=1&&(O[fe++]=Ae),_t>=0&&_t<=1&&(O[fe++]=_t)}}return fe}function K(T,R,E,M,A){var O=6*E-12*R+6*T,B=9*R+3*M-3*T-9*E,ce=3*R-3*T,ae=0;if(re(B))U(O)&&(oe=-ce/O)>=0&&oe<=1&&(A[ae++]=oe);else{var de=O*O-4*B*ce;if(re(de))A[0]=-O/(2*B);else if(de>0){var oe,ne=le(de),xe=(-O-ne)/(2*B);(oe=(-O+ne)/(2*B))>=0&&oe<=1&&(A[ae++]=oe),xe>=0&&xe<=1&&(A[ae++]=xe)}}return ae}function b(T,R,E,M,A,O){var B=(R-T)*A+T,ce=(E-R)*A+R,ae=(M-E)*A+E,oe=(ce-B)*A+B,de=(ae-ce)*A+ce,ne=(de-oe)*A+oe;O[0]=T,O[1]=B,O[2]=oe,O[3]=ne,O[4]=ne,O[5]=de,O[6]=ae,O[7]=M}function Y(T,R,E,M,A,O,B,ce,ae,oe,de){var ne,ve,we,Te,Ae,xe=.005,fe=1/0;he[0]=ae,he[1]=oe;for(var Ee=0;Ee<1;Ee+=.05)j[0]=ee(T,E,A,B,Ee),j[1]=ee(R,M,O,ce,Ee),(Te=(0,ue.distSquare)(he,j))<fe&&(ne=Ee,fe=Te);fe=1/0;for(var Ve=0;Ve<32&&!(xe<1e-4);Ve++)we=ne+xe,j[0]=ee(T,E,A,B,ve=ne-xe),j[1]=ee(R,M,O,ce,ve),Te=(0,ue.distSquare)(j,he),ve>=0&&Te<fe?(ne=ve,fe=Te):(X[0]=ee(T,E,A,B,we),X[1]=ee(R,M,O,ce,we),Ae=(0,ue.distSquare)(X,he),we<=1&&Ae<fe?(ne=we,fe=Ae):xe*=.5);return de&&(de[0]=ee(T,E,A,B,ne),de[1]=ee(R,M,O,ce,ne)),le(fe)}function Q(T,R,E,M,A,O,B,ce,ae){for(var oe=T,de=R,ne=0,xe=1/ae,fe=1;fe<=ae;fe++){var ve=fe*xe,we=ee(T,E,A,B,ve),Te=ee(R,M,O,ce,ve),Ae=we-oe,Ee=Te-de;ne+=Math.sqrt(Ae*Ae+Ee*Ee),oe=we,de=Te}return ne}function F(T,R,E,M){var A=1-M;return A*(A*T+2*M*R)+M*M*E}function q(T,R,E,M){return 2*((1-M)*(R-T)+M*(E-R))}function G(T,R,E,M,A){var O=T-2*R+E,B=2*(R-T),ce=T-M,ae=0;if(re(O))U(B)&&(oe=-ce/B)>=0&&oe<=1&&(A[ae++]=oe);else{var de=B*B-4*O*ce;if(re(de))(oe=-B/(2*O))>=0&&oe<=1&&(A[ae++]=oe);else if(de>0){var oe,ne=le(de),xe=(-B-ne)/(2*O);(oe=(-B+ne)/(2*O))>=0&&oe<=1&&(A[ae++]=oe),xe>=0&&xe<=1&&(A[ae++]=xe)}}return ae}function W(T,R,E){var M=T+E-2*R;return 0===M?.5:(T-R)/M}function J(T,R,E,M,A){var O=(R-T)*M+T,B=(E-R)*M+R,ce=(B-O)*M+O;A[0]=T,A[1]=O,A[2]=ce,A[3]=ce,A[4]=B,A[5]=E}function V(T,R,E,M,A,O,B,ce,ae){var oe,de=.005,ne=1/0;he[0]=B,he[1]=ce;for(var xe=0;xe<1;xe+=.05)j[0]=F(T,E,A,xe),j[1]=F(R,M,O,xe),(fe=(0,ue.distSquare)(he,j))<ne&&(oe=xe,ne=fe);ne=1/0;for(var ve=0;ve<32&&!(de<1e-4);ve++){var we=oe-de,Te=oe+de;j[0]=F(T,E,A,we),j[1]=F(R,M,O,we);var fe=(0,ue.distSquare)(j,he);if(we>=0&&fe<ne)oe=we,ne=fe;else{X[0]=F(T,E,A,Te),X[1]=F(R,M,O,Te);var Ae=(0,ue.distSquare)(X,he);Te<=1&&Ae<ne?(oe=Te,ne=Ae):de*=.5}}return ae&&(ae[0]=F(T,E,A,oe),ae[1]=F(R,M,O,oe)),le(ne)}function P(T,R,E,M,A,O,B){for(var ce=T,ae=R,oe=0,de=1/B,ne=1;ne<=B;ne++){var xe=ne*de,fe=F(T,E,A,xe),ve=F(R,M,O,xe),we=fe-ce,Te=ve-ae;oe+=Math.sqrt(we*we+Te*Te),ce=fe,ae=ve}return oe}},2425:(Vt,Qe,H)=>{H.d(Qe,{F1:()=>$,UK:()=>re,A4:()=>he,YB:()=>Ce});var ue=H(169),Se=Math.log(2);function le(ie,K,b,Y,Q,F){var q=Y+"-"+Q,G=ie.length;if(F.hasOwnProperty(q))return F[q];if(1===K){var W=Math.round(Math.log((1<<G)-1&~Q)/Se);return ie[b][W]}for(var J=Y|1<<b,V=b+1;Y&1<<V;)V++;for(var P=0,T=0,R=0;T<G;T++){var E=1<<T;E&Q||(P+=(R%2?-1:1)*ie[b][T]*le(ie,K-1,V,J,Q|E,F),R++)}return F[q]=P,P}function ye(ie,K){var b=[[ie[0],ie[1],1,0,0,0,-K[0]*ie[0],-K[0]*ie[1]],[0,0,0,ie[0],ie[1],1,-K[1]*ie[0],-K[1]*ie[1]],[ie[2],ie[3],1,0,0,0,-K[2]*ie[2],-K[2]*ie[3]],[0,0,0,ie[2],ie[3],1,-K[3]*ie[2],-K[3]*ie[3]],[ie[4],ie[5],1,0,0,0,-K[4]*ie[4],-K[4]*ie[5]],[0,0,0,ie[4],ie[5],1,-K[5]*ie[4],-K[5]*ie[5]],[ie[6],ie[7],1,0,0,0,-K[6]*ie[6],-K[6]*ie[7]],[0,0,0,ie[6],ie[7],1,-K[7]*ie[6],-K[7]*ie[7]]],Y={},Q=le(b,8,0,0,0,Y);if(0!==Q){for(var F=[],q=0;q<8;q++)for(var G=0;G<8;G++)null==F[G]&&(F[G]=0),F[G]+=((q+G)%2?-1:1)*le(b,7,0===q?1:0,1<<q,1<<G,Y)/Q*K[q];return function(W,J,V){var P=J*F[6]+V*F[7]+1;W[0]=(J*F[0]+V*F[1]+F[2])/P,W[1]=(J*F[3]+V*F[4]+F[5])/P}}}var ge="___zrEVENTSAVED",be=[];function Ce(ie,K,b,Y,Q){return he(be,K,Y,Q,!0)&&he(ie,b,be[0],be[1])}function he(ie,K,b,Y,Q){if(K.getBoundingClientRect&&ue.Z.domSupported&&!re(K)){var F=K[ge]||(K[ge]={}),q=function j(ie,K){var b=K.markers;if(b)return b;b=K.markers=[];for(var Y=["left","right"],Q=["top","bottom"],F=0;F<4;F++){var q=document.createElement("div"),W=F%2,J=(F>>1)%2;q.style.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",Y[W]+":0",Q[J]+":0",Y[1-W]+":auto",Q[1-J]+":auto",""].join("!important;"),ie.appendChild(q),b.push(q)}return b}(K,F),G=function X(ie,K,b){for(var Y=b?"invTrans":"trans",Q=K[Y],F=K.srcCoords,q=[],G=[],W=!0,J=0;J<4;J++){var V=ie[J].getBoundingClientRect(),P=2*J,T=V.left,R=V.top;q.push(T,R),W=W&&F&&T===F[P]&&R===F[P+1],G.push(ie[J].offsetLeft,ie[J].offsetTop)}return W&&Q?Q:(K.srcCoords=q,K[Y]=b?ye(G,q):ye(q,G))}(q,F,Q);if(G)return G(ie,b,Y),!0}return!1}function re(ie){return"CANVAS"===ie.nodeName.toUpperCase()}var U=/([&<>"'])/g,ee={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function $(ie){return null==ie?"":(ie+"").replace(U,function(K,b){return ee[b]})}},169:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>ge});var ue=function be(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1},le=new function be(){this.browser=new ue,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"};"object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?(le.wxa=!0,le.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?le.worker=!0:typeof navigator>"u"?(le.node=!0,le.svgSupported=!0):function ye(be,Ce){var he=Ce.browser,j=be.match(/Firefox\/([\d.]+)/),X=be.match(/MSIE\s([\d.]+)/)||be.match(/Trident\/.+?rv:(([\d.]+))/),re=be.match(/Edge?\/([\d.]+)/),U=/micromessenger/i.test(be);j&&(he.firefox=!0,he.version=j[1]),X&&(he.ie=!0,he.version=X[1]),re&&(he.edge=!0,he.version=re[1],he.newEdge=+re[1].split(".")[0]>18),U&&(he.weChat=!0),Ce.svgSupported=typeof SVGRect<"u",Ce.touchEventsSupported="ontouchstart"in window&&!he.ie&&!he.edge,Ce.pointerEventsSupported="onpointerdown"in window&&(he.edge||he.ie&&+he.version>=11),Ce.domSupported=typeof document<"u";var ee=document.documentElement.style;Ce.transform3dSupported=(he.ie&&"transition"in ee||he.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in ee)&&!("OTransition"in ee),Ce.transformSupported=Ce.transform3dSupported||he.ie&&+he.version>=9}(navigator.userAgent,le);const ge=le},1170:(Vt,Qe,H)=>{H.d(Qe,{OD:()=>j,Oo:()=>re,eV:()=>be,iP:()=>he,sT:()=>ee,x1:()=>$,xg:()=>U});var ue=H(169),Se=H(2425),le=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ye=[],ge=ue.Z.browser.firefox&&+ue.Z.browser.version.split(".")[0]<39;function be(ie,K,b,Y){return b=b||{},Y?Ce(ie,K,b):ge&&null!=K.layerX&&K.layerX!==K.offsetX?(b.zrX=K.layerX,b.zrY=K.layerY):null!=K.offsetX?(b.zrX=K.offsetX,b.zrY=K.offsetY):Ce(ie,K,b),b}function Ce(ie,K,b){if(ue.Z.domSupported&&ie.getBoundingClientRect){var Y=K.clientX,Q=K.clientY;if((0,Se.UK)(ie)){var F=ie.getBoundingClientRect();return b.zrX=Y-F.left,void(b.zrY=Q-F.top)}if((0,Se.A4)(ye,ie,Y,Q))return b.zrX=ye[0],void(b.zrY=ye[1])}b.zrX=b.zrY=0}function he(ie){return ie||window.event}function j(ie,K,b){if(null!=(K=he(K)).zrX)return K;var Y=K.type;if(Y&&Y.indexOf("touch")>=0){var q="touchend"!==Y?K.targetTouches[0]:K.changedTouches[0];q&&be(ie,q,K,b)}else{be(ie,K,K,b);var F=function X(ie){var K=ie.wheelDelta;if(K)return K;var b=ie.deltaX,Y=ie.deltaY;return null==b||null==Y?K:3*Math.abs(0!==Y?Y:b)*(Y>0?-1:Y<0?1:b>0?-1:1)}(K);K.zrDelta=F?F/120:-(K.detail||0)/3}var G=K.button;return null==K.which&&void 0!==G&&le.test(K.type)&&(K.which=1&G?1:2&G?3:4&G?2:0),K}function re(ie,K,b,Y){ie.addEventListener(K,b,Y)}function U(ie,K,b,Y){ie.removeEventListener(K,b,Y)}var ee=function(ie){ie.preventDefault(),ie.stopPropagation(),ie.cancelBubble=!0};function $(ie){return 2===ie.which||3===ie.which}},3481:(Vt,Qe,H)=>{function ue(){return[1,0,0,1,0,0]}function Se(X){return X[0]=1,X[1]=0,X[2]=0,X[3]=1,X[4]=0,X[5]=0,X}function le(X,re){return X[0]=re[0],X[1]=re[1],X[2]=re[2],X[3]=re[3],X[4]=re[4],X[5]=re[5],X}function ye(X,re,U){var $=re[1]*U[0]+re[3]*U[1],ie=re[0]*U[2]+re[2]*U[3],K=re[1]*U[2]+re[3]*U[3],b=re[0]*U[4]+re[2]*U[5]+re[4],Y=re[1]*U[4]+re[3]*U[5]+re[5];return X[0]=re[0]*U[0]+re[2]*U[1],X[1]=$,X[2]=ie,X[3]=K,X[4]=b,X[5]=Y,X}function ge(X,re,U){return X[0]=re[0],X[1]=re[1],X[2]=re[2],X[3]=re[3],X[4]=re[4]+U[0],X[5]=re[5]+U[1],X}function be(X,re,U){var ee=re[0],$=re[2],ie=re[4],K=re[1],b=re[3],Y=re[5],Q=Math.sin(U),F=Math.cos(U);return X[0]=ee*F+K*Q,X[1]=-ee*Q+K*F,X[2]=$*F+b*Q,X[3]=-$*Q+F*b,X[4]=F*ie+Q*Y,X[5]=F*Y-Q*ie,X}function Ce(X,re,U){var ee=U[0],$=U[1];return X[0]=re[0]*ee,X[1]=re[1]*$,X[2]=re[2]*ee,X[3]=re[3]*$,X[4]=re[4]*ee,X[5]=re[5]*$,X}function he(X,re){var U=re[0],ee=re[2],$=re[4],ie=re[1],K=re[3],b=re[5],Y=U*K-ie*ee;return Y?(X[0]=K*(Y=1/Y),X[1]=-ie*Y,X[2]=-ee*Y,X[3]=U*Y,X[4]=(ee*b-K*$)*Y,X[5]=(ie*$-U*b)*Y,X):null}function j(X){var re=[1,0,0,1,0,0];return le(re,X),re}H.r(Qe),H.d(Qe,{clone:()=>j,copy:()=>le,create:()=>ue,identity:()=>Se,invert:()=>he,mul:()=>ye,rotate:()=>be,scale:()=>Ce,translate:()=>ge})},5730:(Vt,Qe,H)=>{H.d(Qe,{Uo:()=>le,g2:()=>X,n5:()=>ue,qW:()=>j,rk:()=>Se});var re,U,ue=12,Se="sans-serif",le=ue+"px "+Se,he=function Ce(re){var U={};if(typeof JSON>"u")return U;for(var ee=0;ee<re.length;ee++){var $=String.fromCharCode(ee+32),ie=(re.charCodeAt(ee)-20)/100;U[$]=ie}return U}("007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N"),j={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(ee,$){if(!re){var ie=j.createCanvas();re=ie&&ie.getContext("2d")}if(re)return U!==$&&(U=re.font=$||le),re.measureText(ee);ee=ee||"";var K=/^([0-9]*?)px$/.exec($=$||le),b=+(K&&K[1])||ue,Y=0;if($.indexOf("mono")>=0)Y=b*ee.length;else for(var Q=0;Q<ee.length;Q++){var F=he[ee[Q]];Y+=null==F?b:F*b}return{width:Y}},loadImage:function(re,U,ee){var $=new Image;return $.onload=U,$.onerror=ee,$.src=re,$}};function X(re){for(var U in j)re[U]&&(j[U]=re[U])}},9995:(Vt,Qe,H)=>{function ge(U,ee,$,ie){var K=ee+1;if(K===$)return 1;if(ie(U[K++],U[ee])<0){for(;K<$&&ie(U[K],U[K-1])<0;)K++;!function be(U,ee,$){for($--;ee<$;){var ie=U[ee];U[ee++]=U[$],U[$--]=ie}}(U,ee,K)}else for(;K<$&&ie(U[K],U[K-1])>=0;)K++;return K-ee}function Ce(U,ee,$,ie,K){for(ie===ee&&ie++;ie<$;ie++){for(var F,b=U[ie],Y=ee,Q=ie;Y<Q;)K(b,U[F=Y+Q>>>1])<0?Q=F:Y=F+1;var q=ie-Y;switch(q){case 3:U[Y+3]=U[Y+2];case 2:U[Y+2]=U[Y+1];case 1:U[Y+1]=U[Y];break;default:for(;q>0;)U[Y+q]=U[Y+q-1],q--}U[Y]=b}}function he(U,ee,$,ie,K,b){var Y=0,Q=0,F=1;if(b(U,ee[$+K])>0){for(Q=ie-K;F<Q&&b(U,ee[$+K+F])>0;)Y=F,(F=1+(F<<1))<=0&&(F=Q);F>Q&&(F=Q),Y+=K,F+=K}else{for(Q=K+1;F<Q&&b(U,ee[$+K-F])<=0;)Y=F,(F=1+(F<<1))<=0&&(F=Q);F>Q&&(F=Q);var q=Y;Y=K-F,F=K-q}for(Y++;Y<F;){var G=Y+(F-Y>>>1);b(U,ee[$+G])>0?Y=G+1:F=G}return F}function j(U,ee,$,ie,K,b){var Y=0,Q=0,F=1;if(b(U,ee[$+K])<0){for(Q=K+1;F<Q&&b(U,ee[$+K-F])<0;)Y=F,(F=1+(F<<1))<=0&&(F=Q);F>Q&&(F=Q);var q=Y;Y=K-F,F=K-q}else{for(Q=ie-K;F<Q&&b(U,ee[$+K+F])>=0;)Y=F,(F=1+(F<<1))<=0&&(F=Q);F>Q&&(F=Q),Y+=K,F+=K}for(Y++;Y<F;){var G=Y+(F-Y>>>1);b(U,ee[$+G])<0?F=G:Y=G+1}return F}function re(U,ee,$,ie){$||($=0),ie||(ie=U.length);var K=ie-$;if(!(K<2)){var b=0;if(K<32)return void Ce(U,$,ie,$+(b=ge(U,$,ie,ee)),ee);var Y=function X(U,ee){var Y,Q,$=7,F=0,q=[];function V(R){var E=Y[R],M=Q[R],A=Y[R+1],O=Q[R+1];Q[R]=M+O,R===F-3&&(Y[R+1]=Y[R+2],Q[R+1]=Q[R+2]),F--;var B=j(U[A],U,E,M,0,ee);E+=B,0!=(M-=B)&&0!==(O=he(U[E+M-1],U,A,O,O-1,ee))&&(M<=O?function P(R,E,M,A){var O=0;for(O=0;O<E;O++)q[O]=U[R+O];var B=0,ce=M,ae=R;if(U[ae++]=U[ce++],0!=--A)if(1!==E){for(var de,ne,xe,oe=$;;){de=0,ne=0,xe=!1;do{if(ee(U[ce],q[B])<0){if(U[ae++]=U[ce++],ne++,de=0,0==--A){xe=!0;break}}else if(U[ae++]=q[B++],de++,ne=0,1==--E){xe=!0;break}}while((de|ne)<oe);if(xe)break;do{if(0!==(de=j(U[ce],q,B,E,0,ee))){for(O=0;O<de;O++)U[ae+O]=q[B+O];if(ae+=de,B+=de,(E-=de)<=1){xe=!0;break}}if(U[ae++]=U[ce++],0==--A){xe=!0;break}if(0!==(ne=he(q[B],U,ce,A,0,ee))){for(O=0;O<ne;O++)U[ae+O]=U[ce+O];if(ae+=ne,ce+=ne,0==(A-=ne)){xe=!0;break}}if(U[ae++]=q[B++],1==--E){xe=!0;break}oe--}while(de>=7||ne>=7);if(xe)break;oe<0&&(oe=0),oe+=2}if(($=oe)<1&&($=1),1===E){for(O=0;O<A;O++)U[ae+O]=U[ce+O];U[ae+A]=q[B]}else{if(0===E)throw new Error;for(O=0;O<E;O++)U[ae+O]=q[B+O]}}else{for(O=0;O<A;O++)U[ae+O]=U[ce+O];U[ae+A]=q[B]}else for(O=0;O<E;O++)U[ae+O]=q[B+O]}(E,M,A,O):function T(R,E,M,A){var O=0;for(O=0;O<A;O++)q[O]=U[M+O];var B=R+E-1,ce=A-1,ae=M+A-1,oe=0,de=0;if(U[ae--]=U[B--],0!=--E)if(1!==A){for(var ne=$;;){var xe=0,fe=0,ve=!1;do{if(ee(q[ce],U[B])<0){if(U[ae--]=U[B--],xe++,fe=0,0==--E){ve=!0;break}}else if(U[ae--]=q[ce--],fe++,xe=0,1==--A){ve=!0;break}}while((xe|fe)<ne);if(ve)break;do{if(0!=(xe=E-j(q[ce],U,R,E,E-1,ee))){for(E-=xe,de=1+(ae-=xe),oe=1+(B-=xe),O=xe-1;O>=0;O--)U[de+O]=U[oe+O];if(0===E){ve=!0;break}}if(U[ae--]=q[ce--],1==--A){ve=!0;break}if(0!=(fe=A-he(U[B],q,0,A,A-1,ee))){for(A-=fe,de=1+(ae-=fe),oe=1+(ce-=fe),O=0;O<fe;O++)U[de+O]=q[oe+O];if(A<=1){ve=!0;break}}if(U[ae--]=U[B--],0==--E){ve=!0;break}ne--}while(xe>=7||fe>=7);if(ve)break;ne<0&&(ne=0),ne+=2}if(($=ne)<1&&($=1),1===A){for(de=1+(ae-=E),oe=1+(B-=E),O=E-1;O>=0;O--)U[de+O]=U[oe+O];U[ae]=q[ce]}else{if(0===A)throw new Error;for(oe=ae-(A-1),O=0;O<A;O++)U[oe+O]=q[O]}}else{for(de=1+(ae-=E),oe=1+(B-=E),O=E-1;O>=0;O--)U[de+O]=U[oe+O];U[ae]=q[ce]}else for(oe=ae-(A-1),O=0;O<A;O++)U[oe+O]=q[O]}(E,M,A,O))}return Y=[],Q=[],{mergeRuns:function W(){for(;F>1;){var R=F-2;if(R>=1&&Q[R-1]<=Q[R]+Q[R+1]||R>=2&&Q[R-2]<=Q[R]+Q[R-1])Q[R-1]<Q[R+1]&&R--;else if(Q[R]>Q[R+1])break;V(R)}},forceMergeRuns:function J(){for(;F>1;){var R=F-2;R>0&&Q[R-1]<Q[R+1]&&R--,V(R)}},pushRun:function G(R,E){Y[F]=R,Q[F]=E,F+=1}}}(U,ee),Q=function ye(U){for(var ee=0;U>=32;)ee|=1&U,U>>=1;return U+ee}(K);do{if((b=ge(U,$,ie,ee))<Q){var F=K;F>Q&&(F=Q),Ce(U,$,$+F,$+b,ee),b=F}Y.pushRun($,b),Y.mergeRuns(),K-=b,$+=b}while(0!==K);Y.forceMergeRuns()}}H.d(Qe,{Z:()=>re})},628:(Vt,Qe,H)=>{H.r(Qe),H.d(Qe,{HashMap:()=>sr,RADIAN_TO_DEGREE:()=>jn,assert:()=>Ot,bind:()=>B,clone:()=>K,concatArray:()=>gr,createCanvas:()=>q,createHashMap:()=>$n,createObject:()=>er,curry:()=>ce,defaults:()=>F,disableUserSelect:()=>Kt,each:()=>P,eqNaN:()=>He,extend:()=>Q,filter:()=>E,find:()=>M,guid:()=>$,hasOwn:()=>cn,indexOf:()=>G,inherits:()=>W,isArray:()=>ae,isArrayLike:()=>V,isBuiltInObject:()=>ve,isDom:()=>Te,isFunction:()=>oe,isGradientObject:()=>Ae,isImagePatternObject:()=>Ee,isNumber:()=>xe,isObject:()=>fe,isPrimitive:()=>Vn,isRegExp:()=>Ve,isString:()=>de,isStringSafe:()=>ne,isTypedArray:()=>we,keys:()=>A,logError:()=>ie,map:()=>T,merge:()=>b,mergeAll:()=>Y,mixin:()=>J,noop:()=>On,normalizeCssArray:()=>_t,reduce:()=>R,retrieve:()=>We,retrieve2:()=>$e,retrieve3:()=>ct,setAsPrimitive:()=>hn,slice:()=>St,trim:()=>Ht});var ue=H(5730),Se=R(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(et,Tt){return et["[object "+Tt+"]"]=!0,et},{}),le=R(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(et,Tt){return et["[object "+Tt+"Array]"]=!0,et},{}),ye=Object.prototype.toString,ge=Array.prototype,be=ge.forEach,Ce=ge.filter,he=ge.slice,j=ge.map,X=function(){}.constructor,re=X?X.prototype:null,U="__proto__",ee=2311;function $(){return ee++}function ie(){for(var et=[],Tt=0;Tt<arguments.length;Tt++)et[Tt]=arguments[Tt];typeof console<"u"&&console.error.apply(console,et)}function K(et){if(null==et||"object"!=typeof et)return et;var Tt=et,jt=ye.call(et);if("[object Array]"===jt){if(!Vn(et)){Tt=[];for(var Rt=0,fn=et.length;Rt<fn;Rt++)Tt[Rt]=K(et[Rt])}}else if(le[jt]){if(!Vn(et)){var fr=et.constructor;if(fr.from)Tt=fr.from(et);else for(Tt=new fr(et.length),Rt=0,fn=et.length;Rt<fn;Rt++)Tt[Rt]=et[Rt]}}else if(!Se[jt]&&!Vn(et)&&!Te(et))for(var pr in Tt={},et)et.hasOwnProperty(pr)&&pr!==U&&(Tt[pr]=K(et[pr]));return Tt}function b(et,Tt,jt){if(!fe(Tt)||!fe(et))return jt?K(Tt):et;for(var Rt in Tt)if(Tt.hasOwnProperty(Rt)&&Rt!==U){var fn=et[Rt],fr=Tt[Rt];!fe(fr)||!fe(fn)||ae(fr)||ae(fn)||Te(fr)||Te(fn)||ve(fr)||ve(fn)||Vn(fr)||Vn(fn)?(jt||!(Rt in et))&&(et[Rt]=K(Tt[Rt])):b(fn,fr,jt)}return et}function Y(et,Tt){for(var jt=et[0],Rt=1,fn=et.length;Rt<fn;Rt++)jt=b(jt,et[Rt],Tt);return jt}function Q(et,Tt){if(Object.assign)Object.assign(et,Tt);else for(var jt in Tt)Tt.hasOwnProperty(jt)&&jt!==U&&(et[jt]=Tt[jt]);return et}function F(et,Tt,jt){for(var Rt=A(Tt),fn=0;fn<Rt.length;fn++){var fr=Rt[fn];(jt?null!=Tt[fr]:null==et[fr])&&(et[fr]=Tt[fr])}return et}var q=ue.qW.createCanvas;function G(et,Tt){if(et){if(et.indexOf)return et.indexOf(Tt);for(var jt=0,Rt=et.length;jt<Rt;jt++)if(et[jt]===Tt)return jt}return-1}function W(et,Tt){var jt=et.prototype;function Rt(){}for(var fn in Rt.prototype=Tt.prototype,et.prototype=new Rt,jt)jt.hasOwnProperty(fn)&&(et.prototype[fn]=jt[fn]);et.prototype.constructor=et,et.superClass=Tt}function J(et,Tt,jt){if(et="prototype"in et?et.prototype:et,Tt="prototype"in Tt?Tt.prototype:Tt,Object.getOwnPropertyNames)for(var Rt=Object.getOwnPropertyNames(Tt),fn=0;fn<Rt.length;fn++){var fr=Rt[fn];"constructor"!==fr&&(jt?null!=Tt[fr]:null==et[fr])&&(et[fr]=Tt[fr])}else F(et,Tt,jt)}function V(et){return!(!et||"string"==typeof et)&&"number"==typeof et.length}function P(et,Tt,jt){if(et&&Tt)if(et.forEach&&et.forEach===be)et.forEach(Tt,jt);else if(et.length===+et.length)for(var Rt=0,fn=et.length;Rt<fn;Rt++)Tt.call(jt,et[Rt],Rt,et);else for(var fr in et)et.hasOwnProperty(fr)&&Tt.call(jt,et[fr],fr,et)}function T(et,Tt,jt){if(!et)return[];if(!Tt)return St(et);if(et.map&&et.map===j)return et.map(Tt,jt);for(var Rt=[],fn=0,fr=et.length;fn<fr;fn++)Rt.push(Tt.call(jt,et[fn],fn,et));return Rt}function R(et,Tt,jt,Rt){if(et&&Tt){for(var fn=0,fr=et.length;fn<fr;fn++)jt=Tt.call(Rt,jt,et[fn],fn,et);return jt}}function E(et,Tt,jt){if(!et)return[];if(!Tt)return St(et);if(et.filter&&et.filter===Ce)return et.filter(Tt,jt);for(var Rt=[],fn=0,fr=et.length;fn<fr;fn++)Tt.call(jt,et[fn],fn,et)&&Rt.push(et[fn]);return Rt}function M(et,Tt,jt){if(et&&Tt)for(var Rt=0,fn=et.length;Rt<fn;Rt++)if(Tt.call(jt,et[Rt],Rt,et))return et[Rt]}function A(et){if(!et)return[];if(Object.keys)return Object.keys(et);var Tt=[];for(var jt in et)et.hasOwnProperty(jt)&&Tt.push(jt);return Tt}var B=re&&oe(re.bind)?re.call.bind(re.bind):function O(et,Tt){for(var jt=[],Rt=2;Rt<arguments.length;Rt++)jt[Rt-2]=arguments[Rt];return function(){return et.apply(Tt,jt.concat(he.call(arguments)))}};function ce(et){for(var Tt=[],jt=1;jt<arguments.length;jt++)Tt[jt-1]=arguments[jt];return function(){return et.apply(this,Tt.concat(he.call(arguments)))}}function ae(et){return Array.isArray?Array.isArray(et):"[object Array]"===ye.call(et)}function oe(et){return"function"==typeof et}function de(et){return"string"==typeof et}function ne(et){return"[object String]"===ye.call(et)}function xe(et){return"number"==typeof et}function fe(et){var Tt=typeof et;return"function"===Tt||!!et&&"object"===Tt}function ve(et){return!!Se[ye.call(et)]}function we(et){return!!le[ye.call(et)]}function Te(et){return"object"==typeof et&&"number"==typeof et.nodeType&&"object"==typeof et.ownerDocument}function Ae(et){return null!=et.colorStops}function Ee(et){return null!=et.image}function Ve(et){return"[object RegExp]"===ye.call(et)}function He(et){return et!=et}function We(){for(var et=[],Tt=0;Tt<arguments.length;Tt++)et[Tt]=arguments[Tt];for(var jt=0,Rt=et.length;jt<Rt;jt++)if(null!=et[jt])return et[jt]}function $e(et,Tt){return et??Tt}function ct(et,Tt,jt){return et??Tt??jt}function St(et){for(var Tt=[],jt=1;jt<arguments.length;jt++)Tt[jt-1]=arguments[jt];return he.apply(et,Tt)}function _t(et){if("number"==typeof et)return[et,et,et,et];var Tt=et.length;return 2===Tt?[et[0],et[1],et[0],et[1]]:3===Tt?[et[0],et[1],et[2],et[1]]:et}function Ot(et,Tt){if(!et)throw new Error(Tt)}function Ht(et){return null==et?null:"function"==typeof et.trim?et.trim():et.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var an="__ec_primitive__";function hn(et){et[an]=!0}function Vn(et){return et[an]}var sr=function(){function et(Tt){this.data={};var jt=ae(Tt);this.data={};var Rt=this;function fn(fr,pr){jt?Rt.set(fr,pr):Rt.set(pr,fr)}Tt instanceof et?Tt.each(fn):Tt&&P(Tt,fn)}return et.prototype.get=function(Tt){return this.data.hasOwnProperty(Tt)?this.data[Tt]:null},et.prototype.set=function(Tt,jt){return this.data[Tt]=jt},et.prototype.each=function(Tt,jt){for(var Rt in this.data)this.data.hasOwnProperty(Rt)&&Tt.call(jt,this.data[Rt],Rt)},et.prototype.keys=function(){return A(this.data)},et.prototype.removeKey=function(Tt){delete this.data[Tt]},et}();function $n(et){return new sr(et)}function gr(et,Tt){for(var jt=new et.constructor(et.length+Tt.length),Rt=0;Rt<et.length;Rt++)jt[Rt]=et[Rt];var fn=et.length;for(Rt=0;Rt<Tt.length;Rt++)jt[Rt+fn]=Tt[Rt];return jt}function er(et,Tt){var jt;if(Object.create)jt=Object.create(et);else{var Rt=function(){};Rt.prototype=et,jt=new Rt}return Tt&&Q(jt,Tt),jt}function Kt(et){var Tt=et.style;Tt.webkitUserSelect="none",Tt.userSelect="none",Tt.webkitTapHighlightColor="rgba(0,0,0,0)",Tt["-webkit-touch-callout"]="none"}function cn(et,Tt){return et.hasOwnProperty(Tt)}function On(){}var jn=180/Math.PI},8221:(Vt,Qe,H)=>{function ue(P,T){return null==P&&(P=0),null==T&&(T=0),[P,T]}function Se(P,T){return P[0]=T[0],P[1]=T[1],P}function le(P){return[P[0],P[1]]}function ye(P,T,R){return P[0]=T,P[1]=R,P}function ge(P,T,R){return P[0]=T[0]+R[0],P[1]=T[1]+R[1],P}function be(P,T,R,E){return P[0]=T[0]+R[0]*E,P[1]=T[1]+R[1]*E,P}function Ce(P,T,R){return P[0]=T[0]-R[0],P[1]=T[1]-R[1],P}function he(P){return Math.sqrt(X(P))}H.r(Qe),H.d(Qe,{add:()=>ge,applyTransform:()=>W,clone:()=>le,copy:()=>Se,create:()=>ue,dist:()=>Y,distSquare:()=>F,distance:()=>b,distanceSquare:()=>Q,div:()=>ee,dot:()=>$,len:()=>he,lenSquare:()=>X,length:()=>j,lengthSquare:()=>re,lerp:()=>G,max:()=>V,min:()=>J,mul:()=>U,negate:()=>q,normalize:()=>K,scale:()=>ie,scaleAndAdd:()=>be,set:()=>ye,sub:()=>Ce});var j=he;function X(P){return P[0]*P[0]+P[1]*P[1]}var re=X;function U(P,T,R){return P[0]=T[0]*R[0],P[1]=T[1]*R[1],P}function ee(P,T,R){return P[0]=T[0]/R[0],P[1]=T[1]/R[1],P}function $(P,T){return P[0]*T[0]+P[1]*T[1]}function ie(P,T,R){return P[0]=T[0]*R,P[1]=T[1]*R,P}function K(P,T){var R=he(T);return 0===R?(P[0]=0,P[1]=0):(P[0]=T[0]/R,P[1]=T[1]/R),P}function b(P,T){return Math.sqrt((P[0]-T[0])*(P[0]-T[0])+(P[1]-T[1])*(P[1]-T[1]))}var Y=b;function Q(P,T){return(P[0]-T[0])*(P[0]-T[0])+(P[1]-T[1])*(P[1]-T[1])}var F=Q;function q(P,T){return P[0]=-T[0],P[1]=-T[1],P}function G(P,T,R,E){return P[0]=T[0]+E*(R[0]-T[0]),P[1]=T[1]+E*(R[1]-T[1]),P}function W(P,T,R){var E=T[0],M=T[1];return P[0]=R[0]*E+R[2]*M+R[4],P[1]=R[1]*E+R[3]*M+R[5],P}function J(P,T,R){return P[0]=Math.min(T[0],R[0]),P[1]=Math.min(T[1],R[1]),P}function V(P,T,R){return P[0]=Math.max(T[0],R[0]),P[1]=Math.max(T[1],R[1]),P}},1115:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>ye});var ue=H(908),Se=H(126);const ye=function(ge){function be(){var Ce=null!==ge&&ge.apply(this,arguments)||this;return Ce.type="compound",Ce}return(0,ue.ZT)(be,ge),be.prototype._updatePathDirty=function(){for(var Ce=this.shape.paths,he=this.shapeChanged(),j=0;j<Ce.length;j++)he=he||Ce[j].shapeChanged();he&&this.dirtyShape()},be.prototype.beforeBrush=function(){this._updatePathDirty();for(var Ce=this.shape.paths||[],he=this.getGlobalScale(),j=0;j<Ce.length;j++)Ce[j].path||Ce[j].createPathProxy(),Ce[j].path.setScale(he[0],he[1],Ce[j].segmentIgnoreThreshold)},be.prototype.buildPath=function(Ce,he){for(var j=he.paths||[],X=0;X<j.length;X++)j[X].buildPath(Ce,j[X].shape,!0)},be.prototype.afterBrush=function(){for(var Ce=this.shape.paths||[],he=0;he<Ce.length;he++)Ce[he].pathUpdated()},be.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Se.ZP.prototype.getBoundingRect.call(this)},be}(Se.ZP)},9563:(Vt,Qe,H)=>{H.d(Qe,{ZP:()=>ie,ik:()=>he,tj:()=>Ce});var ue=H(908),Se=H(1386),le=H(7021),ye=H(628),ge=H(2369),be="__zr_style_"+Math.round(10*Math.random()),Ce={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},he={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Ce[be]=!0;var j=["z","z2","invisible"],X=["invisible"],re=function(K){function b(Y){return K.call(this,Y)||this}return(0,ue.ZT)(b,K),b.prototype._init=function(Y){for(var Q=(0,ye.keys)(Y),F=0;F<Q.length;F++){var q=Q[F];"style"===q?this.useStyle(Y[q]):K.prototype.attrKV.call(this,q,Y[q])}this.style||this.useStyle({})},b.prototype.beforeBrush=function(){},b.prototype.afterBrush=function(){},b.prototype.innerBeforeBrush=function(){},b.prototype.innerAfterBrush=function(){},b.prototype.shouldBePainted=function(Y,Q,F,q){var G=this.transform;if(this.ignore||this.invisible||0===this.style.opacity||this.culling&&function $(K,b,Y){return U.copy(K.getBoundingRect()),K.transform&&U.applyTransform(K.transform),ee.width=b,ee.height=Y,!U.intersect(ee)}(this,Y,Q)||G&&!G[0]&&!G[3])return!1;if(F&&this.__clipPaths)for(var W=0;W<this.__clipPaths.length;++W)if(this.__clipPaths[W].isZeroArea())return!1;if(q&&this.parent)for(var J=this.parent;J;){if(J.ignore)return!1;J=J.parent}return!0},b.prototype.contain=function(Y,Q){return this.rectContain(Y,Q)},b.prototype.traverse=function(Y,Q){Y.call(Q,this)},b.prototype.rectContain=function(Y,Q){var F=this.transformCoordToLocal(Y,Q);return this.getBoundingRect().contain(F[0],F[1])},b.prototype.getPaintRect=function(){var Y=this._paintRect;if(!this._paintRect||this.__dirty){var Q=this.transform,F=this.getBoundingRect(),q=this.style,G=q.shadowBlur||0,W=q.shadowOffsetX||0,J=q.shadowOffsetY||0;Y=this._paintRect||(this._paintRect=new le.Z(0,0,0,0)),Q?le.Z.applyTransform(Y,F,Q):Y.copy(F),(G||W||J)&&(Y.width+=2*G+Math.abs(W),Y.height+=2*G+Math.abs(J),Y.x=Math.min(Y.x,Y.x+W-G),Y.y=Math.min(Y.y,Y.y+J-G));var V=this.dirtyRectTolerance;Y.isZero()||(Y.x=Math.floor(Y.x-V),Y.y=Math.floor(Y.y-V),Y.width=Math.ceil(Y.width+1+2*V),Y.height=Math.ceil(Y.height+1+2*V))}return Y},b.prototype.setPrevPaintRect=function(Y){Y?(this._prevPaintRect=this._prevPaintRect||new le.Z(0,0,0,0),this._prevPaintRect.copy(Y)):this._prevPaintRect=null},b.prototype.getPrevPaintRect=function(){return this._prevPaintRect},b.prototype.animateStyle=function(Y){return this.animate("style",Y)},b.prototype.updateDuringAnimation=function(Y){"style"===Y?this.dirtyStyle():this.markRedraw()},b.prototype.attrKV=function(Y,Q){"style"!==Y?K.prototype.attrKV.call(this,Y,Q):this.style?this.setStyle(Q):this.useStyle(Q)},b.prototype.setStyle=function(Y,Q){return"string"==typeof Y?this.style[Y]=Q:(0,ye.extend)(this.style,Y),this.dirtyStyle(),this},b.prototype.dirtyStyle=function(Y){Y||this.markRedraw(),this.__dirty|=ge.SE,this._rect&&(this._rect=null)},b.prototype.dirty=function(){this.dirtyStyle()},b.prototype.styleChanged=function(){return!!(this.__dirty&ge.SE)},b.prototype.styleUpdated=function(){this.__dirty&=~ge.SE},b.prototype.createStyle=function(Y){return(0,ye.createObject)(Ce,Y)},b.prototype.useStyle=function(Y){Y[be]||(Y=this.createStyle(Y)),this.__inHover?this.__hoverStyle=Y:this.style=Y,this.dirtyStyle()},b.prototype.isStyleObject=function(Y){return Y[be]},b.prototype._innerSaveToNormal=function(Y){K.prototype._innerSaveToNormal.call(this,Y);var Q=this._normalState;Y.style&&!Q.style&&(Q.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(Y,Q,j)},b.prototype._applyStateObj=function(Y,Q,F,q,G,W){K.prototype._applyStateObj.call(this,Y,Q,F,q,G,W);var V,J=!(Q&&q);if(Q&&Q.style?G?q?V=Q.style:(V=this._mergeStyle(this.createStyle(),F.style),this._mergeStyle(V,Q.style)):(V=this._mergeStyle(this.createStyle(),q?this.style:F.style),this._mergeStyle(V,Q.style)):J&&(V=F.style),V)if(G){var P=this.style;if(this.style=this.createStyle(J?{}:P),J)for(var T=(0,ye.keys)(P),R=0;R<T.length;R++)(E=T[R])in V&&(V[E]=V[E],this.style[E]=P[E]);var M=(0,ye.keys)(V);for(R=0;R<M.length;R++)this.style[E=M[R]]=this.style[E];this._transitionState(Y,{style:V},W,this.getAnimationStyleProps())}else this.useStyle(V);var A=this.__inHover?X:j;for(R=0;R<A.length;R++){var E=A[R];Q&&null!=Q[E]?this[E]=Q[E]:J&&null!=F[E]&&(this[E]=F[E])}},b.prototype._mergeStates=function(Y){for(var F,Q=K.prototype._mergeStates.call(this,Y),q=0;q<Y.length;q++){var G=Y[q];G.style&&this._mergeStyle(F=F||{},G.style)}return F&&(Q.style=F),Q},b.prototype._mergeStyle=function(Y,Q){return(0,ye.extend)(Y,Q),Y},b.prototype.getAnimationStyleProps=function(){return he},b.initDefaultProps=((Y=b.prototype).type="displayable",Y.invisible=!1,Y.z=0,Y.z2=0,Y.zlevel=0,Y.culling=!1,Y.cursor="pointer",Y.rectHover=!1,Y.incremental=!1,Y._rect=null,Y.dirtyRectTolerance=0,void(Y.__dirty=ge.YV|ge.SE)),b;var Y}(Se.Z),U=new le.Z(0,0,0,0),ee=new le.Z(0,0,0,0);const ie=re},9660:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>Se});const Se=function(){function le(ye){this.colorStops=ye||[]}return le.prototype.addColorStop=function(ye,ge){this.colorStops.push({offset:ye,color:ge})},le}()},8539:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>be});var ue=H(908),Se=H(628),le=H(1386),ye=H(7021),ge=function(Ce){function he(j){var X=Ce.call(this)||this;return X.isGroup=!0,X._children=[],X.attr(j),X}return(0,ue.ZT)(he,Ce),he.prototype.childrenRef=function(){return this._children},he.prototype.children=function(){return this._children.slice()},he.prototype.childAt=function(j){return this._children[j]},he.prototype.childOfName=function(j){for(var X=this._children,re=0;re<X.length;re++)if(X[re].name===j)return X[re]},he.prototype.childCount=function(){return this._children.length},he.prototype.add=function(j){return j&&j!==this&&j.parent!==this&&(this._children.push(j),this._doAdd(j)),this},he.prototype.addBefore=function(j,X){if(j&&j!==this&&j.parent!==this&&X&&X.parent===this){var re=this._children,U=re.indexOf(X);U>=0&&(re.splice(U,0,j),this._doAdd(j))}return this},he.prototype.replace=function(j,X){var re=Se.indexOf(this._children,j);return re>=0&&this.replaceAt(X,re),this},he.prototype.replaceAt=function(j,X){var re=this._children,U=re[X];if(j&&j!==this&&j.parent!==this&&j!==U){re[X]=j,U.parent=null;var ee=this.__zr;ee&&U.removeSelfFromZr(ee),this._doAdd(j)}return this},he.prototype._doAdd=function(j){j.parent&&j.parent.remove(j),j.parent=this;var X=this.__zr;X&&X!==j.__zr&&j.addSelfToZr(X),X&&X.refresh()},he.prototype.remove=function(j){var X=this.__zr,re=this._children,U=Se.indexOf(re,j);return U<0||(re.splice(U,1),j.parent=null,X&&j.removeSelfFromZr(X),X&&X.refresh()),this},he.prototype.removeAll=function(){for(var j=this._children,X=this.__zr,re=0;re<j.length;re++){var U=j[re];X&&U.removeSelfFromZr(X),U.parent=null}return j.length=0,this},he.prototype.eachChild=function(j,X){for(var re=this._children,U=0;U<re.length;U++)j.call(X,re[U],U);return this},he.prototype.traverse=function(j,X){for(var re=0;re<this._children.length;re++){var U=this._children[re],ee=j.call(X,U);U.isGroup&&!ee&&U.traverse(j,X)}return this},he.prototype.addSelfToZr=function(j){Ce.prototype.addSelfToZr.call(this,j);for(var X=0;X<this._children.length;X++)this._children[X].addSelfToZr(j)},he.prototype.removeSelfFromZr=function(j){Ce.prototype.removeSelfFromZr.call(this,j);for(var X=0;X<this._children.length;X++)this._children[X].removeSelfFromZr(j)},he.prototype.getBoundingRect=function(j){for(var X=new ye.Z(0,0,0,0),re=j||this._children,U=[],ee=null,$=0;$<re.length;$++){var ie=re[$];if(!ie.ignore&&!ie.invisible){var K=ie.getBoundingRect(),b=ie.getLocalTransform(U);b?(ye.Z.applyTransform(X,K,b),(ee=ee||X.clone()).union(X)):(ee=ee||K.clone()).union(K)}}return ee||X},he}(le.Z);ge.prototype.type="group";const be=ge},6766:(Vt,Qe,H)=>{H.d(Qe,{ZP:()=>j});var ue=H(908),Se=H(9563),le=H(7021),ye=H(628),ge=(0,ye.defaults)({x:0,y:0},Se.tj),be={style:(0,ye.defaults)({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},Se.ik.style)},he=function(X){function re(){return null!==X&&X.apply(this,arguments)||this}return(0,ue.ZT)(re,X),re.prototype.createStyle=function(U){return(0,ye.createObject)(ge,U)},re.prototype._getSize=function(U){var ee=this.style,$=ee[U];if(null!=$)return $;var ie=function Ce(X){return!!(X&&"string"!=typeof X&&X.width&&X.height)}(ee.image)?ee.image:this.__image;if(!ie)return 0;var K="width"===U?"height":"width",b=ee[K];return null==b?ie[U]:ie[U]/ie[K]*b},re.prototype.getWidth=function(){return this._getSize("width")},re.prototype.getHeight=function(){return this._getSize("height")},re.prototype.getAnimationStyleProps=function(){return be},re.prototype.getBoundingRect=function(){var U=this.style;return this._rect||(this._rect=new le.Z(U.x||0,U.y||0,this.getWidth(),this.getHeight())),this._rect},re}(Se.ZP);he.prototype.type="image";const j=he},3520:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>be});var ue=H(908),Se=H(9563),le=H(7021),ye=[];const be=function(Ce){function he(){var j=null!==Ce&&Ce.apply(this,arguments)||this;return j.notClear=!0,j.incremental=!0,j._displayables=[],j._temporaryDisplayables=[],j._cursor=0,j}return(0,ue.ZT)(he,Ce),he.prototype.traverse=function(j,X){j.call(X,this)},he.prototype.useStyle=function(){this.style={}},he.prototype.getCursor=function(){return this._cursor},he.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},he.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},he.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},he.prototype.addDisplayable=function(j,X){X?this._temporaryDisplayables.push(j):this._displayables.push(j),this.markRedraw()},he.prototype.addDisplayables=function(j,X){X=X||!1;for(var re=0;re<j.length;re++)this.addDisplayable(j[re],X)},he.prototype.getDisplayables=function(){return this._displayables},he.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},he.prototype.eachPendingDisplayable=function(j){for(var X=this._cursor;X<this._displayables.length;X++)j&&j(this._displayables[X]);for(X=0;X<this._temporaryDisplayables.length;X++)j&&j(this._temporaryDisplayables[X])},he.prototype.update=function(){this.updateTransform();for(var j=this._cursor;j<this._displayables.length;j++)(X=this._displayables[j]).parent=this,X.update(),X.parent=null;for(j=0;j<this._temporaryDisplayables.length;j++){var X;(X=this._temporaryDisplayables[j]).parent=this,X.update(),X.parent=null}},he.prototype.getBoundingRect=function(){if(!this._rect){for(var j=new le.Z(1/0,1/0,-1/0,-1/0),X=0;X<this._displayables.length;X++){var re=this._displayables[X],U=re.getBoundingRect().clone();re.needLocalTransform()&&U.applyTransform(re.getLocalTransform(ye)),j.union(U)}this._rect=j}return this._rect},he.prototype.contain=function(j,X){var re=this.transformCoordToLocal(j,X);if(this.getBoundingRect().contain(re[0],re[1]))for(var ee=0;ee<this._displayables.length;ee++)if(this._displayables[ee].contain(j,X))return!0;return!1},he}(Se.ZP)},5910:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>ye});var ue=H(908);const ye=function(ge){function be(Ce,he,j,X,re,U){var ee=ge.call(this,re)||this;return ee.x=Ce??0,ee.y=he??0,ee.x2=j??1,ee.y2=X??0,ee.type="linear",ee.global=U||!1,ee}return(0,ue.ZT)(be,ge),be}(H(9660).Z)},126:(Vt,Qe,H)=>{H.d(Qe,{$t:()=>M,ZP:()=>ce});var ue=H(908),Se=H(9563),le=H(7349),ye=H(4443),ge=H(9969);function be(ae,oe,de,ne,xe,fe,ve,we,Te,Ae,Ee){if(0===Te)return!1;var Ve=Te;return!(Ee>oe+Ve&&Ee>ne+Ve&&Ee>fe+Ve&&Ee>we+Ve||Ee<oe-Ve&&Ee<ne-Ve&&Ee<fe-Ve&&Ee<we-Ve||Ae>ae+Ve&&Ae>de+Ve&&Ae>xe+Ve&&Ae>ve+Ve||Ae<ae-Ve&&Ae<de-Ve&&Ae<xe-Ve&&Ae<ve-Ve)&&ge.t1(ae,oe,de,ne,xe,fe,ve,we,Ae,Ee,null)<=Ve/2}var Ce=H(7014),he=H(3416),j=2*Math.PI;function X(ae,oe,de,ne,xe,fe,ve,we,Te){if(0===ve)return!1;var Ae=ve;we-=ae,Te-=oe;var Ee=Math.sqrt(we*we+Te*Te);if(Ee-Ae>de||Ee+Ae<de)return!1;if(Math.abs(ne-xe)%j<1e-4)return!0;if(fe){var Ve=ne;ne=(0,he.m)(xe),xe=(0,he.m)(Ve)}else ne=(0,he.m)(ne),xe=(0,he.m)(xe);ne>xe&&(xe+=j);var He=Math.atan2(Te,we);return He<0&&(He+=j),He>=ne&&He<=xe||He+j>=ne&&He+j<=xe}var re=H(7703),U=le.Z.CMD,ee=2*Math.PI,K=[-1,-1,-1],b=[-1,-1];function Y(){var ae=b[0];b[0]=b[1],b[1]=ae}function Q(ae,oe,de,ne,xe,fe,ve,we,Te,Ae){if(Ae>oe&&Ae>ne&&Ae>fe&&Ae>we||Ae<oe&&Ae<ne&&Ae<fe&&Ae<we)return 0;var Ee=ge.kD(oe,ne,fe,we,Ae,K);if(0===Ee)return 0;for(var Ve=0,He=-1,We=void 0,$e=void 0,ct=0;ct<Ee;ct++){var St=K[ct],_t=0===St||1===St?.5:1;ge.af(ae,de,xe,ve,St)<Te||(He<0&&(He=ge.pP(oe,ne,fe,we,b),b[1]<b[0]&&He>1&&Y(),We=ge.af(oe,ne,fe,we,b[0]),He>1&&($e=ge.af(oe,ne,fe,we,b[1]))),Ve+=2===He?St<b[0]?We<oe?_t:-_t:St<b[1]?$e<We?_t:-_t:we<$e?_t:-_t:St<b[0]?We<oe?_t:-_t:we<We?_t:-_t)}return Ve}function F(ae,oe,de,ne,xe,fe,ve,we){if(we>oe&&we>ne&&we>fe||we<oe&&we<ne&&we<fe)return 0;var Te=ge.Jz(oe,ne,fe,we,K);if(0===Te)return 0;var Ae=ge.QC(oe,ne,fe);if(Ae>=0&&Ae<=1){for(var Ee=0,Ve=ge.Zm(oe,ne,fe,Ae),He=0;He<Te;He++){var We=0===K[He]||1===K[He]?.5:1;ge.Zm(ae,de,xe,K[He])<ve||(Ee+=K[He]<Ae?Ve<oe?We:-We:fe<Ve?We:-We)}return Ee}return We=0===K[0]||1===K[0]?.5:1,ge.Zm(ae,de,xe,K[0])<ve?0:fe<oe?We:-We}function q(ae,oe,de,ne,xe,fe,ve,we){if((we-=oe)>de||we<-de)return 0;var Te=Math.sqrt(de*de-we*we);K[0]=-Te,K[1]=Te;var Ae=Math.abs(ne-xe);if(Ae<1e-4)return 0;if(Ae>=ee-1e-4){ne=0,xe=ee;var Ee=fe?1:-1;return ve>=K[0]+ae&&ve<=K[1]+ae?Ee:0}if(ne>xe){var Ve=ne;ne=xe,xe=Ve}ne<0&&(ne+=ee,xe+=ee);for(var He=0,We=0;We<2;We++){var $e=K[We];if($e+ae>ve){var ct=Math.atan2(we,$e);Ee=fe?1:-1,ct<0&&(ct=ee+ct),(ct>=ne&&ct<=xe||ct+ee>=ne&&ct+ee<=xe)&&(ct>Math.PI/2&&ct<1.5*Math.PI&&(Ee=-Ee),He+=Ee)}}return He}function G(ae,oe,de,ne,xe){for(var He,We,fe=ae.data,ve=ae.len(),we=0,Te=0,Ae=0,Ee=0,Ve=0,$e=0;$e<ve;){var ct=fe[$e++],St=1===$e;switch(ct===U.M&&$e>1&&(de||(we+=(0,re.Z)(Te,Ae,Ee,Ve,ne,xe))),St&&(Ee=Te=fe[$e],Ve=Ae=fe[$e+1]),ct){case U.M:Te=Ee=fe[$e++],Ae=Ve=fe[$e++];break;case U.L:if(de){if(ye.m(Te,Ae,fe[$e],fe[$e+1],oe,ne,xe))return!0}else we+=(0,re.Z)(Te,Ae,fe[$e],fe[$e+1],ne,xe)||0;Te=fe[$e++],Ae=fe[$e++];break;case U.C:if(de){if(be(Te,Ae,fe[$e++],fe[$e++],fe[$e++],fe[$e++],fe[$e],fe[$e+1],oe,ne,xe))return!0}else we+=Q(Te,Ae,fe[$e++],fe[$e++],fe[$e++],fe[$e++],fe[$e],fe[$e+1],ne,xe)||0;Te=fe[$e++],Ae=fe[$e++];break;case U.Q:if(de){if(Ce.m(Te,Ae,fe[$e++],fe[$e++],fe[$e],fe[$e+1],oe,ne,xe))return!0}else we+=F(Te,Ae,fe[$e++],fe[$e++],fe[$e],fe[$e+1],ne,xe)||0;Te=fe[$e++],Ae=fe[$e++];break;case U.A:var _t=fe[$e++],Ot=fe[$e++],Ht=fe[$e++],an=fe[$e++],hn=fe[$e++],Vn=fe[$e++];$e+=1;var sr=!!(1-fe[$e++]);He=Math.cos(hn)*Ht+_t,We=Math.sin(hn)*an+Ot,St?(Ee=He,Ve=We):we+=(0,re.Z)(Te,Ae,He,We,ne,xe);var $n=(ne-_t)*an/Ht+_t;if(de){if(X(_t,Ot,an,hn,hn+Vn,sr,oe,$n,xe))return!0}else we+=q(_t,Ot,an,hn,hn+Vn,sr,$n,xe);Te=Math.cos(hn+Vn)*Ht+_t,Ae=Math.sin(hn+Vn)*an+Ot;break;case U.R:if(Ee=Te=fe[$e++],Ve=Ae=fe[$e++],He=Ee+fe[$e++],We=Ve+fe[$e++],de){if(ye.m(Ee,Ve,He,Ve,oe,ne,xe)||ye.m(He,Ve,He,We,oe,ne,xe)||ye.m(He,We,Ee,We,oe,ne,xe)||ye.m(Ee,We,Ee,Ve,oe,ne,xe))return!0}else we+=(0,re.Z)(He,Ve,He,We,ne,xe),we+=(0,re.Z)(Ee,We,Ee,Ve,ne,xe);break;case U.Z:if(de){if(ye.m(Te,Ae,Ee,Ve,oe,ne,xe))return!0}else we+=(0,re.Z)(Te,Ae,Ee,Ve,ne,xe);Te=Ee,Ae=Ve}}return!de&&!function ie(ae,oe){return Math.abs(ae-oe)<1e-4}(Ae,Ve)&&(we+=(0,re.Z)(Te,Ae,Ee,Ve,ne,xe)||0),0!==we}var V=H(628),P=H(312),T=H(6704),R=H(2369),E=H(9778),M=(0,V.defaults)({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Se.tj),A={style:(0,V.defaults)({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},Se.ik.style)},O=E.dN.concat(["invisible","culling","z","z2","zlevel","parent"]);const ce=function(ae){function oe(de){return ae.call(this,de)||this}return(0,ue.ZT)(oe,ae),oe.prototype.update=function(){var de=this;ae.prototype.update.call(this);var ne=this.style;if(ne.decal){var xe=this._decalEl=this._decalEl||new oe;xe.buildPath===oe.prototype.buildPath&&(xe.buildPath=function(Te){de.buildPath(Te,de.shape)}),xe.silent=!0;var fe=xe.style;for(var ve in ne)fe[ve]!==ne[ve]&&(fe[ve]=ne[ve]);fe.fill=ne.fill?ne.decal:null,fe.decal=null,fe.shadowColor=null,ne.strokeFirst&&(fe.stroke=null);for(var we=0;we<O.length;++we)xe[O[we]]=this[O[we]];xe.__dirty|=R.YV}else this._decalEl&&(this._decalEl=null)},oe.prototype.getDecalElement=function(){return this._decalEl},oe.prototype._init=function(de){var ne=(0,V.keys)(de);this.shape=this.getDefaultShape();var xe=this.getDefaultStyle();xe&&this.useStyle(xe);for(var fe=0;fe<ne.length;fe++){var ve=ne[fe],we=de[ve];"style"===ve?this.style?(0,V.extend)(this.style,we):this.useStyle(we):"shape"===ve?(0,V.extend)(this.shape,we):ae.prototype.attrKV.call(this,ve,we)}this.style||this.useStyle({})},oe.prototype.getDefaultStyle=function(){return null},oe.prototype.getDefaultShape=function(){return{}},oe.prototype.canBeInsideText=function(){return this.hasFill()},oe.prototype.getInsideTextFill=function(){var de=this.style.fill;if("none"!==de){if((0,V.isString)(de)){var ne=(0,P.lum)(de,0);return ne>.5?T.vU:ne>.2?T.iv:T.GD}if(de)return T.GD}return T.vU},oe.prototype.getInsideTextStroke=function(de){var ne=this.style.fill;if((0,V.isString)(ne)){var xe=this.__zr;if(!(!xe||!xe.isDarkMode())==(0,P.lum)(de,0)<T.Ak)return ne}},oe.prototype.buildPath=function(de,ne,xe){},oe.prototype.pathUpdated=function(){this.__dirty&=~R.RH},oe.prototype.getUpdatedPathProxy=function(de){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,de),this.path},oe.prototype.createPathProxy=function(){this.path=new le.Z(!1)},oe.prototype.hasStroke=function(){var de=this.style,ne=de.stroke;return!(null==ne||"none"===ne||!(de.lineWidth>0))},oe.prototype.hasFill=function(){var ne=this.style.fill;return null!=ne&&"none"!==ne},oe.prototype.getBoundingRect=function(){var de=this._rect,ne=this.style,xe=!de;if(xe){var fe=!1;this.path||(fe=!0,this.createPathProxy());var ve=this.path;(fe||this.__dirty&R.RH)&&(ve.beginPath(),this.buildPath(ve,this.shape,!1),this.pathUpdated()),de=ve.getBoundingRect()}if(this._rect=de,this.hasStroke()&&this.path&&this.path.len()>0){var we=this._rectStroke||(this._rectStroke=de.clone());if(this.__dirty||xe){we.copy(de);var Te=ne.strokeNoScale?this.getLineScale():1,Ae=ne.lineWidth;this.hasFill()||(Ae=Math.max(Ae,this.strokeContainThreshold??4)),Te>1e-10&&(we.width+=Ae/Te,we.height+=Ae/Te,we.x-=Ae/Te/2,we.y-=Ae/Te/2)}return we}return de},oe.prototype.contain=function(de,ne){var xe=this.transformCoordToLocal(de,ne),fe=this.getBoundingRect(),ve=this.style;if(fe.contain(de=xe[0],ne=xe[1])){var we=this.path;if(this.hasStroke()){var Te=ve.lineWidth,Ae=ve.strokeNoScale?this.getLineScale():1;if(Ae>1e-10&&(this.hasFill()||(Te=Math.max(Te,this.strokeContainThreshold)),function J(ae,oe,de,ne){return G(ae,oe,!0,de,ne)}(we,Te/Ae,de,ne)))return!0}if(this.hasFill())return function W(ae,oe,de){return G(ae,0,!1,oe,de)}(we,de,ne)}return!1},oe.prototype.dirtyShape=function(){this.__dirty|=R.RH,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},oe.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},oe.prototype.animateShape=function(de){return this.animate("shape",de)},oe.prototype.updateDuringAnimation=function(de){"style"===de?this.dirtyStyle():"shape"===de?this.dirtyShape():this.markRedraw()},oe.prototype.attrKV=function(de,ne){"shape"===de?this.setShape(ne):ae.prototype.attrKV.call(this,de,ne)},oe.prototype.setShape=function(de,ne){var xe=this.shape;return xe||(xe=this.shape={}),"string"==typeof de?xe[de]=ne:(0,V.extend)(xe,de),this.dirtyShape(),this},oe.prototype.shapeChanged=function(){return!!(this.__dirty&R.RH)},oe.prototype.createStyle=function(de){return(0,V.createObject)(M,de)},oe.prototype._innerSaveToNormal=function(de){ae.prototype._innerSaveToNormal.call(this,de);var ne=this._normalState;de.shape&&!ne.shape&&(ne.shape=(0,V.extend)({},this.shape))},oe.prototype._applyStateObj=function(de,ne,xe,fe,ve,we){ae.prototype._applyStateObj.call(this,de,ne,xe,fe,ve,we);var Ae,Te=!(ne&&fe);if(ne&&ne.shape?ve?fe?Ae=ne.shape:(Ae=(0,V.extend)({},xe.shape),(0,V.extend)(Ae,ne.shape)):(Ae=(0,V.extend)({},fe?this.shape:xe.shape),(0,V.extend)(Ae,ne.shape)):Te&&(Ae=xe.shape),Ae)if(ve){this.shape=(0,V.extend)({},this.shape);for(var Ee={},Ve=(0,V.keys)(Ae),He=0;He<Ve.length;He++){var We=Ve[He];"object"==typeof Ae[We]?this.shape[We]=Ae[We]:Ee[We]=Ae[We]}this._transitionState(de,{shape:Ee},we)}else this.shape=Ae,this.dirtyShape()},oe.prototype._mergeStates=function(de){for(var xe,ne=ae.prototype._mergeStates.call(this,de),fe=0;fe<de.length;fe++){var ve=de[fe];ve.shape&&this._mergeStyle(xe=xe||{},ve.shape)}return xe&&(ne.shape=xe),ne},oe.prototype.getAnimationStyleProps=function(){return A},oe.prototype.isZeroArea=function(){return!1},oe.extend=function(de){var ne=function(fe){function ve(we){var Te=fe.call(this,we)||this;return de.init&&de.init.call(Te,we),Te}return(0,ue.ZT)(ve,fe),ve.prototype.getDefaultStyle=function(){return(0,V.clone)(de.style)},ve.prototype.getDefaultShape=function(){return(0,V.clone)(de.shape)},ve}(oe);for(var xe in de)"function"==typeof de[xe]&&(ne.prototype[xe]=de[xe]);return ne},oe.initDefaultProps=((de=oe.prototype).type="path",de.strokeContainThreshold=5,de.segmentIgnoreThreshold=0,de.subPixelOptimize=!1,de.autoBatch=!1,void(de.__dirty=R.YV|R.SE|R.RH)),oe;var de}(Se.ZP)},641:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>ye});var ue=H(908);const ye=function(ge){function be(Ce,he,j,X,re){var U=ge.call(this,X)||this;return U.x=Ce??.5,U.y=he??.5,U.r=j??.5,U.type="radial",U.global=re||!1,U}return(0,ue.ZT)(be,ge),be}(H(9660).Z)},491:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>j});var ue=H(908),Se=H(9563),le=H(1790),ye=H(126),ge=H(628),be=H(5730),Ce=(0,ge.defaults)({strokeFirst:!0,font:be.Uo,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},ye.$t),he=function(X){function re(){return null!==X&&X.apply(this,arguments)||this}return(0,ue.ZT)(re,X),re.prototype.hasStroke=function(){var U=this.style,ee=U.stroke;return null!=ee&&"none"!==ee&&U.lineWidth>0},re.prototype.hasFill=function(){var ee=this.style.fill;return null!=ee&&"none"!==ee},re.prototype.createStyle=function(U){return(0,ge.createObject)(Ce,U)},re.prototype.setBoundingRect=function(U){this._rect=U},re.prototype.getBoundingRect=function(){var U=this.style;if(!this._rect){var ee=U.text;null!=ee?ee+="":ee="";var $=(0,le.lP)(ee,U.font,U.textAlign,U.textBaseline);if($.x+=U.x||0,$.y+=U.y||0,this.hasStroke()){var ie=U.lineWidth;$.x-=ie/2,$.y-=ie/2,$.width+=ie,$.height+=ie}this._rect=$}return this._rect},re.initDefaultProps=void(re.prototype.dirtyRectTolerance=10),re}(Se.ZP);he.prototype.type="tspan";const j=he},8208:(Vt,Qe,H)=>{H.d(Qe,{VG:()=>Y,Y1:()=>F,ZP:()=>R});var ue=H(908),Se=H(7969),le=H(491),ye=H(628),ge=H(1790),be=H(6766),Ce=H(3160),he=H(7021),j=H(9563),X=H(5730),re={fill:"#000"},ee={style:(0,ye.defaults)({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},j.ik.style)},$=function(E){function M(A){var O=E.call(this)||this;return O.type="text",O._children=[],O._defaultStyle=re,O.attr(A),O}return(0,ue.ZT)(M,E),M.prototype.childrenRef=function(){return this._children},M.prototype.update=function(){E.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var A=0;A<this._children.length;A++){var O=this._children[A];O.zlevel=this.zlevel,O.z=this.z,O.z2=this.z2,O.culling=this.culling,O.cursor=this.cursor,O.invisible=this.invisible}},M.prototype.updateTransform=function(){var A=this.innerTransformable;A?(A.updateTransform(),A.transform&&(this.transform=A.transform)):E.prototype.updateTransform.call(this)},M.prototype.getLocalTransform=function(A){var O=this.innerTransformable;return O?O.getLocalTransform(A):E.prototype.getLocalTransform.call(this,A)},M.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),E.prototype.getComputedTransform.call(this)},M.prototype._updateSubTexts=function(){this._childCursor=0,function q(E){G(E),(0,ye.each)(E.rich,G)}(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},M.prototype.addSelfToZr=function(A){E.prototype.addSelfToZr.call(this,A);for(var O=0;O<this._children.length;O++)this._children[O].__zr=A},M.prototype.removeSelfFromZr=function(A){E.prototype.removeSelfFromZr.call(this,A);for(var O=0;O<this._children.length;O++)this._children[O].__zr=null},M.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var A=new he.Z(0,0,0,0),O=this._children,B=[],ce=null,ae=0;ae<O.length;ae++){var oe=O[ae],de=oe.getBoundingRect(),ne=oe.getLocalTransform(B);ne?(A.copy(de),A.applyTransform(ne),(ce=ce||A.clone()).union(A)):(ce=ce||de.clone()).union(de)}this._rect=ce||A}return this._rect},M.prototype.setDefaultTextStyle=function(A){this._defaultStyle=A||re},M.prototype.setTextContent=function(A){},M.prototype._mergeStyle=function(A,O){if(!O)return A;var B=O.rich,ce=A.rich||B&&{};return(0,ye.extend)(A,O),B&&ce?(this._mergeRich(ce,B),A.rich=ce):ce&&(A.rich=ce),A},M.prototype._mergeRich=function(A,O){for(var B=(0,ye.keys)(O),ce=0;ce<B.length;ce++){var ae=B[ce];A[ae]=A[ae]||{},(0,ye.extend)(A[ae],O[ae])}},M.prototype.getAnimationStyleProps=function(){return ee},M.prototype._getOrCreateChild=function(A){var O=this._children[this._childCursor];return(!O||!(O instanceof A))&&(O=new A),this._children[this._childCursor++]=O,O.__zr=this.__zr,O.parent=this,O},M.prototype._updatePlainTexts=function(){var A=this.style,O=A.font||X.Uo,B=A.padding,ce=P(A),ae=(0,Se.NY)(ce,A),oe=T(A),de=!!A.backgroundColor,ne=ae.outerHeight,xe=ae.outerWidth,fe=ae.contentWidth,ve=ae.lines,we=ae.lineHeight,Te=this._defaultStyle,Ae=A.x||0,Ee=A.y||0,Ve=A.align||Te.align||"left",He=A.verticalAlign||Te.verticalAlign||"top",We=Ae,$e=(0,ge.mU)(Ee,ae.contentHeight,He);if(oe||B){var ct=(0,ge.M3)(Ae,xe,Ve),St=(0,ge.mU)(Ee,ne,He);oe&&this._renderBackground(A,A,ct,St,xe,ne)}$e+=we/2,B&&(We=V(Ae,Ve,B),"top"===He?$e+=B[0]:"bottom"===He&&($e-=B[2]));for(var _t=0,Ot=!1,Ht=(J("fill"in A?A.fill:(Ot=!0,Te.fill))),an=(W("stroke"in A?A.stroke:de||Te.autoStroke&&!Ot?null:(_t=2,Te.stroke))),hn=A.textShadowBlur>0,Vn=null!=A.width&&("truncate"===A.overflow||"break"===A.overflow||"breakAll"===A.overflow),sr=ae.calculatedLineHeight,$n=0;$n<ve.length;$n++){var gr=this._getOrCreateChild(le.Z),er=gr.createStyle();gr.useStyle(er),er.text=ve[$n],er.x=We,er.y=$e,Ve&&(er.textAlign=Ve),er.textBaseline="middle",er.opacity=A.opacity,er.strokeFirst=!0,hn&&(er.shadowBlur=A.textShadowBlur||0,er.shadowColor=A.textShadowColor||"transparent",er.shadowOffsetX=A.textShadowOffsetX||0,er.shadowOffsetY=A.textShadowOffsetY||0),er.stroke=an,er.fill=Ht,an&&(er.lineWidth=A.lineWidth||_t,er.lineDash=A.lineDash,er.lineDashOffset=A.lineDashOffset||0),er.font=O,Q(er,A),$e+=we,Vn&&gr.setBoundingRect(new he.Z((0,ge.M3)(er.x,A.width,er.textAlign),(0,ge.mU)(er.y,sr,er.textBaseline),fe,sr))}},M.prototype._updateRichTexts=function(){var A=this.style,O=P(A),B=(0,Se.$F)(O,A),ce=B.width,ae=B.outerWidth,oe=B.outerHeight,de=A.padding,xe=A.y||0,fe=this._defaultStyle,we=A.verticalAlign||fe.verticalAlign,Te=(0,ge.M3)(A.x||0,ae,A.align||fe.align),Ae=(0,ge.mU)(xe,oe,we),Ee=Te,Ve=Ae;de&&(Ee+=de[3],Ve+=de[0]);var He=Ee+ce;T(A)&&this._renderBackground(A,A,Te,Ae,ae,oe);for(var We=!!A.backgroundColor,$e=0;$e<B.lines.length;$e++){for(var ct=B.lines[$e],St=ct.tokens,_t=St.length,Ot=ct.lineHeight,Ht=ct.width,an=0,hn=Ee,Vn=He,sr=_t-1,$n=void 0;an<_t&&(!($n=St[an]).align||"left"===$n.align);)this._placeToken($n,A,Ot,Ve,hn,"left",We),Ht-=$n.width,hn+=$n.width,an++;for(;sr>=0&&"right"===($n=St[sr]).align;)this._placeToken($n,A,Ot,Ve,Vn,"right",We),Ht-=$n.width,Vn-=$n.width,sr--;for(hn+=(ce-(hn-Ee)-(He-Vn)-Ht)/2;an<=sr;)this._placeToken($n=St[an],A,Ot,Ve,hn+$n.width/2,"center",We),hn+=$n.width,an++;Ve+=Ot}},M.prototype._placeToken=function(A,O,B,ce,ae,oe,de){var ne=O.rich[A.styleName]||{};ne.text=A.text;var xe=A.verticalAlign,fe=ce+B/2;"top"===xe?fe=ce+A.height/2:"bottom"===xe&&(fe=ce+B-A.height/2),!A.isLineHolder&&T(ne)&&this._renderBackground(ne,O,"right"===oe?ae-A.width:"center"===oe?ae-A.width/2:ae,fe-A.height/2,A.width,A.height);var we=!!ne.backgroundColor,Te=A.textPadding;Te&&(ae=V(ae,oe,Te),fe-=A.height/2-Te[0]-A.innerHeight/2);var Ae=this._getOrCreateChild(le.Z),Ee=Ae.createStyle();Ae.useStyle(Ee);var Ve=this._defaultStyle,He=!1,We=0,$e=J("fill"in ne?ne.fill:"fill"in O?O.fill:(He=!0,Ve.fill)),ct=W("stroke"in ne?ne.stroke:"stroke"in O?O.stroke:we||de||Ve.autoStroke&&!He?null:(We=2,Ve.stroke)),St=ne.textShadowBlur>0||O.textShadowBlur>0;Ee.text=A.text,Ee.x=ae,Ee.y=fe,St&&(Ee.shadowBlur=ne.textShadowBlur||O.textShadowBlur||0,Ee.shadowColor=ne.textShadowColor||O.textShadowColor||"transparent",Ee.shadowOffsetX=ne.textShadowOffsetX||O.textShadowOffsetX||0,Ee.shadowOffsetY=ne.textShadowOffsetY||O.textShadowOffsetY||0),Ee.textAlign=oe,Ee.textBaseline="middle",Ee.font=A.font||X.Uo,Ee.opacity=(0,ye.retrieve3)(ne.opacity,O.opacity,1),Q(Ee,ne),ct&&(Ee.lineWidth=(0,ye.retrieve3)(ne.lineWidth,O.lineWidth,We),Ee.lineDash=(0,ye.retrieve2)(ne.lineDash,O.lineDash),Ee.lineDashOffset=O.lineDashOffset||0,Ee.stroke=ct),$e&&(Ee.fill=$e);var _t=A.contentWidth,Ot=A.contentHeight;Ae.setBoundingRect(new he.Z((0,ge.M3)(Ee.x,_t,Ee.textAlign),(0,ge.mU)(Ee.y,Ot,Ee.textBaseline),_t,Ot))},M.prototype._renderBackground=function(A,O,B,ce,ae,oe){var Ae,Ee,He,de=A.backgroundColor,ne=A.borderWidth,xe=A.borderColor,fe=de&&de.image,ve=de&&!fe,we=A.borderRadius,Te=this;if(ve||A.lineHeight||ne&&xe){(Ae=this._getOrCreateChild(Ce.Z)).useStyle(Ae.createStyle()),Ae.style.fill=null;var Ve=Ae.shape;Ve.x=B,Ve.y=ce,Ve.width=ae,Ve.height=oe,Ve.r=we,Ae.dirtyShape()}if(ve)(He=Ae.style).fill=de||null,He.fillOpacity=(0,ye.retrieve2)(A.fillOpacity,1);else if(fe){(Ee=this._getOrCreateChild(be.ZP)).onload=function(){Te.dirtyStyle()};var We=Ee.style;We.image=de.image,We.x=B,We.y=ce,We.width=ae,We.height=oe}ne&&xe&&((He=Ae.style).lineWidth=ne,He.stroke=xe,He.strokeOpacity=(0,ye.retrieve2)(A.strokeOpacity,1),He.lineDash=A.borderDash,He.lineDashOffset=A.borderDashOffset||0,Ae.strokeContainThreshold=0,Ae.hasFill()&&Ae.hasStroke()&&(He.strokeFirst=!0,He.lineWidth*=2));var $e=(Ae||Ee).style;$e.shadowBlur=A.shadowBlur||0,$e.shadowColor=A.shadowColor||"transparent",$e.shadowOffsetX=A.shadowOffsetX||0,$e.shadowOffsetY=A.shadowOffsetY||0,$e.opacity=(0,ye.retrieve3)(A.opacity,O.opacity,1)},M.makeFont=function(A){var O="";return F(A)&&(O=[A.fontStyle,A.fontWeight,Y(A.fontSize),A.fontFamily||"sans-serif"].join(" ")),O&&(0,ye.trim)(O)||A.textFont||A.font},M}(j.ZP),ie={left:!0,right:1,center:1},K={top:1,bottom:1,middle:1},b=["fontStyle","fontWeight","fontSize","fontFamily"];function Y(E){return"string"!=typeof E||-1===E.indexOf("px")&&-1===E.indexOf("rem")&&-1===E.indexOf("em")?isNaN(+E)?X.n5+"px":E+"px":E}function Q(E,M){for(var A=0;A<b.length;A++){var O=b[A],B=M[O];null!=B&&(E[O]=B)}}function F(E){return null!=E.fontSize||E.fontFamily||E.fontWeight}function G(E){if(E){E.font=$.makeFont(E);var M=E.align;"middle"===M&&(M="center"),E.align=null==M||ie[M]?M:"left";var A=E.verticalAlign;"center"===A&&(A="middle"),E.verticalAlign=null==A||K[A]?A:"top",E.padding&&(E.padding=(0,ye.normalizeCssArray)(E.padding))}}function W(E,M){return null==E||M<=0||"transparent"===E||"none"===E?null:E.image||E.colorStops?"#000":E}function J(E){return null==E||"none"===E?null:E.image||E.colorStops?"#000":E}function V(E,M,A){return"right"===M?E-A[1]:"center"===M?E+A[3]/2-A[1]/2:E+A[3]}function P(E){var M=E.text;return null!=M&&(M+=""),M}function T(E){return!!(E.backgroundColor||E.lineHeight||E.borderWidth&&E.borderColor)}const R=$},2369:(Vt,Qe,H)=>{H.d(Qe,{RH:()=>le,SE:()=>Se,YV:()=>ue});var ue=1,Se=2,le=4},6790:(Vt,Qe,H)=>{H.d(Qe,{Gq:()=>ge,ko:()=>ye,v5:()=>Ce});var ue=H(7148),Se=H(5730),le=new ue.ZP(50);function ye(he){if("string"==typeof he){var j=le.get(he);return j&&j.image}return he}function ge(he,j,X,re,U){if(he){if("string"==typeof he){if(j&&j.__zrImageSrc===he||!X)return j;var ee=le.get(he),$={hostEl:X,cb:re,cbPayload:U};return ee?!Ce(j=ee.image)&&ee.pending.push($):((j=Se.qW.loadImage(he,be,be)).__zrImageSrc=he,le.put(he,j.__cachedImgObj={image:j,pending:[$]})),j}return he}return j}function be(){var he=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var j=0;j<he.pending.length;j++){var X=he.pending[j],re=X.cb;re&&re(this,X.cbPayload),X.hostEl.dirty()}he.pending.length=0}function Ce(he){return he&&he.width&&he.height}},7969:(Vt,Qe,H)=>{H.d(Qe,{$F:()=>ee,NY:()=>j,aF:()=>ge});var ue=H(6790),Se=H(628),le=H(1790),ye=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function ge(Q,F,q,G,W){if(!F)return"";var J=(Q+"").split("\n");W=be(F,q,G,W);for(var V=0,P=J.length;V<P;V++)J[V]=Ce(J[V],W);return J.join("\n")}function be(Q,F,q,G){var W=(0,Se.extend)({},G=G||{});W.font=F,q=(0,Se.retrieve2)(q,"..."),W.maxIterations=(0,Se.retrieve2)(G.maxIterations,2);var J=W.minChar=(0,Se.retrieve2)(G.minChar,0);W.cnCharWidth=(0,le.dz)("\u56fd",F);var V=W.ascCharWidth=(0,le.dz)("a",F);W.placeholder=(0,Se.retrieve2)(G.placeholder,"");for(var P=Q=Math.max(0,Q-1),T=0;T<J&&P>=V;T++)P-=V;var R=(0,le.dz)(q,F);return R>P&&(q="",R=0),P=Q-R,W.ellipsis=q,W.ellipsisWidth=R,W.contentWidth=P,W.containerWidth=Q,W}function Ce(Q,F){var q=F.containerWidth,G=F.font,W=F.contentWidth;if(!q)return"";var J=(0,le.dz)(Q,G);if(J<=q)return Q;for(var V=0;;V++){if(J<=W||V>=F.maxIterations){Q+=F.ellipsis;break}var P=0===V?he(Q,W,F.ascCharWidth,F.cnCharWidth):J>0?Math.floor(Q.length*W/J):0;Q=Q.substr(0,P),J=(0,le.dz)(Q,G)}return""===Q&&(Q=F.placeholder),Q}function he(Q,F,q,G){for(var W=0,J=0,V=Q.length;J<V&&W<F;J++){var P=Q.charCodeAt(J);W+=0<=P&&P<=127?q:G}return J}function j(Q,F){null!=Q&&(Q+="");var M,q=F.overflow,G=F.padding,W=F.font,J="truncate"===q,V=(0,le.Dp)(W),P=(0,Se.retrieve2)(F.lineHeight,V),T=!!F.backgroundColor,R="truncate"===F.lineOverflow,E=F.width,A=(M=null==E||"break"!==q&&"breakAll"!==q?Q?Q.split("\n"):[]:Q?Y(Q,F.font,E,"breakAll"===q,0).lines:[]).length*P,O=(0,Se.retrieve2)(F.height,A);if(A>O&&R){var B=Math.floor(O/P);M=M.slice(0,B)}if(Q&&J&&null!=E)for(var ce=be(E,W,F.ellipsis,{minChar:F.truncateMinChar,placeholder:F.placeholder}),ae=0;ae<M.length;ae++)M[ae]=Ce(M[ae],ce);var oe=O,de=0;for(ae=0;ae<M.length;ae++)de=Math.max((0,le.dz)(M[ae],W),de);null==E&&(E=de);var ne=de;return G&&(oe+=G[0]+G[2],ne+=G[1]+G[3],E+=G[1]+G[3]),T&&(ne=E),{lines:M,height:O,outerWidth:ne,outerHeight:oe,lineHeight:P,calculatedLineHeight:V,contentWidth:de,contentHeight:A,width:E}}var X=function Q(){},re=function Q(F){this.tokens=[],F&&(this.tokens=F)},U=function Q(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]};function ee(Q,F){var q=new U;if(null!=Q&&(Q+=""),!Q)return q;for(var T,G=F.width,W=F.height,J=F.overflow,V="break"!==J&&"breakAll"!==J||null==G?null:{width:G,accumWidth:0,breakAll:"breakAll"===J},P=ye.lastIndex=0;null!=(T=ye.exec(Q));){var R=T.index;R>P&&$(q,Q.substring(P,R),F,V),$(q,T[2],F,V,T[1]),P=ye.lastIndex}P<Q.length&&$(q,Q.substring(P,Q.length),F,V);var E=[],M=0,A=0,O=F.padding,B="truncate"===J,ce="truncate"===F.lineOverflow;function ae(Ot,Ht,an){Ot.width=Ht,Ot.lineHeight=an,M+=an,A=Math.max(A,Ht)}e:for(var oe=0;oe<q.lines.length;oe++){for(var de=q.lines[oe],ne=0,xe=0,fe=0;fe<de.tokens.length;fe++){var we=(ve=de.tokens[fe]).styleName&&F.rich[ve.styleName]||{},Te=ve.textPadding=we.padding,Ae=Te?Te[1]+Te[3]:0,Ee=ve.font=we.font||F.font;ve.contentHeight=(0,le.Dp)(Ee);var Ve=(0,Se.retrieve2)(we.height,ve.contentHeight);if(ve.innerHeight=Ve,Te&&(Ve+=Te[0]+Te[2]),ve.height=Ve,ve.lineHeight=(0,Se.retrieve3)(we.lineHeight,F.lineHeight,Ve),ve.align=we&&we.align||F.align,ve.verticalAlign=we&&we.verticalAlign||"middle",ce&&null!=W&&M+ve.lineHeight>W){fe>0?(de.tokens=de.tokens.slice(0,fe),ae(de,xe,ne),q.lines=q.lines.slice(0,oe+1)):q.lines=q.lines.slice(0,oe);break e}var He=we.width,We=null==He||"auto"===He;if("string"==typeof He&&"%"===He.charAt(He.length-1))ve.percentWidth=He,E.push(ve),ve.contentWidth=(0,le.dz)(ve.text,Ee);else{if(We){var $e=we.backgroundColor,ct=$e&&$e.image;ct&&(ct=ue.ko(ct),ue.v5(ct)&&(ve.width=Math.max(ve.width,ct.width*Ve/ct.height)))}var St=B&&null!=G?G-xe:null;null!=St&&St<ve.width?!We||St<Ae?(ve.text="",ve.width=ve.contentWidth=0):(ve.text=ge(ve.text,St-Ae,Ee,F.ellipsis,{minChar:F.truncateMinChar}),ve.width=ve.contentWidth=(0,le.dz)(ve.text,Ee)):ve.contentWidth=(0,le.dz)(ve.text,Ee)}ve.width+=Ae,xe+=ve.width,we&&(ne=Math.max(ne,ve.lineHeight))}ae(de,xe,ne)}for(q.outerWidth=q.width=(0,Se.retrieve2)(G,A),q.outerHeight=q.height=(0,Se.retrieve2)(W,M),q.contentHeight=M,q.contentWidth=A,O&&(q.outerWidth+=O[1]+O[3],q.outerHeight+=O[0]+O[2]),oe=0;oe<E.length;oe++){var ve;(ve=E[oe]).width=parseInt(ve.percentWidth,10)/100*q.width}return q}function $(Q,F,q,G,W){var E,M,J=""===F,V=W&&q.rich[W]||{},P=Q.lines,T=V.font||q.font,R=!1;if(G){var A=V.padding,O=A?A[1]+A[3]:0;if(null!=V.width&&"auto"!==V.width){var B=(0,le.GM)(V.width,G.width)+O;P.length>0&&B+G.accumWidth>G.width&&(E=F.split("\n"),R=!0),G.accumWidth=B}else{var ce=Y(F,T,G.width,G.breakAll,G.accumWidth);G.accumWidth=ce.accumWidth+O,M=ce.linesWidths,E=ce.lines}}else E=F.split("\n");for(var ae=0;ae<E.length;ae++){var oe=E[ae],de=new X;if(de.styleName=W,de.text=oe,de.isLineHolder=!oe&&!J,de.width="number"==typeof V.width?V.width:M?M[ae]:(0,le.dz)(oe,T),ae||R)P.push(new re([de]));else{var ne=(P[P.length-1]||(P[0]=new re)).tokens,xe=ne.length;1===xe&&ne[0].isLineHolder?ne[0]=de:(oe||!xe||J)&&ne.push(de)}}}var K=(0,Se.reduce)(",&?/;] ".split(""),function(Q,F){return Q[F]=!0,Q},{});function b(Q){return!function ie(Q){var F=Q.charCodeAt(0);return F>=33&&F<=383}(Q)||!!K[Q]}function Y(Q,F,q,G,W){for(var J=[],V=[],P="",T="",R=0,E=0,M=0;M<Q.length;M++){var A=Q.charAt(M);if("\n"!==A){var O=(0,le.dz)(A,F),B=!G&&!b(A);(J.length?E+O>q:W+E+O>q)?E?(P||T)&&(B?(P||(P=T,T="",E=R=0),J.push(P),V.push(E-R),T+=A,P="",E=R+=O):(T&&(P+=T,T="",R=0),J.push(P),V.push(E),P=A,E=O)):B?(J.push(T),V.push(R),T=A,R=O):(J.push(A),V.push(O)):(E+=O,B?(T+=A,R+=O):(T&&(P+=T,T="",R=0),P+=A))}else T&&(P+=T,E+=R),J.push(P),V.push(E),P="",T="",R=0,E=0}return!J.length&&!P&&(P=Q,T="",R=0),T&&(P+=T),P&&(J.push(P),V.push(E)),1===J.length&&(E+=W),{accumWidth:E,lines:J,linesWidths:V}}},7146:(Vt,Qe,H)=>{H.d(Qe,{L:()=>le});var ue=H(8221);function le(ye,ge,be){var Ce=ge.smooth,he=ge.points;if(he&&he.length>=2){if(Ce){var j=function Se(ye,ge,be,Ce){var U,ee,$,ie,he=[],j=[],X=[],re=[];if(Ce){$=[1/0,1/0],ie=[-1/0,-1/0];for(var K=0,b=ye.length;K<b;K++)(0,ue.min)($,$,ye[K]),(0,ue.max)(ie,ie,ye[K]);(0,ue.min)($,$,Ce[0]),(0,ue.max)(ie,ie,Ce[1])}for(K=0,b=ye.length;K<b;K++){var Y=ye[K];if(be)U=ye[K?K-1:b-1],ee=ye[(K+1)%b];else{if(0===K||K===b-1){he.push((0,ue.clone)(ye[K]));continue}U=ye[K-1],ee=ye[K+1]}(0,ue.sub)(j,ee,U),(0,ue.scale)(j,j,ge);var Q=(0,ue.distance)(Y,U),F=(0,ue.distance)(Y,ee),q=Q+F;0!==q&&(Q/=q,F/=q),(0,ue.scale)(X,j,-Q),(0,ue.scale)(re,j,F);var G=(0,ue.add)([],Y,X),W=(0,ue.add)([],Y,re);Ce&&((0,ue.max)(G,G,$),(0,ue.min)(G,G,ie),(0,ue.max)(W,W,$),(0,ue.min)(W,W,ie)),he.push(G),he.push(W)}return be&&he.push(he.shift()),he}(he,Ce,be,ge.smoothConstraint);ye.moveTo(he[0][0],he[0][1]);for(var X=he.length,re=0;re<(be?X:X-1);re++){var U=j[2*re],ee=j[2*re+1],$=he[(re+1)%X];ye.bezierCurveTo(U[0],U[1],ee[0],ee[1],$[0],$[1])}}else{ye.moveTo(he[0][0],he[0][1]),re=1;for(var ie=he.length;re<ie;re++)ye.lineTo(he[re][0],he[re][1])}be&&ye.closePath()}}},5333:(Vt,Qe,H)=>{H.d(Qe,{Pw:()=>le,_3:()=>Se,vu:()=>ye});var ue=Math.round;function Se(ge,be,Ce){if(be){var he=be.x1,j=be.x2,X=be.y1,re=be.y2;ge.x1=he,ge.x2=j,ge.y1=X,ge.y2=re;var U=Ce&&Ce.lineWidth;return U&&(ue(2*he)===ue(2*j)&&(ge.x1=ge.x2=ye(he,U,!0)),ue(2*X)===ue(2*re)&&(ge.y1=ge.y2=ye(X,U,!0))),ge}}function le(ge,be,Ce){if(be){var he=be.x,j=be.y,X=be.width,re=be.height;ge.x=he,ge.y=j,ge.width=X,ge.height=re;var U=Ce&&Ce.lineWidth;return U&&(ge.x=ye(he,U,!0),ge.y=ye(j,U,!0),ge.width=Math.max(ye(he+X,U,!1)-ge.x,0===X?0:1),ge.height=Math.max(ye(j+re,U,!1)-ge.y,0===re?0:1)),ge}}function ye(ge,be,Ce){if(!be)return ge;var he=ue(2*ge);return(he+ue(be))%2==0?he/2:(he+(Ce?1:-1))/2}},8234:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>ge});var ue=H(908),Se=H(126),le=function be(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},ye=function(be){function Ce(he){return be.call(this,he)||this}return(0,ue.ZT)(Ce,be),Ce.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},Ce.prototype.getDefaultShape=function(){return new le},Ce.prototype.buildPath=function(he,j){var X=j.cx,re=j.cy,U=Math.max(j.r,0),ee=j.startAngle,$=j.endAngle,ie=j.clockwise,K=Math.cos(ee),b=Math.sin(ee);he.moveTo(K*U+X,b*U+re),he.arc(X,re,U,ee,$,!ie)},Ce}(Se.ZP);ye.prototype.type="arc";const ge=ye},6146:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>j});var ue=H(908),Se=H(126),le=H(8221),ye=H(9969),ge=[],be=function X(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1};function Ce(X,re,U){return null!=X.cpx2||null!=X.cpy2?[(U?ye.X_:ye.af)(X.x1,X.cpx1,X.cpx2,X.x2,re),(U?ye.X_:ye.af)(X.y1,X.cpy1,X.cpy2,X.y2,re)]:[(U?ye.AZ:ye.Zm)(X.x1,X.cpx1,X.x2,re),(U?ye.AZ:ye.Zm)(X.y1,X.cpy1,X.y2,re)]}var he=function(X){function re(U){return X.call(this,U)||this}return(0,ue.ZT)(re,X),re.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},re.prototype.getDefaultShape=function(){return new be},re.prototype.buildPath=function(U,ee){var $=ee.x1,ie=ee.y1,K=ee.x2,b=ee.y2,Y=ee.cpx1,Q=ee.cpy1,F=ee.cpx2,q=ee.cpy2,G=ee.percent;0!==G&&(U.moveTo($,ie),null==F||null==q?(G<1&&((0,ye.Lx)($,Y,K,G,ge),Y=ge[1],K=ge[2],(0,ye.Lx)(ie,Q,b,G,ge),Q=ge[1],b=ge[2]),U.quadraticCurveTo(Y,Q,K,b)):(G<1&&((0,ye.Vz)($,Y,F,K,G,ge),Y=ge[1],F=ge[2],K=ge[3],(0,ye.Vz)(ie,Q,q,b,G,ge),Q=ge[1],q=ge[2],b=ge[3]),U.bezierCurveTo(Y,Q,F,q,K,b)))},re.prototype.pointAt=function(U){return Ce(this.shape,U,!1)},re.prototype.tangentAt=function(U){var ee=Ce(this.shape,U,!0);return le.normalize(ee,ee)},re}(Se.ZP);he.prototype.type="bezier-curve";const j=he},9359:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>ge});var ue=H(908),Se=H(126),le=function be(){this.cx=0,this.cy=0,this.r=0},ye=function(be){function Ce(he){return be.call(this,he)||this}return(0,ue.ZT)(Ce,be),Ce.prototype.getDefaultShape=function(){return new le},Ce.prototype.buildPath=function(he,j){he.moveTo(j.cx+j.r,j.cy),he.arc(j.cx,j.cy,j.r,0,2*Math.PI)},Ce}(Se.ZP);ye.prototype.type="circle";const ge=ye},6743:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>ge});var ue=H(908),Se=H(126),le=function be(){this.cx=0,this.cy=0,this.rx=0,this.ry=0},ye=function(be){function Ce(he){return be.call(this,he)||this}return(0,ue.ZT)(Ce,be),Ce.prototype.getDefaultShape=function(){return new le},Ce.prototype.buildPath=function(he,j){var X=.5522848,re=j.cx,U=j.cy,ee=j.rx,$=j.ry,ie=ee*X,K=$*X;he.moveTo(re-ee,U),he.bezierCurveTo(re-ee,U-K,re-ie,U-$,re,U-$),he.bezierCurveTo(re+ie,U-$,re+ee,U-K,re+ee,U),he.bezierCurveTo(re+ee,U+K,re+ie,U+$,re,U+$),he.bezierCurveTo(re-ie,U+$,re-ee,U+K,re-ee,U),he.closePath()},Ce}(Se.ZP);ye.prototype.type="ellipse";const ge=ye},4110:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>Ce});var ue=H(908),Se=H(126),le=H(5333),ye={},ge=function he(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1},be=function(he){function j(X){return he.call(this,X)||this}return(0,ue.ZT)(j,he),j.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},j.prototype.getDefaultShape=function(){return new ge},j.prototype.buildPath=function(X,re){var U,ee,$,ie;if(this.subPixelOptimize){var K=(0,le._3)(ye,re,this.style);U=K.x1,ee=K.y1,$=K.x2,ie=K.y2}else U=re.x1,ee=re.y1,$=re.x2,ie=re.y2;var b=re.percent;0!==b&&(X.moveTo(U,ee),b<1&&($=U*(1-b)+$*b,ie=ee*(1-b)+ie*b),X.lineTo($,ie))},j.prototype.pointAt=function(X){var re=this.shape;return[re.x1*(1-X)+re.x2*X,re.y1*(1-X)+re.y2*X]},j}(Se.ZP);be.prototype.type="line";const Ce=be},3186:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>be});var ue=H(908),Se=H(126),le=H(7146),ye=function Ce(){this.points=null,this.smooth=0,this.smoothConstraint=null},ge=function(Ce){function he(j){return Ce.call(this,j)||this}return(0,ue.ZT)(he,Ce),he.prototype.getDefaultShape=function(){return new ye},he.prototype.buildPath=function(j,X){le.L(j,X,!0)},he}(Se.ZP);ge.prototype.type="polygon";const be=ge},7834:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>be});var ue=H(908),Se=H(126),le=H(7146),ye=function Ce(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null},ge=function(Ce){function he(j){return Ce.call(this,j)||this}return(0,ue.ZT)(he,Ce),he.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},he.prototype.getDefaultShape=function(){return new ye},he.prototype.buildPath=function(j,X){le.L(j,X,!1)},he}(Se.ZP);ge.prototype.type="polyline";const be=ge},3160:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>he});var ue=H(908),Se=H(126),ye=H(5333),ge=function j(){this.x=0,this.y=0,this.width=0,this.height=0},be={},Ce=function(j){function X(re){return j.call(this,re)||this}return(0,ue.ZT)(X,j),X.prototype.getDefaultShape=function(){return new ge},X.prototype.buildPath=function(re,U){var ee,$,ie,K;if(this.subPixelOptimize){var b=(0,ye.Pw)(be,U,this.style);ee=b.x,$=b.y,ie=b.width,K=b.height,b.r=U.r,U=b}else ee=U.x,$=U.y,ie=U.width,K=U.height;U.r?function le(j,X){var K,b,Y,Q,F,re=X.x,U=X.y,ee=X.width,$=X.height,ie=X.r;ee<0&&(re+=ee,ee=-ee),$<0&&(U+=$,$=-$),"number"==typeof ie?K=b=Y=Q=ie:ie instanceof Array?1===ie.length?K=b=Y=Q=ie[0]:2===ie.length?(K=Y=ie[0],b=Q=ie[1]):3===ie.length?(K=ie[0],b=Q=ie[1],Y=ie[2]):(K=ie[0],b=ie[1],Y=ie[2],Q=ie[3]):K=b=Y=Q=0,K+b>ee&&(K*=ee/(F=K+b),b*=ee/F),Y+Q>ee&&(Y*=ee/(F=Y+Q),Q*=ee/F),b+Y>$&&(b*=$/(F=b+Y),Y*=$/F),K+Q>$&&(K*=$/(F=K+Q),Q*=$/F),j.moveTo(re+K,U),j.lineTo(re+ee-b,U),0!==b&&j.arc(re+ee-b,U+b,b,-Math.PI/2,0),j.lineTo(re+ee,U+$-Y),0!==Y&&j.arc(re+ee-Y,U+$-Y,Y,0,Math.PI/2),j.lineTo(re+Q,U+$),0!==Q&&j.arc(re+Q,U+$-Q,Q,Math.PI/2,Math.PI),j.lineTo(re,U+K),0!==K&&j.arc(re+K,U+K,K,Math.PI,1.5*Math.PI)}(re,U):re.rect(ee,$,ie,K)},X.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},X}(Se.ZP);Ce.prototype.type="rect";const he=Ce},495:(Vt,Qe,H)=>{H.d(Qe,{Z:()=>ge});var ue=H(908),Se=H(126),le=function be(){this.cx=0,this.cy=0,this.r=0,this.r0=0},ye=function(be){function Ce(he){return be.call(this,he)||this}return(0,ue.ZT)(Ce,be),Ce.prototype.getDefaultShape=function(){return new le},Ce.prototype.buildPath=function(he,j){var X=j.cx,re=j.cy,U=2*Math.PI;he.moveTo(X+j.r,re),he.arc(X,re,j.r,0,U,!1),he.moveTo(X+j.r0,re),he.arc(X,re,j.r0,0,U,!0)},Ce}(Se.ZP);ye.prototype.type="ring";const ge=ye},9770:(Vt,Qe,H)=>{H.d(Qe,{C:()=>q});var ue=H(908),Se=H(126),le=H(628),ye=Math.PI,ge=2*ye,be=Math.sin,Ce=Math.cos,he=Math.acos,j=Math.atan2,X=Math.abs,re=Math.sqrt,U=Math.max,ee=Math.min,$=1e-4;function K(G,W,J,V,P,T,R){var E=G-J,M=W-V,A=(R?T:-T)/re(E*E+M*M),O=A*M,B=-A*E,ce=G+O,ae=W+B,oe=J+O,de=V+B,ne=(ce+oe)/2,xe=(ae+de)/2,fe=oe-ce,ve=de-ae,we=fe*fe+ve*ve,Te=P-T,Ae=ce*de-oe*ae,Ee=(ve<0?-1:1)*re(U(0,Te*Te*we-Ae*Ae)),Ve=(Ae*ve-fe*Ee)/we,He=(-Ae*fe-ve*Ee)/we,We=(Ae*ve+fe*Ee)/we,$e=(-Ae*fe+ve*Ee)/we,ct=Ve-ne,St=He-xe,_t=We-ne,Ot=$e-xe;return ct*ct+St*St>_t*_t+Ot*Ot&&(Ve=We,He=$e),{cx:Ve,cy:He,x0:-O,y0:-B,x1:Ve*(P/Te-1),y1:He*(P/Te-1)}}var Q=function G(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.cornerRadius=0},F=function(G){function W(J){return G.call(this,J)||this}return(0,ue.ZT)(W,G),W.prototype.getDefaultShape=function(){return new Q},W.prototype.buildPath=function(J,V){!function Y(G,W){var J,V=U(W.r,0),P=U(W.r0||0,0),T=V>0;if(T||P>0){if(T||(V=P,P=0),P>V){var E=V;V=P,P=E}var M=W.startAngle,A=W.endAngle;if(!isNaN(M)&&!isNaN(A)){var O=W.cx,B=W.cy,ce=!!W.clockwise,ae=X(A-M),oe=ae>ge&&ae%ge;if(oe>$&&(ae=oe),V>$)if(ae>ge-$)G.moveTo(O+V*Ce(M),B+V*be(M)),G.arc(O,B,V,M,A,!ce),P>$&&(G.moveTo(O+P*Ce(A),B+P*be(A)),G.arc(O,B,P,A,M,ce));else{var de=void 0,ne=void 0,xe=void 0,fe=void 0,ve=void 0,we=void 0,Te=void 0,Ae=void 0,Ee=void 0,Ve=void 0,He=void 0,We=void 0,$e=void 0,ct=void 0,St=void 0,_t=void 0,Ot=V*Ce(M),Ht=V*be(M),an=P*Ce(A),hn=P*be(A),Vn=ae>$;if(Vn){var sr=W.cornerRadius;sr&&(J=function b(G){var W;if((0,le.isArray)(G)){var J=G.length;if(!J)return G;W=1===J?[G[0],G[0],0,0]:2===J?[G[0],G[0],G[1],G[1]]:3===J?G.concat(G[2]):G}else W=[G,G,G,G];return W}(sr),de=J[0],ne=J[1],xe=J[2],fe=J[3]);var $n=X(V-P)/2;if(ve=ee($n,xe),we=ee($n,fe),Te=ee($n,de),Ae=ee($n,ne),He=Ee=U(ve,we),We=Ve=U(Te,Ae),(Ee>$||Ve>$)&&($e=V*Ce(A),ct=V*be(A),St=P*Ce(M),_t=P*be(M),ae<ye)){var gr=function ie(G,W,J,V,P,T,R,E){var M=J-G,A=V-W,O=R-P,B=E-T,ce=B*M-O*A;if(!(ce*ce<$))return[G+(ce=(O*(W-T)-B*(G-P))/ce)*M,W+ce*A]}(Ot,Ht,St,_t,$e,ct,an,hn);if(gr){var er=Ot-gr[0],Kt=Ht-gr[1],cn=$e-gr[0],On=ct-gr[1],jn=1/be(he((er*cn+Kt*On)/(re(er*er+Kt*Kt)*re(cn*cn+On*On)))/2),et=re(gr[0]*gr[0]+gr[1]*gr[1]);He=ee(Ee,(V-et)/(jn+1)),We=ee(Ve,(P-et)/(jn-1))}}}if(Vn)if(He>$){var Tt=ee(xe,He),jt=ee(fe,He),Rt=K(St,_t,Ot,Ht,V,Tt,ce),fn=K($e,ct,an,hn,V,jt,ce);G.moveTo(O+Rt.cx+Rt.x0,B+Rt.cy+Rt.y0),He<Ee&&Tt===jt?G.arc(O+Rt.cx,B+Rt.cy,He,j(Rt.y0,Rt.x0),j(fn.y0,fn.x0),!ce):(Tt>0&&G.arc(O+Rt.cx,B+Rt.cy,Tt,j(Rt.y0,Rt.x0),j(Rt.y1,Rt.x1),!ce),G.arc(O,B,V,j(Rt.cy+Rt.y1,Rt.cx+Rt.x1),j(fn.cy+fn.y1,fn.cx+fn.x1),!ce),jt>0&&G.arc(O+fn.cx,B+fn.cy,jt,j(fn.y1,fn.x1),j(fn.y0,fn.x0),!ce))}else G.moveTo(O+Ot,B+Ht),G.arc(O,B,V,M,A,!ce);else G.moveTo(O+Ot,B+Ht);P>$&&Vn?We>$?(Tt=ee(de,We),Rt=K(an,hn,$e,ct,P,-(jt=ee(ne,We)),ce),fn=K(Ot,Ht,St,_t,P,-Tt,ce),G.lineTo(O+Rt.cx+Rt.x0,B+Rt.cy+Rt.y0),We<Ve&&Tt===jt?G.arc(O+Rt.cx,B+Rt.cy,We,j(Rt.y0,Rt.x0),j(fn.y0,fn.x0),!ce):(jt>0&&G.arc(O+Rt.cx,B+Rt.cy,jt,j(Rt.y0,Rt.x0),j(Rt.y1,Rt.x1),!ce),G.arc(O,B,P,j(Rt.cy+Rt.y1,Rt.cx+Rt.x1),j(fn.cy+fn.y1,fn.cx+fn.x1),ce),Tt>0&&G.arc(O+fn.cx,B+fn.cy,Tt,j(fn.y1,fn.x1),j(fn.y0,fn.x0),!ce))):(G.lineTo(O+an,B+hn),G.arc(O,B,P,A,M,ce)):G.lineTo(O+an,B+hn)}else G.moveTo(O,B);G.closePath()}}}(J,V)},W.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},W}(Se.ZP);F.prototype.type="sector";const q=F},8541:(Vt,Qe,H)=>{H.d(Qe,{Cv:()=>b,Gk:()=>J,H3:()=>G,I1:()=>F,Pn:()=>j,R:()=>Q,gA:()=>V,gO:()=>q,i2:()=>$,jY:()=>U,m1:()=>W,mU:()=>ee,n1:()=>ie,oF:()=>P,qV:()=>re,ut:()=>ge,zT:()=>Ce});var ue=H(628),Se=H(312),le=H(169),ye=Math.round;function ge(T){var R;if(T&&"transparent"!==T){if("string"==typeof T&&T.indexOf("rgba")>-1){var E=(0,Se.parse)(T);E&&(T="rgb("+E[0]+","+E[1]+","+E[2]+")",R=E[3])}}else T="none";return{color:T,opacity:R??1}}function Ce(T){return T<1e-4&&T>-1e-4}function he(T){return ye(1e3*T)/1e3}function j(T){return ye(1e4*T)/1e4}function re(T){return"matrix("+he(T[0])+","+he(T[1])+","+he(T[2])+","+he(T[3])+","+j(T[4])+","+j(T[5])+")"}var U={left:"start",right:"end",center:"middle",middle:"middle"};function ee(T,R,E){return"top"===E?T+=R/2:"bottom"===E&&(T-=R/2),T}function $(T){return T&&(T.shadowBlur||T.shadowOffsetX||T.shadowOffsetY)}function ie(T){var R=T.style,E=T.getGlobalScale();return[R.shadowColor,(R.shadowBlur||0).toFixed(2),(R.shadowOffsetX||0).toFixed(2),(R.shadowOffsetY||0).toFixed(2),E[0],E[1]].join(",")}function b(T){return T&&!!T.image}function Q(T){return b(T)||function Y(T){return T&&!!T.svgElement}(T)}function F(T){return"linear"===T.type}function q(T){return"radial"===T.type}function G(T){return T&&("linear"===T.type||"radial"===T.type)}function W(T){return"url(#"+T+")"}function J(T){var R=T.getGlobalScale(),E=Math.max(R[0],R[1]);return Math.max(Math.ceil(Math.log(E)/Math.log(10)),1)}function V(T){var R=T.x||0,E=T.y||0,M=(T.rotation||0)*ue.RADIAN_TO_DEGREE,A=(0,ue.retrieve2)(T.scaleX,1),O=(0,ue.retrieve2)(T.scaleY,1),B=T.skewX||0,ce=T.skewY||0,ae=[];return(R||E)&&ae.push("translate("+R+"px,"+E+"px)"),M&&ae.push("rotate("+M+")"),(1!==A||1!==O)&&ae.push("scale("+A+","+O+")"),(B||ce)&&ae.push("skew("+ye(B*ue.RADIAN_TO_DEGREE)+"deg, "+ye(ce*ue.RADIAN_TO_DEGREE)+"deg)"),ae.join(" ")}var P=le.Z.hasGlobalWindow&&(0,ue.isFunction)(window.btoa)?function(T){return window.btoa(unescape(T))}:typeof Buffer<"u"?function(T){return Buffer.from(T).toString("base64")}:function(T){return null}},312:(Vt,Qe,H)=>{H.r(Qe),H.d(Qe,{fastLerp:()=>F,fastMapToColor:()=>q,lerp:()=>G,lift:()=>Y,lum:()=>T,mapToColor:()=>W,modifyAlpha:()=>V,modifyHSL:()=>J,parse:()=>ie,random:()=>R,stringify:()=>P,toHex:()=>Q});var ue=H(7148),Se={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function le(E){return(E=Math.round(E))<0?0:E>255?255:E}function ge(E){return E<0?0:E>1?1:E}function be(E){var M=E;return M.length&&"%"===M.charAt(M.length-1)?le(parseFloat(M)/100*255):le(parseInt(M,10))}function Ce(E){var M=E;return M.length&&"%"===M.charAt(M.length-1)?ge(parseFloat(M)/100):ge(parseFloat(M))}function he(E,M,A){return A<0?A+=1:A>1&&(A-=1),6*A<1?E+(M-E)*A*6:2*A<1?M:3*A<2?E+(M-E)*(2/3-A)*6:E}function j(E,M,A){return E+(M-E)*A}function X(E,M,A,O,B){return E[0]=M,E[1]=A,E[2]=O,E[3]=B,E}function re(E,M){return E[0]=M[0],E[1]=M[1],E[2]=M[2],E[3]=M[3],E}var U=new ue.ZP(20),ee=null;function $(E,M){ee&&re(ee,M),ee=U.put(E,ee||M.slice())}function ie(E,M){if(E){M=M||[];var A=U.get(E);if(A)return re(M,A);var O=(E+="").replace(/ /g,"").toLowerCase();if(O in Se)return re(M,Se[O]),$(E,M),M;var ce,B=O.length;if("#"===O.charAt(0))return 4===B||5===B?(ce=parseInt(O.slice(1,4),16))>=0&&ce<=4095?(X(M,(3840&ce)>>4|(3840&ce)>>8,240&ce|(240&ce)>>4,15&ce|(15&ce)<<4,5===B?parseInt(O.slice(4),16)/15:1),$(E,M),M):void X(M,0,0,0,1):7===B||9===B?(ce=parseInt(O.slice(1,7),16))>=0&&ce<=16777215?(X(M,(16711680&ce)>>16,(65280&ce)>>8,255&ce,9===B?parseInt(O.slice(7),16)/255:1),$(E,M),M):void X(M,0,0,0,1):void 0;var ae=O.indexOf("("),oe=O.indexOf(")");if(-1!==ae&&oe+1===B){var de=O.substr(0,ae),ne=O.substr(ae+1,oe-(ae+1)).split(","),xe=1;switch(de){case"rgba":if(4!==ne.length)return 3===ne.length?X(M,+ne[0],+ne[1],+ne[2],1):X(M,0,0,0,1);xe=Ce(ne.pop());case"rgb":return ne.length>=3?(X(M,be(ne[0]),be(ne[1]),be(ne[2]),3===ne.length?xe:Ce(ne[3])),$(E,M),M):void X(M,0,0,0,1);case"hsla":return 4!==ne.length?void X(M,0,0,0,1):(ne[3]=Ce(ne[3]),K(ne,M),$(E,M),M);case"hsl":return 3!==ne.length?void X(M,0,0,0,1):(K(ne,M),$(E,M),M);default:return}}X(M,0,0,0,1)}}function K(E,M){var A=(parseFloat(E[0])%360+360)%360/360,O=Ce(E[1]),B=Ce(E[2]),ce=B<=.5?B*(O+1):B+O-B*O,ae=2*B-ce;return X(M=M||[],le(255*he(ae,ce,A+1/3)),le(255*he(ae,ce,A)),le(255*he(ae,ce,A-1/3)),1),4===E.length&&(M[3]=E[3]),M}function Y(E,M){var A=ie(E);if(A){for(var O=0;O<3;O++)A[O]=M<0?A[O]*(1-M)|0:(255-A[O])*M+A[O]|0,A[O]>255?A[O]=255:A[O]<0&&(A[O]=0);return P(A,4===A.length?"rgba":"rgb")}}function Q(E){var M=ie(E);if(M)return((1<<24)+(M[0]<<16)+(M[1]<<8)+ +M[2]).toString(16).slice(1)}function F(E,M,A){if(M&&M.length&&E>=0&&E<=1){A=A||[];var O=E*(M.length-1),B=Math.floor(O),ce=Math.ceil(O),ae=M[B],oe=M[ce],de=O-B;return A[0]=le(j(ae[0],oe[0],de)),A[1]=le(j(ae[1],oe[1],de)),A[2]=le(j(ae[2],oe[2],de)),A[3]=ge(j(ae[3],oe[3],de)),A}}var q=F;function G(E,M,A){if(M&&M.length&&E>=0&&E<=1){var O=E*(M.length-1),B=Math.floor(O),ce=Math.ceil(O),ae=ie(M[B]),oe=ie(M[ce]),de=O-B,ne=P([le(j(ae[0],oe[0],de)),le(j(ae[1],oe[1],de)),le(j(ae[2],oe[2],de)),ge(j(ae[3],oe[3],de))],"rgba");return A?{color:ne,leftIndex:B,rightIndex:ce,value:O}:ne}}var W=G;function J(E,M,A,O){var B=ie(E);if(E)return B=function b(E){if(E){var de,ne,M=E[0]/255,A=E[1]/255,O=E[2]/255,B=Math.min(M,A,O),ce=Math.max(M,A,O),ae=ce-B,oe=(ce+B)/2;if(0===ae)de=0,ne=0;else{ne=oe<.5?ae/(ce+B):ae/(2-ce-B);var xe=((ce-M)/6+ae/2)/ae,fe=((ce-A)/6+ae/2)/ae,ve=((ce-O)/6+ae/2)/ae;M===ce?de=ve-fe:A===ce?de=1/3+xe-ve:O===ce&&(de=2/3+fe-xe),de<0&&(de+=1),de>1&&(de-=1)}var we=[360*de,ne,oe];return null!=E[3]&&we.push(E[3]),we}}(B),null!=M&&(B[0]=function ye(E){return(E=Math.round(E))<0?0:E>360?360:E}(M)),null!=A&&(B[1]=Ce(A)),null!=O&&(B[2]=Ce(O)),P(K(B),"rgba")}function V(E,M){var A=ie(E);if(A&&null!=M)return A[3]=ge(M),P(A,"rgba")}function P(E,M){if(E&&E.length){var A=E[0]+","+E[1]+","+E[2];return("rgba"===M||"hsva"===M||"hsla"===M)&&(A+=","+E[3]),M+"("+A+")"}}function T(E,M){var A=ie(E);return A?(.299*A[0]+.587*A[1]+.114*A[2])*A[3]/255+(1-A[3])*M:0}function R(){return P([Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random())],"rgb")}},9441:(Vt,Qe,H)=>{H.d(Qe,{U5:()=>R,iR:()=>V,Pc:()=>P,AA:()=>T});var ue=H(908),Se=H(126),le=H(7349),ye=H(8221),ge=le.Z.CMD,be=[[],[],[]],Ce=Math.sqrt,he=Math.atan2;function j(E,M){if(M){var B,ce,ae,oe,de,ne,A=E.data,O=E.len(),xe=ge.M,fe=ge.C,ve=ge.L,we=ge.R,Te=ge.A,Ae=ge.Q;for(ae=0,oe=0;ae<O;){switch(B=A[ae++],oe=ae,ce=0,B){case xe:case ve:ce=1;break;case fe:ce=3;break;case Ae:ce=2;break;case Te:var Ee=M[4],Ve=M[5],He=Ce(M[0]*M[0]+M[1]*M[1]),We=Ce(M[2]*M[2]+M[3]*M[3]),$e=he(-M[1]/We,M[0]/He);A[ae]*=He,A[ae++]+=Ee,A[ae]*=We,A[ae++]+=Ve,A[ae++]*=He,A[ae++]*=We,A[ae++]+=$e,A[ae++]+=$e,oe=ae+=2;break;case we:ne[0]=A[ae++],ne[1]=A[ae++],(0,ye.applyTransform)(ne,ne,M),A[oe++]=ne[0],A[oe++]=ne[1],ne[0]+=A[ae++],ne[1]+=A[ae++],(0,ye.applyTransform)(ne,ne,M),A[oe++]=ne[0],A[oe++]=ne[1]}for(de=0;de<ce;de++){var ct=be[de];ct[0]=A[ae++],ct[1]=A[ae++],(0,ye.applyTransform)(ct,ct,M),A[oe++]=ct[0],A[oe++]=ct[1]}}E.increaseVersion()}}var X=H(628),re=Math.sqrt,U=Math.sin,ee=Math.cos,$=Math.PI;function ie(E){return Math.sqrt(E[0]*E[0]+E[1]*E[1])}function K(E,M){return(E[0]*M[0]+E[1]*M[1])/(ie(E)*ie(M))}function b(E,M){return(E[0]*M[1]<E[1]*M[0]?-1:1)*Math.acos(K(E,M))}function Y(E,M,A,O,B,ce,ae,oe,de,ne,xe){var fe=de*($/180),ve=ee(fe)*(E-A)/2+U(fe)*(M-O)/2,we=-1*U(fe)*(E-A)/2+ee(fe)*(M-O)/2,Te=ve*ve/(ae*ae)+we*we/(oe*oe);Te>1&&(ae*=re(Te),oe*=re(Te));var Ae=(B===ce?-1:1)*re((ae*ae*(oe*oe)-ae*ae*(we*we)-oe*oe*(ve*ve))/(ae*ae*(we*we)+oe*oe*(ve*ve)))||0,Ee=Ae*ae*we/oe,Ve=Ae*-oe*ve/ae,He=(E+A)/2+ee(fe)*Ee-U(fe)*Ve,We=(M+O)/2+U(fe)*Ee+ee(fe)*Ve,$e=b([1,0],[(ve-Ee)/ae,(we-Ve)/oe]),ct=[(ve-Ee)/ae,(we-Ve)/oe],St=[(-1*ve-Ee)/ae,(-1*we-Ve)/oe],_t=b(ct,St);if(K(ct,St)<=-1&&(_t=$),K(ct,St)>=1&&(_t=0),_t<0){var Ot=Math.round(_t/$*1e6)/1e6;_t=2*$+Ot%2*$}xe.addData(ne,He,We,ae,oe,$e,_t,fe,ce)}var Q=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,F=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g,G=function(E){function M(){return null!==E&&E.apply(this,arguments)||this}return(0,ue.ZT)(M,E),M.prototype.applyTransform=function(A){},M}(Se.ZP);function W(E){return null!=E.setData}function J(E,M){var A=function q(E){var M=new le.Z;if(!E)return M;var ae,A=0,O=0,B=A,ce=O,oe=le.Z.CMD,de=E.match(Q);if(!de)return M;for(var ne=0;ne<de.length;ne++){for(var xe=de[ne],fe=xe.charAt(0),ve=void 0,we=xe.match(F)||[],Te=we.length,Ae=0;Ae<Te;Ae++)we[Ae]=parseFloat(we[Ae]);for(var Ee=0;Ee<Te;){var Ve=void 0,He=void 0,We=void 0,$e=void 0,ct=void 0,St=void 0,_t=void 0,Ot=A,Ht=O,an=void 0,hn=void 0;switch(fe){case"l":A+=we[Ee++],O+=we[Ee++],M.addData(ve=oe.L,A,O);break;case"L":A=we[Ee++],O=we[Ee++],M.addData(ve=oe.L,A,O);break;case"m":A+=we[Ee++],O+=we[Ee++],M.addData(ve=oe.M,A,O),B=A,ce=O,fe="l";break;case"M":A=we[Ee++],O=we[Ee++],M.addData(ve=oe.M,A,O),B=A,ce=O,fe="L";break;case"h":A+=we[Ee++],M.addData(ve=oe.L,A,O);break;case"H":A=we[Ee++],M.addData(ve=oe.L,A,O);break;case"v":O+=we[Ee++],M.addData(ve=oe.L,A,O);break;case"V":O=we[Ee++],M.addData(ve=oe.L,A,O);break;case"C":M.addData(ve=oe.C,we[Ee++],we[Ee++],we[Ee++],we[Ee++],we[Ee++],we[Ee++]),A=we[Ee-2],O=we[Ee-1];break;case"c":M.addData(ve=oe.C,we[Ee++]+A,we[Ee++]+O,we[Ee++]+A,we[Ee++]+O,we[Ee++]+A,we[Ee++]+O),A+=we[Ee-2],O+=we[Ee-1];break;case"S":Ve=A,He=O,an=M.len(),hn=M.data,ae===oe.C&&(Ve+=A-hn[an-4],He+=O-hn[an-3]),Ot=we[Ee++],Ht=we[Ee++],A=we[Ee++],O=we[Ee++],M.addData(ve=oe.C,Ve,He,Ot,Ht,A,O);break;case"s":Ve=A,He=O,an=M.len(),hn=M.data,ae===oe.C&&(Ve+=A-hn[an-4],He+=O-hn[an-3]),Ot=A+we[Ee++],Ht=O+we[Ee++],A+=we[Ee++],O+=we[Ee++],M.addData(ve=oe.C,Ve,He,Ot,Ht,A,O);break;case"Q":Ot=we[Ee++],Ht=we[Ee++],A=we[Ee++],O=we[Ee++],M.addData(ve=oe.Q,Ot,Ht,A,O);break;case"q":Ot=we[Ee++]+A,Ht=we[Ee++]+O,A+=we[Ee++],O+=we[Ee++],M.addData(ve=oe.Q,Ot,Ht,A,O);break;case"T":Ve=A,He=O,an=M.len(),hn=M.data,ae===oe.Q&&(Ve+=A-hn[an-4],He+=O-hn[an-3]),A=we[Ee++],O=we[Ee++],M.addData(ve=oe.Q,Ve,He,A,O);break;case"t":Ve=A,He=O,an=M.len(),hn=M.data,ae===oe.Q&&(Ve+=A-hn[an-4],He+=O-hn[an-3]),A+=we[Ee++],O+=we[Ee++],M.addData(ve=oe.Q,Ve,He,A,O);break;case"A":We=we[Ee++],$e=we[Ee++],ct=we[Ee++],St=we[Ee++],_t=we[Ee++],Y(Ot=A,Ht=O,A=we[Ee++],O=we[Ee++],St,_t,We,$e,ct,ve=oe.A,M);break;case"a":We=we[Ee++],$e=we[Ee++],ct=we[Ee++],St=we[Ee++],_t=we[Ee++],Y(Ot=A,Ht=O,A+=we[Ee++],O+=we[Ee++],St,_t,We,$e,ct,ve=oe.A,M)}}("z"===fe||"Z"===fe)&&(M.addData(ve=oe.Z),A=B,O=ce),ae=ve}return M.toStatic(),M}(E),O=(0,X.extend)({},M);return O.buildPath=function(B){var ce;W(B)?(B.setData(A.data),(ce=B.getContext())&&B.rebuildPath(ce,1)):A.rebuildPath(ce=B,1)},O.applyTransform=function(B){j(A,B),this.dirtyShape()},O}function V(E,M){return new G(J(E,M))}function P(E,M){var A=J(E,M);return function(B){function ce(ae){var oe=B.call(this,ae)||this;return oe.applyTransform=A.applyTransform,oe.buildPath=A.buildPath,oe}return(0,ue.ZT)(ce,B),ce}(G)}function T(E,M){for(var A=[],O=E.length,B=0;B<O;B++)A.push(E[B].getUpdatedPathProxy(!0));var ae=new Se.ZP(M);return ae.createPathProxy(),ae.buildPath=function(oe){if(W(oe)){oe.appendPath(A);var de=oe.getContext();de&&oe.rebuildPath(de,1)}},ae}function R(E,M){M=M||{};var A=new Se.ZP;return E.shape&&A.setShape(E.shape),A.setStyle(E.style),M.bakeTransform?j(A.path,E.getComputedTransform()):M.toLocal?A.setLocalTransform(E.getComputedTransform()):A.copyTransform(E),A.buildPath=E.buildPath,A.applyTransform=A.applyTransform,A.z=E.z,A.z2=E.z2,A.zlevel=E.zlevel,A}},7806:(Vt,Qe,H)=>{H.r(Qe),H.d(Qe,{dispose:()=>jt,disposeAll:()=>Rt,getInstance:()=>fn,init:()=>Tt,registerPainter:()=>fr,version:()=>pr});var ue=H(169),Se=H(628),le=H(908),ye=H(8221),ge=function rt(ot,st){this.target=ot,this.topTarget=st&&st.topTarget},be=function(){function rt(ot){this.handler=ot,ot.on("mousedown",this._dragStart,this),ot.on("mousemove",this._drag,this),ot.on("mouseup",this._dragEnd,this)}return rt.prototype._dragStart=function(ot){for(var st=ot.target;st&&!st.draggable;)st=st.parent||st.__hostTarget;st&&(this._draggingTarget=st,st.dragging=!0,this._x=ot.offsetX,this._y=ot.offsetY,this.handler.dispatchToElement(new ge(st,ot),"dragstart",ot.event))},rt.prototype._drag=function(ot){var st=this._draggingTarget;if(st){var je=ot.offsetX,gt=ot.offsetY,ht=je-this._x,Pt=gt-this._y;this._x=je,this._y=gt,st.drift(ht,Pt,ot),this.handler.dispatchToElement(new ge(st,ot),"drag",ot.event);var tn=this.handler.findHover(je,gt,st).target,Pn=this._dropTarget;this._dropTarget=tn,st!==tn&&(Pn&&tn!==Pn&&this.handler.dispatchToElement(new ge(Pn,ot),"dragleave",ot.event),tn&&tn!==Pn&&this.handler.dispatchToElement(new ge(tn,ot),"dragenter",ot.event))}},rt.prototype._dragEnd=function(ot){var st=this._draggingTarget;st&&(st.dragging=!1),this.handler.dispatchToElement(new ge(st,ot),"dragend",ot.event),this._dropTarget&&this.handler.dispatchToElement(new ge(this._dropTarget,ot),"drop",ot.event),this._draggingTarget=null,this._dropTarget=null},rt}();const Ce=be;var he=H(6801),j=H(1170),X=function(){function rt(){this._track=[]}return rt.prototype.recognize=function(ot,st,je){return this._doTrack(ot,st,je),this._recognize(ot)},rt.prototype.clear=function(){return this._track.length=0,this},rt.prototype._doTrack=function(ot,st,je){var gt=ot.touches;if(gt){for(var ht={points:[],touches:[],target:st,event:ot},Pt=0,tn=gt.length;Pt<tn;Pt++){var Pn=gt[Pt],Tn=j.eV(je,Pn,{});ht.points.push([Tn.zrX,Tn.zrY]),ht.touches.push(Pn)}this._track.push(ht)}},rt.prototype._recognize=function(ot){for(var st in ee)if(ee.hasOwnProperty(st)){var je=ee[st](this._track,ot);if(je)return je}},rt}();function re(rt){var ot=rt[1][0]-rt[0][0],st=rt[1][1]-rt[0][1];return Math.sqrt(ot*ot+st*st)}var ee={pinch:function(rt,ot){var st=rt.length;if(st){var je=(rt[st-1]||{}).points,gt=(rt[st-2]||{}).points||je;if(gt&&gt.length>1&&je&&je.length>1){var ht=re(je)/re(gt);!isFinite(ht)&&(ht=1),ot.pinchScale=ht;var Pt=function U(rt){return[(rt[0][0]+rt[1][0])/2,(rt[0][1]+rt[1][1])/2]}(je);return ot.pinchX=Pt[0],ot.pinchY=Pt[1],{type:"pinch",target:rt[0].target,event:ot}}}}},$=H(7021);function b(){j.sT(this.event)}var Y=function(rt){function ot(){var st=null!==rt&&rt.apply(this,arguments)||this;return st.handler=null,st}return(0,le.ZT)(ot,rt),ot.prototype.dispose=function(){},ot.prototype.setCursor=function(){},ot}(he.Z),Q=function rt(ot,st){this.x=ot,this.y=st},F=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],q=new $.Z(0,0,0,0),G=function(rt){function ot(st,je,gt,ht,Pt){var tn=rt.call(this)||this;return tn._hovered=new Q(0,0),tn.storage=st,tn.painter=je,tn.painterRoot=ht,tn._pointerSize=Pt,gt=gt||new Y,tn.proxy=null,tn.setHandlerProxy(gt),tn._draggingMgr=new Ce(tn),tn}return(0,le.ZT)(ot,rt),ot.prototype.setHandlerProxy=function(st){this.proxy&&this.proxy.dispose(),st&&(Se.each(F,function(je){st.on&&st.on(je,this[je],this)},this),st.handler=this),this.proxy=st},ot.prototype.mousemove=function(st){var je=st.zrX,gt=st.zrY,ht=V(this,je,gt),Pt=this._hovered,tn=Pt.target;tn&&!tn.__zr&&(tn=(Pt=this.findHover(Pt.x,Pt.y)).target);var Pn=this._hovered=ht?new Q(je,gt):this.findHover(je,gt),Tn=Pn.target,lr=this.proxy;lr.setCursor&&lr.setCursor(Tn?Tn.cursor:"default"),tn&&Tn!==tn&&this.dispatchToElement(Pt,"mouseout",st),this.dispatchToElement(Pn,"mousemove",st),Tn&&Tn!==tn&&this.dispatchToElement(Pn,"mouseover",st)},ot.prototype.mouseout=function(st){var je=st.zrEventControl;"only_globalout"!==je&&this.dispatchToElement(this._hovered,"mouseout",st),"no_globalout"!==je&&this.trigger("globalout",{type:"globalout",event:st})},ot.prototype.resize=function(){this._hovered=new Q(0,0)},ot.prototype.dispatch=function(st,je){var gt=this[st];gt&&gt.call(this,je)},ot.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},ot.prototype.setCursorStyle=function(st){var je=this.proxy;je.setCursor&&je.setCursor(st)},ot.prototype.dispatchToElement=function(st,je,gt){var ht=(st=st||{}).target;if(!ht||!ht.silent){for(var Pt="on"+je,tn=function K(rt,ot,st){return{type:rt,event:st,target:ot.target,topTarget:ot.topTarget,cancelBubble:!1,offsetX:st.zrX,offsetY:st.zrY,gestureEvent:st.gestureEvent,pinchX:st.pinchX,pinchY:st.pinchY,pinchScale:st.pinchScale,wheelDelta:st.zrDelta,zrByTouch:st.zrByTouch,which:st.which,stop:b}}(je,st,gt);ht&&(ht[Pt]&&(tn.cancelBubble=!!ht[Pt].call(ht,tn)),ht.trigger(je,tn),ht=ht.__hostTarget?ht.__hostTarget:ht.parent,!tn.cancelBubble););tn.cancelBubble||(this.trigger(je,tn),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(Pn){"function"==typeof Pn[Pt]&&Pn[Pt].call(Pn,tn),Pn.trigger&&Pn.trigger(je,tn)}))}},ot.prototype.findHover=function(st,je,gt){var ht=this.storage.getDisplayList(),Pt=new Q(st,je);if(J(ht,Pt,st,je,gt),this._pointerSize&&!Pt.target){for(var tn=[],Pn=this._pointerSize,Tn=Pn/2,lr=new $.Z(st-Tn,je-Tn,Pn,Pn),yi=ht.length-1;yi>=0;yi--){var cr=ht[yi];cr!==gt&&!cr.ignore&&!cr.ignoreCoarsePointer&&(!cr.parent||!cr.parent.ignoreCoarsePointer)&&(q.copy(cr.getBoundingRect()),cr.transform&&q.applyTransform(cr.transform),q.intersect(lr)&&tn.push(cr))}if(tn.length)for(var ra=Math.PI/12,Ql=2*Math.PI,Cs=0;Cs<Tn;Cs+=4)for(var Sa=0;Sa<Ql;Sa+=ra)if(J(tn,Pt,st+Cs*Math.cos(Sa),je+Cs*Math.sin(Sa),gt),Pt.target)return Pt}return Pt},ot.prototype.processGesture=function(st,je){this._gestureMgr||(this._gestureMgr=new X);var gt=this._gestureMgr;"start"===je&&gt.clear();var ht=gt.recognize(st,this.findHover(st.zrX,st.zrY,null).target,this.proxy.dom);if("end"===je&&gt.clear(),ht){var Pt=ht.type;st.gestureEvent=Pt;var tn=new Q;tn.target=ht.target,this.dispatchToElement(tn,Pt,ht.event)}},ot}(he.Z);function W(rt,ot,st){if(rt[rt.rectHover?"rectContain":"contain"](ot,st)){for(var je=rt,gt=void 0,ht=!1;je;){if(je.ignoreClip&&(ht=!0),!ht){var Pt=je.getClipPath();if(Pt&&!Pt.contain(ot,st))return!1;je.silent&&(gt=!0)}je=je.__hostTarget||je.parent}return!gt||"silent"}return!1}function J(rt,ot,st,je,gt){for(var ht=rt.length-1;ht>=0;ht--){var Pt=rt[ht],tn=void 0;if(Pt!==gt&&!Pt.ignore&&(tn=W(Pt,st,je))&&(!ot.topTarget&&(ot.topTarget=Pt),"silent"!==tn)){ot.target=Pt;break}}}function V(rt,ot,st){var je=rt.painter;return ot<0||ot>je.getWidth()||st<0||st>je.getHeight()}Se.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(rt){G.prototype[rt]=function(ot){var ht,Pt,st=ot.zrX,je=ot.zrY,gt=V(this,st,je);if(("mouseup"!==rt||!gt)&&(Pt=(ht=this.findHover(st,je)).target),"mousedown"===rt)this._downEl=Pt,this._downPoint=[ot.zrX,ot.zrY],this._upEl=Pt;else if("mouseup"===rt)this._upEl=Pt;else if("click"===rt){if(this._downEl!==this._upEl||!this._downPoint||ye.dist(this._downPoint,[ot.zrX,ot.zrY])>4)return;this._downPoint=null}this.dispatchToElement(ht,rt,ot)}});const P=G;var T=H(9995),R=H(2369),E=!1;function M(){E||(E=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function A(rt,ot){return rt.zlevel===ot.zlevel?rt.z===ot.z?rt.z2-ot.z2:rt.z-ot.z:rt.zlevel-ot.zlevel}var O=function(){function rt(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=A}return rt.prototype.traverse=function(ot,st){for(var je=0;je<this._roots.length;je++)this._roots[je].traverse(ot,st)},rt.prototype.getDisplayList=function(ot,st){st=st||!1;var je=this._displayList;return(ot||!je.length)&&this.updateDisplayList(st),je},rt.prototype.updateDisplayList=function(ot){this._displayListLen=0;for(var st=this._roots,je=this._displayList,gt=0,ht=st.length;gt<ht;gt++)this._updateAndAddDisplayable(st[gt],null,ot);je.length=this._displayListLen,(0,T.Z)(je,A)},rt.prototype._updateAndAddDisplayable=function(ot,st,je){if(!ot.ignore||je){ot.beforeUpdate(),ot.update(),ot.afterUpdate();var gt=ot.getClipPath();if(ot.ignoreClip)st=null;else if(gt){st=st?st.slice():[];for(var ht=gt,Pt=ot;ht;)ht.parent=Pt,ht.updateTransform(),st.push(ht),Pt=ht,ht=ht.getClipPath()}if(ot.childrenRef){for(var tn=ot.childrenRef(),Pn=0;Pn<tn.length;Pn++){var Tn=tn[Pn];ot.__dirty&&(Tn.__dirty|=R.YV),this._updateAndAddDisplayable(Tn,st,je)}ot.__dirty=0}else{var lr=ot;st&&st.length?lr.__clipPaths=st:lr.__clipPaths&&lr.__clipPaths.length>0&&(lr.__clipPaths=[]),isNaN(lr.z)&&(M(),lr.z=0),isNaN(lr.z2)&&(M(),lr.z2=0),isNaN(lr.zlevel)&&(M(),lr.zlevel=0),this._displayList[this._displayListLen++]=lr}var yi=ot.getDecalElement&&ot.getDecalElement();yi&&this._updateAndAddDisplayable(yi,st,je);var cr=ot.getTextGuideLine();cr&&this._updateAndAddDisplayable(cr,st,je);var ta=ot.getTextContent();ta&&this._updateAndAddDisplayable(ta,st,je)}},rt.prototype.addRoot=function(ot){ot.__zr&&ot.__zr.storage===this||this._roots.push(ot)},rt.prototype.delRoot=function(ot){if(ot instanceof Array)for(var st=0,je=ot.length;st<je;st++)this.delRoot(ot[st]);else{var gt=Se.indexOf(this._roots,ot);gt>=0&&this._roots.splice(gt,1)}},rt.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},rt.prototype.getRoots=function(){return this._roots},rt.prototype.dispose=function(){this._displayList=null,this._roots=null},rt}();const B=O;var ce=H(2036),ae=H(6062);function oe(){return(new Date).getTime()}var de=function(rt){function ot(st){var je=rt.call(this)||this;return je._running=!1,je._time=0,je._pausedTime=0,je._pauseStart=0,je._paused=!1,je.stage=(st=st||{}).stage||{},je}return(0,le.ZT)(ot,rt),ot.prototype.addClip=function(st){st.animation&&this.removeClip(st),this._head?(this._tail.next=st,st.prev=this._tail,st.next=null,this._tail=st):this._head=this._tail=st,st.animation=this},ot.prototype.addAnimator=function(st){st.animation=this;var je=st.getClip();je&&this.addClip(je)},ot.prototype.removeClip=function(st){if(st.animation){var je=st.prev,gt=st.next;je?je.next=gt:this._head=gt,gt?gt.prev=je:this._tail=je,st.next=st.prev=st.animation=null}},ot.prototype.removeAnimator=function(st){var je=st.getClip();je&&this.removeClip(je),st.animation=null},ot.prototype.update=function(st){for(var je=oe()-this._pausedTime,gt=je-this._time,ht=this._head;ht;){var Pt=ht.next;ht.step(je,gt)&&(ht.ondestroy(),this.removeClip(ht)),ht=Pt}this._time=je,st||(this.trigger("frame",gt),this.stage.update&&this.stage.update())},ot.prototype._startLoop=function(){var st=this;this._running=!0,(0,ce.Z)(function je(){st._running&&((0,ce.Z)(je),!st._paused&&st.update())})},ot.prototype.start=function(){this._running||(this._time=oe(),this._pausedTime=0,this._startLoop())},ot.prototype.stop=function(){this._running=!1},ot.prototype.pause=function(){this._paused||(this._pauseStart=oe(),this._paused=!0)},ot.prototype.resume=function(){this._paused&&(this._pausedTime+=oe()-this._pauseStart,this._paused=!1)},ot.prototype.clear=function(){for(var st=this._head;st;){var je=st.next;st.prev=st.next=st.animation=null,st=je}this._head=this._tail=null},ot.prototype.isFinished=function(){return null==this._head},ot.prototype.animate=function(st,je){je=je||{},this.start();var gt=new ae.Z(st,je.loop);return this.addAnimator(gt),gt},ot}(he.Z);const ne=de;var rt,st,fe=ue.Z.domSupported,ve=(st={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},{mouse:rt=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touch:["touchstart","touchend","touchmove"],pointer:Se.map(rt,function(gt){var ht=gt.replace("mouse","pointer");return st.hasOwnProperty(ht)?ht:gt})}),we_mouse=["mousemove","mouseup"],we_pointer=["pointermove","pointerup"],Te=!1;function Ae(rt){var ot=rt.pointerType;return"pen"===ot||"touch"===ot}function Ve(rt){rt&&(rt.zrByTouch=!0)}function We(rt,ot){for(var st=ot,je=!1;st&&9!==st.nodeType&&!(je=st.domBelongToZr||st!==ot&&st===rt.painterRoot);)st=st.parentNode;return je}var $e=function rt(ot,st){this.stopPropagation=Se.noop,this.stopImmediatePropagation=Se.noop,this.preventDefault=Se.noop,this.type=st.type,this.target=this.currentTarget=ot.dom,this.pointerType=st.pointerType,this.clientX=st.clientX,this.clientY=st.clientY},ct={mousedown:function(rt){rt=(0,j.OD)(this.dom,rt),this.__mayPointerCapture=[rt.zrX,rt.zrY],this.trigger("mousedown",rt)},mousemove:function(rt){rt=(0,j.OD)(this.dom,rt);var ot=this.__mayPointerCapture;ot&&(rt.zrX!==ot[0]||rt.zrY!==ot[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",rt)},mouseup:function(rt){rt=(0,j.OD)(this.dom,rt),this.__togglePointerCapture(!1),this.trigger("mouseup",rt)},mouseout:function(rt){We(this,(rt=(0,j.OD)(this.dom,rt)).toElement||rt.relatedTarget)||(this.__pointerCapturing&&(rt.zrEventControl="no_globalout"),this.trigger("mouseout",rt))},wheel:function(rt){Te=!0,rt=(0,j.OD)(this.dom,rt),this.trigger("mousewheel",rt)},mousewheel:function(rt){Te||(rt=(0,j.OD)(this.dom,rt),this.trigger("mousewheel",rt))},touchstart:function(rt){Ve(rt=(0,j.OD)(this.dom,rt)),this.__lastTouchMoment=new Date,this.handler.processGesture(rt,"start"),ct.mousemove.call(this,rt),ct.mousedown.call(this,rt)},touchmove:function(rt){Ve(rt=(0,j.OD)(this.dom,rt)),this.handler.processGesture(rt,"change"),ct.mousemove.call(this,rt)},touchend:function(rt){Ve(rt=(0,j.OD)(this.dom,rt)),this.handler.processGesture(rt,"end"),ct.mouseup.call(this,rt),+new Date-+this.__lastTouchMoment<300&&ct.click.call(this,rt)},pointerdown:function(rt){ct.mousedown.call(this,rt)},pointermove:function(rt){Ae(rt)||ct.mousemove.call(this,rt)},pointerup:function(rt){ct.mouseup.call(this,rt)},pointerout:function(rt){Ae(rt)||ct.mouseout.call(this,rt)}};Se.each(["click","dblclick","contextmenu"],function(rt){ct[rt]=function(ot){ot=(0,j.OD)(this.dom,ot),this.trigger(rt,ot)}});var St={pointermove:function(rt){Ae(rt)||St.mousemove.call(this,rt)},pointerup:function(rt){St.mouseup.call(this,rt)},mousemove:function(rt){this.trigger("mousemove",rt)},mouseup:function(rt){var ot=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",rt),ot&&(rt.zrEventControl="only_globalout",this.trigger("mouseout",rt))}};function Ht(rt,ot,st,je){rt.mounted[ot]=st,rt.listenerOpts[ot]=je,(0,j.Oo)(rt.domTarget,ot,st,je)}function an(rt){var ot=rt.mounted;for(var st in ot)ot.hasOwnProperty(st)&&(0,j.xg)(rt.domTarget,st,ot[st],rt.listenerOpts[st]);rt.mounted={}}var hn=function rt(ot,st){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=ot,this.domHandlers=st},Vn=function(rt){function ot(st,je){var gt=rt.call(this)||this;return gt.__pointerCapturing=!1,gt.dom=st,gt.painterRoot=je,gt._localHandlerScope=new hn(st,ct),fe&&(gt._globalHandlerScope=new hn(document,St)),function _t(rt,ot){var st=ot.domHandlers;ue.Z.pointerEventsSupported?Se.each(ve.pointer,function(je){Ht(ot,je,function(gt){st[je].call(rt,gt)})}):(ue.Z.touchEventsSupported&&Se.each(ve.touch,function(je){Ht(ot,je,function(gt){st[je].call(rt,gt),function Ee(rt){rt.touching=!0,null!=rt.touchTimer&&(clearTimeout(rt.touchTimer),rt.touchTimer=null),rt.touchTimer=setTimeout(function(){rt.touching=!1,rt.touchTimer=null},700)}(ot)})}),Se.each(ve.mouse,function(je){Ht(ot,je,function(gt){gt=(0,j.iP)(gt),ot.touching||st[je].call(rt,gt)})}))}(gt,gt._localHandlerScope),gt}return(0,le.ZT)(ot,rt),ot.prototype.dispose=function(){an(this._localHandlerScope),fe&&an(this._globalHandlerScope)},ot.prototype.setCursor=function(st){this.dom.style&&(this.dom.style.cursor=st||"default")},ot.prototype.__togglePointerCapture=function(st){if(this.__mayPointerCapture=null,fe&&+this.__pointerCapturing^+st){this.__pointerCapturing=st;var je=this._globalHandlerScope;st?function Ot(rt,ot){function st(je){Ht(ot,je,function gt(ht){ht=(0,j.iP)(ht),We(rt,ht.target)||(ht=function He(rt,ot){return(0,j.OD)(rt.dom,new $e(rt,ot),!0)}(rt,ht),ot.domHandlers[je].call(rt,ht))},{capture:!0})}ue.Z.pointerEventsSupported?Se.each(we_pointer,st):ue.Z.touchEventsSupported||Se.each(we_mouse,st)}(this,je):an(je)}},ot}(he.Z);const sr=Vn;var $n=H(312),gr=H(6704),er=H(8539),Kt={},cn={},et=function(){function rt(ot,st,je){var gt=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,je=je||{},this.dom=st,this.id=ot;var ht=new B,Pt=je.renderer||"canvas";Kt[Pt]||(Pt=Se.keys(Kt)[0]),je.useDirtyRect=je.useDirtyRect??!1;var tn=new Kt[Pt](st,ht,je,ot),Pn=je.ssr||tn.ssrOnly;this.storage=ht,this.painter=tn;var ta,Tn=ue.Z.node||ue.Z.worker||Pn?null:new sr(tn.getViewportRoot(),tn.root),lr=je.useCoarsePointer;(null==lr||"auto"===lr?ue.Z.touchEventsSupported:!!lr)&&(ta=Se.retrieve2(je.pointerSize,44)),this.handler=new P(ht,tn,Tn,tn.root,ta),this.animation=new ne({stage:{update:Pn?null:function(){return gt._flush(!0)}}}),Pn||this.animation.start()}return rt.prototype.add=function(ot){!ot||(this.storage.addRoot(ot),ot.addSelfToZr(this),this.refresh())},rt.prototype.remove=function(ot){!ot||(this.storage.delRoot(ot),ot.removeSelfFromZr(this),this.refresh())},rt.prototype.configLayer=function(ot,st){this.painter.configLayer&&this.painter.configLayer(ot,st),this.refresh()},rt.prototype.setBackgroundColor=function(ot){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(ot),this.refresh(),this._backgroundColor=ot,this._darkMode=function jn(rt){if(!rt)return!1;if("string"==typeof rt)return(0,$n.lum)(rt,1)<gr.Ak;if(rt.colorStops){for(var ot=rt.colorStops,st=0,je=ot.length,gt=0;gt<je;gt++)st+=(0,$n.lum)(ot[gt].color,1);return(st/=je)<gr.Ak}return!1}(ot)},rt.prototype.getBackgroundColor=function(){return this._backgroundColor},rt.prototype.setDarkMode=function(ot){this._darkMode=ot},rt.prototype.isDarkMode=function(){return this._darkMode},rt.prototype.refreshImmediately=function(ot){ot||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},rt.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},rt.prototype.flush=function(){this._flush(!1)},rt.prototype._flush=function(ot){var st,je=oe();this._needsRefresh&&(st=!0,this.refreshImmediately(ot)),this._needsRefreshHover&&(st=!0,this.refreshHoverImmediately());var gt=oe();st?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:gt-je})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},rt.prototype.setSleepAfterStill=function(ot){this._sleepAfterStill=ot},rt.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},rt.prototype.refreshHover=function(){this._needsRefreshHover=!0},rt.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&"canvas"===this.painter.getType()&&this.painter.refreshHover()},rt.prototype.resize=function(ot){this.painter.resize((ot=ot||{}).width,ot.height),this.handler.resize()},rt.prototype.clearAnimation=function(){this.animation.clear()},rt.prototype.getWidth=function(){return this.painter.getWidth()},rt.prototype.getHeight=function(){return this.painter.getHeight()},rt.prototype.setCursorStyle=function(ot){this.handler.setCursorStyle(ot)},rt.prototype.findHover=function(ot,st){return this.handler.findHover(ot,st)},rt.prototype.on=function(ot,st,je){return this.handler.on(ot,st,je),this},rt.prototype.off=function(ot,st){this.handler.off(ot,st)},rt.prototype.trigger=function(ot,st){this.handler.trigger(ot,st)},rt.prototype.clear=function(){for(var ot=this.storage.getRoots(),st=0;st<ot.length;st++)ot[st]instanceof er.Z&&ot[st].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},rt.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,function On(rt){delete cn[rt]}(this.id)},rt}();function Tt(rt,ot){var st=new et(Se.guid(),rt,ot);return cn[st.id]=st,st}function jt(rt){rt.dispose()}function Rt(){for(var rt in cn)cn.hasOwnProperty(rt)&&cn[rt].dispose();cn={}}function fn(rt){return cn[rt]}function fr(rt,ot){Kt[rt]=ot}var pr="5.4.0"},7447:(Vt,Qe,H)=>{function ue(e){return"function"==typeof e}function Se(e){const t=e(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const le=Se(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ye(e,n){if(e){const t=e.indexOf(n);0<=t&&e.splice(t,1)}}class ge{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(ue(r))try{r()}catch(o){n=o instanceof le?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{he(o)}catch(d){n=n??[],d instanceof le?n=[...n,...d.errors]:n.push(d)}}if(n)throw new le(n)}}add(n){var t;if(n&&n!==this)if(this.closed)he(n);else{if(n instanceof ge){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(n)}}_hasParent(n){const{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){const{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&ye(t,n)}remove(n){const{_finalizers:t}=this;t&&ye(t,n),n instanceof ge&&n._removeParent(this)}}ge.EMPTY=(()=>{const e=new ge;return e.closed=!0,e})();const be=ge.EMPTY;function Ce(e){return e instanceof ge||e&&"closed"in e&&ue(e.remove)&&ue(e.add)&&ue(e.unsubscribe)}function he(e){ue(e)?e():e.unsubscribe()}const j={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},X={setTimeout(e,n,...t){const{delegate:r}=X;return r?.setTimeout?r.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){const{delegate:n}=X;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function re(e){X.setTimeout(()=>{const{onUnhandledError:n}=j;if(!n)throw e;n(e)})}function U(){}const ee=K("C",void 0,void 0);function K(e,n,t){return{kind:e,value:n,error:t}}let b=null;function Y(e){if(j.useDeprecatedSynchronousErrorHandling){const n=!b;if(n&&(b={errorThrown:!1,error:null}),e(),n){const{errorThrown:t,error:r}=b;if(b=null,t)throw r}}else e()}class F extends ge{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,Ce(n)&&n.add(this)):this.destination=R}static create(n,t,r){return new J(n,t,r)}next(n){this.isStopped?T(function ie(e){return K("N",e,void 0)}(n),this):this._next(n)}error(n){this.isStopped?T(function $(e){return K("E",void 0,e)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?T(ee,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const q=Function.prototype.bind;function G(e,n){return q.call(e,n)}class W{constructor(n){this.partialObserver=n}next(n){const{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(r){V(r)}}error(n){const{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(r){V(r)}else V(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){V(t)}}}class J extends F{constructor(n,t,r){let i;if(super(),ue(n)||!n)i={next:n??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&j.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=()=>this.unsubscribe(),i={next:n.next&&G(n.next,o),error:n.error&&G(n.error,o),complete:n.complete&&G(n.complete,o)}):i=n}this.destination=new W(i)}}function V(e){j.useDeprecatedSynchronousErrorHandling?function Q(e){j.useDeprecatedSynchronousErrorHandling&&b&&(b.errorThrown=!0,b.error=e)}(e):re(e)}function T(e,n){const{onStoppedNotification:t}=j;t&&X.setTimeout(()=>t(e,n))}const R={closed:!0,next:U,error:function P(e){throw e},complete:U},E="function"==typeof Symbol&&Symbol.observable||"@@observable";function M(e){return e}function O(e){return 0===e.length?M:1===e.length?e[0]:function(t){return e.reduce((r,i)=>i(r),t)}}let B=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new e;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function oe(e){return e&&e instanceof F||function ae(e){return e&&ue(e.next)&&ue(e.error)&&ue(e.complete)}(e)&&Ce(e)}(t)?t:new J(t,r,i);return Y(()=>{const{operator:d,source:f}=this;o.add(d?d.call(o,f):f?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=ce(r))((i,o)=>{const d=new J({next:f=>{try{t(f)}catch(g){o(g),d.unsubscribe()}},error:o,complete:i});this.subscribe(d)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[E](){return this}pipe(...t){return O(t)(this)}toPromise(t){return new(t=ce(t))((r,i)=>{let o;this.subscribe(d=>o=d,d=>i(d),()=>r(o))})}}return e.create=n=>new e(n),e})();function ce(e){var n;return null!==(n=e??j.Promise)&&void 0!==n?n:Promise}const de=Se(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ne=(()=>{class e extends B{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new xe(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new de}next(t){Y(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Y(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Y(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?be:(this.currentObservers=null,o.push(t),new ge(()=>{this.currentObservers=null,ye(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new B;return t.source=this,t}}return e.create=(n,t)=>new xe(n,t),e})();class xe extends ne{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,n)}error(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,n)}complete(){var n,t;null===(t=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===t||t.call(n)}_subscribe(n){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(n))&&void 0!==r?r:be}}function fe(e){return ue(e?.lift)}function ve(e){return n=>{if(fe(n))return n.lift(function(t){try{return e(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function we(e,n,t,r,i){return new Te(e,n,t,r,i)}class Te extends F{constructor(n,t,r,i,o,d){super(n),this.onFinalize=o,this.shouldUnsubscribe=d,this._next=t?function(f){try{t(f)}catch(g){n.error(g)}}:super._next,this._error=i?function(f){try{i(f)}catch(g){n.error(g)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(f){n.error(f)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function Ae(e,n){return ve((t,r)=>{let i=0;t.subscribe(we(r,o=>{r.next(e.call(n,o,i++))}))})}function er(e){return this instanceof er?(this.v=e,this):new er(e)}function Kt(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(e,n||[]),o=[];return i={},d("next"),d("throw"),d("return"),i[Symbol.asyncIterator]=function(){return this},i;function d(k){r[k]&&(i[k]=function(z){return new Promise(function(te,pe){o.push([k,z,te,pe])>1||f(k,z)})})}function f(k,z){try{!function g(k){k.value instanceof er?Promise.resolve(k.value.v).then(_,C):S(o[0][2],k)}(r[k](z))}catch(te){S(o[0][3],te)}}function _(k){f("next",k)}function C(k){f("throw",k)}function S(k,z){k(z),o.shift(),o.length&&f(o[0][0],o[0][1])}}function On(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function hn(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=e[o]&&function(d){return new Promise(function(f,g){!function i(o,d,f,g){Promise.resolve(g).then(function(_){o({value:_,done:f})},d)}(f,g,(d=e[o](d)).done,d.value)})}}}const pr=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function rt(e){return ue(e?.then)}function ot(e){return ue(e[E])}function st(e){return Symbol.asyncIterator&&ue(e?.[Symbol.asyncIterator])}function je(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const ht=function gt(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Pt(e){return ue(e?.[ht])}function tn(e){return Kt(this,arguments,function*(){const t=e.getReader();try{for(;;){const{value:r,done:i}=yield er(t.read());if(i)return yield er(void 0);yield yield er(r)}}finally{t.releaseLock()}})}function Pn(e){return ue(e?.getReader)}function Tn(e){if(e instanceof B)return e;if(null!=e){if(ot(e))return function lr(e){return new B(n=>{const t=e[E]();if(ue(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(pr(e))return function yi(e){return new B(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}(e);if(rt(e))return function cr(e){return new B(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,re)})}(e);if(st(e))return ra(e);if(Pt(e))return function ta(e){return new B(n=>{for(const t of e)if(n.next(t),n.closed)return;n.complete()})}(e);if(Pn(e))return function Ql(e){return ra(tn(e))}(e)}throw je(e)}function ra(e){return new B(n=>{(function Cs(e,n){var t,r,i,o;return function _t(e,n,t,r){return new(t||(t=Promise))(function(o,d){function f(C){try{_(r.next(C))}catch(S){d(S)}}function g(C){try{_(r.throw(C))}catch(S){d(S)}}function _(C){C.done?o(C.value):function i(o){return o instanceof t?o:new t(function(d){d(o)})}(C.value).then(f,g)}_((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function*(){try{for(t=On(e);!(r=yield t.next()).done;)if(n.next(r.value),n.closed)return}catch(d){i={error:d}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}n.complete()})})(e,n).catch(t=>n.error(t))})}function Sa(e,n,t,r=0,i=!1){const o=n.schedule(function(){t(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function ua(e,n,t=1/0){return ue(n)?ua((r,i)=>Ae((o,d)=>n(r,o,i,d))(Tn(e(r,i))),t):("number"==typeof n&&(t=n),ve((r,i)=>function Ja(e,n,t,r,i,o,d,f){const g=[];let _=0,C=0,S=!1;const k=()=>{S&&!g.length&&!_&&n.complete()},z=pe=>_<r?te(pe):g.push(pe),te=pe=>{o&&n.next(pe),_++;let Me=!1;Tn(t(pe,C++)).subscribe(we(n,Re=>{i?.(Re),o?z(Re):n.next(Re)},()=>{Me=!0},void 0,()=>{if(Me)try{for(_--;g.length&&_<r;){const Re=g.shift();d?Sa(n,d,()=>te(Re)):te(Re)}k()}catch(Re){n.error(Re)}}))};return e.subscribe(we(n,z,()=>{S=!0,k()})),()=>{f?.()}}(r,i,e,t)))}function $s(e=1/0){return ua(M,e)}const La=new B(e=>e.complete());function hu(e){return e&&ue(e.schedule)}function Ff(e){return e[e.length-1]}function Bc(e){return ue(Ff(e))?e.pop():void 0}function id(e){return hu(Ff(e))?e.pop():void 0}function fv(e,n=0){return ve((t,r)=>{t.subscribe(we(r,i=>Sa(r,e,()=>r.next(i),n),()=>Sa(r,e,()=>r.complete(),n),i=>Sa(r,e,()=>r.error(i),n)))})}function pv(e,n=0){return ve((t,r)=>{r.add(e.schedule(()=>t.subscribe(r),n))})}function Ks(e,n){if(!e)throw new Error("Iterable cannot be null");return new B(t=>{Sa(t,n,()=>{const r=e[Symbol.asyncIterator]();Sa(t,n,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Rn(e,n){return n?function si(e,n){if(null!=e){if(ot(e))return function gv(e,n){return Tn(e).pipe(pv(n),fv(n))}(e,n);if(pr(e))return function n0(e,n){return new B(t=>{let r=0;return n.schedule(function(){r===e.length?t.complete():(t.next(e[r++]),t.closed||this.schedule())})})}(e,n);if(rt(e))return function t0(e,n){return Tn(e).pipe(pv(n),fv(n))}(e,n);if(st(e))return Ks(e,n);if(Pt(e))return function At(e,n){return new B(t=>{let r;return Sa(t,n,()=>{r=e[ht](),Sa(t,n,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(d){return void t.error(d)}o?t.complete():t.next(i)},0,!0)}),()=>ue(r?.return)&&r.return()})}(e,n);if(Pn(e))return function Xi(e,n){return Ks(tn(e),n)}(e,n)}throw je(e)}(e,n):Tn(e)}function Oa(...e){const n=id(e),t=function hv(e,n){return"number"==typeof Ff(e)?e.pop():n}(e,1/0),r=e;return r.length?1===r.length?Tn(r[0]):$s(t)(Rn(r,n)):La}function Bf(e={}){const{connector:n=(()=>new ne),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return o=>{let d,f,g,_=0,C=!1,S=!1;const k=()=>{f?.unsubscribe(),f=void 0},z=()=>{k(),d=g=void 0,C=S=!1},te=()=>{const pe=d;z(),pe?.unsubscribe()};return ve((pe,Me)=>{_++,!S&&!C&&k();const Re=g=g??n();Me.add(()=>{_--,0===_&&!S&&!C&&(f=Sn(te,i))}),Re.subscribe(Me),!d&&_>0&&(d=new J({next:Fe=>Re.next(Fe),error:Fe=>{S=!0,k(),f=Sn(z,t,Fe),Re.error(Fe)},complete:()=>{C=!0,k(),f=Sn(z,r),Re.complete()}}),Tn(pe).subscribe(d))})(o)}}function Sn(e,n,...t){if(!0===n)return void e();if(!1===n)return;const r=new J({next:()=>{r.unsubscribe(),e()}});return n(...t).subscribe(r)}function _n(e){for(let n in e)if(e[n]===_n)return n;throw Error("Could not find renamed property on target object.")}function Tr(e,n){for(const t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function Wt(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Wt).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const t=n.indexOf("\n");return-1===t?n:n.substring(0,t)}function ad(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const El=_n({__forward_ref__:_n});function zr(e){return e.__forward_ref__=zr,e.toString=function(){return Wt(this())},e}function qt(e){return Vf(e)?e():e}function Vf(e){return"function"==typeof e&&e.hasOwnProperty(El)&&e.__forward_ref__===zr}class Jt extends Error{constructor(n,t){super(function ql(e,n){return`NG0${Math.abs(e)}${n?": "+n.trim():""}`}(n,t)),this.code=n}}function Pr(e){return"string"==typeof e?e:null==e?"":String(e)}function sd(e,n){throw new Jt(-201,!1)}function ts(e,n){null==e&&function Ii(e,n,t,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${t} ${r} ${n} <=Actual]`))}(n,e,null,"!=")}function yn(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function ur(e){return{providers:e.providers||[],imports:e.imports||[]}}function pu(e){return Rs(e,gu)||Rs(e,za)}function Rs(e,n){return e.hasOwnProperty(n)?e[n]:null}function Gf(e){return e&&(e.hasOwnProperty(vh)||e.hasOwnProperty(Vo))?e[vh]:null}const gu=_n({\u0275prov:_n}),vh=_n({\u0275inj:_n}),za=_n({ngInjectableDef:_n}),Vo=_n({ngInjectorDef:_n});var nr=(()=>((nr=nr||{})[nr.Default=0]="Default",nr[nr.Host=1]="Host",nr[nr.Self=2]="Self",nr[nr.SkipSelf=4]="SkipSelf",nr[nr.Optional=8]="Optional",nr))();let mh;function ns(e){const n=mh;return mh=e,n}function mv(e,n,t){const r=pu(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&nr.Optional?null:void 0!==n?n:void sd(Wt(e))}function Il(e){return{toString:e}.toString()}var rs=(()=>((rs=rs||{})[rs.OnPush=0]="OnPush",rs[rs.Default=1]="Default",rs))(),zo=(()=>{return(e=zo||(zo={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",zo;var e})();const Ti=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),co={},ni=[],vu=_n({\u0275cmp:_n}),ld=_n({\u0275dir:_n}),nc=_n({\u0275pipe:_n}),mu=_n({\u0275mod:_n}),Ho=_n({\u0275fac:_n}),Vc=_n({__NG_ELEMENT_ID__:_n});let _u=0;function Zn(e){return Il(()=>{const t=!0===e.standalone,r={},i={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===rs.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&e.dependencies||null,getStandaloneInjector:null,selectors:e.selectors||ni,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||zo.Emulated,id:"c"+_u++,styles:e.styles||ni,_:null,setInput:null,schemas:e.schemas||null,tView:null},o=e.dependencies,d=e.features;return i.inputs=rc(e.inputs,r),i.outputs=rc(e.outputs),d&&d.forEach(f=>f(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(Zf).filter(Uo):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(ga).filter(Uo):null,i})}function Zf(e){return Ei(e)||pa(e)}function Uo(e){return null!==e}function tr(e){return Il(()=>({type:e.type,bootstrap:e.bootstrap||ni,declarations:e.declarations||ni,imports:e.imports||ni,exports:e.exports||ni,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function rc(e,n){if(null==e)return co;const t={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),t[i]=r,n&&(n[i]=o)}return t}const Dn=Zn;function Ei(e){return e[vu]||null}function pa(e){return e[ld]||null}function ga(e){return e[nc]||null}function Mo(e,n){const t=e[mu]||null;if(!t&&!0===n)throw new Error(`Type ${Wt(e)} does not have '\u0275mod' property.`);return t}function na(e){return Array.isArray(e)&&"object"==typeof e[1]}function uo(e){return Array.isArray(e)&&!0===e[1]}function Ne(e){return 0!=(8&e.flags)}function Ge(e){return 2==(2&e.flags)}function Le(e){return 1==(1&e.flags)}function ze(e){return null!==e.template}function Ze(e){return 0!=(256&e[2])}function Eo(e,n){return e.hasOwnProperty(Ho)?e[Ho]:null}class Xf{constructor(n,t,r){this.previousValue=n,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Ki(){return os}function os(e){return e.type.prototype.ngOnChanges&&(e.setInput=ma),va}function va(){const e=wv(this),n=e?.current;if(n){const t=e.previous;if(t===co)e.previous=n;else for(let r in n)t[r]=n[r];e.current=null,this.ngOnChanges(n)}}function ma(e,n,t,r){const i=wv(e)||function $f(e,n){return e[Cv]=n}(e,{previous:co,current:null}),o=i.current||(i.current={}),d=i.previous,f=this.declaredInputs[t],g=d[f];o[f]=new Xf(g&&g.currentValue,n,d===co),e[r]=n}Ki.ngInherit=!0;const Cv="__ngSimpleChanges__";function wv(e){return e[Cv]||null}function Ga(e){for(;Array.isArray(e);)e=e[0];return e}function qf(e,n){return Ga(n[e])}function ki(e,n){return Ga(n[e.index])}function xi(e,n){return e.data[n]}function ss(e,n){const t=n[e];return na(t)?t:t[0]}function Sv(e){return 64==(64&e[2])}function fo(e,n){return null==n?null:e[n]}function Ew(e){e[18]=0}function h0(e,n){e[5]+=n;let t=e,r=e[3];for(;null!==r&&(1===n&&1===t[5]||-1===n&&0===t[5]);)r[5]+=n,t=r,r=r[3]}const Or={lFrame:Rw(null),bindingsEnabled:!0};function g0(){return Or.bindingsEnabled}function un(){return Or.lFrame.lView}function vi(){return Or.lFrame.tView}function Kr(e){return Or.lFrame.contextLView=e,e[8]}function Qr(e){return Or.lFrame.contextLView=null,e}function Ai(){let e=ka();for(;null!==e&&64===e.type;)e=e.parent;return e}function ka(){return Or.lFrame.currentTNode}function Wo(e,n){const t=Or.lFrame;t.currentTNode=e,t.isParent=n}function Mv(){return Or.lFrame.isParent}function m0(){Or.lFrame.isParent=!1}function jo(){const e=Or.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function bh(){return Or.lFrame.bindingIndex++}function Ao(e){const n=Or.lFrame,t=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,t}function OP(e,n){const t=Or.lFrame;t.bindingIndex=t.bindingRootIndex=e,y0(n)}function y0(e){Or.lFrame.currentDirectiveIndex=e}function Jf(e){const n=Or.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}function Pw(){return Or.lFrame.currentQueryIndex}function ep(e){Or.lFrame.currentQueryIndex=e}function NP(e){const n=e[1];return 2===n.type?n.declTNode:1===n.type?e[6]:null}function Tv(e,n,t){if(t&nr.SkipSelf){let i=n,o=e;for(;!(i=i.parent,null!==i||t&nr.Host||(i=NP(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;n=i,e=o}const r=Or.lFrame=b0();return r.currentTNode=n,r.lView=e,!0}function dd(e){const n=b0(),t=e[1];Or.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function b0(){const e=Or.lFrame,n=null===e?null:e.child;return null===n?Rw(e):n}function Rw(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function Cu(){const e=Or.lFrame;return Or.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Ev=Cu;function Av(){const e=Cu();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function ls(){return Or.lFrame.selectedIndex}function Wc(e){Or.lFrame.selectedIndex=e}function Ta(){const e=Or.lFrame;return xi(e.tView,e.selectedIndex)}function xh(){Or.lFrame.currentNamespace="svg"}function Iv(e,n){for(let t=n.directiveStart,r=n.directiveEnd;t<r;t++){const o=e.data[t].type.prototype,{ngAfterContentInit:d,ngAfterContentChecked:f,ngAfterViewInit:g,ngAfterViewChecked:_,ngOnDestroy:C}=o;d&&(e.contentHooks||(e.contentHooks=[])).push(-t,d),f&&((e.contentHooks||(e.contentHooks=[])).push(t,f),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(t,f)),g&&(e.viewHooks||(e.viewHooks=[])).push(-t,g),_&&((e.viewHooks||(e.viewHooks=[])).push(t,_),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(t,_)),null!=C&&(e.destroyHooks||(e.destroyHooks=[])).push(t,C)}}function Pv(e,n,t){Nw(e,n,3,t)}function tp(e,n,t,r){(3&e[2])===t&&Nw(e,n,t,r)}function Rv(e,n){let t=e[2];(3&t)===n&&(t&=2047,t+=1,e[2]=t)}function Nw(e,n,t,r){const o=r??-1,d=n.length-1;let f=0;for(let g=void 0!==r?65535&e[18]:0;g<d;g++)if("number"==typeof n[g+1]){if(f=n[g],null!=r&&f>=r)break}else n[g]<0&&(e[18]+=65536),(f<o||-1==o)&&(nl(e,t,n,g),e[18]=(4294901760&e[18])+g+2),g++}function nl(e,n,t,r){const i=t[r]<0,o=t[r+1],f=e[i?-t[r]:t[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===n){e[2]+=2048;try{o.call(f)}finally{}}}else try{o.call(f)}finally{}}class np{constructor(n,t,r){this.factory=n,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function ip(e,n,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],d=t[r++],f=t[r++];e.setAttribute(n,d,f,o)}else{const o=i,d=t[++r];Bw(o)?e.setProperty(n,o,d):e.setAttribute(n,o,d),r++}}return r}function Fw(e){return 3===e||4===e||6===e}function Bw(e){return 64===e.charCodeAt(0)}function Ov(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let t=-1;for(let r=0;r<n.length;r++){const i=n[r];"number"==typeof i?t=i:0===t||Vw(e,t,i,null,-1===t||2===t?n[++r]:null)}}return e}function Vw(e,n,t,r,i){let o=0,d=e.length;if(-1===n)d=-1;else for(;o<e.length;){const f=e[o++];if("number"==typeof f){if(f===n){d=-1;break}if(f>n){d=o-1;break}}}for(;o<e.length;){const f=e[o];if("number"==typeof f)break;if(f===t){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==d&&(e.splice(d,0,n),o=d+1),e.splice(o++,0,t),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}function zw(e){return-1!==e}function wh(e){return 32767&e}function Sh(e,n){let t=function GP(e){return e>>16}(e),r=n;for(;t>0;)r=r[15],t--;return r}let x0=!0;function ap(e){const n=x0;return x0=e,n}let WP=0;const cc={};function fd(e,n){const t=sp(e,n);if(-1!==t)return t;const r=n[1];r.firstCreatePass&&(e.injectorIndex=n.length,w0(r.data,e),w0(n,null),w0(r.blueprint,null));const i=lp(e,n),o=e.injectorIndex;if(zw(i)){const d=wh(i),f=Sh(i,n),g=f[1].data;for(let _=0;_<8;_++)n[o+_]=f[d+_]|g[d+_]}return n[o+8]=i,o}function w0(e,n){e.push(0,0,0,0,0,0,0,0,n)}function sp(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function lp(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let t=0,r=null,i=n;for(;null!==i;){if(r=D0(i),null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function pd(e,n,t){!function Hw(e,n,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Vc)&&(r=t[Vc]),null==r&&(r=t[Vc]=WP++);const i=255&r;n.data[e+(i>>5)]|=1<<i}(e,n,t)}function kv(e,n,t){if(t&nr.Optional||void 0!==e)return e;sd()}function Nv(e,n,t,r){if(t&nr.Optional&&void 0===r&&(r=null),0==(t&(nr.Self|nr.Host))){const i=e[9],o=ns(void 0);try{return i?i.get(n,r,t&nr.Optional):mv(n,r,t&nr.Optional)}finally{ns(o)}}return kv(r,0,t)}function Uw(e,n,t,r=nr.Default,i){if(null!==e){if(1024&n[2]){const d=function Ww(e,n,t,r,i){let o=e,d=n;for(;null!==o&&null!==d&&1024&d[2]&&!(256&d[2]);){const f=up(o,d,t,r|nr.Self,cc);if(f!==cc)return f;let g=o.parent;if(!g){const _=d[21];if(_){const C=_.get(t,cc,r);if(C!==cc)return C}g=D0(d),d=d[15]}o=g}return i}(e,n,t,r,cc);if(d!==cc)return d}const o=up(e,n,t,r,cc);if(o!==cc)return o}return Nv(n,t,r,i)}function up(e,n,t,r,i){const o=function Gw(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(Vc)?e[Vc]:void 0;return"number"==typeof n?n>=0?255&n:Bv:n}(t);if("function"==typeof o){if(!Tv(n,e,r))return r&nr.Host?kv(i,0,r):Nv(n,t,r,i);try{const d=o(r);if(null!=d||r&nr.Optional)return d;sd()}finally{Ev()}}else if("number"==typeof o){let d=null,f=sp(e,n),g=-1,_=r&nr.Host?n[16][6]:null;for((-1===f||r&nr.SkipSelf)&&(g=-1===f?lp(e,n):n[f+8],-1!==g&&hp(r,!1)?(d=n[1],f=wh(g),n=Sh(g,n)):f=-1);-1!==f;){const C=n[1];if(Fv(o,f,C.data)){const S=jP(f,n,t,d,r,_);if(S!==cc)return S}g=n[f+8],-1!==g&&hp(r,n[1].data[f+8]===_)&&Fv(o,f,n)?(d=C,f=wh(g),n=Sh(g,n)):f=-1}}return i}function jP(e,n,t,r,i,o){const d=n[1],f=d.data[e+8],C=gd(f,d,t,null==r?Ge(f)&&x0:r!=d&&0!=(3&f.type),i&nr.Host&&o===f);return null!==C?dp(n,d,C,f):cc}function gd(e,n,t,r,i){const o=e.providerIndexes,d=n.data,f=1048575&o,g=e.directiveStart,C=o>>20,k=i?f+C:e.directiveEnd;for(let z=r?f:f+C;z<k;z++){const te=d[z];if(z<g&&t===te||z>=g&&te.type===t)return z}if(i){const z=d[g];if(z&&ze(z)&&z.type===t)return g}return null}function dp(e,n,t,r){let i=e[t];const o=n.data;if(function da(e){return e instanceof np}(i)){const d=i;d.resolving&&function r0(e,n){const t=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new Jt(-200,`Circular dependency in DI detected for ${e}${t}`)}(function bi(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Pr(e)}(o[t]));const f=ap(d.canSeeViewProviders);d.resolving=!0;const g=d.injectImpl?ns(d.injectImpl):null;Tv(e,r,nr.Default);try{i=e[t]=d.factory(void 0,o,e,r),n.firstCreatePass&&t>=r.directiveStart&&function kw(e,n,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=n.type.prototype;if(r){const d=os(n);(t.preOrderHooks||(t.preOrderHooks=[])).push(e,d),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e,d)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-e,i),o&&((t.preOrderHooks||(t.preOrderHooks=[])).push(e,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e,o))}(t,o[t],n)}finally{null!==g&&ns(g),ap(f),d.resolving=!1,Ev()}}return i}function Fv(e,n,t){return!!(t[n+(e>>5)]&1<<e)}function hp(e,n){return!(e&nr.Self||e&nr.Host&&n)}class vd{constructor(n,t){this._tNode=n,this._lView=t}get(n,t,r){return Uw(this._tNode,this._lView,n,r,t)}}function Bv(){return new vd(Ai(),un())}function Gi(e){return Il(()=>{const n=e.prototype.constructor,t=n[Ho]||S0(n),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const o=i[Ho]||S0(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function S0(e){return Vf(e)?()=>{const n=S0(qt(e));return n&&n()}:Eo(e)}function D0(e){const n=e[1],t=n.type;return 2===t?n.declTNode:1===t?e[6]:null}function Ds(e){return function cp(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const t=e.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const o=t[i];if(Fw(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(o===n)return t[i+1];i+=2}}}return null}(Ai(),e)}const md="__parameters__";function _d(e,n,t){return Il(()=>{const r=function M0(e){return function(...t){if(e){const r=e(...t);for(const i in r)this[i]=r[i]}}}(n);function i(...o){if(this instanceof i)return r.apply(this,o),this;const d=new i(...o);return f.annotation=d,f;function f(g,_,C){const S=g.hasOwnProperty(md)?g[md]:Object.defineProperty(g,md,{value:[]})[md];for(;S.length<=C;)S.push(null);return(S[C]=S[C]||[]).push(d),g}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class on{constructor(n,t){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=yn({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ms(e,n){void 0===n&&(n=e);for(let t=0;t<e.length;t++){let r=e[t];Array.isArray(r)?(n===e&&(n=e.slice(0,t)),Ms(r,n)):n!==e&&n.push(r)}return n}function cs(e,n){e.forEach(t=>Array.isArray(t)?cs(t,n):n(t))}function Su(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function jc(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function gp(e,n){const t=[];for(let r=0;r<e;r++)t.push(n);return t}function ks(e,n,t){let r=Ts(e,n);return r>=0?e[1|r]=t:(r=~r,function qP(e,n,t,r){let i=e.length;if(i==n)e.push(t,r);else if(1===i)e.push(r,e[0]),e[0]=t;else{for(i--,e.push(e[i-1],e[i]);i>n;)e[i]=e[i-2],i--;e[n]=t,e[n+1]=r}}(e,r,n,t)),r}function yd(e,n){const t=Ts(e,n);if(t>=0)return e[1|t]}function Ts(e,n){return function Du(e,n,t){let r=0,i=e.length>>t;for(;i!==r;){const o=r+(i-r>>1),d=e[o<<t];if(n===d)return o<<t;d>n?i=o:r=o+1}return~(i<<t)}(e,n,1)}const Dh={},Uv="__NG_DI_FLAG__",vp="ngTempTokenPath",Qw=/\n/gm,Jw="__source";let mp;function Mh(e){const n=mp;return mp=e,n}function r2(e,n=nr.Default){if(void 0===mp)throw new Jt(-203,!1);return null===mp?mv(e,void 0,n):mp.get(e,n&nr.Optional?null:void 0,n)}function Lt(e,n=nr.Default){return(function Wf(){return mh}()||r2)(qt(e),n)}function oa(e,n=nr.Default){return"number"!=typeof n&&(n=0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)),Lt(e,n)}function Gv(e){const n=[];for(let t=0;t<e.length;t++){const r=qt(e[t]);if(Array.isArray(r)){if(0===r.length)throw new Jt(900,!1);let i,o=nr.Default;for(let d=0;d<r.length;d++){const f=r[d],g=tS(f);"number"==typeof g?-1===g?i=f.token:o|=g:i=f}n.push(Lt(i,o))}else n.push(Lt(r))}return n}function _p(e,n){return e[Uv]=n,e.prototype[Uv]=n,e}function tS(e){return e[Uv]}const bp=_p(_d("Inject",e=>({token:e})),-1),il=_p(_d("Optional"),8),uc=_p(_d("SkipSelf"),4);let Cp,Zv;function Zc(e){return function k0(){if(void 0===Zv&&(Zv=null,Ti.trustedTypes))try{Zv=Ti.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Zv}()?.createHTML(e)||e}class Mu{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class B0 extends Mu{getTypeName(){return"HTML"}}class p2 extends Mu{getTypeName(){return"Style"}}class dS extends Mu{getTypeName(){return"Script"}}class g2 extends Mu{getTypeName(){return"URL"}}class v2 extends Mu{getTypeName(){return"ResourceURL"}}function Ns(e){return e instanceof Mu?e.changingThisBreaksApplicationSecurity:e}function al(e,n){const t=function Sp(e){return e instanceof Mu&&e.getTypeName()||null}(e);if(null!=t&&t!==n){if("ResourceURL"===t&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===n}class Dp{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const t=(new window.DOMParser).parseFromString(Zc(n),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(n):(t.removeChild(t.firstChild),t)}catch{return null}}}class y2{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const r=this.inertDocument.createElement("body");t.appendChild(r)}}getInertBodyElement(n){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Zc(n),t;const r=this.inertDocument.createElement("body");return r.innerHTML=Zc(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(n){const t=n.attributes;for(let i=t.length-1;0<i;i--){const d=t.item(i).name;("xmlns:ns1"===d||0===d.indexOf("ns1:"))&&n.removeAttribute(d)}let r=n.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const x2=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function $v(e){return(e=String(e)).match(x2)?e:"unsafe:"+e}function Yc(e){const n={};for(const t of e.split(","))n[t]=!0;return n}function Eh(...e){const n={};for(const t of e)for(const r in t)t.hasOwnProperty(r)&&(n[r]=!0);return n}const pS=Yc("area,br,col,hr,img,wbr"),Kv=Yc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),z0=Yc("rp,rt"),H0=Eh(pS,Eh(Kv,Yc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Eh(z0,Yc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Eh(z0,Kv)),dc=Yc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Qv=Eh(dc,Yc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Yc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),S2=Yc("script,style,template");class D2{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let t=n.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(n){const t=n.nodeName.toLowerCase();if(!H0.hasOwnProperty(t))return this.sanitizedSomething=!0,!S2.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=n.attributes;for(let i=0;i<r.length;i++){const o=r.item(i),d=o.name,f=d.toLowerCase();if(!Qv.hasOwnProperty(f)){this.sanitizedSomething=!0;continue}let g=o.value;dc[f]&&(g=$v(g)),this.buf.push(" ",d,'="',gS(g),'"')}return this.buf.push(">"),!0}endElement(n){const t=n.nodeName.toLowerCase();H0.hasOwnProperty(t)&&!pS.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(n){this.buf.push(gS(n))}checkClobberedElement(n,t){if(t&&(n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return t}}const M2=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,T2=/([^\#-~ |!])/g;function gS(e){return e.replace(/&/g,"&amp;").replace(M2,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(T2,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let qv;function U0(e,n){let t=null;try{qv=qv||function fS(e){const n=new y2(e);return function b2(){try{return!!(new window.DOMParser).parseFromString(Zc(""),"text/html")}catch{return!1}}()?new Dp(n):n}(e);let r=n?String(n):"";t=qv.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=qv.getInertBodyElement(r)}while(r!==o);return Zc((new D2).sanitizeChildren(Mp(t)||t))}finally{if(t){const r=Mp(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function Mp(e){return"content"in e&&function vS(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Ri=(()=>((Ri=Ri||{})[Ri.NONE=0]="NONE",Ri[Ri.HTML=1]="HTML",Ri[Ri.STYLE=2]="STYLE",Ri[Ri.SCRIPT=3]="SCRIPT",Ri[Ri.URL=4]="URL",Ri[Ri.RESOURCE_URL=5]="RESOURCE_URL",Ri))();function Jv(e){const n=function Tp(){const e=un();return e&&e[12]}();return n?n.sanitize(Ri.URL,e)||"":al(e,"URL")?Ns(e):$v(Pr(e))}const G0=new on("ENVIRONMENT_INITIALIZER"),Ah=new on("INJECTOR",-1),xS=new on("INJECTOR_DEF_TYPES");class Ep{get(n,t=Dh){if(t===Dh){const r=new Error(`NullInjectorError: No provider for ${Wt(n)}!`);throw r.name="NullInjectorError",r}return t}}function W0(...e){return{\u0275providers:CS(0,e)}}function CS(e,...n){const t=[],r=new Set;let i;return cs(n,o=>{const d=o;Ap(d,t,[],r)&&(i||(i=[]),i.push(d))}),void 0!==i&&wS(i,t),t}function wS(e,n){for(let t=0;t<e.length;t++){const{providers:i}=e[t];cs(i,o=>{n.push(o)})}}function Ap(e,n,t,r){if(!(e=qt(e)))return!1;let i=null,o=Gf(e);const d=!o&&Ei(e);if(o||d){if(d&&!d.standalone)return!1;i=e}else{const g=e.ngModule;if(o=Gf(g),!o)return!1;i=g}const f=r.has(i);if(d){if(f)return!1;if(r.add(i),d.dependencies){const g="function"==typeof d.dependencies?d.dependencies():d.dependencies;for(const _ of g)Ap(_,n,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!f){let _;r.add(i);try{cs(o.imports,C=>{Ap(C,n,t,r)&&(_||(_=[]),_.push(C))})}finally{}void 0!==_&&wS(_,n)}if(!f){const _=Eo(i)||(()=>new i);n.push({provide:i,useFactory:_,deps:ni},{provide:xS,useValue:i,multi:!0},{provide:G0,useValue:()=>Lt(i),multi:!0})}const g=o.providers;null==g||f||cs(g,C=>{n.push(C)})}}return i!==e&&void 0!==e.providers}const SS=_n({provide:String,useValue:_n});function wd(e){return null!==e&&"object"==typeof e&&SS in e}function Xc(e){return"function"==typeof e}const nm=new on("Set Injector scope."),rm={},im={};let no;function am(){return void 0===no&&(no=new Ep),no}class $c{}class DS extends $c{constructor(n,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ph(n,d=>this.processProvider(d)),this.records.set(Ah,Eu(void 0,this)),i.has("environment")&&this.records.set($c,Eu(void 0,this));const o=this.records.get(nm);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(xS.multi,ni,nr.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();for(const n of this._onDestroyHooks)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(n){this._onDestroyHooks.push(n)}runInContext(n){this.assertNotDestroyed();const t=Mh(this),r=ns(void 0);try{return n()}finally{Mh(t),ns(r)}}get(n,t=Dh,r=nr.Default){this.assertNotDestroyed();const i=Mh(this),o=ns(void 0);try{if(!(r&nr.SkipSelf)){let f=this.records.get(n);if(void 0===f){const g=function R2(e){return"function"==typeof e||"object"==typeof e&&e instanceof on}(n)&&pu(n);f=g&&this.injectableDefInScope(g)?Eu(om(n),rm):null,this.records.set(n,f)}if(null!=f)return this.hydrate(n,f)}return(r&nr.Self?am():this.parent).get(n,t=r&nr.Optional&&t===Dh?null:t)}catch(d){if("NullInjectorError"===d.name){if((d[vp]=d[vp]||[]).unshift(Wt(n)),i)throw d;return function yp(e,n,t,r){const i=e[vp];throw n[Jw]&&i.unshift(n[Jw]),e.message=function a2(e,n,t,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=Wt(n);if(Array.isArray(n))i=n.map(Wt).join(" -> ");else if("object"==typeof n){let o=[];for(let d in n)if(n.hasOwnProperty(d)){let f=n[d];o.push(d+":"+("string"==typeof f?JSON.stringify(f):Wt(f)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${e.replace(Qw,"\n  ")}`}("\n"+e.message,i,t,r),e.ngTokenPath=i,e[vp]=null,e}(d,n,"R3InjectorError",this.source)}throw d}finally{ns(o),Mh(i)}}resolveInjectorInitializers(){const n=Mh(this),t=ns(void 0);try{const r=this.get(G0.multi,ni,nr.Self);for(const i of r)i()}finally{Mh(n),ns(t)}}toString(){const n=[],t=this.records;for(const r of t.keys())n.push(Wt(r));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Jt(205,!1)}processProvider(n){let t=Xc(n=qt(n))?n:qt(n&&n.provide);const r=function MS(e){return wd(e)?Eu(void 0,e.useValue):Eu(TS(e),rm)}(n);if(Xc(n)||!0!==n.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Eu(void 0,rm,!0),i.factory=()=>Gv(i.multi),this.records.set(t,i)),t=n,i.multi.push(n)}this.records.set(t,r)}hydrate(n,t){return t.value===rm&&(t.value=im,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Y0(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(n){if(!n.providedIn)return!1;const t=qt(n.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function om(e){const n=pu(e),t=null!==n?n.factory:Eo(e);if(null!==t)return t;if(e instanceof on)throw new Jt(204,!1);if(e instanceof Function)return function I2(e){const n=e.length;if(n>0)throw gp(n,"?"),new Jt(204,!1);const t=function Va(e){const n=e&&(e[gu]||e[za]);if(n){const t=function Da(e){if(e.hasOwnProperty("name"))return e.name;const n=(""+e).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),n}return null}(e);return null!==t?()=>t.factory(e):()=>new e}(e);throw new Jt(204,!1)}function TS(e,n,t){let r;if(Xc(e)){const i=qt(e);return Eo(i)||om(i)}if(wd(e))r=()=>qt(e.useValue);else if(function Tu(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...Gv(e.deps||[]));else if(function Ih(e){return!(!e||!e.useExisting)}(e))r=()=>Lt(qt(e.useExisting));else{const i=qt(e&&(e.useClass||e.provide));if(!function P2(e){return!!e.deps}(e))return Eo(i)||om(i);r=()=>new i(...Gv(e.deps))}return r}function Eu(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function Ip(e){return!!e.\u0275providers}function Ph(e,n){for(const t of e)Array.isArray(t)?Ph(t,n):Ip(t)?Ph(t.\u0275providers,n):n(t)}class sm{}class L2{resolveComponentFactory(n){throw function AS(e){const n=Error(`No component factory found for ${Wt(e)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=e,n}(n)}}let Sd=(()=>{class e{}return e.NULL=new L2,e})();function PS(){return Rh(Ai(),un())}function Rh(e,n){return new kr(ki(e,n))}let kr=(()=>{class e{constructor(t){this.nativeElement=t}}return e.__NG_ELEMENT_ID__=PS,e})();function O2(e){return e instanceof kr?e.nativeElement:e}class Pp{}let hc=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>function k2(){const e=un(),t=ss(Ai().index,e);return(na(t)?t:e)[11]}(),e})(),N2=(()=>{class e{}return e.\u0275prov=yn({token:e,providedIn:"root",factory:()=>null}),e})();class Au{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const RS=new Au("14.2.4"),X0={};function Dd(e){return e.ngOriginalError}class fc{constructor(){this._console=console}handleError(n){const t=this._findOriginalError(n);this._console.error("ERROR",n),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(n){let t=n&&Dd(n);for(;t&&Dd(t);)t=Dd(t);return t||null}}const nb=new Map;let j2=0;const hm="__ngContext__";function Po(e,n){na(n)?(e[hm]=n[20],function rb(e){nb.set(e[20],e)}(n)):e[hm]=n}function gm(e){return e.ownerDocument.defaultView}function pc(e){return e instanceof Function?e():e}var ds=(()=>((ds=ds||{})[ds.Important=1]="Important",ds[ds.DashCase=2]="DashCase",ds))();function fb(e,n){return undefined(e,n)}function Op(e){const n=e[3];return uo(n)?n[3]:n}function pb(e){return kp(e[13])}function gb(e){return kp(e[4])}function kp(e){for(;null!==e&&!uo(e);)e=e[4];return e}function Fh(e,n,t,r,i){if(null!=r){let o,d=!1;uo(r)?o=r:na(r)&&(d=!0,r=r[0]);const f=Ga(r);0===e&&null!==t?null==i?xb(n,t,f):Pu(n,t,f,i||null,!0):1===e&&null!==t?Pu(n,t,f,i||null,!0):2===e?function KS(e,n,t){const r=_m(e,n);r&&function lR(e,n,t,r){e.removeChild(n,t,r)}(e,r,n,t)}(n,f,d):3===e&&n.destroyNode(f),null!=o&&function dR(e,n,t,r,i){const o=t[7];o!==Ga(t)&&Fh(n,e,r,o,i);for(let f=10;f<t.length;f++){const g=t[f];Md(g[1],g,e,n,r,o)}}(n,e,o,t,i)}}function mb(e,n,t){return e.createElement(n,t)}function US(e,n){const t=e[9],r=t.indexOf(n),i=n[3];512&n[2]&&(n[2]&=-513,h0(i,-1)),t.splice(r,1)}function _b(e,n){if(e.length<=10)return;const t=10+n,r=e[t];if(r){const i=r[17];null!==i&&i!==e&&US(i,r),n>0&&(e[t-1][4]=r[4]);const o=jc(e,10+n);!function eR(e,n){Md(e,n,n[11],2,null,null),n[0]=null,n[6]=null}(r[1],r);const d=o[19];null!==d&&d.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function GS(e,n){if(!(128&n[2])){const t=n[11];t.destroyNode&&Md(e,n,t,3,null,null),function rR(e){let n=e[13];if(!n)return yb(e[1],e);for(;n;){let t=null;if(na(n))t=n[13];else{const r=n[10];r&&(t=r)}if(!t){for(;n&&!n[4]&&n!==e;)na(n)&&yb(n[1],n),n=n[3];null===n&&(n=e),na(n)&&yb(n[1],n),t=n&&n[4]}n=t}}(n)}}function yb(e,n){if(!(128&n[2])){n[2]&=-65,n[2]|=128,function sR(e,n){let t;if(null!=e&&null!=(t=e.destroyHooks))for(let r=0;r<t.length;r+=2){const i=n[t[r]];if(!(i instanceof np)){const o=t[r+1];if(Array.isArray(o))for(let d=0;d<o.length;d+=2){const f=i[o[d]],g=o[d+1];try{g.call(f)}finally{}}else try{o.call(i)}finally{}}}}(e,n),function oR(e,n){const t=e.cleanup,r=n[7];let i=-1;if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const d=t[o+1],f="function"==typeof d?d(n):Ga(n[d]),g=r[i=t[o+2]],_=t[o+3];"boolean"==typeof _?f.removeEventListener(t[o],g,_):_>=0?r[i=_]():r[i=-_].unsubscribe(),o+=2}else{const d=r[i=t[o+1]];t[o].call(d)}if(null!==r){for(let o=i+1;o<r.length;o++)(0,r[o])();n[7]=null}}(e,n),1===n[1].type&&n[11].destroy();const t=n[17];if(null!==t&&uo(n[3])){t!==n[3]&&US(t,n);const r=n[19];null!==r&&r.detachView(e)}!function v5(e){nb.delete(e[20])}(n)}}function WS(e,n,t){return function bb(e,n,t){let r=n;for(;null!==r&&40&r.type;)r=(n=r).parent;if(null===r)return t[0];if(2&r.flags){const i=e.data[r.directiveStart].encapsulation;if(i===zo.None||i===zo.Emulated)return null}return ki(r,t)}(e,n.parent,t)}function Pu(e,n,t,r,i){e.insertBefore(n,t,r,i)}function xb(e,n,t){e.appendChild(n,t)}function mm(e,n,t,r,i){null!==r?Pu(e,n,t,r,i):xb(e,n,t)}function _m(e,n){return e.parentNode(n)}function jS(e,n,t){return YS(e,n,t)}let YS=function ZS(e,n,t){return 40&e.type?ki(e,t):null};function ym(e,n,t,r){const i=WS(e,r,n),o=n[11],f=jS(r.parent||n[6],r,n);if(null!=i)if(Array.isArray(t))for(let g=0;g<t.length;g++)mm(o,i,t[g],f,!1);else mm(o,i,t,f,!1)}function bm(e,n){if(null!==n){const t=n.type;if(3&t)return ki(n,e);if(4&t)return wb(-1,e[n.index]);if(8&t){const r=n.child;if(null!==r)return bm(e,r);{const i=e[n.index];return uo(i)?wb(-1,i):Ga(i)}}if(32&t)return fb(n,e)()||Ga(e[n.index]);{const r=$S(e,n);return null!==r?Array.isArray(r)?r[0]:bm(Op(e[16]),r):bm(e,n.next)}}return null}function $S(e,n){return null!==n?e[16][6].projection[n.projection]:null}function wb(e,n){const t=10+e+1;if(t<n.length){const r=n[t],i=r[1].firstChild;if(null!==i)return bm(r,i)}return n[7]}function Sb(e,n,t,r,i,o,d){for(;null!=t;){const f=r[t.index],g=t.type;if(d&&0===n&&(f&&Po(Ga(f),r),t.flags|=4),64!=(64&t.flags))if(8&g)Sb(e,n,t.child,r,i,o,!1),Fh(n,e,i,f,o);else if(32&g){const _=fb(t,r);let C;for(;C=_();)Fh(n,e,i,C,o);Fh(n,e,i,f,o)}else 16&g?QS(e,n,r,t,i,o):Fh(n,e,i,f,o);t=d?t.projectionNext:t.next}}function Md(e,n,t,r,i,o){Sb(t,r,e.firstChild,n,i,o,!1)}function QS(e,n,t,r,i,o){const d=t[16],g=d[6].projection[r.projection];if(Array.isArray(g))for(let _=0;_<g.length;_++)Fh(n,e,i,g[_],o);else Sb(e,n,g,d[3],i,o,!0)}function qS(e,n,t){e.setAttribute(n,"style",t)}function Kc(e,n,t){""===t?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}function xm(e,n,t){let r=e.length;for(;;){const i=e.indexOf(n,t);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const o=n.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}t=i+1}}const Cm="ng-template";function JS(e,n,t){let r=0;for(;r<e.length;){let i=e[r++];if(t&&"class"===i){if(i=e[r],-1!==xm(i.toLowerCase(),n,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===n)return!0;return!1}}return!1}function Db(e){return 4===e.type&&e.value!==Cm}function eD(e,n,t){return n===(4!==e.type||t?e.value:Cm)}function fR(e,n,t){let r=4;const i=e.attrs||[],o=function gR(e){for(let n=0;n<e.length;n++)if(Fw(e[n]))return n;return e.length}(i);let d=!1;for(let f=0;f<n.length;f++){const g=n[f];if("number"!=typeof g){if(!d)if(4&r){if(r=2|1&r,""!==g&&!eD(e,g,t)||""===g&&1===n.length){if(ol(r))return!1;d=!0}}else{const _=8&r?g:n[++f];if(8&r&&null!==e.attrs){if(!JS(e.attrs,_,t)){if(ol(r))return!1;d=!0}continue}const S=pR(8&r?"class":g,i,Db(e),t);if(-1===S){if(ol(r))return!1;d=!0;continue}if(""!==_){let k;k=S>o?"":i[S+1].toLowerCase();const z=8&r?k:null;if(z&&-1!==xm(z,_,0)||2&r&&_!==k){if(ol(r))return!1;d=!0}}}}else{if(!d&&!ol(r)&&!ol(g))return!1;if(d&&ol(g))continue;d=!1,r=g|1&r}}return ol(r)||d}function ol(e){return 0==(1&e)}function pR(e,n,t,r){if(null===n)return-1;let i=0;if(r||!t){let o=!1;for(;i<n.length;){const d=n[i];if(d===e)return i;if(3===d||6===d)o=!0;else{if(1===d||2===d){let f=n[++i];for(;"string"==typeof f;)f=n[++i];continue}if(4===d)break;if(0===d){i+=4;continue}}i+=o?1:2}return-1}return function vR(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){const r=e[t];if("number"==typeof r)return-1;if(r===n)return t;t++}return-1}(n,e)}function tD(e,n,t=!1){for(let r=0;r<n.length;r++)if(fR(e,n[r],t))return!0;return!1}function mR(e,n){e:for(let t=0;t<n.length;t++){const r=n[t];if(e.length===r.length){for(let i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function nD(e,n){return e?":not("+n.trim()+")":n}function _R(e){let n=e[0],t=1,r=2,i="",o=!1;for(;t<e.length;){let d=e[t];if("string"==typeof d)if(2&r){const f=e[++t];i+="["+d+(f.length>0?'="'+f+'"':"")+"]"}else 8&r?i+="."+d:4&r&&(i+=" "+d);else""!==i&&!ol(d)&&(n+=nD(o,i),i=""),r=d,o=o||!ol(r);t++}return""!==i&&(n+=nD(o,i)),n}const Vr={};function Dt(e){Bh(vi(),un(),ls()+e,!1)}function Bh(e,n,t,r){if(!r)if(3==(3&n[2])){const o=e.preOrderCheckHooks;null!==o&&Pv(n,o,t)}else{const o=e.preOrderHooks;null!==o&&tp(n,o,0,t)}Wc(t)}function aD(e,n=null,t=null,r){const i=oD(e,n,t,r);return i.resolveInjectorInitializers(),i}function oD(e,n=null,t=null,r,i=new Set){const o=[t||ni,W0(e)];return r=r||("object"==typeof e?void 0:Wt(e)),new DS(o,n||am(),r||null,i)}let Wa=(()=>{class e{static create(t,r){if(Array.isArray(t))return aD({name:""},r,t,"");{const i=t.name??"";return aD({name:i},t.parent,t.providers,i)}}}return e.THROW_IF_NOT_FOUND=Dh,e.NULL=new Ep,e.\u0275prov=yn({token:e,providedIn:"any",factory:()=>Lt(Ah)}),e.__NG_ELEMENT_ID__=-1,e})();function Xe(e,n=nr.Default){const t=un();return null===t?Lt(e,n):Uw(Ai(),t,qt(e),n)}function gc(){throw new Error("invalid")}function Vp(e,n){return e<<17|n<<2}function Fs(e){return e>>17&32767}function Em(e){return 2|e}function Rl(e){return(131068&e)>>2}function kb(e,n){return-131069&e|n<<2}function Nb(e){return 1|e}function TD(e,n){const t=e.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],o=t[r+1];if(-1!==o){const d=e.data[o];ep(i),d.contentQueries(2,n[o],o)}}}function Om(e,n,t,r,i,o,d,f,g,_,C){const S=n.blueprint.slice();return S[0]=i,S[2]=76|r,(null!==C||e&&1024&e[2])&&(S[2]|=1024),Ew(S),S[3]=S[15]=e,S[8]=t,S[10]=d||e&&e[10],S[11]=f||e&&e[11],S[12]=g||e&&e[12]||null,S[9]=_||e&&e[9]||null,S[6]=o,S[20]=function kS(){return j2++}(),S[21]=C,S[16]=2==n.type?e[16]:S,S}function Ad(e,n,t,r,i){let o=e.data[n];if(null===o)o=function km(e,n,t,r,i){const o=ka(),d=Mv(),g=e.data[n]=function zR(e,n,t,r,i,o){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,d?o:o&&o.parent,t,n,r,i);return null===e.firstChild&&(e.firstChild=g),null!==o&&(d?null==o.child&&null!==g.parent&&(o.child=g):null===o.next&&(o.next=g)),g}(e,n,t,r,i),function LP(){return Or.lFrame.inI18n}()&&(o.flags|=64);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const d=function el(){const e=Or.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();o.injectorIndex=null===d?-1:d.injectorIndex}return Wo(o,!0),o}function Vh(e,n,t,r){if(0===t)return-1;const i=n.length;for(let o=0;o<t;o++)n.push(r),e.blueprint.push(r),e.data.push(null);return i}function Hb(e,n,t){dd(n);try{const r=e.viewQuery;null!==r&&zm(1,r,t);const i=e.template;null!==i&&zh(e,n,i,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&TD(e,n),e.staticViewQueries&&zm(2,e.viewQuery,t);const o=e.components;null!==o&&function BR(e,n){for(let t=0;t<n.length;t++)JR(e,n[t])}(n,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{n[2]&=-5,Av()}}function Nm(e,n,t,r){const i=n[2];if(128!=(128&i)){dd(n);try{Ew(n),function Aw(e){return Or.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==t&&zh(e,n,t,2,r);const d=3==(3&i);if(d){const _=e.preOrderCheckHooks;null!==_&&Pv(n,_,null)}else{const _=e.preOrderHooks;null!==_&&tp(n,_,0,null),Rv(n,0)}if(function QR(e){for(let n=pb(e);null!==n;n=gb(n)){if(!n[2])continue;const t=n[9];for(let r=0;r<t.length;r++){const i=t[r],o=i[3];0==(512&i[2])&&h0(o,1),i[2]|=512}}}(n),function KR(e){for(let n=pb(e);null!==n;n=gb(n))for(let t=10;t<n.length;t++){const r=n[t],i=r[1];Sv(r)&&Nm(i,r,i.template,r[8])}}(n),null!==e.contentQueries&&TD(e,n),d){const _=e.contentCheckHooks;null!==_&&Pv(n,_)}else{const _=e.contentHooks;null!==_&&tp(n,_,1),Rv(n,1)}!function MD(e,n){const t=e.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)Wc(~i);else{const o=i,d=t[++r],f=t[++r];OP(d,o),f(2,n[o])}}}finally{Wc(-1)}}(e,n);const f=e.components;null!==f&&function FR(e,n){for(let t=0;t<n.length;t++)qR(e,n[t])}(n,f);const g=e.viewQuery;if(null!==g&&zm(2,g,r),d){const _=e.viewCheckHooks;null!==_&&Pv(n,_)}else{const _=e.viewHooks;null!==_&&tp(n,_,2),Rv(n,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[2]&=-41,512&n[2]&&(n[2]&=-513,h0(n[3],-1))}finally{Av()}}}function zh(e,n,t,r,i){const o=ls(),d=2&r;try{Wc(-1),d&&n.length>22&&Bh(e,n,22,!1),t(r,i)}finally{Wc(o)}}function ED(e,n,t){if(Ne(n)){const i=n.directiveEnd;for(let o=n.directiveStart;o<i;o++){const d=e.data[o];d.contentQueries&&d.contentQueries(1,t[o],o)}}}function Ub(e,n,t){!g0()||(function GR(e,n,t,r){const i=t.directiveStart,o=t.directiveEnd;e.firstCreatePass||fd(t,n),Po(r,n);const d=t.initialInputs;for(let f=i;f<o;f++){const g=e.data[f],_=ze(g);_&&YR(n,t,g);const C=dp(n,e,f,t);Po(C,n),null!==d&&XR(0,f-i,C,g,0,d),_&&(ss(t.index,n)[8]=C)}}(e,n,t,ki(t,n)),128==(128&t.flags)&&function kD(e,n,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,d=function kP(){return Or.lFrame.currentDirectiveIndex}();try{Wc(o);for(let f=r;f<i;f++){const g=e.data[f],_=n[f];y0(f),(null!==g.hostBindings||0!==g.hostVars||null!==g.hostAttrs)&&ND(g,_)}}finally{Wc(-1),y0(d)}}(e,n,t))}function Gb(e,n,t=ki){const r=n.localNames;if(null!==r){let i=n.index+1;for(let o=0;o<r.length;o+=2){const d=r[o+1],f=-1===d?t(n,e):e[d];e[i++]=f}}}function AD(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=Wb(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):n}function Wb(e,n,t,r,i,o,d,f,g,_){const C=22+r,S=C+i,k=function _a(e,n){const t=[];for(let r=0;r<n;r++)t.push(r<e?null:Vr);return t}(C,S),z="function"==typeof _?_():_;return k[1]={type:e,blueprint:k,template:t,queries:null,viewQuery:f,declTNode:n,data:k.slice().fill(null,C),bindingStartIndex:C,expandoStartIndex:S,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof d?d():d,firstChild:null,schemas:g,consts:z,incompleteFirstPass:!1}}function PD(e,n,t,r){const i=zD(n);null===t?i.push(r):(i.push(t),e.firstCreatePass&&Qb(e).push(r,i.length-1))}function RD(e,n,t){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(n,i):t[r]=[n,i]}return t}function LD(e,n){const r=n.directiveEnd,i=e.data,o=n.attrs,d=[];let f=null,g=null;for(let _=n.directiveStart;_<r;_++){const C=i[_],S=C.inputs,k=null===o||Db(n)?null:$R(S,o);d.push(k),f=RD(S,_,f),g=RD(C.outputs,_,g)}null!==f&&(f.hasOwnProperty("class")&&(n.flags|=16),f.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=d,n.inputs=f,n.outputs=g}function hs(e,n,t,r,i,o,d,f){const g=ki(n,t);let C,_=n.inputs;!f&&null!=_&&(C=_[r])?(qb(e,t,C,r,i),Ge(n)&&jb(t,n.index)):3&n.type&&(r=function HR(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=d?d(i,n.value||"",r):i,o.setProperty(g,r,i))}function jb(e,n){const t=ss(n,e);16&t[2]||(t[2]|=32)}function Fm(e,n,t,r){let i=!1;if(g0()){const o=function WR(e,n,t){const r=e.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const d=r[o];tD(t,d.selectors,!1)&&(i||(i=[]),pd(fd(t,n),e,d.type),ze(d)?(FD(e,t),i.unshift(d)):i.push(d))}return i}(e,n,t),d=null===r?null:{"":-1};if(null!==o){i=!0,BD(t,e.data.length,o.length);for(let C=0;C<o.length;C++){const S=o[C];S.providersResolver&&S.providersResolver(S)}let f=!1,g=!1,_=Vh(e,n,o.length,null);for(let C=0;C<o.length;C++){const S=o[C];t.mergedAttrs=Ov(t.mergedAttrs,S.hostAttrs),VD(e,t,n,_,S),ZR(_,S,d),null!==S.contentQueries&&(t.flags|=8),(null!==S.hostBindings||null!==S.hostAttrs||0!==S.hostVars)&&(t.flags|=128);const k=S.type.prototype;!f&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(t.index),f=!0),!g&&(k.ngOnChanges||k.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t.index),g=!0),_++}LD(e,t)}d&&function jR(e,n,t){if(n){const r=e.localNames=[];for(let i=0;i<n.length;i+=2){const o=t[n[i+1]];if(null==o)throw new Jt(-301,!1);r.push(n[i],o)}}}(t,r,d)}return t.mergedAttrs=Ov(t.mergedAttrs,t.attrs),i}function Yb(e,n,t,r,i,o){const d=o.hostBindings;if(d){let f=e.hostBindingOpCodes;null===f&&(f=e.hostBindingOpCodes=[]);const g=~n.index;(function OD(e){let n=e.length;for(;n>0;){const t=e[--n];if("number"==typeof t&&t<0)return t}return 0})(f)!=g&&f.push(g),f.push(r,i,d)}}function ND(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function FD(e,n){n.flags|=2,(e.components||(e.components=[])).push(n.index)}function ZR(e,n,t){if(t){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)t[n.exportAs[r]]=e;ze(n)&&(t[""]=e)}}function BD(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}function VD(e,n,t,r,i){e.data[r]=i;const o=i.factory||(i.factory=Eo(i.type)),d=new np(o,ze(i),Xe);e.blueprint[r]=d,t[r]=d,Yb(e,n,0,r,Vh(e,t,i.hostVars,Vr),i)}function YR(e,n,t){const r=ki(n,e),i=AD(t),o=e[10],d=Vm(e,Om(e,i,null,t.onPush?32:16,r,n,o,o.createRenderer(r,t),null,null,null));e[n.index]=d}function mc(e,n,t,r,i,o){const d=ki(e,n);!function Bm(e,n,t,r,i,o,d){if(null==o)e.removeAttribute(n,i,t);else{const f=null==d?Pr(o):d(o,r||"",i);e.setAttribute(n,i,f,t)}}(n[11],d,o,e.value,t,r,i)}function XR(e,n,t,r,i,o){const d=o[n];if(null!==d){const f=r.setInput;for(let g=0;g<d.length;){const _=d[g++],C=d[g++],S=d[g++];null!==f?r.setInput(t,S,_,C):t[C]=S}}}function $R(e,n){let t=null,r=0;for(;r<n.length;){const i=n[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===t&&(t=[]),t.push(i,e[i],n[r+1])),r+=2}else r+=2;else r+=4}return t}function Xb(e,n,t,r){return new Array(e,!0,!1,n,null,0,r,t,null,null)}function qR(e,n){const t=ss(n,e);if(Sv(t)){const r=t[1];48&t[2]?Nm(r,t,r.template,t[8]):t[5]>0&&$b(t)}}function $b(e){for(let r=pb(e);null!==r;r=gb(r))for(let i=10;i<r.length;i++){const o=r[i];if(Sv(o))if(512&o[2]){const d=o[1];Nm(d,o,d.template,o[8])}else o[5]>0&&$b(o)}const t=e[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=ss(t[r],e);Sv(i)&&i[5]>0&&$b(i)}}function JR(e,n){const t=ss(n,e),r=t[1];(function eL(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])})(r,t),Hb(r,t,t[8])}function Vm(e,n){return e[13]?e[14][4]=n:e[13]=n,e[14]=n,n}function Kb(e){for(;e;){e[2]|=32;const n=Op(e);if(Ze(e)&&!n)return e;e=n}return null}function Hp(e,n,t,r=!0){const i=n[10];i.begin&&i.begin();try{Nm(e,n,e.template,t)}catch(d){throw r&&UD(n,d),d}finally{i.end&&i.end()}}function zm(e,n,t){ep(0),n(e,t)}function zD(e){return e[7]||(e[7]=[])}function Qb(e){return e.cleanup||(e.cleanup=[])}function HD(e,n,t){return(null===e||ze(e))&&(t=function TP(e){for(;Array.isArray(e);){if("object"==typeof e[1])return e;e=e[0]}return null}(t[n.index])),t[11]}function UD(e,n){const t=e[9],r=t?t.get(fc,null):null;r&&r.handleError(n)}function qb(e,n,t,r,i){for(let o=0;o<t.length;){const d=t[o++],f=t[o++],g=n[d],_=e.data[d];null!==_.setInput?_.setInput(g,i,r,f):g[f]=i}}function Qc(e,n,t){const r=qf(n,e);!function HS(e,n,t){e.setValue(n,t)}(e[11],r,t)}function Hm(e,n,t){let r=t?e.styles:null,i=t?e.classes:null,o=0;if(null!==n)for(let d=0;d<n.length;d++){const f=n[d];"number"==typeof f?o=f:1==o?i=ad(i,f):2==o&&(r=ad(r,f+": "+n[++d]+";"))}t?e.styles=r:e.stylesWithoutHost=r,t?e.classes=i:e.classesWithoutHost=i}function Um(e,n,t,r,i=!1){for(;null!==t;){const o=n[t.index];if(null!==o&&r.push(Ga(o)),uo(o))for(let f=10;f<o.length;f++){const g=o[f],_=g[1].firstChild;null!==_&&Um(g[1],g,_,r)}const d=t.type;if(8&d)Um(e,n,t.child,r);else if(32&d){const f=fb(t,n);let g;for(;g=f();)r.push(g)}else if(16&d){const f=$S(n,t);if(Array.isArray(f))r.push(...f);else{const g=Op(n[16]);Um(g[1],g,f,r,!0)}}t=i?t.projectionNext:t.next}return r}class Hh{constructor(n,t){this._lView=n,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,t=n[1];return Um(t,n,t.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(uo(n)){const t=n[8],r=t?t.indexOf(this):-1;r>-1&&(_b(n,r),jc(t,r))}this._attachedToViewContainer=!1}GS(this._lView[1],this._lView)}onDestroy(n){PD(this._lView[1],this._lView,null,n)}markForCheck(){Kb(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Hp(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Jt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function nR(e,n){Md(e,n,n[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Jt(902,!1);this._appRef=n}}class tL extends Hh{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;Hp(n[1],n,n[8],!1)}checkNoChanges(){}get context(){return null}}class Jb extends Sd{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const t=Ei(n);return new Up(t,this.ngModule)}}function GD(e){const n=[];for(let t in e)e.hasOwnProperty(t)&&n.push({propName:e[t],templateName:t});return n}class WD{constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,r){const i=this.injector.get(n,X0,r);return i!==X0||t===X0?i:this.parentInjector.get(n,t,r)}}class Up extends sm{constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=function yR(e){return e.map(_R).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return GD(this.componentDef.inputs)}get outputs(){return GD(this.componentDef.outputs)}create(n,t,r,i){let o=(i=i||this.ngModule)instanceof $c?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const d=o?new WD(n,o):n,f=d.get(Pp,null);if(null===f)throw new Jt(407,!1);const g=d.get(N2,null),_=f.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",S=r?function VR(e,n,t){return e.selectRootElement(n,t===zo.ShadowDom)}(_,r,this.componentDef.encapsulation):mb(f.createRenderer(null,this.componentDef),C,function nL(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(C)),k=this.componentDef.onPush?288:272,z=Wb(0,null,null,1,0,null,null,null,null,null),te=Om(null,z,null,k,null,null,f,_,g,d,null);let pe,Me;dd(te);try{const Re=function aL(e,n,t,r,i,o){const d=t[1];t[22]=e;const g=Ad(d,22,2,"#host",null),_=g.mergedAttrs=n.hostAttrs;null!==_&&(Hm(g,_,!0),null!==e&&(ip(i,e,_),null!==g.classes&&Kc(i,e,g.classes),null!==g.styles&&qS(i,e,g.styles)));const C=r.createRenderer(e,n),S=Om(t,AD(n),null,n.onPush?32:16,t[22],g,r,C,o||null,null,null);return d.firstCreatePass&&(pd(fd(g,t),d,n.type),FD(d,g),BD(g,t.length,1)),Vm(t,S),t[22]=S}(S,this.componentDef,te,f,_);if(S)if(r)ip(_,S,["ng-version",RS.full]);else{const{attrs:Fe,classes:Oe}=function rD(e){const n=[],t=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&n.push(o,e[++r]):8===i&&t.push(o);else{if(!ol(i))break;i=o}r++}return{attrs:n,classes:t}}(this.componentDef.selectors[0]);Fe&&ip(_,S,Fe),Oe&&Oe.length>0&&Kc(_,S,Oe.join(" "))}if(Me=xi(z,22),void 0!==t){const Fe=Me.projection=[];for(let Oe=0;Oe<this.ngContentSelectors.length;Oe++){const Be=t[Oe];Fe.push(null!=Be?Array.from(Be):null)}}pe=function oL(e,n,t,r){const i=t[1],o=function UR(e,n,t){const r=Ai();e.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),VD(e,r,n,Vh(e,n,1,null),t),LD(e,r));const i=dp(n,e,r.directiveStart,r);Po(i,n);const o=ki(r,n);return o&&Po(o,n),i}(i,t,n);if(e[8]=t[8]=o,null!==r)for(const f of r)f(o,n);if(n.contentQueries){const f=Ai();n.contentQueries(1,o,f.directiveStart)}const d=Ai();return!i.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(Wc(d.index),Yb(t[1],d,0,d.directiveStart,d.directiveEnd,n),ND(n,o)),o}(Re,this.componentDef,te,[sL]),Hb(z,te,null)}finally{Av()}return new iL(this.componentType,pe,Rh(Me,te),te,Me)}}class iL extends class ES{}{constructor(n,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new tL(i),this.componentType=n}setInput(n,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[n])){const o=this._rootLView;qb(o[1],o,i,n,t),jb(o,this._tNode.index)}}get injector(){return new vd(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function sL(){const e=Ai();Iv(un()[1],e)}function Gn(e){let n=function jD(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),t=!0;const r=[e];for(;n;){let i;if(ze(e))i=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Jt(903,!1);i=n.\u0275dir}if(i){if(t){r.push(i);const d=e;d.inputs=Gm(e.inputs),d.declaredInputs=Gm(e.declaredInputs),d.outputs=Gm(e.outputs);const f=i.hostBindings;f&&dL(e,f);const g=i.viewQuery,_=i.contentQueries;if(g&&cL(e,g),_&&uL(e,_),Tr(e.inputs,i.inputs),Tr(e.declaredInputs,i.declaredInputs),Tr(e.outputs,i.outputs),ze(i)&&i.data.animation){const C=e.data;C.animation=(C.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let d=0;d<o.length;d++){const f=o[d];f&&f.ngInherit&&f(e),f===Gn&&(t=!1)}}n=Object.getPrototypeOf(n)}!function lL(e){let n=0,t=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=n+=i.hostVars,i.hostAttrs=Ov(i.hostAttrs,t=Ov(t,i.hostAttrs))}}(r)}function Gm(e){return e===co?{}:e===ni?[]:e}function cL(e,n){const t=e.viewQuery;e.viewQuery=t?(r,i)=>{n(r,i),t(r,i)}:n}function uL(e,n){const t=e.contentQueries;e.contentQueries=t?(r,i,o)=>{n(r,i,o),t(r,i,o)}:n}function dL(e,n){const t=e.hostBindings;e.hostBindings=t?(r,i)=>{n(r,i),t(r,i)}:n}let Gp=null;function qc(){if(!Gp){const e=Ti.Symbol;if(e&&e.iterator)Gp=e.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<n.length;++t){const r=n[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Gp=r)}}}return Gp}function Uh(e){return!!nx(e)&&(Array.isArray(e)||!(e instanceof Map)&&qc()in e)}function nx(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function _c(e,n,t){return e[n]=t}function Ro(e,n,t){return!Object.is(e[n],t)&&(e[n]=t,!0)}function Nu(e,n,t,r){const i=Ro(e,n,t);return Ro(e,n+1,r)||i}function Er(e,n,t,r){const i=un();return Ro(i,bh(),n)&&(vi(),mc(Ta(),i,e,n,t,r)),Er}function jh(e,n,t,r){return Ro(e,bh(),t)?n+Pr(t)+r:Vr}function Id(e,n,t,r,i,o){const f=Nu(e,function Gc(){return Or.lFrame.bindingIndex}(),t,i);return Ao(2),f?n+Pr(t)+r+Pr(i)+o:Vr}function ar(e,n,t,r,i,o,d,f){const g=un(),_=vi(),C=e+22,S=_.firstCreatePass?function _L(e,n,t,r,i,o,d,f,g){const _=n.consts,C=Ad(n,e,4,d||null,fo(_,f));Fm(n,t,C,fo(_,g)),Iv(n,C);const S=C.tViews=Wb(2,C,r,i,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,_);return null!==n.queries&&(n.queries.template(n,C),S.queries=n.queries.embeddedTView(C)),C}(C,_,g,n,t,r,i,o,d):_.data[C];Wo(S,!1);const k=g[11].createComment("");ym(_,g,k,S),Po(k,g),Vm(g,g[C]=Xb(k,g,k,S)),Le(S)&&Ub(_,g,S),null!=d&&Gb(g,S,f)}function li(e){return function Jn(e,n){return e[n]}(function tl(){return Or.lFrame.contextLView}(),22+e)}function Mt(e,n,t){const r=un();return Ro(r,bh(),n)&&hs(vi(),Ta(),r,e,n,r[11],t,!1),Mt}function ix(e,n,t,r,i){const d=i?"class":"style";qb(e,t,n.inputs[d],d,r)}function qe(e,n,t,r){const i=un(),o=vi(),d=22+e,f=i[11],g=i[d]=mb(f,n,function Ow(){return Or.lFrame.currentNamespace}()),_=o.firstCreatePass?function yL(e,n,t,r,i,o,d){const f=n.consts,_=Ad(n,e,2,i,fo(f,o));return Fm(n,t,_,fo(f,d)),null!==_.attrs&&Hm(_,_.attrs,!1),null!==_.mergedAttrs&&Hm(_,_.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,_),_}(d,o,i,0,n,t,r):o.data[d];Wo(_,!0);const C=_.mergedAttrs;null!==C&&ip(f,g,C);const S=_.classes;null!==S&&Kc(f,g,S);const k=_.styles;return null!==k&&qS(f,g,k),64!=(64&_.flags)&&ym(o,i,g,_),0===function yh(){return Or.lFrame.elementDepthCount}()&&Po(g,i),function Dv(){Or.lFrame.elementDepthCount++}(),Le(_)&&(Ub(o,i,_),ED(o,_,i)),null!==r&&Gb(i,_),qe}function nt(){let e=Ai();Mv()?m0():(e=e.parent,Wo(e,!1));const n=e;!function p0(){Or.lFrame.elementDepthCount--}();const t=vi();return t.firstCreatePass&&(Iv(t,e),Ne(e)&&t.queries.elementEnd(e)),null!=n.classesWithoutHost&&function Lv(e){return 0!=(16&e.flags)}(n)&&ix(t,n,un(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function UP(e){return 0!=(32&e.flags)}(n)&&ix(t,n,un(),n.stylesWithoutHost,!1),nt}function Cn(e,n,t,r){return qe(e,n,t,r),nt(),Cn}function Ni(e,n,t){const r=un(),i=vi(),o=e+22,d=i.firstCreatePass?function eM(e,n,t,r,i){const o=n.consts,d=fo(o,r),f=Ad(n,e,8,"ng-container",d);return null!==d&&Hm(f,d,!0),Fm(n,t,f,fo(o,i)),null!==n.queries&&n.queries.elementStart(n,f),f}(o,i,r,n,t):i.data[o];Wo(d,!0);const f=r[o]=r[11].createComment("");return ym(i,r,f,d),Po(f,r),Le(d)&&(Ub(i,r,d),ED(i,d,r)),null!=t&&Gb(r,d),Ni}function Fi(){let e=Ai();const n=vi();return Mv()?m0():(e=e.parent,Wo(e,!1)),n.firstCreatePass&&(Iv(n,e),Ne(e)&&n.queries.elementEnd(e)),Fi}function sa(){return un()}function jp(e){return!!e&&"function"==typeof e.then}const ox=function ax(e){return!!e&&"function"==typeof e.subscribe};function zt(e,n,t,r){const i=un(),o=vi(),d=Ai();return rM(o,i,i[11],d,e,n,0,r),zt}function jm(e,n){const t=Ai(),r=un(),i=vi();return rM(i,r,HD(Jf(i.data),t,r),t,e,n),jm}function rM(e,n,t,r,i,o,d,f){const g=Le(r),C=e.firstCreatePass&&Qb(e),S=n[8],k=zD(n);let z=!0;if(3&r.type||f){const Me=ki(r,n),Re=f?f(Me):Me,Fe=k.length,Oe=f?it=>f(Ga(it[r.index])):r.index;let Be=null;if(!f&&g&&(Be=function nM(e,n,t,r){const i=e.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const d=i[o];if(d===t&&i[o+1]===r){const f=n[7],g=i[o+2];return f.length>g?f[g]:null}"string"==typeof d&&(o+=2)}return null}(e,n,i,r.index)),null!==Be)(Be.__ngLastListenerFn__||Be).__ngNextListenerFn__=o,Be.__ngLastListenerFn__=o,z=!1;else{o=aM(r,n,S,o,!1);const it=t.listen(Re,i,o);k.push(o,it),C&&C.push(i,Oe,Fe,Fe+1)}}else o=aM(r,n,S,o,!1);const te=r.outputs;let pe;if(z&&null!==te&&(pe=te[i])){const Me=pe.length;if(Me)for(let Re=0;Re<Me;Re+=2){const at=n[pe[Re]][pe[Re+1]].subscribe(o),Ct=k.length;k.push(o,at),C&&C.push(i,r.index,Ct,-(Ct+1))}}}function iM(e,n,t,r){try{return!1!==t(r)}catch(i){return UD(e,i),!1}}function aM(e,n,t,r,i){return function o(d){if(d===Function)return r;Kb(2&e.flags?ss(e.index,n):n);let g=iM(n,0,r,d),_=o.__ngNextListenerFn__;for(;_;)g=iM(n,0,_,d)&&g,_=_.__ngNextListenerFn__;return i&&!1===g&&(d.preventDefault(),d.returnValue=!1),g}}function Yn(e=1){return function Lw(e){return(Or.lFrame.contextLView=function FP(e,n){for(;e>0;)n=n[15],e--;return n}(e,Or.lFrame.contextLView))[8]}(e)}function bL(e,n){let t=null;const r=function wm(e){const n=e.attrs;if(null!=n){const t=n.indexOf(5);if(0==(1&t))return n[t+1]}return null}(e);for(let i=0;i<n.length;i++){const o=n[i];if("*"!==o){if(null===r?tD(e,o,!0):mR(r,o))return i}else t=i}return t}function zi(e){const n=un()[16][6];if(!n.projection){const r=n.projection=gp(e?e.length:1,null),i=r.slice();let o=n.child;for(;null!==o;){const d=e?bL(o,e):0;null!==d&&(i[d]?i[d].projectionNext=o:r[d]=o,i[d]=o),o=o.next}}}function Ur(e,n=0,t){const r=un(),i=vi(),o=Ad(i,22+e,16,null,t||null);null===o.projection&&(o.projection=n),m0(),64!=(64&o.flags)&&function uR(e,n,t){QS(n[11],0,n,t,WS(e,t,n),jS(t.parent||n[6],t,n))}(i,r,o)}function lx(e,n,t,r,i){const o=e[t+1],d=null===n;let f=r?Fs(o):Rl(o),g=!1;for(;0!==f&&(!1===g||d);){const C=e[f+1];mM(e[f],n)&&(g=!0,e[f+1]=r?Nb(C):Em(C)),f=r?Fs(C):Rl(C)}g&&(e[t+1]=r?Em(o):Nb(o))}function mM(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&Ts(e,n)>=0}const ja={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function xL(e){return e.substring(ja.key,ja.keyEnd)}function cx(e,n){const t=ja.textEnd;return t===n?-1:(n=ja.keyEnd=function ux(e,n,t){for(;n<t&&e.charCodeAt(n)>32;)n++;return n}(e,ja.key=n,t),Ol(e,n,t))}function Ol(e,n,t){for(;n<t&&e.charCodeAt(n)<=32;)n++;return n}function Za(e,n,t){return ll(e,n,t,!1),Za}function ui(e,n){return ll(e,n,null,!0),ui}function yc(e,n){for(let t=function _M(e){return function Zp(e){ja.key=0,ja.keyEnd=0,ja.value=0,ja.valueEnd=0,ja.textEnd=e.length}(e),cx(e,Ol(e,0,ja.textEnd))}(n);t>=0;t=cx(n,t))ks(e,xL(n),!0)}function ll(e,n,t,r){const i=un(),o=vi(),d=Ao(2);o.firstUpdatePass&&bM(o,e,d,r),n!==Vr&&Ro(i,d,n)&&$m(o,o.data[ls()],i,i[11],e,i[d+1]=function fx(e,n){return null==e||("string"==typeof n?e+=n:"object"==typeof e&&(e=Wt(Ns(e)))),e}(n,t),r,d)}function yM(e,n){return n>=e.expandoStartIndex}function bM(e,n,t,r){const i=e.data;if(null===i[t+1]){const o=i[ls()],d=yM(e,t);Qm(o,r)&&null===n&&!d&&(n=!1),n=function DL(e,n,t,r){const i=Jf(e);let o=r?n.residualClasses:n.residualStyles;if(null===i)0===(r?n.classBindings:n.styleBindings)&&(t=Yh(t=hx(null,e,n,t,r),n.attrs,r),o=null);else{const d=n.directiveStylingLast;if(-1===d||e[d]!==i)if(t=hx(i,e,n,t,r),null===o){let g=function ML(e,n,t){const r=t?n.classBindings:n.styleBindings;if(0!==Rl(r))return e[Fs(r)]}(e,n,r);void 0!==g&&Array.isArray(g)&&(g=hx(null,e,n,g[1],r),g=Yh(g,n.attrs,r),function Z5(e,n,t,r){e[Fs(t?n.classBindings:n.styleBindings)]=r}(e,n,r,g))}else o=function xM(e,n,t){let r;const i=n.directiveEnd;for(let o=1+n.directiveStylingLast;o<i;o++)r=Yh(r,e[o].hostAttrs,t);return Yh(r,n.attrs,t)}(e,n,r)}return void 0!==o&&(r?n.residualClasses=o:n.residualStyles=o),t}(i,o,n,r),function gM(e,n,t,r,i,o){let d=o?n.classBindings:n.styleBindings,f=Fs(d),g=Rl(d);e[r]=t;let C,_=!1;if(Array.isArray(t)){const S=t;C=S[1],(null===C||Ts(S,C)>0)&&(_=!0)}else C=t;if(i)if(0!==g){const k=Fs(e[f+1]);e[r+1]=Vp(k,f),0!==k&&(e[k+1]=kb(e[k+1],r)),e[f+1]=function mD(e,n){return 131071&e|n<<17}(e[f+1],r)}else e[r+1]=Vp(f,0),0!==f&&(e[f+1]=kb(e[f+1],r)),f=r;else e[r+1]=Vp(g,0),0===f?f=r:e[g+1]=kb(e[g+1],r),g=r;_&&(e[r+1]=Em(e[r+1])),lx(e,C,r,!0),lx(e,C,r,!1),function vM(e,n,t,r,i){const o=i?e.residualClasses:e.residualStyles;null!=o&&"string"==typeof n&&Ts(o,n)>=0&&(t[r+1]=Nb(t[r+1]))}(n,C,e,r,o),d=Vp(f,g),o?n.classBindings=d:n.styleBindings=d}(i,o,n,t,d,r)}}function hx(e,n,t,r,i){let o=null;const d=t.directiveEnd;let f=t.directiveStylingLast;for(-1===f?f=t.directiveStart:f++;f<d&&(o=n[f],r=Yh(r,o.hostAttrs,i),o!==e);)f++;return null!==e&&(t.directiveStylingLast=f),r}function Yh(e,n,t){const r=t?1:2;let i=-1;if(null!==n)for(let o=0;o<n.length;o++){const d=n[o];"number"==typeof d?i=d:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),ks(e,d,!!t||n[++o]))}return void 0===e?null:e}function $m(e,n,t,r,i,o,d,f){if(!(3&n.type))return;const g=e.data,_=g[f+1];kl(function _D(e){return 1==(1&e)}(_)?Km(g,n,t,i,Rl(_),d):void 0)||(kl(o)||function Ob(e){return 2==(2&e)}(_)&&(o=Km(g,null,t,i,f,d)),function hR(e,n,t,r,i){if(n)i?e.addClass(t,r):e.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:ds.DashCase;null==i?e.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ds.Important),e.setStyle(t,r,i,o))}}(r,d,qf(ls(),t),i,o))}function Km(e,n,t,r,i,o){const d=null===n;let f;for(;i>0;){const g=e[i],_=Array.isArray(g),C=_?g[1]:g,S=null===C;let k=t[i+1];k===Vr&&(k=S?ni:void 0);let z=S?yd(k,r):C===r?k:void 0;if(_&&!kl(z)&&(z=yd(g,r)),kl(z)&&(f=z,d))return f;const te=e[i+1];i=d?Fs(te):Rl(te)}if(null!==n){let g=o?n.residualClasses:n.residualStyles;null!=g&&(f=yd(g,r))}return f}function kl(e){return void 0!==e}function Qm(e,n){return 0!=(e.flags&(n?16:32))}function Bt(e,n=""){const t=un(),r=vi(),i=e+22,o=r.firstCreatePass?Ad(r,i,1,n,null):r.data[i],d=t[i]=function vb(e,n){return e.createText(n)}(t[11],n);ym(r,t,d,o),Wo(o,!1)}function fs(e){return Ya("",e,""),fs}function Ya(e,n,t){const r=un(),i=jh(r,e,n,t);return i!==Vr&&Qc(r,ls(),i),Ya}function px(e,n,t,r,i){const o=un(),d=Id(o,e,n,t,r,i);return d!==Vr&&Qc(o,ls(),d),px}function gx(e,n,t){!function cl(e,n,t,r){const i=vi(),o=Ao(2);i.firstUpdatePass&&bM(i,null,o,r);const d=un();if(t!==Vr&&Ro(d,o,t)){const f=i.data[ls()];if(Qm(f,r)&&!yM(i,o)){let g=r?f.classesWithoutHost:f.stylesWithoutHost;null!==g&&(t=ad(g,t||"")),ix(i,f,d,t,r)}else!function Vu(e,n,t,r,i,o,d,f){i===Vr&&(i=ni);let g=0,_=0,C=0<i.length?i[0]:null,S=0<o.length?o[0]:null;for(;null!==C||null!==S;){const k=g<i.length?i[g+1]:void 0,z=_<o.length?o[_+1]:void 0;let pe,te=null;C===S?(g+=2,_+=2,k!==z&&(te=S,pe=z)):null===S||null!==C&&C<S?(g+=2,te=C):(_+=2,te=S,pe=z),null!==te&&$m(e,n,t,r,te,pe,d,f),C=g<i.length?i[g]:null,S=_<o.length?o[_]:null}}(i,f,d,d[11],d[o+1],d[o+1]=function Xm(e,n,t){if(null==t||""===t)return ni;const r=[],i=Ns(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)e(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&e(r,o,i[o]);else"string"==typeof i&&n(r,i);return r}(e,n,t),r,o)}}(ks,yc,jh(un(),e,n,t),!0)}function Nl(e,n,t){const r=un();return Ro(r,bh(),n)&&hs(vi(),Ta(),r,e,n,r[11],t,!0),Nl}function Xh(e,n,t){const r=un();if(Ro(r,bh(),n)){const o=vi(),d=Ta();hs(o,d,r,e,n,HD(Jf(o.data),d,r),t,!0)}return Xh}const $h="en-US";let xc=$h;function Px(e,n,t,r,i){if(e=qt(e),Array.isArray(e))for(let o=0;o<e.length;o++)Px(e[o],n,t,r,i);else{const o=vi(),d=un();let f=Xc(e)?e:qt(e.provide),g=TS(e);const _=Ai(),C=1048575&_.providerIndexes,S=_.directiveStart,k=_.providerIndexes>>20;if(Xc(e)||!e.multi){const z=new np(g,i,Xe),te=Rx(f,n,i?C:C+k,S);-1===te?(pd(fd(_,d),o,f),f_(o,e,n.length),n.push(f),_.directiveStart++,_.directiveEnd++,i&&(_.providerIndexes+=1048576),t.push(z),d.push(z)):(t[te]=z,d[te]=z)}else{const z=Rx(f,n,C+k,S),te=Rx(f,n,C,C+k),pe=z>=0&&t[z],Me=te>=0&&t[te];if(i&&!Me||!i&&!pe){pd(fd(_,d),o,f);const Re=function mO(e,n,t,r,i){const o=new np(e,t,Xe);return o.multi=[],o.index=n,o.componentProviders=0,fT(o,i,r&&!t),o}(i?vO:gO,t.length,i,r,g);!i&&Me&&(t[te].providerFactory=Re),f_(o,e,n.length,0),n.push(f),_.directiveStart++,_.directiveEnd++,i&&(_.providerIndexes+=1048576),t.push(Re),d.push(Re)}else f_(o,e,z>-1?z:te,fT(t[i?te:z],g,!i&&r));!i&&r&&Me&&t[te].componentProviders++}}}function f_(e,n,t,r){const i=Xc(n),o=function Z0(e){return!!e.useClass}(n);if(i||o){const g=(o?qt(n.useClass):n).prototype.ngOnDestroy;if(g){const _=e.destroyHooks||(e.destroyHooks=[]);if(!i&&n.multi){const C=_.indexOf(t);-1===C?_.push(t,[r,g]):_[C+1].push(r,g)}else _.push(t,g)}}}function fT(e,n,t){return t&&e.componentProviders++,e.multi.push(n)-1}function Rx(e,n,t,r){for(let i=t;i<r;i++)if(n[i]===e)return i;return-1}function gO(e,n,t,r){return p_(this.multi,[])}function vO(e,n,t,r){const i=this.multi;let o;if(this.providerFactory){const d=this.providerFactory.componentProviders,f=dp(t,t[1],this.providerFactory.index,r);o=f.slice(0,d),p_(i,o);for(let g=d;g<f.length;g++)o.push(f[g])}else o=[],p_(i,o);return o}function p_(e,n){for(let t=0;t<e.length;t++)n.push((0,e[t])());return n}function Gr(e,n=[]){return t=>{t.providersResolver=(r,i)=>function hT(e,n,t){const r=vi();if(r.firstCreatePass){const i=ze(e);Px(t,r.data,r.blueprint,i,!0),Px(n,r.data,r.blueprint,i,!1)}}(r,i?i(e):e,n)}}class Od{}class Jp{}class pT extends Od{constructor(n,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Jb(this);const r=Mo(n);this._bootstrapComponents=pc(r.bootstrap),this._r3Injector=oD(n,t,[{provide:Od,useValue:this},{provide:Sd,useValue:this.componentFactoryResolver}],Wt(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Ox extends Jp{constructor(n){super(),this.moduleType=n}create(n){return new pT(this.moduleType,n)}}class _O extends Od{constructor(n,t,r){super(),this.componentFactoryResolver=new Jb(this),this.instance=null;const i=new DS([...n,{provide:Od,useValue:this},{provide:Sd,useValue:this.componentFactoryResolver}],t||am(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function eg(e,n,t=null){return new _O(e,n,t).injector}let yO=(()=>{class e{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=CS(0,t.type),i=r.length>0?eg([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,i)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return e.\u0275prov=yn({token:e,providedIn:"environment",factory:()=>new e(Lt($c))}),e})();function kx(e){e.getStandaloneInjector=n=>n.get(yO).getOrCreateStandaloneInjector(e)}function eu(e,n,t){const r=jo()+e,i=un();return i[r]===Vr?_c(i,r,t?n.call(t):n()):function Gh(e,n){return e[n]}(i,r)}function Fl(e,n,t,r){return function RO(e,n,t,r,i,o){const d=n+t;return Ro(e,d,i)?_c(e,d+1,o?r.call(o,i):r(i)):dl(e,d+1)}(un(),jo(),e,n,t,r)}function kd(e,n,t,r,i){return function LO(e,n,t,r,i,o,d){const f=n+t;return Nu(e,f,i,o)?_c(e,f+2,d?r.call(d,i,o):r(i,o)):dl(e,f+2)}(un(),jo(),e,n,t,r,i)}function dl(e,n){const t=e[n];return t===Vr?void 0:t}function Uu(e){return n=>{setTimeout(e,void 0,n)}}const Mn=class VO extends ne{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,t,r){let i=n,o=t||(()=>null),d=r;if(n&&"object"==typeof n){const g=n;i=g.next?.bind(g),o=g.error?.bind(g),d=g.complete?.bind(g)}this.__isAsync&&(o=Uu(o),i&&(i=Uu(i)),d&&(d=Uu(d)));const f=super.subscribe({next:i,error:o,complete:d});return n instanceof ge&&n.add(f),f}};function zO(){return this._results[qc()]()}class qh{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=qc(),r=qh.prototype;r[t]||(r[t]=zO)}get changes(){return this._changes||(this._changes=new Mn)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,t){return this._results.reduce(n,t)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,t){const r=this;r.dirty=!1;const i=Ms(n);(this._changesDetected=!function E0(e,n,t){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=n[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let hl=(()=>{class e{}return e.__NG_ELEMENT_ID__=GO,e})();const HO=hl,UO=class extends HO{constructor(n,t,r){super(),this._declarationLView=n,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(n,t){const r=this._declarationTContainer.tViews,i=Om(this._declarationLView,r,n,16,null,r.declTNode,null,null,null,null,t||null);i[17]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[19];return null!==d&&(i[19]=d.createEmbeddedView(r)),Hb(r,i,n),new Hh(i)}};function GO(){return ng(Ai(),un())}function ng(e,n){return 4&e.type?new UO(n,e,Rh(e,n)):null}let Lo=(()=>{class e{}return e.__NG_ELEMENT_ID__=WO,e})();function WO(){return ST(Ai(),un())}const fl=Lo,zx=class extends fl{constructor(n,t,r){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=r}get element(){return Rh(this._hostTNode,this._hostLView)}get injector(){return new vd(this._hostTNode,this._hostLView)}get parentInjector(){const n=lp(this._hostTNode,this._hostLView);if(zw(n)){const t=Sh(n,this._hostLView),r=wh(n);return new vd(t[1].data[r+8],t)}return new vd(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const t=Nd(this._lContainer);return null!==t&&t[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const d=n.createEmbeddedView(t||{},o);return this.insert(d,i),d}createComponent(n,t,r,i,o){const d=n&&!function pp(e){return"function"==typeof e}(n);let f;if(d)f=t;else{const S=t||{};f=S.index,r=S.injector,i=S.projectableNodes,o=S.environmentInjector||S.ngModuleRef}const g=d?n:new Up(Ei(n)),_=r||this.parentInjector;if(!o&&null==g.ngModule){const k=(d?_:this.parentInjector).get($c,null);k&&(o=k)}const C=g.create(_,i,void 0,o);return this.insert(C.hostView,f),C}insert(n,t){const r=n._lView,i=r[1];if(function AP(e){return uo(e[3])}(r)){const C=this.indexOf(n);if(-1!==C)this.detach(C);else{const S=r[3],k=new zx(S,S[6],S[3]);k.detach(k.indexOf(n))}}const o=this._adjustIndex(t),d=this._lContainer;!function iR(e,n,t,r){const i=10+r,o=t.length;r>0&&(t[i-1][4]=n),r<o-10?(n[4]=t[i],Su(t,10+r,n)):(t.push(n),n[4]=null),n[3]=t;const d=n[17];null!==d&&t!==d&&function aR(e,n){const t=e[9];n[16]!==n[3][3][16]&&(e[2]=!0),null===t?e[9]=[n]:t.push(n)}(d,n);const f=n[19];null!==f&&f.insertView(e),n[2]|=64}(i,r,d,o);const f=wb(o,d),g=r[11],_=_m(g,d[7]);return null!==_&&function tR(e,n,t,r,i,o){r[0]=i,r[6]=n,Md(e,r,t,1,i,o)}(i,d[6],g,r,_,f),n.attachToViewContainerRef(),Su(y_(d),o,n),n}move(n,t){return this.insert(n,t)}indexOf(n){const t=Nd(this._lContainer);return null!==t?t.indexOf(n):-1}remove(n){const t=this._adjustIndex(n,-1),r=_b(this._lContainer,t);r&&(jc(y_(this._lContainer),t),GS(r[1],r))}detach(n){const t=this._adjustIndex(n,-1),r=_b(this._lContainer,t);return r&&null!=jc(y_(this._lContainer),t)?new Hh(r):null}_adjustIndex(n,t=0){return n??this.length+t}};function Nd(e){return e[8]}function y_(e){return e[8]||(e[8]=[])}function ST(e,n){let t;const r=n[e.index];if(uo(r))t=r;else{let i;if(8&e.type)i=Ga(r);else{const o=n[11];i=o.createComment("");const d=ki(e,n);Pu(o,_m(o,d),i,function cR(e,n){return e.nextSibling(n)}(o,d),!1)}n[e.index]=t=Xb(r,n,i,e),Vm(n,t)}return new zx(t,e,n)}class Hx{constructor(n){this.queryList=n,this.matches=null}clone(){return new Hx(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ux{constructor(n=[]){this.queries=n}createEmbeddedView(n){const t=n.queries;if(null!==t){const r=null!==n.contentQueries?n.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){const d=t.getByIndex(o);i.push(this.queries[d.indexInDeclarationView].clone())}return new Ux(i)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let t=0;t<this.queries.length;t++)null!==IT(n,t).matches&&this.queries[t].setDirty()}}class DT{constructor(n,t,r=null){this.predicate=n,this.flags=t,this.read=r}}class Gx{constructor(n=[]){this.queries=n}elementStart(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,t)}elementEnd(n){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(n)}embeddedTView(n){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,o=this.getByIndex(r).embeddedTView(n,i);o&&(o.indexInDeclarationView=r,null!==t?t.push(o):t=[o])}return null!==t?new Gx(t):null}template(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,t)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Wx{constructor(n,t=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(n,t){this.isApplyingToNode(t)&&this.matchTNode(n,t)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,t){this.elementStart(n,t)}embeddedTView(n,t){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,t),new Wx(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=n.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(n,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(n,t,MT(t,o)),this.matchTNodeWithReadOption(n,t,gd(t,n,o,!1,!1))}else r===hl?4&t.type&&this.matchTNodeWithReadOption(n,t,-1):this.matchTNodeWithReadOption(n,t,gd(t,n,r,!1,!1))}matchTNodeWithReadOption(n,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===kr||i===Lo||i===hl&&4&t.type)this.addMatch(t.index,-2);else{const o=gd(t,n,i,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(n,t){null===this.matches?this.matches=[n,t]:this.matches.push(n,t)}}function MT(e,n){const t=e.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===n)return t[r+1];return null}function J5(e,n,t,r){return-1===t?function q5(e,n){return 11&e.type?Rh(e,n):4&e.type?ng(e,n):null}(n,e):-2===t?function XO(e,n,t){return t===kr?Rh(n,e):t===hl?ng(n,e):t===Lo?ST(n,e):void 0}(e,n,r):dp(e,e[1],t,n)}function TT(e,n,t,r){const i=n[19].queries[r];if(null===i.matches){const o=e.data,d=t.matches,f=[];for(let g=0;g<d.length;g+=2){const _=d[g];f.push(_<0?null:J5(n,o[_],d[g+1],t.metadata.read))}i.matches=f}return i.matches}function b_(e,n,t,r){const i=e.queries.getByIndex(t),o=i.matches;if(null!==o){const d=TT(e,n,i,t);for(let f=0;f<o.length;f+=2){const g=o[f];if(g>0)r.push(d[f/2]);else{const _=o[f+1],C=n[-g];for(let S=10;S<C.length;S++){const k=C[S];k[17]===k[3]&&b_(k[1],k,_,r)}if(null!==C[9]){const S=C[9];for(let k=0;k<S.length;k++){const z=S[k];b_(z[1],z,_,r)}}}}}return r}function Kn(e){const n=un(),t=vi(),r=Pw();ep(r+1);const i=IT(t,r);if(e.dirty&&function Tw(e){return 4==(4&e[2])}(n)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const o=i.crossesNgTemplate?b_(t,n,r,[]):TT(t,n,i,r);e.reset(o,O2),e.notifyOnChanges()}return!0}return!1}function Wr(e,n,t){const r=vi();r.firstCreatePass&&(AT(r,new DT(e,n,t),-1),2==(2&n)&&(r.staticViewQueries=!0)),ET(r,un(),n)}function Li(e,n,t,r){const i=vi();if(i.firstCreatePass){const o=Ai();AT(i,new DT(n,t,r),o.index),function x_(e,n){const t=e.contentQueries||(e.contentQueries=[]);n!==(t.length?t[t.length-1]:-1)&&t.push(e.queries.length-1,n)}(i,e),2==(2&t)&&(i.staticContentQueries=!0)}ET(i,un(),t)}function Qn(){return function $O(e,n){return e[19].queries[n].queryList}(un(),Pw())}function ET(e,n,t){const r=new qh(4==(4&t));PD(e,n,r,r.destroy),null===n[19]&&(n[19]=new Ux),n[19].queries.push(new Hx(r))}function AT(e,n,t){null===e.queries&&(e.queries=new Gx),e.queries.track(new Wx(n,t))}function IT(e,n){return e.queries.getByIndex(n)}function C_(e,n){return ng(e,n)}function A_(...e){}const ag=new on("Application Initializer");let og=(()=>{class e{constructor(t){this.appInits=t,this.resolve=A_,this.reject=A_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(jp(o))t.push(o);else if(ox(o)){const d=new Promise((f,g)=>{o.subscribe({complete:f,error:g})});t.push(d)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(Lt(ag,8))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const sg=new on("AppId",{providedIn:"root",factory:function VT(){return`${a1()}${a1()}${a1()}`}});function a1(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const zT=new on("Platform Initializer"),Vd=new on("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),o1=new on("appBootstrapListener"),Zo=new on("AnimationModuleType");let fk=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const Cc=new on("LocaleId",{providedIn:"root",factory:()=>oa(Cc,nr.Optional|nr.SkipSelf)||function HT(){return typeof $localize<"u"&&$localize.locale||$h}()});class gk{constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}}let wc=(()=>{class e{compileModuleSync(t){return new Ox(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=pc(Mo(t).declarations).reduce((d,f)=>{const g=Ei(f);return g&&d.push(new Up(g)),d},[]);return new gk(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const mk=(()=>Promise.resolve(0))();function I_(e){typeof Zone>"u"?mk.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class rr{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Mn(!1),this.onMicrotaskEmpty=new Mn(!1),this.onStable=new Mn(!1),this.onError=new Mn(!1),typeof Zone>"u")throw new Jt(908,!1);Zone.assertZonePatched();const i=this;if(i._nesting=0,i._outer=i._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const o=Zone.AsyncStackTaggingZoneSpec;i._inner=i._inner.fork(new o("Angular"))}Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function WT(){let e=Ti.requestAnimationFrame,n=Ti.cancelAnimationFrame;if(typeof Zone<"u"&&e&&n){const t=e[Zone.__symbol__("OriginalDelegate")];t&&(e=t);const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function u1(e){const n=()=>{!function c1(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Ti,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,R_(e),e.isCheckStableRunning=!0,P_(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),R_(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,d,f)=>{try{return jT(e),t.invokeTask(i,o,d,f)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&n(),ZT(e)}},onInvoke:(t,r,i,o,d,f,g)=>{try{return jT(e),t.invoke(i,o,d,f,g)}finally{e.shouldCoalesceRunChangeDetection&&n(),ZT(e)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,R_(e),P_(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!rr.isInAngularZone())throw new Jt(909,!1)}static assertNotInAngularZone(){if(rr.isInAngularZone())throw new Jt(909,!1)}run(n,t,r){return this._inner.run(n,t,r)}runTask(n,t,r,i){const o=this._inner,d=o.scheduleEventTask("NgZoneEvent: "+i,n,mz,A_,A_);try{return o.runTask(d,t,r)}finally{o.cancelTask(d)}}runGuarded(n,t,r){return this._inner.runGuarded(n,t,r)}runOutsideAngular(n){return this._outer.run(n)}}const mz={};function P_(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function R_(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function jT(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function ZT(e){e._nesting--,P_(e)}class _k{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Mn,this.onMicrotaskEmpty=new Mn,this.onStable=new Mn,this.onError=new Mn}run(n,t,r){return n.apply(t,r)}runGuarded(n,t,r){return n.apply(t,r)}runOutsideAngular(n){return n()}runTask(n,t,r,i){return n.apply(t,r)}}const d1=new on(""),L_=new on("");let f1,h1=(()=>{class e{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,f1||(function yk(e){f1=e}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{rr.assertNotInAngularZone(),I_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())I_(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(d=>d.timeoutId!==o),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return e.\u0275fac=function(t){return new(t||e)(Lt(rr),Lt(O_),Lt(L_))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})(),O_=(()=>{class e{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return f1?.findTestabilityInTree(this,t,r)??null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),Gu=null;const YT=new on("AllowMultipleToken"),k_=new on("PlatformDestroyListeners");class XT{constructor(n,t){this.name=n,this.token=t}}function p1(e,n,t=[]){const r=`Platform: ${n}`,i=new on(r);return(o=[])=>{let d=g1();if(!d||d.injector.get(YT,!1)){const f=[...t,...o,{provide:i,useValue:!0}];e?e(f):function Ck(e){if(Gu&&!Gu.get(YT,!1))throw new Jt(400,!1);Gu=e;const n=e.get(qT);(function $T(e){const n=e.get(zT,null);n&&n.forEach(t=>t())})(e)}(function QT(e=[],n){return Wa.create({name:n,providers:[{provide:nm,useValue:"platform"},{provide:k_,useValue:new Set([()=>Gu=null])},...e]})}(f,r))}return function KT(e){const n=g1();if(!n)throw new Jt(401,!1);return n}()}}function g1(){return Gu?.get(qT)??null}let qT=(()=>{class e{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function eE(e,n){let t;return t="noop"===e?new _k:("zone.js"===e?void 0:e)||new rr(n),t}(r?.ngZone,function JT(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(r)),o=[{provide:rr,useValue:i}];return i.run(()=>{const d=Wa.create({providers:o,parent:this.injector,name:t.moduleType.name}),f=t.create(d),g=f.injector.get(fc,null);if(!g)throw new Jt(402,!1);return i.runOutsideAngular(()=>{const _=i.onError.subscribe({next:C=>{g.handleError(C)}});f.onDestroy(()=>{F_(this._modules,f),_.unsubscribe()})}),function tE(e,n,t){try{const r=t();return jp(r)?r.catch(i=>{throw n.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw n.runOutsideAngular(()=>e.handleError(r)),r}}(g,i,()=>{const _=f.injector.get(og);return _.runInitializers(),_.donePromise.then(()=>(function VM(e){ts(e,"Expected localeId to be defined"),"string"==typeof e&&(xc=e.toLowerCase().replace(/_/g,"-"))}(f.injector.get(Cc,$h)||$h),this._moduleDoBootstrap(f),f))})})}bootstrapModule(t,r=[]){const i=N_({},r);return function bk(e,n,t){const r=new Ox(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(t){const r=t.injector.get(zd);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new Jt(403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Jt(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(k_,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(Lt(Wa))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function N_(e,n){return Array.isArray(n)?n.reduce(N_,e):{...e,...n}}let zd=(()=>{class e{constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new B(f=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{f.next(this._stable),f.complete()})}),d=new B(f=>{let g;this._zone.runOutsideAngular(()=>{g=this._zone.onStable.subscribe(()=>{rr.assertNotInAngularZone(),I_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,f.next(!0))})})});const _=this._zone.onUnstable.subscribe(()=>{rr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{f.next(!1)}))});return()=>{g.unsubscribe(),_.unsubscribe()}});this.isStable=Oa(o,d.pipe(Bf()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof sm;if(!this._injector.get(og).done)throw!i&&function qs(e){const n=Ei(e)||pa(e)||ga(e);return null!==n&&n.standalone}(t),new Jt(405,false);let d;d=i?t:this._injector.get(Sd).resolveComponentFactory(t),this.componentTypes.push(d.componentType);const f=function xk(e){return e.isBoundToModule}(d)?void 0:this._injector.get(Od),_=d.create(Wa.NULL,[],r||d.selector,f),C=_.location.nativeElement,S=_.injector.get(d1,null);return S?.registerApplication(C),_.onDestroy(()=>{this.detachView(_.hostView),F_(this.components,_),S?.unregisterApplication(C)}),this._loadComponent(_),_}tick(){if(this._runningTick)throw new Jt(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;F_(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(o1,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>F_(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Jt(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(t){return new(t||e)(Lt(rr),Lt($c),Lt(fc))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function F_(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}let rE=!0,Wi=(()=>{class e{}return e.__NG_ELEMENT_ID__=Hd,e})();function Hd(e){return function Tk(e,n,t){if(Ge(e)&&!t){const r=ss(e.index,n);return new Hh(r,r)}return 47&e.type?new Hh(n[16],n):null}(Ai(),un(),16==(16&e))}class x1{constructor(){}supports(n){return Uh(n)}create(n){return new Rk(n)}}const Pk=(e,n)=>n;class Rk{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||Pk}forEachItem(n){let t;for(t=this._itHead;null!==t;t=t._next)n(t)}forEachOperation(n){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){const d=!r||t&&t.currentIndex<dE(r,i,o)?t:r,f=dE(d,i,o),g=d.currentIndex;if(d===r)i--,r=r._nextRemoved;else if(t=t._next,null==d.previousIndex)i++;else{o||(o=[]);const _=f-i,C=g-i;if(_!=C){for(let k=0;k<_;k++){const z=k<o.length?o[k]:o[k]=0,te=z+k;C<=te&&te<_&&(o[k]=z+1)}o[d.previousIndex]=C-_}}f!==g&&n(d,f,g)}}forEachPreviousItem(n){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachMovedItem(n){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}forEachIdentityChange(n){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)n(t)}diff(n){if(null==n&&(n=[]),!Uh(n))throw new Jt(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i,o,d,t=this._itHead,r=!1;if(Array.isArray(n)){this.length=n.length;for(let f=0;f<this.length;f++)o=n[f],d=this._trackByFn(f,o),null!==t&&Object.is(t.trackById,d)?(r&&(t=this._verifyReinsertion(t,o,d,f)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,d,f),r=!0),t=t._next}else i=0,function tx(e,n){if(Array.isArray(e))for(let t=0;t<e.length;t++)n(e[t]);else{const t=e[qc()]();let r;for(;!(r=t.next()).done;)n(r.value)}}(n,f=>{d=this._trackByFn(i,f),null!==t&&Object.is(t.trackById,d)?(r&&(t=this._verifyReinsertion(t,f,d,i)),Object.is(t.item,f)||this._addIdentityChange(t,f)):(t=this._mismatch(t,f,d,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,t,r,i){let o;return null===n?o=this._itTail:(o=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._reinsertAfter(n,o,i)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._moveAfter(n,o,i)):n=this._addAfter(new Lk(t,r),o,i),n}_verifyReinsertion(n,t,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?n=this._reinsertAfter(o,n._prev,i):n.currentIndex!=i&&(n.currentIndex=i,this._addToMoves(n,i)),n}_truncate(n){for(;null!==n;){const t=n._next;this._addToRemovals(this._unlink(n)),n=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const i=n._prevRemoved,o=n._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(n,t,r),this._addToMoves(n,r),n}_moveAfter(n,t,r){return this._unlink(n),this._insertAfter(n,t,r),this._addToMoves(n,r),n}_addAfter(n,t,r){return this._insertAfter(n,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,t,r){const i=null===t?this._itHead:t._next;return n._next=i,n._prev=t,null===i?this._itTail=n:i._prev=n,null===t?this._itHead=n:t._next=n,null===this._linkedRecords&&(this._linkedRecords=new uE),this._linkedRecords.put(n),n.currentIndex=r,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const t=n._prev,r=n._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,n}_addToMoves(n,t){return n.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new uE),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,t){return n.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class Lk{constructor(n,t){this.item=n,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ok{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,n))return r;return null}remove(n){const t=n._prevDup,r=n._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class uE{constructor(){this.map=new Map}put(n){const t=n.trackById;let r=this.map.get(t);r||(r=new Ok,this.map.set(t,r)),r.add(n)}get(n,t){const i=this.map.get(n);return i?i.get(n,t):null}remove(n){const t=n.trackById;return this.map.get(t).remove(n)&&this.map.delete(t),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function dE(e,n,t){const r=e.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+n+i}class cg{constructor(){}supports(n){return n instanceof Map||nx(n)}create(){return new kk}}class kk{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let t;for(t=this._mapHead;null!==t;t=t._next)n(t)}forEachPreviousItem(n){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)n(t)}forEachChangedItem(n){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}diff(n){if(n){if(!(n instanceof Map||nx(n)))throw new Jt(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(n,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,t){if(n){const r=n._prev;return t._next=n,t._prev=r,n._prev=t,r&&(r._next=t),n===this._mapHead&&(this._mapHead=t),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(n,t){if(this._records.has(n)){const i=this._records.get(n);this._maybeAddToChanges(i,t);const o=i._prev,d=i._next;return o&&(o._next=d),d&&(d._prev=o),i._next=null,i._prev=null,i}const r=new H_(n);return this._records.set(n,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,t){Object.is(t,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=t,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,t){n instanceof Map?n.forEach(t):Object.keys(n).forEach(r=>t(n[r],r))}}class H_{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function C1(){return new U_([new x1])}let U_=(()=>{class e{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||C1()),deps:[[e,new uc,new il]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new Jt(901,!1)}}return e.\u0275prov=yn({token:e,providedIn:"root",factory:C1}),e})();function fE(){return new ug([new cg])}let ug=(()=>{class e{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||fE()),deps:[[e,new uc,new il]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new Jt(901,!1)}}return e.\u0275prov=yn({token:e,providedIn:"root",factory:fE}),e})();const G_=p1(null,"core",[]);let Bk=(()=>{class e{constructor(t){}}return e.\u0275fac=function(t){return new(t||e)(Lt(zd))},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({}),e})();function pl(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}let ef=null;function Vs(){return ef}const Rr=new on("DocumentToken");let W_=(()=>{class e{historyGo(t){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:function(){return function w1(){return Lt(D1)}()},providedIn:"platform"}),e})();const S1=new on("Location Initialized");let D1=(()=>{class e extends W_{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Vs().getBaseHref(this._doc)}onPopState(t){const r=Vs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Vs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){gE()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){gE()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(Lt(Rr))},e.\u0275prov=yn({token:e,factory:function(){return function hg(){return new D1(Lt(Rr))}()},providedIn:"platform"}),e})();function gE(){return!!window.history.pushState}function M1(e,n){if(0==e.length)return n;if(0==n.length)return e;let t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,2==t?e+n.substring(1):1==t?e+n:e+"/"+n}function T1(e){const n=e.match(/#|\?|$/),t=n&&n.index||e.length;return e.slice(0,t-("/"===e[t-1]?1:0))+e.slice(t)}function nu(e){return e&&"?"!==e[0]?"?"+e:e}let ju=(()=>{class e{historyGo(t){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:function(){return oa(E1)},providedIn:"root"}),e})();const vE=new on("appBaseHref");let E1=(()=>{class e extends ju{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??oa(Rr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return M1(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+nu(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const d=this.prepareExternalUrl(i+nu(o));this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,o){const d=this.prepareExternalUrl(i+nu(o));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return e.\u0275fac=function(t){return new(t||e)(Lt(W_),Lt(vE,8))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),A1=(()=>{class e extends ju{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=M1(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let d=this.prepareExternalUrl(i+nu(o));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,o){let d=this.prepareExternalUrl(i+nu(o));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return e.\u0275fac=function(t){return new(t||e)(Lt(W_),Lt(vE,8))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})(),jd=(()=>{class e{constructor(t){this._subject=new Mn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=T1(mE(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+nu(r))}normalize(t){return e.stripTrailingSlash(function Zk(e,n){return e&&n.startsWith(e)?n.substring(e.length):n}(this._baseHref,mE(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nu(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nu(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return e.normalizeQueryParams=nu,e.joinWithSlash=M1,e.stripTrailingSlash=T1,e.\u0275fac=function(t){return new(t||e)(Lt(ju))},e.\u0275prov=yn({token:e,factory:function(){return function jk(){return new jd(Lt(ju))}()},providedIn:"root"}),e})();function mE(e){return e.replace(/\/index.html$/,"")}let Zu=(()=>{class e{constructor(t,r,i,o){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Uh(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Wt(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return e.\u0275fac=function(t){return new(t||e)(Xe(U_),Xe(ug),Xe(kr),Xe(hc))},e.\u0275dir=Dn({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),e})();class yN{constructor(n,t,r,i){this.$implicit=n,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let iu=(()=>{class e{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,d)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new yN(i.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===o?void 0:o);else if(null!==o){const f=r.get(o);r.move(f,d),OE(f,i)}});for(let i=0,o=r.length;i<o;i++){const f=r.get(i).context;f.index=i,f.count=o,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{OE(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return e.\u0275fac=function(t){return new(t||e)(Xe(Lo),Xe(hl),Xe(U_))},e.\u0275dir=Dn({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function OE(e,n){e.context.$implicit=n.item}let Hs=(()=>{class e{constructor(t,r){this._viewContainer=t,this._context=new xN,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){kE("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){kE("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return e.\u0275fac=function(t){return new(t||e)(Xe(Lo),Xe(hl))},e.\u0275dir=Dn({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class xN{constructor(){this.$implicit=null,this.ngIf=null}}function kE(e,n){if(n&&!n.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${Wt(n)}'.`)}class U1{constructor(n,t){this._viewContainerRef=n,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(n){n&&!this._created?this.create():!n&&this._created&&this.destroy()}}let Yu=(()=>{class e{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Dn({type:e,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),e})(),yg=(()=>{class e{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new U1(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return e.\u0275fac=function(t){return new(t||e)(Xe(Lo),Xe(hl),Xe(Yu,9))},e.\u0275dir=Dn({type:e,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),e})(),NE=(()=>{class e{constructor(t,r,i){i._addDefault(new U1(t,r))}}return e.\u0275fac=function(t){return new(t||e)(Xe(Lo),Xe(hl),Xe(Yu,9))},e.\u0275dir=Dn({type:e,selectors:[["","ngSwitchDefault",""]],standalone:!0}),e})(),W1=(()=>{class e{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,o]=t.split("."),d=-1===i.indexOf("-")?void 0:ds.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,d):this._renderer.removeStyle(this._ngEl.nativeElement,i,d)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return e.\u0275fac=function(t){return new(t||e)(Xe(kr),Xe(ug),Xe(hc))},e.\u0275dir=Dn({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),e})(),zl=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({}),e})();const UE="browser";let $1=(()=>{class e{}return e.\u0275prov=yn({token:e,providedIn:"root",factory:()=>new VN(Lt(Rr),window)}),e})();class VN{constructor(n,t){this.document=n,this.window=t,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const t=function WE(e,n){const t=e.getElementById(n)||e.getElementsByName(n)[0];if(t)return t;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const d=o.getElementById(n)||o.querySelector(`[name="${n}"]`);if(d)return d}i=r.nextNode()}}return null}(this.document,n);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=n)}}scrollToElement(n){const t=n.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=bg(this.window.history)||bg(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function bg(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class Je extends class Ke extends class Wk{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Gk(e){ef||(ef=e)}(new Je)}onAndCancel(n,t,r){return n.addEventListener(t,r,!1),()=>{n.removeEventListener(t,r,!1)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,t){return(t=t||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return"window"===t?window:"document"===t?n:"body"===t?n.body:null}getBaseHref(n){const t=function pt(){return ut=ut||document.querySelector("base"),ut?ut.getAttribute("href"):null}();return null==t?null:function wt(e){yt=yt||document.createElement("a"),yt.setAttribute("href",e);const n=yt.pathname;return"/"===n.charAt(0)?n:`/${n}`}(t)}resetBaseElement(){ut=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function mN(e,n){n=encodeURIComponent(n);for(const t of e.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===n)return decodeURIComponent(o)}return null}(document.cookie,n)}}let yt,ut=null;const kt=new on("TRANSITION_ID"),Yt=[{provide:ag,useFactory:function en(e,n,t){return()=>{t.get(og).donePromise.then(()=>{const r=Vs(),i=n.querySelectorAll(`style[ng-transition="${e}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[kt,Rr,Wa],multi:!0}];let Fn=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();const zn=new on("EventManagerPlugins");let dr=(()=>{class e{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const d=i[o];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return e.\u0275fac=function(t){return new(t||e)(Lt(zn),Lt(rr))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();class br{constructor(n){this._doc=n}addGlobalEventListener(n,t,r){const i=Vs().getGlobalEventTarget(this._doc,n);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Fr=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})(),Ci=(()=>{class e extends Fr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(o=>{const d=this._doc.createElement("style");d.textContent=o,i.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Oi),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Oi))}}return e.\u0275fac=function(t){return new(t||e)(Lt(Rr))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();function Oi(e){Vs().remove(e)}const Yr={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},or=/%COMP%/g;function ba(e,n,t){for(let r=0;r<n.length;r++){let i=n[r];Array.isArray(i)?ba(e,i,t):(i=i.replace(or,e),t.push(i))}return t}function Aa(e){return n=>{if("__ngUnwrap__"===n)return e;!1===e(n)&&(n.preventDefault(),n.returnValue=!1)}}let ml=(()=>{class e{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Yo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case zo.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new J1(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case zo.ShadowDom:return new EZ(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=ba(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(Lt(dr),Lt(Ci),Lt(sg))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();class Yo{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,t){return t?document.createElementNS(Yr[t]||t,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,t){(q1(n)?n.content:n).appendChild(t)}insertBefore(n,t,r){n&&(q1(n)?n.content:n).insertBefore(t,r)}removeChild(n,t){n&&n.removeChild(t)}selectRootElement(n,t){let r="string"==typeof n?document.querySelector(n):n;if(!r)throw new Error(`The selector "${n}" did not match any elements`);return t||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,r,i){if(i){t=i+":"+t;const o=Yr[i];o?n.setAttributeNS(o,t,r):n.setAttribute(t,r)}else n.setAttribute(t,r)}removeAttribute(n,t,r){if(r){const i=Yr[r];i?n.removeAttributeNS(i,t):n.removeAttribute(`${r}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,r,i){i&(ds.DashCase|ds.Important)?n.style.setProperty(t,r,i&ds.Important?"important":""):n.style[t]=r}removeStyle(n,t,r){r&ds.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,r){n[t]=r}setValue(n,t){n.nodeValue=t}listen(n,t,r){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,t,Aa(r)):this.eventManager.addEventListener(n,t,Aa(r))}}function q1(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class J1 extends Yo{constructor(n,t,r,i){super(n),this.component=r;const o=ba(i+"-"+r.id,r.styles,[]);t.addStyles(o),this.contentAttr=function go(e){return"_ngcontent-%COMP%".replace(or,e)}(i+"-"+r.id),this.hostAttr=function la(e){return"_nghost-%COMP%".replace(or,e)}(i+"-"+r.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,t){const r=super.createElement(n,t);return super.setAttribute(r,this.contentAttr,""),r}}class EZ extends Yo{constructor(n,t,r,i){super(n),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=ba(i.id,i.styles,[]);for(let d=0;d<o.length;d++){const f=document.createElement("style");f.textContent=o[d],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,r){return super.insertBefore(this.nodeOrShadowRoot(n),t,r)}removeChild(n,t){return super.removeChild(this.nodeOrShadowRoot(n),t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let AZ=(()=>{class e extends br{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return e.\u0275fac=function(t){return new(t||e)(Lt(Rr))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();const Wz=["alt","control","meta","shift"],IZ={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},PZ={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let RZ=(()=>{class e extends br{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,r,i){const o=e.parseEventName(r),d=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Vs().onAndCancel(t,o.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=e._normalizeKey(r.pop());let d="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),d="code."),Wz.forEach(_=>{const C=r.indexOf(_);C>-1&&(r.splice(C,1),d+=_+".")}),d+=o,0!=r.length||0===o.length)return null;const g={};return g.domEventName=i,g.fullKey=d,g}static matchEventFullKeyCode(t,r){let i=IZ[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Wz.forEach(d=>{d!==i&&(0,PZ[d])(t)&&(o+=d+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{e.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return e.\u0275fac=function(t){return new(t||e)(Lt(Rr))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();const Zz=[{provide:Vd,useValue:UE},{provide:zT,useValue:function LZ(){Je.makeCurrent()},multi:!0},{provide:Rr,useFactory:function kZ(){return function O0(e){Cp=e}(document),document},deps:[]}],NZ=p1(G_,"browser",Zz),Yz=new on(""),Xz=[{provide:L_,useClass:class dn{addToWindow(n){Ti.getAngularTestability=(r,i=!0)=>{const o=n.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},Ti.getAllAngularTestabilities=()=>n.getAllTestabilities(),Ti.getAllAngularRootElements=()=>n.getAllRootElements(),Ti.frameworkStabilizers||(Ti.frameworkStabilizers=[]),Ti.frameworkStabilizers.push(r=>{const i=Ti.getAllAngularTestabilities();let o=i.length,d=!1;const f=function(g){d=d||g,o--,0==o&&r(d)};i.forEach(function(g){g.whenStable(f)})})}findTestabilityInTree(n,t,r){return null==t?null:n.getTestability(t)??(r?Vs().isShadowRoot(t)?this.findTestabilityInTree(n,t.host,!0):this.findTestabilityInTree(n,t.parentElement,!0):null)}},deps:[]},{provide:d1,useClass:h1,deps:[rr,O_,L_]},{provide:h1,useClass:h1,deps:[rr,O_,L_]}],$z=[{provide:nm,useValue:"root"},{provide:fc,useFactory:function OZ(){return new fc},deps:[]},{provide:zn,useClass:AZ,multi:!0,deps:[Rr,rr,Vd]},{provide:zn,useClass:RZ,multi:!0,deps:[Rr]},{provide:ml,useClass:ml,deps:[dr,Ci,sg]},{provide:Pp,useExisting:ml},{provide:Fr,useExisting:Ci},{provide:Ci,useClass:Ci,deps:[Rr]},{provide:dr,useClass:dr,deps:[zn,rr]},{provide:class zN{},useClass:Fn,deps:[]},[]];let Kz=(()=>{class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:sg,useValue:t.appId},{provide:kt,useExisting:sg},Yt]}}}return e.\u0275fac=function(t){return new(t||e)(Lt(Yz,12))},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({providers:[...$z,...Xz],imports:[zl,Bk]}),e})(),Qz=(()=>{class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return e.\u0275fac=function(t){return new(t||e)(Lt(Rr))},e.\u0275prov=yn({token:e,factory:function(t){let r=null;return r=t?new t:function BZ(){return new Qz(Lt(Rr))}(),r},providedIn:"root"}),e})();typeof window<"u"&&window;let $N=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:function(t){let r=null;return r=t?new(t||e):Lt(eH),r},providedIn:"root"}),e})(),eH=(()=>{class e extends $N{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case Ri.NONE:return r;case Ri.HTML:return al(r,"HTML")?Ns(r):U0(this._doc,String(r)).toString();case Ri.STYLE:return al(r,"Style")?Ns(r):r;case Ri.SCRIPT:if(al(r,"Script"))return Ns(r);throw new Error("unsafe value used in a script context");case Ri.URL:return al(r,"URL")?Ns(r):$v(String(r));case Ri.RESOURCE_URL:if(al(r,"ResourceURL"))return Ns(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function hS(e){return new B0(e)}(t)}bypassSecurityTrustStyle(t){return function V0(e){return new p2(e)}(t)}bypassSecurityTrustScript(t){return function Xv(e){return new dS(e)}(t)}bypassSecurityTrustUrl(t){return function m2(e){return new g2(e)}(t)}bypassSecurityTrustResourceUrl(t){return function _2(e){return new v2(e)}(t)}}return e.\u0275fac=function(t){return new(t||e)(Lt(Rr))},e.\u0275prov=yn({token:e,factory:function(t){let r=null;return r=t?new t:function jZ(e){return new eH(e.get(Rr))}(Lt(Wa)),r},providedIn:"root"}),e})();function tH(e,n,t,r,i,o,d){try{var f=e[o](d),g=f.value}catch(_){return void t(_)}f.done?n(g):Promise.resolve(g).then(r,i)}function qE(e){return function(){var n=this,t=arguments;return new Promise(function(r,i){var o=e.apply(n,t);function d(g){tH(o,r,i,d,f,"next",g)}function f(g){tH(o,r,i,d,f,"throw",g)}d(void 0)})}}function qn(...e){return Rn(e,id(e))}class ZZ extends ge{constructor(n,t){super()}schedule(n,t=0){return this}}const JE={setInterval(e,n,...t){const{delegate:r}=JE;return r?.setInterval?r.setInterval(e,n,...t):setInterval(e,n,...t)},clearInterval(e){const{delegate:n}=JE;return(n?.clearInterval||clearInterval)(e)},delegate:void 0};class KN extends ZZ{constructor(n,t){super(n,t),this.scheduler=n,this.work=t,this.pending=!1}schedule(n,t=0){var r;if(this.closed)return this;this.state=n;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(n,t,r=0){return JE.setInterval(n.flush.bind(n,this),r)}recycleAsyncId(n,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&JE.clearInterval(t)}execute(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(n,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,t){let i,r=!1;try{this.work(n)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:n,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ye(r,this),null!=n&&(this.id=this.recycleAsyncId(t,n,null)),this.delay=null,super.unsubscribe()}}}const nH={now:()=>(nH.delegate||Date).now(),delegate:void 0};class eC{constructor(n,t=eC.now){this.schedulerActionCtor=n,this.now=t}schedule(n,t=0,r){return new this.schedulerActionCtor(this,n).schedule(r,t)}}eC.now=nH.now;class QN extends eC{constructor(n,t=eC.now){super(n,t),this.actions=[],this._active=!1}flush(n){const{actions:t}=this;if(this._active)return void t.push(n);let r;this._active=!0;do{if(r=n.execute(n.state,n.delay))break}while(n=t.shift());if(this._active=!1,r){for(;n=t.shift();)n.unsubscribe();throw r}}}const tC=new QN(KN),YZ=tC,rH={leading:!0,trailing:!1};function iH(e=0,n,t=YZ){let r=-1;return null!=n&&(hu(n)?t=n:r=n),new B(i=>{let o=function $Z(e){return e instanceof Date&&!isNaN(e)}(e)?+e-t.now():e;o<0&&(o=0);let d=0;return t.schedule(function(){i.closed||(i.next(d++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function _l(e,n){return ve((t,r)=>{let i=null,o=0,d=!1;const f=()=>d&&!i&&r.complete();t.subscribe(we(r,g=>{i?.unsubscribe();let _=0;const C=o++;Tn(e(g,C)).subscribe(i=we(r,S=>r.next(n?n(g,S,C,_++):S),()=>{i=null,f()}))},()=>{d=!0,f()}))})}class qN{constructor(n){this.changes=n}static of(n){return new qN(n)}notEmpty(n){if(this.changes[n]){const t=this.changes[n].currentValue;if(null!=t)return qn(t)}return La}has(n){return this.changes[n]?qn(this.changes[n].currentValue):La}notFirst(n){return this.changes[n]&&!this.changes[n].isFirstChange()?qn(this.changes[n].currentValue):La}notFirstAndEmpty(n){if(this.changes[n]&&!this.changes[n].isFirstChange()){const t=this.changes[n].currentValue;if(null!=t)return qn(t)}return La}}const aH=new on("NGX_ECHARTS_CONFIG");let nC=(()=>{class e{constructor(t,r,i){this.el=r,this.ngZone=i,this.autoResize=!0,this.loadingType="default",this.chartInit=new Mn,this.optionsError=new Mn,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartPieSelectChanged=this.createLazyEvent("pieselectchanged"),this.chartPieSelected=this.createLazyEvent("pieselected"),this.chartPieUnselected=this.createLazyEvent("pieunselected"),this.chartMapSelectChanged=this.createLazyEvent("mapselectchanged"),this.chartMapSelected=this.createLazyEvent("mapselected"),this.chartMapUnselected=this.createLazyEvent("mapunselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartFocusNodeAdjacency=this.createLazyEvent("focusnodeadjacency"),this.chartUnfocusNodeAdjacency=this.createLazyEvent("unfocusnodeadjacency"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.animationFrameID=null,this.resize$=new ne,this.echarts=t.echarts}ngOnChanges(t){const r=qN.of(t);r.notFirstAndEmpty("options").subscribe(i=>this.onOptionsChange(i)),r.notFirstAndEmpty("merge").subscribe(i=>this.setOption(i)),r.has("loading").subscribe(i=>this.toggleLoading(!!i)),r.notFirst("theme").subscribe(()=>this.refreshChart())}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe(function KZ(e,n=tC,t=rH){const r=iH(e,n);return function XZ(e,n=rH){return ve((t,r)=>{const{leading:i,trailing:o}=n;let d=!1,f=null,g=null,_=!1;const C=()=>{g?.unsubscribe(),g=null,o&&(z(),_&&r.complete())},S=()=>{g=null,_&&r.complete()},k=te=>g=Tn(e(te)).subscribe(we(r,C,S)),z=()=>{if(d){d=!1;const te=f;f=null,r.next(te),!_&&k(te)}};t.subscribe(we(r,te=>{d=!0,f=te,(!g||g.closed)&&(i?z():k(te))},()=>{_=!0,(!(o&&d&&g)||g.closed)&&r.complete()}))})}(()=>r,t)}(100,tC,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(()=>{this.animationFrameID=window.requestAnimationFrame(()=>this.resize$.next())})),this.resizeOb.observe(this.el.nativeElement))}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(t){this.chart&&(t?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading())}setOption(t,r){if(this.chart)try{this.chart.setOption(t,r)}catch(i){console.error(i),this.optionsError.emit(i)}}refreshChart(){var t=this;return qE(function*(){t.dispose(),yield t.initChart()})()}createChart(){const t=this.el.nativeElement;if(window&&window.getComputedStyle){const r=window.getComputedStyle(t,null).getPropertyValue("height");(!r||"0px"===r)&&(!t.style.height||"0px"===t.style.height)&&(t.style.height="400px")}return this.ngZone.runOutsideAngular(()=>("function"==typeof this.echarts?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:i})=>i(t,this.theme,this.initOpts)))}initChart(){var t=this;return qE(function*(){yield t.onOptionsChange(t.options),t.merge&&t.chart&&t.setOption(t.merge)})()}onOptionsChange(t){var r=this;return qE(function*(){!t||(r.chart||(r.chart=yield r.createChart(),r.chartInit.emit(r.chart)),r.setOption(r.options,!0))})()}createLazyEvent(t){return this.chartInit.pipe(_l(r=>new B(i=>(r.on(t,o=>this.ngZone.run(()=>i.next(o))),()=>{this.chart&&(this.chart.isDisposed()||r.off(t))}))))}}return e.\u0275fac=function(t){return new(t||e)(Xe(aH),Xe(kr),Xe(rr))},e.\u0275dir=Dn({type:e,selectors:[["echarts"],["","echarts",""]],inputs:{options:"options",theme:"theme",loading:"loading",initOpts:"initOpts",merge:"merge",autoResize:"autoResize",loadingType:"loadingType",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartPieSelectChanged:"chartPieSelectChanged",chartPieSelected:"chartPieSelected",chartPieUnselected:"chartPieUnselected",chartMapSelectChanged:"chartMapSelectChanged",chartMapSelected:"chartMapSelected",chartMapUnselected:"chartMapUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartFocusNodeAdjacency:"chartFocusNodeAdjacency",chartUnfocusNodeAdjacency:"chartUnfocusNodeAdjacency",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],features:[Ki]}),e})(),QZ=(()=>{class e{static forRoot(t){return{ngModule:e,providers:[{provide:aH,useValue:t}]}}static forChild(){return{ngModule:e}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({}),e})();const{isArray:qZ}=Array,{getPrototypeOf:JZ,prototype:e9,keys:t9}=Object;function oH(e){if(1===e.length){const n=e[0];if(qZ(n))return{args:n,keys:null};if(function n9(e){return e&&"object"==typeof e&&JZ(e)===e9}(n)){const t=t9(n);return{args:t.map(r=>n[r]),keys:t}}}return{args:e,keys:null}}const{isArray:r9}=Array;function JN(e){return Ae(n=>function a9(e,n){return r9(n)?e(...n):e(n)}(e,n))}function sH(e,n){return e.reduce((t,r,i)=>(t[r]=n[i],t),{})}function lH(...e){const n=Bc(e),{args:t,keys:r}=oH(e),i=new B(o=>{const{length:d}=t;if(!d)return void o.complete();const f=new Array(d);let g=d,_=d;for(let C=0;C<d;C++){let S=!1;Tn(t[C]).subscribe(we(o,k=>{S||(S=!0,_--),f[C]=k},()=>g--,void 0,()=>{(!g||!S)&&(_||o.next(r?sH(r,f):f),o.complete())}))}});return n?i.pipe(JN(n)):i}let cH=(()=>{class e{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return e.\u0275fac=function(t){return new(t||e)(Xe(hc),Xe(kr))},e.\u0275dir=Dn({type:e}),e})(),xg=(()=>{class e extends cH{}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Gi(e)))(r||e)}}(),e.\u0275dir=Dn({type:e,features:[Gn]}),e})();const Xo=new on("NgValueAccessor"),s9={provide:Xo,useExisting:zr(()=>rC),multi:!0},c9=new on("CompositionEventMode");let rC=(()=>{class e extends cH{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function l9(){const e=Vs()?Vs().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return e.\u0275fac=function(t){return new(t||e)(Xe(hc),Xe(kr),Xe(c9,8))},e.\u0275dir=Dn({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&zt("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[Gr([s9]),Gn]}),e})();function uf(e){return null==e||("string"==typeof e||Array.isArray(e))&&0===e.length}function dH(e){return null!=e&&"number"==typeof e.length}const vo=new on("NgValidators"),df=new on("NgAsyncValidators"),d9=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class $u{static min(n){return hH(n)}static max(n){return fH(n)}static required(n){return function pH(e){return uf(e.value)?{required:!0}:null}(n)}static requiredTrue(n){return function gH(e){return!0===e.value?null:{required:!0}}(n)}static email(n){return function vH(e){return uf(e.value)||d9.test(e.value)?null:{email:!0}}(n)}static minLength(n){return function mH(e){return n=>uf(n.value)||!dH(n.value)?null:n.value.length<e?{minlength:{requiredLength:e,actualLength:n.value.length}}:null}(n)}static maxLength(n){return function _H(e){return n=>dH(n.value)&&n.value.length>e?{maxlength:{requiredLength:e,actualLength:n.value.length}}:null}(n)}static pattern(n){return function yH(e){if(!e)return eA;let n,t;return"string"==typeof e?(t="","^"!==e.charAt(0)&&(t+="^"),t+=e,"$"!==e.charAt(e.length-1)&&(t+="$"),n=new RegExp(t)):(t=e.toString(),n=e),r=>{if(uf(r.value))return null;const i=r.value;return n.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(n)}static nullValidator(n){return null}static compose(n){return DH(n)}static composeAsync(n){return MH(n)}}function hH(e){return n=>{if(uf(n.value)||uf(e))return null;const t=parseFloat(n.value);return!isNaN(t)&&t<e?{min:{min:e,actual:n.value}}:null}}function fH(e){return n=>{if(uf(n.value)||uf(e))return null;const t=parseFloat(n.value);return!isNaN(t)&&t>e?{max:{max:e,actual:n.value}}:null}}function eA(e){return null}function bH(e){return null!=e}function xH(e){return jp(e)?Rn(e):e}function CH(e){let n={};return e.forEach(t=>{n=null!=t?{...n,...t}:n}),0===Object.keys(n).length?null:n}function wH(e,n){return n.map(t=>t(e))}function SH(e){return e.map(n=>function h9(e){return!e.validate}(n)?n:t=>n.validate(t))}function DH(e){if(!e)return null;const n=e.filter(bH);return 0==n.length?null:function(t){return CH(wH(t,n))}}function eF(e){return null!=e?DH(SH(e)):null}function MH(e){if(!e)return null;const n=e.filter(bH);return 0==n.length?null:function(t){return lH(wH(t,n).map(xH)).pipe(Ae(CH))}}function tF(e){return null!=e?MH(SH(e)):null}function TH(e,n){return null===e?[n]:Array.isArray(e)?[...e,n]:[e,n]}function EH(e){return e._rawValidators}function AH(e){return e._rawAsyncValidators}function nF(e){return e?Array.isArray(e)?e:[e]:[]}function tA(e,n){return Array.isArray(e)?e.includes(n):e===n}function IH(e,n){const t=nF(n);return nF(e).forEach(i=>{tA(t,i)||t.push(i)}),t}function PH(e,n){return nF(n).filter(t=>!tA(e,t))}class RH{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=eF(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=tF(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,t){return!!this.control&&this.control.hasError(n,t)}getError(n,t){return this.control?this.control.getError(n,t):null}}class Us extends RH{get formDirective(){return null}get path(){return null}}class Ku extends RH{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class LH{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let hf=(()=>{class e extends LH{constructor(t){super(t)}}return e.\u0275fac=function(t){return new(t||e)(Xe(Ku,2))},e.\u0275dir=Dn({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&ui("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Gn]}),e})(),OH=(()=>{class e extends LH{constructor(t){super(t)}}return e.\u0275fac=function(t){return new(t||e)(Xe(Us,10))},e.\u0275dir=Dn({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&ui("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Gn]}),e})();const iC="VALID",rA="INVALID",iy="PENDING",aC="DISABLED";function oF(e){return(iA(e)?e.validators:e)||null}function NH(e){return Array.isArray(e)?eF(e):e||null}function sF(e,n){return(iA(n)?n.asyncValidators:e)||null}function FH(e){return Array.isArray(e)?tF(e):e||null}function iA(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function BH(e,n,t){const r=e.controls;if(!(n?Object.keys(r):r).length)throw new Jt(1e3,"");if(!r[t])throw new Jt(1001,"")}function VH(e,n,t){e._forEachChild((r,i)=>{if(void 0===t[i])throw new Jt(1002,"")})}class aA{constructor(n,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=t,this._composedValidatorFn=NH(this._rawValidators),this._composedAsyncValidatorFn=FH(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===iC}get invalid(){return this.status===rA}get pending(){return this.status==iy}get disabled(){return this.status===aC}get enabled(){return this.status!==aC}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=NH(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=FH(n)}addValidators(n){this.setValidators(IH(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(IH(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(PH(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(PH(n,this._rawAsyncValidators))}hasValidator(n){return tA(this._rawValidators,n)}hasAsyncValidator(n){return tA(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=iy,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=aC,this.errors=null,this._forEachChild(r=>{r.disable({...n,onlySelf:!0})}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=iC,this._forEachChild(r=>{r.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===iC||this.status===iy)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?aC:iC}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=iy,this._hasOwnPendingAsyncValidator=!0;const t=xH(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,t={}){this.errors=n,this._updateControlsErrors(!1!==t.emitEvent)}get(n){let t=n;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(n,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[n]:null}hasError(n,t){return!!this.getError(n,t)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new Mn,this.statusChanges=new Mn}_calculateStatus(){return this._allControlsDisabled()?aC:this.errors?rA:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(iy)?iy:this._anyControlsHaveStatus(rA)?rA:iC}_anyControlsHaveStatus(n){return this._anyControls(t=>t.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){iA(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}}class ay extends aA{constructor(n,t,r){super(oF(t),sF(r,t)),this.controls=n,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,t){return this.controls[n]?this.controls[n]:(this.controls[n]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(n,t,r={}){this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(n,t={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(n,t,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],t&&this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,t={}){VH(this,0,n),Object.keys(n).forEach(r=>{BH(this,!0,r),this.controls[r].setValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(n,t={}){null!=n&&(Object.keys(n).forEach(r=>{const i=this.controls[r];i&&i.patchValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(n={},t={}){this._forEachChild((r,i)=>{r.reset(n[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(n,t,r)=>(n[r]=t.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&n(r,t)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&n(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(n,t){let r=n;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}class zH extends ay{}function oA(e,n){return[...n.path,e]}function oC(e,n){lF(e,n),n.valueAccessor.writeValue(e.value),e.disabled&&n.valueAccessor.setDisabledState?.(!0),function b9(e,n){n.valueAccessor.registerOnChange(t=>{e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&HH(e,n)})}(e,n),function C9(e,n){const t=(r,i)=>{n.valueAccessor.writeValue(r),i&&n.viewToModelUpdate(r)};e.registerOnChange(t),n._registerOnDestroy(()=>{e._unregisterOnChange(t)})}(e,n),function x9(e,n){n.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&HH(e,n),"submit"!==e.updateOn&&e.markAsTouched()})}(e,n),function y9(e,n){if(n.valueAccessor.setDisabledState){const t=r=>{n.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(t),n._registerOnDestroy(()=>{e._unregisterOnDisabledChange(t)})}}(e,n)}function sA(e,n,t=!0){const r=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(r),n.valueAccessor.registerOnTouched(r)),cA(e,n),e&&(n._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function lA(e,n){e.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(n)})}function lF(e,n){const t=EH(e);null!==n.validator?e.setValidators(TH(t,n.validator)):"function"==typeof t&&e.setValidators([t]);const r=AH(e);null!==n.asyncValidator?e.setAsyncValidators(TH(r,n.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();lA(n._rawValidators,i),lA(n._rawAsyncValidators,i)}function cA(e,n){let t=!1;if(null!==e){if(null!==n.validator){const i=EH(e);if(Array.isArray(i)&&i.length>0){const o=i.filter(d=>d!==n.validator);o.length!==i.length&&(t=!0,e.setValidators(o))}}if(null!==n.asyncValidator){const i=AH(e);if(Array.isArray(i)&&i.length>0){const o=i.filter(d=>d!==n.asyncValidator);o.length!==i.length&&(t=!0,e.setAsyncValidators(o))}}}const r=()=>{};return lA(n._rawValidators,r),lA(n._rawAsyncValidators,r),t}function HH(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function UH(e,n){lF(e,n)}function cF(e,n){if(!e.hasOwnProperty("model"))return!1;const t=e.model;return!!t.isFirstChange()||!Object.is(n,t.currentValue)}function WH(e,n){e._syncPendingControls(),n.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function uF(e,n){if(!n)return null;let t,r,i;return Array.isArray(n),n.forEach(o=>{o.constructor===rC?t=o:function D9(e){return Object.getPrototypeOf(e.constructor)===xg}(o)?r=o:i=o}),i||r||t||null}const T9={provide:Us,useExisting:zr(()=>lC)},sC=(()=>Promise.resolve())();let lC=(()=>{class e extends Us{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new Mn,this.form=new ay({},eF(t),tF(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){sC.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),oC(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){sC.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){sC.then(()=>{const r=this._findContainer(t.path),i=new ay({});UH(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){sC.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){sC.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,WH(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return e.\u0275fac=function(t){return new(t||e)(Xe(vo,10),Xe(df,10))},e.\u0275dir=Dn({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&zt("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Gr([T9]),Gn]}),e})();function jH(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}function ZH(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const ou=class extends aA{constructor(n=null,t,r){super(oF(t),sF(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),iA(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=ZH(n)?n.value:n)}setValue(n,t={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(n,t={}){this.setValue(n,t)}reset(n=this.defaultValue,t={}){this._applyFormState(n),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){jH(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){jH(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){ZH(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},I9={provide:Ku,useExisting:zr(()=>ff)},$H=(()=>Promise.resolve())();let ff=(()=>{class e extends Ku{constructor(t,r,i,o,d){super(),this._changeDetectorRef=d,this.control=new ou,this._registered=!1,this.update=new Mn,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=uF(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),cF(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){oC(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){$H.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&pl(r);$H.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?oA(t,this._parent):[t]}}return e.\u0275fac=function(t){return new(t||e)(Xe(Us,9),Xe(vo,10),Xe(df,10),Xe(Xo,10),Xe(Wi,8))},e.\u0275dir=Dn({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Gr([I9]),Gn,Ki]}),e})(),KH=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Dn({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})();const P9={provide:Xo,useExisting:zr(()=>dF),multi:!0};let dF=(()=>{class e extends xg{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Gi(e)))(r||e)}}(),e.\u0275dir=Dn({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&zt("input",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},features:[Gr([P9]),Gn]}),e})(),QH=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({}),e})();const hF=new on("NgModelWithFormControlWarning"),k9={provide:Ku,useExisting:zr(()=>fF)};let fF=(()=>{class e extends Ku{constructor(t,r,i,o){super(),this._ngModelWarningConfig=o,this.update=new Mn,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=uF(0,i)}set isDisabled(t){}ngOnChanges(t){if(this._isControlChanged(t)){const r=t.form.previousValue;r&&sA(r,this,!1),oC(this.form,this),this.form.updateValueAndValidity({emitEvent:!1})}cF(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&sA(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return e._ngModelWarningSentOnce=!1,e.\u0275fac=function(t){return new(t||e)(Xe(vo,10),Xe(df,10),Xe(Xo,10),Xe(hF,8))},e.\u0275dir=Dn({type:e,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Gr([k9]),Gn,Ki]}),e})();const N9={provide:Us,useExisting:zr(()=>oy)};let oy=(()=>{class e extends Us{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Mn,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(cA(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return oC(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){sA(t.control||null,t,!1),function M9(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,WH(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(sA(r||null,t),(e=>e instanceof ou)(i)&&(oC(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);UH(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function w9(e,n){return cA(e,n)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){lF(this.form,this),this._oldForm&&cA(this._oldForm,this)}_checkFormPresent(){}}return e.\u0275fac=function(t){return new(t||e)(Xe(vo,10),Xe(df,10))},e.\u0275dir=Dn({type:e,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&zt("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Gr([N9]),Gn,Ki]}),e})();const V9={provide:Ku,useExisting:zr(()=>vF)};let vF=(()=>{class e extends Ku{constructor(t,r,i,o,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new Mn,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=uF(0,o)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),cF(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return oA(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return e._ngModelWarningSentOnce=!1,e.\u0275fac=function(t){return new(t||e)(Xe(Us,13),Xe(vo,10),Xe(df,10),Xe(Xo,10),Xe(hF,8))},e.\u0275dir=Dn({type:e,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Gr([V9]),Gn,Ki]}),e})();function i4(e){return"number"==typeof e?e:parseFloat(e)}let Cg=(()=>{class e{constructor(){this._validator=eA}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):eA,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Dn({type:e,features:[Ki]}),e})();const Z9={provide:vo,useExisting:zr(()=>yF),multi:!0};let yF=(()=>{class e extends Cg{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>i4(t),this.createValidator=t=>fH(t)}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Gi(e)))(r||e)}}(),e.\u0275dir=Dn({type:e,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&Er("max",r._enabled?r.max:null)},inputs:{max:"max"},features:[Gr([Z9]),Gn]}),e})();const Y9={provide:vo,useExisting:zr(()=>bF),multi:!0};let bF=(()=>{class e extends Cg{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>i4(t),this.createValidator=t=>hH(t)}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Gi(e)))(r||e)}}(),e.\u0275dir=Dn({type:e,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&Er("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[Gr([Y9]),Gn]}),e})(),c4=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[QH]}),e})(),u4=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[c4]}),e})(),CF=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:hF,useValue:t.warnOnNgModelWithFormControl}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[c4]}),e})();class d4 extends aA{constructor(n,t,r){super(oF(t),sF(r,t)),this.controls=n,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[this._adjustIndex(n)]}push(n,t={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(n,t,r={}){this.controls.splice(n,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(n,t={}){let r=this._adjustIndex(n);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(n,t,r={}){let i=this._adjustIndex(n);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,t={}){VH(this,0,n),n.forEach((r,i)=>{BH(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(n,t={}){null!=n&&(n.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(n=[],t={}){this._forEachChild((r,i)=>{r.reset(n[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(n=>n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_adjustIndex(n){return n<0?n+this.length:n}_syncPendingControls(){let n=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){this.controls.forEach((t,r)=>{n(t,r)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(t=>t.enabled&&n(t))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}_find(n){return this.at(n)??null}}function h4(e){return!!e&&(void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn)}let e7=(()=>{class e{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new e;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let o={};return h4(r)?o=r:null!==r&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new ay(i,o)}record(t,r=null){const i=this._reduceControls(t);return new zH(i,r)}control(t,r,i){let o={};return this.useNonNullable?(h4(r)?o=r:(o.validators=r,o.asyncValidators=i),new ou(t,{...o,nonNullable:!0})):new ou(t,r,i)}array(t,r,i){const o=t.map(d=>this._createControl(d));return new d4(o,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof ou||t instanceof aA?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:CF}),e})();class Hl extends ne{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){const{hasError:n,thrownError:t,_value:r}=this;if(n)throw t;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}}const dA=Se(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function wF(...e){const n=id(e),t=Bc(e),{args:r,keys:i}=oH(e);if(0===r.length)return Rn([],n);const o=new B(function t7(e,n,t=M){return r=>{f4(n,()=>{const{length:i}=e,o=new Array(i);let d=i,f=i;for(let g=0;g<i;g++)f4(n,()=>{const _=Rn(e[g],n);let C=!1;_.subscribe(we(r,S=>{o[g]=S,C||(C=!0,f--),f||r.next(t(o.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,n,i?d=>sH(i,d):M));return t?o.pipe(JN(t)):o}function f4(e,n,t){e?Sa(t,e,n):n()}function hA(...e){return function n7(){return $s(1)}()(Rn(e,id(e)))}function cC(e){return new B(n=>{Tn(e()).subscribe(n)})}function sy(e,n){const t=ue(e)?e:()=>e,r=i=>i.error(t());return new B(n?i=>n.schedule(r,0,i):r)}function SF(){return ve((e,n)=>{let t=null;e._refCount++;const r=we(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(t=null);const i=e._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),n.unsubscribe()});e.subscribe(r),r.closed||(t=e.connect())})}class p4 extends B{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,fe(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new ge;const t=this.getSubject();n.add(this.source.subscribe(we(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=ge.EMPTY)}return n}refCount(){return SF()(this)}}function mo(e){return e<=0?()=>La:ve((n,t)=>{let r=0;n.subscribe(we(t,i=>{++r<=e&&(t.next(i),e<=r&&t.complete())}))})}function yl(...e){const n=id(e);return ve((t,r)=>{(n?hA(e,t,n):hA(e,t)).subscribe(r)})}function qi(e,n){return ve((t,r)=>{let i=0;t.subscribe(we(r,o=>e.call(n,o,i++)&&r.next(o)))})}function fA(e){return ve((n,t)=>{let r=!1;n.subscribe(we(t,i=>{r=!0,t.next(i)},()=>{r||t.next(e),t.complete()}))})}function g4(e=r7){return ve((n,t)=>{let r=!1;n.subscribe(we(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(e())))})}function r7(){return new dA}function pf(e,n){const t=arguments.length>=2;return r=>r.pipe(e?qi((i,o)=>e(i,o,r)):M,mo(1),t?fA(n):g4(()=>new dA))}function gf(e,n){return ue(n)?ua(e,n,1):ua(e,1)}function _o(e,n,t){const r=ue(e)||n||t?{next:e,error:n,complete:t}:e;return r?ve((i,o)=>{var d;null===(d=r.subscribe)||void 0===d||d.call(r);let f=!0;i.subscribe(we(o,g=>{var _;null===(_=r.next)||void 0===_||_.call(r,g),o.next(g)},()=>{var g;f=!1,null===(g=r.complete)||void 0===g||g.call(r),o.complete()},g=>{var _;f=!1,null===(_=r.error)||void 0===_||_.call(r,g),o.error(g)},()=>{var g,_;f&&(null===(g=r.unsubscribe)||void 0===g||g.call(r)),null===(_=r.finalize)||void 0===_||_.call(r)}))}):M}function Xd(e){return ve((n,t)=>{let o,r=null,i=!1;r=n.subscribe(we(t,void 0,void 0,d=>{o=Tn(e(d,Xd(e)(n))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function i7(e,n,t,r,i){return(o,d)=>{let f=t,g=n,_=0;o.subscribe(we(d,C=>{const S=_++;g=f?e(g,C,S):(f=!0,C),r&&d.next(g)},i&&(()=>{f&&d.next(g),d.complete()})))}}function v4(e,n){return ve(i7(e,n,arguments.length>=2,!0))}function DF(e){return e<=0?()=>La:ve((n,t)=>{let r=[];n.subscribe(we(t,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function m4(e,n){const t=arguments.length>=2;return r=>r.pipe(e?qi((i,o)=>e(i,o,r)):M,DF(1),t?fA(n):g4(()=>new dA))}function _4(e,n=!1){return ve((t,r)=>{let i=0;t.subscribe(we(r,o=>{const d=e(o,i++);(d||n)&&r.next(o),!d&&r.complete()}))})}function MF(e){return Ae(()=>e)}function pA(e){return ve((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}const di="primary",uC=Symbol("RouteTitle");class a7{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ly(e){return new a7(e)}function o7(e,n,t){const r=t.path.split("/");if(r.length>e.length||"full"===t.pathMatch&&(n.hasChildren()||r.length<e.length))return null;const i={};for(let o=0;o<r.length;o++){const d=r[o],f=e[o];if(d.startsWith(":"))i[d.substring(1)]=f;else if(d!==f.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function Qu(e,n){const t=e?Object.keys(e):void 0,r=n?Object.keys(n):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!y4(e[i],n[i]))return!1;return!0}function y4(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;const t=[...e].sort(),r=[...n].sort();return t.every((i,o)=>r[o]===i)}return e===n}function b4(e){return Array.prototype.concat.apply([],e)}function x4(e){return e.length>0?e[e.length-1]:null}function _s(e,n){for(const t in e)e.hasOwnProperty(t)&&n(e[t],t)}function vf(e){return ox(e)?e:jp(e)?Rn(Promise.resolve(e)):qn(e)}const c7={exact:function S4(e,n,t){if(!Sg(e.segments,n.segments)||!gA(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children)if(!e.children[r]||!S4(e.children[r],n.children[r],t))return!1;return!0},subset:D4},C4={exact:function u7(e,n){return Qu(e,n)},subset:function d7(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>y4(e[t],n[t]))},ignored:()=>!0};function w4(e,n,t){return c7[t.paths](e.root,n.root,t.matrixParams)&&C4[t.queryParams](e.queryParams,n.queryParams)&&!("exact"===t.fragment&&e.fragment!==n.fragment)}function D4(e,n,t){return M4(e,n,n.segments,t)}function M4(e,n,t,r){if(e.segments.length>t.length){const i=e.segments.slice(0,t.length);return!(!Sg(i,t)||n.hasChildren()||!gA(i,t,r))}if(e.segments.length===t.length){if(!Sg(e.segments,t)||!gA(e.segments,t,r))return!1;for(const i in n.children)if(!e.children[i]||!D4(e.children[i],n.children[i],r))return!1;return!0}{const i=t.slice(0,e.segments.length),o=t.slice(e.segments.length);return!!(Sg(e.segments,i)&&gA(e.segments,i,r)&&e.children[di])&&M4(e.children[di],n,o,r)}}function gA(e,n,t){return n.every((r,i)=>C4[t](e[i].parameters,r.parameters))}class wg{constructor(n,t,r){this.root=n,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ly(this.queryParams)),this._queryParamMap}toString(){return p7.serialize(this)}}class fi{constructor(n,t){this.segments=n,this.children=t,this.parent=null,_s(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vA(this)}}class dC{constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ly(this.parameters)),this._parameterMap}toString(){return I4(this)}}function Sg(e,n){return e.length===n.length&&e.every((t,r)=>t.path===n[r].path)}let T4=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:function(){return new EF},providedIn:"root"}),e})();class EF{parse(n){const t=new w7(n);return new wg(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){const t=`/${hC(n.root,!0)}`,r=function m7(e){const n=Object.keys(e).map(t=>{const r=e[t];return Array.isArray(r)?r.map(i=>`${mA(t)}=${mA(i)}`).join("&"):`${mA(t)}=${mA(r)}`}).filter(t=>!!t);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${t}${r}${"string"==typeof n.fragment?`#${function g7(e){return encodeURI(e)}(n.fragment)}`:""}`}}const p7=new EF;function vA(e){return e.segments.map(n=>I4(n)).join("/")}function hC(e,n){if(!e.hasChildren())return vA(e);if(n){const t=e.children[di]?hC(e.children[di],!1):"",r=[];return _s(e.children,(i,o)=>{o!==di&&r.push(`${o}:${hC(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function f7(e,n){let t=[];return _s(e.children,(r,i)=>{i===di&&(t=t.concat(n(r,i)))}),_s(e.children,(r,i)=>{i!==di&&(t=t.concat(n(r,i)))}),t}(e,(r,i)=>i===di?[hC(e.children[di],!1)]:[`${i}:${hC(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[di]?`${vA(e)}/${t[0]}`:`${vA(e)}/(${t.join("//")})`}}function E4(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mA(e){return E4(e).replace(/%3B/gi,";")}function AF(e){return E4(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _A(e){return decodeURIComponent(e)}function A4(e){return _A(e.replace(/\+/g,"%20"))}function I4(e){return`${AF(e.path)}${function v7(e){return Object.keys(e).map(n=>`;${AF(n)}=${AF(e[n])}`).join("")}(e.parameters)}`}const _7=/^[^\/()?;=#]+/;function yA(e){const n=e.match(_7);return n?n[0]:""}const y7=/^[^=?&#]+/,x7=/^[^&#]+/;class w7{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new fi([],{}):new fi([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(r[di]=new fi(n,t)),r}parseSegment(){const n=yA(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Jt(4009,!1);return this.capture(n),new dC(_A(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const t=yA(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=yA(this.remaining);i&&(r=i,this.capture(r))}n[_A(t)]=_A(r)}parseQueryParam(n){const t=function b7(e){const n=e.match(y7);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function C7(e){const n=e.match(x7);return n?n[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const i=A4(t),o=A4(r);if(n.hasOwnProperty(i)){let d=n[i];Array.isArray(d)||(d=[d],n[i]=d),d.push(o)}else n[i]=o}parseParens(n){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=yA(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Jt(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=di);const d=this.parseChildren();t[o]=1===Object.keys(d).length?d[di]:new fi([],d),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new Jt(4011,!1)}}function IF(e){return e.segments.length>0?new fi([],{[di]:e}):e}function bA(e){const n={};for(const r of Object.keys(e.children)){const o=bA(e.children[r]);(o.segments.length>0||o.hasChildren())&&(n[r]=o)}return function S7(e){if(1===e.numberOfChildren&&e.children[di]){const n=e.children[di];return new fi(e.segments.concat(n.segments),n.children)}return e}(new fi(e.segments,n))}function Dg(e){return e instanceof wg}function T7(e,n,t,r,i){if(0===t.length)return cy(n.root,n.root,n.root,r,i);const o=function L4(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new R4(!0,0,e);let n=0,t=!1;const r=e.reduce((i,o,d)=>{if("object"==typeof o&&null!=o){if(o.outlets){const f={};return _s(o.outlets,(g,_)=>{f[_]="string"==typeof g?g.split("/"):g}),[...i,{outlets:f}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===d?(o.split("/").forEach((f,g)=>{0==g&&"."===f||(0==g&&""===f?t=!0:".."===f?n++:""!=f&&i.push(f))}),i):[...i,o]},[]);return new R4(t,n,r)}(t);return o.toRoot()?cy(n.root,n.root,new fi([],{}),r,i):function d(g){const _=function A7(e,n,t,r){if(e.isAbsolute)return new uy(n.root,!0,0);if(-1===r)return new uy(t,t===n.root,0);return function O4(e,n,t){let r=e,i=n,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Jt(4005,!1);i=r.segments.length}return new uy(r,!1,i-o)}(t,r+(fC(e.commands[0])?0:1),e.numberOfDoubleDots)}(o,n,e.snapshot?._urlSegment,g),C=_.processChildren?gC(_.segmentGroup,_.index,o.commands):RF(_.segmentGroup,_.index,o.commands);return cy(n.root,_.segmentGroup,C,r,i)}(e.snapshot?._lastPathIndex)}function fC(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function pC(e){return"object"==typeof e&&null!=e&&e.outlets}function cy(e,n,t,r,i){let d,o={};r&&_s(r,(g,_)=>{o[_]=Array.isArray(g)?g.map(C=>`${C}`):`${g}`}),d=e===n?t:P4(e,n,t);const f=IF(bA(d));return new wg(f,o,i)}function P4(e,n,t){const r={};return _s(e.children,(i,o)=>{r[o]=i===n?t:P4(i,n,t)}),new fi(e.segments,r)}class R4{constructor(n,t,r){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=r,n&&r.length>0&&fC(r[0]))throw new Jt(4003,!1);const i=r.find(pC);if(i&&i!==x4(r))throw new Jt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class uy{constructor(n,t,r){this.segmentGroup=n,this.processChildren=t,this.index=r}}function RF(e,n,t){if(e||(e=new fi([],{})),0===e.segments.length&&e.hasChildren())return gC(e,n,t);const r=function P7(e,n,t){let r=0,i=n;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=t.length)return o;const d=e.segments[i],f=t[r];if(pC(f))break;const g=`${f}`,_=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&_&&"object"==typeof _&&void 0===_.outlets){if(!N4(g,_,d))return o;r+=2}else{if(!N4(g,{},d))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,n,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const o=new fi(e.segments.slice(0,r.pathIndex),{});return o.children[di]=new fi(e.segments.slice(r.pathIndex),e.children),gC(o,0,i)}return r.match&&0===i.length?new fi(e.segments,{}):r.match&&!e.hasChildren()?LF(e,n,t):r.match?gC(e,0,i):LF(e,n,t)}function gC(e,n,t){if(0===t.length)return new fi(e.segments,{});{const r=function I7(e){return pC(e[0])?e[0].outlets:{[di]:e}}(t),i={};return _s(r,(o,d)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[d]=RF(e.children[d],n,o))}),_s(e.children,(o,d)=>{void 0===r[d]&&(i[d]=o)}),new fi(e.segments,i)}}function LF(e,n,t){const r=e.segments.slice(0,n);let i=0;for(;i<t.length;){const o=t[i];if(pC(o)){const g=R7(o.outlets);return new fi(r,g)}if(0===i&&fC(t[0])){r.push(new dC(e.segments[n].path,k4(t[0]))),i++;continue}const d=pC(o)?o.outlets[di]:`${o}`,f=i<t.length-1?t[i+1]:null;d&&f&&fC(f)?(r.push(new dC(d,k4(f))),i+=2):(r.push(new dC(d,{})),i++)}return new fi(r,{})}function R7(e){const n={};return _s(e,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(n[r]=LF(new fi([],{}),0,t))}),n}function k4(e){const n={};return _s(e,(t,r)=>n[r]=`${t}`),n}function N4(e,n,t){return e==t.path&&Qu(n,t.parameters)}class $d{constructor(n,t){this.id=n,this.url=t}}class OF extends $d{constructor(n,t,r="imperative",i=null){super(n,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Mg extends $d{constructor(n,t,r){super(n,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class xA extends $d{constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class F4 extends $d{constructor(n,t,r,i){super(n,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class L7 extends $d{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class O7 extends $d{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class k7 extends $d{constructor(n,t,r,i,o){super(n,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class N7 extends $d{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class F7 extends $d{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class B7{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class V7{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class z7{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class H7{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class U7{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class G7{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class B4{constructor(n,t,r){this.routerEvent=n,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class V4{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){const t=kF(n,this._root);return t?t.children.map(r=>r.value):[]}firstChild(n){const t=kF(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){const t=NF(n,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return NF(n,this._root).map(t=>t.value)}}function kF(e,n){if(e===n.value)return n;for(const t of n.children){const r=kF(e,t);if(r)return r}return null}function NF(e,n){if(e===n.value)return[n];for(const t of n.children){const r=NF(e,t);if(r.length)return r.unshift(n),r}return[]}class Kd{constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}}function dy(e){const n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}class z4 extends V4{constructor(n,t){super(n),this.snapshot=t,FF(this,n)}toString(){return this.snapshot.toString()}}function H4(e,n){const t=function j7(e,n){const d=new CA([],{},{},"",{},di,n,null,e.root,-1,{});return new G4("",new Kd(d,[]))}(e,n),r=new Hl([new dC("",{})]),i=new Hl({}),o=new Hl({}),d=new Hl({}),f=new Hl(""),g=new Tg(r,i,d,f,o,di,n,t.root);return g.snapshot=t.root,new z4(new Kd(g,[]),t)}class Tg{constructor(n,t,r,i,o,d,f,g){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=d,this.component=f,this.title=this.data?.pipe(Ae(_=>_[uC]))??qn(void 0),this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ae(n=>ly(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ae(n=>ly(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function U4(e,n="emptyOnly"){const t=e.pathFromRoot;let r=0;if("always"!==n)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function Z7(e){return e.reduce((n,t)=>({params:{...n.params,...t.params},data:{...n.data,...t.data},resolve:{...t.data,...n.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class CA{constructor(n,t,r,i,o,d,f,g,_,C,S,k){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=d,this.component=f,this.title=this.data?.[uC],this.routeConfig=g,this._urlSegment=_,this._lastPathIndex=C,this._correctedLastPathIndex=k??C,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ly(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ly(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class G4 extends V4{constructor(n,t){super(t),this.url=n,FF(this,t)}toString(){return W4(this._root)}}function FF(e,n){n.value._routerState=e,n.children.forEach(t=>FF(e,t))}function W4(e){const n=e.children.length>0?` { ${e.children.map(W4).join(", ")} } `:"";return`${e.value}${n}`}function BF(e){if(e.snapshot){const n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,Qu(n.queryParams,t.queryParams)||e.queryParams.next(t.queryParams),n.fragment!==t.fragment&&e.fragment.next(t.fragment),Qu(n.params,t.params)||e.params.next(t.params),function s7(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!Qu(e[t],n[t]))return!1;return!0}(n.url,t.url)||e.url.next(t.url),Qu(n.data,t.data)||e.data.next(t.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function VF(e,n){const t=Qu(e.params,n.params)&&function h7(e,n){return Sg(e,n)&&e.every((t,r)=>Qu(t.parameters,n[r].parameters))}(e.url,n.url);return t&&!(!e.parent!=!n.parent)&&(!e.parent||VF(e.parent,n.parent))}function vC(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=n.value;const i=function X7(e,n,t){return n.children.map(r=>{for(const i of t.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return vC(e,r,i);return vC(e,r)})}(e,n,t);return new Kd(r,i)}{if(e.shouldAttach(n.value)){const o=e.retrieve(n.value);if(null!==o){const d=o.route;return d.value._futureSnapshot=n.value,d.children=n.children.map(f=>vC(e,f)),d}}const r=function $7(e){return new Tg(new Hl(e.url),new Hl(e.params),new Hl(e.queryParams),new Hl(e.fragment),new Hl(e.data),e.outlet,e.component,e)}(n.value),i=n.children.map(o=>vC(e,o));return new Kd(r,i)}}const zF="ngNavigationCancelingError";function j4(e,n){const{redirectTo:t,navigationBehaviorOptions:r}=Dg(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,i=Z4(!1,0,n);return i.url=t,i.navigationBehaviorOptions=r,i}function Z4(e,n,t){const r=new Error("NavigationCancelingError: "+(e||""));return r[zF]=!0,r.cancellationCode=n,t&&(r.url=t),r}function Y4(e){return X4(e)&&Dg(e.url)}function X4(e){return e&&e[zF]}class K7{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new mC,this.attachRef=null}}let mC=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new K7,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const wA=!1;let HF=(()=>{class e{constructor(t,r,i,o,d){this.parentContexts=t,this.location=r,this.changeDetector=o,this.environmentInjector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new Mn,this.deactivateEvents=new Mn,this.attachEvents=new Mn,this.detachEvents=new Mn,this.name=i||di,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Jt(4012,wA);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Jt(4012,wA);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Jt(4012,wA);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Jt(4013,wA);this._activatedRoute=t;const i=this.location,d=t._futureSnapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,g=new Q7(t,f,i.injector);if(r&&function q7(e){return!!e.resolveComponentFactory}(r)){const _=r.resolveComponentFactory(d);this.activated=i.createComponent(_,i.length,g)}else this.activated=i.createComponent(d,{index:i.length,injector:g,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(Xe(mC),Xe(Lo),Ds("name"),Xe(Wi),Xe($c))},e.\u0275dir=Dn({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),e})();class Q7{constructor(n,t,r){this.route=n,this.childContexts=t,this.parent=r}get(n,t){return n===Tg?this.route:n===mC?this.childContexts:this.parent.get(n,t)}}let UF=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Zn({type:e,selectors:[["ng-component"]],standalone:!0,features:[kx],decls:1,vars:0,template:function(t,r){1&t&&Cn(0,"router-outlet")},dependencies:[HF],encapsulation:2}),e})();function $4(e,n){return e.providers&&!e._injector&&(e._injector=eg(e.providers,n,`Route: ${e.path}`)),e._injector??n}function WF(e){const n=e.children&&e.children.map(WF),t=n?{...e,children:n}:{...e};return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==di&&(t.component=UF),t}function Mc(e){return e.outlet||di}function K4(e,n){const t=e.filter(r=>Mc(r)===n);return t.push(...e.filter(r=>Mc(r)!==n)),t}function _C(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){const t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class rY{constructor(n,t,r,i){this.routeReuseStrategy=n,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(n){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,n),BF(this.futureState.root),this.activateChildRoutes(t,r,n)}deactivateChildRoutes(n,t,r){const i=dy(t);n.children.forEach(o=>{const d=o.value.outlet;this.deactivateRoutes(o,i[d],r),delete i[d]}),_s(i,(o,d)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(n,t,r){const i=n.value,o=t?t.value:null;if(i===o)if(i.component){const d=r.getContext(i.outlet);d&&this.deactivateChildRoutes(n,t,d.children)}else this.deactivateChildRoutes(n,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){const r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=dy(n);for(const d of Object.keys(o))this.deactivateRouteAndItsChildren(o[d],i);if(r&&r.outlet){const d=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:d,route:n,contexts:f})}}deactivateRouteAndOutlet(n,t){const r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=dy(n);for(const d of Object.keys(o))this.deactivateRouteAndItsChildren(o[d],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(n,t,r){const i=dy(t);n.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new G7(o.value.snapshot))}),n.children.length&&this.forwardEvent(new H7(n.value.snapshot))}activateRoutes(n,t,r){const i=n.value,o=t?t.value:null;if(BF(i),i===o)if(i.component){const d=r.getOrCreateContext(i.outlet);this.activateChildRoutes(n,t,d.children)}else this.activateChildRoutes(n,t,r);else if(i.component){const d=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),d.children.onOutletReAttached(f.contexts),d.attachRef=f.componentRef,d.route=f.route.value,d.outlet&&d.outlet.attach(f.componentRef,f.route.value),BF(f.route.value),this.activateChildRoutes(n,null,d.children)}else{const f=_C(i.snapshot),g=f?.get(Sd)??null;d.attachRef=null,d.route=i,d.resolver=g,d.injector=f,d.outlet&&d.outlet.activateWith(i,d.injector),this.activateChildRoutes(n,null,d.children)}}else this.activateChildRoutes(n,null,r)}}class Q4{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class SA{constructor(n,t){this.component=n,this.route=t}}function iY(e,n,t){const r=e._root;return yC(r,n?n._root:null,t,[r.value])}function hy(e,n){const t=Symbol(),r=n.get(e,t);return r===t?"function"!=typeof e||function gh(e){return null!==pu(e)}(e)?n.get(e):e:r}function yC(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=dy(n);return e.children.forEach(d=>{(function oY(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,d=n?n.value:null,f=t?t.getContext(e.value.outlet):null;if(d&&o.routeConfig===d.routeConfig){const g=function sY(e,n,t){if("function"==typeof t)return t(e,n);switch(t){case"pathParamsChange":return!Sg(e.url,n.url);case"pathParamsOrQueryParamsChange":return!Sg(e.url,n.url)||!Qu(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!VF(e,n)||!Qu(e.queryParams,n.queryParams);default:return!VF(e,n)}}(d,o,o.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new Q4(r)):(o.data=d.data,o._resolvedData=d._resolvedData),yC(e,n,o.component?f?f.children:null:t,r,i),g&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new SA(f.outlet.component,d))}else d&&bC(n,f,i),i.canActivateChecks.push(new Q4(r)),yC(e,null,o.component?f?f.children:null:t,r,i)})(d,o[d.value.outlet],t,r.concat([d.value]),i),delete o[d.value.outlet]}),_s(o,(d,f)=>bC(d,t.getContext(f),i)),i}function bC(e,n,t){const r=dy(e),i=e.value;_s(r,(o,d)=>{bC(o,i.component?n?n.children.getContext(d):null:n,t)}),t.canDeactivateChecks.push(new SA(i.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,i))}function xC(e){return"function"==typeof e}function jF(e){return e instanceof dA||"EmptyError"===e?.name}const DA=Symbol("INITIAL_VALUE");function fy(){return _l(e=>wF(e.map(n=>n.pipe(mo(1),yl(DA)))).pipe(Ae(n=>{for(const t of n)if(!0!==t){if(t===DA)return DA;if(!1===t||t instanceof wg)return t}return!0}),qi(n=>n!==DA),mo(1)))}function q4(e){return function A(...e){return O(e)}(_o(n=>{if(Dg(n))throw j4(0,n)}),Ae(n=>!0===n))}const ZF={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function J4(e,n,t,r,i){const o=YF(e,n,t);return o.matched?function SY(e,n,t,r){const i=n.canMatch;return i&&0!==i.length?qn(i.map(d=>{const f=hy(d,e);return vf(function fY(e){return e&&xC(e.canMatch)}(f)?f.canMatch(n,t):e.runInContext(()=>f(n,t)))})).pipe(fy(),q4()):qn(!0)}(r=$4(n,r),n,t).pipe(Ae(d=>!0===d?o:{...ZF})):qn(o)}function YF(e,n,t){if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||t.length>0)?{...ZF}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(n.matcher||o7)(t,e,n);if(!i)return{...ZF};const o={};_s(i.posParams,(f,g)=>{o[g]=f.path});const d=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:d,positionalParamSegments:i.posParams??{}}}function MA(e,n,t,r,i="corrected"){if(t.length>0&&function TY(e,n,t){return t.some(r=>TA(e,n,r)&&Mc(r)!==di)}(e,t,r)){const d=new fi(n,function MY(e,n,t,r){const i={};i[di]=r,r._sourceSegment=e,r._segmentIndexShift=n.length;for(const o of t)if(""===o.path&&Mc(o)!==di){const d=new fi([],{});d._sourceSegment=e,d._segmentIndexShift=n.length,i[Mc(o)]=d}return i}(e,n,r,new fi(t,e.children)));return d._sourceSegment=e,d._segmentIndexShift=n.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function EY(e,n,t){return t.some(r=>TA(e,n,r))}(e,t,r)){const d=new fi(e.segments,function DY(e,n,t,r,i,o){const d={};for(const f of r)if(TA(e,t,f)&&!i[Mc(f)]){const g=new fi([],{});g._sourceSegment=e,g._segmentIndexShift="legacy"===o?e.segments.length:n.length,d[Mc(f)]=g}return{...i,...d}}(e,n,t,r,e.children,i));return d._sourceSegment=e,d._segmentIndexShift=n.length,{segmentGroup:d,slicedSegments:t}}const o=new fi(e.segments,e.children);return o._sourceSegment=e,o._segmentIndexShift=n.length,{segmentGroup:o,slicedSegments:t}}function TA(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path}function eU(e,n,t,r){return!!(Mc(e)===r||r!==di&&TA(n,t,e))&&("**"===e.path||YF(n,e,t).matched)}function tU(e,n,t){return 0===n.length&&!e.children[t]}const EA=!1;class AA{constructor(n){this.segmentGroup=n||null}}class nU{constructor(n){this.urlTree=n}}function CC(e){return sy(new AA(e))}function rU(e){return sy(new nU(e))}class RY{constructor(n,t,r,i,o){this.injector=n,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const n=MA(this.urlTree.root,[],[],this.config).segmentGroup,t=new fi(n.segments,n.children);return this.expandSegmentGroup(this.injector,this.config,t,di).pipe(Ae(o=>this.createUrlTree(bA(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Xd(o=>{if(o instanceof nU)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof AA?this.noMatchError(o):o}))}match(n){return this.expandSegmentGroup(this.injector,this.config,n.root,di).pipe(Ae(i=>this.createUrlTree(bA(i),n.queryParams,n.fragment))).pipe(Xd(i=>{throw i instanceof AA?this.noMatchError(i):i}))}noMatchError(n){return new Jt(4002,EA)}createUrlTree(n,t,r){const i=IF(n);return new wg(i,t,r)}expandSegmentGroup(n,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(n,t,r).pipe(Ae(o=>new fi([],o))):this.expandSegment(n,r,t,r.segments,i,!0)}expandChildren(n,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return Rn(i).pipe(gf(o=>{const d=r.children[o],f=K4(t,o);return this.expandSegmentGroup(n,f,d,o).pipe(Ae(g=>({segment:g,outlet:o})))}),v4((o,d)=>(o[d.outlet]=d.segment,o),{}),m4())}expandSegment(n,t,r,i,o,d){return Rn(r).pipe(gf(f=>this.expandSegmentAgainstRoute(n,t,r,f,i,o,d).pipe(Xd(_=>{if(_ instanceof AA)return qn(null);throw _}))),pf(f=>!!f),Xd((f,g)=>{if(jF(f))return tU(t,i,o)?qn(new fi([],{})):CC(t);throw f}))}expandSegmentAgainstRoute(n,t,r,i,o,d,f){return eU(i,t,o,d)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(n,t,i,o,d):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,t,r,i,o,d):CC(t):CC(t)}expandSegmentAgainstRouteUsingRedirect(n,t,r,i,o,d){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,r,i,d):this.expandRegularSegmentAgainstRouteUsingRedirect(n,t,r,i,o,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?rU(o):this.lineralizeSegments(r,o).pipe(ua(d=>{const f=new fi(d,{});return this.expandSegment(n,f,t,d,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,t,r,i,o,d){const{matched:f,consumedSegments:g,remainingSegments:_,positionalParamSegments:C}=YF(t,i,o);if(!f)return CC(t);const S=this.applyRedirectCommands(g,i.redirectTo,C);return i.redirectTo.startsWith("/")?rU(S):this.lineralizeSegments(i,S).pipe(ua(k=>this.expandSegment(n,t,r,k.concat(_),d,!1)))}matchSegmentAgainstRoute(n,t,r,i,o){return"**"===r.path?(n=$4(r,n),r.loadChildren?(r._loadedRoutes?qn({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(n,r)).pipe(Ae(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new fi(i,{})))):qn(new fi(i,{}))):J4(t,r,i,n).pipe(_l(({matched:d,consumedSegments:f,remainingSegments:g})=>d?this.getChildConfig(n=r._injector??n,r,i).pipe(ua(C=>{const S=C.injector??n,k=C.routes,{segmentGroup:z,slicedSegments:te}=MA(t,f,g,k),pe=new fi(z.segments,z.children);if(0===te.length&&pe.hasChildren())return this.expandChildren(S,k,pe).pipe(Ae(Oe=>new fi(f,Oe)));if(0===k.length&&0===te.length)return qn(new fi(f,{}));const Me=Mc(r)===o;return this.expandSegment(S,pe,k,te,Me?di:o,!0).pipe(Ae(Fe=>new fi(f.concat(Fe.segments),Fe.children)))})):CC(t)))}getChildConfig(n,t,r){return t.children?qn({routes:t.children,injector:n}):t.loadChildren?void 0!==t._loadedRoutes?qn({routes:t._loadedRoutes,injector:t._loadedInjector}):function wY(e,n,t,r){const i=n.canLoad;return void 0===i||0===i.length?qn(!0):qn(i.map(d=>{const f=hy(d,e);return vf(function cY(e){return e&&xC(e.canLoad)}(f)?f.canLoad(n,t):e.runInContext(()=>f(n,t)))})).pipe(fy(),q4())}(n,t,r).pipe(ua(i=>i?this.configLoader.loadChildren(n,t).pipe(_o(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function IY(e){return sy(Z4(EA,3))}())):qn({routes:[],injector:n})}lineralizeSegments(n,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return qn(r);if(i.numberOfChildren>1||!i.children[di])return sy(new Jt(4e3,EA));i=i.children[di]}}applyRedirectCommands(n,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,r)}applyRedirectCreateUrlTree(n,t,r,i){const o=this.createSegmentGroup(n,t.root,r,i);return new wg(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){const r={};return _s(n,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[o]=t[f]}else r[o]=i}),r}createSegmentGroup(n,t,r,i){const o=this.createSegments(n,t.segments,r,i);let d={};return _s(t.children,(f,g)=>{d[g]=this.createSegmentGroup(n,f,r,i)}),new fi(o,d)}createSegments(n,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(n,o,i):this.findOrReturn(o,r))}findPosParam(n,t,r){const i=r[t.path.substring(1)];if(!i)throw new Jt(4001,EA);return i}findOrReturn(n,t){let r=0;for(const i of t){if(i.path===n.path)return t.splice(r),i;r++}return n}}class OY{}class FY{constructor(n,t,r,i,o,d,f,g){this.injector=n,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=f,this.urlSerializer=g}recognize(){const n=MA(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,di).pipe(Ae(t=>{if(null===t)return null;const r=new CA([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},di,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Kd(r,t),o=new G4(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(n){const t=n.value,r=U4(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),n.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(n,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,t,r):this.processSegment(n,t,r,r.segments,i)}processChildren(n,t,r){return Rn(Object.keys(r.children)).pipe(gf(i=>{const o=r.children[i],d=K4(t,i);return this.processSegmentGroup(n,d,o,i)}),v4((i,o)=>i&&o?(i.push(...o),i):null),_4(i=>null!==i),fA(null),m4(),Ae(i=>{if(null===i)return null;const o=iU(i);return function BY(e){e.sort((n,t)=>n.value.outlet===di?-1:t.value.outlet===di?1:n.value.outlet.localeCompare(t.value.outlet))}(o),o}))}processSegment(n,t,r,i,o){return Rn(t).pipe(gf(d=>this.processSegmentAgainstRoute(d._injector??n,d,r,i,o)),pf(d=>!!d),Xd(d=>{if(jF(d))return tU(r,i,o)?qn([]):qn(null);throw d}))}processSegmentAgainstRoute(n,t,r,i,o){if(t.redirectTo||!eU(t,r,i,o))return qn(null);let d;if("**"===t.path){const f=i.length>0?x4(i).parameters:{},g=oU(r)+i.length;d=qn({snapshot:new CA(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,lU(t),Mc(t),t.component??t._loadedComponent??null,t,aU(r),g,cU(t),g),consumedSegments:[],remainingSegments:[]})}else d=J4(r,t,i,n).pipe(Ae(({matched:f,consumedSegments:g,remainingSegments:_,parameters:C})=>{if(!f)return null;const S=oU(r)+g.length;return{snapshot:new CA(g,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,lU(t),Mc(t),t.component??t._loadedComponent??null,t,aU(r),S,cU(t),S),consumedSegments:g,remainingSegments:_}}));return d.pipe(_l(f=>{if(null===f)return qn(null);const{snapshot:g,consumedSegments:_,remainingSegments:C}=f;n=t._injector??n;const S=t._loadedInjector??n,k=function VY(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(t),{segmentGroup:z,slicedSegments:te}=MA(r,_,C,k.filter(Me=>void 0===Me.redirectTo),this.relativeLinkResolution);if(0===te.length&&z.hasChildren())return this.processChildren(S,k,z).pipe(Ae(Me=>null===Me?null:[new Kd(g,Me)]));if(0===k.length&&0===te.length)return qn([new Kd(g,[])]);const pe=Mc(t)===o;return this.processSegment(S,k,z,te,pe?di:o).pipe(Ae(Me=>null===Me?null:[new Kd(g,Me)]))}))}}function zY(e){const n=e.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function iU(e){const n=[],t=new Set;for(const r of e){if(!zY(r)){n.push(r);continue}const i=n.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):n.push(r)}for(const r of t){const i=iU(r.children);n.push(new Kd(r.value,i))}return n.filter(r=>!t.has(r))}function aU(e){let n=e;for(;n._sourceSegment;)n=n._sourceSegment;return n}function oU(e){let n=e,t=n._segmentIndexShift??0;for(;n._sourceSegment;)n=n._sourceSegment,t+=n._segmentIndexShift??0;return t-1}function lU(e){return e.data||{}}function cU(e){return e.resolve||{}}function uU(e){return"string"==typeof e.title||null===e.title}function XF(e){return _l(n=>{const t=e(n);return t?Rn(t).pipe(Ae(()=>n)):qn(n)})}let dU=(()=>{class e{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===di);return r}getResolvedTitleForRoute(t){return t.data[uC]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:function(){return oa(hU)},providedIn:"root"}),e})(),hU=(()=>{class e extends dU{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return e.\u0275fac=function(t){return new(t||e)(Lt(Qz))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class XY{}class KY extends class $Y{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}}{}const PA=new on("",{providedIn:"root",factory:()=>({})}),$F=new on("ROUTES");let KF=(()=>{class e{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return qn(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=vf(t.loadComponent()).pipe(_o(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),pA(()=>{this.componentLoaders.delete(t)})),i=new p4(r,()=>new ne).pipe(SF());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return qn({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(Ae(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let g,_,C=!1;Array.isArray(f)?_=f:(g=f.create(t).injector,_=b4(g.get($F,[],nr.Self|nr.Optional)));return{routes:_.map(WF),injector:g}}),pA(()=>{this.childrenLoaders.delete(r)})),d=new p4(o,()=>new ne).pipe(SF());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return vf(t()).pipe(ua(r=>r instanceof Jp||Array.isArray(r)?qn(r):Rn(this.compiler.compileModuleAsync(r))))}}return e.\u0275fac=function(t){return new(t||e)(Lt(Wa),Lt(wc))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class qY{}class JY{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,t){return n}}function eX(e){throw e}function tX(e,n,t){return n.parse("/")}const nX={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},rX={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function pU(){const e=oa(T4),n=oa(mC),t=oa(jd),r=oa(Wa),i=oa(wc),o=oa($F,{optional:!0})??[],d=oa(PA,{optional:!0})??{},f=oa(hU),g=oa(dU,{optional:!0}),_=oa(qY,{optional:!0}),C=oa(XY,{optional:!0}),S=new ys(null,e,n,t,r,i,b4(o));return _&&(S.urlHandlingStrategy=_),C&&(S.routeReuseStrategy=C),S.titleStrategy=g??f,function iX(e,n){e.errorHandler&&(n.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(n.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(n.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(n.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(n.urlUpdateStrategy=e.urlUpdateStrategy),e.canceledNavigationResolution&&(n.canceledNavigationResolution=e.canceledNavigationResolution)}(d,S),S}let ys=(()=>{class e{constructor(t,r,i,o,d,f,g){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ne,this.errorHandler=eX,this.malformedUriErrorHandler=tX,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>qn(void 0),this.urlHandlingStrategy=new JY,this.routeReuseStrategy=new KY,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=d.get(KF),this.configLoader.onLoadEndListener=k=>this.triggerEvent(new V7(k)),this.configLoader.onLoadStartListener=k=>this.triggerEvent(new B7(k)),this.ngModule=d.get(Od),this.console=d.get(fk);const S=d.get(rr);this.isNgZoneEnabled=S instanceof rr&&rr.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=function l7(){return new wg(new fi([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=H4(this.currentUrlTree,this.rootComponentType),this.transitions=new Hl({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(qi(i=>0!==i.id),Ae(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),_l(i=>{let o=!1,d=!1;return qn(i).pipe(_o(f=>{this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),_l(f=>{const g=this.browserUrlTree.toString(),_=!this.navigated||f.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||_)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return gU(f.source)&&(this.browserUrlTree=f.extractedUrl),qn(f).pipe(_l(S=>{const k=this.transitions.getValue();return r.next(new OF(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),k!==this.transitions.getValue()?La:Promise.resolve(S)}),function LY(e,n,t,r){return _l(i=>function PY(e,n,t,r,i){return new RY(e,n,t,r,i).apply()}(e,n,t,i.extractedUrl,r).pipe(Ae(o=>({...i,urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),_o(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},i.urlAfterRedirects=S.urlAfterRedirects}),function UY(e,n,t,r,i,o){return ua(d=>function NY(e,n,t,r,i,o,d="emptyOnly",f="legacy"){return new FY(e,n,t,r,i,d,f,o).recognize().pipe(_l(g=>null===g?function kY(e){return new B(n=>n.error(e))}(new OY):qn(g)))}(e,n,t,d.urlAfterRedirects,r.serialize(d.urlAfterRedirects),r,i,o).pipe(Ae(f=>({...d,targetSnapshot:f}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),_o(S=>{if(i.targetSnapshot=S.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const z=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(z,S)}this.browserUrlTree=S.urlAfterRedirects}const k=new L7(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(k)}));if(_&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:k,extractedUrl:z,source:te,restoredState:pe,extras:Me}=f,Re=new OF(k,this.serializeUrl(z),te,pe);r.next(Re);const Fe=H4(z,this.rootComponentType).snapshot;return qn(i={...f,targetSnapshot:Fe,urlAfterRedirects:z,extras:{...Me,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=f.rawUrl,f.resolve(null),La}),_o(f=>{const g=new O7(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(g)}),Ae(f=>i={...f,guards:iY(f.targetSnapshot,f.currentSnapshot,this.rootContexts)}),function gY(e,n){return ua(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:d}}=t;return 0===d.length&&0===o.length?qn({...t,guardsResult:!0}):function vY(e,n,t,r){return Rn(e).pipe(ua(i=>function CY(e,n,t,r,i){const o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return o&&0!==o.length?qn(o.map(f=>{const g=_C(n)??i,_=hy(f,g);return vf(function hY(e){return e&&xC(e.canDeactivate)}(_)?_.canDeactivate(e,n,t,r):g.runInContext(()=>_(e,n,t,r))).pipe(pf())})).pipe(fy()):qn(!0)}(i.component,i.route,t,n,r)),pf(i=>!0!==i,!0))}(d,r,i,e).pipe(ua(f=>f&&function lY(e){return"boolean"==typeof e}(f)?function mY(e,n,t,r){return Rn(n).pipe(gf(i=>hA(function yY(e,n){return null!==e&&n&&n(new z7(e)),qn(!0)}(i.route.parent,r),function _Y(e,n){return null!==e&&n&&n(new U7(e)),qn(!0)}(i.route,r),function xY(e,n,t){const r=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(d=>function aY(e){const n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null}(d)).filter(d=>null!==d).map(d=>cC(()=>qn(d.guards.map(g=>{const _=_C(d.node)??t,C=hy(g,_);return vf(function dY(e){return e&&xC(e.canActivateChild)}(C)?C.canActivateChild(r,e):_.runInContext(()=>C(r,e))).pipe(pf())})).pipe(fy())));return qn(o).pipe(fy())}(e,i.path,t),function bY(e,n,t){const r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||0===r.length)return qn(!0);const i=r.map(o=>cC(()=>{const d=_C(n)??t,f=hy(o,d);return vf(function uY(e){return e&&xC(e.canActivate)}(f)?f.canActivate(n,e):d.runInContext(()=>f(n,e))).pipe(pf())}));return qn(i).pipe(fy())}(e,i.route,t))),pf(i=>!0!==i,!0))}(r,o,e,n):qn(f)),Ae(f=>({...t,guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),_o(f=>{if(i.guardsResult=f.guardsResult,Dg(f.guardsResult))throw j4(0,f.guardsResult);const g=new k7(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(g)}),qi(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,"",3),!1)),XF(f=>{if(f.guards.canActivateChecks.length)return qn(f).pipe(_o(g=>{const _=new N7(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(_)}),_l(g=>{let _=!1;return qn(g).pipe(function GY(e,n){return ua(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return qn(t);let o=0;return Rn(i).pipe(gf(d=>function WY(e,n,t,r){const i=e.routeConfig,o=e._resolve;return void 0!==i?.title&&!uU(i)&&(o[uC]=i.title),function jY(e,n,t,r){const i=function ZY(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===i.length)return qn({});const o={};return Rn(i).pipe(ua(d=>function YY(e,n,t,r){const i=_C(n)??r,o=hy(e,i);return vf(o.resolve?o.resolve(n,t):i.runInContext(()=>o(n,t)))}(e[d],n,t,r).pipe(pf(),_o(f=>{o[d]=f}))),DF(1),MF(o),Xd(d=>jF(d)?La:sy(d)))}(o,e,n,r).pipe(Ae(d=>(e._resolvedData=d,e.data=U4(e,t).resolve,i&&uU(i)&&(e.data[uC]=i.title),null)))}(d.route,r,e,n)),_o(()=>o++),DF(1),ua(d=>o===i.length?qn(t):La))})}(this.paramsInheritanceStrategy,this.ngModule.injector),_o({next:()=>_=!0,complete:()=>{_||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),_o(g=>{const _=new F7(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(_)}))}),XF(f=>{const g=_=>{const C=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&C.push(this.configLoader.loadComponent(_.routeConfig).pipe(_o(S=>{_.component=S}),Ae(()=>{})));for(const S of _.children)C.push(...g(S));return C};return wF(g(f.targetSnapshot.root)).pipe(fA(),mo(1))}),XF(()=>this.afterPreactivation()),Ae(f=>{const g=function Y7(e,n,t){const r=vC(e,n._root,t?t._root:void 0);return new z4(r,n)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return i={...f,targetRouterState:g}}),_o(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((e,n,t)=>Ae(r=>(new rY(n,r.targetRouterState,r.currentRouterState,t).activate(e),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),_o({next(){o=!0},complete(){o=!0}}),pA(()=>{o||d||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Xd(f=>{if(d=!0,X4(f)){Y4(f)||(this.navigated=!0,this.restoreHistory(i,!0));const g=new xA(i.id,this.serializeUrl(i.extractedUrl),f.message,f.cancellationCode);if(r.next(g),Y4(f)){const _=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),C={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||gU(i.source)};this.scheduleNavigation(_,"imperative",null,C,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const g=new F4(i.id,this.serializeUrl(i.extractedUrl),f,i.targetSnapshot??void 0);r.next(g);try{i.resolve(this.errorHandler(f))}catch(_){i.reject(_)}}return La}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},o=t.state?.navigationId?t.state:null;if(o){const f={...o};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(i.state=f)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,o,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(WF),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:d,queryParamsHandling:f,preserveFragment:g}=r,_=i||this.routerState.root,C=g?this.currentUrlTree.fragment:d;let S=null;switch(f){case"merge":S={...this.currentUrlTree.queryParams,...o};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=o||null}return null!==S&&(S=this.removeEmptyProps(S)),T7(_,this.currentUrlTree,t,S,C??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Dg(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function aX(e){for(let n=0;n<e.length;n++){if(null==e[n])throw new Jt(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...nX}:!1===r?{...rX}:r,Dg(t))return w4(this.currentUrlTree,t,i);const o=this.parseUrl(t);return w4(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Mg(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,o,d){if(this.disposed)return Promise.resolve(!1);let f,g,_;d?(f=d.resolve,g=d.reject,_=d.promise):_=new Promise((k,z)=>{f=k,g=z});const C=++this.navigationId;let S;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),S=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):S=0,this.setTransition({id:C,targetPageId:S,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:o,resolve:f,reject:g,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(k=>Promise.reject(k))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const o=new xA(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return e.\u0275fac=function(t){gc()},e.\u0275prov=yn({token:e,factory:function(){return pU()},providedIn:"root"}),e})();function gU(e){return"imperative"!==e}let Eg=(()=>{class e{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new ne,this.subscription=t.events.subscribe(o=>{o instanceof Mg&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=pl(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=pl(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=pl(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,o,d){return!!(0!==t||r||i||o||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return e.\u0275fac=function(t){return new(t||e)(Xe(ys),Xe(Tg),Xe(ju))},e.\u0275dir=Dn({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&zt("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&t&&Er("target",r.target)("href",r.href,Jv)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Ki]}),e})();class vU{}let lX=(()=>{class e{constructor(t,r,i,o,d){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(qi(t=>t instanceof Mg),gf(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=eg(o.providers,t,`Route: ${o.path}`));const d=o._injector??t,f=o._loadedInjector??d;o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent?i.push(this.preloadConfig(d,o)):(o.children||o._loadedRoutes)&&i.push(this.processRoutes(f,o.children??o._loadedRoutes))}return Rn(i).pipe($s())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):qn(null);const o=i.pipe(ua(d=>null===d?qn(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));return r.loadComponent&&!r._loadedComponent?Rn([o,this.loader.loadComponent(r)]).pipe($s()):o})}}return e.\u0275fac=function(t){return new(t||e)(Lt(ys),Lt(wc),Lt($c),Lt(vU),Lt(KF))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const qF=new on("");let mU=(()=>{class e{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof OF?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Mg&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof B4&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new B4(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){gc()},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();function py(e,n){return{\u0275kind:e,\u0275providers:n}}function JF(e){return[{provide:$F,multi:!0,useValue:e}]}function yU(){const e=oa(Wa);return n=>{const t=e.get(zd);if(n!==t.components[0])return;const r=e.get(ys),i=e.get(bU);1===e.get(eB)&&r.initialNavigation(),e.get(xU,null,nr.Optional)?.setUpPreloading(),e.get(qF,null,nr.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const bU=new on("",{factory:()=>new ne}),eB=new on("",{providedIn:"root",factory:()=>1});const xU=new on("");function hX(e){return py(0,[{provide:xU,useExisting:lX},{provide:vU,useExisting:e}])}const CU=new on("ROUTER_FORROOT_GUARD"),fX=[jd,{provide:T4,useClass:EF},{provide:ys,useFactory:pU},mC,{provide:Tg,useFactory:function _U(e){return e.routerState.root},deps:[ys]},KF];function pX(){return new XT("Router",ys)}let wU=(()=>{class e{constructor(t){}static forRoot(t,r){return{ngModule:e,providers:[fX,[],JF(t),{provide:CU,useFactory:_X,deps:[[ys,new il,new uc]]},{provide:PA,useValue:r||{}},r?.useHash?{provide:ju,useClass:A1}:{provide:ju,useClass:E1},{provide:qF,useFactory:()=>{const e=oa(ys),n=oa($1),t=oa(PA);return t.scrollOffset&&n.setOffset(t.scrollOffset),new mU(e,n,t)}},r?.preloadingStrategy?hX(r.preloadingStrategy).\u0275providers:[],{provide:XT,multi:!0,useFactory:pX},r?.initialNavigation?yX(r):[],[{provide:SU,useFactory:yU},{provide:o1,multi:!0,useExisting:SU}]]}}static forChild(t){return{ngModule:e,providers:[JF(t)]}}}return e.\u0275fac=function(t){return new(t||e)(Lt(CU,8))},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[UF]}),e})();function _X(e){return"guarded"}function yX(e){return["disabled"===e.initialNavigation?py(3,[{provide:ag,multi:!0,useFactory:()=>{const n=oa(ys);return()=>{n.setUpLocationChangeListener()}}},{provide:eB,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?py(2,[{provide:eB,useValue:0},{provide:ag,multi:!0,deps:[Wa],useFactory:n=>{const t=n.get(S1,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(o=>{const d=n.get(ys),f=n.get(bU);(function i(o){n.get(ys).events.pipe(qi(f=>f instanceof Mg||f instanceof xA||f instanceof F4),Ae(f=>f instanceof Mg||f instanceof xA&&(0===f.code||1===f.code)&&null),qi(f=>null!==f),mo(1)).subscribe(()=>{o()})})(()=>{o(!0),r=!0}),d.afterPreactivation=()=>(o(!0),r||f.closed?qn(void 0):f),d.initialNavigation()}))}}]).\u0275providers:[]]}const SU=new on(""),xX=function(e){return{"background-image":e}},CX=["*"];let wX=(()=>{class e{constructor(){this.title="",this.imgURL=""}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Zn({type:e,selectors:[["app-home-card"]],inputs:{title:"title",imgURL:"imgURL"},ngContentSelectors:CX,decls:6,vars:4,consts:[[1,"card",3,"ngStyle"],[1,"card-content"],[1,"title"],[1,"content"]],template:function(t,r){1&t&&(zi(),qe(0,"div",0)(1,"div",1)(2,"h2",2),Bt(3),nt(),qe(4,"div",3),Ur(5),nt()()()),2&t&&(Mt("ngStyle",Fl(2,xX,"url("+r.imgURL+")")),Dt(3),Ya(" ",r.title," "))},dependencies:[W1],styles:['.card[_ngcontent-%COMP%]{--transition-duration: .25s;--transform-transition: transform var(--transition-duration) ease;color:var(--clr-neutral-100);background-size:cover;width:var(--card-width);aspect-ratio:1;border-radius:.25rem;padding:1rem 0 0;overflow:hidden;position:relative;transition:var(--transform-transition);box-shadow:#00000030 0 10px 20px,#0000003b 0 6px 6px}.card[_ngcontent-%COMP%]:before{content:"";position:absolute;background:rgb(0,0,0);opacity:.5;pointer-events:none;width:var(--card-width);aspect-ratio:1;border-radius:.25rem;padding:1rem 0 0;top:0}.card-content[_ngcontent-%COMP%]{--padding: 1.1rem;height:100%;padding:var(--padding);padding-top:3rem;background:linear-gradient(hsla(0deg,0%,0%,0),hsla(0deg,0%,0%,.75) 50%,hsl(0deg,0%,0%))}.title[_ngcontent-%COMP%]{position:relative;width:max-content;font-size:1rem}.title[_ngcontent-%COMP%]:after{content:"";position:absolute;height:4px;width:calc(100% + var(--padding));left:calc(var(--padding) * -1);bottom:0;background-color:var(--clr-accent-400)}@media (hover){.title[_ngcontent-%COMP%]:after{transform-origin:left;transform:scaleX(0);transition:var(--transform-transition)}.card-content[_ngcontent-%COMP%]{transform:translateY(55%);transition:var(--transform-transition)}.card[_ngcontent-%COMP%]:hover, .card[_ngcontent-%COMP%]:focus-within{transform:scale(1.025)}.card[_ngcontent-%COMP%]:hover:before{opacity:0}.card[_ngcontent-%COMP%]:hover   .title[_ngcontent-%COMP%]:after, .card[_ngcontent-%COMP%]:focus-within   .title[_ngcontent-%COMP%]:after{transform:scaleX(1);transition-delay:var(--transition-duration)}.card[_ngcontent-%COMP%]:hover   .card-content[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]:focus-within   .card-content[_ngcontent-%COMP%]{transform:translateY(0)}}@media (prefers-reduced-motion: reduce){*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important;scroll-behavior:auto!important;transition-delay:0ms!important}}']}),e})(),SX=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Zn({type:e,selectors:[["app-home"]],decls:32,vars:0,consts:[[1,"translate-animation"],[1,"home-container","horizontal-flex"],["routerLink","/sampling"],["title","Sampling"],["href","https://clementpla.github.io/SegmentationMetricTutorial/main/classification"],["imgURL","assets/images/home-cards/metric.jpg","title","Classification Metrics"],["routerLink","/PSNR"],["title","Image Quality and Noise","imgURL","assets/images/home-cards/psnr.jpg"],["routerLink","/fourierTransform"],["title","Fourier Transform 2D","imgURL","assets/images/home-cards/fourierTransform.jpg"],["routerLink","/spatialFiltering"],["title","Spatial Filtering","imgURL","assets/images/home-cards/spatial_filtering.jpg"],["routerLink","/spectralFiltering"],["title","Spectral Filtering","imgURL",""],["routerLink","/colorspaces"],["title","Colorspaces","imgURL","assets/images/home-cards/colorspace.jpg"],["routerLink","/morphology"],["title","Morphology","imgURL","assets/images/home-cards/morphology.jpg"],["routerLink","/histogram"],["title","Image Histogram","imgURL","assets/images/home-cards/histogram.jpg"],["href","https://clementpla.github.io/SegmentationMetricTutorial/main/segmentation"],["imgURL","assets/images/home-cards/segmentation_metrics.jpg","title","Segmentation Metrics"],["routerLink","/weightLoss"],["title","Weights & Loss","imgURL","assets/images/home-cards/weight_loss.png"]],template:function(t,r){1&t&&(qe(0,"div",0)(1,"h2"),Bt(2,"1D"),nt(),qe(3,"div",1)(4,"a",2),Cn(5,"app-home-card",3),nt(),qe(6,"a",4),Cn(7,"app-home-card",5),nt()(),qe(8,"h2"),Bt(9,"2D"),nt(),qe(10,"div",1)(11,"a",6),Cn(12,"app-home-card",7),nt(),qe(13,"a",8),Cn(14,"app-home-card",9),nt(),qe(15,"a",10),Cn(16,"app-home-card",11),nt(),qe(17,"a",12),Cn(18,"app-home-card",13),nt(),qe(19,"a",14),Cn(20,"app-home-card",15),nt(),qe(21,"a",16),Cn(22,"app-home-card",17),nt(),qe(23,"a",18),Cn(24,"app-home-card",19),nt(),qe(25,"a",20),Cn(26,"app-home-card",21),nt()(),qe(27,"h2"),Bt(28,"Machine Learning"),nt(),qe(29,"div",1)(30,"a",22),Cn(31,"app-home-card",23),nt()()())},dependencies:[Eg,wX],styles:["a[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit}.home-container[_ngcontent-%COMP%]{gap:1em;margin:1em 5em}@keyframes rotate{0%{transform:rotateY(90deg);opacity:.1}to{transform:rotateY(0);opacity:1}}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(n){animation-name:rotate;animation-duration:.2s;animation-direction:normal;animation-fill-mode:both;animation-timing-function:ease-out}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(1n){animation-delay:.1s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(2n){animation-delay:.2s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(3n){animation-delay:.3s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(4n){animation-delay:.4s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(5n){animation-delay:.5s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(6n){animation-delay:.6s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(7n){animation-delay:.7s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(8n){animation-delay:.8s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(9n){animation-delay:.9s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(10n){animation-delay:1s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(11n){animation-delay:1.1s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(12n){animation-delay:1.2s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(13n){animation-delay:1.3s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(14n){animation-delay:1.4s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(15n){animation-delay:1.5s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(16n){animation-delay:1.6s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(17n){animation-delay:1.7s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(18n){animation-delay:1.8s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(19n){animation-delay:1.9s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(20n){animation-delay:2s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(21n){animation-delay:2.1s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(22n){animation-delay:2.2s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(23n){animation-delay:2.3s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(24n){animation-delay:2.4s}.home-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(25n){animation-delay:2.5s}h2[_ngcontent-%COMP%]{border:solid white 2px;width:fit-content;margin:1em;padding:0 1em;border-radius:2em}@media (max-width: 768px){.home-container[_ngcontent-%COMP%]{gap:1em;margin:0 1em}}"]}),e})();class tB{attach(n){return this._attachedHost=n,n.attach(this)}detach(){let n=this._attachedHost;null!=n&&(this._attachedHost=null,n.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(n){this._attachedHost=n}}class kA extends tB{constructor(n,t,r,i){super(),this.component=n,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class NA extends tB{constructor(n,t,r,i){super(),this.templateRef=n,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(n,t=this.context){return this.context=t,super.attach(n)}detach(){return this.context=void 0,super.detach()}}class DX extends tB{constructor(n){super(),this.element=n instanceof kr?n.nativeElement:n}}class nB{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(n){return n instanceof kA?(this._attachedPortal=n,this.attachComponentPortal(n)):n instanceof NA?(this._attachedPortal=n,this.attachTemplatePortal(n)):this.attachDomPortal&&n instanceof DX?(this._attachedPortal=n,this.attachDomPortal(n)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(n){this._disposeFn=n}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class MX extends nB{constructor(n,t,r,i,o){super(),this.outletElement=n,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=d=>{const f=d.element,g=this._document.createComment("dom-portal");f.parentNode.insertBefore(g,f),this.outletElement.appendChild(f),this._attachedPortal=d,super.setDisposeFn(()=>{g.parentNode&&g.parentNode.replaceChild(f,g)})},this._document=o}attachComponentPortal(n){const r=(n.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(n.component);let i;return n.viewContainerRef?(i=n.viewContainerRef.createComponent(r,n.viewContainerRef.length,n.injector||n.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(n.injector||this._defaultInjector||Wa.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=n,i}attachTemplatePortal(n){let t=n.viewContainerRef,r=t.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=n,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(n){return n.hostView.rootNodes[0]}}let rB,FA=(()=>{class e extends nB{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new Mn,this.attachDomPortal=o=>{const d=o.element,f=this._document.createComment("dom-portal");o.setAttachedHost(this),d.parentNode.insertBefore(f,d),this._getRootNode().appendChild(d),this._attachedPortal=o,super.setDisposeFn(()=>{f.parentNode&&f.parentNode.replaceChild(d,f)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),d=r.createComponent(o,r.length,t.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(d.hostView.rootNodes[0]),super.setDisposeFn(()=>d.destroy()),this._attachedPortal=t,this._attachedRef=d,this.attached.emit(d),d}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return e.\u0275fac=function(t){return new(t||e)(Xe(Sd),Xe(Lo),Xe(Rr))},e.\u0275dir=Dn({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Gn]}),e})(),gy=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({}),e})();try{rB=typeof Intl<"u"&&Intl.v8BreakIterator}catch{rB=!1}let vy,bs=(()=>{class e{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function GE(e){return e===UE}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!rB)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return e.\u0275fac=function(t){return new(t||e)(Lt(Vd))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const DU=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function MU(){if(vy)return vy;if("object"!=typeof document||!document)return vy=new Set(DU),vy;let e=document.createElement("input");return vy=new Set(DU.filter(n=>(e.setAttribute("type",n),e.type===n))),vy}let wC,BA,Ag,iB;function SC(e){return function TX(){if(null==wC&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>wC=!0}))}finally{wC=wC||!1}return wC}()?e:!!e.capture}function TU(){if(null==Ag){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Ag=!1,Ag;if("scrollBehavior"in document.documentElement.style)Ag=!0;else{const e=Element.prototype.scrollTo;Ag=!!e&&!/\{\s*\[native code\]\s*\}/.test(e.toString())}}return Ag}function DC(){if("object"!=typeof document||!document)return 0;if(null==BA){const e=document.createElement("div"),n=e.style;e.dir="rtl",n.width="1px",n.overflow="auto",n.visibility="hidden",n.pointerEvents="none",n.position="absolute";const t=document.createElement("div"),r=t.style;r.width="2px",r.height="1px",e.appendChild(t),document.body.appendChild(e),BA=0,0===e.scrollLeft&&(e.scrollLeft=1,BA=0===e.scrollLeft?1:2),e.remove()}return BA}function EU(e){if(function EX(){if(null==iB){const e=typeof document<"u"?document.head:null;iB=!(!e||!e.createShadowRoot&&!e.attachShadow)}return iB}()){const n=e.getRootNode?e.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}function aB(){let e=typeof document<"u"&&document?document.activeElement:null;for(;e&&e.shadowRoot;){const n=e.shadowRoot.activeElement;if(n===e)break;e=n}return e}function Ig(e){return e.composedPath?e.composedPath()[0]:e.target}function oB(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Tc(e,...n){return n.length?n.some(t=>e[t]):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}function _y(e,n=tC){return ve((t,r)=>{let i=null,o=null,d=null;const f=()=>{if(i){i.unsubscribe(),i=null;const _=o;o=null,r.next(_)}};function g(){const _=d+e,C=n.now();if(C<_)return i=this.schedule(void 0,_-C),void r.add(i);f()}t.subscribe(we(r,_=>{o=_,d=n.now(),i||(i=n.schedule(g,e),r.add(i))},()=>{f(),r.complete()},void 0,()=>{o=i=null}))})}function PU(e){return qi((n,t)=>e<=t)}function AC(e,n=M){return e=e??zX,ve((t,r)=>{let i,o=!0;t.subscribe(we(r,d=>{const f=n(d);(o||!e(i,f))&&(o=!1,i=f,r.next(d))}))})}function zX(e,n){return e===n}function Hi(e){return ve((n,t)=>{Tn(e).subscribe(we(t,()=>t.complete(),U)),!t.closed&&n.subscribe(t)})}function xr(e){return null!=e&&"false"!=`${e}`}function Ec(e,n=0){return function HX(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}(e)?Number(e):n}function VA(e){return Array.isArray(e)?e:[e]}function yo(e){return null==e?"":"string"==typeof e?e:`${e}px`}function Qd(e){return e instanceof kr?e.nativeElement:e}let RU=(()=>{class e{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),UX=(()=>{class e{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=Qd(t);return new B(i=>{const d=this._observeElement(r).subscribe(i);return()=>{d.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new ne,i=this._mutationObserverFactory.create(o=>r.next(o));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return e.\u0275fac=function(t){return new(t||e)(Lt(RU))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),uB=(()=>{class e{constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new Mn,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=xr(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Ec(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(_y(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(Xe(UX),Xe(kr),Xe(rr))},e.\u0275dir=Dn({type:e,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),e})(),zA=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({providers:[RU]}),e})();const LU=new Set;let yy,GX=(()=>{class e{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):jX}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function WX(e){if(!LU.has(e))try{yy||(yy=document.createElement("style"),yy.setAttribute("type","text/css"),document.head.appendChild(yy)),yy.sheet&&(yy.sheet.insertRule(`@media ${e} {body{ }}`,0),LU.add(e))}catch(n){console.error(n)}}(t),this._matchMedia(t)}}return e.\u0275fac=function(t){return new(t||e)(Lt(bs))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function jX(e){return{matches:"all"===e||""===e,media:e,addListener:()=>{},removeListener:()=>{}}}let ZX=(()=>{class e{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new ne}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return OU(VA(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let o=wF(OU(VA(t)).map(d=>this._registerQuery(d).observable));return o=hA(o.pipe(mo(1)),o.pipe(PU(1),_y(0))),o.pipe(Ae(d=>{const f={matches:!1,breakpoints:{}};return d.forEach(({matches:g,query:_})=>{f.matches=f.matches||g,f.breakpoints[_]=g}),f}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),o={observable:new B(d=>{const f=g=>this._zone.run(()=>d.next(g));return r.addListener(f),()=>{r.removeListener(f)}}).pipe(yl(r),Ae(({matches:d})=>({query:t,matches:d})),Hi(this._destroySubject)),mql:r};return this._queries.set(t,o),o}}return e.\u0275fac=function(t){return new(t||e)(Lt(GX),Lt(rr))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function OU(e){return e.map(n=>n.split(",")).reduce((n,t)=>n.concat(t)).map(n=>n.trim())}class $X extends class FU{constructor(n){this._items=n,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new ne,this._typeaheadSubscription=ge.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new ne,this.change=new ne,n instanceof qh&&n.changes.subscribe(t=>{if(this._activeItem){const i=t.toArray().indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}})}skipPredicate(n){return this._skipPredicateFn=n,this}withWrap(n=!0){return this._wrap=n,this}withVerticalOrientation(n=!0){return this._vertical=n,this}withHorizontalOrientation(n){return this._horizontal=n,this}withAllowedModifierKeys(n){return this._allowedModifierKeys=n,this}withTypeAhead(n=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(_o(t=>this._pressedLetters.push(t)),_y(n),qi(()=>this._pressedLetters.length>0),Ae(()=>this._pressedLetters.join(""))).subscribe(t=>{const r=this._getItemsArray();for(let i=1;i<r.length+1;i++){const o=(this._activeItemIndex+i)%r.length,d=r[o];if(!this._skipPredicateFn(d)&&0===d.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(o);break}}this._pressedLetters=[]}),this}withHomeAndEnd(n=!0){return this._homeAndEnd=n,this}setActiveItem(n){const t=this._activeItem;this.updateActiveItem(n),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(n){const t=n.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!n[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;default:return void((i||Tc(n,"shiftKey"))&&(n.key&&1===n.key.length?this._letterKeyStream.next(n.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],n.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(n){const t=this._getItemsArray(),r="number"==typeof n?n:t.indexOf(n);this._activeItem=t[r]??null,this._activeItemIndex=r}_setActiveItemByDelta(n){this._wrap?this._setActiveInWrapMode(n):this._setActiveInDefaultMode(n)}_setActiveInWrapMode(n){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const i=(this._activeItemIndex+n*r+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(n){this._setActiveItemByIndex(this._activeItemIndex+n,n)}_setActiveItemByIndex(n,t){const r=this._getItemsArray();if(r[n]){for(;this._skipPredicateFn(r[n]);)if(!r[n+=t])return;this.setActiveItem(n)}}_getItemsArray(){return this._items instanceof qh?this._items.toArray():this._items}}{setActiveItem(n){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(n),this.activeItem&&this.activeItem.setActiveStyles()}}let IC=(()=>{class e{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function qX(e){return!!(e.offsetWidth||e.offsetHeight||"function"==typeof e.getClientRects&&e.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function QX(e){try{return e.frameElement}catch{return null}}(function o$(e){return e.ownerDocument&&e.ownerDocument.defaultView||window}(t));if(r&&(-1===VU(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),o=VU(t);return t.hasAttribute("contenteditable")?-1!==o:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function i$(e){let n=e.nodeName.toLowerCase(),t="input"===n&&e.type;return"text"===t||"password"===t||"select"===n||"textarea"===n}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==o:"video"===i?-1!==o&&(null!==o||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function a$(e){return!function e$(e){return function n$(e){return"input"==e.nodeName.toLowerCase()}(e)&&"hidden"==e.type}(e)&&(function JX(e){let n=e.nodeName.toLowerCase();return"input"===n||"select"===n||"button"===n||"textarea"===n}(e)||function t$(e){return function r$(e){return"a"==e.nodeName.toLowerCase()}(e)&&e.hasAttribute("href")}(e)||e.hasAttribute("contenteditable")||BU(e))}(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}}return e.\u0275fac=function(t){return new(t||e)(Lt(bs))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function BU(e){if(!e.hasAttribute("tabindex")||void 0===e.tabIndex)return!1;let n=e.getAttribute("tabindex");return!(!n||isNaN(parseInt(n,10)))}function VU(e){if(!BU(e))return null;const n=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(n)?-1:n}class s${constructor(n,t,r,i,o=!1){this._element=n,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}get enabled(){return this._enabled}set enabled(n){this._enabled=n,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}destroy(){const n=this._startAnchor,t=this._endAnchor;n&&(n.removeEventListener("focus",this.startAnchorListener),n.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(n){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(n)))})}focusFirstTabbableElementWhenReady(n){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(n)))})}focusLastTabbableElementWhenReady(n){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(n)))})}_getRegionBoundary(n){const t=this._element.querySelectorAll(`[cdk-focus-region-${n}], [cdkFocusRegion${n}], [cdk-focus-${n}]`);return"start"==n?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(n){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return r?.focus(n),!!r}return t.focus(n),!0}return this.focusFirstTabbableElement(n)}focusFirstTabbableElement(n){const t=this._getRegionBoundary("start");return t&&t.focus(n),!!t}focusLastTabbableElement(n){const t=this._getRegionBoundary("end");return t&&t.focus(n),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const t=n.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const t=n.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const n=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,n),n.classList.add("cdk-visually-hidden"),n.classList.add("cdk-focus-trap-anchor"),n.setAttribute("aria-hidden","true"),n}_toggleAnchorTabIndex(n,t){n?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(n){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_executeOnStable(n){this._ngZone.isStable?n():this._ngZone.onStable.pipe(mo(1)).subscribe(n)}}let HA=(()=>{class e{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new s$(t,this._checker,this._ngZone,this._document,r)}}return e.\u0275fac=function(t){return new(t||e)(Lt(IC),Lt(rr),Lt(Rr))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function zU(e){return 0===e.buttons||0===e.offsetX&&0===e.offsetY}function HU(e){const n=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!(!n||-1!==n.identifier||null!=n.radiusX&&1!==n.radiusX||null!=n.radiusY&&1!==n.radiusY)}const l$=new on("cdk-input-modality-detector-options"),c$={ignoreKeys:[18,17,224,91,16]},by=SC({passive:!0,capture:!0});let u$=(()=>{class e{constructor(t,r,i,o){this._platform=t,this._mostRecentTarget=null,this._modality=new Hl(null),this._lastTouchMs=0,this._onKeydown=d=>{this._options?.ignoreKeys?.some(f=>f===d.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Ig(d))},this._onMousedown=d=>{Date.now()-this._lastTouchMs<650||(this._modality.next(zU(d)?"keyboard":"mouse"),this._mostRecentTarget=Ig(d))},this._onTouchstart=d=>{HU(d)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ig(d))},this._options={...c$,...o},this.modalityDetected=this._modality.pipe(PU(1)),this.modalityChanged=this.modalityDetected.pipe(AC()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,by),i.addEventListener("mousedown",this._onMousedown,by),i.addEventListener("touchstart",this._onTouchstart,by)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,by),document.removeEventListener("mousedown",this._onMousedown,by),document.removeEventListener("touchstart",this._onTouchstart,by))}}return e.\u0275fac=function(t){return new(t||e)(Lt(bs),Lt(rr),Lt(Rr),Lt(l$,8))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const d$=new on("liveAnnouncerElement",{providedIn:"root",factory:function h$(){return null}}),f$=new on("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let p$=(()=>{class e{constructor(t,r,i,o){this._ngZone=r,this._defaultOptions=o,this._document=i,this._liveElement=t||this._createLiveElement()}announce(t,...r){const i=this._defaultOptions;let o,d;return 1===r.length&&"number"==typeof r[0]?d=r[0]:[o,d]=r,this.clear(),clearTimeout(this._previousTimeout),o||(o=i&&i.politeness?i.politeness:"polite"),null==d&&i&&(d=i.duration),this._liveElement.setAttribute("aria-live",o),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(f=>this._currentResolve=f)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof d&&(this._previousTimeout=setTimeout(()=>this.clear(),d)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",r=this._document.getElementsByClassName(t),i=this._document.createElement("div");for(let o=0;o<r.length;o++)r[o].remove();return i.classList.add(t),i.classList.add("cdk-visually-hidden"),i.setAttribute("aria-atomic","true"),i.setAttribute("aria-live","polite"),this._document.body.appendChild(i),i}}return e.\u0275fac=function(t){return new(t||e)(Lt(d$,8),Lt(rr),Lt(Rr),Lt(f$,8))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const g$=new on("cdk-focus-monitor-default-options"),UA=SC({passive:!0,capture:!0});let Ac=(()=>{class e{constructor(t,r,i,o,d){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ne,this._rootNodeFocusAndBlurListener=f=>{for(let _=Ig(f);_;_=_.parentElement)"focus"===f.type?this._onFocus(f,_):this._onBlur(f,_)},this._document=o,this._detectionMode=d?.detectionMode||0}monitor(t,r=!1){const i=Qd(t);if(!this._platform.isBrowser||1!==i.nodeType)return qn(null);const o=EU(i)||this._getDocument(),d=this._elementInfo.get(i);if(d)return r&&(d.checkChildren=!0),d.subject;const f={checkChildren:r,subject:new ne,rootNode:o};return this._elementInfo.set(i,f),this._registerGlobalListeners(f),f.subject}stopMonitoring(t){const r=Qd(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const o=Qd(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([f,g])=>this._originChanged(f,r,g)):(this._setOrigin(r),"function"==typeof o.focus&&o.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),o=Ig(t);!i||!i.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,UA),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,UA)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Hi(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,UA),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,UA),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,o)=>{(o===t||i.checkChildren&&o.contains(t))&&r.push([o,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const o=t.labels;if(o)for(let d=0;d<o.length;d++)if(o[d].contains(r))return!0;return!1}}return e.\u0275fac=function(t){return new(t||e)(Lt(rr),Lt(bs),Lt(u$),Lt(Rr,8),Lt(g$,8))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const GU="cdk-high-contrast-black-on-white",WU="cdk-high-contrast-white-on-black",dB="cdk-high-contrast-active";let jU=(()=>{class e{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=oa(ZX).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(dB,GU,WU),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(dB,GU):2===r&&t.add(dB,WU)}}}return e.\u0275fac=function(t){return new(t||e)(Lt(bs),Lt(Rr))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),v$=(()=>{class e{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return e.\u0275fac=function(t){return new(t||e)(Lt(jU))},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[zA]}),e})();const m$=new on("cdk-dir-doc",{providedIn:"root",factory:function _$(){return oa(Rr)}}),y$=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let qu=(()=>{class e{constructor(t){if(this.value="ltr",this.change=new Mn,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function b$(e){const n=e?.toLowerCase()||"";return"auto"===n&&typeof navigator<"u"&&navigator?.language?y$.test(navigator.language)?"rtl":"ltr":"rtl"===n?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return e.\u0275fac=function(t){return new(t||e)(Lt(m$,8))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),PC=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({}),e})();function x$(e,n){if(1&e&&Cn(0,"mat-pseudo-checkbox",4),2&e){const t=Yn();Mt("state",t.selected?"checked":"unchecked")("disabled",t.disabled)}}function C$(e,n){if(1&e&&(qe(0,"span",5),Bt(1),nt()),2&e){const t=Yn();Dt(1),Ya("(",t.group.label,")")}}const w$=["*"],D$=new on("mat-sanity-checks",{providedIn:"root",factory:function S$(){return!0}});let ti=(()=>{class e{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!oB()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return e.\u0275fac=function(t){return new(t||e)(Lt(jU),Lt(D$,8),Lt(Rr))},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[PC,PC]}),e})();function RC(e){return class extends e{constructor(...n){super(...n),this._disabled=!1}get disabled(){return this._disabled}set disabled(n){this._disabled=xr(n)}}}function qd(e,n){return class extends e{constructor(...t){super(...t),this.defaultColor=n,this.color=n}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function mf(e){return class extends e{constructor(...n){super(...n),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(n){this._disableRipple=xr(n)}}}function xy(e,n=0){return class extends e{constructor(...t){super(...t),this._tabIndex=n,this.defaultTabIndex=n}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Ec(t):this.defaultTabIndex}}}function XU(e){return class extends e{constructor(...n){super(...n),this.errorState=!1}updateErrorState(){const n=this.errorState,o=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);o!==n&&(this.errorState=o,this.stateChanges.next())}}}let hB=(()=>{class e{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),GA=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[ti,ti]}),e})();class A${constructor(n,t,r,i=!1){this._renderer=n,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const KU={enterDuration:225,exitDuration:150},fB=SC({passive:!0}),QU=["mousedown","touchstart"],qU=["mouseup","mouseleave","touchend","touchcancel"];class P${constructor(n,t,r,i){this._target=n,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Qd(r))}fadeInRipple(n,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...KU,...r.animation};r.centered&&(n=i.left+i.width/2,t=i.top+i.height/2);const d=r.radius||function R$(e,n,t){const r=Math.max(Math.abs(e-t.left),Math.abs(e-t.right)),i=Math.max(Math.abs(n-t.top),Math.abs(n-t.bottom));return Math.sqrt(r*r+i*i)}(n,t,i),f=n-i.left,g=t-i.top,_=o.enterDuration,C=document.createElement("div");C.classList.add("mat-ripple-element"),C.style.left=f-d+"px",C.style.top=g-d+"px",C.style.height=2*d+"px",C.style.width=2*d+"px",null!=r.color&&(C.style.backgroundColor=r.color),C.style.transitionDuration=`${_}ms`,this._containerElement.appendChild(C);const S=window.getComputedStyle(C),z=S.transitionDuration,te="none"===S.transitionProperty||"0s"===z||"0s, 0s"===z,pe=new A$(this,C,r,te);C.style.transform="scale3d(1, 1, 1)",pe.state=0,r.persistent||(this._mostRecentTransientRipple=pe);let Me=null;return!te&&(_||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Re=()=>this._finishRippleTransition(pe),Fe=()=>this._destroyRipple(pe);C.addEventListener("transitionend",Re),C.addEventListener("transitioncancel",Fe),Me={onTransitionEnd:Re,onTransitionCancel:Fe}}),this._activeRipples.set(pe,Me),(te||!_)&&this._finishRippleTransition(pe),pe}fadeOutRipple(n){if(2===n.state||3===n.state)return;const t=n.element,r={...KU,...n.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",n.state=2,(n._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(n)}fadeOutAll(){this._getActiveRipples().forEach(n=>n.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(n=>{n.config.persistent||n.fadeOut()})}setupTriggerEvents(n){const t=Qd(n);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(QU))}handleEvent(n){"mousedown"===n.type?this._onMousedown(n):"touchstart"===n.type?this._onTouchStart(n):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(qU),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(n){0===n.state?this._startFadeOutTransition(n):2===n.state&&this._destroyRipple(n)}_startFadeOutTransition(n){const t=n===this._mostRecentTransientRipple,{persistent:r}=n.config;n.state=1,!r&&(!t||!this._isPointerDown)&&n.fadeOut()}_destroyRipple(n){const t=this._activeRipples.get(n)??null;this._activeRipples.delete(n),this._activeRipples.size||(this._containerRect=null),n===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),n.state=3,null!==t&&(n.element.removeEventListener("transitionend",t.onTransitionEnd),n.element.removeEventListener("transitioncancel",t.onTransitionCancel)),n.element.remove()}_onMousedown(n){const t=zU(n),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(n.clientX,n.clientY,this._target.rippleConfig))}_onTouchStart(n){if(!this._target.rippleDisabled&&!HU(n)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=n.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(n=>{!n.config.persistent&&(1===n.state||n.config.terminateOnPointerUp&&0===n.state)&&n.fadeOut()}))}_registerEvents(n){this._ngZone.runOutsideAngular(()=>{n.forEach(t=>{this._triggerElement.addEventListener(t,this,fB)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(QU.forEach(n=>{this._triggerElement.removeEventListener(n,this,fB)}),this._pointerUpEventsRegistered&&qU.forEach(n=>{this._triggerElement.removeEventListener(n,this,fB)}))}}const L$=new on("mat-ripple-global-options");let Jd=(()=>{class e{constructor(t,r,i,o,d){this._elementRef=t,this._animationMode=d,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new P$(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return e.\u0275fac=function(t){return new(t||e)(Xe(kr),Xe(rr),Xe(bs),Xe(L$,8),Xe(Zo,8))},e.\u0275dir=Dn({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&ui("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),e})(),Rg=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[ti,ti]}),e})(),JU=(()=>{class e{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1}}return e.\u0275fac=function(t){return new(t||e)(Xe(Zo,8))},e.\u0275cmp=Zn({type:e,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(t,r){2&t&&ui("mat-pseudo-checkbox-indeterminate","indeterminate"===r.state)("mat-pseudo-checkbox-checked","checked"===r.state)("mat-pseudo-checkbox-disabled",r.disabled)("_mat-animation-noopable","NoopAnimations"===r._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(t,r){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}'],encapsulation:2,changeDetection:0}),e})(),pB=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[ti]}),e})();const eG=new on("MAT_OPTION_PARENT_COMPONENT"),tG=new on("MatOptgroup");let O$=0;class k${constructor(n,t=!1){this.source=n,this.isUserInput=t}}let N$=(()=>{class e{constructor(t,r,i,o){this._element=t,this._changeDetectorRef=r,this._parent=i,this.group=o,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+O$++,this.onSelectionChange=new Mn,this._stateChanges=new ne}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=xr(t)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(t,r){const i=this._getHostElement();"function"==typeof i.focus&&i.focus(r)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!Tc(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue=t,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new k$(this,t))}}return e.\u0275fac=function(t){gc()},e.\u0275dir=Dn({type:e,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),e})(),gB=(()=>{class e extends N${constructor(t,r,i,o){super(t,r,i,o)}}return e.\u0275fac=function(t){return new(t||e)(Xe(kr),Xe(Wi),Xe(eG,8),Xe(tG,8))},e.\u0275cmp=Zn({type:e,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(t,r){1&t&&zt("click",function(){return r._selectViaInteraction()})("keydown",function(o){return r._handleKeydown(o)}),2&t&&(Nl("id",r.id),Er("tabindex",r._getTabIndex())("aria-selected",r._getAriaSelected())("aria-disabled",r.disabled.toString()),ui("mat-selected",r.selected)("mat-option-multiple",r.multiple)("mat-active",r.active)("mat-option-disabled",r.disabled))},exportAs:["matOption"],features:[Gn],ngContentSelectors:w$,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(t,r){1&t&&(zi(),ar(0,x$,1,2,"mat-pseudo-checkbox",0),qe(1,"span",1),Ur(2),nt(),ar(3,C$,2,1,"span",2),Cn(4,"div",3)),2&t&&(Mt("ngIf",r.multiple),Dt(3),Mt("ngIf",r.group&&r.group._inert),Dt(1),Mt("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},dependencies:[Jd,Hs,JU],styles:['.mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.mat-option.mat-active::before{content:""}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{right:auto;left:16px}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}'],encapsulation:2,changeDetection:0}),e})();function nG(e,n,t){if(t.length){let r=n.toArray(),i=t.toArray(),o=0;for(let d=0;d<e+1;d++)r[d].group&&r[d].group===i[o]&&o++;return o}return 0}let rG=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[Rg,zl,ti,pB]}),e})();const B$=["mat-button",""],V$=["*"],H$=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],U$=qd(RC(mf(class{constructor(e){this._elementRef=e}})));let bl=(()=>{class e extends U${constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const o of H$)this._hasHostAttributes(o)&&this._getHostElement().classList.add(o);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return e.\u0275fac=function(t){return new(t||e)(Xe(kr),Xe(Ac),Xe(Zo,8))},e.\u0275cmp=Zn({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&Wr(Jd,5),2&t){let i;Kn(i=Qn())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(Er("disabled",r.disabled||null),ui("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Gn],attrs:B$,ngContentSelectors:V$,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(zi(),qe(0,"span",0),Ur(1),nt(),Cn(2,"span",1)(3,"span",2)),2&t&&(Dt(2),ui("mat-button-ripple-round",r.isRoundButton||r.isIconButton),Mt("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},dependencies:[Jd],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),e})(),iG=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[Rg,ti,ti]}),e})(),aG=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[ti,ti]}),e})();const G$=["addListener","removeListener"],W$=["addEventListener","removeEventListener"],j$=["on","off"];function Ul(e,n,t,r){if(ue(t)&&(r=t,t=void 0),r)return Ul(e,n,t).pipe(JN(r));const[i,o]=function X$(e){return ue(e.addEventListener)&&ue(e.removeEventListener)}(e)?W$.map(d=>f=>e[d](n,f,t)):function Z$(e){return ue(e.addListener)&&ue(e.removeListener)}(e)?G$.map(oG(e,n)):function Y$(e){return ue(e.on)&&ue(e.off)}(e)?j$.map(oG(e,n)):[];if(!i&&pr(e))return ua(d=>Ul(d,n,t))(Tn(e));if(!i)throw new TypeError("Invalid event target");return new B(d=>{const f=(...g)=>d.next(1<g.length?g:g[0]);return i(f),()=>o(f)})}function oG(e,n){return t=>r=>e[t](n,r)}const OC={schedule(e){let n=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=OC;r&&(n=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=n(o=>{t=void 0,e(o)});return new ge(()=>t?.(i))},requestAnimationFrame(...e){const{delegate:n}=OC;return(n?.requestAnimationFrame||requestAnimationFrame)(...e)},cancelAnimationFrame(...e){const{delegate:n}=OC;return(n?.cancelAnimationFrame||cancelAnimationFrame)(...e)},delegate:void 0};new class K$ extends QN{flush(n){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;n=n||r.shift();do{if(i=n.execute(n.state,n.delay))break}while((n=r[0])&&n.id===t&&r.shift());if(this._active=!1,i){for(;(n=r[0])&&n.id===t&&r.shift();)n.unsubscribe();throw i}}}(class $$ extends KN{constructor(n,t){super(n,t),this.scheduler=n,this.work=t}requestAsyncId(n,t,r=0){return null!==r&&r>0?super.requestAsyncId(n,t,r):(n.actions.push(this),n._scheduled||(n._scheduled=OC.requestAnimationFrame(()=>n.flush(void 0))))}recycleAsyncId(n,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(n,t,r);const{actions:o}=n;null!=t&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==t&&(OC.cancelAnimationFrame(t),n._scheduled=void 0)}});let vB,q$=1;const WA={};function sG(e){return e in WA&&(delete WA[e],!0)}const J$={setImmediate(e){const n=q$++;return WA[n]=!0,vB||(vB=Promise.resolve()),vB.then(()=>sG(n)&&e()),n},clearImmediate(e){sG(e)}},{setImmediate:eK,clearImmediate:tK}=J$,jA={setImmediate(...e){const{delegate:n}=jA;return(n?.setImmediate||eK)(...e)},clearImmediate(e){const{delegate:n}=jA;return(n?.clearImmediate||tK)(e)},delegate:void 0};new class rK extends QN{flush(n){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;n=n||r.shift();do{if(i=n.execute(n.state,n.delay))break}while((n=r[0])&&n.id===t&&r.shift());if(this._active=!1,i){for(;(n=r[0])&&n.id===t&&r.shift();)n.unsubscribe();throw i}}}(class nK extends KN{constructor(n,t){super(n,t),this.scheduler=n,this.work=t}requestAsyncId(n,t,r=0){return null!==r&&r>0?super.requestAsyncId(n,t,r):(n.actions.push(this),n._scheduled||(n._scheduled=jA.setImmediate(n.flush.bind(n,void 0))))}recycleAsyncId(n,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(n,t,r);const{actions:o}=n;null!=t&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==t&&(jA.clearImmediate(t),n._scheduled=void 0)}});function lG(e,n=tC){return function aK(e){return ve((n,t)=>{let r=!1,i=null,o=null,d=!1;const f=()=>{if(o?.unsubscribe(),o=null,r){r=!1;const _=i;i=null,t.next(_)}d&&t.complete()},g=()=>{o=null,d&&t.complete()};n.subscribe(we(t,_=>{r=!0,i=_,o||Tn(e(_)).subscribe(o=we(t,f,g))},()=>{d=!0,(!r||!o||o.closed)&&t.complete()}))})}(()=>iH(e,n))}let mB=(()=>{class e{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new ne,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new B(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(lG(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):qn()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(qi(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,t)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=Qd(r),o=t.getElementRef().nativeElement;do{if(i==o)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Ul(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return e.\u0275fac=function(t){return new(t||e)(Lt(rr),Lt(bs),Lt(Rr,8))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),_B=(()=>{class e{constructor(t,r,i,o){this.elementRef=t,this.scrollDispatcher=r,this.ngZone=i,this.dir=o,this._destroyed=new ne,this._elementScrolled=new B(d=>this.ngZone.runOutsideAngular(()=>Ul(this.elementRef.nativeElement,"scroll").pipe(Hi(this._destroyed)).subscribe(d)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const r=this.elementRef.nativeElement,i=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=i?t.end:t.start),null==t.right&&(t.right=i?t.start:t.end),null!=t.bottom&&(t.top=r.scrollHeight-r.clientHeight-t.bottom),i&&0!=DC()?(null!=t.left&&(t.right=r.scrollWidth-r.clientWidth-t.left),2==DC()?t.left=t.right:1==DC()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=r.scrollWidth-r.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const r=this.elementRef.nativeElement;TU()?r.scrollTo(t):(null!=t.top&&(r.scrollTop=t.top),null!=t.left&&(r.scrollLeft=t.left))}measureScrollOffset(t){const r="left",i="right",o=this.elementRef.nativeElement;if("top"==t)return o.scrollTop;if("bottom"==t)return o.scrollHeight-o.clientHeight-o.scrollTop;const d=this.dir&&"rtl"==this.dir.value;return"start"==t?t=d?i:r:"end"==t&&(t=d?r:i),d&&2==DC()?t==r?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:d&&1==DC()?t==r?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:t==r?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}}return e.\u0275fac=function(t){return new(t||e)(Xe(kr),Xe(mB),Xe(rr),Xe(qu,8))},e.\u0275dir=Dn({type:e,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),e})(),kC=(()=>{class e{constructor(t,r,i){this._platform=t,this._change=new ne,this._changeListener=o=>{this._change.next(o)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,o=i.getBoundingClientRect();return{top:-o.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-o.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(lG(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return e.\u0275fac=function(t){return new(t||e)(Lt(bs),Lt(rr),Lt(Rr,8))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),NC=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({}),e})(),cG=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[PC,NC,PC,NC]}),e})();const uG=TU();class lK{constructor(n,t){this._viewportRuler=n,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const n=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=n.style.left||"",this._previousHTMLStyles.top=n.style.top||"",n.style.left=yo(-this._previousScrollPosition.left),n.style.top=yo(-this._previousScrollPosition.top),n.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const n=this._document.documentElement,r=n.style,i=this._document.body.style,o=r.scrollBehavior||"",d=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,n.classList.remove("cdk-global-scrollblock"),uG&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),uG&&(r.scrollBehavior=o,i.scrollBehavior=d)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class cK{constructor(n,t,r,i){this._scrollDispatcher=n,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(n){this._overlayRef=n}enable(){if(this._scrollSubscription)return;const n=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=n.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=n.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class dG{enable(){}disable(){}attach(){}}function yB(e,n){return n.some(t=>e.bottom<t.top||e.top>t.bottom||e.right<t.left||e.left>t.right)}function hG(e,n){return n.some(t=>e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right)}class uK{constructor(n,t,r,i){this._scrollDispatcher=n,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(n){this._overlayRef=n}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();yB(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let dK=(()=>{class e{constructor(t,r,i,o){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new dG,this.close=d=>new cK(this._scrollDispatcher,this._ngZone,this._viewportRuler,d),this.block=()=>new lK(this._viewportRuler,this._document),this.reposition=d=>new uK(this._scrollDispatcher,this._viewportRuler,this._ngZone,d),this._document=o}}return e.\u0275fac=function(t){return new(t||e)(Lt(mB),Lt(kC),Lt(rr),Lt(Rr))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class ZA{constructor(n){if(this.scrollStrategy=new dG,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,n){const t=Object.keys(n);for(const r of t)void 0!==n[r]&&(this[r]=n[r])}}}class hK{constructor(n,t){this.connectionPair=n,this.scrollableViewProperties=t}}let fG=(()=>{class e{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return e.\u0275fac=function(t){return new(t||e)(Lt(Rr))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),fK=(()=>{class e extends fG{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const o=this._attachedOverlays;for(let d=o.length-1;d>-1;d--)if(o[d]._keydownEvents.observers.length>0){const f=o[d]._keydownEvents;this._ngZone?this._ngZone.run(()=>f.next(i)):f.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return e.\u0275fac=function(t){return new(t||e)(Lt(Rr),Lt(rr,8))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),pK=(()=>{class e extends fG{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=Ig(o)},this._clickListener=o=>{const d=Ig(o),f="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:d;this._pointerDownEventTarget=null;const g=this._attachedOverlays.slice();for(let _=g.length-1;_>-1;_--){const C=g[_];if(C._outsidePointerEvents.observers.length<1||!C.hasAttached())continue;if(C.overlayElement.contains(d)||C.overlayElement.contains(f))break;const S=C._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>S.next(o)):S.next(o)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return e.\u0275fac=function(t){return new(t||e)(Lt(Rr),Lt(bs),Lt(rr,8))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),YA=(()=>{class e{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||oB()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<i.length;o++)i[o].remove()}const r=this._document.createElement("div");r.classList.add(t),oB()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return e.\u0275fac=function(t){return new(t||e)(Lt(Rr),Lt(bs))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class FC{constructor(n,t,r,i,o,d,f,g,_,C=!1){this._portalOutlet=n,this._host=t,this._pane=r,this._config=i,this._ngZone=o,this._keyboardDispatcher=d,this._document=f,this._location=g,this._outsideClickDispatcher=_,this._animationsDisabled=C,this._backdropElement=null,this._backdropClick=new ne,this._attachments=new ne,this._detachments=new ne,this._locationChanges=ge.EMPTY,this._backdropClickHandler=S=>this._backdropClick.next(S),this._backdropTransitionendHandler=S=>{this._disposeBackdrop(S.target)},this._keydownEvents=new ne,this._outsidePointerEvents=new ne,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(n){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(n);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(mo(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const n=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),n}dispose(){const n=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,n&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(n){n!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=n,this.hasAttached()&&(n.attach(this),this.updatePosition()))}updateSize(n){this._config={...this._config,...n},this._updateElementSize()}setDirection(n){this._config={...this._config,direction:n},this._updateElementDirection()}addPanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!0)}removePanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!1)}getDirection(){const n=this._config.direction;return n?"string"==typeof n?n:n.value:"ltr"}updateScrollStrategy(n){n!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=n,this.hasAttached()&&(n.attach(this),n.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const n=this._pane.style;n.width=yo(this._config.width),n.height=yo(this._config.height),n.minWidth=yo(this._config.minWidth),n.minHeight=yo(this._config.minHeight),n.maxWidth=yo(this._config.maxWidth),n.maxHeight=yo(this._config.maxHeight)}_togglePointerEvents(n){this._pane.style.pointerEvents=n?"":"none"}_attachBackdrop(){const n="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(n)})}):this._backdropElement.classList.add(n)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const n=this._backdropElement;if(n){if(this._animationsDisabled)return void this._disposeBackdrop(n);n.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{n.addEventListener("transitionend",this._backdropTransitionendHandler)}),n.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(n)},500))}}_toggleClasses(n,t,r){const i=VA(t||[]).filter(o=>!!o);i.length&&(r?n.classList.add(...i):n.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const n=this._ngZone.onStable.pipe(Hi(Oa(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),n.unsubscribe())})})}_disposeScrollStrategy(){const n=this._scrollStrategy;n&&(n.disable(),n.detach&&n.detach())}_disposeBackdrop(n){n&&(n.removeEventListener("click",this._backdropClickHandler),n.removeEventListener("transitionend",this._backdropTransitionendHandler),n.remove(),this._backdropElement===n&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const pG="cdk-overlay-connected-position-bounding-box",gK=/([A-Za-z%]+)$/;class vK{constructor(n,t,r,i,o){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ne,this._resizeSubscription=ge.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(n)}get positions(){return this._preferredPositions}attach(n){this._validatePositions(),n.hostElement.classList.add(pG),this._overlayRef=n,this._boundingBox=n.hostElement,this._pane=n.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const n=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,o=[];let d;for(let f of this._preferredPositions){let g=this._getOriginPoint(n,i,f),_=this._getOverlayPoint(g,t,f),C=this._getOverlayFit(_,t,r,f);if(C.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(f,g);this._canFitWithFlexibleDimensions(C,_,r)?o.push({position:f,origin:g,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(g,f)}):(!d||d.overlayFit.visibleArea<C.visibleArea)&&(d={overlayFit:C,overlayPoint:_,originPoint:g,position:f,overlayRect:t})}if(o.length){let f=null,g=-1;for(const _ of o){const C=_.boundingBoxRect.width*_.boundingBoxRect.height*(_.position.weight||1);C>g&&(g=C,f=_)}return this._isPushed=!1,void this._applyPosition(f.position,f.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(d.position,d.originPoint);this._applyPosition(d.position,d.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Lg(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(pG),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const n=this._lastPosition;if(n){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,n);this._applyPosition(n,t)}else this.apply()}withScrollableContainers(n){return this._scrollables=n,this}withPositions(n){return this._preferredPositions=n,-1===n.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(n){return this._viewportMargin=n,this}withFlexibleDimensions(n=!0){return this._hasFlexibleDimensions=n,this}withGrowAfterOpen(n=!0){return this._growAfterOpen=n,this}withPush(n=!0){return this._canPush=n,this}withLockedPosition(n=!0){return this._positionLocked=n,this}setOrigin(n){return this._origin=n,this}withDefaultOffsetX(n){return this._offsetX=n,this}withDefaultOffsetY(n){return this._offsetY=n,this}withTransformOriginOn(n){return this._transformOriginSelector=n,this}_getOriginPoint(n,t,r){let i,o;if("center"==r.originX)i=n.left+n.width/2;else{const d=this._isRtl()?n.right:n.left,f=this._isRtl()?n.left:n.right;i="start"==r.originX?d:f}return t.left<0&&(i-=t.left),o="center"==r.originY?n.top+n.height/2:"top"==r.originY?n.top:n.bottom,t.top<0&&(o-=t.top),{x:i,y:o}}_getOverlayPoint(n,t,r){let i,o;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,o="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:n.x+i,y:n.y+o}}_getOverlayFit(n,t,r,i){const o=vG(t);let{x:d,y:f}=n,g=this._getOffset(i,"x"),_=this._getOffset(i,"y");g&&(d+=g),_&&(f+=_);let k=0-f,z=f+o.height-r.height,te=this._subtractOverflows(o.width,0-d,d+o.width-r.width),pe=this._subtractOverflows(o.height,k,z),Me=te*pe;return{visibleArea:Me,isCompletelyWithinViewport:o.width*o.height===Me,fitsInViewportVertically:pe===o.height,fitsInViewportHorizontally:te==o.width}}_canFitWithFlexibleDimensions(n,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,o=r.right-t.x,d=gG(this._overlayRef.getConfig().minHeight),f=gG(this._overlayRef.getConfig().minWidth),_=n.fitsInViewportHorizontally||null!=f&&f<=o;return(n.fitsInViewportVertically||null!=d&&d<=i)&&_}return!1}_pushOverlayOnScreen(n,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:n.x+this._previousPushAmount.x,y:n.y+this._previousPushAmount.y};const i=vG(t),o=this._viewportRect,d=Math.max(n.x+i.width-o.width,0),f=Math.max(n.y+i.height-o.height,0),g=Math.max(o.top-r.top-n.y,0),_=Math.max(o.left-r.left-n.x,0);let C=0,S=0;return C=i.width<=o.width?_||-d:n.x<this._viewportMargin?o.left-r.left-n.x:0,S=i.height<=o.height?g||-f:n.y<this._viewportMargin?o.top-r.top-n.y:0,this._previousPushAmount={x:C,y:S},{x:n.x+C,y:n.y+S}}_applyPosition(n,t){if(this._setTransformOrigin(n),this._setOverlayElementStyles(t,n),this._setBoundingBoxStyles(t,n),n.panelClass&&this._addPanelClasses(n.panelClass),this._lastPosition=n,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new hK(n,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(n){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=n.overlayY;r="center"===n.overlayX?"center":this._isRtl()?"start"===n.overlayX?"right":"left":"start"===n.overlayX?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(n,t){const r=this._viewportRect,i=this._isRtl();let o,d,f,C,S,k;if("top"===t.overlayY)d=n.y,o=r.height-d+this._viewportMargin;else if("bottom"===t.overlayY)f=r.height-n.y+2*this._viewportMargin,o=r.height-f+this._viewportMargin;else{const z=Math.min(r.bottom-n.y+r.top,n.y),te=this._lastBoundingBoxSize.height;o=2*z,d=n.y-z,o>te&&!this._isInitialRender&&!this._growAfterOpen&&(d=n.y-te/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)k=r.width-n.x+this._viewportMargin,C=n.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)S=n.x,C=r.right-n.x;else{const z=Math.min(r.right-n.x+r.left,n.x),te=this._lastBoundingBoxSize.width;C=2*z,S=n.x-z,C>te&&!this._isInitialRender&&!this._growAfterOpen&&(S=n.x-te/2)}return{top:d,left:S,bottom:f,right:k,width:C,height:o}}_setBoundingBoxStyles(n,t){const r=this._calculateBoundingBoxRect(n,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,d=this._overlayRef.getConfig().maxWidth;i.height=yo(r.height),i.top=yo(r.top),i.bottom=yo(r.bottom),i.width=yo(r.width),i.left=yo(r.left),i.right=yo(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",o&&(i.maxHeight=yo(o)),d&&(i.maxWidth=yo(d))}this._lastBoundingBoxSize=r,Lg(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Lg(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Lg(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(n,t){const r={},i=this._hasExactPosition(),o=this._hasFlexibleDimensions,d=this._overlayRef.getConfig();if(i){const C=this._viewportRuler.getViewportScrollPosition();Lg(r,this._getExactOverlayY(t,n,C)),Lg(r,this._getExactOverlayX(t,n,C))}else r.position="static";let f="",g=this._getOffset(t,"x"),_=this._getOffset(t,"y");g&&(f+=`translateX(${g}px) `),_&&(f+=`translateY(${_}px)`),r.transform=f.trim(),d.maxHeight&&(i?r.maxHeight=yo(d.maxHeight):o&&(r.maxHeight="")),d.maxWidth&&(i?r.maxWidth=yo(d.maxWidth):o&&(r.maxWidth="")),Lg(this._pane.style,r)}_getExactOverlayY(n,t,r){let i={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,n);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),"bottom"===n.overlayY?i.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":i.top=yo(o.y),i}_getExactOverlayX(n,t,r){let d,i={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,n);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),d=this._isRtl()?"end"===n.overlayX?"left":"right":"end"===n.overlayX?"right":"left","right"===d?i.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":i.left=yo(o.x),i}_getScrollVisibility(){const n=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:hG(n,r),isOriginOutsideView:yB(n,r),isOverlayClipped:hG(t,r),isOverlayOutsideView:yB(t,r)}}_subtractOverflows(n,...t){return t.reduce((r,i)=>r-Math.max(i,0),n)}_getNarrowedViewportRect(){const n=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+n-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:n-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(n,t){return"x"===t?n.offsetX??this._offsetX:n.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(n){this._pane&&VA(n).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(n=>{this._pane.classList.remove(n)}),this._appliedPanelClasses=[])}_getOriginRect(){const n=this._origin;if(n instanceof kr)return n.nativeElement.getBoundingClientRect();if(n instanceof Element)return n.getBoundingClientRect();const t=n.width||0,r=n.height||0;return{top:n.y,bottom:n.y+r,left:n.x,right:n.x+t,height:r,width:t}}}function Lg(e,n){for(let t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}function gG(e){if("number"!=typeof e&&null!=e){const[n,t]=e.split(gK);return t&&"px"!==t?null:parseFloat(n)}return e||null}function vG(e){return{top:Math.floor(e.top),right:Math.floor(e.right),bottom:Math.floor(e.bottom),left:Math.floor(e.left),width:Math.floor(e.width),height:Math.floor(e.height)}}const mG="cdk-global-overlay-wrapper";class mK{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(n){const t=n.getConfig();this._overlayRef=n,this._width&&!t.width&&n.updateSize({width:this._width}),this._height&&!t.height&&n.updateSize({height:this._height}),n.hostElement.classList.add(mG),this._isDisposed=!1}top(n=""){return this._bottomOffset="",this._topOffset=n,this._alignItems="flex-start",this}left(n=""){return this._xOffset=n,this._xPosition="left",this}bottom(n=""){return this._topOffset="",this._bottomOffset=n,this._alignItems="flex-end",this}right(n=""){return this._xOffset=n,this._xPosition="right",this}start(n=""){return this._xOffset=n,this._xPosition="start",this}end(n=""){return this._xOffset=n,this._xPosition="end",this}width(n=""){return this._overlayRef?this._overlayRef.updateSize({width:n}):this._width=n,this}height(n=""){return this._overlayRef?this._overlayRef.updateSize({height:n}):this._height=n,this}centerHorizontally(n=""){return this.left(n),this._xPosition="center",this}centerVertically(n=""){return this.top(n),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const n=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:o,maxWidth:d,maxHeight:f}=r,g=!("100%"!==i&&"100vw"!==i||d&&"100%"!==d&&"100vw"!==d),_=!("100%"!==o&&"100vh"!==o||f&&"100%"!==f&&"100vh"!==f),C=this._xPosition,S=this._xOffset,k="rtl"===this._overlayRef.getConfig().direction;let z="",te="",pe="";g?pe="flex-start":"center"===C?(pe="center",k?te=S:z=S):k?"left"===C||"end"===C?(pe="flex-end",z=S):("right"===C||"start"===C)&&(pe="flex-start",te=S):"left"===C||"start"===C?(pe="flex-start",z=S):("right"===C||"end"===C)&&(pe="flex-end",te=S),n.position=this._cssPosition,n.marginLeft=g?"0":z,n.marginTop=_?"0":this._topOffset,n.marginBottom=this._bottomOffset,n.marginRight=g?"0":te,t.justifyContent=pe,t.alignItems=_?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const n=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(mG),r.justifyContent=r.alignItems=n.marginTop=n.marginBottom=n.marginLeft=n.marginRight=n.position="",this._overlayRef=null,this._isDisposed=!0}}let _K=(()=>{class e{constructor(t,r,i,o){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=o}global(){return new mK}flexibleConnectedTo(t){return new vK(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return e.\u0275fac=function(t){return new(t||e)(Lt(kC),Lt(Rr),Lt(bs),Lt(YA))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),yK=0,su=(()=>{class e{constructor(t,r,i,o,d,f,g,_,C,S,k,z){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=o,this._keyboardDispatcher=d,this._injector=f,this._ngZone=g,this._document=_,this._directionality=C,this._location=S,this._outsideClickDispatcher=k,this._animationsModuleType=z}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),o=this._createPortalOutlet(i),d=new ZA(t);return d.direction=d.direction||this._directionality.value,new FC(o,r,i,d,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+yK++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(zd)),new MX(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return e.\u0275fac=function(t){return new(t||e)(Lt(dK),Lt(YA),Lt(Sd),Lt(_K),Lt(fK),Lt(Wa),Lt(rr),Lt(Rr),Lt(qu),Lt(jd),Lt(pK),Lt(Zo,8))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();const bK=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],_G=new on("cdk-connected-overlay-scroll-strategy");let yG=(()=>{class e{constructor(t){this.elementRef=t}}return e.\u0275fac=function(t){return new(t||e)(Xe(kr))},e.\u0275dir=Dn({type:e,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),e})(),bG=(()=>{class e{constructor(t,r,i,o,d){this._overlay=t,this._dir=d,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=ge.EMPTY,this._attachSubscription=ge.EMPTY,this._detachSubscription=ge.EMPTY,this._positionSubscription=ge.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new Mn,this.positionChange=new Mn,this.attach=new Mn,this.detach=new Mn,this.overlayKeydown=new Mn,this.overlayOutsideClick=new Mn,this._templatePortal=new NA(r,i),this._scrollStrategyFactory=o,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=xr(t)}get lockPosition(){return this._lockPosition}set lockPosition(t){this._lockPosition=xr(t)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(t){this._flexibleDimensions=xr(t)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(t){this._growAfterOpen=xr(t)}get push(){return this._push}set push(t){this._push=xr(t)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=bK);const t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(r=>{this.overlayKeydown.next(r),27===r.keyCode&&!this.disableClose&&!Tc(r)&&(r.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(r=>{this.overlayOutsideClick.next(r)})}_buildConfig(){const t=this._position=this.positionStrategy||this._createPositionStrategy(),r=new ZA({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(r.width=this.width),(this.height||0===this.height)&&(r.height=this.height),(this.minWidth||0===this.minWidth)&&(r.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(r.minHeight=this.minHeight),this.backdropClass&&(r.backdropClass=this.backdropClass),this.panelClass&&(r.panelClass=this.panelClass),r}_updatePositionStrategy(t){const r=this.positions.map(i=>({originX:i.originX,originY:i.originY,overlayX:i.overlayX,overlayY:i.overlayY,offsetX:i.offsetX||this.offsetX,offsetY:i.offsetY||this.offsetY,panelClass:i.panelClass||void 0}));return t.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(r).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const t=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(t),t}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof yG?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(_4(()=>this.positionChange.observers.length>0)).subscribe(t=>{this.positionChange.emit(t),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(Xe(su),Xe(hl),Xe(Lo),Xe(_G),Xe(qu,8))},e.\u0275dir=Dn({type:e,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[Ki]}),e})();const CK={provide:_G,deps:[su],useFactory:function xK(e){return()=>e.scrollStrategies.reposition()}};let bB=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({providers:[su,CK],imports:[PC,gy,cG,cG]}),e})();function wK(e,n){}class XA{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let xG=(()=>{class e extends nB{constructor(t,r,i,o,d,f,g,_){super(),this._elementRef=t,this._focusTrapFactory=r,this._config=o,this._interactivityChecker=d,this._ngZone=f,this._overlayRef=g,this._focusMonitor=_,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=C=>{this._portalOutlet.hasAttached();const S=this._portalOutlet.attachDomPortal(C);return this._contentAttached(),S},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=i}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),r}attachTemplatePortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let r=null;if("string"==typeof t?r=this._document.querySelector(t):"boolean"==typeof t?r=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(r=t),this._config.restoreFocus&&r&&"function"==typeof r.focus){const i=aB(),o=this._elementRef.nativeElement;(!i||i===this._document.body||i===o||o.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=aB();return t===r||t.contains(r)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=aB())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return e.\u0275fac=function(t){return new(t||e)(Xe(kr),Xe(HA),Xe(Rr,8),Xe(XA),Xe(IC),Xe(rr),Xe(FC),Xe(Ac))},e.\u0275cmp=Zn({type:e,selectors:[["cdk-dialog-container"]],viewQuery:function(t,r){if(1&t&&Wr(FA,7),2&t){let i;Kn(i=Qn())&&(r._portalOutlet=i.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,r){2&t&&Er("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[Gn],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,r){1&t&&ar(0,wK,0,0,"ng-template",0)},dependencies:[FA],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),e})();class xB{constructor(n,t){this.overlayRef=n,this.config=t,this.closed=new ne,this.disableClose=t.disableClose,this.backdropClick=n.backdropClick(),this.keydownEvents=n.keydownEvents(),this.outsidePointerEvents=n.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(r=>{27===r.keyCode&&!this.disableClose&&!Tc(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(n,t){if(this.containerInstance){const r=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this.overlayRef.dispose(),r.next(n),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(n="",t=""){return this.overlayRef.updateSize({width:n,height:t}),this}addPanelClass(n){return this.overlayRef.addPanelClass(n),this}removePanelClass(n){return this.overlayRef.removePanelClass(n),this}}const CG=new on("DialogScrollStrategy"),SK=new on("DialogData"),DK=new on("DefaultDialogConfig"),TK={provide:CG,deps:[su],useFactory:function MK(e){return()=>e.scrollStrategies.block()}};let EK=0,wG=(()=>{class e{constructor(t,r,i,o,d,f){this._overlay=t,this._injector=r,this._defaultOptions=i,this._parentDialog=o,this._overlayContainer=d,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ne,this._afterOpenedAtThisLevel=new ne,this._ariaHiddenElements=new Map,this.afterAllClosed=cC(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(yl(void 0))),this._scrollStrategy=f}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(t,r){(r={...this._defaultOptions||new XA,...r}).id=r.id||"cdk-dialog-"+EK++,r.id&&this.getDialogById(r.id);const o=this._getOverlayConfig(r),d=this._overlay.create(o),f=new xB(d,r),g=this._attachContainer(d,f,r);return f.containerInstance=g,this._attachDialogContent(t,f,g,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(f),f.closed.subscribe(()=>this._removeOpenDialog(f,!0)),this.afterOpened.next(f),f}closeAll(){CB(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){CB(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),CB(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const r=new ZA({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachContainer(t,r,i){const o=i.injector||i.viewContainerRef?.injector,d=[{provide:XA,useValue:i},{provide:xB,useValue:r},{provide:FC,useValue:t}];let f;i.container?"function"==typeof i.container?f=i.container:(f=i.container.type,d.push(...i.container.providers(i))):f=xG;const g=new kA(f,i.viewContainerRef,Wa.create({parent:o||this._injector,providers:d}),i.componentFactoryResolver);return t.attach(g).instance}_attachDialogContent(t,r,i,o){if(t instanceof hl){const d=this._createInjector(o,r,i,void 0);let f={$implicit:o.data,dialogRef:r};o.templateContext&&(f={...f,..."function"==typeof o.templateContext?o.templateContext():o.templateContext}),i.attachTemplatePortal(new NA(t,null,f,d))}else{const d=this._createInjector(o,r,i,this._injector),f=i.attachComponentPortal(new kA(t,o.viewContainerRef,d,o.componentFactoryResolver));r.componentInstance=f.instance}}_createInjector(t,r,i,o){const d=t.injector||t.viewContainerRef?.injector,f=[{provide:SK,useValue:t.data},{provide:xB,useValue:r}];return t.providers&&("function"==typeof t.providers?f.push(...t.providers(r,t,i)):f.push(...t.providers)),t.direction&&(!d||!d.get(qu,null,nr.Optional))&&f.push({provide:qu,useValue:{value:t.direction,change:qn()}}),Wa.create({parent:d||o,providers:f})}_removeOpenDialog(t,r){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,d)=>{o?d.setAttribute("aria-hidden",o):d.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let i=r.length-1;i>-1;i--){const o=r[i];o!==t&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return e.\u0275fac=function(t){return new(t||e)(Lt(su),Lt(Wa),Lt(DK,8),Lt(e,12),Lt(YA),Lt(CG))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();function CB(e,n){let t=e.length;for(;t--;)n(e[t])}let AK=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({providers:[wG,TK],imports:[bB,gy,v$,gy]}),e})();class SG{}const eh="*";function th(e,n){return{type:7,name:e,definitions:n,options:{}}}function Gl(e,n=null){return{type:4,styles:n,timings:e}}function DG(e,n=null){return{type:3,steps:e,options:n}}function MG(e,n=null){return{type:2,steps:e,options:n}}function xa(e){return{type:6,styles:e,offset:null}}function xl(e,n,t){return{type:0,name:e,styles:n,options:t}}function TG(e){return{type:5,steps:e}}function Cl(e,n,t=null){return{type:1,expr:e,animation:n,options:t}}function wB(e=null){return{type:9,options:e}}function SB(e,n,t=null){return{type:11,selector:e,animation:n,options:t}}function EG(e){Promise.resolve().then(e)}class BC{constructor(n=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=n+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){EG(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const t="start"==n?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class AG{constructor(n){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=n;let t=0,r=0,i=0;const o=this.players.length;0==o?EG(()=>this._onFinish()):this.players.forEach(d=>{d.onDone(()=>{++t==o&&this._onFinish()}),d.onDestroy(()=>{++r==o&&this._onDestroy()}),d.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((d,f)=>Math.max(d,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const t=n*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const n=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const t="start"==n?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function PK(e,n){}const Cy={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},RK={dialogContainer:th("dialogContainer",[xl("void, exit",xa({opacity:0,transform:"scale(0.7)"})),xl("enter",xa({transform:"none"})),Cl("* => enter",DG([Gl("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",xa({transform:"none",opacity:1})),SB("@*",wB(),{optional:!0})]),Cy),Cl("* => void, * => exit",DG([Gl("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",xa({opacity:0})),SB("@*",wB(),{optional:!0})]),Cy)])};class $A{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=Cy.params.enterAnimationDuration,this.exitAnimationDuration=Cy.params.exitAnimationDuration}}let LK=(()=>{class e extends xG{constructor(t,r,i,o,d,f,g,_){super(t,r,i,o,d,f,g,_),this._animationStateChanged=new Mn}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}}return e.\u0275fac=function(t){return new(t||e)(Xe(kr),Xe(HA),Xe(Rr,8),Xe($A),Xe(IC),Xe(rr),Xe(FC),Xe(Ac))},e.\u0275cmp=Zn({type:e,selectors:[["ng-component"]],features:[Gn],decls:0,vars:0,template:function(t,r){},encapsulation:2}),e})(),OK=(()=>{class e extends LK{constructor(t,r,i,o,d,f,g,_,C){super(t,r,i,o,d,f,g,C),this._changeDetectorRef=_,this._state="enter"}_onAnimationDone({toState:t,totalTime:r}){"enter"===t?this._openAnimationDone(r):"exit"===t&&this._animationStateChanged.next({state:"closed",totalTime:r})}_onAnimationStart({toState:t,totalTime:r}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:r}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:r})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||Cy.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||Cy.params.exitAnimationDuration}}}}return e.\u0275fac=function(t){return new(t||e)(Xe(kr),Xe(HA),Xe(Rr,8),Xe($A),Xe(IC),Xe(rr),Xe(FC),Xe(Wi),Xe(Ac))},e.\u0275cmp=Zn({type:e,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(t,r){1&t&&jm("@dialogContainer.start",function(o){return r._onAnimationStart(o)})("@dialogContainer.done",function(o){return r._onAnimationDone(o)}),2&t&&(Nl("id",r._config.id),Er("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),Xh("@dialogContainer",r._getAnimationState()))},features:[Gn],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,r){1&t&&ar(0,PK,0,0,"ng-template",0)},dependencies:[FA],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[RK.dialogContainer]}}),e})();class kK{constructor(n,t,r){this._ref=n,this._containerInstance=r,this._afterOpened=new ne,this._beforeClosed=new ne,this._state=0,this.disableClose=t.disableClose,this.id=n.id,r._animationStateChanged.pipe(qi(i=>"opened"===i.state),mo(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),r._animationStateChanged.pipe(qi(i=>"closed"===i.state),mo(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),n.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Oa(this.backdropClick(),this.keydownEvents().pipe(qi(i=>27===i.keyCode&&!this.disableClose&&!Tc(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),function NK(e,n,t){e._closeInteractionType=n,e.close(t)}(this,"keydown"===i.type?"keyboard":"mouse"))})}close(n){this._result=n,this._containerInstance._animationStateChanged.pipe(qi(t=>"closing"===t.state),mo(1)).subscribe(t=>{this._beforeClosed.next(n),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(n){let t=this._ref.config.positionStrategy;return n&&(n.left||n.right)?n.left?t.left(n.left):t.right(n.right):t.centerHorizontally(),n&&(n.top||n.bottom)?n.top?t.top(n.top):t.bottom(n.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(n="",t=""){return this._ref.updateSize(n,t),this}addPanelClass(n){return this._ref.addPanelClass(n),this}removePanelClass(n){return this._ref.removePanelClass(n),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const FK=new on("MatDialogData"),BK=new on("mat-dialog-default-options"),IG=new on("mat-dialog-scroll-strategy"),zK={provide:IG,deps:[su],useFactory:function VK(e){return()=>e.scrollStrategies.block()}};let HK=0,UK=(()=>{class e{constructor(t,r,i,o,d,f,g,_,C,S){this._overlay=t,this._defaultOptions=i,this._parentDialog=o,this._dialogRefConstructor=g,this._dialogContainerType=_,this._dialogDataToken=C,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ne,this._afterOpenedAtThisLevel=new ne,this._idPrefix="mat-dialog-",this.afterAllClosed=cC(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(yl(void 0))),this._scrollStrategy=f,this._dialog=r.get(wG)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,r){let i;(r={...this._defaultOptions||new $A,...r}).id=r.id||`${this._idPrefix}${HK++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();const o=this._dialog.open(t,{...r,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:$A,useValue:r},{provide:XA,useValue:r}]},templateContext:()=>({dialogRef:i}),providers:(d,f,g)=>(i=new this._dialogRefConstructor(d,r,g),i.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:g},{provide:this._dialogDataToken,useValue:f.data},{provide:this._dialogRefConstructor,useValue:i}])});return i.componentInstance=o.componentInstance,this.openDialogs.push(i),this.afterOpened.next(i),i.afterClosed().subscribe(()=>{const d=this.openDialogs.indexOf(i);d>-1&&(this.openDialogs.splice(d,1),this.openDialogs.length||this._getAfterAllClosed().next())}),i}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}}return e.\u0275fac=function(t){gc()},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})(),PG=(()=>{class e extends UK{constructor(t,r,i,o,d,f,g,_){super(t,r,o,f,g,d,kK,OK,FK,_)}}return e.\u0275fac=function(t){return new(t||e)(Lt(su),Lt(Wa),Lt(jd,8),Lt(BK,8),Lt(IG),Lt(e,12),Lt(YA),Lt(Zo,8))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})(),GK=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({providers:[PG,zK],imports:[AK,bB,gy,ti,ti]}),e})();class WK{}class yf{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?this.lazyInit="string"==typeof n?()=>{this.headers=new Map,n.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=i.toLowerCase(),d=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(d):this.headers.set(o,[d])}})}:()=>{this.headers=new Map,Object.keys(n).forEach(t=>{let r=n[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const t=this.headers.get(n.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,t){return this.clone({name:n,value:t,op:"a"})}set(n,t){return this.clone({name:n,value:t,op:"s"})}delete(n,t){return this.clone({name:n,value:t,op:"d"})}maybeSetNormalizedName(n,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,n)}init(){this.lazyInit&&(this.lazyInit instanceof yf?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(t=>{this.headers.set(t,n.headers.get(t)),this.normalizedNames.set(t,n.normalizedNames.get(t))})}clone(n){const t=new yf;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof yf?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([n]),t}applyUpdate(n){const t=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(n.name,t);const i=("a"===n.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=n.value;if(o){let d=this.headers.get(t);if(!d)return;d=d.filter(f=>-1===o.indexOf(f)),0===d.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,d)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>n(this.normalizedNames.get(t),this.headers.get(t)))}}class jK{encodeKey(n){return RG(n)}encodeValue(n){return RG(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const YK=/%(\d[a-f0-9])/gi,XK={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function RG(e){return encodeURIComponent(e).replace(YK,(n,t)=>XK[t]??n)}function KA(e){return`${e}`}class bf{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new jK,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function ZK(e,n){const t=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[d,f]=-1==o?[n.decodeKey(i),""]:[n.decodeKey(i.slice(0,o)),n.decodeValue(i.slice(o+1))],g=t.get(d)||[];g.push(f),t.set(d,g)}),t}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(t=>{const r=n.fromObject[t],i=Array.isArray(r)?r.map(KA):[KA(r)];this.map.set(t,i)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const t=this.map.get(n);return t?t[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,t){return this.clone({param:n,value:t,op:"a"})}appendAll(n){const t=[];return Object.keys(n).forEach(r=>{const i=n[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(n,t){return this.clone({param:n,value:t,op:"s"})}delete(n,t){return this.clone({param:n,value:t,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const t=this.encoder.encodeKey(n);return this.map.get(n).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const t=new bf({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(n),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const t=("a"===n.op?this.map.get(n.param):void 0)||[];t.push(KA(n.value)),this.map.set(n.param,t);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let r=this.map.get(n.param)||[];const i=r.indexOf(KA(n.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class $K{constructor(){this.map=new Map}set(n,t){return this.map.set(n,t),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function LG(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function OG(e){return typeof Blob<"u"&&e instanceof Blob}function kG(e){return typeof FormData<"u"&&e instanceof FormData}class VC{constructor(n,t,r,i){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function KK(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new yf),this.context||(this.context=new $K),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+d}}else this.params=new bf,this.urlWithParams=t}serializeBody(){return null===this.body?null:LG(this.body)||OG(this.body)||kG(this.body)||function QK(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof bf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||kG(this.body)?null:OG(this.body)?this.body.type||null:LG(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof bf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const t=n.method||this.method,r=n.url||this.url,i=n.responseType||this.responseType,o=void 0!==n.body?n.body:this.body,d=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,f=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let g=n.headers||this.headers,_=n.params||this.params;const C=n.context??this.context;return void 0!==n.setHeaders&&(g=Object.keys(n.setHeaders).reduce((S,k)=>S.set(k,n.setHeaders[k]),g)),n.setParams&&(_=Object.keys(n.setParams).reduce((S,k)=>S.set(k,n.setParams[k]),_)),new VC(t,r,o,{params:_,headers:g,context:C,reportProgress:f,responseType:i,withCredentials:d})}}var xs=(()=>((xs=xs||{})[xs.Sent=0]="Sent",xs[xs.UploadProgress=1]="UploadProgress",xs[xs.ResponseHeader=2]="ResponseHeader",xs[xs.DownloadProgress=3]="DownloadProgress",xs[xs.Response=4]="Response",xs[xs.User=5]="User",xs))();class MB extends class qK{constructor(n,t=200,r="OK"){this.headers=n.headers||new yf,this.status=void 0!==n.status?n.status:t,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(n={}){super(n),this.type=xs.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new MB({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}function TB(e,n){return{body:n,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let FG=(()=>{class e{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof VC)o=t;else{let g,_;g=i.headers instanceof yf?i.headers:new yf(i.headers),i.params&&(_=i.params instanceof bf?i.params:new bf({fromObject:i.params})),o=new VC(t,r,void 0!==i.body?i.body:null,{headers:g,context:i.context,params:_,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const d=qn(o).pipe(gf(g=>this.handler.handle(g)));if(t instanceof VC||"events"===i.observe)return d;const f=d.pipe(qi(g=>g instanceof MB));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return f.pipe(Ae(g=>{if(null!==g.body&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return f.pipe(Ae(g=>{if(null!==g.body&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return f.pipe(Ae(g=>{if(null!==g.body&&"string"!=typeof g.body)throw new Error("Response is not a string.");return g.body}));default:return f.pipe(Ae(g=>g.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new bf).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,TB(i,r))}post(t,r,i={}){return this.request("POST",t,TB(i,r))}put(t,r,i={}){return this.request("PUT",t,TB(i,r))}}return e.\u0275fac=function(t){return new(t||e)(Lt(WK))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();const eQ=["*"];let QA;function zC(e){return function tQ(){if(void 0===QA&&(QA=null,typeof window<"u")){const e=window;void 0!==e.trustedTypes&&(QA=e.trustedTypes.createPolicy("angular#components",{createHTML:n=>n}))}return QA}()?.createHTML(e)||e}function BG(e){return Error(`Unable to find icon with the name "${e}"`)}function VG(e){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${e}".`)}function zG(e){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${e}".`)}class Og{constructor(n,t,r){this.url=n,this.svgText=t,this.options=r}}let qA=(()=>{class e{constructor(t,r,i,o){this._httpClient=t,this._sanitizer=r,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,o){return this._addSvgIconConfig(t,r,new Og(i,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,o){const d=this._sanitizer.sanitize(Ri.HTML,i);if(!d)throw zG(i);const f=zC(d);return this._addSvgIconConfig(t,r,new Og("",f,o))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new Og(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const o=this._sanitizer.sanitize(Ri.HTML,r);if(!o)throw zG(r);const d=zC(o);return this._addSvgIconSetConfig(t,new Og("",d,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(Ri.RESOURCE_URL,t);if(!r)throw VG(t);const i=this._cachedIconsByUrl.get(r);return i?qn(JA(i)):this._loadSvgIconFromConfig(new Og(t,null)).pipe(_o(o=>this._cachedIconsByUrl.set(r,o)),Ae(o=>JA(o)))}getNamedSvgIcon(t,r=""){const i=HG(r,t);let o=this._svgIconConfigs.get(i);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,t),o)return this._svgIconConfigs.set(i,o),this._getSvgFromConfig(o);const d=this._iconSetConfigs.get(r);return d?this._getSvgFromIconSetConfigs(t,d):sy(BG(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?qn(JA(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Ae(r=>JA(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?qn(i):lH(r.filter(d=>!d.svgText).map(d=>this._loadSvgIconSetFromConfig(d).pipe(Xd(f=>{const _=`Loading icon set URL: ${this._sanitizer.sanitize(Ri.RESOURCE_URL,d.url)} failed: ${f.message}`;return this._errorHandler.handleError(new Error(_)),qn(null)})))).pipe(Ae(()=>{const d=this._extractIconWithNameFromAnySet(t,r);if(!d)throw BG(t);return d}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const o=r[i];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){const d=this._svgElementFromConfig(o),f=this._extractSvgIconFromSet(d,t,o.options);if(f)return f}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(_o(r=>t.svgText=r),Ae(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?qn(null):this._fetchIcon(t).pipe(_o(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const o=t.querySelector(`[id="${r}"]`);if(!o)return null;const d=o.cloneNode(!0);if(d.removeAttribute("id"),"svg"===d.nodeName.toLowerCase())return this._setSvgAttributes(d,i);if("symbol"===d.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(d),i);const f=this._svgElementFromString(zC("<svg></svg>"));return f.appendChild(d),this._setSvgAttributes(f,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(zC("<svg></svg>")),i=t.attributes;for(let o=0;o<i.length;o++){const{name:d,value:f}=i[o];"id"!==d&&r.setAttribute(d,f)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:i}=t,o=i?.withCredentials??!1;if(!this._httpClient)throw function nQ(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const d=this._sanitizer.sanitize(Ri.RESOURCE_URL,r);if(!d)throw VG(r);const f=this._inProgressUrlFetches.get(d);if(f)return f;const g=this._httpClient.get(d,{responseType:"text",withCredentials:o}).pipe(Ae(_=>zC(_)),pA(()=>this._inProgressUrlFetches.delete(d)),Bf());return this._inProgressUrlFetches.set(d,g),g}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(HG(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const o=this._resolvers[i](r,t);if(o)return iQ(o)?new Og(o.url,null,o.options):new Og(o,null)}}}return e.\u0275fac=function(t){return new(t||e)(Lt(FG,8),Lt($N),Lt(Rr,8),Lt(fc))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function JA(e){return e.cloneNode(!0)}function HG(e,n){return e+":"+n}function iQ(e){return!(!e.url||!e.options)}const aQ=qd(class{constructor(e){this._elementRef=e}}),oQ=new on("MAT_ICON_DEFAULT_OPTIONS"),sQ=new on("mat-icon-location",{providedIn:"root",factory:function lQ(){const e=oa(Rr),n=e?e.location:null;return{getPathname:()=>n?n.pathname+n.search:""}}}),UG=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],cQ=UG.map(e=>`[${e}]`).join(", "),uQ=/^url\(['"]?#(.*?)['"]?\)$/;let nh=(()=>{class e extends aQ{constructor(t,r,i,o,d,f){super(t),this._iconRegistry=r,this._location=o,this._errorHandler=d,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=ge.EMPTY,f&&(f.color&&(this.color=this.defaultColor=f.color),f.fontSet&&(this.fontSet=f.fontSet)),i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=xr(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,o)=>{i.forEach(d=>{o.setAttribute(d.name,`url('${t}#${d.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(cQ),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)UG.forEach(d=>{const f=r[o],g=f.getAttribute(d),_=g?g.match(uQ):null;if(_){let C=i.get(f);C||(C=[],i.set(f,C)),C.push({name:d,value:_[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(mo(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${o.message}`))})}}}return e.\u0275fac=function(t){return new(t||e)(Xe(kr),Xe(qA),Ds("aria-hidden"),Xe(sQ),Xe(fc),Xe(oQ,8))},e.\u0275cmp=Zn({type:e,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(Er("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),ui("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Gn],ngContentSelectors:eQ,decls:1,vars:0,template:function(t,r){1&t&&(zi(),Ur(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),e})(),GG=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[ti,ti]}),e})();const WG=SC({passive:!0});let dQ=(()=>{class e{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return La;const r=Qd(t),i=this._monitoredElements.get(r);if(i)return i.subject;const o=new ne,d="cdk-text-field-autofilled",f=g=>{"cdk-text-field-autofill-start"!==g.animationName||r.classList.contains(d)?"cdk-text-field-autofill-end"===g.animationName&&r.classList.contains(d)&&(r.classList.remove(d),this._ngZone.run(()=>o.next({target:g.target,isAutofilled:!1}))):(r.classList.add(d),this._ngZone.run(()=>o.next({target:g.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",f,WG),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:o,unlisten:()=>{r.removeEventListener("animationstart",f,WG)}}),o}stopMonitoring(t){const r=Qd(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}}return e.\u0275fac=function(t){return new(t||e)(Lt(bs),Lt(rr))},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),jG=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({}),e})();const hQ=["connectionContainer"],fQ=["inputContainer"],pQ=["label"];function gQ(e,n){1&e&&(Ni(0),qe(1,"div",14),Cn(2,"div",15)(3,"div",16)(4,"div",17),nt(),qe(5,"div",18),Cn(6,"div",15)(7,"div",16)(8,"div",17),nt(),Fi())}function vQ(e,n){if(1&e){const t=sa();qe(0,"div",19),zt("cdkObserveContent",function(){return Kr(t),Qr(Yn().updateOutlineGap())}),Ur(1,1),nt()}2&e&&Mt("cdkObserveContentDisabled","outline"!=Yn().appearance)}function mQ(e,n){if(1&e&&(Ni(0),Ur(1,2),qe(2,"span"),Bt(3),nt(),Fi()),2&e){const t=Yn(2);Dt(3),fs(t._control.placeholder)}}function _Q(e,n){1&e&&Ur(0,3,["*ngSwitchCase","true"])}function yQ(e,n){1&e&&(qe(0,"span",23),Bt(1," *"),nt())}function bQ(e,n){if(1&e){const t=sa();qe(0,"label",20,21),zt("cdkObserveContent",function(){return Kr(t),Qr(Yn().updateOutlineGap())}),ar(2,mQ,4,1,"ng-container",12),ar(3,_Q,1,0,"ng-content",12),ar(4,yQ,2,0,"span",22),nt()}if(2&e){const t=Yn();ui("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),Mt("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),Er("for",t._control.id)("aria-owns",t._control.id),Dt(2),Mt("ngSwitchCase",!1),Dt(1),Mt("ngSwitchCase",!0),Dt(1),Mt("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function xQ(e,n){1&e&&(qe(0,"div",24),Ur(1,4),nt())}function CQ(e,n){if(1&e&&(qe(0,"div",25),Cn(1,"span",26),nt()),2&e){const t=Yn();Dt(1),ui("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function wQ(e,n){1&e&&(qe(0,"div"),Ur(1,5),nt()),2&e&&Mt("@transitionMessages",Yn()._subscriptAnimationState)}function SQ(e,n){if(1&e&&(qe(0,"div",30),Bt(1),nt()),2&e){const t=Yn(2);Mt("id",t._hintLabelId),Dt(1),fs(t.hintLabel)}}function DQ(e,n){if(1&e&&(qe(0,"div",27),ar(1,SQ,2,2,"div",28),Ur(2,6),Cn(3,"div",29),Ur(4,7),nt()),2&e){const t=Yn();Mt("@transitionMessages",t._subscriptAnimationState),Dt(1),Mt("ngIf",t.hintLabel)}}const MQ=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],TQ=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],EQ=new on("MatError"),AQ={transitionMessages:th("transitionMessages",[xl("enter",xa({opacity:1,transform:"translateY(0%)"})),Cl("void => enter",[xa({opacity:0,transform:"translateY(-5px)"}),Gl("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let eI=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Dn({type:e}),e})();const IQ=new on("MatHint");let kg=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Dn({type:e,selectors:[["mat-label"]]}),e})(),PQ=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Dn({type:e,selectors:[["mat-placeholder"]]}),e})();const ZG=new on("MatPrefix");let RQ=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Dn({type:e,selectors:[["","matPrefix",""]],features:[Gr([{provide:ZG,useExisting:e}])]}),e})();const YG=new on("MatSuffix");let LQ=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Dn({type:e,selectors:[["","matSuffix",""]],features:[Gr([{provide:YG,useExisting:e}])]}),e})(),XG=0;const kQ=qd(class{constructor(e){this._elementRef=e}},"primary"),NQ=new on("MAT_FORM_FIELD_DEFAULT_OPTIONS"),tI=new on("MatFormField");let HC=(()=>{class e extends kQ{constructor(t,r,i,o,d,f,g){super(t),this._changeDetectorRef=r,this._dir=i,this._defaults=o,this._platform=d,this._ngZone=f,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new ne,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+XG++,this._labelId="mat-form-field-label-"+XG++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==g,this.appearance=o?.appearance||"legacy",o&&(this._hideRequiredMarker=Boolean(o.hideRequiredMarker),o.color&&(this.color=this.defaultColor=o.color))}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults?.appearance||"legacy","outline"===this._appearance&&r!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=xr(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(yl(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Hi(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Hi(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),Oa(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(yl(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(yl(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Hi(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Ul(this._label.nativeElement,"transitionend").pipe(mo(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(o=>"start"===o.align):null,i=this._hintChildren?this._hintChildren.find(o=>"end"===o.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,r=this._connectionContainerRef.nativeElement,i=".mat-form-field-outline-start",o=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const C=r.querySelectorAll(`${i}, ${o}`);for(let S=0;S<C.length;S++)C[S].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let d=0,f=0;const g=r.querySelectorAll(i),_=r.querySelectorAll(o);if(this._label&&this._label.nativeElement.children.length){const C=r.getBoundingClientRect();if(0===C.width&&0===C.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const S=this._getStartEnd(C),k=t.children,z=this._getStartEnd(k[0].getBoundingClientRect());let te=0;for(let pe=0;pe<k.length;pe++)te+=k[pe].offsetWidth;d=Math.abs(z-S)-5,f=te>0?.75*te+10:0}for(let C=0;C<g.length;C++)g[C].style.width=`${d}px`;for(let C=0;C<_.length;C++)_[C].style.width=`${f}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}}return e.\u0275fac=function(t){return new(t||e)(Xe(kr),Xe(Wi),Xe(qu,8),Xe(NQ,8),Xe(bs),Xe(rr),Xe(Zo,8))},e.\u0275cmp=Zn({type:e,selectors:[["mat-form-field"]],contentQueries:function(t,r,i){if(1&t&&(Li(i,eI,5),Li(i,eI,7),Li(i,kg,5),Li(i,kg,7),Li(i,PQ,5),Li(i,EQ,5),Li(i,IQ,5),Li(i,ZG,5),Li(i,YG,5)),2&t){let o;Kn(o=Qn())&&(r._controlNonStatic=o.first),Kn(o=Qn())&&(r._controlStatic=o.first),Kn(o=Qn())&&(r._labelChildNonStatic=o.first),Kn(o=Qn())&&(r._labelChildStatic=o.first),Kn(o=Qn())&&(r._placeholderChild=o.first),Kn(o=Qn())&&(r._errorChildren=o),Kn(o=Qn())&&(r._hintChildren=o),Kn(o=Qn())&&(r._prefixChildren=o),Kn(o=Qn())&&(r._suffixChildren=o)}},viewQuery:function(t,r){if(1&t&&(Wr(hQ,7),Wr(fQ,5),Wr(pQ,5)),2&t){let i;Kn(i=Qn())&&(r._connectionContainerRef=i.first),Kn(i=Qn())&&(r._inputContainerRef=i.first),Kn(i=Qn())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,r){2&t&&ui("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[Gr([{provide:tI,useExisting:e}]),Gn],ngContentSelectors:TQ,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,r){1&t&&(zi(MQ),qe(0,"div",0)(1,"div",1,2),zt("click",function(o){return r._control.onContainerClick&&r._control.onContainerClick(o)}),ar(3,gQ,9,0,"ng-container",3),ar(4,vQ,2,1,"div",4),qe(5,"div",5,6),Ur(7),qe(8,"span",7),ar(9,bQ,5,16,"label",8),nt()(),ar(10,xQ,2,0,"div",9),nt(),ar(11,CQ,2,4,"div",10),qe(12,"div",11),ar(13,wQ,2,1,"div",12),ar(14,DQ,5,2,"div",13),nt()()),2&t&&(Dt(3),Mt("ngIf","outline"==r.appearance),Dt(1),Mt("ngIf",r._prefixChildren.length),Dt(5),Mt("ngIf",r._hasFloatingLabel()),Dt(1),Mt("ngIf",r._suffixChildren.length),Dt(1),Mt("ngIf","outline"!=r.appearance),Dt(1),Mt("ngSwitch",r._getDisplayedMessages()),Dt(1),Mt("ngSwitchCase","error"),Dt(1),Mt("ngSwitchCase","hint"))},dependencies:[Hs,Yu,yg,uB],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[AQ.transitionMessages]},changeDetection:0}),e})(),nI=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[zl,ti,zA,ti]}),e})();const EB=new on("MAT_INPUT_VALUE_ACCESSOR"),FQ=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let BQ=0;const VQ=XU(class{constructor(e,n,t,r){this._defaultErrorStateMatcher=e,this._parentForm=n,this._parentFormGroup=t,this.ngControl=r,this.stateChanges=new ne}});let AB=(()=>{class e extends VQ{constructor(t,r,i,o,d,f,g,_,C,S){super(f,o,d,i),this._elementRef=t,this._platform=r,this._autofillMonitor=_,this._formField=S,this._uid="mat-input-"+BQ++,this.focused=!1,this.stateChanges=new ne,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(te=>MU().has(te)),this._iOSKeyupListener=te=>{const pe=te.target;!pe.value&&0===pe.selectionStart&&0===pe.selectionEnd&&(pe.setSelectionRange(1,1),pe.setSelectionRange(0,0))};const k=this._elementRef.nativeElement,z=k.nodeName.toLowerCase();this._inputValueAccessor=g||k,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&C.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===z,this._isTextarea="textarea"===z,this._isInFormField=!!S,this._isNativeSelect&&(this.controlType=k.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=xr(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator($u.required)??!1}set required(t){this._required=xr(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&MU().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=xr(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const t=this._formField,r=t&&"legacy"===t.appearance&&!t._hasLabel?.()?null:this.placeholder;if(r!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=r,r?i.setAttribute("placeholder",r):i.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){FQ.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return e.\u0275fac=function(t){return new(t||e)(Xe(kr),Xe(bs),Xe(Ku,10),Xe(lC,8),Xe(oy,8),Xe(hB),Xe(EB,10),Xe(dQ),Xe(rr),Xe(tI,8))},e.\u0275dir=Dn({type:e,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,r){1&t&&zt("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&t&&(Nl("disabled",r.disabled)("required",r.required),Er("id",r.id)("data-placeholder",r.placeholder)("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required),ui("mat-input-server",r._isServer)("mat-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[Gr([{provide:eI,useExisting:e}]),Gn,Ki]}),e})(),KG=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({providers:[hB],imports:[jG,nI,ti,jG,nI]}),e})();class rI{constructor(n=!1,t,r=!0,i){this._multiple=n,this._emitChanges=r,this.compareWith=i,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new ne,t&&t.length&&(n?t.forEach(o=>this._markSelected(o)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...n){this._verifyValueAssignment(n),n.forEach(r=>this._markSelected(r));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...n){this._verifyValueAssignment(n),n.forEach(r=>this._unmarkSelected(r));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...n){this._verifyValueAssignment(n);const t=this.selected,r=new Set(n);n.forEach(o=>this._markSelected(o)),t.filter(o=>!r.has(o)).forEach(o=>this._unmarkSelected(o));const i=this._hasQueuedChanges();return this._emitChangeEvent(),i}toggle(n){return this.isSelected(n)?this.deselect(n):this.select(n)}clear(n=!0){this._unmarkAll();const t=this._hasQueuedChanges();return n&&this._emitChangeEvent(),t}isSelected(n){if(this.compareWith){for(const t of this._selection)if(this.compareWith(t,n))return!0;return!1}return this._selection.has(n)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(n){this._multiple&&this.selected&&this._selected.sort(n)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(n){this.isSelected(n)||(this._multiple||this._unmarkAll(),this.isSelected(n)||this._selection.add(n),this._emitChanges&&this._selectedToEmit.push(n))}_unmarkSelected(n){this.isSelected(n)&&(this._selection.delete(n),this._emitChanges&&this._deselectedToEmit.push(n))}_unmarkAll(){this.isEmpty()||this._selection.forEach(n=>this._unmarkSelected(n))}_verifyValueAssignment(n){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}let IB=(()=>{class e{constructor(){this._listeners=[]}notify(t,r){for(let i of this._listeners)i(t,r)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(r=>t!==r)}}ngOnDestroy(){this._listeners=[]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),qQ=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[Rg,ti,ti]}),e})();const n8={transformPanel:th("transformPanel",[Cl("void => enter-dropdown",Gl("120ms cubic-bezier(0, 0, 0.2, 1)",TG([xa({opacity:0,transform:"scale(1, 0.8)"}),xa({opacity:1,transform:"scale(1, 1)"})]))),Cl("void => enter-dialog",Gl("150ms cubic-bezier(0, 0, 0.2, 1)",TG([xa({opacity:0,transform:"scale(0.7)"}),xa({transform:"none",opacity:1})]))),Cl("* => void",Gl("100ms linear",xa({opacity:0})))]),fadeInCalendar:th("fadeInCalendar",[xl("void",xa({opacity:0})),xl("enter",xa({opacity:1})),Cl("void => *",Gl("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])},i8=function(e){return{active:e}};function pq(e,n){if(1&e){const t=sa();qe(0,"button",2),zt("click",function(){const o=Kr(t).$implicit;return Qr(Yn().select(o))}),nt()}if(2&e){const t=n.$implicit,r=Yn();Za("background-color",t),Mt("ngClass",Fl(3,i8,r.selectedColor===t))}}function gq(e,n){if(1&e){const t=sa();qe(0,"button",2),zt("click",function(){const o=Kr(t).$implicit;return Qr(Yn().select(o))}),nt()}if(2&e){const t=n.$implicit,r=Yn();Za("background-color",t),Mt("ngClass",Fl(3,i8,r.selectedColor===t))}}const vq=["button"],mq=/^\s+/,_q=/\s+$/,Sy=Math.round,yq=(Math,Math,Math,/[^0-9]/g),a8=["#ffffff","#ffff00","#ff00ff","#ff0000","#c0c0c0","#808080","#808000","#800080","#800000","#00ffff","#00ff00","#008080","#008000","#0000ff","#000080","#000000"];function o8(e,n,t){const r=e.getImageData(n,t,1,1).data;return{r:r[0],g:r[1],b:r[2]}}function Ng(e){return 1==e.length?"0"+e:""+e}function xq(e){return Math.round(255*parseFloat(e)).toString(16)}function s8(e){return Wl(e)/255}function Wl(e){return parseInt(e,16)}function l8(e,n,t,r){var i=[Ng(Sy(e).toString(16)),Ng(Sy(n).toString(16)),Ng(Sy(t).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}const xf="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",PB="[\\s|\\(]+("+xf+")[,|\\s]+("+xf+")[,|\\s]+("+xf+")\\s*\\)?",RB="[\\s|\\(]+("+xf+")[,|\\s]+("+xf+")[,|\\s]+("+xf+")[,|\\s]+("+xf+")\\s*\\)?",Fg={CSS_UNIT:new RegExp(xf),rgb:new RegExp("rgb"+PB),rgba:new RegExp("rgba"+RB),hsl:new RegExp("hsl"+PB),hsla:new RegExp("hsla"+RB),hsv:new RegExp("hsv"+PB),hsva:new RegExp("hsva"+RB),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function LB(e){let n;return e=e.replace(mq,"").replace(_q,"").toLowerCase(),(n=Fg.rgb.exec(e))?{r:n[1],g:n[2],b:n[3],a:1}:(n=Fg.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Fg.hex8.exec(e))?{r:Wl(n[1]),g:Wl(n[2]),b:Wl(n[3]),a:s8(n[4])}:(n=Fg.hex6.exec(e))?{r:Wl(n[1]),g:Wl(n[2]),b:Wl(n[3]),a:1}:(n=Fg.hex4.exec(e))?{r:Wl(n[1]+""+n[1]),g:Wl(n[2]+""+n[2]),b:Wl(n[3]+""+n[3]),a:s8(n[4]+""+n[4])}:(n=Fg.hex3.exec(e))?{r:Wl(n[1]+""+n[1]),g:Wl(n[2]+""+n[2]),b:Wl(n[3]+""+n[3]),a:1}:null}class Bg{constructor(n,t,r,i){this.r=n>255?255:n,this.g=t>255?255:t,this.b=r>255?255:r,this.a=null!=i?i>1?1:i:1,this.roundA=Math.round(this.a),this.hex=l8(this.r,this.g,this.b),this.rgba=this.toRgba()}toHex(n){return l8(this.r,this.g,this.b,n)}toRgba(){return`rgba(${this.r},${this.g},${this.b},${this.a})`}toHexString(n){return"#"+this.toHex(n)}toRgbString(){return 1===this.a?"rgb("+Math.round(this.r)+", "+Math.round(this.g)+", "+Math.round(this.b)+")":"rgba("+Math.round(this.r)+", "+Math.round(this.g)+", "+Math.round(this.b)+", "+this.roundA+")"}toHex8(n){return function bq(e,n,t,r,i){var o=[Ng(Sy(e).toString(16)),Ng(Sy(n).toString(16)),Ng(Sy(t).toString(16)),Ng(xq(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this.r,this.g,this.b,this.a,n)}toHex8String(n){return"#"+this.toHex8(n)}toString(n){let r;return n||!(this.a<1&&this.a>=0)||"hex"!==n&&"hex6"!==n&&"hex3"!==n&&"hex4"!==n&&"hex8"!==n?("rgb"===n&&(r=this.toRgbString()),("hex"===n||"hex6"===n)&&(r=this.toHexString()),"hex3"===n&&(r=this.toHexString(!0)),"hex4"===n&&(r=this.toHex8String(!0)),"hex8"===n&&(r=this.toHex8String()),r||this.toHexString()):this.toRgbString()}}let c8=(()=>{class e{constructor(t,r){this.zone=t,this.colorChanged=new Mn,this.x=0,this.y=0,this.drag=!1,this._destroyed=new ne,this.elementId=r}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}ngAfterViewInit(){this.canvas=document.getElementById(this.elementId),this.ctx=this.canvas.getContext("2d"),this.width=this.canvas.width,this.height=this.canvas.height,this.draw()}draw(){this.ctx.clearRect(0,0,this.width,this.height),this.ctx.rect(0,0,this.width,this.height),this.fillGradient(),0!=this.y&&this.redrawIndicator(this.x,this.y)}onMousedown(t){this.drag=!0,this.changeColor(t),this.zone.runOutsideAngular(()=>{this.canvas.addEventListener("mousemove",this.onMousemove.bind(this))})}onMousemove(t){this.drag&&this.zone.run(()=>{this.changeColor(t)})}onMouseup(t){this.drag=!1,this.canvas.removeEventListener("mousemove",this.onMousemove)}emitChange(t){this.colorChanged.emit(t)}}return e.\u0275fac=function(t){gc()},e.\u0275dir=Dn({type:e,inputs:{color:"color"},outputs:{colorChanged:"colorChanged"}}),e})(),Sq=(()=>{class e extends c8{constructor(t){super(t,"color-strip"),this.zone=t}ngOnInit(){}ngAfterViewInit(){super.ngAfterViewInit()}fillGradient(){const t=this.ctx.createLinearGradient(0,0,0,this.height);t.addColorStop(0,"rgba(255, 0, 0, 1)"),t.addColorStop(.17,"rgba(255, 255, 0, 1)"),t.addColorStop(.34,"rgba(0, 255, 0, 1)"),t.addColorStop(.51,"rgba(0, 255, 255, 1)"),t.addColorStop(.68,"rgba(0, 0, 255, 1)"),t.addColorStop(.85,"rgba(255, 0, 255, 1)"),t.addColorStop(1,"rgba(255, 0, 0, 1)"),this.ctx.fillStyle=t,this.ctx.fill()}redrawIndicator(t,r){this.ctx.beginPath(),this.ctx.strokeStyle="white",this.ctx.lineWidth=2,this.ctx.arc(7.5,r,7.5,0,2*Math.PI,!1),this.ctx.stroke(),this.ctx.closePath()}changeColor(t){this.x=t.offsetX,this.y=t.offsetY,this.draw();const{r,g:i,b:o}=o8(this.ctx,t.offsetX,t.offsetY);this.emitChange(new Bg(r,i,o))}}return e.\u0275fac=function(t){return new(t||e)(Xe(rr))},e.\u0275cmp=Zn({type:e,selectors:[["ngx-mat-color-slider"]],features:[Gn],decls:1,vars:0,consts:[["id","color-strip","width","15","height","200",1,"zone-strip",3,"mousedown","mouseup"]],template:function(t,r){1&t&&(qe(0,"canvas",0),zt("mousedown",function(o){return r.onMousedown(o)})("mouseup",function(o){return r.onMouseup(o)}),nt())}}),e})(),Dq=(()=>{class e{constructor(){}onInput(t){this._formatInput(t.target)}_formatInput(t){let r=Number(t.value.replace(yq,""));r=isNaN(r)?0:r,t.value=r}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Dn({type:e,selectors:[["","ngxMatNumericColorInput",""]],hostBindings:function(t,r){1&t&&zt("input",function(o){return r.onInput(o)})}}),e})(),Tq=(()=>{class e extends c8{constructor(t){super(t,"color-block"),this.zone=t,this._resetBaseColor=!0,this.formGroup=new ay({r:new ou(null,[$u.required]),g:new ou(null,[$u.required]),b:new ou(null,[$u.required]),a:new ou(null,[$u.required]),hex:new ou(null,[$u.required,$u.pattern(Fg.hex6)])})}get rCtrl(){return this.formGroup.get("r")}get gCtrl(){return this.formGroup.get("g")}get bCtrl(){return this.formGroup.get("b")}get aCtrl(){return this.formGroup.get("a")}get hexCtrl(){return this.formGroup.get("hex")}ngOnInit(){Oa(this.rCtrl.valueChanges,this.gCtrl.valueChanges,this.bCtrl.valueChanges,this.aCtrl.valueChanges).pipe(Hi(this._destroyed),_y(400)).subscribe(i=>{const o=new Bg(Number(this.rCtrl.value),Number(this.gCtrl.value),Number(this.bCtrl.value),Number(this.aCtrl.value));this.emitChange(o)}),this.hexCtrl.valueChanges.pipe(Hi(this._destroyed),_y(400),AC()).subscribe(i=>{const o=LB(i);if(null!=o){const d=new Bg(o.r,o.g,o.b,o.a);this.emitChange(d)}})}ngOnChanges(t){t.color&&t.color.currentValue&&(this.updateForm(t.color.currentValue),this._resetBaseColor&&(this._baseColor=t.color.currentValue),this._resetBaseColor=!0,t.color.firstChange||this.draw())}updateForm(t){const r={emitEvent:!1};this.rCtrl.setValue(t.r,r),this.gCtrl.setValue(t.g,r),this.bCtrl.setValue(t.b,r),this.aCtrl.setValue(t.a,r),this.hexCtrl.setValue(t.hex,r)}redrawIndicator(t,r){this.ctx.beginPath(),this.ctx.strokeStyle="white",this.ctx.arc(t,r,5,0,2*Math.PI,!1),this.ctx.stroke(),this.ctx.closePath()}fillGradient(){this.ctx.fillStyle=this._baseColor?this._baseColor.rgba:"rgba(255,255,255,1)",this.ctx.fillRect(0,0,this.width,this.height);const t=this.ctx.createLinearGradient(0,0,this.width,0);t.addColorStop(0,"rgba(255,255,255,1)"),t.addColorStop(1,"rgba(255,255,255,0)"),this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.width,this.height);const r=this.ctx.createLinearGradient(0,0,0,this.height);r.addColorStop(0,"rgba(0,0,0,0)"),r.addColorStop(1,"rgba(0,0,0,1)"),this.ctx.fillStyle=r,this.ctx.fillRect(0,0,this.width,this.height)}onSliderColorChanged(t){this._baseColor=t,this.color=t,this.fillGradient(),this.emitChange(t)}changeColor(t){this.x=t.offsetX,this.y=t.offsetY,this._resetBaseColor=!1,this.draw();const{r,g:i,b:o}=o8(this.ctx,t.offsetX,t.offsetY);this.emitChange(new Bg(r,i,o))}}return e.\u0275fac=function(t){return new(t||e)(Xe(rr))},e.\u0275cmp=Zn({type:e,selectors:[["ngx-mat-color-canvas"]],hostAttrs:[1,"ngx-mat-color-canvas"],features:[Gn,Ki],decls:30,vars:3,consts:[[3,"formGroup"],[1,"color-canvas-row"],[1,"zone-canvas"],["id","color-block","width","200","height","200",1,"zone-block",3,"mousedown","mouseup"],[3,"colorChanged"],[1,"zone-inputs"],["matInput","","formControlName","r","ngxMatNumericColorInput","","autocomplete","off"],["matInput","","formControlName","g","ngxMatNumericColorInput","","autocomplete","off"],["matInput","","formControlName","b","ngxMatNumericColorInput","","autocomplete","off"],["mat-mini-fab","",1,"preview"],["matPrefix","",1,"symbol"],["matInput","","formControlName","hex","autocomplete","off"],["matInput","","formControlName","a","type","number","min","0","max","1","step","0.1","autocomplete","off"]],template:function(t,r){1&t&&(qe(0,"form",0)(1,"div",1)(2,"div",2)(3,"canvas",3),zt("mousedown",function(o){return r.onMousedown(o)})("mouseup",function(o){return r.onMouseup(o)}),nt(),qe(4,"ngx-mat-color-slider",4),zt("colorChanged",function(o){return r.onSliderColorChanged(o)}),nt()(),qe(5,"div",5)(6,"mat-form-field")(7,"mat-label"),Bt(8,"R"),nt(),Cn(9,"input",6),nt(),qe(10,"mat-form-field")(11,"mat-label"),Bt(12,"G"),nt(),Cn(13,"input",7),nt(),qe(14,"mat-form-field")(15,"mat-label"),Bt(16,"B"),nt(),Cn(17,"input",8),nt()()(),qe(18,"div",1),Cn(19,"button",9),qe(20,"mat-form-field")(21,"mat-label"),Bt(22,"HEX6"),nt(),qe(23,"mat-label",10),Bt(24,"#\xa0"),nt(),Cn(25,"input",11),nt(),qe(26,"mat-form-field")(27,"mat-label"),Bt(28,"A"),nt(),Cn(29,"input",12),nt()()()),2&t&&(Mt("formGroup",r.formGroup),Dt(19),Za("background-color",(null==r.color?null:r.color.rgba)||"transparent"))},dependencies:[HC,kg,RQ,AB,bl,KH,rC,dF,hf,OH,bF,yF,oy,vF,Sq,Dq],styles:[".ngx-mat-color-canvas .color-canvas-row{display:flex}.ngx-mat-color-canvas .color-canvas-row:first-of-type{height:200px;margin-bottom:12px}.ngx-mat-color-canvas .color-canvas-row:first-of-type .card{height:180px}.ngx-mat-color-canvas .color-canvas-row canvas:hover{cursor:crosshair}.ngx-mat-color-canvas .color-canvas-row .zone{display:flex}.ngx-mat-color-canvas .color-canvas-row .zone-canvas{height:200px}.ngx-mat-color-canvas .color-canvas-row .zone-canvas .zone-block{border:1px solid rgba(0,0,0,.12)}.ngx-mat-color-canvas .color-canvas-row .zone-strip{flex-basis:auto;margin-left:10px}.ngx-mat-color-canvas .color-canvas-row .zone-inputs{display:flex;width:40px;height:200px;flex-direction:column;margin-left:16px;margin-top:12px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2){display:flex}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .preview{min-width:40px;min-height:40px;height:40px;width:40px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-form-field{margin-left:16px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-form-field:first-of-type{width:170px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-form-field:first-of-type .symbol{font-weight:bold;color:#0000008a}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-form-field:last-of-type{width:40px}.ngx-mat-color-canvas .mat-form-field-label{font-weight:bold}\n"],encapsulation:2}),e})(),Eq=(()=>{class e{constructor(){this.colorChanged=new Mn,this.colors1=a8.slice(0,8),this.colors2=a8.slice(8,16)}set color(t){t&&(this.selectedColor=t.toHexString())}ngOnInit(){}select(t){this.selectedColor=t;const{r,g:i,b:o,a:d}=LB(t);this.colorChanged.emit(new Bg(r,i,o,d))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Zn({type:e,selectors:[["ngx-mat-color-collection"]],hostAttrs:[1,"ngx-mat-color-collection"],inputs:{color:"color"},outputs:{colorChanged:"colorChanged"},decls:4,vars:2,consts:[[1,"color-collection-row"],["mat-mini-fab","","class","btn-color",3,"background-color","ngClass","click",4,"ngFor","ngForOf"],["mat-mini-fab","",1,"btn-color",3,"ngClass","click"]],template:function(t,r){1&t&&(qe(0,"div",0),ar(1,pq,1,5,"button",1),nt(),qe(2,"div",0),ar(3,gq,1,5,"button",1),nt()),2&t&&(Dt(1),Mt("ngForOf",r.colors1),Dt(2),Mt("ngForOf",r.colors2))},dependencies:[Zu,iu,bl],styles:[".ngx-mat-color-collection .btn-color{height:20px;width:20px;margin-right:11px;box-shadow:none;opacity:.3}.ngx-mat-color-collection .btn-color.active{box-shadow:0 3px 5px -1px #0003,0 6px 10px #00000024,0 1px 18px #0000001f;opacity:1}\n"],encapsulation:2}),e})(),u8=(()=>{class e{constructor(){this.colorChanged=new Mn}ngOnInit(){}handleColorChanged(t){this.colorChanged.emit(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Zn({type:e,selectors:[["ngx-mat-color-palette"]],hostAttrs:[1,"ngx-mat-color-palette"],inputs:{color:"color"},outputs:{colorChanged:"colorChanged"},decls:2,vars:2,consts:[[3,"color","colorChanged"]],template:function(t,r){1&t&&(qe(0,"ngx-mat-color-canvas",0),zt("colorChanged",function(o){return r.handleColorChanged(o)}),nt(),qe(1,"ngx-mat-color-collection",0),zt("colorChanged",function(o){return r.handleColorChanged(o)}),nt()),2&t&&(Mt("color",r.color),Dt(1),Mt("color",r.color))},dependencies:[Tq,Eq],styles:[".ngx-mat-color-palette .actions{margin-top:10px;display:flex}.ngx-mat-color-palette .actions .left{display:flex;flex-direction:column;margin-right:15px}.ngx-mat-color-palette .actions .left .preview{flex:2 1 auto;margin-bottom:10px}.ngx-mat-color-palette .actions .right{display:flex;width:40px;flex-direction:column}\n"],encapsulation:2}),e})(),OB=(()=>{class e{constructor(){}sameColor(t,r){return null==t&&null==r||null!=t&&null!=r&&t.rgba===r.rgba}format(t,r){return t.toString(r)}parse(t){const r=LB(t);return r?new Bg(r.r,r.g,r.b,r.a):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();const Aq={display:{colorInput:"hex"}},d8=new on("mat-color-formats"),h8=new on("ngx-mat-colorpicker-scroll-strategy"),Pq={provide:h8,deps:[su],useFactory:function Iq(e){return()=>e.scrollStrategies.reposition()}},Rq=qd(class{constructor(e){this._elementRef=e}});let f8=(()=>{class e extends Rq{constructor(t){super(t)}}return e.\u0275fac=function(t){return new(t||e)(Xe(kr))},e.\u0275cmp=Zn({type:e,selectors:[["ngx-mat-color-picker-content"]],viewQuery:function(t,r){if(1&t&&Wr(u8,5),2&t){let i;Kn(i=Qn())&&(r._palette=i.first)}},hostAttrs:[1,"ngx-mat-colorpicker-content"],hostVars:3,hostBindings:function(t,r){2&t&&(Xh("@transformPanel","enter"),ui("ngx-mat-colorpicker-content-touch",r.picker.touchUi))},inputs:{color:"color"},exportAs:["ngxMatColorPickerContent"],features:[Gn],decls:1,vars:1,consts:[[3,"color","colorChanged"]],template:function(t,r){1&t&&(qe(0,"ngx-mat-color-palette",0),zt("colorChanged",function(o){return r.picker.select(o)}),nt()),2&t&&Mt("color",r.picker._selected)},dependencies:[u8],styles:[".ngx-mat-colorpicker-content{display:block;border-radius:4px;box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f;background-color:#fff;color:#000000de;padding:16px}.ngx-mat-colorpicker-content .ngx-mat-color-palette{width:296px;height:354px}.ngx-mat-colorpicker-content-touch{display:block;max-height:80vh;overflow:auto}.ngx-mat-colorpicker-content-touch .ngx-mat-color-palette{min-width:250px;min-height:312px;max-width:750px;max-height:788px}@media all and (orientation: landscape){.mat-colorpicker-content-touch .ngx-mat-color-palette{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-colorpicker-content-touch .ngx-mat-color-palette{width:80vw;height:100vw}}\n"],encapsulation:2,data:{animation:[n8.transformPanel,n8.fadeInCalendar]},changeDetection:0}),e})(),Lq=(()=>{class e{constructor(t,r,i,o,d,f,g,_){this._dialog=t,this._overlay=r,this._zone=i,this._adapter=o,this._dir=d,this._document=g,this._viewContainerRef=_,this.openedStream=new Mn,this.closedStream=new Mn,this._touchUi=!1,this._opened=!1,this._defaultColor="primary",this._validSelected=null,this._disabledChange=new ne,this._focusedElementBeforeOpen=null,this._inputSubscription=ge.EMPTY,this._selectedChanged=new ne,this._scrollStrategy=f}get disabled(){return void 0===this._disabled&&this._pickerInput?this._pickerInput.disabled:!!this._disabled}set disabled(t){const r=xr(t);r!==this._disabled&&(this._disabled=r,this._disabledChange.next(r))}get touchUi(){return this._touchUi}set touchUi(t){this._touchUi=xr(t)}get opened(){return this._opened}set opened(t){t?this.open():this.close()}get defaultColor(){return this._defaultColor}set defaultColor(t){this._defaultColor=t}get color(){return this._color||(this._pickerInput?this._pickerInput.getThemePalette():void 0)}set color(t){this._color=t}get _selected(){return this._validSelected}set _selected(t){this._validSelected=t}ngOnInit(){}ngOnDestroy(){this.close(),this._inputSubscription.unsubscribe(),this._disabledChange.complete(),this._popupRef&&(this._popupRef.dispose(),this._popupComponentRef=null)}select(t){let r=this._selected;this._selected=t,this._adapter.sameColor(r,this._selected)||this._selectedChanged.next(t)}registerInput(t){if(this._pickerInput)throw Error("A ColorPicker can only be associated with a single input.");this._pickerInput=t,this._inputSubscription=this._pickerInput._valueChange.subscribe(r=>this._selected=r)}open(){if(!this._opened&&!this.disabled){if(!this._pickerInput)throw Error("Attempted to open an ColorPicker with no associated input.");this._document&&(this._focusedElementBeforeOpen=this._document.activeElement),this.touchUi?this._openAsDialog():this._openAsPopup(),this._opened=!0,this.openedStream.emit()}}_openAsDialog(){this._dialogRef&&this._dialogRef.close(),this._dialogRef=this._dialog.open(f8,{direction:this._dir?this._dir.value:"ltr",viewContainerRef:this._viewContainerRef,panelClass:"ngx-mat-colorpicker-dialog"}),this._dialogRef.afterClosed().subscribe(()=>this.close()),this._dialogRef.componentInstance.picker=this,this._setColor()}_openAsPopup(){this._portal||(this._portal=new kA(f8,this._viewContainerRef)),this._popupRef||this._createPopup(),this._popupRef.hasAttached()||(this._popupComponentRef=this._popupRef.attach(this._portal),this._popupComponentRef.instance.picker=this,this._setColor(),this._zone.onStable.asObservable().pipe(mo(1)).subscribe(()=>{this._popupRef.updatePosition()}))}_createPopup(){const t=new ZA({positionStrategy:this._createPopupPositionStrategy(),hasBackdrop:!0,backdropClass:"mat-overlay-transparent-backdrop",direction:this._dir,scrollStrategy:this._scrollStrategy(),panelClass:"mat-colorpicker-popup"});this._popupRef=this._overlay.create(t),this._popupRef.overlayElement.setAttribute("role","dialog"),Oa(this._popupRef.backdropClick(),this._popupRef.detachments(),this._popupRef.keydownEvents().pipe(qi(r=>27===r.keyCode||this._pickerInput&&r.altKey&&38===r.keyCode))).subscribe(r=>{r&&r.preventDefault(),this.close()})}close(){if(!this._opened)return;this._popupRef&&this._popupRef.hasAttached()&&this._popupRef.detach(),this._dialogRef&&(this._dialogRef.close(),this._dialogRef=null),this._portal&&this._portal.isAttached&&this._portal.detach();const t=()=>{this._opened&&(this._opened=!1,this.closedStream.emit(),this._focusedElementBeforeOpen=null)};this._focusedElementBeforeOpen&&"function"==typeof this._focusedElementBeforeOpen.focus?(this._focusedElementBeforeOpen.focus(),setTimeout(t)):t()}_setColor(){const t=this.color;this._popupComponentRef&&(this._popupComponentRef.instance.color=t),this._dialogRef&&(this._dialogRef.componentInstance.color=t)}_createPopupPositionStrategy(){return this._overlay.position().flexibleConnectedTo(this._pickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".ngx-mat-colorpicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition().withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}])}}return e.\u0275fac=function(t){return new(t||e)(Xe(PG),Xe(su),Xe(rr),Xe(OB),Xe(qu,8),Xe(h8),Xe(Rr,8),Xe(Lo))},e.\u0275cmp=Zn({type:e,selectors:[["ngx-mat-color-picker"]],inputs:{disabled:"disabled",touchUi:"touchUi",opened:"opened",defaultColor:"defaultColor",color:"color"},outputs:{openedStream:"opened",closedStream:"closed"},exportAs:["ngxMatColorPicker"],decls:0,vars:0,template:function(t,r){},encapsulation:2,changeDetection:0}),e})();class sI{constructor(n,t){this.target=n,this.targetElement=t,this.value=this.target.value}}const Oq={provide:Xo,useExisting:zr(()=>kB),multi:!0},kq={provide:vo,useExisting:zr(()=>kB),multi:!0};let kB=(()=>{class e{constructor(t,r,i,o){if(this._elementRef=t,this._formField=r,this._colorFormats=i,this._adapter=o,this.colorChange=new Mn,this.colorInput=new Mn,this._disabledChange=new Mn,this._valueChange=new Mn,this._onTouched=()=>{},this._cvaOnChange=()=>{},this._validatorOnChange=()=>{},this._pickerSubscription=ge.EMPTY,this._validator=$u.compose([]),this._lastValueValid=!1,!this._colorFormats)throw function wq(e){return Error(`NgxMatColorPicker: No provider found for ${e}. You must define MAT_COLOR_FORMATS in your module`)}("MAT_COLOR_FORMATS")}set ngxMatColorPicker(t){!t||(this._picker=t,this._picker.registerInput(this),this._pickerSubscription.unsubscribe(),this._pickerSubscription=this._picker._selectedChanged.subscribe(r=>{this.value=r,this._cvaOnChange(r),this._onTouched(),this.colorInput.emit(new sI(this,this._elementRef.nativeElement)),this.colorChange.emit(new sI(this,this._elementRef.nativeElement))}))}get disabled(){return!!this._disabled}set disabled(t){const r=xr(t),i=this._elementRef.nativeElement;this._disabled!==r&&(this._disabled=r,this._disabledChange.emit(r)),r&&i.blur&&i.blur()}get value(){return this._value}set value(t){const r=this.value;this._value=t,this._formatValue(t),this._adapter.sameColor(r,t)||this._valueChange.emit(t)}getThemePalette(){return this._formField?this._formField.color:void 0}registerOnValidatorChange(t){this._validatorOnChange=t}validate(t){return this._validator?this._validator(t):null}getPopupConnectionElementRef(){return this.getConnectedOverlayOrigin()}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}ngOnInit(){}ngOnDestroy(){this._pickerSubscription.unsubscribe(),this._valueChange.complete(),this._disabledChange.complete()}writeValue(t){this.value=t}registerOnChange(t){this._cvaOnChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_onChange(){this.colorChange.emit(new sI(this,this._elementRef.nativeElement))}_onKeydown(t){this._picker&&t.altKey&&40===t.keyCode&&!this._elementRef.nativeElement.readOnly&&(this._picker.open(),t.preventDefault())}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(t){this._elementRef.nativeElement.value=t?this._adapter.format(t,this._colorFormats.display.colorInput):""}_onInput(t){const r=this._lastValueValid,i=this._adapter.parse(t);this._adapter.sameColor(i,this._value)?r!==this._lastValueValid&&this._validatorOnChange():(this._value=i,this._cvaOnChange(i),this._valueChange.emit(i),this.colorInput.emit(new sI(this,this._elementRef.nativeElement)))}}return e.\u0275fac=function(t){return new(t||e)(Xe(kr),Xe(HC,8),Xe(d8,8),Xe(OB))},e.\u0275dir=Dn({type:e,selectors:[["input","ngxMatColorPicker",""]],hostVars:3,hostBindings:function(t,r){1&t&&zt("input",function(o){return r._onInput(o.target.value)})("change",function(){return r._onChange()})("blur",function(){return r._onBlur()})("keydown",function(o){return r._onKeydown(o)}),2&t&&(Nl("disabled",r.disabled),Er("aria-haspopup",r._picker?"dialog":null)("aria-owns",(null==r._picker?null:r._picker.opened)&&r._picker.id||null))},inputs:{ngxMatColorPicker:"ngxMatColorPicker",disabled:"disabled",value:"value"},outputs:{colorChange:"colorChange",colorInput:"colorInput"},exportAs:["ngxMatColorPickerInput"],features:[Gr([Oq,kq,{provide:EB,useExisting:e}])]}),e})(),Nq=(()=>{class e{constructor(t){this._cd=t,this._stateChanges=ge.EMPTY}get disabled(){if(null==this._disabled&&this.picker)return this.picker.disabled}set disabled(t){this._disabled=t}ngOnInit(){}ngOnChanges(t){t.picker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}open(t){this.picker&&!this.disabled&&(this.picker.open(),t.stopPropagation())}_watchStateChanges(){const t=this.picker?this.picker._disabledChange:qn(),r=this.picker&&this.picker._pickerInput?this.picker._pickerInput._disabledChange:qn(),i=this.picker?Oa(this.picker.openedStream,this.picker.closedStream):qn();this._stateChanges.unsubscribe(),this._stateChanges=Oa(t,r,i).subscribe(()=>this._cd.markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(Xe(Wi))},e.\u0275cmp=Zn({type:e,selectors:[["ngx-mat-color-toggle"]],viewQuery:function(t,r){if(1&t&&Wr(vq,5),2&t){let i;Kn(i=Qn())&&(r._button=i.first)}},hostAttrs:[1,"ngx-mat-color-toggle"],hostVars:7,hostBindings:function(t,r){1&t&&zt("focus",function(){return r._button.focus()}),2&t&&(Er("tabindex",-1),ui("ngx-mat-color-toggle-active",r.picker&&r.picker.opened)("mat-accent",r.picker&&"accent"===r.picker.color)("mat-warn",r.picker&&"warn"===r.picker.color))},inputs:{picker:["for","picker"],tabIndex:"tabIndex",disabled:"disabled"},exportAs:["ngxMatColorPickerToggle"],features:[Ki],decls:4,vars:5,consts:[["mat-icon-button","","type","button",3,"disabled","click"],["button",""]],template:function(t,r){1&t&&(qe(0,"button",0,1),zt("click",function(o){return r.open(o)}),qe(2,"mat-icon"),Bt(3,"palette"),nt()()),2&t&&(Mt("disabled",r.disabled),Er("aria-haspopup",r.picker?"dialog":null)("tabindex",r.disabled?-1:r.tabIndex),Dt(2),Za("color",null==r.picker||null==r.picker._selected?null:r.picker._selected.rgba))},dependencies:[bl,nh],styles:[".mat-form-field-appearance-legacy .mat-form-field-prefix .ngx-mat-color-toggle-default-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .ngx-mat-color-toggle-default-icon{width:1em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .ngx-mat-color-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .ngx-mat-color-toggle-default-icon{display:block;width:1.5em;height:1.5em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .ngx-mat-color-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .ngx-mat-color-toggle-default-icon{margin:auto}\n"],encapsulation:2}),e})(),Fq=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({providers:[OB,Pq],imports:[zl,KG,iG,aG,qQ,u4,CF,GK,gy,GG]}),e})();const p8=["*"],Bq=["content"];function Vq(e,n){if(1&e){const t=sa();qe(0,"div",2),zt("click",function(){return Kr(t),Qr(Yn()._onBackdropClicked())}),nt()}2&e&&ui("mat-drawer-shown",Yn()._isShowingBackdrop())}function zq(e,n){1&e&&(qe(0,"mat-drawer-content"),Ur(1,2),nt())}const Hq=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Uq=["mat-drawer","mat-drawer-content","*"],Gq={transformDrawer:th("transform",[xl("open, open-instant",xa({transform:"none",visibility:"visible"})),xl("void",xa({"box-shadow":"none",visibility:"hidden"})),Cl("void => open-instant",Gl("0ms")),Cl("void <=> open, open-instant => void",Gl("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},Wq=new on("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function jq(){return!1}}),g8=new on("MAT_DRAWER_CONTAINER");let NB=(()=>{class e extends _B{constructor(t,r,i,o,d){super(i,o,d),this._changeDetectorRef=t,this._container=r}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return e.\u0275fac=function(t){return new(t||e)(Xe(Wi),Xe(zr(()=>BB)),Xe(kr),Xe(mB),Xe(rr))},e.\u0275cmp=Zn({type:e,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,r){2&t&&Za("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px")},features:[Gr([{provide:_B,useExisting:e}]),Gn],ngContentSelectors:p8,decls:1,vars:0,template:function(t,r){1&t&&(zi(),Ur(0))},encapsulation:2,changeDetection:0}),e})(),FB=(()=>{class e{constructor(t,r,i,o,d,f,g,_){this._elementRef=t,this._focusTrapFactory=r,this._focusMonitor=i,this._platform=o,this._ngZone=d,this._interactivityChecker=f,this._doc=g,this._container=_,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new ne,this._animationEnd=new ne,this._animationState="void",this.openedChange=new Mn(!0),this._openedStream=this.openedChange.pipe(qi(C=>C),Ae(()=>{})),this.openedStart=this._animationStarted.pipe(qi(C=>C.fromState!==C.toState&&0===C.toState.indexOf("open")),MF(void 0)),this._closedStream=this.openedChange.pipe(qi(C=>!C),Ae(()=>{})),this.closedStart=this._animationStarted.pipe(qi(C=>C.fromState!==C.toState&&"void"===C.toState),MF(void 0)),this._destroyed=new ne,this.onPositionChanged=new Mn,this._modeChanged=new ne,this.openedChange.subscribe(C=>{C?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{Ul(this._elementRef.nativeElement,"keydown").pipe(qi(C=>27===C.keyCode&&!this.disableClose&&!Tc(C)),Hi(this._destroyed)).subscribe(C=>this._ngZone.run(()=>{this.close(),C.stopPropagation(),C.preventDefault()}))}),this._animationEnd.pipe(AC((C,S)=>C.fromState===S.fromState&&C.toState===S.toState)).subscribe(C=>{const{fromState:S,toState:k}=C;(0===k.indexOf("open")&&"void"===S||"void"===k&&0===S.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=xr(t)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(t){("true"===t||"false"===t||null==t)&&(t=xr(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle(xr(t))}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_takeFocus(){if(!this._focusTrap)return;const t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{!r&&"function"==typeof this._elementRef.nativeElement.focus&&t.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(t){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,r){t&&r&&(this._openedVia=r);const i=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),i}_setOpen(t,r,i){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",r&&this._restoreFocus(i)),this._updateFocusTrapState(),new Promise(o=>{this.openedChange.pipe(mo(1)).subscribe(d=>o(d?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(t){const r=this._elementRef.nativeElement,i=r.parentNode;"end"===t?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),i.insertBefore(this._anchor,r)),i.appendChild(r)):this._anchor&&this._anchor.parentNode.insertBefore(r,this._anchor)}}return e.\u0275fac=function(t){return new(t||e)(Xe(kr),Xe(HA),Xe(Ac),Xe(bs),Xe(rr),Xe(IC),Xe(Rr,8),Xe(g8,8))},e.\u0275cmp=Zn({type:e,selectors:[["mat-drawer"]],viewQuery:function(t,r){if(1&t&&Wr(Bq,5),2&t){let i;Kn(i=Qn())&&(r._content=i.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,r){1&t&&jm("@transform.start",function(o){return r._animationStarted.next(o)})("@transform.done",function(o){return r._animationEnd.next(o)}),2&t&&(Er("align",null),Xh("@transform",r._animationState),ui("mat-drawer-end","end"===r.position)("mat-drawer-over","over"===r.mode)("mat-drawer-push","push"===r.mode)("mat-drawer-side","side"===r.mode)("mat-drawer-opened",r.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:p8,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,r){1&t&&(zi(),qe(0,"div",0,1),Ur(2),nt())},dependencies:[_B],encapsulation:2,data:{animation:[Gq.transformDrawer]},changeDetection:0}),e})(),BB=(()=>{class e{constructor(t,r,i,o,d,f=!1,g){this._dir=t,this._element=r,this._ngZone=i,this._changeDetectorRef=o,this._animationMode=g,this._drawers=new qh,this.backdropClick=new Mn,this._destroyed=new ne,this._doCheckSubject=new ne,this._contentMargins={left:null,right:null},this._contentMarginChanges=new ne,t&&t.change.pipe(Hi(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),d.change().pipe(Hi(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=f}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=xr(t)}get hasBackdrop(){return this._backdropOverride??(!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode)}set hasBackdrop(t){this._backdropOverride=null==t?null:xr(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(yl(this._allDrawers),Hi(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(r=>!r._container||r._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(yl(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(_y(10),Hi(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,r=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const i=this._left._getWidth();t+=i,r-=i}if(this._right&&this._right.opened)if("side"==this._right.mode)r+=this._right._getWidth();else if("push"==this._right.mode){const i=this._right._getWidth();r+=i,t-=i}t=t||null,r=r||null,(t!==this._contentMargins.left||r!==this._contentMargins.right)&&(this._contentMargins={left:t,right:r},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(qi(r=>r.fromState!==r.toState),Hi(this._drawers.changes)).subscribe(r=>{"open-instant"!==r.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(Hi(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){!t||t.onPositionChanged.pipe(Hi(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(mo(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(Hi(Oa(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const r=this._element.nativeElement.classList,i="mat-drawer-container-has-open";t?r.add(i):r.remove(i)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return e.\u0275fac=function(t){return new(t||e)(Xe(qu,8),Xe(kr),Xe(rr),Xe(Wi),Xe(kC),Xe(Wq),Xe(Zo,8))},e.\u0275cmp=Zn({type:e,selectors:[["mat-drawer-container"]],contentQueries:function(t,r,i){if(1&t&&(Li(i,NB,5),Li(i,FB,5)),2&t){let o;Kn(o=Qn())&&(r._content=o.first),Kn(o=Qn())&&(r._allDrawers=o)}},viewQuery:function(t,r){if(1&t&&Wr(NB,5),2&t){let i;Kn(i=Qn())&&(r._userContent=i.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,r){2&t&&ui("mat-drawer-container-explicit-backdrop",r._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[Gr([{provide:g8,useExisting:e}])],ngContentSelectors:Uq,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,r){1&t&&(zi(Hq),ar(0,Vq,1,2,"div",0),Ur(1),Ur(2,1),ar(3,zq,2,0,"mat-drawer-content",1)),2&t&&(Mt("ngIf",r.hasBackdrop),Dt(3),Mt("ngIf",!r._content))},dependencies:[Hs,NB],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),e})(),Zq=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[zl,ti,NC,NC,ti]}),e})();const Yq=["*",[["mat-toolbar-row"]]],Xq=["*","mat-toolbar-row"],$q=qd(class{constructor(e){this._elementRef=e}});let VB=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Dn({type:e,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),e})(),zB=(()=>{class e extends $q{constructor(t,r,i){super(t),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return e.\u0275fac=function(t){return new(t||e)(Xe(kr),Xe(bs),Xe(Rr))},e.\u0275cmp=Zn({type:e,selectors:[["mat-toolbar"]],contentQueries:function(t,r,i){if(1&t&&Li(i,VB,5),2&t){let o;Kn(o=Qn())&&(r._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&ui("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[Gn],ngContentSelectors:Xq,decls:2,vars:0,template:function(t,r){1&t&&(zi(Yq),Ur(0),Ur(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),e})(),Kq=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[ti,ti]}),e})();function Qq(e,n){if(1&e){const t=sa();qe(0,"button",10),zt("click",function(){return Kr(t),Yn(),Qr(li(12).toggle())}),qe(1,"mat-icon"),Bt(2,"menu"),nt()()}}function qq(e,n){if(1&e){const t=sa();qe(0,"button",10),zt("click",function(){return Kr(t),Yn(),Qr(li(16).toggle())}),qe(1,"mat-icon"),Bt(2,"menu"),nt()()}}const Jq=["*",[["","drawerLeft",""]],[["","drawerRight",""]],[["","centerContent",""]]],eJ=["*","[drawerLeft]","[drawerRight]","[centerContent]"];let HB=(()=>{class e{constructor(){this.leftDrawer=!0,this.rightDrawer=!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Zn({type:e,selectors:[["app-tutorial-template"]],inputs:{leftDrawer:"leftDrawer",rightDrawer:"rightDrawer"},ngContentSelectors:eJ,decls:21,vars:4,consts:[["color","primary"],["mat-icon-button","","class","example-icon",3,"click",4,"ngIf"],["routerLink","/home",1,"show-smallscreen"],["mat-icon-button","",1,"example-icon"],["mode","side",3,"opened"],["drawerLeft",""],[1,"vertical-flex","drawer"],["mode","side","position","end",3,"opened"],["drawerRight",""],[1,"horizontal-flex","drawer-container"],["mat-icon-button","",1,"example-icon",3,"click"]],template:function(t,r){1&t&&(zi(Jq),qe(0,"mat-toolbar",0)(1,"mat-toolbar-row"),ar(2,Qq,3,0,"button",1),qe(3,"a",2)(4,"button",3)(5,"mat-icon"),Bt(6,"home"),nt()()(),qe(7,"span"),Ur(8),nt(),ar(9,qq,3,0,"button",1),nt()(),qe(10,"mat-drawer-container")(11,"mat-drawer",4,5)(13,"div",6),Ur(14,1),nt()(),qe(15,"mat-drawer",7,8),Cn(17,"div",6),Ur(18,2),nt(),qe(19,"div",9),Ur(20,3),nt()()),2&t&&(Dt(2),Mt("ngIf",r.leftDrawer),Dt(7),Mt("ngIf",r.rightDrawer),Dt(2),Mt("opened",r.leftDrawer),Dt(4),Mt("opened",r.rightDrawer))},dependencies:[Hs,FB,BB,bl,zB,VB,nh,Eg],styles:["mat-drawer[_ngcontent-%COMP%]{max-width:50vw}mat-toolbar-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100%;text-align:center}.loading[_ngcontent-%COMP%]{position:fixed;z-index:100;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#000c;width:100vw;height:100vh;justify-content:center;align-items:center;display:flex}.drawer[_ngcontent-%COMP%]{padding:1em .25em;align-items:center}.drawer-container[_ngcontent-%COMP%]{gap:1em;justify-content:center;align-items:center;margin-top:1em}[_nghost-%COMP%]     h2{text-align:center;margin:1ch}"]}),e})();function nJ(e,n){return function(t,r){n(t,r,e)}}function rJ(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)}const cI=new on("OpenCV config object token");let _8=(()=>{let e=class{constructor(t,r){this._ngZone=r,this.cvState=new Hl({ready:!1,error:!1,loading:!0,state:"loading"}),t||(t={}),this.configModule=this.generateConfigModule(t),this.loadOpenCv()}loadOpenCv(){this.cvState.next(this.newState("loading")),window.Module=this.configModule;const t=document.createElement("script");t.setAttribute("async",""),t.setAttribute("type","text/javascript"),t.addEventListener("error",()=>{const i=new Error("Failed to load "+this.configModule.scriptUrl);this.cvState.next(this.newState("error")),this.cvState.error(i)},{passive:!0}),t.src=this.configModule.scriptUrl;const r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(t,r):document.head.appendChild(t)}newState(t){const r={ready:!1,loading:!1,error:!1,state:""};return Object.keys(r).forEach(i=>{"state"!==i&&(i===t?(r[i]=!0,r.state=i):r[i]=!1)}),r}generateConfigModule(t){return{scriptUrl:t.openCVDirPath?`${t.openCVDirPath}/opencv.js`:"/assets/opencv/opencv.js",wasmBinaryFile:"opencv_js.wasm",usingWasm:!0,onRuntimeInitialized:()=>{this._ngZone.run(()=>{console.log("openCV Ready"),this.cvState.next(this.newState("ready")),t.runOnOpenCVInit&&t.runOnOpenCVInit()})}}}};return e.\u0275fac=function(t){return new(t||e)(Lt(cI),Lt(rr))},e.\u0275prov=yn({factory:function(){return new e(Lt(cI),Lt(rr))},token:e,providedIn:"root"}),e=function tJ(e,n,t,r){var d,i=arguments.length,o=i<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,n,t,r);else for(var f=e.length-1;f>=0;f--)(d=e[f])&&(o=(i<3?d(o):i>3?d(n,t,o):d(n,t))||o);return i>3&&o&&Object.defineProperty(n,t,o),o}([nJ(0,bp(cI)),rJ("design:paramtypes",[Object,rr])],e),e})();var y8;let My=y8=class{static forRoot(n){return{ngModule:y8,providers:[{provide:cI,useValue:n}]}}};My.\u0275fac=function(n){return new(n||My)},My.\u0275mod=tr({type:My}),My.\u0275inj=ur({providers:[_8]});let GB=(()=>{class e{constructor(){this.showImagePreset=!1}toggleImagePreset(){this.showImagePreset=!this.showImagePreset}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function aJ(e,n){if(1&e&&(xh(),Cn(0,"circle",4)),2&e){const t=Yn(),r=li(1);Za("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(r)),Er("r",t._getCircleRadius())}}function oJ(e,n){if(1&e&&(xh(),Cn(0,"circle",4)),2&e){const t=Yn(),r=li(1);Za("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(r)),Er("r",t._getCircleRadius())}}const lJ=qd(class{constructor(e){this._elementRef=e}},"primary"),cJ=new on("mat-progress-spinner-default-options",{providedIn:"root",factory:function uJ(){return{diameter:100}}});class rh extends lJ{constructor(n,t,r,i,o,d,f,g){super(n),this._document=r,this._diameter=100,this._value=0,this._resizeSubscription=ge.EMPTY,this.mode="determinate";const _=rh._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),_.has(r.head)||_.set(r.head,new Set([100])),this._noopAnimations="NoopAnimations"===i&&!!o&&!o._forceAnimations,"mat-spinner"===n.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),o&&(o.color&&(this.color=this.defaultColor=o.color),o.diameter&&(this.diameter=o.diameter),o.strokeWidth&&(this.strokeWidth=o.strokeWidth)),t.isBrowser&&t.SAFARI&&f&&d&&g&&(this._resizeSubscription=f.change(150).subscribe(()=>{"indeterminate"===this.mode&&g.run(()=>d.markForCheck())}))}get diameter(){return this._diameter}set diameter(n){this._diameter=Ec(n),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(n){this._strokeWidth=Ec(n)}get value(){return"determinate"===this.mode?this._value:0}set value(n){this._value=Math.max(0,Math.min(100,Ec(n)))}ngOnInit(){const n=this._elementRef.nativeElement;this._styleRoot=EU(n)||this._document.head,this._attachStyleNode(),n.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const n=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${n} ${n}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(n){const t=50*(n.currentScale??1);return`${t}% ${t}%`}_attachStyleNode(){const n=this._styleRoot,t=this._diameter,r=rh._diameters;let i=r.get(n);if(!i||!i.has(t)){const o=this._document.createElement("style");o.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),o.textContent=this._getAnimationText(),n.appendChild(o),i||(i=new Set,r.set(n,i)),i.add(t)}}_getAnimationText(){const n=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*n).replace(/END_VALUE/g,""+.2*n).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}rh._diameters=new WeakMap,rh.\u0275fac=function(n){return new(n||rh)(Xe(kr),Xe(bs),Xe(Rr,8),Xe(Zo,8),Xe(cJ),Xe(Wi),Xe(kC),Xe(rr))},rh.\u0275cmp=Zn({type:rh,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(n,t){2&n&&(Er("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),Za("width",t.diameter,"px")("height",t.diameter,"px"),ui("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[Gn],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(n,t){1&n&&(xh(),qe(0,"svg",0,1),ar(2,aJ,1,11,"circle",2),ar(3,oJ,1,9,"circle",3),nt()),2&n&&(Za("width",t.diameter,"px")("height",t.diameter,"px"),Mt("ngSwitch","indeterminate"===t.mode),Er("viewBox",t._getViewBox()),Dt(2),Mt("ngSwitchCase",!0),Dt(1),Mt("ngSwitchCase",!1))},dependencies:[Yu,yg],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let hJ=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[ti,zl,ti]}),e})(),fJ=(()=>{class e{constructor(t){this.uiservice=t,this.loadingEvent=new Mn,this.showPresetEvent=new Mn}ngOnInit(){}loading(t){t.target.files&&t.target.files[0]&&this.loadingEvent.emit(t.target.files[0])}toggleShowImagePreset(){this.uiservice.toggleImagePreset()}}return e.\u0275fac=function(t){return new(t||e)(Xe(GB))},e.\u0275cmp=Zn({type:e,selectors:[["app-loading-buttons"]],outputs:{loadingEvent:"loadingEvent",showPresetEvent:"showPresetEvent"},decls:6,vars:0,consts:[["type","button","mat-raised-button","","color","primary",3,"click"],["hidden","","type","file","accept","images/*",3,"change"],["fileInput",""]],template:function(t,r){if(1&t){const i=sa();qe(0,"button",0),zt("click",function(){return r.toggleShowImagePreset()}),Bt(1,"Show preset"),nt(),qe(2,"button",0),zt("click",function(){return Kr(i),Qr(li(5).click())}),Bt(3," Load image\n"),nt(),qe(4,"input",1,2),zt("change",function(d){return r.loading(d)}),nt()}},dependencies:[bl]}),e})();const pJ=JSON.parse('[{"name":"Fourier Transform","content":[{"name":"House","url":"assets/image_presets/House.jpeg"},{"name":"Moon","url":"assets/image_presets/Moon.jpeg"},{"name":"CT Scan","url":"assets/image_presets/CTandstripes.jpeg"},{"name":"X Ray","url":"assets/image_presets/XrayBar.jpeg"}]},{"name":"Morphological Operations","content":[{"name":"Hello","url":"assets/image_presets/Hello.jpeg"},{"name":"Tree","url":"assets/image_presets/arbre_binaire.jpeg"},{"name":"Little Guy","url":"assets/image_presets/bonhomme_morpho.jpeg"}]},{"name":"Color images","content":[{"name":"Peppers","url":"assets/image_presets/poivron.jpeg"},{"name":"Butterfly","url":"assets/image_presets/papillon.jpg"},{"name":"Homomorphic Flower","url":"assets/image_presets/hibiscus_homomorphic.jpg"}]}]');function gJ(e,n){if(1&e){const t=sa();qe(0,"div",3)(1,"button",4),zt("click",function(){const o=Kr(t).$implicit;return Qr(Yn(2).loadSelectedImage(o.url))}),Bt(2),nt(),Cn(3,"div",5)(4,"img",6),nt()}if(2&e){const t=n.$implicit;Dt(2),Ya(" ",t.name," "),Dt(2),Mt("src",t.url,Jv)}}function vJ(e,n){if(1&e&&(qe(0,"div")(1,"p"),Bt(2),nt(),ar(3,gJ,5,2,"div",2),nt()),2&e){const t=n.$implicit;Dt(2),fs(t.name),Dt(1),Mt("ngForOf",t.content)}}let mJ=(()=>{class e{constructor(t){this.uiservice=t,this.presetEvent=new Mn,this.images_presets=pJ}ngOnInit(){}loadSelectedImage(t){this.uiservice.toggleImagePreset(),this.presetEvent.emit(t)}}return e.\u0275fac=function(t){return new(t||e)(Xe(GB))},e.\u0275cmp=Zn({type:e,selectors:[["app-image-presets"]],outputs:{presetEvent:"presetEvent"},decls:5,vars:1,consts:[["mat-button","","color","primary",3,"click"],[4,"ngFor","ngForOf"],["class","horizontal-align",4,"ngFor","ngForOf"],[1,"horizontal-align"],["mat-button","",3,"click"],[1,"filler"],["alt","image.name","width","32px","height","32px",1,"rounded",3,"src"]],template:function(t,r){1&t&&(qe(0,"button",0),zt("click",function(){return r.uiservice.toggleImagePreset()}),Bt(1,"\nClose "),qe(2,"mat-icon"),Bt(3,"close"),nt()(),ar(4,vJ,4,2,"div",1)),2&t&&(Dt(4),Mt("ngForOf",r.images_presets))},dependencies:[iu,bl,nh],styles:[".horizontal-align[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:row}.horizontal-align[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:first-child{align-self:flex-start}.filler[_ngcontent-%COMP%]{flex-grow:1}.horizontal-align[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:last-child{align-self:flex-end}.rounded[_ngcontent-%COMP%]{border-radius:50%}"]}),e})();const b8=["outputCanvas"],x8=["inputCanvas"];function _J(e,n){1&e&&(qe(0,"div",12),Cn(1,"mat-spinner",13),nt()),2&e&&(Dt(1),Mt("diameter",300))}function yJ(e,n){if(1&e){const t=sa();qe(0,"button",14),zt("click",function(){return Kr(t),Yn(),Qr(li(13).toggle())}),qe(1,"mat-icon"),Bt(2,"menu"),nt()()}}function bJ(e,n){if(1&e){const t=sa();qe(0,"button",14),zt("click",function(){return Kr(t),Yn(),Qr(li(18).toggle())}),qe(1,"mat-icon"),Bt(2,"menu"),nt()()}}function xJ(e,n){if(1&e){const t=sa();Ni(0),qe(1,"app-loading-buttons",15),zt("loadingEvent",function(i){return Kr(t),Qr(Yn().loadSelectedFile(i))}),nt(),Cn(2,"hr"),qe(3,"button",16),zt("click",function(){return Kr(t),Qr(Yn().drawCanvasContained.clearCanvas())}),Bt(4," Clear "),nt(),Cn(5,"hr"),Ur(6,3),Fi()}}function CJ(e,n){if(1&e){const t=sa();Ni(0),qe(1,"app-image-presets",17),zt("presetEvent",function(i){return Kr(t),Qr(Yn().loadSelectedFileFromPath(i))}),nt(),Fi()}}const wJ=["*",[["","drawerRight",""]],[["","centerContent",""]],[["","drawerLeft",""]]],SJ=["*","[drawerRight]","[centerContent]","[drawerLeft]"];let wl=(()=>{class e extends HB{constructor(t,r,i){super(),this.ngxOpenCv=t,this.uiservice=r,this.cdr=i,this.sideMenuContext=!0}ngAfterViewInit(){this.ngxOpenCv.cvState.subscribe(t=>{this.cvState=t.state}),this.cdr.detectChanges()}loadSelectedFileFromPath(t){const r=new Image;r.onerror=i=>{console.log("Loading failed")},r.src=t,r.onload=()=>{this.drawCanvas?this.drawCanvas.drawImage(r):this.drawCanvasContained&&this.drawCanvasContained.drawImage(r)}}loadSelectedFile(t){var r=new FileReader;r.onload=i=>{const o=new Image;o.onerror=d=>{console.log("Loading failed")},o.src=i.target.result,o.onload=()=>{this.drawCanvasContained.drawImage(o)}},r.readAsDataURL(t)}clearCanvas(){this.drawCanvasContained.clearCanvas()}updateProfile(){const t=this.outputCanvas.getProfile();this.profileOptions={legend:{data:["Profile"],align:"left"},tooltip:{},xAxis:{data:Array.from(Array(t.length).keys()),silent:!1,splitLine:{show:!1}},yAxis:[{type:"value"}],series:[{symbol:"none",name:"profile",type:"line",areaStyle:{},data:t}],animationEasing:"elasticOut",animationDelayUpdate:r=>5*r}}toggleImagePresets(){this.sideMenuContext=!this.sideMenuContext}}return e.\u0275fac=function(t){return new(t||e)(Xe(_8),Xe(GB),Xe(Wi))},e.\u0275cmp=Zn({type:e,selectors:[["app-tutorial-template-images"]],contentQueries:function(t,r,i){if(1&t&&(Li(i,b8,5),Li(i,x8,5)),2&t){let o;Kn(o=Qn())&&(r.outputCanvasContained=o.first),Kn(o=Qn())&&(r.drawCanvasContained=o.first)}},viewQuery:function(t,r){if(1&t&&(Wr(b8,5),Wr(x8,5)),2&t){let i;Kn(i=Qn())&&(r.outputCanvas=i.first),Kn(i=Qn())&&(r.drawCanvas=i.first)}},features:[Gn],ngContentSelectors:SJ,decls:23,vars:7,consts:[["class","loading",4,"ngIf"],["color","primary"],["mat-icon-button","","class","example-icon",3,"click",4,"ngIf"],["routerLink","/home",1,"show-smallscreen"],["mat-icon-button","",1,"example-icon"],["mode","side",3,"opened"],["drawerLeft",""],[1,"vertical-flex","drawer"],[4,"ngIf"],["mode","side","position","end",3,"opened"],["drawerRight",""],[1,"horizontal-flex","drawer-container"],[1,"loading"],["color","primary",3,"diameter"],["mat-icon-button","",1,"example-icon",3,"click"],[3,"loadingEvent"],["mat-raised-button","","color","warn",1,"fillWidth",3,"click"],[3,"presetEvent"]],template:function(t,r){1&t&&(zi(wJ),ar(0,_J,2,1,"div",0),qe(1,"mat-toolbar",1)(2,"mat-toolbar-row"),ar(3,yJ,3,0,"button",2),qe(4,"a",3)(5,"button",4)(6,"mat-icon"),Bt(7,"home"),nt()()(),qe(8,"span"),Ur(9),nt(),ar(10,bJ,3,0,"button",2),nt()(),qe(11,"mat-drawer-container")(12,"mat-drawer",5,6)(14,"div",7),ar(15,xJ,7,0,"ng-container",8),ar(16,CJ,2,0,"ng-container",8),nt()(),qe(17,"mat-drawer",9,10),Cn(19,"div",7),Ur(20,1),nt(),qe(21,"div",11),Ur(22,2),nt()()),2&t&&(Mt("ngIf","loading"==r.cvState),Dt(3),Mt("ngIf",r.leftDrawer),Dt(7),Mt("ngIf",r.rightDrawer),Dt(2),Mt("opened",r.leftDrawer),Dt(3),Mt("ngIf",!r.uiservice.showImagePreset),Dt(1),Mt("ngIf",r.uiservice.showImagePreset),Dt(1),Mt("opened",r.rightDrawer))},dependencies:[rh,Hs,FB,BB,bl,zB,VB,nh,Eg,fJ,mJ],styles:["mat-drawer[_ngcontent-%COMP%]{max-width:50vw}mat-toolbar-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100%;text-align:center}.loading[_ngcontent-%COMP%]{position:fixed;z-index:100;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#000c;width:100vw;height:100vh;justify-content:center;align-items:center;display:flex}.drawer[_ngcontent-%COMP%]{padding:1em .25em;align-items:center}.drawer-container[_ngcontent-%COMP%]{gap:1em;justify-content:center;align-items:center;margin-top:1em}[_nghost-%COMP%]     h2{text-align:center;margin:1ch}"]}),e})();const DJ=["trigger"],MJ=["panel"];function TJ(e,n){if(1&e&&(qe(0,"span",8),Bt(1),nt()),2&e){const t=Yn();Dt(1),fs(t.placeholder)}}function EJ(e,n){if(1&e&&(qe(0,"span",12),Bt(1),nt()),2&e){const t=Yn(2);Dt(1),fs(t.triggerValue)}}function AJ(e,n){1&e&&Ur(0,0,["*ngSwitchCase","true"])}function IJ(e,n){1&e&&(qe(0,"span",9),ar(1,EJ,2,1,"span",10),ar(2,AJ,1,0,"ng-content",11),nt()),2&e&&(Mt("ngSwitch",!!Yn().customTrigger),Dt(2),Mt("ngSwitchCase",!0))}function PJ(e,n){if(1&e){const t=sa();qe(0,"div",13)(1,"div",14,15),zt("@transformPanel.done",function(i){return Kr(t),Qr(Yn()._panelDoneAnimatingStream.next(i.toState))})("keydown",function(i){return Kr(t),Qr(Yn()._handleKeydown(i))}),Ur(3,1),nt()()}if(2&e){const t=Yn();Mt("@transformPanelWrap",void 0),Dt(1),gx("mat-select-panel ",t._getPanelTheme(),""),Za("transform-origin",t._transformOrigin)("font-size",t._triggerFontSize,"px"),Mt("ngClass",t.panelClass)("@transformPanel",t.multiple?"showing-multiple":"showing"),Er("id",t.id+"-panel")("aria-multiselectable",t.multiple)("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby())}}const RJ=[[["mat-select-trigger"]],"*"],LJ=["mat-select-trigger","*"],C8={transformPanelWrap:th("transformPanelWrap",[Cl("* => void",SB("@transformPanel",[wB()],{optional:!0}))]),transformPanel:th("transformPanel",[xl("void",xa({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),xl("showing",xa({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),xl("showing-multiple",xa({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),Cl("void => *",Gl("120ms cubic-bezier(0, 0, 0.2, 1)")),Cl("* => void",Gl("100ms 25ms linear",xa({opacity:0})))])};let w8=0;const D8=new on("mat-select-scroll-strategy"),FJ=new on("MAT_SELECT_CONFIG"),BJ={provide:D8,deps:[su],useFactory:function NJ(e){return()=>e.scrollStrategies.reposition()}};class VJ{constructor(n,t){this.source=n,this.value=t}}const zJ=mf(xy(RC(XU(class{constructor(e,n,t,r,i){this._elementRef=e,this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=r,this.ngControl=i,this.stateChanges=new ne}})))),HJ=new on("MatSelectTrigger");let UJ=(()=>{class e extends zJ{constructor(t,r,i,o,d,f,g,_,C,S,k,z,te,pe){super(d,o,g,_,S),this._viewportRuler=t,this._changeDetectorRef=r,this._ngZone=i,this._dir=f,this._parentFormField=C,this._liveAnnouncer=te,this._defaultOptions=pe,this._panelOpen=!1,this._compareWith=(Me,Re)=>Me===Re,this._uid="mat-select-"+w8++,this._triggerAriaLabelledBy=null,this._destroy=new ne,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+w8++,this._panelDoneAnimatingStream=new ne,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=cC(()=>{const Me=this.options;return Me?Me.changes.pipe(yl(Me),_l(()=>Oa(...Me.map(Re=>Re.onSelectionChange)))):this._ngZone.onStable.pipe(mo(1),_l(()=>this.optionSelectionChanges))}),this.openedChange=new Mn,this._openedStream=this.openedChange.pipe(qi(Me=>Me),Ae(()=>{})),this._closedStream=this.openedChange.pipe(qi(Me=>!Me),Ae(()=>{})),this.selectionChange=new Mn,this.valueChange=new Mn,this.ngControl&&(this.ngControl.valueAccessor=this),null!=pe?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=pe.typeaheadDebounceInterval),this._scrollStrategyFactory=z,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(k)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator($u.required)??!1}set required(t){this._required=xr(t),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(t){this._multiple=xr(t)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(t){this._disableOptionCentering=xr(t)}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this._assignValue(t)&&this._onChange(t)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(t){this._typeaheadDebounceInterval=Ec(t)}get id(){return this._id}set id(t){this._id=t||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new rI(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(AC(),Hi(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(Hi(this._destroy)).subscribe(t=>{t.added.forEach(r=>r.select()),t.removed.forEach(r=>r.deselect())}),this.options.changes.pipe(yl(null),Hi(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const t=this._getTriggerAriaLabelledby(),r=this.ngControl;if(t!==this._triggerAriaLabelledBy){const i=this._elementRef.nativeElement;this._triggerAriaLabelledBy=t,t?i.setAttribute("aria-labelledby",t):i.removeAttribute("aria-labelledby")}r&&(this._previousControl!==r.control&&(void 0!==this._previousControl&&null!==r.disabled&&r.disabled!==this.disabled&&(this.disabled=r.disabled),this._previousControl=r.control),this.updateErrorState())}ngOnChanges(t){(t.disabled||t.userAriaDescribedBy)&&this.stateChanges.next(),t.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(t){this._assignValue(t)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const t=this._selectionModel.selected.map(r=>r.viewValue);return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))}_handleClosedKeydown(t){const r=t.keyCode,i=40===r||38===r||37===r||39===r,o=13===r||32===r,d=this._keyManager;if(!d.isTyping()&&o&&!Tc(t)||(this.multiple||t.altKey)&&i)t.preventDefault(),this.open();else if(!this.multiple){const f=this.selected;d.onKeydown(t);const g=this.selected;g&&f!==g&&this._liveAnnouncer.announce(g.viewValue,1e4)}}_handleOpenKeydown(t){const r=this._keyManager,i=t.keyCode,o=40===i||38===i,d=r.isTyping();if(o&&t.altKey)t.preventDefault(),this.close();else if(d||13!==i&&32!==i||!r.activeItem||Tc(t))if(!d&&this._multiple&&65===i&&t.ctrlKey){t.preventDefault();const f=this.options.some(g=>!g.disabled&&!g.selected);this.options.forEach(g=>{g.disabled||(f?g.select():g.deselect())})}else{const f=r.activeItemIndex;r.onKeydown(t),this._multiple&&o&&t.shiftKey&&r.activeItem&&r.activeItemIndex!==f&&r.activeItem._selectViaInteraction()}else t.preventDefault(),r.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(mo(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(t){if(this._selectionModel.selected.forEach(r=>r.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&t)Array.isArray(t),t.forEach(r=>this._selectOptionByValue(r)),this._sortValues();else{const r=this._selectOptionByValue(t);r?this._keyManager.updateActiveItem(r):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(t){const r=this.options.find(i=>{if(this._selectionModel.isSelected(i))return!1;try{return null!=i.value&&this._compareWith(i.value,t)}catch{return!1}});return r&&this._selectionModel.select(r),r}_assignValue(t){return!!(t!==this._value||this._multiple&&Array.isArray(t))&&(this.options&&this._setSelectionByValue(t),this._value=t,!0)}_initKeyManager(){this._keyManager=new $X(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(Hi(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(Hi(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const t=Oa(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Hi(t)).subscribe(r=>{this._onSelect(r.source,r.isUserInput),r.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),Oa(...this.options.map(r=>r._stateChanges)).pipe(Hi(t)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(t,r){const i=this._selectionModel.isSelected(t);null!=t.value||this._multiple?(i!==t.selected&&(t.selected?this._selectionModel.select(t):this._selectionModel.deselect(t)),r&&this._keyManager.setActiveItem(t),this.multiple&&(this._sortValues(),r&&this.focus())):(t.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(t.value)),i!==this._selectionModel.isSelected(t)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const t=this.options.toArray();this._selectionModel.sort((r,i)=>this.sortComparator?this.sortComparator(r,i,t):t.indexOf(r)-t.indexOf(i)),this.stateChanges.next()}}_propagateChanges(t){let r=null;r=this.multiple?this.selected.map(i=>i.value):this.selected?this.selected.value:t,this._value=r,this.valueChange.emit(r),this._onChange(r),this.selectionChange.emit(this._getChangeEvent(r)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(t){this._elementRef.nativeElement.focus(t)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const t=this._parentFormField?.getLabelId();return this.ariaLabelledby?(t?t+" ":"")+this.ariaLabelledby:t}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const t=this._parentFormField?.getLabelId();let r=(t?t+" ":"")+this._valueId;return this.ariaLabelledby&&(r+=" "+this.ariaLabelledby),r}_panelDoneAnimating(t){this.openedChange.emit(t)}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return e.\u0275fac=function(t){return new(t||e)(Xe(kC),Xe(Wi),Xe(rr),Xe(hB),Xe(kr),Xe(qu,8),Xe(lC,8),Xe(oy,8),Xe(tI,8),Xe(Ku,10),Ds("tabindex"),Xe(D8),Xe(p$),Xe(FJ,8))},e.\u0275dir=Dn({type:e,viewQuery:function(t,r){if(1&t&&(Wr(DJ,5),Wr(MJ,5),Wr(bG,5)),2&t){let i;Kn(i=Qn())&&(r.trigger=i.first),Kn(i=Qn())&&(r.panel=i.first),Kn(i=Qn())&&(r._overlayDir=i.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[Gn,Ki]}),e})(),M8=(()=>{class e extends UJ{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(t,r,i){const o=this._getItemHeight();return Math.min(Math.max(0,o*t-r+o/2),i)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(Hi(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(mo(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(t){const r=nG(t,this.options,this.optionGroups),i=this._getItemHeight();this.panel.nativeElement.scrollTop=0===t&&1===r?0:function F$(e,n,t,r){return e<t?e:e+n>t+r?Math.max(0,e-r+n):t}((t+r)*i,i,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(t){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(t)}_getChangeEvent(t){return new VJ(this,t)}_calculateOverlayOffsetX(){const t=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),r=this._viewportRuler.getViewportSize(),i=this._isRtl(),o=this.multiple?56:32;let d;if(this.multiple)d=40;else if(this.disableOptionCentering)d=16;else{let _=this._selectionModel.selected[0]||this.options.first;d=_&&_.group?32:16}i||(d*=-1);const f=0-(t.left+d-(i?o:0)),g=t.right+d-r.width+(i?0:o);f>0?d+=f+8:g>0&&(d-=g+8),this._overlayDir.offsetX=Math.round(d),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(t,r,i){const o=this._getItemHeight(),d=(o-this._triggerRect.height)/2,f=Math.floor(256/o);let g;return this.disableOptionCentering?0:(g=0===this._scrollTop?t*o:this._scrollTop===i?(t-(this._getItemCount()-f))*o+(o-(this._getItemCount()*o-256)%o):r-o/2,Math.round(-1*g-d))}_checkOverlayWithinViewport(t){const r=this._getItemHeight(),i=this._viewportRuler.getViewportSize(),o=this._triggerRect.top-8,d=i.height-this._triggerRect.bottom-8,f=Math.abs(this._offsetY),_=Math.min(this._getItemCount()*r,256)-f-this._triggerRect.height;_>d?this._adjustPanelUp(_,d):f>o?this._adjustPanelDown(f,o,t):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(t,r){const i=Math.round(t-r);this._scrollTop-=i,this._offsetY-=i,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(t,r,i){const o=Math.round(t-r);if(this._scrollTop+=o,this._offsetY+=o,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=i)return this._scrollTop=i,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const t=this._getItemHeight(),r=this._getItemCount(),i=Math.min(r*t,256),d=r*t-i;let f;f=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),f+=nG(f,this.options,this.optionGroups);const g=i/2;this._scrollTop=this._calculateOverlayScroll(f,g,d),this._offsetY=this._calculateOverlayOffsetY(f,g,d),this._checkOverlayWithinViewport(d)}_getOriginBasedOnOption(){const t=this._getItemHeight(),r=(t-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-r+t/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Gi(e)))(r||e)}}(),e.\u0275cmp=Zn({type:e,selectors:[["mat-select"]],contentQueries:function(t,r,i){if(1&t&&(Li(i,HJ,5),Li(i,gB,5),Li(i,tG,5)),2&t){let o;Kn(o=Qn())&&(r.customTrigger=o.first),Kn(o=Qn())&&(r.options=o),Kn(o=Qn())&&(r.optionGroups=o)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:19,hostBindings:function(t,r){1&t&&zt("keydown",function(o){return r._handleKeydown(o)})("focus",function(){return r._onFocus()})("blur",function(){return r._onBlur()}),2&t&&(Er("id",r.id)("tabindex",r.tabIndex)("aria-controls",r.panelOpen?r.id+"-panel":null)("aria-expanded",r.panelOpen)("aria-label",r.ariaLabel||null)("aria-required",r.required.toString())("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-activedescendant",r._getAriaActiveDescendant()),ui("mat-select-disabled",r.disabled)("mat-select-invalid",r.errorState)("mat-select-required",r.required)("mat-select-empty",r.empty)("mat-select-multiple",r.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[Gr([{provide:eI,useExisting:e},{provide:eG,useExisting:e}]),Gn],ngContentSelectors:LJ,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(t,r){if(1&t&&(zi(RJ),qe(0,"div",0,1),zt("click",function(){return r.toggle()}),qe(3,"div",2),ar(4,TJ,2,1,"span",3),ar(5,IJ,3,2,"span",4),nt(),qe(6,"div",5),Cn(7,"div",6),nt()(),ar(8,PJ,4,14,"ng-template",7),zt("backdropClick",function(){return r.close()})("attach",function(){return r._onAttached()})("detach",function(){return r.close()})),2&t){const i=li(1);Er("aria-owns",r.panelOpen?r.id+"-panel":null),Dt(3),Mt("ngSwitch",r.empty),Er("id",r._valueId),Dt(1),Mt("ngSwitchCase",!0),Dt(1),Mt("ngSwitchCase",!1),Dt(3),Mt("cdkConnectedOverlayPanelClass",r._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",r._scrollStrategy)("cdkConnectedOverlayOrigin",i)("cdkConnectedOverlayOpen",r.panelOpen)("cdkConnectedOverlayPositions",r._positions)("cdkConnectedOverlayMinWidth",null==r._triggerRect?null:r._triggerRect.width)("cdkConnectedOverlayOffsetY",r._offsetY)}},dependencies:[Zu,Yu,yg,NE,bG,yG],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[C8.transformPanelWrap,C8.transformPanel]},changeDetection:0}),e})(),GJ=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({providers:[BJ],imports:[zl,bB,rG,ti,NC,nI,rG,ti]}),e})();function T8(e,n,t,r,i){var o=t-e,d=r-n,f=1;o<0&&(f=-1,o=-o);var g=2*o-d,_=e;for(let C=n;C<r;C++)i.push({x:_,y:C}),g>0?(_+=f,g+=2*(o-d)):g+=2*o}function E8(e,n,t,r,i){var o=t-e,d=r-n,f=1;d<0&&(f=-1,d=-d);var g=2*d-o,_=n;for(let C=e;C<t;C++)i.push({x:C,y:_}),g>0?(_+=f,g+=2*(d-o)):g+=2*d}const ZJ=["input"],YJ=function(e){return{enterDuration:e}},XJ=["*"],$J=new on("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let KJ=0;const QJ={provide:Xo,useExisting:zr(()=>jB),multi:!0};class qJ{constructor(n,t){this.source=n,this.checked=t}}const JJ=xy(qd(mf(RC(class{constructor(e){this._elementRef=e}}))));let eee=(()=>{class e extends JJ{constructor(t,r,i,o,d,f,g){super(t),this._focusMonitor=r,this._changeDetectorRef=i,this.defaults=d,this._onChange=_=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new Mn,this.toggleChange=new Mn,this.tabIndex=parseInt(o)||0,this.color=this.defaultColor=d.color||"accent",this._noopAnimations="NoopAnimations"===f,this.id=this._uniqueId=`${g}${++KJ}`}get required(){return this._required}set required(t){this._required=xr(t)}get checked(){return this._checked}set checked(t){this._checked=xr(t),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?this._focused=!0:t||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return e.\u0275fac=function(t){gc()},e.\u0275dir=Dn({type:e,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[Gn]}),e})(),jB=(()=>{class e extends eee{constructor(t,r,i,o,d,f){super(t,r,i,o,d,f,"mat-slide-toggle-")}_createChangeEvent(t){return new qJ(this,t)}_onChangeEvent(t){t.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(t){t.stopPropagation()}focus(t,r){r?this._focusMonitor.focusVia(this._inputElement,r,t):this._inputElement.nativeElement.focus(t)}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(Xe(kr),Xe(Ac),Xe(Wi),Ds("tabindex"),Xe($J),Xe(Zo,8))},e.\u0275cmp=Zn({type:e,selectors:[["mat-slide-toggle"]],viewQuery:function(t,r){if(1&t&&Wr(ZJ,5),2&t){let i;Kn(i=Qn())&&(r._inputElement=i.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:13,hostBindings:function(t,r){2&t&&(Nl("id",r.id),Er("tabindex",null)("aria-label",null)("aria-labelledby",null)("name",null),ui("mat-checked",r.checked)("mat-disabled",r.disabled)("mat-slide-toggle-label-before","before"==r.labelPosition)("_mat-animation-noopable",r._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[Gr([QJ]),Gn],ngContentSelectors:XJ,decls:14,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(t,r){if(1&t&&(zi(),qe(0,"label",0,1)(2,"span",2)(3,"input",3,4),zt("change",function(o){return r._onChangeEvent(o)})("click",function(o){return r._onInputClick(o)}),nt(),qe(5,"span",5),Cn(6,"span",6),qe(7,"span",7),Cn(8,"span",8),nt()()(),qe(9,"span",9,10),zt("cdkObserveContent",function(){return r._onLabelTextChange()}),qe(11,"span",11),Bt(12,"\xa0"),nt(),Ur(13),nt()()),2&t){const i=li(1),o=li(10);Er("for",r.inputId),Dt(2),ui("mat-slide-toggle-bar-no-side-margin",!o.textContent||!o.textContent.trim()),Dt(1),Mt("id",r.inputId)("required",r.required)("tabIndex",r.tabIndex)("checked",r.checked)("disabled",r.disabled),Er("name",r.name)("aria-checked",r.checked)("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby)("aria-describedby",r.ariaDescribedby),Dt(4),Mt("matRippleTrigger",i)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",Fl(18,YJ,r._noopAnimations?0:150))}},dependencies:[Jd,uB],styles:['.mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%;display:block}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.mat-slide-toggle-input:focus~.mat-slide-toggle-thumb-container .mat-focus-indicator::before{content:""}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}'],encapsulation:2,changeDetection:0}),e})(),A8=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({}),e})(),ree=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[A8,Rg,ti,zA,A8,ti]}),e})();const iee=function(e,n){return{cornerHandle:e,"anchorHandle animate-pulse":n}},aee=function(e){return{hidden:e}};let I8=(()=>{class e{constructor(){this.handleDrag=!1,this.handleSize=16,this.handlePos={x:256,y:-50},this.handleColor="#7dafff",this.scale=1,this.showCoordinates=!0,this.isAnchor=!1}startHandleDrag(t,r){this.handleDrag=!0}stopHandleDrag(){this.handleDrag=!1}moveTo(t,r,i,o){t=Math.min(Math.max(t,this.handleSize/2),i-this.handleSize/2),r=Math.min(Math.max(r,this.handleSize/2),o-this.handleSize/2),this.handlePos={x:t,y:r}}getLabelCoordinates(){const r=this.handlePos.y*this.scale;return{x:(this.handlePos.x*this.scale).toFixed(0),y:r.toFixed(0)}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Zn({type:e,selectors:[["app-handle"]],inputs:{handleSize:"handleSize",handlePos:"handlePos",handleColor:"handleColor",scale:"scale",showCoordinates:"showCoordinates",isAnchor:"isAnchor"},decls:3,vars:17,consts:[[1,"handle",3,"ngClass","mousedown","touchstart","touchstop","mouseup"],[1,"select-none","pointer-events-none",3,"ngClass"]],template:function(t,r){1&t&&(qe(0,"div",0),zt("mousedown",function(o){return r.startHandleDrag(o,1)})("touchstart",function(o){return r.startHandleDrag(o,1)})("touchstop",function(){return r.stopHandleDrag()})("mouseup",function(){return r.stopHandleDrag()}),qe(1,"p",1),Bt(2),nt()()),2&t&&(Za("top",r.handlePos.y,"px")("left",r.handlePos.x,"px")("--width",r.handleSize,"px")("--color",r.handleColor),Mt("ngClass",kd(12,iee,!r.isAnchor,r.isAnchor)),Dt(1),Mt("ngClass",Fl(15,aee,!r.showCoordinates)),Dt(1),px("(",r.getLabelCoordinates().x,",",r.getLabelCoordinates().y,")"))},dependencies:[Zu],styles:[".handle[_ngcontent-%COMP%]{width:var(--width);aspect-ratio:1;position:absolute;cursor:move;border:solid rgba(255,255,255,.25) 1px;transform:translate(-50%,-50%);font-size:smaller;transform-origin:top left;z-index:99;display:flex;justify-content:center;text-align:center;border-radius:100%}.cornerHandle[_ngcontent-%COMP%]{background:radial-gradient(circle at calc(var(--width) / 2) calc(var(--width) / 2),var(--color),#000);box-shadow:#0000004d 0 19px 38px,#00000038 0 15px 12px}.anchorHandle[_ngcontent-%COMP%]{border:solid rgba(255,255,255,.75) 1px;background:rgba(191,191,191,.5);z-index:128}.handle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:relative;top:-24px}.handle[_ngcontent-%COMP%]:hover{border:dashed white 1px}"]}),e})();const oee=["handle1"],see=["handle2"],lee=["midHandle"];let cee=(()=>{class e{constructor(t){this.cdr=t,this.point1={x:0,y:0},this.point2={x:0,y:0},this.scale=1,this.labelPos={x:0,y:0},this.midPoint={x:0,y:0}}ngOnInit(){}ngAfterViewInit(){this.update(),this.cdr.detectChanges()}getRectangleCoordinates(){return{x1:this.point1.x,y1:this.point1.y,x2:this.point2.x,y2:this.point2.y}}getHandles(){return[this.handle1,this.handle2]}getMidHandle(){return this.midHandle}update(){this.point1=this.handle1.handlePos,this.point2=this.handle2.handlePos,this.midPoint={x:(this.point1.x+this.point2.x)/2,y:(this.point1.y+this.point2.y)/2},this.updateNamePosition()}updateNamePosition(){const t=Math.min(this.handle1.handlePos.y,this.handle2.handlePos.y);this.labelPos={y:t,x:(this.handle1.handlePos.x+this.handle2.handlePos.x)/2}}}return e.\u0275fac=function(t){return new(t||e)(Xe(Wi))},e.\u0275cmp=Zn({type:e,selectors:[["app-roi"]],viewQuery:function(t,r){if(1&t&&(Wr(oee,5),Wr(see,5),Wr(lee,5)),2&t){let i;Kn(i=Qn())&&(r.handle1=i.first),Kn(i=Qn())&&(r.handle2=i.first),Kn(i=Qn())&&(r.midHandle=i.first)}},inputs:{point1:"point1",point2:"point2",scale:"scale",property:"property"},decls:8,vars:17,consts:[[3,"handlePos","scale","handleColor"],["handle1",""],["handle2",""],[3,"handlePos","scale","handleColor","handleSize","showCoordinates","isAnchor"],["midHandle",""],[1,"absolute","label","text-sm","select-none","pointer-events-none"]],template:function(t,r){1&t&&(Cn(0,"app-handle",0,1)(2,"app-handle",0,2)(4,"app-handle",3,4),qe(6,"p",5),Bt(7),nt()),2&t&&(Mt("handlePos",r.point1)("scale",r.scale)("handleColor",r.property.color),Dt(2),Mt("handlePos",r.point2)("scale",r.scale)("handleColor",r.property.color),Dt(2),Mt("handlePos",r.midPoint)("scale",r.scale)("handleColor","white")("handleSize",12)("showCoordinates",!1)("isAnchor",!0),Dt(2),Za("top",r.labelPos.y,"px")("left",r.labelPos.x,"px"),Dt(1),fs(r.property.name))},dependencies:[I8],styles:[".label[_ngcontent-%COMP%]{transform:translate(-50%,-100%);transform-origin:top left;z-index:50}"]}),e})();const uee=["canvas"],dee=["canvasUI"],hee=["handleProfile"],fee=["ROI"];function pee(e,n){if(1&e&&(qe(0,"p",13),Bt(1),nt()),2&e){const t=Yn();Dt(1),fs(t.title)}}function gee(e,n){if(1&e){const t=sa();qe(0,"span",14)(1,"mat-slide-toggle",15),zt("ngModelChange",function(i){return Kr(t),Qr(Yn().isBWChecked=i)})("change",function(){return Kr(t),Qr(Yn().BWToggle())}),Bt(2,"B&W"),nt()()}if(2&e){const t=Yn();Dt(1),Mt("ngModel",t.isBWChecked)}}function vee(e,n){if(1&e){const t=sa();qe(0,"span",16)(1,"mat-slide-toggle",15),zt("ngModelChange",function(i){return Kr(t),Qr(Yn().profile=i)})("change",function(){return Kr(t),Qr(Yn().updateCanvasUI())}),Bt(2,"profile"),nt()()}if(2&e){const t=Yn();Dt(1),Mt("ngModel",t.profile)}}function mee(e,n){if(1&e&&(qe(0,"div",17,18),Cn(2,"div",19),qe(3,"mat-icon"),Bt(4,"brush"),nt()()),2&e){const t=Yn();Za("top",t.cursorPosition.y,"px")("left",t.cursorPosition.x,"px")("width",t.getCursorTransform(),"px"),Dt(2),Za("border-color",t.drawColor)}}function _ee(e,n){if(1&e&&Cn(0,"app-roi",20,21),2&e){const t=n.$implicit,r=Yn();Mt("point1",t.initial1)("point2",t.initial2)("scale",r.getScreenToCanvasScale())("property",t)}}const yee=function(e){return{BWFilter:e}},bee=function(e){return{hidden:e}},xee=function(){return{x:50,y:100}},Cee=function(){return{x:250,y:100}};let Vg=(()=>{class e{constructor(){this.drawingEnded=new Mn,this.width=256,this.height=this.width,this.UIwidth=1024,this.roi=[],this.brushRadius=10,this.drawColor="white",this.drawable=!0,this.title="",this.BWOption=!1,this.OnlyBW=!1,this.profileOption=!1,this.BWSet=new Mn,this.profileChanged=new Mn,this.roiChanged=new Mn,this.profile=!1,this.isBWChecked=!1,this.cursorPosition={x:0,y:0},this.startDrawing=!1}ngOnInit(){const t=this.canvas.nativeElement;this.ctx=t.getContext("2d",{alpha:!1}),this.ctx.imageSmoothingEnabled=!1,this.height=this.width,t.width=this.width,t.height=this.height,this.ctx.canvas.width=this.width,this.ctx.canvas.height=this.height;const r=this.canvasUI.nativeElement;this.ctxUI=r.getContext("2d",{alpha:!0}),r.width=this.UIwidth,r.height=this.UIwidth,this.drawable&&this.captureEvents(t),this.ctx.fillRect(0,0,this.width,this.height)}BWToggle(){this.BWSet.emit()}ngAfterViewInit(){this.updateCanvasUI()}setCanvasDimensions(t,r){this.height=r,this.width=t,this.ctx.canvas.width=t,this.ctx.canvas.height=r}getArray(){return this.ctx.getImageData(0,0,this.width,this.height).data}getCanvas(){return this.ctx.canvas}getCtx(){return this.ctx}clearCanvas(){this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.width,this.height),this.drawingEnded.emit()}drawImage(t){this.ctx.drawImage(t,0,0,this.width,this.height),this.updateCanvasUI(),this.drawingEnded.emit()}drawMat(t){cv.imshow(this.getCanvas(),t),this.updateCanvasUI()}drawMatWithoutEvent(t){cv.imshow(this.getCanvas(),t)}drawArray(t,r=this.width,i=this.height,o=0,d=0){var f=new ImageData(t,r,i);this.ctx.putImageData(f,o,d),this.updateCanvasUI(),this.drawingEnded.emit()}drawCroppedArray(t,r=this.width,i=this.height,o=0,d=0,f=0,g=0,_=r,C=i){var S=new ImageData(t,r,i);this.ctx.putImageData(S,o,d,f,g,_,C),this.updateCanvasUI(),this.drawingEnded.emit()}draw(t,r=null){this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y),r?this.ctx.lineTo(r.x,r.y):this.ctx.lineTo(t.x,t.y),this.ctx.lineWidth=this.brushRadius,this.ctx.strokeStyle=this.drawColor,this.ctx.lineCap="round",this.ctx.stroke()}draw_callback(){this.drawingEnded.emit(!0)}captureEvents(t){const r=Ul(t,"touchstart"),i=Ul(t,"mousedown"),o=Ul(t,"mousemove"),d=Oa(r,i),g=Oa(Ul(t,"touchmove"),o),_=Ul(t,"touchend"),C=Ul(t,"mouseup"),k=Oa(_,Ul(t,"mouseleave"),C);let z=!1;g.subscribe({next:te=>{const pe=t.getBoundingClientRect();var Me=this.getClientPosition(te);this.cursorPosition.x=Me.clientX-pe.left,this.cursorPosition.y=Me.clientY-pe.top}}),d.pipe(_l(te=>{const pe=t.getBoundingClientRect(),Me=this.getCoord(te,pe);return z=!0,this.initialPos=Me,this.startDrawing=!0,this.draw(Me),this.draw_callback(),g.pipe(Hi(k),function WJ(){return ve((e,n)=>{let t,r=!1;e.subscribe(we(n,i=>{const o=t;t=i,r&&n.next([o,i]),r=!0}))})}())})).subscribe({next:te=>{const pe=t.getBoundingClientRect();var Me=this.getCoord(te[0],pe);const Re=this.getCoord(te[1],pe);this.startDrawing&&(this.startDrawing=!1,Me=this.initialPos),this.draw(Me,Re),this.draw_callback()}}),k.subscribe(te=>{z&&(this.updateCanvasUI(),this.draw_callback()),z=!1})}getClientPosition(t){return t.preventDefault(),"touches"in t?{clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}:{clientX:t.clientX,clientY:t.clientY}}getCoord(t,r){var i=this.getClientPosition(t);return{x:this.width/r.width*(i.clientX-r.left),y:this.height/r.height*(i.clientY-r.top)}}getCursorTransform(){return this.canvas.nativeElement.getBoundingClientRect().width/this.width*this.brushRadius}updateHandleDragPos(t){const i=this.ctxUI.canvas.getBoundingClientRect();var o=this.getClientPosition(t);let d=this.handles.toArray(),f=this.ROIs.toArray();const g=o.clientX-i.left,_=o.clientY-i.top;let C=!1;const S=g>=i.width||g<=0||_>=i.height||_<=0;d.forEach(k=>{k.handleDrag=!S&&k.handleDrag,k.handleDrag&&(k.moveTo(g,_,i.width,i.height),C=!0)}),f.forEach(k=>{let z=k.getHandles();z.forEach(pe=>{pe.handleDrag=!S&&pe.handleDrag,pe.handleDrag&&(pe.moveTo(g,_,i.width,i.height),k.update(),C=!0)});let te=k.getMidHandle();if(te.handleDrag=!S&&te.handleDrag,te.handleDrag){let pe=g-te.handlePos.x,Me=_-te.handlePos.y;z.forEach(Re=>{Re.moveTo(Re.handlePos.x+pe,Re.handlePos.y+Me,i.width,i.height),k.update(),C=!0})}}),this.updateCanvasUI()}updateCanvasUI(){this.ctxUI.clearRect(0,0,this.UIwidth,this.UIwidth),requestAnimationFrame(()=>{this.ROIs.length>0&&this.updateROI(),this.profile&&this.updateProfile()})}transformCoordinatesFromScreenToUISpace(t){const i=this.ctxUI.canvas.getBoundingClientRect();return{x:t.x*(this.UIwidth/i.width),y:t.y*(this.UIwidth/i.height)}}transformCoordinatesFromScreenToCanvas(t){const i=this.ctx.canvas.getBoundingClientRect();return{x:t.x*(this.width/i.width),y:t.y*(this.height/i.height)}}getScreenToCanvasScale(){const i=this.ctx.canvas.getBoundingClientRect().width;return this.width/i}getProfile(){return this.profileArray}updateProfile(){this.ctxUI.beginPath();let t=this.handles.toArray();const r=this.transformCoordinatesFromScreenToCanvas(t[0].handlePos),i=this.transformCoordinatesFromScreenToCanvas(t[1].handlePos),o=this.transformCoordinatesFromScreenToUISpace(t[0].handlePos),d=this.transformCoordinatesFromScreenToUISpace(t[1].handlePos);this.ctxUI.moveTo(o.x,o.y),this.ctxUI.lineTo(d.x,d.y),this.ctxUI.lineWidth=3,this.ctxUI.strokeStyle="blue",this.ctxUI.setLineDash([10,20]),this.ctxUI.stroke(),this.recomputeProfile(r,i)}updateROI(){let t=this.ROIs.toArray();this.ctxUI.setLineDash([5,5]),this.ctxUI.lineWidth=2,t.forEach(r=>{const i=r.getHandles(),o=this.transformCoordinatesFromScreenToUISpace(i[0].handlePos),d=this.transformCoordinatesFromScreenToUISpace(i[1].handlePos);this.ctxUI.beginPath(),this.ctxUI.strokeStyle=r.property.color,this.ctxUI.fillStyle=r.property.color,this.ctxUI.strokeRect(o.x,o.y,d.x-o.x,d.y-o.y),this.ctxUI.globalAlpha=.3,this.ctxUI.fillRect(o.x,o.y,d.x-o.x,d.y-o.y),this.ctxUI.fill(),this.ctxUI.globalAlpha=1,this.ctxUI.stroke(),this.recomputeROI(r)})}recomputeProfile(t,r){let i=function jJ(e,n){let t=new Array;var r=Math.round(e.x),i=Math.round(e.y),o=Math.round(n.x),d=Math.round(n.y);return Math.abs(d-i)<Math.abs(o-r)?r>o?E8(o,d,r,i,t):E8(r,i,o,d,t):i>d?T8(o,d,r,i,t):T8(r,i,o,d,t),t}(t,r);this.profileArray=new Array;let o=this.getArray();i.forEach(d=>{this.profileArray.push(o[4*(this.width*d.y+d.x)])}),this.profileChanged.emit()}recomputeROI(t){let r=t.getHandles(),i=this.transformCoordinatesFromScreenToCanvas(r[0].handlePos),o=this.transformCoordinatesFromScreenToCanvas(r[1].handlePos),d=Math.min(i.x,o.x),f=Math.min(i.y,o.y),g=Math.abs(i.x-o.x),_=Math.abs(i.y-o.y),C=this.ctx.getImageData(d,f,g,_);t.property.data=C,this.roiChanged.emit(t.property)}isBW(){return this.isBWChecked}getValueAtSquare(t,r,i,o){return this.ctx.getImageData(t,r,i,o).data}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Zn({type:e,selectors:[["app-draw-canvas"]],viewQuery:function(t,r){if(1&t&&(Wr(uee,7),Wr(dee,7),Wr(hee,5),Wr(fee,5)),2&t){let i;Kn(i=Qn())&&(r.canvas=i.first),Kn(i=Qn())&&(r.canvasUI=i.first),Kn(i=Qn())&&(r.handles=i),Kn(i=Qn())&&(r.ROIs=i)}},hostBindings:function(t,r){1&t&&zt("resize",function(o){return r.updateCanvasUI(o)},0,gm)},inputs:{width:"width",roi:"roi",brushRadius:"brushRadius",drawColor:"drawColor",drawable:"drawable",title:"title",BWOption:"BWOption",OnlyBW:"OnlyBW",profileOption:"profileOption"},outputs:{drawingEnded:"drawingEnded",BWSet:"BWSet",profileChanged:"profileChanged",roiChanged:"roiChanged"},decls:15,vars:20,consts:[[1,"canvas-container",3,"mousemove"],["class","title select-none",4,"ngIf"],["class","BW-toggle toggle",4,"ngIf"],["class","Profile-toggle toggle",4,"ngIf"],["class","cursor",3,"top","left","width",4,"ngIf"],["id","canvasVisu",3,"ngClass"],["canvas",""],["id","canvasUI",1,"pointer-events-none",3,"width"],["canvasUI",""],[3,"ngClass"],[1,"handle",3,"handlePos","scale"],["handleProfile",""],[3,"point1","point2","scale","property",4,"ngFor","ngForOf"],[1,"title","select-none"],[1,"BW-toggle","toggle"],["color","primary",3,"ngModel","ngModelChange","change"],[1,"Profile-toggle","toggle"],[1,"cursor"],["cursor",""],[1,"cursor-radius"],[3,"point1","point2","scale","property"],["ROI",""]],template:function(t,r){1&t&&(qe(0,"div",0),zt("mousemove",function(o){return r.updateHandleDragPos(o)}),ar(1,pee,2,1,"p",1),ar(2,gee,3,1,"span",2),ar(3,vee,3,1,"span",3),ar(4,mee,5,8,"div",4),Cn(5,"canvas",5,6)(7,"canvas",7,8),qe(9,"div",9),Cn(10,"app-handle",10,11)(12,"app-handle",10,11),nt(),ar(14,_ee,2,4,"app-roi",12),nt()),2&t&&(Za("cursor",r.drawable?"none":"default"),Dt(1),Mt("ngIf",r.title),Dt(1),Mt("ngIf",r.BWOption),Dt(1),Mt("ngIf",r.profileOption),Dt(1),Mt("ngIf",r.drawable),Dt(1),Mt("ngClass",Fl(14,yee,r.isBWChecked||r.OnlyBW)),Dt(2),Mt("width",r.UIwidth),Dt(2),Mt("ngClass",Fl(16,bee,!r.profile)),Dt(1),Mt("handlePos",eu(18,xee))("scale",r.getScreenToCanvasScale()),Dt(2),Mt("handlePos",eu(19,Cee))("scale",r.getScreenToCanvasScale()),Dt(2),Mt("ngForOf",r.roi))},dependencies:[Zu,iu,Hs,hf,ff,jB,nh,I8,cee],styles:[".canvas-container[_ngcontent-%COMP%]{overflow:hidden;position:relative;width:100%;aspect-ratio:1;cursor:none;box-shadow:#0000003d 0 3px 8px}.toggle[_ngcontent-%COMP%]{position:absolute;color:#fff;z-index:10;background-color:#7f7f7f80;border-radius:3px;margin:5px;padding:0 5px}.BW-toggle[_ngcontent-%COMP%]{top:0;right:0}.Profile-toggle[_ngcontent-%COMP%]{bottom:0;right:0}.title[_ngcontent-%COMP%]{position:absolute;top:0;left:0;z-index:10;pointer-events:none;margin:5px;background-color:#7f7f7f80;color:#fff;padding:0 5px;border-radius:3px}.canvas-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{width:100%;aspect-ratio:1}.canvas-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:absolute;height:inherit}.cursor[_ngcontent-%COMP%]{z-index:5;position:absolute;aspect-ratio:1;transform:translate(-50%,-50%);pointer-events:none;transform-origin:top left}.cursor[_ngcontent-%COMP%] > .cursor-radius[_ngcontent-%COMP%]{position:relative;width:inherit;aspect-ratio:1;border-radius:50%;border-style:dashed;border-width:1px;pointer-events:none;transform-origin:center;animation:rotation 20s infinite linear;background:radial-gradient(circle,white 0%,white 5%,rgba(100,100,100,.5) 3%,rgba(100,100,100,.5) 100%)}.cursor[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translateY(-75%)}@keyframes rotation{0%{transform:rotate(0)}to{transform:rotate(359deg)}}.BWFilter[_ngcontent-%COMP%]{filter:grayscale(1)}"]}),e})();const wee=["sliderWrapper"],Ic=SC({passive:!1}),Eee={provide:Xo,useExisting:zr(()=>ZB),multi:!0};class Aee{}const Iee=xy(qd(RC(class{constructor(e){this._elementRef=e}}),"accent"));let ZB=(()=>{class e extends Iee{constructor(t,r,i,o,d,f,g,_){super(t),this._focusMonitor=r,this._changeDetectorRef=i,this._dir=o,this._ngZone=f,this._animationMode=_,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new Mn,this.input=new Mn,this.valueChange=new Mn,this.onTouched=()=>{},this._percent=0,this._isSliding=null,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=()=>{},this._dirChangeSubscription=ge.EMPTY,this._pointerDown=C=>{this.disabled||this._isSliding||!GC(C)&&0!==C.button||this._ngZone.run(()=>{this._touchId=GC(C)?function Pee(e,n){for(let t=0;t<e.touches.length;t++){const r=e.touches[t].target;if(n===r||n.contains(r))return e.touches[t].identifier}}(C,this._elementRef.nativeElement):void 0;const S=R8(C,this._touchId);if(S){const k=this.value;this._isSliding="pointer",this._lastPointerEvent=C,this._focusHostElement(),this._onMouseenter(),this._bindGlobalEvents(C),this._focusHostElement(),this._updateValueFromPosition(S),this._valueOnSlideStart=k,C.cancelable&&C.preventDefault(),k!=this.value&&this._emitInputEvent()}})},this._pointerMove=C=>{if("pointer"===this._isSliding){const S=R8(C,this._touchId);if(S){C.cancelable&&C.preventDefault();const k=this.value;this._lastPointerEvent=C,this._updateValueFromPosition(S),k!=this.value&&this._emitInputEvent()}}},this._pointerUp=C=>{"pointer"===this._isSliding&&(!GC(C)||"number"!=typeof this._touchId||YB(C.changedTouches,this._touchId))&&(C.cancelable&&C.preventDefault(),this._removeGlobalEvents(),this._isSliding=null,this._touchId=void 0,this._valueOnSlideStart!=this.value&&!this.disabled&&this._emitChangeEvent(),this._valueOnSlideStart=this._lastPointerEvent=null)},this._windowBlur=()=>{this._lastPointerEvent&&this._pointerUp(this._lastPointerEvent)},this._document=g,this.tabIndex=parseInt(d)||0,f.runOutsideAngular(()=>{const C=t.nativeElement;C.addEventListener("mousedown",this._pointerDown,Ic),C.addEventListener("touchstart",this._pointerDown,Ic)})}get invert(){return this._invert}set invert(t){this._invert=xr(t)}get max(){return this._max}set max(t){this._max=Ec(t,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(t){this._min=Ec(t,this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(t){this._step=Ec(t,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(t){this._thumbLabel=xr(t)}get tickInterval(){return this._tickInterval}set tickInterval(t){this._tickInterval="auto"===t?"auto":"number"==typeof t||"string"==typeof t?Ec(t,this._tickInterval):0}get value(){return null===this._value&&(this.value=this._min),this._value}set value(t){if(t!==this._value){let r=Ec(t,0);this._roundToDecimal&&r!==this.min&&r!==this.max&&(r=parseFloat(r.toFixed(this._roundToDecimal))),this._value=r,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(t){this._vertical=xr(t)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(t){this._focusHostElement(t)}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}_shouldInvertAxis(){return this.vertical?!this.invert:this.invert}_isMinValue(){return 0===this.percent}_getThumbGap(){return this.disabled?7:this._isMinValue()&&!this.thumbLabel?this._isActive?10:7:0}_getTrackBackgroundStyles(){const r=this.vertical?`1, ${1-this.percent}, 1`:1-this.percent+", 1, 1";return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"-":""}${this._getThumbGap()}px) scale3d(${r})`}}_getTrackFillStyles(){const t=this.percent,i=this.vertical?`1, ${t}, 1`:`${t}, 1, 1`;return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"":"-"}${this._getThumbGap()}px) scale3d(${i})`,display:0===t?"none":""}}_getTicksContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"-":""}${this._tickIntervalPercent/2*100}%)`}}_getTicksStyles(){let t=100*this._tickIntervalPercent,f={backgroundSize:this.vertical?`2px ${t}%`:`${t}% 2px`,transform:`translateZ(0) translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"":"-"}${t/2}%)${this.vertical||"rtl"!=this._getDirection()?"":" rotate(180deg)"}`};if(this._isMinValue()&&this._getThumbGap()){const g=this._shouldInvertAxis();let _;_=this.vertical?g?"Bottom":"Top":g?"Right":"Left",f[`padding${_}`]=`${this._getThumbGap()}px`}return f}_getThumbContainerStyles(){const t=this._shouldInvertAxis();return{transform:`translate${this.vertical?"Y":"X"}(-${100*(("rtl"!=this._getDirection()||this.vertical?t:!t)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){const t=this._shouldInvertAxis();return"rtl"!=this._getDirection()||this.vertical?t:!t}_getDirection(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{this._isActive=!!t&&"keyboard"!==t,this._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){const t=this._elementRef.nativeElement;t.removeEventListener("mousedown",this._pointerDown,Ic),t.removeEventListener("touchstart",this._pointerDown,Ic),this._lastPointerEvent=null,this._removeGlobalEvents(),this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(t){if(this.disabled||Tc(t)||this._isSliding&&"keyboard"!==this._isSliding)return;const r=this.value;switch(t.keyCode){case 33:this._increment(10);break;case 34:this._increment(-10);break;case 35:this.value=this.max;break;case 36:this.value=this.min;break;case 37:this._increment("rtl"==this._getDirection()?1:-1);break;case 38:this._increment(1);break;case 39:this._increment("rtl"==this._getDirection()?-1:1);break;case 40:this._increment(-1);break;default:return}r!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding="keyboard",t.preventDefault()}_onKeyup(){"keyboard"===this._isSliding&&(this._isSliding=null)}_getWindow(){return this._document.defaultView||window}_bindGlobalEvents(t){const r=this._document,i=GC(t),d=i?"touchend":"mouseup";r.addEventListener(i?"touchmove":"mousemove",this._pointerMove,Ic),r.addEventListener(d,this._pointerUp,Ic),i&&r.addEventListener("touchcancel",this._pointerUp,Ic);const f=this._getWindow();typeof f<"u"&&f&&f.addEventListener("blur",this._windowBlur)}_removeGlobalEvents(){const t=this._document;t.removeEventListener("mousemove",this._pointerMove,Ic),t.removeEventListener("mouseup",this._pointerUp,Ic),t.removeEventListener("touchmove",this._pointerMove,Ic),t.removeEventListener("touchend",this._pointerUp,Ic),t.removeEventListener("touchcancel",this._pointerUp,Ic);const r=this._getWindow();typeof r<"u"&&r&&r.removeEventListener("blur",this._windowBlur)}_increment(t){const r=this._clamp(this.value||0,this.min,this.max);this.value=this._clamp(r+this.step*t,this.min,this.max)}_updateValueFromPosition(t){if(!this._sliderDimensions)return;let d=this._clamp(((this.vertical?t.y:t.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(d=1-d),0===d)this.value=this.min;else if(1===d)this.value=this.max;else{const f=this._calculateValue(d),g=Math.round((f-this.min)/this.step)*this.step+this.min;this.value=this._clamp(g,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(!this.tickInterval||!this._sliderDimensions)return;let t;if("auto"==this.tickInterval){let r=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width;t=Math.ceil(30/(r*this.step/(this.max-this.min)))*this.step/r}else t=this.tickInterval*this.step/(this.max-this.min);this._tickIntervalPercent=P8(t)?t:0}_createChangeEvent(t=this.value){let r=new Aee;return r.source=this,r.value=t,r}_calculatePercentage(t){const r=((t||0)-this.min)/(this.max-this.min);return P8(r)?r:0}_calculateValue(t){return this.min+t*(this.max-this.min)}_clamp(t,r=0,i=1){return Math.max(r,Math.min(t,i))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(t){this._elementRef.nativeElement.focus(t)}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(t){this.value=t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}}return e.\u0275fac=function(t){return new(t||e)(Xe(kr),Xe(Ac),Xe(Wi),Xe(qu,8),Ds("tabindex"),Xe(rr),Xe(Rr),Xe(Zo,8))},e.\u0275cmp=Zn({type:e,selectors:[["mat-slider"]],viewQuery:function(t,r){if(1&t&&Wr(wee,5),2&t){let i;Kn(i=Qn())&&(r._sliderWrapper=i.first)}},hostAttrs:["role","slider",1,"mat-slider","mat-focus-indicator"],hostVars:29,hostBindings:function(t,r){1&t&&zt("focus",function(){return r._onFocus()})("blur",function(){return r._onBlur()})("keydown",function(o){return r._onKeydown(o)})("keyup",function(){return r._onKeyup()})("mouseenter",function(){return r._onMouseenter()})("selectstart",function(o){return o.preventDefault()}),2&t&&(Nl("tabIndex",r.tabIndex),Er("aria-disabled",r.disabled)("aria-valuemax",r.max)("aria-valuemin",r.min)("aria-valuenow",r.value)("aria-valuetext",r.valueText??r.displayValue)("aria-orientation",r.vertical?"vertical":"horizontal"),ui("mat-slider-disabled",r.disabled)("mat-slider-has-ticks",r.tickInterval)("mat-slider-horizontal",!r.vertical)("mat-slider-axis-inverted",r._shouldInvertAxis())("mat-slider-invert-mouse-coords",r._shouldInvertMouseCoords())("mat-slider-sliding",r._isSliding)("mat-slider-thumb-label-showing",r.thumbLabel)("mat-slider-vertical",r.vertical)("mat-slider-min-value",r._isMinValue())("mat-slider-hide-last-tick",r.disabled||r._isMinValue()&&r._getThumbGap()&&r._shouldInvertAxis())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{disabled:"disabled",color:"color",tabIndex:"tabIndex",invert:"invert",max:"max",min:"min",step:"step",thumbLabel:"thumbLabel",tickInterval:"tickInterval",value:"value",displayWith:"displayWith",valueText:"valueText",vertical:"vertical"},outputs:{change:"change",input:"input",valueChange:"valueChange"},exportAs:["matSlider"],features:[Gr([Eee]),Gn],decls:13,vars:6,consts:[[1,"mat-slider-wrapper"],["sliderWrapper",""],[1,"mat-slider-track-wrapper"],[1,"mat-slider-track-background",3,"ngStyle"],[1,"mat-slider-track-fill",3,"ngStyle"],[1,"mat-slider-ticks-container",3,"ngStyle"],[1,"mat-slider-ticks",3,"ngStyle"],[1,"mat-slider-thumb-container",3,"ngStyle"],[1,"mat-slider-focus-ring"],[1,"mat-slider-thumb"],[1,"mat-slider-thumb-label"],[1,"mat-slider-thumb-label-text"]],template:function(t,r){1&t&&(qe(0,"div",0,1)(2,"div",2),Cn(3,"div",3)(4,"div",4),nt(),qe(5,"div",5),Cn(6,"div",6),nt(),qe(7,"div",7),Cn(8,"div",8)(9,"div",9),qe(10,"div",10)(11,"span",11),Bt(12),nt()()()()),2&t&&(Dt(3),Mt("ngStyle",r._getTrackBackgroundStyles()),Dt(1),Mt("ngStyle",r._getTrackFillStyles()),Dt(1),Mt("ngStyle",r._getTicksContainerStyles()),Dt(1),Mt("ngStyle",r._getTicksStyles()),Dt(1),Mt("ngStyle",r._getThumbContainerStyles()),Dt(5),fs(r.displayValue))},dependencies:[W1],styles:['.mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:none;vertical-align:middle}.mat-slider:not(.mat-slider-disabled):active,.mat-slider.mat-slider-sliding:not(.mat-slider-disabled){cursor:grabbing}.mat-slider-wrapper{-webkit-print-color-adjust:exact;color-adjust:exact;position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{-webkit-background-clip:content-box;background-clip:content-box;background-repeat:repeat;box-sizing:border-box;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb{cursor:grab}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid rgba(0,0,0,0);border-radius:50%;transform:scale(0.7);transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-radius 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.cdk-high-contrast-active .mat-slider-thumb-label{outline:solid 1px}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-sliding .mat-slider-track-fill,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-thumb-container{transition-duration:0ms}.mat-slider-has-ticks .mat-slider-wrapper::after{content:"";position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(0.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.cdk-high-contrast-active .mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(0.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.cdk-high-contrast-active .mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(0.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-track-fill,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after{transition:none}'],encapsulation:2,changeDetection:0}),e})();function P8(e){return!isNaN(e)&&isFinite(e)}function GC(e){return"t"===e.type[0]}function R8(e,n){let t;return t=GC(e)?"number"==typeof n?YB(e.touches,n)||YB(e.changedTouches,n):e.touches[0]||e.changedTouches[0]:e,t?{x:t.clientX,y:t.clientY}:void 0}function YB(e,n){for(let t=0;t<e.length;t++)if(e[t].identifier===n)return e[t]}let Ree=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[zl,ti,ti]}),e})(),ih=(()=>{class e{constructor(t){this.cdr=t,this.min=1,this.max=100,this.step=1,this.value=15,this.title="",this.change=new Mn,this.input=new Mn,this.valueChange=new Mn}ngOnInit(){}ngAfterViewInit(){this.cdr.detectChanges()}onChange(t){null!=t.value&&this.valueChange.emit(t.value)}onInput(t){this.input.emit(t)}}return e.\u0275fac=function(t){return new(t||e)(Xe(Wi))},e.\u0275cmp=Zn({type:e,selectors:[["app-labelled-sliders"]],inputs:{min:"min",max:"max",step:"step",value:"value",title:"title"},outputs:{change:"change",input:"input",valueChange:"valueChange"},decls:7,vars:6,consts:[[1,"vertical-flex"],["appearance","fill"],["matInput","","type","text","readonly","true",3,"value"],["thumbLabel","","tickInterval","auto",3,"min","max","step","value","valueChange","change","input"],["slider",""]],template:function(t,r){if(1&t&&(qe(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),Bt(3),nt(),Cn(4,"input",2),nt(),qe(5,"mat-slider",3,4),zt("valueChange",function(o){return r.value=o})("change",function(o){return r.onChange(o)})("input",function(o){return r.onInput(o)}),nt()()),2&t){const i=li(6);Dt(3),fs(r.title),Dt(1),Mt("value",i.value),Dt(1),Mt("min",r.min)("max",r.max)("step",r.step)("value",r.value)}},dependencies:[HC,kg,AB,ZB]}),e})();const Lee=["canvas1"],Oee=["canvas2"],kee=["canvas3"],Nee=["picker"];let Fee=(()=>{class e extends wl{constructor(){super(...arguments),this.color="warn",this.colorCtr=new ou(null),this.colorspace="RGB"}ngAfterViewInit(){this.pickerInput.select(new Bg(255,255,255)),this.updateColorSpace()}updateInput(){let t=cv.imread(this.canvas1.getCanvas(),cv.IMREAD_GRAYSCALE),r=cv.imread(this.canvas2.getCanvas(),cv.IMREAD_GRAYSCALE),i=cv.imread(this.canvas3.getCanvas(),cv.IMREAD_GRAYSCALE);cv.cvtColor(t,t,cv.COLOR_RGB2GRAY),cv.cvtColor(r,r,cv.COLOR_RGB2GRAY),cv.cvtColor(i,i,cv.COLOR_RGB2GRAY);let o=new cv.MatVector,d=new cv.Mat;switch(this.colorspace){case"RGB":o.push_back(t),o.push_back(r),o.push_back(i),cv.merge(o,d);break;case"YCrCb":o.push_back(t),o.push_back(r),o.push_back(i),cv.merge(o,d),cv.cvtColor(d,d,cv.COLOR_YCrCb2RGB);break;case"LAB":o.push_back(t),o.push_back(r),o.push_back(i),cv.merge(o,d),cv.cvtColor(d,d,cv.COLOR_Lab2RGB);break;case"HSV":t.convertTo(t,cv.CV_32FC1),cv.convertScaleAbs(t,t,179/255,0),o.push_back(t),o.push_back(r),o.push_back(i),cv.merge(o,d),cv.cvtColor(d,d,cv.COLOR_HSV2RGB)}cv.imshow(this.drawCanvas.getCanvas(),d),t.delete(),r.delete(),i.delete(),d.delete(),o.delete(),this.updateColorSpace()}updateColorSpace(){let t=cv.imread(this.drawCanvas.getCanvas()),r=new cv.MatVector;switch(this.colorspace){case"RGB":this.canvas1.title="R",this.canvas2.title="G",this.canvas3.title="B";break;case"LAB":this.canvas1.title="L",this.canvas2.title="A",this.canvas3.title="B",cv.cvtColor(t,t,cv.COLOR_RGB2Lab);break;case"HSV":this.canvas1.title="H",this.canvas2.title="S",this.canvas3.title="V",cv.cvtColor(t,t,cv.COLOR_RGB2HSV);break;case"YCrCb":this.canvas1.title="Y",this.canvas2.title="Cr",this.canvas3.title="Cb",cv.cvtColor(t,t,cv.COLOR_RGB2YCrCb)}cv.split(t,r),"HSV"==this.colorspace&&cv.convertScaleAbs(r.get(0),r.get(0),1.42),cv.imshow(this.canvas1.getCanvas(),r.get(0)),cv.imshow(this.canvas2.getCanvas(),r.get(1)),cv.imshow(this.canvas3.getCanvas(),r.get(2)),t.delete(),r.delete()}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Gi(e)))(r||e)}}(),e.\u0275cmp=Zn({type:e,selectors:[["app-color-spaces"]],viewQuery:function(t,r){if(1&t&&(Wr(Lee,5),Wr(Oee,5),Wr(kee,5),Wr(Nee,5)),2&t){let i;Kn(i=Qn())&&(r.canvas1=i.first),Kn(i=Qn())&&(r.canvas2=i.first),Kn(i=Qn())&&(r.canvas3=i.first),Kn(i=Qn())&&(r.pickerInput=i.first)}},features:[Gn],decls:38,vars:23,consts:[[3,"rightDrawer"],["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],["title","Brush Size"],["brushSizeSlider",""],[1,"fillWidth"],["matInput","",3,"ngxMatColorPicker","formControl"],["matSuffix","",3,"for"],[3,"color"],["picker",""],["appearance","standard",1,"fillWidth"],[3,"ngModel","ngModelChange","selectionChange"],["value","RGB"],["value","HSV"],["value","LAB"],["value","YCrCb"],["ngProjectAs","[centerContent]",5,["","centerContent",""]],["title","Canvas",1,"main-canvas",3,"width","drawColor","drawable","brushRadius","BWOption","drawingEnded"],["inputCanvas",""],[1,"horizontal-flex","canvas-grid"],["title","Red",1,"grid-item",3,"width","drawColor","drawable","brushRadius","drawingEnded"],["canvas1",""],["title","Green",1,"grid-item",3,"width","drawColor","drawable","brushRadius","drawingEnded"],["canvas2",""],["title","Blue",1,"grid-item",3,"width","drawColor","drawable","brushRadius","drawingEnded"],["canvas3",""]],template:function(t,r){if(1&t&&(qe(0,"app-tutorial-template-images",0),Bt(1," Colorspaces "),Ni(2,1),Cn(3,"app-labelled-sliders",2,3)(5,"hr"),qe(6,"h2"),Bt(7,"Brush color"),nt(),qe(8,"mat-form-field",4),Cn(9,"input",5)(10,"ngx-mat-color-toggle",6)(11,"ngx-mat-color-picker",7,8),nt(),Cn(13,"hr"),qe(14,"h2"),Bt(15,"Colorspace"),nt(),qe(16,"mat-form-field",9)(17,"mat-label"),Bt(18,"Choose a colorspace"),nt(),qe(19,"mat-select",10),zt("ngModelChange",function(o){return r.colorspace=o})("selectionChange",function(){return r.updateColorSpace()}),qe(20,"mat-option",11),Bt(21,"RGB"),nt(),qe(22,"mat-option",12),Bt(23,"HSV"),nt(),qe(24,"mat-option",13),Bt(25,"LAB"),nt(),qe(26,"mat-option",14),Bt(27,"YCrCb"),nt()()(),Fi(),Ni(28,15),qe(29,"app-draw-canvas",16,17),zt("drawingEnded",function(){return r.updateColorSpace()}),nt(),qe(31,"div",18)(32,"app-draw-canvas",19,20),zt("drawingEnded",function(){return r.updateInput()}),nt(),qe(34,"app-draw-canvas",21,22),zt("drawingEnded",function(){return r.updateInput()}),nt(),qe(36,"app-draw-canvas",23,24),zt("drawingEnded",function(){return r.updateInput()}),nt()(),Fi(),nt()),2&t){const i=li(4),o=li(12);Mt("rightDrawer",!1),Dt(9),Mt("ngxMatColorPicker",o)("formControl",r.colorCtr),Dt(1),Mt("for",o),Dt(1),Mt("color",r.color),Dt(8),Mt("ngModel",r.colorspace),Dt(10),Mt("width",256)("drawColor",null==r.colorCtr.value?null:r.colorCtr.value.rgba)("drawable",!0)("brushRadius",i.value)("BWOption",!0),Dt(3),Mt("width",256)("drawColor",null==r.colorCtr.value?null:r.colorCtr.value.rgba)("drawable",!0)("brushRadius",i.value),Dt(2),Mt("width",256)("drawColor",null==r.colorCtr.value?null:r.colorCtr.value.rgba)("drawable",!0)("brushRadius",i.value),Dt(2),Mt("width",256)("drawColor",null==r.colorCtr.value?null:r.colorCtr.value.rgba)("drawable",!0)("brushRadius",i.value)}},dependencies:[HC,kg,LQ,M8,gB,rC,hf,fF,ff,Nq,kB,Lq,AB,Vg,ih,wl],styles:[".options-bar[_ngcontent-%COMP%]{gap:2em;align-items:center;padding:0 2em}.options-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:80%}.brush-slider[_ngcontent-%COMP%]{font-size:small}.main-canvas[_ngcontent-%COMP%]{border:solid 1px white;margin:1em;border-radius:.25em;overflow:hidden;aspect-ratio:1;min-width:256px;width:33%;box-shadow:#00000040 0 54px 55px,#0000001f 0 -12px 30px,#0000001f 0 4px 6px,#0000002b 0 12px 13px,#00000017 0 -3px 5px}.grid-item[_ngcontent-%COMP%]{margin:auto;min-width:256px;box-shadow:#26394d 0 20px 30px -10px}.canvas-grid[_ngcontent-%COMP%]{gap:.5em;flex-direction:row;flex-wrap:wrap}"]}),e})();const Bee=["button"],Vee=["*"],L8=new on("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),O8=new on("MatButtonToggleGroup"),zee={provide:Xo,useExisting:zr(()=>WC),multi:!0};let k8=0;class N8{constructor(n,t){this.source=n,this.value=t}}let WC=(()=>{class e{constructor(t,r){this._changeDetector=t,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+k8++,this.valueChange=new Mn,this.change=new Mn,this.appearance=r&&r.appearance?r.appearance:"standard"}get name(){return this._name}set name(t){this._name=t,this._markButtonsForCheck()}get vertical(){return this._vertical}set vertical(t){this._vertical=xr(t)}get value(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t.map(r=>r.value):t[0]?t[0].value:void 0}set value(t){this._setSelectionByValue(t),this.valueChange.emit(this.value)}get selected(){const t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t:t[0]||null}get multiple(){return this._multiple}set multiple(t){this._multiple=xr(t),this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(t){this._disabled=xr(t),this._markButtonsForCheck()}ngOnInit(){this._selectionModel=new rI(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(t=>t.checked))}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_emitChangeEvent(t){const r=new N8(t,this.value);this._controlValueAccessorChangeFn(r.value),this.change.emit(r)}_syncButtonToggle(t,r,i=!1,o=!1){!this.multiple&&this.selected&&!t.checked&&(this.selected.checked=!1),this._selectionModel?r?this._selectionModel.select(t):this._selectionModel.deselect(t):o=!0,o?Promise.resolve().then(()=>this._updateModelValue(t,i)):this._updateModelValue(t,i)}_isSelected(t){return this._selectionModel&&this._selectionModel.isSelected(t)}_isPrechecked(t){return!(typeof this._rawValue>"u")&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(r=>null!=t.value&&r===t.value):t.value===this._rawValue)}_setSelectionByValue(t){this._rawValue=t,this._buttonToggles&&(this.multiple&&t?(Array.isArray(t),this._clearSelection(),t.forEach(r=>this._selectValue(r))):(this._clearSelection(),this._selectValue(t)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(t=>t.checked=!1)}_selectValue(t){const r=this._buttonToggles.find(i=>null!=i.value&&i.value===t);r&&(r.checked=!0,this._selectionModel.select(r))}_updateModelValue(t,r){r&&this._emitChangeEvent(t),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(t=>t._markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(Xe(Wi),Xe(L8,8))},e.\u0275dir=Dn({type:e,selectors:[["mat-button-toggle-group"]],contentQueries:function(t,r,i){if(1&t&&Li(i,jC,5),2&t){let o;Kn(o=Qn())&&(r._buttonToggles=o)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(t,r){2&t&&(Er("aria-disabled",r.disabled),ui("mat-button-toggle-vertical",r.vertical)("mat-button-toggle-group-appearance-standard","standard"===r.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[Gr([zee,{provide:O8,useExisting:e}])]}),e})();const Hee=mf(class{});let jC=(()=>{class e extends Hee{constructor(t,r,i,o,d,f){super(),this._changeDetectorRef=r,this._elementRef=i,this._focusMonitor=o,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new Mn;const g=Number(d);this.tabIndex=g||0===g?g:null,this.buttonToggleGroup=t,this.appearance=f&&f.appearance?f.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(t){this._appearance=t}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(t){const r=xr(t);r!==this._checked&&(this._checked=r,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(t){this._disabled=xr(t)}ngOnInit(){const t=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+k8++,t&&(t._isPrechecked(this)?this.checked=!0:t._isSelected(this)!==this._checked&&t._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const t=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),t&&t._isSelected(this)&&t._syncButtonToggle(this,!1,!1,!0)}focus(t){this._buttonElement.nativeElement.focus(t)}_onButtonClick(){const t=!!this._isSingleSelector()||!this._checked;t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new N8(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}}return e.\u0275fac=function(t){return new(t||e)(Xe(O8,8),Xe(Wi),Xe(kr),Xe(Ac),Ds("tabindex"),Xe(L8,8))},e.\u0275cmp=Zn({type:e,selectors:[["mat-button-toggle"]],viewQuery:function(t,r){if(1&t&&Wr(Bee,5),2&t){let i;Kn(i=Qn())&&(r._buttonElement=i.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(t,r){1&t&&zt("focus",function(){return r.focus()}),2&t&&(Er("aria-label",null)("aria-labelledby",null)("id",r.id)("name",null),ui("mat-button-toggle-standalone",!r.buttonToggleGroup)("mat-button-toggle-checked",r.checked)("mat-button-toggle-disabled",r.disabled)("mat-button-toggle-appearance-standard","standard"===r.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[Gn],ngContentSelectors:Vee,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(t,r){if(1&t&&(zi(),qe(0,"button",0,1),zt("click",function(){return r._onButtonClick()}),qe(2,"span",2),Ur(3),nt()(),Cn(4,"span",3)(5,"span",4)),2&t){const i=li(1);Mt("id",r.buttonId)("disabled",r.disabled||null),Er("tabindex",r.disabled?-1:r.tabIndex)("aria-pressed",r.checked)("name",r._getButtonName())("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby),Dt(5),Mt("matRippleTrigger",i)("matRippleDisabled",r.disableRipple||r.disabled)}},dependencies:[Jd],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),e})(),Uee=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[ti,Rg,ti]}),e})();function Gee(e,n){if(1&e){const t=sa();Ni(0),qe(1,"app-labelled-sliders",21),zt("valueChange",function(i){return Kr(t),Qr(Yn().gaussStdX=i)})("valueChange",function(){return Kr(t),Qr(Yn().drawGaussian())}),nt(),qe(2,"app-labelled-sliders",22),zt("valueChange",function(i){return Kr(t),Qr(Yn().gaussStdY=i)})("valueChange",function(){return Kr(t),Qr(Yn().drawGaussian())}),nt(),Fi()}if(2&e){const t=Yn();Dt(1),Mt("min",.5)("max",128)("step",.5)("value",t.gaussStdX),Dt(1),Mt("min",.5)("max",128)("step",.5)("value",t.gaussStdY)}}function Wee(e,n){if(1&e){const t=sa();qe(0,"app-labelled-sliders",23),zt("valueChange",function(i){return Kr(t),Qr(Yn().gaussStdY=i)})("valueChange",function(i){return Kr(t),Qr(Yn().gaussStdX=i)})("valueChange",function(){return Kr(t),Qr(Yn().drawGaussian())}),nt()}if(2&e){const t=Yn();Mt("min",.5)("max",128)("step",.5)("value",t.gaussStdY)("value",t.gaussStdX)}}let jee=(()=>{class e extends wl{constructor(){super(...arguments),this.angle=0,this.frequency=25,this.magLog=!0,this.brushSize=10,this.gaussStdX=10,this.gaussStdY=10,this.repsentationNorm="logAmplitudeOne"}drawGaussian(){var t=this.drawCanvas.width,r=this.drawCanvas.height,i=new Uint8ClampedArray(t*r*4);for(let o=0;o<r;o++)for(let d=0;d<t;d++){const f=4*(o*t+d);let g=255*Math.exp(-Math.pow((d-r/2)/(Math.sqrt(2)*this.gaussStdY),2)-Math.pow((o-t/2)/(Math.sqrt(2)*this.gaussStdX),2));i[f]=g,i[f+1]=g,i[f+2]=g,i[f+3]=255}this.drawCanvas.drawArray(i)}drawSin(){var t=this.drawCanvas.width,r=this.drawCanvas.height,i=new Uint8ClampedArray(t*r*4);for(let o=0;o<r;o++)for(let d=0;d<t;d++){const f=4*(o*t+d),g=Math.PI*this.angle/180,_=o*Math.cos(g)*this.frequency/r+d*Math.sin(g)*this.frequency/t,C=Math.round(127*(1+Math.sin(2*Math.PI*_)));i[f]=C,i[f+1]=C,i[f+2]=C,i[f+3]=255}this.drawCanvas.drawArray(i)}updateFFT(){let t=cv.imread(this.drawCanvas.getCanvas());cv.cvtColor(t,t,cv.COLOR_RGBA2GRAY,0);let r=cv.getOptimalDFTSize(t.rows),i=cv.getOptimalDFTSize(t.cols),o=cv.Scalar.all(0),d=new cv.Mat;cv.copyMakeBorder(t,d,0,r-t.rows,0,i-t.cols,cv.BORDER_CONSTANT,o);let f=new cv.Mat;d.convertTo(f,cv.CV_32F);let g=new cv.MatVector,_=new cv.Mat,C=new cv.Mat.zeros(d.rows,d.cols,cv.CV_32F);g.push_back(f),g.push_back(C),cv.merge(g,_),cv.dft(_,_,cv.DFT_SCALE),cv.split(_,g),cv.magnitude(g.get(0),g.get(1),g.get(0));let S=g.get(0),k=new cv.Mat.ones(S.rows,S.cols,S.type());switch(this.repsentationNorm){case"logAmplitudeOne":cv.add(S,k,S),cv.log(S,S);break;case"logAmplitude":cv.log(S,S)}let z=new cv.Rect(0,0,-2&S.cols,-2&S.rows);S=S.roi(z);let te=S.cols/2,pe=S.rows/2,Me=new cv.Mat,Re=new cv.Rect(0,0,te,pe),Fe=new cv.Rect(te,0,te,pe),Oe=new cv.Rect(0,pe,te,pe),Be=new cv.Rect(te,pe,te,pe),it=S.roi(Re),at=S.roi(Fe),Ct=S.roi(Oe),mt=S.roi(Be);it.copyTo(Me),mt.copyTo(it),Me.copyTo(mt),at.copyTo(Me),Ct.copyTo(at),Me.copyTo(Ct),cv.normalize(S,S,0,1,cv.NORM_MINMAX),this.outputCanvas.drawMat(S),t.delete(),d.delete(),g.delete(),_.delete(),k.delete(),Me.delete()}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Gi(e)))(r||e)}}(),e.\u0275cmp=Zn({type:e,selectors:[["app-fast-fourier-transform"]],features:[Gn],decls:36,vars:18,consts:[["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],["name","representationNorm",3,"ngModel","ngModelChange","change"],["value","amplitude"],["value","logAmplitude"],["value","logAmplitudeOne"],["title","Brush Size"],["brushSizeSlider",""],["mat-raised-button","","color","primary",1,"fillWidth",3,"click"],["color","primary","labelPosition","before",1,"example-margin"],["toggleAxis",""],[4,"ngIf","ngIfElse"],["singleGaussAxis",""],["title","Angle","thumbLabel","","tickInterval","auto",3,"min","max","step","value","valueChange"],["title","Frequency","thumbLabel","","tickInterval","auto",3,"min","max","step","value","valueChange"],["ngProjectAs","[drawerRight]",5,["","drawerRight",""]],["echarts","",1,"profile-graph",3,"options"],["ngProjectAs","[centerContent]",5,["","centerContent",""]],["title","Canvas",1,"canvas",3,"width","drawable","OnlyBW","brushRadius","drawingEnded"],["inputCanvas",""],["title","Fourier Transform",1,"canvas",3,"drawable","profileOption","profileChanged"],["outputCanvas",""],["title","Gaussian STD X","thumbLabel","","tickInterval","auto",3,"min","max","step","value","valueChange"],["title","Gaussian STD Y","thumbLabel","","tickInterval","auto",3,"min","max","step","value","valueChange"],["title","Gaussian STD","thumbLabel","","tickInterval","auto",3,"min","max","step","value","valueChange"]],template:function(t,r){if(1&t&&(qe(0,"app-tutorial-template-images"),Bt(1," Fourier Transform "),Ni(2,0),qe(3,"mat-button-toggle-group",1),zt("ngModelChange",function(o){return r.repsentationNorm=o})("change",function(){return r.updateFFT()}),qe(4,"mat-button-toggle",2),Bt(5,"A"),nt(),qe(6,"mat-button-toggle",3),Bt(7,"log(A)"),nt(),qe(8,"mat-button-toggle",4),Bt(9,"log(1+A)"),nt()(),Cn(10,"hr")(11,"app-labelled-sliders",5,6)(13,"hr"),qe(14,"button",7),zt("click",function(){return r.drawGaussian()}),Bt(15," Draw Gaussian "),nt(),qe(16,"mat-slide-toggle",8,9),Bt(18," Independant axis "),nt(),ar(19,Gee,3,8,"ng-container",10),ar(20,Wee,1,5,"ng-template",null,11,C_),Cn(22,"hr"),qe(23,"button",7),zt("click",function(){return r.drawSin()}),Bt(24," Draw sin(x) "),nt(),qe(25,"app-labelled-sliders",12),zt("valueChange",function(o){return r.angle=o})("valueChange",function(){return r.drawSin()}),nt(),qe(26,"app-labelled-sliders",13),zt("valueChange",function(o){return r.frequency=o})("valueChange",function(){return r.drawSin()}),nt(),Fi(),Ni(27,14),qe(28,"h2"),Bt(29,"Profile"),nt(),Cn(30,"div",15),Fi(),Ni(31,16),qe(32,"app-draw-canvas",17,18),zt("drawingEnded",function(){return r.updateFFT()}),nt(),qe(34,"app-draw-canvas",19,20),zt("profileChanged",function(){return r.updateProfile()}),nt(),Fi(),nt()),2&t){const i=li(12),o=li(17),d=li(21);Dt(3),Mt("ngModel",r.repsentationNorm),Dt(16),Mt("ngIf",o.checked)("ngIfElse",d),Dt(6),Mt("min",0)("max",180)("step",2.5)("value",r.angle),Dt(1),Mt("min",0)("max",256)("step",1)("value",r.frequency),Dt(4),Mt("options",r.profileOptions),Dt(2),Mt("width",256)("drawable",!0)("OnlyBW",!0)("brushRadius",i.value),Dt(2),Mt("drawable",!1)("profileOption",!0)}},dependencies:[nC,WC,jC,Hs,hf,ff,jB,bl,Vg,ih,wl],styles:[".drawer-content[_ngcontent-%COMP%]{margin:1em auto;gap:1em}.canvas[_ngcontent-%COMP%]{width:45%;min-width:256px}.profile-graph[_ngcontent-%COMP%]{width:256px}"]}),e})();var dI=H(8775);let Zee=(()=>{class e extends wl{constructor(){super(...arguments),this.tileGridSize=8,this.clipLimit=20,this.colorspace="LAB"}updateHistogram(){let t=cv.imread(this.drawCanvas.getCanvas());if(this.outputCanvas.isBWChecked=this.drawCanvas.isBW(),this.drawCanvas.isBW()){cv.cvtColor(t,t,cv.COLOR_RGBA2GRAY);var r=this.getHistogramFromGrayMat(t)}else r=this.getHistogramFromColorMat(t);this.inputHistoOptions=this.updateHistoChart(r),t.delete();let i=cv.imread(this.outputCanvas.getCanvas());this.outputCanvas.isBW()?(cv.cvtColor(i,i,cv.COLOR_RGBA2GRAY),r=this.getHistogramFromGrayMat(i)):r=this.getHistogramFromColorMat(i),this.outputHistoOptions=this.updateHistoChart(r),i.delete()}updateHistoChart(t){let r={legend:{data:["Histogram"],align:"left",textStyle:{color:"white"}},tooltip:{},xAxis:{data:Array.from(Array(t[0].length).keys()),silent:!1,splitLine:{show:!1}},yAxis:{},animationEasing:"exponentialIn",animationDuration:500};return 1==t.length?r.series=[{name:"Histogram",type:"line",symbol:"none",areaStyle:{color:new dI.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(220, 220, 220)"},{offset:1,color:"rgb(150, 150, 150)"}])},data:t[0],dimensions:["R"],itemStyle:{color:"rgb(220, 220, 220)"}}]:(r.legend={data:["R","G","B"],align:"left",textStyle:{color:"white"}},r.series=[{name:"R",type:"line",symbol:"none",itemStyle:{color:"rgb(220, 100, 100)"},areaStyle:{color:new dI.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(255, 68, 100)"},{offset:1,color:"rgb(180, 68, 100)"}])},data:t[0]},{name:"G",type:"line",symbol:"none",itemStyle:{color:"rgb(100, 220, 100)"},areaStyle:{color:new dI.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(68, 255, 100)"},{offset:1,color:"rgb(68, 180, 100)"}])},data:t[1]},{name:"B",type:"line",symbol:"none",itemStyle:{color:"rgb(100, 100, 220)"},areaStyle:{color:new dI.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(68, 100, 255)"},{offset:1,color:"rgb(68, 100, 180)"}])},data:t[2]}]),r}getHistogramFromColorMat(t){let r=new Array,i=new cv.MatVector;cv.split(t,i);let o=new cv.Mat,d=new cv.Mat,f=new cv.Mat,g=[256],_=[0,255],C=new cv.Mat;cv.calcHist(i,[0],C,o,g,_,!1),cv.calcHist(i,[1],C,d,g,_,!1),cv.calcHist(i,[2],C,f,g,_,!1),r.push(o.data32F),r.push(d.data32F),r.push(f.data32F);for(let S=0;S<3;S++)for(let k=0;k<256;k++){let z=r[S];z[k]/=t.rows*t.cols,r[S]=Array.from(z)}return C.delete(),i.delete(),o.delete(),d.delete(),f.delete(),r}getHistogramFromGrayMat(t){let r=new Array,i=new cv.MatVector;i.push_back(t);let o=new cv.Mat,g=new cv.Mat;cv.calcHist(i,[0],g,o,[256],[0,255],!1),r.push(o.data32F);for(let _=0;_<256;_++){let C=r[0];C[_]/=t.rows*t.cols,r[0]=Array.from(C)}return g.delete(),i.delete(),o.delete(),r}equalizeHistogram(){let t=cv.imread(this.drawCanvas.getCanvas());if(this.drawCanvas.isBW())cv.cvtColor(t,t,cv.COLOR_RGB2GRAY),cv.equalizeHist(t,t);else switch(this.colorspace){case"RGB":{let r=new cv.MatVector;cv.split(t,r),cv.equalizeHist(r.get(0),r.get(0)),cv.equalizeHist(r.get(1),r.get(1)),cv.equalizeHist(r.get(2),r.get(2)),cv.merge(r,t),r.delete();break}case"LAB":{cv.cvtColor(t,t,cv.COLOR_RGB2Lab);let r=new cv.MatVector;cv.split(t,r),cv.equalizeHist(r.get(0),r.get(0)),cv.merge(r,t),cv.cvtColor(t,t,cv.COLOR_Lab2RGB),r.delete();break}case"HSV":{cv.cvtColor(t,t,cv.COLOR_RGB2HSV);let r=new cv.MatVector;cv.split(t,r),cv.equalizeHist(r.get(2),r.get(2)),cv.merge(r,t),cv.cvtColor(t,t,cv.COLOR_HSV2RGB),r.delete();break}}this.outputCanvas.drawMat(t),this.updateHistogram(),t.delete()}CLAHE(){let t=cv.imread(this.drawCanvas.getCanvas()),r=new cv.Size(this.tileGridSize,this.tileGridSize),i=new cv.CLAHE(this.clipLimit,r);if(this.drawCanvas.isBW())cv.cvtColor(t,t,cv.COLOR_RGB2GRAY),i.apply(t,t);else switch(this.colorspace){case"RGB":{let o=new cv.MatVector;cv.split(t,o),i.apply(o.get(0),o.get(0)),i.apply(o.get(1),o.get(1)),i.apply(o.get(2),o.get(2)),cv.merge(o,t),o.delete();break}case"LAB":{cv.cvtColor(t,t,cv.COLOR_RGB2Lab);let o=new cv.MatVector;cv.split(t,o),i.apply(o.get(0),o.get(0)),cv.merge(o,t),cv.cvtColor(t,t,cv.COLOR_Lab2RGB),o.delete();break}case"HSV":{cv.cvtColor(t,t,cv.COLOR_RGB2HSV);let o=new cv.MatVector;cv.split(t,o),i.apply(o.get(2),o.get(2)),cv.merge(o,t),cv.cvtColor(t,t,cv.COLOR_HSV2RGB),o.delete();break}}this.outputCanvas.drawMat(t),this.updateHistogram(),t.delete(),i.delete()}ngAfterViewInit(){super.ngAfterViewInit(),this.ngxOpenCv.cvState.subscribe(t=>{this.cvState=t.state,t.ready&&this.updateHistogram()})}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Gi(e)))(r||e)}}(),e.\u0275cmp=Zn({type:e,selectors:[["app-image-histogram"]],features:[Gn],decls:41,vars:19,consts:[["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],["name","Colorspace","aria-label","Color space",3,"ngModel","ngModelChange"],["value","RGB"],["value","LAB"],["value","HSV"],["mat-raised-button","","color","primary",1,"fillWidth",3,"click"],[3,"min","max","step","title","value","valueChange"],["ngProjectAs","[drawerRight]",5,["","drawerRight",""]],["echarts","",1,"histo-graph",3,"options"],["ngProjectAs","[centerContent]",5,["","centerContent",""]],["title","Image",1,"canvas",3,"width","drawable","BWOption","drawingEnded","BWSet"],["inputCanvas",""],["title","Result",1,"canvas",3,"width","drawable","BWOption","BWSet"],["outputCanvas",""]],template:function(t,r){1&t&&(qe(0,"app-tutorial-template-images"),Bt(1," Histogram and equalization "),Ni(2,0),qe(3,"h3"),Bt(4,"Colorspace"),nt(),qe(5,"mat-button-toggle-group",1),zt("ngModelChange",function(o){return r.colorspace=o}),qe(6,"mat-button-toggle",2)(7,"b"),Bt(8,"RGB"),nt()(),qe(9,"mat-button-toggle",3)(10,"b"),Bt(11,"L"),nt(),Bt(12,"AB"),nt(),qe(13,"mat-button-toggle",4),Bt(14,"HS"),qe(15,"b"),Bt(16,"V"),nt()()(),Cn(17,"hr"),qe(18,"button",5),zt("click",function(){return r.equalizeHistogram()}),Bt(19," Histogram equalization "),nt(),Cn(20,"hr"),qe(21,"h3"),Bt(22," Contrast Limited "),Cn(23,"br"),Bt(24," Adaptive Histogram "),Cn(25,"br"),Bt(26," Equalization "),nt(),qe(27,"app-labelled-sliders",6),zt("valueChange",function(o){return r.tileGridSize=o})("valueChange",function(){return r.CLAHE()}),nt(),qe(28,"app-labelled-sliders",6),zt("valueChange",function(o){return r.clipLimit=o})("valueChange",function(){return r.CLAHE()}),nt(),qe(29,"button",5),zt("click",function(){return r.CLAHE()}),Bt(30," CLAHE "),nt(),Fi(),Ni(31,7),Cn(32,"div",8),qe(33,"h2"),Bt(34,"Result canvas"),nt(),Cn(35,"div",8),Fi(),Ni(36,9),qe(37,"app-draw-canvas",10,11),zt("drawingEnded",function(){return r.updateHistogram()})("BWSet",function(){return r.updateHistogram()}),nt(),qe(39,"app-draw-canvas",12,13),zt("BWSet",function(){return r.updateHistogram()}),nt(),Fi(),nt()),2&t&&(Dt(5),Mt("ngModel",r.colorspace),Dt(22),Mt("min",4)("max",48)("step",2)("title","Tile Grid size")("value",r.tileGridSize),Dt(1),Mt("min",4)("max",48)("step",2)("title","Clip Limit")("value",r.clipLimit),Dt(4),Mt("options",r.inputHistoOptions),Dt(3),Mt("options",r.outputHistoOptions),Dt(2),Mt("width",1024)("drawable",!1)("BWOption",!0),Dt(2),Mt("width",1024)("drawable",!1)("BWOption",!0))},dependencies:[nC,WC,jC,hf,ff,bl,Vg,ih,wl],styles:[".canvas[_ngcontent-%COMP%]{width:45%;min-width:256px}.histo-graph[_ngcontent-%COMP%]{min-width:350px;aspect-ratio:1}"]}),e})();function XB(e=0,n=1){let t=1-Math.random(),r=Math.random();return Math.sqrt(-2*Math.log(t))*Math.cos(2*Math.PI*r)*n+e}function hI(e,n={x:0,y:0},t={x:1,y:1}){let r=new Array(e);for(let i=0;i<e;i++)r[i]={x:XB(n.x,t.x),y:XB(n.y,t.y)};return r}function F8(e,n,t){let r=new Array(t),i=(n-e)/(t-1);for(let o=0;o<t;o++)r[o]=e+i*o;return r}var bt=H(3786),B8=H(5199),Xee=(H(5433),H(1659)),$ee=H(4664),Kee=H(6840);function V8(e,n,t){"object"==typeof n&&(t=n,n=null);var i,r=this;if(!(e instanceof Function))for(var o in i=[],e)e.hasOwnProperty(o)&&i.push(o);var d=function(g){if(r.apply(this,arguments),e instanceof Function?z8(this,e.call(this,g)):Qee(this,e,i),this.constructor===d)for(var _=d.__initializers__,C=0;C<_.length;C++)_[C].apply(this,arguments)};d.__super__=r,d.__initializers__=r.__initializers__?r.__initializers__.slice():[],n&&d.__initializers__.push(n);var f=function(){};return f.prototype=r.prototype,d.prototype=new f,d.prototype.constructor=d,z8(d.prototype,t),d.extend=r.extend,d.derive=r.extend,d}function z8(e,n){if(n)for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])}function Qee(e,n,t){for(var r=0;r<t.length;r++){var i=t[r];e[i]=n[i]}}(0,B8.D)([Xee.N,$ee.N]),(0,B8.D)(Kee.T);const qee={extend:V8,derive:V8};function Jee(e,n){this.action=e,this.context=n}var ete={trigger:function(e){if(this.hasOwnProperty("__handlers__")&&this.__handlers__.hasOwnProperty(e)){var n=this.__handlers__[e],t=n.length,r=-1,i=arguments;switch(i.length){case 1:for(;++r<t;)n[r].action.call(n[r].context);return;case 2:for(;++r<t;)n[r].action.call(n[r].context,i[1]);return;case 3:for(;++r<t;)n[r].action.call(n[r].context,i[1],i[2]);return;case 4:for(;++r<t;)n[r].action.call(n[r].context,i[1],i[2],i[3]);return;case 5:for(;++r<t;)n[r].action.call(n[r].context,i[1],i[2],i[3],i[4]);return;default:for(;++r<t;)n[r].action.apply(n[r].context,Array.prototype.slice.call(i,1));return}}},on:function(e,n,t){if(e&&n){var r=this.__handlers__||(this.__handlers__={});if(r[e]){if(this.has(e,n))return}else r[e]=[];var i=new Jee(n,t||this);return r[e].push(i),this}},once:function(e,n,t){if(e&&n){var r=this;return this.on(e,function i(){r.off(e,i),n.apply(this,arguments)},t)}},before:function(e,n,t){if(e&&n)return this.on(e="before"+e,n,t)},after:function(e,n,t){if(e&&n)return this.on(e="after"+e,n,t)},success:function(e,n){return this.once("success",e,n)},error:function(e,n){return this.once("error",e,n)},off:function(e,n){var t=this.__handlers__||(this.__handlers__={});if(n){if(t[e]){for(var r=t[e],i=[],o=0;o<r.length;o++)n&&r[o].action!==n&&i.push(r[o]);t[e]=i}return this}t[e]=[]},has:function(e,n){var t=this.__handlers__;if(!t||!t[e])return!1;for(var r=t[e],i=0;i<r.length;i++)if(r[i].action===n)return!0}};const $B=ete;var tte=0,rte=Array.prototype.forEach,ZC={genGUID:function(){return++tte},relative2absolute:function(e,n){if(!n||e.match(/^\//))return e;for(var t=e.split("/"),r=n.split("/"),i=t[0];"."===i||".."===i;)".."===i&&r.pop(),t.shift(),i=t[0];return r.join("/")+"/"+t.join("/")},extend:function(e,n){if(n)for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e},defaults:function(e,n){if(n)for(var t in n)void 0===e[t]&&(e[t]=n[t]);return e},extendWithPropList:function(e,n,t){if(n)for(var r=0;r<t.length;r++){var i=t[r];e[i]=n[i]}return e},defaultsWithPropList:function(e,n,t){if(n)for(var r=0;r<t.length;r++){var i=t[r];null==e[i]&&(e[i]=n[i])}return e},each:function(e,n,t){if(e&&n)if(e.forEach&&e.forEach===rte)e.forEach(n,t);else if(e.length===+e.length)for(var r=0,i=e.length;r<i;r++)n.call(t,e[r],r,e);else for(var o in e)e.hasOwnProperty(o)&&n.call(t,e[o],o,e)},isObject:function(e){return e===Object(e)},isArray:function(e){return Array.isArray(e)},isArrayLike:function(e){return!!e&&e.length===+e.length},clone:function(e){if(ZC.isObject(e)){if(ZC.isArray(e))return e.slice();if(ZC.isArrayLike(e)){for(var n=new e.constructor(e.length),t=0;t<e.length;t++)n[t]=e[t];return n}return ZC.extend({},e)}return e}};const $o=ZC;var fI=function(){this.__uid__=$o.genGUID()};fI.__initializers__=[function(e){$o.extend(this,e)}],$o.extend(fI,qee),$o.extend(fI.prototype,$B);const Gs=fI;var H8=["OES_texture_float","OES_texture_half_float","OES_texture_float_linear","OES_texture_half_float_linear","OES_standard_derivatives","OES_vertex_array_object","OES_element_index_uint","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","EXT_texture_filter_anisotropic","EXT_shader_texture_lod","WEBGL_draw_buffers","EXT_frag_depth","EXT_sRGB","ANGLE_instanced_arrays"],U8=["MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE"];const ate=function ite(e){for(var n={},t={},r=0;r<H8.length;r++)d(H8[r]);for(r=0;r<U8.length;r++){var o=U8[r];t[o]=e.getParameter(e[o])}function d(f){if(e.getExtension){var g=e.getExtension(f);g||(g=e.getExtension("MOZ_"+f)),g||(g=e.getExtension("WEBKIT_"+f)),n[f]=g}}this.getExtension=function(f){return f in n||d(f),n[f]},this.getParameter=function(f){return t[f]}},ste={get:function ote(e){var n=new XMLHttpRequest;n.open("get",e.url),n.responseType=e.responseType||"text",e.onprogress&&(n.onprogress=function(t){t.lengthComputable?e.onprogress(t.loaded/t.total,t.loaded,t.total):e.onprogress(null)}),n.onload=function(t){n.status>=400?e.onerror&&e.onerror():e.onload&&e.onload(n.response)},e.onerror&&(n.onerror=e.onerror),n.send(null)}};var KB,Ws={supportWebGL:function(){if(null==KB)try{var e=document.createElement("canvas");if(!e.getContext("webgl")&&!e.getContext("experimental-webgl"))throw new Error}catch{KB=!1}return KB}};Ws.Int8Array=typeof Int8Array>"u"?Array:Int8Array,Ws.Uint8Array=typeof Uint8Array>"u"?Array:Uint8Array,Ws.Uint16Array=typeof Uint16Array>"u"?Array:Uint16Array,Ws.Uint32Array=typeof Uint32Array>"u"?Array:Uint32Array,Ws.Int16Array=typeof Int16Array>"u"?Array:Int16Array,Ws.Float32Array=typeof Float32Array>"u"?Array:Float32Array,Ws.Float64Array=typeof Float64Array>"u"?Array:Float64Array;var zg={};typeof window<"u"?zg=window:typeof global<"u"&&(zg=global),Ws.requestAnimationFrame=zg.requestAnimationFrame||zg.msRequestAnimationFrame||zg.mozRequestAnimationFrame||zg.webkitRequestAnimationFrame||function(e){setTimeout(e,16)},Ws.createCanvas=function(){return document.createElement("canvas")},Ws.createImage=function(){return new zg.Image},Ws.request={get:ste.get},Ws.addEventListener=function(e,n,t,r){e.addEventListener(n,t,r)},Ws.removeEventListener=function(e,n,t){e.removeEventListener(n,t)};const oo=Ws;var ko=function(){this.head=null,this.tail=null,this._length=0};ko.prototype.insert=function(e){var n=new ko.Entry(e);return this.insertEntry(n),n},ko.prototype.insertAt=function(e,n){if(!(e<0)){for(var t=this.head,r=0;t&&r!=e;)t=t.next,r++;if(t){var i=new ko.Entry(n),o=t.prev;o?(o.next=i,i.prev=o):this.head=i,i.next=t,t.prev=i}else this.insert(n)}},ko.prototype.insertBeforeEntry=function(e,n){var t=new ko.Entry(e),r=n.prev;r?(r.next=t,t.prev=r):this.head=t,t.next=n,n.prev=t,this._length++},ko.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,this.tail=e):this.head=this.tail=e,this._length++},ko.prototype.remove=function(e){var n=e.prev,t=e.next;n?n.next=t:this.head=t,t?t.prev=n:this.tail=n,e.next=e.prev=null,this._length--},ko.prototype.removeAt=function(e){if(!(e<0)){for(var n=this.head,t=0;n&&t!=e;)n=n.next,t++;if(n)return this.remove(n),n.value}},ko.prototype.getHead=function(){if(this.head)return this.head.value},ko.prototype.getTail=function(){if(this.tail)return this.tail.value},ko.prototype.getAt=function(e){if(!(e<0)){for(var n=this.head,t=0;n&&t!=e;)n=n.next,t++;return n.value}},ko.prototype.indexOf=function(e){for(var n=this.head,t=0;n;){if(n.value===e)return t;n=n.next,t++}},ko.prototype.length=function(){return this._length},ko.prototype.isEmpty=function(){return 0===this._length},ko.prototype.forEach=function(e,n){for(var t=this.head,r=0,i=typeof n<"u";t;)i?e.call(n,t.value,r):e(t.value,r),t=t.next,r++},ko.prototype.clear=function(){this.tail=this.head=null,this._length=0},ko.Entry=function(e){this.value=e,this.next=null,this.prev=null};const lte=ko;var Ey=function(e){this._list=new lte,this._map={},this._maxSize=e||10};Ey.prototype.setMaxSize=function(e){this._maxSize=e},Ey.prototype.put=function(e,n){if(!this._map.hasOwnProperty(e)){var t=this._list.length();if(t>=this._maxSize&&t>0){var r=this._list.head;this._list.remove(r),delete this._map[r.key]}var i=this._list.insert(n);i.key=e,this._map[e]=i}},Ey.prototype.get=function(e){var n=this._map[e];if(this._map.hasOwnProperty(e))return n!==this._list.tail&&(this._list.remove(n),this._list.insertEntry(n)),n.value},Ey.prototype.remove=function(e){var n=this._map[e];typeof n<"u"&&(delete this._map[e],this._list.remove(n))},Ey.prototype.clear=function(){this._list.clear(),this._map={}};const G8=Ey;var Ca={},W8={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function lu(e){return(e=Math.round(e))<0?0:e>255?255:e}function YC(e){return e<0?0:e>1?1:e}function QB(e){return e.length&&"%"===e.charAt(e.length-1)?lu(parseFloat(e)/100*255):lu(parseInt(e,10))}function Ay(e){return e.length&&"%"===e.charAt(e.length-1)?YC(parseFloat(e)/100):YC(parseFloat(e))}function qB(e,n,t){return t<0?t+=1:t>1&&(t-=1),6*t<1?e+(n-e)*t*6:2*t<1?n:3*t<2?e+(n-e)*(2/3-t)*6:e}function Cf(e,n,t){return e+(n-e)*t}function cu(e,n,t,r,i){return e[0]=n,e[1]=t,e[2]=r,e[3]=i,e}function JB(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e}var j8=new G8(20),pI=null;function Iy(e,n){pI&&JB(pI,n),pI=j8.put(e,pI||n.slice())}function e3(e,n){var t=(parseFloat(e[0])%360+360)%360/360,r=Ay(e[1]),i=Ay(e[2]),o=i<=.5?i*(r+1):i+r-i*r,d=2*i-o;return cu(n=n||[],lu(255*qB(d,o,t+1/3)),lu(255*qB(d,o,t)),lu(255*qB(d,o,t-1/3)),1),4===e.length&&(n[3]=e[3]),n}Ca.parse=function(e,n){if(e){n=n||[];var t=j8.get(e);if(t)return JB(n,t);var i,r=(e+="").replace(/ /g,"").toLowerCase();if(r in W8)return JB(n,W8[r]),Iy(e,n),n;if("#"===r.charAt(0))return 4===r.length?(i=parseInt(r.substr(1),16))>=0&&i<=4095?(cu(n,(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1),Iy(e,n),n):void cu(n,0,0,0,1):7===r.length?(i=parseInt(r.substr(1),16))>=0&&i<=16777215?(cu(n,(16711680&i)>>16,(65280&i)>>8,255&i,1),Iy(e,n),n):void cu(n,0,0,0,1):void 0;var o=r.indexOf("("),d=r.indexOf(")");if(-1!==o&&d+1===r.length){var f=r.substr(0,o),g=r.substr(o+1,d-(o+1)).split(","),_=1;switch(f){case"rgba":if(4!==g.length)return void cu(n,0,0,0,1);_=Ay(g.pop());case"rgb":return 3!==g.length?void cu(n,0,0,0,1):(cu(n,QB(g[0]),QB(g[1]),QB(g[2]),_),Iy(e,n),n);case"hsla":return 4!==g.length?void cu(n,0,0,0,1):(g[3]=Ay(g[3]),e3(g,n),Iy(e,n),n);case"hsl":return 3!==g.length?void cu(n,0,0,0,1):(e3(g,n),Iy(e,n),n);default:return}}cu(n,0,0,0,1)}},Ca.parseToFloat=function(e,n){if(n=Ca.parse(e,n))return n[0]/=255,n[1]/=255,n[2]/=255,n},Ca.lift=function(e,n){var t=Ca.parse(e);if(t){for(var r=0;r<3;r++)t[r]=n<0?t[r]*(1-n)|0:(255-t[r])*n+t[r]|0;return Ca.stringify(t,4===t.length?"rgba":"rgb")}},Ca.toHex=function(e){var n=Ca.parse(e);if(n)return((1<<24)+(n[0]<<16)+(n[1]<<8)+ +n[2]).toString(16).slice(1)},Ca.fastLerp=function(e,n,t){if(n&&n.length&&e>=0&&e<=1){t=t||[];var r=e*(n.length-1),i=Math.floor(r),o=Math.ceil(r),d=n[i],f=n[o],g=r-i;return t[0]=lu(Cf(d[0],f[0],g)),t[1]=lu(Cf(d[1],f[1],g)),t[2]=lu(Cf(d[2],f[2],g)),t[3]=YC(Cf(d[3],f[3],g)),t}},Ca.fastMapToColor=Ca.fastLerp,Ca.lerp=function(e,n,t){if(n&&n.length&&e>=0&&e<=1){var r=e*(n.length-1),i=Math.floor(r),o=Math.ceil(r),d=Ca.parse(n[i]),f=Ca.parse(n[o]),g=r-i,_=Ca.stringify([lu(Cf(d[0],f[0],g)),lu(Cf(d[1],f[1],g)),lu(Cf(d[2],f[2],g)),YC(Cf(d[3],f[3],g))],"rgba");return t?{color:_,leftIndex:i,rightIndex:o,value:r}:_}},Ca.mapToColor=Ca.lerp,Ca.modifyHSL=function(e,n,t,r){if(e=Ca.parse(e))return e=function ute(e){if(e){var g,_,n=e[0]/255,t=e[1]/255,r=e[2]/255,i=Math.min(n,t,r),o=Math.max(n,t,r),d=o-i,f=(o+i)/2;if(0===d)g=0,_=0;else{_=f<.5?d/(o+i):d/(2-o-i);var C=((o-n)/6+d/2)/d,S=((o-t)/6+d/2)/d,k=((o-r)/6+d/2)/d;n===o?g=k-S:t===o?g=1/3+C-k:r===o&&(g=2/3+S-C),g<0&&(g+=1),g>1&&(g-=1)}var z=[360*g,_,f];return null!=e[3]&&z.push(e[3]),z}}(e),null!=n&&(e[0]=function cte(e){return(e=Math.round(e))<0?0:e>360?360:e}(n)),null!=t&&(e[1]=Ay(t)),null!=r&&(e[2]=Ay(r)),Ca.stringify(e3(e),"rgba")},Ca.modifyAlpha=function(e,n){if((e=Ca.parse(e))&&null!=n)return e[3]=YC(n),Ca.stringify(e,"rgba")},Ca.stringify=function(e,n){if(e&&e.length){var t=e[0]+","+e[1]+","+e[2];return("rgba"===n||"hsva"===n||"hsla"===n)&&(t+=","+e[3]),n+"("+t+")"}};var dte=Ca.parseToFloat,t3={};function Z8(e){var n=Object.keys(e);n.sort();for(var t=[],r=0;r<n.length;r++){var i=n[r],o=e[i];t.push(null===o?i:i+" "+o.toString())}return t.join("\n")}var fte=Gs.extend(function(){return{name:"",depthTest:!0,depthMask:!0,transparent:!1,blend:null,autoUpdateTextureStatus:!0,uniforms:{},vertexDefines:{},fragmentDefines:{},_textureStatus:{},_enabledUniforms:null}},function(){this.name||(this.name="MATERIAL_"+this.__uid__),this.shader&&this.attachShader(this.shader,!0)},{precision:"highp",setUniform:function(e,n){void 0===n&&console.warn('Uniform value "'+e+'" is undefined');var t=this.uniforms[e];t&&("string"==typeof n&&(n=dte(n)||n),t.value=n,this.autoUpdateTextureStatus&&"t"===t.type&&(n?this.enableTexture(e):this.disableTexture(e)))},setUniforms:function(e){for(var n in e)this.setUniform(n,e[n])},isUniformEnabled:function(e){return this._enabledUniforms.indexOf(e)>=0},getEnabledUniforms:function(){return this._enabledUniforms},getTextureUniforms:function(){return this._textureUniforms},set:function(e,n){if("object"==typeof e)for(var t in e)this.setUniform(t,e[t]);else this.setUniform(e,n)},get:function(e){var n=this.uniforms[e];if(n)return n.value},attachShader:function(e,n){var t=this.uniforms;this.uniforms=e.createUniforms(),this.shader=e;var r=this.uniforms;this._enabledUniforms=Object.keys(r),this._enabledUniforms.sort(),this._textureUniforms=this._enabledUniforms.filter(function(_){var C=this.uniforms[_].type;return"t"===C||"tv"===C},this);var i=this.vertexDefines,o=this.fragmentDefines;if(this.vertexDefines=$o.clone(e.vertexDefines),this.fragmentDefines=$o.clone(e.fragmentDefines),n){for(var d in t)r[d]&&(r[d].value=t[d].value);$o.defaults(this.vertexDefines,i),$o.defaults(this.fragmentDefines,o)}var f={};for(var g in e.textures)f[g]={shaderType:e.textures[g].shaderType,type:e.textures[g].type,enabled:!(!n||!this._textureStatus[g])&&this._textureStatus[g].enabled};this._textureStatus=f,this._programKey=""},clone:function(){var e=new this.constructor({name:this.name,shader:this.shader});for(var n in this.uniforms)e.uniforms[n].value=this.uniforms[n].value;return e.depthTest=this.depthTest,e.depthMask=this.depthMask,e.transparent=this.transparent,e.blend=this.blend,e.vertexDefines=$o.clone(this.vertexDefines),e.fragmentDefines=$o.clone(this.fragmentDefines),e.enableTexture(this.getEnabledTextures()),e.precision=this.precision,e},define:function(e,n,t){var r=this.vertexDefines,i=this.fragmentDefines;"vertex"!==e&&"fragment"!==e&&"both"!==e&&arguments.length<3&&(t=n,n=e,e="both"),t=t??null,("vertex"===e||"both"===e)&&r[n]!==t&&(r[n]=t,this._programKey=""),("fragment"===e||"both"===e)&&i[n]!==t&&(i[n]=t,"both"!==e&&(this._programKey=""))},undefine:function(e,n){"vertex"!==e&&"fragment"!==e&&"both"!==e&&arguments.length<2&&(n=e,e="both"),("vertex"===e||"both"===e)&&this.isDefined("vertex",n)&&(delete this.vertexDefines[n],this._programKey=""),("fragment"===e||"both"===e)&&this.isDefined("fragment",n)&&(delete this.fragmentDefines[n],"both"!==e&&(this._programKey=""))},isDefined:function(e,n){switch(e){case"vertex":return void 0!==this.vertexDefines[n];case"fragment":return void 0!==this.fragmentDefines[n]}},getDefine:function(e,n){switch(e){case"vertex":return this.vertexDefines[n];case"fragment":return this.fragmentDefines[n]}},enableTexture:function(e){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.enableTexture(e[n]);else{var t=this._textureStatus[e];t&&(t.enabled||(t.enabled=!0,this._programKey=""))}},enableTexturesAll:function(){var e=this._textureStatus;for(var n in e)e[n].enabled=!0;this._programKey=""},disableTexture:function(e){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.disableTexture(e[n]);else{var t=this._textureStatus[e];t&&(!t.enabled||(t.enabled=!1,this._programKey=""))}},disableTexturesAll:function(){var e=this._textureStatus;for(var n in e)e[n].enabled=!1;this._programKey=""},isTextureEnabled:function(e){var n=this._textureStatus;return!!n[e]&&n[e].enabled},getEnabledTextures:function(){var e=[],n=this._textureStatus;for(var t in n)n[t].enabled&&e.push(t);return e},dirtyDefines:function(){this._programKey=""},getProgramKey:function(){return this._programKey||(this._programKey=function hte(e,n,t){t.sort();for(var r=[],i=0;i<t.length;i++)r.push(t[i]);var d=Z8(e)+"\n"+Z8(n)+"\n"+r.join("\n");if(t3[d])return t3[d];var f=$o.genGUID();return t3[d]=f,f}(this.vertexDefines,this.fragmentDefines,this.getEnabledTextures())),this._programKey}});const Pc=fte;var e,gI=1e-6,Ko=Array,Py=Math.random,jr={create:function(){var e=new Ko(2);return e[0]=0,e[1]=0,e},clone:function(e){var n=new Ko(2);return n[0]=e[0],n[1]=e[1],n},fromValues:function(e,n){var t=new Ko(2);return t[0]=e,t[1]=n,t},copy:function(e,n){return e[0]=n[0],e[1]=n[1],e},set:function(e,n,t){return e[0]=n,e[1]=t,e},add:function(e,n,t){return e[0]=n[0]+t[0],e[1]=n[1]+t[1],e},subtract:function(e,n,t){return e[0]=n[0]-t[0],e[1]=n[1]-t[1],e}};jr.sub=jr.subtract,jr.multiply=function(e,n,t){return e[0]=n[0]*t[0],e[1]=n[1]*t[1],e},jr.mul=jr.multiply,jr.divide=function(e,n,t){return e[0]=n[0]/t[0],e[1]=n[1]/t[1],e},jr.div=jr.divide,jr.min=function(e,n,t){return e[0]=Math.min(n[0],t[0]),e[1]=Math.min(n[1],t[1]),e},jr.max=function(e,n,t){return e[0]=Math.max(n[0],t[0]),e[1]=Math.max(n[1],t[1]),e},jr.scale=function(e,n,t){return e[0]=n[0]*t,e[1]=n[1]*t,e},jr.scaleAndAdd=function(e,n,t,r){return e[0]=n[0]+t[0]*r,e[1]=n[1]+t[1]*r,e},jr.distance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1];return Math.sqrt(t*t+r*r)},jr.dist=jr.distance,jr.squaredDistance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1];return t*t+r*r},jr.sqrDist=jr.squaredDistance,jr.length=function(e){var n=e[0],t=e[1];return Math.sqrt(n*n+t*t)},jr.len=jr.length,jr.squaredLength=function(e){var n=e[0],t=e[1];return n*n+t*t},jr.sqrLen=jr.squaredLength,jr.negate=function(e,n){return e[0]=-n[0],e[1]=-n[1],e},jr.inverse=function(e,n){return e[0]=1/n[0],e[1]=1/n[1],e},jr.normalize=function(e,n){var t=n[0],r=n[1],i=t*t+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=n[0]*i,e[1]=n[1]*i),e},jr.dot=function(e,n){return e[0]*n[0]+e[1]*n[1]},jr.cross=function(e,n,t){var r=n[0]*t[1]-n[1]*t[0];return e[0]=e[1]=0,e[2]=r,e},jr.lerp=function(e,n,t,r){var i=n[0],o=n[1];return e[0]=i+r*(t[0]-i),e[1]=o+r*(t[1]-o),e},jr.random=function(e,n){n=n||1;var t=2*GLMAT_RANDOM()*Math.PI;return e[0]=Math.cos(t)*n,e[1]=Math.sin(t)*n,e},jr.transformMat2=function(e,n,t){var r=n[0],i=n[1];return e[0]=t[0]*r+t[2]*i,e[1]=t[1]*r+t[3]*i,e},jr.transformMat2d=function(e,n,t){var r=n[0],i=n[1];return e[0]=t[0]*r+t[2]*i+t[4],e[1]=t[1]*r+t[3]*i+t[5],e},jr.transformMat3=function(e,n,t){var r=n[0],i=n[1];return e[0]=t[0]*r+t[3]*i+t[6],e[1]=t[1]*r+t[4]*i+t[7],e},jr.transformMat4=function(e,n,t){var r=n[0],i=n[1];return e[0]=t[0]*r+t[4]*i+t[12],e[1]=t[1]*r+t[5]*i+t[13],e},jr.forEach=(e=jr.create(),function(n,t,r,i,o,d){var f,g;for(t||(t=2),r||(r=0),g=i?Math.min(i*t+r,n.length):n.length,f=r;f<g;f+=t)e[0]=n[f],e[1]=n[f+1],o(e,e,d),n[f]=e[0],n[f+1]=e[1];return n});const mr=jr;var ii=function(e,n){this.array=mr.fromValues(e=e||0,n=n||0),this._dirty=!0};if(ii.prototype={constructor:ii,add:function(e){return mr.add(this.array,this.array,e.array),this._dirty=!0,this},set:function(e,n){return this.array[0]=e,this.array[1]=n,this._dirty=!0,this},setArray:function(e){return this.array[0]=e[0],this.array[1]=e[1],this._dirty=!0,this},clone:function(){return new ii(this.x,this.y)},copy:function(e){return mr.copy(this.array,e.array),this._dirty=!0,this},cross:function(e,n){return mr.cross(e.array,this.array,n.array),e._dirty=!0,this},dist:function(e){return mr.dist(this.array,e.array)},distance:function(e){return mr.distance(this.array,e.array)},div:function(e){return mr.div(this.array,this.array,e.array),this._dirty=!0,this},divide:function(e){return mr.divide(this.array,this.array,e.array),this._dirty=!0,this},dot:function(e){return mr.dot(this.array,e.array)},len:function(){return mr.len(this.array)},length:function(){return mr.length(this.array)},lerp:function(e,n,t){return mr.lerp(this.array,e.array,n.array,t),this._dirty=!0,this},min:function(e){return mr.min(this.array,this.array,e.array),this._dirty=!0,this},max:function(e){return mr.max(this.array,this.array,e.array),this._dirty=!0,this},mul:function(e){return mr.mul(this.array,this.array,e.array),this._dirty=!0,this},multiply:function(e){return mr.multiply(this.array,this.array,e.array),this._dirty=!0,this},negate:function(){return mr.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return mr.normalize(this.array,this.array),this._dirty=!0,this},random:function(e){return mr.random(this.array,e),this._dirty=!0,this},scale:function(e){return mr.scale(this.array,this.array,e),this._dirty=!0,this},scaleAndAdd:function(e,n){return mr.scaleAndAdd(this.array,this.array,e.array,n),this._dirty=!0,this},sqrDist:function(e){return mr.sqrDist(this.array,e.array)},squaredDistance:function(e){return mr.squaredDistance(this.array,e.array)},sqrLen:function(){return mr.sqrLen(this.array)},squaredLength:function(){return mr.squaredLength(this.array)},sub:function(e){return mr.sub(this.array,this.array,e.array),this._dirty=!0,this},subtract:function(e){return mr.subtract(this.array,this.array,e.array),this._dirty=!0,this},transformMat2:function(e){return mr.transformMat2(this.array,this.array,e.array),this._dirty=!0,this},transformMat2d:function(e){return mr.transformMat2d(this.array,this.array,e.array),this._dirty=!0,this},transformMat3:function(e){return mr.transformMat3(this.array,this.array,e.array),this._dirty=!0,this},transformMat4:function(e){return mr.transformMat4(this.array,this.array,e.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Object.defineProperty){var Y8=ii.prototype;Object.defineProperty(Y8,"x",{get:function(){return this.array[0]},set:function(e){this.array[0]=e,this._dirty=!0}}),Object.defineProperty(Y8,"y",{get:function(){return this.array[1]},set:function(e){this.array[1]=e,this._dirty=!0}})}ii.add=function(e,n,t){return mr.add(e.array,n.array,t.array),e._dirty=!0,e},ii.set=function(e,n,t){return mr.set(e.array,n,t),e._dirty=!0,e},ii.copy=function(e,n){return mr.copy(e.array,n.array),e._dirty=!0,e},ii.cross=function(e,n,t){return mr.cross(e.array,n.array,t.array),e._dirty=!0,e},ii.distance=ii.dist=function(e,n){return mr.distance(e.array,n.array)},ii.divide=ii.div=function(e,n,t){return mr.divide(e.array,n.array,t.array),e._dirty=!0,e},ii.dot=function(e,n){return mr.dot(e.array,n.array)},ii.len=function(e){return mr.length(e.array)},ii.lerp=function(e,n,t,r){return mr.lerp(e.array,n.array,t.array,r),e._dirty=!0,e},ii.min=function(e,n,t){return mr.min(e.array,n.array,t.array),e._dirty=!0,e},ii.max=function(e,n,t){return mr.max(e.array,n.array,t.array),e._dirty=!0,e},ii.multiply=ii.mul=function(e,n,t){return mr.multiply(e.array,n.array,t.array),e._dirty=!0,e},ii.negate=function(e,n){return mr.negate(e.array,n.array),e._dirty=!0,e},ii.normalize=function(e,n){return mr.normalize(e.array,n.array),e._dirty=!0,e},ii.random=function(e,n){return mr.random(e.array,n),e._dirty=!0,e},ii.scale=function(e,n,t){return mr.scale(e.array,n.array,t),e._dirty=!0,e},ii.scaleAndAdd=function(e,n,t,r){return mr.scaleAndAdd(e.array,n.array,t.array,r),e._dirty=!0,e},ii.squaredDistance=ii.sqrDist=function(e,n){return mr.sqrDist(e.array,n.array)},ii.squaredLength=ii.sqrLen=function(e){return mr.sqrLen(e.array)},ii.subtract=ii.sub=function(e,n,t){return mr.subtract(e.array,n.array,t.array),e._dirty=!0,e},ii.transformMat2=function(e,n,t){return mr.transformMat2(e.array,n.array,t.array),e._dirty=!0,e},ii.transformMat2d=function(e,n,t){return mr.transformMat2d(e.array,n.array,t.array),e._dirty=!0,e},ii.transformMat3=function(e,n,t){return mr.transformMat3(e.array,n.array,t.array),e._dirty=!0,e},ii.transformMat4=function(e,n,t){return mr.transformMat4(e.array,n.array,t.array),e._dirty=!0,e};const jl=ii;var K8={};function pte(e){for(var n=e.split("\n"),t=0,r=n.length;t<r;t++)n[t]=t+1+": "+n[t];return n.join("\n")}function Q8(e,n,t){if(!e.getShaderParameter(n,e.COMPILE_STATUS))return[e.getShaderInfoLog(n),pte(t)].join("\n")}var q8=new oo.Float32Array(16),gte=Gs.extend({uniformSemantics:{},attributes:{}},function(){this._locations={},this._textureSlot=0,this._program=null},{bind:function(e){this._textureSlot=0,e.gl.useProgram(this._program)},hasUniform:function(e){return null!=this._locations[e]},useTextureSlot:function(e,n,t){n&&(e.gl.activeTexture(e.gl.TEXTURE0+t),n.isRenderable()?n.bind(e):n.unbind(e))},currentTextureSlot:function(){return this._textureSlot},resetTextureSlot:function(e){this._textureSlot=e||0},takeCurrentTextureSlot:function(e,n){var t=this._textureSlot;return this.useTextureSlot(e,n,t),this._textureSlot++,t},setUniform:function(e,n,t,r){var o=this._locations[t];if(null==o)return!1;switch(n){case"m4":if(!(r instanceof Float32Array)){for(var d=0;d<r.length;d++)q8[d]=r[d];r=q8}e.uniformMatrix4fv(o,!1,r);break;case"2i":e.uniform2i(o,r[0],r[1]);break;case"2f":e.uniform2f(o,r[0],r[1]);break;case"3i":e.uniform3i(o,r[0],r[1],r[2]);break;case"3f":e.uniform3f(o,r[0],r[1],r[2]);break;case"4i":e.uniform4i(o,r[0],r[1],r[2],r[3]);break;case"4f":e.uniform4f(o,r[0],r[1],r[2],r[3]);break;case"1i":e.uniform1i(o,r);break;case"1f":e.uniform1f(o,r);break;case"1fv":e.uniform1fv(o,r);break;case"1iv":e.uniform1iv(o,r);break;case"2iv":e.uniform2iv(o,r);break;case"2fv":e.uniform2fv(o,r);break;case"3iv":e.uniform3iv(o,r);break;case"3fv":e.uniform3fv(o,r);break;case"4iv":e.uniform4iv(o,r);break;case"4fv":e.uniform4fv(o,r);break;case"m2":case"m2v":e.uniformMatrix2fv(o,!1,r);break;case"m3":case"m3v":e.uniformMatrix3fv(o,!1,r);break;case"m4v":if(Array.isArray(r)&&Array.isArray(r[0])){var f=new oo.Float32Array(16*r.length),g=0;for(d=0;d<r.length;d++)for(var _=r[d],C=0;C<16;C++)f[g++]=_[C];e.uniformMatrix4fv(o,!1,f)}else e.uniformMatrix4fv(o,!1,r)}return!0},setUniformOfSemantic:function(e,n,t){var r=this.uniformSemantics[n];return!!r&&this.setUniform(e,r.type,r.symbol,t)},enableAttributes:function(e,n,t){var d,r=e.gl,i=this._program,o=this._locations;(d=t?t.__enabledAttributeList:K8[e.__uid__])||(d=t?t.__enabledAttributeList=[]:K8[e.__uid__]=[]);for(var f=[],g=0;g<n.length;g++){var _=n[g];if(this.attributes[_]){var C=o[_];if(null==C){if(-1===(C=r.getAttribLocation(i,_))){f[g]=-1;continue}o[_]=C}f[g]=C,d[C]=d[C]?2:1}else f[g]=-1}for(g=0;g<d.length;g++)switch(d[g]){case 1:r.enableVertexAttribArray(g),d[g]=3;break;case 2:d[g]=3;break;case 3:r.disableVertexAttribArray(g),d[g]=0}return f},getAttribLocation:function(e,n){var t=this._locations,r=t[n];return null==r&&(r=e.getAttribLocation(this._program,n),t[n]=r),r},buildProgram:function(e,n,t,r){var i=e.createShader(e.VERTEX_SHADER),o=e.createProgram();e.shaderSource(i,t),e.compileShader(i);var d=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(d,r),e.compileShader(d);var f=Q8(e,i,t);if(f||(f=Q8(e,d,r)))return f;if(e.attachShader(o,i),e.attachShader(o,d),n.attributeSemantics.POSITION)e.bindAttribLocation(o,0,n.attributeSemantics.POSITION.symbol);else{var g=Object.keys(this.attributes);e.bindAttribLocation(o,0,g[0])}if(e.linkProgram(o),e.deleteShader(i),e.deleteShader(d),this._program=o,this.vertexCode=t,this.fragmentCode=r,!e.getProgramParameter(o,e.LINK_STATUS))return"Could not link program\n"+e.getProgramInfoLog(o);for(var _=0;_<n.uniforms.length;_++){var C=n.uniforms[_];this._locations[C]=e.getUniformLocation(o,C)}}});const vte=gte;var mte=/for\s*?\(int\s*?_idx_\s*\=\s*([\w-]+)\;\s*_idx_\s*<\s*([\w-]+);\s*_idx_\s*\+\+\s*\)\s*\{\{([\s\S]+?)(?=\}\})\}\}/g;function J8(e,n,t){var i={};for(var o in t)i[o+"_COUNT"]=t[o];return e.replace(mte,function r(d,f,g,_){var C="";isNaN(f)&&(f=f in n?n[f]:i[f]),isNaN(g)&&(g=g in n?n[g]:i[g]);for(var S=parseInt(f);S<parseInt(g);S++)C+="{"+_.replace(/float\s*\(\s*_idx_\s*\)/g,S.toFixed(1)).replace(/_idx_/g,S)+"}";return C})}function r3(e,n,t){var r=[];if(n)for(var i in n){var o=n[i];o>0&&r.push("#define "+i.toUpperCase()+"_COUNT "+o)}if(t)for(var d=0;d<t.length;d++)r.push("#define "+(f=t[d]).toUpperCase()+"_ENABLED");for(var f in e){var g=e[f];r.push(null===g?"#define "+f:"#define "+f+" "+g.toString())}return r.join("\n")}function eW(e){this._renderer=e,this._cache={}}eW.prototype.getProgram=function(e,n,t){var r=this._cache,i=e.isSkinnedMesh&&e.isSkinnedMesh(),o=e.isInstancedMesh&&e.isInstancedMesh(),d="s"+n.shader.shaderID+"m"+n.getProgramKey();if(t&&(d+="se"+t.getProgramKey(e.lightGroup)),i&&(d+=",sk"+e.joints.length),o&&(d+=",is"),Be=r[d])return Be;var f=t?t.getLightsNumbers(e.lightGroup):{},g=this._renderer,_=g.gl,C=n.getEnabledTextures(),S="";if(i){var k={SKINNING:null,JOINT_COUNT:e.joints.length};e.joints.length>g.getMaxJointNumber()&&(k.USE_SKIN_MATRICES_TEXTURE=null),S+="\n"+r3(k)+"\n"}o&&(S+="\n#define INSTANCING\n");var z=S+r3(n.vertexDefines,f,C),te=S+r3(n.fragmentDefines,f,C),pe=z+"\n"+n.shader.vertex,Me=["OES_standard_derivatives","EXT_shader_texture_lod"].filter(function(at){return null!=g.getGLExtension(at)});Me.indexOf("EXT_shader_texture_lod")>=0&&(te+="\n#define SUPPORT_TEXTURE_LOD"),Me.indexOf("OES_standard_derivatives")>=0&&(te+="\n#define SUPPORT_STANDARD_DERIVATIVES");var Be,Re=function _te(e){for(var n=[],t=0;t<e.length;t++)n.push("#extension GL_"+e[t]+" : enable");return n.join("\n")}(Me)+"\n"+function yte(e){return["precision",e,"float"].join(" ")+";\n"+["precision",e,"int"].join(" ")+";\n"+["precision",e,"sampler2D"].join(" ")+";\n"}(n.precision)+"\n"+te+"\n"+n.shader.fragment,Fe=J8(pe,n.vertexDefines,f),Oe=J8(Re,n.fragmentDefines,f);(Be=new vte).uniformSemantics=n.shader.uniformSemantics,Be.attributes=n.shader.attributes;var it=Be.buildProgram(_,n.shader,Fe,Oe);return Be.__error=it,r[d]=Be,Be};const bte=eW;var tW=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g,xte=/attribute\s+(float|int|vec2|vec3|vec4)\s+([\s\S]*?);/g,nW=/#define\s+(\w+)?(\s+[\d-.]+)?\s*;?\s*\n/g,Cte={bool:"1i",int:"1i",sampler2D:"t",samplerCube:"t",float:"1f",vec2:"2f",vec3:"3f",vec4:"4f",ivec2:"2i",ivec3:"3i",ivec4:"4i",mat2:"m2",mat3:"m3",mat4:"m4"};function ah(e){for(var n=[],t=0;t<e;t++)n[t]=0;return n}var rW={bool:function(){return!0},int:function(){return 0},float:function(){return 0},sampler2D:function(){return null},samplerCube:function(){return null},vec2:function(){return ah(2)},vec3:function(){return ah(3)},vec4:function(){return ah(4)},ivec2:function(){return ah(2)},ivec3:function(){return ah(3)},ivec4:function(){return ah(4)},mat2:function(){return ah(4)},mat3:function(){return ah(9)},mat4:function(){return ah(16)},array:function(){return[]}},a3=["POSITION","NORMAL","BINORMAL","TANGENT","TEXCOORD","TEXCOORD_0","TEXCOORD_1","COLOR","JOINT","WEIGHT"],iW=["SKIN_MATRIX","VIEWPORT_SIZE","VIEWPORT","DEVICEPIXELRATIO","WINDOW_SIZE","NEAR","FAR","TIME"],aW=["WORLD","VIEW","PROJECTION","WORLDVIEW","VIEWPROJECTION","WORLDVIEWPROJECTION","WORLDINVERSE","VIEWINVERSE","PROJECTIONINVERSE","WORLDVIEWINVERSE","VIEWPROJECTIONINVERSE","WORLDVIEWPROJECTIONINVERSE","WORLDTRANSPOSE","VIEWTRANSPOSE","PROJECTIONTRANSPOSE","WORLDVIEWTRANSPOSE","VIEWPROJECTIONTRANSPOSE","WORLDVIEWPROJECTIONTRANSPOSE","WORLDINVERSETRANSPOSE","VIEWINVERSETRANSPOSE","PROJECTIONINVERSETRANSPOSE","WORLDVIEWINVERSETRANSPOSE","VIEWPROJECTIONINVERSETRANSPOSE","WORLDVIEWPROJECTIONINVERSETRANSPOSE"],wte={vec4:4,vec3:3,vec2:2,float:1},o3={},oW={};function sW(e){return e.replace(/[ \t]*\/\/.*\n/g,"").replace(/[ \t]*\/\*[\s\S]*?\*\//g,"")}function Ry(){console.error("Wrong uniform/attributes syntax")}function lW(e,n){for(var t=/[,=\(\):]/,r=n.replace(/:\s*\[\s*(.*)\s*\]/g,"="+e+"($1)").replace(/\s+/g,"").split(/(?=[,=\(\):])/g),i=[],o=0;o<r.length;o++)r[o].match(t)?i.push(r[o].charAt(0),r[o].slice(1)):i.push(r[o]);var pe,k=0,z={},te=null;function Me(Oe){Oe||Ry();var Be=Oe.match(/\[(.*?)\]/);pe=Oe.replace(/\[(.*?)\]/,""),z[pe]={},Be&&(z[pe].isArray=!0,z[pe].arraySize=Be[1])}for(Me((r=i)[0]),o=1;o<r.length;o++){var Re=r[o];if(Re){if("="===Re){if(0!==k&&3!==k){Ry();break}k=1;continue}if(":"===Re){k=4;continue}if(","===Re){if(2===k){if(!(te instanceof Array)){Ry();break}te.push(+r[++o])}else k=5;continue}if(")"===Re){z[pe].value=new oo.Float32Array(te),te=null,k=5;continue}if("("===Re){if(2!==k){Ry();break}if(!(te instanceof Array)){Ry();break}te.push(+r[++o]);continue}if(Re.indexOf("vec")>=0){if(1!==k&&4!==k){Ry();break}k=2,te=[];continue}if(1===k){z[pe].value="bool"===e?"true"===Re:parseFloat(Re),te=null;continue}if(4===k){var Fe=Re;a3.indexOf(Fe)>=0||iW.indexOf(Fe)>=0||aW.indexOf(Fe)>=0?z[pe].semantic=Fe:"ignore"===Fe||"unconfigurable"===Fe?z[pe].ignore=!0:z[pe].value="bool"===e?"true"===Fe:parseFloat(Fe);continue}Me(Re),k=0}}return z}function bo(e,n){"object"==typeof e&&(n=e.fragment,e=e.vertex),e=sW(e),n=sW(n),this._shaderID=function Ste(e,n){var t="vertex:"+e+"fragment:"+n;if(o3[t])return o3[t];var r=$o.genGUID();return o3[t]=r,oW[r]={vertex:e,fragment:n},r}(e,n),this._vertexCode=bo.parseImport(e),this._fragmentCode=bo.parseImport(n),this.attributeSemantics={},this.matrixSemantics={},this.uniformSemantics={},this.matrixSemanticKeys=[],this.uniformTemplates={},this.attributes={},this.textures={},this.vertexDefines={},this.fragmentDefines={},this._parseAttributes(),this._parseUniforms(),this._parseDefines()}bo.prototype={constructor:bo,createUniforms:function(){var e={};for(var n in this.uniformTemplates){var t=this.uniformTemplates[n];e[n]={type:t.type,value:t.value()}}return e},_parseImport:function(){this._vertexCode=bo.parseImport(this.vertex),this._fragmentCode=bo.parseImport(this.fragment)},_addSemanticUniform:function(e,n,t){if(a3.indexOf(t)>=0)this.attributeSemantics[t]={symbol:e,type:n};else if(aW.indexOf(t)>=0){var r=!1,i=t;t.match(/TRANSPOSE$/)&&(r=!0,i=t.slice(0,-9)),this.matrixSemantics[t]={symbol:e,type:n,isTranspose:r,semanticNoTranspose:i}}else iW.indexOf(t)>=0&&(this.uniformSemantics[t]={symbol:e,type:n})},_addMaterialUniform:function(e,n,t,r,i,o){o[e]={type:t,value:i?rW.array:r||rW[n],semantic:null}},_parseUniforms:function(){var e={},n=this;function r(o){return null!=o?function(){return o}:null}function i(o,d,f){var g=lW(d,f),_=[];for(var C in g){var S=g[C],k=S.semantic,z=C,te=Cte[d],pe=r(g[C].value);g[C].isArray&&(z+="["+g[C].arraySize+"]",te+="v"),_.push(z),n._uniformList.push(C),S.ignore||(("sampler2D"===d||"samplerCube"===d)&&(n.textures[C]={shaderType:"fragment",type:d}),k?n._addSemanticUniform(C,te,k):n._addMaterialUniform(C,d,te,pe,g[C].isArray,e))}return _.length>0?"uniform "+d+" "+_.join(",")+";\n":""}this._uniformList=[],this._vertexCode=this._vertexCode.replace(tW,i),this._fragmentCode=this._fragmentCode.replace(tW,i),n.matrixSemanticKeys=Object.keys(this.matrixSemantics),this.uniformTemplates=e},_parseAttributes:function(){var e={},n=this;this._vertexCode=this._vertexCode.replace(xte,function t(r,i,o){var d=lW(i,o),f=wte[i]||1,g=[];for(var _ in d){var C=d[_].semantic;if(e[_]={type:"float",size:f,semantic:C||null},C){if(a3.indexOf(C)<0)throw new Error('Unkown semantic "'+C+'"');n.attributeSemantics[C]={symbol:_,type:i}}g.push(_)}return"attribute "+i+" "+g.join(",")+";\n"}),this.attributes=e},_parseDefines:function(){var e=this;function t(r,i,o){var d=e.fragmentDefines;return d[i]||(d[i]="false"!==o&&("true"===o||(o?isNaN(parseFloat(o))?o.trim():parseFloat(o):null))),""}this._vertexCode=this._vertexCode.replace(nW,t),this._fragmentCode=this._fragmentCode.replace(nW,t)},clone:function(){var e=oW[this._shaderID];return new bo(e.vertex,e.fragment)}},Object.defineProperty&&(Object.defineProperty(bo.prototype,"shaderID",{get:function(){return this._shaderID}}),Object.defineProperty(bo.prototype,"vertex",{get:function(){return this._vertexCode}}),Object.defineProperty(bo.prototype,"fragment",{get:function(){return this._fragmentCode}}),Object.defineProperty(bo.prototype,"uniforms",{get:function(){return this._uniformList}}));var Dte=/(@import)\s*([0-9a-zA-Z_\-\.]*)/g;bo.parseImport=function(e){return e.replace(Dte,function(i,t,r){return(i=bo.source(r))?bo.parseImport(i):(console.error('Shader chunk "'+r+'" not existed in library'),"")})};var Mte=/(@export)\s*([0-9a-zA-Z_\-\.]*)\s*\n([\s\S]*?)@end/g;bo.import=function(e){e.replace(Mte,function(n,t,r,o){if(o=o.replace(/(^[\s\t\xa0\u3000]+)|([\u3000\xa0\s\t]+\x24)/g,"")){for(var _,d=r.split("."),f=bo.codes,g=0;g<d.length-1;)f[_=d[g++]]||(f[_]={}),f=f[_];f[_=d[g]]=o}return o})},bo.codes={},bo.source=function(e){for(var n=e.split("."),t=bo.codes,r=0;t&&r<n.length;)t=t[n[r++]];return"string"!=typeof t?(console.error('Shader "'+e+'" not existed in library'),""):t};const Un=bo,cW="@export clay.prez.vertex\nuniform mat4 WVP : WORLDVIEWPROJECTION;\nattribute vec3 pos : POSITION;\nattribute vec2 uv : TEXCOORD_0;\nuniform vec2 uvRepeat : [1.0, 1.0];\nuniform vec2 uvOffset : [0.0, 0.0];\n@import clay.chunk.skinning_header\n@import clay.chunk.instancing_header\nvarying vec2 v_Texcoord;\nvoid main()\n{\n vec4 P = vec4(pos, 1.0);\n#ifdef SKINNING\n @import clay.chunk.skin_matrix\n P = skinMatrixWS * P;\n#endif\n#ifdef INSTANCING\n @import clay.chunk.instancing_matrix\n P = instanceMat * P;\n#endif\n gl_Position = WVP * P;\n v_Texcoord = uv * uvRepeat + uvOffset;\n}\n@end\n@export clay.prez.fragment\nuniform sampler2D alphaMap;\nuniform float alphaCutoff: 0.0;\nvarying vec2 v_Texcoord;\nvoid main()\n{\n if (alphaCutoff > 0.0) {\n if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {\n discard;\n }\n }\n gl_FragColor = vec4(0.0,0.0,0.0,1.0);\n}\n@end";var Ji={create:function(){var e=new Ko(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},clone:function(e){var n=new Ko(16);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n},copy:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},transpose:function(e,n){if(e===n){var t=n[1],r=n[2],i=n[3],o=n[6],d=n[7],f=n[11];e[1]=n[4],e[2]=n[8],e[3]=n[12],e[4]=t,e[6]=n[9],e[7]=n[13],e[8]=r,e[9]=o,e[11]=n[14],e[12]=i,e[13]=d,e[14]=f}else e[0]=n[0],e[1]=n[4],e[2]=n[8],e[3]=n[12],e[4]=n[1],e[5]=n[5],e[6]=n[9],e[7]=n[13],e[8]=n[2],e[9]=n[6],e[10]=n[10],e[11]=n[14],e[12]=n[3],e[13]=n[7],e[14]=n[11],e[15]=n[15];return e},invert:function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],d=n[4],f=n[5],g=n[6],_=n[7],C=n[8],S=n[9],k=n[10],z=n[11],te=n[12],pe=n[13],Me=n[14],Re=n[15],Fe=t*f-r*d,Oe=t*g-i*d,Be=t*_-o*d,it=r*g-i*f,at=r*_-o*f,Ct=i*_-o*g,mt=C*pe-S*te,Ft=C*Me-k*te,nn=C*Re-z*te,$t=S*Me-k*pe,pn=S*Re-z*pe,mn=k*Re-z*Me,sn=Fe*mn-Oe*pn+Be*$t+it*nn-at*Ft+Ct*mt;return sn?(e[0]=(f*mn-g*pn+_*$t)*(sn=1/sn),e[1]=(i*pn-r*mn-o*$t)*sn,e[2]=(pe*Ct-Me*at+Re*it)*sn,e[3]=(k*at-S*Ct-z*it)*sn,e[4]=(g*nn-d*mn-_*Ft)*sn,e[5]=(t*mn-i*nn+o*Ft)*sn,e[6]=(Me*Be-te*Ct-Re*Oe)*sn,e[7]=(C*Ct-k*Be+z*Oe)*sn,e[8]=(d*pn-f*nn+_*mt)*sn,e[9]=(r*nn-t*pn-o*mt)*sn,e[10]=(te*at-pe*Be+Re*Fe)*sn,e[11]=(S*Be-C*at-z*Fe)*sn,e[12]=(f*Ft-d*$t-g*mt)*sn,e[13]=(t*$t-r*Ft+i*mt)*sn,e[14]=(pe*Oe-te*it-Me*Fe)*sn,e[15]=(C*it-S*Oe+k*Fe)*sn,e):null},adjoint:function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],d=n[4],f=n[5],g=n[6],_=n[7],C=n[8],S=n[9],k=n[10],z=n[11],te=n[12],pe=n[13],Me=n[14],Re=n[15];return e[0]=f*(k*Re-z*Me)-S*(g*Re-_*Me)+pe*(g*z-_*k),e[1]=-(r*(k*Re-z*Me)-S*(i*Re-o*Me)+pe*(i*z-o*k)),e[2]=r*(g*Re-_*Me)-f*(i*Re-o*Me)+pe*(i*_-o*g),e[3]=-(r*(g*z-_*k)-f*(i*z-o*k)+S*(i*_-o*g)),e[4]=-(d*(k*Re-z*Me)-C*(g*Re-_*Me)+te*(g*z-_*k)),e[5]=t*(k*Re-z*Me)-C*(i*Re-o*Me)+te*(i*z-o*k),e[6]=-(t*(g*Re-_*Me)-d*(i*Re-o*Me)+te*(i*_-o*g)),e[7]=t*(g*z-_*k)-d*(i*z-o*k)+C*(i*_-o*g),e[8]=d*(S*Re-z*pe)-C*(f*Re-_*pe)+te*(f*z-_*S),e[9]=-(t*(S*Re-z*pe)-C*(r*Re-o*pe)+te*(r*z-o*S)),e[10]=t*(f*Re-_*pe)-d*(r*Re-o*pe)+te*(r*_-o*f),e[11]=-(t*(f*z-_*S)-d*(r*z-o*S)+C*(r*_-o*f)),e[12]=-(d*(S*Me-k*pe)-C*(f*Me-g*pe)+te*(f*k-g*S)),e[13]=t*(S*Me-k*pe)-C*(r*Me-i*pe)+te*(r*k-i*S),e[14]=-(t*(f*Me-g*pe)-d*(r*Me-i*pe)+te*(r*g-i*f)),e[15]=t*(f*k-g*S)-d*(r*k-i*S)+C*(r*g-i*f),e},determinant:function(e){var n=e[0],t=e[1],r=e[2],i=e[3],o=e[4],d=e[5],f=e[6],g=e[7],_=e[8],C=e[9],S=e[10],k=e[11],z=e[12],te=e[13],pe=e[14],Me=e[15];return(n*d-t*o)*(S*Me-k*pe)-(n*f-r*o)*(C*Me-k*te)+(n*g-i*o)*(C*pe-S*te)+(t*f-r*d)*(_*Me-k*z)-(t*g-i*d)*(_*pe-S*z)+(r*g-i*f)*(_*te-C*z)},multiply:function(e,n,t){var r=n[0],i=n[1],o=n[2],d=n[3],f=n[4],g=n[5],_=n[6],C=n[7],S=n[8],k=n[9],z=n[10],te=n[11],pe=n[12],Me=n[13],Re=n[14],Fe=n[15],Oe=t[0],Be=t[1],it=t[2],at=t[3];return e[0]=Oe*r+Be*f+it*S+at*pe,e[1]=Oe*i+Be*g+it*k+at*Me,e[2]=Oe*o+Be*_+it*z+at*Re,e[3]=Oe*d+Be*C+it*te+at*Fe,e[4]=(Oe=t[4])*r+(Be=t[5])*f+(it=t[6])*S+(at=t[7])*pe,e[5]=Oe*i+Be*g+it*k+at*Me,e[6]=Oe*o+Be*_+it*z+at*Re,e[7]=Oe*d+Be*C+it*te+at*Fe,e[8]=(Oe=t[8])*r+(Be=t[9])*f+(it=t[10])*S+(at=t[11])*pe,e[9]=Oe*i+Be*g+it*k+at*Me,e[10]=Oe*o+Be*_+it*z+at*Re,e[11]=Oe*d+Be*C+it*te+at*Fe,e[12]=(Oe=t[12])*r+(Be=t[13])*f+(it=t[14])*S+(at=t[15])*pe,e[13]=Oe*i+Be*g+it*k+at*Me,e[14]=Oe*o+Be*_+it*z+at*Re,e[15]=Oe*d+Be*C+it*te+at*Fe,e},multiplyAffine:function(e,n,t){var r=n[0],i=n[1],o=n[2],d=n[4],f=n[5],g=n[6],_=n[8],C=n[9],S=n[10],k=n[12],z=n[13],te=n[14],pe=t[0],Me=t[1],Re=t[2];return e[0]=pe*r+Me*d+Re*_,e[1]=pe*i+Me*f+Re*C,e[2]=pe*o+Me*g+Re*S,e[4]=(pe=t[4])*r+(Me=t[5])*d+(Re=t[6])*_,e[5]=pe*i+Me*f+Re*C,e[6]=pe*o+Me*g+Re*S,e[8]=(pe=t[8])*r+(Me=t[9])*d+(Re=t[10])*_,e[9]=pe*i+Me*f+Re*C,e[10]=pe*o+Me*g+Re*S,e[12]=(pe=t[12])*r+(Me=t[13])*d+(Re=t[14])*_+k,e[13]=pe*i+Me*f+Re*C+z,e[14]=pe*o+Me*g+Re*S+te,e}};Ji.mul=Ji.multiply,Ji.mulAffine=Ji.multiplyAffine,Ji.translate=function(e,n,t){var d,f,g,_,C,S,k,z,te,pe,Me,Re,r=t[0],i=t[1],o=t[2];return n===e?(e[12]=n[0]*r+n[4]*i+n[8]*o+n[12],e[13]=n[1]*r+n[5]*i+n[9]*o+n[13],e[14]=n[2]*r+n[6]*i+n[10]*o+n[14],e[15]=n[3]*r+n[7]*i+n[11]*o+n[15]):(f=n[1],g=n[2],_=n[3],C=n[4],S=n[5],k=n[6],z=n[7],te=n[8],pe=n[9],Me=n[10],Re=n[11],e[0]=d=n[0],e[1]=f,e[2]=g,e[3]=_,e[4]=C,e[5]=S,e[6]=k,e[7]=z,e[8]=te,e[9]=pe,e[10]=Me,e[11]=Re,e[12]=d*r+C*i+te*o+n[12],e[13]=f*r+S*i+pe*o+n[13],e[14]=g*r+k*i+Me*o+n[14],e[15]=_*r+z*i+Re*o+n[15]),e},Ji.scale=function(e,n,t){var r=t[0],i=t[1],o=t[2];return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=n[3]*r,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=n[7]*i,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=n[11]*o,e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e},Ji.rotate=function(e,n,t,r){var g,_,C,S,k,z,te,pe,Me,Re,Fe,Oe,Be,it,at,Ct,mt,Ft,nn,$t,pn,mn,sn,wn,i=r[0],o=r[1],d=r[2],f=Math.sqrt(i*i+o*o+d*d);return Math.abs(f)<gI?null:(i*=f=1/f,o*=f,d*=f,g=Math.sin(t),_=Math.cos(t),k=n[1],z=n[2],te=n[3],Me=n[5],Re=n[6],Fe=n[7],Be=n[9],it=n[10],at=n[11],nn=i*o*(C=1-_)-d*g,$t=o*o*C+_,pn=d*o*C+i*g,mn=i*d*C+o*g,sn=o*d*C-i*g,wn=d*d*C+_,e[0]=(S=n[0])*(Ct=i*i*C+_)+(pe=n[4])*(mt=o*i*C+d*g)+(Oe=n[8])*(Ft=d*i*C-o*g),e[1]=k*Ct+Me*mt+Be*Ft,e[2]=z*Ct+Re*mt+it*Ft,e[3]=te*Ct+Fe*mt+at*Ft,e[4]=S*nn+pe*$t+Oe*pn,e[5]=k*nn+Me*$t+Be*pn,e[6]=z*nn+Re*$t+it*pn,e[7]=te*nn+Fe*$t+at*pn,e[8]=S*mn+pe*sn+Oe*wn,e[9]=k*mn+Me*sn+Be*wn,e[10]=z*mn+Re*sn+it*wn,e[11]=te*mn+Fe*sn+at*wn,n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e)},Ji.rotateX=function(e,n,t){var r=Math.sin(t),i=Math.cos(t),o=n[4],d=n[5],f=n[6],g=n[7],_=n[8],C=n[9],S=n[10],k=n[11];return n!==e&&(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[4]=o*i+_*r,e[5]=d*i+C*r,e[6]=f*i+S*r,e[7]=g*i+k*r,e[8]=_*i-o*r,e[9]=C*i-d*r,e[10]=S*i-f*r,e[11]=k*i-g*r,e},Ji.rotateY=function(e,n,t){var r=Math.sin(t),i=Math.cos(t),o=n[0],d=n[1],f=n[2],g=n[3],_=n[8],C=n[9],S=n[10],k=n[11];return n!==e&&(e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[0]=o*i-_*r,e[1]=d*i-C*r,e[2]=f*i-S*r,e[3]=g*i-k*r,e[8]=o*r+_*i,e[9]=d*r+C*i,e[10]=f*r+S*i,e[11]=g*r+k*i,e},Ji.rotateZ=function(e,n,t){var r=Math.sin(t),i=Math.cos(t),o=n[0],d=n[1],f=n[2],g=n[3],_=n[4],C=n[5],S=n[6],k=n[7];return n!==e&&(e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[0]=o*i+_*r,e[1]=d*i+C*r,e[2]=f*i+S*r,e[3]=g*i+k*r,e[4]=_*i-o*r,e[5]=C*i-d*r,e[6]=S*i-f*r,e[7]=k*i-g*r,e},Ji.fromRotationTranslation=function(e,n,t){var r=n[0],i=n[1],o=n[2],d=n[3],f=r+r,g=i+i,_=o+o,C=r*f,S=r*g,k=r*_,z=i*g,te=i*_,pe=o*_,Me=d*f,Re=d*g,Fe=d*_;return e[0]=1-(z+pe),e[1]=S+Fe,e[2]=k-Re,e[3]=0,e[4]=S-Fe,e[5]=1-(C+pe),e[6]=te+Me,e[7]=0,e[8]=k+Re,e[9]=te-Me,e[10]=1-(C+z),e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},Ji.fromQuat=function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],d=t+t,f=r+r,g=i+i,_=t*d,C=r*d,S=r*f,k=i*d,z=i*f,te=i*g,pe=o*d,Me=o*f,Re=o*g;return e[0]=1-S-te,e[1]=C+Re,e[2]=k-Me,e[3]=0,e[4]=C-Re,e[5]=1-_-te,e[6]=z+pe,e[7]=0,e[8]=k+Me,e[9]=z-pe,e[10]=1-_-S,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},Ji.frustum=function(e,n,t,r,i,o,d){var f=1/(t-n),g=1/(i-r),_=1/(o-d);return e[0]=2*o*f,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*g,e[6]=0,e[7]=0,e[8]=(t+n)*f,e[9]=(i+r)*g,e[10]=(d+o)*_,e[11]=-1,e[12]=0,e[13]=0,e[14]=d*o*2*_,e[15]=0,e},Ji.perspective=function(e,n,t,r,i){var o=1/Math.tan(n/2),d=1/(r-i);return e[0]=o/t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*d,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*d,e[15]=0,e},Ji.ortho=function(e,n,t,r,i,o,d){var f=1/(n-t),g=1/(r-i),_=1/(o-d);return e[0]=-2*f,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*g,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*_,e[11]=0,e[12]=(n+t)*f,e[13]=(i+r)*g,e[14]=(d+o)*_,e[15]=1,e},Ji.lookAt=function(e,n,t,r){var i,o,d,f,g,_,C,S,k,z,te=n[0],pe=n[1],Me=n[2],Re=r[0],Fe=r[1],Oe=r[2],Be=t[0],it=t[1],at=t[2];return Math.abs(te-Be)<gI&&Math.abs(pe-it)<gI&&Math.abs(Me-at)<gI?Ji.identity(e):(C=te-Be,S=pe-it,k=Me-at,i=Fe*(k*=z=1/Math.sqrt(C*C+S*S+k*k))-Oe*(S*=z),o=Oe*(C*=z)-Re*k,d=Re*S-Fe*C,(z=Math.sqrt(i*i+o*o+d*d))?(i*=z=1/z,o*=z,d*=z):(i=0,o=0,d=0),f=S*d-k*o,g=k*i-C*d,_=C*o-S*i,(z=Math.sqrt(f*f+g*g+_*_))?(f*=z=1/z,g*=z,_*=z):(f=0,g=0,_=0),e[0]=i,e[1]=f,e[2]=C,e[3]=0,e[4]=o,e[5]=g,e[6]=S,e[7]=0,e[8]=d,e[9]=_,e[10]=k,e[11]=0,e[12]=-(i*te+o*pe+d*Me),e[13]=-(f*te+g*pe+_*Me),e[14]=-(C*te+S*pe+k*Me),e[15]=1,e)},Ji.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))};const An=Ji;var wr={create:function(){var e=new Ko(3);return e[0]=0,e[1]=0,e[2]=0,e},clone:function(e){var n=new Ko(3);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n},fromValues:function(e,n,t){var r=new Ko(3);return r[0]=e,r[1]=n,r[2]=t,r},copy:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e},set:function(e,n,t,r){return e[0]=n,e[1]=t,e[2]=r,e},add:function(e,n,t){return e[0]=n[0]+t[0],e[1]=n[1]+t[1],e[2]=n[2]+t[2],e},subtract:function(e,n,t){return e[0]=n[0]-t[0],e[1]=n[1]-t[1],e[2]=n[2]-t[2],e}};wr.sub=wr.subtract,wr.multiply=function(e,n,t){return e[0]=n[0]*t[0],e[1]=n[1]*t[1],e[2]=n[2]*t[2],e},wr.mul=wr.multiply,wr.divide=function(e,n,t){return e[0]=n[0]/t[0],e[1]=n[1]/t[1],e[2]=n[2]/t[2],e},wr.div=wr.divide,wr.min=function(e,n,t){return e[0]=Math.min(n[0],t[0]),e[1]=Math.min(n[1],t[1]),e[2]=Math.min(n[2],t[2]),e},wr.max=function(e,n,t){return e[0]=Math.max(n[0],t[0]),e[1]=Math.max(n[1],t[1]),e[2]=Math.max(n[2],t[2]),e},wr.scale=function(e,n,t){return e[0]=n[0]*t,e[1]=n[1]*t,e[2]=n[2]*t,e},wr.scaleAndAdd=function(e,n,t,r){return e[0]=n[0]+t[0]*r,e[1]=n[1]+t[1]*r,e[2]=n[2]+t[2]*r,e},wr.distance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1],i=n[2]-e[2];return Math.sqrt(t*t+r*r+i*i)},wr.dist=wr.distance,wr.squaredDistance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1],i=n[2]-e[2];return t*t+r*r+i*i},wr.sqrDist=wr.squaredDistance,wr.length=function(e){var n=e[0],t=e[1],r=e[2];return Math.sqrt(n*n+t*t+r*r)},wr.len=wr.length,wr.squaredLength=function(e){var n=e[0],t=e[1],r=e[2];return n*n+t*t+r*r},wr.sqrLen=wr.squaredLength,wr.negate=function(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e},wr.inverse=function(e,n){return e[0]=1/n[0],e[1]=1/n[1],e[2]=1/n[2],e},wr.normalize=function(e,n){var t=n[0],r=n[1],i=n[2],o=t*t+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=n[0]*o,e[1]=n[1]*o,e[2]=n[2]*o),e},wr.dot=function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]},wr.cross=function(e,n,t){var r=n[0],i=n[1],o=n[2],d=t[0],f=t[1],g=t[2];return e[0]=i*g-o*f,e[1]=o*d-r*g,e[2]=r*f-i*d,e},wr.lerp=function(e,n,t,r){var i=n[0],o=n[1],d=n[2];return e[0]=i+r*(t[0]-i),e[1]=o+r*(t[1]-o),e[2]=d+r*(t[2]-d),e},wr.random=function(e,n){n=n||1;var t=2*Py()*Math.PI,r=2*Py()-1,i=Math.sqrt(1-r*r)*n;return e[0]=Math.cos(t)*i,e[1]=Math.sin(t)*i,e[2]=r*n,e},wr.transformMat4=function(e,n,t){var r=n[0],i=n[1],o=n[2],d=t[3]*r+t[7]*i+t[11]*o+t[15];return e[0]=(t[0]*r+t[4]*i+t[8]*o+t[12])/(d=d||1),e[1]=(t[1]*r+t[5]*i+t[9]*o+t[13])/d,e[2]=(t[2]*r+t[6]*i+t[10]*o+t[14])/d,e},wr.transformMat3=function(e,n,t){var r=n[0],i=n[1],o=n[2];return e[0]=r*t[0]+i*t[3]+o*t[6],e[1]=r*t[1]+i*t[4]+o*t[7],e[2]=r*t[2]+i*t[5]+o*t[8],e},wr.transformQuat=function(e,n,t){var r=n[0],i=n[1],o=n[2],d=t[0],f=t[1],g=t[2],_=t[3],C=_*r+f*o-g*i,S=_*i+g*r-d*o,k=_*o+d*i-f*r,z=-d*r-f*i-g*o;return e[0]=C*_+z*-d+S*-g-k*-f,e[1]=S*_+z*-f+k*-d-C*-g,e[2]=k*_+z*-g+C*-f-S*-d,e},wr.rotateX=function(e,n,t,r){var i=[],o=[];return i[0]=n[0]-t[0],i[1]=n[1]-t[1],i[2]=n[2]-t[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=o[0]+t[0],e[1]=o[1]+t[1],e[2]=o[2]+t[2],e},wr.rotateY=function(e,n,t,r){var i=[],o=[];return i[0]=n[0]-t[0],i[1]=n[1]-t[1],i[2]=n[2]-t[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=o[0]+t[0],e[1]=o[1]+t[1],e[2]=o[2]+t[2],e},wr.rotateZ=function(e,n,t,r){var i=[],o=[];return i[0]=n[0]-t[0],i[1]=n[1]-t[1],i[2]=n[2]-t[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],e[0]=o[0]+t[0],e[1]=o[1]+t[1],e[2]=o[2]+t[2],e},wr.forEach=function(){var e=wr.create();return function(n,t,r,i,o,d){var f,g;for(t||(t=3),r||(r=0),g=i?Math.min(i*t+r,n.length):n.length,f=r;f<g;f+=t)e[0]=n[f],e[1]=n[f+1],e[2]=n[f+2],o(e,e,d),n[f]=e[0],n[f+1]=e[1],n[f+2]=e[2];return n}}(),wr.angle=function(e,n){var t=wr.fromValues(e[0],e[1],e[2]),r=wr.fromValues(n[0],n[1],n[2]);wr.normalize(t,t),wr.normalize(r,r);var i=wr.dot(t,r);return i>1?0:Math.acos(i)};const Et=wr;Un.import(cW);var ha=An.create,uW={};function dW(e){return e.material}function Tte(e,n,t){return n.uniforms[t].value}function Ete(e,n,t,r){return t!==r}function Ate(e){return!0}function hW(){}var fW={float:5126,byte:5120,ubyte:5121,short:5122,ushort:5123};function Ite(e,n,t){this.availableAttributes=e,this.availableAttributeSymbols=n,this.indicesBuffer=t,this.vao=null}function Pte(e){var n,t;this.bind=function(r){n||((n=oo.createCanvas()).width=n.height=1,n.getContext("2d"));var i=r.gl,o=!t;o&&(t=i.createTexture()),i.bindTexture(i.TEXTURE_2D,t),o&&i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n)},this.unbind=function(r){r.gl.bindTexture(r.gl.TEXTURE_2D,null)},this.isRenderable=function(){return!0}}var wf=Gs.extend(function(){return{canvas:null,_width:100,_height:100,devicePixelRatio:typeof window<"u"&&window.devicePixelRatio||1,clearColor:[0,0,0,0],clearBit:17664,alpha:!0,depth:!0,stencil:!1,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!1,throwError:!0,gl:null,viewport:{},maxJointNumber:20,__currentFrameBuffer:null,_viewportStack:[],_clearStack:[],_sceneRendering:null}},function(){this.canvas||(this.canvas=oo.createCanvas());var e=this.canvas;try{var n={alpha:this.alpha,depth:this.depth,stencil:this.stencil,antialias:this.antialias,premultipliedAlpha:this.premultipliedAlpha,preserveDrawingBuffer:this.preserveDrawingBuffer};if(this.gl=e.getContext("webgl",n)||e.getContext("experimental-webgl",n),!this.gl)throw new Error;this._glinfo=new ate(this.gl),this.gl.targetRenderer&&console.error("Already created a renderer"),this.gl.targetRenderer=this,this.resize()}catch(t){throw"Error creating WebGL Context "+t}this._programMgr=new bte(this),this._placeholderTexture=new Pte(this)},{resize:function(e,n){var t=this.canvas,r=this.devicePixelRatio;null!=e?(t.style&&(t.style.width=e+"px",t.style.height=n+"px"),t.width=e*r,t.height=n*r,this._width=e,this._height=n):(this._width=t.width/r,this._height=t.height/r),this.setViewport(0,0,this._width,this._height)},getWidth:function(){return this._width},getHeight:function(){return this._height},getViewportAspect:function(){var e=this.viewport;return e.width/e.height},setDevicePixelRatio:function(e){this.devicePixelRatio=e,this.resize(this._width,this._height)},getDevicePixelRatio:function(){return this.devicePixelRatio},getGLExtension:function(e){return this._glinfo.getExtension(e)},getGLParameter:function(e){return this._glinfo.getParameter(e)},setViewport:function(e,n,t,r,i){if("object"==typeof e){var o=e;e=o.x,n=o.y,t=o.width,r=o.height,i=o.devicePixelRatio}this.gl.viewport(e*(i=i||this.devicePixelRatio),n*i,t*i,r*i),this.viewport={x:e,y:n,width:t,height:r,devicePixelRatio:i}},saveViewport:function(){this._viewportStack.push(this.viewport)},restoreViewport:function(){this._viewportStack.length>0&&this.setViewport(this._viewportStack.pop())},saveClear:function(){this._clearStack.push({clearBit:this.clearBit,clearColor:this.clearColor})},restoreClear:function(){if(this._clearStack.length>0){var e=this._clearStack.pop();this.clearColor=e.clearColor,this.clearBit=e.clearBit}},bindSceneRendering:function(e){this._sceneRendering=e},render:function(e,n,t,r){var i=this.gl,o=this.clearColor;if(this.clearBit){i.colorMask(!0,!0,!0,!0),i.depthMask(!0);var d=this.viewport,f=!1,g=d.devicePixelRatio;(d.width!==this._width||d.height!==this._height||g&&g!==this.devicePixelRatio||d.x||d.y)&&(f=!0,i.enable(i.SCISSOR_TEST),i.scissor(d.x*g,d.y*g,d.width*g,d.height*g)),i.clearColor(o[0],o[1],o[2],o[3]),i.clear(this.clearBit),f&&i.disable(i.SCISSOR_TEST)}if(t||e.update(!1),e.updateLights(),n=n||e.getMainCamera()){n.update();var _=e.updateRenderList(n,!0);this._sceneRendering=e;var C=_.opaque,S=_.transparent,k=e.material;e.trigger("beforerender",this,e,n,_),r?(this.renderPreZ(C,e,n),i.depthFunc(i.LEQUAL)):i.depthFunc(i.LESS);for(var z=ha(),te=Et.create(),pe=0;pe<S.length;pe++){var Me=S[pe];An.multiplyAffine(z,n.viewMatrix.array,Me.worldTransform.array),Et.transformMat4(te,Me.position.array,z),Me.__depth=te[2]}this.renderPass(C,n,{getMaterial:function(Re){return k||Re.material},sortCompare:this.opaqueSortCompare}),this.renderPass(S,n,{getMaterial:function(Re){return k||Re.material},sortCompare:this.transparentSortCompare}),e.trigger("afterrender",this,e,n,_),this._sceneRendering=null}else console.error("Can't find camera in the scene.")},getProgram:function(e,n,t){return this._programMgr.getProgram(e,n=n||e.material,t)},validateProgram:function(e){if(e.__error){var n=e.__error;if(uW[e.__uid__])return;if(uW[e.__uid__]=!0,this.throwError)throw new Error(n);this.trigger("error",n)}},updatePrograms:function(e,n,t){var r=t&&t.getMaterial||dW;n=n||null;for(var i=0;i<e.length;i++){var o=e[i],d=r.call(this,o);if(i>0){var f=e[i-1];if((o.joints?o.joints.length:0)===(f.joints?f.joints.length:0)&&o.material===f.material&&o.lightGroup===f.lightGroup){o.__program=f.__program;continue}}var C=this._programMgr.getProgram(o,d,n);this.validateProgram(C),o.__program=C}},renderPass:function(e,n,t){this.trigger("beforerenderpass",this,e,n,t),(t=t||{}).getMaterial=t.getMaterial||dW,t.getUniform=t.getUniform||Tte,t.isMaterialChanged=t.isMaterialChanged||Ete,t.beforeRender=t.beforeRender||hW,t.afterRender=t.afterRender||hW;var r=t.ifRender||Ate;this.updatePrograms(e,this._sceneRendering,t),t.sortCompare&&e.sort(t.sortCompare);var i=this.viewport,o=i.devicePixelRatio,d=[i.x*o,i.y*o,i.width*o,i.height*o],f=this.devicePixelRatio,g=this.__currentFrameBuffer?[this.__currentFrameBuffer.getTextureWidth(),this.__currentFrameBuffer.getTextureHeight()]:[this._width*f,this._height*f],_=[d[2],d[3]],C=Date.now();n?(An.copy(fa.VIEW,n.viewMatrix.array),An.copy(fa.PROJECTION,n.projectionMatrix.array),An.copy(fa.VIEWINVERSE,n.worldTransform.array)):(An.identity(fa.VIEW),An.identity(fa.PROJECTION),An.identity(fa.VIEWINVERSE)),An.multiply(fa.VIEWPROJECTION,fa.PROJECTION,fa.VIEW),An.invert(fa.PROJECTIONINVERSE,fa.PROJECTION),An.invert(fa.VIEWPROJECTIONINVERSE,fa.VIEWPROJECTION);for(var z,te,pe,Me,Re,Fe,Oe,Be,it,at,Ct,mt,S=this.gl,k=this._sceneRendering,nn=0;nn<e.length;nn++){var mn,$t=e[nn],pn=null!=$t.worldTransform;if(r($t)){pn&&(mn=$t.isSkinnedMesh&&$t.isSkinnedMesh()?$t.offsetMatrix?$t.offsetMatrix.array:fa.IDENTITY:$t.worldTransform.array);var sn=$t.geometry,wn=t.getMaterial.call(this,$t),Gt=$t.__program,ln=wn.shader,Xt=sn.__uid__+"-"+Gt.__uid__,Xn=Xt!==at;at=Xt,pn&&(An.copy(fa.WORLD,mn),An.multiply(fa.WORLDVIEWPROJECTION,fa.VIEWPROJECTION,mn),An.multiplyAffine(fa.WORLDVIEW,fa.VIEW,mn),(ln.matrixSemantics.WORLDINVERSE||ln.matrixSemantics.WORLDINVERSETRANSPOSE)&&An.invert(fa.WORLDINVERSE,mn),(ln.matrixSemantics.WORLDVIEWINVERSE||ln.matrixSemantics.WORLDVIEWINVERSETRANSPOSE)&&An.invert(fa.WORLDVIEWINVERSE,fa.WORLDVIEW),(ln.matrixSemantics.WORLDVIEWPROJECTIONINVERSE||ln.matrixSemantics.WORLDVIEWPROJECTIONINVERSETRANSPOSE)&&An.invert(fa.WORLDVIEWPROJECTIONINVERSE,fa.WORLDVIEWPROJECTION)),$t.beforeRender&&$t.beforeRender(this),t.beforeRender.call(this,$t,wn,z);var In=Gt!==te;In?(Gt.bind(this),Gt.setUniformOfSemantic(S,"VIEWPORT",d),Gt.setUniformOfSemantic(S,"WINDOW_SIZE",g),n&&(Gt.setUniformOfSemantic(S,"NEAR",n.near),Gt.setUniformOfSemantic(S,"FAR",n.far)),Gt.setUniformOfSemantic(S,"DEVICEPIXELRATIO",o),Gt.setUniformOfSemantic(S,"TIME",C),Gt.setUniformOfSemantic(S,"VIEWPORT_SIZE",_),k&&k.setLightUniforms(Gt,$t.lightGroup,this)):Gt=te,(In||t.isMaterialChanged($t,pe,wn,z))&&(wn.depthTest!==Me&&(wn.depthTest?S.enable(S.DEPTH_TEST):S.disable(S.DEPTH_TEST),Me=wn.depthTest),wn.depthMask!==Re&&(S.depthMask(wn.depthMask),Re=wn.depthMask),wn.transparent!==it&&(wn.transparent?S.enable(S.BLEND):S.disable(S.BLEND),it=wn.transparent),wn.transparent&&(wn.blend?wn.blend(S):(S.blendEquationSeparate(S.FUNC_ADD,S.FUNC_ADD),S.blendFuncSeparate(S.SRC_ALPHA,S.ONE_MINUS_SRC_ALPHA,S.ONE,S.ONE_MINUS_SRC_ALPHA))),mt=this._bindMaterial($t,wn,Gt,pe||null,z||null,te||null,t.getUniform),z=wn);var ai=ln.matrixSemanticKeys;if(pn)for(var Nr=0;Nr<ai.length;Nr++){var _i=ai[Nr],Mr=ln.matrixSemantics[_i],Jr=fa[_i];Mr.isTranspose&&An.transpose(Jr,fa[Mr.semanticNoTranspose]),Gt.setUniform(S,Mr.type,Mr.symbol,Jr)}$t.cullFace!==Oe&&S.cullFace(Oe=$t.cullFace),$t.frontFace!==Be&&S.frontFace(Be=$t.frontFace),$t.culling!==Fe&&((Fe=$t.culling)?S.enable(S.CULL_FACE):S.disable(S.CULL_FACE)),this._updateSkeleton($t,Gt,mt),Xn&&(Ct=this._bindVAO(null,ln,sn,Gt)),this._renderObject($t,Ct,Gt),t.afterRender(this,$t),$t.afterRender&&$t.afterRender(this),te=Gt,pe=$t}}this.trigger("afterrenderpass",this,e,n,t)},getMaxJointNumber:function(){return this.maxJointNumber},_updateSkeleton:function(e,n,t){var r=this.gl,i=e.skeleton;if(i)if(i.update(),e.joints.length>this.getMaxJointNumber()){var o=i.getSubSkinMatricesTexture(e.__uid__,e.joints);n.useTextureSlot(this,o,t),n.setUniform(r,"1i","skinMatricesTexture",t),n.setUniform(r,"1f","skinMatricesTextureSize",o.width)}else{var d=i.getSubSkinMatrices(e.__uid__,e.joints);n.setUniformOfSemantic(r,"SKIN_MATRIX",d)}},_renderObject:function(e,n,t){var r=this.gl,i=e.geometry,o=e.mode;null==o&&(o=4);var d=null,f=e.isInstancedMesh&&e.isInstancedMesh();if(!f||(d=this.getGLExtension("ANGLE_instanced_arrays"))){var g;if(f&&(g=this._bindInstancedAttributes(e,t,d)),n.indicesBuffer){var S=this.getGLExtension("OES_element_index_uint")&&i.indices instanceof Uint32Array?r.UNSIGNED_INT:r.UNSIGNED_SHORT;f?d.drawElementsInstancedANGLE(o,n.indicesBuffer.count,S,0,e.getInstanceCount()):r.drawElements(o,n.indicesBuffer.count,S,0)}else f?d.drawArraysInstancedANGLE(o,0,i.vertexCount,e.getInstanceCount()):r.drawArrays(o,0,i.vertexCount);if(f)for(var k=0;k<g.length;k++)r.disableVertexAttribArray(g[k])}else console.warn("Device not support ANGLE_instanced_arrays extension")},_bindInstancedAttributes:function(e,n,t){for(var r=this.gl,i=e.getInstancedAttributesBuffers(this),o=[],d=0;d<i.length;d++){var f=i[d],g=n.getAttribLocation(r,f.symbol);if(!(g<0)){var _=fW[f.type]||r.FLOAT;r.enableVertexAttribArray(g),r.bindBuffer(r.ARRAY_BUFFER,f.buffer),r.vertexAttribPointer(g,f.size,_,!1,0,0),t.vertexAttribDivisorANGLE(g,f.divisor),o.push(g)}}return o},_bindMaterial:function(e,n,t,r,i,o,d){for(var f=this.gl,g=o===t,_=t.currentTextureSlot(),C=n.getEnabledUniforms(),S=n.getTextureUniforms(),k=this._placeholderTexture,z=0;z<S.length;z++){var pe=d(e,n,te=S[z]);if("t"===(Me=n.uniforms[te].type)&&pe)pe.__slot=-1;else if("tv"===Me)for(var Re=0;Re<pe.length;Re++)pe[Re]&&(pe[Re].__slot=-1)}for(k.__slot=-1,z=0;z<C.length;z++){var te,Me,Fe=n.uniforms[te=C[z]],Oe=(pe=d(e,n,te),"t"===(Me=Fe.type));if(Oe&&(!pe||!pe.isRenderable())&&(pe=k),i&&g){var Be=d(r,i,te);if(Oe&&(!Be||!Be.isRenderable())&&(Be=k),Be===pe){if(Oe)t.takeCurrentTextureSlot(this,null);else if("tv"===Me&&pe)for(Re=0;Re<pe.length;Re++)t.takeCurrentTextureSlot(this,null);continue}}if(null!=pe)if(Oe)if(pe.__slot<0){var it=t.currentTextureSlot();t.setUniform(f,"1i",te,it)&&(t.takeCurrentTextureSlot(this,pe),pe.__slot=it)}else t.setUniform(f,"1i",te,pe.__slot);else if(Array.isArray(pe)){if(0===pe.length)continue;if("tv"===Me){if(!t.hasUniform(te))continue;var Ct=[];for(Re=0;Re<pe.length;Re++){var mt=pe[Re];mt.__slot<0?(it=t.currentTextureSlot(),Ct.push(it),t.takeCurrentTextureSlot(this,mt),mt.__slot=it):Ct.push(mt.__slot)}t.setUniform(f,"1iv",te,Ct)}else t.setUniform(f,Fe.type,te,pe)}else t.setUniform(f,Fe.type,te,pe)}var Ft=t.currentTextureSlot();return t.resetTextureSlot(_),Ft},_bindVAO:function(e,n,t,r){var i=!t.dynamic,o=this.gl,d=this.__uid__+"-"+r.__uid__,f=t.__vaoCache[d];if(!f){var g=t.getBufferChunks(this);if(!g||!g.length)return;for(var _=g[0],C=_.attributeBuffers,Be=_.indicesBuffer,Oe=[],S=[],k=0;k<C.length;k++){var Me,pe=(z=C[k]).semantic;if(pe){var Re=n.attributeSemantics[pe];Me=Re&&Re.symbol}else Me=z.name;Me&&r.attributes[Me]&&(Oe.push(z),S.push(Me))}f=new Ite(Oe,S,Be),i&&(t.__vaoCache[d]=f)}var Fe=!0;if(e&&i&&(null==f.vao?f.vao=e.createVertexArrayOES():Fe=!1,e.bindVertexArrayOES(f.vao)),Oe=f.availableAttributes,Be=f.indicesBuffer,Fe){var it=r.enableAttributes(this,f.availableAttributeSymbols,e&&i&&f);for(k=0;k<Oe.length;k++){var at=it[k];if(-1!==at){var z,mt=(z=Oe[k]).size,Ft=fW[z.type]||o.FLOAT;o.bindBuffer(o.ARRAY_BUFFER,z.buffer),o.vertexAttribPointer(at,mt,Ft,!1,0,0)}}t.isUseIndices()&&o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,Be.buffer)}return f},renderPreZ:function(e,n,t){var r=this.gl,i=this._prezMaterial||new Pc({shader:new Un(Un.source("clay.prez.vertex"),Un.source("clay.prez.fragment"))});this._prezMaterial=i,r.colorMask(!1,!1,!1,!1),r.depthMask(!0),this.renderPass(e,t,{ifRender:function(o){return!o.ignorePreZ},isMaterialChanged:function(o,d){var f=o.material,g=d.material;return f.get("diffuseMap")!==g.get("diffuseMap")||(f.get("alphaCutoff")||0)!==(g.get("alphaCutoff")||0)},getUniform:function(o,d,f){return"alphaMap"===f?o.material.get("diffuseMap"):"alphaCutoff"===f?o.material.isDefined("fragment","ALPHA_TEST")&&o.material.get("diffuseMap")&&o.material.get("alphaCutoff")||0:"uvRepeat"===f?o.material.get("uvRepeat"):"uvOffset"===f?o.material.get("uvOffset"):d.get(f)},getMaterial:function(){return i},sort:this.opaqueSortCompare}),r.colorMask(!0,!0,!0,!0),r.depthMask(!0)},disposeScene:function(e){this.disposeNode(e,!0,!0),e.dispose()},disposeNode:function(e,n,t){e.getParent()&&e.getParent().remove(e);var r={};e.traverse(function(i){var o=i.material;if(i.geometry&&n&&i.geometry.dispose(this),t&&o&&!r[o.__uid__]){for(var d=o.getTextureUniforms(),f=0;f<d.length;f++){var g=d[f],_=o.uniforms[g].value,C=o.uniforms[g].type;if(_)if("t"===C)_.dispose&&_.dispose(this);else if("tv"===C)for(var S=0;S<_.length;S++)_[S]&&_[S].dispose&&_[S].dispose(this)}r[o.__uid__]=!0}i.dispose&&i.dispose(this)},this)},disposeGeometry:function(e){e.dispose(this)},disposeTexture:function(e){e.dispose(this)},disposeFrameBuffer:function(e){e.dispose(this)},dispose:function(){},screenToNDC:function(e,n,t){t||(t=new jl),n=this._height-n;var r=this.viewport,i=t.array;return i[0]=(e-r.x)/r.width,i[0]=2*i[0]-1,i[1]=(n-r.y)/r.height,i[1]=2*i[1]-1,t}});wf.opaqueSortCompare=wf.prototype.opaqueSortCompare=function(e,n){return e.renderOrder===n.renderOrder?e.__program===n.__program?e.material===n.material?e.geometry.__uid__-n.geometry.__uid__:e.material.__uid__-n.material.__uid__:e.__program&&n.__program?e.__program.__uid__-n.__program.__uid__:0:e.renderOrder-n.renderOrder},wf.transparentSortCompare=wf.prototype.transparentSortCompare=function(e,n){return e.renderOrder===n.renderOrder?e.__depth===n.__depth?e.__program===n.__program?e.material===n.material?e.geometry.__uid__-n.geometry.__uid__:e.material.__uid__-n.material.__uid__:e.__program&&n.__program?e.__program.__uid__-n.__program.__uid__:0:e.__depth-n.__depth:e.renderOrder-n.renderOrder};var fa={IDENTITY:ha(),WORLD:ha(),VIEW:ha(),PROJECTION:ha(),WORLDVIEW:ha(),VIEWPROJECTION:ha(),WORLDVIEWPROJECTION:ha(),WORLDINVERSE:ha(),VIEWINVERSE:ha(),PROJECTIONINVERSE:ha(),WORLDVIEWINVERSE:ha(),VIEWPROJECTIONINVERSE:ha(),WORLDVIEWPROJECTIONINVERSE:ha(),WORLDTRANSPOSE:ha(),VIEWTRANSPOSE:ha(),PROJECTIONTRANSPOSE:ha(),WORLDVIEWTRANSPOSE:ha(),VIEWPROJECTIONTRANSPOSE:ha(),WORLDVIEWPROJECTIONTRANSPOSE:ha(),WORLDINVERSETRANSPOSE:ha(),VIEWINVERSETRANSPOSE:ha(),PROJECTIONINVERSETRANSPOSE:ha(),WORLDVIEWINVERSETRANSPOSE:ha(),VIEWPROJECTIONINVERSETRANSPOSE:ha(),WORLDVIEWPROJECTIONINVERSETRANSPOSE:ha()};wf.COLOR_BUFFER_BIT=16384,wf.DEPTH_BUFFER_BIT=256,wf.STENCIL_BUFFER_BIT=1024;const XC=wf;var Sr=function(e,n,t){this.array=Et.fromValues(e=e||0,n=n||0,t=t||0),this._dirty=!0};Sr.prototype={constructor:Sr,add:function(e){return Et.add(this.array,this.array,e.array),this._dirty=!0,this},set:function(e,n,t){return this.array[0]=e,this.array[1]=n,this.array[2]=t,this._dirty=!0,this},setArray:function(e){return this.array[0]=e[0],this.array[1]=e[1],this.array[2]=e[2],this._dirty=!0,this},clone:function(){return new Sr(this.x,this.y,this.z)},copy:function(e){return Et.copy(this.array,e.array),this._dirty=!0,this},cross:function(e,n){return Et.cross(this.array,e.array,n.array),this._dirty=!0,this},dist:function(e){return Et.dist(this.array,e.array)},distance:function(e){return Et.distance(this.array,e.array)},div:function(e){return Et.div(this.array,this.array,e.array),this._dirty=!0,this},divide:function(e){return Et.divide(this.array,this.array,e.array),this._dirty=!0,this},dot:function(e){return Et.dot(this.array,e.array)},len:function(){return Et.len(this.array)},length:function(){return Et.length(this.array)},lerp:function(e,n,t){return Et.lerp(this.array,e.array,n.array,t),this._dirty=!0,this},min:function(e){return Et.min(this.array,this.array,e.array),this._dirty=!0,this},max:function(e){return Et.max(this.array,this.array,e.array),this._dirty=!0,this},mul:function(e){return Et.mul(this.array,this.array,e.array),this._dirty=!0,this},multiply:function(e){return Et.multiply(this.array,this.array,e.array),this._dirty=!0,this},negate:function(){return Et.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return Et.normalize(this.array,this.array),this._dirty=!0,this},random:function(e){return Et.random(this.array,e),this._dirty=!0,this},scale:function(e){return Et.scale(this.array,this.array,e),this._dirty=!0,this},scaleAndAdd:function(e,n){return Et.scaleAndAdd(this.array,this.array,e.array,n),this._dirty=!0,this},sqrDist:function(e){return Et.sqrDist(this.array,e.array)},squaredDistance:function(e){return Et.squaredDistance(this.array,e.array)},sqrLen:function(){return Et.sqrLen(this.array)},squaredLength:function(){return Et.squaredLength(this.array)},sub:function(e){return Et.sub(this.array,this.array,e.array),this._dirty=!0,this},subtract:function(e){return Et.subtract(this.array,this.array,e.array),this._dirty=!0,this},transformMat3:function(e){return Et.transformMat3(this.array,this.array,e.array),this._dirty=!0,this},transformMat4:function(e){return Et.transformMat4(this.array,this.array,e.array),this._dirty=!0,this},transformQuat:function(e){return Et.transformQuat(this.array,this.array,e.array),this._dirty=!0,this},applyProjection:function(e){var n=this.array;if(0===(e=e.array)[15]){var t=-1/n[2];n[0]=e[0]*n[0]*t,n[1]=e[5]*n[1]*t,n[2]=(e[10]*n[2]+e[14])*t}else n[0]=e[0]*n[0]+e[12],n[1]=e[5]*n[1]+e[13],n[2]=e[10]*n[2]+e[14];return this._dirty=!0,this},eulerFromQuat:function(e,n){Sr.eulerFromQuat(this,e,n)},eulerFromMat3:function(e,n){Sr.eulerFromMat3(this,e,n)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var vI=Object.defineProperty;if(vI){var s3=Sr.prototype;vI(s3,"x",{get:function(){return this.array[0]},set:function(e){this.array[0]=e,this._dirty=!0}}),vI(s3,"y",{get:function(){return this.array[1]},set:function(e){this.array[1]=e,this._dirty=!0}}),vI(s3,"z",{get:function(){return this.array[2]},set:function(e){this.array[2]=e,this._dirty=!0}})}function Rc(e,n,t){return e<n?n:e>t?t:e}Sr.add=function(e,n,t){return Et.add(e.array,n.array,t.array),e._dirty=!0,e},Sr.set=function(e,n,t,r){Et.set(e.array,n,t,r),e._dirty=!0},Sr.copy=function(e,n){return Et.copy(e.array,n.array),e._dirty=!0,e},Sr.cross=function(e,n,t){return Et.cross(e.array,n.array,t.array),e._dirty=!0,e},Sr.distance=Sr.dist=function(e,n){return Et.distance(e.array,n.array)},Sr.divide=Sr.div=function(e,n,t){return Et.divide(e.array,n.array,t.array),e._dirty=!0,e},Sr.dot=function(e,n){return Et.dot(e.array,n.array)},Sr.len=function(e){return Et.length(e.array)},Sr.lerp=function(e,n,t,r){return Et.lerp(e.array,n.array,t.array,r),e._dirty=!0,e},Sr.min=function(e,n,t){return Et.min(e.array,n.array,t.array),e._dirty=!0,e},Sr.max=function(e,n,t){return Et.max(e.array,n.array,t.array),e._dirty=!0,e},Sr.multiply=Sr.mul=function(e,n,t){return Et.multiply(e.array,n.array,t.array),e._dirty=!0,e},Sr.negate=function(e,n){return Et.negate(e.array,n.array),e._dirty=!0,e},Sr.normalize=function(e,n){return Et.normalize(e.array,n.array),e._dirty=!0,e},Sr.random=function(e,n){return Et.random(e.array,n),e._dirty=!0,e},Sr.scale=function(e,n,t){return Et.scale(e.array,n.array,t),e._dirty=!0,e},Sr.scaleAndAdd=function(e,n,t,r){return Et.scaleAndAdd(e.array,n.array,t.array,r),e._dirty=!0,e},Sr.squaredDistance=Sr.sqrDist=function(e,n){return Et.sqrDist(e.array,n.array)},Sr.squaredLength=Sr.sqrLen=function(e){return Et.sqrLen(e.array)},Sr.subtract=Sr.sub=function(e,n,t){return Et.subtract(e.array,n.array,t.array),e._dirty=!0,e},Sr.transformMat3=function(e,n,t){return Et.transformMat3(e.array,n.array,t.array),e._dirty=!0,e},Sr.transformMat4=function(e,n,t){return Et.transformMat4(e.array,n.array,t.array),e._dirty=!0,e},Sr.transformQuat=function(e,n,t){return Et.transformQuat(e.array,n.array,t.array),e._dirty=!0,e};var ji=Math.atan2,Lc=Math.asin,Ly=Math.abs;Sr.eulerFromQuat=function(e,n,k){e._dirty=!0;var r=e.array,i=(n=n.array)[0],o=n[1],d=n[2],f=n[3],g=i*i,_=o*o,C=d*d,S=f*f;switch(k=(k||"XYZ").toUpperCase()){case"XYZ":r[0]=ji(2*(i*f-o*d),S-g-_+C),r[1]=Lc(Rc(2*(i*d+o*f),-1,1)),r[2]=ji(2*(d*f-i*o),S+g-_-C);break;case"YXZ":r[0]=Lc(Rc(2*(i*f-o*d),-1,1)),r[1]=ji(2*(i*d+o*f),S-g-_+C),r[2]=ji(2*(i*o+d*f),S-g+_-C);break;case"ZXY":r[0]=Lc(Rc(2*(i*f+o*d),-1,1)),r[1]=ji(2*(o*f-d*i),S-g-_+C),r[2]=ji(2*(d*f-i*o),S-g+_-C);break;case"ZYX":r[0]=ji(2*(i*f+d*o),S-g-_+C),r[1]=Lc(Rc(2*(o*f-i*d),-1,1)),r[2]=ji(2*(i*o+d*f),S+g-_-C);break;case"YZX":r[0]=ji(2*(i*f-d*o),S-g+_-C),r[1]=ji(2*(o*f-i*d),S+g-_-C),r[2]=Lc(Rc(2*(i*o+d*f),-1,1));break;case"XZY":r[0]=ji(2*(i*f+o*d),S-g+_-C),r[1]=ji(2*(i*d+o*f),S+g-_-C),r[2]=Lc(Rc(2*(d*f-i*o),-1,1));break;default:console.warn("Unkown order: "+k)}return e},Sr.eulerFromMat3=function(e,n,te){var r=n.array,i=r[0],o=r[3],d=r[6],f=r[1],g=r[4],_=r[7],C=r[2],S=r[5],k=r[8],z=e.array;switch(te=(te||"XYZ").toUpperCase()){case"XYZ":z[1]=Lc(Rc(d,-1,1)),Ly(d)<.99999?(z[0]=ji(-_,k),z[2]=ji(-o,i)):(z[0]=ji(S,g),z[2]=0);break;case"YXZ":z[0]=Lc(-Rc(_,-1,1)),Ly(_)<.99999?(z[1]=ji(d,k),z[2]=ji(f,g)):(z[1]=ji(-C,i),z[2]=0);break;case"ZXY":z[0]=Lc(Rc(S,-1,1)),Ly(S)<.99999?(z[1]=ji(-C,k),z[2]=ji(-o,g)):(z[1]=0,z[2]=ji(f,i));break;case"ZYX":z[1]=Lc(-Rc(C,-1,1)),Ly(C)<.99999?(z[0]=ji(S,k),z[2]=ji(f,i)):(z[0]=0,z[2]=ji(-o,g));break;case"YZX":z[2]=Lc(Rc(f,-1,1)),Ly(f)<.99999?(z[0]=ji(-_,g),z[1]=ji(-C,i)):(z[0]=0,z[1]=ji(d,k));break;case"XZY":z[2]=Lc(-Rc(o,-1,1)),Ly(o)<.99999?(z[0]=ji(S,g),z[1]=ji(d,i)):(z[0]=ji(-_,k),z[1]=0);break;default:console.warn("Unkown order: "+te)}return e._dirty=!0,e},Object.defineProperties(Sr,{POSITIVE_X:{get:function(){return new Sr(1,0,0)}},NEGATIVE_X:{get:function(){return new Sr(-1,0,0)}},POSITIVE_Y:{get:function(){return new Sr(0,1,0)}},NEGATIVE_Y:{get:function(){return new Sr(0,-1,0)}},POSITIVE_Z:{get:function(){return new Sr(0,0,1)}},NEGATIVE_Z:{get:function(){return new Sr(0,0,-1)}},UP:{get:function(){return new Sr(0,1,0)}},ZERO:{get:function(){return new Sr}}});const Ln=Sr;var l3=1e-5,mI=function(e,n){this.origin=e||new Ln,this.direction=n||new Ln};mI.prototype={constructor:mI,intersectPlane:function(e,n){var t=e.normal.array,r=e.distance,i=this.origin.array,o=this.direction.array,d=Et.dot(t,o);if(0===d)return null;n||(n=new Ln);var f=(Et.dot(t,i)-r)/d;return Et.scaleAndAdd(n.array,i,o,-f),n._dirty=!0,n},mirrorAgainstPlane:function(e){var n=Et.dot(e.normal.array,this.direction.array);Et.scaleAndAdd(this.direction.array,this.direction.array,e.normal.array,2*-n),this.direction._dirty=!0},distanceToPoint:function(){var e=Et.create();return function(n){Et.sub(e,n,this.origin.array);var t=Et.dot(e,this.direction.array);if(t<0)return Et.distance(this.origin.array,n);var r=Et.lenSquared(e);return Math.sqrt(r-t*t)}}(),intersectSphere:function(){var e=Et.create();return function(n,t,r){var i=this.origin.array,o=this.direction.array;Et.sub(e,n=n.array,i);var d=Et.dot(e,o),g=Et.squaredLength(e)-d*d,_=t*t;if(!(g>_)){var C=Math.sqrt(_-g),S=d-C,k=d+C;return r||(r=new Ln),S<0?k<0?null:(Et.scaleAndAdd(r.array,i,o,k),r):(Et.scaleAndAdd(r.array,i,o,S),r)}}}(),intersectBoundingBox:function(e,n){var _,C,S,k,z,te,t=this.direction.array,r=this.origin.array,i=e.min.array,o=e.max.array,d=1/t[0],f=1/t[1],g=1/t[2];if(d>=0?(_=(i[0]-r[0])*d,C=(o[0]-r[0])*d):(C=(i[0]-r[0])*d,_=(o[0]-r[0])*d),f>=0?(S=(i[1]-r[1])*f,k=(o[1]-r[1])*f):(k=(i[1]-r[1])*f,S=(o[1]-r[1])*f),_>k||S>C||((S>_||_!=_)&&(_=S),(k<C||C!=C)&&(C=k),g>=0?(z=(i[2]-r[2])*g,te=(o[2]-r[2])*g):(te=(i[2]-r[2])*g,z=(o[2]-r[2])*g),_>te||z>C)||((z>_||_!=_)&&(_=z),(te<C||C!=C)&&(C=te),C<0))return null;var pe=_>=0?_:C;return n||(n=new Ln),Et.scaleAndAdd(n.array,r,t,pe),n},intersectTriangle:function(){var e=Et.create(),n=Et.create(),t=Et.create(),r=Et.create();return function(i,o,d,f,g,_){var C=this.direction.array,S=this.origin.array;d=d.array,Et.sub(e,o=o.array,i=i.array),Et.sub(n,d,i),Et.cross(r,n,C);var k=Et.dot(e,r);if(f){if(k>-l3)return null}else if(k>-l3&&k<l3)return null;Et.sub(t,S,i);var z=Et.dot(r,t)/k;if(z<0||z>1)return null;Et.cross(r,e,t);var te=Et.dot(C,r)/k;if(te<0||te>1||z+te>1)return null;Et.cross(r,e,n);var pe=-Et.dot(t,r)/k;return pe<0?null:(g||(g=new Ln),_&&Ln.set(_,1-z-te,z,te),Et.scaleAndAdd(g.array,S,C,pe),g)}}(),applyTransform:function(e){Ln.add(this.direction,this.direction,this.origin),Ln.transformMat4(this.origin,this.origin,e),Ln.transformMat4(this.direction,this.direction,e),Ln.sub(this.direction,this.direction,this.origin),Ln.normalize(this.direction,this.direction)},copy:function(e){Ln.copy(this.origin,e.origin),Ln.copy(this.direction,e.direction)},clone:function(){var e=new mI;return e.copy(this),e}};const _I=mI;var Xr={create:function(){var e=new Ko(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},clone:function(e){var n=new Ko(4);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n},fromValues:function(e,n,t,r){var i=new Ko(4);return i[0]=e,i[1]=n,i[2]=t,i[3]=r,i},copy:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e},set:function(e,n,t,r,i){return e[0]=n,e[1]=t,e[2]=r,e[3]=i,e},add:function(e,n,t){return e[0]=n[0]+t[0],e[1]=n[1]+t[1],e[2]=n[2]+t[2],e[3]=n[3]+t[3],e},subtract:function(e,n,t){return e[0]=n[0]-t[0],e[1]=n[1]-t[1],e[2]=n[2]-t[2],e[3]=n[3]-t[3],e}};Xr.sub=Xr.subtract,Xr.multiply=function(e,n,t){return e[0]=n[0]*t[0],e[1]=n[1]*t[1],e[2]=n[2]*t[2],e[3]=n[3]*t[3],e},Xr.mul=Xr.multiply,Xr.divide=function(e,n,t){return e[0]=n[0]/t[0],e[1]=n[1]/t[1],e[2]=n[2]/t[2],e[3]=n[3]/t[3],e},Xr.div=Xr.divide,Xr.min=function(e,n,t){return e[0]=Math.min(n[0],t[0]),e[1]=Math.min(n[1],t[1]),e[2]=Math.min(n[2],t[2]),e[3]=Math.min(n[3],t[3]),e},Xr.max=function(e,n,t){return e[0]=Math.max(n[0],t[0]),e[1]=Math.max(n[1],t[1]),e[2]=Math.max(n[2],t[2]),e[3]=Math.max(n[3],t[3]),e},Xr.scale=function(e,n,t){return e[0]=n[0]*t,e[1]=n[1]*t,e[2]=n[2]*t,e[3]=n[3]*t,e},Xr.scaleAndAdd=function(e,n,t,r){return e[0]=n[0]+t[0]*r,e[1]=n[1]+t[1]*r,e[2]=n[2]+t[2]*r,e[3]=n[3]+t[3]*r,e},Xr.distance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1],i=n[2]-e[2],o=n[3]-e[3];return Math.sqrt(t*t+r*r+i*i+o*o)},Xr.dist=Xr.distance,Xr.squaredDistance=function(e,n){var t=n[0]-e[0],r=n[1]-e[1],i=n[2]-e[2],o=n[3]-e[3];return t*t+r*r+i*i+o*o},Xr.sqrDist=Xr.squaredDistance,Xr.length=function(e){var n=e[0],t=e[1],r=e[2],i=e[3];return Math.sqrt(n*n+t*t+r*r+i*i)},Xr.len=Xr.length,Xr.squaredLength=function(e){var n=e[0],t=e[1],r=e[2],i=e[3];return n*n+t*t+r*r+i*i},Xr.sqrLen=Xr.squaredLength,Xr.negate=function(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e[3]=-n[3],e},Xr.inverse=function(e,n){return e[0]=1/n[0],e[1]=1/n[1],e[2]=1/n[2],e[3]=1/n[3],e},Xr.normalize=function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],d=t*t+r*r+i*i+o*o;return d>0&&(d=1/Math.sqrt(d),e[0]=n[0]*d,e[1]=n[1]*d,e[2]=n[2]*d,e[3]=n[3]*d),e},Xr.dot=function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]+e[3]*n[3]},Xr.lerp=function(e,n,t,r){var i=n[0],o=n[1],d=n[2],f=n[3];return e[0]=i+r*(t[0]-i),e[1]=o+r*(t[1]-o),e[2]=d+r*(t[2]-d),e[3]=f+r*(t[3]-f),e},Xr.random=function(e,n){return n=n||1,e[0]=Py(),e[1]=Py(),e[2]=Py(),e[3]=Py(),Xr.normalize(e,e),Xr.scale(e,e,n),e},Xr.transformMat4=function(e,n,t){var r=n[0],i=n[1],o=n[2],d=n[3];return e[0]=t[0]*r+t[4]*i+t[8]*o+t[12]*d,e[1]=t[1]*r+t[5]*i+t[9]*o+t[13]*d,e[2]=t[2]*r+t[6]*i+t[10]*o+t[14]*d,e[3]=t[3]*r+t[7]*i+t[11]*o+t[15]*d,e},Xr.transformQuat=function(e,n,t){var r=n[0],i=n[1],o=n[2],d=t[0],f=t[1],g=t[2],_=t[3],C=_*r+f*o-g*i,S=_*i+g*r-d*o,k=_*o+d*i-f*r,z=-d*r-f*i-g*o;return e[0]=C*_+z*-d+S*-g-k*-f,e[1]=S*_+z*-f+k*-d-C*-g,e[2]=k*_+z*-g+C*-f-S*-d,e},Xr.forEach=function(){var e=Xr.create();return function(n,t,r,i,o,d){var f,g;for(t||(t=4),r||(r=0),g=i?Math.min(i*t+r,n.length):n.length,f=r;f<g;f+=t)e[0]=n[f],e[1]=n[f+1],e[2]=n[f+2],e[3]=n[f+3],o(e,e,d),n[f]=e[0],n[f+1]=e[1],n[f+2]=e[2],n[f+3]=e[3];return n}}();const Wn=Xr;var xo={create:function(){var e=new Ko(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromMat4:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[4],e[4]=n[5],e[5]=n[6],e[6]=n[8],e[7]=n[9],e[8]=n[10],e},clone:function(e){var n=new Ko(9);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n},copy:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},transpose:function(e,n){if(e===n){var t=n[1],r=n[2],i=n[5];e[1]=n[3],e[2]=n[6],e[3]=t,e[5]=n[7],e[6]=r,e[7]=i}else e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8];return e},invert:function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],d=n[4],f=n[5],g=n[6],_=n[7],C=n[8],S=C*d-f*_,k=-C*o+f*g,z=_*o-d*g,te=t*S+r*k+i*z;return te?(e[0]=S*(te=1/te),e[1]=(-C*r+i*_)*te,e[2]=(f*r-i*d)*te,e[3]=k*te,e[4]=(C*t-i*g)*te,e[5]=(-f*t+i*o)*te,e[6]=z*te,e[7]=(-_*t+r*g)*te,e[8]=(d*t-r*o)*te,e):null},adjoint:function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],d=n[4],f=n[5],g=n[6],_=n[7],C=n[8];return e[0]=d*C-f*_,e[1]=i*_-r*C,e[2]=r*f-i*d,e[3]=f*g-o*C,e[4]=t*C-i*g,e[5]=i*o-t*f,e[6]=o*_-d*g,e[7]=r*g-t*_,e[8]=t*d-r*o,e},determinant:function(e){var i=e[3],o=e[4],d=e[5],f=e[6],g=e[7],_=e[8];return e[0]*(_*o-d*g)+e[1]*(-_*i+d*f)+e[2]*(g*i-o*f)},multiply:function(e,n,t){var r=n[0],i=n[1],o=n[2],d=n[3],f=n[4],g=n[5],_=n[6],C=n[7],S=n[8],k=t[0],z=t[1],te=t[2],pe=t[3],Me=t[4],Re=t[5],Fe=t[6],Oe=t[7],Be=t[8];return e[0]=k*r+z*d+te*_,e[1]=k*i+z*f+te*C,e[2]=k*o+z*g+te*S,e[3]=pe*r+Me*d+Re*_,e[4]=pe*i+Me*f+Re*C,e[5]=pe*o+Me*g+Re*S,e[6]=Fe*r+Oe*d+Be*_,e[7]=Fe*i+Oe*f+Be*C,e[8]=Fe*o+Oe*g+Be*S,e}};xo.mul=xo.multiply,xo.translate=function(e,n,t){var r=n[0],i=n[1],o=n[2],d=n[3],f=n[4],g=n[5],_=n[6],C=n[7],S=n[8],k=t[0],z=t[1];return e[0]=r,e[1]=i,e[2]=o,e[3]=d,e[4]=f,e[5]=g,e[6]=k*r+z*d+_,e[7]=k*i+z*f+C,e[8]=k*o+z*g+S,e},xo.rotate=function(e,n,t){var r=n[0],i=n[1],o=n[2],d=n[3],f=n[4],g=n[5],_=n[6],C=n[7],S=n[8],k=Math.sin(t),z=Math.cos(t);return e[0]=z*r+k*d,e[1]=z*i+k*f,e[2]=z*o+k*g,e[3]=z*d-k*r,e[4]=z*f-k*i,e[5]=z*g-k*o,e[6]=_,e[7]=C,e[8]=S,e},xo.scale=function(e,n,t){var r=t[0],i=t[1];return e[0]=r*n[0],e[1]=r*n[1],e[2]=r*n[2],e[3]=i*n[3],e[4]=i*n[4],e[5]=i*n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e},xo.fromMat2d=function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=0,e[3]=n[2],e[4]=n[3],e[5]=0,e[6]=n[4],e[7]=n[5],e[8]=1,e},xo.fromQuat=function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],d=t+t,f=r+r,g=i+i,_=t*d,C=r*d,S=r*f,k=i*d,z=i*f,te=i*g,pe=o*d,Me=o*f,Re=o*g;return e[0]=1-S-te,e[3]=C-Re,e[6]=k+Me,e[1]=C+Re,e[4]=1-_-te,e[7]=z-pe,e[2]=k-Me,e[5]=z+pe,e[8]=1-_-S,e},xo.normalFromMat4=function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],d=n[4],f=n[5],g=n[6],_=n[7],C=n[8],S=n[9],k=n[10],z=n[11],te=n[12],pe=n[13],Me=n[14],Re=n[15],Fe=t*f-r*d,Oe=t*g-i*d,Be=t*_-o*d,it=r*g-i*f,at=r*_-o*f,Ct=i*_-o*g,mt=C*pe-S*te,Ft=C*Me-k*te,nn=C*Re-z*te,$t=S*Me-k*pe,pn=S*Re-z*pe,mn=k*Re-z*Me,sn=Fe*mn-Oe*pn+Be*$t+it*nn-at*Ft+Ct*mt;return sn?(e[0]=(f*mn-g*pn+_*$t)*(sn=1/sn),e[1]=(g*nn-d*mn-_*Ft)*sn,e[2]=(d*pn-f*nn+_*mt)*sn,e[3]=(i*pn-r*mn-o*$t)*sn,e[4]=(t*mn-i*nn+o*Ft)*sn,e[5]=(r*nn-t*pn-o*mt)*sn,e[6]=(pe*Ct-Me*at+Re*it)*sn,e[7]=(Me*Be-te*Ct-Re*Oe)*sn,e[8]=(te*at-pe*Be+Re*Fe)*sn,e):null},xo.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))};const hi=xo;var Si={create:function(){var e=new Ko(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}};Si.rotationTo=function(){var e=Et.create(),n=Et.fromValues(1,0,0),t=Et.fromValues(0,1,0);return function(r,i,o){var d=Et.dot(i,o);return d<-.999999?(Et.cross(e,n,i),Et.length(e)<1e-6&&Et.cross(e,t,i),Et.normalize(e,e),Si.setAxisAngle(r,e,Math.PI),r):d>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(Et.cross(e,i,o),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+d,Si.normalize(r,r))}}(),Si.setAxes=function(){var e=hi.create();return function(n,t,r,i){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-t[0],e[5]=-t[1],e[8]=-t[2],Si.normalize(n,Si.fromMat3(n,e))}}(),Si.clone=Wn.clone,Si.fromValues=Wn.fromValues,Si.copy=Wn.copy,Si.set=Wn.set,Si.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},Si.setAxisAngle=function(e,n,t){t*=.5;var r=Math.sin(t);return e[0]=r*n[0],e[1]=r*n[1],e[2]=r*n[2],e[3]=Math.cos(t),e},Si.add=Wn.add,Si.multiply=function(e,n,t){var r=n[0],i=n[1],o=n[2],d=n[3],f=t[0],g=t[1],_=t[2],C=t[3];return e[0]=r*C+d*f+i*_-o*g,e[1]=i*C+d*g+o*f-r*_,e[2]=o*C+d*_+r*g-i*f,e[3]=d*C-r*f-i*g-o*_,e},Si.mul=Si.multiply,Si.scale=Wn.scale,Si.rotateX=function(e,n,t){t*=.5;var r=n[0],i=n[1],o=n[2],d=n[3],f=Math.sin(t),g=Math.cos(t);return e[0]=r*g+d*f,e[1]=i*g+o*f,e[2]=o*g-i*f,e[3]=d*g-r*f,e},Si.rotateY=function(e,n,t){t*=.5;var r=n[0],i=n[1],o=n[2],d=n[3],f=Math.sin(t),g=Math.cos(t);return e[0]=r*g-o*f,e[1]=i*g+d*f,e[2]=o*g+r*f,e[3]=d*g-i*f,e},Si.rotateZ=function(e,n,t){t*=.5;var r=n[0],i=n[1],o=n[2],d=n[3],f=Math.sin(t),g=Math.cos(t);return e[0]=r*g+i*f,e[1]=i*g-r*f,e[2]=o*g+d*f,e[3]=d*g-o*f,e},Si.calculateW=function(e,n){var t=n[0],r=n[1],i=n[2];return e[0]=t,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-t*t-r*r-i*i)),e},Si.dot=Wn.dot,Si.lerp=Wn.lerp,Si.slerp=function(e,n,t,r){var k,z,te,pe,Me,i=n[0],o=n[1],d=n[2],f=n[3],g=t[0],_=t[1],C=t[2],S=t[3];return(z=i*g+o*_+d*C+f*S)<0&&(z=-z,g=-g,_=-_,C=-C,S=-S),1-z>1e-6?(k=Math.acos(z),te=Math.sin(k),pe=Math.sin((1-r)*k)/te,Me=Math.sin(r*k)/te):(pe=1-r,Me=r),e[0]=pe*i+Me*g,e[1]=pe*o+Me*_,e[2]=pe*d+Me*C,e[3]=pe*f+Me*S,e},Si.invert=function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],d=t*t+r*r+i*i+o*o,f=d?1/d:0;return e[0]=-t*f,e[1]=-r*f,e[2]=-i*f,e[3]=o*f,e},Si.conjugate=function(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e[3]=n[3],e},Si.length=Wn.length,Si.len=Si.length,Si.squaredLength=Wn.squaredLength,Si.sqrLen=Si.squaredLength,Si.normalize=Wn.normalize,Si.fromMat3=function(e,n){var r,t=n[0]+n[4]+n[8];if(t>0)r=Math.sqrt(t+1),e[3]=.5*r,e[0]=(n[5]-n[7])*(r=.5/r),e[1]=(n[6]-n[2])*r,e[2]=(n[1]-n[3])*r;else{var i=0;n[4]>n[0]&&(i=1),n[8]>n[3*i+i]&&(i=2);var o=(i+1)%3,d=(i+2)%3;r=Math.sqrt(n[3*i+i]-n[3*o+o]-n[3*d+d]+1),e[i]=.5*r,e[3]=(n[3*o+d]-n[3*d+o])*(r=.5/r),e[o]=(n[3*o+i]+n[3*i+o])*r,e[d]=(n[3*d+i]+n[3*i+d])*r}return e};const Ir=Si;var ca=function(){this._axisX=new Ln,this._axisY=new Ln,this._axisZ=new Ln,this.array=An.create(),this._dirty=!0};ca.prototype={constructor:ca,setArray:function(e){for(var n=0;n<this.array.length;n++)this.array[n]=e[n];return this._dirty=!0,this},adjoint:function(){return An.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return(new ca).copy(this)},copy:function(e){return An.copy(this.array,e.array),this._dirty=!0,this},determinant:function(){return An.determinant(this.array)},fromQuat:function(e){return An.fromQuat(this.array,e.array),this._dirty=!0,this},fromRotationTranslation:function(e,n){return An.fromRotationTranslation(this.array,e.array,n.array),this._dirty=!0,this},fromMat2d:function(e){return ca.fromMat2d(this,e),this},frustum:function(e,n,t,r,i,o){return An.frustum(this.array,e,n,t,r,i,o),this._dirty=!0,this},identity:function(){return An.identity(this.array),this._dirty=!0,this},invert:function(){return An.invert(this.array,this.array),this._dirty=!0,this},lookAt:function(e,n,t){return An.lookAt(this.array,e.array,n.array,t.array),this._dirty=!0,this},mul:function(e){return An.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return An.mul(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return An.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return An.multiply(this.array,e.array,this.array),this._dirty=!0,this},ortho:function(e,n,t,r,i,o){return An.ortho(this.array,e,n,t,r,i,o),this._dirty=!0,this},perspective:function(e,n,t,r){return An.perspective(this.array,e,n,t,r),this._dirty=!0,this},rotate:function(e,n){return An.rotate(this.array,this.array,e,n.array),this._dirty=!0,this},rotateX:function(e){return An.rotateX(this.array,this.array,e),this._dirty=!0,this},rotateY:function(e){return An.rotateY(this.array,this.array,e),this._dirty=!0,this},rotateZ:function(e){return An.rotateZ(this.array,this.array,e),this._dirty=!0,this},scale:function(e){return An.scale(this.array,this.array,e.array),this._dirty=!0,this},translate:function(e){return An.translate(this.array,this.array,e.array),this._dirty=!0,this},transpose:function(){return An.transpose(this.array,this.array),this._dirty=!0,this},decomposeMatrix:function(){var e=Et.create(),n=Et.create(),t=Et.create(),r=hi.create();return function(i,o,d){var f=this.array;Et.set(e,f[0],f[1],f[2]),Et.set(n,f[4],f[5],f[6]),Et.set(t,f[8],f[9],f[10]);var g=Et.length(e),_=Et.length(n),C=Et.length(t);this.determinant()<0&&(g=-g),i&&i.set(g,_,C),d.set(f[12],f[13],f[14]),hi.fromMat4(r,f),r[0]/=g,r[1]/=g,r[2]/=g,r[3]/=_,r[4]/=_,r[5]/=_,r[6]/=C,r[7]/=C,r[8]/=C,Ir.fromMat3(o.array,r),Ir.normalize(o.array,o.array),o._dirty=!0,d._dirty=!0}}(),toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var yI=Object.defineProperty;if(yI){var c3=ca.prototype;yI(c3,"z",{get:function(){var e=this.array;return this._axisZ.set(e[8],e[9],e[10]),this._axisZ},set:function(e){var n=this.array;n[8]=(e=e.array)[0],n[9]=e[1],n[10]=e[2],this._dirty=!0}}),yI(c3,"y",{get:function(){var e=this.array;return this._axisY.set(e[4],e[5],e[6]),this._axisY},set:function(e){var n=this.array;n[4]=(e=e.array)[0],n[5]=e[1],n[6]=e[2],this._dirty=!0}}),yI(c3,"x",{get:function(){var e=this.array;return this._axisX.set(e[0],e[1],e[2]),this._axisX},set:function(e){var n=this.array;n[0]=(e=e.array)[0],n[1]=e[1],n[2]=e[2],this._dirty=!0}})}ca.adjoint=function(e,n){return An.adjoint(e.array,n.array),e._dirty=!0,e},ca.copy=function(e,n){return An.copy(e.array,n.array),e._dirty=!0,e},ca.determinant=function(e){return An.determinant(e.array)},ca.identity=function(e){return An.identity(e.array),e._dirty=!0,e},ca.ortho=function(e,n,t,r,i,o,d){return An.ortho(e.array,n,t,r,i,o,d),e._dirty=!0,e},ca.perspective=function(e,n,t,r,i){return An.perspective(e.array,n,t,r,i),e._dirty=!0,e},ca.lookAt=function(e,n,t,r){return An.lookAt(e.array,n.array,t.array,r.array),e._dirty=!0,e},ca.invert=function(e,n){return An.invert(e.array,n.array),e._dirty=!0,e},ca.multiply=ca.mul=function(e,n,t){return An.mul(e.array,n.array,t.array),e._dirty=!0,e},ca.fromQuat=function(e,n){return An.fromQuat(e.array,n.array),e._dirty=!0,e},ca.fromRotationTranslation=function(e,n,t){return An.fromRotationTranslation(e.array,n.array,t.array),e._dirty=!0,e},ca.fromMat2d=function(r,t){return r._dirty=!0,(r=r.array)[0]=(t=t.array)[0],r[4]=t[2],r[12]=t[4],r[1]=t[1],r[5]=t[3],r[13]=t[5],r},ca.rotate=function(e,n,t,r){return An.rotate(e.array,n.array,t,r.array),e._dirty=!0,e},ca.rotateX=function(e,n,t){return An.rotateX(e.array,n.array,t),e._dirty=!0,e},ca.rotateY=function(e,n,t){return An.rotateY(e.array,n.array,t),e._dirty=!0,e},ca.rotateZ=function(e,n,t){return An.rotateZ(e.array,n.array,t),e._dirty=!0,e},ca.scale=function(e,n,t){return An.scale(e.array,n.array,t.array),e._dirty=!0,e},ca.transpose=function(e,n){return An.transpose(e.array,n.array),e._dirty=!0,e},ca.translate=function(e,n,t){return An.translate(e.array,n.array,t.array),e._dirty=!0,e};const ir=ca;var Vi=function(e,n,t,r){this.array=Ir.fromValues(e=e||0,n=n||0,t=t||0,r=void 0===r?1:r),this._dirty=!0};Vi.prototype={constructor:Vi,add:function(e){return Ir.add(this.array,this.array,e.array),this._dirty=!0,this},calculateW:function(){return Ir.calculateW(this.array,this.array),this._dirty=!0,this},set:function(e,n,t,r){return this.array[0]=e,this.array[1]=n,this.array[2]=t,this.array[3]=r,this._dirty=!0,this},setArray:function(e){return this.array[0]=e[0],this.array[1]=e[1],this.array[2]=e[2],this.array[3]=e[3],this._dirty=!0,this},clone:function(){return new Vi(this.x,this.y,this.z,this.w)},conjugate:function(){return Ir.conjugate(this.array,this.array),this._dirty=!0,this},copy:function(e){return Ir.copy(this.array,e.array),this._dirty=!0,this},dot:function(e){return Ir.dot(this.array,e.array)},fromMat3:function(e){return Ir.fromMat3(this.array,e.array),this._dirty=!0,this},fromMat4:function(){var e=hi.create();return function(n){return hi.fromMat4(e,n.array),hi.transpose(e,e),Ir.fromMat3(this.array,e),this._dirty=!0,this}}(),identity:function(){return Ir.identity(this.array),this._dirty=!0,this},invert:function(){return Ir.invert(this.array,this.array),this._dirty=!0,this},len:function(){return Ir.len(this.array)},length:function(){return Ir.length(this.array)},lerp:function(e,n,t){return Ir.lerp(this.array,e.array,n.array,t),this._dirty=!0,this},mul:function(e){return Ir.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return Ir.multiply(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return Ir.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return Ir.multiply(this.array,e.array,this.array),this._dirty=!0,this},normalize:function(){return Ir.normalize(this.array,this.array),this._dirty=!0,this},rotateX:function(e){return Ir.rotateX(this.array,this.array,e),this._dirty=!0,this},rotateY:function(e){return Ir.rotateY(this.array,this.array,e),this._dirty=!0,this},rotateZ:function(e){return Ir.rotateZ(this.array,this.array,e),this._dirty=!0,this},rotationTo:function(e,n){return Ir.rotationTo(this.array,e.array,n.array),this._dirty=!0,this},setAxes:function(e,n,t){return Ir.setAxes(this.array,e.array,n.array,t.array),this._dirty=!0,this},setAxisAngle:function(e,n){return Ir.setAxisAngle(this.array,e.array,n),this._dirty=!0,this},slerp:function(e,n,t){return Ir.slerp(this.array,e.array,n.array,t),this._dirty=!0,this},sqrLen:function(){return Ir.sqrLen(this.array)},squaredLength:function(){return Ir.squaredLength(this.array)},fromEuler:function(e,n){return Vi.fromEuler(this,e,n)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var $C=Object.defineProperty;if($C){var bI=Vi.prototype;$C(bI,"x",{get:function(){return this.array[0]},set:function(e){this.array[0]=e,this._dirty=!0}}),$C(bI,"y",{get:function(){return this.array[1]},set:function(e){this.array[1]=e,this._dirty=!0}}),$C(bI,"z",{get:function(){return this.array[2]},set:function(e){this.array[2]=e,this._dirty=!0}}),$C(bI,"w",{get:function(){return this.array[3]},set:function(e){this.array[3]=e,this._dirty=!0}})}Vi.add=function(e,n,t){return Ir.add(e.array,n.array,t.array),e._dirty=!0,e},Vi.set=function(e,n,t,r,i){Ir.set(e.array,n,t,r,i),e._dirty=!0},Vi.copy=function(e,n){return Ir.copy(e.array,n.array),e._dirty=!0,e},Vi.calculateW=function(e,n){return Ir.calculateW(e.array,n.array),e._dirty=!0,e},Vi.conjugate=function(e,n){return Ir.conjugate(e.array,n.array),e._dirty=!0,e},Vi.identity=function(e){return Ir.identity(e.array),e._dirty=!0,e},Vi.invert=function(e,n){return Ir.invert(e.array,n.array),e._dirty=!0,e},Vi.dot=function(e,n){return Ir.dot(e.array,n.array)},Vi.len=function(e){return Ir.length(e.array)},Vi.lerp=function(e,n,t,r){return Ir.lerp(e.array,n.array,t.array,r),e._dirty=!0,e},Vi.slerp=function(e,n,t,r){return Ir.slerp(e.array,n.array,t.array,r),e._dirty=!0,e},Vi.multiply=Vi.mul=function(e,n,t){return Ir.multiply(e.array,n.array,t.array),e._dirty=!0,e},Vi.rotateX=function(e,n,t){return Ir.rotateX(e.array,n.array,t),e._dirty=!0,e},Vi.rotateY=function(e,n,t){return Ir.rotateY(e.array,n.array,t),e._dirty=!0,e},Vi.rotateZ=function(e,n,t){return Ir.rotateZ(e.array,n.array,t),e._dirty=!0,e},Vi.setAxisAngle=function(e,n,t){return Ir.setAxisAngle(e.array,n.array,t),e._dirty=!0,e},Vi.normalize=function(e,n){return Ir.normalize(e.array,n.array),e._dirty=!0,e},Vi.squaredLength=Vi.sqrLen=function(e){return Ir.sqrLen(e.array)},Vi.fromMat3=function(e,n){return Ir.fromMat3(e.array,n.array),e._dirty=!0,e},Vi.setAxes=function(e,n,t,r){return Ir.setAxes(e.array,n.array,t.array,r.array),e._dirty=!0,e},Vi.rotationTo=function(e,n,t){return Ir.rotationTo(e.array,n.array,t.array),e._dirty=!0,e},Vi.fromEuler=function(e,n,C){e._dirty=!0,n=n.array;var r=e.array,i=Math.cos(n[0]/2),o=Math.cos(n[1]/2),d=Math.cos(n[2]/2),f=Math.sin(n[0]/2),g=Math.sin(n[1]/2),_=Math.sin(n[2]/2);switch(C=(C||"XYZ").toUpperCase()){case"XYZ":r[0]=f*o*d+i*g*_,r[1]=i*g*d-f*o*_,r[2]=i*o*_+f*g*d,r[3]=i*o*d-f*g*_;break;case"YXZ":r[0]=f*o*d+i*g*_,r[1]=i*g*d-f*o*_,r[2]=i*o*_-f*g*d,r[3]=i*o*d+f*g*_;break;case"ZXY":r[0]=f*o*d-i*g*_,r[1]=i*g*d+f*o*_,r[2]=i*o*_+f*g*d,r[3]=i*o*d-f*g*_;break;case"ZYX":r[0]=f*o*d-i*g*_,r[1]=i*g*d+f*o*_,r[2]=i*o*_-f*g*d,r[3]=i*o*d+f*g*_;break;case"YZX":r[0]=f*o*d+i*g*_,r[1]=i*g*d+f*o*_,r[2]=i*o*_-f*g*d,r[3]=i*o*d-f*g*_;break;case"XZY":r[0]=f*o*d-i*g*_,r[1]=i*g*d-f*o*_,r[2]=i*o*_+f*g*d,r[3]=i*o*d+f*g*_}};const pW=Vi;var Sf=Et.set,xI=Et.copy,CI=function(e,n){this.min=e||new Ln(1/0,1/0,1/0),this.max=n||new Ln(-1/0,-1/0,-1/0),this.vertices=null};CI.prototype={constructor:CI,updateFromVertices:function(e){if(e.length>0){var n=this.min,t=this.max,r=n.array,i=t.array;xI(r,e[0]),xI(i,e[0]);for(var o=1;o<e.length;o++){var d=e[o];d[0]<r[0]&&(r[0]=d[0]),d[1]<r[1]&&(r[1]=d[1]),d[2]<r[2]&&(r[2]=d[2]),d[0]>i[0]&&(i[0]=d[0]),d[1]>i[1]&&(i[1]=d[1]),d[2]>i[2]&&(i[2]=d[2])}n._dirty=!0,t._dirty=!0}},union:function(e){var n=this.min,t=this.max;return Et.min(n.array,n.array,e.min.array),Et.max(t.array,t.array,e.max.array),n._dirty=!0,t._dirty=!0,this},intersection:function(e){var n=this.min,t=this.max;return Et.max(n.array,n.array,e.min.array),Et.min(t.array,t.array,e.max.array),n._dirty=!0,t._dirty=!0,this},intersectBoundingBox:function(e){var n=this.min.array,t=this.max.array,r=e.min.array,i=e.max.array;return!(n[0]>i[0]||n[1]>i[1]||n[2]>i[2]||t[0]<r[0]||t[1]<r[1]||t[2]<r[2])},containBoundingBox:function(e){var n=this.min.array,t=this.max.array,r=e.min.array,i=e.max.array;return n[0]<=r[0]&&n[1]<=r[1]&&n[2]<=r[2]&&t[0]>=i[0]&&t[1]>=i[1]&&t[2]>=i[2]},containPoint:function(e){var n=this.min.array,t=this.max.array,r=e.array;return n[0]<=r[0]&&n[1]<=r[1]&&n[2]<=r[2]&&t[0]>=r[0]&&t[1]>=r[1]&&t[2]>=r[2]},isFinite:function(){var e=this.min.array,n=this.max.array;return isFinite(e[0])&&isFinite(e[1])&&isFinite(e[2])&&isFinite(n[0])&&isFinite(n[1])&&isFinite(n[2])},applyTransform:function(e){this.transformFrom(this,e)},transformFrom:function(){var e=Et.create(),n=Et.create(),t=Et.create(),r=Et.create(),i=Et.create(),o=Et.create();return function(d,f){var g=d.min.array,_=d.max.array,C=f.array;return e[0]=C[0]*g[0],e[1]=C[1]*g[0],e[2]=C[2]*g[0],n[0]=C[0]*_[0],n[1]=C[1]*_[0],n[2]=C[2]*_[0],t[0]=C[4]*g[1],t[1]=C[5]*g[1],t[2]=C[6]*g[1],r[0]=C[4]*_[1],r[1]=C[5]*_[1],r[2]=C[6]*_[1],i[0]=C[8]*g[2],i[1]=C[9]*g[2],i[2]=C[10]*g[2],o[0]=C[8]*_[2],o[1]=C[9]*_[2],o[2]=C[10]*_[2],_=this.max.array,(g=this.min.array)[0]=Math.min(e[0],n[0])+Math.min(t[0],r[0])+Math.min(i[0],o[0])+C[12],g[1]=Math.min(e[1],n[1])+Math.min(t[1],r[1])+Math.min(i[1],o[1])+C[13],g[2]=Math.min(e[2],n[2])+Math.min(t[2],r[2])+Math.min(i[2],o[2])+C[14],_[0]=Math.max(e[0],n[0])+Math.max(t[0],r[0])+Math.max(i[0],o[0])+C[12],_[1]=Math.max(e[1],n[1])+Math.max(t[1],r[1])+Math.max(i[1],o[1])+C[13],_[2]=Math.max(e[2],n[2])+Math.max(t[2],r[2])+Math.max(i[2],o[2])+C[14],this.min._dirty=!0,this.max._dirty=!0,this}}(),applyProjection:function(e){var n=this.min.array,t=this.max.array,r=e.array,i=n[0],o=n[1],d=n[2],f=t[0],g=t[1],_=n[2],C=t[0],S=t[1],k=t[2];if(1===r[15])n[0]=r[0]*i+r[12],n[1]=r[5]*o+r[13],t[2]=r[10]*d+r[14],t[0]=r[0]*C+r[12],t[1]=r[5]*S+r[13],n[2]=r[10]*k+r[14];else{var z=-1/d;n[0]=r[0]*i*z,n[1]=r[5]*o*z,t[2]=(r[10]*d+r[14])*z,t[0]=r[0]*f*(z=-1/_),t[1]=r[5]*g*z,n[2]=(r[10]*k+r[14])*(z=-1/k)}return this.min._dirty=!0,this.max._dirty=!0,this},updateVertices:function(){var e=this.vertices;if(!e){e=[];for(var n=0;n<8;n++)e[n]=Et.fromValues(0,0,0);this.vertices=e}var t=this.min.array,r=this.max.array;return Sf(e[0],t[0],t[1],t[2]),Sf(e[1],t[0],r[1],t[2]),Sf(e[2],r[0],t[1],t[2]),Sf(e[3],r[0],r[1],t[2]),Sf(e[4],t[0],t[1],r[2]),Sf(e[5],t[0],r[1],r[2]),Sf(e[6],r[0],t[1],r[2]),Sf(e[7],r[0],r[1],r[2]),this},copy:function(e){var n=this.min,t=this.max;return xI(n.array,e.min.array),xI(t.array,e.max.array),n._dirty=!0,t._dirty=!0,this},clone:function(){var e=new CI;return e.copy(this),e}};const js=CI;var Rte=0,Lte=Gs.extend({name:"",position:null,rotation:null,scale:null,worldTransform:null,localTransform:null,autoUpdateLocalTransform:!0,_parent:null,_scene:null,_needsUpdateWorldTransform:!0,_inIterating:!1,__depth:0},function(){this.name||(this.name=(this.type||"NODE")+"_"+Rte++),this.position||(this.position=new Ln),this.rotation||(this.rotation=new pW),this.scale||(this.scale=new Ln(1,1,1)),this.worldTransform=new ir,this.localTransform=new ir,this._children=[]},{target:null,invisible:!1,isSkinnedMesh:function(){return!1},isRenderable:function(){return!1},setName:function(e){var n=this._scene;if(n){var t=n._nodeRepository;delete t[this.name],t[e]=this}this.name=e},add:function(e){var n=e._parent;if(n!==this){n&&n.remove(e),e._parent=this,this._children.push(e);var t=this._scene;t&&t!==e.scene&&e.traverse(this._addSelfToScene,this),e._needsUpdateWorldTransform=!0}},remove:function(e){var n=this._children,t=n.indexOf(e);t<0||(n.splice(t,1),e._parent=null,this._scene&&e.traverse(this._removeSelfFromScene,this))},removeAll:function(){for(var e=this._children,n=0;n<e.length;n++)e[n]._parent=null,this._scene&&e[n].traverse(this._removeSelfFromScene,this);this._children=[]},getScene:function(){return this._scene},getParent:function(){return this._parent},_removeSelfFromScene:function(e){e._scene.removeFromScene(e),e._scene=null},_addSelfToScene:function(e){this._scene.addToScene(e),e._scene=this._scene},isAncestor:function(e){for(var n=e._parent;n;){if(n===this)return!0;n=n._parent}return!1},children:function(){return this._children.slice()},childAt:function(e){return this._children[e]},getChildByName:function(e){for(var n=this._children,t=0;t<n.length;t++)if(n[t].name===e)return n[t]},getDescendantByName:function(e){for(var n=this._children,t=0;t<n.length;t++){var r=n[t];if(r.name===e)return r;var i=r.getDescendantByName(e);if(i)return i}},queryNode:function(e){if(e){for(var n=e.split("/"),t=this,r=0;r<n.length;r++){var i=n[r];if(i){for(var o=!1,d=t._children,f=0;f<d.length;f++){var g=d[f];if(g.name===i){t=g,o=!0;break}}if(!o)return}}return t}},getPath:function(e){if(!this._parent)return"/";for(var n=this._parent,t=this.name;n._parent&&(t=n.name+"/"+t,n._parent!=e);)n=n._parent;return!n._parent&&e?null:t},traverse:function(e,n){e.call(n,this);for(var t=this._children,r=0,i=t.length;r<i;r++)t[r].traverse(e,n)},eachChild:function(e,n){for(var t=this._children,r=0,i=t.length;r<i;r++)e.call(n,t[r],r)},setLocalTransform:function(e){An.copy(this.localTransform.array,e.array),this.decomposeLocalTransform()},decomposeLocalTransform:function(e){this.localTransform.decomposeMatrix(e?null:this.scale,this.rotation,this.position)},setWorldTransform:function(e){An.copy(this.worldTransform.array,e.array),this.decomposeWorldTransform()},decomposeWorldTransform:function(){var e=An.create();return function(n){var t=this.localTransform,r=this.worldTransform;this._parent?(An.invert(e,this._parent.worldTransform.array),An.multiply(t.array,e,r.array)):An.copy(t.array,r.array),t.decomposeMatrix(n?null:this.scale,this.rotation,this.position)}}(),transformNeedsUpdate:function(){return this.position._dirty||this.rotation._dirty||this.scale._dirty},updateLocalTransform:function(){var e=this.position,n=this.rotation,t=this.scale;if(this.transformNeedsUpdate()){var r=this.localTransform.array;An.fromRotationTranslation(r,n.array,e.array),An.scale(r,r,t.array),n._dirty=!1,t._dirty=!1,e._dirty=!1,this._needsUpdateWorldTransform=!0}},_updateWorldTransformTopDown:function(){var e=this.localTransform.array,n=this.worldTransform.array;this._parent?An.multiplyAffine(n,this._parent.worldTransform.array,e):An.copy(n,e)},updateWorldTransform:function(){for(var e=this;e&&e.getParent()&&e.getParent().transformNeedsUpdate();)e=e.getParent();e.update()},update:function(e){this.autoUpdateLocalTransform?this.updateLocalTransform():e=!0,(e||this._needsUpdateWorldTransform)&&(this._updateWorldTransformTopDown(),e=!0,this._needsUpdateWorldTransform=!1);for(var n=this._children,t=0,r=n.length;t<r;t++)n[t].update(e)},getBoundingBox:function(){function e(i){return!i.invisible&&i.geometry}var n=new js,t=new ir,r=new ir;return function(i,o){return o=o||new js,i=i||e,this._parent?ir.invert(r,this._parent.worldTransform):ir.identity(r),this.traverse(function(d){d.geometry&&d.geometry.boundingBox&&(n.copy(d.geometry.boundingBox),ir.multiply(t,r,d.worldTransform),n.applyTransform(t),o.union(n))},this,e),o}}(),getWorldPosition:function(e){this.transformNeedsUpdate()&&this.updateWorldTransform();var n=this.worldTransform.array;if(e){var t=e.array;return t[0]=n[12],t[1]=n[13],t[2]=n[14],e}return new Ln(n[12],n[13],n[14])},clone:function(){var e=new this.constructor,n=this._children;e.setName(this.name),e.position.copy(this.position),e.rotation.copy(this.rotation),e.scale.copy(this.scale);for(var t=0;t<n.length;t++)e.add(n[t].clone());return e},rotateAround:function(){var e=new Ln,n=new ir;return function(t,r,i){e.copy(this.position).subtract(t);var o=this.localTransform;o.identity(),o.translate(t),o.rotate(i,r),n.fromRotationTranslation(this.rotation,e),o.multiply(n),o.scale(this.scale),this.decomposeLocalTransform(),this._needsUpdateWorldTransform=!0}}(),lookAt:function(){var e=new ir;return function(n,t){e.lookAt(this.position,n,t||this.localTransform.y).invert(),this.setLocalTransform(e),this.target=n}}()});const Ju=Lte;var Zl=Ju.extend({material:null,geometry:null,mode:4,_renderInfo:null},{__program:null,lightGroup:0,renderOrder:0,culling:!0,cullFace:1029,frontFace:2305,frustumCulling:!0,receiveShadow:!0,castShadow:!0,ignorePicking:!1,ignorePreZ:!1,ignoreGBuffer:!1,isRenderable:function(){return this.geometry&&this.material&&this.material.shader&&!this.invisible&&this.geometry.vertexCount>0},beforeRender:function(e){},afterRender:function(e,n){},getBoundingBox:function(e,n){return n=Ju.prototype.getBoundingBox.call(this,e,n),this.geometry&&this.geometry.boundingBox&&n.union(this.geometry.boundingBox),n},clone:function(){var e=["castShadow","receiveShadow","mode","culling","cullFace","frontFace","frustumCulling","renderOrder","lineWidth","ignorePicking","ignorePreZ","ignoreGBuffer"];return function(){var n=Ju.prototype.clone.call(this);n.geometry=this.geometry,n.material=this.material;for(var t=0;t<e.length;t++){var r=e[t];n[r]!==this[r]&&(n[r]=this[r])}return n}}()});Zl.POINTS=0,Zl.LINES=1,Zl.LINE_LOOP=2,Zl.LINE_STRIP=3,Zl.TRIANGLES=4,Zl.TRIANGLE_STRIP=5,Zl.TRIANGLE_FAN=6,Zl.BACK=1029,Zl.FRONT=1028,Zl.FRONT_AND_BACK=1032,Zl.CW=2304,Zl.CCW=2305;const u3=Zl;var d3=Gs.extend({scene:null,camera:null,renderer:null},function(){this._ray=new _I,this._ndc=new jl},{pick:function(e,n,t){return this.pickAll(e,n,[],t)[0]||null},pickAll:function(e,n,t,r){return this.renderer.screenToNDC(e,n,this._ndc),this.camera.castRay(this._ndc,this._ray),this._intersectNode(this.scene,t=t||[],r||!1),t.sort(this._intersectionCompareFunc),t},_intersectNode:function(e,n,t){e instanceof u3&&e.isRenderable()&&(!e.ignorePicking||t)&&(4===e.mode&&e.geometry.isUseIndices()||e.geometry.pickByRay||e.geometry.pick)&&this._intersectRenderable(e,n);for(var r=0;r<e._children.length;r++)this._intersectNode(e._children[r],n,t)},_intersectRenderable:function(){var e=new Ln,n=new Ln,t=new Ln,r=new _I,i=new ir;return function(o,d){var f=o.isSkinnedMesh();r.copy(this._ray),ir.invert(i,o.worldTransform),f||r.applyTransform(i);var g=o.geometry,_=f?o.skeleton.boundingBox:g.boundingBox;if(!_||r.intersectBoundingBox(_)){if(g.pick)return void g.pick(this._ndc.x,this._ndc.y,this.renderer,this.camera,o,d);if(g.pickByRay)return void g.pickByRay(r,o,d);var S,Me,C=1029===o.cullFace&&2305===o.frontFace||1028===o.cullFace&&2304===o.frontFace,k=g.indices,z=g.attributes.position,te=g.attributes.weight,pe=g.attributes.joint,Re=[];if(z&&z.value&&k){if(f){Me=o.skeleton.getSubSkinMatrices(o.__uid__,o.joints);for(var Fe=0;Fe<o.joints.length;Fe++){Re[Fe]=Re[Fe]||[];for(var Oe=0;Oe<16;Oe++)Re[Fe][Oe]=Me[16*Fe+Oe]}var Be=[],it=[],at=[],Ct=[],mt=[],Ft=g.attributes.skinnedPosition;for((!Ft||!Ft.value)&&(g.createAttribute("skinnedPosition","f",3),(Ft=g.attributes.skinnedPosition).init(g.vertexCount)),Fe=0;Fe<g.vertexCount;Fe++){for(z.get(Fe,Be),te.get(Fe,it),pe.get(Fe,at),it[3]=1-it[0]-it[1]-it[2],Et.set(Ct,0,0,0),Oe=0;Oe<4;Oe++)at[Oe]>=0&&it[Oe]>1e-4&&(Et.transformMat4(mt,Be,Re[at[Oe]]),Et.scaleAndAdd(Ct,Ct,mt,it[Oe]));Ft.set(Fe,Ct)}}for(Fe=0;Fe<k.length;Fe+=3){var nn=k[Fe],$t=k[Fe+1],pn=k[Fe+2],mn=f?g.attributes.skinnedPosition:z;if(mn.get(nn,e.array),mn.get($t,n.array),mn.get(pn,t.array),S=C?r.intersectTriangle(e,n,t,o.culling):r.intersectTriangle(e,t,n,o.culling)){var sn=new Ln;f?Ln.copy(sn,S):Ln.transformMat4(sn,S,o.worldTransform),d.push(new d3.Intersection(S,sn,o,[nn,$t,pn],Fe/3,Ln.dist(sn,this._ray.origin)))}}}}}}(),_intersectionCompareFunc:function(e,n){return e.distance-n.distance}});d3.Intersection=function(e,n,t,r,i,o){this.point=e,this.pointWorld=n,this.target=t,this.triangle=r,this.triangleIndex=i,this.distance=o};const Ote=d3;var KC="__dt__",wI=function(){this._contextId=0,this._caches=[],this._context={}};(wI.prototype={use:function(e,n){var t=this._caches;t[e]||(t[e]={},n&&(t[e]=n())),this._contextId=e,this._context=t[e]},put:function(e,n){this._context[e]=n},get:function(e){return this._context[e]},dirty:function(e){this.put(KC+(e=e||""),!0)},dirtyAll:function(e){for(var n=KC+(e=e||""),t=this._caches,r=0;r<t.length;r++)t[r]&&(t[r][n]=!0)},fresh:function(e){this.put(KC+(e=e||""),!1)},freshAll:function(e){for(var n=KC+(e=e||""),t=this._caches,r=0;r<t.length;r++)t[r]&&(t[r][n]=!1)},isDirty:function(e){var n=KC+(e=e||""),t=this._context;return!t.hasOwnProperty(n)||!0===t[n]},deleteContext:function(e){delete this._caches[e],this._context={}},delete:function(e){delete this._context[e]},clearAll:function(){this._caches={}},getContext:function(){return this._context},eachContext:function(e,n){Object.keys(this._caches).forEach(function(r){e&&e.call(n,r)})},miss:function(e){return!this._context.hasOwnProperty(e)}}).constructor=wI;const h3=wI;var pi=Gs.extend({width:512,height:512,type:5121,format:6408,wrapS:10497,wrapT:10497,minFilter:9987,magFilter:9729,useMipmap:!0,anisotropic:1,flipY:!0,sRGB:!0,unpackAlignment:4,premultiplyAlpha:!1,dynamic:!1,NPOT:!1,__used:0},function(){this._cache=new h3},{getWebGLTexture:function(e){var n=e.gl,t=this._cache;return t.use(e.__uid__),t.miss("webgl_texture")&&t.put("webgl_texture",n.createTexture()),this.dynamic?this.update(e):t.isDirty()&&(this.update(e),t.fresh()),t.get("webgl_texture")},bind:function(){},unbind:function(){},dirty:function(){this._cache&&this._cache.dirtyAll()},update:function(e){},updateCommon:function(e){var n=e.gl;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,this.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,this.unpackAlignment),6402===this.format&&(this.useMipmap=!1);var t=e.getGLExtension("EXT_sRGB");this.format===pi.SRGB&&!t&&(this.format=pi.RGB),this.format===pi.SRGB_ALPHA&&!t&&(this.format=pi.RGBA),this.NPOT=!this.isPowerOfTwo()},getAvailableWrapS:function(){return this.NPOT?33071:this.wrapS},getAvailableWrapT:function(){return this.NPOT?33071:this.wrapT},getAvailableMinFilter:function(){var e=this.minFilter;return this.NPOT||!this.useMipmap?9984===e||9986===e?9728:9987===e||9985===e?9729:e:e},getAvailableMagFilter:function(){return this.magFilter},nextHighestPowerOfTwo:function(e){--e;for(var n=1;n<32;n<<=1)e|=e>>n;return e+1},dispose:function(e){var n=this._cache;n.use(e.__uid__);var t=n.get("webgl_texture");t&&e.gl.deleteTexture(t),n.deleteContext(e.__uid__)},isRenderable:function(){},isPowerOfTwo:function(){}});Object.defineProperty(pi.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e}}),Object.defineProperty(pi.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e}}),pi.BYTE=5120,pi.UNSIGNED_BYTE=5121,pi.SHORT=5122,pi.UNSIGNED_SHORT=5123,pi.INT=5124,pi.UNSIGNED_INT=5125,pi.FLOAT=5126,pi.HALF_FLOAT=36193,pi.UNSIGNED_INT_24_8_WEBGL=34042,pi.DEPTH_COMPONENT=6402,pi.DEPTH_STENCIL=34041,pi.ALPHA=6406,pi.RGB=6407,pi.RGBA=6408,pi.LUMINANCE=6409,pi.LUMINANCE_ALPHA=6410,pi.SRGB=35904,pi.SRGB_ALPHA=35906,pi.COMPRESSED_RGB_S3TC_DXT1_EXT=33776,pi.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777,pi.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778,pi.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779,pi.NEAREST=9728,pi.LINEAR=9729,pi.NEAREST_MIPMAP_NEAREST=9984,pi.LINEAR_MIPMAP_NEAREST=9985,pi.NEAREST_MIPMAP_LINEAR=9986,pi.LINEAR_MIPMAP_LINEAR=9987,pi.REPEAT=10497,pi.CLAMP_TO_EDGE=33071,pi.MIRRORED_REPEAT=33648;const hr=pi;var Yl=u3.extend({skeleton:null,joints:null},function(){this.joints||(this.joints=[])},{offsetMatrix:null,isInstancedMesh:function(){return!1},isSkinnedMesh:function(){return!!(this.skeleton&&this.joints&&this.joints.length>0)},clone:function(){var e=u3.prototype.clone.call(this);return e.skeleton=this.skeleton,this.joints&&(e.joints=this.joints.slice()),e}});Yl.POINTS=0,Yl.LINES=1,Yl.LINE_LOOP=2,Yl.LINE_STRIP=3,Yl.TRIANGLES=4,Yl.TRIANGLE_STRIP=5,Yl.TRIANGLE_FAN=6,Yl.BACK=1029,Yl.FRONT=1028,Yl.FRONT_AND_BACK=1032,Yl.CW=2304,Yl.CCW=2305;const Hg=Yl;var SI={isPowerOfTwo:function(e){return 0==(e&e-1)},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))}};const gW=SI;var vW=gW.isPowerOfTwo;function mW(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))}var f3=hr.extend(function(){return{image:null,pixels:null,mipmaps:[],convertToPOT:!1}},{textureType:"texture2D",update:function(e){var n=e.gl;n.bindTexture(n.TEXTURE_2D,this._cache.get("webgl_texture")),this.updateCommon(e);var t=this.format,r=this.type,i=!(!this.convertToPOT||this.mipmaps.length||!this.image||this.wrapS!==hr.REPEAT&&this.wrapT!==hr.REPEAT||!this.NPOT);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,i?this.wrapS:this.getAvailableWrapS()),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,i?this.wrapT:this.getAvailableWrapT()),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,i?this.magFilter:this.getAvailableMagFilter()),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,i?this.minFilter:this.getAvailableMinFilter());var o=e.getGLExtension("EXT_texture_filter_anisotropic");if(o&&this.anisotropic>1&&n.texParameterf(n.TEXTURE_2D,o.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),36193===r&&(e.getGLExtension("OES_texture_half_float")||(r=5126)),this.mipmaps.length)for(var f=this.width,g=this.height,_=0;_<this.mipmaps.length;_++)this._updateTextureData(n,this.mipmaps[_],_,f,g,t,r,!1),f/=2,g/=2;else this._updateTextureData(n,this,0,this.width,this.height,t,r,i),this.useMipmap&&(!this.NPOT||i)&&n.generateMipmap(n.TEXTURE_2D);n.bindTexture(n.TEXTURE_2D,null)},_updateTextureData:function(e,n,t,r,i,o,d,f){if(n.image){var g=n.image;f&&(this._potCanvas=function kte(e,n){var t=mW(e.width),r=mW(e.height);return(n=n||document.createElement("canvas")).width=t,n.height=r,n.getContext("2d").drawImage(e.image,0,0,t,r),n}(this,this._potCanvas),g=this._potCanvas),e.texImage2D(e.TEXTURE_2D,t,o,o,d,g)}else o<=hr.COMPRESSED_RGBA_S3TC_DXT5_EXT&&o>=hr.COMPRESSED_RGB_S3TC_DXT1_EXT?e.compressedTexImage2D(e.TEXTURE_2D,t,o,r,i,0,n.pixels):e.texImage2D(e.TEXTURE_2D,t,o,r,i,0,o,d,n.pixels)},generateMipmap:function(e){var n=e.gl;this.useMipmap&&!this.NPOT&&(n.bindTexture(n.TEXTURE_2D,this._cache.get("webgl_texture")),n.generateMipmap(n.TEXTURE_2D))},isPowerOfTwo:function(){return vW(this.width)&&vW(this.height)},isRenderable:function(){return this.image?this.image.width>0&&this.image.height>0:!(!this.width||!this.height)},bind:function(e){e.gl.bindTexture(e.gl.TEXTURE_2D,this.getWebGLTexture(e))},unbind:function(e){e.gl.bindTexture(e.gl.TEXTURE_2D,null)},load:function(e,n){var t=oo.createImage();n&&(t.crossOrigin=n);var r=this;return t.onload=function(){r.dirty(),r.trigger("success",r)},t.onerror=function(){r.trigger("error",r)},t.src=e,this.image=t,this}});Object.defineProperty(f3.prototype,"width",{get:function(){return this.image?this.image.width:this._width},set:function(e){this.image?console.warn("Texture from image can't set width"):(this._width!==e&&this.dirty(),this._width=e)}}),Object.defineProperty(f3.prototype,"height",{get:function(){return this.image?this.image.height:this._height},set:function(e){this.image?console.warn("Texture from image can't set height"):(this._height!==e&&this.dirty(),this._height=e)}});const $r=f3;function _W(e){return{byte:oo.Int8Array,ubyte:oo.Uint8Array,short:oo.Int16Array,ushort:oo.Uint16Array}[e]||oo.Float32Array}function p3(e){return"attr_"+e}function Oy(e,n,t,r){switch(this.name=e,this.type=n,this.size=t,this.semantic=r||"",this.value=null,t){case 1:this.get=function(i){return this.value[i]},this.set=function(i,o){this.value[i]=o},this.copy=function(i,o){this.value[i]=this.value[i]};break;case 2:this.get=function(i,o){var d=this.value;return o[0]=d[2*i],o[1]=d[2*i+1],o},this.set=function(i,o){var d=this.value;d[2*i]=o[0],d[2*i+1]=o[1]},this.copy=function(i,o){var d=this.value;d[i*=2]=d[o*=2],d[i+1]=d[o+1]};break;case 3:this.get=function(i,o){var d=3*i,f=this.value;return o[0]=f[d],o[1]=f[d+1],o[2]=f[d+2],o},this.set=function(i,o){var d=3*i,f=this.value;f[d]=o[0],f[d+1]=o[1],f[d+2]=o[2]},this.copy=function(i,o){var d=this.value;d[i*=3]=d[o*=3],d[i+1]=d[o+1],d[i+2]=d[o+2]};break;case 4:this.get=function(i,o){var d=this.value,f=4*i;return o[0]=d[f],o[1]=d[f+1],o[2]=d[f+2],o[3]=d[f+3],o},this.set=function(i,o){var d=this.value,f=4*i;d[f]=o[0],d[f+1]=o[1],d[f+2]=o[2],d[f+3]=o[3]},this.copy=function(i,o){var d=this.value;d[i*=4]=d[o*=4],d[i+1]=d[o+1],d[i+2]=d[o+2],d[i+3]=d[o+3]}}}function yW(e,n,t,r,i){this.name=e,this.type=n,this.buffer=t,this.size=r,this.semantic=i,this.symbol="",this.needsRemove=!1}function bW(e){this.buffer=e,this.count=0}Oy.prototype.init=function(e){if(!this.value||this.value.length!==e*this.size){var n=_W(this.type);this.value=new n(e*this.size)}},Oy.prototype.fromArray=function(e){var t,n=_W(this.type);if(e[0]&&e[0].length){var r=0,i=this.size;t=new n(e.length*i);for(var o=0;o<e.length;o++)for(var d=0;d<i;d++)t[r++]=e[o][d]}else t=new n(e);this.value=t},Oy.prototype.clone=function(e){var n=new Oy(this.name,this.type,this.size,this.semantic);return e&&console.warn("todo"),n};var oh=Gs.extend(function(){return{attributes:{},indices:null,dynamic:!0,_enabledAttributes:null,__used:0}},function(){this._cache=new h3,this._attributeList=Object.keys(this.attributes),this.__vaoCache={}},{mainAttribute:"",pick:null,pickByRay:null,dirty:function(){for(var e=this.getEnabledAttributes(),n=0;n<e.length;n++)this.dirtyAttribute(e[n]);this.dirtyIndices(),this._enabledAttributes=null,this._cache.dirty("any")},dirtyIndices:function(){this._cache.dirtyAll("indices")},dirtyAttribute:function(e){this._cache.dirtyAll(p3(e)),this._cache.dirtyAll("attributes")},getTriangleIndices:function(e,n){if(e<this.triangleCount&&e>=0){n||(n=[]);var t=this.indices;return n[0]=t[3*e],n[1]=t[3*e+1],n[2]=t[3*e+2],n}},setTriangleIndices:function(e,n){var t=this.indices;t[3*e]=n[0],t[3*e+1]=n[1],t[3*e+2]=n[2]},isUseIndices:function(){return!!this.indices},initIndicesFromArray:function(e){var n,t=this.vertexCount>65535?oo.Uint32Array:oo.Uint16Array;if(e[0]&&e[0].length){var r=0;n=new t(3*e.length);for(var o=0;o<e.length;o++)for(var d=0;d<3;d++)n[r++]=e[o][d]}else n=new t(e);this.indices=n},createAttribute:function(e,n,t,r){var i=new Oy(e,n,t,r);return this.attributes[e]&&this.removeAttribute(e),this.attributes[e]=i,this._attributeList.push(e),i},removeAttribute:function(e){var n=this._attributeList,t=n.indexOf(e);return t>=0&&(n.splice(t,1),delete this.attributes[e],!0)},getAttribute:function(e){return this.attributes[e]},getEnabledAttributes:function(){var e=this._enabledAttributes,n=this._attributeList;if(e)return e;for(var t=[],r=this.vertexCount,i=0;i<n.length;i++){var o=n[i],d=this.attributes[o];d.value&&d.value.length===r*d.size&&t.push(o)}return this._enabledAttributes=t,t},getBufferChunks:function(e){var n=this._cache;n.use(e.__uid__);var t=n.isDirty("attributes"),r=n.isDirty("indices");if(t||r){this._updateBuffer(e.gl,t,r);for(var i=this.getEnabledAttributes(),o=0;o<i.length;o++)n.fresh(p3(i[o]));n.fresh("attributes"),n.fresh("indices")}return n.fresh("any"),n.get("chunks")},_updateBuffer:function(e,n,t){var r=this._cache,i=r.get("chunks"),o=!1;i||((i=[])[0]={attributeBuffers:[],indicesBuffer:null},r.put("chunks",i),o=!0);var d=i[0],f=d.attributeBuffers,g=d.indicesBuffer;if(n||o){var _=this.getEnabledAttributes(),C={};if(!o)for(var S=0;S<f.length;S++)C[f[S].name]=f[S];for(var k=0;k<_.length;k++){var pe,Me,z=_[k],te=this.attributes[z];o||(pe=C[z]),Me=pe?pe.buffer:e.createBuffer(),r.isDirty(p3(z))&&(e.bindBuffer(e.ARRAY_BUFFER,Me),e.bufferData(e.ARRAY_BUFFER,te.value,this.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW)),f[k]=new yW(z,te.type,Me,te.size,te.semantic)}for(S=k;S<f.length;S++)e.deleteBuffer(f[S].buffer);f.length=k}this.isUseIndices()&&(t||o)&&(g||(g=new bW(e.createBuffer()),d.indicesBuffer=g),g.count=this.indices.length,e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,g.buffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,this.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW))},dispose:function(e){var n=this._cache;n.use(e.__uid__);var t=n.get("chunks");if(t)for(var r=0;r<t.length;r++){for(var i=t[r],o=0;o<i.attributeBuffers.length;o++)e.gl.deleteBuffer(i.attributeBuffers[o].buffer);i.indicesBuffer&&e.gl.deleteBuffer(i.indicesBuffer.buffer)}if(this.__vaoCache){var f=e.getGLExtension("OES_vertex_array_object");for(var g in this.__vaoCache){var _=this.__vaoCache[g].vao;_&&f.deleteVertexArrayOES(_)}}this.__vaoCache={},n.deleteContext(e.__uid__)}});Object.defineProperty&&(Object.defineProperty(oh.prototype,"vertexCount",{enumerable:!1,get:function(){var e=this.attributes[this.mainAttribute];return e||(e=this.attributes[this._attributeList[0]]),e&&e.value?e.value.length/e.size:0}}),Object.defineProperty(oh.prototype,"triangleCount",{enumerable:!1,get:function(){var e=this.indices;return e?e.length/3:0}})),oh.STATIC_DRAW=35044,oh.DYNAMIC_DRAW=35048,oh.STREAM_DRAW=35040,oh.AttributeBuffer=yW,oh.IndicesBuffer=bW,oh.Attribute=Oy;const Ug=oh;var Zs=Et.create,ky=Et.add,Gg=Et.set,ed=Ug.Attribute,Wg=Ug.extend(function(){return{attributes:{position:new ed("position","float",3,"POSITION"),texcoord0:new ed("texcoord0","float",2,"TEXCOORD_0"),texcoord1:new ed("texcoord1","float",2,"TEXCOORD_1"),normal:new ed("normal","float",3,"NORMAL"),tangent:new ed("tangent","float",4,"TANGENT"),color:new ed("color","float",4,"COLOR"),weight:new ed("weight","float",3,"WEIGHT"),joint:new ed("joint","float",4,"JOINT"),barycentric:new ed("barycentric","float",3,null)},boundingBox:null}},{mainAttribute:"position",updateBoundingBox:function(){var e=this.boundingBox;e||(e=this.boundingBox=new js);var n=this.attributes.position.value;if(n&&n.length){var t=e.min,r=e.max,i=t.array,o=r.array;Et.set(i,n[0],n[1],n[2]),Et.set(o,n[0],n[1],n[2]);for(var d=3;d<n.length;){var f=n[d++],g=n[d++],_=n[d++];f<i[0]&&(i[0]=f),g<i[1]&&(i[1]=g),_<i[2]&&(i[2]=_),f>o[0]&&(o[0]=f),g>o[1]&&(o[1]=g),_>o[2]&&(o[2]=_)}t._dirty=!0,r._dirty=!0}},generateVertexNormals:function(){if(this.vertexCount){var e=this.indices,n=this.attributes,t=n.position.value,r=n.normal.value;if(r&&r.length===t.length)for(var i=0;i<r.length;i++)r[i]=0;else r=n.normal.value=new oo.Float32Array(t.length);for(var k,z,te,o=Zs(),d=Zs(),f=Zs(),g=Zs(),_=Zs(),C=Zs(),S=e?e.length:this.vertexCount,pe=0;pe<S;)for(e?(k=e[pe++],z=e[pe++],te=e[pe++]):(k=pe++,z=pe++,te=pe++),Gg(o,t[3*k],t[3*k+1],t[3*k+2]),Gg(d,t[3*z],t[3*z+1],t[3*z+2]),Gg(f,t[3*te],t[3*te+1],t[3*te+2]),Et.sub(g,o,d),Et.sub(_,d,f),Et.cross(C,g,_),i=0;i<3;i++)r[3*k+i]=r[3*k+i]+C[i],r[3*z+i]=r[3*z+i]+C[i],r[3*te+i]=r[3*te+i]+C[i];for(i=0;i<r.length;)Gg(C,r[i],r[i+1],r[i+2]),Et.normalize(C,C),r[i++]=C[0],r[i++]=C[1],r[i++]=C[2];this.dirty()}},generateFaceNormals:function(){if(this.vertexCount){this.isUniqueVertex()||this.generateUniqueVertex();var e=this.indices,n=this.attributes,t=n.position.value,r=n.normal.value,i=Zs(),o=Zs(),d=Zs(),f=Zs(),g=Zs(),_=Zs();r||(r=n.normal.value=new Float32Array(t.length));for(var S,k,z,C=e?e.length:this.vertexCount,te=0;te<C;){e?(S=e[te++],k=e[te++],z=e[te++]):(S=te++,k=te++,z=te++),Gg(i,t[3*S],t[3*S+1],t[3*S+2]),Gg(o,t[3*k],t[3*k+1],t[3*k+2]),Gg(d,t[3*z],t[3*z+1],t[3*z+2]),Et.sub(f,i,o),Et.sub(g,o,d),Et.cross(_,f,g),Et.normalize(_,_);for(var pe=0;pe<3;pe++)r[3*S+pe]=_[pe],r[3*k+pe]=_[pe],r[3*z+pe]=_[pe]}this.dirty()}},generateTangents:function(){if(this.vertexCount){var e=this.vertexCount,n=this.attributes;n.tangent.value||(n.tangent.value=new Float32Array(4*e));var t=n.texcoord0.value,r=n.position.value,i=n.tangent.value,o=n.normal.value;if(!t)return void console.warn("Geometry without texcoords can't generate tangents.");for(var d=[],f=[],g=0;g<e;g++)d[g]=[0,0,0],f[g]=[0,0,0];var z,te,pe,_=[0,0,0],C=[0,0,0],S=this.indices,k=S?S.length:this.vertexCount;for(g=0;g<k;){S?(z=S[g++],te=S[g++],pe=S[g++]):(z=g++,te=g++,pe=g++);var Me=t[2*z],Oe=t[2*z+1],at=r[3*z],Ft=r[3*z+1],pn=r[3*z+2],wn=r[3*te]-at,Gt=r[3*pe]-at,ln=r[3*te+1]-Ft,Xt=r[3*pe+1]-Ft,Xn=r[3*te+2]-pn,In=r[3*pe+2]-pn,ai=t[2*te]-Me,Nr=t[2*pe]-Me,_i=t[2*te+1]-Oe,Mr=t[2*pe+1]-Oe,Jr=1/(ai*Mr-_i*Nr);_[0]=(Mr*wn-_i*Gt)*Jr,_[1]=(Mr*ln-_i*Xt)*Jr,_[2]=(Mr*Xn-_i*In)*Jr,C[0]=(ai*Gt-Nr*wn)*Jr,C[1]=(ai*Xt-Nr*ln)*Jr,C[2]=(ai*In-Nr*Xn)*Jr,ky(d[z],d[z],_),ky(d[te],d[te],_),ky(d[pe],d[pe],_),ky(f[z],f[z],C),ky(f[te],f[te],C),ky(f[pe],f[pe],C)}var qa=Zs(),oi=Zs(),Zi=Zs();for(g=0;g<e;g++){Zi[0]=o[3*g],Zi[1]=o[3*g+1],Zi[2]=o[3*g+2];var Yi=d[g];Et.scale(qa,Zi,Et.dot(Zi,Yi)),Et.sub(qa,Yi,qa),Et.normalize(qa,qa),Et.cross(oi,Zi,Yi),i[4*g]=qa[0],i[4*g+1]=qa[1],i[4*g+2]=qa[2],i[4*g+3]=Et.dot(oi,f[g])<0?-1:1}this.dirty()}},isUniqueVertex:function(){return!this.isUseIndices()||this.vertexCount===this.indices.length},generateUniqueVertex:function(){if(this.vertexCount&&this.indices){this.indices.length>65535&&(this.indices=new oo.Uint32Array(this.indices));for(var e=this.attributes,n=this.indices,t=this.getEnabledAttributes(),r={},i=0;i<t.length;i++)r[o=t[i]]=e[o].value,e[o].init(this.indices.length);for(var d=0,f=0;f<n.length;f++){var g=n[f];for(i=0;i<t.length;i++)for(var o,_=e[o=t[i]].value,C=e[o].size,S=0;S<C;S++)_[d*C+S]=r[o][g*C+S];n[f]=d,d++}this.dirty()}},generateBarycentric:function(){if(this.vertexCount){this.isUniqueVertex()||this.generateUniqueVertex();var e=this.attributes,n=e.barycentric.value,t=this.indices;if(!n||n.length!==3*t.length){n=e.barycentric.value=new Float32Array(3*t.length);for(var r=0;r<(t?t.length:this.vertexCount/3);)for(var i=0;i<3;i++)n[3*(t?t[r++]:3*r+i)+i]=1;this.dirty()}}},applyTransform:function(e){var n=this.attributes,t=n.position.value,r=n.normal.value,i=n.tangent.value;e=e.array;var o=An.create();An.invert(o,e),An.transpose(o,o);var d=Et.transformMat4,f=Et.forEach;f(t,3,0,null,d,e),r&&f(r,3,0,null,d,o),i&&f(i,4,0,null,d,o),this.boundingBox&&this.updateBoundingBox()},dispose:function(e){var n=this._cache;n.use(e.__uid__);var t=n.get("chunks");if(t)for(var r=0;r<t.length;r++){for(var i=t[r],o=0;o<i.attributeBuffers.length;o++)e.gl.deleteBuffer(i.attributeBuffers[o].buffer);i.indicesBuffer&&e.gl.deleteBuffer(i.indicesBuffer.buffer)}if(this.__vaoCache){var f=e.getGLExtension("OES_vertex_array_object");for(var g in this.__vaoCache){var _=this.__vaoCache[g].vao;_&&f.deleteVertexArrayOES(_)}}this.__vaoCache={},n.deleteContext(e.__uid__)}});Wg.STATIC_DRAW=Ug.STATIC_DRAW,Wg.DYNAMIC_DRAW=Ug.DYNAMIC_DRAW,Wg.STREAM_DRAW=Ug.STREAM_DRAW,Wg.AttributeBuffer=Ug.AttributeBuffer,Wg.IndicesBuffer=Ug.IndicesBuffer,Wg.Attribute=ed;const Di=Wg;var uu="uniform vec3 ",QC="uniform float ",Ny="@export clay.header.",Fy="@end",Qo=":unconfigurable;";const Fte=[Ny+"directional_light",uu+"directionalLightDirection[DIRECTIONAL_LIGHT_COUNT]"+Qo,uu+"directionalLightColor[DIRECTIONAL_LIGHT_COUNT]"+Qo,Fy,Ny+"ambient_light",uu+"ambientLightColor[AMBIENT_LIGHT_COUNT]"+Qo,Fy,Ny+"ambient_sh_light",uu+"ambientSHLightColor[AMBIENT_SH_LIGHT_COUNT]"+Qo,uu+"ambientSHLightCoefficients[AMBIENT_SH_LIGHT_COUNT * 9]"+Qo,"vec3 calcAmbientSHLight(int idx, vec3 N) {\n int offset = 9 * idx;\n return ambientSHLightCoefficients[0]\n + ambientSHLightCoefficients[1] * N.x\n + ambientSHLightCoefficients[2] * N.y\n + ambientSHLightCoefficients[3] * N.z\n + ambientSHLightCoefficients[4] * N.x * N.z\n + ambientSHLightCoefficients[5] * N.z * N.y\n + ambientSHLightCoefficients[6] * N.y * N.x\n + ambientSHLightCoefficients[7] * (3.0 * N.z * N.z - 1.0)\n + ambientSHLightCoefficients[8] * (N.x * N.x - N.y * N.y);\n}",Fy,Ny+"ambient_cubemap_light",uu+"ambientCubemapLightColor[AMBIENT_CUBEMAP_LIGHT_COUNT]"+Qo,"uniform samplerCube ambientCubemapLightCubemap[AMBIENT_CUBEMAP_LIGHT_COUNT]"+Qo,"uniform sampler2D ambientCubemapLightBRDFLookup[AMBIENT_CUBEMAP_LIGHT_COUNT]"+Qo,Fy,Ny+"point_light",uu+"pointLightPosition[POINT_LIGHT_COUNT]"+Qo,QC+"pointLightRange[POINT_LIGHT_COUNT]"+Qo,uu+"pointLightColor[POINT_LIGHT_COUNT]"+Qo,Fy,Ny+"spot_light",uu+"spotLightPosition[SPOT_LIGHT_COUNT]"+Qo,uu+"spotLightDirection[SPOT_LIGHT_COUNT]"+Qo,QC+"spotLightRange[SPOT_LIGHT_COUNT]"+Qo,QC+"spotLightUmbraAngleCosine[SPOT_LIGHT_COUNT]"+Qo,QC+"spotLightPenumbraAngleCosine[SPOT_LIGHT_COUNT]"+Qo,QC+"spotLightFalloffFactor[SPOT_LIGHT_COUNT]"+Qo,uu+"spotLightColor[SPOT_LIGHT_COUNT]"+Qo,Fy].join("\n");Un.import(Fte);var Bte=Ju.extend(function(){return{color:[1,1,1],intensity:1,castShadow:!0,shadowResolution:512,group:0}},{type:"",clone:function(){var e=Ju.prototype.clone.call(this);return e.color=Array.prototype.slice.call(this.color),e.intensity=this.intensity,e.castShadow=this.castShadow,e.shadowResolution=this.shadowResolution,e}});const du=Bte;var DI=function(e,n){this.normal=e||new Ln(0,1,0),this.distance=n||0};DI.prototype={constructor:DI,distanceToPoint:function(e){return Et.dot(e.array,this.normal.array)-this.distance},projectPoint:function(e,n){n||(n=new Ln);var t=this.distanceToPoint(e);return Et.scaleAndAdd(n.array,e.array,this.normal.array,-t),n._dirty=!0,n},normalize:function(){var e=1/Et.len(this.normal.array);Et.scale(this.normal.array,e),this.distance*=e},intersectFrustum:function(e){for(var n=e.vertices,t=this.normal.array,r=Et.dot(n[0].array,t)>this.distance,i=1;i<8;i++)if(Et.dot(n[i].array,t)>this.distance!=r)return!0},intersectLine:function(){var e=Et.create();return function(n,t,r){var i=this.distanceToPoint(n),o=this.distanceToPoint(t);if(i>0&&o>0||i<0&&o<0)return null;var d=this.normal.array,f=this.distance,g=n.array;Et.sub(e,t.array,n.array),Et.normalize(e,e);var _=Et.dot(d,e);if(0===_)return null;r||(r=new Ln);var C=(Et.dot(d,g)-f)/_;return Et.scaleAndAdd(r.array,g,e,-C),r._dirty=!0,r}}(),applyTransform:function(){var e=An.create(),n=Wn.create(),t=Wn.create();return t[3]=1,function(r){r=r.array,Et.scale(t,this.normal.array,this.distance),Wn.transformMat4(t,t,r),this.distance=Et.dot(t,this.normal.array),An.invert(e,r),An.transpose(e,e),n[3]=0,Et.copy(n,this.normal.array),Wn.transformMat4(n,n,e),Et.copy(this.normal.array,n)}}(),copy:function(e){Et.copy(this.normal.array,e.normal.array),this.normal._dirty=!0,this.distance=e.distance},clone:function(){var e=new DI;return e.copy(this),e}};const xW=DI;var Ka=Et.set,CW=Et.copy,wW=Et.transformMat4,g3=Math.min,v3=Math.max,SW=function(){this.planes=[];for(var e=0;e<6;e++)this.planes.push(new xW);for(this.boundingBox=new js,this.vertices=[],e=0;e<8;e++)this.vertices[e]=Et.fromValues(0,0,0)};SW.prototype={setFromProjection:function(e){var n=this.planes,t=e.array,r=t[0],i=t[1],o=t[2],d=t[3],f=t[4],g=t[5],_=t[6],C=t[7],S=t[8],k=t[9],z=t[10],te=t[11],pe=t[12],Me=t[13],Re=t[14],Fe=t[15];Ka(n[0].normal.array,d-r,C-f,te-S),n[0].distance=-(Fe-pe),n[0].normalize(),Ka(n[1].normal.array,d+r,C+f,te+S),n[1].distance=-(Fe+pe),n[1].normalize(),Ka(n[2].normal.array,d+i,C+g,te+k),n[2].distance=-(Fe+Me),n[2].normalize(),Ka(n[3].normal.array,d-i,C-g,te-k),n[3].distance=-(Fe-Me),n[3].normalize(),Ka(n[4].normal.array,d-o,C-_,te-z),n[4].distance=-(Fe-Re),n[4].normalize(),Ka(n[5].normal.array,d+o,C+_,te+z),n[5].distance=-(Fe+Re),n[5].normalize();var Oe=this.boundingBox,Be=this.vertices;if(0===Fe){var it=g/r,at=-Re/(z-1),Ct=-Re/(z+1),mt=-Ct/g,Ft=-at/g;Oe.min.set(-mt*it,-mt,Ct),Oe.max.set(mt*it,mt,at),Ka(Be[0],-mt*it,-mt,Ct),Ka(Be[1],-mt*it,mt,Ct),Ka(Be[2],mt*it,-mt,Ct),Ka(Be[3],mt*it,mt,Ct),Ka(Be[4],-Ft*it,-Ft,at),Ka(Be[5],-Ft*it,Ft,at),Ka(Be[6],Ft*it,-Ft,at),Ka(Be[7],Ft*it,Ft,at)}else{var nn=(-1-pe)/r,$t=(1-pe)/r,pn=(1-Me)/g,mn=(-1-Me)/g,sn=(-1-Re)/z,wn=(1-Re)/z;Oe.min.set(Math.min(nn,$t),Math.min(mn,pn),Math.min(wn,sn)),Oe.max.set(Math.max($t,nn),Math.max(pn,mn),Math.max(sn,wn));var Gt=Oe.min.array,ln=Oe.max.array;Ka(Be[0],Gt[0],Gt[1],Gt[2]),Ka(Be[1],Gt[0],ln[1],Gt[2]),Ka(Be[2],ln[0],Gt[1],Gt[2]),Ka(Be[3],ln[0],ln[1],Gt[2]),Ka(Be[4],Gt[0],Gt[1],ln[2]),Ka(Be[5],Gt[0],ln[1],ln[2]),Ka(Be[6],ln[0],Gt[1],ln[2]),Ka(Be[7],ln[0],ln[1],ln[2])}},getTransformedBoundingBox:function(){var e=Et.create();return function(n,t){var r=this.vertices,i=t.array,o=n.min,d=n.max,f=o.array,g=d.array,_=r[0];wW(e,_,i),CW(f,e),CW(g,e);for(var C=1;C<8;C++)wW(e,_=r[C],i),f[0]=g3(e[0],f[0]),f[1]=g3(e[1],f[1]),f[2]=g3(e[2],f[2]),g[0]=v3(e[0],g[0]),g[1]=v3(e[1],g[1]),g[2]=v3(e[2],g[2]);return o._dirty=!0,d._dirty=!0,n}}()};const m3=SW;var Vte=Ju.extend(function(){return{projectionMatrix:new ir,invProjectionMatrix:new ir,viewMatrix:new ir,frustum:new m3}},function(){this.update(!0)},{update:function(e){Ju.prototype.update.call(this,e),ir.invert(this.viewMatrix,this.worldTransform),this.updateProjectionMatrix(),ir.invert(this.invProjectionMatrix,this.projectionMatrix),this.frustum.setFromProjection(this.projectionMatrix)},setViewMatrix:function(e){ir.copy(this.viewMatrix,e),ir.invert(this.worldTransform,e),this.decomposeWorldTransform()},decomposeProjectionMatrix:function(){},setProjectionMatrix:function(e){ir.copy(this.projectionMatrix,e),ir.invert(this.invProjectionMatrix,e),this.decomposeProjectionMatrix()},updateProjectionMatrix:function(){},castRay:function(){var e=Wn.create();return function(n,t){var r=void 0!==t?t:new _I,i=n.array[0],o=n.array[1];return Wn.set(e,i,o,-1,1),Wn.transformMat4(e,e,this.invProjectionMatrix.array),Wn.transformMat4(e,e,this.worldTransform.array),Et.scale(r.origin.array,e,1/e[3]),Wn.set(e,i,o,1,1),Wn.transformMat4(e,e,this.invProjectionMatrix.array),Wn.transformMat4(e,e,this.worldTransform.array),Et.scale(e,e,1/e[3]),Et.sub(r.direction.array,e,r.origin.array),Et.normalize(r.direction.array,r.direction.array),r.direction._dirty=!0,r.origin._dirty=!0,r}}()});const By=Vte;var zte=An.create(),DW=An.create(),_3={};function Hte(e){var n=[],t=Object.keys(e);t.sort();for(var r=0;r<t.length;r++){var i=t[r];n.push(i+" "+e[i])}var o=n.join("\n");if(_3[o])return _3[o];var d=$o.genGUID();return _3[o]=d,d}function MI(){this.opaque=[],this.transparent=[],this._opaqueCount=0,this._transparentCount=0}MI.prototype.startCount=function(){this._opaqueCount=0,this._transparentCount=0},MI.prototype.add=function(e,n){n?this.transparent[this._transparentCount++]=e:this.opaque[this._opaqueCount++]=e},MI.prototype.endCount=function(){this.transparent.length=this._transparentCount,this.opaque.length=this._opaqueCount};var Ute=Ju.extend(function(){return{material:null,lights:[],viewBoundingBoxLastFrame:new js,shadowUniforms:{},_cameraList:[],_lightUniforms:{},_previousLightNumber:{},_lightNumber:{},_lightProgramKeys:{},_nodeRepository:{},_renderLists:new G8(20)}},function(){this._scene=this},{addToScene:function(e){e instanceof By?(this._cameraList.length>0&&console.warn("Found multiple camera in one scene. Use the fist one."),this._cameraList.push(e)):e instanceof du&&this.lights.push(e),e.name&&(this._nodeRepository[e.name]=e)},removeFromScene:function(e){var n;e instanceof By?(n=this._cameraList.indexOf(e))>=0&&this._cameraList.splice(n,1):e instanceof du&&(n=this.lights.indexOf(e))>=0&&this.lights.splice(n,1),e.name&&delete this._nodeRepository[e.name]},getNode:function(e){return this._nodeRepository[e]},setMainCamera:function(e){var n=this._cameraList.indexOf(e);n>=0&&this._cameraList.splice(n,1),this._cameraList.unshift(e)},getMainCamera:function(){return this._cameraList[0]},getLights:function(){return this.lights},updateLights:function(){var e=this.lights;this._previousLightNumber=this._lightNumber;for(var n={},t=0;t<e.length;t++){var r=e[t];if(!r.invisible){var i=r.group;n[i]||(n[i]={}),n[i][r.type]=n[i][r.type]||0,n[i][r.type]++}}for(var o in this._lightNumber=n,n)this._lightProgramKeys[o]=Hte(n[o]);this._updateLightUniforms()},cloneNode:function(e){var n=e.clone(),t={};return function r(i,o){t[i.__uid__]=o;for(var d=0;d<i._children.length;d++)r(i._children[d],o._children[d])}(e,n),n.traverse(function(i){i.skeleton&&(i.skeleton=i.skeleton.clone(t)),i.material&&(i.material=i.material.clone())}),n},updateRenderList:function(e,n){var t=e.__uid__,r=this._renderLists.get(t);return r||(r=new MI,this._renderLists.put(t,r)),r.startCount(),n&&(this.viewBoundingBoxLastFrame.min.set(1/0,1/0,1/0),this.viewBoundingBoxLastFrame.max.set(-1/0,-1/0,-1/0)),this._doUpdateRenderList(this,e,this.material&&this.material.transparent||!1,r,n),r.endCount(),r},getRenderList:function(e){return this._renderLists.get(e.__uid__)},_doUpdateRenderList:function(e,n,t,r,i){if(!e.invisible)for(var o=0;o<e._children.length;o++){var d=e._children[o];if(d.isRenderable()){var f=d.isSkinnedMesh()?zte:d.worldTransform.array,g=d.geometry;An.multiplyAffine(DW,n.viewMatrix.array,f),(i&&!g.boundingBox||!this.isFrustumCulled(d,n,DW))&&r.add(d,d.material.transparent||t)}d._children.length>0&&this._doUpdateRenderList(d,n,t,r,i)}},isFrustumCulled:function(){var e=new js,n=new ir;return function(t,r,i){var o=t.boundingBox;if(o||(o=t.skeleton&&t.skeleton.boundingBox?t.skeleton.boundingBox:t.geometry.boundingBox),!o)return!1;if(n.array=i,e.transformFrom(o,n),t.castShadow&&this.viewBoundingBoxLastFrame.union(e),t.frustumCulling){if(!e.intersectBoundingBox(r.frustum.boundingBox))return!0;n.array=r.projectionMatrix.array,e.max.array[2]>0&&e.min.array[2]<0&&(e.max.array[2]=-1e-20),e.applyProjection(n);var d=e.min.array,f=e.max.array;if(f[0]<-1||d[0]>1||f[1]<-1||d[1]>1||f[2]<-1||d[2]>1)return!0}return!1}}(),_updateLightUniforms:function(){var e=this.lights;e.sort(Gte);var n=this._lightUniforms;for(var t in n)for(var r in n[t])n[t][r].value.length=0;for(var i=0;i<e.length;i++){var o=e[i];if(!o.invisible)for(var r in t=o.group,o.uniformTemplates){var d=o.uniformTemplates[r],f=d.value(o);if(null!=f){n[t]||(n[t]={}),n[t][r]||(n[t][r]={type:"",value:[]});var g=n[t][r];switch(g.type=d.type+"v",d.type){case"1i":case"1f":case"t":g.value.push(f);break;case"2f":case"3f":case"4f":for(var _=0;_<f.length;_++)g.value.push(f[_]);break;default:console.error("Unkown light uniform type "+d.type)}}}}},getLightGroups:function(){var e=[];for(var n in this._lightNumber)e.push(n);return e},getNumberChangedLightGroups:function(){var e=[];for(var n in this._lightNumber)this.isLightNumberChanged(n)&&e.push(n);return e},isLightNumberChanged:function(e){var n=this._previousLightNumber,t=this._lightNumber;for(var r in t[e])if(!n[e]||t[e][r]!==n[e][r])return!0;for(var r in n[e])if(!t[e]||t[e][r]!==n[e][r])return!0;return!1},getLightsNumbers:function(e){return this._lightNumber[e]},getProgramKey:function(e){return this._lightProgramKeys[e]},setLightUniforms:function(){function e(n,t,r){for(var i in n){var o=n[i];if("tv"===o.type){if(!t.hasUniform(i))continue;for(var d=[],f=0;f<o.value.length;f++){var _=t.takeCurrentTextureSlot(r,o.value[f]);d.push(_)}t.setUniform(r.gl,"1iv",i,d)}else t.setUniform(r.gl,o.type,i,o.value)}}return function(n,t,r){e(this._lightUniforms[t],n,r),e(this.shadowUniforms,n,r)}}(),dispose:function(){this.material=null,this._opaqueList=[],this._transparentList=[],this.lights=[],this._lightUniforms={},this._lightNumber={},this._nodeRepository={}}});function Gte(e,n){if(n.castShadow&&!e.castShadow)return!0}const Df=Ute;var Wte=H(7148),TI=gW.isPowerOfTwo,jte=["px","nx","py","ny","pz","nz"],y3=hr.extend(function(){return{image:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},pixels:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},mipmaps:[]}},{textureType:"textureCube",update:function(e){var n=e.gl;n.bindTexture(n.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),this.updateCommon(e);var t=this.format,r=this.type;n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_WRAP_S,this.getAvailableWrapS()),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_WRAP_T,this.getAvailableWrapT()),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_MAG_FILTER,this.getAvailableMagFilter()),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_MIN_FILTER,this.getAvailableMinFilter());var i=e.getGLExtension("EXT_texture_filter_anisotropic");if(i&&this.anisotropic>1&&n.texParameterf(n.TEXTURE_CUBE_MAP,i.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),36193===r&&(e.getGLExtension("OES_texture_half_float")||(r=5126)),this.mipmaps.length)for(var d=this.width,f=this.height,g=0;g<this.mipmaps.length;g++)this._updateTextureData(n,this.mipmaps[g],g,d,f,t,r),d/=2,f/=2;else this._updateTextureData(n,this,0,this.width,this.height,t,r),!this.NPOT&&this.useMipmap&&n.generateMipmap(n.TEXTURE_CUBE_MAP);n.bindTexture(n.TEXTURE_CUBE_MAP,null)},_updateTextureData:function(e,n,t,r,i,o,d){for(var f=0;f<6;f++){var g=jte[f],_=n.image&&n.image[g];_?e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+f,t,o,o,d,_):e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+f,t,o,r,i,0,o,d,n.pixels&&n.pixels[g])}},generateMipmap:function(e){var n=e.gl;this.useMipmap&&!this.NPOT&&(n.bindTexture(n.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),n.generateMipmap(n.TEXTURE_CUBE_MAP))},bind:function(e){e.gl.bindTexture(e.gl.TEXTURE_CUBE_MAP,this.getWebGLTexture(e))},unbind:function(e){e.gl.bindTexture(e.gl.TEXTURE_CUBE_MAP,null)},isPowerOfTwo:function(){return this.image.px?TI(this.image.px.width)&&TI(this.image.px.height):TI(this.width)&&TI(this.height)},isRenderable:function(){return this.image.px?Vy(this.image.px)&&Vy(this.image.nx)&&Vy(this.image.py)&&Vy(this.image.ny)&&Vy(this.image.pz)&&Vy(this.image.nz):!(!this.width||!this.height)},load:function(e,n){var t=0,r=this;return $o.each(e,function(i,o){var d=oo.createImage();n&&(d.crossOrigin=n),d.onload=function(){0==--t&&(r.dirty(),r.trigger("success",r))},d.onerror=function(){t--},t++,d.src=i,r.image[o]=d}),this}});function Vy(e){return e.width>0&&e.height>0}Object.defineProperty(y3.prototype,"width",{get:function(){return this.image&&this.image.px?this.image.px.width:this._width},set:function(e){this.image&&this.image.px?console.warn("Texture from image can't set width"):(this._width!==e&&this.dirty(),this._width=e)}}),Object.defineProperty(y3.prototype,"height",{get:function(){return this.image&&this.image.px?this.image.px.height:this._height},set:function(e){this.image&&this.image.px?console.warn("Texture from image can't set height"):(this._height!==e&&this.dirty(),this._height=e)}});const qC=y3;var Zte=By.extend({fov:50,aspect:1,near:.1,far:2e3},{updateProjectionMatrix:function(){var e=this.fov/180*Math.PI;this.projectionMatrix.perspective(e,this.aspect,this.near,this.far)},decomposeProjectionMatrix:function(){var e=this.projectionMatrix.array,n=2*Math.atan(1/e[5]);this.fov=n/Math.PI*180,this.aspect=e[5]/e[0],this.near=e[14]/(e[10]-1),this.far=e[14]/(e[10]+1)},clone:function(){var e=By.prototype.clone.call(this);return e.fov=this.fov,e.aspect=this.aspect,e.near=this.near,e.far=this.far,e}});const No=Zte;var EI="framebuffer",sh="renderbuffer",MW=sh+"_width",TW=sh+"_height",b3=sh+"_attached",x3="depthtexture_attached",jg=36160,JC=36161,ew=36096,tw=Gs.extend({depthBuffer:!0,viewport:null,_width:0,_height:0,_textures:null,_boundRenderer:null},function(){this._cache=new h3,this._textures={}},{getTextureWidth:function(){return this._width},getTextureHeight:function(){return this._height},bind:function(e){if(e.__currentFrameBuffer){if(e.__currentFrameBuffer===this)return;console.warn("Renderer already bound with another framebuffer. Unbind it first")}e.__currentFrameBuffer=this;var n=e.gl;n.bindFramebuffer(jg,this._getFrameBufferGL(e)),this._boundRenderer=e;var t=this._cache;t.put("viewport",e.viewport);var i,o,r=!1;for(var d in this._textures){r=!0;var f=this._textures[d];f&&(i=f.texture.width,o=f.texture.height,this._doAttach(e,f.texture,d,f.target))}this._width=i,this._height=o,!r&&this.depthBuffer&&console.error("Must attach texture before bind, or renderbuffer may have incorrect width and height."),this.viewport?e.setViewport(this.viewport):e.setViewport(0,0,i,o,1);var g=t.get("attached_textures");if(g)for(var d in g)this._textures[d]||this._doDetach(n,d,g[d]);if(!t.get(x3)&&this.depthBuffer){t.miss(sh)&&t.put(sh,n.createRenderbuffer());var C=t.get(sh);(i!==t.get(MW)||o!==t.get(TW))&&(n.bindRenderbuffer(JC,C),n.renderbufferStorage(JC,n.DEPTH_COMPONENT16,i,o),t.put(MW,i),t.put(TW,o),n.bindRenderbuffer(JC,null)),t.get(b3)||(n.framebufferRenderbuffer(jg,ew,JC,C),t.put(b3,!0))}},unbind:function(e){e.__currentFrameBuffer=null,e.gl.bindFramebuffer(jg,null),this._boundRenderer=null,this._cache.use(e.__uid__);var t=this._cache.get("viewport");t&&e.setViewport(t),this.updateMipmap(e)},updateMipmap:function(e){var n=e.gl;for(var t in this._textures){var r=this._textures[t];if(r){var i=r.texture;if(!i.NPOT&&i.useMipmap&&i.minFilter===hr.LINEAR_MIPMAP_LINEAR){var o="textureCube"===i.textureType?34067:3553;n.bindTexture(o,i.getWebGLTexture(e)),n.generateMipmap(o),n.bindTexture(o,null)}}}},checkStatus:function(e){return e.checkFramebufferStatus(jg)},_getFrameBufferGL:function(e){var n=this._cache;return n.use(e.__uid__),n.miss(EI)&&n.put(EI,e.gl.createFramebuffer()),n.get(EI)},attach:function(e,n,t){if(!e.width)throw new Error("The texture attached to color buffer is not a valid.");n=n||36064,t=t||3553;var o,r=this._boundRenderer;if(r&&r.gl){var d=this._cache;d.use(r.__uid__),o=d.get("attached_textures")}var f=this._textures[n];if(!f||f.target!==t||f.texture!==e||!o||null==o[n]){var g=!0;r&&(g=this._doAttach(r,e,n,t),this.viewport||r.setViewport(0,0,e.width,e.height,1)),g&&(this._textures[n]=this._textures[n]||{},this._textures[n].texture=e,this._textures[n].target=t)}},_doAttach:function(e,n,t,r){var i=e.gl,o=n.getWebGLTexture(e),d=this._cache.get("attached_textures");if(d&&d[t]){var f=d[t];if(f.texture===n&&f.target===r)return}var g=!0;if(((t=+t)===ew||33306===t)&&(e.getGLExtension("WEBGL_depth_texture")||(console.error("Depth texture is not supported by the browser"),g=!1),6402!==n.format&&34041!==n.format&&(console.error("The texture attached to depth buffer is not a valid."),g=!1),g)){var C=this._cache.get(sh);C&&(i.framebufferRenderbuffer(jg,ew,JC,null),i.deleteRenderbuffer(C),this._cache.put(sh,!1)),this._cache.put(b3,!1),this._cache.put(x3,!0)}return i.framebufferTexture2D(jg,t,r,o,0),d||this._cache.put("attached_textures",d={}),d[t]=d[t]||{},d[t].texture=n,d[t].target=r,g},_doDetach:function(e,n,t){e.framebufferTexture2D(jg,n,t,null,0);var r=this._cache.get("attached_textures");r&&r[n]&&(r[n]=null),(n===ew||33306===n)&&this._cache.put(x3,!1)},detach:function(e,n){this._textures[e]=null,this._boundRenderer&&(this._cache.use(this._boundRenderer.__uid__),this._doDetach(this._boundRenderer.gl,e,n))},dispose:function(e){var n=e.gl,t=this._cache;t.use(e.__uid__);var r=t.get(sh);r&&n.deleteRenderbuffer(r);var i=t.get(EI);i&&n.deleteFramebuffer(i),t.deleteContext(e.__uid__),this._textures={}}});tw.DEPTH_ATTACHMENT=ew,tw.COLOR_ATTACHMENT0=36064,tw.STENCIL_ATTACHMENT=36128,tw.DEPTH_STENCIL_ATTACHMENT=33306;const qo=tw;var Yte=["px","nx","py","ny","pz","nz"],Xte=Gs.extend(function(){var e={position:new Ln,far:1e3,near:.1,texture:null,shadowMapPass:null},n=e._cameras={px:new No({fov:90}),nx:new No({fov:90}),py:new No({fov:90}),ny:new No({fov:90}),pz:new No({fov:90}),nz:new No({fov:90})};return n.px.lookAt(Ln.POSITIVE_X,Ln.NEGATIVE_Y),n.nx.lookAt(Ln.NEGATIVE_X,Ln.NEGATIVE_Y),n.py.lookAt(Ln.POSITIVE_Y,Ln.POSITIVE_Z),n.ny.lookAt(Ln.NEGATIVE_Y,Ln.NEGATIVE_Z),n.pz.lookAt(Ln.POSITIVE_Z,Ln.NEGATIVE_Y),n.nz.lookAt(Ln.NEGATIVE_Z,Ln.NEGATIVE_Y),e._frameBuffer=new qo,e},{getCamera:function(e){return this._cameras[e]},render:function(e,n,t){var r=e.gl;t||n.update();for(var i=this.texture.width,o=2*Math.atan(i/(i-.5))/Math.PI*180,d=0;d<6;d++){var g=this._cameras[Yte[d]];if(Ln.copy(g.position,this.position),g.far=this.far,g.near=this.near,g.fov=o,this.shadowMapPass){g.update();var _=n.getBoundingBox();_.applyTransform(g.viewMatrix),n.viewBoundingBoxLastFrame.copy(_),this.shadowMapPass.render(e,n,g,!0)}this._frameBuffer.attach(this.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+d),this._frameBuffer.bind(e),e.render(n,g,!0),this._frameBuffer.unbind(e)}},dispose:function(e){this._frameBuffer.dispose(e)}});const C3=Xte;var $te=Di.extend({dynamic:!1,widthSegments:1,heightSegments:1},function(){this.build()},{build:function(){for(var e=this.heightSegments,n=this.widthSegments,t=this.attributes,r=[],i=[],o=[],d=[],f=0;f<=e;f++)for(var g=f/e,_=0;_<=n;_++){var C=_/n;if(r.push([2*C-1,2*g-1,0]),i&&i.push([C,g]),o&&o.push([0,0,1]),_<n&&f<e){var S=_+f*(n+1);d.push([S,S+1,S+n+1]),d.push([S+n+1,S+1,S+n+2])}}t.position.fromArray(r),t.texcoord0.fromArray(i),t.normal.fromArray(o),this.initIndicesFromArray(d),this.boundingBox=new js,this.boundingBox.min.set(-1,-1,0),this.boundingBox.max.set(1,1,0)}});const AI=$te;var Ia=new ir,Kte=Di.extend({dynamic:!1,widthSegments:1,heightSegments:1,depthSegments:1,inside:!1},function(){this.build()},{build:function(){var e={px:zy("px",this.depthSegments,this.heightSegments),nx:zy("nx",this.depthSegments,this.heightSegments),py:zy("py",this.widthSegments,this.depthSegments),ny:zy("ny",this.widthSegments,this.depthSegments),pz:zy("pz",this.widthSegments,this.heightSegments),nz:zy("nz",this.widthSegments,this.heightSegments)},n=["position","texcoord0","normal"],t=0,r=0;for(var i in e)t+=e[i].vertexCount,r+=e[i].indices.length;for(var o=0;o<n.length;o++)this.attributes[n[o]].init(t);this.indices=new oo.Uint16Array(r);var d=0,f=0;for(var i in e){var g=e[i];for(o=0;o<n.length;o++)for(var _=n[o],C=g.attributes[_].value,S=g.attributes[_].size,k="normal"===_,z=0;z<C.length;z++){var te=C[z];this.inside&&k&&(te=-te),this.attributes[_].value[z+S*f]=te}var pe=g.indices.length;for(z=0;z<g.indices.length;z++)this.indices[z+d]=f+g.indices[this.inside?pe-z-1:z];d+=g.indices.length,f+=g.vertexCount}this.boundingBox=new js,this.boundingBox.max.set(1,1,1),this.boundingBox.min.set(-1,-1,-1)}});function zy(e,n,t){Ia.identity();var r=new AI({widthSegments:n,heightSegments:t});switch(e){case"px":ir.translate(Ia,Ia,Ln.POSITIVE_X),ir.rotateY(Ia,Ia,Math.PI/2);break;case"nx":ir.translate(Ia,Ia,Ln.NEGATIVE_X),ir.rotateY(Ia,Ia,-Math.PI/2);break;case"py":ir.translate(Ia,Ia,Ln.POSITIVE_Y),ir.rotateX(Ia,Ia,-Math.PI/2);break;case"ny":ir.translate(Ia,Ia,Ln.NEGATIVE_Y),ir.rotateX(Ia,Ia,Math.PI/2);break;case"pz":ir.translate(Ia,Ia,Ln.POSITIVE_Z);break;case"nz":ir.translate(Ia,Ia,Ln.NEGATIVE_Z),ir.rotateY(Ia,Ia,Math.PI)}return r.applyTransform(Ia),r}const AW=Kte;Un.import("@export clay.skybox.vertex\n#define SHADER_NAME skybox\nuniform mat4 world : WORLD;\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nattribute vec3 position : POSITION;\nvarying vec3 v_WorldPosition;\nvoid main()\n{\n v_WorldPosition = (world * vec4(position, 1.0)).xyz;\n gl_Position = worldViewProjection * vec4(position, 1.0);\n}\n@end\n@export clay.skybox.fragment\n#define PI 3.1415926\nuniform mat4 viewInverse : VIEWINVERSE;\n#ifdef EQUIRECTANGULAR\nuniform sampler2D environmentMap;\n#else\nuniform samplerCube environmentMap;\n#endif\nuniform float lod: 0.0;\nvarying vec3 v_WorldPosition;\n@import clay.util.rgbm\n@import clay.util.srgb\n@import clay.util.ACES\nvoid main()\n{\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(v_WorldPosition - eyePos);\n#ifdef EQUIRECTANGULAR\n float phi = acos(V.y);\n float theta = atan(-V.x, V.z) + PI * 0.5;\n vec2 uv = vec2(theta / 2.0 / PI, phi / PI);\n vec4 texel = decodeHDR(texture2D(environmentMap, fract(uv)));\n#else\n #if defined(LOD) || defined(SUPPORT_TEXTURE_LOD)\n vec4 texel = decodeHDR(textureCubeLodEXT(environmentMap, V, lod));\n #else\n vec4 texel = decodeHDR(textureCube(environmentMap, V));\n #endif\n#endif\n#ifdef SRGB_DECODE\n texel = sRGBToLinear(texel);\n#endif\n#ifdef TONEMAPPING\n texel.rgb = ACESToneMapping(texel.rgb);\n#endif\n#ifdef SRGB_ENCODE\n texel = linearTosRGB(texel);\n#endif\n gl_FragColor = encodeHDR(vec4(texel.rgb, 1.0));\n}\n@end");var qte=Hg.extend(function(){var e=new Un({vertex:Un.source("clay.skybox.vertex"),fragment:Un.source("clay.skybox.fragment")}),n=new Pc({shader:e,depthMask:!1});return{scene:null,geometry:new AW,material:n,environmentMap:null,culling:!1,_dummyCamera:new No}},function(){var e=this.scene;e&&this.attachScene(e),this.environmentMap&&this.setEnvironmentMap(this.environmentMap)},{attachScene:function(e){this.scene&&this.detachScene(),e.skybox=this,this.scene=e,e.on("beforerender",this._beforeRenderScene,this)},detachScene:function(){this.scene&&(this.scene.off("beforerender",this._beforeRenderScene),this.scene.skybox=null),this.scene=null},dispose:function(e){this.detachScene(),this.geometry.dispose(e)},setEnvironmentMap:function(e){"texture2D"===e.textureType?(this.material.define("EQUIRECTANGULAR"),e.minFilter=hr.LINEAR):this.material.undefine("EQUIRECTANGULAR"),this.material.set("environmentMap",e)},getEnvironmentMap:function(){return this.material.get("environmentMap")},_beforeRenderScene:function(e,n,t){this.renderSkybox(e,t)},renderSkybox:function(e,n){var t=this._dummyCamera;t.aspect=e.getViewportAspect(),t.fov=n.fov||50,t.updateProjectionMatrix(),ir.invert(t.invProjectionMatrix,t.projectionMatrix),t.worldTransform.copy(n.worldTransform),t.viewMatrix.copy(n.viewMatrix),this.position.copy(n.getWorldPosition()),this.update(),e.gl.disable(e.gl.BLEND),this.material.get("lod")>0?this.material.define("fragment","LOD"):this.material.undefine("fragment","LOD"),e.renderPass([this],t)}});const II=qte,IW=II;function w3(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}var ine=w3("DXT1"),ane=w3("DXT3"),one=w3("DXT5"),vne={parse:function(e,n){var t=new Int32Array(e,0,31);if(542327876!==t[0]||4&!t(20))return null;var g,_,r=t(21),i=t[4],o=t[3],d=512&t[28],f=131072&t[2];switch(r){case ine:g=8,_=hr.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case ane:g=16,_=hr.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case one:g=16,_=hr.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return null}var C=t[1]+4,S=d?6:1,k=1;f&&(k=Math.max(1,t[7]));for(var z=[],te=0;te<S;te++){var pe=i,Me=o;z[te]=new $r({width:pe,height:Me,format:_});for(var Re=[],Fe=0;Fe<k;Fe++){var Oe=Math.max(4,pe)/4*Math.max(4,Me)/4*g,Be=new Uint8Array(e,C,Oe);C+=Oe,pe*=.5,Me*=.5,Re[Fe]=Be}z[te].pixels=Re[0],f&&(z[te].mipmaps=Re)}if(!n)return z[0];n.width=z[0].width,n.height=z[0].height,n.format=z[0].format,n.pixels=z[0].pixels,n.mipmaps=z[0].mipmaps}};const mne=vne;var PI=String.fromCharCode;function bne(e,n,t,r){if(e[3]>0){var i=Math.pow(2,e[3]-128-8+r);n[t+0]=e[0]*i,n[t+1]=e[1]*i,n[t+2]=e[2]*i}else n[t+0]=0,n[t+1]=0,n[t+2]=0;return n[t+3]=1,n}function Cne(e,n){n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3]}function PW(e,n,t,r){for(var i=0,o=0,d=r;d>0;)if(e[o][0]=n[t++],e[o][1]=n[t++],e[o][2]=n[t++],e[o][3]=n[t++],1===e[o][0]&&1===e[o][1]&&1===e[o][2]){for(var f=e[o][3]<<i>>>0;f>0;f--)Cne(e[o-1],e[o]),o++,d--;i+=8}else o++,d--,i=0;return t}function wne(e,n,t,r){if(r<8|r>32767)return PW(e,n,t,r);if(2!=(i=n[t++]))return PW(e,n,t-1,r);if(e[0][1]=n[t++],e[0][2]=n[t++],i=n[t++],(e[0][2]<<8>>>0|i)>>>0!==r)return null;for(var i=0;i<4;i++)for(var o=0;o<r;){var d=n[t++];if(d>128){d=(127&d)>>>0;for(var f=n[t++];d--;)e[o++][i]=f}else for(;d--;)e[o++][i]=n[t++]}return t}var Sne={parseRGBE:function(e,n,t){null==t&&(t=0);var r=new Uint8Array(e),i=r.length;if("#?"===function xne(e,n,t){for(var r="",i=n;i<t;i++)r+=PI(e[i]);return r}(r,0,2)){for(var o=2;o<i&&("\n"!==PI(r[o])||"\n"!==PI(r[o+1]));o++);if(!(o>=i)){o+=2;for(var d="";o<i;o++){var f=PI(r[o]);if("\n"===f)break;d+=f}var g=d.split(" "),_=parseInt(g[1]),C=parseInt(g[3]);if(C&&_){for(var S=o+1,k=[],z=0;z<C;z++){k[z]=[];for(var te=0;te<4;te++)k[z][te]=0}for(var pe=new Float32Array(C*_*4),Me=0,Re=0;Re<_;Re++){if(!(S=wne(k,r,S,C)))return null;for(z=0;z<C;z++)bne(k[z],pe,Me,t),Me+=4}return n||(n=new $r),n.width=C,n.height=_,n.pixels=pe,n.type=hr.FLOAT,n}}}},parseRGBEFromPNG:function(e){}};const Dne=Sne;var RI={loadTexture:function(e,n,t,r){var i;if("function"==typeof n?(r=t=n,n={}):n=n||{},"string"==typeof e){if(e.match(/.hdr$/)||"hdr"===n.fileType)return i=new $r({width:0,height:0,sRGB:!1}),RI._fetchTexture(e,function(o){Dne.parseRGBE(o,i,n.exposure),i.dirty(),t&&t(i)},r),i;e.match(/.dds$/)||"dds"===n.fileType?(i=new $r({width:0,height:0}),RI._fetchTexture(e,function(o){mne.parse(o,i),i.dirty(),t&&t(i)},r)):((i=new $r).load(e),i.success(t),i.error(r))}else"object"==typeof e&&typeof e.px<"u"&&((i=new qC).load(e),i.success(t),i.error(r));return i},loadPanorama:function(e,n,t,r,i,o){var d=this;"function"==typeof r?(o=i=r,r={}):r=r||{},RI.loadTexture(n,r,function(f){f.flipY=r.flipY||!1,d.panoramaToCubeMap(e,f,t,r),f.dispose(e),i&&i(t)},o)},panoramaToCubeMap:function(e,n,t,r){var i=new C3,o=new IW({scene:new Df});return o.setEnvironmentMap(n),(r=r||{}).encodeRGBM&&o.material.define("fragment","RGBM_ENCODE"),t.sRGB=n.sRGB,i.texture=t,i.render(e,o.scene),i.texture=null,i.dispose(e),t},heightToNormal:function(e,n){var t=document.createElement("canvas"),r=t.width=e.width,i=t.height=e.height,o=t.getContext("2d");o.drawImage(e,0,0,r,i),n=n||!1;for(var d=o.getImageData(0,0,r,i),f=o.createImageData(r,i),g=0;g<d.data.length;g+=4){if(n){var C=d.data[g+1],S=d.data[g+2];if(Math.abs(d.data[g]-C)+Math.abs(C-S)>20)return console.warn("Given image is not a height map"),e}var z,te,pe,Me;g%(4*r)==0?(z=d.data[g],pe=d.data[g+4]):g%(4*r)==4*(r-1)?(z=d.data[g-4],pe=d.data[g]):(z=d.data[g-4],pe=d.data[g+4]),g<4*r?(te=d.data[g],Me=d.data[g+4*r]):g>r*(i-1)*4?(te=d.data[g-4*r],Me=d.data[g]):(te=d.data[g-4*r],Me=d.data[g+4*r]),f.data[g]=z-pe+127,f.data[g+1]=te-Me+127,f.data[g+2]=255,f.data[g+3]=255}return o.putImageData(f,0,0),t},isHeightImage:function(e,n,t){if(!e||!e.width||!e.height)return!1;var r=document.createElement("canvas"),i=r.getContext("2d"),o=n||32;t=t||20,r.width=r.height=o,i.drawImage(e,0,0,o,o);for(var d=i.getImageData(0,0,o,o),f=0;f<d.data.length;f+=4){var _=d.data[f+1],C=d.data[f+2];if(Math.abs(d.data[f]-_)+Math.abs(_-C)>t)return!1}return!0},_fetchTexture:function(e,n,t){oo.request.get({url:e,responseType:"arraybuffer",onload:n,onerror:t})},createChessboard:function(e,n,t,r){e=e||512,n=n||64,t=t||"black",r=r||"white";var i=Math.ceil(e/n),o=document.createElement("canvas");o.width=e,o.height=e;var d=o.getContext("2d");d.fillStyle=r,d.fillRect(0,0,e,e),d.fillStyle=t;for(var f=0;f<i;f++)for(var g=0;g<i;g++)(g%2?f%2:f%2-1)&&d.fillRect(f*n,g*n,n,n);return new $r({image:o,anisotropic:8})},createBlank:function(e){var n=document.createElement("canvas");n.width=1,n.height=1;var t=n.getContext("2d");return t.fillStyle=e,t.fillRect(0,0,1,1),new $r({image:n})}};const Zg=RI;var S3=["mousedown","mouseup","mousemove","mouseover","mouseout","click","dblclick","contextmenu"];function D3(e){return"_on"+e}var M3=function(e){var n=this;this._texture=new $r({anisotropic:32,flipY:!1,surface:this,dispose:function(t){n.dispose(),$r.prototype.dispose.call(this,t)}}),S3.forEach(function(t){this[D3(t)]=function(r){!r.triangle||this._meshes.forEach(function(i){this.dispatchEvent(t,i,r.triangle,r.point)},this)}},this),this._meshes=[],e&&this.setECharts(e),this.onupdate=null};M3.prototype={constructor:M3,getTexture:function(){return this._texture},setECharts:function(e){this._chart=e;var n=e.getDom();if(n instanceof HTMLCanvasElement){var t=this,r=e.getZr(),i=r.__oldRefreshImmediately||r.refreshImmediately;r.refreshImmediately=function(){i.call(this),t._texture.dirty(),t.onupdate&&t.onupdate()},r.__oldRefreshImmediately=i}else console.error("ECharts must init on canvas if it is used as texture."),n=document.createElement("canvas");this._texture.image=n,this._texture.dirty(),this.onupdate&&this.onupdate()},dispatchEvent:function(){var e=new Ln,n=new Ln,t=new Ln,r=new jl,i=new jl,o=new jl,d=new jl,f=new Ln;return function(g,_,C,S){var k=_.geometry,z=k.attributes.position,te=k.attributes.texcoord0,pe=Ln.dot,Me=Ln.cross;z.get(C[0],e.array),z.get(C[1],n.array),z.get(C[2],t.array),te.get(C[0],r.array),te.get(C[1],i.array),te.get(C[2],o.array),Me(f,n,t);var Re=pe(e,f),Fe=pe(S,f)/Re;Me(f,t,e);var Oe=pe(S,f)/Re;Me(f,e,n);var Be=pe(S,f)/Re;jl.scale(d,r,Fe),jl.scaleAndAdd(d,d,i,Oe),jl.scaleAndAdd(d,d,o,Be);var it=d.x*this._chart.getWidth(),at=d.y*this._chart.getHeight();this._chart.getZr().handler.dispatch(g,{zrX:it,zrY:at})}}(),attachToMesh:function(e){this._meshes.indexOf(e)>=0||(S3.forEach(function(n){e.on(n,this[D3(n)],this)},this),this._meshes.push(e))},detachFromMesh:function(e){var n=this._meshes.indexOf(e);n>=0&&this._meshes.splice(n,1),S3.forEach(function(t){e.off(t,this[D3(t)])},this)},dispose:function(){this._meshes.forEach(function(e){this.detachFromMesh(e)},this)}};const Mne=M3;var Tne=By.extend({left:-1,right:1,near:-1,far:1,top:1,bottom:-1},{updateProjectionMatrix:function(){this.projectionMatrix.ortho(this.left,this.right,this.bottom,this.top,this.near,this.far)},decomposeProjectionMatrix:function(){var e=this.projectionMatrix.array;this.left=(-1-e[12])/e[0],this.right=(1-e[12])/e[0],this.top=(1-e[13])/e[5],this.bottom=(-1-e[13])/e[5],this.near=-(-1-e[14])/e[10],this.far=-(1-e[14])/e[10]},clone:function(){var e=By.prototype.clone.call(this);return e.left=this.left,e.right=this.right,e.near=this.near,e.far=this.far,e.top=this.top,e.bottom=this.bottom,e}});const Hy=Tne;Un.import("\n@export clay.compositor.vertex\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nattribute vec3 position : POSITION;\nattribute vec2 texcoord : TEXCOORD_0;\nvarying vec2 v_Texcoord;\nvoid main()\n{\n v_Texcoord = texcoord;\n gl_Position = worldViewProjection * vec4(position, 1.0);\n}\n@end");var Ane=new AI,RW=new Hg({geometry:Ane,frustumCulling:!1}),Ine=new Hy,Pne=Gs.extend(function(){return{fragment:"",outputs:null,material:null,blendWithPrevious:!1,clearColor:!1,clearDepth:!0}},function(){var e=new Un(Un.source("clay.compositor.vertex"),this.fragment),n=new Pc({shader:e});n.enableTexturesAll(),this.material=n},{setUniform:function(e,n){this.material.setUniform(e,n)},getUniform:function(e){var n=this.material.uniforms[e];if(n)return n.value},attachOutput:function(e,n){this.outputs||(this.outputs={}),this.outputs[n=n||36064]=e},detachOutput:function(e){for(var n in this.outputs)this.outputs[n]===e&&(this.outputs[n]=null)},bind:function(e,n){if(this.outputs)for(var t in this.outputs){var r=this.outputs[t];r&&n.attach(r,t)}n&&n.bind(e)},unbind:function(e,n){n.unbind(e)},render:function(e,n){var t=e.gl;if(n){this.bind(e,n);var r=e.getGLExtension("EXT_draw_buffers");if(r&&this.outputs){var i=[];for(var o in this.outputs)(o=+o)>=t.COLOR_ATTACHMENT0&&o<=t.COLOR_ATTACHMENT0+8&&i.push(o);r.drawBuffersEXT(i)}}this.trigger("beforerender",this,e);var d=this.clearDepth?t.DEPTH_BUFFER_BIT:0;if(t.depthMask(!0),this.clearColor){d|=t.COLOR_BUFFER_BIT,t.colorMask(!0,!0,!0,!0);var f=this.clearColor;Array.isArray(f)&&t.clearColor(f[0],f[1],f[2],f[3])}t.clear(d),this.blendWithPrevious?(t.enable(t.BLEND),this.material.transparent=!0):(t.disable(t.BLEND),this.material.transparent=!1),this.renderQuad(e),this.trigger("afterrender",this,e),n&&this.unbind(e,n)},renderQuad:function(e){RW.material=this.material,e.renderPass([RW],Ine)},dispose:function(e){}});const so=Pne;var Yg={},T3=["px","nx","py","ny","pz","nz"];Yg.prefilterEnvironmentMap=function(e,n,t,r,i){(!i||!r)&&(r=Yg.generateNormalDistribution(),i=Yg.integrateBRDF(e,r));var o=(t=t||{}).width||64,d=t.height||64,f=t.type||n.type,g=new qC({width:o,height:d,type:f,flipY:!1,mipmaps:[]});g.isPowerOfTwo()||console.warn("Width and height must be power of two to enable mipmap.");var _=Math.min(o,d),C=Math.log(_)/Math.log(2)+1,S=new Pc({shader:new Un({vertex:Un.source("clay.skybox.vertex"),fragment:"#define SHADER_NAME prefilter\n#define SAMPLE_NUMBER 1024\n#define PI 3.14159265358979\nuniform mat4 viewInverse : VIEWINVERSE;\nuniform samplerCube environmentMap;\nuniform sampler2D normalDistribution;\nuniform float roughness : 0.5;\nvarying vec2 v_Texcoord;\nvarying vec3 v_WorldPosition;\n@import clay.util.rgbm\nvec3 importanceSampleNormal(float i, float roughness, vec3 N) {\n vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;\n vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);\n vec3 tangentX = normalize(cross(N, upVector));\n vec3 tangentZ = cross(N, tangentX);\n return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);\n}\nvoid main() {\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(v_WorldPosition - eyePos);\n vec3 N = V;\n vec3 prefilteredColor = vec3(0.0);\n float totalWeight = 0.0;\n float fMaxSampleNumber = float(SAMPLE_NUMBER);\n for (int i = 0; i < SAMPLE_NUMBER; i++) {\n vec3 H = importanceSampleNormal(float(i) / fMaxSampleNumber, roughness, N);\n vec3 L = reflect(-V, H);\n float NoL = clamp(dot(N, L), 0.0, 1.0);\n if (NoL > 0.0) {\n prefilteredColor += decodeHDR(textureCube(environmentMap, L)).rgb * NoL;\n totalWeight += NoL;\n }\n }\n gl_FragColor = encodeHDR(vec4(prefilteredColor / totalWeight, 1.0));\n}\n"})});S.set("normalDistribution",r),t.encodeRGBM&&S.define("fragment","RGBM_ENCODE"),t.decodeRGBM&&S.define("fragment","RGBM_DECODE");var z,k=new Df;if("texture2D"===n.textureType){var te=new qC({width:o,height:d,type:f===hr.FLOAT?hr.HALF_FLOAT:f});Zg.panoramaToCubeMap(e,n,te,{encodeRGBM:t.decodeRGBM}),n=te}(z=new II({scene:k,material:S})).material.set("environmentMap",n);var pe=new C3({texture:g});t.encodeRGBM&&(f=g.type=hr.UNSIGNED_BYTE);for(var Me=new $r({width:o,height:d,type:f}),Re=new qo({depthBuffer:!1}),Fe=oo[f===hr.UNSIGNED_BYTE?"Uint8Array":"Float32Array"],Oe=0;Oe<C;Oe++){g.mipmaps[Oe]={pixels:{}},z.material.set("roughness",Oe/(C-1));for(var Be=Me.width,it=2*Math.atan(Be/(Be-.5))/Math.PI*180,at=0;at<T3.length;at++){var Ct=new Fe(Me.width*Me.height*4);Re.attach(Me),Re.bind(e);var mt=pe.getCamera(T3[at]);mt.fov=it,e.render(k,mt),e.gl.readPixels(0,0,Me.width,Me.height,hr.RGBA,f,Ct),Re.unbind(e),g.mipmaps[Oe].pixels[T3[at]]=Ct}Me.width/=2,Me.height/=2,Me.dirty()}return Re.dispose(e),Me.dispose(e),z.dispose(e),r.dispose(e),{environmentMap:g,brdfLookup:i,normalDistribution:r,maxMipmapLevel:C}},Yg.integrateBRDF=function(e,n){n=n||Yg.generateNormalDistribution();var t=new qo({depthBuffer:!1}),r=new so({fragment:"#define SAMPLE_NUMBER 1024\n#define PI 3.14159265358979\nuniform sampler2D normalDistribution;\nuniform vec2 viewportSize : [512, 256];\nconst vec3 N = vec3(0.0, 0.0, 1.0);\nconst float fSampleNumber = float(SAMPLE_NUMBER);\nvec3 importanceSampleNormal(float i, float roughness, vec3 N) {\n vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;\n vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);\n vec3 tangentX = normalize(cross(N, upVector));\n vec3 tangentZ = cross(N, tangentX);\n return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);\n}\nfloat G_Smith(float roughness, float NoV, float NoL) {\n float k = roughness * roughness / 2.0;\n float G1V = NoV / (NoV * (1.0 - k) + k);\n float G1L = NoL / (NoL * (1.0 - k) + k);\n return G1L * G1V;\n}\nvoid main() {\n vec2 uv = gl_FragCoord.xy / viewportSize;\n float NoV = uv.x;\n float roughness = uv.y;\n vec3 V;\n V.x = sqrt(1.0 - NoV * NoV);\n V.y = 0.0;\n V.z = NoV;\n float A = 0.0;\n float B = 0.0;\n for (int i = 0; i < SAMPLE_NUMBER; i++) {\n vec3 H = importanceSampleNormal(float(i) / fSampleNumber, roughness, N);\n vec3 L = reflect(-V, H);\n float NoL = clamp(L.z, 0.0, 1.0);\n float NoH = clamp(H.z, 0.0, 1.0);\n float VoH = clamp(dot(V, H), 0.0, 1.0);\n if (NoL > 0.0) {\n float G = G_Smith(roughness, NoV, NoL);\n float G_Vis = G * VoH / (NoH * NoV);\n float Fc = pow(1.0 - VoH, 5.0);\n A += (1.0 - Fc) * G_Vis;\n B += Fc * G_Vis;\n }\n }\n gl_FragColor = vec4(vec2(A, B) / fSampleNumber, 0.0, 1.0);\n}\n"}),i=new $r({width:512,height:256,type:hr.HALF_FLOAT,wrapS:hr.CLAMP_TO_EDGE,wrapT:hr.CLAMP_TO_EDGE,minFilter:hr.NEAREST,magFilter:hr.NEAREST,useMipmap:!1});return r.setUniform("normalDistribution",n),r.setUniform("viewportSize",[512,256]),r.attachOutput(i),r.render(e,t),t.dispose(e),i},Yg.generateNormalDistribution=function(t,r){for(var i=new $r({width:t=t||256,height:r=r||1024,type:hr.FLOAT,minFilter:hr.NEAREST,magFilter:hr.NEAREST,wrapS:hr.CLAMP_TO_EDGE,wrapT:hr.CLAMP_TO_EDGE,useMipmap:!1}),o=new Float32Array(r*t*4),d=[],f=0;f<t;f++){for(var g=f/t,_=g*g,C=0;C<r;C++){var S=(C<<16|C>>>16)>>>0;S=(((16711935&(S=((252645135&(S=((858993459&(S=((1431655765&S)<<1|(2863311530&S)>>>1)>>>0))<<2|(3435973836&S)>>>2)>>>0))<<4|(4042322160&S)>>>4)>>>0))<<8|(4278255360&S)>>>8)>>>0)/4294967296;var k=Math.sqrt((1-S)/(1+(_*_-1)*S));d[C]=k}for(C=0;C<r;C++){var z=4*(C*t+f),te=(k=d[C],Math.sqrt(1-k*k)),Me=2*Math.PI*(C/r);o[z]=te*Math.cos(Me),o[z+1]=k,o[z+2]=te*Math.sin(Me),o[z+3]=1}}return i.pixels=o,i};const LI=Yg;var One=du.extend({cubemap:null,castShadow:!1,_normalDistribution:null,_brdfLookup:null},{type:"AMBIENT_CUBEMAP_LIGHT",prefilter:function(e,n){if(e.getGLExtension("EXT_shader_texture_lod")){this._brdfLookup||(this._normalDistribution=LI.generateNormalDistribution(),this._brdfLookup=LI.integrateBRDF(e,this._normalDistribution));var t=this.cubemap;if(!t.__prefiltered){var r=LI.prefilterEnvironmentMap(e,t,{encodeRGBM:!0,width:n,height:n},this._normalDistribution,this._brdfLookup);this.cubemap=r.environmentMap,this.cubemap.__prefiltered=!0,t.dispose(e)}}else console.warn("Device not support textureCubeLodEXT")},getBRDFLookup:function(){return this._brdfLookup},uniformTemplates:{ambientCubemapLightColor:{type:"3f",value:function(e){var n=e.color,t=e.intensity;return[n[0]*t,n[1]*t,n[2]*t]}},ambientCubemapLightCubemap:{type:"t",value:function(e){return e.cubemap}},ambientCubemapLightBRDFLookup:{type:"t",value:function(e){return e._brdfLookup}}}});const kne=One;var Nne=du.extend({castShadow:!1,coefficients:[]},function(){this._coefficientsTmpArr=new oo.Float32Array(27)},{type:"AMBIENT_SH_LIGHT",uniformTemplates:{ambientSHLightColor:{type:"3f",value:function(e){var n=e.color,t=e.intensity;return[n[0]*t,n[1]*t,n[2]*t]}},ambientSHLightCoefficients:{type:"3f",value:function(e){for(var n=e._coefficientsTmpArr,t=0;t<e.coefficients.length;t++)n[t]=e.coefficients[t];return n}}}});const Fne=Nne;var LW={},Xg=["px","nx","py","ny","pz","nz"];function Bne(e,n){var t=e[0],r=e[1],i=e[2];return 0===n?1:1===n?t:2===n?r:3===n?i:4===n?t*i:5===n?r*i:6===n?t*r:7===n?3*i*i-1:t*t-r*r}var Vne={px:[2,1,0,-1,-1,1],nx:[2,1,0,1,-1,-1],py:[0,2,1,1,-1,-1],ny:[0,2,1,1,1,1],pz:[0,1,2,-1,-1,-1],nz:[0,1,2,1,-1,1]};LW.projectEnvironmentMap=function(e,n,t){(t=t||{}).lod=t.lod||0;var r,i=new Df,o=64;"texture2D"===n.textureType?r=new IW({scene:i,environmentMap:n}):(o=n.image&&n.image.px?n.image.px.width:n.width,r=new II({scene:i,environmentMap:n}));var d=Math.ceil(o/Math.pow(2,t.lod)),f=Math.ceil(o/Math.pow(2,t.lod)),g=new $r({width:d,height:f}),_=new qo;r.material.define("fragment","RGBM_ENCODE"),t.decodeRGBM&&r.material.define("fragment","RGBM_DECODE"),r.material.set("lod",t.lod);for(var C=new C3({texture:g}),S={},k=0;k<Xg.length;k++){S[Xg[k]]=new Uint8Array(d*f*4);var z=C.getCamera(Xg[k]);z.fov=90,_.attach(g),_.bind(e),e.render(i,z),e.gl.readPixels(0,0,d,f,hr.RGBA,hr.UNSIGNED_BYTE,S[Xg[k]]),_.unbind(e)}return r.dispose(e),_.dispose(e),g.dispose(e),function zne(e,n,t,r){for(var i=new oo.Float32Array(27),o=Et.create(),d=Et.create(),f=Et.create(),g=0;g<9;g++){for(var _=Et.create(),C=0;C<Xg.length;C++){for(var S=n[Xg[C]],k=Et.create(),z=0,te=0,pe=Vne[Xg[C]],Me=0;Me<r;Me++)for(var Re=0;Re<t;Re++){o[0]=Re/(t-1)*2-1,o[1]=Me/(r-1)*2-1,o[2]=-1,Et.normalize(o,o),f[0]=o[pe[0]]*pe[3],f[1]=o[pe[1]]*pe[4],f[2]=o[pe[2]]*pe[5],d[0]=S[te++]/255,d[1]=S[te++]/255,d[2]=S[te++]/255;var Fe=S[te++]/255*8.12;d[0]*=Fe,d[1]*=Fe,d[2]*=Fe,Et.scaleAndAdd(k,k,d,Bne(f,g)*-o[2]),z+=-o[2]}Et.scaleAndAdd(_,_,k,1/z)}i[3*g]=_[0]/6,i[3*g+1]=_[1]/6,i[3*g+2]=_[2]/6}return i}(0,S,d,f)};const Hne=LW;var Une={firstNotNull:function(){for(var e=0,n=arguments.length;e<n;e++)if(null!=arguments[e])return arguments[e]},queryDataIndex:function(e,n){return null!=n.dataIndexInside?n.dataIndexInside:null!=n.dataIndex?bt.D5.isArray(n.dataIndex)?bt.D5.map(n.dataIndex,function(t){return e.indexOfRawIndex(t)}):e.indexOfRawIndex(n.dataIndex):null!=n.name?bt.D5.isArray(n.name)?bt.D5.map(n.name,function(t){return e.indexOfName(t)}):e.indexOfName(n.name):void 0}};const qr=Une;var Gne=Di.extend({dynamic:!1,widthSegments:40,heightSegments:20,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI,radius:1},function(){this.build()},{build:function(){var e=this.heightSegments,n=this.widthSegments,t=this.attributes.position,r=this.attributes.texcoord0,i=this.attributes.normal,o=(n+1)*(e+1);t.init(o),r.init(o),i.init(o);var g,_,C,S,k,z,te,Oe,d=o>65535?Uint32Array:Uint16Array,f=this.indices=new d(n*e*6),pe=this.phiStart,Me=this.phiLength,Re=this.thetaStart,Fe=this.thetaLength,Be=[],it=[],at=0,Ct=1/(Oe=this.radius);for(te=0;te<=e;te++)for(z=0;z<=n;z++)S=z/n,k=te/e,g=-Oe*Math.cos(pe+S*Me)*Math.sin(Re+k*Fe),_=Oe*Math.cos(Re+k*Fe),C=Oe*Math.sin(pe+S*Me)*Math.sin(Re+k*Fe),Be[0]=g,Be[1]=_,Be[2]=C,it[0]=S,it[1]=k,t.set(at,Be),r.set(at,it),Be[0]*=Ct,Be[1]*=Ct,Be[2]*=Ct,i.set(at,Be),at++;var Ft,nn,$t,pn=n+1,mn=0;for(te=0;te<e;te++)for(z=0;z<n;z++)Ft=te*pn+z,$t=(te+1)*pn+z+1,nn=(te+1)*pn+z,f[mn++]=te*pn+z+1,f[mn++]=Ft,f[mn++]=$t,f[mn++]=Ft,f[mn++]=nn,f[mn++]=$t;this.boundingBox=new js,this.boundingBox.max.set(Oe,Oe,Oe),this.boundingBox.min.set(-Oe,-Oe,-Oe)}});const Wne=Gne;var jne=du.extend({castShadow:!1},{type:"AMBIENT_LIGHT",uniformTemplates:{ambientLightColor:{type:"3f",value:function(e){var n=e.color,t=e.intensity;return[n[0]*t,n[1]*t,n[2]*t]}}}});const Zne=jne;var Yne=du.extend({shadowBias:.001,shadowSlopeScale:2,shadowCascade:1,cascadeSplitLogFactor:.2},{type:"DIRECTIONAL_LIGHT",uniformTemplates:{directionalLightDirection:{type:"3f",value:function(e){return e.__dir=e.__dir||new Ln,e.__dir.copy(e.worldTransform.z).normalize().negate().array}},directionalLightColor:{type:"3f",value:function(e){var n=e.color,t=e.intensity;return[n[0]*t,n[1]*t,n[2]*t]}}},clone:function(){var e=du.prototype.clone.call(this);return e.shadowBias=this.shadowBias,e.shadowSlopeScale=this.shadowSlopeScale,e}});const Xne=Yne;var $ne=du.extend({range:100,castShadow:!1},{type:"POINT_LIGHT",uniformTemplates:{pointLightPosition:{type:"3f",value:function(e){return e.getWorldPosition().array}},pointLightRange:{type:"1f",value:function(e){return e.range}},pointLightColor:{type:"3f",value:function(e){var n=e.color,t=e.intensity;return[n[0]*t,n[1]*t,n[2]*t]}}},clone:function(){var e=du.prototype.clone.call(this);return e.range=this.range,e}});const Kne=$ne;var Qne=du.extend({range:20,umbraAngle:30,penumbraAngle:45,falloffFactor:2,shadowBias:.001,shadowSlopeScale:2},{type:"SPOT_LIGHT",uniformTemplates:{spotLightPosition:{type:"3f",value:function(e){return e.getWorldPosition().array}},spotLightRange:{type:"1f",value:function(e){return e.range}},spotLightUmbraAngleCosine:{type:"1f",value:function(e){return Math.cos(e.umbraAngle*Math.PI/180)}},spotLightPenumbraAngleCosine:{type:"1f",value:function(e){return Math.cos(e.penumbraAngle*Math.PI/180)}},spotLightFalloffFactor:{type:"1f",value:function(e){return e.falloffFactor}},spotLightDirection:{type:"3f",value:function(e){return e.__dir=e.__dir||new Ln,e.__dir.copy(e.worldTransform.z).negate().array}},spotLightColor:{type:"3f",value:function(e){var n=e.color,t=e.intensity;return[n[0]*t,n[1]*t,n[2]*t]}}},clone:function(){var e=du.prototype.clone.call(this);return e.range=this.range,e.umbraAngle=this.umbraAngle,e.penumbraAngle=this.penumbraAngle,e.falloffFactor=this.falloffFactor,e.shadowBias=this.shadowBias,e.shadowSlopeScale=this.shadowSlopeScale,e}});const qne=Qne;var gi=function(e,n,t,r){this.array=Wn.fromValues(e=e||0,n=n||0,t=t||0,r=r||0),this._dirty=!0};gi.prototype={constructor:gi,add:function(e){return Wn.add(this.array,this.array,e.array),this._dirty=!0,this},set:function(e,n,t,r){return this.array[0]=e,this.array[1]=n,this.array[2]=t,this.array[3]=r,this._dirty=!0,this},setArray:function(e){return this.array[0]=e[0],this.array[1]=e[1],this.array[2]=e[2],this.array[3]=e[3],this._dirty=!0,this},clone:function(){return new gi(this.x,this.y,this.z,this.w)},copy:function(e){return Wn.copy(this.array,e.array),this._dirty=!0,this},dist:function(e){return Wn.dist(this.array,e.array)},distance:function(e){return Wn.distance(this.array,e.array)},div:function(e){return Wn.div(this.array,this.array,e.array),this._dirty=!0,this},divide:function(e){return Wn.divide(this.array,this.array,e.array),this._dirty=!0,this},dot:function(e){return Wn.dot(this.array,e.array)},len:function(){return Wn.len(this.array)},length:function(){return Wn.length(this.array)},lerp:function(e,n,t){return Wn.lerp(this.array,e.array,n.array,t),this._dirty=!0,this},min:function(e){return Wn.min(this.array,this.array,e.array),this._dirty=!0,this},max:function(e){return Wn.max(this.array,this.array,e.array),this._dirty=!0,this},mul:function(e){return Wn.mul(this.array,this.array,e.array),this._dirty=!0,this},multiply:function(e){return Wn.multiply(this.array,this.array,e.array),this._dirty=!0,this},negate:function(){return Wn.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return Wn.normalize(this.array,this.array),this._dirty=!0,this},random:function(e){return Wn.random(this.array,e),this._dirty=!0,this},scale:function(e){return Wn.scale(this.array,this.array,e),this._dirty=!0,this},scaleAndAdd:function(e,n){return Wn.scaleAndAdd(this.array,this.array,e.array,n),this._dirty=!0,this},sqrDist:function(e){return Wn.sqrDist(this.array,e.array)},squaredDistance:function(e){return Wn.squaredDistance(this.array,e.array)},sqrLen:function(){return Wn.sqrLen(this.array)},squaredLength:function(){return Wn.squaredLength(this.array)},sub:function(e){return Wn.sub(this.array,this.array,e.array),this._dirty=!0,this},subtract:function(e){return Wn.subtract(this.array,this.array,e.array),this._dirty=!0,this},transformMat4:function(e){return Wn.transformMat4(this.array,this.array,e.array),this._dirty=!0,this},transformQuat:function(e){return Wn.transformQuat(this.array,this.array,e.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var nw=Object.defineProperty;if(nw){var OI=gi.prototype;nw(OI,"x",{get:function(){return this.array[0]},set:function(e){this.array[0]=e,this._dirty=!0}}),nw(OI,"y",{get:function(){return this.array[1]},set:function(e){this.array[1]=e,this._dirty=!0}}),nw(OI,"z",{get:function(){return this.array[2]},set:function(e){this.array[2]=e,this._dirty=!0}}),nw(OI,"w",{get:function(){return this.array[3]},set:function(e){this.array[3]=e,this._dirty=!0}})}gi.add=function(e,n,t){return Wn.add(e.array,n.array,t.array),e._dirty=!0,e},gi.set=function(e,n,t,r,i){Wn.set(e.array,n,t,r,i),e._dirty=!0},gi.copy=function(e,n){return Wn.copy(e.array,n.array),e._dirty=!0,e},gi.distance=gi.dist=function(e,n){return Wn.distance(e.array,n.array)},gi.divide=gi.div=function(e,n,t){return Wn.divide(e.array,n.array,t.array),e._dirty=!0,e},gi.dot=function(e,n){return Wn.dot(e.array,n.array)},gi.len=function(e){return Wn.length(e.array)},gi.lerp=function(e,n,t,r){return Wn.lerp(e.array,n.array,t.array,r),e._dirty=!0,e},gi.min=function(e,n,t){return Wn.min(e.array,n.array,t.array),e._dirty=!0,e},gi.max=function(e,n,t){return Wn.max(e.array,n.array,t.array),e._dirty=!0,e},gi.multiply=gi.mul=function(e,n,t){return Wn.multiply(e.array,n.array,t.array),e._dirty=!0,e},gi.negate=function(e,n){return Wn.negate(e.array,n.array),e._dirty=!0,e},gi.normalize=function(e,n){return Wn.normalize(e.array,n.array),e._dirty=!0,e},gi.random=function(e,n){return Wn.random(e.array,n),e._dirty=!0,e},gi.scale=function(e,n,t){return Wn.scale(e.array,n.array,t),e._dirty=!0,e},gi.scaleAndAdd=function(e,n,t,r){return Wn.scaleAndAdd(e.array,n.array,t.array,r),e._dirty=!0,e},gi.squaredDistance=gi.sqrDist=function(e,n){return Wn.sqrDist(e.array,n.array)},gi.squaredLength=gi.sqrLen=function(e){return Wn.sqrLen(e.array)},gi.subtract=gi.sub=function(e,n,t){return Wn.subtract(e.array,n.array,t.array),e._dirty=!0,e},gi.transformMat4=function(e,n,t){return Wn.transformMat4(e.array,n.array,t.array),e._dirty=!0,e},gi.transformQuat=function(e,n,t){return Wn.transformQuat(e.array,n.array,t.array),e._dirty=!0,e};const Jne=gi;var Is={create:function(){var e=new Ko(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},clone:function(e){var n=new Ko(4);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n},copy:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},transpose:function(e,n){if(e===n){var t=n[1];e[1]=n[2],e[2]=t}else e[0]=n[0],e[1]=n[2],e[2]=n[1],e[3]=n[3];return e},invert:function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],d=t*o-i*r;return d?(e[0]=o*(d=1/d),e[1]=-r*d,e[2]=-i*d,e[3]=t*d,e):null},adjoint:function(e,n){var t=n[0];return e[0]=n[3],e[1]=-n[1],e[2]=-n[2],e[3]=t,e},determinant:function(e){return e[0]*e[3]-e[2]*e[1]},multiply:function(e,n,t){var r=n[0],i=n[1],o=n[2],d=n[3],f=t[0],g=t[1],_=t[2],C=t[3];return e[0]=r*f+o*g,e[1]=i*f+d*g,e[2]=r*_+o*C,e[3]=i*_+d*C,e}};Is.mul=Is.multiply,Is.rotate=function(e,n,t){var r=n[0],i=n[1],o=n[2],d=n[3],f=Math.sin(t),g=Math.cos(t);return e[0]=r*g+o*f,e[1]=i*g+d*f,e[2]=r*-f+o*g,e[3]=i*-f+d*g,e},Is.scale=function(e,n,t){var i=n[1],o=n[2],d=n[3],f=t[0],g=t[1];return e[0]=n[0]*f,e[1]=i*f,e[2]=o*g,e[3]=d*g,e},Is.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},Is.LDU=function(e,n,t,r){return e[2]=r[2]/r[0],t[0]=r[0],t[1]=r[1],t[3]=r[3]-e[2]*t[1],[e,n,t]};const Fa=Is;var Ys=function(){this.array=Fa.create(),this._dirty=!0};Ys.prototype={constructor:Ys,setArray:function(e){for(var n=0;n<this.array.length;n++)this.array[n]=e[n];return this._dirty=!0,this},clone:function(){return(new Ys).copy(this)},copy:function(e){return Fa.copy(this.array,e.array),this._dirty=!0,this},adjoint:function(){return Fa.adjoint(this.array,this.array),this._dirty=!0,this},determinant:function(){return Fa.determinant(this.array)},identity:function(){return Fa.identity(this.array),this._dirty=!0,this},invert:function(){return Fa.invert(this.array,this.array),this._dirty=!0,this},mul:function(e){return Fa.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return Fa.mul(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return Fa.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return Fa.multiply(this.array,e.array,this.array),this._dirty=!0,this},rotate:function(e){return Fa.rotate(this.array,this.array,e),this._dirty=!0,this},scale:function(e){return Fa.scale(this.array,this.array,e.array),this._dirty=!0,this},transpose:function(){return Fa.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Ys.adjoint=function(e,n){return Fa.adjoint(e.array,n.array),e._dirty=!0,e},Ys.copy=function(e,n){return Fa.copy(e.array,n.array),e._dirty=!0,e},Ys.determinant=function(e){return Fa.determinant(e.array)},Ys.identity=function(e){return Fa.identity(e.array),e._dirty=!0,e},Ys.invert=function(e,n){return Fa.invert(e.array,n.array),e._dirty=!0,e},Ys.multiply=Ys.mul=function(e,n,t){return Fa.mul(e.array,n.array,t.array),e._dirty=!0,e},Ys.rotate=function(e,n,t){return Fa.rotate(e.array,n.array,t),e._dirty=!0,e},Ys.scale=function(e,n,t){return Fa.scale(e.array,n.array,t.array),e._dirty=!0,e},Ys.transpose=function(e,n){return Fa.transpose(e.array,n.array),e._dirty=!0,e};const ere=Ys;var Sl={create:function(){var e=new Ko(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},clone:function(e){var n=new Ko(6);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n},copy:function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},invert:function(e,n){var t=n[0],r=n[1],i=n[2],o=n[3],d=n[4],f=n[5],g=t*o-r*i;return g?(e[0]=o*(g=1/g),e[1]=-r*g,e[2]=-i*g,e[3]=t*g,e[4]=(i*f-o*d)*g,e[5]=(r*d-t*f)*g,e):null},determinant:function(e){return e[0]*e[3]-e[1]*e[2]},multiply:function(e,n,t){var r=n[0],i=n[1],o=n[2],d=n[3],f=n[4],g=n[5],_=t[0],C=t[1],S=t[2],k=t[3],z=t[4],te=t[5];return e[0]=r*_+o*C,e[1]=i*_+d*C,e[2]=r*S+o*k,e[3]=i*S+d*k,e[4]=r*z+o*te+f,e[5]=i*z+d*te+g,e}};Sl.mul=Sl.multiply,Sl.rotate=function(e,n,t){var r=n[0],i=n[1],o=n[2],d=n[3],f=n[4],g=n[5],_=Math.sin(t),C=Math.cos(t);return e[0]=r*C+o*_,e[1]=i*C+d*_,e[2]=r*-_+o*C,e[3]=i*-_+d*C,e[4]=f,e[5]=g,e},Sl.scale=function(e,n,t){var i=n[1],o=n[2],d=n[3],f=n[4],g=n[5],_=t[0],C=t[1];return e[0]=n[0]*_,e[1]=i*_,e[2]=o*C,e[3]=d*C,e[4]=f,e[5]=g,e},Sl.translate=function(e,n,t){var r=n[0],i=n[1],o=n[2],d=n[3],f=n[4],g=n[5],_=t[0],C=t[1];return e[0]=r,e[1]=i,e[2]=o,e[3]=d,e[4]=r*_+o*C+f,e[5]=i*_+d*C+g,e},Sl.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)};const lo=Sl;var Dl=function(){this.array=lo.create(),this._dirty=!0};Dl.prototype={constructor:Dl,setArray:function(e){for(var n=0;n<this.array.length;n++)this.array[n]=e[n];return this._dirty=!0,this},clone:function(){return(new Dl).copy(this)},copy:function(e){return lo.copy(this.array,e.array),this._dirty=!0,this},determinant:function(){return lo.determinant(this.array)},identity:function(){return lo.identity(this.array),this._dirty=!0,this},invert:function(){return lo.invert(this.array,this.array),this._dirty=!0,this},mul:function(e){return lo.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return lo.mul(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return lo.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return lo.multiply(this.array,e.array,this.array),this._dirty=!0,this},rotate:function(e){return lo.rotate(this.array,this.array,e),this._dirty=!0,this},scale:function(e){return lo.scale(this.array,this.array,e.array),this._dirty=!0,this},translate:function(e){return lo.translate(this.array,this.array,e.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Dl.copy=function(e,n){return lo.copy(e.array,n.array),e._dirty=!0,e},Dl.determinant=function(e){return lo.determinant(e.array)},Dl.identity=function(e){return lo.identity(e.array),e._dirty=!0,e},Dl.invert=function(e,n){return lo.invert(e.array,n.array),e._dirty=!0,e},Dl.multiply=Dl.mul=function(e,n,t){return lo.mul(e.array,n.array,t.array),e._dirty=!0,e},Dl.rotate=function(e,n,t){return lo.rotate(e.array,n.array,t),e._dirty=!0,e},Dl.scale=function(e,n,t){return lo.scale(e.array,n.array,t.array),e._dirty=!0,e},Dl.translate=function(e,n,t){return lo.translate(e.array,n.array,t.array),e._dirty=!0,e};const tre=Dl;var Co=function(){this.array=hi.create(),this._dirty=!0};Co.prototype={constructor:Co,setArray:function(e){for(var n=0;n<this.array.length;n++)this.array[n]=e[n];return this._dirty=!0,this},adjoint:function(){return hi.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return(new Co).copy(this)},copy:function(e){return hi.copy(this.array,e.array),this._dirty=!0,this},determinant:function(){return hi.determinant(this.array)},fromMat2d:function(e){return hi.fromMat2d(this.array,e.array),this._dirty=!0,this},fromMat4:function(e){return hi.fromMat4(this.array,e.array),this._dirty=!0,this},fromQuat:function(e){return hi.fromQuat(this.array,e.array),this._dirty=!0,this},identity:function(){return hi.identity(this.array),this._dirty=!0,this},invert:function(){return hi.invert(this.array,this.array),this._dirty=!0,this},mul:function(e){return hi.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return hi.mul(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return hi.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return hi.multiply(this.array,e.array,this.array),this._dirty=!0,this},rotate:function(e){return hi.rotate(this.array,this.array,e),this._dirty=!0,this},scale:function(e){return hi.scale(this.array,this.array,e.array),this._dirty=!0,this},translate:function(e){return hi.translate(this.array,this.array,e.array),this._dirty=!0,this},normalFromMat4:function(e){return hi.normalFromMat4(this.array,e.array),this._dirty=!0,this},transpose:function(){return hi.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Co.adjoint=function(e,n){return hi.adjoint(e.array,n.array),e._dirty=!0,e},Co.copy=function(e,n){return hi.copy(e.array,n.array),e._dirty=!0,e},Co.determinant=function(e){return hi.determinant(e.array)},Co.identity=function(e){return hi.identity(e.array),e._dirty=!0,e},Co.invert=function(e,n){return hi.invert(e.array,n.array),e},Co.multiply=Co.mul=function(e,n,t){return hi.mul(e.array,n.array,t.array),e._dirty=!0,e},Co.fromMat2d=function(e,n){return hi.fromMat2d(e.array,n.array),e._dirty=!0,e},Co.fromMat4=function(e,n){return hi.fromMat4(e.array,n.array),e._dirty=!0,e},Co.fromQuat=function(e,n){return hi.fromQuat(e.array,n.array),e._dirty=!0,e},Co.normalFromMat4=function(e,n){return hi.normalFromMat4(e.array,n.array),e._dirty=!0,e},Co.rotate=function(e,n,t){return hi.rotate(e.array,n.array,t),e._dirty=!0,e},Co.scale=function(e,n,t){return hi.scale(e.array,n.array,t.array),e._dirty=!0,e},Co.transpose=function(e,n){return hi.transpose(e.array,n.array),e._dirty=!0,e},Co.translate=function(e,n,t){return hi.translate(e.array,n.array,t.array),e._dirty=!0,e};const nre=Co;var rre=H(6062),ire={_animators:null,getAnimators:function(){return this._animators=this._animators||[],this._animators},animate:function(e,n){var r;if(this._animators=this._animators||[],e){for(var i=e.split("."),o=this,d=0,f=i.length;d<f;d++)!o||(o=o[i[d]]);o&&(r=o)}else r=this;if(null==r)throw new Error("Target "+e+" not exists");var g=this._animators,_=new rre.Z(r,n),C=this;return _.during(function(){C.__zr&&C.__zr.refresh()}).done(function(){var S=g.indexOf(_);S>=0&&g.splice(S,1)}),g.push(_),this.__zr&&this.__zr.animation.addAnimator(_),_},stopAnimation:function(e){this._animators=this._animators||[];for(var n=this._animators,t=n.length,r=0;r<t;r++)n[r].stop(e);return n.length=0,this},addAnimatorsToZr:function(e){if(this._animators)for(var n=0;n<this._animators.length;n++)e.animation.addAnimator(this._animators[n])},removeAnimatorsFromZr:function(e){if(this._animators)for(var n=0;n<this._animators.length;n++)e.animation.removeAnimator(this._animators[n])}};const OW="\n@export clay.util.rand\nhighp float rand(vec2 uv) {\n const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n highp float dt = dot(uv.xy, vec2(a,b)), sn = mod(dt, 3.141592653589793);\n return fract(sin(sn) * c);\n}\n@end\n@export clay.util.calculate_attenuation\nuniform float attenuationFactor : 5.0;\nfloat lightAttenuation(float dist, float range)\n{\n float attenuation = 1.0;\n attenuation = dist*dist/(range*range+1.0);\n float att_s = attenuationFactor;\n attenuation = 1.0/(attenuation*att_s+1.0);\n att_s = 1.0/(att_s+1.0);\n attenuation = attenuation - att_s;\n attenuation /= 1.0 - att_s;\n return clamp(attenuation, 0.0, 1.0);\n}\n@end\n@export clay.util.edge_factor\n#ifdef SUPPORT_STANDARD_DERIVATIVES\nfloat edgeFactor(float width)\n{\n vec3 d = fwidth(v_Barycentric);\n vec3 a3 = smoothstep(vec3(0.0), d * width, v_Barycentric);\n return min(min(a3.x, a3.y), a3.z);\n}\n#else\nfloat edgeFactor(float width)\n{\n return 1.0;\n}\n#endif\n@end\n@export clay.util.encode_float\nvec4 encodeFloat(const in float depth)\n{\n const vec4 bitShifts = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n const vec4 bit_mask = vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n vec4 res = fract(depth * bitShifts);\n res -= res.xxyz * bit_mask;\n return res;\n}\n@end\n@export clay.util.decode_float\nfloat decodeFloat(const in vec4 color)\n{\n const vec4 bitShifts = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n return dot(color, bitShifts);\n}\n@end\n@export clay.util.float\n@import clay.util.encode_float\n@import clay.util.decode_float\n@end\n@export clay.util.rgbm_decode\nvec3 RGBMDecode(vec4 rgbm, float range) {\n return range * rgbm.rgb * rgbm.a;\n}\n@end\n@export clay.util.rgbm_encode\nvec4 RGBMEncode(vec3 color, float range) {\n if (dot(color, color) == 0.0) {\n return vec4(0.0);\n }\n vec4 rgbm;\n color /= range;\n rgbm.a = clamp(max(max(color.r, color.g), max(color.b, 1e-6)), 0.0, 1.0);\n rgbm.a = ceil(rgbm.a * 255.0) / 255.0;\n rgbm.rgb = color / rgbm.a;\n return rgbm;\n}\n@end\n@export clay.util.rgbm\n@import clay.util.rgbm_decode\n@import clay.util.rgbm_encode\nvec4 decodeHDR(vec4 color)\n{\n#if defined(RGBM_DECODE) || defined(RGBM)\n return vec4(RGBMDecode(color, 8.12), 1.0);\n#else\n return color;\n#endif\n}\nvec4 encodeHDR(vec4 color)\n{\n#if defined(RGBM_ENCODE) || defined(RGBM)\n return RGBMEncode(color.xyz, 8.12);\n#else\n return color;\n#endif\n}\n@end\n@export clay.util.srgb\nvec4 sRGBToLinear(in vec4 value) {\n return vec4(mix(pow(value.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), value.rgb * 0.0773993808, vec3(lessThanEqual(value.rgb, vec3(0.04045)))), value.w);\n}\nvec4 linearTosRGB(in vec4 value) {\n return vec4(mix(pow(value.rgb, vec3(0.41666)) * 1.055 - vec3(0.055), value.rgb * 12.92, vec3(lessThanEqual(value.rgb, vec3(0.0031308)))), value.w);\n}\n@end\n@export clay.chunk.skinning_header\n#ifdef SKINNING\nattribute vec3 weight : WEIGHT;\nattribute vec4 joint : JOINT;\n#ifdef USE_SKIN_MATRICES_TEXTURE\nuniform sampler2D skinMatricesTexture : ignore;\nuniform float skinMatricesTextureSize: ignore;\nmat4 getSkinMatrix(sampler2D tex, float idx) {\n float j = idx * 4.0;\n float x = mod(j, skinMatricesTextureSize);\n float y = floor(j / skinMatricesTextureSize) + 0.5;\n vec2 scale = vec2(skinMatricesTextureSize);\n return mat4(\n texture2D(tex, vec2(x + 0.5, y) / scale),\n texture2D(tex, vec2(x + 1.5, y) / scale),\n texture2D(tex, vec2(x + 2.5, y) / scale),\n texture2D(tex, vec2(x + 3.5, y) / scale)\n );\n}\nmat4 getSkinMatrix(float idx) {\n return getSkinMatrix(skinMatricesTexture, idx);\n}\n#else\nuniform mat4 skinMatrix[JOINT_COUNT] : SKIN_MATRIX;\nmat4 getSkinMatrix(float idx) {\n return skinMatrix[int(idx)];\n}\n#endif\n#endif\n@end\n@export clay.chunk.skin_matrix\nmat4 skinMatrixWS = getSkinMatrix(joint.x) * weight.x;\nif (weight.y > 1e-4)\n{\n skinMatrixWS += getSkinMatrix(joint.y) * weight.y;\n}\nif (weight.z > 1e-4)\n{\n skinMatrixWS += getSkinMatrix(joint.z) * weight.z;\n}\nfloat weightW = 1.0-weight.x-weight.y-weight.z;\nif (weightW > 1e-4)\n{\n skinMatrixWS += getSkinMatrix(joint.w) * weightW;\n}\n@end\n@export clay.chunk.instancing_header\n#ifdef INSTANCING\nattribute vec4 instanceMat1;\nattribute vec4 instanceMat2;\nattribute vec4 instanceMat3;\n#endif\n@end\n@export clay.chunk.instancing_matrix\nmat4 instanceMat = mat4(\n vec4(instanceMat1.xyz, 0.0),\n vec4(instanceMat2.xyz, 0.0),\n vec4(instanceMat3.xyz, 0.0),\n vec4(instanceMat1.w, instanceMat2.w, instanceMat3.w, 1.0)\n);\n@end\n@export clay.util.parallax_correct\nvec3 parallaxCorrect(in vec3 dir, in vec3 pos, in vec3 boxMin, in vec3 boxMax) {\n vec3 first = (boxMax - pos) / dir;\n vec3 second = (boxMin - pos) / dir;\n vec3 further = max(first, second);\n float dist = min(further.x, min(further.y, further.z));\n vec3 fixedPos = pos + dir * dist;\n vec3 boxCenter = (boxMax + boxMin) * 0.5;\n return normalize(fixedPos - boxCenter);\n}\n@end\n@export clay.util.clamp_sample\nvec4 clampSample(const in sampler2D texture, const in vec2 coord)\n{\n#ifdef STEREO\n float eye = step(0.5, coord.x) * 0.5;\n vec2 coordClamped = clamp(coord, vec2(eye, 0.0), vec2(0.5 + eye, 1.0));\n#else\n vec2 coordClamped = clamp(coord, vec2(0.0), vec2(1.0));\n#endif\n return texture2D(texture, coordClamped);\n}\n@end\n@export clay.util.ACES\nvec3 ACESToneMapping(vec3 color)\n{\n const float A = 2.51;\n const float B = 0.03;\n const float C = 2.43;\n const float D = 0.59;\n const float E = 0.14;\n return (color * (A * color + B)) / (color * (C * color + D) + E);\n}\n@end";function kW(e){return e instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof Image}Object.assign(Ju.prototype,ire),Un.import(OW),Un.import(cW),Un.import("\n@export ecgl.common.transformUniforms\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;\nuniform mat4 world : WORLD;\n@end\n\n@export ecgl.common.attributes\nattribute vec3 position : POSITION;\nattribute vec2 texcoord : TEXCOORD_0;\nattribute vec3 normal : NORMAL;\n@end\n\n@export ecgl.common.uv.header\nuniform vec2 uvRepeat : [1.0, 1.0];\nuniform vec2 uvOffset : [0.0, 0.0];\nuniform vec2 detailUvRepeat : [1.0, 1.0];\nuniform vec2 detailUvOffset : [0.0, 0.0];\n\nvarying vec2 v_Texcoord;\nvarying vec2 v_DetailTexcoord;\n@end\n\n@export ecgl.common.uv.main\nv_Texcoord = texcoord * uvRepeat + uvOffset;\nv_DetailTexcoord = texcoord * detailUvRepeat + detailUvOffset;\n@end\n\n@export ecgl.common.uv.fragmentHeader\nvarying vec2 v_Texcoord;\nvarying vec2 v_DetailTexcoord;\n@end\n\n\n@export ecgl.common.albedo.main\n\n vec4 albedoTexel = vec4(1.0);\n#ifdef DIFFUSEMAP_ENABLED\n albedoTexel = texture2D(diffuseMap, v_Texcoord);\n #ifdef SRGB_DECODE\n albedoTexel = sRGBToLinear(albedoTexel);\n #endif\n#endif\n\n#ifdef DETAILMAP_ENABLED\n vec4 detailTexel = texture2D(detailMap, v_DetailTexcoord);\n #ifdef SRGB_DECODE\n detailTexel = sRGBToLinear(detailTexel);\n #endif\n albedoTexel.rgb = mix(albedoTexel.rgb, detailTexel.rgb, detailTexel.a);\n albedoTexel.a = detailTexel.a + (1.0 - detailTexel.a) * albedoTexel.a;\n#endif\n\n@end\n\n@export ecgl.common.wireframe.vertexHeader\n\n#ifdef WIREFRAME_QUAD\nattribute vec4 barycentric;\nvarying vec4 v_Barycentric;\n#elif defined(WIREFRAME_TRIANGLE)\nattribute vec3 barycentric;\nvarying vec3 v_Barycentric;\n#endif\n\n@end\n\n@export ecgl.common.wireframe.vertexMain\n\n#if defined(WIREFRAME_QUAD) || defined(WIREFRAME_TRIANGLE)\n v_Barycentric = barycentric;\n#endif\n\n@end\n\n\n@export ecgl.common.wireframe.fragmentHeader\n\nuniform float wireframeLineWidth : 1;\nuniform vec4 wireframeLineColor: [0, 0, 0, 0.5];\n\n#ifdef WIREFRAME_QUAD\nvarying vec4 v_Barycentric;\nfloat edgeFactor () {\n vec4 d = fwidth(v_Barycentric);\n vec4 a4 = smoothstep(vec4(0.0), d * wireframeLineWidth, v_Barycentric);\n return min(min(min(a4.x, a4.y), a4.z), a4.w);\n}\n#elif defined(WIREFRAME_TRIANGLE)\nvarying vec3 v_Barycentric;\nfloat edgeFactor () {\n vec3 d = fwidth(v_Barycentric);\n vec3 a3 = smoothstep(vec3(0.0), d * wireframeLineWidth, v_Barycentric);\n return min(min(a3.x, a3.y), a3.z);\n}\n#endif\n\n@end\n\n\n@export ecgl.common.wireframe.fragmentMain\n\n#if defined(WIREFRAME_QUAD) || defined(WIREFRAME_TRIANGLE)\n if (wireframeLineWidth > 0.) {\n vec4 lineColor = wireframeLineColor;\n#ifdef SRGB_DECODE\n lineColor = sRGBToLinear(lineColor);\n#endif\n\n gl_FragColor.rgb = mix(gl_FragColor.rgb, lineColor.rgb, (1.0 - edgeFactor()) * lineColor.a);\n }\n#endif\n@end\n\n\n\n\n@export ecgl.common.bumpMap.header\n\n#ifdef BUMPMAP_ENABLED\nuniform sampler2D bumpMap;\nuniform float bumpScale : 1.0;\n\n\nvec3 bumpNormal(vec3 surfPos, vec3 surfNormal, vec3 baseNormal)\n{\n vec2 dSTdx = dFdx(v_Texcoord);\n vec2 dSTdy = dFdy(v_Texcoord);\n\n float Hll = bumpScale * texture2D(bumpMap, v_Texcoord).x;\n float dHx = bumpScale * texture2D(bumpMap, v_Texcoord + dSTdx).x - Hll;\n float dHy = bumpScale * texture2D(bumpMap, v_Texcoord + dSTdy).x - Hll;\n\n vec3 vSigmaX = dFdx(surfPos);\n vec3 vSigmaY = dFdy(surfPos);\n vec3 vN = surfNormal;\n\n vec3 R1 = cross(vSigmaY, vN);\n vec3 R2 = cross(vN, vSigmaX);\n\n float fDet = dot(vSigmaX, R1);\n\n vec3 vGrad = sign(fDet) * (dHx * R1 + dHy * R2);\n return normalize(abs(fDet) * baseNormal - vGrad);\n\n}\n#endif\n\n@end\n\n@export ecgl.common.normalMap.vertexHeader\n\n#ifdef NORMALMAP_ENABLED\nattribute vec4 tangent : TANGENT;\nvarying vec3 v_Tangent;\nvarying vec3 v_Bitangent;\n#endif\n\n@end\n\n@export ecgl.common.normalMap.vertexMain\n\n#ifdef NORMALMAP_ENABLED\n if (dot(tangent, tangent) > 0.0) {\n v_Tangent = normalize((worldInverseTranspose * vec4(tangent.xyz, 0.0)).xyz);\n v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);\n }\n#endif\n\n@end\n\n\n@export ecgl.common.normalMap.fragmentHeader\n\n#ifdef NORMALMAP_ENABLED\nuniform sampler2D normalMap;\nvarying vec3 v_Tangent;\nvarying vec3 v_Bitangent;\n#endif\n\n@end\n\n@export ecgl.common.normalMap.fragmentMain\n#ifdef NORMALMAP_ENABLED\n if (dot(v_Tangent, v_Tangent) > 0.0) {\n vec3 normalTexel = texture2D(normalMap, v_DetailTexcoord).xyz;\n if (dot(normalTexel, normalTexel) > 0.0) { N = normalTexel * 2.0 - 1.0;\n mat3 tbn = mat3(v_Tangent, v_Bitangent, v_Normal);\n N = normalize(tbn * N);\n }\n }\n#endif\n@end\n\n\n\n@export ecgl.common.vertexAnimation.header\n\n#ifdef VERTEX_ANIMATION\nattribute vec3 prevPosition;\nattribute vec3 prevNormal;\nuniform float percent;\n#endif\n\n@end\n\n@export ecgl.common.vertexAnimation.main\n\n#ifdef VERTEX_ANIMATION\n vec3 pos = mix(prevPosition, position, percent);\n vec3 norm = mix(prevNormal, normal, percent);\n#else\n vec3 pos = position;\n vec3 norm = normal;\n#endif\n\n@end\n\n\n@export ecgl.common.ssaoMap.header\n#ifdef SSAOMAP_ENABLED\nuniform sampler2D ssaoMap;\nuniform vec4 viewport : VIEWPORT;\n#endif\n@end\n\n@export ecgl.common.ssaoMap.main\n float ao = 1.0;\n#ifdef SSAOMAP_ENABLED\n ao = texture2D(ssaoMap, (gl_FragCoord.xy - viewport.xy) / viewport.zw).r;\n#endif\n@end\n\n\n\n\n@export ecgl.common.diffuseLayer.header\n\n#if (LAYER_DIFFUSEMAP_COUNT > 0)\nuniform float layerDiffuseIntensity[LAYER_DIFFUSEMAP_COUNT];\nuniform sampler2D layerDiffuseMap[LAYER_DIFFUSEMAP_COUNT];\n#endif\n\n@end\n\n@export ecgl.common.emissiveLayer.header\n\n#if (LAYER_EMISSIVEMAP_COUNT > 0)\nuniform float layerEmissionIntensity[LAYER_EMISSIVEMAP_COUNT];\nuniform sampler2D layerEmissiveMap[LAYER_EMISSIVEMAP_COUNT];\n#endif\n\n@end\n\n@export ecgl.common.layers.header\n@import ecgl.common.diffuseLayer.header\n@import ecgl.common.emissiveLayer.header\n@end\n\n@export ecgl.common.diffuseLayer.main\n\n#if (LAYER_DIFFUSEMAP_COUNT > 0)\n for (int _idx_ = 0; _idx_ < LAYER_DIFFUSEMAP_COUNT; _idx_++) {{\n float intensity = layerDiffuseIntensity[_idx_];\n vec4 texel2 = texture2D(layerDiffuseMap[_idx_], v_Texcoord);\n #ifdef SRGB_DECODE\n texel2 = sRGBToLinear(texel2);\n #endif\n albedoTexel.rgb = mix(albedoTexel.rgb, texel2.rgb * intensity, texel2.a);\n albedoTexel.a = texel2.a + (1.0 - texel2.a) * albedoTexel.a;\n }}\n#endif\n\n@end\n\n@export ecgl.common.emissiveLayer.main\n\n#if (LAYER_EMISSIVEMAP_COUNT > 0)\n for (int _idx_ = 0; _idx_ < LAYER_EMISSIVEMAP_COUNT; _idx_++)\n {{\n vec4 texel2 = texture2D(layerEmissiveMap[_idx_], v_Texcoord) * layerEmissionIntensity[_idx_];\n #ifdef SRGB_DECODE\n texel2 = sRGBToLinear(texel2);\n #endif\n float intensity = layerEmissionIntensity[_idx_];\n gl_FragColor.rgb += texel2.rgb * texel2.a * intensity;\n }}\n#endif\n\n@end\n"),Un.import("@export ecgl.color.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\n@import ecgl.common.uv.header\n\nattribute vec2 texcoord : TEXCOORD_0;\nattribute vec3 position: POSITION;\n\n@import ecgl.common.wireframe.vertexHeader\n\n#ifdef VERTEX_COLOR\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n#endif\n\n#ifdef VERTEX_ANIMATION\nattribute vec3 prevPosition;\nuniform float percent : 1.0;\n#endif\n\n#ifdef ATMOSPHERE_ENABLED\nattribute vec3 normal: NORMAL;\nuniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;\nvarying vec3 v_Normal;\n#endif\n\nvoid main()\n{\n#ifdef VERTEX_ANIMATION\n vec3 pos = mix(prevPosition, position, percent);\n#else\n vec3 pos = position;\n#endif\n\n gl_Position = worldViewProjection * vec4(pos, 1.0);\n\n @import ecgl.common.uv.main\n\n#ifdef VERTEX_COLOR\n v_Color = a_Color;\n#endif\n\n#ifdef ATMOSPHERE_ENABLED\n v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);\n#endif\n\n @import ecgl.common.wireframe.vertexMain\n\n}\n\n@end\n\n@export ecgl.color.fragment\n\n#define LAYER_DIFFUSEMAP_COUNT 0\n#define LAYER_EMISSIVEMAP_COUNT 0\n\nuniform sampler2D diffuseMap;\nuniform sampler2D detailMap;\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\n#ifdef ATMOSPHERE_ENABLED\nuniform mat4 viewTranspose: VIEWTRANSPOSE;\nuniform vec3 glowColor;\nuniform float glowPower;\nvarying vec3 v_Normal;\n#endif\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\n\n@import ecgl.common.layers.header\n\n@import ecgl.common.uv.fragmentHeader\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.util.srgb\n\nvoid main()\n{\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(color);\n#else\n gl_FragColor = color;\n#endif\n\n#ifdef VERTEX_COLOR\n gl_FragColor *= v_Color;\n#endif\n\n @import ecgl.common.albedo.main\n\n @import ecgl.common.diffuseLayer.main\n\n gl_FragColor *= albedoTexel;\n\n#ifdef ATMOSPHERE_ENABLED\n float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);\n gl_FragColor.rgb += glowColor * atmoIntensity;\n#endif\n\n @import ecgl.common.emissiveLayer.main\n\n @import ecgl.common.wireframe.fragmentMain\n\n}\n@end"),Un.import("/**\n * http: */\n\n@export ecgl.lambert.vertex\n\n@import ecgl.common.transformUniforms\n\n@import ecgl.common.uv.header\n\n\n@import ecgl.common.attributes\n\n@import ecgl.common.wireframe.vertexHeader\n\n#ifdef VERTEX_COLOR\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n#endif\n\n\n@import ecgl.common.vertexAnimation.header\n\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nvoid main()\n{\n @import ecgl.common.uv.main\n\n @import ecgl.common.vertexAnimation.main\n\n\n gl_Position = worldViewProjection * vec4(pos, 1.0);\n\n v_Normal = normalize((worldInverseTranspose * vec4(norm, 0.0)).xyz);\n v_WorldPosition = (world * vec4(pos, 1.0)).xyz;\n\n#ifdef VERTEX_COLOR\n v_Color = a_Color;\n#endif\n\n @import ecgl.common.wireframe.vertexMain\n}\n\n@end\n\n\n@export ecgl.lambert.fragment\n\n#define LAYER_DIFFUSEMAP_COUNT 0\n#define LAYER_EMISSIVEMAP_COUNT 0\n\n#define NORMAL_UP_AXIS 1\n#define NORMAL_FRONT_AXIS 2\n\n@import ecgl.common.uv.fragmentHeader\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nuniform sampler2D diffuseMap;\nuniform sampler2D detailMap;\n\n@import ecgl.common.layers.header\n\nuniform float emissionIntensity: 1.0;\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nuniform mat4 viewInverse : VIEWINVERSE;\n\n#ifdef ATMOSPHERE_ENABLED\nuniform mat4 viewTranspose: VIEWTRANSPOSE;\nuniform vec3 glowColor;\nuniform float glowPower;\n#endif\n\n#ifdef AMBIENT_LIGHT_COUNT\n@import clay.header.ambient_light\n#endif\n#ifdef AMBIENT_SH_LIGHT_COUNT\n@import clay.header.ambient_sh_light\n#endif\n\n#ifdef DIRECTIONAL_LIGHT_COUNT\n@import clay.header.directional_light\n#endif\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\n\n\n@import ecgl.common.ssaoMap.header\n\n@import ecgl.common.bumpMap.header\n\n@import clay.util.srgb\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.plugin.compute_shadow_map\n\nvoid main()\n{\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(color);\n#else\n gl_FragColor = color;\n#endif\n\n#ifdef VERTEX_COLOR\n #ifdef SRGB_DECODE\n gl_FragColor *= sRGBToLinear(v_Color);\n #else\n gl_FragColor *= v_Color;\n #endif\n#endif\n\n @import ecgl.common.albedo.main\n\n @import ecgl.common.diffuseLayer.main\n\n gl_FragColor *= albedoTexel;\n\n vec3 N = v_Normal;\n#ifdef DOUBLE_SIDED\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(eyePos - v_WorldPosition);\n\n if (dot(N, V) < 0.0) {\n N = -N;\n }\n#endif\n\n float ambientFactor = 1.0;\n\n#ifdef BUMPMAP_ENABLED\n N = bumpNormal(v_WorldPosition, v_Normal, N);\n ambientFactor = dot(v_Normal, N);\n#endif\n\n vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);\n\n vec3 diffuseColor = vec3(0.0, 0.0, 0.0);\n\n @import ecgl.common.ssaoMap.main\n\n#ifdef AMBIENT_LIGHT_COUNT\n for(int i = 0; i < AMBIENT_LIGHT_COUNT; i++)\n {\n diffuseColor += ambientLightColor[i] * ambientFactor * ao;\n }\n#endif\n#ifdef AMBIENT_SH_LIGHT_COUNT\n for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)\n {{\n diffuseColor += calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_] * ao;\n }}\n#endif\n#ifdef DIRECTIONAL_LIGHT_COUNT\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];\n if(shadowEnabled)\n {\n computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);\n }\n#endif\n for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)\n {\n vec3 lightDirection = -directionalLightDirection[i];\n vec3 lightColor = directionalLightColor[i];\n\n float shadowContrib = 1.0;\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n if (shadowEnabled)\n {\n shadowContrib = shadowContribsDir[i];\n }\n#endif\n\n float ndl = dot(N, normalize(lightDirection)) * shadowContrib;\n\n diffuseColor += lightColor * clamp(ndl, 0.0, 1.0);\n }\n#endif\n\n gl_FragColor.rgb *= diffuseColor;\n\n#ifdef ATMOSPHERE_ENABLED\n float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);\n gl_FragColor.rgb += glowColor * atmoIntensity;\n#endif\n\n @import ecgl.common.emissiveLayer.main\n\n @import ecgl.common.wireframe.fragmentMain\n}\n\n@end"),Un.import("@export ecgl.realistic.vertex\n\n@import ecgl.common.transformUniforms\n\n@import ecgl.common.uv.header\n\n@import ecgl.common.attributes\n\n\n@import ecgl.common.wireframe.vertexHeader\n\n#ifdef VERTEX_COLOR\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n#endif\n\n#ifdef NORMALMAP_ENABLED\nattribute vec4 tangent : TANGENT;\nvarying vec3 v_Tangent;\nvarying vec3 v_Bitangent;\n#endif\n\n@import ecgl.common.vertexAnimation.header\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nvoid main()\n{\n\n @import ecgl.common.uv.main\n\n @import ecgl.common.vertexAnimation.main\n\n gl_Position = worldViewProjection * vec4(pos, 1.0);\n\n v_Normal = normalize((worldInverseTranspose * vec4(norm, 0.0)).xyz);\n v_WorldPosition = (world * vec4(pos, 1.0)).xyz;\n\n#ifdef VERTEX_COLOR\n v_Color = a_Color;\n#endif\n\n#ifdef NORMALMAP_ENABLED\n v_Tangent = normalize((worldInverseTranspose * vec4(tangent.xyz, 0.0)).xyz);\n v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);\n#endif\n\n @import ecgl.common.wireframe.vertexMain\n\n}\n\n@end\n\n\n\n@export ecgl.realistic.fragment\n\n#define LAYER_DIFFUSEMAP_COUNT 0\n#define LAYER_EMISSIVEMAP_COUNT 0\n#define PI 3.14159265358979\n#define ROUGHNESS_CHANEL 0\n#define METALNESS_CHANEL 1\n\n#define NORMAL_UP_AXIS 1\n#define NORMAL_FRONT_AXIS 2\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\n\n@import ecgl.common.uv.fragmentHeader\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nuniform sampler2D diffuseMap;\n\nuniform sampler2D detailMap;\nuniform sampler2D metalnessMap;\nuniform sampler2D roughnessMap;\n\n@import ecgl.common.layers.header\n\nuniform float emissionIntensity: 1.0;\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nuniform float metalness : 0.0;\nuniform float roughness : 0.5;\n\nuniform mat4 viewInverse : VIEWINVERSE;\n\n#ifdef ATMOSPHERE_ENABLED\nuniform mat4 viewTranspose: VIEWTRANSPOSE;\nuniform vec3 glowColor;\nuniform float glowPower;\n#endif\n\n#ifdef AMBIENT_LIGHT_COUNT\n@import clay.header.ambient_light\n#endif\n\n#ifdef AMBIENT_SH_LIGHT_COUNT\n@import clay.header.ambient_sh_light\n#endif\n\n#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT\n@import clay.header.ambient_cubemap_light\n#endif\n\n#ifdef DIRECTIONAL_LIGHT_COUNT\n@import clay.header.directional_light\n#endif\n\n@import ecgl.common.normalMap.fragmentHeader\n\n@import ecgl.common.ssaoMap.header\n\n@import ecgl.common.bumpMap.header\n\n@import clay.util.srgb\n\n@import clay.util.rgbm\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.plugin.compute_shadow_map\n\nvec3 F_Schlick(float ndv, vec3 spec) {\n return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);\n}\n\nfloat D_Phong(float g, float ndh) {\n float a = pow(8192.0, g);\n return (a + 2.0) / 8.0 * pow(ndh, a);\n}\n\nvoid main()\n{\n vec4 albedoColor = color;\n\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(eyePos - v_WorldPosition);\n#ifdef VERTEX_COLOR\n #ifdef SRGB_DECODE\n albedoColor *= sRGBToLinear(v_Color);\n #else\n albedoColor *= v_Color;\n #endif\n#endif\n\n @import ecgl.common.albedo.main\n\n @import ecgl.common.diffuseLayer.main\n\n albedoColor *= albedoTexel;\n\n float m = metalness;\n\n#ifdef METALNESSMAP_ENABLED\n float m2 = texture2D(metalnessMap, v_DetailTexcoord)[METALNESS_CHANEL];\n m = clamp(m2 + (m - 0.5) * 2.0, 0.0, 1.0);\n#endif\n\n vec3 baseColor = albedoColor.rgb;\n albedoColor.rgb = baseColor * (1.0 - m);\n vec3 specFactor = mix(vec3(0.04), baseColor, m);\n\n float g = 1.0 - roughness;\n\n#ifdef ROUGHNESSMAP_ENABLED\n float g2 = 1.0 - texture2D(roughnessMap, v_DetailTexcoord)[ROUGHNESS_CHANEL];\n g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);\n#endif\n\n vec3 N = v_Normal;\n\n#ifdef DOUBLE_SIDED\n if (dot(N, V) < 0.0) {\n N = -N;\n }\n#endif\n\n float ambientFactor = 1.0;\n\n#ifdef BUMPMAP_ENABLED\n N = bumpNormal(v_WorldPosition, v_Normal, N);\n ambientFactor = dot(v_Normal, N);\n#endif\n\n@import ecgl.common.normalMap.fragmentMain\n\n vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);\n\n vec3 diffuseTerm = vec3(0.0);\n vec3 specularTerm = vec3(0.0);\n\n float ndv = clamp(dot(N, V), 0.0, 1.0);\n vec3 fresnelTerm = F_Schlick(ndv, specFactor);\n\n @import ecgl.common.ssaoMap.main\n\n#ifdef AMBIENT_LIGHT_COUNT\n for(int _idx_ = 0; _idx_ < AMBIENT_LIGHT_COUNT; _idx_++)\n {{\n diffuseTerm += ambientLightColor[_idx_] * ambientFactor * ao;\n }}\n#endif\n\n#ifdef AMBIENT_SH_LIGHT_COUNT\n for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)\n {{\n diffuseTerm += calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_] * ao;\n }}\n#endif\n\n#ifdef DIRECTIONAL_LIGHT_COUNT\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];\n if(shadowEnabled)\n {\n computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);\n }\n#endif\n for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++)\n {{\n vec3 L = -directionalLightDirection[_idx_];\n vec3 lc = directionalLightColor[_idx_];\n\n vec3 H = normalize(L + V);\n float ndl = clamp(dot(N, normalize(L)), 0.0, 1.0);\n float ndh = clamp(dot(N, H), 0.0, 1.0);\n\n float shadowContrib = 1.0;\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n if (shadowEnabled)\n {\n shadowContrib = shadowContribsDir[_idx_];\n }\n#endif\n\n vec3 li = lc * ndl * shadowContrib;\n\n diffuseTerm += li;\n specularTerm += li * fresnelTerm * D_Phong(g, ndh);\n }}\n#endif\n\n\n#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT\n vec3 L = reflect(-V, N);\n L = vec3(L.x, L[NORMAL_UP_AXIS], L[NORMAL_FRONT_AXIS]);\n float rough2 = clamp(1.0 - g, 0.0, 1.0);\n float bias2 = rough2 * 5.0;\n vec2 brdfParam2 = texture2D(ambientCubemapLightBRDFLookup[0], vec2(rough2, ndv)).xy;\n vec3 envWeight2 = specFactor * brdfParam2.x + brdfParam2.y;\n vec3 envTexel2;\n for(int _idx_ = 0; _idx_ < AMBIENT_CUBEMAP_LIGHT_COUNT; _idx_++)\n {{\n envTexel2 = RGBMDecode(textureCubeLodEXT(ambientCubemapLightCubemap[_idx_], L, bias2), 8.12);\n specularTerm += ambientCubemapLightColor[_idx_] * envTexel2 * envWeight2 * ao;\n }}\n#endif\n\n gl_FragColor.rgb = albedoColor.rgb * diffuseTerm + specularTerm;\n gl_FragColor.a = albedoColor.a;\n\n#ifdef ATMOSPHERE_ENABLED\n float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);\n gl_FragColor.rgb += glowColor * atmoIntensity;\n#endif\n\n#ifdef SRGB_ENCODE\n gl_FragColor = linearTosRGB(gl_FragColor);\n#endif\n\n @import ecgl.common.emissiveLayer.main\n\n @import ecgl.common.wireframe.fragmentMain\n}\n\n@end"),Un.import("@export ecgl.hatching.vertex\n\n@import ecgl.realistic.vertex\n\n@end\n\n\n@export ecgl.hatching.fragment\n\n#define NORMAL_UP_AXIS 1\n#define NORMAL_FRONT_AXIS 2\n\n@import ecgl.common.uv.fragmentHeader\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nuniform vec4 color : [0.0, 0.0, 0.0, 1.0];\nuniform vec4 paperColor : [1.0, 1.0, 1.0, 1.0];\n\nuniform mat4 viewInverse : VIEWINVERSE;\n\n#ifdef AMBIENT_LIGHT_COUNT\n@import clay.header.ambient_light\n#endif\n#ifdef AMBIENT_SH_LIGHT_COUNT\n@import clay.header.ambient_sh_light\n#endif\n\n#ifdef DIRECTIONAL_LIGHT_COUNT\n@import clay.header.directional_light\n#endif\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\n\n\n@import ecgl.common.ssaoMap.header\n\n@import ecgl.common.bumpMap.header\n\n@import clay.util.srgb\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.plugin.compute_shadow_map\n\nuniform sampler2D hatch1;\nuniform sampler2D hatch2;\nuniform sampler2D hatch3;\nuniform sampler2D hatch4;\nuniform sampler2D hatch5;\nuniform sampler2D hatch6;\n\nfloat shade(in float tone) {\n vec4 c = vec4(1. ,1., 1., 1.);\n float step = 1. / 6.;\n vec2 uv = v_DetailTexcoord;\n if (tone <= step / 2.0) {\n c = mix(vec4(0.), texture2D(hatch6, uv), 12. * tone);\n }\n else if (tone <= step) {\n c = mix(texture2D(hatch6, uv), texture2D(hatch5, uv), 6. * tone);\n }\n if(tone > step && tone <= 2. * step){\n c = mix(texture2D(hatch5, uv), texture2D(hatch4, uv) , 6. * (tone - step));\n }\n if(tone > 2. * step && tone <= 3. * step){\n c = mix(texture2D(hatch4, uv), texture2D(hatch3, uv), 6. * (tone - 2. * step));\n }\n if(tone > 3. * step && tone <= 4. * step){\n c = mix(texture2D(hatch3, uv), texture2D(hatch2, uv), 6. * (tone - 3. * step));\n }\n if(tone > 4. * step && tone <= 5. * step){\n c = mix(texture2D(hatch2, uv), texture2D(hatch1, uv), 6. * (tone - 4. * step));\n }\n if(tone > 5. * step){\n c = mix(texture2D(hatch1, uv), vec4(1.), 6. * (tone - 5. * step));\n }\n\n return c.r;\n}\n\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main()\n{\n#ifdef SRGB_DECODE\n vec4 inkColor = sRGBToLinear(color);\n#else\n vec4 inkColor = color;\n#endif\n\n#ifdef VERTEX_COLOR\n #ifdef SRGB_DECODE\n inkColor *= sRGBToLinear(v_Color);\n #else\n inkColor *= v_Color;\n #endif\n#endif\n\n vec3 N = v_Normal;\n#ifdef DOUBLE_SIDED\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(eyePos - v_WorldPosition);\n\n if (dot(N, V) < 0.0) {\n N = -N;\n }\n#endif\n\n float tone = 0.0;\n\n float ambientFactor = 1.0;\n\n#ifdef BUMPMAP_ENABLED\n N = bumpNormal(v_WorldPosition, v_Normal, N);\n ambientFactor = dot(v_Normal, N);\n#endif\n\n vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);\n\n @import ecgl.common.ssaoMap.main\n\n#ifdef AMBIENT_LIGHT_COUNT\n for(int i = 0; i < AMBIENT_LIGHT_COUNT; i++)\n {\n tone += dot(ambientLightColor[i], w) * ambientFactor * ao;\n }\n#endif\n#ifdef AMBIENT_SH_LIGHT_COUNT\n for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)\n {{\n tone += dot(calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_], w) * ao;\n }}\n#endif\n#ifdef DIRECTIONAL_LIGHT_COUNT\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];\n if(shadowEnabled)\n {\n computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);\n }\n#endif\n for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)\n {\n vec3 lightDirection = -directionalLightDirection[i];\n float lightTone = dot(directionalLightColor[i], w);\n\n float shadowContrib = 1.0;\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n if (shadowEnabled)\n {\n shadowContrib = shadowContribsDir[i];\n }\n#endif\n\n float ndl = dot(N, normalize(lightDirection)) * shadowContrib;\n\n tone += lightTone * clamp(ndl, 0.0, 1.0);\n }\n#endif\n\n gl_FragColor = mix(inkColor, paperColor, shade(clamp(tone, 0.0, 1.0)));\n }\n@end\n"),Un.import("@export ecgl.sm.depth.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nattribute vec3 position : POSITION;\nattribute vec2 texcoord : TEXCOORD_0;\n\n#ifdef VERTEX_ANIMATION\nattribute vec3 prevPosition;\nuniform float percent : 1.0;\n#endif\n\nvarying vec4 v_ViewPosition;\nvarying vec2 v_Texcoord;\n\nvoid main(){\n\n#ifdef VERTEX_ANIMATION\n vec3 pos = mix(prevPosition, position, percent);\n#else\n vec3 pos = position;\n#endif\n\n v_ViewPosition = worldViewProjection * vec4(pos, 1.0);\n gl_Position = v_ViewPosition;\n\n v_Texcoord = texcoord;\n\n}\n@end\n\n\n\n@export ecgl.sm.depth.fragment\n\n@import clay.sm.depth.fragment\n\n@end");var pre=Df.prototype.addToScene,gre=Df.prototype.removeFromScene;Df.prototype.addToScene=function(e){if(pre.call(this,e),this.__zr){var n=this.__zr;e.traverse(function(t){t.__zr=n,t.addAnimatorsToZr&&t.addAnimatorsToZr(n)})}},Df.prototype.removeFromScene=function(e){gre.call(this,e),e.traverse(function(n){var t=n.__zr;n.__zr=null,t&&n.removeAnimatorsFromZr&&n.removeAnimatorsFromZr(t)})},Pc.prototype.setTextureImage=function(e,n,t,r){if(this.shader){var d,i=t.getZr(),o=this;return o.autoUpdateTextureStatus=!1,o.disableTexture(e),function hre(e){return!e||"none"===e}(n)||(d=Dr.loadTexture(n,t,r,function(f){o.enableTexture(e),i&&i.refresh()}),o.set(e,d)),d}};var Dr={};Dr.Renderer=XC,Dr.Node=Ju,Dr.Mesh=Hg,Dr.Shader=Un,Dr.Material=Pc,Dr.Texture=hr,Dr.Texture2D=$r,Dr.Geometry=Di,Dr.SphereGeometry=Wne,Dr.PlaneGeometry=AI,Dr.CubeGeometry=AW,Dr.AmbientLight=Zne,Dr.DirectionalLight=Xne,Dr.PointLight=Kne,Dr.SpotLight=qne,Dr.PerspectiveCamera=No,Dr.OrthographicCamera=Hy,Dr.Vector2=jl,Dr.Vector3=Ln,Dr.Vector4=Jne,Dr.Quaternion=pW,Dr.Matrix2=ere,Dr.Matrix2d=tre,Dr.Matrix3=nre,Dr.Matrix4=ir,Dr.Plane=xW,Dr.Ray=_I,Dr.BoundingBox=js,Dr.Frustum=m3;var kI=null;function NW(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))}function FW(e){if((e.wrapS===hr.REPEAT||e.wrapT===hr.REPEAT)&&e.image){var n=NW(e.width),t=NW(e.height);if(n!==e.width||t!==e.height){var r=document.createElement("canvas");r.width=n,r.height=t,r.getContext("2d").drawImage(e.image,0,0,n,t),e.image=r}}}Dr.loadTexture=function(e,n,t,r){"function"==typeof t&&(r=t,t={}),t=t||{};for(var i=Object.keys(t).sort(),o="",d=0;d<i.length;d++)o+=i[d]+"_"+t[i[d]]+"_";var f=n.__textureCache=n.__textureCache||new Wte.ZP(20);if(function fre(e){return e.getZr&&e.setOption}(e)){if(_=f.get(o+(g=e.__textureid__)))_.texture.surface.setECharts(e),r&&r(_.texture);else{var C=new Mne(e);for(C.onupdate=function(){n.getZr().refresh()},_={texture:C.getTexture()},d=0;d<i.length;d++)_.texture[i[d]]=t[i[d]];e.__textureid__=g=e.__textureid__||"__ecgl_ec__"+_.texture.__uid__,f.put(o+g,_),r&&r(_.texture)}return _.texture}if(kW(e)){var g,_;if(!(_=f.get(o+(g=e.__textureid__)))){for(_={texture:new Dr.Texture2D({image:e})},d=0;d<i.length;d++)_.texture[i[d]]=t[i[d]];e.__textureid__=g=e.__textureid__||"__ecgl_image__"+_.texture.__uid__,f.put(o+g,_),FW(_.texture),r&&r(_.texture)}return _.texture}if(_=f.get(o+e))_.callbacks?_.callbacks.push(r):r&&r(_.texture);else if(e.match(/.hdr$|^data:application\/octet-stream/)){_={callbacks:[r]};var S=Zg.loadTexture(e,{exposure:t.exposure,fileType:"hdr"},function(){S.dirty(),_.callbacks.forEach(function(te){te&&te(S)}),_.callbacks=null});_.texture=S,f.put(o+e,_)}else{for(S=new Dr.Texture2D({image:new Image}),d=0;d<i.length;d++)S[i[d]]=t[i[d]];_={texture:S,callbacks:[r]};var k=S.image;k.onload=function(){S.image=k,FW(S),S.dirty(),_.callbacks.forEach(function(pe){pe&&pe(S)}),_.callbacks=null},k.crossOrigin="Anonymous",k.src=e,S.image=function vre(){return null!==kI||(kI=Zg.createBlank("rgba(255,255,255,0)").image),kI}(),f.put(o+e,_)}return _.texture},Dr.createAmbientCubemap=function(e,n,t,r){var i=(e=e||{}).texture,o=qr.firstNotNull(e.exposure,1),d=new kne({intensity:qr.firstNotNull(e.specularIntensity,1)}),f=new Fne({intensity:qr.firstNotNull(e.diffuseIntensity,1),coefficients:[.844,.712,.691,-.037,.083,.167,.343,.288,.299,-.041,-.021,-.009,-.003,-.041,-.064,-.011,-.007,-.004,-.031,.034,.081,-.06,-.049,-.06,.046,.056,.05]});return d.cubemap=Dr.loadTexture(i,t,{exposure:o},function(){d.cubemap.flipY=!1,d.prefilter(n,32),f.coefficients=Hne.projectEnvironmentMap(n,d.cubemap,{lod:1}),r&&r()}),{specular:d,diffuse:f}},Dr.createBlankTexture=Zg.createBlank,Dr.isImage=kW,Dr.additiveBlend=function(e){e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)},Dr.parseColor=function(e,n){return e instanceof Array?(n||(n=[]),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e.length>3?e[3]:1,n):((n=bt.$_.parse(e||"#000",n)||[0,0,0,0])[0]/=255,n[1]/=255,n[2]/=255,n)},Dr.directionFromAlphaBeta=function(e,n){var t=e/180*Math.PI+Math.PI/2,r=-n/180*Math.PI+Math.PI/2,i=[],o=Math.sin(t);return i[0]=o*Math.cos(r),i[1]=-Math.cos(t),i[2]=o*Math.sin(r),i},Dr.getShadowResolution=function(e){var n=1024;switch(e){case"low":n=512;break;case"medium":break;case"high":n=2048;break;case"ultra":n=4096}return n},Dr.COMMON_SHADERS=["lambert","color","realistic","hatching","shadow"],Dr.createShader=function(e){"ecgl.shadow"===e&&(e="ecgl.displayShadow");var n=Un.source(e+".vertex"),t=Un.source(e+".fragment");n||console.error("Vertex shader of '%s' not exits",e),t||console.error("Fragment shader of '%s' not exits",e);var r=new Un(n,t);return r.name=e,r},Dr.createMaterial=function(e,n){n instanceof Array||(n=[n]);var t=Dr.createShader(e),r=new Pc({shader:t});return n.forEach(function(i){"string"==typeof i&&r.define(i)}),r},Dr.setMaterialFromModel=function(e,n,t,r){n.autoUpdateTextureStatus=!1;var i=t.getModel(e+"Material"),o=i.get("detailTexture"),d=qr.firstNotNull(i.get("textureTiling"),1),f=qr.firstNotNull(i.get("textureOffset"),0);"number"==typeof d&&(d=[d,d]),"number"==typeof f&&(f=[f,f]);var g=d[0]>1||d[1]>1?Dr.Texture.REPEAT:Dr.Texture.CLAMP_TO_EDGE,_={anisotropic:8,wrapS:g,wrapT:g};if("realistic"===e){var C=i.get("roughness"),S=i.get("metalness");null!=S?isNaN(S)&&(n.setTextureImage("metalnessMap",S,r,_),S=qr.firstNotNull(i.get("metalnessAdjust"),.5)):S=0,null!=C?isNaN(C)&&(n.setTextureImage("roughnessMap",C,r,_),C=qr.firstNotNull(i.get("roughnessAdjust"),.5)):C=.5;var k=i.get("normalTexture");n.setTextureImage("detailMap",o,r,_),n.setTextureImage("normalMap",k,r,_),n.set({roughness:C,metalness:S,detailUvRepeat:d,detailUvOffset:f})}else if("lambert"===e)n.setTextureImage("detailMap",o,r,_),n.set({detailUvRepeat:d,detailUvOffset:f});else if("color"===e)n.setTextureImage("detailMap",o,r,_),n.set({detailUvRepeat:d,detailUvOffset:f});else if("hatching"===e){for(var z=i.get("hatchingTextures")||[],te=0;te<6;te++)n.setTextureImage("hatch"+(te+1),z[te],r,{anisotropic:8,wrapS:Dr.Texture.REPEAT,wrapT:Dr.Texture.REPEAT});n.set({detailUvRepeat:d,detailUvOffset:f})}},Dr.updateVertexAnimation=function(e,n,t,r){var i=r.get("animation"),o=r.get("animationDurationUpdate"),d=r.get("animationEasingUpdate"),f=t.shadowDepthMaterial;if(i&&n&&o>0&&n.geometry.vertexCount===t.geometry.vertexCount){t.material.define("vertex","VERTEX_ANIMATION"),t.ignorePreZ=!0,f&&f.define("vertex","VERTEX_ANIMATION");for(var g=0;g<e.length;g++)t.geometry.attributes[e[g][0]].value=n.geometry.attributes[e[g][1]].value;t.geometry.dirty(),t.__percent=0,t.material.set("percent",0),t.stopAnimation(),t.animate().when(o,{__percent:1}).during(function(){t.material.set("percent",t.__percent),f&&f.set("percent",t.__percent)}).done(function(){t.ignorePreZ=!1,t.material.undefine("vertex","VERTEX_ANIMATION"),f&&f.undefine("vertex","VERTEX_ANIMATION")}).start(d)}else t.material.undefine("vertex","VERTEX_ANIMATION"),f&&f.undefine("vertex","VERTEX_ANIMATION")};const lt=Dr;var E3=H(2036),ea=function(e,n){this.id=e,this.zr=n;try{this.renderer=new XC({clearBit:0,devicePixelRatio:n.painter.dpr,preserveDrawingBuffer:!0,premultipliedAlpha:!0}),this.renderer.resize(n.painter.getWidth(),n.painter.getHeight())}catch(r){return this.renderer=null,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute; left: 0; top: 0; right: 0; bottom: 0;",this.dom.className="ecgl-nowebgl",this.dom.innerHTML="Sorry, your browser does not support WebGL",void console.error(r)}this.onglobalout=this.onglobalout.bind(this),n.on("globalout",this.onglobalout),this.dom=this.renderer.canvas;var t=this.dom.style;t.position="absolute",t.left="0",t.top="0",this.views=[],this._picking=new Ote({renderer:this.renderer}),this._viewsToDispose=[],this._accumulatingId=0,this._zrEventProxy=new bt.Q.Rect({shape:{x:-1,y:-1,width:2,height:2},__isGLToZRProxy:!0}),this._backgroundColor=null,this._disposed=!1};function BW(e){var n=e.__zr;e.__zr=null,n&&e.removeAnimatorsFromZr&&e.removeAnimatorsFromZr(n)}ea.prototype.setUnpainted=function(){},ea.prototype.addView=function(e){if(e.layer!==this){var n=this._viewsToDispose.indexOf(e);n>=0&&this._viewsToDispose.splice(n,1),this.views.push(e),e.layer=this;var t=this.zr;e.scene.traverse(function(r){r.__zr=t,r.addAnimatorsToZr&&r.addAnimatorsToZr(t)})}},ea.prototype.removeView=function(e){if(e.layer===this){var n=this.views.indexOf(e);n>=0&&(this.views.splice(n,1),e.scene.traverse(BW,this),e.layer=null,this._viewsToDispose.push(e))}},ea.prototype.removeViewsAll=function(){this.views.forEach(function(e){e.scene.traverse(BW,this),e.layer=null,this._viewsToDispose.push(e)},this),this.views.length=0},ea.prototype.resize=function(e,n){this.renderer.resize(e,n)},ea.prototype.clear=function(){var e=this.renderer.gl,n=this._backgroundColor||[0,0,0,0];e.clearColor(n[0],n[1],n[2],n[3]),e.depthMask(!0),e.colorMask(!0,!0,!0,!0),e.clear(e.DEPTH_BUFFER_BIT|e.COLOR_BUFFER_BIT)},ea.prototype.clearDepth=function(){var e=this.renderer.gl;e.clear(e.DEPTH_BUFFER_BIT)},ea.prototype.clearColor=function(){var e=this.renderer.gl;e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},ea.prototype.needsRefresh=function(){this.zr.refresh()},ea.prototype.refresh=function(e){this._backgroundColor=e?lt.parseColor(e):[0,0,0,0],this.renderer.clearColor=this._backgroundColor;for(var n=0;n<this.views.length;n++)this.views[n].prepareRender(this.renderer);for(this._doRender(!1),this._trackAndClean(),n=0;n<this._viewsToDispose.length;n++)this._viewsToDispose[n].dispose(this.renderer);this._viewsToDispose.length=0,this._startAccumulating()},ea.prototype.renderToCanvas=function(e){this._startAccumulating(!0),e.drawImage(this.dom,0,0,e.canvas.width,e.canvas.height)},ea.prototype._doRender=function(e){this.clear(),this.renderer.saveViewport();for(var n=0;n<this.views.length;n++)this.views[n].render(this.renderer,e);this.renderer.restoreViewport()},ea.prototype._stopAccumulating=function(){this._accumulatingId=0,clearTimeout(this._accumulatingTimeout)};var mre=1;function NI(e){for(var n=0;n<e.length;n++)e[n].__used__=0}function FI(e,n){for(var t=0;t<n.length;t++)n[t].__used__||n[t].dispose(e)}function BI(e,n){e.__used__=e.__used__||0,e.__used__++,1===e.__used__&&n.push(e)}function _re(e,n,t){var r,i;e.traverse(function(d){if(d.isRenderable()){var f=d.geometry,g=d.material;if(g!==r)for(var _=g.getTextureUniforms(),C=0;C<_.length;C++){var k=g.uniforms[_[C]].value;if(k)if(k instanceof hr)BI(k,n);else if(k instanceof Array)for(var z=0;z<k.length;z++)k[z]instanceof hr&&BI(k[z],n)}f!==i&&BI(f,t),r=g,i=f}});for(var o=0;o<e.lights.length;o++)e.lights[o].cubemap&&BI(e.lights[o].cubemap,n)}ea.prototype._startAccumulating=function(e){var n=this;this._stopAccumulating();for(var t=!1,r=0;r<this.views.length;r++)t=this.views[r].needsAccumulate()||t;function i(o){if(n._accumulatingId&&o===n._accumulatingId){for(var d=!0,f=0;f<n.views.length;f++)d=n.views[f].isAccumulateFinished()&&t;d||(n._doRender(!0),e?i(o):(0,E3.Z)(function(){i(o)}))}}t&&(this._accumulatingId=mre++,e?i(n._accumulatingId):this._accumulatingTimeout=setTimeout(function(){i(n._accumulatingId)},50))},ea.prototype._trackAndClean=function(){var e=[],n=[];this._textureList&&(NI(this._textureList),NI(this._geometriesList));for(var t=0;t<this.views.length;t++)_re(this.views[t].scene,e,n);this._textureList&&(FI(this.renderer,this._textureList),FI(this.renderer,this._geometriesList)),this._textureList=e,this._geometriesList=n},ea.prototype.dispose=function(){this._disposed||(this._stopAccumulating(),this._textureList&&(NI(this._textureList),NI(this._geometriesList),FI(this.renderer,this._textureList),FI(this.renderer,this._geometriesList)),this.zr.off("globalout",this.onglobalout),this._disposed=!0)},ea.prototype.onmousedown=function(e){if(!e.target||!e.target.__isGLToZRProxy){var n=this.pickObject((e=e.event).offsetX,e.offsetY);n&&(this._dispatchEvent("mousedown",e,n),this._dispatchDataEvent("mousedown",e,n)),this._downX=e.offsetX,this._downY=e.offsetY}},ea.prototype.onmousemove=function(e){if(!e.target||!e.target.__isGLToZRProxy){var n=this.pickObject((e=e.event).offsetX,e.offsetY),t=n&&n.target,r=this._hovered;this._hovered=n,r&&t!==r.target&&(r.relatedTarget=t,this._dispatchEvent("mouseout",e,r),this.zr.setCursorStyle("default")),this._dispatchEvent("mousemove",e,n),n&&(this.zr.setCursorStyle("pointer"),(!r||t!==r.target)&&this._dispatchEvent("mouseover",e,n)),this._dispatchDataEvent("mousemove",e,n)}},ea.prototype.onmouseup=function(e){if(!e.target||!e.target.__isGLToZRProxy){var n=this.pickObject((e=e.event).offsetX,e.offsetY);n&&(this._dispatchEvent("mouseup",e,n),this._dispatchDataEvent("mouseup",e,n)),this._upX=e.offsetX,this._upY=e.offsetY}},ea.prototype.onclick=ea.prototype.dblclick=function(e){if(!e.target||!e.target.__isGLToZRProxy){var n=this._upX-this._downX,t=this._upY-this._downY;if(!(Math.sqrt(n*n+t*t)>20)){var r=this.pickObject((e=e.event).offsetX,e.offsetY);r&&(this._dispatchEvent(e.type,e,r),this._dispatchDataEvent(e.type,e,r));var i=this._clickToSetFocusPoint(e);i&&i.view.setDOFFocusOnPoint(i.distance)&&this.zr.refresh()}}},ea.prototype._clickToSetFocusPoint=function(e){for(var n=this.renderer,t=n.viewport,r=this.views.length-1;r>=0;r--){var i=this.views[r];if(i.hasDOF()&&i.containPoint(e.offsetX,e.offsetY)){this._picking.scene=i.scene,this._picking.camera=i.camera,n.viewport=i.viewport;var o=this._picking.pick(e.offsetX,e.offsetY,!0);if(o)return o.view=i,o}}n.viewport=t},ea.prototype.onglobalout=function(e){var n=this._hovered;n&&this._dispatchEvent("mouseout",e,{target:n.target})},ea.prototype.pickObject=function(e,n){for(var t=[],r=this.renderer,i=r.viewport,o=0;o<this.views.length;o++){var d=this.views[o];d.containPoint(e,n)&&(this._picking.scene=d.scene,this._picking.camera=d.camera,r.viewport=d.viewport,this._picking.pickAll(e,n,t))}return r.viewport=i,t.sort(function(f,g){return f.distance-g.distance}),t[0]},ea.prototype._dispatchEvent=function(e,n,t){t||(t={});var r=t.target;for(t.cancelBubble=!1,t.event=n,t.type=e,t.offsetX=n.offsetX,t.offsetY=n.offsetY;r&&(r.trigger(e,t),r=r.getParent(),!t.cancelBubble););this._dispatchToView(e,t)},ea.prototype._dispatchDataEvent=function(e,n,t){var r=t&&t.target,i=r&&r.dataIndex,o=r&&r.seriesIndex,d=r&&r.eventData,f=!1,g=this._zrEventProxy;g.x=n.offsetX,g.y=n.offsetY,g.update();var _={target:g};const C=bt._y.getECData(g);"mousemove"===e&&(null!=i?i!==this._lastDataIndex&&(parseInt(this._lastDataIndex,10)>=0&&(C.dataIndex=this._lastDataIndex,C.seriesIndex=this._lastSeriesIndex,this.zr.handler.dispatchToElement(_,"mouseout",n)),f=!0):null!=d&&d!==this._lastEventData&&(null!=this._lastEventData&&(C.eventData=this._lastEventData,this.zr.handler.dispatchToElement(_,"mouseout",n)),f=!0),this._lastEventData=d,this._lastDataIndex=i,this._lastSeriesIndex=o),C.eventData=d,C.dataIndex=i,C.seriesIndex=o,(null!=d||parseInt(i,10)>=0&&parseInt(o,10)>=0)&&(this.zr.handler.dispatchToElement(_,e,n),f&&this.zr.handler.dispatchToElement(_,"mouseover",n))},ea.prototype._dispatchToView=function(e,n){for(var t=0;t<this.views.length;t++)this.views[t].containPoint(n.offsetX,n.offsetY)&&this.views[t].trigger(e,n)},Object.assign(ea.prototype,$B);const VW=ea;var yre=["bar3D","line3D","map3D","scatter3D","surface","lines3D","scatterGL","scatter3D"];function rw(e,n){if(e&&e[n]&&(e[n].normal||e[n].emphasis)){var t=e[n].normal,r=e[n].emphasis;t&&(e[n]=t),r&&(e.emphasis=e.emphasis||{},e.emphasis[n]=r)}}function VI(e){!e||(e instanceof Array||(e=[e]),bt.D5.each(e,function(n){if(n.axisLabel){var t=n.axisLabel;Object.assign(t,t.textStyle),t.textStyle=null}}))}function zW(e){this._layers={},this._zr=e}zW.prototype.update=function(e,n){var t=this,r=n.getZr();if(r.getWidth()&&r.getHeight()){for(var d in this._layers)this._layers[d].removeViewsAll();e.eachComponent(function(f,g){if("series"!==f){var _=n.getViewOfComponentModel(g),C=g.coordinateSystem;if(_.__ecgl__){if(C){if(!C.viewGL)return void console.error("Can't find viewGL in coordinateSystem of component "+g.id);S=C.viewGL}else{if(!g.viewGL)return void console.error("Can't find viewGL of component "+g.id);S=C.viewGL}var S=C.viewGL,k=i(g);k.addView(S),_.afterRender&&_.afterRender(g,e,n,k),o(_.groupGL,g.get("silent"))}}}),e.eachSeries(function(f){var g=n.getViewOfSeriesModel(f),_=f.coordinateSystem;if(g.__ecgl__){if(_&&!_.viewGL&&!g.viewGL)return void console.error("Can't find viewGL of series "+g.id);var C=_&&_.viewGL||g.viewGL,S=i(f);S.addView(C),g.afterRender&&g.afterRender(f,e,n,S),o(g.groupGL,f.get("silent"))}})}else console.warn("Dom has no width or height");function i(f){var g;r.setSleepAfterStill(0),g=f.get("zlevel");var _=t._layers,C=_[g];if(!C){if(C=_[g]=new VW("gl-"+g,r),r.painter.isSingleCanvas()){C.virtual=!0;var S=new bt.Q.Image({z:1e4,style:{image:C.renderer.canvas},silent:!0});C.__hostImage=S,r.add(S)}r.painter.insertLayer(g,C)}return C.__hostImage&&C.__hostImage.setStyle({width:C.renderer.getWidth(),height:C.renderer.getHeight()}),C}function o(f,g){f&&f.traverse(function(_){_.isRenderable&&_.isRenderable()&&(_.ignorePicking=null!=_.$ignorePicking?_.$ignorePicking:g)})}},bt.sq(function(e){var n=e.getZr(),t=n.painter.dispose;n.painter.dispose=function(){"function"==typeof this.eachOtherLayer&&this.eachOtherLayer(function(r){r instanceof VW&&r.dispose()}),t.call(this)},n.painter.getRenderedCanvas=function(r){if(r=r||{},this._singleCanvas)return this._layers[0].dom;var i=document.createElement("canvas"),o=r.pixelRatio||this.dpr;i.width=this.getWidth()*o,i.height=this.getHeight()*o;var d=i.getContext("2d");d.dpr=o,d.clearRect(0,0,i.width,i.height),r.backgroundColor&&(d.fillStyle=r.backgroundColor,d.fillRect(0,0,i.width,i.height));var _,f=this.storage.getDisplayList(!0),g={},C=this;function S(pe,Me){var Re=C._zlevelList;null==pe&&(pe=-1/0);for(var Fe,Oe=0;Oe<Re.length;Oe++){var Be=Re[Oe],it=C._layers[Be];if(!it.__builtin__&&Be>pe&&Be<Me){Fe=it;break}}Fe&&Fe.renderToCanvas&&(d.save(),Fe.renderToCanvas(d),d.restore())}for(var k={ctx:d},z=0;z<f.length;z++){var te=f[z];te.zlevel!==_&&(S(_,te.zlevel),_=te.zlevel),this._doPaintEl(te,k,!0,null,g)}return S(_,1/0),i}}),bt.Br(function(e,n){var t=n.getZr();(t.__egl=t.__egl||new zW(t)).update(e,n)}),bt.ds(function xre(e){bt.D5.each(e.series,function(n){bt.D5.indexOf(yre,n.type)>=0&&(function bre(e){rw(e,"itemStyle"),rw(e,"lineStyle"),rw(e,"areaStyle"),rw(e,"label")}(n),"mapbox"===n.coordinateSystem&&(n.coordinateSystem="mapbox3D",e.mapbox3D=e.mapbox))}),VI(e.xAxis3D),VI(e.yAxis3D),VI(e.zAxis3D),VI(e.grid3D),rw(e.geo3D)});const zI={defaultOption:{viewControl:{projection:"perspective",autoRotate:!1,autoRotateDirection:"cw",autoRotateSpeed:10,autoRotateAfterStill:3,damping:.8,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,panMouseButton:"middle",rotateMouseButton:"left",distance:150,minDistance:40,maxDistance:400,orthographicSize:150,maxOrthographicSize:400,minOrthographicSize:20,center:[0,0,0],alpha:0,beta:0,minAlpha:-90,maxAlpha:90}},setView:function(e){e=e||{},this.option.viewControl=this.option.viewControl||{},null!=e.alpha&&(this.option.viewControl.alpha=e.alpha),null!=e.beta&&(this.option.viewControl.beta=e.beta),null!=e.distance&&(this.option.viewControl.distance=e.distance),null!=e.center&&(this.option.viewControl.center=e.center)}},Uy={defaultOption:{postEffect:{enable:!1,bloom:{enable:!0,intensity:.1},depthOfField:{enable:!1,focalRange:20,focalDistance:50,blurRadius:10,fstop:2.8,quality:"medium"},screenSpaceAmbientOcclusion:{enable:!1,radius:2,quality:"medium",intensity:1},screenSpaceReflection:{enable:!1,quality:"medium",maxRoughness:.8},colorCorrection:{enable:!0,exposure:0,brightness:0,contrast:1,saturation:1,lookupTexture:""},edge:{enable:!1},FXAA:{enable:!1}},temporalSuperSampling:{enable:"auto"}}},Gy={defaultOption:{light:{main:{shadow:!1,shadowQuality:"high",color:"#fff",intensity:1,alpha:0,beta:0},ambient:{color:"#fff",intensity:.2},ambientCubemap:{texture:null,exposure:1,diffuseIntensity:.5,specularIntensity:.5}}}};var HI=bt.tF.extend({type:"grid3D",dependencies:["xAxis3D","yAxis3D","zAxis3D"],defaultOption:{show:!0,zlevel:-10,left:0,top:0,width:"100%",height:"100%",environment:"auto",boxWidth:100,boxHeight:100,boxDepth:100,axisPointer:{show:!0,lineStyle:{color:"rgba(0, 0, 0, 0.8)",width:1},label:{show:!0,formatter:null,margin:8,textStyle:{fontSize:14,color:"#fff",backgroundColor:"rgba(0,0,0,0.5)",padding:3,borderRadius:3}}},axisLine:{show:!0,lineStyle:{color:"#333",width:2,type:"solid"}},axisTick:{show:!0,inside:!1,length:3,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,margin:8,textStyle:{fontSize:12}},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}},light:{main:{alpha:30,beta:40},ambient:{intensity:.4}},viewControl:{alpha:20,beta:40,autoRotate:!1,distance:200,minDistance:40,maxDistance:400}}});bt.D5.merge(HI.prototype,zI),bt.D5.merge(HI.prototype,Uy),bt.D5.merge(HI.prototype,Gy);const Cre=HI;var UI=H(1081),iw=qr.firstNotNull,HW={left:0,middle:1,right:2};function UW(e){return e instanceof Array||(e=[e,e]),e}var GW=Gs.extend(function(){return{zr:null,viewGL:null,_center:new Ln,minDistance:.5,maxDistance:1.5,maxOrthographicSize:300,minOrthographicSize:30,minAlpha:-90,maxAlpha:90,minBeta:-1/0,maxBeta:1/0,autoRotateAfterStill:0,autoRotateDirection:"cw",autoRotateSpeed:60,damping:.8,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,panMouseButton:"middle",rotateMouseButton:"left",_mode:"rotate",_camera:null,_needsUpdate:!1,_rotating:!1,_phi:0,_theta:0,_mouseX:0,_mouseY:0,_rotateVelocity:new jl,_panVelocity:new jl,_distance:500,_zoomSpeed:0,_stillTimeout:0,_animators:[]}},function(){["_mouseDownHandler","_mouseWheelHandler","_mouseMoveHandler","_mouseUpHandler","_pinchHandler","_contextMenuHandler","_update"].forEach(function(e){this[e]=this[e].bind(this)},this)},{init:function(){var e=this.zr;e&&(e.on("mousedown",this._mouseDownHandler),e.on("globalout",this._mouseUpHandler),e.on("mousewheel",this._mouseWheelHandler),e.on("pinch",this._pinchHandler),e.animation.on("frame",this._update),e.dom.addEventListener("contextmenu",this._contextMenuHandler))},dispose:function(){var e=this.zr;e&&(e.off("mousedown",this._mouseDownHandler),e.off("mousemove",this._mouseMoveHandler),e.off("mouseup",this._mouseUpHandler),e.off("mousewheel",this._mouseWheelHandler),e.off("pinch",this._pinchHandler),e.off("globalout",this._mouseUpHandler),e.dom.removeEventListener("contextmenu",this._contextMenuHandler),e.animation.off("frame",this._update)),this.stopAllAnimation()},getDistance:function(){return this._distance},setDistance:function(e){this._distance=e,this._needsUpdate=!0},getOrthographicSize:function(){return this._orthoSize},setOrthographicSize:function(e){this._orthoSize=e,this._needsUpdate=!0},getAlpha:function(){return this._theta/Math.PI*180},getBeta:function(){return-this._phi/Math.PI*180},getCenter:function(){return this._center.toArray()},setAlpha:function(e){e=Math.max(Math.min(this.maxAlpha,e),this.minAlpha),this._theta=e/180*Math.PI,this._needsUpdate=!0},setBeta:function(e){e=Math.max(Math.min(this.maxBeta,e),this.minBeta),this._phi=-e/180*Math.PI,this._needsUpdate=!0},setCenter:function(e){this._center.setArray(e)},setViewGL:function(e){this.viewGL=e},getCamera:function(){return this.viewGL.camera},setFromViewControlModel:function(e,n){var t=(n=n||{}).baseDistance||0,r=n.baseOrthoSize||1,i=e.get("projection");"perspective"!==i&&"orthographic"!==i&&"isometric"!==i&&(i="perspective"),this._projection=i,this.viewGL.setProjection(i);var o=e.get("distance")+t,d=e.get("orthographicSize")+r;[["damping",.8],["autoRotate",!1],["autoRotateAfterStill",3],["autoRotateDirection","cw"],["autoRotateSpeed",10],["minDistance",30],["maxDistance",400],["minOrthographicSize",30],["maxOrthographicSize",300],["minAlpha",-90],["maxAlpha",90],["minBeta",-1/0],["maxBeta",1/0],["rotateSensitivity",1],["zoomSensitivity",1],["panSensitivity",1],["panMouseButton","left"],["rotateMouseButton","middle"]].forEach(function(k){this[k[0]]=iw(e.get(k[0]),k[1])},this),this.minDistance+=t,this.maxDistance+=t,this.minOrthographicSize+=r,this.maxOrthographicSize+=r;var f=e.ecModel,g={};["animation","animationDurationUpdate","animationEasingUpdate"].forEach(function(k){g[k]=iw(e.get(k),f&&f.get(k))});var _=iw(n.alpha,e.get("alpha"))||0,C=iw(n.beta,e.get("beta"))||0,S=iw(n.center,e.get("center"))||[0,0,0];g.animation&&g.animationDurationUpdate>0&&this._notFirst?this.animateTo({alpha:_,beta:C,center:S,distance:o,orthographicSize:d,easing:g.animationEasingUpdate,duration:g.animationDurationUpdate}):(this.setDistance(o),this.setAlpha(_),this.setBeta(C),this.setCenter(S),this.setOrthographicSize(d)),this._notFirst=!0,this._validateProperties()},_validateProperties:function(){},animateTo:function(e){var n=this.zr,t=this,r={},i={};return null!=e.distance&&(r.distance=this.getDistance(),i.distance=e.distance),null!=e.orthographicSize&&(r.orthographicSize=this.getOrthographicSize(),i.orthographicSize=e.orthographicSize),null!=e.alpha&&(r.alpha=this.getAlpha(),i.alpha=e.alpha),null!=e.beta&&(r.beta=this.getBeta(),i.beta=e.beta),null!=e.center&&(r.center=this.getCenter(),i.center=e.center),this._addAnimator(n.animation.animate(r).when(e.duration||1e3,i).during(function(){null!=r.alpha&&t.setAlpha(r.alpha),null!=r.beta&&t.setBeta(r.beta),null!=r.distance&&t.setDistance(r.distance),null!=r.center&&t.setCenter(r.center),null!=r.orthographicSize&&t.setOrthographicSize(r.orthographicSize),t._needsUpdate=!0})).start(e.easing||"linear")},stopAllAnimation:function(){for(var e=0;e<this._animators.length;e++)this._animators[e].stop();this._animators.length=0},update:function(){this._needsUpdate=!0,this._update(20)},_isAnimating:function(){return this._animators.length>0},_update:function(e){if(this._rotating){var n=("cw"===this.autoRotateDirection?1:-1)*this.autoRotateSpeed/180*Math.PI;this._phi-=n*e/1e3,this._needsUpdate=!0}else this._rotateVelocity.len()>0&&(this._needsUpdate=!0);(Math.abs(this._zoomSpeed)>.1||this._panVelocity.len()>0)&&(this._needsUpdate=!0),this._needsUpdate&&(e=Math.min(e,50),this._updateDistanceOrSize(e),this._updatePan(e),this._updateRotate(e),this._updateTransform(),this.getCamera().update(),this.zr&&this.zr.refresh(),this.trigger("update"),this._needsUpdate=!1)},_updateRotate:function(e){var n=this._rotateVelocity;this._phi=n.y*e/20+this._phi,this._theta=n.x*e/20+this._theta,this.setAlpha(this.getAlpha()),this.setBeta(this.getBeta()),this._vectorDamping(n,Math.pow(this.damping,e/16))},_updateDistanceOrSize:function(e){"perspective"===this._projection?this._setDistance(this._distance+this._zoomSpeed*e/20):this._setOrthoSize(this._orthoSize+this._zoomSpeed*e/20),this._zoomSpeed*=Math.pow(this.damping,e/16)},_setDistance:function(e){this._distance=Math.max(Math.min(e,this.maxDistance),this.minDistance)},_setOrthoSize:function(e){this._orthoSize=Math.max(Math.min(e,this.maxOrthographicSize),this.minOrthographicSize);var n=this.getCamera(),t=this._orthoSize,r=t/this.viewGL.viewport.height*this.viewGL.viewport.width;n.left=-r/2,n.right=r/2,n.top=t/2,n.bottom=-t/2},_updatePan:function(e){var n=this._panVelocity,t=this._distance,r=this.getCamera(),i=r.worldTransform.y;this._center.scaleAndAdd(r.worldTransform.x,-n.x*t/200).scaleAndAdd(i,-n.y*t/200),this._vectorDamping(n,0)},_updateTransform:function(){var e=this.getCamera(),n=new Ln,t=this._theta+Math.PI/2,r=this._phi+Math.PI/2,i=Math.sin(t);n.x=i*Math.cos(r),n.y=-Math.cos(t),n.z=i*Math.sin(r),e.position.copy(this._center).scaleAndAdd(n,this._distance),e.rotation.identity().rotateY(-this._phi).rotateX(-this._theta)},_startCountingStill:function(){clearTimeout(this._stillTimeout);var e=this.autoRotateAfterStill,n=this;!isNaN(e)&&e>0&&(this._stillTimeout=setTimeout(function(){n._rotating=!0},1e3*e))},_vectorDamping:function(e,n){var t=e.len();(t*=n)<1e-4&&(t=0),e.normalize().scale(t)},_decomposeTransform:function(){if(this.getCamera()){this.getCamera().updateWorldTransform();var e=this.getCamera().worldTransform.z,n=Math.asin(e.y),t=Math.atan2(e.x,e.z);this._theta=n,this._phi=-t,this.setBeta(this.getBeta()),this.setAlpha(this.getAlpha()),this.getCamera().aspect?this._setDistance(this.getCamera().position.dist(this._center)):this._setOrthoSize(this.getCamera().top-this.getCamera().bottom)}},_mouseDownHandler:function(e){e.target||this._isAnimating()||this.viewGL&&!this.viewGL.containPoint(e.offsetX,e.offsetY)||(this.zr.on("mousemove",this._mouseMoveHandler),this.zr.on("mouseup",this._mouseUpHandler),e.event.targetTouches?1===e.event.targetTouches.length&&(this._mode="rotate"):this._mode=e.event.button===HW[this.rotateMouseButton]?"rotate":e.event.button===HW[this.panMouseButton]?"pan":"",this._rotateVelocity.set(0,0),this._rotating=!1,this.autoRotate&&this._startCountingStill(),this._mouseX=e.offsetX,this._mouseY=e.offsetY)},_mouseMoveHandler:function(e){if(!(e.target&&e.target.__isGLToZRProxy||this._isAnimating())){var n=UW(this.panSensitivity),t=UW(this.rotateSensitivity);"rotate"===this._mode?(this._rotateVelocity.y=(e.offsetX-this._mouseX)/this.zr.getHeight()*2*t[0],this._rotateVelocity.x=(e.offsetY-this._mouseY)/this.zr.getWidth()*2*t[1]):"pan"===this._mode&&(this._panVelocity.x=(e.offsetX-this._mouseX)/this.zr.getWidth()*n[0]*400,this._panVelocity.y=(-e.offsetY+this._mouseY)/this.zr.getHeight()*n[1]*400),this._mouseX=e.offsetX,this._mouseY=e.offsetY,e.event.preventDefault()}},_mouseWheelHandler:function(e){this._isAnimating()||this._zoomHandler(e,e.event.wheelDelta||-e.event.detail)},_pinchHandler:function(e){this._isAnimating()||(this._zoomHandler(e,e.pinchScale>1?1:-1),this._mode="")},_zoomHandler:function(e,n){var i;0!==n&&(this.viewGL&&!this.viewGL.containPoint(e.offsetX,e.offsetY)||(i="perspective"===this._projection?Math.max(Math.max(Math.min(this._distance-this.minDistance,this.maxDistance-this._distance))/20,.5):Math.max(Math.max(Math.min(this._orthoSize-this.minOrthographicSize,this.maxOrthographicSize-this._orthoSize))/20,.5),this._zoomSpeed=(n>0?-1:1)*i*this.zoomSensitivity,this._rotating=!1,this.autoRotate&&"rotate"===this._mode&&this._startCountingStill(),e.event.preventDefault()))},_mouseUpHandler:function(){this.zr.off("mousemove",this._mouseMoveHandler),this.zr.off("mouseup",this._mouseUpHandler)},_isRightMouseButtonUsed:function(){return"right"===this.rotateMouseButton||"right"===this.panMouseButton},_contextMenuHandler:function(e){this._isRightMouseButtonUsed()&&e.preventDefault()},_addAnimator:function(e){var n=this._animators;return n.push(e),e.done(function(){var t=n.indexOf(e);t>=0&&n.splice(t,1)}),e}});Object.defineProperty(GW.prototype,"autoRotate",{get:function(e){return this._autoRotate},set:function(e){this._autoRotate=e,this._rotating=e}});const GI=GW,aw={convertToDynamicArray:function(e){e&&this.resetOffset();var n=this.attributes;for(var t in n)n[t].value=e||!n[t].value?[]:Array.prototype.slice.call(n[t].value);this.indices=e||!this.indices?[]:Array.prototype.slice.call(this.indices)},convertToTypedArray:function(){var e=this.attributes;for(var n in e)e[n].value=e[n].value&&e[n].value.length>0?new Float32Array(e[n].value):null;this.indices&&this.indices.length>0&&(this.indices=this.vertexCount>65535?new Uint32Array(this.indices):new Uint16Array(this.indices)),this.dirty()}},Qa={vec2:mr,vec3:Et,vec4:Wn,mat2:Fa,mat2d:lo,mat3:hi,mat4:An,quat:Ir};var A3=Qa.vec3,WW=[[0,0],[1,1]],jW=Di.extend(function(){return{segmentScale:1,dynamic:!0,useNativeLine:!0,attributes:{position:new Di.Attribute("position","float",3,"POSITION"),positionPrev:new Di.Attribute("positionPrev","float",3),positionNext:new Di.Attribute("positionNext","float",3),prevPositionPrev:new Di.Attribute("prevPositionPrev","float",3),prevPosition:new Di.Attribute("prevPosition","float",3),prevPositionNext:new Di.Attribute("prevPositionNext","float",3),offset:new Di.Attribute("offset","float",1),color:new Di.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._triangleOffset=0,this._itemVertexOffsets=[]},setVertexCount:function(e){var n=this.attributes;this.vertexCount!==e&&(n.position.init(e),n.color.init(e),this.useNativeLine||(n.positionPrev.init(e),n.positionNext.init(e),n.offset.init(e)),e>65535?this.indices instanceof Uint16Array&&(this.indices=new Uint32Array(this.indices)):this.indices instanceof Uint32Array&&(this.indices=new Uint16Array(this.indices)))},setTriangleCount:function(e){this.triangleCount!==e&&(this.indices=0===e?null:this.vertexCount>65535?new Uint32Array(3*e):new Uint16Array(3*e))},_getCubicCurveApproxStep:function(e,n,t,r){return 1/(A3.dist(e,n)+A3.dist(t,n)+A3.dist(r,t)+1)*this.segmentScale},getCubicCurveVertexCount:function(e,n,t,r){var i=this._getCubicCurveApproxStep(e,n,t,r),o=Math.ceil(1/i);return this.useNativeLine?2*o:2*o+2},getCubicCurveTriangleCount:function(e,n,t,r){var i=this._getCubicCurveApproxStep(e,n,t,r),o=Math.ceil(1/i);return this.useNativeLine?0:2*o},getLineVertexCount:function(){return this.getPolylineVertexCount(WW)},getLineTriangleCount:function(){return this.getPolylineTriangleCount(WW)},getPolylineVertexCount:function(e){var n;return n="number"==typeof e?e:"number"!=typeof e[0]?e.length:e.length/3,this.useNativeLine?2*(n-1):2*(n-1)+2},getPolylineTriangleCount:function(e){var n;return n="number"==typeof e?e:"number"!=typeof e[0]?e.length:e.length/3,this.useNativeLine?0:2*Math.max(n-1,0)},addCubicCurve:function(e,n,t,r,i,o){null==o&&(o=1);var d=e[0],f=e[1],g=e[2],_=n[0],C=n[1],S=n[2],k=t[0],z=t[1],te=t[2],pe=r[0],Me=r[1],Re=r[2],Fe=this._getCubicCurveApproxStep(e,n,t,r),Oe=Fe*Fe,Be=Oe*Fe,it=3*Fe,at=3*Oe,Ct=6*Oe,mt=6*Be,Ft=d-2*_+k,nn=f-2*C+z,$t=g-2*S+te,pn=3*(_-k)-d+pe,mn=3*(C-z)-f+Me,sn=3*(S-te)-g+Re,wn=d,Gt=f,ln=g,Xt=(_-d)*it+Ft*at+pn*Be,Xn=(C-f)*it+nn*at+mn*Be,In=(S-g)*it+$t*at+sn*Be,ai=Ft*Ct+pn*mt,Nr=nn*Ct+mn*mt,_i=$t*Ct+sn*mt,Mr=pn*mt,Jr=mn*mt,qa=sn*mt,oi=0,Zi=0,Yi=Math.ceil(1/Fe),Ra=new Float32Array(3*(Yi+1)),Ba=(Ra=[],0);for(Zi=0;Zi<Yi+1;Zi++)Ra[Ba++]=wn,Ra[Ba++]=Gt,Ra[Ba++]=ln,wn+=Xt,Gt+=Xn,ln+=In,Xt+=ai,Xn+=Nr,In+=_i,ai+=Mr,Nr+=Jr,_i+=qa,(oi+=Fe)>1&&(wn=Xt>0?Math.min(wn,pe):Math.max(wn,pe),Gt=Xn>0?Math.min(Gt,Me):Math.max(Gt,Me),ln=In>0?Math.min(ln,Re):Math.max(ln,Re));return this.addPolyline(Ra,i,o)},addLine:function(e,n,t,r){return this.addPolyline([e,n],t,r)},addPolyline:function(e,n,t,r,i){if(e.length){var o="number"!=typeof e[0];if(null==i&&(i=o?e.length:e.length/3),!(i<2)){null==r&&(r=0),null==t&&(t=1),this._itemVertexOffsets.push(this._vertexOffset);var te,pe,d=(o="number"!=typeof e[0])?"number"!=typeof n[0]:n.length/4===i,f=this.attributes.position,g=this.attributes.positionPrev,_=this.attributes.positionNext,C=this.attributes.color,S=this.attributes.offset,k=this.indices,z=this._vertexOffset;t=Math.max(t,.01);for(var Me=r;Me<i;Me++){if(o)te=e[Me],pe=d?n[Me]:n;else{var Re=3*Me;if((te=te||[])[0]=e[Re],te[1]=e[Re+1],te[2]=e[Re+2],d){var Fe=4*Me;(pe=pe||[])[0]=n[Fe],pe[1]=n[Fe+1],pe[2]=n[Fe+2],pe[3]=n[Fe+3]}else pe=n}if(this.useNativeLine?Me>1&&(f.copy(z,z-1),C.copy(z,z-1),z++):(Me<i-1&&(g.set(z+2,te),g.set(z+3,te)),Me>0&&(_.set(z-2,te),_.set(z-1,te)),f.set(z,te),f.set(z+1,te),C.set(z,pe),C.set(z+1,pe),S.set(z,t/2),S.set(z+1,-t/2),z+=2),this.useNativeLine)C.set(z,pe),f.set(z,te),z++;else if(Me>0){var Oe=3*this._triangleOffset;(k=this.indices)[Oe]=z-4,k[Oe+1]=z-3,k[Oe+2]=z-2,k[Oe+3]=z-3,k[Oe+4]=z-1,k[Oe+5]=z-2,this._triangleOffset+=2}}if(!this.useNativeLine){var Be=this._vertexOffset,it=this._vertexOffset+2*i;g.copy(Be,Be+2),g.copy(Be+1,Be+3),_.copy(it-1,it-3),_.copy(it-2,it-4)}return this._vertexOffset=z,this._vertexOffset}}},setItemColor:function(e,n){for(var r=e<this._itemVertexOffsets.length-1?this._itemVertexOffsets[e+1]:this._vertexOffset,i=this._itemVertexOffsets[e];i<r;i++)this.attributes.color.set(i,n);this.dirty("color")},currentTriangleOffset:function(){return this._triangleOffset},currentVertexOffset:function(){return this._vertexOffset}});bt.D5.defaults(jW.prototype,aw);const $g=jW;function WI(e,n,t,r,i,o,d){this._zr=e,this._x=0,this._y=0,this._rowHeight=0,this.width=r,this.height=i,this.offsetX=n,this.offsetY=t,this.dpr=d,this.gap=o}function ZW(e){(e=e||{}).width=e.width||512,e.height=e.height||512,e.devicePixelRatio=e.devicePixelRatio||1,e.gap=e.gap??2;var n=document.createElement("canvas");n.width=e.width*e.devicePixelRatio,n.height=e.height*e.devicePixelRatio,this._canvas=n,this._texture=new $r({image:n,flipY:!1});var t=this;this._zr=bt.x_.init(n);var r=this._zr.refreshImmediately;this._zr.refreshImmediately=function(){r.call(this),t._texture.dirty(),t.onupdate&&t.onupdate()},this._dpr=e.devicePixelRatio,this._coords={},this.onupdate=e.onupdate,this._gap=e.gap,this._textureAtlasNodes=[new WI(this._zr,0,0,e.width,e.height,this._gap,this._dpr)],this._nodeWidth=e.width,this._nodeHeight=e.height,this._currentNodeIdx=0}WI.prototype={constructor:WI,clear:function(){this._x=0,this._y=0,this._rowHeight=0},add:function(e,n,t){var r=e.getBoundingRect();null==n&&(n=r.width),null==t&&(t=r.height),this._fitElement(e,n*=this.dpr,t*=this.dpr);var i=this._x,o=this._y,d=this.width*this.dpr,f=this.height*this.dpr,g=this.gap;if(i+n+g>d&&(i=this._x=0,this._y=o+=this._rowHeight+g,this._rowHeight=0),this._x+=n+g,this._rowHeight=Math.max(this._rowHeight,t),o+t+g>f)return null;e.x+=this.offsetX*this.dpr+i,e.y+=this.offsetY*this.dpr+o,this._zr.add(e);var _=[this.offsetX/this.width,this.offsetY/this.height];return[[i/d+_[0],o/f+_[1]],[(i+n)/d+_[0],(o+t)/f+_[1]]]},_fitElement:function(e,n,t){var r=e.getBoundingRect(),i=n/r.width,o=t/r.height;e.x=-r.x*i,e.y=-r.y*o,e.scaleX=i,e.scaleY=o,e.update()}},ZW.prototype={clear:function(){for(var e=0;e<this._textureAtlasNodes.length;e++)this._textureAtlasNodes[e].clear();this._currentNodeIdx=0,this._zr.clear(),this._coords={}},getWidth:function(){return this._width},getHeight:function(){return this._height},getTexture:function(){return this._texture},getDevicePixelRatio:function(){return this._dpr},getZr:function(){return this._zr},_getCurrentNode:function(){return this._textureAtlasNodes[this._currentNodeIdx]},_expand:function(){if(this._currentNodeIdx++,this._textureAtlasNodes[this._currentNodeIdx])return this._textureAtlasNodes[this._currentNodeIdx];var e=4096/this._dpr,t=this._textureAtlasNodes.length,r=t*this._nodeWidth%e,i=Math.floor(t*this._nodeWidth/e)*this._nodeHeight;if(!(i>=e)){var o=(r+this._nodeWidth)*this._dpr,d=(i+this._nodeHeight)*this._dpr;try{this._zr.resize({width:o,height:d})}catch{this._canvas.width=o,this._canvas.height=d}var f=new WI(this._zr,r,i,this._nodeWidth,this._nodeHeight,this._gap,this._dpr);return this._textureAtlasNodes.push(f),f}},add:function(e,n,t){if(this._coords[e.id])return this._coords[e.id];var r=this._getCurrentNode().add(e,n,t);if(!r){var i=this._expand();if(!i)return;r=i.add(e,n,t)}return this._coords[e.id]=r,r},getCoordsScale:function(){var e=this._dpr;return[this._nodeWidth/this._canvas.width*e,this._nodeHeight/this._canvas.height*e]},getCoords:function(e){return this._coords[e]},dispose:function(){this._zr.dispose()}};const I3=ZW;function P3(){}P3.prototype={constructor:P3,setScene:function(e){this._scene=e,this._skybox&&this._skybox.attachScene(this._scene)},initLight:function(e){this._lightRoot=e,this.mainLight=new lt.DirectionalLight({shadowBias:.005}),this.ambientLight=new lt.AmbientLight,e.add(this.mainLight),e.add(this.ambientLight)},dispose:function(){this._lightRoot&&(this._lightRoot.remove(this.mainLight),this._lightRoot.remove(this.ambientLight))},updateLight:function(e){var n=this.mainLight,t=this.ambientLight,r=e.getModel("light"),i=r.getModel("main"),o=r.getModel("ambient");n.intensity=i.get("intensity"),t.intensity=o.get("intensity"),n.color=lt.parseColor(i.get("color")).slice(0,3),t.color=lt.parseColor(o.get("color")).slice(0,3);var d=i.get("alpha")||0,f=i.get("beta")||0;n.position.setArray(lt.directionFromAlphaBeta(d,f)),n.lookAt(lt.Vector3.ZERO),n.castShadow=i.get("shadow"),n.shadowResolution=lt.getShadowResolution(i.get("shadowQuality"))},updateAmbientCubemap:function(e,n,t){var r=n.getModel("light.ambientCubemap"),i=r.get("texture");if(i){this._cubemapLightsCache=this._cubemapLightsCache||{};var o=this._cubemapLightsCache[i];if(!o){var d=this;o=this._cubemapLightsCache[i]=lt.createAmbientCubemap(r.option,e,t,function(){d._isSkyboxFromAmbientCubemap&&d._skybox.setEnvironmentMap(o.specular.cubemap),t.getZr().refresh()})}this._lightRoot.add(o.diffuse),this._lightRoot.add(o.specular),this._currentCubemapLights=o}else this._currentCubemapLights&&(this._lightRoot.remove(this._currentCubemapLights.diffuse),this._lightRoot.remove(this._currentCubemapLights.specular),this._currentCubemapLights=null)},updateSkybox:function(e,n,t){var r=n.get("environment"),i=this,d=function o(){return i._skybox=i._skybox||new II,i._skybox}();if(r&&"none"!==r)if("auto"===r)this._isSkyboxFromAmbientCubemap=!0,this._currentCubemapLights?(d.setEnvironmentMap(this._currentCubemapLights.specular.cubemap),this._scene&&d.attachScene(this._scene),d.material.set("lod",3)):this._skybox&&this._skybox.detachScene();else if("object"==typeof r&&r.colorStops||"string"==typeof r&&bt.$_.parse(r)){this._isSkyboxFromAmbientCubemap=!1;var g=new lt.Texture2D({anisotropic:8,flipY:!1});d.setEnvironmentMap(g);var _=g.image=document.createElement("canvas");_.width=_.height=16;var C=_.getContext("2d"),S=new bt.Q.Rect({shape:{x:0,y:0,width:16,height:16},style:{fill:r}});bt.z$(C,S),d.attachScene(this._scene)}else this._isSkyboxFromAmbientCubemap=!1,g=lt.loadTexture(r,t,{anisotropic:8,flipY:!1}),d.setEnvironmentMap(g),d.attachScene(this._scene);else this._skybox&&this._skybox.detachScene(this._scene),this._skybox=null;var k=n.coordinateSystem;if(this._skybox)if(!k||!k.viewGL||"auto"===r||r.match&&r.match(/.hdr$/))this._skybox.material.undefine("fragment","SRGB_DECODE");else{var z=k.viewGL.isLinearSpace()?"define":"undefine";this._skybox.material[z]("fragment","SRGB_DECODE")}}};const Wy=P3;var Kg=Qa.vec3,YW=Di.extend(function(){return{segmentScale:1,useNativeLine:!0,attributes:{position:new Di.Attribute("position","float",3,"POSITION"),normal:new Di.Attribute("normal","float",3,"NORMAL"),color:new Di.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setQuadCount:function(e){var n=this.attributes,t=this.getQuadVertexCount()*e,r=this.getQuadTriangleCount()*e;this.vertexCount!==t&&(n.position.init(t),n.normal.init(t),n.color.init(t)),this.triangleCount!==r&&(this.indices=t>65535?new Uint32Array(3*r):new Uint16Array(3*r))},getQuadVertexCount:function(){return 4},getQuadTriangleCount:function(){return 2},addQuad:function(){var e=Kg.create(),n=Kg.create(),t=Kg.create(),r=[0,3,1,3,2,1];return function(i,o){var d=this.attributes.position,f=this.attributes.normal,g=this.attributes.color;Kg.sub(e,i[1],i[0]),Kg.sub(n,i[2],i[1]),Kg.cross(t,e,n),Kg.normalize(t,t);for(var _=0;_<4;_++)d.set(this._vertexOffset+_,i[_]),g.set(this._vertexOffset+_,o),f.set(this._vertexOffset+_,t);var C=3*this._faceOffset;for(_=0;_<6;_++)this.indices[C+_]=r[_]+this._vertexOffset;this._vertexOffset+=4,this._faceOffset+=2}}()});bt.D5.defaults(YW.prototype,aw);const wre=YW;var R3=qr.firstNotNull,Sre={x:0,y:2,z:1};function jI(e,n,t){this.rootNode=new lt.Node;var r=new lt.Mesh({geometry:new $g({useNativeLine:!1}),material:n,castShadow:!1,ignorePicking:!0,$ignorePicking:!0,renderOrder:1}),i=new lt.Mesh({geometry:new wre,material:t,castShadow:!1,culling:!1,ignorePicking:!0,$ignorePicking:!0,renderOrder:0});this.rootNode.add(i),this.rootNode.add(r),this.faceInfo=e,this.plane=new lt.Plane,this.linesMesh=r,this.quadsMesh=i}jI.prototype.update=function(e,n,t){var r=e.coordinateSystem,i=[r.getAxis(this.faceInfo[0]),r.getAxis(this.faceInfo[1])],o=this.linesMesh.geometry,d=this.quadsMesh.geometry;o.convertToDynamicArray(!0),d.convertToDynamicArray(!0),this._updateSplitLines(o,i,e,t),this._udpateSplitAreas(d,i,e,t),o.convertToTypedArray(),d.convertToTypedArray();var f=r.getAxis(this.faceInfo[2]);!function Dre(e,n,t,r){var i=[0,0,0],o=r<0?t.getExtentMin():t.getExtentMax();i[Sre[t.dim]]=o,e.position.setArray(i),e.rotation.identity(),n.distance=-Math.abs(o),n.normal.set(0,0,0),"x"===t.dim?(e.rotation.rotateY(r*Math.PI/2),n.normal.x=-r):"z"===t.dim?(e.rotation.rotateX(-r*Math.PI/2),n.normal.y=-r):(r>0&&e.rotation.rotateY(Math.PI),n.normal.z=-r)}(this.rootNode,this.plane,f,this.faceInfo[3])},jI.prototype._updateSplitLines=function(e,n,t,r){var i=r.getDevicePixelRatio();n.forEach(function(o,d){var f=o.model,g=n[1-d].getExtent();if(!o.scale.isBlank()){var _=f.getModel("splitLine",t.getModel("splitLine"));if(_.get("show")){var C=_.getModel("lineStyle"),S=C.get("color"),k=R3(C.get("opacity"),1),z=R3(C.get("width"),1);S=bt.D5.isArray(S)?S:[S];for(var te=o.getTicksCoords({tickModel:_}),pe=0,Me=0;Me<te.length;Me++){var Re=te[Me].coord,Fe=lt.parseColor(S[pe%S.length]);Fe[3]*=k;var Oe=[0,0,0],Be=[0,0,0];Oe[d]=Be[d]=Re,Oe[1-d]=g[0],Be[1-d]=g[1],e.addLine(Oe,Be,Fe,z*i),pe++}}}})},jI.prototype._udpateSplitAreas=function(e,n,t,r){n.forEach(function(i,o){var d=i.model,f=n[1-o].getExtent();if(!i.scale.isBlank()){var g=d.getModel("splitArea",t.getModel("splitArea"));if(g.get("show")){var _=g.getModel("areaStyle"),C=_.get("color"),S=R3(_.get("opacity"),1);C=bt.D5.isArray(C)?C:[C];for(var k=i.getTicksCoords({tickModel:g,clamp:!0}),z=0,te=[0,0,0],pe=[0,0,0],Me=0;Me<k.length;Me++){var Fe=[0,0,0],Oe=[0,0,0];if(Fe[o]=Oe[o]=k[Me].coord,Fe[1-o]=f[0],Oe[1-o]=f[1],0!==Me){var Be=lt.parseColor(C[z%C.length]);Be[3]*=S,e.addQuad([te,Fe,Oe,pe],Be),te=Fe,pe=Oe,z++}else te=Fe,pe=Oe}}}})};const Mre=jI;var XW=[0,1,2,0,2,3],$W=Di.extend(function(){return{attributes:{position:new Di.Attribute("position","float",3,"POSITION"),texcoord:new Di.Attribute("texcoord","float",2,"TEXCOORD_0"),offset:new Di.Attribute("offset","float",2),color:new Di.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setSpriteCount:function(e){this._spriteCount=e;var n=4*e,t=2*e;this.vertexCount!==n&&(this.attributes.position.init(n),this.attributes.offset.init(n),this.attributes.color.init(n)),this.triangleCount!==t&&(this.indices=n>65535?new Uint32Array(3*t):new Uint16Array(3*t))},setSpriteAlign:function(e,n,t,r,i){var o,d,f,g;switch(null==t&&(t="left"),null==r&&(r="top"),i=i||0,t){case"left":o=i,f=n[0]+i;break;case"center":case"middle":o=-n[0]/2,f=n[0]/2;break;case"right":o=-n[0]-i,f=-i}switch(r){case"bottom":d=i,g=n[1]+i;break;case"middle":d=-n[1]/2,g=n[1]/2;break;case"top":d=-n[1]-i,g=-i}var _=4*e,C=this.attributes.offset;C.set(_,[o,g]),C.set(_+1,[f,g]),C.set(_+2,[f,d]),C.set(_+3,[o,d])},addSprite:function(e,n,t,r,i,o){var d=this._vertexOffset;this.setSprite(this._vertexOffset/4,e,n,t,r,i,o);for(var f=0;f<XW.length;f++)this.indices[3*this._faceOffset+f]=XW[f]+d;return this._faceOffset+=2,this._vertexOffset+=4,d/4},setSprite:function(e,n,t,r,i,o,d){for(var f=4*e,g=this.attributes,_=0;_<4;_++)g.position.set(f+_,n);var C=g.texcoord;C.set(f,[r[0][0],r[0][1]]),C.set(f+1,[r[1][0],r[0][1]]),C.set(f+2,[r[1][0],r[1][1]]),C.set(f+3,[r[0][0],r[1][1]]),this.setSpriteAlign(e,t,i,o,d)}});bt.D5.defaults($W.prototype,aw);const Tre=$W;lt.Shader.import("@export ecgl.labels.vertex\n\nattribute vec3 position: POSITION;\nattribute vec2 texcoord: TEXCOORD_0;\nattribute vec2 offset;\n#ifdef VERTEX_COLOR\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n#endif\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform vec4 viewport : VIEWPORT;\n\nvarying vec2 v_Texcoord;\n\nvoid main()\n{\n vec4 proj = worldViewProjection * vec4(position, 1.0);\n\n vec2 screen = (proj.xy / abs(proj.w) + 1.0) * 0.5 * viewport.zw;\n\n screen += offset;\n\n proj.xy = (screen / viewport.zw - 0.5) * 2.0 * abs(proj.w);\n gl_Position = proj;\n#ifdef VERTEX_COLOR\n v_Color = a_Color;\n#endif\n v_Texcoord = texcoord;\n}\n@end\n\n\n@export ecgl.labels.fragment\n\nuniform vec3 color : [1.0, 1.0, 1.0];\nuniform float alpha : 1.0;\nuniform sampler2D textureAtlas;\nuniform vec2 uvScale: [1.0, 1.0];\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\nvarying float v_Miter;\n\nvarying vec2 v_Texcoord;\n\nvoid main()\n{\n gl_FragColor = vec4(color, alpha) * texture2D(textureAtlas, v_Texcoord * uvScale);\n#ifdef VERTEX_COLOR\n gl_FragColor *= v_Color;\n#endif\n}\n\n@end");const L3=lt.Mesh.extend(function(){return{geometry:new Tre({dynamic:!0}),material:new lt.Material({shader:lt.createShader("ecgl.labels"),transparent:!0,depthMask:!1}),culling:!1,castShadow:!1,ignorePicking:!0}});var Qg=qr.firstNotNull,qg={x:0,y:2,z:1};function O3(e,n){var t=new lt.Mesh({geometry:new $g({useNativeLine:!1}),material:n,castShadow:!1,ignorePicking:!0,renderOrder:2}),r=new L3;r.material.depthMask=!1;var i=new lt.Node;i.add(t),i.add(r),this.rootNode=i,this.dim=e,this.linesMesh=t,this.labelsMesh=r,this.axisLineCoords=null,this.labelElements=[]}var k3={x:"y",y:"x",z:"y"};O3.prototype.update=function(e,n,t){var i=e.coordinateSystem.getAxis(this.dim),o=this.linesMesh.geometry,d=this.labelsMesh.geometry;o.convertToDynamicArray(!0),d.convertToDynamicArray(!0);var f=i.model,g=i.getExtent(),$t=t.getDevicePixelRatio(),_=f.getModel("axisLine",e.getModel("axisLine")),C=f.getModel("axisTick",e.getModel("axisTick")),S=f.getModel("axisLabel",e.getModel("axisLabel")),k=_.get("lineStyle.color");if(_.get("show")){var z=_.getModel("lineStyle"),pe=[0,0,0];(te=[0,0,0])[Me=qg[i.dim]]=g[0],pe[Me]=g[1],this.axisLineCoords=[te,pe];var Re=lt.parseColor(k),Fe=Qg(z.get("width"),1),Oe=Qg(z.get("opacity"),1);Re[3]*=Oe,o.addLine(te,pe,Re,Fe*$t)}if(C.get("show")){var Be=C.getModel("lineStyle"),it=lt.parseColor(Qg(Be.get("color"),k));Fe=Qg(Be.get("width"),1),it[3]*=Qg(Be.get("opacity"),1);for(var at=i.getTicksCoords(),Ct=C.get("length"),mt=0;mt<at.length;mt++){var te,nn=qg[k3[i.dim]];(te=[0,0,0])[Me=qg[i.dim]]=(pe=[0,0,0])[Me]=Ft=at[mt].coord,pe[nn]=Ct,o.addLine(te,pe,it,Fe*$t)}}if(this.labelElements=[],$t=t.getDevicePixelRatio(),S.get("show")){at=i.getTicksCoords();var pn=f.get("data"),mn=S.get("margin"),sn=i.getViewLabels();for(mt=0;mt<sn.length;mt++){var wn=sn[mt].tickValue,Gt=sn[mt].formattedLabel,ln=sn[mt].rawLabel,Ft=i.dataToCoord(wn);nn=qg[k3[i.dim]],(Xt=[0,0,0])[Me=qg[i.dim]]=Xt[Me]=Ft,Xt[nn]=mn;var Xn=S;pn&&pn[wn]&&pn[wn].textStyle&&(Xn=new bt.Hn(pn[wn].textStyle,S,f.ecModel));var In=Qg(Xn.get("color"),k),ai=new bt.Q.Text({style:(0,UI.Lr)(Xn,{text:Gt,fill:"function"==typeof In?In("category"===i.type?ln:"value"===i.type?wn+"":wn,mt):In,verticalAlign:"top",align:"left"})}),Nr=n.add(ai),_i=ai.getBoundingRect();d.addSprite(Xt,[_i.width*$t,_i.height*$t],Nr),this.labelElements.push(ai)}}if(f.get("name")){var Mr=f.getModel("nameTextStyle"),Xt=[0,0,0],Me=qg[i.dim],Jr=(nn=qg[k3[i.dim]],Qg(Mr.get("color"),k)),qa=Mr.get("borderColor");Fe=Mr.get("borderWidth"),Xt[Me]=Xt[Me]=(g[0]+g[1])/2,Xt[nn]=f.get("nameGap"),ai=new bt.Q.Text({style:(0,UI.Lr)(Mr,{text:f.get("name"),fill:Jr,stroke:qa,lineWidth:Fe})}),Nr=n.add(ai),_i=ai.getBoundingRect(),d.addSprite(Xt,[_i.width*$t,_i.height*$t],Nr),ai.__idx=this.labelElements.length,this.nameLabelElement=ai}this.labelsMesh.material.set("textureAtlas",n.getTexture()),this.labelsMesh.material.set("uvScale",n.getCoordsScale()),o.convertToTypedArray(),d.convertToTypedArray()},O3.prototype.setSpriteAlign=function(e,n,t){for(var r=t.getDevicePixelRatio(),i=this.labelsMesh.geometry,o=0;o<this.labelElements.length;o++){var f=this.labelElements[o].getBoundingRect();i.setSpriteAlign(o,[f.width*r,f.height*r],e,n)}var g=this.nameLabelElement;g&&(f=g.getBoundingRect(),i.setSpriteAlign(g.__idx,[f.width*r,f.height*r],e,n),i.dirty()),this.textAlign=e,this.textVerticalAlign=n};const Are=O3,ZI="@export ecgl.lines3D.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nattribute vec3 position: POSITION;\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n\nvoid main()\n{\n gl_Position = worldViewProjection * vec4(position, 1.0);\n v_Color = a_Color;\n}\n\n@end\n\n@export ecgl.lines3D.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nvarying vec4 v_Color;\n\n@import clay.util.srgb\n\nvoid main()\n{\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(color * v_Color);\n#else\n gl_FragColor = color * v_Color;\n#endif\n}\n@end\n\n\n\n@export ecgl.lines3D.clipNear\n\nvec4 clipNear(vec4 p1, vec4 p2) {\n float n = (p1.w - near) / (p1.w - p2.w);\n return vec4(mix(p1.xy, p2.xy, n), -near, near);\n}\n\n@end\n\n@export ecgl.lines3D.expandLine\n#ifdef VERTEX_ANIMATION\n vec4 prevProj = worldViewProjection * vec4(mix(prevPositionPrev, positionPrev, percent), 1.0);\n vec4 currProj = worldViewProjection * vec4(mix(prevPosition, position, percent), 1.0);\n vec4 nextProj = worldViewProjection * vec4(mix(prevPositionNext, positionNext, percent), 1.0);\n#else\n vec4 prevProj = worldViewProjection * vec4(positionPrev, 1.0);\n vec4 currProj = worldViewProjection * vec4(position, 1.0);\n vec4 nextProj = worldViewProjection * vec4(positionNext, 1.0);\n#endif\n\n if (currProj.w < 0.0) {\n if (nextProj.w > 0.0) {\n currProj = clipNear(currProj, nextProj);\n }\n else if (prevProj.w > 0.0) {\n currProj = clipNear(currProj, prevProj);\n }\n }\n\n vec2 prevScreen = (prevProj.xy / abs(prevProj.w) + 1.0) * 0.5 * viewport.zw;\n vec2 currScreen = (currProj.xy / abs(currProj.w) + 1.0) * 0.5 * viewport.zw;\n vec2 nextScreen = (nextProj.xy / abs(nextProj.w) + 1.0) * 0.5 * viewport.zw;\n\n vec2 dir;\n float len = offset;\n if (position == positionPrev) {\n dir = normalize(nextScreen - currScreen);\n }\n else if (position == positionNext) {\n dir = normalize(currScreen - prevScreen);\n }\n else {\n vec2 dirA = normalize(currScreen - prevScreen);\n vec2 dirB = normalize(nextScreen - currScreen);\n\n vec2 tanget = normalize(dirA + dirB);\n\n float miter = 1.0 / max(dot(tanget, dirA), 0.5);\n len *= miter;\n dir = tanget;\n }\n\n dir = vec2(-dir.y, dir.x) * len;\n currScreen += dir;\n\n currProj.xy = (currScreen / viewport.zw - 0.5) * 2.0 * abs(currProj.w);\n@end\n\n\n@export ecgl.meshLines3D.vertex\n\nattribute vec3 position: POSITION;\nattribute vec3 positionPrev;\nattribute vec3 positionNext;\nattribute float offset;\nattribute vec4 a_Color : COLOR;\n\n#ifdef VERTEX_ANIMATION\nattribute vec3 prevPosition;\nattribute vec3 prevPositionPrev;\nattribute vec3 prevPositionNext;\nuniform float percent : 1.0;\n#endif\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform vec4 viewport : VIEWPORT;\nuniform float near : NEAR;\n\nvarying vec4 v_Color;\n\n@import ecgl.common.wireframe.vertexHeader\n\n@import ecgl.lines3D.clipNear\n\nvoid main()\n{\n @import ecgl.lines3D.expandLine\n\n gl_Position = currProj;\n\n v_Color = a_Color;\n\n @import ecgl.common.wireframe.vertexMain\n}\n@end\n\n\n@export ecgl.meshLines3D.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nvarying vec4 v_Color;\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.util.srgb\n\nvoid main()\n{\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(color * v_Color);\n#else\n gl_FragColor = color * v_Color;\n#endif\n\n @import ecgl.common.wireframe.fragmentMain\n}\n\n@end";var KW=qr.firstNotNull;lt.Shader.import(ZI);var Jg={x:0,y:2,z:1};const Ire=bt.Ir.extend({type:"grid3D",__ecgl__:!0,init:function(e,n){var i=new lt.Material({shader:lt.createShader("ecgl.color"),depthMask:!1,transparent:!0}),o=new lt.Material({shader:lt.createShader("ecgl.meshLines3D"),depthMask:!1,transparent:!0});i.define("fragment","DOUBLE_SIDED"),i.define("both","VERTEX_COLOR"),this.groupGL=new lt.Node,this._control=new GI({zr:n.getZr()}),this._control.init(),this._faces=[["y","z","x",-1,"left"],["y","z","x",1,"right"],["x","y","z",-1,"bottom"],["x","y","z",1,"top"],["x","z","y",-1,"far"],["x","z","y",1,"near"]].map(function(f){var g=new Mre(f,o,i);return this.groupGL.add(g.rootNode),g},this),this._axes=["x","y","z"].map(function(f){var g=new Are(f,o);return this.groupGL.add(g.rootNode),g},this);var d=n.getDevicePixelRatio();this._axisLabelSurface=new I3({width:256,height:256,devicePixelRatio:d}),this._axisLabelSurface.onupdate=function(){n.getZr().refresh()},this._axisPointerLineMesh=new lt.Mesh({geometry:new $g({useNativeLine:!1}),material:o,castShadow:!1,ignorePicking:!0,renderOrder:3}),this.groupGL.add(this._axisPointerLineMesh),this._axisPointerLabelsSurface=new I3({width:128,height:128,devicePixelRatio:d}),this._axisPointerLabelsMesh=new L3({ignorePicking:!0,renderOrder:4,castShadow:!1}),this._axisPointerLabelsMesh.material.set("textureAtlas",this._axisPointerLabelsSurface.getTexture()),this.groupGL.add(this._axisPointerLabelsMesh),this._lightRoot=new lt.Node,this._sceneHelper=new Wy,this._sceneHelper.initLight(this._lightRoot)},render:function(e,n,t){this._model=e,this._api=t;var r=e.coordinateSystem;r.viewGL.add(this._lightRoot),e.get("show")?r.viewGL.add(this.groupGL):r.viewGL.remove(this.groupGL);var i=this._control;i.setViewGL(r.viewGL);var o=e.getModel("viewControl");i.setFromViewControlModel(o,0),this._axisLabelSurface.clear(),i.off("update"),e.get("show")&&(this._faces.forEach(function(d){d.update(e,n,t)},this),this._axes.forEach(function(d){d.update(e,this._axisLabelSurface,t)},this)),i.on("update",this._onCameraChange.bind(this,e,t),this),this._sceneHelper.setScene(r.viewGL.scene),this._sceneHelper.updateLight(e),r.viewGL.setPostEffect(e.getModel("postEffect"),t),r.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling")),this._initMouseHandler(e)},afterRender:function(e,n,t,r){var i=r.renderer;this._sceneHelper.updateAmbientCubemap(i,e,t),this._sceneHelper.updateSkybox(i,e,t)},showAxisPointer:function(e,n,t,r){this._doShowAxisPointer(),this._updateAxisPointer(r.value)},hideAxisPointer:function(e,n,t,r){this._doHideAxisPointer()},_initMouseHandler:function(e){var t=e.coordinateSystem.viewGL;e.get("show")&&e.get("axisPointer.show")?t.on("mousemove",this._updateAxisPointerOnMousePosition,this):t.off("mousemove",this._updateAxisPointerOnMousePosition)},_updateAxisPointerOnMousePosition:function(e){if(!e.target){for(var o,t=this._model.coordinateSystem,r=t.viewGL,i=r.castRay(e.offsetX,e.offsetY,new lt.Ray),d=0;d<this._faces.length;d++){var f=this._faces[d];if(!f.rootNode.invisible){f.plane.normal.dot(r.camera.worldTransform.z)<0&&f.plane.normal.negate();var g=i.intersectPlane(f.plane);if(g){var _=t.getAxis(f.faceInfo[0]),C=t.getAxis(f.faceInfo[1]),k=Jg[f.faceInfo[1]];_.contain(g.array[Jg[f.faceInfo[0]]])&&C.contain(g.array[k])&&(o=g)}}}if(o){var z=t.pointToData(o.array,[],!0);this._updateAxisPointer(z),this._doShowAxisPointer()}else this._doHideAxisPointer()}},_onCameraChange:function(e,n){e.get("show")&&(this._updateFaceVisibility(),this._updateAxisLinePosition());var t=this._control;n.dispatchAction({type:"grid3DChangeCamera",alpha:t.getAlpha(),beta:t.getBeta(),distance:t.getDistance(),center:t.getCenter(),from:this.uid,grid3DId:e.id})},_updateFaceVisibility:function(){var e=this._control.getCamera(),n=new lt.Vector3;e.update();for(var t=0;t<this._faces.length/2;t++){for(var r=[],i=0;i<2;i++)this._faces[2*t+i].rootNode.getWorldPosition(n),n.transformMat4(e.viewMatrix),r[i]=n.z;var d=r[0]>r[1]?0:1,g=this._faces[2*t+1-d];this._faces[2*t+d].rootNode.invisible=!0,g.rootNode.invisible=!1}},_updateAxisLinePosition:function(){var e=this._model.coordinateSystem,n=e.getAxis("x"),t=e.getAxis("y"),r=e.getAxis("z"),i=r.getExtentMax(),o=r.getExtentMin(),d=n.getExtentMin(),f=n.getExtentMax(),g=t.getExtentMax(),_=t.getExtentMin(),C=this._axes[0].rootNode,S=this._axes[1].rootNode,k=this._axes[2].rootNode,z=this._faces,te=z[4].rootNode.invisible?_:g,pe=z[2].rootNode.invisible?i:o,Me=z[0].rootNode.invisible?d:f,Re=z[2].rootNode.invisible?i:o,Fe=z[0].rootNode.invisible?f:d,Oe=z[4].rootNode.invisible?_:g;C.rotation.identity(),S.rotation.identity(),k.rotation.identity(),z[4].rootNode.invisible&&(this._axes[0].flipped=!0,C.rotation.rotateX(Math.PI)),z[0].rootNode.invisible&&(this._axes[1].flipped=!0,S.rotation.rotateZ(Math.PI)),z[4].rootNode.invisible&&(this._axes[2].flipped=!0,k.rotation.rotateY(Math.PI)),C.position.set(0,pe,te),S.position.set(Me,Re,0),k.position.set(Fe,0,Oe),C.update(),S.update(),k.update(),this._updateAxisLabelAlign()},_updateAxisLabelAlign:function(){var e=this._control.getCamera(),n=[new lt.Vector4,new lt.Vector4],t=new lt.Vector4;this.groupGL.getWorldPosition(t),t.w=1,t.transformMat4(e.viewMatrix).transformMat4(e.projectionMatrix),t.x/=t.w,t.y/=t.w,this._axes.forEach(function(r){for(var i=r.axisLineCoords,d=0;d<n.length;d++)n[d].setArray(i[d]),n[d].w=1,n[d].transformMat4(r.rootNode.worldTransform).transformMat4(e.viewMatrix).transformMat4(e.projectionMatrix),n[d].x/=n[d].w,n[d].y/=n[d].w;var S,k,_=(n[1].x+n[0].x)/2,C=(n[1].y+n[0].y)/2;Math.abs((n[1].y-n[0].y)/(n[1].x-n[0].x))<.5?(S="center",k=C>t.y?"bottom":"top"):(k="middle",S=_>t.x?"left":"right"),r.setSpriteAlign(S,k,this._api)},this)},_doShowAxisPointer:function(){!this._axisPointerLineMesh.invisible||(this._axisPointerLineMesh.invisible=!1,this._axisPointerLabelsMesh.invisible=!1,this._api.getZr().refresh())},_doHideAxisPointer:function(){this._axisPointerLineMesh.invisible||(this._axisPointerLineMesh.invisible=!0,this._axisPointerLabelsMesh.invisible=!0,this._api.getZr().refresh())},_updateAxisPointer:function(e){var n=this._model.coordinateSystem,t=n.dataToPoint(e),i=this._axisPointerLineMesh.geometry,o=this._model.getModel("axisPointer"),d=this._api.getDevicePixelRatio();function f(mt){return qr.firstNotNull(mt.model.get("axisPointer.show"),o.get("show"))}function g(mt){var nn=mt.model.getModel("axisPointer",o).getModel("lineStyle"),$t=lt.parseColor(nn.get("color")),pn=KW(nn.get("width"),1),mn=KW(nn.get("opacity"),1);return $t[3]*=mn,{color:$t,lineWidth:pn}}i.convertToDynamicArray(!0);for(var _=0;_<this._faces.length;_++){var C=this._faces[_];if(!C.rootNode.invisible){for(var S=C.faceInfo,k=S[3]<0?n.getAxis(S[2]).getExtentMin():n.getAxis(S[2]).getExtentMax(),z=Jg[S[2]],te=0;te<2;te++){var pe=S[te],Me=S[1-te],Re=n.getAxis(pe),Fe=n.getAxis(Me);if(f(Re)){var it=Jg[pe],at=Jg[Me];(Oe=[0,0,0])[it]=(Be=[0,0,0])[it]=t[it],Oe[z]=Be[z]=k,Oe[at]=Fe.getExtentMin(),Be[at]=Fe.getExtentMax();var Ct=g(Re);i.addLine(Oe,Be,Ct.color,Ct.lineWidth*d)}}if(f(n.getAxis(S[2]))){var Be,Oe=t.slice();(Be=t.slice())[z]=k,Ct=g(n.getAxis(S[2])),i.addLine(Oe,Be,Ct.color,Ct.lineWidth*d)}}}i.convertToTypedArray(),this._updateAxisPointerLabelsMesh(e),this._api.getZr().refresh()},_updateAxisPointerLabelsMesh:function(e){var n=this._model,t=this._axisPointerLabelsMesh,r=this._axisPointerLabelsSurface,i=n.coordinateSystem,o=n.getModel("axisPointer");t.geometry.convertToDynamicArray(!0),r.clear();var d={x:"y",y:"x",z:"y"};this._axes.forEach(function(f,g){var _=i.getAxis(f.dim),S=_.model.getModel("axisPointer",o),k=S.getModel("label"),z=S.get("lineStyle.color");if(k.get("show")&&S.get("show")){var te=e[g],pe=k.get("formatter"),Me=_.scale.getLabel({value:te});if(null!=pe)Me=pe(Me,e);else if("interval"===_.scale.type||"log"===_.scale.type){var Re=bt.Rx.getPrecisionSafe(_.scale.getTicks()[0]);Me=te.toFixed(Re+2)}var Fe=k.get("color"),Oe=new bt.Q.Text({style:(0,UI.Lr)(k,{text:Me,fill:Fe||z,align:"left",verticalAlign:"top"})}),Be=r.add(Oe),it=Oe.getBoundingRect(),at=this._api.getDevicePixelRatio(),Ct=f.rootNode.position.toArray();Ct[Jg[d[f.dim]]]+=(f.flipped?-1:1)*k.get("margin"),Ct[Jg[f.dim]]=_.dataToCoord(e[g]),t.geometry.addSprite(Ct,[it.width*at,it.height*at],Be,f.textAlign,f.textVerticalAlign)}},this),r.getZr().refreshImmediately(),t.material.set("uvScale",r.getCoordsScale()),t.geometry.convertToTypedArray()},dispose:function(){this.groupGL.removeAll(),this._control.dispose(),this._axisLabelSurface.dispose(),this._axisPointerLabelsSurface.dispose()}});var QW=H(8540);function YI(e){QW.Z.call(this,e),this.type="cartesian3D",this.dimensions=["x","y","z"],this.size=[0,0,0]}YI.prototype={constructor:YI,model:null,containPoint:function(e){return this.getAxis("x").contain(e[0])&&this.getAxis("y").contain(e[2])&&this.getAxis("z").contain(e[1])},containData:function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])&&this.getAxis("z").containData(e[2])},dataToPoint:function(e,n,t){return(n=n||[])[0]=this.getAxis("x").dataToCoord(e[0],t),n[2]=this.getAxis("y").dataToCoord(e[1],t),n[1]=this.getAxis("z").dataToCoord(e[2],t),n},pointToData:function(e,n,t){return(n=n||[])[0]=this.getAxis("x").coordToData(e[0],t),n[1]=this.getAxis("y").coordToData(e[2],t),n[2]=this.getAxis("z").coordToData(e[1],t),n}},bt.D5.inherits(YI,QW.Z);const qW=YI;function XI(e,n,t){bt.RD.call(this,e,n,t)}XI.prototype={constructor:XI,getExtentMin:function(){var e=this._extent;return Math.min(e[0],e[1])},getExtentMax:function(){var e=this._extent;return Math.max(e[0],e[1])},calculateCategoryInterval:function(){return Math.floor(this.scale.count()/8)}},bt.D5.inherits(XI,bt.RD);const Pre=XI;var $I=H(634),N3=function(){this._pool={},this._allocatedTextures=[]};N3.prototype={constructor:N3,get:function(e){var n=e6(e);this._pool.hasOwnProperty(n)||(this._pool[n]=[]);var t=this._pool[n];if(!t.length){var r=new $r(e);return this._allocatedTextures.push(r),r}return t.pop()},put:function(e){var n=e6(e);this._pool.hasOwnProperty(n)||(this._pool[n]=[]),this._pool[n].push(e)},clear:function(e){for(var n=0;n<this._allocatedTextures.length;n++)this._allocatedTextures[n].dispose(e);this._pool={},this._allocatedTextures=[]}};var JW={width:512,height:512,type:5121,format:6408,wrapS:33071,wrapT:33071,minFilter:9987,magFilter:9729,useMipmap:!0,anisotropic:1,flipY:!0,unpackAlignment:4,premultiplyAlpha:!1},F3=Object.keys(JW);function e6(e){$o.defaultsWithPropList(e,JW,F3),function Rre(e){var n=function Lre(e,n){return 0==(e&e-1)&&0==(n&n-1)}(e.width,e.height);6402===e.format&&(e.useMipmap=!1),(!n||!e.useMipmap)&&(9984==e.minFilter||9986==e.minFilter?e.minFilter=9728:(9987==e.minFilter||9985==e.minFilter)&&(e.minFilter=9729)),n||(e.wrapS=33071,e.wrapT=33071)}(e);for(var n="",t=0;t<F3.length;t++)n+=e[F3[t]].toString();return n}const t6=N3;var Mf=["px","nx","py","ny","pz","nz"];function B3(e,n,t){return"alphaMap"===t?e.material.get("diffuseMap"):"alphaCutoff"===t?e.material.isDefined("fragment","ALPHA_TEST")&&e.material.get("diffuseMap")&&e.material.get("alphaCutoff")||0:"uvRepeat"===t?e.material.get("uvRepeat"):"uvOffset"===t?e.material.get("uvOffset"):n.get(t)}function n6(e,n){var t=e.material,r=n.material;return t.get("diffuseMap")!==r.get("diffuseMap")||(t.get("alphaCutoff")||0)!==(r.get("alphaCutoff")||0)}Un.import("@export clay.sm.depth.vertex\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nattribute vec3 position : POSITION;\nattribute vec2 texcoord : TEXCOORD_0;\nuniform vec2 uvRepeat = vec2(1.0, 1.0);\nuniform vec2 uvOffset = vec2(0.0, 0.0);\n@import clay.chunk.skinning_header\n@import clay.chunk.instancing_header\nvarying vec4 v_ViewPosition;\nvarying vec2 v_Texcoord;\nvoid main(){\n vec4 P = vec4(position, 1.0);\n#ifdef SKINNING\n @import clay.chunk.skin_matrix\n P = skinMatrixWS * P;\n#endif\n#ifdef INSTANCING\n @import clay.chunk.instancing_matrix\n P = instanceMat * P;\n#endif\n v_ViewPosition = worldViewProjection * P;\n gl_Position = v_ViewPosition;\n v_Texcoord = texcoord * uvRepeat + uvOffset;\n}\n@end\n@export clay.sm.depth.fragment\nvarying vec4 v_ViewPosition;\nvarying vec2 v_Texcoord;\nuniform float bias : 0.001;\nuniform float slopeScale : 1.0;\nuniform sampler2D alphaMap;\nuniform float alphaCutoff: 0.0;\n@import clay.util.encode_float\nvoid main(){\n float depth = v_ViewPosition.z / v_ViewPosition.w;\n if (alphaCutoff > 0.0) {\n if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {\n discard;\n }\n }\n#ifdef USE_VSM\n depth = depth * 0.5 + 0.5;\n float moment1 = depth;\n float moment2 = depth * depth;\n #ifdef SUPPORT_STANDARD_DERIVATIVES\n float dx = dFdx(depth);\n float dy = dFdy(depth);\n moment2 += 0.25*(dx*dx+dy*dy);\n #endif\n gl_FragColor = vec4(moment1, moment2, 0.0, 1.0);\n#else\n #ifdef SUPPORT_STANDARD_DERIVATIVES\n float dx = dFdx(depth);\n float dy = dFdy(depth);\n depth += sqrt(dx*dx + dy*dy) * slopeScale + bias;\n #else\n depth += bias;\n #endif\n gl_FragColor = encodeFloat(depth * 0.5 + 0.5);\n#endif\n}\n@end\n@export clay.sm.debug_depth\nuniform sampler2D depthMap;\nvarying vec2 v_Texcoord;\n@import clay.util.decode_float\nvoid main() {\n vec4 tex = texture2D(depthMap, v_Texcoord);\n#ifdef USE_VSM\n gl_FragColor = vec4(tex.rgb, 1.0);\n#else\n float depth = decodeFloat(tex);\n gl_FragColor = vec4(depth, depth, depth, 1.0);\n#endif\n}\n@end\n@export clay.sm.distance.vertex\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform mat4 world : WORLD;\nattribute vec3 position : POSITION;\n@import clay.chunk.skinning_header\nvarying vec3 v_WorldPosition;\nvoid main (){\n vec4 P = vec4(position, 1.0);\n#ifdef SKINNING\n @import clay.chunk.skin_matrix\n P = skinMatrixWS * P;\n#endif\n#ifdef INSTANCING\n @import clay.chunk.instancing_matrix\n P = instanceMat * P;\n#endif\n gl_Position = worldViewProjection * P;\n v_WorldPosition = (world * P).xyz;\n}\n@end\n@export clay.sm.distance.fragment\nuniform vec3 lightPosition;\nuniform float range : 100;\nvarying vec3 v_WorldPosition;\n@import clay.util.encode_float\nvoid main(){\n float dist = distance(lightPosition, v_WorldPosition);\n#ifdef USE_VSM\n gl_FragColor = vec4(dist, dist * dist, 0.0, 0.0);\n#else\n dist = dist / range;\n gl_FragColor = encodeFloat(dist);\n#endif\n}\n@end\n@export clay.plugin.shadow_map_common\n@import clay.util.decode_float\nfloat tapShadowMap(sampler2D map, vec2 uv, float z){\n vec4 tex = texture2D(map, uv);\n return step(z, decodeFloat(tex) * 2.0 - 1.0);\n}\nfloat pcf(sampler2D map, vec2 uv, float z, float textureSize, vec2 scale) {\n float shadowContrib = tapShadowMap(map, uv, z);\n vec2 offset = vec2(1.0 / textureSize) * scale;\n#ifdef PCF_KERNEL_SIZE\n for (int _idx_ = 0; _idx_ < PCF_KERNEL_SIZE; _idx_++) {{\n shadowContrib += tapShadowMap(map, uv + offset * pcfKernel[_idx_], z);\n }}\n return shadowContrib / float(PCF_KERNEL_SIZE + 1);\n#else\n shadowContrib += tapShadowMap(map, uv+vec2(offset.x, 0.0), z);\n shadowContrib += tapShadowMap(map, uv+vec2(offset.x, offset.y), z);\n shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, offset.y), z);\n shadowContrib += tapShadowMap(map, uv+vec2(0.0, offset.y), z);\n shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, 0.0), z);\n shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, -offset.y), z);\n shadowContrib += tapShadowMap(map, uv+vec2(offset.x, -offset.y), z);\n shadowContrib += tapShadowMap(map, uv+vec2(0.0, -offset.y), z);\n return shadowContrib / 9.0;\n#endif\n}\nfloat pcf(sampler2D map, vec2 uv, float z, float textureSize) {\n return pcf(map, uv, z, textureSize, vec2(1.0));\n}\nfloat chebyshevUpperBound(vec2 moments, float z){\n float p = 0.0;\n z = z * 0.5 + 0.5;\n if (z <= moments.x) {\n p = 1.0;\n }\n float variance = moments.y - moments.x * moments.x;\n variance = max(variance, 0.0000001);\n float mD = moments.x - z;\n float pMax = variance / (variance + mD * mD);\n pMax = clamp((pMax-0.4)/(1.0-0.4), 0.0, 1.0);\n return max(p, pMax);\n}\nfloat computeShadowContrib(\n sampler2D map, mat4 lightVPM, vec3 position, float textureSize, vec2 scale, vec2 offset\n) {\n vec4 posInLightSpace = lightVPM * vec4(position, 1.0);\n posInLightSpace.xyz /= posInLightSpace.w;\n float z = posInLightSpace.z;\n if(all(greaterThan(posInLightSpace.xyz, vec3(-0.99, -0.99, -1.0))) &&\n all(lessThan(posInLightSpace.xyz, vec3(0.99, 0.99, 1.0)))){\n vec2 uv = (posInLightSpace.xy+1.0) / 2.0;\n #ifdef USE_VSM\n vec2 moments = texture2D(map, uv * scale + offset).xy;\n return chebyshevUpperBound(moments, z);\n #else\n return pcf(map, uv * scale + offset, z, textureSize, scale);\n #endif\n }\n return 1.0;\n}\nfloat computeShadowContrib(sampler2D map, mat4 lightVPM, vec3 position, float textureSize) {\n return computeShadowContrib(map, lightVPM, position, textureSize, vec2(1.0), vec2(0.0));\n}\nfloat computeShadowContribOmni(samplerCube map, vec3 direction, float range)\n{\n float dist = length(direction);\n vec4 shadowTex = textureCube(map, direction);\n#ifdef USE_VSM\n vec2 moments = shadowTex.xy;\n float variance = moments.y - moments.x * moments.x;\n float mD = moments.x - dist;\n float p = variance / (variance + mD * mD);\n if(moments.x + 0.001 < dist){\n return clamp(p, 0.0, 1.0);\n }else{\n return 1.0;\n }\n#else\n return step(dist, (decodeFloat(shadowTex) + 0.0002) * range);\n#endif\n}\n@end\n@export clay.plugin.compute_shadow_map\n#if defined(SPOT_LIGHT_SHADOWMAP_COUNT) || defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT) || defined(POINT_LIGHT_SHADOWMAP_COUNT)\n#ifdef SPOT_LIGHT_SHADOWMAP_COUNT\nuniform sampler2D spotLightShadowMaps[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\nuniform mat4 spotLightMatrices[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\nuniform float spotLightShadowMapSizes[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\n#endif\n#ifdef DIRECTIONAL_LIGHT_SHADOWMAP_COUNT\n#if defined(SHADOW_CASCADE)\nuniform sampler2D directionalLightShadowMaps[1]:unconfigurable;\nuniform mat4 directionalLightMatrices[SHADOW_CASCADE]:unconfigurable;\nuniform float directionalLightShadowMapSizes[1]:unconfigurable;\nuniform float shadowCascadeClipsNear[SHADOW_CASCADE]:unconfigurable;\nuniform float shadowCascadeClipsFar[SHADOW_CASCADE]:unconfigurable;\n#else\nuniform sampler2D directionalLightShadowMaps[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\nuniform mat4 directionalLightMatrices[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\nuniform float directionalLightShadowMapSizes[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\n#endif\n#endif\n#ifdef POINT_LIGHT_SHADOWMAP_COUNT\nuniform samplerCube pointLightShadowMaps[POINT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\n#endif\nuniform bool shadowEnabled : true;\n#ifdef PCF_KERNEL_SIZE\nuniform vec2 pcfKernel[PCF_KERNEL_SIZE];\n#endif\n@import clay.plugin.shadow_map_common\n#if defined(SPOT_LIGHT_SHADOWMAP_COUNT)\nvoid computeShadowOfSpotLights(vec3 position, inout float shadowContribs[SPOT_LIGHT_COUNT] ) {\n float shadowContrib;\n for(int _idx_ = 0; _idx_ < SPOT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{\n shadowContrib = computeShadowContrib(\n spotLightShadowMaps[_idx_], spotLightMatrices[_idx_], position,\n spotLightShadowMapSizes[_idx_]\n );\n shadowContribs[_idx_] = shadowContrib;\n }}\n for(int _idx_ = SPOT_LIGHT_SHADOWMAP_COUNT; _idx_ < SPOT_LIGHT_COUNT; _idx_++){{\n shadowContribs[_idx_] = 1.0;\n }}\n}\n#endif\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n#ifdef SHADOW_CASCADE\nvoid computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){\n float depth = (2.0 * gl_FragCoord.z - gl_DepthRange.near - gl_DepthRange.far)\n / (gl_DepthRange.far - gl_DepthRange.near);\n float shadowContrib;\n shadowContribs[0] = 1.0;\n for (int _idx_ = 0; _idx_ < SHADOW_CASCADE; _idx_++) {{\n if (\n depth >= shadowCascadeClipsNear[_idx_] &&\n depth <= shadowCascadeClipsFar[_idx_]\n ) {\n shadowContrib = computeShadowContrib(\n directionalLightShadowMaps[0], directionalLightMatrices[_idx_], position,\n directionalLightShadowMapSizes[0],\n vec2(1.0 / float(SHADOW_CASCADE), 1.0),\n vec2(float(_idx_) / float(SHADOW_CASCADE), 0.0)\n );\n shadowContribs[0] = shadowContrib;\n }\n }}\n for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{\n shadowContribs[_idx_] = 1.0;\n }}\n}\n#else\nvoid computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){\n float shadowContrib;\n for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_++) {{\n shadowContrib = computeShadowContrib(\n directionalLightShadowMaps[_idx_], directionalLightMatrices[_idx_], position,\n directionalLightShadowMapSizes[_idx_]\n );\n shadowContribs[_idx_] = shadowContrib;\n }}\n for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{\n shadowContribs[_idx_] = 1.0;\n }}\n}\n#endif\n#endif\n#if defined(POINT_LIGHT_SHADOWMAP_COUNT)\nvoid computeShadowOfPointLights(vec3 position, inout float shadowContribs[POINT_LIGHT_COUNT] ){\n vec3 lightPosition;\n vec3 direction;\n for(int _idx_ = 0; _idx_ < POINT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{\n lightPosition = pointLightPosition[_idx_];\n direction = position - lightPosition;\n shadowContribs[_idx_] = computeShadowContribOmni(pointLightShadowMaps[_idx_], direction, pointLightRange[_idx_]);\n }}\n for(int _idx_ = POINT_LIGHT_SHADOWMAP_COUNT; _idx_ < POINT_LIGHT_COUNT; _idx_++) {{\n shadowContribs[_idx_] = 1.0;\n }}\n}\n#endif\n#endif\n@end");var td=Gs.extend(function(){return{softShadow:td.PCF,shadowBlur:1,lightFrustumBias:"auto",kernelPCF:new Float32Array([1,0,1,1,-1,1,0,1,-1,0,-1,-1,1,-1,0,-1]),precision:"highp",_lastRenderNotCastShadow:!1,_frameBuffer:new qo,_textures:{},_shadowMapNumber:{POINT_LIGHT:0,DIRECTIONAL_LIGHT:0,SPOT_LIGHT:0},_depthMaterials:{},_distanceMaterials:{},_receivers:[],_lightsCastShadow:[],_lightCameras:{},_lightMaterials:{},_texturePool:new t6}},function(){this._gaussianPassH=new so({fragment:Un.source("clay.compositor.gaussian_blur")}),this._gaussianPassV=new so({fragment:Un.source("clay.compositor.gaussian_blur")}),this._gaussianPassH.setUniform("blurSize",this.shadowBlur),this._gaussianPassH.setUniform("blurDir",0),this._gaussianPassV.setUniform("blurSize",this.shadowBlur),this._gaussianPassV.setUniform("blurDir",1),this._outputDepthPass=new so({fragment:Un.source("clay.sm.debug_depth")})},{render:function(e,n,t,r){t||(t=n.getMainCamera()),this.trigger("beforerender",this,e,n,t),this._renderShadowPass(e,n,t,r),this.trigger("afterrender",this,e,n,t)},renderDebug:function(e,n){e.saveClear();var t=e.viewport,r=0,o=n||t.width/4,d=o;for(var f in this.softShadow===td.VSM?this._outputDepthPass.material.define("fragment","USE_VSM"):this._outputDepthPass.material.undefine("fragment","USE_VSM"),this._textures){var g=this._textures[f];e.setViewport(r,0,o*g.width/g.height,d),this._outputDepthPass.setUniform("depthMap",g),this._outputDepthPass.render(e),r+=o*g.width/g.height}e.setViewport(t),e.restoreClear()},_updateReceivers:function(e,n){if(n.receiveShadow?(this._receivers.push(n),n.material.set("shadowEnabled",1),n.material.set("pcfKernel",this.kernelPCF)):n.material.set("shadowEnabled",0),this.softShadow===td.VSM)n.material.define("fragment","USE_VSM"),n.material.undefine("fragment","PCF_KERNEL_SIZE");else{n.material.undefine("fragment","USE_VSM");var t=this.kernelPCF;t&&t.length?n.material.define("fragment","PCF_KERNEL_SIZE",t.length/2):n.material.undefine("fragment","PCF_KERNEL_SIZE")}},_update:function(e,n){var t=this;n.traverse(function(o){o.isRenderable()&&t._updateReceivers(e,o)});for(var r=0;r<n.lights.length;r++){var i=n.lights[r];i.castShadow&&!i.invisible&&this._lightsCastShadow.push(i)}},_renderShadowPass:function(e,n,t,r){for(var i in this._shadowMapNumber)this._shadowMapNumber[i]=0;this._lightsCastShadow.length=0,this._receivers.length=0;var o=e.gl;if(r||n.update(),t&&t.update(),n.updateLights(),this._update(e,n),this._lightsCastShadow.length||!this._lastRenderNotCastShadow){this._lastRenderNotCastShadow=0===this._lightsCastShadow,o.enable(o.DEPTH_TEST),o.depthMask(!0),o.disable(o.BLEND),o.clearColor(1,1,1,1);for(var k,d=[],f=[],g=[],_=[],C=[],S=[],z=0;z<this._lightsCastShadow.length;z++){var te=this._lightsCastShadow[z];if("DIRECTIONAL_LIGHT"===te.type){if(k){console.warn("Only one direectional light supported with shadow cascade");continue}if(te.shadowCascade>4){console.warn("Support at most 4 cascade");continue}te.shadowCascade>1&&(k=te),this.renderDirectionalLightShadow(e,n,t,te,C,_,g)}else"SPOT_LIGHT"===te.type?this.renderSpotLightShadow(e,n,te,f,d):"POINT_LIGHT"===te.type&&this.renderPointLightShadow(e,n,te,S);this._shadowMapNumber[te.type]++}for(var pe in this._shadowMapNumber){var Me=this._shadowMapNumber[pe],Re=pe+"_SHADOWMAP_COUNT";for(z=0;z<this._receivers.length;z++)(Oe=this._receivers[z].material).fragmentDefines[Re]!==Me&&(Me>0?Oe.define("fragment",Re,Me):Oe.isDefined("fragment",Re)&&Oe.undefine("fragment",Re))}for(z=0;z<this._receivers.length;z++){var Oe=this._receivers[z].material;k?Oe.define("fragment","SHADOW_CASCADE",k.shadowCascade):Oe.undefine("fragment","SHADOW_CASCADE")}var Be=n.shadowUniforms;if(g.length>0){var at=g.map(it);if(Be.directionalLightShadowMaps={value:g,type:"tv"},Be.directionalLightMatrices={value:_,type:"m4v"},Be.directionalLightShadowMapSizes={value:at,type:"1fv"},k){var Ct=C.slice(),mt=C.slice();Ct.pop(),mt.shift(),Ct.reverse(),mt.reverse(),_.reverse(),Be.shadowCascadeClipsNear={value:Ct,type:"1fv"},Be.shadowCascadeClipsFar={value:mt,type:"1fv"}}}if(d.length>0){var Ft=d.map(it);(Be=n.shadowUniforms).spotLightShadowMaps={value:d,type:"tv"},Be.spotLightMatrices={value:f,type:"m4v"},Be.spotLightShadowMapSizes={value:Ft,type:"1fv"}}S.length>0&&(Be.pointLightShadowMaps={value:S,type:"tv"})}function it(nn){return nn.height}},renderDirectionalLightShadow:function(){var e=new m3,n=new ir,t=new js,r=new ir,i=new ir,o=new ir,d=new ir;return function(f,g,_,C,S,k,z){var te=this._getDepthMaterial(C),pe={getMaterial:function(_i){return _i.shadowDepthMaterial||te},isMaterialChanged:n6,getUniform:B3,ifRender:function(_i){return _i.castShadow},sortCompare:XC.opaqueSortCompare};if(!g.viewBoundingBoxLastFrame.isFinite()){var Me=g.getBoundingBox();g.viewBoundingBoxLastFrame.copy(Me).applyTransform(_.viewMatrix)}var Re=Math.min(-g.viewBoundingBoxLastFrame.min.z,_.far),Fe=Math.max(-g.viewBoundingBoxLastFrame.max.z,_.near),Oe=this._getDirectionalLightCamera(C,g,_),Be=o.array;d.copy(Oe.projectionMatrix),An.invert(i.array,Oe.worldTransform.array),An.multiply(i.array,i.array,_.worldTransform.array),An.multiply(Be,d.array,i.array);for(var it=[],at=_ instanceof No,Ct=(_.near+_.far)/(_.near-_.far),mt=2*_.near*_.far/(_.near-_.far),Ft=0;Ft<=C.shadowCascade;Ft++){var pn=Fe*Math.pow(Re/Fe,Ft/C.shadowCascade)*C.cascadeSplitLogFactor+(Fe+(Re-Fe)*Ft/C.shadowCascade)*(1-C.cascadeSplitLogFactor);it.push(pn),S.push(-(-pn*Ct+mt)/-pn)}var mn=this._getTexture(C,C.shadowCascade);z.push(mn);var sn=f.viewport,wn=f.gl;for(this._frameBuffer.attach(mn),this._frameBuffer.bind(f),wn.clear(wn.COLOR_BUFFER_BIT|wn.DEPTH_BUFFER_BIT),Ft=0;Ft<C.shadowCascade;Ft++){var Gt=it[Ft],ln=it[Ft+1];at?An.perspective(n.array,_.fov/180*Math.PI,_.aspect,Gt,ln):An.ortho(n.array,_.left,_.right,_.bottom,_.top,Gt,ln),e.setFromProjection(n),e.getTransformedBoundingBox(t,i),t.applyProjection(d);var Xt=t.min.array,Xn=t.max.array;Xt[0]=Math.max(Xt[0],-1),Xt[1]=Math.max(Xt[1],-1),Xn[0]=Math.min(Xn[0],1),Xn[1]=Math.min(Xn[1],1),r.ortho(Xt[0],Xn[0],Xt[1],Xn[1],1,-1),Oe.projectionMatrix.multiplyLeft(r);var In=C.shadowResolution||512;f.setViewport((C.shadowCascade-Ft-1)*In,0,In,In,1);var ai=g.updateRenderList(Oe);f.renderPass(ai.opaque,Oe,pe),this.softShadow===td.VSM&&this._gaussianFilter(f,mn,mn.width);var Nr=new ir;Nr.copy(Oe.viewMatrix).multiplyLeft(Oe.projectionMatrix),k.push(Nr.array),Oe.projectionMatrix.copy(d)}this._frameBuffer.unbind(f),f.setViewport(sn)}}(),renderSpotLightShadow:function(e,n,t,r,i){var o=this._getTexture(t),d=this._getSpotLightCamera(t),f=e.gl;this._frameBuffer.attach(o),this._frameBuffer.bind(e),f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT);var g=this._getDepthMaterial(t),_={getMaterial:function(k){return k.shadowDepthMaterial||g},isMaterialChanged:n6,getUniform:B3,ifRender:function(k){return k.castShadow},sortCompare:XC.opaqueSortCompare},C=n.updateRenderList(d);e.renderPass(C.opaque,d,_),this._frameBuffer.unbind(e),this.softShadow===td.VSM&&this._gaussianFilter(e,o,o.width);var S=new ir;S.copy(d.worldTransform).invert().multiplyLeft(d.projectionMatrix),i.push(o),r.push(S.array)},renderPointLightShadow:function(e,n,t,r){var i=this._getTexture(t),o=e.gl;r.push(i);var d=this._getDepthMaterial(t),f={getMaterial:function(Fe){return Fe.shadowDepthMaterial||d},getUniform:B3,sortCompare:XC.opaqueSortCompare},g={px:[],py:[],pz:[],nx:[],ny:[],nz:[]},_=new js,C=t.getWorldPosition().array,S=new js,k=t.range;S.min.setArray(C),S.max.setArray(C);var z=new Ln(k,k,k);S.max.add(z),S.min.sub(z);var te={px:!1,py:!1,pz:!1,nx:!1,ny:!1,nz:!1};n.traverse(function(Fe){if(Fe.isRenderable()&&Fe.castShadow){var Oe=Fe.geometry;if(!Oe.boundingBox){for(var Be=0;Be<Mf.length;Be++)g[Mf[Be]].push(Fe);return}if(_.transformFrom(Oe.boundingBox,Fe.worldTransform),!_.intersectBoundingBox(S))return;for(_.updateVertices(),Be=0;Be<Mf.length;Be++)te[Mf[Be]]=!1;for(Be=0;Be<8;Be++){var it=_.vertices[Be],at=it[0]-C[0],Ct=it[1]-C[1],mt=it[2]-C[2],Ft=Math.abs(at),nn=Math.abs(Ct),$t=Math.abs(mt);Ft>nn?Ft>$t?te[at>0?"px":"nx"]=!0:te[mt>0?"pz":"nz"]=!0:nn>$t?te[Ct>0?"py":"ny"]=!0:te[mt>0?"pz":"nz"]=!0}for(Be=0;Be<Mf.length;Be++)te[Mf[Be]]&&g[Mf[Be]].push(Fe)}});for(var pe=0;pe<6;pe++){var Me=Mf[pe],Re=this._getPointLightCamera(t,Me);this._frameBuffer.attach(i,o.COLOR_ATTACHMENT0,o.TEXTURE_CUBE_MAP_POSITIVE_X+pe),this._frameBuffer.bind(e),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),e.renderPass(g[Me],Re,f)}this._frameBuffer.unbind(e)},_getDepthMaterial:function(e){var n=this._lightMaterials[e.__uid__],t="POINT_LIGHT"===e.type;if(!n){var r=t?"clay.sm.distance.":"clay.sm.depth.";n=new Pc({precision:this.precision,shader:new Un(Un.source(r+"vertex"),Un.source(r+"fragment"))}),this._lightMaterials[e.__uid__]=n}return null!=e.shadowSlopeScale&&n.setUniform("slopeScale",e.shadowSlopeScale),null!=e.shadowBias&&n.setUniform("bias",e.shadowBias),this.softShadow===td.VSM?n.define("fragment","USE_VSM"):n.undefine("fragment","USE_VSM"),t&&(n.set("lightPosition",e.getWorldPosition().array),n.set("range",e.range)),n},_gaussianFilter:function(e,n,t){var i=this._texturePool.get({width:t,height:t,type:hr.FLOAT});this._frameBuffer.attach(i),this._frameBuffer.bind(e),this._gaussianPassH.setUniform("texture",n),this._gaussianPassH.setUniform("textureWidth",t),this._gaussianPassH.render(e),this._frameBuffer.attach(n),this._gaussianPassV.setUniform("texture",i),this._gaussianPassV.setUniform("textureHeight",t),this._gaussianPassV.render(e),this._frameBuffer.unbind(e),this._texturePool.put(i)},_getTexture:function(e,n){var t=e.__uid__,r=this._textures[t],i=e.shadowResolution||512;return n=n||1,r||((r="POINT_LIGHT"===e.type?new qC:new $r).width=i*n,r.height=i,this.softShadow===td.VSM?(r.type=hr.FLOAT,r.anisotropic=4):(r.minFilter=9728,r.magFilter=9728,r.useMipmap=!1),this._textures[t]=r),r},_getPointLightCamera:function(e,n){this._lightCameras.point||(this._lightCameras.point={px:new No,nx:new No,py:new No,ny:new No,pz:new No,nz:new No});var t=this._lightCameras.point[n];switch(t.far=e.range,t.fov=90,t.position.set(0,0,0),n){case"px":t.lookAt(Ln.POSITIVE_X,Ln.NEGATIVE_Y);break;case"nx":t.lookAt(Ln.NEGATIVE_X,Ln.NEGATIVE_Y);break;case"py":t.lookAt(Ln.POSITIVE_Y,Ln.POSITIVE_Z);break;case"ny":t.lookAt(Ln.NEGATIVE_Y,Ln.NEGATIVE_Z);break;case"pz":t.lookAt(Ln.POSITIVE_Z,Ln.NEGATIVE_Y);break;case"nz":t.lookAt(Ln.NEGATIVE_Z,Ln.NEGATIVE_Y)}return e.getWorldPosition(t.position),t.update(),t},_getDirectionalLightCamera:function(){var e=new ir,n=new js,t=new js;return function(r,i,o){this._lightCameras.directional||(this._lightCameras.directional=new Hy);var d=this._lightCameras.directional;n.copy(i.viewBoundingBoxLastFrame),n.intersection(o.frustum.boundingBox),d.position.copy(n.min).add(n.max).scale(.5).transformMat4(o.worldTransform),d.rotation.copy(r.rotation),d.scale.copy(r.scale),d.updateWorldTransform(),ir.invert(e,d.worldTransform),ir.multiply(e,e,o.worldTransform),t.copy(n).applyTransform(e);var f=t.min.array,g=t.max.array;return d.position.set((f[0]+g[0])/2,(f[1]+g[1])/2,g[2]).transformMat4(d.worldTransform),d.near=0,d.far=-f[2]+g[2],isNaN(this.lightFrustumBias)?d.far*=4:d.far+=this.lightFrustumBias,d.left=f[0],d.right=g[0],d.top=g[1],d.bottom=f[1],d.update(!0),d}}(),_getSpotLightCamera:function(e){this._lightCameras.spot||(this._lightCameras.spot=new No);var n=this._lightCameras.spot;return n.fov=2*e.penumbraAngle,n.far=e.range,n.worldTransform.copy(e.worldTransform),n.updateProjectionMatrix(),An.invert(n.viewMatrix.array,n.worldTransform.array),n},dispose:function(e){var n=e.gl||e;for(var t in this._frameBuffer&&this._frameBuffer.dispose(n),this._textures)this._textures[t].dispose(n);this._texturePool.clear(e.gl),this._depthMaterials={},this._distanceMaterials={},this._textures={},this._lightCameras={},this._shadowMapNumber={POINT_LIGHT:0,DIRECTIONAL_LIGHT:0,SPOT_LIGHT:0},this._meshMaterials={};for(var r=0;r<this._receivers.length;r++){var i=this._receivers[r];if(i.material){var o=i.material;o.undefine("fragment","POINT_LIGHT_SHADOW_COUNT"),o.undefine("fragment","DIRECTIONAL_LIGHT_SHADOW_COUNT"),o.undefine("fragment","AMBIENT_LIGHT_SHADOW_COUNT"),o.set("shadowEnabled",0)}}this._receivers=[],this._lightsCastShadow=[]}});td.VSM=1,td.PCF=2;const kre=td;var Nre=Gs.extend(function(){return{name:"",inputLinks:{},outputLinks:{},_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}},{updateParameter:function(e,n){var d,f,t=this.outputs[e],r=t.parameters,i=t._parametersCopy;if(i||(i=t._parametersCopy={}),r)for(var o in r)"width"!==o&&"height"!==o&&(i[o]=r[o]);return d=r.width instanceof Function?r.width.call(this,n):r.width,f=r.height instanceof Function?r.height.call(this,n):r.height,(i.width!==d||i.height!==f)&&this._outputTextures[e]&&this._outputTextures[e].dispose(n.gl),i.width=d,i.height=f,i},setParameter:function(e,n){},getParameter:function(e){},setParameters:function(e){for(var n in e)this.setParameter(n,e[n])},render:function(){},getOutput:function(e,n){if(null==n)return this._outputTextures[n=e];var t=this.outputs[n];return t?this._rendered?t.outputLastFrame?this._prevOutputTextures[n]:this._outputTextures[n]:this._rendering?(this._prevOutputTextures[n]||(this._prevOutputTextures[n]=this._compositor.allocateTexture(t.parameters||{})),this._prevOutputTextures[n]):(this.render(e),this._outputTextures[n]):void 0},removeReference:function(e){this._outputReferences[e]--,0===this._outputReferences[e]&&(this.outputs[e].keepLastFrame?(this._prevOutputTextures[e]&&this._compositor.releaseTexture(this._prevOutputTextures[e]),this._prevOutputTextures[e]=this._outputTextures[e]):this._compositor.releaseTexture(this._outputTextures[e]))},link:function(e,n,t){this.inputLinks[e]={node:n,pin:t},n.outputLinks[t]||(n.outputLinks[t]=[]),n.outputLinks[t].push({node:this,pin:e}),this.pass.material.enableTexture(e)},clear:function(){this.inputLinks={},this.outputLinks={}},updateReference:function(e){if(!this._rendering){for(var n in this._rendering=!0,this.inputLinks){var t=this.inputLinks[n];t.node.updateReference(t.pin)}this._rendering=!1}e&&this._outputReferences[e]++},beforeFrame:function(){for(var e in this._rendered=!1,this.outputLinks)this._outputReferences[e]=0},afterFrame:function(){for(var e in this.outputLinks)this._outputReferences[e]>0&&(this.outputs[e].keepLastFrame?(this._prevOutputTextures[e]&&this._compositor.releaseTexture(this._prevOutputTextures[e]),this._prevOutputTextures[e]=this._outputTextures[e]):this._compositor.releaseTexture(this._outputTextures[e]))}});const ow=Nre;var Fre=Gs.extend(function(){return{nodes:[]}},{dirty:function(){this._dirty=!0},addNode:function(e){this.nodes.indexOf(e)>=0||(this.nodes.push(e),this._dirty=!0)},removeNode:function(e){"string"==typeof e&&(e=this.getNodeByName(e));var n=this.nodes.indexOf(e);n>=0&&(this.nodes.splice(n,1),this._dirty=!0)},getNodeByName:function(e){for(var n=0;n<this.nodes.length;n++)if(this.nodes[n].name===e)return this.nodes[n]},update:function(){for(var e=0;e<this.nodes.length;e++)this.nodes[e].clear();for(e=0;e<this.nodes.length;e++){var n=this.nodes[e];if(n.inputs)for(var t in n.inputs)if(n.inputs[t]){if(n.pass&&!n.pass.material.isUniformEnabled(t)){console.warn("Pin "+n.name+"."+t+" not used.");continue}var r=n.inputs[t],i=this.findPin(r);i?n.link(t,i.node,i.pin):console.warn("string"==typeof r?"Node "+r+" not exist":"Pin of "+r.node+"."+r.pin+" not exist")}}},findPin:function(e){var n;if(("string"==typeof e||e instanceof ow)&&(e={node:e}),"string"==typeof e.node)for(var t=0;t<this.nodes.length;t++){var r=this.nodes[t];r.name===e.node&&(n=r)}else n=e.node;if(n){var i=e.pin;if(i||n.outputs&&(i=Object.keys(n.outputs)[0]),n.outputs[i])return{node:n,pin:i}}}});const r6=Fre;var Bre=r6.extend(function(){return{_outputs:[],_texturePool:new t6,_frameBuffer:new qo({depthBuffer:!1})}},{addNode:function(e){r6.prototype.addNode.call(this,e),e._compositor=this},render:function(e,n){if(this._dirty){this.update(),this._dirty=!1,this._outputs.length=0;for(var t=0;t<this.nodes.length;t++)this.nodes[t].outputs||this._outputs.push(this.nodes[t])}for(t=0;t<this.nodes.length;t++)this.nodes[t].beforeFrame();for(t=0;t<this._outputs.length;t++)this._outputs[t].updateReference();for(t=0;t<this._outputs.length;t++)this._outputs[t].render(e,n);for(t=0;t<this.nodes.length;t++)this.nodes[t].afterFrame()},allocateTexture:function(e){return this._texturePool.get(e)},releaseTexture:function(e){this._texturePool.put(e)},getFrameBuffer:function(){return this._frameBuffer},dispose:function(e){this._texturePool.clear(e)}});const Vre=Bre;var zre=ow.extend({name:"scene",scene:null,camera:null,autoUpdateScene:!0,preZ:!1},function(){this.frameBuffer=new qo},{render:function(e){this._rendering=!0;var t,n=e.gl;if(this.trigger("beforerender"),this.outputs){var r=this.frameBuffer;for(var i in this.outputs){var o=this.updateParameter(i,e),d=this.outputs[i],f=this._compositor.allocateTexture(o);this._outputTextures[i]=f,"string"==typeof(g=d.attachment||n.COLOR_ATTACHMENT0)&&(g=n[g]),r.attach(f,g)}r.bind(e);var _=e.getGLExtension("EXT_draw_buffers");if(_){var C=[];for(var g in this.outputs)(g=parseInt(g))>=n.COLOR_ATTACHMENT0&&g<=n.COLOR_ATTACHMENT0+8&&C.push(g);_.drawBuffersEXT(C)}e.saveClear(),e.clearBit=16640,t=e.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ),e.restoreClear(),r.unbind(e)}else t=e.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ);this.trigger("afterrender",t),this._rendering=!1,this._rendered=!0}});const Hre=zre,Gre=ow.extend(function(){return{texture:null,outputs:{color:{}}}},function(){},{getOutput:function(e,n){return this.texture},beforeFrame:function(){},afterFrame:function(){}});var Wre=ow.extend(function(){return{name:"",inputs:{},outputs:null,shader:"",inputLinks:{},outputLinks:{},pass:null,_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}},function(){var e=new so({fragment:this.shader});this.pass=e},{render:function(e,n){this.trigger("beforerender",e),this._rendering=!0;var t=e.gl;for(var r in this.inputLinks){var o=(i=this.inputLinks[r]).node.getOutput(e,i.pin);this.pass.setUniform(r,o)}if(this.outputs){this.pass.outputs={};var d={};for(var f in this.outputs){var g=this.updateParameter(f,e);isNaN(g.width)&&this.updateParameter(f,e);var _=this.outputs[f],C=this._compositor.allocateTexture(g);this._outputTextures[f]=C,"string"==typeof(S=_.attachment||t.COLOR_ATTACHMENT0)&&(S=t[S]),d[S]=C}for(var S in this._compositor.getFrameBuffer().bind(e),d)this._compositor.getFrameBuffer().attach(d[S],S);this.pass.render(e),this._compositor.getFrameBuffer().updateMipmap(e)}else this.pass.outputs=null,this._compositor.getFrameBuffer().unbind(e),this.pass.render(e,n);for(var r in this.inputLinks){var i;(i=this.inputLinks[r]).node.removeReference(i.pin)}this._rendering=!1,this._rendered=!0,this.trigger("afterrender",e)},updateParameter:function(e,n){var d,f,t=this.outputs[e],r=t.parameters,i=t._parametersCopy;if(i||(i=t._parametersCopy={}),r)for(var o in r)"width"!==o&&"height"!==o&&(i[o]=r[o]);return d="function"==typeof r.width?r.width.call(this,n):r.width,f="function"==typeof r.height?r.height.call(this,n):r.height,d=Math.ceil(d),f=Math.ceil(f),(i.width!==d||i.height!==f)&&this._outputTextures[e]&&this._outputTextures[e].dispose(n),i.width=d,i.height=f,i},setParameter:function(e,n){this.pass.setUniform(e,n)},getParameter:function(e){return this.pass.getUniform(e)},setParameters:function(e){for(var n in e)this.setParameter(n,e[n])},define:function(e,n){this.pass.material.define("fragment",e,n)},undefine:function(e){this.pass.material.undefine("fragment",e)},removeReference:function(e){this._outputReferences[e]--,0===this._outputReferences[e]&&(this.outputs[e].keepLastFrame?(this._prevOutputTextures[e]&&this._compositor.releaseTexture(this._prevOutputTextures[e]),this._prevOutputTextures[e]=this._outputTextures[e]):this._compositor.releaseTexture(this._outputTextures[e]))},clear:function(){ow.prototype.clear.call(this),this.pass.material.disableTexturesAll()}});const jre=Wre,a6="@export clay.compositor.kernel.gaussian_9\nfloat gaussianKernel[9];\ngaussianKernel[0] = 0.07;\ngaussianKernel[1] = 0.09;\ngaussianKernel[2] = 0.12;\ngaussianKernel[3] = 0.14;\ngaussianKernel[4] = 0.16;\ngaussianKernel[5] = 0.14;\ngaussianKernel[6] = 0.12;\ngaussianKernel[7] = 0.09;\ngaussianKernel[8] = 0.07;\n@end\n@export clay.compositor.kernel.gaussian_13\nfloat gaussianKernel[13];\ngaussianKernel[0] = 0.02;\ngaussianKernel[1] = 0.03;\ngaussianKernel[2] = 0.06;\ngaussianKernel[3] = 0.08;\ngaussianKernel[4] = 0.11;\ngaussianKernel[5] = 0.13;\ngaussianKernel[6] = 0.14;\ngaussianKernel[7] = 0.13;\ngaussianKernel[8] = 0.11;\ngaussianKernel[9] = 0.08;\ngaussianKernel[10] = 0.06;\ngaussianKernel[11] = 0.03;\ngaussianKernel[12] = 0.02;\n@end\n@export clay.compositor.gaussian_blur\n#define SHADER_NAME gaussian_blur\nuniform sampler2D texture;varying vec2 v_Texcoord;\nuniform float blurSize : 2.0;\nuniform vec2 textureSize : [512.0, 512.0];\nuniform float blurDir : 0.0;\n@import clay.util.rgbm\n@import clay.util.clamp_sample\nvoid main (void)\n{\n @import clay.compositor.kernel.gaussian_9\n vec2 off = blurSize / textureSize;\n off *= vec2(1.0 - blurDir, blurDir);\n vec4 sum = vec4(0.0);\n float weightAll = 0.0;\n for (int i = 0; i < 9; i++) {\n float w = gaussianKernel[i];\n vec4 texel = decodeHDR(clampSample(texture, v_Texcoord + float(i - 4) * off));\n sum += texel * w;\n weightAll += w;\n }\n gl_FragColor = encodeHDR(sum / max(weightAll, 0.01));\n}\n@end\n",o6="\n@export clay.compositor.lut\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform sampler2D lookup;\nvoid main()\n{\n vec4 tex = texture2D(texture, v_Texcoord);\n float blueColor = tex.b * 63.0;\n vec2 quad1;\n quad1.y = floor(floor(blueColor) / 8.0);\n quad1.x = floor(blueColor) - (quad1.y * 8.0);\n vec2 quad2;\n quad2.y = floor(ceil(blueColor) / 8.0);\n quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n vec2 texPos1;\n texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);\n texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);\n vec2 texPos2;\n texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);\n texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);\n vec4 newColor1 = texture2D(lookup, texPos1);\n vec4 newColor2 = texture2D(lookup, texPos2);\n vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n gl_FragColor = vec4(newColor.rgb, tex.w);\n}\n@end",s6="@export clay.compositor.output\n#define OUTPUT_ALPHA\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\n@import clay.util.rgbm\nvoid main()\n{\n vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));\n gl_FragColor.rgb = tex.rgb;\n#ifdef OUTPUT_ALPHA\n gl_FragColor.a = tex.a;\n#else\n gl_FragColor.a = 1.0;\n#endif\n gl_FragColor = encodeHDR(gl_FragColor);\n#ifdef PREMULTIPLY_ALPHA\n gl_FragColor.rgb *= gl_FragColor.a;\n#endif\n}\n@end",l6="@export clay.compositor.bright\nuniform sampler2D texture;\nuniform float threshold : 1;\nuniform float scale : 1.0;\nuniform vec2 textureSize: [512, 512];\nvarying vec2 v_Texcoord;\nconst vec3 lumWeight = vec3(0.2125, 0.7154, 0.0721);\n@import clay.util.rgbm\nvec4 median(vec4 a, vec4 b, vec4 c)\n{\n return a + b + c - min(min(a, b), c) - max(max(a, b), c);\n}\nvoid main()\n{\n vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));\n#ifdef ANTI_FLICKER\n vec3 d = 1.0 / textureSize.xyx * vec3(1.0, 1.0, 0.0);\n vec4 s1 = decodeHDR(texture2D(texture, v_Texcoord - d.xz));\n vec4 s2 = decodeHDR(texture2D(texture, v_Texcoord + d.xz));\n vec4 s3 = decodeHDR(texture2D(texture, v_Texcoord - d.zy));\n vec4 s4 = decodeHDR(texture2D(texture, v_Texcoord + d.zy));\n texel = median(median(texel, s1, s2), s3, s4);\n#endif\n float lum = dot(texel.rgb , lumWeight);\n vec4 color;\n if (lum > threshold && texel.a > 0.0)\n {\n color = vec4(texel.rgb * scale, texel.a * scale);\n }\n else\n {\n color = vec4(0.0);\n }\n gl_FragColor = encodeHDR(color);\n}\n@end\n",c6="@export clay.compositor.downsample\nuniform sampler2D texture;\nuniform vec2 textureSize : [512, 512];\nvarying vec2 v_Texcoord;\n@import clay.util.rgbm\nfloat brightness(vec3 c)\n{\n return max(max(c.r, c.g), c.b);\n}\n@import clay.util.clamp_sample\nvoid main()\n{\n vec4 d = vec4(-1.0, -1.0, 1.0, 1.0) / textureSize.xyxy;\n#ifdef ANTI_FLICKER\n vec3 s1 = decodeHDR(clampSample(texture, v_Texcoord + d.xy)).rgb;\n vec3 s2 = decodeHDR(clampSample(texture, v_Texcoord + d.zy)).rgb;\n vec3 s3 = decodeHDR(clampSample(texture, v_Texcoord + d.xw)).rgb;\n vec3 s4 = decodeHDR(clampSample(texture, v_Texcoord + d.zw)).rgb;\n float s1w = 1.0 / (brightness(s1) + 1.0);\n float s2w = 1.0 / (brightness(s2) + 1.0);\n float s3w = 1.0 / (brightness(s3) + 1.0);\n float s4w = 1.0 / (brightness(s4) + 1.0);\n float oneDivideSum = 1.0 / (s1w + s2w + s3w + s4w);\n vec4 color = vec4(\n (s1 * s1w + s2 * s2w + s3 * s3w + s4 * s4w) * oneDivideSum,\n 1.0\n );\n#else\n vec4 color = decodeHDR(clampSample(texture, v_Texcoord + d.xy));\n color += decodeHDR(clampSample(texture, v_Texcoord + d.zy));\n color += decodeHDR(clampSample(texture, v_Texcoord + d.xw));\n color += decodeHDR(clampSample(texture, v_Texcoord + d.zw));\n color *= 0.25;\n#endif\n gl_FragColor = encodeHDR(color);\n}\n@end",u6="\n@export clay.compositor.upsample\n#define HIGH_QUALITY\nuniform sampler2D texture;\nuniform vec2 textureSize : [512, 512];\nuniform float sampleScale: 0.5;\nvarying vec2 v_Texcoord;\n@import clay.util.rgbm\n@import clay.util.clamp_sample\nvoid main()\n{\n#ifdef HIGH_QUALITY\n vec4 d = vec4(1.0, 1.0, -1.0, 0.0) / textureSize.xyxy * sampleScale;\n vec4 s;\n s = decodeHDR(clampSample(texture, v_Texcoord - d.xy));\n s += decodeHDR(clampSample(texture, v_Texcoord - d.wy)) * 2.0;\n s += decodeHDR(clampSample(texture, v_Texcoord - d.zy));\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zw)) * 2.0;\n s += decodeHDR(clampSample(texture, v_Texcoord )) * 4.0;\n s += decodeHDR(clampSample(texture, v_Texcoord + d.xw)) * 2.0;\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));\n s += decodeHDR(clampSample(texture, v_Texcoord + d.wy)) * 2.0;\n s += decodeHDR(clampSample(texture, v_Texcoord + d.xy));\n gl_FragColor = encodeHDR(s / 16.0);\n#else\n vec4 d = vec4(-1.0, -1.0, +1.0, +1.0) / textureSize.xyxy;\n vec4 s;\n s = decodeHDR(clampSample(texture, v_Texcoord + d.xy));\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));\n s += decodeHDR(clampSample(texture, v_Texcoord + d.xw));\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zw));\n gl_FragColor = encodeHDR(s / 4.0);\n#endif\n}\n@end",d6="@export clay.compositor.hdr.composite\n#define TONEMAPPING\nuniform sampler2D texture;\n#ifdef BLOOM_ENABLED\nuniform sampler2D bloom;\n#endif\n#ifdef LENSFLARE_ENABLED\nuniform sampler2D lensflare;\nuniform sampler2D lensdirt;\n#endif\n#ifdef LUM_ENABLED\nuniform sampler2D lum;\n#endif\n#ifdef LUT_ENABLED\nuniform sampler2D lut;\n#endif\n#ifdef COLOR_CORRECTION\nuniform float brightness : 0.0;\nuniform float contrast : 1.0;\nuniform float saturation : 1.0;\n#endif\n#ifdef VIGNETTE\nuniform float vignetteDarkness: 1.0;\nuniform float vignetteOffset: 1.0;\n#endif\nuniform float exposure : 1.0;\nuniform float bloomIntensity : 0.25;\nuniform float lensflareIntensity : 1;\nvarying vec2 v_Texcoord;\n@import clay.util.srgb\nvec3 ACESToneMapping(vec3 color)\n{\n const float A = 2.51;\n const float B = 0.03;\n const float C = 2.43;\n const float D = 0.59;\n const float E = 0.14;\n return (color * (A * color + B)) / (color * (C * color + D) + E);\n}\nfloat eyeAdaption(float fLum)\n{\n return mix(0.2, fLum, 0.5);\n}\n#ifdef LUT_ENABLED\nvec3 lutTransform(vec3 color) {\n float blueColor = color.b * 63.0;\n vec2 quad1;\n quad1.y = floor(floor(blueColor) / 8.0);\n quad1.x = floor(blueColor) - (quad1.y * 8.0);\n vec2 quad2;\n quad2.y = floor(ceil(blueColor) / 8.0);\n quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n vec2 texPos1;\n texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);\n texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);\n vec2 texPos2;\n texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);\n texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);\n vec4 newColor1 = texture2D(lut, texPos1);\n vec4 newColor2 = texture2D(lut, texPos2);\n vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n return newColor.rgb;\n}\n#endif\n@import clay.util.rgbm\nvoid main()\n{\n vec4 texel = vec4(0.0);\n vec4 originalTexel = vec4(0.0);\n#ifdef TEXTURE_ENABLED\n texel = decodeHDR(texture2D(texture, v_Texcoord));\n originalTexel = texel;\n#endif\n#ifdef BLOOM_ENABLED\n vec4 bloomTexel = decodeHDR(texture2D(bloom, v_Texcoord));\n texel.rgb += bloomTexel.rgb * bloomIntensity;\n texel.a += bloomTexel.a * bloomIntensity;\n#endif\n#ifdef LENSFLARE_ENABLED\n texel += decodeHDR(texture2D(lensflare, v_Texcoord)) * texture2D(lensdirt, v_Texcoord) * lensflareIntensity;\n#endif\n texel.a = min(texel.a, 1.0);\n#ifdef LUM_ENABLED\n float fLum = texture2D(lum, vec2(0.5, 0.5)).r;\n float adaptedLumDest = 3.0 / (max(0.1, 1.0 + 10.0*eyeAdaption(fLum)));\n float exposureBias = adaptedLumDest * exposure;\n#else\n float exposureBias = exposure;\n#endif\n#ifdef TONEMAPPING\n texel.rgb *= exposureBias;\n texel.rgb = ACESToneMapping(texel.rgb);\n#endif\n texel = linearTosRGB(texel);\n#ifdef LUT_ENABLED\n texel.rgb = lutTransform(clamp(texel.rgb,vec3(0.0),vec3(1.0)));\n#endif\n#ifdef COLOR_CORRECTION\n texel.rgb = clamp(texel.rgb + vec3(brightness), 0.0, 1.0);\n texel.rgb = clamp((texel.rgb - vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);\n float lum = dot(texel.rgb, vec3(0.2125, 0.7154, 0.0721));\n texel.rgb = mix(vec3(lum), texel.rgb, saturation);\n#endif\n#ifdef VIGNETTE\n vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(vignetteOffset);\n texel.rgb = mix(texel.rgb, vec3(1.0 - vignetteDarkness), dot(uv, uv));\n#endif\n gl_FragColor = encodeHDR(texel);\n#ifdef DEBUG\n #if DEBUG == 1\n gl_FragColor = encodeHDR(decodeHDR(texture2D(texture, v_Texcoord)));\n #elif DEBUG == 2\n gl_FragColor = encodeHDR(decodeHDR(texture2D(bloom, v_Texcoord)) * bloomIntensity);\n #elif DEBUG == 3\n gl_FragColor = encodeHDR(decodeHDR(texture2D(lensflare, v_Texcoord) * lensflareIntensity));\n #endif\n#endif\n if (originalTexel.a <= 0.01 && gl_FragColor.a > 1e-5) {\n gl_FragColor.a = dot(gl_FragColor.rgb, vec3(0.2125, 0.7154, 0.0721));\n }\n#ifdef PREMULTIPLY_ALPHA\n gl_FragColor.rgb *= gl_FragColor.a;\n#endif\n}\n@end",h6="@export clay.compositor.blend\n#define SHADER_NAME blend\n#ifdef TEXTURE1_ENABLED\nuniform sampler2D texture1;\nuniform float weight1 : 1.0;\n#endif\n#ifdef TEXTURE2_ENABLED\nuniform sampler2D texture2;\nuniform float weight2 : 1.0;\n#endif\n#ifdef TEXTURE3_ENABLED\nuniform sampler2D texture3;\nuniform float weight3 : 1.0;\n#endif\n#ifdef TEXTURE4_ENABLED\nuniform sampler2D texture4;\nuniform float weight4 : 1.0;\n#endif\n#ifdef TEXTURE5_ENABLED\nuniform sampler2D texture5;\nuniform float weight5 : 1.0;\n#endif\n#ifdef TEXTURE6_ENABLED\nuniform sampler2D texture6;\nuniform float weight6 : 1.0;\n#endif\nvarying vec2 v_Texcoord;\n@import clay.util.rgbm\nvoid main()\n{\n vec4 tex = vec4(0.0);\n#ifdef TEXTURE1_ENABLED\n tex += decodeHDR(texture2D(texture1, v_Texcoord)) * weight1;\n#endif\n#ifdef TEXTURE2_ENABLED\n tex += decodeHDR(texture2D(texture2, v_Texcoord)) * weight2;\n#endif\n#ifdef TEXTURE3_ENABLED\n tex += decodeHDR(texture2D(texture3, v_Texcoord)) * weight3;\n#endif\n#ifdef TEXTURE4_ENABLED\n tex += decodeHDR(texture2D(texture4, v_Texcoord)) * weight4;\n#endif\n#ifdef TEXTURE5_ENABLED\n tex += decodeHDR(texture2D(texture5, v_Texcoord)) * weight5;\n#endif\n#ifdef TEXTURE6_ENABLED\n tex += decodeHDR(texture2D(texture6, v_Texcoord)) * weight6;\n#endif\n gl_FragColor = encodeHDR(tex);\n}\n@end",f6="@export clay.compositor.fxaa\nuniform sampler2D texture;\nuniform vec4 viewport : VIEWPORT;\nvarying vec2 v_Texcoord;\n#define FXAA_REDUCE_MIN (1.0/128.0)\n#define FXAA_REDUCE_MUL (1.0/8.0)\n#define FXAA_SPAN_MAX 8.0\n@import clay.util.rgbm\nvoid main()\n{\n vec2 resolution = 1.0 / viewport.zw;\n vec3 rgbNW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ) ).xyz;\n vec3 rgbNE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ) ).xyz;\n vec3 rgbSW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ) ).xyz;\n vec3 rgbSE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ) ).xyz;\n vec4 rgbaM = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution ) );\n vec3 rgbM = rgbaM.xyz;\n float opacity = rgbaM.w;\n vec3 luma = vec3( 0.299, 0.587, 0.114 );\n float lumaNW = dot( rgbNW, luma );\n float lumaNE = dot( rgbNE, luma );\n float lumaSW = dot( rgbSW, luma );\n float lumaSE = dot( rgbSE, luma );\n float lumaM = dot( rgbM, luma );\n float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );\n float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );\n vec2 dir;\n dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n dir.y = ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );\n float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );\n dir = min( vec2( FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n dir * rcpDirMin)) * resolution;\n vec3 rgbA = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 1.0 / 3.0 - 0.5 ) ) ).xyz;\n rgbA += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 2.0 / 3.0 - 0.5 ) ) ).xyz;\n rgbA *= 0.5;\n vec3 rgbB = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * -0.5 ) ).xyz;\n rgbB += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * 0.5 ) ).xyz;\n rgbB *= 0.25;\n rgbB += rgbA * 0.5;\n float lumaB = dot( rgbB, luma );\n if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) )\n {\n gl_FragColor = vec4( rgbA, opacity );\n }\n else {\n gl_FragColor = vec4( rgbB, opacity );\n }\n}\n@end";!function Kre(e){e.import("@export clay.compositor.coloradjust\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float brightness : 0.0;\nuniform float contrast : 1.0;\nuniform float exposure : 0.0;\nuniform float gamma : 1.0;\nuniform float saturation : 1.0;\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\nvoid main()\n{\n vec4 tex = texture2D( texture, v_Texcoord);\n vec3 color = clamp(tex.rgb + vec3(brightness), 0.0, 1.0);\n color = clamp( (color-vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);\n color = clamp( color * pow(2.0, exposure), 0.0, 1.0);\n color = clamp( pow(color, vec3(gamma)), 0.0, 1.0);\n float luminance = dot( color, w );\n color = mix(vec3(luminance), color, saturation);\n gl_FragColor = vec4(color, tex.a);\n}\n@end\n@export clay.compositor.brightness\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float brightness : 0.0;\nvoid main()\n{\n vec4 tex = texture2D( texture, v_Texcoord);\n vec3 color = tex.rgb + vec3(brightness);\n gl_FragColor = vec4(color, tex.a);\n}\n@end\n@export clay.compositor.contrast\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float contrast : 1.0;\nvoid main()\n{\n vec4 tex = texture2D( texture, v_Texcoord);\n vec3 color = (tex.rgb-vec3(0.5))*contrast+vec3(0.5);\n gl_FragColor = vec4(color, tex.a);\n}\n@end\n@export clay.compositor.exposure\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float exposure : 0.0;\nvoid main()\n{\n vec4 tex = texture2D(texture, v_Texcoord);\n vec3 color = tex.rgb * pow(2.0, exposure);\n gl_FragColor = vec4(color, tex.a);\n}\n@end\n@export clay.compositor.gamma\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float gamma : 1.0;\nvoid main()\n{\n vec4 tex = texture2D(texture, v_Texcoord);\n vec3 color = pow(tex.rgb, vec3(gamma));\n gl_FragColor = vec4(color, tex.a);\n}\n@end\n@export clay.compositor.saturation\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float saturation : 1.0;\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\nvoid main()\n{\n vec4 tex = texture2D(texture, v_Texcoord);\n vec3 color = tex.rgb;\n float luminance = dot(color, w);\n color = mix(vec3(luminance), color, saturation);\n gl_FragColor = vec4(color, tex.a);\n}\n@end"),e.import(a6),e.import("@export clay.compositor.hdr.log_lum\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\n@import clay.util.rgbm\nvoid main()\n{\n vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));\n float luminance = dot(tex.rgb, w);\n luminance = log(luminance + 0.001);\n gl_FragColor = encodeHDR(vec4(vec3(luminance), 1.0));\n}\n@end\n@export clay.compositor.hdr.lum_adaption\nvarying vec2 v_Texcoord;\nuniform sampler2D adaptedLum;\nuniform sampler2D currentLum;\nuniform float frameTime : 0.02;\n@import clay.util.rgbm\nvoid main()\n{\n float fAdaptedLum = decodeHDR(texture2D(adaptedLum, vec2(0.5, 0.5))).r;\n float fCurrentLum = exp(encodeHDR(texture2D(currentLum, vec2(0.5, 0.5))).r);\n fAdaptedLum += (fCurrentLum - fAdaptedLum) * (1.0 - pow(0.98, 30.0 * frameTime));\n gl_FragColor = encodeHDR(vec4(vec3(fAdaptedLum), 1.0));\n}\n@end\n@export clay.compositor.lum\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\nvoid main()\n{\n vec4 tex = texture2D( texture, v_Texcoord );\n float luminance = dot(tex.rgb, w);\n gl_FragColor = vec4(vec3(luminance), 1.0);\n}\n@end"),e.import(o6),e.import("@export clay.compositor.vignette\n#define OUTPUT_ALPHA\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float darkness: 1;\nuniform float offset: 1;\n@import clay.util.rgbm\nvoid main()\n{\n vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));\n gl_FragColor.rgb = texel.rgb;\n vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(offset);\n gl_FragColor = encodeHDR(vec4(mix(texel.rgb, vec3(1.0 - darkness), dot(uv, uv)), texel.a));\n}\n@end"),e.import(s6),e.import(l6),e.import(c6),e.import(u6),e.import(d6),e.import("@export clay.compositor.lensflare\n#define SAMPLE_NUMBER 8\nuniform sampler2D texture;\nuniform sampler2D lenscolor;\nuniform vec2 textureSize : [512, 512];\nuniform float dispersal : 0.3;\nuniform float haloWidth : 0.4;\nuniform float distortion : 1.0;\nvarying vec2 v_Texcoord;\n@import clay.util.rgbm\nvec4 textureDistorted(\n in vec2 texcoord,\n in vec2 direction,\n in vec3 distortion\n) {\n return vec4(\n decodeHDR(texture2D(texture, texcoord + direction * distortion.r)).r,\n decodeHDR(texture2D(texture, texcoord + direction * distortion.g)).g,\n decodeHDR(texture2D(texture, texcoord + direction * distortion.b)).b,\n 1.0\n );\n}\nvoid main()\n{\n vec2 texcoord = -v_Texcoord + vec2(1.0); vec2 textureOffset = 1.0 / textureSize;\n vec2 ghostVec = (vec2(0.5) - texcoord) * dispersal;\n vec2 haloVec = normalize(ghostVec) * haloWidth;\n vec3 distortion = vec3(-textureOffset.x * distortion, 0.0, textureOffset.x * distortion);\n vec4 result = vec4(0.0);\n for (int i = 0; i < SAMPLE_NUMBER; i++)\n {\n vec2 offset = fract(texcoord + ghostVec * float(i));\n float weight = length(vec2(0.5) - offset) / length(vec2(0.5));\n weight = pow(1.0 - weight, 10.0);\n result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;\n }\n result *= texture2D(lenscolor, vec2(length(vec2(0.5) - texcoord)) / length(vec2(0.5)));\n float weight = length(vec2(0.5) - fract(texcoord + haloVec)) / length(vec2(0.5));\n weight = pow(1.0 - weight, 10.0);\n vec2 offset = fract(texcoord + haloVec);\n result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;\n gl_FragColor = result;\n}\n@end"),e.import(h6),e.import(f6)}(Un);var Qre=/^#source\((.*?)\)/;function Jre(e,n,t){var i,o,d,S,r=e.type||"filter";if("filter"===r){var f=e.shader.trim(),g=Qre.exec(f);if(g?i=Un.source(g[1].trim()):"#"===f.charAt(0)&&(i=n.shaders[f.substr(1)]),i||(i=f),!i)return}if(e.inputs)for(var _ in o={},e.inputs)o[_]="string"==typeof e.inputs[_]?e.inputs[_]:{node:e.inputs[_].node,pin:e.inputs[_].pin};if(e.outputs)for(var _ in d={},e.outputs){var C=e.outputs[_];d[_]={},null!=C.attachment&&(d[_].attachment=C.attachment),null!=C.keepLastFrame&&(d[_].keepLastFrame=C.keepLastFrame),null!=C.outputLastFrame&&(d[_].outputLastFrame=C.outputLastFrame),C.parameters&&(d[_].parameters=V3(C.parameters))}if(S="scene"===r?new Hre({name:e.name,scene:t.scene,camera:t.camera,outputs:d}):"texture"===r?new Gre({name:e.name,outputs:d}):new jre({name:e.name,shader:i,inputs:o,outputs:d})){if(e.parameters)for(var _ in e.parameters)"string"==typeof(k=e.parameters[_])?"#"===(k=k.trim()).charAt(0)?k=n.textures[k.substr(1)]:S.on("beforerender",rie(_,p6(k))):"function"==typeof k&&S.on("beforerender",k),S.setParameter(_,k);if(e.defines&&S.pass)for(var _ in e.defines){var k;S.pass.material.define("fragment",_,k=e.defines[_])}}return S}function eie(e,n){return e}function tie(e,n){return n}function V3(e){var n={};if(!e)return n;["type","minFilter","magFilter","wrapS","wrapT","flipY","useMipmap"].forEach(function(r){var i=e[r];null!=i&&("string"==typeof i&&(i=hr[i]),n[r]=i)});var t=e.scale||1;return["width","height"].forEach(function(r){if(null!=e[r]){var i=e[r];"string"==typeof i?(i=i.trim(),n[r]=function iie(e,n,t){return t=t||1,function(r){var i=r.getDevicePixelRatio(),o=r.getWidth()*t,d=r.getHeight()*t;return n(o,d,i)}}(0,p6(i),t)):n[r]=i}}),n.width||(n.width=eie),n.height||(n.height=tie),null!=e.useMipmap&&(n.useMipmap=e.useMipmap),n}function rie(e,n){return function(t){var r=t.getDevicePixelRatio(),i=t.getWidth(),o=t.getHeight(),d=n(i,o,r);this.setParameter(e,d)}}function p6(e){var n=/^expr\((.*)\)$/.exec(e);if(n)try{var t=new Function("width","height","dpr","return "+n[1]);return t(1,1),t}catch{throw new Error("Invalid expression.")}}const jy=function oie(e,n){for(var t=0,r=1/n,i=e;i>0;)t+=r*(i%n),i=Math.floor(i/n),r/=n;return t};function g6(e){for(var n=new Uint8Array(e*e*4),t=0,r=new Ln,i=0;i<e;i++)for(var o=0;o<e;o++)r.set(2*Math.random()-1,2*Math.random()-1,0).normalize(),n[t++]=255*(.5*r.x+.5),n[t++]=255*(.5*r.y+.5),n[t++]=0,n[t++]=255;return n}function v6(e){return new $r({pixels:g6(e),wrapS:hr.REPEAT,wrapT:hr.REPEAT,width:e,height:e})}function lie(e,n,t){var r=new Float32Array(3*e);n=n||0;for(var i=0;i<e;i++){var o=jy(i+n,2)*(t?1:2)*Math.PI,d=jy(i+n,3)*Math.PI,f=Math.random(),g=Math.cos(o)*Math.sin(d)*f,_=Math.cos(d)*f,C=Math.sin(o)*Math.sin(d)*f;r[3*i]=g,r[3*i+1]=_,r[3*i+2]=C}return r}function lh(e){e=e||{},this._ssaoPass=new so({fragment:Un.source("ecgl.ssao.estimate")}),this._blurPass=new so({fragment:Un.source("ecgl.ssao.blur")}),this._framebuffer=new qo({depthBuffer:!1}),this._ssaoTexture=new $r,this._blurTexture=new $r,this._blurTexture2=new $r,this._depthTex=e.depthTexture,this._normalTex=e.normalTexture,this.setNoiseSize(4),this.setKernelSize(e.kernelSize||12),null!=e.radius&&this.setParameter("radius",e.radius),null!=e.power&&this.setParameter("power",e.power),this._normalTex||(this._ssaoPass.material.disableTexture("normalTex"),this._blurPass.material.disableTexture("normalTex")),this._depthTex||this._blurPass.material.disableTexture("depthTex"),this._blurPass.material.setUniform("normalTex",this._normalTex),this._blurPass.material.setUniform("depthTex",this._depthTex)}Un.import("@export ecgl.ssao.estimate\n\nuniform sampler2D depthTex;\n\nuniform sampler2D normalTex;\n\nuniform sampler2D noiseTex;\n\nuniform vec2 depthTexSize;\n\nuniform vec2 noiseTexSize;\n\nuniform mat4 projection;\n\nuniform mat4 projectionInv;\n\nuniform mat4 viewInverseTranspose;\n\nuniform vec3 kernel[KERNEL_SIZE];\n\nuniform float radius : 1;\n\nuniform float power : 1;\n\nuniform float bias: 1e-2;\n\nuniform float intensity: 1.0;\n\nvarying vec2 v_Texcoord;\n\nfloat ssaoEstimator(in vec3 originPos, in mat3 kernelBasis) {\n float occlusion = 0.0;\n\n for (int i = 0; i < KERNEL_SIZE; i++) {\n vec3 samplePos = kernel[i];\n#ifdef NORMALTEX_ENABLED\n samplePos = kernelBasis * samplePos;\n#endif\n samplePos = samplePos * radius + originPos;\n\n vec4 texCoord = projection * vec4(samplePos, 1.0);\n texCoord.xy /= texCoord.w;\n\n vec4 depthTexel = texture2D(depthTex, texCoord.xy * 0.5 + 0.5);\n\n float sampleDepth = depthTexel.r * 2.0 - 1.0;\n if (projection[3][3] == 0.0) {\n sampleDepth = projection[3][2] / (sampleDepth * projection[2][3] - projection[2][2]);\n }\n else {\n sampleDepth = (sampleDepth - projection[3][2]) / projection[2][2];\n }\n \n float rangeCheck = smoothstep(0.0, 1.0, radius / abs(originPos.z - sampleDepth));\n occlusion += rangeCheck * step(samplePos.z, sampleDepth - bias);\n }\n#ifdef NORMALTEX_ENABLED\n occlusion = 1.0 - occlusion / float(KERNEL_SIZE);\n#else\n occlusion = 1.0 - clamp((occlusion / float(KERNEL_SIZE) - 0.6) * 2.5, 0.0, 1.0);\n#endif\n return pow(occlusion, power);\n}\n\nvoid main()\n{\n\n vec4 depthTexel = texture2D(depthTex, v_Texcoord);\n\n#ifdef NORMALTEX_ENABLED\n vec4 tex = texture2D(normalTex, v_Texcoord);\n if (dot(tex.rgb, tex.rgb) == 0.0) {\n gl_FragColor = vec4(1.0);\n return;\n }\n vec3 N = tex.rgb * 2.0 - 1.0;\n N = (viewInverseTranspose * vec4(N, 0.0)).xyz;\n\n vec2 noiseTexCoord = depthTexSize / vec2(noiseTexSize) * v_Texcoord;\n vec3 rvec = texture2D(noiseTex, noiseTexCoord).rgb * 2.0 - 1.0;\n vec3 T = normalize(rvec - N * dot(rvec, N));\n vec3 BT = normalize(cross(N, T));\n mat3 kernelBasis = mat3(T, BT, N);\n#else\n if (depthTexel.r > 0.99999) {\n gl_FragColor = vec4(1.0);\n return;\n }\n mat3 kernelBasis;\n#endif\n\n float z = depthTexel.r * 2.0 - 1.0;\n\n vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, z, 1.0);\n vec4 p4 = projectionInv * projectedPos;\n\n vec3 position = p4.xyz / p4.w;\n\n float ao = ssaoEstimator(position, kernelBasis);\n ao = clamp(1.0 - (1.0 - ao) * intensity, 0.0, 1.0);\n gl_FragColor = vec4(vec3(ao), 1.0);\n}\n\n@end\n\n\n@export ecgl.ssao.blur\n#define SHADER_NAME SSAO_BLUR\n\nuniform sampler2D ssaoTexture;\n\n#ifdef NORMALTEX_ENABLED\nuniform sampler2D normalTex;\n#endif\n\nvarying vec2 v_Texcoord;\n\nuniform vec2 textureSize;\nuniform float blurSize : 1.0;\n\nuniform int direction: 0.0;\n\n#ifdef DEPTHTEX_ENABLED\nuniform sampler2D depthTex;\nuniform mat4 projection;\nuniform float depthRange : 0.5;\n\nfloat getLinearDepth(vec2 coord)\n{\n float depth = texture2D(depthTex, coord).r * 2.0 - 1.0;\n return projection[3][2] / (depth * projection[2][3] - projection[2][2]);\n}\n#endif\n\nvoid main()\n{\n float kernel[5];\n kernel[0] = 0.122581;\n kernel[1] = 0.233062;\n kernel[2] = 0.288713;\n kernel[3] = 0.233062;\n kernel[4] = 0.122581;\n\n vec2 off = vec2(0.0);\n if (direction == 0) {\n off[0] = blurSize / textureSize.x;\n }\n else {\n off[1] = blurSize / textureSize.y;\n }\n\n vec2 coord = v_Texcoord;\n\n float sum = 0.0;\n float weightAll = 0.0;\n\n#ifdef NORMALTEX_ENABLED\n vec3 centerNormal = texture2D(normalTex, v_Texcoord).rgb * 2.0 - 1.0;\n#endif\n#if defined(DEPTHTEX_ENABLED)\n float centerDepth = getLinearDepth(v_Texcoord);\n#endif\n\n for (int i = 0; i < 5; i++) {\n vec2 coord = clamp(v_Texcoord + vec2(float(i) - 2.0) * off, vec2(0.0), vec2(1.0));\n\n float w = kernel[i];\n#ifdef NORMALTEX_ENABLED\n vec3 normal = texture2D(normalTex, coord).rgb * 2.0 - 1.0;\n w *= clamp(dot(normal, centerNormal), 0.0, 1.0);\n#endif\n#ifdef DEPTHTEX_ENABLED\n float d = getLinearDepth(coord);\n w *= (1.0 - smoothstep(abs(centerDepth - d) / depthRange, 0.0, 1.0));\n#endif\n\n weightAll += w;\n sum += texture2D(ssaoTexture, coord).r * w;\n }\n\n gl_FragColor = vec4(vec3(sum / weightAll), 1.0);\n}\n\n@end\n"),lh.prototype.setDepthTexture=function(e){this._depthTex=e},lh.prototype.setNormalTexture=function(e){this._normalTex=e,this._ssaoPass.material[e?"enableTexture":"disableTexture"]("normalTex"),this.setKernelSize(this._kernelSize)},lh.prototype.update=function(e,n,t){var r=e.getWidth(),i=e.getHeight(),o=this._ssaoPass,d=this._blurPass;o.setUniform("kernel",this._kernels[t%this._kernels.length]),o.setUniform("depthTex",this._depthTex),null!=this._normalTex&&o.setUniform("normalTex",this._normalTex),o.setUniform("depthTexSize",[this._depthTex.width,this._depthTex.height]);var f=new ir;ir.transpose(f,n.worldTransform),o.setUniform("projection",n.projectionMatrix.array),o.setUniform("projectionInv",n.invProjectionMatrix.array),o.setUniform("viewInverseTranspose",f.array);var g=this._ssaoTexture,_=this._blurTexture,C=this._blurTexture2;g.width=r/2,g.height=i/2,_.width=r,_.height=i,C.width=r,C.height=i,this._framebuffer.attach(g),this._framebuffer.bind(e),e.gl.clearColor(1,1,1,1),e.gl.clear(e.gl.COLOR_BUFFER_BIT),o.render(e),d.setUniform("textureSize",[r/2,i/2]),d.setUniform("projection",n.projectionMatrix.array),this._framebuffer.attach(_),d.setUniform("direction",0),d.setUniform("ssaoTexture",g),d.render(e),this._framebuffer.attach(C),d.setUniform("textureSize",[r,i]),d.setUniform("direction",1),d.setUniform("ssaoTexture",_),d.render(e),this._framebuffer.unbind(e);var S=e.clearColor;e.gl.clearColor(S[0],S[1],S[2],S[3])},lh.prototype.getTargetTexture=function(){return this._blurTexture2},lh.prototype.setParameter=function(e,n){"noiseTexSize"===e?this.setNoiseSize(n):"kernelSize"===e?this.setKernelSize(n):"intensity"===e?this._ssaoPass.material.set("intensity",n):this._ssaoPass.setUniform(e,n)},lh.prototype.setKernelSize=function(e){this._kernelSize=e,this._ssaoPass.material.define("fragment","KERNEL_SIZE",e),this._kernels=this._kernels||[];for(var n=0;n<30;n++)this._kernels[n]=lie(e,n*e,!!this._normalTex)},lh.prototype.setNoiseSize=function(e){var n=this._ssaoPass.getUniform("noiseTex");n?(n.data=g6(e),n.width=n.height=e,n.dirty()):(n=v6(e),this._ssaoPass.setUniform("noiseTex",v6(e))),this._ssaoPass.setUniform("noiseTexSize",[e,e])},lh.prototype.dispose=function(e){this._blurTexture.dispose(e),this._ssaoTexture.dispose(e),this._blurTexture2.dispose(e)};const cie=lh;function ch(e){e=e||{},this._ssrPass=new so({fragment:Un.source("ecgl.ssr.main"),clearColor:[0,0,0,0]}),this._blurPass1=new so({fragment:Un.source("ecgl.ssr.blur"),clearColor:[0,0,0,0]}),this._blurPass2=new so({fragment:Un.source("ecgl.ssr.blur"),clearColor:[0,0,0,0]}),this._blendPass=new so({fragment:Un.source("clay.compositor.blend")}),this._blendPass.material.disableTexturesAll(),this._blendPass.material.enableTexture(["texture1","texture2"]),this._ssrPass.setUniform("gBufferTexture1",e.normalTexture),this._ssrPass.setUniform("gBufferTexture2",e.depthTexture),this._blurPass1.setUniform("gBufferTexture1",e.normalTexture),this._blurPass1.setUniform("gBufferTexture2",e.depthTexture),this._blurPass2.setUniform("gBufferTexture1",e.normalTexture),this._blurPass2.setUniform("gBufferTexture2",e.depthTexture),this._blurPass2.material.define("fragment","VERTICAL"),this._blurPass2.material.define("fragment","BLEND"),this._ssrTexture=new $r({type:hr.HALF_FLOAT}),this._texture2=new $r({type:hr.HALF_FLOAT}),this._texture3=new $r({type:hr.HALF_FLOAT}),this._prevTexture=new $r({type:hr.HALF_FLOAT}),this._currentTexture=new $r({type:hr.HALF_FLOAT}),this._frameBuffer=new qo({depthBuffer:!1}),this._normalDistribution=null,this._totalSamples=256,this._samplePerFrame=4,this._ssrPass.material.define("fragment","SAMPLE_PER_FRAME",this._samplePerFrame),this._ssrPass.material.define("fragment","TOTAL_SAMPLES",this._totalSamples),this._downScale=1}Un.import("@export ecgl.ssr.main\n\n#define SHADER_NAME SSR\n#define MAX_ITERATION 20;\n#define SAMPLE_PER_FRAME 5;\n#define TOTAL_SAMPLES 128;\n\nuniform sampler2D sourceTexture;\nuniform sampler2D gBufferTexture1;\nuniform sampler2D gBufferTexture2;\nuniform sampler2D gBufferTexture3;\nuniform samplerCube specularCubemap;\nuniform float specularIntensity: 1;\n\nuniform mat4 projection;\nuniform mat4 projectionInv;\nuniform mat4 toViewSpace;\nuniform mat4 toWorldSpace;\n\nuniform float maxRayDistance: 200;\n\nuniform float pixelStride: 16;\nuniform float pixelStrideZCutoff: 50; \nuniform float screenEdgeFadeStart: 0.9; \nuniform float eyeFadeStart : 0.2; uniform float eyeFadeEnd: 0.8; \nuniform float minGlossiness: 0.2; uniform float zThicknessThreshold: 1;\n\nuniform float nearZ;\nuniform vec2 viewportSize : VIEWPORT_SIZE;\n\nuniform float jitterOffset: 0;\n\nvarying vec2 v_Texcoord;\n\n#ifdef DEPTH_DECODE\n@import clay.util.decode_float\n#endif\n\n#ifdef PHYSICALLY_CORRECT\nuniform sampler2D normalDistribution;\nuniform float sampleOffset: 0;\nuniform vec2 normalDistributionSize;\n\nvec3 transformNormal(vec3 H, vec3 N) {\n vec3 upVector = N.y > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);\n vec3 tangentX = normalize(cross(N, upVector));\n vec3 tangentZ = cross(N, tangentX);\n return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);\n}\nvec3 importanceSampleNormalGGX(float i, float roughness, vec3 N) {\n float p = fract((i + sampleOffset) / float(TOTAL_SAMPLES));\n vec3 H = texture2D(normalDistribution,vec2(roughness, p)).rgb;\n return transformNormal(H, N);\n}\nfloat G_Smith(float g, float ndv, float ndl) {\n float roughness = 1.0 - g;\n float k = roughness * roughness / 2.0;\n float G1V = ndv / (ndv * (1.0 - k) + k);\n float G1L = ndl / (ndl * (1.0 - k) + k);\n return G1L * G1V;\n}\nvec3 F_Schlick(float ndv, vec3 spec) {\n return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);\n}\n#endif\n\nfloat fetchDepth(sampler2D depthTexture, vec2 uv)\n{\n vec4 depthTexel = texture2D(depthTexture, uv);\n return depthTexel.r * 2.0 - 1.0;\n}\n\nfloat linearDepth(float depth)\n{\n if (projection[3][3] == 0.0) {\n return projection[3][2] / (depth * projection[2][3] - projection[2][2]);\n }\n else {\n return (depth - projection[3][2]) / projection[2][2];\n }\n}\n\nbool rayIntersectDepth(float rayZNear, float rayZFar, vec2 hitPixel)\n{\n if (rayZFar > rayZNear)\n {\n float t = rayZFar; rayZFar = rayZNear; rayZNear = t;\n }\n float cameraZ = linearDepth(fetchDepth(gBufferTexture2, hitPixel));\n return rayZFar <= cameraZ && rayZNear >= cameraZ - zThicknessThreshold;\n}\n\n\nbool traceScreenSpaceRay(\n vec3 rayOrigin, vec3 rayDir, float jitter,\n out vec2 hitPixel, out vec3 hitPoint, out float iterationCount\n)\n{\n float rayLength = ((rayOrigin.z + rayDir.z * maxRayDistance) > -nearZ)\n ? (-nearZ - rayOrigin.z) / rayDir.z : maxRayDistance;\n\n vec3 rayEnd = rayOrigin + rayDir * rayLength;\n\n vec4 H0 = projection * vec4(rayOrigin, 1.0);\n vec4 H1 = projection * vec4(rayEnd, 1.0);\n\n float k0 = 1.0 / H0.w, k1 = 1.0 / H1.w;\n\n vec3 Q0 = rayOrigin * k0, Q1 = rayEnd * k1;\n\n vec2 P0 = (H0.xy * k0 * 0.5 + 0.5) * viewportSize;\n vec2 P1 = (H1.xy * k1 * 0.5 + 0.5) * viewportSize;\n\n P1 += dot(P1 - P0, P1 - P0) < 0.0001 ? 0.01 : 0.0;\n vec2 delta = P1 - P0;\n\n bool permute = false;\n if (abs(delta.x) < abs(delta.y)) {\n permute = true;\n delta = delta.yx;\n P0 = P0.yx;\n P1 = P1.yx;\n }\n float stepDir = sign(delta.x);\n float invdx = stepDir / delta.x;\n\n vec3 dQ = (Q1 - Q0) * invdx;\n float dk = (k1 - k0) * invdx;\n\n vec2 dP = vec2(stepDir, delta.y * invdx);\n\n float strideScaler = 1.0 - min(1.0, -rayOrigin.z / pixelStrideZCutoff);\n float pixStride = 1.0 + strideScaler * pixelStride;\n\n dP *= pixStride; dQ *= pixStride; dk *= pixStride;\n\n vec4 pqk = vec4(P0, Q0.z, k0);\n vec4 dPQK = vec4(dP, dQ.z, dk);\n\n pqk += dPQK * jitter;\n float rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);\n float rayZNear;\n\n bool intersect = false;\n\n vec2 texelSize = 1.0 / viewportSize;\n\n iterationCount = 0.0;\n\n for (int i = 0; i < MAX_ITERATION; i++)\n {\n pqk += dPQK;\n\n rayZNear = rayZFar;\n rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);\n\n hitPixel = permute ? pqk.yx : pqk.xy;\n hitPixel *= texelSize;\n\n intersect = rayIntersectDepth(rayZNear, rayZFar, hitPixel);\n\n iterationCount += 1.0;\n\n dPQK *= 1.2;\n\n if (intersect) {\n break;\n }\n }\n\n Q0.xy += dQ.xy * iterationCount;\n Q0.z = pqk.z;\n hitPoint = Q0 / pqk.w;\n\n return intersect;\n}\n\nfloat calculateAlpha(\n float iterationCount, float reflectivity,\n vec2 hitPixel, vec3 hitPoint, float dist, vec3 rayDir\n)\n{\n float alpha = clamp(reflectivity, 0.0, 1.0);\n alpha *= 1.0 - (iterationCount / float(MAX_ITERATION));\n vec2 hitPixelNDC = hitPixel * 2.0 - 1.0;\n float maxDimension = min(1.0, max(abs(hitPixelNDC.x), abs(hitPixelNDC.y)));\n alpha *= 1.0 - max(0.0, maxDimension - screenEdgeFadeStart) / (1.0 - screenEdgeFadeStart);\n\n float _eyeFadeStart = eyeFadeStart;\n float _eyeFadeEnd = eyeFadeEnd;\n if (_eyeFadeStart > _eyeFadeEnd) {\n float tmp = _eyeFadeEnd;\n _eyeFadeEnd = _eyeFadeStart;\n _eyeFadeStart = tmp;\n }\n\n float eyeDir = clamp(rayDir.z, _eyeFadeStart, _eyeFadeEnd);\n alpha *= 1.0 - (eyeDir - _eyeFadeStart) / (_eyeFadeEnd - _eyeFadeStart);\n\n alpha *= 1.0 - clamp(dist / maxRayDistance, 0.0, 1.0);\n\n return alpha;\n}\n\n@import clay.util.rand\n\n@import clay.util.rgbm\n\nvoid main()\n{\n vec4 normalAndGloss = texture2D(gBufferTexture1, v_Texcoord);\n\n if (dot(normalAndGloss.rgb, vec3(1.0)) == 0.0) {\n discard;\n }\n\n float g = normalAndGloss.a;\n#if !defined(PHYSICALLY_CORRECT)\n if (g <= minGlossiness) {\n discard;\n }\n#endif\n\n float reflectivity = (g - minGlossiness) / (1.0 - minGlossiness);\n\n vec3 N = normalize(normalAndGloss.rgb * 2.0 - 1.0);\n N = normalize((toViewSpace * vec4(N, 0.0)).xyz);\n\n vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, fetchDepth(gBufferTexture2, v_Texcoord), 1.0);\n vec4 pos = projectionInv * projectedPos;\n vec3 rayOrigin = pos.xyz / pos.w;\n vec3 V = -normalize(rayOrigin);\n\n float ndv = clamp(dot(N, V), 0.0, 1.0);\n float iterationCount;\n float jitter = rand(fract(v_Texcoord + jitterOffset));\n\n#ifdef PHYSICALLY_CORRECT\n vec4 color = vec4(vec3(0.0), 1.0);\n vec4 albedoMetalness = texture2D(gBufferTexture3, v_Texcoord);\n vec3 albedo = albedoMetalness.rgb;\n float m = albedoMetalness.a;\n vec3 diffuseColor = albedo * (1.0 - m);\n vec3 spec = mix(vec3(0.04), albedo, m);\n\n float jitter2 = rand(fract(v_Texcoord)) * float(TOTAL_SAMPLES);\n\n for (int i = 0; i < SAMPLE_PER_FRAME; i++) {\n vec3 H = importanceSampleNormalGGX(float(i) + jitter2, 1.0 - g, N);\n vec3 rayDir = normalize(reflect(-V, H));\n#else\n vec3 rayDir = normalize(reflect(-V, N));\n#endif\n vec2 hitPixel;\n vec3 hitPoint;\n\n bool intersect = traceScreenSpaceRay(rayOrigin, rayDir, jitter, hitPixel, hitPoint, iterationCount);\n\n float dist = distance(rayOrigin, hitPoint);\n\n vec3 hitNormal = texture2D(gBufferTexture1, hitPixel).rgb * 2.0 - 1.0;\n hitNormal = normalize((toViewSpace * vec4(hitNormal, 0.0)).xyz);\n#ifdef PHYSICALLY_CORRECT\n float ndl = clamp(dot(N, rayDir), 0.0, 1.0);\n float vdh = clamp(dot(V, H), 0.0, 1.0);\n float ndh = clamp(dot(N, H), 0.0, 1.0);\n vec3 litTexel = vec3(0.0);\n if (dot(hitNormal, rayDir) < 0.0 && intersect) {\n litTexel = texture2D(sourceTexture, hitPixel).rgb;\n litTexel *= pow(clamp(1.0 - dist / 200.0, 0.0, 1.0), 3.0);\n\n }\n else {\n #ifdef SPECULARCUBEMAP_ENABLED\n vec3 rayDirW = normalize(toWorldSpace * vec4(rayDir, 0.0)).rgb;\n litTexel = RGBMDecode(textureCubeLodEXT(specularCubemap, rayDirW, 0.0), 8.12).rgb * specularIntensity;\n#endif\n }\n color.rgb += ndl * litTexel * (\n F_Schlick(ndl, spec) * G_Smith(g, ndv, ndl) * vdh / (ndh * ndv + 0.001)\n );\n }\n color.rgb /= float(SAMPLE_PER_FRAME);\n#else\n #if !defined(SPECULARCUBEMAP_ENABLED)\n if (dot(hitNormal, rayDir) >= 0.0) {\n discard;\n }\n if (!intersect) {\n discard;\n }\n#endif\n float alpha = clamp(calculateAlpha(iterationCount, reflectivity, hitPixel, hitPoint, dist, rayDir), 0.0, 1.0);\n vec4 color = texture2D(sourceTexture, hitPixel);\n color.rgb *= alpha;\n\n#ifdef SPECULARCUBEMAP_ENABLED\n vec3 rayDirW = normalize(toWorldSpace * vec4(rayDir, 0.0)).rgb;\n alpha = alpha * (intersect ? 1.0 : 0.0);\n float bias = (1.0 -g) * 5.0;\n color.rgb += (1.0 - alpha)\n * RGBMDecode(textureCubeLodEXT(specularCubemap, rayDirW, bias), 8.12).rgb\n * specularIntensity;\n#endif\n\n#endif\n\n gl_FragColor = encodeHDR(color);\n}\n@end\n\n@export ecgl.ssr.blur\n\nuniform sampler2D texture;\nuniform sampler2D gBufferTexture1;\nuniform sampler2D gBufferTexture2;\nuniform mat4 projection;\nuniform float depthRange : 0.05;\n\nvarying vec2 v_Texcoord;\n\nuniform vec2 textureSize;\nuniform float blurSize : 1.0;\n\n#ifdef BLEND\n #ifdef SSAOTEX_ENABLED\nuniform sampler2D ssaoTex;\n #endif\nuniform sampler2D sourceTexture;\n#endif\n\nfloat getLinearDepth(vec2 coord)\n{\n float depth = texture2D(gBufferTexture2, coord).r * 2.0 - 1.0;\n return projection[3][2] / (depth * projection[2][3] - projection[2][2]);\n}\n\n@import clay.util.rgbm\n\n\nvoid main()\n{\n @import clay.compositor.kernel.gaussian_9\n\n vec4 centerNTexel = texture2D(gBufferTexture1, v_Texcoord);\n float g = centerNTexel.a;\n float maxBlurSize = clamp(1.0 - g, 0.0, 1.0) * blurSize;\n#ifdef VERTICAL\n vec2 off = vec2(0.0, maxBlurSize / textureSize.y);\n#else\n vec2 off = vec2(maxBlurSize / textureSize.x, 0.0);\n#endif\n\n vec2 coord = v_Texcoord;\n\n vec4 sum = vec4(0.0);\n float weightAll = 0.0;\n\n vec3 cN = centerNTexel.rgb * 2.0 - 1.0;\n float cD = getLinearDepth(v_Texcoord);\n for (int i = 0; i < 9; i++) {\n vec2 coord = clamp((float(i) - 4.0) * off + v_Texcoord, vec2(0.0), vec2(1.0));\n float w = gaussianKernel[i]\n * clamp(dot(cN, texture2D(gBufferTexture1, coord).rgb * 2.0 - 1.0), 0.0, 1.0);\n float d = getLinearDepth(coord);\n w *= (1.0 - smoothstep(abs(cD - d) / depthRange, 0.0, 1.0));\n\n weightAll += w;\n sum += decodeHDR(texture2D(texture, coord)) * w;\n }\n\n#ifdef BLEND\n float aoFactor = 1.0;\n #ifdef SSAOTEX_ENABLED\n aoFactor = texture2D(ssaoTex, v_Texcoord).r;\n #endif\n gl_FragColor = encodeHDR(\n sum / weightAll * aoFactor + decodeHDR(texture2D(sourceTexture, v_Texcoord))\n );\n#else\n gl_FragColor = encodeHDR(sum / weightAll);\n#endif\n}\n\n@end"),ch.prototype.setAmbientCubemap=function(e,n){this._ssrPass.material.set("specularCubemap",e),this._ssrPass.material.set("specularIntensity",n),this._ssrPass.material[e&&n?"enableTexture":"disableTexture"]("specularCubemap")},ch.prototype.update=function(e,n,t,r){var i=e.getWidth(),o=e.getHeight(),d=this._ssrTexture,f=this._texture2,g=this._texture3;d.width=this._prevTexture.width=this._currentTexture.width=i/this._downScale,d.height=this._prevTexture.height=this._currentTexture.height=o/this._downScale,f.width=g.width=i,f.height=g.height=o;var _=this._frameBuffer,C=this._ssrPass,S=this._blurPass1,k=this._blurPass2,z=this._blendPass,te=new ir,pe=new ir;if(ir.transpose(te,n.worldTransform),ir.transpose(pe,n.viewMatrix),C.setUniform("sourceTexture",t),C.setUniform("projection",n.projectionMatrix.array),C.setUniform("projectionInv",n.invProjectionMatrix.array),C.setUniform("toViewSpace",te.array),C.setUniform("toWorldSpace",pe.array),C.setUniform("nearZ",n.near),C.setUniform("jitterOffset",r/this._totalSamples*this._samplePerFrame),C.setUniform("sampleOffset",r*this._samplePerFrame),S.setUniform("textureSize",[d.width,d.height]),k.setUniform("textureSize",[i,o]),k.setUniform("sourceTexture",t),S.setUniform("projection",n.projectionMatrix.array),k.setUniform("projection",n.projectionMatrix.array),_.attach(d),_.bind(e),C.render(e),this._physicallyCorrect&&(_.attach(this._currentTexture),z.setUniform("texture1",this._prevTexture),z.setUniform("texture2",d),z.material.set({weight1:r>=1?.95:0,weight2:r>=1?.05:1}),z.render(e)),_.attach(f),S.setUniform("texture",this._physicallyCorrect?this._currentTexture:d),S.render(e),_.attach(g),k.setUniform("texture",f),k.render(e),_.unbind(e),this._physicallyCorrect){var Re=this._prevTexture;this._prevTexture=this._currentTexture,this._currentTexture=Re}},ch.prototype.getTargetTexture=function(){return this._texture3},ch.prototype.setParameter=function(e,n){"maxIteration"===e?this._ssrPass.material.define("fragment","MAX_ITERATION",n):this._ssrPass.setUniform(e,n)},ch.prototype.setPhysicallyCorrect=function(e){e?(this._normalDistribution||(this._normalDistribution=LI.generateNormalDistribution(64,this._totalSamples)),this._ssrPass.material.define("fragment","PHYSICALLY_CORRECT"),this._ssrPass.material.set("normalDistribution",this._normalDistribution),this._ssrPass.material.set("normalDistributionSize",[64,this._totalSamples])):this._ssrPass.material.undefine("fragment","PHYSICALLY_CORRECT"),this._physicallyCorrect=e},ch.prototype.setSSAOTexture=function(e){var n=this._blurPass2;e?(n.material.enableTexture("ssaoTex"),n.material.set("ssaoTex",e)):n.material.disableTexture("ssaoTex")},ch.prototype.isFinished=function(e){return!this._physicallyCorrect||e>this._totalSamples/this._samplePerFrame},ch.prototype.dispose=function(e){this._ssrTexture.dispose(e),this._texture2.dispose(e),this._texture3.dispose(e),this._prevTexture.dispose(e),this._currentTexture.dispose(e),this._frameBuffer.dispose(e)};const die=ch,m6=[0,0,-.321585265978,-.154972575841,.458126042375,.188473391593,.842080129861,.527766490688,.147304551086,-.659453822776,-.331943915203,-.940619700594,.0479226680259,.54812163202,.701581552186,-.709825561388,-.295436780218,.940589268233,-.901489676764,.237713156085,.973570876096,-.109899459384,-.866792314779,-.451805525005,.330975007087,.800048655954,-.344275183665,.381779221166,-.386139432542,-.437418421534,-.576478634965,-.0148463392551,.385798197415,-.262426961053,-.666302061145,.682427250835,-.628010632582,-.732836215494,.10163141741,-.987658134403,.711995289051,-.320024291314,.0296005138058,.950296523438,.0130612307608,-.351024443122,-.879596633704,-.10478487883,.435712737232,.504254490347,.779203817497,.206477676721,.388264289969,-.896736162545,-.153106280781,-.629203242522,-.245517550697,.657969239148,.126830499058,.26862328493,-.634888119007,-.302301223431,.617074219636,.779817204925];function z3(e,n,t,r,i){var o=e.gl;n.setUniform(o,"1i",t,i),o.activeTexture(o.TEXTURE0+i),r.isRenderable()?r.bind(e):r.unbind(e)}function fie(e,n,t,r,i){var o,d,f,g,_=e.gl;return function(C,S,k){if(!g||g.material!==C.material){var z=C.material,te=C.__program,pe=z.get("roughness");null==pe&&(pe=1);var Me=z.get("normalMap")||n,Re=z.get("roughnessMap"),Fe=z.get("bumpMap"),Oe=z.get("uvRepeat"),Be=z.get("uvOffset"),it=z.get("detailUvRepeat"),at=z.get("detailUvOffset"),Ct=!!Fe&&z.isTextureEnabled("bumpMap"),mt=!!Re&&z.isTextureEnabled("roughnessMap"),Ft=z.isDefined("fragment","DOUBLE_SIDED");Fe=Fe||t,Re=Re||r,k!==S?(S.set("normalMap",Me),S.set("bumpMap",Fe),S.set("roughnessMap",Re),S.set("useBumpMap",Ct),S.set("useRoughnessMap",mt),S.set("doubleSide",Ft),null!=Oe&&S.set("uvRepeat",Oe),null!=Be&&S.set("uvOffset",Be),null!=it&&S.set("detailUvRepeat",it),null!=at&&S.set("detailUvOffset",at),S.set("roughness",pe)):(te.setUniform(_,"1f","roughness",pe),o!==Me&&z3(e,te,"normalMap",Me,0),d!==Fe&&Fe&&z3(e,te,"bumpMap",Fe,1),f!==Re&&Re&&z3(e,te,"roughnessMap",Re,2),null!=Oe&&te.setUniform(_,"2f","uvRepeat",Oe),null!=Be&&te.setUniform(_,"2f","uvOffset",Be),null!=it&&te.setUniform(_,"2f","detailUvRepeat",it),null!=at&&te.setUniform(_,"2f","detailUvOffset",at),te.setUniform(_,"1i","useBumpMap",+Ct),te.setUniform(_,"1i","useRoughnessMap",+mt),te.setUniform(_,"1i","doubleSide",+Ft)),o=Me,d=Fe,f=Re,g=C}}}function Zy(e){e=e||{},this._depthTex=new $r({format:hr.DEPTH_COMPONENT,type:hr.UNSIGNED_INT}),this._normalTex=new $r({type:hr.HALF_FLOAT}),this._framebuffer=new qo,this._framebuffer.attach(this._normalTex),this._framebuffer.attach(this._depthTex,qo.DEPTH_ATTACHMENT),this._normalMaterial=new Pc({shader:new Un(Un.source("ecgl.normal.vertex"),Un.source("ecgl.normal.fragment"))}),this._normalMaterial.enableTexture(["normalMap","bumpMap","roughnessMap"]),this._defaultNormalMap=Zg.createBlank("#000"),this._defaultBumpMap=Zg.createBlank("#000"),this._defaultRoughessMap=Zg.createBlank("#000"),this._debugPass=new so({fragment:Un.source("clay.compositor.output")}),this._debugPass.setUniform("texture",this._normalTex),this._debugPass.material.undefine("fragment","OUTPUT_ALPHA")}Un.import("@export ecgl.normal.vertex\n\n@import ecgl.common.transformUniforms\n\n@import ecgl.common.uv.header\n\n@import ecgl.common.attributes\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\n@import ecgl.common.normalMap.vertexHeader\n\n@import ecgl.common.vertexAnimation.header\n\nvoid main()\n{\n\n @import ecgl.common.vertexAnimation.main\n\n @import ecgl.common.uv.main\n\n v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);\n v_WorldPosition = (world * vec4(pos, 1.0)).xyz;\n\n @import ecgl.common.normalMap.vertexMain\n\n gl_Position = worldViewProjection * vec4(pos, 1.0);\n\n}\n\n\n@end\n\n\n@export ecgl.normal.fragment\n\n#define ROUGHNESS_CHANEL 0\n\nuniform bool useBumpMap;\nuniform bool useRoughnessMap;\nuniform bool doubleSide;\nuniform float roughness;\n\n@import ecgl.common.uv.fragmentHeader\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nuniform mat4 viewInverse : VIEWINVERSE;\n\n@import ecgl.common.normalMap.fragmentHeader\n@import ecgl.common.bumpMap.header\n\nuniform sampler2D roughnessMap;\n\nvoid main()\n{\n vec3 N = v_Normal;\n \n bool flipNormal = false;\n if (doubleSide) {\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(eyePos - v_WorldPosition);\n\n if (dot(N, V) < 0.0) {\n flipNormal = true;\n }\n }\n\n @import ecgl.common.normalMap.fragmentMain\n\n if (useBumpMap) {\n N = bumpNormal(v_WorldPosition, v_Normal, N);\n }\n\n float g = 1.0 - roughness;\n\n if (useRoughnessMap) {\n float g2 = 1.0 - texture2D(roughnessMap, v_DetailTexcoord)[ROUGHNESS_CHANEL];\n g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);\n }\n\n if (flipNormal) {\n N = -N;\n }\n\n gl_FragColor.rgb = (N.xyz + 1.0) * 0.5;\n gl_FragColor.a = g;\n}\n@end"),Zy.prototype.getDepthTexture=function(){return this._depthTex},Zy.prototype.getNormalTexture=function(){return this._normalTex},Zy.prototype.update=function(e,n,t){var r=e.getWidth(),i=e.getHeight(),o=this._depthTex,d=this._normalTex,f=this._normalMaterial;o.width=r,o.height=i,d.width=r,d.height=i;var g=n.getRenderList(t).opaque;this._framebuffer.bind(e),e.gl.clearColor(0,0,0,0),e.gl.clear(e.gl.COLOR_BUFFER_BIT|e.gl.DEPTH_BUFFER_BIT),e.gl.disable(e.gl.BLEND),e.renderPass(g,t,{getMaterial:function(){return f},ifRender:function(_){return _.renderNormal},beforeRender:fie(e,this._defaultNormalMap,this._defaultBumpMap,this._defaultRoughessMap),sort:e.opaqueSortCompare}),this._framebuffer.unbind(e)},Zy.prototype.renderDebug=function(e){this._debugPass.render(e)},Zy.prototype.dispose=function(e){this._depthTex.dispose(e),this._normalTex.dispose(e)};const pie=Zy;function sw(e){e=e||{},this._edgePass=new so({fragment:Un.source("ecgl.edge")}),this._edgePass.setUniform("normalTexture",e.normalTexture),this._edgePass.setUniform("depthTexture",e.depthTexture),this._targetTexture=new $r({type:hr.HALF_FLOAT}),this._frameBuffer=new qo,this._frameBuffer.attach(this._targetTexture)}sw.prototype.update=function(e,n,t,r){var i=e.getWidth(),o=e.getHeight(),d=this._targetTexture;d.width=i,d.height=o;var f=this._frameBuffer;f.bind(e),this._edgePass.setUniform("projectionInv",n.invProjectionMatrix.array),this._edgePass.setUniform("textureSize",[i,o]),this._edgePass.setUniform("texture",t),this._edgePass.render(e),f.unbind(e)},sw.prototype.getTargetTexture=function(){return this._targetTexture},sw.prototype.setParameter=function(e,n){this._edgePass.setUniform(e,n)},sw.prototype.dispose=function(e){this._targetTexture.dispose(e),this._frameBuffer.dispose(e)};const gie=sw,vie={type:"compositor",nodes:[{name:"source",type:"texture",outputs:{color:{}}},{name:"source_half",shader:"#source(clay.compositor.downsample)",inputs:{texture:"source"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"bright",shader:"#source(clay.compositor.bright)",inputs:{texture:"source_half"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{threshold:2,scale:4,textureSize:"expr([width * 1.0 / 2, height / 2])"}},{name:"bright_downsample_4",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 2, height / 2] )"}},{name:"bright_downsample_8",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_4"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 4, height / 4] )"}},{name:"bright_downsample_16",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_8"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 8, height / 8] )"}},{name:"bright_downsample_32",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_16"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 32)",height:"expr(height * 1.0 / 32)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 16, height / 16] )"}},{name:"bright_upsample_16_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_32"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 32, height / 32] )"}},{name:"bright_upsample_16_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_16_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 16, height * 1.0 / 16] )"}},{name:"bright_upsample_8_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_16"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 16, height * 1.0 / 16] )"}},{name:"bright_upsample_8_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_8_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 8, height * 1.0 / 8] )"}},{name:"bright_upsample_8_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_8_blur_v",texture2:"bright_upsample_16_blur_v"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_4_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_8"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 8, height * 1.0 / 8] )"}},{name:"bright_upsample_4_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_4_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 4, height * 1.0 / 4] )"}},{name:"bright_upsample_4_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_4_blur_v",texture2:"bright_upsample_8_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_2_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_4"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 4, height * 1.0 / 4] )"}},{name:"bright_upsample_2_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_2_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 2, height * 1.0 / 2] )"}},{name:"bright_upsample_2_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_2_blur_v",texture2:"bright_upsample_4_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_full_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 2, height * 1.0 / 2] )"}},{name:"bright_upsample_full_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_full_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"bloom_composite",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_full_blur_v",texture2:"bright_upsample_2_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"coc",shader:"#source(ecgl.dof.coc)",outputs:{color:{parameters:{minFilter:"NEAREST",magFilter:"NEAREST",width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},parameters:{focalDist:50,focalRange:30}},{name:"dof_far_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"source",coc:"coc"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"dof_near_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"source",coc:"coc"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"},defines:{BLUR_NEARFIELD:null}},{name:"dof_coc_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"coc"},outputs:{color:{parameters:{minFilter:"NEAREST",magFilter:"NEAREST",width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"},defines:{BLUR_COC:null}},{name:"dof_composite",shader:"#source(ecgl.dof.composite)",inputs:{original:"source",blurred:"dof_far_blur",nearfield:"dof_near_blur",coc:"coc",nearcoc:"dof_coc_blur"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}}},{name:"composite",shader:"#source(clay.compositor.hdr.composite)",inputs:{texture:"source",bloom:"bloom_composite"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},defines:{}},{name:"FXAA",shader:"#source(clay.compositor.fxaa)",inputs:{texture:"composite"}}]};function _6(e,n){return{color:{parameters:{width:e,height:n}}}}Un.import(a6),Un.import(o6),Un.import(s6),Un.import(l6),Un.import(c6),Un.import(u6),Un.import(d6),Un.import(h6),Un.import(f6),Un.import("@export ecgl.dof.coc\n\nuniform sampler2D depth;\n\nuniform float zNear: 0.1;\nuniform float zFar: 2000;\n\nuniform float focalDistance: 3;\nuniform float focalRange: 1;\nuniform float focalLength: 30;\nuniform float fstop: 2.8;\n\nvarying vec2 v_Texcoord;\n\n@import clay.util.encode_float\n\nvoid main()\n{\n float z = texture2D(depth, v_Texcoord).r * 2.0 - 1.0;\n\n float dist = 2.0 * zNear * zFar / (zFar + zNear - z * (zFar - zNear));\n\n float aperture = focalLength / fstop;\n\n float coc;\n\n float uppper = focalDistance + focalRange;\n float lower = focalDistance - focalRange;\n if (dist <= uppper && dist >= lower) {\n coc = 0.5;\n }\n else {\n float focalAdjusted = dist > uppper ? uppper : lower;\n\n coc = abs(aperture * (focalLength * (dist - focalAdjusted)) / (dist * (focalAdjusted - focalLength)));\n coc = clamp(coc, 0.0, 2.0) / 2.00001;\n\n if (dist < lower) {\n coc = -coc;\n }\n coc = coc * 0.5 + 0.5;\n }\n\n gl_FragColor = encodeFloat(coc);\n}\n@end\n\n\n@export ecgl.dof.composite\n\n#define DEBUG 0\n\nuniform sampler2D original;\nuniform sampler2D blurred;\nuniform sampler2D nearfield;\nuniform sampler2D coc;\nuniform sampler2D nearcoc;\nvarying vec2 v_Texcoord;\n\n@import clay.util.rgbm\n@import clay.util.float\n\nvoid main()\n{\n vec4 blurredColor = texture2D(blurred, v_Texcoord);\n vec4 originalColor = texture2D(original, v_Texcoord);\n\n float fCoc = decodeFloat(texture2D(coc, v_Texcoord));\n\n fCoc = abs(fCoc * 2.0 - 1.0);\n\n float weight = smoothstep(0.0, 1.0, fCoc);\n \n#ifdef NEARFIELD_ENABLED\n vec4 nearfieldColor = texture2D(nearfield, v_Texcoord);\n float fNearCoc = decodeFloat(texture2D(nearcoc, v_Texcoord));\n fNearCoc = abs(fNearCoc * 2.0 - 1.0);\n\n gl_FragColor = encodeHDR(\n mix(\n nearfieldColor, mix(originalColor, blurredColor, weight),\n pow(1.0 - fNearCoc, 4.0)\n )\n );\n#else\n gl_FragColor = encodeHDR(mix(originalColor, blurredColor, weight));\n#endif\n\n}\n\n@end\n\n\n\n@export ecgl.dof.diskBlur\n\n#define POISSON_KERNEL_SIZE 16;\n\nuniform sampler2D texture;\nuniform sampler2D coc;\nvarying vec2 v_Texcoord;\n\nuniform float blurRadius : 10.0;\nuniform vec2 textureSize : [512.0, 512.0];\n\nuniform vec2 poissonKernel[POISSON_KERNEL_SIZE];\n\nuniform float percent;\n\nfloat nrand(const in vec2 n) {\n return fract(sin(dot(n.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\n@import clay.util.rgbm\n@import clay.util.float\n\n\nvoid main()\n{\n vec2 offset = blurRadius / textureSize;\n\n float rnd = 6.28318 * nrand(v_Texcoord + 0.07 * percent );\n float cosa = cos(rnd);\n float sina = sin(rnd);\n vec4 basis = vec4(cosa, -sina, sina, cosa);\n\n#if !defined(BLUR_NEARFIELD) && !defined(BLUR_COC)\n offset *= abs(decodeFloat(texture2D(coc, v_Texcoord)) * 2.0 - 1.0);\n#endif\n\n#ifdef BLUR_COC\n float cocSum = 0.0;\n#else\n vec4 color = vec4(0.0);\n#endif\n\n\n float weightSum = 0.0;\n\n for (int i = 0; i < POISSON_KERNEL_SIZE; i++) {\n vec2 ofs = poissonKernel[i];\n\n ofs = vec2(dot(ofs, basis.xy), dot(ofs, basis.zw));\n\n vec2 uv = v_Texcoord + ofs * offset;\n vec4 texel = texture2D(texture, uv);\n\n float w = 1.0;\n#ifdef BLUR_COC\n float fCoc = decodeFloat(texel) * 2.0 - 1.0;\n cocSum += clamp(fCoc, -1.0, 0.0) * w;\n#else\n texel = texel;\n #if !defined(BLUR_NEARFIELD)\n float fCoc = decodeFloat(texture2D(coc, uv)) * 2.0 - 1.0;\n w *= abs(fCoc);\n #endif\n texel.rgb *= texel.a;\n color += texel * w;\n#endif\n\n weightSum += w;\n }\n\n#ifdef BLUR_COC\n gl_FragColor = encodeFloat(clamp(cocSum / weightSum, -1.0, 0.0) * 0.5 + 0.5);\n#else\n color /= weightSum;\n color.rgb /= (color.a + 0.0001);\n gl_FragColor = color;\n#endif\n}\n\n@end"),Un.import("@export ecgl.edge\n\nuniform sampler2D texture;\n\nuniform sampler2D normalTexture;\nuniform sampler2D depthTexture;\n\nuniform mat4 projectionInv;\n\nuniform vec2 textureSize;\n\nuniform vec4 edgeColor: [0,0,0,0.8];\n\nvarying vec2 v_Texcoord;\n\nvec3 packColor(vec2 coord) {\n float z = texture2D(depthTexture, coord).r * 2.0 - 1.0;\n vec4 p = vec4(v_Texcoord * 2.0 - 1.0, z, 1.0);\n vec4 p4 = projectionInv * p;\n\n return vec3(\n texture2D(normalTexture, coord).rg,\n -p4.z / p4.w / 5.0\n );\n}\n\nvoid main() {\n vec2 cc = v_Texcoord;\n vec3 center = packColor(cc);\n\n float size = clamp(1.0 - (center.z - 10.0) / 100.0, 0.0, 1.0) * 0.5;\n float dx = size / textureSize.x;\n float dy = size / textureSize.y;\n\n vec2 coord;\n vec3 topLeft = packColor(cc+vec2(-dx, -dy));\n vec3 top = packColor(cc+vec2(0.0, -dy));\n vec3 topRight = packColor(cc+vec2(dx, -dy));\n vec3 left = packColor(cc+vec2(-dx, 0.0));\n vec3 right = packColor(cc+vec2(dx, 0.0));\n vec3 bottomLeft = packColor(cc+vec2(-dx, dy));\n vec3 bottom = packColor(cc+vec2(0.0, dy));\n vec3 bottomRight = packColor(cc+vec2(dx, dy));\n\n vec3 v = -topLeft-2.0*top-topRight+bottomLeft+2.0*bottom+bottomRight;\n vec3 h = -bottomLeft-2.0*left-topLeft+bottomRight+2.0*right+topRight;\n\n float edge = sqrt(dot(h, h) + dot(v, v));\n\n edge = smoothstep(0.8, 1.0, edge);\n\n gl_FragColor = mix(texture2D(texture, v_Texcoord), vec4(edgeColor.rgb, 1.0), edgeColor.a * edge);\n}\n@end");var H3=["composite","FXAA"];function ci(){this._sourceTexture=new $r({type:hr.HALF_FLOAT}),this._depthTexture=new $r({format:hr.DEPTH_COMPONENT,type:hr.UNSIGNED_INT}),this._framebuffer=new qo,this._framebuffer.attach(this._sourceTexture),this._framebuffer.attach(this._depthTexture,qo.DEPTH_ATTACHMENT),this._normalPass=new pie,this._compositor=function qre(e,n){var t=new Vre;n=n||{};var r={textures:{},parameters:{}};for(var o in e.parameters)r.parameters[o]=V3(e.parameters[o]);return function nie(e,n,t,r){if(e.textures){var i={},o=0,d=!1,f=t.textureRootPath;$o.each(e.textures,function(g,_){var C,S=g.path,k=V3(g.parameters);if(Array.isArray(S)&&6===S.length)f&&(S=S.map(function(z){return $o.relative2absolute(z,f)})),C=new qC(k);else{if("string"!=typeof S)return;f&&(S=$o.relative2absolute(S,f)),C=new $r(k)}C.load(S),o++,C.once("success",function(){i[_]=C,0==--o&&(r(i),d=!0)})}),0===o&&!d&&r(i)}else r({})}(e,0,n,function(f){r.textures=f,function(f,g){for(var _=0;_<e.nodes.length;_++){var S=Jre(e.nodes[_],r,n);S&&t.addNode(S)}}()}),t}(vie);var e=this._compositor.getNodeByName("source");e.texture=this._sourceTexture;var n=this._compositor.getNodeByName("coc");this._sourceNode=e,this._cocNode=n,this._compositeNode=this._compositor.getNodeByName("composite"),this._fxaaNode=this._compositor.getNodeByName("FXAA"),this._dofBlurNodes=["dof_far_blur","dof_near_blur","dof_coc_blur"].map(function(r){return this._compositor.getNodeByName(r)},this),this._dofBlurKernel=0,this._dofBlurKernelSize=new Float32Array(0),this._finalNodesChain=H3.map(function(r){return this._compositor.getNodeByName(r)},this);var t={normalTexture:this._normalPass.getNormalTexture(),depthTexture:this._normalPass.getDepthTexture()};this._ssaoPass=new cie(t),this._ssrPass=new die(t),this._edgePass=new gie(t)}ci.prototype.resize=function(r,i,t){i*=t=t||1;var o=this._sourceTexture,d=this._depthTexture;o.width=r*=t,o.height=i,d.width=r,d.height=i;var f={getWidth:function(){return r},getHeight:function(){return i},getDevicePixelRatio:function(){return t}};function g(_,C){if("function"==typeof _[C]){var S=_[C].__original||_[C];_[C]=function(k){return S.call(this,f)},_[C].__original=S}}this._compositor.nodes.forEach(function(_){for(var C in _.outputs){var S=_.outputs[C].parameters;S&&(g(S,"width"),g(S,"height"))}for(var k in _.parameters)g(_.parameters,k)}),this._width=r,this._height=i,this._dpr=t},ci.prototype.getWidth=function(){return this._width},ci.prototype.getHeight=function(){return this._height},ci.prototype._ifRenderNormalPass=function(){return this._enableSSAO||this._enableEdge||this._enableSSR},ci.prototype._getPrevNode=function(e){for(var n=H3.indexOf(e.name)-1,t=this._finalNodesChain[n];t&&!this._compositor.getNodeByName(t.name);)t=this._finalNodesChain[n-=1];return t},ci.prototype._getNextNode=function(e){for(var n=H3.indexOf(e.name)+1,t=this._finalNodesChain[n];t&&!this._compositor.getNodeByName(t.name);)t=this._finalNodesChain[n+=1];return t},ci.prototype._addChainNode=function(e){var n=this._getPrevNode(e),t=this._getNextNode(e);!n||(e.inputs.texture=n.name,t?(e.outputs=_6(this.getWidth.bind(this),this.getHeight.bind(this)),t.inputs.texture=e.name):e.outputs=null,this._compositor.addNode(e))},ci.prototype._removeChainNode=function(e){var n=this._getPrevNode(e),t=this._getNextNode(e);!n||(t?(n.outputs=_6(this.getWidth.bind(this),this.getHeight.bind(this)),t.inputs.texture=n.name):n.outputs=null,this._compositor.removeNode(e))},ci.prototype.updateNormal=function(e,n,t,r){this._ifRenderNormalPass()&&this._normalPass.update(e,n,t)},ci.prototype.updateSSAO=function(e,n,t,r){this._ssaoPass.update(e,t,r)},ci.prototype.enableSSAO=function(){this._enableSSAO=!0},ci.prototype.disableSSAO=function(){this._enableSSAO=!1},ci.prototype.enableSSR=function(){this._enableSSR=!0},ci.prototype.disableSSR=function(){this._enableSSR=!1},ci.prototype.getSSAOTexture=function(){return this._ssaoPass.getTargetTexture()},ci.prototype.getSourceFrameBuffer=function(){return this._framebuffer},ci.prototype.getSourceTexture=function(){return this._sourceTexture},ci.prototype.disableFXAA=function(){this._removeChainNode(this._fxaaNode)},ci.prototype.enableFXAA=function(){this._addChainNode(this._fxaaNode)},ci.prototype.enableBloom=function(){this._compositeNode.inputs.bloom="bloom_composite",this._compositor.dirty()},ci.prototype.disableBloom=function(){this._compositeNode.inputs.bloom=null,this._compositor.dirty()},ci.prototype.enableDOF=function(){this._compositeNode.inputs.texture="dof_composite",this._compositor.dirty()},ci.prototype.disableDOF=function(){this._compositeNode.inputs.texture="source",this._compositor.dirty()},ci.prototype.enableColorCorrection=function(){this._compositeNode.define("COLOR_CORRECTION"),this._enableColorCorrection=!0},ci.prototype.disableColorCorrection=function(){this._compositeNode.undefine("COLOR_CORRECTION"),this._enableColorCorrection=!1},ci.prototype.enableEdge=function(){this._enableEdge=!0},ci.prototype.disableEdge=function(){this._enableEdge=!1},ci.prototype.setBloomIntensity=function(e){this._compositeNode.setParameter("bloomIntensity",e)},ci.prototype.setSSAOParameter=function(e,n){switch(e){case"quality":this._ssaoPass.setParameter("kernelSize",{low:6,medium:12,high:32,ultra:62}[n]||12);break;case"radius":this._ssaoPass.setParameter(e,n),this._ssaoPass.setParameter("bias",n/200);break;case"intensity":this._ssaoPass.setParameter(e,n)}},ci.prototype.setDOFParameter=function(e,n){switch(e){case"focalDistance":case"focalRange":case"fstop":this._cocNode.setParameter(e,n);break;case"blurRadius":for(var t=0;t<this._dofBlurNodes.length;t++)this._dofBlurNodes[t].setParameter("blurRadius",n);break;case"quality":var r={low:4,medium:8,high:16,ultra:32}[n]||8;for(this._dofBlurKernelSize=r,t=0;t<this._dofBlurNodes.length;t++)this._dofBlurNodes[t].pass.material.define("POISSON_KERNEL_SIZE",r);this._dofBlurKernel=new Float32Array(2*r)}},ci.prototype.setSSRParameter=function(e,n){if(null!=n)switch(e){case"quality":var r={low:32,medium:16,high:8,ultra:4}[n]||16;this._ssrPass.setParameter("maxIteration",{low:10,medium:15,high:30,ultra:80}[n]||20),this._ssrPass.setParameter("pixelStride",r);break;case"maxRoughness":this._ssrPass.setParameter("minGlossiness",Math.max(Math.min(1-n,1),0));break;case"physical":this.setPhysicallyCorrectSSR(n);break;default:console.warn("Unkown SSR parameter "+e)}},ci.prototype.setPhysicallyCorrectSSR=function(e){this._ssrPass.setPhysicallyCorrect(e)},ci.prototype.setEdgeColor=function(e){var n=lt.parseColor(e);this._edgePass.setParameter("edgeColor",n)},ci.prototype.setExposure=function(e){this._compositeNode.setParameter("exposure",Math.pow(2,e))},ci.prototype.setColorLookupTexture=function(e,n){this._compositeNode.pass.material.setTextureImage("lut",this._enableColorCorrection?e:"none",n,{minFilter:lt.Texture.NEAREST,magFilter:lt.Texture.NEAREST,flipY:!1})},ci.prototype.setColorCorrection=function(e,n){this._compositeNode.setParameter(e,n)},ci.prototype.isSSREnabled=function(){return this._enableSSR},ci.prototype.composite=function(e,n,t,r,i){var o=this._sourceTexture,d=o;this._enableEdge&&(this._edgePass.update(e,t,o,i),o=d=this._edgePass.getTargetTexture()),this._enableSSR&&(this._ssrPass.update(e,t,o,i),d=this._ssrPass.getTargetTexture(),this._ssrPass.setSSAOTexture(this._enableSSAO?this._ssaoPass.getTargetTexture():null)),this._sourceNode.texture=d,this._cocNode.setParameter("depth",this._depthTexture);for(var f=this._dofBlurKernel,g=this._dofBlurKernelSize,C=i%Math.floor(m6.length/2/g),S=0;S<2*g;S++)f[S]=m6[S+C*g*2];for(S=0;S<this._dofBlurNodes.length;S++)this._dofBlurNodes[S].setParameter("percent",i/30),this._dofBlurNodes[S].setParameter("poissonKernel",f);this._cocNode.setParameter("zNear",t.near),this._cocNode.setParameter("zFar",t.far),this._compositor.render(e,r)},ci.prototype.dispose=function(e){this._sourceTexture.dispose(e),this._depthTexture.dispose(e),this._framebuffer.dispose(e),this._compositor.dispose(e),this._normalPass.dispose(e),this._ssaoPass.dispose(e)};const yie=ci;function U3(e){for(var n=[],t=0;t<30;t++)n.push([jy(t,2),jy(t,3)]);this._haltonSequence=n,this._frame=0,this._sourceTex=new $r,this._sourceFb=new qo,this._sourceFb.attach(this._sourceTex),this._prevFrameTex=new $r,this._outputTex=new $r;var r=this._blendPass=new so({fragment:Un.source("clay.compositor.blend")});r.material.disableTexturesAll(),r.material.enableTexture(["texture1","texture2"]),this._blendFb=new qo({depthBuffer:!1}),this._outputPass=new so({fragment:Un.source("clay.compositor.output"),blendWithPrevious:!0}),this._outputPass.material.define("fragment","OUTPUT_ALPHA"),this._outputPass.material.blend=function(i){i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD),i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA)}}U3.prototype={constructor:U3,jitterProjection:function(e,n){var t=e.viewport,r=t.devicePixelRatio||e.getDevicePixelRatio(),i=t.width*r,o=t.height*r,d=this._haltonSequence[this._frame%this._haltonSequence.length],f=new ir;f.array[12]=(2*d[0]-1)/i,f.array[13]=(2*d[1]-1)/o,ir.mul(n.projectionMatrix,f,n.projectionMatrix),ir.invert(n.invProjectionMatrix,n.projectionMatrix)},resetFrame:function(){this._frame=0},getFrame:function(){return this._frame},getSourceFrameBuffer:function(){return this._sourceFb},getOutputTexture:function(){return this._outputTex},resize:function(e,n){this._prevFrameTex.width=e,this._prevFrameTex.height=n,this._outputTex.width=e,this._outputTex.height=n,this._sourceTex.width=e,this._sourceTex.height=n,this._prevFrameTex.dirty(),this._outputTex.dirty(),this._sourceTex.dirty()},isFinished:function(){return this._frame>=this._haltonSequence.length},render:function(e,n,t){var r=this._blendPass;0===this._frame?(r.setUniform("weight1",0),r.setUniform("weight2",1)):(r.setUniform("weight1",.9),r.setUniform("weight2",.1)),r.setUniform("texture1",this._prevFrameTex),r.setUniform("texture2",n||this._sourceTex),this._blendFb.attach(this._outputTex),this._blendFb.bind(e),r.render(e),this._blendFb.unbind(e),t||(this._outputPass.setUniform("texture",this._outputTex),this._outputPass.render(e));var i=this._prevFrameTex;this._prevFrameTex=this._outputTex,this._outputTex=i,this._frame++},dispose:function(e){this._sourceFb.dispose(e),this._blendFb.dispose(e),this._prevFrameTex.dispose(e),this._outputTex.dispose(e),this._sourceTex.dispose(e),this._outputPass.dispose(e),this._blendPass.dispose(e)}};const bie=U3;function wa(e){e=e||"perspective",this.layer=null,this.scene=new Df,this.rootNode=this.scene,this.viewport={x:0,y:0,width:0,height:0},this.setProjection(e),this._compositor=new yie,this._temporalSS=new bie,this._shadowMapPass=new kre;for(var n=[],t=0,r=0;r<30;r++){for(var i=[],o=0;o<6;o++)i.push(4*jy(t,2)-2),i.push(4*jy(t,3)-2),t++;n.push(i)}this._pcfKernels=n,this.scene.on("beforerender",function(d,f,g){this.needsTemporalSS()&&this._temporalSS.jitterProjection(d,g)},this)}wa.prototype.setProjection=function(e){var n=this.camera;n&&n.update(),"perspective"===e?this.camera instanceof No||(this.camera=new No,n&&this.camera.setLocalTransform(n.localTransform)):this.camera instanceof Hy||(this.camera=new Hy,n&&this.camera.setLocalTransform(n.localTransform)),this.camera.near=.1,this.camera.far=2e3},wa.prototype.setViewport=function(e,n,t,r,i){this.camera instanceof No&&(this.camera.aspect=t/r),i=i||1,this.viewport.x=e,this.viewport.y=n,this.viewport.width=t,this.viewport.height=r,this.viewport.devicePixelRatio=i,this._compositor.resize(t*i,r*i),this._temporalSS.resize(t*i,r*i)},wa.prototype.containPoint=function(e,n){var t=this.viewport;return n=this.layer.renderer.getHeight()-n,e>=t.x&&n>=t.y&&e<=t.x+t.width&&n<=t.y+t.height};var y6=new jl;wa.prototype.castRay=function(e,n,t){var r=this.layer.renderer,i=r.viewport;return r.viewport=this.viewport,r.screenToNDC(e,n,y6),this.camera.castRay(y6,t),r.viewport=i,t},wa.prototype.prepareRender=function(){this.scene.update(),this.camera.update(),this.scene.updateLights();var e=this.scene.updateRenderList(this.camera);this._needsSortProgressively=!1;for(var n=0;n<e.transparent.length;n++){var r=e.transparent[n].geometry;r.needsSortVerticesProgressively&&r.needsSortVerticesProgressively()&&(this._needsSortProgressively=!0),r.needsSortTrianglesProgressively&&r.needsSortTrianglesProgressively()&&(this._needsSortProgressively=!0)}this._frame=0,this._temporalSS.resetFrame()},wa.prototype.render=function(e,n){this._doRender(e,n,this._frame),this._frame++},wa.prototype.needsAccumulate=function(){return this.needsTemporalSS()||this._needsSortProgressively},wa.prototype.needsTemporalSS=function(){var e=this._enableTemporalSS;return"auto"===e&&(e=this._enablePostEffect),e},wa.prototype.hasDOF=function(){return this._enableDOF},wa.prototype.isAccumulateFinished=function(){return this.needsTemporalSS()?this._temporalSS.isFinished():this._frame>30},wa.prototype._doRender=function(e,n,t){var r=this.scene,i=this.camera;this._updateTransparent(e,r,i,t=t||0),n||(this._shadowMapPass.kernelPCF=this._pcfKernels[0],this._shadowMapPass.render(e,r,i,!0)),this._updateShadowPCFKernel(t);var o=e.clearColor;if(e.gl.clearColor(o[0],o[1],o[2],o[3]),this._enablePostEffect&&(this.needsTemporalSS()&&this._temporalSS.jitterProjection(e,i),this._compositor.updateNormal(e,r,i,this._temporalSS.getFrame())),this._updateSSAO(e,r,i,this._temporalSS.getFrame()),this._enablePostEffect)(d=this._compositor.getSourceFrameBuffer()).bind(e),e.gl.clear(e.gl.DEPTH_BUFFER_BIT|e.gl.COLOR_BUFFER_BIT),e.render(r,i,!0,!0),d.unbind(e),this.needsTemporalSS()&&n?(this._compositor.composite(e,r,i,this._temporalSS.getSourceFrameBuffer(),this._temporalSS.getFrame()),e.setViewport(this.viewport),this._temporalSS.render(e)):(e.setViewport(this.viewport),this._compositor.composite(e,r,i,null,0));else if(this.needsTemporalSS()&&n){var d;(d=this._temporalSS.getSourceFrameBuffer()).bind(e),e.saveClear(),e.clearBit=e.gl.DEPTH_BUFFER_BIT|e.gl.COLOR_BUFFER_BIT,e.render(r,i,!0,!0),e.restoreClear(),d.unbind(e),e.setViewport(this.viewport),this._temporalSS.render(e)}else e.setViewport(this.viewport),e.render(r,i,!0,!0)},wa.prototype._updateTransparent=function(e,n,t,r){for(var i=new Ln,o=new ir,d=t.getWorldPosition(),f=n.getRenderList(t).transparent,g=0;g<f.length;g++){var _=f[g],C=_.geometry;ir.invert(o,_.worldTransform),Ln.transformMat4(i,d,o),C.needsSortTriangles&&C.needsSortTriangles()&&C.doSortTriangles(i,r),C.needsSortVertices&&C.needsSortVertices()&&C.doSortVertices(i,r)}},wa.prototype._updateSSAO=function(e,n,t){var r=this._enableSSAO&&this._enablePostEffect;r&&this._compositor.updateSSAO(e,n,t,this._temporalSS.getFrame());for(var i=n.getRenderList(t),o=0;o<i.opaque.length;o++){var d=i.opaque[o];d.renderNormal&&d.material[r?"enableTexture":"disableTexture"]("ssaoMap"),r&&d.material.set("ssaoMap",this._compositor.getSSAOTexture())}},wa.prototype._updateShadowPCFKernel=function(e){for(var n=this._pcfKernels[e%this._pcfKernels.length],r=this.scene.getRenderList(this.camera).opaque,i=0;i<r.length;i++)r[i].receiveShadow&&(r[i].material.set("pcfKernel",n),r[i].material.define("fragment","PCF_KERNEL_SIZE",n.length/2))},wa.prototype.dispose=function(e){this._compositor.dispose(e.gl),this._temporalSS.dispose(e.gl),this._shadowMapPass.dispose(e)},wa.prototype.setPostEffect=function(e,n){var t=this._compositor;this._enablePostEffect=e.get("enable");var r=e.getModel("bloom"),i=e.getModel("edge"),o=e.getModel("DOF",e.getModel("depthOfField")),d=e.getModel("SSAO",e.getModel("screenSpaceAmbientOcclusion")),f=e.getModel("SSR",e.getModel("screenSpaceReflection")),g=e.getModel("FXAA"),_=e.getModel("colorCorrection");r.get("enable")?t.enableBloom():t.disableBloom(),o.get("enable")?t.enableDOF():t.disableDOF(),f.get("enable")?t.enableSSR():t.disableSSR(),_.get("enable")?t.enableColorCorrection():t.disableColorCorrection(),i.get("enable")?t.enableEdge():t.disableEdge(),g.get("enable")?t.enableFXAA():t.disableFXAA(),this._enableDOF=o.get("enable"),this._enableSSAO=d.get("enable"),this._enableSSAO?t.enableSSAO():t.disableSSAO(),t.setBloomIntensity(r.get("intensity")),t.setEdgeColor(i.get("color")),t.setColorLookupTexture(_.get("lookupTexture"),n),t.setExposure(_.get("exposure")),["radius","quality","intensity"].forEach(function(C){t.setSSAOParameter(C,d.get(C))}),["quality","maxRoughness","physical"].forEach(function(C){t.setSSRParameter(C,f.get(C))}),["quality","focalDistance","focalRange","blurRadius","fstop"].forEach(function(C){t.setDOFParameter(C,o.get(C))}),["brightness","contrast","saturation"].forEach(function(C){t.setColorCorrection(C,_.get(C))})},wa.prototype.setDOFFocusOnPoint=function(e){if(this._enablePostEffect)return e>this.camera.far||e<this.camera.near?void 0:(this._compositor.setDOFParameter("focalDistance",e),!0)},wa.prototype.setTemporalSuperSampling=function(e){this._enableTemporalSS=e.get("enable")},wa.prototype.isLinearSpace=function(){return this._enablePostEffect},wa.prototype.setRootNode=function(e){if(this.rootNode!==e){for(var n=this.rootNode.children(),t=0;t<n.length;t++)e.add(n[t]);e!==this.scene&&this.scene.add(e),this.rootNode=e}},wa.prototype.add=function(e){this.rootNode.add(e)},wa.prototype.remove=function(e){this.rootNode.remove(e)},wa.prototype.removeAll=function(e){this.rootNode.removeAll(e)},Object.assign(wa.prototype,$B);const Tf=wa;function xie(e,n){var t=e.getBoxLayoutParams(),r=(0,$I.ME)(t,{width:n.getWidth(),height:n.getHeight()});r.y=n.getHeight()-r.y-r.height,this.viewGL.setViewport(r.x,r.y,r.width,r.height,n.getDevicePixelRatio());var i=e.get("boxWidth"),o=e.get("boxHeight"),d=e.get("boxDepth");this.getAxis("x").setExtent(-i/2,i/2),this.getAxis("y").setExtent(d/2,-d/2),this.getAxis("z").setExtent(-o/2,o/2),this.size=[i,o,d]}function Cie(e,n){var t={};e.eachSeries(function(i){if(i.coordinateSystem===this){var o=i.getData();["x","y","z"].forEach(function(d){o.mapDimensionsAll(d,!0).forEach(function(f){!function r(i,o){t[i]=t[i]||[1/0,-1/0],t[i][0]=Math.min(o[0],t[i][0]),t[i][1]=Math.max(o[1],t[i][1])}(d,o.getDataExtent(f,!0))})})}},this),["xAxis3D","yAxis3D","zAxis3D"].forEach(function(i){e.eachComponent(i,function(o){var d=i.charAt(0),f=o.getReferringComponents("grid3D").models[0],g=f.coordinateSystem;if(g===this){var _=g.getAxis(d);if(!_){var C=bt._y.createScale(t[d]||[1/0,-1/0],o);(_=new Pre(d,C)).type=o.get("type"),_.onBand="category"===_.type&&o.get("boundaryGap"),_.inverse=o.get("inverse"),o.axis=_,_.model=o,_.getLabelModel=function(){return o.getModel("axisLabel",f.getModel("axisLabel"))},_.getTickModel=function(){return o.getModel("axisTick",f.getModel("axisTick"))},g.addAxis(_)}}},this)},this),this.resize(this.model,n)}var wie={dimensions:qW.prototype.dimensions,create:function(e,n){var t=[];e.eachComponent("grid3D",function(o){o.__viewGL=o.__viewGL||new Tf;var d=new qW;d.model=o,d.viewGL=o.__viewGL,o.coordinateSystem=d,t.push(d),d.resize=xie,d.update=Cie});var r=["xAxis3D","yAxis3D","zAxis3D"];return e.eachSeries(function(o){if("cartesian3D"===o.get("coordinateSystem")){if(null==(d=o.getReferringComponents("grid3D").models[0])){var f=function i(o,d){return r.map(function(f){var g=o.getReferringComponents(f).models[0];return null==g&&(g=d.getComponent(f)),g})}(o,e),d=f[0].getCoordSysModel();f.forEach(function(C){C.getCoordSysModel()})}o.coordinateSystem=d.coordinateSystem}}),t}};const Sie=wie;var b6=bt.tF.extend({type:"cartesian3DAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid3D",index:this.option.gridIndex,id:this.option.gridId})[0]}});bt._y.mixinAxisModelCommonMethods(b6);const Die=b6;var x6={show:!0,grid3DIndex:0,inverse:!1,name:"",nameLocation:"middle",nameTextStyle:{fontSize:16},nameGap:20,axisPointer:{},axisLine:{},axisTick:{},axisLabel:{},splitArea:{}},Mie=bt.D5.merge({boundaryGap:!0,axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"},axisPointer:{label:{show:!1}}},x6),G3=bt.D5.merge({boundaryGap:[0,0],splitNumber:5,axisPointer:{label:{}}},x6),Tie=bt.D5.defaults({scale:!0,min:"dataMin",max:"dataMax"},G3),C6=bt.D5.defaults({logBase:10},G3);C6.scale=!0;const Eie={categoryAxis3D:Mie,valueAxis3D:G3,timeAxis3D:Tie,logAxis3D:C6};var Aie=H(9567),Iie=["value","category","time","log"];function Rie(e,n){return n.type||(n.data?"category":"value")}(0,bt.D$)(function Lie(e){e.registerComponentModel(Cre),e.registerComponentView(Ire),e.registerCoordinateSystem("grid3D",Sie),["x","y","z"].forEach(function(n){!function Pie(e,n,t,r,i){Iie.forEach(function(o){var d=t.extend({type:n+"Axis3D."+o,__ordinalMeta:null,mergeDefaultAndTheme:function(f,g){var _=g.getTheme();bt.D5.merge(f,_.get(o+"Axis3D")),bt.D5.merge(f,this.getDefaultOption()),f.type=r(n,f)},optionUpdated:function(){"category"===this.option.type&&(this.__ordinalMeta=Aie.Z.createByAxisModel(this))},getCategories:function(){if("category"===this.option.type)return this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:bt.D5.merge(bt.D5.clone(Eie[o+"Axis3D"]),i||{},!0)});e.registerComponentModel(d)}),e.registerSubTypeDefaulter(n+"Axis3D",bt.D5.curry(r,n))}(e,n,Die,Rie,{name:n.toUpperCase()});const t=e.ComponentView.extend({type:n+"Axis3D"});e.registerComponentView(t)}),e.registerAction({type:"grid3DChangeCamera",event:"grid3dcamerachanged",update:"series:updateCamera"},function(n,t){t.eachComponent({mainType:"grid3D",query:n},function(r){r.setView(n)})}),e.registerAction({type:"grid3DShowAxisPointer",event:"grid3dshowaxispointer",update:"grid3D:showAxisPointer"},function(n,t){}),e.registerAction({type:"grid3DHideAxisPointer",event:"grid3dhideaxispointer",update:"grid3D:hideAxisPointer"},function(n,t){})});const Yy={defaultOption:{shading:null,realisticMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},lambertMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},colorMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},hatchingMaterial:{textureTiling:1,textureOffset:0,paperColor:"#fff"}}},w6={getFilledRegions:function(e,n){var r,t=(e||[]).slice();if("string"==typeof n?r=(n=bt.FU(n))&&n.geoJson:n&&n.features&&(r=n),!r)return[];for(var i={},o=r.features,d=0;d<t.length;d++)i[t[d].name]=t[d];for(d=0;d<o.length;d++){var f=o[d].properties.name;i[f]||t.push({name:f})}return t},defaultOption:{show:!0,zlevel:-10,map:"",left:0,top:0,width:"100%",height:"100%",boxWidth:100,boxHeight:10,boxDepth:"auto",regionHeight:3,environment:"auto",groundPlane:{show:!1,color:"#aaa"},shading:"lambert",light:{main:{alpha:40,beta:30}},viewControl:{alpha:40,beta:0,distance:100,orthographicSize:60,minAlpha:5,minBeta:-80,maxBeta:80},label:{show:!1,distance:2,textStyle:{fontSize:20,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:4}},itemStyle:{color:"#fff",borderWidth:0,borderColor:"#333"},emphasis:{itemStyle:{color:"#639fc0"},label:{show:!0}}}};var Xy=bt.tF.extend({type:"geo3D",layoutMode:"box",coordinateSystem:null,optionUpdated:function(){var e=this.option;e.regions=this.getFilledRegions(e.regions,e.map);var n=bt._y.createDimensions(e.data||[],{coordDimensions:["value"],encodeDefine:this.get("encode"),dimensionsDefine:this.get("dimensions")}),t=new bt.aV(n,this);t.initData(e.regions);var r={};t.each(function(i){var o=t.getName(i),d=t.getItemModel(i);r[o]=d}),this._regionModelMap=r,this._data=t},getData:function(){return this._data},getRegionModel:function(e){var n=this.getData().getName(e);return this._regionModelMap[n]||new bt.Hn(null,this)},getRegionPolygonCoords:function(e){var n=this.getData().getName(e),t=this.coordinateSystem.getRegion(n);return t?t.geometries:[]},getFormattedLabel:function(e,n){var t=this._data.getName(e),r=this.getRegionModel(e),i=r.get("normal"===n?["label","formatter"]:["emphasis","label","formatter"]);null==i&&(i=r.get(["label","formatter"]));var o={name:t};return"function"==typeof i?(o.status=n,i(o)):"string"==typeof i?i.replace("{a}",o.seriesName??""):t},defaultOption:{regions:[]}});bt.D5.merge(Xy.prototype,w6),bt.D5.merge(Xy.prototype,zI),bt.D5.merge(Xy.prototype,Uy),bt.D5.merge(Xy.prototype,Gy),bt.D5.merge(Xy.prototype,Yy);const Oie=Xy,kie=S6;function S6(e,n,t){t=t||2;var f,g,_,C,S,k,z,r=n&&n.length,i=r?n[0]*t:e.length,o=D6(e,0,i,t,!0),d=[];if(!o)return d;if(r&&(o=function zie(e,n,t,r){var o,d,_,i=[];for(o=0,d=n.length;o<d;o++)(_=D6(e,n[o]*r,o<d-1?n[o+1]*r:e.length,r,!1))===_.next&&(_.steiner=!0),i.push(Zie(_));for(i.sort(Hie),o=0;o<i.length;o++)Uie(i[o],t),t=lw(t,t.next);return t}(e,n,o,t)),e.length>80*t){f=_=e[0],g=C=e[1];for(var te=t;te<i;te+=t)(S=e[te])<f&&(f=S),(k=e[te+1])<g&&(g=k),S>_&&(_=S),k>C&&(C=k);z=Math.max(_-f,C-g)}return cw(o,d,t,f,g,z),d}function D6(e,n,t,r,i){var o,d;if(i===Z3(e,n,t,r)>0)for(o=n;o<t;o+=r)d=E6(o,e[o],e[o+1],d);else for(o=t-r;o>=n;o-=r)d=E6(o,e[o],e[o+1],d);return d&&ev(d,d.next)&&(dw(d),d=d.next),d}function lw(e,n){if(!e)return e;n||(n=e);var r,t=e;do{if(r=!1,t.steiner||!ev(t,t.next)&&0!==Xs(t.prev,t,t.next))t=t.next;else{if(dw(t),(t=n=t.prev)===t.next)return null;r=!0}}while(r||t!==n);return n}function cw(e,n,t,r,i,o,d){if(e){!d&&o&&function Wie(e,n,t,r){var i=e;do{null===i.z&&(i.z=W3(i.x,i.y,n,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function jie(e){var n,t,r,i,o,d,f,g,_=1;do{for(t=e,e=null,o=null,d=0;t;){for(d++,r=t,f=0,n=0;n<_&&(f++,r=r.nextZ);n++);for(g=_;f>0||g>0&&r;)0!==f&&(0===g||!r||t.z<=r.z)?(i=t,t=t.nextZ,f--):(i=r,r=r.nextZ,g--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;t=r}o.nextZ=null,_*=2}while(d>1)}(i)}(e,r,i,o);for(var g,_,f=e;e.prev!==e.next;)if(g=e.prev,_=e.next,o?Fie(e,r,i,o):Nie(e))n.push(g.i/t),n.push(e.i/t),n.push(_.i/t),dw(e),e=_.next,f=_.next;else if((e=_)===f){d?1===d?cw(e=Bie(e,n,t),n,t,r,i,o,2):2===d&&Vie(e,n,t,r,i,o):cw(lw(e),n,t,r,i,o,1);break}}}function Nie(e){var n=e.prev,t=e,r=e.next;if(Xs(n,t,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(KI(n.x,n.y,t.x,t.y,r.x,r.y,i.x,i.y)&&Xs(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Fie(e,n,t,r){var i=e.prev,o=e,d=e.next;if(Xs(i,o,d)>=0)return!1;for(var _=i.x>o.x?i.x>d.x?i.x:d.x:o.x>d.x?o.x:d.x,C=i.y>o.y?i.y>d.y?i.y:d.y:o.y>d.y?o.y:d.y,S=W3(i.x<o.x?i.x<d.x?i.x:d.x:o.x<d.x?o.x:d.x,i.y<o.y?i.y<d.y?i.y:d.y:o.y<d.y?o.y:d.y,n,t,r),k=W3(_,C,n,t,r),z=e.nextZ;z&&z.z<=k;){if(z!==e.prev&&z!==e.next&&KI(i.x,i.y,o.x,o.y,d.x,d.y,z.x,z.y)&&Xs(z.prev,z,z.next)>=0)return!1;z=z.nextZ}for(z=e.prevZ;z&&z.z>=S;){if(z!==e.prev&&z!==e.next&&KI(i.x,i.y,o.x,o.y,d.x,d.y,z.x,z.y)&&Xs(z.prev,z,z.next)>=0)return!1;z=z.prevZ}return!0}function Bie(e,n,t){var r=e;do{var i=r.prev,o=r.next.next;!ev(i,o)&&M6(i,r,r.next,o)&&uw(i,o)&&uw(o,i)&&(n.push(i.i/t),n.push(r.i/t),n.push(o.i/t),dw(r),dw(r.next),r=e=o),r=r.next}while(r!==e);return r}function Vie(e,n,t,r,i,o){var d=e;do{for(var f=d.next.next;f!==d.prev;){if(d.i!==f.i&&Yie(d,f)){var g=T6(d,f);return d=lw(d,d.next),g=lw(g,g.next),cw(d,n,t,r,i,o),void cw(g,n,t,r,i,o)}f=f.next}d=d.next}while(d!==e)}function Hie(e,n){return e.x-n.x}function Uie(e,n){if(n=function Gie(e,n){var d,t=n,r=e.x,i=e.y,o=-1/0;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){var f=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=r&&f>o){if(o=f,f===r){if(i===t.y)return t;if(i===t.next.y)return t.next}d=t.x<t.next.x?t:t.next}}t=t.next}while(t!==n);if(!d)return null;if(r===o)return d.prev;var k,g=d,_=d.x,C=d.y,S=1/0;for(t=d.next;t!==g;)r>=t.x&&t.x>=_&&r!==t.x&&KI(i<C?r:o,i,_,C,i<C?o:r,i,t.x,t.y)&&((k=Math.abs(i-t.y)/(r-t.x))<S||k===S&&t.x>d.x)&&uw(t,e)&&(d=t,S=k),t=t.next;return d}(e,n),n){var t=T6(n,e);lw(t,t.next)}}function W3(e,n,t,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-t)/i)|e<<8))|e<<4))|e<<2))|e<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-r)/i)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function Zie(e){var n=e,t=e;do{n.x<t.x&&(t=n),n=n.next}while(n!==e);return t}function KI(e,n,t,r,i,o,d,f){return(i-d)*(n-f)-(e-d)*(o-f)>=0&&(e-d)*(r-f)-(t-d)*(n-f)>=0&&(t-d)*(o-f)-(i-d)*(r-f)>=0}function Yie(e,n){return e.next.i!==n.i&&e.prev.i!==n.i&&!function Xie(e,n){var t=e;do{if(t.i!==e.i&&t.next.i!==e.i&&t.i!==n.i&&t.next.i!==n.i&&M6(t,t.next,e,n))return!0;t=t.next}while(t!==e);return!1}(e,n)&&uw(e,n)&&uw(n,e)&&function $ie(e,n){var t=e,r=!1,i=(e.x+n.x)/2,o=(e.y+n.y)/2;do{t.y>o!=t.next.y>o&&t.next.y!==t.y&&i<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next}while(t!==e);return r}(e,n)}function Xs(e,n,t){return(n.y-e.y)*(t.x-n.x)-(n.x-e.x)*(t.y-n.y)}function ev(e,n){return e.x===n.x&&e.y===n.y}function M6(e,n,t,r){return!!(ev(e,n)&&ev(t,r)||ev(e,r)&&ev(t,n))||Xs(e,n,t)>0!=Xs(e,n,r)>0&&Xs(t,r,e)>0!=Xs(t,r,n)>0}function uw(e,n){return Xs(e.prev,e,e.next)<0?Xs(e,n,e.next)>=0&&Xs(e,e.prev,n)>=0:Xs(e,n,e.prev)<0||Xs(e,e.next,n)<0}function T6(e,n){var t=new j3(e.i,e.x,e.y),r=new j3(n.i,n.x,n.y),i=e.next,o=n.prev;return e.next=n,n.prev=e,t.next=i,i.prev=t,r.next=t,t.prev=r,o.next=r,r.prev=o,r}function E6(e,n,t,r){var i=new j3(e,n,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function dw(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function j3(e,n,t){this.i=e,this.x=n,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Z3(e,n,t,r){for(var i=0,o=n,d=t-r;o<t;o+=r)i+=(e[d]-e[o])*(e[o+1]+e[d+1]),d=o;return i}function Y3(e,n,t){var r=e[n];e[n]=e[t],e[t]=r}function A6(e,n,t,r,i){var o=t,d=e[n];Y3(e,n,r);for(var f=t;f<r;f++)i(e[f],d)<0&&(Y3(e,f,o),o++);return Y3(e,r,o),o}function QI(e,n,t,r){if(t<r){var o=A6(e,Math.floor((t+r)/2),t,r,n);QI(e,n,t,o-1),QI(e,n,o+1,r)}}function X3(){this._parts=[]}S6.deviation=function(e,n,t,r){var i=n&&n.length,d=Math.abs(Z3(e,0,i?n[0]*t:e.length,t));if(i)for(var f=0,g=n.length;f<g;f++)d-=Math.abs(Z3(e,n[f]*t,f<g-1?n[f+1]*t:e.length,t));var S=0;for(f=0;f<r.length;f+=3){var k=r[f]*t,z=r[f+1]*t,te=r[f+2]*t;S+=Math.abs((e[k]-e[te])*(e[z+1]-e[k+1])-(e[k]-e[z])*(e[te+1]-e[k+1]))}return 0===d&&0===S?0:Math.abs((S-d)/d)},X3.prototype.step=function(e,n,t){var r=e.length;if(0===t){this._parts=[],this._sorted=!1;var i=Math.floor(r/2);this._parts.push({pivot:i,left:0,right:r-1}),this._currentSortPartIdx=0}if(!this._sorted){var o=this._parts;if(0===o.length)return this._sorted=!0,!0;if(o.length<512){for(var d=0;d<o.length;d++)o[d].pivot=A6(e,o[d].pivot,o[d].left,o[d].right,n);var f=[];for(d=0;d<o.length;d++){var g,_;(_=o[d].pivot-1)>(g=o[d].left)&&f.push({pivot:Math.floor((_+g)/2),left:g,right:_}),(_=o[d].right)>(g=o[d].pivot+1)&&f.push({pivot:Math.floor((_+g)/2),left:g,right:_})}o=this._parts=f}else for(d=0;d<Math.floor(o.length/10);d++){var C=o.length-1-this._currentSortPartIdx;if(QI(e,n,o[C].left,o[C].right),this._currentSortPartIdx++,this._currentSortPartIdx===o.length)return this._sorted=!0,!0}return!1}},X3.sort=QI;const qI=X3;var $y=Qa.vec3,I6=$y.create(),P6=$y.create(),R6=$y.create();const $3={needsSortTriangles:function(){return this.indices&&this.sortTriangles},needsSortTrianglesProgressively:function(){return this.needsSortTriangles()&&this.triangleCount>=2e4},doSortTriangles:function(e,n){var t=this.indices;if(0===n){var r=this.attributes.position;e=e.array,(!this._triangleZList||this._triangleZList.length!==this.triangleCount)&&(this._triangleZList=new Float32Array(this.triangleCount),this._sortedTriangleIndices=new Uint32Array(this.triangleCount),this._indicesTmp=new t.constructor(t.length),this._triangleZListTmp=new Float32Array(this.triangleCount));for(var o,i=0,d=0;d<t.length;){r.get(t[d++],I6),r.get(t[d++],P6),r.get(t[d++],R6);var f=$y.sqrDist(I6,e),g=$y.sqrDist(P6,e),_=$y.sqrDist(R6,e),C=Math.min(f,g);C=Math.min(C,_),3===d?(o=C,C=0):C-=o,this._triangleZList[i++]=C}}var S=this._sortedTriangleIndices;for(d=0;d<S.length;d++)S[d]=d;if(this.triangleCount<2e4)0===n&&this._simpleSort(!0);else for(d=0;d<3;d++)this._progressiveQuickSort(3*n+d);var k=this._indicesTmp,z=this._triangleZListTmp,te=this._triangleZList;for(d=0;d<this.triangleCount;d++){var pe=3*S[d],Me=3*d;k[Me++]=t[pe++],k[Me++]=t[pe++],k[Me]=t[pe],z[d]=te[S[d]]}var Re=this._indicesTmp;this._indicesTmp=this.indices,this.indices=Re,Re=this._triangleZListTmp,this._triangleZListTmp=this._triangleZList,this._triangleZList=Re,this.dirtyIndices()},_simpleSort:function(e){var n=this._triangleZList,t=this._sortedTriangleIndices;function r(i,o){return n[o]-n[i]}e?Array.prototype.sort.call(t,r):qI.sort(t,r,0,t.length-1)},_progressiveQuickSort:function(e){var n=this._triangleZList,t=this._sortedTriangleIndices;this._quickSort=this._quickSort||new qI,this._quickSort.step(t,function(r,i){return n[i]-n[r]},e)}};function Fo(e,n){const t=e.getItemVisual(n,"style");if(t)return t[e.getVisual("drawType")]}function Bo(e,n){const t=e.getItemVisual(n,"style");return t&&t.opacity}function tv(e,n,t){this._labelsMesh=new L3,this._labelTextureSurface=new I3({width:512,height:512,devicePixelRatio:t.getDevicePixelRatio(),onupdate:function(){t.getZr().refresh()}}),this._api=t,this._labelsMesh.material.set("textureAtlas",this._labelTextureSurface.getTexture())}tv.prototype.getLabelPosition=function(e,n,t){return[0,0,0]},tv.prototype.getLabelDistance=function(e,n,t){return 0},tv.prototype.getMesh=function(){return this._labelsMesh},tv.prototype.updateData=function(e,n,t){null==n&&(n=0),null==t&&(t=e.count()),(!this._labelsVisibilitiesBits||this._labelsVisibilitiesBits.length!==t-n)&&(this._labelsVisibilitiesBits=new Uint8Array(t-n));for(var r=["label","show"],i=["emphasis","label","show"],o=n;o<t;o++){var d=e.getItemModel(o),f=d.get(r),g=d.get(i);null==g&&(g=f),this._labelsVisibilitiesBits[o-n]=(f?1:0)|(g?2:0)}this._start=n,this._end=t,this._data=e},tv.prototype.updateLabels=function(e){if(this._data){for(var n=(e=e||[]).length>0,t={},r=0;r<e.length;r++)t[e[r]]=!0;this._labelsMesh.geometry.convertToDynamicArray(!0),this._labelTextureSurface.clear();for(var i=["label"],o=["emphasis","label"],d=this._data.hostModel,f=this._data,g=d.getModel(i),_=d.getModel(o,g),C={left:"right",right:"left",top:"center",bottom:"center"},S={left:"middle",right:"middle",top:"bottom",bottom:"top"},k=this._start;k<this._end;k++){var z=!1;if(n&&t[k]&&(z=!0),this._labelsVisibilitiesBits[k-this._start]&(z?2:1)){var Me=f.getItemModel(k).getModel(z?o:i,z?_:g),Re=Me.get("distance")||0,Fe=Me.get("position"),Oe=this._api.getDevicePixelRatio(),Be=d.getFormattedLabel(k,z?"emphasis":"normal");if(null==Be||""===Be)return;var it=new bt.Q.Text({style:(0,UI.Lr)(Me,{text:Be,fill:Me.get("color")||Fo(f,k)||"#000",align:"left",verticalAlign:"top",opacity:qr.firstNotNull(Me.get("opacity"),Bo(f,k),1)})}),at=it.getBoundingRect();at.height*=1.2;var mt=this._labelTextureSurface.add(it),Ft=C[Fe]||"center",nn=S[Fe]||"bottom";this._labelsMesh.geometry.addSprite(this.getLabelPosition(k,Fe,Re),[at.width*Oe,at.height*Oe],mt,Ft,nn,this.getLabelDistance(k,Fe,Re)*Oe)}}this._labelsMesh.material.set("uvScale",this._labelTextureSurface.getCoordsScale()),this._labelTextureSurface.getZr().refreshImmediately(),this._labelsMesh.geometry.convertToTypedArray(),this._labelsMesh.geometry.dirty()}},tv.prototype.dispose=function(){this._labelTextureSurface.dispose()};const K3=tv;var Ml=Qa.vec3;function Q3(e){this.rootNode=new lt.Node,this._triangulationResults={},this._shadersMap=lt.COMMON_SHADERS.filter(function(t){return"shadow"!==t}).reduce(function(t,r){return t[r]=lt.createShader("ecgl."+r),t},{}),this._linesShader=lt.createShader("ecgl.meshLines3D");var n={};lt.COMMON_SHADERS.forEach(function(t){n[t]=new lt.Material({shader:lt.createShader("ecgl."+t)})}),this._groundMaterials=n,this._groundMesh=new lt.Mesh({geometry:new lt.PlaneGeometry({dynamic:!0}),castShadow:!1,renderNormal:!0,$ignorePicking:!0}),this._groundMesh.rotation.rotateX(-Math.PI/2),this._labelsBuilder=new K3(512,512,e),this._labelsBuilder.getMesh().renderOrder=100,this._labelsBuilder.getMesh().material.depthTest=!1,this.rootNode.add(this._labelsBuilder.getMesh()),this._initMeshes(),this._api=e}lt.Shader.import(ZI),Q3.prototype={constructor:Q3,extrudeY:!0,update:function(e,n,t,r,i){var o=e.getData();null==r&&(r=0),null==i&&(i=o.count()),this._startIndex=r,this._endIndex=i-1,this._triangulation(e,r,i);var d=this._getShader(e.get("shading"));this._prepareMesh(e,d,t,r,i),this.rootNode.updateWorldTransform(),this._updateRegionMesh(e,t,r,i);var f=e.coordinateSystem;"geo3D"===f.type&&this._updateGroundPlane(e,f,t);var g=this;this._labelsBuilder.updateData(o,r,i),this._labelsBuilder.getLabelPosition=function(_,C,S){var k=o.getName(_),te=S;if("geo3D"===f.type){var pe=f.getRegion(k);return pe?(z=pe.getCenter(),f.dataToPoint([z[0],z[1],te])):[NaN,NaN,NaN]}var Re=g._triangulationResults[_-g._startIndex],z=g.extrudeY?[(Re.max[0]+Re.min[0])/2,Re.max[1]+te,(Re.max[2]+Re.min[2])/2]:[(Re.max[0]+Re.min[0])/2,(Re.max[1]+Re.min[1])/2,Re.max[2]+te]},this._data=o,this._labelsBuilder.updateLabels(),this._updateDebugWireframe(e),this._lastHoverDataIndex=0},_initMeshes:function(){var e=this,t=function n(){var i=new lt.Mesh({name:"Polygon",material:new lt.Material({shader:e._shadersMap.lambert}),geometry:new lt.Geometry({sortTriangles:!0,dynamic:!0}),culling:!1,ignorePicking:!0,renderNormal:!0});return Object.assign(i.geometry,$3),i}(),r=new lt.Mesh({material:new lt.Material({shader:this._linesShader}),castShadow:!1,ignorePicking:!0,$ignorePicking:!0,geometry:new $g({useNativeLine:!1})});this.rootNode.add(t),this.rootNode.add(r),t.material.define("both","VERTEX_COLOR"),t.material.define("fragment","DOUBLE_SIDED"),this._polygonMesh=t,this._linesMesh=r,this.rootNode.add(this._groundMesh)},_getShader:function(e){var n=this._shadersMap[e];return n||(n=this._shadersMap.lambert),n.__shading=e,n},_prepareMesh:function(e,n,t,r,i){for(var o=0,d=0,f=0,g=0,_=r;_<i;_++){var C=this._getRegionPolygonInfo(_),S=this._getRegionLinesInfo(_,e,this._linesMesh.geometry);o+=C.vertexCount,d+=C.triangleCount,f+=S.vertexCount,g+=S.triangleCount}var k=this._polygonMesh,z=k.geometry;["position","normal","texcoord0","color"].forEach(function(te){z.attributes[te].init(o)}),z.indices=o>65535?new Uint32Array(3*d):new Uint16Array(3*d),k.material.shader!==n&&k.material.attachShader(n,!0),lt.setMaterialFromModel(n.__shading,k.material,e,t),f>0&&(this._linesMesh.geometry.resetOffset(),this._linesMesh.geometry.setVertexCount(f),this._linesMesh.geometry.setTriangleCount(g)),this._dataIndexOfVertex=new Uint32Array(o),this._vertexRangeOfDataIndex=new Uint32Array(2*(i-r))},_updateRegionMesh:function(e,n,t,r){for(var i=e.getData(),o=0,d=0,f=!1,at=this._polygonMesh,g=this._linesMesh,_=t;_<r;_++){var C=e.getRegionModel(_),S=C.getModel("itemStyle"),k=qr.firstNotNull(Fo(i,_),S.get("color"),"#fff"),z=qr.firstNotNull(Bo(i,_),S.get("opacity"),1),te=lt.parseColor(k),pe=lt.parseColor(S.get("borderColor"));te[3]*=z,pe[3]*=z;var Me=te[3]<.99;at.material.set("color",[1,1,1,1]),f=f||Me;for(var Re=qr.firstNotNull(C.get("height",!0),e.get("regionHeight")),Fe=this._updatePolygonGeometry(e,at.geometry,_,Re,o,d,te),Oe=o;Oe<Fe.vertexOffset;Oe++)this._dataIndexOfVertex[Oe]=_;this._vertexRangeOfDataIndex[2*(_-t)]=o,this._vertexRangeOfDataIndex[2*(_-t)+1]=Fe.vertexOffset,o=Fe.vertexOffset,d=Fe.triangleOffset;var Be=S.get("borderWidth"),it=Be>0;it&&(Be*=n.getDevicePixelRatio(),this._updateLinesGeometry(g.geometry,e,_,Re,Be,e.coordinateSystem.transform)),g.invisible=!it,g.material.set({color:pe})}(at=this._polygonMesh).material.transparent=f,at.material.depthMask=!f,at.geometry.updateBoundingBox(),at.frontFace=this.extrudeY?lt.Mesh.CCW:lt.Mesh.CW,at.material.get("normalMap")&&at.geometry.generateTangents(),at.seriesIndex=e.seriesIndex,at.on("mousemove",this._onmousemove,this),at.on("mouseout",this._onmouseout,this)},_updateDebugWireframe:function(e){var n=e.getModel("debug.wireframe");if(n.get("show")){var t=lt.parseColor(n.get("lineStyle.color")||"rgba(0,0,0,0.5)"),r=qr.firstNotNull(n.get("lineStyle.width"),1),i=this._polygonMesh;i.geometry.generateBarycentric(),i.material.define("both","WIREFRAME_TRIANGLE"),i.material.set("wireframeLineColor",t),i.material.set("wireframeLineWidth",r)}},_onmousemove:function(e){var n=this._dataIndexOfVertex[e.triangle[0]];null==n&&(n=-1),n!==this._lastHoverDataIndex&&(this.downplay(this._lastHoverDataIndex),this.highlight(n),this._labelsBuilder.updateLabels([n])),this._lastHoverDataIndex=n,this._polygonMesh.dataIndex=n},_onmouseout:function(e){e.target&&(this.downplay(this._lastHoverDataIndex),this._lastHoverDataIndex=-1,this._polygonMesh.dataIndex=-1),this._labelsBuilder.updateLabels([])},_updateGroundPlane:function(e,n,t){var r=e.getModel("groundPlane",e);if(this._groundMesh.invisible=!r.get("show",!0),!this._groundMesh.invisible){var i=e.get("shading"),o=this._groundMaterials[i];o||(o=this._groundMaterials.lambert),lt.setMaterialFromModel(i,o,r,t),o.get("normalMap")&&this._groundMesh.geometry.generateTangents(),this._groundMesh.material=o,this._groundMesh.material.set("color",lt.parseColor(r.get("color"))),this._groundMesh.scale.set(n.size[0],n.size[2],1)}},_triangulation:function(e,n,t){this._triangulationResults=[];for(var r=[1/0,1/0,1/0],i=[-1/0,-1/0,-1/0],o=e.coordinateSystem,d=n;d<t;d++){for(var f=[],g=e.getRegionPolygonCoords(d),_=0;_<g.length;_++){var C=g[_].exterior,S=g[_].interiors,k=[],z=[];if(!(C.length<3)){for(var te=0,pe=0;pe<C.length;pe++)k[te++]=(Me=C[pe])[0],k[te++]=Me[1];for(pe=0;pe<S.length;pe++)if(!(S[pe].length<3)){for(var Re=k.length/2,Fe=0;Fe<S[pe].length;Fe++){var Me;k.push((Me=S[pe][Fe])[0]),k.push(Me[1])}z.push(Re)}var Oe=kie(k,z),Be=new Float64Array(k.length/2*3),it=[],at=[1/0,1/0,1/0],Ct=[-1/0,-1/0,-1/0],mt=0;for(pe=0;pe<k.length;)Ml.set(it,k[pe++],0,k[pe++]),o&&o.transform&&Ml.transformMat4(it,it,o.transform),Ml.min(at,at,it),Ml.max(Ct,Ct,it),Be[mt++]=it[0],Be[mt++]=it[1],Be[mt++]=it[2];Ml.min(r,r,at),Ml.max(i,i,Ct),f.push({points:Be,indices:Oe,min:at,max:Ct})}}this._triangulationResults.push(f)}this._geoBoundingBox=[r,i]},_getRegionPolygonInfo:function(e){for(var n=this._triangulationResults[e-this._startIndex],t=0,r=0,i=0;i<n.length;i++)t+=n[i].points.length/3,r+=n[i].indices.length/3;return{vertexCount:2*t+4*t,triangleCount:2*r+2*t}},_updatePolygonGeometry:function(e,n,t,r,i,o,d){var f=e.get("projectUVOnGround"),g=n.attributes.position,_=n.attributes.normal,C=n.attributes.texcoord0,S=n.attributes.color,k=this._triangulationResults[t-this._startIndex],z=S.value&&d,te=n.indices,pe=this.extrudeY?1:2,Me=this.extrudeY?2:1,Re=[this.rootNode.worldTransform.x.len(),this.rootNode.worldTransform.y.len(),this.rootNode.worldTransform.z.len()],Fe=Ml.mul([],this._geoBoundingBox[0],Re),Oe=Ml.mul([],this._geoBoundingBox[1],Re),Be=Math.max(Oe[0]-Fe[0],Oe[2]-Fe[2]);function at(Zi,Yi,Ra){var Ba=i;!function it(Zi,Yi,Ra){for(var Ba=Zi.points,Dw=Ba.length,Do=[],rd=[],Ps=0;Ps<Dw;Ps+=3)Do[0]=Ba[Ps],Do[pe]=Yi,Do[Me]=Ba[Ps+2],rd[0]=(Ba[Ps]*Re[0]-Fe[0])/Be,rd[1]=(Ba[Ps+2]*Re[Me]-Fe[2])/Be,g.set(i,Do),z&&S.set(i,d),C.set(i++,rd)}(Zi,Yi);for(var Dw=Zi.indices.length,Do=0;Do<Dw;Do++)te[3*o+Do]=Zi.indices[Do]+Ba;o+=Zi.indices.length/3}for(var Ct=this.extrudeY?[0,1,0]:[0,0,1],mt=Ml.negate([],Ct),Ft=0;Ft<k.length;Ft++){var nn=i,$t=k[Ft];at($t,0),at($t,r);for(var pn=$t.points.length/3,mn=0;mn<pn;mn++)_.set(nn+mn,mt),_.set(nn+mn+pn,Ct);var sn=[0,3,1,1,3,2],wn=[[],[],[],[]],Gt=[],ln=[],Xt=[],Xn=[],In=0;for(mn=0;mn<pn;mn++){for(var ai=(mn+1)%pn,Nr=($t.points[3*ai]-$t.points[3*mn])*Re[0],_i=($t.points[3*ai+2]-$t.points[3*mn+2])*Re[Me],Mr=Math.sqrt(Nr*Nr+_i*_i),Jr=0;Jr<4;Jr++){var qa=0===Jr||3===Jr,oi=3*(qa?mn:ai);wn[Jr][0]=$t.points[oi],wn[Jr][pe]=Jr>1?r:0,wn[Jr][Me]=$t.points[oi+2],g.set(i+Jr,wn[Jr]),f?(Xn[0]=($t.points[oi]*Re[0]-Fe[0])/Be,Xn[1]=($t.points[oi+2]*Re[Me]-Fe[Me])/Be):(Xn[0]=(qa?In:In+Mr)/Be,Xn[1]=(wn[Jr][pe]*Re[pe]-Fe[pe])/Be),C.set(i+Jr,Xn)}for(Ml.sub(Gt,wn[1],wn[0]),Ml.sub(ln,wn[3],wn[0]),Ml.cross(Xt,Gt,ln),Ml.normalize(Xt,Xt),Jr=0;Jr<4;Jr++)_.set(i+Jr,Xt),z&&S.set(i+Jr,d);for(Jr=0;Jr<6;Jr++)te[3*o+Jr]=sn[Jr]+i;i+=4,o+=2,In+=Mr}}return n.dirty(),{vertexOffset:i,triangleOffset:o}},_getRegionLinesInfo:function(e,n,t){var r=0,i=0;return n.getRegionModel(e).getModel("itemStyle").get("borderWidth")>0&&n.getRegionPolygonCoords(e).forEach(function(_){var C=_.exterior,S=_.interiors;r+=t.getPolylineVertexCount(C),i+=t.getPolylineTriangleCount(C);for(var k=0;k<S.length;k++)r+=t.getPolylineVertexCount(S[k]),i+=t.getPolylineTriangleCount(S[k])},this),{vertexCount:r,triangleCount:i}},_updateLinesGeometry:function(e,n,t,r,i,o){function d(_){for(var C=new Float64Array(3*_.length),S=0,k=[],z=0;z<_.length;z++)k[0]=_[z][0],k[1]=r+.1,k[2]=_[z][1],o&&Ml.transformMat4(k,k,o),C[S++]=k[0],C[S++]=k[1],C[S++]=k[2];return C}var f=[1,1,1,1];n.getRegionPolygonCoords(t).forEach(function(_){var S=_.interiors;e.addPolyline(d(_.exterior),f,i);for(var k=0;k<S.length;k++)e.addPolyline(d(S[k]),f,i)})},highlight:function(e){var n=this._data;if(n){var r=n.getItemModel(e).getModel(["emphasis","itemStyle"]),i=r.get("color"),o=qr.firstNotNull(r.get("opacity"),Bo(n,e),1);if(null==i){var d=Fo(n,e);i=bt.$_.lift(d,-.4)}null==o&&(o=Bo(n,e));var f=lt.parseColor(i);f[3]*=o,this._setColorOfDataIndex(n,e,f)}},downplay:function(e){var n=this._data;if(n){var t=n.getItemModel(e),r=qr.firstNotNull(Fo(n,e),t.get(["itemStyle","color"]),"#fff"),i=qr.firstNotNull(Bo(n,e),t.get(["itemStyle","opacity"]),1),o=lt.parseColor(r);o[3]*=i,this._setColorOfDataIndex(n,e,o)}},dispose:function(){this._labelsBuilder.dispose()},_setColorOfDataIndex:function(e,n,t){if(!(n<this._startIndex&&n>this._endIndex)){for(var r=this._vertexRangeOfDataIndex[2*(n-=this._startIndex)];r<this._vertexRangeOfDataIndex[2*n+1];r++)this._polygonMesh.geometry.attributes.color.set(r,t);this._polygonMesh.geometry.dirty(),this._api.getZr().refresh()}}};const JI=Q3,qie=bt.Ir.extend({type:"geo3D",__ecgl__:!0,init:function(e,n){this._geo3DBuilder=new JI(n),this.groupGL=new lt.Node,this._lightRoot=new lt.Node,this._sceneHelper=new Wy(this._lightRoot),this._sceneHelper.initLight(this._lightRoot),this._control=new GI({zr:n.getZr()}),this._control.init()},render:function(e,n,t){this.groupGL.add(this._geo3DBuilder.rootNode);var r=e.coordinateSystem;if(r&&r.viewGL){r.viewGL.add(this._lightRoot),e.get("show")?r.viewGL.add(this.groupGL):r.viewGL.remove(this.groupGL);var i=this._control;i.setViewGL(r.viewGL);var o=e.getModel("viewControl");i.setFromViewControlModel(o,0),this._sceneHelper.setScene(r.viewGL.scene),this._sceneHelper.updateLight(e),r.viewGL.setPostEffect(e.getModel("postEffect"),t),r.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling")),this._geo3DBuilder.update(e,n,t,0,e.getData().count());var d=r.viewGL.isLinearSpace()?"define":"undefine";this._geo3DBuilder.rootNode.traverse(function(f){f.material&&f.material[d]("fragment","SRGB_DECODE")}),i.off("update"),i.on("update",function(){t.dispatchAction({type:"geo3DChangeCamera",alpha:i.getAlpha(),beta:i.getBeta(),distance:i.getDistance(),center:i.getCenter(),from:this.uid,geo3DId:e.id})}),i.update()}},afterRender:function(e,n,t,r){var i=r.renderer;this._sceneHelper.updateAmbientCubemap(i,e,t),this._sceneHelper.updateSkybox(i,e,t)},dispose:function(){this._control.dispose(),this._geo3DBuilder.dispose()}});var Jie=H(776),eae={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]},nae=Qa.vec3,Ky=Qa.mat4,rae=[Jie.Z,function tae(e,n){if("world"===e){var t=eae[n.name];t&&n.setCenter([t[0],t[1]])}}];function q3(e,n,t,r,i){this.name=e,this.map=n,this.regionHeight=0,this.regions=[],this._nameCoordMap={},this.loadGeoJson(t,r,i),this.transform=Ky.identity(new Float64Array(16)),this.invTransform=Ky.identity(new Float64Array(16)),this.extrudeY=!0}q3.prototype={constructor:q3,type:"geo3D",dimensions:["lng","lat","alt"],containPoint:function(){},loadGeoJson:function(e,n,t){var r=bt.Nu||bt.pQ;try{this.regions=e?r(e):[]}catch(_){throw"Invalid geoJson format\n"+_}n=n||{},t=t||{};for(var i=this.regions,o={},d=0;d<i.length;d++){var f=i[d].name;i[d].name=f=t[f]||f,o[f]=i[d],this.addGeoCoord(f,i[d].getCenter());var g=n[f];g&&i[d].transformTo(g.left,g.top,g.width,g.height)}this._regionsMap=o,this._geoRect=null,rae.forEach(function(_){_(this)},this)},getGeoBoundingRect:function(){if(this._geoRect)return this._geoRect;for(var e,n=this.regions,t=0;t<n.length;t++){var r=n[t].getBoundingRect();(e=e||r.clone()).union(r)}return this._geoRect=e||new bt.Q.BoundingRect(0,0,0,0)},addGeoCoord:function(e,n){this._nameCoordMap[e]=n},getRegion:function(e){return this._regionsMap[e]},getRegionByCoord:function(e){for(var n=this.regions,t=0;t<n.length;t++)if(n[t].contain(e))return n[t]},setSize:function(e,n,t){this.size=[e,n,t];var r=this.getGeoBoundingRect(),i=e/r.width,o=-t/r.height,d=-e/2-r.x*i,f=t/2-r.y*o,g=this.extrudeY?[d,0,f]:[d,f,0],_=this.extrudeY?[i,1,o]:[i,o,1],C=this.transform;Ky.identity(C),Ky.translate(C,C,g),Ky.scale(C,C,_),Ky.invert(this.invTransform,C)},dataToPoint:function(e,n){n=n||[];var t=this.extrudeY?1:2,r=this.extrudeY?2:1,i=e[2];return isNaN(i)&&(i=0),n[0]=e[0],n[r]=e[1],n[t]=this.altitudeAxis?this.altitudeAxis.dataToCoord(i):0,n[t]+=this.regionHeight,nae.transformMat4(n,n,this.transform),n},pointToData:function(e,n){}};const k6=q3;function iae(e,n){var t=e.getBoxLayoutParams(),r=(0,$I.ME)(t,{width:n.getWidth(),height:n.getHeight()});r.y=n.getHeight()-r.y-r.height,this.viewGL.setViewport(r.x,r.y,r.width,r.height,n.getDevicePixelRatio());var i=this.getGeoBoundingRect(),o=i.width/i.height*(e.get("aspectScale")||.75),d=e.get("boxWidth"),f=e.get("boxDepth"),g=e.get("boxHeight");null==g&&(g=5),isNaN(d)&&isNaN(f)&&(d=100),isNaN(f)?f=d/o:isNaN(d)&&(d=f/o),this.setSize(d,g,f),this.regionHeight=e.get("regionHeight"),this.altitudeAxis&&this.altitudeAxis.setExtent(0,Math.max(g-this.regionHeight,0))}function aae(e,n){var t=[1/0,-1/0];if(e.eachSeries(function(i){if(i.coordinateSystem===this&&"series.map3D"!==i.type){var o=i.getData(),d=i.coordDimToDataDim("alt"),f=d&&d[0];if(f){var g=o.getDataExtent(f,!0);t[0]=Math.min(t[0],g[0]),t[1]=Math.max(t[1],g[1])}}},this),t&&isFinite(t[1]-t[0])){var r=bt._y.createScale(t,{type:"value",min:"dataMin",max:"dataMax"});this.altitudeAxis=new bt.RD("altitude",r),this.resize(this.model,n)}}var N6=0,F6={dimensions:k6.prototype.dimensions,create:function(e,n){var t=[];if(!bt.FU)throw new Error("geo3D component depends on geo component");function r(i,o){var d=F6.createGeo3D(i);i.__viewGL=i.__viewGL||new Tf,d.viewGL=i.__viewGL,i.coordinateSystem=d,d.model=i,t.push(d),d.resize=iae,d.resize(i,n),d.update=aae}return e.eachComponent("geo3D",function(i,o){r(i)}),e.eachSeriesByType("map3D",function(i,o){var d=i.get("coordinateSystem");null==d&&(d="geo3D"),"geo3D"===d&&r(i)}),e.eachSeries(function(i){if("geo3D"===i.get("coordinateSystem")){if("series.map3D"===i.type)return;var o=i.getReferringComponents("geo3D").models[0];if(o||(o=e.getComponent("geo3D")),!o)throw new Error('geo "'+qr.firstNotNull(i.get("geo3DIndex"),i.get("geo3DId"),0)+'" not found');i.coordinateSystem=o.coordinateSystem}}),t},createGeo3D:function(e){var t,n=e.get("map");return"string"==typeof n?(t=n,n=bt.FU(n)):n&&n.features&&(n={geoJson:n}),null==t&&(t="GEO_ANONYMOUS_"+N6++),new k6(t+N6++,t,n&&n.geoJson,n&&n.specialAreas,e.get("nameMap"))}};const B6=F6;function V6(e){e.registerComponentModel(Oie),e.registerComponentView(qie),e.registerAction({type:"geo3DChangeCamera",event:"geo3dcamerachanged",update:"series:updateCamera"},function(n,t){t.eachComponent({mainType:"geo3D",query:n},function(r){r.setView(n)})}),e.registerCoordinateSystem("geo3D",B6)}function z6(e,n){e.id=e.id||e.name||n+""}(0,bt.D$)(V6);var nv=bt.tF.extend({type:"globe",layoutMode:"box",coordinateSystem:null,init:function(){nv.superApply(this,"init",arguments),bt.D5.each(this.option.layers,function(e,n){bt.D5.merge(e,this.defaultLayerOption),z6(e,n)},this)},mergeOption:function(e){var n=this.option.layers;function t(d){return bt.D5.reduce(d,function(f,g,_){return z6(g,_),f[g.id]=g,f},{})}if(this.option.layers=null,nv.superApply(this,"mergeOption",arguments),n&&n.length){var r=t(e.layers),i=t(n);for(var o in r)i[o]?bt.D5.merge(i[o],r[o],!0):n.push(e.layers[o]);this.option.layers=n}bt.D5.each(this.option.layers,function(d){bt.D5.merge(d,this.defaultLayerOption)},this)},optionUpdated:function(){this.updateDisplacementHash()},defaultLayerOption:{show:!0,type:"overlay"},defaultOption:{show:!0,zlevel:-10,left:0,top:0,width:"100%",height:"100%",environment:"auto",baseColor:"#fff",baseTexture:"",heightTexture:"",displacementTexture:"",displacementScale:0,displacementQuality:"medium",globeRadius:100,globeOuterRadius:150,shading:"lambert",light:{main:{time:""}},atmosphere:{show:!1,offset:5,color:"#ffffff",glowPower:6,innerGlowPower:2},viewControl:{autoRotate:!0,panSensitivity:0,targetCoord:null},layers:[]},setDisplacementData:function(e,n,t){this.displacementData=e,this.displacementWidth=n,this.displacementHeight=t},getDisplacementTexture:function(){return this.get("displacementTexture")||this.get("heightTexture")},getDisplacemenScale:function(){var e=this.getDisplacementTexture(),n=this.get("displacementScale");return(!e||"none"===e)&&(n=0),n},hasDisplacement:function(){return this.getDisplacemenScale()>0},_displacementChanged:!0,_displacementScale:0,updateDisplacementHash:function(){var e=this.getDisplacementTexture(),n=this.getDisplacemenScale();this._displacementChanged=this._displacementTexture!==e||this._displacementScale!==n,this._displacementTexture=e,this._displacementScale=n},isDisplacementChanged:function(){return this._displacementChanged}});bt.D5.merge(nv.prototype,zI),bt.D5.merge(nv.prototype,Uy),bt.D5.merge(nv.prototype,Gy),bt.D5.merge(nv.prototype,Yy);const oae=nv;var H6=Math.PI,Oc=Math.sin,uh=Math.cos,U6=Math.tan,G6=Math.asin,W6=Math.atan2,rv=H6/180,eP=23.4397*rv;function hae(e,n){return W6(Oc(e)*uh(eP)-U6(n)*Oc(eP),uh(e))}function fae(e,n){return G6(Oc(n)*uh(eP)+uh(n)*Oc(eP)*Oc(e))}function pae(e,n,t){return W6(Oc(e),uh(e)*Oc(n)-U6(t)*uh(n))}function gae(e,n,t){return G6(Oc(n)*Oc(t)+uh(n)*uh(t)*uh(e))}var j6={};j6.getPosition=function(e,n,t){var r=rv*-t,i=rv*n,o=function dae(e){return function uae(e){return e.valueOf()/864e5-.5+2440588}(e)-2451545}(e),d=function yae(e){var n=function mae(e){return rv*(357.5291+.98560028*e)}(e),t=function _ae(e){return e+rv*(1.9148*Oc(e)+.02*Oc(2*e)+3e-4*Oc(3*e))+102.9372*rv+H6}(n);return{dec:fae(t,0),ra:hae(t,0)}}(o),f=function vae(e,n){return rv*(280.16+360.9856235*e)-n}(o,r)-d.ra;return{azimuth:pae(f,i,d.dec),altitude:gae(f,i,d.dec)}};const bae=j6;lt.Shader.import(OW),lt.Shader.import("@export ecgl.atmosphere.vertex\nattribute vec3 position: POSITION;\nattribute vec3 normal : NORMAL;\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform mat4 normalMatrix : WORLDINVERSETRANSPOSE;\n\nvarying vec3 v_Normal;\n\nvoid main() {\n v_Normal = normalize((normalMatrix * vec4(normal, 0.0)).xyz);\n gl_Position = worldViewProjection * vec4(position, 1.0);\n}\n@end\n\n\n@export ecgl.atmosphere.fragment\nuniform mat4 viewTranspose: VIEWTRANSPOSE;\nuniform float glowPower;\nuniform vec3 glowColor;\n\nvarying vec3 v_Normal;\n\nvoid main() {\n float intensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);\n gl_FragColor = vec4(glowColor, intensity * intensity);\n}\n@end");const Cae=bt.Ir.extend({type:"globe",__ecgl__:!0,_displacementScale:0,init:function(e,n){this.groupGL=new lt.Node,this._sphereGeometry=new lt.SphereGeometry({widthSegments:200,heightSegments:100,dynamic:!0}),this._overlayGeometry=new lt.SphereGeometry({widthSegments:80,heightSegments:40}),this._planeGeometry=new lt.PlaneGeometry,this._earthMesh=new lt.Mesh({renderNormal:!0}),this._atmosphereMesh=new lt.Mesh,this._atmosphereGeometry=new lt.SphereGeometry({widthSegments:80,heightSegments:40}),this._atmosphereMaterial=new lt.Material({shader:new lt.Shader(lt.Shader.source("ecgl.atmosphere.vertex"),lt.Shader.source("ecgl.atmosphere.fragment")),transparent:!0}),this._atmosphereMesh.geometry=this._atmosphereGeometry,this._atmosphereMesh.material=this._atmosphereMaterial,this._atmosphereMesh.frontFace=lt.Mesh.CW,this._lightRoot=new lt.Node,this._sceneHelper=new Wy,this._sceneHelper.initLight(this._lightRoot),this.groupGL.add(this._atmosphereMesh),this.groupGL.add(this._earthMesh),this._control=new GI({zr:n.getZr()}),this._control.init(),this._layerMeshes={}},render:function(e,n,t){var r=e.coordinateSystem,i=e.get("shading");r.viewGL.add(this._lightRoot),e.get("show")?r.viewGL.add(this.groupGL):r.viewGL.remove(this.groupGL),this._sceneHelper.setScene(r.viewGL.scene),r.viewGL.setPostEffect(e.getModel("postEffect"),t),r.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling"));var o=this._earthMesh;o.geometry=this._sphereGeometry;var d="ecgl."+i;(!o.material||o.material.shader.name!==d)&&(o.material=lt.createMaterial(d)),lt.setMaterialFromModel(i,o.material,e,t),["roughnessMap","metalnessMap","detailMap","normalMap"].forEach(function(S){var k=o.material.get(S);k&&(k.flipY=!1)}),o.material.set("color",lt.parseColor(e.get("baseColor")));var f=.99*r.radius;if(o.scale.set(f,f,f),e.get("atmosphere.show")){o.material.define("both","ATMOSPHERE_ENABLED"),this._atmosphereMesh.invisible=!1,this._atmosphereMaterial.setUniforms({glowPower:e.get("atmosphere.glowPower")||6,glowColor:e.get("atmosphere.color")||"#ffffff"}),o.material.setUniforms({glowPower:e.get("atmosphere.innerGlowPower")||2,glowColor:e.get("atmosphere.color")||"#ffffff"});var g=e.get("atmosphere.offset")||5;this._atmosphereMesh.scale.set(f+g,f+g,f+g)}else o.material.undefine("both","ATMOSPHERE_ENABLED"),this._atmosphereMesh.invisible=!0;var _=o.material.setTextureImage("diffuseMap",e.get("baseTexture"),t,{flipY:!1,anisotropic:8});_&&_.surface&&_.surface.attachToMesh(o);var C=o.material.setTextureImage("bumpMap",e.get("heightTexture"),t,{flipY:!1,anisotropic:8});C&&C.surface&&C.surface.attachToMesh(o),o.material[e.get("postEffect.enable")?"define":"undefine"]("fragment","SRGB_DECODE"),this._updateLight(e,t),this._displaceVertices(e,t),this._updateViewControl(e,t),this._updateLayers(e,t)},afterRender:function(e,n,t,r){var i=r.renderer;this._sceneHelper.updateAmbientCubemap(i,e,t),this._sceneHelper.updateSkybox(i,e,t)},_updateLayers:function(e,n){var t=e.coordinateSystem,r=e.get("layers"),i=t.radius,o=[],d=[],f=[],g=[];bt.D5.each(r,function(z){var te=new bt.Hn(z),pe=te.get("type"),Me=lt.loadTexture(te.get("texture"),n,{flipY:!1,anisotropic:8});if(Me.surface&&Me.surface.attachToMesh(this._earthMesh),"blend"===pe){var Re=te.get("blendTo"),Fe=qr.firstNotNull(te.get("intensity"),1);"emission"===Re?(f.push(Me),g.push(Fe)):(o.push(Me),d.push(Fe))}else{var Oe=te.get("id"),Be=this._layerMeshes[Oe];Be||(Be=this._layerMeshes[Oe]=new lt.Mesh({geometry:this._overlayGeometry,castShadow:!1,ignorePicking:!0})),"lambert"===te.get("shading")?(Be.material=Be.__lambertMaterial||new lt.Material({autoUpdateTextureStatus:!1,shader:lt.createShader("ecgl.lambert"),transparent:!0,depthMask:!1}),Be.__lambertMaterial=Be.material):(Be.material=Be.__colorMaterial||new lt.Material({autoUpdateTextureStatus:!1,shader:lt.createShader("ecgl.color"),transparent:!0,depthMask:!1}),Be.__colorMaterial=Be.material),Be.material.enableTexture("diffuseMap");var at=te.get("distance"),Ct=i+(at??t.radius/100);Be.scale.set(Ct,Ct,Ct),i=Ct;var mt=this._blankTexture||(this._blankTexture=lt.createBlankTexture("rgba(255, 255, 255, 0)"));Be.material.set("diffuseMap",mt),lt.loadTexture(te.get("texture"),n,{flipY:!1,anisotropic:8},function(Ft){Ft.surface&&Ft.surface.attachToMesh(Be),Be.material.set("diffuseMap",Ft),n.getZr().refresh()}),te.get("show")?this.groupGL.add(Be):this.groupGL.remove(Be)}},this);var _=this._earthMesh.material;_.define("fragment","LAYER_DIFFUSEMAP_COUNT",o.length),_.define("fragment","LAYER_EMISSIVEMAP_COUNT",f.length),_.set("layerDiffuseMap",o),_.set("layerDiffuseIntensity",d),_.set("layerEmissiveMap",f),_.set("layerEmissionIntensity",g);var C=e.getModel("debug.wireframe");if(C.get("show")){_.define("both","WIREFRAME_TRIANGLE");var S=lt.parseColor(C.get("lineStyle.color")||"rgba(0,0,0,0.5)"),k=qr.firstNotNull(C.get("lineStyle.width"),1);_.set("wireframeLineWidth",k),_.set("wireframeLineColor",S)}else _.undefine("both","WIREFRAME_TRIANGLE")},_updateViewControl:function(e,n){var t=e.coordinateSystem,r=e.getModel("viewControl"),o=this,f=this._control;f.setViewGL(t.viewGL);var _,C,g=r.get("targetCoord");null!=g&&(C=g[0]+90,_=g[1]),f.setFromViewControlModel(r,{baseDistance:t.radius,alpha:_,beta:C}),f.off("update"),f.on("update",function(){n.dispatchAction(function d(){return{type:"globeChangeCamera",alpha:f.getAlpha(),beta:f.getBeta(),distance:f.getDistance()-t.radius,center:f.getCenter(),from:o.uid,globeId:e.id}}())})},_displaceVertices:function(e,n){var t=e.get("displacementQuality"),r=e.get("debug.wireframe.show"),i=e.coordinateSystem;if(e.isDisplacementChanged()||t!==this._displacementQuality||r!==this._showDebugWireframe){this._displacementQuality=t,this._showDebugWireframe=r;var o=this._sphereGeometry,d={low:100,medium:200,high:400,ultra:800}[t]||200,f=d/2;(o.widthSegments!==d||r)&&(o.widthSegments=d,o.heightSegments=f,o.build()),this._doDisplaceVertices(o,i),r&&o.generateBarycentric()}},_doDisplaceVertices:function(e,n){var t=e.attributes.position.value,r=e.attributes.texcoord0.value,i=e.__originalPosition;(!i||i.length!==t.length)&&((i=new Float32Array(t.length)).set(t),e.__originalPosition=i);for(var o=n.displacementWidth,d=n.displacementHeight,f=n.displacementData,g=0;g<e.vertexCount;g++){var _=3*g,C=2*g,S=i[_+1],k=i[_+2],z=i[_+3],te=r[C++],pe=r[C++],Me=Math.round(te*(o-1)),Re=Math.round(pe*(d-1)),Oe=f?f[Re*o+Me]:0;t[_+1]=S+S*Oe,t[_+2]=k+k*Oe,t[_+3]=z+z*Oe}e.generateVertexNormals(),e.dirty(),e.updateBoundingBox()},_updateLight:function(e,n){var t=this._earthMesh;this._sceneHelper.updateLight(e);var r=this._sceneHelper.mainLight,i=e.get("light.main.time")||new Date,o=bae.getPosition(bt.Rx.parseDate(i),0,0),d=Math.cos(o.altitude);r.position.y=-d*Math.cos(o.azimuth),r.position.x=Math.sin(o.altitude),r.position.z=d*Math.sin(o.azimuth),r.lookAt(t.getWorldPosition())},dispose:function(e,n){this.groupGL.removeAll(),this._control.dispose()}});var wae=Qa.vec3;function J3(e){this.radius=e,this.viewGL=null,this.displacementData=null}J3.prototype={constructor:J3,dimensions:["lng","lat","alt"],type:"globe",containPoint:function(){},setDisplacementData:function(e,n,t){this.displacementData=e,this.displacementWidth=n,this.displacementHeight=t},_getDisplacementScale:function(e,n){var r=(90-n)/180*(this.displacementHeight-1),i=Math.round((e+180)/360*(this.displacementWidth-1))+Math.round(r)*this.displacementWidth;return this.displacementData[i]},dataToPoint:function(e,n){var t=e[0],r=e[1],i=e[2]||0,o=this.radius;this.displacementData&&(o*=1+this._getDisplacementScale(t,r)),this.altitudeAxis&&(o+=this.altitudeAxis.dataToCoord(i)),t=t*Math.PI/180,r=r*Math.PI/180;var d=Math.cos(r)*o;return(n=n||[])[0]=-d*Math.cos(t+Math.PI),n[1]=Math.sin(r)*o,n[2]=d*Math.sin(t+Math.PI),n},pointToData:function(e,n){var t=e[0],r=e[1],i=e[2],o=wae.len(e);t/=o,i/=o;var d=Math.asin(r/=o),f=Math.atan2(i,-t);f<0&&(f=2*Math.PI+f);var g=180*d/Math.PI,_=180*f/Math.PI-180;return(n=n||[])[0]=_,n[1]=g,n[2]=o-this.radius,this.altitudeAxis&&(n[2]=this.altitudeAxis.coordToData(n[2])),n}};const Z6=J3;function Dae(e,n){var t=e.getBoxLayoutParams(),r=(0,$I.ME)(t,{width:n.getWidth(),height:n.getHeight()});r.y=n.getHeight()-r.y-r.height,this.viewGL.setViewport(r.x,r.y,r.width,r.height,n.getDevicePixelRatio()),this.radius=e.get("globeRadius");var i=e.get("globeOuterRadius");this.altitudeAxis&&this.altitudeAxis.setExtent(0,i-this.radius)}function Mae(e,n){var t=[1/0,-1/0];if(e.eachSeries(function(i){if(i.coordinateSystem===this){var o=i.getData(),d=i.coordDimToDataDim("alt"),f=d&&d[0];if(f){var g=o.getDataExtent(f,!0);t[0]=Math.min(t[0],g[0]),t[1]=Math.max(t[1],g[1])}}},this),t&&isFinite(t[1]-t[0])){var r=bt._y.createScale(t,{type:"value",min:"dataMin",max:"dataMax"});this.altitudeAxis=new bt.RD("altitude",r),this.resize(this.model,n)}}var Tae={dimensions:Z6.prototype.dimensions,create:function(e,n){var t=[];return e.eachComponent("globe",function(r){r.__viewGL=r.__viewGL||new Tf;var i=new Z6;i.viewGL=r.__viewGL,r.coordinateSystem=i,i.model=r,t.push(i),i.resize=Dae,i.resize(r,n),i.update=Mae}),e.eachSeries(function(r){if("globe"===r.get("coordinateSystem")){var i=r.getReferringComponents("globe").models[0];if(i||(i=e.getComponent("globe")),!i)throw new Error('globe "'+qr.firstNotNull(r.get("globe3DIndex"),r.get("globe3DId"),0)+'" not found');r.coordinateSystem=i.coordinateSystem}}),e.eachComponent("globe",function(r,i){var o=r.coordinateSystem,d=r.getDisplacementTexture(),f=r.getDisplacemenScale();if(r.isDisplacementChanged()){if(r.hasDisplacement()){var g=!0;lt.loadTexture(d,n,function(_){var S=function Sae(e,n){var t=document.createElement("canvas"),r=t.getContext("2d"),i=e.width,o=e.height;t.width=i,t.height=o,r.drawImage(e,0,0,i,o);for(var d=r.getImageData(0,0,i,o).data,f=new Float32Array(d.length/4),g=0;g<d.length/4;g++)f[g]=d[4*g]/255*n;return{data:f,width:i,height:o}}(_.image,f);r.setDisplacementData(S.data,S.width,S.height),g||n.dispatchAction({type:"globeUpdateDisplacment"})}),g=!1}else o.setDisplacementData(null,0,0);o.setDisplacementData(r.displacementData,r.displacementWidth,r.displacementHeight)}}),t}};const Eae=Tae;(0,bt.D$)(function Aae(e){e.registerComponentModel(oae),e.registerComponentView(Cae),e.registerCoordinateSystem("globe",Eae),e.registerAction({type:"globeChangeCamera",event:"globecamerachanged",update:"series:updateCamera"},function(n,t){t.eachComponent({mainType:"globe",query:n},function(r){r.setView(n)})}),e.registerAction({type:"globeUpdateDisplacment",event:"globedisplacementupdated",update:"update"},function(n,t){})});var Y6=["zoom","center","pitch","bearing"],eV=bt.tF.extend({type:"mapbox3D",layoutMode:"box",coordinateSystem:null,defaultOption:{zlevel:-10,style:"mapbox://styles/mapbox/light-v9",center:[0,0],zoom:0,pitch:0,bearing:0,light:{main:{alpha:20,beta:30}},altitudeScale:1,boxHeight:"auto"},getMapboxCameraOption:function(){var e=this;return Y6.reduce(function(n,t){return n[t]=e.get(t),n},{})},setMapboxCameraOption:function(e){null!=e&&Y6.forEach(function(n){null!=e[n]&&(this.option[n]=e[n])},this)},getMapbox:function(){return this._mapbox},setMapbox:function(e){this._mapbox=e}});bt.D5.merge(eV.prototype,Uy),bt.D5.merge(eV.prototype,Gy);const Iae=eV;function Ef(e,n){if(this.id=e,this.zr=n,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;",!mapboxgl)throw new Error("Mapbox GL library must be included. See https://www.mapbox.com/mapbox-gl-js/api/");this._mapbox=new mapboxgl.Map({container:this.dom}),this._initEvents()}Ef.prototype.setUnpainted=function(){},Ef.prototype.resize=function(){this._mapbox.resize()},Ef.prototype.getMapbox=function(){return this._mapbox},Ef.prototype.clear=function(){},Ef.prototype.refresh=function(){this._mapbox.resize()};var X6=["mousedown","mouseup","click","dblclick","mousemove","mousewheel","wheel","touchstart","touchend","touchmove","touchcancel"];Ef.prototype._initEvents=function(){var e=this._mapbox.getCanvasContainer();this._handlers=this._handlers||{contextmenu:function(n){return n.preventDefault(),!1}},X6.forEach(function(n){this._handlers[n]=function(t){var r={};for(var i in t)r[i]=t[i];r.bubbles=!1;var o=new t.constructor(t.type,r);e.dispatchEvent(o)},this.zr.dom.addEventListener(n,this._handlers[n])},this),this.zr.dom.addEventListener("contextmenu",this._handlers.contextmenu)},Ef.prototype.dispose=function(){X6.forEach(function(e){this.zr.dom.removeEventListener(e,this._handlers[e])},this)};const Pae=Ef,$6="\n@export ecgl.displayShadow.vertex\n\n@import ecgl.common.transformUniforms\n\n@import ecgl.common.uv.header\n\n@import ecgl.common.attributes\n\nvarying vec3 v_WorldPosition;\n\nvarying vec3 v_Normal;\n\nvoid main()\n{\n @import ecgl.common.uv.main\n v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);\n\n v_WorldPosition = (world * vec4(position, 1.0)).xyz;\n gl_Position = worldViewProjection * vec4(position, 1.0);\n}\n\n@end\n\n\n@export ecgl.displayShadow.fragment\n\n@import ecgl.common.uv.fragmentHeader\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nuniform float roughness: 0.2;\n\n#ifdef DIRECTIONAL_LIGHT_COUNT\n@import clay.header.directional_light\n#endif\n\n@import ecgl.common.ssaoMap.header\n\n@import clay.plugin.compute_shadow_map\n\nvoid main()\n{\n float shadow = 1.0;\n\n @import ecgl.common.ssaoMap.main\n\n#if defined(DIRECTIONAL_LIGHT_COUNT) && defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];\n if(shadowEnabled)\n {\n computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);\n }\n for (int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++) {\n shadow = min(shadow, shadowContribsDir[i] * 0.5 + 0.5);\n }\n#endif\n\n shadow *= 0.5 + ao * 0.5;\n shadow = clamp(shadow, 0.0, 1.0);\n\n gl_FragColor = vec4(vec3(0.0), 1.0 - shadow);\n}\n\n@end";lt.Shader.import($6);const Rae=bt.Ir.extend({type:"mapbox3D",__ecgl__:!0,init:function(e,n){var t=n.getZr();this._zrLayer=new Pae("mapbox3D",t),t.painter.insertLayer(-1e3,this._zrLayer),this._lightRoot=new lt.Node,this._sceneHelper=new Wy(this._lightRoot),this._sceneHelper.initLight(this._lightRoot);var r=this._zrLayer.getMapbox(),i=this._dispatchInteractAction.bind(this,n,r);["zoom","rotate","drag","pitch","rotate","move"].forEach(function(o){r.on(o,i)}),this._groundMesh=new lt.Mesh({geometry:new lt.PlaneGeometry,material:new lt.Material({shader:new lt.Shader({vertex:lt.Shader.source("ecgl.displayShadow.vertex"),fragment:lt.Shader.source("ecgl.displayShadow.fragment")}),depthMask:!1}),renderOrder:-100,culling:!1,castShadow:!1,$ignorePicking:!0,renderNormal:!0})},render:function(e,n,t){var r=this._zrLayer.getMapbox(),i=e.get("style"),o=JSON.stringify(i);o!==this._oldStyleStr&&i&&r.setStyle(i),this._oldStyleStr=o,r.setCenter(e.get("center")),r.setZoom(e.get("zoom")),r.setPitch(e.get("pitch")),r.setBearing(e.get("bearing")),e.setMapbox(r);var d=e.coordinateSystem;d.viewGL.scene.add(this._lightRoot),d.viewGL.add(this._groundMesh),this._updateGroundMesh(),this._sceneHelper.setScene(d.viewGL.scene),this._sceneHelper.updateLight(e),d.viewGL.setPostEffect(e.getModel("postEffect"),t),d.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling")),this._mapbox3DModel=e},afterRender:function(e,n,t,r){var i=r.renderer;this._sceneHelper.updateAmbientCubemap(i,e,t),this._sceneHelper.updateSkybox(i,e,t),e.coordinateSystem.viewGL.scene.traverse(function(o){o.material&&(o.material.define("fragment","NORMAL_UP_AXIS",2),o.material.define("fragment","NORMAL_FRONT_AXIS",1))})},updateCamera:function(e,n,t,r){e.coordinateSystem.setCameraOption(r),this._updateGroundMesh(),t.getZr().refresh()},_dispatchInteractAction:function(e,n,t){e.dispatchAction({type:"mapbox3DChangeCamera",pitch:n.getPitch(),zoom:n.getZoom(),center:n.getCenter().toArray(),bearing:n.getBearing(),mapbox3DId:this._mapbox3DModel&&this._mapbox3DModel.id})},_updateGroundMesh:function(){if(this._mapbox3DModel){var e=this._mapbox3DModel.coordinateSystem,n=e.dataToPoint(e.center);this._groundMesh.position.set(n[0],n[1],-.001);var t=new lt.Plane(new lt.Vector3(0,0,1),0),r=e.viewGL.camera.castRay(new lt.Vector2(-1,-1)),i=e.viewGL.camera.castRay(new lt.Vector2(1,1)),o=r.intersectPlane(t),d=i.intersectPlane(t),f=o.dist(d)/e.viewGL.rootNode.scale.x;this._groundMesh.scale.set(f,f,1)}},dispose:function(e,n){this._zrLayer&&this._zrLayer.dispose(),n.getZr().painter.delLayer(-1e3)}});var Af=Qa.mat4,tV=.6435011087932844,Tl=Math.PI;function nV(){this.width=0,this.height=0,this.altitudeScale=1,this.boxHeight="auto",this.bearing=0,this.pitch=0,this.center=[0,0],this.zoom=0,this.maxPitch=60,this.zoomOffset=0}nV.prototype={constructor:nV,dimensions:["lng","lat","alt"],containPoint:function(){},setCameraOption:function(e){this.bearing=e.bearing,this.pitch=e.pitch,this.center=e.center,this.zoom=e.zoom,this._origin||(this._origin=this.projectOnTileWithScale(this.center,512)),null==this._initialZoom&&(this._initialZoom=this.zoom),this.updateTransform()},updateTransform:function(){if(this.height){var e=.5/Math.tan(tV/2)*this.height*.1,n=Math.max(Math.min(this.pitch,this.maxPitch),0)/180*Math.PI,t=tV/2,r=Math.PI/2+n,i=Math.sin(t)*e/Math.sin(Math.PI-r-t),d=1.1*(Math.cos(Math.PI/2-n)*i+e);this.pitch>50&&(d=1e3),Af.perspective(f=[],tV,this.width/this.height,1,d),this.viewGL.camera.projectionMatrix.setArray(f),this.viewGL.camera.decomposeProjectionMatrix();var f=Af.identity([]),g=this.dataToPoint(this.center);Af.scale(f,f,[1,-1,1]),Af.translate(f,f,[0,0,-e]),Af.rotateX(f,f,n),Af.rotateZ(f,f,-this.bearing/180*Math.PI),Af.translate(f,f,[-g[0]*this.getScale()*.1,-g[1]*this.getScale()*.1,0]),this.viewGL.camera.viewMatrix.array=f;var _=[];Af.invert(_,f),this.viewGL.camera.worldTransform.array=_,this.viewGL.camera.decomposeWorldTransform();var S,C=512*this.getScale();S=this.altitudeExtent&&!isNaN(this.boxHeight)?this.boxHeight/(this.altitudeExtent[1]-this.altitudeExtent[0])*this.getScale()/Math.pow(2,this._initialZoom-this.zoomOffset):C/(2*Math.PI*6378e3*Math.abs(Math.cos(this.center[1]*(Math.PI/180))))*this.altitudeScale*.1,this.viewGL.rootNode.scale.set(.1*this.getScale(),.1*this.getScale(),S)}},getScale:function(){return Math.pow(2,this.zoom-this.zoomOffset)},projectOnTile:function(e,n){return this.projectOnTileWithScale(e,512*this.getScale(),n)},projectOnTileWithScale:function(e,n,t){var f=n*(e[0]*Tl/180+Tl)/(2*Tl),g=n*(Tl-Math.log(Math.tan(Tl/4+e[1]*Tl/180*.5)))/(2*Tl);return(t=t||[])[0]=f,t[1]=g,t},unprojectFromTile:function(e,n){return this.unprojectOnTileWithScale(e,512*this.getScale(),n)},unprojectOnTileWithScale:function(e,n,t){var o=e[0]/n*(2*Tl)-Tl,d=2*(Math.atan(Math.exp(Tl-e[1]/n*(2*Tl)))-Tl/4);return(t=t||[])[0]=180*o/Tl,t[1]=180*d/Tl,t},dataToPoint:function(e,n){return(n=this.projectOnTileWithScale(e,512,n))[0]-=this._origin[0],n[1]-=this._origin[1],n[2]=isNaN(e[2])?0:e[2],isNaN(e[2])||(n[2]=e[2],this.altitudeExtent&&(n[2]-=this.altitudeExtent[0])),n}};const tP=nV;function fw(){tP.apply(this,arguments)}function K6(e,n,t){function r(o,d){var f=d.getWidth(),g=d.getHeight(),_=d.getDevicePixelRatio();this.viewGL.setViewport(0,0,f,g,_),this.width=f,this.height=g,this.altitudeScale=o.get("altitudeScale"),this.boxHeight=o.get("boxHeight")}function i(o,d){if("auto"!==this.model.get("boxHeight")){var f=[1/0,-1/0];o.eachSeries(function(g){if(g.coordinateSystem===this){var _=g.getData(),C=g.coordDimToDataDim("alt")[0];if(C){var S=_.getDataExtent(C,!0);f[0]=Math.min(f[0],S[0]),f[1]=Math.max(f[1],S[1])}}},this),f&&isFinite(f[1]-f[0])&&(this.altitudeExtent=f)}}return{dimensions:n.prototype.dimensions,create:function(o,d){var f=[];return o.eachComponent(e,function(g){var _=g.__viewGL;_||(_=g.__viewGL=new Tf).setRootNode(new lt.Node);var C=new n;C.viewGL=g.__viewGL,C.resize=r,C.resize(g,d),f.push(C),g.coordinateSystem=C,C.model=g,C.update=i}),o.eachSeries(function(g){if(g.get("coordinateSystem")===e){var _=g.getReferringComponents(e).models[0];if(_||(_=o.getComponent(e)),!_)throw new Error(e+' "'+qr.firstNotNull(g.get(e+"Index"),g.get(e+"Id"),0)+'" not found');g.coordinateSystem=_.coordinateSystem}}),t&&t(f,o,d),f}}}(fw.prototype=new tP).constructor=fw,fw.prototype.type="mapbox3D";var Oae=K6("mapbox3D",fw,function(e){e.forEach(function(n){n.setCameraOption(n.model.getMapboxCameraOption())})});const kae=Oae;(0,bt.D$)(function Nae(e){e.registerComponentModel(Iae),e.registerComponentView(Rae),e.registerCoordinateSystem("mapbox3D",kae),e.registerAction({type:"mapbox3DChangeCamera",event:"mapbox3dcamerachanged",update:"mapbox3D:updateCamera"},function(n,t){t.eachComponent({mainType:"mapbox3D",query:n},function(r){r.setMapboxCameraOption(n)})})});var Q6=["zoom","center","pitch","bearing"],rV=bt.tF.extend({type:"maptalks3D",layoutMode:"box",coordinateSystem:null,defaultOption:{zlevel:-10,urlTemplate:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/">CARTO</a>',center:[0,0],zoom:0,pitch:0,bearing:0,light:{main:{alpha:20,beta:30}},altitudeScale:1,boxHeight:"auto"},getMaptalksCameraOption:function(){var e=this;return Q6.reduce(function(n,t){return n[t]=e.get(t),n},{})},setMaptalksCameraOption:function(e){null!=e&&Q6.forEach(function(n){null!=e[n]&&(this.option[n]=e[n])},this)},getMaptalks:function(){return this._maptalks},setMaptalks:function(e){this._maptalks=e}});bt.D5.merge(rV.prototype,Uy),bt.D5.merge(rV.prototype,Gy);const Fae=rV;function If(e,n,t,r){if(this.id=e,this.zr=n,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;",!maptalks)throw new Error("Maptalks library must be included. See https://maptalks.org");this._maptalks=new maptalks.Map(this.dom,{center:t,zoom:r,doubleClickZoom:!1,fog:!1}),this._initEvents()}If.prototype.setUnpainted=function(){},If.prototype.resize=function(){this._maptalks.checkSize()},If.prototype.getMaptalks=function(){return this._maptalks},If.prototype.clear=function(){},If.prototype.refresh=function(){this._maptalks.checkSize()};var q6=["mousedown","mouseup","click","dblclick","mousemove","mousewheel","DOMMouseScroll","touchstart","touchend","touchmove","touchcancel"];If.prototype._initEvents=function(){var e=this.dom;this._handlers=this._handlers||{contextmenu:function(n){return n.preventDefault(),!1}},q6.forEach(function(n){this._handlers[n]=function(t){var r={};for(var i in t)r[i]=t[i];r.bubbles=!1;var o=new t.constructor(t.type,r);"mousewheel"===n||"DOMMouseScroll"===n?e.dispatchEvent(o):e.firstElementChild.dispatchEvent(o)},this.zr.dom.addEventListener(n,this._handlers[n])},this),this.zr.dom.addEventListener("contextmenu",this._handlers.contextmenu)},If.prototype.dispose=function(){q6.forEach(function(e){this.zr.dom.removeEventListener(e,this._handlers[e])},this),this._maptalks.remove()};const Bae=If;lt.Shader.import($6);const Vae=bt.Ir.extend({type:"maptalks3D",__ecgl__:!0,init:function(e,n){this._groundMesh=new lt.Mesh({geometry:new lt.PlaneGeometry,material:new lt.Material({shader:new lt.Shader({vertex:lt.Shader.source("ecgl.displayShadow.vertex"),fragment:lt.Shader.source("ecgl.displayShadow.fragment")}),depthMask:!1}),renderOrder:-100,culling:!1,castShadow:!1,$ignorePicking:!0,renderNormal:!0})},_initMaptalksLayer:function(e,n){var t=n.getZr();this._zrLayer=new Bae("maptalks3D",t,e.get("center"),e.get("zoom")),t.painter.insertLayer(-1e3,this._zrLayer),this._lightRoot=new lt.Node,this._sceneHelper=new Wy(this._lightRoot),this._sceneHelper.initLight(this._lightRoot);var r=this._zrLayer.getMaptalks(),i=this._dispatchInteractAction.bind(this,n,r);["zoomend","zooming","zoomstart","dragrotating","pitch","pitchend","movestart","moving","moveend","resize","touchstart","touchmove","touchend","animating"].forEach(function(o){r.on(o,i)})},render:function(e,n,t){this._zrLayer||this._initMaptalksLayer(e,t);var r=this._zrLayer.getMaptalks(),i=e.get("urlTemplate"),o=r.getBaseLayer();i!==this._oldUrlTemplate&&(o?o.setOptions({urlTemplate:i,attribution:e.get("attribution")}):(o=new maptalks.TileLayer("maptalks-echarts-gl-baselayer",{urlTemplate:i,subdomains:["a","b","c"],attribution:e.get("attribution")}),r.setBaseLayer(o))),this._oldUrlTemplate=i,r.setCenter(e.get("center")),r.setZoom(e.get("zoom"),{animation:!1}),r.setPitch(e.get("pitch")),r.setBearing(e.get("bearing")),e.setMaptalks(r);var d=e.coordinateSystem;d.viewGL.scene.add(this._lightRoot),d.viewGL.add(this._groundMesh),this._updateGroundMesh(),this._sceneHelper.setScene(d.viewGL.scene),this._sceneHelper.updateLight(e),d.viewGL.setPostEffect(e.getModel("postEffect"),t),d.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling")),this._maptalks3DModel=e},afterRender:function(e,n,t,r){var i=r.renderer;this._sceneHelper.updateAmbientCubemap(i,e,t),this._sceneHelper.updateSkybox(i,e,t),e.coordinateSystem.viewGL.scene.traverse(function(o){o.material&&(o.material.define("fragment","NORMAL_UP_AXIS",2),o.material.define("fragment","NORMAL_FRONT_AXIS",1))})},updateCamera:function(e,n,t,r){e.coordinateSystem.setCameraOption(r),this._updateGroundMesh(),t.getZr().refresh()},_dispatchInteractAction:function(e,n,t){e.dispatchAction({type:"maptalks3DChangeCamera",pitch:n.getPitch(),zoom:Hae(n.getResolution())+1,center:n.getCenter().toArray(),bearing:n.getBearing(),maptalks3DId:this._maptalks3DModel&&this._maptalks3DModel.id})},_updateGroundMesh:function(){if(this._maptalks3DModel){var e=this._maptalks3DModel.coordinateSystem,n=e.dataToPoint(e.center);this._groundMesh.position.set(n[0],n[1],-.001);var t=new lt.Plane(new lt.Vector3(0,0,1),0),r=e.viewGL.camera.castRay(new lt.Vector2(-1,-1)),i=e.viewGL.camera.castRay(new lt.Vector2(1,1)),o=r.intersectPlane(t),d=i.intersectPlane(t),f=o.dist(d)/e.viewGL.rootNode.scale.x;this._groundMesh.scale.set(f,f,1)}},dispose:function(e,n){this._zrLayer&&this._zrLayer.dispose(),n.getZr().painter.delLayer(-1e3)}}),zae=12756274*Math.PI/(256*Math.pow(2,20));function Hae(e){return 19-Math.log(e/zae)/Math.LN2}function pw(){tP.apply(this,arguments),this.maxPitch=85,this.zoomOffset=1}(pw.prototype=new tP).constructor=pw,pw.prototype.type="maptalks3D";var Uae=K6("maptalks3D",pw,function(e){e.forEach(function(n){n.setCameraOption(n.model.getMaptalksCameraOption())})});const Gae=Uae;(0,bt.D$)(function Wae(e){e.registerComponentModel(Fae),e.registerComponentView(Vae),e.registerCoordinateSystem("maptalks3D",Gae),e.registerAction({type:"maptalks3DChangeCamera",event:"maptalks3dcamerachanged",update:"maptalks3D:updateCamera"},function(n,t){t.eachComponent({mainType:"maptalks3D",query:n},function(r){r.setMaptalksCameraOption(n)})})});var jae=Qa.vec3,Zae=bt._y.dataStack.isDimensionStacked;function iV(e,n,t){for(var r=e.getDataExtent(n),i=e.getDataExtent(t),o=r[1]-r[0]||r[0],d=i[1]-i[0]||i[0],g=new Uint8Array(2500),_=0;_<e.count();_++){var C=e.get(n,_),S=e.get(t,_),k=Math.floor((C-r[0])/o*49),te=50*Math.floor((S-i[0])/d*49)+k;g[te]=g[te]||1}var pe=0;for(_=0;_<g.length;_++)g[_]&&pe++;return pe/g.length}var J6=Qa.vec3,Kae=bt._y.dataStack.isDimensionStacked;function aV(e,n){var t=Kae(e,n[2]);return{dimension:t?e.getCalculationInfo("stackResultDimension"):n[2],isStacked:t}}function eoe(e){e.registerLayout(function(n,t){n.eachSeriesByType("bar3D",function(r){var i=r.coordinateSystem,o=i&&i.type;"globe"===o?function Qae(e,n){var t=e.getData(),r=e.get("minHeight")||0,i=e.get("barSize"),o=["lng","lat","alt"].map(function(_){return e.coordDimToDataDim(_)[0]});if(null==i){var d=n.radius*Math.PI,f=iV(t,o[0],o[1]);i=[d/Math.sqrt(t.count()/f),d/Math.sqrt(t.count()/f)]}else bt.D5.isArray(i)||(i=[i,i]);var g=aV(t,o);t.each(o,function(_,C,S,k){var z=t.get(g.dimension,k),te=g.isStacked?z-S:n.altitudeAxis.scale.getExtent()[0],pe=Math.max(n.altitudeAxis.dataToCoord(S),r),Me=n.dataToPoint([_,C,te]),Re=n.dataToPoint([_,C,z]),Fe=J6.sub([],Re,Me);J6.normalize(Fe,Fe),t.setItemLayout(k,[Me,Fe,[i[0],pe,i[1]]])}),t.setLayout("orient",Ln.UP.array)}(r,i):"cartesian3D"===o?function Xae(e,n){var t=e.getData(),r=e.get("barSize");if(null==r){var o,d,i=n.size,f=n.getAxis("x"),g=n.getAxis("y");o="category"===f.type?.7*f.getBandWidth():.6*Math.round(i[0]/Math.sqrt(t.count())),d="category"===g.type?.7*g.getBandWidth():.6*Math.round(i[1]/Math.sqrt(t.count())),r=[o,d]}else bt.D5.isArray(r)||(r=[r,r]);var _=n.getAxis("z").scale.getExtent(),C=function Yae(e){var n=e[0],t=e[1];return!(n>0&&t>0||n<0&&t<0)}(_),S=["x","y","z"].map(function(te){return e.coordDimToDataDim(te)[0]}),k=Zae(t,S[2]),z=k?t.getCalculationInfo("stackResultDimension"):S[2];t.each(S,function(te,pe,Me,Re){var Fe=t.get(z,Re),Be=n.dataToPoint([te,pe,k?Fe-Me:C?0:_[0]]),it=n.dataToPoint([te,pe,Fe]),at=jae.dist(Be,it),Ct=[0,it[1]<Be[1]?-1:1,0];0===Math.abs(at)&&(at=.1),t.setItemLayout(Re,[Be,Ct,[r[0],at,r[1]]])}),t.setLayout("orient",[1,0,0])}(r,i):"geo3D"===o?function qae(e,n){var t=e.getData(),r=e.get("barSize"),i=e.get("minHeight")||0,o=["lng","lat","alt"].map(function(C){return e.coordDimToDataDim(C)[0]});if(null==r){var d=Math.min(n.size[0],n.size[2]),f=iV(t,o[0],o[1]);r=[d/Math.sqrt(t.count()/f),d/Math.sqrt(t.count()/f)]}else bt.D5.isArray(r)||(r=[r,r]);var g=[0,1,0],_=aV(t,o);t.each(o,function(C,S,k,z){var te=t.get(_.dimension,z),pe=_.isStacked?te-k:n.altitudeAxis.scale.getExtent()[0],Me=Math.max(n.altitudeAxis.dataToCoord(k),i),Re=n.dataToPoint([C,S,pe]);t.setItemLayout(z,[Re,g,[r[0],Me,r[1]]])}),t.setLayout("orient",[1,0,0])}(r,i):("mapbox3D"===o||"maptalks3D"===o)&&function Jae(e,n){var t=e.getData(),r=e.coordDimToDataDim("lng")[0],i=e.coordDimToDataDim("lat")[0],o=e.coordDimToDataDim("alt")[0],d=e.get("barSize"),f=e.get("minHeight")||0;if(null==d){var g=t.getDataExtent(r),_=t.getDataExtent(i),C=n.dataToPoint([g[0],_[0]]),S=n.dataToPoint([g[1],_[1]]),k=Math.min(Math.abs(C[0]-S[0]),Math.abs(C[1]-S[1]))||1,z=iV(t,r,i);d=[k/Math.sqrt(t.count()/z),k/Math.sqrt(t.count()/z)]}else bt.D5.isArray(d)||(d=[d,d]),d[0]/=n.getScale()/16,d[1]/=n.getScale()/16;var te=[0,0,1],pe=[r,i,o],Me=aV(t,pe);t.each(pe,function(Re,Fe,Oe,Be){var it=t.get(Me.dimension,Be),Ct=n.dataToPoint([Re,Fe,Me.isStacked?it-Oe:0]),mt=n.dataToPoint([Re,Fe,it]),Ft=Math.max(mt[2]-Ct[2],f);t.setItemLayout(Be,[Ct,te,[d[0],Ft,d[1]]])}),t.setLayout("orient",[1,0,0])}(r,i)})})}var oV={getFormattedLabel:function(e,n,t,r,i){t=t||"normal";var d=e.getData(r).getItemModel(n),f=e.getDataParams(n,r);null!=i&&f.value instanceof Array&&(f.value=f.value[i]);var _,g=d.get("normal"===t?["label","formatter"]:["emphasis","label","formatter"]);return null==g&&(g=d.get(["label","formatter"])),"function"==typeof g?(f.status=t,_=g(f)):"string"==typeof g&&(_=bt.WU.formatTpl(g,f)),_},normalizeToArray:function(e){return e instanceof Array?e:null==e?[]:[e]}};const qy=oV;function gw(e,n,t){var i=e.getData(),o=e.getRawValue(n),d=bt.D5.isArray(o)?function r(S){var z=[],te=function toe(e,n){var t=[];return bt.D5.each(e.dimensions,function(r){var i=e.getDimensionInfo(r),d=i.otherDims[n];null!=d&&!1!==d&&(t[d]=i.name)}),t}(i,"tooltip");function pe(Me,Re){var Fe=i.getDimensionInfo(Re);if(Fe&&!1!==Fe.otherDims.tooltip){var Oe=Fe.type,Be="- "+(Fe.tooltipName||Fe.name)+": "+("ordinal"===Oe?Me+"":"time"===Oe?t?"":bt.WU.formatTime("yyyy/MM/dd hh:mm:ss",Me):bt.WU.addCommas(Me));Be&&z.push(bt.WU.encodeHTML(Be))}}return te.length?bt.D5.each(te,function(Me){pe(i.get(Me,n),Me)}):bt.D5.each(S,pe),"<br/>"+z.join("<br/>")}(o):bt.WU.encodeHTML(bt.WU.addCommas(o)),f=i.getName(n),g=Fo(i,n);bt.D5.isObject(g)&&g.colorStops&&(g=(g.colorStops[0]||{}).color);var _=bt.WU.getTooltipMarker(g=g||"transparent"),C=e.name;return"\0-"===C&&(C=""),C=C?bt.WU.encodeHTML(C)+(t?": ":"<br/>"):"",t?_+C+d:C+_+(f?bt.WU.encodeHTML(f)+": "+d:d)}function nP(e,n,t){t=t||e.getSource();var r=n||bt.wL(e.get("coordinateSystem"))||["x","y","z"],i=bt._y.createDimensions(t,{dimensionsDefine:t.dimensionsDefine||e.get("dimensions"),encodeDefine:t.encodeDefine||e.get("encode"),coordDimensions:r.map(function(f){var g=e.getReferringComponents(f+"Axis3D").models[0];return{type:g&&"category"===g.get("type")?"ordinal":"float",name:f}})});"cartesian3D"===e.get("coordinateSystem")&&i.forEach(function(f){if(r.indexOf(f.coordDim)>=0){var g=e.getReferringComponents(f.coordDim+"Axis3D").models[0];g&&"category"===g.get("type")&&(f.ordinalMeta=g.getOrdinalMeta())}});var o=bt._y.dataStack.enableDataStack(e,i,{byIndex:!0,stackedCoordDimension:"z"}),d=new bt.aV(i,e);return d.setCalculationInfo(o),d.initData(t),d}var ej=bt.wJ.extend({type:"series.bar3D",dependencies:["globe"],visualStyleAccessPathvisu:"itemStyle",getInitialData:function(e,n){return nP(this)},getFormattedLabel:function(e,n,t,r){var i=qy.getFormattedLabel(this,e,n,t,r);return null==i&&(i=this.getData().get("z",e)),i},formatTooltip:function(e){return gw(this,e)},defaultOption:{coordinateSystem:"cartesian3D",globeIndex:0,grid3DIndex:0,zlevel:-10,bevelSize:0,bevelSmoothness:2,onGridPlane:"xy",shading:"color",minHeight:0,itemStyle:{opacity:1},label:{show:!1,distance:2,textStyle:{fontSize:14,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:3}},emphasis:{label:{show:!0}},animationDurationUpdate:500}});bt.D5.merge(ej.prototype,Yy);const noe=ej;var Pa=Qa.vec3,roe=Qa.mat3,sV=Di.extend(function(){return{attributes:{position:new Di.Attribute("position","float",3,"POSITION"),normal:new Di.Attribute("normal","float",3,"NORMAL"),color:new Di.Attribute("color","float",4,"COLOR"),prevPosition:new Di.Attribute("prevPosition","float",3),prevNormal:new Di.Attribute("prevNormal","float",3)},dynamic:!0,enableNormal:!1,bevelSize:1,bevelSegments:0,_dataIndices:null,_vertexOffset:0,_triangleOffset:0}},{resetOffset:function(){this._vertexOffset=0,this._triangleOffset=0},setBarCount:function(e){var n=this.enableNormal,t=this.getBarVertexCount()*e,r=this.getBarTriangleCount()*e;this.vertexCount!==t&&(this.attributes.position.init(t),n?this.attributes.normal.init(t):this.attributes.normal.value=null,this.attributes.color.init(t)),this.triangleCount!==r&&(this.indices=t>65535?new Uint32Array(3*r):new Uint16Array(3*r),this._dataIndices=new Uint32Array(t))},getBarVertexCount:function(){var e=this.bevelSize>0?this.bevelSegments:0;return e>0?this._getBevelBarVertexCount(e):this.enableNormal?24:8},getBarTriangleCount:function(){var e=this.bevelSize>0?this.bevelSegments:0;return e>0?this._getBevelBarTriangleCount(e):12},_getBevelBarVertexCount:function(e){return 4*(e+1)*(e+1)*2},_getBevelBarTriangleCount:function(e){return(4*e+3+1)*(2*e+1)*2+4},setColor:function(e,n){for(var t=this.getBarVertexCount(),i=t*(e+1),o=t*e;o<i;o++)this.attributes.color.set(o,n);this.dirtyAttribute("color")},getDataIndexOfVertex:function(e){return this._dataIndices?this._dataIndices[e]:null},addBar:function(){for(var e=Pa.create,n=Pa.scaleAndAdd,t=e(),r=e(),i=e(),o=e(),d=e(),f=e(),g=e(),_=[],C=[],S=0;S<8;S++)_[S]=e();var k=[[0,1,5,4],[2,3,7,6],[4,5,6,7],[3,2,1,0],[0,4,7,3],[1,2,6,5]],z=[0,1,2,0,2,3],te=[];for(S=0;S<k.length;S++)for(var pe=k[S],Me=0;Me<2;Me++){for(var Re=[],Fe=0;Fe<3;Fe++)Re.push(pe[z[3*Me+Fe]]);te.push(Re)}return function(Oe,Be,it,at,Ct,mt){var Ft=this._vertexOffset;if(this.bevelSize>0&&this.bevelSegments>0)this._addBevelBar(Oe,Be,it,at,this.bevelSize,this.bevelSegments,Ct);else{Pa.copy(i,Be),Pa.normalize(i,i),Pa.cross(o,it,i),Pa.normalize(o,o),Pa.cross(r,i,o),Pa.normalize(o,o),Pa.negate(d,r),Pa.negate(f,i),Pa.negate(g,o),n(_[0],Oe,r,at[0]/2),n(_[0],_[0],o,at[2]/2),n(_[1],Oe,r,at[0]/2),n(_[1],_[1],g,at[2]/2),n(_[2],Oe,d,at[0]/2),n(_[2],_[2],g,at[2]/2),n(_[3],Oe,d,at[0]/2),n(_[3],_[3],o,at[2]/2),n(t,Oe,i,at[1]),n(_[4],t,r,at[0]/2),n(_[4],_[4],o,at[2]/2),n(_[5],t,r,at[0]/2),n(_[5],_[5],g,at[2]/2),n(_[6],t,d,at[0]/2),n(_[6],_[6],g,at[2]/2),n(_[7],t,d,at[0]/2),n(_[7],_[7],o,at[2]/2);var nn=this.attributes;if(this.enableNormal){C[0]=r,C[1]=d,C[2]=i,C[3]=f,C[4]=o,C[5]=g;for(var $t=this._vertexOffset,pn=0;pn<k.length;pn++){for(var mn=3*this._triangleOffset,sn=0;sn<6;sn++)this.indices[mn++]=$t+z[sn];$t+=4,this._triangleOffset+=2}for(pn=0;pn<k.length;pn++){var wn=C[pn];for(sn=0;sn<4;sn++)nn.position.set(this._vertexOffset,_[k[pn][sn]]),nn.normal.set(this._vertexOffset,wn),nn.color.set(this._vertexOffset++,Ct)}}else{for(pn=0;pn<te.length;pn++){for(mn=3*this._triangleOffset,sn=0;sn<3;sn++)this.indices[mn+sn]=te[pn][sn]+this._vertexOffset;this._triangleOffset++}for(pn=0;pn<_.length;pn++)nn.position.set(this._vertexOffset,_[pn]),nn.color.set(this._vertexOffset++,Ct)}}var ln=this._vertexOffset;for(pn=Ft;pn<ln;pn++)this._dataIndices[pn]=mt}}(),_addBevelBar:function(){var e=Pa.create(),n=Pa.create(),t=Pa.create(),r=roe.create(),i=[],o=[1,-1,-1,1],d=[1,1,-1,-1],f=[2,0];return function(g,_,C,S,k,z,te){Pa.copy(n,_),Pa.normalize(n,n),Pa.cross(t,C,n),Pa.normalize(t,t),Pa.cross(e,n,t),Pa.normalize(t,t),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=n[0],r[4]=n[1],r[5]=n[2],r[6]=t[0],r[7]=t[1],r[8]=t[2],k=Math.min(S[0],S[2])/2*k;for(var pe=0;pe<3;pe++)i[pe]=Math.max(S[pe]-2*k,0);var Me=(S[0]-i[0])/2,Re=(S[1]-i[1])/2,Fe=(S[2]-i[2])/2,Oe=[],Be=[],it=this._vertexOffset,at=[];for(pe=0;pe<2;pe++){at[pe]=at[pe]=[];for(var Ct=0;Ct<=z;Ct++)for(var mt=0;mt<4;mt++){(0===Ct&&0===pe||1===pe&&Ct===z)&&at[pe].push(it);for(var Ft=0;Ft<=z;Ft++){var nn=Ft/z*Math.PI/2+Math.PI/2*mt,$t=Ct/z*Math.PI/2+Math.PI/2*pe;Be[0]=Me*Math.cos(nn)*Math.sin($t),Be[1]=Re*Math.cos($t),Be[2]=Fe*Math.sin(nn)*Math.sin($t),Oe[0]=Be[0]+o[mt]*i[0]/2,Oe[1]=Be[1]+Re+f[pe]*i[1]/2,Oe[2]=Be[2]+d[mt]*i[2]/2,Math.abs(Me-Re)<1e-6&&Math.abs(Re-Fe)<1e-6||(Be[0]/=Me*Me,Be[1]/=Re*Re,Be[2]/=Fe*Fe),Pa.normalize(Be,Be),Pa.transformMat3(Oe,Oe,r),Pa.transformMat3(Be,Be,r),Pa.add(Oe,Oe,g),this.attributes.position.set(it,Oe),this.enableNormal&&this.attributes.normal.set(it,Be),this.attributes.color.set(it,te),it++}}}var pn=4*z+3,mn=2*z+1,sn=pn+1;for(mt=0;mt<mn;mt++)for(pe=0;pe<=pn;pe++){var wn=mt*sn+pe+this._vertexOffset,Gt=mt*sn+(pe+1)%sn+this._vertexOffset,ln=(mt+1)*sn+(pe+1)%sn+this._vertexOffset,Xt=(mt+1)*sn+pe+this._vertexOffset;this.setTriangleIndices(this._triangleOffset++,[ln,wn,Gt]),this.setTriangleIndices(this._triangleOffset++,[ln,Xt,wn])}this.setTriangleIndices(this._triangleOffset++,[at[0][0],at[0][2],at[0][1]]),this.setTriangleIndices(this._triangleOffset++,[at[0][0],at[0][3],at[0][2]]),this.setTriangleIndices(this._triangleOffset++,[at[1][0],at[1][1],at[1][2]]),this.setTriangleIndices(this._triangleOffset++,[at[1][0],at[1][2],at[1][3]]),this._vertexOffset=it}}()});bt.D5.defaults(sV.prototype,aw),bt.D5.defaults(sV.prototype,$3);const ioe=sV;var aoe=Qa.vec3;const ooe=bt.TA.extend({type:"bar3D",__ecgl__:!0,init:function(e,n){this.groupGL=new lt.Node,this._api=n,this._labelsBuilder=new K3(256,256,n);var t=this;this._labelsBuilder.getLabelPosition=function(r,i,o){if(t._data){var d=t._data.getItemLayout(r);return aoe.scaleAndAdd([],d[0],d[1],o+d[2][1])}return[0,0]},this._labelsBuilder.getMesh().renderOrder=100},render:function(e,n,t){var r=this._prevBarMesh;this._prevBarMesh=this._barMesh,this._barMesh=r,this._barMesh||(this._barMesh=new lt.Mesh({geometry:new ioe,shadowDepthMaterial:new lt.Material({shader:new lt.Shader(lt.Shader.source("ecgl.sm.depth.vertex"),lt.Shader.source("ecgl.sm.depth.fragment"))}),culling:"cartesian3D"===e.coordinateSystem.type,renderOrder:10,renderNormal:!0})),this.groupGL.remove(this._prevBarMesh),this.groupGL.add(this._barMesh),this.groupGL.add(this._labelsBuilder.getMesh());var i=e.coordinateSystem;if(this._doRender(e,t),i&&i.viewGL){i.viewGL.add(this.groupGL);var o=i.viewGL.isLinearSpace()?"define":"undefine";this._barMesh.material[o]("fragment","SRGB_DECODE")}this._data=e.getData(),this._labelsBuilder.updateData(this._data),this._labelsBuilder.updateLabels(),this._updateAnimation(e)},_updateAnimation:function(e){lt.updateVertexAnimation([["prevPosition","position"],["prevNormal","normal"]],this._prevBarMesh,this._barMesh,e)},_doRender:function(e,n){var t=e.getData(),r=e.get("shading"),i="color"!==r,o=this,d=this._barMesh,f="ecgl."+r;(!d.material||d.material.shader.name!==f)&&(d.material=lt.createMaterial(f,["VERTEX_COLOR"])),lt.setMaterialFromModel(r,d.material,e,n),d.geometry.enableNormal=i,d.geometry.resetOffset();var g=e.get("bevelSize"),_=e.get("bevelSmoothness");d.geometry.bevelSegments=_,d.geometry.bevelSize=g;var C=[],S=new Float32Array(4*t.count()),k=0,Me=0,z=!1;t.each(function(Fe){if(t.hasValue(Fe)){var Oe=Fo(t,Fe),Be=Bo(t,Fe);null==Be&&(Be=1),lt.parseColor(Oe,C),C[3]*=Be,S[k++]=C[0],S[k++]=C[1],S[k++]=C[2],S[k++]=C[3],C[3]>0&&(Me++,C[3]<.99&&(z=!0))}}),d.geometry.setBarCount(Me);var te=t.getLayout("orient"),pe=this._barIndexOfData=new Int32Array(t.count());Me=0,t.each(function(Fe){if(t.hasValue(Fe)){var Oe=t.getItemLayout(Fe),Be=Oe[0],it=Oe[1],at=Oe[2],Ct=4*Fe;C[0]=S[Ct++],C[1]=S[Ct++],C[2]=S[Ct++],C[3]=S[Ct++],C[3]>0&&(o._barMesh.geometry.addBar(Be,it,te,at,C,Fe),pe[Fe]=Me++)}else pe[Fe]=-1}),d.geometry.dirty(),d.geometry.updateBoundingBox();var Re=d.material;Re.transparent=z,Re.depthMask=!z,d.geometry.sortTriangles=z,this._initHandler(e,n)},_initHandler:function(e,n){var t=e.getData(),r=this._barMesh,i="cartesian3D"===e.coordinateSystem.type;r.seriesIndex=e.seriesIndex;var o=-1;r.off("mousemove"),r.off("mouseout"),r.on("mousemove",function(d){var f=r.geometry.getDataIndexOfVertex(d.triangle[0]);f!==o&&(this._downplay(o),this._highlight(f),this._labelsBuilder.updateLabels([f]),i&&n.dispatchAction({type:"grid3DShowAxisPointer",value:[t.get("x",f),t.get("y",f),t.get("z",f,!0)]})),o=f,r.dataIndex=f},this),r.on("mouseout",function(d){this._downplay(o),this._labelsBuilder.updateLabels(),o=-1,r.dataIndex=-1,i&&n.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_highlight:function(e){var n=this._data;if(n){var t=this._barIndexOfData[e];if(!(t<0)){var i=n.getItemModel(e).getModel("emphasis.itemStyle"),o=i.get("color"),d=i.get("opacity");if(null==o){var f=Fo(n,e);o=bt.$_.lift(f,-.4)}null==d&&(d=Bo(n,e));var g=lt.parseColor(o);g[3]*=d,this._barMesh.geometry.setColor(t,g),this._api.getZr().refresh()}}},_downplay:function(e){var n=this._data;if(n){var t=this._barIndexOfData[e];if(!(t<0)){var r=Fo(n,e),i=Bo(n,e),o=lt.parseColor(r);o[3]*=i,this._barMesh.geometry.setColor(t,o),this._api.getZr().refresh()}}},highlight:function(e,n,t,r){this._toggleStatus("highlight",e,n,t,r)},downplay:function(e,n,t,r){this._toggleStatus("downplay",e,n,t,r)},_toggleStatus:function(e,n,t,r,i){var o=n.getData(),d=qr.queryDataIndex(o,i),f=this;null!=d?bt.D5.each(qy.normalizeToArray(d),function(g){"highlight"===e?this._highlight(g):this._downplay(g)},this):o.each(function(g){"highlight"===e?f._highlight(g):f._downplay(g)})},remove:function(){this.groupGL.removeAll()},dispose:function(){this._labelsBuilder.dispose(),this.groupGL.removeAll()}});(0,bt.D$)(function soe(e){e.registerChartView(ooe),e.registerSeriesModel(noe),eoe(e),e.registerProcessor(function(n,t){n.eachSeriesByType("bar3d",function(r){var i=r.getData();i.filterSelf(function(o){return i.hasValue(o)})})})});var loe=bt.wJ.extend({type:"series.line3D",dependencies:["grid3D"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",getInitialData:function(e,n){return nP(this)},formatTooltip:function(e){return gw(this,e)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,grid3DIndex:0,lineStyle:{width:2},animationDurationUpdate:500}});const coe=loe;var uoe=H(4443),doe=Qa.vec3;lt.Shader.import(ZI);const hoe=bt.TA.extend({type:"line3D",__ecgl__:!0,init:function(e,n){this.groupGL=new lt.Node,this._api=n},render:function(e,n,t){var r=this._prevLine3DMesh;this._prevLine3DMesh=this._line3DMesh,this._line3DMesh=r,this._line3DMesh||(this._line3DMesh=new lt.Mesh({geometry:new $g({useNativeLine:!1,sortTriangles:!0}),material:new lt.Material({shader:lt.createShader("ecgl.meshLines3D")}),renderOrder:10}),this._line3DMesh.geometry.pick=this._pick.bind(this)),this.groupGL.remove(this._prevLine3DMesh),this.groupGL.add(this._line3DMesh);var i=e.coordinateSystem;if(i&&i.viewGL){i.viewGL.add(this.groupGL);var o=i.viewGL.isLinearSpace()?"define":"undefine";this._line3DMesh.material[o]("fragment","SRGB_DECODE")}this._doRender(e,t),this._data=e.getData(),this._camera=i.viewGL.camera,this.updateCamera(),this._updateAnimation(e)},updateCamera:function(){this._updateNDCPosition()},_doRender:function(e,n){var t=e.getData(),r=this._line3DMesh;r.geometry.resetOffset();var i=t.getLayout("points"),o=[],d=new Float32Array(i.length/3*4),f=0,g=!1;t.each(function(S){var k=Fo(t,S),z=Bo(t,S);null==z&&(z=1),lt.parseColor(k,o),o[3]*=z,d[f++]=o[0],d[f++]=o[1],d[f++]=o[2],d[f++]=o[3],o[3]<.99&&(g=!0)}),r.geometry.setVertexCount(r.geometry.getPolylineVertexCount(i)),r.geometry.setTriangleCount(r.geometry.getPolylineTriangleCount(i)),r.geometry.addPolyline(i,d,qr.firstNotNull(e.get("lineStyle.width"),1)),r.geometry.dirty(),r.geometry.updateBoundingBox();var _=r.material;_.transparent=g,_.depthMask=!g;var C=e.getModel("debug.wireframe");C.get("show")?(r.geometry.createAttribute("barycentric","float",3),r.geometry.generateBarycentric(),r.material.set("both","WIREFRAME_TRIANGLE"),r.material.set("wireframeLineColor",lt.parseColor(C.get("lineStyle.color")||"rgba(0,0,0,0.5)")),r.material.set("wireframeLineWidth",qr.firstNotNull(C.get("lineStyle.width"),1))):r.material.set("both","WIREFRAME_TRIANGLE"),this._points=i,this._initHandler(e,n)},_updateAnimation:function(e){lt.updateVertexAnimation([["prevPosition","position"],["prevPositionPrev","positionPrev"],["prevPositionNext","positionNext"]],this._prevLine3DMesh,this._line3DMesh,e)},_initHandler:function(e,n){var t=e.getData(),r=e.coordinateSystem,i=this._line3DMesh,o=-1;i.seriesIndex=e.seriesIndex,i.off("mousemove"),i.off("mouseout"),i.on("mousemove",function(d){var f=r.pointToData(d.point.array),g=t.indicesOfNearest("x",f[0])[0];g!==o&&(n.dispatchAction({type:"grid3DShowAxisPointer",value:[t.get("x",g),t.get("y",g),t.get("z",g)]}),i.dataIndex=g),o=g},this),i.on("mouseout",function(d){o=-1,i.dataIndex=-1,n.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_updateNDCPosition:function(){var e=new ir,n=this._camera;ir.multiply(e,n.projectionMatrix,n.viewMatrix);var t=this._positionNDC,r=this._points,i=r.length/3;(!t||t.length/2!==i)&&(t=this._positionNDC=new Float32Array(2*i));for(var o=[],d=0;d<i;d++){var f=3*d,g=2*d;o[0]=r[f],o[1]=r[f+1],o[2]=r[f+2],o[3]=1,doe.transformMat4(o,o,e.array),t[g]=o[0]/o[3],t[g+1]=o[1]/o[3]}},_pick:function(e,n,t,r,i,o){var d=this._positionNDC,g=this._data.hostModel.get("lineStyle.width"),_=-1,k=.5*t.viewport.width,z=.5*t.viewport.height;e=(e+1)*k,n=(n+1)*z;for(var te=1;te<d.length/2;te++){var pe=(d[2*(te-1)]+1)*k,Me=(d[2*(te-1)+1]+1)*z,Re=(d[2*te]+1)*k,Fe=(d[2*te+1]+1)*z;uoe.m(pe,Me,Re,Fe,g,e,n)&&(_=(pe-e)*(pe-e)+(Me-n)*(Me-n)<(Re-e)*(Re-e)+(Fe-n)*(Fe-n)?te-1:te)}if(_>=0){var it=3*_,at=new Ln(this._points[it],this._points[it+1],this._points[it+2]);o.push({dataIndex:_,point:at,pointWorld:at.clone(),target:this._line3DMesh,distance:this._camera.getWorldPosition().dist(at)})}},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}});(0,bt.D$)(function foe(e){e.registerChartView(hoe),e.registerSeriesModel(coe),e.registerLayout(function(n,t){n.eachSeriesByType("line3D",function(r){var i=r.getData(),o=r.coordinateSystem;if(o){if("cartesian3D"!==o.type)return;var d=new Float32Array(3*i.count()),f=[],g=[],C=o.dimensions.map(function(S){return r.coordDimToDataDim(S)[0]});o&&i.each(C,function(S,k,z,te){f[0]=S,f[1]=k,f[2]=z,o.dataToPoint(f,g),d[3*te]=g[0],d[3*te+1]=g[1],d[3*te+2]=g[2]}),i.setLayout("points",d)}})})});const poe=bt.wJ.extend({type:"series.scatter3D",dependencies:["globe","grid3D","geo3D"],visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,getInitialData:function(e,n){return nP(this)},getFormattedLabel:function(e,n,t,r){var i=qy.getFormattedLabel(this,e,n,t,r);if(null==i){var o=this.getData();i=o.get(o.dimensions[o.dimensions.length-1],e)}return i},formatTooltip:function(e){return gw(this,e)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,progressive:1e5,progressiveThreshold:1e5,grid3DIndex:0,globeIndex:0,symbol:"circle",symbolSize:10,blendMode:"source-over",label:{show:!1,position:"right",distance:5,textStyle:{fontSize:14,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:3}},itemStyle:{opacity:.8},emphasis:{label:{show:!0}},animationDurationUpdate:500}});function lV(e,r,t){(r=r||document.createElement("canvas")).width=e,r.height=e;var i=r.getContext("2d");return t&&t(i),r}var cV={getMarginByStyle:function(e){var n=e.minMargin||0,t=0;e.stroke&&"none"!==e.stroke&&(t=e.lineWidth??1);var r=e.shadowBlur||0,i=e.shadowOffsetX||0,o=e.shadowOffsetY||0,d={};return d.left=Math.max(t/2,-i+r,n),d.right=Math.max(t/2,i+r,n),d.top=Math.max(t/2,-o+r,n),d.bottom=Math.max(t/2,o+r,n),d},createSymbolSprite:function(e,n,t,r){var i=function goe(e,n,t,r){bt.D5.isArray(n)||(n=[n,n]);var i=cV.getMarginByStyle(t,r),o=n[0]+i.left+i.right,d=n[1]+i.top+i.bottom,f=bt._y.createSymbol(e,0,0,n[0],n[1]),g=Math.max(o,d);f.x=i.left,f.y=i.top,o>d?f.y+=(g-d)/2:f.x+=(g-o)/2;var _=f.getBoundingRect();return f.x-=_.x,f.y-=_.y,f.setStyle(t),f.update(),f.__size=g,f}(e,n,t),o=cV.getMarginByStyle(t);return{image:lV(i.__size,r,function(d){bt.z$(d,i)}),margin:o}},createSDFFromCanvas:function(e,n,t,r){return lV(n,r,function(i){var d=e.getContext("2d").getImageData(0,0,e.width,e.height);i.putImageData(function voe(e,n,t){var r=n.width,i=n.height,o=e.canvas.width,d=e.canvas.height,f=r/o,g=i/d;function _(Re){return Re<128?1:-1}function C(Re,Fe){var Oe=1/0;Re=Math.floor(Re*f),Fe=Math.floor(Fe*g);for(var at=_(n.data[4*(Fe*r+Re)]),Ct=Math.max(Fe-t,0);Ct<Math.min(Fe+t,i);Ct++)for(var mt=Math.max(Re-t,0);mt<Math.min(Re+t,r);mt++){var $t=mt-Re,pn=Ct-Fe;if(at!==_(n.data[4*(Ct*r+mt)])){var mn=$t*$t+pn*pn;mn<Oe&&(Oe=mn)}}return at*Math.sqrt(Oe)}for(var S=e.createImageData(o,d),k=0;k<d;k++)for(var z=0;z<o;z++){var pe=C(z,k)/t*.5+.5,Me=4*(k*o+z);S.data[Me++]=255*(1-pe),S.data[Me++]=255*(1-pe),S.data[Me++]=255*(1-pe),S.data[Me++]=255}return S}(i,d,t),0,0)})},createSimpleSprite:function(e,n){return lV(e,n,function(t){var r=e/2;t.beginPath(),t.arc(r,r,60,0,2*Math.PI,!1),t.closePath();var i=t.createRadialGradient(r,r,0,r,r,r);i.addColorStop(0,"rgba(255, 255, 255, 1)"),i.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),i.addColorStop(1,"rgba(255, 255, 255, 0)"),t.fillStyle=i,t.fill()})}};const tj=cV;var nj=Qa.vec3;const moe={needsSortVertices:function(){return this.sortVertices},needsSortVerticesProgressively:function(){return this.needsSortVertices()&&this.vertexCount>=2e4},doSortVertices:function(e,n){var t=this.indices,r=nj.create();if(!t){t=this.indices=this.vertexCount>65535?new Uint32Array(this.vertexCount):new Uint16Array(this.vertexCount);for(var i=0;i<t.length;i++)t[i]=i}if(0===n){var f,o=this.attributes.position,d=(e=e.array,0);for((!this._zList||this._zList.length!==this.vertexCount)&&(this._zList=new Float32Array(this.vertexCount)),i=0;i<this.vertexCount;i++){o.get(i,r);var g=nj.sqrDist(r,e);isNaN(g)&&(g=1e7,d++),0===i?(f=g,g=0):g-=f,this._zList[i]=g}this._noneCount=d}if(this.vertexCount<2e4)0===n&&this._simpleSort(this._noneCount/this.vertexCount>.05);else for(i=0;i<3;i++)this._progressiveQuickSort(3*n+i);this.dirtyIndices()},_simpleSort:function(e){var n=this._zList,t=this.indices;function r(i,o){return n[o]-n[i]}e?Array.prototype.sort.call(t,r):qI.sort(t,r,0,t.length-1)},_progressiveQuickSort:function(e){var n=this._zList,t=this.indices;this._quickSort=this._quickSort||new qI,this._quickSort.step(t,function(r,i){return n[i]-n[r]},e)}};var uV=Qa.vec4;lt.Shader.import("@export ecgl.sdfSprite.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform float elapsedTime : 0;\n\nattribute vec3 position : POSITION;\n\n#ifdef VERTEX_SIZE\nattribute float size;\n#else\nuniform float u_Size;\n#endif\n\n#ifdef VERTEX_COLOR\nattribute vec4 a_FillColor: COLOR;\nvarying vec4 v_Color;\n#endif\n\n#ifdef VERTEX_ANIMATION\nattribute vec3 prevPosition;\nattribute float prevSize;\nuniform float percent : 1.0;\n#endif\n\n\n#ifdef POSITIONTEXTURE_ENABLED\nuniform sampler2D positionTexture;\n#endif\n\nvarying float v_Size;\n\nvoid main()\n{\n\n#ifdef POSITIONTEXTURE_ENABLED\n gl_Position = worldViewProjection * vec4(texture2D(positionTexture, position.xy).xy, -10.0, 1.0);\n#else\n\n #ifdef VERTEX_ANIMATION\n vec3 pos = mix(prevPosition, position, percent);\n #else\n vec3 pos = position;\n #endif\n gl_Position = worldViewProjection * vec4(pos, 1.0);\n#endif\n\n#ifdef VERTEX_SIZE\n#ifdef VERTEX_ANIMATION\n v_Size = mix(prevSize, size, percent);\n#else\n v_Size = size;\n#endif\n#else\n v_Size = u_Size;\n#endif\n\n#ifdef VERTEX_COLOR\n v_Color = a_FillColor;\n #endif\n\n gl_PointSize = v_Size;\n}\n\n@end\n\n@export ecgl.sdfSprite.fragment\n\nuniform vec4 color: [1, 1, 1, 1];\nuniform vec4 strokeColor: [1, 1, 1, 1];\nuniform float smoothing: 0.07;\n\nuniform float lineWidth: 0.0;\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\n\nvarying float v_Size;\n\nuniform sampler2D sprite;\n\n@import clay.util.srgb\n\nvoid main()\n{\n gl_FragColor = color;\n\n vec4 _strokeColor = strokeColor;\n\n#ifdef VERTEX_COLOR\n gl_FragColor *= v_Color;\n #endif\n\n#ifdef SPRITE_ENABLED\n float d = texture2D(sprite, gl_PointCoord).r;\n gl_FragColor.a *= smoothstep(0.5 - smoothing, 0.5 + smoothing, d);\n\n if (lineWidth > 0.0) {\n float sLineWidth = lineWidth / 2.0;\n\n float outlineMaxValue0 = 0.5 + sLineWidth;\n float outlineMaxValue1 = 0.5 + sLineWidth + smoothing;\n float outlineMinValue0 = 0.5 - sLineWidth - smoothing;\n float outlineMinValue1 = 0.5 - sLineWidth;\n\n if (d <= outlineMaxValue1 && d >= outlineMinValue0) {\n float a = _strokeColor.a;\n if (d <= outlineMinValue1) {\n a = a * smoothstep(outlineMinValue0, outlineMinValue1, d);\n }\n else {\n a = a * smoothstep(outlineMaxValue1, outlineMaxValue0, d);\n }\n gl_FragColor.rgb = mix(gl_FragColor.rgb * gl_FragColor.a, _strokeColor.rgb, a);\n gl_FragColor.a = gl_FragColor.a * (1.0 - a) + a;\n }\n }\n#endif\n\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(gl_FragColor);\n#endif\n}\n@end");var yoe=lt.Mesh.extend(function(){var e=new lt.Geometry({dynamic:!0,attributes:{color:new lt.Geometry.Attribute("color","float",4,"COLOR"),position:new lt.Geometry.Attribute("position","float",3,"POSITION"),size:new lt.Geometry.Attribute("size","float",1),prevPosition:new lt.Geometry.Attribute("prevPosition","float",3),prevSize:new lt.Geometry.Attribute("prevSize","float",1)}});Object.assign(e,moe);var n=new lt.Material({shader:lt.createShader("ecgl.sdfSprite"),transparent:!0,depthMask:!1});n.enableTexture("sprite"),n.define("both","VERTEX_COLOR"),n.define("both","VERTEX_SIZE");var t=new lt.Texture2D({image:document.createElement("canvas"),flipY:!1});return n.set("sprite",t),e.pick=this._pick.bind(this),{geometry:e,material:n,mode:lt.Mesh.POINTS,sizeScale:1}},{_pick:function(e,n,t,r,i,o){var d=this._positionNDC;if(d)for(var f=t.viewport,g=2/f.width,_=2/f.height,C=this.geometry.vertexCount-1;C>=0;C--){var S,k=d[2*(S=this.geometry.indices?this.geometry.indices[C]:C)],z=d[2*S+1],pe=this.geometry.attributes.size.get(S)/this.sizeScale/2;if(e>k-pe*g&&e<k+pe*g&&n>z-pe*_&&n<z+pe*_){var Me=new lt.Vector3,Re=new lt.Vector3;this.geometry.attributes.position.get(S,Me.array),lt.Vector3.transformMat4(Re,Me,this.worldTransform),o.push({vertexIndex:S,point:Me,pointWorld:Re,target:this,distance:Re.distance(r.getWorldPosition())})}}},updateNDCPosition:function(e,n,t){var r=this._positionNDC,i=this.geometry;(!r||r.length/2!==i.vertexCount)&&(r=this._positionNDC=new Float32Array(2*i.vertexCount));for(var o=uV.create(),d=0;d<i.vertexCount;d++)i.attributes.position.get(d,o),o[3]=1,uV.transformMat4(o,o,e.array),uV.scale(o,o,1/o[3]),r[2*d]=o[0],r[2*d+1]=o[1]}});const boe=yoe;function dV(e,n){this.rootNode=new lt.Node,this.is2D=e,this._labelsBuilder=new K3(256,256,n),this._labelsBuilder.getMesh().renderOrder=100,this.rootNode.add(this._labelsBuilder.getMesh()),this._api=n,this._spriteImageCanvas=document.createElement("canvas"),this._startDataIndex=0,this._endDataIndex=0,this._sizeScale=1}dV.prototype={constructor:dV,highlightOnMouseover:!0,update:function(e,n,t,r,i){var o=this._prevMesh;this._prevMesh=this._mesh,this._mesh=o;var d=e.getData();if(null==r&&(r=0),null==i&&(i=d.count()),this._startDataIndex=r,this._endDataIndex=i-1,!this._mesh){var f=this._prevMesh&&this._prevMesh.material;this._mesh=new boe({renderOrder:10,frustumCulling:!1}),f&&(this._mesh.material=f)}f=this._mesh.material;var g=this._mesh.geometry,_=g.attributes;this.rootNode.remove(this._prevMesh),this.rootNode.add(this._mesh),this._setPositionTextureToMesh(this._mesh,this._positionTexture);var C=this._getSymbolInfo(e,r,i),S=t.getDevicePixelRatio(),k=e.getModel("itemStyle").getItemStyle(),z=e.get("large"),te=1;C.maxSize>2?(te=this._updateSymbolSprite(e,k,C,S),f.enableTexture("sprite")):f.disableTexture("sprite"),_.position.init(i-r);var pe=[];if(z){f.undefine("VERTEX_SIZE"),f.undefine("VERTEX_COLOR");var Me=function Kie(e){const n=e.getVisual("style");if(n)return n[e.getVisual("drawType")]}(d),Re=function Qie(e){return e.getVisual("style").opacity}(d);lt.parseColor(Me,pe),pe[3]*=Re,f.set({color:pe,u_Size:C.maxSize*this._sizeScale})}else f.set({color:[1,1,1,1]}),f.define("VERTEX_SIZE"),f.define("VERTEX_COLOR"),_.size.init(i-r),_.color.init(i-r),this._originalOpacity=new Float32Array(i-r);for(var Fe=d.getLayout("points"),Oe=_.position.value,it=0;it<i-r;it++){var at=3*it,Ct=2*it;if(this.is2D?(Oe[at]=Fe[Ct],Oe[at+1]=Fe[Ct+1],Oe[at+2]=-10):(Oe[at]=Fe[at],Oe[at+1]=Fe[at+1],Oe[at+2]=Fe[at+2]),!z){Me=Fo(d,it),Re=Bo(d,it),lt.parseColor(Me,pe),pe[3]*=Re,_.color.set(it,pe);var mt=d.getItemVisual(it,"symbolSize");mt=mt instanceof Array?Math.max(mt[0],mt[1]):mt,isNaN(mt)&&(mt=0),_.size.value[it]=mt*te*this._sizeScale,this._originalOpacity[it]=pe[3]}}this._mesh.sizeScale=te,g.updateBoundingBox(),g.dirty(),this._updateMaterial(e,k);var Ft=e.coordinateSystem;Ft&&Ft.viewGL&&f[Ft.viewGL.isLinearSpace()?"define":"undefine"]("fragment","SRGB_DECODE"),z||this._updateLabelBuilder(e,r,i),this._updateHandler(e,n,t),this._updateAnimation(e),this._api=t},getPointsMesh:function(){return this._mesh},updateLabels:function(e){this._labelsBuilder.updateLabels(e)},hideLabels:function(){this.rootNode.remove(this._labelsBuilder.getMesh())},showLabels:function(){this.rootNode.add(this._labelsBuilder.getMesh())},dispose:function(){this._labelsBuilder.dispose()},_updateSymbolSprite:function(e,n,t,r){t.maxSize=Math.min(2*t.maxSize,200);var i=[];return t.aspect>1?(i[0]=t.maxSize,i[1]=t.maxSize/t.aspect):(i[1]=t.maxSize,i[0]=t.maxSize*t.aspect),i[0]=i[0]||1,i[1]=i[1]||1,(this._symbolType!==t.type||!function xoe(e,n){return e&&n&&e[0]===n[0]&&e[1]===n[1]}(this._symbolSize,i)||this._lineWidth!==n.lineWidth)&&(tj.createSymbolSprite(t.type,i,{fill:"#fff",lineWidth:n.lineWidth,stroke:"transparent",shadowColor:"transparent",minMargin:Math.min(i[0]/2,10)},this._spriteImageCanvas),tj.createSDFFromCanvas(this._spriteImageCanvas,Math.min(this._spriteImageCanvas.width,32),20,this._mesh.material.get("sprite").image),this._symbolType=t.type,this._symbolSize=i,this._lineWidth=n.lineWidth),this._spriteImageCanvas.width/t.maxSize*r},_updateMaterial:function(e,n){var t="lighter"===e.get("blendMode")?lt.additiveBlend:null,r=this._mesh.material;r.blend=t,r.set("lineWidth",n.lineWidth/20);var i=lt.parseColor(n.stroke);r.set("strokeColor",i),r.transparent=!0,r.depthMask=!1,r.depthTest=!this.is2D,r.sortVertices=!this.is2D},_updateLabelBuilder:function(e,d,t){var r=e.getData(),i=this._mesh.geometry,o=i.attributes.position.value,f=this._mesh.sizeScale;this._labelsBuilder.updateData(r,d=this._startDataIndex,t),this._labelsBuilder.getLabelPosition=function(g,_,C){var S=3*(g-d);return[o[S],o[S+1],o[S+2]]},this._labelsBuilder.getLabelDistance=function(g,_,C){return i.attributes.size.get(g-d)/f/2+C},this._labelsBuilder.updateLabels()},_updateAnimation:function(e){lt.updateVertexAnimation([["prevPosition","position"],["prevSize","size"]],this._prevMesh,this._mesh,e)},_updateHandler:function(e,n,t){var g,r=e.getData(),i=this._mesh,o=this,d=-1,f=e.coordinateSystem&&"cartesian3D"===e.coordinateSystem.type;f&&(g=e.coordinateSystem.model),i.seriesIndex=e.seriesIndex,i.off("mousemove"),i.off("mouseout"),i.on("mousemove",function(_){var C=_.vertexIndex+o._startDataIndex;C!==d&&(this.highlightOnMouseover&&(this.downplay(r,d),this.highlight(r,C),this._labelsBuilder.updateLabels([C])),f&&t.dispatchAction({type:"grid3DShowAxisPointer",value:[r.get(e.coordDimToDataDim("x")[0],C),r.get(e.coordDimToDataDim("y")[0],C),r.get(e.coordDimToDataDim("z")[0],C)],grid3DIndex:g.componentIndex})),i.dataIndex=C,d=C},this),i.on("mouseout",function(_){this.highlightOnMouseover&&(this.downplay(r,_.vertexIndex+o._startDataIndex),this._labelsBuilder.updateLabels()),d=-1,i.dataIndex=-1,f&&t.dispatchAction({type:"grid3DHideAxisPointer",grid3DIndex:g.componentIndex})},this)},updateLayout:function(e,n,t){var r=e.getData();if(this._mesh){var i=this._mesh.geometry.attributes.position.value,o=r.getLayout("points");if(this.is2D)for(var d=0;d<o.length/2;d++){var f=3*d,g=2*d;i[f]=o[g],i[f+1]=o[g+1],i[f+2]=-10}else for(d=0;d<o.length;d++)i[d]=o[d];this._mesh.geometry.dirty(),t.getZr().refresh()}},updateView:function(e){if(this._mesh){var n=new ir;ir.mul(n,e.viewMatrix,this._mesh.worldTransform),ir.mul(n,e.projectionMatrix,n),this._mesh.updateNDCPosition(n,this.is2D,this._api)}},highlight:function(e,n){if(!(n>this._endDataIndex||n<this._startDataIndex)){var r=e.getItemModel(n).getModel("emphasis.itemStyle"),i=r.get("color"),o=r.get("opacity");if(null==i){var d=Fo(e,n);i=bt.$_.lift(d,-.4)}null==o&&(o=Bo(e,n));var f=lt.parseColor(i);f[3]*=o,this._mesh.geometry.attributes.color.set(n-this._startDataIndex,f),this._mesh.geometry.dirtyAttribute("color"),this._api.getZr().refresh()}},downplay:function(e,n){if(!(n>this._endDataIndex||n<this._startDataIndex)){var t=Fo(e,n),r=Bo(e,n),i=lt.parseColor(t);i[3]*=r,this._mesh.geometry.attributes.color.set(n-this._startDataIndex,i),this._mesh.geometry.dirtyAttribute("color"),this._api.getZr().refresh()}},fadeOutAll:function(e){if(this._originalOpacity){for(var n=this._mesh.geometry,t=0;t<n.vertexCount;t++)n.attributes.color.value[4*t+3]=this._originalOpacity[t]*e;n.dirtyAttribute("color"),this._api.getZr().refresh()}},fadeInAll:function(){this.fadeOutAll(1)},setPositionTexture:function(e){this._mesh&&this._setPositionTextureToMesh(this._mesh,e),this._positionTexture=e},removePositionTexture:function(){this._positionTexture=null,this._mesh&&this._setPositionTextureToMesh(this._mesh,null)},setSizeScale:function(e){if(e!==this._sizeScale){if(this._mesh){var n=this._mesh.material.get("u_Size");this._mesh.material.set("u_Size",n/this._sizeScale*e);var t=this._mesh.geometry.attributes;if(t.size.value)for(var r=0;r<t.size.value.length;r++)t.size.value[r]=t.size.value[r]/this._sizeScale*e}this._sizeScale=e}},_setPositionTextureToMesh:function(e,n){n&&e.material.set("positionTexture",n),e.material[n?"enableTexture":"disableTexture"]("positionTexture")},_getSymbolInfo:function(e,n,t){if(e.get("large"))return(r=qr.firstNotNull(e.get("symbolSize"),1))instanceof Array?(_=Math.max(r[0],r[1]),o=r[0]/r[1]):(_=r,o=1),{maxSize:r,type:e.get("symbol"),aspect:o};for(var o,i=e.getData(),f=i.getItemVisual(0,"symbol")||"circle",_=0,C=n;C<t;C++){var k,r=i.getItemVisual(C,"symbolSize"),S=i.getItemVisual(C,"symbol");if(r instanceof Array)k=r[0]/r[1],_=Math.max(Math.max(r[0],r[1]),_);else{if(isNaN(r))continue;k=1,_=Math.max(r,_)}f=S,o=k}return{maxSize:_,type:f,aspect:o}}};const vw=dV,Coe=bt.TA.extend({type:"scatter3D",hasSymbolVisual:!0,__ecgl__:!0,init:function(e,n){this.groupGL=new lt.Node,this._pointsBuilderList=[],this._currentStep=0},render:function(e,n,t){if(this.groupGL.removeAll(),e.getData().count()){var r=e.coordinateSystem;if(r&&r.viewGL){r.viewGL.add(this.groupGL),this._camera=r.viewGL.camera;var i=this._pointsBuilderList[0];i||(i=this._pointsBuilderList[0]=new vw(!1,t)),this._pointsBuilderList.length=1,this.groupGL.add(i.rootNode),i.update(e,n,t),i.updateView(r.viewGL.camera)}}},incrementalPrepareRender:function(e,n,t){var r=e.coordinateSystem;r&&r.viewGL&&(r.viewGL.add(this.groupGL),this._camera=r.viewGL.camera),this.groupGL.removeAll(),this._currentStep=0},incrementalRender:function(e,n,t,r){if(!(e.end<=e.start)){var i=this._pointsBuilderList[this._currentStep];i||(i=new vw(!1,r),this._pointsBuilderList[this._currentStep]=i),this.groupGL.add(i.rootNode),i.update(n,t,r,e.start,e.end),i.updateView(n.coordinateSystem.viewGL.camera),this._currentStep++}},updateCamera:function(){this._pointsBuilderList.forEach(function(e){e.updateView(this._camera)},this)},highlight:function(e,n,t,r){this._toggleStatus("highlight",e,n,t,r)},downplay:function(e,n,t,r){this._toggleStatus("downplay",e,n,t,r)},_toggleStatus:function(e,n,t,r,i){var o=n.getData(),d=qr.queryDataIndex(o,i),f="highlight"===e;null!=d?bt.D5.each(qy.normalizeToArray(d),function(g){for(var _=0;_<this._pointsBuilderList.length;_++){var C=this._pointsBuilderList[_];f?C.highlight(o,g):C.downplay(o,g)}},this):o.each(function(g){for(var _=0;_<this._pointsBuilderList.length;_++){var C=this._pointsBuilderList[_];f?C.highlight(o,g):C.downplay(o,g)}})},dispose:function(){this._pointsBuilderList.forEach(function(e){e.dispose()}),this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});(0,bt.D$)(function woe(e){e.registerChartView(Coe),e.registerSeriesModel(poe),e.registerLayout({seriesType:"scatter3D",reset:function(n){var t=n.coordinateSystem;if(t){var r=t.dimensions;if(r.length<3)return;var i=r.map(function(f){return n.coordDimToDataDim(f)[0]}),o=[],d=[];return{progress:function(f,g){for(var _=new Float32Array(3*(f.end-f.start)),C=f.start;C<f.end;C++){var S=3*(C-f.start);o[0]=g.get(i[0],C),o[1]=g.get(i[1],C),o[2]=g.get(i[2],C),t.dataToPoint(o,d),_[S]=d[0],_[S+1]=d[1],_[S+2]=d[2]}g.setLayout("points",_)}}}}})});var wo=Qa.vec3,aj=Qa.vec2,dh=wo.normalize,rP=wo.cross,oj=wo.sub,hV=wo.add,Pf=wo.create,Rf=Pf(),kc=Pf(),Lf=Pf(),mw=Pf(),sj=[],lj=[];function Soe(e,n){aj.copy(sj,e[0]),aj.copy(lj,e[1]);var t=[],r=t[0]=Pf(),i=t[1]=Pf(),o=t[2]=Pf(),d=t[3]=Pf();n.dataToPoint(sj,r),n.dataToPoint(lj,d),dh(Rf,r),oj(kc,d,r),dh(kc,kc),rP(Lf,kc,Rf),dh(Lf,Lf),rP(kc,Rf,Lf),hV(i,Rf,kc),dh(i,i),dh(Rf,d),oj(kc,r,d),dh(kc,kc),rP(Lf,kc,Rf),dh(Lf,Lf),rP(kc,Rf,Lf),hV(o,Rf,kc),dh(o,o),hV(mw,r,d),dh(mw,mw);var f=wo.dot(r,mw),g=wo.dot(mw,i),_=(Math.max(wo.len(r),wo.len(d))-f)/g*2;return wo.scaleAndAdd(i,r,i,_),wo.scaleAndAdd(o,d,o,_),t}function cj(e,n){for(var t=new Float32Array(3*e.length),r=0,i=[],o=0;o<e.length;o++)n.dataToPoint(e[o],i),t[r++]=i[0],t[r++]=i[1],t[r++]=i[2];return t}function uj(e){var n=[];return e.each(function(t){var r=e.getItemModel(t),i=r.option instanceof Array?r.option:r.getShallow("coords",!0);n.push(i)}),{coordsList:n}}function dj(e,n,t){var r=e.getData(),i=e.get("polyline"),o=uj(r);r.setLayout("lineType",i?"polyline":"cubicBezier"),r.each(function(d){var f=o.coordsList[d],g=i?cj(f,n):function Doe(e,n,t){var r=[],i=r[0]=wo.create(),o=r[1]=wo.create(),d=r[2]=wo.create(),f=r[3]=wo.create();n.dataToPoint(e[0],i),n.dataToPoint(e[1],f);var g=wo.dist(i,f);return wo.lerp(o,i,f,.3),wo.lerp(d,i,f,.3),wo.scaleAndAdd(o,o,t,Math.min(.1*g,10)),wo.scaleAndAdd(d,d,t,Math.min(.1*g,10)),r}(f,n,t);r.setItemLayout(d,g)})}function Toe(e,n){e.eachSeriesByType("lines3D",function(t){var r=t.coordinateSystem;"globe"===r.type?function Moe(e,n){var t=e.getData(),r=e.get("polyline");t.setLayout("lineType",r?"polyline":"cubicBezier");var i=uj(t);t.each(function(o){t.setItemLayout(o,(r?cj:Soe)(i.coordsList[o],n))})}(t,r):"geo3D"===r.type?dj(t,r,[0,1,0]):("mapbox3D"===r.type||"maptalks3D"===r.type)&&dj(t,r,[0,0,1])})}const Eoe=bt.wJ.extend({type:"series.lines3D",dependencies:["globe"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",getInitialData:function(e,n){var t=new bt.aV(["value"],this);return t.hasItemOption=!1,t.initData(e.data,[],function(r,i,o,d){if(r instanceof Array)return NaN;t.hasItemOption=!0;var f=r.value;return null!=f?f instanceof Array?f[d]:f:void 0}),t},defaultOption:{coordinateSystem:"globe",globeIndex:0,geo3DIndex:0,zlevel:-10,polyline:!1,effect:{show:!1,period:4,trailWidth:4,trailLength:.2,spotIntensity:6},silent:!0,blendMode:"source-over",lineStyle:{width:1,opacity:.5}}});var hj=Qa.vec3;function Ioe(e){return e>0?1:-1}lt.Shader.import("@export ecgl.trail2.vertex\nattribute vec3 position: POSITION;\nattribute vec3 positionPrev;\nattribute vec3 positionNext;\nattribute float offset;\nattribute float dist;\nattribute float distAll;\nattribute float start;\n\nattribute vec4 a_Color : COLOR;\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform vec4 viewport : VIEWPORT;\nuniform float near : NEAR;\n\nuniform float speed : 0;\nuniform float trailLength: 0.3;\nuniform float time;\nuniform float period: 1000;\n\nuniform float spotSize: 1;\n\nvarying vec4 v_Color;\nvarying float v_Percent;\nvarying float v_SpotPercent;\n\n@import ecgl.common.wireframe.vertexHeader\n\n@import ecgl.lines3D.clipNear\n\nvoid main()\n{\n @import ecgl.lines3D.expandLine\n\n gl_Position = currProj;\n\n v_Color = a_Color;\n\n @import ecgl.common.wireframe.vertexMain\n\n#ifdef CONSTANT_SPEED\n float t = mod((speed * time + start) / distAll, 1. + trailLength) - trailLength;\n#else\n float t = mod((time + start) / period, 1. + trailLength) - trailLength;\n#endif\n\n float trailLen = distAll * trailLength;\n\n v_Percent = (dist - t * distAll) / trailLen;\n\n v_SpotPercent = spotSize / distAll;\n\n }\n@end\n\n\n@export ecgl.trail2.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\nuniform float spotIntensity: 5;\n\nvarying vec4 v_Color;\nvarying float v_Percent;\nvarying float v_SpotPercent;\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.util.srgb\n\nvoid main()\n{\n if (v_Percent > 1.0 || v_Percent < 0.0) {\n discard;\n }\n\n float fade = v_Percent;\n\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(color * v_Color);\n#else\n gl_FragColor = color * v_Color;\n#endif\n\n @import ecgl.common.wireframe.fragmentMain\n\n if (v_Percent > (1.0 - v_SpotPercent)) {\n gl_FragColor.rgb *= spotIntensity;\n }\n\n gl_FragColor.a *= fade;\n}\n\n@end");const Poe=lt.Mesh.extend(function(){var e=new lt.Material({shader:new lt.Shader(lt.Shader.source("ecgl.trail2.vertex"),lt.Shader.source("ecgl.trail2.fragment")),transparent:!0,depthMask:!1}),n=new $g({dynamic:!0});return n.createAttribute("dist","float",1),n.createAttribute("distAll","float",1),n.createAttribute("start","float",1),{geometry:n,material:e,culling:!1,$ignorePicking:!0}},{updateData:function(e,n,t){var r=e.hostModel,i=this.geometry,o=r.getModel("effect"),d=o.get("trailWidth")*n.getDevicePixelRatio(),f=o.get("trailLength"),g=r.get("effect.constantSpeed"),_=1e3*r.get("effect.period"),C=null!=g;C?this.material.set("speed",g/1e3):this.material.set("period",_),this.material[C?"define":"undefine"]("vertex","CONSTANT_SPEED");var S=r.get("polyline");i.trailLength=f,this.material.set("trailLength",f),i.resetOffset(),["position","positionPrev","positionNext"].forEach(function(Ct){i.attributes[Ct].value=t.attributes[Ct].value}),["dist","distAll","start","offset","color"].forEach(function(Ct){i.attributes[Ct].init(i.vertexCount)}),i.indices=t.indices;var z=[],te=o.get("trailColor"),pe=o.get("trailOpacity"),Me=null!=te,Re=null!=pe;this.updateWorldTransform();var Fe=this.worldTransform.x.len(),Oe=this.worldTransform.y.len(),Be=this.worldTransform.z.len(),it=0,at=0;e.each(function(Ct){var mt=e.getItemLayout(Ct),Ft=Re?pe:Bo(e,Ct),nn=Fo(e,Ct);null==Ft&&(Ft=1),(z=lt.parseColor(Me?te:nn,z))[3]*=Ft;for(var $t=S?t.getPolylineVertexCount(mt):t.getCubicCurveVertexCount(mt[0],mt[1],mt[2],mt[3]),pn=0,mn=[],sn=[],wn=it;wn<it+$t;wn++)i.attributes.position.get(wn,mn),mn[0]*=Fe,mn[1]*=Oe,mn[2]*=Be,wn>it&&(pn+=hj.dist(mn,sn)),i.attributes.dist.set(wn,pn),hj.copy(sn,mn);at=Math.max(at,pn);var Gt=Math.random()*(C?pn:_);for(wn=it;wn<it+$t;wn++)i.attributes.distAll.set(wn,pn),i.attributes.start.set(wn,Gt),i.attributes.offset.set(wn,Ioe(t.attributes.offset.get(wn))*d/2),i.attributes.color.set(wn,z);it+=$t}),this.material.set("spotSize",.1*at*f),this.material.set("spotIntensity",o.get("spotIntensity")),i.dirty()},setAnimationTime:function(e){this.material.set("time",e)}});lt.Shader.import(ZI);const Loe=bt.TA.extend({type:"lines3D",__ecgl__:!0,init:function(e,n){this.groupGL=new lt.Node,this._meshLinesMaterial=new lt.Material({shader:lt.createShader("ecgl.meshLines3D"),transparent:!0,depthMask:!1}),this._linesMesh=new lt.Mesh({geometry:new $g,material:this._meshLinesMaterial,$ignorePicking:!0}),this._trailMesh=new Poe},render:function(e,n,t){this.groupGL.add(this._linesMesh);var r=e.coordinateSystem,i=e.getData();if(r&&r.viewGL){r.viewGL.add(this.groupGL),this._updateLines(e,n,t);var d=r.viewGL.isLinearSpace()?"define":"undefine";this._linesMesh.material[d]("fragment","SRGB_DECODE"),this._trailMesh.material[d]("fragment","SRGB_DECODE")}var f=this._trailMesh;if(f.stopAnimation(),e.get("effect.show")){this.groupGL.add(f),f.updateData(i,t,this._linesMesh.geometry),f.__time=f.__time||0;var g=36e5;this._curveEffectsAnimator=f.animate("",{loop:!0}).when(g,{__time:g}).during(function(){f.setAnimationTime(f.__time)}).start()}else this.groupGL.remove(f),this._curveEffectsAnimator=null;this._linesMesh.material.blend=this._trailMesh.material.blend="lighter"===e.get("blendMode")?lt.additiveBlend:null},pauseEffect:function(){this._curveEffectsAnimator&&this._curveEffectsAnimator.pause()},resumeEffect:function(){this._curveEffectsAnimator&&this._curveEffectsAnimator.resume()},toggleEffect:function(){var e=this._curveEffectsAnimator;e&&(e.isPaused()?e.resume():e.pause())},_updateLines:function(e,n,t){var r=e.getData(),i=e.coordinateSystem,o=this._linesMesh.geometry,d=e.get("polyline");o.expandLine=!0;var f=function Roe(e){return null!=e.radius?e.radius:null!=e.size?Math.max(e.size[0],e.size[1],e.size[2]):100}(i);o.segmentScale=f/20;var g="lineStyle.width".split("."),_=t.getDevicePixelRatio(),C=0;r.each(function(te){var Me=r.getItemModel(te).get(g);null==Me&&(Me=1),r.setItemVisual(te,"lineWidth",Me),C=Math.max(Me,C)}),o.useNativeLine=!1;var S=0,k=0;r.each(function(te){var pe=r.getItemLayout(te);d?(S+=o.getPolylineVertexCount(pe),k+=o.getPolylineTriangleCount(pe)):(S+=o.getCubicCurveVertexCount(pe[0],pe[1],pe[2],pe[3]),k+=o.getCubicCurveTriangleCount(pe[0],pe[1],pe[2],pe[3]))}),o.setVertexCount(S),o.setTriangleCount(k),o.resetOffset();var z=[];r.each(function(te){var pe=r.getItemLayout(te),Me=Fo(r,te),Re=Bo(r,te),Fe=r.getItemVisual(te,"lineWidth")*_;null==Re&&(Re=1),(z=lt.parseColor(Me,z))[3]*=Re,d?o.addPolyline(pe,z,Fe):o.addCubicCurve(pe[0],pe[1],pe[2],pe[3],z,Fe)}),o.dirty()},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}});function fj(e,n){for(var t=[],r=0;r<n.length;r++)t.push(e.dataToPoint(n[r]));return t}(0,bt.D$)(function Ooe(e){e.registerChartView(Loe),e.registerSeriesModel(Eoe),e.registerLayout(Toe),e.registerAction({type:"lines3DPauseEffect",event:"lines3deffectpaused",update:"series.lines3D:pauseEffect"},function(){}),e.registerAction({type:"lines3DResumeEffect",event:"lines3deffectresumed",update:"series.lines3D:resumeEffect"},function(){}),e.registerAction({type:"lines3DToggleEffect",event:"lines3deffectchanged",update:"series.lines3D:toggleEffect"},function(){})});var pj=bt.wJ.extend({type:"series.polygons3D",getRegionModel:function(e){return this.getData().getItemModel(e)},getRegionPolygonCoords:function(e){var n=this.coordinateSystem,t=this.getData().getItemModel(e),r=t.option instanceof Array?t.option:t.getShallow("coords");t.get("multiPolygon")||(r=[r]);for(var i=[],o=0;o<r.length;o++){for(var d=[],f=1;f<r[o].length;f++)d.push(fj(n,r[o][f]));i.push({exterior:fj(n,r[o][0]),interiors:d})}return i},getInitialData:function(e){var n=new bt.aV(["value"],this);return n.hasItemOption=!1,n.initData(e.data,[],function(t,r,i,o){if(t instanceof Array)return NaN;n.hasItemOption=!0;var d=t.value;return null!=d?d instanceof Array?d[o]:d:void 0}),n},defaultOption:{show:!0,data:null,multiPolygon:!1,progressiveThreshold:1e3,progressive:1e3,zlevel:-10,label:{show:!1,distance:2,textStyle:{fontSize:20,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:4}},itemStyle:{color:"#fff",borderWidth:0,borderColor:"#333"},emphasis:{itemStyle:{color:"#639fc0"},label:{show:!0}}}});bt.D5.merge(pj.prototype,Yy);const koe=pj,Noe=bt.TA.extend({type:"polygons3D",__ecgl__:!0,init:function(e,n){this.groupGL=new lt.Node,this._geo3DBuilderList=[],this._currentStep=0},render:function(e,n,t){this.groupGL.removeAll();var r=e.coordinateSystem;r&&r.viewGL&&r.viewGL.add(this.groupGL);var i=this._geo3DBuilderList[0];i||((i=new JI(t)).extrudeY="mapbox3D"!==r.type&&"maptalks3D"!==r.type,this._geo3DBuilderList[0]=i),this._updateShaderDefines(r,i),i.update(e,n,t),this._geo3DBuilderList.length=1,this.groupGL.add(i.rootNode)},incrementalPrepareRender:function(e,n,t){this.groupGL.removeAll();var r=e.coordinateSystem;r&&r.viewGL&&r.viewGL.add(this.groupGL),this._currentStep=0},incrementalRender:function(e,n,t,r){var i=this._geo3DBuilderList[this._currentStep],o=n.coordinateSystem;i||((i=new JI(r)).extrudeY="mapbox3D"!==o.type&&"maptalks3D"!==o.type,this._geo3DBuilderList[this._currentStep]=i),i.update(n,t,r,e.start,e.end),this.groupGL.add(i.rootNode),this._updateShaderDefines(o,i),this._currentStep++},_updateShaderDefines:function(e,n){var t=e.viewGL.isLinearSpace()?"define":"undefine";n.rootNode.traverse(function(r){r.material&&(r.material[t]("fragment","SRGB_DECODE"),("mapbox3D"===e.type||"maptalks3D"===e.type)&&(r.material.define("fragment","NORMAL_UP_AXIS",2),r.material.define("fragment","NORMAL_FRONT_AXIS",1)))})},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll(),this._geo3DBuilderList.forEach(function(e){e.dispose()})}});(0,bt.D$)(function Foe(e){e.registerChartView(Noe),e.registerSeriesModel(koe)});var gj=bt.wJ.extend({type:"series.surface",dependencies:["globe","grid3D","geo3D"],visualStyleAccessPath:"itemStyle",formatTooltip:function(e){return gw(this,e)},getInitialData:function(e,n){var t=e.data;function r(ln){return!(isNaN(ln.min)||isNaN(ln.max)||isNaN(ln.step))}function i(ln){var Xt=bt.Rx.getPrecisionSafe;return Math.max(Xt(ln.min),Xt(ln.max),Xt(ln.step))+1}if(!t)if(e.parametric){var Be=e.parametricEquation||{},it=Be.u||{},at=Be.v||{};["u","v"].forEach(function(Xt){r(Be[Xt])}),["x","y","z"].forEach(function(Xt){});var Ct=Math.floor((it.max+it.step-it.min)/it.step),mt=Math.floor((at.max+at.step-at.min)/at.step);t=new Float32Array(Ct*mt*5);for(var Ft=i(it),nn=i(at),k=0,z=0;z<mt;z++)for(var te=0;te<Ct;te++){var pn=z*at.step+at.min,mn=bt.Rx.round(Math.min(te*it.step+it.min,it.max),Ft),sn=bt.Rx.round(Math.min(pn,at.max),nn),pe=Be.x(mn,sn),Me=Be.y(mn,sn),Oe=Be.z(mn,sn);t[k++]=pe,t[k++]=Me,t[k++]=Oe,t[k++]=mn,t[k++]=sn}}else{var o=e.equation||{},d=o.x||{},f=o.y||{};if(["x","y"].forEach(function(ln){r(o[ln])}),"function"!=typeof o.z)return;var g=Math.floor((d.max+d.step-d.min)/d.step),_=Math.floor((f.max+f.step-f.min)/f.step);t=new Float32Array(g*_*3);var C=i(d),S=i(f);for(k=0,z=0;z<_;z++)for(te=0;te<g;te++){pe=te*d.step+d.min,Me=z*f.step+f.min;var Re=bt.Rx.round(Math.min(pe,d.max),C),Fe=bt.Rx.round(Math.min(Me,f.max),S);Oe=o.z(Re,Fe),t[k++]=Re,t[k++]=Fe,t[k++]=Oe}}var wn=["x","y","z"];return e.parametric&&wn.push("u","v"),nP(this,wn,t)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,grid3DIndex:0,shading:"lambert",parametric:!1,wireframe:{show:!0,lineStyle:{color:"rgba(0,0,0,0.5)",width:1}},equation:{x:{min:-1,max:1,step:.1},y:{min:-1,max:1,step:.1},z:null},parametricEquation:{u:{min:-1,max:1,step:.1},v:{min:-1,max:1,step:.1},x:null,y:null,z:null},dataShape:null,itemStyle:{},animationDurationUpdate:500}});bt.D5.merge(gj.prototype,Yy);const Boe=gj;var iv=Qa.vec3;function Voe(e){return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])}const zoe=bt.TA.extend({type:"surface",__ecgl__:!0,init:function(e,n){this.groupGL=new lt.Node},render:function(e,n,t){var r=this._prevSurfaceMesh;this._prevSurfaceMesh=this._surfaceMesh,this._surfaceMesh=r,this._surfaceMesh||(this._surfaceMesh=this._createSurfaceMesh()),this.groupGL.remove(this._prevSurfaceMesh),this.groupGL.add(this._surfaceMesh);var i=e.coordinateSystem,o=e.get("shading"),d=e.getData(),f="ecgl."+o;if((!this._surfaceMesh.material||this._surfaceMesh.material.shader.name!==f)&&(this._surfaceMesh.material=lt.createMaterial(f,["VERTEX_COLOR","DOUBLE_SIDED"])),lt.setMaterialFromModel(o,this._surfaceMesh.material,e,t),i&&i.viewGL){i.viewGL.add(this.groupGL);var g=i.viewGL.isLinearSpace()?"define":"undefine";this._surfaceMesh.material[g]("fragment","SRGB_DECODE")}var _=e.get("parametric"),C=e.get("dataShape");C||(C=this._getDataShape(d,_));var S=e.getModel("wireframe"),k=S.get("lineStyle.width"),z=S.get("show")&&k>0;this._updateSurfaceMesh(this._surfaceMesh,e,C,z);var te=this._surfaceMesh.material;z?(te.define("WIREFRAME_QUAD"),te.set("wireframeLineWidth",k),te.set("wireframeLineColor",lt.parseColor(S.get("lineStyle.color")))):te.undefine("WIREFRAME_QUAD"),this._initHandler(e,t),this._updateAnimation(e)},_updateAnimation:function(e){lt.updateVertexAnimation([["prevPosition","position"],["prevNormal","normal"]],this._prevSurfaceMesh,this._surfaceMesh,e)},_createSurfaceMesh:function(){var e=new lt.Mesh({geometry:new lt.Geometry({dynamic:!0,sortTriangles:!0}),shadowDepthMaterial:new lt.Material({shader:new lt.Shader(lt.Shader.source("ecgl.sm.depth.vertex"),lt.Shader.source("ecgl.sm.depth.fragment"))}),culling:!1,renderOrder:10,renderNormal:!0});return e.geometry.createAttribute("barycentric","float",4),e.geometry.createAttribute("prevPosition","float",3),e.geometry.createAttribute("prevNormal","float",3),Object.assign(e.geometry,$3),e},_initHandler:function(e,n){var t=e.getData(),r=this._surfaceMesh,i=e.coordinateSystem;r.seriesIndex=e.seriesIndex;var d=-1;r.off("mousemove"),r.off("mouseout"),r.on("mousemove",function(f){var g=function o(f,g){for(var _=1/0,C=-1,S=[],k=0;k<f.length;k++){r.geometry.attributes.position.get(f[k],S);var z=iv.dist(g.array,S);z<_&&(_=z,C=f[k])}return C}(f.triangle,f.point);if(g>=0){var _=[];r.geometry.attributes.position.get(g,_);for(var C=i.pointToData(_),S=1/0,k=-1,z=[],te=0;te<t.count();te++){z[0]=t.get("x",te),z[1]=t.get("y",te),z[2]=t.get("z",te);var pe=iv.squaredDistance(z,C);pe<S&&(k=te,S=pe)}k!==d&&n.dispatchAction({type:"grid3DShowAxisPointer",value:C}),d=k,r.dataIndex=k}else r.dataIndex=-1},this),r.on("mouseout",function(f){d=-1,r.dataIndex=-1,n.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_updateSurfaceMesh:function(e,n,t,r){var i=e.geometry,o=n.getData(),d=o.getLayout("points"),f=0;o.each(function(Do){o.hasValue(Do)||f++});var g=f||r,_=i.attributes.position,C=i.attributes.normal,S=i.attributes.texcoord0,k=i.attributes.barycentric,z=i.attributes.color,te=t[0],pe=t[1],Re="color"!==n.get("shading");if(g){var Fe=(te-1)*(pe-1)*4;_.init(Fe),r&&k.init(Fe)}else _.value=new Float32Array(d);z.init(i.vertexCount),S.init(i.vertexCount);var Oe=[0,3,1,1,3,2],Be=[[1,1,0,0],[0,1,0,1],[1,0,0,1],[1,0,1,0]],it=i.indices=new(i.vertexCount>65535?Uint32Array:Uint16Array)((te-1)*(pe-1)*6),at=function(Do,rd,Ps){Ps[1]=Do*pe+rd,Ps[0]=Do*pe+rd+1,Ps[3]=(Do+1)*pe+rd+1,Ps[2]=(Do+1)*pe+rd},Ct=!1;if(g){var mt=[],Ft=[],nn=0;Re?C.init(i.vertexCount):C.value=null;for(var $t=[[],[],[]],pn=[],mn=[],sn=iv.create(),wn=function(Do,rd,Ps){var WV=3*rd;return Ps[0]=Do[WV],Ps[1]=Do[WV+1],Ps[2]=Do[WV+2],Ps},Gt=new Float32Array(d.length),ln=new Float32Array(d.length/3*4),Xt=0;Xt<o.count();Xt++)if(o.hasValue(Xt)){var Ra=lt.parseColor(Fo(o,Xt));null!=(Xn=Bo(o,Xt))&&(Ra[3]*=Xn),Ra[3]<.99&&(Ct=!0);for(var In=0;In<4;In++)ln[4*Xt+In]=Ra[In]}var ai=[1e7,1e7,1e7];for(Xt=0;Xt<te-1;Xt++)for(var Nr=0;Nr<pe-1;Nr++){var Mr=4*(Xt*(pe-1)+Nr);at(Xt,Nr,mt);var Jr=!1;for(In=0;In<4;In++)wn(d,mt[In],Ft),Voe(Ft)&&(Jr=!0);for(In=0;In<4;In++)Jr?_.set(Mr+In,ai):(wn(d,mt[In],Ft),_.set(Mr+In,Ft)),r&&k.set(Mr+In,Be[In]);for(In=0;In<6;In++)it[nn++]=Oe[In]+Mr;if(Re&&!Jr)for(In=0;In<2;In++){for(var qa=3*In,oi=0;oi<3;oi++)wn(d,Zi=mt[Oe[qa]+oi],$t[oi]);for(iv.sub(pn,$t[0],$t[1]),iv.sub(mn,$t[1],$t[2]),iv.cross(sn,pn,mn),oi=0;oi<3;oi++){var Yi=3*mt[Oe[qa]+oi];Gt[Yi]=Gt[Yi]+sn[0],Gt[Yi+1]=Gt[Yi+1]+sn[1],Gt[Yi+2]=Gt[Yi+2]+sn[2]}}}if(Re)for(Xt=0;Xt<Gt.length/3;Xt++)wn(Gt,Xt,sn),iv.normalize(sn,sn),Gt[3*Xt]=sn[0],Gt[3*Xt+1]=sn[1],Gt[3*Xt+2]=sn[2];Ra=[];var Ba=[];for(Xt=0;Xt<te-1;Xt++)for(Nr=0;Nr<pe-1;Nr++)for(Mr=4*(Xt*(pe-1)+Nr),at(Xt,Nr,mt),In=0;In<4;In++){for(oi=0;oi<4;oi++)Ra[oi]=ln[4*mt[In]+oi];var Zi;z.set(Mr+In,Ra),Re&&(wn(Gt,mt[In],sn),C.set(Mr+In,sn)),Ba[0]=(Zi=mt[In])%pe/(pe-1),Ba[1]=Math.floor(Zi/pe)/(te-1),S.set(Mr+In,Ba)}}else{for(Ba=[],Xt=0;Xt<o.count();Xt++){var Xn;Ba[0]=Xt%pe/(pe-1),Ba[1]=Math.floor(Xt/pe)/(te-1),Ra=lt.parseColor(Fo(o,Xt)),null!=(Xn=Bo(o,Xt))&&(Ra[3]*=Xn),Ra[3]<.99&&(Ct=!0),z.set(Xt,Ra),S.set(Xt,Ba)}mt=[];var Dw=0;for(Xt=0;Xt<te-1;Xt++)for(Nr=0;Nr<pe-1;Nr++)for(at(Xt,Nr,mt),In=0;In<6;In++)it[Dw++]=mt[Oe[In]];Re?i.generateVertexNormals():C.value=null}e.material.get("normalMap")&&i.generateTangents(),i.updateBoundingBox(),i.dirty(),e.material.transparent=Ct,e.material.depthMask=!Ct},_getDataShape:function(e,n){for(var t=-1/0,r=0,i=0,d=!1,f=n?"u":"x",g=e.count(),_=0;_<g;_++){var C=e.get(f,_);C<t&&(i=0,r++),t=C,i++}if((!r||1===i)&&(d=!0),!d)return[r+1,i];for(var S=Math.floor(Math.sqrt(g));S>0;){if(Math.floor(g/S)===g/S)return[S,g/S];S--}return[S=Math.floor(Math.sqrt(g)),S]},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function vj(e,n){for(var t=[],r=0;r<n.length;r++)t.push(e.dataToPoint(n[r]));return t}(0,bt.D$)(function Hoe(e){e.registerChartView(zoe),e.registerSeriesModel(Boe),e.registerLayout(function(n,t){n.eachSeriesByType("surface",function(r){var i=r.coordinateSystem,o=r.getData(),d=new Float32Array(3*o.count()),f=[NaN,NaN,NaN];if(i&&"cartesian3D"===i.type){var _=i.dimensions.map(function(C){return r.coordDimToDataDim(C)[0]});o.each(_,function(C,S,k,z){var te;te=o.hasValue(z)?i.dataToPoint([C,S,k]):f,d[3*z]=te[0],d[3*z+1]=te[1],d[3*z+2]=te[2]})}o.setLayout("points",d)})})});var Jy=bt.wJ.extend({type:"series.map3D",layoutMode:"box",coordinateSystem:null,visualStyleAccessPath:"itemStyle",optionUpdated:function(e){e=e||{};var n=this.get("coordinateSystem");null!=n&&"geo3D"!==n&&(this.get("groundPlane.show")&&(this.option.groundPlane.show=!1),this._geo=null)},getInitialData:function(e){e.data=this.getFilledRegions(e.data,e.map);var n=bt._y.createDimensions(e.data,{coordDimensions:["value"]}),t=new bt.aV(n,this);t.initData(e.data);var r={};return t.each(function(i){var o=t.getName(i),d=t.getItemModel(i);r[o]=d}),this._regionModelMap=r,t},formatTooltip:function(e){return gw(this,e)},getRegionModel:function(e){var n=this.getData().getName(e);return this._regionModelMap[n]||new bt.Hn(null,this)},getRegionPolygonCoords:function(e){var n=this.coordinateSystem,t=this.getData().getName(e);if(n.transform)return(r=n.getRegion(t))?r.geometries:[];this._geo||(this._geo=B6.createGeo3D(this));for(var r=this._geo.getRegion(t),i=[],o=0;o<r.geometries.length;o++){var d=r.geometries[o],f=[],g=vj(n,d.exterior);if(f&&f.length)for(var _=0;_<d.interiors.length;_++)f.push(vj(n,f[_]));i.push({interiors:f,exterior:g})}return i},getFormattedLabel:function(e,n){var t=qy.getFormattedLabel(this,e,n);return null==t&&(t=this.getData().getName(e)),t},defaultOption:{coordinateSystem:"geo3D",data:null}});bt.D5.merge(Jy.prototype,w6),bt.D5.merge(Jy.prototype,zI),bt.D5.merge(Jy.prototype,Uy),bt.D5.merge(Jy.prototype,Gy),bt.D5.merge(Jy.prototype,Yy);const Uoe=Jy,Goe=bt.TA.extend({type:"map3D",__ecgl__:!0,init:function(e,n){this._geo3DBuilder=new JI(n),this.groupGL=new lt.Node},render:function(e,n,t){var r=e.coordinateSystem;if(r&&r.viewGL){if(this.groupGL.add(this._geo3DBuilder.rootNode),r.viewGL.add(this.groupGL),"geo3D"===r.type){this._sceneHelper||(this._sceneHelper=new Wy,this._sceneHelper.initLight(this.groupGL)),this._sceneHelper.setScene(r.viewGL.scene),this._sceneHelper.updateLight(e),r.viewGL.setPostEffect(e.getModel("postEffect"),t),r.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling"));var o=this._control;o||(o=this._control=new GI({zr:t.getZr()}),this._control.init());var d=e.getModel("viewControl");o.setViewGL(r.viewGL),o.setFromViewControlModel(d,0),o.off("update"),o.on("update",function(){t.dispatchAction({type:"map3DChangeCamera",alpha:o.getAlpha(),beta:o.getBeta(),distance:o.getDistance(),from:this.uid,map3DId:e.id})}),this._geo3DBuilder.extrudeY=!0}else this._control&&(this._control.dispose(),this._control=null),this._sceneHelper&&(this._sceneHelper.dispose(),this._sceneHelper=null),e.getData().getLayout("geo3D"),this._geo3DBuilder.extrudeY=!1;this._geo3DBuilder.update(e,n,t,0,e.getData().count());var f=r.viewGL.isLinearSpace()?"define":"undefine";this._geo3DBuilder.rootNode.traverse(function(g){g.material&&g.material[f]("fragment","SRGB_DECODE")})}},afterRender:function(e,n,t,r){var i=r.renderer,o=e.coordinateSystem;o&&"geo3D"===o.type&&(this._sceneHelper.updateAmbientCubemap(i,e,t),this._sceneHelper.updateSkybox(i,e,t))},dispose:function(){this.groupGL.removeAll(),this._control.dispose(),this._geo3DBuilder.dispose()}});(0,bt.D$)(function Woe(e){V6(e),e.registerChartView(Goe),e.registerSeriesModel(Uoe),e.registerAction({type:"map3DChangeCamera",event:"map3dcamerachanged",update:"series:updateCamera"},function(n,t){t.eachComponent({mainType:"series",subType:"map3D",query:n},function(r){r.setView(n)})})});const joe=bt.wJ.extend({type:"series.scatterGL",dependencies:["grid","polar","geo","singleAxis"],visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,getInitialData:function(){return bt._y.createList(this)},defaultOption:{coordinateSystem:"cartesian2d",zlevel:10,progressive:1e5,progressiveThreshold:1e5,large:!1,symbol:"circle",symbolSize:10,zoomScale:0,blendMode:"source-over",itemStyle:{opacity:.8},postEffect:{enable:!1,colorCorrection:{exposure:0,brightness:0,contrast:1,saturation:1,enable:!0}}}});var mj=H(3481),_j=H(8221);function Of(e){this.viewGL=e}Of.prototype.reset=function(e,n){this._updateCamera(n.getWidth(),n.getHeight(),n.getDevicePixelRatio()),this._viewTransform=mj.create(),this.updateTransform(e,n)},Of.prototype.updateTransform=function(e,n){var t=e.coordinateSystem;t.getRoamTransform&&(mj.invert(this._viewTransform,t.getRoamTransform()),this._setCameraTransform(this._viewTransform),n.getZr().refresh())},Of.prototype.dataToPoint=function(e,n,t){t=e.dataToPoint(n,null,t);var r=this._viewTransform;r&&_j.applyTransform(t,t,r)},Of.prototype.removeTransformInPoint=function(e){return this._viewTransform&&_j.applyTransform(e,e,this._viewTransform),e},Of.prototype.getZoom=function(){if(this._viewTransform){var e=this._viewTransform;return 1/Math.max(Math.sqrt(e[0]*e[0]+e[1]*e[1]),Math.sqrt(e[2]*e[2]+e[3]*e[3]))}return 1},Of.prototype._setCameraTransform=function(e){var n=this.viewGL.camera;n.position.set(e[4],e[5],0),n.scale.set(Math.sqrt(e[0]*e[0]+e[1]*e[1]),Math.sqrt(e[2]*e[2]+e[3]*e[3]),1)},Of.prototype._updateCamera=function(e,n,t){this.viewGL.setViewport(0,0,e,n,t);var r=this.viewGL.camera;r.left=r.top=0,r.bottom=n,r.right=e,r.near=0,r.far=100};const yj=Of,Zoe=bt.TA.extend({type:"scatterGL",__ecgl__:!0,init:function(e,n){this.groupGL=new lt.Node,this.viewGL=new Tf("orthographic"),this.viewGL.add(this.groupGL),this._pointsBuilderList=[],this._currentStep=0,this._sizeScale=1,this._glViewHelper=new yj(this.viewGL)},render:function(e,n,t){if(this.groupGL.removeAll(),this._glViewHelper.reset(e,t),e.getData().count()){var r=this._pointsBuilderList[0];r||(r=this._pointsBuilderList[0]=new vw(!0,t)),this._pointsBuilderList.length=1,this.groupGL.add(r.rootNode),this._removeTransformInPoints(e.getData().getLayout("points")),r.update(e,n,t),this.viewGL.setPostEffect(e.getModel("postEffect"),t)}},incrementalPrepareRender:function(e,n,t){this.groupGL.removeAll(),this._glViewHelper.reset(e,t),this._currentStep=0,this.viewGL.setPostEffect(e.getModel("postEffect"),t)},incrementalRender:function(e,n,t,r){if(!(e.end<=e.start)){var i=this._pointsBuilderList[this._currentStep];i||(i=new vw(!0,r),this._pointsBuilderList[this._currentStep]=i),this.groupGL.add(i.rootNode),this._removeTransformInPoints(n.getData().getLayout("points")),i.setSizeScale(this._sizeScale),i.update(n,t,r,e.start,e.end),r.getZr().refresh(),this._currentStep++}},updateTransform:function(e,n,t){if(e.coordinateSystem.getRoamTransform){this._glViewHelper.updateTransform(e,t);var r=this._glViewHelper.getZoom(),i=Math.max((e.get("zoomScale")||0)*(r-1)+1,0);this._sizeScale=i,this._pointsBuilderList.forEach(function(o){o.setSizeScale(i)})}},_removeTransformInPoints:function(e){if(e)for(var n=[],t=0;t<e.length;t+=2)n[0]=e[t],n[1]=e[t+1],this._glViewHelper.removeTransformInPoint(n),e[t]=n[0],e[t+1]=n[1]},dispose:function(){this.groupGL.removeAll(),this._pointsBuilderList.forEach(function(e){e.dispose()})},remove:function(){this.groupGL.removeAll()}});(0,bt.D$)(function Yoe(e){e.registerChartView(Zoe),e.registerSeriesModel(joe),e.registerLayout({seriesType:"scatterGL",reset:function(n){var i,t=n.coordinateSystem,r=n.getData();if(t){var o=t.dimensions.map(function(f){return r.mapDimension(f)}).slice(0,2),d=[];1===o.length?i=function(f){for(var g=new Float32Array(2*(f.end-f.start)),_=f.start;_<f.end;_++){var C=2*(_-f.start),S=r.get(o[0],_),k=t.dataToPoint(S);g[C]=k[0],g[C+1]=k[1]}r.setLayout("points",g)}:2===o.length&&(i=function(f){for(var g=new Float32Array(2*(f.end-f.start)),_=f.start;_<f.end;_++){var C=2*(_-f.start),S=r.get(o[0],_),k=r.get(o[1],_);d[0]=S,d[1]=k,d=t.dataToPoint(d),g[C]=d[0],g[C+1]=d[1]}r.setLayout("points",g)})}return{progress:i}}})});var Xoe=H(5297);const Koe=H(4844).Z;var _w=bt.wJ.extend({type:"series.graphGL",visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,init:function(e){_w.superApply(this,"init",arguments),this.legendDataProvider=function(){return this._categoriesData},this._updateCategoriesData()},mergeOption:function(e){_w.superApply(this,"mergeOption",arguments),this._updateCategoriesData()},getFormattedLabel:function(e,n,t,r){var i=qy.getFormattedLabel(this,e,n,t,r);if(null==i){var o=this.getData();i=o.get(o.dimensions[o.dimensions.length-1],e)}return i},getInitialData:function(e,n){var t=e.edges||e.links||[],r=e.data||e.nodes||[],i=this;if(r&&t)return function Qoe(e,n,t,r,i){for(var o=new Xoe.ZP(r),d=0;d<e.length;d++)o.addNode(qr.firstNotNull(e[d].id,e[d].name,d),d);var f=[],g=[],_=0;for(d=0;d<n.length;d++){var C=n[d],S=C.source,k=C.target;o.addEdge(S,k,_)&&(g.push(C),f.push(qr.firstNotNull(C.id,S+" > "+k)),_++)}var z,te=bt._y.createDimensions(e,{coordDimensions:["value"]});(z=new bt.aV(te,t)).initData(e);var pe=new bt.aV(["value"],t);return pe.initData(g,f),i&&i(z,pe),Koe({mainData:z,struct:o,structAttr:"graph",datas:{node:z,edge:pe},datasAttr:{node:"data",edge:"edgeData"}}),o.update(),o}(r,t,this,!0,function o(d,f){d.wrapMethod("getItemModel",function(S){const te=i._categoriesModels[S.getShallow("category")];return te&&(te.parentModel=S.parentModel,S.parentModel=te),S});const g=n.getModel([]).getModel;function _(S,k){const z=g.call(this,S,k);return z.resolveParentPath=C,z}function C(S){if(S&&("label"===S[0]||"label"===S[1])){const k=S.slice();return"label"===S[0]?k[0]="edgeLabel":"label"===S[1]&&(k[1]="edgeLabel"),k}return S}f.wrapMethod("getItemModel",function(S){return S.resolveParentPath=C,S.getModel=_,S})}).data},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(e,n,t){if("edge"===t){var r=this.getData(),i=this.getDataParams(e,t),o=r.graph.getEdgeByIndex(e),d=r.getName(o.node1.dataIndex),f=r.getName(o.node2.dataIndex),g=[];return null!=d&&g.push(d),null!=f&&g.push(f),g=bt.WU.encodeHTML(g.join(" > ")),i.value&&(g+=" : "+bt.WU.encodeHTML(i.value)),g}return _w.superApply(this,"formatTooltip",arguments)},_updateCategoriesData:function(){var e=(this.option.categories||[]).map(function(t){return null!=t.value?t:Object.assign({value:0},t)}),n=new bt.aV(["value"],this);n.initData(e),this._categoriesData=n,this._categoriesModels=n.mapArray(function(t){return n.getItemModel(t,!0)})},setView:function(e){null!=e.zoom&&(this.option.zoom=e.zoom),null!=e.offset&&(this.option.offset=e.offset)},setNodePosition:function(e){for(var n=0;n<e.length/2;n++){var t=e[2*n],r=e[2*n+1],i=this.getData().getRawDataItem(n);i.x=t,i.y=r}},isAnimationEnabled:function(){return _w.superCall(this,"isAnimationEnabled")&&!("force"===this.get("layout")&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:10,z:2,legendHoverLink:!0,layout:"forceAtlas2",forceAtlas2:{initLayout:null,GPU:!0,steps:1,maxSteps:1e3,repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,edgeWeightInfluence:1,edgeWeight:[1,4],nodeWeight:[1,4],preventOverlap:!1,gravityCenter:null},focusNodeAdjacency:!0,focusNodeAdjacencyOn:"mouseover",left:"center",top:"center",symbol:"circle",symbolSize:5,roam:!1,center:null,zoom:1,label:{show:!1,formatter:"{b}",position:"right",distance:5,textStyle:{fontSize:14}},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}},animation:!1}});const qoe=_w;var So=Qa.vec2,bj=[[0,0],[1,1]],xj=Di.extend(function(){return{segmentScale:4,dynamic:!0,useNativeLine:!0,attributes:{position:new Di.Attribute("position","float",2,"POSITION"),normal:new Di.Attribute("normal","float",2),offset:new Di.Attribute("offset","float",1),color:new Di.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0,this._itemVertexOffsets=[]},setVertexCount:function(e){var n=this.attributes;this.vertexCount!==e&&(n.position.init(e),n.color.init(e),this.useNativeLine||(n.offset.init(e),n.normal.init(e)),e>65535?this.indices instanceof Uint16Array&&(this.indices=new Uint32Array(this.indices)):this.indices instanceof Uint32Array&&(this.indices=new Uint16Array(this.indices)))},setTriangleCount:function(e){this.triangleCount!==e&&(this.indices=0===e?null:this.vertexCount>65535?new Uint32Array(3*e):new Uint16Array(3*e))},_getCubicCurveApproxStep:function(e,n,t,r){return 1/(So.dist(e,n)+So.dist(t,n)+So.dist(r,t)+1)*this.segmentScale},getCubicCurveVertexCount:function(e,n,t,r){var i=this._getCubicCurveApproxStep(e,n,t,r),o=Math.ceil(1/i);return this.useNativeLine?2*o:2*o+2},getCubicCurveTriangleCount:function(e,n,t,r){var i=this._getCubicCurveApproxStep(e,n,t,r),o=Math.ceil(1/i);return this.useNativeLine?0:2*o},getLineVertexCount:function(){return this.getPolylineVertexCount(bj)},getLineTriangleCount:function(){return this.getPolylineTriangleCount(bj)},getPolylineVertexCount:function(e){var n;return n="number"==typeof e?e:"number"!=typeof e[0]?e.length:e.length/2,this.useNativeLine?2*(n-1):2*(n-1)+2},getPolylineTriangleCount:function(e){var n;return n="number"==typeof e?e:"number"!=typeof e[0]?e.length:e.length/2,this.useNativeLine?0:2*(n-1)},addCubicCurve:function(e,n,t,r,i,o){null==o&&(o=1);var d=e[0],f=e[1],g=n[0],_=n[1],C=t[0],S=t[1],k=r[0],z=r[1],te=this._getCubicCurveApproxStep(e,n,t,r),pe=te*te,Me=pe*te,Re=3*te,Fe=3*pe,Oe=6*pe,Be=6*Me,it=d-2*g+C,at=f-2*_+S,Ct=3*(g-C)-d+k,mt=3*(_-S)-f+z,Ft=d,nn=f,$t=(g-d)*Re+it*Fe+Ct*Me,pn=(_-f)*Re+at*Fe+mt*Me,mn=it*Oe+Ct*Be,sn=at*Oe+mt*Be,wn=Ct*Be,Gt=mt*Be,ln=0,Xt=0,Xn=Math.ceil(1/te),In=new Float32Array(3*(Xn+1)),ai=(In=[],0);for(Xt=0;Xt<Xn+1;Xt++)In[ai++]=Ft,In[ai++]=nn,Ft+=$t,nn+=pn,$t+=mn,pn+=sn,mn+=wn,sn+=Gt,(ln+=te)>1&&(Ft=$t>0?Math.min(Ft,k):Math.max(Ft,k),nn=pn>0?Math.min(nn,z):Math.max(nn,z));this.addPolyline(In,i,o)},addLine:function(e,n,t,r){this.addPolyline([e,n],t,r)},addPolyline:function(){var e=So.create(),n=So.create(),t=So.create(),r=So.create(),i=[],o=[],d=[];return function(f,g,_,C,S){if(f.length){var k="number"!=typeof f[0];if(null==S&&(S=k?f.length:f.length/2),!(S<2)){null==C&&(C=0),null==_&&(_=1),this._itemVertexOffsets.push(this._vertexOffset);for(var Be,z=k?"number"!=typeof g[0]:g.length/4===S,te=this.attributes.position,pe=this.attributes.color,Me=this.attributes.offset,Re=this.attributes.normal,Fe=this.indices,Oe=this._vertexOffset,it=0;it<S;it++){if(k)i=f[it+C],Be=z?g[it+C]:g;else if((i=i||[])[0]=f[at=2*it+C],i[1]=f[at+1],z){var Ct=4*it+C;(Be=Be||[])[0]=g[Ct],Be[1]=g[Ct+1],Be[2]=g[Ct+2],Be[3]=g[Ct+3]}else Be=g;if(this.useNativeLine)it>1&&(te.copy(Oe,Oe-1),pe.copy(Oe,Oe-1),Oe++);else{var mt,at;if(it<S-1)if(k?So.copy(o,f[it+1]):((o=o||[])[0]=f[at=2*(it+1)+C],o[1]=f[at+1]),it>0){So.sub(e,i,d),So.sub(n,o,i),So.normalize(e,e),So.normalize(n,n),So.add(r,e,n),So.normalize(r,r);var Ft=_/2*Math.min(1/So.dot(e,r),2);t[0]=-r[1],t[1]=r[0],mt=Ft}else So.sub(e,o,i),So.normalize(e,e),t[0]=-e[1],t[1]=e[0],mt=_/2;else So.sub(e,i,d),So.normalize(e,e),t[0]=-e[1],t[1]=e[0],mt=_/2;Re.set(Oe,t),Re.set(Oe+1,t),Me.set(Oe,mt),Me.set(Oe+1,-mt),So.copy(d,i),te.set(Oe,i),te.set(Oe+1,i),pe.set(Oe,Be),pe.set(Oe+1,Be),Oe+=2}if(this.useNativeLine)pe.set(Oe,Be),te.set(Oe,i),Oe++;else if(it>0){var nn=3*this._faceOffset;(Fe=this.indices)[nn]=Oe-4,Fe[nn+1]=Oe-3,Fe[nn+2]=Oe-2,Fe[nn+3]=Oe-3,Fe[nn+4]=Oe-1,Fe[nn+5]=Oe-2,this._faceOffset+=2}}this._vertexOffset=Oe}}}}(),setItemColor:function(e,n){for(var r=e<this._itemVertexOffsets.length-1?this._itemVertexOffsets[e+1]:this._vertexOffset,i=this._itemVertexOffsets[e];i<r;i++)this.attributes.color.set(i,n);this.dirty("color")}});bt.D5.defaults(xj.prototype,aw);const Cj=xj;lt.Shader.import("@export ecgl.forceAtlas2.updateNodeRepulsion\n\n#define NODE_COUNT 0\n\nuniform sampler2D positionTex;\n\nuniform vec2 textureSize;\nuniform float gravity;\nuniform float scaling;\nuniform vec2 gravityCenter;\n\nuniform bool strongGravityMode;\nuniform bool preventOverlap;\n\nvarying vec2 v_Texcoord;\n\nvoid main() {\n\n vec4 n0 = texture2D(positionTex, v_Texcoord);\n\n vec2 force = vec2(0.0);\n for (int i = 0; i < NODE_COUNT; i++) {\n vec2 uv = vec2(\n mod(float(i), textureSize.x) / (textureSize.x - 1.0),\n floor(float(i) / textureSize.x) / (textureSize.y - 1.0)\n );\n vec4 n1 = texture2D(positionTex, uv);\n\n vec2 dir = n0.xy - n1.xy;\n float d2 = dot(dir, dir);\n\n if (d2 > 0.0) {\n float factor = 0.0;\n if (preventOverlap) {\n float d = sqrt(d2);\n d = d - n0.w - n1.w;\n if (d > 0.0) {\n factor = scaling * n0.z * n1.z / (d * d);\n }\n else if (d < 0.0) {\n factor = scaling * 100.0 * n0.z * n1.z;\n }\n }\n else {\n factor = scaling * n0.z * n1.z / d2;\n }\n force += dir * factor;\n }\n }\n\n vec2 dir = gravityCenter - n0.xy;\n float d = 1.0;\n if (!strongGravityMode) {\n d = length(dir);\n }\n\n force += dir * n0.z * gravity / (d + 1.0);\n\n gl_FragColor = vec4(force, 0.0, 1.0);\n}\n@end\n\n@export ecgl.forceAtlas2.updateEdgeAttraction.vertex\n\nattribute vec2 node1;\nattribute vec2 node2;\nattribute float weight;\n\nuniform sampler2D positionTex;\nuniform float edgeWeightInfluence;\nuniform bool preventOverlap;\nuniform bool linLogMode;\n\nuniform vec2 windowSize: WINDOW_SIZE;\n\nvarying vec2 v_Force;\n\nvoid main() {\n\n vec4 n0 = texture2D(positionTex, node1);\n vec4 n1 = texture2D(positionTex, node2);\n\n vec2 dir = n1.xy - n0.xy;\n float d = length(dir);\n float w;\n if (edgeWeightInfluence == 0.0) {\n w = 1.0;\n }\n else if (edgeWeightInfluence == 1.0) {\n w = weight;\n }\n else {\n w = pow(weight, edgeWeightInfluence);\n }\n vec2 offset = vec2(1.0 / windowSize.x, 1.0 / windowSize.y);\n vec2 scale = vec2((windowSize.x - 1.0) / windowSize.x, (windowSize.y - 1.0) / windowSize.y);\n vec2 pos = node1 * scale * 2.0 - 1.0;\n gl_Position = vec4(pos + offset, 0.0, 1.0);\n gl_PointSize = 1.0;\n\n float factor;\n if (preventOverlap) {\n d = d - n1.w - n0.w;\n }\n if (d <= 0.0) {\n v_Force = vec2(0.0);\n return;\n }\n\n if (linLogMode) {\n factor = w * log(d) / d;\n }\n else {\n factor = w;\n }\n v_Force = dir * factor;\n}\n@end\n\n@export ecgl.forceAtlas2.updateEdgeAttraction.fragment\n\nvarying vec2 v_Force;\n\nvoid main() {\n gl_FragColor = vec4(v_Force, 0.0, 0.0);\n}\n@end\n\n@export ecgl.forceAtlas2.calcWeightedSum.vertex\n\nattribute vec2 node;\n\nvarying vec2 v_NodeUv;\n\nvoid main() {\n\n v_NodeUv = node;\n gl_Position = vec4(0.0, 0.0, 0.0, 1.0);\n gl_PointSize = 1.0;\n}\n@end\n\n@export ecgl.forceAtlas2.calcWeightedSum.fragment\n\nvarying vec2 v_NodeUv;\n\nuniform sampler2D positionTex;\nuniform sampler2D forceTex;\nuniform sampler2D forcePrevTex;\n\nvoid main() {\n vec2 force = texture2D(forceTex, v_NodeUv).rg;\n vec2 forcePrev = texture2D(forcePrevTex, v_NodeUv).rg;\n\n float mass = texture2D(positionTex, v_NodeUv).z;\n float swing = length(force - forcePrev) * mass;\n float traction = length(force + forcePrev) * 0.5 * mass;\n\n gl_FragColor = vec4(swing, traction, 0.0, 0.0);\n}\n@end\n\n@export ecgl.forceAtlas2.calcGlobalSpeed\n\nuniform sampler2D globalSpeedPrevTex;\nuniform sampler2D weightedSumTex;\nuniform float jitterTolerence;\n\nvoid main() {\n vec2 weightedSum = texture2D(weightedSumTex, vec2(0.5)).xy;\n float prevGlobalSpeed = texture2D(globalSpeedPrevTex, vec2(0.5)).x;\n float globalSpeed = jitterTolerence * jitterTolerence\n * weightedSum.y / weightedSum.x;\n if (prevGlobalSpeed > 0.0) {\n globalSpeed = min(globalSpeed / prevGlobalSpeed, 1.5) * prevGlobalSpeed;\n }\n gl_FragColor = vec4(globalSpeed, 0.0, 0.0, 1.0);\n}\n@end\n\n@export ecgl.forceAtlas2.updatePosition\n\nuniform sampler2D forceTex;\nuniform sampler2D forcePrevTex;\nuniform sampler2D positionTex;\nuniform sampler2D globalSpeedTex;\n\nvarying vec2 v_Texcoord;\n\nvoid main() {\n vec2 force = texture2D(forceTex, v_Texcoord).xy;\n vec2 forcePrev = texture2D(forcePrevTex, v_Texcoord).xy;\n vec4 node = texture2D(positionTex, v_Texcoord);\n\n float globalSpeed = texture2D(globalSpeedTex, vec2(0.5)).r;\n float swing = length(force - forcePrev);\n float speed = 0.1 * globalSpeed / (0.1 + globalSpeed * sqrt(swing));\n\n float df = length(force);\n if (df > 0.0) {\n speed = min(df * speed, 10.0) / df;\n\n gl_FragColor = vec4(node.xy + speed * force, node.zw);\n }\n else {\n gl_FragColor = node;\n }\n}\n@end\n\n@export ecgl.forceAtlas2.edges.vertex\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nattribute vec2 node;\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n\nuniform sampler2D positionTex;\n\nvoid main()\n{\n gl_Position = worldViewProjection * vec4(\n texture2D(positionTex, node).xy, -10.0, 1.0\n );\n v_Color = a_Color;\n}\n@end\n\n@export ecgl.forceAtlas2.edges.fragment\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\nvarying vec4 v_Color;\nvoid main() {\n gl_FragColor = color * v_Color;\n}\n@end");var fV={repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,scaling:1,edgeWeightInfluence:1,jitterTolerence:.1,preventOverlap:!1,dissuadeHubs:!1,gravityCenter:null};function Jo(e){var n={type:lt.Texture.FLOAT,minFilter:lt.Texture.NEAREST,magFilter:lt.Texture.NEAREST};this._positionSourceTex=new lt.Texture2D(n),this._positionSourceTex.flipY=!1,this._positionTex=new lt.Texture2D(n),this._positionPrevTex=new lt.Texture2D(n),this._forceTex=new lt.Texture2D(n),this._forcePrevTex=new lt.Texture2D(n),this._weightedSumTex=new lt.Texture2D(n),this._weightedSumTex.width=this._weightedSumTex.height=1,this._globalSpeedTex=new lt.Texture2D(n),this._globalSpeedPrevTex=new lt.Texture2D(n),this._globalSpeedTex.width=this._globalSpeedTex.height=1,this._globalSpeedPrevTex.width=this._globalSpeedPrevTex.height=1,this._nodeRepulsionPass=new so({fragment:lt.Shader.source("ecgl.forceAtlas2.updateNodeRepulsion")}),this._positionPass=new so({fragment:lt.Shader.source("ecgl.forceAtlas2.updatePosition")}),this._globalSpeedPass=new so({fragment:lt.Shader.source("ecgl.forceAtlas2.calcGlobalSpeed")}),this._copyPass=new so({fragment:lt.Shader.source("clay.compositor.output")});var t=function(r){r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ONE)};this._edgeForceMesh=new lt.Mesh({geometry:new lt.Geometry({attributes:{node1:new lt.Geometry.Attribute("node1","float",2),node2:new lt.Geometry.Attribute("node2","float",2),weight:new lt.Geometry.Attribute("weight","float",1)},dynamic:!0,mainAttribute:"node1"}),material:new lt.Material({transparent:!0,shader:lt.createShader("ecgl.forceAtlas2.updateEdgeAttraction"),blend:t,depthMask:!1,depthText:!1}),mode:lt.Mesh.POINTS}),this._weightedSumMesh=new lt.Mesh({geometry:new lt.Geometry({attributes:{node:new lt.Geometry.Attribute("node","float",2)},dynamic:!0,mainAttribute:"node"}),material:new lt.Material({transparent:!0,shader:lt.createShader("ecgl.forceAtlas2.calcWeightedSum"),blend:t,depthMask:!1,depthText:!1}),mode:lt.Mesh.POINTS}),this._framebuffer=new qo({depthBuffer:!1}),this._dummyCamera=new lt.OrthographicCamera({left:-1,right:1,top:1,bottom:-1,near:0,far:100}),this._globalSpeed=0}Jo.prototype.updateOption=function(e){for(var n in fV)this[n]=fV[n];var t=this._nodes.length;if(this.jitterTolerence=t>5e4?10:t>5e3?1:.1,this.scaling=t>100?2:10,e)for(var n in fV)null!=e[n]&&(this[n]=e[n]);if(this.repulsionByDegree)for(var r=this._positionSourceTex.pixels,i=0;i<this._nodes.length;i++)r[4*i+2]=(this._nodes[i].degree||0)+1},Jo.prototype._updateGravityCenter=function(e){var n=this._nodes,t=this._edges;if(this.gravityCenter)this._gravityCenter=this.gravityCenter;else{for(var r=[1/0,1/0],i=[-1/0,-1/0],o=0;o<n.length;o++)r[0]=Math.min(n[o].x,r[0]),r[1]=Math.min(n[o].y,r[1]),i[0]=Math.max(n[o].x,i[0]),i[1]=Math.max(n[o].y,i[1]);this._gravityCenter=[.5*(r[0]+i[0]),.5*(r[1]+i[1])]}for(o=0;o<t.length;o++){var d=t[o].node1,f=t[o].node2;n[d].degree=(n[d].degree||0)+1,n[f].degree=(n[f].degree||0)+1}},Jo.prototype.initData=function(e,n){this._nodes=e,this._edges=n,this._updateGravityCenter();var t=Math.ceil(Math.sqrt(e.length)),r=t,i=new Float32Array(t*r*4);this._resize(t,r);for(var o=0,d=0;d<e.length;d++){var f=e[d];i[o++]=f.x||0,i[o++]=f.y||0,i[o++]=f.mass||1,i[o++]=f.size||1}this._positionSourceTex.pixels=i;var g=this._edgeForceMesh.geometry,_=n.length;g.attributes.node1.init(2*_),g.attributes.node2.init(2*_),g.attributes.weight.init(2*_);var C=[];for(d=0;d<n.length;d++){var S=g.attributes,k=n[d].weight;null==k&&(k=1),S.node1.set(d,this.getNodeUV(n[d].node1,C)),S.node2.set(d,this.getNodeUV(n[d].node2,C)),S.weight.set(d,k),S.node1.set(d+_,this.getNodeUV(n[d].node2,C)),S.node2.set(d+_,this.getNodeUV(n[d].node1,C)),S.weight.set(d+_,k)}var z=this._weightedSumMesh.geometry;for(z.attributes.node.init(e.length),d=0;d<e.length;d++)z.attributes.node.set(d,this.getNodeUV(d,C));g.dirty(),z.dirty(),this._nodeRepulsionPass.material.define("fragment","NODE_COUNT",e.length),this._nodeRepulsionPass.material.setUniform("textureSize",[t,r]),this._inited=!1,this._frame=0},Jo.prototype.getNodes=function(){return this._nodes},Jo.prototype.getEdges=function(){return this._edges},Jo.prototype.step=function(e){this._inited||(this._initFromSource(e),this._inited=!0),this._frame++,this._framebuffer.attach(this._forceTex),this._framebuffer.bind(e);var n=this._nodeRepulsionPass;n.setUniform("strongGravityMode",this.strongGravityMode),n.setUniform("gravity",this.gravity),n.setUniform("gravityCenter",this._gravityCenter),n.setUniform("scaling",this.scaling),n.setUniform("preventOverlap",this.preventOverlap),n.setUniform("positionTex",this._positionPrevTex),n.render(e);var t=this._edgeForceMesh;t.material.set("linLogMode",this.linLogMode),t.material.set("edgeWeightInfluence",this.edgeWeightInfluence),t.material.set("preventOverlap",this.preventOverlap),t.material.set("positionTex",this._positionPrevTex),e.gl.enable(e.gl.BLEND),e.renderPass([t],this._dummyCamera),this._framebuffer.attach(this._weightedSumTex),e.gl.clearColor(0,0,0,0),e.gl.clear(e.gl.COLOR_BUFFER_BIT),e.gl.enable(e.gl.BLEND);var r=this._weightedSumMesh;r.material.set("positionTex",this._positionPrevTex),r.material.set("forceTex",this._forceTex),r.material.set("forcePrevTex",this._forcePrevTex),e.renderPass([r],this._dummyCamera),this._framebuffer.attach(this._globalSpeedTex);var i=this._globalSpeedPass;i.setUniform("globalSpeedPrevTex",this._globalSpeedPrevTex),i.setUniform("weightedSumTex",this._weightedSumTex),i.setUniform("jitterTolerence",this.jitterTolerence),e.gl.disable(e.gl.BLEND),i.render(e);var o=this._positionPass;this._framebuffer.attach(this._positionTex),o.setUniform("globalSpeedTex",this._globalSpeedTex),o.setUniform("positionTex",this._positionPrevTex),o.setUniform("forceTex",this._forceTex),o.setUniform("forcePrevTex",this._forcePrevTex),o.render(e),this._framebuffer.unbind(e),this._swapTexture()},Jo.prototype.update=function(e,n,t){null==n&&(n=1),n=Math.max(n,1);for(var r=0;r<n;r++)this.step(e);t&&t()},Jo.prototype.getNodePositionTexture=function(){return this._inited?this._positionPrevTex:this._positionSourceTex},Jo.prototype.getNodeUV=function(e,n){var t=this._positionTex.width,r=this._positionTex.height;return(n=n||[])[0]=e%t/(t-1),n[1]=Math.floor(e/t)/(r-1)||0,n},Jo.prototype.getNodePosition=function(e,n){var t=this._positionArr,r=this._positionTex.width,i=this._positionTex.height,o=r*i;(!t||t.length!==4*o)&&(t=this._positionArr=new Float32Array(4*o)),this._framebuffer.bind(e),this._framebuffer.attach(this._positionPrevTex),e.gl.readPixels(0,0,r,i,e.gl.RGBA,e.gl.FLOAT,t),this._framebuffer.unbind(e),n||(n=new Float32Array(2*this._nodes.length));for(var d=0;d<this._nodes.length;d++)n[2*d]=t[4*d],n[2*d+1]=t[4*d+1];return n},Jo.prototype.getTextureData=function(e,n){var t=this["_"+n+"Tex"],r=t.width,i=t.height;this._framebuffer.bind(e),this._framebuffer.attach(t);var o=new Float32Array(r*i*4);return e.gl.readPixels(0,0,r,i,e.gl.RGBA,e.gl.FLOAT,o),this._framebuffer.unbind(e),o},Jo.prototype.getTextureSize=function(){return{width:this._positionTex.width,height:this._positionTex.height}},Jo.prototype.isFinished=function(e){return this._frame>e},Jo.prototype._swapTexture=function(){var e=this._positionPrevTex;this._positionPrevTex=this._positionTex,this._positionTex=e,e=this._forcePrevTex,this._forcePrevTex=this._forceTex,this._forceTex=e,e=this._globalSpeedPrevTex,this._globalSpeedPrevTex=this._globalSpeedTex,this._globalSpeedTex=e},Jo.prototype._initFromSource=function(e){this._framebuffer.attach(this._positionPrevTex),this._framebuffer.bind(e),this._copyPass.setUniform("texture",this._positionSourceTex),this._copyPass.render(e),e.gl.clearColor(0,0,0,0),this._framebuffer.attach(this._forcePrevTex),e.gl.clear(e.gl.COLOR_BUFFER_BIT),this._framebuffer.attach(this._globalSpeedPrevTex),e.gl.clear(e.gl.COLOR_BUFFER_BIT),this._framebuffer.unbind(e)},Jo.prototype._resize=function(e,n){["_positionSourceTex","_positionTex","_positionPrevTex","_forceTex","_forcePrevTex"].forEach(function(t){this[t].width=e,this[t].height=n,this[t].dirty()},this)},Jo.prototype.dispose=function(e){this._framebuffer.dispose(e),this._copyPass.dispose(e),this._nodeRepulsionPass.dispose(e),this._positionPass.dispose(e),this._globalSpeedPass.dispose(e),this._edgeForceMesh.geometry.dispose(e),this._weightedSumMesh.geometry.dispose(e),this._positionSourceTex.dispose(e),this._positionTex.dispose(e),this._positionPrevTex.dispose(e),this._forceTex.dispose(e),this._forcePrevTex.dispose(e),this._weightedSumTex.dispose(e),this._globalSpeedTex.dispose(e),this._globalSpeedPrevTex.dispose(e)};const pV=Jo;var yw=function ese(){var e_create=function(){return new Float32Array(2)},e_dist=function(g,_){var C=_[0]-g[0],S=_[1]-g[1];return Math.sqrt(C*C+S*S)},e_len=function(g){var _=g[0],C=g[1];return Math.sqrt(_*_+C*C)},e_scaleAndAdd=function(g,_,C,S){return g[0]=_[0]+C[0]*S,g[1]=_[1]+C[1]*S,g},e_add=function(g,_,C){return g[0]=_[0]+C[0],g[1]=_[1]+C[1],g},e_sub=function(g,_,C){return g[0]=_[0]-C[0],g[1]=_[1]-C[1],g},e_copy=function(g,_){return g[0]=_[0],g[1]=_[1],g},e_set=function(g,_,C){return g[0]=_,g[1]=C,g};function n(){this.subRegions=[],this.nSubRegions=0,this.node=null,this.mass=0,this.centerOfMass=null,this.bbox=new Float32Array(4),this.size=0}var t=n.prototype;function r(){this.position=new Float32Array(2),this.force=e_create(),this.forcePrev=e_create(),this.mass=1,this.inDegree=0,this.outDegree=0}function i(g,_){this.source=g,this.target=_,this.weight=1}function o(){this.autoSettings=!0,this.barnesHutOptimize=!0,this.barnesHutTheta=1.5,this.repulsionByDegree=!0,this.linLogMode=!1,this.strongGravityMode=!1,this.gravity=1,this.scaling=1,this.edgeWeightInfluence=1,this.jitterTolerence=.1,this.preventOverlap=!1,this.dissuadeHubs=!1,this.rootRegion=new n,this.rootRegion.centerOfMass=e_create(),this.nodes=[],this.edges=[],this.bbox=new Float32Array(4),this.gravityCenter=null,this._massArr=null,this._swingingArr=null,this._sizeArr=null,this._globalSpeed=0}t.beforeUpdate=function(){for(var g=0;g<this.nSubRegions;g++)this.subRegions[g].beforeUpdate();this.mass=0,this.centerOfMass&&(this.centerOfMass[0]=0,this.centerOfMass[1]=0),this.nSubRegions=0,this.node=null},t.afterUpdate=function(){this.subRegions.length=this.nSubRegions;for(var g=0;g<this.nSubRegions;g++)this.subRegions[g].afterUpdate()},t.addNode=function(g){if(0===this.nSubRegions){if(null==this.node)return void(this.node=g);this._addNodeToSubRegion(this.node),this.node=null}this._addNodeToSubRegion(g),this._updateCenterOfMass(g)},t.findSubRegion=function(g,_){for(var C=0;C<this.nSubRegions;C++){var S=this.subRegions[C];if(S.contain(g,_))return S}},t.contain=function(g,_){return this.bbox[0]<=g&&this.bbox[2]>=g&&this.bbox[1]<=_&&this.bbox[3]>=_},t.setBBox=function(g,_,C,S){this.bbox[0]=g,this.bbox[1]=_,this.bbox[2]=C,this.bbox[3]=S,this.size=(C-g+S-_)/2},t._newSubRegion=function(){var g=this.subRegions[this.nSubRegions];return g||(g=new n,this.subRegions[this.nSubRegions]=g),this.nSubRegions++,g},t._addNodeToSubRegion=function(g){var _=this.findSubRegion(g.position[0],g.position[1]),C=this.bbox;if(!_){var z=(C[2]-C[0])/2,te=(C[3]-C[1])/2,pe=g.position[0]>=(C[0]+C[2])/2?1:0,Me=g.position[1]>=(C[1]+C[3])/2?1:0;(_=this._newSubRegion()).setBBox(pe*z+C[0],Me*te+C[1],(pe+1)*z+C[0],(Me+1)*te+C[1])}_.addNode(g)},t._updateCenterOfMass=function(g){null==this.centerOfMass&&(this.centerOfMass=new Float32Array(2));var _=this.centerOfMass[0]*this.mass,C=this.centerOfMass[1]*this.mass;_+=g.position[0]*g.mass,C+=g.position[1]*g.mass,this.mass+=g.mass,this.centerOfMass[0]=_/this.mass,this.centerOfMass[1]=C/this.mass};var g,d=o.prototype;d.initNodes=function(g,_,C){var S=_.length;this.nodes.length=0;for(var k=typeof C<"u",z=0;z<S;z++){var te=new r;te.position[0]=g[2*z],te.position[1]=g[2*z+1],te.mass=_[z],k&&(te.size=C[z]),this.nodes.push(te)}this._massArr=_,this._swingingArr=new Float32Array(S),k&&(this._sizeArr=C)},d.initEdges=function(g,_){var C=g.length/2;this.edges.length=0;for(var S=0;S<C;S++){var te=this.nodes[g[2*S]],pe=this.nodes[g[2*S+1]];if(!te||!pe)return void console.error("Node not exists, try initNodes before initEdges");te.outDegree++,pe.inDegree++;var Me=new i(te,pe);_&&(Me.weight=_[S]),this.edges.push(Me)}},d.updateSettings=function(){if(this.repulsionByDegree)for(var g=0;g<this.nodes.length;g++)(_=this.nodes[g]).mass=_.inDegree+_.outDegree+1;else for(g=0;g<this.nodes.length;g++){var _;(_=this.nodes[g]).mass=this._massArr[g]}},d.update=function(){var g=this.nodes.length;if(this.updateSettings(),this.updateBBox(),this.barnesHutOptimize){this.rootRegion.setBBox(this.bbox[0],this.bbox[1],this.bbox[2],this.bbox[3]),this.rootRegion.beforeUpdate();for(var _=0;_<g;_++)this.rootRegion.addNode(this.nodes[_]);this.rootRegion.afterUpdate()}for(_=0;_<g;_++)e_copy((C=this.nodes[_]).forcePrev,C.force),e_set(C.force,0,0);for(_=0;_<g;_++){var S=this.nodes[_];if(this.barnesHutOptimize)this.applyRegionToNodeRepulsion(this.rootRegion,S);else for(var k=_+1;k<g;k++)this.applyNodeToNodeRepulsion(S,this.nodes[k],!1);this.gravity>0&&(this.strongGravityMode?this.applyNodeStrongGravity(S):this.applyNodeGravity(S))}for(_=0;_<this.edges.length;_++)this.applyEdgeAttraction(this.edges[_]);var te=0,pe=0,Me=e_create();for(_=0;_<g;_++)te+=(Re=e_dist((C=this.nodes[_]).force,C.forcePrev))*C.mass,e_add(Me,C.force,C.forcePrev),pe+=.5*e_len(Me)*C.mass,this._swingingArr[_]=Re;var Oe=this.jitterTolerence*this.jitterTolerence*pe/te;for(this._globalSpeed>0&&(Oe=Math.min(Oe/this._globalSpeed,1.5)*this._globalSpeed),this._globalSpeed=Oe,_=0;_<g;_++){var C=this.nodes[_],Re=this._swingingArr[_],Be=.1*Oe/(1+Oe*Math.sqrt(Re)),it=e_len(C.force);it>0&&(Be=Math.min(it*Be,10)/it,e_scaleAndAdd(C.position,C.position,C.force,Be))}},d.applyRegionToNodeRepulsion=(g=e_create(),function(C,S){if(C.node)this.applyNodeToNodeRepulsion(C.node,S,!0);else{e_sub(g,S.position,C.centerOfMass);var k=g[0]*g[0]+g[1]*g[1];if(k>this.barnesHutTheta*C.size*C.size)e_scaleAndAdd(S.force,S.force,g,this.scaling*S.mass*C.mass/k);else for(var te=0;te<C.nSubRegions;te++)this.applyRegionToNodeRepulsion(C.subRegions[te],S)}}),d.applyNodeToNodeRepulsion=function(){var g=e_create();return function(C,S,k){if(C!=S){e_sub(g,C.position,S.position);var z=g[0]*g[0]+g[1]*g[1];if(0!==z){var te;if(this.preventOverlap){var pe=Math.sqrt(z);if((pe=pe-C.size-S.size)>0)te=this.scaling*C.mass*S.mass/(pe*pe);else{if(!(pe<0))return;te=100*this.scaling*C.mass*S.mass}}else te=this.scaling*C.mass*S.mass/z;e_scaleAndAdd(C.force,C.force,g,te),e_scaleAndAdd(S.force,S.force,g,-te)}}}}(),d.applyEdgeAttraction=function(){var g=e_create();return function(C){var S=C.source,k=C.target;e_sub(g,S.position,k.position);var te,pe,z=e_len(g);te=0===this.edgeWeightInfluence?1:1===this.edgeWeightInfluence?C.weight:Math.pow(C.weight,this.edgeWeightInfluence),this.preventOverlap&&(z=z-S.size-k.size)<=0||(pe=this.linLogMode?-te*Math.log(z+1)/(z+1):-te,e_scaleAndAdd(S.force,S.force,g,pe),e_scaleAndAdd(k.force,k.force,g,-pe))}}(),d.applyNodeGravity=function(){var g=e_create();return function(_){e_sub(g,this.gravityCenter,_.position);var C=e_len(g);e_scaleAndAdd(_.force,_.force,g,this.gravity*_.mass/(C+1))}}(),d.applyNodeStrongGravity=function(){var g=e_create();return function(_){e_sub(g,this.gravityCenter,_.position),e_scaleAndAdd(_.force,_.force,g,this.gravity*_.mass)}}(),d.updateBBox=function(){for(var g=1/0,_=1/0,C=-1/0,S=-1/0,k=0;k<this.nodes.length;k++){var z=this.nodes[k].position;g=Math.min(g,z[0]),_=Math.min(_,z[1]),C=Math.max(C,z[0]),S=Math.max(S,z[1])}this.bbox[0]=g,this.bbox[1]=_,this.bbox[2]=C,this.bbox[3]=S},d.getGlobalSpeed=function(){return this._globalSpeed};var f=null;self.onmessage=function(g){switch(g.data.cmd){case"init":(f=new o).initNodes(g.data.nodesPosition,g.data.nodesMass,g.data.nodesSize),f.initEdges(g.data.edges,g.data.edgesWeight);break;case"updateConfig":if(f)for(var _ in g.data.config)f[_]=g.data.config[_];break;case"update":var C=g.data.steps;if(f){for(var S=0;S<C;S++)f.update();var k=f.nodes.length,z=new Float32Array(2*k);for(S=0;S<k;S++){var te=f.nodes[S];z[2*S]=te.position[0],z[2*S+1]=te.position[1]}self.postMessage({buffer:z.buffer,globalSpeed:f.getGlobalSpeed()},[z.buffer])}else{var pe=new Float32Array;self.postMessage({buffer:pe.buffer,globalSpeed:f.getGlobalSpeed()},[pe.buffer])}}}}.toString();yw=yw.slice(yw.indexOf("{")+1,yw.lastIndexOf("}"));var bw={barnesHutOptimize:!0,barnesHutTheta:1.5,repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,scaling:1,edgeWeightInfluence:1,jitterTolerence:.1,preventOverlap:!1,dissuadeHubs:!1,gravityCenter:null},Xl=function(e){for(var n in bw)this[n]=bw[n];if(e)for(var n in e)this[n]=e[n];this._nodes=[],this._edges=[],this._disposed=!1,this._positionTex=new $r({type:hr.FLOAT,flipY:!1,minFilter:hr.NEAREST,magFilter:hr.NEAREST})};Xl.prototype.initData=function(e,n){var t=new Blob([yw]),r=window.URL.createObjectURL(t);this._worker=new Worker(r),this._worker.onmessage=this._$onupdate.bind(this),this._nodes=e,this._edges=n,this._frame=0;for(var i=e.length,o=n.length,d=new Float32Array(2*i),f=new Float32Array(i),g=new Float32Array(i),_=new Float32Array(2*o),C=new Float32Array(o),S=0;S<e.length;S++){var k=e[S];d[2*S]=k.x,d[2*S+1]=k.y,f[S]=k.mass??1,g[S]=k.size??1}for(S=0;S<n.length;S++){var z=n[S],pe=z.node2;_[2*S]=z.node1,_[2*S+1]=pe,C[S]=z.weight??1}var Me=Math.ceil(Math.sqrt(e.length)),Re=Me,Fe=new Float32Array(Me*Re*4),Oe=this._positionTex;Oe.width=Me,Oe.height=Re,Oe.pixels=Fe,this._worker.postMessage({cmd:"init",nodesPosition:d,nodesMass:f,nodesSize:g,edges:_,edgesWeight:C}),this._globalSpeed=1/0},Xl.prototype.updateOption=function(e){var n={};for(var t in bw)n[t]=bw[t];var r=this._nodes,i=this._edges,o=r.length;if(n.jitterTolerence=o>5e4?10:o>5e3?1:.1,n.scaling=o>100?2:10,n.barnesHutOptimize=o>1e3,e)for(var t in bw)null!=e[t]&&(n[t]=e[t]);if(!n.gravityCenter){for(var d=[1/0,1/0],f=[-1/0,-1/0],g=0;g<r.length;g++)d[0]=Math.min(r[g].x,d[0]),d[1]=Math.min(r[g].y,d[1]),f[0]=Math.max(r[g].x,f[0]),f[1]=Math.max(r[g].y,f[1]);n.gravityCenter=[.5*(d[0]+f[0]),.5*(d[1]+f[1])]}for(g=0;g<i.length;g++){var _=i[g].node1,C=i[g].node2;r[_].degree=(r[_].degree||0)+1,r[C].degree=(r[C].degree||0)+1}this._worker&&this._worker.postMessage({cmd:"updateConfig",config:n})},Xl.prototype.update=function(e,n,t){null==n&&(n=1),n=Math.max(n,1),this._frame+=n,this._onupdate=t,this._worker&&this._worker.postMessage({cmd:"update",steps:Math.round(n)})},Xl.prototype._$onupdate=function(e){if(!this._disposed){var n=new Float32Array(e.data.buffer);this._globalSpeed=e.data.globalSpeed,this._positionArr=n,this._updateTexture(n),this._onupdate&&this._onupdate()}},Xl.prototype.getNodePositionTexture=function(){return this._positionTex},Xl.prototype.getNodeUV=function(e,n){var t=this._positionTex.width,r=this._positionTex.height;return(n=n||[])[0]=e%t/(t-1),n[1]=Math.floor(e/t)/(r-1),n},Xl.prototype.getNodes=function(){return this._nodes},Xl.prototype.getEdges=function(){return this._edges},Xl.prototype.isFinished=function(e){return this._frame>e},Xl.prototype.getNodePosition=function(e,n){if(n||(n=new Float32Array(2*this._nodes.length)),this._positionArr)for(var t=0;t<this._positionArr.length;t++)n[t]=this._positionArr[t];return n},Xl.prototype._updateTexture=function(e){for(var n=this._positionTex.pixels,t=0,r=0;r<e.length;)n[t++]=e[r++],n[t++]=e[r++],n[t++]=1,n[t++]=1;this._positionTex.dirty()},Xl.prototype.dispose=function(e){this._disposed=!0,this._worker=null};const wj=Xl;var tse=Gs.extend(function(){return{zr:null,viewGL:null,minZoom:.2,maxZoom:5,_needsUpdate:!1,_dx:0,_dy:0,_zoom:1}},function(){this._mouseDownHandler=this._mouseDownHandler.bind(this),this._mouseWheelHandler=this._mouseWheelHandler.bind(this),this._mouseMoveHandler=this._mouseMoveHandler.bind(this),this._mouseUpHandler=this._mouseUpHandler.bind(this),this._update=this._update.bind(this)},{init:function(){var e=this.zr;e.on("mousedown",this._mouseDownHandler),e.on("mousewheel",this._mouseWheelHandler),e.on("globalout",this._mouseUpHandler),e.animation.on("frame",this._update)},setTarget:function(e){this._target=e},setZoom:function(e){this._zoom=Math.max(Math.min(e,this.maxZoom),this.minZoom),this._needsUpdate=!0},setOffset:function(e){this._dx=e[0],this._dy=e[1],this._needsUpdate=!0},getZoom:function(){return this._zoom},getOffset:function(){return[this._dx,this._dy]},_update:function(){if(this._target&&this._needsUpdate){var e=this._target,n=this._zoom;e.position.x=this._dx,e.position.y=this._dy,e.scale.set(n,n,n),this.zr.refresh(),this._needsUpdate=!1,this.trigger("update")}},_mouseDownHandler:function(e){if(!e.target){var n=e.offsetX,t=e.offsetY;if(!this.viewGL||this.viewGL.containPoint(n,t)){this.zr.on("mousemove",this._mouseMoveHandler),this.zr.on("mouseup",this._mouseUpHandler);var r=this._convertPos(n,t);this._x=r.x,this._y=r.y}}},_convertPos:function(e,n){var t=this.viewGL.camera,r=this.viewGL.viewport;return{x:(e-r.x)/r.width*(t.right-t.left)+t.left,y:(n-r.y)/r.height*(t.bottom-t.top)+t.top}},_mouseMoveHandler:function(e){var n=this._convertPos(e.offsetX,e.offsetY);this._dx+=n.x-this._x,this._dy+=n.y-this._y,this._x=n.x,this._y=n.y,this._needsUpdate=!0},_mouseUpHandler:function(e){this.zr.off("mousemove",this._mouseMoveHandler),this.zr.off("mouseup",this._mouseUpHandler)},_mouseWheelHandler:function(e){var n=(e=e.event).wheelDelta||-e.detail;if(0!==n){var t=e.offsetX,r=e.offsetY;if(!this.viewGL||this.viewGL.containPoint(t,r)){var i=n>0?1.1:.9,o=Math.max(Math.min(this._zoom*i,this.maxZoom),this.minZoom);i=o/this._zoom;var d=this._convertPos(t,r),g=(d.y-this._dy)*(i-1);this._dx-=(d.x-this._dx)*(i-1),this._dy-=g,this._zoom=o,this._needsUpdate=!0}}},dispose:function(){var e=this.zr;e.off("mousedown",this._mouseDownHandler),e.off("mousemove",this._mouseMoveHandler),e.off("mouseup",this._mouseUpHandler),e.off("mousewheel",this._mouseWheelHandler),e.off("globalout",this._mouseUpHandler),e.animation.off("frame",this._update)}});const nse=tse;var iP=Qa.vec2;lt.Shader.import("@export ecgl.lines2D.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nattribute vec2 position: POSITION;\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n\n#ifdef POSITIONTEXTURE_ENABLED\nuniform sampler2D positionTexture;\n#endif\n\nvoid main()\n{\n gl_Position = worldViewProjection * vec4(position, -10.0, 1.0);\n\n v_Color = a_Color;\n}\n\n@end\n\n@export ecgl.lines2D.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nvarying vec4 v_Color;\n\nvoid main()\n{\n gl_FragColor = color * v_Color;\n}\n@end\n\n\n@export ecgl.meshLines2D.vertex\n\nattribute vec2 position: POSITION;\nattribute vec2 normal;\nattribute float offset;\nattribute vec4 a_Color : COLOR;\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform vec4 viewport : VIEWPORT;\n\nvarying vec4 v_Color;\nvarying float v_Miter;\n\nvoid main()\n{\n vec4 p2 = worldViewProjection * vec4(position + normal, -10.0, 1.0);\n gl_Position = worldViewProjection * vec4(position, -10.0, 1.0);\n\n p2.xy /= p2.w;\n gl_Position.xy /= gl_Position.w;\n\n vec2 N = normalize(p2.xy - gl_Position.xy);\n gl_Position.xy += N * offset / viewport.zw * 2.0;\n\n gl_Position.xy *= gl_Position.w;\n\n v_Color = a_Color;\n}\n@end\n\n\n@export ecgl.meshLines2D.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nvarying vec4 v_Color;\nvarying float v_Miter;\n\nvoid main()\n{\n gl_FragColor = color * v_Color;\n}\n\n@end");var ise=1;const ase=bt.TA.extend({type:"graphGL",__ecgl__:!0,init:function(e,n){this.groupGL=new lt.Node,this.viewGL=new Tf("orthographic"),this.viewGL.camera.left=this.viewGL.camera.right=0,this.viewGL.add(this.groupGL),this._pointsBuilder=new vw(!0,n),this._forceEdgesMesh=new lt.Mesh({material:new lt.Material({shader:lt.createShader("ecgl.forceAtlas2.edges"),transparent:!0,depthMask:!1,depthTest:!1}),$ignorePicking:!0,geometry:new lt.Geometry({attributes:{node:new lt.Geometry.Attribute("node","float",2),color:new lt.Geometry.Attribute("color","float",4,"COLOR")},dynamic:!0,mainAttribute:"node"}),renderOrder:-1,mode:lt.Mesh.LINES}),this._edgesMesh=new lt.Mesh({material:new lt.Material({shader:lt.createShader("ecgl.meshLines2D"),transparent:!0,depthMask:!1,depthTest:!1}),$ignorePicking:!0,geometry:new Cj({useNativeLine:!1,dynamic:!0}),renderOrder:-1,culling:!1}),this._layoutId=0,this._control=new nse({zr:n.getZr(),viewGL:this.viewGL}),this._control.setTarget(this.groupGL),this._control.init(),this._clickHandler=this._clickHandler.bind(this)},render:function(e,n,t){this.groupGL.add(this._pointsBuilder.rootNode),this._model=e,this._api=t,this._initLayout(e,n,t),this._pointsBuilder.update(e,n,t),this._forceLayoutInstance instanceof pV||this.groupGL.remove(this._forceEdgesMesh),this._updateCamera(e,t),this._control.off("update"),this._control.on("update",function(){t.dispatchAction({type:"graphGLRoam",seriesId:e.id,zoom:this._control.getZoom(),offset:this._control.getOffset()}),this._pointsBuilder.updateView(this.viewGL.camera)},this),this._control.setZoom(qr.firstNotNull(e.get("zoom"),1)),this._control.setOffset(e.get("offset")||[0,0]);var r=this._pointsBuilder.getPointsMesh();if(r.off("mousemove",this._mousemoveHandler),r.off("mouseout",this._mouseOutHandler,this),t.getZr().off("click",this._clickHandler),this._pointsBuilder.highlightOnMouseover=!0,e.get("focusNodeAdjacency")){var i=e.get("focusNodeAdjacencyOn");"click"===i?t.getZr().on("click",this._clickHandler):"mouseover"===i&&(r.on("mousemove",this._mousemoveHandler,this),r.on("mouseout",this._mouseOutHandler,this),this._pointsBuilder.highlightOnMouseover=!1)}this._lastMouseOverDataIndex=-1},_clickHandler:function(e){if(!this._layouting){var n=this._pointsBuilder.getPointsMesh().dataIndex;this._api.dispatchAction(n>=0?{type:"graphGLFocusNodeAdjacency",seriesId:this._model.id,dataIndex:n}:{type:"graphGLUnfocusNodeAdjacency",seriesId:this._model.id})}},_mousemoveHandler:function(e){if(!this._layouting){var n=this._pointsBuilder.getPointsMesh().dataIndex;n>=0?n!==this._lastMouseOverDataIndex&&this._api.dispatchAction({type:"graphGLFocusNodeAdjacency",seriesId:this._model.id,dataIndex:n}):this._mouseOutHandler(e),this._lastMouseOverDataIndex=n}},_mouseOutHandler:function(e){this._layouting||(this._api.dispatchAction({type:"graphGLUnfocusNodeAdjacency",seriesId:this._model.id}),this._lastMouseOverDataIndex=-1)},_updateForceEdgesGeometry:function(e,n){var t=this._forceEdgesMesh.geometry,r=n.getEdgeData(),i=0,o=this._forceLayoutInstance,d=2*r.count();t.attributes.node.init(d),t.attributes.color.init(d),r.each(function(f){var g=e[f];t.attributes.node.set(i,o.getNodeUV(g.node1)),t.attributes.node.set(i+1,o.getNodeUV(g.node2));var _=Fo(r,g.dataIndex),C=lt.parseColor(_);C[3]*=qr.firstNotNull(Bo(r,g.dataIndex),1),t.attributes.color.set(i,C),t.attributes.color.set(i+1,C),i+=2}),t.dirty()},_updateMeshLinesGeometry:function(){var n=this._model.getEdgeData(),e=this._edgesMesh.geometry,t=(n=this._model.getEdgeData(),this._model.getData().getLayout("points"));e.resetOffset(),e.setVertexCount(n.count()*e.getLineVertexCount()),e.setTriangleCount(n.count()*e.getLineTriangleCount());var r=[],i=[],o=["lineStyle","width"];this._originalEdgeColors=new Float32Array(4*n.count()),this._edgeIndicesMap=new Float32Array(n.count()),n.each(function(d){var f=n.graph.getEdgeByIndex(d),g=2*f.node1.dataIndex,_=2*f.node2.dataIndex;r[0]=t[g],r[1]=t[g+1],i[0]=t[_],i[1]=t[_+1];var C=Fo(n,f.dataIndex),S=lt.parseColor(C);S[3]*=qr.firstNotNull(Bo(n,f.dataIndex),1);var k=n.getItemModel(f.dataIndex),z=qr.firstNotNull(k.get(o),1)*this._api.getDevicePixelRatio();e.addLine(r,i,S,z);for(var te=0;te<4;te++)this._originalEdgeColors[4*f.dataIndex+te]=S[te];this._edgeIndicesMap[f.dataIndex]=d},this),e.dirty()},_updateForceNodesGeometry:function(e){for(var n=this._pointsBuilder.getPointsMesh(),t=[],r=0;r<e.count();r++)this._forceLayoutInstance.getNodeUV(r,t),n.geometry.attributes.position.set(r,t);n.geometry.dirty("position")},_initLayout:function(e,n,t){var r=e.get("layout"),i=e.getGraph(),o=e.getBoxLayoutParams(),d=(0,$I.ME)(o,{width:t.getWidth(),height:t.getHeight()});"force"===r&&(r="forceAtlas2"),this.stopLayout(e,n,t,{beforeLayout:!0});var f=e.getData(),g=e.getData();if("forceAtlas2"===r){var _=e.getModel("forceAtlas2"),C=this._forceLayoutInstance,S=[],k=[],z=f.getDataExtent("value"),te=g.getDataExtent("value"),pe=qr.firstNotNull(_.get("edgeWeight"),1),Me=qr.firstNotNull(_.get("nodeWeight"),1);"number"==typeof pe&&(pe=[pe,pe]),"number"==typeof Me&&(Me=[Me,Me]);var Re=0,Fe={},Oe=new Float32Array(2*f.count());if(i.eachNode(function(it){var mt,Ft,at=it.dataIndex,Ct=f.get("value",at);if(f.hasItemOption){var nn=f.getItemModel(at);mt=nn.get("x"),Ft=nn.get("y")}null==mt&&(mt=d.x+Math.random()*d.width,Ft=d.y+Math.random()*d.height),Oe[2*Re]=mt,Oe[2*Re+1]=Ft,Fe[it.id]=Re++;var $t=bt.Rx.linearMap(Ct,z,Me);isNaN($t)&&($t=isNaN(Me[0])?1:Me[0]),S.push({x:mt,y:Ft,mass:$t,size:f.getItemVisual(at,"symbolSize")})}),f.setLayout("points",Oe),i.eachEdge(function(it){var at=it.dataIndex,Ct=f.get("value",at),mt=bt.Rx.linearMap(Ct,te,pe);isNaN(mt)&&(mt=isNaN(pe[0])?1:pe[0]),k.push({node1:Fe[it.node1.id],node2:Fe[it.node2.id],weight:mt,dataIndex:at})}),!C){var Be=_.get("GPU");this._forceLayoutInstance&&(Be&&!(this._forceLayoutInstance instanceof pV)||!Be&&!(this._forceLayoutInstance instanceof wj))&&(this._forceLayoutInstanceToDispose=this._forceLayoutInstance),C=this._forceLayoutInstance=Be?new pV:new wj}C.initData(S,k),C.updateOption(_.option),this._updateForceEdgesGeometry(C.getEdges(),e),this._updatePositionTexture(),t.dispatchAction({type:"graphGLStartLayout",from:this.uid})}else Oe=new Float32Array(2*f.count()),Re=0,i.eachNode(function(Ct){var Ft,nn;if(f.hasItemOption){var $t=f.getItemModel(Ct.dataIndex);Ft=$t.get("x"),nn=$t.get("y")}Oe[Re++]=Ft,Oe[Re++]=nn}),f.setLayout("points",Oe),this._updateAfterLayout(e,n,t)},_updatePositionTexture:function(){var e=this._forceLayoutInstance.getNodePositionTexture();this._pointsBuilder.setPositionTexture(e),this._forceEdgesMesh.material.set("positionTex",e)},startLayout:function(e,n,o,r){if(!r||null==r.from||r.from===this.uid){var i=this.viewGL,d=(o=this._api,this._forceLayoutInstance),f=this._model.getData(),g=this._model.getModel("forceAtlas2");if(d&&(this.groupGL.remove(this._edgesMesh),this.groupGL.add(this._forceEdgesMesh),this._forceLayoutInstance)){this._updateForceNodesGeometry(e.getData()),this._pointsBuilder.hideLabels();var _=this,C=this._layoutId=ise++,S=g.getShallow("maxSteps"),k=g.getShallow("steps"),z=0,te=Math.max(2*k,20),pe=function(Me){if(Me===_._layoutId){if(d.isFinished(S))return o.dispatchAction({type:"graphGLStopLayout",from:_.uid}),void o.dispatchAction({type:"graphGLFinishLayout",points:f.getLayout("points"),from:_.uid});d.update(i.layer.renderer,k,function(){_._updatePositionTexture(),(z+=k)>=te&&(_._syncNodePosition(e),z=0),o.getZr().refresh(),(0,E3.Z)(function(){pe(Me)})})}};(0,E3.Z)(function(){_._forceLayoutInstanceToDispose&&(_._forceLayoutInstanceToDispose.dispose(i.layer.renderer),_._forceLayoutInstanceToDispose=null),pe(C)}),this._layouting=!0}}},stopLayout:function(e,n,t,r){r&&null!=r.from&&r.from!==this.uid||(this._layoutId=0,this.groupGL.remove(this._forceEdgesMesh),this.groupGL.add(this._edgesMesh),this._forceLayoutInstance&&(!this.viewGL.layer||(r&&r.beforeLayout||(this._syncNodePosition(e),this._updateAfterLayout(e,n,t)),this._api.getZr().refresh(),this._layouting=!1)))},_syncNodePosition:function(e){var n=this._forceLayoutInstance.getNodePosition(this.viewGL.layer.renderer);e.getData().setLayout("points",n),e.setNodePosition(n)},_updateAfterLayout:function(e,n,t){this._updateMeshLinesGeometry(),this._pointsBuilder.removePositionTexture(),this._pointsBuilder.updateLayout(e,n,t),this._pointsBuilder.updateView(this.viewGL.camera),this._pointsBuilder.updateLabels(),this._pointsBuilder.showLabels()},focusNodeAdjacency:function(e,n,t,r){var i=this._model.getData();this._downplayAll();var f=[],g=i.graph.getNodeByIndex(r.dataIndex);f.push(g),g.edges.forEach(function(C){C.dataIndex<0||(C.node1!==g&&f.push(C.node1),C.node2!==g&&f.push(C.node2))},this),this._pointsBuilder.fadeOutAll(.05),this._fadeOutEdgesAll(.05),f.forEach(function(C){this._pointsBuilder.highlight(i,C.dataIndex)},this),this._pointsBuilder.updateLabels(f.map(function(C){return C.dataIndex}));var _=[];g.edges.forEach(function(C){C.dataIndex>=0&&(this._highlightEdge(C.dataIndex),_.push(C))},this),this._focusNodes=f,this._focusEdges=_},unfocusNodeAdjacency:function(e,n,t,r){this._downplayAll(),this._pointsBuilder.fadeInAll(),this._fadeInEdgesAll(),this._pointsBuilder.updateLabels()},_highlightEdge:function(e){var n=this._model.getEdgeData().getItemModel(e),t=lt.parseColor(n.get("emphasis.lineStyle.color")||n.get("lineStyle.color")),r=qr.firstNotNull(n.get("emphasis.lineStyle.opacity"),n.get("lineStyle.opacity"),1);t[3]*=r,this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[e],t)},_downplayAll:function(){this._focusNodes&&this._focusNodes.forEach(function(e){this._pointsBuilder.downplay(this._model.getData(),e.dataIndex)},this),this._focusEdges&&this._focusEdges.forEach(function(e){this._downplayEdge(e.dataIndex)},this)},_downplayEdge:function(e){var n=this._getColor(e,[]);this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[e],n)},_setEdgeFade:function(){var e=[];return function(n,t){this._getColor(n,e),e[3]*=t,this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[n],e)}}(),_getColor:function(e,n){for(var t=0;t<4;t++)n[t]=this._originalEdgeColors[4*e+t];return n},_fadeOutEdgesAll:function(e){this._model.getData().graph.eachEdge(function(t){this._setEdgeFade(t.dataIndex,e)},this)},_fadeInEdgesAll:function(){this._fadeOutEdgesAll(1)},_updateCamera:function(e,n){this.viewGL.setViewport(0,0,n.getWidth(),n.getHeight(),n.getDevicePixelRatio());for(var t=this.viewGL.camera,i=e.getData().getLayout("points"),o=iP.create(1/0,1/0),d=iP.create(-1/0,-1/0),f=[],g=0;g<i.length;)f[0]=i[g++],f[1]=i[g++],iP.min(o,o,f),iP.max(d,d,f);var _=(d[1]+o[1])/2,C=(d[0]+o[0])/2;if(!(C>t.left&&C<t.right&&_<t.bottom&&_>t.top)){var S=Math.max(d[0]-o[0],10),k=S/n.getWidth()*n.getHeight();k*=1.4,o[0]-=.2*(S*=1.4),t.left=o[0],t.top=_-k/2,t.bottom=_+k/2,t.right=S+o[0],t.near=0,t.far=100}},dispose:function(){this._forceLayoutInstance&&this._forceLayoutInstance.dispose(this.viewGL.layer.renderer),this.groupGL.removeAll(),this._layoutId=-1,this._pointsBuilder.dispose()},remove:function(){this.groupGL.removeAll(),this._control.dispose()}});function aP(e){return e instanceof Array||(e=[e,e]),e}(0,bt.D$)(function ose(e){function n(){}e.registerChartView(ase),e.registerSeriesModel(qoe),e.registerVisual(function(t){const r={};t.eachSeriesByType("graphGL",function(i){var o=i.getCategoriesData(),d=i.getData(),f={};o.each(function(g){var _=o.getName(g);f["ec-"+_]=g;var C=o.getItemModel(g),S=C.getModel("itemStyle").getItemStyle();S.fill||(S.fill=i.getColorFromPalette(_,r)),o.setItemVisual(g,"style",S);var k=["symbol","symbolSize","symbolKeepAspect"];for(let te=0;te<k.length;te++){var z=C.getShallow(k[te],!0);null!=z&&o.setItemVisual(g,k[te],z)}}),o.count()&&d.each(function(g){let C=d.getItemModel(g).getShallow("category");if(null!=C){"string"==typeof C&&(C=f["ec-"+C]);var S=o.getItemVisual(C,"style"),k=d.ensureUniqueItemVisual(g,"style");bt.D5.extend(k,S);var z=["symbol","symbolSize","symbolKeepAspect"];for(let te=0;te<z.length;te++)d.setItemVisual(g,z[te],o.getItemVisual(C,z[te]))}})})}),e.registerVisual(function(t){t.eachSeriesByType("graphGL",function(r){var i=r.getGraph(),o=r.getEdgeData(),d=aP(r.get("edgeSymbol")),f=aP(r.get("edgeSymbolSize"));o.setVisual("drawType","stroke"),o.setVisual("fromSymbol",d&&d[0]),o.setVisual("toSymbol",d&&d[1]),o.setVisual("fromSymbolSize",f&&f[0]),o.setVisual("toSymbolSize",f&&f[1]),o.setVisual("style",r.getModel("lineStyle").getLineStyle()),o.each(function(g){var _=o.getItemModel(g),C=i.getEdgeByIndex(g),S=aP(_.getShallow("symbol",!0)),k=aP(_.getShallow("symbolSize",!0)),z=_.getModel("lineStyle").getLineStyle(),te=o.ensureUniqueItemVisual(g,"style");switch(bt.D5.extend(te,z),te.stroke){case"source":var pe=C.node1.getVisual("style");te.stroke=pe&&pe.fill;break;case"target":pe=C.node2.getVisual("style"),te.stroke=pe&&pe.fill}S[0]&&C.setVisual("fromSymbol",S[0]),S[1]&&C.setVisual("toSymbol",S[1]),k[0]&&C.setVisual("fromSymbolSize",k[0]),k[1]&&C.setVisual("toSymbolSize",k[1])})})}),e.registerAction({type:"graphGLRoam",event:"graphglroam",update:"series.graphGL:roam"},function(t,r){r.eachComponent({mainType:"series",query:t},function(i){i.setView(t)})}),e.registerAction({type:"graphGLStartLayout",event:"graphgllayoutstarted",update:"series.graphGL:startLayout"},n),e.registerAction({type:"graphGLStopLayout",event:"graphgllayoutstopped",update:"series.graphGL:stopLayout"},n),e.registerAction({type:"graphGLFocusNodeAdjacency",event:"graphGLFocusNodeAdjacency",update:"series.graphGL:focusNodeAdjacency"},n),e.registerAction({type:"graphGLUnfocusNodeAdjacency",event:"graphGLUnfocusNodeAdjacency",update:"series.graphGL:unfocusNodeAdjacency"},n)});const sse=bt.wJ.extend({type:"series.flowGL",dependencies:["geo","grid","bmap"],visualStyleAccessPath:"itemStyle",getInitialData:function(e,n){var t=this.get("coordinateSystem"),r="geo"===t?["lng","lat"]:bt.wL(t)||["x","y"];r.push("vx","vy");var i=bt._y.createDimensions(this.getSource(),{coordDimensions:r,encodeDefine:this.get("encode"),dimensionsDefine:this.get("dimensions")}),o=new bt.aV(i,this);return o.initData(this.getSource()),o},defaultOption:{coordinateSystem:"cartesian2d",zlevel:10,supersampling:1,particleType:"point",particleDensity:128,particleSize:1,particleSpeed:1,particleTrail:2,colorTexture:null,gridWidth:"auto",gridHeight:"auto",itemStyle:{color:"#fff",opacity:.8}}});var lse=Di.extend(function(){return{dynamic:!0,attributes:{position:new Di.Attribute("position","float",3,"POSITION")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setLineCount:function(e){var t=4*e,r=2*e;this.vertexCount!==t&&this.attributes.position.init(t),this.triangleCount!==r&&(this.indices=0===r?null:this.vertexCount>65535?new Uint32Array(3*r):new Uint16Array(3*r))},addLine:function(e){var n=this._vertexOffset;this.attributes.position.set(n,[e[0],e[1],1]),this.attributes.position.set(n+1,[e[0],e[1],-1]),this.attributes.position.set(n+2,[e[0],e[1],2]),this.attributes.position.set(n+3,[e[0],e[1],-2]),this.setTriangleIndices(this._faceOffset++,[n,n+1,n+2]),this.setTriangleIndices(this._faceOffset++,[n+1,n+2,n+3]),this._vertexOffset+=4}});const cse=lse;Un.import("@export ecgl.vfParticle.particle.fragment\n\nuniform sampler2D particleTexture;\nuniform sampler2D spawnTexture;\nuniform sampler2D velocityTexture;\n\nuniform float deltaTime;\nuniform float elapsedTime;\n\nuniform float speedScaling : 1.0;\n\nuniform vec2 textureSize;\nuniform vec4 region : [0, 0, 1, 1];\nuniform float firstFrameTime;\n\nvarying vec2 v_Texcoord;\n\n\nvoid main()\n{\n vec4 p = texture2D(particleTexture, v_Texcoord);\n bool spawn = false;\n if (p.w <= 0.0) {\n p = texture2D(spawnTexture, fract(v_Texcoord + elapsedTime / 10.0));\n p.w -= firstFrameTime;\n spawn = true;\n }\n vec2 v = texture2D(velocityTexture, fract(p.xy * region.zw + region.xy)).xy;\n v = (v - 0.5) * 2.0;\n p.z = length(v);\n p.xy += v * deltaTime / 10.0 * speedScaling;\n p.w -= deltaTime;\n\n if (spawn || p.xy != fract(p.xy)) {\n p.z = 0.0;\n }\n p.xy = fract(p.xy);\n\n gl_FragColor = p;\n}\n@end\n\n@export ecgl.vfParticle.renderPoints.vertex\n\n#define PI 3.1415926\n\nattribute vec2 texcoord : TEXCOORD_0;\n\nuniform sampler2D particleTexture;\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nuniform float size : 1.0;\n\nvarying float v_Mag;\nvarying vec2 v_Uv;\n\nvoid main()\n{\n vec4 p = texture2D(particleTexture, texcoord);\n\n if (p.w > 0.0 && p.z > 1e-5) {\n gl_Position = worldViewProjection * vec4(p.xy * 2.0 - 1.0, 0.0, 1.0);\n }\n else {\n gl_Position = vec4(100000.0, 100000.0, 100000.0, 1.0);\n }\n\n v_Mag = p.z;\n v_Uv = p.xy;\n\n gl_PointSize = size;\n}\n\n@end\n\n@export ecgl.vfParticle.renderPoints.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\nuniform sampler2D gradientTexture;\nuniform sampler2D colorTexture;\nuniform sampler2D spriteTexture;\n\nvarying float v_Mag;\nvarying vec2 v_Uv;\n\nvoid main()\n{\n gl_FragColor = color;\n#ifdef SPRITETEXTURE_ENABLED\n gl_FragColor *= texture2D(spriteTexture, gl_PointCoord);\n if (color.a == 0.0) {\n discard;\n }\n#endif\n#ifdef GRADIENTTEXTURE_ENABLED\n gl_FragColor *= texture2D(gradientTexture, vec2(v_Mag, 0.5));\n#endif\n#ifdef COLORTEXTURE_ENABLED\n gl_FragColor *= texture2D(colorTexture, v_Uv);\n#endif\n}\n\n@end\n\n@export ecgl.vfParticle.renderLines.vertex\n\n#define PI 3.1415926\n\nattribute vec3 position : POSITION;\n\nuniform sampler2D particleTexture;\nuniform sampler2D prevParticleTexture;\n\nuniform float size : 1.0;\nuniform vec4 vp: VIEWPORT;\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nvarying float v_Mag;\nvarying vec2 v_Uv;\n\n@import clay.util.rand\n\nvoid main()\n{\n vec4 p = texture2D(particleTexture, position.xy);\n vec4 p2 = texture2D(prevParticleTexture, position.xy);\n\n p.xy = p.xy * 2.0 - 1.0;\n p2.xy = p2.xy * 2.0 - 1.0;\n\n if (p.w > 0.0 && p.z > 1e-5) {\n vec2 dir = normalize(p.xy - p2.xy);\n vec2 norm = vec2(dir.y / vp.z, -dir.x / vp.w) * sign(position.z) * size;\n if (abs(position.z) == 2.0) {\n gl_Position = vec4(p.xy + norm, 0.0, 1.0);\n v_Uv = p.xy;\n v_Mag = p.z;\n }\n else {\n gl_Position = vec4(p2.xy + norm, 0.0, 1.0);\n v_Mag = p2.z;\n v_Uv = p2.xy;\n }\n gl_Position = worldViewProjection * gl_Position;\n }\n else {\n gl_Position = vec4(100000.0, 100000.0, 100000.0, 1.0);\n }\n}\n\n@end\n\n@export ecgl.vfParticle.renderLines.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\nuniform sampler2D gradientTexture;\nuniform sampler2D colorTexture;\n\nvarying float v_Mag;\nvarying vec2 v_Uv;\n\nvoid main()\n{\n gl_FragColor = color;\n #ifdef GRADIENTTEXTURE_ENABLED\n gl_FragColor *= texture2D(gradientTexture, vec2(v_Mag, 0.5));\n#endif\n#ifdef COLORTEXTURE_ENABLED\n gl_FragColor *= texture2D(colorTexture, v_Uv);\n#endif\n}\n\n@end\n");var gV=function(){this.motionBlurFactor=.99,this.vectorFieldTexture=new $r({type:hr.FLOAT,flipY:!1}),this.particleLife=[5,20],this._particleType="point",this._particleSize=1,this.particleColor=[1,1,1,1],this.particleSpeedScaling=1,this._thisFrameTexture=null,this._particlePass=null,this._spawnTexture=null,this._particleTexture0=null,this._particleTexture1=null,this._particlePointsMesh=null,this._surfaceFrameBuffer=null,this._elapsedTime=0,this._scene=null,this._camera=null,this._lastFrameTexture=null,this._supersampling=1,this._downsampleTextures=[],this._width=512,this._height=512,this.init()};gV.prototype={constructor:gV,init:function(){var e={type:hr.FLOAT,minFilter:hr.NEAREST,magFilter:hr.NEAREST,useMipmap:!1};this._spawnTexture=new $r(e),this._particleTexture0=new $r(e),this._particleTexture1=new $r(e),this._frameBuffer=new qo({depthBuffer:!1}),this._particlePass=new so({fragment:Un.source("ecgl.vfParticle.particle.fragment")}),this._particlePass.setUniform("velocityTexture",this.vectorFieldTexture),this._particlePass.setUniform("spawnTexture",this._spawnTexture),this._downsamplePass=new so({fragment:Un.source("clay.compositor.downsample")});var n=new Hg({renderOrder:10,material:new Pc({shader:new Un(Un.source("ecgl.vfParticle.renderPoints.vertex"),Un.source("ecgl.vfParticle.renderPoints.fragment"))}),mode:Hg.POINTS,geometry:new Di({dynamic:!0,mainAttribute:"texcoord0"})}),t=new Hg({renderOrder:10,material:new Pc({shader:new Un(Un.source("ecgl.vfParticle.renderLines.vertex"),Un.source("ecgl.vfParticle.renderLines.fragment"))}),geometry:new cse,culling:!1}),r=new Hg({material:new Pc({shader:new Un(Un.source("ecgl.color.vertex"),Un.source("ecgl.color.fragment"))}),geometry:new AI});r.material.enableTexture("diffuseMap"),this._particlePointsMesh=n,this._particleLinesMesh=t,this._lastFrameFullQuadMesh=r,this._camera=new Hy,this._thisFrameTexture=new $r,this._lastFrameTexture=new $r},setParticleDensity:function(e,n){for(var r=new Float32Array(e*n*4),i=0,o=this.particleLife,d=0;d<e;d++)for(var f=0;f<n;f++,i++){r[4*i]=Math.random(),r[4*i+1]=Math.random(),r[4*i+2]=Math.random();var g=(o[1]-o[0])*Math.random()+o[0];r[4*i+3]=g}"line"===this._particleType?this._setLineGeometry(e,n):this._setPointsGeometry(e,n),this._spawnTexture.width=e,this._spawnTexture.height=n,this._spawnTexture.pixels=r,this._particleTexture0.width=this._particleTexture1.width=e,this._particleTexture0.height=this._particleTexture1.height=n,this._particlePass.setUniform("textureSize",[e,n])},_setPointsGeometry:function(e,n){var r=this._particlePointsMesh.geometry,i=r.attributes;i.texcoord0.init(e*n);for(var o=0,d=0;d<e;d++)for(var f=0;f<n;f++,o++)i.texcoord0.value[2*o]=d/e,i.texcoord0.value[2*o+1]=f/n;r.dirty()},_setLineGeometry:function(e,n){var t=e*n,r=this._getParticleMesh().geometry;r.setLineCount(t),r.resetOffset();for(var i=0;i<e;i++)for(var o=0;o<n;o++)r.addLine([i/e,o/n]);r.dirty()},_getParticleMesh:function(){return"line"===this._particleType?this._particleLinesMesh:this._particlePointsMesh},update:function(e,n,t,r){var i=this._getParticleMesh(),o=this._frameBuffer,d=this._particlePass;r&&this._updateDownsampleTextures(e,n),i.material.set("size",this._particleSize*this._supersampling),i.material.set("color",this.particleColor),d.setUniform("speedScaling",this.particleSpeedScaling),o.attach(this._particleTexture1),d.setUniform("firstFrameTime",r?(this.particleLife[1]+this.particleLife[0])/2:0),d.setUniform("particleTexture",this._particleTexture0),d.setUniform("deltaTime",t),d.setUniform("elapsedTime",this._elapsedTime),d.render(e,o),i.material.set("particleTexture",this._particleTexture1),i.material.set("prevParticleTexture",this._particleTexture0),o.attach(this._thisFrameTexture),o.bind(e),e.gl.clear(e.gl.DEPTH_BUFFER_BIT|e.gl.COLOR_BUFFER_BIT);var f=this._lastFrameFullQuadMesh;f.material.set("diffuseMap",this._lastFrameTexture),f.material.set("color",[1,1,1,this.motionBlurFactor]),this._camera.update(!0),e.renderPass([f,i],this._camera),o.unbind(e),this._downsample(e),this._swapTexture(),this._elapsedTime+=t},_downsample:function(e){var n=this._downsampleTextures;if(0!==n.length)for(var t=0,r=this._thisFrameTexture,i=n[t];i;)this._frameBuffer.attach(i),this._downsamplePass.setUniform("texture",r),this._downsamplePass.setUniform("textureSize",[r.width,r.height]),this._downsamplePass.render(e,this._frameBuffer),r=i,i=n[++t]},getSurfaceTexture:function(){var e=this._downsampleTextures;return e.length>0?e[e.length-1]:this._lastFrameTexture},setRegion:function(e){this._particlePass.setUniform("region",e)},resize:function(e,n){this._lastFrameTexture.width=e*this._supersampling,this._lastFrameTexture.height=n*this._supersampling,this._thisFrameTexture.width=e*this._supersampling,this._thisFrameTexture.height=n*this._supersampling,this._width=e,this._height=n},setParticleSize:function(e){var n=this._getParticleMesh();if(e<=2)return n.material.disableTexture("spriteTexture"),void(n.material.transparent=!1);this._spriteTexture||(this._spriteTexture=new $r),(!this._spriteTexture.image||this._spriteTexture.image.width!==e)&&(this._spriteTexture.image=function dse(e){var n=document.createElement("canvas");n.width=n.height=e;var t=n.getContext("2d");return t.fillStyle="#fff",t.arc(e/2,e/2,e/2,0,2*Math.PI),t.fill(),n}(e),this._spriteTexture.dirty()),n.material.transparent=!0,n.material.enableTexture("spriteTexture"),n.material.set("spriteTexture",this._spriteTexture),this._particleSize=e},setGradientTexture:function(e){var n=this._getParticleMesh().material;n[e?"enableTexture":"disableTexture"]("gradientTexture"),n.setUniform("gradientTexture",e)},setColorTextureImage:function(e,n){this._getParticleMesh().material.setTextureImage("colorTexture",e,n,{flipY:!0})},setParticleType:function(e){this._particleType=e},clearFrame:function(e){var n=this._frameBuffer;n.attach(this._lastFrameTexture),n.bind(e),e.gl.clear(e.gl.DEPTH_BUFFER_BIT|e.gl.COLOR_BUFFER_BIT),n.unbind(e)},setSupersampling:function(e){this._supersampling=e,this.resize(this._width,this._height)},_updateDownsampleTextures:function(e,n){for(var t=this._downsampleTextures,r=Math.max(Math.floor(Math.log(this._supersampling/n.getDevicePixelRatio())/Math.log(2)),0),i=2,o=this._width*this._supersampling,d=this._height*this._supersampling,f=0;f<r;f++)t[f]=t[f]||new $r,t[f].width=o/i,t[f].height=d/i,i*=2;for(;f<t.length;f++)t[f].dispose(e);t.length=r},_swapTexture:function(){var e=this._particleTexture0;this._particleTexture0=this._particleTexture1,this._particleTexture1=e,e=this._thisFrameTexture,this._thisFrameTexture=this._lastFrameTexture,this._lastFrameTexture=e},dispose:function(e){e.disposeFrameBuffer(this._frameBuffer),e.disposeTexture(this.vectorFieldTexture),e.disposeTexture(this._spawnTexture),e.disposeTexture(this._particleTexture0),e.disposeTexture(this._particleTexture1),e.disposeTexture(this._thisFrameTexture),e.disposeTexture(this._lastFrameTexture),e.disposeGeometry(this._particleLinesMesh.geometry),e.disposeGeometry(this._particlePointsMesh.geometry),e.disposeGeometry(this._lastFrameFullQuadMesh.geometry),this._spriteTexture&&e.disposeTexture(this._spriteTexture),this._particlePass.dispose(e),this._downsamplePass.dispose(e),this._downsampleTextures.forEach(function(n){n.dispose(e)})}};const hse=gV,fse=bt.TA.extend({type:"flowGL",__ecgl__:!0,init:function(e,n){this.viewGL=new Tf("orthographic"),this.groupGL=new lt.Node,this.viewGL.add(this.groupGL),this._particleSurface=new hse;var t=new lt.Mesh({geometry:new lt.PlaneGeometry,material:new lt.Material({shader:new lt.Shader({vertex:lt.Shader.source("ecgl.color.vertex"),fragment:lt.Shader.source("ecgl.color.fragment")}),transparent:!0})});t.material.enableTexture("diffuseMap"),this.groupGL.add(t),this._planeMesh=t},render:function(e,n,t){var r=this._particleSurface;r.setParticleType(e.get("particleType")),r.setSupersampling(e.get("supersampling")),this._updateData(e,t),this._updateCamera(t.getWidth(),t.getHeight(),t.getDevicePixelRatio());var i=qr.firstNotNull(e.get("particleDensity"),128);r.setParticleDensity(i,i);var o=this._planeMesh,d=+new Date,f=this,g=!0;o.__percent=0,o.stopAnimation(),o.animate("",{loop:!0}).when(1e5,{__percent:1}).during(function(){var S=+new Date,k=Math.min(S-d,20);d+=k,f._renderer&&(r.update(f._renderer,t,k/1e3,g),o.material.set("diffuseMap",r.getSurfaceTexture())),g=!1}).start();var _=e.getModel("itemStyle"),C=lt.parseColor(_.get("color"));C[3]*=qr.firstNotNull(_.get("opacity"),1),o.material.set("color",C),r.setColorTextureImage(e.get("colorTexture"),t),r.setParticleSize(e.get("particleSize")),r.particleSpeedScaling=e.get("particleSpeed"),r.motionBlurFactor=1-Math.pow(.1,e.get("particleTrail"))},updateTransform:function(e,n,t){this._updateData(e,t)},afterRender:function(e,n,t,r){this._renderer=r.renderer},_updateData:function(e,n){var t=e.coordinateSystem,r=t.dimensions.map(function(Fe){return e.coordDimToDataDim(Fe)[0]}),i=e.getData(),o=i.getDataExtent(r[0]),d=i.getDataExtent(r[1]),f=e.get("gridWidth"),g=e.get("gridHeight");null!=f&&"auto"!==f||(f=Math.round(Math.sqrt((o[1]-o[0])/(d[1]-d[0])*i.count()))),(null==g||"auto"===g)&&(g=Math.ceil(i.count()/f));var C=this._particleSurface.vectorFieldTexture,S=C.pixels;if(S&&S.length===g*f*4)for(var k=0;k<S.length;k++)S[k]=0;else S=C.pixels=new Float32Array(f*g*4);var z=0,te=1/0,pe=new Float32Array(2*i.count()),Me=0,Re=[[1/0,1/0],[-1/0,-1/0]];i.each([r[0],r[1],"vx","vy"],function(Fe,Oe,Be,it){var at=t.dataToPoint([Fe,Oe]);pe[Me++]=at[0],pe[Me++]=at[1],Re[0][0]=Math.min(at[0],Re[0][0]),Re[0][1]=Math.min(at[1],Re[0][1]),Re[1][0]=Math.max(at[0],Re[1][0]),Re[1][1]=Math.max(at[1],Re[1][1]);var Ct=Math.sqrt(Be*Be+it*it);z=Math.max(z,Ct),te=Math.min(te,Ct)}),i.each(["vx","vy"],function(Fe,Oe,Be){var it=Math.round((pe[2*Be]-Re[0][0])/(Re[1][0]-Re[0][0])*(f-1)),Ct=4*((g-1-Math.round((pe[2*Be+1]-Re[0][1])/(Re[1][1]-Re[0][1])*(g-1)))*f+it);S[Ct]=Fe/z*.5+.5,S[Ct+1]=Oe/z*.5+.5,S[Ct+3]=1}),C.width=f,C.height=g,"bmap"===e.get("coordinateSystem")&&this._fillEmptyPixels(C),C.dirty(),this._updatePlanePosition(Re[0],Re[1],e,n),this._updateGradientTexture(i.getVisual("visualMeta"),[te,z])},_fillEmptyPixels:function(e){var n=e.pixels,t=e.width,r=e.height;function i(pe,Me,Re){pe=Math.max(Math.min(pe,t-1),0);var Fe=4*((Me=Math.max(Math.min(Me,r-1),0))*(t-1)+pe);return 0!==n[Fe+3]&&(Re[0]=n[Fe],Re[1]=n[Fe+1],!0)}function o(pe,Me,Re){Re[0]=pe[0]+Me[0],Re[1]=pe[1]+Me[1]}for(var d=[],f=[],g=[],_=[],C=[],S=0,k=0;k<r;k++)for(var z=0;z<t;z++){var te=4*(k*(t-1)+z);0===n[te+3]&&(S=d[0]=d[1]=0,i(z-1,k,f)&&(S++,o(f,d,d)),i(z+1,k,g)&&(S++,o(g,d,d)),i(z,k-1,_)&&(S++,o(_,d,d)),i(z,k+1,C)&&(S++,o(C,d,d)),d[0]/=S,d[1]/=S,n[te]=d[0],n[te+1]=d[1]),n[te+3]=1}},_updateGradientTexture:function(e,n){if(e&&e.length){this._gradientTexture=this._gradientTexture||new lt.Texture2D({image:document.createElement("canvas")});var t=this._gradientTexture,r=t.image;r.width=200,r.height=1;var i=r.getContext("2d"),o=i.createLinearGradient(0,.5,r.width,.5);e[0].stops.forEach(function(d){var f;n[1]===n[0]?f=0:(f=d.value/n[1],f=Math.min(Math.max(f,0),1)),o.addColorStop(f,d.color)}),i.fillStyle=o,i.fillRect(0,0,r.width,r.height),t.dirty(),this._particleSurface.setGradientTexture(this._gradientTexture)}else this._particleSurface.setGradientTexture(null)},_updatePlanePosition:function(e,n,t,r){var i=this._limitInViewportAndFullFill(e,n,t,r);e=i.leftTop,n=i.rightBottom,this._particleSurface.setRegion(i.region),this._planeMesh.position.set((e[0]+n[0])/2,r.getHeight()-(e[1]+n[1])/2,0);var o=n[0]-e[0],d=n[1]-e[1];this._planeMesh.scale.set(o/2,d/2,1),this._particleSurface.resize(Math.max(Math.min(o,2048),1),Math.max(Math.min(d,2048),1)),this._renderer&&this._particleSurface.clearFrame(this._renderer)},_limitInViewportAndFullFill:function(e,n,t,r){var i=[Math.max(e[0],0),Math.max(e[1],0)],o=[Math.min(n[0],r.getWidth()),Math.min(n[1],r.getHeight())];if("bmap"===t.get("coordinateSystem")){var d=t.getData().getDataExtent(t.coordDimToDataDim("lng")[0]);Math.floor(d[1]-d[0])>=359&&(i[0]>0&&(i[0]=0),o[0]<r.getWidth()&&(o[0]=r.getWidth()))}var g=n[0]-e[0],_=n[1]-e[1],S=o[1]-i[1];return{leftTop:i,rightBottom:o,region:[(i[0]-e[0])/g,1-S/_-(i[1]-e[1])/_,(o[0]-i[0])/g,S/_]}},_updateCamera:function(e,n,t){this.viewGL.setViewport(0,0,e,n,t);var r=this.viewGL.camera;r.left=r.bottom=0,r.top=n,r.right=e,r.near=0,r.far=100,r.position.z=10},remove:function(){this._planeMesh.stopAnimation(),this.groupGL.removeAll()},dispose:function(){this._renderer&&this._particleSurface.dispose(this._renderer),this.groupGL.removeAll()}});(0,bt.D$)(function pse(e){e.registerChartView(fse),e.registerSeriesModel(sse)});var Sj=H(628),vV=bt.wJ.extend({type:"series.linesGL",dependencies:["grid","geo"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",streamEnabled:!0,init:function(e){var n=this._processFlatCoordsArray(e.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(e.data=new Float32Array(n.count)),vV.superApply(this,"init",arguments)},mergeOption:function(e){var n=this._processFlatCoordsArray(e.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(e.data=new Float32Array(n.count)),vV.superApply(this,"mergeOption",arguments)},appendData:function(e){var n=this._processFlatCoordsArray(e.data);n.flatCoords&&(this._flatCoords?(this._flatCoords=(0,Sj.concatArray)(this._flatCoords,n.flatCoords),this._flatCoordsOffset=(0,Sj.concatArray)(this._flatCoordsOffset,n.flatCoordsOffset)):(this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset),e.data=new Float32Array(n.count)),this.getRawData().appendData(e.data)},_getCoordsFromItemModel:function(e){var n=this.getData().getItemModel(e);return n.option instanceof Array?n.option:n.getShallow("coords")},getLineCoordsCount:function(e){return this._flatCoordsOffset?this._flatCoordsOffset[2*e+1]:this._getCoordsFromItemModel(e).length},getLineCoords:function(e,n){if(this._flatCoordsOffset){for(var t=this._flatCoordsOffset[2*e],r=this._flatCoordsOffset[2*e+1],i=0;i<r;i++)n[i]=n[i]||[],n[i][0]=this._flatCoords[t+2*i],n[i][1]=this._flatCoords[t+2*i+1];return r}var o=this._getCoordsFromItemModel(e);for(i=0;i<o.length;i++)n[i]=n[i]||[],n[i][0]=o[i][0],n[i][1]=o[i][1];return o.length},_processFlatCoordsArray:function(e){var n=0;if(this._flatCoords&&(n=this._flatCoords.length),"number"==typeof e[0]){for(var t=e.length,r=new Uint32Array(t),i=new Float64Array(t),o=0,d=0,f=0,g=0;g<t;){f++;var _=e[g++];r[d++]=o+n,r[d++]=_;for(var C=0;C<_;C++){var S=e[g++],k=e[g++];i[o++]=S,i[o++]=k}}return{flatCoordsOffset:new Uint32Array(r.buffer,0,d),flatCoords:i,count:f}}return{flatCoordsOffset:null,flatCoords:null,count:e.length}},getInitialData:function(e,n){var t=new bt.aV(["value"],this);return t.hasItemOption=!1,t.initData(e.data,[],function(r,i,o,d){if(r instanceof Array)return NaN;t.hasItemOption=!0;var f=r.value;return null!=f?f instanceof Array?f[d]:f:void 0}),t},defaultOption:{coordinateSystem:"geo",zlevel:10,progressive:1e4,progressiveThreshold:5e4,blendMode:"source-over",lineStyle:{opacity:.8},postEffect:{enable:!1,colorCorrection:{exposure:0,brightness:0,contrast:1,saturation:1,enable:!0}}}});const gse=vV,vse=bt.TA.extend({type:"linesGL",__ecgl__:!0,init:function(e,n){this.groupGL=new lt.Node,this.viewGL=new Tf("orthographic"),this.viewGL.add(this.groupGL),this._glViewHelper=new yj(this.viewGL),this._nativeLinesShader=lt.createShader("ecgl.lines3D"),this._meshLinesShader=lt.createShader("ecgl.meshLines3D"),this._linesMeshes=[],this._currentStep=0},render:function(e,n,t){this.groupGL.removeAll(),this._glViewHelper.reset(e,t);var r=this._linesMeshes[0];r||(r=this._linesMeshes[0]=this._createLinesMesh(e)),this._linesMeshes.length=1,this.groupGL.add(r),this._updateLinesMesh(e,r,0,e.getData().count()),this.viewGL.setPostEffect(e.getModel("postEffect"),t)},incrementalPrepareRender:function(e,n,t){this.groupGL.removeAll(),this._glViewHelper.reset(e,t),this._currentStep=0,this.viewGL.setPostEffect(e.getModel("postEffect"),t)},incrementalRender:function(e,n,t,r){var i=this._linesMeshes[this._currentStep];i||(i=this._createLinesMesh(n),this._linesMeshes[this._currentStep]=i),this._updateLinesMesh(n,i,e.start,e.end),this.groupGL.add(i),r.getZr().refresh(),this._currentStep++},updateTransform:function(e,n,t){e.coordinateSystem.getRoamTransform&&this._glViewHelper.updateTransform(e,t)},_createLinesMesh:function(e){return new lt.Mesh({$ignorePicking:!0,material:new lt.Material({shader:lt.createShader("ecgl.lines3D"),transparent:!0,depthMask:!1,depthTest:!1}),geometry:new Cj({segmentScale:10,useNativeLine:!0,dynamic:!1}),mode:lt.Mesh.LINES,culling:!1})},_updateLinesMesh:function(e,n,t,r){var i=e.getData();n.material.blend="lighter"===e.get("blendMode")?lt.additiveBlend:null;var o=e.get("lineStyle.curveness")||0,d=e.get("polyline"),f=n.geometry,g=e.coordinateSystem,_=qr.firstNotNull(e.get("lineStyle.width"),1);_>1?(n.material.shader!==this._meshLinesShader&&n.material.attachShader(this._meshLinesShader),n.mode=lt.Mesh.TRIANGLES):(n.material.shader!==this._nativeLinesShader&&n.material.attachShader(this._nativeLinesShader),n.mode=lt.Mesh.LINES),t=t||0,r=r||i.count(),f.resetOffset();var C=0,S=0,k=[],z=[],te=[],pe=[],Me=[];function Oe(){z[0]=.7*k[0]+.3*pe[0]-(k[1]-pe[1])*o,z[1]=.7*k[1]+.3*pe[1]-(pe[0]-k[0])*o,te[0]=.3*k[0]+.7*pe[0]-(k[1]-pe[1])*o,te[1]=.3*k[1]+.7*pe[1]-(pe[0]-k[0])*o}if(d||0!==o)for(var Be=t;Be<r;Be++)if(d){var it=e.getLineCoordsCount(Be);C+=f.getPolylineVertexCount(it),S+=f.getPolylineTriangleCount(it)}else e.getLineCoords(Be,Me),this._glViewHelper.dataToPoint(g,Me[0],k),this._glViewHelper.dataToPoint(g,Me[1],pe),Oe(),C+=f.getCubicCurveVertexCount(k,z,te,pe),S+=f.getCubicCurveTriangleCount(k,z,te,pe);else{var at=r-t;C+=at*f.getLineVertexCount(),S+=at*f.getLineVertexCount()}f.setVertexCount(C),f.setTriangleCount(S);var Ct=t,mt=[];for(Be=t;Be<r;Be++){lt.parseColor(Fo(i,Ct),mt);var Ft=qr.firstNotNull(Bo(i,Ct),1);mt[3]*=Ft,it=e.getLineCoords(Be,Me);for(var nn=0;nn<it;nn++)this._glViewHelper.dataToPoint(g,Me[nn],Me[nn]);d?f.addPolyline(Me,mt,_,0,it):0!==o?(k=Me[0],pe=Me[1],Oe(),f.addCubicCurve(k,z,te,pe,mt,_)):f.addPolyline(Me,mt,_,0,2),Ct++}},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function oP(e,n,t){return Math.min(Math.max(e,n),t)}function Dj(e){return e.reduce((n,t)=>n+t)/e.length}function yse(e=0,n=1){const t=1-Math.random(),r=Math.random();return Math.sqrt(-2*Math.log(t))*Math.cos(2*Math.PI*r)*n+e}(0,bt.D$)(function mse(e){e.registerChartView(vse),e.registerSeriesModel(gse)});let bse=(()=>{class e{constructor(){this.x_range=[-10,10],this.y_range=[-10,10],this.w_max=5,this.w_min=0,this.b_max=20,this.b_min=-20,this.lin_separability=!0,this.positiveBorder=[[this.x_range[0],this.y_range[0]],[this.x_range[1],this.y_range[1]],[this.x_range[1],this.y_range[0]],[this.x_range[0],this.y_range[0]]],this.negativeBorder=[[this.x_range[0],this.y_range[0]],[this.x_range[1],this.y_range[1]],[this.x_range[1],this.y_range[1]],[this.x_range[0],this.y_range[1]],[this.x_range[0],this.y_range[0]]],this.w=1,this.b=0,this.data_chart={legend:{align:"left"},tooltip:{},xAxis:{min:this.x_range[0],max:this.x_range[1]},yAxis:{min:this.y_range[0],max:this.y_range[1]},series:[{type:"scatter",encode:{tooltip:[0,1]},symbolSize:5,color:"green"},{type:"scatter",encode:{tooltip:[0,1]},symbolSize:5,color:"red"},{type:"line",data:this.positiveBorder,showSymbol:!1,areaStyle:{color:"green",opacity:.3},color:"black",z:-1},{type:"line",data:this.negativeBorder,showSymbol:!1,areaStyle:{color:"red",opacity:.3},lineStyle:{width:0},z:-1}],animationEasing:"elasticOut",animationDelayUpdate:t=>t},this.option_3d_graph={tooltip:{},visualMap:{show:!0,dimension:2,min:0,max:75,inRange:{color:["#313695","#4575b4","#74add1","#abd9e9","#fee090","#fdae61","#f46d43","#d73027","#a50026"]}},xAxis3D:{type:"value",name:"W"},yAxis3D:{type:"value",name:"b"},zAxis3D:{type:"value",name:"loss",axisLabel:{show:!1}},grid3D:{viewControl:{projection:"orthographic"}},series:[{type:"surface",tooltip:{show:!1},wireframe:{show:!0},data:[]},{type:"scatter3D",data:[[this.w,this.b,this.compute_loss(this.w,this.b)]],symbolSize:20}]},this.nPoints=100}ngOnInit(){this.distribute_points(),this.update_fx()}distribute_points(){this.lin_separability?(this.ptClass1=hI(this.nPoints,{x:5,y:-5},{x:4,y:4}),this.ptClass2=hI(this.nPoints,{x:-5,y:5},{x:4,y:4})):(this.ptClass1=hI(this.nPoints,{x:0,y:0},{x:1,y:1}),this.ptClass2=hI(this.nPoints,{x:0,y:0},{x:.1,y:.1}),this.ptClass2.forEach(i=>{let o=Math.sqrt(i.x*i.x+i.y*i.y);i.x=i.x*(5+5/o),i.y=i.y*(5+5/o)}));let t={data:this.ptClass1.map(i=>({value:[oP(i.x,this.x_range[0],this.x_range[1]),oP(i.y,this.y_range[0],this.y_range[1])]}))},r={data:this.ptClass2.map(i=>({value:[oP(i.x,this.x_range[0],this.x_range[1]),oP(i.y,this.y_range[0],this.y_range[1])]}))};Array.isArray(this.data_chart.series)&&(this.data_chart.series[0].data=t.data,this.data_chart.series[1].data=r.data),this.loss_3d_data=this.get_3D_data(),this.option_3d_graph.series[0].data=this.loss_3d_data,this.update_charts()}update_charts(){this.echartInstance?.setOption(this.data_chart),this.echartInstance3D?.setOption(this.option_3d_graph)}get_3D_data(){let t=new Array;for(let i=0;i<=50;i++)for(let o=0;o<=50;o++){let d=this.w_min+i*(this.w_max-this.w_min)/50,f=this.b_min+o*(this.b_max-this.b_min)/50,g=this.compute_loss(d,f);t.push([d,f,g])}return t}onChartInit(t){this.echartInstance=t}onChartInit3D(t){this.echartInstance3D=t}update_b(t){t.value&&(this.b=t.value),this.update_fx()}update_w(t){t.value&&(this.w=t.value),this.update_fx()}update_fx(){let t=[this.x_range[0],this.w*this.x_range[0]+this.b],r=[this.x_range[1],this.w*this.x_range[1]+this.b];this.positiveBorder[0]=t,this.positiveBorder[1]=r,this.negativeBorder[0]=t,this.negativeBorder[1]=r,this.option_3d_graph.series[1].data=[[this.w,this.b,this.compute_loss(this.w,this.b)]],this.update_charts()}compute_loss_v2(t,r){let i=0,o=Math.sqrt(1+t*t);for(let d=0;d<this.nPoints;d++){let f=this.ptClass1[d],g=this.ptClass2[d];i+=Math.abs(f.y+f.x*t+r)/o,i+=Math.abs(g.y+g.x*t+r)/o}return i/this.nPoints}compute_loss(t,r){let i=0;Math.sqrt(1+t*t);for(let d=0;d<this.nPoints;d++){let f=this.ptClass1[d],g=this.ptClass2[d];i+=+(f.y-f.x*t-r>0),i+=+(g.y-g.x*t-r<0)}return 100*i/(2*this.nPoints)}change_points_distributions(t){this.lin_separability="linear"==t.value,this.distribute_points(),this.update_fx()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Zn({type:e,selectors:[["app-weights-loss"]],decls:16,vars:12,consts:[[3,"rightDrawer"],["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],["title","Slope",3,"max","min","step","value","input"],["title","Intercept",3,"max","min","step","value","input"],["name","fontStyle","aria-label","Font Style",3,"change"],["value","linear",3,"checked"],["value","non_linear"],["ngProjectAs","[centerContent]",5,["","centerContent",""]],["echarts","",1,"graph",3,"options","chartInit"]],template:function(t,r){1&t&&(qe(0,"app-tutorial-template",0),Ni(1,1),qe(2,"h3"),Bt(3," Tunable parameters "),nt(),qe(4,"app-labelled-sliders",2),zt("input",function(o){return r.update_w(o)}),nt(),qe(5,"app-labelled-sliders",3),zt("input",function(o){return r.update_b(o)}),nt(),qe(6,"h3"),Bt(7," Samples distribution "),nt(),qe(8,"mat-button-toggle-group",4),zt("change",function(o){return r.change_points_distributions(o)}),qe(9,"mat-button-toggle",5),Bt(10,"Linear"),nt(),qe(11,"mat-button-toggle",6),Bt(12,"Circular"),nt()(),Fi(),Ni(13,7),qe(14,"div",8),zt("chartInit",function(o){return r.onChartInit(o)}),nt(),qe(15,"div",8),zt("chartInit",function(o){return r.onChartInit3D(o)}),nt(),Fi(),nt()),2&t&&(Mt("rightDrawer",!1),Dt(4),Mt("max",r.w_max)("min",r.w_min)("step",.1)("value",r.w),Dt(1),Mt("max",r.b_max)("min",r.b_min)("step",.1)("value",r.b),Dt(4),Mt("checked",r.lin_separability),Dt(5),Mt("options",r.data_chart),Dt(1),Mt("options",r.option_3d_graph))},dependencies:[nC,WC,jC,ih,HB],styles:[".graph[_ngcontent-%COMP%]{aspect-ratio:1;width:30vw;background-color:#fff;border-radius:.25em;border-color:#000;margin:5%}.label-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:0 20px}.parameter-adjusting[_ngcontent-%COMP%]{margin:5px;border-radius:.5em;box-shadow:#0e1e251f 0 2px 4px,#0e1e2552 0 2px 16px}"]}),e})();const Mj=new on("CdkAccordion");let xse=0,Cse=(()=>{class e{constructor(t,r,i){this.accordion=t,this._changeDetectorRef=r,this._expansionDispatcher=i,this._openCloseAllSubscription=ge.EMPTY,this.closed=new Mn,this.opened=new Mn,this.destroyed=new Mn,this.expandedChange=new Mn,this.id="cdk-accordion-child-"+xse++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=i.listen((o,d)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===d&&this.id!==o&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(t){t=xr(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=xr(t)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}}return e.\u0275fac=function(t){return new(t||e)(Xe(Mj,12),Xe(Wi),Xe(IB))},e.\u0275dir=Dn({type:e,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[Gr([{provide:Mj,useValue:void 0}])]}),e})(),wse=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({}),e})();const Sse=["body"];function Dse(e,n){}const Mse=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],Tse=["mat-expansion-panel-header","*","mat-action-row"];function Ese(e,n){1&e&&Cn(0,"span",2),2&e&&Mt("@indicatorRotate",Yn()._getExpandedState())}const Ase=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],Ise=["mat-panel-title","mat-panel-description","*"],Tj=new on("MAT_ACCORDION"),Ej="225ms cubic-bezier(0.4,0.0,0.2,1)",Aj={indicatorRotate:th("indicatorRotate",[xl("collapsed, void",xa({transform:"rotate(0deg)"})),xl("expanded",xa({transform:"rotate(180deg)"})),Cl("expanded <=> collapsed, void => collapsed",Gl(Ej))]),bodyExpansion:th("bodyExpansion",[xl("collapsed, void",xa({height:"0px",visibility:"hidden"})),xl("expanded",xa({height:"*",visibility:"visible"})),Cl("expanded <=> collapsed, void => collapsed",Gl(Ej))])},Ij=new on("MAT_EXPANSION_PANEL");let Pse=(()=>{class e{constructor(t,r){this._template=t,this._expansionPanel=r}}return e.\u0275fac=function(t){return new(t||e)(Xe(hl),Xe(Ij,8))},e.\u0275dir=Dn({type:e,selectors:[["ng-template","matExpansionPanelContent",""]]}),e})(),Rse=0;const Pj=new on("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let sP=(()=>{class e extends Cse{constructor(t,r,i,o,d,f,g){super(t,r,i),this._viewContainerRef=o,this._animationMode=f,this._hideToggle=!1,this.afterExpand=new Mn,this.afterCollapse=new Mn,this._inputChanges=new ne,this._headerId="mat-expansion-panel-header-"+Rse++,this._bodyAnimationDone=new ne,this.accordion=t,this._document=d,this._bodyAnimationDone.pipe(AC((_,C)=>_.fromState===C.fromState&&_.toState===C.toState)).subscribe(_=>{"void"!==_.fromState&&("expanded"===_.toState?this.afterExpand.emit():"collapsed"===_.toState&&this.afterCollapse.emit())}),g&&(this.hideToggle=g.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=xr(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(yl(null),qi(()=>this.expanded&&!this._portal),mo(1)).subscribe(()=>{this._portal=new NA(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,r=this._body.nativeElement;return t===r||r.contains(t)}return!1}}return e.\u0275fac=function(t){return new(t||e)(Xe(Tj,12),Xe(Wi),Xe(IB),Xe(Lo),Xe(Rr),Xe(Zo,8),Xe(Pj,8))},e.\u0275cmp=Zn({type:e,selectors:[["mat-expansion-panel"]],contentQueries:function(t,r,i){if(1&t&&Li(i,Pse,5),2&t){let o;Kn(o=Qn())&&(r._lazyContent=o.first)}},viewQuery:function(t,r){if(1&t&&Wr(Sse,5),2&t){let i;Kn(i=Qn())&&(r._body=i.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(t,r){2&t&&ui("mat-expanded",r.expanded)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[Gr([{provide:Tj,useValue:void 0},{provide:Ij,useExisting:e}]),Gn,Ki],ngContentSelectors:Tse,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(t,r){1&t&&(zi(Mse),Ur(0),qe(1,"div",0,1),zt("@bodyExpansion.done",function(o){return r._bodyAnimationDone.next(o)}),qe(3,"div",2),Ur(4,1),ar(5,Dse,0,0,"ng-template",3),nt(),Ur(6,2),nt()),2&t&&(Dt(1),Mt("@bodyExpansion",r._getExpandedState())("id",r.id),Er("aria-labelledby",r._headerId),Dt(4),Mt("cdkPortalOutlet",r._portal))},dependencies:[FA],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[Aj.bodyExpansion]},changeDetection:0}),e})();class Lse{}const Ose=xy(Lse);let mV=(()=>{class e extends Ose{constructor(t,r,i,o,d,f,g){super(),this.panel=t,this._element=r,this._focusMonitor=i,this._changeDetectorRef=o,this._animationMode=f,this._parentChangeSubscription=ge.EMPTY;const _=t.accordion?t.accordion._stateChanges.pipe(qi(C=>!(!C.hideToggle&&!C.togglePosition))):La;this.tabIndex=parseInt(g||"")||0,this._parentChangeSubscription=Oa(t.opened,t.closed,_,t._inputChanges.pipe(qi(C=>!!(C.hideToggle||C.disabled||C.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(qi(()=>t._containsFocus())).subscribe(()=>i.focusVia(r,"program")),d&&(this.expandedHeight=d.expandedHeight,this.collapsedHeight=d.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:Tc(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,r){t?this._focusMonitor.focusVia(this._element,t,r):this._element.nativeElement.focus(r)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return e.\u0275fac=function(t){return new(t||e)(Xe(sP,1),Xe(kr),Xe(Ac),Xe(Wi),Xe(Pj,8),Xe(Zo,8),Ds("tabindex"))},e.\u0275cmp=Zn({type:e,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(t,r){1&t&&zt("click",function(){return r._toggle()})("keydown",function(o){return r._keydown(o)}),2&t&&(Er("id",r.panel._headerId)("tabindex",r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),Za("height",r._getHeaderHeight()),ui("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[Gn],ngContentSelectors:Ise,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(t,r){1&t&&(zi(Ase),qe(0,"span",0),Ur(1),Ur(2,1),Ur(3,2),nt(),ar(4,Ese,1,1,"span",1)),2&t&&(ui("mat-content-hide-toggle",!r._showToggle()),Dt(4),Mt("ngIf",r._showToggle()))},dependencies:[Hs],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[Aj.indicatorRotate]},changeDetection:0}),e})(),_V=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Dn({type:e,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),e})(),kse=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[zl,ti,wse,gy]}),e})();const Nse=["canvas"];function Fse(e,n){1&e&&(qe(0,"mat-icon"),Bt(1,"visibility"),nt())}function Bse(e,n){1&e&&(qe(0,"mat-icon"),Bt(1,"visibility_off"),nt())}function Vse(e,n){if(1&e&&(qe(0,"td"),Bt(1),nt()),2&e){const t=n.index,r=Yn().index,i=Yn();Dt(1),Ya(" ",i.getFormattedValue(r,t)," ")}}const Rj=function(){return[]};function zse(e,n){if(1&e&&(qe(0,"tr"),ar(1,Vse,2,1,"td",17),nt()),2&e){const t=Yn();Dt(1),Mt("ngForOf",eu(1,Rj).constructor(t.kernel.size))}}const Hse=function(e,n){return{activated:e,deactivated:n}};let Use=(()=>{class e{constructor(){this.updateFilters=new Mn}ngOnInit(){this.kernel.delete=!1;const t=this.canvas.nativeElement;this.ctx=t.getContext("2d",{alpha:!1}),t.width=this.kernel.size,t.height=this.kernel.size,this.ctx.canvas.width=this.kernel.size,this.ctx.canvas.height=this.kernel.size,this.drawFilter()}delete(t){t.stopPropagation(),this.kernel.delete=!0,this.updateFilters.emit()}toggleActive(t){t.stopPropagation(),this.kernel.active=!this.kernel.active,this.updateFilters.emit()}drawFilter(){let t=new Uint8ClampedArray(this.kernel.size*this.kernel.size*4);for(let i=0;i<this.kernel.size;i++)for(let o=0;o<this.kernel.size;o++){const d=this.kernel.element[i*this.kernel.size+o];t[4*i*this.kernel.size+4*o]=d,t[4*i*this.kernel.size+4*o+1]=d,t[4*i*this.kernel.size+4*o+2]=d,t[4*i*this.kernel.size+4*o+3]=255}let r=new ImageData(t,this.kernel.size,this.kernel.size);this.ctx.putImageData(r,0,0)}getFormattedValue(t,r){return(this.kernel.element[t*this.kernel.size+r]/255).toFixed(0)}updateFilter(){this.updateFilters.emit(!0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Zn({type:e,selectors:[["app-structural-element"]],viewQuery:function(t,r){if(1&t&&Wr(Nse,7),2&t){let i;Kn(i=Qn())&&(r.canvas=i.first)}},inputs:{kernel:"kernel"},outputs:{updateFilters:"updateFilters"},decls:35,vars:9,consts:[[3,"ngClass"],["panelH",""],["mat-mini-fab","","color","accent",1,"action-button",3,"click"],[4,"ngIf"],["appearance","fill",3,"click"],[3,"ngModel","ngModelChange"],["value","erosion"],["value","dilation"],["value","opening"],["value","closing"],["value","tophat"],["value","gradient"],["value","skeletonize"],["mat-mini-fab","","color","warn",1,"action-button",3,"click"],[1,"vertical-flex","center"],[1,"rounded-table"],[3,"mouseenter"],[4,"ngFor","ngForOf"],["canvas",""]],template:function(t,r){if(1&t){const i=sa();qe(0,"mat-expansion-panel",0,1)(2,"mat-expansion-panel-header")(3,"mat-panel-title")(4,"button",2),zt("click",function(d){return r.toggleActive(d)}),ar(5,Fse,2,0,"mat-icon",3),ar(6,Bse,2,0,"mat-icon",3),nt(),qe(7,"span")(8,"mat-form-field",4),zt("click",function(){return Kr(i),Qr(li(1).toggle())}),qe(9,"mat-label"),Bt(10,"Operation"),nt(),qe(11,"mat-select",5),zt("ngModelChange",function(d){return r.kernel.morphOp=d})("ngModelChange",function(){return r.updateFilter()}),qe(12,"mat-option",6),Bt(13,"Erosion"),nt(),qe(14,"mat-option",7),Bt(15,"Dilation"),nt(),qe(16,"mat-option",8),Bt(17,"Opening"),nt(),qe(18,"mat-option",9),Bt(19,"Closing"),nt(),qe(20,"mat-option",10),Bt(21,"Top Hat"),nt(),qe(22,"mat-option",11),Bt(23,"Gradient"),nt(),qe(24,"mat-option",12),Bt(25,"Skeletonize"),nt()()()(),qe(26,"button",13),zt("click",function(d){return r.delete(d)}),qe(27,"mat-icon"),Bt(28,"close"),nt()()()(),qe(29,"div",14)(30,"div",15)(31,"table",16),zt("mouseenter",function(){return r.drawFilter()}),ar(32,zse,2,2,"tr",17),nt()(),Cn(33,"canvas",null,18),nt()()}2&t&&(Mt("ngClass",kd(5,Hse,r.kernel.active,!r.kernel.active)),Dt(5),Mt("ngIf",r.kernel.active),Dt(1),Mt("ngIf",!r.kernel.active),Dt(5),Mt("ngModel",r.kernel.morphOp),Dt(21),Mt("ngForOf",eu(8,Rj).constructor(r.kernel.size)))},dependencies:[HC,kg,M8,gB,Zu,iu,Hs,hf,ff,sP,mV,_V,bl,nh],styles:["mat-expansion-panel-header[_ngcontent-%COMP%]{height:fit-content}canvas[_ngcontent-%COMP%]{width:128px;aspect-ratio:1;image-rendering:-webkit-crisp-edges;image-rendering:pixelated;image-rendering:crisp-edges;box-shadow:#0000001f 0 1px 3px,#0000003d 0 1px 2px;border-radius:.5em}.title-span[_ngcontent-%COMP%]{margin:auto}tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#646464}.horizontal-flex[_ngcontent-%COMP%]{width:100%}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#6f9b75}td[_ngcontent-%COMP%]{font-size:small}.center[_ngcontent-%COMP%]{align-items:center;gap:1em}.deactivated[_ngcontent-%COMP%]:not(button){filter:brightness(.7);border:solid white 1px}.rounded-table[_ngcontent-%COMP%]{overflow:hidden;box-shadow:#0000001f 0 1px 3px,#0000003d 0 1px 2px;aspect-ratio:1;overflow:scroll}button[_ngcontent-%COMP%]{transform:scale(.5)}"]}),e})();const Gse=["elementCanvasVisu"];function Wse(e,n){if(1&e){const t=sa();qe(0,"app-structural-element",19),zt("updateFilters",function(){return Kr(t),Qr(Yn().updateFilters())}),nt()}2&e&&Mt("kernel",n.$implicit)}let jse=(()=>{class e extends wl{constructor(){super(...arguments),this.listKernels=new Array,this.ksize=3,this.structuralElementType="circle",this.width=256}ngAfterViewInit(){super.ngAfterViewInit(),this.cleanFilterList(),this.updateVisu()}updateVisu(){this.ngxOpenCv.cvState.subscribe(t=>{if(this.cvState=t.state,t.ready){let r=this.getStructuringMat(this.ksize,this.structuralElementType);cv.convertScaleAbs(r,r,255);let i=32-this.ksize;cv.copyMakeBorder(r,r,i,i,i,i,cv.BORDER_CONSTANT),cv.imshow(this.eltCanvasVisu.nativeElement,r),r.delete()}})}applyFilter(){let t=cv.imread(this.drawCanvas.getCanvas()),r=new cv.Point(-1,-1),i=new cv.Mat;cv.cvtColor(t,i,cv.COLOR_RGB2GRAY),this.listKernels.forEach(o=>{if(!o.active)return;const d=o.size;let f=cv.matFromArray(d,d,cv.CV_8UC1,o.element);switch(o.morphOp){case"erosion":cv.erode(i,i,f,r,1,cv.BORDER_CONSTANT,cv.morphologyDefaultBorderValue());break;case"dilation":cv.dilate(i,i,f,r,1,cv.BORDER_CONSTANT,cv.morphologyDefaultBorderValue());break;case"opening":cv.morphologyEx(i,i,cv.MORPH_OPEN,f,r,1,cv.BORDER_CONSTANT,cv.morphologyDefaultBorderValue());break;case"closing":cv.morphologyEx(i,i,cv.MORPH_CLOSE,f);break;case"gradient":cv.morphologyEx(i,i,cv.MORPH_GRADIENT,f);break;case"tophat":cv.morphologyEx(i,i,cv.MORPH_TOPHAT,f);break;case"skeletonize":for(var g=new cv.Mat(this.width,this.width,cv.CV_8UC1,new cv.Scalar(0)),_=new cv.Mat,C=new cv.Mat,S=!1,k=50;!S&&k>0;)cv.erode(i,C,f),cv.dilate(C,_,f),cv.subtract(i,_,_),cv.bitwise_or(g,_,g),C.copyTo(i),S=0==cv.norm(i),k--;g.copyTo(i),g.delete(),_.delete(),C.delete()}f.delete()}),this.outputCanvas.drawMat(i),i.delete(),t.delete()}updateFilters(){this.listKernels=this.listKernels.filter(t=>!t.delete),this.applyFilter()}cleanFilterList(){this.listKernels=new Array}getStructuringMat(t,r){let i=new cv.Size(t,t);switch(r){case"circle":var o=cv.getStructuringElement(cv.MORPH_ELLIPSE,i);break;case"square":o=cv.getStructuringElement(cv.MORPH_RECT,i);break;case"cross":o=cv.getStructuringElement(cv.MORPH_CROSS,i)}return o}addFilter(){let t=this.getStructuringMat(this.ksize,this.structuralElementType);cv.convertScaleAbs(t,t,255);let r="erosion",i=this.listKernels.length;i>0&&(r=this.listKernels[i-1].morphOp);const o=new Uint8ClampedArray(t.data,t.cols,t.rows);this.listKernels.push({morphOp:r,size:this.ksize,element:o,active:!0,delete:!1}),t.delete(),this.updateFilters()}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Gi(e)))(r||e)}}(),e.\u0275cmp=Zn({type:e,selectors:[["app-morpho-tools"]],viewQuery:function(t,r){if(1&t&&Wr(Gse,7),2&t){let i;Kn(i=Qn())&&(r.eltCanvasVisu=i.first)}},features:[Gn],decls:35,vars:16,consts:[["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],["title","Brush Size"],["brushSizeSlider",""],[3,"min","max","step","title","value","valueChange"],[3,"ngModel","ngModelChange","change"],["value","circle"],["value","square"],["value","cross"],[1,"structuralElementVisu"],["elementCanvasVisu",""],["mat-raised-button","","color","primary",1,"fillWidth",3,"click"],["ngProjectAs","[drawerRight]",5,["","drawerRight",""]],["echarts","",1,"profile-graph",3,"options"],[3,"kernel","updateFilters",4,"ngFor","ngForOf"],["ngProjectAs","[centerContent]",5,["","centerContent",""]],["title","Canvas",1,"canvas",3,"width","drawable","BWOption","OnlyBW","brushRadius","drawingEnded"],["inputCanvas",""],["title","Result",1,"canvas",3,"width","profileOption","drawable","profileChanged"],["outputCanvas",""],[3,"kernel","updateFilters"]],template:function(t,r){if(1&t&&(qe(0,"app-tutorial-template-images"),Bt(1," Morphological Transformations "),Ni(2,0),Cn(3,"app-labelled-sliders",1,2)(5,"hr"),qe(6,"app-labelled-sliders",3),zt("valueChange",function(o){return r.ksize=o})("valueChange",function(){return r.updateVisu()}),nt(),qe(7,"span")(8,"mat-button-toggle-group",4),zt("ngModelChange",function(o){return r.structuralElementType=o})("change",function(){return r.updateVisu()}),qe(9,"mat-button-toggle",5)(10,"mat-icon"),Bt(11,"toll"),nt()(),qe(12,"mat-button-toggle",6)(13,"mat-icon"),Bt(14,"crop_square"),nt()(),qe(15,"mat-button-toggle",7)(16,"mat-icon"),Bt(17,"games"),nt()()()(),Cn(18,"canvas",8,9),qe(20,"button",10),zt("click",function(){return r.addFilter()}),Bt(21," Add "),nt(),Fi(),Ni(22,11),qe(23,"h2"),Bt(24,"Profile"),nt(),Cn(25,"div",12),qe(26,"h2"),Bt(27,"Active filters"),nt(),Cn(28,"hr"),ar(29,Wse,1,1,"app-structural-element",13),Fi(),Ni(30,14),qe(31,"app-draw-canvas",15,16),zt("drawingEnded",function(){return r.applyFilter()}),nt(),qe(33,"app-draw-canvas",17,18),zt("profileChanged",function(){return r.updateProfile()}),nt(),Fi(),nt()),2&t){const i=li(4);Dt(6),Mt("min",3)("max",25)("step",2)("title","Element size")("value",r.ksize),Dt(2),Mt("ngModel",r.structuralElementType),Dt(17),Mt("options",r.profileOptions),Dt(4),Mt("ngForOf",r.listKernels),Dt(2),Mt("width",r.width)("drawable",!0)("BWOption",!1)("OnlyBW",!0)("brushRadius",i.value),Dt(2),Mt("width",r.width)("profileOption",!0)("drawable",!1)}},dependencies:[nC,WC,jC,iu,hf,ff,bl,nh,Vg,ih,Use,wl],styles:[".canvas[_ngcontent-%COMP%]{width:45%;min-width:256px;image-rendering:-webkit-crisp-edges;image-rendering:pixelated;image-rendering:crisp-edges}.structuralElementVisu[_ngcontent-%COMP%]{width:128px;aspect-ratio:1;image-rendering:-webkit-crisp-edges;image-rendering:pixelated;image-rendering:crisp-edges;margin:1em}.profile-graph[_ngcontent-%COMP%]{min-width:300px;padding:0 .5em}"]}),e})();function Lj(e){let n=Array(e.length).fill(0);lP(e,n);let t=new Array(e.length);for(let r=0;r<t.length;r++){let i=e[r],o=n[r];t[r]=2*Math.sqrt(i*i+o*o)/e.length}return t}function lP(e,n){const t=e.length;if(t!=n.length)throw new RangeError("Mismatched lengths");0!=t&&(0==(t&t-1)?function Yse(e,n){const t=e.length;if(t!=n.length)throw new RangeError("Mismatched lengths");if(1==t)return;let r=-1;for(let f=0;f<32;f++)1<<f==t&&(r=f);if(-1==r)throw new RangeError("Length is not a power of 2");let i=new Array(t/2),o=new Array(t/2);for(let f=0;f<t/2;f++)i[f]=Math.cos(2*Math.PI*f/t),o[f]=Math.sin(2*Math.PI*f/t);for(let f=0;f<t;f++){const g=d(f,r);if(g>f){let _=e[f];e[f]=e[g],e[g]=_,_=n[f],n[f]=n[g],n[g]=_}}for(let f=2;f<=t;f*=2){const g=f/2,_=t/f;for(let C=0;C<t;C+=f)for(let S=C,k=0;S<C+g;S++,k+=_){const z=S+g,te=e[z]*i[k]+n[z]*o[k],pe=-e[z]*o[k]+n[z]*i[k];e[z]=e[S]-te,n[z]=n[S]-pe,e[S]+=te,n[S]+=pe}}function d(f,g){let _=0;for(let C=0;C<g;C++)_=_<<1|1&f,f>>>=1;return _}}(e,n):function Xse(e,n){const t=e.length;if(t!=n.length)throw new RangeError("Mismatched lengths");let r=1;for(;r<2*t+1;)r*=2;let i=new Array(t),o=new Array(t);for(let k=0;k<t;k++){const z=k*k%(2*t);i[k]=Math.cos(Math.PI*z/t),o[k]=Math.sin(Math.PI*z/t)}let d=av(r),f=av(r);for(let k=0;k<t;k++)d[k]=e[k]*i[k]+n[k]*o[k],f[k]=-e[k]*o[k]+n[k]*i[k];let g=av(r),_=av(r);g[0]=i[0],_[0]=o[0];for(let k=1;k<t;k++)g[k]=g[r-k]=i[k],_[k]=_[r-k]=o[k];let C=new Array(r),S=new Array(r);!function Oj(e,n,t,r,i,o){const d=e.length;if(d!=n.length||d!=t.length||d!=r.length||d!=i.length||d!=o.length)throw new RangeError("Mismatched lengths");e=e.slice(),n=n.slice(),t=t.slice(),r=r.slice(),lP(e,n),lP(t,r);for(let f=0;f<d;f++){const g=e[f]*t[f]-n[f]*r[f];n[f]=n[f]*t[f]+e[f]*r[f],e[f]=g}!function Zse(e,n){lP(n,e)}(e,n);for(let f=0;f<d;f++)i[f]=e[f]/d,o[f]=n[f]/d}(d,f,g,_,C,S);for(let k=0;k<t;k++)e[k]=C[k]*i[k]+S[k]*o[k],n[k]=-C[k]*o[k]+S[k]*i[k]}(e,n))}function av(e){return Array(e).fill(0)}const $se=["input"],Kse=["label"],Qse=function(e){return{enterDuration:e}},qse=["*"],Jse=new on("mat-checkbox-default-options",{providedIn:"root",factory:kj});function kj(){return{color:"accent",clickAction:"check-indeterminate"}}let ele=0;const Nj=kj(),tle={provide:Xo,useExisting:zr(()=>Fj),multi:!0};class nle{}const rle=xy(qd(mf(RC(class{constructor(e){this._elementRef=e}}))));let ile=(()=>{class e extends rle{constructor(t,r,i,o,d,f,g){super(r),this._changeDetectorRef=i,this._ngZone=o,this._animationMode=f,this._options=g,this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new Mn,this.indeterminateChange=new Mn,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||Nj,this.color=this.defaultColor=this._options.color||Nj.color,this.tabIndex=parseInt(d)||0,this.id=this._uniqueId=`${t}${++ele}`}get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(t){this._required=xr(t)}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(t){const r=xr(t);r!=this.checked&&(this._checked=r,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){const r=xr(t);r!==this.disabled&&(this._disabled=r,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(t){const r=t!=this._indeterminate;this._indeterminate=xr(t),r&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(t){this.checked=!!t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_getAriaChecked(){return this.checked?"true":this.indeterminate?"mixed":"false"}_transitionCheckState(t){let r=this._currentCheckState,i=this._getAnimationTargetElement();if(r!==t&&i&&(this._currentAnimationClass&&i.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(r,t),this._currentCheckState=t,this._currentAnimationClass.length>0)){i.classList.add(this._currentAnimationClass);const o=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{i.classList.remove(o)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){const t=this._options?.clickAction;this.disabled||"noop"===t?!this.disabled&&"noop"===t&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==t&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}_onInteractionEvent(t){t.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(t,r){if("NoopAnimations"===this._animationMode)return"";switch(t){case 0:if(1===r)return this._animationClasses.uncheckedToChecked;if(3==r)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case 2:return 1===r?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case 1:return 2===r?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case 3:return 1===r?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(t){const r=this._inputElement;r&&(r.nativeElement.indeterminate=t)}}return e.\u0275fac=function(t){gc()},e.\u0275dir=Dn({type:e,viewQuery:function(t,r){if(1&t&&(Wr($se,5),Wr(Kse,5),Wr(Jd,5)),2&t){let i;Kn(i=Qn())&&(r._inputElement=i.first),Kn(i=Qn())&&(r._labelElement=i.first),Kn(i=Qn())&&(r.ripple=i.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],id:"id",required:"required",labelPosition:"labelPosition",name:"name",value:"value",checked:"checked",disabled:"disabled",indeterminate:"indeterminate"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},features:[Gn]}),e})(),Fj=(()=>{class e extends ile{constructor(t,r,i,o,d,f,g){super("mat-checkbox-",t,r,o,d,f,g),this._focusMonitor=i,this._animationClasses={uncheckedToChecked:"mat-checkbox-anim-unchecked-checked",uncheckedToIndeterminate:"mat-checkbox-anim-unchecked-indeterminate",checkedToUnchecked:"mat-checkbox-anim-checked-unchecked",checkedToIndeterminate:"mat-checkbox-anim-checked-indeterminate",indeterminateToChecked:"mat-checkbox-anim-indeterminate-checked",indeterminateToUnchecked:"mat-checkbox-anim-indeterminate-unchecked"}}_createChangeEvent(t){const r=new nle;return r.source=this,r.checked=t,r}_getAnimationTargetElement(){return this._elementRef.nativeElement}ngAfterViewInit(){super.ngAfterViewInit(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{t||this._onBlur()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onInputClick(t){t.stopPropagation(),super._handleInputClick()}focus(t,r){t?this._focusMonitor.focusVia(this._inputElement,t,r):this._inputElement.nativeElement.focus(r)}}return e.\u0275fac=function(t){return new(t||e)(Xe(kr),Xe(Wi),Xe(Ac),Xe(rr),Ds("tabindex"),Xe(Zo,8),Xe(Jse,8))},e.\u0275cmp=Zn({type:e,selectors:[["mat-checkbox"]],hostAttrs:[1,"mat-checkbox"],hostVars:14,hostBindings:function(t,r){2&t&&(Nl("id",r.id),Er("tabindex",null)("aria-label",null)("aria-labelledby",null),ui("mat-checkbox-indeterminate",r.indeterminate)("mat-checkbox-checked",r.checked)("mat-checkbox-disabled",r.disabled)("mat-checkbox-label-before","before"==r.labelPosition)("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matCheckbox"],features:[Gr([tle]),Gn],ngContentSelectors:qse,decls:17,vars:21,consts:[[1,"mat-checkbox-layout"],["label",""],[1,"mat-checkbox-inner-container"],["type","checkbox",1,"mat-checkbox-input","cdk-visually-hidden",3,"id","required","checked","disabled","tabIndex","change","click"],["input",""],["matRipple","",1,"mat-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleRadius","matRippleCentered","matRippleAnimation"],[1,"mat-ripple-element","mat-checkbox-persistent-ripple"],[1,"mat-checkbox-frame"],[1,"mat-checkbox-background"],["version","1.1","focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mat-checkbox-checkmark"],["fill","none","stroke","white","d","M4.1,12.7 9,17.6 20.3,6.3",1,"mat-checkbox-checkmark-path"],[1,"mat-checkbox-mixedmark"],[1,"mat-checkbox-label",3,"cdkObserveContent"],["checkboxLabel",""],[2,"display","none"]],template:function(t,r){if(1&t&&(zi(),qe(0,"label",0,1)(2,"span",2)(3,"input",3,4),zt("change",function(o){return r._onInteractionEvent(o)})("click",function(o){return r._onInputClick(o)}),nt(),qe(5,"span",5),Cn(6,"span",6),nt(),Cn(7,"span",7),qe(8,"span",8),xh(),qe(9,"svg",9),Cn(10,"path",10),nt(),function VP(){!function zP(){Or.lFrame.currentNamespace=null}()}(),Cn(11,"span",11),nt()(),qe(12,"span",12,13),zt("cdkObserveContent",function(){return r._onLabelTextChange()}),qe(14,"span",14),Bt(15,"\xa0"),nt(),Ur(16),nt()()),2&t){const i=li(1),o=li(13);Er("for",r.inputId),Dt(2),ui("mat-checkbox-inner-container-no-side-margin",!o.textContent||!o.textContent.trim()),Dt(1),Mt("id",r.inputId)("required",r.required)("checked",r.checked)("disabled",r.disabled)("tabIndex",r.tabIndex),Er("value",r.value)("name",r.name)("aria-label",r.ariaLabel||null)("aria-labelledby",r.ariaLabelledby)("aria-checked",r._getAriaChecked())("aria-describedby",r.ariaDescribedby),Dt(2),Mt("matRippleTrigger",i)("matRippleDisabled",r._isRippleDisabled())("matRippleRadius",20)("matRippleCentered",!0)("matRippleAnimation",Fl(19,Qse,"NoopAnimations"===r._animationMode?0:150))}},dependencies:[Jd,uB],styles:['@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.910259}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);stroke-dashoffset:0}to{stroke-dashoffset:-22.910259}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0deg)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}32.8%,100%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{display:inline-block;transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);position:relative}.mat-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-checkbox-layout{-webkit-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:rgba(0,0,0,0);transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0, 0, 0.2, 0.1),opacity 90ms cubic-bezier(0, 0, 0.2, 0.1);-webkit-print-color-adjust:exact;color-adjust:exact}._mat-animation-noopable .mat-checkbox-background{transition:none}.cdk-high-contrast-active .mat-checkbox .mat-checkbox-background{background:none}.mat-checkbox-persistent-ripple{display:block;width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media(hover: none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.910259;stroke-dasharray:22.910259;stroke-width:2.1333333333px}.cdk-high-contrast-black-on-white .mat-checkbox-checkmark-path{stroke:#000 !important}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0deg);border-radius:2px}.cdk-high-contrast-active .mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0deg)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:rgba(0,0,0,0)}.mat-checkbox-disabled{cursor:default}.cdk-high-contrast-active .mat-checkbox-disabled{opacity:.5}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0ms mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0ms mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:300ms linear 0ms mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}.mat-checkbox-input:focus~.mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),e})(),Bj=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({}),e})(),sle=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[Rg,ti,zA,Bj,ti,Bj]}),e})(),lle=(()=>{class e{constructor(t){this.formBuilder=t,this.n_points=1024,this.t_start=0,this.t_stop=8,this.fe=2,this.y1=!0,this.y2=!0,this.y3=!0,this.y1Phase=0,this.y2Phase=2,this.y3Phase=4,this.original_data=Array(this.n_points),this.sampled_data=Array(this.n_points),this.original_fft=Array(this.n_points),this.sampled_fft=Array(this.n_points),this.createData(),this.update_fft_chart(),this.initialize_echarts()}ngAfterViewInit(){this.update_fe(this.fe),this.update_fft_chart()}initialize_echarts(){let t={xAxis:{min:this.t_start,max:this.t_stop},yAxis:{min:-7,max:7}};this.original_graph=Object.assign({},t),this.original_graph.series=[{data:this.original_data,type:"line",showSymbol:!1,animation:!1},{data:this.sampled_data,type:"bar"}],this.original_graph.title={text:"Original Signal"},this.sampled_graph=Object.assign({},t),this.sampled_graph.title={text:"Sampled Signal"},this.sampled_graph.series=[{data:this.sampled_data,type:"line",showSymbol:!0}],this.sampled_fft_graph=Object.assign({},t),this.sampled_fft_graph.title={text:"Sampled Signal FFT"},this.original_fft_graph=Object.assign({},t),this.original_fft_graph.title={text:"Original Signal FFT"}}createData(){const t=F8(this.t_start,this.t_stop,this.n_points);this.original_data=new Array(this.n_points);for(let r=0;r<this.n_points;r++){const i=t[r];this.original_data[r]=[i,this.signal(i)]}this.resample_signal(),this.original_graph&&Array.isArray(this.original_graph.series)&&(this.original_graph.series[0].data=this.original_data,this.echartsInstanceOriginalGraph?.setOption(this.original_graph)),this.update_fft_chart()}resample_signal(){let r=Math.round(this.t_stop/(1/this.fe)),i=F8(this.t_start,this.t_stop,r+1);this.sampled_data=new Array(r+1);for(let o=0;o<=r;o++){let d=i[o];this.sampled_data[o]=[d,this.signal(d)]}}recompute(){this.createData(),this.update_fe(this.fe)}signal(t){return(this.y1?4*Math.sin(2*Math.PI*.5*t-this.y1Phase):0)+(this.y2?2*Math.sin(2*Math.PI*1*t+2-this.y2Phase):0)+(this.y3?1*Math.sin(2*Math.PI*4*t+4-this.y3Phase):0)}update_fft_chart(){let t=Lj(this.original_data.map(o=>o[1])),r=this.n_points/(this.t_stop-this.t_start),i={xAxis:{min:0,max:5},yAxis:{min:0,max:5},series:[{data:t.map((o,d)=>[d*r/this.n_points,o]),type:"bar"}]};this.original_fft_graph=Object.assign({},i),this.original_fft_graph.title={text:"Fourier Transform of the original signal"},this.echartsInstanceOriginalFFTGraph?.setOption(this.original_fft_graph),this.update_sampled_fft_chart()}update_sampled_fft_chart(){if(0==this.sampled_data.length)return;let t=new Array(this.n_points),r=this.n_points/(this.t_stop-this.t_start),i=this.sampled_data.length;for(let _=0;_<this.n_points;_++){let C=i/this.n_points*_,S=Math.floor(C);if(S==i-1)t[_]=this.sampled_data[i-1];else{let k=C-S;t[_]=[this.t_start+_/r,(1-k)*this.sampled_data[S][1]+k*this.sampled_data[S+1][1]]}}let d=Lj(t.map(_=>_[1])),f=d.length/(this.t_stop-this.t_start),g={xAxis:{min:0,max:5},yAxis:{min:0,max:5},series:[{data:d.map((_,C)=>[C*f/d.length,_]),type:"bar"}]};this.sampled_fft_graph=Object.assign({},g),this.sampled_fft_graph.title={text:"Fourier Transform of the sampled signal"},this.echartsInstanceSampledFFTGraph?.setOption(this.sampled_fft_graph)}onSampledChartInit(t){this.echartInstanceSampledGraph=t}onOriginalChartInit(t){this.echartsInstanceOriginalGraph=t}onFFTChartInit(t){this.echartsInstanceOriginalFFTGraph=t}onSampledFFTChartInit(t){this.echartsInstanceSampledFFTGraph=t}update_fe(t){t&&(this.fe=t,this.resample_signal(),Array.isArray(this.sampled_graph.series)&&(this.sampled_graph.series[0].data=this.sampled_data,this.sampled_graph.title={text:`Sampled Signal fe = ${this.fe}, N = ${this.sampled_data.length}`},this.echartInstanceSampledGraph?.setOption(this.sampled_graph),Array.isArray(this.original_graph.series)&&(this.original_graph.series[1].data=this.sampled_data,this.echartsInstanceOriginalGraph?.setOption(this.original_graph))),this.update_fft_chart())}}return e.\u0275fac=function(t){return new(t||e)(Xe(e7))},e.\u0275cmp=Zn({type:e,selectors:[["app-sampling"]],decls:26,vars:24,consts:[[3,"rightDrawer"],["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],[3,"checked","change"],[3,"value","min","max","step","valueChange"],[1,"w-64"],["title","Sub sampling frequency",3,"value","max","min","step","input"],["ngProjectAs","[centerContent]",5,["","centerContent",""]],[1,"grid","md:grid-cols-2","w-full","gap-2","p-2"],["echarts","",1,"bg-white",3,"options","chartInit"]],template:function(t,r){1&t&&(qe(0,"app-tutorial-template",0),Bt(1," Sampling Frequency and Nyquist-Shannon Theorem "),Ni(2,1),qe(3,"mat-label"),Bt(4,"Components"),nt(),qe(5,"p")(6,"mat-checkbox",2),zt("change",function(){return r.y1=!r.y1,r.recompute()}),Bt(7,"Y1"),nt(),qe(8,"mat-slider",3),zt("valueChange",function(o){return r.y1Phase=o})("valueChange",function(){return r.recompute()}),nt()(),qe(9,"p")(10,"mat-checkbox",2),zt("change",function(){return r.y2=!r.y2,r.recompute()}),Bt(11,"Y2"),nt(),qe(12,"mat-slider",3),zt("valueChange",function(o){return r.y2Phase=o})("valueChange",function(){return r.recompute()}),nt()(),qe(13,"p")(14,"mat-checkbox",2),zt("change",function(){return r.y3=!r.y3,r.recompute()}),Bt(15,"Y3"),nt(),qe(16,"mat-slider",3),zt("valueChange",function(o){return r.y3Phase=o})("valueChange",function(){return r.recompute()}),nt()(),qe(17,"p",4),Bt(18," The Nyquist-Shannon theorem states that a signal must be sampled at a rate of at least twice the highest frequency component in the signal in order to be able to reconstruct the original signal from the samples. This is known as the Nyquist rate. "),nt(),qe(19,"app-labelled-sliders",5),zt("input",function(o){return r.update_fe(o.value)}),nt(),Fi(),Ni(20,6),qe(21,"div",7)(22,"div",8),zt("chartInit",function(o){return r.onOriginalChartInit(o)}),nt(),qe(23,"div",8),zt("chartInit",function(o){return r.onSampledChartInit(o)}),nt(),qe(24,"div",8),zt("chartInit",function(o){return r.onFFTChartInit(o)}),nt(),qe(25,"div",8),zt("chartInit",function(o){return r.onSampledFFTChartInit(o)}),nt()(),Fi(),nt()),2&t&&(Mt("rightDrawer",!1),Dt(6),Mt("checked",r.y1),Dt(2),Mt("value",r.y1Phase)("min",0)("max",6.28)("step",.05),Dt(2),Mt("checked",r.y2),Dt(2),Mt("value",r.y2Phase)("min",0)("max",6.28)("step",.05),Dt(2),Mt("checked",r.y3),Dt(2),Mt("value",r.y3Phase)("min",0)("max",6.28)("step",.05),Dt(3),Mt("value",r.fe)("max",64)("min",0)("step",.1),Dt(3),Mt("options",r.original_graph),Dt(1),Mt("options",r.sampled_graph),Dt(1),Mt("options",r.original_fft_graph),Dt(1),Mt("options",r.sampled_fft_graph))},dependencies:[nC,Fj,kg,ZB,ih,HB]}),e})();class ov{static getGaussianKernel(n,t,r=1,i=1){const o=((n=n%2==0?n+1:n)-1)/2,d=((t=t%2==0?t+1:t)-1)/2,f=Math.sqrt(2);let g=new Array;for(let C=0;C<n;C++)for(let S=0;S<t;S++){const k=Math.exp(-Math.pow((C-o)/(f*r),2)-Math.pow((S-d)/(f*i),2));g.push(k)}const _=g.reduce((C,S)=>C+S,0);return g=g.map(C=>C/_),{width:n,height:t,active:!0,mat:[g],name:"Gaussian"}}static getMeanKernel(n,t){return{width:n,height:t,active:!0,mat:[new Array(n*t).fill(1/(n*t))],name:"Mean"}}static getSobelKernels(){return{width:3,height:3,active:!0,mat:[[1,0,-1,2,0,-2,1,0,-1],[1,2,1,0,0,0,-1,-2,-1]],name:"Sobel"}}static getPrewittKernels(){return{width:3,height:3,active:!0,mat:[[1,0,-1,1,0,-1,1,0,-1],[1,1,1,0,0,0,-1,-1,-1]],name:"Prewitt"}}static getLaplacianKernel(){return{width:3,height:3,active:!0,mat:[[-1,-1,-1,-1,8,-1,-1,-1,-1]],name:"Laplacian"}}static getAdditiveKernel(n){return{width:1,height:1,active:!0,mat:[[n]],name:"Add"}}static getMultiplicativeKernel(n){return{width:1,height:1,active:!0,mat:[[n]],name:"Multiply"}}}const cle=["canvas"];function ule(e,n){1&e&&(qe(0,"mat-icon"),Bt(1,"visibility"),nt())}function dle(e,n){1&e&&(qe(0,"mat-icon"),Bt(1,"visibility_off"),nt())}function hle(e,n){if(1&e&&(qe(0,"td"),Bt(1),nt()),2&e){const t=n.index,r=Yn().index,i=Yn().$implicit,o=Yn();Dt(1),Ya(" ",i[r*o.kernel.width+t].toFixed(2)," ")}}const Vj=function(){return[]};function fle(e,n){if(1&e&&(qe(0,"tr"),ar(1,hle,2,1,"td",10),nt()),2&e){const t=Yn(2);Dt(1),Mt("ngForOf",eu(1,Vj).constructor(t.kernel.width))}}function ple(e,n){if(1&e){const t=sa();qe(0,"div",8)(1,"table",9),zt("mouseenter",function(){const o=Kr(t).$implicit;return Qr(Yn().drawFilter(o))}),ar(2,fle,2,2,"tr",10),nt()()}if(2&e){const t=Yn();Dt(2),Mt("ngForOf",eu(1,Vj).constructor(t.kernel.height))}}const gle=function(e,n){return{activated:e,deactivated:n}};let vle=(()=>{class e{constructor(){this.updateFilters=new Mn}ngOnInit(){this.kernel.delete=!1;const t=this.canvas.nativeElement;this.ctx=t.getContext("2d"),this.width=this.kernel.width,this.height=this.kernel.height,t.width=this.width,t.height=this.height,this.ctx.canvas.width=this.width,this.ctx.canvas.height=this.height,this.drawFilter(this.kernel.mat[0])}delete(t){t.stopPropagation(),this.kernel.delete=!0,this.updateFilters.emit()}toggleActive(t){t.stopPropagation(),this.kernel.active=!this.kernel.active,this.updateFilters.emit()}drawFilter(t){let r=new Uint8ClampedArray(4*t.length),i=t.reduce(function(f,g){return f>g?f:g}),o=t.reduce(function(f,g){return f<g?f:g});o==i&&(o=0,i=1);for(let f=0;f<t.length;f++){const g=4*f,_=Math.round(255*(t[f]-o)/(i-o));r[g]=_,r[g+1]=_,r[g+2]=_,r[g+3]=255}let d=new ImageData(r,this.kernel.width,this.kernel.height);this.ctx.putImageData(d,0,0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Zn({type:e,selectors:[["app-kernel-element"]],viewQuery:function(t,r){if(1&t&&Wr(cle,7),2&t){let i;Kn(i=Qn())&&(r.canvas=i.first)}},inputs:{kernel:"kernel"},outputs:{updateFilters:"updateFilters"},decls:15,vars:8,consts:[[3,"ngClass"],["mat-mini-fab","","color","accent",1,"action-button",3,"click"],[4,"ngIf"],[1,"title-span"],["mat-mini-fab","","color","warn",1,"action-button",3,"click"],[1,"vertical-flex","center"],["class","rounded-table",4,"ngFor","ngForOf"],["canvas",""],[1,"rounded-table"],[3,"mouseenter"],[4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(qe(0,"mat-expansion-panel",0)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"button",1),zt("click",function(o){return r.toggleActive(o)}),ar(4,ule,2,0,"mat-icon",2),ar(5,dle,2,0,"mat-icon",2),nt(),qe(6,"span",3),Bt(7),nt(),qe(8,"button",4),zt("click",function(o){return r.delete(o)}),qe(9,"mat-icon"),Bt(10,"close"),nt()()()(),qe(11,"div",5),ar(12,ple,3,2,"div",6),Cn(13,"canvas",null,7),nt()()),2&t&&(Mt("ngClass",kd(5,gle,r.kernel.active,!r.kernel.active)),Dt(4),Mt("ngIf",r.kernel.active),Dt(1),Mt("ngIf",!r.kernel.active),Dt(2),Ya(" ",r.kernel.name," "),Dt(5),Mt("ngForOf",r.kernel.mat))},dependencies:[Zu,iu,Hs,sP,mV,_V,bl,nh],styles:["canvas[_ngcontent-%COMP%]{width:128px;aspect-ratio:1;image-rendering:-webkit-crisp-edges;image-rendering:pixelated;image-rendering:crisp-edges;box-shadow:#0000001f 0 1px 3px,#0000003d 0 1px 2px;border-radius:.5em}.title-span[_ngcontent-%COMP%]{margin:auto}tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#646464}.horizontal-flex[_ngcontent-%COMP%]{width:100%}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#6f9b75}td[_ngcontent-%COMP%]{font-size:small}.center[_ngcontent-%COMP%]{align-items:center;gap:1em}.deactivated[_ngcontent-%COMP%]:not(button){filter:brightness(.7);border:solid white 1px}.rounded-table[_ngcontent-%COMP%]{border-radius:.75em;overflow:hidden;box-shadow:#0000001f 0 1px 3px,#0000003d 0 1px 2px}button[_ngcontent-%COMP%]{transform:scale(.5)}"]}),e})();function mle(e,n){if(1&e){const t=sa();qe(0,"button",25),zt("click",function(){return Kr(t),Qr(Yn().cleanFilterList())}),Bt(1," Clear "),nt()}}function _le(e,n){if(1&e){const t=sa();qe(0,"app-kernel-element",26),zt("updateFilters",function(){return Kr(t),Qr(Yn().updateFilters())}),nt()}2&e&&Mt("kernel",n.$implicit)}let yle=(()=>{class e extends wl{updateFilters(){this.listKernels=this.listKernels.filter(t=>!t.delete),this.applyFilter()}ngAfterContentInit(){this.listKernels=new Array}laplacianFilter(){this.listKernels.push(ov.getLaplacianKernel()),this.applyFilter()}gaussianBlur(t,r,i){this.listKernels.push(ov.getGaussianKernel(t,t,r,i)),this.applyFilter()}meanFilter(t){this.listKernels.push(ov.getMeanKernel(t,t)),this.applyFilter()}prewittFilter(){this.listKernels.push(ov.getPrewittKernels()),this.applyFilter()}sobelFilter(){this.listKernels.push(ov.getSobelKernels()),this.applyFilter()}additiveFilter(t){this.listKernels.push(ov.getAdditiveKernel(t)),this.applyFilter()}multiplyFilter(t){this.listKernels.push(ov.getMultiplicativeKernel(t)),this.applyFilter()}cleanFilterList(){this.listKernels=new Array,this.applyFilter()}applyFilter(){let t=cv.imread(this.drawCanvas.getCanvas()),r=new cv.Mat;t.convertTo(r,cv.CV_32F,1/255),cv.cvtColor(r,r,cv.COLOR_RGB2GRAY),this.listKernels.forEach(i=>{if(i.active)if("Add"==i.name)r.convertTo(r,-1,1,i.mat[0][0]);else if("Multiply"==i.name)r.convertTo(r,-1,i.mat[0][0],0);else if(2==i.mat.length){let o=cv.matFromArray(i.width,i.height,cv.CV_32F,i.mat[0]),d=new cv.Mat;cv.filter2D(r,d,-1,o),cv.pow(d,2,d),o=cv.matFromArray(i.width,i.height,cv.CV_32F,i.mat[1]);let f=new cv.Mat;cv.filter2D(r,f,-1,o),cv.pow(f,2,f),cv.add(d,f,r),cv.pow(r,.5,r),o.delete(),d.delete(),f.delete()}else{let o=cv.matFromArray(i.width,i.height,cv.CV_32F,i.mat[0]);cv.filter2D(r,r,-1,o),o.delete()}}),cv.convertScaleAbs(r,r,255),cv.imshow(this.outputCanvas.getCanvas(),r),t.delete(),r.delete()}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Gi(e)))(r||e)}}(),e.\u0275cmp=Zn({type:e,selectors:[["app-spatial-filtering"]],features:[Gn],decls:99,vars:32,consts:[["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],["title","Brush Size"],["brushSizeSlider",""],[1,"filter-name"],["mat-mini-fab","","color","accent",1,"action-button",3,"click"],["title","Addition factor",3,"max","min","value","step"],["additiveFilterSlider",""],["mat-raised-button","","color","primary",1,"add-button",3,"click"],["title","Multiplication factor",3,"max","min","value","step"],["multiplyFilterSlider",""],["title","Kernel size",3,"max","min","value","step"],["meanFilterSlider",""],["gaussSizeSlider",""],["title","STD X",3,"max","min","value","step"],["gaussSTDSliderX",""],["title","STD Y",3,"max","min","value","step"],["gaussSDTSliderY",""],["ngProjectAs","[drawerRight]",5,["","drawerRight",""]],["mat-raised-button","","color","warn","class","fillWidth",3,"click",4,"ngIf"],[3,"kernel","updateFilters",4,"ngFor","ngForOf"],["ngProjectAs","[centerContent]",5,["","centerContent",""]],["title","Canvas",1,"canvas",3,"width","drawable","BWOption","brushRadius","drawingEnded"],["inputCanvas",""],["title","Filtered canvas",1,"canvas",3,"width","drawable"],["outputCanvas",""],["mat-raised-button","","color","warn",1,"fillWidth",3,"click"],[3,"kernel","updateFilters"]],template:function(t,r){if(1&t){const i=sa();qe(0,"app-tutorial-template-images"),Bt(1," Spatial filtering "),Ni(2,0),Cn(3,"app-labelled-sliders",1,2)(5,"hr"),qe(6,"mat-expansion-panel")(7,"mat-expansion-panel-header")(8,"mat-panel-title")(9,"span",3)(10,"button",4),zt("click",function(d){Kr(i);const f=li(15);return r.additiveFilter(f.value),Qr(d.stopPropagation())}),qe(11,"mat-icon"),Bt(12," add "),nt()(),Bt(13," Brightness "),nt()()(),Cn(14,"app-labelled-sliders",5,6),qe(16,"button",7),zt("click",function(){Kr(i);const d=li(15);return Qr(r.additiveFilter(d.value))}),Bt(17," Add "),nt()(),qe(18,"mat-expansion-panel")(19,"mat-expansion-panel-header")(20,"mat-panel-title")(21,"span",3)(22,"button",4),zt("click",function(d){Kr(i);const f=li(27);return r.multiplyFilter(f.value),Qr(d.stopPropagation())}),qe(23,"mat-icon"),Bt(24," add "),nt()(),Bt(25," Contrast "),nt()()(),Cn(26,"app-labelled-sliders",8,9),qe(28,"button",7),zt("click",function(){Kr(i);const d=li(27);return Qr(r.multiplyFilter(d.value))}),Bt(29," Add "),nt()(),qe(30,"mat-expansion-panel")(31,"mat-expansion-panel-header")(32,"mat-panel-title")(33,"span",3)(34,"button",4),zt("click",function(d){Kr(i);const f=li(39);return r.meanFilter(f.value),Qr(d.stopPropagation())}),qe(35,"mat-icon"),Bt(36," add "),nt()(),Bt(37," Mean blur "),nt()()(),Cn(38,"app-labelled-sliders",10,11),qe(40,"button",7),zt("click",function(){Kr(i);const d=li(39);return Qr(r.meanFilter(d.value))}),Bt(41," Add "),nt()(),qe(42,"mat-expansion-panel")(43,"mat-expansion-panel-header")(44,"mat-panel-title")(45,"span",3)(46,"button",4),zt("click",function(d){Kr(i);const f=li(51),g=li(53),_=li(55);return r.gaussianBlur(f.value,g.value,_.value),Qr(d.stopPropagation())}),qe(47,"mat-icon"),Bt(48," add "),nt()(),Bt(49," Gaussian blur "),nt()()(),Cn(50,"app-labelled-sliders",10,12)(52,"app-labelled-sliders",13,14)(54,"app-labelled-sliders",15,16),qe(56,"button",7),zt("click",function(){Kr(i);const d=li(51),f=li(53),g=li(55);return Qr(r.gaussianBlur(d.value,f.value,g.value))}),Bt(57," Add "),nt()(),qe(58,"mat-expansion-panel")(59,"mat-expansion-panel-header")(60,"mat-panel-title")(61,"span",3)(62,"button",4),zt("click",function(d){return r.prewittFilter(),d.stopPropagation()}),qe(63,"mat-icon"),Bt(64," add "),nt()(),Bt(65," Prewitt Filter "),nt()()(),qe(66,"button",7),zt("click",function(){return r.prewittFilter()}),Bt(67," Add "),nt()(),qe(68,"mat-expansion-panel")(69,"mat-expansion-panel-header")(70,"mat-panel-title")(71,"span",3)(72,"button",4),zt("click",function(d){return r.sobelFilter(),d.stopPropagation()}),qe(73,"mat-icon"),Bt(74," add "),nt()(),Bt(75," Sobel Filter "),nt()()(),qe(76,"button",7),zt("click",function(){return r.sobelFilter()}),Bt(77," Add "),nt()(),qe(78,"mat-expansion-panel")(79,"mat-expansion-panel-header")(80,"mat-panel-title")(81,"span",3)(82,"button",4),zt("click",function(d){return r.laplacianFilter(),d.stopPropagation()}),qe(83,"mat-icon"),Bt(84," add "),nt()(),Bt(85," Laplacian Filter "),nt()()(),qe(86,"button",7),zt("click",function(){return r.laplacianFilter()}),Bt(87," Add "),nt()(),Fi(),Ni(88,17),qe(89,"h2"),Bt(90,"Active filters"),nt(),ar(91,mle,2,0,"button",18),Cn(92,"hr"),ar(93,_le,1,1,"app-kernel-element",19),Fi(),Ni(94,20),qe(95,"app-draw-canvas",21,22),zt("drawingEnded",function(){return r.applyFilter()}),nt(),Cn(97,"app-draw-canvas",23,24),Fi(),nt()}if(2&t){const i=li(4);Dt(14),Mt("max",1)("min",-1)("value",0)("step",.1),Dt(12),Mt("max",5)("min",0)("value",1)("step",.1),Dt(12),Mt("max",9)("min",3)("value",3)("step",2),Dt(12),Mt("max",15)("min",3)("value",9)("step",2),Dt(2),Mt("max",15)("min",0)("value",2)("step",.5),Dt(2),Mt("max",15)("min",0)("value",2)("step",.5),Dt(37),Mt("ngIf",r.listKernels.length),Dt(2),Mt("ngForOf",r.listKernels),Dt(2),Mt("width",512)("drawable",!0)("BWOption",!0)("brushRadius",i.value),Dt(2),Mt("width",512)("drawable",!1)}},dependencies:[iu,Hs,sP,mV,_V,bl,nh,Vg,vle,ih,wl],styles:[".filter-name[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{transform:scale(.5)}.add-button[_ngcontent-%COMP%]{width:100%}mat-expansion-panel[_ngcontent-%COMP%]{width:100%}.canvas[_ngcontent-%COMP%]{width:45%;min-width:256px}"]}),e})(),ble=(()=>{class e extends wl{constructor(){super(...arguments),this.width=256}updateFFT(){let t=cv.imread(this.drawCanvas.getCanvas());cv.cvtColor(t,t,cv.COLOR_RGBA2GRAY,0);let r=cv.getOptimalDFTSize(t.rows),i=cv.getOptimalDFTSize(t.cols),o=cv.Scalar.all(0),d=new cv.Mat;cv.copyMakeBorder(t,d,0,r-t.rows,0,i-t.cols,cv.BORDER_CONSTANT,o);let f=new cv.Mat;d.convertTo(f,cv.CV_32F);let g=new cv.MatVector,_=new cv.Mat,C=new cv.Mat.zeros(d.rows,d.cols,cv.CV_32F);g.push_back(f),g.push_back(C),cv.merge(g,_),cv.dft(_,_,cv.DFT_SCALE),cv.split(_,g),cv.magnitude(g.get(0),g.get(1),g.get(0));let S=g.get(0),k=new cv.Mat.ones(S.rows,S.cols,S.type());cv.add(S,k,S),cv.log(S,S);let z=new cv.Rect(0,0,-2&S.cols,-2&S.rows);S=S.roi(z);let te=S.cols/2,pe=S.rows/2,Me=new cv.Mat,Re=new cv.Rect(0,0,te,pe),Fe=new cv.Rect(te,0,te,pe),Oe=new cv.Rect(0,pe,te,pe),Be=new cv.Rect(te,pe,te,pe),it=S.roi(Re),at=S.roi(Fe),Ct=S.roi(Oe),mt=S.roi(Be);it.copyTo(Me),mt.copyTo(it),Me.copyTo(mt),at.copyTo(Me),Ct.copyTo(at),Me.copyTo(Ct),cv.normalize(S,S,0,1,cv.NORM_MINMAX),this.outputCanvas.drawMat(S),t.delete(),d.delete(),g.delete(),_.delete(),k.delete(),Me.delete()}updateIFFT(){let t=cv.imread(this.drawCanvas.getCanvas());cv.cvtColor(t,t,cv.COLOR_RGBA2GRAY,0);let r=cv.getOptimalDFTSize(t.rows),i=cv.getOptimalDFTSize(t.cols),o=cv.Scalar.all(0),d=new cv.Mat;cv.copyMakeBorder(t,d,0,r-t.rows,0,i-t.cols,cv.BORDER_CONSTANT,o);let f=new cv.Mat;d.convertTo(f,cv.CV_32F);let g=new cv.MatVector,_=new cv.Mat,C=new cv.Mat.zeros(d.rows,d.cols,cv.CV_32F);g.push_back(f),g.push_back(C),cv.merge(g,_),cv.dft(_,_);let S=cv.imread(this.outputCanvas.getCanvas());cv.cvtColor(S,S,cv.COLOR_RGBA2GRAY,0);let k=new cv.Rect(0,0,-2&S.cols,-2&S.rows);S=S.roi(k);let z=S.cols/2,te=S.rows/2,pe=new cv.Mat,Me=new cv.Rect(0,0,z,te),Re=new cv.Rect(z,0,z,te),Fe=new cv.Rect(0,te,z,te),Oe=new cv.Rect(z,te,z,te),Be=S.roi(Me),it=S.roi(Re),at=S.roi(Fe),Ct=S.roi(Oe);Be.copyTo(pe),Ct.copyTo(Be),pe.copyTo(Ct),it.copyTo(pe),at.copyTo(it),pe.copyTo(at);let mt=new cv.Mat;cv.threshold(S,mt,0,1,cv.THRESH_BINARY),mt.convertTo(mt,cv.CV_32F),cv.split(_,g),console.log(_.type(),mt.type()),cv.multiply(g.get(0),mt,g.get(0)),cv.multiply(g.get(1),mt,g.get(1)),cv.merge(g,_),cv.dft(_,_,cv.DFT_INVERSE),cv.split(_,g),cv.magnitude(g.get(0),g.get(1),g.get(0));let Ft=g.get(0);cv.normalize(Ft,Ft,0,1,cv.NORM_MINMAX),this.drawCanvas.drawMat(Ft)}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Gi(e)))(r||e)}}(),e.\u0275cmp=Zn({type:e,selectors:[["app-spectral-filtering"]],features:[Gn],decls:11,vars:8,consts:[["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],["title","Brush Size"],["brushSizeSlider",""],["ngProjectAs","[centerContent]",5,["","centerContent",""]],["title","Canvas",1,"canvas",3,"width","drawable","BWOption","brushRadius","drawingEnded"],["inputCanvas",""],["title","Fourier space",1,"canvas",3,"width","drawColor","drawable","brushRadius","drawingEnded"],["outputCanvas",""]],template:function(t,r){if(1&t&&(qe(0,"app-tutorial-template-images"),Bt(1," Spectral filtering "),Ni(2,0),Cn(3,"app-labelled-sliders",1,2)(5,"hr"),Fi(),Ni(6,3),qe(7,"app-draw-canvas",4,5),zt("drawingEnded",function(){return r.updateFFT()}),nt(),qe(9,"app-draw-canvas",6,7),zt("drawingEnded",function(){return r.updateIFFT()}),nt(),Fi(),nt()),2&t){const i=li(4);Dt(7),Mt("width",r.width)("drawable",!0)("BWOption",!0)("brushRadius",i.value),Dt(2),Mt("width",r.width)("drawColor","black")("drawable",!0)("brushRadius",i.value)}},dependencies:[Vg,ih,wl],styles:[".canvas[_ngcontent-%COMP%]{width:45%;min-width:256px}"]}),e})(),xle=(()=>{class e{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(t){this._vertical=xr(t)}get inset(){return this._inset}set inset(t){this._inset=xr(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Zn({type:e,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(t,r){2&t&&(Er("aria-orientation",r.vertical?"vertical":"horizontal"),ui("mat-divider-vertical",r.vertical)("mat-divider-horizontal",!r.vertical)("mat-divider-inset",r.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(t,r){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),e})(),zj=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[ti,ti]}),e})();const Cle=["foreground"],wle=["background"],Sle=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:SX},{path:"fourierTransform",component:jee},{path:"spatialFiltering",component:yle},{path:"colorspaces",component:Fee},{path:"morphology",component:jse},{path:"histogram",component:Zee},{path:"weightLoss",component:bse},{path:"sampling",component:lle},{path:"spectralFiltering",component:ble},{path:"PSNR",component:(()=>{class e extends wl{constructor(){super(...arguments),this.viewerSize=256,this.meanBG=0,this.meanFG=0,this.psnr=0,this.localcontrast=0,this.rois=[{name:"Background",color:"#f55d42",initial1:{x:256,y:256},initial2:{x:400,y:400}},{name:"Foreground",color:"#44ad52",initial1:{x:128,y:128},initial2:{x:256,y:256}}],this.pepperSaltNoise=.1,this.gaussianNoise=5}ngOnInit(){}ngAfterViewInit(){super.ngAfterViewInit(),super.loadSelectedFileFromPath("assets/image_presets/poivron.jpeg")}updateCanvasROI(t){var r=this;return qE(function*(){let i=t.data;if(null==i)return;if("Background"==t.name){var o=r.backgroundCanvas.nativeElement.getContext("2d");r.backgroundData=new Array(i.data.length/4);for(let g=0;g<i.data.length;g+=4)r.backgroundData[g/4]=(i.data[g]+i.data[g+1]+i.data[g+2])/3}else{o=r.foregroundCanvas.nativeElement.getContext("2d"),r.foregroundData=new Array(i.data.length/4);for(let _=0;_<i.data.length;_+=4)r.foregroundData[_/4]=(i.data[_]+i.data[_+1]+i.data[_+2])/3}let d={width:r.viewerSize,height:r.viewerSize},f=yield window.createImageBitmap(i,0,0,i.width,i.height,{resizeHeight:d.height,resizeWidth:d.width});requestAnimationFrame(()=>{null!=o&&null!=i&&(o.clearRect(0,0,o.canvas.width,o.canvas.height),o.canvas.width=r.viewerSize,o.canvas.height=r.viewerSize,o.drawImage(f,0,0),r.updateStats())})})()}updateStats(){let t=this.backgroundData,r=this.foregroundData;this.meanBG=Dj(t),this.meanFG=Dj(r);let i=function _se(e,n){const t=e.length;return null==n&&e.reduce((i,o)=>i+o),Math.sqrt(e.map(r=>Math.pow(r-n,2)).reduce((r,i)=>r+i)/t)}(t,this.meanBG);this.psnr=(this.meanFG-this.meanBG)/i,this.localcontrast=(this.meanFG-this.meanBG)/this.meanBG}addPepperSaltNoise(){let t=this.drawCanvas.getCtx().getImageData(0,0,this.drawCanvas.getCtx().canvas.width,this.drawCanvas.getCtx().canvas.height).data;for(let r=0;r<t.length;r+=4)Math.random()<this.pepperSaltNoise&&(Math.random()<.5?(t[r]=0,t[r+1]=0,t[r+2]=0):(t[r]=255,t[r+1]=255,t[r+2]=255));this.drawCanvas.drawArray(t)}addGaussianNoise(){let t=this.drawCanvas.getCtx().getImageData(0,0,this.drawCanvas.getCtx().canvas.width,this.drawCanvas.getCtx().canvas.height).data;for(let r=0;r<t.length;r+=4){let i=yse(0,this.gaussianNoise);t[r]+=i,t[r+1]+=i,t[r+2]+=i}this.drawCanvas.drawArray(t)}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Gi(e)))(r||e)}}(),e.\u0275cmp=Zn({type:e,selectors:[["app-psnr"]],viewQuery:function(t,r){if(1&t&&(Wr(Cle,5),Wr(wle,5)),2&t){let i;Kn(i=Qn())&&(r.foregroundCanvas=i.first),Kn(i=Qn())&&(r.backgroundCanvas=i.first)}},features:[Gn],decls:51,vars:23,consts:[["ngProjectAs","[drawerLeft]",5,["","drawerLeft",""]],["title","Brush Size"],["brushSizeSlider",""],["title","Probability",3,"value","min","max","step","valueChange"],["mat-raised-button","","color","primary",3,"click"],["title","Gaussian Noise",3,"value","min","max","step","valueChange"],["ngProjectAs","[centerContent]",5,["","centerContent",""]],["title","Canvas",1,"main-canvas",3,"width","drawable","roi","brushRadius","BWOption","profileOption","roiChanged"],["inputCanvas",""],["ngProjectAs","[drawerRight]",5,["","drawerRight",""]],[1,"flex","flex-col","gap-2","mx-4"],[1,"w-64","aspect-square","border"],["background",""],[1,"flex","justify-between"],["foreground",""],[1,"flex","flex-col","gap-2"]],template:function(t,r){if(1&t&&(qe(0,"app-tutorial-template-images"),Bt(1," Image Quality "),Ni(2,0),Cn(3,"app-labelled-sliders",1,2)(5,"hr"),qe(6,"app-labelled-sliders",3),zt("valueChange",function(o){return r.pepperSaltNoise=o})("valueChange",function(o){return r.pepperSaltNoise=o}),nt(),qe(7,"button",4),zt("click",function(){return r.addPepperSaltNoise()}),Bt(8,"Add pepper & salt noise"),nt(),Cn(9,"hr"),qe(10,"app-labelled-sliders",5),zt("valueChange",function(o){return r.gaussianNoise=o})("valueChange",function(o){return r.gaussianNoise=o}),nt(),qe(11,"button",4),zt("click",function(){return r.addGaussianNoise()}),Bt(12,"Add Gaussian noise"),nt(),Fi(),Ni(13,6),qe(14,"app-draw-canvas",7,8),zt("roiChanged",function(o){return r.updateCanvasROI(o)}),nt(),Fi(),Ni(16,9),qe(17,"div",10)(18,"h3"),Bt(19,"Background"),nt(),Cn(20,"canvas",11,12),qe(22,"div",13)(23,"p"),Bt(24,"Mean"),nt(),qe(25,"p"),Bt(26),nt()(),Cn(27,"mat-divider"),qe(28,"h3"),Bt(29,"Foreground"),nt(),Cn(30,"canvas",11,14),qe(32,"div",13)(33,"p"),Bt(34,"Mean"),nt(),qe(35,"p"),Bt(36),nt()(),Cn(37,"mat-divider"),qe(38,"h3"),Bt(39,"Statistics"),nt(),qe(40,"div",15)(41,"div",13)(42,"p"),Bt(43,"SNR Differential"),nt(),qe(44,"p"),Bt(45),nt()(),qe(46,"div",13)(47,"p"),Bt(48,"Local contrast"),nt(),qe(49,"p"),Bt(50),nt()()()(),Fi(),nt()),2&t){const i=li(4);Dt(6),Mt("value",r.pepperSaltNoise)("min",0)("max",1)("step",.01),Dt(4),Mt("value",r.gaussianNoise)("min",0)("max",75)("step",.5),Dt(4),Mt("width",512)("drawable",!1)("roi",r.rois)("drawable",!0)("brushRadius",i.value)("BWOption",!0)("profileOption",!1),Dt(6),Za("border-color",r.rois[0].color),Dt(6),fs(r.meanBG.toFixed(3)),Dt(4),Za("border-color",r.rois[1].color),Dt(6),fs(r.meanFG.toFixed(3)),Dt(9),fs(r.psnr.toFixed(3)),Dt(5),fs(r.localcontrast.toFixed(3))}},dependencies:[xle,bl,Vg,ih,wl]}),e})()}];let Dle=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[wU.forRoot(Sle),wU]}),e})(),Mle=(()=>{class e{constructor(){this.title="cv-toolbox"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Zn({type:e,selectors:[["app-root"]],decls:6,vars:0,consts:[[1,"hide-smallscreen"],["routerLink","/home"]],template:function(t,r){1&t&&(qe(0,"mat-toolbar",0)(1,"h1")(2,"a",1),Bt(3," Home"),nt()()(),qe(4,"div"),Cn(5,"router-outlet"),nt())},dependencies:[zB,HF,Eg],styles:["a[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit}h1[_ngcontent-%COMP%]{text-align:center;width:100%}"]}),e})();function Hj(e){return new Jt(3e3,!1)}function sce(){return typeof window<"u"&&typeof window.document<"u"}function yV(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function kf(e){switch(e.length){case 0:return new BC;case 1:return e[0];default:return new AG(e)}}function Uj(e,n,t,r,i=new Map,o=new Map){const d=[],f=[];let g=-1,_=null;if(r.forEach(C=>{const S=C.get("offset"),k=S==g,z=k&&_||new Map;C.forEach((te,pe)=>{let Me=pe,Re=te;if("offset"!==pe)switch(Me=n.normalizePropertyName(Me,d),Re){case"!":Re=i.get(pe);break;case eh:Re=o.get(pe);break;default:Re=n.normalizeStyleValue(pe,Me,Re,d)}z.set(Me,Re)}),k||f.push(z),_=z,g=S}),d.length)throw function $le(e){return new Jt(3502,!1)}();return f}function bV(e,n,t,r){switch(n){case"start":e.onStart(()=>r(t&&xV(t,"start",e)));break;case"done":e.onDone(()=>r(t&&xV(t,"done",e)));break;case"destroy":e.onDestroy(()=>r(t&&xV(t,"destroy",e)))}}function xV(e,n,t){const o=CV(e.element,e.triggerName,e.fromState,e.toState,n||e.phaseName,t.totalTime??e.totalTime,!!t.disabled),d=e._data;return null!=d&&(o._data=d),o}function CV(e,n,t,r,i="",o=0,d){return{element:e,triggerName:n,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!d}}function $l(e,n,t){let r=e.get(n);return r||e.set(n,r=t),r}function Gj(e){const n=e.indexOf(":");return[e.substring(1,n),e.slice(n+1)]}let wV=(e,n)=>!1,Wj=(e,n,t)=>[],jj=null;function SV(e){const n=e.parentNode||e.host;return n===jj?null:n}(yV()||typeof Element<"u")&&(sce()?(jj=(()=>document.documentElement)(),wV=(e,n)=>{for(;n;){if(n===e)return!0;n=SV(n)}return!1}):wV=(e,n)=>e.contains(n),Wj=(e,n,t)=>{if(t)return Array.from(e.querySelectorAll(n));const r=e.querySelector(n);return r?[r]:[]});let sv=null,Zj=!1;const Yj=wV,Xj=Wj;let $j=(()=>{class e{validateStyleProperty(t){return function cce(e){sv||(sv=function uce(){return typeof document<"u"?document.body:null}()||{},Zj=!!sv.style&&"WebkitAppearance"in sv.style);let n=!0;return sv.style&&!function lce(e){return"ebkit"==e.substring(1,6)}(e)&&(n=e in sv.style,!n&&Zj&&(n="Webkit"+e.charAt(0).toUpperCase()+e.slice(1)in sv.style)),n}(t)}matchesElement(t,r){return!1}containsElement(t,r){return Yj(t,r)}getParentElement(t){return SV(t)}query(t,r,i){return Xj(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,d,f=[],g){return new BC(i,o)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})(),DV=(()=>{class e{}return e.NOOP=new $j,e})();const MV="ng-enter",cP="ng-leave",uP="ng-trigger",dP=".ng-trigger",Qj="ng-animating",TV=".ng-animating";function hh(e){if("number"==typeof e)return e;const n=e.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:EV(parseFloat(n[1]),n[2])}function EV(e,n){return"s"===n?1e3*e:e}function hP(e,n,t){return e.hasOwnProperty("duration")?e:function fce(e,n,t){let i,o=0,d="";if("string"==typeof e){const f=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return n.push(Hj()),{duration:0,delay:0,easing:""};i=EV(parseFloat(f[1]),f[2]);const g=f[3];null!=g&&(o=EV(parseFloat(g),f[4]));const _=f[5];_&&(d=_)}else i=e;if(!t){let f=!1,g=n.length;i<0&&(n.push(function Tle(){return new Jt(3100,!1)}()),f=!0),o<0&&(n.push(function Ele(){return new Jt(3101,!1)}()),f=!0),f&&n.splice(g,0,Hj())}return{duration:i,delay:o,easing:d}}(e,n,t)}function xw(e,n={}){return Object.keys(e).forEach(t=>{n[t]=e[t]}),n}function qj(e){const n=new Map;return Object.keys(e).forEach(t=>{n.set(t,e[t])}),n}function Nf(e,n=new Map,t){if(t)for(let[r,i]of t)n.set(r,i);for(let[r,i]of e)n.set(r,i);return n}function eZ(e,n,t){return t?n+":"+t+";":""}function tZ(e){let n="";for(let t=0;t<e.style.length;t++){const r=e.style.item(t);n+=eZ(0,r,e.style.getPropertyValue(r))}for(const t in e.style)e.style.hasOwnProperty(t)&&!t.startsWith("_")&&(n+=eZ(0,mce(t),e.style[t]));e.setAttribute("style",n)}function nd(e,n,t){e.style&&(n.forEach((r,i)=>{const o=IV(i);t&&!t.has(i)&&t.set(i,e.style[o]),e.style[o]=r}),yV()&&tZ(e))}function lv(e,n){e.style&&(n.forEach((t,r)=>{const i=IV(r);e.style[i]=""}),yV()&&tZ(e))}function Cw(e){return Array.isArray(e)?1==e.length?e[0]:MG(e):e}const AV=new RegExp("{{\\s*(.+?)\\s*}}","g");function nZ(e){let n=[];if("string"==typeof e){let t;for(;t=AV.exec(e);)n.push(t[1]);AV.lastIndex=0}return n}function ww(e,n,t){const r=e.toString(),i=r.replace(AV,(o,d)=>{let f=n[d];return null==f&&(t.push(function Ile(e){return new Jt(3003,!1)}()),f=""),f.toString()});return i==r?e:i}function fP(e){const n=[];let t=e.next();for(;!t.done;)n.push(t.value),t=e.next();return n}const vce=/-+([a-z0-9])/g;function IV(e){return e.replace(vce,(...n)=>n[1].toUpperCase())}function mce(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Kl(e,n,t){switch(n.type){case 7:return e.visitTrigger(n,t);case 0:return e.visitState(n,t);case 1:return e.visitTransition(n,t);case 2:return e.visitSequence(n,t);case 3:return e.visitGroup(n,t);case 4:return e.visitAnimate(n,t);case 5:return e.visitKeyframes(n,t);case 6:return e.visitStyle(n,t);case 8:return e.visitReference(n,t);case 9:return e.visitAnimateChild(n,t);case 10:return e.visitAnimateRef(n,t);case 11:return e.visitQuery(n,t);case 12:return e.visitStagger(n,t);default:throw function Ple(e){return new Jt(3004,!1)}()}}function rZ(e,n){return window.getComputedStyle(e)[n]}function wce(e,n){const t=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(r=>function Sce(e,n,t){if(":"==e[0]){const g=function Dce(e,n){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return n.push(function jle(e){return new Jt(3016,!1)}()),"* => *"}}(e,t);if("function"==typeof g)return void n.push(g);e=g}const r=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Wle(e){return new Jt(3015,!1)}()),n;const i=r[1],o=r[2],d=r[3];n.push(iZ(i,d));"<"==o[0]&&!("*"==i&&"*"==d)&&n.push(iZ(d,i))}(r,t,n)):t.push(e),t}const mP=new Set(["true","1"]),_P=new Set(["false","0"]);function iZ(e,n){const t=mP.has(e)||_P.has(e),r=mP.has(n)||_P.has(n);return(i,o)=>{let d="*"==e||e==i,f="*"==n||n==o;return!d&&t&&"boolean"==typeof i&&(d=i?mP.has(e):_P.has(e)),!f&&r&&"boolean"==typeof o&&(f=o?mP.has(n):_P.has(n)),d&&f}}const Mce=new RegExp("s*:selfs*,?","g");function PV(e,n,t,r){return new Tce(e).build(n,t,r)}class Tce{constructor(n){this._driver=n}build(n,t,r){const i=new Ice(t);return this._resetContextStyleTimingState(i),Kl(this,Cw(n),i)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles=new Map,n.collectedStyles.set("",new Map),n.currentTime=0}visitTrigger(n,t){let r=t.queryCount=0,i=t.depCount=0;const o=[],d=[];return"@"==n.name.charAt(0)&&t.errors.push(function Lle(){return new Jt(3006,!1)}()),n.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),0==f.type){const g=f,_=g.name;_.toString().split(/\s*,\s*/).forEach(C=>{g.name=C,o.push(this.visitState(g,t))}),g.name=_}else if(1==f.type){const g=this.visitTransition(f,t);r+=g.queryCount,i+=g.depCount,d.push(g)}else t.errors.push(function Ole(){return new Jt(3007,!1)}())}),{type:7,name:n.name,states:o,transitions:d,queryCount:r,depCount:i,options:null}}visitState(n,t){const r=this.visitStyle(n.styles,t),i=n.options&&n.options.params||null;if(r.containsDynamicStyles){const o=new Set,d=i||{};r.styles.forEach(f=>{f instanceof Map&&f.forEach(g=>{nZ(g).forEach(_=>{d.hasOwnProperty(_)||o.add(_)})})}),o.size&&(fP(o.values()),t.errors.push(function kle(e,n){return new Jt(3008,!1)}()))}return{type:0,name:n.name,style:r,options:i?{params:i}:null}}visitTransition(n,t){t.queryCount=0,t.depCount=0;const r=Kl(this,Cw(n.animation),t);return{type:1,matchers:wce(n.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:uv(n.options)}}visitSequence(n,t){return{type:2,steps:n.steps.map(r=>Kl(this,r,t)),options:uv(n.options)}}visitGroup(n,t){const r=t.currentTime;let i=0;const o=n.steps.map(d=>{t.currentTime=r;const f=Kl(this,d,t);return i=Math.max(i,t.currentTime),f});return t.currentTime=i,{type:3,steps:o,options:uv(n.options)}}visitAnimate(n,t){const r=function Rce(e,n){if(e.hasOwnProperty("duration"))return e;if("number"==typeof e)return RV(hP(e,n).duration,0,"");const t=e;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=RV(0,0,"");return o.dynamic=!0,o.strValue=t,o}const i=hP(t,n);return RV(i.duration,i.delay,i.easing)}(n.timings,t.errors);t.currentAnimateTimings=r;let i,o=n.styles?n.styles:xa({});if(5==o.type)i=this.visitKeyframes(o,t);else{let d=n.styles,f=!1;if(!d){f=!0;const _={};r.easing&&(_.easing=r.easing),d=xa(_)}t.currentTime+=r.duration+r.delay;const g=this.visitStyle(d,t);g.isEmptyStep=f,i=g}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(n,t){const r=this._makeStyleAst(n,t);return this._validateStyleAst(r,t),r}_makeStyleAst(n,t){const r=[],i=Array.isArray(n.styles)?n.styles:[n.styles];for(let f of i)"string"==typeof f?f===eh?r.push(f):t.errors.push(new Jt(3002,!1)):r.push(qj(f));let o=!1,d=null;return r.forEach(f=>{if(f instanceof Map&&(f.has("easing")&&(d=f.get("easing"),f.delete("easing")),!o))for(let g of f.values())if(g.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:r,easing:d,offset:n.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(n,t){const r=t.currentAnimateTimings;let i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),n.styles.forEach(d=>{"string"!=typeof d&&d.forEach((f,g)=>{const _=t.collectedStyles.get(t.currentQuerySelector),C=_.get(g);let S=!0;C&&(o!=i&&o>=C.startTime&&i<=C.endTime&&(t.errors.push(function Fle(e,n,t,r,i){return new Jt(3010,!1)}()),S=!1),o=C.startTime),S&&_.set(g,{startTime:o,endTime:i}),t.options&&function gce(e,n,t){const r=n.params||{},i=nZ(e);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(function Ale(e){return new Jt(3001,!1)}())})}(f,t.options,t.errors)})})}visitKeyframes(n,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Ble(){return new Jt(3011,!1)}()),r;let o=0;const d=[];let f=!1,g=!1,_=0;const C=n.steps.map(Re=>{const Fe=this._makeStyleAst(Re,t);let Oe=null!=Fe.offset?Fe.offset:function Pce(e){if("string"==typeof e)return null;let n=null;if(Array.isArray(e))e.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;n=parseFloat(r.get("offset")),r.delete("offset")}});else if(e instanceof Map&&e.has("offset")){const t=e;n=parseFloat(t.get("offset")),t.delete("offset")}return n}(Fe.styles),Be=0;return null!=Oe&&(o++,Be=Fe.offset=Oe),g=g||Be<0||Be>1,f=f||Be<_,_=Be,d.push(Be),Fe});g&&t.errors.push(function Vle(){return new Jt(3012,!1)}()),f&&t.errors.push(function zle(){return new Jt(3200,!1)}());const S=n.steps.length;let k=0;o>0&&o<S?t.errors.push(function Hle(){return new Jt(3202,!1)}()):0==o&&(k=1/(S-1));const z=S-1,te=t.currentTime,pe=t.currentAnimateTimings,Me=pe.duration;return C.forEach((Re,Fe)=>{const Oe=k>0?Fe==z?1:k*Fe:d[Fe],Be=Oe*Me;t.currentTime=te+pe.delay+Be,pe.duration=Be,this._validateStyleAst(Re,t),Re.offset=Oe,r.styles.push(Re)}),r}visitReference(n,t){return{type:8,animation:Kl(this,Cw(n.animation),t),options:uv(n.options)}}visitAnimateChild(n,t){return t.depCount++,{type:9,options:uv(n.options)}}visitAnimateRef(n,t){return{type:10,animation:this.visitReference(n.animation,t),options:uv(n.options)}}visitQuery(n,t){const r=t.currentQuerySelector,i=n.options||{};t.queryCount++,t.currentQuery=n;const[o,d]=function Ece(e){const n=!!e.split(/\s*,\s*/).find(t=>":self"==t);return n&&(e=e.replace(Mce,"")),e=e.replace(/@\*/g,dP).replace(/@\w+/g,t=>dP+"-"+t.slice(1)).replace(/:animating/g,TV),[e,n]}(n.selector);t.currentQuerySelector=r.length?r+" "+o:o,$l(t.collectedStyles,t.currentQuerySelector,new Map);const f=Kl(this,Cw(n.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:d,animation:f,originalSelector:n.selector,options:uv(n.options)}}visitStagger(n,t){t.currentQuery||t.errors.push(function Ule(){return new Jt(3013,!1)}());const r="full"===n.timings?{duration:0,delay:0,easing:"full"}:hP(n.timings,t.errors,!0);return{type:12,animation:Kl(this,Cw(n.animation),t),timings:r,options:null}}}class Ice{constructor(n){this.errors=n,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function uv(e){return e?(e=xw(e)).params&&(e.params=function Ace(e){return e?xw(e):null}(e.params)):e={},e}function RV(e,n,t){return{duration:e,delay:n,easing:t}}function LV(e,n,t,r,i,o,d=null,f=!1){return{type:1,element:e,keyframes:n,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:d,subTimeline:f}}class yP{constructor(){this._map=new Map}get(n){return this._map.get(n)||[]}append(n,t){let r=this._map.get(n);r||this._map.set(n,r=[]),r.push(...t)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const kce=new RegExp(":enter","g"),Fce=new RegExp(":leave","g");function OV(e,n,t,r,i,o=new Map,d=new Map,f,g,_=[]){return(new Bce).buildKeyframes(e,n,t,r,i,o,d,f,g,_)}class Bce{buildKeyframes(n,t,r,i,o,d,f,g,_,C=[]){_=_||new yP;const S=new kV(n,t,_,i,o,C,[]);S.options=g;const k=g.delay?hh(g.delay):0;S.currentTimeline.delayNextStep(k),S.currentTimeline.setStyles([d],null,S.errors,g),Kl(this,r,S);const z=S.timelines.filter(te=>te.containsAnimation());if(z.length&&f.size){let te;for(let pe=z.length-1;pe>=0;pe--){const Me=z[pe];if(Me.element===t){te=Me;break}}te&&!te.allowOnlyTimelineStyles()&&te.setStyles([f],null,S.errors,g)}return z.length?z.map(te=>te.buildKeyframes()):[LV(t,[],[],[],0,k,"",!1)]}visitTrigger(n,t){}visitState(n,t){}visitTransition(n,t){}visitAnimateChild(n,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(n.options),o=t.currentTimeline.currentTime,d=this._visitSubInstructions(r,i,i.options);o!=d&&t.transformIntoNewTimeline(d)}t.previousNode=n}visitAnimateRef(n,t){const r=t.createSubContext(n.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],t,r),this.visitReference(n.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=n}_applyAnimationRefDelays(n,t,r){for(const i of n){const o=i?.delay;if(o){const d="number"==typeof o?o:hh(ww(o,i?.params??{},t.errors));r.delayNextStep(d)}}}_visitSubInstructions(n,t,r){let o=t.currentTimeline.currentTime;const d=null!=r.duration?hh(r.duration):null,f=null!=r.delay?hh(r.delay):null;return 0!==d&&n.forEach(g=>{const _=t.appendInstructionToTimeline(g,d,f);o=Math.max(o,_.duration+_.delay)}),o}visitReference(n,t){t.updateOptions(n.options,!0),Kl(this,n.animation,t),t.previousNode=n}visitSequence(n,t){const r=t.subContextCount;let i=t;const o=n.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=bP);const d=hh(o.delay);i.delayNextStep(d)}n.steps.length&&(n.steps.forEach(d=>Kl(this,d,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=n}visitGroup(n,t){const r=[];let i=t.currentTimeline.currentTime;const o=n.options&&n.options.delay?hh(n.options.delay):0;n.steps.forEach(d=>{const f=t.createSubContext(n.options);o&&f.delayNextStep(o),Kl(this,d,f),i=Math.max(i,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(d=>t.currentTimeline.mergeTimelineCollectedStyles(d)),t.transformIntoNewTimeline(i),t.previousNode=n}_visitTiming(n,t){if(n.dynamic){const r=n.strValue;return hP(t.params?ww(r,t.params,t.errors):r,t.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,t){const r=t.currentAnimateTimings=this._visitTiming(n.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const o=n.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=n}visitStyle(n,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||n.easing;n.isEmptyStep?r.applyEmptyStep(o):r.setStyles(n.styles,o,t.errors,t.options),t.previousNode=n}visitKeyframes(n,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,n.styles.forEach(g=>{f.forwardTime((g.offset||0)*o),f.setStyles(g.styles,g.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(i+o),t.previousNode=n}visitQuery(n,t){const r=t.currentTimeline.currentTime,i=n.options||{},o=i.delay?hh(i.delay):0;o&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=bP);let d=r;const f=t.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=f.length;let g=null;f.forEach((_,C)=>{t.currentQueryIndex=C;const S=t.createSubContext(n.options,_);o&&S.delayNextStep(o),_===t.element&&(g=S.currentTimeline),Kl(this,n.animation,S),S.currentTimeline.applyStylesToKeyframe(),d=Math.max(d,S.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(d),g&&(t.currentTimeline.mergeTimelineCollectedStyles(g),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=n}visitStagger(n,t){const r=t.parentContext,i=t.currentTimeline,o=n.timings,d=Math.abs(o.duration),f=d*(t.currentQueryTotal-1);let g=d*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":g=f-g;break;case"full":g=r.currentStaggerTime}const C=t.currentTimeline;g&&C.delayNextStep(g);const S=C.currentTime;Kl(this,n.animation,t),t.previousNode=n,r.currentStaggerTime=i.currentTime-S+(i.startTime-r.currentTimeline.startTime)}}const bP={};class kV{constructor(n,t,r,i,o,d,f,g){this._driver=n,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=d,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=bP,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=g||new xP(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,t){if(!n)return;const r=n;let i=this.options;null!=r.duration&&(i.duration=hh(r.duration)),null!=r.delay&&(i.delay=hh(r.delay));const o=r.params;if(o){let d=i.params;d||(d=this.options.params={}),Object.keys(o).forEach(f=>{(!t||!d.hasOwnProperty(f))&&(d[f]=ww(o[f],d,this.errors))})}}_copyOptions(){const n={};if(this.options){const t=this.options.params;if(t){const r=n.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return n}createSubContext(n=null,t,r){const i=t||this.element,o=new kV(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(n),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(n){return this.previousNode=bP,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,t,r){const i={duration:t??n.duration,delay:this.currentTimeline.currentTime+(r??0)+n.delay,easing:""},o=new Vce(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,i,n.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,t,r,i,o,d){let f=[];if(i&&f.push(this.element),n.length>0){n=(n=n.replace(kce,"."+this._enterClassName)).replace(Fce,"."+this._leaveClassName);let _=this._driver.query(this.element,n,1!=r);0!==r&&(_=r<0?_.slice(_.length+r,_.length):_.slice(0,r)),f.push(..._)}return!o&&0==f.length&&d.push(function Gle(e){return new Jt(3014,!1)}()),f}}class xP{constructor(n,t,r,i){this._driver=n,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+n),t&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,t){return this.applyStylesToKeyframe(),new xP(this._driver,n,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,t){this._localTimelineStyles.set(n,t),this._globalTimelineStyles.set(n,t),this._styleSummary.set(n,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||eh),this._currentKeyframe.set(t,eh);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,t,r,i){t&&this._previousKeyframe.set("easing",t);const o=i&&i.params||{},d=function zce(e,n){const t=new Map;let r;return e.forEach(i=>{if("*"===i){r=r||n.keys();for(let o of r)t.set(o,eh)}else Nf(i,t)}),t}(n,this._globalTimelineStyles);for(let[f,g]of d){const _=ww(g,o,r);this._pendingStyles.set(f,_),this._localTimelineStyles.has(f)||this._backFill.set(f,this._globalTimelineStyles.get(f)??eh),this._updateStyle(f,_)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((n,t)=>{this._currentKeyframe.set(t,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,n)}))}snapshotCurrentStyles(){for(let[n,t]of this._localTimelineStyles)this._pendingStyles.set(n,t),this._updateStyle(n,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let t in this._currentKeyframe)n.push(t);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((f,g)=>{const _=Nf(f,new Map,this._backFill);_.forEach((C,S)=>{"!"===C?n.add(S):C===eh&&t.add(S)}),r||_.set("offset",g/this.duration),i.push(_)});const o=n.size?fP(n.values()):[],d=t.size?fP(t.values()):[];if(r){const f=i[0],g=new Map(f);f.set("offset",0),g.set("offset",1),i=[f,g]}return LV(this.element,i,o,d,this.duration,this.startTime,this.easing,!1)}}class Vce extends xP{constructor(n,t,r,i,o,d,f=!1){super(n,t,d.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=f,this.timings={duration:d.duration,delay:d.delay,easing:d.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],d=r+t,f=t/d,g=Nf(n[0]);g.set("offset",0),o.push(g);const _=Nf(n[0]);_.set("offset",sZ(f)),o.push(_);const C=n.length-1;for(let S=1;S<=C;S++){let k=Nf(n[S]);const z=k.get("offset");k.set("offset",sZ((t+z*r)/d)),o.push(k)}r=d,t=0,i="",n=o}return LV(this.element,n,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function sZ(e,n=3){const t=Math.pow(10,n-1);return Math.round(e*t)/t}class NV{}const Hce=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Uce extends NV{normalizePropertyName(n,t){return IV(n)}normalizeStyleValue(n,t,r,i){let o="";const d=r.toString().trim();if(Hce.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&i.push(function Rle(e,n){return new Jt(3005,!1)}())}return d+o}}function lZ(e,n,t,r,i,o,d,f,g,_,C,S,k){return{type:0,element:e,triggerName:n,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:d,timelines:f,queriedElements:g,preStyleProps:_,postStyleProps:C,totalTime:S,errors:k}}const FV={};class cZ{constructor(n,t,r){this._triggerName=n,this.ast=t,this._stateStyles=r}match(n,t,r,i){return function Gce(e,n,t,r,i){return e.some(o=>o(n,t,r,i))}(this.ast.matchers,n,t,r,i)}buildStyles(n,t,r){let i=this._stateStyles.get("*");return void 0!==n&&(i=this._stateStyles.get(n?.toString())||i),i?i.buildStyles(t,r):new Map}build(n,t,r,i,o,d,f,g,_,C){const S=[],k=this.ast.options&&this.ast.options.params||FV,te=this.buildStyles(r,f&&f.params||FV,S),pe=g&&g.params||FV,Me=this.buildStyles(i,pe,S),Re=new Set,Fe=new Map,Oe=new Map,Be="void"===i,it={params:Wce(pe,k),delay:this.ast.options?.delay},at=C?[]:OV(n,t,this.ast.animation,o,d,te,Me,it,_,S);let Ct=0;if(at.forEach(Ft=>{Ct=Math.max(Ft.duration+Ft.delay,Ct)}),S.length)return lZ(t,this._triggerName,r,i,Be,te,Me,[],[],Fe,Oe,Ct,S);at.forEach(Ft=>{const nn=Ft.element,$t=$l(Fe,nn,new Set);Ft.preStyleProps.forEach(mn=>$t.add(mn));const pn=$l(Oe,nn,new Set);Ft.postStyleProps.forEach(mn=>pn.add(mn)),nn!==t&&Re.add(nn)});const mt=fP(Re.values());return lZ(t,this._triggerName,r,i,Be,te,Me,at,mt,Fe,Oe,Ct)}}function Wce(e,n){const t=xw(n);for(const r in e)e.hasOwnProperty(r)&&null!=e[r]&&(t[r]=e[r]);return t}class jce{constructor(n,t,r){this.styles=n,this.defaultParams=t,this.normalizer=r}buildStyles(n,t){const r=new Map,i=xw(this.defaultParams);return Object.keys(n).forEach(o=>{const d=n[o];null!==d&&(i[o]=d)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((d,f)=>{d&&(d=ww(d,i,t));const g=this.normalizer.normalizePropertyName(f,t);d=this.normalizer.normalizeStyleValue(f,g,d,t),r.set(g,d)})}),r}}class Yce{constructor(n,t,r){this.name=n,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new jce(i.style,i.options&&i.options.params||{},r))}),uZ(this.states,"true","1"),uZ(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new cZ(n,i,this.states))}),this.fallbackTransition=function Xce(e,n,t){return new cZ(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(d,f)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,t,r,i){return this.transitionFactories.find(d=>d.match(n,t,r,i))||null}matchStyles(n,t,r){return this.fallbackTransition.buildStyles(n,t,r)}}function uZ(e,n,t){e.has(n)?e.has(t)||e.set(t,e.get(n)):e.has(t)&&e.set(n,e.get(t))}const $ce=new yP;class Kce{constructor(n,t,r){this.bodyNode=n,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(n,t){const r=[],o=PV(this._driver,t,r,[]);if(r.length)throw function Kle(e){return new Jt(3503,!1)}();this._animations.set(n,o)}_buildPlayer(n,t,r){const i=n.element,o=Uj(0,this._normalizer,0,n.keyframes,t,r);return this._driver.animate(i,o,n.duration,n.delay,n.easing,[],!0)}create(n,t,r={}){const i=[],o=this._animations.get(n);let d;const f=new Map;if(o?(d=OV(this._driver,t,o,MV,cP,new Map,new Map,r,$ce,i),d.forEach(C=>{const S=$l(f,C.element,new Map);C.postStyleProps.forEach(k=>S.set(k,null))})):(i.push(function Qle(){return new Jt(3300,!1)}()),d=[]),i.length)throw function qle(e){return new Jt(3504,!1)}();f.forEach((C,S)=>{C.forEach((k,z)=>{C.set(z,this._driver.computeStyle(S,z,eh))})});const _=kf(d.map(C=>{const S=f.get(C.element);return this._buildPlayer(C,new Map,S)}));return this._playersById.set(n,_),_.onDestroy(()=>this.destroy(n)),this.players.push(_),_}destroy(n){const t=this._getPlayer(n);t.destroy(),this._playersById.delete(n);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(n){const t=this._playersById.get(n);if(!t)throw function Jle(e){return new Jt(3301,!1)}();return t}listen(n,t,r,i){const o=CV(t,"","","");return bV(this._getPlayer(n),r,o,i),()=>{}}command(n,t,r,i){if("register"==r)return void this.register(n,i[0]);if("create"==r)return void this.create(n,t,i[0]||{});const o=this._getPlayer(n);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(n)}}}const dZ="ng-animate-queued",BV="ng-animate-disabled",tue=[],hZ={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},nue={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Nc="__ng_removed";class VV{constructor(n,t=""){this.namespaceId=t;const r=n&&n.hasOwnProperty("value");if(this.value=function oue(e){return e??null}(r?n.value:n),r){const o=xw(n);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(n){const t=n.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Sw="void",zV=new VV(Sw);class rue{constructor(n,t,r){this.id=n,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+n,Fc(t,this._hostClassName)}listen(n,t,r,i){if(!this._triggers.has(t))throw function ece(e,n){return new Jt(3302,!1)}();if(null==r||0==r.length)throw function tce(e){return new Jt(3303,!1)}();if(!function sue(e){return"start"==e||"done"==e}(r))throw function nce(e,n){return new Jt(3400,!1)}();const o=$l(this._elementListeners,n,[]),d={name:t,phase:r,callback:i};o.push(d);const f=$l(this._engine.statesByElement,n,new Map);return f.has(t)||(Fc(n,uP),Fc(n,uP+"-"+t),f.set(t,zV)),()=>{this._engine.afterFlush(()=>{const g=o.indexOf(d);g>=0&&o.splice(g,1),this._triggers.has(t)||f.delete(t)})}}register(n,t){return!this._triggers.has(n)&&(this._triggers.set(n,t),!0)}_getTrigger(n){const t=this._triggers.get(n);if(!t)throw function rce(e){return new Jt(3401,!1)}();return t}trigger(n,t,r,i=!0){const o=this._getTrigger(t),d=new HV(this.id,t,n);let f=this._engine.statesByElement.get(n);f||(Fc(n,uP),Fc(n,uP+"-"+t),this._engine.statesByElement.set(n,f=new Map));let g=f.get(t);const _=new VV(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&g&&_.absorbOptions(g.options),f.set(t,_),g||(g=zV),_.value!==Sw&&g.value===_.value){if(!function uue(e,n){const t=Object.keys(e),r=Object.keys(n);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const o=t[i];if(!n.hasOwnProperty(o)||e[o]!==n[o])return!1}return!0}(g.params,_.params)){const pe=[],Me=o.matchStyles(g.value,g.params,pe),Re=o.matchStyles(_.value,_.params,pe);pe.length?this._engine.reportError(pe):this._engine.afterFlush(()=>{lv(n,Me),nd(n,Re)})}return}const k=$l(this._engine.playersByElement,n,[]);k.forEach(pe=>{pe.namespaceId==this.id&&pe.triggerName==t&&pe.queued&&pe.destroy()});let z=o.matchTransition(g.value,_.value,n,_.params),te=!1;if(!z){if(!i)return;z=o.fallbackTransition,te=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:t,transition:z,fromState:g,toState:_,player:d,isFallbackTransition:te}),te||(Fc(n,dZ),d.onStart(()=>{e0(n,dZ)})),d.onDone(()=>{let pe=this.players.indexOf(d);pe>=0&&this.players.splice(pe,1);const Me=this._engine.playersByElement.get(n);if(Me){let Re=Me.indexOf(d);Re>=0&&Me.splice(Re,1)}}),this.players.push(d),k.push(d),d}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(t=>t.delete(n)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const t=this._engine.playersByElement.get(n);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,t){const r=this._engine.driver.query(n,dP,!0);r.forEach(i=>{if(i[Nc])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(d=>d.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(n,t,r,i){const o=this._engine.statesByElement.get(n),d=new Map;if(o){const f=[];if(o.forEach((g,_)=>{if(d.set(_,g.value),this._triggers.has(_)){const C=this.trigger(n,_,Sw,i);C&&f.push(C)}}),f.length)return this._engine.markElementAsRemoved(this.id,n,!0,t,d),r&&kf(f).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const t=this._elementListeners.get(n),r=this._engine.statesByElement.get(n);if(t&&r){const i=new Set;t.forEach(o=>{const d=o.name;if(i.has(d))return;i.add(d);const g=this._triggers.get(d).fallbackTransition,_=r.get(d)||zV,C=new VV(Sw),S=new HV(this.id,d,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:d,transition:g,fromState:_,toState:C,player:S,isFallbackTransition:!0})})}}removeNode(n,t){const r=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,t),this.triggerLeaveAnimation(n,t,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(n):[];if(o&&o.length)i=!0;else{let d=n;for(;d=d.parentNode;)if(r.statesByElement.get(d)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(n),i)r.markElementAsRemoved(this.id,n,!1,t);else{const o=n[Nc];(!o||o===hZ)&&(r.afterFlush(()=>this.clearElementCache(n)),r.destroyInnerAnimations(n),r._onRemovalComplete(n,t))}}insertNode(n,t){Fc(n,this._hostClassName)}drainQueuedTransitions(n){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,d=this._elementListeners.get(o);d&&d.forEach(f=>{if(f.name==r.triggerName){const g=CV(o,r.triggerName,r.fromState.value,r.toState.value);g._data=n,bV(r.player,f.phase,g,f.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const o=r.transition.ast.depCount,d=i.transition.ast.depCount;return 0==o||0==d?o-d:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(n){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}elementContainsData(n){let t=!1;return this._elementListeners.has(n)&&(t=!0),t=!!this._queue.find(r=>r.element===n)||t,t}}class iue{constructor(n,t,r){this.bodyNode=n,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}_onRemovalComplete(n,t){this.onRemovalComplete(n,t)}get queuedPlayers(){const n=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&n.push(r)})}),n}createNamespace(n,t){const r=new rue(n,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[n]=r}_balanceNamespaceList(n,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let d=!1,f=this.driver.getParentElement(t);for(;f;){const g=i.get(f);if(g){const _=r.indexOf(g);r.splice(_+1,0,n),d=!0;break}f=this.driver.getParentElement(f)}d||r.unshift(n)}else r.push(n);return i.set(t,n),n}register(n,t){let r=this._namespaceLookup[n];return r||(r=this.createNamespace(n,t)),r}registerTrigger(n,t,r){let i=this._namespaceLookup[n];i&&i.register(t,r)&&this.totalAnimations++}destroy(n,t){if(!n)return;const r=this._fetchNamespace(n);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[n];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const t=new Set,r=this.statesByElement.get(n);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}return t}trigger(n,t,r,i){if(CP(t)){const o=this._fetchNamespace(n);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(n,t,r,i){if(!CP(t))return;const o=t[Nc];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const d=this.collectedLeaveElements.indexOf(t);d>=0&&this.collectedLeaveElements.splice(d,1)}if(n){const d=this._fetchNamespace(n);d&&d.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,t){t?this.disabledNodes.has(n)||(this.disabledNodes.add(n),Fc(n,BV)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),e0(n,BV))}removeNode(n,t,r,i){if(CP(t)){const o=n?this._fetchNamespace(n):null;if(o?o.removeNode(t,i):this.markElementAsRemoved(n,t,!1,i),r){const d=this.namespacesByHostElement.get(t);d&&d.id!==n&&d.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(n,t,r,i,o){this.collectedLeaveElements.push(t),t[Nc]={namespaceId:n,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(n,t,r,i,o){return CP(t)?this._fetchNamespace(n).listen(t,r,i,o):()=>{}}_buildInstruction(n,t,r,i,o){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,r,i,n.fromState.options,n.toState.options,t,o)}destroyInnerAnimations(n){let t=this.driver.query(n,dP,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(n,TV,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(n){const t=this.playersByElement.get(n);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(n){const t=this.playersByQueriedElement.get(n);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return kf(this.players).onDone(()=>n());n()})}processLeaveNode(n){const t=n[Nc];if(t&&t.setForRemoval){if(n[Nc]=hZ,t.namespaceId){this.destroyInnerAnimations(n);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(n)}this._onRemovalComplete(n,t.setForRemoval)}n.classList?.contains(BV)&&this.markElementAsDisabled(n,!1),this.driver.query(n,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(n=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Fc(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,n)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?kf(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(n){throw function ice(e){return new Jt(3402,!1)}()}_flushAnimations(n,t){const r=new yP,i=[],o=new Map,d=[],f=new Map,g=new Map,_=new Map,C=new Set;this.disabledNodes.forEach(Gt=>{C.add(Gt);const ln=this.driver.query(Gt,".ng-animate-queued",!0);for(let Xt=0;Xt<ln.length;Xt++)C.add(ln[Xt])});const S=this.bodyNode,k=Array.from(this.statesByElement.keys()),z=gZ(k,this.collectedEnterElements),te=new Map;let pe=0;z.forEach((Gt,ln)=>{const Xt=MV+pe++;te.set(ln,Xt),Gt.forEach(Xn=>Fc(Xn,Xt))});const Me=[],Re=new Set,Fe=new Set;for(let Gt=0;Gt<this.collectedLeaveElements.length;Gt++){const ln=this.collectedLeaveElements[Gt],Xt=ln[Nc];Xt&&Xt.setForRemoval&&(Me.push(ln),Re.add(ln),Xt.hasAnimation?this.driver.query(ln,".ng-star-inserted",!0).forEach(Xn=>Re.add(Xn)):Fe.add(ln))}const Oe=new Map,Be=gZ(k,Array.from(Re));Be.forEach((Gt,ln)=>{const Xt=cP+pe++;Oe.set(ln,Xt),Gt.forEach(Xn=>Fc(Xn,Xt))}),n.push(()=>{z.forEach((Gt,ln)=>{const Xt=te.get(ln);Gt.forEach(Xn=>e0(Xn,Xt))}),Be.forEach((Gt,ln)=>{const Xt=Oe.get(ln);Gt.forEach(Xn=>e0(Xn,Xt))}),Me.forEach(Gt=>{this.processLeaveNode(Gt)})});const it=[],at=[];for(let Gt=this._namespaceList.length-1;Gt>=0;Gt--)this._namespaceList[Gt].drainQueuedTransitions(t).forEach(Xt=>{const Xn=Xt.player,In=Xt.element;if(it.push(Xn),this.collectedEnterElements.length){const oi=In[Nc];if(oi&&oi.setForMove){if(oi.previousTriggersValues&&oi.previousTriggersValues.has(Xt.triggerName)){const Zi=oi.previousTriggersValues.get(Xt.triggerName),Yi=this.statesByElement.get(Xt.element);if(Yi&&Yi.has(Xt.triggerName)){const Ra=Yi.get(Xt.triggerName);Ra.value=Zi,Yi.set(Xt.triggerName,Ra)}}return void Xn.destroy()}}const ai=!S||!this.driver.containsElement(S,In),Nr=Oe.get(In),_i=te.get(In),Mr=this._buildInstruction(Xt,r,_i,Nr,ai);if(Mr.errors&&Mr.errors.length)return void at.push(Mr);if(ai)return Xn.onStart(()=>lv(In,Mr.fromStyles)),Xn.onDestroy(()=>nd(In,Mr.toStyles)),void i.push(Xn);if(Xt.isFallbackTransition)return Xn.onStart(()=>lv(In,Mr.fromStyles)),Xn.onDestroy(()=>nd(In,Mr.toStyles)),void i.push(Xn);const Jr=[];Mr.timelines.forEach(oi=>{oi.stretchStartingKeyframe=!0,this.disabledNodes.has(oi.element)||Jr.push(oi)}),Mr.timelines=Jr,r.append(In,Mr.timelines),d.push({instruction:Mr,player:Xn,element:In}),Mr.queriedElements.forEach(oi=>$l(f,oi,[]).push(Xn)),Mr.preStyleProps.forEach((oi,Zi)=>{if(oi.size){let Yi=g.get(Zi);Yi||g.set(Zi,Yi=new Set),oi.forEach((Ra,Ba)=>Yi.add(Ba))}}),Mr.postStyleProps.forEach((oi,Zi)=>{let Yi=_.get(Zi);Yi||_.set(Zi,Yi=new Set),oi.forEach((Ra,Ba)=>Yi.add(Ba))})});if(at.length){const Gt=[];at.forEach(ln=>{Gt.push(function ace(e,n){return new Jt(3505,!1)}())}),it.forEach(ln=>ln.destroy()),this.reportError(Gt)}const Ct=new Map,mt=new Map;d.forEach(Gt=>{const ln=Gt.element;r.has(ln)&&(mt.set(ln,ln),this._beforeAnimationBuild(Gt.player.namespaceId,Gt.instruction,Ct))}),i.forEach(Gt=>{const ln=Gt.element;this._getPreviousPlayers(ln,!1,Gt.namespaceId,Gt.triggerName,null).forEach(Xn=>{$l(Ct,ln,[]).push(Xn),Xn.destroy()})});const Ft=Me.filter(Gt=>mZ(Gt,g,_)),nn=new Map;pZ(nn,this.driver,Fe,_,eh).forEach(Gt=>{mZ(Gt,g,_)&&Ft.push(Gt)});const pn=new Map;z.forEach((Gt,ln)=>{pZ(pn,this.driver,new Set(Gt),g,"!")}),Ft.forEach(Gt=>{const ln=nn.get(Gt),Xt=pn.get(Gt);nn.set(Gt,new Map([...Array.from(ln?.entries()??[]),...Array.from(Xt?.entries()??[])]))});const mn=[],sn=[],wn={};d.forEach(Gt=>{const{element:ln,player:Xt,instruction:Xn}=Gt;if(r.has(ln)){if(C.has(ln))return Xt.onDestroy(()=>nd(ln,Xn.toStyles)),Xt.disabled=!0,Xt.overrideTotalTime(Xn.totalTime),void i.push(Xt);let In=wn;if(mt.size>1){let Nr=ln;const _i=[];for(;Nr=Nr.parentNode;){const Mr=mt.get(Nr);if(Mr){In=Mr;break}_i.push(Nr)}_i.forEach(Mr=>mt.set(Mr,In))}const ai=this._buildAnimation(Xt.namespaceId,Xn,Ct,o,pn,nn);if(Xt.setRealPlayer(ai),In===wn)mn.push(Xt);else{const Nr=this.playersByElement.get(In);Nr&&Nr.length&&(Xt.parentPlayer=kf(Nr)),i.push(Xt)}}else lv(ln,Xn.fromStyles),Xt.onDestroy(()=>nd(ln,Xn.toStyles)),sn.push(Xt),C.has(ln)&&i.push(Xt)}),sn.forEach(Gt=>{const ln=o.get(Gt.element);if(ln&&ln.length){const Xt=kf(ln);Gt.setRealPlayer(Xt)}}),i.forEach(Gt=>{Gt.parentPlayer?Gt.syncPlayerEvents(Gt.parentPlayer):Gt.destroy()});for(let Gt=0;Gt<Me.length;Gt++){const ln=Me[Gt],Xt=ln[Nc];if(e0(ln,cP),Xt&&Xt.hasAnimation)continue;let Xn=[];if(f.size){let ai=f.get(ln);ai&&ai.length&&Xn.push(...ai);let Nr=this.driver.query(ln,TV,!0);for(let _i=0;_i<Nr.length;_i++){let Mr=f.get(Nr[_i]);Mr&&Mr.length&&Xn.push(...Mr)}}const In=Xn.filter(ai=>!ai.destroyed);In.length?lue(this,ln,In):this.processLeaveNode(ln)}return Me.length=0,mn.forEach(Gt=>{this.players.push(Gt),Gt.onDone(()=>{Gt.destroy();const ln=this.players.indexOf(Gt);this.players.splice(ln,1)}),Gt.play()}),mn}elementContainsData(n,t){let r=!1;const i=t[Nc];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(n).elementContainsData(t)||r}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,t,r,i,o){let d=[];if(t){const f=this.playersByQueriedElement.get(n);f&&(d=f)}else{const f=this.playersByElement.get(n);if(f){const g=!o||o==Sw;f.forEach(_=>{_.queued||!g&&_.triggerName!=i||d.push(_)})}}return(r||i)&&(d=d.filter(f=>!(r&&r!=f.namespaceId||i&&i!=f.triggerName))),d}_beforeAnimationBuild(n,t,r){const o=t.element,d=t.isRemovalTransition?void 0:n,f=t.isRemovalTransition?void 0:t.triggerName;for(const g of t.timelines){const _=g.element,C=_!==o,S=$l(r,_,[]);this._getPreviousPlayers(_,C,d,f,t.toState).forEach(z=>{const te=z.getRealPlayer();te.beforeDestroy&&te.beforeDestroy(),z.destroy(),S.push(z)})}lv(o,t.fromStyles)}_buildAnimation(n,t,r,i,o,d){const f=t.triggerName,g=t.element,_=[],C=new Set,S=new Set,k=t.timelines.map(te=>{const pe=te.element;C.add(pe);const Me=pe[Nc];if(Me&&Me.removedBeforeQueried)return new BC(te.duration,te.delay);const Re=pe!==g,Fe=function cue(e){const n=[];return vZ(e,n),n}((r.get(pe)||tue).map(Ct=>Ct.getRealPlayer())).filter(Ct=>!!Ct.element&&Ct.element===pe),Oe=o.get(pe),Be=d.get(pe),it=Uj(0,this._normalizer,0,te.keyframes,Oe,Be),at=this._buildPlayer(te,it,Fe);if(te.subTimeline&&i&&S.add(pe),Re){const Ct=new HV(n,f,pe);Ct.setRealPlayer(at),_.push(Ct)}return at});_.forEach(te=>{$l(this.playersByQueriedElement,te.element,[]).push(te),te.onDone(()=>function aue(e,n,t){let r=e.get(n);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&e.delete(n)}return r}(this.playersByQueriedElement,te.element,te))}),C.forEach(te=>Fc(te,Qj));const z=kf(k);return z.onDestroy(()=>{C.forEach(te=>e0(te,Qj)),nd(g,t.toStyles)}),S.forEach(te=>{$l(i,te,[]).push(z)}),z}_buildPlayer(n,t,r){return t.length>0?this.driver.animate(n.element,t,n.duration,n.delay,n.easing,r):new BC(n.duration,n.delay)}}class HV{constructor(n,t,r){this.namespaceId=n,this.triggerName=t,this.element=r,this._player=new BC,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>bV(n,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const t=this._player;t.triggerCallback&&n.onStart(()=>t.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,t){$l(this._queuedCallbacks,n,[]).push(t)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const t=this._player;t.triggerCallback&&t.triggerCallback(n)}}function CP(e){return e&&1===e.nodeType}function fZ(e,n){const t=e.style.display;return e.style.display=n??"none",t}function pZ(e,n,t,r,i){const o=[];t.forEach(g=>o.push(fZ(g)));const d=[];r.forEach((g,_)=>{const C=new Map;g.forEach(S=>{const k=n.computeStyle(_,S,i);C.set(S,k),(!k||0==k.length)&&(_[Nc]=nue,d.push(_))}),e.set(_,C)});let f=0;return t.forEach(g=>fZ(g,o[f++])),d}function gZ(e,n){const t=new Map;if(e.forEach(f=>t.set(f,[])),0==n.length)return t;const i=new Set(n),o=new Map;function d(f){if(!f)return 1;let g=o.get(f);if(g)return g;const _=f.parentNode;return g=t.has(_)?_:i.has(_)?1:d(_),o.set(f,g),g}return n.forEach(f=>{const g=d(f);1!==g&&t.get(g).push(f)}),t}function Fc(e,n){e.classList?.add(n)}function e0(e,n){e.classList?.remove(n)}function lue(e,n,t){kf(t).onDone(()=>e.processLeaveNode(n))}function vZ(e,n){for(let t=0;t<e.length;t++){const r=e[t];r instanceof AG?vZ(r.players,n):n.push(r)}}function mZ(e,n,t){const r=t.get(e);if(!r)return!1;let i=n.get(e);return i?r.forEach(o=>i.add(o)):n.set(e,r),t.delete(e),!0}class wP{constructor(n,t,r){this.bodyNode=n,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new iue(n,t,r),this._timelineEngine=new Kce(n,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(n,t,r,i,o){const d=n+"-"+i;let f=this._triggerCache[d];if(!f){const g=[],C=PV(this._driver,o,g,[]);if(g.length)throw function Xle(e,n){return new Jt(3404,!1)}();f=function Zce(e,n,t){return new Yce(e,n,t)}(i,C,this._normalizer),this._triggerCache[d]=f}this._transitionEngine.registerTrigger(t,i,f)}register(n,t){this._transitionEngine.register(n,t)}destroy(n,t){this._transitionEngine.destroy(n,t)}onInsert(n,t,r,i){this._transitionEngine.insertNode(n,t,r,i)}onRemove(n,t,r,i){this._transitionEngine.removeNode(n,t,i||!1,r)}disableAnimations(n,t){this._transitionEngine.markElementAsDisabled(n,t)}process(n,t,r,i){if("@"==r.charAt(0)){const[o,d]=Gj(r);this._timelineEngine.command(o,t,d,i)}else this._transitionEngine.trigger(n,t,r,i)}listen(n,t,r,i,o){if("@"==r.charAt(0)){const[d,f]=Gj(r);return this._timelineEngine.listen(d,t,f,o)}return this._transitionEngine.listen(n,t,r,i,o)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let hue=(()=>{class e{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let o=e.initialStylesByElement.get(t);o||e.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&nd(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(nd(this._element,this._initialStyles),this._endStyles&&(nd(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(lv(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(lv(this._element,this._endStyles),this._endStyles=null),nd(this._element,this._initialStyles),this._state=3)}}return e.initialStylesByElement=new WeakMap,e})();function UV(e){let n=null;return e.forEach((t,r)=>{(function fue(e){return"display"===e||"position"===e})(r)&&(n=n||new Map,n.set(r,t))}),n}class _Z{constructor(n,t,r,i){this.element=n,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(n){const t=[];return n.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(n,t,r){return n.animate(this._convertKeyframesToObject(t),r)}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&n.set(i,this._finished?r:rZ(this.element,i))}),this.currentSnapshot=n}triggerCallback(n){const t="start"===n?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class pue{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}matchesElement(n,t){return!1}containsElement(n,t){return Yj(n,t)}getParentElement(n){return SV(n)}query(n,t,r){return Xj(n,t,r)}computeStyle(n,t,r){return window.getComputedStyle(n)[t]}animate(n,t,r,i,o,d=[]){const g={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(g.easing=o);const _=new Map,C=d.filter(z=>z instanceof _Z);(function _ce(e,n){return 0===e||0===n})(r,i)&&C.forEach(z=>{z.currentSnapshot.forEach((te,pe)=>_.set(pe,te))});let S=function pce(e){return e.length?e[0]instanceof Map?e:e.map(n=>qj(n)):[]}(t).map(z=>Nf(z));S=function yce(e,n,t){if(t.size&&n.length){let r=n[0],i=[];if(t.forEach((o,d)=>{r.has(d)||i.push(d),r.set(d,o)}),i.length)for(let o=1;o<n.length;o++){let d=n[o];i.forEach(f=>d.set(f,rZ(e,f)))}}return n}(n,S,_);const k=function due(e,n){let t=null,r=null;return Array.isArray(n)&&n.length?(t=UV(n[0]),n.length>1&&(r=UV(n[n.length-1]))):n instanceof Map&&(t=UV(n)),t||r?new hue(e,t,r):null}(n,S);return new _Z(n,S,g,k)}}let gue=(()=>{class e extends SG{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:zo.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?MG(t):t;return yZ(this._renderer,null,r,"register",[i]),new vue(r,this._renderer)}}return e.\u0275fac=function(t){return new(t||e)(Lt(Pp),Lt(Rr))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();class vue extends class IK{}{constructor(n,t){super(),this._id=n,this._renderer=t}create(n,t){return new mue(this._id,n,t||{},this._renderer)}}class mue{constructor(n,t,r,i){this.id=n,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(n,t){return this._renderer.listen(this.element,`@@${this.id}:${n}`,t)}_command(n,...t){return yZ(this._renderer,this.element,this.id,n,t)}onDone(n){this._listen("done",n)}onStart(n){this._listen("start",n)}onDestroy(n){this._listen("destroy",n)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(n){this._command("setPosition",n)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function yZ(e,n,t,r,i){return e.setProperty(n,`@@${t}:${r}`,i)}const bZ="@.disabled";let _ue=(()=>{class e{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,d)=>{const f=d?.parentNode(o);f&&d.removeChild(f,o)}}createRenderer(t,r){const o=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let C=this._rendererCache.get(o);return C||(C=new xZ("",o,this.engine),this._rendererCache.set(o,C)),C}const d=r.id,f=r.id+"-"+this._currentId;this._currentId++,this.engine.register(f,t);const g=C=>{Array.isArray(C)?C.forEach(g):this.engine.registerTrigger(d,f,t,C.name,C)};return r.data.animation.forEach(g),new yue(this,f,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[d,f]=o;d(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return e.\u0275fac=function(t){return new(t||e)(Lt(Pp),Lt(wP),Lt(rr))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();class xZ{constructor(n,t,r){this.namespaceId=n,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(n,t){return this.delegate.createElement(n,t)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,t){this.delegate.appendChild(n,t),this.engine.onInsert(this.namespaceId,t,n,!1)}insertBefore(n,t,r,i=!0){this.delegate.insertBefore(n,t,r),this.engine.onInsert(this.namespaceId,t,n,i)}removeChild(n,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(n,t){return this.delegate.selectRootElement(n,t)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,t,r,i){this.delegate.setAttribute(n,t,r,i)}removeAttribute(n,t,r){this.delegate.removeAttribute(n,t,r)}addClass(n,t){this.delegate.addClass(n,t)}removeClass(n,t){this.delegate.removeClass(n,t)}setStyle(n,t,r,i){this.delegate.setStyle(n,t,r,i)}removeStyle(n,t,r){this.delegate.removeStyle(n,t,r)}setProperty(n,t,r){"@"==t.charAt(0)&&t==bZ?this.disableAnimations(n,!!r):this.delegate.setProperty(n,t,r)}setValue(n,t){this.delegate.setValue(n,t)}listen(n,t,r){return this.delegate.listen(n,t,r)}disableAnimations(n,t){this.engine.disableAnimations(n,t)}}class yue extends xZ{constructor(n,t,r,i){super(t,r,i),this.factory=n,this.namespaceId=t}setProperty(n,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==bZ?this.disableAnimations(n,r=void 0===r||!!r):this.engine.process(this.namespaceId,n,t.slice(1),r):this.delegate.setProperty(n,t,r)}listen(n,t,r){if("@"==t.charAt(0)){const i=function bue(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(n);let o=t.slice(1),d="";return"@"!=o.charAt(0)&&([o,d]=function xue(e){const n=e.indexOf(".");return[e.substring(0,n),e.slice(n+1)]}(o)),this.engine.listen(this.namespaceId,i,o,d,f=>{this.factory.scheduleListenerCallback(f._data||-1,r,f)})}return this.delegate.listen(n,t,r)}}let Cue=(()=>{class e extends wP{constructor(t,r,i,o){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return e.\u0275fac=function(t){return new(t||e)(Lt(Rr),Lt(DV),Lt(NV),Lt(zd))},e.\u0275prov=yn({token:e,factory:e.\u0275fac}),e})();const CZ=[{provide:SG,useClass:gue},{provide:NV,useFactory:function wue(){return new Uce}},{provide:wP,useClass:Cue},{provide:Pp,useFactory:function Sue(e,n,t){return new _ue(e,n,t)},deps:[ml,wP,rr]}],GV=[{provide:DV,useFactory:()=>new pue},{provide:Zo,useValue:"BrowserAnimations"},...CZ],wZ=[{provide:DV,useClass:$j},{provide:Zo,useValue:"NoopAnimations"},...CZ];let Due=(()=>{class e{static withConfig(t){return{ngModule:e,providers:t.disableAnimations?wZ:GV}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({providers:GV,imports:[Kz]}),e})(),Eue=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[GA,ti,GA,ti]}),e})(),Uue=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e}),e.\u0275inj=ur({imports:[GA,Rg,ti,pB,zl,GA,ti,pB,zj]}),e})();const Gue={openCVDirPath:"assets/opencv/"};let Wue=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=tr({type:e,bootstrap:[Mle]}),e.\u0275inj=ur({providers:[{provide:d8,useValue:Aq}],imports:[QZ.forRoot({echarts:()=>Promise.resolve().then(H.bind(H,8775))}),sle,aG,hJ,GJ,Uee,zl,CF,nI,u4,Fq,kse,My.forRoot(Gue),ree,Uue,zj,KG,Zq,iG,Eue,Kq,Kz,GG,Ree,Dle,Due]}),e})();(function Mk(){rE=!1})(),NZ().bootstrapModule(Wue).catch(e=>console.error(e))},5845:(Vt,Qe,H)=>{H.d(Qe,{ZT:()=>Se});var ue=function(T,R){return(ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,M){E.__proto__=M}||function(E,M){for(var A in M)Object.prototype.hasOwnProperty.call(M,A)&&(E[A]=M[A])})(T,R)};function Se(T,R){if("function"!=typeof R&&null!==R)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function E(){this.constructor=T}ue(T,R),T.prototype=null===R?Object.create(R):(E.prototype=R.prototype,new E)}},908:(Vt,Qe,H)=>{H.d(Qe,{ZT:()=>Se});var ue=function(T,R){return(ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,M){E.__proto__=M}||function(E,M){for(var A in M)Object.prototype.hasOwnProperty.call(M,A)&&(E[A]=M[A])})(T,R)};function Se(T,R){if("function"!=typeof R&&null!==R)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function E(){this.constructor=T}ue(T,R),T.prototype=null===R?Object.create(R):(E.prototype=R.prototype,new E)}}},Vt=>{Vt(Vt.s=7447)}]);